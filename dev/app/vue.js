!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,r){for(var s,a,c=0,l=[];c<i.length;c++)a=i[c],o[a]&&l.push.apply(l,o[a]),o[a]=0;for(s in r)e[s]=r[s];for(n&&n(i,r);l.length;)l.shift().call(null,t)};var i={},o={0:0,1:0,2:0};return t.e=function(e,n){if(0===o[e])return n.call(null,t);if(void 0!==o[e])o[e].push(n);else{o[e]=[n];var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=t.p+""+e+".app.js",i.appendChild(r)}},t.m=e,t.c=i,t.p="/hybrid-thorium/dev/app/",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(43),r=i(o),s=n(212),a=i(s),c=n(67),l=i(c),h=n(69),u=i(h),f=n(164),p=i(f),d=n(189),v=i(d),y=n(190),_=i(y);r["default"].config.debug=!0,r["default"].use(a["default"]),r["default"].use(u["default"]);var g=new a["default"],b=r["default"].extend({components:{SideNav:v["default"],SiteHeader:_["default"]},data:function(){return{ligerEndPoint:"https://api.cms.telus.com/legals",ligerApplicationKey:"b9738d67b89dfc782746d4a9cf4a1093"}}});g.map(l["default"]),g.afterEach(function(){setTimeout(function(){p["default"].highlightAll()},0)}),g.redirect({"*":"/get-started"}),g.start(b,"#app-main")},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=u[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(c(i.parts[r],t))}else{for(var s=[],r=0;r<i.parts.length;r++)s.push(c(i.parts[r],t));u[i.id]={id:i.id,refs:1,parts:s}}}}function o(e){for(var t=[],n={},i=0;i<e.length;i++){var o=e[i],r=o[0],s=o[1],a=o[2],c=o[3],l={css:s,media:a,sourceMap:c};n[r]?n[r].parts.push(l):t.push(n[r]={id:r,parts:[l]})}return t}function r(e,t){var n=d(),i=_[_.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),_.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=_.indexOf(e);t>=0&&_.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function c(e,t){var n,i,o;if(t.singleton){var r=y++;n=v||(v=a(t)),i=l.bind(null,n,r,!1),o=l.bind(null,n,r,!0)}else n=a(t),i=h.bind(null,n),o=function(){s(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function l(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=g(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function h(e,t){var n=t.css,i=t.media,o=t.sourceMap;if(i&&e.setAttribute("media",i),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var u={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),d=f(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,y=0,_=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return i(n,t),function(e){for(var r=[],s=0;s<n.length;s++){var a=n[s],c=u[a.id];c.refs--,r.push(c)}if(e){var l=o(e);i(l,t)}for(var s=0;s<r.length;s++){var c=r[s];if(0===c.refs){for(var h=0;h<c.parts.length;h++)c.parts[h]();delete u[c.id]}}}};var g=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){(function(t){var i=n(111),o=i("object"==typeof t&&t),r=i("object"==typeof self&&self),s=i("object"==typeof this&&this),a=o||r||s||Function("return this")();e.exports=a}).call(t,function(){return this}())},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var i,o;n(213),i=n(44),o=n(165),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){function i(e,t){var n=r(e,t);return o(n)?n:void 0}var o=n(103),r=n(119);e.exports=i},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(130),r=n(131),s=n(132),a=n(133),c=n(134);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){function i(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(151);e.exports=i},function(e,t,n){function i(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(127);e.exports=i},function(e,t,n){function i(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!r(e))||(a.test(e)||!s.test(e)||null!=t&&e in Object(t))}var o=n(4),r=n(16),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=i},function(e,t,n){var i=n(6),o=i(Object,"create");e.exports=o},function(e,t,n){function i(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}var o=n(16),r=1/0;e.exports=i},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;e.exports=n},function(e,t,n){function i(e){return"symbol"==typeof e||o(e)&&a.call(e)==r}var o=n(8),r="[object Symbol]",s=Object.prototype,a=s.toString;e.exports=i},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(135),r=n(136),s=n(137),a=n(138),c=n(139);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){function i(e){var t=o(e)?c.call(e):"";return t==r||t==s}var o=n(7),r="[object Function]",s="[object GeneratorFunction]",a=Object.prototype,c=a.toString;e.exports=i},function(e,t){function n(){u&&l&&(u=!1,l.length?h=l.concat(h):f=-1,h.length&&i())}function i(){if(!u){var e=s(n);u=!0;for(var t=h.length;t;){for(l=h,h=[];++f<t;)l&&l[f].run();f=-1,t=h.length}l=null,u=!1,a(e)}}function o(e,t){this.fun=e,this.array=t}function r(){}var s,a,c=e.exports={};!function(){try{s=setTimeout}catch(e){s=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(e){a=function(){throw new Error("clearTimeout is not defined")}}}();var l,h=[],u=!1,f=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new o(e,t)),1!==h.length||u||s(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=r,c.addListener=r,c.once=r,c.off=r,c.removeListener=r,c.removeAllListeners=r,c.emit=r,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(36),r=i(o);t["default"]={update:function(e){var t=this;e===!0&&(0,r["default"])(function(){t.el.tabIndex=0,t.el.focus()})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(70),r=i(o),s=n(71),a=i(s);t["default"]=[r["default"],a["default"]]},function(e,t,n){var i=n(6),o=n(3),r=i(o,"Map");e.exports=r},function(e,t,n){function i(e){this.__data__=new o(e)}var o=n(9),r=n(144),s=n(145),a=n(146),c=n(147),l=n(148);i.prototype.clear=r,i.prototype["delete"]=s,i.prototype.get=a,i.prototype.has=c,i.prototype.set=l,e.exports=i},function(e,t,n){var i=n(3),o=i.Symbol;e.exports=o},function(e,t,n){function i(e,t){t=r(t,e)?[t]:o(t);for(var n=0,i=t.length;null!=e&&n<i;)e=e[s(t[n++])];return n&&n==i?e:void 0}var o=n(29),r=n(12),s=n(14);e.exports=i},function(e,t,n){function i(e,t){return null!=e&&(s.call(e,t)||"object"==typeof e&&t in e&&null===o(e))}var o=n(117),r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,a,c){return e===t||(null==e||null==t||!r(e)&&!s(t)?e!==e&&t!==t:o(e,t,i,n,a,c))}var o=n(101),r=n(7),s=n(8);e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function i(e){return o(e)?e:r(e)}var o=n(4),r=n(149);e.exports=i},function(e,t,n){function i(e,t,n,i,c,l){var h=c&a,u=e.length,f=t.length;if(u!=f&&!(h&&f>u))return!1;var p=l.get(e);if(p)return p==t;var d=-1,v=!0,y=c&s?new o:void 0;for(l.set(e,t);++d<u;){var _=e[d],g=t[d];if(i)var b=h?i(g,_,d,t,e,l):i(_,g,d,e,t,l);if(void 0!==b){if(b)continue;v=!1;break}if(y){if(!r(t,function(e,t){if(!y.has(t)&&(_===e||n(_,e,i,c,l)))return y.add(t)})){v=!1;break}}else if(_!==g&&!n(_,g,i,c,l)){v=!1;break}}return l["delete"](e),v}var o=n(93),r=n(97),s=1,a=2;e.exports=i},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e,t){return t=null==t?i:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){function i(e){return e===e&&!o(e)}var o=n(7);e.exports=i},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var i=Function.prototype.toString;e.exports=n},function(e,t,n){var i=n(98),o=n(161),r=o(function(e,t){return i(e,1,t)});e.exports=r},function(e,t,n){function i(e){return o(e)&&a.call(e,"callee")&&(!l.call(e,"callee")||c.call(e)==r)}var o=n(156),r="[object Arguments]",s=Object.prototype,a=s.hasOwnProperty,c=s.toString,l=s.propertyIsEnumerable;e.exports=i},function(e,t,n){function i(e){return null!=e&&s(o(e))&&!r(e)}var o=n(115),r=n(18),s=n(15);e.exports=i},function(e,t,n){function i(e){return"string"==typeof e||!o(e)&&r(e)&&c.call(e)==s}var o=n(4),r=n(8),s="[object String]",a=Object.prototype,c=a.toString;e.exports=i},function(e,t,n){function i(e){var t=l(e);if(!t&&!a(e))return r(e);var n=s(e),i=!!n,h=n||[],u=h.length;for(var f in e)!o(e,f)||i&&("length"==f||c(f,u))||t&&"constructor"==f||h.push(f);return h}var o=n(26),r=n(105),s=n(126),a=n(38),c=n(32),l=n(129);e.exports=i},function(e,t,n){function i(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(162);e.exports=i},function(e,t,n){function i(e){if("number"==typeof e)return e;if(s(e))return a;if(r(e)){var t=o(e.valueOf)?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=h.test(e);return n||u.test(e)?f(e.slice(2),n?2:8):l.test(e)?a:+e}var o=n(18),r=n(7),s=n(16),a=NaN,c=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,u=/^0o[0-7]+$/i,f=parseInt;e.exports=i},function(e,t,n){(function(t,n){/*!
	 * Vue.js v1.0.26
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
"use strict";function i(e,t,n){if(r(e,t))return void(e[t]=n);if(e._isVue)return void i(e._data,t,n);var o=e.__ob__;if(!o)return void(e[t]=n);if(o.convert(t,n),o.dep.notify(),o.vms)for(var s=o.vms.length;s--;){var a=o.vms[s];a._proxy(t),a._digest()}return n}function o(e,t){if(r(e,t)){delete e[t];var n=e.__ob__;if(!n)return void(e._isVue&&(delete e._data[t],e._digest()));if(n.dep.notify(),n.vms)for(var i=n.vms.length;i--;){var o=n.vms[i];o._unproxy(t),o._digest()}}}function r(e,t){return Sn.call(e,t)}function s(e){return Vn.test(e)}function a(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function c(e){return null==e?"":e.toString()}function l(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t}function h(e){return"true"===e||"false"!==e&&e}function u(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}function f(e){return e.replace(Pn,p)}function p(e,t){return t?t.toUpperCase():""}function d(e){return e.replace(Rn,"$1-$2").toLowerCase()}function v(e){return e.replace(Mn,p)}function y(e,t){return function(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}}function _(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function g(e,t){for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function b(e){return null!==e&&"object"==typeof e}function m(e){return Fn.call(e)===Ln}function E(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function w(e,t){var n,i,o,r,s,a=function c(){var a=Date.now()-r;a<t&&a>=0?n=setTimeout(c,t-a):(n=null,s=e.apply(o,i),n||(o=i=null))};return function(){return o=this,i=arguments,r=Date.now(),n||(n=setTimeout(a,t)),s}}function x(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function k(e){var t=function n(){if(!n.cancelled)return e.apply(this,arguments)};return t.cancel=function(){t.cancelled=!0},t}function C(e,t){return e==t||!(!b(e)||!b(t))&&JSON.stringify(e)===JSON.stringify(t)}function $(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function N(){var e,t=ai.slice(pi,ui).trim();if(t){e={};var n=t.match(mi);e.name=n[0],n.length>1&&(e.args=n.slice(1).map(O))}e&&(ci.filters=ci.filters||[]).push(e),pi=ui+1}function O(e){if(Ei.test(e))return{value:l(e),dynamic:!1};var t=u(e),n=t===e;return{value:n?e:t,dynamic:n}}function A(e){var t=bi.get(e);if(t)return t;for(ai=e,di=vi=!1,yi=_i=gi=0,pi=0,ci={},ui=0,fi=ai.length;ui<fi;ui++)if(hi=li,li=ai.charCodeAt(ui),di)39===li&&92!==hi&&(di=!di);else if(vi)34===li&&92!==hi&&(vi=!vi);else if(124===li&&124!==ai.charCodeAt(ui+1)&&124!==ai.charCodeAt(ui-1))null==ci.expression?(pi=ui+1,ci.expression=ai.slice(0,ui).trim()):N();else switch(li){case 34:vi=!0;break;case 39:di=!0;break;case 40:gi++;break;case 41:gi--;break;case 91:_i++;break;case 93:_i--;break;case 123:yi++;break;case 125:yi--}return null==ci.expression?ci.expression=ai.slice(0,ui).trim():0!==pi&&N(),bi.put(e,ci),ci}function T(e){return e.replace(xi,"\\$&")}function j(){var e=T(ji.delimiters[0]),t=T(ji.delimiters[1]),n=T(ji.unsafeDelimiters[0]),i=T(ji.unsafeDelimiters[1]);Ci=new RegExp(n+"((?:.|\\n)+?)"+i+"|"+e+"((?:.|\\n)+?)"+t,"g"),$i=new RegExp("^"+n+"((?:.|\\n)+?)"+i+"$"),ki=new $(1e3)}function D(e){ki||j();var t=ki.get(e);if(t)return t;if(!Ci.test(e))return null;for(var n,i,o,r,s,a,c=[],l=Ci.lastIndex=0;n=Ci.exec(e);)i=n.index,i>l&&c.push({value:e.slice(l,i)}),o=$i.test(n[0]),r=o?n[1]:n[2],s=r.charCodeAt(0),a=42===s,r=a?r.slice(1):r,c.push({tag:!0,value:r.trim(),html:o,oneTime:a}),l=i+n[0].length;return l<e.length&&c.push({value:e.slice(l)}),ki.put(e,c),c}function S(e,t){return e.length>1?e.map(function(e){return V(e,t)}).join("+"):V(e[0],t,!0)}function V(e,t,n){return e.tag?e.oneTime&&t?'"'+t.$eval(e.value)+'"':P(e.value,n):'"'+e.value+'"'}function P(e,t){if(Ni.test(e)){var n=A(e);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+e+")"}return t?e:"("+e+")"}function R(e,t,n,i){L(e,1,function(){t.appendChild(e)},n,i)}function M(e,t,n,i){L(e,1,function(){W(e,t)},n,i)}function F(e,t,n){L(e,-1,function(){J(e)},t,n)}function L(e,t,n,i,o){var r=e.__v_trans;if(!r||!r.hooks&&!Xn||!i._isCompiled||i.$parent&&!i.$parent._isCompiled)return n(),void(o&&o());var s=t>0?"enter":"leave";r[s](n,o)}function I(e){if("string"==typeof e){var t=e;e=document.querySelector(e),e||"production"!==n.env.NODE_ENV&&Di("Cannot find element: "+t)}return e}function H(e){if(!e)return!1;var t=e.ownerDocument.documentElement,n=e.parentNode;return t===e||t===n||!(!n||1!==n.nodeType||!t.contains(n))}function z(e,t){var n=e.getAttribute(t);return null!==n&&e.removeAttribute(t),n}function B(e,t){var n=z(e,":"+t);return null===n&&(n=z(e,"v-bind:"+t)),n}function U(e,t){return e.hasAttribute(t)||e.hasAttribute(":"+t)||e.hasAttribute("v-bind:"+t)}function W(e,t){t.parentNode.insertBefore(e,t)}function q(e,t){t.nextSibling?W(e,t.nextSibling):t.parentNode.appendChild(e)}function J(e){e.parentNode.removeChild(e)}function Q(e,t){t.firstChild?W(e,t.firstChild):t.appendChild(e)}function Y(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function G(e,t,n,i){e.addEventListener(t,n,i)}function K(e,t,n){e.removeEventListener(t,n)}function Z(e){var t=e.className;return"object"==typeof t&&(t=t.baseVal||""),t}function X(e,t){qn&&!/svg$/.test(e.namespaceURI)?e.className=t:e.setAttribute("class",t)}function ee(e,t){if(e.classList)e.classList.add(t);else{var n=" "+Z(e)+" ";n.indexOf(" "+t+" ")<0&&X(e,(n+t).trim())}}function te(e,t){if(e.classList)e.classList.remove(t);else{for(var n=" "+Z(e)+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");X(e,n.trim())}e.className||e.removeAttribute("class")}function ne(e,t){var n,i;if(re(e)&&he(e.content)&&(e=e.content),e.hasChildNodes())for(ie(e),i=t?document.createDocumentFragment():document.createElement("div");n=e.firstChild;)i.appendChild(n);return i}function ie(e){for(var t;t=e.firstChild,oe(t);)e.removeChild(t);for(;t=e.lastChild,oe(t);)e.removeChild(t)}function oe(e){return e&&(3===e.nodeType&&!e.data.trim()||8===e.nodeType)}function re(e){return e.tagName&&"template"===e.tagName.toLowerCase()}function se(e,t){var n=ji.debug?document.createComment(e):document.createTextNode(t?" ":"");return n.__v_anchor=!0,n}function ae(e){if(e.hasAttributes())for(var t=e.attributes,n=0,i=t.length;n<i;n++){var o=t[n].name;if(Pi.test(o))return f(o.replace(Pi,""))}}function ce(e,t,n){for(var i;e!==t;)i=e.nextSibling,n(e),e=i;n(t)}function le(e,t,n,i,o){function r(){if(a++,s&&a>=c.length){for(var e=0;e<c.length;e++)i.appendChild(c[e]);o&&o()}}var s=!1,a=0,c=[];ce(e,t,function(e){e===t&&(s=!0),c.push(e),F(e,n,r)})}function he(e){return e&&11===e.nodeType}function ue(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function fe(e,t){var i=e.tagName.toLowerCase(),o=e.hasAttributes();if(Ri.test(i)||Mi.test(i)){if(o)return pe(e,t)}else{if(me(t,"components",i))return{id:i};var r=o&&pe(e,t);if(r)return r;if("production"!==n.env.NODE_ENV){var s=t._componentNameMap&&t._componentNameMap[i];s?Di("Unknown custom element: <"+i+"> - did you mean <"+s+">? HTML is case-insensitive, remember to use kebab-case in templates."):Fi(e,i)&&Di("Unknown custom element: <"+i+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function pe(e,t){var n=e.getAttribute("is");if(null!=n){if(me(t,"components",n))return e.removeAttribute("is"),{id:n}}else if(n=B(e,"is"),null!=n)return{id:n,dynamic:!0}}function de(e,t){var n,o,s;for(n in t)o=e[n],s=t[n],r(e,n)?b(o)&&b(s)&&de(o,s):i(e,n,s);return e}function ve(e,t){var n=Object.create(e||null);return t?g(n,ge(t)):n}function ye(e){if(e.components){var t,i=e.components=ge(e.components),o=Object.keys(i);if("production"!==n.env.NODE_ENV)var r=e._componentNameMap={};for(var s=0,a=o.length;s<a;s++){var c=o[s];Ri.test(c)||Mi.test(c)?"production"!==n.env.NODE_ENV&&Di("Do not use built-in or reserved HTML elements as component id: "+c):("production"!==n.env.NODE_ENV&&(r[c.replace(/-/g,"").toLowerCase()]=d(c)),t=i[c],m(t)&&(i[c]=Nn.extend(t)))}}}function _e(e){var t,n,i=e.props;if(In(i))for(e.props={},t=i.length;t--;)n=i[t],"string"==typeof n?e.props[n]=null:n.name&&(e.props[n.name]=n);else if(m(i)){var o=Object.keys(i);for(t=o.length;t--;)n=i[o[t]],"function"==typeof n&&(i[o[t]]={type:n})}}function ge(e){if(In(e)){for(var t,i={},o=e.length;o--;){t=e[o];var r="function"==typeof t?t.options&&t.options.name||t.id:t.name||t.id;r?i[r]=t:"production"!==n.env.NODE_ENV&&Di('Array-syntax assets must provide a "name" or "id" field.')}return i}return e}function be(e,t,i){function o(n){var o=Li[n]||Ii;a[n]=o(e[n],t[n],i,n)}ye(t),_e(t),"production"!==n.env.NODE_ENV&&t.propsData&&!i&&Di("propsData can only be used as an instantiation option.");var s,a={};if(t["extends"]&&(e="function"==typeof t["extends"]?be(e,t["extends"].options,i):be(e,t["extends"],i)),t.mixins)for(var c=0,l=t.mixins.length;c<l;c++){var h=t.mixins[c],u=h.prototype instanceof Nn?h.options:h;e=be(e,u,i)}for(s in e)o(s);for(s in t)r(e,s)||o(s);return a}function me(e,t,i,o){if("string"==typeof i){var r,s=e[t],a=s[i]||s[r=f(i)]||s[r.charAt(0).toUpperCase()+r.slice(1)];return"production"!==n.env.NODE_ENV&&o&&!a&&Di("Failed to resolve "+t.slice(0,-1)+": "+i,e),a}}function Ee(){this.id=Hi++,this.subs=[]}function we(e){Wi=!1,e(),Wi=!0}function xe(e){if(this.value=e,this.dep=new Ee,E(e,"__ob__",this),In(e)){var t=Hn?ke:Ce;t(e,Bi,Ui),this.observeArray(e)}else this.walk(e)}function ke(e,t){e.__proto__=t}function Ce(e,t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];E(e,r,t[r])}}function $e(e,t){if(e&&"object"==typeof e){var n;return r(e,"__ob__")&&e.__ob__ instanceof xe?n=e.__ob__:Wi&&(In(e)||m(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new xe(e)),n&&t&&n.addVm(t),n}}function Ne(e,t,n){var i=new Ee,o=Object.getOwnPropertyDescriptor(e,t);if(!o||o.configurable!==!1){var r=o&&o.get,s=o&&o.set,a=$e(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=r?r.call(e):n;if(Ee.target&&(i.depend(),a&&a.dep.depend(),In(t)))for(var o,s=0,c=t.length;s<c;s++)o=t[s],o&&o.__ob__&&o.__ob__.dep.depend();return t},set:function(t){var o=r?r.call(e):n;t!==o&&(s?s.call(e,t):n=t,a=$e(t),i.notify())}})}}function Oe(e){e.prototype._init=function(e){e=e||{},this.$el=null,this.$parent=e.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=Ji++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=e._context||this.$parent,this._scope=e._scope,this._frag=e._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),e=this.$options=be(this.constructor.options,e,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),e.el&&this.$mount(e.el)}}function Ae(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&t<=122||t>=65&&t<=90?"ident":t>=49&&t<=57?"number":"else"}function Te(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(s(t)?u(t):"*"+t)}function je(e){function t(){var t=e[h+1];if(u===oo&&"'"===t||u===ro&&'"'===t)return h++,i="\\"+t,p[Yi](),!0}var n,i,o,r,s,a,c,l=[],h=-1,u=Xi,f=0,p=[];for(p[Gi]=function(){void 0!==o&&(l.push(o),o=void 0)},p[Yi]=function(){void 0===o?o=i:o+=i},p[Ki]=function(){p[Yi](),f++},p[Zi]=function(){if(f>0)f--,u=io,p[Yi]();else{if(f=0,o=Te(o),o===!1)return!1;p[Gi]()}};null!=u;)if(h++,n=e[h],"\\"!==n||!t()){if(r=Ae(n),c=co[u],s=c[r]||c["else"]||ao,s===ao)return;if(u=s[0],a=p[s[1]],a&&(i=s[2],i=void 0===i?n:i,a()===!1))return;if(u===so)return l.raw=e,l}}function De(e){var t=Qi.get(e);return t||(t=je(e),t&&Qi.put(e,t)),t}function Se(e,t){return ze(t).get(e)}function Ve(e,t,o){var r=e;if("string"==typeof t&&(t=je(t)),!t||!b(e))return!1;for(var s,a,c=0,l=t.length;c<l;c++)s=e,a=t[c],"*"===a.charAt(0)&&(a=ze(a.slice(1)).get.call(r,r)),c<l-1?(e=e[a],b(e)||(e={},"production"!==n.env.NODE_ENV&&s._isVue&&lo(t,s),i(s,a,e))):In(e)?e.$set(a,o):a in e?e[a]=o:("production"!==n.env.NODE_ENV&&e._isVue&&lo(t,e),i(e,a,o));return!0}function Pe(){}function Re(e,t){var n=ko.length;return ko[n]=t?e.replace(go,"\\n"):e,'"'+n+'"'}function Me(e){var t=e.charAt(0),n=e.slice(1);return po.test(n)?e:(n=n.indexOf('"')>-1?n.replace(mo,Fe):n,t+"scope."+n)}function Fe(e,t){return ko[t]}function Le(e){yo.test(e)&&"production"!==n.env.NODE_ENV&&Di("Avoid using reserved keywords in expression: "+e),ko.length=0;var t=e.replace(bo,Re).replace(_o,"");return t=(" "+t).replace(wo,Me).replace(mo,Fe),Ie(t)}function Ie(e){try{return new Function("scope","return "+e+";")}catch(t){return"production"!==n.env.NODE_ENV&&Di(t.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+e),Pe}}function He(e){var t=De(e);return t?function(e,n){Ve(e,t,n)}:void("production"!==n.env.NODE_ENV&&Di("Invalid setter expression: "+e))}function ze(e,t){e=e.trim();var n=uo.get(e);if(n)return t&&!n.set&&(n.set=He(n.exp)),n;var i={exp:e};return i.get=Be(e)&&e.indexOf("[")<0?Ie("scope."+e):Le(e),t&&(i.set=He(e)),uo.put(e,i),i}function Be(e){return Eo.test(e)&&!xo.test(e)&&"Math."!==e.slice(0,5)}function Ue(){$o.length=0,No.length=0,Oo={},Ao={},To=!1}function We(){for(var e=!0;e;)e=!1,qe($o),qe(No),$o.length?e=!0:(Bn&&ji.devtools&&Bn.emit("flush"),Ue())}function qe(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.id;if(Oo[o]=null,i.run(),"production"!==n.env.NODE_ENV&&null!=Oo[o]&&(Ao[o]=(Ao[o]||0)+1,Ao[o]>ji._maxUpdateCount)){Di('You may have an infinite update loop for watcher with expression "'+i.expression+'"',i.vm);break}}e.length=0}function Je(e){var t=e.id;if(null==Oo[t]){var n=e.user?No:$o;Oo[t]=n.length,n.push(e),To||(To=!0,oi(We))}}function Qe(e,t,n,i){i&&g(this,i);var o="function"==typeof t;if(this.vm=e,e._watchers.push(this),this.expression=t,this.cb=n,this.id=++jo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ri,this.newDepIds=new ri,this.prevError=null,o)this.getter=t,this.setter=void 0;else{var r=ze(t,this.twoWay);this.getter=r.get,this.setter=r.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function Ye(e,t){var n=void 0,i=void 0;t||(t=Do,t.clear());var o=In(e),r=b(e);if((o||r)&&Object.isExtensible(e)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(o)for(n=e.length;n--;)Ye(e[n],t);else if(r)for(i=Object.keys(e),n=i.length;n--;)Ye(e[i[n]],t)}}function Ge(e){return re(e)&&he(e.content)}function Ke(e,t){var n=t?e:e.trim(),i=Vo.get(n);if(i)return i;var o=document.createDocumentFragment(),r=e.match(Mo),s=Fo.test(e),a=Lo.test(e);if(r||s||a){var c=r&&r[1],l=Ro[c]||Ro.efault,h=l[0],u=l[1],f=l[2],p=document.createElement("div");for(p.innerHTML=u+e+f;h--;)p=p.lastChild;for(var d;d=p.firstChild;)o.appendChild(d)}else o.appendChild(document.createTextNode(e));return t||ie(o),Vo.put(n,o),o}function Ze(e){if(Ge(e))return Ke(e.innerHTML);if("SCRIPT"===e.tagName)return Ke(e.textContent);for(var t,n=Xe(e),i=document.createDocumentFragment();t=n.firstChild;)i.appendChild(t);return ie(i),i}function Xe(e){if(!e.querySelectorAll)return e.cloneNode();var t,n,i,o=e.cloneNode(!0);if(Io){var r=o;if(Ge(e)&&(e=e.content,r=o.content),n=e.querySelectorAll("template"),n.length)for(i=r.querySelectorAll("template"),t=i.length;t--;)i[t].parentNode.replaceChild(Xe(n[t]),i[t])}if(Ho)if("TEXTAREA"===e.tagName)o.value=e.value;else if(n=e.querySelectorAll("textarea"),n.length)for(i=o.querySelectorAll("textarea"),t=i.length;t--;)i[t].value=n[t].value;return o}function et(e,t,n){var i,o;return he(e)?(ie(e),t?Xe(e):e):("string"==typeof e?n||"#"!==e.charAt(0)?o=Ke(e,n):(o=Po.get(e),o||(i=document.getElementById(e.slice(1)),i&&(o=Ze(i),Po.put(e,o)))):e.nodeType&&(o=Ze(e)),o&&t?Xe(o):o)}function tt(e,t,n,i,o,r){this.children=[],this.childFrags=[],this.vm=t,this.scope=o,this.inserted=!1,this.parentFrag=r,r&&r.childFrags.push(this),this.unlink=e(t,n,i,o,this);var s=this.single=1===n.childNodes.length&&!n.childNodes[0].__v_anchor;s?(this.node=n.childNodes[0],this.before=nt,this.remove=it):(this.node=se("fragment-start"),this.end=se("fragment-end"),this.frag=n,Q(this.node,n),n.appendChild(this.end),this.before=ot,this.remove=rt),this.node.__v_frag=this}function nt(e,t){this.inserted=!0;var n=t!==!1?M:W;n(this.node,e,this.vm),H(this.node)&&this.callHook(st)}function it(){this.inserted=!1;var e=H(this.node),t=this;this.beforeRemove(),F(this.node,this.vm,function(){e&&t.callHook(at),t.destroy()})}function ot(e,t){this.inserted=!0;var n=this.vm,i=t!==!1?M:W;ce(this.node,this.end,function(t){i(t,e,n)}),H(this.node)&&this.callHook(st)}function rt(){this.inserted=!1;var e=this,t=H(this.node);this.beforeRemove(),le(this.node,this.end,this.vm,this.frag,function(){t&&e.callHook(at),e.destroy()})}function st(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function at(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}function ct(e,t){this.vm=e;var n,i="string"==typeof t;i||re(t)&&!t.hasAttribute("v-if")?n=et(t,!0):(n=document.createDocumentFragment(),n.appendChild(t)),this.template=n;var o,r=e.constructor.cid;if(r>0){var s=r+(i?t:ue(t));o=Uo.get(s),o||(o=Lt(n,e.$options,!0),Uo.put(s,o))}else o=Lt(n,e.$options,!0);this.linker=o}function lt(e,t,n){var i=e.node.previousSibling;if(i){for(e=i.__v_frag;!(e&&e.forId===n&&e.inserted||i===t);){if(i=i.previousSibling,!i)return;e=i.__v_frag}return e}}function ht(e){var t=e.node;if(e.end)for(;!t.__vue__&&t!==e.end&&t.nextSibling;)t=t.nextSibling;return t.__vue__}function ut(e){for(var t=-1,n=new Array(Math.floor(e));++t<e;)n[t]=t;return n}function ft(e,t,n,i){return i?"$index"===i?e:i.charAt(0).match(/\w/)?Se(n,i):n[i]:t||n}function pt(e,t,n){for(var i,o,r,s=t?[]:null,a=0,c=e.options.length;a<c;a++)if(i=e.options[a],r=n?i.hasAttribute("selected"):i.selected){if(o=i.hasOwnProperty("_value")?i._value:i.value,!t)return o;s.push(o)}return s}function dt(e,t){for(var n=e.length;n--;)if(C(e[n],t))return n;return-1}function vt(e,t){var n=t.map(function(e){var t=e.charCodeAt(0);return t>47&&t<58?parseInt(e,10):1===e.length&&(t=e.toUpperCase().charCodeAt(0),t>64&&t<91)?t:ur[e]});return n=[].concat.apply([],n),function(t){if(n.indexOf(t.keyCode)>-1)return e.call(this,t)}}function yt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function _t(e){return function(t){return t.preventDefault(),e.call(this,t)}}function gt(e){return function(t){if(t.target===t.currentTarget)return e.call(this,t)}}function bt(e){if(yr[e])return yr[e];var t=mt(e);return yr[e]=yr[t]=t,t}function mt(e){e=d(e);var t=f(e),n=t.charAt(0).toUpperCase()+t.slice(1);_r||(_r=document.createElement("div"));var i,o=pr.length;if("filter"!==t&&t in _r.style)return{kebab:e,camel:t};for(;o--;)if(i=dr[o]+n,i in _r.style)return{kebab:pr[o]+e,camel:i}}function Et(e){var t=[];if(In(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];if(o)if("string"==typeof o)t.push(o);else for(var r in o)o[r]&&t.push(r)}else if(b(e))for(var s in e)e[s]&&t.push(s);return t}function wt(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}function xt(e,t,n){function i(){++r>=o?n():e[r].call(t,i)}var o=e.length,r=0;e[0].call(t,i)}function kt(e,t,i){for(var o,r,a,c,l,h,u,p=[],v=Object.keys(t),y=v.length;y--;)if(r=v[y],o=t[r]||Sr,"production"===n.env.NODE_ENV||"$data"!==r)if(l=f(r),Vr.test(l)){if(u={name:r,path:l,options:o,mode:Dr.ONE_WAY,raw:null},a=d(r),null===(c=B(e,a))&&(null!==(c=B(e,a+".sync"))?u.mode=Dr.TWO_WAY:null!==(c=B(e,a+".once"))&&(u.mode=Dr.ONE_TIME)),null!==c)u.raw=c,h=A(c),c=h.expression,u.filters=h.filters,s(c)&&!h.filters?u.optimizedLiteral=!0:(u.dynamic=!0,"production"===n.env.NODE_ENV||u.mode!==Dr.TWO_WAY||Pr.test(c)||(u.mode=Dr.ONE_WAY,Di("Cannot bind two-way prop with non-settable parent path: "+c,i))),u.parentPath=c,"production"!==n.env.NODE_ENV&&o.twoWay&&u.mode!==Dr.TWO_WAY&&Di('Prop "'+r+'" expects a two-way binding type.',i);else if(null!==(c=z(e,a)))u.raw=c;else if("production"!==n.env.NODE_ENV){var _=l.toLowerCase();c=/[A-Z\-]/.test(r)&&(e.getAttribute(_)||e.getAttribute(":"+_)||e.getAttribute("v-bind:"+_)||e.getAttribute(":"+_+".once")||e.getAttribute("v-bind:"+_+".once")||e.getAttribute(":"+_+".sync")||e.getAttribute("v-bind:"+_+".sync")),c?Di("Possible usage error for prop `"+_+"` - did you mean `"+a+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",i):o.required&&Di("Missing required prop: "+r,i)}p.push(u)}else"production"!==n.env.NODE_ENV&&Di('Invalid prop key: "'+r+'". Prop keys must be valid identifiers.',i);else Di("Do not use $data as prop.",i);return Ct(p)}function Ct(e){return function(t,n){t._props={};for(var i,o,s,a,c,f=t.$options.propsData,p=e.length;p--;)if(i=e[p],c=i.raw,o=i.path,s=i.options,t._props[o]=i,f&&r(f,o)&&Nt(t,i,f[o]),null===c)Nt(t,i,void 0);else if(i.dynamic)i.mode===Dr.ONE_TIME?(a=(n||t._context||t).$get(i.parentPath),Nt(t,i,a)):t._context?t._bindDir({name:"prop",def:Mr,prop:i},null,null,n):Nt(t,i,t.$get(i.parentPath));else if(i.optimizedLiteral){var v=u(c);a=v===c?h(l(c)):v,Nt(t,i,a)}else a=s.type===Boolean&&(""===c||c===d(i.name))||c,Nt(t,i,a)}}function $t(e,t,n,i){var o=t.dynamic&&Be(t.parentPath),r=n;void 0===r&&(r=At(e,t)),r=jt(t,r,e);var s=r!==n;Tt(t,r,e)||(r=void 0),o&&!s?we(function(){i(r)}):i(r)}function Nt(e,t,n){$t(e,t,n,function(n){Ne(e,t.path,n)})}function Ot(e,t,n){$t(e,t,n,function(n){e[t.path]=n})}function At(e,t){var i=t.options;if(!r(i,"default"))return i.type!==Boolean&&void 0;var o=i["default"];return b(o)&&"production"!==n.env.NODE_ENV&&Di('Invalid default value for prop "'+t.name+'": Props with type Object/Array must use a factory function to return the default value.',e),"function"==typeof o&&i.type!==Function?o.call(e):o}function Tt(e,t,i){if(!e.options.required&&(null===e.raw||null==t))return!0;var o=e.options,r=o.type,s=!r,a=[];if(r){In(r)||(r=[r]);for(var c=0;c<r.length&&!s;c++){var l=Dt(t,r[c]);a.push(l.expectedType),s=l.valid}}if(!s)return"production"!==n.env.NODE_ENV&&Di('Invalid prop: type check failed for prop "'+e.name+'". Expected '+a.map(St).join(", ")+", got "+Vt(t)+".",i),!1;var h=o.validator;return!(h&&!h(t))||("production"!==n.env.NODE_ENV&&Di('Invalid prop: custom validator check failed for prop "'+e.name+'".',i),!1)}function jt(e,t,i){var o=e.options.coerce;return o?"function"==typeof o?o(t):("production"!==n.env.NODE_ENV&&Di('Invalid coerce for prop "'+e.name+'": expected function, got '+typeof o+".",i),t):t}function Dt(e,t){var n,i;return t===String?(i="string",n=typeof e===i):t===Number?(i="number",n=typeof e===i):t===Boolean?(i="boolean",n=typeof e===i):t===Function?(i="function",n=typeof e===i):t===Object?(i="object",n=m(e)):t===Array?(i="array",n=In(e)):n=e instanceof t,{valid:n,expectedType:i}}function St(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"custom type"}function Vt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Pt(e){Fr.push(e),Lr||(Lr=!0,oi(Rt))}function Rt(){for(var e=document.documentElement.offsetHeight,t=0;t<Fr.length;t++)Fr[t]();return Fr=[],Lr=!1,e}function Mt(e,t,i,o){this.id=t,this.el=e,this.enterClass=i&&i.enterClass||t+"-enter",this.leaveClass=i&&i.leaveClass||t+"-leave",this.hooks=i,this.vm=o,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=i&&i.type,"production"!==n.env.NODE_ENV&&this.type&&this.type!==Ir&&this.type!==Hr&&Di('invalid CSS transition type for transition="'+this.id+'": '+this.type,o);var r=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(e){r[e]=y(r[e],r)})}function Ft(e){if(/svg$/.test(e.namespaceURI)){var t=e.getBoundingClientRect();return!(t.width||t.height)}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function Lt(e,t,n){var i=n||!t._asComponent?qt(e,t):null,o=i&&i.terminal||hn(e)||!e.hasChildNodes()?null:Zt(e.childNodes,t);return function(e,t,n,r,s){var a=_(t.childNodes),c=It(function(){i&&i(e,t,n,r,s),o&&o(e,a,n,r,s)},e);return zt(e,c)}}function It(e,t){"production"===n.env.NODE_ENV&&(t._directives=[]);var i=t._directives.length;e();var o=t._directives.slice(i);o.sort(Ht);for(var r=0,s=o.length;r<s;r++)o[r]._bind();return o}function Ht(e,t){return e=e.descriptor.def.priority||es,t=t.descriptor.def.priority||es,e>t?-1:e===t?0:1}function zt(e,t,n,i){function o(o){Bt(e,t,o),n&&i&&Bt(n,i)}return o.dirs=t,o}function Bt(e,t,i){for(var o=t.length;o--;)t[o]._teardown(),"production"===n.env.NODE_ENV||i||e._directives.$remove(t[o])}function Ut(e,t,n,i){var o=kt(t,n,e),r=It(function(){o(e,i)},e);return zt(e,r)}function Wt(e,t,i){var o,r,s=t._containerAttrs,a=t._replacerAttrs;if(11!==e.nodeType)t._asComponent?(s&&i&&(o=sn(s,i)),a&&(r=sn(a,t))):r=sn(e.attributes,t);else if("production"!==n.env.NODE_ENV&&s){var c=s.filter(function(e){return e.name.indexOf("_v-")<0&&!Gr.test(e.name)&&"slot"!==e.name}).map(function(e){return'"'+e.name+'"'});if(c.length){var l=c.length>1;Di("Attribute"+(l?"s ":" ")+c.join(", ")+(l?" are":" is")+" ignored on component <"+t.el.tagName.toLowerCase()+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return t._containerAttrs=t._replacerAttrs=null,function(e,t,n){var i,s=e._context;s&&o&&(i=It(function(){o(s,t,null,n)},s));var a=It(function(){r&&r(e,t)},e);return zt(e,a,s,i)}}function qt(e,t){var n=e.nodeType;return 1!==n||hn(e)?3===n&&e.data.trim()?Qt(e,t):null:Jt(e,t)}function Jt(e,t){if("TEXTAREA"===e.tagName){var n=D(e.value);n&&(e.setAttribute(":value",S(n)),e.value="")}var i,o=e.hasAttributes(),r=o&&_(e.attributes);return o&&(i=nn(e,r,t)),i||(i=en(e,t)),i||(i=tn(e,t)),!i&&o&&(i=sn(r,t)),i}function Qt(e,t){if(e._skip)return Yt;var n=D(e.wholeText);if(!n)return null;for(var i=e.nextSibling;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var o,r,s=document.createDocumentFragment(),a=0,c=n.length;a<c;a++)r=n[a],o=r.tag?Gt(r,t):document.createTextNode(r.value),s.appendChild(o);return Kt(n,s,t)}function Yt(e,t){J(t)}function Gt(e,t){function n(t){if(!e.descriptor){var n=A(e.value);e.descriptor={name:t,def:Ar[t],expression:n.expression,filters:n.filters}}}var i;return e.oneTime?i=document.createTextNode(e.value):e.html?(i=document.createComment("v-html"),n("html")):(i=document.createTextNode(" "),n("text")),i}function Kt(e,t){return function(n,i,o,r){for(var s,a,l,h=t.cloneNode(!0),u=_(h.childNodes),f=0,p=e.length;f<p;f++)s=e[f],a=s.value,s.tag&&(l=u[f],s.oneTime?(a=(r||n).$eval(a),s.html?Y(l,et(a,!0)):l.data=c(a)):n._bindDir(s.descriptor,l,o,r));Y(i,h)}}function Zt(e,t){for(var n,i,o,r=[],s=0,a=e.length;s<a;s++)o=e[s],n=qt(o,t),i=n&&n.terminal||"SCRIPT"===o.tagName||!o.hasChildNodes()?null:Zt(o.childNodes,t),r.push(n,i);return r.length?Xt(r):null}function Xt(e){return function(t,n,i,o,r){for(var s,a,c,l=0,h=0,u=e.length;l<u;h++){s=n[h],a=e[l++],c=e[l++];var f=_(s.childNodes);a&&a(t,s,i,o,r),c&&c(t,f,i,o,r)}}}function en(e,t){var n=e.tagName.toLowerCase();if(!Ri.test(n)){var i=me(t,"elementDirectives",n);return i?rn(e,n,"",t,i):void 0}}function tn(e,t){var n=fe(e,t);if(n){var i=ae(e),o={name:"component",ref:i,expression:n.id,def:Qr.component,modifiers:{literal:!n.dynamic}},r=function(e,t,n,r,s){i&&Ne((r||e).$refs,i,null),e._bindDir(o,t,n,r,s)};return r.terminal=!0,r}}function nn(e,t,n){if(null!==z(e,"v-pre"))return on;if(e.hasAttribute("v-else")){var i=e.previousElementSibling;if(i&&i.hasAttribute("v-if"))return on}for(var o,r,s,a,c,l,h,u,f,p,d=0,v=t.length;d<v;d++)o=t[d],r=o.name.replace(Zr,""),(c=r.match(Kr))&&(f=me(n,"directives",c[1]),f&&f.terminal&&(!p||(f.priority||ts)>p.priority)&&(p=f,h=o.name,a=an(o.name),s=o.value,l=c[1],u=c[2]));return p?rn(e,l,s,n,p,h,u,a):void 0}function on(){}function rn(e,t,n,i,o,r,s,a){var c=A(n),l={name:t,arg:s,expression:c.expression,filters:c.filters,raw:n,attr:r,modifiers:a,def:o};"for"!==t&&"router-view"!==t||(l.ref=ae(e));var h=function(e,t,n,i,o){l.ref&&Ne((i||e).$refs,l.ref,null),e._bindDir(l,t,n,i,o)};return h.terminal=!0,h}function sn(e,t){function i(e,t,n){var i=n&&ln(n),o=!i&&A(s);y.push({name:e,attr:a,raw:c,def:t,arg:h,modifiers:u,expression:o&&o.expression,filters:o&&o.filters,interp:n,hasOneTime:i})}for(var o,r,s,a,c,l,h,u,f,p,d,v=e.length,y=[];v--;)if(o=e[v],r=a=o.name,s=c=o.value,p=D(s),h=null,u=an(r),r=r.replace(Zr,""),p)s=S(p),h=r,i("bind",Ar.bind,p),"production"!==n.env.NODE_ENV&&"class"===r&&Array.prototype.some.call(e,function(e){return":class"===e.name||"v-bind:class"===e.name})&&Di('class="'+c+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',t);else if(Xr.test(r))u.literal=!Yr.test(r),i("transition",Qr.transition);else if(Gr.test(r))h=r.replace(Gr,""),i("on",Ar.on);else if(Yr.test(r))l=r.replace(Yr,""),"style"===l||"class"===l?i(l,Qr[l]):(h=l,i("bind",Ar.bind));else if(d=r.match(Kr)){if(l=d[1],h=d[2],"else"===l)continue;f=me(t,"directives",l,!0),f&&i(l,f)}if(y.length)return cn(y)}function an(e){var t=Object.create(null),n=e.match(Zr);if(n)for(var i=n.length;i--;)t[n[i].slice(1)]=!0;return t}function cn(e){return function(t,n,i,o,r){for(var s=e.length;s--;)t._bindDir(e[s],n,i,o,r)}}function ln(e){for(var t=e.length;t--;)if(e[t].oneTime)return!0}function hn(e){return"SCRIPT"===e.tagName&&(!e.hasAttribute("type")||"text/javascript"===e.getAttribute("type"))}function un(e,t){return t&&(t._containerAttrs=pn(e)),re(e)&&(e=et(e)),t&&(t._asComponent&&!t.template&&(t.template="<slot></slot>"),t.template&&(t._content=ne(e),e=fn(e,t))),he(e)&&(Q(se("v-start",!0),e),e.appendChild(se("v-end",!0))),e}function fn(e,t){var i=t.template,o=et(i,!0);if(o){var r=o.firstChild,s=r.tagName&&r.tagName.toLowerCase();return t.replace?(e===document.body&&"production"!==n.env.NODE_ENV&&Di("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),o.childNodes.length>1||1!==r.nodeType||"component"===s||me(t,"components",s)||U(r,"is")||me(t,"elementDirectives",s)||r.hasAttribute("v-for")||r.hasAttribute("v-if")?o:(t._replacerAttrs=pn(r),dn(e,r),r)):(e.appendChild(o),e)}"production"!==n.env.NODE_ENV&&Di("Invalid template option: "+i)}function pn(e){if(1===e.nodeType&&e.hasAttributes())return _(e.attributes)}function dn(e,t){for(var n,i,o=e.attributes,r=o.length;r--;)n=o[r].name,i=o[r].value,t.hasAttribute(n)||ns.test(n)?"class"===n&&!D(i)&&(i=i.trim())&&i.split(/\s+/).forEach(function(e){ee(t,e)}):t.setAttribute(n,i)}function vn(e,t){if(t){for(var i,o,r=e._slotContents=Object.create(null),s=0,a=t.children.length;s<a;s++)i=t.children[s],(o=i.getAttribute("slot"))&&(r[o]||(r[o]=[])).push(i),"production"!==n.env.NODE_ENV&&B(i,"slot")&&Di('The "slot" attribute must be static.',e.$parent);for(o in r)r[o]=yn(r[o],t);if(t.hasChildNodes()){var c=t.childNodes;if(1===c.length&&3===c[0].nodeType&&!c[0].data.trim())return;r["default"]=yn(t.childNodes,t)}}}function yn(e,t){var n=document.createDocumentFragment();e=_(e);for(var i=0,o=e.length;i<o;i++){var r=e[i];!re(r)||r.hasAttribute("v-if")||r.hasAttribute("v-for")||(t.removeChild(r),r=et(r,!0)),n.appendChild(r)}return n}function _n(e){function t(){}function i(e,t){var n=new Qe(t,e,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),
Ee.target&&n.depend(),n.value}}Object.defineProperty(e.prototype,"$data",{get:function(){return this._data},set:function(e){e!==this._data&&this._setData(e)}}),e.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},e.prototype._initProps=function(){var e=this.$options,t=e.el,i=e.props;i&&!t&&"production"!==n.env.NODE_ENV&&Di("Props will not be compiled if no `el` option is provided at instantiation.",this),t=e.el=I(t),this._propsUnlinkFn=t&&1===t.nodeType&&i?Ut(this,t,i,this._scope):null},e.prototype._initData=function(){var e=this.$options.data,t=this._data=e?e():{};m(t)||(t={},"production"!==n.env.NODE_ENV&&Di("data functions should return an object.",this));var i,o,s=this._props,a=Object.keys(t);for(i=a.length;i--;)o=a[i],s&&r(s,o)?"production"!==n.env.NODE_ENV&&Di('Data field "'+o+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(o);$e(t,this)},e.prototype._setData=function(e){e=e||{};var t=this._data;this._data=e;var n,i,o;for(n=Object.keys(t),o=n.length;o--;)i=n[o],i in e||this._unproxy(i);for(n=Object.keys(e),o=n.length;o--;)i=n[o],r(this,i)||this._proxy(i);t.__ob__.removeVm(this),$e(e,this),this._digest()},e.prototype._proxy=function(e){if(!a(e)){var t=this;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(n){t._data[e]=n}})}},e.prototype._unproxy=function(e){a(e)||delete this[e]},e.prototype._digest=function(){for(var e=0,t=this._watchers.length;e<t;e++)this._watchers[e].update(!0)},e.prototype._initComputed=function(){var e=this.$options.computed;if(e)for(var n in e){var o=e[n],r={enumerable:!0,configurable:!0};"function"==typeof o?(r.get=i(o,this),r.set=t):(r.get=o.get?o.cache!==!1?i(o.get,this):y(o.get,this):t,r.set=o.set?y(o.set,this):t),Object.defineProperty(this,n,r)}},e.prototype._initMethods=function(){var e=this.$options.methods;if(e)for(var t in e)this[t]=y(e[t],this)},e.prototype._initMeta=function(){var e=this.$options._meta;if(e)for(var t in e)Ne(this,t,e[t])}}function gn(e){function t(e,t){for(var n,i,o,r=t.attributes,s=0,a=r.length;s<a;s++)n=r[s].name,os.test(n)&&(n=n.replace(os,""),i=r[s].value,Be(i)&&(i+=".apply(this, $arguments)"),o=(e._scope||e._context).$eval(i,!0),o._fromParent=!0,e.$on(n.replace(os),o))}function i(e,t,n){if(n){var i,r,s,a;for(r in n)if(i=n[r],In(i))for(s=0,a=i.length;s<a;s++)o(e,t,r,i[s]);else o(e,t,r,i)}}function o(e,t,i,r,s){var a=typeof r;if("function"===a)e[t](i,r,s);else if("string"===a){var c=e.$options.methods,l=c&&c[r];l?e[t](i,l,s):"production"!==n.env.NODE_ENV&&Di('Unknown method: "'+r+'" when registering callback for '+t+': "'+i+'".',e)}else r&&"object"===a&&o(e,t,i,r.handler,r)}function r(){this._isAttached||(this._isAttached=!0,this.$children.forEach(s))}function s(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function a(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(c))}function c(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}e.prototype._initEvents=function(){var e=this.$options;e._asComponent&&t(this,e.el),i(this,"$on",e.events),i(this,"$watch",e.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",r),this.$on("hook:detached",a)},e.prototype._callHook=function(e){this.$emit("pre-hook:"+e);var t=this.$options[e];if(t)for(var n=0,i=t.length;n<i;n++)t[n].call(this);this.$emit("hook:"+e)}}function bn(){}function mn(e,t,i,o,r,s){this.vm=t,this.el=i,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=o,this._scope=r,this._frag=s,"production"!==n.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function En(e){e.prototype._updateRef=function(e){var t=this.$options._ref;if(t){var n=(this._scope||this._context).$refs;e?n[t]===this&&(n[t]=null):n[t]=this}},e.prototype._compile=function(e){var t=this.$options,n=e;if(e=un(e,t),this._initElement(e),1!==e.nodeType||null===z(e,"v-pre")){var i=this._context&&this._context.$options,o=Wt(e,t,i);vn(this,t._content);var r,s=this.constructor;t._linkerCachable&&(r=s.linker,r||(r=s.linker=Lt(e,t)));var a=o(this,e,this._scope),c=r?r(this,e):Lt(e,t)(this,e);this._unlinkFn=function(){a(),c(!0)},t.replace&&Y(n,e),this._isCompiled=!0,this._callHook("compiled")}},e.prototype._initElement=function(e){he(e)?(this._isFragment=!0,this.$el=this._fragmentStart=e.firstChild,this._fragmentEnd=e.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=e):this.$el=e,this.$el.__vue__=this,this._callHook("beforeCompile")},e.prototype._bindDir=function(e,t,n,i,o){this._directives.push(new mn(e,this,t,n,i,o))},e.prototype._destroy=function(e,t){if(this._isBeingDestroyed)return void(t||this._cleanup());var n,i,o=this,r=function(){!n||i||t||o._cleanup()};e&&this.$el&&(i=!0,this.$remove(function(){i=!1,r()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var s,a=this.$parent;for(a&&!a._isBeingDestroyed&&(a.$children.$remove(this),this._updateRef(!0)),s=this.$children.length;s--;)this.$children[s].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),s=this._watchers.length;s--;)this._watchers[s].teardown();this.$el&&(this.$el.__vue__=null),n=!0,r()},e.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function wn(e){e.prototype._applyFilters=function(e,t,n,i){var o,r,s,a,c,l,h,u,f;for(l=0,h=n.length;l<h;l++)if(o=n[i?h-l-1:l],r=me(this.$options,"filters",o.name,!0),r&&(r=i?r.write:r.read||r,"function"==typeof r)){if(s=i?[e,t]:[e],c=i?2:1,o.args)for(u=0,f=o.args.length;u<f;u++)a=o.args[u],s[u+c]=a.dynamic?this.$get(a.value):a.value;e=r.apply(this,s)}return e},e.prototype._resolveComponent=function(t,i){var o;if(o="function"==typeof t?t:me(this.$options,"components",t,!0))if(o.options)i(o);else if(o.resolved)i(o.resolved);else if(o.requested)o.pendingCallbacks.push(i);else{o.requested=!0;var r=o.pendingCallbacks=[i];o.call(this,function(t){m(t)&&(t=e.extend(t)),o.resolved=t;for(var n=0,i=r.length;n<i;n++)r[n](t)},function(e){"production"!==n.env.NODE_ENV&&Di("Failed to resolve async component"+("string"==typeof t?": "+t:"")+". "+(e?"\nReason: "+e:""))})}}}function xn(e){function t(e){return JSON.parse(JSON.stringify(e))}e.prototype.$get=function(e,t){var n=ze(e);if(n){if(t){var i=this;return function(){i.$arguments=_(arguments);var e=n.get.call(i,i);return i.$arguments=null,e}}try{return n.get.call(this,this)}catch(o){}}},e.prototype.$set=function(e,t){var n=ze(e,!0);n&&n.set&&n.set.call(this,this,t)},e.prototype.$delete=function(e){o(this._data,e)},e.prototype.$watch=function(e,t,n){var i,o=this;"string"==typeof e&&(i=A(e),e=i.expression);var r=new Qe(o,e,t,{deep:n&&n.deep,sync:n&&n.sync,filters:i&&i.filters,user:!n||n.user!==!1});return n&&n.immediate&&t.call(o,r.value),function(){r.teardown()}},e.prototype.$eval=function(e,t){if(rs.test(e)){var n=A(e),i=this.$get(n.expression,t);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(e,t)},e.prototype.$interpolate=function(e){var t=D(e),n=this;return t?1===t.length?n.$eval(t[0].value)+"":t.map(function(e){return e.tag?n.$eval(e.value):e.value}).join(""):e},e.prototype.$log=function(e){var n=e?Se(this._data,e):this._data;if(n&&(n=t(n)),!e){var i;for(i in this.$options.computed)n[i]=t(this[i]);if(this._props)for(i in this._props)n[i]=t(this[i])}console.log(n)}}function kn(e){function t(e,t,i,o,r,s){t=n(t);var a=!H(t),c=o===!1||a?r:s,l=!a&&!e._isAttached&&!H(e.$el);return e._isFragment?(ce(e._fragmentStart,e._fragmentEnd,function(n){c(n,t,e)}),i&&i()):c(e.$el,t,e,i),l&&e._callHook("attached"),e}function n(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t,n,i){t.appendChild(e),i&&i()}function o(e,t,n,i){W(e,t),i&&i()}function r(e,t,n){J(e),n&&n()}e.prototype.$nextTick=function(e){oi(e,this)},e.prototype.$appendTo=function(e,n,o){return t(this,e,n,o,i,R)},e.prototype.$prependTo=function(e,t,i){return e=n(e),e.hasChildNodes()?this.$before(e.firstChild,t,i):this.$appendTo(e,t,i),this},e.prototype.$before=function(e,n,i){return t(this,e,n,i,o,M)},e.prototype.$after=function(e,t,i){return e=n(e),e.nextSibling?this.$before(e.nextSibling,t,i):this.$appendTo(e.parentNode,t,i),this},e.prototype.$remove=function(e,t){if(!this.$el.parentNode)return e&&e();var n=this._isAttached&&H(this.$el);n||(t=!1);var i=this,o=function(){n&&i._callHook("detached"),e&&e()};if(this._isFragment)le(this._fragmentStart,this._fragmentEnd,this,this._fragment,o);else{var s=t===!1?r:F;s(this.$el,this,o)}return this}}function Cn(e){function t(e,t,i){var o=e.$parent;if(o&&i&&!n.test(t))for(;o;)o._eventsCount[t]=(o._eventsCount[t]||0)+i,o=o.$parent}e.prototype.$on=function(e,n){return(this._events[e]||(this._events[e]=[])).push(n),t(this,e,1),this},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(this,arguments)}var i=this;return n.fn=t,this.$on(e,n),this},e.prototype.$off=function(e,n){var i;if(!arguments.length){if(this.$parent)for(e in this._events)i=this._events[e],i&&t(this,e,-i.length);return this._events={},this}if(i=this._events[e],!i)return this;if(1===arguments.length)return t(this,e,-i.length),this._events[e]=null,this;for(var o,r=i.length;r--;)if(o=i[r],o===n||o.fn===n){t(this,e,-1),i.splice(r,1);break}return this},e.prototype.$emit=function(e){var t="string"==typeof e;e=t?e:e.name;var n=this._events[e],i=t||!n;if(n){n=n.length>1?_(n):n;var o=t&&n.some(function(e){return e._fromParent});o&&(i=!1);for(var r=_(arguments,1),s=0,a=n.length;s<a;s++){var c=n[s],l=c.apply(this,r);l!==!0||o&&!c._fromParent||(i=!0)}}return i},e.prototype.$broadcast=function(e){var t="string"==typeof e;if(e=t?e:e.name,this._eventsCount[e]){var n=this.$children,i=_(arguments);t&&(i[0]={name:e,source:this});for(var o=0,r=n.length;o<r;o++){var s=n[o],a=s.$emit.apply(s,i);a&&s.$broadcast.apply(s,i)}return this}},e.prototype.$dispatch=function(e){var t=this.$emit.apply(this,arguments);if(t){var n=this.$parent,i=_(arguments);for(i[0]={name:e,source:this};n;)t=n.$emit.apply(n,i),n=t?n.$parent:null;return this}};var n=/^hook:/}function $n(e){function t(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void("production"!==n.env.NODE_ENV&&Di("$mount() should be called only once.",this)):(e=I(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),H(this.$el)?(this._callHook("attached"),t.call(this)):this.$once("hook:attached",t),this)},e.prototype.$destroy=function(e,t){this._destroy(e,t)},e.prototype.$compile=function(e,t,n,i){return Lt(e,this.$options,!0)(this,e,t,n,i)}}function Nn(e){this._init(e)}function On(e,t,n){return n=n?parseInt(n,10):0,t=l(t),"number"==typeof t?e.slice(n,n+t):e}function An(e,t,n){if(e=ls(e),null==t)return e;if("function"==typeof t)return e.filter(t);t=(""+t).toLowerCase();for(var i,o,r,s,a="in"===n?3:2,c=Array.prototype.concat.apply([],_(arguments,a)),l=[],h=0,u=e.length;h<u;h++)if(i=e[h],r=i&&i.$value||i,s=c.length){for(;s--;)if(o=c[s],"$key"===o&&jn(i.$key,t)||jn(Se(r,o),t)){l.push(i);break}}else jn(i,t)&&l.push(i);return l}function Tn(e){function t(e,t,n){var o=i[n];return o&&("$key"!==o&&(b(e)&&"$value"in e&&(e=e.$value),b(t)&&"$value"in t&&(t=t.$value)),e=b(e)?Se(e,o):e,t=b(t)?Se(t,o):t),e===t?0:e>t?r:-r}var n=null,i=void 0;e=ls(e);var o=_(arguments,1),r=o[o.length-1];"number"==typeof r?(r=r<0?-1:1,o=o.length>1?o.slice(0,-1):o):r=1;var s=o[0];return s?("function"==typeof s?n=function(e,t){return s(e,t)*r}:(i=Array.prototype.concat.apply([],o),n=function(e,o,r){return r=r||0,r>=i.length-1?t(e,o,r):t(e,o,r)||n(e,o,r+1)}),e.slice().sort(n)):e}function jn(e,t){var n;if(m(e)){var i=Object.keys(e);for(n=i.length;n--;)if(jn(e[i[n]],t))return!0}else if(In(e)){for(n=e.length;n--;)if(jn(e[n],t))return!0}else if(null!=e)return e.toString().toLowerCase().indexOf(t)>-1}function Dn(e){function t(e){return new Function("return function "+v(e)+" (options) { this._init(options) }")()}e.options={directives:Ar,elementDirectives:cs,filters:us,transitions:{},components:{},partials:{},replace:!0},e.util=qi,e.config=ji,e.set=i,e["delete"]=o,e.nextTick=oi,e.compiler=is,e.FragmentFactory=ct,e.internalDirectives=Qr,e.parsers={path:ho,text:Oi,template:zo,directive:wi,expression:Co},e.cid=0;var r=1;e.extend=function(e){e=e||{};var i=this,o=0===i.cid;if(o&&e._Ctor)return e._Ctor;var s=e.name||i.options.name;"production"!==n.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(s)||(Di('Invalid component name: "'+s+'". Component names can only contain alphanumeric characaters and the hyphen.'),s=null));var a=t(s||"VueComponent");return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.cid=r++,a.options=be(i.options,e),a["super"]=i,a.extend=i.extend,ji._assetTypes.forEach(function(e){a[e]=i[e]}),s&&(a.options.components[s]=a),o&&(e._Ctor=a),a},e.use=function(e){if(!e.installed){var t=_(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}},e.mixin=function(t){e.options=be(e.options,t)},ji._assetTypes.forEach(function(t){e[t]=function(i,o){return o?("production"!==n.env.NODE_ENV&&"component"===t&&(Ri.test(i)||Mi.test(i))&&Di("Do not use built-in or reserved HTML elements as component id: "+i),"component"===t&&m(o)&&(o.name||(o.name=i),o=e.extend(o)),this.options[t+"s"][i]=o,o):this.options[t+"s"][i]}}),g(e.transition,Vi)}var Sn=Object.prototype.hasOwnProperty,Vn=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,Pn=/-(\w)/g,Rn=/([a-z\d])([A-Z])/g,Mn=/(?:^|[-_\/])(\w)/g,Fn=Object.prototype.toString,Ln="[object Object]",In=Array.isArray,Hn="__proto__"in{},zn="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Bn=zn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Un=zn&&window.navigator.userAgent.toLowerCase(),Wn=Un&&Un.indexOf("trident")>0,qn=Un&&Un.indexOf("msie 9.0")>0,Jn=Un&&Un.indexOf("android")>0,Qn=Un&&/(iphone|ipad|ipod|ios)/i.test(Un),Yn=Qn&&Un.match(/os ([\d_]+)/),Gn=Yn&&Yn[1].split("_"),Kn=Gn&&Number(Gn[0])>=9&&Number(Gn[1])>=3&&!window.indexedDB,Zn=void 0,Xn=void 0,ei=void 0,ti=void 0;if(zn&&!qn){var ni=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,ii=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;Zn=ni?"WebkitTransition":"transition",Xn=ni?"webkitTransitionEnd":"transitionend",ei=ii?"WebkitAnimation":"animation",ti=ii?"webkitAnimationEnd":"animationend"}var oi=function(){function e(){o=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}var n,i=[],o=!1;if("undefined"==typeof MutationObserver||Kn){var r=zn?window:"undefined"!=typeof t?t:{};n=r.setImmediate||setTimeout}else{var s=1,a=new MutationObserver(e),c=document.createTextNode(s);a.observe(c,{characterData:!0}),n=function(){s=(s+1)%2,c.data=s}}return function(t,r){var s=r?function(){t.call(r)}:t;i.push(s),o||(o=!0,n(e,0))}}(),ri=void 0;"undefined"!=typeof Set&&Set.toString().match(/native code/)?ri=Set:(ri=function(){this.set=Object.create(null)},ri.prototype.has=function(e){return void 0!==this.set[e]},ri.prototype.add=function(e){this.set[e]=1},ri.prototype.clear=function(){this.set=Object.create(null)});var si=$.prototype;si.put=function(e,t){var n,i=this.get(e,!0);return i||(this.size===this.limit&&(n=this.shift()),i={key:e},this._keymap[e]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size++),i.value=t,n},si.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},si.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail?t?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,t?n:n.value)};var ai,ci,li,hi,ui,fi,pi,di,vi,yi,_i,gi,bi=new $(1e3),mi=/[^\s'"]+|'[^']*'|"[^"]*"/g,Ei=/^in$|^-?\d+/,wi=Object.freeze({parseDirective:A}),xi=/[-.*+?^${}()|[\]\/\\]/g,ki=void 0,Ci=void 0,$i=void 0,Ni=/[^|]\|[^|]/,Oi=Object.freeze({compileRegex:j,parseText:D,tokensToExp:S}),Ai=["{{","}}"],Ti=["{{{","}}}"],ji=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==n.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return Ai},set:function(e){Ai=e,j()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return Ti},set:function(e){Ti=e,j()},configurable:!0,enumerable:!0}}),Di=void 0,Si=void 0;"production"!==n.env.NODE_ENV&&!function(){var e="undefined"!=typeof console;Di=function(t,n){e&&!ji.silent&&console.error("[Vue warn]: "+t+(n?Si(n):""))},Si=function(e){var t=e._isVue?e.$options.name:e.name;return t?" (found in component: <"+d(t)+">)":""}}();var Vi=Object.freeze({appendWithTransition:R,beforeWithTransition:M,removeWithTransition:F,applyTransition:L}),Pi=/^v-ref:/,Ri=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,Mi=/^(slot|partial|component)$/i,Fi=void 0;"production"!==n.env.NODE_ENV&&(Fi=function(e,t){return t.indexOf("-")>-1?e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:/HTMLUnknownElement/.test(e.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(t)});var Li=ji.optionMergeStrategies=Object.create(null);Li.data=function(e,t,i){return i?e||t?function(){var n="function"==typeof t?t.call(i):t,o="function"==typeof e?e.call(i):void 0;return n?de(n,o):o}:void 0:t?"function"!=typeof t?("production"!==n.env.NODE_ENV&&Di('The "data" option should be a function that returns a per-instance value in component definitions.',i),e):e?function(){return de(t.call(this),e.call(this))}:t:e},Li.el=function(e,t,i){if(!i&&t&&"function"!=typeof t)return void("production"!==n.env.NODE_ENV&&Di('The "el" option should be a function that returns a per-instance value in component definitions.',i));var o=t||e;return i&&"function"==typeof o?o.call(i):o},Li.init=Li.created=Li.ready=Li.attached=Li.detached=Li.beforeCompile=Li.compiled=Li.beforeDestroy=Li.destroyed=Li.activate=function(e,t){return t?e?e.concat(t):In(t)?t:[t]:e},ji._assetTypes.forEach(function(e){Li[e+"s"]=ve}),Li.watch=Li.events=function(e,t){if(!t)return e;if(!e)return t;var n={};g(n,e);for(var i in t){var o=n[i],r=t[i];o&&!In(o)&&(o=[o]),n[i]=o?o.concat(r):[r]}return n},Li.props=Li.methods=Li.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return g(n,e),g(n,t),n};var Ii=function(e,t){return void 0===t?e:t},Hi=0;Ee.target=null,Ee.prototype.addSub=function(e){this.subs.push(e)},Ee.prototype.removeSub=function(e){this.subs.$remove(e)},Ee.prototype.depend=function(){Ee.target.addDep(this)},Ee.prototype.notify=function(){for(var e=_(this.subs),t=0,n=e.length;t<n;t++)e[t].update()};var zi=Array.prototype,Bi=Object.create(zi);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=zi[e];E(Bi,e,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var o,r=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),r})}),E(zi,"$set",function(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}),E(zi,"$remove",function(e){if(this.length){var t=x(this,e);return t>-1?this.splice(t,1):void 0}});var Ui=Object.getOwnPropertyNames(Bi),Wi=!0;xe.prototype.walk=function(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;n++)this.convert(t[n],e[t[n]])},xe.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)$e(e[t])},xe.prototype.convert=function(e,t){Ne(this.value,e,t)},xe.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},xe.prototype.removeVm=function(e){this.vms.$remove(e)};var qi=Object.freeze({defineReactive:Ne,set:i,del:o,hasOwn:r,isLiteral:s,isReserved:a,_toString:c,toNumber:l,toBoolean:h,stripQuotes:u,camelize:f,hyphenate:d,classify:v,bind:y,toArray:_,extend:g,isObject:b,isPlainObject:m,def:E,debounce:w,indexOf:x,cancellable:k,looseEqual:C,isArray:In,hasProto:Hn,inBrowser:zn,devtools:Bn,isIE:Wn,isIE9:qn,isAndroid:Jn,isIos:Qn,iosVersionMatch:Yn,iosVersion:Gn,hasMutationObserverBug:Kn,get transitionProp(){return Zn},get transitionEndEvent(){return Xn},get animationProp(){return ei},get animationEndEvent(){return ti},nextTick:oi,get _Set(){return ri},query:I,inDoc:H,getAttr:z,getBindAttr:B,hasBindAttr:U,before:W,after:q,remove:J,prepend:Q,replace:Y,on:G,off:K,setClass:X,addClass:ee,removeClass:te,extractContent:ne,trimNode:ie,isTemplate:re,createAnchor:se,findRef:ae,mapNodeRange:ce,removeNodeRange:le,isFragment:he,getOuterHTML:ue,mergeOptions:be,resolveAsset:me,checkComponentAttr:fe,commonTagRE:Ri,reservedTagRE:Mi,get warn(){return Di}}),Ji=0,Qi=new $(1e3),Yi=0,Gi=1,Ki=2,Zi=3,Xi=0,eo=1,to=2,no=3,io=4,oo=5,ro=6,so=7,ao=8,co=[];co[Xi]={ws:[Xi],ident:[no,Yi],"[":[io],eof:[so]},co[eo]={ws:[eo],".":[to],"[":[io],eof:[so]},co[to]={ws:[to],ident:[no,Yi]},co[no]={ident:[no,Yi],0:[no,Yi],number:[no,Yi],ws:[eo,Gi],".":[to,Gi],"[":[io,Gi],eof:[so,Gi]},co[io]={"'":[oo,Yi],'"':[ro,Yi],"[":[io,Ki],"]":[eo,Zi],eof:ao,"else":[io,Yi]},co[oo]={"'":[io,Yi],eof:ao,"else":[oo,Yi]},co[ro]={'"':[io,Yi],eof:ao,"else":[ro,Yi]};var lo;"production"!==n.env.NODE_ENV&&(lo=function(e,t){Di('You are setting a non-existent path "'+e.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',t)});var ho=Object.freeze({parsePath:De,getPath:Se,setPath:Ve}),uo=new $(1e3),fo="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",po=new RegExp("^("+fo.replace(/,/g,"\\b|")+"\\b)"),vo="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",yo=new RegExp("^("+vo.replace(/,/g,"\\b|")+"\\b)"),_o=/\s/g,go=/\n/g,bo=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,mo=/"(\d+)"/g,Eo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,wo=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,xo=/^(?:true|false|null|undefined|Infinity|NaN)$/,ko=[],Co=Object.freeze({parseExpression:ze,isSimplePath:Be}),$o=[],No=[],Oo={},Ao={},To=!1,jo=0;Qe.prototype.get=function(){this.beforeGet();var e,t=this.scope||this.vm;try{e=this.getter.call(t,t)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating expression "'+this.expression+'": '+i.toString(),this.vm)}return this.deep&&Ye(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=t._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},Qe.prototype.set=function(e){var t=this.scope||this.vm;this.filters&&(e=t._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(t,t,e)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating setter "'+this.expression+'": '+i.toString(),this.vm)}var o=t.$forContext;if(o&&o.alias===this.expression){if(o.filters)return void("production"!==n.env.NODE_ENV&&Di("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));o._withLock(function(){t.$key?o.rawValue[t.$key]=e:o.rawValue.$set(t.$index,e)})}},Qe.prototype.beforeGet=function(){Ee.target=this},Qe.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Qe.prototype.afterGet=function(){Ee.target=null;for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Qe.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!ji.async?this.run():(this.shallow=this.queued?!!e&&this.shallow:!!e,this.queued=!0,"production"!==n.env.NODE_ENV&&ji.debug&&(this.prevError=new Error("[vue] async stack trace")),Je(this))},Qe.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(b(e)||this.deep)&&!this.shallow){var t=this.value;this.value=e;var i=this.prevError;if("production"!==n.env.NODE_ENV&&ji.debug&&i){this.prevError=null;try{this.cb.call(this.vm,e,t)}catch(o){throw oi(function(){throw i},0),o}}else this.cb.call(this.vm,e,t)}this.queued=this.shallow=!1}},Qe.prototype.evaluate=function(){var e=Ee.target;this.value=this.get(),this.dirty=!1,Ee.target=e},Qe.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},Qe.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var Do=new ri,So={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(e){this.el[this.attr]=c(e)}},Vo=new $(1e3),Po=new $(1e3),Ro={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};Ro.td=Ro.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Ro.option=Ro.optgroup=[1,'<select multiple="multiple">',"</select>"],Ro.thead=Ro.tbody=Ro.colgroup=Ro.caption=Ro.tfoot=[1,"<table>","</table>"],Ro.g=Ro.defs=Ro.symbol=Ro.use=Ro.image=Ro.text=Ro.circle=Ro.ellipse=Ro.line=Ro.path=Ro.polygon=Ro.polyline=Ro.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Mo=/<([\w:-]+)/,Fo=/&#?\w+?;/,Lo=/<!--/,Io=function(){if(zn){var e=document.createElement("div");return e.innerHTML="<template>1</template>",!e.cloneNode(!0).firstChild.innerHTML}return!1}(),Ho=function(){if(zn){var e=document.createElement("textarea");return e.placeholder="t","t"===e.cloneNode(!0).value}return!1}(),zo=Object.freeze({cloneNode:Xe,parseTemplate:et}),Bo={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=se("v-html"),Y(this.el,this.anchor))},update:function(e){e=c(e),this.nodes?this.swap(e):this.el.innerHTML=e},swap:function(e){for(var t=this.nodes.length;t--;)J(this.nodes[t]);var n=et(e,!0,!0);this.nodes=_(n.childNodes),W(n,this.anchor)}};tt.prototype.callHook=function(e){var t,n;for(t=0,n=this.childFrags.length;t<n;t++)this.childFrags[t].callHook(e);for(t=0,n=this.children.length;t<n;t++)e(this.children[t])},tt.prototype.beforeRemove=function(){var e,t;for(e=0,t=this.childFrags.length;e<t;e++)this.childFrags[e].beforeRemove(!1);for(e=0,t=this.children.length;e<t;e++)this.children[e].$destroy(!1,!0);var n=this.unlink.dirs;for(e=0,t=n.length;e<t;e++)n[e]._watcher&&n[e]._watcher.teardown()},tt.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var Uo=new $(5e3);ct.prototype.create=function(e,t,n){var i=Xe(this.template);return new tt(this.linker,this.vm,i,e,t,n)};var Wo=700,qo=800,Jo=850,Qo=1100,Yo=1500,Go=1500,Ko=1750,Zo=2100,Xo=2200,er=2300,tr=0,nr={priority:Xo,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var e=this.expression.match(/(.*) (?:in|of) (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=t[1].trim(),this.alias=t[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(!this.alias)return void("production"!==n.env.NODE_ENV&&Di('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++tr;var i=this.el.tagName;this.isOption=("OPTION"===i||"OPTGROUP"===i)&&"SELECT"===this.el.parentNode.tagName,this.start=se("v-for-start"),this.end=se("v-for-end"),Y(this.el,this.end),W(this.start,this.end),this.cache=Object.create(null),this.factory=new ct(this.vm,this.el)},update:function(e){this.diff(e),this.updateRef(),this.updateModel()},diff:function(e){var t,n,i,o,s,a,c=e[0],l=this.fromObject=b(c)&&r(c,"$key")&&r(c,"$value"),h=this.params.trackBy,u=this.frags,f=this.frags=new Array(e.length),p=this.alias,d=this.iterator,v=this.start,y=this.end,_=H(v),g=!u;for(t=0,n=e.length;t<n;t++)c=e[t],o=l?c.$key:null,s=l?c.$value:c,a=!b(s),i=!g&&this.getCachedFrag(s,t,o),i?(i.reused=!0,i.scope.$index=t,o&&(i.scope.$key=o),d&&(i.scope[d]=null!==o?o:t),(h||l||a)&&we(function(){i.scope[p]=s})):(i=this.create(s,p,t,o),i.fresh=!g),f[t]=i,g&&i.before(y);if(!g){var m=0,E=u.length-f.length;for(this.vm._vForRemoving=!0,t=0,n=u.length;t<n;t++)i=u[t],i.reused||(this.deleteCachedFrag(i),this.remove(i,m++,E,_));this.vm._vForRemoving=!1,m&&(this.vm._watchers=this.vm._watchers.filter(function(e){return e.active}));var w,x,k,C=0;for(t=0,n=f.length;t<n;t++)i=f[t],w=f[t-1],x=w?w.staggerCb?w.staggerAnchor:w.end||w.node:v,i.reused&&!i.staggerCb?(k=lt(i,v,this.id),k===w||k&&lt(k,v,this.id)===w||this.move(i,x)):this.insert(i,C++,x,_),i.reused=i.fresh=!1}},create:function(e,t,n,i){var o=this._host,r=this._scope||this.vm,s=Object.create(r);s.$refs=Object.create(r.$refs),s.$els=Object.create(r.$els),s.$parent=r,s.$forContext=this,we(function(){Ne(s,t,e)}),Ne(s,"$index",n),i?Ne(s,"$key",i):s.$key&&E(s,"$key",null),this.iterator&&Ne(s,this.iterator,null!==i?i:n);var a=this.factory.create(o,s,this._frag);return a.forId=this.id,this.cacheFrag(e,a,n,i),a},updateRef:function(){var e=this.descriptor.ref;if(e){var t,n=(this._scope||this.vm).$refs;this.fromObject?(t={},this.frags.forEach(function(e){t[e.scope.$key]=ht(e)})):t=this.frags.map(ht),n[e]=t}},updateModel:function(){if(this.isOption){var e=this.start.parentNode,t=e&&e.__v_model;t&&t.forceUpdate()}},insert:function(e,t,n,i){e.staggerCb&&(e.staggerCb.cancel(),e.staggerCb=null);var o=this.getStagger(e,t,null,"enter");if(i&&o){var r=e.staggerAnchor;r||(r=e.staggerAnchor=se("stagger-anchor"),r.__v_frag=e),q(r,n);var s=e.staggerCb=k(function(){e.staggerCb=null,e.before(r),J(r)});setTimeout(s,o)}else{var a=n.nextSibling;a||(q(this.end,n),a=this.end),e.before(a)}},remove:function(e,t,n,i){if(e.staggerCb)return e.staggerCb.cancel(),void(e.staggerCb=null);var o=this.getStagger(e,t,n,"leave");if(i&&o){var r=e.staggerCb=k(function(){e.staggerCb=null,e.remove()});setTimeout(r,o)}else e.remove()},move:function(e,t){t.nextSibling||this.end.parentNode.appendChild(this.end),e.before(t.nextSibling,!1)},cacheFrag:function(e,t,i,o){var s,a=this.params.trackBy,c=this.cache,l=!b(e);o||a||l?(s=ft(i,o,e,a),c[s]?"$index"!==a&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):c[s]=t):(s=this.id,r(e,s)?null===e[s]?e[s]=t:"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):Object.isExtensible(e)?E(e,s,t):"production"!==n.env.NODE_ENV&&Di("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),t.raw=e;
},getCachedFrag:function(e,t,i){var o,r=this.params.trackBy,s=!b(e);if(i||r||s){var a=ft(t,i,e,r);o=this.cache[a]}else o=e[this.id];return o&&(o.reused||o.fresh)&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e),o},deleteCachedFrag:function(e){var t=e.raw,n=this.params.trackBy,i=e.scope,o=i.$index,s=r(i,"$key")&&i.$key,a=!b(t);if(n||s||a){var c=ft(o,s,t,n);this.cache[c]=null}else t[this.id]=null,e.raw=null},getStagger:function(e,t,n,i){i+="Stagger";var o=e.node.__v_trans,r=o&&o.hooks,s=r&&(r[i]||r.stagger);return s?s.call(e,t,n):t*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(e){return this.rawValue=e,e},_postProcess:function(e){if(In(e))return e;if(m(e)){for(var t,n=Object.keys(e),i=n.length,o=new Array(i);i--;)t=n[i],o[i]={$key:t,$value:e[t]};return o}return"number"!=typeof e||isNaN(e)||(e=ut(e)),e||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var e,t=this.frags.length;t--;)e=this.frags[t],this.deleteCachedFrag(e),e.destroy()}};"production"!==n.env.NODE_ENV&&(nr.warnDuplicate=function(e){Di('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(e)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var ir={priority:Zo,terminal:!0,bind:function(){var e=this.el;if(e.__vue__)"production"!==n.env.NODE_ENV&&Di('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var t=e.nextElementSibling;t&&null!==z(t,"v-else")&&(J(t),this.elseEl=t),this.anchor=se("v-if"),Y(e,this.anchor)}},update:function(e){this.invalid||(e?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new ct(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new ct(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},or={bind:function(){var e=this.el.nextElementSibling;e&&null!==z(e,"v-else")&&(this.elseEl=e)},update:function(e){this.apply(this.el,e),this.elseEl&&this.apply(this.elseEl,!e)},apply:function(e,t){function n(){e.style.display=t?"":"none"}H(e)?L(e,t?1:-1,n,this.vm):n()}},rr={bind:function(){var e=this,t=this.el,n="range"===t.type,i=this.params.lazy,o=this.params.number,r=this.params.debounce,s=!1;if(Jn||n||(this.on("compositionstart",function(){s=!0}),this.on("compositionend",function(){s=!1,i||e.listener()})),this.focused=!1,n||i||(this.on("focus",function(){e.focused=!0}),this.on("blur",function(){e.focused=!1,e._frag&&!e._frag.inserted||e.rawListener()})),this.listener=this.rawListener=function(){if(!s&&e._bound){var i=o||n?l(t.value):t.value;e.set(i),oi(function(){e._bound&&!e.focused&&e.update(e._watcher.value)})}},r&&(this.listener=w(this.listener,r)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(t)[a]("change",this.rawListener),i||jQuery(t)[a]("input",this.listener)}else this.on("change",this.rawListener),i||this.on("input",this.listener);!i&&qn&&(this.on("cut",function(){oi(e.listener)}),this.on("keyup",function(t){46!==t.keyCode&&8!==t.keyCode||e.listener()})),(t.hasAttribute("value")||"TEXTAREA"===t.tagName&&t.value.trim())&&(this.afterBind=this.listener)},update:function(e){e=c(e),e!==this.el.value&&(this.el.value=e)},unbind:function(){var e=this.el;if(this.hasjQuery){var t=jQuery.fn.off?"off":"unbind";jQuery(e)[t]("change",this.listener),jQuery(e)[t]("input",this.listener)}}},sr={bind:function(){var e=this,t=this.el;this.getValue=function(){if(t.hasOwnProperty("_value"))return t._value;var n=t.value;return e.params.number&&(n=l(n)),n},this.listener=function(){e.set(e.getValue())},this.on("change",this.listener),t.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){this.el.checked=C(e,this.getValue())}},ar={bind:function(){var e=this,t=this,n=this.el;this.forceUpdate=function(){t._watcher&&t.update(t._watcher.get())};var i=this.multiple=n.hasAttribute("multiple");this.listener=function(){var e=pt(n,i);e=t.params.number?In(e)?e.map(l):l(e):e,t.set(e)},this.on("change",this.listener);var o=pt(n,i,!0);(i&&o.length||!i&&null!==o)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){oi(e.forceUpdate)}),H(n)||oi(this.forceUpdate)},update:function(e){var t=this.el;t.selectedIndex=-1;for(var n,i,o=this.multiple&&In(e),r=t.options,s=r.length;s--;)n=r[s],i=n.hasOwnProperty("_value")?n._value:n.value,n.selected=o?dt(e,i)>-1:C(e,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},cr={bind:function(){function e(){var e=n.checked;return e&&n.hasOwnProperty("_trueValue")?n._trueValue:!e&&n.hasOwnProperty("_falseValue")?n._falseValue:e}var t=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:t.params.number?l(n.value):n.value},this.listener=function(){var i=t._watcher.value;if(In(i)){var o=t.getValue();n.checked?x(i,o)<0&&i.push(o):i.$remove(o)}else t.set(e())},this.on("change",this.listener),n.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){var t=this.el;In(e)?t.checked=x(e,this.getValue())>-1:t.hasOwnProperty("_trueValue")?t.checked=C(e,t._trueValue):t.checked=!!e}},lr={text:rr,radio:sr,select:ar,checkbox:cr},hr={priority:qo,twoWay:!0,handlers:lr,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==n.env.NODE_ENV&&Di('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var e,t=this.el,i=t.tagName;if("INPUT"===i)e=lr[t.type]||lr.text;else if("SELECT"===i)e=lr.select;else{if("TEXTAREA"!==i)return void("production"!==n.env.NODE_ENV&&Di("v-model does not support element type: "+i,this.vm));e=lr.text}t.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var e=this.filters;if(e)for(var t=e.length;t--;){var n=me(this.vm.$options,"filters",e[t].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},ur={esc:27,tab:9,enter:13,space:32,"delete":[8,46],up:38,left:37,right:39,down:40},fr={priority:Wo,acceptStatement:!0,keyCodes:ur,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var e=this;this.iframeBind=function(){G(e.el.contentWindow,e.arg,e.handler,e.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"!=typeof e)return void("production"!==n.env.NODE_ENV&&Di("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+e,this.vm));this.modifiers.stop&&(e=yt(e)),this.modifiers.prevent&&(e=_t(e)),this.modifiers.self&&(e=gt(e));var t=Object.keys(this.modifiers).filter(function(e){return"stop"!==e&&"prevent"!==e&&"self"!==e&&"capture"!==e});t.length&&(e=vt(e,t)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():G(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var e=this.iframeBind?this.el.contentWindow:this.el;this.handler&&K(e,this.arg,this.handler)},unbind:function(){this.reset()}},pr=["-webkit-","-moz-","-ms-"],dr=["Webkit","Moz","ms"],vr=/!important;?$/,yr=Object.create(null),_r=null,gr={deep:!0,update:function(e){"string"==typeof e?this.el.style.cssText=e:In(e)?this.handleObject(e.reduce(g,{})):this.handleObject(e||{})},handleObject:function(e){var t,n,i=this.cache||(this.cache={});for(t in i)t in e||(this.handleSingle(t,null),delete i[t]);for(t in e)n=e[t],n!==i[t]&&(i[t]=n,this.handleSingle(t,n))},handleSingle:function(e,t){if(e=bt(e))if(null!=t&&(t+=""),t){var i=vr.test(t)?"important":"";i?("production"!==n.env.NODE_ENV&&Di("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),t=t.replace(vr,"").trim(),this.el.style.setProperty(e.kebab,t,i)):this.el.style[e.camel]=t}else this.el.style[e.camel]=""}},br="http://www.w3.org/1999/xlink",mr=/^xlink:/,Er=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,wr=/^(?:value|checked|selected|muted)$/,xr=/^(?:draggable|contenteditable|spellcheck)$/,kr={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Cr={priority:Jo,bind:function(){var e=this.arg,t=this.el.tagName;e||(this.deep=!0);var i=this.descriptor,o=i.interp;if(o&&(i.hasOneTime&&(this.expression=S(o,this._scope||this.vm)),(Er.test(e)||"name"===e&&("PARTIAL"===t||"SLOT"===t))&&("production"!==n.env.NODE_ENV&&Di(e+'="'+i.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(e),this.invalid=!0),"production"!==n.env.NODE_ENV)){var r=e+'="'+i.raw+'": ';"src"===e&&Di(r+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===e&&Di(r+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(e){if(!this.invalid){var t=this.arg;this.arg?this.handleSingle(t,e):this.handleObject(e||{})}},handleObject:gr.handleObject,handleSingle:function(e,t){var n=this.el,i=this.descriptor.interp;if(this.modifiers.camel&&(e=f(e)),!i&&wr.test(e)&&e in n){var o="value"===e&&null==t?"":t;n[e]!==o&&(n[e]=o)}var r=kr[e];if(!i&&r){n[r]=t;var s=n.__v_model;s&&s.listener()}return"value"===e&&"TEXTAREA"===n.tagName?void n.removeAttribute(e):void(xr.test(e)?n.setAttribute(e,t?"true":"false"):null!=t&&t!==!1?"class"===e?(n.__v_trans&&(t+=" "+n.__v_trans.id+"-transition"),X(n,t)):mr.test(e)?n.setAttributeNS(br,e,t===!0?"":t):n.setAttribute(e,t===!0?"":t):n.removeAttribute(e))}},$r={priority:Yo,bind:function(){if(this.arg){var e=this.id=f(this.arg),t=(this._scope||this.vm).$els;r(t,e)?t[e]=this.el:Ne(t,e,this.el)}},unbind:function(){var e=(this._scope||this.vm).$els;e[this.id]===this.el&&(e[this.id]=null)}},Nr={bind:function(){"production"!==n.env.NODE_ENV&&Di("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},Or={bind:function(){var e=this.el;this.vm.$once("pre-hook:compiled",function(){e.removeAttribute("v-cloak")})}},Ar={text:So,html:Bo,"for":nr,"if":ir,show:or,model:hr,on:fr,bind:Cr,el:$r,ref:Nr,cloak:Or},Tr={deep:!0,update:function(e){e?"string"==typeof e?this.setClass(e.trim().split(/\s+/)):this.setClass(Et(e)):this.cleanup()},setClass:function(e){this.cleanup(e);for(var t=0,n=e.length;t<n;t++){var i=e[t];i&&wt(this.el,i,ee)}this.prevKeys=e},cleanup:function(e){var t=this.prevKeys;if(t)for(var n=t.length;n--;){var i=t[n];(!e||e.indexOf(i)<0)&&wt(this.el,i,te)}}},jr={priority:Go,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==n.env.NODE_ENV&&Di('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=ne(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=se("v-component"),Y(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+d(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(e){this.literal||this.setComponent(e)},setComponent:function(e,t){if(this.invalidatePending(),e){var n=this;this.resolveComponent(e,function(){n.mountComponent(t)})}else this.unbuild(!0),this.remove(this.childVM,t),this.childVM=null},resolveComponent:function(e,t){var n=this;this.pendingComponentCb=k(function(i){n.ComponentName=i.options.name||("string"==typeof e?e:null),n.Component=i,t()}),this.vm._resolveComponent(e,this.pendingComponentCb)},mountComponent:function(e){this.unbuild(!0);var t=this,n=this.Component.options.activate,i=this.getCached(),o=this.build();n&&!i?(this.waitingFor=o,xt(n,o,function(){t.waitingFor===o&&(t.waitingFor=null,t.transition(o,e))})):(i&&o._updateRef(),this.transition(o,e))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var t=this.getCached();if(t)return t;if(this.Component){var i={name:this.ComponentName,el:Xe(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&g(i,e);var o=new this.Component(i);return this.keepAlive&&(this.cache[this.Component.cid]=o),"production"!==n.env.NODE_ENV&&this.el.hasAttribute("transition")&&o._isFragment&&Di("Transitions will not work on a fragment instance. Template: "+o.$options.template,o),o}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(e){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var t=this.childVM;return!t||this.keepAlive?void(t&&(t._inactive=!0,t._updateRef(!0))):void t.$destroy(!1,e)},remove:function(e,t){var n=this.keepAlive;if(e){this.pendingRemovals++,this.pendingRemovalCb=t;var i=this;e.$remove(function(){i.pendingRemovals--,n||e._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else t&&t()},transition:function(e,t){var n=this,i=this.childVM;switch(i&&(i._inactive=!0),e._inactive=!1,this.childVM=e,n.params.transitionMode){case"in-out":e.$before(n.anchor,function(){n.remove(i,t)});break;case"out-in":n.remove(i,function(){e.$before(n.anchor,t)});break;default:n.remove(i),e.$before(n.anchor,t)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var e in this.cache)this.cache[e].$destroy();this.cache=null}}},Dr=ji._propBindingModes,Sr={},Vr=/^[$_a-zA-Z]+[\w$]*$/,Pr=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,Rr=ji._propBindingModes,Mr={bind:function(){var e=this.vm,t=e._context,n=this.descriptor.prop,i=n.path,o=n.parentPath,r=n.mode===Rr.TWO_WAY,s=this.parentWatcher=new Qe(t,o,function(t){Ot(e,n,t)},{twoWay:r,filters:n.filters,scope:this._scope});if(Nt(e,n,s.value),r){var a=this;e.$once("pre-hook:created",function(){a.childWatcher=new Qe(e,i,function(e){s.set(e)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},Fr=[],Lr=!1,Ir="transition",Hr="animation",zr=Zn+"Duration",Br=ei+"Duration",Ur=zn&&window.requestAnimationFrame,Wr=Ur?function(e){Ur(function(){Ur(e)})}:function(e){setTimeout(e,50)},qr=Mt.prototype;qr.enter=function(e,t){this.cancelPending(),this.callHook("beforeEnter"),this.cb=t,ee(this.el,this.enterClass),e(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,Pt(this.enterNextTick))},qr.enterNextTick=function(){var e=this;this.justEntered=!0,Wr(function(){e.justEntered=!1});var t=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===Ir&&te(this.el,this.enterClass):n===Ir?(te(this.el,this.enterClass),this.setupCssCb(Xn,t)):n===Hr?this.setupCssCb(ti,t):t()},qr.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,te(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},qr.leave=function(e,t){this.cancelPending(),this.callHook("beforeLeave"),this.op=e,this.cb=t,ee(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():Pt(this.leaveNextTick)))},qr.leaveNextTick=function(){var e=this.getCssTransitionType(this.leaveClass);if(e){var t=e===Ir?Xn:ti;this.setupCssCb(t,this.leaveDone)}else this.leaveDone()},qr.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),te(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},qr.cancelPending=function(){this.op=this.cb=null;var e=!1;this.pendingCssCb&&(e=!0,K(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(e=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),e&&(te(this.el,this.enterClass),te(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},qr.callHook=function(e){this.hooks&&this.hooks[e]&&this.hooks[e].call(this.vm,this.el)},qr.callHookWithCb=function(e){var t=this.hooks&&this.hooks[e];t&&(t.length>1&&(this.pendingJsCb=k(this[e+"Done"])),t.call(this.vm,this.el,this.pendingJsCb))},qr.getCssTransitionType=function(e){if(!(!Xn||document.hidden||this.hooks&&this.hooks.css===!1||Ft(this.el))){var t=this.type||this.typeCache[e];if(t)return t;var n=this.el.style,i=window.getComputedStyle(this.el),o=n[zr]||i[zr];if(o&&"0s"!==o)t=Ir;else{var r=n[Br]||i[Br];r&&"0s"!==r&&(t=Hr)}return t&&(this.typeCache[e]=t),t}},qr.setupCssCb=function(e,t){this.pendingCssEvent=e;var n=this,i=this.el,o=this.pendingCssCb=function(r){r.target===i&&(K(i,e,o),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&t&&t())};G(i,e,o)};var Jr={priority:Qo,update:function(e,t){var n=this.el,i=me(this.vm.$options,"transitions",e);e=e||"v",t=t||"v",n.__v_trans=new Mt(n,e,i,this.vm),te(n,t+"-transition"),ee(n,e+"-transition")}},Qr={style:gr,"class":Tr,component:jr,prop:Mr,transition:Jr},Yr=/^v-bind:|^:/,Gr=/^v-on:|^@/,Kr=/^v-([^:]+)(?:$|:(.*)$)/,Zr=/\.[^\.]+/g,Xr=/^(v-bind:|:)?transition$/,es=1e3,ts=2e3;on.terminal=!0;var ns=/[^\w\-:\.]/,is=Object.freeze({compile:Lt,compileAndLinkProps:Ut,compileRoot:Wt,transclude:un,resolveSlots:vn}),os=/^v-on:|^@/;mn.prototype._bind=function(){var e=this.name,t=this.descriptor;if(("cloak"!==e||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=t.attr||"v-"+e;this.el.removeAttribute(n)}var i=t.def;if("function"==typeof i?this.update=i:g(this,i),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(t.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var o=this;this.update?this._update=function(e,t){o._locked||o.update(e,t)}:this._update=bn;var r=this._preProcess?y(this._preProcess,this):null,s=this._postProcess?y(this._postProcess,this):null,a=this._watcher=new Qe(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:r,postProcess:s,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(a.value)}},mn.prototype._setupParams=function(){if(this.params){var e=this.params;this.params=Object.create(null);for(var t,n,i,o=e.length;o--;)t=d(e[o]),i=f(t),n=B(this.el,t),null!=n?this._setupParamWatcher(i,n):(n=z(this.el,t),null!=n&&(this.params[i]=""===n||n))}},mn.prototype._setupParamWatcher=function(e,t){var n=this,i=!1,o=(this._scope||this.vm).$watch(t,function(t,o){if(n.params[e]=t,i){var r=n.paramWatchers&&n.paramWatchers[e];r&&r.call(n,t,o)}else i=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(o)},mn.prototype._checkStatement=function(){var e=this.expression;if(e&&this.acceptStatement&&!Be(e)){var t=ze(e).get,n=this._scope||this.vm,i=function(e){n.$event=e,t.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},mn.prototype.set=function(e){this.twoWay?this._withLock(function(){this._watcher.set(e)}):"production"!==n.env.NODE_ENV&&Di("Directive.set() can only be used inside twoWaydirectives.")},mn.prototype._withLock=function(e){var t=this;t._locked=!0,e.call(t),oi(function(){t._locked=!1})},mn.prototype.on=function(e,t,n){G(this.el,e,t,n),(this._listeners||(this._listeners=[])).push([e,t])},mn.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,t=this._listeners;if(t)for(e=t.length;e--;)K(this.el,t[e][0],t[e][1]);var i=this._paramUnwatchFns;if(i)for(e=i.length;e--;)i[e]();"production"!==n.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var rs=/[^|]\|[^|]/;Oe(Nn),_n(Nn),gn(Nn),En(Nn),wn(Nn),xn(Nn),kn(Nn),Cn(Nn),$n(Nn);var ss={priority:er,params:["name"],bind:function(){var e=this.params.name||"default",t=this.vm._slotContents&&this.vm._slotContents[e];t&&t.hasChildNodes()?this.compile(t.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(e,t,n){if(e&&t){if(this.el.hasChildNodes()&&1===e.childNodes.length&&1===e.childNodes[0].nodeType&&e.childNodes[0].hasAttribute("v-if")){var i=document.createElement("template");i.setAttribute("v-else",""),i.innerHTML=this.el.innerHTML,i._context=this.vm,e.appendChild(i)}var o=n?n._scope:this._scope;this.unlink=t.$compile(e,n,o,this._frag)}e?Y(this.el,e):J(this.el)},fallback:function(){this.compile(ne(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},as={priority:Ko,params:["name"],paramWatchers:{name:function(e){ir.remove.call(this),e&&this.insert(e)}},bind:function(){this.anchor=se("v-partial"),Y(this.el,this.anchor),this.insert(this.params.name)},insert:function(e){var t=me(this.vm.$options,"partials",e,!0);t&&(this.factory=new ct(this.vm,t),ir.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},cs={slot:ss,partial:as},ls=nr._postProcess,hs=/(\d{3})(?=\d)/g,us={orderBy:Tn,filterBy:An,limitBy:On,json:{read:function(e,t){return"string"==typeof e?e:JSON.stringify(e,null,arguments.length>1?t:2)},write:function(e){try{return JSON.parse(e)}catch(t){return e}}},capitalize:function(e){return e||0===e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},uppercase:function(e){return e||0===e?e.toString().toUpperCase():""},lowercase:function(e){return e||0===e?e.toString().toLowerCase():""},currency:function(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",n=null!=n?n:2;var i=Math.abs(e).toFixed(n),o=n?i.slice(0,-1-n):i,r=o.length%3,s=r>0?o.slice(0,r)+(o.length>3?",":""):"",a=n?i.slice(-1-n):"",c=e<0?"-":"";return c+t+s+o.slice(r).replace(hs,"$1,")+a},pluralize:function(e){var t=_(arguments,1),n=t.length;if(n>1){var i=e%10-1;return i in t?t[i]:t[n-1]}return t[0]+(1===e?"":"s")},debounce:function(e,t){if(e)return t||(t=300),w(e,t)}};Dn(Nn),Nn.version="1.0.26",setTimeout(function(){ji.devtools&&(Bn?Bn.emit("init",Nn):"production"!==n.env.NODE_ENV&&zn&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),e.exports=Nn}).call(t,function(){return this}(),n(19))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{items:{type:Array}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="hy_u-hide";t["default"]={methods:{showNav:function(){this.$el.classList.remove(n)},hideNav:function(){var e=this.$el.className.split(" ");e.push(n),this.$el.className=e.join(" ")}},events:{"toggle::siteNav":function(){this.$el.classList.contains(n)?this.showNav():this.hideNav()}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{toggleNav:function(){this.$root.$broadcast("toggle::siteNav")}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{dismissCallBack:function(){console.log("alert!!!")},apiItems:[{name:"type",type:"String",isRequired:!0,"default":"n/a",desc:"The type of alert (error, info, success)"},{name:"dismissible",type:"Boolean",isRequired:!1,"default":!0,desc:"Is the alert dismissible?"},{name:"timeout",type:"Number",isRequired:!1,"default":-1,desc:"The duration alert stays on screen in ms"},{name:"onClosed",type:"Function",isRequired:!1,"default":"n/a",desc:"Callback function to be called when alert is closed."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"label",type:"String",isRequired:!0,"default":"n/a",desc:"The lable of the panel"},{name:"isOpen",type:"Boolean",isRequired:!1,"default":!1,desc:"Is the panel open."}]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={}},function(e,t){"use strict"},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"legalKey",type:"String",isRequired:!0,"default":"n/a",desc:"the key of legal in cms"},{name:"legalLang",type:"String",isRequired:!0,"default":"n/a",desc:"the language of legal in cms"},{name:"legalRegion",type:"String",isRequired:!0,"default":"n/a",desc:"the region of legal in cms"}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"overlayKey",type:"String",isRequired:!0,"default":"n/a",desc:"The key of the overlay. Used by the overlay opener directive to target the overley."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},methods:{showSpinner:function(){var e=this;this._resetMsg(),this.$root.$broadcast("show::spinner"),setTimeout(function(){e.$root.$broadcast("hide::spinner")},3e3)},_resetMsg:function(){var e=this,t=3,n=setInterval(function(){t>0?(t--,e.msg="I will close in "+t+" seconds"):clearInterval(n)},1e3);this.msg="I will close in "+t+" seconds"}},data:function(){return{msg:"",isFullScreen:!1,apiItems:[{name:"fullScreen",type:"Boolean",isRequired:!1,"default":!1,desc:"Should the spinner take full screen"},{name:"text",type:"String",isRequired:!1,"default":"''",desc:"The text of the spinner. Default empty"},{name:"show::spinner",type:"Event",isRequired:!1,"default":"n/a",desc:"Active the spinner"},{name:"hide::spinner",type:"Event",isRequired:!1,"default":"n/a",desc:"Hide the spinner"}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){var e=this;return{stepTrackerCurrentStep:2,stepTrackerConfig:{isClickable:!0,steps:[{title:"Step A",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=0}},{title:"Step B",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=1}},{title:"Step C",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=2}}]},apiItems:[{name:"currentStep",type:"Integer",isRequired:!0,"default":0,desc:"todo"},{name:"config",type:"Object",isRequired:!0,"default":"n/a",desc:"todo"},{name:"config.title",type:"String",isRequired:!0,"default":"n/a",desc:"The title of the step"},{name:"config.link",type:"String",isRequired:!1,"default":"n/a",desc:"The link of the step. "},{name:"config.onClickHandler",type:"Function",isRequired:!1,"default":"n/a",desc:"The callback function when step is clicked."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"label",type:"String",isRequired:!0,"default":"n/a",desc:"The lable of the tab"},{name:"isDisabled",type:"Boolean",isRequired:!1,"default":!1,desc:"Is the tab disabled or not. When set to true, the tab is not clickable."}]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{isVisible:!0}},props:{type:{type:String,required:!0},dismissible:{type:Boolean,"default":!0},timeout:{type:Number,"default":-1},onClosed:{type:Function}},methods:{dismiss:function(){var e=this;this.isVisible=!1,setTimeout(function(){e.onClosed&&e.onClosed.apply(e)})}},ready:function(){var e=this;this.timeout>=0&&setTimeout(function(){e.dismiss()},this.timeout)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{isOpen:{type:Boolean,"default":!1},label:{type:String,required:!0}},methods:{toggleOpen:function(e){this.isOpen=!this.isOpen}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={}},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=i(o),s=n(152),a=i(s),c=n(150),l=i(c),h=n(20),u=i(h);t["default"]={mixins:r["default"],directives:{setFocus:u["default"]},data:function(){return{indexedLegals:[],nonIndexedLegals:[],apiLang:null,apiRegion:null}},methods:{fetchLegals:function(t){return e("\n          "+this.$root.ligerEndPoint+"?lang="+this.apiLang+"&region="+this.apiRegion+"&html=true\n        ",{method:"POST",headers:{"Content-Type":"application/json",applicationKey:this.$root.ligerApplicationKey},body:JSON.stringify({keys:t})})},appendResponseToLegalContainer:function(e,t){var n=function(e,t){t.forEach(function(t){var n=e.findIndex(function(e){return e.key===t.key});n>-1&&e.$set(n,{content:t.content,key:t.key})})};"indexed"===e?n(this.indexedLegals,t):n(this.nonIndexedLegals,t)},getLegals:function(){return l["default"].call(this,function(){var e=this,t=this.indexedLegals.map(function(e){return e.key}),n=this.nonIndexedLegals.map(function(e){return e.key});t.length>0&&this.fetchLegals(t).then(this.parseJSON).then(function(t){e.appendResponseToLegalContainer("indexed",t)}),n.length>0&&this.fetchLegals(n).then(this.parseJSON).then(function(t){e.appendResponseToLegalContainer("nonIndexed",t)})},10)}()},events:{"legal::click":function(e){var t=this,n=this.indexedLegals.findIndex(function(t){return t.key===e});n>-1&&this.indexedLegals.forEach(function(e,i){i!==n?e.isSelected=!1:t.indexedLegals.$set(i,Object.assign({},t.indexedLegals[i],{isSelected:!0}))})},"legal::init":function(e){this.apiLang=e.lang,this.apiRegion=e.region;var t=e.isNonIndexed?this.nonIndexedLegals:this.indexedLegals,n=(0,a["default"])(t,function(t){return t.key===e.key});n<0&&(n=t.push(e)-1,this.getLegals()),e.isNonIndexed||this.rootBroadcast("legal::udpate",{key:e.key,isNonIndexed:e.isNonIndexed,index:n})}}}}).call(t,n(87))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=i(o),s=n(36),a=i(s);t["default"]={mixins:r["default"],data:function(){return{legalCounter:null}},props:{legalKey:{type:String,required:!0},isNonIndexed:{type:Boolean,"default":!1},legalLang:{type:String,required:!0},legalRegion:{type:String,required:!0}},events:{"legal::udpate":function(e){this.isNonIndexed||e.key!==this.legalKey||(this.legalCounter=e.index+1)}},methods:{clickHandler:function(){this.rootBroadcast("legal::click",this.legalKey)}},beforeCompile:function(){},ready:function(){var e=this;(0,a["default"])(function(){e.rootBroadcast("legal::init",{key:e.legalKey,lang:e.legalLang,region:e.legalRegion,isNonIndexed:e.isNonIndexed})})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=27;t["default"]={props:{isVisible:{type:Boolean,"default":!1}},watch:{
isVisible:function(e){var t=window.document.body,n="no-scroll";e?t.classList?t.classList.add(n):t.className+=" "+n:t.classList?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")}},events:{"overlayContainer::open":function(){this.isVisible=!0},"overlayContainer::close":function(){this.isVisible=!1}},ready:function(){var e=this;window.document.addEventListener("keydown",function(t){t=t||window.event,t.keyCode===n&&(e.isVisible=!1)})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{isVisible:!1}},props:{overlayKey:{type:String}},methods:{closeOverlay:function(){this.$dispatch("overlayContainer::close")}},events:{"overlay::open":function(e){return e===this.overlayKey?void(this.isVisible=!0):void(this.isVisible=!1)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={replace:!0,data:function(){return{active:!1}},props:{text:{type:String,"default":""},fullScreen:{type:Boolean,"default":!1}},methods:{show:function(){this.active=!0,this.$root.$broadcast("shown::spinner")},hide:function(){this.active=!1,this.$root.$broadcast("hidden::spinner")}},events:{"show::spinner":function(){this.show()},"hide::spinner":function(){this.hide()}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{config:{type:Object},currentStep:{type:Number,"default":0}},methods:{clickHandler:function(e,t,n){t.onClickHandler&&(e.preventDefault(),this.currentStep>n&&t.onClickHandler())}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{label:{type:String},isDisabled:{type:Boolean,"default":!1}},data:function(){return{tabIndex:0,isVisible:!1}},computed:{isVisible:function(){return this.$parent.activeTabIndex===this.tabIndex}},created:function(){this.$parent.tabs.push({label:this.label,isDisabled:this.isDisabled})},ready:function(){var e=this;this.$parent.$children.forEach(function(t,n){t.$el===e.$el&&(e.tabIndex=n)})},beforeDestroy:function(){this.$parent.tabs.splice(this.tabIndex,1)}}},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n({props:{activeTabIndex:{type:Number,"default":0}},methods:{isActive:function(e){return activeTabIndex===e}},data:function(){return{tabs:[]}}},"methods",{handleTabListClick:function(e,t){t.isDisabled||(this.activeTabIndex=e)}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(193),r=i(o),s=n(199),a=i(s),c=n(200),l=i(c),h=n(196),u=i(h),f=n(197),p=i(f),d=n(195),v=i(d),y=n(192),_=i(y),g=n(191),b=i(g),m=n(198),E=i(m),w=n(194),x=i(w);t["default"]={"/get-started":{component:r["default"]},"/alert":{component:{template:"<alert-page></alert-page>",components:{AlertPage:b["default"]}}},"/spinner":{component:{template:"<spinner-page></spinner-page>",components:{SpinnerPage:E["default"]}}},"/step-tracker":{component:{template:"<step-tracker-page></step-tracker-page>",components:{StepTrackerPage:a["default"]}}},"/tabs":{component:{template:"<tabs-page></tabs-page>",components:{TabsPage:l["default"]}}},"/legal":{component:{template:"<legal-page></legal-page>",components:{LegalPage:u["default"]}}},"/overlay":{component:{template:"<overlay-page></overlay-page>",components:{OverlayPage:p["default"]}}},"/legal-overlay":{component:{template:"<legal-overlay-page></legal-overlay-page>",components:{LegalOverlayPage:v["default"]}}},"/collapsable-panel":{component:{template:"<collapsable-panel-page></collapsable-panel-page>",components:{CollapsablePanelPage:_["default"]}}},"/hy-header":{component:{template:"<hy-header-page></hy-header-page>",components:{HyHeaderPage:x["default"]}}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={isLiteral:!0,eventHandler:function(e){e.preventDefault(),this.vm.$root.$broadcast("overlay::open",this.expression),this.vm.$root.$broadcast("overlayContainer::open")},bind:function(){this.el.addEventListener("click",this.eventHandler.bind(this))},unbind:function(){this.el.removeEventListener("click",this.eventHandler.bind(this))}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(68),r=i(o),s=n(20),a=i(s),c=n(209),l=i(c),h=n(206),u=i(h),f=n(207),p=i(f),d=n(205),v=i(d),y=n(204),_=i(y),g=n(211),b=i(g),m=n(210),E=i(m),w=n(202),x=i(w),k=n(201),C=i(k),$=n(208),N=i($),O=n(203),A=i(O),T={StepTracker:l["default"],OverlayContainer:u["default"],Overlay:p["default"],LegalCounter:v["default"],LegalContainer:_["default"],Tabs:b["default"],Tab:E["default"],CollapsablePanel:x["default"],Alert:C["default"],Spinner:N["default"],HyHeader:A["default"]},j={overlayOpener:r["default"],setFocus:a["default"]};e.exports=function(e){for(var t in T)e.component(t,T[t]);for(var n in j)e.directive(n,j[n])}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{rootBroadcast:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.$broadcast.apply(this.$root,t)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{parseJSON:function(e){return e.json()}}}},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.sg_c-api-table{border-spacing:0 10px;width:100%}.sg_c-api-table tr{-webkit-box-flex:1;-ms-flex:1;flex:1}.sg_c-api-table th,.sg_c-api-table tr:hover{background-color:#eee}.sg_c-api-table td{text-align:center}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".sg_c-nav{display:block;position:fixed;left:0;width:25rem;height:100%;border-right:.1rem solid #e2e2e2;padding:2rem;padding-top:68px;overflow-x:hidden;overflow-y:auto;background-color:#fff;z-index:999}.sg_c-nav__section{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:1.2rem;border-bottom:.1rem solid #e2e2e2;padding-top:1rem;padding-bottom:.5rem;margin:1rem 0}.sg_c-nav__list-item{padding:5px 0}.sg_c-nav__link:hover{color:#8c68a6}.sg_c-nav__link--active{color:#57a708}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"header.sg_c-site-header{background-color:#4b286d;height:68px;text-align:left;position:fixed;width:100%;z-index:9999}header.sg_c-site-header .sg_c-site-header__container{height:100%;width:100%}header.sg_c-site-header .sg_c-site-header__container img.logo{height:100%;padding:20px;display:inline-block;max-width:100%}header.sg_c-site-header .sg_c-site-header__togglebtn{color:#fff;font-size:2rem;margin:0;background:hsla(0,0%,100%,.1);padding:1.5rem;float:left;cursor:pointer;border:0;height:100%;display:inline-block}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"body{background-color:#f5f6f7}.sg_c-site__main{padding-top:68px;margin-left:25rem}@media screen and (max-width:599px){.sg_c-site__main{margin-left:0}}.sg_c-demo{margin:20px 0}.sg_c-demo__container{background-color:#fff;overflow:hidden;border-radius:5px;border:1px solid #eee;padding:25px;margin:20px 0}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.fade-transition{-webkit-transition:all .3s ease;transition:all .3s ease}.fade-enter,.fade-leave{opacity:0}.c-alert{position:relative;padding:7px 15px;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.c-alert--info{background-color:#333;border-color:#000;color:#fff}.c-alert--info button{color:#fff}.c-alert--success{background-color:#e6ffcc;border-color:#9f3;color:#408000}.c-alert--error{background-color:#f8dde3;border-color:#f2c0ca;color:#c81235}.c-alert__close-button{position:absolute;top:0;right:10px;-webkit-appearance:none;padding:0;cursor:pointer;background:0 0;border:0;font-size:2.5rem;opacity:.2;line-height:30px}.c-alert__close-button:hover{opacity:.3}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.c-collapsable-panel{border:1px solid #e2e2e2;box-shadow:0 1px 3px 1px #e2e2e2}.c-collapsable-panel__header{cursor:pointer;padding:10px 15px;position:relative}.c-collapsable-panel__header:after{position:absolute;right:1em;top:.75em;font-size:.75em;font-family:Telus Icon;content:\'\\E114\';color:#57a708}.c-collapsable-panel__header--open:after{content:\'\\E117\'}.c-collapsable-panel__body{border-top:1px solid #e2e2e2;max-height:0;padding:0 15px;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;opacity:0}.c-collapsable-panel__body--open{opacity:1;padding:15px;max-height:9999px}',""]);
},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-legal-container__ordered-list{margin-top:10px;margin-bottom:20px;list-style:decimal;list-style-type:decimal;padding-left:20px}.c-legal-container__unordered-list{margin-top:10px;margin-bottom:20px;padding-left:20px;list-style:none;list-style-type:none}.c-legal-container__list-item{line-height:19px;margin-bottom:10px;padding:10px}.c-legal-container__list-item--active{background-color:#f9f1ff}.c-legal-container__list-item a{color:#49166d;text-decoration:none;border-bottom:1px dotted;padding-bottom:1px}.c-legal-container__list-item a:hover{color:#8c68a6}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-legal-sup{font-size:.75em;line-height:0;vertical-align:super;text-decoration:none;top:0!important;cursor:pointer}.c-legal-sup a{color:#49166d}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".no-scroll{overflow-x:hidden;overflow:hidden;overflow-y:hidden;position:relative;height:100%}.c-overlay-container__curtain{opacity:0;-webkit-transition:opacity .7s cubic-bezier(.23,1,.32,1);transition:opacity .7s cubic-bezier(.23,1,.32,1)}.c-overlay-container__curtain--active{opacity:1;background:rgba(0,0,0,.55);position:fixed;top:0;left:0;right:0;bottom:0}.c-overlay-container__overlays{position:fixed;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.5);-webkit-transform:translateX(100%);transform:translateX(100%);-webkit-transition:.7s cubic-bezier(.23,1,.32,1);transition:.7s cubic-bezier(.23,1,.32,1)}@media screen and (max-width:599px){.c-overlay-container__overlays{width:100%}}@media screen and (min-width:600px){.c-overlay-container__overlays{width:66%}}.c-overlay-container__overlays--active{-webkit-transform:translateX(0);transform:translateX(0);z-index:99999}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-overlay{height:100%;width:100%;background-color:#fff}.c-overlay__header{padding:20px;position:fixed;top:0;height:75px;width:100%;border-bottom:1px solid #e2e2e2;background-color:#f5f6f7}.c-overlay__close-button{cursor:pointer;background:0;border:0;position:absolute;top:2rem;right:1rem;font-family:Telus Icon;font-size:2em;color:#49166d}.c-overlay__close-button:before{content:'\\E106'}.c-overlay__body{position:fixed;-webkit-overflow-scrolling:touch;overflow-y:scroll;top:75px;bottom:0;width:100%;padding:20px 20px 50px}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"@-webkit-keyframes rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@-webkit-keyframes spinner-color{0%,to{stroke:#6c0}25%{stroke:#6c0}50%{stroke:#57a708}75%{stroke:#57a708}}@keyframes spinner-color{0%,to{stroke:#6c0}25%{stroke:#6c0}50%{stroke:#57a708}75%{stroke:#57a708}}.c-spinner{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-flex;-webkit-align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.c-spinner--fullscreen{position:fixed;top:0;left:0;right:0;bottom:0;z-index:9998;width:100%;height:100%;background:hsla(0,0%,100%,.8)}.c-spinner svg{animation-name:rotate;-webkit-animation-name:rotate;-moz-animation-name:rotate;animation-duration:1.8s;-webkit-animation-duration:1.8s;-moz-animation-duration:1.8s;animation-iteration-count:infinite;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;animation-timing-function:linear;-webkit-animation-timing-function:linear;-moz-animation-timing-function:linear;height:100px;width:100px}.c-spinner circle{animation:dash 1.7s ease-in-out infinite 0s,spinner-color 6s ease-in-out infinite -.75s;-webkit-animation:dash 1.7s ease-in-out infinite 0s,spinner-color 6s ease-in-out infinite -.75s;-moz-animation:dash 1.7s ease-in-out infinite 0s,spinner-color 6s ease-in-out infinite -.75s}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.c-step-tracker__icon,.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.c-step-tracker{list-style:none;padding:0;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:1rem -1.5rem}@media screen and (min-width:600px){.c-step-tracker{padding-bottom:2.5rem;margin:1rem 0}}.c-step-tracker__step{width:100%;position:relative;text-align:center}.c-step-tracker__step:after,.c-step-tracker__step:before{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:calc(50% - 1.4rem);content:\' \';border-bottom:.6rem solid #aeaeae}.c-step-tracker__step:before{left:0}.c-step-tracker__step:after{right:0}.c-step-tracker .c-step-tracker__step:first-child:before,.c-step-tracker .c-step-tracker__step:last-child:after{content:none}.c-step-tracker__label{position:absolute;bottom:-3rem;left:0;font-size:1.7rem;width:100%;height:2.5rem;font-family:Telus Regular,Helvetica Neue,Helvetica,Arial,sans-serif;color:#666}@media screen and (max-width:599px){.c-step-tracker__label{display:none}}.c-step-tracker__step--active .c-step-tracker__label{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;color:#408000}.c-step-tracker__icon{font-size:3rem;color:#aeaeae}.c-step-tracker__icon:before{content:"\\E001"}.c-step-tracker__step--active .c-step-tracker__icon:before{content:"\\E002"}.c-step-tracker__setp--clickable a{cursor:pointer}.c-step-tracker__step--complete:after{border-bottom:.6rem solid #57a708}.c-step-tracker__step--complete .c-step-tracker__icon:before{content:"\\E110"}.c-step-tracker__step--active .c-step-tracker__icon:before,.c-step-tracker__step--complete .c-step-tracker__icon:before{color:#57a708}.c-step-tracker__step--complete+.c-step-tracker__step--active:before,.c-step-tracker__step--complete+.c-step-tracker__step--complete:before{border-bottom:.6rem solid #57a708}.c-step-tracker-mobile-label{font-size:1.7rem;text-align:center;font-family:Telus Regular,Helvetica Neue,Helvetica,Arial,sans-serif;color:#666}@media screen and (min-width:600px){.c-step-tracker-mobile-label{display:none}}.c-step-tracker-mobile-label__step{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;color:#408000}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-tabs__header{list-style:none;padding:0;margin:0;display:-webkit-box;display:-ms-flexbox;display:flex}.c-tabs__header-item{margin-top:2px;height:45px;padding:0 2px;-webkit-box-flex:1;-ms-flex:1;flex:1}.c-tabs__header-item a{background-color:#e2e2e2;text-decoration:none;padding:13px 20px;color:#49166d;display:block}.c-tabs__header-item--active{margin-top:1px;height:46px;background-color:#fff;border-top:1px solid #e2e2e2;border-left:1px solid #e2e2e2;border-right:1px solid #e2e2e2}.c-tabs__header-item--active a{background-color:#fff;color:#333}.c-tabs__header-item--disabled a{background-color:#f5f6f7;color:#aeaeae;cursor:not-allowed}.c-tabs__body{background-color:#fff;border:1px solid #e2e2e2;margin-top:-1px;padding:20px}.c-tabs__pane{display:block;border-top:none;opacity:0;height:0;overflow:hidden;padding:0 5px;-webkit-transition:all .5s ease-out;transition:all .5s ease-out}.c-tabs__pane--active{opacity:1;padding:5px;height:auto}",""])},function(e,t,n){var i;(function(e,o,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.2.1
	 */
(function(){"use strict";function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function c(e){G=e}function l(e){ee=e}function h(){return function(){e.nextTick(v)}}function u(){return function(){Y(v)}}function f(){var e=0,t=new ie(v),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=v,function(){e.port2.postMessage(0)}}function d(){return function(){setTimeout(v,1)}}function v(){for(var e=0;e<X;e+=2){var t=se[e],n=se[e+1];t(n),se[e]=void 0,se[e+1]=void 0}X=0}function y(){try{var e=n(230);return Y=e.runOnLoop||e.runOnContext,u()}catch(t){return d()}}function _(e,t){var n=this,i=new this.constructor(b);void 0===i[le]&&F(i);var o=n._state;if(o){var r=arguments[o-1];ee(function(){P(o,i,r,n._result)})}else j(n,i,e,t);return i}function g(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(b);return N(n,e),n}function b(){}function m(){return new TypeError("You cannot resolve a promise with itself")}function E(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(t){return pe.error=t,pe}}function x(e,t,n,i){try{e.call(t,n,i)}catch(o){return o}}function k(e,t,n){ee(function(e){var i=!1,o=x(n,t,function(n){i||(i=!0,t!==n?N(e,n):A(e,n))},function(t){i||(i=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&o&&(i=!0,T(e,o))},e)}function C(e,t){t._state===ue?A(e,t._result):t._state===fe?T(e,t._result):j(t,void 0,function(t){N(e,t)},function(t){T(e,t)})}function $(e,t,n){t.constructor===e.constructor&&n===ae&&constructor.resolve===ce?C(e,t):n===pe?T(e,pe.error):void 0===n?A(e,t):a(n)?k(e,t,n):A(e,t)}function N(e,t){e===t?T(e,m()):s(t)?$(e,t,w(t)):A(e,t)}function O(e){e._onerror&&e._onerror(e._result),D(e)}function A(e,t){e._state===he&&(e._result=t,e._state=ue,0!==e._subscribers.length&&ee(D,e))}function T(e,t){e._state===he&&(e._state=fe,e._result=t,ee(O,e))}function j(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+ue]=n,o[r+fe]=i,0===r&&e._state&&ee(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,o,r=e._result,s=0;s<t.length;s+=3)i=t[s],o=t[s+n],i?P(n,i,o,r):o(r);e._subscribers.length=0}}function S(){this.error=null}function V(e,t){try{return e(t)}catch(n){return de.error=n,de}}function P(e,t,n,i){var o,r,s,c,l=a(n);if(l){if(o=V(n,i),o===de?(c=!0,r=o.error,o=null):s=!0,t===o)return void T(t,E())}else o=i,s=!0;t._state!==he||(l&&s?N(t,o):c?T(t,r):e===ue?A(t,o):e===fe&&T(t,o))}function R(e,t){try{t(function(t){N(e,t)},function(t){T(e,t)})}catch(n){T(e,n)}}function M(){return ve++}function F(e){e[le]=ve++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(e){return new me(this,e).promise}function I(e){var t=this;return new t(Z(e)?function(n,i){for(var o=e.length,r=0;r<o;r++)t.resolve(e[r]).then(n,i)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function H(e){var t=this,n=new t(b);return T(n,e),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(e){this[le]=M(),this._result=this._state=void 0,this._subscribers=[],b!==e&&("function"!=typeof e&&z(),this instanceof U?R(this,e):B())}function W(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[le]||F(this.promise),Z(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):T(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function J(){var e;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(e.Promise=be)}var Q;Q=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y,G,K,Z=Q,X=0,ee=function(e,t){se[X]=e,se[X+1]=t,X+=2,2===X&&(G?G(v):K())},te="undefined"!=typeof window?window:void 0,ne=te||{},ie=ne.MutationObserver||ne.WebKitMutationObserver,oe="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),re="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,se=new Array(1e3);K=oe?h():ie?f():re?p():void 0===te?y():d();var ae=_,ce=g,le=Math.random().toString(36).substring(16),he=void 0,ue=1,fe=2,pe=new S,de=new S,ve=0,ye=L,_e=I,ge=H,be=U;U.all=ye,U.race=_e,U.resolve=ce,U.reject=ge,U._setScheduler=c,U._setAsap=l,U._asap=ee,U.prototype={constructor:U,then:ae,"catch":function(e){return this.then(null,e)}};var me=W;W.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===he&&n<e;n++)this._eachEntry(t[n],n)},W.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===ce){var o=w(e);if(o===ae&&e._state!==he)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===be){var r=new n(b);$(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(i(e),t)},W.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===he&&(this._remaining--,e===fe?T(i,n):this._result[t]=n),0===this._remaining&&A(i,this._result)},W.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,function(e){n._settledAt(ue,t,e)},function(e){n._settledAt(fe,t,e)})};var Ee=J,we={Promise:be,polyfill:Ee};n(228).amd?(i=function(){return we}.call(t,n,t,r),!(void 0!==i&&(r.exports=i))):"undefined"!=typeof r&&r.exports?r.exports=we:"undefined"!=typeof this&&(this.ES6Promise=we),Ee()}).call(this),r.exports=o.Promise}).call(t,n(19),function(){return this}(),n(229)(e))},function(e,t,n){(function(t){!function(e){"use strict";function n(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?t.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new t(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function l(e){var t=new FileReader;return t.readAsText(e),a(t)}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob?(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return t.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return t.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return t.resolve(this._bodyText)}):this.text=function(){var e=s(this);return e?e:t.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=u(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(o))}}),t}function d(e){var t=new r,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),i=n.shift().trim(),o=n.join(":").trim();t.append(i,o)}),t}function v(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof r?t.headers:new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};r.prototype.append=function(e,t){e=n(e),t=i(t);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(t)},r.prototype["delete"]=function(e){delete this.map[n(e)]},r.prototype.get=function(e){var t=this.map[n(e)];return t?t[0]:null},r.prototype.getAll=function(e){return this.map[n(e)]||[]},r.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},r.prototype.set=function(e,t){this.map[n(e)]=[i(t)]},r.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){e.call(t,i,n,this)},this)},this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),o(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},y.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},h.call(f.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var g=[301,302,303,307,308];v.redirect=function(e,t){if(g.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=f,e.Response=v,e.fetch=function(e,n){return new t(function(t,i){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var r;r=f.prototype.isPrototypeOf(e)&&!n?e:new f(e,n);var s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:d(s),url:o()},n="response"in s?s.response:s.responseText;t(new v(n,e))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(r.method,r.url,!0),"include"===r.credentials&&(s.withCredentials=!0),"responseType"in s&&y.blob&&(s.responseType="blob"),r.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),e.exports=self.fetch}).call(t,n(86))},function(e,t,n){e.exports=n.p+"b4de29fe43ac85ef0b66f9c7dfc474d3.png"},function(e,t,n){var i=n(6),o=n(3),r=i(o,"DataView");e.exports=r},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(121),r=n(122),s=n(123),a=n(124),c=n(125);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){var i=n(6),o=n(3),r=i(o,"Promise");e.exports=r},function(e,t,n){var i=n(6),o=n(3),r=i(o,"Set");e.exports=r},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.__data__=new o;++t<n;)this.add(e[t])}var o=n(17),r=n(141),s=n(142);i.prototype.add=i.prototype.push=r,i.prototype.has=s,e.exports=i},function(e,t,n){var i=n(3),o=i.Uint8Array;e.exports=o},function(e,t,n){var i=n(6),o=n(3),r=i(o,"WeakMap");e.exports=r},function(e,t){function n(e,t,n){var i=n.length;switch(i){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t){function n(e,t,n){if("function"!=typeof e)throw new TypeError(i);return setTimeout(function(){e.apply(void 0,n)},t)}var i="Expected a function";e.exports=n},function(e,t){function n(e,t,n,i){for(var o=e.length,r=n+(i?1:-1);i?r--:++r<o;)if(t(e[r],r,e))return r;return-1}e.exports=n},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function i(e,t,n,i,y,g){var b=l(e),m=l(t),E=d,w=d;b||(E=c(e),E=E==p?v:E),m||(w=c(t),w=w==p?v:w);var x=E==v&&!h(e),k=w==v&&!h(t),C=E==w;if(C&&!x)return g||(g=new o),b||u(e)?r(e,t,n,i,y,g):s(e,t,E,n,i,y,g);if(!(y&f)){var $=x&&_.call(e,"__wrapped__"),N=k&&_.call(t,"__wrapped__");if($||N){var O=$?e.value():e,A=N?t.value():t;return g||(g=new o),n(O,A,i,y,g)}}return!!C&&(g||(g=new o),a(e,t,n,i,y,g))}var o=n(23),r=n(30),s=n(113),a=n(114),c=n(118),l=n(4),h=n(31),u=n(157),f=2,p="[object Arguments]",d="[object Array]",v="[object Object]",y=Object.prototype,_=y.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,i){var c=n.length,l=c,h=!i;if(null==e)return!l;for(e=Object(e);c--;){var u=n[c];if(h&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++c<l;){u=n[c];var f=u[0],p=e[f],d=u[1];if(h&&u[2]){if(void 0===p&&!(f in e))return!1}else{var v=new o;if(i)var y=i(p,d,f,e,t,v);if(!(void 0===y?r(d,p,i,s|a,v):y))return!1}}return!0}var o=n(23),r=n(27),s=1,a=2;e.exports=i},function(e,t,n){function i(e){if(!a(e)||s(e))return!1;var t=o(e)||r(e)?d:h;return t.test(c(e))}var o=n(18),r=n(31),s=n(128),a=n(7),c=n(35),l=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,u=Object.prototype,f=Function.prototype.toString,p=u.hasOwnProperty,d=RegExp("^"+f.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?r(e[0],e[1]):o(e):c(e)}var o=n(106),r=n(107),s=n(155),a=n(4),c=n(160);e.exports=i},function(e,t){function n(e){return i(Object(e))}var i=Object.keys;e.exports=n},function(e,t,n){function i(e){var t=r(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}var o=n(102),r=n(116),s=n(34);e.exports=i},function(e,t,n){function i(e,t){return a(e)&&c(t)?l(h(e),t):function(n){var i=r(n,e);return void 0===i&&i===t?s(n,e):o(t,i,void 0,u|f)}}var o=n(27),r=n(153),s=n(154),a=n(12),c=n(33),l=n(34),h=n(14),u=1,f=2;e.exports=i},function(e,t,n){function i(e){return function(t){return o(t,e)}}var o=n(25);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}e.exports=n},function(e,t,n){function i(e){if("string"==typeof e)return e;if(r(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var o=n(24),r=n(16),s=1/0,a=o?o.prototype:void 0,c=a?a.toString:void 0;e.exports=i},function(e,t){function n(e){return e&&e.Object===Object?e:null}e.exports=n},function(e,t,n){var i=n(3),o=i["__core-js_shared__"];e.exports=o},function(e,t,n){function i(e,t,n,i,o,w,k){switch(n){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case m:return!(e.byteLength!=t.byteLength||!i(new r(e),new r(t)));case u:case f:return+e==+t;case p:return e.name==t.name&&e.message==t.message;case v:return e!=+e?t!=+t:e==+t;case y:case g:return e==t+"";case d:var C=a;case _:var $=w&h;if(C||(C=c),e.size!=t.size&&!$)return!1;var N=k.get(e);return N?N==t:(w|=l,k.set(e,t),s(C(e),C(t),i,o,w,k));case b:if(x)return x.call(e)==x.call(t)}return!1}var o=n(24),r=n(94),s=n(30),a=n(140),c=n(143),l=1,h=2,u="[object Boolean]",f="[object Date]",p="[object Error]",d="[object Map]",v="[object Number]",y="[object RegExp]",_="[object Set]",g="[object String]",b="[object Symbol]",m="[object ArrayBuffer]",E="[object DataView]",w=o?o.prototype:void 0,x=w?w.valueOf:void 0;e.exports=i},function(e,t,n){function i(e,t,n,i,a,c){var l=a&s,h=r(e),u=h.length,f=r(t),p=f.length;if(u!=p&&!l)return!1;for(var d=u;d--;){var v=h[d];if(!(l?v in t:o(t,v)))return!1}var y=c.get(e);if(y)return y==t;var _=!0;c.set(e,t);for(var g=l;++d<u;){v=h[d];var b=e[v],m=t[v];if(i)var E=l?i(m,b,v,t,e,c):i(b,m,v,e,t,c);if(!(void 0===E?b===m||n(b,m,i,a,c):E)){_=!1;break}g||(g="constructor"==v)}if(_&&!g){var w=e.constructor,x=t.constructor;w!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(_=!1)}return c["delete"](e),_}var o=n(26),r=n(40),s=2;e.exports=i},function(e,t,n){var i=n(28),o=i("length");e.exports=o},function(e,t,n){function i(e){for(var t=r(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,o(s)]}return t}var o=n(33),r=n(40);e.exports=i},function(e,t){function n(e){return i(Object(e))}var i=Object.getPrototypeOf;e.exports=n},function(e,t,n){function i(e){return _.call(e)}var o=n(89),r=n(22),s=n(91),a=n(92),c=n(95),l=n(35),h="[object Map]",u="[object Object]",f="[object Promise]",p="[object Set]",d="[object WeakMap]",v="[object DataView]",y=Object.prototype,_=y.toString,g=l(o),b=l(r),m=l(s),E=l(a),w=l(c);(o&&i(new o(new ArrayBuffer(1)))!=v||r&&i(new r)!=h||s&&i(s.resolve())!=f||a&&i(new a)!=p||c&&i(new c)!=d)&&(i=function(e){var t=_.call(e),n=t==u?e.constructor:void 0,i=n?l(n):void 0;if(i)switch(i){case g:return v;case b:return h;case m:return f;case E:return p;case w:return d}return t}),e.exports=i},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function i(e,t,n){t=c(t,e)?[t]:o(t);for(var i,f=-1,p=t.length;++f<p;){var d=u(t[f]);if(!(i=null!=e&&n(e,d)))break;e=e[d]}if(i)return i;var p=e?e.length:0;return!!p&&l(p)&&a(d,p)&&(s(e)||h(e)||r(e))}var o=n(29),r=n(37),s=n(4),a=n(32),c=n(12),l=n(15),h=n(39),u=n(14);e.exports=i},function(e,t,n){function i(){this.__data__=o?o(null):{}}var o=n(13);e.exports=i},function(e,t){function n(e){return this.has(e)&&delete this.__data__[e]}e.exports=n},function(e,t,n){function i(e){var t=this.__data__;if(o){var n=t[e];return n===r?void 0:n}return a.call(t,e)?t[e]:void 0}var o=n(13),r="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=this.__data__;return o?void 0!==t[e]:s.call(t,e)}var o=n(13),r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__;return n[e]=o&&void 0===t?r:t,this}var o=n(13),r="__lodash_hash_undefined__";e.exports=i},function(e,t,n){function i(e){var t=e?e.length:void 0;return a(t)&&(s(e)||c(e)||r(e))?o(t,String):null}var o=n(109),r=n(37),s=n(4),a=n(15),c=n(39);e.exports=i},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function i(e){return!!r&&r in e}var o=n(112),r=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=i},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||i;return e===n}var i=Object.prototype;e.exports=n},function(e,t){function n(){this.__data__=[]}e.exports=n},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():s.call(t,n,1),!0}var o=n(10),r=Array.prototype,s=r.splice;e.exports=i},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(10);e.exports=i},function(e,t,n){function i(e){return o(this.__data__,e)>-1}var o=n(10);e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__,i=o(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}var o=n(10);e.exports=i},function(e,t,n){function i(){this.__data__={hash:new o,map:new(s||r),string:new o}}var o=n(90),r=n(9),s=n(22);e.exports=i},function(e,t,n){function i(e){return o(this,e)["delete"](e)}var o=n(11);e.exports=i},function(e,t,n){function i(e){return o(this,e).get(e)}var o=n(11);e.exports=i},function(e,t,n){function i(e){return o(this,e).has(e)}var o=n(11);e.exports=i},function(e,t,n){function i(e,t){return o(this,e).set(e,t),this}var o=n(11);e.exports=i},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}e.exports=n},function(e,t){function n(e){return this.__data__.set(e,i),this}var i="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function i(){this.__data__=new o}var o=n(9);e.exports=i},function(e,t){function n(e){return this.__data__["delete"](e)}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function i(e,t){var n=this.__data__;return n instanceof o&&n.__data__.length==s&&(n=this.__data__=new r(n.__data__)),n.set(e,t),this}var o=n(9),r=n(17),s=200;e.exports=i},function(e,t,n){var i=n(158),o=n(163),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,s=/\\(\\)?/g,a=i(function(e){var t=[];return o(e).replace(r,function(e,n,i,o){t.push(i?o.replace(s,"$1"):n||e)}),t});e.exports=a},function(e,t,n){function i(e,t,n){function i(t){var n=g,i=b;return g=b=void 0,k=t,E=e.apply(i,n)}function h(e){return k=e,w=setTimeout(p,t),C?i(e):E}function u(e){var n=e-x,i=e-k,o=t-n;return $?l(o,m-i):o}function f(e){var n=e-x,i=e-k;return void 0===x||n>=t||n<0||$&&i>=m}function p(){var e=r();return f(e)?d(e):void(w=setTimeout(p,u(e)))}function d(e){return w=void 0,N&&g?i(e):(g=b=void 0,E)}function v(){k=0,g=x=b=w=void 0}function y(){return void 0===w?E:d(r())}function _(){var e=r(),n=f(e);if(g=arguments,b=this,x=e,n){if(void 0===w)return h(x);if($)return w=setTimeout(p,t),i(x)}return void 0===w&&(w=setTimeout(p,t)),E}var g,b,m,E,w,x,k=0,C=!1,$=!1,N=!0;if("function"!=typeof e)throw new TypeError(a);return t=s(t)||0,o(n)&&(C=!!n.leading,$="maxWait"in n,m=$?c(s(n.maxWait)||0,t):m,N="trailing"in n?!!n.trailing:N),_.cancel=v,_.flush=y,_}var o=n(7),r=n(159),s=n(42),a="Expected a function",c=Math.max,l=Math.min;e.exports=i},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function i(e,t,n){var i=e?e.length:0;if(!i)return-1;var c=null==n?0:s(n);return c<0&&(c=a(i+c,0)),o(e,r(t,3),c)}var o=n(99),r=n(104),s=n(41),a=Math.max;e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?void 0:o(e,t);return void 0===i?n:i}var o=n(25);e.exports=i},function(e,t,n){function i(e,t){return null!=e&&r(e,t,o)}var o=n(100),r=n(120);e.exports=i},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function i(e){return r(e)&&o(e)}var o=n(38),r=n(8);e.exports=i},function(e,t,n){function i(e){return r(e)&&o(e.length)&&!!T[D.call(e)]}var o=n(15),r=n(8),s="[object Arguments]",a="[object Array]",c="[object Boolean]",l="[object Date]",h="[object Error]",u="[object Function]",f="[object Map]",p="[object Number]",d="[object Object]",v="[object RegExp]",y="[object Set]",_="[object String]",g="[object WeakMap]",b="[object ArrayBuffer]",m="[object DataView]",E="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",k="[object Int16Array]",C="[object Int32Array]",$="[object Uint8Array]",N="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]",T={};T[E]=T[w]=T[x]=T[k]=T[C]=T[$]=T[N]=T[O]=T[A]=!0,T[s]=T[a]=T[b]=T[c]=T[m]=T[l]=T[h]=T[u]=T[f]=T[p]=T[d]=T[v]=T[y]=T[_]=T[g]=!1;var j=Object.prototype,D=j.toString;e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(r);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=e.apply(this,i);return n.cache=r.set(o,s),s};return n.cache=new(i.Cache||o),n}var o=n(17),r="Expected a function";i.Cache=o,e.exports=i},function(e,t){function n(){return Date.now()}e.exports=n},function(e,t,n){function i(e){return s(e)?o(a(e)):r(e)}var o=n(28),r=n(108),s=n(12),a=n(14);e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e)throw new TypeError(s);return t=a(void 0===t?e.length-1:r(t),0),function(){for(var n=arguments,i=-1,r=a(n.length-t,0),s=Array(r);++i<r;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var c=Array(t+1);for(i=-1;++i<t;)c[i]=n[i];return c[t]=s,o(e,this,c)}}var o=n(96),r=n(41),s="Expected a function",a=Math.max;e.exports=i},function(e,t,n){function i(e){if(!e)return 0===e?e:0;if(e=o(e),e===r||e===-r){var t=e<0?-1:1;return t*s}return e===e?e:0}var o=n(42),r=1/0,s=1.7976931348623157e308;e.exports=i},function(e,t,n){function i(e){return null==e?"":o(e)}var o=n(110);e.exports=i},function(e,t){(function(t){var n="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},i=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,i=n.Prism={util:{encode:function(e){return e instanceof o?new o(e.type,i.util.encode(e.content),e.alias):"Array"===i.util.type(e)?e.map(i.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){var t=i.util.type(e);switch(t){case"Object":var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=i.util.clone(e[o]));return n;case"Array":return e.map&&e.map(function(e){return i.util.clone(e)})}return e}},languages:{extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){o=o||i.languages;var r=o[e];if(2==arguments.length){n=arguments[1];for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s]);return r}var a={};for(var c in r)if(r.hasOwnProperty(c)){if(c==t)for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s]);a[c]=r[c]}return i.languages.DFS(i.languages,function(t,n){n===o[e]&&t!=e&&(this[t]=a)}),o[e]=a},DFS:function(e,t,n,o){o=o||{};for(var r in e)e.hasOwnProperty(r)&&(t.call(e,r,e[r],n||r),"Object"!==i.util.type(e[r])||o[i.util.objId(e[r])]?"Array"!==i.util.type(e[r])||o[i.util.objId(e[r])]||(o[i.util.objId(e[r])]=!0,i.languages.DFS(e[r],t,r,o)):(o[i.util.objId(e[r])]=!0,i.languages.DFS(e[r],t,null,o)))}},plugins:{},highlightAll:function(e,t){var n={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",n);for(var o,r=n.elements||document.querySelectorAll(n.selector),s=0;o=r[s++];)i.highlightElement(o,e===!0,n.callback)},highlightElement:function(t,o,r){for(var s,a,c=t;c&&!e.test(c.className);)c=c.parentNode;c&&(s=(c.className.match(e)||[,""])[1].toLowerCase(),a=i.languages[s]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+s,c=t.parentNode,/pre/i.test(c.nodeName)&&(c.className=c.className.replace(e,"").replace(/\s+/g," ")+" language-"+s);var l=t.textContent,h={element:t,language:s,grammar:a,code:l};if(i.hooks.run("before-sanity-check",h),!h.code||!h.grammar)return void i.hooks.run("complete",h);if(i.hooks.run("before-highlight",h),o&&n.Worker){var u=new Worker(i.filename);u.onmessage=function(e){h.highlightedCode=e.data,i.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,r&&r.call(h.element),i.hooks.run("after-highlight",h),i.hooks.run("complete",h)},u.postMessage(JSON.stringify({language:h.language,code:h.code,immediateClose:!0}))}else h.highlightedCode=i.highlight(h.code,h.grammar,h.language),i.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,r&&r.call(t),i.hooks.run("after-highlight",h),i.hooks.run("complete",h)},highlight:function(e,t,n){var r=i.tokenize(e,t);return o.stringify(i.util.encode(r),n)},tokenize:function(e,t,n){var o=i.Token,r=[e],s=t.rest;if(s){for(var a in s)t[a]=s[a];delete t.rest}e:for(var a in t)if(t.hasOwnProperty(a)&&t[a]){var c=t[a];c="Array"===i.util.type(c)?c:[c];for(var l=0;l<c.length;++l){var h=c[l],u=h.inside,f=!!h.lookbehind,p=!!h.greedy,d=0,v=h.alias;h=h.pattern||h;for(var y=0;y<r.length;y++){var _=r[y];if(r.length>e.length)break e;if(!(_ instanceof o)){h.lastIndex=0;var g=h.exec(_),b=1;if(!g&&p&&y!=r.length-1){var m=r[y+1].matchedStr||r[y+1],E=_+m;if(y<r.length-2&&(E+=r[y+2].matchedStr||r[y+2]),h.lastIndex=0,g=h.exec(E),!g)continue;var w=g.index+(f?g[1].length:0);if(w>=_.length)continue;var x=g.index+g[0].length,k=_.length+m.length;if(b=3,x<=k){if(r[y+1].greedy)continue;b=2,E=E.slice(0,k)}_=E}if(g){f&&(d=g[1].length);var w=g.index+d,g=g[0].slice(d),x=w+g.length,C=_.slice(0,w),$=_.slice(x),N=[y,b];C&&N.push(C);var O=new o(a,u?i.tokenize(g,u):g,v,g,p);N.push(O),$&&N.push($),Array.prototype.splice.apply(r,N)}}}}}return r},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var o,r=0;o=n[r++];)o(t)}}},o=i.Token=function(e,t,n,i,o){this.type=e,this.content=t,this.alias=n,this.matchedStr=i||null,this.greedy=!!o};if(o.stringify=function(e,t,n){if("string"==typeof e)return e;if("Array"===i.util.type(e))return e.map(function(n){return o.stringify(n,t,e)}).join("");var r={type:e.type,content:o.stringify(e.content,t,n),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:n};if("comment"==r.type&&(r.attributes.spellcheck="true"),e.alias){var s="Array"===i.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(r.classes,s)}i.hooks.run("wrap",r);var a="";for(var c in r.attributes)a+=(a?" ":"")+c+'="'+(r.attributes[c]||"")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'" '+a+">"+r.content+"</"+r.tag+">"},!n.document)return n.addEventListener?(n.addEventListener("message",function(e){var t=JSON.parse(e.data),o=t.language,r=t.code,s=t.immediateClose;n.postMessage(i.highlight(r,i.languages[o],o)),s&&n.close()},!1),n.Prism):n.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(i.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&("loading"!==document.readyState?requestAnimationFrame(i.highlightAll,0):document.addEventListener("DOMContentLoaded",i.highlightAll))),n.Prism}();"undefined"!=typeof e&&e.exports&&(e.exports=i),
"undefined"!=typeof t&&(t.Prism=i),i.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=.$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},i.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),i.languages.xml=i.languages.markup,i.languages.html=i.languages.markup,i.languages.mathml=i.languages.markup,i.languages.svg=i.languages.markup,i.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,"function":/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},i.languages.css.atrule.inside.rest=i.util.clone(i.languages.css),i.languages.markup&&(i.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:i.languages.css,alias:"language-css"}}),i.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:i.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:i.languages.css}},alias:"language-css"}},i.languages.markup.tag)),i.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},i.languages.javascript=i.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),i.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),i.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:i.languages.javascript}},string:/[\s\S]+/}}}),i.languages.markup&&i.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:i.languages.javascript,alias:"language-javascript"}}),i.languages.js=i.languages.javascript,function(){"undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector&&(self.Prism.fileHighlight=function(){var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.forEach&&Array.prototype.slice.call(document.querySelectorAll("pre[data-src]")).forEach(function(t){for(var n,o=t.getAttribute("data-src"),r=t,s=/\blang(?:uage)?-(?!\*)(\w+)\b/i;r&&!s.test(r.className);)r=r.parentNode;if(r&&(n=(t.className.match(s)||[,""])[1]),!n){var a=(o.match(/\.(\w+)$/)||[,""])[1];n=e[a]||a}var c=document.createElement("code");c.className="language-"+n,t.textContent="",c.textContent="Loading…",t.appendChild(c);var l=new XMLHttpRequest;l.open("GET",o,!0),l.onreadystatechange=function(){4==l.readyState&&(l.status<400&&l.responseText?(c.textContent=l.responseText,i.highlightElement(c)):l.status>=400?c.textContent="✖ Error "+l.status+" while fetching file: "+l.statusText:c.textContent="✖ Error: File does not exist or is empty")},l.send(null)})},document.addEventListener("DOMContentLoaded",self.Prism.fileHighlight))}()}).call(t,function(){return this}())},function(e,t){e.exports='<table class=sg_c-api-table> <tr> <th> Name </th> <th> Type </th> <th> Required </th> <th> Default </th> <th> Description </th> </tr> <tr v-for="item in items"> <td>{{item.name}}</td> <td>{{item.type}}</td> <td>{{item.isRequired}}</td> <td>{{item.default}}</td> <td>{{item.desc}}</td> </tr> </table> '},function(e,t){e.exports="<nav class=\"sg_c-nav hy_u-hide hy_u-show@md\" @click=hideNav> <h2 class=sg_c-nav__section>INTRODUCTION</h2> <ul class=hy_o-list @click=hideNav> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/get-started', activeClass: 'sg_c-nav__link--active'}\"> Get Started </a> </li> </ul> <h2 class=sg_c-nav__section>COMPONENTS</h2> <ul class=hy_o-list> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/alert', activeClass: 'sg_c-nav__link--active'}\"> Alert </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/spinner', activeClass: 'sg_c-nav__link--active'}\"> Spinner </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/step-tracker', activeClass: 'sg_c-nav__link--active'}\"> Step Tracker </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/tabs', activeClass: 'sg_c-nav__link--active'}\"> Tabs </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/overlay', activeClass: 'sg_c-nav__link--active'}\"> Overlay </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/legal', activeClass: 'sg_c-nav__link--active'}\"> Legal </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/legal-overlay', activeClass: 'sg_c-nav__link--active'}\"> Legal + Overlay </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/collapsable-panel', activeClass: 'sg_c-nav__link--active'}\"> Collapsable Panel </a> </li> </ul> <h2 class=sg_c-nav__section>DIRECTIVES</h2> <ul class=hy_o-list> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/overlay-opener', activeClass: 'sg_c-nav__link--active'}\"> Overlay Opener </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/set-focus', activeClass: 'sg_c-nav__link--active'}\"> Set Focus </a> </li> </ul> </nav> "},function(e,t,n){e.exports='<header class=sg_c-site-header> <div class=sg_c-site-header__container> <button @click=toggleNav class="hy_u-hide@md js-active sg_c-site-header__togglebtn" type=button role=button> <span class=""><i class="hy_c-icon hy_c-icon--hamburger"></i></span> </button> <a v-link="{path: \'/get-started\'}"> <img class=logo src='+n(88)+" alt=Logo> </a> </div> </header> "},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Alert</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <alert type=error>This is an error alert.</alert> <alert type=info>This is an info alert.</alert> <alert type=success>This is a success alert.</alert> <alert type=success :dismissible=false>This is not a dismissible alert.</alert> <alert type=success :on-closed=dismissCallBack>This is an alert with callback.</alert> <alert type=info :timeout=5000>This alert should timeout in 5 seconds.</alert> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;alert type="error"&gt;This is an error alert.&lt;/alert&gt;\n&lt;alert type="info"&gt;This is an info alert.&lt;/alert&gt;\n&lt;alert type="success"&gt;This is a success alert.&lt;/alert&gt;\n&lt;alert type="success" :dismissible="false"&gt;This is not a dismissible alert.&lt;/alert&gt;\n&lt;alert type="success" :on-closed="dismissCallBack"&gt;This is an alert with callback.&lt;/alert&gt;\n&lt;alert type="success" :timeout="5000"&gt;This alert should timeout in 5 seconds.&lt;/alert&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Collapsable Panel</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <collapsable-panel label="Panel 1" :is-open=true> Panel 1 content </collapsable-panel> <collapsable-panel label="Panel 2"> Panel 2 content </collapsable-panel> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;collapsable-panel label="Panel 1" :is-open="true"&gt;\n Panel 1 content\n&lt;/collapsable-panel&gt;\n&lt;collapsable-panel label="Panel 2"&gt;\n Panel 2 content\n&lt;/collapsable-panel&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Getting Started</h2> <hr class=hy_u-space-mb-2> <div class="hy_o-layout hy_o-layout--flushed"> <h3 class="hy_c-headline hy_c-headline--h4 hy_t-grey hy_u-space-mb-1">Installation</h3> <h4 class="hy_c-headline hy_c-headline--h5 hy_t-grey hy_u-space-mb-1">NPM</h4> <pre>\n       <code class=language-bash>\nnpm install hybrid-thorium\n       </code>\n     </pre> <h4 class="hy_c-headline hy_c-headline--h5 hy_t-grey hy_u-space-mb-1">Usage</h4> <p class="hy_c-copy hy_c-copy--body hy_t-grey"> Use as a plugin (registers all components globally): </p> <pre>\n       <code class=language-javascript>\nimport Vue from \'vue\';\nimport HybridThorium from \'hybrid-thorium\';\n\nVue.use(HybridThorium);\n\nnew Vue({\n  el: \'#app\'\n});\n       </code>\n     </pre> <p class="hy_c-copy hy_c-copy--body hy_t-grey"> Use individual components: </p> <pre>\n       <code class=language-javascript>\nimport Vue from \'vue\';\nimport { Alert, StepTracker } from \'hybrid-thorium\';\n\nnew Vue({\n  el: \'#app\',\n  components: {\n    Alert,\n    StepTracker\n  }\n});\n       </code>\n     </pre> <h4 class="hy_c-headline hy_c-headline--h5 hy_t-grey hy_u-space-mb-1">CDN (script tag)</h4> <p class="hy_c-copy hy_c-copy--body hy_t-grey"> The hybrid-thorium.js file in the CDN contains all the components exposed on a global window.HybridThorium object. </p> <p class="hy_c-copy hy_c-copy--body hy_t-grey"> First, include the JS and CSS files in your page: </p> <pre>\n      <code class=language-html>\n&lt;html&gt;\n&lt;head&gt;\n  &lt;link rel="stylesheet" href="https://cdn.telus.digital/ui/hydra/0.6.4/base.css" charset="utf-8"&gt;\n  &lt;link rel="stylesheet" href="path/to/cdn/hybrid-thorium.css"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n  &lt;!-- Example usage of alert --&gt;\n  &lt;alert type="error"&gt;This is an error alert.&lt;/alert&gt;\n  &lt;script src="path/to/vue.js"&gt;&lt;/script&gt;\n  &lt;script src="path/to/cdn/hybrid-thorium.js"&gt;&lt;/script&gt;\n  &lt;script src="path/to/app.js"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n      </code>\n    </pre> <p class="hy_c-copy hy_c-copy--body hy_t-grey"> Then, register the components globally for use in your templates: </p> <pre>\n      <code class=language-javascript>\n//app.js\n\nVue.use(HybridThorium);\n\nnew Vue({\n el: \'#app\'\n});\n      </code>\n    </pre> </div> </div></section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Tab</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <hy-header></hy-header> </div> <collapsable-panel label=HTML> <pre>\n           <code class=language-html>\n           </code>\n         </pre> </collapsable-panel> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Legal + Overlay</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <p class="hy_c-copy hy_c-copy--body hy_t-grey"> Lorem<legal-counter v-overlay-opener=legal-overlay legal-key=combo-offers legal-lang=en legal-region=bc></legal-counter> ipsum<legal-counter v-overlay-opener=legal-overlay legal-key=hs-referral-terms legal-lang=en legal-region=bc></legal-counter> dolor sit amet, consectetur <legal-counter apps-requirement v-overlay-opener=legal-overlay legal-key=apps-requirement legal-lang=en legal-region=bc></legal-counter>adipiscing elit, sed do eiusmod tempor <legal-counter v-overlay-opener=legal-overlay legal-key=1-year-offer-stim legal-lang=en legal-region=bc></legal-counter>incididunt ut labore et dolore magna aliqua. <legal-counter v-overlay-opener=legal-overlay legal-key=combo-offers legal-lang=en legal-region=bc></legal-counter> </p> <overlay-container> <overlay overlay-key=legal-overlay> <h4 class="hy_c-headline hy_c-headline--h4" slot=overlay-header>Term and conditions</h4> <article slot=overlay-body> <legal-container></legal-container> </article> </overlay> </overlay-container> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;p&gt;\n Lorem&lt;legal-counter\n   v-overlay-opener="legal-overlay"\n   legal-key="combo-offers"\n   legal-lang="en" legal-region="bc"\n   &gt;&lt;/legal-counter&gt;\n  ipsum&lt;legal-counter\n   v-overlay-opener="legal-overlay"\n   legal-key="hs-referral-terms"\n   legal-lang="en" legal-region="bc"\n   &gt;&lt;/legal-counter&gt; dolor sit amet, consectetur\n   &lt;legal-counter apps-requirement\n     v-overlay-opener="legal-overlay"\n     legal-key="apps-requirement"\n     legal-lang="en" legal-region="bc"\n     &gt;&lt;/legal-counter&gt;adipiscing elit,\n sed do eiusmod tempor &lt;legal-counter\n   v-overlay-opener="legal-overlay"\n   legal-key="1-year-offer-stim"\n   legal-lang="en" legal-region="bc"\n   &gt;&lt;/legal-counter&gt;incididunt ut labore et dolore magna aliqua.\n &lt;legal-counter\n   v-overlay-opener="legal-overlay"\n   legal-key="combo-offers"\n   legal-lang="en" legal-region="bc"\n   &gt;&lt;/legal-counter&gt;\n &lt;/p&gt;\n \n &lt;overlay-container&gt;\n  &lt;overlay overlay-key="legal-overlay"&gt;\n    &lt;h4 class="hy_c-headline hy_c-headline--h4" slot="overlay-header"&gt;Term and conditions&lt;/h4&gt;\n    &lt;article slot="overlay-body"&gt;\n      &lt;legal-container&gt;&lt;/legal-container&gt;\n    &lt;/article&gt;\n  &lt;/overlay&gt;\n&lt;/overlay-container&gt;\n             </code>\n           </pre> </collapsable-panel> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Legal System</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <p class="hy_c-copy hy_c-copy--body hy_t-grey"> Lorem ipsum<legal-counter legal-key=hs-referral-terms legal-lang=en legal-region=bc></legal-counter> dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. <legal-counter legal-key=1-year-offer-stim legal-lang=en legal-region=bc></legal-counter> </p> </div> <div class=sg_c-demo__container> <legal-container></legal-container> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;legal-counter\n  legal-key="hs-referral-terms"\n  legal-lang="en"\n  legal-region="bc"\n&lt;/legal-counter&gt;\n&lt;legal-container&gt;&lt;/legal-container&gt;\n             </code>\n           </pre> </collapsable-panel> <collapsable-panel label=javascript> <pre>\n             <code class=language-javascript>\nlet vm = new Vue({\n el: \'body\',\n data() {\n   return {\n     ligerEndPoint: \'https://api.cms.telus.com/legals\',\n     ligerApplicationKey: \'b9738d67b89dfc782746d4a9cf4a1093\'\n   };\n },\n components: {\n   LegalCounter,\n   LegalContainer\n }\n});\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API: Legal Counter</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Overlay System</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <p> <button v-overlay-opener=overlay-1 class="hy_c-button hy_c-button--link hy_t-purple" type=button role=button> Open overlay #1 <i class="hy_c-icon hy_c-icon--arrow-right-circled hy_c-button__icon"></i> </button> </p> <p> <button v-overlay-opener=overlay-2 class="hy_c-button hy_c-button--link hy_t-purple" type=button role=button> Open overlay #2 <i class="hy_c-icon hy_c-icon--arrow-right-circled hy_c-button__icon"></i> </button> </p> <overlay-container> <overlay overlay-key=overlay-1> <h4 class="hy_c-headline hy_c-headline--h4" slot=overlay-header>This is overlay #1</h4> <article slot=overlay-body> Overlay #1 body </article> </overlay> <overlay overlay-key=overlay-2> <h4 class="hy_c-headline hy_c-headline--h4" slot=overlay-header>This is overlay #2</h4> <article slot=overlay-body> Overlay #2 body </article> </overlay> </overlay-container> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;overlay-container&gt;\n &lt;overlay overlay-key="overlay-1"&gt;\n   &lt;h4  class="hy_c-headline hy_c-headline--h4" slot="overlay-header"&gt;\n   This is overlay #1\n   &lt;/h4&gt;\n   &lt;article slot="overlay-body"&gt;\n     Overlay #1 body\n   &lt;/article&gt;\n &lt;/overlay&gt;\n &lt;overlay overlay-key="overlay-2"&gt;\n   &lt;h4  class="hy_c-headline hy_c-headline--h4" slot="overlay-header"&gt;\n   This is overlay #1\n   &lt;/h4&gt;\n   &lt;article slot="overlay-body"&gt;\n     Overlay #2 body\n   &lt;/article&gt;\n &lt;/overlay&gt;\n&lt;/overlay-container&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Spinner</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <label class="hy_c-control hy_c-control--checkbox"> <span class=hy_c-control__label-text>Full Screen</span> <input type=checkbox v-model=isFullScreen /> <div class=hy_c-control__indicator></div> </label> <button @click=showSpinner class="hy_c-button hy_c-button--raised hy_t-green" type=button> Show Spinner </button> <spinner :full-screen=isFullScreen :text=msg></spinner> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;spinner text="I will close in 3 seconds" :full-screen="true"&gt;&lt;/spinner&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=" <section class=\"hy_c-module hy_t-grey\"> <div class=hy_o-wrapper> <h2 class=\"hy_c-headline hy_c-headline--h4 hy_t-grey\">Step Tracker</h2> <hr class=hy_u-space-mb-2> <div class=\"sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed\"> <div class=sg_c-demo__container> <step-tracker :current-step=stepTrackerCurrentStep :config=stepTrackerConfig></step-tracker> </div> <collapsable-panel label=HTML> <pre>\n         <code class=language-html>\n&lt;step-tracker\n:current-step=\"stepTrackerCurrentStep\"\n:config=\"stepTrackerConfig\"&gt;\n&lt;/step-tracker&gt;\n         </code>\n       </pre> </collapsable-panel> <collapsable-panel label=javascript> <pre>\n             <code class=language-js>\nlet stepTrackerCurrentStep = 2;\nlet stepTrackerConfig = {\n  isClickable: true,\n  steps: [\n    {\n      title: 'Step A',\n      link: '',\n      onClickHandler: (event) => {\n        this.stepTrackerCurrentStep = 0;\n      }\n    }, {\n      title: 'Step B',\n      link: '',\n      onClickHandler: (event) => {\n        this.stepTrackerCurrentStep = 1;\n      }\n    }, {\n      title: 'Step C',\n      link: '',\n      onClickHandler: (event) => {\n        this.stepTrackerCurrentStep = 2;\n      }\n    }\n  ]\n};\nlet vm = new Vue({\n  el: 'body',\n  data: {\n    stepTrackerConfig,\n    stepTrackerCurrentStep\n},\n  components: {\n    StepTracker\n  }\n});\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class=\"hy_c-headline hy_c-headline--h5 hy_t-grey\">API</h3> <div class=\"hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed\"> <api-table :items=apiItems></api-table> </div> </div> </section> "},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Tab</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <tabs class="c-price-lookup hy_o-layout__item hy_u-size-3of3@sm hy_u-size-4of4@md hy_u-size-6of12@lg"> <tab label="Tab 1"> <p> Tab 1 content </p> </tab> <tab label="Tab 2"> <p> Tab 2 content </p> </tab> <tab label="Tab 3" :is-disabled=true> <p> Tab 3 content </p> </tab> </tabs> </div> <collapsable-panel label=HTML> <pre>\n             <code class=language-html>\n&lt;tabs&gt;\n &lt;tab label="Tab 1"&gt;\n   &lt;p&gt;\n     Tab 1 content\n   &lt;/p&gt;\n &lt;/tab&gt;\n &lt;tab label="Tab 2"&gt;\n   &lt;p&gt;\n     Tab 2 content\n   &lt;/p&gt;\n &lt;/tab&gt;\n &lt;tab label="Tab 3" :is-disabled="true"&gt;\n   &lt;p&gt;\n     Tab 3 content\n   &lt;/p&gt;\n &lt;/tab&gt;\n&lt;/tabs&gt;\n             </code>\n           </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports="<div v-if=isVisible transition=fade class=c-alert :class=\"'c-alert--' + type\" :class=\"{ 'c-alert--dismissible': dismissible }\" role=alert> <button v-if=dismissible @click=dismiss type=button class=c-alert__close-button aria-label=Close> <span aria-hidden=true>&times;</span> <span class=hy_u-invisible>Close</span> </button> <slot></slot> </div> "},function(e,t){e.exports='<div class=c-collapsable-panel> <h3 @click.prevent=toggleOpen :class="{\n      \'c-collapsable-panel__header--open\': isOpen\n    }" class="c-collapsable-panel__header hy_c-headline hy_c-headline--h5 hy_t-grey" v-html=label> </h3> <div class=c-collapsable-panel__body :class="{\n    \'c-collapsable-panel__body--open\': isOpen\n  }"> <slot></slot> </div> </div> '},function(e,t){e.exports=""},function(e,t){e.exports='<div class=c-legal-container> <ol class=c-legal-container__ordered-list> <li v-set-focus=legal.isSelected class=c-legal-container__list-item :class="{\n      \'c-legal-container__list-item--active\': legal.isSelected\n    }" v-for="legal in indexedLegals" v-html=legal.content> </li> </ol> <ul class=c-legal-container__unordered-list> <li class=c-legal-container__list-item v-for="legal in nonIndexedLegals" v-html=legal.content> </li> </ul> </div> '},function(e,t){e.exports="<sup class=c-legal-sup> <a href=# @click.prevent=clickHandler> {{legalCounter}} </a> </sup> "},function(e,t){e.exports='<div class=c-overlay-container> <div class=c-overlay-container__curtain :class="{\n        \'c-overlay-container__curtain--active\': isVisible\n    }" @click.prevent="isVisible=false"> </div> <div class=c-overlay-container__overlays :class="{\n        \'c-overlay-container__overlays--active\': isVisible\n    }"> <slot></slot> </div> </div> '},function(e,t){e.exports="<article class=c-overlay v-show=isVisible> <div class=c-overlay__body> <slot name=overlay-body></slot> </div> <header class=c-overlay__header> <slot name=overlay-header></slot> <button type=button class=c-overlay__close-button aria-label=Close tabindex=0 @click.prevent=closeOverlay></button> </header> </article> "},function(e,t){e.exports='<div v-show=active class=c-spinner :class="{ \'c-spinner--fullscreen\': fullScreen }"> <svg viewBox="0 0 100 100" width=0 height=0> <circle stroke-width=4 fill=none stroke-linecap=round stroke-dashoffset=0 cx=50 cy=50 r=20></circle> </svg> <p class="c-spinner__text hy_c-copy hy_u-font-weight--medium" v-if=!!text>{{text}}</p> </div> '},function(e,t){e.exports='<ul class=c-step-tracker> <li class=c-step-tracker__step :class="{\n      \'c-step-tracker__step--complete\': currentStep > $index,\n      \'c-step-tracker__step--active\': currentStep === $index,\n      \'c-step-tracker__setp--clickable\': (currentStep > $index && config.isClickable)\n  }" v-for="step in config.steps"> <a :href="step.link || false" @click="clickHandler($event, step, $index)" v-if=config.isClickable> <span class=c-step-tracker__icon></span> <span class=c-step-tracker__label>{{$index + 1}}. {{step.title}}</span> </a> <span v-else class=c-step-tracker__icon></span> <span v-else class=c-step-tracker__label>{{$index + 1}}. {{step.title}}</span> </li> </ul> '},function(e,t){e.exports="<div class=c-tabs__pane :class=\"{\n    'c-tabs__pane--active': isVisible\n  }\"> <slot></slot> </div> "},function(e,t){e.exports='<div class=c-tabs> <ul class=c-tabs__header> <li v-for="tab in tabs" class=c-tabs__header-item :class="{\n                \'c-tabs__header-item--active\': ($index === activeTabIndex),\n                \'c-tabs__header-item--disabled\': tab.isDisabled\n              }" :disabled=tab.disabled> <a href=# @click.prevent="handleTabListClick($index, tab)" v-html=tab.label></a> </li> </ul> <div class=c-tabs__body> <slot></slot> </div> </div> '},function(e,t,n){var i,o;n(214),i=n(45),o=n(166),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(215),i=n(46),o=n(167),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(47),o=n(168),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(48),o=n(169),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(216),i=n(49),o=n(170),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(50),o=n(171),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;o=n(172),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(51),o=n(173),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(52),o=n(174),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(53),o=n(175),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(54),o=n(176),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(55),o=n(177),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(217),i=n(56),o=n(178),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(218),i=n(57),o=n(179),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(219),i=n(58),o=n(180),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(220),i=n(59),o=n(181),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(221),i=n(60),o=n(182),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(222),i=n(61),o=n(183),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(223),i=n(62),o=n(184),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(224),i=n(63),o=n(185),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(225),i=n(64),o=n(186),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o);
},function(e,t,n){var i,o;i=n(65),o=n(187),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(226),i=n(66),o=n(188),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){/*!
	 * vue-router v0.7.13
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t,n){this.path=e,this.matcher=t,this.delegate=n}function t(e){this.routes={},this.children={},this.target=e}function n(t,i,o){return function(r,s){var a=t+r;return s?void s(n(a,i,o)):new e(t+r,i,o)}}function i(e,t,n){for(var i=0,o=0,r=e.length;o<r;o++)i+=e[o].path.length;t=t.substr(i);var s={path:t,handler:n};e.push(s)}function o(e,t,n,r){var s=t.routes;for(var a in s)if(s.hasOwnProperty(a)){var c=e.slice();i(c,a,s[a]),t.children[a]?o(c,t.children[a],n,r):n.call(r,c)}}function r(e,i){var r=new t;e(n("",r,this.delegate)),o([],r,function(e){i?i(this,e):this.add(e)},this)}function s(e){W||"undefined"==typeof console||console.error("[vue-router] "+e)}function a(e,t){try{return t?decodeURIComponent(e):decodeURI(e)}catch(n){s("malformed URI"+(t?" component: ":": ")+e)}}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e){this.string=e}function h(e){this.name=e}function u(e){this.name=e}function f(){}function p(e,t,n){"/"===e.charAt(0)&&(e=e.substr(1));var i=e.split("/"),o=[];n.val="";for(var r=0,s=i.length;r<s;r++){var a,c=i[r];(a=c.match(/^:([^\/]+)$/))?(o.push(new h(a[1])),t.push(a[1]),n.val+="3"):(a=c.match(/^\*([^\/]+)$/))?(o.push(new u(a[1])),n.val+="2",t.push(a[1])):""===c?(o.push(new f),n.val+="1"):(o.push(new l(c)),n.val+="4")}return n.val=+n.val,o}function d(e){this.charSpec=e,this.nextStates=[]}function v(e){return e.sort(function(e,t){return t.specificity.val-e.specificity.val})}function y(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];n=n.concat(r.match(t))}return n}function _(e){this.queryParams=e||{}}function g(e,t,n){for(var i=e.handlers,o=e.regex,r=t.match(o),s=1,a=new _(n),c=0,l=i.length;c<l;c++){for(var h=i[c],u=h.names,f={},p=0,d=u.length;p<d;p++)f[u[p]]=r[s++];a.push({handler:h.handler,params:f,isDynamic:!!u.length})}return a}function b(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function m(e){return e=e.replace(/\+/gm,"%20"),a(e,!0)}function E(e){"undefined"!=typeof console&&console.error("[vue-router] "+e)}function w(e,t,n){var i=e.match(/(\?.*)$/);if(i&&(i=i[1],e=e.slice(0,-i.length)),"?"===t.charAt(0))return e+t;var o=e.split("/");n&&o[o.length-1]||o.pop();for(var r=t.replace(/^\//,"").split("/"),s=0;s<r.length;s++){var a=r[s];"."!==a&&(".."===a?o.pop():o.push(a))}return""!==o[0]&&o.unshift(""),o.join("/")}function x(e){return e&&"function"==typeof e.then}function k(e,t){var n=e&&(e.$options||e.options);return n&&n.route&&n.route[t]}function C(e,t){G?G.$options.components._=e.component:G={resolve:Y.Vue.prototype._resolveComponent,$options:{components:{_:e.component}}},G.resolve("_",function(n){e.component=n,t(n)})}function $(e,t,n){return void 0===t&&(t={}),e=e.replace(/:([^\/]+)/g,function(n,i){var o=t[i];return o||E('param "'+i+'" not found when generating path for "'+e+'" with params '+JSON.stringify(t)),o||""}),n&&(e+=Q(n)),e}function N(e,t,n){var i=e.childVM;if(!i||!t)return!1;if(e.Component!==t.component)return!1;var o=k(i,"canReuse");return"boolean"==typeof o?o:!o||o.call(i,{to:n.to,from:n.from})}function O(e,t,n){var i=e.childVM,o=k(i,"canDeactivate");o?t.callHook(o,i,n,{expectBoolean:!0}):n()}function A(e,t,n){C(e,function(e){if(!t.aborted){var i=k(e,"canActivate");i?t.callHook(i,null,n,{expectBoolean:!0}):n()}})}function T(e,t,n){var i=e.childVM,o=k(i,"deactivate");o?t.callHooks(o,i,n):n()}function j(e,t,n,i,o){var r=t.activateQueue[n];if(!r)return V(e),e._bound&&e.setComponent(null),void(i&&i());var s=e.Component=r.component,a=k(s,"activate"),c=k(s,"data"),l=k(s,"waitForData");e.depth=n,e.activated=!1;var h=void 0,u=!(!c||l);if(o=o&&e.childVM&&e.childVM.constructor===s)h=e.childVM,h.$loadingRouteData=u;else if(V(e),e.unbuild(!0),h=e.build({_meta:{$loadingRouteData:u},created:function(){this._routerView=e}}),e.keepAlive){h.$loadingRouteData=u;var f=h._keepAliveRouterView;f&&(e.childView=f,h._keepAliveRouterView=null)}var p=function(){h.$destroy()},d=function(){if(o)return void(i&&i());var n=t.router;n._rendered||n._transitionOnLoad?e.transition(h):(e.setCurrent?e.setCurrent(h):e.childVM=h,h.$before(e.anchor,null,!1)),i&&i()},v=function(){e.childView&&j(e.childView,t,n+1,null,o||e.keepAlive),d()},y=function(){e.activated=!0,c&&l?S(h,t,c,v,p):(c&&S(h,t,c),v())};a?t.callHooks(a,h,y,{cleanup:p,postActivate:!0}):y()}function D(e,t){var n=e.childVM,i=k(n,"data");i&&S(n,t,i)}function S(e,t,n,i,o){e.$loadingRouteData=!0,t.callHooks(n,e,function(){e.$loadingRouteData=!1,e.$emit("route-data-loaded",e),i&&i()},{cleanup:o,postActivate:!0,processData:function(t){var n=[];if(P(t)&&Object.keys(t).forEach(function(i){var o=t[i];x(o)?n.push(o.then(function(t){e.$set(i,t)})):e.$set(i,o)}),n.length)return n[0].constructor.all(n)}})}function V(e){e.keepAlive&&e.childVM&&e.childView&&(e.childVM._keepAliveRouterView=e.childView),e.childView=null}function P(e){return"[object Object]"===Object.prototype.toString.call(e)}function R(e){return"[object Object]"===Object.prototype.toString.call(e)}function M(e){return e?Array.prototype.slice.call(e):[]}function F(e){var t=e.util,n=t.extend,i=t.isArray,o=t.defineReactive,r=e.prototype._init;e.prototype._init=function(e){e=e||{};var t=e._parent||e.parent||this,n=t.$router,i=t.$route;n&&(this.$router=n,n._children.push(this),this._defineMeta?this._defineMeta("$route",i):o(this,"$route",i)),r.call(this,e)};var s=e.prototype._destroy;e.prototype._destroy=function(){!this._isBeingDestroyed&&this.$router&&this.$router._children.$remove(this),s.apply(this,arguments)};var a=e.config.optionMergeStrategies,c=/^(data|activate|deactivate)$/;a&&(a.route=function(e,t){if(!t)return e;if(!e)return t;var o={};n(o,e);for(var r in t){var s=o[r],a=t[r];s&&c.test(r)?o[r]=(i(s)?s:[s]).concat(a):o[r]=a}return o})}function L(e){var t=e.util,n=e.directive("_component")||e.internalDirectives.component,i=t.extend({},n);t.extend(i,{_isRouterView:!0,bind:function(){var e=this.vm.$route;if(!e)return void E("<router-view> can only be used inside a router-enabled app.");this._isDynamicLiteral=!0,n.bind.call(this);for(var t=void 0,i=this.vm;i;){if(i._routerView){t=i._routerView;break}i=i.$parent}if(t)this.parentView=t,t.childView=this;else{var o=e.router;o._rootView=this}var r=e.router._currentTransition;if(!t&&r.done||t&&t.activated){var s=t?t.depth+1:0;j(this,r,s)}},unbind:function(){this.parentView&&(this.parentView.childView=null),n.unbind.call(this)}}),e.elementDirective("router-view",i)}function I(e){function t(e){return e.protocol===location.protocol&&e.hostname===location.hostname&&e.port===location.port}function n(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}var i=e.util,o=i.bind,r=i.isObject,s=i.addClass,a=i.removeClass,c=e.directive("on").priority,l="__vue-router-link-update__",h=0;e.directive("link-active",{priority:9999,bind:function(){for(var e=this,t=String(h++),n=this.el.querySelectorAll("[v-link]"),i=0,o=n.length;i<o;i++){var r=n[i],s=r.getAttribute(l),a=s?s+","+t:t;r.setAttribute(l,a)}this.vm.$on(l,this.cb=function(n,i){n.activeIds.indexOf(t)>-1&&n.updateClasses(i,e.el)})},unbind:function(){this.vm.$off(l,this.cb)}}),e.directive("link",{priority:c-2,bind:function(){var e=this.vm;if(!e.$route)return void E("v-link can only be used inside a router-enabled app.");this.router=e.$route.router,this.unwatch=e.$watch("$route",o(this.onRouteUpdate,this));var t=this.el.getAttribute(l);t&&(this.el.removeAttribute(l),this.activeIds=t.split(",")),"A"===this.el.tagName&&"_blank"===this.el.getAttribute("target")||(this.handler=o(this.onClick,this),this.el.addEventListener("click",this.handler))},update:function(e){this.target=e,r(e)&&(this.append=e.append,this.exact=e.exact,this.prevActiveClass=this.activeClass,this.activeClass=e.activeClass),this.onRouteUpdate(this.vm.$route)},onClick:function(e){if(!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||0!==e.button)){var n=this.target;if(n)e.preventDefault(),this.router.go(n);else{for(var i=e.target;"A"!==i.tagName&&i!==this.el;)i=i.parentNode;if("A"===i.tagName&&t(i)){e.preventDefault();var o=i.pathname;this.router.history.root&&(o=o.replace(this.router.history.rootRE,"")),this.router.go({path:o,replace:n&&n.replace,append:n&&n.append})}}}},onRouteUpdate:function(e){var t=this.router.stringifyPath(this.target);this.path!==t&&(this.path=t,this.updateActiveMatch(),this.updateHref()),this.activeIds?this.vm.$emit(l,this,e.path):this.updateClasses(e.path,this.el)},updateActiveMatch:function(){this.activeRE=this.path&&!this.exact?new RegExp("^"+this.path.replace(/\/$/,"").replace(se,"").replace(re,"\\$&")+"(\\/|$)"):null},updateHref:function(){if("A"===this.el.tagName){var e=this.path,t=this.router,n="/"===e.charAt(0),i=e&&("hash"===t.mode||n)?t.history.formatPath(e,this.append):e;i?this.el.href=i:this.el.removeAttribute("href")}},updateClasses:function(e,t){var i=this.activeClass||this.router._linkActiveClass;this.prevActiveClass&&this.prevActiveClass!==i&&n(t,this.prevActiveClass,a);var o=this.path.replace(se,"");e=e.replace(se,""),this.exact?o===e||"/"!==o.charAt(o.length-1)&&o===e.replace(oe,"")?n(t,i,s):n(t,i,a):this.activeRE&&this.activeRE.test(e)?n(t,i,s):n(t,i,a)},unbind:function(){this.el.removeEventListener("click",this.handler),this.unwatch&&this.unwatch()}})}function H(e,t){var n=t.component;ce.util.isPlainObject(n)&&(n=t.component=ce.extend(n)),"function"!=typeof n&&(t.component=null,E('invalid component for route "'+e+'".'))}var z={};z.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.prototype={to:function(e,t){var n=this.delegate;if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},t.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,i,o,r){var s=new t(i);this.children[e]=s;var a=n(e,s,r);r&&r.contextEntered&&r.contextEntered(i,a),o(a)}};var B=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],U=new RegExp("(\\"+B.join("|\\")+")","g"),W=!1;l.prototype={eachChar:function(e){for(var t,n=this.string,i=0,o=n.length;i<o;i++)t=n.charAt(i),e({validChars:t})},regex:function(){return this.string.replace(U,"\\$1")},generate:function(){return this.string}},h.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){var t=e[this.name];return null==t?":"+this.name:t}},u.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){var t=e[this.name];return null==t?":"+this.name:t}},f.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},d.prototype={get:function(e){for(var t=this.nextStates,n=0,i=t.length;n<i;n++){var o=t[n],r=o.charSpec.validChars===e.validChars;if(r=r&&o.charSpec.invalidChars===e.invalidChars)return o}},put:function(e){var t;return(t=this.get(e))?t:(t=new d(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,n,i,o=this.nextStates,r=[],s=0,a=o.length;s<a;s++)t=o[s],n=t.charSpec,"undefined"!=typeof(i=n.validChars)?i.indexOf(e)!==-1&&r.push(t):"undefined"!=typeof(i=n.invalidChars)&&i.indexOf(e)===-1&&r.push(t);return r}};var q=Object.create||function(e){function t(){}return t.prototype=e,new t};_.prototype=q({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var J=function(){this.rootState=new d,this.names={}};J.prototype={add:function(e,t){for(var n,i=this.rootState,o="^",r={},s=[],a=[],c=!0,l=0,h=e.length;l<h;l++){var u=e[l],d=[],v=p(u.path,d,r);a=a.concat(v);for(var y=0,_=v.length;y<_;y++){var g=v[y];g instanceof f||(c=!1,i=i.put({validChars:"/"}),o+="/",i=b(i,g),o+=g.regex())}var m={handler:u.handler,names:d};s.push(m)}c&&(i=i.put({validChars:"/"}),o+="/"),i.handlers=s,i.regex=new RegExp(o+"$"),i.specificity=r,(n=t&&t.as)&&(this.names[n]={segments:a,handlers:s})},handlersFor:function(e){var t=this.names[e],n=[];if(!t)throw new Error("There is no route named "+e);for(var i=0,o=t.handlers.length;i<o;i++)n.push(t.handlers[i]);return n},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var n=this.names[e],i="";if(!n)throw new Error("There is no route named "+e);for(var o=n.segments,r=0,s=o.length;r<s;r++){var a=o[r];a instanceof f||(i+="/",i+=a.generate(t))}return"/"!==i.charAt(0)&&(i="/"+i),t&&t.queryParams&&(i+=this.generateQueryString(t.queryParams)),i},generateQueryString:function(e){var t=[],n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i);n.sort();for(var o=0,r=n.length;o<r;o++){i=n[o];var s=e[i];if(null!=s){var a=encodeURIComponent(i);if(c(s))for(var l=0,h=s.length;l<h;l++){var u=i+"[]="+encodeURIComponent(s[l]);t.push(u)}else a+="="+encodeURIComponent(s),t.push(a)}}return 0===t.length?"":"?"+t.join("&")},parseQueryString:function(e){for(var t=e.split("&"),n={},i=0;i<t.length;i++){var o,r=t[i].split("="),s=m(r[0]),a=s.length,c=!1;1===r.length?o="true":(a>2&&"[]"===s.slice(a-2)&&(c=!0,s=s.slice(0,a-2),n[s]||(n[s]=[])),o=r[1]?m(r[1]):""),c?n[s].push(o):n[s]=o}return n},recognize:function(e,t){W=t;var n,i,o,r,s=[this.rootState],c={},l=!1;if(r=e.indexOf("?"),r!==-1){var h=e.substr(r+1,e.length);e=e.substr(0,r),h&&(c=this.parseQueryString(h))}if(e=a(e)){for("/"!==e.charAt(0)&&(e="/"+e),n=e.length,n>1&&"/"===e.charAt(n-1)&&(e=e.substr(0,n-1),l=!0),i=0,o=e.length;i<o&&(s=y(s,e.charAt(i)),s.length);i++);var u=[];for(i=0,o=s.length;i<o;i++)s[i].handlers&&u.push(s[i]);s=v(u);var f=u[0];return f&&f.handlers?(l&&"(.+)$"===f.regex.source.slice(-5)&&(e+="/"),g(f,e,c)):void 0}}},J.prototype.map=r;var Q=J.prototype.generateQueryString,Y={},G=void 0,K=/#.*$/,Z=function(){function e(t){var n=t.root,i=t.onChange;z.classCallCheck(this,e),n&&"/"!==n?("/"!==n.charAt(0)&&(n="/"+n),this.root=n.replace(/\/$/,""),this.rootRE=new RegExp("^\\"+this.root)):this.root=null,this.onChange=i;var o=document.querySelector("base");this.base=o&&o.getAttribute("href")}return e.prototype.start=function(){var e=this;this.listener=function(t){var n=location.pathname+location.search;e.root&&(n=n.replace(e.rootRE,"")),e.onChange(n,t&&t.state,location.hash)},window.addEventListener("popstate",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("popstate",this.listener)},e.prototype.go=function(e,t,n){var i=this.formatPath(e,n);t?history.replaceState({},"",i):(history.replaceState({pos:{x:window.pageXOffset,y:window.pageYOffset}},"",location.href),history.pushState({},"",i));var o=e.match(K),r=o&&o[0];e=i.replace(K,"").replace(this.rootRE,""),this.onChange(e,null,r)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?this.root?this.root+"/"+e.replace(/^\//,""):e:w(this.base||location.pathname,e,t)},e}(),X=function(){function e(t){var n=t.hashbang,i=t.onChange;z.classCallCheck(this,e),this.hashbang=n,this.onChange=i}return e.prototype.start=function(){var e=this;this.listener=function(){var t=location.hash,n=t.replace(/^#!?/,"");"/"!==n.charAt(0)&&(n="/"+n);var i=e.formatPath(n);if(i!==t)return void location.replace(i);var o=location.search&&t.indexOf("?")>-1?"&"+location.search.slice(1):location.search;e.onChange(t.replace(/^#!?/,"")+o)},window.addEventListener("hashchange",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("hashchange",this.listener)},e.prototype.go=function(e,t,n){e=this.formatPath(e,n),t?location.replace(e):location.hash=e},e.prototype.formatPath=function(e,t){var n="/"===e.charAt(0),i="#"+(this.hashbang?"!":"");return n?i+e:i+w(location.hash.replace(/^#!?/,""),e,t)},e}(),ee=function(){function e(t){var n=t.onChange;z.classCallCheck(this,e),this.onChange=n,this.currentPath="/"}return e.prototype.start=function(){this.onChange("/")},e.prototype.stop=function(){},e.prototype.go=function(e,t,n){e=this.currentPath=this.formatPath(e,n),this.onChange(e)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?e:w(this.currentPath,e,t)},e}(),te=function(){function e(t,n,i){z.classCallCheck(this,e),this.router=t,this.to=n,this.from=i,this.next=null,this.aborted=!1,this.done=!1}return e.prototype.abort=function(){if(!this.aborted){this.aborted=!0;var e=!this.from.path&&"/"===this.to.path;e||this.router.replace(this.from.path||"/")}},e.prototype.redirect=function(e){this.aborted||(this.aborted=!0,"string"==typeof e?e=$(e,this.to.params,this.to.query):(e.params=e.params||this.to.params,e.query=e.query||this.to.query),this.router.replace(e))},e.prototype.start=function(e){for(var t=this,n=[],i=this.router._rootView;i;)n.unshift(i),i=i.childView;var o=n.slice().reverse(),r=this.activateQueue=M(this.to.matched).map(function(e){return e.handler}),s=void 0,a=void 0;for(s=0;s<o.length&&N(o[s],r[s],t);s++);s>0&&(a=o.slice(0,s),n=o.slice(s).reverse(),r=r.slice(s)),t.runQueue(n,O,function(){t.runQueue(r,A,function(){t.runQueue(n,T,function(){if(t.router._onTransitionValidated(t),a&&a.forEach(function(e){return D(e,t)}),n.length){var i=n[n.length-1],o=a?a.length:0;j(i,t,o,e)}else e()})})})},e.prototype.runQueue=function(e,t,n){function i(r){r>=e.length?n():t(e[r],o,function(){i(r+1)})}var o=this;i(0)},e.prototype.callHook=function(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=i.expectBoolean,r=void 0!==o&&o,s=i.postActivate,a=void 0!==s&&s,c=i.processData,l=i.cleanup,h=this,u=!1,f=function(){l&&l(),h.abort()},p=function(e){if(a?v():f(),e&&!h.router._suppress)throw E("Uncaught error during transition: "),e instanceof Error?e:new Error(e)},d=function(e){try{p(e)}catch(t){setTimeout(function(){throw t},0)}},v=function(){return u?void E("transition.next() should be called only once."):(u=!0,h.aborted?void(l&&l()):void(n&&n()))},y=function(t){"boolean"==typeof t?t?v():f():x(t)?t.then(function(e){e?v():f()},d):e.length||v()},_=function(e){var t=void 0;try{t=c(e)}catch(n){return p(n)}x(t)?t.then(v,d):v()},g={to:h.to,from:h.from,abort:f,next:c?_:v,redirect:function(){h.redirect.apply(h,arguments)}},b=void 0;try{b=e.call(t,g)}catch(m){return p(m)}r?y(b):x(b)?c?b.then(_,d):b.then(v,d):c&&R(b)?_(b):e.length||v()},e.prototype.callHooks=function(e,t,n,i){var o=this;Array.isArray(e)?this.runQueue(e,function(e,n,r){o.aborted||o.callHook(e,t,r,i)},n):this.callHook(e,t,n,i)},e}(),ne=/^(component|subRoutes|fullPath)$/,ie=function he(e,t){var n=this;z.classCallCheck(this,he);var i=t._recognizer.recognize(e);i&&([].forEach.call(i,function(e){for(var t in e.handler)ne.test(t)||(n[t]=e.handler[t])}),this.query=i.queryParams,this.params=[].reduce.call(i,function(e,t){if(t.params)for(var n in t.params)e[n]=t.params[n];return e},{})),this.path=e,this.matched=i||t._notFoundHandler,Object.defineProperty(this,"router",{enumerable:!1,value:t}),Object.freeze(this)},oe=/\/$/,re=/[-.*+?^${}()|[\]\/\\]/g,se=/\?.*$/,ae={"abstract":ee,hash:X,html5:Z},ce=void 0,le=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=n.hashbang,o=void 0===i||i,r=n["abstract"],s=void 0!==r&&r,a=n.history,c=void 0!==a&&a,l=n.saveScrollPosition,h=void 0!==l&&l,u=n.transitionOnLoad,f=void 0!==u&&u,p=n.suppressTransitionError,d=void 0!==p&&p,v=n.root,y=void 0===v?null:v,_=n.linkActiveClass,g=void 0===_?"v-link-active":_;if(z.classCallCheck(this,e),!e.installed)throw new Error("Please install the Router with Vue.use() before creating an instance.");this.app=null,this._children=[],this._recognizer=new J,this._guardRecognizer=new J,this._started=!1,this._startCb=null,this._currentRoute={},this._currentTransition=null,this._previousTransition=null,this._notFoundHandler=null,this._notFoundRedirect=null,this._beforeEachHooks=[],this._afterEachHooks=[],this._rendered=!1,this._transitionOnLoad=f,this._root=y,this._abstract=s,this._hashbang=o;var b="undefined"!=typeof window&&window.history&&window.history.pushState;this._history=c&&b,this._historyFallback=c&&!b;var m=ce.util.inBrowser;this.mode=!m||this._abstract?"abstract":this._history?"html5":"hash";var E=ae[this.mode];this.history=new E({root:y,hashbang:this._hashbang,onChange:function(e,n,i){t._match(e,n,i)}}),this._saveScrollPosition=h,this._linkActiveClass=g,this._suppress=d}return e.prototype.map=function(e){for(var t in e)this.on(t,e[t]);return this},e.prototype.on=function(e,t){return"*"===e?this._notFound(t):this._addRoute(e,t,[]),this},e.prototype.redirect=function(e){for(var t in e)this._addRedirect(t,e[t]);return this},e.prototype.alias=function(e){for(var t in e)this._addAlias(t,e[t]);return this},e.prototype.beforeEach=function(e){return this._beforeEachHooks.push(e),this},e.prototype.afterEach=function(e){return this._afterEachHooks.push(e),this},e.prototype.go=function(e){var t=!1,n=!1;ce.util.isObject(e)&&(t=e.replace,n=e.append),e=this.stringifyPath(e),e&&this.history.go(e,t,n)},e.prototype.replace=function(e){"string"==typeof e&&(e={path:e}),e.replace=!0,this.go(e)},e.prototype.start=function(e,t,n){if(this._started)return void E("already started.");if(this._started=!0,this._startCb=n,!this.app){if(!e||!t)throw new Error("Must start vue-router with a component and a root container.");if(e instanceof ce)throw new Error("Must start vue-router with a component, not a Vue instance.");this._appContainer=t;var i=this._appConstructor="function"==typeof e?e:ce.extend(e);i.options.name=i.options.name||"RouterApp"}if(this._historyFallback){var o=window.location,r=new Z({root:this._root}),s=r.root?o.pathname.replace(r.rootRE,""):o.pathname;if(s&&"/"!==s)return void o.assign((r.root||"")+"/"+this.history.formatPath(s)+o.search)}this.history.start()},e.prototype.stop=function(){this.history.stop(),this._started=!1},e.prototype.stringifyPath=function(e){var t="";if(e&&"object"==typeof e){if(e.name){var n=ce.util.extend,i=this._currentTransition&&this._currentTransition.to.params,o=e.params||{},r=i?n(n({},i),o):o;t=encodeURI(this._recognizer.generate(e.name,r))}else e.path&&(t=encodeURI(e.path));if(e.query){var s=this._recognizer.generateQueryString(e.query);t+=t.indexOf("?")>-1?"&"+s.slice(1):s}}else t=encodeURI(e?e+"":"");return t},e.prototype._addRoute=function(e,t,n){if(H(e,t),t.path=e,t.fullPath=(n.reduce(function(e,t){return e+t.path},"")+e).replace("//","/"),n.push({path:e,handler:t}),this._recognizer.add(n,{as:t.name}),t.subRoutes)for(var i in t.subRoutes)this._addRoute(i,t.subRoutes[i],n.slice())},e.prototype._notFound=function(e){H("*",e),this._notFoundHandler=[{handler:e}]},e.prototype._addRedirect=function(e,t){"*"===e?this._notFoundRedirect=t:this._addGuard(e,t,this.replace)},e.prototype._addAlias=function(e,t){this._addGuard(e,t,this._match)},e.prototype._addGuard=function(e,t,n){var i=this;this._guardRecognizer.add([{path:e,handler:function(e,o){var r=$(t,e.params,o);n.call(i,r)}}])},e.prototype._checkGuard=function(e){var t=this._guardRecognizer.recognize(e,!0);return t?(t[0].handler(t[0],t.queryParams),!0):this._notFoundRedirect&&(t=this._recognizer.recognize(e),!t)?(this.replace(this._notFoundRedirect),!0):void 0},e.prototype._match=function(e,t,n){var i=this;if(!this._checkGuard(e)){var o=this._currentRoute,r=this._currentTransition;if(r){if(r.to.path===e)return;if(o.path===e)return r.aborted=!0,void(this._currentTransition=this._prevTransition);r.aborted=!0}var s=new ie(e,this),a=new te(this,s,o);this._prevTransition=r,this._currentTransition=a,this.app||!function(){var e=i;i.app=new i._appConstructor({el:i._appContainer,created:function(){this.$router=e},_meta:{$route:s}})}();var c=this._beforeEachHooks,l=function(){a.start(function(){i._postTransition(s,t,n)})};c.length?a.runQueue(c,function(e,t,n){a===i._currentTransition&&a.callHook(e,null,n,{expectBoolean:!0})},l):l(),!this._rendered&&this._startCb&&this._startCb.call(null),this._rendered=!0}},e.prototype._onTransitionValidated=function(e){var t=this._currentRoute=e.to;this.app.$route!==t&&(this.app.$route=t,this._children.forEach(function(e){e.$route=t})),this._afterEachHooks.length&&this._afterEachHooks.forEach(function(t){return t.call(null,{to:e.to,from:e.from})}),this._currentTransition.done=!0},e.prototype._postTransition=function(e,t,n){var i=t&&t.pos;i&&this._saveScrollPosition?ce.nextTick(function(){window.scrollTo(i.x,i.y)}):n&&ce.nextTick(function(){var e=document.getElementById(n.slice(1));e&&window.scrollTo(window.scrollX,e.offsetTop)})},e}();return le.installed=!1,le.install=function(e){return le.installed?void E("already installed."):(ce=e,F(ce),L(ce),I(ce),Y.Vue=ce,void(le.installed=!0))},"undefined"!=typeof window&&window.Vue&&window.Vue.use(le),le})},function(e,t,n){var i=n(72);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(73);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(74);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(75);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(76);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(77);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(78);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(79);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(80);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(81);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(82);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(83);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(84);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(85);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){(function(t,n){/*!
	 * Vue.js v1.0.26
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
"use strict";function i(e,t,n){if(r(e,t))return void(e[t]=n);if(e._isVue)return void i(e._data,t,n);var o=e.__ob__;if(!o)return void(e[t]=n);if(o.convert(t,n),o.dep.notify(),o.vms)for(var s=o.vms.length;s--;){var a=o.vms[s];a._proxy(t),a._digest()}return n}function o(e,t){if(r(e,t)){delete e[t];var n=e.__ob__;if(!n)return void(e._isVue&&(delete e._data[t],e._digest()));if(n.dep.notify(),n.vms)for(var i=n.vms.length;i--;){var o=n.vms[i];o._unproxy(t),o._digest()}}}function r(e,t){return Sn.call(e,t)}function s(e){return Vn.test(e)}function a(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function c(e){return null==e?"":e.toString()}function l(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t}function h(e){return"true"===e||"false"!==e&&e}function u(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}function f(e){return e.replace(Pn,p)}function p(e,t){return t?t.toUpperCase():""}function d(e){return e.replace(Rn,"$1-$2").toLowerCase()}function v(e){return e.replace(Mn,p)}function y(e,t){return function(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}}function _(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function g(e,t){for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function b(e){return null!==e&&"object"==typeof e}function m(e){return Fn.call(e)===Ln}function E(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function w(e,t){var n,i,o,r,s,a=function c(){var a=Date.now()-r;a<t&&a>=0?n=setTimeout(c,t-a):(n=null,s=e.apply(o,i),n||(o=i=null))};return function(){return o=this,i=arguments,r=Date.now(),n||(n=setTimeout(a,t)),s}}function x(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function k(e){var t=function n(){if(!n.cancelled)return e.apply(this,arguments)};return t.cancel=function(){t.cancelled=!0},t}function C(e,t){return e==t||!(!b(e)||!b(t))&&JSON.stringify(e)===JSON.stringify(t)}function $(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function N(){var e,t=ai.slice(pi,ui).trim();if(t){e={};var n=t.match(mi);e.name=n[0],n.length>1&&(e.args=n.slice(1).map(O))}e&&(ci.filters=ci.filters||[]).push(e),pi=ui+1}function O(e){if(Ei.test(e))return{value:l(e),dynamic:!1};var t=u(e),n=t===e;return{value:n?e:t,dynamic:n}}function A(e){var t=bi.get(e);if(t)return t;for(ai=e,di=vi=!1,yi=_i=gi=0,pi=0,ci={},ui=0,fi=ai.length;ui<fi;ui++)if(hi=li,li=ai.charCodeAt(ui),di)39===li&&92!==hi&&(di=!di);else if(vi)34===li&&92!==hi&&(vi=!vi);else if(124===li&&124!==ai.charCodeAt(ui+1)&&124!==ai.charCodeAt(ui-1))null==ci.expression?(pi=ui+1,ci.expression=ai.slice(0,ui).trim()):N();else switch(li){case 34:vi=!0;break;case 39:di=!0;break;case 40:gi++;break;case 41:gi--;break;case 91:_i++;break;case 93:_i--;break;case 123:yi++;break;case 125:yi--}return null==ci.expression?ci.expression=ai.slice(0,ui).trim():0!==pi&&N(),bi.put(e,ci),ci}function T(e){return e.replace(xi,"\\$&")}function j(){var e=T(ji.delimiters[0]),t=T(ji.delimiters[1]),n=T(ji.unsafeDelimiters[0]),i=T(ji.unsafeDelimiters[1]);Ci=new RegExp(n+"((?:.|\\n)+?)"+i+"|"+e+"((?:.|\\n)+?)"+t,"g"),$i=new RegExp("^"+n+"((?:.|\\n)+?)"+i+"$"),ki=new $(1e3)}function D(e){ki||j();var t=ki.get(e);if(t)return t;if(!Ci.test(e))return null;for(var n,i,o,r,s,a,c=[],l=Ci.lastIndex=0;n=Ci.exec(e);)i=n.index,i>l&&c.push({value:e.slice(l,i)}),o=$i.test(n[0]),r=o?n[1]:n[2],s=r.charCodeAt(0),a=42===s,r=a?r.slice(1):r,c.push({tag:!0,value:r.trim(),html:o,oneTime:a}),l=i+n[0].length;return l<e.length&&c.push({value:e.slice(l)}),ki.put(e,c),c}function S(e,t){return e.length>1?e.map(function(e){return V(e,t)}).join("+"):V(e[0],t,!0)}function V(e,t,n){return e.tag?e.oneTime&&t?'"'+t.$eval(e.value)+'"':P(e.value,n):'"'+e.value+'"'}function P(e,t){if(Ni.test(e)){var n=A(e);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+e+")"}return t?e:"("+e+")"}function R(e,t,n,i){L(e,1,function(){t.appendChild(e)},n,i)}function M(e,t,n,i){L(e,1,function(){W(e,t)},n,i)}function F(e,t,n){L(e,-1,function(){J(e)},t,n)}function L(e,t,n,i,o){var r=e.__v_trans;if(!r||!r.hooks&&!Xn||!i._isCompiled||i.$parent&&!i.$parent._isCompiled)return n(),void(o&&o());var s=t>0?"enter":"leave";r[s](n,o)}function I(e){if("string"==typeof e){var t=e;e=document.querySelector(e),e||"production"!==n.env.NODE_ENV&&Di("Cannot find element: "+t)}return e}function H(e){if(!e)return!1;var t=e.ownerDocument.documentElement,n=e.parentNode;return t===e||t===n||!(!n||1!==n.nodeType||!t.contains(n))}function z(e,t){var n=e.getAttribute(t);return null!==n&&e.removeAttribute(t),n}function B(e,t){var n=z(e,":"+t);return null===n&&(n=z(e,"v-bind:"+t)),n}function U(e,t){return e.hasAttribute(t)||e.hasAttribute(":"+t)||e.hasAttribute("v-bind:"+t)}function W(e,t){t.parentNode.insertBefore(e,t)}function q(e,t){t.nextSibling?W(e,t.nextSibling):t.parentNode.appendChild(e)}function J(e){e.parentNode.removeChild(e)}function Q(e,t){t.firstChild?W(e,t.firstChild):t.appendChild(e)}function Y(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function G(e,t,n,i){e.addEventListener(t,n,i)}function K(e,t,n){e.removeEventListener(t,n)}function Z(e){var t=e.className;return"object"==typeof t&&(t=t.baseVal||""),t}function X(e,t){qn&&!/svg$/.test(e.namespaceURI)?e.className=t:e.setAttribute("class",t)}function ee(e,t){if(e.classList)e.classList.add(t);else{var n=" "+Z(e)+" ";n.indexOf(" "+t+" ")<0&&X(e,(n+t).trim())}}function te(e,t){if(e.classList)e.classList.remove(t);else{for(var n=" "+Z(e)+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");X(e,n.trim())}e.className||e.removeAttribute("class")}function ne(e,t){var n,i;if(re(e)&&he(e.content)&&(e=e.content),e.hasChildNodes())for(ie(e),i=t?document.createDocumentFragment():document.createElement("div");n=e.firstChild;)i.appendChild(n);return i}function ie(e){for(var t;t=e.firstChild,oe(t);)e.removeChild(t);for(;t=e.lastChild,oe(t);)e.removeChild(t)}function oe(e){return e&&(3===e.nodeType&&!e.data.trim()||8===e.nodeType)}function re(e){return e.tagName&&"template"===e.tagName.toLowerCase()}function se(e,t){var n=ji.debug?document.createComment(e):document.createTextNode(t?" ":"");return n.__v_anchor=!0,n}function ae(e){if(e.hasAttributes())for(var t=e.attributes,n=0,i=t.length;n<i;n++){var o=t[n].name;if(Pi.test(o))return f(o.replace(Pi,""))}}function ce(e,t,n){for(var i;e!==t;)i=e.nextSibling,n(e),e=i;n(t)}function le(e,t,n,i,o){function r(){if(a++,s&&a>=c.length){for(var e=0;e<c.length;e++)i.appendChild(c[e]);o&&o()}}var s=!1,a=0,c=[];ce(e,t,function(e){e===t&&(s=!0),c.push(e),F(e,n,r)})}function he(e){return e&&11===e.nodeType}function ue(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function fe(e,t){var i=e.tagName.toLowerCase(),o=e.hasAttributes();if(Ri.test(i)||Mi.test(i)){if(o)return pe(e,t)}else{if(me(t,"components",i))return{id:i};var r=o&&pe(e,t);if(r)return r;if("production"!==n.env.NODE_ENV){var s=t._componentNameMap&&t._componentNameMap[i];s?Di("Unknown custom element: <"+i+"> - did you mean <"+s+">? HTML is case-insensitive, remember to use kebab-case in templates."):Fi(e,i)&&Di("Unknown custom element: <"+i+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function pe(e,t){var n=e.getAttribute("is");if(null!=n){if(me(t,"components",n))return e.removeAttribute("is"),{id:n}}else if(n=B(e,"is"),null!=n)return{id:n,dynamic:!0}}function de(e,t){var n,o,s;for(n in t)o=e[n],s=t[n],r(e,n)?b(o)&&b(s)&&de(o,s):i(e,n,s);return e}function ve(e,t){var n=Object.create(e||null);return t?g(n,ge(t)):n}function ye(e){if(e.components){var t,i=e.components=ge(e.components),o=Object.keys(i);if("production"!==n.env.NODE_ENV)var r=e._componentNameMap={};for(var s=0,a=o.length;s<a;s++){var c=o[s];Ri.test(c)||Mi.test(c)?"production"!==n.env.NODE_ENV&&Di("Do not use built-in or reserved HTML elements as component id: "+c):("production"!==n.env.NODE_ENV&&(r[c.replace(/-/g,"").toLowerCase()]=d(c)),t=i[c],m(t)&&(i[c]=Nn.extend(t)))}}}function _e(e){var t,n,i=e.props;if(In(i))for(e.props={},t=i.length;t--;)n=i[t],"string"==typeof n?e.props[n]=null:n.name&&(e.props[n.name]=n);else if(m(i)){var o=Object.keys(i);for(t=o.length;t--;)n=i[o[t]],"function"==typeof n&&(i[o[t]]={type:n})}}function ge(e){if(In(e)){for(var t,i={},o=e.length;o--;){t=e[o];var r="function"==typeof t?t.options&&t.options.name||t.id:t.name||t.id;r?i[r]=t:"production"!==n.env.NODE_ENV&&Di('Array-syntax assets must provide a "name" or "id" field.')}return i}return e}function be(e,t,i){function o(n){var o=Li[n]||Ii;a[n]=o(e[n],t[n],i,n)}ye(t),_e(t),"production"!==n.env.NODE_ENV&&t.propsData&&!i&&Di("propsData can only be used as an instantiation option.");var s,a={};if(t["extends"]&&(e="function"==typeof t["extends"]?be(e,t["extends"].options,i):be(e,t["extends"],i)),t.mixins)for(var c=0,l=t.mixins.length;c<l;c++){var h=t.mixins[c],u=h.prototype instanceof Nn?h.options:h;e=be(e,u,i)}for(s in e)o(s);for(s in t)r(e,s)||o(s);return a}function me(e,t,i,o){if("string"==typeof i){var r,s=e[t],a=s[i]||s[r=f(i)]||s[r.charAt(0).toUpperCase()+r.slice(1)];return"production"!==n.env.NODE_ENV&&o&&!a&&Di("Failed to resolve "+t.slice(0,-1)+": "+i,e),a}}function Ee(){this.id=Hi++,this.subs=[]}function we(e){Wi=!1,e(),Wi=!0}function xe(e){if(this.value=e,this.dep=new Ee,E(e,"__ob__",this),In(e)){var t=Hn?ke:Ce;t(e,Bi,Ui),this.observeArray(e)}else this.walk(e)}function ke(e,t){e.__proto__=t}function Ce(e,t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];E(e,r,t[r])}}function $e(e,t){if(e&&"object"==typeof e){var n;return r(e,"__ob__")&&e.__ob__ instanceof xe?n=e.__ob__:Wi&&(In(e)||m(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new xe(e)),n&&t&&n.addVm(t),n}}function Ne(e,t,n){var i=new Ee,o=Object.getOwnPropertyDescriptor(e,t);if(!o||o.configurable!==!1){var r=o&&o.get,s=o&&o.set,a=$e(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=r?r.call(e):n;if(Ee.target&&(i.depend(),a&&a.dep.depend(),In(t)))for(var o,s=0,c=t.length;s<c;s++)o=t[s],o&&o.__ob__&&o.__ob__.dep.depend();return t},set:function(t){var o=r?r.call(e):n;t!==o&&(s?s.call(e,t):n=t,a=$e(t),i.notify())}})}}function Oe(e){e.prototype._init=function(e){e=e||{},this.$el=null,this.$parent=e.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=Ji++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=e._context||this.$parent,this._scope=e._scope,this._frag=e._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),e=this.$options=be(this.constructor.options,e,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),e.el&&this.$mount(e.el)}}function Ae(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&t<=122||t>=65&&t<=90?"ident":t>=49&&t<=57?"number":"else"}function Te(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(s(t)?u(t):"*"+t)}function je(e){function t(){var t=e[h+1];if(u===oo&&"'"===t||u===ro&&'"'===t)return h++,i="\\"+t,p[Yi](),!0}var n,i,o,r,s,a,c,l=[],h=-1,u=Xi,f=0,p=[];for(p[Gi]=function(){void 0!==o&&(l.push(o),o=void 0)},p[Yi]=function(){void 0===o?o=i:o+=i},p[Ki]=function(){p[Yi](),f++},p[Zi]=function(){if(f>0)f--,u=io,p[Yi]();else{if(f=0,o=Te(o),o===!1)return!1;p[Gi]()}};null!=u;)if(h++,n=e[h],"\\"!==n||!t()){if(r=Ae(n),c=co[u],s=c[r]||c["else"]||ao,s===ao)return;if(u=s[0],a=p[s[1]],a&&(i=s[2],i=void 0===i?n:i,a()===!1))return;if(u===so)return l.raw=e,l}}function De(e){var t=Qi.get(e);return t||(t=je(e),t&&Qi.put(e,t)),t}function Se(e,t){return ze(t).get(e)}function Ve(e,t,o){var r=e;if("string"==typeof t&&(t=je(t)),!t||!b(e))return!1;for(var s,a,c=0,l=t.length;c<l;c++)s=e,a=t[c],"*"===a.charAt(0)&&(a=ze(a.slice(1)).get.call(r,r)),c<l-1?(e=e[a],b(e)||(e={},"production"!==n.env.NODE_ENV&&s._isVue&&lo(t,s),i(s,a,e))):In(e)?e.$set(a,o):a in e?e[a]=o:("production"!==n.env.NODE_ENV&&e._isVue&&lo(t,e),i(e,a,o));return!0}function Pe(){}function Re(e,t){var n=ko.length;return ko[n]=t?e.replace(go,"\\n"):e,'"'+n+'"'}function Me(e){var t=e.charAt(0),n=e.slice(1);return po.test(n)?e:(n=n.indexOf('"')>-1?n.replace(mo,Fe):n,t+"scope."+n)}function Fe(e,t){return ko[t]}function Le(e){yo.test(e)&&"production"!==n.env.NODE_ENV&&Di("Avoid using reserved keywords in expression: "+e),ko.length=0;var t=e.replace(bo,Re).replace(_o,"");return t=(" "+t).replace(wo,Me).replace(mo,Fe),Ie(t)}function Ie(e){try{return new Function("scope","return "+e+";")}catch(t){return"production"!==n.env.NODE_ENV&&Di(t.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+e),Pe}}function He(e){var t=De(e);return t?function(e,n){Ve(e,t,n)}:void("production"!==n.env.NODE_ENV&&Di("Invalid setter expression: "+e))}function ze(e,t){e=e.trim();var n=uo.get(e);if(n)return t&&!n.set&&(n.set=He(n.exp)),n;var i={exp:e};return i.get=Be(e)&&e.indexOf("[")<0?Ie("scope."+e):Le(e),t&&(i.set=He(e)),uo.put(e,i),i}function Be(e){return Eo.test(e)&&!xo.test(e)&&"Math."!==e.slice(0,5)}function Ue(){$o.length=0,No.length=0,Oo={},Ao={},To=!1}function We(){for(var e=!0;e;)e=!1,qe($o),qe(No),$o.length?e=!0:(Bn&&ji.devtools&&Bn.emit("flush"),Ue())}function qe(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.id;if(Oo[o]=null,i.run(),"production"!==n.env.NODE_ENV&&null!=Oo[o]&&(Ao[o]=(Ao[o]||0)+1,Ao[o]>ji._maxUpdateCount)){Di('You may have an infinite update loop for watcher with expression "'+i.expression+'"',i.vm);break}}e.length=0}function Je(e){var t=e.id;if(null==Oo[t]){var n=e.user?No:$o;Oo[t]=n.length,n.push(e),To||(To=!0,oi(We))}}function Qe(e,t,n,i){i&&g(this,i);var o="function"==typeof t;if(this.vm=e,e._watchers.push(this),this.expression=t,this.cb=n,this.id=++jo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ri,this.newDepIds=new ri,this.prevError=null,o)this.getter=t,this.setter=void 0;else{var r=ze(t,this.twoWay);this.getter=r.get,this.setter=r.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function Ye(e,t){var n=void 0,i=void 0;t||(t=Do,t.clear());var o=In(e),r=b(e);if((o||r)&&Object.isExtensible(e)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(o)for(n=e.length;n--;)Ye(e[n],t);else if(r)for(i=Object.keys(e),n=i.length;n--;)Ye(e[i[n]],t)}}function Ge(e){return re(e)&&he(e.content)}function Ke(e,t){var n=t?e:e.trim(),i=Vo.get(n);if(i)return i;var o=document.createDocumentFragment(),r=e.match(Mo),s=Fo.test(e),a=Lo.test(e);if(r||s||a){var c=r&&r[1],l=Ro[c]||Ro.efault,h=l[0],u=l[1],f=l[2],p=document.createElement("div");for(p.innerHTML=u+e+f;h--;)p=p.lastChild;for(var d;d=p.firstChild;)o.appendChild(d)}else o.appendChild(document.createTextNode(e));return t||ie(o),Vo.put(n,o),o}function Ze(e){if(Ge(e))return Ke(e.innerHTML);if("SCRIPT"===e.tagName)return Ke(e.textContent);for(var t,n=Xe(e),i=document.createDocumentFragment();t=n.firstChild;)i.appendChild(t);return ie(i),i}function Xe(e){if(!e.querySelectorAll)return e.cloneNode();var t,n,i,o=e.cloneNode(!0);if(Io){var r=o;if(Ge(e)&&(e=e.content,r=o.content),n=e.querySelectorAll("template"),n.length)for(i=r.querySelectorAll("template"),t=i.length;t--;)i[t].parentNode.replaceChild(Xe(n[t]),i[t])}if(Ho)if("TEXTAREA"===e.tagName)o.value=e.value;else if(n=e.querySelectorAll("textarea"),n.length)for(i=o.querySelectorAll("textarea"),t=i.length;t--;)i[t].value=n[t].value;return o}function et(e,t,n){var i,o;return he(e)?(ie(e),t?Xe(e):e):("string"==typeof e?n||"#"!==e.charAt(0)?o=Ke(e,n):(o=Po.get(e),o||(i=document.getElementById(e.slice(1)),i&&(o=Ze(i),Po.put(e,o)))):e.nodeType&&(o=Ze(e)),o&&t?Xe(o):o)}function tt(e,t,n,i,o,r){this.children=[],this.childFrags=[],this.vm=t,this.scope=o,this.inserted=!1,this.parentFrag=r,r&&r.childFrags.push(this),this.unlink=e(t,n,i,o,this);var s=this.single=1===n.childNodes.length&&!n.childNodes[0].__v_anchor;s?(this.node=n.childNodes[0],this.before=nt,this.remove=it):(this.node=se("fragment-start"),this.end=se("fragment-end"),this.frag=n,Q(this.node,n),n.appendChild(this.end),this.before=ot,this.remove=rt),this.node.__v_frag=this}function nt(e,t){this.inserted=!0;var n=t!==!1?M:W;n(this.node,e,this.vm),H(this.node)&&this.callHook(st)}function it(){this.inserted=!1;var e=H(this.node),t=this;this.beforeRemove(),F(this.node,this.vm,function(){e&&t.callHook(at),t.destroy()})}function ot(e,t){this.inserted=!0;var n=this.vm,i=t!==!1?M:W;ce(this.node,this.end,function(t){i(t,e,n)}),H(this.node)&&this.callHook(st)}function rt(){this.inserted=!1;var e=this,t=H(this.node);this.beforeRemove(),le(this.node,this.end,this.vm,this.frag,function(){t&&e.callHook(at),e.destroy()})}function st(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function at(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}function ct(e,t){this.vm=e;var n,i="string"==typeof t;i||re(t)&&!t.hasAttribute("v-if")?n=et(t,!0):(n=document.createDocumentFragment(),n.appendChild(t)),this.template=n;var o,r=e.constructor.cid;if(r>0){var s=r+(i?t:ue(t));o=Uo.get(s),o||(o=Lt(n,e.$options,!0),Uo.put(s,o))}else o=Lt(n,e.$options,!0);this.linker=o}function lt(e,t,n){var i=e.node.previousSibling;if(i){for(e=i.__v_frag;!(e&&e.forId===n&&e.inserted||i===t);){if(i=i.previousSibling,!i)return;e=i.__v_frag}return e}}function ht(e){var t=e.node;if(e.end)for(;!t.__vue__&&t!==e.end&&t.nextSibling;)t=t.nextSibling;return t.__vue__}function ut(e){for(var t=-1,n=new Array(Math.floor(e));++t<e;)n[t]=t;return n}function ft(e,t,n,i){return i?"$index"===i?e:i.charAt(0).match(/\w/)?Se(n,i):n[i]:t||n}function pt(e,t,n){for(var i,o,r,s=t?[]:null,a=0,c=e.options.length;a<c;a++)if(i=e.options[a],r=n?i.hasAttribute("selected"):i.selected){if(o=i.hasOwnProperty("_value")?i._value:i.value,!t)return o;s.push(o)}return s}function dt(e,t){for(var n=e.length;n--;)if(C(e[n],t))return n;return-1}function vt(e,t){var n=t.map(function(e){var t=e.charCodeAt(0);return t>47&&t<58?parseInt(e,10):1===e.length&&(t=e.toUpperCase().charCodeAt(0),t>64&&t<91)?t:ur[e]});return n=[].concat.apply([],n),function(t){if(n.indexOf(t.keyCode)>-1)return e.call(this,t)}}function yt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function _t(e){return function(t){return t.preventDefault(),e.call(this,t)}}function gt(e){return function(t){if(t.target===t.currentTarget)return e.call(this,t)}}function bt(e){if(yr[e])return yr[e];var t=mt(e);return yr[e]=yr[t]=t,t}function mt(e){e=d(e);var t=f(e),n=t.charAt(0).toUpperCase()+t.slice(1);_r||(_r=document.createElement("div"));var i,o=pr.length;if("filter"!==t&&t in _r.style)return{kebab:e,camel:t};for(;o--;)if(i=dr[o]+n,i in _r.style)return{kebab:pr[o]+e,camel:i}}function Et(e){var t=[];if(In(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];if(o)if("string"==typeof o)t.push(o);else for(var r in o)o[r]&&t.push(r)}else if(b(e))for(var s in e)e[s]&&t.push(s);return t}function wt(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}function xt(e,t,n){function i(){++r>=o?n():e[r].call(t,i)}var o=e.length,r=0;e[0].call(t,i)}function kt(e,t,i){for(var o,r,a,c,l,h,u,p=[],v=Object.keys(t),y=v.length;y--;)if(r=v[y],o=t[r]||Sr,"production"===n.env.NODE_ENV||"$data"!==r)if(l=f(r),Vr.test(l)){if(u={name:r,path:l,options:o,mode:Dr.ONE_WAY,raw:null},a=d(r),null===(c=B(e,a))&&(null!==(c=B(e,a+".sync"))?u.mode=Dr.TWO_WAY:null!==(c=B(e,a+".once"))&&(u.mode=Dr.ONE_TIME)),null!==c)u.raw=c,h=A(c),c=h.expression,u.filters=h.filters,s(c)&&!h.filters?u.optimizedLiteral=!0:(u.dynamic=!0,"production"===n.env.NODE_ENV||u.mode!==Dr.TWO_WAY||Pr.test(c)||(u.mode=Dr.ONE_WAY,Di("Cannot bind two-way prop with non-settable parent path: "+c,i))),u.parentPath=c,"production"!==n.env.NODE_ENV&&o.twoWay&&u.mode!==Dr.TWO_WAY&&Di('Prop "'+r+'" expects a two-way binding type.',i);else if(null!==(c=z(e,a)))u.raw=c;else if("production"!==n.env.NODE_ENV){var _=l.toLowerCase();c=/[A-Z\-]/.test(r)&&(e.getAttribute(_)||e.getAttribute(":"+_)||e.getAttribute("v-bind:"+_)||e.getAttribute(":"+_+".once")||e.getAttribute("v-bind:"+_+".once")||e.getAttribute(":"+_+".sync")||e.getAttribute("v-bind:"+_+".sync")),c?Di("Possible usage error for prop `"+_+"` - did you mean `"+a+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",i):o.required&&Di("Missing required prop: "+r,i)}p.push(u)}else"production"!==n.env.NODE_ENV&&Di('Invalid prop key: "'+r+'". Prop keys must be valid identifiers.',i);else Di("Do not use $data as prop.",i);return Ct(p)}function Ct(e){return function(t,n){t._props={};for(var i,o,s,a,c,f=t.$options.propsData,p=e.length;p--;)if(i=e[p],c=i.raw,o=i.path,s=i.options,t._props[o]=i,f&&r(f,o)&&Nt(t,i,f[o]),null===c)Nt(t,i,void 0);else if(i.dynamic)i.mode===Dr.ONE_TIME?(a=(n||t._context||t).$get(i.parentPath),Nt(t,i,a)):t._context?t._bindDir({name:"prop",def:Mr,prop:i},null,null,n):Nt(t,i,t.$get(i.parentPath));else if(i.optimizedLiteral){var v=u(c);a=v===c?h(l(c)):v,Nt(t,i,a)}else a=s.type===Boolean&&(""===c||c===d(i.name))||c,Nt(t,i,a)}}function $t(e,t,n,i){var o=t.dynamic&&Be(t.parentPath),r=n;void 0===r&&(r=At(e,t)),r=jt(t,r,e);var s=r!==n;Tt(t,r,e)||(r=void 0),o&&!s?we(function(){i(r)}):i(r)}function Nt(e,t,n){$t(e,t,n,function(n){Ne(e,t.path,n)})}function Ot(e,t,n){$t(e,t,n,function(n){e[t.path]=n})}function At(e,t){var i=t.options;if(!r(i,"default"))return i.type!==Boolean&&void 0;var o=i["default"];return b(o)&&"production"!==n.env.NODE_ENV&&Di('Invalid default value for prop "'+t.name+'": Props with type Object/Array must use a factory function to return the default value.',e),"function"==typeof o&&i.type!==Function?o.call(e):o}function Tt(e,t,i){if(!e.options.required&&(null===e.raw||null==t))return!0;var o=e.options,r=o.type,s=!r,a=[];if(r){In(r)||(r=[r]);for(var c=0;c<r.length&&!s;c++){var l=Dt(t,r[c]);a.push(l.expectedType),s=l.valid}}if(!s)return"production"!==n.env.NODE_ENV&&Di('Invalid prop: type check failed for prop "'+e.name+'". Expected '+a.map(St).join(", ")+", got "+Vt(t)+".",i),!1;var h=o.validator;return!(h&&!h(t))||("production"!==n.env.NODE_ENV&&Di('Invalid prop: custom validator check failed for prop "'+e.name+'".',i),!1)}function jt(e,t,i){var o=e.options.coerce;return o?"function"==typeof o?o(t):("production"!==n.env.NODE_ENV&&Di('Invalid coerce for prop "'+e.name+'": expected function, got '+typeof o+".",i),t):t}function Dt(e,t){var n,i;return t===String?(i="string",n=typeof e===i):t===Number?(i="number",n=typeof e===i):t===Boolean?(i="boolean",n=typeof e===i):t===Function?(i="function",n=typeof e===i):t===Object?(i="object",n=m(e)):t===Array?(i="array",n=In(e)):n=e instanceof t,{valid:n,expectedType:i}}function St(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"custom type"}function Vt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Pt(e){Fr.push(e),Lr||(Lr=!0,oi(Rt))}function Rt(){for(var e=document.documentElement.offsetHeight,t=0;t<Fr.length;t++)Fr[t]();return Fr=[],Lr=!1,e}function Mt(e,t,i,o){this.id=t,this.el=e,this.enterClass=i&&i.enterClass||t+"-enter",this.leaveClass=i&&i.leaveClass||t+"-leave",this.hooks=i,this.vm=o,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=i&&i.type,"production"!==n.env.NODE_ENV&&this.type&&this.type!==Ir&&this.type!==Hr&&Di('invalid CSS transition type for transition="'+this.id+'": '+this.type,o);var r=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(e){r[e]=y(r[e],r)})}function Ft(e){if(/svg$/.test(e.namespaceURI)){var t=e.getBoundingClientRect();return!(t.width||t.height)}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function Lt(e,t,n){var i=n||!t._asComponent?qt(e,t):null,o=i&&i.terminal||hn(e)||!e.hasChildNodes()?null:Zt(e.childNodes,t);return function(e,t,n,r,s){var a=_(t.childNodes),c=It(function(){i&&i(e,t,n,r,s),o&&o(e,a,n,r,s)},e);return zt(e,c)}}function It(e,t){"production"===n.env.NODE_ENV&&(t._directives=[]);var i=t._directives.length;e();var o=t._directives.slice(i);o.sort(Ht);for(var r=0,s=o.length;r<s;r++)o[r]._bind();return o}function Ht(e,t){return e=e.descriptor.def.priority||es,t=t.descriptor.def.priority||es,e>t?-1:e===t?0:1}function zt(e,t,n,i){function o(o){Bt(e,t,o),n&&i&&Bt(n,i)}return o.dirs=t,o}function Bt(e,t,i){for(var o=t.length;o--;)t[o]._teardown(),"production"===n.env.NODE_ENV||i||e._directives.$remove(t[o])}function Ut(e,t,n,i){var o=kt(t,n,e),r=It(function(){o(e,i)},e);return zt(e,r)}function Wt(e,t,i){var o,r,s=t._containerAttrs,a=t._replacerAttrs;if(11!==e.nodeType)t._asComponent?(s&&i&&(o=sn(s,i)),a&&(r=sn(a,t))):r=sn(e.attributes,t);else if("production"!==n.env.NODE_ENV&&s){var c=s.filter(function(e){return e.name.indexOf("_v-")<0&&!Gr.test(e.name)&&"slot"!==e.name}).map(function(e){return'"'+e.name+'"'});if(c.length){var l=c.length>1;Di("Attribute"+(l?"s ":" ")+c.join(", ")+(l?" are":" is")+" ignored on component <"+t.el.tagName.toLowerCase()+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return t._containerAttrs=t._replacerAttrs=null,function(e,t,n){var i,s=e._context;s&&o&&(i=It(function(){o(s,t,null,n)},s));var a=It(function(){r&&r(e,t)},e);return zt(e,a,s,i)}}function qt(e,t){var n=e.nodeType;return 1!==n||hn(e)?3===n&&e.data.trim()?Qt(e,t):null:Jt(e,t)}function Jt(e,t){if("TEXTAREA"===e.tagName){var n=D(e.value);n&&(e.setAttribute(":value",S(n)),e.value="")}var i,o=e.hasAttributes(),r=o&&_(e.attributes);return o&&(i=nn(e,r,t)),i||(i=en(e,t)),i||(i=tn(e,t)),!i&&o&&(i=sn(r,t)),i}function Qt(e,t){if(e._skip)return Yt;var n=D(e.wholeText);if(!n)return null;for(var i=e.nextSibling;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var o,r,s=document.createDocumentFragment(),a=0,c=n.length;a<c;a++)r=n[a],o=r.tag?Gt(r,t):document.createTextNode(r.value),s.appendChild(o);return Kt(n,s,t)}function Yt(e,t){J(t)}function Gt(e,t){function n(t){if(!e.descriptor){var n=A(e.value);e.descriptor={name:t,def:Ar[t],expression:n.expression,filters:n.filters}}}var i;return e.oneTime?i=document.createTextNode(e.value):e.html?(i=document.createComment("v-html"),n("html")):(i=document.createTextNode(" "),n("text")),i}function Kt(e,t){return function(n,i,o,r){for(var s,a,l,h=t.cloneNode(!0),u=_(h.childNodes),f=0,p=e.length;f<p;f++)s=e[f],a=s.value,s.tag&&(l=u[f],s.oneTime?(a=(r||n).$eval(a),s.html?Y(l,et(a,!0)):l.data=c(a)):n._bindDir(s.descriptor,l,o,r));Y(i,h)}}function Zt(e,t){for(var n,i,o,r=[],s=0,a=e.length;s<a;s++)o=e[s],n=qt(o,t),i=n&&n.terminal||"SCRIPT"===o.tagName||!o.hasChildNodes()?null:Zt(o.childNodes,t),r.push(n,i);return r.length?Xt(r):null}function Xt(e){return function(t,n,i,o,r){for(var s,a,c,l=0,h=0,u=e.length;l<u;h++){s=n[h],a=e[l++],c=e[l++];var f=_(s.childNodes);a&&a(t,s,i,o,r),c&&c(t,f,i,o,r)}}}function en(e,t){var n=e.tagName.toLowerCase();if(!Ri.test(n)){var i=me(t,"elementDirectives",n);return i?rn(e,n,"",t,i):void 0}}function tn(e,t){var n=fe(e,t);if(n){var i=ae(e),o={name:"component",ref:i,expression:n.id,def:Qr.component,modifiers:{literal:!n.dynamic}},r=function(e,t,n,r,s){i&&Ne((r||e).$refs,i,null),e._bindDir(o,t,n,r,s)};return r.terminal=!0,r}}function nn(e,t,n){if(null!==z(e,"v-pre"))return on;if(e.hasAttribute("v-else")){var i=e.previousElementSibling;if(i&&i.hasAttribute("v-if"))return on}for(var o,r,s,a,c,l,h,u,f,p,d=0,v=t.length;d<v;d++)o=t[d],r=o.name.replace(Zr,""),(c=r.match(Kr))&&(f=me(n,"directives",c[1]),f&&f.terminal&&(!p||(f.priority||ts)>p.priority)&&(p=f,h=o.name,a=an(o.name),s=o.value,l=c[1],u=c[2]));return p?rn(e,l,s,n,p,h,u,a):void 0}function on(){}function rn(e,t,n,i,o,r,s,a){var c=A(n),l={name:t,arg:s,expression:c.expression,filters:c.filters,raw:n,attr:r,modifiers:a,def:o};"for"!==t&&"router-view"!==t||(l.ref=ae(e));var h=function(e,t,n,i,o){l.ref&&Ne((i||e).$refs,l.ref,null),e._bindDir(l,t,n,i,o)};return h.terminal=!0,h}function sn(e,t){function i(e,t,n){var i=n&&ln(n),o=!i&&A(s);y.push({name:e,attr:a,raw:c,def:t,arg:h,modifiers:u,expression:o&&o.expression,filters:o&&o.filters,interp:n,hasOneTime:i})}for(var o,r,s,a,c,l,h,u,f,p,d,v=e.length,y=[];v--;)if(o=e[v],r=a=o.name,s=c=o.value,p=D(s),h=null,u=an(r),r=r.replace(Zr,""),p)s=S(p),h=r,i("bind",Ar.bind,p),"production"!==n.env.NODE_ENV&&"class"===r&&Array.prototype.some.call(e,function(e){return":class"===e.name||"v-bind:class"===e.name})&&Di('class="'+c+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',t);else if(Xr.test(r))u.literal=!Yr.test(r),i("transition",Qr.transition);else if(Gr.test(r))h=r.replace(Gr,""),i("on",Ar.on);else if(Yr.test(r))l=r.replace(Yr,""),"style"===l||"class"===l?i(l,Qr[l]):(h=l,i("bind",Ar.bind));else if(d=r.match(Kr)){if(l=d[1],h=d[2],"else"===l)continue;f=me(t,"directives",l,!0),f&&i(l,f)}if(y.length)return cn(y)}function an(e){var t=Object.create(null),n=e.match(Zr);if(n)for(var i=n.length;i--;)t[n[i].slice(1)]=!0;return t}function cn(e){return function(t,n,i,o,r){for(var s=e.length;s--;)t._bindDir(e[s],n,i,o,r)}}function ln(e){for(var t=e.length;t--;)if(e[t].oneTime)return!0}function hn(e){return"SCRIPT"===e.tagName&&(!e.hasAttribute("type")||"text/javascript"===e.getAttribute("type"))}function un(e,t){return t&&(t._containerAttrs=pn(e)),re(e)&&(e=et(e)),t&&(t._asComponent&&!t.template&&(t.template="<slot></slot>"),t.template&&(t._content=ne(e),e=fn(e,t))),he(e)&&(Q(se("v-start",!0),e),e.appendChild(se("v-end",!0))),e}function fn(e,t){var i=t.template,o=et(i,!0);if(o){var r=o.firstChild,s=r.tagName&&r.tagName.toLowerCase();return t.replace?(e===document.body&&"production"!==n.env.NODE_ENV&&Di("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),o.childNodes.length>1||1!==r.nodeType||"component"===s||me(t,"components",s)||U(r,"is")||me(t,"elementDirectives",s)||r.hasAttribute("v-for")||r.hasAttribute("v-if")?o:(t._replacerAttrs=pn(r),dn(e,r),r)):(e.appendChild(o),e)}"production"!==n.env.NODE_ENV&&Di("Invalid template option: "+i)}function pn(e){if(1===e.nodeType&&e.hasAttributes())return _(e.attributes)}function dn(e,t){for(var n,i,o=e.attributes,r=o.length;r--;)n=o[r].name,i=o[r].value,t.hasAttribute(n)||ns.test(n)?"class"===n&&!D(i)&&(i=i.trim())&&i.split(/\s+/).forEach(function(e){ee(t,e)}):t.setAttribute(n,i)}function vn(e,t){if(t){for(var i,o,r=e._slotContents=Object.create(null),s=0,a=t.children.length;s<a;s++)i=t.children[s],(o=i.getAttribute("slot"))&&(r[o]||(r[o]=[])).push(i),"production"!==n.env.NODE_ENV&&B(i,"slot")&&Di('The "slot" attribute must be static.',e.$parent);for(o in r)r[o]=yn(r[o],t);if(t.hasChildNodes()){var c=t.childNodes;if(1===c.length&&3===c[0].nodeType&&!c[0].data.trim())return;r["default"]=yn(t.childNodes,t)}}}function yn(e,t){var n=document.createDocumentFragment();e=_(e);for(var i=0,o=e.length;i<o;i++){var r=e[i];!re(r)||r.hasAttribute("v-if")||r.hasAttribute("v-for")||(t.removeChild(r),r=et(r,!0)),n.appendChild(r)}return n}function _n(e){function t(){}function i(e,t){var n=new Qe(t,e,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),
Ee.target&&n.depend(),n.value}}Object.defineProperty(e.prototype,"$data",{get:function(){return this._data},set:function(e){e!==this._data&&this._setData(e)}}),e.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},e.prototype._initProps=function(){var e=this.$options,t=e.el,i=e.props;i&&!t&&"production"!==n.env.NODE_ENV&&Di("Props will not be compiled if no `el` option is provided at instantiation.",this),t=e.el=I(t),this._propsUnlinkFn=t&&1===t.nodeType&&i?Ut(this,t,i,this._scope):null},e.prototype._initData=function(){var e=this.$options.data,t=this._data=e?e():{};m(t)||(t={},"production"!==n.env.NODE_ENV&&Di("data functions should return an object.",this));var i,o,s=this._props,a=Object.keys(t);for(i=a.length;i--;)o=a[i],s&&r(s,o)?"production"!==n.env.NODE_ENV&&Di('Data field "'+o+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(o);$e(t,this)},e.prototype._setData=function(e){e=e||{};var t=this._data;this._data=e;var n,i,o;for(n=Object.keys(t),o=n.length;o--;)i=n[o],i in e||this._unproxy(i);for(n=Object.keys(e),o=n.length;o--;)i=n[o],r(this,i)||this._proxy(i);t.__ob__.removeVm(this),$e(e,this),this._digest()},e.prototype._proxy=function(e){if(!a(e)){var t=this;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(n){t._data[e]=n}})}},e.prototype._unproxy=function(e){a(e)||delete this[e]},e.prototype._digest=function(){for(var e=0,t=this._watchers.length;e<t;e++)this._watchers[e].update(!0)},e.prototype._initComputed=function(){var e=this.$options.computed;if(e)for(var n in e){var o=e[n],r={enumerable:!0,configurable:!0};"function"==typeof o?(r.get=i(o,this),r.set=t):(r.get=o.get?o.cache!==!1?i(o.get,this):y(o.get,this):t,r.set=o.set?y(o.set,this):t),Object.defineProperty(this,n,r)}},e.prototype._initMethods=function(){var e=this.$options.methods;if(e)for(var t in e)this[t]=y(e[t],this)},e.prototype._initMeta=function(){var e=this.$options._meta;if(e)for(var t in e)Ne(this,t,e[t])}}function gn(e){function t(e,t){for(var n,i,o,r=t.attributes,s=0,a=r.length;s<a;s++)n=r[s].name,os.test(n)&&(n=n.replace(os,""),i=r[s].value,Be(i)&&(i+=".apply(this, $arguments)"),o=(e._scope||e._context).$eval(i,!0),o._fromParent=!0,e.$on(n.replace(os),o))}function i(e,t,n){if(n){var i,r,s,a;for(r in n)if(i=n[r],In(i))for(s=0,a=i.length;s<a;s++)o(e,t,r,i[s]);else o(e,t,r,i)}}function o(e,t,i,r,s){var a=typeof r;if("function"===a)e[t](i,r,s);else if("string"===a){var c=e.$options.methods,l=c&&c[r];l?e[t](i,l,s):"production"!==n.env.NODE_ENV&&Di('Unknown method: "'+r+'" when registering callback for '+t+': "'+i+'".',e)}else r&&"object"===a&&o(e,t,i,r.handler,r)}function r(){this._isAttached||(this._isAttached=!0,this.$children.forEach(s))}function s(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function a(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(c))}function c(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}e.prototype._initEvents=function(){var e=this.$options;e._asComponent&&t(this,e.el),i(this,"$on",e.events),i(this,"$watch",e.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",r),this.$on("hook:detached",a)},e.prototype._callHook=function(e){this.$emit("pre-hook:"+e);var t=this.$options[e];if(t)for(var n=0,i=t.length;n<i;n++)t[n].call(this);this.$emit("hook:"+e)}}function bn(){}function mn(e,t,i,o,r,s){this.vm=t,this.el=i,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=o,this._scope=r,this._frag=s,"production"!==n.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function En(e){e.prototype._updateRef=function(e){var t=this.$options._ref;if(t){var n=(this._scope||this._context).$refs;e?n[t]===this&&(n[t]=null):n[t]=this}},e.prototype._compile=function(e){var t=this.$options,n=e;if(e=un(e,t),this._initElement(e),1!==e.nodeType||null===z(e,"v-pre")){var i=this._context&&this._context.$options,o=Wt(e,t,i);vn(this,t._content);var r,s=this.constructor;t._linkerCachable&&(r=s.linker,r||(r=s.linker=Lt(e,t)));var a=o(this,e,this._scope),c=r?r(this,e):Lt(e,t)(this,e);this._unlinkFn=function(){a(),c(!0)},t.replace&&Y(n,e),this._isCompiled=!0,this._callHook("compiled")}},e.prototype._initElement=function(e){he(e)?(this._isFragment=!0,this.$el=this._fragmentStart=e.firstChild,this._fragmentEnd=e.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=e):this.$el=e,this.$el.__vue__=this,this._callHook("beforeCompile")},e.prototype._bindDir=function(e,t,n,i,o){this._directives.push(new mn(e,this,t,n,i,o))},e.prototype._destroy=function(e,t){if(this._isBeingDestroyed)return void(t||this._cleanup());var n,i,o=this,r=function(){!n||i||t||o._cleanup()};e&&this.$el&&(i=!0,this.$remove(function(){i=!1,r()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var s,a=this.$parent;for(a&&!a._isBeingDestroyed&&(a.$children.$remove(this),this._updateRef(!0)),s=this.$children.length;s--;)this.$children[s].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),s=this._watchers.length;s--;)this._watchers[s].teardown();this.$el&&(this.$el.__vue__=null),n=!0,r()},e.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function wn(e){e.prototype._applyFilters=function(e,t,n,i){var o,r,s,a,c,l,h,u,f;for(l=0,h=n.length;l<h;l++)if(o=n[i?h-l-1:l],r=me(this.$options,"filters",o.name,!0),r&&(r=i?r.write:r.read||r,"function"==typeof r)){if(s=i?[e,t]:[e],c=i?2:1,o.args)for(u=0,f=o.args.length;u<f;u++)a=o.args[u],s[u+c]=a.dynamic?this.$get(a.value):a.value;e=r.apply(this,s)}return e},e.prototype._resolveComponent=function(t,i){var o;if(o="function"==typeof t?t:me(this.$options,"components",t,!0))if(o.options)i(o);else if(o.resolved)i(o.resolved);else if(o.requested)o.pendingCallbacks.push(i);else{o.requested=!0;var r=o.pendingCallbacks=[i];o.call(this,function(t){m(t)&&(t=e.extend(t)),o.resolved=t;for(var n=0,i=r.length;n<i;n++)r[n](t)},function(e){"production"!==n.env.NODE_ENV&&Di("Failed to resolve async component"+("string"==typeof t?": "+t:"")+". "+(e?"\nReason: "+e:""))})}}}function xn(e){function t(e){return JSON.parse(JSON.stringify(e))}e.prototype.$get=function(e,t){var n=ze(e);if(n){if(t){var i=this;return function(){i.$arguments=_(arguments);var e=n.get.call(i,i);return i.$arguments=null,e}}try{return n.get.call(this,this)}catch(o){}}},e.prototype.$set=function(e,t){var n=ze(e,!0);n&&n.set&&n.set.call(this,this,t)},e.prototype.$delete=function(e){o(this._data,e)},e.prototype.$watch=function(e,t,n){var i,o=this;"string"==typeof e&&(i=A(e),e=i.expression);var r=new Qe(o,e,t,{deep:n&&n.deep,sync:n&&n.sync,filters:i&&i.filters,user:!n||n.user!==!1});return n&&n.immediate&&t.call(o,r.value),function(){r.teardown()}},e.prototype.$eval=function(e,t){if(rs.test(e)){var n=A(e),i=this.$get(n.expression,t);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(e,t)},e.prototype.$interpolate=function(e){var t=D(e),n=this;return t?1===t.length?n.$eval(t[0].value)+"":t.map(function(e){return e.tag?n.$eval(e.value):e.value}).join(""):e},e.prototype.$log=function(e){var n=e?Se(this._data,e):this._data;if(n&&(n=t(n)),!e){var i;for(i in this.$options.computed)n[i]=t(this[i]);if(this._props)for(i in this._props)n[i]=t(this[i])}console.log(n)}}function kn(e){function t(e,t,i,o,r,s){t=n(t);var a=!H(t),c=o===!1||a?r:s,l=!a&&!e._isAttached&&!H(e.$el);return e._isFragment?(ce(e._fragmentStart,e._fragmentEnd,function(n){c(n,t,e)}),i&&i()):c(e.$el,t,e,i),l&&e._callHook("attached"),e}function n(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t,n,i){t.appendChild(e),i&&i()}function o(e,t,n,i){W(e,t),i&&i()}function r(e,t,n){J(e),n&&n()}e.prototype.$nextTick=function(e){oi(e,this)},e.prototype.$appendTo=function(e,n,o){return t(this,e,n,o,i,R)},e.prototype.$prependTo=function(e,t,i){return e=n(e),e.hasChildNodes()?this.$before(e.firstChild,t,i):this.$appendTo(e,t,i),this},e.prototype.$before=function(e,n,i){return t(this,e,n,i,o,M)},e.prototype.$after=function(e,t,i){return e=n(e),e.nextSibling?this.$before(e.nextSibling,t,i):this.$appendTo(e.parentNode,t,i),this},e.prototype.$remove=function(e,t){if(!this.$el.parentNode)return e&&e();var n=this._isAttached&&H(this.$el);n||(t=!1);var i=this,o=function(){n&&i._callHook("detached"),e&&e()};if(this._isFragment)le(this._fragmentStart,this._fragmentEnd,this,this._fragment,o);else{var s=t===!1?r:F;s(this.$el,this,o)}return this}}function Cn(e){function t(e,t,i){var o=e.$parent;if(o&&i&&!n.test(t))for(;o;)o._eventsCount[t]=(o._eventsCount[t]||0)+i,o=o.$parent}e.prototype.$on=function(e,n){return(this._events[e]||(this._events[e]=[])).push(n),t(this,e,1),this},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(this,arguments)}var i=this;return n.fn=t,this.$on(e,n),this},e.prototype.$off=function(e,n){var i;if(!arguments.length){if(this.$parent)for(e in this._events)i=this._events[e],i&&t(this,e,-i.length);return this._events={},this}if(i=this._events[e],!i)return this;if(1===arguments.length)return t(this,e,-i.length),this._events[e]=null,this;for(var o,r=i.length;r--;)if(o=i[r],o===n||o.fn===n){t(this,e,-1),i.splice(r,1);break}return this},e.prototype.$emit=function(e){var t="string"==typeof e;e=t?e:e.name;var n=this._events[e],i=t||!n;if(n){n=n.length>1?_(n):n;var o=t&&n.some(function(e){return e._fromParent});o&&(i=!1);for(var r=_(arguments,1),s=0,a=n.length;s<a;s++){var c=n[s],l=c.apply(this,r);l!==!0||o&&!c._fromParent||(i=!0)}}return i},e.prototype.$broadcast=function(e){var t="string"==typeof e;if(e=t?e:e.name,this._eventsCount[e]){var n=this.$children,i=_(arguments);t&&(i[0]={name:e,source:this});for(var o=0,r=n.length;o<r;o++){var s=n[o],a=s.$emit.apply(s,i);a&&s.$broadcast.apply(s,i)}return this}},e.prototype.$dispatch=function(e){var t=this.$emit.apply(this,arguments);if(t){var n=this.$parent,i=_(arguments);for(i[0]={name:e,source:this};n;)t=n.$emit.apply(n,i),n=t?n.$parent:null;return this}};var n=/^hook:/}function $n(e){function t(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void("production"!==n.env.NODE_ENV&&Di("$mount() should be called only once.",this)):(e=I(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),H(this.$el)?(this._callHook("attached"),t.call(this)):this.$once("hook:attached",t),this)},e.prototype.$destroy=function(e,t){this._destroy(e,t)},e.prototype.$compile=function(e,t,n,i){return Lt(e,this.$options,!0)(this,e,t,n,i)}}function Nn(e){this._init(e)}function On(e,t,n){return n=n?parseInt(n,10):0,t=l(t),"number"==typeof t?e.slice(n,n+t):e}function An(e,t,n){if(e=ls(e),null==t)return e;if("function"==typeof t)return e.filter(t);t=(""+t).toLowerCase();for(var i,o,r,s,a="in"===n?3:2,c=Array.prototype.concat.apply([],_(arguments,a)),l=[],h=0,u=e.length;h<u;h++)if(i=e[h],r=i&&i.$value||i,s=c.length){for(;s--;)if(o=c[s],"$key"===o&&jn(i.$key,t)||jn(Se(r,o),t)){l.push(i);break}}else jn(i,t)&&l.push(i);return l}function Tn(e){function t(e,t,n){var o=i[n];return o&&("$key"!==o&&(b(e)&&"$value"in e&&(e=e.$value),b(t)&&"$value"in t&&(t=t.$value)),e=b(e)?Se(e,o):e,t=b(t)?Se(t,o):t),e===t?0:e>t?r:-r}var n=null,i=void 0;e=ls(e);var o=_(arguments,1),r=o[o.length-1];"number"==typeof r?(r=r<0?-1:1,o=o.length>1?o.slice(0,-1):o):r=1;var s=o[0];return s?("function"==typeof s?n=function(e,t){return s(e,t)*r}:(i=Array.prototype.concat.apply([],o),n=function(e,o,r){return r=r||0,r>=i.length-1?t(e,o,r):t(e,o,r)||n(e,o,r+1)}),e.slice().sort(n)):e}function jn(e,t){var n;if(m(e)){var i=Object.keys(e);for(n=i.length;n--;)if(jn(e[i[n]],t))return!0}else if(In(e)){for(n=e.length;n--;)if(jn(e[n],t))return!0}else if(null!=e)return e.toString().toLowerCase().indexOf(t)>-1}function Dn(e){function t(e){return new Function("return function "+v(e)+" (options) { this._init(options) }")()}e.options={directives:Ar,elementDirectives:cs,filters:us,transitions:{},components:{},partials:{},replace:!0},e.util=qi,e.config=ji,e.set=i,e["delete"]=o,e.nextTick=oi,e.compiler=is,e.FragmentFactory=ct,e.internalDirectives=Qr,e.parsers={path:ho,text:Oi,template:zo,directive:wi,expression:Co},e.cid=0;var r=1;e.extend=function(e){e=e||{};var i=this,o=0===i.cid;if(o&&e._Ctor)return e._Ctor;var s=e.name||i.options.name;"production"!==n.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(s)||(Di('Invalid component name: "'+s+'". Component names can only contain alphanumeric characaters and the hyphen.'),s=null));var a=t(s||"VueComponent");return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.cid=r++,a.options=be(i.options,e),a["super"]=i,a.extend=i.extend,ji._assetTypes.forEach(function(e){a[e]=i[e]}),s&&(a.options.components[s]=a),o&&(e._Ctor=a),a},e.use=function(e){if(!e.installed){var t=_(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}},e.mixin=function(t){e.options=be(e.options,t)},ji._assetTypes.forEach(function(t){e[t]=function(i,o){return o?("production"!==n.env.NODE_ENV&&"component"===t&&(Ri.test(i)||Mi.test(i))&&Di("Do not use built-in or reserved HTML elements as component id: "+i),"component"===t&&m(o)&&(o.name||(o.name=i),o=e.extend(o)),this.options[t+"s"][i]=o,o):this.options[t+"s"][i]}}),g(e.transition,Vi)}var Sn=Object.prototype.hasOwnProperty,Vn=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,Pn=/-(\w)/g,Rn=/([a-z\d])([A-Z])/g,Mn=/(?:^|[-_\/])(\w)/g,Fn=Object.prototype.toString,Ln="[object Object]",In=Array.isArray,Hn="__proto__"in{},zn="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Bn=zn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Un=zn&&window.navigator.userAgent.toLowerCase(),Wn=Un&&Un.indexOf("trident")>0,qn=Un&&Un.indexOf("msie 9.0")>0,Jn=Un&&Un.indexOf("android")>0,Qn=Un&&/(iphone|ipad|ipod|ios)/i.test(Un),Yn=Qn&&Un.match(/os ([\d_]+)/),Gn=Yn&&Yn[1].split("_"),Kn=Gn&&Number(Gn[0])>=9&&Number(Gn[1])>=3&&!window.indexedDB,Zn=void 0,Xn=void 0,ei=void 0,ti=void 0;if(zn&&!qn){var ni=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,ii=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;Zn=ni?"WebkitTransition":"transition",Xn=ni?"webkitTransitionEnd":"transitionend",ei=ii?"WebkitAnimation":"animation",ti=ii?"webkitAnimationEnd":"animationend"}var oi=function(){function e(){o=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}var n,i=[],o=!1;if("undefined"==typeof MutationObserver||Kn){var r=zn?window:"undefined"!=typeof t?t:{};n=r.setImmediate||setTimeout}else{var s=1,a=new MutationObserver(e),c=document.createTextNode(s);a.observe(c,{characterData:!0}),n=function(){s=(s+1)%2,c.data=s}}return function(t,r){var s=r?function(){t.call(r)}:t;i.push(s),o||(o=!0,n(e,0))}}(),ri=void 0;"undefined"!=typeof Set&&Set.toString().match(/native code/)?ri=Set:(ri=function(){this.set=Object.create(null)},ri.prototype.has=function(e){return void 0!==this.set[e]},ri.prototype.add=function(e){this.set[e]=1},ri.prototype.clear=function(){this.set=Object.create(null)});var si=$.prototype;si.put=function(e,t){var n,i=this.get(e,!0);return i||(this.size===this.limit&&(n=this.shift()),i={key:e},this._keymap[e]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size++),i.value=t,n},si.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},si.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail?t?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,t?n:n.value)};var ai,ci,li,hi,ui,fi,pi,di,vi,yi,_i,gi,bi=new $(1e3),mi=/[^\s'"]+|'[^']*'|"[^"]*"/g,Ei=/^in$|^-?\d+/,wi=Object.freeze({parseDirective:A}),xi=/[-.*+?^${}()|[\]\/\\]/g,ki=void 0,Ci=void 0,$i=void 0,Ni=/[^|]\|[^|]/,Oi=Object.freeze({compileRegex:j,parseText:D,tokensToExp:S}),Ai=["{{","}}"],Ti=["{{{","}}}"],ji=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==n.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return Ai},set:function(e){Ai=e,j()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return Ti},set:function(e){Ti=e,j()},configurable:!0,enumerable:!0}}),Di=void 0,Si=void 0;"production"!==n.env.NODE_ENV&&!function(){var e="undefined"!=typeof console;Di=function(t,n){e&&!ji.silent&&console.error("[Vue warn]: "+t+(n?Si(n):""))},Si=function(e){var t=e._isVue?e.$options.name:e.name;return t?" (found in component: <"+d(t)+">)":""}}();var Vi=Object.freeze({appendWithTransition:R,beforeWithTransition:M,removeWithTransition:F,applyTransition:L}),Pi=/^v-ref:/,Ri=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,Mi=/^(slot|partial|component)$/i,Fi=void 0;"production"!==n.env.NODE_ENV&&(Fi=function(e,t){return t.indexOf("-")>-1?e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:/HTMLUnknownElement/.test(e.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(t)});var Li=ji.optionMergeStrategies=Object.create(null);Li.data=function(e,t,i){return i?e||t?function(){var n="function"==typeof t?t.call(i):t,o="function"==typeof e?e.call(i):void 0;return n?de(n,o):o}:void 0:t?"function"!=typeof t?("production"!==n.env.NODE_ENV&&Di('The "data" option should be a function that returns a per-instance value in component definitions.',i),e):e?function(){return de(t.call(this),e.call(this))}:t:e},Li.el=function(e,t,i){if(!i&&t&&"function"!=typeof t)return void("production"!==n.env.NODE_ENV&&Di('The "el" option should be a function that returns a per-instance value in component definitions.',i));var o=t||e;return i&&"function"==typeof o?o.call(i):o},Li.init=Li.created=Li.ready=Li.attached=Li.detached=Li.beforeCompile=Li.compiled=Li.beforeDestroy=Li.destroyed=Li.activate=function(e,t){return t?e?e.concat(t):In(t)?t:[t]:e},ji._assetTypes.forEach(function(e){Li[e+"s"]=ve}),Li.watch=Li.events=function(e,t){if(!t)return e;if(!e)return t;var n={};g(n,e);for(var i in t){var o=n[i],r=t[i];o&&!In(o)&&(o=[o]),n[i]=o?o.concat(r):[r]}return n},Li.props=Li.methods=Li.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return g(n,e),g(n,t),n};var Ii=function(e,t){return void 0===t?e:t},Hi=0;Ee.target=null,Ee.prototype.addSub=function(e){this.subs.push(e)},Ee.prototype.removeSub=function(e){this.subs.$remove(e)},Ee.prototype.depend=function(){Ee.target.addDep(this)},Ee.prototype.notify=function(){for(var e=_(this.subs),t=0,n=e.length;t<n;t++)e[t].update()};var zi=Array.prototype,Bi=Object.create(zi);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=zi[e];E(Bi,e,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var o,r=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),r})}),E(zi,"$set",function(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}),E(zi,"$remove",function(e){if(this.length){var t=x(this,e);return t>-1?this.splice(t,1):void 0}});var Ui=Object.getOwnPropertyNames(Bi),Wi=!0;xe.prototype.walk=function(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;n++)this.convert(t[n],e[t[n]])},xe.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)$e(e[t])},xe.prototype.convert=function(e,t){Ne(this.value,e,t)},xe.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},xe.prototype.removeVm=function(e){this.vms.$remove(e)};var qi=Object.freeze({defineReactive:Ne,set:i,del:o,hasOwn:r,isLiteral:s,isReserved:a,_toString:c,toNumber:l,toBoolean:h,stripQuotes:u,camelize:f,hyphenate:d,classify:v,bind:y,toArray:_,extend:g,isObject:b,isPlainObject:m,def:E,debounce:w,indexOf:x,cancellable:k,looseEqual:C,isArray:In,hasProto:Hn,inBrowser:zn,devtools:Bn,isIE:Wn,isIE9:qn,isAndroid:Jn,isIos:Qn,iosVersionMatch:Yn,iosVersion:Gn,hasMutationObserverBug:Kn,get transitionProp(){return Zn},get transitionEndEvent(){return Xn},get animationProp(){return ei},get animationEndEvent(){return ti},nextTick:oi,get _Set(){return ri},query:I,inDoc:H,getAttr:z,getBindAttr:B,hasBindAttr:U,before:W,after:q,remove:J,prepend:Q,replace:Y,on:G,off:K,setClass:X,addClass:ee,removeClass:te,extractContent:ne,trimNode:ie,isTemplate:re,createAnchor:se,findRef:ae,mapNodeRange:ce,removeNodeRange:le,isFragment:he,getOuterHTML:ue,mergeOptions:be,resolveAsset:me,checkComponentAttr:fe,commonTagRE:Ri,reservedTagRE:Mi,get warn(){return Di}}),Ji=0,Qi=new $(1e3),Yi=0,Gi=1,Ki=2,Zi=3,Xi=0,eo=1,to=2,no=3,io=4,oo=5,ro=6,so=7,ao=8,co=[];co[Xi]={ws:[Xi],ident:[no,Yi],"[":[io],eof:[so]},co[eo]={ws:[eo],".":[to],"[":[io],eof:[so]},co[to]={ws:[to],ident:[no,Yi]},co[no]={ident:[no,Yi],0:[no,Yi],number:[no,Yi],ws:[eo,Gi],".":[to,Gi],"[":[io,Gi],eof:[so,Gi]},co[io]={"'":[oo,Yi],'"':[ro,Yi],"[":[io,Ki],"]":[eo,Zi],eof:ao,"else":[io,Yi]},co[oo]={"'":[io,Yi],eof:ao,"else":[oo,Yi]},co[ro]={'"':[io,Yi],eof:ao,"else":[ro,Yi]};var lo;"production"!==n.env.NODE_ENV&&(lo=function(e,t){Di('You are setting a non-existent path "'+e.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',t)});var ho=Object.freeze({parsePath:De,getPath:Se,setPath:Ve}),uo=new $(1e3),fo="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",po=new RegExp("^("+fo.replace(/,/g,"\\b|")+"\\b)"),vo="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",yo=new RegExp("^("+vo.replace(/,/g,"\\b|")+"\\b)"),_o=/\s/g,go=/\n/g,bo=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,mo=/"(\d+)"/g,Eo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,wo=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,xo=/^(?:true|false|null|undefined|Infinity|NaN)$/,ko=[],Co=Object.freeze({parseExpression:ze,isSimplePath:Be}),$o=[],No=[],Oo={},Ao={},To=!1,jo=0;Qe.prototype.get=function(){this.beforeGet();var e,t=this.scope||this.vm;try{e=this.getter.call(t,t)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating expression "'+this.expression+'": '+i.toString(),this.vm)}return this.deep&&Ye(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=t._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},Qe.prototype.set=function(e){var t=this.scope||this.vm;this.filters&&(e=t._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(t,t,e)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating setter "'+this.expression+'": '+i.toString(),this.vm)}var o=t.$forContext;if(o&&o.alias===this.expression){if(o.filters)return void("production"!==n.env.NODE_ENV&&Di("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));o._withLock(function(){t.$key?o.rawValue[t.$key]=e:o.rawValue.$set(t.$index,e)})}},Qe.prototype.beforeGet=function(){Ee.target=this},Qe.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Qe.prototype.afterGet=function(){Ee.target=null;for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Qe.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!ji.async?this.run():(this.shallow=this.queued?!!e&&this.shallow:!!e,this.queued=!0,"production"!==n.env.NODE_ENV&&ji.debug&&(this.prevError=new Error("[vue] async stack trace")),Je(this))},Qe.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(b(e)||this.deep)&&!this.shallow){var t=this.value;this.value=e;var i=this.prevError;if("production"!==n.env.NODE_ENV&&ji.debug&&i){this.prevError=null;try{this.cb.call(this.vm,e,t)}catch(o){throw oi(function(){throw i},0),o}}else this.cb.call(this.vm,e,t)}this.queued=this.shallow=!1}},Qe.prototype.evaluate=function(){var e=Ee.target;this.value=this.get(),this.dirty=!1,Ee.target=e},Qe.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},Qe.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var Do=new ri,So={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(e){this.el[this.attr]=c(e)}},Vo=new $(1e3),Po=new $(1e3),Ro={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};Ro.td=Ro.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Ro.option=Ro.optgroup=[1,'<select multiple="multiple">',"</select>"],Ro.thead=Ro.tbody=Ro.colgroup=Ro.caption=Ro.tfoot=[1,"<table>","</table>"],Ro.g=Ro.defs=Ro.symbol=Ro.use=Ro.image=Ro.text=Ro.circle=Ro.ellipse=Ro.line=Ro.path=Ro.polygon=Ro.polyline=Ro.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Mo=/<([\w:-]+)/,Fo=/&#?\w+?;/,Lo=/<!--/,Io=function(){if(zn){var e=document.createElement("div");return e.innerHTML="<template>1</template>",!e.cloneNode(!0).firstChild.innerHTML}return!1}(),Ho=function(){if(zn){var e=document.createElement("textarea");return e.placeholder="t","t"===e.cloneNode(!0).value}return!1}(),zo=Object.freeze({cloneNode:Xe,parseTemplate:et}),Bo={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=se("v-html"),Y(this.el,this.anchor))},update:function(e){e=c(e),this.nodes?this.swap(e):this.el.innerHTML=e},swap:function(e){for(var t=this.nodes.length;t--;)J(this.nodes[t]);var n=et(e,!0,!0);this.nodes=_(n.childNodes),W(n,this.anchor)}};tt.prototype.callHook=function(e){var t,n;for(t=0,n=this.childFrags.length;t<n;t++)this.childFrags[t].callHook(e);for(t=0,n=this.children.length;t<n;t++)e(this.children[t])},tt.prototype.beforeRemove=function(){var e,t;for(e=0,t=this.childFrags.length;e<t;e++)this.childFrags[e].beforeRemove(!1);for(e=0,t=this.children.length;e<t;e++)this.children[e].$destroy(!1,!0);var n=this.unlink.dirs;for(e=0,t=n.length;e<t;e++)n[e]._watcher&&n[e]._watcher.teardown()},tt.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var Uo=new $(5e3);ct.prototype.create=function(e,t,n){var i=Xe(this.template);return new tt(this.linker,this.vm,i,e,t,n)};var Wo=700,qo=800,Jo=850,Qo=1100,Yo=1500,Go=1500,Ko=1750,Zo=2100,Xo=2200,er=2300,tr=0,nr={priority:Xo,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var e=this.expression.match(/(.*) (?:in|of) (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=t[1].trim(),this.alias=t[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(!this.alias)return void("production"!==n.env.NODE_ENV&&Di('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++tr;var i=this.el.tagName;this.isOption=("OPTION"===i||"OPTGROUP"===i)&&"SELECT"===this.el.parentNode.tagName,this.start=se("v-for-start"),this.end=se("v-for-end"),Y(this.el,this.end),W(this.start,this.end),this.cache=Object.create(null),this.factory=new ct(this.vm,this.el)},update:function(e){this.diff(e),this.updateRef(),this.updateModel()},diff:function(e){var t,n,i,o,s,a,c=e[0],l=this.fromObject=b(c)&&r(c,"$key")&&r(c,"$value"),h=this.params.trackBy,u=this.frags,f=this.frags=new Array(e.length),p=this.alias,d=this.iterator,v=this.start,y=this.end,_=H(v),g=!u;for(t=0,n=e.length;t<n;t++)c=e[t],o=l?c.$key:null,s=l?c.$value:c,a=!b(s),i=!g&&this.getCachedFrag(s,t,o),i?(i.reused=!0,i.scope.$index=t,o&&(i.scope.$key=o),d&&(i.scope[d]=null!==o?o:t),(h||l||a)&&we(function(){i.scope[p]=s})):(i=this.create(s,p,t,o),i.fresh=!g),f[t]=i,g&&i.before(y);if(!g){var m=0,E=u.length-f.length;for(this.vm._vForRemoving=!0,t=0,n=u.length;t<n;t++)i=u[t],i.reused||(this.deleteCachedFrag(i),this.remove(i,m++,E,_));this.vm._vForRemoving=!1,m&&(this.vm._watchers=this.vm._watchers.filter(function(e){return e.active}));var w,x,k,C=0;for(t=0,n=f.length;t<n;t++)i=f[t],w=f[t-1],x=w?w.staggerCb?w.staggerAnchor:w.end||w.node:v,i.reused&&!i.staggerCb?(k=lt(i,v,this.id),k===w||k&&lt(k,v,this.id)===w||this.move(i,x)):this.insert(i,C++,x,_),i.reused=i.fresh=!1}},create:function(e,t,n,i){var o=this._host,r=this._scope||this.vm,s=Object.create(r);s.$refs=Object.create(r.$refs),s.$els=Object.create(r.$els),s.$parent=r,s.$forContext=this,we(function(){Ne(s,t,e)}),Ne(s,"$index",n),i?Ne(s,"$key",i):s.$key&&E(s,"$key",null),this.iterator&&Ne(s,this.iterator,null!==i?i:n);var a=this.factory.create(o,s,this._frag);return a.forId=this.id,this.cacheFrag(e,a,n,i),a},updateRef:function(){var e=this.descriptor.ref;if(e){var t,n=(this._scope||this.vm).$refs;this.fromObject?(t={},this.frags.forEach(function(e){t[e.scope.$key]=ht(e)})):t=this.frags.map(ht),n[e]=t}},updateModel:function(){if(this.isOption){var e=this.start.parentNode,t=e&&e.__v_model;t&&t.forceUpdate()}},insert:function(e,t,n,i){e.staggerCb&&(e.staggerCb.cancel(),e.staggerCb=null);var o=this.getStagger(e,t,null,"enter");if(i&&o){var r=e.staggerAnchor;r||(r=e.staggerAnchor=se("stagger-anchor"),r.__v_frag=e),q(r,n);var s=e.staggerCb=k(function(){e.staggerCb=null,e.before(r),J(r)});setTimeout(s,o)}else{var a=n.nextSibling;a||(q(this.end,n),a=this.end),e.before(a)}},remove:function(e,t,n,i){if(e.staggerCb)return e.staggerCb.cancel(),void(e.staggerCb=null);var o=this.getStagger(e,t,n,"leave");if(i&&o){var r=e.staggerCb=k(function(){e.staggerCb=null,e.remove()});setTimeout(r,o)}else e.remove()},move:function(e,t){t.nextSibling||this.end.parentNode.appendChild(this.end),e.before(t.nextSibling,!1)},cacheFrag:function(e,t,i,o){var s,a=this.params.trackBy,c=this.cache,l=!b(e);o||a||l?(s=ft(i,o,e,a),c[s]?"$index"!==a&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):c[s]=t):(s=this.id,r(e,s)?null===e[s]?e[s]=t:"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):Object.isExtensible(e)?E(e,s,t):"production"!==n.env.NODE_ENV&&Di("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),t.raw=e;
},getCachedFrag:function(e,t,i){var o,r=this.params.trackBy,s=!b(e);if(i||r||s){var a=ft(t,i,e,r);o=this.cache[a]}else o=e[this.id];return o&&(o.reused||o.fresh)&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e),o},deleteCachedFrag:function(e){var t=e.raw,n=this.params.trackBy,i=e.scope,o=i.$index,s=r(i,"$key")&&i.$key,a=!b(t);if(n||s||a){var c=ft(o,s,t,n);this.cache[c]=null}else t[this.id]=null,e.raw=null},getStagger:function(e,t,n,i){i+="Stagger";var o=e.node.__v_trans,r=o&&o.hooks,s=r&&(r[i]||r.stagger);return s?s.call(e,t,n):t*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(e){return this.rawValue=e,e},_postProcess:function(e){if(In(e))return e;if(m(e)){for(var t,n=Object.keys(e),i=n.length,o=new Array(i);i--;)t=n[i],o[i]={$key:t,$value:e[t]};return o}return"number"!=typeof e||isNaN(e)||(e=ut(e)),e||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var e,t=this.frags.length;t--;)e=this.frags[t],this.deleteCachedFrag(e),e.destroy()}};"production"!==n.env.NODE_ENV&&(nr.warnDuplicate=function(e){Di('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(e)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var ir={priority:Zo,terminal:!0,bind:function(){var e=this.el;if(e.__vue__)"production"!==n.env.NODE_ENV&&Di('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var t=e.nextElementSibling;t&&null!==z(t,"v-else")&&(J(t),this.elseEl=t),this.anchor=se("v-if"),Y(e,this.anchor)}},update:function(e){this.invalid||(e?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new ct(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new ct(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},or={bind:function(){var e=this.el.nextElementSibling;e&&null!==z(e,"v-else")&&(this.elseEl=e)},update:function(e){this.apply(this.el,e),this.elseEl&&this.apply(this.elseEl,!e)},apply:function(e,t){function n(){e.style.display=t?"":"none"}H(e)?L(e,t?1:-1,n,this.vm):n()}},rr={bind:function(){var e=this,t=this.el,n="range"===t.type,i=this.params.lazy,o=this.params.number,r=this.params.debounce,s=!1;if(Jn||n||(this.on("compositionstart",function(){s=!0}),this.on("compositionend",function(){s=!1,i||e.listener()})),this.focused=!1,n||i||(this.on("focus",function(){e.focused=!0}),this.on("blur",function(){e.focused=!1,e._frag&&!e._frag.inserted||e.rawListener()})),this.listener=this.rawListener=function(){if(!s&&e._bound){var i=o||n?l(t.value):t.value;e.set(i),oi(function(){e._bound&&!e.focused&&e.update(e._watcher.value)})}},r&&(this.listener=w(this.listener,r)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(t)[a]("change",this.rawListener),i||jQuery(t)[a]("input",this.listener)}else this.on("change",this.rawListener),i||this.on("input",this.listener);!i&&qn&&(this.on("cut",function(){oi(e.listener)}),this.on("keyup",function(t){46!==t.keyCode&&8!==t.keyCode||e.listener()})),(t.hasAttribute("value")||"TEXTAREA"===t.tagName&&t.value.trim())&&(this.afterBind=this.listener)},update:function(e){e=c(e),e!==this.el.value&&(this.el.value=e)},unbind:function(){var e=this.el;if(this.hasjQuery){var t=jQuery.fn.off?"off":"unbind";jQuery(e)[t]("change",this.listener),jQuery(e)[t]("input",this.listener)}}},sr={bind:function(){var e=this,t=this.el;this.getValue=function(){if(t.hasOwnProperty("_value"))return t._value;var n=t.value;return e.params.number&&(n=l(n)),n},this.listener=function(){e.set(e.getValue())},this.on("change",this.listener),t.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){this.el.checked=C(e,this.getValue())}},ar={bind:function(){var e=this,t=this,n=this.el;this.forceUpdate=function(){t._watcher&&t.update(t._watcher.get())};var i=this.multiple=n.hasAttribute("multiple");this.listener=function(){var e=pt(n,i);e=t.params.number?In(e)?e.map(l):l(e):e,t.set(e)},this.on("change",this.listener);var o=pt(n,i,!0);(i&&o.length||!i&&null!==o)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){oi(e.forceUpdate)}),H(n)||oi(this.forceUpdate)},update:function(e){var t=this.el;t.selectedIndex=-1;for(var n,i,o=this.multiple&&In(e),r=t.options,s=r.length;s--;)n=r[s],i=n.hasOwnProperty("_value")?n._value:n.value,n.selected=o?dt(e,i)>-1:C(e,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},cr={bind:function(){function e(){var e=n.checked;return e&&n.hasOwnProperty("_trueValue")?n._trueValue:!e&&n.hasOwnProperty("_falseValue")?n._falseValue:e}var t=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:t.params.number?l(n.value):n.value},this.listener=function(){var i=t._watcher.value;if(In(i)){var o=t.getValue();n.checked?x(i,o)<0&&i.push(o):i.$remove(o)}else t.set(e())},this.on("change",this.listener),n.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){var t=this.el;In(e)?t.checked=x(e,this.getValue())>-1:t.hasOwnProperty("_trueValue")?t.checked=C(e,t._trueValue):t.checked=!!e}},lr={text:rr,radio:sr,select:ar,checkbox:cr},hr={priority:qo,twoWay:!0,handlers:lr,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==n.env.NODE_ENV&&Di('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var e,t=this.el,i=t.tagName;if("INPUT"===i)e=lr[t.type]||lr.text;else if("SELECT"===i)e=lr.select;else{if("TEXTAREA"!==i)return void("production"!==n.env.NODE_ENV&&Di("v-model does not support element type: "+i,this.vm));e=lr.text}t.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var e=this.filters;if(e)for(var t=e.length;t--;){var n=me(this.vm.$options,"filters",e[t].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},ur={esc:27,tab:9,enter:13,space:32,"delete":[8,46],up:38,left:37,right:39,down:40},fr={priority:Wo,acceptStatement:!0,keyCodes:ur,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var e=this;this.iframeBind=function(){G(e.el.contentWindow,e.arg,e.handler,e.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"!=typeof e)return void("production"!==n.env.NODE_ENV&&Di("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+e,this.vm));this.modifiers.stop&&(e=yt(e)),this.modifiers.prevent&&(e=_t(e)),this.modifiers.self&&(e=gt(e));var t=Object.keys(this.modifiers).filter(function(e){return"stop"!==e&&"prevent"!==e&&"self"!==e&&"capture"!==e});t.length&&(e=vt(e,t)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():G(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var e=this.iframeBind?this.el.contentWindow:this.el;this.handler&&K(e,this.arg,this.handler)},unbind:function(){this.reset()}},pr=["-webkit-","-moz-","-ms-"],dr=["Webkit","Moz","ms"],vr=/!important;?$/,yr=Object.create(null),_r=null,gr={deep:!0,update:function(e){"string"==typeof e?this.el.style.cssText=e:In(e)?this.handleObject(e.reduce(g,{})):this.handleObject(e||{})},handleObject:function(e){var t,n,i=this.cache||(this.cache={});for(t in i)t in e||(this.handleSingle(t,null),delete i[t]);for(t in e)n=e[t],n!==i[t]&&(i[t]=n,this.handleSingle(t,n))},handleSingle:function(e,t){if(e=bt(e))if(null!=t&&(t+=""),t){var i=vr.test(t)?"important":"";i?("production"!==n.env.NODE_ENV&&Di("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),t=t.replace(vr,"").trim(),this.el.style.setProperty(e.kebab,t,i)):this.el.style[e.camel]=t}else this.el.style[e.camel]=""}},br="http://www.w3.org/1999/xlink",mr=/^xlink:/,Er=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,wr=/^(?:value|checked|selected|muted)$/,xr=/^(?:draggable|contenteditable|spellcheck)$/,kr={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Cr={priority:Jo,bind:function(){var e=this.arg,t=this.el.tagName;e||(this.deep=!0);var i=this.descriptor,o=i.interp;if(o&&(i.hasOneTime&&(this.expression=S(o,this._scope||this.vm)),(Er.test(e)||"name"===e&&("PARTIAL"===t||"SLOT"===t))&&("production"!==n.env.NODE_ENV&&Di(e+'="'+i.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(e),this.invalid=!0),"production"!==n.env.NODE_ENV)){var r=e+'="'+i.raw+'": ';"src"===e&&Di(r+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===e&&Di(r+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(e){if(!this.invalid){var t=this.arg;this.arg?this.handleSingle(t,e):this.handleObject(e||{})}},handleObject:gr.handleObject,handleSingle:function(e,t){var n=this.el,i=this.descriptor.interp;if(this.modifiers.camel&&(e=f(e)),!i&&wr.test(e)&&e in n){var o="value"===e&&null==t?"":t;n[e]!==o&&(n[e]=o)}var r=kr[e];if(!i&&r){n[r]=t;var s=n.__v_model;s&&s.listener()}return"value"===e&&"TEXTAREA"===n.tagName?void n.removeAttribute(e):void(xr.test(e)?n.setAttribute(e,t?"true":"false"):null!=t&&t!==!1?"class"===e?(n.__v_trans&&(t+=" "+n.__v_trans.id+"-transition"),X(n,t)):mr.test(e)?n.setAttributeNS(br,e,t===!0?"":t):n.setAttribute(e,t===!0?"":t):n.removeAttribute(e))}},$r={priority:Yo,bind:function(){if(this.arg){var e=this.id=f(this.arg),t=(this._scope||this.vm).$els;r(t,e)?t[e]=this.el:Ne(t,e,this.el)}},unbind:function(){var e=(this._scope||this.vm).$els;e[this.id]===this.el&&(e[this.id]=null)}},Nr={bind:function(){"production"!==n.env.NODE_ENV&&Di("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},Or={bind:function(){var e=this.el;this.vm.$once("pre-hook:compiled",function(){e.removeAttribute("v-cloak")})}},Ar={text:So,html:Bo,"for":nr,"if":ir,show:or,model:hr,on:fr,bind:Cr,el:$r,ref:Nr,cloak:Or},Tr={deep:!0,update:function(e){e?"string"==typeof e?this.setClass(e.trim().split(/\s+/)):this.setClass(Et(e)):this.cleanup()},setClass:function(e){this.cleanup(e);for(var t=0,n=e.length;t<n;t++){var i=e[t];i&&wt(this.el,i,ee)}this.prevKeys=e},cleanup:function(e){var t=this.prevKeys;if(t)for(var n=t.length;n--;){var i=t[n];(!e||e.indexOf(i)<0)&&wt(this.el,i,te)}}},jr={priority:Go,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==n.env.NODE_ENV&&Di('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=ne(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=se("v-component"),Y(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+d(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(e){this.literal||this.setComponent(e)},setComponent:function(e,t){if(this.invalidatePending(),e){var n=this;this.resolveComponent(e,function(){n.mountComponent(t)})}else this.unbuild(!0),this.remove(this.childVM,t),this.childVM=null},resolveComponent:function(e,t){var n=this;this.pendingComponentCb=k(function(i){n.ComponentName=i.options.name||("string"==typeof e?e:null),n.Component=i,t()}),this.vm._resolveComponent(e,this.pendingComponentCb)},mountComponent:function(e){this.unbuild(!0);var t=this,n=this.Component.options.activate,i=this.getCached(),o=this.build();n&&!i?(this.waitingFor=o,xt(n,o,function(){t.waitingFor===o&&(t.waitingFor=null,t.transition(o,e))})):(i&&o._updateRef(),this.transition(o,e))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var t=this.getCached();if(t)return t;if(this.Component){var i={name:this.ComponentName,el:Xe(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&g(i,e);var o=new this.Component(i);return this.keepAlive&&(this.cache[this.Component.cid]=o),"production"!==n.env.NODE_ENV&&this.el.hasAttribute("transition")&&o._isFragment&&Di("Transitions will not work on a fragment instance. Template: "+o.$options.template,o),o}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(e){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var t=this.childVM;return!t||this.keepAlive?void(t&&(t._inactive=!0,t._updateRef(!0))):void t.$destroy(!1,e)},remove:function(e,t){var n=this.keepAlive;if(e){this.pendingRemovals++,this.pendingRemovalCb=t;var i=this;e.$remove(function(){i.pendingRemovals--,n||e._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else t&&t()},transition:function(e,t){var n=this,i=this.childVM;switch(i&&(i._inactive=!0),e._inactive=!1,this.childVM=e,n.params.transitionMode){case"in-out":e.$before(n.anchor,function(){n.remove(i,t)});break;case"out-in":n.remove(i,function(){e.$before(n.anchor,t)});break;default:n.remove(i),e.$before(n.anchor,t)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var e in this.cache)this.cache[e].$destroy();this.cache=null}}},Dr=ji._propBindingModes,Sr={},Vr=/^[$_a-zA-Z]+[\w$]*$/,Pr=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,Rr=ji._propBindingModes,Mr={bind:function(){var e=this.vm,t=e._context,n=this.descriptor.prop,i=n.path,o=n.parentPath,r=n.mode===Rr.TWO_WAY,s=this.parentWatcher=new Qe(t,o,function(t){Ot(e,n,t)},{twoWay:r,filters:n.filters,scope:this._scope});if(Nt(e,n,s.value),r){var a=this;e.$once("pre-hook:created",function(){a.childWatcher=new Qe(e,i,function(e){s.set(e)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},Fr=[],Lr=!1,Ir="transition",Hr="animation",zr=Zn+"Duration",Br=ei+"Duration",Ur=zn&&window.requestAnimationFrame,Wr=Ur?function(e){Ur(function(){Ur(e)})}:function(e){setTimeout(e,50)},qr=Mt.prototype;qr.enter=function(e,t){this.cancelPending(),this.callHook("beforeEnter"),this.cb=t,ee(this.el,this.enterClass),e(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,Pt(this.enterNextTick))},qr.enterNextTick=function(){var e=this;this.justEntered=!0,Wr(function(){e.justEntered=!1});var t=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===Ir&&te(this.el,this.enterClass):n===Ir?(te(this.el,this.enterClass),this.setupCssCb(Xn,t)):n===Hr?this.setupCssCb(ti,t):t()},qr.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,te(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},qr.leave=function(e,t){this.cancelPending(),this.callHook("beforeLeave"),this.op=e,this.cb=t,ee(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():Pt(this.leaveNextTick)))},qr.leaveNextTick=function(){var e=this.getCssTransitionType(this.leaveClass);if(e){var t=e===Ir?Xn:ti;this.setupCssCb(t,this.leaveDone)}else this.leaveDone()},qr.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),te(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},qr.cancelPending=function(){this.op=this.cb=null;var e=!1;this.pendingCssCb&&(e=!0,K(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(e=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),e&&(te(this.el,this.enterClass),te(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},qr.callHook=function(e){this.hooks&&this.hooks[e]&&this.hooks[e].call(this.vm,this.el)},qr.callHookWithCb=function(e){var t=this.hooks&&this.hooks[e];t&&(t.length>1&&(this.pendingJsCb=k(this[e+"Done"])),t.call(this.vm,this.el,this.pendingJsCb))},qr.getCssTransitionType=function(e){if(!(!Xn||document.hidden||this.hooks&&this.hooks.css===!1||Ft(this.el))){var t=this.type||this.typeCache[e];if(t)return t;var n=this.el.style,i=window.getComputedStyle(this.el),o=n[zr]||i[zr];if(o&&"0s"!==o)t=Ir;else{var r=n[Br]||i[Br];r&&"0s"!==r&&(t=Hr)}return t&&(this.typeCache[e]=t),t}},qr.setupCssCb=function(e,t){this.pendingCssEvent=e;var n=this,i=this.el,o=this.pendingCssCb=function(r){r.target===i&&(K(i,e,o),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&t&&t())};G(i,e,o)};var Jr={priority:Qo,update:function(e,t){var n=this.el,i=me(this.vm.$options,"transitions",e);e=e||"v",t=t||"v",n.__v_trans=new Mt(n,e,i,this.vm),te(n,t+"-transition"),ee(n,e+"-transition")}},Qr={style:gr,"class":Tr,component:jr,prop:Mr,transition:Jr},Yr=/^v-bind:|^:/,Gr=/^v-on:|^@/,Kr=/^v-([^:]+)(?:$|:(.*)$)/,Zr=/\.[^\.]+/g,Xr=/^(v-bind:|:)?transition$/,es=1e3,ts=2e3;on.terminal=!0;var ns=/[^\w\-:\.]/,is=Object.freeze({compile:Lt,compileAndLinkProps:Ut,compileRoot:Wt,transclude:un,resolveSlots:vn}),os=/^v-on:|^@/;mn.prototype._bind=function(){var e=this.name,t=this.descriptor;if(("cloak"!==e||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=t.attr||"v-"+e;this.el.removeAttribute(n)}var i=t.def;if("function"==typeof i?this.update=i:g(this,i),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(t.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var o=this;this.update?this._update=function(e,t){o._locked||o.update(e,t)}:this._update=bn;var r=this._preProcess?y(this._preProcess,this):null,s=this._postProcess?y(this._postProcess,this):null,a=this._watcher=new Qe(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:r,postProcess:s,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(a.value)}},mn.prototype._setupParams=function(){if(this.params){var e=this.params;this.params=Object.create(null);for(var t,n,i,o=e.length;o--;)t=d(e[o]),i=f(t),n=B(this.el,t),null!=n?this._setupParamWatcher(i,n):(n=z(this.el,t),null!=n&&(this.params[i]=""===n||n))}},mn.prototype._setupParamWatcher=function(e,t){var n=this,i=!1,o=(this._scope||this.vm).$watch(t,function(t,o){if(n.params[e]=t,i){var r=n.paramWatchers&&n.paramWatchers[e];r&&r.call(n,t,o)}else i=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(o)},mn.prototype._checkStatement=function(){var e=this.expression;if(e&&this.acceptStatement&&!Be(e)){var t=ze(e).get,n=this._scope||this.vm,i=function(e){n.$event=e,t.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},mn.prototype.set=function(e){this.twoWay?this._withLock(function(){this._watcher.set(e)}):"production"!==n.env.NODE_ENV&&Di("Directive.set() can only be used inside twoWaydirectives.")},mn.prototype._withLock=function(e){var t=this;t._locked=!0,e.call(t),oi(function(){t._locked=!1})},mn.prototype.on=function(e,t,n){G(this.el,e,t,n),(this._listeners||(this._listeners=[])).push([e,t])},mn.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,t=this._listeners;if(t)for(e=t.length;e--;)K(this.el,t[e][0],t[e][1]);var i=this._paramUnwatchFns;if(i)for(e=i.length;e--;)i[e]();"production"!==n.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var rs=/[^|]\|[^|]/;Oe(Nn),_n(Nn),gn(Nn),En(Nn),wn(Nn),xn(Nn),kn(Nn),Cn(Nn),$n(Nn);var ss={priority:er,params:["name"],bind:function(){var e=this.params.name||"default",t=this.vm._slotContents&&this.vm._slotContents[e];t&&t.hasChildNodes()?this.compile(t.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(e,t,n){if(e&&t){if(this.el.hasChildNodes()&&1===e.childNodes.length&&1===e.childNodes[0].nodeType&&e.childNodes[0].hasAttribute("v-if")){var i=document.createElement("template");i.setAttribute("v-else",""),i.innerHTML=this.el.innerHTML,i._context=this.vm,e.appendChild(i)}var o=n?n._scope:this._scope;this.unlink=t.$compile(e,n,o,this._frag)}e?Y(this.el,e):J(this.el)},fallback:function(){this.compile(ne(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},as={priority:Ko,params:["name"],paramWatchers:{name:function(e){ir.remove.call(this),e&&this.insert(e)}},bind:function(){this.anchor=se("v-partial"),Y(this.el,this.anchor),this.insert(this.params.name)},insert:function(e){var t=me(this.vm.$options,"partials",e,!0);t&&(this.factory=new ct(this.vm,t),ir.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},cs={slot:ss,partial:as},ls=nr._postProcess,hs=/(\d{3})(?=\d)/g,us={orderBy:Tn,filterBy:An,limitBy:On,json:{read:function(e,t){return"string"==typeof e?e:JSON.stringify(e,null,arguments.length>1?t:2)},write:function(e){try{return JSON.parse(e)}catch(t){return e}}},capitalize:function(e){return e||0===e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},uppercase:function(e){return e||0===e?e.toString().toUpperCase():""},lowercase:function(e){return e||0===e?e.toString().toLowerCase():""},currency:function(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",n=null!=n?n:2;var i=Math.abs(e).toFixed(n),o=n?i.slice(0,-1-n):i,r=o.length%3,s=r>0?o.slice(0,r)+(o.length>3?",":""):"",a=n?i.slice(-1-n):"",c=e<0?"-":"";return c+t+s+o.slice(r).replace(hs,"$1,")+a},pluralize:function(e){var t=_(arguments,1),n=t.length;if(n>1){var i=e%10-1;return i in t?t[i]:t[n-1]}return t[0]+(1===e?"":"s")},debounce:function(e,t){if(e)return t||(t=300),w(e,t)}};Dn(Nn),Nn.version="1.0.26",setTimeout(function(){ji.devtools&&(Bn?Bn.emit("init",Nn):"production"!==n.env.NODE_ENV&&zn&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),e.exports=Nn}).call(t,function(){return this}(),n(19))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdnVlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCA3YzE1OWQxYmQ3ODc2Y2U1Nzg2MiIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19yb290LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldE5hdGl2ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc09iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc09iamVjdExpa2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX0xpc3RDYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYXNzb2NJbmRleE9mLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19nZXRNYXBEYXRhLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc0tleS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbmF0aXZlQ3JlYXRlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL190b0tleS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc0xlbmd0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc1N5bWJvbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fTWFwQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlyZWN0aXZlcy9zZXQtZm9jdXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21peGlucy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fTWFwLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19TdGFjay5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fU3ltYm9sLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSGFzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSXNFcXVhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVByb3BlcnR5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19jYXN0UGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZXF1YWxBcnJheXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2lzSG9zdE9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNJbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNTdHJpY3RDb21wYXJhYmxlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19tYXRjaGVzU3RyaWN0Q29tcGFyYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fdG9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZGVmZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNBcmd1bWVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNBcnJheUxpa2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNTdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gva2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC90b0ludGVnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvdG9OdW1iZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9WdWUvZGlzdC92dWUuY29tbW9uLmpzIiwid2VicGFjazovLy9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vL2luZGV4LnZ1ZT82MWU2Iiwid2VicGFjazovLy9pbmRleC52dWU/MjkxNyIsIndlYnBhY2s6Ly8vYWxlcnQtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlIiwid2VicGFjazovLy9sZWdhbC1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vb3ZlcmxheS1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vc3Bpbm5lci1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vc3RlcC10cmFja2VyLXBhZ2UudnVlIiwid2VicGFjazovLy90YWJzLXBhZ2UudnVlIiwid2VicGFjazovLy9pbmRleC52dWU/OWU4MiIsIndlYnBhY2s6Ly8vaW5kZXgudnVlPzlhOTUiLCJ3ZWJwYWNrOi8vL2xlZ2FsLWNvbnRhaW5lci52dWUiLCJ3ZWJwYWNrOi8vL2xlZ2FsLWNvdW50ZXIudnVlIiwid2VicGFjazovLy9vdmVybGF5LWNvbnRhaW5lci52dWUiLCJ3ZWJwYWNrOi8vL292ZXJsYXkudnVlIiwid2VicGFjazovLy9pbmRleC52dWU/ZGFiYiIsIndlYnBhY2s6Ly8vaW5kZXgudnVlPzMxZWIiLCJ3ZWJwYWNrOi8vL3RhYi52dWUiLCJ3ZWJwYWNrOi8vL3RhYnMudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvcm91dGVzLmpzIiwid2VicGFjazovLy8uL3NyYy9kaXJlY3RpdmVzL292ZXJsYXktb3BlbmVyLmpzIiwid2VicGFjazovLy8uL3NyYy9tYWluLmpzIiwid2VicGFjazovLy8uL3NyYy9taXhpbnMvZXZlbnRzLmpzIiwid2VicGFjazovLy8uL3NyYy9taXhpbnMveGhyLXJlc3BvbnNlLmpzIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlPzgzZDQiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpZGUtbmF2L2luZGV4LnZ1ZT9kOWVhIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWU/NWJlNSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2dldC1zdGFydGVkLnZ1ZT8wMDg0Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZT9jOTk0Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZT82NWM3Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2h5LWhlYWRlci9pbmRleC52dWU/ZGQ4MCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIudnVlPzQ0NmUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWU/ZTAzMSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZT8zZTgzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS52dWU/YjU3NCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL2luZGV4LnZ1ZT83ZjIzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWU/ZGVmZCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy52dWU/YjY0ZiIsIndlYnBhY2s6Ly8vLi9+L2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi93aGF0d2ctZmV0Y2gvZmV0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL2xvZ28ucG5nIiwid2VicGFjazovLy8uL34vbG9kYXNoL19EYXRhVmlldy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fSGFzaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fUHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fU2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19TZXRDYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fVWludDhBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fV2Vha01hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYXBwbHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2FycmF5U29tZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZURlbGF5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlRmluZEluZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSGFzSW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VJc0VxdWFsRGVlcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZUlzTWF0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VJc05hdGl2ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZUl0ZXJhdGVlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlS2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZU1hdGNoZXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VNYXRjaGVzUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VQcm9wZXJ0eURlZXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VUaW1lcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVRvU3RyaW5nLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19jaGVja0dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fY29yZUpzRGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZXF1YWxCeVRhZy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZXF1YWxPYmplY3RzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19nZXRMZW5ndGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldE1hdGNoRGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZ2V0UHJvdG90eXBlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19nZXRUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldFZhbHVlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19oYXNQYXRoLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19oYXNoQ2xlYXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc2hEZWxldGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc2hHZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc2hIYXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc2hTZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2luZGV4S2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNLZXlhYmxlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc01hc2tlZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNQcm90b3R5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2xpc3RDYWNoZUNsZWFyLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19saXN0Q2FjaGVEZWxldGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2xpc3RDYWNoZUdldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbGlzdENhY2hlSGFzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19saXN0Q2FjaGVTZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX21hcENhY2hlQ2xlYXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX21hcENhY2hlRGVsZXRlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19tYXBDYWNoZUdldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbWFwQ2FjaGVIYXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX21hcENhY2hlU2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19tYXBUb0FycmF5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19zZXRDYWNoZUFkZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc2V0Q2FjaGVIYXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3NldFRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3N0YWNrQ2xlYXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3N0YWNrRGVsZXRlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19zdGFja0dldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc3RhY2tIYXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3N0YWNrU2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19zdHJpbmdUb1BhdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZXEuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZmluZEluZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2dldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9oYXNJbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pZGVudGl0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc0FycmF5TGlrZU9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc1R5cGVkQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvbWVtb2l6ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9ub3cuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvcHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvcmVzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC90b0Zpbml0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC90b1N0cmluZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3ByaXNtanMvcHJpc20uanMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9hcGktdGFibGUuaHRtbCIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvc2lkZS1uYXYvc2lkZS1uYXYuaHRtbCIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvc2l0ZS1oZWFkZXIvc2l0ZS1oZWFkZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2FsZXJ0LXBhZ2UudnVlPzkxZjMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZT8wMGM1Iiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvZ2V0LXN0YXJ0ZWQudnVlP2FkNTIiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9oeS1oZWFkZXItcGFnZS52dWU/OGNjNSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2xlZ2FsLW92ZXJsYXktcGFnZS52dWU/NWIxMyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2xlZ2FsLXBhZ2UudnVlPzc2OGUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9vdmVybGF5LXBhZ2UudnVlPzc4ZjciLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9zcGlubmVyLXBhZ2UudnVlPzBmNTIiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9zdGVwLXRyYWNrZXItcGFnZS52dWU/ZjBlZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL3RhYnMtcGFnZS52dWU/YTdmMiIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9hbGVydC9hbGVydC5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2NvbGxhcHNhYmxlLXBhbmVsLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvaHktaGVhZGVyL2h5LWhlYWRlci5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvdW50ZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc3Bpbm5lci9zcGlubmVyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL3N0ZXAtdHJhY2tlci5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYi90YWIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy5odG1sIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2FsZXJ0LXBhZ2UudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9nZXQtc3RhcnRlZC52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9oeS1oZWFkZXItcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9sZWdhbC1vdmVybGF5LXBhZ2UudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvbGVnYWwtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9vdmVybGF5LXBhZ2UudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3Mvc3Bpbm5lci1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL3N0ZXAtdHJhY2tlci1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL3RhYnMtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9oeS1oZWFkZXIvaW5kZXgudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LWNvbnRhaW5lci52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvaW5kZXgudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYi90YWIudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZSIsIndlYnBhY2s6Ly8vLi9+L3Z1ZS1yb3V0ZXIvZGlzdC92dWUtcm91dGVyLmpzIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlPzc5MjYiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpZGUtbmF2L2luZGV4LnZ1ZT80YTQ3Iiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWU/NTU2OSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2dldC1zdGFydGVkLnZ1ZT80MWM2Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZT8wMjc1Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZT9kMWM0Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2h5LWhlYWRlci9pbmRleC52dWU/NGNkNCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIudnVlPzM1NzYiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWU/ZWIzOSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZT8xOTcyIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS52dWU/YzM4MyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL2luZGV4LnZ1ZT82MzM1Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWU/MDFlMyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy52dWU/ZjkxZiIsIndlYnBhY2s6Ly8vLi9+L3Z1ZS9kaXN0L3Z1ZS5jb21tb24uanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL2FtZC1kZWZpbmUuanMiLCJ3ZWJwYWNrOi8vLyh3ZWJwYWNrKS9idWlsZGluL21vZHVsZS5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJwYXJlbnRKc29ucEZ1bmN0aW9uIiwid2luZG93IiwiY2h1bmtJZHMiLCJtb3JlTW9kdWxlcyIsImNodW5rSWQiLCJpIiwiY2FsbGJhY2tzIiwibGVuZ3RoIiwiaW5zdGFsbGVkQ2h1bmtzIiwicHVzaCIsImFwcGx5Iiwic2hpZnQiLCIwIiwiMSIsIjIiLCJlIiwiY2FsbGJhY2siLCJ1bmRlZmluZWQiLCJoZWFkIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsInNjcmlwdCIsImNyZWF0ZUVsZW1lbnQiLCJ0eXBlIiwiY2hhcnNldCIsImFzeW5jIiwic3JjIiwicCIsImFwcGVuZENoaWxkIiwibSIsImMiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0Iiwib2JqIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJfVnVlIiwiX1Z1ZTIiLCJfdnVlUm91dGVyIiwiX3Z1ZVJvdXRlcjIiLCJfcm91dGVzIiwiX3JvdXRlczIiLCJfaHlicmlkVGhvcml1bSIsIl9oeWJyaWRUaG9yaXVtMiIsIl9wcmlzbWpzIiwiX3ByaXNtanMyIiwiX2luZGV4IiwiX2luZGV4MiIsIl9pbmRleDMiLCJfaW5kZXg0IiwiY29uZmlnIiwiZGVidWciLCJ1c2UiLCJyb3V0ZXIiLCJBcHAiLCJleHRlbmQiLCJjb21wb25lbnRzIiwiU2lkZU5hdiIsIlNpdGVIZWFkZXIiLCJkYXRhIiwibGlnZXJFbmRQb2ludCIsImxpZ2VyQXBwbGljYXRpb25LZXkiLCJtYXAiLCJhZnRlckVhY2giLCJzZXRUaW1lb3V0IiwiaGlnaGxpZ2h0QWxsIiwicmVkaXJlY3QiLCIqIiwic3RhcnQiLCJsaXN0IiwidG9TdHJpbmciLCJyZXN1bHQiLCJ0aGlzIiwiaXRlbSIsImpvaW4iLCJtZWRpYVF1ZXJ5IiwiYWxyZWFkeUltcG9ydGVkTW9kdWxlcyIsImFkZFN0eWxlc1RvRG9tIiwic3R5bGVzIiwib3B0aW9ucyIsImRvbVN0eWxlIiwic3R5bGVzSW5Eb20iLCJyZWZzIiwiaiIsInBhcnRzIiwiYWRkU3R5bGUiLCJsaXN0VG9TdHlsZXMiLCJuZXdTdHlsZXMiLCJjc3MiLCJtZWRpYSIsInNvdXJjZU1hcCIsInBhcnQiLCJpbnNlcnRTdHlsZUVsZW1lbnQiLCJzdHlsZUVsZW1lbnQiLCJnZXRIZWFkRWxlbWVudCIsImxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wIiwic3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AiLCJpbnNlcnRBdCIsIm5leHRTaWJsaW5nIiwiaW5zZXJ0QmVmb3JlIiwiZmlyc3RDaGlsZCIsIkVycm9yIiwicmVtb3ZlU3R5bGVFbGVtZW50IiwicGFyZW50Tm9kZSIsInJlbW92ZUNoaWxkIiwiaWR4IiwiaW5kZXhPZiIsInNwbGljZSIsImNyZWF0ZVN0eWxlRWxlbWVudCIsInVwZGF0ZSIsInJlbW92ZSIsInNpbmdsZXRvbiIsInN0eWxlSW5kZXgiLCJzaW5nbGV0b25Db3VudGVyIiwic2luZ2xldG9uRWxlbWVudCIsImFwcGx5VG9TaW5nbGV0b25UYWciLCJiaW5kIiwiYXBwbHlUb1RhZyIsIm5ld09iaiIsImluZGV4Iiwic3R5bGVTaGVldCIsImNzc1RleHQiLCJyZXBsYWNlVGV4dCIsImNzc05vZGUiLCJjcmVhdGVUZXh0Tm9kZSIsImNoaWxkTm9kZXMiLCJzZXRBdHRyaWJ1dGUiLCJzb3VyY2VzIiwiYnRvYSIsInVuZXNjYXBlIiwiZW5jb2RlVVJJQ29tcG9uZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsIm1lbW9pemUiLCJmbiIsIm1lbW8iLCJhcmd1bWVudHMiLCJpc09sZElFIiwidGVzdCIsIm5hdmlnYXRvciIsInVzZXJBZ2VudCIsInRvTG93ZXJDYXNlIiwibmV3TGlzdCIsIm1heVJlbW92ZSIsInRleHRTdG9yZSIsInJlcGxhY2VtZW50IiwiZmlsdGVyIiwiQm9vbGVhbiIsImdsb2JhbCIsImNoZWNrR2xvYmFsIiwiZnJlZUdsb2JhbCIsImZyZWVTZWxmIiwic2VsZiIsInRoaXNHbG9iYWwiLCJyb290IiwiRnVuY3Rpb24iLCJpc0FycmF5IiwiQXJyYXkiLCJfX3Z1ZV9zY3JpcHRfXyIsIl9fdnVlX3RlbXBsYXRlX18iLCJ0ZW1wbGF0ZSIsImdldE5hdGl2ZSIsIm9iamVjdCIsImtleSIsInZhbHVlIiwiZ2V0VmFsdWUiLCJiYXNlSXNOYXRpdmUiLCJpc09iamVjdCIsImlzT2JqZWN0TGlrZSIsIkxpc3RDYWNoZSIsImVudHJpZXMiLCJjbGVhciIsImVudHJ5Iiwic2V0IiwibGlzdENhY2hlQ2xlYXIiLCJsaXN0Q2FjaGVEZWxldGUiLCJsaXN0Q2FjaGVHZXQiLCJsaXN0Q2FjaGVIYXMiLCJsaXN0Q2FjaGVTZXQiLCJwcm90b3R5cGUiLCJnZXQiLCJoYXMiLCJhc3NvY0luZGV4T2YiLCJhcnJheSIsImVxIiwiZ2V0TWFwRGF0YSIsIl9fZGF0YV9fIiwiaXNLZXlhYmxlIiwiaXNLZXkiLCJpc1N5bWJvbCIsInJlSXNQbGFpblByb3AiLCJyZUlzRGVlcFByb3AiLCJPYmplY3QiLCJuYXRpdmVDcmVhdGUiLCJ0b0tleSIsIklORklOSVRZIiwiaXNMZW5ndGgiLCJNQVhfU0FGRV9JTlRFR0VSIiwib2JqZWN0VG9TdHJpbmciLCJzeW1ib2xUYWciLCJvYmplY3RQcm90byIsIk1hcENhY2hlIiwibWFwQ2FjaGVDbGVhciIsIm1hcENhY2hlRGVsZXRlIiwibWFwQ2FjaGVHZXQiLCJtYXBDYWNoZUhhcyIsIm1hcENhY2hlU2V0IiwiaXNGdW5jdGlvbiIsInRhZyIsImZ1bmNUYWciLCJnZW5UYWciLCJjbGVhblVwTmV4dFRpY2siLCJkcmFpbmluZyIsImN1cnJlbnRRdWV1ZSIsInF1ZXVlIiwiY29uY2F0IiwicXVldWVJbmRleCIsImRyYWluUXVldWUiLCJ0aW1lb3V0IiwiY2FjaGVkU2V0VGltZW91dCIsImxlbiIsInJ1biIsImNhY2hlZENsZWFyVGltZW91dCIsIkl0ZW0iLCJmdW4iLCJub29wIiwicHJvY2VzcyIsImNsZWFyVGltZW91dCIsIm5leHRUaWNrIiwiYXJncyIsInRpdGxlIiwiYnJvd3NlciIsImVudiIsImFyZ3YiLCJ2ZXJzaW9uIiwidmVyc2lvbnMiLCJvbiIsImFkZExpc3RlbmVyIiwib25jZSIsIm9mZiIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiZW1pdCIsImJpbmRpbmciLCJuYW1lIiwiY3dkIiwiY2hkaXIiLCJkaXIiLCJ1bWFzayIsImRlZmluZVByb3BlcnR5IiwiX2RlZmVyIiwiX2RlZmVyMiIsIm5ld1ZhbCIsIl90aGlzIiwiZWwiLCJ0YWJJbmRleCIsImZvY3VzIiwiX2V2ZW50cyIsIl9ldmVudHMyIiwiX3hoclJlc3BvbnNlIiwiX3hoclJlc3BvbnNlMiIsIk1hcCIsIlN0YWNrIiwic3RhY2tDbGVhciIsInN0YWNrRGVsZXRlIiwic3RhY2tHZXQiLCJzdGFja0hhcyIsInN0YWNrU2V0IiwiU3ltYm9sIiwiYmFzZUdldCIsInBhdGgiLCJjYXN0UGF0aCIsImJhc2VIYXMiLCJoYXNPd25Qcm9wZXJ0eSIsImdldFByb3RvdHlwZSIsImJhc2VJc0VxdWFsIiwib3RoZXIiLCJjdXN0b21pemVyIiwiYml0bWFzayIsInN0YWNrIiwiYmFzZUlzRXF1YWxEZWVwIiwiYmFzZVByb3BlcnR5Iiwic3RyaW5nVG9QYXRoIiwiZXF1YWxBcnJheXMiLCJlcXVhbEZ1bmMiLCJpc1BhcnRpYWwiLCJQQVJUSUFMX0NPTVBBUkVfRkxBRyIsImFyckxlbmd0aCIsIm90aExlbmd0aCIsInN0YWNrZWQiLCJzZWVuIiwiVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyIsIlNldENhY2hlIiwiYXJyVmFsdWUiLCJvdGhWYWx1ZSIsImNvbXBhcmVkIiwiYXJyYXlTb21lIiwib3RoSW5kZXgiLCJhZGQiLCJpc0hvc3RPYmplY3QiLCJpc0luZGV4IiwicmVJc1VpbnQiLCJpc1N0cmljdENvbXBhcmFibGUiLCJtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSIsInNyY1ZhbHVlIiwidG9Tb3VyY2UiLCJmdW5jIiwiZnVuY1RvU3RyaW5nIiwiYmFzZURlbGF5IiwicmVzdCIsImRlZmVyIiwiaXNBcmd1bWVudHMiLCJpc0FycmF5TGlrZU9iamVjdCIsInByb3BlcnR5SXNFbnVtZXJhYmxlIiwiYXJnc1RhZyIsImlzQXJyYXlMaWtlIiwiZ2V0TGVuZ3RoIiwiaXNTdHJpbmciLCJzdHJpbmdUYWciLCJrZXlzIiwiaXNQcm90byIsImlzUHJvdG90eXBlIiwiYmFzZUtleXMiLCJpbmRleGVzIiwiaW5kZXhLZXlzIiwic2tpcEluZGV4ZXMiLCJ0b0ludGVnZXIiLCJ0b0Zpbml0ZSIsInJlbWFpbmRlciIsInRvTnVtYmVyIiwiTkFOIiwidmFsdWVPZiIsInJlcGxhY2UiLCJyZVRyaW0iLCJpc0JpbmFyeSIsInJlSXNCaW5hcnkiLCJyZUlzT2N0YWwiLCJmcmVlUGFyc2VJbnQiLCJzbGljZSIsInJlSXNCYWRIZXgiLCJwYXJzZUludCIsInZhbCIsImhhc093biIsIl9pc1Z1ZSIsIl9kYXRhIiwib2IiLCJfX29iX18iLCJjb252ZXJ0IiwiZGVwIiwibm90aWZ5Iiwidm1zIiwidm0iLCJfcHJveHkiLCJfZGlnZXN0IiwiZGVsIiwiX3VucHJveHkiLCJpc0xpdGVyYWwiLCJleHAiLCJsaXRlcmFsVmFsdWVSRSIsImlzUmVzZXJ2ZWQiLCJzdHIiLCJjaGFyQ29kZUF0IiwiX3RvU3RyaW5nIiwicGFyc2VkIiwiTnVtYmVyIiwiaXNOYU4iLCJ0b0Jvb2xlYW4iLCJzdHJpcFF1b3RlcyIsImEiLCJiIiwiY2FtZWxpemUiLCJjYW1lbGl6ZVJFIiwidG9VcHBlciIsIl8iLCJ0b1VwcGVyQ2FzZSIsImh5cGhlbmF0ZSIsImh5cGhlbmF0ZVJFIiwiY2xhc3NpZnkiLCJjbGFzc2lmeVJFIiwiY3R4IiwibCIsInRvQXJyYXkiLCJyZXQiLCJ0byIsImZyb20iLCJpc1BsYWluT2JqZWN0IiwiT0JKRUNUX1NUUklORyIsImRlZiIsImVudW1lcmFibGUiLCJ3cml0YWJsZSIsImNvbmZpZ3VyYWJsZSIsIl9kZWJvdW5jZSIsIndhaXQiLCJjb250ZXh0IiwidGltZXN0YW1wIiwibGF0ZXIiLCJsYXN0IiwiRGF0ZSIsIm5vdyIsImFyciIsImNhbmNlbGxhYmxlIiwiY2IiLCJjYW5jZWxsZWQiLCJjYW5jZWwiLCJsb29zZUVxdWFsIiwiQ2FjaGUiLCJsaW1pdCIsInNpemUiLCJ0YWlsIiwiX2tleW1hcCIsImNyZWF0ZSIsInB1c2hGaWx0ZXIiLCJsYXN0RmlsdGVySW5kZXgiLCJ0cmltIiwidG9rZW5zIiwibWF0Y2giLCJmaWx0ZXJUb2tlblJFIiwicHJvY2Vzc0ZpbHRlckFyZyIsImZpbHRlcnMiLCJhcmciLCJyZXNlcnZlZEFyZ1JFIiwiZHluYW1pYyIsInN0cmlwcGVkIiwicGFyc2VEaXJlY3RpdmUiLCJzIiwiaGl0IiwiY2FjaGUkMSIsImluU2luZ2xlIiwiaW5Eb3VibGUiLCJjdXJseSIsInNxdWFyZSIsInBhcmVuIiwicHJldiIsImV4cHJlc3Npb24iLCJwdXQiLCJlc2NhcGVSZWdleCIsInJlZ2V4RXNjYXBlUkUiLCJjb21waWxlUmVnZXgiLCJvcGVuIiwiZGVsaW1pdGVycyIsImNsb3NlIiwidW5zYWZlT3BlbiIsInVuc2FmZURlbGltaXRlcnMiLCJ1bnNhZmVDbG9zZSIsInRhZ1JFIiwiUmVnRXhwIiwiaHRtbFJFIiwiY2FjaGUiLCJwYXJzZVRleHQiLCJ0ZXh0IiwiaHRtbCIsImZpcnN0Iiwib25lVGltZSIsImxhc3RJbmRleCIsImV4ZWMiLCJ0b2tlbnNUb0V4cCIsInRva2VuIiwiZm9ybWF0VG9rZW4iLCJzaW5nbGUiLCIkZXZhbCIsImlubGluZUZpbHRlcnMiLCJmaWx0ZXJSRSIsImFwcGVuZFdpdGhUcmFuc2l0aW9uIiwidGFyZ2V0IiwiYXBwbHlUcmFuc2l0aW9uIiwiYmVmb3JlV2l0aFRyYW5zaXRpb24iLCJiZWZvcmUiLCJyZW1vdmVXaXRoVHJhbnNpdGlvbiIsImRpcmVjdGlvbiIsIm9wIiwidHJhbnNpdGlvbiIsIl9fdl90cmFucyIsImhvb2tzIiwidHJhbnNpdGlvbkVuZEV2ZW50IiwiX2lzQ29tcGlsZWQiLCIkcGFyZW50IiwiYWN0aW9uIiwicXVlcnkiLCJzZWxlY3RvciIsInF1ZXJ5U2VsZWN0b3IiLCJOT0RFX0VOViIsIndhcm4iLCJpbkRvYyIsIm5vZGUiLCJkb2MiLCJvd25lckRvY3VtZW50IiwiZG9jdW1lbnRFbGVtZW50IiwicGFyZW50Iiwibm9kZVR5cGUiLCJjb250YWlucyIsImdldEF0dHIiLCJfYXR0ciIsImdldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsImdldEJpbmRBdHRyIiwiaGFzQmluZEF0dHIiLCJoYXNBdHRyaWJ1dGUiLCJhZnRlciIsInByZXBlbmQiLCJyZXBsYWNlQ2hpbGQiLCJldmVudCIsInVzZUNhcHR1cmUiLCJhZGRFdmVudExpc3RlbmVyIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImdldENsYXNzIiwiY2xhc3NuYW1lIiwiY2xhc3NOYW1lIiwiYmFzZVZhbCIsInNldENsYXNzIiwiY2xzIiwiaXNJRTkiLCJuYW1lc3BhY2VVUkkiLCJhZGRDbGFzcyIsImNsYXNzTGlzdCIsImN1ciIsInJlbW92ZUNsYXNzIiwidGFyIiwiZXh0cmFjdENvbnRlbnQiLCJhc0ZyYWdtZW50IiwiY2hpbGQiLCJyYXdDb250ZW50IiwiaXNUZW1wbGF0ZSIsImlzRnJhZ21lbnQiLCJjb250ZW50IiwiaGFzQ2hpbGROb2RlcyIsInRyaW1Ob2RlIiwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudCIsImlzVHJpbW1hYmxlIiwibGFzdENoaWxkIiwidGFnTmFtZSIsImNyZWF0ZUFuY2hvciIsInBlcnNpc3QiLCJhbmNob3IiLCJjcmVhdGVDb21tZW50IiwiX192X2FuY2hvciIsImZpbmRSZWYiLCJoYXNBdHRyaWJ1dGVzIiwiYXR0cnMiLCJhdHRyaWJ1dGVzIiwicmVmUkUiLCJtYXBOb2RlUmFuZ2UiLCJlbmQiLCJuZXh0IiwicmVtb3ZlTm9kZVJhbmdlIiwiZnJhZyIsIm9uUmVtb3ZlZCIsInJlbW92ZWQiLCJkb25lIiwibm9kZXMiLCJnZXRPdXRlckhUTUwiLCJvdXRlckhUTUwiLCJjb250YWluZXIiLCJjbG9uZU5vZGUiLCJpbm5lckhUTUwiLCJjaGVja0NvbXBvbmVudEF0dHIiLCJoYXNBdHRycyIsImNvbW1vblRhZ1JFIiwicmVzZXJ2ZWRUYWdSRSIsImdldElzQmluZGluZyIsInJlc29sdmVBc3NldCIsImlzIiwiZXhwZWN0ZWRUYWciLCJfY29tcG9uZW50TmFtZU1hcCIsImlzVW5rbm93bkVsZW1lbnQiLCJtZXJnZURhdGEiLCJ0b1ZhbCIsImZyb21WYWwiLCJtZXJnZUFzc2V0cyIsInBhcmVudFZhbCIsImNoaWxkVmFsIiwicmVzIiwiZ3VhcmRBcnJheUFzc2V0cyIsImd1YXJkQ29tcG9uZW50cyIsImlkcyIsIlZ1ZSIsImd1YXJkUHJvcHMiLCJwcm9wcyIsImFzc2V0cyIsImFzc2V0IiwibWVyZ2VPcHRpb25zIiwibWVyZ2VGaWVsZCIsInN0cmF0Iiwic3RyYXRzIiwiZGVmYXVsdFN0cmF0IiwicHJvcHNEYXRhIiwibWl4aW5zIiwibWl4aW4iLCJtaXhpbk9wdGlvbnMiLCJ3YXJuTWlzc2luZyIsImNhbWVsaXplZElkIiwiY2hhckF0IiwiRGVwIiwidWlkJDEiLCJzdWJzIiwid2l0aG91dENvbnZlcnNpb24iLCJzaG91bGRDb252ZXJ0IiwiT2JzZXJ2ZXIiLCJhdWdtZW50IiwiaGFzUHJvdG8iLCJwcm90b0F1Z21lbnQiLCJjb3B5QXVnbWVudCIsImFycmF5TWV0aG9kcyIsImFycmF5S2V5cyIsIm9ic2VydmVBcnJheSIsIndhbGsiLCJfX3Byb3RvX18iLCJvYnNlcnZlIiwiaXNFeHRlbnNpYmxlIiwiYWRkVm0iLCJkZWZpbmVSZWFjdGl2ZSIsInByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiZ2V0dGVyIiwic2V0dGVyIiwiY2hpbGRPYiIsImRlcGVuZCIsImluaXRNaXhpbiIsIl9pbml0IiwiJGVsIiwiJHJvb3QiLCIkY2hpbGRyZW4iLCIkcmVmcyIsIiRlbHMiLCJfd2F0Y2hlcnMiLCJfZGlyZWN0aXZlcyIsIl91aWQiLCJ1aWQiLCJfZXZlbnRzQ291bnQiLCJfaXNGcmFnbWVudCIsIl9mcmFnbWVudCIsIl9mcmFnbWVudFN0YXJ0IiwiX2ZyYWdtZW50RW5kIiwiX2lzRGVzdHJveWVkIiwiX2lzUmVhZHkiLCJfaXNBdHRhY2hlZCIsIl9pc0JlaW5nRGVzdHJveWVkIiwiX3ZGb3JSZW1vdmluZyIsIl91bmxpbmtGbiIsIl9jb250ZXh0IiwiX3Njb3BlIiwiX2ZyYWciLCJjaGlsZHJlbiIsIiRvcHRpb25zIiwiY29uc3RydWN0b3IiLCJfdXBkYXRlUmVmIiwiX2NhbGxIb29rIiwiX2luaXRTdGF0ZSIsIl9pbml0RXZlbnRzIiwiJG1vdW50IiwiZ2V0UGF0aENoYXJUeXBlIiwiY2giLCJjb2RlIiwiZm9ybWF0U3ViUGF0aCIsInRyaW1tZWQiLCJwYXJzZSIsIm1heWJlVW5lc2NhcGVRdW90ZSIsIm5leHRDaGFyIiwibW9kZSIsIklOX1NJTkdMRV9RVU9URSIsIklOX0RPVUJMRV9RVU9URSIsIm5ld0NoYXIiLCJhY3Rpb25zIiwiQVBQRU5EIiwidHlwZU1hcCIsIkJFRk9SRV9QQVRIIiwic3ViUGF0aERlcHRoIiwiUFVTSCIsIklOQ19TVUJfUEFUSF9ERVBUSCIsIlBVU0hfU1VCX1BBVEgiLCJJTl9TVUJfUEFUSCIsInBhdGhTdGF0ZU1hY2hpbmUiLCJFUlJPUiIsIkFGVEVSX1BBVEgiLCJyYXciLCJwYXJzZVBhdGgiLCJwYXRoQ2FjaGUiLCJnZXRQYXRoIiwicGFyc2VFeHByZXNzaW9uIiwic2V0UGF0aCIsIm9yaWdpbmFsIiwid2Fybk5vbkV4aXN0ZW50IiwiJHNldCIsInNhdmUiLCJzYXZlZCIsIm5ld2xpbmVSRSIsInJld3JpdGUiLCJhbGxvd2VkS2V5d29yZHNSRSIsInJlc3RvcmVSRSIsInJlc3RvcmUiLCJjb21waWxlR2V0dGVyIiwiaW1wcm9wZXJLZXl3b3Jkc1JFIiwiYm9keSIsInNhdmVSRSIsIndzUkUiLCJpZGVudFJFIiwibWFrZUdldHRlckZuIiwiY29tcGlsZVNldHRlciIsInNjb3BlIiwibmVlZFNldCIsImV4cHJlc3Npb25DYWNoZSIsImlzU2ltcGxlUGF0aCIsInBhdGhUZXN0UkUiLCJsaXRlcmFsVmFsdWVSRSQxIiwicmVzZXRCYXRjaGVyU3RhdGUiLCJ1c2VyUXVldWUiLCJjaXJjdWxhciIsIndhaXRpbmciLCJmbHVzaEJhdGNoZXJRdWV1ZSIsIl9hZ2FpbiIsInJ1bkJhdGNoZXJRdWV1ZSIsImRldnRvb2xzIiwid2F0Y2hlciIsIl9tYXhVcGRhdGVDb3VudCIsInB1c2hXYXRjaGVyIiwicSIsInVzZXIiLCJXYXRjaGVyIiwiZXhwT3JGbiIsImlzRm4iLCJ1aWQkMiIsImFjdGl2ZSIsImRpcnR5IiwibGF6eSIsImRlcHMiLCJuZXdEZXBzIiwiZGVwSWRzIiwiX1NldCIsIm5ld0RlcElkcyIsInByZXZFcnJvciIsInR3b1dheSIsInF1ZXVlZCIsInNoYWxsb3ciLCJ0cmF2ZXJzZSIsInNlZW5PYmplY3RzIiwiaXNBIiwiaXNPIiwiZGVwSWQiLCJpc1JlYWxUZW1wbGF0ZSIsInN0cmluZ1RvRnJhZ21lbnQiLCJ0ZW1wbGF0ZVN0cmluZyIsImNhY2hlS2V5IiwidGVtcGxhdGVDYWNoZSIsInRhZ01hdGNoIiwidGFnUkUkMSIsImVudGl0eU1hdGNoIiwiZW50aXR5UkUiLCJjb21tZW50TWF0Y2giLCJjb21tZW50UkUiLCJ3cmFwIiwiZWZhdWx0IiwiZGVwdGgiLCJwcmVmaXgiLCJzdWZmaXgiLCJub2RlVG9GcmFnbWVudCIsInRleHRDb250ZW50IiwiY2xvbmVkTm9kZSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjbG9uZWQiLCJoYXNCcm9rZW5UZW1wbGF0ZSIsInRlbXBDbG9uZSIsImhhc1RleHRhcmVhQ2xvbmVCdWciLCJwYXJzZVRlbXBsYXRlIiwic2hvdWxkQ2xvbmUiLCJpZFNlbGVjdG9yQ2FjaGUiLCJnZXRFbGVtZW50QnlJZCIsIkZyYWdtZW50IiwibGlua2VyIiwiaG9zdCIsInBhcmVudEZyYWciLCJjaGlsZEZyYWdzIiwiaW5zZXJ0ZWQiLCJ1bmxpbmsiLCJzaW5nbGVCZWZvcmUiLCJzaW5nbGVSZW1vdmUiLCJtdWx0aUJlZm9yZSIsIm11bHRpUmVtb3ZlIiwiX192X2ZyYWciLCJ3aXRoVHJhbnNpdGlvbiIsIm1ldGhvZCIsImNhbGxIb29rIiwiYXR0YWNoIiwic2hvdWxkQ2FsbFJlbW92ZSIsImJlZm9yZVJlbW92ZSIsImRldGFjaCIsImRlc3Ryb3kiLCJGcmFnbWVudEZhY3RvcnkiLCJjaWQiLCJjYWNoZUlkIiwibGlua2VyQ2FjaGUiLCJjb21waWxlIiwiZmluZFByZXZGcmFnIiwicHJldmlvdXNTaWJsaW5nIiwiZm9ySWQiLCJmaW5kVm1Gcm9tRnJhZyIsIl9fdnVlX18iLCJyYW5nZSIsIm4iLCJNYXRoIiwiZmxvb3IiLCJnZXRUcmFja0J5S2V5IiwidHJhY2tCeUtleSIsIm11bHRpIiwiaW5pdCIsInNlbGVjdGVkIiwiX3ZhbHVlIiwiaW5kZXhPZiQxIiwia2V5RmlsdGVyIiwiaGFuZGxlciIsImNvZGVzIiwiY2hhckNvZGUiLCJrZXlDb2RlcyIsImtleUNvZGUiLCJzdG9wRmlsdGVyIiwic3RvcFByb3BhZ2F0aW9uIiwicHJldmVudEZpbHRlciIsInByZXZlbnREZWZhdWx0Iiwic2VsZkZpbHRlciIsImN1cnJlbnRUYXJnZXQiLCJub3JtYWxpemUiLCJwcm9wIiwicHJvcENhY2hlIiwiY2FtZWwiLCJ1cHBlciIsInRlc3RFbCIsInByZWZpeGVkIiwicHJlZml4ZXMiLCJzdHlsZSIsImtlYmFiIiwiY2FtZWxQcmVmaXhlcyIsIm5vcm1hbGl6ZSQxIiwiX2tleSIsImsiLCJzcGxpdCIsImNhbGxBY3RpdmF0ZUhvb2tzIiwiY2FsbGVkIiwidG90YWwiLCJjb21waWxlUHJvcHMiLCJwcm9wT3B0aW9ucyIsImF0dHIiLCJuYW1lcyIsImVtcHR5IiwiaWRlbnRSRSQxIiwicHJvcEJpbmRpbmdNb2RlcyIsIk9ORV9XQVkiLCJUV09fV0FZIiwiT05FX1RJTUUiLCJvcHRpbWl6ZWRMaXRlcmFsIiwic2V0dGFibGVQYXRoUkUiLCJwYXJlbnRQYXRoIiwibG93ZXJDYXNlTmFtZSIsInJlcXVpcmVkIiwibWFrZVByb3BzTGlua0ZuIiwiX3Byb3BzIiwiaW5saW5lUHJvcHMiLCJpbml0UHJvcCIsIiRnZXQiLCJfYmluZERpciIsInByb3BEZWYiLCJwcm9jZXNzUHJvcFZhbHVlIiwicmF3VmFsdWUiLCJpc1NpbXBsZSIsImdldFByb3BEZWZhdWx0VmFsdWUiLCJjb2VyY2VQcm9wIiwiY29lcmNlZCIsImFzc2VydFByb3AiLCJ1cGRhdGVQcm9wIiwidmFsaWQiLCJleHBlY3RlZFR5cGVzIiwiYXNzZXJ0ZWRUeXBlIiwiYXNzZXJ0VHlwZSIsImV4cGVjdGVkVHlwZSIsImZvcm1hdFR5cGUiLCJmb3JtYXRWYWx1ZSIsInZhbGlkYXRvciIsImNvZXJjZSIsIlN0cmluZyIsInB1c2hKb2IiLCJqb2IiLCJxdWV1ZSQxIiwiZmx1c2giLCJmIiwib2Zmc2V0SGVpZ2h0IiwiVHJhbnNpdGlvbiIsImVudGVyQ2xhc3MiLCJsZWF2ZUNsYXNzIiwicGVuZGluZ0Nzc0V2ZW50IiwicGVuZGluZ0Nzc0NiIiwicGVuZGluZ0pzQ2IiLCJqdXN0RW50ZXJlZCIsImVudGVyZWQiLCJsZWZ0IiwidHlwZUNhY2hlIiwiVFlQRV9UUkFOU0lUSU9OIiwiVFlQRV9BTklNQVRJT04iLCJmb3JFYWNoIiwiaXNIaWRkZW4iLCJyZWN0IiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0Iiwid2lkdGgiLCJoZWlnaHQiLCJvZmZzZXRXaWR0aCIsImdldENsaWVudFJlY3RzIiwicGFydGlhbCIsIm5vZGVMaW5rRm4iLCJfYXNDb21wb25lbnQiLCJjb21waWxlTm9kZSIsImNoaWxkTGlua0ZuIiwidGVybWluYWwiLCJpc1NjcmlwdCIsImNvbXBpbGVOb2RlTGlzdCIsImRpcnMiLCJsaW5rQW5kQ2FwdHVyZSIsIm1ha2VVbmxpbmtGbiIsIm9yaWdpbmFsRGlyQ291bnQiLCJzb3J0IiwiZGlyZWN0aXZlQ29tcGFyYXRvciIsIl9iaW5kIiwiZGVzY3JpcHRvciIsInByaW9yaXR5IiwiREVGQVVMVF9QUklPUklUWSIsImNvbnRleHREaXJzIiwiZGVzdHJveWluZyIsInRlYXJkb3duRGlycyIsIl90ZWFyZG93biIsIiRyZW1vdmUiLCJjb21waWxlQW5kTGlua1Byb3BzIiwicHJvcHNMaW5rRm4iLCJwcm9wRGlycyIsImNvbXBpbGVSb290IiwiY29udGV4dE9wdGlvbnMiLCJjb250ZXh0TGlua0ZuIiwicmVwbGFjZXJMaW5rRm4iLCJjb250YWluZXJBdHRycyIsIl9jb250YWluZXJBdHRycyIsInJlcGxhY2VyQXR0cnMiLCJfcmVwbGFjZXJBdHRycyIsImNvbXBpbGVEaXJlY3RpdmVzIiwib25SRSIsInBsdXJhbCIsInNlbGZEaXJzIiwiY29tcGlsZVRleHROb2RlIiwiY29tcGlsZUVsZW1lbnQiLCJsaW5rRm4iLCJjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyIsImNoZWNrRWxlbWVudERpcmVjdGl2ZXMiLCJjaGVja0NvbXBvbmVudCIsIl9za2lwIiwicmVtb3ZlVGV4dCIsIndob2xlVGV4dCIsInByb2Nlc3NUZXh0VG9rZW4iLCJtYWtlVGV4dE5vZGVMaW5rRm4iLCJzZXRUb2tlblR5cGUiLCJkaXJlY3RpdmVzIiwiZnJhZ0Nsb25lIiwibm9kZUxpc3QiLCJsaW5rRm5zIiwibWFrZUNoaWxkTGlua0ZuIiwiY2hpbGRyZW5MaW5rRm4iLCJtYWtlVGVybWluYWxOb2RlTGlua0ZuIiwiY29tcG9uZW50IiwicmVmIiwiaW50ZXJuYWxEaXJlY3RpdmVzIiwibW9kaWZpZXJzIiwibGl0ZXJhbCIsImNvbXBvbmVudExpbmtGbiIsInNraXAiLCJwcmV2aW91c0VsZW1lbnRTaWJsaW5nIiwibWF0Y2hlZCIsImRpck5hbWUiLCJyYXdOYW1lIiwidGVybURlZiIsIm1vZGlmaWVyUkUiLCJkaXJBdHRyUkUiLCJERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZIiwicGFyc2VNb2RpZmllcnMiLCJwdXNoRGlyIiwiaW50ZXJwVG9rZW5zIiwiaGFzT25lVGltZVRva2VuIiwiaGFzT25lVGltZSIsImludGVycCIsImRpckRlZiIsInNvbWUiLCJ0cmFuc2l0aW9uUkUiLCJiaW5kUkUiLCJtYWtlTm9kZUxpbmtGbiIsInRyYW5zY2x1ZGUiLCJleHRyYWN0QXR0cnMiLCJfY29udGVudCIsInRyYW5zY2x1ZGVUZW1wbGF0ZSIsInJlcGxhY2VyIiwibWVyZ2VBdHRycyIsInNwZWNpYWxDaGFyUkUiLCJyZXNvbHZlU2xvdHMiLCJjb250ZW50cyIsIl9zbG90Q29udGVudHMiLCJleHRyYWN0RnJhZ21lbnQiLCJzdGF0ZU1peGluIiwibWFrZUNvbXB1dGVkR2V0dGVyIiwib3duZXIiLCJldmFsdWF0ZSIsIm5ld0RhdGEiLCJfc2V0RGF0YSIsIl9pbml0UHJvcHMiLCJfaW5pdE1ldGEiLCJfaW5pdE1ldGhvZHMiLCJfaW5pdERhdGEiLCJfaW5pdENvbXB1dGVkIiwiX3Byb3BzVW5saW5rRm4iLCJkYXRhRm4iLCJvbGREYXRhIiwicmVtb3ZlVm0iLCJjb21wdXRlZCIsInVzZXJEZWYiLCJtZXRob2RzIiwibWV0YXMiLCJfbWV0YSIsImV2ZW50c01peGluIiwicmVnaXN0ZXJDb21wb25lbnRFdmVudHMiLCJldmVudFJFIiwiX2Zyb21QYXJlbnQiLCIkb24iLCJyZWdpc3RlckNhbGxiYWNrcyIsImhhc2giLCJoYW5kbGVycyIsInJlZ2lzdGVyIiwib25BdHRhY2hlZCIsImNhbGxBdHRhY2giLCJvbkRldGFjaGVkIiwiY2FsbERldGFjaCIsImV2ZW50cyIsIndhdGNoIiwiX2luaXRET01Ib29rcyIsImhvb2siLCIkZW1pdCIsIm5vb3AkMSIsIkRpcmVjdGl2ZSIsIl9sb2NrZWQiLCJfYm91bmQiLCJfbGlzdGVuZXJzIiwiX2hvc3QiLCJfdnVlX2RpcmVjdGl2ZXMiLCJsaWZlY3ljbGVNaXhpbiIsIl9yZWYiLCJfY29tcGlsZSIsIl9pbml0RWxlbWVudCIsInJvb3RMaW5rZXIiLCJjb250ZW50TGlua0ZuIiwiY3RvciIsIl9saW5rZXJDYWNoYWJsZSIsInJvb3RVbmxpbmtGbiIsImNvbnRlbnRVbmxpbmtGbiIsIl9kZXN0cm95IiwiZGVmZXJDbGVhbnVwIiwiX2NsZWFudXAiLCJkZXN0cm95UmVhZHkiLCJwZW5kaW5nUmVtb3ZhbCIsImNsZWFudXBJZlBvc3NpYmxlIiwiJGRlc3Ryb3kiLCJ0ZWFyZG93biIsIiRvZmYiLCJtaXNjTWl4aW4iLCJfYXBwbHlGaWx0ZXJzIiwib2xkVmFsdWUiLCJ3cml0ZSIsIm9mZnNldCIsInJlYWQiLCJfcmVzb2x2ZUNvbXBvbmVudCIsImZhY3RvcnkiLCJyZXNvbHZlZCIsInJlcXVlc3RlZCIsInBlbmRpbmdDYWxsYmFja3MiLCJjYnMiLCJyZWFzb24iLCJkYXRhQVBJIiwiY2xlYW4iLCJhc1N0YXRlbWVudCIsIiRhcmd1bWVudHMiLCIkZGVsZXRlIiwiJHdhdGNoIiwiZGVlcCIsInN5bmMiLCJpbW1lZGlhdGUiLCJmaWx0ZXJSRSQxIiwiJGludGVycG9sYXRlIiwiJGxvZyIsImNvbnNvbGUiLCJsb2ciLCJkb21BUEkiLCJpbnNlcnQiLCJvcDEiLCJvcDIiLCJ0YXJnZXRJc0RldGFjaGVkIiwic2hvdWxkQ2FsbEhvb2siLCJhcHBlbmQiLCJiZWZvcmVXaXRoQ2IiLCJyZW1vdmVXaXRoQ2IiLCIkbmV4dFRpY2siLCIkYXBwZW5kVG8iLCIkcHJlcGVuZFRvIiwiJGJlZm9yZSIsIiRhZnRlciIsImluRG9jdW1lbnQiLCJyZWFsQ2IiLCJldmVudHNBUEkiLCJtb2RpZnlMaXN0ZW5lckNvdW50IiwiY291bnQiLCJob29rUkUiLCIkb25jZSIsImlzU291cmNlIiwic2hvdWxkUHJvcGFnYXRlIiwiaGFzUGFyZW50Q2JzIiwiJGJyb2FkY2FzdCIsInNvdXJjZSIsIiRkaXNwYXRjaCIsImxpZmVjeWNsZUFQSSIsInJlYWR5IiwiJGNvbXBpbGUiLCJsaW1pdEJ5IiwiZmlsdGVyQnkiLCJzZWFyY2giLCJkZWxpbWl0ZXIiLCJjb252ZXJ0QXJyYXkiLCIkdmFsdWUiLCIka2V5Iiwib3JkZXJCeSIsImJhc2VDb21wYXJlIiwic29ydEtleUluZGV4Iiwic29ydEtleSIsInNvcnRLZXlzIiwib3JkZXIiLCJjb21wYXJhdG9yIiwiZmlyc3RBcmciLCJpbnN0YWxsR2xvYmFsQVBJIiwiY3JlYXRlQ2xhc3MiLCJlbGVtZW50RGlyZWN0aXZlcyIsInRyYW5zaXRpb25zIiwicGFydGlhbHMiLCJ1dGlsIiwiY29tcGlsZXIiLCJwYXJzZXJzIiwiZGlyZWN0aXZlIiwiZXh0ZW5kT3B0aW9ucyIsIlN1cGVyIiwiaXNGaXJzdEV4dGVuZCIsIl9DdG9yIiwiU3ViIiwiX2Fzc2V0VHlwZXMiLCJwbHVnaW4iLCJpbnN0YWxsZWQiLCJ1bnNoaWZ0IiwiaW5zdGFsbCIsImRlZmluaXRpb24iLCJpbkJyb3dzZXIiLCJfX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fIiwiVUEiLCJpc0lFIiwiaXNBbmRyb2lkIiwiaXNJb3MiLCJpb3NWZXJzaW9uTWF0Y2giLCJpb3NWZXJzaW9uIiwiaGFzTXV0YXRpb25PYnNlcnZlckJ1ZyIsImluZGV4ZWREQiIsInRyYW5zaXRpb25Qcm9wIiwiYW5pbWF0aW9uUHJvcCIsImFuaW1hdGlvbkVuZEV2ZW50IiwiaXNXZWJraXRUcmFucyIsIm9udHJhbnNpdGlvbmVuZCIsIm9ud2Via2l0dHJhbnNpdGlvbmVuZCIsImlzV2Via2l0QW5pbSIsIm9uYW5pbWF0aW9uZW5kIiwib253ZWJraXRhbmltYXRpb25lbmQiLCJuZXh0VGlja0hhbmRsZXIiLCJwZW5kaW5nIiwiY29waWVzIiwidGltZXJGdW5jIiwiTXV0YXRpb25PYnNlcnZlciIsInNldEltbWVkaWF0ZSIsImNvdW50ZXIiLCJvYnNlcnZlciIsInRleHROb2RlIiwiY2hhcmFjdGVyRGF0YSIsIlNldCIsIm5ld2VyIiwib2xkZXIiLCJyZXR1cm5FbnRyeSIsImZyZWV6ZSIsImRlZmluZVByb3BlcnRpZXMiLCJzaWxlbnQiLCJ3YXJuRXhwcmVzc2lvbkVycm9ycyIsIl9kZWxpbWl0ZXJzQ2hhbmdlZCIsIl9wcm9wQmluZGluZ01vZGVzIiwiZm9ybWF0Q29tcG9uZW50TmFtZSIsImhhc0NvbnNvbGUiLCJtc2ciLCJlcnJvciIsIkhUTUxVbmtub3duRWxlbWVudCIsIkhUTUxFbGVtZW50Iiwib3B0aW9uTWVyZ2VTdHJhdGVnaWVzIiwiaW5zdGFuY2VEYXRhIiwiZGVmYXVsdERhdGEiLCJjcmVhdGVkIiwiYXR0YWNoZWQiLCJkZXRhY2hlZCIsImJlZm9yZUNvbXBpbGUiLCJjb21waWxlZCIsImJlZm9yZURlc3Ryb3kiLCJkZXN0cm95ZWQiLCJhY3RpdmF0ZSIsImFkZFN1YiIsInN1YiIsInJlbW92ZVN1YiIsImFkZERlcCIsImFycmF5UHJvdG8iLCJnZXRPd25Qcm9wZXJ0eU5hbWVzIiwiaXRlbXMiLCJkZWJvdW5jZSIsIklOX1BBVEgiLCJCRUZPUkVfSURFTlQiLCJJTl9JREVOVCIsIndzIiwiaWRlbnQiLCJbIiwiZW9mIiwiLiIsIm51bWJlciIsIiciLCJcIiIsIl0iLCJlbHNlIiwiYWxsb3dlZEtleXdvcmRzIiwiaW1wcm9wZXJLZXl3b3JkcyIsImJlZm9yZUdldCIsInByZVByb2Nlc3MiLCJwb3N0UHJvY2VzcyIsImFmdGVyR2V0IiwiZm9yQ29udGV4dCIsIiRmb3JDb250ZXh0IiwiYWxpYXMiLCJfd2l0aExvY2siLCIkaW5kZXgiLCJ0bXAiLCJjdXJyZW50IiwidGV4dCQxIiwibGVnZW5kIiwidHIiLCJjb2wiLCJ0ZCIsInRoIiwib3B0aW9uIiwib3B0Z3JvdXAiLCJ0aGVhZCIsInRib2R5IiwiY29sZ3JvdXAiLCJjYXB0aW9uIiwidGZvb3QiLCJnIiwiZGVmcyIsInN5bWJvbCIsImltYWdlIiwiY2lyY2xlIiwiZWxsaXBzZSIsImxpbmUiLCJwb2x5Z29uIiwicG9seWxpbmUiLCJ0IiwicGxhY2Vob2xkZXIiLCJzd2FwIiwiX3dhdGNoZXIiLCJPTiIsIk1PREVMIiwiQklORCIsIlRSQU5TSVRJT04iLCJFTCIsIkNPTVBPTkVOVCIsIlBBUlRJQUwiLCJJRiIsIkZPUiIsIlNMT1QiLCJ1aWQkMyIsInZGb3IiLCJwYXJhbXMiLCJpbk1hdGNoIiwiaXRNYXRjaCIsIml0ZXJhdG9yIiwiaXNPcHRpb24iLCJkaWZmIiwidXBkYXRlUmVmIiwidXBkYXRlTW9kZWwiLCJwcmltaXRpdmUiLCJjb252ZXJ0ZWRGcm9tT2JqZWN0IiwiZnJvbU9iamVjdCIsInRyYWNrQnkiLCJvbGRGcmFncyIsImZyYWdzIiwiZ2V0Q2FjaGVkRnJhZyIsInJldXNlZCIsImZyZXNoIiwicmVtb3ZhbEluZGV4IiwidG90YWxSZW1vdmVkIiwiZGVsZXRlQ2FjaGVkRnJhZyIsInciLCJ0YXJnZXRQcmV2IiwicHJldkVsIiwiY3VycmVudFByZXYiLCJpbnNlcnRpb25JbmRleCIsInN0YWdnZXJDYiIsInN0YWdnZXJBbmNob3IiLCJtb3ZlIiwicGFyZW50U2NvcGUiLCJjYWNoZUZyYWciLCJtb2RlbCIsIl9fdl9tb2RlbCIsImZvcmNlVXBkYXRlIiwic3RhZ2dlckFtb3VudCIsImdldFN0YWdnZXIiLCJ3YXJuRHVwbGljYXRlIiwidHJhbnMiLCJzdGFnZ2VyIiwiX3ByZVByb2Nlc3MiLCJfcG9zdFByb2Nlc3MiLCJ1bmJpbmQiLCJ2SWYiLCJpbnZhbGlkIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiZWxzZUVsIiwiZWxzZUZyYWciLCJlbHNlRmFjdG9yeSIsInNob3ciLCJ0b2dnbGUiLCJkaXNwbGF5IiwidGV4dCQyIiwiaXNSYW5nZSIsImNvbXBvc2luZyIsImxpc3RlbmVyIiwiZm9jdXNlZCIsInJhd0xpc3RlbmVyIiwiaGFzalF1ZXJ5IiwialF1ZXJ5IiwiYWZ0ZXJCaW5kIiwicmFkaW8iLCJjaGVja2VkIiwic2VsZWN0IiwibXVsdGlwbGUiLCJpbml0VmFsdWUiLCJzZWxlY3RlZEluZGV4IiwiY2hlY2tib3giLCJnZXRCb29sZWFuVmFsdWUiLCJfdHJ1ZVZhbHVlIiwiX2ZhbHNlVmFsdWUiLCJjaGVja0ZpbHRlcnMiLCJoYXNSZWFkIiwiaGFzV3JpdGUiLCJfdW5iaW5kIiwiZXNjIiwidGFiIiwiZW50ZXIiLCJzcGFjZSIsImRlbGV0ZSIsInVwIiwicmlnaHQiLCJkb3duIiwib24kMSIsImFjY2VwdFN0YXRlbWVudCIsImlmcmFtZUJpbmQiLCJjb250ZW50V2luZG93IiwiY2FwdHVyZSIsInN0b3AiLCJwcmV2ZW50IiwicmVzZXQiLCJpbXBvcnRhbnRSRSIsImhhbmRsZU9iamVjdCIsInJlZHVjZSIsImhhbmRsZVNpbmdsZSIsImlzSW1wb3J0YW50Iiwic2V0UHJvcGVydHkiLCJ4bGlua05TIiwieGxpbmtSRSIsImRpc2FsbG93ZWRJbnRlcnBBdHRyUkUiLCJhdHRyV2l0aFByb3BzUkUiLCJlbnVtZXJhdGVkQXR0clJFIiwibW9kZWxQcm9wcyIsInRydWUtdmFsdWUiLCJmYWxzZS12YWx1ZSIsImJpbmQkMSIsImF0dHJWYWx1ZSIsIm1vZGVsUHJvcCIsInNldEF0dHJpYnV0ZU5TIiwiY2xvYWsiLCJmb3IiLCJpZiIsInZDbGFzcyIsImNsZWFudXAiLCJwcmV2S2V5cyIsImtlZXBBbGl2ZSIsImlubGluZVRlbXBsYXRlIiwicGVuZGluZ0NvbXBvbmVudENiIiwiQ29tcG9uZW50IiwicGVuZGluZ1JlbW92YWxzIiwicGVuZGluZ1JlbW92YWxDYiIsInNldENvbXBvbmVudCIsImludmFsaWRhdGVQZW5kaW5nIiwicmVzb2x2ZUNvbXBvbmVudCIsIm1vdW50Q29tcG9uZW50IiwidW5idWlsZCIsImNoaWxkVk0iLCJDb21wb25lbnROYW1lIiwiYWN0aXZhdGVIb29rcyIsImNhY2hlZCIsImdldENhY2hlZCIsIm5ld0NvbXBvbmVudCIsImJ1aWxkIiwid2FpdGluZ0ZvciIsImV4dHJhT3B0aW9ucyIsIl9pc1JvdXRlclZpZXciLCJfaW5hY3RpdmUiLCJ0cmFuc2l0aW9uTW9kZSIsImJpbmRpbmdNb2RlcyIsImNoaWxkS2V5IiwicGFyZW50S2V5IiwicGFyZW50V2F0Y2hlciIsImNoaWxkV2F0Y2hlciIsInRyYW5zRHVyYXRpb25Qcm9wIiwiYW5pbUR1cmF0aW9uUHJvcCIsInJhZiIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsIndhaXRGb3JUcmFuc2l0aW9uU3RhcnQiLCJwJDEiLCJjYW5jZWxQZW5kaW5nIiwiY2FsbEhvb2tXaXRoQ2IiLCJlbnRlckNhbmNlbGxlZCIsImVudGVyTmV4dFRpY2siLCJlbnRlckRvbmUiLCJnZXRDc3NUcmFuc2l0aW9uVHlwZSIsInNldHVwQ3NzQ2IiLCJsZWF2ZSIsImxlYXZlQ2FuY2VsbGVkIiwibGVhdmVEb25lIiwibGVhdmVOZXh0VGljayIsImhhc1BlbmRpbmciLCJoaWRkZW4iLCJpbmxpbmVTdHlsZXMiLCJjb21wdXRlZFN0eWxlcyIsImdldENvbXB1dGVkU3R5bGUiLCJ0cmFuc0R1cmF0aW9uIiwiYW5pbUR1cmF0aW9uIiwib25FbmQiLCJ0cmFuc2l0aW9uJDEiLCJvbGRJZCIsImNsYXNzIiwiX3NldHVwUGFyYW1zIiwiX2NoZWNrU3RhdGVtZW50IiwiX3VwZGF0ZSIsIm9sZFZhbCIsIm1hcHBlZEtleSIsIl9zZXR1cFBhcmFtV2F0Y2hlciIsInVud2F0Y2giLCJwYXJhbVdhdGNoZXJzIiwiX3BhcmFtVW53YXRjaEZucyIsIiRldmVudCIsImxpc3RlbmVycyIsInVud2F0Y2hGbnMiLCJzbG90IiwiZmFsbGJhY2siLCJlbHNlQmxvY2siLCJkaWdpdHNSRSIsImpzb24iLCJpbmRlbnQiLCJjYXBpdGFsaXplIiwidXBwZXJjYXNlIiwibG93ZXJjYXNlIiwiY3VycmVuY3kiLCJfY3VycmVuY3kiLCJkZWNpbWFscyIsInBhcnNlRmxvYXQiLCJpc0Zpbml0ZSIsInN0cmluZ2lmaWVkIiwiYWJzIiwidG9GaXhlZCIsIl9pbnQiLCJfZmxvYXQiLCJzaWduIiwicGx1cmFsaXplIiwiZGVsYXkiLCJzaG93TmF2IiwiaGlkZU5hdiIsImNsYXNzZXMiLCJ0b2dnbGU6OnNpdGVOYXYiLCJ0b2dnbGVOYXYiLCJBcGlUYWJsZSIsImRpc21pc3NDYWxsQmFjayIsImFwaUl0ZW1zIiwiaXNSZXF1aXJlZCIsImRlc2MiLCJzaG93U3Bpbm5lciIsIl9yZXNldE1zZyIsIl90aGlzMiIsImludGVydmFsIiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiaXNGdWxsU2NyZWVuIiwic3RlcFRyYWNrZXJDdXJyZW50U3RlcCIsInN0ZXBUcmFja2VyQ29uZmlnIiwiaXNDbGlja2FibGUiLCJzdGVwcyIsImxpbmsiLCJvbkNsaWNrSGFuZGxlciIsImlzVmlzaWJsZSIsImRpc21pc3NpYmxlIiwib25DbG9zZWQiLCJkaXNtaXNzIiwiaXNPcGVuIiwibGFiZWwiLCJ0b2dnbGVPcGVuIiwiZmV0Y2giLCJfbWl4aW5zIiwiX21peGluczIiLCJfZmluZEluZGV4IiwiX2ZpbmRJbmRleDIiLCJfZGVib3VuY2UyIiwiX3NldEZvY3VzIiwiX3NldEZvY3VzMiIsInNldEZvY3VzIiwiaW5kZXhlZExlZ2FscyIsIm5vbkluZGV4ZWRMZWdhbHMiLCJhcGlMYW5nIiwiYXBpUmVnaW9uIiwiZmV0Y2hMZWdhbHMiLCJoZWFkZXJzIiwiQ29udGVudC1UeXBlIiwiYXBwbGljYXRpb25LZXkiLCJhcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIiLCJkYXRhQXJ5IiwibGVnYWxSZXNwb25zZSIsImZpbmRJbmRleCIsImdldExlZ2FscyIsImluZGV4ZWRLZXlzIiwibGVnYWwiLCJub25JbmRleGVkS2V5cyIsInRoZW4iLCJwYXJzZUpTT04iLCJsZWdhbDo6Y2xpY2siLCJsZWdhbEtleSIsInRhcmdldExlZ2FsSW5kZXgiLCJpc1NlbGVjdGVkIiwiYXNzaWduIiwibGVnYWw6OmluaXQiLCJsZWdhbEluaXREZXRhaWwiLCJsYW5nIiwicmVnaW9uIiwiY29udGFpbmVyUmVmIiwiaXNOb25JbmRleGVkIiwicm9vdEJyb2FkY2FzdCIsImxlZ2FsQ291bnRlciIsImxlZ2FsTGFuZyIsImxlZ2FsUmVnaW9uIiwibGVnYWw6OnVkcGF0ZSIsInVwZGF0ZURldGFpbCIsImNsaWNrSGFuZGxlciIsIkVTQyIsIl9pc1Zpc2libGUiLCJvdmVybGF5Q29udGFpbmVyOjpvcGVuIiwib3ZlcmxheUNvbnRhaW5lcjo6Y2xvc2UiLCJldnQiLCJvdmVybGF5S2V5IiwiY2xvc2VPdmVybGF5Iiwib3ZlcmxheTo6b3BlbiIsImZ1bGxTY3JlZW4iLCJoaWRlIiwic2hvdzo6c3Bpbm5lciIsImhpZGU6OnNwaW5uZXIiLCJjdXJyZW50U3RlcCIsInN0ZXAiLCJpc0Rpc2FibGVkIiwiYWN0aXZlVGFiSW5kZXgiLCJ0YWJzIiwiX2RlZmluZVByb3BlcnR5IiwiaXNBY3RpdmUiLCJoYW5kbGVUYWJMaXN0Q2xpY2siLCJfZ2V0U3RhcnRlZCIsIl9nZXRTdGFydGVkMiIsIl9zdGVwVHJhY2tlclBhZ2UiLCJfc3RlcFRyYWNrZXJQYWdlMiIsIl90YWJzUGFnZSIsIl90YWJzUGFnZTIiLCJfbGVnYWxQYWdlIiwiX2xlZ2FsUGFnZTIiLCJfb3ZlcmxheVBhZ2UiLCJfb3ZlcmxheVBhZ2UyIiwiX2xlZ2FsT3ZlcmxheVBhZ2UiLCJfbGVnYWxPdmVybGF5UGFnZTIiLCJfY29sbGFwc2FibGVQYW5lbFBhZ2UiLCJfY29sbGFwc2FibGVQYW5lbFBhZ2UyIiwiX2FsZXJ0UGFnZSIsIl9hbGVydFBhZ2UyIiwiX3NwaW5uZXJQYWdlIiwiX3NwaW5uZXJQYWdlMiIsIl9oeUhlYWRlclBhZ2UiLCJfaHlIZWFkZXJQYWdlMiIsIi9nZXQtc3RhcnRlZCIsIi9hbGVydCIsIkFsZXJ0UGFnZSIsIi9zcGlubmVyIiwiU3Bpbm5lclBhZ2UiLCIvc3RlcC10cmFja2VyIiwiU3RlcFRyYWNrZXJQYWdlIiwiL3RhYnMiLCJUYWJzUGFnZSIsIi9sZWdhbCIsIkxlZ2FsUGFnZSIsIi9vdmVybGF5IiwiT3ZlcmxheVBhZ2UiLCIvbGVnYWwtb3ZlcmxheSIsIkxlZ2FsT3ZlcmxheVBhZ2UiLCIvY29sbGFwc2FibGUtcGFuZWwiLCJDb2xsYXBzYWJsZVBhbmVsUGFnZSIsIi9oeS1oZWFkZXIiLCJIeUhlYWRlclBhZ2UiLCJldmVudEhhbmRsZXIiLCJfb3ZlcmxheU9wZW5lciIsIl9vdmVybGF5T3BlbmVyMiIsIl9vdmVybGF5Q29udGFpbmVyIiwiX292ZXJsYXlDb250YWluZXIyIiwiX292ZXJsYXkiLCJfb3ZlcmxheTIiLCJfbGVnYWxDb3VudGVyIiwiX2xlZ2FsQ291bnRlcjIiLCJfbGVnYWxDb250YWluZXIiLCJfbGVnYWxDb250YWluZXIyIiwiX3RhYnMiLCJfdGFiczIiLCJfdGFiIiwiX3RhYjIiLCJfaW5kZXg1IiwiX2luZGV4NiIsIl9pbmRleDciLCJfaW5kZXg4IiwiX2luZGV4OSIsIl9pbmRleDEwIiwiU3RlcFRyYWNrZXIiLCJPdmVybGF5Q29udGFpbmVyIiwiT3ZlcmxheSIsIkxlZ2FsQ291bnRlciIsIkxlZ2FsQ29udGFpbmVyIiwiVGFicyIsIlRhYiIsIkNvbGxhcHNhYmxlUGFuZWwiLCJBbGVydCIsIlNwaW5uZXIiLCJIeUhlYWRlciIsIm92ZXJsYXlPcGVuZXIiLCJfbmFtZSIsIl9sZW4iLCJyZXNwb25zZSIsIl9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fIiwibGliJGVzNiRwcm9taXNlJHV0aWxzJCRvYmplY3RPckZ1bmN0aW9uIiwieCIsImxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbiIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRTY2hlZHVsZXIiLCJzY2hlZHVsZUZuIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHNldEFzYXAiLCJhc2FwRm4iLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljayIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dCIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNdXRhdGlvbk9ic2VydmVyIiwiaXRlcmF0aW9ucyIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlciIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNZXNzYWdlQ2hhbm5lbCIsImNoYW5uZWwiLCJNZXNzYWdlQ2hhbm5lbCIsInBvcnQxIiwib25tZXNzYWdlIiwicG9ydDIiLCJwb3N0TWVzc2FnZSIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0IiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZSIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRhdHRlbXB0VmVydHgiLCJ2ZXJ0eCIsInJ1bk9uTG9vcCIsInJ1bk9uQ29udGV4dCIsImxpYiRlczYkcHJvbWlzZSR0aGVuJCR0aGVuIiwib25GdWxmaWxsbWVudCIsIm9uUmVqZWN0aW9uIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSUQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRtYWtlUHJvbWlzZSIsInN0YXRlIiwiX3N0YXRlIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2siLCJfcmVzdWx0IiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlIiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkcmVzb2x2ZSIsIkNvbnN0cnVjdG9yIiwicHJvbWlzZSIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzZWxmRnVsZmlsbG1lbnQiLCJUeXBlRXJyb3IiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRjYW5ub3RSZXR1cm5Pd24iLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlUaGVuIiwiZnVsZmlsbG1lbnRIYW5kbGVyIiwicmVqZWN0aW9uSGFuZGxlciIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZUZvcmVpZ25UaGVuYWJsZSIsInRoZW5hYmxlIiwic2VhbGVkIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdCIsIl9sYWJlbCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU93blRoZW5hYmxlIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlIiwibWF5YmVUaGVuYWJsZSIsImxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0IiwicmVzb2x2ZSIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoUmVqZWN0aW9uIiwiX29uZXJyb3IiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyIsIl9zdWJzY3JpYmVycyIsInN1YnNjcmliZXJzIiwic2V0dGxlZCIsImRldGFpbCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0IiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2giLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IiLCJzdWNjZWVkZWQiLCJmYWlsZWQiLCJoYXNDYWxsYmFjayIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlIiwicmVzb2x2ZXIiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRuZXh0SWQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpZCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsIiwibGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlIiwibGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5IiwicmVqZWN0IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3QiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNSZXNvbHZlciIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldyIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlIiwibGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IiLCJpbnB1dCIsIl9pbnN0YW5jZUNvbnN0cnVjdG9yIiwiX2lucHV0IiwiX3JlbWFpbmluZyIsIl9lbnVtZXJhdGUiLCJsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkdmFsaWRhdGlvbkVycm9yIiwibGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRwb2x5ZmlsbCIsImxvY2FsIiwiUCIsIlByb21pc2UiLCJjYXN0IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5IiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2giLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsIiwiV2ViS2l0TXV0YXRpb25PYnNlcnZlciIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIiLCJVaW50OENsYW1wZWRBcnJheSIsImltcG9ydFNjcmlwdHMiLCJyYW5kb20iLCJzdWJzdHJpbmciLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0IiwiYWxsIiwicmFjZSIsIl9zZXRTY2hlZHVsZXIiLCJfc2V0QXNhcCIsIl9hc2FwIiwiY2F0Y2giLCJfZWFjaEVudHJ5IiwiX3NldHRsZWRBdCIsIl93aWxsU2V0dGxlQXQiLCJlbnVtZXJhdG9yIiwibGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0IiwibGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZSIsInBvbHlmaWxsIiwibm9ybWFsaXplTmFtZSIsIm5vcm1hbGl6ZVZhbHVlIiwiaXRlcmF0b3JGb3IiLCJzdXBwb3J0IiwiaXRlcmFibGUiLCJIZWFkZXJzIiwiY29uc3VtZWQiLCJib2R5VXNlZCIsImZpbGVSZWFkZXJSZWFkeSIsInJlYWRlciIsIm9ubG9hZCIsIm9uZXJyb3IiLCJyZWFkQmxvYkFzQXJyYXlCdWZmZXIiLCJibG9iIiwiRmlsZVJlYWRlciIsInJlYWRBc0FycmF5QnVmZmVyIiwicmVhZEJsb2JBc1RleHQiLCJyZWFkQXNUZXh0IiwiQm9keSIsIl9pbml0Qm9keSIsIl9ib2R5SW5pdCIsIl9ib2R5VGV4dCIsIkJsb2IiLCJpc1Byb3RvdHlwZU9mIiwiX2JvZHlCbG9iIiwiZm9ybURhdGEiLCJGb3JtRGF0YSIsIl9ib2R5Rm9ybURhdGEiLCJzZWFyY2hQYXJhbXMiLCJVUkxTZWFyY2hQYXJhbXMiLCJhcnJheUJ1ZmZlciIsIkFycmF5QnVmZmVyIiwicmVqZWN0ZWQiLCJkZWNvZGUiLCJub3JtYWxpemVNZXRob2QiLCJ1cGNhc2VkIiwiUmVxdWVzdCIsInVybCIsImNyZWRlbnRpYWxzIiwicmVmZXJyZXIiLCJmb3JtIiwiYnl0ZXMiLCJkZWNvZGVVUklDb21wb25lbnQiLCJ4aHIiLCJwYWlycyIsImdldEFsbFJlc3BvbnNlSGVhZGVycyIsImhlYWRlciIsIlJlc3BvbnNlIiwiYm9keUluaXQiLCJzdGF0dXMiLCJvayIsInN0YXR1c1RleHQiLCJ2YWx1ZXMiLCJnZXRBbGwiLCJ0aGlzQXJnIiwiY2xvbmUiLCJyZWRpcmVjdFN0YXR1c2VzIiwiUmFuZ2VFcnJvciIsImxvY2F0aW9uIiwicmVzcG9uc2VVUkwiLCJnZXRSZXNwb25zZUhlYWRlciIsInJlcXVlc3QiLCJYTUxIdHRwUmVxdWVzdCIsInJlc3BvbnNlVGV4dCIsIm9udGltZW91dCIsIndpdGhDcmVkZW50aWFscyIsInJlc3BvbnNlVHlwZSIsInNldFJlcXVlc3RIZWFkZXIiLCJzZW5kIiwiRGF0YVZpZXciLCJIYXNoIiwiaGFzaENsZWFyIiwiaGFzaERlbGV0ZSIsImhhc2hHZXQiLCJoYXNoSGFzIiwiaGFzaFNldCIsInNldENhY2hlQWRkIiwic2V0Q2FjaGVIYXMiLCJVaW50OEFycmF5IiwiV2Vha01hcCIsInByZWRpY2F0ZSIsIkZVTkNfRVJST1JfVEVYVCIsImJhc2VGaW5kSW5kZXgiLCJmcm9tSW5kZXgiLCJmcm9tUmlnaHQiLCJiYXNlSGFzSW4iLCJvYmpJc0FyciIsIm90aElzQXJyIiwib2JqVGFnIiwiYXJyYXlUYWciLCJvdGhUYWciLCJnZXRUYWciLCJvYmplY3RUYWciLCJvYmpJc09iaiIsIm90aElzT2JqIiwiaXNTYW1lVGFnIiwiaXNUeXBlZEFycmF5IiwiZXF1YWxCeVRhZyIsIm9iaklzV3JhcHBlZCIsIm90aElzV3JhcHBlZCIsIm9ialVud3JhcHBlZCIsIm90aFVud3JhcHBlZCIsImVxdWFsT2JqZWN0cyIsImJhc2VJc01hdGNoIiwibWF0Y2hEYXRhIiwibm9DdXN0b21pemVyIiwib2JqVmFsdWUiLCJpc01hc2tlZCIsInBhdHRlcm4iLCJyZUlzTmF0aXZlIiwicmVJc0hvc3RDdG9yIiwicmVSZWdFeHBDaGFyIiwiYmFzZUl0ZXJhdGVlIiwiaWRlbnRpdHkiLCJiYXNlTWF0Y2hlc1Byb3BlcnR5IiwiYmFzZU1hdGNoZXMiLCJuYXRpdmVLZXlzIiwiZ2V0TWF0Y2hEYXRhIiwiaGFzSW4iLCJiYXNlUHJvcGVydHlEZWVwIiwiYmFzZVRpbWVzIiwiaXRlcmF0ZWUiLCJiYXNlVG9TdHJpbmciLCJzeW1ib2xUb1N0cmluZyIsInN5bWJvbFByb3RvIiwiY29yZUpzRGF0YSIsImRhdGFWaWV3VGFnIiwiYnl0ZUxlbmd0aCIsImJ5dGVPZmZzZXQiLCJidWZmZXIiLCJhcnJheUJ1ZmZlclRhZyIsImJvb2xUYWciLCJkYXRlVGFnIiwiZXJyb3JUYWciLCJtZXNzYWdlIiwibnVtYmVyVGFnIiwicmVnZXhwVGFnIiwibWFwVGFnIiwibWFwVG9BcnJheSIsInNldFRhZyIsInNldFRvQXJyYXkiLCJzeW1ib2xWYWx1ZU9mIiwib2JqUHJvcHMiLCJvYmpMZW5ndGgiLCJvdGhQcm9wcyIsInNraXBDdG9yIiwib2JqQ3RvciIsIm90aEN0b3IiLCJuYXRpdmVHZXRQcm90b3R5cGUiLCJnZXRQcm90b3R5cGVPZiIsInByb21pc2VUYWciLCJ3ZWFrTWFwVGFnIiwiZGF0YVZpZXdDdG9yU3RyaW5nIiwibWFwQ3RvclN0cmluZyIsInByb21pc2VDdG9yU3RyaW5nIiwic2V0Q3RvclN0cmluZyIsIndlYWtNYXBDdG9yU3RyaW5nIiwiQ3RvciIsImN0b3JTdHJpbmciLCJoYXNQYXRoIiwiaGFzRnVuYyIsIkhBU0hfVU5ERUZJTkVEIiwibWFza1NyY0tleSIsIklFX1BST1RPIiwicHJvdG8iLCJwb3AiLCJzdHJpbmciLCJMQVJHRV9BUlJBWV9TSVpFIiwicmVQcm9wTmFtZSIsInJlRXNjYXBlQ2hhciIsInF1b3RlIiwiaW52b2tlRnVuYyIsInRpbWUiLCJsYXN0QXJncyIsImxhc3RUaGlzIiwibGFzdEludm9rZVRpbWUiLCJsZWFkaW5nRWRnZSIsInRpbWVySWQiLCJ0aW1lckV4cGlyZWQiLCJsZWFkaW5nIiwicmVtYWluaW5nV2FpdCIsInRpbWVTaW5jZUxhc3RDYWxsIiwibGFzdENhbGxUaW1lIiwidGltZVNpbmNlTGFzdEludm9rZSIsIm1heGluZyIsIm5hdGl2ZU1pbiIsIm1heFdhaXQiLCJzaG91bGRJbnZva2UiLCJ0cmFpbGluZ0VkZ2UiLCJ0cmFpbGluZyIsImRlYm91bmNlZCIsImlzSW52b2tpbmciLCJuYXRpdmVNYXgiLCJtYXgiLCJtaW4iLCJkZWZhdWx0VmFsdWUiLCJ0eXBlZEFycmF5VGFncyIsImZsb2F0MzJUYWciLCJmbG9hdDY0VGFnIiwiaW50OFRhZyIsImludDE2VGFnIiwiaW50MzJUYWciLCJ1aW50OFRhZyIsInVpbnQ4Q2xhbXBlZFRhZyIsInVpbnQxNlRhZyIsInVpbnQzMlRhZyIsIm1lbW9pemVkIiwib3RoZXJBcmdzIiwiTUFYX0lOVEVHRVIiLCJfc2VsZiIsIldvcmtlckdsb2JhbFNjb3BlIiwiUHJpc20iLCJ1bmlxdWVJZCIsImVuY29kZSIsIlRva2VuIiwibyIsIm9iaklkIiwidiIsImxhbmd1YWdlcyIsInJlZGVmIiwiaW5zaWRlIiwiZ3JhbW1hciIsIm5ld1Rva2VuIiwiREZTIiwidmlzaXRlZCIsInBsdWdpbnMiLCJlbGVtZW50IiwiZWxlbWVudHMiLCJoaWdobGlnaHRFbGVtZW50IiwibGFuZ3VhZ2UiLCJub2RlTmFtZSIsIldvcmtlciIsIndvcmtlciIsImZpbGVuYW1lIiwiaGlnaGxpZ2h0ZWRDb2RlIiwiaW1tZWRpYXRlQ2xvc2UiLCJoaWdobGlnaHQiLCJ0b2tlbml6ZSIsInN0cmFyciIsInRva2VubG9vcCIsInBhdHRlcm5zIiwibG9va2JlaGluZCIsImdyZWVkeSIsImxvb2tiZWhpbmRMZW5ndGgiLCJkZWxOdW0iLCJuZXh0VG9rZW4iLCJtYXRjaGVkU3RyIiwiY29tYlN0ciIsIndyYXBwZWQiLCJhbGlhc2VzIiwiY3VycmVudFNjcmlwdCIsInJlYWR5U3RhdGUiLCJtYXJrdXAiLCJjb21tZW50IiwicHJvbG9nIiwiZG9jdHlwZSIsImNkYXRhIiwicHVuY3R1YXRpb24iLCJuYW1lc3BhY2UiLCJhdHRyLXZhbHVlIiwiYXR0ci1uYW1lIiwiZW50aXR5IiwieG1sIiwibWF0aG1sIiwic3ZnIiwiYXRydWxlIiwicnVsZSIsImltcG9ydGFudCIsImZ1bmN0aW9uIiwic3R5bGUtYXR0ciIsImNsaWtlIiwiY2xhc3MtbmFtZSIsImtleXdvcmQiLCJib29sZWFuIiwib3BlcmF0b3IiLCJqYXZhc2NyaXB0IiwicmVnZXgiLCJ0ZW1wbGF0ZS1zdHJpbmciLCJpbnRlcnBvbGF0aW9uIiwiaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbiIsImpzIiwiZmlsZUhpZ2hsaWdodCIsIkV4dGVuc2lvbnMiLCJweSIsInJiIiwicHMxIiwicHNtMSIsInNoIiwiYmF0IiwiaCIsInRleCIsInByZSIsImV4dGVuc2lvbiIsIm9ucmVhZHlzdGF0ZWNoYW5nZSIsIlRhcmdldCIsIm1hdGNoZXIiLCJkZWxlZ2F0ZSIsIk1hdGNoZXIiLCJyb3V0ZXMiLCJnZW5lcmF0ZU1hdGNoIiwic3RhcnRpbmdQYXRoIiwibmVzdGVkQ2FsbGJhY2siLCJmdWxsUGF0aCIsImFkZFJvdXRlIiwicm91dGVBcnJheSIsInN1YnN0ciIsInJvdXRlIiwiZWFjaFJvdXRlIiwiYmFzZVJvdXRlIiwiYWRkUm91dGVDYWxsYmFjayIsIm5vV2FybmluZyIsInRyeURlY29kZSIsInVyaSIsImFzQ29tcG9uZW50IiwiZGVjb2RlVVJJIiwiU3RhdGljU2VnbWVudCIsIkR5bmFtaWNTZWdtZW50IiwiU3RhclNlZ21lbnQiLCJFcHNpbG9uU2VnbWVudCIsInNwZWNpZmljaXR5Iiwic2VnbWVudHMiLCJyZXN1bHRzIiwic2VnbWVudCIsIlN0YXRlIiwiY2hhclNwZWMiLCJuZXh0U3RhdGVzIiwic29ydFNvbHV0aW9ucyIsInN0YXRlcyIsInJlY29nbml6ZUNoYXIiLCJSZWNvZ25pemVSZXN1bHRzIiwicXVlcnlQYXJhbXMiLCJmaW5kSGFuZGxlciIsImNhcHR1cmVzIiwiY3VycmVudENhcHR1cmUiLCJpc0R5bmFtaWMiLCJhZGRTZWdtZW50IiwiY3VycmVudFN0YXRlIiwiZWFjaENoYXIiLCJkZWNvZGVRdWVyeVBhcmFtUGFydCIsIndhcm4kMSIsInJlc29sdmVQYXRoIiwiYmFzZSIsInJlbGF0aXZlIiwiaXNQcm9taXNlIiwiZ2V0Um91dGVDb25maWciLCJyZXNvbHZlQXN5bmNDb21wb25lbnQiLCJleHBvcnRzJDEiLCJtYXBQYXJhbXMiLCJnZW5RdWVyeSIsImNhblJldXNlIiwidmlldyIsImNhblJldXNlRm4iLCJjYW5EZWFjdGl2YXRlIiwiZnJvbUNvbXBvbmVudCIsImV4cGVjdEJvb2xlYW4iLCJjYW5BY3RpdmF0ZSIsImFib3J0ZWQiLCJkZWFjdGl2YXRlIiwiY2FsbEhvb2tzIiwicmV1c2UiLCJhY3RpdmF0ZVF1ZXVlIiwic2F2ZUNoaWxkVmlldyIsImFjdGl2YXRlSG9vayIsImRhdGFIb29rIiwid2FpdEZvckRhdGEiLCJhY3RpdmF0ZWQiLCJsb2FkaW5nIiwiJGxvYWRpbmdSb3V0ZURhdGEiLCJfcm91dGVyVmlldyIsImNhY2hlZENoaWxkVmlldyIsIl9rZWVwQWxpdmVSb3V0ZXJWaWV3IiwiY2hpbGRWaWV3IiwiX3JlbmRlcmVkIiwiX3RyYW5zaXRpb25PbkxvYWQiLCJzZXRDdXJyZW50IiwiYWZ0ZXJEYXRhIiwiYWZ0ZXJBY3RpdmF0ZSIsImxvYWREYXRhIiwicG9zdEFjdGl2YXRlIiwicHJvY2Vzc0RhdGEiLCJwcm9taXNlcyIsInJlc29sdmVkVmFsIiwiaXNQbGFpbk9qYmVjdCIsImFwcGx5T3ZlcnJpZGUiLCJfVnVlJHV0aWwiLCJfcGFyZW50IiwiJHJvdXRlciIsIiRyb3V0ZSIsIl9jaGlsZHJlbiIsIl9kZWZpbmVNZXRhIiwiaG9va3NUb01lcmdlUkUiLCJWaWV3IiwiY29tcG9uZW50RGVmIiwidmlld0RlZiIsIl9pc0R5bmFtaWNMaXRlcmFsIiwicGFyZW50VmlldyIsIl9yb290VmlldyIsIl9jdXJyZW50VHJhbnNpdGlvbiIsImVsZW1lbnREaXJlY3RpdmUiLCJMaW5rIiwic2FtZU9yaWdpbiIsInByb3RvY29sIiwiaG9zdG5hbWUiLCJwb3J0IiwidG9nZ2xlQ2xhc3NlcyIsIm9uUHJpb3JpdHkiLCJMSU5LX1VQREFURSIsImFjdGl2ZUlkIiwiY2hpbGRMaW5rcyIsImV4aXN0aW5nSWQiLCJhY3RpdmVJZHMiLCJ1cGRhdGVDbGFzc2VzIiwib25Sb3V0ZVVwZGF0ZSIsIm9uQ2xpY2siLCJleGFjdCIsInByZXZBY3RpdmVDbGFzcyIsImFjdGl2ZUNsYXNzIiwibWV0YUtleSIsImN0cmxLZXkiLCJzaGlmdEtleSIsImRlZmF1bHRQcmV2ZW50ZWQiLCJidXR0b24iLCJnbyIsInBhdGhuYW1lIiwiaGlzdG9yeSIsInJvb3RSRSIsIm5ld1BhdGgiLCJzdHJpbmdpZnlQYXRoIiwidXBkYXRlQWN0aXZlTWF0Y2giLCJ1cGRhdGVIcmVmIiwiYWN0aXZlUkUiLCJxdWVyeVN0cmluZ1JFIiwiaXNBYnNvbHV0ZSIsImhyZWYiLCJmb3JtYXRQYXRoIiwiX2xpbmtBY3RpdmVDbGFzcyIsImRlc3QiLCJ0cmFpbGluZ1NsYXNoUkUiLCJndWFyZENvbXBvbmVudCIsImNvbXAiLCJiYWJlbEhlbHBlcnMiLCJjbGFzc0NhbGxDaGVjayIsImluc3RhbmNlIiwid2lsbEFkZFJvdXRlIiwiYWRkQ2hpbGQiLCJjb250ZXh0RW50ZXJlZCIsInNwZWNpYWxzIiwidmFsaWRDaGFycyIsImdlbmVyYXRlIiwiaW52YWxpZENoYXJzIiwicmVwZWF0IiwiaXNFcXVhbCIsImNoYXJzIiwicmV0dXJuZWQiLCJvQ3JlYXRlIiwiRiIsIlJvdXRlUmVjb2duaXplciIsInJvb3RTdGF0ZSIsImFsbFNlZ21lbnRzIiwiaXNFbXB0eSIsImFzIiwiaGFuZGxlcnNGb3IiLCJoYXNSb3V0ZSIsIm91dHB1dCIsImdlbmVyYXRlUXVlcnlTdHJpbmciLCJwYWlyIiwiYXJyYXlQYWlyIiwicGFyc2VRdWVyeVN0cmluZyIsInF1ZXJ5U3RyaW5nIiwia2V5TGVuZ3RoIiwicmVjb2duaXplIiwicGF0aExlbiIsInF1ZXJ5U3RhcnQiLCJpc1NsYXNoRHJvcHBlZCIsInNvbHV0aW9ucyIsImhhc2hSRSIsIkhUTUw1SGlzdG9yeSIsIm9uQ2hhbmdlIiwiYmFzZUVsIiwicmVwbGFjZVN0YXRlIiwicG9zIiwicGFnZVhPZmZzZXQiLCJ5IiwicGFnZVlPZmZzZXQiLCJwdXNoU3RhdGUiLCJoYXNoTWF0Y2giLCJIYXNoSGlzdG9yeSIsImhhc2hiYW5nIiwiZm9ybWF0dGVkUGF0aCIsImlzQWJzb2xvdXRlIiwiQWJzdHJhY3RIaXN0b3J5IiwiY3VycmVudFBhdGgiLCJSb3V0ZVRyYW5zaXRpb24iLCJhYm9ydCIsImFib3J0aW5nT25Mb2FkIiwiZGVhY3RpdmF0ZVF1ZXVlIiwicmV2ZXJzZURlYWN0aXZhdGVRdWV1ZSIsInJldmVyc2UiLCJyZXVzZVF1ZXVlIiwicnVuUXVldWUiLCJfb25UcmFuc2l0aW9uVmFsaWRhdGVkIiwiX3ZpZXciLCJfcmVmJGV4cGVjdEJvb2xlYW4iLCJfcmVmJHBvc3RBY3RpdmF0ZSIsIm5leHRDYWxsZWQiLCJvbkVycm9yIiwiZXJyIiwiX3N1cHByZXNzIiwib25Qcm9taXNlRXJyb3IiLCJuZXh0V2l0aEJvb2xlYW4iLCJuZXh0V2l0aERhdGEiLCJleHBvc2VkIiwiaW50ZXJuYWxLZXlzUkUiLCJSb3V0ZSIsIl9yZWNvZ25pemVyIiwiX25vdEZvdW5kSGFuZGxlciIsImhpc3RvcnlCYWNrZW5kcyIsImFic3RyYWN0IiwiaHRtbDUiLCJSb3V0ZXIiLCJfcmVmJGhhc2hiYW5nIiwiX3JlZiRhYnN0cmFjdCIsIl9yZWYkaGlzdG9yeSIsIl9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uIiwic2F2ZVNjcm9sbFBvc2l0aW9uIiwiX3JlZiR0cmFuc2l0aW9uT25Mb2FkIiwidHJhbnNpdGlvbk9uTG9hZCIsIl9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IiLCJzdXBwcmVzc1RyYW5zaXRpb25FcnJvciIsIl9yZWYkcm9vdCIsIl9yZWYkbGlua0FjdGl2ZUNsYXNzIiwibGlua0FjdGl2ZUNsYXNzIiwiYXBwIiwiX2d1YXJkUmVjb2duaXplciIsIl9zdGFydGVkIiwiX3N0YXJ0Q2IiLCJfY3VycmVudFJvdXRlIiwiX3ByZXZpb3VzVHJhbnNpdGlvbiIsIl9ub3RGb3VuZFJlZGlyZWN0IiwiX2JlZm9yZUVhY2hIb29rcyIsIl9hZnRlckVhY2hIb29rcyIsIl9yb290IiwiX2Fic3RyYWN0IiwiX2hhc2hiYW5nIiwiaGFzUHVzaFN0YXRlIiwiX2hpc3RvcnkiLCJfaGlzdG9yeUZhbGxiYWNrIiwiSGlzdG9yeSIsIl9tYXRjaCIsIl9zYXZlU2Nyb2xsUG9zaXRpb24iLCJfbWFwIiwicm9vdFBhdGgiLCJfbm90Rm91bmQiLCJfYWRkUm91dGUiLCJfYWRkUmVkaXJlY3QiLCJfYWRkQWxpYXMiLCJiZWZvcmVFYWNoIiwiX2FwcENvbnRhaW5lciIsIl9hcHBDb25zdHJ1Y3RvciIsIl9sb2NhdGlvbiIsImdlbmVyYXRlZFBhdGgiLCJjdXJyZW50UGFyYW1zIiwidGFyZ2V0UGFyYW1zIiwiZW5jb2RlVVJJIiwic3ViUm91dGVzIiwic3ViUGF0aCIsInJlZGlyZWN0UGF0aCIsIl9hZGRHdWFyZCIsImFsaWFzUGF0aCIsIm1hcHBlZFBhdGgiLCJfaGFuZGxlciIsInJlYWxQYXRoIiwiX2NoZWNrR3VhcmQiLCJfdGhpczMiLCJjdXJyZW50Um91dGUiLCJjdXJyZW50VHJhbnNpdGlvbiIsIl9wcmV2VHJhbnNpdGlvbiIsImJlZm9yZUhvb2tzIiwic3RhcnRUcmFuc2l0aW9uIiwiX3Bvc3RUcmFuc2l0aW9uIiwic2Nyb2xsVG8iLCJzY3JvbGxYIiwib2Zmc2V0VG9wIiwiZXh0ZXJuYWxWdWUiLCJsb2NhbHMiLCJ3ZWJwYWNrUG9seWZpbGwiLCJkZXByZWNhdGUiLCJwYXRocyJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NrQ25CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBckRBLEdBQUFLLEdBQUFDLE9BQUEsWUFDQUEsUUFBQSxzQkFBQUMsRUFBQUMsR0FJQSxJQURBLEdBQUFWLEdBQUFXLEVBQUFDLEVBQUEsRUFBQUMsS0FDUUQsRUFBQUgsRUFBQUssT0FBb0JGLElBQzVCRCxFQUFBRixFQUFBRyxHQUNBRyxFQUFBSixJQUNBRSxFQUFBRyxLQUFBQyxNQUFBSixFQUFBRSxFQUFBSixJQUNBSSxFQUFBSixHQUFBLENBRUEsS0FBQVgsSUFBQVUsR0FDQVosRUFBQUUsR0FBQVUsRUFBQVYsRUFHQSxLQURBTyxLQUFBRSxFQUFBQyxHQUNBRyxFQUFBQyxRQUNBRCxFQUFBSyxRQUFBWixLQUFBLEtBQUFQLEdBS0EsSUFBQUUsTUFLQWMsR0FDQUksRUFBQSxFQUNBQyxFQUFBLEVBQ0FDLEVBQUEsRUE2REEsT0FoQ0F0QixHQUFBdUIsRUFBQSxTQUFBWCxFQUFBWSxHQUVBLE9BQUFSLEVBQUFK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WVc4VCxFQUFPOVMsSUFBTSxtQnFEL3hZeEJoQixFQUFBLFlyRGl5WVdpVSxjcUQveFlYRixJQUVBLElyRGd5WU9oNUMsTUFBS2ltQyxJQUFNLG1CcUQveFlsQmhCLEVBQUEsYXJEa3lZRzlsQyxLQUFNLFdBQ0osT0FDRThtQyxJcUQveFlQLEdyRGd5WU9rVCxjcUQveFlQLEVyRGd5WU9ULFdBQ0U5dEMsS3FEL3hZVCxhckRneVlTNU4sS3FEL3hZVCxVckRneVlTMjdDLFlxRC94WVQsRXJEZ3lZU2g3QyxXcUQveFlULEVyRGd5WVNpN0MsS3FEL3hZVCx3Q3JEaXlZU2h1QyxLcUQveFlULE9yRGd5WVM1TixLcUQveFlULFNyRGd5WVMyN0MsWXFEL3hZVCxFckRneVlTaDdDLFVxRC94WVQsS3JEZ3lZU2k3QyxLcUQveFlULDJDckRpeVlTaHVDLEtxRC94WVQsZ0JyRGd5WVM1TixLcUQveFlULFFyRGd5WVMyN0MsWXFEL3hZVCxFckRneVlTaDdDLFVxRC94WVQsTXJEZ3lZU2k3QyxLcUQveFlULHVCckRpeVlTaHVDLEtxRC94WVQsZ0JyRGd5WVM1TixLcUQveFlULFFyRGd5WVMyN0MsWXFEL3hZVCxFckRneVlTaDdDLFVxRC94WVQsTXJEZ3lZU2k3QyxLcUQ3eFlULHlCckQrMFlNLFNBQVN2OUMsRUFBUUQsRUFBU0gsR0FFL0IsWUFVQSxTQUFTdUMsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsVUFBU0YsR0FSdkYrSixPQUFPeUQsZUFBZTdQLEVBQVMsY0FDN0J3SyxPQUFPLEdzRDUyWVYsSUFBQXRILEdBQUFyRCxFQUFBLEd0RGkzWUtzRCxFQUFVZixFQUF1QmMsRUFJckNsRCxlQUNFNEQsWXNEbDNZSHc1QyxTQUFBajZDLGN0RHEzWUdZLEtBQU0sV3NEcDNZVCxHQUFBa00sR0FBQXJMLEl0RHUzWUssUUFDRW81Qyx1QnNEdDNZUCxFdER1M1lPQyxtQkFDRUMsYXNEdDNZVCxFdER1M1lTQyxRQUNFenZDLE1zRHIzWVgsU3REczNZVzB2QyxLc0RyM1lYLEd0RHMzWVdDLGVBQWdCLFNBQXdCNytCLEdBQ3RDdlAsRUFBTSt0Qyx1QnNEcjNZbkIsS3REdzNZV3R2QyxNc0RwM1lYLFN0RHEzWVcwdkMsS3NEcDNZWCxHdERxM1lXQyxlQUFnQixTQUF3QjcrQixHQUN0Q3ZQLEVBQU0rdEMsdUJzRHAzWW5CLEt0RHUzWVd0dkMsTXNEbjNZWCxTdERvM1lXMHZDLEtzRG4zWVgsR3REbzNZV0MsZUFBZ0IsU0FBd0I3K0IsR0FDdEN2UCxFQUFNK3RDLHVCc0RuM1luQixNdER1M1lPVixXQUNFOXRDLEtzRGwzWVQsY3REbTNZUzVOLEtzRGwzWVQsVXREbTNZUzI3QyxZc0RsM1lULEV0RG0zWVNoN0MsVXNEbDNZVCxFdERtM1lTaTdDLEtzRGwzWVQsU3REbzNZU2h1QyxLc0RsM1lULFN0RG0zWVM1TixLc0RsM1lULFN0RG0zWVMyN0MsWXNEbDNZVCxFdERtM1lTaDdDLFVzRGwzWVQsTXREbTNZU2k3QyxLc0RsM1lULFN0RG8zWVNodUMsS3NEbDNZVCxldERtM1lTNU4sS3NEbDNZVCxTdERtM1lTMjdDLFlzRGwzWVQsRXREbTNZU2g3QyxVc0RsM1lULE10RG0zWVNpN0MsS3NEbDNZVCwwQnREbzNZU2h1QyxLc0RsM1lULGN0RG0zWVM1TixLc0RsM1lULFN0RG0zWVMyN0MsWXNEbDNZVCxFdERtM1lTaDdDLFVzRGwzWVQsTXREbTNZU2k3QyxLc0RsM1lULDJCdERvM1lTaHVDLEtzRGwzWVQsd0J0RG0zWVM1TixLc0RsM1lULFd0RG0zWVMyN0MsWXNEbDNZVCxFdERtM1lTaDdDLFVzRGwzWVQsTXREbTNZU2k3QyxLc0RoM1lULG9EdERpOFlNLFNBQVN2OUMsRUFBUUQsRUFBU0gsR0FFL0IsWUFVQSxTQUFTdUMsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsVUFBU0YsR0FSdkYrSixPQUFPeUQsZUFBZTdQLEVBQVMsY0FDN0J3SyxPQUFPLEd1RGxoWlYsSUFBQXRILEdBQUFyRCxFQUFBLEd2RHVoWktzRCxFQUFVZixFQUF1QmMsRUFJckNsRCxlQUNFNEQsWXVEeGha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LEdBQUFvcEIsV0FDQUEsR0FDQUEsR0FBQXBkLEtBQUEsT0FBQTRVLElBQ0ssZUFBQTVWLEVBQUFNLElBQUF3UCxVQUFBZ3FCLElBQUEsY0FBQXQvQixLQUFBeEksT0FBQXlJLFVBQUFDLFlBQ0xpN0IsUUFBQUMsSUFBQSwyR0FHQyxHQUVEamtDLEVBQUFELFFBQUFra0IsS2xPNmtzQjhCOWpCLEtBQUtKLEVBQVUsV0FBYSxNQUFPNEUsU0FBWS9FLEVBQW9CLE1BSTNGLFNBQVNJLEVBQVFELEdtTzE2L0J2QkMsRUFBQUQsUUFBQSxXQUE2QixTQUFBeUcsT0FBQSxvQ25PaTcvQnZCLFNBQVN4RyxFQUFRRCxHb09qNy9CdkJDLEVBQUFELFFBQUEsU0FBQUMsR0FRQSxNQVBBQSxHQUFBdzBFLGtCQUNBeDBFLEVBQUF5MEUsVUFBQSxhQUNBejBFLEVBQUEwMEUsU0FFQTEwRSxFQUFBb29CLFlBQ0Fwb0IsRUFBQXcwRSxnQkFBQSxHQUVBeDBFLElwT3k3L0JNLFNBQVNBLEVBQVFEIiwiZmlsZSI6InZ1ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4vKioqKioqLyBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gd2luZG93W1wid2VicGFja0pzb25wXCJdO1xuLyoqKioqKi8gXHR3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSBmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhjaHVua0lkcywgbW9yZU1vZHVsZXMpIHtcbi8qKioqKiovIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbi8qKioqKiovIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCBjYWxsYmFja3MgPSBbXTtcbi8qKioqKiovIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuLyoqKioqKi8gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuLyoqKioqKi8gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKVxuLyoqKioqKi8gXHRcdFx0XHRjYWxsYmFja3MucHVzaC5hcHBseShjYWxsYmFja3MsIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSk7XG4vKioqKioqLyBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbi8qKioqKiovIFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGNodW5rSWRzLCBtb3JlTW9kdWxlcyk7XG4vKioqKioqLyBcdFx0d2hpbGUoY2FsbGJhY2tzLmxlbmd0aClcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrcy5zaGlmdCgpLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8qKioqKiovIFx0Ly8gXCIwXCIgbWVhbnMgXCJhbHJlYWR5IGxvYWRlZFwiXG4vKioqKioqLyBcdC8vIEFycmF5IG1lYW5zIFwibG9hZGluZ1wiLCBhcnJheSBjb250YWlucyBjYWxsYmFja3Ncbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbi8qKioqKiovIFx0XHQwOjAsXG4vKioqKioqLyBcdFx0MTowLFxuLyoqKioqKi8gXHRcdDI6MFxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4vKioqKioqLyBcdC8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSBmdW5jdGlvbiByZXF1aXJlRW5zdXJlKGNodW5rSWQsIGNhbGxiYWNrKSB7XG4vKioqKioqLyBcdFx0Ly8gXCIwXCIgaXMgdGhlIHNpZ25hbCBmb3IgXCJhbHJlYWR5IGxvYWRlZFwiXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIGFuIGFycmF5IG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gIT09IHVuZGVmaW5lZCkge1xuLyoqKioqKi8gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdLnB1c2goY2FsbGJhY2spO1xuLyoqKioqKi8gXHRcdH0gZWxzZSB7XG4vKioqKioqLyBcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG4vKioqKioqLyBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbY2FsbGJhY2tdO1xuLyoqKioqKi8gXHRcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuLyoqKioqKi8gXHRcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuLyoqKioqKi8gXHRcdFx0c2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0Jztcbi8qKioqKiovIFx0XHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04Jztcbi8qKioqKiovIFx0XHRcdHNjcmlwdC5hc3luYyA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdFx0c2NyaXB0LnNyYyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuYXBwLmpzXCI7XG4vKioqKioqLyBcdFx0XHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9oeWJyaWQtdGhvcml1bS9kZXYvYXBwL1wiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9WdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTtcblx0XG5cdHZhciBfVnVlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Z1ZSk7XG5cdFxuXHR2YXIgX3Z1ZVJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjEyKTtcblx0XG5cdHZhciBfdnVlUm91dGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Z1ZVJvdXRlcik7XG5cdFxuXHR2YXIgX3JvdXRlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpO1xuXHRcblx0dmFyIF9yb3V0ZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcm91dGVzKTtcblx0XG5cdHZhciBfaHlicmlkVGhvcml1bSA9IF9fd2VicGFja19yZXF1aXJlX18oNjkpO1xuXHRcblx0dmFyIF9oeWJyaWRUaG9yaXVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2h5YnJpZFRob3JpdW0pO1xuXHRcblx0dmFyIF9wcmlzbWpzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjQpO1xuXHRcblx0dmFyIF9wcmlzbWpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ByaXNtanMpO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMTg5KTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0dmFyIF9pbmRleDMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5MCk7XG5cdFxuXHR2YXIgX2luZGV4NCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4Myk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X1Z1ZTIuZGVmYXVsdC5jb25maWcuZGVidWcgPSB0cnVlO1xuXHRcblx0X1Z1ZTIuZGVmYXVsdC51c2UoX3Z1ZVJvdXRlcjIuZGVmYXVsdCk7XG5cdF9WdWUyLmRlZmF1bHQudXNlKF9oeWJyaWRUaG9yaXVtMi5kZWZhdWx0KTtcblx0XG5cdHZhciByb3V0ZXIgPSBuZXcgX3Z1ZVJvdXRlcjIuZGVmYXVsdCgpO1xuXHR2YXIgQXBwID0gX1Z1ZTIuZGVmYXVsdC5leHRlbmQoe1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIFNpZGVOYXY6IF9pbmRleDIuZGVmYXVsdCxcblx0ICAgIFNpdGVIZWFkZXI6IF9pbmRleDQuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGxpZ2VyRW5kUG9pbnQ6ICdodHRwczovL2FwaS5jbXMudGVsdXMuY29tL2xlZ2FscycsXG5cdCAgICAgIGxpZ2VyQXBwbGljYXRpb25LZXk6ICdiOTczOGQ2N2I4OWRmYzc4Mjc0NmQ0YTljZjRhMTA5Mydcblx0ICAgIH07XG5cdCAgfVxuXHR9KTtcblx0cm91dGVyLm1hcChfcm91dGVzMi5kZWZhdWx0KTtcblx0cm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICBfcHJpc21qczIuZGVmYXVsdC5oaWdobGlnaHRBbGwoKTtcblx0ICB9LCAwKTtcblx0fSk7XG5cdHJvdXRlci5yZWRpcmVjdCh7XG5cdCAgJyonOiAnL2dldC1zdGFydGVkJ1xuXHR9KTtcblx0cm91dGVyLnN0YXJ0KEFwcCwgJyNhcHAtbWFpbicpO1xuXHRcblx0Ly8gcm91dGVyLmdvKCcvZ2V0LXN0YXJ0ZWQnKTtcblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qXHJcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdFx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG5cdCovXHJcblx0Ly8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGxpc3QgPSBbXTtcclxuXHRcclxuXHRcdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRcdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcclxuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpdGVtID0gdGhpc1tpXTtcclxuXHRcdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0XHR9O1xyXG5cdFxyXG5cdFx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRcdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXHJcblx0XHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XHJcblx0XHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cclxuXHRcdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdHJldHVybiBsaXN0O1xyXG5cdH07XHJcblxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRcdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcblx0Ki9cblx0dmFyIHN0eWxlc0luRG9tID0ge30sXG5cdFx0bWVtb2l6ZSA9IGZ1bmN0aW9uKGZuKSB7XG5cdFx0XHR2YXIgbWVtbztcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdHJldHVybiBtZW1vO1xuXHRcdFx0fTtcblx0XHR9LFxuXHRcdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIC9tc2llIFs2LTldXFxiLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuXHRcdH0pLFxuXHRcdGdldEhlYWRFbGVtZW50ID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XG5cdFx0fSksXG5cdFx0c2luZ2xldG9uRWxlbWVudCA9IG51bGwsXG5cdFx0c2luZ2xldG9uQ291bnRlciA9IDAsXG5cdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AgPSBbXTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRcdGlmKGZhbHNlKSB7XG5cdFx0XHRpZih0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0XHR9XG5cdFxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHRcdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0XHRpZiAodHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblx0XG5cdFx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIDxoZWFkPi5cblx0XHRpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXHRcblx0XHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QpO1xuXHRcdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cdFxuXHRcdHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuXHRcdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdFx0fVxuXHRcdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QpO1xuXHRcdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdFx0fVxuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cdFx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspXG5cdFx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXHRcdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpIHtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXHRcdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YXIgcGFydHMgPSBbXTtcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0KSB7XG5cdFx0dmFyIHN0eWxlcyA9IFtdO1xuXHRcdHZhciBuZXdTdHlsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdFx0dmFyIGlkID0gaXRlbVswXTtcblx0XHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXHRcdFx0aWYoIW5ld1N0eWxlc1tpZF0pXG5cdFx0XHRcdHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHN0eWxlcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCkge1xuXHRcdHZhciBoZWFkID0gZ2V0SGVhZEVsZW1lbnQoKTtcblx0XHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcFtzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblx0XHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdFx0aWYoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgaGVhZC5maXJzdENoaWxkKTtcblx0XHRcdH0gZWxzZSBpZihsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHRcdH1cblx0XHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGVFbGVtZW50KTtcblx0XHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcuIE11c3QgYmUgJ3RvcCcgb3IgJ2JvdHRvbScuXCIpO1xuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuXHRcdHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG5cdFx0dmFyIGlkeCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGVFbGVtZW50KTtcblx0XHRpZihpZHggPj0gMCkge1xuXHRcdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuXHRcdHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cdFx0c3R5bGVFbGVtZW50LnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdFx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCk7XG5cdFx0cmV0dXJuIHN0eWxlRWxlbWVudDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG5cdFx0dmFyIHN0eWxlRWxlbWVudCwgdXBkYXRlLCByZW1vdmU7XG5cdFxuXHRcdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblx0XHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50KTtcblx0XHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcblx0XHRcdH07XG5cdFx0fVxuXHRcblx0XHR1cGRhdGUob2JqKTtcblx0XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuXHRcdFx0aWYobmV3T2JqKSB7XG5cdFx0XHRcdGlmKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcClcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXHRcblx0dmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgdGV4dFN0b3JlID0gW107XG5cdFxuXHRcdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cdFx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0XHR9O1xuXHR9KSgpO1xuXHRcblx0ZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZUVsZW1lbnQsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHRcdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblx0XG5cdFx0aWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XG5cdFx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdFx0c3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlRWxlbWVudCwgb2JqKSB7XG5cdFx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdFx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXHRcblx0XHRpZiAobWVkaWEpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSk7XG5cdFx0fVxuXHRcblx0XHRpZiAoc291cmNlTWFwKSB7XG5cdFx0XHQvLyBodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2RldnRvb2xzL2RvY3MvamF2YXNjcmlwdC1kZWJ1Z2dpbmdcblx0XHRcdC8vIHRoaXMgbWFrZXMgc291cmNlIG1hcHMgaW5zaWRlIHN0eWxlIHRhZ3Mgd29yayBwcm9wZXJseSBpbiBDaHJvbWVcblx0XHRcdGNzcyArPSAnXFxuLyojIHNvdXJjZVVSTD0nICsgc291cmNlTWFwLnNvdXJjZXNbMF0gKyAnICovJztcblx0XHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdFx0fVxuXHRcblx0XHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG5cdFx0XHRcdHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG5cdFx0XHR9XG5cdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdFx0fVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHt2YXIgY2hlY2tHbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMSk7XG5cdFxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xuXHR2YXIgZnJlZUdsb2JhbCA9IGNoZWNrR2xvYmFsKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsKTtcblx0XG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG5cdHZhciBmcmVlU2VsZiA9IGNoZWNrR2xvYmFsKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYpO1xuXHRcblx0LyoqIERldGVjdCBgdGhpc2AgYXMgdGhlIGdsb2JhbCBvYmplY3QuICovXG5cdHZhciB0aGlzR2xvYmFsID0gY2hlY2tHbG9iYWwodHlwZW9mIHRoaXMgPT0gJ29iamVjdCcgJiYgdGhpcyk7XG5cdFxuXHQvKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cblx0dmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IHRoaXNHbG9iYWwgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gcm9vdDtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAdHlwZSB7RnVuY3Rpb259XG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoJ2FiYycpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoXy5ub29wKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNBcnJheTtcblxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjEzKVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2NSlcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUlzTmF0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDMpLFxuXHQgICAgZ2V0VmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExOSk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG5cdCAgdmFyIHZhbHVlID0gZ2V0VmFsdWUob2JqZWN0LCBrZXkpO1xuXHQgIHJldHVybiBiYXNlSXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0TmF0aXZlO1xuXG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG5cdCAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcblx0ICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdDtcblxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuXHQgKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdExpa2U7XG5cblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBsaXN0Q2FjaGVDbGVhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTMwKSxcblx0ICAgIGxpc3RDYWNoZURlbGV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMxKSxcblx0ICAgIGxpc3RDYWNoZUdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMyKSxcblx0ICAgIGxpc3RDYWNoZUhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKSxcblx0ICAgIGxpc3RDYWNoZVNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTM0KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBMaXN0Q2FjaGUoZW50cmllcykge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXHRcblx0ICB0aGlzLmNsZWFyKCk7XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuXHQgICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEFkZCBtZXRob2RzIHRvIGBMaXN0Q2FjaGVgLlxuXHRMaXN0Q2FjaGUucHJvdG90eXBlLmNsZWFyID0gbGlzdENhY2hlQ2xlYXI7XG5cdExpc3RDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbGlzdENhY2hlRGVsZXRlO1xuXHRMaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IGxpc3RDYWNoZUdldDtcblx0TGlzdENhY2hlLnByb3RvdHlwZS5oYXMgPSBsaXN0Q2FjaGVIYXM7XG5cdExpc3RDYWNoZS5wcm90b3R5cGUuc2V0ID0gbGlzdENhY2hlU2V0O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBMaXN0Q2FjaGU7XG5cblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZXEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MSk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGBrZXlgIGlzIGZvdW5kIGluIGBhcnJheWAgb2Yga2V5LXZhbHVlIHBhaXJzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuXHQgKiBAcGFyYW0geyp9IGtleSBUaGUga2V5IHRvIHNlYXJjaCBmb3IuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBhc3NvY0luZGV4T2YoYXJyYXksIGtleSkge1xuXHQgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdCAgd2hpbGUgKGxlbmd0aC0tKSB7XG5cdCAgICBpZiAoZXEoYXJyYXlbbGVuZ3RoXVswXSwga2V5KSkge1xuXHQgICAgICByZXR1cm4gbGVuZ3RoO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYXNzb2NJbmRleE9mO1xuXG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzS2V5YWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI3KTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBkYXRhIGZvciBgbWFwYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSByZWZlcmVuY2Uga2V5LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWFwIGRhdGEuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRNYXBEYXRhKG1hcCwga2V5KSB7XG5cdCAgdmFyIGRhdGEgPSBtYXAuX19kYXRhX187XG5cdCAgcmV0dXJuIGlzS2V5YWJsZShrZXkpXG5cdCAgICA/IGRhdGFbdHlwZW9mIGtleSA9PSAnc3RyaW5nJyA/ICdzdHJpbmcnIDogJ2hhc2gnXVxuXHQgICAgOiBkYXRhLm1hcDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRNYXBEYXRhO1xuXG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNTeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlSXNEZWVwUHJvcCA9IC9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sXG5cdCAgICByZUlzUGxhaW5Qcm9wID0gL15cXHcqJC87XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lIGFuZCBub3QgYSBwcm9wZXJ0eSBwYXRoLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkga2V5cyBvbi5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHQgIGlmICh0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicgfHxcblx0ICAgICAgdmFsdWUgPT0gbnVsbCB8fCBpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICByZXR1cm4gcmVJc1BsYWluUHJvcC50ZXN0KHZhbHVlKSB8fCAhcmVJc0RlZXBQcm9wLnRlc3QodmFsdWUpIHx8XG5cdCAgICAob2JqZWN0ICE9IG51bGwgJiYgdmFsdWUgaW4gT2JqZWN0KG9iamVjdCkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzS2V5O1xuXG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE5hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBuYXRpdmVDcmVhdGUgPSBnZXROYXRpdmUoT2JqZWN0LCAnY3JlYXRlJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG5hdGl2ZUNyZWF0ZTtcblxuXG4vKioqLyB9LFxuLyogMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc1N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBJTkZJTklUWSA9IDEgLyAwO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcga2V5IGlmIGl0J3Mgbm90IGEgc3RyaW5nIG9yIHN5bWJvbC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cblx0ICogQHJldHVybnMge3N0cmluZ3xzeW1ib2x9IFJldHVybnMgdGhlIGtleS5cblx0ICovXG5cdGZ1bmN0aW9uIHRvS2V5KHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fCBpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgdmFyIHJlc3VsdCA9ICh2YWx1ZSArICcnKTtcblx0ICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9LZXk7XG5cblxuLyoqKi8gfSxcbi8qIDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGxvb3NlbHkgYmFzZWQgb25cblx0ICogW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvbGVuZ3RoKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzTGVuZ3RoKDMpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNMZW5ndGgoSW5maW5pdHkpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzTGVuZ3RoKCczJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiZcblx0ICAgIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0xlbmd0aDtcblxuXG4vKioqLyB9LFxuLyogMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc09iamVjdExpa2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZVxuXHQgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNTeW1ib2woJ2FiYycpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG5cdCAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzU3ltYm9sO1xuXG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG1hcENhY2hlQ2xlYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNSksXG5cdCAgICBtYXBDYWNoZURlbGV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTM2KSxcblx0ICAgIG1hcENhY2hlR2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzcpLFxuXHQgICAgbWFwQ2FjaGVIYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCksXG5cdCAgICBtYXBDYWNoZVNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTM5KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbWFwIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cblx0ICovXG5cdGZ1bmN0aW9uIE1hcENhY2hlKGVudHJpZXMpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblx0XG5cdCAgdGhpcy5jbGVhcigpO1xuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcblx0ICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBBZGQgbWV0aG9kcyB0byBgTWFwQ2FjaGVgLlxuXHRNYXBDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBtYXBDYWNoZUNsZWFyO1xuXHRNYXBDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbWFwQ2FjaGVEZWxldGU7XG5cdE1hcENhY2hlLnByb3RvdHlwZS5nZXQgPSBtYXBDYWNoZUdldDtcblx0TWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IG1hcENhY2hlSGFzO1xuXHRNYXBDYWNoZS5wcm90b3R5cGUuc2V0ID0gbWFwQ2FjaGVTZXQ7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IE1hcENhY2hlO1xuXG5cbi8qKiovIH0sXG4vKiAxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuXHQgICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0Z1bmN0aW9uKF8pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG5cdCAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG5cdCAgLy8gaW4gU2FmYXJpIDggd2hpY2ggcmV0dXJucyAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXkgYW5kIHdlYWsgbWFwIGNvbnN0cnVjdG9ycyxcblx0ICAvLyBhbmQgUGhhbnRvbUpTIDEuOSB3aGljaCByZXR1cm5zICdmdW5jdGlvbicgZm9yIGBOb2RlTGlzdGAgaW5zdGFuY2VzLlxuXHQgIHZhciB0YWcgPSBpc09iamVjdCh2YWx1ZSkgPyBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuXHQgIHJldHVybiB0YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzRnVuY3Rpb247XG5cblxuLyoqKi8gfSxcbi8qIDE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0XG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHQoZnVuY3Rpb24gKCkge1xuXHQgIHRyeSB7XG5cdCAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdHJ5IHtcblx0ICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGlzIG5vdCBkZWZpbmVkJyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9ICgpKVxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIGRyYWluaW5nID0gZmFsc2U7XG5cdHZhciBjdXJyZW50UXVldWU7XG5cdHZhciBxdWV1ZUluZGV4ID0gLTE7XG5cdFxuXHRmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG5cdCAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICB9XG5cdCAgICBpZiAocXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgZHJhaW5RdWV1ZSgpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuXHQgICAgaWYgKGRyYWluaW5nKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHRpbWVvdXQgPSBjYWNoZWRTZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG5cdCAgICBkcmFpbmluZyA9IHRydWU7XG5cdFxuXHQgICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIHdoaWxlKGxlbikge1xuXHQgICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuXHQgICAgICAgIHF1ZXVlID0gW107XG5cdCAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgY2FjaGVkQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dChkcmFpblF1ZXVlLCAwKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHByb2Nlc3Mub24gPSBub29wO1xuXHRwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5vbmNlID0gbm9vcDtcblx0cHJvY2Vzcy5vZmYgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xuXHRwcm9jZXNzLmVtaXQgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5cdHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cbi8qKiovIH0sXG4vKiAyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2RlZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdFxuXHR2YXIgX2RlZmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUobmV3VmFsKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIGlmIChuZXdWYWwgPT09IHRydWUpIHtcblx0ICAgICAgKDAsIF9kZWZlcjIuZGVmYXVsdCkoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIF90aGlzLmVsLnRhYkluZGV4ID0gMDtcblx0ICAgICAgICBfdGhpcy5lbC5mb2N1cygpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdH07IC8qXG5cdCAgICAgQGRlc2MgQWRkIGJlaGF2aW9yIHRvIGFueSBlbGVtZW50LlxuXHQgICAgIFdoZW4gZXZhbCB0byB0cnVlLCBpdCB3aWxsIHNldCBlbGVtZW50IHRhYiBpbmRleCB0byAwIGFuZCBmb2N1cyBvbiBpdC5cblx0ICAgICBFeGFtcGxlOiA8ZGl2IHNldC1mb2N1cz1cIndpbGxGb2N1c1doZW5UcnVlXCI+PC9kaXY+XG5cdCAgICovXG5cbi8qKiovIH0sXG4vKiAyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V2ZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNzApO1xuXHRcblx0dmFyIF9ldmVudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXZlbnRzKTtcblx0XG5cdHZhciBfeGhyUmVzcG9uc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcxKTtcblx0XG5cdHZhciBfeGhyUmVzcG9uc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfeGhyUmVzcG9uc2UpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFtfZXZlbnRzMi5kZWZhdWx0LCBfeGhyUmVzcG9uc2UyLmRlZmF1bHRdO1xuXG4vKioqLyB9LFxuLyogMjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXROYXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLFxuXHQgICAgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBNYXAgPSBnZXROYXRpdmUocm9vdCwgJ01hcCcpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBNYXA7XG5cblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTGlzdENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KSxcblx0ICAgIHN0YWNrQ2xlYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NCksXG5cdCAgICBzdGFja0RlbGV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ1KSxcblx0ICAgIHN0YWNrR2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpLFxuXHQgICAgc3RhY2tIYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NyksXG5cdCAgICBzdGFja1NldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ4KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgc3RhY2sgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuXHQgKi9cblx0ZnVuY3Rpb24gU3RhY2soZW50cmllcykge1xuXHQgIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlKGVudHJpZXMpO1xuXHR9XG5cdFxuXHQvLyBBZGQgbWV0aG9kcyB0byBgU3RhY2tgLlxuXHRTdGFjay5wcm90b3R5cGUuY2xlYXIgPSBzdGFja0NsZWFyO1xuXHRTdGFjay5wcm90b3R5cGVbJ2RlbGV0ZSddID0gc3RhY2tEZWxldGU7XG5cdFN0YWNrLnByb3RvdHlwZS5nZXQgPSBzdGFja0dldDtcblx0U3RhY2sucHJvdG90eXBlLmhhcyA9IHN0YWNrSGFzO1xuXHRTdGFjay5wcm90b3R5cGUuc2V0ID0gc3RhY2tTZXQ7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFN0YWNrO1xuXG5cbi8qKiovIH0sXG4vKiAyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG5cdHZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU3ltYm9sO1xuXG5cbi8qKiovIH0sXG4vKiAyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNhc3RQYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSksXG5cdCAgICBpc0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpLFxuXHQgICAgdG9LZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5nZXRgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVmYXVsdCB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUdldChvYmplY3QsIHBhdGgpIHtcblx0ICBwYXRoID0gaXNLZXkocGF0aCwgb2JqZWN0KSA/IFtwYXRoXSA6IGNhc3RQYXRoKHBhdGgpO1xuXHRcblx0ICB2YXIgaW5kZXggPSAwLFxuXHQgICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblx0XG5cdCAgd2hpbGUgKG9iamVjdCAhPSBudWxsICYmIGluZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICBvYmplY3QgPSBvYmplY3RbdG9LZXkocGF0aFtpbmRleCsrXSldO1xuXHQgIH1cblx0ICByZXR1cm4gKGluZGV4ICYmIGluZGV4ID09IGxlbmd0aCkgPyBvYmplY3QgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUdldDtcblxuXG4vKioqLyB9LFxuLyogMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXRQcm90b3R5cGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNyk7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaGFzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30ga2V5IFRoZSBrZXkgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VIYXMob2JqZWN0LCBrZXkpIHtcblx0ICAvLyBBdm9pZCBhIGJ1ZyBpbiBJRSAxMC0xMSB3aGVyZSBvYmplY3RzIHdpdGggYSBbW1Byb3RvdHlwZV1dIG9mIGBudWxsYCxcblx0ICAvLyB0aGF0IGFyZSBjb21wb3NlZCBlbnRpcmVseSBvZiBpbmRleCBwcm9wZXJ0aWVzLCByZXR1cm4gYGZhbHNlYCBmb3Jcblx0ICAvLyBgaGFzT3duUHJvcGVydHlgIGNoZWNrcyBvZiB0aGVtLlxuXHQgIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJlxuXHQgICAgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpIHx8XG5cdCAgICAgICh0eXBlb2Ygb2JqZWN0ID09ICdvYmplY3QnICYmIGtleSBpbiBvYmplY3QgJiYgZ2V0UHJvdG90eXBlKG9iamVjdCkgPT09IG51bGwpKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSGFzO1xuXG5cbi8qKiovIH0sXG4vKiAyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VJc0VxdWFsRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKSxcblx0ICAgIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KSxcblx0ICAgIGlzT2JqZWN0TGlrZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNFcXVhbGAgd2hpY2ggc3VwcG9ydHMgcGFydGlhbCBjb21wYXJpc29uc1xuXHQgKiBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0ICogQHBhcmFtIHtib29sZWFufSBbYml0bWFza10gVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy5cblx0ICogIFRoZSBiaXRtYXNrIG1heSBiZSBjb21wb3NlZCBvZiB0aGUgZm9sbG93aW5nIGZsYWdzOlxuXHQgKiAgICAgMSAtIFVub3JkZXJlZCBjb21wYXJpc29uXG5cdCAqICAgICAyIC0gUGFydGlhbCBjb21wYXJpc29uXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgYHZhbHVlYCBhbmQgYG90aGVyYCBvYmplY3RzLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUlzRXF1YWwodmFsdWUsIG90aGVyLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuXHQgIGlmICh2YWx1ZSA9PT0gb3RoZXIpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICBpZiAodmFsdWUgPT0gbnVsbCB8fCBvdGhlciA9PSBudWxsIHx8ICghaXNPYmplY3QodmFsdWUpICYmICFpc09iamVjdExpa2Uob3RoZXIpKSkge1xuXHQgICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG5cdCAgfVxuXHQgIHJldHVybiBiYXNlSXNFcXVhbERlZXAodmFsdWUsIG90aGVyLCBiYXNlSXNFcXVhbCwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsO1xuXG5cbi8qKiovIH0sXG4vKiAyOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnByb3BlcnR5YCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eShrZXkpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICByZXR1cm4gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBvYmplY3Rba2V5XTtcblx0ICB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VQcm9wZXJ0eTtcblxuXG4vKioqLyB9LFxuLyogMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KSxcblx0ICAgIHN0cmluZ1RvUGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ5KTtcblx0XG5cdC8qKlxuXHQgKiBDYXN0cyBgdmFsdWVgIHRvIGEgcGF0aCBhcnJheSBpZiBpdCdzIG5vdCBvbmUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgY2FzdCBwcm9wZXJ0eSBwYXRoIGFycmF5LlxuXHQgKi9cblx0ZnVuY3Rpb24gY2FzdFBhdGgodmFsdWUpIHtcblx0ICByZXR1cm4gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZSA6IHN0cmluZ1RvUGF0aCh2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gY2FzdFBhdGg7XG5cblxuLyoqKi8gfSxcbi8qIDMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgU2V0Q2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzKSxcblx0ICAgIGFycmF5U29tZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTcpO1xuXHRcblx0LyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG5cdHZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcblx0ICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGFycmF5cyB3aXRoIHN1cHBvcnQgZm9yXG5cdCAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IG90aGVyIFRoZSBvdGhlciBhcnJheSB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcblx0ICogIGZvciBtb3JlIGRldGFpbHMuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBhcnJheWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcnJheXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGVxdWFsQXJyYXlzKGFycmF5LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuXHQgIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUcsXG5cdCAgICAgIGFyckxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcblx0ICAgICAgb3RoTGVuZ3RoID0gb3RoZXIubGVuZ3RoO1xuXHRcblx0ICBpZiAoYXJyTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhKGlzUGFydGlhbCAmJiBvdGhMZW5ndGggPiBhcnJMZW5ndGgpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cblx0ICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChhcnJheSk7XG5cdCAgaWYgKHN0YWNrZWQpIHtcblx0ICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuXHQgIH1cblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgcmVzdWx0ID0gdHJ1ZSxcblx0ICAgICAgc2VlbiA9IChiaXRtYXNrICYgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRykgPyBuZXcgU2V0Q2FjaGUgOiB1bmRlZmluZWQ7XG5cdFxuXHQgIHN0YWNrLnNldChhcnJheSwgb3RoZXIpO1xuXHRcblx0ICAvLyBJZ25vcmUgbm9uLWluZGV4IHByb3BlcnRpZXMuXG5cdCAgd2hpbGUgKCsraW5kZXggPCBhcnJMZW5ndGgpIHtcblx0ICAgIHZhciBhcnJWYWx1ZSA9IGFycmF5W2luZGV4XSxcblx0ICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2luZGV4XTtcblx0XG5cdCAgICBpZiAoY3VzdG9taXplcikge1xuXHQgICAgICB2YXIgY29tcGFyZWQgPSBpc1BhcnRpYWxcblx0ICAgICAgICA/IGN1c3RvbWl6ZXIob3RoVmFsdWUsIGFyclZhbHVlLCBpbmRleCwgb3RoZXIsIGFycmF5LCBzdGFjaylcblx0ICAgICAgICA6IGN1c3RvbWl6ZXIoYXJyVmFsdWUsIG90aFZhbHVlLCBpbmRleCwgYXJyYXksIG90aGVyLCBzdGFjayk7XG5cdCAgICB9XG5cdCAgICBpZiAoY29tcGFyZWQgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBpZiAoY29tcGFyZWQpIHtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHQgICAgICByZXN1bHQgPSBmYWxzZTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIGFycmF5cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuXHQgICAgaWYgKHNlZW4pIHtcblx0ICAgICAgaWYgKCFhcnJheVNvbWUob3RoZXIsIGZ1bmN0aW9uKG90aFZhbHVlLCBvdGhJbmRleCkge1xuXHQgICAgICAgICAgICBpZiAoIXNlZW4uaGFzKG90aEluZGV4KSAmJlxuXHQgICAgICAgICAgICAgICAgKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykpKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIHNlZW4uYWRkKG90aEluZGV4KTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSkpIHtcblx0ICAgICAgICByZXN1bHQgPSBmYWxzZTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmICghKFxuXHQgICAgICAgICAgYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8XG5cdCAgICAgICAgICAgIGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKVxuXHQgICAgICAgICkpIHtcblx0ICAgICAgcmVzdWx0ID0gZmFsc2U7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgIH1cblx0ICBzdGFja1snZGVsZXRlJ10oYXJyYXkpO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXF1YWxBcnJheXM7XG5cblxuLyoqKi8gfSxcbi8qIDMxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBob3N0IG9iamVjdCBpbiBJRSA8IDkuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0hvc3RPYmplY3QodmFsdWUpIHtcblx0ICAvLyBNYW55IGhvc3Qgb2JqZWN0cyBhcmUgYE9iamVjdGAgb2JqZWN0cyB0aGF0IGNhbiBjb2VyY2UgdG8gc3RyaW5nc1xuXHQgIC8vIGRlc3BpdGUgaGF2aW5nIGltcHJvcGVybHkgZGVmaW5lZCBgdG9TdHJpbmdgIG1ldGhvZHMuXG5cdCAgdmFyIHJlc3VsdCA9IGZhbHNlO1xuXHQgIGlmICh2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZS50b1N0cmluZyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXN1bHQgPSAhISh2YWx1ZSArICcnKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNIb3N0T2JqZWN0O1xuXG5cbi8qKiovIH0sXG4vKiAzMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBNQVhfU0FGRV9JTlRFR0VSID0gOTAwNzE5OTI1NDc0MDk5MTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCB1bnNpZ25lZCBpbnRlZ2VyIHZhbHVlcy4gKi9cblx0dmFyIHJlSXNVaW50ID0gL14oPzowfFsxLTldXFxkKikkLztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGFycmF5LWxpa2UgaW5kZXguXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgaW5kZXgsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuXHQgIGxlbmd0aCA9IGxlbmd0aCA9PSBudWxsID8gTUFYX1NBRkVfSU5URUdFUiA6IGxlbmd0aDtcblx0ICByZXR1cm4gISFsZW5ndGggJiZcblx0ICAgICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpICYmXG5cdCAgICAodmFsdWUgPiAtMSAmJiB2YWx1ZSAlIDEgPT0gMCAmJiB2YWx1ZSA8IGxlbmd0aCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNJbmRleDtcblxuXG4vKioqLyB9LFxuLyogMzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNyk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUgZm9yIHN0cmljdCBlcXVhbGl0eSBjb21wYXJpc29ucywgaS5lLiBgPT09YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlmIHN1aXRhYmxlIGZvciBzdHJpY3Rcblx0ICogIGVxdWFsaXR5IGNvbXBhcmlzb25zLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1N0cmljdENvbXBhcmFibGUodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgPT09IHZhbHVlICYmICFpc09iamVjdCh2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNTdHJpY3RDb21wYXJhYmxlO1xuXG5cbi8qKiovIH0sXG4vKiAzNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgbWF0Y2hlc1Byb3BlcnR5YCBmb3Igc291cmNlIHZhbHVlcyBzdWl0YWJsZVxuXHQgKiBmb3Igc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gbWF0Y2guXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZShrZXksIHNyY1ZhbHVlKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBvYmplY3Rba2V5XSA9PT0gc3JjVmFsdWUgJiZcblx0ICAgICAgKHNyY1ZhbHVlICE9PSB1bmRlZmluZWQgfHwgKGtleSBpbiBPYmplY3Qob2JqZWN0KSkpO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWF0Y2hlc1N0cmljdENvbXBhcmFibGU7XG5cblxuLyoqKi8gfSxcbi8qIDM1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG5cdHZhciBmdW5jVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYGZ1bmNgIHRvIGl0cyBzb3VyY2UgY29kZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc291cmNlIGNvZGUuXG5cdCAqL1xuXHRmdW5jdGlvbiB0b1NvdXJjZShmdW5jKSB7XG5cdCAgaWYgKGZ1bmMgIT0gbnVsbCkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIGZ1bmNUb1N0cmluZy5jYWxsKGZ1bmMpO1xuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICAgIHRyeSB7XG5cdCAgICAgIHJldHVybiAoZnVuYyArICcnKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgfVxuXHQgIHJldHVybiAnJztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b1NvdXJjZTtcblxuXG4vKioqLyB9LFxuLyogMzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlRGVsYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk4KSxcblx0ICAgIHJlc3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2MSk7XG5cdFxuXHQvKipcblx0ICogRGVmZXJzIGludm9raW5nIHRoZSBgZnVuY2AgdW50aWwgdGhlIGN1cnJlbnQgY2FsbCBzdGFjayBoYXMgY2xlYXJlZC4gQW55XG5cdCAqIGFkZGl0aW9uYWwgYXJndW1lbnRzIGFyZSBwcm92aWRlZCB0byBgZnVuY2Agd2hlbiBpdCdzIGludm9rZWQuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBGdW5jdGlvblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWZlci5cblx0ICogQHBhcmFtIHsuLi4qfSBbYXJnc10gVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVyIGlkLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmRlZmVyKGZ1bmN0aW9uKHRleHQpIHtcblx0ICogICBjb25zb2xlLmxvZyh0ZXh0KTtcblx0ICogfSwgJ2RlZmVycmVkJyk7XG5cdCAqIC8vID0+IExvZ3MgJ2RlZmVycmVkJyBhZnRlciBvbmUgb3IgbW9yZSBtaWxsaXNlY29uZHMuXG5cdCAqL1xuXHR2YXIgZGVmZXIgPSByZXN0KGZ1bmN0aW9uKGZ1bmMsIGFyZ3MpIHtcblx0ICByZXR1cm4gYmFzZURlbGF5KGZ1bmMsIDEsIGFyZ3MpO1xuXHR9KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZGVmZXI7XG5cblxuLyoqKi8gfSxcbi8qIDM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNBcnJheUxpa2VPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nik7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXSc7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZVxuXHQgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKiogQnVpbHQtaW4gdmFsdWUgcmVmZXJlbmNlcy4gKi9cblx0dmFyIHByb3BlcnR5SXNFbnVtZXJhYmxlID0gb2JqZWN0UHJvdG8ucHJvcGVydHlJc0VudW1lcmFibGU7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGFuIGBhcmd1bWVudHNgIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzQXJndW1lbnRzKGZ1bmN0aW9uKCkgeyByZXR1cm4gYXJndW1lbnRzOyB9KCkpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNBcmd1bWVudHMoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJndW1lbnRzKHZhbHVlKSB7XG5cdCAgLy8gU2FmYXJpIDguMSBpbmNvcnJlY3RseSBtYWtlcyBgYXJndW1lbnRzLmNhbGxlZWAgZW51bWVyYWJsZSBpbiBzdHJpY3QgbW9kZS5cblx0ICByZXR1cm4gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJlxuXHQgICAgKCFwcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHZhbHVlLCAnY2FsbGVlJykgfHwgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gYXJnc1RhZyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNBcmd1bWVudHM7XG5cblxuLyoqKi8gfSxcbi8qIDM4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TGVuZ3RoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTUpLFxuXHQgICAgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpLFxuXHQgICAgaXNMZW5ndGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLiBBIHZhbHVlIGlzIGNvbnNpZGVyZWQgYXJyYXktbGlrZSBpZiBpdCdzXG5cdCAqIG5vdCBhIGZ1bmN0aW9uIGFuZCBoYXMgYSBgdmFsdWUubGVuZ3RoYCB0aGF0J3MgYW4gaW50ZWdlciBncmVhdGVyIHRoYW4gb3Jcblx0ICogZXF1YWwgdG8gYDBgIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZShbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2UoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZSgnYWJjJyk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZShfLm5vb3ApO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNBcnJheUxpa2UodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgIT0gbnVsbCAmJiBpc0xlbmd0aChnZXRMZW5ndGgodmFsdWUpKSAmJiAhaXNGdW5jdGlvbih2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNBcnJheUxpa2U7XG5cblxuLyoqKi8gfSxcbi8qIDM5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNCksXG5cdCAgICBpc09iamVjdExpa2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXSc7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZVxuXHQgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTdHJpbmdgIHByaW1pdGl2ZSBvciBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc1N0cmluZygnYWJjJyk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc1N0cmluZygxKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzU3RyaW5nKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fFxuXHQgICAgKCFpc0FycmF5KHZhbHVlKSAmJiBpc09iamVjdExpa2UodmFsdWUpICYmIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IHN0cmluZ1RhZyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNTdHJpbmc7XG5cblxuLyoqKi8gfSxcbi8qIDQwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMjYpLFxuXHQgICAgYmFzZUtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNSksXG5cdCAgICBpbmRleEtleXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNiksXG5cdCAgICBpc0FycmF5TGlrZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpLFxuXHQgICAgaXNJbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpLFxuXHQgICAgaXNQcm90b3R5cGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyOSk7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBvZiB0aGUgb3duIGVudW1lcmFibGUgcHJvcGVydHkgbmFtZXMgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBOb24tb2JqZWN0IHZhbHVlcyBhcmUgY29lcmNlZCB0byBvYmplY3RzLiBTZWUgdGhlXG5cdCAqIFtFUyBzcGVjXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3Qua2V5cylcblx0ICogZm9yIG1vcmUgZGV0YWlscy5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IE9iamVjdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIGZ1bmN0aW9uIEZvbygpIHtcblx0ICogICB0aGlzLmEgPSAxO1xuXHQgKiAgIHRoaXMuYiA9IDI7XG5cdCAqIH1cblx0ICpcblx0ICogRm9vLnByb3RvdHlwZS5jID0gMztcblx0ICpcblx0ICogXy5rZXlzKG5ldyBGb28pO1xuXHQgKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG5cdCAqXG5cdCAqIF8ua2V5cygnaGknKTtcblx0ICogLy8gPT4gWycwJywgJzEnXVxuXHQgKi9cblx0ZnVuY3Rpb24ga2V5cyhvYmplY3QpIHtcblx0ICB2YXIgaXNQcm90byA9IGlzUHJvdG90eXBlKG9iamVjdCk7XG5cdCAgaWYgKCEoaXNQcm90byB8fCBpc0FycmF5TGlrZShvYmplY3QpKSkge1xuXHQgICAgcmV0dXJuIGJhc2VLZXlzKG9iamVjdCk7XG5cdCAgfVxuXHQgIHZhciBpbmRleGVzID0gaW5kZXhLZXlzKG9iamVjdCksXG5cdCAgICAgIHNraXBJbmRleGVzID0gISFpbmRleGVzLFxuXHQgICAgICByZXN1bHQgPSBpbmRleGVzIHx8IFtdLFxuXHQgICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xuXHRcblx0ICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG5cdCAgICBpZiAoYmFzZUhhcyhvYmplY3QsIGtleSkgJiZcblx0ICAgICAgICAhKHNraXBJbmRleGVzICYmIChrZXkgPT0gJ2xlbmd0aCcgfHwgaXNJbmRleChrZXksIGxlbmd0aCkpKSAmJlxuXHQgICAgICAgICEoaXNQcm90byAmJiBrZXkgPT0gJ2NvbnN0cnVjdG9yJykpIHtcblx0ICAgICAgcmVzdWx0LnB1c2goa2V5KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBrZXlzO1xuXG5cbi8qKiovIH0sXG4vKiA0MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHRvRmluaXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjIpO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYW4gaW50ZWdlci5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cblx0ICogW2BUb0ludGVnZXJgXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtdG9pbnRlZ2VyKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIGludGVnZXIuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9JbnRlZ2VyKDMuMik7XG5cdCAqIC8vID0+IDNcblx0ICpcblx0ICogXy50b0ludGVnZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IDBcblx0ICpcblx0ICogXy50b0ludGVnZXIoSW5maW5pdHkpO1xuXHQgKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuXHQgKlxuXHQgKiBfLnRvSW50ZWdlcignMy4yJyk7XG5cdCAqIC8vID0+IDNcblx0ICovXG5cdGZ1bmN0aW9uIHRvSW50ZWdlcih2YWx1ZSkge1xuXHQgIHZhciByZXN1bHQgPSB0b0Zpbml0ZSh2YWx1ZSksXG5cdCAgICAgIHJlbWFpbmRlciA9IHJlc3VsdCAlIDE7XG5cdFxuXHQgIHJldHVybiByZXN1bHQgPT09IHJlc3VsdCA/IChyZW1haW5kZXIgPyByZXN1bHQgLSByZW1haW5kZXIgOiByZXN1bHQpIDogMDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b0ludGVnZXI7XG5cblxuLyoqKi8gfSxcbi8qIDQyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpLFxuXHQgICAgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLFxuXHQgICAgaXNTeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgTkFOID0gMCAvIDA7XG5cdFxuXHQvKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xuXHR2YXIgcmVUcmltID0gL15cXHMrfFxccyskL2c7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc0JhZEhleCA9IC9eWy0rXTB4WzAtOWEtZl0rJC9pO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc0JpbmFyeSA9IC9eMGJbMDFdKyQvaTtcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc09jdGFsID0gL14wb1swLTddKyQvaTtcblx0XG5cdC8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG5cdHZhciBmcmVlUGFyc2VJbnQgPSBwYXJzZUludDtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgbnVtYmVyLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBudW1iZXIuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoMy4yKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IDVlLTMyNFxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKEluZmluaXR5KTtcblx0ICogLy8gPT4gSW5maW5pdHlcblx0ICpcblx0ICogXy50b051bWJlcignMy4yJyk7XG5cdCAqIC8vID0+IDMuMlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBOQU47XG5cdCAgfVxuXHQgIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcblx0ICAgIHZhciBvdGhlciA9IGlzRnVuY3Rpb24odmFsdWUudmFsdWVPZikgPyB2YWx1ZS52YWx1ZU9mKCkgOiB2YWx1ZTtcblx0ICAgIHZhbHVlID0gaXNPYmplY3Qob3RoZXIpID8gKG90aGVyICsgJycpIDogb3RoZXI7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogK3ZhbHVlO1xuXHQgIH1cblx0ICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UocmVUcmltLCAnJyk7XG5cdCAgdmFyIGlzQmluYXJ5ID0gcmVJc0JpbmFyeS50ZXN0KHZhbHVlKTtcblx0ICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcblx0ICAgID8gZnJlZVBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCBpc0JpbmFyeSA/IDIgOiA4KVxuXHQgICAgOiAocmVJc0JhZEhleC50ZXN0KHZhbHVlKSA/IE5BTiA6ICt2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9OdW1iZXI7XG5cblxuLyoqKi8gfSxcbi8qIDQzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBwcm9jZXNzKSB7LyohXG5cdCAqIFZ1ZS5qcyB2MS4wLjI2XG5cdCAqIChjKSAyMDE2IEV2YW4gWW91XG5cdCAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGZ1bmN0aW9uIHNldChvYmosIGtleSwgdmFsKSB7XG5cdCAgaWYgKGhhc093bihvYmosIGtleSkpIHtcblx0ICAgIG9ialtrZXldID0gdmFsO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBpZiAob2JqLl9pc1Z1ZSkge1xuXHQgICAgc2V0KG9iai5fZGF0YSwga2V5LCB2YWwpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgb2IgPSBvYmouX19vYl9fO1xuXHQgIGlmICghb2IpIHtcblx0ICAgIG9ialtrZXldID0gdmFsO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBvYi5jb252ZXJ0KGtleSwgdmFsKTtcblx0ICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgaWYgKG9iLnZtcykge1xuXHQgICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG5cdCAgICAgIHZtLl9wcm94eShrZXkpO1xuXHQgICAgICB2bS5fZGlnZXN0KCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWxldGUgYSBwcm9wZXJ0eSBhbmQgdHJpZ2dlciBjaGFuZ2UgaWYgbmVjZXNzYXJ5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZWwob2JqLCBrZXkpIHtcblx0ICBpZiAoIWhhc093bihvYmosIGtleSkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgZGVsZXRlIG9ialtrZXldO1xuXHQgIHZhciBvYiA9IG9iai5fX29iX187XG5cdCAgaWYgKCFvYikge1xuXHQgICAgaWYgKG9iai5faXNWdWUpIHtcblx0ICAgICAgZGVsZXRlIG9iai5fZGF0YVtrZXldO1xuXHQgICAgICBvYmouX2RpZ2VzdCgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgaWYgKG9iLnZtcykge1xuXHQgICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG5cdCAgICAgIHZtLl91bnByb3h5KGtleSk7XG5cdCAgICAgIHZtLl9kaWdlc3QoKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cdC8qKlxuXHQgKiBDaGVjayB3aGV0aGVyIHRoZSBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0eS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaGFzT3duKG9iaiwga2V5KSB7XG5cdCAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIGxpdGVyYWwgdmFsdWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHR2YXIgbGl0ZXJhbFZhbHVlUkUgPSAvXlxccz8odHJ1ZXxmYWxzZXwtP1tcXGRcXC5dK3wnW14nXSonfFwiW15cIl0qXCIpXFxzPyQvO1xuXHRcblx0ZnVuY3Rpb24gaXNMaXRlcmFsKGV4cCkge1xuXHQgIHJldHVybiBsaXRlcmFsVmFsdWVSRS50ZXN0KGV4cCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIHN0cmluZyBzdGFydHMgd2l0aCAkIG9yIF9cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzUmVzZXJ2ZWQoc3RyKSB7XG5cdCAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7XG5cdCAgcmV0dXJuIGMgPT09IDB4MjQgfHwgYyA9PT0gMHg1Rjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEd1YXJkIHRleHQgb3V0cHV0LCBtYWtlIHN1cmUgdW5kZWZpbmVkIG91dHB1dHNcblx0ICogZW1wdHkgc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIF90b1N0cmluZyh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZS50b1N0cmluZygpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgYW5kIGNvbnZlcnQgcG9zc2libGUgbnVtZXJpYyBzdHJpbmdzIHRvIG51bWJlcnNcblx0ICogYmVmb3JlIHNldHRpbmcgYmFjayB0byBkYXRhXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7KnxOdW1iZXJ9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcblx0ICAgIHJldHVybiBpc05hTihwYXJzZWQpID8gdmFsdWUgOiBwYXJzZWQ7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBzdHJpbmcgYm9vbGVhbiBsaXRlcmFscyBpbnRvIHJlYWwgYm9vbGVhbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7KnxCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRvQm9vbGVhbih2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnID8gdHJ1ZSA6IHZhbHVlID09PSAnZmFsc2UnID8gZmFsc2UgOiB2YWx1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nIHwgZmFsc2V9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc3RyaXBRdW90ZXMoc3RyKSB7XG5cdCAgdmFyIGEgPSBzdHIuY2hhckNvZGVBdCgwKTtcblx0ICB2YXIgYiA9IHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGggLSAxKTtcblx0ICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KSA/IHN0ci5zbGljZSgxLCAtMSkgOiBzdHI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDYW1lbGl6ZSBhIGh5cGhlbi1kZWxtaXRlZCBzdHJpbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xuXHRcblx0ZnVuY3Rpb24gY2FtZWxpemUoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIHRvVXBwZXIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b1VwcGVyKF8sIGMpIHtcblx0ICByZXR1cm4gYyA/IGMudG9VcHBlckNhc2UoKSA6ICcnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGh5cGhlbmF0ZVJFID0gLyhbYS16XFxkXSkoW0EtWl0pL2c7XG5cdFxuXHRmdW5jdGlvbiBoeXBoZW5hdGUoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgaHlwaGVuL3VuZGVyc2NvcmUvc2xhc2ggZGVsaW1pdGVyZWQgbmFtZXMgaW50b1xuXHQgKiBjYW1lbGl6ZWQgY2xhc3NOYW1lcy5cblx0ICpcblx0ICogZS5nLiBteS1jb21wb25lbnQgPT4gTXlDb21wb25lbnRcblx0ICogICAgICBzb21lX2Vsc2UgICAgPT4gU29tZUVsc2Vcblx0ICogICAgICBzb21lL2NvbXAgICAgPT4gU29tZUNvbXBcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9cXC9dKShcXHcpL2c7XG5cdFxuXHRmdW5jdGlvbiBjbGFzc2lmeShzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoY2xhc3NpZnlSRSwgdG9VcHBlcik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTaW1wbGUgYmluZCwgZmFzdGVyIHRoYW4gbmF0aXZlXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYmluZChmbiwgY3R4KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG5cdCAgICB2YXIgbCA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICByZXR1cm4gbCA/IGwgPiAxID8gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpIDogZm4uY2FsbChjdHgsIGEpIDogZm4uY2FsbChjdHgpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGFuIEFycmF5LWxpa2Ugb2JqZWN0IHRvIGEgcmVhbCBBcnJheS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheS1saWtlfSBsaXN0XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRdIC0gc3RhcnQgaW5kZXhcblx0ICogQHJldHVybiB7QXJyYXl9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9BcnJheShsaXN0LCBzdGFydCkge1xuXHQgIHN0YXJ0ID0gc3RhcnQgfHwgMDtcblx0ICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7XG5cdCAgdmFyIHJldCA9IG5ldyBBcnJheShpKTtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB0b1xuXHQgKiBAcGFyYW0ge09iamVjdH0gZnJvbVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dGVuZCh0bywgZnJvbSkge1xuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZnJvbSk7XG5cdCAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB0b1trZXlzW2ldXSA9IGZyb21ba2V5c1tpXV07XG5cdCAgfVxuXHQgIHJldHVybiB0bztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFF1aWNrIG9iamVjdCBjaGVjayAtIHRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgdG8gdGVsbFxuXHQgKiBPYmplY3RzIGZyb20gcHJpbWl0aXZlIHZhbHVlcyB3aGVuIHdlIGtub3cgdGhlIHZhbHVlXG5cdCAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdChvYmopIHtcblx0ICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuXHQgKiBmb3IgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cdHZhciBPQkpFQ1RfU1RSSU5HID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdFxuXHRmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuXHQgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09IE9CSkVDVF9TVFJJTkc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcnJheSB0eXBlIGNoZWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0XG5cdC8qKlxuXHQgKiBEZWZpbmUgYSBwcm9wZXJ0eS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW2VudW1lcmFibGVdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVmKG9iaiwga2V5LCB2YWwsIGVudW1lcmFibGUpIHtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcblx0ICAgIHZhbHVlOiB2YWwsXG5cdCAgICBlbnVtZXJhYmxlOiAhIWVudW1lcmFibGUsXG5cdCAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVib3VuY2UgYSBmdW5jdGlvbiBzbyBpdCBvbmx5IGdldHMgY2FsbGVkIGFmdGVyIHRoZVxuXHQgKiBpbnB1dCBzdG9wcyBhcnJpdmluZyBhZnRlciB0aGUgZ2l2ZW4gd2FpdCBwZXJpb2QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHdhaXRcblx0ICogQHJldHVybiB7RnVuY3Rpb259IC0gdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIF9kZWJvdW5jZShmdW5jLCB3YWl0KSB7XG5cdCAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuXHQgIHZhciBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuXHQgICAgdmFyIGxhc3QgPSBEYXRlLm5vdygpIC0gdGltZXN0YW1wO1xuXHQgICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuXHQgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGltZW91dCA9IG51bGw7XG5cdCAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdCAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGNvbnRleHQgPSB0aGlzO1xuXHQgICAgYXJncyA9IGFyZ3VtZW50cztcblx0ICAgIHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG5cdCAgICBpZiAoIXRpbWVvdXQpIHtcblx0ICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWFudWFsIGluZGV4T2YgYmVjYXVzZSBpdCdzIHNsaWdodGx5IGZhc3RlciB0aGFuXG5cdCAqIG5hdGl2ZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5kZXhPZihhcnIsIG9iaikge1xuXHQgIHZhciBpID0gYXJyLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpO1xuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYWtlIGEgY2FuY2VsbGFibGUgdmVyc2lvbiBvZiBhbiBhc3luYyBjYWxsYmFjay5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2FuY2VsbGFibGUoZm4pIHtcblx0ICB2YXIgY2IgPSBmdW5jdGlvbiBjYigpIHtcblx0ICAgIGlmICghY2IuY2FuY2VsbGVkKSB7XG5cdCAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgY2IuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgY2IuY2FuY2VsbGVkID0gdHJ1ZTtcblx0ICB9O1xuXHQgIHJldHVybiBjYjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxuXHQgKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/XG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gYVxuXHQgKiBAcGFyYW0geyp9IGJcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cblx0ICByZXR1cm4gYSA9PSBiIHx8IChpc09iamVjdChhKSAmJiBpc09iamVjdChiKSA/IEpTT04uc3RyaW5naWZ5KGEpID09PSBKU09OLnN0cmluZ2lmeShiKSA6IGZhbHNlKTtcblx0ICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuXHR9XG5cdFxuXHR2YXIgaGFzUHJvdG8gPSAoJ19fcHJvdG9fXycgaW4ge30pO1xuXHRcblx0Ly8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZ1xuXHR2YXIgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdykgIT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXHRcblx0Ly8gZGV0ZWN0IGRldnRvb2xzXG5cdHZhciBkZXZ0b29scyA9IGluQnJvd3NlciAmJiB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblx0XG5cdC8vIFVBIHNuaWZmaW5nIGZvciB3b3JraW5nIGFyb3VuZCBicm93c2VyLXNwZWNpZmljIHF1aXJrc1xuXHR2YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcblx0dmFyIGlzSUUgPSBVQSAmJiBVQS5pbmRleE9mKCd0cmlkZW50JykgPiAwO1xuXHR2YXIgaXNJRTkgPSBVQSAmJiBVQS5pbmRleE9mKCdtc2llIDkuMCcpID4gMDtcblx0dmFyIGlzQW5kcm9pZCA9IFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDA7XG5cdHZhciBpc0lvcyA9IFVBICYmIC8oaXBob25lfGlwYWR8aXBvZHxpb3MpL2kudGVzdChVQSk7XG5cdHZhciBpb3NWZXJzaW9uTWF0Y2ggPSBpc0lvcyAmJiBVQS5tYXRjaCgvb3MgKFtcXGRfXSspLyk7XG5cdHZhciBpb3NWZXJzaW9uID0gaW9zVmVyc2lvbk1hdGNoICYmIGlvc1ZlcnNpb25NYXRjaFsxXS5zcGxpdCgnXycpO1xuXHRcblx0Ly8gZGV0ZWN0aW5nIGlPUyBVSVdlYlZpZXcgYnkgaW5kZXhlZERCXG5cdHZhciBoYXNNdXRhdGlvbk9ic2VydmVyQnVnID0gaW9zVmVyc2lvbiAmJiBOdW1iZXIoaW9zVmVyc2lvblswXSkgPj0gOSAmJiBOdW1iZXIoaW9zVmVyc2lvblsxXSkgPj0gMyAmJiAhd2luZG93LmluZGV4ZWREQjtcblx0XG5cdHZhciB0cmFuc2l0aW9uUHJvcCA9IHVuZGVmaW5lZDtcblx0dmFyIHRyYW5zaXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcblx0dmFyIGFuaW1hdGlvblByb3AgPSB1bmRlZmluZWQ7XG5cdHZhciBhbmltYXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcblx0XG5cdC8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmdcblx0aWYgKGluQnJvd3NlciAmJiAhaXNJRTkpIHtcblx0ICB2YXIgaXNXZWJraXRUcmFucyA9IHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG5cdCAgdmFyIGlzV2Via2l0QW5pbSA9IHdpbmRvdy5vbmFuaW1hdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCAhPT0gdW5kZWZpbmVkO1xuXHQgIHRyYW5zaXRpb25Qcm9wID0gaXNXZWJraXRUcmFucyA/ICdXZWJraXRUcmFuc2l0aW9uJyA6ICd0cmFuc2l0aW9uJztcblx0ICB0cmFuc2l0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdFRyYW5zID8gJ3dlYmtpdFRyYW5zaXRpb25FbmQnIDogJ3RyYW5zaXRpb25lbmQnO1xuXHQgIGFuaW1hdGlvblByb3AgPSBpc1dlYmtpdEFuaW0gPyAnV2Via2l0QW5pbWF0aW9uJyA6ICdhbmltYXRpb24nO1xuXHQgIGFuaW1hdGlvbkVuZEV2ZW50ID0gaXNXZWJraXRBbmltID8gJ3dlYmtpdEFuaW1hdGlvbkVuZCcgOiAnYW5pbWF0aW9uZW5kJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlZmVyIGEgdGFzayB0byBleGVjdXRlIGl0IGFzeW5jaHJvbm91c2x5LiBJZGVhbGx5IHRoaXNcblx0ICogc2hvdWxkIGJlIGV4ZWN1dGVkIGFzIGEgbWljcm90YXNrLCBzbyB3ZSBsZXZlcmFnZVxuXHQgKiBNdXRhdGlvbk9ic2VydmVyIGlmIGl0J3MgYXZhaWxhYmxlLCBhbmQgZmFsbGJhY2sgdG9cblx0ICogc2V0VGltZW91dCgwKS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eFxuXHQgKi9cblx0XG5cdHZhciBuZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGNhbGxiYWNrcyA9IFtdO1xuXHQgIHZhciBwZW5kaW5nID0gZmFsc2U7XG5cdCAgdmFyIHRpbWVyRnVuYztcblx0ICBmdW5jdGlvbiBuZXh0VGlja0hhbmRsZXIoKSB7XG5cdCAgICBwZW5kaW5nID0gZmFsc2U7XG5cdCAgICB2YXIgY29waWVzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuXHQgICAgY2FsbGJhY2tzID0gW107XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvcGllcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBjb3BpZXNbaV0oKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgIWhhc011dGF0aW9uT2JzZXJ2ZXJCdWcpIHtcblx0ICAgIHZhciBjb3VudGVyID0gMTtcblx0ICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG5leHRUaWNrSGFuZGxlcik7XG5cdCAgICB2YXIgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb3VudGVyKTtcblx0ICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHtcblx0ICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGNvdW50ZXIgPSAoY291bnRlciArIDEpICUgMjtcblx0ICAgICAgdGV4dE5vZGUuZGF0YSA9IGNvdW50ZXI7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyB3ZWJwYWNrIGF0dGVtcHRzIHRvIGluamVjdCBhIHNoaW0gZm9yIHNldEltbWVkaWF0ZVxuXHQgICAgLy8gaWYgaXQgaXMgdXNlZCBhcyBhIGdsb2JhbCwgc28gd2UgaGF2ZSB0byB3b3JrIGFyb3VuZCB0aGF0IHRvXG5cdCAgICAvLyBhdm9pZCBidW5kbGluZyB1bm5lY2Vzc2FyeSBjb2RlLlxuXHQgICAgdmFyIGNvbnRleHQgPSBpbkJyb3dzZXIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHt9O1xuXHQgICAgdGltZXJGdW5jID0gY29udGV4dC5zZXRJbW1lZGlhdGUgfHwgc2V0VGltZW91dDtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChjYiwgY3R4KSB7XG5cdCAgICB2YXIgZnVuYyA9IGN0eCA/IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgY2IuY2FsbChjdHgpO1xuXHQgICAgfSA6IGNiO1xuXHQgICAgY2FsbGJhY2tzLnB1c2goZnVuYyk7XG5cdCAgICBpZiAocGVuZGluZykgcmV0dXJuO1xuXHQgICAgcGVuZGluZyA9IHRydWU7XG5cdCAgICB0aW1lckZ1bmMobmV4dFRpY2tIYW5kbGVyLCAwKTtcblx0ICB9O1xuXHR9KSgpO1xuXHRcblx0dmFyIF9TZXQgPSB1bmRlZmluZWQ7XG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHRpZiAodHlwZW9mIFNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgU2V0LnRvU3RyaW5nKCkubWF0Y2goL25hdGl2ZSBjb2RlLykpIHtcblx0ICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS5cblx0ICBfU2V0ID0gU2V0O1xuXHR9IGVsc2Uge1xuXHQgIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy5cblx0ICBfU2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIH07XG5cdCAgX1NldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgcmV0dXJuIHRoaXMuc2V0W2tleV0gIT09IHVuZGVmaW5lZDtcblx0ICB9O1xuXHQgIF9TZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHRoaXMuc2V0W2tleV0gPSAxO1xuXHQgIH07XG5cdCAgX1NldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQ2FjaGUobGltaXQpIHtcblx0ICB0aGlzLnNpemUgPSAwO1xuXHQgIHRoaXMubGltaXQgPSBsaW1pdDtcblx0ICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSB1bmRlZmluZWQ7XG5cdCAgdGhpcy5fa2V5bWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0fVxuXHRcblx0dmFyIHAgPSBDYWNoZS5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogUHV0IDx2YWx1ZT4gaW50byB0aGUgY2FjaGUgYXNzb2NpYXRlZCB3aXRoIDxrZXk+LlxuXHQgKiBSZXR1cm5zIHRoZSBlbnRyeSB3aGljaCB3YXMgcmVtb3ZlZCB0byBtYWtlIHJvb20gZm9yXG5cdCAqIHRoZSBuZXcgZW50cnkuIE90aGVyd2lzZSB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG5cdCAqIChpLmUuIGlmIHRoZXJlIHdhcyBlbm91Z2ggcm9vbSBhbHJlYWR5KS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4ge0VudHJ5fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRwLnB1dCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgdmFyIHJlbW92ZWQ7XG5cdFxuXHQgIHZhciBlbnRyeSA9IHRoaXMuZ2V0KGtleSwgdHJ1ZSk7XG5cdCAgaWYgKCFlbnRyeSkge1xuXHQgICAgaWYgKHRoaXMuc2l6ZSA9PT0gdGhpcy5saW1pdCkge1xuXHQgICAgICByZW1vdmVkID0gdGhpcy5zaGlmdCgpO1xuXHQgICAgfVxuXHQgICAgZW50cnkgPSB7XG5cdCAgICAgIGtleToga2V5XG5cdCAgICB9O1xuXHQgICAgdGhpcy5fa2V5bWFwW2tleV0gPSBlbnRyeTtcblx0ICAgIGlmICh0aGlzLnRhaWwpIHtcblx0ICAgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7XG5cdCAgICAgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5oZWFkID0gZW50cnk7XG5cdCAgICB9XG5cdCAgICB0aGlzLnRhaWwgPSBlbnRyeTtcblx0ICAgIHRoaXMuc2l6ZSsrO1xuXHQgIH1cblx0ICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuXHRcblx0ICByZXR1cm4gcmVtb3ZlZDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBQdXJnZSB0aGUgbGVhc3QgcmVjZW50bHkgdXNlZCAob2xkZXN0KSBlbnRyeSBmcm9tIHRoZVxuXHQgKiBjYWNoZS4gUmV0dXJucyB0aGUgcmVtb3ZlZCBlbnRyeSBvciB1bmRlZmluZWQgaWYgdGhlXG5cdCAqIGNhY2hlIHdhcyBlbXB0eS5cblx0ICovXG5cdFxuXHRwLnNoaWZ0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBlbnRyeSA9IHRoaXMuaGVhZDtcblx0ICBpZiAoZW50cnkpIHtcblx0ICAgIHRoaXMuaGVhZCA9IHRoaXMuaGVhZC5uZXdlcjtcblx0ICAgIHRoaXMuaGVhZC5vbGRlciA9IHVuZGVmaW5lZDtcblx0ICAgIGVudHJ5Lm5ld2VyID0gZW50cnkub2xkZXIgPSB1bmRlZmluZWQ7XG5cdCAgICB0aGlzLl9rZXltYXBbZW50cnkua2V5XSA9IHVuZGVmaW5lZDtcblx0ICAgIHRoaXMuc2l6ZS0tO1xuXHQgIH1cblx0ICByZXR1cm4gZW50cnk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IGFuZCByZWdpc3RlciByZWNlbnQgdXNlIG9mIDxrZXk+LiBSZXR1cm5zIHRoZSB2YWx1ZVxuXHQgKiBhc3NvY2lhdGVkIHdpdGggPGtleT4gb3IgdW5kZWZpbmVkIGlmIG5vdCBpbiBjYWNoZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJldHVybkVudHJ5XG5cdCAqIEByZXR1cm4ge0VudHJ5fCp9XG5cdCAqL1xuXHRcblx0cC5nZXQgPSBmdW5jdGlvbiAoa2V5LCByZXR1cm5FbnRyeSkge1xuXHQgIHZhciBlbnRyeSA9IHRoaXMuX2tleW1hcFtrZXldO1xuXHQgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdCAgaWYgKGVudHJ5ID09PSB0aGlzLnRhaWwpIHtcblx0ICAgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG5cdCAgfVxuXHQgIC8vIEhFQUQtLS0tLS0tLS0tLS0tLVRBSUxcblx0ICAvLyAgIDwub2xkZXIgICAubmV3ZXI+XG5cdCAgLy8gIDwtLS0gYWRkIGRpcmVjdGlvbiAtLVxuXHQgIC8vICAgQSAgQiAgQyAgPEQ+ICBFXG5cdCAgaWYgKGVudHJ5Lm5ld2VyKSB7XG5cdCAgICBpZiAoZW50cnkgPT09IHRoaXMuaGVhZCkge1xuXHQgICAgICB0aGlzLmhlYWQgPSBlbnRyeS5uZXdlcjtcblx0ICAgIH1cblx0ICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7IC8vIEMgPC0tIEUuXG5cdCAgfVxuXHQgIGlmIChlbnRyeS5vbGRlcikge1xuXHQgICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjsgLy8gQy4gLS0+IEVcblx0ICB9XG5cdCAgZW50cnkubmV3ZXIgPSB1bmRlZmluZWQ7IC8vIEQgLS14XG5cdCAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7IC8vIEQuIC0tPiBFXG5cdCAgaWYgKHRoaXMudGFpbCkge1xuXHQgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7IC8vIEUuIDwtLSBEXG5cdCAgfVxuXHQgIHRoaXMudGFpbCA9IGVudHJ5O1xuXHQgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG5cdH07XG5cdFxuXHR2YXIgY2FjaGUkMSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0dmFyIGZpbHRlclRva2VuUkUgPSAvW15cXHMnXCJdK3wnW14nXSonfFwiW15cIl0qXCIvZztcblx0dmFyIHJlc2VydmVkQXJnUkUgPSAvXmluJHxeLT9cXGQrLztcblx0XG5cdC8qKlxuXHQgKiBQYXJzZXIgc3RhdGVcblx0ICovXG5cdFxuXHR2YXIgc3RyO1xuXHR2YXIgZGlyO1xuXHR2YXIgYztcblx0dmFyIHByZXY7XG5cdHZhciBpO1xuXHR2YXIgbDtcblx0dmFyIGxhc3RGaWx0ZXJJbmRleDtcblx0dmFyIGluU2luZ2xlO1xuXHR2YXIgaW5Eb3VibGU7XG5cdHZhciBjdXJseTtcblx0dmFyIHNxdWFyZTtcblx0dmFyIHBhcmVuO1xuXHQvKipcblx0ICogUHVzaCBhIGZpbHRlciB0byB0aGUgY3VycmVudCBkaXJlY3RpdmUgb2JqZWN0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHVzaEZpbHRlcigpIHtcblx0ICB2YXIgZXhwID0gc3RyLnNsaWNlKGxhc3RGaWx0ZXJJbmRleCwgaSkudHJpbSgpO1xuXHQgIHZhciBmaWx0ZXI7XG5cdCAgaWYgKGV4cCkge1xuXHQgICAgZmlsdGVyID0ge307XG5cdCAgICB2YXIgdG9rZW5zID0gZXhwLm1hdGNoKGZpbHRlclRva2VuUkUpO1xuXHQgICAgZmlsdGVyLm5hbWUgPSB0b2tlbnNbMF07XG5cdCAgICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgZmlsdGVyLmFyZ3MgPSB0b2tlbnMuc2xpY2UoMSkubWFwKHByb2Nlc3NGaWx0ZXJBcmcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoZmlsdGVyKSB7XG5cdCAgICAoZGlyLmZpbHRlcnMgPSBkaXIuZmlsdGVycyB8fCBbXSkucHVzaChmaWx0ZXIpO1xuXHQgIH1cblx0ICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGFyZ3VtZW50IGlzIGR5bmFtaWMgYW5kIHN0cmlwIHF1b3Rlcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGFyZ1xuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0ZpbHRlckFyZyhhcmcpIHtcblx0ICBpZiAocmVzZXJ2ZWRBcmdSRS50ZXN0KGFyZykpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHZhbHVlOiB0b051bWJlcihhcmcpLFxuXHQgICAgICBkeW5hbWljOiBmYWxzZVxuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMoYXJnKTtcblx0ICAgIHZhciBkeW5hbWljID0gc3RyaXBwZWQgPT09IGFyZztcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHZhbHVlOiBkeW5hbWljID8gYXJnIDogc3RyaXBwZWQsXG5cdCAgICAgIGR5bmFtaWM6IGR5bmFtaWNcblx0ICAgIH07XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYSBkaXJlY3RpdmUgdmFsdWUgYW5kIGV4dHJhY3QgdGhlIGV4cHJlc3Npb25cblx0ICogYW5kIGl0cyBmaWx0ZXJzIGludG8gYSBkZXNjcmlwdG9yLlxuXHQgKlxuXHQgKiBFeGFtcGxlOlxuXHQgKlxuXHQgKiBcImEgKyAxIHwgdXBwZXJjYXNlXCIgd2lsbCB5aWVsZDpcblx0ICoge1xuXHQgKiAgIGV4cHJlc3Npb246ICdhICsgMScsXG5cdCAqICAgZmlsdGVyczogW1xuXHQgKiAgICAgeyBuYW1lOiAndXBwZXJjYXNlJywgYXJnczogbnVsbCB9XG5cdCAqICAgXVxuXHQgKiB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZURpcmVjdGl2ZShzKSB7XG5cdCAgdmFyIGhpdCA9IGNhY2hlJDEuZ2V0KHMpO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHRcblx0ICAvLyByZXNldCBwYXJzZXIgc3RhdGVcblx0ICBzdHIgPSBzO1xuXHQgIGluU2luZ2xlID0gaW5Eb3VibGUgPSBmYWxzZTtcblx0ICBjdXJseSA9IHNxdWFyZSA9IHBhcmVuID0gMDtcblx0ICBsYXN0RmlsdGVySW5kZXggPSAwO1xuXHQgIGRpciA9IHt9O1xuXHRcblx0ICBmb3IgKGkgPSAwLCBsID0gc3RyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgcHJldiA9IGM7XG5cdCAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG5cdCAgICBpZiAoaW5TaW5nbGUpIHtcblx0ICAgICAgLy8gY2hlY2sgc2luZ2xlIHF1b3RlXG5cdCAgICAgIGlmIChjID09PSAweDI3ICYmIHByZXYgIT09IDB4NUMpIGluU2luZ2xlID0gIWluU2luZ2xlO1xuXHQgICAgfSBlbHNlIGlmIChpbkRvdWJsZSkge1xuXHQgICAgICAvLyBjaGVjayBkb3VibGUgcXVvdGVcblx0ICAgICAgaWYgKGMgPT09IDB4MjIgJiYgcHJldiAhPT0gMHg1QykgaW5Eb3VibGUgPSAhaW5Eb3VibGU7XG5cdCAgICB9IGVsc2UgaWYgKGMgPT09IDB4N0MgJiYgLy8gcGlwZVxuXHQgICAgc3RyLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmIHN0ci5jaGFyQ29kZUF0KGkgLSAxKSAhPT0gMHg3Qykge1xuXHQgICAgICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuXHQgICAgICAgIC8vIGZpcnN0IGZpbHRlciwgZW5kIG9mIGV4cHJlc3Npb25cblx0ICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcblx0ICAgICAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gYWxyZWFkeSBoYXMgZmlsdGVyXG5cdCAgICAgICAgcHVzaEZpbHRlcigpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlIDB4MjI6XG5cdCAgICAgICAgICBpbkRvdWJsZSA9IHRydWU7YnJlYWs7IC8vIFwiXG5cdCAgICAgICAgY2FzZSAweDI3OlxuXHQgICAgICAgICAgaW5TaW5nbGUgPSB0cnVlO2JyZWFrOyAvLyAnXG5cdCAgICAgICAgY2FzZSAweDI4OlxuXHQgICAgICAgICAgcGFyZW4rKzticmVhazsgLy8gKFxuXHQgICAgICAgIGNhc2UgMHgyOTpcblx0ICAgICAgICAgIHBhcmVuLS07YnJlYWs7IC8vIClcblx0ICAgICAgICBjYXNlIDB4NUI6XG5cdCAgICAgICAgICBzcXVhcmUrKzticmVhazsgLy8gW1xuXHQgICAgICAgIGNhc2UgMHg1RDpcblx0ICAgICAgICAgIHNxdWFyZS0tO2JyZWFrOyAvLyBdXG5cdCAgICAgICAgY2FzZSAweDdCOlxuXHQgICAgICAgICAgY3VybHkrKzticmVhazsgLy8ge1xuXHQgICAgICAgIGNhc2UgMHg3RDpcblx0ICAgICAgICAgIGN1cmx5LS07YnJlYWs7IC8vIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcblx0ICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcblx0ICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuXHQgICAgcHVzaEZpbHRlcigpO1xuXHQgIH1cblx0XG5cdCAgY2FjaGUkMS5wdXQocywgZGlyKTtcblx0ICByZXR1cm4gZGlyO1xuXHR9XG5cdFxuXHR2YXIgZGlyZWN0aXZlID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgcGFyc2VEaXJlY3RpdmU6IHBhcnNlRGlyZWN0aXZlXG5cdH0pO1xuXHRcblx0dmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuXHR2YXIgY2FjaGUgPSB1bmRlZmluZWQ7XG5cdHZhciB0YWdSRSA9IHVuZGVmaW5lZDtcblx0dmFyIGh0bWxSRSA9IHVuZGVmaW5lZDtcblx0LyoqXG5cdCAqIEVzY2FwZSBhIHN0cmluZyBzbyBpdCBjYW4gYmUgdXNlZCBpbiBhIFJlZ0V4cFxuXHQgKiBjb25zdHJ1Y3Rvci5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGVzY2FwZVJlZ2V4KHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVSZWdleCgpIHtcblx0ICB2YXIgb3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzBdKTtcblx0ICB2YXIgY2xvc2UgPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1sxXSk7XG5cdCAgdmFyIHVuc2FmZU9wZW4gPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1swXSk7XG5cdCAgdmFyIHVuc2FmZUNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMV0pO1xuXHQgIHRhZ1JFID0gbmV3IFJlZ0V4cCh1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICd8JyArIG9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIGNsb3NlLCAnZycpO1xuXHQgIGh0bWxSRSA9IG5ldyBSZWdFeHAoJ14nICsgdW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnJCcpO1xuXHQgIC8vIHJlc2V0IGNhY2hlXG5cdCAgY2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhIHRlbXBsYXRlIHRleHQgc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgdG9rZW5zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHQgKiBAcmV0dXJuIHtBcnJheTxPYmplY3Q+IHwgbnVsbH1cblx0ICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHR5cGVcblx0ICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHZhbHVlXG5cdCAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2h0bWxdXG5cdCAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW29uZVRpbWVdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VUZXh0KHRleHQpIHtcblx0ICBpZiAoIWNhY2hlKSB7XG5cdCAgICBjb21waWxlUmVnZXgoKTtcblx0ICB9XG5cdCAgdmFyIGhpdCA9IGNhY2hlLmdldCh0ZXh0KTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0ICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0ICB2YXIgdG9rZW5zID0gW107XG5cdCAgdmFyIGxhc3RJbmRleCA9IHRhZ1JFLmxhc3RJbmRleCA9IDA7XG5cdCAgdmFyIG1hdGNoLCBpbmRleCwgaHRtbCwgdmFsdWUsIGZpcnN0LCBvbmVUaW1lO1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgd2hpbGUgKG1hdGNoID0gdGFnUkUuZXhlYyh0ZXh0KSkge1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgaW5kZXggPSBtYXRjaC5pbmRleDtcblx0ICAgIC8vIHB1c2ggdGV4dCB0b2tlblxuXHQgICAgaWYgKGluZGV4ID4gbGFzdEluZGV4KSB7XG5cdCAgICAgIHRva2Vucy5wdXNoKHtcblx0ICAgICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgsIGluZGV4KVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIC8vIHRhZyB0b2tlblxuXHQgICAgaHRtbCA9IGh0bWxSRS50ZXN0KG1hdGNoWzBdKTtcblx0ICAgIHZhbHVlID0gaHRtbCA/IG1hdGNoWzFdIDogbWF0Y2hbMl07XG5cdCAgICBmaXJzdCA9IHZhbHVlLmNoYXJDb2RlQXQoMCk7XG5cdCAgICBvbmVUaW1lID0gZmlyc3QgPT09IDQyOyAvLyAqXG5cdCAgICB2YWx1ZSA9IG9uZVRpbWUgPyB2YWx1ZS5zbGljZSgxKSA6IHZhbHVlO1xuXHQgICAgdG9rZW5zLnB1c2goe1xuXHQgICAgICB0YWc6IHRydWUsXG5cdCAgICAgIHZhbHVlOiB2YWx1ZS50cmltKCksXG5cdCAgICAgIGh0bWw6IGh0bWwsXG5cdCAgICAgIG9uZVRpbWU6IG9uZVRpbWVcblx0ICAgIH0pO1xuXHQgICAgbGFzdEluZGV4ID0gaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG5cdCAgfVxuXHQgIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuXHQgICAgdG9rZW5zLnB1c2goe1xuXHQgICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgpXG5cdCAgICB9KTtcblx0ICB9XG5cdCAgY2FjaGUucHV0KHRleHQsIHRva2Vucyk7XG5cdCAgcmV0dXJuIHRva2Vucztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCBhIGxpc3Qgb2YgdG9rZW5zIGludG8gYW4gZXhwcmVzc2lvbi5cblx0ICogZS5nLiB0b2tlbnMgcGFyc2VkIGZyb20gJ2Ege3tifX0gYycgY2FuIGJlIHNlcmlhbGl6ZWRcblx0ICogaW50byBvbmUgc2luZ2xlIGV4cHJlc3Npb24gYXMgJ1wiYSBcIiArIGIgKyBcIiBjXCInLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRva2Vuc1RvRXhwKHRva2Vucywgdm0pIHtcblx0ICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcblx0ICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuXHQgICAgICByZXR1cm4gZm9ybWF0VG9rZW4odG9rZW4sIHZtKTtcblx0ICAgIH0pLmpvaW4oJysnKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2Vuc1swXSwgdm0sIHRydWUpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCBhIHNpbmdsZSB0b2tlbi5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3NpbmdsZV1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFRva2VuKHRva2VuLCB2bSwgc2luZ2xlKSB7XG5cdCAgcmV0dXJuIHRva2VuLnRhZyA/IHRva2VuLm9uZVRpbWUgJiYgdm0gPyAnXCInICsgdm0uJGV2YWwodG9rZW4udmFsdWUpICsgJ1wiJyA6IGlubGluZUZpbHRlcnModG9rZW4udmFsdWUsIHNpbmdsZSkgOiAnXCInICsgdG9rZW4udmFsdWUgKyAnXCInO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9yIGFuIGF0dHJpYnV0ZSB3aXRoIG11bHRpcGxlIGludGVycG9sYXRpb24gdGFncyxcblx0ICogZS5nLiBhdHRyPVwic29tZS17e3RoaW5nIHwgZmlsdGVyfX1cIiwgaW4gb3JkZXIgdG8gY29tYmluZVxuXHQgKiB0aGUgd2hvbGUgdGhpbmcgaW50byBhIHNpbmdsZSB3YXRjaGFibGUgZXhwcmVzc2lvbiwgd2Vcblx0ICogaGF2ZSB0byBpbmxpbmUgdGhvc2UgZmlsdGVycy4gVGhpcyBmdW5jdGlvbiBkb2VzIGV4YWN0bHlcblx0ICogdGhhdC4gVGhpcyBpcyBhIGJpdCBoYWNreSBidXQgaXQgYXZvaWRzIGhlYXZ5IGNoYW5nZXNcblx0ICogdG8gZGlyZWN0aXZlIHBhcnNlciBhbmQgd2F0Y2hlciBtZWNoYW5pc20uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHBhcmFtIHtCb29sZWFufSBzaW5nbGVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBmaWx0ZXJSRSA9IC9bXnxdXFx8W158XS87XG5cdGZ1bmN0aW9uIGlubGluZUZpbHRlcnMoZXhwLCBzaW5nbGUpIHtcblx0ICBpZiAoIWZpbHRlclJFLnRlc3QoZXhwKSkge1xuXHQgICAgcmV0dXJuIHNpbmdsZSA/IGV4cCA6ICcoJyArIGV4cCArICcpJztcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKGV4cCk7XG5cdCAgICBpZiAoIWRpci5maWx0ZXJzKSB7XG5cdCAgICAgIHJldHVybiAnKCcgKyBleHAgKyAnKSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3RoaXMuX2FwcGx5RmlsdGVycygnICsgZGlyLmV4cHJlc3Npb24gKyAvLyB2YWx1ZVxuXHQgICAgICAnLG51bGwsJyArIC8vIG9sZFZhbHVlIChudWxsIGZvciByZWFkKVxuXHQgICAgICBKU09OLnN0cmluZ2lmeShkaXIuZmlsdGVycykgKyAvLyBmaWx0ZXIgZGVzY3JpcHRvcnNcblx0ICAgICAgJyxmYWxzZSknOyAvLyB3cml0ZT9cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB0ZXh0ID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgY29tcGlsZVJlZ2V4OiBjb21waWxlUmVnZXgsXG5cdCAgcGFyc2VUZXh0OiBwYXJzZVRleHQsXG5cdCAgdG9rZW5zVG9FeHA6IHRva2Vuc1RvRXhwXG5cdH0pO1xuXHRcblx0dmFyIGRlbGltaXRlcnMgPSBbJ3t7JywgJ319J107XG5cdHZhciB1bnNhZmVEZWxpbWl0ZXJzID0gWyd7e3snLCAnfX19J107XG5cdFxuXHR2YXIgY29uZmlnID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHByaW50IGRlYnVnIG1lc3NhZ2VzLlxuXHQgICAqIEFsc28gZW5hYmxlcyBzdGFjayB0cmFjZSBmb3Igd2FybmluZ3MuXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7Qm9vbGVhbn1cblx0ICAgKi9cblx0XG5cdCAgZGVidWc6IGZhbHNlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIHNpbGVudDogZmFsc2UsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gdXNlIGFzeW5jIHJlbmRlcmluZy5cblx0ICAgKi9cblx0XG5cdCAgYXN5bmM6IHRydWUsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gd2FybiBhZ2FpbnN0IGVycm9ycyBjYXVnaHQgd2hlbiBldmFsdWF0aW5nXG5cdCAgICogZXhwcmVzc2lvbnMuXG5cdCAgICovXG5cdFxuXHQgIHdhcm5FeHByZXNzaW9uRXJyb3JzOiB0cnVlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIGFsbG93IGRldnRvb2xzIGluc3BlY3Rpb24uXG5cdCAgICogRGlzYWJsZWQgYnkgZGVmYXVsdCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cblx0ICAgKi9cblx0XG5cdCAgZGV2dG9vbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEludGVybmFsIGZsYWcgdG8gaW5kaWNhdGUgdGhlIGRlbGltaXRlcnMgaGF2ZSBiZWVuXG5cdCAgICogY2hhbmdlZC5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtCb29sZWFufVxuXHQgICAqL1xuXHRcblx0ICBfZGVsaW1pdGVyc0NoYW5nZWQ6IHRydWUsXG5cdFxuXHQgIC8qKlxuXHQgICAqIExpc3Qgb2YgYXNzZXQgdHlwZXMgdGhhdCBhIGNvbXBvbmVudCBjYW4gb3duLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0FycmF5fVxuXHQgICAqL1xuXHRcblx0ICBfYXNzZXRUeXBlczogWydjb21wb25lbnQnLCAnZGlyZWN0aXZlJywgJ2VsZW1lbnREaXJlY3RpdmUnLCAnZmlsdGVyJywgJ3RyYW5zaXRpb24nLCAncGFydGlhbCddLFxuXHRcblx0ICAvKipcblx0ICAgKiBwcm9wIGJpbmRpbmcgbW9kZXNcblx0ICAgKi9cblx0XG5cdCAgX3Byb3BCaW5kaW5nTW9kZXM6IHtcblx0ICAgIE9ORV9XQVk6IDAsXG5cdCAgICBUV09fV0FZOiAxLFxuXHQgICAgT05FX1RJTUU6IDJcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBNYXggY2lyY3VsYXIgdXBkYXRlcyBhbGxvd2VkIGluIGEgYmF0Y2hlciBmbHVzaCBjeWNsZS5cblx0ICAgKi9cblx0XG5cdCAgX21heFVwZGF0ZUNvdW50OiAxMDBcblx0XG5cdH0sIHtcblx0ICBkZWxpbWl0ZXJzOiB7IC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW50ZXJwb2xhdGlvbiBkZWxpbWl0ZXJzLiBDaGFuZ2luZyB0aGVzZSB3b3VsZCB0cmlnZ2VyXG5cdCAgICAgICAgICAgICAgICAgKiB0aGUgdGV4dCBwYXJzZXIgdG8gcmUtY29tcGlsZSB0aGUgcmVndWxhciBleHByZXNzaW9ucy5cblx0ICAgICAgICAgICAgICAgICAqXG5cdCAgICAgICAgICAgICAgICAgKiBAdHlwZSB7QXJyYXk8U3RyaW5nPn1cblx0ICAgICAgICAgICAgICAgICAqL1xuXHRcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gZGVsaW1pdGVycztcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcblx0ICAgICAgZGVsaW1pdGVycyA9IHZhbDtcblx0ICAgICAgY29tcGlsZVJlZ2V4KCk7XG5cdCAgICB9LFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZW51bWVyYWJsZTogdHJ1ZVxuXHQgIH0sXG5cdCAgdW5zYWZlRGVsaW1pdGVyczoge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB1bnNhZmVEZWxpbWl0ZXJzO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuXHQgICAgICB1bnNhZmVEZWxpbWl0ZXJzID0gdmFsO1xuXHQgICAgICBjb21waWxlUmVnZXgoKTtcblx0ICAgIH0sXG5cdCAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlXG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciB3YXJuID0gdW5kZWZpbmVkO1xuXHR2YXIgZm9ybWF0Q29tcG9uZW50TmFtZSA9IHVuZGVmaW5lZDtcblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgKGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xuXHRcblx0ICAgIHdhcm4gPSBmdW5jdGlvbiAobXNnLCB2bSkge1xuXHQgICAgICBpZiAoaGFzQ29uc29sZSAmJiAhY29uZmlnLnNpbGVudCkge1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tWdWUgd2Fybl06ICcgKyBtc2cgKyAodm0gPyBmb3JtYXRDb21wb25lbnROYW1lKHZtKSA6ICcnKSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSkge1xuXHQgICAgICB2YXIgbmFtZSA9IHZtLl9pc1Z1ZSA/IHZtLiRvcHRpb25zLm5hbWUgOiB2bS5uYW1lO1xuXHQgICAgICByZXR1cm4gbmFtZSA/ICcgKGZvdW5kIGluIGNvbXBvbmVudDogPCcgKyBoeXBoZW5hdGUobmFtZSkgKyAnPiknIDogJyc7XG5cdCAgICB9O1xuXHQgIH0pKCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcHBlbmQgd2l0aCB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXBwZW5kV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG5cdCAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH0sIHZtLCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnRCZWZvcmUgd2l0aCB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYmVmb3JlV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldCk7XG5cdCAgfSwgdm0sIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSB3aXRoIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVXaXRoVHJhbnNpdGlvbihlbCwgdm0sIGNiKSB7XG5cdCAgYXBwbHlUcmFuc2l0aW9uKGVsLCAtMSwgZnVuY3Rpb24gKCkge1xuXHQgICAgcmVtb3ZlKGVsKTtcblx0ICB9LCB2bSwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXBwbHkgdHJhbnNpdGlvbnMgd2l0aCBhbiBvcGVyYXRpb24gY2FsbGJhY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGRpcmVjdGlvblxuXHQgKiAgICAgICAgICAgICAgICAgIDE6IGVudGVyXG5cdCAqICAgICAgICAgICAgICAgICAtMTogbGVhdmVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSB0aGUgYWN0dWFsIERPTSBvcGVyYXRpb25cblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhcHBseVRyYW5zaXRpb24oZWwsIGRpcmVjdGlvbiwgb3AsIHZtLCBjYikge1xuXHQgIHZhciB0cmFuc2l0aW9uID0gZWwuX192X3RyYW5zO1xuXHQgIGlmICghdHJhbnNpdGlvbiB8fFxuXHQgIC8vIHNraXAgaWYgdGhlcmUgYXJlIG5vIGpzIGhvb2tzIGFuZCBDU1MgdHJhbnNpdGlvbiBpc1xuXHQgIC8vIG5vdCBzdXBwb3J0ZWRcblx0ICAhdHJhbnNpdGlvbi5ob29rcyAmJiAhdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG5cdCAgLy8gc2tpcCB0cmFuc2l0aW9ucyBmb3IgaW5pdGlhbCBjb21waWxlXG5cdCAgIXZtLl9pc0NvbXBpbGVkIHx8XG5cdCAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIG1hbmlwdWxhdGVkIGJ5IGEgcGFyZW50IGRpcmVjdGl2ZVxuXHQgIC8vIGR1cmluZyB0aGUgcGFyZW50J3MgY29tcGlsYXRpb24gcGhhc2UsIHNraXAgdGhlXG5cdCAgLy8gYW5pbWF0aW9uLlxuXHQgIHZtLiRwYXJlbnQgJiYgIXZtLiRwYXJlbnQuX2lzQ29tcGlsZWQpIHtcblx0ICAgIG9wKCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBhY3Rpb24gPSBkaXJlY3Rpb24gPiAwID8gJ2VudGVyJyA6ICdsZWF2ZSc7XG5cdCAgdHJhbnNpdGlvblthY3Rpb25dKG9wLCBjYik7XG5cdH1cblx0XG5cdHZhciB0cmFuc2l0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgYXBwZW5kV2l0aFRyYW5zaXRpb246IGFwcGVuZFdpdGhUcmFuc2l0aW9uLFxuXHQgIGJlZm9yZVdpdGhUcmFuc2l0aW9uOiBiZWZvcmVXaXRoVHJhbnNpdGlvbixcblx0ICByZW1vdmVXaXRoVHJhbnNpdGlvbjogcmVtb3ZlV2l0aFRyYW5zaXRpb24sXG5cdCAgYXBwbHlUcmFuc2l0aW9uOiBhcHBseVRyYW5zaXRpb25cblx0fSk7XG5cdFxuXHQvKipcblx0ICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcXVlcnkoZWwpIHtcblx0ICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuXHQgICAgdmFyIHNlbGVjdG9yID0gZWw7XG5cdCAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuXHQgICAgaWYgKCFlbCkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0Nhbm5vdCBmaW5kIGVsZW1lbnQ6ICcgKyBzZWxlY3Rvcik7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBlbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgbm9kZSBpcyBpbiB0aGUgZG9jdW1lbnQuXG5cdCAqIE5vdGU6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyBzaG91bGQgd29yayBoZXJlXG5cdCAqIGJ1dCBhbHdheXMgcmV0dXJucyBmYWxzZSBmb3IgY29tbWVudCBub2RlcyBpbiBwaGFudG9tanMsXG5cdCAqIG1ha2luZyB1bml0IHRlc3RzIGRpZmZpY3VsdC4gVGhpcyBpcyBmaXhlZCBieSBkb2luZyB0aGVcblx0ICogY29udGFpbnMoKSBjaGVjayBvbiB0aGUgbm9kZSdzIHBhcmVudE5vZGUgaW5zdGVhZCBvZlxuXHQgKiB0aGUgbm9kZSBpdHNlbGYuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluRG9jKG5vZGUpIHtcblx0ICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTtcblx0ICB2YXIgZG9jID0gbm9kZS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0ICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuXHQgIHJldHVybiBkb2MgPT09IG5vZGUgfHwgZG9jID09PSBwYXJlbnQgfHwgISEocGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSAmJiBkb2MuY29udGFpbnMocGFyZW50KSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgYW5kIHJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSBhIG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gX2F0dHJcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRBdHRyKG5vZGUsIF9hdHRyKSB7XG5cdCAgdmFyIHZhbCA9IG5vZGUuZ2V0QXR0cmlidXRlKF9hdHRyKTtcblx0ICBpZiAodmFsICE9PSBudWxsKSB7XG5cdCAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShfYXR0cik7XG5cdCAgfVxuXHQgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgYW4gYXR0cmlidXRlIHdpdGggY29sb24gb3Igdi1iaW5kOiBwcmVmaXguXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd8bnVsbH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRCaW5kQXR0cihub2RlLCBuYW1lKSB7XG5cdCAgdmFyIHZhbCA9IGdldEF0dHIobm9kZSwgJzonICsgbmFtZSk7XG5cdCAgaWYgKHZhbCA9PT0gbnVsbCkge1xuXHQgICAgdmFsID0gZ2V0QXR0cihub2RlLCAndi1iaW5kOicgKyBuYW1lKTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIHRoZSBwcmVzZW5jZSBvZiBhIGJpbmQgYXR0cmlidXRlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBoYXNCaW5kQXR0cihub2RlLCBuYW1lKSB7XG5cdCAgcmV0dXJuIG5vZGUuaGFzQXR0cmlidXRlKG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCc6JyArIG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCd2LWJpbmQ6JyArIG5hbWUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGVsIGJlZm9yZSB0YXJnZXRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGJlZm9yZShlbCwgdGFyZ2V0KSB7XG5cdCAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCB0YXJnZXQpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGVsIGFmdGVyIHRhcmdldFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYWZ0ZXIoZWwsIHRhcmdldCkge1xuXHQgIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0Lm5leHRTaWJsaW5nKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGFyZ2V0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBlbCBmcm9tIERPTVxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlKGVsKSB7XG5cdCAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcmVwZW5kIGVsIHRvIHRhcmdldFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJlcGVuZChlbCwgdGFyZ2V0KSB7XG5cdCAgaWYgKHRhcmdldC5maXJzdENoaWxkKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldC5maXJzdENoaWxkKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXBsYWNlIHRhcmdldCB3aXRoIGVsXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXBsYWNlKHRhcmdldCwgZWwpIHtcblx0ICB2YXIgcGFyZW50ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG5cdCAgaWYgKHBhcmVudCkge1xuXHQgICAgcGFyZW50LnJlcGxhY2VDaGlsZChlbCwgdGFyZ2V0KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBZGQgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9uKGVsLCBldmVudCwgY2IsIHVzZUNhcHR1cmUpIHtcblx0ICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9mZihlbCwgZXZlbnQsIGNiKSB7XG5cdCAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9yIElFOSBjb21wYXQ6IHdoZW4gYm90aCBjbGFzcyBhbmQgOmNsYXNzIGFyZSBwcmVzZW50XG5cdCAqIGdldEF0dHJpYnV0ZSgnY2xhc3MnKSByZXR1cm5zIHdyb25nIHZhbHVlLi4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldENsYXNzKGVsKSB7XG5cdCAgdmFyIGNsYXNzbmFtZSA9IGVsLmNsYXNzTmFtZTtcblx0ICBpZiAodHlwZW9mIGNsYXNzbmFtZSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGNsYXNzbmFtZSA9IGNsYXNzbmFtZS5iYXNlVmFsIHx8ICcnO1xuXHQgIH1cblx0ICByZXR1cm4gY2xhc3NuYW1lO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW4gSUU5LCBzZXRBdHRyaWJ1dGUoJ2NsYXNzJykgd2lsbCByZXN1bHQgaW4gZW1wdHkgY2xhc3Ncblx0ICogaWYgdGhlIGVsZW1lbnQgYWxzbyBoYXMgdGhlIDpjbGFzcyBhdHRyaWJ1dGU7IEhvd2V2ZXIgaW5cblx0ICogUGhhbnRvbUpTLCBzZXR0aW5nIGBjbGFzc05hbWVgIGRvZXMgbm90IHdvcmsgb24gU1ZHIGVsZW1lbnRzLi4uXG5cdCAqIFNvIHdlIGhhdmUgdG8gZG8gYSBjb25kaXRpb25hbCBjaGVjayBoZXJlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzZXRDbGFzcyhlbCwgY2xzKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzSUU5ICYmICEvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG5cdCAgICBlbC5jbGFzc05hbWUgPSBjbHM7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbHMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFkZENsYXNzKGVsLCBjbHMpIHtcblx0ICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XG5cdCAgICBpZiAoY3VyLmluZGV4T2YoJyAnICsgY2xzICsgJyAnKSA8IDApIHtcblx0ICAgICAgc2V0Q2xhc3MoZWwsIChjdXIgKyBjbHMpLnRyaW0oKSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNscykge1xuXHQgIGlmIChlbC5jbGFzc0xpc3QpIHtcblx0ICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcblx0ICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG5cdCAgICB3aGlsZSAoY3VyLmluZGV4T2YodGFyKSA+PSAwKSB7XG5cdCAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKTtcblx0ICAgIH1cblx0ICAgIHNldENsYXNzKGVsLCBjdXIudHJpbSgpKTtcblx0ICB9XG5cdCAgaWYgKCFlbC5jbGFzc05hbWUpIHtcblx0ICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHRyYWN0IHJhdyBjb250ZW50IGluc2lkZSBhbiBlbGVtZW50IGludG8gYSB0ZW1wb3Jhcnlcblx0ICogY29udGFpbmVyIGRpdlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gYXNGcmFnbWVudFxuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdENvbnRlbnQoZWwsIGFzRnJhZ21lbnQpIHtcblx0ICB2YXIgY2hpbGQ7XG5cdCAgdmFyIHJhd0NvbnRlbnQ7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzVGVtcGxhdGUoZWwpICYmIGlzRnJhZ21lbnQoZWwuY29udGVudCkpIHtcblx0ICAgIGVsID0gZWwuY29udGVudDtcblx0ICB9XG5cdCAgaWYgKGVsLmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgdHJpbU5vZGUoZWwpO1xuXHQgICAgcmF3Q29udGVudCA9IGFzRnJhZ21lbnQgPyBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICB3aGlsZSAoY2hpbGQgPSBlbC5maXJzdENoaWxkKSB7XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgICAgcmF3Q29udGVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByYXdDb250ZW50O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVHJpbSBwb3NzaWJsZSBlbXB0eSBoZWFkL3RhaWwgdGV4dCBhbmQgY29tbWVudFxuXHQgKiBub2RlcyBpbnNpZGUgYSBwYXJlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRyaW1Ob2RlKG5vZGUpIHtcblx0ICB2YXIgY2hpbGQ7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VxdWVuY2VzICovXG5cdCAgd2hpbGUgKChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuXHQgICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG5cdCAgfVxuXHQgIHdoaWxlICgoY2hpbGQgPSBub2RlLmxhc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuXHQgICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG5cdCAgfVxuXHQgIC8qIGVzbGludC1lbmFibGUgbm8tc2VxdWVuY2VzICovXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzVHJpbW1hYmxlKG5vZGUpIHtcblx0ICByZXR1cm4gbm9kZSAmJiAobm9kZS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZS5kYXRhLnRyaW0oKSB8fCBub2RlLm5vZGVUeXBlID09PSA4KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSB0YWcuXG5cdCAqIE5vdGUgaWYgdGhlIHRlbXBsYXRlIGFwcGVhcnMgaW5zaWRlIGFuIFNWRyBpdHMgdGFnTmFtZVxuXHQgKiB3aWxsIGJlIGluIGxvd2VyY2FzZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzVGVtcGxhdGUoZWwpIHtcblx0ICByZXR1cm4gZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZW1wbGF0ZSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYW4gXCJhbmNob3JcIiBmb3IgcGVyZm9ybWluZyBkb20gaW5zZXJ0aW9uL3JlbW92YWxzLlxuXHQgKiBUaGlzIGlzIHVzZWQgaW4gYSBudW1iZXIgb2Ygc2NlbmFyaW9zOlxuXHQgKiAtIGZyYWdtZW50IGluc3RhbmNlXG5cdCAqIC0gdi1odG1sXG5cdCAqIC0gdi1pZlxuXHQgKiAtIHYtZm9yXG5cdCAqIC0gY29tcG9uZW50XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcGVyc2lzdCAtIElFIHRyYXNoZXMgZW1wdHkgdGV4dE5vZGVzIG9uXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lTm9kZSh0cnVlKSwgc28gaW4gY2VydGFpblxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlcyB0aGUgYW5jaG9yIG5lZWRzIHRvIGJlXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbi1lbXB0eSB0byBiZSBwZXJzaXN0ZWQgaW5cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzLlxuXHQgKiBAcmV0dXJuIHtDb21tZW50fFRleHR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQW5jaG9yKGNvbnRlbnQsIHBlcnNpc3QpIHtcblx0ICB2YXIgYW5jaG9yID0gY29uZmlnLmRlYnVnID8gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBlcnNpc3QgPyAnICcgOiAnJyk7XG5cdCAgYW5jaG9yLl9fdl9hbmNob3IgPSB0cnVlO1xuXHQgIHJldHVybiBhbmNob3I7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaW5kIGEgY29tcG9uZW50IHJlZiBhdHRyaWJ1dGUgdGhhdCBzdGFydHMgd2l0aCAkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGVcblx0ICogQHJldHVybiB7U3RyaW5nfHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHR2YXIgcmVmUkUgPSAvXnYtcmVmOi87XG5cdFxuXHRmdW5jdGlvbiBmaW5kUmVmKG5vZGUpIHtcblx0ICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcblx0ICAgIHZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlcztcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBuYW1lID0gYXR0cnNbaV0ubmFtZTtcblx0ICAgICAgaWYgKHJlZlJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICByZXR1cm4gY2FtZWxpemUobmFtZS5yZXBsYWNlKHJlZlJFLCAnJykpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogTWFwIGEgZnVuY3Rpb24gdG8gYSByYW5nZSBvZiBub2RlcyAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge05vZGV9IGVuZFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1hcE5vZGVSYW5nZShub2RlLCBlbmQsIG9wKSB7XG5cdCAgdmFyIG5leHQ7XG5cdCAgd2hpbGUgKG5vZGUgIT09IGVuZCkge1xuXHQgICAgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdCAgICBvcChub2RlKTtcblx0ICAgIG5vZGUgPSBuZXh0O1xuXHQgIH1cblx0ICBvcChlbmQpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgd2l0aCB0cmFuc2l0aW9uLCBzdG9yZVxuXHQgKiB0aGUgbm9kZXMgaW4gYSBmcmFnbWVudCB3aXRoIGNvcnJlY3Qgb3JkZXJpbmcsXG5cdCAqIGFuZCBjYWxsIGNhbGxiYWNrIHdoZW4gZG9uZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBzdGFydFxuXHQgKiBAcGFyYW0ge05vZGV9IGVuZFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIHZtLCBmcmFnLCBjYikge1xuXHQgIHZhciBkb25lID0gZmFsc2U7XG5cdCAgdmFyIHJlbW92ZWQgPSAwO1xuXHQgIHZhciBub2RlcyA9IFtdO1xuXHQgIG1hcE5vZGVSYW5nZShzdGFydCwgZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuXHQgICAgaWYgKG5vZGUgPT09IGVuZCkgZG9uZSA9IHRydWU7XG5cdCAgICBub2Rlcy5wdXNoKG5vZGUpO1xuXHQgICAgcmVtb3ZlV2l0aFRyYW5zaXRpb24obm9kZSwgdm0sIG9uUmVtb3ZlZCk7XG5cdCAgfSk7XG5cdCAgZnVuY3Rpb24gb25SZW1vdmVkKCkge1xuXHQgICAgcmVtb3ZlZCsrO1xuXHQgICAgaWYgKGRvbmUgJiYgcmVtb3ZlZCA+PSBub2Rlcy5sZW5ndGgpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZXNbaV0pO1xuXHQgICAgICB9XG5cdCAgICAgIGNiICYmIGNiKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgRG9jdW1lbnRGcmFnbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNGcmFnbWVudChub2RlKSB7XG5cdCAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMTE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgb3V0ZXJIVE1MIG9mIGVsZW1lbnRzLCB0YWtpbmcgY2FyZVxuXHQgKiBvZiBTVkcgZWxlbWVudHMgaW4gSUUgYXMgd2VsbC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0T3V0ZXJIVE1MKGVsKSB7XG5cdCAgaWYgKGVsLm91dGVySFRNTCkge1xuXHQgICAgcmV0dXJuIGVsLm91dGVySFRNTDtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsLmNsb25lTm9kZSh0cnVlKSk7XG5cdCAgICByZXR1cm4gY29udGFpbmVyLmlubmVySFRNTDtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBjb21tb25UYWdSRSA9IC9eKGRpdnxwfHNwYW58aW1nfGF8YnxpfGJyfHVsfG9sfGxpfGgxfGgyfGgzfGg0fGg1fGg2fGNvZGV8cHJlfHRhYmxlfHRofHRkfHRyfGZvcm18bGFiZWx8aW5wdXR8c2VsZWN0fG9wdGlvbnxuYXZ8YXJ0aWNsZXxzZWN0aW9ufGhlYWRlcnxmb290ZXIpJC9pO1xuXHR2YXIgcmVzZXJ2ZWRUYWdSRSA9IC9eKHNsb3R8cGFydGlhbHxjb21wb25lbnQpJC9pO1xuXHRcblx0dmFyIGlzVW5rbm93bkVsZW1lbnQgPSB1bmRlZmluZWQ7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgaXNVbmtub3duRWxlbWVudCA9IGZ1bmN0aW9uIChlbCwgdGFnKSB7XG5cdCAgICBpZiAodGFnLmluZGV4T2YoJy0nKSA+IC0xKSB7XG5cdCAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI4MjEwMzY0LzEwNzAyNDRcblx0ICAgICAgcmV0dXJuIGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTFVua25vd25FbGVtZW50IHx8IGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTEVsZW1lbnQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gKC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkgJiZcblx0ICAgICAgICAvLyBDaHJvbWUgcmV0dXJucyB1bmtub3duIGZvciBzZXZlcmFsIEhUTUw1IGVsZW1lbnRzLlxuXHQgICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01NDA1MjZcblx0ICAgICAgICAvLyBGaXJlZm94IHJldHVybnMgdW5rbm93biBmb3Igc29tZSBcIkludGVyYWN0aXZlIGVsZW1lbnRzLlwiXG5cdCAgICAgICAgIS9eKGRhdGF8dGltZXxydGN8cmJ8ZGV0YWlsc3xkaWFsb2d8c3VtbWFyeSkkLy50ZXN0KHRhZylcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudCwgaWYgeWVzIHJldHVybiBpdHNcblx0ICogY29tcG9uZW50IGlkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tDb21wb25lbnRBdHRyKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0ICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG5cdCAgaWYgKCFjb21tb25UYWdSRS50ZXN0KHRhZykgJiYgIXJlc2VydmVkVGFnUkUudGVzdCh0YWcpKSB7XG5cdCAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkge1xuXHQgICAgICByZXR1cm4geyBpZDogdGFnIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgaXMgPSBoYXNBdHRycyAmJiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuXHQgICAgICBpZiAoaXMpIHtcblx0ICAgICAgICByZXR1cm4gaXM7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHZhciBleHBlY3RlZFRhZyA9IG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXAgJiYgb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcFt0YWddO1xuXHQgICAgICAgIGlmIChleHBlY3RlZFRhZykge1xuXHQgICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtICcgKyAnZGlkIHlvdSBtZWFuIDwnICsgZXhwZWN0ZWRUYWcgKyAnPj8gJyArICdIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSBrZWJhYi1jYXNlIGluIHRlbXBsYXRlcy4nKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGlzVW5rbm93bkVsZW1lbnQoZWwsIHRhZykpIHtcblx0ICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSBkaWQgeW91ICcgKyAncmVnaXN0ZXIgdGhlIGNvbXBvbmVudCBjb3JyZWN0bHk/IEZvciByZWN1cnNpdmUgY29tcG9uZW50cywgJyArICdtYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGUgXCJuYW1lXCIgb3B0aW9uLicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaGFzQXR0cnMpIHtcblx0ICAgIHJldHVybiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBcImlzXCIgYmluZGluZyBmcm9tIGFuIGVsZW1lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpIHtcblx0ICAvLyBkeW5hbWljIHN5bnRheFxuXHQgIHZhciBleHAgPSBlbC5nZXRBdHRyaWJ1dGUoJ2lzJyk7XG5cdCAgaWYgKGV4cCAhPSBudWxsKSB7XG5cdCAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgZXhwKSkge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG5cdCAgICAgIHJldHVybiB7IGlkOiBleHAgfTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgZXhwID0gZ2V0QmluZEF0dHIoZWwsICdpcycpO1xuXHQgICAgaWYgKGV4cCAhPSBudWxsKSB7XG5cdCAgICAgIHJldHVybiB7IGlkOiBleHAsIGR5bmFtaWM6IHRydWUgfTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBPcHRpb24gb3ZlcndyaXRpbmcgc3RyYXRlZ2llcyBhcmUgZnVuY3Rpb25zIHRoYXQgaGFuZGxlXG5cdCAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uXG5cdCAqIHZhbHVlIGludG8gdGhlIGZpbmFsIHZhbHVlLlxuXHQgKlxuXHQgKiBBbGwgc3RyYXRlZ3kgZnVuY3Rpb25zIGZvbGxvdyB0aGUgc2FtZSBzaWduYXR1cmU6XG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gcGFyZW50VmFsXG5cdCAqIEBwYXJhbSB7Kn0gY2hpbGRWYWxcblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICovXG5cdFxuXHR2YXIgc3RyYXRzID0gY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRoYXQgcmVjdXJzaXZlbHkgbWVyZ2VzIHR3byBkYXRhIG9iamVjdHMgdG9nZXRoZXIuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VEYXRhKHRvLCBmcm9tKSB7XG5cdCAgdmFyIGtleSwgdG9WYWwsIGZyb21WYWw7XG5cdCAgZm9yIChrZXkgaW4gZnJvbSkge1xuXHQgICAgdG9WYWwgPSB0b1trZXldO1xuXHQgICAgZnJvbVZhbCA9IGZyb21ba2V5XTtcblx0ICAgIGlmICghaGFzT3duKHRvLCBrZXkpKSB7XG5cdCAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodG9WYWwpICYmIGlzT2JqZWN0KGZyb21WYWwpKSB7XG5cdCAgICAgIG1lcmdlRGF0YSh0b1ZhbCwgZnJvbVZhbCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0bztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERhdGFcblx0ICovXG5cdFxuXHRzdHJhdHMuZGF0YSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuXHQgIGlmICghdm0pIHtcblx0ICAgIC8vIGluIGEgVnVlLmV4dGVuZCBtZXJnZSwgYm90aCBzaG91bGQgYmUgZnVuY3Rpb25zXG5cdCAgICBpZiAoIWNoaWxkVmFsKSB7XG5cdCAgICAgIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgICB9XG5cdCAgICBpZiAodHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZGF0YVwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG5cdCAgICAgIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgICB9XG5cdCAgICBpZiAoIXBhcmVudFZhbCkge1xuXHQgICAgICByZXR1cm4gY2hpbGRWYWw7XG5cdCAgICB9XG5cdCAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXG5cdCAgICAvLyB3ZSBuZWVkIHRvIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcblx0ICAgIC8vIG1lcmdlZCByZXN1bHQgb2YgYm90aCBmdW5jdGlvbnMuLi4gbm8gbmVlZCB0b1xuXHQgICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXG5cdCAgICAvLyBpdCBoYXMgdG8gYmUgYSBmdW5jdGlvbiB0byBwYXNzIHByZXZpb3VzIG1lcmdlcy5cblx0ICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWREYXRhRm4oKSB7XG5cdCAgICAgIHJldHVybiBtZXJnZURhdGEoY2hpbGRWYWwuY2FsbCh0aGlzKSwgcGFyZW50VmFsLmNhbGwodGhpcykpO1xuXHQgICAgfTtcblx0ICB9IGVsc2UgaWYgKHBhcmVudFZhbCB8fCBjaGlsZFZhbCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZEluc3RhbmNlRGF0YUZuKCkge1xuXHQgICAgICAvLyBpbnN0YW5jZSBtZXJnZVxuXHQgICAgICB2YXIgaW5zdGFuY2VEYXRhID0gdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nID8gY2hpbGRWYWwuY2FsbCh2bSkgOiBjaGlsZFZhbDtcblx0ICAgICAgdmFyIGRlZmF1bHREYXRhID0gdHlwZW9mIHBhcmVudFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmVudFZhbC5jYWxsKHZtKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgaWYgKGluc3RhbmNlRGF0YSkge1xuXHQgICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFbFxuXHQgKi9cblx0XG5cdHN0cmF0cy5lbCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuXHQgIGlmICghdm0gJiYgY2hpbGRWYWwgJiYgdHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImVsXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHJldCA9IGNoaWxkVmFsIHx8IHBhcmVudFZhbDtcblx0ICAvLyBpbnZva2UgdGhlIGVsZW1lbnQgZmFjdG9yeSBpZiB0aGlzIGlzIGluc3RhbmNlIG1lcmdlXG5cdCAgcmV0dXJuIHZtICYmIHR5cGVvZiByZXQgPT09ICdmdW5jdGlvbicgPyByZXQuY2FsbCh2bSkgOiByZXQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogSG9va3MgYW5kIHBhcmFtIGF0dHJpYnV0ZXMgYXJlIG1lcmdlZCBhcyBhcnJheXMuXG5cdCAqL1xuXHRcblx0c3RyYXRzLmluaXQgPSBzdHJhdHMuY3JlYXRlZCA9IHN0cmF0cy5yZWFkeSA9IHN0cmF0cy5hdHRhY2hlZCA9IHN0cmF0cy5kZXRhY2hlZCA9IHN0cmF0cy5iZWZvcmVDb21waWxlID0gc3RyYXRzLmNvbXBpbGVkID0gc3RyYXRzLmJlZm9yZURlc3Ryb3kgPSBzdHJhdHMuZGVzdHJveWVkID0gc3RyYXRzLmFjdGl2YXRlID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICByZXR1cm4gY2hpbGRWYWwgPyBwYXJlbnRWYWwgPyBwYXJlbnRWYWwuY29uY2F0KGNoaWxkVmFsKSA6IGlzQXJyYXkoY2hpbGRWYWwpID8gY2hpbGRWYWwgOiBbY2hpbGRWYWxdIDogcGFyZW50VmFsO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFzc2V0c1xuXHQgKlxuXHQgKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvXG5cdCAqIGEgdGhyZWUtd2F5IG1lcmdlIGJldHdlZW4gY29uc3RydWN0b3Igb3B0aW9ucywgaW5zdGFuY2Vcblx0ICogb3B0aW9ucyBhbmQgcGFyZW50IG9wdGlvbnMuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VBc3NldHMocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKTtcblx0ICByZXR1cm4gY2hpbGRWYWwgPyBleHRlbmQocmVzLCBndWFyZEFycmF5QXNzZXRzKGNoaWxkVmFsKSkgOiByZXM7XG5cdH1cblx0XG5cdGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgc3RyYXRzW3R5cGUgKyAncyddID0gbWVyZ2VBc3NldHM7XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIEV2ZW50cyAmIFdhdGNoZXJzLlxuXHQgKlxuXHQgKiBFdmVudHMgJiB3YXRjaGVycyBoYXNoZXMgc2hvdWxkIG5vdCBvdmVyd3JpdGUgb25lXG5cdCAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLlxuXHQgKi9cblx0XG5cdHN0cmF0cy53YXRjaCA9IHN0cmF0cy5ldmVudHMgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcblx0ICB2YXIgcmV0ID0ge307XG5cdCAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcblx0ICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcblx0ICAgIHZhciBwYXJlbnQgPSByZXRba2V5XTtcblx0ICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleV07XG5cdCAgICBpZiAocGFyZW50ICYmICFpc0FycmF5KHBhcmVudCkpIHtcblx0ICAgICAgcGFyZW50ID0gW3BhcmVudF07XG5cdCAgICB9XG5cdCAgICByZXRba2V5XSA9IHBhcmVudCA/IHBhcmVudC5jb25jYXQoY2hpbGQpIDogW2NoaWxkXTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBPdGhlciBvYmplY3QgaGFzaGVzLlxuXHQgKi9cblx0XG5cdHN0cmF0cy5wcm9wcyA9IHN0cmF0cy5tZXRob2RzID0gc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuXHQgIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG5cdCAgdmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcblx0ICBleHRlbmQocmV0LCBjaGlsZFZhbCk7XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZWZhdWx0IHN0cmF0ZWd5LlxuXHQgKi9cblx0XG5cdHZhciBkZWZhdWx0U3RyYXQgPSBmdW5jdGlvbiBkZWZhdWx0U3RyYXQocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIHJldHVybiBjaGlsZFZhbCA9PT0gdW5kZWZpbmVkID8gcGFyZW50VmFsIDogY2hpbGRWYWw7XG5cdH07XG5cdFxuXHQvKipcblx0ICogTWFrZSBzdXJlIGNvbXBvbmVudCBvcHRpb25zIGdldCBjb252ZXJ0ZWQgdG8gYWN0dWFsXG5cdCAqIGNvbnN0cnVjdG9ycy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBndWFyZENvbXBvbmVudHMob3B0aW9ucykge1xuXHQgIGlmIChvcHRpb25zLmNvbXBvbmVudHMpIHtcblx0ICAgIHZhciBjb21wb25lbnRzID0gb3B0aW9ucy5jb21wb25lbnRzID0gZ3VhcmRBcnJheUFzc2V0cyhvcHRpb25zLmNvbXBvbmVudHMpO1xuXHQgICAgdmFyIGlkcyA9IE9iamVjdC5rZXlzKGNvbXBvbmVudHMpO1xuXHQgICAgdmFyIGRlZjtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHZhciBtYXAgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwID0ge307XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGlkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGtleSA9IGlkc1tpXTtcblx0ICAgICAgaWYgKGNvbW1vblRhZ1JFLnRlc3Qoa2V5KSB8fCByZXNlcnZlZFRhZ1JFLnRlc3Qoa2V5KSkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsga2V5KTtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHQgICAgICAvLyByZWNvcmQgYSBhbGwgbG93ZXJjYXNlIDwtPiBrZWJhYi1jYXNlIG1hcHBpbmcgZm9yXG5cdCAgICAgIC8vIHBvc3NpYmxlIGN1c3RvbSBlbGVtZW50IGNhc2UgZXJyb3Igd2FybmluZ1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIG1hcFtrZXkucmVwbGFjZSgvLS9nLCAnJykudG9Mb3dlckNhc2UoKV0gPSBoeXBoZW5hdGUoa2V5KTtcblx0ICAgICAgfVxuXHQgICAgICBkZWYgPSBjb21wb25lbnRzW2tleV07XG5cdCAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRlZikpIHtcblx0ICAgICAgICBjb21wb25lbnRzW2tleV0gPSBWdWUuZXh0ZW5kKGRlZik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFbnN1cmUgYWxsIHByb3BzIG9wdGlvbiBzeW50YXggYXJlIG5vcm1hbGl6ZWQgaW50byB0aGVcblx0ICogT2JqZWN0LWJhc2VkIGZvcm1hdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBndWFyZFByb3BzKG9wdGlvbnMpIHtcblx0ICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuXHQgIHZhciBpLCB2YWw7XG5cdCAgaWYgKGlzQXJyYXkocHJvcHMpKSB7XG5cdCAgICBvcHRpb25zLnByb3BzID0ge307XG5cdCAgICBpID0gcHJvcHMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YWwgPSBwcm9wc1tpXTtcblx0ICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWxdID0gbnVsbDtcblx0ICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSkge1xuXHQgICAgICAgIG9wdGlvbnMucHJvcHNbdmFsLm5hbWVdID0gdmFsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHByb3BzKSkge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhbCA9IHByb3BzW2tleXNbaV1dO1xuXHQgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHByb3BzW2tleXNbaV1dID0geyB0eXBlOiB2YWwgfTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEd1YXJkIGFuIEFycmF5LWZvcm1hdCBhc3NldHMgb3B0aW9uIGFuZCBjb252ZXJ0ZWQgaXRcblx0ICogaW50byB0aGUga2V5LXZhbHVlIE9iamVjdCBmb3JtYXQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBhc3NldHNcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGd1YXJkQXJyYXlBc3NldHMoYXNzZXRzKSB7XG5cdCAgaWYgKGlzQXJyYXkoYXNzZXRzKSkge1xuXHQgICAgdmFyIHJlcyA9IHt9O1xuXHQgICAgdmFyIGkgPSBhc3NldHMubGVuZ3RoO1xuXHQgICAgdmFyIGFzc2V0O1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBhc3NldCA9IGFzc2V0c1tpXTtcblx0ICAgICAgdmFyIGlkID0gdHlwZW9mIGFzc2V0ID09PSAnZnVuY3Rpb24nID8gYXNzZXQub3B0aW9ucyAmJiBhc3NldC5vcHRpb25zLm5hbWUgfHwgYXNzZXQuaWQgOiBhc3NldC5uYW1lIHx8IGFzc2V0LmlkO1xuXHQgICAgICBpZiAoIWlkKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBcnJheS1zeW50YXggYXNzZXRzIG11c3QgcHJvdmlkZSBhIFwibmFtZVwiIG9yIFwiaWRcIiBmaWVsZC4nKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXNbaWRdID0gYXNzZXQ7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiByZXM7XG5cdCAgfVxuXHQgIHJldHVybiBhc3NldHM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNZXJnZSB0d28gb3B0aW9uIG9iamVjdHMgaW50byBhIG5ldyBvbmUuXG5cdCAqIENvcmUgdXRpbGl0eSB1c2VkIGluIGJvdGggaW5zdGFudGlhdGlvbiBhbmQgaW5oZXJpdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwYXJlbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IGNoaWxkXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dIC0gaWYgdm0gaXMgcHJlc2VudCwgaW5kaWNhdGVzIHRoaXMgaXNcblx0ICogICAgICAgICAgICAgICAgICAgICBhbiBpbnN0YW50aWF0aW9uIG1lcmdlLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkLCB2bSkge1xuXHQgIGd1YXJkQ29tcG9uZW50cyhjaGlsZCk7XG5cdCAgZ3VhcmRQcm9wcyhjaGlsZCk7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGlmIChjaGlsZC5wcm9wc0RhdGEgJiYgIXZtKSB7XG5cdCAgICAgIHdhcm4oJ3Byb3BzRGF0YSBjYW4gb25seSBiZSB1c2VkIGFzIGFuIGluc3RhbnRpYXRpb24gb3B0aW9uLicpO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgb3B0aW9ucyA9IHt9O1xuXHQgIHZhciBrZXk7XG5cdCAgaWYgKGNoaWxkWydleHRlbmRzJ10pIHtcblx0ICAgIHBhcmVudCA9IHR5cGVvZiBjaGlsZFsnZXh0ZW5kcyddID09PSAnZnVuY3Rpb24nID8gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXS5vcHRpb25zLCB2bSkgOiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLCB2bSk7XG5cdCAgfVxuXHQgIGlmIChjaGlsZC5taXhpbnMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgbWl4aW4gPSBjaGlsZC5taXhpbnNbaV07XG5cdCAgICAgIHZhciBtaXhpbk9wdGlvbnMgPSBtaXhpbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBWdWUgPyBtaXhpbi5vcHRpb25zIDogbWl4aW47XG5cdCAgICAgIHBhcmVudCA9IG1lcmdlT3B0aW9ucyhwYXJlbnQsIG1peGluT3B0aW9ucywgdm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IgKGtleSBpbiBwYXJlbnQpIHtcblx0ICAgIG1lcmdlRmllbGQoa2V5KTtcblx0ICB9XG5cdCAgZm9yIChrZXkgaW4gY2hpbGQpIHtcblx0ICAgIGlmICghaGFzT3duKHBhcmVudCwga2V5KSkge1xuXHQgICAgICBtZXJnZUZpZWxkKGtleSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZ1bmN0aW9uIG1lcmdlRmllbGQoa2V5KSB7XG5cdCAgICB2YXIgc3RyYXQgPSBzdHJhdHNba2V5XSB8fCBkZWZhdWx0U3RyYXQ7XG5cdCAgICBvcHRpb25zW2tleV0gPSBzdHJhdChwYXJlbnRba2V5XSwgY2hpbGRba2V5XSwgdm0sIGtleSk7XG5cdCAgfVxuXHQgIHJldHVybiBvcHRpb25zO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVzb2x2ZSBhbiBhc3NldC5cblx0ICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJlY2F1c2UgY2hpbGQgaW5zdGFuY2VzIG5lZWQgYWNjZXNzXG5cdCAqIHRvIGFzc2V0cyBkZWZpbmVkIGluIGl0cyBhbmNlc3RvciBjaGFpbi5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gd2Fybk1pc3Npbmdcblx0ICogQHJldHVybiB7T2JqZWN0fEZ1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVBc3NldChvcHRpb25zLCB0eXBlLCBpZCwgd2Fybk1pc3NpbmcpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXTtcblx0ICB2YXIgY2FtZWxpemVkSWQ7XG5cdCAgdmFyIHJlcyA9IGFzc2V0c1tpZF0gfHxcblx0ICAvLyBjYW1lbENhc2UgSURcblx0ICBhc3NldHNbY2FtZWxpemVkSWQgPSBjYW1lbGl6ZShpZCldIHx8XG5cdCAgLy8gUGFzY2FsIENhc2UgSURcblx0ICBhc3NldHNbY2FtZWxpemVkSWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbGl6ZWRJZC5zbGljZSgxKV07XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xuXHQgICAgd2FybignRmFpbGVkIHRvIHJlc29sdmUgJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJzogJyArIGlkLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0dmFyIHVpZCQxID0gMDtcblx0XG5cdC8qKlxuXHQgKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGVcblx0ICogZGlyZWN0aXZlcyBzdWJzY3JpYmluZyB0byBpdC5cblx0ICpcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBEZXAoKSB7XG5cdCAgdGhpcy5pZCA9IHVpZCQxKys7XG5cdCAgdGhpcy5zdWJzID0gW107XG5cdH1cblx0XG5cdC8vIHRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC5cblx0Ly8gdGhpcyBpcyBnbG9iYWxseSB1bmlxdWUgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvbmx5IG9uZVxuXHQvLyB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZCBhdCBhbnkgdGltZS5cblx0RGVwLnRhcmdldCA9IG51bGw7XG5cdFxuXHQvKipcblx0ICogQWRkIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLmFkZFN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcblx0ICB0aGlzLnN1YnMucHVzaChzdWIpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5yZW1vdmVTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG5cdCAgdGhpcy5zdWJzLiRyZW1vdmUoc3ViKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBZGQgc2VsZiBhcyBhIGRlcGVuZGVuY3kgdG8gdGhlIHRhcmdldCB3YXRjaGVyLlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuXHQgIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE5vdGlmeSBhbGwgc3Vic2NyaWJlcnMgb2YgYSBuZXcgdmFsdWUuXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gc3RhYmxpemUgdGhlIHN1YnNjcmliZXIgbGlzdCBmaXJzdFxuXHQgIHZhciBzdWJzID0gdG9BcnJheSh0aGlzLnN1YnMpO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gc3Vicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHN1YnNbaV0udXBkYXRlKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5cdHZhciBhcnJheU1ldGhvZHMgPSBPYmplY3QuY3JlYXRlKGFycmF5UHJvdG8pXG5cdFxuXHQvKipcblx0ICogSW50ZXJjZXB0IG11dGF0aW5nIG1ldGhvZHMgYW5kIGVtaXQgZXZlbnRzXG5cdCAqL1xuXHRcblx0O1sncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAndW5zaGlmdCcsICdzcGxpY2UnLCAnc29ydCcsICdyZXZlcnNlJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG5cdCAgLy8gY2FjaGUgb3JpZ2luYWwgbWV0aG9kXG5cdCAgdmFyIG9yaWdpbmFsID0gYXJyYXlQcm90b1ttZXRob2RdO1xuXHQgIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvcigpIHtcblx0ICAgIC8vIGF2b2lkIGxlYWtpbmcgYXJndW1lbnRzOlxuXHQgICAgLy8gaHR0cDovL2pzcGVyZi5jb20vY2xvc3VyZS13aXRoLWFyZ3VtZW50c1xuXHQgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICB9XG5cdCAgICB2YXIgcmVzdWx0ID0gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICB2YXIgb2IgPSB0aGlzLl9fb2JfXztcblx0ICAgIHZhciBpbnNlcnRlZDtcblx0ICAgIHN3aXRjaCAobWV0aG9kKSB7XG5cdCAgICAgIGNhc2UgJ3B1c2gnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncztcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAndW5zaGlmdCc6XG5cdCAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdzcGxpY2UnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgIH1cblx0ICAgIGlmIChpbnNlcnRlZCkgb2Iub2JzZXJ2ZUFycmF5KGluc2VydGVkKTtcblx0ICAgIC8vIG5vdGlmeSBjaGFuZ2Vcblx0ICAgIG9iLmRlcC5ub3RpZnkoKTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfSk7XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFN3YXAgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4IHdpdGggYSBuZXcgdmFsdWVcblx0ICogYW5kIGVtaXRzIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKiBAcmV0dXJuIHsqfSAtIHJlcGxhY2VkIGVsZW1lbnRcblx0ICovXG5cdFxuXHRkZWYoYXJyYXlQcm90bywgJyRzZXQnLCBmdW5jdGlvbiAkc2V0KGluZGV4LCB2YWwpIHtcblx0ICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGgpIHtcblx0ICAgIHRoaXMubGVuZ3RoID0gTnVtYmVyKGluZGV4KSArIDE7XG5cdCAgfVxuXHQgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSwgdmFsKVswXTtcblx0fSk7XG5cdFxuXHQvKipcblx0ICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIHJlbW92ZSB0aGUgZWxlbWVudCBhdCBnaXZlbiBpbmRleCBvciB0YXJnZXQgZWxlbWVudCByZWZlcmVuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gaXRlbVxuXHQgKi9cblx0XG5cdGRlZihhcnJheVByb3RvLCAnJHJlbW92ZScsIGZ1bmN0aW9uICRyZW1vdmUoaXRlbSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghdGhpcy5sZW5ndGgpIHJldHVybjtcblx0ICB2YXIgaW5kZXggPSBpbmRleE9mKHRoaXMsIGl0ZW0pO1xuXHQgIGlmIChpbmRleCA+IC0xKSB7XG5cdCAgICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgYXJyYXlLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXJyYXlNZXRob2RzKTtcblx0XG5cdC8qKlxuXHQgKiBCeSBkZWZhdWx0LCB3aGVuIGEgcmVhY3RpdmUgcHJvcGVydHkgaXMgc2V0LCB0aGUgbmV3IHZhbHVlIGlzXG5cdCAqIGFsc28gY29udmVydGVkIHRvIGJlY29tZSByZWFjdGl2ZS4gSG93ZXZlciBpbiBjZXJ0YWluIGNhc2VzLCBlLmcuXG5cdCAqIHYtZm9yIHNjb3BlIGFsaWFzIGFuZCBwcm9wcywgd2UgZG9uJ3Qgd2FudCB0byBmb3JjZSBjb252ZXJzaW9uXG5cdCAqIGJlY2F1c2UgdGhlIHZhbHVlIG1heSBiZSBhIG5lc3RlZCB2YWx1ZSB1bmRlciBhIGZyb3plbiBkYXRhIHN0cnVjdHVyZS5cblx0ICpcblx0ICogU28gd2hlbmV2ZXIgd2Ugd2FudCB0byBzZXQgYSByZWFjdGl2ZSBwcm9wZXJ0eSB3aXRob3V0IGZvcmNpbmdcblx0ICogY29udmVyc2lvbiBvbiB0aGUgbmV3IHZhbHVlLCB3ZSB3cmFwIHRoYXQgY2FsbCBpbnNpZGUgdGhpcyBmdW5jdGlvbi5cblx0ICovXG5cdFxuXHR2YXIgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cdFxuXHRmdW5jdGlvbiB3aXRob3V0Q29udmVyc2lvbihmbikge1xuXHQgIHNob3VsZENvbnZlcnQgPSBmYWxzZTtcblx0ICBmbigpO1xuXHQgIHNob3VsZENvbnZlcnQgPSB0cnVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuXHQgKiBvYmplY3QuIE9uY2UgYXR0YWNoZWQsIHRoZSBvYnNlcnZlciBjb252ZXJ0cyB0YXJnZXRcblx0ICogb2JqZWN0J3MgcHJvcGVydHkga2V5cyBpbnRvIGdldHRlci9zZXR0ZXJzIHRoYXRcblx0ICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoZXMgdXBkYXRlcy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheXxPYmplY3R9IHZhbHVlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIE9ic2VydmVyKHZhbHVlKSB7XG5cdCAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgIHRoaXMuZGVwID0gbmV3IERlcCgpO1xuXHQgIGRlZih2YWx1ZSwgJ19fb2JfXycsIHRoaXMpO1xuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgdmFyIGF1Z21lbnQgPSBoYXNQcm90byA/IHByb3RvQXVnbWVudCA6IGNvcHlBdWdtZW50O1xuXHQgICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuXHQgICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLndhbGsodmFsdWUpO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gSW5zdGFuY2UgbWV0aG9kc1xuXHRcblx0LyoqXG5cdCAqIFdhbGsgdGhyb3VnaCBlYWNoIHByb3BlcnR5IGFuZCBjb252ZXJ0IHRoZW0gaW50b1xuXHQgKiBnZXR0ZXIvc2V0dGVycy4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdoZW5cblx0ICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUud2FsayA9IGZ1bmN0aW9uIChvYmopIHtcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdGhpcy5jb252ZXJ0KGtleXNbaV0sIG9ialtrZXlzW2ldXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBpdGVtc1xuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiAoaXRlbXMpIHtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgb2JzZXJ2ZShpdGVtc1tpXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSBwcm9wZXJ0eSBpbnRvIGdldHRlci9zZXR0ZXIgc28gd2UgY2FuIGVtaXRcblx0ICogdGhlIGV2ZW50cyB3aGVuIHRoZSBwcm9wZXJ0eSBpcyBhY2Nlc3NlZC9jaGFuZ2VkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcblx0ICBkZWZpbmVSZWFjdGl2ZSh0aGlzLnZhbHVlLCBrZXksIHZhbCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWRkIGFuIG93bmVyIHZtLCBzbyB0aGF0IHdoZW4gJHNldC8kZGVsZXRlIG11dGF0aW9uc1xuXHQgKiBoYXBwZW4gd2UgY2FuIG5vdGlmeSBvd25lciB2bXMgdG8gcHJveHkgdGhlIGtleXMgYW5kXG5cdCAqIGRpZ2VzdCB0aGUgd2F0Y2hlcnMuIFRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0XG5cdCAqIGlzIG9ic2VydmVkIGFzIGFuIGluc3RhbmNlJ3Mgcm9vdCAkZGF0YS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLmFkZFZtID0gZnVuY3Rpb24gKHZtKSB7XG5cdCAgKHRoaXMudm1zIHx8ICh0aGlzLnZtcyA9IFtdKSkucHVzaCh2bSk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGFuIG93bmVyIHZtLiBUaGlzIGlzIGNhbGxlZCB3aGVuIHRoZSBvYmplY3QgaXNcblx0ICogc3dhcHBlZCBvdXQgYXMgYW4gaW5zdGFuY2UncyAkZGF0YSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5yZW1vdmVWbSA9IGZ1bmN0aW9uICh2bSkge1xuXHQgIHRoaXMudm1zLiRyZW1vdmUodm0pO1xuXHR9O1xuXHRcblx0Ly8gaGVscGVyc1xuXHRcblx0LyoqXG5cdCAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBpbnRlcmNlcHRpbmdcblx0ICogdGhlIHByb3RvdHlwZSBjaGFpbiB1c2luZyBfX3Byb3RvX19cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuXHQgKiBAcGFyYW0ge09iamVjdH0gc3JjXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvdG9BdWdtZW50KHRhcmdldCwgc3JjKSB7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblx0ICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xuXHQgIC8qIGVzbGludC1lbmFibGUgbm8tcHJvdG8gKi9cblx0fVxuXHRcblx0LyoqXG5cdCAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZ1xuXHQgKiBoaWRkZW4gcHJvcGVydGllcy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvdG9cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb3B5QXVnbWVudCh0YXJnZXQsIHNyYywga2V5cykge1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXHQgICAgZGVmKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQXR0ZW1wdCB0byBjcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UgZm9yIGEgdmFsdWUsXG5cdCAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG5cdCAqIG9yIHRoZSBleGlzdGluZyBvYnNlcnZlciBpZiB0aGUgdmFsdWUgYWxyZWFkeSBoYXMgb25lLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqIEByZXR1cm4ge09ic2VydmVyfHVuZGVmaW5lZH1cblx0ICogQHN0YXRpY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9ic2VydmUodmFsdWUsIHZtKSB7XG5cdCAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBvYjtcblx0ICBpZiAoaGFzT3duKHZhbHVlLCAnX19vYl9fJykgJiYgdmFsdWUuX19vYl9fIGluc3RhbmNlb2YgT2JzZXJ2ZXIpIHtcblx0ICAgIG9iID0gdmFsdWUuX19vYl9fO1xuXHQgIH0gZWxzZSBpZiAoc2hvdWxkQ29udmVydCAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNQbGFpbk9iamVjdCh2YWx1ZSkpICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpICYmICF2YWx1ZS5faXNWdWUpIHtcblx0ICAgIG9iID0gbmV3IE9ic2VydmVyKHZhbHVlKTtcblx0ICB9XG5cdCAgaWYgKG9iICYmIHZtKSB7XG5cdCAgICBvYi5hZGRWbSh2bSk7XG5cdCAgfVxuXHQgIHJldHVybiBvYjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlZmluZSBhIHJlYWN0aXZlIHByb3BlcnR5IG9uIGFuIE9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVmaW5lUmVhY3RpdmUob2JqLCBrZXksIHZhbCkge1xuXHQgIHZhciBkZXAgPSBuZXcgRGVwKCk7XG5cdFxuXHQgIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuXHQgIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnNcblx0ICB2YXIgZ2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuZ2V0O1xuXHQgIHZhciBzZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5zZXQ7XG5cdFxuXHQgIHZhciBjaGlsZE9iID0gb2JzZXJ2ZSh2YWwpO1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuXHQgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIoKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG5cdCAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG5cdCAgICAgICAgZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgIGlmIChjaGlsZE9iKSB7XG5cdCAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBlLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgICAgICBlID0gdmFsdWVbaV07XG5cdCAgICAgICAgICAgIGUgJiYgZS5fX29iX18gJiYgZS5fX29iX18uZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiByZWFjdGl2ZVNldHRlcihuZXdWYWwpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcblx0ICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHNldHRlcikge1xuXHQgICAgICAgIHNldHRlci5jYWxsKG9iaiwgbmV3VmFsKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YWwgPSBuZXdWYWw7XG5cdCAgICAgIH1cblx0ICAgICAgY2hpbGRPYiA9IG9ic2VydmUobmV3VmFsKTtcblx0ICAgICAgZGVwLm5vdGlmeSgpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9XG5cdFxuXHRcblx0XG5cdHZhciB1dGlsID0gT2JqZWN0LmZyZWV6ZSh7XG5cdFx0ZGVmaW5lUmVhY3RpdmU6IGRlZmluZVJlYWN0aXZlLFxuXHRcdHNldDogc2V0LFxuXHRcdGRlbDogZGVsLFxuXHRcdGhhc093bjogaGFzT3duLFxuXHRcdGlzTGl0ZXJhbDogaXNMaXRlcmFsLFxuXHRcdGlzUmVzZXJ2ZWQ6IGlzUmVzZXJ2ZWQsXG5cdFx0X3RvU3RyaW5nOiBfdG9TdHJpbmcsXG5cdFx0dG9OdW1iZXI6IHRvTnVtYmVyLFxuXHRcdHRvQm9vbGVhbjogdG9Cb29sZWFuLFxuXHRcdHN0cmlwUXVvdGVzOiBzdHJpcFF1b3Rlcyxcblx0XHRjYW1lbGl6ZTogY2FtZWxpemUsXG5cdFx0aHlwaGVuYXRlOiBoeXBoZW5hdGUsXG5cdFx0Y2xhc3NpZnk6IGNsYXNzaWZ5LFxuXHRcdGJpbmQ6IGJpbmQsXG5cdFx0dG9BcnJheTogdG9BcnJheSxcblx0XHRleHRlbmQ6IGV4dGVuZCxcblx0XHRpc09iamVjdDogaXNPYmplY3QsXG5cdFx0aXNQbGFpbk9iamVjdDogaXNQbGFpbk9iamVjdCxcblx0XHRkZWY6IGRlZixcblx0XHRkZWJvdW5jZTogX2RlYm91bmNlLFxuXHRcdGluZGV4T2Y6IGluZGV4T2YsXG5cdFx0Y2FuY2VsbGFibGU6IGNhbmNlbGxhYmxlLFxuXHRcdGxvb3NlRXF1YWw6IGxvb3NlRXF1YWwsXG5cdFx0aXNBcnJheTogaXNBcnJheSxcblx0XHRoYXNQcm90bzogaGFzUHJvdG8sXG5cdFx0aW5Ccm93c2VyOiBpbkJyb3dzZXIsXG5cdFx0ZGV2dG9vbHM6IGRldnRvb2xzLFxuXHRcdGlzSUU6IGlzSUUsXG5cdFx0aXNJRTk6IGlzSUU5LFxuXHRcdGlzQW5kcm9pZDogaXNBbmRyb2lkLFxuXHRcdGlzSW9zOiBpc0lvcyxcblx0XHRpb3NWZXJzaW9uTWF0Y2g6IGlvc1ZlcnNpb25NYXRjaCxcblx0XHRpb3NWZXJzaW9uOiBpb3NWZXJzaW9uLFxuXHRcdGhhc011dGF0aW9uT2JzZXJ2ZXJCdWc6IGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcsXG5cdFx0Z2V0IHRyYW5zaXRpb25Qcm9wICgpIHsgcmV0dXJuIHRyYW5zaXRpb25Qcm9wOyB9LFxuXHRcdGdldCB0cmFuc2l0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gdHJhbnNpdGlvbkVuZEV2ZW50OyB9LFxuXHRcdGdldCBhbmltYXRpb25Qcm9wICgpIHsgcmV0dXJuIGFuaW1hdGlvblByb3A7IH0sXG5cdFx0Z2V0IGFuaW1hdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIGFuaW1hdGlvbkVuZEV2ZW50OyB9LFxuXHRcdG5leHRUaWNrOiBuZXh0VGljayxcblx0XHRnZXQgX1NldCAoKSB7IHJldHVybiBfU2V0OyB9LFxuXHRcdHF1ZXJ5OiBxdWVyeSxcblx0XHRpbkRvYzogaW5Eb2MsXG5cdFx0Z2V0QXR0cjogZ2V0QXR0cixcblx0XHRnZXRCaW5kQXR0cjogZ2V0QmluZEF0dHIsXG5cdFx0aGFzQmluZEF0dHI6IGhhc0JpbmRBdHRyLFxuXHRcdGJlZm9yZTogYmVmb3JlLFxuXHRcdGFmdGVyOiBhZnRlcixcblx0XHRyZW1vdmU6IHJlbW92ZSxcblx0XHRwcmVwZW5kOiBwcmVwZW5kLFxuXHRcdHJlcGxhY2U6IHJlcGxhY2UsXG5cdFx0b246IG9uLFxuXHRcdG9mZjogb2ZmLFxuXHRcdHNldENsYXNzOiBzZXRDbGFzcyxcblx0XHRhZGRDbGFzczogYWRkQ2xhc3MsXG5cdFx0cmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuXHRcdGV4dHJhY3RDb250ZW50OiBleHRyYWN0Q29udGVudCxcblx0XHR0cmltTm9kZTogdHJpbU5vZGUsXG5cdFx0aXNUZW1wbGF0ZTogaXNUZW1wbGF0ZSxcblx0XHRjcmVhdGVBbmNob3I6IGNyZWF0ZUFuY2hvcixcblx0XHRmaW5kUmVmOiBmaW5kUmVmLFxuXHRcdG1hcE5vZGVSYW5nZTogbWFwTm9kZVJhbmdlLFxuXHRcdHJlbW92ZU5vZGVSYW5nZTogcmVtb3ZlTm9kZVJhbmdlLFxuXHRcdGlzRnJhZ21lbnQ6IGlzRnJhZ21lbnQsXG5cdFx0Z2V0T3V0ZXJIVE1MOiBnZXRPdXRlckhUTUwsXG5cdFx0bWVyZ2VPcHRpb25zOiBtZXJnZU9wdGlvbnMsXG5cdFx0cmVzb2x2ZUFzc2V0OiByZXNvbHZlQXNzZXQsXG5cdFx0Y2hlY2tDb21wb25lbnRBdHRyOiBjaGVja0NvbXBvbmVudEF0dHIsXG5cdFx0Y29tbW9uVGFnUkU6IGNvbW1vblRhZ1JFLFxuXHRcdHJlc2VydmVkVGFnUkU6IHJlc2VydmVkVGFnUkUsXG5cdFx0Z2V0IHdhcm4gKCkgeyByZXR1cm4gd2FybjsgfVxuXHR9KTtcblx0XG5cdHZhciB1aWQgPSAwO1xuXHRcblx0ZnVuY3Rpb24gaW5pdE1peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBUaGUgbWFpbiBpbml0IHNlcXVlbmNlLiBUaGlzIGlzIGNhbGxlZCBmb3IgZXZlcnlcblx0ICAgKiBpbnN0YW5jZSwgaW5jbHVkaW5nIG9uZXMgdGhhdCBhcmUgY3JlYXRlZCBmcm9tIGV4dGVuZGVkXG5cdCAgICogY29uc3RydWN0b3JzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSB0aGlzIG9wdGlvbnMgb2JqZWN0IHNob3VsZCBiZVxuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHJlc3VsdCBvZiBtZXJnaW5nIGNsYXNzXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zIGFuZCB0aGUgb3B0aW9ucyBwYXNzZWRcblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRvIHRoZSBjb25zdHJ1Y3Rvci5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XG5cdCAgICB0aGlzLiRlbCA9IG51bGw7XG5cdCAgICB0aGlzLiRwYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcblx0ICAgIHRoaXMuJHJvb3QgPSB0aGlzLiRwYXJlbnQgPyB0aGlzLiRwYXJlbnQuJHJvb3QgOiB0aGlzO1xuXHQgICAgdGhpcy4kY2hpbGRyZW4gPSBbXTtcblx0ICAgIHRoaXMuJHJlZnMgPSB7fTsgLy8gY2hpbGQgdm0gcmVmZXJlbmNlc1xuXHQgICAgdGhpcy4kZWxzID0ge307IC8vIGVsZW1lbnQgcmVmZXJlbmNlc1xuXHQgICAgdGhpcy5fd2F0Y2hlcnMgPSBbXTsgLy8gYWxsIHdhdGNoZXJzIGFzIGFuIGFycmF5XG5cdCAgICB0aGlzLl9kaXJlY3RpdmVzID0gW107IC8vIGFsbCBkaXJlY3RpdmVzXG5cdFxuXHQgICAgLy8gYSB1aWRcblx0ICAgIHRoaXMuX3VpZCA9IHVpZCsrO1xuXHRcblx0ICAgIC8vIGEgZmxhZyB0byBhdm9pZCB0aGlzIGJlaW5nIG9ic2VydmVkXG5cdCAgICB0aGlzLl9pc1Z1ZSA9IHRydWU7XG5cdFxuXHQgICAgLy8gZXZlbnRzIGJvb2trZWVwaW5nXG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTsgLy8gcmVnaXN0ZXJlZCBjYWxsYmFja3Ncblx0ICAgIHRoaXMuX2V2ZW50c0NvdW50ID0ge307IC8vIGZvciAkYnJvYWRjYXN0IG9wdGltaXphdGlvblxuXHRcblx0ICAgIC8vIGZyYWdtZW50IGluc3RhbmNlIHByb3BlcnRpZXNcblx0ICAgIHRoaXMuX2lzRnJhZ21lbnQgPSBmYWxzZTtcblx0ICAgIHRoaXMuX2ZyYWdtZW50ID0gLy8gQHR5cGUge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAgICB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gLy8gQHR5cGUge1RleHR8Q29tbWVudH1cblx0ICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gbnVsbDsgLy8gQHR5cGUge1RleHR8Q29tbWVudH1cblx0XG5cdCAgICAvLyBsaWZlY3ljbGUgc3RhdGVcblx0ICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRoaXMuX2lzUmVhZHkgPSB0aGlzLl9pc0F0dGFjaGVkID0gdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRoaXMuX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuXHQgICAgdGhpcy5fdW5saW5rRm4gPSBudWxsO1xuXHRcblx0ICAgIC8vIGNvbnRleHQ6XG5cdCAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG5cdCAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2Vcblx0ICAgIC8vIGFuZCBpdHMgaG9zdC5cblx0ICAgIHRoaXMuX2NvbnRleHQgPSBvcHRpb25zLl9jb250ZXh0IHx8IHRoaXMuJHBhcmVudDtcblx0XG5cdCAgICAvLyBzY29wZTpcblx0ICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG5cdCAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuXHQgICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcblx0ICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cblx0ICAgIHRoaXMuX3Njb3BlID0gb3B0aW9ucy5fc2NvcGU7XG5cdFxuXHQgICAgLy8gZnJhZ21lbnQ6XG5cdCAgICAvLyBpZiB0aGlzIGluc3RhbmNlIGlzIGNvbXBpbGVkIGluc2lkZSBhIEZyYWdtZW50LCBpdFxuXHQgICAgLy8gbmVlZHMgdG8gcmVpZ3N0ZXIgaXRzZWxmIGFzIGEgY2hpbGQgb2YgdGhhdCBmcmFnbWVudFxuXHQgICAgLy8gZm9yIGF0dGFjaC9kZXRhY2ggdG8gd29yayBwcm9wZXJseS5cblx0ICAgIHRoaXMuX2ZyYWcgPSBvcHRpb25zLl9mcmFnO1xuXHQgICAgaWYgKHRoaXMuX2ZyYWcpIHtcblx0ICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi5wdXNoKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHB1c2ggc2VsZiBpbnRvIHBhcmVudCAvIHRyYW5zY2x1c2lvbiBob3N0XG5cdCAgICBpZiAodGhpcy4kcGFyZW50KSB7XG5cdCAgICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4ucHVzaCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBtZXJnZSBvcHRpb25zLlxuXHQgICAgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zLCBvcHRpb25zLCB0aGlzKTtcblx0XG5cdCAgICAvLyBzZXQgcmVmXG5cdCAgICB0aGlzLl91cGRhdGVSZWYoKTtcblx0XG5cdCAgICAvLyBpbml0aWFsaXplIGRhdGEgYXMgZW1wdHkgb2JqZWN0LlxuXHQgICAgLy8gaXQgd2lsbCBiZSBmaWxsZWQgdXAgaW4gX2luaXREYXRhKCkuXG5cdCAgICB0aGlzLl9kYXRhID0ge307XG5cdFxuXHQgICAgLy8gY2FsbCBpbml0IGhvb2tcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdpbml0Jyk7XG5cdFxuXHQgICAgLy8gaW5pdGlhbGl6ZSBkYXRhIG9ic2VydmF0aW9uIGFuZCBzY29wZSBpbmhlcml0YW5jZS5cblx0ICAgIHRoaXMuX2luaXRTdGF0ZSgpO1xuXHRcblx0ICAgIC8vIHNldHVwIGV2ZW50IHN5c3RlbSBhbmQgb3B0aW9uIGV2ZW50cy5cblx0ICAgIHRoaXMuX2luaXRFdmVudHMoKTtcblx0XG5cdCAgICAvLyBjYWxsIGNyZWF0ZWQgaG9va1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2NyZWF0ZWQnKTtcblx0XG5cdCAgICAvLyBpZiBgZWxgIG9wdGlvbiBpcyBwYXNzZWQsIHN0YXJ0IGNvbXBpbGF0aW9uLlxuXHQgICAgaWYgKG9wdGlvbnMuZWwpIHtcblx0ICAgICAgdGhpcy4kbW91bnQob3B0aW9ucy5lbCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIHBhdGhDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0XG5cdC8vIGFjdGlvbnNcblx0dmFyIEFQUEVORCA9IDA7XG5cdHZhciBQVVNIID0gMTtcblx0dmFyIElOQ19TVUJfUEFUSF9ERVBUSCA9IDI7XG5cdHZhciBQVVNIX1NVQl9QQVRIID0gMztcblx0XG5cdC8vIHN0YXRlc1xuXHR2YXIgQkVGT1JFX1BBVEggPSAwO1xuXHR2YXIgSU5fUEFUSCA9IDE7XG5cdHZhciBCRUZPUkVfSURFTlQgPSAyO1xuXHR2YXIgSU5fSURFTlQgPSAzO1xuXHR2YXIgSU5fU1VCX1BBVEggPSA0O1xuXHR2YXIgSU5fU0lOR0xFX1FVT1RFID0gNTtcblx0dmFyIElOX0RPVUJMRV9RVU9URSA9IDY7XG5cdHZhciBBRlRFUl9QQVRIID0gNztcblx0dmFyIEVSUk9SID0gODtcblx0XG5cdHZhciBwYXRoU3RhdGVNYWNoaW5lID0gW107XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9QQVRIXSA9IHtcblx0ICAnd3MnOiBbQkVGT1JFX1BBVEhdLFxuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9QQVRIXSA9IHtcblx0ICAnd3MnOiBbSU5fUEFUSF0sXG5cdCAgJy4nOiBbQkVGT1JFX0lERU5UXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfSURFTlRdID0ge1xuXHQgICd3cyc6IFtCRUZPUkVfSURFTlRdLFxuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9JREVOVF0gPSB7XG5cdCAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICdudW1iZXInOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJ3dzJzogW0lOX1BBVEgsIFBVU0hdLFxuXHQgICcuJzogW0JFRk9SRV9JREVOVCwgUFVTSF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEgsIFBVU0hdLFxuXHQgICdlb2YnOiBbQUZURVJfUEFUSCwgUFVTSF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fU1VCX1BBVEhdID0ge1xuXHQgIFwiJ1wiOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdLFxuXHQgICdcIic6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEgsIElOQ19TVUJfUEFUSF9ERVBUSF0sXG5cdCAgJ10nOiBbSU5fUEFUSCwgUFVTSF9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IEVSUk9SLFxuXHQgICdlbHNlJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX1NJTkdMRV9RVU9URV0gPSB7XG5cdCAgXCInXCI6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcblx0ICAnZW9mJzogRVJST1IsXG5cdCAgJ2Vsc2UnOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX0RPVUJMRV9RVU9URV0gPSB7XG5cdCAgJ1wiJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuXHQgICdlb2YnOiBFUlJPUixcblx0ICAnZWxzZSc6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSBjaGFyYWN0ZXIgaW4gYSBrZXlwYXRoLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0NoYXJ9IGNoXG5cdCAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFBhdGhDaGFyVHlwZShjaCkge1xuXHQgIGlmIChjaCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ2VvZic7XG5cdCAgfVxuXHRcblx0ICB2YXIgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG5cdFxuXHQgIHN3aXRjaCAoY29kZSkge1xuXHQgICAgY2FzZSAweDVCOiAvLyBbXG5cdCAgICBjYXNlIDB4NUQ6IC8vIF1cblx0ICAgIGNhc2UgMHgyRTogLy8gLlxuXHQgICAgY2FzZSAweDIyOiAvLyBcIlxuXHQgICAgY2FzZSAweDI3OiAvLyAnXG5cdCAgICBjYXNlIDB4MzA6XG5cdCAgICAgIC8vIDBcblx0ICAgICAgcmV0dXJuIGNoO1xuXHRcblx0ICAgIGNhc2UgMHg1RjogLy8gX1xuXHQgICAgY2FzZSAweDI0OlxuXHQgICAgICAvLyAkXG5cdCAgICAgIHJldHVybiAnaWRlbnQnO1xuXHRcblx0ICAgIGNhc2UgMHgyMDogLy8gU3BhY2Vcblx0ICAgIGNhc2UgMHgwOTogLy8gVGFiXG5cdCAgICBjYXNlIDB4MEE6IC8vIE5ld2xpbmVcblx0ICAgIGNhc2UgMHgwRDogLy8gUmV0dXJuXG5cdCAgICBjYXNlIDB4QTA6IC8vIE5vLWJyZWFrIHNwYWNlXG5cdCAgICBjYXNlIDB4RkVGRjogLy8gQnl0ZSBPcmRlciBNYXJrXG5cdCAgICBjYXNlIDB4MjAyODogLy8gTGluZSBTZXBhcmF0b3Jcblx0ICAgIGNhc2UgMHgyMDI5OlxuXHQgICAgICAvLyBQYXJhZ3JhcGggU2VwYXJhdG9yXG5cdCAgICAgIHJldHVybiAnd3MnO1xuXHQgIH1cblx0XG5cdCAgLy8gYS16LCBBLVpcblx0ICBpZiAoY29kZSA+PSAweDYxICYmIGNvZGUgPD0gMHg3QSB8fCBjb2RlID49IDB4NDEgJiYgY29kZSA8PSAweDVBKSB7XG5cdCAgICByZXR1cm4gJ2lkZW50Jztcblx0ICB9XG5cdFxuXHQgIC8vIDEtOVxuXHQgIGlmIChjb2RlID49IDB4MzEgJiYgY29kZSA8PSAweDM5KSB7XG5cdCAgICByZXR1cm4gJ251bWJlcic7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gJ2Vsc2UnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzXG5cdCAqIGEgbGl0ZXJhbCBzdHJpbmcgb3IgbnVtYmVyLiBPdGhlcndpc2UgcHJlcGVuZCB0aGVcblx0ICogZHluYW1pYyBpbmRpY2F0b3IgKCopLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0U3ViUGF0aChwYXRoKSB7XG5cdCAgdmFyIHRyaW1tZWQgPSBwYXRoLnRyaW0oKTtcblx0ICAvLyBpbnZhbGlkIGxlYWRpbmcgMFxuXHQgIGlmIChwYXRoLmNoYXJBdCgwKSA9PT0gJzAnICYmIGlzTmFOKHBhdGgpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHJldHVybiBpc0xpdGVyYWwodHJpbW1lZCkgPyBzdHJpcFF1b3Rlcyh0cmltbWVkKSA6ICcqJyArIHRyaW1tZWQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhIHN0cmluZyBwYXRoIGludG8gYW4gYXJyYXkgb2Ygc2VnbWVudHNcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlKHBhdGgpIHtcblx0ICB2YXIga2V5cyA9IFtdO1xuXHQgIHZhciBpbmRleCA9IC0xO1xuXHQgIHZhciBtb2RlID0gQkVGT1JFX1BBVEg7XG5cdCAgdmFyIHN1YlBhdGhEZXB0aCA9IDA7XG5cdCAgdmFyIGMsIG5ld0NoYXIsIGtleSwgdHlwZSwgdHJhbnNpdGlvbiwgYWN0aW9uLCB0eXBlTWFwO1xuXHRcblx0ICB2YXIgYWN0aW9ucyA9IFtdO1xuXHRcblx0ICBhY3Rpb25zW1BVU0hdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgICBrZXkgPSB1bmRlZmluZWQ7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgYWN0aW9uc1tBUFBFTkRdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGtleSA9IG5ld0NoYXI7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBrZXkgKz0gbmV3Q2hhcjtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBhY3Rpb25zW0lOQ19TVUJfUEFUSF9ERVBUSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgIHN1YlBhdGhEZXB0aCsrO1xuXHQgIH07XG5cdFxuXHQgIGFjdGlvbnNbUFVTSF9TVUJfUEFUSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoc3ViUGF0aERlcHRoID4gMCkge1xuXHQgICAgICBzdWJQYXRoRGVwdGgtLTtcblx0ICAgICAgbW9kZSA9IElOX1NVQl9QQVRIO1xuXHQgICAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN1YlBhdGhEZXB0aCA9IDA7XG5cdCAgICAgIGtleSA9IGZvcm1hdFN1YlBhdGgoa2V5KTtcblx0ICAgICAgaWYgKGtleSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgYWN0aW9uc1tQVVNIXSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gbWF5YmVVbmVzY2FwZVF1b3RlKCkge1xuXHQgICAgdmFyIG5leHRDaGFyID0gcGF0aFtpbmRleCArIDFdO1xuXHQgICAgaWYgKG1vZGUgPT09IElOX1NJTkdMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gXCInXCIgfHwgbW9kZSA9PT0gSU5fRE9VQkxFX1FVT1RFICYmIG5leHRDaGFyID09PSAnXCInKSB7XG5cdCAgICAgIGluZGV4Kys7XG5cdCAgICAgIG5ld0NoYXIgPSAnXFxcXCcgKyBuZXh0Q2hhcjtcblx0ICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgd2hpbGUgKG1vZGUgIT0gbnVsbCkge1xuXHQgICAgaW5kZXgrKztcblx0ICAgIGMgPSBwYXRoW2luZGV4XTtcblx0XG5cdCAgICBpZiAoYyA9PT0gJ1xcXFwnICYmIG1heWJlVW5lc2NhcGVRdW90ZSgpKSB7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7XG5cdCAgICB0eXBlTWFwID0gcGF0aFN0YXRlTWFjaGluZVttb2RlXTtcblx0ICAgIHRyYW5zaXRpb24gPSB0eXBlTWFwW3R5cGVdIHx8IHR5cGVNYXBbJ2Vsc2UnXSB8fCBFUlJPUjtcblx0XG5cdCAgICBpZiAodHJhbnNpdGlvbiA9PT0gRVJST1IpIHtcblx0ICAgICAgcmV0dXJuOyAvLyBwYXJzZSBlcnJvclxuXHQgICAgfVxuXHRcblx0ICAgIG1vZGUgPSB0cmFuc2l0aW9uWzBdO1xuXHQgICAgYWN0aW9uID0gYWN0aW9uc1t0cmFuc2l0aW9uWzFdXTtcblx0ICAgIGlmIChhY3Rpb24pIHtcblx0ICAgICAgbmV3Q2hhciA9IHRyYW5zaXRpb25bMl07XG5cdCAgICAgIG5ld0NoYXIgPSBuZXdDaGFyID09PSB1bmRlZmluZWQgPyBjIDogbmV3Q2hhcjtcblx0ICAgICAgaWYgKGFjdGlvbigpID09PSBmYWxzZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChtb2RlID09PSBBRlRFUl9QQVRIKSB7XG5cdCAgICAgIGtleXMucmF3ID0gcGF0aDtcblx0ICAgICAgcmV0dXJuIGtleXM7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRXh0ZXJuYWwgcGFyc2UgdGhhdCBjaGVjayBmb3IgYSBjYWNoZSBoaXQgZmlyc3Rcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XG5cdCAgdmFyIGhpdCA9IHBhdGhDYWNoZS5nZXQocGF0aCk7XG5cdCAgaWYgKCFoaXQpIHtcblx0ICAgIGhpdCA9IHBhcnNlKHBhdGgpO1xuXHQgICAgaWYgKGhpdCkge1xuXHQgICAgICBwYXRoQ2FjaGUucHV0KHBhdGgsIGhpdCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBoaXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgZnJvbSBhbiBvYmplY3QgZnJvbSBhIHBhdGggc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRQYXRoKG9iaiwgcGF0aCkge1xuXHQgIHJldHVybiBwYXJzZUV4cHJlc3Npb24ocGF0aCkuZ2V0KG9iaik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBXYXJuIGFnYWluc3Qgc2V0dGluZyBub24tZXhpc3RlbnQgcm9vdCBwYXRoIG9uIGEgdm0uXG5cdCAqL1xuXHRcblx0dmFyIHdhcm5Ob25FeGlzdGVudDtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICB3YXJuTm9uRXhpc3RlbnQgPSBmdW5jdGlvbiAocGF0aCwgdm0pIHtcblx0ICAgIHdhcm4oJ1lvdSBhcmUgc2V0dGluZyBhIG5vbi1leGlzdGVudCBwYXRoIFwiJyArIHBhdGgucmF3ICsgJ1wiICcgKyAnb24gYSB2bSBpbnN0YW5jZS4gQ29uc2lkZXIgcHJlLWluaXRpYWxpemluZyB0aGUgcHJvcGVydHkgJyArICd3aXRoIHRoZSBcImRhdGFcIiBvcHRpb24gZm9yIG1vcmUgcmVsaWFibGUgcmVhY3Rpdml0eSAnICsgJ2FuZCBiZXR0ZXIgcGVyZm9ybWFuY2UuJywgdm0pO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTZXQgb24gYW4gb2JqZWN0IGZyb20gYSBwYXRoXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmcgfCBBcnJheX0gcGF0aFxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNldFBhdGgob2JqLCBwYXRoLCB2YWwpIHtcblx0ICB2YXIgb3JpZ2luYWwgPSBvYmo7XG5cdCAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuXHQgICAgcGF0aCA9IHBhcnNlKHBhdGgpO1xuXHQgIH1cblx0ICBpZiAoIXBhdGggfHwgIWlzT2JqZWN0KG9iaikpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIGxhc3QsIGtleTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBsYXN0ID0gb2JqO1xuXHQgICAga2V5ID0gcGF0aFtpXTtcblx0ICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnKicpIHtcblx0ICAgICAga2V5ID0gcGFyc2VFeHByZXNzaW9uKGtleS5zbGljZSgxKSkuZ2V0LmNhbGwob3JpZ2luYWwsIG9yaWdpbmFsKTtcblx0ICAgIH1cblx0ICAgIGlmIChpIDwgbCAtIDEpIHtcblx0ICAgICAgb2JqID0gb2JqW2tleV07XG5cdCAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuXHQgICAgICAgIG9iaiA9IHt9O1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGxhc3QuX2lzVnVlKSB7XG5cdCAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgbGFzdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldChsYXN0LCBrZXksIG9iaik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChpc0FycmF5KG9iaikpIHtcblx0ICAgICAgICBvYmouJHNldChrZXksIHZhbCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoa2V5IGluIG9iaikge1xuXHQgICAgICAgIG9ialtrZXldID0gdmFsO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9iai5faXNWdWUpIHtcblx0ICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBvYmopO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZXQob2JqLCBrZXksIHZhbCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdHZhciBwYXRoID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgcGFyc2VQYXRoOiBwYXJzZVBhdGgsXG5cdCAgZ2V0UGF0aDogZ2V0UGF0aCxcblx0ICBzZXRQYXRoOiBzZXRQYXRoXG5cdH0pO1xuXHRcblx0dmFyIGV4cHJlc3Npb25DYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0XG5cdHZhciBhbGxvd2VkS2V5d29yZHMgPSAnTWF0aCxEYXRlLHRoaXMsdHJ1ZSxmYWxzZSxudWxsLHVuZGVmaW5lZCxJbmZpbml0eSxOYU4sJyArICdpc05hTixpc0Zpbml0ZSxkZWNvZGVVUkksZGVjb2RlVVJJQ29tcG9uZW50LGVuY29kZVVSSSwnICsgJ2VuY29kZVVSSUNvbXBvbmVudCxwYXJzZUludCxwYXJzZUZsb2F0Jztcblx0dmFyIGFsbG93ZWRLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgYWxsb3dlZEtleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpO1xuXHRcblx0Ly8ga2V5d29yZHMgdGhhdCBkb24ndCBtYWtlIHNlbnNlIGluc2lkZSBleHByZXNzaW9uc1xuXHR2YXIgaW1wcm9wZXJLZXl3b3JkcyA9ICdicmVhayxjYXNlLGNsYXNzLGNhdGNoLGNvbnN0LGNvbnRpbnVlLGRlYnVnZ2VyLGRlZmF1bHQsJyArICdkZWxldGUsZG8sZWxzZSxleHBvcnQsZXh0ZW5kcyxmaW5hbGx5LGZvcixmdW5jdGlvbixpZiwnICsgJ2ltcG9ydCxpbixpbnN0YW5jZW9mLGxldCxyZXR1cm4sc3VwZXIsc3dpdGNoLHRocm93LHRyeSwnICsgJ3Zhcix3aGlsZSx3aXRoLHlpZWxkLGVudW0sYXdhaXQsaW1wbGVtZW50cyxwYWNrYWdlLCcgKyAncHJvdGVjdGVkLHN0YXRpYyxpbnRlcmZhY2UscHJpdmF0ZSxwdWJsaWMnO1xuXHR2YXIgaW1wcm9wZXJLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgaW1wcm9wZXJLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblx0XG5cdHZhciB3c1JFID0gL1xccy9nO1xuXHR2YXIgbmV3bGluZVJFID0gL1xcbi9nO1xuXHR2YXIgc2F2ZVJFID0gL1tcXHssXVxccypbXFx3XFwkX10rXFxzKjp8KCcoPzpbXidcXFxcXXxcXFxcLikqJ3xcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8YCg/OlteYFxcXFxdfFxcXFwuKSpcXCRcXHt8XFx9KD86W15gXFxcXF18XFxcXC4pKmB8YCg/OlteYFxcXFxdfFxcXFwuKSpgKXxuZXcgfHR5cGVvZiB8dm9pZCAvZztcblx0dmFyIHJlc3RvcmVSRSA9IC9cIihcXGQrKVwiL2c7XG5cdHZhciBwYXRoVGVzdFJFID0gL15bQS1aYS16XyRdW1xcdyRdKig/OlxcLltBLVphLXpfJF1bXFx3JF0qfFxcWycuKj8nXFxdfFxcW1wiLio/XCJcXF18XFxbXFxkK1xcXXxcXFtbQS1aYS16XyRdW1xcdyRdKlxcXSkqJC87XG5cdHZhciBpZGVudFJFID0gL1teXFx3JFxcLl0oPzpbQS1aYS16XyRdW1xcdyRdKikvZztcblx0dmFyIGxpdGVyYWxWYWx1ZVJFJDEgPSAvXig/OnRydWV8ZmFsc2V8bnVsbHx1bmRlZmluZWR8SW5maW5pdHl8TmFOKSQvO1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHQvKipcblx0ICogU2F2ZSAvIFJld3JpdGUgLyBSZXN0b3JlXG5cdCAqXG5cdCAqIFdoZW4gcmV3cml0aW5nIHBhdGhzIGZvdW5kIGluIGFuIGV4cHJlc3Npb24sIGl0IGlzXG5cdCAqIHBvc3NpYmxlIGZvciB0aGUgc2FtZSBsZXR0ZXIgc2VxdWVuY2VzIHRvIGJlIGZvdW5kIGluXG5cdCAqIHN0cmluZ3MgYW5kIE9iamVjdCBsaXRlcmFsIHByb3BlcnR5IGtleXMuIFRoZXJlZm9yZSB3ZVxuXHQgKiByZW1vdmUgYW5kIHN0b3JlIHRoZXNlIHBhcnRzIGluIGEgdGVtcG9yYXJ5IGFycmF5LCBhbmRcblx0ICogcmVzdG9yZSB0aGVtIGFmdGVyIHRoZSBwYXRoIHJld3JpdGUuXG5cdCAqL1xuXHRcblx0dmFyIHNhdmVkID0gW107XG5cdFxuXHQvKipcblx0ICogU2F2ZSByZXBsYWNlclxuXHQgKlxuXHQgKiBUaGUgc2F2ZSByZWdleCBjYW4gbWF0Y2ggdHdvIHBvc3NpYmxlIGNhc2VzOlxuXHQgKiAxLiBBbiBvcGVuaW5nIG9iamVjdCBsaXRlcmFsXG5cdCAqIDIuIEEgc3RyaW5nXG5cdCAqIElmIG1hdGNoZWQgYXMgYSBwbGFpbiBzdHJpbmcsIHdlIG5lZWQgdG8gZXNjYXBlIGl0c1xuXHQgKiBuZXdsaW5lcywgc2luY2UgdGhlIHN0cmluZyBuZWVkcyB0byBiZSBwcmVzZXJ2ZWQgd2hlblxuXHQgKiBnZW5lcmF0aW5nIHRoZSBmdW5jdGlvbiBib2R5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpc1N0cmluZyAtIHN0ciBpZiBtYXRjaGVkIGFzIGEgc3RyaW5nXG5cdCAqIEByZXR1cm4ge1N0cmluZ30gLSBwbGFjZWhvbGRlciB3aXRoIGluZGV4XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2F2ZShzdHIsIGlzU3RyaW5nKSB7XG5cdCAgdmFyIGkgPSBzYXZlZC5sZW5ndGg7XG5cdCAgc2F2ZWRbaV0gPSBpc1N0cmluZyA/IHN0ci5yZXBsYWNlKG5ld2xpbmVSRSwgJ1xcXFxuJykgOiBzdHI7XG5cdCAgcmV0dXJuICdcIicgKyBpICsgJ1wiJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhdGggcmV3cml0ZSByZXBsYWNlclxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcmF3XG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXdyaXRlKHJhdykge1xuXHQgIHZhciBjID0gcmF3LmNoYXJBdCgwKTtcblx0ICB2YXIgcGF0aCA9IHJhdy5zbGljZSgxKTtcblx0ICBpZiAoYWxsb3dlZEtleXdvcmRzUkUudGVzdChwYXRoKSkge1xuXHQgICAgcmV0dXJuIHJhdztcblx0ICB9IGVsc2Uge1xuXHQgICAgcGF0aCA9IHBhdGguaW5kZXhPZignXCInKSA+IC0xID8gcGF0aC5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSkgOiBwYXRoO1xuXHQgICAgcmV0dXJuIGMgKyAnc2NvcGUuJyArIHBhdGg7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVzdG9yZSByZXBsYWNlclxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpIC0gbWF0Y2hlZCBzYXZlIGluZGV4XG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXN0b3JlKHN0ciwgaSkge1xuXHQgIHJldHVybiBzYXZlZFtpXTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJld3JpdGUgYW4gZXhwcmVzc2lvbiwgcHJlZml4aW5nIGFsbCBwYXRoIGFjY2Vzc29ycyB3aXRoXG5cdCAqIGBzY29wZS5gIGFuZCBnZW5lcmF0ZSBnZXR0ZXIvc2V0dGVyIGZ1bmN0aW9ucy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlR2V0dGVyKGV4cCkge1xuXHQgIGlmIChpbXByb3BlcktleXdvcmRzUkUudGVzdChleHApKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0F2b2lkIHVzaW5nIHJlc2VydmVkIGtleXdvcmRzIGluIGV4cHJlc3Npb246ICcgKyBleHApO1xuXHQgIH1cblx0ICAvLyByZXNldCBzdGF0ZVxuXHQgIHNhdmVkLmxlbmd0aCA9IDA7XG5cdCAgLy8gc2F2ZSBzdHJpbmdzIGFuZCBvYmplY3QgbGl0ZXJhbCBrZXlzXG5cdCAgdmFyIGJvZHkgPSBleHAucmVwbGFjZShzYXZlUkUsIHNhdmUpLnJlcGxhY2Uod3NSRSwgJycpO1xuXHQgIC8vIHJld3JpdGUgYWxsIHBhdGhzXG5cdCAgLy8gcGFkIDEgc3BhY2UgaGVyZSBiZWNhdXNlIHRoZSByZWdleCBtYXRjaGVzIDEgZXh0cmEgY2hhclxuXHQgIGJvZHkgPSAoJyAnICsgYm9keSkucmVwbGFjZShpZGVudFJFLCByZXdyaXRlKS5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSk7XG5cdCAgcmV0dXJuIG1ha2VHZXR0ZXJGbihib2R5KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgZ2V0dGVyIGZ1bmN0aW9uLiBSZXF1aXJlcyBldmFsLlxuXHQgKlxuXHQgKiBXZSBpc29sYXRlIHRoZSB0cnkvY2F0Y2ggc28gaXQgZG9lc24ndCBhZmZlY3QgdGhlXG5cdCAqIG9wdGltaXphdGlvbiBvZiB0aGUgcGFyc2UgZnVuY3Rpb24gd2hlbiBpdCBpcyBub3QgY2FsbGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gYm9keVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZUdldHRlckZuKGJvZHkpIHtcblx0ICB0cnkge1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3Njb3BlJywgJ3JldHVybiAnICsgYm9keSArICc7Jyk7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChlLnRvU3RyaW5nKCkubWF0Y2goL3Vuc2FmZS1ldmFsfENTUC8pKSB7XG5cdCAgICAgICAgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0aGUgZGVmYXVsdCBidWlsZCBvZiBWdWUuanMgaW4gYW4gZW52aXJvbm1lbnQgJyArICd3aXRoIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IHRoYXQgcHJvaGliaXRzIHVuc2FmZS1ldmFsLiAnICsgJ1VzZSB0aGUgQ1NQLWNvbXBsaWFudCBidWlsZCBpbnN0ZWFkOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvaW5zdGFsbGF0aW9uLmh0bWwjQ1NQLWNvbXBsaWFudC1idWlsZCcpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHdhcm4oJ0ludmFsaWQgZXhwcmVzc2lvbi4gJyArICdHZW5lcmF0ZWQgZnVuY3Rpb24gYm9keTogJyArIGJvZHkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbm9vcDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgc2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgZXhwcmVzc2lvbi5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVNldHRlcihleHApIHtcblx0ICB2YXIgcGF0aCA9IHBhcnNlUGF0aChleHApO1xuXHQgIGlmIChwYXRoKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCB2YWwpIHtcblx0ICAgICAgc2V0UGF0aChzY29wZSwgcGF0aCwgdmFsKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBzZXR0ZXIgZXhwcmVzc2lvbjogJyArIGV4cCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYW4gZXhwcmVzc2lvbiBpbnRvIHJlLXdyaXR0ZW4gZ2V0dGVyL3NldHRlcnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHBhcmFtIHtCb29sZWFufSBuZWVkU2V0XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlRXhwcmVzc2lvbihleHAsIG5lZWRTZXQpIHtcblx0ICBleHAgPSBleHAudHJpbSgpO1xuXHQgIC8vIHRyeSBjYWNoZVxuXHQgIHZhciBoaXQgPSBleHByZXNzaW9uQ2FjaGUuZ2V0KGV4cCk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgaWYgKG5lZWRTZXQgJiYgIWhpdC5zZXQpIHtcblx0ICAgICAgaGl0LnNldCA9IGNvbXBpbGVTZXR0ZXIoaGl0LmV4cCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0ICB2YXIgcmVzID0geyBleHA6IGV4cCB9O1xuXHQgIHJlcy5nZXQgPSBpc1NpbXBsZVBhdGgoZXhwKSAmJiBleHAuaW5kZXhPZignWycpIDwgMFxuXHQgIC8vIG9wdGltaXplZCBzdXBlciBzaW1wbGUgZ2V0dGVyXG5cdCAgPyBtYWtlR2V0dGVyRm4oJ3Njb3BlLicgKyBleHApXG5cdCAgLy8gZHluYW1pYyBnZXR0ZXJcblx0ICA6IGNvbXBpbGVHZXR0ZXIoZXhwKTtcblx0ICBpZiAobmVlZFNldCkge1xuXHQgICAgcmVzLnNldCA9IGNvbXBpbGVTZXR0ZXIoZXhwKTtcblx0ICB9XG5cdCAgZXhwcmVzc2lvbkNhY2hlLnB1dChleHAsIHJlcyk7XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBzaW1wbGUgcGF0aC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzU2ltcGxlUGF0aChleHApIHtcblx0ICByZXR1cm4gcGF0aFRlc3RSRS50ZXN0KGV4cCkgJiZcblx0ICAvLyBkb24ndCB0cmVhdCBsaXRlcmFsIHZhbHVlcyBhcyBwYXRoc1xuXHQgICFsaXRlcmFsVmFsdWVSRSQxLnRlc3QoZXhwKSAmJlxuXHQgIC8vIE1hdGggY29uc3RhbnRzIGUuZy4gTWF0aC5QSSwgTWF0aC5FIGV0Yy5cblx0ICBleHAuc2xpY2UoMCwgNSkgIT09ICdNYXRoLic7XG5cdH1cblx0XG5cdHZhciBleHByZXNzaW9uID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgcGFyc2VFeHByZXNzaW9uOiBwYXJzZUV4cHJlc3Npb24sXG5cdCAgaXNTaW1wbGVQYXRoOiBpc1NpbXBsZVBhdGhcblx0fSk7XG5cdFxuXHQvLyB3ZSBoYXZlIHR3byBzZXBhcmF0ZSBxdWV1ZXM6IG9uZSBmb3IgZGlyZWN0aXZlIHVwZGF0ZXNcblx0Ly8gYW5kIG9uZSBmb3IgdXNlciB3YXRjaGVyIHJlZ2lzdGVyZWQgdmlhICR3YXRjaCgpLlxuXHQvLyB3ZSB3YW50IHRvIGd1YXJhbnRlZSBkaXJlY3RpdmUgdXBkYXRlcyB0byBiZSBjYWxsZWRcblx0Ly8gYmVmb3JlIHVzZXIgd2F0Y2hlcnMgc28gdGhhdCB3aGVuIHVzZXIgd2F0Y2hlcnMgYXJlXG5cdC8vIHRyaWdnZXJlZCwgdGhlIERPTSB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBpbiB1cGRhdGVkXG5cdC8vIHN0YXRlLlxuXHRcblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciB1c2VyUXVldWUgPSBbXTtcblx0dmFyIGhhcyA9IHt9O1xuXHR2YXIgY2lyY3VsYXIgPSB7fTtcblx0dmFyIHdhaXRpbmcgPSBmYWxzZTtcblx0XG5cdC8qKlxuXHQgKiBSZXNldCB0aGUgYmF0Y2hlcidzIHN0YXRlLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc2V0QmF0Y2hlclN0YXRlKCkge1xuXHQgIHF1ZXVlLmxlbmd0aCA9IDA7XG5cdCAgdXNlclF1ZXVlLmxlbmd0aCA9IDA7XG5cdCAgaGFzID0ge307XG5cdCAgY2lyY3VsYXIgPSB7fTtcblx0ICB3YWl0aW5nID0gZmFsc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmbHVzaEJhdGNoZXJRdWV1ZSgpIHtcblx0ICB2YXIgX2FnYWluID0gdHJ1ZTtcblx0XG5cdCAgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7XG5cdCAgICBfYWdhaW4gPSBmYWxzZTtcblx0XG5cdCAgICBydW5CYXRjaGVyUXVldWUocXVldWUpO1xuXHQgICAgcnVuQmF0Y2hlclF1ZXVlKHVzZXJRdWV1ZSk7XG5cdCAgICAvLyB1c2VyIHdhdGNoZXJzIHRyaWdnZXJlZCBtb3JlIHdhdGNoZXJzLFxuXHQgICAgLy8ga2VlcCBmbHVzaGluZyB1bnRpbCBpdCBkZXBsZXRlc1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICBfYWdhaW4gPSB0cnVlO1xuXHQgICAgICBjb250aW51ZSBfZnVuY3Rpb247XG5cdCAgICB9XG5cdCAgICAvLyBkZXYgdG9vbCBob29rXG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChkZXZ0b29scyAmJiBjb25maWcuZGV2dG9vbHMpIHtcblx0ICAgICAgZGV2dG9vbHMuZW1pdCgnZmx1c2gnKTtcblx0ICAgIH1cblx0ICAgIHJlc2V0QmF0Y2hlclN0YXRlKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUnVuIHRoZSB3YXRjaGVycyBpbiBhIHNpbmdsZSBxdWV1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gcXVldWVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBydW5CYXRjaGVyUXVldWUocXVldWUpIHtcblx0ICAvLyBkbyBub3QgY2FjaGUgbGVuZ3RoIGJlY2F1c2UgbW9yZSB3YXRjaGVycyBtaWdodCBiZSBwdXNoZWRcblx0ICAvLyBhcyB3ZSBydW4gZXhpc3Rpbmcgd2F0Y2hlcnNcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgd2F0Y2hlciA9IHF1ZXVlW2ldO1xuXHQgICAgdmFyIGlkID0gd2F0Y2hlci5pZDtcblx0ICAgIGhhc1tpZF0gPSBudWxsO1xuXHQgICAgd2F0Y2hlci5ydW4oKTtcblx0ICAgIC8vIGluIGRldiBidWlsZCwgY2hlY2sgYW5kIHN0b3AgY2lyY3VsYXIgdXBkYXRlcy5cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuXHQgICAgICBjaXJjdWxhcltpZF0gPSAoY2lyY3VsYXJbaWRdIHx8IDApICsgMTtcblx0ICAgICAgaWYgKGNpcmN1bGFyW2lkXSA+IGNvbmZpZy5fbWF4VXBkYXRlQ291bnQpIHtcblx0ICAgICAgICB3YXJuKCdZb3UgbWF5IGhhdmUgYW4gaW5maW5pdGUgdXBkYXRlIGxvb3AgZm9yIHdhdGNoZXIgJyArICd3aXRoIGV4cHJlc3Npb24gXCInICsgd2F0Y2hlci5leHByZXNzaW9uICsgJ1wiJywgd2F0Y2hlci52bSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcXVldWUubGVuZ3RoID0gMDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFB1c2ggYSB3YXRjaGVyIGludG8gdGhlIHdhdGNoZXIgcXVldWUuXG5cdCAqIEpvYnMgd2l0aCBkdXBsaWNhdGUgSURzIHdpbGwgYmUgc2tpcHBlZCB1bmxlc3MgaXQnc1xuXHQgKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC5cblx0ICpcblx0ICogQHBhcmFtIHtXYXRjaGVyfSB3YXRjaGVyXG5cdCAqICAgcHJvcGVydGllczpcblx0ICogICAtIHtOdW1iZXJ9IGlkXG5cdCAqICAgLSB7RnVuY3Rpb259IHJ1blxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHB1c2hXYXRjaGVyKHdhdGNoZXIpIHtcblx0ICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuXHQgIGlmIChoYXNbaWRdID09IG51bGwpIHtcblx0ICAgIC8vIHB1c2ggd2F0Y2hlciBpbnRvIGFwcHJvcHJpYXRlIHF1ZXVlXG5cdCAgICB2YXIgcSA9IHdhdGNoZXIudXNlciA/IHVzZXJRdWV1ZSA6IHF1ZXVlO1xuXHQgICAgaGFzW2lkXSA9IHEubGVuZ3RoO1xuXHQgICAgcS5wdXNoKHdhdGNoZXIpO1xuXHQgICAgLy8gcXVldWUgdGhlIGZsdXNoXG5cdCAgICBpZiAoIXdhaXRpbmcpIHtcblx0ICAgICAgd2FpdGluZyA9IHRydWU7XG5cdCAgICAgIG5leHRUaWNrKGZsdXNoQmF0Y2hlclF1ZXVlKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB1aWQkMiA9IDA7XG5cdFxuXHQvKipcblx0ICogQSB3YXRjaGVyIHBhcnNlcyBhbiBleHByZXNzaW9uLCBjb2xsZWN0cyBkZXBlbmRlbmNpZXMsXG5cdCAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuXG5cdCAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogICAgICAgICAgICAgICAgIC0ge0FycmF5fSBmaWx0ZXJzXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB0d29XYXlcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHVzZXJcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHN5bmNcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxhenlcblx0ICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcHJlUHJvY2Vzc11cblx0ICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcG9zdFByb2Nlc3NdXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcblx0ICAvLyBtaXggaW4gb3B0aW9uc1xuXHQgIGlmIChvcHRpb25zKSB7XG5cdCAgICBleHRlbmQodGhpcywgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIHZhciBpc0ZuID0gdHlwZW9mIGV4cE9yRm4gPT09ICdmdW5jdGlvbic7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHZtLl93YXRjaGVycy5wdXNoKHRoaXMpO1xuXHQgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm47XG5cdCAgdGhpcy5jYiA9IGNiO1xuXHQgIHRoaXMuaWQgPSArK3VpZCQyOyAvLyB1aWQgZm9yIGJhdGNoaW5nXG5cdCAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuXHQgIHRoaXMuZGlydHkgPSB0aGlzLmxhenk7IC8vIGZvciBsYXp5IHdhdGNoZXJzXG5cdCAgdGhpcy5kZXBzID0gW107XG5cdCAgdGhpcy5uZXdEZXBzID0gW107XG5cdCAgdGhpcy5kZXBJZHMgPSBuZXcgX1NldCgpO1xuXHQgIHRoaXMubmV3RGVwSWRzID0gbmV3IF9TZXQoKTtcblx0ICB0aGlzLnByZXZFcnJvciA9IG51bGw7IC8vIGZvciBhc3luYyBlcnJvciBzdGFja3Ncblx0ICAvLyBwYXJzZSBleHByZXNzaW9uIGZvciBnZXR0ZXIvc2V0dGVyXG5cdCAgaWYgKGlzRm4pIHtcblx0ICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcblx0ICAgIHRoaXMuc2V0dGVyID0gdW5kZWZpbmVkO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cE9yRm4sIHRoaXMudHdvV2F5KTtcblx0ICAgIHRoaXMuZ2V0dGVyID0gcmVzLmdldDtcblx0ICAgIHRoaXMuc2V0dGVyID0gcmVzLnNldDtcblx0ICB9XG5cdCAgdGhpcy52YWx1ZSA9IHRoaXMubGF6eSA/IHVuZGVmaW5lZCA6IHRoaXMuZ2V0KCk7XG5cdCAgLy8gc3RhdGUgZm9yIGF2b2lkaW5nIGZhbHNlIHRyaWdnZXJzIGZvciBkZWVwIGFuZCBBcnJheVxuXHQgIC8vIHdhdGNoZXJzIGR1cmluZyB2bS5fZGlnZXN0KClcblx0ICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRXZhbHVhdGUgdGhlIGdldHRlciwgYW5kIHJlLWNvbGxlY3QgZGVwZW5kZW5jaWVzLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLmJlZm9yZUdldCgpO1xuXHQgIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcblx0ICB2YXIgdmFsdWU7XG5cdCAgdHJ5IHtcblx0ICAgIHZhbHVlID0gdGhpcy5nZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuXHQgICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgZXhwcmVzc2lvbiAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIFwidG91Y2hcIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhc1xuXHQgIC8vIGRlcGVuZGVuY2llcyBmb3IgZGVlcCB3YXRjaGluZ1xuXHQgIGlmICh0aGlzLmRlZXApIHtcblx0ICAgIHRyYXZlcnNlKHZhbHVlKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMucHJlUHJvY2Vzcykge1xuXHQgICAgdmFsdWUgPSB0aGlzLnByZVByb2Nlc3ModmFsdWUpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5maWx0ZXJzKSB7XG5cdCAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIG51bGwsIHRoaXMuZmlsdGVycywgZmFsc2UpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5wb3N0UHJvY2Vzcykge1xuXHQgICAgdmFsdWUgPSB0aGlzLnBvc3RQcm9jZXNzKHZhbHVlKTtcblx0ICB9XG5cdCAgdGhpcy5hZnRlckdldCgpO1xuXHQgIHJldHVybiB2YWx1ZTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtO1xuXHQgIGlmICh0aGlzLmZpbHRlcnMpIHtcblx0ICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyh2YWx1ZSwgdGhpcy52YWx1ZSwgdGhpcy5maWx0ZXJzLCB0cnVlKTtcblx0ICB9XG5cdCAgdHJ5IHtcblx0ICAgIHRoaXMuc2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlLCB2YWx1ZSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG5cdCAgICAgIHdhcm4oJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBzZXR0ZXIgJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyB0d28td2F5IHN5bmMgZm9yIHYtZm9yIGFsaWFzXG5cdCAgdmFyIGZvckNvbnRleHQgPSBzY29wZS4kZm9yQ29udGV4dDtcblx0ICBpZiAoZm9yQ29udGV4dCAmJiBmb3JDb250ZXh0LmFsaWFzID09PSB0aGlzLmV4cHJlc3Npb24pIHtcblx0ICAgIGlmIChmb3JDb250ZXh0LmZpbHRlcnMpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHR3by13YXkgYmluZGluZyBvbiAnICsgJ2Egdi1mb3IgYWxpYXMgKCcgKyB0aGlzLmV4cHJlc3Npb24gKyAnKSwgYW5kIHRoZSAnICsgJ3YtZm9yIGhhcyBmaWx0ZXJzLiBUaGlzIHdpbGwgbm90IHdvcmsgcHJvcGVybHkuICcgKyAnRWl0aGVyIHJlbW92ZSB0aGUgZmlsdGVycyBvciB1c2UgYW4gYXJyYXkgb2YgJyArICdvYmplY3RzIGFuZCBiaW5kIHRvIG9iamVjdCBwcm9wZXJ0aWVzIGluc3RlYWQuJywgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGZvckNvbnRleHQuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHNjb3BlLiRrZXkpIHtcblx0ICAgICAgICAvLyBvcmlnaW5hbCBpcyBhbiBvYmplY3Rcblx0ICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlW3Njb3BlLiRrZXldID0gdmFsdWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZS4kc2V0KHNjb3BlLiRpbmRleCwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUHJlcGFyZSBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmJlZm9yZUdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICBEZXAudGFyZ2V0ID0gdGhpcztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBZGQgYSBkZXBlbmRlbmN5IHRvIHRoaXMgZGlyZWN0aXZlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RlcH0gZGVwXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gKGRlcCkge1xuXHQgIHZhciBpZCA9IGRlcC5pZDtcblx0ICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhpZCkpIHtcblx0ICAgIHRoaXMubmV3RGVwSWRzLmFkZChpZCk7XG5cdCAgICB0aGlzLm5ld0RlcHMucHVzaChkZXApO1xuXHQgICAgaWYgKCF0aGlzLmRlcElkcy5oYXMoaWQpKSB7XG5cdCAgICAgIGRlcC5hZGRTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENsZWFuIHVwIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuYWZ0ZXJHZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgRGVwLnRhcmdldCA9IG51bGw7XG5cdCAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHZhciBkZXAgPSB0aGlzLmRlcHNbaV07XG5cdCAgICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhkZXAuaWQpKSB7XG5cdCAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciB0bXAgPSB0aGlzLmRlcElkcztcblx0ICB0aGlzLmRlcElkcyA9IHRoaXMubmV3RGVwSWRzO1xuXHQgIHRoaXMubmV3RGVwSWRzID0gdG1wO1xuXHQgIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG5cdCAgdG1wID0gdGhpcy5kZXBzO1xuXHQgIHRoaXMuZGVwcyA9IHRoaXMubmV3RGVwcztcblx0ICB0aGlzLm5ld0RlcHMgPSB0bXA7XG5cdCAgdGhpcy5uZXdEZXBzLmxlbmd0aCA9IDA7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU3Vic2NyaWJlciBpbnRlcmZhY2UuXG5cdCAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hhbGxvd1xuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChzaGFsbG93KSB7XG5cdCAgaWYgKHRoaXMubGF6eSkge1xuXHQgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG5cdCAgfSBlbHNlIGlmICh0aGlzLnN5bmMgfHwgIWNvbmZpZy5hc3luYykge1xuXHQgICAgdGhpcy5ydW4oKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gaWYgcXVldWVkLCBvbmx5IG92ZXJ3cml0ZSBzaGFsbG93IHdpdGggbm9uLXNoYWxsb3csXG5cdCAgICAvLyBidXQgbm90IHRoZSBvdGhlciB3YXkgYXJvdW5kLlxuXHQgICAgdGhpcy5zaGFsbG93ID0gdGhpcy5xdWV1ZWQgPyBzaGFsbG93ID8gdGhpcy5zaGFsbG93IDogZmFsc2UgOiAhIXNoYWxsb3c7XG5cdCAgICB0aGlzLnF1ZXVlZCA9IHRydWU7XG5cdCAgICAvLyByZWNvcmQgYmVmb3JlLXB1c2ggZXJyb3Igc3RhY2sgaW4gZGVidWcgbW9kZVxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcpIHtcblx0ICAgICAgdGhpcy5wcmV2RXJyb3IgPSBuZXcgRXJyb3IoJ1t2dWVdIGFzeW5jIHN0YWNrIHRyYWNlJyk7XG5cdCAgICB9XG5cdCAgICBwdXNoV2F0Y2hlcih0aGlzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQmF0Y2hlciBqb2IgaW50ZXJmYWNlLlxuXHQgKiBXaWxsIGJlIGNhbGxlZCBieSB0aGUgYmF0Y2hlci5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMuYWN0aXZlKSB7XG5cdCAgICB2YXIgdmFsdWUgPSB0aGlzLmdldCgpO1xuXHQgICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlIHx8XG5cdCAgICAvLyBEZWVwIHdhdGNoZXJzIGFuZCB3YXRjaGVycyBvbiBPYmplY3QvQXJyYXlzIHNob3VsZCBmaXJlIGV2ZW5cblx0ICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXlcblx0ICAgIC8vIGhhdmUgbXV0YXRlZDsgYnV0IG9ubHkgZG8gc28gaWYgdGhpcyBpcyBhXG5cdCAgICAvLyBub24tc2hhbGxvdyB1cGRhdGUgKGNhdXNlZCBieSBhIHZtIGRpZ2VzdCkuXG5cdCAgICAoaXNPYmplY3QodmFsdWUpIHx8IHRoaXMuZGVlcCkgJiYgIXRoaXMuc2hhbGxvdykge1xuXHQgICAgICAvLyBzZXQgbmV3IHZhbHVlXG5cdCAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG5cdCAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgLy8gaW4gZGVidWcgKyBhc3luYyBtb2RlLCB3aGVuIGEgd2F0Y2hlciBjYWxsYmFja3Ncblx0ICAgICAgLy8gdGhyb3dzLCB3ZSBhbHNvIHRocm93IHRoZSBzYXZlZCBiZWZvcmUtcHVzaCBlcnJvclxuXHQgICAgICAvLyBzbyB0aGUgZnVsbCBjcm9zcy10aWNrIHN0YWNrIHRyYWNlIGlzIGF2YWlsYWJsZS5cblx0ICAgICAgdmFyIHByZXZFcnJvciA9IHRoaXMucHJldkVycm9yO1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnICYmIHByZXZFcnJvcikge1xuXHQgICAgICAgIHRoaXMucHJldkVycm9yID0gbnVsbDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB0aHJvdyBwcmV2RXJyb3I7XG5cdCAgICAgICAgICB9LCAwKTtcblx0ICAgICAgICAgIHRocm93IGU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFdmFsdWF0ZSB0aGUgdmFsdWUgb2YgdGhlIHdhdGNoZXIuXG5cdCAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAvLyBhdm9pZCBvdmVyd3JpdGluZyBhbm90aGVyIHdhdGNoZXIgdGhhdCBpcyBiZWluZ1xuXHQgIC8vIGNvbGxlY3RlZC5cblx0ICB2YXIgY3VycmVudCA9IERlcC50YXJnZXQ7XG5cdCAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0KCk7XG5cdCAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHQgIERlcC50YXJnZXQgPSBjdXJyZW50O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERlcGVuZCBvbiBhbGwgZGVwcyBjb2xsZWN0ZWQgYnkgdGhpcyB3YXRjaGVyLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdGhpcy5kZXBzW2ldLmRlcGVuZCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YmNyaWJlciBsaXN0LlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLmFjdGl2ZSkge1xuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSB2bSdzIHdhdGNoZXIgbGlzdFxuXHQgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGV4cGVuc2l2ZSBvcGVyYXRpb24gc28gd2Ugc2tpcCBpdFxuXHQgICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIGRlc3Ryb3llZCBvciBpcyBwZXJmb3JtaW5nIGEgdi1mb3Jcblx0ICAgIC8vIHJlLXJlbmRlciAodGhlIHdhdGNoZXIgbGlzdCBpcyB0aGVuIGZpbHRlcmVkIGJ5IHYtZm9yKS5cblx0ICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdGhpcy52bS5fdkZvclJlbW92aW5nKSB7XG5cdCAgICAgIHRoaXMudm0uX3dhdGNoZXJzLiRyZW1vdmUodGhpcyk7XG5cdCAgICB9XG5cdCAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHRoaXMuZGVwc1tpXS5yZW1vdmVTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgdGhpcy52bSA9IHRoaXMuY2IgPSB0aGlzLnZhbHVlID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVjcnVzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcblx0ICogZ2V0dGVycywgc28gdGhhdCBldmVyeSBuZXN0ZWQgcHJvcGVydHkgaW5zaWRlIHRoZSBvYmplY3Rcblx0ICogaXMgY29sbGVjdGVkIGFzIGEgXCJkZWVwXCIgZGVwZW5kZW5jeS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHR2YXIgc2Vlbk9iamVjdHMgPSBuZXcgX1NldCgpO1xuXHRmdW5jdGlvbiB0cmF2ZXJzZSh2YWwsIHNlZW4pIHtcblx0ICB2YXIgaSA9IHVuZGVmaW5lZCxcblx0ICAgICAga2V5cyA9IHVuZGVmaW5lZDtcblx0ICBpZiAoIXNlZW4pIHtcblx0ICAgIHNlZW4gPSBzZWVuT2JqZWN0cztcblx0ICAgIHNlZW4uY2xlYXIoKTtcblx0ICB9XG5cdCAgdmFyIGlzQSA9IGlzQXJyYXkodmFsKTtcblx0ICB2YXIgaXNPID0gaXNPYmplY3QodmFsKTtcblx0ICBpZiAoKGlzQSB8fCBpc08pICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsKSkge1xuXHQgICAgaWYgKHZhbC5fX29iX18pIHtcblx0ICAgICAgdmFyIGRlcElkID0gdmFsLl9fb2JfXy5kZXAuaWQ7XG5cdCAgICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc2Vlbi5hZGQoZGVwSWQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoaXNBKSB7XG5cdCAgICAgIGkgPSB2YWwubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxbaV0sIHNlZW4pO1xuXHQgICAgfSBlbHNlIGlmIChpc08pIHtcblx0ICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG5cdCAgICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2tleXNbaV1dLCBzZWVuKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB0ZXh0JDEgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB0aGlzLmF0dHIgPSB0aGlzLmVsLm5vZGVUeXBlID09PSAzID8gJ2RhdGEnIDogJ3RleHRDb250ZW50Jztcblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdGhpcy5lbFt0aGlzLmF0dHJdID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgdGVtcGxhdGVDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0dmFyIGlkU2VsZWN0b3JDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0XG5cdHZhciBtYXAgPSB7XG5cdCAgZWZhdWx0OiBbMCwgJycsICcnXSxcblx0ICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuXHQgIHRyOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcblx0ICBjb2w6IFsyLCAnPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddXG5cdH07XG5cdFxuXHRtYXAudGQgPSBtYXAudGggPSBbMywgJzx0YWJsZT48dGJvZHk+PHRyPicsICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXTtcblx0XG5cdG1hcC5vcHRpb24gPSBtYXAub3B0Z3JvdXAgPSBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsICc8L3NlbGVjdD4nXTtcblx0XG5cdG1hcC50aGVhZCA9IG1hcC50Ym9keSA9IG1hcC5jb2xncm91cCA9IG1hcC5jYXB0aW9uID0gbWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cdFxuXHRtYXAuZyA9IG1hcC5kZWZzID0gbWFwLnN5bWJvbCA9IG1hcC51c2UgPSBtYXAuaW1hZ2UgPSBtYXAudGV4dCA9IG1hcC5jaXJjbGUgPSBtYXAuZWxsaXBzZSA9IG1hcC5saW5lID0gbWFwLnBhdGggPSBtYXAucG9seWdvbiA9IG1hcC5wb2x5bGluZSA9IG1hcC5yZWN0ID0gWzEsICc8c3ZnICcgKyAneG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiICcgKyAneG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgJyArICd4bWxuczpldj1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEveG1sLWV2ZW50c1wiJyArICd2ZXJzaW9uPVwiMS4xXCI+JywgJzwvc3ZnPiddO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIHN1cHBvcnRlZCB0ZW1wbGF0ZSBub2RlIHdpdGggYVxuXHQgKiBEb2N1bWVudEZyYWdtZW50IGNvbnRlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzUmVhbFRlbXBsYXRlKG5vZGUpIHtcblx0ICByZXR1cm4gaXNUZW1wbGF0ZShub2RlKSAmJiBpc0ZyYWdtZW50KG5vZGUuY29udGVudCk7XG5cdH1cblx0XG5cdHZhciB0YWdSRSQxID0gLzwoW1xcdzotXSspLztcblx0dmFyIGVudGl0eVJFID0gLyYjP1xcdys/Oy87XG5cdHZhciBjb21tZW50UkUgPSAvPCEtLS87XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhIHN0cmluZyB0ZW1wbGF0ZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG5cdCAqIERldGVybWluZXMgY29ycmVjdCB3cmFwcGluZyBieSB0YWcgdHlwZXMuIFdyYXBwaW5nXG5cdCAqIHN0cmF0ZWd5IGZvdW5kIGluIGpRdWVyeSAmIGNvbXBvbmVudC9kb21pZnkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVN0cmluZ1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGVTdHJpbmcsIHJhdykge1xuXHQgIC8vIHRyeSBhIGNhY2hlIGhpdCBmaXJzdFxuXHQgIHZhciBjYWNoZUtleSA9IHJhdyA/IHRlbXBsYXRlU3RyaW5nIDogdGVtcGxhdGVTdHJpbmcudHJpbSgpO1xuXHQgIHZhciBoaXQgPSB0ZW1wbGF0ZUNhY2hlLmdldChjYWNoZUtleSk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdFxuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIHZhciB0YWdNYXRjaCA9IHRlbXBsYXRlU3RyaW5nLm1hdGNoKHRhZ1JFJDEpO1xuXHQgIHZhciBlbnRpdHlNYXRjaCA9IGVudGl0eVJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuXHQgIHZhciBjb21tZW50TWF0Y2ggPSBjb21tZW50UkUudGVzdCh0ZW1wbGF0ZVN0cmluZyk7XG5cdFxuXHQgIGlmICghdGFnTWF0Y2ggJiYgIWVudGl0eU1hdGNoICYmICFjb21tZW50TWF0Y2gpIHtcblx0ICAgIC8vIHRleHQgb25seSwgcmV0dXJuIGEgc2luZ2xlIHRleHQgbm9kZS5cblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGVtcGxhdGVTdHJpbmcpKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHRhZyA9IHRhZ01hdGNoICYmIHRhZ01hdGNoWzFdO1xuXHQgICAgdmFyIHdyYXAgPSBtYXBbdGFnXSB8fCBtYXAuZWZhdWx0O1xuXHQgICAgdmFyIGRlcHRoID0gd3JhcFswXTtcblx0ICAgIHZhciBwcmVmaXggPSB3cmFwWzFdO1xuXHQgICAgdmFyIHN1ZmZpeCA9IHdyYXBbMl07XG5cdCAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcblx0ICAgIG5vZGUuaW5uZXJIVE1MID0gcHJlZml4ICsgdGVtcGxhdGVTdHJpbmcgKyBzdWZmaXg7XG5cdCAgICB3aGlsZSAoZGVwdGgtLSkge1xuXHQgICAgICBub2RlID0gbm9kZS5sYXN0Q2hpbGQ7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNoaWxkO1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIHdoaWxlIChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCkge1xuXHQgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIXJhdykge1xuXHQgICAgdHJpbU5vZGUoZnJhZyk7XG5cdCAgfVxuXHQgIHRlbXBsYXRlQ2FjaGUucHV0KGNhY2hlS2V5LCBmcmFnKTtcblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSB0ZW1wbGF0ZSBub2RlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbm9kZVRvRnJhZ21lbnQobm9kZSkge1xuXHQgIC8vIGlmIGl0cyBhIHRlbXBsYXRlIHRhZyBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQsXG5cdCAgLy8gaXRzIGNvbnRlbnQgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LiBIb3dldmVyLCBpT1MgU2FmYXJpIGhhc1xuXHQgIC8vIGJ1ZyB3aGVuIHVzaW5nIGRpcmVjdGx5IGNsb25lZCB0ZW1wbGF0ZSBjb250ZW50IHdpdGggdG91Y2hcblx0ICAvLyBldmVudHMgYW5kIGNhbiBjYXVzZSBjcmFzaGVzIHdoZW4gdGhlIG5vZGVzIGFyZSByZW1vdmVkIGZyb20gRE9NLCBzbyB3ZVxuXHQgIC8vIGhhdmUgdG8gdHJlYXQgdGVtcGxhdGUgZWxlbWVudHMgYXMgc3RyaW5nIHRlbXBsYXRlcy4gKCMyODA1KVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuXHQgICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS5pbm5lckhUTUwpO1xuXHQgIH1cblx0ICAvLyBzY3JpcHQgdGVtcGxhdGVcblx0ICBpZiAobm9kZS50YWdOYW1lID09PSAnU0NSSVBUJykge1xuXHQgICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS50ZXh0Q29udGVudCk7XG5cdCAgfVxuXHQgIC8vIG5vcm1hbCBub2RlLCBjbG9uZSBpdCB0byBhdm9pZCBtdXRhdGluZyB0aGUgb3JpZ2luYWxcblx0ICB2YXIgY2xvbmVkTm9kZSA9IGNsb25lTm9kZShub2RlKTtcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICB2YXIgY2hpbGQ7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICB3aGlsZSAoY2hpbGQgPSBjbG9uZWROb2RlLmZpcnN0Q2hpbGQpIHtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgIH1cblx0ICB0cmltTm9kZShmcmFnKTtcblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0Ly8gVGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBTYWZhcmkgdGVtcGxhdGUgY2xvbmluZyBidWdcblx0Ly8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd3VnLmNnaT9pZD0xMzc3NTVcblx0dmFyIGhhc0Jyb2tlblRlbXBsYXRlID0gKGZ1bmN0aW9uICgpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmIChpbkJyb3dzZXIpIHtcblx0ICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBhLmlubmVySFRNTCA9ICc8dGVtcGxhdGU+MTwvdGVtcGxhdGU+Jztcblx0ICAgIHJldHVybiAhYS5jbG9uZU5vZGUodHJ1ZSkuZmlyc3RDaGlsZC5pbm5lckhUTUw7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdH0pKCk7XG5cdFxuXHQvLyBUZXN0IGZvciBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGNsb25lIGJ1Z1xuXHR2YXIgaGFzVGV4dGFyZWFDbG9uZUJ1ZyA9IChmdW5jdGlvbiAoKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAoaW5Ccm93c2VyKSB7XG5cdCAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG5cdCAgICB0LnBsYWNlaG9sZGVyID0gJ3QnO1xuXHQgICAgcmV0dXJuIHQuY2xvbmVOb2RlKHRydWUpLnZhbHVlID09PSAndCc7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdH0pKCk7XG5cdFxuXHQvKipcblx0ICogMS4gRGVhbCB3aXRoIFNhZmFyaSBjbG9uaW5nIG5lc3RlZCA8dGVtcGxhdGU+IGJ1ZyBieVxuXHQgKiAgICBtYW51YWxseSBjbG9uaW5nIGFsbCB0ZW1wbGF0ZSBpbnN0YW5jZXMuXG5cdCAqIDIuIERlYWwgd2l0aCBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZyBieSBzZXR0aW5nXG5cdCAqICAgIHRoZSBjb3JyZWN0IHZhbHVlIGFmdGVyIGNsb25pbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBub2RlXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjbG9uZU5vZGUobm9kZSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yQWxsKSB7XG5cdCAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUoKTtcblx0ICB9XG5cdCAgdmFyIHJlcyA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xuXHQgIHZhciBpLCBvcmlnaW5hbCwgY2xvbmVkO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChoYXNCcm9rZW5UZW1wbGF0ZSkge1xuXHQgICAgdmFyIHRlbXBDbG9uZSA9IHJlcztcblx0ICAgIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuXHQgICAgICBub2RlID0gbm9kZS5jb250ZW50O1xuXHQgICAgICB0ZW1wQ2xvbmUgPSByZXMuY29udGVudDtcblx0ICAgIH1cblx0ICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuXHQgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuXHQgICAgICBjbG9uZWQgPSB0ZW1wQ2xvbmUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcblx0ICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBjbG9uZWRbaV0ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoY2xvbmVOb2RlKG9yaWdpbmFsW2ldKSwgY2xvbmVkW2ldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaGFzVGV4dGFyZWFDbG9uZUJ1Zykge1xuXHQgICAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgICByZXMudmFsdWUgPSBub2RlLnZhbHVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG5cdCAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcblx0ICAgICAgICBjbG9uZWQgPSByZXMucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcblx0ICAgICAgICBpID0gY2xvbmVkLmxlbmd0aDtcblx0ICAgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgICBjbG9uZWRbaV0udmFsdWUgPSBvcmlnaW5hbFtpXS52YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbiBhbmQgbm9ybWFsaXplcyBpdCBpbnRvIGFcblx0ICogYSBEb2N1bWVudEZyYWdtZW50IHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBwYXJ0aWFsIG9yIGFcblx0ICogaW5zdGFuY2UgdGVtcGxhdGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdGVtcGxhdGVcblx0ICogICAgICAgIFBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlOlxuXHQgKiAgICAgICAgLSBEb2N1bWVudEZyYWdtZW50IG9iamVjdFxuXHQgKiAgICAgICAgLSBOb2RlIG9iamVjdCBvZiB0eXBlIFRlbXBsYXRlXG5cdCAqICAgICAgICAtIGlkIHNlbGVjdG9yOiAnI3NvbWUtdGVtcGxhdGUtaWQnXG5cdCAqICAgICAgICAtIHRlbXBsYXRlIHN0cmluZzogJzxkaXY+PHNwYW4+e3ttc2d9fTwvc3Bhbj48L2Rpdj4nXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvdWxkQ2xvbmVcblx0ICogQHBhcmFtIHtCb29sZWFufSByYXdcblx0ICogICAgICAgIGlubGluZSBIVE1MIGludGVycG9sYXRpb24uIERvIG5vdCBjaGVjayBmb3IgaWRcblx0ICogICAgICAgIHNlbGVjdG9yIGFuZCBrZWVwIHdoaXRlc3BhY2UgaW4gdGhlIHN0cmluZy5cblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudHx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgc2hvdWxkQ2xvbmUsIHJhdykge1xuXHQgIHZhciBub2RlLCBmcmFnO1xuXHRcblx0ICAvLyBpZiB0aGUgdGVtcGxhdGUgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LFxuXHQgIC8vIGRvIG5vdGhpbmdcblx0ICBpZiAoaXNGcmFnbWVudCh0ZW1wbGF0ZSkpIHtcblx0ICAgIHRyaW1Ob2RlKHRlbXBsYXRlKTtcblx0ICAgIHJldHVybiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZSh0ZW1wbGF0ZSkgOiB0ZW1wbGF0ZTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgdGVtcGxhdGUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAvLyBpZCBzZWxlY3RvclxuXHQgICAgaWYgKCFyYXcgJiYgdGVtcGxhdGUuY2hhckF0KDApID09PSAnIycpIHtcblx0ICAgICAgLy8gaWQgc2VsZWN0b3IgY2FuIGJlIGNhY2hlZCB0b29cblx0ICAgICAgZnJhZyA9IGlkU2VsZWN0b3JDYWNoZS5nZXQodGVtcGxhdGUpO1xuXHQgICAgICBpZiAoIWZyYWcpIHtcblx0ICAgICAgICBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGUuc2xpY2UoMSkpO1xuXHQgICAgICAgIGlmIChub2RlKSB7XG5cdCAgICAgICAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQobm9kZSk7XG5cdCAgICAgICAgICAvLyBzYXZlIHNlbGVjdG9yIHRvIGNhY2hlXG5cdCAgICAgICAgICBpZFNlbGVjdG9yQ2FjaGUucHV0KHRlbXBsYXRlLCBmcmFnKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vcm1hbCBzdHJpbmcgdGVtcGxhdGVcblx0ICAgICAgZnJhZyA9IHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGUsIHJhdyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5ub2RlVHlwZSkge1xuXHQgICAgLy8gYSBkaXJlY3Qgbm9kZVxuXHQgICAgZnJhZyA9IG5vZGVUb0ZyYWdtZW50KHRlbXBsYXRlKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmcmFnICYmIHNob3VsZENsb25lID8gY2xvbmVOb2RlKGZyYWcpIDogZnJhZztcblx0fVxuXHRcblx0dmFyIHRlbXBsYXRlID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgY2xvbmVOb2RlOiBjbG9uZU5vZGUsXG5cdCAgcGFyc2VUZW1wbGF0ZTogcGFyc2VUZW1wbGF0ZVxuXHR9KTtcblx0XG5cdHZhciBodG1sID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gYSBjb21tZW50IG5vZGUgbWVhbnMgdGhpcyBpcyBhIGJpbmRpbmcgZm9yXG5cdCAgICAvLyB7e3sgaW5saW5lIHVuZXNjYXBlZCBodG1sIH19fVxuXHQgICAgaWYgKHRoaXMuZWwubm9kZVR5cGUgPT09IDgpIHtcblx0ICAgICAgLy8gaG9sZCBub2Rlc1xuXHQgICAgICB0aGlzLm5vZGVzID0gW107XG5cdCAgICAgIC8vIHJlcGxhY2UgdGhlIHBsYWNlaG9sZGVyIHdpdGggcHJvcGVyIGFuY2hvclxuXHQgICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1odG1sJyk7XG5cdCAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgICBpZiAodGhpcy5ub2Rlcykge1xuXHQgICAgICB0aGlzLnN3YXAodmFsdWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSB2YWx1ZTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBzd2FwOiBmdW5jdGlvbiBzd2FwKHZhbHVlKSB7XG5cdCAgICAvLyByZW1vdmUgb2xkIG5vZGVzXG5cdCAgICB2YXIgaSA9IHRoaXMubm9kZXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICByZW1vdmUodGhpcy5ub2Rlc1tpXSk7XG5cdCAgICB9XG5cdCAgICAvLyBjb252ZXJ0IG5ldyB2YWx1ZSB0byBhIGZyYWdtZW50XG5cdCAgICAvLyBkbyBub3QgYXR0ZW1wdCB0byByZXRyaWV2ZSBmcm9tIGlkIHNlbGVjdG9yXG5cdCAgICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUsIHRydWUpO1xuXHQgICAgLy8gc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGVzZSBub2RlcyBzbyB3ZSBjYW4gcmVtb3ZlIGxhdGVyXG5cdCAgICB0aGlzLm5vZGVzID0gdG9BcnJheShmcmFnLmNoaWxkTm9kZXMpO1xuXHQgICAgYmVmb3JlKGZyYWcsIHRoaXMuYW5jaG9yKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWJzdHJhY3Rpb24gZm9yIGEgcGFydGlhbGx5LWNvbXBpbGVkIGZyYWdtZW50LlxuXHQgKiBDYW4gb3B0aW9uYWxseSBjb21waWxlIGNvbnRlbnQgd2l0aCBhIGNoaWxkIHNjb3BlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IFtwYXJlbnRGcmFnXVxuXHQgKi9cblx0ZnVuY3Rpb24gRnJhZ21lbnQobGlua2VyLCB2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcblx0ICB0aGlzLmNoaWxkcmVuID0gW107XG5cdCAgdGhpcy5jaGlsZEZyYWdzID0gW107XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHRoaXMuc2NvcGUgPSBzY29wZTtcblx0ICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG5cdCAgdGhpcy5wYXJlbnRGcmFnID0gcGFyZW50RnJhZztcblx0ICBpZiAocGFyZW50RnJhZykge1xuXHQgICAgcGFyZW50RnJhZy5jaGlsZEZyYWdzLnB1c2godGhpcyk7XG5cdCAgfVxuXHQgIHRoaXMudW5saW5rID0gbGlua2VyKHZtLCBmcmFnLCBob3N0LCBzY29wZSwgdGhpcyk7XG5cdCAgdmFyIHNpbmdsZSA9IHRoaXMuc2luZ2xlID0gZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJlxuXHQgIC8vIGRvIG5vdCBnbyBzaW5nbGUgbW9kZSBpZiB0aGUgb25seSBub2RlIGlzIGFuIGFuY2hvclxuXHQgICFmcmFnLmNoaWxkTm9kZXNbMF0uX192X2FuY2hvcjtcblx0ICBpZiAoc2luZ2xlKSB7XG5cdCAgICB0aGlzLm5vZGUgPSBmcmFnLmNoaWxkTm9kZXNbMF07XG5cdCAgICB0aGlzLmJlZm9yZSA9IHNpbmdsZUJlZm9yZTtcblx0ICAgIHRoaXMucmVtb3ZlID0gc2luZ2xlUmVtb3ZlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLm5vZGUgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LXN0YXJ0Jyk7XG5cdCAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtZW5kJyk7XG5cdCAgICB0aGlzLmZyYWcgPSBmcmFnO1xuXHQgICAgcHJlcGVuZCh0aGlzLm5vZGUsIGZyYWcpO1xuXHQgICAgZnJhZy5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG5cdCAgICB0aGlzLmJlZm9yZSA9IG11bHRpQmVmb3JlO1xuXHQgICAgdGhpcy5yZW1vdmUgPSBtdWx0aVJlbW92ZTtcblx0ICB9XG5cdCAgdGhpcy5ub2RlLl9fdl9mcmFnID0gdGhpcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENhbGwgYXR0YWNoL2RldGFjaCBmb3IgYWxsIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpblxuXHQgKiB0aGlzIGZyYWdtZW50LiBBbHNvIGRvIHNvIHJlY3Vyc2l2ZWx5IGZvciBhbGwgY2hpbGRcblx0ICogZnJhZ21lbnRzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG5cdCAqL1xuXHRcblx0RnJhZ21lbnQucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcblx0ICB2YXIgaSwgbDtcblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdGhpcy5jaGlsZEZyYWdzW2ldLmNhbGxIb29rKGhvb2spO1xuXHQgIH1cblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGhvb2sodGhpcy5jaGlsZHJlbltpXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzaW5nbGVCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuXHQgIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2UgPyBiZWZvcmVXaXRoVHJhbnNpdGlvbiA6IGJlZm9yZTtcblx0ICBtZXRob2QodGhpcy5ub2RlLCB0YXJnZXQsIHRoaXMudm0pO1xuXHQgIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG5cdCAgICB0aGlzLmNhbGxIb29rKGF0dGFjaCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGZyYWdtZW50LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2luZ2xlUmVtb3ZlKCkge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcblx0ICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG5cdCAgcmVtb3ZlV2l0aFRyYW5zaXRpb24odGhpcy5ub2RlLCB0aGlzLnZtLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuXHQgICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XG5cdCAgICB9XG5cdCAgICBzZWxmLmRlc3Ryb3koKTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtdWx0aUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG5cdCAgdmFyIHZtID0gdGhpcy52bTtcblx0ICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG5cdCAgbWFwTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICBtZXRob2Qobm9kZSwgdGFyZ2V0LCB2bSk7XG5cdCAgfSk7XG5cdCAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcblx0ICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZnJhZ21lbnQsIG11bHRpLW5vZGVzIHZlcnNpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtdWx0aVJlbW92ZSgpIHtcblx0ICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcblx0ICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuXHQgIHJlbW92ZU5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCB0aGlzLnZtLCB0aGlzLmZyYWcsIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG5cdCAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcblx0ICAgIH1cblx0ICAgIHNlbGYuZGVzdHJveSgpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJlcGFyZSB0aGUgZnJhZ21lbnQgZm9yIHJlbW92YWwuXG5cdCAqL1xuXHRcblx0RnJhZ21lbnQucHJvdG90eXBlLmJlZm9yZVJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgaSwgbDtcblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgLy8gY2FsbCB0aGUgc2FtZSBtZXRob2QgcmVjdXJzaXZlbHkgb24gY2hpbGRcblx0ICAgIC8vIGZyYWdtZW50cywgZGVwdGgtZmlyc3Rcblx0ICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5iZWZvcmVSZW1vdmUoZmFsc2UpO1xuXHQgIH1cblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIC8vIENhbGwgZGVzdHJveSBmb3IgYWxsIGNvbnRhaW5lZCBpbnN0YW5jZXMsXG5cdCAgICAvLyB3aXRoIHJlbW92ZTpmYWxzZSBhbmQgZGVmZXI6dHJ1ZS5cblx0ICAgIC8vIERlZmVyIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIG5lZWQgdG9cblx0ICAgIC8vIGtlZXAgdGhlIGNoaWxkcmVuIHRvIGNhbGwgZGV0YWNoIGhvb2tzXG5cdCAgICAvLyBvbiB0aGVtLlxuXHQgICAgdGhpcy5jaGlsZHJlbltpXS4kZGVzdHJveShmYWxzZSwgdHJ1ZSk7XG5cdCAgfVxuXHQgIHZhciBkaXJzID0gdGhpcy51bmxpbmsuZGlycztcblx0ICBmb3IgKGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIC8vIGRpc2FibGUgdGhlIHdhdGNoZXJzIG9uIGFsbCB0aGUgZGlyZWN0aXZlc1xuXHQgICAgLy8gc28gdGhhdCB0aGUgcmVuZGVyZWQgY29udGVudCBzdGF5cyB0aGUgc2FtZVxuXHQgICAgLy8gZHVyaW5nIHJlbW92YWwuXG5cdCAgICBkaXJzW2ldLl93YXRjaGVyICYmIGRpcnNbaV0uX3dhdGNoZXIudGVhcmRvd24oKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRGVzdHJveSB0aGUgZnJhZ21lbnQuXG5cdCAqL1xuXHRcblx0RnJhZ21lbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMucGFyZW50RnJhZykge1xuXHQgICAgdGhpcy5wYXJlbnRGcmFnLmNoaWxkRnJhZ3MuJHJlbW92ZSh0aGlzKTtcblx0ICB9XG5cdCAgdGhpcy5ub2RlLl9fdl9mcmFnID0gbnVsbDtcblx0ICB0aGlzLnVubGluaygpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYXR0YWNoIGhvb2sgZm9yIGEgVnVlIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhdHRhY2goY2hpbGQpIHtcblx0ICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgIGNoaWxkLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDYWxsIGRldGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGV0YWNoKGNoaWxkKSB7XG5cdCAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgbGlua2VyQ2FjaGUgPSBuZXcgQ2FjaGUoNTAwMCk7XG5cdFxuXHQvKipcblx0ICogQSBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBhXG5cdCAqIGZyYWdtZW50LiBDYWNoZXMgdGhlIGNvbXBpbGVkIGxpbmtlciBpZiBwb3NzaWJsZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd9IGVsXG5cdCAqL1xuXHRmdW5jdGlvbiBGcmFnbWVudEZhY3Rvcnkodm0sIGVsKSB7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHZhciB0ZW1wbGF0ZTtcblx0ICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgZWwgPT09ICdzdHJpbmcnO1xuXHQgIGlmIChpc1N0cmluZyB8fCBpc1RlbXBsYXRlKGVsKSAmJiAhZWwuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgIHRlbXBsYXRlID0gcGFyc2VUZW1wbGF0ZShlbCwgdHJ1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgICAgdGVtcGxhdGUuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0ICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cdCAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQsIGJ1dCBvbmx5IGZvciBjb21wb25lbnRzXG5cdCAgdmFyIGxpbmtlcjtcblx0ICB2YXIgY2lkID0gdm0uY29uc3RydWN0b3IuY2lkO1xuXHQgIGlmIChjaWQgPiAwKSB7XG5cdCAgICB2YXIgY2FjaGVJZCA9IGNpZCArIChpc1N0cmluZyA/IGVsIDogZ2V0T3V0ZXJIVE1MKGVsKSk7XG5cdCAgICBsaW5rZXIgPSBsaW5rZXJDYWNoZS5nZXQoY2FjaGVJZCk7XG5cdCAgICBpZiAoIWxpbmtlcikge1xuXHQgICAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG5cdCAgICAgIGxpbmtlckNhY2hlLnB1dChjYWNoZUlkLCBsaW5rZXIpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG5cdCAgfVxuXHQgIHRoaXMubGlua2VyID0gbGlua2VyO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGEgZnJhZ21lbnQgaW5zdGFuY2Ugd2l0aCBnaXZlbiBob3N0IGFuZCBzY29wZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IGhvc3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IHNjb3BlXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IHBhcmVudEZyYWdcblx0ICovXG5cdFxuXHRGcmFnbWVudEZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuXHQgIHZhciBmcmFnID0gY2xvbmVOb2RlKHRoaXMudGVtcGxhdGUpO1xuXHQgIHJldHVybiBuZXcgRnJhZ21lbnQodGhpcy5saW5rZXIsIHRoaXMudm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKTtcblx0fTtcblx0XG5cdHZhciBPTiA9IDcwMDtcblx0dmFyIE1PREVMID0gODAwO1xuXHR2YXIgQklORCA9IDg1MDtcblx0dmFyIFRSQU5TSVRJT04gPSAxMTAwO1xuXHR2YXIgRUwgPSAxNTAwO1xuXHR2YXIgQ09NUE9ORU5UID0gMTUwMDtcblx0dmFyIFBBUlRJQUwgPSAxNzUwO1xuXHR2YXIgSUYgPSAyMTAwO1xuXHR2YXIgRk9SID0gMjIwMDtcblx0dmFyIFNMT1QgPSAyMzAwO1xuXHRcblx0dmFyIHVpZCQzID0gMDtcblx0XG5cdHZhciB2Rm9yID0ge1xuXHRcblx0ICBwcmlvcml0eTogRk9SLFxuXHQgIHRlcm1pbmFsOiB0cnVlLFxuXHRcblx0ICBwYXJhbXM6IFsndHJhY2stYnknLCAnc3RhZ2dlcicsICdlbnRlci1zdGFnZ2VyJywgJ2xlYXZlLXN0YWdnZXInXSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIHN1cHBvcnQgXCJpdGVtIGluL29mIGl0ZW1zXCIgc3ludGF4XG5cdCAgICB2YXIgaW5NYXRjaCA9IHRoaXMuZXhwcmVzc2lvbi5tYXRjaCgvKC4qKSAoPzppbnxvZikgKC4qKS8pO1xuXHQgICAgaWYgKGluTWF0Y2gpIHtcblx0ICAgICAgdmFyIGl0TWF0Y2ggPSBpbk1hdGNoWzFdLm1hdGNoKC9cXCgoLiopLCguKilcXCkvKTtcblx0ICAgICAgaWYgKGl0TWF0Y2gpIHtcblx0ICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRNYXRjaFsxXS50cmltKCk7XG5cdCAgICAgICAgdGhpcy5hbGlhcyA9IGl0TWF0Y2hbMl0udHJpbSgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmV4cHJlc3Npb24gPSBpbk1hdGNoWzJdO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghdGhpcy5hbGlhcykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdi1mb3IgZXhwcmVzc2lvbiBcIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2FsaWFzIGlzIHJlcXVpcmVkLicsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gdWlkIGFzIGEgY2FjaGUgaWRlbnRpZmllclxuXHQgICAgdGhpcy5pZCA9ICdfX3YtZm9yX18nICsgKyt1aWQkMztcblx0XG5cdCAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGFuIG9wdGlvbiBsaXN0LFxuXHQgICAgLy8gc28gdGhhdCB3ZSBrbm93IGlmIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSA8c2VsZWN0PidzXG5cdCAgICAvLyB2LW1vZGVsIHdoZW4gdGhlIG9wdGlvbiBsaXN0IGhhcyBjaGFuZ2VkLlxuXHQgICAgLy8gYmVjYXVzZSB2LW1vZGVsIGhhcyBhIGxvd2VyIHByaW9yaXR5IHRoYW4gdi1mb3IsXG5cdCAgICAvLyB0aGUgdi1tb2RlbCBpcyBub3QgYm91bmQgaGVyZSB5ZXQsIHNvIHdlIGhhdmUgdG9cblx0ICAgIC8vIHJldHJpdmUgaXQgaW4gdGhlIGFjdHVhbCB1cGRhdGVNb2RlbCgpIGZ1bmN0aW9uLlxuXHQgICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcblx0ICAgIHRoaXMuaXNPcHRpb24gPSAodGFnID09PSAnT1BUSU9OJyB8fCB0YWcgPT09ICdPUFRHUk9VUCcpICYmIHRoaXMuZWwucGFyZW50Tm9kZS50YWdOYW1lID09PSAnU0VMRUNUJztcblx0XG5cdCAgICAvLyBzZXR1cCBhbmNob3Igbm9kZXNcblx0ICAgIHRoaXMuc3RhcnQgPSBjcmVhdGVBbmNob3IoJ3YtZm9yLXN0YXJ0Jyk7XG5cdCAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcigndi1mb3ItZW5kJyk7XG5cdCAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuZW5kKTtcblx0ICAgIGJlZm9yZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG5cdFxuXHQgICAgLy8gY2FjaGVcblx0ICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0ICAgIC8vIGZyYWdtZW50IGZhY3Rvcnlcblx0ICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZGF0YSkge1xuXHQgICAgdGhpcy5kaWZmKGRhdGEpO1xuXHQgICAgdGhpcy51cGRhdGVSZWYoKTtcblx0ICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBEaWZmLCBiYXNlZCBvbiBuZXcgZGF0YSBhbmQgb2xkIGRhdGEsIGRldGVybWluZSB0aGVcblx0ICAgKiBtaW5pbXVtIGFtb3VudCBvZiBET00gbWFuaXB1bGF0aW9ucyBuZWVkZWQgdG8gbWFrZSB0aGVcblx0ICAgKiBET00gcmVmbGVjdCB0aGUgbmV3IGRhdGEgQXJyYXkuXG5cdCAgICpcblx0ICAgKiBUaGUgYWxnb3JpdGhtIGRpZmZzIHRoZSBuZXcgZGF0YSBBcnJheSBieSBzdG9yaW5nIGFcblx0ICAgKiBoaWRkZW4gcmVmZXJlbmNlIHRvIGFuIG93bmVyIHZtIGluc3RhbmNlIG9uIHByZXZpb3VzbHlcblx0ICAgKiBzZWVuIGRhdGEuIFRoaXMgYWxsb3dzIHVzIHRvIGFjaGlldmUgTyhuKSB3aGljaCBpc1xuXHQgICAqIGJldHRlciB0aGFuIGEgbGV2ZW5zaHRlaW4gZGlzdGFuY2UgYmFzZWQgYWxnb3JpdGhtLFxuXHQgICAqIHdoaWNoIGlzIE8obSAqIG4pLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtBcnJheX0gZGF0YVxuXHQgICAqL1xuXHRcblx0ICBkaWZmOiBmdW5jdGlvbiBkaWZmKGRhdGEpIHtcblx0ICAgIC8vIGNoZWNrIGlmIHRoZSBBcnJheSB3YXMgY29udmVydGVkIGZyb20gYW4gT2JqZWN0XG5cdCAgICB2YXIgaXRlbSA9IGRhdGFbMF07XG5cdCAgICB2YXIgY29udmVydGVkRnJvbU9iamVjdCA9IHRoaXMuZnJvbU9iamVjdCA9IGlzT2JqZWN0KGl0ZW0pICYmIGhhc093bihpdGVtLCAnJGtleScpICYmIGhhc093bihpdGVtLCAnJHZhbHVlJyk7XG5cdFxuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIG9sZEZyYWdzID0gdGhpcy5mcmFncztcblx0ICAgIHZhciBmcmFncyA9IHRoaXMuZnJhZ3MgPSBuZXcgQXJyYXkoZGF0YS5sZW5ndGgpO1xuXHQgICAgdmFyIGFsaWFzID0gdGhpcy5hbGlhcztcblx0ICAgIHZhciBpdGVyYXRvciA9IHRoaXMuaXRlcmF0b3I7XG5cdCAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0O1xuXHQgICAgdmFyIGVuZCA9IHRoaXMuZW5kO1xuXHQgICAgdmFyIGluRG9jdW1lbnQgPSBpbkRvYyhzdGFydCk7XG5cdCAgICB2YXIgaW5pdCA9ICFvbGRGcmFncztcblx0ICAgIHZhciBpLCBsLCBmcmFnLCBrZXksIHZhbHVlLCBwcmltaXRpdmU7XG5cdFxuXHQgICAgLy8gRmlyc3QgcGFzcywgZ28gdGhyb3VnaCB0aGUgbmV3IEFycmF5IGFuZCBmaWxsIHVwXG5cdCAgICAvLyB0aGUgbmV3IGZyYWdzIGFycmF5LiBJZiBhIHBpZWNlIG9mIGRhdGEgaGFzIGEgY2FjaGVkXG5cdCAgICAvLyBpbnN0YW5jZSBmb3IgaXQsIHdlIHJldXNlIGl0LiBPdGhlcndpc2UgYnVpbGQgYSBuZXdcblx0ICAgIC8vIGluc3RhbmNlLlxuXHQgICAgZm9yIChpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGl0ZW0gPSBkYXRhW2ldO1xuXHQgICAgICBrZXkgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4ka2V5IDogbnVsbDtcblx0ICAgICAgdmFsdWUgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4kdmFsdWUgOiBpdGVtO1xuXHQgICAgICBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgICBmcmFnID0gIWluaXQgJiYgdGhpcy5nZXRDYWNoZWRGcmFnKHZhbHVlLCBpLCBrZXkpO1xuXHQgICAgICBpZiAoZnJhZykge1xuXHQgICAgICAgIC8vIHJldXNhYmxlIGZyYWdtZW50XG5cdCAgICAgICAgZnJhZy5yZXVzZWQgPSB0cnVlO1xuXHQgICAgICAgIC8vIHVwZGF0ZSAkaW5kZXhcblx0ICAgICAgICBmcmFnLnNjb3BlLiRpbmRleCA9IGk7XG5cdCAgICAgICAgLy8gdXBkYXRlICRrZXlcblx0ICAgICAgICBpZiAoa2V5KSB7XG5cdCAgICAgICAgICBmcmFnLnNjb3BlLiRrZXkgPSBrZXk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHVwZGF0ZSBpdGVyYXRvclxuXHQgICAgICAgIGlmIChpdGVyYXRvcikge1xuXHQgICAgICAgICAgZnJhZy5zY29wZVtpdGVyYXRvcl0gPSBrZXkgIT09IG51bGwgPyBrZXkgOiBpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyB1cGRhdGUgZGF0YSBmb3IgdHJhY2stYnksIG9iamVjdCByZXBlYXQgJlxuXHQgICAgICAgIC8vIHByaW1pdGl2ZSB2YWx1ZXMuXG5cdCAgICAgICAgaWYgKHRyYWNrQnlLZXkgfHwgY29udmVydGVkRnJvbU9iamVjdCB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgZnJhZy5zY29wZVthbGlhc10gPSB2YWx1ZTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBuZXcgaXNudGFuY2Vcblx0ICAgICAgICBmcmFnID0gdGhpcy5jcmVhdGUodmFsdWUsIGFsaWFzLCBpLCBrZXkpO1xuXHQgICAgICAgIGZyYWcuZnJlc2ggPSAhaW5pdDtcblx0ICAgICAgfVxuXHQgICAgICBmcmFnc1tpXSA9IGZyYWc7XG5cdCAgICAgIGlmIChpbml0KSB7XG5cdCAgICAgICAgZnJhZy5iZWZvcmUoZW5kKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIHdlJ3JlIGRvbmUgZm9yIHRoZSBpbml0aWFsIHJlbmRlci5cblx0ICAgIGlmIChpbml0KSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBTZWNvbmQgcGFzcywgZ28gdGhyb3VnaCB0aGUgb2xkIGZyYWdtZW50cyBhbmRcblx0ICAgIC8vIGRlc3Ryb3kgdGhvc2Ugd2hvIGFyZSBub3QgcmV1c2VkIChhbmQgcmVtb3ZlIHRoZW1cblx0ICAgIC8vIGZyb20gY2FjaGUpXG5cdCAgICB2YXIgcmVtb3ZhbEluZGV4ID0gMDtcblx0ICAgIHZhciB0b3RhbFJlbW92ZWQgPSBvbGRGcmFncy5sZW5ndGggLSBmcmFncy5sZW5ndGg7XG5cdCAgICAvLyB3aGVuIHJlbW92aW5nIGEgbGFyZ2UgbnVtYmVyIG9mIGZyYWdtZW50cywgd2F0Y2hlciByZW1vdmFsXG5cdCAgICAvLyB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGJvdHRsZW5lY2ssIHNvIHdlIGJhdGNoIHRoZSB3YXRjaGVyXG5cdCAgICAvLyByZW1vdmFscyBpbnRvIGEgc2luZ2xlIGZpbHRlciBjYWxsIVxuXHQgICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gdHJ1ZTtcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBvbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgZnJhZyA9IG9sZEZyYWdzW2ldO1xuXHQgICAgICBpZiAoIWZyYWcucmV1c2VkKSB7XG5cdCAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlKGZyYWcsIHJlbW92YWxJbmRleCsrLCB0b3RhbFJlbW92ZWQsIGluRG9jdW1lbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcblx0ICAgIGlmIChyZW1vdmFsSW5kZXgpIHtcblx0ICAgICAgdGhpcy52bS5fd2F0Y2hlcnMgPSB0aGlzLnZtLl93YXRjaGVycy5maWx0ZXIoZnVuY3Rpb24gKHcpIHtcblx0ICAgICAgICByZXR1cm4gdy5hY3RpdmU7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEZpbmFsIHBhc3MsIG1vdmUvaW5zZXJ0IG5ldyBmcmFnbWVudHMgaW50byB0aGVcblx0ICAgIC8vIHJpZ2h0IHBsYWNlLlxuXHQgICAgdmFyIHRhcmdldFByZXYsIHByZXZFbCwgY3VycmVudFByZXY7XG5cdCAgICB2YXIgaW5zZXJ0aW9uSW5kZXggPSAwO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IGZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBmcmFnID0gZnJhZ3NbaV07XG5cdCAgICAgIC8vIHRoaXMgaXMgdGhlIGZyYWcgdGhhdCB3ZSBzaG91bGQgYmUgYWZ0ZXJcblx0ICAgICAgdGFyZ2V0UHJldiA9IGZyYWdzW2kgLSAxXTtcblx0ICAgICAgcHJldkVsID0gdGFyZ2V0UHJldiA/IHRhcmdldFByZXYuc3RhZ2dlckNiID8gdGFyZ2V0UHJldi5zdGFnZ2VyQW5jaG9yIDogdGFyZ2V0UHJldi5lbmQgfHwgdGFyZ2V0UHJldi5ub2RlIDogc3RhcnQ7XG5cdCAgICAgIGlmIChmcmFnLnJldXNlZCAmJiAhZnJhZy5zdGFnZ2VyQ2IpIHtcblx0ICAgICAgICBjdXJyZW50UHJldiA9IGZpbmRQcmV2RnJhZyhmcmFnLCBzdGFydCwgdGhpcy5pZCk7XG5cdCAgICAgICAgaWYgKGN1cnJlbnRQcmV2ICE9PSB0YXJnZXRQcmV2ICYmICghY3VycmVudFByZXYgfHxcblx0ICAgICAgICAvLyBvcHRpbWl6YXRpb24gZm9yIG1vdmluZyBhIHNpbmdsZSBpdGVtLlxuXHQgICAgICAgIC8vIHRoYW5rcyB0byBzdWdnZXN0aW9ucyBieSBAbGl2b3JhcyBpbiAjMTgwN1xuXHQgICAgICAgIGZpbmRQcmV2RnJhZyhjdXJyZW50UHJldiwgc3RhcnQsIHRoaXMuaWQpICE9PSB0YXJnZXRQcmV2KSkge1xuXHQgICAgICAgICAgdGhpcy5tb3ZlKGZyYWcsIHByZXZFbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIG5ldyBpbnN0YW5jZSwgb3Igc3RpbGwgaW4gc3RhZ2dlci5cblx0ICAgICAgICAvLyBpbnNlcnQgd2l0aCB1cGRhdGVkIHN0YWdnZXIgaW5kZXguXG5cdCAgICAgICAgdGhpcy5pbnNlcnQoZnJhZywgaW5zZXJ0aW9uSW5kZXgrKywgcHJldkVsLCBpbkRvY3VtZW50KTtcblx0ICAgICAgfVxuXHQgICAgICBmcmFnLnJldXNlZCA9IGZyYWcuZnJlc2ggPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYSBuZXcgZnJhZ21lbnQgaW5zdGFuY2UuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG5cdCAgICogQHJldHVybiB7RnJhZ21lbnR9XG5cdCAgICovXG5cdFxuXHQgIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKHZhbHVlLCBhbGlhcywgaW5kZXgsIGtleSkge1xuXHQgICAgdmFyIGhvc3QgPSB0aGlzLl9ob3N0O1xuXHQgICAgLy8gY3JlYXRlIGl0ZXJhdGlvbiBzY29wZVxuXHQgICAgdmFyIHBhcmVudFNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bTtcblx0ICAgIHZhciBzY29wZSA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUpO1xuXHQgICAgLy8gcmVmIGhvbGRlciBmb3IgdGhlIHNjb3BlXG5cdCAgICBzY29wZS4kcmVmcyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJHJlZnMpO1xuXHQgICAgc2NvcGUuJGVscyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJGVscyk7XG5cdCAgICAvLyBtYWtlIHN1cmUgcG9pbnQgJHBhcmVudCB0byBwYXJlbnQgc2NvcGVcblx0ICAgIHNjb3BlLiRwYXJlbnQgPSBwYXJlbnRTY29wZTtcblx0ICAgIC8vIGZvciB0d28td2F5IGJpbmRpbmcgb24gYWxpYXNcblx0ICAgIHNjb3BlLiRmb3JDb250ZXh0ID0gdGhpcztcblx0ICAgIC8vIGRlZmluZSBzY29wZSBwcm9wZXJ0aWVzXG5cdCAgICAvLyBpbXBvcnRhbnQ6IGRlZmluZSB0aGUgc2NvcGUgYWxpYXMgd2l0aG91dCBmb3JjZWQgY29udmVyc2lvblxuXHQgICAgLy8gc28gdGhhdCBmcm96ZW4gZGF0YSBzdHJ1Y3R1cmVzIHJlbWFpbiBub24tcmVhY3RpdmUuXG5cdCAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCBhbGlhcywgdmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRpbmRleCcsIGluZGV4KTtcblx0ICAgIGlmIChrZXkpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICcka2V5Jywga2V5KTtcblx0ICAgIH0gZWxzZSBpZiAoc2NvcGUuJGtleSkge1xuXHQgICAgICAvLyBhdm9pZCBhY2NpZGVudGFsIGZhbGxiYWNrXG5cdCAgICAgIGRlZihzY29wZSwgJyRrZXknLCBudWxsKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLml0ZXJhdG9yKSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCB0aGlzLml0ZXJhdG9yLCBrZXkgIT09IG51bGwgPyBrZXkgOiBpbmRleCk7XG5cdCAgICB9XG5cdCAgICB2YXIgZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgZnJhZy5mb3JJZCA9IHRoaXMuaWQ7XG5cdCAgICB0aGlzLmNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSk7XG5cdCAgICByZXR1cm4gZnJhZztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBVcGRhdGUgdGhlIHYtcmVmIG9uIG93bmVyIHZtLlxuXHQgICAqL1xuXHRcblx0ICB1cGRhdGVSZWY6IGZ1bmN0aW9uIHVwZGF0ZVJlZigpIHtcblx0ICAgIHZhciByZWYgPSB0aGlzLmRlc2NyaXB0b3IucmVmO1xuXHQgICAgaWYgKCFyZWYpIHJldHVybjtcblx0ICAgIHZhciBoYXNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzO1xuXHQgICAgdmFyIHJlZnM7XG5cdCAgICBpZiAoIXRoaXMuZnJvbU9iamVjdCkge1xuXHQgICAgICByZWZzID0gdGhpcy5mcmFncy5tYXAoZmluZFZtRnJvbUZyYWcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVmcyA9IHt9O1xuXHQgICAgICB0aGlzLmZyYWdzLmZvckVhY2goZnVuY3Rpb24gKGZyYWcpIHtcblx0ICAgICAgICByZWZzW2ZyYWcuc2NvcGUuJGtleV0gPSBmaW5kVm1Gcm9tRnJhZyhmcmFnKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICBoYXNoW3JlZl0gPSByZWZzO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEZvciBvcHRpb24gbGlzdHMsIHVwZGF0ZSB0aGUgY29udGFpbmluZyB2LW1vZGVsIG9uXG5cdCAgICogcGFyZW50IDxzZWxlY3Q+LlxuXHQgICAqL1xuXHRcblx0ICB1cGRhdGVNb2RlbDogZnVuY3Rpb24gdXBkYXRlTW9kZWwoKSB7XG5cdCAgICBpZiAodGhpcy5pc09wdGlvbikge1xuXHQgICAgICB2YXIgcGFyZW50ID0gdGhpcy5zdGFydC5wYXJlbnROb2RlO1xuXHQgICAgICB2YXIgbW9kZWwgPSBwYXJlbnQgJiYgcGFyZW50Ll9fdl9tb2RlbDtcblx0ICAgICAgaWYgKG1vZGVsKSB7XG5cdCAgICAgICAgbW9kZWwuZm9yY2VVcGRhdGUoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydCBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jdW1lbnRcblx0ICAgKi9cblx0XG5cdCAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoZnJhZywgaW5kZXgsIHByZXZFbCwgaW5Eb2N1bWVudCkge1xuXHQgICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgbnVsbCwgJ2VudGVyJyk7XG5cdCAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG5cdCAgICAgIC8vIGNyZWF0ZSBhbiBhbmNob3IgYW5kIGluc2VydCBpdCBzeW5jaHJvbm91c2x5LFxuXHQgICAgICAvLyBzbyB0aGF0IHdlIGNhbiByZXNvbHZlIHRoZSBjb3JyZWN0IG9yZGVyIHdpdGhvdXRcblx0ICAgICAgLy8gd29ycnlpbmcgYWJvdXQgc29tZSBlbGVtZW50cyBub3QgaW5zZXJ0ZWQgeWV0XG5cdCAgICAgIHZhciBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3I7XG5cdCAgICAgIGlmICghYW5jaG9yKSB7XG5cdCAgICAgICAgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yID0gY3JlYXRlQW5jaG9yKCdzdGFnZ2VyLWFuY2hvcicpO1xuXHQgICAgICAgIGFuY2hvci5fX3ZfZnJhZyA9IGZyYWc7XG5cdCAgICAgIH1cblx0ICAgICAgYWZ0ZXIoYW5jaG9yLCBwcmV2RWwpO1xuXHQgICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICAgICAgZnJhZy5iZWZvcmUoYW5jaG9yKTtcblx0ICAgICAgICByZW1vdmUoYW5jaG9yKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHRhcmdldCA9IHByZXZFbC5uZXh0U2libGluZztcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICghdGFyZ2V0KSB7XG5cdCAgICAgICAgLy8gcmVzZXQgZW5kIGFuY2hvciBwb3NpdGlvbiBpbiBjYXNlIHRoZSBwb3NpdGlvbiB3YXMgbWVzc2VkIHVwXG5cdCAgICAgICAgLy8gYnkgYW4gZXh0ZXJuYWwgZHJhZy1uLWRyb3AgbGlicmFyeS5cblx0ICAgICAgICBhZnRlcih0aGlzLmVuZCwgcHJldkVsKTtcblx0ICAgICAgICB0YXJnZXQgPSB0aGlzLmVuZDtcblx0ICAgICAgfVxuXHQgICAgICBmcmFnLmJlZm9yZSh0YXJnZXQpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG5cdCAgICovXG5cdFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGZyYWcsIGluZGV4LCB0b3RhbCwgaW5Eb2N1bWVudCkge1xuXHQgICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICAgIC8vIGl0J3Mgbm90IHBvc3NpYmxlIGZvciB0aGUgc2FtZSBmcmFnIHRvIGJlIHJlbW92ZWRcblx0ICAgICAgLy8gdHdpY2UsIHNvIGlmIHdlIGhhdmUgYSBwZW5kaW5nIHN0YWdnZXIgY2FsbGJhY2ssXG5cdCAgICAgIC8vIGl0IG1lYW5zIHRoaXMgZnJhZyBpcyBxdWV1ZWQgZm9yIGVudGVyIGJ1dCByZW1vdmVkXG5cdCAgICAgIC8vIGJlZm9yZSBpdHMgdHJhbnNpdGlvbiBzdGFydGVkLiBTaW5jZSBpdCBpcyBhbHJlYWR5XG5cdCAgICAgIC8vIGRlc3Ryb3llZCwgd2UgY2FuIGp1c3QgbGVhdmUgaXQgaW4gZGV0YWNoZWQgc3RhdGUuXG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgJ2xlYXZlJyk7XG5cdCAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG5cdCAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgICAgICBmcmFnLnJlbW92ZSgpO1xuXHQgICAgICB9KTtcblx0ICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmcmFnLnJlbW92ZSgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIE1vdmUgYSBmcmFnbWVudCB0byBhIG5ldyBwb3NpdGlvbi5cblx0ICAgKiBGb3JjZSBubyB0cmFuc2l0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG5cdCAgICovXG5cdFxuXHQgIG1vdmU6IGZ1bmN0aW9uIG1vdmUoZnJhZywgcHJldkVsKSB7XG5cdCAgICAvLyBmaXggYSBjb21tb24gaXNzdWUgd2l0aCBTb3J0YWJsZTpcblx0ICAgIC8vIGlmIHByZXZFbCBkb2Vzbid0IGhhdmUgbmV4dFNpYmxpbmcsIHRoaXMgbWVhbnMgaXQnc1xuXHQgICAgLy8gYmVlbiBkcmFnZ2VkIGFmdGVyIHRoZSBlbmQgYW5jaG9yLiBKdXN0IHJlLXBvc2l0aW9uXG5cdCAgICAvLyB0aGUgZW5kIGFuY2hvciB0byB0aGUgZW5kIG9mIHRoZSBjb250YWluZXIuXG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghcHJldkVsLm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIHRoaXMuZW5kLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuXHQgICAgfVxuXHQgICAgZnJhZy5iZWZvcmUocHJldkVsLm5leHRTaWJsaW5nLCBmYWxzZSk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ2FjaGUgYSBmcmFnbWVudCB1c2luZyB0cmFjay1ieSBvciB0aGUgb2JqZWN0IGtleS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG5cdCAgICovXG5cdFxuXHQgIGNhY2hlRnJhZzogZnVuY3Rpb24gY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KSB7XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlO1xuXHQgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICB2YXIgaWQ7XG5cdCAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG5cdCAgICAgIGlmICghY2FjaGVbaWRdKSB7XG5cdCAgICAgICAgY2FjaGVbaWRdID0gZnJhZztcblx0ICAgICAgfSBlbHNlIGlmICh0cmFja0J5S2V5ICE9PSAnJGluZGV4Jykge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWQgPSB0aGlzLmlkO1xuXHQgICAgICBpZiAoaGFzT3duKHZhbHVlLCBpZCkpIHtcblx0ICAgICAgICBpZiAodmFsdWVbaWRdID09PSBudWxsKSB7XG5cdCAgICAgICAgICB2YWx1ZVtpZF0gPSBmcmFnO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpKSB7XG5cdCAgICAgICAgZGVmKHZhbHVlLCBpZCwgZnJhZyk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4oJ0Zyb3plbiB2LWZvciBvYmplY3RzIGNhbm5vdCBiZSBhdXRvbWF0aWNhbGx5IHRyYWNrZWQsIG1ha2Ugc3VyZSB0byAnICsgJ3Byb3ZpZGUgYSB0cmFjay1ieSBrZXkuJyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGZyYWcucmF3ID0gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR2V0IGEgY2FjaGVkIGZyYWdtZW50IGZyb20gdGhlIHZhbHVlL2luZGV4L2tleVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cblx0ICAgKi9cblx0XG5cdCAgZ2V0Q2FjaGVkRnJhZzogZnVuY3Rpb24gZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaW5kZXgsIGtleSkge1xuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICB2YXIgZnJhZztcblx0ICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG5cdCAgICAgIGZyYWcgPSB0aGlzLmNhY2hlW2lkXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZyYWcgPSB2YWx1ZVt0aGlzLmlkXTtcblx0ICAgIH1cblx0ICAgIGlmIChmcmFnICYmIChmcmFnLnJldXNlZCB8fCBmcmFnLmZyZXNoKSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZnJhZztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBEZWxldGUgYSBmcmFnbWVudCBmcm9tIGNhY2hlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqL1xuXHRcblx0ICBkZWxldGVDYWNoZWRGcmFnOiBmdW5jdGlvbiBkZWxldGVDYWNoZWRGcmFnKGZyYWcpIHtcblx0ICAgIHZhciB2YWx1ZSA9IGZyYWcucmF3O1xuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIHNjb3BlID0gZnJhZy5zY29wZTtcblx0ICAgIHZhciBpbmRleCA9IHNjb3BlLiRpbmRleDtcblx0ICAgIC8vIGZpeCAjOTQ4OiBhdm9pZCBhY2NpZGVudGFsbHkgZmFsbCB0aHJvdWdoIHRvXG5cdCAgICAvLyBhIHBhcmVudCByZXBlYXRlciB3aGljaCBoYXBwZW5zIHRvIGhhdmUgJGtleS5cblx0ICAgIHZhciBrZXkgPSBoYXNPd24oc2NvcGUsICcka2V5JykgJiYgc2NvcGUuJGtleTtcblx0ICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgaWYgKHRyYWNrQnlLZXkgfHwga2V5IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcblx0ICAgICAgdGhpcy5jYWNoZVtpZF0gPSBudWxsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFsdWVbdGhpcy5pZF0gPSBudWxsO1xuXHQgICAgICBmcmFnLnJhdyA9IG51bGw7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR2V0IHRoZSBzdGFnZ2VyIGFtb3VudCBmb3IgYW4gaW5zZXJ0aW9uL3JlbW92YWwuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICAgKi9cblx0XG5cdCAgZ2V0U3RhZ2dlcjogZnVuY3Rpb24gZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsIHR5cGUpIHtcblx0ICAgIHR5cGUgPSB0eXBlICsgJ1N0YWdnZXInO1xuXHQgICAgdmFyIHRyYW5zID0gZnJhZy5ub2RlLl9fdl90cmFucztcblx0ICAgIHZhciBob29rcyA9IHRyYW5zICYmIHRyYW5zLmhvb2tzO1xuXHQgICAgdmFyIGhvb2sgPSBob29rcyAmJiAoaG9va3NbdHlwZV0gfHwgaG9va3Muc3RhZ2dlcik7XG5cdCAgICByZXR1cm4gaG9vayA/IGhvb2suY2FsbChmcmFnLCBpbmRleCwgdG90YWwpIDogaW5kZXggKiBwYXJzZUludCh0aGlzLnBhcmFtc1t0eXBlXSB8fCB0aGlzLnBhcmFtcy5zdGFnZ2VyLCAxMCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUHJlLXByb2Nlc3MgdGhlIHZhbHVlIGJlZm9yZSBwaXBpbmcgaXQgdGhyb3VnaCB0aGVcblx0ICAgKiBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuXHQgICAqL1xuXHRcblx0ICBfcHJlUHJvY2VzczogZnVuY3Rpb24gX3ByZVByb2Nlc3ModmFsdWUpIHtcblx0ICAgIC8vIHJlZ2FyZGxlc3Mgb2YgdHlwZSwgc3RvcmUgdGhlIHVuLWZpbHRlcmVkIHJhdyB2YWx1ZS5cblx0ICAgIHRoaXMucmF3VmFsdWUgPSB2YWx1ZTtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBQb3N0LXByb2Nlc3MgdGhlIHZhbHVlIGFmdGVyIGl0IGhhcyBiZWVuIHBpcGVkIHRocm91Z2hcblx0ICAgKiB0aGUgZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cblx0ICAgKlxuXHQgICAqIEl0IGlzIG5lY2Vzc2FyeSBmb3IgdGhpcyB0byBiZSBjYWxsZWQgZHVyaW5nIHRoZVxuXHQgICAqIHdhdGNoZXIncyBkZXBlbmRlbmN5IGNvbGxlY3Rpb24gcGhhc2UgYmVjYXVzZSB3ZSB3YW50XG5cdCAgICogdGhlIHYtZm9yIHRvIHVwZGF0ZSB3aGVuIHRoZSBzb3VyY2UgT2JqZWN0IGlzIG11dGF0ZWQuXG5cdCAgICovXG5cdFxuXHQgIF9wb3N0UHJvY2VzczogZnVuY3Rpb24gX3Bvc3RQcm9jZXNzKHZhbHVlKSB7XG5cdCAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgICAvLyBjb252ZXJ0IHBsYWluIG9iamVjdCB0byBhcnJheS5cblx0ICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG5cdCAgICAgIHZhciBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICAgIHZhciByZXMgPSBuZXcgQXJyYXkoaSk7XG5cdCAgICAgIHZhciBrZXk7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAgIHJlc1tpXSA9IHtcblx0ICAgICAgICAgICRrZXk6IGtleSxcblx0ICAgICAgICAgICR2YWx1ZTogdmFsdWVba2V5XVxuXHQgICAgICAgIH07XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHJlcztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSkpIHtcblx0ICAgICAgICB2YWx1ZSA9IHJhbmdlKHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsdWUgfHwgW107XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuXHQgICAgICAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnNbdGhpcy5kZXNjcmlwdG9yLnJlZl0gPSBudWxsO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuZnJhZ3MpIHtcblx0ICAgICAgdmFyIGkgPSB0aGlzLmZyYWdzLmxlbmd0aDtcblx0ICAgICAgdmFyIGZyYWc7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBmcmFnID0gdGhpcy5mcmFnc1tpXTtcblx0ICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG5cdCAgICAgICAgZnJhZy5kZXN0cm95KCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRvIGZpbmQgdGhlIHByZXZpb3VzIGVsZW1lbnQgdGhhdCBpcyBhIGZyYWdtZW50XG5cdCAqIGFuY2hvci4gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBhIGRlc3Ryb3llZCBmcmFnJ3Ncblx0ICogZWxlbWVudCBjb3VsZCBzdGlsbCBiZSBsaW5nZXJpbmcgaW4gdGhlIERPTSBiZWZvcmUgaXRzXG5cdCAqIGxlYXZpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcywgYnV0IGl0cyBpbnNlcnRlZCBmbGFnXG5cdCAqIHNob3VsZCBoYXZlIGJlZW4gc2V0IHRvIGZhbHNlIHNvIHdlIGNhbiBza2lwIHRoZW0uXG5cdCAqXG5cdCAqIElmIHRoaXMgaXMgYSBibG9jayByZXBlYXQsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIG9ubHlcblx0ICogcmV0dXJuIGZyYWcgdGhhdCBpcyBib3VuZCB0byB0aGlzIHYtZm9yLiAoc2VlICM5MjkpXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICogQHBhcmFtIHtDb21tZW50fFRleHR9IGFuY2hvclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICogQHJldHVybiB7RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmluZFByZXZGcmFnKGZyYWcsIGFuY2hvciwgaWQpIHtcblx0ICB2YXIgZWwgPSBmcmFnLm5vZGUucHJldmlvdXNTaWJsaW5nO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghZWwpIHJldHVybjtcblx0ICBmcmFnID0gZWwuX192X2ZyYWc7XG5cdCAgd2hpbGUgKCghZnJhZyB8fCBmcmFnLmZvcklkICE9PSBpZCB8fCAhZnJhZy5pbnNlcnRlZCkgJiYgZWwgIT09IGFuY2hvcikge1xuXHQgICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghZWwpIHJldHVybjtcblx0ICAgIGZyYWcgPSBlbC5fX3ZfZnJhZztcblx0ICB9XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaW5kIGEgdm0gZnJvbSBhIGZyYWdtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmluZFZtRnJvbUZyYWcoZnJhZykge1xuXHQgIHZhciBub2RlID0gZnJhZy5ub2RlO1xuXHQgIC8vIGhhbmRsZSBtdWx0aS1ub2RlIGZyYWdcblx0ICBpZiAoZnJhZy5lbmQpIHtcblx0ICAgIHdoaWxlICghbm9kZS5fX3Z1ZV9fICYmIG5vZGUgIT09IGZyYWcuZW5kICYmIG5vZGUubmV4dFNpYmxpbmcpIHtcblx0ICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBub2RlLl9fdnVlX187XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYSByYW5nZSBhcnJheSBmcm9tIGdpdmVuIG51bWJlci5cblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IG5cblx0ICogQHJldHVybiB7QXJyYXl9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmFuZ2Uobikge1xuXHQgIHZhciBpID0gLTE7XG5cdCAgdmFyIHJldCA9IG5ldyBBcnJheShNYXRoLmZsb29yKG4pKTtcblx0ICB3aGlsZSAoKytpIDwgbikge1xuXHQgICAgcmV0W2ldID0gaTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgdHJhY2sgYnkga2V5IGZvciBhbiBpdGVtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbdHJhY2tCeUtleV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KSB7XG5cdCAgcmV0dXJuIHRyYWNrQnlLZXkgPyB0cmFja0J5S2V5ID09PSAnJGluZGV4JyA/IGluZGV4IDogdHJhY2tCeUtleS5jaGFyQXQoMCkubWF0Y2goL1xcdy8pID8gZ2V0UGF0aCh2YWx1ZSwgdHJhY2tCeUtleSkgOiB2YWx1ZVt0cmFja0J5S2V5XSA6IGtleSB8fCB2YWx1ZTtcblx0fVxuXHRcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICB2Rm9yLndhcm5EdXBsaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIHdhcm4oJ0R1cGxpY2F0ZSB2YWx1ZSBmb3VuZCBpbiB2LWZvcj1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJy4gVXNlIHRyYWNrLWJ5PVwiJGluZGV4XCIgaWYgJyArICd5b3UgYXJlIGV4cGVjdGluZyBkdXBsaWNhdGUgdmFsdWVzLicsIHRoaXMudm0pO1xuXHQgIH07XG5cdH1cblx0XG5cdHZhciB2SWYgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBJRixcblx0ICB0ZXJtaW5hbDogdHJ1ZSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBpZiAoIWVsLl9fdnVlX18pIHtcblx0ICAgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuXHQgICAgICB2YXIgbmV4dCA9IGVsLm5leHRFbGVtZW50U2libGluZztcblx0ICAgICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcblx0ICAgICAgICByZW1vdmUobmV4dCk7XG5cdCAgICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNoZWNrIG1haW4gYmxvY2tcblx0ICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaWYnKTtcblx0ICAgICAgcmVwbGFjZShlbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LWlmPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBjYW5ub3QgYmUgJyArICd1c2VkIG9uIGFuIGluc3RhbmNlIHJvb3QgZWxlbWVudC4nLCB0aGlzLnZtKTtcblx0ICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHRoaXMuaW52YWxpZCkgcmV0dXJuO1xuXHQgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgIGlmICghdGhpcy5mcmFnKSB7XG5cdCAgICAgICAgdGhpcy5pbnNlcnQoKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5yZW1vdmUoKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydCgpIHtcblx0ICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcucmVtb3ZlKCk7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgLy8gbGF6eSBpbml0IGZhY3Rvcnlcblx0ICAgIGlmICghdGhpcy5mYWN0b3J5KSB7XG5cdCAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgIHRoaXMuZnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuXHQgIH0sXG5cdFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuXHQgICAgaWYgKHRoaXMuZnJhZykge1xuXHQgICAgICB0aGlzLmZyYWcucmVtb3ZlKCk7XG5cdCAgICAgIHRoaXMuZnJhZyA9IG51bGw7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5lbHNlRWwgJiYgIXRoaXMuZWxzZUZyYWcpIHtcblx0ICAgICAgaWYgKCF0aGlzLmVsc2VGYWN0b3J5KSB7XG5cdCAgICAgICAgdGhpcy5lbHNlRmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy5lbHNlRWwuX2NvbnRleHQgfHwgdGhpcy52bSwgdGhpcy5lbHNlRWwpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcgPSB0aGlzLmVsc2VGYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLmZyYWcpIHtcblx0ICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcuZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBzaG93ID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuXHQgICAgdmFyIG5leHQgPSB0aGlzLmVsLm5leHRFbGVtZW50U2libGluZztcblx0ICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG5cdCAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdGhpcy5hcHBseSh0aGlzLmVsLCB2YWx1ZSk7XG5cdCAgICBpZiAodGhpcy5lbHNlRWwpIHtcblx0ICAgICAgdGhpcy5hcHBseSh0aGlzLmVsc2VFbCwgIXZhbHVlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBhcHBseTogZnVuY3Rpb24gYXBwbHkoZWwsIHZhbHVlKSB7XG5cdCAgICBpZiAoaW5Eb2MoZWwpKSB7XG5cdCAgICAgIGFwcGx5VHJhbnNpdGlvbihlbCwgdmFsdWUgPyAxIDogLTEsIHRvZ2dsZSwgdGhpcy52bSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0b2dnbGUoKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHRvZ2dsZSgpIHtcblx0ICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gJycgOiAnbm9uZSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHRleHQkMiA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB2YXIgaXNSYW5nZSA9IGVsLnR5cGUgPT09ICdyYW5nZSc7XG5cdCAgICB2YXIgbGF6eSA9IHRoaXMucGFyYW1zLmxhenk7XG5cdCAgICB2YXIgbnVtYmVyID0gdGhpcy5wYXJhbXMubnVtYmVyO1xuXHQgICAgdmFyIGRlYm91bmNlID0gdGhpcy5wYXJhbXMuZGVib3VuY2U7XG5cdFxuXHQgICAgLy8gaGFuZGxlIGNvbXBvc2l0aW9uIGV2ZW50cy5cblx0ICAgIC8vICAgaHR0cDovL2Jsb2cuZXZhbnlvdS5tZS8yMDE0LzAxLzAzL2NvbXBvc2l0aW9uLWV2ZW50L1xuXHQgICAgLy8gc2tpcCB0aGlzIGZvciBBbmRyb2lkIGJlY2F1c2UgaXQgaGFuZGxlcyBjb21wb3NpdGlvblxuXHQgICAgLy8gZXZlbnRzIHF1aXRlIGRpZmZlcmVudGx5LiBBbmRyb2lkIGRvZXNuJ3QgdHJpZ2dlclxuXHQgICAgLy8gY29tcG9zaXRpb24gZXZlbnRzIGZvciBsYW5ndWFnZSBpbnB1dCBtZXRob2RzIGUuZy5cblx0ICAgIC8vIENoaW5lc2UsIGJ1dCBpbnN0ZWFkIHRyaWdnZXJzIHRoZW0gZm9yIHNwZWxsaW5nXG5cdCAgICAvLyBzdWdnZXN0aW9ucy4uLiAoc2VlIERpc2N1c3Npb24vIzE2Milcblx0ICAgIHZhciBjb21wb3NpbmcgPSBmYWxzZTtcblx0ICAgIGlmICghaXNBbmRyb2lkICYmICFpc1JhbmdlKSB7XG5cdCAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNvbXBvc2luZyA9IGZhbHNlO1xuXHQgICAgICAgIC8vIGluIElFMTEgdGhlIFwiY29tcG9zaXRpb25lbmRcIiBldmVudCBmaXJlcyBBRlRFUlxuXHQgICAgICAgIC8vIHRoZSBcImlucHV0XCIgZXZlbnQsIHNvIHRoZSBpbnB1dCBoYW5kbGVyIGlzIGJsb2NrZWRcblx0ICAgICAgICAvLyBhdCB0aGUgZW5kLi4uIGhhdmUgdG8gY2FsbCBpdCBoZXJlLlxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gIzEzMjc6IGluIGxhenkgbW9kZSB0aGlzIGlzIHVuZWNlc3NhcnkuXG5cdCAgICAgICAgaWYgKCFsYXp5KSB7XG5cdCAgICAgICAgICBzZWxmLmxpc3RlbmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBwcmV2ZW50IG1lc3Npbmcgd2l0aCB0aGUgaW5wdXQgd2hlbiB1c2VyIGlzIHR5cGluZyxcblx0ICAgIC8vIGFuZCBmb3JjZSB1cGRhdGUgb24gYmx1ci5cblx0ICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuXHQgICAgaWYgKCFpc1JhbmdlICYmICFsYXp5KSB7XG5cdCAgICAgIHRoaXMub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYuZm9jdXNlZCA9IHRydWU7XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYuZm9jdXNlZCA9IGZhbHNlO1xuXHQgICAgICAgIC8vIGRvIG5vdCBzeW5jIHZhbHVlIGFmdGVyIGZyYWdtZW50IHJlbW92YWwgKCMyMDE3KVxuXHQgICAgICAgIGlmICghc2VsZi5fZnJhZyB8fCBzZWxmLl9mcmFnLmluc2VydGVkKSB7XG5cdCAgICAgICAgICBzZWxmLnJhd0xpc3RlbmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBOb3cgYXR0YWNoIHRoZSBtYWluIGxpc3RlbmVyXG5cdCAgICB0aGlzLmxpc3RlbmVyID0gdGhpcy5yYXdMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKGNvbXBvc2luZyB8fCAhc2VsZi5fYm91bmQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHZhbCA9IG51bWJlciB8fCBpc1JhbmdlID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG5cdCAgICAgIHNlbGYuc2V0KHZhbCk7XG5cdCAgICAgIC8vIGZvcmNlIHVwZGF0ZSBvbiBuZXh0IHRpY2sgdG8gYXZvaWQgbG9jayAmIHNhbWUgdmFsdWVcblx0ICAgICAgLy8gYWxzbyBvbmx5IHVwZGF0ZSB3aGVuIHVzZXIgaXMgbm90IHR5cGluZ1xuXHQgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHNlbGYuX2JvdW5kICYmICFzZWxmLmZvY3VzZWQpIHtcblx0ICAgICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIudmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGFwcGx5IGRlYm91bmNlXG5cdCAgICBpZiAoZGVib3VuY2UpIHtcblx0ICAgICAgdGhpcy5saXN0ZW5lciA9IF9kZWJvdW5jZSh0aGlzLmxpc3RlbmVyLCBkZWJvdW5jZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gU3VwcG9ydCBqUXVlcnkgZXZlbnRzLCBzaW5jZSBqUXVlcnkudHJpZ2dlcigpIGRvZXNuJ3Rcblx0ICAgIC8vIHRyaWdnZXIgbmF0aXZlIGV2ZW50cyBpbiBzb21lIGNhc2VzIGFuZCBzb21lIHBsdWdpbnNcblx0ICAgIC8vIHJlbHkgb24gJC50cmlnZ2VyKClcblx0ICAgIC8vXG5cdCAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSBpZiBhIGxpc3RlbmVyIGlzIGF0dGFjaGVkIHVzaW5nXG5cdCAgICAvLyBqUXVlcnksIGl0IGlzIGFsc28gcmVtb3ZlZCB3aXRoIGpRdWVyeSwgdGhhdCdzIHdoeVxuXHQgICAgLy8gd2UgZG8gdGhlIGNoZWNrIGZvciBlYWNoIGRpcmVjdGl2ZSBpbnN0YW5jZSBhbmRcblx0ICAgIC8vIHN0b3JlIHRoYXQgY2hlY2sgcmVzdWx0IG9uIGl0c2VsZi4gVGhpcyBhbHNvIGFsbG93c1xuXHQgICAgLy8gZWFzaWVyIHRlc3QgY292ZXJhZ2UgY29udHJvbCBieSB1bnNldHRpbmcgdGhlIGdsb2JhbFxuXHQgICAgLy8galF1ZXJ5IHZhcmlhYmxlIGluIHRlc3RzLlxuXHQgICAgdGhpcy5oYXNqUXVlcnkgPSB0eXBlb2YgalF1ZXJ5ID09PSAnZnVuY3Rpb24nO1xuXHQgICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG5cdCAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub24gPyAnb24nIDogJ2JpbmQnO1xuXHQgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuXHQgICAgICBpZiAoIWxhenkpIHtcblx0ICAgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuXHQgICAgICBpZiAoIWxhenkpIHtcblx0ICAgICAgICB0aGlzLm9uKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSUU5IGRvZXNuJ3QgZmlyZSBpbnB1dCBldmVudCBvbiBiYWNrc3BhY2UvZGVsL2N1dFxuXHQgICAgaWYgKCFsYXp5ICYmIGlzSUU5KSB7XG5cdCAgICAgIHRoaXMub24oJ2N1dCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBuZXh0VGljayhzZWxmLmxpc3RlbmVyKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA0NiB8fCBlLmtleUNvZGUgPT09IDgpIHtcblx0ICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHNldCBpbml0aWFsIHZhbHVlIGlmIHByZXNlbnRcblx0ICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJiBlbC52YWx1ZS50cmltKCkpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICAvLyAjMzAyOSBvbmx5IHVwZGF0ZSB3aGVuIHRoZSB2YWx1ZSBjaGFuZ2VzLiBUaGlzIHByZXZlbnRcblx0ICAgIC8vIGJyb3dzZXJzIGZyb20gb3ZlcndyaXRpbmcgdmFsdWVzIGxpa2Ugc2VsZWN0aW9uU3RhcnRcblx0ICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5lbC52YWx1ZSkgdGhpcy5lbC52YWx1ZSA9IHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuXHQgICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XG5cdCAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcmFkaW8gPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHRcblx0ICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIC8vIHZhbHVlIG92ZXJ3cml0ZSB2aWEgdi1iaW5kOnZhbHVlXG5cdCAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykpIHtcblx0ICAgICAgICByZXR1cm4gZWwuX3ZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciB2YWwgPSBlbC52YWx1ZTtcblx0ICAgICAgaWYgKHNlbGYucGFyYW1zLm51bWJlcikge1xuXHQgICAgICAgIHZhbCA9IHRvTnVtYmVyKHZhbCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbDtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgc2VsZi5zZXQoc2VsZi5nZXRWYWx1ZSgpKTtcblx0ICAgIH07XG5cdCAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0XG5cdCAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB0aGlzLmVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBzZWxlY3QgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdFxuXHQgICAgLy8gbWV0aG9kIHRvIGZvcmNlIHVwZGF0ZSBET00gdXNpbmcgbGF0ZXN0IHZhbHVlLlxuXHQgICAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHNlbGYuX3dhdGNoZXIpIHtcblx0ICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLmdldCgpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgbXVsdGlwbGUgc2VsZWN0XG5cdCAgICB2YXIgbXVsdGlwbGUgPSB0aGlzLm11bHRpcGxlID0gZWwuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpO1xuXHRcblx0ICAgIC8vIGF0dGFjaCBsaXN0ZW5lclxuXHQgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlKTtcblx0ICAgICAgdmFsdWUgPSBzZWxmLnBhcmFtcy5udW1iZXIgPyBpc0FycmF5KHZhbHVlKSA/IHZhbHVlLm1hcCh0b051bWJlcikgOiB0b051bWJlcih2YWx1ZSkgOiB2YWx1ZTtcblx0ICAgICAgc2VsZi5zZXQodmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHRcblx0ICAgIC8vIGlmIGhhcyBpbml0aWFsIHZhbHVlLCBzZXQgYWZ0ZXJCaW5kXG5cdCAgICB2YXIgaW5pdFZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlLCB0cnVlKTtcblx0ICAgIGlmIChtdWx0aXBsZSAmJiBpbml0VmFsdWUubGVuZ3RoIHx8ICFtdWx0aXBsZSAmJiBpbml0VmFsdWUgIT09IG51bGwpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEFsbCBtYWpvciBicm93c2VycyBleGNlcHQgRmlyZWZveCByZXNldHNcblx0ICAgIC8vIHNlbGVjdGVkSW5kZXggd2l0aCB2YWx1ZSAtMSB0byAwIHdoZW4gdGhlIGVsZW1lbnRcblx0ICAgIC8vIGlzIGFwcGVuZGVkIHRvIGEgbmV3IHBhcmVudCwgdGhlcmVmb3JlIHdlIGhhdmUgdG9cblx0ICAgIC8vIGZvcmNlIGEgRE9NIHVwZGF0ZSB3aGVuZXZlciB0aGF0IGhhcHBlbnMuLi5cblx0ICAgIHRoaXMudm0uJG9uKCdob29rOmF0dGFjaGVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBuZXh0VGljayhfdGhpcy5mb3JjZVVwZGF0ZSk7XG5cdCAgICB9KTtcblx0ICAgIGlmICghaW5Eb2MoZWwpKSB7XG5cdCAgICAgIG5leHRUaWNrKHRoaXMuZm9yY2VVcGRhdGUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xO1xuXHQgICAgdmFyIG11bHRpID0gdGhpcy5tdWx0aXBsZSAmJiBpc0FycmF5KHZhbHVlKTtcblx0ICAgIHZhciBvcHRpb25zID0gZWwub3B0aW9ucztcblx0ICAgIHZhciBpID0gb3B0aW9ucy5sZW5ndGg7XG5cdCAgICB2YXIgb3AsIHZhbDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgb3AgPSBvcHRpb25zW2ldO1xuXHQgICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcblx0ICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG5cdCAgICAgIG9wLnNlbGVjdGVkID0gbXVsdGkgPyBpbmRleE9mJDEodmFsdWUsIHZhbCkgPiAtMSA6IGxvb3NlRXF1YWwodmFsdWUsIHZhbCk7XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgICAgdGhpcy52bS4kb2ZmKCdob29rOmF0dGFjaGVkJywgdGhpcy5mb3JjZVVwZGF0ZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEdldCBzZWxlY3QgdmFsdWVcblx0ICpcblx0ICogQHBhcmFtIHtTZWxlY3RFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IG11bHRpXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5pdFxuXHQgKiBAcmV0dXJuIHtBcnJheXwqfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFZhbHVlKGVsLCBtdWx0aSwgaW5pdCkge1xuXHQgIHZhciByZXMgPSBtdWx0aSA/IFtdIDogbnVsbDtcblx0ICB2YXIgb3AsIHZhbCwgc2VsZWN0ZWQ7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBlbC5vcHRpb25zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgb3AgPSBlbC5vcHRpb25zW2ldO1xuXHQgICAgc2VsZWN0ZWQgPSBpbml0ID8gb3AuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpIDogb3Auc2VsZWN0ZWQ7XG5cdCAgICBpZiAoc2VsZWN0ZWQpIHtcblx0ICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gb3AuX3ZhbHVlIDogb3AudmFsdWU7XG5cdCAgICAgIGlmIChtdWx0aSkge1xuXHQgICAgICAgIHJlcy5wdXNoKHZhbCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTmF0aXZlIEFycmF5LmluZGV4T2YgdXNlcyBzdHJpY3QgZXF1YWwsIGJ1dCBpbiB0aGlzXG5cdCAqIGNhc2Ugd2UgbmVlZCB0byBtYXRjaCBzdHJpbmcvbnVtYmVycyB3aXRoIGN1c3RvbSBlcXVhbC5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5kZXhPZiQxKGFyciwgdmFsKSB7XG5cdCAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGlmIChsb29zZUVxdWFsKGFycltpXSwgdmFsKSkge1xuXHQgICAgICByZXR1cm4gaTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIC0xO1xuXHR9XG5cdFxuXHR2YXIgY2hlY2tib3ggPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHRcblx0ICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBlbC5fdmFsdWUgOiBzZWxmLnBhcmFtcy5udW1iZXIgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gZ2V0Qm9vbGVhblZhbHVlKCkge1xuXHQgICAgICB2YXIgdmFsID0gZWwuY2hlY2tlZDtcblx0ICAgICAgaWYgKHZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG5cdCAgICAgICAgcmV0dXJuIGVsLl90cnVlVmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCF2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ19mYWxzZVZhbHVlJykpIHtcblx0ICAgICAgICByZXR1cm4gZWwuX2ZhbHNlVmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbDtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgbW9kZWwgPSBzZWxmLl93YXRjaGVyLnZhbHVlO1xuXHQgICAgICBpZiAoaXNBcnJheShtb2RlbCkpIHtcblx0ICAgICAgICB2YXIgdmFsID0gc2VsZi5nZXRWYWx1ZSgpO1xuXHQgICAgICAgIGlmIChlbC5jaGVja2VkKSB7XG5cdCAgICAgICAgICBpZiAoaW5kZXhPZihtb2RlbCwgdmFsKSA8IDApIHtcblx0ICAgICAgICAgICAgbW9kZWwucHVzaCh2YWwpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBtb2RlbC4kcmVtb3ZlKHZhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNlbGYuc2V0KGdldEJvb2xlYW5WYWx1ZSgpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgZWwuY2hlY2tlZCA9IGluZGV4T2YodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSkgPiAtMTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG5cdCAgICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIGVsLl90cnVlVmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGVsLmNoZWNrZWQgPSAhIXZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGhhbmRsZXJzID0ge1xuXHQgIHRleHQ6IHRleHQkMixcblx0ICByYWRpbzogcmFkaW8sXG5cdCAgc2VsZWN0OiBzZWxlY3QsXG5cdCAgY2hlY2tib3g6IGNoZWNrYm94XG5cdH07XG5cdFxuXHR2YXIgbW9kZWwgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBNT0RFTCxcblx0ICB0d29XYXk6IHRydWUsXG5cdCAgaGFuZGxlcnM6IGhhbmRsZXJzLFxuXHQgIHBhcmFtczogWydsYXp5JywgJ251bWJlcicsICdkZWJvdW5jZSddLFxuXHRcblx0ICAvKipcblx0ICAgKiBQb3NzaWJsZSBlbGVtZW50czpcblx0ICAgKiAgIDxzZWxlY3Q+XG5cdCAgICogICA8dGV4dGFyZWE+XG5cdCAgICogICA8aW5wdXQgdHlwZT1cIipcIj5cblx0ICAgKiAgICAgLSB0ZXh0XG5cdCAgICogICAgIC0gY2hlY2tib3hcblx0ICAgKiAgICAgLSByYWRpb1xuXHQgICAqICAgICAtIG51bWJlclxuXHQgICAqL1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gZnJpZW5kbHkgd2FybmluZy4uLlxuXHQgICAgdGhpcy5jaGVja0ZpbHRlcnMoKTtcblx0ICAgIGlmICh0aGlzLmhhc1JlYWQgJiYgIXRoaXMuaGFzV3JpdGUpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIGEgcmVhZC1vbmx5IGZpbHRlciB3aXRoICcgKyAndi1tb2RlbD1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiLiAnICsgJ1lvdSBtaWdodCB3YW50IHRvIHVzZSBhIHR3by13YXkgZmlsdGVyIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW9yLicsIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHZhciB0YWcgPSBlbC50YWdOYW1lO1xuXHQgICAgdmFyIGhhbmRsZXI7XG5cdCAgICBpZiAodGFnID09PSAnSU5QVVQnKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBoYW5kbGVyc1tlbC50eXBlXSB8fCBoYW5kbGVycy50ZXh0O1xuXHQgICAgfSBlbHNlIGlmICh0YWcgPT09ICdTRUxFQ1QnKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy5zZWxlY3Q7XG5cdCAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgICBoYW5kbGVyID0gaGFuZGxlcnMudGV4dDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1tb2RlbCBkb2VzIG5vdCBzdXBwb3J0IGVsZW1lbnQgdHlwZTogJyArIHRhZywgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGVsLl9fdl9tb2RlbCA9IHRoaXM7XG5cdCAgICBoYW5kbGVyLmJpbmQuY2FsbCh0aGlzKTtcblx0ICAgIHRoaXMudXBkYXRlID0gaGFuZGxlci51cGRhdGU7XG5cdCAgICB0aGlzLl91bmJpbmQgPSBoYW5kbGVyLnVuYmluZDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayByZWFkL3dyaXRlIGZpbHRlciBzdGF0cy5cblx0ICAgKi9cblx0XG5cdCAgY2hlY2tGaWx0ZXJzOiBmdW5jdGlvbiBjaGVja0ZpbHRlcnMoKSB7XG5cdCAgICB2YXIgZmlsdGVycyA9IHRoaXMuZmlsdGVycztcblx0ICAgIGlmICghZmlsdGVycykgcmV0dXJuO1xuXHQgICAgdmFyIGkgPSBmaWx0ZXJzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIGZpbHRlciA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlcnNbaV0ubmFtZSk7XG5cdCAgICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nIHx8IGZpbHRlci5yZWFkKSB7XG5cdCAgICAgICAgdGhpcy5oYXNSZWFkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoZmlsdGVyLndyaXRlKSB7XG5cdCAgICAgICAgdGhpcy5oYXNXcml0ZSA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMuZWwuX192X21vZGVsID0gbnVsbDtcblx0ICAgIHRoaXMuX3VuYmluZCAmJiB0aGlzLl91bmJpbmQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBrZXlDb2RlIGFsaWFzZXNcblx0dmFyIGtleUNvZGVzID0ge1xuXHQgIGVzYzogMjcsXG5cdCAgdGFiOiA5LFxuXHQgIGVudGVyOiAxMyxcblx0ICBzcGFjZTogMzIsXG5cdCAgJ2RlbGV0ZSc6IFs4LCA0Nl0sXG5cdCAgdXA6IDM4LFxuXHQgIGxlZnQ6IDM3LFxuXHQgIHJpZ2h0OiAzOSxcblx0ICBkb3duOiA0MFxuXHR9O1xuXHRcblx0ZnVuY3Rpb24ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpIHtcblx0ICB2YXIgY29kZXMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICB2YXIgY2hhckNvZGUgPSBrZXkuY2hhckNvZGVBdCgwKTtcblx0ICAgIGlmIChjaGFyQ29kZSA+IDQ3ICYmIGNoYXJDb2RlIDwgNTgpIHtcblx0ICAgICAgcmV0dXJuIHBhcnNlSW50KGtleSwgMTApO1xuXHQgICAgfVxuXHQgICAgaWYgKGtleS5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgY2hhckNvZGUgPSBrZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApO1xuXHQgICAgICBpZiAoY2hhckNvZGUgPiA2NCAmJiBjaGFyQ29kZSA8IDkxKSB7XG5cdCAgICAgICAgcmV0dXJuIGNoYXJDb2RlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4ga2V5Q29kZXNba2V5XTtcblx0ICB9KTtcblx0ICBjb2RlcyA9IFtdLmNvbmNhdC5hcHBseShbXSwgY29kZXMpO1xuXHQgIHJldHVybiBmdW5jdGlvbiBrZXlIYW5kbGVyKGUpIHtcblx0ICAgIGlmIChjb2Rlcy5pbmRleE9mKGUua2V5Q29kZSkgPiAtMSkge1xuXHQgICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0b3BGaWx0ZXIoaGFuZGxlcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiBzdG9wSGFuZGxlcihlKSB7XG5cdCAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gcHJldmVudEhhbmRsZXIoZSkge1xuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZWxmRmlsdGVyKGhhbmRsZXIpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gc2VsZkhhbmRsZXIoZSkge1xuXHQgICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcblx0ICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgb24kMSA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IE9OLFxuXHQgIGFjY2VwdFN0YXRlbWVudDogdHJ1ZSxcblx0ICBrZXlDb2Rlczoga2V5Q29kZXMsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBkZWFsIHdpdGggaWZyYW1lc1xuXHQgICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScgJiYgdGhpcy5hcmcgIT09ICdsb2FkJykge1xuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIHRoaXMuaWZyYW1lQmluZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBvbihzZWxmLmVsLmNvbnRlbnRXaW5kb3csIHNlbGYuYXJnLCBzZWxmLmhhbmRsZXIsIHNlbGYubW9kaWZpZXJzLmNhcHR1cmUpO1xuXHQgICAgICB9O1xuXHQgICAgICB0aGlzLm9uKCdsb2FkJywgdGhpcy5pZnJhbWVCaW5kKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShoYW5kbGVyKSB7XG5cdCAgICAvLyBzdHViIGEgbm9vcCBmb3Igdi1vbiB3aXRoIG5vIHZhbHVlLFxuXHQgICAgLy8gZS5nLiBAbW91c2Vkb3duLnByZXZlbnRcblx0ICAgIGlmICghdGhpcy5kZXNjcmlwdG9yLnJhdykge1xuXHQgICAgICBoYW5kbGVyID0gZnVuY3Rpb24gKCkge307XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1vbjonICsgdGhpcy5hcmcgKyAnPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBleHBlY3RzIGEgZnVuY3Rpb24gdmFsdWUsICcgKyAnZ290ICcgKyBoYW5kbGVyLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGFwcGx5IG1vZGlmaWVyc1xuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLnN0b3ApIHtcblx0ICAgICAgaGFuZGxlciA9IHN0b3BGaWx0ZXIoaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMucHJldmVudCkge1xuXHQgICAgICBoYW5kbGVyID0gcHJldmVudEZpbHRlcihoYW5kbGVyKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5zZWxmKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBzZWxmRmlsdGVyKGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgICAgLy8ga2V5IGZpbHRlclxuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm1vZGlmaWVycykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuIGtleSAhPT0gJ3N0b3AnICYmIGtleSAhPT0gJ3ByZXZlbnQnICYmIGtleSAhPT0gJ3NlbGYnICYmIGtleSAhPT0gJ2NhcHR1cmUnO1xuXHQgICAgfSk7XG5cdCAgICBpZiAoa2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaGFuZGxlciA9IGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnJlc2V0KCk7XG5cdCAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xuXHRcblx0ICAgIGlmICh0aGlzLmlmcmFtZUJpbmQpIHtcblx0ICAgICAgdGhpcy5pZnJhbWVCaW5kKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvbih0aGlzLmVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyLCB0aGlzLm1vZGlmaWVycy5jYXB0dXJlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmlmcmFtZUJpbmQgPyB0aGlzLmVsLmNvbnRlbnRXaW5kb3cgOiB0aGlzLmVsO1xuXHQgICAgaWYgKHRoaXMuaGFuZGxlcikge1xuXHQgICAgICBvZmYoZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5yZXNldCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBwcmVmaXhlcyA9IFsnLXdlYmtpdC0nLCAnLW1vei0nLCAnLW1zLSddO1xuXHR2YXIgY2FtZWxQcmVmaXhlcyA9IFsnV2Via2l0JywgJ01veicsICdtcyddO1xuXHR2YXIgaW1wb3J0YW50UkUgPSAvIWltcG9ydGFudDs/JC87XG5cdHZhciBwcm9wQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0dmFyIHRlc3RFbCA9IG51bGw7XG5cdFxuXHR2YXIgc3R5bGUgPSB7XG5cdFxuXHQgIGRlZXA6IHRydWUsXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0aGlzLmVsLnN0eWxlLmNzc1RleHQgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUucmVkdWNlKGV4dGVuZCwge30pKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBoYW5kbGVPYmplY3Q6IGZ1bmN0aW9uIGhhbmRsZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgLy8gY2FjaGUgb2JqZWN0IHN0eWxlcyBzbyB0aGF0IG9ubHkgY2hhbmdlZCBwcm9wc1xuXHQgICAgLy8gYXJlIGFjdHVhbGx5IHVwZGF0ZWQuXG5cdCAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlIHx8ICh0aGlzLmNhY2hlID0ge30pO1xuXHQgICAgdmFyIG5hbWUsIHZhbDtcblx0ICAgIGZvciAobmFtZSBpbiBjYWNoZSkge1xuXHQgICAgICBpZiAoIShuYW1lIGluIHZhbHVlKSkge1xuXHQgICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIG51bGwpO1xuXHQgICAgICAgIGRlbGV0ZSBjYWNoZVtuYW1lXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgZm9yIChuYW1lIGluIHZhbHVlKSB7XG5cdCAgICAgIHZhbCA9IHZhbHVlW25hbWVdO1xuXHQgICAgICBpZiAodmFsICE9PSBjYWNoZVtuYW1lXSkge1xuXHQgICAgICAgIGNhY2hlW25hbWVdID0gdmFsO1xuXHQgICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIHZhbCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShwcm9wLCB2YWx1ZSkge1xuXHQgICAgcHJvcCA9IG5vcm1hbGl6ZShwcm9wKTtcblx0ICAgIGlmICghcHJvcCkgcmV0dXJuOyAvLyB1bnN1cHBvcnRlZCBwcm9wXG5cdCAgICAvLyBjYXN0IHBvc3NpYmxlIG51bWJlcnMvYm9vbGVhbnMgaW50byBzdHJpbmdzXG5cdCAgICBpZiAodmFsdWUgIT0gbnVsbCkgdmFsdWUgKz0gJyc7XG5cdCAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgdmFyIGlzSW1wb3J0YW50ID0gaW1wb3J0YW50UkUudGVzdCh2YWx1ZSkgPyAnaW1wb3J0YW50JyA6ICcnO1xuXHQgICAgICBpZiAoaXNJbXBvcnRhbnQpIHtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgICAgd2FybignSXRcXCdzIHByb2JhYmx5IGEgYmFkIGlkZWEgdG8gdXNlICFpbXBvcnRhbnQgd2l0aCBpbmxpbmUgcnVsZXMuICcgKyAnVGhpcyBmZWF0dXJlIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFZ1ZS4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGltcG9ydGFudFJFLCAnJykudHJpbSgpO1xuXHQgICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkocHJvcC5rZWJhYiwgdmFsdWUsIGlzSW1wb3J0YW50KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSAnJztcblx0ICAgIH1cblx0ICB9XG5cdFxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE5vcm1hbGl6ZSBhIENTUyBwcm9wZXJ0eSBuYW1lLlxuXHQgKiAtIGNhY2hlIHJlc3VsdFxuXHQgKiAtIGF1dG8gcHJlZml4XG5cdCAqIC0gY2FtZWxDYXNlIC0+IGRhc2gtY2FzZVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplKHByb3ApIHtcblx0ICBpZiAocHJvcENhY2hlW3Byb3BdKSB7XG5cdCAgICByZXR1cm4gcHJvcENhY2hlW3Byb3BdO1xuXHQgIH1cblx0ICB2YXIgcmVzID0gcHJlZml4KHByb3ApO1xuXHQgIHByb3BDYWNoZVtwcm9wXSA9IHByb3BDYWNoZVtyZXNdID0gcmVzO1xuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdXRvIGRldGVjdCB0aGUgYXBwcm9wcmlhdGUgcHJlZml4IGZvciBhIENTUyBwcm9wZXJ0eS5cblx0ICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzUyMzY5MlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJlZml4KHByb3ApIHtcblx0ICBwcm9wID0gaHlwaGVuYXRlKHByb3ApO1xuXHQgIHZhciBjYW1lbCA9IGNhbWVsaXplKHByb3ApO1xuXHQgIHZhciB1cHBlciA9IGNhbWVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWwuc2xpY2UoMSk7XG5cdCAgaWYgKCF0ZXN0RWwpIHtcblx0ICAgIHRlc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgIH1cblx0ICB2YXIgaSA9IHByZWZpeGVzLmxlbmd0aDtcblx0ICB2YXIgcHJlZml4ZWQ7XG5cdCAgaWYgKGNhbWVsICE9PSAnZmlsdGVyJyAmJiBjYW1lbCBpbiB0ZXN0RWwuc3R5bGUpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGtlYmFiOiBwcm9wLFxuXHQgICAgICBjYW1lbDogY2FtZWxcblx0ICAgIH07XG5cdCAgfVxuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHByZWZpeGVkID0gY2FtZWxQcmVmaXhlc1tpXSArIHVwcGVyO1xuXHQgICAgaWYgKHByZWZpeGVkIGluIHRlc3RFbC5zdHlsZSkge1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIGtlYmFiOiBwcmVmaXhlc1tpXSArIHByb3AsXG5cdCAgICAgICAgY2FtZWw6IHByZWZpeGVkXG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyB4bGlua1xuXHR2YXIgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcblx0dmFyIHhsaW5rUkUgPSAvXnhsaW5rOi87XG5cdFxuXHQvLyBjaGVjayBmb3IgYXR0cmlidXRlcyB0aGF0IHByb2hpYml0IGludGVycG9sYXRpb25zXG5cdHZhciBkaXNhbGxvd2VkSW50ZXJwQXR0clJFID0gL152LXxeOnxeQHxeKD86aXN8dHJhbnNpdGlvbnx0cmFuc2l0aW9uLW1vZGV8ZGVib3VuY2V8dHJhY2stYnl8c3RhZ2dlcnxlbnRlci1zdGFnZ2VyfGxlYXZlLXN0YWdnZXIpJC87XG5cdC8vIHRoZXNlIGF0dHJpYnV0ZXMgc2hvdWxkIGFsc28gc2V0IHRoZWlyIGNvcnJlc3BvbmRpbmcgcHJvcGVydGllc1xuXHQvLyBiZWNhdXNlIHRoZXkgb25seSBhZmZlY3QgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGVsZW1lbnRcblx0dmFyIGF0dHJXaXRoUHJvcHNSRSA9IC9eKD86dmFsdWV8Y2hlY2tlZHxzZWxlY3RlZHxtdXRlZCkkLztcblx0Ly8gdGhlc2UgYXR0cmlidXRlcyBleHBlY3QgZW51bXJhdGVkIHZhbHVlcyBvZiBcInRydWVcIiBvciBcImZhbHNlXCJcblx0Ly8gYnV0IGFyZSBub3QgYm9vbGVhbiBhdHRyaWJ1dGVzXG5cdHZhciBlbnVtZXJhdGVkQXR0clJFID0gL14oPzpkcmFnZ2FibGV8Y29udGVudGVkaXRhYmxlfHNwZWxsY2hlY2spJC87XG5cdFxuXHQvLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBzZXQgYSBoaWRkZW4gcHJvcGVydHkgZm9yXG5cdC8vIGJpbmRpbmcgdi1tb2RlbCB0byBvYmplY3QgdmFsdWVzXG5cdHZhciBtb2RlbFByb3BzID0ge1xuXHQgIHZhbHVlOiAnX3ZhbHVlJyxcblx0ICAndHJ1ZS12YWx1ZSc6ICdfdHJ1ZVZhbHVlJyxcblx0ICAnZmFsc2UtdmFsdWUnOiAnX2ZhbHNlVmFsdWUnXG5cdH07XG5cdFxuXHR2YXIgYmluZCQxID0ge1xuXHRcblx0ICBwcmlvcml0eTogQklORCxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG5cdCAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lO1xuXHQgICAgLy8gc2hvdWxkIGJlIGRlZXAgd2F0Y2ggb24gb2JqZWN0IG1vZGVcblx0ICAgIGlmICghYXR0cikge1xuXHQgICAgICB0aGlzLmRlZXAgPSB0cnVlO1xuXHQgICAgfVxuXHQgICAgLy8gaGFuZGxlIGludGVycG9sYXRpb24gYmluZGluZ3Ncblx0ICAgIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuXHQgICAgdmFyIHRva2VucyA9IGRlc2NyaXB0b3IuaW50ZXJwO1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbnMgd2l0aCBvbmUtdGltZSB0b2tlbnNcblx0ICAgICAgaWYgKGRlc2NyaXB0b3IuaGFzT25lVGltZSkge1xuXHQgICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IHRva2Vuc1RvRXhwKHRva2VucywgdGhpcy5fc2NvcGUgfHwgdGhpcy52bSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIG9ubHkgYWxsb3cgYmluZGluZyBvbiBuYXRpdmUgYXR0cmlidXRlc1xuXHQgICAgICBpZiAoZGlzYWxsb3dlZEludGVycEF0dHJSRS50ZXN0KGF0dHIpIHx8IGF0dHIgPT09ICduYW1lJyAmJiAodGFnID09PSAnUEFSVElBTCcgfHwgdGFnID09PSAnU0xPVCcpKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2F0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGlzIG5vdCBhbGxvd2VkIGluIFZ1ZS5qcyAnICsgJ2RpcmVjdGl2ZXMgYW5kIHNwZWNpYWwgYXR0cmlidXRlcy4nLCB0aGlzLnZtKTtcblx0ICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICAgICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB2YXIgcmF3ID0gYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICc7XG5cdCAgICAgICAgLy8gd2FybiBzcmNcblx0ICAgICAgICBpZiAoYXR0ciA9PT0gJ3NyYycpIHtcblx0ICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzcmNcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ2EgNDA0IHJlcXVlc3QuIFVzZSB2LWJpbmQ6c3JjIGluc3RlYWQuJywgdGhpcy52bSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyB3YXJuIHN0eWxlXG5cdCAgICAgICAgaWYgKGF0dHIgPT09ICdzdHlsZScpIHtcblx0ICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzdHlsZVwiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAndGhlIGF0dHJpYnV0ZSB0byBiZSBkaXNjYXJkZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuICcgKyAnVXNlIHYtYmluZDpzdHlsZSBpbnN0ZWFkLicsIHRoaXMudm0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAodGhpcy5pbnZhbGlkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG5cdCAgICBpZiAodGhpcy5hcmcpIHtcblx0ICAgICAgdGhpcy5oYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8vIHNoYXJlIG9iamVjdCBoYW5kbGVyIHdpdGggdi1iaW5kOmNsYXNzXG5cdCAgaGFuZGxlT2JqZWN0OiBzdHlsZS5oYW5kbGVPYmplY3QsXG5cdFxuXHQgIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdmFyIGludGVycCA9IHRoaXMuZGVzY3JpcHRvci5pbnRlcnA7XG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMuY2FtZWwpIHtcblx0ICAgICAgYXR0ciA9IGNhbWVsaXplKGF0dHIpO1xuXHQgICAgfVxuXHQgICAgaWYgKCFpbnRlcnAgJiYgYXR0cldpdGhQcm9wc1JFLnRlc3QoYXR0cikgJiYgYXR0ciBpbiBlbCkge1xuXHQgICAgICB2YXIgYXR0clZhbHVlID0gYXR0ciA9PT0gJ3ZhbHVlJyA/IHZhbHVlID09IG51bGwgLy8gSUU5IHdpbGwgc2V0IGlucHV0LnZhbHVlIHRvIFwibnVsbFwiIGZvciBudWxsLi4uXG5cdCAgICAgID8gJycgOiB2YWx1ZSA6IHZhbHVlO1xuXHRcblx0ICAgICAgaWYgKGVsW2F0dHJdICE9PSBhdHRyVmFsdWUpIHtcblx0ICAgICAgICBlbFthdHRyXSA9IGF0dHJWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gc2V0IG1vZGVsIHByb3BzXG5cdCAgICB2YXIgbW9kZWxQcm9wID0gbW9kZWxQcm9wc1thdHRyXTtcblx0ICAgIGlmICghaW50ZXJwICYmIG1vZGVsUHJvcCkge1xuXHQgICAgICBlbFttb2RlbFByb3BdID0gdmFsdWU7XG5cdCAgICAgIC8vIHVwZGF0ZSB2LW1vZGVsIGlmIHByZXNlbnRcblx0ICAgICAgdmFyIG1vZGVsID0gZWwuX192X21vZGVsO1xuXHQgICAgICBpZiAobW9kZWwpIHtcblx0ICAgICAgICBtb2RlbC5saXN0ZW5lcigpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBkbyBub3Qgc2V0IHZhbHVlIGF0dHJpYnV0ZSBmb3IgdGV4dGFyZWFcblx0ICAgIGlmIChhdHRyID09PSAndmFsdWUnICYmIGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyB1cGRhdGUgYXR0cmlidXRlXG5cdCAgICBpZiAoZW51bWVyYXRlZEF0dHJSRS50ZXN0KGF0dHIpKSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZScpO1xuXHQgICAgfSBlbHNlIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlICE9PSBmYWxzZSkge1xuXHQgICAgICBpZiAoYXR0ciA9PT0gJ2NsYXNzJykge1xuXHQgICAgICAgIC8vIGhhbmRsZSBlZGdlIGNhc2UgIzE5NjA6XG5cdCAgICAgICAgLy8gY2xhc3MgaW50ZXJwb2xhdGlvbiBzaG91bGQgbm90IG92ZXJ3cml0ZSBWdWUgdHJhbnNpdGlvbiBjbGFzc1xuXHQgICAgICAgIGlmIChlbC5fX3ZfdHJhbnMpIHtcblx0ICAgICAgICAgIHZhbHVlICs9ICcgJyArIGVsLl9fdl90cmFucy5pZCArICctdHJhbnNpdGlvbic7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldENsYXNzKGVsLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoeGxpbmtSRS50ZXN0KGF0dHIpKSB7XG5cdCAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywgYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBlbCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IEVMLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIXRoaXMuYXJnKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBpZCA9IHRoaXMuaWQgPSBjYW1lbGl6ZSh0aGlzLmFyZyk7XG5cdCAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzO1xuXHQgICAgaWYgKGhhc093bihyZWZzLCBpZCkpIHtcblx0ICAgICAgcmVmc1tpZF0gPSB0aGlzLmVsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUocmVmcywgaWQsIHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcblx0ICAgIGlmIChyZWZzW3RoaXMuaWRdID09PSB0aGlzLmVsKSB7XG5cdCAgICAgIHJlZnNbdGhpcy5pZF0gPSBudWxsO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciByZWYgPSB7XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1yZWY6JyArIHRoaXMuYXJnICsgJyBtdXN0IGJlIHVzZWQgb24gYSBjaGlsZCAnICsgJ2NvbXBvbmVudC4gRm91bmQgb24gPCcgKyB0aGlzLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+LicsIHRoaXMudm0pO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBjbG9hayA9IHtcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHRoaXMudm0uJG9uY2UoJ3ByZS1ob29rOmNvbXBpbGVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtY2xvYWsnKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIG11c3QgZXhwb3J0IHBsYWluIG9iamVjdFxuXHR2YXIgZGlyZWN0aXZlcyA9IHtcblx0ICB0ZXh0OiB0ZXh0JDEsXG5cdCAgaHRtbDogaHRtbCxcblx0ICAnZm9yJzogdkZvcixcblx0ICAnaWYnOiB2SWYsXG5cdCAgc2hvdzogc2hvdyxcblx0ICBtb2RlbDogbW9kZWwsXG5cdCAgb246IG9uJDEsXG5cdCAgYmluZDogYmluZCQxLFxuXHQgIGVsOiBlbCxcblx0ICByZWY6IHJlZixcblx0ICBjbG9hazogY2xvYWtcblx0fTtcblx0XG5cdHZhciB2Q2xhc3MgPSB7XG5cdFxuXHQgIGRlZXA6IHRydWUsXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAoIXZhbHVlKSB7XG5cdCAgICAgIHRoaXMuY2xlYW51cCgpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRoaXMuc2V0Q2xhc3ModmFsdWUudHJpbSgpLnNwbGl0KC9cXHMrLykpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5zZXRDbGFzcyhub3JtYWxpemUkMSh2YWx1ZSkpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHNldENsYXNzOiBmdW5jdGlvbiBzZXRDbGFzcyh2YWx1ZSkge1xuXHQgICAgdGhpcy5jbGVhbnVwKHZhbHVlKTtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciB2YWwgPSB2YWx1ZVtpXTtcblx0ICAgICAgaWYgKHZhbCkge1xuXHQgICAgICAgIGFwcGx5KHRoaXMuZWwsIHZhbCwgYWRkQ2xhc3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLnByZXZLZXlzID0gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgY2xlYW51cDogZnVuY3Rpb24gY2xlYW51cCh2YWx1ZSkge1xuXHQgICAgdmFyIHByZXZLZXlzID0gdGhpcy5wcmV2S2V5cztcblx0ICAgIGlmICghcHJldktleXMpIHJldHVybjtcblx0ICAgIHZhciBpID0gcHJldktleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIga2V5ID0gcHJldktleXNbaV07XG5cdCAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUuaW5kZXhPZihrZXkpIDwgMCkge1xuXHQgICAgICAgIGFwcGx5KHRoaXMuZWwsIGtleSwgcmVtb3ZlQ2xhc3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE5vcm1hbGl6ZSBvYmplY3RzIGFuZCBhcnJheXMgKHBvdGVudGlhbGx5IGNvbnRhaW5pbmcgb2JqZWN0cylcblx0ICogaW50byBhcnJheSBvZiBzdHJpbmdzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheTxTdHJpbmd8T2JqZWN0Pn0gdmFsdWVcblx0ICogQHJldHVybiB7QXJyYXk8U3RyaW5nPn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBub3JtYWxpemUkMSh2YWx1ZSkge1xuXHQgIHZhciByZXMgPSBbXTtcblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBfa2V5ID0gdmFsdWVbaV07XG5cdCAgICAgIGlmIChfa2V5KSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBfa2V5ID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgcmVzLnB1c2goX2tleSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGZvciAodmFyIGsgaW4gX2tleSkge1xuXHQgICAgICAgICAgICBpZiAoX2tleVtrXSkgcmVzLnB1c2goayk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuXHQgICAgICBpZiAodmFsdWVba2V5XSkgcmVzLnB1c2goa2V5KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBvciByZW1vdmUgYSBjbGFzcy9jbGFzc2VzIG9uIGFuIGVsZW1lbnRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBjbGFzcyBuYW1lLiBUaGlzIG1heSBvciBtYXkgbm90XG5cdCAqICAgICAgICAgICAgICAgICAgICAgY29udGFpbiBhIHNwYWNlIGNoYXJhY3RlciwgaW4gc3VjaCBhXG5cdCAqICAgICAgICAgICAgICAgICAgICAgY2FzZSB3ZSdsbCBkZWFsIHdpdGggbXVsdGlwbGUgY2xhc3Ncblx0ICogICAgICAgICAgICAgICAgICAgICBuYW1lcyBhdCBvbmNlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFwcGx5KGVsLCBrZXksIGZuKSB7XG5cdCAga2V5ID0ga2V5LnRyaW0oKTtcblx0ICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcblx0ICAgIGZuKGVsLCBrZXkpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICAvLyBUaGUga2V5IGNvbnRhaW5zIG9uZSBvciBtb3JlIHNwYWNlIGNoYXJhY3RlcnMuXG5cdCAgLy8gU2luY2UgYSBjbGFzcyBuYW1lIGRvZXNuJ3QgYWNjZXB0IHN1Y2ggY2hhcmFjdGVycywgd2Vcblx0ICAvLyB0cmVhdCBpdCBhcyBtdWx0aXBsZSBjbGFzc2VzLlxuXHQgIHZhciBrZXlzID0ga2V5LnNwbGl0KC9cXHMrLyk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZm4oZWwsIGtleXNbaV0pO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGNvbXBvbmVudCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IENPTVBPTkVOVCxcblx0XG5cdCAgcGFyYW1zOiBbJ2tlZXAtYWxpdmUnLCAndHJhbnNpdGlvbi1tb2RlJywgJ2lubGluZS10ZW1wbGF0ZSddLFxuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cC4gVHdvIHBvc3NpYmxlIHVzYWdlczpcblx0ICAgKlxuXHQgICAqIC0gc3RhdGljOlxuXHQgICAqICAgPGNvbXA+IG9yIDxkaXYgdi1jb21wb25lbnQ9XCJjb21wXCI+XG5cdCAgICpcblx0ICAgKiAtIGR5bmFtaWM6XG5cdCAgICogICA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cblx0ICAgKi9cblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIGlmICghdGhpcy5lbC5fX3Z1ZV9fKSB7XG5cdCAgICAgIC8vIGtlZXAtYWxpdmUgY2FjaGVcblx0ICAgICAgdGhpcy5rZWVwQWxpdmUgPSB0aGlzLnBhcmFtcy5rZWVwQWxpdmU7XG5cdCAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBjaGVjayBpbmxpbmUtdGVtcGxhdGVcblx0ICAgICAgaWYgKHRoaXMucGFyYW1zLmlubGluZVRlbXBsYXRlKSB7XG5cdCAgICAgICAgLy8gZXh0cmFjdCBpbmxpbmUgdGVtcGxhdGUgYXMgYSBEb2N1bWVudEZyYWdtZW50XG5cdCAgICAgICAgdGhpcy5pbmxpbmVUZW1wbGF0ZSA9IGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNvbXBvbmVudCByZXNvbHV0aW9uIHJlbGF0ZWQgc3RhdGVcblx0ICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSB0aGlzLkNvbXBvbmVudCA9IG51bGw7XG5cdCAgICAgIC8vIHRyYW5zaXRpb24gcmVsYXRlZCBzdGF0ZVxuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscyA9IDA7XG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG5cdCAgICAgIC8vIGNyZWF0ZSBhIHJlZiBhbmNob3Jcblx0ICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtY29tcG9uZW50Jyk7XG5cdCAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgICAvLyByZW1vdmUgaXMgYXR0cmlidXRlLlxuXHQgICAgICAvLyB0aGlzIGlzIHJlbW92ZWQgZHVyaW5nIGNvbXBpbGF0aW9uLCBidXQgYmVjYXVzZSBjb21waWxhdGlvbiBpc1xuXHQgICAgICAvLyBjYWNoZWQsIHdoZW4gdGhlIGNvbXBvbmVudCBpcyB1c2VkIGVsc2V3aGVyZSB0aGlzIGF0dHJpYnV0ZVxuXHQgICAgICAvLyB3aWxsIHJlbWFpbiBhdCBsaW5rIHRpbWUuXG5cdCAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xuXHQgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnOmlzJyk7XG5cdCAgICAgIC8vIHJlbW92ZSByZWYsIHNhbWUgYXMgYWJvdmVcblx0ICAgICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcblx0ICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgndi1yZWY6JyArIGh5cGhlbmF0ZSh0aGlzLmRlc2NyaXB0b3IucmVmKSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gaWYgc3RhdGljLCBidWlsZCByaWdodCBub3cuXG5cdCAgICAgIGlmICh0aGlzLmxpdGVyYWwpIHtcblx0ICAgICAgICB0aGlzLnNldENvbXBvbmVudCh0aGlzLmV4cHJlc3Npb24pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2Nhbm5vdCBtb3VudCBjb21wb25lbnQgXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiICcgKyAnb24gYWxyZWFkeSBtb3VudGVkIGVsZW1lbnQ6ICcgKyB0aGlzLmVsKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBQdWJsaWMgdXBkYXRlLCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIgaW4gdGhlIGR5bmFtaWNcblx0ICAgKiBsaXRlcmFsIHNjZW5hcmlvLCBlLmcuIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuXHQgICAqL1xuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKCF0aGlzLmxpdGVyYWwpIHtcblx0ICAgICAgdGhpcy5zZXRDb21wb25lbnQodmFsdWUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFN3aXRjaCBkeW5hbWljIGNvbXBvbmVudHMuIE1heSByZXNvbHZlIHRoZSBjb21wb25lbnRcblx0ICAgKiBhc3luY2hyb25vdXNseSwgYW5kIHBlcmZvcm0gdHJhbnNpdGlvbiBiYXNlZCBvblxuXHQgICAqIHNwZWNpZmllZCB0cmFuc2l0aW9uIG1vZGUuIEFjY2VwdHMgYSBmZXcgYWRkaXRpb25hbFxuXHQgICAqIGFyZ3VtZW50cyBzcGVjaWZpY2FsbHkgZm9yIHZ1ZS1yb3V0ZXIuXG5cdCAgICpcblx0ICAgKiBUaGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdoZW4gdGhlIGZ1bGwgdHJhbnNpdGlvbiBpc1xuXHQgICAqIGZpbmlzaGVkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBzZXRDb21wb25lbnQ6IGZ1bmN0aW9uIHNldENvbXBvbmVudCh2YWx1ZSwgY2IpIHtcblx0ICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcblx0ICAgIGlmICghdmFsdWUpIHtcblx0ICAgICAgLy8ganVzdCByZW1vdmUgY3VycmVudFxuXHQgICAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG5cdCAgICAgIHRoaXMucmVtb3ZlKHRoaXMuY2hpbGRWTSwgY2IpO1xuXHQgICAgICB0aGlzLmNoaWxkVk0gPSBudWxsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICB0aGlzLnJlc29sdmVDb21wb25lbnQodmFsdWUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLm1vdW50Q29tcG9uZW50KGNiKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVzb2x2ZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG5cdCAgICogdGhlIGNoaWxkIHZtLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKi9cblx0XG5cdCAgcmVzb2x2ZUNvbXBvbmVudDogZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgY2IpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuXHQgICAgICBzZWxmLkNvbXBvbmVudE5hbWUgPSBDb21wb25lbnQub3B0aW9ucy5uYW1lIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBudWxsKTtcblx0ICAgICAgc2VsZi5Db21wb25lbnQgPSBDb21wb25lbnQ7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9KTtcblx0ICAgIHRoaXMudm0uX3Jlc29sdmVDb21wb25lbnQodmFsdWUsIHRoaXMucGVuZGluZ0NvbXBvbmVudENiKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2UgdXNpbmcgdGhlIGN1cnJlbnQgY29uc3RydWN0b3IgYW5kXG5cdCAgICogcmVwbGFjZSB0aGUgZXhpc3RpbmcgaW5zdGFuY2UuIFRoaXMgbWV0aG9kIGRvZXNuJ3QgY2FyZVxuXHQgICAqIHdoZXRoZXIgdGhlIG5ldyBjb21wb25lbnQgYW5kIHRoZSBvbGQgb25lIGFyZSBhY3R1YWxseVxuXHQgICAqIHRoZSBzYW1lLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gbW91bnRDb21wb25lbnQoY2IpIHtcblx0ICAgIC8vIGFjdHVhbCBtb3VudFxuXHQgICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGFjdGl2YXRlSG9va3MgPSB0aGlzLkNvbXBvbmVudC5vcHRpb25zLmFjdGl2YXRlO1xuXHQgICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG5cdCAgICB2YXIgbmV3Q29tcG9uZW50ID0gdGhpcy5idWlsZCgpO1xuXHQgICAgaWYgKGFjdGl2YXRlSG9va3MgJiYgIWNhY2hlZCkge1xuXHQgICAgICB0aGlzLndhaXRpbmdGb3IgPSBuZXdDb21wb25lbnQ7XG5cdCAgICAgIGNhbGxBY3RpdmF0ZUhvb2tzKGFjdGl2YXRlSG9va3MsIG5ld0NvbXBvbmVudCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChzZWxmLndhaXRpbmdGb3IgIT09IG5ld0NvbXBvbmVudCkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZWxmLndhaXRpbmdGb3IgPSBudWxsO1xuXHQgICAgICAgIHNlbGYudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyB1cGRhdGUgcmVmIGZvciBrZXB0LWFsaXZlIGNvbXBvbmVudFxuXHQgICAgICBpZiAoY2FjaGVkKSB7XG5cdCAgICAgICAgbmV3Q29tcG9uZW50Ll91cGRhdGVSZWYoKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hlbiB0aGUgY29tcG9uZW50IGNoYW5nZXMgb3IgdW5iaW5kcyBiZWZvcmUgYW4gYXN5bmNcblx0ICAgKiBjb25zdHJ1Y3RvciBpcyByZXNvbHZlZCwgd2UgbmVlZCB0byBpbnZhbGlkYXRlIGl0c1xuXHQgICAqIHBlbmRpbmcgY2FsbGJhY2suXG5cdCAgICovXG5cdFxuXHQgIGludmFsaWRhdGVQZW5kaW5nOiBmdW5jdGlvbiBpbnZhbGlkYXRlUGVuZGluZygpIHtcblx0ICAgIGlmICh0aGlzLnBlbmRpbmdDb21wb25lbnRDYikge1xuXHQgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYi5jYW5jZWwoKTtcblx0ICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBudWxsO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc3RhbnRpYXRlL2luc2VydCBhIG5ldyBjaGlsZCB2bS5cblx0ICAgKiBJZiBrZWVwIGFsaXZlIGFuZCBoYXMgY2FjaGVkIGluc3RhbmNlLCBpbnNlcnQgdGhhdFxuXHQgICAqIGluc3RhbmNlOyBvdGhlcndpc2UgYnVpbGQgYSBuZXcgb25lIGFuZCBjYWNoZSBpdC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0cmFPcHRpb25zXVxuXHQgICAqIEByZXR1cm4ge1Z1ZX0gLSB0aGUgY3JlYXRlZCBpbnN0YW5jZVxuXHQgICAqL1xuXHRcblx0ICBidWlsZDogZnVuY3Rpb24gYnVpbGQoZXh0cmFPcHRpb25zKSB7XG5cdCAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcblx0ICAgIGlmIChjYWNoZWQpIHtcblx0ICAgICAgcmV0dXJuIGNhY2hlZDtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLkNvbXBvbmVudCkge1xuXHQgICAgICAvLyBkZWZhdWx0IG9wdGlvbnNcblx0ICAgICAgdmFyIG9wdGlvbnMgPSB7XG5cdCAgICAgICAgbmFtZTogdGhpcy5Db21wb25lbnROYW1lLFxuXHQgICAgICAgIGVsOiBjbG9uZU5vZGUodGhpcy5lbCksXG5cdCAgICAgICAgdGVtcGxhdGU6IHRoaXMuaW5saW5lVGVtcGxhdGUsXG5cdCAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGFkZCB0aGUgY2hpbGQgd2l0aCBjb3JyZWN0IHBhcmVudFxuXHQgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGl0cyBwYXJlbnRcblx0ICAgICAgICAvLyBzaG91bGQgYmUgdGhlIHRyYW5zY2x1c2lvbiBob3N0LlxuXHQgICAgICAgIHBhcmVudDogdGhpcy5faG9zdCB8fCB0aGlzLnZtLFxuXHQgICAgICAgIC8vIGlmIG5vIGlubGluZS10ZW1wbGF0ZSwgdGhlbiB0aGUgY29tcGlsZWRcblx0ICAgICAgICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLlxuXHQgICAgICAgIF9saW5rZXJDYWNoYWJsZTogIXRoaXMuaW5saW5lVGVtcGxhdGUsXG5cdCAgICAgICAgX3JlZjogdGhpcy5kZXNjcmlwdG9yLnJlZixcblx0ICAgICAgICBfYXNDb21wb25lbnQ6IHRydWUsXG5cdCAgICAgICAgX2lzUm91dGVyVmlldzogdGhpcy5faXNSb3V0ZXJWaWV3LFxuXHQgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcblx0ICAgICAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2Vcblx0ICAgICAgICAvLyBhbmQgaXRzIGhvc3QuXG5cdCAgICAgICAgX2NvbnRleHQ6IHRoaXMudm0sXG5cdCAgICAgICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcblx0ICAgICAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuXHQgICAgICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG5cdCAgICAgICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuXHQgICAgICAgIF9zY29wZTogdGhpcy5fc2NvcGUsXG5cdCAgICAgICAgLy8gcGFzcyBpbiB0aGUgb3duZXIgZnJhZ21lbnQgb2YgdGhpcyBjb21wb25lbnQuXG5cdCAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3Nhcnkgc28gdGhhdCB0aGUgZnJhZ21lbnQgY2FuIGtlZXBcblx0ICAgICAgICAvLyB0cmFjayBvZiBpdHMgY29udGFpbmVkIGNvbXBvbmVudHMgaW4gb3JkZXIgdG9cblx0ICAgICAgICAvLyBjYWxsIGF0dGFjaC9kZXRhY2ggaG9va3MgZm9yIHRoZW0uXG5cdCAgICAgICAgX2ZyYWc6IHRoaXMuX2ZyYWdcblx0ICAgICAgfTtcblx0ICAgICAgLy8gZXh0cmEgb3B0aW9uc1xuXHQgICAgICAvLyBpbiAxLjAuMCB0aGlzIGlzIHVzZWQgYnkgdnVlLXJvdXRlciBvbmx5XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoZXh0cmFPcHRpb25zKSB7XG5cdCAgICAgICAgZXh0ZW5kKG9wdGlvbnMsIGV4dHJhT3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuQ29tcG9uZW50KG9wdGlvbnMpO1xuXHQgICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgICB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF0gPSBjaGlsZDtcblx0ICAgICAgfVxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbC5oYXNBdHRyaWJ1dGUoJ3RyYW5zaXRpb24nKSAmJiBjaGlsZC5faXNGcmFnbWVudCkge1xuXHQgICAgICAgIHdhcm4oJ1RyYW5zaXRpb25zIHdpbGwgbm90IHdvcmsgb24gYSBmcmFnbWVudCBpbnN0YW5jZS4gJyArICdUZW1wbGF0ZTogJyArIGNoaWxkLiRvcHRpb25zLnRlbXBsYXRlLCBjaGlsZCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGNoaWxkO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyeSB0byBnZXQgYSBjYWNoZWQgaW5zdGFuY2Ugb2YgdGhlIGN1cnJlbnQgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cblx0ICAgKi9cblx0XG5cdCAgZ2V0Q2FjaGVkOiBmdW5jdGlvbiBnZXRDYWNoZWQoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5rZWVwQWxpdmUgJiYgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRlYXJkb3duIHRoZSBjdXJyZW50IGNoaWxkLCBidXQgZGVmZXJzIGNsZWFudXAgc29cblx0ICAgKiB0aGF0IHdlIGNhbiBzZXBhcmF0ZSB0aGUgZGVzdHJveSBhbmQgcmVtb3ZhbCBzdGVwcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJcblx0ICAgKi9cblx0XG5cdCAgdW5idWlsZDogZnVuY3Rpb24gdW5idWlsZChkZWZlcikge1xuXHQgICAgaWYgKHRoaXMud2FpdGluZ0Zvcikge1xuXHQgICAgICBpZiAoIXRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgdGhpcy53YWl0aW5nRm9yLiRkZXN0cm95KCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy53YWl0aW5nRm9yID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRWTTtcblx0ICAgIGlmICghY2hpbGQgfHwgdGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgaWYgKGNoaWxkKSB7XG5cdCAgICAgICAgLy8gcmVtb3ZlIHJlZlxuXHQgICAgICAgIGNoaWxkLl9pbmFjdGl2ZSA9IHRydWU7XG5cdCAgICAgICAgY2hpbGQuX3VwZGF0ZVJlZih0cnVlKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyB0aGUgc29sZSBwdXJwb3NlIG9mIGBkZWZlckNsZWFudXBgIGlzIHNvIHRoYXQgd2UgY2FuXG5cdCAgICAvLyBcImRlYWN0aXZhdGVcIiB0aGUgdm0gcmlnaHQgbm93IGFuZCBwZXJmb3JtIERPTSByZW1vdmFsXG5cdCAgICAvLyBsYXRlci5cblx0ICAgIGNoaWxkLiRkZXN0cm95KGZhbHNlLCBkZWZlcik7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIGN1cnJlbnQgZGVzdHJveWVkIGNoaWxkIGFuZCBtYW51YWxseSBkb1xuXHQgICAqIHRoZSBjbGVhbnVwIGFmdGVyIHJlbW92YWwuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqL1xuXHRcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShjaGlsZCwgY2IpIHtcblx0ICAgIHZhciBrZWVwQWxpdmUgPSB0aGlzLmtlZXBBbGl2ZTtcblx0ICAgIGlmIChjaGlsZCkge1xuXHQgICAgICAvLyB3ZSBtYXkgaGF2ZSBhIGNvbXBvbmVudCBzd2l0Y2ggd2hlbiBhIHByZXZpb3VzXG5cdCAgICAgIC8vIGNvbXBvbmVudCBpcyBzdGlsbCBiZWluZyB0cmFuc2l0aW9uZWQgb3V0LlxuXHQgICAgICAvLyB3ZSB3YW50IHRvIHRyaWdnZXIgb25seSBvbmUgbGFzdGVzdCBpbnNlcnRpb24gY2Jcblx0ICAgICAgLy8gd2hlbiB0aGUgZXhpc3RpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcy4gKCMxMTE5KVxuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscysrO1xuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBjYjtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICBjaGlsZC4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFscy0tO1xuXHQgICAgICAgIGlmICgha2VlcEFsaXZlKSBjaGlsZC5fY2xlYW51cCgpO1xuXHQgICAgICAgIGlmICghc2VsZi5wZW5kaW5nUmVtb3ZhbHMgJiYgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKSB7XG5cdCAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IoKTtcblx0ICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSBpZiAoY2IpIHtcblx0ICAgICAgY2IoKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBBY3R1YWxseSBzd2FwIHRoZSBjb21wb25lbnRzLCBkZXBlbmRpbmcgb24gdGhlXG5cdCAgICogdHJhbnNpdGlvbiBtb2RlLiBEZWZhdWx0cyB0byBzaW11bHRhbmVvdXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICB0cmFuc2l0aW9uOiBmdW5jdGlvbiB0cmFuc2l0aW9uKHRhcmdldCwgY2IpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBjdXJyZW50ID0gdGhpcy5jaGlsZFZNO1xuXHQgICAgLy8gZm9yIGRldnRvb2wgaW5zcGVjdGlvblxuXHQgICAgaWYgKGN1cnJlbnQpIGN1cnJlbnQuX2luYWN0aXZlID0gdHJ1ZTtcblx0ICAgIHRhcmdldC5faW5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIHRoaXMuY2hpbGRWTSA9IHRhcmdldDtcblx0ICAgIHN3aXRjaCAoc2VsZi5wYXJhbXMudHJhbnNpdGlvbk1vZGUpIHtcblx0ICAgICAgY2FzZSAnaW4tb3V0Jzpcblx0ICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgY2IpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdvdXQtaW4nOlxuXHQgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCk7XG5cdCAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBVbmJpbmQuXG5cdCAgICovXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuXHQgICAgLy8gRG8gbm90IGRlZmVyIGNsZWFudXAgd2hlbiB1bmJpbmRpbmdcblx0ICAgIHRoaXMudW5idWlsZCgpO1xuXHQgICAgLy8gZGVzdHJveSBhbGwga2VlcC1hbGl2ZSBjYWNoZWQgaW5zdGFuY2VzXG5cdCAgICBpZiAodGhpcy5jYWNoZSkge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZSkge1xuXHQgICAgICAgIHRoaXMuY2FjaGVba2V5XS4kZGVzdHJveSgpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuY2FjaGUgPSBudWxsO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGFjdGl2YXRlIGhvb2tzIGluIG9yZGVyIChhc3luY2hyb25vdXMpXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGhvb2tzXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNhbGxBY3RpdmF0ZUhvb2tzKGhvb2tzLCB2bSwgY2IpIHtcblx0ICB2YXIgdG90YWwgPSBob29rcy5sZW5ndGg7XG5cdCAgdmFyIGNhbGxlZCA9IDA7XG5cdCAgaG9va3NbMF0uY2FsbCh2bSwgbmV4dCk7XG5cdCAgZnVuY3Rpb24gbmV4dCgpIHtcblx0ICAgIGlmICgrK2NhbGxlZCA+PSB0b3RhbCkge1xuXHQgICAgICBjYigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaG9va3NbY2FsbGVkXS5jYWxsKHZtLCBuZXh0KTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBwcm9wQmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuXHR2YXIgZW1wdHkgPSB7fTtcblx0XG5cdC8vIHJlZ2V4ZXNcblx0dmFyIGlkZW50UkUkMSA9IC9eWyRfYS16QS1aXStbXFx3JF0qJC87XG5cdHZhciBzZXR0YWJsZVBhdGhSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooXFwuW0EtWmEtel8kXVtcXHckXSp8XFxbW15cXFtcXF1dK1xcXSkqJC87XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBwcm9wcyBvbiBhIHJvb3QgZWxlbWVudCBhbmQgcmV0dXJuXG5cdCAqIGEgcHJvcHMgbGluayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHByb3BPcHRpb25zXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlUHJvcHMoZWwsIHByb3BPcHRpb25zLCB2bSkge1xuXHQgIHZhciBwcm9wcyA9IFtdO1xuXHQgIHZhciBuYW1lcyA9IE9iamVjdC5rZXlzKHByb3BPcHRpb25zKTtcblx0ICB2YXIgaSA9IG5hbWVzLmxlbmd0aDtcblx0ICB2YXIgb3B0aW9ucywgbmFtZSwgYXR0ciwgdmFsdWUsIHBhdGgsIHBhcnNlZCwgcHJvcDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBuYW1lID0gbmFtZXNbaV07XG5cdCAgICBvcHRpb25zID0gcHJvcE9wdGlvbnNbbmFtZV0gfHwgZW1wdHk7XG5cdFxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbmFtZSA9PT0gJyRkYXRhJykge1xuXHQgICAgICB3YXJuKCdEbyBub3QgdXNlICRkYXRhIGFzIHByb3AuJywgdm0pO1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBwcm9wcyBjb3VsZCBjb250YWluIGRhc2hlcywgd2hpY2ggd2lsbCBiZVxuXHQgICAgLy8gaW50ZXJwcmV0ZWQgYXMgbWludXMgY2FsY3VsYXRpb25zIGJ5IHRoZSBwYXJzZXJcblx0ICAgIC8vIHNvIHdlIG5lZWQgdG8gY2FtZWxpemUgdGhlIHBhdGggaGVyZVxuXHQgICAgcGF0aCA9IGNhbWVsaXplKG5hbWUpO1xuXHQgICAgaWYgKCFpZGVudFJFJDEudGVzdChwYXRoKSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcCBrZXk6IFwiJyArIG5hbWUgKyAnXCIuIFByb3Aga2V5cyAnICsgJ211c3QgYmUgdmFsaWQgaWRlbnRpZmllcnMuJywgdm0pO1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICBwcm9wID0ge1xuXHQgICAgICBuYW1lOiBuYW1lLFxuXHQgICAgICBwYXRoOiBwYXRoLFxuXHQgICAgICBvcHRpb25zOiBvcHRpb25zLFxuXHQgICAgICBtb2RlOiBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVksXG5cdCAgICAgIHJhdzogbnVsbFxuXHQgICAgfTtcblx0XG5cdCAgICBhdHRyID0gaHlwaGVuYXRlKG5hbWUpO1xuXHQgICAgLy8gZmlyc3QgY2hlY2sgZHluYW1pYyB2ZXJzaW9uXG5cdCAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIpKSA9PT0gbnVsbCkge1xuXHQgICAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLnN5bmMnKSkgIT09IG51bGwpIHtcblx0ICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVk7XG5cdCAgICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLm9uY2UnKSkgIT09IG51bGwpIHtcblx0ICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcblx0ICAgICAgLy8gaGFzIGR5bmFtaWMgYmluZGluZyFcblx0ICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcblx0ICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuXHQgICAgICB2YWx1ZSA9IHBhcnNlZC5leHByZXNzaW9uO1xuXHQgICAgICBwcm9wLmZpbHRlcnMgPSBwYXJzZWQuZmlsdGVycztcblx0ICAgICAgLy8gY2hlY2sgYmluZGluZyB0eXBlXG5cdCAgICAgIGlmIChpc0xpdGVyYWwodmFsdWUpICYmICFwYXJzZWQuZmlsdGVycykge1xuXHQgICAgICAgIC8vIGZvciBleHByZXNzaW9ucyBjb250YWluaW5nIGxpdGVyYWwgbnVtYmVycyBhbmRcblx0ICAgICAgICAvLyBib29sZWFucywgdGhlcmUncyBubyBuZWVkIHRvIHNldHVwIGEgcHJvcCBiaW5kaW5nLFxuXHQgICAgICAgIC8vIHNvIHdlIGNhbiBvcHRpbWl6ZSB0aGVtIGFzIGEgb25lLXRpbWUgc2V0LlxuXHQgICAgICAgIHByb3Aub3B0aW1pemVkTGl0ZXJhbCA9IHRydWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvcC5keW5hbWljID0gdHJ1ZTtcblx0ICAgICAgICAvLyBjaGVjayBub24tc2V0dGFibGUgcGF0aCBmb3IgdHdvLXdheSBiaW5kaW5nc1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZICYmICFzZXR0YWJsZVBhdGhSRS50ZXN0KHZhbHVlKSkge1xuXHQgICAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZO1xuXHQgICAgICAgICAgd2FybignQ2Fubm90IGJpbmQgdHdvLXdheSBwcm9wIHdpdGggbm9uLXNldHRhYmxlICcgKyAncGFyZW50IHBhdGg6ICcgKyB2YWx1ZSwgdm0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBwcm9wLnBhcmVudFBhdGggPSB2YWx1ZTtcblx0XG5cdCAgICAgIC8vIHdhcm4gcmVxdWlyZWQgdHdvLXdheVxuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvcHRpb25zLnR3b1dheSAmJiBwcm9wLm1vZGUgIT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSkge1xuXHQgICAgICAgIHdhcm4oJ1Byb3AgXCInICsgbmFtZSArICdcIiBleHBlY3RzIGEgdHdvLXdheSBiaW5kaW5nIHR5cGUuJywgdm0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEF0dHIoZWwsIGF0dHIpKSAhPT0gbnVsbCkge1xuXHQgICAgICAvLyBoYXMgbGl0ZXJhbCBiaW5kaW5nIVxuXHQgICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIC8vIGNoZWNrIHBvc3NpYmxlIGNhbWVsQ2FzZSBwcm9wIHVzYWdlXG5cdCAgICAgIHZhciBsb3dlckNhc2VOYW1lID0gcGF0aC50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICB2YWx1ZSA9IC9bQS1aXFwtXS8udGVzdChuYW1lKSAmJiAoZWwuZ2V0QXR0cmlidXRlKGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSk7XG5cdCAgICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICAgIHdhcm4oJ1Bvc3NpYmxlIHVzYWdlIGVycm9yIGZvciBwcm9wIGAnICsgbG93ZXJDYXNlTmFtZSArICdgIC0gJyArICdkaWQgeW91IG1lYW4gYCcgKyBhdHRyICsgJ2A/IEhUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlICcgKyAna2ViYWItY2FzZSBmb3IgcHJvcHMgaW4gdGVtcGxhdGVzLicsIHZtKTtcblx0ICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlcXVpcmVkKSB7XG5cdCAgICAgICAgLy8gd2FybiBtaXNzaW5nIHJlcXVpcmVkXG5cdCAgICAgICAgd2FybignTWlzc2luZyByZXF1aXJlZCBwcm9wOiAnICsgbmFtZSwgdm0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBwdXNoIHByb3Bcblx0ICAgIHByb3BzLnB1c2gocHJvcCk7XG5cdCAgfVxuXHQgIHJldHVybiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IGFwcGxpZXMgcHJvcHMgdG8gYSB2bS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gcHJvcHNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVByb3BzTGlua0ZuKHByb3BzKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHByb3BzTGlua0ZuKHZtLCBzY29wZSkge1xuXHQgICAgLy8gc3RvcmUgcmVzb2x2ZWQgcHJvcHMgaW5mb1xuXHQgICAgdm0uX3Byb3BzID0ge307XG5cdCAgICB2YXIgaW5saW5lUHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGE7XG5cdCAgICB2YXIgaSA9IHByb3BzLmxlbmd0aDtcblx0ICAgIHZhciBwcm9wLCBwYXRoLCBvcHRpb25zLCB2YWx1ZSwgcmF3O1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBwcm9wID0gcHJvcHNbaV07XG5cdCAgICAgIHJhdyA9IHByb3AucmF3O1xuXHQgICAgICBwYXRoID0gcHJvcC5wYXRoO1xuXHQgICAgICBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuXHQgICAgICB2bS5fcHJvcHNbcGF0aF0gPSBwcm9wO1xuXHQgICAgICBpZiAoaW5saW5lUHJvcHMgJiYgaGFzT3duKGlubGluZVByb3BzLCBwYXRoKSkge1xuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCBpbmxpbmVQcm9wc1twYXRoXSk7XG5cdCAgICAgIH1pZiAocmF3ID09PSBudWxsKSB7XG5cdCAgICAgICAgLy8gaW5pdGlhbGl6ZSBhYnNlbnQgcHJvcFxuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB1bmRlZmluZWQpO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb3AuZHluYW1pYykge1xuXHQgICAgICAgIC8vIGR5bmFtaWMgcHJvcFxuXHQgICAgICAgIGlmIChwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUUpIHtcblx0ICAgICAgICAgIC8vIG9uZSB0aW1lIGJpbmRpbmdcblx0ICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtLl9jb250ZXh0IHx8IHZtKS4kZ2V0KHByb3AucGFyZW50UGF0aCk7XG5cdCAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBpZiAodm0uX2NvbnRleHQpIHtcblx0ICAgICAgICAgICAgLy8gZHluYW1pYyBiaW5kaW5nXG5cdCAgICAgICAgICAgIHZtLl9iaW5kRGlyKHtcblx0ICAgICAgICAgICAgICBuYW1lOiAncHJvcCcsXG5cdCAgICAgICAgICAgICAgZGVmOiBwcm9wRGVmLFxuXHQgICAgICAgICAgICAgIHByb3A6IHByb3Bcblx0ICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgc2NvcGUpOyAvLyBlbCwgaG9zdCwgc2NvcGVcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgLy8gcm9vdCBpbnN0YW5jZVxuXHQgICAgICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2bS4kZ2V0KHByb3AucGFyZW50UGF0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHByb3Aub3B0aW1pemVkTGl0ZXJhbCkge1xuXHQgICAgICAgIC8vIG9wdGltaXplZCBsaXRlcmFsLCBjYXN0IGl0IGFuZCBqdXN0IHNldCBvbmNlXG5cdCAgICAgICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMocmF3KTtcblx0ICAgICAgICB2YWx1ZSA9IHN0cmlwcGVkID09PSByYXcgPyB0b0Jvb2xlYW4odG9OdW1iZXIocmF3KSkgOiBzdHJpcHBlZDtcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHN0cmluZyBsaXRlcmFsLCBidXQgd2UgbmVlZCB0byBjYXRlciBmb3Jcblx0ICAgICAgICAvLyBCb29sZWFuIHByb3BzIHdpdGggbm8gdmFsdWUsIG9yIHdpdGggc2FtZVxuXHQgICAgICAgIC8vIGxpdGVyYWwgdmFsdWUgKGUuZy4gZGlzYWJsZWQ9XCJkaXNhYmxlZFwiKVxuXHQgICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWxvYWRlci9pc3N1ZXMvMTgyXG5cdCAgICAgICAgdmFsdWUgPSBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gJiYgKHJhdyA9PT0gJycgfHwgcmF3ID09PSBoeXBoZW5hdGUocHJvcC5uYW1lKSkgPyB0cnVlIDogcmF3O1xuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyBhIHByb3Agd2l0aCBhIHJhd1ZhbHVlLCBhcHBseWluZyBuZWNlc3NhcnkgY29lcnNpb25zLFxuXHQgKiBkZWZhdWx0IHZhbHVlcyAmIGFzc2VydGlvbnMgYW5kIGNhbGwgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGhcblx0ICogcHJvY2Vzc2VkIHZhbHVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSByYXdWYWx1ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHJhd1ZhbHVlLCBmbikge1xuXHQgIHZhciBpc1NpbXBsZSA9IHByb3AuZHluYW1pYyAmJiBpc1NpbXBsZVBhdGgocHJvcC5wYXJlbnRQYXRoKTtcblx0ICB2YXIgdmFsdWUgPSByYXdWYWx1ZTtcblx0ICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgdmFsdWUgPSBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKTtcblx0ICB9XG5cdCAgdmFsdWUgPSBjb2VyY2VQcm9wKHByb3AsIHZhbHVlLCB2bSk7XG5cdCAgdmFyIGNvZXJjZWQgPSB2YWx1ZSAhPT0gcmF3VmFsdWU7XG5cdCAgaWYgKCFhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkpIHtcblx0ICAgIHZhbHVlID0gdW5kZWZpbmVkO1xuXHQgIH1cblx0ICBpZiAoaXNTaW1wbGUgJiYgIWNvZXJjZWQpIHtcblx0ICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZm4odmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGZuKHZhbHVlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTZXQgYSBwcm9wJ3MgaW5pdGlhbCB2YWx1ZSBvbiBhIHZtIGFuZCBpdHMgZGF0YSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG5cdCAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgZGVmaW5lUmVhY3RpdmUodm0sIHByb3AucGF0aCwgdmFsdWUpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVXBkYXRlIGEgcHJvcCdzIHZhbHVlIG9uIGEgdm0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdXBkYXRlUHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcblx0ICBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCB2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICB2bVtwcm9wLnBhdGhdID0gdmFsdWU7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYSBwcm9wLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHJldHVybiB7Kn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKSB7XG5cdCAgLy8gbm8gZGVmYXVsdCwgcmV0dXJuIHVuZGVmaW5lZFxuXHQgIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuXHQgIGlmICghaGFzT3duKG9wdGlvbnMsICdkZWZhdWx0JykpIHtcblx0ICAgIC8vIGFic2VudCBib29sZWFuIHZhbHVlIGRlZmF1bHRzIHRvIGZhbHNlXG5cdCAgICByZXR1cm4gb3B0aW9ucy50eXBlID09PSBCb29sZWFuID8gZmFsc2UgOiB1bmRlZmluZWQ7XG5cdCAgfVxuXHQgIHZhciBkZWYgPSBvcHRpb25zWydkZWZhdWx0J107XG5cdCAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheVxuXHQgIGlmIChpc09iamVjdChkZWYpKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgZGVmYXVsdCB2YWx1ZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6ICcgKyAnUHJvcHMgd2l0aCB0eXBlIE9iamVjdC9BcnJheSBtdXN0IHVzZSBhIGZhY3RvcnkgZnVuY3Rpb24gJyArICd0byByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUuJywgdm0pO1xuXHQgIH1cblx0ICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuXHQgIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIG9wdGlvbnMudHlwZSAhPT0gRnVuY3Rpb24gPyBkZWYuY2FsbCh2bSkgOiBkZWY7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcblx0ICBpZiAoIXByb3Aub3B0aW9ucy5yZXF1aXJlZCAmJiAoIC8vIG5vbi1yZXF1aXJlZFxuXHQgIHByb3AucmF3ID09PSBudWxsIHx8IC8vIGFic2NlbnRcblx0ICB2YWx1ZSA9PSBudWxsKSAvLyBudWxsIG9yIHVuZGVmaW5lZFxuXHQgICkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcblx0ICB2YXIgdHlwZSA9IG9wdGlvbnMudHlwZTtcblx0ICB2YXIgdmFsaWQgPSAhdHlwZTtcblx0ICB2YXIgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuXHQgIGlmICh0eXBlKSB7XG5cdCAgICBpZiAoIWlzQXJyYXkodHlwZSkpIHtcblx0ICAgICAgdHlwZSA9IFt0eXBlXTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZS5sZW5ndGggJiYgIXZhbGlkOyBpKyspIHtcblx0ICAgICAgdmFyIGFzc2VydGVkVHlwZSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVbaV0pO1xuXHQgICAgICBleHBlY3RlZFR5cGVzLnB1c2goYXNzZXJ0ZWRUeXBlLmV4cGVjdGVkVHlwZSk7XG5cdCAgICAgIHZhbGlkID0gYXNzZXJ0ZWRUeXBlLnZhbGlkO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIXZhbGlkKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB3YXJuKCdJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nICsgJyBFeHBlY3RlZCAnICsgZXhwZWN0ZWRUeXBlcy5tYXAoZm9ybWF0VHlwZSkuam9pbignLCAnKSArICcsIGdvdCAnICsgZm9ybWF0VmFsdWUodmFsdWUpICsgJy4nLCB2bSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciB2YWxpZGF0b3IgPSBvcHRpb25zLnZhbGlkYXRvcjtcblx0ICBpZiAodmFsaWRhdG9yKSB7XG5cdCAgICBpZiAoIXZhbGlkYXRvcih2YWx1ZSkpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nLCB2bSk7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JjZSBwYXJzaW5nIHZhbHVlIHdpdGggY29lcmNlIG9wdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHsqfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG5cdCAgdmFyIGNvZXJjZSA9IHByb3Aub3B0aW9ucy5jb2VyY2U7XG5cdCAgaWYgKCFjb2VyY2UpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBjb2VyY2UgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBjb2VyY2UodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgY29lcmNlIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIjogZXhwZWN0ZWQgZnVuY3Rpb24sIGdvdCAnICsgdHlwZW9mIGNvZXJjZSArICcuJywgdm0pO1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFzc2VydCB0aGUgdHlwZSBvZiBhIHZhbHVlXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gdHlwZVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xuXHQgIHZhciB2YWxpZDtcblx0ICB2YXIgZXhwZWN0ZWRUeXBlO1xuXHQgIGlmICh0eXBlID09PSBTdHJpbmcpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdzdHJpbmcnO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IE51bWJlcikge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ251bWJlcic7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gQm9vbGVhbikge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ2Jvb2xlYW4nO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IEZ1bmN0aW9uKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnZnVuY3Rpb24nO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IE9iamVjdCkge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ29iamVjdCc7XG5cdCAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QodmFsdWUpO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gQXJyYXkpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdhcnJheSc7XG5cdCAgICB2YWxpZCA9IGlzQXJyYXkodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcblx0ICB9XG5cdCAgcmV0dXJuIHtcblx0ICAgIHZhbGlkOiB2YWxpZCxcblx0ICAgIGV4cGVjdGVkVHlwZTogZXhwZWN0ZWRUeXBlXG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCB0eXBlIGZvciBvdXRwdXRcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFR5cGUodHlwZSkge1xuXHQgIHJldHVybiB0eXBlID8gdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR5cGUuc2xpY2UoMSkgOiAnY3VzdG9tIHR5cGUnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IHZhbHVlXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbCkge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKS5zbGljZSg4LCAtMSk7XG5cdH1cblx0XG5cdHZhciBiaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG5cdFxuXHR2YXIgcHJvcERlZiA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBjaGlsZCA9IHRoaXMudm07XG5cdCAgICB2YXIgcGFyZW50ID0gY2hpbGQuX2NvbnRleHQ7XG5cdCAgICAvLyBwYXNzZWQgaW4gZnJvbSBjb21waWxlciBkaXJlY3RseVxuXHQgICAgdmFyIHByb3AgPSB0aGlzLmRlc2NyaXB0b3IucHJvcDtcblx0ICAgIHZhciBjaGlsZEtleSA9IHByb3AucGF0aDtcblx0ICAgIHZhciBwYXJlbnRLZXkgPSBwcm9wLnBhcmVudFBhdGg7XG5cdCAgICB2YXIgdHdvV2F5ID0gcHJvcC5tb2RlID09PSBiaW5kaW5nTW9kZXMuVFdPX1dBWTtcblx0XG5cdCAgICB2YXIgcGFyZW50V2F0Y2hlciA9IHRoaXMucGFyZW50V2F0Y2hlciA9IG5ldyBXYXRjaGVyKHBhcmVudCwgcGFyZW50S2V5LCBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgIHVwZGF0ZVByb3AoY2hpbGQsIHByb3AsIHZhbCk7XG5cdCAgICB9LCB7XG5cdCAgICAgIHR3b1dheTogdHdvV2F5LFxuXHQgICAgICBmaWx0ZXJzOiBwcm9wLmZpbHRlcnMsXG5cdCAgICAgIC8vIGltcG9ydGFudDogcHJvcHMgbmVlZCB0byBiZSBvYnNlcnZlZCBvbiB0aGVcblx0ICAgICAgLy8gdi1mb3Igc2NvcGUgaWYgcHJlc2VudFxuXHQgICAgICBzY29wZTogdGhpcy5fc2NvcGVcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8vIHNldCB0aGUgY2hpbGQgaW5pdGlhbCB2YWx1ZS5cblx0ICAgIGluaXRQcm9wKGNoaWxkLCBwcm9wLCBwYXJlbnRXYXRjaGVyLnZhbHVlKTtcblx0XG5cdCAgICAvLyBzZXR1cCB0d28td2F5IGJpbmRpbmdcblx0ICAgIGlmICh0d29XYXkpIHtcblx0ICAgICAgLy8gaW1wb3J0YW50OiBkZWZlciB0aGUgY2hpbGQgd2F0Y2hlciBjcmVhdGlvbiB1bnRpbFxuXHQgICAgICAvLyB0aGUgY3JlYXRlZCBob29rIChhZnRlciBkYXRhIG9ic2VydmF0aW9uKVxuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIGNoaWxkLiRvbmNlKCdwcmUtaG9vazpjcmVhdGVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYuY2hpbGRXYXRjaGVyID0gbmV3IFdhdGNoZXIoY2hpbGQsIGNoaWxkS2V5LCBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgICAgICBwYXJlbnRXYXRjaGVyLnNldCh2YWwpO1xuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIC8vIGVuc3VyZSBzeW5jIHVwd2FyZCBiZWZvcmUgcGFyZW50IHN5bmMgZG93bi5cblx0ICAgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGluIGNhc2VzIGUuZy4gdGhlIGNoaWxkXG5cdCAgICAgICAgICAvLyBtdXRhdGVzIGEgcHJvcCBhcnJheSwgdGhlbiByZXBsYWNlcyBpdC4gKCMxNjgzKVxuXHQgICAgICAgICAgc3luYzogdHJ1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMucGFyZW50V2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgaWYgKHRoaXMuY2hpbGRXYXRjaGVyKSB7XG5cdCAgICAgIHRoaXMuY2hpbGRXYXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHF1ZXVlJDEgPSBbXTtcblx0dmFyIHF1ZXVlZCA9IGZhbHNlO1xuXHRcblx0LyoqXG5cdCAqIFB1c2ggYSBqb2IgaW50byB0aGUgcXVldWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGpvYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHB1c2hKb2Ioam9iKSB7XG5cdCAgcXVldWUkMS5wdXNoKGpvYik7XG5cdCAgaWYgKCFxdWV1ZWQpIHtcblx0ICAgIHF1ZXVlZCA9IHRydWU7XG5cdCAgICBuZXh0VGljayhmbHVzaCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRmx1c2ggdGhlIHF1ZXVlLCBhbmQgZG8gb25lIGZvcmNlZCByZWZsb3cgYmVmb3JlXG5cdCAqIHRyaWdnZXJpbmcgdHJhbnNpdGlvbnMuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmx1c2goKSB7XG5cdCAgLy8gRm9yY2UgbGF5b3V0XG5cdCAgdmFyIGYgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUkMS5sZW5ndGg7IGkrKykge1xuXHQgICAgcXVldWUkMVtpXSgpO1xuXHQgIH1cblx0ICBxdWV1ZSQxID0gW107XG5cdCAgcXVldWVkID0gZmFsc2U7XG5cdCAgLy8gZHVtbXkgcmV0dXJuLCBzbyBqcyBsaW50ZXJzIGRvbid0IGNvbXBsYWluIGFib3V0XG5cdCAgLy8gdW51c2VkIHZhcmlhYmxlIGZcblx0ICByZXR1cm4gZjtcblx0fVxuXHRcblx0dmFyIFRZUEVfVFJBTlNJVElPTiA9ICd0cmFuc2l0aW9uJztcblx0dmFyIFRZUEVfQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7XG5cdHZhciB0cmFuc0R1cmF0aW9uUHJvcCA9IHRyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcblx0dmFyIGFuaW1EdXJhdGlvblByb3AgPSBhbmltYXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcblx0XG5cdC8qKlxuXHQgKiBJZiBhIGp1c3QtZW50ZXJlZCBlbGVtZW50IGlzIGFwcGxpZWQgdGhlXG5cdCAqIGxlYXZlIGNsYXNzIHdoaWxlIGl0cyBlbnRlciB0cmFuc2l0aW9uIGhhc24ndCBzdGFydGVkIHlldCxcblx0ICogYW5kIHRoZSB0cmFuc2l0aW9uZWQgcHJvcGVydHkgaGFzIHRoZSBzYW1lIHZhbHVlIGZvciBib3RoXG5cdCAqIGVudGVyL2xlYXZlLCB0aGVuIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIHdpbGwgYmUgc2tpcHBlZCBhbmRcblx0ICogdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIFRoaXMgZnVuY3Rpb24gZW5zdXJlc1xuXHQgKiBpdHMgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIGFmdGVyIGEgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZFxuXHQgKiBieSB3YWl0aW5nIGZvciBkb3VibGUgcmFmLlxuXHQgKlxuXHQgKiBJdCBmYWxscyBiYWNrIHRvIHNldFRpbWVvdXQgb24gZGV2aWNlcyB0aGF0IHN1cHBvcnQgQ1NTXG5cdCAqIHRyYW5zaXRpb25zIGJ1dCBub3QgcmFmIChlLmcuIEFuZHJvaWQgNC4yIGJyb3dzZXIpIC0gc2luY2Vcblx0ICogdGhlc2UgZW52aXJvbm1lbnRzIGFyZSB1c3VhbGx5IHNsb3csIHdlIGFyZSBnaXZpbmcgaXQgYVxuXHQgKiByZWxhdGl2ZWx5IGxhcmdlIHRpbWVvdXQuXG5cdCAqL1xuXHRcblx0dmFyIHJhZiA9IGluQnJvd3NlciAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuXHR2YXIgd2FpdEZvclRyYW5zaXRpb25TdGFydCA9IHJhZlxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQ/IGZ1bmN0aW9uIChmbikge1xuXHQgIHJhZihmdW5jdGlvbiAoKSB7XG5cdCAgICByYWYoZm4pO1xuXHQgIH0pO1xuXHR9IDogZnVuY3Rpb24gKGZuKSB7XG5cdCAgc2V0VGltZW91dChmbiwgNTApO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEEgVHJhbnNpdGlvbiBvYmplY3QgdGhhdCBlbmNhcHN1bGF0ZXMgdGhlIHN0YXRlIGFuZCBsb2dpY1xuXHQgKiBvZiB0aGUgdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICogQHBhcmFtIHtPYmplY3R9IGhvb2tzXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0ZnVuY3Rpb24gVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB2bSkge1xuXHQgIHRoaXMuaWQgPSBpZDtcblx0ICB0aGlzLmVsID0gZWw7XG5cdCAgdGhpcy5lbnRlckNsYXNzID0gaG9va3MgJiYgaG9va3MuZW50ZXJDbGFzcyB8fCBpZCArICctZW50ZXInO1xuXHQgIHRoaXMubGVhdmVDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmxlYXZlQ2xhc3MgfHwgaWQgKyAnLWxlYXZlJztcblx0ICB0aGlzLmhvb2tzID0gaG9va3M7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIC8vIGFzeW5jIHN0YXRlXG5cdCAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcblx0ICB0aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG5cdCAgdGhpcy5lbnRlcmVkID0gdGhpcy5sZWZ0ID0gZmFsc2U7XG5cdCAgdGhpcy50eXBlQ2FjaGUgPSB7fTtcblx0ICAvLyBjaGVjayBjc3MgdHJhbnNpdGlvbiB0eXBlXG5cdCAgdGhpcy50eXBlID0gaG9va3MgJiYgaG9va3MudHlwZTtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgaWYgKHRoaXMudHlwZSAmJiB0aGlzLnR5cGUgIT09IFRZUEVfVFJBTlNJVElPTiAmJiB0aGlzLnR5cGUgIT09IFRZUEVfQU5JTUFUSU9OKSB7XG5cdCAgICAgIHdhcm4oJ2ludmFsaWQgQ1NTIHRyYW5zaXRpb24gdHlwZSBmb3IgdHJhbnNpdGlvbj1cIicgKyB0aGlzLmlkICsgJ1wiOiAnICsgdGhpcy50eXBlLCB2bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIGJpbmRcblx0ICB2YXIgc2VsZiA9IHRoaXM7WydlbnRlck5leHRUaWNrJywgJ2VudGVyRG9uZScsICdsZWF2ZU5leHRUaWNrJywgJ2xlYXZlRG9uZSddLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcblx0ICAgIHNlbGZbbV0gPSBiaW5kKHNlbGZbbV0sIHNlbGYpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHR2YXIgcCQxID0gVHJhbnNpdGlvbi5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogU3RhcnQgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cblx0ICpcblx0ICogMS4gZW50ZXIgdHJhbnNpdGlvbiB0cmlnZ2VyZWRcblx0ICogMi4gY2FsbCBiZWZvcmVFbnRlciBob29rXG5cdCAqIDMuIGFkZCBlbnRlciBjbGFzc1xuXHQgKiA0LiBpbnNlcnQvc2hvdyBlbGVtZW50XG5cdCAqIDUuIGNhbGwgZW50ZXIgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcblx0ICogNi4gcmVmbG93XG5cdCAqIDcuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcblx0ICogICAgLSB0cmFuc2l0aW9uOlxuXHQgKiAgICAgICAgcmVtb3ZlIGNsYXNzIG5vdywgd2FpdCBmb3IgdHJhbnNpdGlvbmVuZCxcblx0ICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiAgICAtIGFuaW1hdGlvbjpcblx0ICogICAgICAgIHdhaXQgZm9yIGFuaW1hdGlvbmVuZCwgcmVtb3ZlIGNsYXNzLFxuXHQgKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG5cdCAqICAgICAgICBkb25lIG5vdyBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiA4LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG5cdCAqICAgIGFmdGVyRW50ZXIgaG9vay5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSBpbnNlcnQvc2hvdyB0aGUgZWxlbWVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0cCQxLmVudGVyID0gZnVuY3Rpb24gKG9wLCBjYikge1xuXHQgIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUVudGVyJyk7XG5cdCAgdGhpcy5jYiA9IGNiO1xuXHQgIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgb3AoKTtcblx0ICB0aGlzLmVudGVyZWQgPSBmYWxzZTtcblx0ICB0aGlzLmNhbGxIb29rV2l0aENiKCdlbnRlcicpO1xuXHQgIGlmICh0aGlzLmVudGVyZWQpIHtcblx0ICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuXHQgIH1cblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5lbnRlckNhbmNlbGxlZDtcblx0ICBwdXNoSm9iKHRoaXMuZW50ZXJOZXh0VGljayk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLCB3aGljaCBpc1xuXHQgKiB0byBiZSBwdXNoZWQgaW50byBhIHF1ZXVlIGFuZCBleGVjdXRlZCBhZnRlciBhIHJlZmxvdyBzb1xuXHQgKiB0aGF0IHJlbW92aW5nIHRoZSBjbGFzcyBjYW4gdHJpZ2dlciBhIENTUyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5lbnRlck5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgIC8vIHByZXZlbnQgdHJhbnNpdGlvbiBza2lwcGluZ1xuXHQgIHRoaXMuanVzdEVudGVyZWQgPSB0cnVlO1xuXHQgIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQoZnVuY3Rpb24gKCkge1xuXHQgICAgX3RoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcblx0ICB9KTtcblx0ICB2YXIgZW50ZXJEb25lID0gdGhpcy5lbnRlckRvbmU7XG5cdCAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgaWYgKCF0aGlzLnBlbmRpbmdKc0NiKSB7XG5cdCAgICBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG5cdCAgICAgIC8vIHRyaWdnZXIgdHJhbnNpdGlvbiBieSByZW1vdmluZyBlbnRlciBjbGFzcyBub3dcblx0ICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICAgICAgdGhpcy5zZXR1cENzc0NiKHRyYW5zaXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9BTklNQVRJT04pIHtcblx0ICAgICAgdGhpcy5zZXR1cENzc0NiKGFuaW1hdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZW50ZXJEb25lKCk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcblx0ICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5lbnRlckRvbmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5lbnRlcmVkID0gdHJ1ZTtcblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuXHQgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJFbnRlcicpO1xuXHQgIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU3RhcnQgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIDEuIGxlYXZlIHRyYW5zaXRpb24gdHJpZ2dlcmVkLlxuXHQgKiAyLiBjYWxsIGJlZm9yZUxlYXZlIGhvb2tcblx0ICogMy4gYWRkIGxlYXZlIGNsYXNzICh0cmlnZ2VyIGNzcyB0cmFuc2l0aW9uKVxuXHQgKiA0LiBjYWxsIGxlYXZlIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG5cdCAqIDUuIHJlZmxvdyBpZiBubyBleHBsaWNpdCBqcyBjYWxsYmFjayBpcyBwcm92aWRlZFxuXHQgKiA2LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG5cdCAqICAgIC0gdHJhbnNpdGlvbiBvciBhbmltYXRpb246XG5cdCAqICAgICAgICB3YWl0IGZvciBlbmQgZXZlbnQsIHJlbW92ZSBjbGFzcywgdGhlbiBkb25lIGlmXG5cdCAqICAgICAgICB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuXHQgKiAgICAgICAgZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiA3LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG5cdCAqICAgIGFmdGVyTGVhdmUgaG9vay5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSByZW1vdmUvaGlkZSB0aGUgZWxlbWVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0cCQxLmxlYXZlID0gZnVuY3Rpb24gKG9wLCBjYikge1xuXHQgIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUxlYXZlJyk7XG5cdCAgdGhpcy5vcCA9IG9wO1xuXHQgIHRoaXMuY2IgPSBjYjtcblx0ICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIHRoaXMubGVmdCA9IGZhbHNlO1xuXHQgIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2xlYXZlJyk7XG5cdCAgaWYgKHRoaXMubGVmdCkge1xuXHQgICAgcmV0dXJuOyAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG5cdCAgfVxuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmxlYXZlQ2FuY2VsbGVkO1xuXHQgIC8vIG9ubHkgbmVlZCB0byBoYW5kbGUgbGVhdmVEb25lIGlmXG5cdCAgLy8gMS4gdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBkb25lIChzeW5jaHJvbm91c2x5IGNhbGxlZFxuXHQgIC8vICAgIGJ5IHRoZSB1c2VyLCB3aGljaCBjYXVzZXMgdGhpcy5vcCBzZXQgdG8gbnVsbClcblx0ICAvLyAyLiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrXG5cdCAgaWYgKHRoaXMub3AgJiYgIXRoaXMucGVuZGluZ0pzQ2IpIHtcblx0ICAgIC8vIGlmIGEgQ1NTIHRyYW5zaXRpb24gbGVhdmVzIGltbWVkaWF0ZWx5IGFmdGVyIGVudGVyLFxuXHQgICAgLy8gdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIHRoZXJlZm9yZSB3ZVxuXHQgICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGVuZCB0aGUgbGVhdmUgaW1tZWRpYXRlbHkuXG5cdCAgICBpZiAodGhpcy5qdXN0RW50ZXJlZCkge1xuXHQgICAgICB0aGlzLmxlYXZlRG9uZSgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHVzaEpvYih0aGlzLmxlYXZlTmV4dFRpY2spO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5sZWF2ZU5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIGlmICh0eXBlKSB7XG5cdCAgICB2YXIgZXZlbnQgPSB0eXBlID09PSBUWVBFX1RSQU5TSVRJT04gPyB0cmFuc2l0aW9uRW5kRXZlbnQgOiBhbmltYXRpb25FbmRFdmVudDtcblx0ICAgIHRoaXMuc2V0dXBDc3NDYihldmVudCwgdGhpcy5sZWF2ZURvbmUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLmxlYXZlRG9uZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmxlYXZlRG9uZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLmxlZnQgPSB0cnVlO1xuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG5cdCAgdGhpcy5vcCgpO1xuXHQgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJMZWF2ZScpO1xuXHQgIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG5cdCAgdGhpcy5vcCA9IG51bGw7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FuY2VsIGFueSBwZW5kaW5nIGNhbGxiYWNrcyBmcm9tIGEgcHJldmlvdXNseSBydW5uaW5nXG5cdCAqIGJ1dCBub3QgZmluaXNoZWQgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEuY2FuY2VsUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG5cdCAgdmFyIGhhc1BlbmRpbmcgPSBmYWxzZTtcblx0ICBpZiAodGhpcy5wZW5kaW5nQ3NzQ2IpIHtcblx0ICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuXHQgICAgb2ZmKHRoaXMuZWwsIHRoaXMucGVuZGluZ0Nzc0V2ZW50LCB0aGlzLnBlbmRpbmdDc3NDYik7XG5cdCAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gbnVsbDtcblx0ICB9XG5cdCAgaWYgKHRoaXMucGVuZGluZ0pzQ2IpIHtcblx0ICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuXHQgICAgdGhpcy5wZW5kaW5nSnNDYi5jYW5jZWwoKTtcblx0ICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuXHQgIH1cblx0ICBpZiAoaGFzUGVuZGluZykge1xuXHQgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLmNhbmNlbCkge1xuXHQgICAgdGhpcy5jYW5jZWwuY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICAgIHRoaXMuY2FuY2VsID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhIHVzZXItcHJvdmlkZWQgc3luY2hyb25vdXMgaG9vayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRwJDEuY2FsbEhvb2sgPSBmdW5jdGlvbiAodHlwZSkge1xuXHQgIGlmICh0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV0pIHtcblx0ICAgIHRoaXMuaG9va3NbdHlwZV0uY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhIHVzZXItcHJvdmlkZWQsIHBvdGVudGlhbGx5LWFzeW5jIGhvb2sgZnVuY3Rpb24uXG5cdCAqIFdlIGNoZWNrIGZvciB0aGUgbGVuZ3RoIG9mIGFyZ3VtZW50cyB0byBzZWUgaWYgdGhlIGhvb2tcblx0ICogZXhwZWN0cyBhIGBkb25lYCBjYWxsYmFjay4gSWYgdHJ1ZSwgdGhlIHRyYW5zaXRpb24ncyBlbmRcblx0ICogd2lsbCBiZSBkZXRlcm1pbmVkIGJ5IHdoZW4gdGhlIHVzZXIgY2FsbHMgdGhhdCBjYWxsYmFjaztcblx0ICogb3RoZXJ3aXNlLCB0aGUgZW5kIGlzIGRldGVybWluZWQgYnkgdGhlIENTUyB0cmFuc2l0aW9uIG9yXG5cdCAqIGFuaW1hdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRwJDEuY2FsbEhvb2tXaXRoQ2IgPSBmdW5jdGlvbiAodHlwZSkge1xuXHQgIHZhciBob29rID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdO1xuXHQgIGlmIChob29rKSB7XG5cdCAgICBpZiAoaG9vay5sZW5ndGggPiAxKSB7XG5cdCAgICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBjYW5jZWxsYWJsZSh0aGlzW3R5cGUgKyAnRG9uZSddKTtcblx0ICAgIH1cblx0ICAgIGhvb2suY2FsbCh0aGlzLnZtLCB0aGlzLmVsLCB0aGlzLnBlbmRpbmdKc0NiKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IGFuIGVsZW1lbnQncyB0cmFuc2l0aW9uIHR5cGUgYmFzZWQgb24gdGhlXG5cdCAqIGNhbGN1bGF0ZWQgc3R5bGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lXG5cdCAqIEByZXR1cm4ge051bWJlcn1cblx0ICovXG5cdFxuXHRwJDEuZ2V0Q3NzVHJhbnNpdGlvblR5cGUgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcblx0ICAvLyBza2lwIENTUyB0cmFuc2l0aW9ucyBpZiBwYWdlIGlzIG5vdCB2aXNpYmxlIC1cblx0ICAvLyB0aGlzIHNvbHZlcyB0aGUgaXNzdWUgb2YgdHJhbnNpdGlvbmVuZCBldmVudHMgbm90XG5cdCAgLy8gZmlyaW5nIHVudGlsIHRoZSBwYWdlIGlzIHZpc2libGUgYWdhaW4uXG5cdCAgLy8gcGFnZVZpc2liaWxpdHkgQVBJIGlzIHN1cHBvcnRlZCBpbiBJRTEwKywgc2FtZSBhc1xuXHQgIC8vIENTUyB0cmFuc2l0aW9ucy5cblx0ICBkb2N1bWVudC5oaWRkZW4gfHxcblx0ICAvLyBleHBsaWNpdCBqcy1vbmx5IHRyYW5zaXRpb25cblx0ICB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuY3NzID09PSBmYWxzZSB8fFxuXHQgIC8vIGVsZW1lbnQgaXMgaGlkZGVuXG5cdCAgaXNIaWRkZW4odGhpcy5lbCkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHR5cGUgPSB0aGlzLnR5cGUgfHwgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXTtcblx0ICBpZiAodHlwZSkgcmV0dXJuIHR5cGU7XG5cdCAgdmFyIGlubGluZVN0eWxlcyA9IHRoaXMuZWwuc3R5bGU7XG5cdCAgdmFyIGNvbXB1dGVkU3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbCk7XG5cdCAgdmFyIHRyYW5zRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXTtcblx0ICBpZiAodHJhbnNEdXJhdGlvbiAmJiB0cmFuc0R1cmF0aW9uICE9PSAnMHMnKSB7XG5cdCAgICB0eXBlID0gVFlQRV9UUkFOU0lUSU9OO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgYW5pbUR1cmF0aW9uID0gaW5saW5lU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdO1xuXHQgICAgaWYgKGFuaW1EdXJhdGlvbiAmJiBhbmltRHVyYXRpb24gIT09ICcwcycpIHtcblx0ICAgICAgdHlwZSA9IFRZUEVfQU5JTUFUSU9OO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAodHlwZSkge1xuXHQgICAgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXSA9IHR5cGU7XG5cdCAgfVxuXHQgIHJldHVybiB0eXBlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldHVwIGEgQ1NTIHRyYW5zaXRpb25lbmQvYW5pbWF0aW9uZW5kIGNhbGxiYWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRwJDEuc2V0dXBDc3NDYiA9IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcblx0ICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IGV2ZW50O1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgIHZhciBvbkVuZCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgIGlmIChlLnRhcmdldCA9PT0gZWwpIHtcblx0ICAgICAgb2ZmKGVsLCBldmVudCwgb25FbmQpO1xuXHQgICAgICBzZWxmLnBlbmRpbmdDc3NFdmVudCA9IHNlbGYucGVuZGluZ0Nzc0NiID0gbnVsbDtcblx0ICAgICAgaWYgKCFzZWxmLnBlbmRpbmdKc0NiICYmIGNiKSB7XG5cdCAgICAgICAgY2IoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdCAgb24oZWwsIGV2ZW50LCBvbkVuZCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBoaWRkZW4gLSBpbiB0aGF0IGNhc2Ugd2UgY2FuIGp1c3Rcblx0ICogc2tpcCB0aGUgdHJhbnNpdGlvbiBhbGx0b2dldGhlci5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzSGlkZGVuKGVsKSB7XG5cdCAgaWYgKC9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcblx0ICAgIC8vIFNWRyBlbGVtZW50cyBkbyBub3QgaGF2ZSBvZmZzZXQoV2lkdGh8SGVpZ2h0KVxuXHQgICAgLy8gc28gd2UgbmVlZCB0byBjaGVjayB0aGUgY2xpZW50IHJlY3Rcblx0ICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdCAgICByZXR1cm4gIShyZWN0LndpZHRoIHx8IHJlY3QuaGVpZ2h0KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuICEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciB0cmFuc2l0aW9uJDEgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBUUkFOU0lUSU9OLFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShpZCwgb2xkSWQpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICAvLyByZXNvbHZlIG9uIG93bmVyIHZtXG5cdCAgICB2YXIgaG9va3MgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3RyYW5zaXRpb25zJywgaWQpO1xuXHQgICAgaWQgPSBpZCB8fCAndic7XG5cdCAgICBvbGRJZCA9IG9sZElkIHx8ICd2Jztcblx0ICAgIGVsLl9fdl90cmFucyA9IG5ldyBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHRoaXMudm0pO1xuXHQgICAgcmVtb3ZlQ2xhc3MoZWwsIG9sZElkICsgJy10cmFuc2l0aW9uJyk7XG5cdCAgICBhZGRDbGFzcyhlbCwgaWQgKyAnLXRyYW5zaXRpb24nKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgaW50ZXJuYWxEaXJlY3RpdmVzID0ge1xuXHQgIHN0eWxlOiBzdHlsZSxcblx0ICAnY2xhc3MnOiB2Q2xhc3MsXG5cdCAgY29tcG9uZW50OiBjb21wb25lbnQsXG5cdCAgcHJvcDogcHJvcERlZixcblx0ICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uJDFcblx0fTtcblx0XG5cdC8vIHNwZWNpYWwgYmluZGluZyBwcmVmaXhlc1xuXHR2YXIgYmluZFJFID0gL152LWJpbmQ6fF46Lztcblx0dmFyIG9uUkUgPSAvXnYtb246fF5ALztcblx0dmFyIGRpckF0dHJSRSA9IC9edi0oW146XSspKD86JHw6KC4qKSQpLztcblx0dmFyIG1vZGlmaWVyUkUgPSAvXFwuW15cXC5dKy9nO1xuXHR2YXIgdHJhbnNpdGlvblJFID0gL14odi1iaW5kOnw6KT90cmFuc2l0aW9uJC87XG5cdFxuXHQvLyBkZWZhdWx0IGRpcmVjdGl2ZSBwcmlvcml0eVxuXHR2YXIgREVGQVVMVF9QUklPUklUWSA9IDEwMDA7XG5cdHZhciBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZID0gMjAwMDtcblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgdGVtcGxhdGUgYW5kIHJldHVybiBhIHJldXNhYmxlIGNvbXBvc2l0ZSBsaW5rXG5cdCAqIGZ1bmN0aW9uLCB3aGljaCByZWN1cnNpdmVseSBjb250YWlucyBtb3JlIGxpbmsgZnVuY3Rpb25zXG5cdCAqIGluc2lkZS4gVGhpcyB0b3AgbGV2ZWwgY29tcGlsZSBmdW5jdGlvbiB3b3VsZCBub3JtYWxseVxuXHQgKiBiZSBjYWxsZWQgb24gaW5zdGFuY2Ugcm9vdCBub2RlcywgYnV0IGNhbiBhbHNvIGJlIHVzZWRcblx0ICogZm9yIHBhcnRpYWwgY29tcGlsYXRpb24gaWYgdGhlIHBhcnRpYWwgYXJndW1lbnQgaXMgdHJ1ZS5cblx0ICpcblx0ICogVGhlIHJldHVybmVkIGNvbXBvc2l0ZSBsaW5rIGZ1bmN0aW9uLCB3aGVuIGNhbGxlZCwgd2lsbFxuXHQgKiByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzXG5cdCAqIGNyZWF0ZWQgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtCb29sZWFufSBwYXJ0aWFsXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGUoZWwsIG9wdGlvbnMsIHBhcnRpYWwpIHtcblx0ICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgbm9kZSBpdHNlbGYuXG5cdCAgdmFyIG5vZGVMaW5rRm4gPSBwYXJ0aWFsIHx8ICFvcHRpb25zLl9hc0NvbXBvbmVudCA/IGNvbXBpbGVOb2RlKGVsLCBvcHRpb25zKSA6IG51bGw7XG5cdCAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIGNoaWxkTm9kZXNcblx0ICB2YXIgY2hpbGRMaW5rRm4gPSAhKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCkgJiYgIWlzU2NyaXB0KGVsKSAmJiBlbC5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3QoZWwuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuXHRcblx0ICAvKipcblx0ICAgKiBBIGNvbXBvc2l0ZSBsaW5rZXIgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGEgYWxyZWFkeVxuXHQgICAqIGNvbXBpbGVkIHBpZWNlIG9mIERPTSwgd2hpY2ggaW5zdGFudGlhdGVzIGFsbCBkaXJlY3RpdmVcblx0ICAgKiBpbnN0YW5jZXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gaG9zdCB2bSBvZiB0cmFuc2NsdWRlZCBjb250ZW50XG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIGxpbmsgY29udGV4dCBmcmFnbWVudFxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICAgKi9cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcblx0ICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShlbC5jaGlsZE5vZGVzKTtcblx0ICAgIC8vIGxpbmtcblx0ICAgIHZhciBkaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gY29tcG9zaXRlTGlua0NhcHR1cmVyKCkge1xuXHQgICAgICBpZiAobm9kZUxpbmtGbikgbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgICAgaWYgKGNoaWxkTGlua0ZuKSBjaGlsZExpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgfSwgdm0pO1xuXHQgICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgZGlycyk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFwcGx5IGEgbGlua2VyIHRvIGEgdm0vZWxlbWVudCBwYWlyIGFuZCBjYXB0dXJlIHRoZVxuXHQgKiBkaXJlY3RpdmVzIGNyZWF0ZWQgZHVyaW5nIHRoZSBwcm9jZXNzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbGlua0FuZENhcHR1cmUobGlua2VyLCB2bSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAvLyByZXNldCBkaXJlY3RpdmVzIGJlZm9yZSBldmVyeSBjYXB0dXJlIGluIHByb2R1Y3Rpb25cblx0ICAgIC8vIG1vZGUsIHNvIHRoYXQgd2hlbiB1bmxpbmtpbmcgd2UgZG9uJ3QgbmVlZCB0byBzcGxpY2Vcblx0ICAgIC8vIHRoZW0gb3V0ICh3aGljaCB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGhpdCkuXG5cdCAgICAvLyB0aGV5IGFyZSBrZXB0IGluIGRldmVsb3BtZW50IG1vZGUgYmVjYXVzZSB0aGV5IGFyZVxuXHQgICAgLy8gdXNlZnVsIGZvciBWdWUncyBvd24gdGVzdHMuXG5cdCAgICB2bS5fZGlyZWN0aXZlcyA9IFtdO1xuXHQgIH1cblx0ICB2YXIgb3JpZ2luYWxEaXJDb3VudCA9IHZtLl9kaXJlY3RpdmVzLmxlbmd0aDtcblx0ICBsaW5rZXIoKTtcblx0ICB2YXIgZGlycyA9IHZtLl9kaXJlY3RpdmVzLnNsaWNlKG9yaWdpbmFsRGlyQ291bnQpO1xuXHQgIGRpcnMuc29ydChkaXJlY3RpdmVDb21wYXJhdG9yKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBkaXJzW2ldLl9iaW5kKCk7XG5cdCAgfVxuXHQgIHJldHVybiBkaXJzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGlyZWN0aXZlIHByaW9yaXR5IHNvcnQgY29tcGFyYXRvclxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gYVxuXHQgKiBAcGFyYW0ge09iamVjdH0gYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRpcmVjdGl2ZUNvbXBhcmF0b3IoYSwgYikge1xuXHQgIGEgPSBhLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG5cdCAgYiA9IGIuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcblx0ICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIExpbmtlciBmdW5jdGlvbnMgcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0XG5cdCAqIHRlYXJzZG93biBhbGwgZGlyZWN0aXZlcyBpbnN0YW5jZXMgZ2VuZXJhdGVkIGR1cmluZ1xuXHQgKiB0aGUgcHJvY2Vzcy5cblx0ICpcblx0ICogV2UgY3JlYXRlIHVubGluayBmdW5jdGlvbnMgd2l0aCBvbmx5IHRoZSBuZWNlc3Nhcnlcblx0ICogaW5mb3JtYXRpb24gdG8gYXZvaWQgcmV0YWluaW5nIGFkZGl0aW9uYWwgY2xvc3VyZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0FycmF5fSBkaXJzXG5cdCAqIEBwYXJhbSB7VnVlfSBbY29udGV4dF1cblx0ICogQHBhcmFtIHtBcnJheX0gW2NvbnRleHREaXJzXVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlVW5saW5rRm4odm0sIGRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKSB7XG5cdCAgZnVuY3Rpb24gdW5saW5rKGRlc3Ryb3lpbmcpIHtcblx0ICAgIHRlYXJkb3duRGlycyh2bSwgZGlycywgZGVzdHJveWluZyk7XG5cdCAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0RGlycykge1xuXHQgICAgICB0ZWFyZG93bkRpcnMoY29udGV4dCwgY29udGV4dERpcnMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBleHBvc2UgbGlua2VkIGRpcmVjdGl2ZXNcblx0ICB1bmxpbmsuZGlycyA9IGRpcnM7XG5cdCAgcmV0dXJuIHVubGluaztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRlYXJkb3duIHBhcnRpYWwgbGlua2VkIGRpcmVjdGl2ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0FycmF5fSBkaXJzXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVzdHJveWluZ1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRlYXJkb3duRGlycyh2bSwgZGlycywgZGVzdHJveWluZykge1xuXHQgIHZhciBpID0gZGlycy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgZGlyc1tpXS5fdGVhcmRvd24oKTtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFkZXN0cm95aW5nKSB7XG5cdCAgICAgIHZtLl9kaXJlY3RpdmVzLiRyZW1vdmUoZGlyc1tpXSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBsaW5rIHByb3BzIG9uIGFuIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcblx0ICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZUFuZExpbmtQcm9wcyh2bSwgZWwsIHByb3BzLCBzY29wZSkge1xuXHQgIHZhciBwcm9wc0xpbmtGbiA9IGNvbXBpbGVQcm9wcyhlbCwgcHJvcHMsIHZtKTtcblx0ICB2YXIgcHJvcERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG5cdCAgICBwcm9wc0xpbmtGbih2bSwgc2NvcGUpO1xuXHQgIH0sIHZtKTtcblx0ICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBwcm9wRGlycyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIHRoZSByb290IGVsZW1lbnQgb2YgYW4gaW5zdGFuY2UuXG5cdCAqXG5cdCAqIDEuIGF0dHJzIG9uIGNvbnRleHQgY29udGFpbmVyIChjb250ZXh0IHNjb3BlKVxuXHQgKiAyLiBhdHRycyBvbiB0aGUgY29tcG9uZW50IHRlbXBsYXRlIHJvb3Qgbm9kZSwgaWZcblx0ICogICAgcmVwbGFjZTp0cnVlIChjaGlsZCBzY29wZSlcblx0ICpcblx0ICogSWYgdGhpcyBpcyBhIGZyYWdtZW50IGluc3RhbmNlLCB3ZSBvbmx5IG5lZWQgdG8gY29tcGlsZSAxLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0T3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpIHtcblx0ICB2YXIgY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9jb250YWluZXJBdHRycztcblx0ICB2YXIgcmVwbGFjZXJBdHRycyA9IG9wdGlvbnMuX3JlcGxhY2VyQXR0cnM7XG5cdCAgdmFyIGNvbnRleHRMaW5rRm4sIHJlcGxhY2VyTGlua0ZuO1xuXHRcblx0ICAvLyBvbmx5IG5lZWQgdG8gY29tcGlsZSBvdGhlciBhdHRyaWJ1dGVzIGZvclxuXHQgIC8vIG5vbi1mcmFnbWVudCBpbnN0YW5jZXNcblx0ICBpZiAoZWwubm9kZVR5cGUgIT09IDExKSB7XG5cdCAgICAvLyBmb3IgY29tcG9uZW50cywgY29udGFpbmVyIGFuZCByZXBsYWNlciBuZWVkIHRvIGJlXG5cdCAgICAvLyBjb21waWxlZCBzZXBhcmF0ZWx5IGFuZCBsaW5rZWQgaW4gZGlmZmVyZW50IHNjb3Blcy5cblx0ICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuXHQgICAgICAvLyAyLiBjb250YWluZXIgYXR0cmlidXRlc1xuXHQgICAgICBpZiAoY29udGFpbmVyQXR0cnMgJiYgY29udGV4dE9wdGlvbnMpIHtcblx0ICAgICAgICBjb250ZXh0TGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoY29udGFpbmVyQXR0cnMsIGNvbnRleHRPcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocmVwbGFjZXJBdHRycykge1xuXHQgICAgICAgIC8vIDMuIHJlcGxhY2VyIGF0dHJpYnV0ZXNcblx0ICAgICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKHJlcGxhY2VyQXR0cnMsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBub24tY29tcG9uZW50LCBqdXN0IGNvbXBpbGUgYXMgYSBub3JtYWwgZWxlbWVudC5cblx0ICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhlbC5hdHRyaWJ1dGVzLCBvcHRpb25zKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29udGFpbmVyQXR0cnMpIHtcblx0ICAgIC8vIHdhcm4gY29udGFpbmVyIGRpcmVjdGl2ZXMgZm9yIGZyYWdtZW50IGluc3RhbmNlc1xuXHQgICAgdmFyIG5hbWVzID0gY29udGFpbmVyQXR0cnMuZmlsdGVyKGZ1bmN0aW9uIChhdHRyKSB7XG5cdCAgICAgIC8vIGFsbG93IHZ1ZS1sb2FkZXIvdnVlaWZ5IHNjb3BlZCBjc3MgYXR0cmlidXRlc1xuXHQgICAgICByZXR1cm4gYXR0ci5uYW1lLmluZGV4T2YoJ192LScpIDwgMCAmJlxuXHQgICAgICAvLyBhbGxvdyBldmVudCBsaXN0ZW5lcnNcblx0ICAgICAgIW9uUkUudGVzdChhdHRyLm5hbWUpICYmXG5cdCAgICAgIC8vIGFsbG93IHNsb3RzXG5cdCAgICAgIGF0dHIubmFtZSAhPT0gJ3Nsb3QnO1xuXHQgICAgfSkubWFwKGZ1bmN0aW9uIChhdHRyKSB7XG5cdCAgICAgIHJldHVybiAnXCInICsgYXR0ci5uYW1lICsgJ1wiJztcblx0ICAgIH0pO1xuXHQgICAgaWYgKG5hbWVzLmxlbmd0aCkge1xuXHQgICAgICB2YXIgcGx1cmFsID0gbmFtZXMubGVuZ3RoID4gMTtcblx0ICAgICAgd2FybignQXR0cmlidXRlJyArIChwbHVyYWwgPyAncyAnIDogJyAnKSArIG5hbWVzLmpvaW4oJywgJykgKyAocGx1cmFsID8gJyBhcmUnIDogJyBpcycpICsgJyBpZ25vcmVkIG9uIGNvbXBvbmVudCAnICsgJzwnICsgb3B0aW9ucy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPiBiZWNhdXNlICcgKyAndGhlIGNvbXBvbmVudCBpcyBhIGZyYWdtZW50IGluc3RhbmNlOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvY29tcG9uZW50cy5odG1sI0ZyYWdtZW50LUluc3RhbmNlJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBvcHRpb25zLl9jb250YWluZXJBdHRycyA9IG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBudWxsO1xuXHQgIHJldHVybiBmdW5jdGlvbiByb290TGlua0ZuKHZtLCBlbCwgc2NvcGUpIHtcblx0ICAgIC8vIGxpbmsgY29udGV4dCBzY29wZSBkaXJzXG5cdCAgICB2YXIgY29udGV4dCA9IHZtLl9jb250ZXh0O1xuXHQgICAgdmFyIGNvbnRleHREaXJzO1xuXHQgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dExpbmtGbikge1xuXHQgICAgICBjb250ZXh0RGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjb250ZXh0TGlua0ZuKGNvbnRleHQsIGVsLCBudWxsLCBzY29wZSk7XG5cdCAgICAgIH0sIGNvbnRleHQpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGxpbmsgc2VsZlxuXHQgICAgdmFyIHNlbGZEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAocmVwbGFjZXJMaW5rRm4pIHJlcGxhY2VyTGlua0ZuKHZtLCBlbCk7XG5cdCAgICB9LCB2bSk7XG5cdFxuXHQgICAgLy8gcmV0dXJuIHRoZSB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gY29udGV4dFxuXHQgICAgLy8gY29udGFpbmVyIGRpcmVjdGl2ZXMuXG5cdCAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBzZWxmRGlycywgY29udGV4dCwgY29udGV4dERpcnMpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgbm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbiBiYXNlZCBvbiB0aGVcblx0ICogbm9kZSB0eXBlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKSB7XG5cdCAgdmFyIHR5cGUgPSBub2RlLm5vZGVUeXBlO1xuXHQgIGlmICh0eXBlID09PSAxICYmICFpc1NjcmlwdChub2RlKSkge1xuXHQgICAgcmV0dXJuIGNvbXBpbGVFbGVtZW50KG5vZGUsIG9wdGlvbnMpO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gMyAmJiBub2RlLmRhdGEudHJpbSgpKSB7XG5cdCAgICByZXR1cm4gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlRWxlbWVudChlbCwgb3B0aW9ucykge1xuXHQgIC8vIHByZXByb2Nlc3MgdGV4dGFyZWFzLlxuXHQgIC8vIHRleHRhcmVhIHRyZWF0cyBpdHMgdGV4dCBjb250ZW50IGFzIHRoZSBpbml0aWFsIHZhbHVlLlxuXHQgIC8vIGp1c3QgYmluZCBpdCBhcyBhbiBhdHRyIGRpcmVjdGl2ZSBmb3IgdmFsdWUuXG5cdCAgaWYgKGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcblx0ICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQoZWwudmFsdWUpO1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICBlbC5zZXRBdHRyaWJ1dGUoJzp2YWx1ZScsIHRva2Vuc1RvRXhwKHRva2VucykpO1xuXHQgICAgICBlbC52YWx1ZSA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgbGlua0ZuO1xuXHQgIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcblx0ICB2YXIgYXR0cnMgPSBoYXNBdHRycyAmJiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuXHQgIC8vIGNoZWNrIHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGZvciAmIGlmKVxuXHQgIGlmIChoYXNBdHRycykge1xuXHQgICAgbGlua0ZuID0gY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMoZWwsIGF0dHJzLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgLy8gY2hlY2sgZWxlbWVudCBkaXJlY3RpdmVzXG5cdCAgaWYgKCFsaW5rRm4pIHtcblx0ICAgIGxpbmtGbiA9IGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICAvLyBjaGVjayBjb21wb25lbnRcblx0ICBpZiAoIWxpbmtGbikge1xuXHQgICAgbGlua0ZuID0gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuXHQgIGlmICghbGlua0ZuICYmIGhhc0F0dHJzKSB7XG5cdCAgICBsaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIHJldHVybiBsaW5rRm47XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgdGV4dE5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7VGV4dE5vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258bnVsbH0gdGV4dE5vZGVMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucykge1xuXHQgIC8vIHNraXAgbWFya2VkIHRleHQgbm9kZXNcblx0ICBpZiAobm9kZS5fc2tpcCkge1xuXHQgICAgcmV0dXJuIHJlbW92ZVRleHQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KG5vZGUud2hvbGVUZXh0KTtcblx0ICBpZiAoIXRva2Vucykge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHRcblx0ICAvLyBtYXJrIGFkamFjZW50IHRleHQgbm9kZXMgYXMgc2tpcHBlZCxcblx0ICAvLyBiZWNhdXNlIHdlIGFyZSB1c2luZyBub2RlLndob2xlVGV4dCB0byBjb21waWxlXG5cdCAgLy8gYWxsIGFkamFjZW50IHRleHQgbm9kZXMgdG9nZXRoZXIuIFRoaXMgZml4ZXNcblx0ICAvLyBpc3N1ZXMgaW4gSUUgd2hlcmUgc29tZXRpbWVzIGl0IHNwbGl0cyB1cCBhIHNpbmdsZVxuXHQgIC8vIHRleHQgbm9kZSBpbnRvIG11bHRpcGxlIG9uZXMuXG5cdCAgdmFyIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuXHQgIHdoaWxlIChuZXh0ICYmIG5leHQubm9kZVR5cGUgPT09IDMpIHtcblx0ICAgIG5leHQuX3NraXAgPSB0cnVlO1xuXHQgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG5cdCAgfVxuXHRcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICB2YXIgZWwsIHRva2VuO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdG9rZW4gPSB0b2tlbnNbaV07XG5cdCAgICBlbCA9IHRva2VuLnRhZyA/IHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHQgIHJldHVybiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnLCBvcHRpb25zKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIExpbmtlciBmb3IgYW4gc2tpcHBlZCB0ZXh0IG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge1RleHR9IG5vZGVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVUZXh0KHZtLCBub2RlKSB7XG5cdCAgcmVtb3ZlKG5vZGUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyBhIHNpbmdsZSB0ZXh0IHRva2VuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7Tm9kZX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSB7XG5cdCAgdmFyIGVsO1xuXHQgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG5cdCAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgaWYgKHRva2VuLmh0bWwpIHtcblx0ICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCd2LWh0bWwnKTtcblx0ICAgICAgc2V0VG9rZW5UeXBlKCdodG1sJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBJRSB3aWxsIGNsZWFuIHVwIGVtcHR5IHRleHROb2RlcyBkdXJpbmdcblx0ICAgICAgLy8gZnJhZy5jbG9uZU5vZGUodHJ1ZSksIHNvIHdlIGhhdmUgdG8gZ2l2ZSBpdFxuXHQgICAgICAvLyBzb21ldGhpbmcgaGVyZS4uLlxuXHQgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgJyk7XG5cdCAgICAgIHNldFRva2VuVHlwZSgndGV4dCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmdW5jdGlvbiBzZXRUb2tlblR5cGUodHlwZSkge1xuXHQgICAgaWYgKHRva2VuLmRlc2NyaXB0b3IpIHJldHVybjtcblx0ICAgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh0b2tlbi52YWx1ZSk7XG5cdCAgICB0b2tlbi5kZXNjcmlwdG9yID0ge1xuXHQgICAgICBuYW1lOiB0eXBlLFxuXHQgICAgICBkZWY6IGRpcmVjdGl2ZXNbdHlwZV0sXG5cdCAgICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuXHQgICAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVyc1xuXHQgICAgfTtcblx0ICB9XG5cdCAgcmV0dXJuIGVsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBhIHRleHROb2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IHRva2Vuc1xuXHQgKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHRleHROb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUpIHtcblx0ICAgIHZhciBmcmFnQ2xvbmUgPSBmcmFnLmNsb25lTm9kZSh0cnVlKTtcblx0ICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShmcmFnQ2xvbmUuY2hpbGROb2Rlcyk7XG5cdCAgICB2YXIgdG9rZW4sIHZhbHVlLCBub2RlO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuXHQgICAgICB2YWx1ZSA9IHRva2VuLnZhbHVlO1xuXHQgICAgICBpZiAodG9rZW4udGFnKSB7XG5cdCAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbaV07XG5cdCAgICAgICAgaWYgKHRva2VuLm9uZVRpbWUpIHtcblx0ICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtKS4kZXZhbCh2YWx1ZSk7XG5cdCAgICAgICAgICBpZiAodG9rZW4uaHRtbCkge1xuXHQgICAgICAgICAgICByZXBsYWNlKG5vZGUsIHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUpKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIG5vZGUuZGF0YSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHZtLl9iaW5kRGlyKHRva2VuLmRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJlcGxhY2UoZWwsIGZyYWdDbG9uZSk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSBub2RlIGxpc3QgYW5kIHJldHVybiBhIGNoaWxkTGlua0ZuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGVMaXN0fSBub2RlTGlzdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZU5vZGVMaXN0KG5vZGVMaXN0LCBvcHRpb25zKSB7XG5cdCAgdmFyIGxpbmtGbnMgPSBbXTtcblx0ICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGU7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2RlTGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG5vZGUgPSBub2RlTGlzdFtpXTtcblx0ICAgIG5vZGVMaW5rRm4gPSBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKTtcblx0ICAgIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmIG5vZGUudGFnTmFtZSAhPT0gJ1NDUklQVCcgJiYgbm9kZS5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3Qobm9kZS5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG5cdCAgICBsaW5rRm5zLnB1c2gobm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4pO1xuXHQgIH1cblx0ICByZXR1cm4gbGlua0Zucy5sZW5ndGggPyBtYWtlQ2hpbGRMaW5rRm4obGlua0ZucykgOiBudWxsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWFrZSBhIGNoaWxkIGxpbmsgZnVuY3Rpb24gZm9yIGEgbm9kZSdzIGNoaWxkTm9kZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fSBsaW5rRm5zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBjaGlsZExpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VDaGlsZExpbmtGbihsaW5rRm5zKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGNoaWxkTGlua0ZuKHZtLCBub2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIHZhciBub2RlLCBub2RlTGlua0ZuLCBjaGlsZHJlbkxpbmtGbjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBuID0gMCwgbCA9IGxpbmtGbnMubGVuZ3RoOyBpIDwgbDsgbisrKSB7XG5cdCAgICAgIG5vZGUgPSBub2Rlc1tuXTtcblx0ICAgICAgbm9kZUxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcblx0ICAgICAgY2hpbGRyZW5MaW5rRm4gPSBsaW5rRm5zW2krK107XG5cdCAgICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuXHQgICAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkobm9kZS5jaGlsZE5vZGVzKTtcblx0ICAgICAgaWYgKG5vZGVMaW5rRm4pIHtcblx0ICAgICAgICBub2RlTGlua0ZuKHZtLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGNoaWxkcmVuTGlua0ZuKSB7XG5cdCAgICAgICAgY2hpbGRyZW5MaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBmb3IgZWxlbWVudCBkaXJlY3RpdmVzIChjdXN0b20gZWxlbWVudHMgdGhhdCBzaG91bGRcblx0ICogYmUgcmVzb3ZsZWQgYXMgdGVybWluYWwgZGlyZWN0aXZlcykuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0ICBpZiAoY29tbW9uVGFnUkUudGVzdCh0YWcpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKTtcblx0ICBpZiAoZGVmKSB7XG5cdCAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgdGFnLCAnJywgb3B0aW9ucywgZGVmKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LiBJZiB5ZXMsIHJldHVyblxuXHQgKiBhIGNvbXBvbmVudCBsaW5rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucykge1xuXHQgIHZhciBjb21wb25lbnQgPSBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpO1xuXHQgIGlmIChjb21wb25lbnQpIHtcblx0ICAgIHZhciByZWYgPSBmaW5kUmVmKGVsKTtcblx0ICAgIHZhciBkZXNjcmlwdG9yID0ge1xuXHQgICAgICBuYW1lOiAnY29tcG9uZW50Jyxcblx0ICAgICAgcmVmOiByZWYsXG5cdCAgICAgIGV4cHJlc3Npb246IGNvbXBvbmVudC5pZCxcblx0ICAgICAgZGVmOiBpbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50LFxuXHQgICAgICBtb2RpZmllcnM6IHtcblx0ICAgICAgICBsaXRlcmFsOiAhY29tcG9uZW50LmR5bmFtaWNcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHZhciBjb21wb25lbnRMaW5rRm4gPSBmdW5jdGlvbiBjb21wb25lbnRMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgICBpZiAocmVmKSB7XG5cdCAgICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgcmVmLCBudWxsKTtcblx0ICAgICAgfVxuXHQgICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgfTtcblx0ICAgIGNvbXBvbmVudExpbmtGbi50ZXJtaW5hbCA9IHRydWU7XG5cdCAgICByZXR1cm4gY29tcG9uZW50TGlua0ZuO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGFuIGVsZW1lbnQgZm9yIHRlcm1pbmFsIGRpcmVjdGl2ZXMgaW4gZml4ZWQgb3JkZXIuXG5cdCAqIElmIGl0IGZpbmRzIG9uZSwgcmV0dXJuIGEgdGVybWluYWwgbGluayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0FycmF5fSBhdHRyc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpIHtcblx0ICAvLyBza2lwIHYtcHJlXG5cdCAgaWYgKGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gc2tpcDtcblx0ICB9XG5cdCAgLy8gc2tpcCB2LWVsc2UgYmxvY2ssIGJ1dCBvbmx5IGlmIGZvbGxvd2luZyB2LWlmXG5cdCAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndi1lbHNlJykpIHtcblx0ICAgIHZhciBwcmV2ID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcblx0ICAgIGlmIChwcmV2ICYmIHByZXYuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgICAgcmV0dXJuIHNraXA7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIG1vZGlmaWVycywgbWF0Y2hlZCwgZGlyTmFtZSwgcmF3TmFtZSwgYXJnLCBkZWYsIHRlcm1EZWY7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGogPSBhdHRycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0ICAgIGF0dHIgPSBhdHRyc1tpXTtcblx0ICAgIG5hbWUgPSBhdHRyLm5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG5cdCAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuXHQgICAgICBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBtYXRjaGVkWzFdKTtcblx0ICAgICAgaWYgKGRlZiAmJiBkZWYudGVybWluYWwpIHtcblx0ICAgICAgICBpZiAoIXRlcm1EZWYgfHwgKGRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZKSA+IHRlcm1EZWYucHJpb3JpdHkpIHtcblx0ICAgICAgICAgIHRlcm1EZWYgPSBkZWY7XG5cdCAgICAgICAgICByYXdOYW1lID0gYXR0ci5uYW1lO1xuXHQgICAgICAgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMoYXR0ci5uYW1lKTtcblx0ICAgICAgICAgIHZhbHVlID0gYXR0ci52YWx1ZTtcblx0ICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuXHQgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmICh0ZXJtRGVmKSB7XG5cdCAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIHRlcm1EZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNraXAoKSB7fVxuXHRza2lwLnRlcm1pbmFsID0gdHJ1ZTtcblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIG5vZGUgbGluayBmdW5jdGlvbiBmb3IgYSB0ZXJtaW5hbCBkaXJlY3RpdmUuXG5cdCAqIEEgdGVybWluYWwgbGluayBmdW5jdGlvbiB0ZXJtaW5hdGVzIHRoZSBjdXJyZW50XG5cdCAqIGNvbXBpbGF0aW9uIHJlY3Vyc2lvbiBhbmQgaGFuZGxlcyBjb21waWxhdGlvbiBvZiB0aGVcblx0ICogc3VidHJlZSBpbiB0aGUgZGlyZWN0aXZlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gZGVmXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbcmF3TmFtZV1cblx0ICogQHBhcmFtIHtTdHJpbmd9IFthcmddXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgZGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycykge1xuXHQgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG5cdCAgdmFyIGRlc2NyaXB0b3IgPSB7XG5cdCAgICBuYW1lOiBkaXJOYW1lLFxuXHQgICAgYXJnOiBhcmcsXG5cdCAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcblx0ICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzLFxuXHQgICAgcmF3OiB2YWx1ZSxcblx0ICAgIGF0dHI6IHJhd05hbWUsXG5cdCAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcblx0ICAgIGRlZjogZGVmXG5cdCAgfTtcblx0ICAvLyBjaGVjayByZWYgZm9yIHYtZm9yIGFuZCByb3V0ZXItdmlld1xuXHQgIGlmIChkaXJOYW1lID09PSAnZm9yJyB8fCBkaXJOYW1lID09PSAncm91dGVyLXZpZXcnKSB7XG5cdCAgICBkZXNjcmlwdG9yLnJlZiA9IGZpbmRSZWYoZWwpO1xuXHQgIH1cblx0ICB2YXIgZm4gPSBmdW5jdGlvbiB0ZXJtaW5hbE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgaWYgKGRlc2NyaXB0b3IucmVmKSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIGRlc2NyaXB0b3IucmVmLCBudWxsKTtcblx0ICAgIH1cblx0ICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgfTtcblx0ICBmbi50ZXJtaW5hbCA9IHRydWU7XG5cdCAgcmV0dXJuIGZuO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSB0aGUgZGlyZWN0aXZlcyBvbiBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBsaW5rZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl8TmFtZWROb2RlTWFwfSBhdHRyc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucykge1xuXHQgIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuXHQgIHZhciBkaXJzID0gW107XG5cdCAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCByYXdOYW1lLCByYXdWYWx1ZSwgZGlyTmFtZSwgYXJnLCBtb2RpZmllcnMsIGRpckRlZiwgdG9rZW5zLCBtYXRjaGVkO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGF0dHIgPSBhdHRyc1tpXTtcblx0ICAgIG5hbWUgPSByYXdOYW1lID0gYXR0ci5uYW1lO1xuXHQgICAgdmFsdWUgPSByYXdWYWx1ZSA9IGF0dHIudmFsdWU7XG5cdCAgICB0b2tlbnMgPSBwYXJzZVRleHQodmFsdWUpO1xuXHQgICAgLy8gcmVzZXQgYXJnXG5cdCAgICBhcmcgPSBudWxsO1xuXHQgICAgLy8gY2hlY2sgbW9kaWZpZXJzXG5cdCAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhuYW1lKTtcblx0ICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuXHRcblx0ICAgIC8vIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uc1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICB2YWx1ZSA9IHRva2Vuc1RvRXhwKHRva2Vucyk7XG5cdCAgICAgIGFyZyA9IG5hbWU7XG5cdCAgICAgIHB1c2hEaXIoJ2JpbmQnLCBkaXJlY3RpdmVzLmJpbmQsIHRva2Vucyk7XG5cdCAgICAgIC8vIHdhcm4gYWdhaW5zdCBtaXhpbmcgbXVzdGFjaGVzIHdpdGggdi1iaW5kXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhdHRycywgZnVuY3Rpb24gKGF0dHIpIHtcblx0ICAgICAgICAgIHJldHVybiBhdHRyLm5hbWUgPT09ICc6Y2xhc3MnIHx8IGF0dHIubmFtZSA9PT0gJ3YtYmluZDpjbGFzcyc7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHdhcm4oJ2NsYXNzPVwiJyArIHJhd1ZhbHVlICsgJ1wiOiBEbyBub3QgbWl4IG11c3RhY2hlIGludGVycG9sYXRpb24gJyArICdhbmQgdi1iaW5kIGZvciBcImNsYXNzXCIgb24gdGhlIHNhbWUgZWxlbWVudC4gVXNlIG9uZSBvciB0aGUgb3RoZXIuJywgb3B0aW9ucyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Vcblx0XG5cdCAgICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlOiB0cmFuc2l0aW9uXG5cdCAgICAgIGlmICh0cmFuc2l0aW9uUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgIG1vZGlmaWVycy5saXRlcmFsID0gIWJpbmRSRS50ZXN0KG5hbWUpO1xuXHQgICAgICAgIHB1c2hEaXIoJ3RyYW5zaXRpb24nLCBpbnRlcm5hbERpcmVjdGl2ZXMudHJhbnNpdGlvbik7XG5cdCAgICAgIH0gZWxzZVxuXHRcblx0ICAgICAgICAvLyBldmVudCBoYW5kbGVyc1xuXHQgICAgICAgIGlmIChvblJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICAgIGFyZyA9IG5hbWUucmVwbGFjZShvblJFLCAnJyk7XG5cdCAgICAgICAgICBwdXNoRGlyKCdvbicsIGRpcmVjdGl2ZXMub24pO1xuXHQgICAgICAgIH0gZWxzZVxuXHRcblx0ICAgICAgICAgIC8vIGF0dHJpYnV0ZSBiaW5kaW5nc1xuXHQgICAgICAgICAgaWYgKGJpbmRSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgICAgIGRpck5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJyk7XG5cdCAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnc3R5bGUnIHx8IGRpck5hbWUgPT09ICdjbGFzcycpIHtcblx0ICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGludGVybmFsRGlyZWN0aXZlc1tkaXJOYW1lXSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgYXJnID0gZGlyTmFtZTtcblx0ICAgICAgICAgICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSBlbHNlXG5cdFxuXHQgICAgICAgICAgICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuXHQgICAgICAgICAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuXHQgICAgICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuXHQgICAgICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG5cdFxuXHQgICAgICAgICAgICAgIC8vIHNraXAgdi1lbHNlICh3aGVuIHVzZWQgd2l0aCB2LXNob3cpXG5cdCAgICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdlbHNlJykge1xuXHQgICAgICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICBkaXJEZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXJOYW1lLCB0cnVlKTtcblx0ICAgICAgICAgICAgICBpZiAoZGlyRGVmKSB7XG5cdCAgICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGRpckRlZik7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBQdXNoIGEgZGlyZWN0aXZlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGRpck5hbWVcblx0ICAgKiBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gZGVmXG5cdCAgICogQHBhcmFtIHtBcnJheX0gW2ludGVycFRva2Vuc11cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcHVzaERpcihkaXJOYW1lLCBkZWYsIGludGVycFRva2Vucykge1xuXHQgICAgdmFyIGhhc09uZVRpbWVUb2tlbiA9IGludGVycFRva2VucyAmJiBoYXNPbmVUaW1lKGludGVycFRva2Vucyk7XG5cdCAgICB2YXIgcGFyc2VkID0gIWhhc09uZVRpbWVUb2tlbiAmJiBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG5cdCAgICBkaXJzLnB1c2goe1xuXHQgICAgICBuYW1lOiBkaXJOYW1lLFxuXHQgICAgICBhdHRyOiByYXdOYW1lLFxuXHQgICAgICByYXc6IHJhd1ZhbHVlLFxuXHQgICAgICBkZWY6IGRlZixcblx0ICAgICAgYXJnOiBhcmcsXG5cdCAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuXHQgICAgICAvLyBjb252ZXJzaW9uIGZyb20gaW50ZXJwb2xhdGlvbiBzdHJpbmdzIHdpdGggb25lLXRpbWUgdG9rZW5cblx0ICAgICAgLy8gdG8gZXhwcmVzc2lvbiBpcyBkaWZmZXJlZCB1bnRpbCBkaXJlY3RpdmUgYmluZCB0aW1lIHNvIHRoYXQgd2Vcblx0ICAgICAgLy8gaGF2ZSBhY2Nlc3MgdG8gdGhlIGFjdHVhbCB2bSBjb250ZXh0IGZvciBvbmUtdGltZSBiaW5kaW5ncy5cblx0ICAgICAgZXhwcmVzc2lvbjogcGFyc2VkICYmIHBhcnNlZC5leHByZXNzaW9uLFxuXHQgICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG5cdCAgICAgIGludGVycDogaW50ZXJwVG9rZW5zLFxuXHQgICAgICBoYXNPbmVUaW1lOiBoYXNPbmVUaW1lVG9rZW5cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgaWYgKGRpcnMubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gbWFrZU5vZGVMaW5rRm4oZGlycyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgbW9kaWZpZXJzIGZyb20gZGlyZWN0aXZlIGF0dHJpYnV0ZSBuYW1lLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VNb2RpZmllcnMobmFtZSkge1xuXHQgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSk7XG5cdCAgaWYgKG1hdGNoKSB7XG5cdCAgICB2YXIgaSA9IG1hdGNoLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgcmVzW21hdGNoW2ldLnNsaWNlKDEpXSA9IHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGxpbmsgZnVuY3Rpb24gZm9yIGFsbCBkaXJlY3RpdmVzIG9uIGEgc2luZ2xlIG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IGRpcmVjdGl2ZXNMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlTm9kZUxpbmtGbihkaXJlY3RpdmVzKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgLy8gcmV2ZXJzZSBhcHBseSBiZWNhdXNlIGl0J3Mgc29ydGVkIGxvdyB0byBoaWdoXG5cdCAgICB2YXIgaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2bS5fYmluZERpcihkaXJlY3RpdmVzW2ldLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBpbnRlcnBvbGF0aW9uIHN0cmluZyBjb250YWlucyBvbmUtdGltZSB0b2tlbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGhhc09uZVRpbWUodG9rZW5zKSB7XG5cdCAgdmFyIGkgPSB0b2tlbnMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGlmICh0b2tlbnNbaV0ub25lVGltZSkgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1NjcmlwdChlbCkge1xuXHQgIHJldHVybiBlbC50YWdOYW1lID09PSAnU0NSSVBUJyAmJiAoIWVsLmhhc0F0dHJpYnV0ZSgndHlwZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAndGV4dC9qYXZhc2NyaXB0Jyk7XG5cdH1cblx0XG5cdHZhciBzcGVjaWFsQ2hhclJFID0gL1teXFx3XFwtOlxcLl0vO1xuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgYW4gZWxlbWVudCBvciBhIERvY3VtZW50RnJhZ21lbnQgYmFzZWQgb24gYVxuXHQgKiBpbnN0YW5jZSBvcHRpb24gb2JqZWN0LiBUaGlzIGFsbG93cyB1cyB0byB0cmFuc2NsdWRlXG5cdCAqIGEgdGVtcGxhdGUgbm9kZS9mcmFnbWVudCBiZWZvcmUgdGhlIGluc3RhbmNlIGlzIGNyZWF0ZWQsXG5cdCAqIHNvIHRoZSBwcm9jZXNzZWQgZnJhZ21lbnQgY2FuIHRoZW4gYmUgY2xvbmVkIGFuZCByZXVzZWRcblx0ICogaW4gdi1mb3IuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpIHtcblx0ICAvLyBleHRyYWN0IGNvbnRhaW5lciBhdHRyaWJ1dGVzIHRvIHBhc3MgdGhlbSBkb3duXG5cdCAgLy8gdG8gY29tcGlsZXIsIGJlY2F1c2UgdGhleSBuZWVkIHRvIGJlIGNvbXBpbGVkIGluXG5cdCAgLy8gcGFyZW50IHNjb3BlLiB3ZSBhcmUgbXV0YXRpbmcgdGhlIG9wdGlvbnMgb2JqZWN0IGhlcmVcblx0ICAvLyBhc3N1bWluZyB0aGUgc2FtZSBvYmplY3Qgd2lsbCBiZSB1c2VkIGZvciBjb21waWxlXG5cdCAgLy8gcmlnaHQgYWZ0ZXIgdGhpcy5cblx0ICBpZiAob3B0aW9ucykge1xuXHQgICAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBleHRyYWN0QXR0cnMoZWwpO1xuXHQgIH1cblx0ICAvLyBmb3IgdGVtcGxhdGUgdGFncywgd2hhdCB3ZSB3YW50IGlzIGl0cyBjb250ZW50IGFzXG5cdCAgLy8gYSBkb2N1bWVudEZyYWdtZW50IChmb3IgZnJhZ21lbnQgaW5zdGFuY2VzKVxuXHQgIGlmIChpc1RlbXBsYXRlKGVsKSkge1xuXHQgICAgZWwgPSBwYXJzZVRlbXBsYXRlKGVsKTtcblx0ICB9XG5cdCAgaWYgKG9wdGlvbnMpIHtcblx0ICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCAmJiAhb3B0aW9ucy50ZW1wbGF0ZSkge1xuXHQgICAgICBvcHRpb25zLnRlbXBsYXRlID0gJzxzbG90Pjwvc2xvdD4nO1xuXHQgICAgfVxuXHQgICAgaWYgKG9wdGlvbnMudGVtcGxhdGUpIHtcblx0ICAgICAgb3B0aW9ucy5fY29udGVudCA9IGV4dHJhY3RDb250ZW50KGVsKTtcblx0ICAgICAgZWwgPSB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoaXNGcmFnbWVudChlbCkpIHtcblx0ICAgIC8vIGFuY2hvcnMgZm9yIGZyYWdtZW50IGluc3RhbmNlXG5cdCAgICAvLyBwYXNzaW5nIGluIGBwZXJzaXN0OiB0cnVlYCB0byBhdm9pZCB0aGVtIGJlaW5nXG5cdCAgICAvLyBkaXNjYXJkZWQgYnkgSUUgZHVyaW5nIHRlbXBsYXRlIGNsb25pbmdcblx0ICAgIHByZXBlbmQoY3JlYXRlQW5jaG9yKCd2LXN0YXJ0JywgdHJ1ZSksIGVsKTtcblx0ICAgIGVsLmFwcGVuZENoaWxkKGNyZWF0ZUFuY2hvcigndi1lbmQnLCB0cnVlKSk7XG5cdCAgfVxuXHQgIHJldHVybiBlbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbi5cblx0ICogSWYgdGhlIHJlcGxhY2Ugb3B0aW9uIGlzIHRydWUgdGhpcyB3aWxsIHN3YXAgdGhlICRlbC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcblx0ICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHRydWUpO1xuXHQgIGlmIChmcmFnKSB7XG5cdCAgICB2YXIgcmVwbGFjZXIgPSBmcmFnLmZpcnN0Q2hpbGQ7XG5cdCAgICB2YXIgdGFnID0gcmVwbGFjZXIudGFnTmFtZSAmJiByZXBsYWNlci50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoZWwgPT09IGRvY3VtZW50LmJvZHkpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1lvdSBhcmUgbW91bnRpbmcgYW4gaW5zdGFuY2Ugd2l0aCBhIHRlbXBsYXRlIHRvICcgKyAnPGJvZHk+LiBUaGlzIHdpbGwgcmVwbGFjZSA8Ym9keT4gZW50aXJlbHkuIFlvdSAnICsgJ3Nob3VsZCBwcm9iYWJseSB1c2UgYHJlcGxhY2U6IGZhbHNlYCBoZXJlLicpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIHRoZXJlIGFyZSBtYW55IGNhc2VzIHdoZXJlIHRoZSBpbnN0YW5jZSBtdXN0XG5cdCAgICAgIC8vIGJlY29tZSBhIGZyYWdtZW50IGluc3RhbmNlOiBiYXNpY2FsbHkgYW55dGhpbmcgdGhhdFxuXHQgICAgICAvLyBjYW4gY3JlYXRlIG1vcmUgdGhhbiAxIHJvb3Qgbm9kZXMuXG5cdCAgICAgIGlmIChcblx0ICAgICAgLy8gbXVsdGktY2hpbGRyZW4gdGVtcGxhdGVcblx0ICAgICAgZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA+IDEgfHxcblx0ICAgICAgLy8gbm9uLWVsZW1lbnQgdGVtcGxhdGVcblx0ICAgICAgcmVwbGFjZXIubm9kZVR5cGUgIT09IDEgfHxcblx0ICAgICAgLy8gc2luZ2xlIG5lc3RlZCBjb21wb25lbnRcblx0ICAgICAgdGFnID09PSAnY29tcG9uZW50JyB8fCByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpIHx8IGhhc0JpbmRBdHRyKHJlcGxhY2VyLCAnaXMnKSB8fFxuXHQgICAgICAvLyBlbGVtZW50IGRpcmVjdGl2ZVxuXHQgICAgICByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKSB8fFxuXHQgICAgICAvLyBmb3IgYmxvY2tcblx0ICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWZvcicpIHx8XG5cdCAgICAgIC8vIGlmIGJsb2NrXG5cdCAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZyYWc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IGV4dHJhY3RBdHRycyhyZXBsYWNlcik7XG5cdCAgICAgICAgbWVyZ2VBdHRycyhlbCwgcmVwbGFjZXIpO1xuXHQgICAgICAgIHJldHVybiByZXBsYWNlcjtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuYXBwZW5kQ2hpbGQoZnJhZyk7XG5cdCAgICAgIHJldHVybiBlbDtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHRlbXBsYXRlIG9wdGlvbjogJyArIHRlbXBsYXRlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBIZWxwZXIgdG8gZXh0cmFjdCBhIGNvbXBvbmVudCBjb250YWluZXIncyBhdHRyaWJ1dGVzXG5cdCAqIGludG8gYSBwbGFpbiBvYmplY3QgYXJyYXkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7QXJyYXl9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdEF0dHJzKGVsKSB7XG5cdCAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGVsLmhhc0F0dHJpYnV0ZXMoKSkge1xuXHQgICAgcmV0dXJuIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogTWVyZ2UgdGhlIGF0dHJpYnV0ZXMgb2YgdHdvIGVsZW1lbnRzLCBhbmQgbWFrZSBzdXJlXG5cdCAqIHRoZSBjbGFzcyBuYW1lcyBhcmUgbWVyZ2VkIHByb3Blcmx5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGZyb21cblx0ICogQHBhcmFtIHtFbGVtZW50fSB0b1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlQXR0cnMoZnJvbSwgdG8pIHtcblx0ICB2YXIgYXR0cnMgPSBmcm9tLmF0dHJpYnV0ZXM7XG5cdCAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG5cdCAgdmFyIG5hbWUsIHZhbHVlO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuXHQgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcblx0ICAgIGlmICghdG8uaGFzQXR0cmlidXRlKG5hbWUpICYmICFzcGVjaWFsQ2hhclJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgdG8uc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcblx0ICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiAhcGFyc2VUZXh0KHZhbHVlKSAmJiAodmFsdWUgPSB2YWx1ZS50cmltKCkpKSB7XG5cdCAgICAgIHZhbHVlLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG5cdCAgICAgICAgYWRkQ2xhc3ModG8sIGNscyk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFNjYW4gYW5kIGRldGVybWluZSBzbG90IGNvbnRlbnQgZGlzdHJpYnV0aW9uLlxuXHQgKiBXZSBkbyB0aGlzIGR1cmluZyB0cmFuc2NsdXNpb24gaW5zdGVhZCBhdCBjb21waWxlIHRpbWUgc28gdGhhdFxuXHQgKiB0aGUgZGlzdHJpYnV0aW9uIGlzIGRlY291cGxlZCBmcm9tIHRoZSBjb21waWxhdGlvbiBvcmRlciBvZlxuXHQgKiB0aGUgc2xvdHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSB0ZW1wbGF0ZVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRlbnRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZVNsb3RzKHZtLCBjb250ZW50KSB7XG5cdCAgaWYgKCFjb250ZW50KSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBjb250ZW50cyA9IHZtLl9zbG90Q29udGVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBlbCwgbmFtZTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbnRlbnQuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBlbCA9IGNvbnRlbnQuY2hpbGRyZW5baV07XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgaWYgKG5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ3Nsb3QnKSkge1xuXHQgICAgICAoY29udGVudHNbbmFtZV0gfHwgKGNvbnRlbnRzW25hbWVdID0gW10pKS5wdXNoKGVsKTtcblx0ICAgIH1cblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGdldEJpbmRBdHRyKGVsLCAnc2xvdCcpKSB7XG5cdCAgICAgIHdhcm4oJ1RoZSBcInNsb3RcIiBhdHRyaWJ1dGUgbXVzdCBiZSBzdGF0aWMuJywgdm0uJHBhcmVudCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZvciAobmFtZSBpbiBjb250ZW50cykge1xuXHQgICAgY29udGVudHNbbmFtZV0gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudHNbbmFtZV0sIGNvbnRlbnQpO1xuXHQgIH1cblx0ICBpZiAoY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgIHZhciBub2RlcyA9IGNvbnRlbnQuY2hpbGROb2Rlcztcblx0ICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEgJiYgbm9kZXNbMF0ubm9kZVR5cGUgPT09IDMgJiYgIW5vZGVzWzBdLmRhdGEudHJpbSgpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGNvbnRlbnRzWydkZWZhdWx0J10gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudC5jaGlsZE5vZGVzLCBjb250ZW50KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHRyYWN0IHF1YWxpZmllZCBjb250ZW50IG5vZGVzIGZyb20gYSBub2RlIGxpc3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVzXG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdEZyYWdtZW50KG5vZGVzLCBwYXJlbnQpIHtcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICBub2RlcyA9IHRvQXJyYXkobm9kZXMpO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuXHQgICAgaWYgKGlzVGVtcGxhdGUobm9kZSkgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWlmJykgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWZvcicpKSB7XG5cdCAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChub2RlKTtcblx0ICAgICAgbm9kZSA9IHBhcnNlVGVtcGxhdGUobm9kZSwgdHJ1ZSk7XG5cdCAgICB9XG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGUpO1xuXHQgIH1cblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0XG5cdFxuXHR2YXIgY29tcGlsZXIgPSBPYmplY3QuZnJlZXplKHtcblx0XHRjb21waWxlOiBjb21waWxlLFxuXHRcdGNvbXBpbGVBbmRMaW5rUHJvcHM6IGNvbXBpbGVBbmRMaW5rUHJvcHMsXG5cdFx0Y29tcGlsZVJvb3Q6IGNvbXBpbGVSb290LFxuXHRcdHRyYW5zY2x1ZGU6IHRyYW5zY2x1ZGUsXG5cdFx0cmVzb2x2ZVNsb3RzOiByZXNvbHZlU2xvdHNcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBzdGF0ZU1peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBBY2Nlc3NvciBmb3IgYCRkYXRhYCBwcm9wZXJ0eSwgc2luY2Ugc2V0dGluZyAkZGF0YVxuXHQgICAqIHJlcXVpcmVzIG9ic2VydmluZyB0aGUgbmV3IG9iamVjdCBhbmQgdXBkYXRpbmdcblx0ICAgKiBwcm94aWVkIHByb3BlcnRpZXMuXG5cdCAgICovXG5cdFxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCB7XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3RGF0YSkge1xuXHQgICAgICBpZiAobmV3RGF0YSAhPT0gdGhpcy5fZGF0YSkge1xuXHQgICAgICAgIHRoaXMuX3NldERhdGEobmV3RGF0YSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgdGhlIHNjb3BlIG9mIGFuIGluc3RhbmNlLCB3aGljaCBjb250YWluczpcblx0ICAgKiAtIG9ic2VydmVkIGRhdGFcblx0ICAgKiAtIGNvbXB1dGVkIHByb3BlcnRpZXNcblx0ICAgKiAtIHVzZXIgbWV0aG9kc1xuXHQgICAqIC0gbWV0YSBwcm9wZXJ0aWVzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuX2luaXRQcm9wcygpO1xuXHQgICAgdGhpcy5faW5pdE1ldGEoKTtcblx0ICAgIHRoaXMuX2luaXRNZXRob2RzKCk7XG5cdCAgICB0aGlzLl9pbml0RGF0YSgpO1xuXHQgICAgdGhpcy5faW5pdENvbXB1dGVkKCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSBwcm9wcy5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdFByb3BzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXHQgICAgdmFyIGVsID0gb3B0aW9ucy5lbDtcblx0ICAgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG5cdCAgICBpZiAocHJvcHMgJiYgIWVsKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignUHJvcHMgd2lsbCBub3QgYmUgY29tcGlsZWQgaWYgbm8gYGVsYCBvcHRpb24gaXMgJyArICdwcm92aWRlZCBhdCBpbnN0YW50aWF0aW9uLicsIHRoaXMpO1xuXHQgICAgfVxuXHQgICAgLy8gbWFrZSBzdXJlIHRvIGNvbnZlcnQgc3RyaW5nIHNlbGVjdG9ycyBpbnRvIGVsZW1lbnQgbm93XG5cdCAgICBlbCA9IG9wdGlvbnMuZWwgPSBxdWVyeShlbCk7XG5cdCAgICB0aGlzLl9wcm9wc1VubGlua0ZuID0gZWwgJiYgZWwubm9kZVR5cGUgPT09IDEgJiYgcHJvcHNcblx0ICAgIC8vIHByb3BzIG11c3QgYmUgbGlua2VkIGluIHByb3BlciBzY29wZSBpZiBpbnNpZGUgdi1mb3Jcblx0ICAgID8gY29tcGlsZUFuZExpbmtQcm9wcyh0aGlzLCBlbCwgcHJvcHMsIHRoaXMuX3Njb3BlKSA6IG51bGw7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSB0aGUgZGF0YS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdERhdGEgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgZGF0YUZuID0gdGhpcy4kb3B0aW9ucy5kYXRhO1xuXHQgICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhID0gZGF0YUZuID8gZGF0YUZuKCkgOiB7fTtcblx0ICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuXHQgICAgICBkYXRhID0ge307XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignZGF0YSBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuJywgdGhpcyk7XG5cdCAgICB9XG5cdCAgICB2YXIgcHJvcHMgPSB0aGlzLl9wcm9wcztcblx0ICAgIC8vIHByb3h5IGRhdGEgb24gaW5zdGFuY2Vcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG5cdCAgICB2YXIgaSwga2V5O1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAvLyB0aGVyZSBhcmUgdHdvIHNjZW5hcmlvcyB3aGVyZSB3ZSBjYW4gcHJveHkgYSBkYXRhIGtleTpcblx0ICAgICAgLy8gMS4gaXQncyBub3QgYWxyZWFkeSBkZWZpbmVkIGFzIGEgcHJvcFxuXHQgICAgICAvLyAyLiBpdCdzIHByb3ZpZGVkIHZpYSBhIGluc3RhbnRpYXRpb24gb3B0aW9uIEFORCB0aGVyZSBhcmUgbm9cblx0ICAgICAgLy8gICAgdGVtcGxhdGUgcHJvcCBwcmVzZW50XG5cdCAgICAgIGlmICghcHJvcHMgfHwgIWhhc093bihwcm9wcywga2V5KSkge1xuXHQgICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4oJ0RhdGEgZmllbGQgXCInICsga2V5ICsgJ1wiIGlzIGFscmVhZHkgZGVmaW5lZCAnICsgJ2FzIGEgcHJvcC4gVG8gcHJvdmlkZSBkZWZhdWx0IHZhbHVlIGZvciBhIHByb3AsIHVzZSB0aGUgXCJkZWZhdWx0XCIgJyArICdwcm9wIG9wdGlvbjsgaWYgeW91IHdhbnQgdG8gcGFzcyBwcm9wIHZhbHVlcyB0byBhbiBpbnN0YW50aWF0aW9uICcgKyAnY2FsbCwgdXNlIHRoZSBcInByb3BzRGF0YVwiIG9wdGlvbi4nLCB0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gb2JzZXJ2ZSBkYXRhXG5cdCAgICBvYnNlcnZlKGRhdGEsIHRoaXMpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFN3YXAgdGhlIGluc3RhbmNlJ3MgJGRhdGEuIENhbGxlZCBpbiAkZGF0YSdzIHNldHRlci5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBuZXdEYXRhXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3NldERhdGEgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xuXHQgICAgbmV3RGF0YSA9IG5ld0RhdGEgfHwge307XG5cdCAgICB2YXIgb2xkRGF0YSA9IHRoaXMuX2RhdGE7XG5cdCAgICB0aGlzLl9kYXRhID0gbmV3RGF0YTtcblx0ICAgIHZhciBrZXlzLCBrZXksIGk7XG5cdCAgICAvLyB1bnByb3h5IGtleXMgbm90IHByZXNlbnQgaW4gbmV3IGRhdGFcblx0ICAgIGtleXMgPSBPYmplY3Qua2V5cyhvbGREYXRhKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgaWYgKCEoa2V5IGluIG5ld0RhdGEpKSB7XG5cdCAgICAgICAgdGhpcy5fdW5wcm94eShrZXkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBwcm94eSBrZXlzIG5vdCBhbHJlYWR5IHByb3hpZWQsXG5cdCAgICAvLyBhbmQgdHJpZ2dlciBjaGFuZ2UgZm9yIGNoYW5nZWQgdmFsdWVzXG5cdCAgICBrZXlzID0gT2JqZWN0LmtleXMobmV3RGF0YSk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgIGlmICghaGFzT3duKHRoaXMsIGtleSkpIHtcblx0ICAgICAgICAvLyBuZXcgcHJvcGVydHlcblx0ICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBvbGREYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcblx0ICAgIG9ic2VydmUobmV3RGF0YSwgdGhpcyk7XG5cdCAgICB0aGlzLl9kaWdlc3QoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQcm94eSBhIHByb3BlcnR5LCBzbyB0aGF0XG5cdCAgICogdm0ucHJvcCA9PT0gdm0uX2RhdGEucHJvcFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG5cdCAgICAgIC8vIG5lZWQgdG8gc3RvcmUgcmVmIHRvIHNlbGYgaGVyZVxuXHQgICAgICAvLyBiZWNhdXNlIHRoZXNlIGdldHRlci9zZXR0ZXJzIG1pZ2h0XG5cdCAgICAgIC8vIGJlIGNhbGxlZCBieSBjaGlsZCBzY29wZXMgdmlhXG5cdCAgICAgIC8vIHByb3RvdHlwZSBpbmhlcml0YW5jZS5cblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwga2V5LCB7XG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiBwcm94eUdldHRlcigpIHtcblx0ICAgICAgICAgIHJldHVybiBzZWxmLl9kYXRhW2tleV07XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBzZXQ6IGZ1bmN0aW9uIHByb3h5U2V0dGVyKHZhbCkge1xuXHQgICAgICAgICAgc2VsZi5fZGF0YVtrZXldID0gdmFsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVW5wcm94eSBhIHByb3BlcnR5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl91bnByb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcblx0ICAgICAgZGVsZXRlIHRoaXNba2V5XTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBGb3JjZSB1cGRhdGUgb24gZXZlcnkgd2F0Y2hlciBpbiBzY29wZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udXBkYXRlKHRydWUpOyAvLyBzaGFsbG93IHVwZGF0ZXNcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCBjb21wdXRlZCBwcm9wZXJ0aWVzLiBUaGV5IGFyZSBlc3NlbnRpYWxseVxuXHQgICAqIHNwZWNpYWwgZ2V0dGVyL3NldHRlcnNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gbm9vcCgpIHt9XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdENvbXB1dGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGNvbXB1dGVkID0gdGhpcy4kb3B0aW9ucy5jb21wdXRlZDtcblx0ICAgIGlmIChjb21wdXRlZCkge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcblx0ICAgICAgICB2YXIgdXNlckRlZiA9IGNvbXB1dGVkW2tleV07XG5cdCAgICAgICAgdmFyIGRlZiA9IHtcblx0ICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgZGVmLmdldCA9IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLCB0aGlzKTtcblx0ICAgICAgICAgIGRlZi5zZXQgPSBub29wO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBkZWYuZ2V0ID0gdXNlckRlZi5nZXQgPyB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZSA/IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLmdldCwgdGhpcykgOiBiaW5kKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IG5vb3A7XG5cdCAgICAgICAgICBkZWYuc2V0ID0gdXNlckRlZi5zZXQgPyBiaW5kKHVzZXJEZWYuc2V0LCB0aGlzKSA6IG5vb3A7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIGRlZik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBtYWtlQ29tcHV0ZWRHZXR0ZXIoZ2V0dGVyLCBvd25lcikge1xuXHQgICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcihvd25lciwgZ2V0dGVyLCBudWxsLCB7XG5cdCAgICAgIGxhenk6IHRydWVcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyKCkge1xuXHQgICAgICBpZiAod2F0Y2hlci5kaXJ0eSkge1xuXHQgICAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoRGVwLnRhcmdldCkge1xuXHQgICAgICAgIHdhdGNoZXIuZGVwZW5kKCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWU7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgaW5zdGFuY2UgbWV0aG9kcy4gTWV0aG9kcyBtdXN0IGJlIGJvdW5kIHRvIHRoZVxuXHQgICAqIGluc3RhbmNlIHNpbmNlIHRoZXkgbWlnaHQgYmUgcGFzc2VkIGRvd24gYXMgYSBwcm9wIHRvXG5cdCAgICogY2hpbGQgY29tcG9uZW50cy5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGhvZHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgbWV0aG9kcyA9IHRoaXMuJG9wdGlvbnMubWV0aG9kcztcblx0ICAgIGlmIChtZXRob2RzKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBtZXRob2RzKSB7XG5cdCAgICAgICAgdGhpc1trZXldID0gYmluZChtZXRob2RzW2tleV0sIHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSBtZXRhIGluZm9ybWF0aW9uIGxpa2UgJGluZGV4LCAka2V5ICYgJHZhbHVlLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0TWV0YSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBtZXRhcyA9IHRoaXMuJG9wdGlvbnMuX21ldGE7XG5cdCAgICBpZiAobWV0YXMpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIG1ldGFzKSB7XG5cdCAgICAgICAgZGVmaW5lUmVhY3RpdmUodGhpcywga2V5LCBtZXRhc1trZXldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBldmVudFJFID0gL152LW9uOnxeQC87XG5cdFxuXHRmdW5jdGlvbiBldmVudHNNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgdGhlIGluc3RhbmNlJ3Mgb3B0aW9uIGV2ZW50cyAmIHdhdGNoZXJzLlxuXHQgICAqIElmIHRoZSB2YWx1ZSBpcyBhIHN0cmluZywgd2UgcHVsbCBpdCBmcm9tIHRoZVxuXHQgICAqIGluc3RhbmNlJ3MgbWV0aG9kcyBieSBuYW1lLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXHQgICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG5cdCAgICAgIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHRoaXMsIG9wdGlvbnMuZWwpO1xuXHQgICAgfVxuXHQgICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyRvbicsIG9wdGlvbnMuZXZlbnRzKTtcblx0ICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckd2F0Y2gnLCBvcHRpb25zLndhdGNoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZWdpc3RlciB2LW9uIGV2ZW50cyBvbiBhIGNoaWxkIGNvbXBvbmVudFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh2bSwgZWwpIHtcblx0ICAgIHZhciBhdHRycyA9IGVsLmF0dHJpYnV0ZXM7XG5cdCAgICB2YXIgbmFtZSwgdmFsdWUsIGhhbmRsZXI7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcblx0ICAgICAgaWYgKGV2ZW50UkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZXZlbnRSRSwgJycpO1xuXHQgICAgICAgIC8vIGZvcmNlIHRoZSBleHByZXNzaW9uIGludG8gYSBzdGF0ZW1lbnQgc28gdGhhdFxuXHQgICAgICAgIC8vIGl0IGFsd2F5cyBkeW5hbWljYWxseSByZXNvbHZlcyB0aGUgbWV0aG9kIHRvIGNhbGwgKCMyNjcwKVxuXHQgICAgICAgIC8vIGtpbmRhIHVnbHkgaGFjaywgYnV0IGRvZXMgdGhlIGpvYi5cblx0ICAgICAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuXHQgICAgICAgIGlmIChpc1NpbXBsZVBhdGgodmFsdWUpKSB7XG5cdCAgICAgICAgICB2YWx1ZSArPSAnLmFwcGx5KHRoaXMsICRhcmd1bWVudHMpJztcblx0ICAgICAgICB9XG5cdCAgICAgICAgaGFuZGxlciA9ICh2bS5fc2NvcGUgfHwgdm0uX2NvbnRleHQpLiRldmFsKHZhbHVlLCB0cnVlKTtcblx0ICAgICAgICBoYW5kbGVyLl9mcm9tUGFyZW50ID0gdHJ1ZTtcblx0ICAgICAgICB2bS4kb24obmFtZS5yZXBsYWNlKGV2ZW50UkUpLCBoYW5kbGVyKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVnaXN0ZXIgY2FsbGJhY2tzIGZvciBvcHRpb24gZXZlbnRzIGFuZCB3YXRjaGVycy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gaGFzaFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWdpc3RlckNhbGxiYWNrcyh2bSwgYWN0aW9uLCBoYXNoKSB7XG5cdCAgICBpZiAoIWhhc2gpIHJldHVybjtcblx0ICAgIHZhciBoYW5kbGVycywga2V5LCBpLCBqO1xuXHQgICAgZm9yIChrZXkgaW4gaGFzaCkge1xuXHQgICAgICBoYW5kbGVycyA9IGhhc2hba2V5XTtcblx0ICAgICAgaWYgKGlzQXJyYXkoaGFuZGxlcnMpKSB7XG5cdCAgICAgICAgZm9yIChpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHQgICAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyc1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBIZWxwZXIgdG8gcmVnaXN0ZXIgYW4gZXZlbnQvd2F0Y2ggY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfE9iamVjdH0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLCBvcHRpb25zKSB7XG5cdCAgICB2YXIgdHlwZSA9IHR5cGVvZiBoYW5kbGVyO1xuXHQgICAgaWYgKHR5cGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdm1bYWN0aW9uXShrZXksIGhhbmRsZXIsIG9wdGlvbnMpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuXHQgICAgICB2YXIgbWV0aG9kcyA9IHZtLiRvcHRpb25zLm1ldGhvZHM7XG5cdCAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzICYmIG1ldGhvZHNbaGFuZGxlcl07XG5cdCAgICAgIGlmIChtZXRob2QpIHtcblx0ICAgICAgICB2bVthY3Rpb25dKGtleSwgbWV0aG9kLCBvcHRpb25zKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Vua25vd24gbWV0aG9kOiBcIicgKyBoYW5kbGVyICsgJ1wiIHdoZW4gJyArICdyZWdpc3RlcmluZyBjYWxsYmFjayBmb3IgJyArIGFjdGlvbiArICc6IFwiJyArIGtleSArICdcIi4nLCB2bSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoaGFuZGxlciAmJiB0eXBlID09PSAnb2JqZWN0Jykge1xuXHQgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIuaGFuZGxlciwgaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCByZWN1cnNpdmUgYXR0YWNoZWQvZGV0YWNoZWQgY2FsbHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdERPTUhvb2tzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy4kb24oJ2hvb2s6YXR0YWNoZWQnLCBvbkF0dGFjaGVkKTtcblx0ICAgIHRoaXMuJG9uKCdob29rOmRldGFjaGVkJywgb25EZXRhY2hlZCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBhdHRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG9uQXR0YWNoZWQoKSB7XG5cdCAgICBpZiAoIXRoaXMuX2lzQXR0YWNoZWQpIHtcblx0ICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG5cdCAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbEF0dGFjaCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBJdGVyYXRvciB0byBjYWxsIGF0dGFjaGVkIGhvb2tcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYWxsQXR0YWNoKGNoaWxkKSB7XG5cdCAgICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBkZXRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG9uRGV0YWNoZWQoKSB7XG5cdCAgICBpZiAodGhpcy5faXNBdHRhY2hlZCkge1xuXHQgICAgICB0aGlzLl9pc0F0dGFjaGVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbERldGFjaCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBJdGVyYXRvciB0byBjYWxsIGRldGFjaGVkIGhvb2tcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYWxsRGV0YWNoKGNoaWxkKSB7XG5cdCAgICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogVHJpZ2dlciBhbGwgaGFuZGxlcnMgZm9yIGEgaG9va1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGhvb2tcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuXHQgICAgdGhpcy4kZW1pdCgncHJlLWhvb2s6JyArIGhvb2spO1xuXHQgICAgdmFyIGhhbmRsZXJzID0gdGhpcy4kb3B0aW9uc1tob29rXTtcblx0ICAgIGlmIChoYW5kbGVycykge1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHQgICAgICAgIGhhbmRsZXJzW2ldLmNhbGwodGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMuJGVtaXQoJ2hvb2s6JyArIGhvb2spO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5vb3AkMSgpIHt9XG5cdFxuXHQvKipcblx0ICogQSBkaXJlY3RpdmUgbGlua3MgYSBET00gZWxlbWVudCB3aXRoIGEgcGllY2Ugb2YgZGF0YSxcblx0ICogd2hpY2ggaXMgdGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIGFuIGV4cHJlc3Npb24uXG5cdCAqIEl0IHJlZ2lzdGVycyBhIHdhdGNoZXIgd2l0aCB0aGUgZXhwcmVzc2lvbiBhbmQgY2FsbHNcblx0ICogdGhlIERPTSB1cGRhdGUgZnVuY3Rpb24gd2hlbiBhIGNoYW5nZSBpcyB0cmlnZ2VyZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IG5hbWVcblx0ICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gZGVmXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGV4cHJlc3Npb25cblx0ICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtmaWx0ZXJzXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGl0ZXJhbFxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhdHRyXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGFyZ1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSByYXdcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gW3JlZl1cblx0ICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtpbnRlcnBdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaGFzT25lVGltZV1cblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdGhpcy5lbCA9IGVsO1xuXHQgIC8vIGNvcHkgZGVzY3JpcHRvciBwcm9wZXJ0aWVzXG5cdCAgdGhpcy5kZXNjcmlwdG9yID0gZGVzY3JpcHRvcjtcblx0ICB0aGlzLm5hbWUgPSBkZXNjcmlwdG9yLm5hbWU7XG5cdCAgdGhpcy5leHByZXNzaW9uID0gZGVzY3JpcHRvci5leHByZXNzaW9uO1xuXHQgIHRoaXMuYXJnID0gZGVzY3JpcHRvci5hcmc7XG5cdCAgdGhpcy5tb2RpZmllcnMgPSBkZXNjcmlwdG9yLm1vZGlmaWVycztcblx0ICB0aGlzLmZpbHRlcnMgPSBkZXNjcmlwdG9yLmZpbHRlcnM7XG5cdCAgdGhpcy5saXRlcmFsID0gdGhpcy5tb2RpZmllcnMgJiYgdGhpcy5tb2RpZmllcnMubGl0ZXJhbDtcblx0ICAvLyBwcml2YXRlXG5cdCAgdGhpcy5fbG9ja2VkID0gZmFsc2U7XG5cdCAgdGhpcy5fYm91bmQgPSBmYWxzZTtcblx0ICB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuXHQgIC8vIGxpbmsgY29udGV4dFxuXHQgIHRoaXMuX2hvc3QgPSBob3N0O1xuXHQgIHRoaXMuX3Njb3BlID0gc2NvcGU7XG5cdCAgdGhpcy5fZnJhZyA9IGZyYWc7XG5cdCAgLy8gc3RvcmUgZGlyZWN0aXZlcyBvbiBub2RlIGluIGRldiBtb2RlXG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuXHQgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgPSB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyB8fCBbXTtcblx0ICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLnB1c2godGhpcyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogSW5pdGlhbGl6ZSB0aGUgZGlyZWN0aXZlLCBtaXhpbiBkZWZpbml0aW9uIHByb3BlcnRpZXMsXG5cdCAqIHNldHVwIHRoZSB3YXRjaGVyLCBjYWxsIGRlZmluaXRpb24gYmluZCgpIGFuZCB1cGRhdGUoKVxuXHQgKiBpZiBwcmVzZW50LlxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX2JpbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIG5hbWUgPSB0aGlzLm5hbWU7XG5cdCAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG5cdFxuXHQgIC8vIHJlbW92ZSBhdHRyaWJ1dGVcblx0ICBpZiAoKG5hbWUgIT09ICdjbG9haycgfHwgdGhpcy52bS5faXNDb21waWxlZCkgJiYgdGhpcy5lbCAmJiB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSkge1xuXHQgICAgdmFyIGF0dHIgPSBkZXNjcmlwdG9yLmF0dHIgfHwgJ3YtJyArIG5hbWU7XG5cdCAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICB9XG5cdFxuXHQgIC8vIGNvcHkgZGVmIHByb3BlcnRpZXNcblx0ICB2YXIgZGVmID0gZGVzY3JpcHRvci5kZWY7XG5cdCAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHRoaXMudXBkYXRlID0gZGVmO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBleHRlbmQodGhpcywgZGVmKTtcblx0ICB9XG5cdFxuXHQgIC8vIHNldHVwIGRpcmVjdGl2ZSBwYXJhbXNcblx0ICB0aGlzLl9zZXR1cFBhcmFtcygpO1xuXHRcblx0ICAvLyBpbml0aWFsIGJpbmRcblx0ICBpZiAodGhpcy5iaW5kKSB7XG5cdCAgICB0aGlzLmJpbmQoKTtcblx0ICB9XG5cdCAgdGhpcy5fYm91bmQgPSB0cnVlO1xuXHRcblx0ICBpZiAodGhpcy5saXRlcmFsKSB7XG5cdCAgICB0aGlzLnVwZGF0ZSAmJiB0aGlzLnVwZGF0ZShkZXNjcmlwdG9yLnJhdyk7XG5cdCAgfSBlbHNlIGlmICgodGhpcy5leHByZXNzaW9uIHx8IHRoaXMubW9kaWZpZXJzKSAmJiAodGhpcy51cGRhdGUgfHwgdGhpcy50d29XYXkpICYmICF0aGlzLl9jaGVja1N0YXRlbWVudCgpKSB7XG5cdCAgICAvLyB3cmFwcGVkIHVwZGF0ZXIgZm9yIGNvbnRleHRcblx0ICAgIHZhciBkaXIgPSB0aGlzO1xuXHQgICAgaWYgKHRoaXMudXBkYXRlKSB7XG5cdCAgICAgIHRoaXMuX3VwZGF0ZSA9IGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuXHQgICAgICAgIGlmICghZGlyLl9sb2NrZWQpIHtcblx0ICAgICAgICAgIGRpci51cGRhdGUodmFsLCBvbGRWYWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuX3VwZGF0ZSA9IG5vb3AkMTtcblx0ICAgIH1cblx0ICAgIHZhciBwcmVQcm9jZXNzID0gdGhpcy5fcHJlUHJvY2VzcyA/IGJpbmQodGhpcy5fcHJlUHJvY2VzcywgdGhpcykgOiBudWxsO1xuXHQgICAgdmFyIHBvc3RQcm9jZXNzID0gdGhpcy5fcG9zdFByb2Nlc3MgPyBiaW5kKHRoaXMuX3Bvc3RQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG5cdCAgICB2YXIgd2F0Y2hlciA9IHRoaXMuX3dhdGNoZXIgPSBuZXcgV2F0Y2hlcih0aGlzLnZtLCB0aGlzLmV4cHJlc3Npb24sIHRoaXMuX3VwZGF0ZSwgLy8gY2FsbGJhY2tcblx0ICAgIHtcblx0ICAgICAgZmlsdGVyczogdGhpcy5maWx0ZXJzLFxuXHQgICAgICB0d29XYXk6IHRoaXMudHdvV2F5LFxuXHQgICAgICBkZWVwOiB0aGlzLmRlZXAsXG5cdCAgICAgIHByZVByb2Nlc3M6IHByZVByb2Nlc3MsXG5cdCAgICAgIHBvc3RQcm9jZXNzOiBwb3N0UHJvY2Vzcyxcblx0ICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG5cdCAgICB9KTtcblx0ICAgIC8vIHYtbW9kZWwgd2l0aCBpbml0YWwgaW5saW5lIHZhbHVlIG5lZWQgdG8gc3luYyBiYWNrIHRvXG5cdCAgICAvLyBtb2RlbCBpbnN0ZWFkIG9mIHVwZGF0ZSB0byBET00gb24gaW5pdC4gVGhleSB3b3VsZFxuXHQgICAgLy8gc2V0IHRoZSBhZnRlckJpbmQgaG9vayB0byBpbmRpY2F0ZSB0aGF0LlxuXHQgICAgaWYgKHRoaXMuYWZ0ZXJCaW5kKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kKCk7XG5cdCAgICB9IGVsc2UgaWYgKHRoaXMudXBkYXRlKSB7XG5cdCAgICAgIHRoaXMudXBkYXRlKHdhdGNoZXIudmFsdWUpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXR1cCBhbGwgcGFyYW0gYXR0cmlidXRlcywgZS5nLiB0cmFjay1ieSxcblx0ICogdHJhbnNpdGlvbi1tb2RlLCBldGMuLi5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAoIXRoaXMucGFyYW1zKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcztcblx0ICAvLyBzd2FwIHRoZSBwYXJhbXMgYXJyYXkgd2l0aCBhIGZyZXNoIG9iamVjdC5cblx0ICB0aGlzLnBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdmFyIGkgPSBwYXJhbXMubGVuZ3RoO1xuXHQgIHZhciBrZXksIHZhbCwgbWFwcGVkS2V5O1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGtleSA9IGh5cGhlbmF0ZShwYXJhbXNbaV0pO1xuXHQgICAgbWFwcGVkS2V5ID0gY2FtZWxpemUoa2V5KTtcblx0ICAgIHZhbCA9IGdldEJpbmRBdHRyKHRoaXMuZWwsIGtleSk7XG5cdCAgICBpZiAodmFsICE9IG51bGwpIHtcblx0ICAgICAgLy8gZHluYW1pY1xuXHQgICAgICB0aGlzLl9zZXR1cFBhcmFtV2F0Y2hlcihtYXBwZWRLZXksIHZhbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBzdGF0aWNcblx0ICAgICAgdmFsID0gZ2V0QXR0cih0aGlzLmVsLCBrZXkpO1xuXHQgICAgICBpZiAodmFsICE9IG51bGwpIHtcblx0ICAgICAgICB0aGlzLnBhcmFtc1ttYXBwZWRLZXldID0gdmFsID09PSAnJyA/IHRydWUgOiB2YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0dXAgYSB3YXRjaGVyIGZvciBhIGR5bmFtaWMgcGFyYW0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cHJlc3Npb25cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtV2F0Y2hlciA9IGZ1bmN0aW9uIChrZXksIGV4cHJlc3Npb24pIHtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuXHQgIHZhciB1bndhdGNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiR3YXRjaChleHByZXNzaW9uLCBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcblx0ICAgIHNlbGYucGFyYW1zW2tleV0gPSB2YWw7XG5cdCAgICAvLyBzaW5jZSB3ZSBhcmUgaW4gaW1tZWRpYXRlIG1vZGUsXG5cdCAgICAvLyBvbmx5IGNhbGwgdGhlIHBhcmFtIGNoYW5nZSBjYWxsYmFja3MgaWYgdGhpcyBpcyBub3QgdGhlIGZpcnN0IHVwZGF0ZS5cblx0ICAgIGlmIChjYWxsZWQpIHtcblx0ICAgICAgdmFyIGNiID0gc2VsZi5wYXJhbVdhdGNoZXJzICYmIHNlbGYucGFyYW1XYXRjaGVyc1trZXldO1xuXHQgICAgICBpZiAoY2IpIHtcblx0ICAgICAgICBjYi5jYWxsKHNlbGYsIHZhbCwgb2xkVmFsKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgY2FsbGVkID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBpbW1lZGlhdGU6IHRydWUsXG5cdCAgICB1c2VyOiBmYWxzZVxuXHQgIH0pOyh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgfHwgKHRoaXMuX3BhcmFtVW53YXRjaEZucyA9IFtdKSkucHVzaCh1bndhdGNoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiB0aGUgZGlyZWN0aXZlIGlzIGEgZnVuY3Rpb24gY2FsbGVyXG5cdCAqIGFuZCBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIGNhbGxhYmxlIG9uZS4gSWYgYm90aCB0cnVlLFxuXHQgKiB3ZSB3cmFwIHVwIHRoZSBleHByZXNzaW9uIGFuZCB1c2UgaXQgYXMgdGhlIGV2ZW50XG5cdCAqIGhhbmRsZXIuXG5cdCAqXG5cdCAqIGUuZy4gb24tY2xpY2s9XCJhKytcIlxuXHQgKlxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX2NoZWNrU3RhdGVtZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBleHByZXNzaW9uID0gdGhpcy5leHByZXNzaW9uO1xuXHQgIGlmIChleHByZXNzaW9uICYmIHRoaXMuYWNjZXB0U3RhdGVtZW50ICYmICFpc1NpbXBsZVBhdGgoZXhwcmVzc2lvbikpIHtcblx0ICAgIHZhciBmbiA9IHBhcnNlRXhwcmVzc2lvbihleHByZXNzaW9uKS5nZXQ7XG5cdCAgICB2YXIgc2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuXHQgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGUpIHtcblx0ICAgICAgc2NvcGUuJGV2ZW50ID0gZTtcblx0ICAgICAgZm4uY2FsbChzY29wZSwgc2NvcGUpO1xuXHQgICAgICBzY29wZS4kZXZlbnQgPSBudWxsO1xuXHQgICAgfTtcblx0ICAgIGlmICh0aGlzLmZpbHRlcnMpIHtcblx0ICAgICAgaGFuZGxlciA9IHNjb3BlLl9hcHBseUZpbHRlcnMoaGFuZGxlciwgbnVsbCwgdGhpcy5maWx0ZXJzKTtcblx0ICAgIH1cblx0ICAgIHRoaXMudXBkYXRlKGhhbmRsZXIpO1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG5cdCAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0d28td2F5IGRpcmVjdGl2ZXNcblx0ICogZS5nLiB2LW1vZGVsLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKHRoaXMudHdvV2F5KSB7XG5cdCAgICB0aGlzLl93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXIuc2V0KHZhbHVlKTtcblx0ICAgIH0pO1xuXHQgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgd2FybignRGlyZWN0aXZlLnNldCgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHR3b1dheScgKyAnZGlyZWN0aXZlcy4nKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRXhlY3V0ZSBhIGZ1bmN0aW9uIHdoaWxlIHByZXZlbnRpbmcgdGhhdCBmdW5jdGlvbiBmcm9tXG5cdCAqIHRyaWdnZXJpbmcgdXBkYXRlcyBvbiB0aGlzIGRpcmVjdGl2ZSBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl93aXRoTG9jayA9IGZ1bmN0aW9uIChmbikge1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICBzZWxmLl9sb2NrZWQgPSB0cnVlO1xuXHQgIGZuLmNhbGwoc2VsZik7XG5cdCAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgc2VsZi5fbG9ja2VkID0gZmFsc2U7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ29udmVuaWVuY2UgbWV0aG9kIHRoYXQgYXR0YWNoZXMgYSBET00gZXZlbnQgbGlzdGVuZXJcblx0ICogdG8gdGhlIGRpcmVjdGl2ZSBlbGVtZW50IGFuZCBhdXRvbWV0aWNhbGx5IHRlYXJzIGl0IGRvd25cblx0ICogZHVyaW5nIHVuYmluZC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50LCBoYW5kbGVyLCB1c2VDYXB0dXJlKSB7XG5cdCAgb24odGhpcy5lbCwgZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpOyh0aGlzLl9saXN0ZW5lcnMgfHwgKHRoaXMuX2xpc3RlbmVycyA9IFtdKSkucHVzaChbZXZlbnQsIGhhbmRsZXJdKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUZWFyZG93biB0aGUgd2F0Y2hlciBhbmQgY2FsbCB1bmJpbmQuXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fdGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMuX2JvdW5kKSB7XG5cdCAgICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuXHQgICAgaWYgKHRoaXMudW5iaW5kKSB7XG5cdCAgICAgIHRoaXMudW5iaW5kKCk7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5fd2F0Y2hlcikge1xuXHQgICAgICB0aGlzLl93YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuXHQgICAgdmFyIGk7XG5cdCAgICBpZiAobGlzdGVuZXJzKSB7XG5cdCAgICAgIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgb2ZmKHRoaXMuZWwsIGxpc3RlbmVyc1tpXVswXSwgbGlzdGVuZXJzW2ldWzFdKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIHVud2F0Y2hGbnMgPSB0aGlzLl9wYXJhbVVud2F0Y2hGbnM7XG5cdCAgICBpZiAodW53YXRjaEZucykge1xuXHQgICAgICBpID0gdW53YXRjaEZucy5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICB1bndhdGNoRm5zW2ldKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcblx0ICAgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMuJHJlbW92ZSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIHRoaXMudm0gPSB0aGlzLmVsID0gdGhpcy5fd2F0Y2hlciA9IHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gbGlmZWN5Y2xlTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFVwZGF0ZSB2LXJlZiBmb3IgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fdXBkYXRlUmVmID0gZnVuY3Rpb24gKHJlbW92ZSkge1xuXHQgICAgdmFyIHJlZiA9IHRoaXMuJG9wdGlvbnMuX3JlZjtcblx0ICAgIGlmIChyZWYpIHtcblx0ICAgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy5fY29udGV4dCkuJHJlZnM7XG5cdCAgICAgIGlmIChyZW1vdmUpIHtcblx0ICAgICAgICBpZiAocmVmc1tyZWZdID09PSB0aGlzKSB7XG5cdCAgICAgICAgICByZWZzW3JlZl0gPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZWZzW3JlZl0gPSB0aGlzO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVHJhbnNjbHVkZSwgY29tcGlsZSBhbmQgbGluayBlbGVtZW50LlxuXHQgICAqXG5cdCAgICogSWYgYSBwcmUtY29tcGlsZWQgbGlua2VyIGlzIGF2YWlsYWJsZSwgdGhhdCBtZWFucyB0aGVcblx0ICAgKiBwYXNzZWQgaW4gZWxlbWVudCB3aWxsIGJlIHByZS10cmFuc2NsdWRlZCBhbmQgY29tcGlsZWRcblx0ICAgKiBhcyB3ZWxsIC0gYWxsIHdlIG5lZWQgdG8gZG8gaXMgdG8gY2FsbCB0aGUgbGlua2VyLlxuXHQgICAqXG5cdCAgICogT3RoZXJ3aXNlIHdlIG5lZWQgdG8gY2FsbCB0cmFuc2NsdWRlL2NvbXBpbGUvbGluayBoZXJlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9jb21waWxlID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cdFxuXHQgICAgLy8gdHJhbnNjbHVkZSBhbmQgaW5pdCBlbGVtZW50XG5cdCAgICAvLyB0cmFuc2NsdWRlIGNhbiBwb3RlbnRpYWxseSByZXBsYWNlIG9yaWdpbmFsXG5cdCAgICAvLyBzbyB3ZSBuZWVkIHRvIGtlZXAgcmVmZXJlbmNlOyB0aGlzIHN0ZXAgYWxzbyBpbmplY3RzXG5cdCAgICAvLyB0aGUgdGVtcGxhdGUgYW5kIGNhY2hlcyB0aGUgb3JpZ2luYWwgYXR0cmlidXRlc1xuXHQgICAgLy8gb24gdGhlIGNvbnRhaW5lciBub2RlIGFuZCByZXBsYWNlciBub2RlLlxuXHQgICAgdmFyIG9yaWdpbmFsID0gZWw7XG5cdCAgICBlbCA9IHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpO1xuXHQgICAgdGhpcy5faW5pdEVsZW1lbnQoZWwpO1xuXHRcblx0ICAgIC8vIGhhbmRsZSB2LXByZSBvbiByb290IG5vZGUgKCMyMDI2KVxuXHQgICAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyByb290IGlzIGFsd2F5cyBjb21waWxlZCBwZXItaW5zdGFuY2UsIGJlY2F1c2Vcblx0ICAgIC8vIGNvbnRhaW5lciBhdHRycyBhbmQgcHJvcHMgY2FuIGJlIGRpZmZlcmVudCBldmVyeSB0aW1lLlxuXHQgICAgdmFyIGNvbnRleHRPcHRpb25zID0gdGhpcy5fY29udGV4dCAmJiB0aGlzLl9jb250ZXh0LiRvcHRpb25zO1xuXHQgICAgdmFyIHJvb3RMaW5rZXIgPSBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpO1xuXHRcblx0ICAgIC8vIHJlc29sdmUgc2xvdCBkaXN0cmlidXRpb25cblx0ICAgIHJlc29sdmVTbG90cyh0aGlzLCBvcHRpb25zLl9jb250ZW50KTtcblx0XG5cdCAgICAvLyBjb21waWxlIGFuZCBsaW5rIHRoZSByZXN0XG5cdCAgICB2YXIgY29udGVudExpbmtGbjtcblx0ICAgIHZhciBjdG9yID0gdGhpcy5jb25zdHJ1Y3Rvcjtcblx0ICAgIC8vIGNvbXBvbmVudCBjb21waWxhdGlvbiBjYW4gYmUgY2FjaGVkXG5cdCAgICAvLyBhcyBsb25nIGFzIGl0J3Mgbm90IHVzaW5nIGlubGluZS10ZW1wbGF0ZVxuXHQgICAgaWYgKG9wdGlvbnMuX2xpbmtlckNhY2hhYmxlKSB7XG5cdCAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlcjtcblx0ICAgICAgaWYgKCFjb250ZW50TGlua0ZuKSB7XG5cdCAgICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyID0gY29tcGlsZShlbCwgb3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBsaW5rIHBoYXNlXG5cdCAgICAvLyBtYWtlIHN1cmUgdG8gbGluayByb290IHdpdGggcHJvcCBzY29wZSFcblx0ICAgIHZhciByb290VW5saW5rRm4gPSByb290TGlua2VyKHRoaXMsIGVsLCB0aGlzLl9zY29wZSk7XG5cdCAgICB2YXIgY29udGVudFVubGlua0ZuID0gY29udGVudExpbmtGbiA/IGNvbnRlbnRMaW5rRm4odGhpcywgZWwpIDogY29tcGlsZShlbCwgb3B0aW9ucykodGhpcywgZWwpO1xuXHRcblx0ICAgIC8vIHJlZ2lzdGVyIGNvbXBvc2l0ZSB1bmxpbmsgZnVuY3Rpb25cblx0ICAgIC8vIHRvIGJlIGNhbGxlZCBkdXJpbmcgaW5zdGFuY2UgZGVzdHJ1Y3Rpb25cblx0ICAgIHRoaXMuX3VubGlua0ZuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByb290VW5saW5rRm4oKTtcblx0ICAgICAgLy8gcGFzc2luZyBkZXN0cm95aW5nOiB0cnVlIHRvIGF2b2lkIHNlYXJjaGluZyBhbmRcblx0ICAgICAgLy8gc3BsaWNpbmcgdGhlIGRpcmVjdGl2ZXNcblx0ICAgICAgY29udGVudFVubGlua0ZuKHRydWUpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBmaW5hbGx5IHJlcGxhY2Ugb3JpZ2luYWxcblx0ICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcblx0ICAgICAgcmVwbGFjZShvcmlnaW5hbCwgZWwpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2NvbXBpbGVkJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSBpbnN0YW5jZSBlbGVtZW50LiBDYWxsZWQgaW4gdGhlIHB1YmxpY1xuXHQgICAqICRtb3VudCgpIG1ldGhvZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICAgIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuXHQgICAgICB0aGlzLl9pc0ZyYWdtZW50ID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kZWwgPSB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gZWwuZmlyc3RDaGlsZDtcblx0ICAgICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBlbC5sYXN0Q2hpbGQ7XG5cdCAgICAgIC8vIHNldCBwZXJzaXN0ZWQgdGV4dCBhbmNob3JzIHRvIGVtcHR5XG5cdCAgICAgIGlmICh0aGlzLl9mcmFnbWVudFN0YXJ0Lm5vZGVUeXBlID09PSAzKSB7XG5cdCAgICAgICAgdGhpcy5fZnJhZ21lbnRTdGFydC5kYXRhID0gdGhpcy5fZnJhZ21lbnRFbmQuZGF0YSA9ICcnO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX2ZyYWdtZW50ID0gZWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRlbCA9IGVsO1xuXHQgICAgfVxuXHQgICAgdGhpcy4kZWwuX192dWVfXyA9IHRoaXM7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlQ29tcGlsZScpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhbmQgYmluZCBhIGRpcmVjdGl2ZSB0byBhbiBlbGVtZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3IgLSBwYXJzZWQgZGlyZWN0aXZlIGRlc2NyaXB0b3Jcblx0ICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgICAtIHRhcmdldCBub2RlXG5cdCAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9iaW5kRGlyID0gZnVuY3Rpb24gKGRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICB0aGlzLl9kaXJlY3RpdmVzLnB1c2gobmV3IERpcmVjdGl2ZShkZXNjcmlwdG9yLCB0aGlzLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRlYXJkb3duIGFuIGluc3RhbmNlLCB1bm9ic2VydmVzIHRoZSBkYXRhLCB1bmJpbmQgYWxsIHRoZVxuXHQgICAqIGRpcmVjdGl2ZXMsIHR1cm4gb2ZmIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzLCBldGMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZSAtIHdoZXRoZXIgdG8gcmVtb3ZlIHRoZSBET00gbm9kZS5cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cCAtIGlmIHRydWUsIGRlZmVyIGNsZWFudXAgdG9cblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGNhbGxlZCBsYXRlclxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG5cdCAgICBpZiAodGhpcy5faXNCZWluZ0Rlc3Ryb3llZCkge1xuXHQgICAgICBpZiAoIWRlZmVyQ2xlYW51cCkge1xuXHQgICAgICAgIHRoaXMuX2NsZWFudXAoKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRlc3Ryb3lSZWFkeTtcblx0ICAgIHZhciBwZW5kaW5nUmVtb3ZhbDtcblx0XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAvLyBDbGVhbnVwIHNob3VsZCBiZSBjYWxsZWQgZWl0aGVyIHN5bmNocm9ub3VzbHkgb3IgYXN5bmNocm9ub3lzbHkgYXNcblx0ICAgIC8vIGNhbGxiYWNrIG9mIHRoaXMuJHJlbW92ZSgpLCBvciBpZiByZW1vdmUgYW5kIGRlZmVyQ2xlYW51cCBhcmUgZmFsc2UuXG5cdCAgICAvLyBJbiBhbnkgY2FzZSBpdCBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGFsbCBvdGhlciByZW1vdmluZywgdW5iaW5kaW5nIGFuZFxuXHQgICAgLy8gdHVybmluZyBvZiBpcyBkb25lXG5cdCAgICB2YXIgY2xlYW51cElmUG9zc2libGUgPSBmdW5jdGlvbiBjbGVhbnVwSWZQb3NzaWJsZSgpIHtcblx0ICAgICAgaWYgKGRlc3Ryb3lSZWFkeSAmJiAhcGVuZGluZ1JlbW92YWwgJiYgIWRlZmVyQ2xlYW51cCkge1xuXHQgICAgICAgIHNlbGYuX2NsZWFudXAoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvLyByZW1vdmUgRE9NIGVsZW1lbnRcblx0ICAgIGlmIChyZW1vdmUgJiYgdGhpcy4kZWwpIHtcblx0ICAgICAgcGVuZGluZ1JlbW92YWwgPSB0cnVlO1xuXHQgICAgICB0aGlzLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHBlbmRpbmdSZW1vdmFsID0gZmFsc2U7XG5cdCAgICAgICAgY2xlYW51cElmUG9zc2libGUoKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZURlc3Ryb3knKTtcblx0ICAgIHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlO1xuXHQgICAgdmFyIGk7XG5cdCAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHBhcmVudC4gb25seSBuZWNlc3Nhcnlcblx0ICAgIC8vIGlmIHBhcmVudCBpcyBub3QgYmVpbmcgZGVzdHJveWVkIGFzIHdlbGwuXG5cdCAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuXHQgICAgaWYgKHBhcmVudCAmJiAhcGFyZW50Ll9pc0JlaW5nRGVzdHJveWVkKSB7XG5cdCAgICAgIHBhcmVudC4kY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcblx0ICAgICAgLy8gdW5yZWdpc3RlciByZWYgKHJlbW92ZTogdHJ1ZSlcblx0ICAgICAgdGhpcy5fdXBkYXRlUmVmKHRydWUpO1xuXHQgICAgfVxuXHQgICAgLy8gZGVzdHJveSBhbGwgY2hpbGRyZW4uXG5cdCAgICBpID0gdGhpcy4kY2hpbGRyZW4ubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB0aGlzLiRjaGlsZHJlbltpXS4kZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgICAgLy8gdGVhcmRvd24gcHJvcHNcblx0ICAgIGlmICh0aGlzLl9wcm9wc1VubGlua0ZuKSB7XG5cdCAgICAgIHRoaXMuX3Byb3BzVW5saW5rRm4oKTtcblx0ICAgIH1cblx0ICAgIC8vIHRlYXJkb3duIGFsbCBkaXJlY3RpdmVzLiB0aGlzIGFsc28gdGVhcnNkb3duIGFsbFxuXHQgICAgLy8gZGlyZWN0aXZlLW93bmVkIHdhdGNoZXJzLlxuXHQgICAgaWYgKHRoaXMuX3VubGlua0ZuKSB7XG5cdCAgICAgIHRoaXMuX3VubGlua0ZuKCk7XG5cdCAgICB9XG5cdCAgICBpID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB0aGlzLl93YXRjaGVyc1tpXS50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSB0byBzZWxmIG9uICRlbFxuXHQgICAgaWYgKHRoaXMuJGVsKSB7XG5cdCAgICAgIHRoaXMuJGVsLl9fdnVlX18gPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIGRlc3Ryb3lSZWFkeSA9IHRydWU7XG5cdCAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENsZWFuIHVwIHRvIGVuc3VyZSBnYXJiYWdlIGNvbGxlY3Rpb24uXG5cdCAgICogVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGxlYXZlIHRyYW5zaXRpb24gaWYgdGhlcmVcblx0ICAgKiBpcyBhbnkuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAodGhpcy5faXNEZXN0cm95ZWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBvd25lciBmcmFnbWVudFxuXHQgICAgLy8gZG8gaXQgaW4gY2xlYW51cCBzbyB0aGF0IHdlIGNhbiBjYWxsICRkZXN0cm95IHdpdGhcblx0ICAgIC8vIGRlZmVyIHJpZ2h0IHdoZW4gYSBmcmFnbWVudCBpcyBhYm91dCB0byBiZSByZW1vdmVkLlxuXHQgICAgaWYgKHRoaXMuX2ZyYWcpIHtcblx0ICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSBmcm9tIGRhdGEgb2Jcblx0ICAgIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLlxuXHQgICAgaWYgKHRoaXMuX2RhdGEgJiYgdGhpcy5fZGF0YS5fX29iX18pIHtcblx0ICAgICAgdGhpcy5fZGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcyk7XG5cdCAgICB9XG5cdCAgICAvLyBDbGVhbiB1cCByZWZlcmVuY2VzIHRvIHByaXZhdGUgcHJvcGVydGllcyBhbmQgb3RoZXJcblx0ICAgIC8vIGluc3RhbmNlcy4gcHJlc2VydmUgcmVmZXJlbmNlIHRvIF9kYXRhIHNvIHRoYXQgcHJveHlcblx0ICAgIC8vIGFjY2Vzc29ycyBzdGlsbCB3b3JrLiBUaGUgb25seSBwb3RlbnRpYWwgc2lkZSBlZmZlY3Rcblx0ICAgIC8vIGhlcmUgaXMgdGhhdCBtdXRhdGluZyB0aGUgaW5zdGFuY2UgYWZ0ZXIgaXQncyBkZXN0cm95ZWRcblx0ICAgIC8vIG1heSBhZmZlY3QgdGhlIHN0YXRlIG9mIG90aGVyIGNvbXBvbmVudHMgdGhhdCBhcmUgc3RpbGxcblx0ICAgIC8vIG9ic2VydmluZyB0aGUgc2FtZSBvYmplY3QsIGJ1dCB0aGF0IHNlZW1zIHRvIGJlIGFcblx0ICAgIC8vIHJlYXNvbmFibGUgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSB1c2VyIHJhdGhlciB0aGFuXG5cdCAgICAvLyBhbHdheXMgdGhyb3dpbmcgYW4gZXJyb3Igb24gdGhlbS5cblx0ICAgIHRoaXMuJGVsID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kcm9vdCA9IHRoaXMuJGNoaWxkcmVuID0gdGhpcy5fd2F0Y2hlcnMgPSB0aGlzLl9jb250ZXh0ID0gdGhpcy5fc2NvcGUgPSB0aGlzLl9kaXJlY3RpdmVzID0gbnVsbDtcblx0ICAgIC8vIGNhbGwgdGhlIGxhc3QgaG9vay4uLlxuXHQgICAgdGhpcy5faXNEZXN0cm95ZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2Rlc3Ryb3llZCcpO1xuXHQgICAgLy8gdHVybiBvZmYgYWxsIGluc3RhbmNlIGxpc3RlbmVycy5cblx0ICAgIHRoaXMuJG9mZigpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1pc2NNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogQXBwbHkgYSBsaXN0IG9mIGZpbHRlciAoZGVzY3JpcHRvcnMpIHRvIGEgdmFsdWUuXG5cdCAgICogVXNpbmcgcGxhaW4gZm9yIGxvb3BzIGhlcmUgYmVjYXVzZSB0aGlzIHdpbGwgYmUgY2FsbGVkIGluXG5cdCAgICogdGhlIGdldHRlciBvZiBhbnkgd2F0Y2hlciB3aXRoIGZpbHRlcnMgc28gaXQgaXMgdmVyeVxuXHQgICAqIHBlcmZvcm1hbmNlIHNlbnNpdGl2ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0geyp9IFtvbGRWYWx1ZV1cblx0ICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJzXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSB3cml0ZVxuXHQgICAqIEByZXR1cm4geyp9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2FwcGx5RmlsdGVycyA9IGZ1bmN0aW9uICh2YWx1ZSwgb2xkVmFsdWUsIGZpbHRlcnMsIHdyaXRlKSB7XG5cdCAgICB2YXIgZmlsdGVyLCBmbiwgYXJncywgYXJnLCBvZmZzZXQsIGksIGwsIGosIGs7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gZmlsdGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgZmlsdGVyID0gZmlsdGVyc1t3cml0ZSA/IGwgLSBpIC0gMSA6IGldO1xuXHQgICAgICBmbiA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlci5uYW1lLCB0cnVlKTtcblx0ICAgICAgaWYgKCFmbikgY29udGludWU7XG5cdCAgICAgIGZuID0gd3JpdGUgPyBmbi53cml0ZSA6IGZuLnJlYWQgfHwgZm47XG5cdCAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIGNvbnRpbnVlO1xuXHQgICAgICBhcmdzID0gd3JpdGUgPyBbdmFsdWUsIG9sZFZhbHVlXSA6IFt2YWx1ZV07XG5cdCAgICAgIG9mZnNldCA9IHdyaXRlID8gMiA6IDE7XG5cdCAgICAgIGlmIChmaWx0ZXIuYXJncykge1xuXHQgICAgICAgIGZvciAoaiA9IDAsIGsgPSBmaWx0ZXIuYXJncy5sZW5ndGg7IGogPCBrOyBqKyspIHtcblx0ICAgICAgICAgIGFyZyA9IGZpbHRlci5hcmdzW2pdO1xuXHQgICAgICAgICAgYXJnc1tqICsgb2Zmc2V0XSA9IGFyZy5keW5hbWljID8gdGhpcy4kZ2V0KGFyZy52YWx1ZSkgOiBhcmcudmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVzb2x2ZSBhIGNvbXBvbmVudCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGNvbXBvbmVudFxuXHQgICAqIGlzIGRlZmluZWQgbm9ybWFsbHkgb3IgdXNpbmcgYW4gYXN5bmMgZmFjdG9yeSBmdW5jdGlvbi5cblx0ICAgKiBSZXNvbHZlcyBzeW5jaHJvbm91c2x5IGlmIGFscmVhZHkgcmVzb2x2ZWQsIG90aGVyd2lzZVxuXHQgICAqIHJlc29sdmVzIGFzeW5jaHJvbm91c2x5IGFuZCBjYWNoZXMgdGhlIHJlc29sdmVkXG5cdCAgICogY29uc3RydWN0b3Igb24gdGhlIGZhY3RvcnkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBjYikge1xuXHQgICAgdmFyIGZhY3Rvcnk7XG5cdCAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGZhY3RvcnkgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZhY3RvcnkgPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2NvbXBvbmVudHMnLCB2YWx1ZSwgdHJ1ZSk7XG5cdCAgICB9XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghZmFjdG9yeSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyBhc3luYyBjb21wb25lbnQgZmFjdG9yeVxuXHQgICAgaWYgKCFmYWN0b3J5Lm9wdGlvbnMpIHtcblx0ICAgICAgaWYgKGZhY3RvcnkucmVzb2x2ZWQpIHtcblx0ICAgICAgICAvLyBjYWNoZWRcblx0ICAgICAgICBjYihmYWN0b3J5LnJlc29sdmVkKTtcblx0ICAgICAgfSBlbHNlIGlmIChmYWN0b3J5LnJlcXVlc3RlZCkge1xuXHQgICAgICAgIC8vIHBvb2wgY2FsbGJhY2tzXG5cdCAgICAgICAgZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2IpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZhY3RvcnkucmVxdWVzdGVkID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgY2JzID0gZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzID0gW2NiXTtcblx0ICAgICAgICBmYWN0b3J5LmNhbGwodGhpcywgZnVuY3Rpb24gcmVzb2x2ZShyZXMpIHtcblx0ICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHJlcykpIHtcblx0ICAgICAgICAgICAgcmVzID0gVnVlLmV4dGVuZChyZXMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gY2FjaGUgcmVzb2x2ZWRcblx0ICAgICAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSByZXM7XG5cdCAgICAgICAgICAvLyBpbnZva2UgY2FsbGJhY2tzXG5cdCAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICAgICAgY2JzW2ldKHJlcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuXHQgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQnICsgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyAnOiAnICsgdmFsdWUgOiAnJykgKyAnLiAnICsgKHJlYXNvbiA/ICdcXG5SZWFzb246ICcgKyByZWFzb24gOiAnJykpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBub3JtYWwgY29tcG9uZW50XG5cdCAgICAgIGNiKGZhY3RvcnkpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBmaWx0ZXJSRSQxID0gL1tefF1cXHxbXnxdLztcblx0XG5cdGZ1bmN0aW9uIGRhdGFBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIEdldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG5cdCAgICogQHJldHVybiB7Kn1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZ2V0ID0gZnVuY3Rpb24gKGV4cCwgYXNTdGF0ZW1lbnQpIHtcblx0ICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwKTtcblx0ICAgIGlmIChyZXMpIHtcblx0ICAgICAgaWYgKGFzU3RhdGVtZW50KSB7XG5cdCAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZW1lbnRIYW5kbGVyKCkge1xuXHQgICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gdG9BcnJheShhcmd1bWVudHMpO1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlcy5nZXQuY2FsbChzZWxmLCBzZWxmKTtcblx0ICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IG51bGw7XG5cdCAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgICAgIH07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHJldHVybiByZXMuZ2V0LmNhbGwodGhpcywgdGhpcyk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG5cdCAgICogVGhlIGV4cHJlc3Npb24gbXVzdCBiZSBhIHZhbGlkIGxlZnQtaGFuZFxuXHQgICAqIGV4cHJlc3Npb24gaW4gYW4gYXNzaWdubWVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICAgKiBAcGFyYW0geyp9IHZhbFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRzZXQgPSBmdW5jdGlvbiAoZXhwLCB2YWwpIHtcblx0ICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwLCB0cnVlKTtcblx0ICAgIGlmIChyZXMgJiYgcmVzLnNldCkge1xuXHQgICAgICByZXMuc2V0LmNhbGwodGhpcywgdGhpcywgdmFsKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBEZWxldGUgYSBwcm9wZXJ0eSBvbiB0aGUgVk1cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgZGVsKHRoaXMuX2RhdGEsIGtleSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogV2F0Y2ggYW4gZXhwcmVzc2lvbiwgdHJpZ2dlciBjYWxsYmFjayB3aGVuIGl0c1xuXHQgICAqIHZhbHVlIGNoYW5nZXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG5cdCAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGltbWVkaWF0ZVxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHVud2F0Y2hGblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiR3YXRjaCA9IGZ1bmN0aW9uIChleHBPckZuLCBjYiwgb3B0aW9ucykge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIHZhciBwYXJzZWQ7XG5cdCAgICBpZiAodHlwZW9mIGV4cE9yRm4gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKGV4cE9yRm4pO1xuXHQgICAgICBleHBPckZuID0gcGFyc2VkLmV4cHJlc3Npb247XG5cdCAgICB9XG5cdCAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwge1xuXHQgICAgICBkZWVwOiBvcHRpb25zICYmIG9wdGlvbnMuZGVlcCxcblx0ICAgICAgc3luYzogb3B0aW9ucyAmJiBvcHRpb25zLnN5bmMsXG5cdCAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcblx0ICAgICAgdXNlcjogIW9wdGlvbnMgfHwgb3B0aW9ucy51c2VyICE9PSBmYWxzZVxuXHQgICAgfSk7XG5cdCAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmltbWVkaWF0ZSkge1xuXHQgICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmdW5jdGlvbiB1bndhdGNoRm4oKSB7XG5cdCAgICAgIHdhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRXZhbHVhdGUgYSB0ZXh0IGRpcmVjdGl2ZSwgaW5jbHVkaW5nIGZpbHRlcnMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZXZhbCA9IGZ1bmN0aW9uICh0ZXh0LCBhc1N0YXRlbWVudCkge1xuXHQgICAgLy8gY2hlY2sgZm9yIGZpbHRlcnMuXG5cdCAgICBpZiAoZmlsdGVyUkUkMS50ZXN0KHRleHQpKSB7XG5cdCAgICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZSh0ZXh0KTtcblx0ICAgICAgLy8gdGhlIGZpbHRlciByZWdleCBjaGVjayBtaWdodCBnaXZlIGZhbHNlIHBvc2l0aXZlXG5cdCAgICAgIC8vIGZvciBwaXBlcyBpbnNpZGUgc3RyaW5ncywgc28gaXQncyBwb3NzaWJsZSB0aGF0XG5cdCAgICAgIC8vIHdlIGRvbid0IGdldCBhbnkgZmlsdGVycyBoZXJlXG5cdCAgICAgIHZhciB2YWwgPSB0aGlzLiRnZXQoZGlyLmV4cHJlc3Npb24sIGFzU3RhdGVtZW50KTtcblx0ICAgICAgcmV0dXJuIGRpci5maWx0ZXJzID8gdGhpcy5fYXBwbHlGaWx0ZXJzKHZhbCwgbnVsbCwgZGlyLmZpbHRlcnMpIDogdmFsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm8gZmlsdGVyXG5cdCAgICAgIHJldHVybiB0aGlzLiRnZXQodGV4dCwgYXNTdGF0ZW1lbnQpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEludGVycG9sYXRlIGEgcGllY2Ugb2YgdGVtcGxhdGUgdGV4dC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdCAgICogQHJldHVybiB7U3RyaW5nfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRpbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG5cdCAgICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KHRleHQpO1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICByZXR1cm4gdm0uJGV2YWwodG9rZW5zWzBdLnZhbHVlKSArICcnO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuXHQgICAgICAgICAgcmV0dXJuIHRva2VuLnRhZyA/IHZtLiRldmFsKHRva2VuLnZhbHVlKSA6IHRva2VuLnZhbHVlO1xuXHQgICAgICAgIH0pLmpvaW4oJycpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gdGV4dDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBMb2cgaW5zdGFuY2UgZGF0YSBhcyBhIHBsYWluIEpTIG9iamVjdFxuXHQgICAqIHNvIHRoYXQgaXQgaXMgZWFzaWVyIHRvIGluc3BlY3QgaW4gY29uc29sZS5cblx0ICAgKiBUaGlzIG1ldGhvZCBhc3N1bWVzIGNvbnNvbGUgaXMgYXZhaWxhYmxlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IFtwYXRoXVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRsb2cgPSBmdW5jdGlvbiAocGF0aCkge1xuXHQgICAgdmFyIGRhdGEgPSBwYXRoID8gZ2V0UGF0aCh0aGlzLl9kYXRhLCBwYXRoKSA6IHRoaXMuX2RhdGE7XG5cdCAgICBpZiAoZGF0YSkge1xuXHQgICAgICBkYXRhID0gY2xlYW4oZGF0YSk7XG5cdCAgICB9XG5cdCAgICAvLyBpbmNsdWRlIGNvbXB1dGVkIGZpZWxkc1xuXHQgICAgaWYgKCFwYXRoKSB7XG5cdCAgICAgIHZhciBrZXk7XG5cdCAgICAgIGZvciAoa2V5IGluIHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQpIHtcblx0ICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh0aGlzLl9wcm9wcykge1xuXHQgICAgICAgIGZvciAoa2V5IGluIHRoaXMuX3Byb3BzKSB7XG5cdCAgICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgY29uc29sZS5sb2coZGF0YSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogXCJjbGVhblwiIGEgZ2V0dGVyL3NldHRlciBjb252ZXJ0ZWQgb2JqZWN0IGludG8gYSBwbGFpblxuXHQgICAqIG9iamVjdCBjb3B5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IC0gb2JqXG5cdCAgICogQHJldHVybiB7T2JqZWN0fVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjbGVhbihvYmopIHtcblx0ICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZG9tQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBDb252ZW5pZW5jZSBvbi1pbnN0YW5jZSBuZXh0VGljay4gVGhlIGNhbGxiYWNrIGlzXG5cdCAgICogYXV0by1ib3VuZCB0byB0aGUgaW5zdGFuY2UsIGFuZCB0aGlzIGF2b2lkcyBjb21wb25lbnRcblx0ICAgKiBtb2R1bGVzIGhhdmluZyB0byByZWx5IG9uIHRoZSBnbG9iYWwgVnVlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kbmV4dFRpY2sgPSBmdW5jdGlvbiAoZm4pIHtcblx0ICAgIG5leHRUaWNrKGZuLCB0aGlzKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBcHBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGFwcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICByZXR1cm4gaW5zZXJ0KHRoaXMsIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBhcHBlbmQsIGFwcGVuZFdpdGhUcmFuc2l0aW9uKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQcmVwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRwcmVwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG5cdCAgICBpZiAodGFyZ2V0Lmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0LmZpcnN0Q2hpbGQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnQgaW5zdGFuY2UgYmVmb3JlIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRiZWZvcmUgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGJlZm9yZVdpdGhDYiwgYmVmb3JlV2l0aFRyYW5zaXRpb24pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydCBpbnN0YW5jZSBhZnRlciB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYWZ0ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG5cdCAgICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIHRoaXMuJGJlZm9yZSh0YXJnZXQubmV4dFNpYmxpbmcsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQucGFyZW50Tm9kZSwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBpbnN0YW5jZSBmcm9tIERPTVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlID0gZnVuY3Rpb24gKGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgaWYgKCF0aGlzLiRlbC5wYXJlbnROb2RlKSB7XG5cdCAgICAgIHJldHVybiBjYiAmJiBjYigpO1xuXHQgICAgfVxuXHQgICAgdmFyIGluRG9jdW1lbnQgPSB0aGlzLl9pc0F0dGFjaGVkICYmIGluRG9jKHRoaXMuJGVsKTtcblx0ICAgIC8vIGlmIHdlIGFyZSBub3QgaW4gZG9jdW1lbnQsIG5vIG5lZWQgdG8gY2hlY2tcblx0ICAgIC8vIGZvciB0cmFuc2l0aW9uc1xuXHQgICAgaWYgKCFpbkRvY3VtZW50KSB3aXRoVHJhbnNpdGlvbiA9IGZhbHNlO1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIHJlYWxDYiA9IGZ1bmN0aW9uIHJlYWxDYigpIHtcblx0ICAgICAgaWYgKGluRG9jdW1lbnQpIHNlbGYuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuXHQgICAgICBpZiAoY2IpIGNiKCk7XG5cdCAgICB9O1xuXHQgICAgaWYgKHRoaXMuX2lzRnJhZ21lbnQpIHtcblx0ICAgICAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMuX2ZyYWdtZW50U3RhcnQsIHRoaXMuX2ZyYWdtZW50RW5kLCB0aGlzLCB0aGlzLl9mcmFnbWVudCwgcmVhbENiKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSA/IHJlbW92ZVdpdGhDYiA6IHJlbW92ZVdpdGhUcmFuc2l0aW9uO1xuXHQgICAgICBvcCh0aGlzLiRlbCwgdGhpcywgcmVhbENiKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNoYXJlZCBET00gaW5zZXJ0aW9uIGZ1bmN0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AxIC0gb3AgZm9yIG5vbi10cmFuc2l0aW9uIGluc2VydFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMiAtIG9wIGZvciB0cmFuc2l0aW9uIGluc2VydFxuXHQgICAqIEByZXR1cm4gdm1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gaW5zZXJ0KHZtLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgb3AxLCBvcDIpIHtcblx0ICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG5cdCAgICB2YXIgdGFyZ2V0SXNEZXRhY2hlZCA9ICFpbkRvYyh0YXJnZXQpO1xuXHQgICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlIHx8IHRhcmdldElzRGV0YWNoZWQgPyBvcDEgOiBvcDI7XG5cdCAgICB2YXIgc2hvdWxkQ2FsbEhvb2sgPSAhdGFyZ2V0SXNEZXRhY2hlZCAmJiAhdm0uX2lzQXR0YWNoZWQgJiYgIWluRG9jKHZtLiRlbCk7XG5cdCAgICBpZiAodm0uX2lzRnJhZ21lbnQpIHtcblx0ICAgICAgbWFwTm9kZVJhbmdlKHZtLl9mcmFnbWVudFN0YXJ0LCB2bS5fZnJhZ21lbnRFbmQsIGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICAgICAgb3Aobm9kZSwgdGFyZ2V0LCB2bSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb3Aodm0uJGVsLCB0YXJnZXQsIHZtLCBjYik7XG5cdCAgICB9XG5cdCAgICBpZiAoc2hvdWxkQ2FsbEhvb2spIHtcblx0ICAgICAgdm0uX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZtO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgZm9yIHNlbGVjdG9yc1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcXVlcnkoZWwpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgOiBlbDtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFwcGVuZCBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhcHBlbmQoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0QmVmb3JlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGJlZm9yZVdpdGhDYihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVtb3ZlV2l0aENiKGVsLCB2bSwgY2IpIHtcblx0ICAgIHJlbW92ZShlbCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBldmVudHNBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgICh0aGlzLl9ldmVudHNbZXZlbnRdIHx8ICh0aGlzLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcblx0ICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIDEpO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXG5cdCAgICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICBmdW5jdGlvbiBvbigpIHtcblx0ICAgICAgc2VsZi4kb2ZmKGV2ZW50LCBvbik7XG5cdCAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBvbi5mbiA9IGZuO1xuXHQgICAgdGhpcy4kb24oZXZlbnQsIG9uKTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXG5cdCAgICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICB2YXIgY2JzO1xuXHQgICAgLy8gYWxsXG5cdCAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKHRoaXMuJHBhcmVudCkge1xuXHQgICAgICAgIGZvciAoZXZlbnQgaW4gdGhpcy5fZXZlbnRzKSB7XG5cdCAgICAgICAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgICAgICAgaWYgKGNicykge1xuXHQgICAgICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIC8vIHNwZWNpZmljIGV2ZW50XG5cdCAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgaWYgKCFjYnMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG5cdCAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBudWxsO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIC8vIHNwZWNpZmljIGhhbmRsZXJcblx0ICAgIHZhciBjYjtcblx0ICAgIHZhciBpID0gY2JzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgY2IgPSBjYnNbaV07XG5cdCAgICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XG5cdCAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLTEpO1xuXHQgICAgICAgIGNicy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyaWdnZXIgYW4gZXZlbnQgb24gc2VsZi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcblx0ICAgKiBAcmV0dXJuIHtCb29sZWFufSBzaG91bGRQcm9wYWdhdGVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcblx0ICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG5cdCAgICB2YXIgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcblx0ICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBpc1NvdXJjZSB8fCAhY2JzO1xuXHQgICAgaWYgKGNicykge1xuXHQgICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcblx0ICAgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGhhY2t5IHNvbHV0aW9uIHRvIHRoZSBxdWVzdGlvbiByYWlzZWRcblx0ICAgICAgLy8gaW4gIzIxMDI6IGZvciBhbiBpbmxpbmUgY29tcG9uZW50IGxpc3RlbmVyIGxpa2UgPGNvbXAgQHRlc3Q9XCJkb1RoaXNcIj4sXG5cdCAgICAgIC8vIHRoZSBwcm9wYWdhdGlvbiBoYW5kbGluZyBpcyBzb21ld2hhdCBicm9rZW4uIFRoZXJlZm9yZSB3ZVxuXHQgICAgICAvLyBuZWVkIHRvIHRyZWF0IHRoZXNlIGlubGluZSBjYWxsYmFja3MgZGlmZmVyZW50bHkuXG5cdCAgICAgIHZhciBoYXNQYXJlbnRDYnMgPSBpc1NvdXJjZSAmJiBjYnMuc29tZShmdW5jdGlvbiAoY2IpIHtcblx0ICAgICAgICByZXR1cm4gY2IuX2Zyb21QYXJlbnQ7XG5cdCAgICAgIH0pO1xuXHQgICAgICBpZiAoaGFzUGFyZW50Q2JzKSB7XG5cdCAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHZhciBjYiA9IGNic1tpXTtcblx0ICAgICAgICB2YXIgcmVzID0gY2IuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICAgICAgaWYgKHJlcyA9PT0gdHJ1ZSAmJiAoIWhhc1BhcmVudENicyB8fCBjYi5fZnJvbVBhcmVudCkpIHtcblx0ICAgICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gc2hvdWxkUHJvcGFnYXRlO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlY3Vyc2l2ZWx5IGJyb2FkY2FzdCBhbiBldmVudCB0byBhbGwgY2hpbGRyZW4gaW5zdGFuY2VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuXHQgICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYnJvYWRjYXN0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xuXHQgICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcblx0ICAgIC8vIGlmIG5vIGNoaWxkIGhhcyByZWdpc3RlcmVkIGZvciB0aGlzIGV2ZW50LFxuXHQgICAgLy8gdGhlbiB0aGVyZSdzIG5vIG5lZWQgdG8gYnJvYWRjYXN0LlxuXHQgICAgaWYgKCF0aGlzLl9ldmVudHNDb3VudFtldmVudF0pIHJldHVybjtcblx0ICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuJGNoaWxkcmVuO1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG5cdCAgICBpZiAoaXNTb3VyY2UpIHtcblx0ICAgICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcblx0ICAgICAgLy8gb24gY2hpbGRyZW5cblx0ICAgICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuXHQgICAgfVxuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG5cdCAgICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBjaGlsZC4kZW1pdC5hcHBseShjaGlsZCwgYXJncyk7XG5cdCAgICAgIGlmIChzaG91bGRQcm9wYWdhdGUpIHtcblx0ICAgICAgICBjaGlsZC4kYnJvYWRjYXN0LmFwcGx5KGNoaWxkLCBhcmdzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVjdXJzaXZlbHkgcHJvcGFnYXRlIGFuIGV2ZW50IHVwIHRoZSBwYXJlbnQgY2hhaW4uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGRpc3BhdGNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gdGhpcy4kZW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgaWYgKCFzaG91bGRQcm9wYWdhdGUpIHJldHVybjtcblx0ICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcblx0ICAgIC8vIHVzZSBvYmplY3QgZXZlbnQgdG8gaW5kaWNhdGUgbm9uLXNvdXJjZSBlbWl0XG5cdCAgICAvLyBvbiBwYXJlbnRzXG5cdCAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG5cdCAgICB3aGlsZSAocGFyZW50KSB7XG5cdCAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHBhcmVudC4kZW1pdC5hcHBseShwYXJlbnQsIGFyZ3MpO1xuXHQgICAgICBwYXJlbnQgPSBzaG91bGRQcm9wYWdhdGUgPyBwYXJlbnQuJHBhcmVudCA6IG51bGw7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBNb2RpZnkgdGhlIGxpc3RlbmVyIGNvdW50cyBvbiBhbGwgcGFyZW50cy5cblx0ICAgKiBUaGlzIGJvb2trZWVwaW5nIGFsbG93cyAkYnJvYWRjYXN0IHRvIHJldHVybiBlYXJseSB3aGVuXG5cdCAgICogbm8gY2hpbGQgaGFzIGxpc3RlbmVkIHRvIGEgY2VydGFpbiBldmVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudFxuXHQgICAqL1xuXHRcblx0ICB2YXIgaG9va1JFID0gL15ob29rOi87XG5cdCAgZnVuY3Rpb24gbW9kaWZ5TGlzdGVuZXJDb3VudCh2bSwgZXZlbnQsIGNvdW50KSB7XG5cdCAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDtcblx0ICAgIC8vIGhvb2tzIGRvIG5vdCBnZXQgYnJvYWRjYXN0ZWQgc28gbm8gbmVlZFxuXHQgICAgLy8gdG8gZG8gYm9va2tlZXBpbmcgZm9yIHRoZW1cblx0ICAgIGlmICghcGFyZW50IHx8ICFjb3VudCB8fCBob29rUkUudGVzdChldmVudCkpIHJldHVybjtcblx0ICAgIHdoaWxlIChwYXJlbnQpIHtcblx0ICAgICAgcGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gPSAocGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gfHwgMCkgKyBjb3VudDtcblx0ICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBsaWZlY3ljbGVBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFNldCBpbnN0YW5jZSB0YXJnZXQgZWxlbWVudCBhbmQga2ljayBvZmYgdGhlIGNvbXBpbGF0aW9uXG5cdCAgICogcHJvY2Vzcy4gVGhlIHBhc3NlZCBpbiBgZWxgIGNhbiBiZSBhIHNlbGVjdG9yIHN0cmluZywgYW5cblx0ICAgKiBleGlzdGluZyBFbGVtZW50LCBvciBhIERvY3VtZW50RnJhZ21lbnQgKGZvciBibG9ja1xuXHQgICAqIGluc3RhbmNlcykuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudHxzdHJpbmd9IGVsXG5cdCAgICogQHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uIChlbCkge1xuXHQgICAgaWYgKHRoaXMuX2lzQ29tcGlsZWQpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCckbW91bnQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nLCB0aGlzKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZWwgPSBxdWVyeShlbCk7XG5cdCAgICBpZiAoIWVsKSB7XG5cdCAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLl9jb21waWxlKGVsKTtcblx0ICAgIHRoaXMuX2luaXRET01Ib29rcygpO1xuXHQgICAgaWYgKGluRG9jKHRoaXMuJGVsKSkge1xuXHQgICAgICB0aGlzLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICAgICAgcmVhZHkuY2FsbCh0aGlzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJG9uY2UoJ2hvb2s6YXR0YWNoZWQnLCByZWFkeSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBNYXJrIGFuIGluc3RhbmNlIGFzIHJlYWR5LlxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWFkeSgpIHtcblx0ICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5faXNSZWFkeSA9IHRydWU7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygncmVhZHknKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRlYXJkb3duIHRoZSBpbnN0YW5jZSwgc2ltcGx5IGRlbGVnYXRlIHRvIHRoZSBpbnRlcm5hbFxuXHQgICAqIF9kZXN0cm95LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG5cdCAgICB0aGlzLl9kZXN0cm95KHJlbW92ZSwgZGVmZXJDbGVhbnVwKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQYXJ0aWFsbHkgY29tcGlsZSBhIHBpZWNlIG9mIERPTSBhbmQgcmV0dXJuIGFcblx0ICAgKiBkZWNvbXBpbGUgZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ11cblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kY29tcGlsZSA9IGZ1bmN0aW9uIChlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIHJldHVybiBjb21waWxlKGVsLCB0aGlzLiRvcHRpb25zLCB0cnVlKSh0aGlzLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGUgZXhwb3NlZCBWdWUgY29uc3RydWN0b3IuXG5cdCAqXG5cdCAqIEFQSSBjb252ZW50aW9uczpcblx0ICogLSBwdWJsaWMgQVBJIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgJGBcblx0ICogLSBpbnRlcm5hbCBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYF9gXG5cdCAqIC0gbm9uLXByZWZpeGVkIHByb3BlcnRpZXMgYXJlIGFzc3VtZWQgdG8gYmUgcHJveGllZCB1c2VyXG5cdCAqICAgZGF0YS5cblx0ICpcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICogQHB1YmxpY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIFZ1ZShvcHRpb25zKSB7XG5cdCAgdGhpcy5faW5pdChvcHRpb25zKTtcblx0fVxuXHRcblx0Ly8gaW5zdGFsbCBpbnRlcm5hbHNcblx0aW5pdE1peGluKFZ1ZSk7XG5cdHN0YXRlTWl4aW4oVnVlKTtcblx0ZXZlbnRzTWl4aW4oVnVlKTtcblx0bGlmZWN5Y2xlTWl4aW4oVnVlKTtcblx0bWlzY01peGluKFZ1ZSk7XG5cdFxuXHQvLyBpbnN0YWxsIGluc3RhbmNlIEFQSXNcblx0ZGF0YUFQSShWdWUpO1xuXHRkb21BUEkoVnVlKTtcblx0ZXZlbnRzQVBJKFZ1ZSk7XG5cdGxpZmVjeWNsZUFQSShWdWUpO1xuXHRcblx0dmFyIHNsb3QgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBTTE9ULFxuXHQgIHBhcmFtczogWyduYW1lJ10sXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyB0aGlzIHdhcyByZXNvbHZlZCBkdXJpbmcgY29tcG9uZW50IHRyYW5zY2x1c2lvblxuXHQgICAgdmFyIG5hbWUgPSB0aGlzLnBhcmFtcy5uYW1lIHx8ICdkZWZhdWx0Jztcblx0ICAgIHZhciBjb250ZW50ID0gdGhpcy52bS5fc2xvdENvbnRlbnRzICYmIHRoaXMudm0uX3Nsb3RDb250ZW50c1tuYW1lXTtcblx0ICAgIGlmICghY29udGVudCB8fCAhY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgICAgdGhpcy5mYWxsYmFjaygpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5jb21waWxlKGNvbnRlbnQuY2xvbmVOb2RlKHRydWUpLCB0aGlzLnZtLl9jb250ZXh0LCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBjb21waWxlOiBmdW5jdGlvbiBjb21waWxlKGNvbnRlbnQsIGNvbnRleHQsIGhvc3QpIHtcblx0ICAgIGlmIChjb250ZW50ICYmIGNvbnRleHQpIHtcblx0ICAgICAgaWYgKHRoaXMuZWwuaGFzQ2hpbGROb2RlcygpICYmIGNvbnRlbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLm5vZGVUeXBlID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgICAgIC8vIGlmIHRoZSBpbnNlcnRlZCBzbG90IGhhcyB2LWlmXG5cdCAgICAgICAgLy8gaW5qZWN0IGZhbGxiYWNrIGNvbnRlbnQgYXMgdGhlIHYtZWxzZVxuXHQgICAgICAgIHZhciBlbHNlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuXHQgICAgICAgIGVsc2VCbG9jay5zZXRBdHRyaWJ1dGUoJ3YtZWxzZScsICcnKTtcblx0ICAgICAgICBlbHNlQmxvY2suaW5uZXJIVE1MID0gdGhpcy5lbC5pbm5lckhUTUw7XG5cdCAgICAgICAgLy8gdGhlIGVsc2UgYmxvY2sgc2hvdWxkIGJlIGNvbXBpbGVkIGluIGNoaWxkIHNjb3BlXG5cdCAgICAgICAgZWxzZUJsb2NrLl9jb250ZXh0ID0gdGhpcy52bTtcblx0ICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVsc2VCbG9jayk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHNjb3BlID0gaG9zdCA/IGhvc3QuX3Njb3BlIDogdGhpcy5fc2NvcGU7XG5cdCAgICAgIHRoaXMudW5saW5rID0gY29udGV4dC4kY29tcGlsZShjb250ZW50LCBob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICB9XG5cdCAgICBpZiAoY29udGVudCkge1xuXHQgICAgICByZXBsYWNlKHRoaXMuZWwsIGNvbnRlbnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVtb3ZlKHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGZhbGxiYWNrOiBmdW5jdGlvbiBmYWxsYmFjaygpIHtcblx0ICAgIHRoaXMuY29tcGlsZShleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKSwgdGhpcy52bSk7XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy51bmxpbmspIHtcblx0ICAgICAgdGhpcy51bmxpbmsoKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcGFydGlhbCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IFBBUlRJQUwsXG5cdFxuXHQgIHBhcmFtczogWyduYW1lJ10sXG5cdFxuXHQgIC8vIHdhdGNoIGNoYW5nZXMgdG8gbmFtZSBmb3IgZHluYW1pYyBwYXJ0aWFsc1xuXHQgIHBhcmFtV2F0Y2hlcnM6IHtcblx0ICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUodmFsdWUpIHtcblx0ICAgICAgdklmLnJlbW92ZS5jYWxsKHRoaXMpO1xuXHQgICAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmluc2VydCh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtcGFydGlhbCcpO1xuXHQgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICB0aGlzLmluc2VydCh0aGlzLnBhcmFtcy5uYW1lKTtcblx0ICB9LFxuXHRcblx0ICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChpZCkge1xuXHQgICAgdmFyIHBhcnRpYWwgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3BhcnRpYWxzJywgaWQsIHRydWUpO1xuXHQgICAgaWYgKHBhcnRpYWwpIHtcblx0ICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCBwYXJ0aWFsKTtcblx0ICAgICAgdklmLmluc2VydC5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMuZnJhZykge1xuXHQgICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBlbGVtZW50RGlyZWN0aXZlcyA9IHtcblx0ICBzbG90OiBzbG90LFxuXHQgIHBhcnRpYWw6IHBhcnRpYWxcblx0fTtcblx0XG5cdHZhciBjb252ZXJ0QXJyYXkgPSB2Rm9yLl9wb3N0UHJvY2Vzcztcblx0XG5cdC8qKlxuXHQgKiBMaW1pdCBmaWx0ZXIgZm9yIGFycmF5c1xuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gblxuXHQgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IChEZWNpbWFsIGV4cGVjdGVkKVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxpbWl0QnkoYXJyLCBuLCBvZmZzZXQpIHtcblx0ICBvZmZzZXQgPSBvZmZzZXQgPyBwYXJzZUludChvZmZzZXQsIDEwKSA6IDA7XG5cdCAgbiA9IHRvTnVtYmVyKG4pO1xuXHQgIHJldHVybiB0eXBlb2YgbiA9PT0gJ251bWJlcicgPyBhcnIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBuKSA6IGFycjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbZGVsaW1pdGVyXVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gLi4uZGF0YUtleXNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmaWx0ZXJCeShhcnIsIHNlYXJjaCwgZGVsaW1pdGVyKSB7XG5cdCAgYXJyID0gY29udmVydEFycmF5KGFycik7XG5cdCAgaWYgKHNlYXJjaCA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gYXJyO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIHNlYXJjaCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGFyci5maWx0ZXIoc2VhcmNoKTtcblx0ICB9XG5cdCAgLy8gY2FzdCB0byBsb3dlcmNhc2Ugc3RyaW5nXG5cdCAgc2VhcmNoID0gKCcnICsgc2VhcmNoKS50b0xvd2VyQ2FzZSgpO1xuXHQgIC8vIGFsbG93IG9wdGlvbmFsIGBpbmAgZGVsaW1pdGVyXG5cdCAgLy8gYmVjYXVzZSB3aHkgbm90XG5cdCAgdmFyIG4gPSBkZWxpbWl0ZXIgPT09ICdpbicgPyAzIDogMjtcblx0ICAvLyBleHRyYWN0IGFuZCBmbGF0dGVuIGtleXNcblx0ICB2YXIga2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIHRvQXJyYXkoYXJndW1lbnRzLCBuKSk7XG5cdCAgdmFyIHJlcyA9IFtdO1xuXHQgIHZhciBpdGVtLCBrZXksIHZhbCwgajtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGl0ZW0gPSBhcnJbaV07XG5cdCAgICB2YWwgPSBpdGVtICYmIGl0ZW0uJHZhbHVlIHx8IGl0ZW07XG5cdCAgICBqID0ga2V5cy5sZW5ndGg7XG5cdCAgICBpZiAoaikge1xuXHQgICAgICB3aGlsZSAoai0tKSB7XG5cdCAgICAgICAga2V5ID0ga2V5c1tqXTtcblx0ICAgICAgICBpZiAoa2V5ID09PSAnJGtleScgJiYgY29udGFpbnMoaXRlbS4ka2V5LCBzZWFyY2gpIHx8IGNvbnRhaW5zKGdldFBhdGgodmFsLCBrZXkpLCBzZWFyY2gpKSB7XG5cdCAgICAgICAgICByZXMucHVzaChpdGVtKTtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChjb250YWlucyhpdGVtLCBzZWFyY2gpKSB7XG5cdCAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfEFycmF5PFN0cmluZz58RnVuY3Rpb259IC4uLnNvcnRLZXlzXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbb3JkZXJdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb3JkZXJCeShhcnIpIHtcblx0ICB2YXIgY29tcGFyYXRvciA9IG51bGw7XG5cdCAgdmFyIHNvcnRLZXlzID0gdW5kZWZpbmVkO1xuXHQgIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuXHRcblx0ICAvLyBkZXRlcm1pbmUgb3JkZXIgKGxhc3QgYXJndW1lbnQpXG5cdCAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgdmFyIG9yZGVyID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuXHQgIGlmICh0eXBlb2Ygb3JkZXIgPT09ICdudW1iZXInKSB7XG5cdCAgICBvcmRlciA9IG9yZGVyIDwgMCA/IC0xIDogMTtcblx0ICAgIGFyZ3MgPSBhcmdzLmxlbmd0aCA+IDEgPyBhcmdzLnNsaWNlKDAsIC0xKSA6IGFyZ3M7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG9yZGVyID0gMTtcblx0ICB9XG5cdFxuXHQgIC8vIGRldGVybWluZSBzb3J0S2V5cyAmIGNvbXBhcmF0b3Jcblx0ICB2YXIgZmlyc3RBcmcgPSBhcmdzWzBdO1xuXHQgIGlmICghZmlyc3RBcmcpIHtcblx0ICAgIHJldHVybiBhcnI7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgZmlyc3RBcmcgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIC8vIGN1c3RvbSBjb21wYXJhdG9yXG5cdCAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIpIHtcblx0ICAgICAgcmV0dXJuIGZpcnN0QXJnKGEsIGIpICogb3JkZXI7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBzdHJpbmcga2V5cy4gZmxhdHRlbiBmaXJzdFxuXHQgICAgc29ydEtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcmdzKTtcblx0ICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYiwgaSkge1xuXHQgICAgICBpID0gaSB8fCAwO1xuXHQgICAgICByZXR1cm4gaSA+PSBzb3J0S2V5cy5sZW5ndGggLSAxID8gYmFzZUNvbXBhcmUoYSwgYiwgaSkgOiBiYXNlQ29tcGFyZShhLCBiLCBpKSB8fCBjb21wYXJhdG9yKGEsIGIsIGkgKyAxKTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBiYXNlQ29tcGFyZShhLCBiLCBzb3J0S2V5SW5kZXgpIHtcblx0ICAgIHZhciBzb3J0S2V5ID0gc29ydEtleXNbc29ydEtleUluZGV4XTtcblx0ICAgIGlmIChzb3J0S2V5KSB7XG5cdCAgICAgIGlmIChzb3J0S2V5ICE9PSAnJGtleScpIHtcblx0ICAgICAgICBpZiAoaXNPYmplY3QoYSkgJiYgJyR2YWx1ZScgaW4gYSkgYSA9IGEuJHZhbHVlO1xuXHQgICAgICAgIGlmIChpc09iamVjdChiKSAmJiAnJHZhbHVlJyBpbiBiKSBiID0gYi4kdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgYSA9IGlzT2JqZWN0KGEpID8gZ2V0UGF0aChhLCBzb3J0S2V5KSA6IGE7XG5cdCAgICAgIGIgPSBpc09iamVjdChiKSA/IGdldFBhdGgoYiwgc29ydEtleSkgOiBiO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGEgPT09IGIgPyAwIDogYSA+IGIgPyBvcmRlciA6IC1vcmRlcjtcblx0ICB9XG5cdFxuXHQgIC8vIHNvcnQgb24gYSBjb3B5IHRvIGF2b2lkIG11dGF0aW5nIG9yaWdpbmFsIGFycmF5XG5cdCAgcmV0dXJuIGFyci5zbGljZSgpLnNvcnQoY29tcGFyYXRvcik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdHJpbmcgY29udGFpbiBoZWxwZXJcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbnRhaW5zKHZhbCwgc2VhcmNoKSB7XG5cdCAgdmFyIGk7XG5cdCAgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBpZiAoY29udGFpbnModmFsW2tleXNbaV1dLCBzZWFyY2gpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsKSkge1xuXHQgICAgaSA9IHZhbC5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGlmIChjb250YWlucyh2YWxbaV0sIHNlYXJjaCkpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAodmFsICE9IG51bGwpIHtcblx0ICAgIHJldHVybiB2YWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoKSA+IC0xO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGRpZ2l0c1JFID0gLyhcXGR7M30pKD89XFxkKS9nO1xuXHRcblx0Ly8gYXNzZXQgY29sbGVjdGlvbnMgbXVzdCBiZSBhIHBsYWluIG9iamVjdC5cblx0dmFyIGZpbHRlcnMgPSB7XG5cdFxuXHQgIG9yZGVyQnk6IG9yZGVyQnksXG5cdCAgZmlsdGVyQnk6IGZpbHRlckJ5LFxuXHQgIGxpbWl0Qnk6IGxpbWl0QnksXG5cdFxuXHQgIC8qKlxuXHQgICAqIFN0cmluZ2lmeSB2YWx1ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRlbnRcblx0ICAgKi9cblx0XG5cdCAganNvbjoge1xuXHQgICAgcmVhZDogZnVuY3Rpb24gcmVhZCh2YWx1ZSwgaW5kZW50KSB7XG5cdCAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgbnVsbCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBpbmRlbnQgOiAyKTtcblx0ICAgIH0sXG5cdCAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUodmFsdWUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnYWJjJyA9PiAnQWJjJ1xuXHQgICAqL1xuXHRcblx0ICBjYXBpdGFsaXplOiBmdW5jdGlvbiBjYXBpdGFsaXplKHZhbHVlKSB7XG5cdCAgICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG5cdCAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG5cdCAgICByZXR1cm4gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnYWJjJyA9PiAnQUJDJ1xuXHQgICAqL1xuXHRcblx0ICB1cHBlcmNhc2U6IGZ1bmN0aW9uIHVwcGVyY2FzZSh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpIDogJyc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ0FiQycgPT4gJ2FiYydcblx0ICAgKi9cblx0XG5cdCAgbG93ZXJjYXNlOiBmdW5jdGlvbiBsb3dlcmNhc2UodmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSA6ICcnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIDEyMzQ1ID0+ICQxMiwzNDUuMDBcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBzaWduXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGRlY2ltYWxzIERlY2ltYWwgcGxhY2VzXG5cdCAgICovXG5cdFxuXHQgIGN1cnJlbmN5OiBmdW5jdGlvbiBjdXJyZW5jeSh2YWx1ZSwgX2N1cnJlbmN5LCBkZWNpbWFscykge1xuXHQgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcblx0ICAgIGlmICghaXNGaW5pdGUodmFsdWUpIHx8ICF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuXHQgICAgX2N1cnJlbmN5ID0gX2N1cnJlbmN5ICE9IG51bGwgPyBfY3VycmVuY3kgOiAnJCc7XG5cdCAgICBkZWNpbWFscyA9IGRlY2ltYWxzICE9IG51bGwgPyBkZWNpbWFscyA6IDI7XG5cdCAgICB2YXIgc3RyaW5naWZpZWQgPSBNYXRoLmFicyh2YWx1ZSkudG9GaXhlZChkZWNpbWFscyk7XG5cdCAgICB2YXIgX2ludCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoMCwgLTEgLSBkZWNpbWFscykgOiBzdHJpbmdpZmllZDtcblx0ICAgIHZhciBpID0gX2ludC5sZW5ndGggJSAzO1xuXHQgICAgdmFyIGhlYWQgPSBpID4gMCA/IF9pbnQuc2xpY2UoMCwgaSkgKyAoX2ludC5sZW5ndGggPiAzID8gJywnIDogJycpIDogJyc7XG5cdCAgICB2YXIgX2Zsb2F0ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgtMSAtIGRlY2ltYWxzKSA6ICcnO1xuXHQgICAgdmFyIHNpZ24gPSB2YWx1ZSA8IDAgPyAnLScgOiAnJztcblx0ICAgIHJldHVybiBzaWduICsgX2N1cnJlbmN5ICsgaGVhZCArIF9pbnQuc2xpY2UoaSkucmVwbGFjZShkaWdpdHNSRSwgJyQxLCcpICsgX2Zsb2F0O1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdpdGVtJyA9PiAnaXRlbXMnXG5cdCAgICpcblx0ICAgKiBAcGFyYW1zXG5cdCAgICogIGFuIGFycmF5IG9mIHN0cmluZ3MgY29ycmVzcG9uZGluZyB0b1xuXHQgICAqICB0aGUgc2luZ2xlLCBkb3VibGUsIHRyaXBsZSAuLi4gZm9ybXMgb2YgdGhlIHdvcmQgdG9cblx0ICAgKiAgYmUgcGx1cmFsaXplZC4gV2hlbiB0aGUgbnVtYmVyIHRvIGJlIHBsdXJhbGl6ZWRcblx0ICAgKiAgZXhjZWVkcyB0aGUgbGVuZ3RoIG9mIHRoZSBhcmdzLCBpdCB3aWxsIHVzZSB0aGUgbGFzdFxuXHQgICAqICBlbnRyeSBpbiB0aGUgYXJyYXkuXG5cdCAgICpcblx0ICAgKiAgZS5nLiBbJ3NpbmdsZScsICdkb3VibGUnLCAndHJpcGxlJywgJ211bHRpcGxlJ11cblx0ICAgKi9cblx0XG5cdCAgcGx1cmFsaXplOiBmdW5jdGlvbiBwbHVyYWxpemUodmFsdWUpIHtcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgICAgdmFyIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuXHQgICAgaWYgKGxlbmd0aCA+IDEpIHtcblx0ICAgICAgdmFyIGluZGV4ID0gdmFsdWUgJSAxMCAtIDE7XG5cdCAgICAgIHJldHVybiBpbmRleCBpbiBhcmdzID8gYXJnc1tpbmRleF0gOiBhcmdzW2xlbmd0aCAtIDFdO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIGFyZ3NbMF0gKyAodmFsdWUgPT09IDEgPyAnJyA6ICdzJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGVib3VuY2UgYSBoYW5kbGVyIGZ1bmN0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheSA9IDMwMFxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0ICBkZWJvdW5jZTogZnVuY3Rpb24gZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpIHtcblx0ICAgIGlmICghaGFuZGxlcikgcmV0dXJuO1xuXHQgICAgaWYgKCFkZWxheSkge1xuXHQgICAgICBkZWxheSA9IDMwMDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGluc3RhbGxHbG9iYWxBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFZ1ZSBhbmQgZXZlcnkgY29uc3RydWN0b3IgdGhhdCBleHRlbmRzIFZ1ZSBoYXMgYW5cblx0ICAgKiBhc3NvY2lhdGVkIG9wdGlvbnMgb2JqZWN0LCB3aGljaCBjYW4gYmUgYWNjZXNzZWQgZHVyaW5nXG5cdCAgICogY29tcGlsYXRpb24gc3RlcHMgYXMgYHRoaXMuY29uc3RydWN0b3Iub3B0aW9uc2AuXG5cdCAgICpcblx0ICAgKiBUaGVzZSBjYW4gYmUgc2VlbiBhcyB0aGUgZGVmYXVsdCBvcHRpb25zIG9mIGV2ZXJ5XG5cdCAgICogVnVlIGluc3RhbmNlLlxuXHQgICAqL1xuXHRcblx0ICBWdWUub3B0aW9ucyA9IHtcblx0ICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG5cdCAgICBlbGVtZW50RGlyZWN0aXZlczogZWxlbWVudERpcmVjdGl2ZXMsXG5cdCAgICBmaWx0ZXJzOiBmaWx0ZXJzLFxuXHQgICAgdHJhbnNpdGlvbnM6IHt9LFxuXHQgICAgY29tcG9uZW50czoge30sXG5cdCAgICBwYXJ0aWFsczoge30sXG5cdCAgICByZXBsYWNlOiB0cnVlXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRXhwb3NlIHVzZWZ1bCBpbnRlcm5hbHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnV0aWwgPSB1dGlsO1xuXHQgIFZ1ZS5jb25maWcgPSBjb25maWc7XG5cdCAgVnVlLnNldCA9IHNldDtcblx0ICBWdWVbJ2RlbGV0ZSddID0gZGVsO1xuXHQgIFZ1ZS5uZXh0VGljayA9IG5leHRUaWNrO1xuXHRcblx0ICAvKipcblx0ICAgKiBUaGUgZm9sbG93aW5nIGFyZSBleHBvc2VkIGZvciBhZHZhbmNlZCB1c2FnZSAvIHBsdWdpbnNcblx0ICAgKi9cblx0XG5cdCAgVnVlLmNvbXBpbGVyID0gY29tcGlsZXI7XG5cdCAgVnVlLkZyYWdtZW50RmFjdG9yeSA9IEZyYWdtZW50RmFjdG9yeTtcblx0ICBWdWUuaW50ZXJuYWxEaXJlY3RpdmVzID0gaW50ZXJuYWxEaXJlY3RpdmVzO1xuXHQgIFZ1ZS5wYXJzZXJzID0ge1xuXHQgICAgcGF0aDogcGF0aCxcblx0ICAgIHRleHQ6IHRleHQsXG5cdCAgICB0ZW1wbGF0ZTogdGVtcGxhdGUsXG5cdCAgICBkaXJlY3RpdmU6IGRpcmVjdGl2ZSxcblx0ICAgIGV4cHJlc3Npb246IGV4cHJlc3Npb25cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBFYWNoIGluc3RhbmNlIGNvbnN0cnVjdG9yLCBpbmNsdWRpbmcgVnVlLCBoYXMgYSB1bmlxdWVcblx0ICAgKiBjaWQuIFRoaXMgZW5hYmxlcyB1cyB0byBjcmVhdGUgd3JhcHBlZCBcImNoaWxkXG5cdCAgICogY29uc3RydWN0b3JzXCIgZm9yIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgYW5kIGNhY2hlIHRoZW0uXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5jaWQgPSAwO1xuXHQgIHZhciBjaWQgPSAxO1xuXHRcblx0ICAvKipcblx0ICAgKiBDbGFzcyBpbmhlcml0YW5jZVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGV4dGVuZE9wdGlvbnNcblx0ICAgKi9cblx0XG5cdCAgVnVlLmV4dGVuZCA9IGZ1bmN0aW9uIChleHRlbmRPcHRpb25zKSB7XG5cdCAgICBleHRlbmRPcHRpb25zID0gZXh0ZW5kT3B0aW9ucyB8fCB7fTtcblx0ICAgIHZhciBTdXBlciA9IHRoaXM7XG5cdCAgICB2YXIgaXNGaXJzdEV4dGVuZCA9IFN1cGVyLmNpZCA9PT0gMDtcblx0ICAgIGlmIChpc0ZpcnN0RXh0ZW5kICYmIGV4dGVuZE9wdGlvbnMuX0N0b3IpIHtcblx0ICAgICAgcmV0dXJuIGV4dGVuZE9wdGlvbnMuX0N0b3I7XG5cdCAgICB9XG5cdCAgICB2YXIgbmFtZSA9IGV4dGVuZE9wdGlvbnMubmFtZSB8fCBTdXBlci5vcHRpb25zLm5hbWU7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBpZiAoIS9eW2EtekEtWl1bXFx3LV0qJC8udGVzdChuYW1lKSkge1xuXHQgICAgICAgIHdhcm4oJ0ludmFsaWQgY29tcG9uZW50IG5hbWU6IFwiJyArIG5hbWUgKyAnXCIuIENvbXBvbmVudCBuYW1lcyAnICsgJ2NhbiBvbmx5IGNvbnRhaW4gYWxwaGFudW1lcmljIGNoYXJhY2F0ZXJzIGFuZCB0aGUgaHlwaGVuLicpO1xuXHQgICAgICAgIG5hbWUgPSBudWxsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgU3ViID0gY3JlYXRlQ2xhc3MobmFtZSB8fCAnVnVlQ29tcG9uZW50Jyk7XG5cdCAgICBTdWIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXBlci5wcm90b3R5cGUpO1xuXHQgICAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1Yjtcblx0ICAgIFN1Yi5jaWQgPSBjaWQrKztcblx0ICAgIFN1Yi5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFN1cGVyLm9wdGlvbnMsIGV4dGVuZE9wdGlvbnMpO1xuXHQgICAgU3ViWydzdXBlciddID0gU3VwZXI7XG5cdCAgICAvLyBhbGxvdyBmdXJ0aGVyIGV4dGVuc2lvblxuXHQgICAgU3ViLmV4dGVuZCA9IFN1cGVyLmV4dGVuZDtcblx0ICAgIC8vIGNyZWF0ZSBhc3NldCByZWdpc3RlcnMsIHNvIGV4dGVuZGVkIGNsYXNzZXNcblx0ICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cblx0ICAgIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgICAgIFN1Ylt0eXBlXSA9IFN1cGVyW3R5cGVdO1xuXHQgICAgfSk7XG5cdCAgICAvLyBlbmFibGUgcmVjdXJzaXZlIHNlbGYtbG9va3VwXG5cdCAgICBpZiAobmFtZSkge1xuXHQgICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuXHQgICAgfVxuXHQgICAgLy8gY2FjaGUgY29uc3RydWN0b3Jcblx0ICAgIGlmIChpc0ZpcnN0RXh0ZW5kKSB7XG5cdCAgICAgIGV4dGVuZE9wdGlvbnMuX0N0b3IgPSBTdWI7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gU3ViO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3ViLWNsYXNzIGNvbnN0cnVjdG9yIHdpdGggdGhlXG5cdCAgICogZ2l2ZW4gbmFtZS4gVGhpcyBnaXZlcyB1cyBtdWNoIG5pY2VyIG91dHB1dCB3aGVuXG5cdCAgICogbG9nZ2luZyBpbnN0YW5jZXMgaW4gdGhlIGNvbnNvbGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhuYW1lKSB7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbigncmV0dXJuIGZ1bmN0aW9uICcgKyBjbGFzc2lmeShuYW1lKSArICcgKG9wdGlvbnMpIHsgdGhpcy5faW5pdChvcHRpb25zKSB9JykoKTtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFBsdWdpbiBzeXN0ZW1cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBwbHVnaW5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKHBsdWdpbi5pbnN0YWxsZWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzXG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcblx0ICAgIGlmICh0eXBlb2YgcGx1Z2luLmluc3RhbGwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcGx1Z2luLmluc3RhbGwuYXBwbHkocGx1Z2luLCBhcmdzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHBsdWdpbi5hcHBseShudWxsLCBhcmdzKTtcblx0ICAgIH1cblx0ICAgIHBsdWdpbi5pbnN0YWxsZWQgPSB0cnVlO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQXBwbHkgYSBnbG9iYWwgbWl4aW4gYnkgbWVyZ2luZyBpdCBpbnRvIHRoZSBkZWZhdWx0XG5cdCAgICogb3B0aW9ucy5cblx0ICAgKi9cblx0XG5cdCAgVnVlLm1peGluID0gZnVuY3Rpb24gKG1peGluKSB7XG5cdCAgICBWdWUub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhWdWUub3B0aW9ucywgbWl4aW4pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhc3NldCByZWdpc3RyYXRpb24gbWV0aG9kcyB3aXRoIHRoZSBmb2xsb3dpbmdcblx0ICAgKiBzaWduYXR1cmU6XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICAgKiBAcGFyYW0geyp9IGRlZmluaXRpb25cblx0ICAgKi9cblx0XG5cdCAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICAgIFZ1ZVt0eXBlXSA9IGZ1bmN0aW9uIChpZCwgZGVmaW5pdGlvbikge1xuXHQgICAgICBpZiAoIWRlZmluaXRpb24pIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIChjb21tb25UYWdSRS50ZXN0KGlkKSB8fCByZXNlcnZlZFRhZ1JFLnRlc3QoaWQpKSkge1xuXHQgICAgICAgICAgICB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBpZCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG5cdCAgICAgICAgICBpZiAoIWRlZmluaXRpb24ubmFtZSkge1xuXHQgICAgICAgICAgICBkZWZpbml0aW9uLm5hbWUgPSBpZDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGRlZmluaXRpb24gPSBWdWUuZXh0ZW5kKGRlZmluaXRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdID0gZGVmaW5pdGlvbjtcblx0ICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9KTtcblx0XG5cdCAgLy8gZXhwb3NlIGludGVybmFsIHRyYW5zaXRpb24gQVBJXG5cdCAgZXh0ZW5kKFZ1ZS50cmFuc2l0aW9uLCB0cmFuc2l0aW9uKTtcblx0fVxuXHRcblx0aW5zdGFsbEdsb2JhbEFQSShWdWUpO1xuXHRcblx0VnVlLnZlcnNpb24gPSAnMS4wLjI2Jztcblx0XG5cdC8vIGRldnRvb2xzIGdsb2JhbCBob29rXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgIGlmIChjb25maWcuZGV2dG9vbHMpIHtcblx0ICAgIGlmIChkZXZ0b29scykge1xuXHQgICAgICBkZXZ0b29scy5lbWl0KCdpbml0JywgVnVlKTtcblx0ICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBpbkJyb3dzZXIgJiYgL0Nocm9tZVxcL1xcZCsvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG5cdCAgICAgIGNvbnNvbGUubG9nKCdEb3dubG9hZCB0aGUgVnVlIERldnRvb2xzIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBleHBlcmllbmNlOlxcbicgKyAnaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1kZXZ0b29scycpO1xuXHQgICAgfVxuXHQgIH1cblx0fSwgMCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFZ1ZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oMTkpKSlcblxuLyoqKi8gfSxcbi8qIDQ0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvY29tcG9uZW50cy91aS9pY29uJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vYXBpLXRhYmxlJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vYXBpLXRhYmxlLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgcHJvcHM6IHtcblx0ICAgIGl0ZW1zOiB7XG5cdCAgICAgIHR5cGU6IEFycmF5XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICcuL3NpZGUtbmF2Jztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vc2lkZS1uYXYuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdHZhciBjbGFzc05hbWUgPSAnaHlfdS1oaWRlJztcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIG1ldGhvZHM6IHtcblx0ICAgIHNob3dOYXY6IGZ1bmN0aW9uIHNob3dOYXYoKSB7XG5cdCAgICAgIHRoaXMuJGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xhc3NOYW1lKTtcblx0ICAgIH0sXG5cdCAgICBoaWRlTmF2OiBmdW5jdGlvbiBoaWRlTmF2KCkge1xuXHQgICAgICB2YXIgY2xhc3NlcyA9IHRoaXMuJGVsLmNsYXNzTmFtZS5zcGxpdCgnICcpO1xuXHQgICAgICBjbGFzc2VzLnB1c2goY2xhc3NOYW1lKTtcblx0ICAgICAgdGhpcy4kZWwuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCcgJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICd0b2dnbGU6OnNpdGVOYXYnOiBmdW5jdGlvbiB0b2dnbGVTaXRlTmF2KCkge1xuXHQgICAgICBpZiAodGhpcy4kZWwuY2xhc3NMaXN0LmNvbnRhaW5zKGNsYXNzTmFtZSkpIHtcblx0ICAgICAgICB0aGlzLnNob3dOYXYoKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmhpZGVOYXYoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDQ2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi9zaXRlLWhlYWRlcic7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL3NpdGUtaGVhZGVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgbWV0aG9kczoge1xuXHQgICAgdG9nZ2xlTmF2OiBmdW5jdGlvbiB0b2dnbGVOYXYoKSB7XG5cdCAgICAgIHRoaXMuJHJvb3QuJGJyb2FkY2FzdCgndG9nZ2xlOjpzaXRlTmF2Jyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgQXBpVGFibGU6IF9pbmRleDIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGRpc21pc3NDYWxsQmFjazogZnVuY3Rpb24gZGlzbWlzc0NhbGxCYWNrKCkge1xuXHQgICAgICAgIGNvbnNvbGUubG9nKCdhbGVydCEhIScpO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgYXBpSXRlbXM6IFt7XG5cdCAgICAgICAgbmFtZTogJ3R5cGUnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSB0eXBlIG9mIGFsZXJ0IChlcnJvciwgaW5mbywgc3VjY2VzcyknXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnZGlzbWlzc2libGUnLFxuXHQgICAgICAgIHR5cGU6ICdCb29sZWFuJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiB0cnVlLFxuXHQgICAgICAgIGRlc2M6ICdJcyB0aGUgYWxlcnQgZGlzbWlzc2libGU/J1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ3RpbWVvdXQnLFxuXHQgICAgICAgIHR5cGU6ICdOdW1iZXInLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6IC0xLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgZHVyYXRpb24gYWxlcnQgc3RheXMgb24gc2NyZWVuIGluIG1zJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ29uQ2xvc2VkJyxcblx0ICAgICAgICB0eXBlOiAnRnVuY3Rpb24nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdDYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBhbGVydCBpcyBjbG9zZWQuJ1xuXHQgICAgICB9XVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cdC8vIDx0ZW1wbGF0ZT5cblx0Ly8gICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuXHQvLyAgICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG5cdC8vICAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5BbGVydDwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJlcnJvclwiPlRoaXMgaXMgYW4gZXJyb3IgYWxlcnQuPC9hbGVydD5cblx0Ly8gICAgICAgICAgICA8YWxlcnQgdHlwZT1cImluZm9cIj5UaGlzIGlzIGFuIGluZm8gYWxlcnQuPC9hbGVydD5cblx0Ly8gICAgICAgICAgICA8YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIj5UaGlzIGlzIGEgc3VjY2VzcyBhbGVydC48L2FsZXJ0PlxuXHQvLyAgICAgICAgICAgIDxhbGVydCB0eXBlPVwic3VjY2Vzc1wiIDpkaXNtaXNzaWJsZT1cImZhbHNlXCI+VGhpcyBpcyBub3QgYSBkaXNtaXNzaWJsZSBhbGVydC48L2FsZXJ0PlxuXHQvLyAgICAgICAgICAgIDxhbGVydCB0eXBlPVwic3VjY2Vzc1wiIDpvbi1jbG9zZWQ9XCJkaXNtaXNzQ2FsbEJhY2tcIj5UaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suPC9hbGVydD5cblx0Ly8gICAgICAgICAgICA8YWxlcnQgdHlwZT1cImluZm9cIiA6dGltZW91dD1cIjUwMDBcIj5UaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy48L2FsZXJ0PlxuXHQvLyAgICAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuXHQvLyAgICAgICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cblx0Ly8gJmx0O2FsZXJ0IHR5cGU9XCJlcnJvclwiJmd0O1RoaXMgaXMgYW4gZXJyb3IgYWxlcnQuJmx0Oy9hbGVydCZndDtcblx0Ly8gJmx0O2FsZXJ0IHR5cGU9XCJpbmZvXCImZ3Q7VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICZsdDthbGVydCB0eXBlPVwic3VjY2Vzc1wiJmd0O1RoaXMgaXMgYSBzdWNjZXNzIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICZsdDthbGVydCB0eXBlPVwic3VjY2Vzc1wiIDpkaXNtaXNzaWJsZT1cImZhbHNlXCImZ3Q7VGhpcyBpcyBub3QgYSBkaXNtaXNzaWJsZSBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuXHQvLyAmbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6b24tY2xvc2VkPVwiZGlzbWlzc0NhbGxCYWNrXCImZ3Q7VGhpcyBpcyBhbiBhbGVydCB3aXRoIGNhbGxiYWNrLiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICZsdDthbGVydCB0eXBlPVwic3VjY2Vzc1wiIDp0aW1lb3V0PVwiNTAwMFwiJmd0O1RoaXMgYWxlcnQgc2hvdWxkIHRpbWVvdXQgaW4gNSBzZWNvbmRzLiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvL1xuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA0OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBBcGlUYWJsZTogX2luZGV4Mi5kZWZhdWx0XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgYXBpSXRlbXM6IFt7XG5cdCAgICAgICAgbmFtZTogJ2xhYmVsJyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgbGFibGUgb2YgdGhlIHBhbmVsJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2lzT3BlbicsXG5cdCAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuXHQgICAgICAgIGRlc2M6ICdJcyB0aGUgcGFuZWwgb3Blbi4nXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPkNvbGxhcHNhYmxlIFBhbmVsPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAxXCIgOmlzLW9wZW49XCJ0cnVlXCI+XG5cdC8vICAgICAgICAgICAgIFBhbmVsIDEgY29udGVudFxuXHQvLyAgICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vXG5cdC8vICAgICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMlwiPlxuXHQvLyAgICAgICAgICAgICBQYW5lbCAyIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuXHQvLyAgICAgICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cblx0Ly8gJmx0O2NvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMVwiIDppcy1vcGVuPVwidHJ1ZVwiJmd0O1xuXHQvLyAgUGFuZWwgMSBjb250ZW50XG5cdC8vICZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XG5cdC8vICZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIlBhbmVsIDJcIiZndDtcblx0Ly8gIFBhbmVsIDIgY29udGVudFxuXHQvLyAmbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuXHQvLyAgICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly9cblx0Ly8gICAgPC9kaXY+XG5cdC8vICAgPC9zZWN0aW9uPlxuXHQvLyA8L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXG4vKioqLyB9LFxuLyogNDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDx0ZW1wbGF0ZT5cblx0Ly8gICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuXHQvLyAgICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG5cdC8vICAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5HZXR0aW5nIFN0YXJ0ZWQ8L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5IGh5X3Utc3BhY2UtbWItMVwiPkluc3RhbGxhdGlvbjwvaDM+XG5cdC8vICAgICAgPGg0IGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXkgaHlfdS1zcGFjZS1tYi0xXCI+TlBNPC9oND5cblx0Ly8gICAgICA8cHJlPlxuXHQvLyAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1iYXNoXCI+XG5cdC8vIG5wbSBpbnN0YWxsIGh5YnJpZC10aG9yaXVtXG5cdC8vICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgPC9wcmU+XG5cdC8vICAgICAgPGg0IGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXkgaHlfdS1zcGFjZS1tYi0xXCI+VXNhZ2U8L2g0PlxuXHQvLyAgICAgIDxwIGNsYXNzPVwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcIj5cblx0Ly8gICAgICAgIFVzZSBhcyBhIHBsdWdpbiAocmVnaXN0ZXJzIGFsbCBjb21wb25lbnRzIGdsb2JhbGx5KTpcblx0Ly8gICAgICA8L3A+XG5cdC8vICAgICAgPHByZT5cblx0Ly8gICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtamF2YXNjcmlwdFwiPlxuXHQvLyBpbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7XG5cdC8vIGltcG9ydCBIeWJyaWRUaG9yaXVtIGZyb20gJ2h5YnJpZC10aG9yaXVtJztcblx0Ly9cblx0Ly8gVnVlLnVzZShIeWJyaWRUaG9yaXVtKTtcblx0Ly9cblx0Ly8gbmV3IFZ1ZSh7XG5cdC8vICAgZWw6ICcjYXBwJ1xuXHQvLyB9KTtcblx0Ly8gICAgICAgIDwvY29kZT5cblx0Ly8gICAgICA8L3ByZT5cblx0Ly8gICAgICA8cCBjbGFzcz1cImh5X2MtY29weSBoeV9jLWNvcHktLWJvZHkgaHlfdC1ncmV5XCI+XG5cdC8vICAgICAgICBVc2UgaW5kaXZpZHVhbCBjb21wb25lbnRzOlxuXHQvLyAgICAgIDwvcD5cblx0Ly8gICAgICA8cHJlPlxuXHQvLyAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1qYXZhc2NyaXB0XCI+XG5cdC8vIGltcG9ydCBWdWUgZnJvbSAndnVlJztcblx0Ly8gaW1wb3J0IHsgQWxlcnQsIFN0ZXBUcmFja2VyIH0gZnJvbSAnaHlicmlkLXRob3JpdW0nO1xuXHQvL1xuXHQvLyBuZXcgVnVlKHtcblx0Ly8gICBlbDogJyNhcHAnLFxuXHQvLyAgIGNvbXBvbmVudHM6IHtcblx0Ly8gICAgIEFsZXJ0LFxuXHQvLyAgICAgU3RlcFRyYWNrZXJcblx0Ly8gICB9XG5cdC8vIH0pO1xuXHQvLyAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgIDwvcHJlPlxuXHQvL1xuXHQvLyAgICAgPGg0IGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXkgaHlfdS1zcGFjZS1tYi0xXCI+Q0ROIChzY3JpcHQgdGFnKTwvaDQ+XG5cdC8vICAgICA8cCBjbGFzcz1cImh5X2MtY29weSBoeV9jLWNvcHktLWJvZHkgaHlfdC1ncmV5XCI+XG5cdC8vICAgICAgIFRoZSBoeWJyaWQtdGhvcml1bS5qcyBmaWxlIGluIHRoZSBDRE4gY29udGFpbnMgYWxsIHRoZSBjb21wb25lbnRzIGV4cG9zZWQgb24gYSBnbG9iYWwgd2luZG93Lkh5YnJpZFRob3JpdW0gb2JqZWN0LlxuXHQvLyAgICAgPC9wPlxuXHQvLyAgICAgPHAgY2xhc3M9XCJoeV9jLWNvcHkgaHlfYy1jb3B5LS1ib2R5IGh5X3QtZ3JleVwiPlxuXHQvLyAgICAgICBGaXJzdCwgaW5jbHVkZSB0aGUgSlMgYW5kIENTUyBmaWxlcyBpbiB5b3VyIHBhZ2U6XG5cdC8vICAgICA8L3A+XG5cdC8vICAgICA8cHJlPlxuXHQvLyAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cblx0Ly8gJmx0O2h0bWwmZ3Q7XG5cdC8vICZsdDtoZWFkJmd0O1xuXHQvLyAgICZsdDtsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwiaHR0cHM6Ly9jZG4udGVsdXMuZGlnaXRhbC91aS9oeWRyYS8wLjYuNC9iYXNlLmNzc1wiIGNoYXJzZXQ9XCJ1dGYtOFwiJmd0O1xuXHQvLyAgICZsdDtsaW5rIHJlbD1cInN0eWxlc2hlZXRcIiBocmVmPVwicGF0aC90by9jZG4vaHlicmlkLXRob3JpdW0uY3NzXCImZ3Q7XG5cdC8vICZsdDsvaGVhZCZndDtcblx0Ly8gJmx0O2JvZHkmZ3Q7XG5cdC8vICAgJmx0OyEtLSBFeGFtcGxlIHVzYWdlIG9mIGFsZXJ0IC0tJmd0O1xuXHQvLyAgICZsdDthbGVydCB0eXBlPVwiZXJyb3JcIiZndDtUaGlzIGlzIGFuIGVycm9yIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICAgJmx0O3NjcmlwdCBzcmM9XCJwYXRoL3RvL3Z1ZS5qc1wiJmd0OyZsdDsvc2NyaXB0Jmd0O1xuXHQvLyAgICZsdDtzY3JpcHQgc3JjPVwicGF0aC90by9jZG4vaHlicmlkLXRob3JpdW0uanNcIiZndDsmbHQ7L3NjcmlwdCZndDtcblx0Ly8gICAmbHQ7c2NyaXB0IHNyYz1cInBhdGgvdG8vYXBwLmpzXCImZ3Q7Jmx0Oy9zY3JpcHQmZ3Q7XG5cdC8vICZsdDsvYm9keSZndDtcblx0Ly8gJmx0Oy9odG1sJmd0O1xuXHQvLyAgICAgICA8L2NvZGU+XG5cdC8vICAgICA8L3ByZT5cblx0Ly8gICAgIDxwIGNsYXNzPVwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcIj5cblx0Ly8gICAgICAgVGhlbiwgcmVnaXN0ZXIgdGhlIGNvbXBvbmVudHMgZ2xvYmFsbHkgZm9yIHVzZSBpbiB5b3VyIHRlbXBsYXRlczpcblx0Ly8gICAgIDwvcD5cblx0Ly8gICAgIDxwcmU+XG5cdC8vICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtamF2YXNjcmlwdFwiPlxuXHQvLyAvL2FwcC5qc1xuXHQvL1xuXHQvLyBWdWUudXNlKEh5YnJpZFRob3JpdW0pO1xuXHQvL1xuXHQvLyBuZXcgVnVlKHtcblx0Ly8gIGVsOiAnI2FwcCdcblx0Ly8gfSk7XG5cdC8vICAgICAgIDwvY29kZT5cblx0Ly8gICAgIDwvcHJlPlxuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4uL3Njc3MvbWFpbi5zY3NzJztcblx0Ly8gICAgIEBpbXBvcnQgJy4uL3Njc3MvcHJpc20uc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHt9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8vIDx0ZW1wbGF0ZT5cblx0Ly8gICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuXHQvLyAgICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG5cdC8vICAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5UYWI8L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuXHQvLyAgICAgICAgICAgIDxoeS1oZWFkZXI+PC9oeS1oZWFkZXI+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly9cblx0Ly9cblx0Ly8gICAgPC9kaXY+XG5cdC8vICAgPC9zZWN0aW9uPlxuXHQvLyA8L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHRcInVzZSBzdHJpY3RcIjtcblxuLyoqKi8gfSxcbi8qIDUxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIEFwaVRhYmxlOiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBhcGlJdGVtczogW3tcblx0ICAgICAgICBuYW1lOiAnbGVnYWxLZXknLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ3RoZSBrZXkgb2YgbGVnYWwgaW4gY21zJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2xlZ2FsTGFuZycsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAndGhlIGxhbmd1YWdlIG9mIGxlZ2FsIGluIGNtcydcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdsZWdhbFJlZ2lvbicsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAndGhlIHJlZ2lvbiBvZiBsZWdhbCBpbiBjbXMnXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPkxlZ2FsIFN5c3RlbTwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgPHAgY2xhc3M9XCJoeV9jLWNvcHkgaHlfYy1jb3B5LS1ib2R5IGh5X3QtZ3JleVwiPlxuXHQvLyAgICAgICAgICAgICAgTG9yZW0gaXBzdW08bGVnYWwtY291bnRlclxuXHQvLyAgICAgICAgICAgICAgICBsZWdhbC1rZXk9XCJocy1yZWZlcnJhbC10ZXJtc1wiXG5cdC8vICAgICAgICAgICAgICAgIGxlZ2FsLWxhbmc9XCJlblwiIGxlZ2FsLXJlZ2lvbj1cImJjXCJcblx0Ly8gICAgICAgICAgICAgICAgPjwvbGVnYWwtY291bnRlcj4gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdCxcblx0Ly8gICAgICAgICAgICAgIHNlZCBkbyBlaXVzbW9kIHRlbXBvciBpbmNpZGlkdW50IHV0IGxhYm9yZSBldCBkb2xvcmUgbWFnbmEgYWxpcXVhLlxuXHQvLyAgICAgICAgICAgICAgPGxlZ2FsLWNvdW50ZXJcblx0Ly8gICAgICAgICAgICAgICAgbGVnYWwta2V5PVwiMS15ZWFyLW9mZmVyLXN0aW1cIlxuXHQvLyAgICAgICAgICAgICAgICBsZWdhbC1sYW5nPVwiZW5cIiBsZWdhbC1yZWdpb249XCJiY1wiXG5cdC8vICAgICAgICAgICAgICAgID48L2xlZ2FsLWNvdW50ZXI+XG5cdC8vICAgICAgICAgICAgICA8L3A+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgIDxsZWdhbC1jb250YWluZXI+PC9sZWdhbC1jb250YWluZXI+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAmbHQ7bGVnYWwtY291bnRlclxuXHQvLyAgIGxlZ2FsLWtleT1cImhzLXJlZmVycmFsLXRlcm1zXCJcblx0Ly8gICBsZWdhbC1sYW5nPVwiZW5cIlxuXHQvLyAgIGxlZ2FsLXJlZ2lvbj1cImJjXCJcblx0Ly8gJmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xuXHQvLyAmbHQ7bGVnYWwtY29udGFpbmVyJmd0OyZsdDsvbGVnYWwtY29udGFpbmVyJmd0O1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJqYXZhc2NyaXB0XCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtamF2YXNjcmlwdFwiPlxuXHQvLyBsZXQgdm0gPSBuZXcgVnVlKHtcblx0Ly8gIGVsOiAnYm9keScsXG5cdC8vICBkYXRhKCkge1xuXHQvLyAgICByZXR1cm4ge1xuXHQvLyAgICAgIGxpZ2VyRW5kUG9pbnQ6ICdodHRwczovL2FwaS5jbXMudGVsdXMuY29tL2xlZ2FscycsXG5cdC8vICAgICAgbGlnZXJBcHBsaWNhdGlvbktleTogJ2I5NzM4ZDY3Yjg5ZGZjNzgyNzQ2ZDRhOWNmNGExMDkzJ1xuXHQvLyAgICB9O1xuXHQvLyAgfSxcblx0Ly8gIGNvbXBvbmVudHM6IHtcblx0Ly8gICAgTGVnYWxDb3VudGVyLFxuXHQvLyAgICBMZWdhbENvbnRhaW5lclxuXHQvLyAgfVxuXHQvLyB9KTtcblx0Ly8gICAgICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJOiBMZWdhbCBDb3VudGVyPC9oMz5cblx0Ly8gICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgIDwvZGl2PlxuXHQvLyAgIDwvc2VjdGlvbj5cblx0Ly9cblx0Ly9cblx0Ly8gPC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblxuLyoqKi8gfSxcbi8qIDUyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIEFwaVRhYmxlOiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBhcGlJdGVtczogW3tcblx0ICAgICAgICBuYW1lOiAnb3ZlcmxheUtleScsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnVGhlIGtleSBvZiB0aGUgb3ZlcmxheS4gVXNlZCBieSB0aGUgb3ZlcmxheSBvcGVuZXIgZGlyZWN0aXZlIHRvIHRhcmdldCB0aGUgb3ZlcmxleS4nXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPk92ZXJsYXkgU3lzdGVtPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8cD5cblx0Ly8gICAgICAgICAgICAgIDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1cIm92ZXJsYXktMVwiIGNsYXNzPVwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLWxpbmsgaHlfdC1wdXJwbGVcIiB0eXBlPVwiYnV0dG9uXCIgcm9sZT1cImJ1dHRvblwiPlxuXHQvLyAgICAgICAgICAgICAgICBPcGVuIG92ZXJsYXkgIzEgPGkgY2xhc3M9XCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXCI+PC9pPlxuXHQvLyAgICAgICAgICAgICAgPC9idXR0b24+XG5cdC8vICAgICAgICAgICAgPC9wPlxuXHQvLyAgICAgICAgICAgIDxwPlxuXHQvLyAgICAgICAgICAgICAgPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPVwib3ZlcmxheS0yXCIgY2xhc3M9XCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVwiIHR5cGU9XCJidXR0b25cIiByb2xlPVwiYnV0dG9uXCI+XG5cdC8vICAgICAgICAgICAgICAgIE9wZW4gb3ZlcmxheSAjMiA8aSBjbGFzcz1cImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cIj48L2k+XG5cdC8vICAgICAgICAgICAgICA8L2J1dHRvbj5cblx0Ly8gICAgICAgICAgICA8L3A+XG5cdC8vICAgICAgICAgICAgPG92ZXJsYXktY29udGFpbmVyPlxuXHQvLyAgICAgICAgICAgICAgICAgICA8b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMVwiPlxuXHQvLyAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcIiBzbG90PVwib3ZlcmxheS1oZWFkZXJcIj5UaGlzIGlzIG92ZXJsYXkgIzE8L2g0PlxuXHQvLyAgICAgICAgICAgICAgICAgICAgIDxhcnRpY2xlIHNsb3Q9XCJvdmVybGF5LWJvZHlcIj5cblx0Ly8gICAgICAgICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMSBib2R5XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPC9hcnRpY2xlPlxuXHQvLyAgICAgICAgICAgICAgICAgICA8L292ZXJsYXk+XG5cdC8vICAgICAgICAgICAgICAgICAgIDxvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0yXCI+XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiPlRoaXMgaXMgb3ZlcmxheSAjMjwvaDQ+XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiPlxuXHQvLyAgICAgICAgICAgICAgICAgICAgICAgICBPdmVybGF5ICMyIGJvZHlcblx0Ly8gICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XG5cdC8vICAgICAgICAgICAgICAgICAgIDwvb3ZlcmxheT5cblx0Ly8gICAgICAgICAgIDwvb3ZlcmxheS1jb250YWluZXI+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAmbHQ7b3ZlcmxheS1jb250YWluZXImZ3Q7XG5cdC8vICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMVwiJmd0O1xuXHQvLyAgICAmbHQ7aDQgIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiJmd0O1xuXHQvLyAgICBUaGlzIGlzIG92ZXJsYXkgIzFcblx0Ly8gICAgJmx0Oy9oNCZndDtcblx0Ly8gICAgJmx0O2FydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiJmd0O1xuXHQvLyAgICAgIE92ZXJsYXkgIzEgYm9keVxuXHQvLyAgICAmbHQ7L2FydGljbGUmZ3Q7XG5cdC8vICAmbHQ7L292ZXJsYXkmZ3Q7XG5cdC8vICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMlwiJmd0O1xuXHQvLyAgICAmbHQ7aDQgIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiJmd0O1xuXHQvLyAgICBUaGlzIGlzIG92ZXJsYXkgIzFcblx0Ly8gICAgJmx0Oy9oNCZndDtcblx0Ly8gICAgJmx0O2FydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiJmd0O1xuXHQvLyAgICAgIE92ZXJsYXkgIzIgYm9keVxuXHQvLyAgICAmbHQ7L2FydGljbGUmZ3Q7XG5cdC8vICAmbHQ7L292ZXJsYXkmZ3Q7XG5cdC8vICZsdDsvb3ZlcmxheS1jb250YWluZXImZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vXG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA1MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBBcGlUYWJsZTogX2luZGV4Mi5kZWZhdWx0XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICBzaG93U3Bpbm5lcjogZnVuY3Rpb24gc2hvd1NwaW5uZXIoKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICB0aGlzLl9yZXNldE1zZygpO1xuXHQgICAgICB0aGlzLiRyb290LiRicm9hZGNhc3QoJ3Nob3c6OnNwaW5uZXInKTtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgX3RoaXMuJHJvb3QuJGJyb2FkY2FzdCgnaGlkZTo6c3Bpbm5lcicpO1xuXHQgICAgICB9LCAzMDAwKTtcblx0ICAgIH0sXG5cdCAgICBfcmVzZXRNc2c6IGZ1bmN0aW9uIF9yZXNldE1zZygpIHtcblx0ICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgY291bnRlciA9IDM7XG5cdCAgICAgIHZhciBpbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoY291bnRlciA+IDApIHtcblx0ICAgICAgICAgIGNvdW50ZXItLTtcblx0ICAgICAgICAgIF90aGlzMi5tc2cgPSAnSSB3aWxsIGNsb3NlIGluICcgKyBjb3VudGVyICsgJyBzZWNvbmRzJztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCAxMDAwKTtcblx0ICAgICAgdGhpcy5tc2cgPSAnSSB3aWxsIGNsb3NlIGluICcgKyBjb3VudGVyICsgJyBzZWNvbmRzJztcblx0ICAgIH1cblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBtc2c6ICcnLFxuXHQgICAgICBpc0Z1bGxTY3JlZW46IGZhbHNlLFxuXHQgICAgICBhcGlJdGVtczogW3tcblx0ICAgICAgICBuYW1lOiAnZnVsbFNjcmVlbicsXG5cdCAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuXHQgICAgICAgIGRlc2M6ICdTaG91bGQgdGhlIHNwaW5uZXIgdGFrZSBmdWxsIHNjcmVlbidcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICd0ZXh0Jyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiAnXFwnXFwnJyxcblx0ICAgICAgICBkZXNjOiAnVGhlIHRleHQgb2YgdGhlIHNwaW5uZXIuIERlZmF1bHQgZW1wdHknXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnc2hvdzo6c3Bpbm5lcicsXG5cdCAgICAgICAgdHlwZTogJ0V2ZW50Jyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnQWN0aXZlIHRoZSBzcGlubmVyJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2hpZGU6OnNwaW5uZXInLFxuXHQgICAgICAgIHR5cGU6ICdFdmVudCcsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ0hpZGUgdGhlIHNwaW5uZXInXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPlNwaW5uZXI8L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuXHQvLyAgICAgICAgICAgIDxsYWJlbCBjbGFzcz1cImh5X2MtY29udHJvbCBoeV9jLWNvbnRyb2wtLWNoZWNrYm94XCIgPlxuXHQvLyAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cImh5X2MtY29udHJvbF9fbGFiZWwtdGV4dFwiPkZ1bGwgU2NyZWVuPC9zcGFuPlxuXHQvLyAgICAgICAgICAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgIHYtbW9kZWw9XCJpc0Z1bGxTY3JlZW5cIiAvPlxuXHQvLyAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiaHlfYy1jb250cm9sX19pbmRpY2F0b3JcIj48L2Rpdj5cblx0Ly8gICAgICAgICAgIDwvbGFiZWw+XG5cdC8vXG5cdC8vICAgICAgICAgICA8YnV0dG9uIEBjbGljaz1cInNob3dTcGlubmVyXCIgY2xhc3M9XCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tcmFpc2VkIGh5X3QtZ3JlZW5cIiB0eXBlPVwiYnV0dG9uXCI+XG5cdC8vICAgICAgICAgICAgIFNob3cgU3Bpbm5lclxuXHQvLyAgICAgICAgICAgPC9idXR0b24+XG5cdC8vXG5cdC8vXG5cdC8vXG5cdC8vICAgICAgICAgICAgPHNwaW5uZXIgOmZ1bGwtc2NyZWVuPVwiaXNGdWxsU2NyZWVuXCIgOnRleHQ9XCJtc2dcIj48L3NwaW5uZXI+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAmbHQ7c3Bpbm5lciB0ZXh0PVwiSSB3aWxsIGNsb3NlIGluIDMgc2Vjb25kc1wiIDpmdWxsLXNjcmVlbj1cInRydWVcIiZndDsmbHQ7L3NwaW5uZXImZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvL1xuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBBcGlUYWJsZTogX2luZGV4Mi5kZWZhdWx0XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBzdGVwVHJhY2tlckN1cnJlbnRTdGVwOiAyLFxuXHQgICAgICBzdGVwVHJhY2tlckNvbmZpZzoge1xuXHQgICAgICAgIGlzQ2xpY2thYmxlOiB0cnVlLFxuXHQgICAgICAgIHN0ZXBzOiBbe1xuXHQgICAgICAgICAgdGl0bGU6ICdTdGVwIEEnLFxuXHQgICAgICAgICAgbGluazogJycsXG5cdCAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogZnVuY3Rpb24gb25DbGlja0hhbmRsZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgX3RoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDA7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgdGl0bGU6ICdTdGVwIEInLFxuXHQgICAgICAgICAgbGluazogJycsXG5cdCAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogZnVuY3Rpb24gb25DbGlja0hhbmRsZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgX3RoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDE7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgdGl0bGU6ICdTdGVwIEMnLFxuXHQgICAgICAgICAgbGluazogJycsXG5cdCAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogZnVuY3Rpb24gb25DbGlja0hhbmRsZXIoZXZlbnQpIHtcblx0ICAgICAgICAgICAgX3RoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfV1cblx0ICAgICAgfSxcblx0ICAgICAgYXBpSXRlbXM6IFt7XG5cdCAgICAgICAgbmFtZTogJ2N1cnJlbnRTdGVwJyxcblx0ICAgICAgICB0eXBlOiAnSW50ZWdlcicsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAwLFxuXHQgICAgICAgIGRlc2M6ICd0b2RvJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2NvbmZpZycsXG5cdCAgICAgICAgdHlwZTogJ09iamVjdCcsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAndG9kbydcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdjb25maWcudGl0bGUnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSB0aXRsZSBvZiB0aGUgc3RlcCdcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdjb25maWcubGluaycsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSBsaW5rIG9mIHRoZSBzdGVwLiAnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnY29uZmlnLm9uQ2xpY2tIYW5kbGVyJyxcblx0ICAgICAgICB0eXBlOiAnRnVuY3Rpb24nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiBzdGVwIGlzIGNsaWNrZWQuJ1xuXHQgICAgICB9XVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cdC8vIDx0ZW1wbGF0ZT5cblx0Ly8gICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuXHQvLyAgICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG5cdC8vICAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5TdGVwIFRyYWNrZXI8L2gyPlxuXHQvLyAgICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuXHQvLyAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuXHQvLyAgICAgICAgICAgIDxzdGVwLXRyYWNrZXIgOmN1cnJlbnQtc3RlcD1cInN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcIiA6Y29uZmlnPVwic3RlcFRyYWNrZXJDb25maWdcIj48L3N0ZXAtdHJhY2tlcj5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAmbHQ7c3RlcC10cmFja2VyXG5cdC8vIDpjdXJyZW50LXN0ZXA9XCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXCJcblx0Ly8gOmNvbmZpZz1cInN0ZXBUcmFja2VyQ29uZmlnXCImZ3Q7XG5cdC8vICZsdDsvc3RlcC10cmFja2VyJmd0O1xuXHQvLyAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiamF2YXNjcmlwdFwiPlxuXHQvLyAgICAgICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWpzXCI+XG5cdC8vIGxldCBzdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcblx0Ly8gbGV0IHN0ZXBUcmFja2VyQ29uZmlnID0ge1xuXHQvLyAgIGlzQ2xpY2thYmxlOiB0cnVlLFxuXHQvLyAgIHN0ZXBzOiBbXG5cdC8vICAgICB7XG5cdC8vICAgICAgIHRpdGxlOiAnU3RlcCBBJyxcblx0Ly8gICAgICAgbGluazogJycsXG5cdC8vICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcblx0Ly8gICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAwO1xuXHQvLyAgICAgICB9XG5cdC8vICAgICB9LCB7XG5cdC8vICAgICAgIHRpdGxlOiAnU3RlcCBCJyxcblx0Ly8gICAgICAgbGluazogJycsXG5cdC8vICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcblx0Ly8gICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAxO1xuXHQvLyAgICAgICB9XG5cdC8vICAgICB9LCB7XG5cdC8vICAgICAgIHRpdGxlOiAnU3RlcCBDJyxcblx0Ly8gICAgICAgbGluazogJycsXG5cdC8vICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcblx0Ly8gICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xuXHQvLyAgICAgICB9XG5cdC8vICAgICB9XG5cdC8vICAgXVxuXHQvLyB9O1xuXHQvLyBsZXQgdm0gPSBuZXcgVnVlKHtcblx0Ly8gICBlbDogJ2JvZHknLFxuXHQvLyAgIGRhdGE6IHtcblx0Ly8gICAgIHN0ZXBUcmFja2VyQ29uZmlnLFxuXHQvLyAgICAgc3RlcFRyYWNrZXJDdXJyZW50U3RlcFxuXHQvLyB9LFxuXHQvLyAgIGNvbXBvbmVudHM6IHtcblx0Ly8gICAgIFN0ZXBUcmFja2VyXG5cdC8vICAgfVxuXHQvLyB9KTtcblx0Ly8gICAgICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cblx0Ly8gICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgIDwvZGl2PlxuXHQvLyAgIDwvc2VjdGlvbj5cblx0Ly8gPC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblxuLyoqKi8gfSxcbi8qIDU1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIEFwaVRhYmxlOiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBhcGlJdGVtczogW3tcblx0ICAgICAgICBuYW1lOiAnbGFiZWwnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSBsYWJsZSBvZiB0aGUgdGFiJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2lzRGlzYWJsZWQnLFxuXHQgICAgICAgIHR5cGU6ICdCb29sZWFuJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiBmYWxzZSxcblx0ICAgICAgICBkZXNjOiAnSXMgdGhlIHRhYiBkaXNhYmxlZCBvciBub3QuIFdoZW4gc2V0IHRvIHRydWUsIHRoZSB0YWIgaXMgbm90IGNsaWNrYWJsZS4nXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPlRhYjwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgPHRhYnMgY2xhc3M9XCJjLXByaWNlLWxvb2t1cCBoeV9vLWxheW91dF9faXRlbSAgaHlfdS1zaXplLTNvZjNAc20gaHlfdS1zaXplLTRvZjRAbWQgaHlfdS1zaXplLTZvZjEyQGxnXCI+XG5cdC8vICAgICAgICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIDFcIj5cblx0Ly8gICAgICAgICAgICAgICA8cD5cblx0Ly8gICAgICAgICAgICAgICAgIFRhYiAxIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICAgICA8L3A+XG5cdC8vICAgICAgICAgICAgICA8L3RhYj5cblx0Ly8gICAgICAgICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgMlwiPlxuXHQvLyAgICAgICAgICAgICAgICA8cD5cblx0Ly8gICAgICAgICAgICAgICAgICBUYWIgMiBjb250ZW50XG5cdC8vICAgICAgICAgICAgICAgIDwvcD5cblx0Ly8gICAgICAgICAgICAgIDwvdGFiPlxuXHQvLyAgICAgICAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiAzXCIgOmlzLWRpc2FibGVkPVwidHJ1ZVwiPlxuXHQvLyAgICAgICAgICAgICAgICA8cD5cblx0Ly8gICAgICAgICAgICAgICAgICBUYWIgMyBjb250ZW50XG5cdC8vICAgICAgICAgICAgICAgIDwvcD5cblx0Ly8gICAgICAgICAgICAgIDwvdGFiPlxuXHQvLyAgICAgICAgICAgIDwvdGFicz5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG5cdC8vICZsdDt0YWJzJmd0O1xuXHQvLyAgJmx0O3RhYiBsYWJlbD1cIlRhYiAxXCImZ3Q7XG5cdC8vICAgICZsdDtwJmd0O1xuXHQvLyAgICAgIFRhYiAxIGNvbnRlbnRcblx0Ly8gICAgJmx0Oy9wJmd0O1xuXHQvLyAgJmx0Oy90YWImZ3Q7XG5cdC8vICAmbHQ7dGFiIGxhYmVsPVwiVGFiIDJcIiZndDtcblx0Ly8gICAgJmx0O3AmZ3Q7XG5cdC8vICAgICAgVGFiIDIgY29udGVudFxuXHQvLyAgICAmbHQ7L3AmZ3Q7XG5cdC8vICAmbHQ7L3RhYiZndDtcblx0Ly8gICZsdDt0YWIgbGFiZWw9XCJUYWIgM1wiIDppcy1kaXNhYmxlZD1cInRydWVcIiZndDtcblx0Ly8gICAgJmx0O3AmZ3Q7XG5cdC8vICAgICAgVGFiIDMgY29udGVudFxuXHQvLyAgICAmbHQ7L3AmZ3Q7XG5cdC8vICAmbHQ7L3RhYiZndDtcblx0Ly8gJmx0Oy90YWJzJmd0O1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuXHQvLyAgICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly9cblx0Ly8gICAgPC9kaXY+XG5cdC8vICAgPC9zZWN0aW9uPlxuXHQvLyA8L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXG4vKioqLyB9LFxuLyogNTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuXHQvLyAgICAgQGltcG9ydCAnLi4vLi4vdHJhbnNpdGlvbnMvZmFkZS5zY3NzJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vYWxlcnQuc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL2FsZXJ0Lmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGlzVmlzaWJsZTogdHJ1ZVxuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICBwcm9wczoge1xuXHQgICAgdHlwZToge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIHJlcXVpcmVkOiB0cnVlXG5cdCAgICB9LFxuXHQgICAgZGlzbWlzc2libGU6IHtcblx0ICAgICAgdHlwZTogQm9vbGVhbixcblx0ICAgICAgZGVmYXVsdDogdHJ1ZVxuXHQgICAgfSxcblx0ICAgIHRpbWVvdXQ6IHtcblx0ICAgICAgdHlwZTogTnVtYmVyLFxuXHQgICAgICBkZWZhdWx0OiAtMVxuXHQgICAgfSxcblx0ICAgIG9uQ2xvc2VkOiB7XG5cdCAgICAgIHR5cGU6IEZ1bmN0aW9uXG5cdCAgICB9XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICBkaXNtaXNzOiBmdW5jdGlvbiBkaXNtaXNzKCkge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCEhX3RoaXMub25DbG9zZWQpIHtcblx0ICAgICAgICAgIF90aGlzLm9uQ2xvc2VkLmFwcGx5KF90aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgcmVhZHk6IGZ1bmN0aW9uIHJlYWR5KCkge1xuXHQgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgaWYgKHRoaXMudGltZW91dCA+PSAwKSB7XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIF90aGlzMi5kaXNtaXNzKCk7XG5cdCAgICAgIH0sIHRoaXMudGltZW91dCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuXHQvLyAgICAgQGltcG9ydCAnLi9jb2xsYXBzYWJsZS1wYW5lbC5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vY29sbGFwc2FibGUtcGFuZWwuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgaXNPcGVuOiB7XG5cdCAgICAgIHR5cGU6IEJvb2xlYW4sXG5cdCAgICAgIGRlZmF1bHQ6IGZhbHNlXG5cdCAgICB9LFxuXHQgICAgbGFiZWw6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nLFxuXHQgICAgICByZXF1aXJlZDogdHJ1ZVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgdG9nZ2xlT3BlbjogZnVuY3Rpb24gdG9nZ2xlT3BlbigkZXZlbnQpIHtcblx0ICAgICAgdGhpcy5pc09wZW4gPSAhdGhpcy5pc09wZW47XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vaHktaGVhZGVyLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9oeS1oZWFkZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHt9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihmZXRjaCkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9taXhpbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdHZhciBfbWl4aW5zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21peGlucyk7XG5cdFxuXHR2YXIgX2ZpbmRJbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUyKTtcblx0XG5cdHZhciBfZmluZEluZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZpbmRJbmRleCk7XG5cdFxuXHR2YXIgX2RlYm91bmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTApO1xuXHRcblx0dmFyIF9kZWJvdW5jZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWJvdW5jZSk7XG5cdFxuXHR2YXIgX3NldEZvY3VzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHR2YXIgX3NldEZvY3VzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NldEZvY3VzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvL1xuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICcuL2xlZ2FsLWNvbnRhaW5lci5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vbGVnYWwtY29udGFpbmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvKlxuXHQgKiBBUEk6IDxsZWdhbC1jb250YWluZXI+PC9sZWdhbC1jb250YWluZXI+XG5cdCovXG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgbWl4aW5zOiBfbWl4aW5zMi5kZWZhdWx0LFxuXHQgIGRpcmVjdGl2ZXM6IHtcblx0ICAgIHNldEZvY3VzOiBfc2V0Rm9jdXMyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBpbmRleGVkTGVnYWxzOiBbXSxcblx0ICAgICAgbm9uSW5kZXhlZExlZ2FsczogW10sXG5cdCAgICAgIGFwaUxhbmc6IG51bGwsXG5cdCAgICAgIGFwaVJlZ2lvbjogbnVsbFxuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICBtZXRob2RzOiB7XG5cdCAgICBmZXRjaExlZ2FsczogZnVuY3Rpb24gZmV0Y2hMZWdhbHMoa2V5cykge1xuXHQgICAgICByZXR1cm4gZmV0Y2goJ1xcbiAgICAgICAgICAnICsgdGhpcy4kcm9vdC5saWdlckVuZFBvaW50ICsgJz9sYW5nPScgKyB0aGlzLmFwaUxhbmcgKyAnJnJlZ2lvbj0nICsgdGhpcy5hcGlSZWdpb24gKyAnJmh0bWw9dHJ1ZVxcbiAgICAgICAgJywge1xuXHQgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuXHQgICAgICAgIGhlYWRlcnM6IHtcblx0ICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG5cdCAgICAgICAgICBhcHBsaWNhdGlvbktleTogdGhpcy4kcm9vdC5saWdlckFwcGxpY2F0aW9uS2V5XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG5cdCAgICAgICAgICBrZXlzOiBrZXlzXG5cdCAgICAgICAgfSlcblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgYXBwZW5kUmVzcG9uc2VUb0xlZ2FsQ29udGFpbmVyOiBmdW5jdGlvbiBhcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIodHlwZSwgZGF0YSkge1xuXHQgICAgICB2YXIgcHJvY2VzcyA9IGZ1bmN0aW9uIHByb2Nlc3ModGFyZ2V0LCBkYXRhQXJ5KSB7XG5cdCAgICAgICAgZGF0YUFyeS5mb3JFYWNoKGZ1bmN0aW9uIChsZWdhbFJlc3BvbnNlKSB7XG5cdCAgICAgICAgICB2YXIgaW5kZXggPSB0YXJnZXQuZmluZEluZGV4KGZ1bmN0aW9uIChsKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBsLmtleSA9PT0gbGVnYWxSZXNwb25zZS5rZXk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG5cdCAgICAgICAgICAgIHRhcmdldC4kc2V0KGluZGV4LCB7XG5cdCAgICAgICAgICAgICAgY29udGVudDogbGVnYWxSZXNwb25zZS5jb250ZW50LFxuXHQgICAgICAgICAgICAgIGtleTogbGVnYWxSZXNwb25zZS5rZXlcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH07XG5cdCAgICAgIGlmICh0eXBlID09PSAnaW5kZXhlZCcpIHtcblx0ICAgICAgICBwcm9jZXNzKHRoaXMuaW5kZXhlZExlZ2FscywgZGF0YSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvY2Vzcyh0aGlzLm5vbkluZGV4ZWRMZWdhbHMsIGRhdGEpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldExlZ2FsczogZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gX2RlYm91bmNlMi5kZWZhdWx0LmNhbGwodGhpcywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciBpbmRleGVkS2V5cyA9IHRoaXMuaW5kZXhlZExlZ2Fscy5tYXAoZnVuY3Rpb24gKGxlZ2FsKSB7XG5cdCAgICAgICAgICByZXR1cm4gbGVnYWwua2V5O1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHZhciBub25JbmRleGVkS2V5cyA9IHRoaXMubm9uSW5kZXhlZExlZ2Fscy5tYXAoZnVuY3Rpb24gKGxlZ2FsKSB7XG5cdCAgICAgICAgICByZXR1cm4gbGVnYWwua2V5O1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBpZiAoaW5kZXhlZEtleXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgdGhpcy5mZXRjaExlZ2FscyhpbmRleGVkS2V5cykudGhlbih0aGlzLnBhcnNlSlNPTikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgICAgICBfdGhpcy5hcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIoJ2luZGV4ZWQnLCBkYXRhKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAobm9uSW5kZXhlZEtleXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgdGhpcy5mZXRjaExlZ2Fscyhub25JbmRleGVkS2V5cykudGhlbih0aGlzLnBhcnNlSlNPTikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgICAgICBfdGhpcy5hcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIoJ25vbkluZGV4ZWQnLCBkYXRhKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSwgMTApO1xuXHQgICAgfSgpXG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdsZWdhbDo6Y2xpY2snOiBmdW5jdGlvbiBsZWdhbENsaWNrKGxlZ2FsS2V5KSB7XG5cdCAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIHRhcmdldExlZ2FsSW5kZXggPSB0aGlzLmluZGV4ZWRMZWdhbHMuZmluZEluZGV4KGZ1bmN0aW9uIChsKSB7XG5cdCAgICAgICAgcmV0dXJuIGwua2V5ID09PSBsZWdhbEtleTtcblx0ICAgICAgfSk7XG5cdCAgICAgIGlmICh0YXJnZXRMZWdhbEluZGV4ID4gLTEpIHtcblx0ICAgICAgICB0aGlzLmluZGV4ZWRMZWdhbHMuZm9yRWFjaChmdW5jdGlvbiAobCwgaSkge1xuXHQgICAgICAgICAgaWYgKGkgIT09IHRhcmdldExlZ2FsSW5kZXgpIHtcblx0ICAgICAgICAgICAgbC5pc1NlbGVjdGVkID0gZmFsc2U7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBfdGhpczIuaW5kZXhlZExlZ2Fscy4kc2V0KGksIE9iamVjdC5hc3NpZ24oe30sIF90aGlzMi5pbmRleGVkTGVnYWxzW2ldLCB7IGlzU2VsZWN0ZWQ6IHRydWUgfSkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgJ2xlZ2FsOjppbml0JzogZnVuY3Rpb24gbGVnYWxJbml0KGxlZ2FsSW5pdERldGFpbCkge1xuXHQgICAgICB0aGlzLmFwaUxhbmcgPSBsZWdhbEluaXREZXRhaWwubGFuZztcblx0ICAgICAgdGhpcy5hcGlSZWdpb24gPSBsZWdhbEluaXREZXRhaWwucmVnaW9uO1xuXHQgICAgICAvLyBjaGVjayBpZiBsb2FkZWQgYWxyZWFkeVxuXHQgICAgICB2YXIgY29udGFpbmVyUmVmID0gbGVnYWxJbml0RGV0YWlsLmlzTm9uSW5kZXhlZCA/IHRoaXMubm9uSW5kZXhlZExlZ2FscyA6IHRoaXMuaW5kZXhlZExlZ2Fscztcblx0ICAgICAgdmFyIGluZGV4ID0gKDAsIF9maW5kSW5kZXgyLmRlZmF1bHQpKGNvbnRhaW5lclJlZiwgZnVuY3Rpb24gKGxlZ2FsKSB7XG5cdCAgICAgICAgcmV0dXJuIGxlZ2FsLmtleSA9PT0gbGVnYWxJbml0RGV0YWlsLmtleTtcblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIGlmIG5vdCBmb3VuZFxuXHQgICAgICBpZiAoaW5kZXggPCAwKSB7XG5cdCAgICAgICAgaW5kZXggPSBjb250YWluZXJSZWYucHVzaChsZWdhbEluaXREZXRhaWwpIC0gMTtcblx0ICAgICAgICB0aGlzLmdldExlZ2FscygpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghbGVnYWxJbml0RGV0YWlsLmlzTm9uSW5kZXhlZCkge1xuXHQgICAgICAgIHRoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OnVkcGF0ZScsIHtcblx0ICAgICAgICAgIGtleTogbGVnYWxJbml0RGV0YWlsLmtleSxcblx0ICAgICAgICAgIGlzTm9uSW5kZXhlZDogbGVnYWxJbml0RGV0YWlsLmlzTm9uSW5kZXhlZCxcblx0ICAgICAgICAgIGluZGV4OiBpbmRleFxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg4NykpKVxuXG4vKioqLyB9LFxuLyogNjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9taXhpbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdHZhciBfbWl4aW5zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21peGlucyk7XG5cdFxuXHR2YXIgX2RlZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdFxuXHR2YXIgX2RlZmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICcuL2xlZ2FsLWNvdW50ZXIuc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL2xlZ2FsLWNvdW50ZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdC8qXG5cdCAqIEFQSTogPGxlZ2FsLWNvdW50ZXJcblx0ICogICAgICAgIGxlZ2FsLWtleT1cIihTdHJpbmcpIGtleVwiXG5cdCAqICAgICAgICBsZWdhbC1sYW5nPVwiKFN0cmluZykgbGFuZ1wiXG5cdCAqICAgICAgICBsZWdhbC1yZWdpb249XCIoU3RyaW5nKSByZWdpb25cIlxuXHQgKiAgICAgICAgaXMtbm9uLWluZGV4ZWQ9XCIoQm9vbGVhbikgaXNOb25JbmRleGVkXCJcblx0ICogICAgICA+PC9sZWdhbC1jb3VudGVyPlxuXHQqL1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIG1peGluczogX21peGluczIuZGVmYXVsdCxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgbGVnYWxDb3VudGVyOiBudWxsXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIHByb3BzOiB7XG5cdCAgICBsZWdhbEtleToge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIHJlcXVpcmVkOiB0cnVlXG5cdCAgICB9LFxuXHQgICAgaXNOb25JbmRleGVkOiB7XG5cdCAgICAgIHR5cGU6IEJvb2xlYW4sXG5cdCAgICAgIGRlZmF1bHQ6IGZhbHNlXG5cdCAgICB9LFxuXHQgICAgbGVnYWxMYW5nOiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZyxcblx0ICAgICAgcmVxdWlyZWQ6IHRydWVcblx0ICAgIH0sXG5cdCAgICBsZWdhbFJlZ2lvbjoge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIHJlcXVpcmVkOiB0cnVlXG5cdCAgICB9XG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdsZWdhbDo6dWRwYXRlJzogZnVuY3Rpb24gbGVnYWxVZHBhdGUodXBkYXRlRGV0YWlsKSB7XG5cdCAgICAgIGlmICghdGhpcy5pc05vbkluZGV4ZWQgJiYgdXBkYXRlRGV0YWlsLmtleSA9PT0gdGhpcy5sZWdhbEtleSkge1xuXHQgICAgICAgIHRoaXMubGVnYWxDb3VudGVyID0gdXBkYXRlRGV0YWlsLmluZGV4ICsgMTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBjbGlja0hhbmRsZXIoKSB7XG5cdCAgICAgIHRoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OmNsaWNrJywgdGhpcy5sZWdhbEtleSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBiZWZvcmVDb21waWxlOiBmdW5jdGlvbiBiZWZvcmVDb21waWxlKCkge30sXG5cdCAgcmVhZHk6IGZ1bmN0aW9uIHJlYWR5KCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAoMCwgX2RlZmVyMi5kZWZhdWx0KShmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF90aGlzLnJvb3RCcm9hZGNhc3QoJ2xlZ2FsOjppbml0Jywge1xuXHQgICAgICAgIGtleTogX3RoaXMubGVnYWxLZXksXG5cdCAgICAgICAgbGFuZzogX3RoaXMubGVnYWxMYW5nLFxuXHQgICAgICAgIHJlZ2lvbjogX3RoaXMubGVnYWxSZWdpb24sXG5cdCAgICAgICAgaXNOb25JbmRleGVkOiBfdGhpcy5pc05vbkluZGV4ZWRcblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA2MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vb3ZlcmxheS1jb250YWluZXIuc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL292ZXJsYXktY29udGFpbmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvKlxuXHQqIEV4OiA8b3ZlcmxheS1jb250YWluZXIgaXMtdmlzaWJsZT1cIihCb29sZWFuKSBmYWxzZVwiPlxuXHQgICAgICA8L292ZXJsYXktY29udGFpbmVyPlxuXHQqL1xuXHR2YXIgRVNDID0gMjc7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgaXNWaXNpYmxlOiB7XG5cdCAgICAgIHR5cGU6IEJvb2xlYW4sXG5cdCAgICAgIGRlZmF1bHQ6IGZhbHNlXG5cdCAgICB9XG5cdCAgfSxcblx0ICB3YXRjaDoge1xuXHQgICAgaXNWaXNpYmxlOiBmdW5jdGlvbiBpc1Zpc2libGUoX2lzVmlzaWJsZSkge1xuXHQgICAgICB2YXIgZWwgPSB3aW5kb3cuZG9jdW1lbnQuYm9keTtcblx0ICAgICAgdmFyIGNsYXNzTmFtZSA9ICduby1zY3JvbGwnO1xuXHQgICAgICBpZiAoX2lzVmlzaWJsZSkge1xuXHQgICAgICAgIGlmICghIWVsLmNsYXNzTGlzdCkge1xuXHQgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxiKScgKyBjbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKFxcXFxifCQpJywgJ2dpJyksICcgJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdvdmVybGF5Q29udGFpbmVyOjpvcGVuJzogZnVuY3Rpb24gb3ZlcmxheUNvbnRhaW5lck9wZW4oKSB7XG5cdCAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcblx0ICAgIH0sXG5cdCAgICAnb3ZlcmxheUNvbnRhaW5lcjo6Y2xvc2UnOiBmdW5jdGlvbiBvdmVybGF5Q29udGFpbmVyQ2xvc2UoKSB7XG5cdCAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSxcblx0ICByZWFkeTogZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2dCkge1xuXHQgICAgICBldnQgPSBldnQgfHwgd2luZG93LmV2ZW50O1xuXHQgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IEVTQykge1xuXHQgICAgICAgIF90aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA2MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vb3ZlcmxheS5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vb3ZlcmxheS5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0Lypcblx0ICogRXg6IDxvdmVybGF5IG92ZXJsYXkta2V5PVwiKFN0cmluZykga2V5XCI+XG5cdCAqICAgICAgICBBbnkgY29udGVudFxuXHQgKiAgICAgIDwvb3ZlcmxheT5cblx0Ki9cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBpc1Zpc2libGU6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIHByb3BzOiB7XG5cdCAgICBvdmVybGF5S2V5OiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZ1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgY2xvc2VPdmVybGF5OiBmdW5jdGlvbiBjbG9zZU92ZXJsYXkoKSB7XG5cdCAgICAgIHRoaXMuJGRpc3BhdGNoKCdvdmVybGF5Q29udGFpbmVyOjpjbG9zZScpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZXZlbnRzOiB7XG5cdCAgICAnb3ZlcmxheTo6b3Blbic6IGZ1bmN0aW9uIG92ZXJsYXlPcGVuKG92ZXJsYXlLZXkpIHtcblx0ICAgICAgaWYgKG92ZXJsYXlLZXkgPT09IHRoaXMub3ZlcmxheUtleSkge1xuXHQgICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA2MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vc3Bpbm5lci5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vc3Bpbm5lci5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIHJlcGxhY2U6IHRydWUsXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGFjdGl2ZTogZmFsc2Vcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgcHJvcHM6IHtcblx0ICAgIHRleHQ6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nLFxuXHQgICAgICBkZWZhdWx0OiAnJ1xuXHQgICAgfSxcblx0ICAgIGZ1bGxTY3JlZW46IHtcblx0ICAgICAgdHlwZTogQm9vbGVhbixcblx0ICAgICAgZGVmYXVsdDogZmFsc2Vcblx0ICAgIH1cblx0ICB9LFxuXHQgIG1ldGhvZHM6IHtcblx0ICAgIHNob3c6IGZ1bmN0aW9uIHNob3coKSB7XG5cdCAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdzaG93bjo6c3Bpbm5lcicpO1xuXHQgICAgfSxcblx0ICAgIGhpZGU6IGZ1bmN0aW9uIGhpZGUoKSB7XG5cdCAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuJHJvb3QuJGJyb2FkY2FzdCgnaGlkZGVuOjpzcGlubmVyJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdzaG93OjpzcGlubmVyJzogZnVuY3Rpb24gc2hvd1NwaW5uZXIoKSB7XG5cdCAgICAgIHRoaXMuc2hvdygpO1xuXHQgICAgfSxcblx0ICAgICdoaWRlOjpzcGlubmVyJzogZnVuY3Rpb24gaGlkZVNwaW5uZXIoKSB7XG5cdCAgICAgIHRoaXMuaGlkZSgpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDY0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvY29tcG9uZW50cy91aS9pY29uJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vc3RlcC10cmFja2VyLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9zdGVwLXRyYWNrZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgY29uZmlnOiB7XG5cdCAgICAgIHR5cGU6IE9iamVjdFxuXHQgICAgfSxcblx0ICAgIGN1cnJlbnRTdGVwOiB7XG5cdCAgICAgIHR5cGU6IE51bWJlcixcblx0ICAgICAgZGVmYXVsdDogMFxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBjbGlja0hhbmRsZXIoJGV2ZW50LCBzdGVwLCBpbmRleCkge1xuXHQgICAgICBpZiAoISFzdGVwLm9uQ2xpY2tIYW5kbGVyKSB7XG5cdCAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgaWYgKHRoaXMuY3VycmVudFN0ZXAgPiBpbmRleCkge1xuXHQgICAgICAgICAgc3RlcC5vbkNsaWNrSGFuZGxlcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDY1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi90YWIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgbGFiZWw6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nXG5cdCAgICB9LFxuXHQgICAgaXNEaXNhYmxlZDoge1xuXHQgICAgICB0eXBlOiBCb29sZWFuLFxuXHQgICAgICBkZWZhdWx0OiBmYWxzZVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHRhYkluZGV4OiAwLFxuXHQgICAgICBpc1Zpc2libGU6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIGNvbXB1dGVkOiB7XG5cdCAgICBpc1Zpc2libGU6IGZ1bmN0aW9uIGlzVmlzaWJsZSgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuJHBhcmVudC5hY3RpdmVUYWJJbmRleCA9PT0gdGhpcy50YWJJbmRleDtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG5cdCAgICB0aGlzLiRwYXJlbnQudGFicy5wdXNoKHtcblx0ICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG5cdCAgICAgIGlzRGlzYWJsZWQ6IHRoaXMuaXNEaXNhYmxlZFxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICByZWFkeTogZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYywgaW5kZXgpIHtcblx0ICAgICAgaWYgKGMuJGVsID09PSBfdGhpcy4kZWwpIHtcblx0ICAgICAgICBfdGhpcy50YWJJbmRleCA9IGluZGV4O1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7XG5cdCAgICB0aGlzLiRwYXJlbnQudGFicy5zcGxpY2UodGhpcy50YWJJbmRleCwgMSk7XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXHRcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi90YWJzLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi90YWJzLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvKlxuXHQgKiAgRXg6IDx0YWJzIGFjdGl2ZS10YWItaW5kZXg9XCIoSW50ZWdlcikgMFwiPlxuXHQgKiAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiBBXCI+XG5cdCAqICAgICAgICAgIEFueSBjb250ZW50XG5cdCAqICAgICAgICA8L3RhYj5cblx0ICogICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgQlwiIGlzLWRpc2FibGVkPVwiKEJvb2xlYW4pIGZhbHNlXCI+XG5cdCAqICAgICAgICAgIEFueSBjb250ZW50XG5cdCAqICAgICAgICA8L3RhYj5cblx0ICogICAgICAgPHRhYnM+XG5cdCovXG5cdGV4cG9ydHMuZGVmYXVsdCA9IF9kZWZpbmVQcm9wZXJ0eSh7XG5cdCAgcHJvcHM6IHtcblx0ICAgIGFjdGl2ZVRhYkluZGV4OiB7XG5cdCAgICAgIHR5cGU6IE51bWJlcixcblx0ICAgICAgZGVmYXVsdDogMFxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgaXNBY3RpdmU6IGZ1bmN0aW9uIGlzQWN0aXZlKGluZGV4KSB7XG5cdCAgICAgIHJldHVybiBhY3RpdmVUYWJJbmRleCA9PT0gaW5kZXg7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdGFiczogW11cblx0ICAgIH07XG5cdCAgfVxuXHR9LCBcIm1ldGhvZHNcIiwge1xuXHQgIGhhbmRsZVRhYkxpc3RDbGljazogZnVuY3Rpb24gaGFuZGxlVGFiTGlzdENsaWNrKGluZGV4LCB0YWIpIHtcblx0ICAgIGlmICghdGFiLmlzRGlzYWJsZWQpIHtcblx0ICAgICAgdGhpcy5hY3RpdmVUYWJJbmRleCA9IGluZGV4O1xuXHQgICAgfVxuXHQgIH1cblx0fSk7XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA2NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2dldFN0YXJ0ZWQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Myk7XG5cdFxuXHR2YXIgX2dldFN0YXJ0ZWQyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZ2V0U3RhcnRlZCk7XG5cdFxuXHR2YXIgX3N0ZXBUcmFja2VyUGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTk5KTtcblx0XG5cdHZhciBfc3RlcFRyYWNrZXJQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0ZXBUcmFja2VyUGFnZSk7XG5cdFxuXHR2YXIgX3RhYnNQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDApO1xuXHRcblx0dmFyIF90YWJzUGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90YWJzUGFnZSk7XG5cdFxuXHR2YXIgX2xlZ2FsUGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTk2KTtcblx0XG5cdHZhciBfbGVnYWxQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlZ2FsUGFnZSk7XG5cdFxuXHR2YXIgX292ZXJsYXlQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTcpO1xuXHRcblx0dmFyIF9vdmVybGF5UGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vdmVybGF5UGFnZSk7XG5cdFxuXHR2YXIgX2xlZ2FsT3ZlcmxheVBhZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5NSk7XG5cdFxuXHR2YXIgX2xlZ2FsT3ZlcmxheVBhZ2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGVnYWxPdmVybGF5UGFnZSk7XG5cdFxuXHR2YXIgX2NvbGxhcHNhYmxlUGFuZWxQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTIpO1xuXHRcblx0dmFyIF9jb2xsYXBzYWJsZVBhbmVsUGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb2xsYXBzYWJsZVBhbmVsUGFnZSk7XG5cdFxuXHR2YXIgX2FsZXJ0UGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkxKTtcblx0XG5cdHZhciBfYWxlcnRQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FsZXJ0UGFnZSk7XG5cdFxuXHR2YXIgX3NwaW5uZXJQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTgpO1xuXHRcblx0dmFyIF9zcGlubmVyUGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zcGlubmVyUGFnZSk7XG5cdFxuXHR2YXIgX2h5SGVhZGVyUGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTk0KTtcblx0XG5cdHZhciBfaHlIZWFkZXJQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2h5SGVhZGVyUGFnZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgICcvZ2V0LXN0YXJ0ZWQnOiB7XG5cdCAgICBjb21wb25lbnQ6IF9nZXRTdGFydGVkMi5kZWZhdWx0XG5cdCAgfSxcblx0ICAnL2FsZXJ0Jzoge1xuXHQgICAgY29tcG9uZW50OiB7XG5cdCAgICAgIHRlbXBsYXRlOiAnPGFsZXJ0LXBhZ2U+PC9hbGVydC1wYWdlPicsXG5cdCAgICAgIGNvbXBvbmVudHM6IHsgQWxlcnRQYWdlOiBfYWxlcnRQYWdlMi5kZWZhdWx0IH1cblx0ICAgIH1cblx0ICB9LFxuXHQgICcvc3Bpbm5lcic6IHtcblx0ICAgIGNvbXBvbmVudDoge1xuXHQgICAgICB0ZW1wbGF0ZTogJzxzcGlubmVyLXBhZ2U+PC9zcGlubmVyLXBhZ2U+Jyxcblx0ICAgICAgY29tcG9uZW50czogeyBTcGlubmVyUGFnZTogX3NwaW5uZXJQYWdlMi5kZWZhdWx0IH1cblx0ICAgIH1cblx0ICB9LFxuXHQgICcvc3RlcC10cmFja2VyJzoge1xuXHQgICAgY29tcG9uZW50OiB7XG5cdCAgICAgIHRlbXBsYXRlOiAnPHN0ZXAtdHJhY2tlci1wYWdlPjwvc3RlcC10cmFja2VyLXBhZ2U+Jyxcblx0ICAgICAgY29tcG9uZW50czogeyBTdGVwVHJhY2tlclBhZ2U6IF9zdGVwVHJhY2tlclBhZ2UyLmRlZmF1bHQgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgJy90YWJzJzoge1xuXHQgICAgY29tcG9uZW50OiB7XG5cdCAgICAgIHRlbXBsYXRlOiAnPHRhYnMtcGFnZT48L3RhYnMtcGFnZT4nLFxuXHQgICAgICBjb21wb25lbnRzOiB7IFRhYnNQYWdlOiBfdGFic1BhZ2UyLmRlZmF1bHQgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgJy9sZWdhbCc6IHtcblx0ICAgIGNvbXBvbmVudDoge1xuXHQgICAgICB0ZW1wbGF0ZTogJzxsZWdhbC1wYWdlPjwvbGVnYWwtcGFnZT4nLFxuXHQgICAgICBjb21wb25lbnRzOiB7IExlZ2FsUGFnZTogX2xlZ2FsUGFnZTIuZGVmYXVsdCB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICAnL292ZXJsYXknOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8b3ZlcmxheS1wYWdlPjwvb3ZlcmxheS1wYWdlPicsXG5cdCAgICAgIGNvbXBvbmVudHM6IHsgT3ZlcmxheVBhZ2U6IF9vdmVybGF5UGFnZTIuZGVmYXVsdCB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICAnL2xlZ2FsLW92ZXJsYXknOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8bGVnYWwtb3ZlcmxheS1wYWdlPjwvbGVnYWwtb3ZlcmxheS1wYWdlPicsXG5cdCAgICAgIGNvbXBvbmVudHM6IHsgTGVnYWxPdmVybGF5UGFnZTogX2xlZ2FsT3ZlcmxheVBhZ2UyLmRlZmF1bHQgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgJy9jb2xsYXBzYWJsZS1wYW5lbCc6IHtcblx0ICAgIGNvbXBvbmVudDoge1xuXHQgICAgICB0ZW1wbGF0ZTogJzxjb2xsYXBzYWJsZS1wYW5lbC1wYWdlPjwvY29sbGFwc2FibGUtcGFuZWwtcGFnZT4nLFxuXHQgICAgICBjb21wb25lbnRzOiB7IENvbGxhcHNhYmxlUGFuZWxQYWdlOiBfY29sbGFwc2FibGVQYW5lbFBhZ2UyLmRlZmF1bHQgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgJy9oeS1oZWFkZXInOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8aHktaGVhZGVyLXBhZ2U+PC9oeS1oZWFkZXItcGFnZT4nLFxuXHQgICAgICBjb21wb25lbnRzOiB7IEh5SGVhZGVyUGFnZTogX2h5SGVhZGVyUGFnZTIuZGVmYXVsdCB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogNjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvKlxuXHQgIEBkZXNjIEFkZCBiZWhhdmlvciB0byBhbnkgZWxlbWVudC4gV2hlbiBjbGlja2VkLCBpdCB3aWxsIG9wZW4gdGhlIGNvcnJlc3BvbmRpbmcgb3ZlcmxheVxuXHQgIEV4YW1wbGU6IDxidXR0b24gb3ZlcmxheS1vcGVuZXI9XCJteS1vdmVybGF5XCI+PC9idXR0b24+XG5cdCovXG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBpc0xpdGVyYWw6IHRydWUsXG5cdCAgZXZlbnRIYW5kbGVyOiBmdW5jdGlvbiBldmVudEhhbmRsZXIoZSkge1xuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgdGhpcy52bS4kcm9vdC4kYnJvYWRjYXN0KCdvdmVybGF5OjpvcGVuJywgdGhpcy5leHByZXNzaW9uKTtcblx0ICAgIHRoaXMudm0uJHJvb3QuJGJyb2FkY2FzdCgnb3ZlcmxheUNvbnRhaW5lcjo6b3BlbicpO1xuXHQgIH0sXG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmV2ZW50SGFuZGxlci5iaW5kKHRoaXMpKTtcblx0ICB9LFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZXZlbnRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDY5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX292ZXJsYXlPcGVuZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY4KTtcblx0XG5cdHZhciBfb3ZlcmxheU9wZW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vdmVybGF5T3BlbmVyKTtcblx0XG5cdHZhciBfc2V0Rm9jdXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwKTtcblx0XG5cdHZhciBfc2V0Rm9jdXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfc2V0Rm9jdXMpO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMjA5KTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0dmFyIF9vdmVybGF5Q29udGFpbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDYpO1xuXHRcblx0dmFyIF9vdmVybGF5Q29udGFpbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX292ZXJsYXlDb250YWluZXIpO1xuXHRcblx0dmFyIF9vdmVybGF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDcpO1xuXHRcblx0dmFyIF9vdmVybGF5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX292ZXJsYXkpO1xuXHRcblx0dmFyIF9sZWdhbENvdW50ZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNSk7XG5cdFxuXHR2YXIgX2xlZ2FsQ291bnRlcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sZWdhbENvdW50ZXIpO1xuXHRcblx0dmFyIF9sZWdhbENvbnRhaW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oMjA0KTtcblx0XG5cdHZhciBfbGVnYWxDb250YWluZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfbGVnYWxDb250YWluZXIpO1xuXHRcblx0dmFyIF90YWJzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMTEpO1xuXHRcblx0dmFyIF90YWJzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RhYnMpO1xuXHRcblx0dmFyIF90YWIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMCk7XG5cdFxuXHR2YXIgX3RhYjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90YWIpO1xuXHRcblx0dmFyIF9pbmRleDMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMik7XG5cdFxuXHR2YXIgX2luZGV4NCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4Myk7XG5cdFxuXHR2YXIgX2luZGV4NSA9IF9fd2VicGFja19yZXF1aXJlX18oMjAxKTtcblx0XG5cdHZhciBfaW5kZXg2ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXg1KTtcblx0XG5cdHZhciBfaW5kZXg3ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDgpO1xuXHRcblx0dmFyIF9pbmRleDggPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleDcpO1xuXHRcblx0dmFyIF9pbmRleDkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMyk7XG5cdFxuXHR2YXIgX2luZGV4MTAgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleDkpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdHZhciBjb21wb25lbnRzID0ge1xuXHQgIFN0ZXBUcmFja2VyOiBfaW5kZXgyLmRlZmF1bHQsXG5cdCAgT3ZlcmxheUNvbnRhaW5lcjogX292ZXJsYXlDb250YWluZXIyLmRlZmF1bHQsXG5cdCAgT3ZlcmxheTogX292ZXJsYXkyLmRlZmF1bHQsXG5cdCAgTGVnYWxDb3VudGVyOiBfbGVnYWxDb3VudGVyMi5kZWZhdWx0LFxuXHQgIExlZ2FsQ29udGFpbmVyOiBfbGVnYWxDb250YWluZXIyLmRlZmF1bHQsXG5cdCAgVGFiczogX3RhYnMyLmRlZmF1bHQsXG5cdCAgVGFiOiBfdGFiMi5kZWZhdWx0LFxuXHQgIENvbGxhcHNhYmxlUGFuZWw6IF9pbmRleDQuZGVmYXVsdCxcblx0ICBBbGVydDogX2luZGV4Ni5kZWZhdWx0LFxuXHQgIFNwaW5uZXI6IF9pbmRleDguZGVmYXVsdCxcblx0ICBIeUhlYWRlcjogX2luZGV4MTAuZGVmYXVsdFxuXHR9O1xuXHR2YXIgZGlyZWN0aXZlcyA9IHtcblx0ICBvdmVybGF5T3BlbmVyOiBfb3ZlcmxheU9wZW5lcjIuZGVmYXVsdCxcblx0ICBzZXRGb2N1czogX3NldEZvY3VzMi5kZWZhdWx0XG5cdH07XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluc3RhbGwoVnVlKSB7XG5cdCAgZm9yICh2YXIgbmFtZSBpbiBjb21wb25lbnRzKSB7XG5cdCAgICBWdWUuY29tcG9uZW50KG5hbWUsIGNvbXBvbmVudHNbbmFtZV0pO1xuXHQgIH1cblx0ICBmb3IgKHZhciBfbmFtZSBpbiBkaXJlY3RpdmVzKSB7XG5cdCAgICBWdWUuZGlyZWN0aXZlKF9uYW1lLCBkaXJlY3RpdmVzW19uYW1lXSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogNzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBtZXRob2RzOiB7XG5cdCAgICByb290QnJvYWRjYXN0OiBmdW5jdGlvbiByb290QnJvYWRjYXN0KCkge1xuXHQgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykge1xuXHQgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuJGJyb2FkY2FzdC5hcHBseSh0aGlzLiRyb290LCBhcmdzKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiA3MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIG1ldGhvZHM6IHtcblx0ICAgIHBhcnNlSlNPTjogZnVuY3Rpb24gcGFyc2VKU09OKHJlc3BvbnNlKSB7XG5cdCAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogNzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uc2dfYy1hcGktdGFibGV7Ym9yZGVyLXNwYWNpbmc6MCAxMHB4O3dpZHRoOjEwMCV9LnNnX2MtYXBpLXRhYmxlIHRyey13ZWJraXQtYm94LWZsZXg6MTstbXMtZmxleDoxO2ZsZXg6MX0uc2dfYy1hcGktdGFibGUgdGgsLnNnX2MtYXBpLXRhYmxlIHRyOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2VlZX0uc2dfYy1hcGktdGFibGUgdGR7dGV4dC1hbGlnbjpjZW50ZXJ9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuc2dfYy1uYXZ7ZGlzcGxheTpibG9jaztwb3NpdGlvbjpmaXhlZDtsZWZ0OjA7d2lkdGg6MjVyZW07aGVpZ2h0OjEwMCU7Ym9yZGVyLXJpZ2h0Oi4xcmVtIHNvbGlkICNlMmUyZTI7cGFkZGluZzoycmVtO3BhZGRpbmctdG9wOjY4cHg7b3ZlcmZsb3cteDpoaWRkZW47b3ZlcmZsb3cteTphdXRvO2JhY2tncm91bmQtY29sb3I6I2ZmZjt6LWluZGV4Ojk5OX0uc2dfYy1uYXZfX3NlY3Rpb257Zm9udC1mYW1pbHk6VGVsdXMgTWVkaXVtLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxLjJyZW07Ym9yZGVyLWJvdHRvbTouMXJlbSBzb2xpZCAjZTJlMmUyO3BhZGRpbmctdG9wOjFyZW07cGFkZGluZy1ib3R0b206LjVyZW07bWFyZ2luOjFyZW0gMH0uc2dfYy1uYXZfX2xpc3QtaXRlbXtwYWRkaW5nOjVweCAwfS5zZ19jLW5hdl9fbGluazpob3Zlcntjb2xvcjojOGM2OGE2fS5zZ19jLW5hdl9fbGluay0tYWN0aXZle2NvbG9yOiM1N2E3MDh9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJoZWFkZXIuc2dfYy1zaXRlLWhlYWRlcntiYWNrZ3JvdW5kLWNvbG9yOiM0YjI4NmQ7aGVpZ2h0OjY4cHg7dGV4dC1hbGlnbjpsZWZ0O3Bvc2l0aW9uOmZpeGVkO3dpZHRoOjEwMCU7ei1pbmRleDo5OTk5fWhlYWRlci5zZ19jLXNpdGUtaGVhZGVyIC5zZ19jLXNpdGUtaGVhZGVyX19jb250YWluZXJ7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJX1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlcl9fY29udGFpbmVyIGltZy5sb2dve2hlaWdodDoxMDAlO3BhZGRpbmc6MjBweDtkaXNwbGF5OmlubGluZS1ibG9jazttYXgtd2lkdGg6MTAwJX1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlcl9fdG9nZ2xlYnRue2NvbG9yOiNmZmY7Zm9udC1zaXplOjJyZW07bWFyZ2luOjA7YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuMSk7cGFkZGluZzoxLjVyZW07ZmxvYXQ6bGVmdDtjdXJzb3I6cG9pbnRlcjtib3JkZXI6MDtoZWlnaHQ6MTAwJTtkaXNwbGF5OmlubGluZS1ibG9ja31cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImJvZHl7YmFja2dyb3VuZC1jb2xvcjojZjVmNmY3fS5zZ19jLXNpdGVfX21haW57cGFkZGluZy10b3A6NjhweDttYXJnaW4tbGVmdDoyNXJlbX1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjU5OXB4KXsuc2dfYy1zaXRlX19tYWlue21hcmdpbi1sZWZ0OjB9fS5zZ19jLWRlbW97bWFyZ2luOjIwcHggMH0uc2dfYy1kZW1vX19jb250YWluZXJ7YmFja2dyb3VuZC1jb2xvcjojZmZmO292ZXJmbG93OmhpZGRlbjtib3JkZXItcmFkaXVzOjVweDtib3JkZXI6MXB4IHNvbGlkICNlZWU7cGFkZGluZzoyNXB4O21hcmdpbjoyMHB4IDB9Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSxwcmVbY2xhc3MqPWxhbmd1YWdlLV17Y29sb3I6IzAwMDtiYWNrZ3JvdW5kOm5vbmU7dGV4dC1zaGFkb3c6MCAxcHggI2ZmZjtmb250LWZhbWlseTpDb25zb2xhcyxNb25hY28sQW5kYWxlIE1vbm8sVWJ1bnR1IE1vbm8sbW9ub3NwYWNlO3RleHQtYWxpZ246bGVmdDt3aGl0ZS1zcGFjZTpwcmU7d29yZC1zcGFjaW5nOm5vcm1hbDt3b3JkLWJyZWFrOm5vcm1hbDt3b3JkLXdyYXA6bm9ybWFsO2xpbmUtaGVpZ2h0OjEuNTstbW96LXRhYi1zaXplOjQ7LW8tdGFiLXNpemU6NDt0YWItc2l6ZTo0Oy13ZWJraXQtaHlwaGVuczpub25lOy1tcy1oeXBoZW5zOm5vbmU7aHlwaGVuczpub25lfWNvZGVbY2xhc3MqPWxhbmd1YWdlLV06Oi1tb3otc2VsZWN0aW9uLGNvZGVbY2xhc3MqPWxhbmd1YWdlLV0gOjotbW96LXNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV06Oi1tb3otc2VsZWN0aW9uLHByZVtjbGFzcyo9bGFuZ3VhZ2UtXSA6Oi1tb3otc2VsZWN0aW9ue3RleHQtc2hhZG93Om5vbmU7YmFja2dyb3VuZDojYjNkNGZjfWNvZGVbY2xhc3MqPWxhbmd1YWdlLV06OnNlbGVjdGlvbixjb2RlW2NsYXNzKj1sYW5ndWFnZS1dIDo6c2VsZWN0aW9uLHByZVtjbGFzcyo9bGFuZ3VhZ2UtXTo6c2VsZWN0aW9uLHByZVtjbGFzcyo9bGFuZ3VhZ2UtXSA6OnNlbGVjdGlvbnt0ZXh0LXNoYWRvdzpub25lO2JhY2tncm91bmQ6I2IzZDRmY31AbWVkaWEgcHJpbnR7Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSxwcmVbY2xhc3MqPWxhbmd1YWdlLV17dGV4dC1zaGFkb3c6bm9uZX19cHJlW2NsYXNzKj1sYW5ndWFnZS1de3BhZGRpbmc6MWVtO21hcmdpbjouNWVtIDA7b3ZlcmZsb3c6YXV0b306bm90KHByZSk+Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSxwcmVbY2xhc3MqPWxhbmd1YWdlLV17YmFja2dyb3VuZDojZjVmMmYwfTpub3QocHJlKT5jb2RlW2NsYXNzKj1sYW5ndWFnZS1de3BhZGRpbmc6LjFlbTtib3JkZXItcmFkaXVzOi4zZW07d2hpdGUtc3BhY2U6bm9ybWFsfS50b2tlbi5jZGF0YSwudG9rZW4uY29tbWVudCwudG9rZW4uZG9jdHlwZSwudG9rZW4ucHJvbG9ne2NvbG9yOiM3MDgwOTB9LnRva2VuLnB1bmN0dWF0aW9ue2NvbG9yOiM5OTl9Lm5hbWVzcGFjZXtvcGFjaXR5Oi43fS50b2tlbi5ib29sZWFuLC50b2tlbi5jb25zdGFudCwudG9rZW4uZGVsZXRlZCwudG9rZW4ubnVtYmVyLC50b2tlbi5wcm9wZXJ0eSwudG9rZW4uc3ltYm9sLC50b2tlbi50YWd7Y29sb3I6IzkwNX0udG9rZW4uYXR0ci1uYW1lLC50b2tlbi5idWlsdGluLC50b2tlbi5jaGFyLC50b2tlbi5pbnNlcnRlZCwudG9rZW4uc2VsZWN0b3IsLnRva2VuLnN0cmluZ3tjb2xvcjojNjkwfS5sYW5ndWFnZS1jc3MgLnRva2VuLnN0cmluZywuc3R5bGUgLnRva2VuLnN0cmluZywudG9rZW4uZW50aXR5LC50b2tlbi5vcGVyYXRvciwudG9rZW4udXJse2NvbG9yOiNhNjdmNTk7YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuNSl9LnRva2VuLmF0cnVsZSwudG9rZW4uYXR0ci12YWx1ZSwudG9rZW4ua2V5d29yZHtjb2xvcjojMDdhfS50b2tlbi5mdW5jdGlvbntjb2xvcjojZGQ0YTY4fS50b2tlbi5pbXBvcnRhbnQsLnRva2VuLnJlZ2V4LC50b2tlbi52YXJpYWJsZXtjb2xvcjojZTkwfS50b2tlbi5ib2xkLC50b2tlbi5pbXBvcnRhbnR7Zm9udC13ZWlnaHQ6NzAwfS50b2tlbi5pdGFsaWN7Zm9udC1zdHlsZTppdGFsaWN9LnRva2VuLmVudGl0eXtjdXJzb3I6aGVscH1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5mYWRlLXRyYW5zaXRpb257LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZX0uZmFkZS1lbnRlciwuZmFkZS1sZWF2ZXtvcGFjaXR5OjB9LmMtYWxlcnR7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzo3cHggMTVweDttYXJnaW4tYm90dG9tOjFyZW07Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOi4yNXJlbX0uYy1hbGVydC0taW5mb3tiYWNrZ3JvdW5kLWNvbG9yOiMzMzM7Ym9yZGVyLWNvbG9yOiMwMDA7Y29sb3I6I2ZmZn0uYy1hbGVydC0taW5mbyBidXR0b257Y29sb3I6I2ZmZn0uYy1hbGVydC0tc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOiNlNmZmY2M7Ym9yZGVyLWNvbG9yOiM5ZjM7Y29sb3I6IzQwODAwMH0uYy1hbGVydC0tZXJyb3J7YmFja2dyb3VuZC1jb2xvcjojZjhkZGUzO2JvcmRlci1jb2xvcjojZjJjMGNhO2NvbG9yOiNjODEyMzV9LmMtYWxlcnRfX2Nsb3NlLWJ1dHRvbntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDoxMHB4Oy13ZWJraXQtYXBwZWFyYW5jZTpub25lO3BhZGRpbmc6MDtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOjAgMDtib3JkZXI6MDtmb250LXNpemU6Mi41cmVtO29wYWNpdHk6LjI7bGluZS1oZWlnaHQ6MzBweH0uYy1hbGVydF9fY2xvc2UtYnV0dG9uOmhvdmVye29wYWNpdHk6LjN9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uYy1jb2xsYXBzYWJsZS1wYW5lbHtib3JkZXI6MXB4IHNvbGlkICNlMmUyZTI7Ym94LXNoYWRvdzowIDFweCAzcHggMXB4ICNlMmUyZTJ9LmMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlcntjdXJzb3I6cG9pbnRlcjtwYWRkaW5nOjEwcHggMTVweDtwb3NpdGlvbjpyZWxhdGl2ZX0uYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyOmFmdGVye3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjFlbTt0b3A6Ljc1ZW07Zm9udC1zaXplOi43NWVtO2ZvbnQtZmFtaWx5OlRlbHVzIEljb247Y29udGVudDonXFxcXEUxMTQnO2NvbG9yOiM1N2E3MDh9LmMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlci0tb3BlbjphZnRlcntjb250ZW50OidcXFxcRTExNyd9LmMtY29sbGFwc2FibGUtcGFuZWxfX2JvZHl7Ym9yZGVyLXRvcDoxcHggc29saWQgI2UyZTJlMjttYXgtaGVpZ2h0OjA7cGFkZGluZzowIDE1cHg7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZS1pbi1vdXQ7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2UtaW4tb3V0O292ZXJmbG93OmhpZGRlbjtvcGFjaXR5OjB9LmMtY29sbGFwc2FibGUtcGFuZWxfX2JvZHktLW9wZW57b3BhY2l0eToxO3BhZGRpbmc6MTVweDttYXgtaGVpZ2h0Ojk5OTlweH1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIlwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDc5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtbGVnYWwtY29udGFpbmVyX19vcmRlcmVkLWxpc3R7bWFyZ2luLXRvcDoxMHB4O21hcmdpbi1ib3R0b206MjBweDtsaXN0LXN0eWxlOmRlY2ltYWw7bGlzdC1zdHlsZS10eXBlOmRlY2ltYWw7cGFkZGluZy1sZWZ0OjIwcHh9LmMtbGVnYWwtY29udGFpbmVyX191bm9yZGVyZWQtbGlzdHttYXJnaW4tdG9wOjEwcHg7bWFyZ2luLWJvdHRvbToyMHB4O3BhZGRpbmctbGVmdDoyMHB4O2xpc3Qtc3R5bGU6bm9uZTtsaXN0LXN0eWxlLXR5cGU6bm9uZX0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbXtsaW5lLWhlaWdodDoxOXB4O21hcmdpbi1ib3R0b206MTBweDtwYWRkaW5nOjEwcHh9LmMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0tLWFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiNmOWYxZmZ9LmMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gYXtjb2xvcjojNDkxNjZkO3RleHQtZGVjb3JhdGlvbjpub25lO2JvcmRlci1ib3R0b206MXB4IGRvdHRlZDtwYWRkaW5nLWJvdHRvbToxcHh9LmMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gYTpob3Zlcntjb2xvcjojOGM2OGE2fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDgwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtbGVnYWwtc3Vwe2ZvbnQtc2l6ZTouNzVlbTtsaW5lLWhlaWdodDowO3ZlcnRpY2FsLWFsaWduOnN1cGVyO3RleHQtZGVjb3JhdGlvbjpub25lO3RvcDowIWltcG9ydGFudDtjdXJzb3I6cG9pbnRlcn0uYy1sZWdhbC1zdXAgYXtjb2xvcjojNDkxNjZkfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDgxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLm5vLXNjcm9sbHtvdmVyZmxvdy14OmhpZGRlbjtvdmVyZmxvdzpoaWRkZW47b3ZlcmZsb3cteTpoaWRkZW47cG9zaXRpb246cmVsYXRpdmU7aGVpZ2h0OjEwMCV9LmMtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW57b3BhY2l0eTowOy13ZWJraXQtdHJhbnNpdGlvbjpvcGFjaXR5IC43cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpO3RyYW5zaXRpb246b3BhY2l0eSAuN3MgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKX0uYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbi0tYWN0aXZle29wYWNpdHk6MTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjU1KTtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtib3R0b206MH0uYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXN7cG9zaXRpb246Zml4ZWQ7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjUpOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoMTAwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMTAwJSk7LXdlYmtpdC10cmFuc2l0aW9uOi43cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpO3RyYW5zaXRpb246LjdzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSl9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1OTlweCl7LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlze3dpZHRoOjEwMCV9fUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjAwcHgpey5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5c3t3aWR0aDo2NiV9fS5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5cy0tYWN0aXZley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMCk7ei1pbmRleDo5OTk5OX1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA4MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLW92ZXJsYXl7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9LmMtb3ZlcmxheV9faGVhZGVye3BhZGRpbmc6MjBweDtwb3NpdGlvbjpmaXhlZDt0b3A6MDtoZWlnaHQ6NzVweDt3aWR0aDoxMDAlO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlMmUyZTI7YmFja2dyb3VuZC1jb2xvcjojZjVmNmY3fS5jLW92ZXJsYXlfX2Nsb3NlLWJ1dHRvbntjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOjA7Ym9yZGVyOjA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjJyZW07cmlnaHQ6MXJlbTtmb250LWZhbWlseTpUZWx1cyBJY29uO2ZvbnQtc2l6ZToyZW07Y29sb3I6IzQ5MTY2ZH0uYy1vdmVybGF5X19jbG9zZS1idXR0b246YmVmb3Jle2NvbnRlbnQ6J1xcXFxFMTA2J30uYy1vdmVybGF5X19ib2R5e3Bvc2l0aW9uOmZpeGVkOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNoO292ZXJmbG93LXk6c2Nyb2xsO3RvcDo3NXB4O2JvdHRvbTowO3dpZHRoOjEwMCU7cGFkZGluZzoyMHB4IDIwcHggNTBweH1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA4MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIkAtd2Via2l0LWtleWZyYW1lcyByb3RhdGV7dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDF0dXJuKTt0cmFuc2Zvcm06cm90YXRlKDF0dXJuKX19QGtleWZyYW1lcyByb3RhdGV7dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDF0dXJuKTt0cmFuc2Zvcm06cm90YXRlKDF0dXJuKX19QC13ZWJraXQta2V5ZnJhbWVzIGRhc2h7MCV7c3Ryb2tlLWRhc2hhcnJheToxLDIwMDtzdHJva2UtZGFzaG9mZnNldDowfTUwJXtzdHJva2UtZGFzaGFycmF5Ojg5LDIwMDtzdHJva2UtZGFzaG9mZnNldDotMzV9dG97c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTEyNH19QGtleWZyYW1lcyBkYXNoezAle3N0cm9rZS1kYXNoYXJyYXk6MSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6MH01MCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTM1fXRve3N0cm9rZS1kYXNoYXJyYXk6ODksMjAwO3N0cm9rZS1kYXNob2Zmc2V0Oi0xMjR9fUAtd2Via2l0LWtleWZyYW1lcyBzcGlubmVyLWNvbG9yezAlLHRve3N0cm9rZTojNmMwfTI1JXtzdHJva2U6IzZjMH01MCV7c3Ryb2tlOiM1N2E3MDh9NzUle3N0cm9rZTojNTdhNzA4fX1Aa2V5ZnJhbWVzIHNwaW5uZXItY29sb3J7MCUsdG97c3Ryb2tlOiM2YzB9MjUle3N0cm9rZTojNmMwfTUwJXtzdHJva2U6IzU3YTcwOH03NSV7c3Ryb2tlOiM1N2E3MDh9fS5jLXNwaW5uZXJ7ZGlzcGxheTotd2Via2l0LWJveDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXI7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtkaXNwbGF5Oi13ZWJraXQtZmxleDstd2Via2l0LWFsaWduLWl0ZW1zOmNlbnRlcjstd2Via2l0LWJveC1wYWNrOmNlbnRlcjstbXMtZmxleC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbjphdXRvOy13ZWJraXQtYm94LW9yaWVudDp2ZXJ0aWNhbDstd2Via2l0LWJveC1kaXJlY3Rpb246bm9ybWFsOy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5jLXNwaW5uZXItLWZ1bGxzY3JlZW57cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO3JpZ2h0OjA7Ym90dG9tOjA7ei1pbmRleDo5OTk4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuOCl9LmMtc3Bpbm5lciBzdmd7YW5pbWF0aW9uLW5hbWU6cm90YXRlOy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6cm90YXRlOy1tb3otYW5pbWF0aW9uLW5hbWU6cm90YXRlO2FuaW1hdGlvbi1kdXJhdGlvbjoxLjhzOy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOjEuOHM7LW1vei1hbmltYXRpb24tZHVyYXRpb246MS44czthbmltYXRpb24taXRlcmF0aW9uLWNvdW50OmluZmluaXRlOy13ZWJraXQtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZTstbW96LWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6aW5maW5pdGU7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpsaW5lYXI7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmxpbmVhcjstbW96LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246bGluZWFyO2hlaWdodDoxMDBweDt3aWR0aDoxMDBweH0uYy1zcGlubmVyIGNpcmNsZXthbmltYXRpb246ZGFzaCAxLjdzIGVhc2UtaW4tb3V0IGluZmluaXRlIDBzLHNwaW5uZXItY29sb3IgNnMgZWFzZS1pbi1vdXQgaW5maW5pdGUgLS43NXM7LXdlYmtpdC1hbmltYXRpb246ZGFzaCAxLjdzIGVhc2UtaW4tb3V0IGluZmluaXRlIDBzLHNwaW5uZXItY29sb3IgNnMgZWFzZS1pbi1vdXQgaW5maW5pdGUgLS43NXM7LW1vei1hbmltYXRpb246ZGFzaCAxLjdzIGVhc2UtaW4tb3V0IGluZmluaXRlIDBzLHNwaW5uZXItY29sb3IgNnMgZWFzZS1pbi1vdXQgaW5maW5pdGUgLS43NXN9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy1zdGVwLXRyYWNrZXJfX2ljb24sLmh5X2MtaWNvbntmb250LWZhbWlseTpUZWx1cyBJY29uLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO3RleHQtZGVjb3JhdGlvbjpub25lO3RleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTtjb2xvcjppbmhlcml0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtmb250LXNpemU6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0fS5oeV9jLWljb25fX3NxdWFyZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6Mi41cmVtO2xpbmUtaGVpZ2h0OjNyZW07d2lkdGg6M3JlbTtoZWlnaHQ6M3JlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS0yeHtmb250LXNpemU6MmVtfS5oeV9jLWljb24tLTN4e2ZvbnQtc2l6ZTozZW19Lmh5X2MtaWNvbi0tNHh7Zm9udC1zaXplOjRlbX0uaHlfYy1pY29uX19zdHlsZWd1aWRle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToycmVtO2xpbmUtaGVpZ2h0OjRyZW07d2lkdGg6NHJlbTtoZWlnaHQ6NHJlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS1jaXJjbGUtdGhpY2stb3V0bGluZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5oeV9jLWljb24tLWNpcmNsZS1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDVcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtbG9nbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDlcXFwifS5oeV9jLWljb24tLWJhci1jaGFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTBcXFwifS5oeV9jLWljb24tLXBpY3R1cmUtZnJhbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDExXFxcIn0uaHlfYy1pY29uLS1wYXBlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTJcXFwifS5oeV9jLWljb24tLXBhcGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxM1xcXCJ9Lmh5X2MtaWNvbi0tZm9sZGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNFxcXCJ9Lmh5X2MtaWNvbi0tc2hhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE1XFxcIn0uaHlfYy1pY29uLS1tYWduaWZ5LWdsYXNzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNlxcXCJ9Lmh5X2MtaWNvbi0td2FybmluZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMThcXFwifS5oeV9jLWljb24tLXN0YXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE5XFxcIn0uaHlfYy1pY29uLS1zdGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMFxcXCJ9Lmh5X2MtaWNvbi0taGVhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIxXFxcIn0uaHlfYy1pY29uLS1saWZlc2F2ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIyXFxcIn0uaHlfYy1pY29uLS1oYW1idXJnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI0XFxcIn0uaHlfYy1pY29uLS1ncmlkLXNxdWFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjVcXFwifS5oeV9jLWljb24tLWdyaWQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjZcXFwifS5oeV9jLWljb24tLWxpZ2h0YnVsYjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjdcXFwifS5oeV9jLWljb24tLXNwZWVkb21ldGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOFxcXCJ9Lmh5X2MtaWNvbi0tYWRkLXJlbW92ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjlcXFwifS5oeV9jLWljb24tLWNhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMwXFxcIn0uaHlfYy1pY29uLS10d2l0dGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMVxcXCJ9Lmh5X2MtaWNvbi0tZmFjZWJvb2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMyXFxcIn0uaHlfYy1pY29uLS15b3V0dWJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzM1xcXCJ9Lmh5X2MtaWNvbi0tZ29vZ2xlLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM0XFxcIn0uaHlfYy1pY29uLS10cmVuZC1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNVxcXCJ9Lmh5X2MtaWNvbi0tcGxheS1idXR0b24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM2XFxcIn0uaHlfYy1pY29uLS12aWRlby1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzdcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM4XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzlcXFwifS5oeV9jLWljb24tLWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MFxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQxXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MlxcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NFxcXCJ9Lmh5X2MtaWNvbi0tbW91c2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ1XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDZcXFwifS5oeV9jLWljb24tLXBhcGVyLW5vdGVzLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0N1xcXCJ9Lmh5X2MtaWNvbi0tdHY6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ4XFxcIn0uaHlfYy1pY29uLS1maWxtOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OVxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUwXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUxXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MlxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTNcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTVcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NlxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1N1xcXCJ9Lmh5X2MtaWNvbi0tdXNlcnM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU5XFxcIn0uaHlfYy1pY29uLS11c2Vycy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MFxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjJcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtYm94ZWQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYzXFxcIn0uaHlfYy1pY29uLS1nZWFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NFxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NVxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjZcXFwifS5oeV9jLWljb24tLXBhZGxvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY4XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrLWludmVyZXRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjlcXFwifS5oeV9jLWljb24tLXN0YWNrZWQtcGFwZXJzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MVxcXCJ9Lmh5X2MtaWNvbi0tbXVzaWMtbm90ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzJcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDczXFxcIn0uaHlfYy1pY29uLS10YWJsZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc0XFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc1XFxcIn0uaHlfYy1pY29uLS1tb3VzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzZcXFwifS5oeV9jLWljb24tLXByaWNldGFnLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3N1xcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc4XFxcIn0uaHlfYy1pY29uLS10di1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzlcXFwifS5oeV9jLWljb24tLWZpbG0tY2xhcHBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODBcXFwifS5oeV9jLWljb24tLWVudmVsb3BlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MVxcXCJ9Lmh5X2MtaWNvbi0tcGhvbmUtaGFuZHNldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODJcXFwifS5oeV9jLWljb24tLXVzYi1zdGljay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODNcXFwifS5oeV9jLWljb24tLWhvbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg0XFxcIn0uaHlfYy1pY29uLS1ob21lLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg1XFxcIn0uaHlfYy1pY29uLS1ob21lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NlxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTFcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkyXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5M1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk0XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5N1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOThcXFwifS5oeV9jLWljb24tLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk5XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDJcXFwifS5oeV9jLWljb24tLXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA0XFxcIn0uaHlfYy1pY29uLS14LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA1XFxcIn0uaHlfYy1pY29uLS14LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNlxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOFxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA5XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTFcXFwifS5oeV9jLWljb24tLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEyXFxcIn0uaHlfYy1pY29uLS1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEzXFxcIn0uaHlfYy1pY29uLS1wbHVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNFxcXCJ9Lmh5X2MtaWNvbi0tbWludXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE1XFxcIn0uaHlfYy1pY29uLS1taW51cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNlxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE3XFxcIn0uaHlfYy1pY29uLS1jaGF0LWJ1YmJsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTlcXFwifS5oeV9jLWljb24tLWNoYXQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjBcXFwifS5oeV9jLWljb24tLWNoYXQtY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIxXFxcIn0uaHlfYy1pY29uLS1jaGF0LXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIyXFxcIn0uaHlfYy1pY29uLS1jaGF0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyM1xcXCJ9Lmh5X2MtaWNvbi0tc2ltLWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI1XFxcIn0uaHlfYy1pY29uLS1jYWxjdWxhdG9yOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNlxcXCJ9Lmh5X2MtaWNvbi0tYmx1ZXRvb3RoLWhlYWRzZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI3XFxcIn0uaHlfYy1pY29uLS1vdXRnb2luZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyOVxcXCJ9Lmh5X2MtaWNvbi0taW5jb21pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzBcXFwifS5oeV9jLWljb24tLWNhdXRpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMxXFxcIn0uaHlfYy1pY29uLS13aWZpLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMlxcXCJ9Lmh5X2MtaWNvbi0td2lmaTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzNcXFwifS5oeV9jLWljb24tLXRoaW4tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNVxcXCJ9Lmh5X2MtaWNvbi0taW5mby1pbnZlcnRlZDpiZWZvcmUsLmh5X2MtaWNvbi0taW5mbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzZcXFwifS5oeV9jLWljb24tLXRyZW5kLXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzOFxcXCJ9Lmh5X2MtaWNvbi0tZ2xvYmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQwXFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQyXFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ0XFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NVxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ2XFxcIn0uaHlfYy1pY29uLS1vdmVydmlldy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDdcXFwifS5oeV9jLWljb24tLXRlbHVzLWNpcmNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDhcXFwifS5oeV9jLWljb24tLXB1bHNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OVxcXCJ9Lmh5X2MtaWNvbi0tbWlrZS1tb2JpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUwXFxcIn0uaHlfYy1pY29uLS1yZXdhcmRzLWJhZGdlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MVxcXCJ9Lmh5X2MtaWNvbi0tZmlsdGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MlxcXCJ9Lmh5X2MtaWNvbi0tc2NoZWR1bGUtdGFsazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTNcXFwifS5oeV9jLWljb24tLXdhcm5pbmc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU0XFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU1XFxcIn0uaHlfYy1pY29uLS1jYXJ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NlxcXCJ9Lmh5X2MtaWNvbi0tbGl2ZS1jaGF0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1N1xcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNThcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3Q6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU5XFxcIn0uaHlfYy1pY29uLS1jbG91ZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjBcXFwifS5oeV9jLWljb24tLWRhdGE6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYxXFxcIn0uaHlfYy1pY29uLS1kZWxpdmVyeS10cnVjazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjJcXFwifS5oeV9jLWljb24tLXByb3RlY3Rpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYzXFxcIn0uaHlfYy1pY29uLS1jb2xvdXItcGlja2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NFxcXCJ9Lmh5X2MtaWNvbi0tbXVsdGktYWNjb3VudC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjVcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NlxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY3XFxcIn0uaHlfYy1pY29uLS1kb2xsYXItc2lnbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjhcXFwifS5oeV9jLWljb24tLWxpbmstYWNjb3VudDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjlcXFwifS5oeV9jLWljb24tLWRhdGEtbWFuYWdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzBcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MVxcXCJ9Lmh5X2MtaWNvbi0tdG9vbHMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcyXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzNcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NFxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NVxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NlxcXCJ9Lmh5X2MtaWNvbi0tbGlua2VkLWluLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3N1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc4XFxcIn0uaHlfYy1pY29uLS1taWNyb3Bob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgwXFxcIn0uaHlfYy1pY29uLS1uZXR3b3JraW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MVxcXCJ9Lmh5X2MtaWNvbi0tY3ljbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgyXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgzXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg0XFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWFkZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODVcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NlxcXCJ9LmMtc3RlcC10cmFja2Vye2xpc3Qtc3R5bGU6bm9uZTtwYWRkaW5nOjA7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTotd2Via2l0LWJveDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstd2Via2l0LWJveC1wYWNrOmp1c3RpZnk7LW1zLWZsZXgtcGFjazpqdXN0aWZ5O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO21hcmdpbjoxcmVtIC0xLjVyZW19QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDo2MDBweCl7LmMtc3RlcC10cmFja2Vye3BhZGRpbmctYm90dG9tOjIuNXJlbTttYXJnaW46MXJlbSAwfX0uYy1zdGVwLXRyYWNrZXJfX3N0ZXB7d2lkdGg6MTAwJTtwb3NpdGlvbjpyZWxhdGl2ZTt0ZXh0LWFsaWduOmNlbnRlcn0uYy1zdGVwLXRyYWNrZXJfX3N0ZXA6YWZ0ZXIsLmMtc3RlcC10cmFja2VyX19zdGVwOmJlZm9yZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6NTAlOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSk7d2lkdGg6Y2FsYyg1MCUgLSAxLjRyZW0pO2NvbnRlbnQ6JyAnO2JvcmRlci1ib3R0b206LjZyZW0gc29saWQgI2FlYWVhZX0uYy1zdGVwLXRyYWNrZXJfX3N0ZXA6YmVmb3Jle2xlZnQ6MH0uYy1zdGVwLXRyYWNrZXJfX3N0ZXA6YWZ0ZXJ7cmlnaHQ6MH0uYy1zdGVwLXRyYWNrZXIgLmMtc3RlcC10cmFja2VyX19zdGVwOmZpcnN0LWNoaWxkOmJlZm9yZSwuYy1zdGVwLXRyYWNrZXIgLmMtc3RlcC10cmFja2VyX19zdGVwOmxhc3QtY2hpbGQ6YWZ0ZXJ7Y29udGVudDpub25lfS5jLXN0ZXAtdHJhY2tlcl9fbGFiZWx7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOi0zcmVtO2xlZnQ6MDtmb250LXNpemU6MS43cmVtO3dpZHRoOjEwMCU7aGVpZ2h0OjIuNXJlbTtmb250LWZhbWlseTpUZWx1cyBSZWd1bGFyLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiM2NjZ9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1OTlweCl7LmMtc3RlcC10cmFja2VyX19sYWJlbHtkaXNwbGF5Om5vbmV9fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlIC5jLXN0ZXAtdHJhY2tlcl9fbGFiZWx7Zm9udC1mYW1pbHk6VGVsdXMgTWVkaXVtLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiM0MDgwMDB9LmMtc3RlcC10cmFja2VyX19pY29ue2ZvbnQtc2l6ZTozcmVtO2NvbG9yOiNhZWFlYWV9LmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9LmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9LmMtc3RlcC10cmFja2VyX19zZXRwLS1jbGlja2FibGUgYXtjdXJzb3I6cG9pbnRlcn0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlOmFmdGVye2JvcmRlci1ib3R0b206LjZyZW0gc29saWQgIzU3YTcwOH0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlIC5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlIC5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmUsLmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbG9yOiM1N2E3MDh9LmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSsuYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZTpiZWZvcmUsLmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSsuYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlOmJlZm9yZXtib3JkZXItYm90dG9tOi42cmVtIHNvbGlkICM1N2E3MDh9LmMtc3RlcC10cmFja2VyLW1vYmlsZS1sYWJlbHtmb250LXNpemU6MS43cmVtO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtZmFtaWx5OlRlbHVzIFJlZ3VsYXIsSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6IzY2Nn1AbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjYwMHB4KXsuYy1zdGVwLXRyYWNrZXItbW9iaWxlLWxhYmVse2Rpc3BsYXk6bm9uZX19LmMtc3RlcC10cmFja2VyLW1vYmlsZS1sYWJlbF9fc3RlcHtmb250LWZhbWlseTpUZWx1cyBNZWRpdW0sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6IzQwODAwMH1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLXRhYnNfX2hlYWRlcntsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO21hcmdpbjowO2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXh9LmMtdGFic19faGVhZGVyLWl0ZW17bWFyZ2luLXRvcDoycHg7aGVpZ2h0OjQ1cHg7cGFkZGluZzowIDJweDstd2Via2l0LWJveC1mbGV4OjE7LW1zLWZsZXg6MTtmbGV4OjF9LmMtdGFic19faGVhZGVyLWl0ZW0gYXtiYWNrZ3JvdW5kLWNvbG9yOiNlMmUyZTI7dGV4dC1kZWNvcmF0aW9uOm5vbmU7cGFkZGluZzoxM3B4IDIwcHg7Y29sb3I6IzQ5MTY2ZDtkaXNwbGF5OmJsb2NrfS5jLXRhYnNfX2hlYWRlci1pdGVtLS1hY3RpdmV7bWFyZ2luLXRvcDoxcHg7aGVpZ2h0OjQ2cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlci10b3A6MXB4IHNvbGlkICNlMmUyZTI7Ym9yZGVyLWxlZnQ6MXB4IHNvbGlkICNlMmUyZTI7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZTJlMmUyfS5jLXRhYnNfX2hlYWRlci1pdGVtLS1hY3RpdmUgYXtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Y29sb3I6IzMzM30uYy10YWJzX19oZWFkZXItaXRlbS0tZGlzYWJsZWQgYXtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY2Zjc7Y29sb3I6I2FlYWVhZTtjdXJzb3I6bm90LWFsbG93ZWR9LmMtdGFic19fYm9keXtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjZTJlMmUyO21hcmdpbi10b3A6LTFweDtwYWRkaW5nOjIwcHh9LmMtdGFic19fcGFuZXtkaXNwbGF5OmJsb2NrO2JvcmRlci10b3A6bm9uZTtvcGFjaXR5OjA7aGVpZ2h0OjA7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmc6MCA1cHg7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuNXMgZWFzZS1vdXQ7dHJhbnNpdGlvbjphbGwgLjVzIGVhc2Utb3V0fS5jLXRhYnNfX3BhbmUtLWFjdGl2ZXtvcGFjaXR5OjE7cGFkZGluZzo1cHg7aGVpZ2h0OmF1dG99XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogODYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciByZXF1aXJlO3ZhciBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXzsvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24ocHJvY2VzcywgZ2xvYmFsLCBtb2R1bGUpIHsvKiFcblx0ICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuXHQgKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuXHQgKiBAbGljZW5zZSAgIExpY2Vuc2VkIHVuZGVyIE1JVCBsaWNlbnNlXG5cdCAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9qYWtlYXJjaGliYWxkL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG5cdCAqIEB2ZXJzaW9uICAgMy4yLjFcblx0ICovXG5cdFxuXHQoZnVuY3Rpb24oKSB7XG5cdCAgICBcInVzZSBzdHJpY3RcIjtcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkb2JqZWN0T3JGdW5jdGlvbih4KSB7XG5cdCAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJyB8fCAodHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGwpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbih4KSB7XG5cdCAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJztcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzTWF5YmVUaGVuYWJsZSh4KSB7XG5cdCAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgeCAhPT0gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheTtcblx0ICAgIGlmICghQXJyYXkuaXNBcnJheSkge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5ID0gZnVuY3Rpb24gKHgpIHtcblx0ICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheSA9IGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXk7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9IDA7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dDtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm47XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwID0gZnVuY3Rpb24gYXNhcChjYWxsYmFjaywgYXJnKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuXSA9IGNhbGxiYWNrO1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiArIDFdID0gYXJnO1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuICs9IDI7XG5cdCAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuID09PSAyKSB7XG5cdCAgICAgICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuXHQgICAgICAgIC8vIElmIGFkZGl0aW9uYWwgY2FsbGJhY2tzIGFyZSBxdWV1ZWQgYmVmb3JlIHRoZSBxdWV1ZSBpcyBmbHVzaGVkLCB0aGV5XG5cdCAgICAgICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuXHQgICAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4pIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbihsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRBc2FwKGFzYXBGbikge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCA9IGFzYXBGbjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJXaW5kb3cgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpID8gd2luZG93IDogdW5kZWZpbmVkO1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJXaW5kb3cgfHwge307XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUgPSB0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHt9LnRvU3RyaW5nLmNhbGwocHJvY2VzcykgPT09ICdbb2JqZWN0IHByb2Nlc3NdJztcblx0XG5cdCAgICAvLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc1dvcmtlciA9IHR5cGVvZiBVaW50OENsYW1wZWRBcnJheSAhPT0gJ3VuZGVmaW5lZCcgJiZcblx0ICAgICAgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmXG5cdCAgICAgIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cdFxuXHQgICAgLy8gbm9kZVxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrKCkge1xuXHQgICAgICAvLyBub2RlIHZlcnNpb24gMC4xMC54IGRpc3BsYXlzIGEgZGVwcmVjYXRpb24gd2FybmluZyB3aGVuIG5leHRUaWNrIGlzIHVzZWQgcmVjdXJzaXZlbHlcblx0ICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzXG5cdCAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBwcm9jZXNzLm5leHRUaWNrKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gdmVydHhcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyKCkge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dChsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuXHQgICAgICB2YXIgaXRlcmF0aW9ucyA9IDA7XG5cdCAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcblx0ICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG5cdCAgICAgIG9ic2VydmVyLm9ic2VydmUobm9kZSwgeyBjaGFyYWN0ZXJEYXRhOiB0cnVlIH0pO1xuXHRcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIG5vZGUuZGF0YSA9IChpdGVyYXRpb25zID0gKytpdGVyYXRpb25zICUgMik7XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gd2ViIHdvcmtlclxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuXHQgICAgICB2YXIgY2hhbm5lbCA9IG5ldyBNZXNzYWdlQ2hhbm5lbCgpO1xuXHQgICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaDtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjaGFubmVsLnBvcnQyLnBvc3RNZXNzYWdlKDApO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCkge1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgc2V0VGltZW91dChsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gsIDEpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2goKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbjsgaSs9Mikge1xuXHQgICAgICAgIHZhciBjYWxsYmFjayA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpXTtcblx0ICAgICAgICB2YXIgYXJnID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2krMV07XG5cdFxuXHQgICAgICAgIGNhbGxiYWNrKGFyZyk7XG5cdFxuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaSsxXSA9IHVuZGVmaW5lZDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9IDA7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB2YXIgciA9IHJlcXVpcmU7XG5cdCAgICAgICAgdmFyIHZlcnR4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMzApO1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQgPSB2ZXJ0eC5ydW5Pbkxvb3AgfHwgdmVydHgucnVuT25Db250ZXh0O1xuXHQgICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lcigpO1xuXHQgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVNldFRpbWVvdXQoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaDtcblx0ICAgIC8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG5cdCAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGlzTm9kZSkge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljaygpO1xuXHQgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTXV0YXRpb25PYnNlcnZlcigpO1xuXHQgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIpIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTWVzc2FnZUNoYW5uZWwoKTtcblx0ICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJXaW5kb3cgPT09IHVuZGVmaW5lZCAmJiBcImZ1bmN0aW9uXCIgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXR0ZW1wdFZlcnR4KCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdGhlbiQkdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuXHQgICAgICB2YXIgcGFyZW50ID0gdGhpcztcblx0XG5cdCAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXHRcblx0ICAgICAgaWYgKGNoaWxkW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRtYWtlUHJvbWlzZShjaGlsZCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBzdGF0ZSA9IHBhcmVudC5fc3RhdGU7XG5cdFxuXHQgICAgICBpZiAoc3RhdGUpIHtcblx0ICAgICAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbc3RhdGUgLSAxXTtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChmdW5jdGlvbigpe1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc3RhdGUsIGNoaWxkLCBjYWxsYmFjaywgcGFyZW50Ll9yZXN1bHQpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbik7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBjaGlsZDtcblx0ICAgIH1cblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSR0aGVuJCR0aGVuO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkcmVzb2x2ZShvYmplY3QpIHtcblx0ICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cblx0ICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblx0XG5cdCAgICAgIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuXHQgICAgICAgIHJldHVybiBvYmplY3Q7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIG9iamVjdCk7XG5cdCAgICAgIHJldHVybiBwcm9taXNlO1xuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRyZXNvbHZlO1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMTYpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3AoKSB7fVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HICAgPSB2b2lkIDA7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEID0gMTtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCAgPSAyO1xuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUiA9IG5ldyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxmaWxsbWVudCgpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoXCJZb3UgY2Fubm90IHJlc29sdmUgYSBwcm9taXNlIHdpdGggaXRzZWxmXCIpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93bigpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKHByb21pc2UpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4gcHJvbWlzZS50aGVuO1xuXHQgICAgICB9IGNhdGNoKGVycm9yKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBlcnJvcjtcblx0ICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1I7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlUaGVuKHRoZW4sIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICB0aGVuLmNhbGwodmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcik7XG5cdCAgICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICAgIHJldHVybiBlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlLCB0aGVuKSB7XG5cdCAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChmdW5jdGlvbihwcm9taXNlKSB7XG5cdCAgICAgICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuXHQgICAgICAgIHZhciBlcnJvciA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeVRoZW4odGhlbiwgdGhlbmFibGUsIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgICBpZiAoc2VhbGVkKSB7IHJldHVybjsgfVxuXHQgICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0ICAgICAgICAgIGlmICh0aGVuYWJsZSAhPT0gdmFsdWUpIHtcblx0ICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgICAgICAgIGlmIChzZWFsZWQpIHsgcmV0dXJuOyB9XG5cdCAgICAgICAgICBzZWFsZWQgPSB0cnVlO1xuXHRcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cdFxuXHQgICAgICAgIGlmICghc2VhbGVkICYmIGVycm9yKSB7XG5cdCAgICAgICAgICBzZWFsZWQgPSB0cnVlO1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGVycm9yKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sIHByb21pc2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG5cdCAgICAgIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG5cdCAgICAgIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4pIHtcblx0ICAgICAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IgJiZcblx0ICAgICAgICAgIHRoZW4gPT09IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0ICYmXG5cdCAgICAgICAgICBjb25zdHJ1Y3Rvci5yZXNvbHZlID09PSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0KSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaWYgKHRoZW4gPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IuZXJyb3IpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAodGhlbiA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uKHRoZW4pKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSkge1xuXHQgICAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGZpbGxtZW50KCkpO1xuXHQgICAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkb2JqZWN0T3JGdW5jdGlvbih2YWx1ZSkpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKHZhbHVlKSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcblx0ICAgICAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcblx0ICAgICAgICBwcm9taXNlLl9vbmVycm9yKHByb21pc2UuX3Jlc3VsdCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gocHJvbWlzZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSkge1xuXHQgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHsgcmV0dXJuOyB9XG5cdFxuXHQgICAgICBwcm9taXNlLl9yZXN1bHQgPSB2YWx1ZTtcblx0ICAgICAgcHJvbWlzZS5fc3RhdGUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQ7XG5cdFxuXHQgICAgICBpZiAocHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoICE9PSAwKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaCwgcHJvbWlzZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG5cdCAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykgeyByZXR1cm47IH1cblx0ICAgICAgcHJvbWlzZS5fc3RhdGUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRDtcblx0ICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXHRcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG5cdCAgICAgIHZhciBzdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7XG5cdCAgICAgIHZhciBsZW5ndGggPSBzdWJzY3JpYmVycy5sZW5ndGg7XG5cdFxuXHQgICAgICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXHRcblx0ICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuXHQgICAgICBzdWJzY3JpYmVyc1tsZW5ndGggKyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcblx0ICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoICsgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURURdICA9IG9uUmVqZWN0aW9uO1xuXHRcblx0ICAgICAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaCwgcGFyZW50KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gocHJvbWlzZSkge1xuXHQgICAgICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcblx0ICAgICAgdmFyIHNldHRsZWQgPSBwcm9taXNlLl9zdGF0ZTtcblx0XG5cdCAgICAgIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHsgcmV0dXJuOyB9XG5cdFxuXHQgICAgICB2YXIgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN1YnNjcmliZXJzLmxlbmd0aDsgaSArPSAzKSB7XG5cdCAgICAgICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcblx0ICAgICAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblx0XG5cdCAgICAgICAgaWYgKGNoaWxkKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGNhbGxiYWNrKGRldGFpbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCkge1xuXHQgICAgICB0aGlzLmVycm9yID0gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SID0gbmV3IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCk7XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJldHVybiBjYWxsYmFjayhkZXRhaWwpO1xuXHQgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IuZXJyb3IgPSBlO1xuXHQgICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1I7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG5cdCAgICAgIHZhciBoYXNDYWxsYmFjayA9IGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbihjYWxsYmFjayksXG5cdCAgICAgICAgICB2YWx1ZSwgZXJyb3IsIHN1Y2NlZWRlZCwgZmFpbGVkO1xuXHRcblx0ICAgICAgaWYgKGhhc0NhbGxiYWNrKSB7XG5cdCAgICAgICAgdmFsdWUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblx0XG5cdCAgICAgICAgaWYgKHZhbHVlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IpIHtcblx0ICAgICAgICAgIGZhaWxlZCA9IHRydWU7XG5cdCAgICAgICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuXHQgICAgICAgICAgdmFsdWUgPSBudWxsO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkY2Fubm90UmV0dXJuT3duKCkpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFsdWUgPSBkZXRhaWw7XG5cdCAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG5cdCAgICAgICAgLy8gbm9vcFxuXHQgICAgICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlcnJvcik7XG5cdCAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXNvbHZlcihmdW5jdGlvbiByZXNvbHZlUHJvbWlzZSh2YWx1ZSl7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gY2F0Y2goZSkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpZCA9IDA7XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRuZXh0SWQoKSB7XG5cdCAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpZCsrO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlKHByb21pc2UpIHtcblx0ICAgICAgcHJvbWlzZVtsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGlkKys7XG5cdCAgICAgIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuXHQgICAgICBwcm9taXNlLl9yZXN1bHQgPSB1bmRlZmluZWQ7XG5cdCAgICAgIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRhbGwoZW50cmllcykge1xuXHQgICAgICByZXR1cm4gbmV3IGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0KHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG5cdCAgICB9XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRhbGw7XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlKGVudHJpZXMpIHtcblx0ICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cblx0ICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblx0XG5cdCAgICAgIGlmICghbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5KGVudHJpZXMpKSB7XG5cdCAgICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgICB2YXIgbGVuZ3RoID0gZW50cmllcy5sZW5ndGg7XG5cdCAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJHJhY2U7XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJHJlamVjdChyZWFzb24pIHtcblx0ICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cblx0ICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblx0ICAgICAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgICByZXR1cm4gcHJvbWlzZTtcblx0ICAgIH1cblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJHJlamVjdDtcblx0XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzUmVzb2x2ZXIoKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3InKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNOZXcoKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2U7XG5cdCAgICAvKipcblx0ICAgICAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZVxuXHQgICAgICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuXHQgICAgICByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZSByZWFzb25cblx0ICAgICAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cdFxuXHQgICAgICBUZXJtaW5vbG9neVxuXHQgICAgICAtLS0tLS0tLS0tLVxuXHRcblx0ICAgICAgLSBgcHJvbWlzZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHdpdGggYSBgdGhlbmAgbWV0aG9kIHdob3NlIGJlaGF2aW9yIGNvbmZvcm1zIHRvIHRoaXMgc3BlY2lmaWNhdGlvbi5cblx0ICAgICAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuXHQgICAgICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG5cdCAgICAgIC0gYGV4Y2VwdGlvbmAgaXMgYSB2YWx1ZSB0aGF0IGlzIHRocm93biB1c2luZyB0aGUgdGhyb3cgc3RhdGVtZW50LlxuXHQgICAgICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG5cdCAgICAgIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXHRcblx0ICAgICAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXHRcblx0ICAgICAgUHJvbWlzZXMgdGhhdCBhcmUgZnVsZmlsbGVkIGhhdmUgYSBmdWxmaWxsbWVudCB2YWx1ZSBhbmQgYXJlIGluIHRoZSBmdWxmaWxsZWRcblx0ICAgICAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSByZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRoZVxuXHQgICAgICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS5cblx0XG5cdCAgICAgIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuXHQgICAgICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG5cdCAgICAgIHNldHRsZWQgc3RhdGUuICBTbyBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IHJlamVjdHMgd2lsbFxuXHQgICAgICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG5cdCAgICAgIGl0c2VsZiBmdWxmaWxsLlxuXHRcblx0XG5cdCAgICAgIEJhc2ljIFVzYWdlOlxuXHQgICAgICAtLS0tLS0tLS0tLS1cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgLy8gb24gc3VjY2Vzc1xuXHQgICAgICAgIHJlc29sdmUodmFsdWUpO1xuXHRcblx0ICAgICAgICAvLyBvbiBmYWlsdXJlXG5cdCAgICAgICAgcmVqZWN0KHJlYXNvbik7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgLy8gb24gZnVsZmlsbG1lbnRcblx0ICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAgICAgLy8gb24gcmVqZWN0aW9uXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEFkdmFuY2VkIFVzYWdlOlxuXHQgICAgICAtLS0tLS0tLS0tLS0tLS1cblx0XG5cdCAgICAgIFByb21pc2VzIHNoaW5lIHdoZW4gYWJzdHJhY3RpbmcgYXdheSBhc3luY2hyb25vdXMgaW50ZXJhY3Rpb25zIHN1Y2ggYXNcblx0ICAgICAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xuXHQgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuXHQgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcblx0ICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuXHQgICAgICAgICAgeGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGhhbmRsZXI7XG5cdCAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuXHQgICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG5cdCAgICAgICAgICB4aHIuc2VuZCgpO1xuXHRcblx0ICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG5cdCAgICAgICAgICAgIGlmICh0aGlzLnJlYWR5U3RhdGUgPT09IHRoaXMuRE9ORSkge1xuXHQgICAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG5cdCAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuXHQgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcblx0ICAgICAgICAvLyBvbiBmdWxmaWxsbWVudFxuXHQgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgICAgICAvLyBvbiByZWplY3Rpb25cblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgVW5saWtlIGNhbGxiYWNrcywgcHJvbWlzZXMgYXJlIGdyZWF0IGNvbXBvc2FibGUgcHJpbWl0aXZlcy5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIFByb21pc2UuYWxsKFtcblx0ICAgICAgICBnZXRKU09OKCcvcG9zdHMnKSxcblx0ICAgICAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuXHQgICAgICBdKS50aGVuKGZ1bmN0aW9uKHZhbHVlcyl7XG5cdCAgICAgICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuXHQgICAgICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblx0XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlcztcblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgQGNsYXNzIFByb21pc2Vcblx0ICAgICAgQHBhcmFtIHtmdW5jdGlvbn0gcmVzb2x2ZXJcblx0ICAgICAgVXNlZnVsIGZvciB0b29saW5nLlxuXHQgICAgICBAY29uc3RydWN0b3Jcblx0ICAgICovXG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZShyZXNvbHZlcikge1xuXHQgICAgICB0aGlzW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbmV4dElkKCk7XG5cdCAgICAgIHRoaXMuX3Jlc3VsdCA9IHRoaXMuX3N0YXRlID0gdW5kZWZpbmVkO1xuXHQgICAgICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdO1xuXHRcblx0ICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3AgIT09IHJlc29sdmVyKSB7XG5cdCAgICAgICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyKCk7XG5cdCAgICAgICAgdGhpcyBpbnN0YW5jZW9mIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlID8gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3KCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5hbGwgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGRlZmF1bHQ7XG5cdCAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yYWNlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkZGVmYXVsdDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlc29sdmUgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0O1xuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucmVqZWN0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0O1xuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX3NldFNjaGVkdWxlciA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRTY2hlZHVsZXI7XG5cdCAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fc2V0QXNhcCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRBc2FwO1xuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX2FzYXAgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcDtcblx0XG5cdCAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5wcm90b3R5cGUgPSB7XG5cdCAgICAgIGNvbnN0cnVjdG9yOiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZSxcblx0XG5cdCAgICAvKipcblx0ICAgICAgVGhlIHByaW1hcnkgd2F5IG9mIGludGVyYWN0aW5nIHdpdGggYSBwcm9taXNlIGlzIHRocm91Z2ggaXRzIGB0aGVuYCBtZXRob2QsXG5cdCAgICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG5cdCAgICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcblx0ICAgICAgICAvLyB1c2VyIGlzIGF2YWlsYWJsZVxuXHQgICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIENoYWluaW5nXG5cdCAgICAgIC0tLS0tLS0tXG5cdFxuXHQgICAgICBUaGUgcmV0dXJuIHZhbHVlIG9mIGB0aGVuYCBpcyBpdHNlbGYgYSBwcm9taXNlLiAgVGhpcyBzZWNvbmQsICdkb3duc3RyZWFtJ1xuXHQgICAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG5cdCAgICAgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICAgICAgcmV0dXJuIHVzZXIubmFtZTtcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcblx0ICAgICAgfSkudGhlbihmdW5jdGlvbiAodXNlck5hbWUpIHtcblx0ICAgICAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG5cdCAgICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScpO1xuXHQgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuXHQgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgICAgLy8gaWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGByZWFzb25gIHdpbGwgYmUgJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jy5cblx0ICAgICAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHQgICAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcblx0ICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgICAgICAvLyBuZXZlciByZWFjaGVkXG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuXHQgICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG5cdCAgICAgICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgQXNzaW1pbGF0aW9uXG5cdCAgICAgIC0tLS0tLS0tLS0tLVxuXHRcblx0ICAgICAgU29tZXRpbWVzIHRoZSB2YWx1ZSB5b3Ugd2FudCB0byBwcm9wYWdhdGUgdG8gYSBkb3duc3RyZWFtIHByb21pc2UgY2FuIG9ubHkgYmVcblx0ICAgICAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxuXHQgICAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuXHQgICAgICB1bnRpbCB0aGUgcmV0dXJuZWQgcHJvbWlzZSBpcyBzZXR0bGVkLiBUaGlzIGlzIGNhbGxlZCAqYXNzaW1pbGF0aW9uKi5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcblx0ICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcblx0ICAgICAgICAvLyBUaGUgdXNlcidzIGNvbW1lbnRzIGFyZSBub3cgYXZhaWxhYmxlXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG5cdCAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uIChjb21tZW50cykge1xuXHQgICAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgcmVqZWN0cywgd2UnbGwgaGF2ZSB0aGUgcmVhc29uIGhlcmVcblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgU2ltcGxlIEV4YW1wbGVcblx0ICAgICAgLS0tLS0tLS0tLS0tLS1cblx0XG5cdCAgICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcblx0XG5cdCAgICAgIGBgYGphdmFzY3JpcHRcblx0ICAgICAgdmFyIHJlc3VsdDtcblx0XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuXHQgICAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgICAgfSBjYXRjaChyZWFzb24pIHtcblx0ICAgICAgICAvLyBmYWlsdXJlXG5cdCAgICAgIH1cblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBFcnJiYWNrIEV4YW1wbGVcblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuXHQgICAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICAgIC8vIGZhaWx1cmVcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gc3VjY2Vzc1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXHRcblx0ICAgICAgYGBgamF2YXNjcmlwdFxuXHQgICAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuXHQgICAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgICAgICAvLyBmYWlsdXJlXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEFkdmFuY2VkIEV4YW1wbGVcblx0ICAgICAgLS0tLS0tLS0tLS0tLS1cblx0XG5cdCAgICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcblx0XG5cdCAgICAgIGBgYGphdmFzY3JpcHRcblx0ICAgICAgdmFyIGF1dGhvciwgYm9va3M7XG5cdFxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIGF1dGhvciA9IGZpbmRBdXRob3IoKTtcblx0ICAgICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xuXHQgICAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgICAgfSBjYXRjaChyZWFzb24pIHtcblx0ICAgICAgICAvLyBmYWlsdXJlXG5cdCAgICAgIH1cblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBFcnJiYWNrIEV4YW1wbGVcblx0XG5cdCAgICAgIGBgYGpzXG5cdFxuXHQgICAgICBmdW5jdGlvbiBmb3VuZEJvb2tzKGJvb2tzKSB7XG5cdFxuXHQgICAgICB9XG5cdFxuXHQgICAgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuXHRcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG5cdCAgICAgICAgaWYgKGVycikge1xuXHQgICAgICAgICAgZmFpbHVyZShlcnIpO1xuXHQgICAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG5cdCAgICAgICAgICAgICAgaWYgKGVycikge1xuXHQgICAgICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuXHQgICAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcblx0ICAgICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgICAgICAgICAgIGZhaWx1cmUocmVhc29uKTtcblx0ICAgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfSBjYXRjaChlcnJvcikge1xuXHQgICAgICAgICAgICBmYWlsdXJlKGVycik7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBQcm9taXNlIEV4YW1wbGU7XG5cdFxuXHQgICAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICAgIGZpbmRBdXRob3IoKS5cblx0ICAgICAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cblx0ICAgICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcblx0ICAgICAgICAgIC8vIGZvdW5kIGJvb2tzXG5cdCAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3Jvbmdcblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgQG1ldGhvZCB0aGVuXG5cdCAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG5cdCAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcblx0ICAgICAgVXNlZnVsIGZvciB0b29saW5nLlxuXHQgICAgICBAcmV0dXJuIHtQcm9taXNlfVxuXHQgICAgKi9cblx0ICAgICAgdGhlbjogbGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQsXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgIGBjYXRjaGAgaXMgc2ltcGx5IHN1Z2FyIGZvciBgdGhlbih1bmRlZmluZWQsIG9uUmVqZWN0aW9uKWAgd2hpY2ggbWFrZXMgaXQgdGhlIHNhbWVcblx0ICAgICAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gc3luY2hyb25vdXNcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBmaW5kQXV0aG9yKCk7XG5cdCAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3Jvbmdcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gYXN5bmMgd2l0aCBwcm9taXNlc1xuXHQgICAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBAbWV0aG9kIGNhdGNoXG5cdCAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG5cdCAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICAgICAgQHJldHVybiB7UHJvbWlzZX1cblx0ICAgICovXG5cdCAgICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0aW9uKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMudGhlbihudWxsLCBvblJlamVjdGlvbik7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvcjtcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuXHQgICAgICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG5cdCAgICAgIHRoaXMucHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblx0XG5cdCAgICAgIGlmICghdGhpcy5wcm9taXNlW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbWFrZVByb21pc2UodGhpcy5wcm9taXNlKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheShpbnB1dCkpIHtcblx0ICAgICAgICB0aGlzLl9pbnB1dCAgICAgPSBpbnB1dDtcblx0ICAgICAgICB0aGlzLmxlbmd0aCAgICAgPSBpbnB1dC5sZW5ndGg7XG5cdCAgICAgICAgdGhpcy5fcmVtYWluaW5nID0gaW5wdXQubGVuZ3RoO1xuXHRcblx0ICAgICAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXHRcblx0ICAgICAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG5cdCAgICAgICAgICB0aGlzLl9lbnVtZXJhdGUoKTtcblx0ICAgICAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcblx0ICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdCh0aGlzLnByb21pc2UsIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCR2YWxpZGF0aW9uRXJyb3IoKSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkdmFsaWRhdGlvbkVycm9yKCkge1xuXHQgICAgICByZXR1cm4gbmV3IEVycm9yKCdBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXknKTtcblx0ICAgIH1cblx0XG5cdCAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICB2YXIgbGVuZ3RoICA9IHRoaXMubGVuZ3RoO1xuXHQgICAgICB2YXIgaW5wdXQgICA9IHRoaXMuX2lucHV0O1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HICYmIGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgIHRoaXMuX2VhY2hFbnRyeShpbnB1dFtpXSwgaSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9lYWNoRW50cnkgPSBmdW5jdGlvbihlbnRyeSwgaSkge1xuXHQgICAgICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG5cdCAgICAgIHZhciByZXNvbHZlID0gYy5yZXNvbHZlO1xuXHRcblx0ICAgICAgaWYgKHJlc29sdmUgPT09IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQpIHtcblx0ICAgICAgICB2YXIgdGhlbiA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4oZW50cnkpO1xuXHRcblx0ICAgICAgICBpZiAodGhlbiA9PT0gbGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQgJiZcblx0ICAgICAgICAgICAgZW50cnkuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7XG5cdCAgICAgICAgICB0aGlzLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLCBpLCBlbnRyeS5fcmVzdWx0KTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGVuICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICB0aGlzLl9yZW1haW5pbmctLTtcblx0ICAgICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IGVudHJ5O1xuXHQgICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQpIHtcblx0ICAgICAgICAgIHZhciBwcm9taXNlID0gbmV3IGMobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCB0aGVuKTtcblx0ICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyBjKGZ1bmN0aW9uKHJlc29sdmUpIHsgcmVzb2x2ZShlbnRyeSk7IH0pLCBpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHJlc29sdmUoZW50cnkpLCBpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uKHN0YXRlLCBpLCB2YWx1ZSkge1xuXHQgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMucHJvbWlzZTtcblx0XG5cdCAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuXHQgICAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuXHRcblx0ICAgICAgICBpZiAoc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICh0aGlzLl9yZW1haW5pbmcgPT09IDApIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbihwcm9taXNlLCBpKSB7XG5cdCAgICAgIHZhciBlbnVtZXJhdG9yID0gdGhpcztcblx0XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgZW51bWVyYXRvci5fc2V0dGxlZEF0KGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCwgaSwgdmFsdWUpO1xuXHQgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgICAgICBlbnVtZXJhdG9yLl9zZXR0bGVkQXQobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQsIGksIHJlYXNvbik7XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkcG9seWZpbGwoKSB7XG5cdCAgICAgIHZhciBsb2NhbDtcblx0XG5cdCAgICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgbG9jYWwgPSBnbG9iYWw7XG5cdCAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICBsb2NhbCA9IHNlbGY7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0cnkge1xuXHQgICAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0ICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cdFxuXHQgICAgICBpZiAoUCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpID09PSAnW29iamVjdCBQcm9taXNlXScgJiYgIVAuY2FzdCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgbG9jYWwuUHJvbWlzZSA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0O1xuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkcG9seWZpbGw7XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2UgPSB7XG5cdCAgICAgICdQcm9taXNlJzogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQsXG5cdCAgICAgICdwb2x5ZmlsbCc6IGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdFxuXHQgICAgfTtcblx0XG5cdCAgICAvKiBnbG9iYWwgZGVmaW5lOnRydWUgbW9kdWxlOnRydWUgd2luZG93OiB0cnVlICovXG5cdCAgICBpZiAoXCJmdW5jdGlvblwiID09PSAnZnVuY3Rpb24nICYmIF9fd2VicGFja19yZXF1aXJlX18oMjI4KVsnYW1kJ10pIHtcblx0ICAgICAgIShfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZTsgfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18sIGV4cG9ydHMsIG1vZHVsZSksIF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fICE9PSB1bmRlZmluZWQgJiYgKG1vZHVsZS5leHBvcnRzID0gX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18pKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlWydleHBvcnRzJ10pIHtcblx0ICAgICAgbW9kdWxlWydleHBvcnRzJ10gPSBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhpcyAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgdGhpc1snRVM2UHJvbWlzZSddID0gbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZTtcblx0ICAgIH1cblx0XG5cdCAgICBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQoKTtcblx0fSkuY2FsbCh0aGlzKTtcblx0XG5cdFxuXHRcblx0LyoqKiBFWFBPUlRTIEZST00gZXhwb3J0cy1sb2FkZXIgKioqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5Qcm9taXNlO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxOSksIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oMjI5KShtb2R1bGUpKSlcblxuLyoqKi8gfSxcbi8qIDg3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oUHJvbWlzZSkgeyhmdW5jdGlvbihzZWxmKSB7XG5cdCAgJ3VzZSBzdHJpY3QnO1xuXHRcblx0ICBpZiAoc2VsZi5mZXRjaCkge1xuXHQgICAgcmV0dXJuXG5cdCAgfVxuXHRcblx0ICB2YXIgc3VwcG9ydCA9IHtcblx0ICAgIHNlYXJjaFBhcmFtczogJ1VSTFNlYXJjaFBhcmFtcycgaW4gc2VsZixcblx0ICAgIGl0ZXJhYmxlOiAnU3ltYm9sJyBpbiBzZWxmICYmICdpdGVyYXRvcicgaW4gU3ltYm9sLFxuXHQgICAgYmxvYjogJ0ZpbGVSZWFkZXInIGluIHNlbGYgJiYgJ0Jsb2InIGluIHNlbGYgJiYgKGZ1bmN0aW9uKCkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIG5ldyBCbG9iKClcblx0ICAgICAgICByZXR1cm4gdHJ1ZVxuXHQgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2Vcblx0ICAgICAgfVxuXHQgICAgfSkoKSxcblx0ICAgIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIHNlbGYsXG5cdCAgICBhcnJheUJ1ZmZlcjogJ0FycmF5QnVmZmVyJyBpbiBzZWxmXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHtcblx0ICAgIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgbmFtZSA9IFN0cmluZyhuYW1lKVxuXHQgICAgfVxuXHQgICAgaWYgKC9bXmEtejAtOVxcLSMkJSYnKisuXFxeX2B8fl0vaS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lJylcblx0ICAgIH1cblx0ICAgIHJldHVybiBuYW1lLnRvTG93ZXJDYXNlKClcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIG5vcm1hbGl6ZVZhbHVlKHZhbHVlKSB7XG5cdCAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuXHQgICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSlcblx0ICAgIH1cblx0ICAgIHJldHVybiB2YWx1ZVxuXHQgIH1cblx0XG5cdCAgLy8gQnVpbGQgYSBkZXN0cnVjdGl2ZSBpdGVyYXRvciBmb3IgdGhlIHZhbHVlIGxpc3Rcblx0ICBmdW5jdGlvbiBpdGVyYXRvckZvcihpdGVtcykge1xuXHQgICAgdmFyIGl0ZXJhdG9yID0ge1xuXHQgICAgICBuZXh0OiBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgdmFsdWUgPSBpdGVtcy5zaGlmdCgpXG5cdCAgICAgICAgcmV0dXJuIHtkb25lOiB2YWx1ZSA9PT0gdW5kZWZpbmVkLCB2YWx1ZTogdmFsdWV9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuXHQgICAgICBpdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIGl0ZXJhdG9yXG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gaXRlcmF0b3Jcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykge1xuXHQgICAgdGhpcy5tYXAgPSB7fVxuXHRcblx0ICAgIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykge1xuXHQgICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcblx0ICAgICAgICB0aGlzLmFwcGVuZChuYW1lLCB2YWx1ZSlcblx0ICAgICAgfSwgdGhpcylcblx0XG5cdCAgICB9IGVsc2UgaWYgKGhlYWRlcnMpIHtcblx0ICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG5cdCAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSlcblx0ICAgICAgfSwgdGhpcylcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG5cdCAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuXHQgICAgdmFsdWUgPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcblx0ICAgIHZhciBsaXN0ID0gdGhpcy5tYXBbbmFtZV1cblx0ICAgIGlmICghbGlzdCkge1xuXHQgICAgICBsaXN0ID0gW11cblx0ICAgICAgdGhpcy5tYXBbbmFtZV0gPSBsaXN0XG5cdCAgICB9XG5cdCAgICBsaXN0LnB1c2godmFsdWUpXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICBkZWxldGUgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHZhciB2YWx1ZXMgPSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuXHQgICAgcmV0dXJuIHZhbHVlcyA/IHZhbHVlc1swXSA6IG51bGxcblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmdldEFsbCA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHJldHVybiB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSB8fCBbXVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuXHQgICAgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gPSBbbm9ybWFsaXplVmFsdWUodmFsdWUpXVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuZm9yRWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrLCB0aGlzQXJnKSB7XG5cdCAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLm1hcCkuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG5cdCAgICAgIHRoaXMubWFwW25hbWVdLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHZhbHVlLCBuYW1lLCB0aGlzKVxuXHQgICAgICB9LCB0aGlzKVxuXHQgICAgfSwgdGhpcylcblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBpdGVtcyA9IFtdXG5cdCAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChuYW1lKSB9KVxuXHQgICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgaXRlbXMgPSBbXVxuXHQgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW1zLnB1c2godmFsdWUpIH0pXG5cdCAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgaXRlbXMgPSBbXVxuXHQgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7IGl0ZW1zLnB1c2goW25hbWUsIHZhbHVlXSkgfSlcblx0ICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcblx0ICB9XG5cdFxuXHQgIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG5cdCAgICBIZWFkZXJzLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0gSGVhZGVycy5wcm90b3R5cGUuZW50cmllc1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gY29uc3VtZWQoYm9keSkge1xuXHQgICAgaWYgKGJvZHkuYm9keVVzZWQpIHtcblx0ICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuXHQgICAgfVxuXHQgICAgYm9keS5ib2R5VXNlZCA9IHRydWVcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdClcblx0ICAgICAgfVxuXHQgICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpXG5cdCAgICAgIH1cblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZWFkQmxvYkFzQXJyYXlCdWZmZXIoYmxvYikge1xuXHQgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcblx0ICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKVxuXHQgICAgcmV0dXJuIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZWFkQmxvYkFzVGV4dChibG9iKSB7XG5cdCAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuXHQgICAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYilcblx0ICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gQm9keSgpIHtcblx0ICAgIHRoaXMuYm9keVVzZWQgPSBmYWxzZVxuXHRcblx0ICAgIHRoaXMuX2luaXRCb2R5ID0gZnVuY3Rpb24oYm9keSkge1xuXHQgICAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHlcblx0ICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keVxuXHQgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYmxvYiAmJiBCbG9iLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5XG5cdCAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5mb3JtRGF0YSAmJiBGb3JtRGF0YS5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlGb3JtRGF0YSA9IGJvZHlcblx0ICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHkudG9TdHJpbmcoKVxuXHQgICAgICB9IGVsc2UgaWYgKCFib2R5KSB7XG5cdCAgICAgICAgdGhpcy5fYm9keVRleHQgPSAnJ1xuXHQgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIgJiYgQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcblx0ICAgICAgICAvLyBPbmx5IHN1cHBvcnQgQXJyYXlCdWZmZXJzIGZvciBQT1NUIG1ldGhvZC5cblx0ICAgICAgICAvLyBSZWNlaXZpbmcgQXJyYXlCdWZmZXJzIGhhcHBlbnMgdmlhIEJsb2JzLCBpbnN0ZWFkLlxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgQm9keUluaXQgdHlwZScpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghdGhpcy5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpIHtcblx0ICAgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAndGV4dC9wbGFpbjtjaGFyc2V0PVVURi04Jylcblx0ICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlCbG9iICYmIHRoaXMuX2JvZHlCbG9iLnR5cGUpIHtcblx0ICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsIHRoaXMuX2JvZHlCbG9iLnR5cGUpXG5cdCAgICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcblx0ICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCcpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHN1cHBvcnQuYmxvYikge1xuXHQgICAgICB0aGlzLmJsb2IgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuXHQgICAgICAgIGlmIChyZWplY3RlZCkge1xuXHQgICAgICAgICAgcmV0dXJuIHJlamVjdGVkXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcblx0ICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyBibG9iJylcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuYXJyYXlCdWZmZXIgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5ibG9iKCkudGhlbihyZWFkQmxvYkFzQXJyYXlCdWZmZXIpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG5cdCAgICAgICAgaWYgKHJlamVjdGVkKSB7XG5cdCAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuXHQgICAgICAgICAgcmV0dXJuIHJlYWRCbG9iQXNUZXh0KHRoaXMuX2JvZHlCbG9iKVxuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgdGV4dCcpXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuXHQgICAgICAgIHJldHVybiByZWplY3RlZCA/IHJlamVjdGVkIDogUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcblx0ICAgICAgdGhpcy5mb3JtRGF0YSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKGRlY29kZSlcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuanNvbiA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKVxuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiB0aGlzXG5cdCAgfVxuXHRcblx0ICAvLyBIVFRQIG1ldGhvZHMgd2hvc2UgY2FwaXRhbGl6YXRpb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWRcblx0ICB2YXIgbWV0aG9kcyA9IFsnREVMRVRFJywgJ0dFVCcsICdIRUFEJywgJ09QVElPTlMnLCAnUE9TVCcsICdQVVQnXVxuXHRcblx0ICBmdW5jdGlvbiBub3JtYWxpemVNZXRob2QobWV0aG9kKSB7XG5cdCAgICB2YXIgdXBjYXNlZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpXG5cdCAgICByZXR1cm4gKG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xKSA/IHVwY2FzZWQgOiBtZXRob2Rcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHtcblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG5cdCAgICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keVxuXHQgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpKSB7XG5cdCAgICAgIGlmIChpbnB1dC5ib2R5VXNlZCkge1xuXHQgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpXG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy51cmwgPSBpbnB1dC51cmxcblx0ICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGlucHV0LmNyZWRlbnRpYWxzXG5cdCAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG5cdCAgICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQuaGVhZGVycylcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLm1ldGhvZCA9IGlucHV0Lm1ldGhvZFxuXHQgICAgICB0aGlzLm1vZGUgPSBpbnB1dC5tb2RlXG5cdCAgICAgIGlmICghYm9keSkge1xuXHQgICAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXRcblx0ICAgICAgICBpbnB1dC5ib2R5VXNlZCA9IHRydWVcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy51cmwgPSBpbnB1dFxuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuY3JlZGVudGlhbHMgPSBvcHRpb25zLmNyZWRlbnRpYWxzIHx8IHRoaXMuY3JlZGVudGlhbHMgfHwgJ29taXQnXG5cdCAgICBpZiAob3B0aW9ucy5oZWFkZXJzIHx8ICF0aGlzLmhlYWRlcnMpIHtcblx0ICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuXHQgICAgfVxuXHQgICAgdGhpcy5tZXRob2QgPSBub3JtYWxpemVNZXRob2Qob3B0aW9ucy5tZXRob2QgfHwgdGhpcy5tZXRob2QgfHwgJ0dFVCcpXG5cdCAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGxcblx0ICAgIHRoaXMucmVmZXJyZXIgPSBudWxsXG5cdFxuXHQgICAgaWYgKCh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykgJiYgYm9keSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdCb2R5IG5vdCBhbGxvd2VkIGZvciBHRVQgb3IgSEVBRCByZXF1ZXN0cycpXG5cdCAgICB9XG5cdCAgICB0aGlzLl9pbml0Qm9keShib2R5KVxuXHQgIH1cblx0XG5cdCAgUmVxdWVzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBuZXcgUmVxdWVzdCh0aGlzKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZGVjb2RlKGJvZHkpIHtcblx0ICAgIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKClcblx0ICAgIGJvZHkudHJpbSgpLnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuXHQgICAgICBpZiAoYnl0ZXMpIHtcblx0ICAgICAgICB2YXIgc3BsaXQgPSBieXRlcy5zcGxpdCgnPScpXG5cdCAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG5cdCAgICAgICAgdmFyIHZhbHVlID0gc3BsaXQuam9pbignPScpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG5cdCAgICAgICAgZm9ybS5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KG5hbWUpLCBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpKVxuXHQgICAgICB9XG5cdCAgICB9KVxuXHQgICAgcmV0dXJuIGZvcm1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGhlYWRlcnMoeGhyKSB7XG5cdCAgICB2YXIgaGVhZCA9IG5ldyBIZWFkZXJzKClcblx0ICAgIHZhciBwYWlycyA9ICh4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKCkgfHwgJycpLnRyaW0oKS5zcGxpdCgnXFxuJylcblx0ICAgIHBhaXJzLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG5cdCAgICAgIHZhciBzcGxpdCA9IGhlYWRlci50cmltKCkuc3BsaXQoJzonKVxuXHQgICAgICB2YXIga2V5ID0gc3BsaXQuc2hpZnQoKS50cmltKClcblx0ICAgICAgdmFyIHZhbHVlID0gc3BsaXQuam9pbignOicpLnRyaW0oKVxuXHQgICAgICBoZWFkLmFwcGVuZChrZXksIHZhbHVlKVxuXHQgICAgfSlcblx0ICAgIHJldHVybiBoZWFkXG5cdCAgfVxuXHRcblx0ICBCb2R5LmNhbGwoUmVxdWVzdC5wcm90b3R5cGUpXG5cdFxuXHQgIGZ1bmN0aW9uIFJlc3BvbnNlKGJvZHlJbml0LCBvcHRpb25zKSB7XG5cdCAgICBpZiAoIW9wdGlvbnMpIHtcblx0ICAgICAgb3B0aW9ucyA9IHt9XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy50eXBlID0gJ2RlZmF1bHQnXG5cdCAgICB0aGlzLnN0YXR1cyA9IG9wdGlvbnMuc3RhdHVzXG5cdCAgICB0aGlzLm9rID0gdGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwXG5cdCAgICB0aGlzLnN0YXR1c1RleHQgPSBvcHRpb25zLnN0YXR1c1RleHRcblx0ICAgIHRoaXMuaGVhZGVycyA9IG9wdGlvbnMuaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMgPyBvcHRpb25zLmhlYWRlcnMgOiBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG5cdCAgICB0aGlzLnVybCA9IG9wdGlvbnMudXJsIHx8ICcnXG5cdCAgICB0aGlzLl9pbml0Qm9keShib2R5SW5pdClcblx0ICB9XG5cdFxuXHQgIEJvZHkuY2FsbChSZXNwb25zZS5wcm90b3R5cGUpXG5cdFxuXHQgIFJlc3BvbnNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgcmV0dXJuIG5ldyBSZXNwb25zZSh0aGlzLl9ib2R5SW5pdCwge1xuXHQgICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuXHQgICAgICBzdGF0dXNUZXh0OiB0aGlzLnN0YXR1c1RleHQsXG5cdCAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyksXG5cdCAgICAgIHVybDogdGhpcy51cmxcblx0ICAgIH0pXG5cdCAgfVxuXHRcblx0ICBSZXNwb25zZS5lcnJvciA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IDAsIHN0YXR1c1RleHQ6ICcnfSlcblx0ICAgIHJlc3BvbnNlLnR5cGUgPSAnZXJyb3InXG5cdCAgICByZXR1cm4gcmVzcG9uc2Vcblx0ICB9XG5cdFxuXHQgIHZhciByZWRpcmVjdFN0YXR1c2VzID0gWzMwMSwgMzAyLCAzMDMsIDMwNywgMzA4XVxuXHRcblx0ICBSZXNwb25zZS5yZWRpcmVjdCA9IGZ1bmN0aW9uKHVybCwgc3RhdHVzKSB7XG5cdCAgICBpZiAocmVkaXJlY3RTdGF0dXNlcy5pbmRleE9mKHN0YXR1cykgPT09IC0xKSB7XG5cdCAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHN0YXR1cyBjb2RlJylcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IHN0YXR1cywgaGVhZGVyczoge2xvY2F0aW9uOiB1cmx9fSlcblx0ICB9XG5cdFxuXHQgIHNlbGYuSGVhZGVycyA9IEhlYWRlcnNcblx0ICBzZWxmLlJlcXVlc3QgPSBSZXF1ZXN0XG5cdCAgc2VsZi5SZXNwb25zZSA9IFJlc3BvbnNlXG5cdFxuXHQgIHNlbGYuZmV0Y2ggPSBmdW5jdGlvbihpbnB1dCwgaW5pdCkge1xuXHQgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICB2YXIgcmVxdWVzdFxuXHQgICAgICBpZiAoUmVxdWVzdC5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihpbnB1dCkgJiYgIWluaXQpIHtcblx0ICAgICAgICByZXF1ZXN0ID0gaW5wdXRcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoaW5wdXQsIGluaXQpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKVxuXHRcblx0ICAgICAgZnVuY3Rpb24gcmVzcG9uc2VVUkwoKSB7XG5cdCAgICAgICAgaWYgKCdyZXNwb25zZVVSTCcgaW4geGhyKSB7XG5cdCAgICAgICAgICByZXR1cm4geGhyLnJlc3BvbnNlVVJMXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBBdm9pZCBzZWN1cml0eSB3YXJuaW5ncyBvbiBnZXRSZXNwb25zZUhlYWRlciB3aGVuIG5vdCBhbGxvd2VkIGJ5IENPUlNcblx0ICAgICAgICBpZiAoL15YLVJlcXVlc3QtVVJMOi9tLnRlc3QoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSkge1xuXHQgICAgICAgICAgcmV0dXJuIHhoci5nZXRSZXNwb25zZUhlYWRlcignWC1SZXF1ZXN0LVVSTCcpXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICByZXR1cm5cblx0ICAgICAgfVxuXHRcblx0ICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHZhciBvcHRpb25zID0ge1xuXHQgICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxuXHQgICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG5cdCAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKHhociksXG5cdCAgICAgICAgICB1cmw6IHJlc3BvbnNlVVJMKClcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHRcblx0ICAgICAgICByZXNvbHZlKG5ldyBSZXNwb25zZShib2R5LCBvcHRpb25zKSlcblx0ICAgICAgfVxuXHRcblx0ICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcblx0ICAgICAgfVxuXHRcblx0ICAgICAgeGhyLm9wZW4ocmVxdWVzdC5tZXRob2QsIHJlcXVlc3QudXJsLCB0cnVlKVxuXHRcblx0ICAgICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuXHQgICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIgJiYgc3VwcG9ydC5ibG9iKSB7XG5cdCAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJ1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXF1ZXN0LmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuXHQgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKVxuXHQgICAgICB9KVxuXHRcblx0ICAgICAgeGhyLnNlbmQodHlwZW9mIHJlcXVlc3QuX2JvZHlJbml0ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiByZXF1ZXN0Ll9ib2R5SW5pdClcblx0ICAgIH0pXG5cdCAgfVxuXHQgIHNlbGYuZmV0Y2gucG9seWZpbGwgPSB0cnVlXG5cdH0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzKTtcblx0XG5cdFxuXHQvKioqIEVYUE9SVFMgRlJPTSBleHBvcnRzLWxvYWRlciAqKiovXG5cdG1vZHVsZS5leHBvcnRzID0gc2VsZi5mZXRjaDtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oODYpKSlcblxuLyoqKi8gfSxcbi8qIDg4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiYjRkZTI5ZmU0M2FjODVlZjBiNjZmOWM3ZGZjNDc0ZDMucG5nXCI7XG5cbi8qKiovIH0sXG4vKiA4OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE5hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNiksXG5cdCAgICByb290ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cblx0dmFyIERhdGFWaWV3ID0gZ2V0TmF0aXZlKHJvb3QsICdEYXRhVmlldycpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBEYXRhVmlldztcblxuXG4vKioqLyB9LFxuLyogOTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBoYXNoQ2xlYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMSksXG5cdCAgICBoYXNoRGVsZXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjIpLFxuXHQgICAgaGFzaEdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKSxcblx0ICAgIGhhc2hIYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyNCksXG5cdCAgICBoYXNoU2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjUpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBoYXNoIG9iamVjdC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuXHQgKi9cblx0ZnVuY3Rpb24gSGFzaChlbnRyaWVzKSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cdFxuXHQgIHRoaXMuY2xlYXIoKTtcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgdmFyIGVudHJ5ID0gZW50cmllc1tpbmRleF07XG5cdCAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gQWRkIG1ldGhvZHMgdG8gYEhhc2hgLlxuXHRIYXNoLnByb3RvdHlwZS5jbGVhciA9IGhhc2hDbGVhcjtcblx0SGFzaC5wcm90b3R5cGVbJ2RlbGV0ZSddID0gaGFzaERlbGV0ZTtcblx0SGFzaC5wcm90b3R5cGUuZ2V0ID0gaGFzaEdldDtcblx0SGFzaC5wcm90b3R5cGUuaGFzID0gaGFzaEhhcztcblx0SGFzaC5wcm90b3R5cGUuc2V0ID0gaGFzaFNldDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gSGFzaDtcblxuXG4vKioqLyB9LFxuLyogOTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXROYXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLFxuXHQgICAgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBQcm9taXNlID0gZ2V0TmF0aXZlKHJvb3QsICdQcm9taXNlJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG5cblxuLyoqKi8gfSxcbi8qIDkyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TmF0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KSxcblx0ICAgIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xuXHR2YXIgU2V0ID0gZ2V0TmF0aXZlKHJvb3QsICdTZXQnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU2V0O1xuXG5cbi8qKiovIH0sXG4vKiA5MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIE1hcENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNyksXG5cdCAgICBzZXRDYWNoZUFkZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQxKSxcblx0ICAgIHNldENhY2hlSGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDIpO1xuXHRcblx0LyoqXG5cdCAqXG5cdCAqIENyZWF0ZXMgYW4gYXJyYXkgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIHVuaXF1ZSB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNhY2hlLlxuXHQgKi9cblx0ZnVuY3Rpb24gU2V0Q2FjaGUodmFsdWVzKSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIGxlbmd0aCA9IHZhbHVlcyA/IHZhbHVlcy5sZW5ndGggOiAwO1xuXHRcblx0ICB0aGlzLl9fZGF0YV9fID0gbmV3IE1hcENhY2hlO1xuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICB0aGlzLmFkZCh2YWx1ZXNbaW5kZXhdKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEFkZCBtZXRob2RzIHRvIGBTZXRDYWNoZWAuXG5cdFNldENhY2hlLnByb3RvdHlwZS5hZGQgPSBTZXRDYWNoZS5wcm90b3R5cGUucHVzaCA9IHNldENhY2hlQWRkO1xuXHRTZXRDYWNoZS5wcm90b3R5cGUuaGFzID0gc2V0Q2FjaGVIYXM7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFNldENhY2hlO1xuXG5cbi8qKiovIH0sXG4vKiA5NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG5cdHZhciBVaW50OEFycmF5ID0gcm9vdC5VaW50OEFycmF5O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBVaW50OEFycmF5O1xuXG5cbi8qKiovIH0sXG4vKiA5NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE5hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNiksXG5cdCAgICByb290ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cblx0dmFyIFdlYWtNYXAgPSBnZXROYXRpdmUocm9vdCwgJ1dlYWtNYXAnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gV2Vha01hcDtcblxuXG4vKioqLyB9LFxuLyogOTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBBIGZhc3RlciBhbHRlcm5hdGl2ZSB0byBgRnVuY3Rpb24jYXBwbHlgLCB0aGlzIGZ1bmN0aW9uIGludm9rZXMgYGZ1bmNgXG5cdCAqIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIGB0aGlzQXJnYCBhbmQgdGhlIGFyZ3VtZW50cyBvZiBgYXJnc2AuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGludm9rZS5cblx0ICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXN1bHQgb2YgYGZ1bmNgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYXBwbHkoZnVuYywgdGhpc0FyZywgYXJncykge1xuXHQgIHZhciBsZW5ndGggPSBhcmdzLmxlbmd0aDtcblx0ICBzd2l0Y2ggKGxlbmd0aCkge1xuXHQgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcpO1xuXHQgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0pO1xuXHQgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0pO1xuXHQgICAgY2FzZSAzOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuXHQgIH1cblx0ICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBhcHBseTtcblxuXG4vKioqLyB9LFxuLyogOTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlXG5cdCAqIHNob3J0aGFuZHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjayxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGFycmF5U29tZShhcnJheSwgcHJlZGljYXRlKSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIGxlbmd0aCA9IGFycmF5ID8gYXJyYXkubGVuZ3RoIDogMDtcblx0XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZmFsc2U7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYXJyYXlTb21lO1xuXG5cbi8qKiovIH0sXG4vKiA5OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cblx0dmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5kZWxheWAgYW5kIGBfLmRlZmVyYCB3aGljaCBhY2NlcHRzIGFuIGFycmF5XG5cdCAqIG9mIGBmdW5jYCBhcmd1bWVudHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlbGF5LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gd2FpdCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheSBpbnZvY2F0aW9uLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gYXJncyBUaGUgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lciBpZC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VEZWxheShmdW5jLCB3YWl0LCBhcmdzKSB7XG5cdCAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcblx0ICB9XG5cdCAgcmV0dXJuIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7IGZ1bmMuYXBwbHkodW5kZWZpbmVkLCBhcmdzKTsgfSwgd2FpdCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZURlbGF5O1xuXG5cbi8qKiovIH0sXG4vKiA5OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZpbmRJbmRleGAgYW5kIGBfLmZpbmRMYXN0SW5kZXhgIHdpdGhvdXRcblx0ICogc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gcHJlZGljYXRlIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tSW5kZXggVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIG1hdGNoZWQgdmFsdWUsIGVsc2UgYC0xYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VGaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSwgZnJvbUluZGV4LCBmcm9tUmlnaHQpIHtcblx0ICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuXHQgICAgICBpbmRleCA9IGZyb21JbmRleCArIChmcm9tUmlnaHQgPyAxIDogLTEpO1xuXHRcblx0ICB3aGlsZSAoKGZyb21SaWdodCA/IGluZGV4LS0gOiArK2luZGV4IDwgbGVuZ3RoKSkge1xuXHQgICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcblx0ICAgICAgcmV0dXJuIGluZGV4O1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUZpbmRJbmRleDtcblxuXG4vKioqLyB9LFxuLyogMTAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaGFzSW5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBrZXkgVGhlIGtleSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUhhc0luKG9iamVjdCwga2V5KSB7XG5cdCAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIGtleSBpbiBPYmplY3Qob2JqZWN0KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSGFzSW47XG5cblxuLyoqKi8gfSxcbi8qIDEwMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFN0YWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyksXG5cdCAgICBlcXVhbEFycmF5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMzApLFxuXHQgICAgZXF1YWxCeVRhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEzKSxcblx0ICAgIGVxdWFsT2JqZWN0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTE0KSxcblx0ICAgIGdldFRhZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTE4KSxcblx0ICAgIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNIb3N0T2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSksXG5cdCAgICBpc1R5cGVkQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nyk7XG5cdFxuXHQvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cblx0dmFyIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcblx0ICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcblx0ICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcblx0ICogZGVlcCBjb21wYXJpc29ucyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuXHQgKiByZWZlcmVuY2VzIHRvIGJlIGNvbXBhcmVkLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtiaXRtYXNrXSBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuXHQgKiAgZm9yIG1vcmUgZGV0YWlscy5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgb2JqZWN0YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VJc0VxdWFsRGVlcChvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG5cdCAgdmFyIG9iaklzQXJyID0gaXNBcnJheShvYmplY3QpLFxuXHQgICAgICBvdGhJc0FyciA9IGlzQXJyYXkob3RoZXIpLFxuXHQgICAgICBvYmpUYWcgPSBhcnJheVRhZyxcblx0ICAgICAgb3RoVGFnID0gYXJyYXlUYWc7XG5cdFxuXHQgIGlmICghb2JqSXNBcnIpIHtcblx0ICAgIG9ialRhZyA9IGdldFRhZyhvYmplY3QpO1xuXHQgICAgb2JqVGFnID0gb2JqVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvYmpUYWc7XG5cdCAgfVxuXHQgIGlmICghb3RoSXNBcnIpIHtcblx0ICAgIG90aFRhZyA9IGdldFRhZyhvdGhlcik7XG5cdCAgICBvdGhUYWcgPSBvdGhUYWcgPT0gYXJnc1RhZyA/IG9iamVjdFRhZyA6IG90aFRhZztcblx0ICB9XG5cdCAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG9iamVjdCksXG5cdCAgICAgIG90aElzT2JqID0gb3RoVGFnID09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG90aGVyKSxcblx0ICAgICAgaXNTYW1lVGFnID0gb2JqVGFnID09IG90aFRhZztcblx0XG5cdCAgaWYgKGlzU2FtZVRhZyAmJiAhb2JqSXNPYmopIHtcblx0ICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG5cdCAgICByZXR1cm4gKG9iaklzQXJyIHx8IGlzVHlwZWRBcnJheShvYmplY3QpKVxuXHQgICAgICA/IGVxdWFsQXJyYXlzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spXG5cdCAgICAgIDogZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCBvYmpUYWcsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXHQgIH1cblx0ICBpZiAoIShiaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUcpKSB7XG5cdCAgICB2YXIgb2JqSXNXcmFwcGVkID0gb2JqSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsICdfX3dyYXBwZWRfXycpLFxuXHQgICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXHRcblx0ICAgIGlmIChvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKSB7XG5cdCAgICAgIHZhciBvYmpVbndyYXBwZWQgPSBvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCxcblx0ICAgICAgICAgIG90aFVud3JhcHBlZCA9IG90aElzV3JhcHBlZCA/IG90aGVyLnZhbHVlKCkgOiBvdGhlcjtcblx0XG5cdCAgICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG5cdCAgICAgIHJldHVybiBlcXVhbEZ1bmMob2JqVW53cmFwcGVkLCBvdGhVbndyYXBwZWQsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCFpc1NhbWVUYWcpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcblx0ICByZXR1cm4gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsRGVlcDtcblxuXG4vKioqLyB9LFxuLyogMTAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgU3RhY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKSxcblx0ICAgIGJhc2VJc0VxdWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyk7XG5cdFxuXHQvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cblx0dmFyIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgPSAxLFxuXHQgICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTWF0Y2hgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGluc3BlY3QuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG5cdCAqIEBwYXJhbSB7QXJyYXl9IG1hdGNoRGF0YSBUaGUgcHJvcGVydHkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3MgdG8gbWF0Y2guXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG9iamVjdGAgaXMgYSBtYXRjaCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUlzTWF0Y2gob2JqZWN0LCBzb3VyY2UsIG1hdGNoRGF0YSwgY3VzdG9taXplcikge1xuXHQgIHZhciBpbmRleCA9IG1hdGNoRGF0YS5sZW5ndGgsXG5cdCAgICAgIGxlbmd0aCA9IGluZGV4LFxuXHQgICAgICBub0N1c3RvbWl6ZXIgPSAhY3VzdG9taXplcjtcblx0XG5cdCAgaWYgKG9iamVjdCA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gIWxlbmd0aDtcblx0ICB9XG5cdCAgb2JqZWN0ID0gT2JqZWN0KG9iamVjdCk7XG5cdCAgd2hpbGUgKGluZGV4LS0pIHtcblx0ICAgIHZhciBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcblx0ICAgIGlmICgobm9DdXN0b21pemVyICYmIGRhdGFbMl0pXG5cdCAgICAgICAgICA/IGRhdGFbMV0gIT09IG9iamVjdFtkYXRhWzBdXVxuXHQgICAgICAgICAgOiAhKGRhdGFbMF0gaW4gb2JqZWN0KVxuXHQgICAgICAgICkge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcblx0ICAgIHZhciBrZXkgPSBkYXRhWzBdLFxuXHQgICAgICAgIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG5cdCAgICAgICAgc3JjVmFsdWUgPSBkYXRhWzFdO1xuXHRcblx0ICAgIGlmIChub0N1c3RvbWl6ZXIgJiYgZGF0YVsyXSkge1xuXHQgICAgICBpZiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgc3RhY2sgPSBuZXcgU3RhY2s7XG5cdCAgICAgIGlmIChjdXN0b21pemVyKSB7XG5cdCAgICAgICAgdmFyIHJlc3VsdCA9IGN1c3RvbWl6ZXIob2JqVmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlLCBzdGFjayk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCEocmVzdWx0ID09PSB1bmRlZmluZWRcblx0ICAgICAgICAgICAgPyBiYXNlSXNFcXVhbChzcmNWYWx1ZSwgb2JqVmFsdWUsIGN1c3RvbWl6ZXIsIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgfCBQQVJUSUFMX0NPTVBBUkVfRkxBRywgc3RhY2spXG5cdCAgICAgICAgICAgIDogcmVzdWx0XG5cdCAgICAgICAgICApKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VJc01hdGNoO1xuXG5cbi8qKiovIH0sXG4vKiAxMDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCksXG5cdCAgICBpc0hvc3RPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKSxcblx0ICAgIGlzTWFza2VkID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjgpLFxuXHQgICAgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLFxuXHQgICAgdG9Tb3VyY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgXG5cdCAqIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtcGF0dGVybnMpLlxuXHQgKi9cblx0dmFyIHJlUmVnRXhwQ2hhciA9IC9bXFxcXF4kLiorPygpW1xcXXt9fF0vZztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBob3N0IGNvbnN0cnVjdG9ycyAoU2FmYXJpKS4gKi9cblx0dmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG5cdHZhciBmdW5jVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgaWYgYSBtZXRob2QgaXMgbmF0aXZlLiAqL1xuXHR2YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuXHQgIGZ1bmNUb1N0cmluZy5jYWxsKGhhc093blByb3BlcnR5KS5yZXBsYWNlKHJlUmVnRXhwQ2hhciwgJ1xcXFwkJicpXG5cdCAgLnJlcGxhY2UoL2hhc093blByb3BlcnR5fChmdW5jdGlvbikuKj8oPz1cXFxcXFwoKXwgZm9yIC4rPyg/PVxcXFxcXF0pL2csICckMS4qPycpICsgJyQnXG5cdCk7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNOYXRpdmVgIHdpdGhvdXQgYmFkIHNoaW0gY2hlY2tzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlSXNOYXRpdmUodmFsdWUpIHtcblx0ICBpZiAoIWlzT2JqZWN0KHZhbHVlKSB8fCBpc01hc2tlZCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIHBhdHRlcm4gPSAoaXNGdW5jdGlvbih2YWx1ZSkgfHwgaXNIb3N0T2JqZWN0KHZhbHVlKSkgPyByZUlzTmF0aXZlIDogcmVJc0hvc3RDdG9yO1xuXHQgIHJldHVybiBwYXR0ZXJuLnRlc3QodG9Tb3VyY2UodmFsdWUpKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNOYXRpdmU7XG5cblxuLyoqKi8gfSxcbi8qIDEwNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VNYXRjaGVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDYpLFxuXHQgICAgYmFzZU1hdGNoZXNQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMTA3KSxcblx0ICAgIGlkZW50aXR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNTUpLFxuXHQgICAgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNCksXG5cdCAgICBwcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMTYwKTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pdGVyYXRlZWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gW3ZhbHVlPV8uaWRlbnRpdHldIFRoZSB2YWx1ZSB0byBjb252ZXJ0IHRvIGFuIGl0ZXJhdGVlLlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGl0ZXJhdGVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUl0ZXJhdGVlKHZhbHVlKSB7XG5cdCAgLy8gRG9uJ3Qgc3RvcmUgdGhlIGB0eXBlb2ZgIHJlc3VsdCBpbiBhIHZhcmlhYmxlIHRvIGF2b2lkIGEgSklUIGJ1ZyBpbiBTYWZhcmkgOS5cblx0ICAvLyBTZWUgaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE1NjAzNCBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICBpZiAodmFsdWUgPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGlkZW50aXR5O1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm4gaXNBcnJheSh2YWx1ZSlcblx0ICAgICAgPyBiYXNlTWF0Y2hlc1Byb3BlcnR5KHZhbHVlWzBdLCB2YWx1ZVsxXSlcblx0ICAgICAgOiBiYXNlTWF0Y2hlcyh2YWx1ZSk7XG5cdCAgfVxuXHQgIHJldHVybiBwcm9wZXJ0eSh2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUl0ZXJhdGVlO1xuXG5cbi8qKiovIH0sXG4vKiAxMDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZUtleXMgPSBPYmplY3Qua2V5cztcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5rZXlzYCB3aGljaCBkb2Vzbid0IHNraXAgdGhlIGNvbnN0cnVjdG9yXG5cdCAqIHByb3BlcnR5IG9mIHByb3RvdHlwZXMgb3IgdHJlYXQgc3BhcnNlIGFycmF5cyBhcyBkZW5zZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUtleXMob2JqZWN0KSB7XG5cdCAgcmV0dXJuIG5hdGl2ZUtleXMoT2JqZWN0KG9iamVjdCkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VLZXlzO1xuXG5cbi8qKiovIH0sXG4vKiAxMDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlSXNNYXRjaCA9IF9fd2VicGFja19yZXF1aXJlX18oMTAyKSxcblx0ICAgIGdldE1hdGNoRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTE2KSxcblx0ICAgIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc2Agd2hpY2ggZG9lc24ndCBjbG9uZSBgc291cmNlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VNYXRjaGVzKHNvdXJjZSkge1xuXHQgIHZhciBtYXRjaERhdGEgPSBnZXRNYXRjaERhdGEoc291cmNlKTtcblx0ICBpZiAobWF0Y2hEYXRhLmxlbmd0aCA9PSAxICYmIG1hdGNoRGF0YVswXVsyXSkge1xuXHQgICAgcmV0dXJuIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKG1hdGNoRGF0YVswXVswXSwgbWF0Y2hEYXRhWzBdWzFdKTtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgcmV0dXJuIG9iamVjdCA9PT0gc291cmNlIHx8IGJhc2VJc01hdGNoKG9iamVjdCwgc291cmNlLCBtYXRjaERhdGEpO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZU1hdGNoZXM7XG5cblxuLyoqKi8gfSxcbi8qIDEwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VJc0VxdWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyksXG5cdCAgICBnZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MyksXG5cdCAgICBoYXNJbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTU0KSxcblx0ICAgIGlzS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMiksXG5cdCAgICBpc1N0cmljdENvbXBhcmFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKSxcblx0ICAgIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCksXG5cdCAgICB0b0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0LyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG5cdHZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcblx0ICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzUHJvcGVydHlgIHdoaWNoIGRvZXNuJ3QgY2xvbmUgYHNyY1ZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gbWF0Y2guXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlTWF0Y2hlc1Byb3BlcnR5KHBhdGgsIHNyY1ZhbHVlKSB7XG5cdCAgaWYgKGlzS2V5KHBhdGgpICYmIGlzU3RyaWN0Q29tcGFyYWJsZShzcmNWYWx1ZSkpIHtcblx0ICAgIHJldHVybiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSh0b0tleShwYXRoKSwgc3JjVmFsdWUpO1xuXHQgIH1cblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICB2YXIgb2JqVmFsdWUgPSBnZXQob2JqZWN0LCBwYXRoKTtcblx0ICAgIHJldHVybiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBvYmpWYWx1ZSA9PT0gc3JjVmFsdWUpXG5cdCAgICAgID8gaGFzSW4ob2JqZWN0LCBwYXRoKVxuXHQgICAgICA6IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgdW5kZWZpbmVkLCBVTk9SREVSRURfQ09NUEFSRV9GTEFHIHwgUEFSVElBTF9DT01QQVJFX0ZMQUcpO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZU1hdGNoZXNQcm9wZXJ0eTtcblxuXG4vKioqLyB9LFxuLyogMTA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZVByb3BlcnR5YCB3aGljaCBzdXBwb3J0cyBkZWVwIHBhdGhzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlUHJvcGVydHlEZWVwO1xuXG5cbi8qKiovIH0sXG4vKiAxMDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50aW1lc2Agd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzXG5cdCAqIG9yIG1heCBhcnJheSBsZW5ndGggY2hlY2tzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHJlc3VsdHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlVGltZXMobiwgaXRlcmF0ZWUpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgcmVzdWx0ID0gQXJyYXkobik7XG5cdFxuXHQgIHdoaWxlICgrK2luZGV4IDwgbikge1xuXHQgICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlVGltZXM7XG5cblxuLyoqKi8gfSxcbi8qIDExMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFN5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpLFxuXHQgICAgaXNTeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgSU5GSU5JVFkgPSAxIC8gMDtcblx0XG5cdC8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xuXHR2YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuXHQgICAgc3ltYm9sVG9TdHJpbmcgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnRvU3RyaW5nIDogdW5kZWZpbmVkO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRvU3RyaW5nYCB3aGljaCBkb2Vzbid0IGNvbnZlcnQgbnVsbGlzaFxuXHQgKiB2YWx1ZXMgdG8gZW1wdHkgc3RyaW5ncy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG5cdCAgLy8gRXhpdCBlYXJseSBmb3Igc3RyaW5ncyB0byBhdm9pZCBhIHBlcmZvcm1hbmNlIGhpdCBpbiBzb21lIGVudmlyb25tZW50cy5cblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBzeW1ib2xUb1N0cmluZyA/IHN5bWJvbFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSAodmFsdWUgKyAnJyk7XG5cdCAgcmV0dXJuIChyZXN1bHQgPT0gJzAnICYmICgxIC8gdmFsdWUpID09IC1JTkZJTklUWSkgPyAnLTAnIDogcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VUb1N0cmluZztcblxuXG4vKioqLyB9LFxuLyogMTExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBnbG9iYWwgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge251bGx8T2JqZWN0fSBSZXR1cm5zIGB2YWx1ZWAgaWYgaXQncyBhIGdsb2JhbCBvYmplY3QsIGVsc2UgYG51bGxgLlxuXHQgKi9cblx0ZnVuY3Rpb24gY2hlY2tHbG9iYWwodmFsdWUpIHtcblx0ICByZXR1cm4gKHZhbHVlICYmIHZhbHVlLk9iamVjdCA9PT0gT2JqZWN0KSA/IHZhbHVlIDogbnVsbDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBjaGVja0dsb2JhbDtcblxuXG4vKioqLyB9LFxuLyogMTEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3Qgb3ZlcnJlYWNoaW5nIGNvcmUtanMgc2hpbXMuICovXG5cdHZhciBjb3JlSnNEYXRhID0gcm9vdFsnX19jb3JlLWpzX3NoYXJlZF9fJ107XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGNvcmVKc0RhdGE7XG5cblxuLyoqKi8gfSxcbi8qIDExMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFN5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpLFxuXHQgICAgVWludDhBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oOTQpLFxuXHQgICAgZXF1YWxBcnJheXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSxcblx0ICAgIG1hcFRvQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MCksXG5cdCAgICBzZXRUb0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDMpO1xuXHRcblx0LyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG5cdHZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcblx0ICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG5cdCAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuXHQgICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuXHQgICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG5cdCAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcblx0ICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuXHQgICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG5cdCAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcblx0ICAgIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXHRcblx0dmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcblx0ICAgIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJztcblx0XG5cdC8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xuXHR2YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuXHQgICAgc3ltYm9sVmFsdWVPZiA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udmFsdWVPZiA6IHVuZGVmaW5lZDtcblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGNvbXBhcmluZyBvYmplY3RzIG9mXG5cdCAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY29tcGFyaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2Zcblx0ICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuXHQgKiAgZm9yIG1vcmUgZGV0YWlscy5cblx0ICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZywgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuXHQgIHN3aXRjaCAodGFnKSB7XG5cdCAgICBjYXNlIGRhdGFWaWV3VGFnOlxuXHQgICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG5cdCAgICAgICAgICAob2JqZWN0LmJ5dGVPZmZzZXQgIT0gb3RoZXIuYnl0ZU9mZnNldCkpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgb2JqZWN0ID0gb2JqZWN0LmJ1ZmZlcjtcblx0ICAgICAgb3RoZXIgPSBvdGhlci5idWZmZXI7XG5cdFxuXHQgICAgY2FzZSBhcnJheUJ1ZmZlclRhZzpcblx0ICAgICAgaWYgKChvYmplY3QuYnl0ZUxlbmd0aCAhPSBvdGhlci5ieXRlTGVuZ3RoKSB8fFxuXHQgICAgICAgICAgIWVxdWFsRnVuYyhuZXcgVWludDhBcnJheShvYmplY3QpLCBuZXcgVWludDhBcnJheShvdGhlcikpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHRcblx0ICAgIGNhc2UgYm9vbFRhZzpcblx0ICAgIGNhc2UgZGF0ZVRhZzpcblx0ICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1iZXJzLCBkYXRlcyB0byBtaWxsaXNlY29uZHMgYW5kXG5cdCAgICAgIC8vIGJvb2xlYW5zIHRvIGAxYCBvciBgMGAgdHJlYXRpbmcgaW52YWxpZCBkYXRlcyBjb2VyY2VkIHRvIGBOYU5gIGFzXG5cdCAgICAgIC8vIG5vdCBlcXVhbC5cblx0ICAgICAgcmV0dXJuICtvYmplY3QgPT0gK290aGVyO1xuXHRcblx0ICAgIGNhc2UgZXJyb3JUYWc6XG5cdCAgICAgIHJldHVybiBvYmplY3QubmFtZSA9PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09IG90aGVyLm1lc3NhZ2U7XG5cdFxuXHQgICAgY2FzZSBudW1iZXJUYWc6XG5cdCAgICAgIC8vIFRyZWF0IGBOYU5gIHZzLiBgTmFOYCBhcyBlcXVhbC5cblx0ICAgICAgcmV0dXJuIChvYmplY3QgIT0gK29iamVjdCkgPyBvdGhlciAhPSArb3RoZXIgOiBvYmplY3QgPT0gK290aGVyO1xuXHRcblx0ICAgIGNhc2UgcmVnZXhwVGFnOlxuXHQgICAgY2FzZSBzdHJpbmdUYWc6XG5cdCAgICAgIC8vIENvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgYW5kIHRyZWF0IHN0cmluZ3MsIHByaW1pdGl2ZXMgYW5kIG9iamVjdHMsXG5cdCAgICAgIC8vIGFzIGVxdWFsLiBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXJlZ2V4cC5wcm90b3R5cGUudG9zdHJpbmdcblx0ICAgICAgLy8gZm9yIG1vcmUgZGV0YWlscy5cblx0ICAgICAgcmV0dXJuIG9iamVjdCA9PSAob3RoZXIgKyAnJyk7XG5cdFxuXHQgICAgY2FzZSBtYXBUYWc6XG5cdCAgICAgIHZhciBjb252ZXJ0ID0gbWFwVG9BcnJheTtcblx0XG5cdCAgICBjYXNlIHNldFRhZzpcblx0ICAgICAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRztcblx0ICAgICAgY29udmVydCB8fCAoY29udmVydCA9IHNldFRvQXJyYXkpO1xuXHRcblx0ICAgICAgaWYgKG9iamVjdC5zaXplICE9IG90aGVyLnNpemUgJiYgIWlzUGFydGlhbCkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG5cdCAgICAgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG5cdCAgICAgIGlmIChzdGFja2VkKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG5cdCAgICAgIH1cblx0ICAgICAgYml0bWFzayB8PSBVTk9SREVSRURfQ09NUEFSRV9GTEFHO1xuXHQgICAgICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG5cdFxuXHQgICAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cblx0ICAgICAgcmV0dXJuIGVxdWFsQXJyYXlzKGNvbnZlcnQob2JqZWN0KSwgY29udmVydChvdGhlciksIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXHRcblx0ICAgIGNhc2Ugc3ltYm9sVGFnOlxuXHQgICAgICBpZiAoc3ltYm9sVmFsdWVPZikge1xuXHQgICAgICAgIHJldHVybiBzeW1ib2xWYWx1ZU9mLmNhbGwob2JqZWN0KSA9PSBzeW1ib2xWYWx1ZU9mLmNhbGwob3RoZXIpO1xuXHQgICAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBlcXVhbEJ5VGFnO1xuXG5cbi8qKiovIH0sXG4vKiAxMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlSGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNiksXG5cdCAgICBrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHQvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cblx0dmFyIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuXHQgKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcblx0ICogIGZvciBtb3JlIGRldGFpbHMuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0ICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHLFxuXHQgICAgICBvYmpQcm9wcyA9IGtleXMob2JqZWN0KSxcblx0ICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuXHQgICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuXHQgICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cdFxuXHQgIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc1BhcnRpYWwpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIGluZGV4ID0gb2JqTGVuZ3RoO1xuXHQgIHdoaWxlIChpbmRleC0tKSB7XG5cdCAgICB2YXIga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuXHQgICAgaWYgKCEoaXNQYXJ0aWFsID8ga2V5IGluIG90aGVyIDogYmFzZUhhcyhvdGhlciwga2V5KSkpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG5cdCAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQob2JqZWN0KTtcblx0ICBpZiAoc3RhY2tlZCkge1xuXHQgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSB0cnVlO1xuXHQgIHN0YWNrLnNldChvYmplY3QsIG90aGVyKTtcblx0XG5cdCAgdmFyIHNraXBDdG9yID0gaXNQYXJ0aWFsO1xuXHQgIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG5cdCAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG5cdCAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcblx0ICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV07XG5cdFxuXHQgICAgaWYgKGN1c3RvbWl6ZXIpIHtcblx0ICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsXG5cdCAgICAgICAgPyBjdXN0b21pemVyKG90aFZhbHVlLCBvYmpWYWx1ZSwga2V5LCBvdGhlciwgb2JqZWN0LCBzdGFjaylcblx0ICAgICAgICA6IGN1c3RvbWl6ZXIob2JqVmFsdWUsIG90aFZhbHVlLCBrZXksIG9iamVjdCwgb3RoZXIsIHN0YWNrKTtcblx0ICAgIH1cblx0ICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuXHQgICAgaWYgKCEoY29tcGFyZWQgPT09IHVuZGVmaW5lZFxuXHQgICAgICAgICAgPyAob2JqVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSlcblx0ICAgICAgICAgIDogY29tcGFyZWRcblx0ICAgICAgICApKSB7XG5cdCAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICAgIHNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PSAnY29uc3RydWN0b3InKTtcblx0ICB9XG5cdCAgaWYgKHJlc3VsdCAmJiAhc2tpcEN0b3IpIHtcblx0ICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuXHQgICAgICAgIG90aEN0b3IgPSBvdGhlci5jb25zdHJ1Y3Rvcjtcblx0XG5cdCAgICAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC5cblx0ICAgIGlmIChvYmpDdG9yICE9IG90aEN0b3IgJiZcblx0ICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlcikgJiZcblx0ICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcblx0ICAgICAgICAgIHR5cGVvZiBvdGhDdG9yID09ICdmdW5jdGlvbicgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKSB7XG5cdCAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICBzdGFja1snZGVsZXRlJ10ob2JqZWN0KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGVxdWFsT2JqZWN0cztcblxuXG4vKioqLyB9LFxuLyogMTE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhXG5cdCAqIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKSB0aGF0IGFmZmVjdHNcblx0ICogU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuXHQgKi9cblx0dmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldExlbmd0aDtcblxuXG4vKioqLyB9LFxuLyogMTE2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNTdHJpY3RDb21wYXJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyksXG5cdCAgICBrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgcHJvcGVydHkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3Mgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBtYXRjaCBkYXRhIG9mIGBvYmplY3RgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TWF0Y2hEYXRhKG9iamVjdCkge1xuXHQgIHZhciByZXN1bHQgPSBrZXlzKG9iamVjdCksXG5cdCAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cdFxuXHQgIHdoaWxlIChsZW5ndGgtLSkge1xuXHQgICAgdmFyIGtleSA9IHJlc3VsdFtsZW5ndGhdLFxuXHQgICAgICAgIHZhbHVlID0gb2JqZWN0W2tleV07XG5cdFxuXHQgICAgcmVzdWx0W2xlbmd0aF0gPSBba2V5LCB2YWx1ZSwgaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKV07XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0TWF0Y2hEYXRhO1xuXG5cbi8qKiovIH0sXG4vKiAxMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZUdldFByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBgW1tQcm90b3R5cGVdXWAgb2YgYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyB0aGUgYFtbUHJvdG90eXBlXV1gLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UHJvdG90eXBlKHZhbHVlKSB7XG5cdCAgcmV0dXJuIG5hdGl2ZUdldFByb3RvdHlwZShPYmplY3QodmFsdWUpKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRQcm90b3R5cGU7XG5cblxuLyoqKi8gfSxcbi8qIDExOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIERhdGFWaWV3ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4OSksXG5cdCAgICBNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKSxcblx0ICAgIFByb21pc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkxKSxcblx0ICAgIFNldCA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpLFxuXHQgICAgV2Vha01hcCA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpLFxuXHQgICAgdG9Tb3VyY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuXHQgICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG5cdCAgICBwcm9taXNlVGFnID0gJ1tvYmplY3QgUHJvbWlzZV0nLFxuXHQgICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG5cdCAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXHRcblx0dmFyIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBtYXBzLCBzZXRzLCBhbmQgd2Vha21hcHMuICovXG5cdHZhciBkYXRhVmlld0N0b3JTdHJpbmcgPSB0b1NvdXJjZShEYXRhVmlldyksXG5cdCAgICBtYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoTWFwKSxcblx0ICAgIHByb21pc2VDdG9yU3RyaW5nID0gdG9Tb3VyY2UoUHJvbWlzZSksXG5cdCAgICBzZXRDdG9yU3RyaW5nID0gdG9Tb3VyY2UoU2V0KSxcblx0ICAgIHdlYWtNYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoV2Vha01hcCk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgYHRvU3RyaW5nVGFnYCBvZiBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cblx0ICovXG5cdGZ1bmN0aW9uIGdldFRhZyh2YWx1ZSkge1xuXHQgIHJldHVybiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcblx0fVxuXHRcblx0Ly8gRmFsbGJhY2sgZm9yIGRhdGEgdmlld3MsIG1hcHMsIHNldHMsIGFuZCB3ZWFrIG1hcHMgaW4gSUUgMTEsXG5cdC8vIGZvciBkYXRhIHZpZXdzIGluIEVkZ2UsIGFuZCBwcm9taXNlcyBpbiBOb2RlLmpzLlxuXHRpZiAoKERhdGFWaWV3ICYmIGdldFRhZyhuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpKSkgIT0gZGF0YVZpZXdUYWcpIHx8XG5cdCAgICAoTWFwICYmIGdldFRhZyhuZXcgTWFwKSAhPSBtYXBUYWcpIHx8XG5cdCAgICAoUHJvbWlzZSAmJiBnZXRUYWcoUHJvbWlzZS5yZXNvbHZlKCkpICE9IHByb21pc2VUYWcpIHx8XG5cdCAgICAoU2V0ICYmIGdldFRhZyhuZXcgU2V0KSAhPSBzZXRUYWcpIHx8XG5cdCAgICAoV2Vha01hcCAmJiBnZXRUYWcobmV3IFdlYWtNYXApICE9IHdlYWtNYXBUYWcpKSB7XG5cdCAgZ2V0VGFnID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgIHZhciByZXN1bHQgPSBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSxcblx0ICAgICAgICBDdG9yID0gcmVzdWx0ID09IG9iamVjdFRhZyA/IHZhbHVlLmNvbnN0cnVjdG9yIDogdW5kZWZpbmVkLFxuXHQgICAgICAgIGN0b3JTdHJpbmcgPSBDdG9yID8gdG9Tb3VyY2UoQ3RvcikgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgaWYgKGN0b3JTdHJpbmcpIHtcblx0ICAgICAgc3dpdGNoIChjdG9yU3RyaW5nKSB7XG5cdCAgICAgICAgY2FzZSBkYXRhVmlld0N0b3JTdHJpbmc6IHJldHVybiBkYXRhVmlld1RhZztcblx0ICAgICAgICBjYXNlIG1hcEN0b3JTdHJpbmc6IHJldHVybiBtYXBUYWc7XG5cdCAgICAgICAgY2FzZSBwcm9taXNlQ3RvclN0cmluZzogcmV0dXJuIHByb21pc2VUYWc7XG5cdCAgICAgICAgY2FzZSBzZXRDdG9yU3RyaW5nOiByZXR1cm4gc2V0VGFnO1xuXHQgICAgICAgIGNhc2Ugd2Vha01hcEN0b3JTdHJpbmc6IHJldHVybiB3ZWFrTWFwVGFnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0VGFnO1xuXG5cbi8qKiovIH0sXG4vKiAxMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSB2YWx1ZSBhdCBga2V5YCBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRWYWx1ZShvYmplY3QsIGtleSkge1xuXHQgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldFZhbHVlO1xuXG5cbi8qKiovIH0sXG4vKiAxMjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBjYXN0UGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpLFxuXHQgICAgaXNBcmd1bWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KSxcblx0ICAgIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNJbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpLFxuXHQgICAgaXNLZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKSxcblx0ICAgIGlzTGVuZ3RoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSksXG5cdCAgICBpc1N0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpLFxuXHQgICAgdG9LZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHBhdGhgIGV4aXN0cyBvbiBgb2JqZWN0YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaGFzRnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgcHJvcGVydGllcy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGhhc1BhdGgob2JqZWN0LCBwYXRoLCBoYXNGdW5jKSB7XG5cdCAgcGF0aCA9IGlzS2V5KHBhdGgsIG9iamVjdCkgPyBbcGF0aF0gOiBjYXN0UGF0aChwYXRoKTtcblx0XG5cdCAgdmFyIHJlc3VsdCxcblx0ICAgICAgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGg7XG5cdFxuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICB2YXIga2V5ID0gdG9LZXkocGF0aFtpbmRleF0pO1xuXHQgICAgaWYgKCEocmVzdWx0ID0gb2JqZWN0ICE9IG51bGwgJiYgaGFzRnVuYyhvYmplY3QsIGtleSkpKSB7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgb2JqZWN0ID0gb2JqZWN0W2tleV07XG5cdCAgfVxuXHQgIGlmIChyZXN1bHQpIHtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHQgIHZhciBsZW5ndGggPSBvYmplY3QgPyBvYmplY3QubGVuZ3RoIDogMDtcblx0ICByZXR1cm4gISFsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSAmJlxuXHQgICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc1N0cmluZyhvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc1BhdGg7XG5cblxuLyoqKi8gfSxcbi8qIDEyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG5hdGl2ZUNyZWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGhhc2guXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGNsZWFyXG5cdCAqIEBtZW1iZXJPZiBIYXNoXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoQ2xlYXIoKSB7XG5cdCAgdGhpcy5fX2RhdGFfXyA9IG5hdGl2ZUNyZWF0ZSA/IG5hdGl2ZUNyZWF0ZShudWxsKSA6IHt9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc2hDbGVhcjtcblxuXG4vKioqLyB9LFxuLyogMTIyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGhhc2guXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGRlbGV0ZVxuXHQgKiBAbWVtYmVyT2YgSGFzaFxuXHQgKiBAcGFyYW0ge09iamVjdH0gaGFzaCBUaGUgaGFzaCB0byBtb2RpZnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoRGVsZXRlKGtleSkge1xuXHQgIHJldHVybiB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzaERlbGV0ZTtcblxuXG4vKioqLyB9LFxuLyogMTIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbmF0aXZlQ3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG5cdHZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBoYXNoIHZhbHVlIGZvciBga2V5YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZ2V0XG5cdCAqIEBtZW1iZXJPZiBIYXNoXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoR2V0KGtleSkge1xuXHQgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcblx0ICBpZiAobmF0aXZlQ3JlYXRlKSB7XG5cdCAgICB2YXIgcmVzdWx0ID0gZGF0YVtrZXldO1xuXHQgICAgcmV0dXJuIHJlc3VsdCA9PT0gSEFTSF9VTkRFRklORUQgPyB1bmRlZmluZWQgOiByZXN1bHQ7XG5cdCAgfVxuXHQgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSkgPyBkYXRhW2tleV0gOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzaEdldDtcblxuXG4vKioqLyB9LFxuLyogMTI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbmF0aXZlQ3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGEgaGFzaCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBoYXNcblx0ICogQG1lbWJlck9mIEhhc2hcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGhhc2hIYXMoa2V5KSB7XG5cdCAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuXHQgIHJldHVybiBuYXRpdmVDcmVhdGUgPyBkYXRhW2tleV0gIT09IHVuZGVmaW5lZCA6IGhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBoYXNoSGFzO1xuXG5cbi8qKiovIH0sXG4vKiAxMjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBuYXRpdmVDcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdC8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cblx0dmFyIEhBU0hfVU5ERUZJTkVEID0gJ19fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18nO1xuXHRcblx0LyoqXG5cdCAqIFNldHMgdGhlIGhhc2ggYGtleWAgdG8gYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgc2V0XG5cdCAqIEBtZW1iZXJPZiBIYXNoXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGhhc2ggaW5zdGFuY2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoU2V0KGtleSwgdmFsdWUpIHtcblx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG5cdCAgZGF0YVtrZXldID0gKG5hdGl2ZUNyZWF0ZSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSA/IEhBU0hfVU5ERUZJTkVEIDogdmFsdWU7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzaFNldDtcblxuXG4vKioqLyB9LFxuLyogMTI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZVRpbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDkpLFxuXHQgICAgaXNBcmd1bWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KSxcblx0ICAgIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNMZW5ndGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KSxcblx0ICAgIGlzU3RyaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBvZiBpbmRleCBrZXlzIGZvciBgb2JqZWN0YCB2YWx1ZXMgb2YgYXJyYXlzLFxuXHQgKiBgYXJndW1lbnRzYCBvYmplY3RzLCBhbmQgc3RyaW5ncywgb3RoZXJ3aXNlIGBudWxsYCBpcyByZXR1cm5lZC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl8bnVsbH0gUmV0dXJucyBpbmRleCBrZXlzLCBlbHNlIGBudWxsYC5cblx0ICovXG5cdGZ1bmN0aW9uIGluZGV4S2V5cyhvYmplY3QpIHtcblx0ICB2YXIgbGVuZ3RoID0gb2JqZWN0ID8gb2JqZWN0Lmxlbmd0aCA6IHVuZGVmaW5lZDtcblx0ICBpZiAoaXNMZW5ndGgobGVuZ3RoKSAmJlxuXHQgICAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzU3RyaW5nKG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSkpIHtcblx0ICAgIHJldHVybiBiYXNlVGltZXMobGVuZ3RoLCBTdHJpbmcpO1xuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpbmRleEtleXM7XG5cblxuLyoqKi8gfSxcbi8qIDEyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgdW5pcXVlIG9iamVjdCBrZXkuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNLZXlhYmxlKHZhbHVlKSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICh0eXBlID09ICdzdHJpbmcnIHx8IHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJylcblx0ICAgID8gKHZhbHVlICE9PSAnX19wcm90b19fJylcblx0ICAgIDogKHZhbHVlID09PSBudWxsKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0tleWFibGU7XG5cblxuLyoqKi8gfSxcbi8qIDEyOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNvcmVKc0RhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMik7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgbWV0aG9kcyBtYXNxdWVyYWRpbmcgYXMgbmF0aXZlLiAqL1xuXHR2YXIgbWFza1NyY0tleSA9IChmdW5jdGlvbigpIHtcblx0ICB2YXIgdWlkID0gL1teLl0rJC8uZXhlYyhjb3JlSnNEYXRhICYmIGNvcmVKc0RhdGEua2V5cyAmJiBjb3JlSnNEYXRhLmtleXMuSUVfUFJPVE8gfHwgJycpO1xuXHQgIHJldHVybiB1aWQgPyAoJ1N5bWJvbChzcmMpXzEuJyArIHVpZCkgOiAnJztcblx0fSgpKTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYGZ1bmNgIGhhcyBpdHMgc291cmNlIG1hc2tlZC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaXMgbWFza2VkLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc01hc2tlZChmdW5jKSB7XG5cdCAgcmV0dXJuICEhbWFza1NyY0tleSAmJiAobWFza1NyY0tleSBpbiBmdW5jKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc01hc2tlZDtcblxuXG4vKioqLyB9LFxuLyogMTI5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGEgcHJvdG90eXBlIG9iamVjdC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1Byb3RvdHlwZSh2YWx1ZSkge1xuXHQgIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG5cdCAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvO1xuXHRcblx0ICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzUHJvdG90eXBlO1xuXG5cbi8qKiovIH0sXG4vKiAxMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBjbGVhclxuXHQgKiBAbWVtYmVyT2YgTGlzdENhY2hlXG5cdCAqL1xuXHRmdW5jdGlvbiBsaXN0Q2FjaGVDbGVhcigpIHtcblx0ICB0aGlzLl9fZGF0YV9fID0gW107XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlQ2xlYXI7XG5cblxuLyoqKi8gfSxcbi8qIDEzMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFzc29jSW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcblx0XG5cdC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xuXHR2YXIgc3BsaWNlID0gYXJyYXlQcm90by5zcGxpY2U7XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGxpc3QgY2FjaGUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGRlbGV0ZVxuXHQgKiBAbWVtYmVyT2YgTGlzdENhY2hlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBsaXN0Q2FjaGVEZWxldGUoa2V5KSB7XG5cdCAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuXHQgICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXHRcblx0ICBpZiAoaW5kZXggPCAwKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciBsYXN0SW5kZXggPSBkYXRhLmxlbmd0aCAtIDE7XG5cdCAgaWYgKGluZGV4ID09IGxhc3RJbmRleCkge1xuXHQgICAgZGF0YS5wb3AoKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgc3BsaWNlLmNhbGwoZGF0YSwgaW5kZXgsIDEpO1xuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVEZWxldGU7XG5cblxuLyoqKi8gfSxcbi8qIDEzMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFzc29jSW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIGxpc3QgY2FjaGUgdmFsdWUgZm9yIGBrZXlgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBnZXRcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlR2V0KGtleSkge1xuXHQgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcblx0ICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblx0XG5cdCAgcmV0dXJuIGluZGV4IDwgMCA/IHVuZGVmaW5lZCA6IGRhdGFbaW5kZXhdWzFdO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUdldDtcblxuXG4vKioqLyB9LFxuLyogMTMzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYXNzb2NJbmRleE9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGEgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBoYXNcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlSGFzKGtleSkge1xuXHQgIHJldHVybiBhc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUhhcztcblxuXG4vKioqLyB9LFxuLyogMTM0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYXNzb2NJbmRleE9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHQvKipcblx0ICogU2V0cyB0aGUgbGlzdCBjYWNoZSBga2V5YCB0byBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBzZXRcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBsaXN0IGNhY2hlIGluc3RhbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlU2V0KGtleSwgdmFsdWUpIHtcblx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG5cdCAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cdFxuXHQgIGlmIChpbmRleCA8IDApIHtcblx0ICAgIGRhdGEucHVzaChba2V5LCB2YWx1ZV0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBkYXRhW2luZGV4XVsxXSA9IHZhbHVlO1xuXHQgIH1cblx0ICByZXR1cm4gdGhpcztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVTZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIEhhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkwKSxcblx0ICAgIExpc3RDYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oOSksXG5cdCAgICBNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBtYXAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGNsZWFyXG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2FjaGVDbGVhcigpIHtcblx0ICB0aGlzLl9fZGF0YV9fID0ge1xuXHQgICAgJ2hhc2gnOiBuZXcgSGFzaCxcblx0ICAgICdtYXAnOiBuZXcgKE1hcCB8fCBMaXN0Q2FjaGUpLFxuXHQgICAgJ3N0cmluZyc6IG5ldyBIYXNoXG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUNsZWFyO1xuXG5cbi8qKiovIH0sXG4vKiAxMzYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXRNYXBEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIG1hcC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZGVsZXRlXG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2FjaGVEZWxldGUoa2V5KSB7XG5cdCAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KVsnZGVsZXRlJ10oa2V5KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZURlbGV0ZTtcblxuXG4vKioqLyB9LFxuLyogMTM3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TWFwRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIG1hcCB2YWx1ZSBmb3IgYGtleWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGdldFxuXHQgKiBAbWVtYmVyT2YgTWFwQ2FjaGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkge1xuXHQgIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSkuZ2V0KGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVHZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE1hcERhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYSBtYXAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgaGFzXG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2FjaGVIYXMoa2V5KSB7XG5cdCAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5oYXMoa2V5KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUhhcztcblxuXG4vKioqLyB9LFxuLyogMTM5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TWFwRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0LyoqXG5cdCAqIFNldHMgdGhlIG1hcCBga2V5YCB0byBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBzZXRcblx0ICogQG1lbWJlck9mIE1hcENhY2hlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG1hcCBjYWNoZSBpbnN0YW5jZS5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcENhY2hlU2V0KGtleSwgdmFsdWUpIHtcblx0ICBnZXRNYXBEYXRhKHRoaXMsIGtleSkuc2V0KGtleSwgdmFsdWUpO1xuXHQgIHJldHVybiB0aGlzO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlU2V0O1xuXG5cbi8qKiovIH0sXG4vKiAxNDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgbWFwYCB0byBpdHMga2V5LXZhbHVlIHBhaXJzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gY29udmVydC5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBrZXktdmFsdWUgcGFpcnMuXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBUb0FycmF5KG1hcCkge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICByZXN1bHQgPSBBcnJheShtYXAuc2l6ZSk7XG5cdFxuXHQgIG1hcC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcblx0ICAgIHJlc3VsdFsrK2luZGV4XSA9IFtrZXksIHZhbHVlXTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1hcFRvQXJyYXk7XG5cblxuLyoqKi8gfSxcbi8qIDE0MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xuXHR2YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cdFxuXHQvKipcblx0ICogQWRkcyBgdmFsdWVgIHRvIHRoZSBhcnJheSBjYWNoZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgYWRkXG5cdCAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuXHQgKiBAYWxpYXMgcHVzaFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjYWNoZS5cblx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2FjaGUgaW5zdGFuY2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRDYWNoZUFkZCh2YWx1ZSkge1xuXHQgIHRoaXMuX19kYXRhX18uc2V0KHZhbHVlLCBIQVNIX1VOREVGSU5FRCk7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2V0Q2FjaGVBZGQ7XG5cblxuLyoqKi8gfSxcbi8qIDE0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIHRoZSBhcnJheSBjYWNoZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgaGFzXG5cdCAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRDYWNoZUhhcyh2YWx1ZSkge1xuXHQgIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2V0Q2FjaGVIYXM7XG5cblxuLyoqKi8gfSxcbi8qIDE0MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGBzZXRgIHRvIGFuIGFycmF5IG9mIGl0cyB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzZXQgVGhlIHNldCB0byBjb252ZXJ0LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHZhbHVlcy5cblx0ICovXG5cdGZ1bmN0aW9uIHNldFRvQXJyYXkoc2V0KSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIHJlc3VsdCA9IEFycmF5KHNldC5zaXplKTtcblx0XG5cdCAgc2V0LmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgIHJlc3VsdFsrK2luZGV4XSA9IHZhbHVlO1xuXHQgIH0pO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2V0VG9BcnJheTtcblxuXG4vKioqLyB9LFxuLyogMTQ0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTGlzdENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBzdGFjay5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgY2xlYXJcblx0ICogQG1lbWJlck9mIFN0YWNrXG5cdCAqL1xuXHRmdW5jdGlvbiBzdGFja0NsZWFyKCkge1xuXHQgIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHN0YWNrQ2xlYXI7XG5cblxuLyoqKi8gfSxcbi8qIDE0NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBzdGFjay5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZGVsZXRlXG5cdCAqIEBtZW1iZXJPZiBTdGFja1xuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tEZWxldGUoa2V5KSB7XG5cdCAgcmV0dXJuIHRoaXMuX19kYXRhX19bJ2RlbGV0ZSddKGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RhY2tEZWxldGU7XG5cblxuLyoqKi8gfSxcbi8qIDE0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIHN0YWNrIHZhbHVlIGZvciBga2V5YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZ2V0XG5cdCAqIEBtZW1iZXJPZiBTdGFja1xuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tHZXQoa2V5KSB7XG5cdCAgcmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RhY2tHZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDE0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBhIHN0YWNrIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGhhc1xuXHQgKiBAbWVtYmVyT2YgU3RhY2tcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIHN0YWNrSGFzKGtleSkge1xuXHQgIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyhrZXkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHN0YWNrSGFzO1xuXG5cbi8qKiovIH0sXG4vKiAxNDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBMaXN0Q2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLFxuXHQgICAgTWFwQ2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBzaXplIHRvIGVuYWJsZSBsYXJnZSBhcnJheSBvcHRpbWl6YXRpb25zLiAqL1xuXHR2YXIgTEFSR0VfQVJSQVlfU0laRSA9IDIwMDtcblx0XG5cdC8qKlxuXHQgKiBTZXRzIHRoZSBzdGFjayBga2V5YCB0byBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBzZXRcblx0ICogQG1lbWJlck9mIFN0YWNrXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHN0YWNrIGNhY2hlIGluc3RhbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tTZXQoa2V5LCB2YWx1ZSkge1xuXHQgIHZhciBjYWNoZSA9IHRoaXMuX19kYXRhX187XG5cdCAgaWYgKGNhY2hlIGluc3RhbmNlb2YgTGlzdENhY2hlICYmIGNhY2hlLl9fZGF0YV9fLmxlbmd0aCA9PSBMQVJHRV9BUlJBWV9TSVpFKSB7XG5cdCAgICBjYWNoZSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGUoY2FjaGUuX19kYXRhX18pO1xuXHQgIH1cblx0ICBjYWNoZS5zZXQoa2V5LCB2YWx1ZSk7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RhY2tTZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDE0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG1lbW9pemUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1OCksXG5cdCAgICB0b1N0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYzKTtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxcXF18XFxcXC4pKj8pXFwyKVxcXXwoPz0oXFwufFxcW1xcXSkoPzpcXDR8JCkpL2c7XG5cdFxuXHQvKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlRXNjYXBlQ2hhciA9IC9cXFxcKFxcXFwpPy9nO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIGEgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICovXG5cdHZhciBzdHJpbmdUb1BhdGggPSBtZW1vaXplKGZ1bmN0aW9uKHN0cmluZykge1xuXHQgIHZhciByZXN1bHQgPSBbXTtcblx0ICB0b1N0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuXHQgICAgcmVzdWx0LnB1c2gocXVvdGUgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZUNoYXIsICckMScpIDogKG51bWJlciB8fCBtYXRjaCkpO1xuXHQgIH0pO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBzdHJpbmdUb1BhdGg7XG5cblxuLyoqKi8gfSxcbi8qIDE1MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KSxcblx0ICAgIG5vdyA9IF9fd2VicGFja19yZXF1aXJlX18oMTU5KSxcblx0ICAgIHRvTnVtYmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdFxuXHQvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xuXHR2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG5cdCAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcblx0ICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG5cdCAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcblx0ICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG5cdCAqIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb25cblx0ICogdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcblx0ICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudCBjYWxsc1xuXHQgKiB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzIGludm9rZWRcblx0ICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIGlzXG5cdCAqIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cblx0ICpcblx0ICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG5cdCAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBGdW5jdGlvblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cblx0ICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG5cdCAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG5cdCAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG5cdCAqXG5cdCAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuXHQgKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG5cdCAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuXHQgKiAgICd0cmFpbGluZyc6IGZhbHNlXG5cdCAqIH0pKTtcblx0ICpcblx0ICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cblx0ICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG5cdCAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcblx0ICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuXHQgKlxuXHQgKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcblx0ICovXG5cdGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcblx0ICB2YXIgbGFzdEFyZ3MsXG5cdCAgICAgIGxhc3RUaGlzLFxuXHQgICAgICBtYXhXYWl0LFxuXHQgICAgICByZXN1bHQsXG5cdCAgICAgIHRpbWVySWQsXG5cdCAgICAgIGxhc3RDYWxsVGltZSxcblx0ICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuXHQgICAgICBsZWFkaW5nID0gZmFsc2UsXG5cdCAgICAgIG1heGluZyA9IGZhbHNlLFxuXHQgICAgICB0cmFpbGluZyA9IHRydWU7XG5cdFxuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuXHQgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuXHQgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuXHQgICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG5cdCAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuXHQgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuXHQgICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcblx0ICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuXHQgICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG5cdCAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG5cdCAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcblx0ICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcblx0ICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cdFxuXHQgICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cdFxuXHQgICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcblx0ICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG5cdCAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG5cdCAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuXHQgICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuXHQgICAgdmFyIHRpbWUgPSBub3coKTtcblx0ICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcblx0ICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcblx0ICAgIH1cblx0ICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuXHQgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG5cdCAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXHRcblx0ICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cblx0ICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuXHQgICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG5cdCAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuXHQgICAgfVxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjYW5jZWwoKSB7XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IDA7XG5cdCAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG5cdCAgICB2YXIgdGltZSA9IG5vdygpLFxuXHQgICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICBsYXN0VGhpcyA9IHRoaXM7XG5cdCAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXHRcblx0ICAgIGlmIChpc0ludm9raW5nKSB7XG5cdCAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAobWF4aW5nKSB7XG5cdCAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cblx0ICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHQgIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG5cdCAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG5cdCAgcmV0dXJuIGRlYm91bmNlZDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblxuXG4vKioqLyB9LFxuLyogMTUxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogUGVyZm9ybXMgYVxuXHQgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuXHQgKiBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmUgZXF1aXZhbGVudC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcblx0ICogdmFyIG90aGVyID0geyAndXNlcic6ICdmcmVkJyB9O1xuXHQgKlxuXHQgKiBfLmVxKG9iamVjdCwgb2JqZWN0KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmVxKG9iamVjdCwgb3RoZXIpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmVxKCdhJywgJ2EnKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmVxKCdhJywgT2JqZWN0KCdhJykpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmVxKE5hTiwgTmFOKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKi9cblx0ZnVuY3Rpb24gZXEodmFsdWUsIG90aGVyKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXE7XG5cblxuLyoqKi8gfSxcbi8qIDE1MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VGaW5kSW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KSxcblx0ICAgIGJhc2VJdGVyYXRlZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTA0KSxcblx0ICAgIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXg7XG5cdFxuXHQvKipcblx0ICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kYCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3Rcblx0ICogZWxlbWVudCBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBpdHNlbGYuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDEuMS4wXG5cdCAqIEBjYXRlZ29yeSBBcnJheVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuXHQgKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV1cblx0ICogIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYC0xYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIHVzZXJzID0gW1xuXHQgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiBmYWxzZSB9LFxuXHQgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhY3RpdmUnOiBmYWxzZSB9LFxuXHQgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiB0cnVlIH1cblx0ICogXTtcblx0ICpcblx0ICogXy5maW5kSW5kZXgodXNlcnMsIGZ1bmN0aW9uKG8pIHsgcmV0dXJuIG8udXNlciA9PSAnYmFybmV5JzsgfSk7XG5cdCAqIC8vID0+IDBcblx0ICpcblx0ICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cblx0ICogXy5maW5kSW5kZXgodXNlcnMsIHsgJ3VzZXInOiAnZnJlZCcsICdhY3RpdmUnOiBmYWxzZSB9KTtcblx0ICogLy8gPT4gMVxuXHQgKlxuXHQgKiAvLyBUaGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG5cdCAqIF8uZmluZEluZGV4KHVzZXJzLCBbJ2FjdGl2ZScsIGZhbHNlXSk7XG5cdCAqIC8vID0+IDBcblx0ICpcblx0ICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG5cdCAqIF8uZmluZEluZGV4KHVzZXJzLCAnYWN0aXZlJyk7XG5cdCAqIC8vID0+IDJcblx0ICovXG5cdGZ1bmN0aW9uIGZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlLCBmcm9tSW5kZXgpIHtcblx0ICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXHQgIGlmICghbGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gLTE7XG5cdCAgfVxuXHQgIHZhciBpbmRleCA9IGZyb21JbmRleCA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihmcm9tSW5kZXgpO1xuXHQgIGlmIChpbmRleCA8IDApIHtcblx0ICAgIGluZGV4ID0gbmF0aXZlTWF4KGxlbmd0aCArIGluZGV4LCAwKTtcblx0ICB9XG5cdCAgcmV0dXJuIGJhc2VGaW5kSW5kZXgoYXJyYXksIGJhc2VJdGVyYXRlZShwcmVkaWNhdGUsIDMpLCBpbmRleCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZmluZEluZGV4O1xuXG5cbi8qKiovIH0sXG4vKiAxNTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlR2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGBvYmplY3RgLiBJZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXNcblx0ICogYHVuZGVmaW5lZGAsIHRoZSBgZGVmYXVsdFZhbHVlYCBpcyB1c2VkIGluIGl0cyBwbGFjZS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMy43LjBcblx0ICogQGNhdGVnb3J5IE9iamVjdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEBwYXJhbSB7Kn0gW2RlZmF1bHRWYWx1ZV0gVGhlIHZhbHVlIHJldHVybmVkIGZvciBgdW5kZWZpbmVkYCByZXNvbHZlZCB2YWx1ZXMuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiAzIH0gfV0gfTtcblx0ICpcblx0ICogXy5nZXQob2JqZWN0LCAnYVswXS5iLmMnKTtcblx0ICogLy8gPT4gM1xuXHQgKlxuXHQgKiBfLmdldChvYmplY3QsIFsnYScsICcwJywgJ2InLCAnYyddKTtcblx0ICogLy8gPT4gM1xuXHQgKlxuXHQgKiBfLmdldChvYmplY3QsICdhLmIuYycsICdkZWZhdWx0Jyk7XG5cdCAqIC8vID0+ICdkZWZhdWx0J1xuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0KG9iamVjdCwgcGF0aCwgZGVmYXVsdFZhbHVlKSB7XG5cdCAgdmFyIHJlc3VsdCA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogYmFzZUdldChvYmplY3QsIHBhdGgpO1xuXHQgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWx1ZSA6IHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDE1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VIYXNJbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTAwKSxcblx0ICAgIGhhc1BhdGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGBwYXRoYCBpcyBhIGRpcmVjdCBvciBpbmhlcml0ZWQgcHJvcGVydHkgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBPYmplY3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IF8uY3JlYXRlKHsgJ2EnOiBfLmNyZWF0ZSh7ICdiJzogMiB9KSB9KTtcblx0ICpcblx0ICogXy5oYXNJbihvYmplY3QsICdhJyk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5oYXNJbihvYmplY3QsICdhLmInKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmhhc0luKG9iamVjdCwgWydhJywgJ2InXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5oYXNJbihvYmplY3QsICdiJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNJbihvYmplY3QsIHBhdGgpIHtcblx0ICByZXR1cm4gb2JqZWN0ICE9IG51bGwgJiYgaGFzUGF0aChvYmplY3QsIHBhdGgsIGJhc2VIYXNJbik7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzSW47XG5cblxuLyoqKi8gfSxcbi8qIDE1NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IGdpdmVuIHRvIGl0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgVXRpbFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgYHZhbHVlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcblx0ICpcblx0ICogY29uc29sZS5sb2coXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3QpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqL1xuXHRmdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpZGVudGl0eTtcblxuXG4vKioqLyB9LFxuLyogMTU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNBcnJheUxpa2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM4KSxcblx0ICAgIGlzT2JqZWN0TGlrZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHQvKipcblx0ICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5pc0FycmF5TGlrZWAgZXhjZXB0IHRoYXQgaXQgYWxzbyBjaGVja3MgaWYgYHZhbHVlYFxuXHQgKiBpcyBhbiBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheS1saWtlIG9iamVjdCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZU9iamVjdChbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2VPYmplY3QoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZU9iamVjdCgnYWJjJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNBcnJheUxpa2VPYmplY3QoXy5ub29wKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzQXJyYXlMaWtlT2JqZWN0KHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNBcnJheUxpa2UodmFsdWUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXlMaWtlT2JqZWN0O1xuXG5cbi8qKiovIH0sXG4vKiAxNTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc0xlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpLFxuXHQgICAgaXNPYmplY3RMaWtlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcblx0ICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcblx0ICAgIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG5cdCAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuXHQgICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuXHQgICAgZnVuY1RhZyA9ICdbb2JqZWN0IEZ1bmN0aW9uXScsXG5cdCAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcblx0ICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuXHQgICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG5cdCAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcblx0ICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuXHQgICAgc3RyaW5nVGFnID0gJ1tvYmplY3QgU3RyaW5nXScsXG5cdCAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXHRcblx0dmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcblx0ICAgIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJyxcblx0ICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcblx0ICAgIGZsb2F0NjRUYWcgPSAnW29iamVjdCBGbG9hdDY0QXJyYXldJyxcblx0ICAgIGludDhUYWcgPSAnW29iamVjdCBJbnQ4QXJyYXldJyxcblx0ICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuXHQgICAgaW50MzJUYWcgPSAnW29iamVjdCBJbnQzMkFycmF5XScsXG5cdCAgICB1aW50OFRhZyA9ICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcblx0ICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG5cdCAgICB1aW50MTZUYWcgPSAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuXHQgICAgdWludDMyVGFnID0gJ1tvYmplY3QgVWludDMyQXJyYXldJztcblx0XG5cdC8qKiBVc2VkIHRvIGlkZW50aWZ5IGB0b1N0cmluZ1RhZ2AgdmFsdWVzIG9mIHR5cGVkIGFycmF5cy4gKi9cblx0dmFyIHR5cGVkQXJyYXlUYWdzID0ge307XG5cdHR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tpbnQ4VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2ludDE2VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2ludDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbdWludDMyVGFnXSA9IHRydWU7XG5cdHR5cGVkQXJyYXlUYWdzW2FyZ3NUYWddID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tkYXRhVmlld1RhZ10gPSB0eXBlZEFycmF5VGFnc1tkYXRlVGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2Vycm9yVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Z1bmNUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbbWFwVGFnXSA9IHR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1tvYmplY3RUYWddID0gdHlwZWRBcnJheVRhZ3NbcmVnZXhwVGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW3NldFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzdHJpbmdUYWddID1cblx0dHlwZWRBcnJheVRhZ3Nbd2Vha01hcFRhZ10gPSBmYWxzZTtcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgdHlwZWQgYXJyYXkuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDMuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc1R5cGVkQXJyYXkobmV3IFVpbnQ4QXJyYXkpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNUeXBlZEFycmF5KFtdKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzVHlwZWRBcnJheSh2YWx1ZSkge1xuXHQgIHJldHVybiBpc09iamVjdExpa2UodmFsdWUpICYmXG5cdCAgICBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICEhdHlwZWRBcnJheVRhZ3Nbb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSldO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzVHlwZWRBcnJheTtcblxuXG4vKioqLyB9LFxuLyogMTU4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTWFwQ2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG5cdHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgbWVtb2l6ZXMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuIElmIGByZXNvbHZlcmAgaXNcblx0ICogcHJvdmlkZWQsIGl0IGRldGVybWluZXMgdGhlIGNhY2hlIGtleSBmb3Igc3RvcmluZyB0aGUgcmVzdWx0IGJhc2VkIG9uIHRoZVxuXHQgKiBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uLiBCeSBkZWZhdWx0LCB0aGUgZmlyc3QgYXJndW1lbnRcblx0ICogcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uIGlzIHVzZWQgYXMgdGhlIG1hcCBjYWNoZSBrZXkuIFRoZSBgZnVuY2Bcblx0ICogaXMgaW52b2tlZCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGUgY2FjaGUgaXMgZXhwb3NlZCBhcyB0aGUgYGNhY2hlYCBwcm9wZXJ0eSBvbiB0aGUgbWVtb2l6ZWRcblx0ICogZnVuY3Rpb24uIEl0cyBjcmVhdGlvbiBtYXkgYmUgY3VzdG9taXplZCBieSByZXBsYWNpbmcgdGhlIGBfLm1lbW9pemUuQ2FjaGVgXG5cdCAqIGNvbnN0cnVjdG9yIHdpdGggb25lIHdob3NlIGluc3RhbmNlcyBpbXBsZW1lbnQgdGhlXG5cdCAqIFtgTWFwYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtcHJvcGVydGllcy1vZi10aGUtbWFwLXByb3RvdHlwZS1vYmplY3QpXG5cdCAqIG1ldGhvZCBpbnRlcmZhY2Ugb2YgYGRlbGV0ZWAsIGBnZXRgLCBgaGFzYCwgYW5kIGBzZXRgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaGF2ZSBpdHMgb3V0cHV0IG1lbW9pemVkLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmVzb2x2ZXJdIFRoZSBmdW5jdGlvbiB0byByZXNvbHZlIHRoZSBjYWNoZSBrZXkuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IG1lbW9pemVkIGZ1bmN0aW9uLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEsICdiJzogMiB9O1xuXHQgKiB2YXIgb3RoZXIgPSB7ICdjJzogMywgJ2QnOiA0IH07XG5cdCAqXG5cdCAqIHZhciB2YWx1ZXMgPSBfLm1lbW9pemUoXy52YWx1ZXMpO1xuXHQgKiB2YWx1ZXMob2JqZWN0KTtcblx0ICogLy8gPT4gWzEsIDJdXG5cdCAqXG5cdCAqIHZhbHVlcyhvdGhlcik7XG5cdCAqIC8vID0+IFszLCA0XVxuXHQgKlxuXHQgKiBvYmplY3QuYSA9IDI7XG5cdCAqIHZhbHVlcyhvYmplY3QpO1xuXHQgKiAvLyA9PiBbMSwgMl1cblx0ICpcblx0ICogLy8gTW9kaWZ5IHRoZSByZXN1bHQgY2FjaGUuXG5cdCAqIHZhbHVlcy5jYWNoZS5zZXQob2JqZWN0LCBbJ2EnLCAnYiddKTtcblx0ICogdmFsdWVzKG9iamVjdCk7XG5cdCAqIC8vID0+IFsnYScsICdiJ11cblx0ICpcblx0ICogLy8gUmVwbGFjZSBgXy5tZW1vaXplLkNhY2hlYC5cblx0ICogXy5tZW1vaXplLkNhY2hlID0gV2Vha01hcDtcblx0ICovXG5cdGZ1bmN0aW9uIG1lbW9pemUoZnVuYywgcmVzb2x2ZXIpIHtcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJyB8fCAocmVzb2x2ZXIgJiYgdHlwZW9mIHJlc29sdmVyICE9ICdmdW5jdGlvbicpKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHZhciBtZW1vaXplZCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG5cdCAgICAgICAga2V5ID0gcmVzb2x2ZXIgPyByZXNvbHZlci5hcHBseSh0aGlzLCBhcmdzKSA6IGFyZ3NbMF0sXG5cdCAgICAgICAgY2FjaGUgPSBtZW1vaXplZC5jYWNoZTtcblx0XG5cdCAgICBpZiAoY2FjaGUuaGFzKGtleSkpIHtcblx0ICAgICAgcmV0dXJuIGNhY2hlLmdldChrZXkpO1xuXHQgICAgfVxuXHQgICAgdmFyIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICBtZW1vaXplZC5jYWNoZSA9IGNhY2hlLnNldChrZXksIHJlc3VsdCk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdCAgbWVtb2l6ZWQuY2FjaGUgPSBuZXcgKG1lbW9pemUuQ2FjaGUgfHwgTWFwQ2FjaGUpO1xuXHQgIHJldHVybiBtZW1vaXplZDtcblx0fVxuXHRcblx0Ly8gQXNzaWduIGNhY2hlIHRvIGBfLm1lbW9pemVgLlxuXHRtZW1vaXplLkNhY2hlID0gTWFwQ2FjaGU7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1lbW9pemU7XG5cblxuLyoqKi8gfSxcbi8qIDE1OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIHRpbWVzdGFtcCBvZiB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0aGF0IGhhdmUgZWxhcHNlZCBzaW5jZVxuXHQgKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMi40LjBcblx0ICogQGNhdGVnb3J5IERhdGVcblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG5cdCAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcblx0ICogfSwgXy5ub3coKSk7XG5cdCAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBub3coKSB7XG5cdCAgcmV0dXJuIERhdGUubm93KCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbm93O1xuXG5cbi8qKiovIH0sXG4vKiAxNjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDI4KSxcblx0ICAgIGJhc2VQcm9wZXJ0eURlZXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCksXG5cdCAgICBpc0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpLFxuXHQgICAgdG9LZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSB2YWx1ZSBhdCBgcGF0aGAgb2YgYSBnaXZlbiBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDIuNC4wXG5cdCAqIEBjYXRlZ29yeSBVdGlsXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0cyA9IFtcblx0ICogICB7ICdhJzogeyAnYic6IDIgfSB9LFxuXHQgKiAgIHsgJ2EnOiB7ICdiJzogMSB9IH1cblx0ICogXTtcblx0ICpcblx0ICogXy5tYXAob2JqZWN0cywgXy5wcm9wZXJ0eSgnYS5iJykpO1xuXHQgKiAvLyA9PiBbMiwgMV1cblx0ICpcblx0ICogXy5tYXAoXy5zb3J0Qnkob2JqZWN0cywgXy5wcm9wZXJ0eShbJ2EnLCAnYiddKSksICdhLmInKTtcblx0ICogLy8gPT4gWzEsIDJdXG5cdCAqL1xuXHRmdW5jdGlvbiBwcm9wZXJ0eShwYXRoKSB7XG5cdCAgcmV0dXJuIGlzS2V5KHBhdGgpID8gYmFzZVByb3BlcnR5KHRvS2V5KHBhdGgpKSA6IGJhc2VQcm9wZXJ0eURlZXAocGF0aCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gcHJvcGVydHk7XG5cblxuLyoqKi8gfSxcbi8qIDE2MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFwcGx5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NiksXG5cdCAgICB0b0ludGVnZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQxKTtcblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG5cdHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGVcblx0ICogY3JlYXRlZCBmdW5jdGlvbiBhbmQgYXJndW1lbnRzIGZyb20gYHN0YXJ0YCBhbmQgYmV5b25kIHByb3ZpZGVkIGFzXG5cdCAqIGFuIGFycmF5LlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgYmFzZWQgb24gdGhlXG5cdCAqIFtyZXN0IHBhcmFtZXRlcl0oaHR0cHM6Ly9tZG4uaW8vcmVzdF9wYXJhbWV0ZXJzKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IEZ1bmN0aW9uXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IGEgcmVzdCBwYXJhbWV0ZXIgdG8uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9ZnVuYy5sZW5ndGgtMV0gVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSByZXN0IHBhcmFtZXRlci5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBzYXkgPSBfLnJlc3QoZnVuY3Rpb24od2hhdCwgbmFtZXMpIHtcblx0ICogICByZXR1cm4gd2hhdCArICcgJyArIF8uaW5pdGlhbChuYW1lcykuam9pbignLCAnKSArXG5cdCAqICAgICAoXy5zaXplKG5hbWVzKSA+IDEgPyAnLCAmICcgOiAnJykgKyBfLmxhc3QobmFtZXMpO1xuXHQgKiB9KTtcblx0ICpcblx0ICogc2F5KCdoZWxsbycsICdmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJyk7XG5cdCAqIC8vID0+ICdoZWxsbyBmcmVkLCBiYXJuZXksICYgcGViYmxlcydcblx0ICovXG5cdGZ1bmN0aW9uIHJlc3QoZnVuYywgc3RhcnQpIHtcblx0ICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuXHQgIH1cblx0ICBzdGFydCA9IG5hdGl2ZU1heChzdGFydCA9PT0gdW5kZWZpbmVkID8gKGZ1bmMubGVuZ3RoIC0gMSkgOiB0b0ludGVnZXIoc3RhcnQpLCAwKTtcblx0ICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcblx0ICAgICAgICBpbmRleCA9IC0xLFxuXHQgICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIHN0YXJ0LCAwKSxcblx0ICAgICAgICBhcnJheSA9IEFycmF5KGxlbmd0aCk7XG5cdFxuXHQgICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgICAgYXJyYXlbaW5kZXhdID0gYXJnc1tzdGFydCArIGluZGV4XTtcblx0ICAgIH1cblx0ICAgIHN3aXRjaCAoc3RhcnQpIHtcblx0ICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFycmF5KTtcblx0ICAgICAgY2FzZSAxOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFycmF5KTtcblx0ICAgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFycmF5KTtcblx0ICAgIH1cblx0ICAgIHZhciBvdGhlckFyZ3MgPSBBcnJheShzdGFydCArIDEpO1xuXHQgICAgaW5kZXggPSAtMTtcblx0ICAgIHdoaWxlICgrK2luZGV4IDwgc3RhcnQpIHtcblx0ICAgICAgb3RoZXJBcmdzW2luZGV4XSA9IGFyZ3NbaW5kZXhdO1xuXHQgICAgfVxuXHQgICAgb3RoZXJBcmdzW3N0YXJ0XSA9IGFycmF5O1xuXHQgICAgcmV0dXJuIGFwcGx5KGZ1bmMsIHRoaXMsIG90aGVyQXJncyk7XG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSByZXN0O1xuXG5cbi8qKiovIH0sXG4vKiAxNjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciB0b051bWJlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDIpO1xuXHRcblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBJTkZJTklUWSA9IDEgLyAwLFxuXHQgICAgTUFYX0lOVEVHRVIgPSAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwODtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgZmluaXRlIG51bWJlci5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4xMi4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBudW1iZXIuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9GaW5pdGUoMy4yKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqXG5cdCAqIF8udG9GaW5pdGUoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IDVlLTMyNFxuXHQgKlxuXHQgKiBfLnRvRmluaXRlKEluZmluaXR5KTtcblx0ICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcblx0ICpcblx0ICogXy50b0Zpbml0ZSgnMy4yJyk7XG5cdCAqIC8vID0+IDMuMlxuXHQgKi9cblx0ZnVuY3Rpb24gdG9GaW5pdGUodmFsdWUpIHtcblx0ICBpZiAoIXZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgPT09IDAgPyB2YWx1ZSA6IDA7XG5cdCAgfVxuXHQgIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuXHQgIGlmICh2YWx1ZSA9PT0gSU5GSU5JVFkgfHwgdmFsdWUgPT09IC1JTkZJTklUWSkge1xuXHQgICAgdmFyIHNpZ24gPSAodmFsdWUgPCAwID8gLTEgOiAxKTtcblx0ICAgIHJldHVybiBzaWduICogTUFYX0lOVEVHRVI7XG5cdCAgfVxuXHQgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgPyB2YWx1ZSA6IDA7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9GaW5pdGU7XG5cblxuLyoqKi8gfSxcbi8qIDE2MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VUb1N0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTEwKTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQgZm9yIGBudWxsYFxuXHQgKiBhbmQgYHVuZGVmaW5lZGAgdmFsdWVzLiBUaGUgc2lnbiBvZiBgLTBgIGlzIHByZXNlcnZlZC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLnRvU3RyaW5nKG51bGwpO1xuXHQgKiAvLyA9PiAnJ1xuXHQgKlxuXHQgKiBfLnRvU3RyaW5nKC0wKTtcblx0ICogLy8gPT4gJy0wJ1xuXHQgKlxuXHQgKiBfLnRvU3RyaW5nKFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+ICcxLDIsMydcblx0ICovXG5cdGZ1bmN0aW9uIHRvU3RyaW5nKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IGJhc2VUb1N0cmluZyh2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9TdHJpbmc7XG5cblxuLyoqKi8gfSxcbi8qIDE2NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCkge1xuXHQvKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgQmVnaW4gcHJpc20tY29yZS5qc1xuXHQqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cdFxuXHR2YXIgX3NlbGYgPSAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpXG5cdFx0PyB3aW5kb3cgICAvLyBpZiBpbiBicm93c2VyXG5cdFx0OiAoXG5cdFx0XHQodHlwZW9mIFdvcmtlckdsb2JhbFNjb3BlICE9PSAndW5kZWZpbmVkJyAmJiBzZWxmIGluc3RhbmNlb2YgV29ya2VyR2xvYmFsU2NvcGUpXG5cdFx0XHQ/IHNlbGYgLy8gaWYgaW4gd29ya2VyXG5cdFx0XHQ6IHt9ICAgLy8gaWYgaW4gbm9kZSBqc1xuXHRcdCk7XG5cdFxuXHQvKipcblx0ICogUHJpc206IExpZ2h0d2VpZ2h0LCByb2J1c3QsIGVsZWdhbnQgc3ludGF4IGhpZ2hsaWdodGluZ1xuXHQgKiBNSVQgbGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocC9cblx0ICogQGF1dGhvciBMZWEgVmVyb3UgaHR0cDovL2xlYS52ZXJvdS5tZVxuXHQgKi9cblx0XG5cdHZhciBQcmlzbSA9IChmdW5jdGlvbigpe1xuXHRcblx0Ly8gUHJpdmF0ZSBoZWxwZXIgdmFyc1xuXHR2YXIgbGFuZyA9IC9cXGJsYW5nKD86dWFnZSk/LShcXHcrKVxcYi9pO1xuXHR2YXIgdW5pcXVlSWQgPSAwO1xuXHRcblx0dmFyIF8gPSBfc2VsZi5QcmlzbSA9IHtcblx0XHR1dGlsOiB7XG5cdFx0XHRlbmNvZGU6IGZ1bmN0aW9uICh0b2tlbnMpIHtcblx0XHRcdFx0aWYgKHRva2VucyBpbnN0YW5jZW9mIFRva2VuKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG5ldyBUb2tlbih0b2tlbnMudHlwZSwgXy51dGlsLmVuY29kZSh0b2tlbnMuY29udGVudCksIHRva2Vucy5hbGlhcyk7XG5cdFx0XHRcdH0gZWxzZSBpZiAoXy51dGlsLnR5cGUodG9rZW5zKSA9PT0gJ0FycmF5Jykge1xuXHRcdFx0XHRcdHJldHVybiB0b2tlbnMubWFwKF8udXRpbC5lbmNvZGUpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHJldHVybiB0b2tlbnMucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvXFx1MDBhMC9nLCAnICcpO1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcblx0XHRcdHR5cGU6IGZ1bmN0aW9uIChvKSB7XG5cdFx0XHRcdHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykubWF0Y2goL1xcW29iamVjdCAoXFx3KylcXF0vKVsxXTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0b2JqSWQ6IGZ1bmN0aW9uIChvYmopIHtcblx0XHRcdFx0aWYgKCFvYmpbJ19faWQnXSkge1xuXHRcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosICdfX2lkJywgeyB2YWx1ZTogKyt1bmlxdWVJZCB9KTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gb2JqWydfX2lkJ107XG5cdFx0XHR9LFxuXHRcblx0XHRcdC8vIERlZXAgY2xvbmUgYSBsYW5ndWFnZSBkZWZpbml0aW9uIChlLmcuIHRvIGV4dGVuZCBpdClcblx0XHRcdGNsb25lOiBmdW5jdGlvbiAobykge1xuXHRcdFx0XHR2YXIgdHlwZSA9IF8udXRpbC50eXBlKG8pO1xuXHRcblx0XHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdFx0Y2FzZSAnT2JqZWN0Jzpcblx0XHRcdFx0XHRcdHZhciBjbG9uZSA9IHt9O1xuXHRcblx0XHRcdFx0XHRcdGZvciAodmFyIGtleSBpbiBvKSB7XG5cdFx0XHRcdFx0XHRcdGlmIChvLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0XHRcdFx0XHRjbG9uZVtrZXldID0gXy51dGlsLmNsb25lKG9ba2V5XSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRyZXR1cm4gY2xvbmU7XG5cdFxuXHRcdFx0XHRcdGNhc2UgJ0FycmF5Jzpcblx0XHRcdFx0XHRcdC8vIENoZWNrIGZvciBleGlzdGVuY2UgZm9yIElFOFxuXHRcdFx0XHRcdFx0cmV0dXJuIG8ubWFwICYmIG8ubWFwKGZ1bmN0aW9uKHYpIHsgcmV0dXJuIF8udXRpbC5jbG9uZSh2KTsgfSk7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiBvO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFxuXHRcdGxhbmd1YWdlczoge1xuXHRcdFx0ZXh0ZW5kOiBmdW5jdGlvbiAoaWQsIHJlZGVmKSB7XG5cdFx0XHRcdHZhciBsYW5nID0gXy51dGlsLmNsb25lKF8ubGFuZ3VhZ2VzW2lkXSk7XG5cdFxuXHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gcmVkZWYpIHtcblx0XHRcdFx0XHRsYW5nW2tleV0gPSByZWRlZltrZXldO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRyZXR1cm4gbGFuZztcblx0XHRcdH0sXG5cdFxuXHRcdFx0LyoqXG5cdFx0XHQgKiBJbnNlcnQgYSB0b2tlbiBiZWZvcmUgYW5vdGhlciB0b2tlbiBpbiBhIGxhbmd1YWdlIGxpdGVyYWxcblx0XHRcdCAqIEFzIHRoaXMgbmVlZHMgdG8gcmVjcmVhdGUgdGhlIG9iamVjdCAod2UgY2Fubm90IGFjdHVhbGx5IGluc2VydCBiZWZvcmUga2V5cyBpbiBvYmplY3QgbGl0ZXJhbHMpLFxuXHRcdFx0ICogd2UgY2Fubm90IGp1c3QgcHJvdmlkZSBhbiBvYmplY3QsIHdlIG5lZWQgYW5vYmplY3QgYW5kIGEga2V5LlxuXHRcdFx0ICogQHBhcmFtIGluc2lkZSBUaGUga2V5IChvciBsYW5ndWFnZSBpZCkgb2YgdGhlIHBhcmVudFxuXHRcdFx0ICogQHBhcmFtIGJlZm9yZSBUaGUga2V5IHRvIGluc2VydCBiZWZvcmUuIElmIG5vdCBwcm92aWRlZCwgdGhlIGZ1bmN0aW9uIGFwcGVuZHMgaW5zdGVhZC5cblx0XHRcdCAqIEBwYXJhbSBpbnNlcnQgT2JqZWN0IHdpdGggdGhlIGtleS92YWx1ZSBwYWlycyB0byBpbnNlcnRcblx0XHRcdCAqIEBwYXJhbSByb290IFRoZSBvYmplY3QgdGhhdCBjb250YWlucyBgaW5zaWRlYC4gSWYgZXF1YWwgdG8gUHJpc20ubGFuZ3VhZ2VzLCBpdCBjYW4gYmUgb21pdHRlZC5cblx0XHRcdCAqL1xuXHRcdFx0aW5zZXJ0QmVmb3JlOiBmdW5jdGlvbiAoaW5zaWRlLCBiZWZvcmUsIGluc2VydCwgcm9vdCkge1xuXHRcdFx0XHRyb290ID0gcm9vdCB8fCBfLmxhbmd1YWdlcztcblx0XHRcdFx0dmFyIGdyYW1tYXIgPSByb290W2luc2lkZV07XG5cdFxuXHRcdFx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAyKSB7XG5cdFx0XHRcdFx0aW5zZXJ0ID0gYXJndW1lbnRzWzFdO1xuXHRcblx0XHRcdFx0XHRmb3IgKHZhciBuZXdUb2tlbiBpbiBpbnNlcnQpIHtcblx0XHRcdFx0XHRcdGlmIChpbnNlcnQuaGFzT3duUHJvcGVydHkobmV3VG9rZW4pKSB7XG5cdFx0XHRcdFx0XHRcdGdyYW1tYXJbbmV3VG9rZW5dID0gaW5zZXJ0W25ld1Rva2VuXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdHJldHVybiBncmFtbWFyO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHR2YXIgcmV0ID0ge307XG5cdFxuXHRcdFx0XHRmb3IgKHZhciB0b2tlbiBpbiBncmFtbWFyKSB7XG5cdFxuXHRcdFx0XHRcdGlmIChncmFtbWFyLmhhc093blByb3BlcnR5KHRva2VuKSkge1xuXHRcblx0XHRcdFx0XHRcdGlmICh0b2tlbiA9PSBiZWZvcmUpIHtcblx0XG5cdFx0XHRcdFx0XHRcdGZvciAodmFyIG5ld1Rva2VuIGluIGluc2VydCkge1xuXHRcblx0XHRcdFx0XHRcdFx0XHRpZiAoaW5zZXJ0Lmhhc093blByb3BlcnR5KG5ld1Rva2VuKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cmV0W25ld1Rva2VuXSA9IGluc2VydFtuZXdUb2tlbl07XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0cmV0W3Rva2VuXSA9IGdyYW1tYXJbdG9rZW5dO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Ly8gVXBkYXRlIHJlZmVyZW5jZXMgaW4gb3RoZXIgbGFuZ3VhZ2UgZGVmaW5pdGlvbnNcblx0XHRcdFx0Xy5sYW5ndWFnZXMuREZTKF8ubGFuZ3VhZ2VzLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG5cdFx0XHRcdFx0aWYgKHZhbHVlID09PSByb290W2luc2lkZV0gJiYga2V5ICE9IGluc2lkZSkge1xuXHRcdFx0XHRcdFx0dGhpc1trZXldID0gcmV0O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFxuXHRcdFx0XHRyZXR1cm4gcm9vdFtpbnNpZGVdID0gcmV0O1xuXHRcdFx0fSxcblx0XG5cdFx0XHQvLyBUcmF2ZXJzZSBhIGxhbmd1YWdlIGRlZmluaXRpb24gd2l0aCBEZXB0aCBGaXJzdCBTZWFyY2hcblx0XHRcdERGUzogZnVuY3Rpb24obywgY2FsbGJhY2ssIHR5cGUsIHZpc2l0ZWQpIHtcblx0XHRcdFx0dmlzaXRlZCA9IHZpc2l0ZWQgfHwge307XG5cdFx0XHRcdGZvciAodmFyIGkgaW4gbykge1xuXHRcdFx0XHRcdGlmIChvLmhhc093blByb3BlcnR5KGkpKSB7XG5cdFx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKG8sIGksIG9baV0sIHR5cGUgfHwgaSk7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKF8udXRpbC50eXBlKG9baV0pID09PSAnT2JqZWN0JyAmJiAhdmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldKSB7XG5cdFx0XHRcdFx0XHRcdHZpc2l0ZWRbXy51dGlsLm9iaklkKG9baV0pXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdF8ubGFuZ3VhZ2VzLkRGUyhvW2ldLCBjYWxsYmFjaywgbnVsbCwgdmlzaXRlZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIGlmIChfLnV0aWwudHlwZShvW2ldKSA9PT0gJ0FycmF5JyAmJiAhdmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldKSB7XG5cdFx0XHRcdFx0XHRcdHZpc2l0ZWRbXy51dGlsLm9iaklkKG9baV0pXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRcdF8ubGFuZ3VhZ2VzLkRGUyhvW2ldLCBjYWxsYmFjaywgaSwgdmlzaXRlZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblx0XHRwbHVnaW5zOiB7fSxcblx0XG5cdFx0aGlnaGxpZ2h0QWxsOiBmdW5jdGlvbihhc3luYywgY2FsbGJhY2spIHtcblx0XHRcdHZhciBlbnYgPSB7XG5cdFx0XHRcdGNhbGxiYWNrOiBjYWxsYmFjayxcblx0XHRcdFx0c2VsZWN0b3I6ICdjb2RlW2NsYXNzKj1cImxhbmd1YWdlLVwiXSwgW2NsYXNzKj1cImxhbmd1YWdlLVwiXSBjb2RlLCBjb2RlW2NsYXNzKj1cImxhbmctXCJdLCBbY2xhc3MqPVwibGFuZy1cIl0gY29kZSdcblx0XHRcdH07XG5cdFxuXHRcdFx0Xy5ob29rcy5ydW4oXCJiZWZvcmUtaGlnaGxpZ2h0YWxsXCIsIGVudik7XG5cdFxuXHRcdFx0dmFyIGVsZW1lbnRzID0gZW52LmVsZW1lbnRzIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZW52LnNlbGVjdG9yKTtcblx0XG5cdFx0XHRmb3IgKHZhciBpPTAsIGVsZW1lbnQ7IGVsZW1lbnQgPSBlbGVtZW50c1tpKytdOykge1xuXHRcdFx0XHRfLmhpZ2hsaWdodEVsZW1lbnQoZWxlbWVudCwgYXN5bmMgPT09IHRydWUsIGVudi5jYWxsYmFjayk7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0aGlnaGxpZ2h0RWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCwgYXN5bmMsIGNhbGxiYWNrKSB7XG5cdFx0XHQvLyBGaW5kIGxhbmd1YWdlXG5cdFx0XHR2YXIgbGFuZ3VhZ2UsIGdyYW1tYXIsIHBhcmVudCA9IGVsZW1lbnQ7XG5cdFxuXHRcdFx0d2hpbGUgKHBhcmVudCAmJiAhbGFuZy50ZXN0KHBhcmVudC5jbGFzc05hbWUpKSB7XG5cdFx0XHRcdHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXHRcblx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0bGFuZ3VhZ2UgPSAocGFyZW50LmNsYXNzTmFtZS5tYXRjaChsYW5nKSB8fCBbLCcnXSlbMV0udG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0Z3JhbW1hciA9IF8ubGFuZ3VhZ2VzW2xhbmd1YWdlXTtcblx0XHRcdH1cblx0XG5cdFx0XHQvLyBTZXQgbGFuZ3VhZ2Ugb24gdGhlIGVsZW1lbnQsIGlmIG5vdCBwcmVzZW50XG5cdFx0XHRlbGVtZW50LmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UobGFuZywgJycpLnJlcGxhY2UoL1xccysvZywgJyAnKSArICcgbGFuZ3VhZ2UtJyArIGxhbmd1YWdlO1xuXHRcblx0XHRcdC8vIFNldCBsYW5ndWFnZSBvbiB0aGUgcGFyZW50LCBmb3Igc3R5bGluZ1xuXHRcdFx0cGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuXHRcblx0XHRcdGlmICgvcHJlL2kudGVzdChwYXJlbnQubm9kZU5hbWUpKSB7XG5cdFx0XHRcdHBhcmVudC5jbGFzc05hbWUgPSBwYXJlbnQuY2xhc3NOYW1lLnJlcGxhY2UobGFuZywgJycpLnJlcGxhY2UoL1xccysvZywgJyAnKSArICcgbGFuZ3VhZ2UtJyArIGxhbmd1YWdlO1xuXHRcdFx0fVxuXHRcblx0XHRcdHZhciBjb2RlID0gZWxlbWVudC50ZXh0Q29udGVudDtcblx0XG5cdFx0XHR2YXIgZW52ID0ge1xuXHRcdFx0XHRlbGVtZW50OiBlbGVtZW50LFxuXHRcdFx0XHRsYW5ndWFnZTogbGFuZ3VhZ2UsXG5cdFx0XHRcdGdyYW1tYXI6IGdyYW1tYXIsXG5cdFx0XHRcdGNvZGU6IGNvZGVcblx0XHRcdH07XG5cdFxuXHRcdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1zYW5pdHktY2hlY2snLCBlbnYpO1xuXHRcblx0XHRcdGlmICghZW52LmNvZGUgfHwgIWVudi5ncmFtbWFyKSB7XG5cdFx0XHRcdF8uaG9va3MucnVuKCdjb21wbGV0ZScsIGVudik7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XG5cdFx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLWhpZ2hsaWdodCcsIGVudik7XG5cdFxuXHRcdFx0aWYgKGFzeW5jICYmIF9zZWxmLldvcmtlcikge1xuXHRcdFx0XHR2YXIgd29ya2VyID0gbmV3IFdvcmtlcihfLmZpbGVuYW1lKTtcblx0XG5cdFx0XHRcdHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldnQpIHtcblx0XHRcdFx0XHRlbnYuaGlnaGxpZ2h0ZWRDb2RlID0gZXZ0LmRhdGE7XG5cdFxuXHRcdFx0XHRcdF8uaG9va3MucnVuKCdiZWZvcmUtaW5zZXJ0JywgZW52KTtcblx0XG5cdFx0XHRcdFx0ZW52LmVsZW1lbnQuaW5uZXJIVE1MID0gZW52LmhpZ2hsaWdodGVkQ29kZTtcblx0XG5cdFx0XHRcdFx0Y2FsbGJhY2sgJiYgY2FsbGJhY2suY2FsbChlbnYuZWxlbWVudCk7XG5cdFx0XHRcdFx0Xy5ob29rcy5ydW4oJ2FmdGVyLWhpZ2hsaWdodCcsIGVudik7XG5cdFx0XHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHRcdFx0fTtcblx0XG5cdFx0XHRcdHdvcmtlci5wb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdFx0bGFuZ3VhZ2U6IGVudi5sYW5ndWFnZSxcblx0XHRcdFx0XHRjb2RlOiBlbnYuY29kZSxcblx0XHRcdFx0XHRpbW1lZGlhdGVDbG9zZTogdHJ1ZVxuXHRcdFx0XHR9KSk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0ZW52LmhpZ2hsaWdodGVkQ29kZSA9IF8uaGlnaGxpZ2h0KGVudi5jb2RlLCBlbnYuZ3JhbW1hciwgZW52Lmxhbmd1YWdlKTtcblx0XG5cdFx0XHRcdF8uaG9va3MucnVuKCdiZWZvcmUtaW5zZXJ0JywgZW52KTtcblx0XG5cdFx0XHRcdGVudi5lbGVtZW50LmlubmVySFRNTCA9IGVudi5oaWdobGlnaHRlZENvZGU7XG5cdFxuXHRcdFx0XHRjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKGVsZW1lbnQpO1xuXHRcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2FmdGVyLWhpZ2hsaWdodCcsIGVudik7XG5cdFx0XHRcdF8uaG9va3MucnVuKCdjb21wbGV0ZScsIGVudik7XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0aGlnaGxpZ2h0OiBmdW5jdGlvbiAodGV4dCwgZ3JhbW1hciwgbGFuZ3VhZ2UpIHtcblx0XHRcdHZhciB0b2tlbnMgPSBfLnRva2VuaXplKHRleHQsIGdyYW1tYXIpO1xuXHRcdFx0cmV0dXJuIFRva2VuLnN0cmluZ2lmeShfLnV0aWwuZW5jb2RlKHRva2VucyksIGxhbmd1YWdlKTtcblx0XHR9LFxuXHRcblx0XHR0b2tlbml6ZTogZnVuY3Rpb24odGV4dCwgZ3JhbW1hciwgbGFuZ3VhZ2UpIHtcblx0XHRcdHZhciBUb2tlbiA9IF8uVG9rZW47XG5cdFxuXHRcdFx0dmFyIHN0cmFyciA9IFt0ZXh0XTtcblx0XG5cdFx0XHR2YXIgcmVzdCA9IGdyYW1tYXIucmVzdDtcblx0XG5cdFx0XHRpZiAocmVzdCkge1xuXHRcdFx0XHRmb3IgKHZhciB0b2tlbiBpbiByZXN0KSB7XG5cdFx0XHRcdFx0Z3JhbW1hclt0b2tlbl0gPSByZXN0W3Rva2VuXTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0ZGVsZXRlIGdyYW1tYXIucmVzdDtcblx0XHRcdH1cblx0XG5cdFx0XHR0b2tlbmxvb3A6IGZvciAodmFyIHRva2VuIGluIGdyYW1tYXIpIHtcblx0XHRcdFx0aWYoIWdyYW1tYXIuaGFzT3duUHJvcGVydHkodG9rZW4pIHx8ICFncmFtbWFyW3Rva2VuXSkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHR2YXIgcGF0dGVybnMgPSBncmFtbWFyW3Rva2VuXTtcblx0XHRcdFx0cGF0dGVybnMgPSAoXy51dGlsLnR5cGUocGF0dGVybnMpID09PSBcIkFycmF5XCIpID8gcGF0dGVybnMgOiBbcGF0dGVybnNdO1xuXHRcblx0XHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBwYXR0ZXJucy5sZW5ndGg7ICsraikge1xuXHRcdFx0XHRcdHZhciBwYXR0ZXJuID0gcGF0dGVybnNbal0sXG5cdFx0XHRcdFx0XHRpbnNpZGUgPSBwYXR0ZXJuLmluc2lkZSxcblx0XHRcdFx0XHRcdGxvb2tiZWhpbmQgPSAhIXBhdHRlcm4ubG9va2JlaGluZCxcblx0XHRcdFx0XHRcdGdyZWVkeSA9ICEhcGF0dGVybi5ncmVlZHksXG5cdFx0XHRcdFx0XHRsb29rYmVoaW5kTGVuZ3RoID0gMCxcblx0XHRcdFx0XHRcdGFsaWFzID0gcGF0dGVybi5hbGlhcztcblx0XG5cdFx0XHRcdFx0cGF0dGVybiA9IHBhdHRlcm4ucGF0dGVybiB8fCBwYXR0ZXJuO1xuXHRcblx0XHRcdFx0XHRmb3IgKHZhciBpPTA7IGk8c3RyYXJyLmxlbmd0aDsgaSsrKSB7IC8vIERvbuKAmXQgY2FjaGUgbGVuZ3RoIGFzIGl0IGNoYW5nZXMgZHVyaW5nIHRoZSBsb29wXG5cdFxuXHRcdFx0XHRcdFx0dmFyIHN0ciA9IHN0cmFycltpXTtcblx0XG5cdFx0XHRcdFx0XHRpZiAoc3RyYXJyLmxlbmd0aCA+IHRleHQubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdC8vIFNvbWV0aGluZyB3ZW50IHRlcnJpYmx5IHdyb25nLCBBQk9SVCwgQUJPUlQhXG5cdFx0XHRcdFx0XHRcdGJyZWFrIHRva2VubG9vcDtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRpZiAoc3RyIGluc3RhbmNlb2YgVG9rZW4pIHtcblx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0cGF0dGVybi5sYXN0SW5kZXggPSAwO1xuXHRcblx0XHRcdFx0XHRcdHZhciBtYXRjaCA9IHBhdHRlcm4uZXhlYyhzdHIpLFxuXHRcdFx0XHRcdFx0ICAgIGRlbE51bSA9IDE7XG5cdFxuXHRcdFx0XHRcdFx0Ly8gR3JlZWR5IHBhdHRlcm5zIGNhbiBvdmVycmlkZS9yZW1vdmUgdXAgdG8gdHdvIHByZXZpb3VzbHkgbWF0Y2hlZCB0b2tlbnNcblx0XHRcdFx0XHRcdGlmICghbWF0Y2ggJiYgZ3JlZWR5ICYmIGkgIT0gc3RyYXJyLmxlbmd0aCAtIDEpIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmVjb25zdHJ1Y3QgdGhlIG9yaWdpbmFsIHRleHQgdXNpbmcgdGhlIG5leHQgdHdvIHRva2Vuc1xuXHRcdFx0XHRcdFx0XHR2YXIgbmV4dFRva2VuID0gc3RyYXJyW2kgKyAxXS5tYXRjaGVkU3RyIHx8IHN0cmFycltpICsgMV0sXG5cdFx0XHRcdFx0XHRcdCAgICBjb21iU3RyID0gc3RyICsgbmV4dFRva2VuO1xuXHRcblx0XHRcdFx0XHRcdFx0aWYgKGkgPCBzdHJhcnIubGVuZ3RoIC0gMikge1xuXHRcdFx0XHRcdFx0XHRcdGNvbWJTdHIgKz0gc3RyYXJyW2kgKyAyXS5tYXRjaGVkU3RyIHx8IHN0cmFycltpICsgMl07XG5cdFx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRcdC8vIFRyeSB0aGUgcGF0dGVybiBhZ2FpbiBvbiB0aGUgcmVjb25zdHJ1Y3RlZCB0ZXh0XG5cdFx0XHRcdFx0XHRcdHBhdHRlcm4ubGFzdEluZGV4ID0gMDtcblx0XHRcdFx0XHRcdFx0bWF0Y2ggPSBwYXR0ZXJuLmV4ZWMoY29tYlN0cik7XG5cdFx0XHRcdFx0XHRcdGlmICghbWF0Y2gpIHtcblx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdFx0dmFyIGZyb20gPSBtYXRjaC5pbmRleCArIChsb29rYmVoaW5kID8gbWF0Y2hbMV0ubGVuZ3RoIDogMCk7XG5cdFx0XHRcdFx0XHRcdC8vIFRvIGJlIGEgdmFsaWQgY2FuZGlkYXRlLCB0aGUgbmV3IG1hdGNoIGhhcyB0byBzdGFydCBpbnNpZGUgb2Ygc3RyXG5cdFx0XHRcdFx0XHRcdGlmIChmcm9tID49IHN0ci5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR2YXIgdG8gPSBtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCxcblx0XHRcdFx0XHRcdFx0ICAgIGxlbiA9IHN0ci5sZW5ndGggKyBuZXh0VG9rZW4ubGVuZ3RoO1xuXHRcblx0XHRcdFx0XHRcdFx0Ly8gTnVtYmVyIG9mIHRva2VucyB0byBkZWxldGUgYW5kIHJlcGxhY2Ugd2l0aCB0aGUgbmV3IG1hdGNoXG5cdFx0XHRcdFx0XHRcdGRlbE51bSA9IDM7XG5cdFxuXHRcdFx0XHRcdFx0XHRpZiAodG8gPD0gbGVuKSB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHN0cmFycltpICsgMV0uZ3JlZWR5KSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0ZGVsTnVtID0gMjtcblx0XHRcdFx0XHRcdFx0XHRjb21iU3RyID0gY29tYlN0ci5zbGljZSgwLCBsZW4pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHN0ciA9IGNvbWJTdHI7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0aWYgKCFtYXRjaCkge1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRpZihsb29rYmVoaW5kKSB7XG5cdFx0XHRcdFx0XHRcdGxvb2tiZWhpbmRMZW5ndGggPSBtYXRjaFsxXS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0dmFyIGZyb20gPSBtYXRjaC5pbmRleCArIGxvb2tiZWhpbmRMZW5ndGgsXG5cdFx0XHRcdFx0XHQgICAgbWF0Y2ggPSBtYXRjaFswXS5zbGljZShsb29rYmVoaW5kTGVuZ3RoKSxcblx0XHRcdFx0XHRcdCAgICB0byA9IGZyb20gKyBtYXRjaC5sZW5ndGgsXG5cdFx0XHRcdFx0XHQgICAgYmVmb3JlID0gc3RyLnNsaWNlKDAsIGZyb20pLFxuXHRcdFx0XHRcdFx0ICAgIGFmdGVyID0gc3RyLnNsaWNlKHRvKTtcblx0XG5cdFx0XHRcdFx0XHR2YXIgYXJncyA9IFtpLCBkZWxOdW1dO1xuXHRcblx0XHRcdFx0XHRcdGlmIChiZWZvcmUpIHtcblx0XHRcdFx0XHRcdFx0YXJncy5wdXNoKGJlZm9yZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0dmFyIHdyYXBwZWQgPSBuZXcgVG9rZW4odG9rZW4sIGluc2lkZT8gXy50b2tlbml6ZShtYXRjaCwgaW5zaWRlKSA6IG1hdGNoLCBhbGlhcywgbWF0Y2gsIGdyZWVkeSk7XG5cdFxuXHRcdFx0XHRcdFx0YXJncy5wdXNoKHdyYXBwZWQpO1xuXHRcblx0XHRcdFx0XHRcdGlmIChhZnRlcikge1xuXHRcdFx0XHRcdFx0XHRhcmdzLnB1c2goYWZ0ZXIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoc3RyYXJyLCBhcmdzKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XG5cdFx0XHRyZXR1cm4gc3RyYXJyO1xuXHRcdH0sXG5cdFxuXHRcdGhvb2tzOiB7XG5cdFx0XHRhbGw6IHt9LFxuXHRcblx0XHRcdGFkZDogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7XG5cdFx0XHRcdHZhciBob29rcyA9IF8uaG9va3MuYWxsO1xuXHRcblx0XHRcdFx0aG9va3NbbmFtZV0gPSBob29rc1tuYW1lXSB8fCBbXTtcblx0XG5cdFx0XHRcdGhvb2tzW25hbWVdLnB1c2goY2FsbGJhY2spO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRydW46IGZ1bmN0aW9uIChuYW1lLCBlbnYpIHtcblx0XHRcdFx0dmFyIGNhbGxiYWNrcyA9IF8uaG9va3MuYWxsW25hbWVdO1xuXHRcblx0XHRcdFx0aWYgKCFjYWxsYmFja3MgfHwgIWNhbGxiYWNrcy5sZW5ndGgpIHtcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdGZvciAodmFyIGk9MCwgY2FsbGJhY2s7IGNhbGxiYWNrID0gY2FsbGJhY2tzW2krK107KSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soZW52KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0XG5cdHZhciBUb2tlbiA9IF8uVG9rZW4gPSBmdW5jdGlvbih0eXBlLCBjb250ZW50LCBhbGlhcywgbWF0Y2hlZFN0ciwgZ3JlZWR5KSB7XG5cdFx0dGhpcy50eXBlID0gdHlwZTtcblx0XHR0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuXHRcdHRoaXMuYWxpYXMgPSBhbGlhcztcblx0XHQvLyBDb3B5IG9mIHRoZSBmdWxsIHN0cmluZyB0aGlzIHRva2VuIHdhcyBjcmVhdGVkIGZyb21cblx0XHR0aGlzLm1hdGNoZWRTdHIgPSBtYXRjaGVkU3RyIHx8IG51bGw7XG5cdFx0dGhpcy5ncmVlZHkgPSAhIWdyZWVkeTtcblx0fTtcblx0XG5cdFRva2VuLnN0cmluZ2lmeSA9IGZ1bmN0aW9uKG8sIGxhbmd1YWdlLCBwYXJlbnQpIHtcblx0XHRpZiAodHlwZW9mIG8gPT0gJ3N0cmluZycpIHtcblx0XHRcdHJldHVybiBvO1xuXHRcdH1cblx0XG5cdFx0aWYgKF8udXRpbC50eXBlKG8pID09PSAnQXJyYXknKSB7XG5cdFx0XHRyZXR1cm4gby5tYXAoZnVuY3Rpb24oZWxlbWVudCkge1xuXHRcdFx0XHRyZXR1cm4gVG9rZW4uc3RyaW5naWZ5KGVsZW1lbnQsIGxhbmd1YWdlLCBvKTtcblx0XHRcdH0pLmpvaW4oJycpO1xuXHRcdH1cblx0XG5cdFx0dmFyIGVudiA9IHtcblx0XHRcdHR5cGU6IG8udHlwZSxcblx0XHRcdGNvbnRlbnQ6IFRva2VuLnN0cmluZ2lmeShvLmNvbnRlbnQsIGxhbmd1YWdlLCBwYXJlbnQpLFxuXHRcdFx0dGFnOiAnc3BhbicsXG5cdFx0XHRjbGFzc2VzOiBbJ3Rva2VuJywgby50eXBlXSxcblx0XHRcdGF0dHJpYnV0ZXM6IHt9LFxuXHRcdFx0bGFuZ3VhZ2U6IGxhbmd1YWdlLFxuXHRcdFx0cGFyZW50OiBwYXJlbnRcblx0XHR9O1xuXHRcblx0XHRpZiAoZW52LnR5cGUgPT0gJ2NvbW1lbnQnKSB7XG5cdFx0XHRlbnYuYXR0cmlidXRlc1snc3BlbGxjaGVjayddID0gJ3RydWUnO1xuXHRcdH1cblx0XG5cdFx0aWYgKG8uYWxpYXMpIHtcblx0XHRcdHZhciBhbGlhc2VzID0gXy51dGlsLnR5cGUoby5hbGlhcykgPT09ICdBcnJheScgPyBvLmFsaWFzIDogW28uYWxpYXNdO1xuXHRcdFx0QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZW52LmNsYXNzZXMsIGFsaWFzZXMpO1xuXHRcdH1cblx0XG5cdFx0Xy5ob29rcy5ydW4oJ3dyYXAnLCBlbnYpO1xuXHRcblx0XHR2YXIgYXR0cmlidXRlcyA9ICcnO1xuXHRcblx0XHRmb3IgKHZhciBuYW1lIGluIGVudi5hdHRyaWJ1dGVzKSB7XG5cdFx0XHRhdHRyaWJ1dGVzICs9IChhdHRyaWJ1dGVzID8gJyAnIDogJycpICsgbmFtZSArICc9XCInICsgKGVudi5hdHRyaWJ1dGVzW25hbWVdIHx8ICcnKSArICdcIic7XG5cdFx0fVxuXHRcblx0XHRyZXR1cm4gJzwnICsgZW52LnRhZyArICcgY2xhc3M9XCInICsgZW52LmNsYXNzZXMuam9pbignICcpICsgJ1wiICcgKyBhdHRyaWJ1dGVzICsgJz4nICsgZW52LmNvbnRlbnQgKyAnPC8nICsgZW52LnRhZyArICc+Jztcblx0XG5cdH07XG5cdFxuXHRpZiAoIV9zZWxmLmRvY3VtZW50KSB7XG5cdFx0aWYgKCFfc2VsZi5hZGRFdmVudExpc3RlbmVyKSB7XG5cdFx0XHQvLyBpbiBOb2RlLmpzXG5cdFx0XHRyZXR1cm4gX3NlbGYuUHJpc207XG5cdFx0fVxuXHQgXHQvLyBJbiB3b3JrZXJcblx0XHRfc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZ0KSB7XG5cdFx0XHR2YXIgbWVzc2FnZSA9IEpTT04ucGFyc2UoZXZ0LmRhdGEpLFxuXHRcdFx0ICAgIGxhbmcgPSBtZXNzYWdlLmxhbmd1YWdlLFxuXHRcdFx0ICAgIGNvZGUgPSBtZXNzYWdlLmNvZGUsXG5cdFx0XHQgICAgaW1tZWRpYXRlQ2xvc2UgPSBtZXNzYWdlLmltbWVkaWF0ZUNsb3NlO1xuXHRcblx0XHRcdF9zZWxmLnBvc3RNZXNzYWdlKF8uaGlnaGxpZ2h0KGNvZGUsIF8ubGFuZ3VhZ2VzW2xhbmddLCBsYW5nKSk7XG5cdFx0XHRpZiAoaW1tZWRpYXRlQ2xvc2UpIHtcblx0XHRcdFx0X3NlbGYuY2xvc2UoKTtcblx0XHRcdH1cblx0XHR9LCBmYWxzZSk7XG5cdFxuXHRcdHJldHVybiBfc2VsZi5QcmlzbTtcblx0fVxuXHRcblx0Ly9HZXQgY3VycmVudCBzY3JpcHQgYW5kIGhpZ2hsaWdodFxuXHR2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdCB8fCBbXS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpKS5wb3AoKTtcblx0XG5cdGlmIChzY3JpcHQpIHtcblx0XHRfLmZpbGVuYW1lID0gc2NyaXB0LnNyYztcblx0XG5cdFx0aWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJiYgIXNjcmlwdC5oYXNBdHRyaWJ1dGUoJ2RhdGEtbWFudWFsJykpIHtcblx0XHRcdGlmKGRvY3VtZW50LnJlYWR5U3RhdGUgIT09IFwibG9hZGluZ1wiKSB7XG5cdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShfLmhpZ2hsaWdodEFsbCwgMCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIF8uaGlnaGxpZ2h0QWxsKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdHJldHVybiBfc2VsZi5QcmlzbTtcblx0XG5cdH0pKCk7XG5cdFxuXHRpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRtb2R1bGUuZXhwb3J0cyA9IFByaXNtO1xuXHR9XG5cdFxuXHQvLyBoYWNrIGZvciBjb21wb25lbnRzIHRvIHdvcmsgY29ycmVjdGx5IGluIG5vZGUuanNcblx0aWYgKHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0Z2xvYmFsLlByaXNtID0gUHJpc207XG5cdH1cblx0XG5cdFxuXHQvKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgQmVnaW4gcHJpc20tbWFya3VwLmpzXG5cdCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblx0XG5cdFByaXNtLmxhbmd1YWdlcy5tYXJrdXAgPSB7XG5cdFx0J2NvbW1lbnQnOiAvPCEtLVtcXHdcXFddKj8tLT4vLFxuXHRcdCdwcm9sb2cnOiAvPFxcP1tcXHdcXFddKz9cXD8+Lyxcblx0XHQnZG9jdHlwZSc6IC88IURPQ1RZUEVbXFx3XFxXXSs/Pi8sXG5cdFx0J2NkYXRhJzogLzwhXFxbQ0RBVEFcXFtbXFx3XFxXXSo/XV0+L2ksXG5cdFx0J3RhZyc6IHtcblx0XHRcdHBhdHRlcm46IC88XFwvPyg/IVxcZClbXlxccz5cXC89LiQ8XSsoPzpcXHMrW15cXHM+XFwvPV0rKD86PSg/OihcInwnKSg/OlxcXFxcXDF8XFxcXD8oPyFcXDEpW1xcd1xcV10pKlxcMXxbXlxccydcIj49XSspKT8pKlxccypcXC8/Pi9pLFxuXHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdCd0YWcnOiB7XG5cdFx0XHRcdFx0cGF0dGVybjogL148XFwvP1teXFxzPlxcL10rL2ksXG5cdFx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0XHQncHVuY3R1YXRpb24nOiAvXjxcXC8/Lyxcblx0XHRcdFx0XHRcdCduYW1lc3BhY2UnOiAvXlteXFxzPlxcLzpdKzovXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQnYXR0ci12YWx1ZSc6IHtcblx0XHRcdFx0XHRwYXR0ZXJuOiAvPSg/OignfFwiKVtcXHdcXFddKj8oXFwxKXxbXlxccz5dKykvaSxcblx0XHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHRcdCdwdW5jdHVhdGlvbic6IC9bPT5cIiddL1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0J3B1bmN0dWF0aW9uJzogL1xcLz8+Lyxcblx0XHRcdFx0J2F0dHItbmFtZSc6IHtcblx0XHRcdFx0XHRwYXR0ZXJuOiAvW15cXHM+XFwvXSsvLFxuXHRcdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdFx0J25hbWVzcGFjZSc6IC9eW15cXHM+XFwvOl0rOi9cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQnZW50aXR5JzogLyYjP1tcXGRhLXpdezEsOH07L2lcblx0fTtcblx0XG5cdC8vIFBsdWdpbiB0byBtYWtlIGVudGl0eSB0aXRsZSBzaG93IHRoZSByZWFsIGVudGl0eSwgaWRlYSBieSBSb21hbiBLb21hcm92XG5cdFByaXNtLmhvb2tzLmFkZCgnd3JhcCcsIGZ1bmN0aW9uKGVudikge1xuXHRcblx0XHRpZiAoZW52LnR5cGUgPT09ICdlbnRpdHknKSB7XG5cdFx0XHRlbnYuYXR0cmlidXRlc1sndGl0bGUnXSA9IGVudi5jb250ZW50LnJlcGxhY2UoLyZhbXA7LywgJyYnKTtcblx0XHR9XG5cdH0pO1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLnhtbCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5cdFByaXNtLmxhbmd1YWdlcy5odG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblx0UHJpc20ubGFuZ3VhZ2VzLm1hdGhtbCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5cdFByaXNtLmxhbmd1YWdlcy5zdmcgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuXHRcblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1jc3MuanNcblx0KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLmNzcyA9IHtcblx0XHQnY29tbWVudCc6IC9cXC9cXCpbXFx3XFxXXSo/XFwqXFwvLyxcblx0XHQnYXRydWxlJzoge1xuXHRcdFx0cGF0dGVybjogL0BbXFx3LV0rPy4qPyg7fCg/PVxccypcXHspKS9pLFxuXHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdCdydWxlJzogL0BbXFx3LV0rL1xuXHRcdFx0XHQvLyBTZWUgcmVzdCBiZWxvd1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0J3VybCc6IC91cmxcXCgoPzooW1wiJ10pKFxcXFwoPzpcXHJcXG58W1xcd1xcV10pfCg/IVxcMSlbXlxcXFxcXHJcXG5dKSpcXDF8Lio/KVxcKS9pLFxuXHRcdCdzZWxlY3Rvcic6IC9bXlxce1xcfVxcc11bXlxce1xcfTtdKj8oPz1cXHMqXFx7KS8sXG5cdFx0J3N0cmluZyc6IC8oXCJ8JykoXFxcXCg/OlxcclxcbnxbXFx3XFxXXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS8sXG5cdFx0J3Byb3BlcnR5JzogLyhcXGJ8XFxCKVtcXHctXSsoPz1cXHMqOikvaSxcblx0XHQnaW1wb3J0YW50JzogL1xcQiFpbXBvcnRhbnRcXGIvaSxcblx0XHQnZnVuY3Rpb24nOiAvWy1hLXowLTldKyg/PVxcKCkvaSxcblx0XHQncHVuY3R1YXRpb24nOiAvWygpe307Ol0vXG5cdH07XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuY3NzWydhdHJ1bGUnXS5pbnNpZGUucmVzdCA9IFByaXNtLnV0aWwuY2xvbmUoUHJpc20ubGFuZ3VhZ2VzLmNzcyk7XG5cdFxuXHRpZiAoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCkge1xuXHRcdFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ21hcmt1cCcsICd0YWcnLCB7XG5cdFx0XHQnc3R5bGUnOiB7XG5cdFx0XHRcdHBhdHRlcm46IC8oPHN0eWxlW1xcd1xcV10qPz4pW1xcd1xcV10qPyg/PTxcXC9zdHlsZT4pL2ksXG5cdFx0XHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmNzcyxcblx0XHRcdFx0YWxpYXM6ICdsYW5ndWFnZS1jc3MnXG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnaW5zaWRlJywgJ2F0dHItdmFsdWUnLCB7XG5cdFx0XHQnc3R5bGUtYXR0cic6IHtcblx0XHRcdFx0cGF0dGVybjogL1xccypzdHlsZT0oXCJ8JykuKj9cXDEvaSxcblx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0J2F0dHItbmFtZSc6IHtcblx0XHRcdFx0XHRcdHBhdHRlcm46IC9eXFxzKnN0eWxlL2ksXG5cdFx0XHRcdFx0XHRpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnLmluc2lkZVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0J3B1bmN0dWF0aW9uJzogL15cXHMqPVxccypbJ1wiXXxbJ1wiXVxccyokLyxcblx0XHRcdFx0XHQnYXR0ci12YWx1ZSc6IHtcblx0XHRcdFx0XHRcdHBhdHRlcm46IC8uKy9pLFxuXHRcdFx0XHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuY3NzXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHRhbGlhczogJ2xhbmd1YWdlLWNzcydcblx0XHRcdH1cblx0XHR9LCBQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZyk7XG5cdH1cblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1jbGlrZS5qc1xuXHQqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuY2xpa2UgPSB7XG5cdFx0J2NvbW1lbnQnOiBbXG5cdFx0XHR7XG5cdFx0XHRcdHBhdHRlcm46IC8oXnxbXlxcXFxdKVxcL1xcKltcXHdcXFddKj9cXCpcXC8vLFxuXHRcdFx0XHRsb29rYmVoaW5kOiB0cnVlXG5cdFx0XHR9LFxuXHRcdFx0e1xuXHRcdFx0XHRwYXR0ZXJuOiAvKF58W15cXFxcOl0pXFwvXFwvLiovLFxuXHRcdFx0XHRsb29rYmVoaW5kOiB0cnVlXG5cdFx0XHR9XG5cdFx0XSxcblx0XHQnc3RyaW5nJzoge1xuXHRcdFx0cGF0dGVybjogLyhbXCInXSkoXFxcXCg/OlxcclxcbnxbXFxzXFxTXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMS8sXG5cdFx0XHRncmVlZHk6IHRydWVcblx0XHR9LFxuXHRcdCdjbGFzcy1uYW1lJzoge1xuXHRcdFx0cGF0dGVybjogLygoPzpcXGIoPzpjbGFzc3xpbnRlcmZhY2V8ZXh0ZW5kc3xpbXBsZW1lbnRzfHRyYWl0fGluc3RhbmNlb2Z8bmV3KVxccyspfCg/OmNhdGNoXFxzK1xcKCkpW2EtejAtOV9cXC5cXFxcXSsvaSxcblx0XHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0cHVuY3R1YXRpb246IC8oXFwufFxcXFwpL1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0J2tleXdvcmQnOiAvXFxiKGlmfGVsc2V8d2hpbGV8ZG98Zm9yfHJldHVybnxpbnxpbnN0YW5jZW9mfGZ1bmN0aW9ufG5ld3x0cnl8dGhyb3d8Y2F0Y2h8ZmluYWxseXxudWxsfGJyZWFrfGNvbnRpbnVlKVxcYi8sXG5cdFx0J2Jvb2xlYW4nOiAvXFxiKHRydWV8ZmFsc2UpXFxiLyxcblx0XHQnZnVuY3Rpb24nOiAvW2EtejAtOV9dKyg/PVxcKCkvaSxcblx0XHQnbnVtYmVyJzogL1xcYi0/KD86MHhbXFxkYS1mXSt8XFxkKlxcLj9cXGQrKD86ZVsrLV0/XFxkKyk/KVxcYi9pLFxuXHRcdCdvcGVyYXRvcic6IC8tLT98XFwrXFwrP3whPT89P3w8PT98Pj0/fD09Pz0/fCYmP3xcXHxcXHw/fFxcP3xcXCp8XFwvfH58XFxefCUvLFxuXHRcdCdwdW5jdHVhdGlvbic6IC9be31bXFxdOygpLC46XS9cblx0fTtcblx0XG5cdFxuXHQvKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgQmVnaW4gcHJpc20tamF2YXNjcmlwdC5qc1xuXHQqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdCA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NsaWtlJywge1xuXHRcdCdrZXl3b3JkJzogL1xcYihhc3xhc3luY3xhd2FpdHxicmVha3xjYXNlfGNhdGNofGNsYXNzfGNvbnN0fGNvbnRpbnVlfGRlYnVnZ2VyfGRlZmF1bHR8ZGVsZXRlfGRvfGVsc2V8ZW51bXxleHBvcnR8ZXh0ZW5kc3xmaW5hbGx5fGZvcnxmcm9tfGZ1bmN0aW9ufGdldHxpZnxpbXBsZW1lbnRzfGltcG9ydHxpbnxpbnN0YW5jZW9mfGludGVyZmFjZXxsZXR8bmV3fG51bGx8b2Z8cGFja2FnZXxwcml2YXRlfHByb3RlY3RlZHxwdWJsaWN8cmV0dXJufHNldHxzdGF0aWN8c3VwZXJ8c3dpdGNofHRoaXN8dGhyb3d8dHJ5fHR5cGVvZnx2YXJ8dm9pZHx3aGlsZXx3aXRofHlpZWxkKVxcYi8sXG5cdFx0J251bWJlcic6IC9cXGItPygweFtcXGRBLUZhLWZdK3wwYlswMV0rfDBvWzAtN10rfFxcZCpcXC4/XFxkKyhbRWVdWystXT9cXGQrKT98TmFOfEluZmluaXR5KVxcYi8sXG5cdFx0Ly8gQWxsb3cgZm9yIGFsbCBub24tQVNDSUkgY2hhcmFjdGVycyAoU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIwMDg0NDQpXG5cdFx0J2Z1bmN0aW9uJzogL1tfJGEtekEtWlxceEEwLVxcdUZGRkZdW18kYS16QS1aMC05XFx4QTAtXFx1RkZGRl0qKD89XFwoKS9pXG5cdH0pO1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YXNjcmlwdCcsICdrZXl3b3JkJywge1xuXHRcdCdyZWdleCc6IHtcblx0XHRcdHBhdHRlcm46IC8oXnxbXi9dKVxcLyg/IVxcLykoXFxbLis/XXxcXFxcLnxbXi9cXFxcXFxyXFxuXSkrXFwvW2dpbXl1XXswLDV9KD89XFxzKigkfFtcXHJcXG4sLjt9KV0pKS8sXG5cdFx0XHRsb29rYmVoaW5kOiB0cnVlLFxuXHRcdFx0Z3JlZWR5OiB0cnVlXG5cdFx0fVxuXHR9KTtcblx0XG5cdFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2phdmFzY3JpcHQnLCAnc3RyaW5nJywge1xuXHRcdCd0ZW1wbGF0ZS1zdHJpbmcnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvYCg/OlxcXFxcXFxcfFxcXFw/W15cXFxcXSkqP2AvLFxuXHRcdFx0Z3JlZWR5OiB0cnVlLFxuXHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdCdpbnRlcnBvbGF0aW9uJzoge1xuXHRcdFx0XHRcdHBhdHRlcm46IC9cXCRcXHtbXn1dK1xcfS8sXG5cdFx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0XHQnaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbic6IHtcblx0XHRcdFx0XHRcdFx0cGF0dGVybjogL15cXCRcXHt8XFx9JC8sXG5cdFx0XHRcdFx0XHRcdGFsaWFzOiAncHVuY3R1YXRpb24nXG5cdFx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdFx0cmVzdDogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdzdHJpbmcnOiAvW1xcc1xcU10rL1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG5cdFxuXHRpZiAoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCkge1xuXHRcdFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ21hcmt1cCcsICd0YWcnLCB7XG5cdFx0XHQnc2NyaXB0Jzoge1xuXHRcdFx0XHRwYXR0ZXJuOiAvKDxzY3JpcHRbXFx3XFxXXSo/PilbXFx3XFxXXSo/KD89PFxcL3NjcmlwdD4pL2ksXG5cdFx0XHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQsXG5cdFx0XHRcdGFsaWFzOiAnbGFuZ3VhZ2UtamF2YXNjcmlwdCdcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLmpzID0gUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQ7XG5cdFxuXHQvKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG5cdCAgICAgQmVnaW4gcHJpc20tZmlsZS1oaWdobGlnaHQuanNcblx0KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXHRcblx0KGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnIHx8ICFzZWxmLlByaXNtIHx8ICFzZWxmLmRvY3VtZW50IHx8ICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcblx0XHRzZWxmLlByaXNtLmZpbGVIaWdobGlnaHQgPSBmdW5jdGlvbigpIHtcblx0XG5cdFx0XHR2YXIgRXh0ZW5zaW9ucyA9IHtcblx0XHRcdFx0J2pzJzogJ2phdmFzY3JpcHQnLFxuXHRcdFx0XHQncHknOiAncHl0aG9uJyxcblx0XHRcdFx0J3JiJzogJ3J1YnknLFxuXHRcdFx0XHQncHMxJzogJ3Bvd2Vyc2hlbGwnLFxuXHRcdFx0XHQncHNtMSc6ICdwb3dlcnNoZWxsJyxcblx0XHRcdFx0J3NoJzogJ2Jhc2gnLFxuXHRcdFx0XHQnYmF0JzogJ2JhdGNoJyxcblx0XHRcdFx0J2gnOiAnYycsXG5cdFx0XHRcdCd0ZXgnOiAnbGF0ZXgnXG5cdFx0XHR9O1xuXHRcblx0XHRcdGlmKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSB7IC8vIENoZWNrIHRvIHByZXZlbnQgZXJyb3IgaW4gSUU4XG5cdFx0XHRcdEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3ByZVtkYXRhLXNyY10nKSkuZm9yRWFjaChmdW5jdGlvbiAocHJlKSB7XG5cdFx0XHRcdFx0dmFyIHNyYyA9IHByZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc3JjJyk7XG5cdFxuXHRcdFx0XHRcdHZhciBsYW5ndWFnZSwgcGFyZW50ID0gcHJlO1xuXHRcdFx0XHRcdHZhciBsYW5nID0gL1xcYmxhbmcoPzp1YWdlKT8tKD8hXFwqKShcXHcrKVxcYi9pO1xuXHRcdFx0XHRcdHdoaWxlIChwYXJlbnQgJiYgIWxhbmcudGVzdChwYXJlbnQuY2xhc3NOYW1lKSkge1xuXHRcdFx0XHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRcdFx0XHRsYW5ndWFnZSA9IChwcmUuY2xhc3NOYW1lLm1hdGNoKGxhbmcpIHx8IFssICcnXSlbMV07XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRpZiAoIWxhbmd1YWdlKSB7XG5cdFx0XHRcdFx0XHR2YXIgZXh0ZW5zaW9uID0gKHNyYy5tYXRjaCgvXFwuKFxcdyspJC8pIHx8IFssICcnXSlbMV07XG5cdFx0XHRcdFx0XHRsYW5ndWFnZSA9IEV4dGVuc2lvbnNbZXh0ZW5zaW9uXSB8fCBleHRlbnNpb247XG5cdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHR2YXIgY29kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvZGUnKTtcblx0XHRcdFx0XHRjb2RlLmNsYXNzTmFtZSA9ICdsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cdFxuXHRcdFx0XHRcdHByZS50ZXh0Q29udGVudCA9ICcnO1xuXHRcblx0XHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0gJ0xvYWRpbmfigKYnO1xuXHRcblx0XHRcdFx0XHRwcmUuYXBwZW5kQ2hpbGQoY29kZSk7XG5cdFxuXHRcdFx0XHRcdHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XG5cdFx0XHRcdFx0eGhyLm9wZW4oJ0dFVCcsIHNyYywgdHJ1ZSk7XG5cdFxuXHRcdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0XHRpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkge1xuXHRcblx0XHRcdFx0XHRcdFx0aWYgKHhoci5zdGF0dXMgPCA0MDAgJiYgeGhyLnJlc3BvbnNlVGV4dCkge1xuXHRcdFx0XHRcdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSB4aHIucmVzcG9uc2VUZXh0O1xuXHRcblx0XHRcdFx0XHRcdFx0XHRQcmlzbS5oaWdobGlnaHRFbGVtZW50KGNvZGUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2UgaWYgKHhoci5zdGF0dXMgPj0gNDAwKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9ICfinJYgRXJyb3IgJyArIHhoci5zdGF0dXMgKyAnIHdoaWxlIGZldGNoaW5nIGZpbGU6ICcgKyB4aHIuc3RhdHVzVGV4dDtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0gJ+KcliBFcnJvcjogRmlsZSBkb2VzIG5vdCBleGlzdCBvciBpcyBlbXB0eSc7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9O1xuXHRcblx0XHRcdFx0XHR4aHIuc2VuZChudWxsKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFxuXHRcdH07XG5cdFxuXHRcdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBzZWxmLlByaXNtLmZpbGVIaWdobGlnaHQpO1xuXHRcblx0fSkoKTtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDE2NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjx0YWJsZSBjbGFzcz1zZ19jLWFwaS10YWJsZT4gPHRyPiA8dGg+IE5hbWUgPC90aD4gPHRoPiBUeXBlIDwvdGg+IDx0aD4gUmVxdWlyZWQgPC90aD4gPHRoPiBEZWZhdWx0IDwvdGg+IDx0aD4gRGVzY3JpcHRpb24gPC90aD4gPC90cj4gPHRyIHYtZm9yPVxcXCJpdGVtIGluIGl0ZW1zXFxcIj4gPHRkPnt7aXRlbS5uYW1lfX08L3RkPiA8dGQ+e3tpdGVtLnR5cGV9fTwvdGQ+IDx0ZD57e2l0ZW0uaXNSZXF1aXJlZH19PC90ZD4gPHRkPnt7aXRlbS5kZWZhdWx0fX08L3RkPiA8dGQ+e3tpdGVtLmRlc2N9fTwvdGQ+IDwvdHI+IDwvdGFibGU+IFwiO1xuXG4vKioqLyB9LFxuLyogMTY2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPG5hdiBjbGFzcz1cXFwic2dfYy1uYXYgaHlfdS1oaWRlIGh5X3Utc2hvd0BtZFxcXCIgQGNsaWNrPWhpZGVOYXY+IDxoMiBjbGFzcz1zZ19jLW5hdl9fc2VjdGlvbj5JTlRST0RVQ1RJT048L2gyPiA8dWwgY2xhc3M9aHlfby1saXN0IEBjbGljaz1oaWRlTmF2PiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9nZXQtc3RhcnRlZCcsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gR2V0IFN0YXJ0ZWQgPC9hPiA8L2xpPiA8L3VsPiA8aDIgY2xhc3M9c2dfYy1uYXZfX3NlY3Rpb24+Q09NUE9ORU5UUzwvaDI+IDx1bCBjbGFzcz1oeV9vLWxpc3Q+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL2FsZXJ0JywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBBbGVydCA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL3NwaW5uZXInLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFNwaW5uZXIgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9zdGVwLXRyYWNrZXInLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFN0ZXAgVHJhY2tlciA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL3RhYnMnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFRhYnMgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9vdmVybGF5JywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBPdmVybGF5IDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvbGVnYWwnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IExlZ2FsIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvbGVnYWwtb3ZlcmxheScsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gTGVnYWwgKyBPdmVybGF5IDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvY29sbGFwc2FibGUtcGFuZWwnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IENvbGxhcHNhYmxlIFBhbmVsIDwvYT4gPC9saT4gPC91bD4gPGgyIGNsYXNzPXNnX2MtbmF2X19zZWN0aW9uPkRJUkVDVElWRVM8L2gyPiA8dWwgY2xhc3M9aHlfby1saXN0PiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9vdmVybGF5LW9wZW5lcicsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gT3ZlcmxheSBPcGVuZXIgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9zZXQtZm9jdXMnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFNldCBGb2N1cyA8L2E+IDwvbGk+IDwvdWw+IDwvbmF2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE2NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxoZWFkZXIgY2xhc3M9c2dfYy1zaXRlLWhlYWRlcj4gPGRpdiBjbGFzcz1zZ19jLXNpdGUtaGVhZGVyX19jb250YWluZXI+IDxidXR0b24gQGNsaWNrPXRvZ2dsZU5hdiBjbGFzcz1cXFwiaHlfdS1oaWRlQG1kIGpzLWFjdGl2ZSBzZ19jLXNpdGUtaGVhZGVyX190b2dnbGVidG5cXFwiIHR5cGU9YnV0dG9uIHJvbGU9YnV0dG9uPiA8c3BhbiBjbGFzcz1cXFwiXFxcIj48aSBjbGFzcz1cXFwiaHlfYy1pY29uIGh5X2MtaWNvbi0taGFtYnVyZ2VyXFxcIj48L2k+PC9zcGFuPiA8L2J1dHRvbj4gPGEgdi1saW5rPVxcXCJ7cGF0aDogJy9nZXQtc3RhcnRlZCd9XFxcIj4gPGltZyBjbGFzcz1sb2dvIHNyYz1cIiArIF9fd2VicGFja19yZXF1aXJlX18oODgpICsgXCIgYWx0PUxvZ28+IDwvYT4gPC9kaXY+IDwvaGVhZGVyPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE2OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkFsZXJ0PC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxhbGVydCB0eXBlPWVycm9yPlRoaXMgaXMgYW4gZXJyb3IgYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9aW5mbz5UaGlzIGlzIGFuIGluZm8gYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9c3VjY2Vzcz5UaGlzIGlzIGEgc3VjY2VzcyBhbGVydC48L2FsZXJ0PiA8YWxlcnQgdHlwZT1zdWNjZXNzIDpkaXNtaXNzaWJsZT1mYWxzZT5UaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPXN1Y2Nlc3MgOm9uLWNsb3NlZD1kaXNtaXNzQ2FsbEJhY2s+VGhpcyBpcyBhbiBhbGVydCB3aXRoIGNhbGxiYWNrLjwvYWxlcnQ+IDxhbGVydCB0eXBlPWluZm8gOnRpbWVvdXQ9NTAwMD5UaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy48L2FsZXJ0PiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O2FsZXJ0IHR5cGU9XFxcImVycm9yXFxcIiZndDtUaGlzIGlzIGFuIGVycm9yIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcImluZm9cXFwiJmd0O1RoaXMgaXMgYW4gaW5mbyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xcbiZsdDthbGVydCB0eXBlPVxcXCJzdWNjZXNzXFxcIiZndDtUaGlzIGlzIGEgc3VjY2VzcyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xcbiZsdDthbGVydCB0eXBlPVxcXCJzdWNjZXNzXFxcIiA6ZGlzbWlzc2libGU9XFxcImZhbHNlXFxcIiZndDtUaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiIDpvbi1jbG9zZWQ9XFxcImRpc21pc3NDYWxsQmFja1xcXCImZ3Q7VGhpcyBpcyBhbiBhbGVydCB3aXRoIGNhbGxiYWNrLiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiIDp0aW1lb3V0PVxcXCI1MDAwXFxcIiZndDtUaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy4mbHQ7L2FsZXJ0Jmd0O1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5Db2xsYXBzYWJsZSBQYW5lbDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XFxcIlBhbmVsIDFcXFwiIDppcy1vcGVuPXRydWU+IFBhbmVsIDEgY29udGVudCA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XFxcIlBhbmVsIDJcXFwiPiBQYW5lbCAyIGNvbnRlbnQgPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMVxcXCIgOmlzLW9wZW49XFxcInRydWVcXFwiJmd0O1xcbiBQYW5lbCAxIGNvbnRlbnRcXG4mbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xcbiZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMlxcXCImZ3Q7XFxuIFBhbmVsIDIgY29udGVudFxcbiZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkdldHRpbmcgU3RhcnRlZDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleSBoeV91LXNwYWNlLW1iLTFcXFwiPkluc3RhbGxhdGlvbjwvaDM+IDxoNCBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXkgaHlfdS1zcGFjZS1tYi0xXFxcIj5OUE08L2g0PiA8cHJlPlxcbiAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1iYXNoPlxcbm5wbSBpbnN0YWxsIGh5YnJpZC10aG9yaXVtXFxuICAgICAgIDwvY29kZT5cXG4gICAgIDwvcHJlPiA8aDQgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5IGh5X3Utc3BhY2UtbWItMVxcXCI+VXNhZ2U8L2g0PiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBVc2UgYXMgYSBwbHVnaW4gKHJlZ2lzdGVycyBhbGwgY29tcG9uZW50cyBnbG9iYWxseSk6IDwvcD4gPHByZT5cXG4gICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtamF2YXNjcmlwdD5cXG5pbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7XFxuaW1wb3J0IEh5YnJpZFRob3JpdW0gZnJvbSAnaHlicmlkLXRob3JpdW0nO1xcblxcblZ1ZS51c2UoSHlicmlkVGhvcml1bSk7XFxuXFxubmV3IFZ1ZSh7XFxuICBlbDogJyNhcHAnXFxufSk7XFxuICAgICAgIDwvY29kZT5cXG4gICAgIDwvcHJlPiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBVc2UgaW5kaXZpZHVhbCBjb21wb25lbnRzOiA8L3A+IDxwcmU+XFxuICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWphdmFzY3JpcHQ+XFxuaW1wb3J0IFZ1ZSBmcm9tICd2dWUnO1xcbmltcG9ydCB7IEFsZXJ0LCBTdGVwVHJhY2tlciB9IGZyb20gJ2h5YnJpZC10aG9yaXVtJztcXG5cXG5uZXcgVnVlKHtcXG4gIGVsOiAnI2FwcCcsXFxuICBjb21wb25lbnRzOiB7XFxuICAgIEFsZXJ0LFxcbiAgICBTdGVwVHJhY2tlclxcbiAgfVxcbn0pO1xcbiAgICAgICA8L2NvZGU+XFxuICAgICA8L3ByZT4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleSBoeV91LXNwYWNlLW1iLTFcXFwiPkNETiAoc2NyaXB0IHRhZyk8L2g0PiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBUaGUgaHlicmlkLXRob3JpdW0uanMgZmlsZSBpbiB0aGUgQ0ROIGNvbnRhaW5zIGFsbCB0aGUgY29tcG9uZW50cyBleHBvc2VkIG9uIGEgZ2xvYmFsIHdpbmRvdy5IeWJyaWRUaG9yaXVtIG9iamVjdC4gPC9wPiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBGaXJzdCwgaW5jbHVkZSB0aGUgSlMgYW5kIENTUyBmaWxlcyBpbiB5b3VyIHBhZ2U6IDwvcD4gPHByZT5cXG4gICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDtodG1sJmd0O1xcbiZsdDtoZWFkJmd0O1xcbiAgJmx0O2xpbmsgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIiBocmVmPVxcXCJodHRwczovL2Nkbi50ZWx1cy5kaWdpdGFsL3VpL2h5ZHJhLzAuNi40L2Jhc2UuY3NzXFxcIiBjaGFyc2V0PVxcXCJ1dGYtOFxcXCImZ3Q7XFxuICAmbHQ7bGluayByZWw9XFxcInN0eWxlc2hlZXRcXFwiIGhyZWY9XFxcInBhdGgvdG8vY2RuL2h5YnJpZC10aG9yaXVtLmNzc1xcXCImZ3Q7XFxuJmx0Oy9oZWFkJmd0O1xcbiZsdDtib2R5Jmd0O1xcbiAgJmx0OyEtLSBFeGFtcGxlIHVzYWdlIG9mIGFsZXJ0IC0tJmd0O1xcbiAgJmx0O2FsZXJ0IHR5cGU9XFxcImVycm9yXFxcIiZndDtUaGlzIGlzIGFuIGVycm9yIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuICAmbHQ7c2NyaXB0IHNyYz1cXFwicGF0aC90by92dWUuanNcXFwiJmd0OyZsdDsvc2NyaXB0Jmd0O1xcbiAgJmx0O3NjcmlwdCBzcmM9XFxcInBhdGgvdG8vY2RuL2h5YnJpZC10aG9yaXVtLmpzXFxcIiZndDsmbHQ7L3NjcmlwdCZndDtcXG4gICZsdDtzY3JpcHQgc3JjPVxcXCJwYXRoL3RvL2FwcC5qc1xcXCImZ3Q7Jmx0Oy9zY3JpcHQmZ3Q7XFxuJmx0Oy9ib2R5Jmd0O1xcbiZsdDsvaHRtbCZndDtcXG4gICAgICA8L2NvZGU+XFxuICAgIDwvcHJlPiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBUaGVuLCByZWdpc3RlciB0aGUgY29tcG9uZW50cyBnbG9iYWxseSBmb3IgdXNlIGluIHlvdXIgdGVtcGxhdGVzOiA8L3A+IDxwcmU+XFxuICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtamF2YXNjcmlwdD5cXG4vL2FwcC5qc1xcblxcblZ1ZS51c2UoSHlicmlkVGhvcml1bSk7XFxuXFxubmV3IFZ1ZSh7XFxuIGVsOiAnI2FwcCdcXG59KTtcXG4gICAgICA8L2NvZGU+XFxuICAgIDwvcHJlPiA8L2Rpdj4gPC9kaXY+PC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlRhYjwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8aHktaGVhZGVyPjwvaHktaGVhZGVyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5MZWdhbCArIE92ZXJsYXk8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHAgY2xhc3M9XFxcImh5X2MtY29weSBoeV9jLWNvcHktLWJvZHkgaHlfdC1ncmV5XFxcIj4gTG9yZW08bGVnYWwtY291bnRlciB2LW92ZXJsYXktb3BlbmVyPWxlZ2FsLW92ZXJsYXkgbGVnYWwta2V5PWNvbWJvLW9mZmVycyBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+IGlwc3VtPGxlZ2FsLWNvdW50ZXIgdi1vdmVybGF5LW9wZW5lcj1sZWdhbC1vdmVybGF5IGxlZ2FsLWtleT1ocy1yZWZlcnJhbC10ZXJtcyBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+IGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciA8bGVnYWwtY291bnRlciBhcHBzLXJlcXVpcmVtZW50IHYtb3ZlcmxheS1vcGVuZXI9bGVnYWwtb3ZlcmxheSBsZWdhbC1rZXk9YXBwcy1yZXF1aXJlbWVudCBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+YWRpcGlzY2luZyBlbGl0LCBzZWQgZG8gZWl1c21vZCB0ZW1wb3IgPGxlZ2FsLWNvdW50ZXIgdi1vdmVybGF5LW9wZW5lcj1sZWdhbC1vdmVybGF5IGxlZ2FsLWtleT0xLXllYXItb2ZmZXItc3RpbSBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+aW5jaWRpZHVudCB1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YS4gPGxlZ2FsLWNvdW50ZXIgdi1vdmVybGF5LW9wZW5lcj1sZWdhbC1vdmVybGF5IGxlZ2FsLWtleT1jb21iby1vZmZlcnMgbGVnYWwtbGFuZz1lbiBsZWdhbC1yZWdpb249YmM+PC9sZWdhbC1jb3VudGVyPiA8L3A+IDxvdmVybGF5LWNvbnRhaW5lcj4gPG92ZXJsYXkgb3ZlcmxheS1rZXk9bGVnYWwtb3ZlcmxheT4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PW92ZXJsYXktaGVhZGVyPlRlcm0gYW5kIGNvbmRpdGlvbnM8L2g0PiA8YXJ0aWNsZSBzbG90PW92ZXJsYXktYm9keT4gPGxlZ2FsLWNvbnRhaW5lcj48L2xlZ2FsLWNvbnRhaW5lcj4gPC9hcnRpY2xlPiA8L292ZXJsYXk+IDwvb3ZlcmxheS1jb250YWluZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7cCZndDtcXG4gTG9yZW0mbHQ7bGVnYWwtY291bnRlclxcbiAgIHYtb3ZlcmxheS1vcGVuZXI9XFxcImxlZ2FsLW92ZXJsYXlcXFwiXFxuICAgbGVnYWwta2V5PVxcXCJjb21iby1vZmZlcnNcXFwiXFxuICAgbGVnYWwtbGFuZz1cXFwiZW5cXFwiIGxlZ2FsLXJlZ2lvbj1cXFwiYmNcXFwiXFxuICAgJmd0OyZsdDsvbGVnYWwtY291bnRlciZndDtcXG4gIGlwc3VtJmx0O2xlZ2FsLWNvdW50ZXJcXG4gICB2LW92ZXJsYXktb3BlbmVyPVxcXCJsZWdhbC1vdmVybGF5XFxcIlxcbiAgIGxlZ2FsLWtleT1cXFwiaHMtcmVmZXJyYWwtdGVybXNcXFwiXFxuICAgbGVnYWwtbGFuZz1cXFwiZW5cXFwiIGxlZ2FsLXJlZ2lvbj1cXFwiYmNcXFwiXFxuICAgJmd0OyZsdDsvbGVnYWwtY291bnRlciZndDsgZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyXFxuICAgJmx0O2xlZ2FsLWNvdW50ZXIgYXBwcy1yZXF1aXJlbWVudFxcbiAgICAgdi1vdmVybGF5LW9wZW5lcj1cXFwibGVnYWwtb3ZlcmxheVxcXCJcXG4gICAgIGxlZ2FsLWtleT1cXFwiYXBwcy1yZXF1aXJlbWVudFxcXCJcXG4gICAgIGxlZ2FsLWxhbmc9XFxcImVuXFxcIiBsZWdhbC1yZWdpb249XFxcImJjXFxcIlxcbiAgICAgJmd0OyZsdDsvbGVnYWwtY291bnRlciZndDthZGlwaXNjaW5nIGVsaXQsXFxuIHNlZCBkbyBlaXVzbW9kIHRlbXBvciAmbHQ7bGVnYWwtY291bnRlclxcbiAgIHYtb3ZlcmxheS1vcGVuZXI9XFxcImxlZ2FsLW92ZXJsYXlcXFwiXFxuICAgbGVnYWwta2V5PVxcXCIxLXllYXItb2ZmZXItc3RpbVxcXCJcXG4gICBsZWdhbC1sYW5nPVxcXCJlblxcXCIgbGVnYWwtcmVnaW9uPVxcXCJiY1xcXCJcXG4gICAmZ3Q7Jmx0Oy9sZWdhbC1jb3VudGVyJmd0O2luY2lkaWR1bnQgdXQgbGFib3JlIGV0IGRvbG9yZSBtYWduYSBhbGlxdWEuXFxuICZsdDtsZWdhbC1jb3VudGVyXFxuICAgdi1vdmVybGF5LW9wZW5lcj1cXFwibGVnYWwtb3ZlcmxheVxcXCJcXG4gICBsZWdhbC1rZXk9XFxcImNvbWJvLW9mZmVyc1xcXCJcXG4gICBsZWdhbC1sYW5nPVxcXCJlblxcXCIgbGVnYWwtcmVnaW9uPVxcXCJiY1xcXCJcXG4gICAmZ3Q7Jmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xcbiAmbHQ7L3AmZ3Q7XFxuIFxcbiAmbHQ7b3ZlcmxheS1jb250YWluZXImZ3Q7XFxuICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cXFwibGVnYWwtb3ZlcmxheVxcXCImZ3Q7XFxuICAgICZsdDtoNCBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1cXFwib3ZlcmxheS1oZWFkZXJcXFwiJmd0O1Rlcm0gYW5kIGNvbmRpdGlvbnMmbHQ7L2g0Jmd0O1xcbiAgICAmbHQ7YXJ0aWNsZSBzbG90PVxcXCJvdmVybGF5LWJvZHlcXFwiJmd0O1xcbiAgICAgICZsdDtsZWdhbC1jb250YWluZXImZ3Q7Jmx0Oy9sZWdhbC1jb250YWluZXImZ3Q7XFxuICAgICZsdDsvYXJ0aWNsZSZndDtcXG4gICZsdDsvb3ZlcmxheSZndDtcXG4mbHQ7L292ZXJsYXktY29udGFpbmVyJmd0O1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTczICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+TGVnYWwgU3lzdGVtPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxwIGNsYXNzPVxcXCJoeV9jLWNvcHkgaHlfYy1jb3B5LS1ib2R5IGh5X3QtZ3JleVxcXCI+IExvcmVtIGlwc3VtPGxlZ2FsLWNvdW50ZXIgbGVnYWwta2V5PWhzLXJlZmVycmFsLXRlcm1zIGxlZ2FsLWxhbmc9ZW4gbGVnYWwtcmVnaW9uPWJjPjwvbGVnYWwtY291bnRlcj4gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdCwgc2VkIGRvIGVpdXNtb2QgdGVtcG9yIGluY2lkaWR1bnQgdXQgbGFib3JlIGV0IGRvbG9yZSBtYWduYSBhbGlxdWEuIDxsZWdhbC1jb3VudGVyIGxlZ2FsLWtleT0xLXllYXItb2ZmZXItc3RpbSBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+IDwvcD4gPC9kaXY+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxsZWdhbC1jb250YWluZXI+PC9sZWdhbC1jb250YWluZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7bGVnYWwtY291bnRlclxcbiAgbGVnYWwta2V5PVxcXCJocy1yZWZlcnJhbC10ZXJtc1xcXCJcXG4gIGxlZ2FsLWxhbmc9XFxcImVuXFxcIlxcbiAgbGVnYWwtcmVnaW9uPVxcXCJiY1xcXCJcXG4mbHQ7L2xlZ2FsLWNvdW50ZXImZ3Q7XFxuJmx0O2xlZ2FsLWNvbnRhaW5lciZndDsmbHQ7L2xlZ2FsLWNvbnRhaW5lciZndDtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1qYXZhc2NyaXB0PiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1qYXZhc2NyaXB0PlxcbmxldCB2bSA9IG5ldyBWdWUoe1xcbiBlbDogJ2JvZHknLFxcbiBkYXRhKCkge1xcbiAgIHJldHVybiB7XFxuICAgICBsaWdlckVuZFBvaW50OiAnaHR0cHM6Ly9hcGkuY21zLnRlbHVzLmNvbS9sZWdhbHMnLFxcbiAgICAgbGlnZXJBcHBsaWNhdGlvbktleTogJ2I5NzM4ZDY3Yjg5ZGZjNzgyNzQ2ZDRhOWNmNGExMDkzJ1xcbiAgIH07XFxuIH0sXFxuIGNvbXBvbmVudHM6IHtcXG4gICBMZWdhbENvdW50ZXIsXFxuICAgTGVnYWxDb250YWluZXJcXG4gfVxcbn0pO1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTogTGVnYWwgQ291bnRlcjwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5PdmVybGF5IFN5c3RlbTwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8cD4gPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPW92ZXJsYXktMSBjbGFzcz1cXFwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLWxpbmsgaHlfdC1wdXJwbGVcXFwiIHR5cGU9YnV0dG9uIHJvbGU9YnV0dG9uPiBPcGVuIG92ZXJsYXkgIzEgPGkgY2xhc3M9XFxcImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cXFwiPjwvaT4gPC9idXR0b24+IDwvcD4gPHA+IDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1vdmVybGF5LTIgY2xhc3M9XFxcImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXFxcIiB0eXBlPWJ1dHRvbiByb2xlPWJ1dHRvbj4gT3BlbiBvdmVybGF5ICMyIDxpIGNsYXNzPVxcXCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXFxcIj48L2k+IDwvYnV0dG9uPiA8L3A+IDxvdmVybGF5LWNvbnRhaW5lcj4gPG92ZXJsYXkgb3ZlcmxheS1rZXk9b3ZlcmxheS0xPiA8aDQgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9b3ZlcmxheS1oZWFkZXI+VGhpcyBpcyBvdmVybGF5ICMxPC9oND4gPGFydGljbGUgc2xvdD1vdmVybGF5LWJvZHk+IE92ZXJsYXkgIzEgYm9keSA8L2FydGljbGU+IDwvb3ZlcmxheT4gPG92ZXJsYXkgb3ZlcmxheS1rZXk9b3ZlcmxheS0yPiA8aDQgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9b3ZlcmxheS1oZWFkZXI+VGhpcyBpcyBvdmVybGF5ICMyPC9oND4gPGFydGljbGUgc2xvdD1vdmVybGF5LWJvZHk+IE92ZXJsYXkgIzIgYm9keSA8L2FydGljbGU+IDwvb3ZlcmxheT4gPC9vdmVybGF5LWNvbnRhaW5lcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDtvdmVybGF5LWNvbnRhaW5lciZndDtcXG4gJmx0O292ZXJsYXkgb3ZlcmxheS1rZXk9XFxcIm92ZXJsYXktMVxcXCImZ3Q7XFxuICAgJmx0O2g0ICBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1cXFwib3ZlcmxheS1oZWFkZXJcXFwiJmd0O1xcbiAgIFRoaXMgaXMgb3ZlcmxheSAjMVxcbiAgICZsdDsvaDQmZ3Q7XFxuICAgJmx0O2FydGljbGUgc2xvdD1cXFwib3ZlcmxheS1ib2R5XFxcIiZndDtcXG4gICAgIE92ZXJsYXkgIzEgYm9keVxcbiAgICZsdDsvYXJ0aWNsZSZndDtcXG4gJmx0Oy9vdmVybGF5Jmd0O1xcbiAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cXFwib3ZlcmxheS0yXFxcIiZndDtcXG4gICAmbHQ7aDQgIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PVxcXCJvdmVybGF5LWhlYWRlclxcXCImZ3Q7XFxuICAgVGhpcyBpcyBvdmVybGF5ICMxXFxuICAgJmx0Oy9oNCZndDtcXG4gICAmbHQ7YXJ0aWNsZSBzbG90PVxcXCJvdmVybGF5LWJvZHlcXFwiJmd0O1xcbiAgICAgT3ZlcmxheSAjMiBib2R5XFxuICAgJmx0Oy9hcnRpY2xlJmd0O1xcbiAmbHQ7L292ZXJsYXkmZ3Q7XFxuJmx0Oy9vdmVybGF5LWNvbnRhaW5lciZndDtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTc1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+U3Bpbm5lcjwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8bGFiZWwgY2xhc3M9XFxcImh5X2MtY29udHJvbCBoeV9jLWNvbnRyb2wtLWNoZWNrYm94XFxcIj4gPHNwYW4gY2xhc3M9aHlfYy1jb250cm9sX19sYWJlbC10ZXh0PkZ1bGwgU2NyZWVuPC9zcGFuPiA8aW5wdXQgdHlwZT1jaGVja2JveCB2LW1vZGVsPWlzRnVsbFNjcmVlbiAvPiA8ZGl2IGNsYXNzPWh5X2MtY29udHJvbF9faW5kaWNhdG9yPjwvZGl2PiA8L2xhYmVsPiA8YnV0dG9uIEBjbGljaz1zaG93U3Bpbm5lciBjbGFzcz1cXFwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLXJhaXNlZCBoeV90LWdyZWVuXFxcIiB0eXBlPWJ1dHRvbj4gU2hvdyBTcGlubmVyIDwvYnV0dG9uPiA8c3Bpbm5lciA6ZnVsbC1zY3JlZW49aXNGdWxsU2NyZWVuIDp0ZXh0PW1zZz48L3NwaW5uZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7c3Bpbm5lciB0ZXh0PVxcXCJJIHdpbGwgY2xvc2UgaW4gMyBzZWNvbmRzXFxcIiA6ZnVsbC1zY3JlZW49XFxcInRydWVcXFwiJmd0OyZsdDsvc3Bpbm5lciZndDtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTc2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+U3RlcCBUcmFja2VyPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxzdGVwLXRyYWNrZXIgOmN1cnJlbnQtc3RlcD1zdGVwVHJhY2tlckN1cnJlbnRTdGVwIDpjb25maWc9c3RlcFRyYWNrZXJDb25maWc+PC9zdGVwLXRyYWNrZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDtzdGVwLXRyYWNrZXJcXG46Y3VycmVudC1zdGVwPVxcXCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXFxcIlxcbjpjb25maWc9XFxcInN0ZXBUcmFja2VyQ29uZmlnXFxcIiZndDtcXG4mbHQ7L3N0ZXAtdHJhY2tlciZndDtcXG4gICAgICAgICA8L2NvZGU+XFxuICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9amF2YXNjcmlwdD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtanM+XFxubGV0IHN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xcbmxldCBzdGVwVHJhY2tlckNvbmZpZyA9IHtcXG4gIGlzQ2xpY2thYmxlOiB0cnVlLFxcbiAgc3RlcHM6IFtcXG4gICAge1xcbiAgICAgIHRpdGxlOiAnU3RlcCBBJyxcXG4gICAgICBsaW5rOiAnJyxcXG4gICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XFxuICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAwO1xcbiAgICAgIH1cXG4gICAgfSwge1xcbiAgICAgIHRpdGxlOiAnU3RlcCBCJyxcXG4gICAgICBsaW5rOiAnJyxcXG4gICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XFxuICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAxO1xcbiAgICAgIH1cXG4gICAgfSwge1xcbiAgICAgIHRpdGxlOiAnU3RlcCBDJyxcXG4gICAgICBsaW5rOiAnJyxcXG4gICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XFxuICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xcbiAgICAgIH1cXG4gICAgfVxcbiAgXVxcbn07XFxubGV0IHZtID0gbmV3IFZ1ZSh7XFxuICBlbDogJ2JvZHknLFxcbiAgZGF0YToge1xcbiAgICBzdGVwVHJhY2tlckNvbmZpZyxcXG4gICAgc3RlcFRyYWNrZXJDdXJyZW50U3RlcFxcbn0sXFxuICBjb21wb25lbnRzOiB7XFxuICAgIFN0ZXBUcmFja2VyXFxuICB9XFxufSk7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlRhYjwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8dGFicyBjbGFzcz1cXFwiYy1wcmljZS1sb29rdXAgaHlfby1sYXlvdXRfX2l0ZW0gaHlfdS1zaXplLTNvZjNAc20gaHlfdS1zaXplLTRvZjRAbWQgaHlfdS1zaXplLTZvZjEyQGxnXFxcIj4gPHRhYiBsYWJlbD1cXFwiVGFiIDFcXFwiPiA8cD4gVGFiIDEgY29udGVudCA8L3A+IDwvdGFiPiA8dGFiIGxhYmVsPVxcXCJUYWIgMlxcXCI+IDxwPiBUYWIgMiBjb250ZW50IDwvcD4gPC90YWI+IDx0YWIgbGFiZWw9XFxcIlRhYiAzXFxcIiA6aXMtZGlzYWJsZWQ9dHJ1ZT4gPHA+IFRhYiAzIGNvbnRlbnQgPC9wPiA8L3RhYj4gPC90YWJzPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O3RhYnMmZ3Q7XFxuICZsdDt0YWIgbGFiZWw9XFxcIlRhYiAxXFxcIiZndDtcXG4gICAmbHQ7cCZndDtcXG4gICAgIFRhYiAxIGNvbnRlbnRcXG4gICAmbHQ7L3AmZ3Q7XFxuICZsdDsvdGFiJmd0O1xcbiAmbHQ7dGFiIGxhYmVsPVxcXCJUYWIgMlxcXCImZ3Q7XFxuICAgJmx0O3AmZ3Q7XFxuICAgICBUYWIgMiBjb250ZW50XFxuICAgJmx0Oy9wJmd0O1xcbiAmbHQ7L3RhYiZndDtcXG4gJmx0O3RhYiBsYWJlbD1cXFwiVGFiIDNcXFwiIDppcy1kaXNhYmxlZD1cXFwidHJ1ZVxcXCImZ3Q7XFxuICAgJmx0O3AmZ3Q7XFxuICAgICBUYWIgMyBjb250ZW50XFxuICAgJmx0Oy9wJmd0O1xcbiAmbHQ7L3RhYiZndDtcXG4mbHQ7L3RhYnMmZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgdi1pZj1pc1Zpc2libGUgdHJhbnNpdGlvbj1mYWRlIGNsYXNzPWMtYWxlcnQgOmNsYXNzPVxcXCInYy1hbGVydC0tJyArIHR5cGVcXFwiIDpjbGFzcz1cXFwieyAnYy1hbGVydC0tZGlzbWlzc2libGUnOiBkaXNtaXNzaWJsZSB9XFxcIiByb2xlPWFsZXJ0PiA8YnV0dG9uIHYtaWY9ZGlzbWlzc2libGUgQGNsaWNrPWRpc21pc3MgdHlwZT1idXR0b24gY2xhc3M9Yy1hbGVydF9fY2xvc2UtYnV0dG9uIGFyaWEtbGFiZWw9Q2xvc2U+IDxzcGFuIGFyaWEtaGlkZGVuPXRydWU+JnRpbWVzOzwvc3Bhbj4gPHNwYW4gY2xhc3M9aHlfdS1pbnZpc2libGU+Q2xvc2U8L3NwYW4+IDwvYnV0dG9uPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1jb2xsYXBzYWJsZS1wYW5lbD4gPGgzIEBjbGljay5wcmV2ZW50PXRvZ2dsZU9wZW4gOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2MtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlci0tb3Blbic6IGlzT3BlblxcbiAgICB9XFxcIiBjbGFzcz1cXFwiYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyIGh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIiB2LWh0bWw9bGFiZWw+IDwvaDM+IDxkaXYgY2xhc3M9Yy1jb2xsYXBzYWJsZS1wYW5lbF9fYm9keSA6Y2xhc3M9XFxcIntcXG4gICAgJ2MtY29sbGFwc2FibGUtcGFuZWxfX2JvZHktLW9wZW4nOiBpc09wZW5cXG4gIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxODAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCJcIjtcblxuLyoqKi8gfSxcbi8qIDE4MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1sZWdhbC1jb250YWluZXI+IDxvbCBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcl9fb3JkZXJlZC1saXN0PiA8bGkgdi1zZXQtZm9jdXM9bGVnYWwuaXNTZWxlY3RlZCBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtIDpjbGFzcz1cXFwie1xcbiAgICAgICdjLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtLS1hY3RpdmUnOiBsZWdhbC5pc1NlbGVjdGVkXFxuICAgIH1cXFwiIHYtZm9yPVxcXCJsZWdhbCBpbiBpbmRleGVkTGVnYWxzXFxcIiB2LWh0bWw9bGVnYWwuY29udGVudD4gPC9saT4gPC9vbD4gPHVsIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX191bm9yZGVyZWQtbGlzdD4gPGxpIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gdi1mb3I9XFxcImxlZ2FsIGluIG5vbkluZGV4ZWRMZWdhbHNcXFwiIHYtaHRtbD1sZWdhbC5jb250ZW50PiA8L2xpPiA8L3VsPiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxODIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8c3VwIGNsYXNzPWMtbGVnYWwtc3VwPiA8YSBocmVmPSMgQGNsaWNrLnByZXZlbnQ9Y2xpY2tIYW5kbGVyPiB7e2xlZ2FsQ291bnRlcn19IDwvYT4gPC9zdXA+IFwiO1xuXG4vKioqLyB9LFxuLyogMTgzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLW92ZXJsYXktY29udGFpbmVyPiA8ZGl2IGNsYXNzPWMtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW4gOmNsYXNzPVxcXCJ7XFxuICAgICAgICAnYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbi0tYWN0aXZlJzogaXNWaXNpYmxlXFxuICAgIH1cXFwiIEBjbGljay5wcmV2ZW50PVxcXCJpc1Zpc2libGU9ZmFsc2VcXFwiPiA8L2Rpdj4gPGRpdiBjbGFzcz1jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5cyA6Y2xhc3M9XFxcIntcXG4gICAgICAgICdjLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5cy0tYWN0aXZlJzogaXNWaXNpYmxlXFxuICAgIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8YXJ0aWNsZSBjbGFzcz1jLW92ZXJsYXkgdi1zaG93PWlzVmlzaWJsZT4gPGRpdiBjbGFzcz1jLW92ZXJsYXlfX2JvZHk+IDxzbG90IG5hbWU9b3ZlcmxheS1ib2R5Pjwvc2xvdD4gPC9kaXY+IDxoZWFkZXIgY2xhc3M9Yy1vdmVybGF5X19oZWFkZXI+IDxzbG90IG5hbWU9b3ZlcmxheS1oZWFkZXI+PC9zbG90PiA8YnV0dG9uIHR5cGU9YnV0dG9uIGNsYXNzPWMtb3ZlcmxheV9fY2xvc2UtYnV0dG9uIGFyaWEtbGFiZWw9Q2xvc2UgdGFiaW5kZXg9MCBAY2xpY2sucHJldmVudD1jbG9zZU92ZXJsYXk+PC9idXR0b24+IDwvaGVhZGVyPiA8L2FydGljbGU+IFwiO1xuXG4vKioqLyB9LFxuLyogMTg1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiB2LXNob3c9YWN0aXZlIGNsYXNzPWMtc3Bpbm5lciA6Y2xhc3M9XFxcInsgJ2Mtc3Bpbm5lci0tZnVsbHNjcmVlbic6IGZ1bGxTY3JlZW4gfVxcXCI+IDxzdmcgdmlld0JveD1cXFwiMCAwIDEwMCAxMDBcXFwiIHdpZHRoPTAgaGVpZ2h0PTA+IDxjaXJjbGUgc3Ryb2tlLXdpZHRoPTQgZmlsbD1ub25lIHN0cm9rZS1saW5lY2FwPXJvdW5kIHN0cm9rZS1kYXNob2Zmc2V0PTAgY3g9NTAgY3k9NTAgcj0yMD48L2NpcmNsZT4gPC9zdmc+IDxwIGNsYXNzPVxcXCJjLXNwaW5uZXJfX3RleHQgaHlfYy1jb3B5IGh5X3UtZm9udC13ZWlnaHQtLW1lZGl1bVxcXCIgdi1pZj0hIXRleHQ+e3t0ZXh0fX08L3A+IDwvZGl2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE4NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjx1bCBjbGFzcz1jLXN0ZXAtdHJhY2tlcj4gPGxpIGNsYXNzPWMtc3RlcC10cmFja2VyX19zdGVwIDpjbGFzcz1cXFwie1xcbiAgICAgICdjLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUnOiBjdXJyZW50U3RlcCA+ICRpbmRleCxcXG4gICAgICAnYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSc6IGN1cnJlbnRTdGVwID09PSAkaW5kZXgsXFxuICAgICAgJ2Mtc3RlcC10cmFja2VyX19zZXRwLS1jbGlja2FibGUnOiAoY3VycmVudFN0ZXAgPiAkaW5kZXggJiYgY29uZmlnLmlzQ2xpY2thYmxlKVxcbiAgfVxcXCIgdi1mb3I9XFxcInN0ZXAgaW4gY29uZmlnLnN0ZXBzXFxcIj4gPGEgOmhyZWY9XFxcInN0ZXAubGluayB8fCBmYWxzZVxcXCIgQGNsaWNrPVxcXCJjbGlja0hhbmRsZXIoJGV2ZW50LCBzdGVwLCAkaW5kZXgpXFxcIiB2LWlmPWNvbmZpZy5pc0NsaWNrYWJsZT4gPHNwYW4gY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX2ljb24+PC9zcGFuPiA8c3BhbiBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9fbGFiZWw+e3skaW5kZXggKyAxfX0uIHt7c3RlcC50aXRsZX19PC9zcGFuPiA8L2E+IDxzcGFuIHYtZWxzZSBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9faWNvbj48L3NwYW4+IDxzcGFuIHYtZWxzZSBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9fbGFiZWw+e3skaW5kZXggKyAxfX0uIHt7c3RlcC50aXRsZX19PC9zcGFuPiA8L2xpPiA8L3VsPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE4NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy10YWJzX19wYW5lIDpjbGFzcz1cXFwie1xcbiAgICAnYy10YWJzX19wYW5lLS1hY3RpdmUnOiBpc1Zpc2libGVcXG4gIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE4OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy10YWJzPiA8dWwgY2xhc3M9Yy10YWJzX19oZWFkZXI+IDxsaSB2LWZvcj1cXFwidGFiIGluIHRhYnNcXFwiIGNsYXNzPWMtdGFic19faGVhZGVyLWl0ZW0gOmNsYXNzPVxcXCJ7XFxuICAgICAgICAgICAgICAgICdjLXRhYnNfX2hlYWRlci1pdGVtLS1hY3RpdmUnOiAoJGluZGV4ID09PSBhY3RpdmVUYWJJbmRleCksXFxuICAgICAgICAgICAgICAgICdjLXRhYnNfX2hlYWRlci1pdGVtLS1kaXNhYmxlZCc6IHRhYi5pc0Rpc2FibGVkXFxuICAgICAgICAgICAgICB9XFxcIiA6ZGlzYWJsZWQ9dGFiLmRpc2FibGVkPiA8YSBocmVmPSMgQGNsaWNrLnByZXZlbnQ9XFxcImhhbmRsZVRhYkxpc3RDbGljaygkaW5kZXgsIHRhYilcXFwiIHYtaHRtbD10YWIubGFiZWw+PC9hPiA8L2xpPiA8L3VsPiA8ZGl2IGNsYXNzPWMtdGFic19fYm9keT4gPHNsb3Q+PC9zbG90PiA8L2Rpdj4gPC9kaXY+IFwiO1xuXG4vKioqLyB9LFxuLyogMTg5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMTQpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0NSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY2KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjE1KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDYpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Nylcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDcpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OClcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDgpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2OSlcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNilcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ5KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzApXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTk0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUwKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzEpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTk1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcyKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTczKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Milcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc0KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mylcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc1KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NClcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc2KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIwMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc3KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIwMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjE3KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTYpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3OClcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyMDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIxOClcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU3KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzkpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMjAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMTkpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1OClcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgwKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIwNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjIwKVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTkpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4MSlcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyMDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIyMSlcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYwKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODIpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMjA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMjIpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgzKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjIzKVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjIpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4NClcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyMDggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIyNClcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODUpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMjA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMjUpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NClcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTg2KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTg3KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjI2KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4OClcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyMTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIVxuXHQgKiB2dWUtcm91dGVyIHYwLjcuMTNcblx0ICogKGMpIDIwMTYgRXZhbiBZb3Vcblx0ICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuXHQgKi9cblx0KGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcblx0ICAgdHJ1ZSA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcblx0ICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuXHQgIGdsb2JhbC5WdWVSb3V0ZXIgPSBmYWN0b3J5KCk7XG5cdH0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cdFxuXHQgIHZhciBiYWJlbEhlbHBlcnMgPSB7fTtcblx0XG5cdCAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuXHQgICAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIGZ1bmN0aW9uIFRhcmdldChwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkge1xuXHQgICAgdGhpcy5wYXRoID0gcGF0aDtcblx0ICAgIHRoaXMubWF0Y2hlciA9IG1hdGNoZXI7XG5cdCAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG5cdCAgfVxuXHRcblx0ICBUYXJnZXQucHJvdG90eXBlID0ge1xuXHQgICAgdG86IGZ1bmN0aW9uIHRvKHRhcmdldCwgY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIGRlbGVnYXRlID0gdGhpcy5kZWxlZ2F0ZTtcblx0XG5cdCAgICAgIGlmIChkZWxlZ2F0ZSAmJiBkZWxlZ2F0ZS53aWxsQWRkUm91dGUpIHtcblx0ICAgICAgICB0YXJnZXQgPSBkZWxlZ2F0ZS53aWxsQWRkUm91dGUodGhpcy5tYXRjaGVyLnRhcmdldCwgdGFyZ2V0KTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy5tYXRjaGVyLmFkZCh0aGlzLnBhdGgsIHRhcmdldCk7XG5cdFxuXHQgICAgICBpZiAoY2FsbGJhY2spIHtcblx0ICAgICAgICBpZiAoY2FsbGJhY2subGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbXVzdCBoYXZlIGFuIGFyZ3VtZW50IGluIHRoZSBmdW5jdGlvbiBwYXNzZWQgdG8gYHRvYFwiKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5tYXRjaGVyLmFkZENoaWxkKHRoaXMucGF0aCwgdGFyZ2V0LCBjYWxsYmFjaywgdGhpcy5kZWxlZ2F0ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gTWF0Y2hlcih0YXJnZXQpIHtcblx0ICAgIHRoaXMucm91dGVzID0ge307XG5cdCAgICB0aGlzLmNoaWxkcmVuID0ge307XG5cdCAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcblx0ICB9XG5cdFxuXHQgIE1hdGNoZXIucHJvdG90eXBlID0ge1xuXHQgICAgYWRkOiBmdW5jdGlvbiBhZGQocGF0aCwgaGFuZGxlcikge1xuXHQgICAgICB0aGlzLnJvdXRlc1twYXRoXSA9IGhhbmRsZXI7XG5cdCAgICB9LFxuXHRcblx0ICAgIGFkZENoaWxkOiBmdW5jdGlvbiBhZGRDaGlsZChwYXRoLCB0YXJnZXQsIGNhbGxiYWNrLCBkZWxlZ2F0ZSkge1xuXHQgICAgICB2YXIgbWF0Y2hlciA9IG5ldyBNYXRjaGVyKHRhcmdldCk7XG5cdCAgICAgIHRoaXMuY2hpbGRyZW5bcGF0aF0gPSBtYXRjaGVyO1xuXHRcblx0ICAgICAgdmFyIG1hdGNoID0gZ2VuZXJhdGVNYXRjaChwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSk7XG5cdFxuXHQgICAgICBpZiAoZGVsZWdhdGUgJiYgZGVsZWdhdGUuY29udGV4dEVudGVyZWQpIHtcblx0ICAgICAgICBkZWxlZ2F0ZS5jb250ZXh0RW50ZXJlZCh0YXJnZXQsIG1hdGNoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgY2FsbGJhY2sobWF0Y2gpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIGdlbmVyYXRlTWF0Y2goc3RhcnRpbmdQYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChwYXRoLCBuZXN0ZWRDYWxsYmFjaykge1xuXHQgICAgICB2YXIgZnVsbFBhdGggPSBzdGFydGluZ1BhdGggKyBwYXRoO1xuXHRcblx0ICAgICAgaWYgKG5lc3RlZENhbGxiYWNrKSB7XG5cdCAgICAgICAgbmVzdGVkQ2FsbGJhY2soZ2VuZXJhdGVNYXRjaChmdWxsUGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFRhcmdldChzdGFydGluZ1BhdGggKyBwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRoLCBoYW5kbGVyKSB7XG5cdCAgICB2YXIgbGVuID0gMDtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gcm91dGVBcnJheS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgbGVuICs9IHJvdXRlQXJyYXlbaV0ucGF0aC5sZW5ndGg7XG5cdCAgICB9XG5cdFxuXHQgICAgcGF0aCA9IHBhdGguc3Vic3RyKGxlbik7XG5cdCAgICB2YXIgcm91dGUgPSB7IHBhdGg6IHBhdGgsIGhhbmRsZXI6IGhhbmRsZXIgfTtcblx0ICAgIHJvdXRlQXJyYXkucHVzaChyb3V0ZSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBlYWNoUm91dGUoYmFzZVJvdXRlLCBtYXRjaGVyLCBjYWxsYmFjaywgYmluZGluZykge1xuXHQgICAgdmFyIHJvdXRlcyA9IG1hdGNoZXIucm91dGVzO1xuXHRcblx0ICAgIGZvciAodmFyIHBhdGggaW4gcm91dGVzKSB7XG5cdCAgICAgIGlmIChyb3V0ZXMuaGFzT3duUHJvcGVydHkocGF0aCkpIHtcblx0ICAgICAgICB2YXIgcm91dGVBcnJheSA9IGJhc2VSb3V0ZS5zbGljZSgpO1xuXHQgICAgICAgIGFkZFJvdXRlKHJvdXRlQXJyYXksIHBhdGgsIHJvdXRlc1twYXRoXSk7XG5cdFxuXHQgICAgICAgIGlmIChtYXRjaGVyLmNoaWxkcmVuW3BhdGhdKSB7XG5cdCAgICAgICAgICBlYWNoUm91dGUocm91dGVBcnJheSwgbWF0Y2hlci5jaGlsZHJlbltwYXRoXSwgY2FsbGJhY2ssIGJpbmRpbmcpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjYWxsYmFjay5jYWxsKGJpbmRpbmcsIHJvdXRlQXJyYXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbWFwIChjYWxsYmFjaywgYWRkUm91dGVDYWxsYmFjaykge1xuXHQgICAgdmFyIG1hdGNoZXIgPSBuZXcgTWF0Y2hlcigpO1xuXHRcblx0ICAgIGNhbGxiYWNrKGdlbmVyYXRlTWF0Y2goXCJcIiwgbWF0Y2hlciwgdGhpcy5kZWxlZ2F0ZSkpO1xuXHRcblx0ICAgIGVhY2hSb3V0ZShbXSwgbWF0Y2hlciwgZnVuY3Rpb24gKHJvdXRlKSB7XG5cdCAgICAgIGlmIChhZGRSb3V0ZUNhbGxiYWNrKSB7XG5cdCAgICAgICAgYWRkUm91dGVDYWxsYmFjayh0aGlzLCByb3V0ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5hZGQocm91dGUpO1xuXHQgICAgICB9XG5cdCAgICB9LCB0aGlzKTtcblx0ICB9XG5cdFxuXHQgIHZhciBzcGVjaWFscyA9IFsnLycsICcuJywgJyonLCAnKycsICc/JywgJ3wnLCAnKCcsICcpJywgJ1snLCAnXScsICd7JywgJ30nLCAnXFxcXCddO1xuXHRcblx0ICB2YXIgZXNjYXBlUmVnZXggPSBuZXcgUmVnRXhwKCcoXFxcXCcgKyBzcGVjaWFscy5qb2luKCd8XFxcXCcpICsgJyknLCAnZycpO1xuXHRcblx0ICB2YXIgbm9XYXJuaW5nID0gZmFsc2U7XG5cdCAgZnVuY3Rpb24gd2Fybihtc2cpIHtcblx0ICAgIGlmICghbm9XYXJuaW5nICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJvdXRlcl0gJyArIG1zZyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0cnlEZWNvZGUodXJpLCBhc0NvbXBvbmVudCkge1xuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIGFzQ29tcG9uZW50ID8gZGVjb2RlVVJJQ29tcG9uZW50KHVyaSkgOiBkZWNvZGVVUkkodXJpKTtcblx0ICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgd2FybignbWFsZm9ybWVkIFVSSScgKyAoYXNDb21wb25lbnQgPyAnIGNvbXBvbmVudDogJyA6ICc6ICcpICsgdXJpKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGlzQXJyYXkodGVzdCkge1xuXHQgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh0ZXN0KSA9PT0gXCJbb2JqZWN0IEFycmF5XVwiO1xuXHQgIH1cblx0XG5cdCAgLy8gQSBTZWdtZW50IHJlcHJlc2VudHMgYSBzZWdtZW50IGluIHRoZSBvcmlnaW5hbCByb3V0ZSBkZXNjcmlwdGlvbi5cblx0ICAvLyBFYWNoIFNlZ21lbnQgdHlwZSBwcm92aWRlcyBhbiBgZWFjaENoYXJgIGFuZCBgcmVnZXhgIG1ldGhvZC5cblx0ICAvL1xuXHQgIC8vIFRoZSBgZWFjaENoYXJgIG1ldGhvZCBpbnZva2VzIHRoZSBjYWxsYmFjayB3aXRoIG9uZSBvciBtb3JlIGNoYXJhY3RlclxuXHQgIC8vIHNwZWNpZmljYXRpb25zLiBBIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGNvbnN1bWVzIG9uZSBvciBtb3JlIGlucHV0XG5cdCAgLy8gY2hhcmFjdGVycy5cblx0ICAvL1xuXHQgIC8vIFRoZSBgcmVnZXhgIG1ldGhvZCByZXR1cm5zIGEgcmVnZXggZnJhZ21lbnQgZm9yIHRoZSBzZWdtZW50LiBJZiB0aGVcblx0ICAvLyBzZWdtZW50IGlzIGEgZHluYW1pYyBvZiBzdGFyIHNlZ21lbnQsIHRoZSByZWdleCBmcmFnbWVudCBhbHNvIGluY2x1ZGVzXG5cdCAgLy8gYSBjYXB0dXJlLlxuXHQgIC8vXG5cdCAgLy8gQSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjb250YWluczpcblx0ICAvL1xuXHQgIC8vICogYHZhbGlkQ2hhcnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgdmFsaWQgY2hhcmFjdGVycywgb3Jcblx0ICAvLyAqIGBpbnZhbGlkQ2hhcnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgaW52YWxpZCBjaGFyYWN0ZXJzXG5cdCAgLy8gKiBgcmVwZWF0YDogdHJ1ZSBpZiB0aGUgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY2FuIHJlcGVhdFxuXHRcblx0ICBmdW5jdGlvbiBTdGF0aWNTZWdtZW50KHN0cmluZykge1xuXHQgICAgdGhpcy5zdHJpbmcgPSBzdHJpbmc7XG5cdCAgfVxuXHQgIFN0YXRpY1NlZ21lbnQucHJvdG90eXBlID0ge1xuXHQgICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBzdHJpbmcgPSB0aGlzLnN0cmluZyxcblx0ICAgICAgICAgIGNoO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdHJpbmcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgY2ggPSBzdHJpbmcuY2hhckF0KGkpO1xuXHQgICAgICAgIGNhbGxiYWNrKHsgdmFsaWRDaGFyczogY2ggfSk7XG5cdCAgICAgIH1cblx0ICAgIH0sXG5cdFxuXHQgICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5zdHJpbmcucmVwbGFjZShlc2NhcGVSZWdleCwgJ1xcXFwkMScpO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnN0cmluZztcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBEeW5hbWljU2VnbWVudChuYW1lKSB7XG5cdCAgICB0aGlzLm5hbWUgPSBuYW1lO1xuXHQgIH1cblx0ICBEeW5hbWljU2VnbWVudC5wcm90b3R5cGUgPSB7XG5cdCAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoY2FsbGJhY2spIHtcblx0ICAgICAgY2FsbGJhY2soeyBpbnZhbGlkQ2hhcnM6IFwiL1wiLCByZXBlYXQ6IHRydWUgfSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlZ2V4OiBmdW5jdGlvbiByZWdleCgpIHtcblx0ICAgICAgcmV0dXJuIFwiKFteL10rKVwiO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUocGFyYW1zKSB7XG5cdCAgICAgIHZhciB2YWwgPSBwYXJhbXNbdGhpcy5uYW1lXTtcblx0ICAgICAgcmV0dXJuIHZhbCA9PSBudWxsID8gXCI6XCIgKyB0aGlzLm5hbWUgOiB2YWw7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gU3RhclNlZ21lbnQobmFtZSkge1xuXHQgICAgdGhpcy5uYW1lID0gbmFtZTtcblx0ICB9XG5cdCAgU3RhclNlZ21lbnQucHJvdG90eXBlID0ge1xuXHQgICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG5cdCAgICAgIGNhbGxiYWNrKHsgaW52YWxpZENoYXJzOiBcIlwiLCByZXBlYXQ6IHRydWUgfSk7XG5cdCAgICB9LFxuXHRcblx0ICAgIHJlZ2V4OiBmdW5jdGlvbiByZWdleCgpIHtcblx0ICAgICAgcmV0dXJuIFwiKC4rKVwiO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUocGFyYW1zKSB7XG5cdCAgICAgIHZhciB2YWwgPSBwYXJhbXNbdGhpcy5uYW1lXTtcblx0ICAgICAgcmV0dXJuIHZhbCA9PSBudWxsID8gXCI6XCIgKyB0aGlzLm5hbWUgOiB2YWw7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gRXBzaWxvblNlZ21lbnQoKSB7fVxuXHQgIEVwc2lsb25TZWdtZW50LnByb3RvdHlwZSA9IHtcblx0ICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcigpIHt9LFxuXHQgICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuXHQgICAgICByZXR1cm4gXCJcIjtcblx0ICAgIH0sXG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG5cdCAgICAgIHJldHVybiBcIlwiO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIHBhcnNlKHJvdXRlLCBuYW1lcywgc3BlY2lmaWNpdHkpIHtcblx0ICAgIC8vIG5vcm1hbGl6ZSByb3V0ZSBhcyBub3Qgc3RhcnRpbmcgd2l0aCBhIFwiL1wiLiBSZWNvZ25pdGlvbiB3aWxsXG5cdCAgICAvLyBhbHNvIG5vcm1hbGl6ZS5cblx0ICAgIGlmIChyb3V0ZS5jaGFyQXQoMCkgPT09IFwiL1wiKSB7XG5cdCAgICAgIHJvdXRlID0gcm91dGUuc3Vic3RyKDEpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBzZWdtZW50cyA9IHJvdXRlLnNwbGl0KFwiL1wiKSxcblx0ICAgICAgICByZXN1bHRzID0gW107XG5cdFxuXHQgICAgLy8gQSByb3V0ZXMgaGFzIHNwZWNpZmljaXR5IGRldGVybWluZWQgYnkgdGhlIG9yZGVyIHRoYXQgaXRzIGRpZmZlcmVudCBzZWdtZW50c1xuXHQgICAgLy8gYXBwZWFyIGluLiBUaGlzIHN5c3RlbSBtaXJyb3JzIGhvdyB0aGUgbWFnbml0dWRlIG9mIG51bWJlcnMgd3JpdHRlbiBhcyBzdHJpbmdzXG5cdCAgICAvLyB3b3Jrcy5cblx0ICAgIC8vIENvbnNpZGVyIGEgbnVtYmVyIHdyaXR0ZW4gYXM6IFwiYWJjXCIuIEFuIGV4YW1wbGUgd291bGQgYmUgXCIyMDBcIi4gQW55IG90aGVyIG51bWJlciB3cml0dGVuXG5cdCAgICAvLyBcInh5elwiIHdpbGwgYmUgc21hbGxlciB0aGFuIFwiYWJjXCIgc28gbG9uZyBhcyBgYSA+IHpgLiBGb3IgaW5zdGFuY2UsIFwiMTk5XCIgaXMgc21hbGxlclxuXHQgICAgLy8gdGhlbiBcIjIwMFwiLCBldmVuIHRob3VnaCBcInlcIiBhbmQgXCJ6XCIgKHdoaWNoIGFyZSBib3RoIDkpIGFyZSBsYXJnZXIgdGhhbiBcIjBcIiAodGhlIHZhbHVlXG5cdCAgICAvLyBvZiAoYGJgIGFuZCBgY2ApLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGxlYWRpbmcgc3ltYm9sLCBcIjJcIiwgaXMgbGFyZ2VyIHRoYW4gdGhlIG90aGVyXG5cdCAgICAvLyBsZWFkaW5nIHN5bWJvbCwgXCIxXCIuXG5cdCAgICAvLyBUaGUgcnVsZSBpcyB0aGF0IHN5bWJvbHMgdG8gdGhlIGxlZnQgY2FycnkgbW9yZSB3ZWlnaHQgdGhhbiBzeW1ib2xzIHRvIHRoZSByaWdodFxuXHQgICAgLy8gd2hlbiBhIG51bWJlciBpcyB3cml0dGVuIG91dCBhcyBhIHN0cmluZy4gSW4gdGhlIGFib3ZlIHN0cmluZ3MsIHRoZSBsZWFkaW5nIGRpZ2l0XG5cdCAgICAvLyByZXByZXNlbnRzIGhvdyBtYW55IDEwMCdzIGFyZSBpbiB0aGUgbnVtYmVyLCBhbmQgaXQgY2FycmllcyBtb3JlIHdlaWdodCB0aGFuIHRoZSBtaWRkbGVcblx0ICAgIC8vIG51bWJlciB3aGljaCByZXByZXNlbnRzIGhvdyBtYW55IDEwJ3MgYXJlIGluIHRoZSBudW1iZXIuXG5cdCAgICAvLyBUaGlzIHN5c3RlbSBvZiBudW1iZXIgbWFnbml0dWRlIHdvcmtzIHdlbGwgZm9yIHJvdXRlIHNwZWNpZmljaXR5LCB0b28uIEEgcm91dGUgd3JpdHRlbiBhc1xuXHQgICAgLy8gYGEvYi9jYCB3aWxsIGJlIG1vcmUgc3BlY2lmaWMgdGhhbiBgeC95L3pgIGFzIGxvbmcgYXMgYGFgIGlzIG1vcmUgc3BlY2lmaWMgdGhhblxuXHQgICAgLy8gYHhgLCBpcnJlc3BlY3RpdmUgb2YgdGhlIG90aGVyIHBhcnRzLlxuXHQgICAgLy8gQmVjYXVzZSBvZiB0aGlzIHNpbWlsYXJpdHksIHdlIGFzc2lnbiBlYWNoIHR5cGUgb2Ygc2VnbWVudCBhIG51bWJlciB2YWx1ZSB3cml0dGVuIGFzIGFcblx0ICAgIC8vIHN0cmluZy4gV2UgY2FuIGZpbmQgdGhlIHNwZWNpZmljaXR5IG9mIGNvbXBvdW5kIHJvdXRlcyBieSBjb25jYXRlbmF0aW5nIHRoZXNlIHN0cmluZ3Ncblx0ICAgIC8vIHRvZ2V0aGVyLCBmcm9tIGxlZnQgdG8gcmlnaHQuIEFmdGVyIHdlIGhhdmUgbG9vcGVkIHRocm91Z2ggYWxsIG9mIHRoZSBzZWdtZW50cyxcblx0ICAgIC8vIHdlIGNvbnZlcnQgdGhlIHN0cmluZyB0byBhIG51bWJlci5cblx0ICAgIHNwZWNpZmljaXR5LnZhbCA9ICcnO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV0sXG5cdCAgICAgICAgICBtYXRjaDtcblx0XG5cdCAgICAgIGlmIChtYXRjaCA9IHNlZ21lbnQubWF0Y2goL146KFteXFwvXSspJC8pKSB7XG5cdCAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBEeW5hbWljU2VnbWVudChtYXRjaFsxXSkpO1xuXHQgICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pO1xuXHQgICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMyc7XG5cdCAgICAgIH0gZWxzZSBpZiAobWF0Y2ggPSBzZWdtZW50Lm1hdGNoKC9eXFwqKFteXFwvXSspJC8pKSB7XG5cdCAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTdGFyU2VnbWVudChtYXRjaFsxXSkpO1xuXHQgICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMic7XG5cdCAgICAgICAgbmFtZXMucHVzaChtYXRjaFsxXSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gXCJcIikge1xuXHQgICAgICAgIHJlc3VsdHMucHVzaChuZXcgRXBzaWxvblNlZ21lbnQoKSk7XG5cdCAgICAgICAgc3BlY2lmaWNpdHkudmFsICs9ICcxJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXN1bHRzLnB1c2gobmV3IFN0YXRpY1NlZ21lbnQoc2VnbWVudCkpO1xuXHQgICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnNCc7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBzcGVjaWZpY2l0eS52YWwgPSArc3BlY2lmaWNpdHkudmFsO1xuXHRcblx0ICAgIHJldHVybiByZXN1bHRzO1xuXHQgIH1cblx0XG5cdCAgLy8gQSBTdGF0ZSBoYXMgYSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBhbmQgKGBjaGFyU3BlY2ApIGFuZCBhIGxpc3Qgb2YgcG9zc2libGVcblx0ICAvLyBzdWJzZXF1ZW50IHN0YXRlcyAoYG5leHRTdGF0ZXNgKS5cblx0ICAvL1xuXHQgIC8vIElmIGEgU3RhdGUgaXMgYW4gYWNjZXB0aW5nIHN0YXRlLCBpdCB3aWxsIGFsc28gaGF2ZSBzZXZlcmFsIGFkZGl0aW9uYWxcblx0ICAvLyBwcm9wZXJ0aWVzOlxuXHQgIC8vXG5cdCAgLy8gKiBgcmVnZXhgOiBBIHJlZ3VsYXIgZXhwcmVzc2lvbiB0aGF0IGlzIHVzZWQgdG8gZXh0cmFjdCBwYXJhbWV0ZXJzIGZyb20gcGF0aHNcblx0ICAvLyAgIHRoYXQgcmVhY2hlZCB0aGlzIGFjY2VwdGluZyBzdGF0ZS5cblx0ICAvLyAqIGBoYW5kbGVyc2A6IEluZm9ybWF0aW9uIG9uIGhvdyB0byBjb252ZXJ0IHRoZSBsaXN0IG9mIGNhcHR1cmVzIGludG8gY2FsbHNcblx0ICAvLyAgIHRvIHJlZ2lzdGVyZWQgaGFuZGxlcnMgd2l0aCB0aGUgc3BlY2lmaWVkIHBhcmFtZXRlcnNcblx0ICAvLyAqIGB0eXBlc2A6IEhvdyBtYW55IHN0YXRpYywgZHluYW1pYyBvciBzdGFyIHNlZ21lbnRzIGluIHRoaXMgcm91dGUuIFVzZWQgdG9cblx0ICAvLyAgIGRlY2lkZSB3aGljaCByb3V0ZSB0byB1c2UgaWYgbXVsdGlwbGUgcmVnaXN0ZXJlZCByb3V0ZXMgbWF0Y2ggYSBwYXRoLlxuXHQgIC8vXG5cdCAgLy8gQ3VycmVudGx5LCBTdGF0ZSBpcyBpbXBsZW1lbnRlZCBuYWl2ZWx5IGJ5IGxvb3Bpbmcgb3ZlciBgbmV4dFN0YXRlc2AgYW5kXG5cdCAgLy8gY29tcGFyaW5nIGEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWdhaW5zdCBhIGNoYXJhY3Rlci4gQSBtb3JlIGVmZmljaWVudFxuXHQgIC8vIGltcGxlbWVudGF0aW9uIHdvdWxkIHVzZSBhIGhhc2ggb2Yga2V5cyBwb2ludGluZyBhdCBvbmUgb3IgbW9yZSBuZXh0IHN0YXRlcy5cblx0XG5cdCAgZnVuY3Rpb24gU3RhdGUoY2hhclNwZWMpIHtcblx0ICAgIHRoaXMuY2hhclNwZWMgPSBjaGFyU3BlYztcblx0ICAgIHRoaXMubmV4dFN0YXRlcyA9IFtdO1xuXHQgIH1cblx0XG5cdCAgU3RhdGUucHJvdG90eXBlID0ge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoY2hhclNwZWMpIHtcblx0ICAgICAgdmFyIG5leHRTdGF0ZXMgPSB0aGlzLm5leHRTdGF0ZXM7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5leHRTdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGNoaWxkID0gbmV4dFN0YXRlc1tpXTtcblx0XG5cdCAgICAgICAgdmFyIGlzRXF1YWwgPSBjaGlsZC5jaGFyU3BlYy52YWxpZENoYXJzID09PSBjaGFyU3BlYy52YWxpZENoYXJzO1xuXHQgICAgICAgIGlzRXF1YWwgPSBpc0VxdWFsICYmIGNoaWxkLmNoYXJTcGVjLmludmFsaWRDaGFycyA9PT0gY2hhclNwZWMuaW52YWxpZENoYXJzO1xuXHRcblx0ICAgICAgICBpZiAoaXNFcXVhbCkge1xuXHQgICAgICAgICAgcmV0dXJuIGNoaWxkO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBwdXQ6IGZ1bmN0aW9uIHB1dChjaGFyU3BlYykge1xuXHQgICAgICB2YXIgc3RhdGU7XG5cdFxuXHQgICAgICAvLyBJZiB0aGUgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWxyZWFkeSBleGlzdHMgaW4gYSBjaGlsZCBvZiB0aGUgY3VycmVudFxuXHQgICAgICAvLyBzdGF0ZSwganVzdCByZXR1cm4gdGhhdCBzdGF0ZS5cblx0ICAgICAgaWYgKHN0YXRlID0gdGhpcy5nZXQoY2hhclNwZWMpKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0YXRlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBNYWtlIGEgbmV3IHN0YXRlIGZvciB0aGUgY2hhcmFjdGVyIHNwZWNcblx0ICAgICAgc3RhdGUgPSBuZXcgU3RhdGUoY2hhclNwZWMpO1xuXHRcblx0ICAgICAgLy8gSW5zZXJ0IHRoZSBuZXcgc3RhdGUgYXMgYSBjaGlsZCBvZiB0aGUgY3VycmVudCBzdGF0ZVxuXHQgICAgICB0aGlzLm5leHRTdGF0ZXMucHVzaChzdGF0ZSk7XG5cdFxuXHQgICAgICAvLyBJZiB0aGlzIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIHJlcGVhdHMsIGluc2VydCB0aGUgbmV3IHN0YXRlIGFzIGEgY2hpbGRcblx0ICAgICAgLy8gb2YgaXRzZWxmLiBOb3RlIHRoYXQgdGhpcyB3aWxsIG5vdCB0cmlnZ2VyIGFuIGluZmluaXRlIGxvb3AgYmVjYXVzZSBlYWNoXG5cdCAgICAgIC8vIHRyYW5zaXRpb24gZHVyaW5nIHJlY29nbml0aW9uIGNvbnN1bWVzIGEgY2hhcmFjdGVyLlxuXHQgICAgICBpZiAoY2hhclNwZWMucmVwZWF0KSB7XG5cdCAgICAgICAgc3RhdGUubmV4dFN0YXRlcy5wdXNoKHN0YXRlKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gUmV0dXJuIHRoZSBuZXcgc3RhdGVcblx0ICAgICAgcmV0dXJuIHN0YXRlO1xuXHQgICAgfSxcblx0XG5cdCAgICAvLyBGaW5kIGEgbGlzdCBvZiBjaGlsZCBzdGF0ZXMgbWF0Y2hpbmcgdGhlIG5leHQgY2hhcmFjdGVyXG5cdCAgICBtYXRjaDogZnVuY3Rpb24gbWF0Y2goY2gpIHtcblx0ICAgICAgLy8gREVCVUcgXCJQcm9jZXNzaW5nIGBcIiArIGNoICsgXCJgOlwiXG5cdCAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzLFxuXHQgICAgICAgICAgY2hpbGQsXG5cdCAgICAgICAgICBjaGFyU3BlYyxcblx0ICAgICAgICAgIGNoYXJzO1xuXHRcblx0ICAgICAgLy8gREVCVUcgXCIgIFwiICsgZGVidWdTdGF0ZSh0aGlzKVxuXHQgICAgICB2YXIgcmV0dXJuZWQgPSBbXTtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbmV4dFN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBjaGlsZCA9IG5leHRTdGF0ZXNbaV07XG5cdFxuXHQgICAgICAgIGNoYXJTcGVjID0gY2hpbGQuY2hhclNwZWM7XG5cdFxuXHQgICAgICAgIGlmICh0eXBlb2YgKGNoYXJzID0gY2hhclNwZWMudmFsaWRDaGFycykgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICBpZiAoY2hhcnMuaW5kZXhPZihjaCkgIT09IC0xKSB7XG5cdCAgICAgICAgICAgIHJldHVybmVkLnB1c2goY2hpbGQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIChjaGFycyA9IGNoYXJTcGVjLmludmFsaWRDaGFycykgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgICAgICBpZiAoY2hhcnMuaW5kZXhPZihjaCkgPT09IC0xKSB7XG5cdCAgICAgICAgICAgIHJldHVybmVkLnB1c2goY2hpbGQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHJldHVybmVkO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKiBJRiBERUJVR1xuXHQgICAgLCBkZWJ1ZzogZnVuY3Rpb24oKSB7XG5cdCAgICAgIHZhciBjaGFyU3BlYyA9IHRoaXMuY2hhclNwZWMsXG5cdCAgICAgICAgICBkZWJ1ZyA9IFwiW1wiLFxuXHQgICAgICAgICAgY2hhcnMgPSBjaGFyU3BlYy52YWxpZENoYXJzIHx8IGNoYXJTcGVjLmludmFsaWRDaGFycztcblx0ICAgICAgIGlmIChjaGFyU3BlYy5pbnZhbGlkQ2hhcnMpIHsgZGVidWcgKz0gXCJeXCI7IH1cblx0ICAgICAgZGVidWcgKz0gY2hhcnM7XG5cdCAgICAgIGRlYnVnICs9IFwiXVwiO1xuXHQgICAgICAgaWYgKGNoYXJTcGVjLnJlcGVhdCkgeyBkZWJ1ZyArPSBcIitcIjsgfVxuXHQgICAgICAgcmV0dXJuIGRlYnVnO1xuXHQgICAgfVxuXHQgICAgRU5EIElGICoqL1xuXHQgIH07XG5cdFxuXHQgIC8qKiBJRiBERUJVR1xuXHQgIGZ1bmN0aW9uIGRlYnVnKGxvZykge1xuXHQgICAgY29uc29sZS5sb2cobG9nKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlYnVnU3RhdGUoc3RhdGUpIHtcblx0ICAgIHJldHVybiBzdGF0ZS5uZXh0U3RhdGVzLm1hcChmdW5jdGlvbihuKSB7XG5cdCAgICAgIGlmIChuLm5leHRTdGF0ZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiBcIiggXCIgKyBuLmRlYnVnKCkgKyBcIiBbYWNjZXB0aW5nXSApXCI7IH1cblx0ICAgICAgcmV0dXJuIFwiKCBcIiArIG4uZGVidWcoKSArIFwiIDx0aGVuPiBcIiArIG4ubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5kZWJ1ZygpIH0pLmpvaW4oXCIgb3IgXCIpICsgXCIgKVwiO1xuXHQgICAgfSkuam9pbihcIiwgXCIpXG5cdCAgfVxuXHQgIEVORCBJRiAqKi9cblx0XG5cdCAgLy8gU29ydCB0aGUgcm91dGVzIGJ5IHNwZWNpZmljaXR5XG5cdCAgZnVuY3Rpb24gc29ydFNvbHV0aW9ucyhzdGF0ZXMpIHtcblx0ICAgIHJldHVybiBzdGF0ZXMuc29ydChmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gYi5zcGVjaWZpY2l0eS52YWwgLSBhLnNwZWNpZmljaXR5LnZhbDtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVjb2duaXplQ2hhcihzdGF0ZXMsIGNoKSB7XG5cdCAgICB2YXIgbmV4dFN0YXRlcyA9IFtdO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gc3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgc3RhdGUgPSBzdGF0ZXNbaV07XG5cdFxuXHQgICAgICBuZXh0U3RhdGVzID0gbmV4dFN0YXRlcy5jb25jYXQoc3RhdGUubWF0Y2goY2gpKTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gbmV4dFN0YXRlcztcblx0ICB9XG5cdFxuXHQgIHZhciBvQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiAocHJvdG8pIHtcblx0ICAgIGZ1bmN0aW9uIEYoKSB7fVxuXHQgICAgRi5wcm90b3R5cGUgPSBwcm90bztcblx0ICAgIHJldHVybiBuZXcgRigpO1xuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpIHtcblx0ICAgIHRoaXMucXVlcnlQYXJhbXMgPSBxdWVyeVBhcmFtcyB8fCB7fTtcblx0ICB9XG5cdCAgUmVjb2duaXplUmVzdWx0cy5wcm90b3R5cGUgPSBvQ3JlYXRlKHtcblx0ICAgIHNwbGljZTogQXJyYXkucHJvdG90eXBlLnNwbGljZSxcblx0ICAgIHNsaWNlOiBBcnJheS5wcm90b3R5cGUuc2xpY2UsXG5cdCAgICBwdXNoOiBBcnJheS5wcm90b3R5cGUucHVzaCxcblx0ICAgIGxlbmd0aDogMCxcblx0ICAgIHF1ZXJ5UGFyYW1zOiBudWxsXG5cdCAgfSk7XG5cdFxuXHQgIGZ1bmN0aW9uIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBxdWVyeVBhcmFtcykge1xuXHQgICAgdmFyIGhhbmRsZXJzID0gc3RhdGUuaGFuZGxlcnMsXG5cdCAgICAgICAgcmVnZXggPSBzdGF0ZS5yZWdleDtcblx0ICAgIHZhciBjYXB0dXJlcyA9IHBhdGgubWF0Y2gocmVnZXgpLFxuXHQgICAgICAgIGN1cnJlbnRDYXB0dXJlID0gMTtcblx0ICAgIHZhciByZXN1bHQgPSBuZXcgUmVjb2duaXplUmVzdWx0cyhxdWVyeVBhcmFtcyk7XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGhhbmRsZXIgPSBoYW5kbGVyc1tpXSxcblx0ICAgICAgICAgIG5hbWVzID0gaGFuZGxlci5uYW1lcyxcblx0ICAgICAgICAgIHBhcmFtcyA9IHt9O1xuXHRcblx0ICAgICAgZm9yICh2YXIgaiA9IDAsIG0gPSBuYW1lcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcblx0ICAgICAgICBwYXJhbXNbbmFtZXNbal1dID0gY2FwdHVyZXNbY3VycmVudENhcHR1cmUrK107XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJlc3VsdC5wdXNoKHsgaGFuZGxlcjogaGFuZGxlci5oYW5kbGVyLCBwYXJhbXM6IHBhcmFtcywgaXNEeW5hbWljOiAhIW5hbWVzLmxlbmd0aCB9KTtcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gYWRkU2VnbWVudChjdXJyZW50U3RhdGUsIHNlZ21lbnQpIHtcblx0ICAgIHNlZ21lbnQuZWFjaENoYXIoZnVuY3Rpb24gKGNoKSB7XG5cdCAgICAgIHZhciBzdGF0ZTtcblx0XG5cdCAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoY2gpO1xuXHQgICAgfSk7XG5cdFxuXHQgICAgcmV0dXJuIGN1cnJlbnRTdGF0ZTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlY29kZVF1ZXJ5UGFyYW1QYXJ0KHBhcnQpIHtcblx0ICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw0MDEvaW50ZXJhY3QvZm9ybXMuaHRtbCNoLTE3LjEzLjQuMVxuXHQgICAgcGFydCA9IHBhcnQucmVwbGFjZSgvXFwrL2dtLCAnJTIwJyk7XG5cdCAgICByZXR1cm4gdHJ5RGVjb2RlKHBhcnQsIHRydWUpO1xuXHQgIH1cblx0XG5cdCAgLy8gVGhlIG1haW4gaW50ZXJmYWNlXG5cdFxuXHQgIHZhciBSb3V0ZVJlY29nbml6ZXIgPSBmdW5jdGlvbiBSb3V0ZVJlY29nbml6ZXIoKSB7XG5cdCAgICB0aGlzLnJvb3RTdGF0ZSA9IG5ldyBTdGF0ZSgpO1xuXHQgICAgdGhpcy5uYW1lcyA9IHt9O1xuXHQgIH07XG5cdFxuXHQgIFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUgPSB7XG5cdCAgICBhZGQ6IGZ1bmN0aW9uIGFkZChyb3V0ZXMsIG9wdGlvbnMpIHtcblx0ICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IHRoaXMucm9vdFN0YXRlLFxuXHQgICAgICAgICAgcmVnZXggPSBcIl5cIixcblx0ICAgICAgICAgIHNwZWNpZmljaXR5ID0ge30sXG5cdCAgICAgICAgICBoYW5kbGVycyA9IFtdLFxuXHQgICAgICAgICAgYWxsU2VnbWVudHMgPSBbXSxcblx0ICAgICAgICAgIG5hbWU7XG5cdFxuXHQgICAgICB2YXIgaXNFbXB0eSA9IHRydWU7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJvdXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB2YXIgcm91dGUgPSByb3V0ZXNbaV0sXG5cdCAgICAgICAgICAgIG5hbWVzID0gW107XG5cdFxuXHQgICAgICAgIHZhciBzZWdtZW50cyA9IHBhcnNlKHJvdXRlLnBhdGgsIG5hbWVzLCBzcGVjaWZpY2l0eSk7XG5cdFxuXHQgICAgICAgIGFsbFNlZ21lbnRzID0gYWxsU2VnbWVudHMuY29uY2F0KHNlZ21lbnRzKTtcblx0XG5cdCAgICAgICAgZm9yICh2YXIgaiA9IDAsIG0gPSBzZWdtZW50cy5sZW5ndGg7IGogPCBtOyBqKyspIHtcblx0ICAgICAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbal07XG5cdFxuXHQgICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkge1xuXHQgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICBpc0VtcHR5ID0gZmFsc2U7XG5cdFxuXHQgICAgICAgICAgLy8gQWRkIGEgXCIvXCIgZm9yIHRoZSBuZXcgc2VnbWVudFxuXHQgICAgICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1dCh7IHZhbGlkQ2hhcnM6IFwiL1wiIH0pO1xuXHQgICAgICAgICAgcmVnZXggKz0gXCIvXCI7XG5cdFxuXHQgICAgICAgICAgLy8gQWRkIGEgcmVwcmVzZW50YXRpb24gb2YgdGhlIHNlZ21lbnQgdG8gdGhlIE5GQSBhbmQgcmVnZXhcblx0ICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KTtcblx0ICAgICAgICAgIHJlZ2V4ICs9IHNlZ21lbnQucmVnZXgoKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIHZhciBoYW5kbGVyID0geyBoYW5kbGVyOiByb3V0ZS5oYW5kbGVyLCBuYW1lczogbmFtZXMgfTtcblx0ICAgICAgICBoYW5kbGVycy5wdXNoKGhhbmRsZXIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoaXNFbXB0eSkge1xuXHQgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoeyB2YWxpZENoYXJzOiBcIi9cIiB9KTtcblx0ICAgICAgICByZWdleCArPSBcIi9cIjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgY3VycmVudFN0YXRlLmhhbmRsZXJzID0gaGFuZGxlcnM7XG5cdCAgICAgIGN1cnJlbnRTdGF0ZS5yZWdleCA9IG5ldyBSZWdFeHAocmVnZXggKyBcIiRcIik7XG5cdCAgICAgIGN1cnJlbnRTdGF0ZS5zcGVjaWZpY2l0eSA9IHNwZWNpZmljaXR5O1xuXHRcblx0ICAgICAgaWYgKG5hbWUgPSBvcHRpb25zICYmIG9wdGlvbnMuYXMpIHtcblx0ICAgICAgICB0aGlzLm5hbWVzW25hbWVdID0ge1xuXHQgICAgICAgICAgc2VnbWVudHM6IGFsbFNlZ21lbnRzLFxuXHQgICAgICAgICAgaGFuZGxlcnM6IGhhbmRsZXJzXG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICBoYW5kbGVyc0ZvcjogZnVuY3Rpb24gaGFuZGxlcnNGb3IobmFtZSkge1xuXHQgICAgICB2YXIgcm91dGUgPSB0aGlzLm5hbWVzW25hbWVdLFxuXHQgICAgICAgICAgcmVzdWx0ID0gW107XG5cdCAgICAgIGlmICghcm91dGUpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyByb3V0ZSBuYW1lZCBcIiArIG5hbWUpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJvdXRlLmhhbmRsZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHJlc3VsdC5wdXNoKHJvdXRlLmhhbmRsZXJzW2ldKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgIH0sXG5cdFxuXHQgICAgaGFzUm91dGU6IGZ1bmN0aW9uIGhhc1JvdXRlKG5hbWUpIHtcblx0ICAgICAgcmV0dXJuICEhdGhpcy5uYW1lc1tuYW1lXTtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKG5hbWUsIHBhcmFtcykge1xuXHQgICAgICB2YXIgcm91dGUgPSB0aGlzLm5hbWVzW25hbWVdLFxuXHQgICAgICAgICAgb3V0cHV0ID0gXCJcIjtcblx0ICAgICAgaWYgKCFyb3V0ZSkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIHJvdXRlIG5hbWVkIFwiICsgbmFtZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBzZWdtZW50cyA9IHJvdXRlLnNlZ21lbnRzO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuXHRcblx0ICAgICAgICBpZiAoc2VnbWVudCBpbnN0YW5jZW9mIEVwc2lsb25TZWdtZW50KSB7XG5cdCAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIG91dHB1dCArPSBcIi9cIjtcblx0ICAgICAgICBvdXRwdXQgKz0gc2VnbWVudC5nZW5lcmF0ZShwYXJhbXMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAob3V0cHV0LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG5cdCAgICAgICAgb3V0cHV0ID0gJy8nICsgb3V0cHV0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5xdWVyeVBhcmFtcykge1xuXHQgICAgICAgIG91dHB1dCArPSB0aGlzLmdlbmVyYXRlUXVlcnlTdHJpbmcocGFyYW1zLnF1ZXJ5UGFyYW1zKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmV0dXJuIG91dHB1dDtcblx0ICAgIH0sXG5cdFxuXHQgICAgZ2VuZXJhdGVRdWVyeVN0cmluZzogZnVuY3Rpb24gZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXJhbXMpIHtcblx0ICAgICAgdmFyIHBhaXJzID0gW107XG5cdCAgICAgIHZhciBrZXlzID0gW107XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBwYXJhbXMpIHtcblx0ICAgICAgICBpZiAocGFyYW1zLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0ICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBrZXlzLnNvcnQoKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbiA9IGtleXMubGVuZ3RoOyBpIDwgbGVuOyBpKyspIHtcblx0ICAgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAgIHZhciB2YWx1ZSA9IHBhcmFtc1trZXldO1xuXHQgICAgICAgIGlmICh2YWx1ZSA9PSBudWxsKSB7XG5cdCAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIHBhaXIgPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KTtcblx0ICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBqIDwgbDsgaisrKSB7XG5cdCAgICAgICAgICAgIHZhciBhcnJheVBhaXIgPSBrZXkgKyAnW10nICsgJz0nICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlW2pdKTtcblx0ICAgICAgICAgICAgcGFpcnMucHVzaChhcnJheVBhaXIpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBwYWlyICs9IFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcblx0ICAgICAgICAgIHBhaXJzLnB1c2gocGFpcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAocGFpcnMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgcmV0dXJuICcnO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gXCI/XCIgKyBwYWlycy5qb2luKFwiJlwiKTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcGFyc2VRdWVyeVN0cmluZzogZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZykge1xuXHQgICAgICB2YXIgcGFpcnMgPSBxdWVyeVN0cmluZy5zcGxpdChcIiZcIiksXG5cdCAgICAgICAgICBxdWVyeVBhcmFtcyA9IHt9O1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhaXJzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIHBhaXIgPSBwYWlyc1tpXS5zcGxpdCgnPScpLFxuXHQgICAgICAgICAgICBrZXkgPSBkZWNvZGVRdWVyeVBhcmFtUGFydChwYWlyWzBdKSxcblx0ICAgICAgICAgICAga2V5TGVuZ3RoID0ga2V5Lmxlbmd0aCxcblx0ICAgICAgICAgICAgaXNBcnJheSA9IGZhbHNlLFxuXHQgICAgICAgICAgICB2YWx1ZTtcblx0ICAgICAgICBpZiAocGFpci5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICAgIHZhbHVlID0gJ3RydWUnO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvL0hhbmRsZSBhcnJheXNcblx0ICAgICAgICAgIGlmIChrZXlMZW5ndGggPiAyICYmIGtleS5zbGljZShrZXlMZW5ndGggLSAyKSA9PT0gJ1tdJykge1xuXHQgICAgICAgICAgICBpc0FycmF5ID0gdHJ1ZTtcblx0ICAgICAgICAgICAga2V5ID0ga2V5LnNsaWNlKDAsIGtleUxlbmd0aCAtIDIpO1xuXHQgICAgICAgICAgICBpZiAoIXF1ZXJ5UGFyYW1zW2tleV0pIHtcblx0ICAgICAgICAgICAgICBxdWVyeVBhcmFtc1trZXldID0gW107XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHZhbHVlID0gcGFpclsxXSA/IGRlY29kZVF1ZXJ5UGFyYW1QYXJ0KHBhaXJbMV0pIDogJyc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpc0FycmF5KSB7XG5cdCAgICAgICAgICBxdWVyeVBhcmFtc1trZXldLnB1c2godmFsdWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBxdWVyeVBhcmFtc1trZXldID0gdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBxdWVyeVBhcmFtcztcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVjb2duaXplOiBmdW5jdGlvbiByZWNvZ25pemUocGF0aCwgc2lsZW50KSB7XG5cdCAgICAgIG5vV2FybmluZyA9IHNpbGVudDtcblx0ICAgICAgdmFyIHN0YXRlcyA9IFt0aGlzLnJvb3RTdGF0ZV0sXG5cdCAgICAgICAgICBwYXRoTGVuLFxuXHQgICAgICAgICAgaSxcblx0ICAgICAgICAgIGwsXG5cdCAgICAgICAgICBxdWVyeVN0YXJ0LFxuXHQgICAgICAgICAgcXVlcnlQYXJhbXMgPSB7fSxcblx0ICAgICAgICAgIGlzU2xhc2hEcm9wcGVkID0gZmFsc2U7XG5cdFxuXHQgICAgICBxdWVyeVN0YXJ0ID0gcGF0aC5pbmRleE9mKCc/Jyk7XG5cdCAgICAgIGlmIChxdWVyeVN0YXJ0ICE9PSAtMSkge1xuXHQgICAgICAgIHZhciBxdWVyeVN0cmluZyA9IHBhdGguc3Vic3RyKHF1ZXJ5U3RhcnQgKyAxLCBwYXRoLmxlbmd0aCk7XG5cdCAgICAgICAgcGF0aCA9IHBhdGguc3Vic3RyKDAsIHF1ZXJ5U3RhcnQpO1xuXHQgICAgICAgIGlmIChxdWVyeVN0cmluZykge1xuXHQgICAgICAgICAgcXVlcnlQYXJhbXMgPSB0aGlzLnBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcGF0aCA9IHRyeURlY29kZShwYXRoKTtcblx0ICAgICAgaWYgKCFwYXRoKSByZXR1cm47XG5cdFxuXHQgICAgICAvLyBERUJVRyBHUk9VUCBwYXRoXG5cdFxuXHQgICAgICBpZiAocGF0aC5jaGFyQXQoMCkgIT09IFwiL1wiKSB7XG5cdCAgICAgICAgcGF0aCA9IFwiL1wiICsgcGF0aDtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcGF0aExlbiA9IHBhdGgubGVuZ3RoO1xuXHQgICAgICBpZiAocGF0aExlbiA+IDEgJiYgcGF0aC5jaGFyQXQocGF0aExlbiAtIDEpID09PSBcIi9cIikge1xuXHQgICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigwLCBwYXRoTGVuIC0gMSk7XG5cdCAgICAgICAgaXNTbGFzaERyb3BwZWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBmb3IgKGkgPSAwLCBsID0gcGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBzdGF0ZXMgPSByZWNvZ25pemVDaGFyKHN0YXRlcywgcGF0aC5jaGFyQXQoaSkpO1xuXHQgICAgICAgIGlmICghc3RhdGVzLmxlbmd0aCkge1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBFTkQgREVCVUcgR1JPVVBcblx0XG5cdCAgICAgIHZhciBzb2x1dGlvbnMgPSBbXTtcblx0ICAgICAgZm9yIChpID0gMCwgbCA9IHN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBpZiAoc3RhdGVzW2ldLmhhbmRsZXJzKSB7XG5cdCAgICAgICAgICBzb2x1dGlvbnMucHVzaChzdGF0ZXNbaV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgc3RhdGVzID0gc29ydFNvbHV0aW9ucyhzb2x1dGlvbnMpO1xuXHRcblx0ICAgICAgdmFyIHN0YXRlID0gc29sdXRpb25zWzBdO1xuXHRcblx0ICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLmhhbmRsZXJzKSB7XG5cdCAgICAgICAgLy8gaWYgYSB0cmFpbGluZyBzbGFzaCB3YXMgZHJvcHBlZCBhbmQgYSBzdGFyIHNlZ21lbnQgaXMgdGhlIGxhc3Qgc2VnbWVudFxuXHQgICAgICAgIC8vIHNwZWNpZmllZCwgcHV0IHRoZSB0cmFpbGluZyBzbGFzaCBiYWNrXG5cdCAgICAgICAgaWYgKGlzU2xhc2hEcm9wcGVkICYmIHN0YXRlLnJlZ2V4LnNvdXJjZS5zbGljZSgtNSkgPT09IFwiKC4rKSRcIikge1xuXHQgICAgICAgICAgcGF0aCA9IHBhdGggKyBcIi9cIjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBxdWVyeVBhcmFtcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlLm1hcCA9IG1hcDtcblx0XG5cdCAgdmFyIGdlblF1ZXJ5ID0gUm91dGVSZWNvZ25pemVyLnByb3RvdHlwZS5nZW5lcmF0ZVF1ZXJ5U3RyaW5nO1xuXHRcblx0ICAvLyBleHBvcnQgZGVmYXVsdCBmb3IgaG9sZGluZyB0aGUgVnVlIHJlZmVyZW5jZVxuXHQgIHZhciBleHBvcnRzJDEgPSB7fTtcblx0ICAvKipcblx0ICAgKiBXYXJuIHN0dWZmLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG1zZ1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiB3YXJuJDEobXNnKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJvdXRlcl0gJyArIG1zZyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZXNvbHZlIGEgcmVsYXRpdmUgcGF0aC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHJlbGF0aXZlXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBhcHBlbmRcblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlc29sdmVQYXRoKGJhc2UsIHJlbGF0aXZlLCBhcHBlbmQpIHtcblx0ICAgIHZhciBxdWVyeSA9IGJhc2UubWF0Y2goLyhcXD8uKikkLyk7XG5cdCAgICBpZiAocXVlcnkpIHtcblx0ICAgICAgcXVlcnkgPSBxdWVyeVsxXTtcblx0ICAgICAgYmFzZSA9IGJhc2Uuc2xpY2UoMCwgLXF1ZXJ5Lmxlbmd0aCk7XG5cdCAgICB9XG5cdCAgICAvLyBhIHF1ZXJ5IVxuXHQgICAgaWYgKHJlbGF0aXZlLmNoYXJBdCgwKSA9PT0gJz8nKSB7XG5cdCAgICAgIHJldHVybiBiYXNlICsgcmVsYXRpdmU7XG5cdCAgICB9XG5cdCAgICB2YXIgc3RhY2sgPSBiYXNlLnNwbGl0KCcvJyk7XG5cdCAgICAvLyByZW1vdmUgdHJhaWxpbmcgc2VnbWVudCBpZjpcblx0ICAgIC8vIC0gbm90IGFwcGVuZGluZ1xuXHQgICAgLy8gLSBhcHBlbmRpbmcgdG8gdHJhaWxpbmcgc2xhc2ggKGxhc3Qgc2VnbWVudCBpcyBlbXB0eSlcblx0ICAgIGlmICghYXBwZW5kIHx8ICFzdGFja1tzdGFjay5sZW5ndGggLSAxXSkge1xuXHQgICAgICBzdGFjay5wb3AoKTtcblx0ICAgIH1cblx0ICAgIC8vIHJlc29sdmUgcmVsYXRpdmUgcGF0aFxuXHQgICAgdmFyIHNlZ21lbnRzID0gcmVsYXRpdmUucmVwbGFjZSgvXlxcLy8sICcnKS5zcGxpdCgnLycpO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzZWdtZW50cy5sZW5ndGg7IGkrKykge1xuXHQgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuXHQgICAgICBpZiAoc2VnbWVudCA9PT0gJy4nKSB7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gJy4uJykge1xuXHQgICAgICAgIHN0YWNrLnBvcCgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHN0YWNrLnB1c2goc2VnbWVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIGVuc3VyZSBsZWFkaW5nIHNsYXNoXG5cdCAgICBpZiAoc3RhY2tbMF0gIT09ICcnKSB7XG5cdCAgICAgIHN0YWNrLnVuc2hpZnQoJycpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHN0YWNrLmpvaW4oJy8nKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEZvcmdpdmluZyBjaGVjayBmb3IgYSBwcm9taXNlXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gcFxuXHQgICAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGlzUHJvbWlzZShwKSB7XG5cdCAgICByZXR1cm4gcCAmJiB0eXBlb2YgcC50aGVuID09PSAnZnVuY3Rpb24nO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmV0cml2ZSBhIHJvdXRlIGNvbmZpZyBmaWVsZCBmcm9tIGEgY29tcG9uZW50IGluc3RhbmNlXG5cdCAgICogT1IgYSBjb21wb25lbnQgY29udHJ1Y3Rvci5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb258VnVlfSBjb21wb25lbnRcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgICAqIEByZXR1cm4geyp9XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgbmFtZSkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSBjb21wb25lbnQgJiYgKGNvbXBvbmVudC4kb3B0aW9ucyB8fCBjb21wb25lbnQub3B0aW9ucyk7XG5cdCAgICByZXR1cm4gb3B0aW9ucyAmJiBvcHRpb25zLnJvdXRlICYmIG9wdGlvbnMucm91dGVbbmFtZV07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZXNvbHZlIGFuIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5LiBIYXZlIHRvIGRvIGEgZGlydHlcblx0ICAgKiBtb2NrIGhlcmUgYmVjYXVzZSBvZiBWdWUgY29yZSdzIGludGVybmFsIEFQSSBkZXBlbmRzIG9uXG5cdCAgICogYW4gSUQgY2hlY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIHZhciByZXNvbHZlciA9IHVuZGVmaW5lZDtcblx0XG5cdCAgZnVuY3Rpb24gcmVzb2x2ZUFzeW5jQ29tcG9uZW50KGhhbmRsZXIsIGNiKSB7XG5cdCAgICBpZiAoIXJlc29sdmVyKSB7XG5cdCAgICAgIHJlc29sdmVyID0ge1xuXHQgICAgICAgIHJlc29sdmU6IGV4cG9ydHMkMS5WdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50LFxuXHQgICAgICAgICRvcHRpb25zOiB7XG5cdCAgICAgICAgICBjb21wb25lbnRzOiB7XG5cdCAgICAgICAgICAgIF86IGhhbmRsZXIuY29tcG9uZW50XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVzb2x2ZXIuJG9wdGlvbnMuY29tcG9uZW50cy5fID0gaGFuZGxlci5jb21wb25lbnQ7XG5cdCAgICB9XG5cdCAgICByZXNvbHZlci5yZXNvbHZlKCdfJywgZnVuY3Rpb24gKENvbXBvbmVudCkge1xuXHQgICAgICBoYW5kbGVyLmNvbXBvbmVudCA9IENvbXBvbmVudDtcblx0ICAgICAgY2IoQ29tcG9uZW50KTtcblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogTWFwIHRoZSBkeW5hbWljIHNlZ21lbnRzIGluIGEgcGF0aCB0byBwYXJhbXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gcXVlcnlcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gbWFwUGFyYW1zKHBhdGgsIHBhcmFtcywgcXVlcnkpIHtcblx0ICAgIGlmIChwYXJhbXMgPT09IHVuZGVmaW5lZCkgcGFyYW1zID0ge307XG5cdFxuXHQgICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvOihbXlxcL10rKS9nLCBmdW5jdGlvbiAoXywga2V5KSB7XG5cdCAgICAgIHZhciB2YWwgPSBwYXJhbXNba2V5XTtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICghdmFsKSB7XG5cdCAgICAgICAgd2FybiQxKCdwYXJhbSBcIicgKyBrZXkgKyAnXCIgbm90IGZvdW5kIHdoZW4gZ2VuZXJhdGluZyAnICsgJ3BhdGggZm9yIFwiJyArIHBhdGggKyAnXCIgd2l0aCBwYXJhbXMgJyArIEpTT04uc3RyaW5naWZ5KHBhcmFtcykpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWwgfHwgJyc7XG5cdCAgICB9KTtcblx0ICAgIGlmIChxdWVyeSkge1xuXHQgICAgICBwYXRoICs9IGdlblF1ZXJ5KHF1ZXJ5KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBwYXRoO1xuXHQgIH1cblx0XG5cdCAgdmFyIGhhc2hSRSA9IC8jLiokLztcblx0XG5cdCAgdmFyIEhUTUw1SGlzdG9yeSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBIVE1MNUhpc3RvcnkoX3JlZikge1xuXHQgICAgICB2YXIgcm9vdCA9IF9yZWYucm9vdDtcblx0ICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTtcblx0ICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIEhUTUw1SGlzdG9yeSk7XG5cdFxuXHQgICAgICBpZiAocm9vdCAmJiByb290ICE9PSAnLycpIHtcblx0ICAgICAgICAvLyBtYWtlIHN1cmUgdGhlcmUncyB0aGUgc3RhcnRpbmcgc2xhc2hcblx0ICAgICAgICBpZiAocm9vdC5jaGFyQXQoMCkgIT09ICcvJykge1xuXHQgICAgICAgICAgcm9vdCA9ICcvJyArIHJvb3Q7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHJlbW92ZSB0cmFpbGluZyBzbGFzaFxuXHQgICAgICAgIHRoaXMucm9vdCA9IHJvb3QucmVwbGFjZSgvXFwvJC8sICcnKTtcblx0ICAgICAgICB0aGlzLnJvb3RSRSA9IG5ldyBSZWdFeHAoJ15cXFxcJyArIHRoaXMucm9vdCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5yb290ID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG5cdCAgICAgIC8vIGNoZWNrIGJhc2UgdGFnXG5cdCAgICAgIHZhciBiYXNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdiYXNlJyk7XG5cdCAgICAgIHRoaXMuYmFzZSA9IGJhc2VFbCAmJiBiYXNlRWwuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KCkge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgdmFyIHVybCA9IGxvY2F0aW9uLnBhdGhuYW1lICsgbG9jYXRpb24uc2VhcmNoO1xuXHQgICAgICAgIGlmIChfdGhpcy5yb290KSB7XG5cdCAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShfdGhpcy5yb290UkUsICcnKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgX3RoaXMub25DaGFuZ2UodXJsLCBlICYmIGUuc3RhdGUsIGxvY2F0aW9uLmhhc2gpO1xuXHQgICAgICB9O1xuXHQgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgdGhpcy5saXN0ZW5lcigpO1xuXHQgICAgfTtcblx0XG5cdCAgICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuXHQgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCkge1xuXHQgICAgICB2YXIgdXJsID0gdGhpcy5mb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCk7XG5cdCAgICAgIGlmIChyZXBsYWNlKSB7XG5cdCAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sICcnLCB1cmwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHJlY29yZCBzY3JvbGwgcG9zaXRpb24gYnkgcmVwbGFjaW5nIGN1cnJlbnQgc3RhdGVcblx0ICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7XG5cdCAgICAgICAgICBwb3M6IHtcblx0ICAgICAgICAgICAgeDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuXHQgICAgICAgICAgICB5OiB3aW5kb3cucGFnZVlPZmZzZXRcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCAnJywgbG9jYXRpb24uaHJlZik7XG5cdCAgICAgICAgLy8gdGhlbiBwdXNoIG5ldyBzdGF0ZVxuXHQgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHt9LCAnJywgdXJsKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgaGFzaE1hdGNoID0gcGF0aC5tYXRjaChoYXNoUkUpO1xuXHQgICAgICB2YXIgaGFzaCA9IGhhc2hNYXRjaCAmJiBoYXNoTWF0Y2hbMF07XG5cdCAgICAgIHBhdGggPSB1cmxcblx0ICAgICAgLy8gc3RyaXAgaGFzaCBzbyBpdCBkb2Vzbid0IG1lc3MgdXAgcGFyYW1zXG5cdCAgICAgIC5yZXBsYWNlKGhhc2hSRSwgJycpXG5cdCAgICAgIC8vIHJlbW92ZSByb290IGJlZm9yZSBtYXRjaGluZ1xuXHQgICAgICAucmVwbGFjZSh0aGlzLnJvb3RSRSwgJycpO1xuXHQgICAgICB0aGlzLm9uQ2hhbmdlKHBhdGgsIG51bGwsIGhhc2gpO1xuXHQgICAgfTtcblx0XG5cdCAgICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuXHQgICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJ1xuXHQgICAgICAvLyBhYnNvbHV0ZSBwYXRoXG5cdCAgICAgID8gdGhpcy5yb290ID8gdGhpcy5yb290ICsgJy8nICsgcGF0aC5yZXBsYWNlKC9eXFwvLywgJycpIDogcGF0aCA6IHJlc29sdmVQYXRoKHRoaXMuYmFzZSB8fCBsb2NhdGlvbi5wYXRobmFtZSwgcGF0aCwgYXBwZW5kKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIEhUTUw1SGlzdG9yeTtcblx0ICB9KSgpO1xuXHRcblx0ICB2YXIgSGFzaEhpc3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gSGFzaEhpc3RvcnkoX3JlZikge1xuXHQgICAgICB2YXIgaGFzaGJhbmcgPSBfcmVmLmhhc2hiYW5nO1xuXHQgICAgICB2YXIgb25DaGFuZ2UgPSBfcmVmLm9uQ2hhbmdlO1xuXHQgICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgSGFzaEhpc3RvcnkpO1xuXHRcblx0ICAgICAgdGhpcy5oYXNoYmFuZyA9IGhhc2hiYW5nO1xuXHQgICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG5cdCAgICB9XG5cdFxuXHQgICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB2YXIgcGF0aCA9IGxvY2F0aW9uLmhhc2g7XG5cdCAgICAgICAgdmFyIHJhdyA9IHBhdGgucmVwbGFjZSgvXiMhPy8sICcnKTtcblx0ICAgICAgICAvLyBhbHdheXNcblx0ICAgICAgICBpZiAocmF3LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG5cdCAgICAgICAgICByYXcgPSAnLycgKyByYXc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBmb3JtYXR0ZWRQYXRoID0gc2VsZi5mb3JtYXRQYXRoKHJhdyk7XG5cdCAgICAgICAgaWYgKGZvcm1hdHRlZFBhdGggIT09IHBhdGgpIHtcblx0ICAgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UoZm9ybWF0dGVkUGF0aCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIGRldGVybWluZSBxdWVyeVxuXHQgICAgICAgIC8vIG5vdGUgaXQncyBwb3NzaWJsZSB0byBoYXZlIHF1ZXJpZXMgaW4gYm90aCB0aGUgYWN0dWFsIFVSTFxuXHQgICAgICAgIC8vIGFuZCB0aGUgaGFzaCBmcmFnbWVudCBpdHNlbGYuXG5cdCAgICAgICAgdmFyIHF1ZXJ5ID0gbG9jYXRpb24uc2VhcmNoICYmIHBhdGguaW5kZXhPZignPycpID4gLTEgPyAnJicgKyBsb2NhdGlvbi5zZWFyY2guc2xpY2UoMSkgOiBsb2NhdGlvbi5zZWFyY2g7XG5cdCAgICAgICAgc2VsZi5vbkNoYW5nZShwYXRoLnJlcGxhY2UoL14jIT8vLCAnJykgKyBxdWVyeSk7XG5cdCAgICAgIH07XG5cdCAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIHRoaXMubGlzdGVuZXIoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuXHQgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgfTtcblx0XG5cdCAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcblx0ICAgICAgcGF0aCA9IHRoaXMuZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpO1xuXHQgICAgICBpZiAocmVwbGFjZSkge1xuXHQgICAgICAgIGxvY2F0aW9uLnJlcGxhY2UocGF0aCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbG9jYXRpb24uaGFzaCA9IHBhdGg7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuXHQgICAgICB2YXIgaXNBYnNvbG91dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuXHQgICAgICB2YXIgcHJlZml4ID0gJyMnICsgKHRoaXMuaGFzaGJhbmcgPyAnIScgOiAnJyk7XG5cdCAgICAgIHJldHVybiBpc0Fic29sb3V0ZSA/IHByZWZpeCArIHBhdGggOiBwcmVmaXggKyByZXNvbHZlUGF0aChsb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jIT8vLCAnJyksIHBhdGgsIGFwcGVuZCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBIYXNoSGlzdG9yeTtcblx0ICB9KSgpO1xuXHRcblx0ICB2YXIgQWJzdHJhY3RIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEFic3RyYWN0SGlzdG9yeShfcmVmKSB7XG5cdCAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG5cdCAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBBYnN0cmFjdEhpc3RvcnkpO1xuXHRcblx0ICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuXHQgICAgICB0aGlzLmN1cnJlbnRQYXRoID0gJy8nO1xuXHQgICAgfVxuXHRcblx0ICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcblx0ICAgICAgdGhpcy5vbkNoYW5nZSgnLycpO1xuXHQgICAgfTtcblx0XG5cdCAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuXHQgICAgICAvLyBub29wXG5cdCAgICB9O1xuXHRcblx0ICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcblx0ICAgICAgcGF0aCA9IHRoaXMuY3VycmVudFBhdGggPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcblx0ICAgICAgdGhpcy5vbkNoYW5nZShwYXRoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcblx0ICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoIDogcmVzb2x2ZVBhdGgodGhpcy5jdXJyZW50UGF0aCwgcGF0aCwgYXBwZW5kKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIEFic3RyYWN0SGlzdG9yeTtcblx0ICB9KSgpO1xuXHRcblx0ICAvKipcblx0ICAgKiBEZXRlcm1pbmUgdGhlIHJldXNhYmlsaXR5IG9mIGFuIGV4aXN0aW5nIHJvdXRlciB2aWV3LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYW5SZXVzZSh2aWV3LCBoYW5kbGVyLCB0cmFuc2l0aW9uKSB7XG5cdCAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuXHQgICAgaWYgKCFjb21wb25lbnQgfHwgIWhhbmRsZXIpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgLy8gaW1wb3J0YW50OiBjaGVjayB2aWV3LkNvbXBvbmVudCBoZXJlIGJlY2F1c2UgaXQgbWF5XG5cdCAgICAvLyBoYXZlIGJlZW4gY2hhbmdlZCBpbiBhY3RpdmF0ZSBob29rXG5cdCAgICBpZiAodmlldy5Db21wb25lbnQgIT09IGhhbmRsZXIuY29tcG9uZW50KSB7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICAgIHZhciBjYW5SZXVzZUZuID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnY2FuUmV1c2UnKTtcblx0ICAgIHJldHVybiB0eXBlb2YgY2FuUmV1c2VGbiA9PT0gJ2Jvb2xlYW4nID8gY2FuUmV1c2VGbiA6IGNhblJldXNlRm4gPyBjYW5SZXVzZUZuLmNhbGwoY29tcG9uZW50LCB7XG5cdCAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuXHQgICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb21cblx0ICAgIH0pIDogdHJ1ZTsgLy8gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgaWYgYSBjb21wb25lbnQgY2FuIGRlYWN0aXZhdGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuXHQgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2FuRGVhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBuZXh0KSB7XG5cdCAgICB2YXIgZnJvbUNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcblx0ICAgIHZhciBob29rID0gZ2V0Um91dGVDb25maWcoZnJvbUNvbXBvbmVudCwgJ2NhbkRlYWN0aXZhdGUnKTtcblx0ICAgIGlmICghaG9vaykge1xuXHQgICAgICBuZXh0KCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIGZyb21Db21wb25lbnQsIG5leHQsIHtcblx0ICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgaWYgYSBjb21wb25lbnQgY2FuIGFjdGl2YXRlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNhbkFjdGl2YXRlKGhhbmRsZXIsIHRyYW5zaXRpb24sIG5leHQpIHtcblx0ICAgIHJlc29sdmVBc3luY0NvbXBvbmVudChoYW5kbGVyLCBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG5cdCAgICAgIC8vIGhhdmUgdG8gY2hlY2sgZHVlIHRvIGFzeW5jLW5lc3Ncblx0ICAgICAgaWYgKHRyYW5zaXRpb24uYWJvcnRlZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICAvLyBkZXRlcm1pbmUgaWYgdGhpcyBjb21wb25lbnQgY2FuIGJlIGFjdGl2YXRlZFxuXHQgICAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2NhbkFjdGl2YXRlJyk7XG5cdCAgICAgIGlmICghaG9vaykge1xuXHQgICAgICAgIG5leHQoKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIG51bGwsIG5leHQsIHtcblx0ICAgICAgICAgIGV4cGVjdEJvb2xlYW46IHRydWVcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDYWxsIGRlYWN0aXZhdGUgaG9va3MgZm9yIGV4aXN0aW5nIHJvdXRlci12aWV3cy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG5cdCAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBkZWFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIG5leHQpIHtcblx0ICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG5cdCAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgJ2RlYWN0aXZhdGUnKTtcblx0ICAgIGlmICghaG9vaykge1xuXHQgICAgICBuZXh0KCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhob29rLCBjb21wb25lbnQsIG5leHQpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQWN0aXZhdGUgLyBzd2l0Y2ggY29tcG9uZW50IGZvciBhIHJvdXRlci12aWV3LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVwdGhcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIGRlcHRoLCBjYiwgcmV1c2UpIHtcblx0ICAgIHZhciBoYW5kbGVyID0gdHJhbnNpdGlvbi5hY3RpdmF0ZVF1ZXVlW2RlcHRoXTtcblx0ICAgIGlmICghaGFuZGxlcikge1xuXHQgICAgICBzYXZlQ2hpbGRWaWV3KHZpZXcpO1xuXHQgICAgICBpZiAodmlldy5fYm91bmQpIHtcblx0ICAgICAgICB2aWV3LnNldENvbXBvbmVudChudWxsKTtcblx0ICAgICAgfVxuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIENvbXBvbmVudCA9IHZpZXcuQ29tcG9uZW50ID0gaGFuZGxlci5jb21wb25lbnQ7XG5cdCAgICB2YXIgYWN0aXZhdGVIb29rID0gZ2V0Um91dGVDb25maWcoQ29tcG9uZW50LCAnYWN0aXZhdGUnKTtcblx0ICAgIHZhciBkYXRhSG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2RhdGEnKTtcblx0ICAgIHZhciB3YWl0Rm9yRGF0YSA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ3dhaXRGb3JEYXRhJyk7XG5cdFxuXHQgICAgdmlldy5kZXB0aCA9IGRlcHRoO1xuXHQgICAgdmlldy5hY3RpdmF0ZWQgPSBmYWxzZTtcblx0XG5cdCAgICB2YXIgY29tcG9uZW50ID0gdW5kZWZpbmVkO1xuXHQgICAgdmFyIGxvYWRpbmcgPSAhIShkYXRhSG9vayAmJiAhd2FpdEZvckRhdGEpO1xuXHRcblx0ICAgIC8vIFwicmV1c2VcIiBpcyBhIGZsYWcgcGFzc2VkIGRvd24gd2hlbiB0aGUgcGFyZW50IHZpZXcgaXNcblx0ICAgIC8vIGVpdGhlciByZXVzZWQgdmlhIGtlZXAtYWxpdmUgb3IgYXMgYSBjaGlsZCBvZiBhIGtlcHQtYWxpdmUgdmlldy5cblx0ICAgIC8vIG9mIGNvdXJzZSB3ZSBjYW4gb25seSByZXVzZSBpZiB0aGUgY3VycmVudCBrZXB0LWFsaXZlIGluc3RhbmNlXG5cdCAgICAvLyBpcyBvZiB0aGUgY29ycmVjdCB0eXBlLlxuXHQgICAgcmV1c2UgPSByZXVzZSAmJiB2aWV3LmNoaWxkVk0gJiYgdmlldy5jaGlsZFZNLmNvbnN0cnVjdG9yID09PSBDb21wb25lbnQ7XG5cdFxuXHQgICAgaWYgKHJldXNlKSB7XG5cdCAgICAgIC8vIGp1c3QgcmV1c2Vcblx0ICAgICAgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuXHQgICAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSBsb2FkaW5nO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc2F2ZUNoaWxkVmlldyh2aWV3KTtcblx0XG5cdCAgICAgIC8vIHVuYnVpbGQgY3VycmVudCBjb21wb25lbnQuIHRoaXMgc3RlcCBhbHNvIGRlc3Ryb3lzXG5cdCAgICAgIC8vIGFuZCByZW1vdmVzIGFsbCBuZXN0ZWQgY2hpbGQgdmlld3MuXG5cdCAgICAgIHZpZXcudW5idWlsZCh0cnVlKTtcblx0XG5cdCAgICAgIC8vIGJ1aWxkIHRoZSBuZXcgY29tcG9uZW50LiB0aGlzIHdpbGwgYWxzbyBjcmVhdGUgdGhlXG5cdCAgICAgIC8vIGRpcmVjdCBjaGlsZCB2aWV3IG9mIHRoZSBjdXJyZW50IG9uZS4gaXQgd2lsbCByZWdpc3RlclxuXHQgICAgICAvLyBpdHNlbGYgYXMgdmlldy5jaGlsZFZpZXcuXG5cdCAgICAgIGNvbXBvbmVudCA9IHZpZXcuYnVpbGQoe1xuXHQgICAgICAgIF9tZXRhOiB7XG5cdCAgICAgICAgICAkbG9hZGluZ1JvdXRlRGF0YTogbG9hZGluZ1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcblx0ICAgICAgICAgIHRoaXMuX3JvdXRlclZpZXcgPSB2aWV3O1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICAvLyBoYW5kbGUga2VlcC1hbGl2ZS5cblx0ICAgICAgLy8gd2hlbiBhIGtlcHQtYWxpdmUgY2hpbGQgdm0gaXMgcmVzdG9yZWQsIHdlIG5lZWQgdG9cblx0ICAgICAgLy8gYWRkIGl0cyBjYWNoZWQgY2hpbGQgdmlld3MgaW50byB0aGUgcm91dGVyJ3MgdmlldyBsaXN0LFxuXHQgICAgICAvLyBhbmQgYWxzbyBwcm9wZXJseSB1cGRhdGUgY3VycmVudCB2aWV3J3MgY2hpbGQgdmlldy5cblx0ICAgICAgaWYgKHZpZXcua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gbG9hZGluZztcblx0ICAgICAgICB2YXIgY2FjaGVkQ2hpbGRWaWV3ID0gY29tcG9uZW50Ll9rZWVwQWxpdmVSb3V0ZXJWaWV3O1xuXHQgICAgICAgIGlmIChjYWNoZWRDaGlsZFZpZXcpIHtcblx0ICAgICAgICAgIHZpZXcuY2hpbGRWaWV3ID0gY2FjaGVkQ2hpbGRWaWV3O1xuXHQgICAgICAgICAgY29tcG9uZW50Ll9rZWVwQWxpdmVSb3V0ZXJWaWV3ID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBjbGVhbnVwIHRoZSBjb21wb25lbnQgaW4gY2FzZSB0aGUgdHJhbnNpdGlvbiBpcyBhYm9ydGVkXG5cdCAgICAvLyBiZWZvcmUgdGhlIGNvbXBvbmVudCBpcyBldmVyIGluc2VydGVkLlxuXHQgICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbiBjbGVhbnVwKCkge1xuXHQgICAgICBjb21wb25lbnQuJGRlc3Ryb3koKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gYWN0dWFsbHkgaW5zZXJ0IHRoZSBjb21wb25lbnQgYW5kIHRyaWdnZXIgdHJhbnNpdGlvblxuXHQgICAgdmFyIGluc2VydCA9IGZ1bmN0aW9uIGluc2VydCgpIHtcblx0ICAgICAgaWYgKHJldXNlKSB7XG5cdCAgICAgICAgY2IgJiYgY2IoKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHJvdXRlciA9IHRyYW5zaXRpb24ucm91dGVyO1xuXHQgICAgICBpZiAocm91dGVyLl9yZW5kZXJlZCB8fCByb3V0ZXIuX3RyYW5zaXRpb25PbkxvYWQpIHtcblx0ICAgICAgICB2aWV3LnRyYW5zaXRpb24oY29tcG9uZW50KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBubyB0cmFuc2l0aW9uIG9uIGZpcnN0IHJlbmRlciwgbWFudWFsIHRyYW5zaXRpb25cblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAodmlldy5zZXRDdXJyZW50KSB7XG5cdCAgICAgICAgICAvLyAwLjEyIGNvbXBhdFxuXHQgICAgICAgICAgdmlldy5zZXRDdXJyZW50KGNvbXBvbmVudCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIDEuMFxuXHQgICAgICAgICAgdmlldy5jaGlsZFZNID0gY29tcG9uZW50O1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjb21wb25lbnQuJGJlZm9yZSh2aWV3LmFuY2hvciwgbnVsbCwgZmFsc2UpO1xuXHQgICAgICB9XG5cdCAgICAgIGNiICYmIGNiKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIHZhciBhZnRlckRhdGEgPSBmdW5jdGlvbiBhZnRlckRhdGEoKSB7XG5cdCAgICAgIC8vIGFjdGl2YXRlIHRoZSBjaGlsZCB2aWV3XG5cdCAgICAgIGlmICh2aWV3LmNoaWxkVmlldykge1xuXHQgICAgICAgIGFjdGl2YXRlKHZpZXcuY2hpbGRWaWV3LCB0cmFuc2l0aW9uLCBkZXB0aCArIDEsIG51bGwsIHJldXNlIHx8IHZpZXcua2VlcEFsaXZlKTtcblx0ICAgICAgfVxuXHQgICAgICBpbnNlcnQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gY2FsbGVkIGFmdGVyIGFjdGl2YXRpb24gaG9vayBpcyByZXNvbHZlZFxuXHQgICAgdmFyIGFmdGVyQWN0aXZhdGUgPSBmdW5jdGlvbiBhZnRlckFjdGl2YXRlKCkge1xuXHQgICAgICB2aWV3LmFjdGl2YXRlZCA9IHRydWU7XG5cdCAgICAgIGlmIChkYXRhSG9vayAmJiB3YWl0Rm9yRGF0YSkge1xuXHQgICAgICAgIC8vIHdhaXQgdW50aWwgZGF0YSBsb2FkZWQgdG8gaW5zZXJ0XG5cdCAgICAgICAgbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBkYXRhSG9vaywgYWZ0ZXJEYXRhLCBjbGVhbnVwKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBsb2FkIGRhdGEgYW5kIGluc2VydCBhdCB0aGUgc2FtZSB0aW1lXG5cdCAgICAgICAgaWYgKGRhdGFIb29rKSB7XG5cdCAgICAgICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgYWZ0ZXJEYXRhKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgaWYgKGFjdGl2YXRlSG9vaykge1xuXHQgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhhY3RpdmF0ZUhvb2ssIGNvbXBvbmVudCwgYWZ0ZXJBY3RpdmF0ZSwge1xuXHQgICAgICAgIGNsZWFudXA6IGNsZWFudXAsXG5cdCAgICAgICAgcG9zdEFjdGl2YXRlOiB0cnVlXG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgYWZ0ZXJBY3RpdmF0ZSgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmV1c2UgYSB2aWV3LCBqdXN0IHJlbG9hZCBkYXRhIGlmIG5lY2Vzc2FyeS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG5cdCAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJldXNlKHZpZXcsIHRyYW5zaXRpb24pIHtcblx0ICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG5cdCAgICB2YXIgZGF0YUhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsICdkYXRhJyk7XG5cdCAgICBpZiAoZGF0YUhvb2spIHtcblx0ICAgICAgbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBkYXRhSG9vayk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBc3luY2hyb25vdXNseSBsb2FkIGFuZCBhcHBseSBkYXRhIHRvIGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSBjb21wb25lbnRcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjbGVhbnVwXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgaG9vaywgY2IsIGNsZWFudXApIHtcblx0ICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IHRydWU7XG5cdCAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhob29rLCBjb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gZmFsc2U7XG5cdCAgICAgIGNvbXBvbmVudC4kZW1pdCgncm91dGUtZGF0YS1sb2FkZWQnLCBjb21wb25lbnQpO1xuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgfSwge1xuXHQgICAgICBjbGVhbnVwOiBjbGVhbnVwLFxuXHQgICAgICBwb3N0QWN0aXZhdGU6IHRydWUsXG5cdCAgICAgIHByb2Nlc3NEYXRhOiBmdW5jdGlvbiBwcm9jZXNzRGF0YShkYXRhKSB7XG5cdCAgICAgICAgLy8gaGFuZGxlIHByb21pc2Ugc3VnYXIgc3ludGF4XG5cdCAgICAgICAgdmFyIHByb21pc2VzID0gW107XG5cdCAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QoZGF0YSkpIHtcblx0ICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICAgICAgICB2YXIgdmFsID0gZGF0YVtrZXldO1xuXHQgICAgICAgICAgICBpZiAoaXNQcm9taXNlKHZhbCkpIHtcblx0ICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHZhbC50aGVuKGZ1bmN0aW9uIChyZXNvbHZlZFZhbCkge1xuXHQgICAgICAgICAgICAgICAgY29tcG9uZW50LiRzZXQoa2V5LCByZXNvbHZlZFZhbCk7XG5cdCAgICAgICAgICAgICAgfSkpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGNvbXBvbmVudC4kc2V0KGtleSwgdmFsKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChwcm9taXNlcy5sZW5ndGgpIHtcblx0ICAgICAgICAgIHJldHVybiBwcm9taXNlc1swXS5jb25zdHJ1Y3Rvci5hbGwocHJvbWlzZXMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBTYXZlIHRoZSBjaGlsZCB2aWV3IGZvciBhIGtlcHQtYWxpdmUgdmlldyBzbyB0aGF0XG5cdCAgICogd2UgY2FuIHJlc3RvcmUgaXQgd2hlbiBpdCBpcyBzd2l0Y2hlZCBiYWNrIHRvLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gc2F2ZUNoaWxkVmlldyh2aWV3KSB7XG5cdCAgICBpZiAodmlldy5rZWVwQWxpdmUgJiYgdmlldy5jaGlsZFZNICYmIHZpZXcuY2hpbGRWaWV3KSB7XG5cdCAgICAgIHZpZXcuY2hpbGRWTS5fa2VlcEFsaXZlUm91dGVyVmlldyA9IHZpZXcuY2hpbGRWaWV3O1xuXHQgICAgfVxuXHQgICAgdmlldy5jaGlsZFZpZXcgPSBudWxsO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgcGxhaW4gb2JqZWN0LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWxcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gaXNQbGFpbk9iamVjdCh2YWwpIHtcblx0ICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBIFJvdXRlVHJhbnNpdGlvbiBvYmplY3QgbWFuYWdlcyB0aGUgcGlwZWxpbmUgb2YgYVxuXHQgICAqIHJvdXRlci12aWV3IHN3aXRjaGluZyBwcm9jZXNzLiBUaGlzIGlzIGFsc28gdGhlIG9iamVjdFxuXHQgICAqIHBhc3NlZCBpbnRvIHVzZXIgcm91dGUgaG9va3MuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1JvdXRlcn0gcm91dGVyXG5cdCAgICogQHBhcmFtIHtSb3V0ZX0gdG9cblx0ICAgKiBAcGFyYW0ge1JvdXRlfSBmcm9tXG5cdCAgICovXG5cdFxuXHQgIHZhciBSb3V0ZVRyYW5zaXRpb24gPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gUm91dGVUcmFuc2l0aW9uKHJvdXRlciwgdG8sIGZyb20pIHtcblx0ICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdXRlVHJhbnNpdGlvbik7XG5cdFxuXHQgICAgICB0aGlzLnJvdXRlciA9IHJvdXRlcjtcblx0ICAgICAgdGhpcy50byA9IHRvO1xuXHQgICAgICB0aGlzLmZyb20gPSBmcm9tO1xuXHQgICAgICB0aGlzLm5leHQgPSBudWxsO1xuXHQgICAgICB0aGlzLmFib3J0ZWQgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBYm9ydCBjdXJyZW50IHRyYW5zaXRpb24gYW5kIHJldHVybiB0byBwcmV2aW91cyBsb2NhdGlvbi5cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuYWJvcnQgPSBmdW5jdGlvbiBhYm9ydCgpIHtcblx0ICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcblx0ICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuXHQgICAgICAgIC8vIGlmIHRoZSByb290IHBhdGggdGhyb3dzIGFuIGVycm9yIGR1cmluZyB2YWxpZGF0aW9uXG5cdCAgICAgICAgLy8gb24gaW5pdGlhbCBsb2FkLCBpdCBnZXRzIGNhdWdodCBpbiBhbiBpbmZpbml0ZSBsb29wLlxuXHQgICAgICAgIHZhciBhYm9ydGluZ09uTG9hZCA9ICF0aGlzLmZyb20ucGF0aCAmJiB0aGlzLnRvLnBhdGggPT09ICcvJztcblx0ICAgICAgICBpZiAoIWFib3J0aW5nT25Mb2FkKSB7XG5cdCAgICAgICAgICB0aGlzLnJvdXRlci5yZXBsYWNlKHRoaXMuZnJvbS5wYXRoIHx8ICcvJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWJvcnQgY3VycmVudCB0cmFuc2l0aW9uIGFuZCByZWRpcmVjdCB0byBhIG5ldyBsb2NhdGlvbi5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5yZWRpcmVjdCA9IGZ1bmN0aW9uIHJlZGlyZWN0KHBhdGgpIHtcblx0ICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcblx0ICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuXHQgICAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIHBhdGggPSBtYXBQYXJhbXMocGF0aCwgdGhpcy50by5wYXJhbXMsIHRoaXMudG8ucXVlcnkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBwYXRoLnBhcmFtcyA9IHBhdGgucGFyYW1zIHx8IHRoaXMudG8ucGFyYW1zO1xuXHQgICAgICAgICAgcGF0aC5xdWVyeSA9IHBhdGgucXVlcnkgfHwgdGhpcy50by5xdWVyeTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5yb3V0ZXIucmVwbGFjZShwYXRoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEEgcm91dGVyIHZpZXcgdHJhbnNpdGlvbidzIHBpcGVsaW5lIGNhbiBiZSBkZXNjcmliZWQgYXNcblx0ICAgICAqIGZvbGxvd3MsIGFzc3VtaW5nIHdlIGFyZSB0cmFuc2l0aW9uaW5nIGZyb20gYW4gZXhpc3Rpbmdcblx0ICAgICAqIDxyb3V0ZXItdmlldz4gY2hhaW4gW0NvbXBvbmVudCBBLCBDb21wb25lbnQgQl0gdG8gYSBuZXdcblx0ICAgICAqIGNoYWluIFtDb21wb25lbnQgQSwgQ29tcG9uZW50IENdOlxuXHQgICAgICpcblx0ICAgICAqICBBICAgIEFcblx0ICAgICAqICB8ID0+IHxcblx0ICAgICAqICBCICAgIENcblx0ICAgICAqXG5cdCAgICAgKiAxLiBSZXVzYWJsaXR5IHBoYXNlOlxuXHQgICAgICogICAtPiBjYW5SZXVzZShBLCBBKVxuXHQgICAgICogICAtPiBjYW5SZXVzZShCLCBDKVxuXHQgICAgICogICAtPiBkZXRlcm1pbmUgbmV3IHF1ZXVlczpcblx0ICAgICAqICAgICAgLSBkZWFjdGl2YXRpb246IFtCXVxuXHQgICAgICogICAgICAtIGFjdGl2YXRpb246IFtDXVxuXHQgICAgICpcblx0ICAgICAqIDIuIFZhbGlkYXRpb24gcGhhc2U6XG5cdCAgICAgKiAgIC0+IGNhbkRlYWN0aXZhdGUoQilcblx0ICAgICAqICAgLT4gY2FuQWN0aXZhdGUoQylcblx0ICAgICAqXG5cdCAgICAgKiAzLiBBY3RpdmF0aW9uIHBoYXNlOlxuXHQgICAgICogICAtPiBkZWFjdGl2YXRlKEIpXG5cdCAgICAgKiAgIC0+IGFjdGl2YXRlKEMpXG5cdCAgICAgKlxuXHQgICAgICogRWFjaCBvZiB0aGVzZSBzdGVwcyBjYW4gYmUgYXN5bmNocm9ub3VzLCBhbmQgYW55XG5cdCAgICAgKiBzdGVwIGNhbiBwb3RlbnRpYWxseSBhYm9ydCB0aGUgdHJhbnNpdGlvbi5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KGNiKSB7XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcztcblx0XG5cdCAgICAgIC8vIGRldGVybWluZSB0aGUgcXVldWUgb2Ygdmlld3MgdG8gZGVhY3RpdmF0ZVxuXHQgICAgICB2YXIgZGVhY3RpdmF0ZVF1ZXVlID0gW107XG5cdCAgICAgIHZhciB2aWV3ID0gdGhpcy5yb3V0ZXIuX3Jvb3RWaWV3O1xuXHQgICAgICB3aGlsZSAodmlldykge1xuXHQgICAgICAgIGRlYWN0aXZhdGVRdWV1ZS51bnNoaWZ0KHZpZXcpO1xuXHQgICAgICAgIHZpZXcgPSB2aWV3LmNoaWxkVmlldztcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZSA9IGRlYWN0aXZhdGVRdWV1ZS5zbGljZSgpLnJldmVyc2UoKTtcblx0XG5cdCAgICAgIC8vIGRldGVybWluZSB0aGUgcXVldWUgb2Ygcm91dGUgaGFuZGxlcnMgdG8gYWN0aXZhdGVcblx0ICAgICAgdmFyIGFjdGl2YXRlUXVldWUgPSB0aGlzLmFjdGl2YXRlUXVldWUgPSB0b0FycmF5KHRoaXMudG8ubWF0Y2hlZCkubWFwKGZ1bmN0aW9uIChtYXRjaCkge1xuXHQgICAgICAgIHJldHVybiBtYXRjaC5oYW5kbGVyO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIC8vIDEuIFJldXNhYmlsaXR5IHBoYXNlXG5cdCAgICAgIHZhciBpID0gdW5kZWZpbmVkLFxuXHQgICAgICAgICAgcmV1c2VRdWV1ZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgZm9yIChpID0gMDsgaSA8IHJldmVyc2VEZWFjdGl2YXRlUXVldWUubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBpZiAoIWNhblJldXNlKHJldmVyc2VEZWFjdGl2YXRlUXVldWVbaV0sIGFjdGl2YXRlUXVldWVbaV0sIHRyYW5zaXRpb24pKSB7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGkgPiAwKSB7XG5cdCAgICAgICAgcmV1c2VRdWV1ZSA9IHJldmVyc2VEZWFjdGl2YXRlUXVldWUuc2xpY2UoMCwgaSk7XG5cdCAgICAgICAgZGVhY3RpdmF0ZVF1ZXVlID0gcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5zbGljZShpKS5yZXZlcnNlKCk7XG5cdCAgICAgICAgYWN0aXZhdGVRdWV1ZSA9IGFjdGl2YXRlUXVldWUuc2xpY2UoaSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIDIuIFZhbGlkYXRpb24gcGhhc2Vcblx0ICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShkZWFjdGl2YXRlUXVldWUsIGNhbkRlYWN0aXZhdGUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGFjdGl2YXRlUXVldWUsIGNhbkFjdGl2YXRlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGRlYWN0aXZhdGVRdWV1ZSwgZGVhY3RpdmF0ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICAvLyAzLiBBY3RpdmF0aW9uIHBoYXNlXG5cdFxuXHQgICAgICAgICAgICAvLyBVcGRhdGUgcm91dGVyIGN1cnJlbnQgcm91dGVcblx0ICAgICAgICAgICAgdHJhbnNpdGlvbi5yb3V0ZXIuX29uVHJhbnNpdGlvblZhbGlkYXRlZCh0cmFuc2l0aW9uKTtcblx0XG5cdCAgICAgICAgICAgIC8vIHRyaWdnZXIgcmV1c2UgZm9yIGFsbCByZXVzZWQgdmlld3Ncblx0ICAgICAgICAgICAgcmV1c2VRdWV1ZSAmJiByZXVzZVF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKHZpZXcpIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gcmV1c2UodmlldywgdHJhbnNpdGlvbik7XG5cdCAgICAgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAgICAgLy8gdGhlIHJvb3Qgb2YgdGhlIGNoYWluIHRoYXQgbmVlZHMgdG8gYmUgcmVwbGFjZWRcblx0ICAgICAgICAgICAgLy8gaXMgdGhlIHRvcC1tb3N0IG5vbi1yZXVzYWJsZSB2aWV3LlxuXHQgICAgICAgICAgICBpZiAoZGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgICAgICAgIHZhciBfdmlldyA9IGRlYWN0aXZhdGVRdWV1ZVtkZWFjdGl2YXRlUXVldWUubGVuZ3RoIC0gMV07XG5cdCAgICAgICAgICAgICAgdmFyIGRlcHRoID0gcmV1c2VRdWV1ZSA/IHJldXNlUXVldWUubGVuZ3RoIDogMDtcblx0ICAgICAgICAgICAgICBhY3RpdmF0ZShfdmlldywgdHJhbnNpdGlvbiwgZGVwdGgsIGNiKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBjYigpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQXN5bmNocm9ub3VzbHkgYW5kIHNlcXVlbnRpYWxseSBhcHBseSBhIGZ1bmN0aW9uIHRvIGFcblx0ICAgICAqIHF1ZXVlLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUucnVuUXVldWUgPSBmdW5jdGlvbiBydW5RdWV1ZShxdWV1ZSwgZm4sIGNiKSB7XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcztcblx0ICAgICAgc3RlcCgwKTtcblx0ICAgICAgZnVuY3Rpb24gc3RlcChpbmRleCkge1xuXHQgICAgICAgIGlmIChpbmRleCA+PSBxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICAgIGNiKCk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGZuKHF1ZXVlW2luZGV4XSwgdHJhbnNpdGlvbiwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBzdGVwKGluZGV4ICsgMSk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDYWxsIGEgdXNlciBwcm92aWRlZCByb3V0ZSB0cmFuc2l0aW9uIGhvb2sgYW5kIGhhbmRsZVxuXHQgICAgICogdGhlIHJlc3BvbnNlIChlLmcuIGlmIHRoZSB1c2VyIHJldHVybnMgYSBwcm9taXNlKS5cblx0ICAgICAqXG5cdCAgICAgKiBJZiB0aGUgdXNlciBuZWl0aGVyIGV4cGVjdHMgYW4gYXJndW1lbnQgbm9yIHJldHVybnMgYVxuXHQgICAgICogcHJvbWlzZSwgdGhlIGhvb2sgaXMgYXNzdW1lZCB0byBiZSBzeW5jaHJvbm91cy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG5cdCAgICAgKiBAcGFyYW0geyp9IFtjb250ZXh0XVxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGV4cGVjdEJvb2xlYW5cblx0ICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBwb3N0QWN0aXZlXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IHByb2Nlc3NEYXRhXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IGNsZWFudXBcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuY2FsbEhvb2sgPSBmdW5jdGlvbiBjYWxsSG9vayhob29rLCBjb250ZXh0LCBjYikge1xuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMyB8fCBhcmd1bWVudHNbM10gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzNdO1xuXHRcblx0ICAgICAgdmFyIF9yZWYkZXhwZWN0Qm9vbGVhbiA9IF9yZWYuZXhwZWN0Qm9vbGVhbjtcblx0ICAgICAgdmFyIGV4cGVjdEJvb2xlYW4gPSBfcmVmJGV4cGVjdEJvb2xlYW4gPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRleHBlY3RCb29sZWFuO1xuXHQgICAgICB2YXIgX3JlZiRwb3N0QWN0aXZhdGUgPSBfcmVmLnBvc3RBY3RpdmF0ZTtcblx0ICAgICAgdmFyIHBvc3RBY3RpdmF0ZSA9IF9yZWYkcG9zdEFjdGl2YXRlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkcG9zdEFjdGl2YXRlO1xuXHQgICAgICB2YXIgcHJvY2Vzc0RhdGEgPSBfcmVmLnByb2Nlc3NEYXRhO1xuXHQgICAgICB2YXIgY2xlYW51cCA9IF9yZWYuY2xlYW51cDtcblx0XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcztcblx0ICAgICAgdmFyIG5leHRDYWxsZWQgPSBmYWxzZTtcblx0XG5cdCAgICAgIC8vIGFib3J0IHRoZSB0cmFuc2l0aW9uXG5cdCAgICAgIHZhciBhYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuXHQgICAgICAgIGNsZWFudXAgJiYgY2xlYW51cCgpO1xuXHQgICAgICAgIHRyYW5zaXRpb24uYWJvcnQoKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIC8vIGhhbmRsZSBlcnJvcnNcblx0ICAgICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yKGVycikge1xuXHQgICAgICAgIHBvc3RBY3RpdmF0ZSA/IG5leHQoKSA6IGFib3J0KCk7XG5cdCAgICAgICAgaWYgKGVyciAmJiAhdHJhbnNpdGlvbi5yb3V0ZXIuX3N1cHByZXNzKSB7XG5cdCAgICAgICAgICB3YXJuJDEoJ1VuY2F1Z2h0IGVycm9yIGR1cmluZyB0cmFuc2l0aW9uOiAnKTtcblx0ICAgICAgICAgIHRocm93IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKGVycik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gc2luY2UgcHJvbWlzZSBzd2FsbG93cyBlcnJvcnMsIHdlIGhhdmUgdG9cblx0ICAgICAgLy8gdGhyb3cgaXQgaW4gdGhlIG5leHQgdGljay4uLlxuXHQgICAgICB2YXIgb25Qcm9taXNlRXJyb3IgPSBmdW5jdGlvbiBvblByb21pc2VFcnJvcihlcnIpIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgb25FcnJvcihlcnIpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB0aHJvdyBlO1xuXHQgICAgICAgICAgfSwgMCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gYWR2YW5jZSB0aGUgdHJhbnNpdGlvbiB0byB0aGUgbmV4dCBzdGVwXG5cdCAgICAgIHZhciBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcblx0ICAgICAgICBpZiAobmV4dENhbGxlZCkge1xuXHQgICAgICAgICAgd2FybiQxKCd0cmFuc2l0aW9uLm5leHQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgbmV4dENhbGxlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKHRyYW5zaXRpb24uYWJvcnRlZCkge1xuXHQgICAgICAgICAgY2xlYW51cCAmJiBjbGVhbnVwKCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNiICYmIGNiKCk7XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICB2YXIgbmV4dFdpdGhCb29sZWFuID0gZnVuY3Rpb24gbmV4dFdpdGhCb29sZWFuKHJlcykge1xuXHQgICAgICAgIGlmICh0eXBlb2YgcmVzID09PSAnYm9vbGVhbicpIHtcblx0ICAgICAgICAgIHJlcyA/IG5leHQoKSA6IGFib3J0KCk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzKSkge1xuXHQgICAgICAgICAgcmVzLnRoZW4oZnVuY3Rpb24gKG9rKSB7XG5cdCAgICAgICAgICAgIG9rID8gbmV4dCgpIDogYWJvcnQoKTtcblx0ICAgICAgICAgIH0sIG9uUHJvbWlzZUVycm9yKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKCFob29rLmxlbmd0aCkge1xuXHQgICAgICAgICAgbmV4dCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHZhciBuZXh0V2l0aERhdGEgPSBmdW5jdGlvbiBuZXh0V2l0aERhdGEoZGF0YSkge1xuXHQgICAgICAgIHZhciByZXMgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHJlcyA9IHByb2Nlc3NEYXRhKGRhdGEpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgICAgcmV0dXJuIG9uRXJyb3IoZXJyKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzUHJvbWlzZShyZXMpKSB7XG5cdCAgICAgICAgICByZXMudGhlbihuZXh0LCBvblByb21pc2VFcnJvcik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG5leHQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICAvLyBleHBvc2UgYSBjbG9uZSBvZiB0aGUgdHJhbnNpdGlvbiBvYmplY3QsIHNvIHRoYXQgZWFjaFxuXHQgICAgICAvLyBob29rIGdldHMgYSBjbGVhbiBjb3B5IGFuZCBwcmV2ZW50IHRoZSB1c2VyIGZyb21cblx0ICAgICAgLy8gbWVzc2luZyB3aXRoIHRoZSBpbnRlcm5hbHMuXG5cdCAgICAgIHZhciBleHBvc2VkID0ge1xuXHQgICAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuXHQgICAgICAgIGZyb206IHRyYW5zaXRpb24uZnJvbSxcblx0ICAgICAgICBhYm9ydDogYWJvcnQsXG5cdCAgICAgICAgbmV4dDogcHJvY2Vzc0RhdGEgPyBuZXh0V2l0aERhdGEgOiBuZXh0LFxuXHQgICAgICAgIHJlZGlyZWN0OiBmdW5jdGlvbiByZWRpcmVjdCgpIHtcblx0ICAgICAgICAgIHRyYW5zaXRpb24ucmVkaXJlY3QuYXBwbHkodHJhbnNpdGlvbiwgYXJndW1lbnRzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICAvLyBhY3R1YWxseSBjYWxsIHRoZSBob29rXG5cdCAgICAgIHZhciByZXMgPSB1bmRlZmluZWQ7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmVzID0gaG9vay5jYWxsKGNvbnRleHQsIGV4cG9zZWQpO1xuXHQgICAgICB9IGNhdGNoIChlcnIpIHtcblx0ICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoZXhwZWN0Qm9vbGVhbikge1xuXHQgICAgICAgIC8vIGJvb2xlYW4gaG9va3Ncblx0ICAgICAgICBuZXh0V2l0aEJvb2xlYW4ocmVzKTtcblx0ICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzKSkge1xuXHQgICAgICAgIC8vIHByb21pc2Vcblx0ICAgICAgICBpZiAocHJvY2Vzc0RhdGEpIHtcblx0ICAgICAgICAgIHJlcy50aGVuKG5leHRXaXRoRGF0YSwgb25Qcm9taXNlRXJyb3IpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXMudGhlbihuZXh0LCBvblByb21pc2VFcnJvcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3NEYXRhICYmIGlzUGxhaW5PamJlY3QocmVzKSkge1xuXHQgICAgICAgIC8vIGRhdGEgcHJvbWlzZSBzdWdhclxuXHQgICAgICAgIG5leHRXaXRoRGF0YShyZXMpO1xuXHQgICAgICB9IGVsc2UgaWYgKCFob29rLmxlbmd0aCkge1xuXHQgICAgICAgIG5leHQoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENhbGwgYSBzaW5nbGUgaG9vayBvciBhbiBhcnJheSBvZiBhc3luYyBob29rcyBpbiBzZXJpZXMuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtBcnJheX0gaG9va3Ncblx0ICAgICAqIEBwYXJhbSB7Kn0gY29udGV4dFxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuY2FsbEhvb2tzID0gZnVuY3Rpb24gY2FsbEhvb2tzKGhvb2tzLCBjb250ZXh0LCBjYiwgb3B0aW9ucykge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaG9va3MpKSB7XG5cdCAgICAgICAgdGhpcy5ydW5RdWV1ZShob29rcywgZnVuY3Rpb24gKGhvb2ssIF8sIG5leHQpIHtcblx0ICAgICAgICAgIGlmICghX3RoaXMuYWJvcnRlZCkge1xuXHQgICAgICAgICAgICBfdGhpcy5jYWxsSG9vayhob29rLCBjb250ZXh0LCBuZXh0LCBvcHRpb25zKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBjYik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5jYWxsSG9vayhob29rcywgY29udGV4dCwgY2IsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBSb3V0ZVRyYW5zaXRpb247XG5cdCAgfSkoKTtcblx0XG5cdCAgZnVuY3Rpb24gaXNQbGFpbk9qYmVjdCh2YWwpIHtcblx0ICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiB0b0FycmF5KHZhbCkge1xuXHQgICAgcmV0dXJuIHZhbCA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHZhbCkgOiBbXTtcblx0ICB9XG5cdFxuXHQgIHZhciBpbnRlcm5hbEtleXNSRSA9IC9eKGNvbXBvbmVudHxzdWJSb3V0ZXN8ZnVsbFBhdGgpJC87XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJvdXRlIENvbnRleHQgT2JqZWN0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAqIEBwYXJhbSB7Um91dGVyfSByb3V0ZXJcblx0ICAgKi9cblx0XG5cdCAgdmFyIFJvdXRlID0gZnVuY3Rpb24gUm91dGUocGF0aCwgcm91dGVyKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZSk7XG5cdFxuXHQgICAgdmFyIG1hdGNoZWQgPSByb3V0ZXIuX3JlY29nbml6ZXIucmVjb2duaXplKHBhdGgpO1xuXHQgICAgaWYgKG1hdGNoZWQpIHtcblx0ICAgICAgLy8gY29weSBhbGwgY3VzdG9tIGZpZWxkcyBmcm9tIHJvdXRlIGNvbmZpZ3Ncblx0ICAgICAgW10uZm9yRWFjaC5jYWxsKG1hdGNoZWQsIGZ1bmN0aW9uIChtYXRjaCkge1xuXHQgICAgICAgIGZvciAodmFyIGtleSBpbiBtYXRjaC5oYW5kbGVyKSB7XG5cdCAgICAgICAgICBpZiAoIWludGVybmFsS2V5c1JFLnRlc3Qoa2V5KSkge1xuXHQgICAgICAgICAgICBfdGhpc1trZXldID0gbWF0Y2guaGFuZGxlcltrZXldO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIHNldCBxdWVyeSBhbmQgcGFyYW1zXG5cdCAgICAgIHRoaXMucXVlcnkgPSBtYXRjaGVkLnF1ZXJ5UGFyYW1zO1xuXHQgICAgICB0aGlzLnBhcmFtcyA9IFtdLnJlZHVjZS5jYWxsKG1hdGNoZWQsIGZ1bmN0aW9uIChwcmV2LCBjdXIpIHtcblx0ICAgICAgICBpZiAoY3VyLnBhcmFtcykge1xuXHQgICAgICAgICAgZm9yICh2YXIga2V5IGluIGN1ci5wYXJhbXMpIHtcblx0ICAgICAgICAgICAgcHJldltrZXldID0gY3VyLnBhcmFtc1trZXldO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gcHJldjtcblx0ICAgICAgfSwge30pO1xuXHQgICAgfVxuXHQgICAgLy8gZXhwb3NlIHBhdGggYW5kIHJvdXRlclxuXHQgICAgdGhpcy5wYXRoID0gcGF0aDtcblx0ICAgIC8vIGZvciBpbnRlcm5hbCB1c2Vcblx0ICAgIHRoaXMubWF0Y2hlZCA9IG1hdGNoZWQgfHwgcm91dGVyLl9ub3RGb3VuZEhhbmRsZXI7XG5cdCAgICAvLyBpbnRlcm5hbCByZWZlcmVuY2UgdG8gcm91dGVyXG5cdCAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3JvdXRlcicsIHtcblx0ICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG5cdCAgICAgIHZhbHVlOiByb3V0ZXJcblx0ICAgIH0pO1xuXHQgICAgLy8gSW1wb3J0YW50OiBmcmVlemUgc2VsZiB0byBwcmV2ZW50IG9ic2VydmF0aW9uXG5cdCAgICBPYmplY3QuZnJlZXplKHRoaXMpO1xuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIGFwcGx5T3ZlcnJpZGUgKFZ1ZSkge1xuXHQgICAgdmFyIF9WdWUkdXRpbCA9IFZ1ZS51dGlsO1xuXHQgICAgdmFyIGV4dGVuZCA9IF9WdWUkdXRpbC5leHRlbmQ7XG5cdCAgICB2YXIgaXNBcnJheSA9IF9WdWUkdXRpbC5pc0FycmF5O1xuXHQgICAgdmFyIGRlZmluZVJlYWN0aXZlID0gX1Z1ZSR1dGlsLmRlZmluZVJlYWN0aXZlO1xuXHRcblx0ICAgIC8vIG92ZXJyaWRlIFZ1ZSdzIGluaXQgYW5kIGRlc3Ryb3kgcHJvY2VzcyB0byBrZWVwIHRyYWNrIG9mIHJvdXRlciBpbnN0YW5jZXNcblx0ICAgIHZhciBpbml0ID0gVnVlLnByb3RvdHlwZS5faW5pdDtcblx0ICAgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXHQgICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0ICAgICAgdmFyIHJvb3QgPSBvcHRpb25zLl9wYXJlbnQgfHwgb3B0aW9ucy5wYXJlbnQgfHwgdGhpcztcblx0ICAgICAgdmFyIHJvdXRlciA9IHJvb3QuJHJvdXRlcjtcblx0ICAgICAgdmFyIHJvdXRlID0gcm9vdC4kcm91dGU7XG5cdCAgICAgIGlmIChyb3V0ZXIpIHtcblx0ICAgICAgICAvLyBleHBvc2Ugcm91dGVyXG5cdCAgICAgICAgdGhpcy4kcm91dGVyID0gcm91dGVyO1xuXHQgICAgICAgIHJvdXRlci5fY2hpbGRyZW4ucHVzaCh0aGlzKTtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAodGhpcy5fZGVmaW5lTWV0YSkge1xuXHQgICAgICAgICAgLy8gMC4xMlxuXHQgICAgICAgICAgdGhpcy5fZGVmaW5lTWV0YSgnJHJvdXRlJywgcm91dGUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyAxLjBcblx0ICAgICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsICckcm91dGUnLCByb3V0ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGluaXQuY2FsbCh0aGlzLCBvcHRpb25zKTtcblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIGRlc3Ryb3kgPSBWdWUucHJvdG90eXBlLl9kZXN0cm95O1xuXHQgICAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKCF0aGlzLl9pc0JlaW5nRGVzdHJveWVkICYmIHRoaXMuJHJvdXRlcikge1xuXHQgICAgICAgIHRoaXMuJHJvdXRlci5fY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgICBkZXN0cm95LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIDEuMCBvbmx5OiBlbmFibGUgcm91dGUgbWl4aW5zXG5cdCAgICB2YXIgc3RyYXRzID0gVnVlLmNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7XG5cdCAgICB2YXIgaG9va3NUb01lcmdlUkUgPSAvXihkYXRhfGFjdGl2YXRlfGRlYWN0aXZhdGUpJC87XG5cdFxuXHQgICAgaWYgKHN0cmF0cykge1xuXHQgICAgICBzdHJhdHMucm91dGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgICAgICAgIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgICAgICAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcblx0ICAgICAgICB2YXIgcmV0ID0ge307XG5cdCAgICAgICAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcblx0ICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcblx0ICAgICAgICAgIHZhciBhID0gcmV0W2tleV07XG5cdCAgICAgICAgICB2YXIgYiA9IGNoaWxkVmFsW2tleV07XG5cdCAgICAgICAgICAvLyBmb3IgZGF0YSwgYWN0aXZhdGUgYW5kIGRlYWN0aXZhdGUsIHdlIG5lZWQgdG8gbWVyZ2UgdGhlbSBpbnRvXG5cdCAgICAgICAgICAvLyBhcnJheXMgc2ltaWxhciB0byBsaWZlY3ljbGUgaG9va3MuXG5cdCAgICAgICAgICBpZiAoYSAmJiBob29rc1RvTWVyZ2VSRS50ZXN0KGtleSkpIHtcblx0ICAgICAgICAgICAgcmV0W2tleV0gPSAoaXNBcnJheShhKSA/IGEgOiBbYV0pLmNvbmNhdChiKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHJldFtrZXldID0gYjtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcmV0dXJuIHJldDtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIFZpZXcgKFZ1ZSkge1xuXHRcblx0ICAgIHZhciBfID0gVnVlLnV0aWw7XG5cdCAgICB2YXIgY29tcG9uZW50RGVmID1cblx0ICAgIC8vIDAuMTJcblx0ICAgIFZ1ZS5kaXJlY3RpdmUoJ19jb21wb25lbnQnKSB8fFxuXHQgICAgLy8gMS4wXG5cdCAgICBWdWUuaW50ZXJuYWxEaXJlY3RpdmVzLmNvbXBvbmVudDtcblx0ICAgIC8vIDxyb3V0ZXItdmlldz4gZXh0ZW5kcyB0aGUgaW50ZXJuYWwgY29tcG9uZW50IGRpcmVjdGl2ZVxuXHQgICAgdmFyIHZpZXdEZWYgPSBfLmV4dGVuZCh7fSwgY29tcG9uZW50RGVmKTtcblx0XG5cdCAgICAvLyB3aXRoIHNvbWUgb3ZlcnJpZGVzXG5cdCAgICBfLmV4dGVuZCh2aWV3RGVmLCB7XG5cdFxuXHQgICAgICBfaXNSb3V0ZXJWaWV3OiB0cnVlLFxuXHRcblx0ICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgICAgICB2YXIgcm91dGUgPSB0aGlzLnZtLiRyb3V0ZTtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAoIXJvdXRlKSB7XG5cdCAgICAgICAgICB3YXJuJDEoJzxyb3V0ZXItdmlldz4gY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgYSAnICsgJ3JvdXRlci1lbmFibGVkIGFwcC4nKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gZm9yY2UgZHluYW1pYyBkaXJlY3RpdmUgc28gdi1jb21wb25lbnQgZG9lc24ndFxuXHQgICAgICAgIC8vIGF0dGVtcHQgdG8gYnVpbGQgcmlnaHQgbm93XG5cdCAgICAgICAgdGhpcy5faXNEeW5hbWljTGl0ZXJhbCA9IHRydWU7XG5cdCAgICAgICAgLy8gZmluYWxseSwgaW5pdCBieSBkZWxlZ2F0aW5nIHRvIHYtY29tcG9uZW50XG5cdCAgICAgICAgY29tcG9uZW50RGVmLmJpbmQuY2FsbCh0aGlzKTtcblx0XG5cdCAgICAgICAgLy8gbG9jYXRlIHRoZSBwYXJlbnQgdmlld1xuXHQgICAgICAgIHZhciBwYXJlbnRWaWV3ID0gdW5kZWZpbmVkO1xuXHQgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnZtO1xuXHQgICAgICAgIHdoaWxlIChwYXJlbnQpIHtcblx0ICAgICAgICAgIGlmIChwYXJlbnQuX3JvdXRlclZpZXcpIHtcblx0ICAgICAgICAgICAgcGFyZW50VmlldyA9IHBhcmVudC5fcm91dGVyVmlldztcblx0ICAgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHBhcmVudFZpZXcpIHtcblx0ICAgICAgICAgIC8vIHJlZ2lzdGVyIHNlbGYgYXMgYSBjaGlsZCBvZiB0aGUgcGFyZW50IHZpZXcsXG5cdCAgICAgICAgICAvLyBpbnN0ZWFkIG9mIGFjdGl2YXRpbmcgbm93LiBUaGlzIGlzIHNvIHRoYXQgdGhlXG5cdCAgICAgICAgICAvLyBjaGlsZCdzIGFjdGl2YXRlIGhvb2sgaXMgY2FsbGVkIGFmdGVyIHRoZVxuXHQgICAgICAgICAgLy8gcGFyZW50J3MgaGFzIHJlc29sdmVkLlxuXHQgICAgICAgICAgdGhpcy5wYXJlbnRWaWV3ID0gcGFyZW50Vmlldztcblx0ICAgICAgICAgIHBhcmVudFZpZXcuY2hpbGRWaWV3ID0gdGhpcztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gdGhpcyBpcyB0aGUgcm9vdCB2aWV3IVxuXHQgICAgICAgICAgdmFyIHJvdXRlciA9IHJvdXRlLnJvdXRlcjtcblx0ICAgICAgICAgIHJvdXRlci5fcm9vdFZpZXcgPSB0aGlzO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gaGFuZGxlIGxhdGUtcmVuZGVyZWQgdmlld1xuXHQgICAgICAgIC8vIHR3byBwb3NzaWJpbGl0aWVzOlxuXHQgICAgICAgIC8vIDEuIHJvb3QgdmlldyByZW5kZXJlZCBhZnRlciB0cmFuc2l0aW9uIGhhcyBiZWVuXG5cdCAgICAgICAgLy8gICAgdmFsaWRhdGVkO1xuXHQgICAgICAgIC8vIDIuIGNoaWxkIHZpZXcgcmVuZGVyZWQgYWZ0ZXIgcGFyZW50IHZpZXcgaGFzIGJlZW5cblx0ICAgICAgICAvLyAgICBhY3RpdmF0ZWQuXG5cdCAgICAgICAgdmFyIHRyYW5zaXRpb24gPSByb3V0ZS5yb3V0ZXIuX2N1cnJlbnRUcmFuc2l0aW9uO1xuXHQgICAgICAgIGlmICghcGFyZW50VmlldyAmJiB0cmFuc2l0aW9uLmRvbmUgfHwgcGFyZW50VmlldyAmJiBwYXJlbnRWaWV3LmFjdGl2YXRlZCkge1xuXHQgICAgICAgICAgdmFyIGRlcHRoID0gcGFyZW50VmlldyA/IHBhcmVudFZpZXcuZGVwdGggKyAxIDogMDtcblx0ICAgICAgICAgIGFjdGl2YXRlKHRoaXMsIHRyYW5zaXRpb24sIGRlcHRoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgICAgICBpZiAodGhpcy5wYXJlbnRWaWV3KSB7XG5cdCAgICAgICAgICB0aGlzLnBhcmVudFZpZXcuY2hpbGRWaWV3ID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY29tcG9uZW50RGVmLnVuYmluZC5jYWxsKHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBWdWUuZWxlbWVudERpcmVjdGl2ZSgncm91dGVyLXZpZXcnLCB2aWV3RGVmKTtcblx0ICB9XG5cdFxuXHQgIHZhciB0cmFpbGluZ1NsYXNoUkUgPSAvXFwvJC87XG5cdCAgdmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuXHQgIHZhciBxdWVyeVN0cmluZ1JFID0gL1xcPy4qJC87XG5cdFxuXHQgIC8vIGluc3RhbGwgdi1saW5rLCB3aGljaCBwcm92aWRlcyBuYXZpZ2F0aW9uIHN1cHBvcnQgZm9yXG5cdCAgLy8gSFRNTDUgaGlzdG9yeSBtb2RlXG5cdCAgZnVuY3Rpb24gTGluayAoVnVlKSB7XG5cdCAgICB2YXIgX1Z1ZSR1dGlsID0gVnVlLnV0aWw7XG5cdCAgICB2YXIgX2JpbmQgPSBfVnVlJHV0aWwuYmluZDtcblx0ICAgIHZhciBpc09iamVjdCA9IF9WdWUkdXRpbC5pc09iamVjdDtcblx0ICAgIHZhciBhZGRDbGFzcyA9IF9WdWUkdXRpbC5hZGRDbGFzcztcblx0ICAgIHZhciByZW1vdmVDbGFzcyA9IF9WdWUkdXRpbC5yZW1vdmVDbGFzcztcblx0XG5cdCAgICB2YXIgb25Qcmlvcml0eSA9IFZ1ZS5kaXJlY3RpdmUoJ29uJykucHJpb3JpdHk7XG5cdCAgICB2YXIgTElOS19VUERBVEUgPSAnX192dWUtcm91dGVyLWxpbmstdXBkYXRlX18nO1xuXHRcblx0ICAgIHZhciBhY3RpdmVJZCA9IDA7XG5cdFxuXHQgICAgVnVlLmRpcmVjdGl2ZSgnbGluay1hY3RpdmUnLCB7XG5cdCAgICAgIHByaW9yaXR5OiA5OTk5LFxuXHQgICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciBpZCA9IFN0cmluZyhhY3RpdmVJZCsrKTtcblx0ICAgICAgICAvLyBjb2xsZWN0IHYtbGlua3MgY29udGFpbmVkIHdpdGhpbiB0aGlzIGVsZW1lbnQuXG5cdCAgICAgICAgLy8gd2UgbmVlZCBkbyB0aGlzIGhlcmUgYmVmb3JlIHRoZSBwYXJlbnQtY2hpbGQgcmVsYXRpb25zaGlwXG5cdCAgICAgICAgLy8gZ2V0cyBtZXNzZWQgdXAgYnkgdGVybWluYWwgZGlyZWN0aXZlcyAoaWYsIGZvciwgY29tcG9uZW50cylcblx0ICAgICAgICB2YXIgY2hpbGRMaW5rcyA9IHRoaXMuZWwucXVlcnlTZWxlY3RvckFsbCgnW3YtbGlua10nKTtcblx0ICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkTGlua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgICB2YXIgbGluayA9IGNoaWxkTGlua3NbaV07XG5cdCAgICAgICAgICB2YXIgZXhpc3RpbmdJZCA9IGxpbmsuZ2V0QXR0cmlidXRlKExJTktfVVBEQVRFKTtcblx0ICAgICAgICAgIHZhciB2YWx1ZSA9IGV4aXN0aW5nSWQgPyBleGlzdGluZ0lkICsgJywnICsgaWQgOiBpZDtcblx0ICAgICAgICAgIC8vIGxlYXZlIGEgbWFyayBvbiB0aGUgbGluayBlbGVtZW50IHdoaWNoIGNhbiBiZSBwZXJzaXN0ZWRcblx0ICAgICAgICAgIC8vIHRocm91Z2ggZnJhZ21lbnQgY2xvbmVzLlxuXHQgICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoTElOS19VUERBVEUsIHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy52bS4kb24oTElOS19VUERBVEUsIHRoaXMuY2IgPSBmdW5jdGlvbiAobGluaywgcGF0aCkge1xuXHQgICAgICAgICAgaWYgKGxpbmsuYWN0aXZlSWRzLmluZGV4T2YoaWQpID4gLTEpIHtcblx0ICAgICAgICAgICAgbGluay51cGRhdGVDbGFzc2VzKHBhdGgsIF90aGlzLmVsKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfSxcblx0ICAgICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICAgICAgdGhpcy52bS4kb2ZmKExJTktfVVBEQVRFLCB0aGlzLmNiKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgVnVlLmRpcmVjdGl2ZSgnbGluaycsIHtcblx0ICAgICAgcHJpb3JpdHk6IG9uUHJpb3JpdHkgLSAyLFxuXHRcblx0ICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgICAgICB2YXIgdm0gPSB0aGlzLnZtO1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmICghdm0uJHJvdXRlKSB7XG5cdCAgICAgICAgICB3YXJuJDEoJ3YtbGluayBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBhIHJvdXRlci1lbmFibGVkIGFwcC4nKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5yb3V0ZXIgPSB2bS4kcm91dGUucm91dGVyO1xuXHQgICAgICAgIC8vIHVwZGF0ZSB0aGluZ3Mgd2hlbiB0aGUgcm91dGUgY2hhbmdlc1xuXHQgICAgICAgIHRoaXMudW53YXRjaCA9IHZtLiR3YXRjaCgnJHJvdXRlJywgX2JpbmQodGhpcy5vblJvdXRlVXBkYXRlLCB0aGlzKSk7XG5cdCAgICAgICAgLy8gY2hlY2sgdi1saW5rLWFjdGl2ZSBpZHNcblx0ICAgICAgICB2YXIgYWN0aXZlSWRzID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuXHQgICAgICAgIGlmIChhY3RpdmVJZHMpIHtcblx0ICAgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKExJTktfVVBEQVRFKTtcblx0ICAgICAgICAgIHRoaXMuYWN0aXZlSWRzID0gYWN0aXZlSWRzLnNwbGl0KCcsJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIG5vIG5lZWQgdG8gaGFuZGxlIGNsaWNrIGlmIGxpbmsgZXhwZWN0cyB0byBiZSBvcGVuZWRcblx0ICAgICAgICAvLyBpbiBhIG5ldyB3aW5kb3cvdGFiLlxuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgPT09ICdBJyAmJiB0aGlzLmVsLmdldEF0dHJpYnV0ZSgndGFyZ2V0JykgPT09ICdfYmxhbmsnKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIGhhbmRsZSBjbGlja1xuXHQgICAgICAgIHRoaXMuaGFuZGxlciA9IF9iaW5kKHRoaXMub25DbGljaywgdGhpcyk7XG5cdCAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlcik7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh0YXJnZXQpIHtcblx0ICAgICAgICB0aGlzLnRhcmdldCA9IHRhcmdldDtcblx0ICAgICAgICBpZiAoaXNPYmplY3QodGFyZ2V0KSkge1xuXHQgICAgICAgICAgdGhpcy5hcHBlbmQgPSB0YXJnZXQuYXBwZW5kO1xuXHQgICAgICAgICAgdGhpcy5leGFjdCA9IHRhcmdldC5leGFjdDtcblx0ICAgICAgICAgIHRoaXMucHJldkFjdGl2ZUNsYXNzID0gdGhpcy5hY3RpdmVDbGFzcztcblx0ICAgICAgICAgIHRoaXMuYWN0aXZlQ2xhc3MgPSB0YXJnZXQuYWN0aXZlQ2xhc3M7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMub25Sb3V0ZVVwZGF0ZSh0aGlzLnZtLiRyb3V0ZSk7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcblx0ICAgICAgICAvLyBkb24ndCByZWRpcmVjdCB3aXRoIGNvbnRyb2wga2V5c1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkpIHJldHVybjtcblx0ICAgICAgICAvLyBkb24ndCByZWRpcmVjdCB3aGVuIHByZXZlbnREZWZhdWx0IGNhbGxlZFxuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcblx0ICAgICAgICAvLyBkb24ndCByZWRpcmVjdCBvbiByaWdodCBjbGlja1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuXHRcblx0ICAgICAgICB2YXIgdGFyZ2V0ID0gdGhpcy50YXJnZXQ7XG5cdCAgICAgICAgaWYgKHRhcmdldCkge1xuXHQgICAgICAgICAgLy8gdi1saW5rIHdpdGggZXhwcmVzc2lvbiwganVzdCBnb1xuXHQgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgICAgdGhpcy5yb3V0ZXIuZ28odGFyZ2V0KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gbm8gZXhwcmVzc2lvbiwgZGVsZWdhdGUgZm9yIGFuIDxhPiBpbnNpZGVcblx0ICAgICAgICAgIHZhciBlbCA9IGUudGFyZ2V0O1xuXHQgICAgICAgICAgd2hpbGUgKGVsLnRhZ05hbWUgIT09ICdBJyAmJiBlbCAhPT0gdGhpcy5lbCkge1xuXHQgICAgICAgICAgICBlbCA9IGVsLnBhcmVudE5vZGU7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBpZiAoZWwudGFnTmFtZSA9PT0gJ0EnICYmIHNhbWVPcmlnaW4oZWwpKSB7XG5cdCAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgICAgICAgICAgdmFyIHBhdGggPSBlbC5wYXRobmFtZTtcblx0ICAgICAgICAgICAgaWYgKHRoaXMucm91dGVyLmhpc3Rvcnkucm9vdCkge1xuXHQgICAgICAgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UodGhpcy5yb3V0ZXIuaGlzdG9yeS5yb290UkUsICcnKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB0aGlzLnJvdXRlci5nbyh7XG5cdCAgICAgICAgICAgICAgcGF0aDogcGF0aCxcblx0ICAgICAgICAgICAgICByZXBsYWNlOiB0YXJnZXQgJiYgdGFyZ2V0LnJlcGxhY2UsXG5cdCAgICAgICAgICAgICAgYXBwZW5kOiB0YXJnZXQgJiYgdGFyZ2V0LmFwcGVuZFxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICBvblJvdXRlVXBkYXRlOiBmdW5jdGlvbiBvblJvdXRlVXBkYXRlKHJvdXRlKSB7XG5cdCAgICAgICAgLy8gcm91dGVyLnN0cmluZ2lmeVBhdGggaXMgZGVwZW5kZW50IG9uIGN1cnJlbnQgcm91dGVcblx0ICAgICAgICAvLyBhbmQgbmVlZHMgdG8gYmUgY2FsbGVkIGFnYWluIHdoZW52ZXIgcm91dGUgY2hhbmdlcy5cblx0ICAgICAgICB2YXIgbmV3UGF0aCA9IHRoaXMucm91dGVyLnN0cmluZ2lmeVBhdGgodGhpcy50YXJnZXQpO1xuXHQgICAgICAgIGlmICh0aGlzLnBhdGggIT09IG5ld1BhdGgpIHtcblx0ICAgICAgICAgIHRoaXMucGF0aCA9IG5ld1BhdGg7XG5cdCAgICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZU1hdGNoKCk7XG5cdCAgICAgICAgICB0aGlzLnVwZGF0ZUhyZWYoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHRoaXMuYWN0aXZlSWRzKSB7XG5cdCAgICAgICAgICB0aGlzLnZtLiRlbWl0KExJTktfVVBEQVRFLCB0aGlzLCByb3V0ZS5wYXRoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy51cGRhdGVDbGFzc2VzKHJvdXRlLnBhdGgsIHRoaXMuZWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHVwZGF0ZUFjdGl2ZU1hdGNoOiBmdW5jdGlvbiB1cGRhdGVBY3RpdmVNYXRjaCgpIHtcblx0ICAgICAgICB0aGlzLmFjdGl2ZVJFID0gdGhpcy5wYXRoICYmICF0aGlzLmV4YWN0ID8gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLnBhdGgucmVwbGFjZSgvXFwvJC8sICcnKS5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKS5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKSArICcoXFxcXC98JCknKSA6IG51bGw7XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB1cGRhdGVIcmVmOiBmdW5jdGlvbiB1cGRhdGVIcmVmKCkge1xuXHQgICAgICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgIT09ICdBJykge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcGF0aCA9IHRoaXMucGF0aDtcblx0ICAgICAgICB2YXIgcm91dGVyID0gdGhpcy5yb3V0ZXI7XG5cdCAgICAgICAgdmFyIGlzQWJzb2x1dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuXHQgICAgICAgIC8vIGRvIG5vdCBmb3JtYXQgbm9uLWhhc2ggcmVsYXRpdmUgcGF0aHNcblx0ICAgICAgICB2YXIgaHJlZiA9IHBhdGggJiYgKHJvdXRlci5tb2RlID09PSAnaGFzaCcgfHwgaXNBYnNvbHV0ZSkgPyByb3V0ZXIuaGlzdG9yeS5mb3JtYXRQYXRoKHBhdGgsIHRoaXMuYXBwZW5kKSA6IHBhdGg7XG5cdCAgICAgICAgaWYgKGhyZWYpIHtcblx0ICAgICAgICAgIHRoaXMuZWwuaHJlZiA9IGhyZWY7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHRcblx0ICAgICAgdXBkYXRlQ2xhc3NlczogZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhwYXRoLCBlbCkge1xuXHQgICAgICAgIHZhciBhY3RpdmVDbGFzcyA9IHRoaXMuYWN0aXZlQ2xhc3MgfHwgdGhpcy5yb3V0ZXIuX2xpbmtBY3RpdmVDbGFzcztcblx0ICAgICAgICAvLyBjbGVhciBvbGQgY2xhc3Ncblx0ICAgICAgICBpZiAodGhpcy5wcmV2QWN0aXZlQ2xhc3MgJiYgdGhpcy5wcmV2QWN0aXZlQ2xhc3MgIT09IGFjdGl2ZUNsYXNzKSB7XG5cdCAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCB0aGlzLnByZXZBY3RpdmVDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyByZW1vdmUgcXVlcnkgc3RyaW5nIGJlZm9yZSBtYXRjaGluZ1xuXHQgICAgICAgIHZhciBkZXN0ID0gdGhpcy5wYXRoLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpO1xuXHQgICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpO1xuXHQgICAgICAgIC8vIGFkZCBuZXcgY2xhc3Ncblx0ICAgICAgICBpZiAodGhpcy5leGFjdCkge1xuXHQgICAgICAgICAgaWYgKGRlc3QgPT09IHBhdGggfHxcblx0ICAgICAgICAgIC8vIGFsc28gYWxsb3cgYWRkaXRpb25hbCB0cmFpbGluZyBzbGFzaFxuXHQgICAgICAgICAgZGVzdC5jaGFyQXQoZGVzdC5sZW5ndGggLSAxKSAhPT0gJy8nICYmIGRlc3QgPT09IHBhdGgucmVwbGFjZSh0cmFpbGluZ1NsYXNoUkUsICcnKSkge1xuXHQgICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgYWRkQ2xhc3MpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlUkUgJiYgdGhpcy5hY3RpdmVSRS50ZXN0KHBhdGgpKSB7XG5cdCAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCBhZGRDbGFzcyk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZXIpO1xuXHQgICAgICAgIHRoaXMudW53YXRjaCAmJiB0aGlzLnVud2F0Y2goKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdFxuXHQgICAgZnVuY3Rpb24gc2FtZU9yaWdpbihsaW5rKSB7XG5cdCAgICAgIHJldHVybiBsaW5rLnByb3RvY29sID09PSBsb2NhdGlvbi5wcm90b2NvbCAmJiBsaW5rLmhvc3RuYW1lID09PSBsb2NhdGlvbi5ob3N0bmFtZSAmJiBsaW5rLnBvcnQgPT09IGxvY2F0aW9uLnBvcnQ7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gdGhpcyBmdW5jdGlvbiBpcyBjb3BpZWQgZnJvbSB2LWJpbmQ6Y2xhc3MgaW1wbGVtZW50YXRpb24gdW50aWxcblx0ICAgIC8vIHdlIHByb3Blcmx5IGV4cG9zZSBpdC4uLlxuXHQgICAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3NlcyhlbCwga2V5LCBmbikge1xuXHQgICAgICBrZXkgPSBrZXkudHJpbSgpO1xuXHQgICAgICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcblx0ICAgICAgICBmbihlbCwga2V5KTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGZuKGVsLCBrZXlzW2ldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGhpc3RvcnlCYWNrZW5kcyA9IHtcblx0ICAgIGFic3RyYWN0OiBBYnN0cmFjdEhpc3RvcnksXG5cdCAgICBoYXNoOiBIYXNoSGlzdG9yeSxcblx0ICAgIGh0bWw1OiBIVE1MNUhpc3Rvcnlcblx0ICB9O1xuXHRcblx0ICAvLyBsYXRlIGJpbmQgZHVyaW5nIGluc3RhbGxcblx0ICB2YXIgVnVlID0gdW5kZWZpbmVkO1xuXHRcblx0ICAvKipcblx0ICAgKiBSb3V0ZXIgY29uc3RydWN0b3Jcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgKi9cblx0XG5cdCAgdmFyIFJvdXRlciA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBSb3V0ZXIoKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuXHRcblx0ICAgICAgdmFyIF9yZWYkaGFzaGJhbmcgPSBfcmVmLmhhc2hiYW5nO1xuXHQgICAgICB2YXIgaGFzaGJhbmcgPSBfcmVmJGhhc2hiYW5nID09PSB1bmRlZmluZWQgPyB0cnVlIDogX3JlZiRoYXNoYmFuZztcblx0ICAgICAgdmFyIF9yZWYkYWJzdHJhY3QgPSBfcmVmLmFic3RyYWN0O1xuXHQgICAgICB2YXIgYWJzdHJhY3QgPSBfcmVmJGFic3RyYWN0ID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkYWJzdHJhY3Q7XG5cdCAgICAgIHZhciBfcmVmJGhpc3RvcnkgPSBfcmVmLmhpc3Rvcnk7XG5cdCAgICAgIHZhciBoaXN0b3J5ID0gX3JlZiRoaXN0b3J5ID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkaGlzdG9yeTtcblx0ICAgICAgdmFyIF9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uID0gX3JlZi5zYXZlU2Nyb2xsUG9zaXRpb247XG5cdCAgICAgIHZhciBzYXZlU2Nyb2xsUG9zaXRpb24gPSBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbjtcblx0ICAgICAgdmFyIF9yZWYkdHJhbnNpdGlvbk9uTG9hZCA9IF9yZWYudHJhbnNpdGlvbk9uTG9hZDtcblx0ICAgICAgdmFyIHRyYW5zaXRpb25PbkxvYWQgPSBfcmVmJHRyYW5zaXRpb25PbkxvYWQgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiR0cmFuc2l0aW9uT25Mb2FkO1xuXHQgICAgICB2YXIgX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9IF9yZWYuc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG5cdCAgICAgIHZhciBzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9IF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcblx0ICAgICAgdmFyIF9yZWYkcm9vdCA9IF9yZWYucm9vdDtcblx0ICAgICAgdmFyIHJvb3QgPSBfcmVmJHJvb3QgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBfcmVmJHJvb3Q7XG5cdCAgICAgIHZhciBfcmVmJGxpbmtBY3RpdmVDbGFzcyA9IF9yZWYubGlua0FjdGl2ZUNsYXNzO1xuXHQgICAgICB2YXIgbGlua0FjdGl2ZUNsYXNzID0gX3JlZiRsaW5rQWN0aXZlQ2xhc3MgPT09IHVuZGVmaW5lZCA/ICd2LWxpbmstYWN0aXZlJyA6IF9yZWYkbGlua0FjdGl2ZUNsYXNzO1xuXHQgICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGVyKTtcblx0XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoIVJvdXRlci5pbnN0YWxsZWQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBpbnN0YWxsIHRoZSBSb3V0ZXIgd2l0aCBWdWUudXNlKCkgYmVmb3JlICcgKyAnY3JlYXRpbmcgYW4gaW5zdGFuY2UuJyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIFZ1ZSBpbnN0YW5jZXNcblx0ICAgICAgdGhpcy5hcHAgPSBudWxsO1xuXHQgICAgICB0aGlzLl9jaGlsZHJlbiA9IFtdO1xuXHRcblx0ICAgICAgLy8gcm91dGUgcmVjb2duaXplclxuXHQgICAgICB0aGlzLl9yZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXplcigpO1xuXHQgICAgICB0aGlzLl9ndWFyZFJlY29nbml6ZXIgPSBuZXcgUm91dGVSZWNvZ25pemVyKCk7XG5cdFxuXHQgICAgICAvLyBzdGF0ZVxuXHQgICAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuX3N0YXJ0Q2IgPSBudWxsO1xuXHQgICAgICB0aGlzLl9jdXJyZW50Um91dGUgPSB7fTtcblx0ICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSBudWxsO1xuXHQgICAgICB0aGlzLl9wcmV2aW91c1RyYW5zaXRpb24gPSBudWxsO1xuXHQgICAgICB0aGlzLl9ub3RGb3VuZEhhbmRsZXIgPSBudWxsO1xuXHQgICAgICB0aGlzLl9ub3RGb3VuZFJlZGlyZWN0ID0gbnVsbDtcblx0ICAgICAgdGhpcy5fYmVmb3JlRWFjaEhvb2tzID0gW107XG5cdCAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzID0gW107XG5cdFxuXHQgICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gb24gaW5pdGlhbCByZW5kZXI/XG5cdCAgICAgIHRoaXMuX3JlbmRlcmVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuX3RyYW5zaXRpb25PbkxvYWQgPSB0cmFuc2l0aW9uT25Mb2FkO1xuXHRcblx0ICAgICAgLy8gaGlzdG9yeSBtb2RlXG5cdCAgICAgIHRoaXMuX3Jvb3QgPSByb290O1xuXHQgICAgICB0aGlzLl9hYnN0cmFjdCA9IGFic3RyYWN0O1xuXHQgICAgICB0aGlzLl9oYXNoYmFuZyA9IGhhc2hiYW5nO1xuXHRcblx0ICAgICAgLy8gY2hlY2sgaWYgSFRNTDUgaGlzdG9yeSBpcyBhdmFpbGFibGVcblx0ICAgICAgdmFyIGhhc1B1c2hTdGF0ZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZTtcblx0ICAgICAgdGhpcy5faGlzdG9yeSA9IGhpc3RvcnkgJiYgaGFzUHVzaFN0YXRlO1xuXHQgICAgICB0aGlzLl9oaXN0b3J5RmFsbGJhY2sgPSBoaXN0b3J5ICYmICFoYXNQdXNoU3RhdGU7XG5cdFxuXHQgICAgICAvLyBjcmVhdGUgaGlzdG9yeSBvYmplY3Rcblx0ICAgICAgdmFyIGluQnJvd3NlciA9IFZ1ZS51dGlsLmluQnJvd3Nlcjtcblx0ICAgICAgdGhpcy5tb2RlID0gIWluQnJvd3NlciB8fCB0aGlzLl9hYnN0cmFjdCA/ICdhYnN0cmFjdCcgOiB0aGlzLl9oaXN0b3J5ID8gJ2h0bWw1JyA6ICdoYXNoJztcblx0XG5cdCAgICAgIHZhciBIaXN0b3J5ID0gaGlzdG9yeUJhY2tlbmRzW3RoaXMubW9kZV07XG5cdCAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHtcblx0ICAgICAgICByb290OiByb290LFxuXHQgICAgICAgIGhhc2hiYW5nOiB0aGlzLl9oYXNoYmFuZyxcblx0ICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UocGF0aCwgc3RhdGUsIGFuY2hvcikge1xuXHQgICAgICAgICAgX3RoaXMuX21hdGNoKHBhdGgsIHN0YXRlLCBhbmNob3IpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdFxuXHQgICAgICAvLyBvdGhlciBvcHRpb25zXG5cdCAgICAgIHRoaXMuX3NhdmVTY3JvbGxQb3NpdGlvbiA9IHNhdmVTY3JvbGxQb3NpdGlvbjtcblx0ICAgICAgdGhpcy5fbGlua0FjdGl2ZUNsYXNzID0gbGlua0FjdGl2ZUNsYXNzO1xuXHQgICAgICB0aGlzLl9zdXBwcmVzcyA9IHN1cHByZXNzVHJhbnNpdGlvbkVycm9yO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWxsb3cgZGlyZWN0bHkgcGFzc2luZyBjb21wb25lbnRzIHRvIGEgcm91dGVcblx0ICAgICAqIGRlZmluaXRpb24uXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG5cdCAgICAgKi9cblx0XG5cdCAgICAvLyBBUEkgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgICAgLyoqXG5cdCAgICAqIFJlZ2lzdGVyIGEgbWFwIG9mIHRvcC1sZXZlbCBwYXRocy5cblx0ICAgICpcblx0ICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuXHQgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uIG1hcChfbWFwKSB7XG5cdCAgICAgIGZvciAodmFyIHJvdXRlIGluIF9tYXApIHtcblx0ICAgICAgICB0aGlzLm9uKHJvdXRlLCBfbWFwW3JvdXRlXSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmVnaXN0ZXIgYSBzaW5nbGUgcm9vdC1sZXZlbCBwYXRoXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHJvb3RQYXRoXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gY29tcG9uZW50XG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbc3ViUm91dGVzXVxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtmb3JjZVJlZnJlc2hdXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtiZWZvcmVdXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFthZnRlcl1cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihyb290UGF0aCwgaGFuZGxlcikge1xuXHQgICAgICBpZiAocm9vdFBhdGggPT09ICcqJykge1xuXHQgICAgICAgIHRoaXMuX25vdEZvdW5kKGhhbmRsZXIpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX2FkZFJvdXRlKHJvb3RQYXRoLCBoYW5kbGVyLCBbXSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IHJlZGlyZWN0cy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLnJlZGlyZWN0ID0gZnVuY3Rpb24gcmVkaXJlY3QobWFwKSB7XG5cdCAgICAgIGZvciAodmFyIHBhdGggaW4gbWFwKSB7XG5cdCAgICAgICAgdGhpcy5fYWRkUmVkaXJlY3QocGF0aCwgbWFwW3BhdGhdKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXQgYWxpYXNlcy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLmFsaWFzID0gZnVuY3Rpb24gYWxpYXMobWFwKSB7XG5cdCAgICAgIGZvciAodmFyIHBhdGggaW4gbWFwKSB7XG5cdCAgICAgICAgdGhpcy5fYWRkQWxpYXMocGF0aCwgbWFwW3BhdGhdKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXQgZ2xvYmFsIGJlZm9yZSBob29rLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLmJlZm9yZUVhY2ggPSBmdW5jdGlvbiBiZWZvcmVFYWNoKGZuKSB7XG5cdCAgICAgIHRoaXMuX2JlZm9yZUVhY2hIb29rcy5wdXNoKGZuKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IGdsb2JhbCBhZnRlciBob29rLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLmFmdGVyRWFjaCA9IGZ1bmN0aW9uIGFmdGVyRWFjaChmbikge1xuXHQgICAgICB0aGlzLl9hZnRlckVhY2hIb29rcy5wdXNoKGZuKTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogTmF2aWdhdGUgdG8gYSBnaXZlbiBwYXRoLlxuXHQgICAgICogVGhlIHBhdGggY2FuIGJlIGFuIG9iamVjdCBkZXNjcmliaW5nIGEgbmFtZWQgcGF0aCBpblxuXHQgICAgICogdGhlIGZvcm1hdCBvZiB7IG5hbWU6ICcuLi4nLCBwYXJhbXM6IHt9LCBxdWVyeToge319XG5cdCAgICAgKiBUaGUgcGF0aCBpcyBhc3N1bWVkIHRvIGJlIGFscmVhZHkgZGVjb2RlZCwgYW5kIHdpbGxcblx0ICAgICAqIGJlIHJlc29sdmVkIGFnYWluc3Qgcm9vdCAoaWYgcHJvdmlkZWQpXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBwYXRoXG5cdCAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtyZXBsYWNlXVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgpIHtcblx0ICAgICAgdmFyIHJlcGxhY2UgPSBmYWxzZTtcblx0ICAgICAgdmFyIGFwcGVuZCA9IGZhbHNlO1xuXHQgICAgICBpZiAoVnVlLnV0aWwuaXNPYmplY3QocGF0aCkpIHtcblx0ICAgICAgICByZXBsYWNlID0gcGF0aC5yZXBsYWNlO1xuXHQgICAgICAgIGFwcGVuZCA9IHBhdGguYXBwZW5kO1xuXHQgICAgICB9XG5cdCAgICAgIHBhdGggPSB0aGlzLnN0cmluZ2lmeVBhdGgocGF0aCk7XG5cdCAgICAgIGlmIChwYXRoKSB7XG5cdCAgICAgICAgdGhpcy5oaXN0b3J5LmdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTaG9ydCBoYW5kIGZvciByZXBsYWNpbmcgY3VycmVudCBwYXRoXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCkge1xuXHQgICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgcGF0aCA9IHsgcGF0aDogcGF0aCB9O1xuXHQgICAgICB9XG5cdCAgICAgIHBhdGgucmVwbGFjZSA9IHRydWU7XG5cdCAgICAgIHRoaXMuZ28ocGF0aCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU3RhcnQgdGhlIHJvdXRlci5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1Z1ZUNvbnN0cnVjdG9yfSBBcHBcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGNvbnRhaW5lclxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KEFwcCwgY29udGFpbmVyLCBjYikge1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHRoaXMuX3N0YXJ0ZWQpIHtcblx0ICAgICAgICB3YXJuJDEoJ2FscmVhZHkgc3RhcnRlZC4nKTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fc3RhcnRlZCA9IHRydWU7XG5cdCAgICAgIHRoaXMuX3N0YXJ0Q2IgPSBjYjtcblx0ICAgICAgaWYgKCF0aGlzLmFwcCkge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmICghQXBwIHx8ICFjb250YWluZXIpIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBzdGFydCB2dWUtcm91dGVyIHdpdGggYSBjb21wb25lbnQgYW5kIGEgJyArICdyb290IGNvbnRhaW5lci4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKEFwcCBpbnN0YW5jZW9mIFZ1ZSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHN0YXJ0IHZ1ZS1yb3V0ZXIgd2l0aCBhIGNvbXBvbmVudCwgbm90IGEgJyArICdWdWUgaW5zdGFuY2UuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMuX2FwcENvbnRhaW5lciA9IGNvbnRhaW5lcjtcblx0ICAgICAgICB2YXIgQ3RvciA9IHRoaXMuX2FwcENvbnN0cnVjdG9yID0gdHlwZW9mIEFwcCA9PT0gJ2Z1bmN0aW9uJyA/IEFwcCA6IFZ1ZS5leHRlbmQoQXBwKTtcblx0ICAgICAgICAvLyBnaXZlIGl0IGEgbmFtZSBmb3IgYmV0dGVyIGRlYnVnZ2luZ1xuXHQgICAgICAgIEN0b3Iub3B0aW9ucy5uYW1lID0gQ3Rvci5vcHRpb25zLm5hbWUgfHwgJ1JvdXRlckFwcCc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGhhbmRsZSBoaXN0b3J5IGZhbGxiYWNrIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90XG5cdCAgICAgIC8vIHN1cHBvcnQgSFRNTDUgaGlzdG9yeSBBUElcblx0ICAgICAgaWYgKHRoaXMuX2hpc3RvcnlGYWxsYmFjaykge1xuXHQgICAgICAgIHZhciBfbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG5cdCAgICAgICAgdmFyIF9oaXN0b3J5ID0gbmV3IEhUTUw1SGlzdG9yeSh7IHJvb3Q6IHRoaXMuX3Jvb3QgfSk7XG5cdCAgICAgICAgdmFyIHBhdGggPSBfaGlzdG9yeS5yb290ID8gX2xvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoX2hpc3Rvcnkucm9vdFJFLCAnJykgOiBfbG9jYXRpb24ucGF0aG5hbWU7XG5cdCAgICAgICAgaWYgKHBhdGggJiYgcGF0aCAhPT0gJy8nKSB7XG5cdCAgICAgICAgICBfbG9jYXRpb24uYXNzaWduKChfaGlzdG9yeS5yb290IHx8ICcnKSArICcvJyArIHRoaXMuaGlzdG9yeS5mb3JtYXRQYXRoKHBhdGgpICsgX2xvY2F0aW9uLnNlYXJjaCk7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLmhpc3Rvcnkuc3RhcnQoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTdG9wIGxpc3RlbmluZyB0byByb3V0ZSBjaGFuZ2VzLlxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcblx0ICAgICAgdGhpcy5oaXN0b3J5LnN0b3AoKTtcblx0ICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE5vcm1hbGl6ZSBuYW1lZCByb3V0ZSBvYmplY3QgLyBzdHJpbmcgcGF0aHMgaW50b1xuXHQgICAgICogYSBzdHJpbmcuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R8U3RyaW5nfE51bWJlcn0gcGF0aFxuXHQgICAgICogQHJldHVybiB7U3RyaW5nfVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5zdHJpbmdpZnlQYXRoID0gZnVuY3Rpb24gc3RyaW5naWZ5UGF0aChwYXRoKSB7XG5cdCAgICAgIHZhciBnZW5lcmF0ZWRQYXRoID0gJyc7XG5cdCAgICAgIGlmIChwYXRoICYmIHR5cGVvZiBwYXRoID09PSAnb2JqZWN0Jykge1xuXHQgICAgICAgIGlmIChwYXRoLm5hbWUpIHtcblx0ICAgICAgICAgIHZhciBleHRlbmQgPSBWdWUudXRpbC5leHRlbmQ7XG5cdCAgICAgICAgICB2YXIgY3VycmVudFBhcmFtcyA9IHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uICYmIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uLnRvLnBhcmFtcztcblx0ICAgICAgICAgIHZhciB0YXJnZXRQYXJhbXMgPSBwYXRoLnBhcmFtcyB8fCB7fTtcblx0ICAgICAgICAgIHZhciBwYXJhbXMgPSBjdXJyZW50UGFyYW1zID8gZXh0ZW5kKGV4dGVuZCh7fSwgY3VycmVudFBhcmFtcyksIHRhcmdldFBhcmFtcykgOiB0YXJnZXRQYXJhbXM7XG5cdCAgICAgICAgICBnZW5lcmF0ZWRQYXRoID0gZW5jb2RlVVJJKHRoaXMuX3JlY29nbml6ZXIuZ2VuZXJhdGUocGF0aC5uYW1lLCBwYXJhbXMpKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHBhdGgucGF0aCkge1xuXHQgICAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSShwYXRoLnBhdGgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocGF0aC5xdWVyeSkge1xuXHQgICAgICAgICAgLy8gbm90ZTogdGhlIGdlbmVyYXRlZCBxdWVyeSBzdHJpbmcgaXMgcHJlLVVSTC1lbmNvZGVkIGJ5IHRoZSByZWNvZ25pemVyXG5cdCAgICAgICAgICB2YXIgcXVlcnkgPSB0aGlzLl9yZWNvZ25pemVyLmdlbmVyYXRlUXVlcnlTdHJpbmcocGF0aC5xdWVyeSk7XG5cdCAgICAgICAgICBpZiAoZ2VuZXJhdGVkUGF0aC5pbmRleE9mKCc/JykgPiAtMSkge1xuXHQgICAgICAgICAgICBnZW5lcmF0ZWRQYXRoICs9ICcmJyArIHF1ZXJ5LnNsaWNlKDEpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgZ2VuZXJhdGVkUGF0aCArPSBxdWVyeTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSShwYXRoID8gcGF0aCArICcnIDogJycpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBnZW5lcmF0ZWRQYXRoO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBJbnRlcm5hbCBtZXRob2RzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cdFxuXHQgICAgLyoqXG5cdCAgICAqIEFkZCBhIHJvdXRlIGNvbnRhaW5pbmcgYSBsaXN0IG9mIHNlZ21lbnRzIHRvIHRoZSBpbnRlcm5hbFxuXHQgICAgKiByb3V0ZSByZWNvZ25pemVyLiBXaWxsIGJlIGNhbGxlZCByZWN1cnNpdmVseSB0byBhZGQgYWxsXG5cdCAgICAqIHBvc3NpYmxlIHN1Yi1yb3V0ZXMuXG5cdCAgICAqXG5cdCAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG5cdCAgICAqIEBwYXJhbSB7QXJyYXl9IHNlZ21lbnRzXG5cdCAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZFJvdXRlID0gZnVuY3Rpb24gX2FkZFJvdXRlKHBhdGgsIGhhbmRsZXIsIHNlZ21lbnRzKSB7XG5cdCAgICAgIGd1YXJkQ29tcG9uZW50KHBhdGgsIGhhbmRsZXIpO1xuXHQgICAgICBoYW5kbGVyLnBhdGggPSBwYXRoO1xuXHQgICAgICBoYW5kbGVyLmZ1bGxQYXRoID0gKHNlZ21lbnRzLnJlZHVjZShmdW5jdGlvbiAocGF0aCwgc2VnbWVudCkge1xuXHQgICAgICAgIHJldHVybiBwYXRoICsgc2VnbWVudC5wYXRoO1xuXHQgICAgICB9LCAnJykgKyBwYXRoKS5yZXBsYWNlKCcvLycsICcvJyk7XG5cdCAgICAgIHNlZ21lbnRzLnB1c2goe1xuXHQgICAgICAgIHBhdGg6IHBhdGgsXG5cdCAgICAgICAgaGFuZGxlcjogaGFuZGxlclxuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5fcmVjb2duaXplci5hZGQoc2VnbWVudHMsIHtcblx0ICAgICAgICBhczogaGFuZGxlci5uYW1lXG5cdCAgICAgIH0pO1xuXHQgICAgICAvLyBhZGQgc3ViIHJvdXRlc1xuXHQgICAgICBpZiAoaGFuZGxlci5zdWJSb3V0ZXMpIHtcblx0ICAgICAgICBmb3IgKHZhciBzdWJQYXRoIGluIGhhbmRsZXIuc3ViUm91dGVzKSB7XG5cdCAgICAgICAgICAvLyByZWN1cnNpdmVseSB3YWxrIGFsbCBzdWIgcm91dGVzXG5cdCAgICAgICAgICB0aGlzLl9hZGRSb3V0ZShzdWJQYXRoLCBoYW5kbGVyLnN1YlJvdXRlc1tzdWJQYXRoXSxcblx0ICAgICAgICAgIC8vIHBhc3MgYSBjb3B5IGluIHJlY3Vyc2lvbiB0byBhdm9pZCBtdXRhdGluZ1xuXHQgICAgICAgICAgLy8gYWNyb3NzIGJyYW5jaGVzXG5cdCAgICAgICAgICBzZWdtZW50cy5zbGljZSgpKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXQgdGhlIG5vdEZvdW5kIHJvdXRlIGhhbmRsZXIuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX25vdEZvdW5kID0gZnVuY3Rpb24gX25vdEZvdW5kKGhhbmRsZXIpIHtcblx0ICAgICAgZ3VhcmRDb21wb25lbnQoJyonLCBoYW5kbGVyKTtcblx0ICAgICAgdGhpcy5fbm90Rm91bmRIYW5kbGVyID0gW3sgaGFuZGxlcjogaGFuZGxlciB9XTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBZGQgYSByZWRpcmVjdCByZWNvcmQuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZWRpcmVjdFBhdGhcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZFJlZGlyZWN0ID0gZnVuY3Rpb24gX2FkZFJlZGlyZWN0KHBhdGgsIHJlZGlyZWN0UGF0aCkge1xuXHQgICAgICBpZiAocGF0aCA9PT0gJyonKSB7XG5cdCAgICAgICAgdGhpcy5fbm90Rm91bmRSZWRpcmVjdCA9IHJlZGlyZWN0UGF0aDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLl9hZGRHdWFyZChwYXRoLCByZWRpcmVjdFBhdGgsIHRoaXMucmVwbGFjZSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBZGQgYW4gYWxpYXMgcmVjb3JkLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNQYXRoXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRBbGlhcyA9IGZ1bmN0aW9uIF9hZGRBbGlhcyhwYXRoLCBhbGlhc1BhdGgpIHtcblx0ICAgICAgdGhpcy5fYWRkR3VhcmQocGF0aCwgYWxpYXNQYXRoLCB0aGlzLl9tYXRjaCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQWRkIGEgcGF0aCBndWFyZC5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IG1hcHBlZFBhdGhcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZEd1YXJkID0gZnVuY3Rpb24gX2FkZEd1YXJkKHBhdGgsIG1hcHBlZFBhdGgsIF9oYW5kbGVyKSB7XG5cdCAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgdGhpcy5fZ3VhcmRSZWNvZ25pemVyLmFkZChbe1xuXHQgICAgICAgIHBhdGg6IHBhdGgsXG5cdCAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihtYXRjaCwgcXVlcnkpIHtcblx0ICAgICAgICAgIHZhciByZWFsUGF0aCA9IG1hcFBhcmFtcyhtYXBwZWRQYXRoLCBtYXRjaC5wYXJhbXMsIHF1ZXJ5KTtcblx0ICAgICAgICAgIF9oYW5kbGVyLmNhbGwoX3RoaXMyLCByZWFsUGF0aCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQ2hlY2sgaWYgYSBwYXRoIG1hdGNoZXMgYW55IHJlZGlyZWN0IHJlY29yZHMuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqIEByZXR1cm4ge0Jvb2xlYW59IC0gaWYgdHJ1ZSwgd2lsbCBza2lwIG5vcm1hbCBtYXRjaC5cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2NoZWNrR3VhcmQgPSBmdW5jdGlvbiBfY2hlY2tHdWFyZChwYXRoKSB7XG5cdCAgICAgIHZhciBtYXRjaGVkID0gdGhpcy5fZ3VhcmRSZWNvZ25pemVyLnJlY29nbml6ZShwYXRoLCB0cnVlKTtcblx0ICAgICAgaWYgKG1hdGNoZWQpIHtcblx0ICAgICAgICBtYXRjaGVkWzBdLmhhbmRsZXIobWF0Y2hlZFswXSwgbWF0Y2hlZC5xdWVyeVBhcmFtcyk7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH0gZWxzZSBpZiAodGhpcy5fbm90Rm91bmRSZWRpcmVjdCkge1xuXHQgICAgICAgIG1hdGNoZWQgPSB0aGlzLl9yZWNvZ25pemVyLnJlY29nbml6ZShwYXRoKTtcblx0ICAgICAgICBpZiAoIW1hdGNoZWQpIHtcblx0ICAgICAgICAgIHRoaXMucmVwbGFjZSh0aGlzLl9ub3RGb3VuZFJlZGlyZWN0KTtcblx0ICAgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIE1hdGNoIGEgVVJMIHBhdGggYW5kIHNldCB0aGUgcm91dGUgY29udGV4dCBvbiB2bSxcblx0ICAgICAqIHRyaWdnZXJpbmcgdmlldyB1cGRhdGVzLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YXRlXVxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IFthbmNob3JdXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLl9tYXRjaCA9IGZ1bmN0aW9uIF9tYXRjaChwYXRoLCBzdGF0ZSwgYW5jaG9yKSB7XG5cdCAgICAgIHZhciBfdGhpczMgPSB0aGlzO1xuXHRcblx0ICAgICAgaWYgKHRoaXMuX2NoZWNrR3VhcmQocGF0aCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHZhciBjdXJyZW50Um91dGUgPSB0aGlzLl9jdXJyZW50Um91dGU7XG5cdCAgICAgIHZhciBjdXJyZW50VHJhbnNpdGlvbiA9IHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uO1xuXHRcblx0ICAgICAgaWYgKGN1cnJlbnRUcmFuc2l0aW9uKSB7XG5cdCAgICAgICAgaWYgKGN1cnJlbnRUcmFuc2l0aW9uLnRvLnBhdGggPT09IHBhdGgpIHtcblx0ICAgICAgICAgIC8vIGRvIG5vdGhpbmcgaWYgd2UgaGF2ZSBhbiBhY3RpdmUgdHJhbnNpdGlvbiBnb2luZyB0byB0aGUgc2FtZSBwYXRoXG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Um91dGUucGF0aCA9PT0gcGF0aCkge1xuXHQgICAgICAgICAgLy8gV2UgYXJlIGdvaW5nIHRvIHRoZSBzYW1lIHBhdGgsIGJ1dCB3ZSBhbHNvIGhhdmUgYW4gb25nb2luZyBidXRcblx0ICAgICAgICAgIC8vIG5vdC15ZXQtdmFsaWRhdGVkIHRyYW5zaXRpb24uIEFib3J0IHRoYXQgdHJhbnNpdGlvbiBhbmQgcmVzZXQgdG9cblx0ICAgICAgICAgIC8vIHByZXYgdHJhbnNpdGlvbi5cblx0ICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLmFib3J0ZWQgPSB0cnVlO1xuXHQgICAgICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSB0aGlzLl9wcmV2VHJhbnNpdGlvbjtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gZ29pbmcgdG8gYSB0b3RhbGx5IGRpZmZlcmVudCBwYXRoLiBhYm9ydCBvbmdvaW5nIHRyYW5zaXRpb24uXG5cdCAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5hYm9ydGVkID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGNvbnN0cnVjdCBuZXcgcm91dGUgYW5kIHRyYW5zaXRpb24gY29udGV4dFxuXHQgICAgICB2YXIgcm91dGUgPSBuZXcgUm91dGUocGF0aCwgdGhpcyk7XG5cdCAgICAgIHZhciB0cmFuc2l0aW9uID0gbmV3IFJvdXRlVHJhbnNpdGlvbih0aGlzLCByb3V0ZSwgY3VycmVudFJvdXRlKTtcblx0XG5cdCAgICAgIC8vIGN1cnJlbnQgdHJhbnNpdGlvbiBpcyB1cGRhdGVkIHJpZ2h0IG5vdy5cblx0ICAgICAgLy8gaG93ZXZlciwgY3VycmVudCByb3V0ZSB3aWxsIG9ubHkgYmUgdXBkYXRlZCBhZnRlciB0aGUgdHJhbnNpdGlvbiBoYXNcblx0ICAgICAgLy8gYmVlbiB2YWxpZGF0ZWQuXG5cdCAgICAgIHRoaXMuX3ByZXZUcmFuc2l0aW9uID0gY3VycmVudFRyYW5zaXRpb247XG5cdCAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gdHJhbnNpdGlvbjtcblx0XG5cdCAgICAgIGlmICghdGhpcy5hcHApIHtcblx0ICAgICAgICAoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgLy8gaW5pdGlhbCByZW5kZXJcblx0ICAgICAgICAgIHZhciByb3V0ZXIgPSBfdGhpczM7XG5cdCAgICAgICAgICBfdGhpczMuYXBwID0gbmV3IF90aGlzMy5fYXBwQ29uc3RydWN0b3Ioe1xuXHQgICAgICAgICAgICBlbDogX3RoaXMzLl9hcHBDb250YWluZXIsXG5cdCAgICAgICAgICAgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG5cdCAgICAgICAgICAgICAgdGhpcy4kcm91dGVyID0gcm91dGVyO1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBfbWV0YToge1xuXHQgICAgICAgICAgICAgICRyb3V0ZTogcm91dGVcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfSkoKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gY2hlY2sgZ2xvYmFsIGJlZm9yZSBob29rXG5cdCAgICAgIHZhciBiZWZvcmVIb29rcyA9IHRoaXMuX2JlZm9yZUVhY2hIb29rcztcblx0ICAgICAgdmFyIHN0YXJ0VHJhbnNpdGlvbiA9IGZ1bmN0aW9uIHN0YXJ0VHJhbnNpdGlvbigpIHtcblx0ICAgICAgICB0cmFuc2l0aW9uLnN0YXJ0KGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIF90aGlzMy5fcG9zdFRyYW5zaXRpb24ocm91dGUsIHN0YXRlLCBhbmNob3IpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgaWYgKGJlZm9yZUhvb2tzLmxlbmd0aCkge1xuXHQgICAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoYmVmb3JlSG9va3MsIGZ1bmN0aW9uIChob29rLCBfLCBuZXh0KSB7XG5cdCAgICAgICAgICBpZiAodHJhbnNpdGlvbiA9PT0gX3RoaXMzLl9jdXJyZW50VHJhbnNpdGlvbikge1xuXHQgICAgICAgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIG51bGwsIG5leHQsIHtcblx0ICAgICAgICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIHN0YXJ0VHJhbnNpdGlvbik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc3RhcnRUcmFuc2l0aW9uKCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmICghdGhpcy5fcmVuZGVyZWQgJiYgdGhpcy5fc3RhcnRDYikge1xuXHQgICAgICAgIHRoaXMuX3N0YXJ0Q2IuY2FsbChudWxsKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gSEFDSzpcblx0ICAgICAgLy8gc2V0IHJlbmRlcmVkIHRvIHRydWUgYWZ0ZXIgdGhlIHRyYW5zaXRpb24gc3RhcnQsIHNvXG5cdCAgICAgIC8vIHRoYXQgY29tcG9uZW50cyB0aGF0IGFyZSBhY2l0dmF0ZWQgc3luY2hyb25vdXNseSBrbm93XG5cdCAgICAgIC8vIHdoZXRoZXIgaXQgaXMgdGhlIGluaXRpYWwgcmVuZGVyLlxuXHQgICAgICB0aGlzLl9yZW5kZXJlZCA9IHRydWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0IGN1cnJlbnQgdG8gdGhlIG5ldyB0cmFuc2l0aW9uLlxuXHQgICAgICogVGhpcyBpcyBjYWxsZWQgYnkgdGhlIHRyYW5zaXRpb24gb2JqZWN0IHdoZW4gdGhlXG5cdCAgICAgKiB2YWxpZGF0aW9uIG9mIGEgcm91dGUgaGFzIHN1Y2NlZWRlZC5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX29uVHJhbnNpdGlvblZhbGlkYXRlZCA9IGZ1bmN0aW9uIF9vblRyYW5zaXRpb25WYWxpZGF0ZWQodHJhbnNpdGlvbikge1xuXHQgICAgICAvLyBzZXQgY3VycmVudCByb3V0ZVxuXHQgICAgICB2YXIgcm91dGUgPSB0aGlzLl9jdXJyZW50Um91dGUgPSB0cmFuc2l0aW9uLnRvO1xuXHQgICAgICAvLyB1cGRhdGUgcm91dGUgY29udGV4dCBmb3IgYWxsIGNoaWxkcmVuXG5cdCAgICAgIGlmICh0aGlzLmFwcC4kcm91dGUgIT09IHJvdXRlKSB7XG5cdCAgICAgICAgdGhpcy5hcHAuJHJvdXRlID0gcm91dGU7XG5cdCAgICAgICAgdGhpcy5fY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcblx0ICAgICAgICAgIGNoaWxkLiRyb3V0ZSA9IHJvdXRlO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNhbGwgZ2xvYmFsIGFmdGVyIGhvb2tcblx0ICAgICAgaWYgKHRoaXMuX2FmdGVyRWFjaEhvb2tzLmxlbmd0aCkge1xuXHQgICAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHtcblx0ICAgICAgICAgIHJldHVybiBob29rLmNhbGwobnVsbCwge1xuXHQgICAgICAgICAgICB0bzogdHJhbnNpdGlvbi50byxcblx0ICAgICAgICAgICAgZnJvbTogdHJhbnNpdGlvbi5mcm9tXG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbi5kb25lID0gdHJ1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBIYW5kbGUgc3R1ZmYgYWZ0ZXIgdGhlIHRyYW5zaXRpb24uXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtSb3V0ZX0gcm91dGVcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhdGVdXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gW2FuY2hvcl1cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX3Bvc3RUcmFuc2l0aW9uID0gZnVuY3Rpb24gX3Bvc3RUcmFuc2l0aW9uKHJvdXRlLCBzdGF0ZSwgYW5jaG9yKSB7XG5cdCAgICAgIC8vIGhhbmRsZSBzY3JvbGwgcG9zaXRpb25zXG5cdCAgICAgIC8vIHNhdmVkIHNjcm9sbCBwb3NpdGlvbnMgdGFrZSBwcmlvcml0eVxuXHQgICAgICAvLyB0aGVuIHdlIGNoZWNrIGlmIHRoZSBwYXRoIGhhcyBhbiBhbmNob3Jcblx0ICAgICAgdmFyIHBvcyA9IHN0YXRlICYmIHN0YXRlLnBvcztcblx0ICAgICAgaWYgKHBvcyAmJiB0aGlzLl9zYXZlU2Nyb2xsUG9zaXRpb24pIHtcblx0ICAgICAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHBvcy54LCBwb3MueSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoYW5jaG9yKSB7XG5cdCAgICAgICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHZhciBlbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGFuY2hvci5zbGljZSgxKSk7XG5cdCAgICAgICAgICBpZiAoZWwpIHtcblx0ICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHdpbmRvdy5zY3JvbGxYLCBlbC5vZmZzZXRUb3ApO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHJldHVybiBSb3V0ZXI7XG5cdCAgfSkoKTtcblx0XG5cdCAgZnVuY3Rpb24gZ3VhcmRDb21wb25lbnQocGF0aCwgaGFuZGxlcikge1xuXHQgICAgdmFyIGNvbXAgPSBoYW5kbGVyLmNvbXBvbmVudDtcblx0ICAgIGlmIChWdWUudXRpbC5pc1BsYWluT2JqZWN0KGNvbXApKSB7XG5cdCAgICAgIGNvbXAgPSBoYW5kbGVyLmNvbXBvbmVudCA9IFZ1ZS5leHRlbmQoY29tcCk7XG5cdCAgICB9XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICh0eXBlb2YgY29tcCAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBoYW5kbGVyLmNvbXBvbmVudCA9IG51bGw7XG5cdCAgICAgIHdhcm4kMSgnaW52YWxpZCBjb21wb25lbnQgZm9yIHJvdXRlIFwiJyArIHBhdGggKyAnXCIuJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKiBJbnN0YWxsYXRpb24gKi9cblx0XG5cdCAgUm91dGVyLmluc3RhbGxlZCA9IGZhbHNlO1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnN0YWxsYXRpb24gaW50ZXJmYWNlLlxuXHQgICAqIEluc3RhbGwgdGhlIG5lY2Vzc2FyeSBkaXJlY3RpdmVzLlxuXHQgICAqL1xuXHRcblx0ICBSb3V0ZXIuaW5zdGFsbCA9IGZ1bmN0aW9uIChleHRlcm5hbFZ1ZSkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoUm91dGVyLmluc3RhbGxlZCkge1xuXHQgICAgICB3YXJuJDEoJ2FscmVhZHkgaW5zdGFsbGVkLicpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBWdWUgPSBleHRlcm5hbFZ1ZTtcblx0ICAgIGFwcGx5T3ZlcnJpZGUoVnVlKTtcblx0ICAgIFZpZXcoVnVlKTtcblx0ICAgIExpbmsoVnVlKTtcblx0ICAgIGV4cG9ydHMkMS5WdWUgPSBWdWU7XG5cdCAgICBSb3V0ZXIuaW5zdGFsbGVkID0gdHJ1ZTtcblx0ICB9O1xuXHRcblx0ICAvLyBhdXRvIGluc3RhbGxcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93LlZ1ZSkge1xuXHQgICAgd2luZG93LlZ1ZS51c2UoUm91dGVyKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBSb3V0ZXI7XG5cdFxuXHR9KSk7XG5cbi8qKiovIH0sXG4vKiAyMTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcyKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDczKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc0KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc1KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9nZXQtc3RhcnRlZC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9nZXQtc3RhcnRlZC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc2KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc3KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc4KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMjAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDc5KTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oODApO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXkudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjI0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4Myk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjI1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NCk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NSk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vdGFicy52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi90YWJzLnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKGdsb2JhbCwgcHJvY2Vzcykgey8qIVxuXHQgKiBWdWUuanMgdjEuMC4yNlxuXHQgKiAoYykgMjAxNiBFdmFuIFlvdVxuXHQgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5cdCAqL1xuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRmdW5jdGlvbiBzZXQob2JqLCBrZXksIHZhbCkge1xuXHQgIGlmIChoYXNPd24ob2JqLCBrZXkpKSB7XG5cdCAgICBvYmpba2V5XSA9IHZhbDtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgaWYgKG9iai5faXNWdWUpIHtcblx0ICAgIHNldChvYmouX2RhdGEsIGtleSwgdmFsKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIG9iID0gb2JqLl9fb2JfXztcblx0ICBpZiAoIW9iKSB7XG5cdCAgICBvYmpba2V5XSA9IHZhbDtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgb2IuY29udmVydChrZXksIHZhbCk7XG5cdCAgb2IuZGVwLm5vdGlmeSgpO1xuXHQgIGlmIChvYi52bXMpIHtcblx0ICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuXHQgICAgICB2bS5fcHJveHkoa2V5KTtcblx0ICAgICAgdm0uX2RpZ2VzdCgpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdmFsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVsZXRlIGEgcHJvcGVydHkgYW5kIHRyaWdnZXIgY2hhbmdlIGlmIG5lY2Vzc2FyeS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVsKG9iaiwga2V5KSB7XG5cdCAgaWYgKCFoYXNPd24ob2JqLCBrZXkpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGRlbGV0ZSBvYmpba2V5XTtcblx0ICB2YXIgb2IgPSBvYmouX19vYl9fO1xuXHQgIGlmICghb2IpIHtcblx0ICAgIGlmIChvYmouX2lzVnVlKSB7XG5cdCAgICAgIGRlbGV0ZSBvYmouX2RhdGFba2V5XTtcblx0ICAgICAgb2JqLl9kaWdlc3QoKTtcblx0ICAgIH1cblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgb2IuZGVwLm5vdGlmeSgpO1xuXHQgIGlmIChvYi52bXMpIHtcblx0ICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuXHQgICAgICB2bS5fdW5wcm94eShrZXkpO1xuXHQgICAgICB2bS5fZGlnZXN0KCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXHQvKipcblx0ICogQ2hlY2sgd2hldGhlciB0aGUgb2JqZWN0IGhhcyB0aGUgcHJvcGVydHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGhhc093bihvYmosIGtleSkge1xuXHQgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIHZhbHVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0dmFyIGxpdGVyYWxWYWx1ZVJFID0gL15cXHM/KHRydWV8ZmFsc2V8LT9bXFxkXFwuXSt8J1teJ10qJ3xcIlteXCJdKlwiKVxccz8kLztcblx0XG5cdGZ1bmN0aW9uIGlzTGl0ZXJhbChleHApIHtcblx0ICByZXR1cm4gbGl0ZXJhbFZhbHVlUkUudGVzdChleHApO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBzdHJpbmcgc3RhcnRzIHdpdGggJCBvciBfXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1Jlc2VydmVkKHN0cikge1xuXHQgIHZhciBjID0gKHN0ciArICcnKS5jaGFyQ29kZUF0KDApO1xuXHQgIHJldHVybiBjID09PSAweDI0IHx8IGMgPT09IDB4NUY7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHdWFyZCB0ZXh0IG91dHB1dCwgbWFrZSBzdXJlIHVuZGVmaW5lZCBvdXRwdXRzXG5cdCAqIGVtcHR5IHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBfdG9TdHJpbmcodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGFuZCBjb252ZXJ0IHBvc3NpYmxlIG51bWVyaWMgc3RyaW5ncyB0byBudW1iZXJzXG5cdCAqIGJlZm9yZSBzZXR0aW5nIGJhY2sgdG8gZGF0YVxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4geyp8TnVtYmVyfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRvTnVtYmVyKHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XG5cdCAgICByZXR1cm4gaXNOYU4ocGFyc2VkKSA/IHZhbHVlIDogcGFyc2VkO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgc3RyaW5nIGJvb2xlYW4gbGl0ZXJhbHMgaW50byByZWFsIGJvb2xlYW5zLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4geyp8Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0b0Jvb2xlYW4odmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgPT09ICd0cnVlJyA/IHRydWUgOiB2YWx1ZSA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogdmFsdWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdHJpcCBxdW90ZXMgZnJvbSBhIHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge1N0cmluZyB8IGZhbHNlfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHN0cmlwUXVvdGVzKHN0cikge1xuXHQgIHZhciBhID0gc3RyLmNoYXJDb2RlQXQoMCk7XG5cdCAgdmFyIGIgPSBzdHIuY2hhckNvZGVBdChzdHIubGVuZ3RoIC0gMSk7XG5cdCAgcmV0dXJuIGEgPT09IGIgJiYgKGEgPT09IDB4MjIgfHwgYSA9PT0gMHgyNykgPyBzdHIuc2xpY2UoMSwgLTEpIDogc3RyO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2FtZWxpemUgYSBoeXBoZW4tZGVsbWl0ZWQgc3RyaW5nLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHR2YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcblx0XG5cdGZ1bmN0aW9uIGNhbWVsaXplKHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCB0b1VwcGVyKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gdG9VcHBlcihfLCBjKSB7XG5cdCAgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEh5cGhlbmF0ZSBhIGNhbWVsQ2FzZSBzdHJpbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBoeXBoZW5hdGVSRSA9IC8oW2EtelxcZF0pKFtBLVpdKS9nO1xuXHRcblx0ZnVuY3Rpb24gaHlwaGVuYXRlKHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShoeXBoZW5hdGVSRSwgJyQxLSQyJykudG9Mb3dlckNhc2UoKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGh5cGhlbi91bmRlcnNjb3JlL3NsYXNoIGRlbGltaXRlcmVkIG5hbWVzIGludG9cblx0ICogY2FtZWxpemVkIGNsYXNzTmFtZXMuXG5cdCAqXG5cdCAqIGUuZy4gbXktY29tcG9uZW50ID0+IE15Q29tcG9uZW50XG5cdCAqICAgICAgc29tZV9lbHNlICAgID0+IFNvbWVFbHNlXG5cdCAqICAgICAgc29tZS9jb21wICAgID0+IFNvbWVDb21wXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBjbGFzc2lmeVJFID0gLyg/Ol58Wy1fXFwvXSkoXFx3KS9nO1xuXHRcblx0ZnVuY3Rpb24gY2xhc3NpZnkoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGNsYXNzaWZ5UkUsIHRvVXBwZXIpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2ltcGxlIGJpbmQsIGZhc3RlciB0aGFuIG5hdGl2ZVxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGJpbmQoZm4sIGN0eCkge1xuXHQgIHJldHVybiBmdW5jdGlvbiAoYSkge1xuXHQgICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgcmV0dXJuIGwgPyBsID4gMSA/IGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKSA6IGZuLmNhbGwoY3R4LCBhKSA6IGZuLmNhbGwoY3R4KTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhbiBBcnJheS1saWtlIG9iamVjdCB0byBhIHJlYWwgQXJyYXkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXktbGlrZX0gbGlzdFxuXHQgKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0XSAtIHN0YXJ0IGluZGV4XG5cdCAqIEByZXR1cm4ge0FycmF5fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRvQXJyYXkobGlzdCwgc3RhcnQpIHtcblx0ICBzdGFydCA9IHN0YXJ0IHx8IDA7XG5cdCAgdmFyIGkgPSBsaXN0Lmxlbmd0aCAtIHN0YXJ0O1xuXHQgIHZhciByZXQgPSBuZXcgQXJyYXkoaSk7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgcmV0W2ldID0gbGlzdFtpICsgc3RhcnRdO1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdG9cblx0ICogQHBhcmFtIHtPYmplY3R9IGZyb21cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBleHRlbmQodG8sIGZyb20pIHtcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGZyb20pO1xuXHQgIHZhciBpID0ga2V5cy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdG9ba2V5c1tpXV0gPSBmcm9tW2tleXNbaV1dO1xuXHQgIH1cblx0ICByZXR1cm4gdG87XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBRdWljayBvYmplY3QgY2hlY2sgLSB0aGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIHRlbGxcblx0ICogT2JqZWN0cyBmcm9tIHByaW1pdGl2ZSB2YWx1ZXMgd2hlbiB3ZSBrbm93IHRoZSB2YWx1ZVxuXHQgKiBpcyBhIEpTT04tY29tcGxpYW50IHR5cGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG5cdCAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN0cmljdCBvYmplY3QgdHlwZSBjaGVjay4gT25seSByZXR1cm5zIHRydWVcblx0ICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHR2YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXHR2YXIgT0JKRUNUX1NUUklORyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXHRcblx0ZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcblx0ICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSBPQkpFQ1RfU1RSSU5HO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXJyYXkgdHlwZSBjaGVjay5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHR2YXIgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5cdFxuXHQvKipcblx0ICogRGVmaW5lIGEgcHJvcGVydHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtlbnVtZXJhYmxlXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRlZihvYmosIGtleSwgdmFsLCBlbnVtZXJhYmxlKSB7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG5cdCAgICB2YWx1ZTogdmFsLFxuXHQgICAgZW51bWVyYWJsZTogISFlbnVtZXJhYmxlLFxuXHQgICAgd3JpdGFibGU6IHRydWUsXG5cdCAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlYm91bmNlIGEgZnVuY3Rpb24gc28gaXQgb25seSBnZXRzIGNhbGxlZCBhZnRlciB0aGVcblx0ICogaW5wdXQgc3RvcHMgYXJyaXZpbmcgYWZ0ZXIgdGhlIGdpdmVuIHdhaXQgcGVyaW9kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBfZGVib3VuY2UoZnVuYywgd2FpdCkge1xuXHQgIHZhciB0aW1lb3V0LCBhcmdzLCBjb250ZXh0LCB0aW1lc3RhbXAsIHJlc3VsdDtcblx0ICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcblx0ICAgIHZhciBsYXN0ID0gRGF0ZS5ub3coKSAtIHRpbWVzdGFtcDtcblx0ICAgIGlmIChsYXN0IDwgd2FpdCAmJiBsYXN0ID49IDApIHtcblx0ICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRpbWVvdXQgPSBudWxsO1xuXHQgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuXHQgICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcblx0ICAgIH1cblx0ICB9O1xuXHQgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICBjb250ZXh0ID0gdGhpcztcblx0ICAgIGFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuXHQgICAgaWYgKCF0aW1lb3V0KSB7XG5cdCAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1hbnVhbCBpbmRleE9mIGJlY2F1c2UgaXQncyBzbGlnaHRseSBmYXN0ZXIgdGhhblxuXHQgKiBuYXRpdmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFyclxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluZGV4T2YoYXJyLCBvYmopIHtcblx0ICB2YXIgaSA9IGFyci5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgaWYgKGFycltpXSA9PT0gb2JqKSByZXR1cm4gaTtcblx0ICB9XG5cdCAgcmV0dXJuIC0xO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWFrZSBhIGNhbmNlbGxhYmxlIHZlcnNpb24gb2YgYW4gYXN5bmMgY2FsbGJhY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNhbmNlbGxhYmxlKGZuKSB7XG5cdCAgdmFyIGNiID0gZnVuY3Rpb24gY2IoKSB7XG5cdCAgICBpZiAoIWNiLmNhbmNlbGxlZCkge1xuXHQgICAgICByZXR1cm4gZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICB9O1xuXHQgIGNiLmNhbmNlbCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGNiLmNhbmNlbGxlZCA9IHRydWU7XG5cdCAgfTtcblx0ICByZXR1cm4gY2I7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiB0d28gdmFsdWVzIGFyZSBsb29zZWx5IGVxdWFsIC0gdGhhdCBpcyxcblx0ICogaWYgdGhleSBhcmUgcGxhaW4gb2JqZWN0cywgZG8gdGhleSBoYXZlIHRoZSBzYW1lIHNoYXBlP1xuXHQgKlxuXHQgKiBAcGFyYW0geyp9IGFcblx0ICogQHBhcmFtIHsqfSBiXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbG9vc2VFcXVhbChhLCBiKSB7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG5cdCAgcmV0dXJuIGEgPT0gYiB8fCAoaXNPYmplY3QoYSkgJiYgaXNPYmplY3QoYikgPyBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYikgOiBmYWxzZSk7XG5cdCAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cblx0fVxuXHRcblx0dmFyIGhhc1Byb3RvID0gKCdfX3Byb3RvX18nIGluIHt9KTtcblx0XG5cdC8vIEJyb3dzZXIgZW52aXJvbm1lbnQgc25pZmZpbmdcblx0dmFyIGluQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh3aW5kb3cpICE9PSAnW29iamVjdCBPYmplY3RdJztcblx0XG5cdC8vIGRldGVjdCBkZXZ0b29sc1xuXHR2YXIgZGV2dG9vbHMgPSBpbkJyb3dzZXIgJiYgd2luZG93Ll9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX187XG5cdFxuXHQvLyBVQSBzbmlmZmluZyBmb3Igd29ya2luZyBhcm91bmQgYnJvd3Nlci1zcGVjaWZpYyBxdWlya3Ncblx0dmFyIFVBID0gaW5Ccm93c2VyICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCk7XG5cdHZhciBpc0lFID0gVUEgJiYgVUEuaW5kZXhPZigndHJpZGVudCcpID4gMDtcblx0dmFyIGlzSUU5ID0gVUEgJiYgVUEuaW5kZXhPZignbXNpZSA5LjAnKSA+IDA7XG5cdHZhciBpc0FuZHJvaWQgPSBVQSAmJiBVQS5pbmRleE9mKCdhbmRyb2lkJykgPiAwO1xuXHR2YXIgaXNJb3MgPSBVQSAmJiAvKGlwaG9uZXxpcGFkfGlwb2R8aW9zKS9pLnRlc3QoVUEpO1xuXHR2YXIgaW9zVmVyc2lvbk1hdGNoID0gaXNJb3MgJiYgVUEubWF0Y2goL29zIChbXFxkX10rKS8pO1xuXHR2YXIgaW9zVmVyc2lvbiA9IGlvc1ZlcnNpb25NYXRjaCAmJiBpb3NWZXJzaW9uTWF0Y2hbMV0uc3BsaXQoJ18nKTtcblx0XG5cdC8vIGRldGVjdGluZyBpT1MgVUlXZWJWaWV3IGJ5IGluZGV4ZWREQlxuXHR2YXIgaGFzTXV0YXRpb25PYnNlcnZlckJ1ZyA9IGlvc1ZlcnNpb24gJiYgTnVtYmVyKGlvc1ZlcnNpb25bMF0pID49IDkgJiYgTnVtYmVyKGlvc1ZlcnNpb25bMV0pID49IDMgJiYgIXdpbmRvdy5pbmRleGVkREI7XG5cdFxuXHR2YXIgdHJhbnNpdGlvblByb3AgPSB1bmRlZmluZWQ7XG5cdHZhciB0cmFuc2l0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG5cdHZhciBhbmltYXRpb25Qcm9wID0gdW5kZWZpbmVkO1xuXHR2YXIgYW5pbWF0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG5cdFxuXHQvLyBUcmFuc2l0aW9uIHByb3BlcnR5L2V2ZW50IHNuaWZmaW5nXG5cdGlmIChpbkJyb3dzZXIgJiYgIWlzSUU5KSB7XG5cdCAgdmFyIGlzV2Via2l0VHJhbnMgPSB3aW5kb3cub250cmFuc2l0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0dHJhbnNpdGlvbmVuZCAhPT0gdW5kZWZpbmVkO1xuXHQgIHZhciBpc1dlYmtpdEFuaW0gPSB3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZDtcblx0ICB0cmFuc2l0aW9uUHJvcCA9IGlzV2Via2l0VHJhbnMgPyAnV2Via2l0VHJhbnNpdGlvbicgOiAndHJhbnNpdGlvbic7XG5cdCAgdHJhbnNpdGlvbkVuZEV2ZW50ID0gaXNXZWJraXRUcmFucyA/ICd3ZWJraXRUcmFuc2l0aW9uRW5kJyA6ICd0cmFuc2l0aW9uZW5kJztcblx0ICBhbmltYXRpb25Qcm9wID0gaXNXZWJraXRBbmltID8gJ1dlYmtpdEFuaW1hdGlvbicgOiAnYW5pbWF0aW9uJztcblx0ICBhbmltYXRpb25FbmRFdmVudCA9IGlzV2Via2l0QW5pbSA/ICd3ZWJraXRBbmltYXRpb25FbmQnIDogJ2FuaW1hdGlvbmVuZCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWZlciBhIHRhc2sgdG8gZXhlY3V0ZSBpdCBhc3luY2hyb25vdXNseS4gSWRlYWxseSB0aGlzXG5cdCAqIHNob3VsZCBiZSBleGVjdXRlZCBhcyBhIG1pY3JvdGFzaywgc28gd2UgbGV2ZXJhZ2Vcblx0ICogTXV0YXRpb25PYnNlcnZlciBpZiBpdCdzIGF2YWlsYWJsZSwgYW5kIGZhbGxiYWNrIHRvXG5cdCAqIHNldFRpbWVvdXQoMCkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcblx0ICovXG5cdFxuXHR2YXIgbmV4dFRpY2sgPSAoZnVuY3Rpb24gKCkge1xuXHQgIHZhciBjYWxsYmFja3MgPSBbXTtcblx0ICB2YXIgcGVuZGluZyA9IGZhbHNlO1xuXHQgIHZhciB0aW1lckZ1bmM7XG5cdCAgZnVuY3Rpb24gbmV4dFRpY2tIYW5kbGVyKCkge1xuXHQgICAgcGVuZGluZyA9IGZhbHNlO1xuXHQgICAgdmFyIGNvcGllcyA9IGNhbGxiYWNrcy5zbGljZSgwKTtcblx0ICAgIGNhbGxiYWNrcyA9IFtdO1xuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgY29waWVzW2ldKCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnICYmICFoYXNNdXRhdGlvbk9ic2VydmVyQnVnKSB7XG5cdCAgICB2YXIgY291bnRlciA9IDE7XG5cdCAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihuZXh0VGlja0hhbmRsZXIpO1xuXHQgICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY291bnRlcik7XG5cdCAgICBvYnNlcnZlci5vYnNlcnZlKHRleHROb2RlLCB7XG5cdCAgICAgIGNoYXJhY3RlckRhdGE6IHRydWVcblx0ICAgIH0pO1xuXHQgICAgdGltZXJGdW5jID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBjb3VudGVyID0gKGNvdW50ZXIgKyAxKSAlIDI7XG5cdCAgICAgIHRleHROb2RlLmRhdGEgPSBjb3VudGVyO1xuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gd2VicGFjayBhdHRlbXB0cyB0byBpbmplY3QgYSBzaGltIGZvciBzZXRJbW1lZGlhdGVcblx0ICAgIC8vIGlmIGl0IGlzIHVzZWQgYXMgYSBnbG9iYWwsIHNvIHdlIGhhdmUgdG8gd29yayBhcm91bmQgdGhhdCB0b1xuXHQgICAgLy8gYXZvaWQgYnVuZGxpbmcgdW5uZWNlc3NhcnkgY29kZS5cblx0ICAgIHZhciBjb250ZXh0ID0gaW5Ccm93c2VyID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB7fTtcblx0ICAgIHRpbWVyRnVuYyA9IGNvbnRleHQuc2V0SW1tZWRpYXRlIHx8IHNldFRpbWVvdXQ7XG5cdCAgfVxuXHQgIHJldHVybiBmdW5jdGlvbiAoY2IsIGN0eCkge1xuXHQgICAgdmFyIGZ1bmMgPSBjdHggPyBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGNiLmNhbGwoY3R4KTtcblx0ICAgIH0gOiBjYjtcblx0ICAgIGNhbGxiYWNrcy5wdXNoKGZ1bmMpO1xuXHQgICAgaWYgKHBlbmRpbmcpIHJldHVybjtcblx0ICAgIHBlbmRpbmcgPSB0cnVlO1xuXHQgICAgdGltZXJGdW5jKG5leHRUaWNrSGFuZGxlciwgMCk7XG5cdCAgfTtcblx0fSkoKTtcblx0XG5cdHZhciBfU2V0ID0gdW5kZWZpbmVkO1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0aWYgKHR5cGVvZiBTZXQgIT09ICd1bmRlZmluZWQnICYmIFNldC50b1N0cmluZygpLm1hdGNoKC9uYXRpdmUgY29kZS8pKSB7XG5cdCAgLy8gdXNlIG5hdGl2ZSBTZXQgd2hlbiBhdmFpbGFibGUuXG5cdCAgX1NldCA9IFNldDtcblx0fSBlbHNlIHtcblx0ICAvLyBhIG5vbi1zdGFuZGFyZCBTZXQgcG9seWZpbGwgdGhhdCBvbmx5IHdvcmtzIHdpdGggcHJpbWl0aXZlIGtleXMuXG5cdCAgX1NldCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB9O1xuXHQgIF9TZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHJldHVybiB0aGlzLnNldFtrZXldICE9PSB1bmRlZmluZWQ7XG5cdCAgfTtcblx0ICBfU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICB0aGlzLnNldFtrZXldID0gMTtcblx0ICB9O1xuXHQgIF9TZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIENhY2hlKGxpbWl0KSB7XG5cdCAgdGhpcy5zaXplID0gMDtcblx0ICB0aGlzLmxpbWl0ID0gbGltaXQ7XG5cdCAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkO1xuXHQgIHRoaXMuX2tleW1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdH1cblx0XG5cdHZhciBwID0gQ2FjaGUucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFB1dCA8dmFsdWU+IGludG8gdGhlIGNhY2hlIGFzc29jaWF0ZWQgd2l0aCA8a2V5Pi5cblx0ICogUmV0dXJucyB0aGUgZW50cnkgd2hpY2ggd2FzIHJlbW92ZWQgdG8gbWFrZSByb29tIGZvclxuXHQgKiB0aGUgbmV3IGVudHJ5LiBPdGhlcndpc2UgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuXHQgKiAoaS5lLiBpZiB0aGVyZSB3YXMgZW5vdWdoIHJvb20gYWxyZWFkeSkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtFbnRyeXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0cC5wdXQgPSBmdW5jdGlvbiAoa2V5LCB2YWx1ZSkge1xuXHQgIHZhciByZW1vdmVkO1xuXHRcblx0ICB2YXIgZW50cnkgPSB0aGlzLmdldChrZXksIHRydWUpO1xuXHQgIGlmICghZW50cnkpIHtcblx0ICAgIGlmICh0aGlzLnNpemUgPT09IHRoaXMubGltaXQpIHtcblx0ICAgICAgcmVtb3ZlZCA9IHRoaXMuc2hpZnQoKTtcblx0ICAgIH1cblx0ICAgIGVudHJ5ID0ge1xuXHQgICAgICBrZXk6IGtleVxuXHQgICAgfTtcblx0ICAgIHRoaXMuX2tleW1hcFtrZXldID0gZW50cnk7XG5cdCAgICBpZiAodGhpcy50YWlsKSB7XG5cdCAgICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5O1xuXHQgICAgICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuXHQgICAgfVxuXHQgICAgdGhpcy50YWlsID0gZW50cnk7XG5cdCAgICB0aGlzLnNpemUrKztcblx0ICB9XG5cdCAgZW50cnkudmFsdWUgPSB2YWx1ZTtcblx0XG5cdCAgcmV0dXJuIHJlbW92ZWQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogUHVyZ2UgdGhlIGxlYXN0IHJlY2VudGx5IHVzZWQgKG9sZGVzdCkgZW50cnkgZnJvbSB0aGVcblx0ICogY2FjaGUuIFJldHVybnMgdGhlIHJlbW92ZWQgZW50cnkgb3IgdW5kZWZpbmVkIGlmIHRoZVxuXHQgKiBjYWNoZSB3YXMgZW1wdHkuXG5cdCAqL1xuXHRcblx0cC5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgZW50cnkgPSB0aGlzLmhlYWQ7XG5cdCAgaWYgKGVudHJ5KSB7XG5cdCAgICB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV3ZXI7XG5cdCAgICB0aGlzLmhlYWQub2xkZXIgPSB1bmRlZmluZWQ7XG5cdCAgICBlbnRyeS5uZXdlciA9IGVudHJ5Lm9sZGVyID0gdW5kZWZpbmVkO1xuXHQgICAgdGhpcy5fa2V5bWFwW2VudHJ5LmtleV0gPSB1bmRlZmluZWQ7XG5cdCAgICB0aGlzLnNpemUtLTtcblx0ICB9XG5cdCAgcmV0dXJuIGVudHJ5O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEdldCBhbmQgcmVnaXN0ZXIgcmVjZW50IHVzZSBvZiA8a2V5Pi4gUmV0dXJucyB0aGUgdmFsdWVcblx0ICogYXNzb2NpYXRlZCB3aXRoIDxrZXk+IG9yIHVuZGVmaW5lZCBpZiBub3QgaW4gY2FjaGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHtCb29sZWFufSByZXR1cm5FbnRyeVxuXHQgKiBAcmV0dXJuIHtFbnRyeXwqfVxuXHQgKi9cblx0XG5cdHAuZ2V0ID0gZnVuY3Rpb24gKGtleSwgcmV0dXJuRW50cnkpIHtcblx0ICB2YXIgZW50cnkgPSB0aGlzLl9rZXltYXBba2V5XTtcblx0ICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuXHQgIGlmIChlbnRyeSA9PT0gdGhpcy50YWlsKSB7XG5cdCAgICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xuXHQgIH1cblx0ICAvLyBIRUFELS0tLS0tLS0tLS0tLS1UQUlMXG5cdCAgLy8gICA8Lm9sZGVyICAgLm5ld2VyPlxuXHQgIC8vICA8LS0tIGFkZCBkaXJlY3Rpb24gLS1cblx0ICAvLyAgIEEgIEIgIEMgIDxEPiAgRVxuXHQgIGlmIChlbnRyeS5uZXdlcikge1xuXHQgICAgaWYgKGVudHJ5ID09PSB0aGlzLmhlYWQpIHtcblx0ICAgICAgdGhpcy5oZWFkID0gZW50cnkubmV3ZXI7XG5cdCAgICB9XG5cdCAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyOyAvLyBDIDwtLSBFLlxuXHQgIH1cblx0ICBpZiAoZW50cnkub2xkZXIpIHtcblx0ICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7IC8vIEMuIC0tPiBFXG5cdCAgfVxuXHQgIGVudHJ5Lm5ld2VyID0gdW5kZWZpbmVkOyAvLyBEIC0teFxuXHQgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsOyAvLyBELiAtLT4gRVxuXHQgIGlmICh0aGlzLnRhaWwpIHtcblx0ICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5OyAvLyBFLiA8LS0gRFxuXHQgIH1cblx0ICB0aGlzLnRhaWwgPSBlbnRyeTtcblx0ICByZXR1cm4gcmV0dXJuRW50cnkgPyBlbnRyeSA6IGVudHJ5LnZhbHVlO1xuXHR9O1xuXHRcblx0dmFyIGNhY2hlJDEgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdHZhciBmaWx0ZXJUb2tlblJFID0gL1teXFxzJ1wiXSt8J1teJ10qJ3xcIlteXCJdKlwiL2c7XG5cdHZhciByZXNlcnZlZEFyZ1JFID0gL15pbiR8Xi0/XFxkKy87XG5cdFxuXHQvKipcblx0ICogUGFyc2VyIHN0YXRlXG5cdCAqL1xuXHRcblx0dmFyIHN0cjtcblx0dmFyIGRpcjtcblx0dmFyIGM7XG5cdHZhciBwcmV2O1xuXHR2YXIgaTtcblx0dmFyIGw7XG5cdHZhciBsYXN0RmlsdGVySW5kZXg7XG5cdHZhciBpblNpbmdsZTtcblx0dmFyIGluRG91YmxlO1xuXHR2YXIgY3VybHk7XG5cdHZhciBzcXVhcmU7XG5cdHZhciBwYXJlbjtcblx0LyoqXG5cdCAqIFB1c2ggYSBmaWx0ZXIgdG8gdGhlIGN1cnJlbnQgZGlyZWN0aXZlIG9iamVjdFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHB1c2hGaWx0ZXIoKSB7XG5cdCAgdmFyIGV4cCA9IHN0ci5zbGljZShsYXN0RmlsdGVySW5kZXgsIGkpLnRyaW0oKTtcblx0ICB2YXIgZmlsdGVyO1xuXHQgIGlmIChleHApIHtcblx0ICAgIGZpbHRlciA9IHt9O1xuXHQgICAgdmFyIHRva2VucyA9IGV4cC5tYXRjaChmaWx0ZXJUb2tlblJFKTtcblx0ICAgIGZpbHRlci5uYW1lID0gdG9rZW5zWzBdO1xuXHQgICAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG5cdCAgICAgIGZpbHRlci5hcmdzID0gdG9rZW5zLnNsaWNlKDEpLm1hcChwcm9jZXNzRmlsdGVyQXJnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKGZpbHRlcikge1xuXHQgICAgKGRpci5maWx0ZXJzID0gZGlyLmZpbHRlcnMgfHwgW10pLnB1c2goZmlsdGVyKTtcblx0ICB9XG5cdCAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBhcmd1bWVudCBpcyBkeW5hbWljIGFuZCBzdHJpcCBxdW90ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBhcmdcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NGaWx0ZXJBcmcoYXJnKSB7XG5cdCAgaWYgKHJlc2VydmVkQXJnUkUudGVzdChhcmcpKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICB2YWx1ZTogdG9OdW1iZXIoYXJnKSxcblx0ICAgICAgZHluYW1pYzogZmFsc2Vcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKGFyZyk7XG5cdCAgICB2YXIgZHluYW1pYyA9IHN0cmlwcGVkID09PSBhcmc7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICB2YWx1ZTogZHluYW1pYyA/IGFyZyA6IHN0cmlwcGVkLFxuXHQgICAgICBkeW5hbWljOiBkeW5hbWljXG5cdCAgICB9O1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGEgZGlyZWN0aXZlIHZhbHVlIGFuZCBleHRyYWN0IHRoZSBleHByZXNzaW9uXG5cdCAqIGFuZCBpdHMgZmlsdGVycyBpbnRvIGEgZGVzY3JpcHRvci5cblx0ICpcblx0ICogRXhhbXBsZTpcblx0ICpcblx0ICogXCJhICsgMSB8IHVwcGVyY2FzZVwiIHdpbGwgeWllbGQ6XG5cdCAqIHtcblx0ICogICBleHByZXNzaW9uOiAnYSArIDEnLFxuXHQgKiAgIGZpbHRlcnM6IFtcblx0ICogICAgIHsgbmFtZTogJ3VwcGVyY2FzZScsIGFyZ3M6IG51bGwgfVxuXHQgKiAgIF1cblx0ICogfVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc1xuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmUocykge1xuXHQgIHZhciBoaXQgPSBjYWNoZSQxLmdldChzKTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0XG5cdCAgLy8gcmVzZXQgcGFyc2VyIHN0YXRlXG5cdCAgc3RyID0gcztcblx0ICBpblNpbmdsZSA9IGluRG91YmxlID0gZmFsc2U7XG5cdCAgY3VybHkgPSBzcXVhcmUgPSBwYXJlbiA9IDA7XG5cdCAgbGFzdEZpbHRlckluZGV4ID0gMDtcblx0ICBkaXIgPSB7fTtcblx0XG5cdCAgZm9yIChpID0gMCwgbCA9IHN0ci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHByZXYgPSBjO1xuXHQgICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuXHQgICAgaWYgKGluU2luZ2xlKSB7XG5cdCAgICAgIC8vIGNoZWNrIHNpbmdsZSBxdW90ZVxuXHQgICAgICBpZiAoYyA9PT0gMHgyNyAmJiBwcmV2ICE9PSAweDVDKSBpblNpbmdsZSA9ICFpblNpbmdsZTtcblx0ICAgIH0gZWxzZSBpZiAoaW5Eb3VibGUpIHtcblx0ICAgICAgLy8gY2hlY2sgZG91YmxlIHF1b3RlXG5cdCAgICAgIGlmIChjID09PSAweDIyICYmIHByZXYgIT09IDB4NUMpIGluRG91YmxlID0gIWluRG91YmxlO1xuXHQgICAgfSBlbHNlIGlmIChjID09PSAweDdDICYmIC8vIHBpcGVcblx0ICAgIHN0ci5jaGFyQ29kZUF0KGkgKyAxKSAhPT0gMHg3QyAmJiBzdHIuY2hhckNvZGVBdChpIC0gMSkgIT09IDB4N0MpIHtcblx0ICAgICAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcblx0ICAgICAgICAvLyBmaXJzdCBmaWx0ZXIsIGVuZCBvZiBleHByZXNzaW9uXG5cdCAgICAgICAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG5cdCAgICAgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIGFscmVhZHkgaGFzIGZpbHRlclxuXHQgICAgICAgIHB1c2hGaWx0ZXIoKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3dpdGNoIChjKSB7XG5cdCAgICAgICAgY2FzZSAweDIyOlxuXHQgICAgICAgICAgaW5Eb3VibGUgPSB0cnVlO2JyZWFrOyAvLyBcIlxuXHQgICAgICAgIGNhc2UgMHgyNzpcblx0ICAgICAgICAgIGluU2luZ2xlID0gdHJ1ZTticmVhazsgLy8gJ1xuXHQgICAgICAgIGNhc2UgMHgyODpcblx0ICAgICAgICAgIHBhcmVuKys7YnJlYWs7IC8vIChcblx0ICAgICAgICBjYXNlIDB4Mjk6XG5cdCAgICAgICAgICBwYXJlbi0tO2JyZWFrOyAvLyApXG5cdCAgICAgICAgY2FzZSAweDVCOlxuXHQgICAgICAgICAgc3F1YXJlKys7YnJlYWs7IC8vIFtcblx0ICAgICAgICBjYXNlIDB4NUQ6XG5cdCAgICAgICAgICBzcXVhcmUtLTticmVhazsgLy8gXVxuXHQgICAgICAgIGNhc2UgMHg3Qjpcblx0ICAgICAgICAgIGN1cmx5Kys7YnJlYWs7IC8vIHtcblx0ICAgICAgICBjYXNlIDB4N0Q6XG5cdCAgICAgICAgICBjdXJseS0tO2JyZWFrOyAvLyB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG5cdCAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG5cdCAgfSBlbHNlIGlmIChsYXN0RmlsdGVySW5kZXggIT09IDApIHtcblx0ICAgIHB1c2hGaWx0ZXIoKTtcblx0ICB9XG5cdFxuXHQgIGNhY2hlJDEucHV0KHMsIGRpcik7XG5cdCAgcmV0dXJuIGRpcjtcblx0fVxuXHRcblx0dmFyIGRpcmVjdGl2ZSA9IE9iamVjdC5mcmVlemUoe1xuXHQgIHBhcnNlRGlyZWN0aXZlOiBwYXJzZURpcmVjdGl2ZVxuXHR9KTtcblx0XG5cdHZhciByZWdleEVzY2FwZVJFID0gL1stLiorP14ke30oKXxbXFxdXFwvXFxcXF0vZztcblx0dmFyIGNhY2hlID0gdW5kZWZpbmVkO1xuXHR2YXIgdGFnUkUgPSB1bmRlZmluZWQ7XG5cdHZhciBodG1sUkUgPSB1bmRlZmluZWQ7XG5cdC8qKlxuXHQgKiBFc2NhcGUgYSBzdHJpbmcgc28gaXQgY2FuIGJlIHVzZWQgaW4gYSBSZWdFeHBcblx0ICogY29uc3RydWN0b3IuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBlc2NhcGVSZWdleChzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcXFwkJicpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBjb21waWxlUmVnZXgoKSB7XG5cdCAgdmFyIG9wZW4gPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1swXSk7XG5cdCAgdmFyIGNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMV0pO1xuXHQgIHZhciB1bnNhZmVPcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMF0pO1xuXHQgIHZhciB1bnNhZmVDbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzFdKTtcblx0ICB0YWdSRSA9IG5ldyBSZWdFeHAodW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnfCcgKyBvcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyBjbG9zZSwgJ2cnKTtcblx0ICBodG1sUkUgPSBuZXcgUmVnRXhwKCdeJyArIHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJyQnKTtcblx0ICAvLyByZXNldCBjYWNoZVxuXHQgIGNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYSB0ZW1wbGF0ZSB0ZXh0IHN0cmluZyBpbnRvIGFuIGFycmF5IG9mIHRva2Vucy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0ICogQHJldHVybiB7QXJyYXk8T2JqZWN0PiB8IG51bGx9XG5cdCAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB0eXBlXG5cdCAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB2YWx1ZVxuXHQgKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtodG1sXVxuXHQgKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtvbmVUaW1lXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlVGV4dCh0ZXh0KSB7XG5cdCAgaWYgKCFjYWNoZSkge1xuXHQgICAgY29tcGlsZVJlZ2V4KCk7XG5cdCAgfVxuXHQgIHZhciBoaXQgPSBjYWNoZS5nZXQodGV4dCk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdCAgaWYgKCF0YWdSRS50ZXN0KHRleHQpKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdCAgdmFyIHRva2VucyA9IFtdO1xuXHQgIHZhciBsYXN0SW5kZXggPSB0YWdSRS5sYXN0SW5kZXggPSAwO1xuXHQgIHZhciBtYXRjaCwgaW5kZXgsIGh0bWwsIHZhbHVlLCBmaXJzdCwgb25lVGltZTtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgIHdoaWxlIChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpIHtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGluZGV4ID0gbWF0Y2guaW5kZXg7XG5cdCAgICAvLyBwdXNoIHRleHQgdG9rZW5cblx0ICAgIGlmIChpbmRleCA+IGxhc3RJbmRleCkge1xuXHQgICAgICB0b2tlbnMucHVzaCh7XG5cdCAgICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4LCBpbmRleClcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICAvLyB0YWcgdG9rZW5cblx0ICAgIGh0bWwgPSBodG1sUkUudGVzdChtYXRjaFswXSk7XG5cdCAgICB2YWx1ZSA9IGh0bWwgPyBtYXRjaFsxXSA6IG1hdGNoWzJdO1xuXHQgICAgZmlyc3QgPSB2YWx1ZS5jaGFyQ29kZUF0KDApO1xuXHQgICAgb25lVGltZSA9IGZpcnN0ID09PSA0MjsgLy8gKlxuXHQgICAgdmFsdWUgPSBvbmVUaW1lID8gdmFsdWUuc2xpY2UoMSkgOiB2YWx1ZTtcblx0ICAgIHRva2Vucy5wdXNoKHtcblx0ICAgICAgdGFnOiB0cnVlLFxuXHQgICAgICB2YWx1ZTogdmFsdWUudHJpbSgpLFxuXHQgICAgICBodG1sOiBodG1sLFxuXHQgICAgICBvbmVUaW1lOiBvbmVUaW1lXG5cdCAgICB9KTtcblx0ICAgIGxhc3RJbmRleCA9IGluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuXHQgIH1cblx0ICBpZiAobGFzdEluZGV4IDwgdGV4dC5sZW5ndGgpIHtcblx0ICAgIHRva2Vucy5wdXNoKHtcblx0ICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4KVxuXHQgICAgfSk7XG5cdCAgfVxuXHQgIGNhY2hlLnB1dCh0ZXh0LCB0b2tlbnMpO1xuXHQgIHJldHVybiB0b2tlbnM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgYSBsaXN0IG9mIHRva2VucyBpbnRvIGFuIGV4cHJlc3Npb24uXG5cdCAqIGUuZy4gdG9rZW5zIHBhcnNlZCBmcm9tICdhIHt7Yn19IGMnIGNhbiBiZSBzZXJpYWxpemVkXG5cdCAqIGludG8gb25lIHNpbmdsZSBleHByZXNzaW9uIGFzICdcImEgXCIgKyBiICsgXCIgY1wiJy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gdG9rZW5zXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0b2tlbnNUb0V4cCh0b2tlbnMsIHZtKSB7XG5cdCAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG5cdCAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcblx0ICAgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2VuLCB2bSk7XG5cdCAgICB9KS5qb2luKCcrJyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbnNbMF0sIHZtLCB0cnVlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgYSBzaW5nbGUgdG9rZW4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFtzaW5nbGVdXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRUb2tlbih0b2tlbiwgdm0sIHNpbmdsZSkge1xuXHQgIHJldHVybiB0b2tlbi50YWcgPyB0b2tlbi5vbmVUaW1lICYmIHZtID8gJ1wiJyArIHZtLiRldmFsKHRva2VuLnZhbHVlKSArICdcIicgOiBpbmxpbmVGaWx0ZXJzKHRva2VuLnZhbHVlLCBzaW5nbGUpIDogJ1wiJyArIHRva2VuLnZhbHVlICsgJ1wiJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvciBhbiBhdHRyaWJ1dGUgd2l0aCBtdWx0aXBsZSBpbnRlcnBvbGF0aW9uIHRhZ3MsXG5cdCAqIGUuZy4gYXR0cj1cInNvbWUte3t0aGluZyB8IGZpbHRlcn19XCIsIGluIG9yZGVyIHRvIGNvbWJpbmVcblx0ICogdGhlIHdob2xlIHRoaW5nIGludG8gYSBzaW5nbGUgd2F0Y2hhYmxlIGV4cHJlc3Npb24sIHdlXG5cdCAqIGhhdmUgdG8gaW5saW5lIHRob3NlIGZpbHRlcnMuIFRoaXMgZnVuY3Rpb24gZG9lcyBleGFjdGx5XG5cdCAqIHRoYXQuIFRoaXMgaXMgYSBiaXQgaGFja3kgYnV0IGl0IGF2b2lkcyBoZWF2eSBjaGFuZ2VzXG5cdCAqIHRvIGRpcmVjdGl2ZSBwYXJzZXIgYW5kIHdhdGNoZXIgbWVjaGFuaXNtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2luZ2xlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHR2YXIgZmlsdGVyUkUgPSAvW158XVxcfFtefF0vO1xuXHRmdW5jdGlvbiBpbmxpbmVGaWx0ZXJzKGV4cCwgc2luZ2xlKSB7XG5cdCAgaWYgKCFmaWx0ZXJSRS50ZXN0KGV4cCkpIHtcblx0ICAgIHJldHVybiBzaW5nbGUgPyBleHAgOiAnKCcgKyBleHAgKyAnKSc7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZShleHApO1xuXHQgICAgaWYgKCFkaXIuZmlsdGVycykge1xuXHQgICAgICByZXR1cm4gJygnICsgZXhwICsgJyknO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICd0aGlzLl9hcHBseUZpbHRlcnMoJyArIGRpci5leHByZXNzaW9uICsgLy8gdmFsdWVcblx0ICAgICAgJyxudWxsLCcgKyAvLyBvbGRWYWx1ZSAobnVsbCBmb3IgcmVhZClcblx0ICAgICAgSlNPTi5zdHJpbmdpZnkoZGlyLmZpbHRlcnMpICsgLy8gZmlsdGVyIGRlc2NyaXB0b3JzXG5cdCAgICAgICcsZmFsc2UpJzsgLy8gd3JpdGU/XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdGV4dCA9IE9iamVjdC5mcmVlemUoe1xuXHQgIGNvbXBpbGVSZWdleDogY29tcGlsZVJlZ2V4LFxuXHQgIHBhcnNlVGV4dDogcGFyc2VUZXh0LFxuXHQgIHRva2Vuc1RvRXhwOiB0b2tlbnNUb0V4cFxuXHR9KTtcblx0XG5cdHZhciBkZWxpbWl0ZXJzID0gWyd7eycsICd9fSddO1xuXHR2YXIgdW5zYWZlRGVsaW1pdGVycyA9IFsne3t7JywgJ319fSddO1xuXHRcblx0dmFyIGNvbmZpZyA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHtcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byBwcmludCBkZWJ1ZyBtZXNzYWdlcy5cblx0ICAgKiBBbHNvIGVuYWJsZXMgc3RhY2sgdHJhY2UgZm9yIHdhcm5pbmdzLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIGRlYnVnOiBmYWxzZSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byBzdXBwcmVzcyB3YXJuaW5ncy5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtCb29sZWFufVxuXHQgICAqL1xuXHRcblx0ICBzaWxlbnQ6IGZhbHNlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHVzZSBhc3luYyByZW5kZXJpbmcuXG5cdCAgICovXG5cdFxuXHQgIGFzeW5jOiB0cnVlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHdhcm4gYWdhaW5zdCBlcnJvcnMgY2F1Z2h0IHdoZW4gZXZhbHVhdGluZ1xuXHQgICAqIGV4cHJlc3Npb25zLlxuXHQgICAqL1xuXHRcblx0ICB3YXJuRXhwcmVzc2lvbkVycm9yczogdHJ1ZSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byBhbGxvdyBkZXZ0b29scyBpbnNwZWN0aW9uLlxuXHQgICAqIERpc2FibGVkIGJ5IGRlZmF1bHQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG5cdCAgICovXG5cdFxuXHQgIGRldnRvb2xzOiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnRlcm5hbCBmbGFnIHRvIGluZGljYXRlIHRoZSBkZWxpbWl0ZXJzIGhhdmUgYmVlblxuXHQgICAqIGNoYW5nZWQuXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7Qm9vbGVhbn1cblx0ICAgKi9cblx0XG5cdCAgX2RlbGltaXRlcnNDaGFuZ2VkOiB0cnVlLFxuXHRcblx0ICAvKipcblx0ICAgKiBMaXN0IG9mIGFzc2V0IHR5cGVzIHRoYXQgYSBjb21wb25lbnQgY2FuIG93bi5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtBcnJheX1cblx0ICAgKi9cblx0XG5cdCAgX2Fzc2V0VHlwZXM6IFsnY29tcG9uZW50JywgJ2RpcmVjdGl2ZScsICdlbGVtZW50RGlyZWN0aXZlJywgJ2ZpbHRlcicsICd0cmFuc2l0aW9uJywgJ3BhcnRpYWwnXSxcblx0XG5cdCAgLyoqXG5cdCAgICogcHJvcCBiaW5kaW5nIG1vZGVzXG5cdCAgICovXG5cdFxuXHQgIF9wcm9wQmluZGluZ01vZGVzOiB7XG5cdCAgICBPTkVfV0FZOiAwLFxuXHQgICAgVFdPX1dBWTogMSxcblx0ICAgIE9ORV9USU1FOiAyXG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogTWF4IGNpcmN1bGFyIHVwZGF0ZXMgYWxsb3dlZCBpbiBhIGJhdGNoZXIgZmx1c2ggY3ljbGUuXG5cdCAgICovXG5cdFxuXHQgIF9tYXhVcGRhdGVDb3VudDogMTAwXG5cdFxuXHR9LCB7XG5cdCAgZGVsaW1pdGVyczogeyAvKipcblx0ICAgICAgICAgICAgICAgICAqIEludGVycG9sYXRpb24gZGVsaW1pdGVycy4gQ2hhbmdpbmcgdGhlc2Ugd291bGQgdHJpZ2dlclxuXHQgICAgICAgICAgICAgICAgICogdGhlIHRleHQgcGFyc2VyIHRvIHJlLWNvbXBpbGUgdGhlIHJlZ3VsYXIgZXhwcmVzc2lvbnMuXG5cdCAgICAgICAgICAgICAgICAgKlxuXHQgICAgICAgICAgICAgICAgICogQHR5cGUge0FycmF5PFN0cmluZz59XG5cdCAgICAgICAgICAgICAgICAgKi9cblx0XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIGRlbGltaXRlcnM7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG5cdCAgICAgIGRlbGltaXRlcnMgPSB2YWw7XG5cdCAgICAgIGNvbXBpbGVSZWdleCgpO1xuXHQgICAgfSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgIGVudW1lcmFibGU6IHRydWVcblx0ICB9LFxuXHQgIHVuc2FmZURlbGltaXRlcnM6IHtcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gdW5zYWZlRGVsaW1pdGVycztcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcblx0ICAgICAgdW5zYWZlRGVsaW1pdGVycyA9IHZhbDtcblx0ICAgICAgY29tcGlsZVJlZ2V4KCk7XG5cdCAgICB9LFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZW51bWVyYWJsZTogdHJ1ZVxuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgd2FybiA9IHVuZGVmaW5lZDtcblx0dmFyIGZvcm1hdENvbXBvbmVudE5hbWUgPSB1bmRlZmluZWQ7XG5cdFxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIChmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgaGFzQ29uc29sZSA9IHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJztcblx0XG5cdCAgICB3YXJuID0gZnVuY3Rpb24gKG1zZywgdm0pIHtcblx0ICAgICAgaWYgKGhhc0NvbnNvbGUgJiYgIWNvbmZpZy5zaWxlbnQpIHtcblx0ICAgICAgICBjb25zb2xlLmVycm9yKCdbVnVlIHdhcm5dOiAnICsgbXNnICsgKHZtID8gZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkgOiAnJykpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGZvcm1hdENvbXBvbmVudE5hbWUgPSBmdW5jdGlvbiAodm0pIHtcblx0ICAgICAgdmFyIG5hbWUgPSB2bS5faXNWdWUgPyB2bS4kb3B0aW9ucy5uYW1lIDogdm0ubmFtZTtcblx0ICAgICAgcmV0dXJuIG5hbWUgPyAnIChmb3VuZCBpbiBjb21wb25lbnQ6IDwnICsgaHlwaGVuYXRlKG5hbWUpICsgJz4pJyA6ICcnO1xuXHQgICAgfTtcblx0ICB9KSgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXBwZW5kIHdpdGggdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFwcGVuZFdpdGhUcmFuc2l0aW9uKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuXHQgIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuXHQgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9LCB2bSwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0QmVmb3JlIHdpdGggdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGJlZm9yZVdpdGhUcmFuc2l0aW9uKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuXHQgIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuXHQgICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuXHQgIH0sIHZtLCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgd2l0aCB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlV2l0aFRyYW5zaXRpb24oZWwsIHZtLCBjYikge1xuXHQgIGFwcGx5VHJhbnNpdGlvbihlbCwgLTEsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHJlbW92ZShlbCk7XG5cdCAgfSwgdm0sIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFwcGx5IHRyYW5zaXRpb25zIHdpdGggYW4gb3BlcmF0aW9uIGNhbGxiYWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBkaXJlY3Rpb25cblx0ICogICAgICAgICAgICAgICAgICAxOiBlbnRlclxuXHQgKiAgICAgICAgICAgICAgICAgLTE6IGxlYXZlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gdGhlIGFjdHVhbCBET00gb3BlcmF0aW9uXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXBwbHlUcmFuc2l0aW9uKGVsLCBkaXJlY3Rpb24sIG9wLCB2bSwgY2IpIHtcblx0ICB2YXIgdHJhbnNpdGlvbiA9IGVsLl9fdl90cmFucztcblx0ICBpZiAoIXRyYW5zaXRpb24gfHxcblx0ICAvLyBza2lwIGlmIHRoZXJlIGFyZSBubyBqcyBob29rcyBhbmQgQ1NTIHRyYW5zaXRpb24gaXNcblx0ICAvLyBub3Qgc3VwcG9ydGVkXG5cdCAgIXRyYW5zaXRpb24uaG9va3MgJiYgIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuXHQgIC8vIHNraXAgdHJhbnNpdGlvbnMgZm9yIGluaXRpYWwgY29tcGlsZVxuXHQgICF2bS5faXNDb21waWxlZCB8fFxuXHQgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBtYW5pcHVsYXRlZCBieSBhIHBhcmVudCBkaXJlY3RpdmVcblx0ICAvLyBkdXJpbmcgdGhlIHBhcmVudCdzIGNvbXBpbGF0aW9uIHBoYXNlLCBza2lwIHRoZVxuXHQgIC8vIGFuaW1hdGlvbi5cblx0ICB2bS4kcGFyZW50ICYmICF2bS4kcGFyZW50Ll9pc0NvbXBpbGVkKSB7XG5cdCAgICBvcCgpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgYWN0aW9uID0gZGlyZWN0aW9uID4gMCA/ICdlbnRlcicgOiAnbGVhdmUnO1xuXHQgIHRyYW5zaXRpb25bYWN0aW9uXShvcCwgY2IpO1xuXHR9XG5cdFxuXHR2YXIgdHJhbnNpdGlvbiA9IE9iamVjdC5mcmVlemUoe1xuXHQgIGFwcGVuZFdpdGhUcmFuc2l0aW9uOiBhcHBlbmRXaXRoVHJhbnNpdGlvbixcblx0ICBiZWZvcmVXaXRoVHJhbnNpdGlvbjogYmVmb3JlV2l0aFRyYW5zaXRpb24sXG5cdCAgcmVtb3ZlV2l0aFRyYW5zaXRpb246IHJlbW92ZVdpdGhUcmFuc2l0aW9uLFxuXHQgIGFwcGx5VHJhbnNpdGlvbjogYXBwbHlUcmFuc2l0aW9uXG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFF1ZXJ5IGFuIGVsZW1lbnQgc2VsZWN0b3IgaWYgaXQncyBub3QgYW4gZWxlbWVudCBhbHJlYWR5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtFbGVtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG5cdCAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHZhciBzZWxlY3RvciA9IGVsO1xuXHQgICAgZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKTtcblx0ICAgIGlmICghZWwpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdDYW5ub3QgZmluZCBlbGVtZW50OiAnICsgc2VsZWN0b3IpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gZWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIG5vZGUgaXMgaW4gdGhlIGRvY3VtZW50LlxuXHQgKiBOb3RlOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMgc2hvdWxkIHdvcmsgaGVyZVxuXHQgKiBidXQgYWx3YXlzIHJldHVybnMgZmFsc2UgZm9yIGNvbW1lbnQgbm9kZXMgaW4gcGhhbnRvbWpzLFxuXHQgKiBtYWtpbmcgdW5pdCB0ZXN0cyBkaWZmaWN1bHQuIFRoaXMgaXMgZml4ZWQgYnkgZG9pbmcgdGhlXG5cdCAqIGNvbnRhaW5zKCkgY2hlY2sgb24gdGhlIG5vZGUncyBwYXJlbnROb2RlIGluc3RlYWQgb2Zcblx0ICogdGhlIG5vZGUgaXRzZWxmLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbkRvYyhub2RlKSB7XG5cdCAgaWYgKCFub2RlKSByZXR1cm4gZmFsc2U7XG5cdCAgdmFyIGRvYyA9IG5vZGUub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdCAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcblx0ICByZXR1cm4gZG9jID09PSBub2RlIHx8IGRvYyA9PT0gcGFyZW50IHx8ICEhKHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgPT09IDEgJiYgZG9jLmNvbnRhaW5zKHBhcmVudCkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IGFuZCByZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gYSBub2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IF9hdHRyXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0QXR0cihub2RlLCBfYXR0cikge1xuXHQgIHZhciB2YWwgPSBub2RlLmdldEF0dHJpYnV0ZShfYXR0cik7XG5cdCAgaWYgKHZhbCAhPT0gbnVsbCkge1xuXHQgICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoX2F0dHIpO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IGFuIGF0dHJpYnV0ZSB3aXRoIGNvbG9uIG9yIHYtYmluZDogcHJlZml4LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICogQHJldHVybiB7U3RyaW5nfG51bGx9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0QmluZEF0dHIobm9kZSwgbmFtZSkge1xuXHQgIHZhciB2YWwgPSBnZXRBdHRyKG5vZGUsICc6JyArIG5hbWUpO1xuXHQgIGlmICh2YWwgPT09IG51bGwpIHtcblx0ICAgIHZhbCA9IGdldEF0dHIobm9kZSwgJ3YtYmluZDonICsgbmFtZSk7XG5cdCAgfVxuXHQgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayB0aGUgcHJlc2VuY2Ugb2YgYSBiaW5kIGF0dHJpYnV0ZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaGFzQmluZEF0dHIobm9kZSwgbmFtZSkge1xuXHQgIHJldHVybiBub2RlLmhhc0F0dHJpYnV0ZShuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgnOicgKyBuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgndi1iaW5kOicgKyBuYW1lKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydCBlbCBiZWZvcmUgdGFyZ2V0XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBiZWZvcmUoZWwsIHRhcmdldCkge1xuXHQgIHRhcmdldC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlbCwgdGFyZ2V0KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydCBlbCBhZnRlciB0YXJnZXRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFmdGVyKGVsLCB0YXJnZXQpIHtcblx0ICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldC5uZXh0U2libGluZyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRhcmdldC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZWwgZnJvbSBET01cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZShlbCkge1xuXHQgIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJlcGVuZCBlbCB0byB0YXJnZXRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByZXBlbmQoZWwsIHRhcmdldCkge1xuXHQgIGlmICh0YXJnZXQuZmlyc3RDaGlsZCkge1xuXHQgICAgYmVmb3JlKGVsLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVwbGFjZSB0YXJnZXQgd2l0aCBlbFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVwbGFjZSh0YXJnZXQsIGVsKSB7XG5cdCAgdmFyIHBhcmVudCA9IHRhcmdldC5wYXJlbnROb2RlO1xuXHQgIGlmIChwYXJlbnQpIHtcblx0ICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQoZWwsIHRhcmdldCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBvbihlbCwgZXZlbnQsIGNiLCB1c2VDYXB0dXJlKSB7XG5cdCAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2IsIHVzZUNhcHR1cmUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBvZmYoZWwsIGV2ZW50LCBjYikge1xuXHQgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvciBJRTkgY29tcGF0OiB3aGVuIGJvdGggY2xhc3MgYW5kIDpjbGFzcyBhcmUgcHJlc2VudFxuXHQgKiBnZXRBdHRyaWJ1dGUoJ2NsYXNzJykgcmV0dXJucyB3cm9uZyB2YWx1ZS4uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRDbGFzcyhlbCkge1xuXHQgIHZhciBjbGFzc25hbWUgPSBlbC5jbGFzc05hbWU7XG5cdCAgaWYgKHR5cGVvZiBjbGFzc25hbWUgPT09ICdvYmplY3QnKSB7XG5cdCAgICBjbGFzc25hbWUgPSBjbGFzc25hbWUuYmFzZVZhbCB8fCAnJztcblx0ICB9XG5cdCAgcmV0dXJuIGNsYXNzbmFtZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluIElFOSwgc2V0QXR0cmlidXRlKCdjbGFzcycpIHdpbGwgcmVzdWx0IGluIGVtcHR5IGNsYXNzXG5cdCAqIGlmIHRoZSBlbGVtZW50IGFsc28gaGFzIHRoZSA6Y2xhc3MgYXR0cmlidXRlOyBIb3dldmVyIGluXG5cdCAqIFBoYW50b21KUywgc2V0dGluZyBgY2xhc3NOYW1lYCBkb2VzIG5vdCB3b3JrIG9uIFNWRyBlbGVtZW50cy4uLlxuXHQgKiBTbyB3ZSBoYXZlIHRvIGRvIGEgY29uZGl0aW9uYWwgY2hlY2sgaGVyZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2V0Q2xhc3MoZWwsIGNscykge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc0lFOSAmJiAhL3N2ZyQvLnRlc3QoZWwubmFtZXNwYWNlVVJJKSkge1xuXHQgICAgZWwuY2xhc3NOYW1lID0gY2xzO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBZGQgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xzKSB7XG5cdCAgaWYgKGVsLmNsYXNzTGlzdCkge1xuXHQgICAgZWwuY2xhc3NMaXN0LmFkZChjbHMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuXHQgICAgaWYgKGN1ci5pbmRleE9mKCcgJyArIGNscyArICcgJykgPCAwKSB7XG5cdCAgICAgIHNldENsYXNzKGVsLCAoY3VyICsgY2xzKS50cmltKCkpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjbHMpIHtcblx0ICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNscyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XG5cdCAgICB2YXIgdGFyID0gJyAnICsgY2xzICsgJyAnO1xuXHQgICAgd2hpbGUgKGN1ci5pbmRleE9mKHRhcikgPj0gMCkge1xuXHQgICAgICBjdXIgPSBjdXIucmVwbGFjZSh0YXIsICcgJyk7XG5cdCAgICB9XG5cdCAgICBzZXRDbGFzcyhlbCwgY3VyLnRyaW0oKSk7XG5cdCAgfVxuXHQgIGlmICghZWwuY2xhc3NOYW1lKSB7XG5cdCAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRXh0cmFjdCByYXcgY29udGVudCBpbnNpZGUgYW4gZWxlbWVudCBpbnRvIGEgdGVtcG9yYXJ5XG5cdCAqIGNvbnRhaW5lciBkaXZcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGFzRnJhZ21lbnRcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RDb250ZW50KGVsLCBhc0ZyYWdtZW50KSB7XG5cdCAgdmFyIGNoaWxkO1xuXHQgIHZhciByYXdDb250ZW50O1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc1RlbXBsYXRlKGVsKSAmJiBpc0ZyYWdtZW50KGVsLmNvbnRlbnQpKSB7XG5cdCAgICBlbCA9IGVsLmNvbnRlbnQ7XG5cdCAgfVxuXHQgIGlmIChlbC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgIHRyaW1Ob2RlKGVsKTtcblx0ICAgIHJhd0NvbnRlbnQgPSBhc0ZyYWdtZW50ID8gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgd2hpbGUgKGNoaWxkID0gZWwuZmlyc3RDaGlsZCkge1xuXHQgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICAgIHJhd0NvbnRlbnQuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmF3Q29udGVudDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRyaW0gcG9zc2libGUgZW1wdHkgaGVhZC90YWlsIHRleHQgYW5kIGNvbW1lbnRcblx0ICogbm9kZXMgaW5zaWRlIGEgcGFyZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0cmltTm9kZShub2RlKSB7XG5cdCAgdmFyIGNoaWxkO1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLXNlcXVlbmNlcyAqL1xuXHQgIHdoaWxlICgoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcblx0ICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuXHQgIH1cblx0ICB3aGlsZSAoKGNoaWxkID0gbm9kZS5sYXN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcblx0ICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuXHQgIH1cblx0ICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlcXVlbmNlcyAqL1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1RyaW1tYWJsZShub2RlKSB7XG5cdCAgcmV0dXJuIG5vZGUgJiYgKG5vZGUubm9kZVR5cGUgPT09IDMgJiYgIW5vZGUuZGF0YS50cmltKCkgfHwgbm9kZS5ub2RlVHlwZSA9PT0gOCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgdGVtcGxhdGUgdGFnLlxuXHQgKiBOb3RlIGlmIHRoZSB0ZW1wbGF0ZSBhcHBlYXJzIGluc2lkZSBhbiBTVkcgaXRzIHRhZ05hbWVcblx0ICogd2lsbCBiZSBpbiBsb3dlcmNhc2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1RlbXBsYXRlKGVsKSB7XG5cdCAgcmV0dXJuIGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndGVtcGxhdGUnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGFuIFwiYW5jaG9yXCIgZm9yIHBlcmZvcm1pbmcgZG9tIGluc2VydGlvbi9yZW1vdmFscy5cblx0ICogVGhpcyBpcyB1c2VkIGluIGEgbnVtYmVyIG9mIHNjZW5hcmlvczpcblx0ICogLSBmcmFnbWVudCBpbnN0YW5jZVxuXHQgKiAtIHYtaHRtbFxuXHQgKiAtIHYtaWZcblx0ICogLSB2LWZvclxuXHQgKiAtIGNvbXBvbmVudFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHBlcnNpc3QgLSBJRSB0cmFzaGVzIGVtcHR5IHRleHROb2RlcyBvblxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZU5vZGUodHJ1ZSksIHNvIGluIGNlcnRhaW5cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZXMgdGhlIGFuY2hvciBuZWVkcyB0byBiZVxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub24tZW1wdHkgdG8gYmUgcGVyc2lzdGVkIGluXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcy5cblx0ICogQHJldHVybiB7Q29tbWVudHxUZXh0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNyZWF0ZUFuY2hvcihjb250ZW50LCBwZXJzaXN0KSB7XG5cdCAgdmFyIGFuY2hvciA9IGNvbmZpZy5kZWJ1ZyA/IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoY29udGVudCkgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShwZXJzaXN0ID8gJyAnIDogJycpO1xuXHQgIGFuY2hvci5fX3ZfYW5jaG9yID0gdHJ1ZTtcblx0ICByZXR1cm4gYW5jaG9yO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmluZCBhIGNvbXBvbmVudCByZWYgYXR0cmlidXRlIHRoYXQgc3RhcnRzIHdpdGggJC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG5cdCAqIEByZXR1cm4ge1N0cmluZ3x1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0dmFyIHJlZlJFID0gL152LXJlZjovO1xuXHRcblx0ZnVuY3Rpb24gZmluZFJlZihub2RlKSB7XG5cdCAgaWYgKG5vZGUuaGFzQXR0cmlidXRlcygpKSB7XG5cdCAgICB2YXIgYXR0cnMgPSBub2RlLmF0dHJpYnV0ZXM7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG5cdCAgICAgIGlmIChyZWZSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgcmV0dXJuIGNhbWVsaXplKG5hbWUucmVwbGFjZShyZWZSRSwgJycpKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE1hcCBhIGZ1bmN0aW9uIHRvIGEgcmFuZ2Ugb2Ygbm9kZXMgLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtOb2RlfSBlbmRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3Bcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYXBOb2RlUmFuZ2Uobm9kZSwgZW5kLCBvcCkge1xuXHQgIHZhciBuZXh0O1xuXHQgIHdoaWxlIChub2RlICE9PSBlbmQpIHtcblx0ICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuXHQgICAgb3Aobm9kZSk7XG5cdCAgICBub2RlID0gbmV4dDtcblx0ICB9XG5cdCAgb3AoZW5kKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhIHJhbmdlIG9mIG5vZGVzIHdpdGggdHJhbnNpdGlvbiwgc3RvcmVcblx0ICogdGhlIG5vZGVzIGluIGEgZnJhZ21lbnQgd2l0aCBjb3JyZWN0IG9yZGVyaW5nLFxuXHQgKiBhbmQgY2FsbCBjYWxsYmFjayB3aGVuIGRvbmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gc3RhcnRcblx0ICogQHBhcmFtIHtOb2RlfSBlbmRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZU5vZGVSYW5nZShzdGFydCwgZW5kLCB2bSwgZnJhZywgY2IpIHtcblx0ICB2YXIgZG9uZSA9IGZhbHNlO1xuXHQgIHZhciByZW1vdmVkID0gMDtcblx0ICB2YXIgbm9kZXMgPSBbXTtcblx0ICBtYXBOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcblx0ICAgIGlmIChub2RlID09PSBlbmQpIGRvbmUgPSB0cnVlO1xuXHQgICAgbm9kZXMucHVzaChub2RlKTtcblx0ICAgIHJlbW92ZVdpdGhUcmFuc2l0aW9uKG5vZGUsIHZtLCBvblJlbW92ZWQpO1xuXHQgIH0pO1xuXHQgIGZ1bmN0aW9uIG9uUmVtb3ZlZCgpIHtcblx0ICAgIHJlbW92ZWQrKztcblx0ICAgIGlmIChkb25lICYmIHJlbW92ZWQgPj0gbm9kZXMubGVuZ3RoKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGVzW2ldKTtcblx0ICAgICAgfVxuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIERvY3VtZW50RnJhZ21lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzRnJhZ21lbnQobm9kZSkge1xuXHQgIHJldHVybiBub2RlICYmIG5vZGUubm9kZVR5cGUgPT09IDExO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmVcblx0ICogb2YgU1ZHIGVsZW1lbnRzIGluIElFIGFzIHdlbGwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldE91dGVySFRNTChlbCkge1xuXHQgIGlmIChlbC5vdXRlckhUTUwpIHtcblx0ICAgIHJldHVybiBlbC5vdXRlckhUTUw7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbC5jbG9uZU5vZGUodHJ1ZSkpO1xuXHQgICAgcmV0dXJuIGNvbnRhaW5lci5pbm5lckhUTUw7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgY29tbW9uVGFnUkUgPSAvXihkaXZ8cHxzcGFufGltZ3xhfGJ8aXxicnx1bHxvbHxsaXxoMXxoMnxoM3xoNHxoNXxoNnxjb2RlfHByZXx0YWJsZXx0aHx0ZHx0cnxmb3JtfGxhYmVsfGlucHV0fHNlbGVjdHxvcHRpb258bmF2fGFydGljbGV8c2VjdGlvbnxoZWFkZXJ8Zm9vdGVyKSQvaTtcblx0dmFyIHJlc2VydmVkVGFnUkUgPSAvXihzbG90fHBhcnRpYWx8Y29tcG9uZW50KSQvaTtcblx0XG5cdHZhciBpc1Vua25vd25FbGVtZW50ID0gdW5kZWZpbmVkO1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIGlzVW5rbm93bkVsZW1lbnQgPSBmdW5jdGlvbiAoZWwsIHRhZykge1xuXHQgICAgaWYgKHRhZy5pbmRleE9mKCctJykgPiAtMSkge1xuXHQgICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODIxMDM2NC8xMDcwMjQ0XG5cdCAgICAgIHJldHVybiBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxVbmtub3duRWxlbWVudCB8fCBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxFbGVtZW50O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuICgvSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpICYmXG5cdCAgICAgICAgLy8gQ2hyb21lIHJldHVybnMgdW5rbm93biBmb3Igc2V2ZXJhbCBIVE1MNSBlbGVtZW50cy5cblx0ICAgICAgICAvLyBodHRwczovL2NvZGUuZ29vZ2xlLmNvbS9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTQwNTI2XG5cdCAgICAgICAgLy8gRmlyZWZveCByZXR1cm5zIHVua25vd24gZm9yIHNvbWUgXCJJbnRlcmFjdGl2ZSBlbGVtZW50cy5cIlxuXHQgICAgICAgICEvXihkYXRhfHRpbWV8cnRjfHJifGRldGFpbHN8ZGlhbG9nfHN1bW1hcnkpJC8udGVzdCh0YWcpXG5cdCAgICAgICk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQsIGlmIHllcyByZXR1cm4gaXRzXG5cdCAqIGNvbXBvbmVudCBpZC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucykge1xuXHQgIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuXHQgIGlmICghY29tbW9uVGFnUkUudGVzdCh0YWcpICYmICFyZXNlcnZlZFRhZ1JFLnRlc3QodGFnKSkge1xuXHQgICAgaWYgKHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykpIHtcblx0ICAgICAgcmV0dXJuIHsgaWQ6IHRhZyB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIGlzID0gaGFzQXR0cnMgJiYgZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcblx0ICAgICAgaWYgKGlzKSB7XG5cdCAgICAgICAgcmV0dXJuIGlzO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB2YXIgZXhwZWN0ZWRUYWcgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwICYmIG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXBbdGFnXTtcblx0ICAgICAgICBpZiAoZXhwZWN0ZWRUYWcpIHtcblx0ICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSAnICsgJ2RpZCB5b3UgbWVhbiA8JyArIGV4cGVjdGVkVGFnICsgJz4/ICcgKyAnSFRNTCBpcyBjYXNlLWluc2Vuc2l0aXZlLCByZW1lbWJlciB0byB1c2Uga2ViYWItY2FzZSBpbiB0ZW1wbGF0ZXMuJyk7XG5cdCAgICAgICAgfSBlbHNlIGlmIChpc1Vua25vd25FbGVtZW50KGVsLCB0YWcpKSB7XG5cdCAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gZGlkIHlvdSAnICsgJ3JlZ2lzdGVyIHRoZSBjb21wb25lbnQgY29ycmVjdGx5PyBGb3IgcmVjdXJzaXZlIGNvbXBvbmVudHMsICcgKyAnbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlIFwibmFtZVwiIG9wdGlvbi4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGhhc0F0dHJzKSB7XG5cdCAgICByZXR1cm4gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgXCJpc1wiIGJpbmRpbmcgZnJvbSBhbiBlbGVtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKSB7XG5cdCAgLy8gZHluYW1pYyBzeW50YXhcblx0ICB2YXIgZXhwID0gZWwuZ2V0QXR0cmlidXRlKCdpcycpO1xuXHQgIGlmIChleHAgIT0gbnVsbCkge1xuXHQgICAgaWYgKHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIGV4cCkpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xuXHQgICAgICByZXR1cm4geyBpZDogZXhwIH07XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGV4cCA9IGdldEJpbmRBdHRyKGVsLCAnaXMnKTtcblx0ICAgIGlmIChleHAgIT0gbnVsbCkge1xuXHQgICAgICByZXR1cm4geyBpZDogZXhwLCBkeW5hbWljOiB0cnVlIH07XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogT3B0aW9uIG92ZXJ3cml0aW5nIHN0cmF0ZWdpZXMgYXJlIGZ1bmN0aW9ucyB0aGF0IGhhbmRsZVxuXHQgKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxuXHQgKiB2YWx1ZSBpbnRvIHRoZSBmaW5hbCB2YWx1ZS5cblx0ICpcblx0ICogQWxsIHN0cmF0ZWd5IGZ1bmN0aW9ucyBmb2xsb3cgdGhlIHNhbWUgc2lnbmF0dXJlOlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHBhcmVudFZhbFxuXHQgKiBAcGFyYW0geyp9IGNoaWxkVmFsXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqL1xuXHRcblx0dmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0LyoqXG5cdCAqIEhlbHBlciB0aGF0IHJlY3Vyc2l2ZWx5IG1lcmdlcyB0d28gZGF0YSBvYmplY3RzIHRvZ2V0aGVyLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlRGF0YSh0bywgZnJvbSkge1xuXHQgIHZhciBrZXksIHRvVmFsLCBmcm9tVmFsO1xuXHQgIGZvciAoa2V5IGluIGZyb20pIHtcblx0ICAgIHRvVmFsID0gdG9ba2V5XTtcblx0ICAgIGZyb21WYWwgPSBmcm9tW2tleV07XG5cdCAgICBpZiAoIWhhc093bih0bywga2V5KSkge1xuXHQgICAgICBzZXQodG8sIGtleSwgZnJvbVZhbCk7XG5cdCAgICB9IGVsc2UgaWYgKGlzT2JqZWN0KHRvVmFsKSAmJiBpc09iamVjdChmcm9tVmFsKSkge1xuXHQgICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdG87XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEYXRhXG5cdCAqL1xuXHRcblx0c3RyYXRzLmRhdGEgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcblx0ICBpZiAoIXZtKSB7XG5cdCAgICAvLyBpbiBhIFZ1ZS5leHRlbmQgbWVyZ2UsIGJvdGggc2hvdWxkIGJlIGZ1bmN0aW9uc1xuXHQgICAgaWYgKCFjaGlsZFZhbCkge1xuXHQgICAgICByZXR1cm4gcGFyZW50VmFsO1xuXHQgICAgfVxuXHQgICAgaWYgKHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImRhdGFcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgKyAnZGVmaW5pdGlvbnMuJywgdm0pO1xuXHQgICAgICByZXR1cm4gcGFyZW50VmFsO1xuXHQgICAgfVxuXHQgICAgaWYgKCFwYXJlbnRWYWwpIHtcblx0ICAgICAgcmV0dXJuIGNoaWxkVmFsO1xuXHQgICAgfVxuXHQgICAgLy8gd2hlbiBwYXJlbnRWYWwgJiBjaGlsZFZhbCBhcmUgYm90aCBwcmVzZW50LFxuXHQgICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG5cdCAgICAvLyBtZXJnZWQgcmVzdWx0IG9mIGJvdGggZnVuY3Rpb25zLi4uIG5vIG5lZWQgdG9cblx0ICAgIC8vIGNoZWNrIGlmIHBhcmVudFZhbCBpcyBhIGZ1bmN0aW9uIGhlcmUgYmVjYXVzZVxuXHQgICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuXG5cdCAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuKCkge1xuXHQgICAgICByZXR1cm4gbWVyZ2VEYXRhKGNoaWxkVmFsLmNhbGwodGhpcyksIHBhcmVudFZhbC5jYWxsKHRoaXMpKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIGlmIChwYXJlbnRWYWwgfHwgY2hpbGRWYWwpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWRJbnN0YW5jZURhdGFGbigpIHtcblx0ICAgICAgLy8gaW5zdGFuY2UgbWVyZ2Vcblx0ICAgICAgdmFyIGluc3RhbmNlRGF0YSA9IHR5cGVvZiBjaGlsZFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkVmFsLmNhbGwodm0pIDogY2hpbGRWYWw7XG5cdCAgICAgIHZhciBkZWZhdWx0RGF0YSA9IHR5cGVvZiBwYXJlbnRWYWwgPT09ICdmdW5jdGlvbicgPyBwYXJlbnRWYWwuY2FsbCh2bSkgOiB1bmRlZmluZWQ7XG5cdCAgICAgIGlmIChpbnN0YW5jZURhdGEpIHtcblx0ICAgICAgICByZXR1cm4gbWVyZ2VEYXRhKGluc3RhbmNlRGF0YSwgZGVmYXVsdERhdGEpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRWxcblx0ICovXG5cdFxuXHRzdHJhdHMuZWwgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcblx0ICBpZiAoIXZtICYmIGNoaWxkVmFsICYmIHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJlbFwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciByZXQgPSBjaGlsZFZhbCB8fCBwYXJlbnRWYWw7XG5cdCAgLy8gaW52b2tlIHRoZSBlbGVtZW50IGZhY3RvcnkgaWYgdGhpcyBpcyBpbnN0YW5jZSBtZXJnZVxuXHQgIHJldHVybiB2bSAmJiB0eXBlb2YgcmV0ID09PSAnZnVuY3Rpb24nID8gcmV0LmNhbGwodm0pIDogcmV0O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEhvb2tzIGFuZCBwYXJhbSBhdHRyaWJ1dGVzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuXHQgKi9cblx0XG5cdHN0cmF0cy5pbml0ID0gc3RyYXRzLmNyZWF0ZWQgPSBzdHJhdHMucmVhZHkgPSBzdHJhdHMuYXR0YWNoZWQgPSBzdHJhdHMuZGV0YWNoZWQgPSBzdHJhdHMuYmVmb3JlQ29tcGlsZSA9IHN0cmF0cy5jb21waWxlZCA9IHN0cmF0cy5iZWZvcmVEZXN0cm95ID0gc3RyYXRzLmRlc3Ryb3llZCA9IHN0cmF0cy5hY3RpdmF0ZSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgcmV0dXJuIGNoaWxkVmFsID8gcGFyZW50VmFsID8gcGFyZW50VmFsLmNvbmNhdChjaGlsZFZhbCkgOiBpc0FycmF5KGNoaWxkVmFsKSA/IGNoaWxkVmFsIDogW2NoaWxkVmFsXSA6IHBhcmVudFZhbDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBc3NldHNcblx0ICpcblx0ICogV2hlbiBhIHZtIGlzIHByZXNlbnQgKGluc3RhbmNlIGNyZWF0aW9uKSwgd2UgbmVlZCB0byBkb1xuXHQgKiBhIHRocmVlLXdheSBtZXJnZSBiZXR3ZWVuIGNvbnN0cnVjdG9yIG9wdGlvbnMsIGluc3RhbmNlXG5cdCAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlQXNzZXRzKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCk7XG5cdCAgcmV0dXJuIGNoaWxkVmFsID8gZXh0ZW5kKHJlcywgZ3VhcmRBcnJheUFzc2V0cyhjaGlsZFZhbCkpIDogcmVzO1xuXHR9XG5cdFxuXHRjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgIHN0cmF0c1t0eXBlICsgJ3MnXSA9IG1lcmdlQXNzZXRzO1xuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBFdmVudHMgJiBXYXRjaGVycy5cblx0ICpcblx0ICogRXZlbnRzICYgd2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZVxuXHQgKiBhbm90aGVyLCBzbyB3ZSBtZXJnZSB0aGVtIGFzIGFycmF5cy5cblx0ICovXG5cdFxuXHRzdHJhdHMud2F0Y2ggPSBzdHJhdHMuZXZlbnRzID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuXHQgIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG5cdCAgdmFyIHJldCA9IHt9O1xuXHQgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG5cdCAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XG5cdCAgICB2YXIgcGFyZW50ID0gcmV0W2tleV07XG5cdCAgICB2YXIgY2hpbGQgPSBjaGlsZFZhbFtrZXldO1xuXHQgICAgaWYgKHBhcmVudCAmJiAhaXNBcnJheShwYXJlbnQpKSB7XG5cdCAgICAgIHBhcmVudCA9IFtwYXJlbnRdO1xuXHQgICAgfVxuXHQgICAgcmV0W2tleV0gPSBwYXJlbnQgPyBwYXJlbnQuY29uY2F0KGNoaWxkKSA6IFtjaGlsZF07XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogT3RoZXIgb2JqZWN0IGhhc2hlcy5cblx0ICovXG5cdFxuXHRzdHJhdHMucHJvcHMgPSBzdHJhdHMubWV0aG9kcyA9IHN0cmF0cy5jb21wdXRlZCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcblx0ICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuXHQgIHZhciByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG5cdCAgZXh0ZW5kKHJldCwgY2hpbGRWYWwpO1xuXHQgIHJldHVybiByZXQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogRGVmYXVsdCBzdHJhdGVneS5cblx0ICovXG5cdFxuXHR2YXIgZGVmYXVsdFN0cmF0ID0gZnVuY3Rpb24gZGVmYXVsdFN0cmF0KHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICByZXR1cm4gY2hpbGRWYWwgPT09IHVuZGVmaW5lZCA/IHBhcmVudFZhbCA6IGNoaWxkVmFsO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE1ha2Ugc3VyZSBjb21wb25lbnQgb3B0aW9ucyBnZXQgY29udmVydGVkIHRvIGFjdHVhbFxuXHQgKiBjb25zdHJ1Y3RvcnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ3VhcmRDb21wb25lbnRzKG9wdGlvbnMpIHtcblx0ICBpZiAob3B0aW9ucy5jb21wb25lbnRzKSB7XG5cdCAgICB2YXIgY29tcG9uZW50cyA9IG9wdGlvbnMuY29tcG9uZW50cyA9IGd1YXJkQXJyYXlBc3NldHMob3B0aW9ucy5jb21wb25lbnRzKTtcblx0ICAgIHZhciBpZHMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRzKTtcblx0ICAgIHZhciBkZWY7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB2YXIgbWFwID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCA9IHt9O1xuXHQgICAgfVxuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBpZHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBrZXkgPSBpZHNbaV07XG5cdCAgICAgIGlmIChjb21tb25UYWdSRS50ZXN0KGtleSkgfHwgcmVzZXJ2ZWRUYWdSRS50ZXN0KGtleSkpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArICdpZDogJyArIGtleSk7XG5cdCAgICAgICAgY29udGludWU7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gcmVjb3JkIGEgYWxsIGxvd2VyY2FzZSA8LT4ga2ViYWItY2FzZSBtYXBwaW5nIGZvclxuXHQgICAgICAvLyBwb3NzaWJsZSBjdXN0b20gZWxlbWVudCBjYXNlIGVycm9yIHdhcm5pbmdcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICBtYXBba2V5LnJlcGxhY2UoLy0vZywgJycpLnRvTG93ZXJDYXNlKCldID0gaHlwaGVuYXRlKGtleSk7XG5cdCAgICAgIH1cblx0ICAgICAgZGVmID0gY29tcG9uZW50c1trZXldO1xuXHQgICAgICBpZiAoaXNQbGFpbk9iamVjdChkZWYpKSB7XG5cdCAgICAgICAgY29tcG9uZW50c1trZXldID0gVnVlLmV4dGVuZChkZWYpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRW5zdXJlIGFsbCBwcm9wcyBvcHRpb24gc3ludGF4IGFyZSBub3JtYWxpemVkIGludG8gdGhlXG5cdCAqIE9iamVjdC1iYXNlZCBmb3JtYXQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ3VhcmRQcm9wcyhvcHRpb25zKSB7XG5cdCAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcblx0ICB2YXIgaSwgdmFsO1xuXHQgIGlmIChpc0FycmF5KHByb3BzKSkge1xuXHQgICAgb3B0aW9ucy5wcm9wcyA9IHt9O1xuXHQgICAgaSA9IHByb3BzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFsID0gcHJvcHNbaV07XG5cdCAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgIG9wdGlvbnMucHJvcHNbdmFsXSA9IG51bGw7XG5cdCAgICAgIH0gZWxzZSBpZiAodmFsLm5hbWUpIHtcblx0ICAgICAgICBvcHRpb25zLnByb3BzW3ZhbC5uYW1lXSA9IHZhbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwcm9wcykpIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YWwgPSBwcm9wc1trZXlzW2ldXTtcblx0ICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICBwcm9wc1trZXlzW2ldXSA9IHsgdHlwZTogdmFsIH07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHdWFyZCBhbiBBcnJheS1mb3JtYXQgYXNzZXRzIG9wdGlvbiBhbmQgY29udmVydGVkIGl0XG5cdCAqIGludG8gdGhlIGtleS12YWx1ZSBPYmplY3QgZm9ybWF0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gYXNzZXRzXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBndWFyZEFycmF5QXNzZXRzKGFzc2V0cykge1xuXHQgIGlmIChpc0FycmF5KGFzc2V0cykpIHtcblx0ICAgIHZhciByZXMgPSB7fTtcblx0ICAgIHZhciBpID0gYXNzZXRzLmxlbmd0aDtcblx0ICAgIHZhciBhc3NldDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgYXNzZXQgPSBhc3NldHNbaV07XG5cdCAgICAgIHZhciBpZCA9IHR5cGVvZiBhc3NldCA9PT0gJ2Z1bmN0aW9uJyA/IGFzc2V0Lm9wdGlvbnMgJiYgYXNzZXQub3B0aW9ucy5uYW1lIHx8IGFzc2V0LmlkIDogYXNzZXQubmFtZSB8fCBhc3NldC5pZDtcblx0ICAgICAgaWYgKCFpZCkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXJyYXktc3ludGF4IGFzc2V0cyBtdXN0IHByb3ZpZGUgYSBcIm5hbWVcIiBvciBcImlkXCIgZmllbGQuJyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVzW2lkXSA9IGFzc2V0O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzO1xuXHQgIH1cblx0ICByZXR1cm4gYXNzZXRzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWVyZ2UgdHdvIG9wdGlvbiBvYmplY3RzIGludG8gYSBuZXcgb25lLlxuXHQgKiBDb3JlIHV0aWxpdHkgdXNlZCBpbiBib3RoIGluc3RhbnRpYXRpb24gYW5kIGluaGVyaXRhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gcGFyZW50XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjaGlsZFxuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXSAtIGlmIHZtIGlzIHByZXNlbnQsIGluZGljYXRlcyB0aGlzIGlzXG5cdCAqICAgICAgICAgICAgICAgICAgICAgYW4gaW5zdGFudGlhdGlvbiBtZXJnZS5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZCwgdm0pIHtcblx0ICBndWFyZENvbXBvbmVudHMoY2hpbGQpO1xuXHQgIGd1YXJkUHJvcHMoY2hpbGQpO1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBpZiAoY2hpbGQucHJvcHNEYXRhICYmICF2bSkge1xuXHQgICAgICB3YXJuKCdwcm9wc0RhdGEgY2FuIG9ubHkgYmUgdXNlZCBhcyBhbiBpbnN0YW50aWF0aW9uIG9wdGlvbi4nKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIG9wdGlvbnMgPSB7fTtcblx0ICB2YXIga2V5O1xuXHQgIGlmIChjaGlsZFsnZXh0ZW5kcyddKSB7XG5cdCAgICBwYXJlbnQgPSB0eXBlb2YgY2hpbGRbJ2V4dGVuZHMnXSA9PT0gJ2Z1bmN0aW9uJyA/IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10ub3B0aW9ucywgdm0pIDogbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXSwgdm0pO1xuXHQgIH1cblx0ICBpZiAoY2hpbGQubWl4aW5zKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkLm1peGlucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIG1peGluID0gY2hpbGQubWl4aW5zW2ldO1xuXHQgICAgICB2YXIgbWl4aW5PcHRpb25zID0gbWl4aW4ucHJvdG90eXBlIGluc3RhbmNlb2YgVnVlID8gbWl4aW4ub3B0aW9ucyA6IG1peGluO1xuXHQgICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBtaXhpbk9wdGlvbnMsIHZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZm9yIChrZXkgaW4gcGFyZW50KSB7XG5cdCAgICBtZXJnZUZpZWxkKGtleSk7XG5cdCAgfVxuXHQgIGZvciAoa2V5IGluIGNoaWxkKSB7XG5cdCAgICBpZiAoIWhhc093bihwYXJlbnQsIGtleSkpIHtcblx0ICAgICAgbWVyZ2VGaWVsZChrZXkpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmdW5jdGlvbiBtZXJnZUZpZWxkKGtleSkge1xuXHQgICAgdmFyIHN0cmF0ID0gc3RyYXRzW2tleV0gfHwgZGVmYXVsdFN0cmF0O1xuXHQgICAgb3B0aW9uc1trZXldID0gc3RyYXQocGFyZW50W2tleV0sIGNoaWxkW2tleV0sIHZtLCBrZXkpO1xuXHQgIH1cblx0ICByZXR1cm4gb3B0aW9ucztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlc29sdmUgYW4gYXNzZXQuXG5cdCAqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCBiZWNhdXNlIGNoaWxkIGluc3RhbmNlcyBuZWVkIGFjY2Vzc1xuXHQgKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHdhcm5NaXNzaW5nXG5cdCAqIEByZXR1cm4ge09iamVjdHxGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlQXNzZXQob3B0aW9ucywgdHlwZSwgaWQsIHdhcm5NaXNzaW5nKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHR5cGVvZiBpZCAhPT0gJ3N0cmluZycpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGFzc2V0cyA9IG9wdGlvbnNbdHlwZV07XG5cdCAgdmFyIGNhbWVsaXplZElkO1xuXHQgIHZhciByZXMgPSBhc3NldHNbaWRdIHx8XG5cdCAgLy8gY2FtZWxDYXNlIElEXG5cdCAgYXNzZXRzW2NhbWVsaXplZElkID0gY2FtZWxpemUoaWQpXSB8fFxuXHQgIC8vIFBhc2NhbCBDYXNlIElEXG5cdCAgYXNzZXRzW2NhbWVsaXplZElkLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWxpemVkSWQuc2xpY2UoMSldO1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcblx0ICAgIHdhcm4oJ0ZhaWxlZCB0byByZXNvbHZlICcgKyB0eXBlLnNsaWNlKDAsIC0xKSArICc6ICcgKyBpZCwgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdHZhciB1aWQkMSA9IDA7XG5cdFxuXHQvKipcblx0ICogQSBkZXAgaXMgYW4gb2JzZXJ2YWJsZSB0aGF0IGNhbiBoYXZlIG11bHRpcGxlXG5cdCAqIGRpcmVjdGl2ZXMgc3Vic2NyaWJpbmcgdG8gaXQuXG5cdCAqXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gRGVwKCkge1xuXHQgIHRoaXMuaWQgPSB1aWQkMSsrO1xuXHQgIHRoaXMuc3VicyA9IFtdO1xuXHR9XG5cdFxuXHQvLyB0aGUgY3VycmVudCB0YXJnZXQgd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQuXG5cdC8vIHRoaXMgaXMgZ2xvYmFsbHkgdW5pcXVlIGJlY2F1c2UgdGhlcmUgY291bGQgYmUgb25seSBvbmVcblx0Ly8gd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQgYXQgYW55IHRpbWUuXG5cdERlcC50YXJnZXQgPSBudWxsO1xuXHRcblx0LyoqXG5cdCAqIEFkZCBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG5cdCAgdGhpcy5zdWJzLnB1c2goc3ViKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cblx0ICpcblx0ICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUucmVtb3ZlU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuXHQgIHRoaXMuc3Vicy4kcmVtb3ZlKHN1Yik7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWRkIHNlbGYgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSB0YXJnZXQgd2F0Y2hlci5cblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcblx0ICBEZXAudGFyZ2V0LmFkZERlcCh0aGlzKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBOb3RpZnkgYWxsIHN1YnNjcmliZXJzIG9mIGEgbmV3IHZhbHVlLlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUubm90aWZ5ID0gZnVuY3Rpb24gKCkge1xuXHQgIC8vIHN0YWJsaXplIHRoZSBzdWJzY3JpYmVyIGxpc3QgZmlyc3Rcblx0ICB2YXIgc3VicyA9IHRvQXJyYXkodGhpcy5zdWJzKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHN1YnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBzdWJzW2ldLnVwZGF0ZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xuXHR2YXIgYXJyYXlNZXRob2RzID0gT2JqZWN0LmNyZWF0ZShhcnJheVByb3RvKVxuXHRcblx0LyoqXG5cdCAqIEludGVyY2VwdCBtdXRhdGluZyBtZXRob2RzIGFuZCBlbWl0IGV2ZW50c1xuXHQgKi9cblx0XG5cdDtbJ3B1c2gnLCAncG9wJywgJ3NoaWZ0JywgJ3Vuc2hpZnQnLCAnc3BsaWNlJywgJ3NvcnQnLCAncmV2ZXJzZSddLmZvckVhY2goZnVuY3Rpb24gKG1ldGhvZCkge1xuXHQgIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZFxuXHQgIHZhciBvcmlnaW5hbCA9IGFycmF5UHJvdG9bbWV0aG9kXTtcblx0ICBkZWYoYXJyYXlNZXRob2RzLCBtZXRob2QsIGZ1bmN0aW9uIG11dGF0b3IoKSB7XG5cdCAgICAvLyBhdm9pZCBsZWFraW5nIGFyZ3VtZW50czpcblx0ICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Nsb3N1cmUtd2l0aC1hcmd1bWVudHNcblx0ICAgIHZhciBpID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkpO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBhcmdzW2ldID0gYXJndW1lbnRzW2ldO1xuXHQgICAgfVxuXHQgICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgdmFyIG9iID0gdGhpcy5fX29iX187XG5cdCAgICB2YXIgaW5zZXJ0ZWQ7XG5cdCAgICBzd2l0Y2ggKG1ldGhvZCkge1xuXHQgICAgICBjYXNlICdwdXNoJzpcblx0ICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ3Vuc2hpZnQnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncztcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnc3BsaWNlJzpcblx0ICAgICAgICBpbnNlcnRlZCA9IGFyZ3Muc2xpY2UoMik7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgICBpZiAoaW5zZXJ0ZWQpIG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7XG5cdCAgICAvLyBub3RpZnkgY2hhbmdlXG5cdCAgICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH0pO1xuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBTd2FwIHRoZSBlbGVtZW50IGF0IHRoZSBnaXZlbiBpbmRleCB3aXRoIGEgbmV3IHZhbHVlXG5cdCAqIGFuZCBlbWl0cyBjb3JyZXNwb25kaW5nIGV2ZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICogQHJldHVybiB7Kn0gLSByZXBsYWNlZCBlbGVtZW50XG5cdCAqL1xuXHRcblx0ZGVmKGFycmF5UHJvdG8sICckc2V0JywgZnVuY3Rpb24gJHNldChpbmRleCwgdmFsKSB7XG5cdCAgaWYgKGluZGV4ID49IHRoaXMubGVuZ3RoKSB7XG5cdCAgICB0aGlzLmxlbmd0aCA9IE51bWJlcihpbmRleCkgKyAxO1xuXHQgIH1cblx0ICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEsIHZhbClbMF07XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlbmllbmNlIG1ldGhvZCB0byByZW1vdmUgdGhlIGVsZW1lbnQgYXQgZ2l2ZW4gaW5kZXggb3IgdGFyZ2V0IGVsZW1lbnQgcmVmZXJlbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IGl0ZW1cblx0ICovXG5cdFxuXHRkZWYoYXJyYXlQcm90bywgJyRyZW1vdmUnLCBmdW5jdGlvbiAkcmVtb3ZlKGl0ZW0pIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm47XG5cdCAgdmFyIGluZGV4ID0gaW5kZXhPZih0aGlzLCBpdGVtKTtcblx0ICBpZiAoaW5kZXggPiAtMSkge1xuXHQgICAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxKTtcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIGFycmF5S2V5cyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGFycmF5TWV0aG9kcyk7XG5cdFxuXHQvKipcblx0ICogQnkgZGVmYXVsdCwgd2hlbiBhIHJlYWN0aXZlIHByb3BlcnR5IGlzIHNldCwgdGhlIG5ldyB2YWx1ZSBpc1xuXHQgKiBhbHNvIGNvbnZlcnRlZCB0byBiZWNvbWUgcmVhY3RpdmUuIEhvd2V2ZXIgaW4gY2VydGFpbiBjYXNlcywgZS5nLlxuXHQgKiB2LWZvciBzY29wZSBhbGlhcyBhbmQgcHJvcHMsIHdlIGRvbid0IHdhbnQgdG8gZm9yY2UgY29udmVyc2lvblxuXHQgKiBiZWNhdXNlIHRoZSB2YWx1ZSBtYXkgYmUgYSBuZXN0ZWQgdmFsdWUgdW5kZXIgYSBmcm96ZW4gZGF0YSBzdHJ1Y3R1cmUuXG5cdCAqXG5cdCAqIFNvIHdoZW5ldmVyIHdlIHdhbnQgdG8gc2V0IGEgcmVhY3RpdmUgcHJvcGVydHkgd2l0aG91dCBmb3JjaW5nXG5cdCAqIGNvbnZlcnNpb24gb24gdGhlIG5ldyB2YWx1ZSwgd2Ugd3JhcCB0aGF0IGNhbGwgaW5zaWRlIHRoaXMgZnVuY3Rpb24uXG5cdCAqL1xuXHRcblx0dmFyIHNob3VsZENvbnZlcnQgPSB0cnVlO1xuXHRcblx0ZnVuY3Rpb24gd2l0aG91dENvbnZlcnNpb24oZm4pIHtcblx0ICBzaG91bGRDb252ZXJ0ID0gZmFsc2U7XG5cdCAgZm4oKTtcblx0ICBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE9ic2VydmVyIGNsYXNzIHRoYXQgYXJlIGF0dGFjaGVkIHRvIGVhY2ggb2JzZXJ2ZWRcblx0ICogb2JqZWN0LiBPbmNlIGF0dGFjaGVkLCB0aGUgb2JzZXJ2ZXIgY29udmVydHMgdGFyZ2V0XG5cdCAqIG9iamVjdCdzIHByb3BlcnR5IGtleXMgaW50byBnZXR0ZXIvc2V0dGVycyB0aGF0XG5cdCAqIGNvbGxlY3QgZGVwZW5kZW5jaWVzIGFuZCBkaXNwYXRjaGVzIHVwZGF0ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSB2YWx1ZVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBPYnNlcnZlcih2YWx1ZSkge1xuXHQgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICB0aGlzLmRlcCA9IG5ldyBEZXAoKTtcblx0ICBkZWYodmFsdWUsICdfX29iX18nLCB0aGlzKTtcblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIHZhciBhdWdtZW50ID0gaGFzUHJvdG8gPyBwcm90b0F1Z21lbnQgOiBjb3B5QXVnbWVudDtcblx0ICAgIGF1Z21lbnQodmFsdWUsIGFycmF5TWV0aG9kcywgYXJyYXlLZXlzKTtcblx0ICAgIHRoaXMub2JzZXJ2ZUFycmF5KHZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy53YWxrKHZhbHVlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEluc3RhbmNlIG1ldGhvZHNcblx0XG5cdC8qKlxuXHQgKiBXYWxrIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBhbmQgY29udmVydCB0aGVtIGludG9cblx0ICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuXG5cdCAqIHZhbHVlIHR5cGUgaXMgT2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiAob2JqKSB7XG5cdCAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhvYmopO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHRoaXMuY29udmVydChrZXlzW2ldLCBvYmpba2V5c1tpXV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBPYnNlcnZlIGEgbGlzdCBvZiBBcnJheSBpdGVtcy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gaXRlbXNcblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZUFycmF5ID0gZnVuY3Rpb24gKGl0ZW1zKSB7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBpdGVtcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG9ic2VydmUoaXRlbXNbaV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgcHJvcGVydHkgaW50byBnZXR0ZXIvc2V0dGVyIHNvIHdlIGNhbiBlbWl0XG5cdCAqIHRoZSBldmVudHMgd2hlbiB0aGUgcHJvcGVydHkgaXMgYWNjZXNzZWQvY2hhbmdlZC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5jb252ZXJ0ID0gZnVuY3Rpb24gKGtleSwgdmFsKSB7XG5cdCAgZGVmaW5lUmVhY3RpdmUodGhpcy52YWx1ZSwga2V5LCB2YWwpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFkZCBhbiBvd25lciB2bSwgc28gdGhhdCB3aGVuICRzZXQvJGRlbGV0ZSBtdXRhdGlvbnNcblx0ICogaGFwcGVuIHdlIGNhbiBub3RpZnkgb3duZXIgdm1zIHRvIHByb3h5IHRoZSBrZXlzIGFuZFxuXHQgKiBkaWdlc3QgdGhlIHdhdGNoZXJzLiBUaGlzIGlzIG9ubHkgY2FsbGVkIHdoZW4gdGhlIG9iamVjdFxuXHQgKiBpcyBvYnNlcnZlZCBhcyBhbiBpbnN0YW5jZSdzIHJvb3QgJGRhdGEuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5hZGRWbSA9IGZ1bmN0aW9uICh2bSkge1xuXHQgICh0aGlzLnZtcyB8fCAodGhpcy52bXMgPSBbXSkpLnB1c2godm0pO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhbiBvd25lciB2bS4gVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0IGlzXG5cdCAqIHN3YXBwZWQgb3V0IGFzIGFuIGluc3RhbmNlJ3MgJGRhdGEgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUucmVtb3ZlVm0gPSBmdW5jdGlvbiAodm0pIHtcblx0ICB0aGlzLnZtcy4kcmVtb3ZlKHZtKTtcblx0fTtcblx0XG5cdC8vIGhlbHBlcnNcblx0XG5cdC8qKlxuXHQgKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgaW50ZXJjZXB0aW5nXG5cdCAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcblx0ICogQHBhcmFtIHtPYmplY3R9IHNyY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb3RvQXVnbWVudCh0YXJnZXQsIHNyYykge1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cdCAgdGFyZ2V0Ll9fcHJvdG9fXyA9IHNyYztcblx0ICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovXG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgZGVmaW5pbmdcblx0ICogaGlkZGVuIHByb3BlcnRpZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3RvXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29weUF1Z21lbnQodGFyZ2V0LCBzcmMsIGtleXMpIHtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB2YXIga2V5ID0ga2V5c1tpXTtcblx0ICAgIGRlZih0YXJnZXQsIGtleSwgc3JjW2tleV0pO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEF0dGVtcHQgdG8gY3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGZvciBhIHZhbHVlLFxuXHQgKiByZXR1cm5zIHRoZSBuZXcgb2JzZXJ2ZXIgaWYgc3VjY2Vzc2Z1bGx5IG9ic2VydmVkLFxuXHQgKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuXHQgKiBAcmV0dXJuIHtPYnNlcnZlcnx1bmRlZmluZWR9XG5cdCAqIEBzdGF0aWNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBvYnNlcnZlKHZhbHVlLCB2bSkge1xuXHQgIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgb2I7XG5cdCAgaWYgKGhhc093bih2YWx1ZSwgJ19fb2JfXycpICYmIHZhbHVlLl9fb2JfXyBpbnN0YW5jZW9mIE9ic2VydmVyKSB7XG5cdCAgICBvYiA9IHZhbHVlLl9fb2JfXztcblx0ICB9IGVsc2UgaWYgKHNob3VsZENvbnZlcnQgJiYgKGlzQXJyYXkodmFsdWUpIHx8IGlzUGxhaW5PYmplY3QodmFsdWUpKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSAmJiAhdmFsdWUuX2lzVnVlKSB7XG5cdCAgICBvYiA9IG5ldyBPYnNlcnZlcih2YWx1ZSk7XG5cdCAgfVxuXHQgIGlmIChvYiAmJiB2bSkge1xuXHQgICAgb2IuYWRkVm0odm0pO1xuXHQgIH1cblx0ICByZXR1cm4gb2I7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWZpbmUgYSByZWFjdGl2ZSBwcm9wZXJ0eSBvbiBhbiBPYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRlZmluZVJlYWN0aXZlKG9iaiwga2V5LCB2YWwpIHtcblx0ICB2YXIgZGVwID0gbmV3IERlcCgpO1xuXHRcblx0ICB2YXIgcHJvcGVydHkgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG9iaiwga2V5KTtcblx0ICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0XG5cdCAgLy8gY2F0ZXIgZm9yIHByZS1kZWZpbmVkIGdldHRlci9zZXR0ZXJzXG5cdCAgdmFyIGdldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LmdldDtcblx0ICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0O1xuXHRcblx0ICB2YXIgY2hpbGRPYiA9IG9ic2VydmUodmFsKTtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcblx0ICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlR2V0dGVyKCkge1xuXHQgICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuXHQgICAgICBpZiAoRGVwLnRhcmdldCkge1xuXHQgICAgICAgIGRlcC5kZXBlbmQoKTtcblx0ICAgICAgICBpZiAoY2hpbGRPYikge1xuXHQgICAgICAgICAgY2hpbGRPYi5kZXAuZGVwZW5kKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICAgICAgZm9yICh2YXIgZSwgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICAgICAgZSA9IHZhbHVlW2ldO1xuXHQgICAgICAgICAgICBlICYmIGUuX19vYl9fICYmIGUuX19vYl9fLmRlcC5kZXBlbmQoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIobmV3VmFsKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG5cdCAgICAgIGlmIChuZXdWYWwgPT09IHZhbHVlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChzZXR0ZXIpIHtcblx0ICAgICAgICBzZXR0ZXIuY2FsbChvYmosIG5ld1ZhbCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdmFsID0gbmV3VmFsO1xuXHQgICAgICB9XG5cdCAgICAgIGNoaWxkT2IgPSBvYnNlcnZlKG5ld1ZhbCk7XG5cdCAgICAgIGRlcC5ub3RpZnkoKTtcblx0ICAgIH1cblx0ICB9KTtcblx0fVxuXHRcblx0XG5cdFxuXHR2YXIgdXRpbCA9IE9iamVjdC5mcmVlemUoe1xuXHRcdGRlZmluZVJlYWN0aXZlOiBkZWZpbmVSZWFjdGl2ZSxcblx0XHRzZXQ6IHNldCxcblx0XHRkZWw6IGRlbCxcblx0XHRoYXNPd246IGhhc093bixcblx0XHRpc0xpdGVyYWw6IGlzTGl0ZXJhbCxcblx0XHRpc1Jlc2VydmVkOiBpc1Jlc2VydmVkLFxuXHRcdF90b1N0cmluZzogX3RvU3RyaW5nLFxuXHRcdHRvTnVtYmVyOiB0b051bWJlcixcblx0XHR0b0Jvb2xlYW46IHRvQm9vbGVhbixcblx0XHRzdHJpcFF1b3Rlczogc3RyaXBRdW90ZXMsXG5cdFx0Y2FtZWxpemU6IGNhbWVsaXplLFxuXHRcdGh5cGhlbmF0ZTogaHlwaGVuYXRlLFxuXHRcdGNsYXNzaWZ5OiBjbGFzc2lmeSxcblx0XHRiaW5kOiBiaW5kLFxuXHRcdHRvQXJyYXk6IHRvQXJyYXksXG5cdFx0ZXh0ZW5kOiBleHRlbmQsXG5cdFx0aXNPYmplY3Q6IGlzT2JqZWN0LFxuXHRcdGlzUGxhaW5PYmplY3Q6IGlzUGxhaW5PYmplY3QsXG5cdFx0ZGVmOiBkZWYsXG5cdFx0ZGVib3VuY2U6IF9kZWJvdW5jZSxcblx0XHRpbmRleE9mOiBpbmRleE9mLFxuXHRcdGNhbmNlbGxhYmxlOiBjYW5jZWxsYWJsZSxcblx0XHRsb29zZUVxdWFsOiBsb29zZUVxdWFsLFxuXHRcdGlzQXJyYXk6IGlzQXJyYXksXG5cdFx0aGFzUHJvdG86IGhhc1Byb3RvLFxuXHRcdGluQnJvd3NlcjogaW5Ccm93c2VyLFxuXHRcdGRldnRvb2xzOiBkZXZ0b29scyxcblx0XHRpc0lFOiBpc0lFLFxuXHRcdGlzSUU5OiBpc0lFOSxcblx0XHRpc0FuZHJvaWQ6IGlzQW5kcm9pZCxcblx0XHRpc0lvczogaXNJb3MsXG5cdFx0aW9zVmVyc2lvbk1hdGNoOiBpb3NWZXJzaW9uTWF0Y2gsXG5cdFx0aW9zVmVyc2lvbjogaW9zVmVyc2lvbixcblx0XHRoYXNNdXRhdGlvbk9ic2VydmVyQnVnOiBoYXNNdXRhdGlvbk9ic2VydmVyQnVnLFxuXHRcdGdldCB0cmFuc2l0aW9uUHJvcCAoKSB7IHJldHVybiB0cmFuc2l0aW9uUHJvcDsgfSxcblx0XHRnZXQgdHJhbnNpdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIHRyYW5zaXRpb25FbmRFdmVudDsgfSxcblx0XHRnZXQgYW5pbWF0aW9uUHJvcCAoKSB7IHJldHVybiBhbmltYXRpb25Qcm9wOyB9LFxuXHRcdGdldCBhbmltYXRpb25FbmRFdmVudCAoKSB7IHJldHVybiBhbmltYXRpb25FbmRFdmVudDsgfSxcblx0XHRuZXh0VGljazogbmV4dFRpY2ssXG5cdFx0Z2V0IF9TZXQgKCkgeyByZXR1cm4gX1NldDsgfSxcblx0XHRxdWVyeTogcXVlcnksXG5cdFx0aW5Eb2M6IGluRG9jLFxuXHRcdGdldEF0dHI6IGdldEF0dHIsXG5cdFx0Z2V0QmluZEF0dHI6IGdldEJpbmRBdHRyLFxuXHRcdGhhc0JpbmRBdHRyOiBoYXNCaW5kQXR0cixcblx0XHRiZWZvcmU6IGJlZm9yZSxcblx0XHRhZnRlcjogYWZ0ZXIsXG5cdFx0cmVtb3ZlOiByZW1vdmUsXG5cdFx0cHJlcGVuZDogcHJlcGVuZCxcblx0XHRyZXBsYWNlOiByZXBsYWNlLFxuXHRcdG9uOiBvbixcblx0XHRvZmY6IG9mZixcblx0XHRzZXRDbGFzczogc2V0Q2xhc3MsXG5cdFx0YWRkQ2xhc3M6IGFkZENsYXNzLFxuXHRcdHJlbW92ZUNsYXNzOiByZW1vdmVDbGFzcyxcblx0XHRleHRyYWN0Q29udGVudDogZXh0cmFjdENvbnRlbnQsXG5cdFx0dHJpbU5vZGU6IHRyaW1Ob2RlLFxuXHRcdGlzVGVtcGxhdGU6IGlzVGVtcGxhdGUsXG5cdFx0Y3JlYXRlQW5jaG9yOiBjcmVhdGVBbmNob3IsXG5cdFx0ZmluZFJlZjogZmluZFJlZixcblx0XHRtYXBOb2RlUmFuZ2U6IG1hcE5vZGVSYW5nZSxcblx0XHRyZW1vdmVOb2RlUmFuZ2U6IHJlbW92ZU5vZGVSYW5nZSxcblx0XHRpc0ZyYWdtZW50OiBpc0ZyYWdtZW50LFxuXHRcdGdldE91dGVySFRNTDogZ2V0T3V0ZXJIVE1MLFxuXHRcdG1lcmdlT3B0aW9uczogbWVyZ2VPcHRpb25zLFxuXHRcdHJlc29sdmVBc3NldDogcmVzb2x2ZUFzc2V0LFxuXHRcdGNoZWNrQ29tcG9uZW50QXR0cjogY2hlY2tDb21wb25lbnRBdHRyLFxuXHRcdGNvbW1vblRhZ1JFOiBjb21tb25UYWdSRSxcblx0XHRyZXNlcnZlZFRhZ1JFOiByZXNlcnZlZFRhZ1JFLFxuXHRcdGdldCB3YXJuICgpIHsgcmV0dXJuIHdhcm47IH1cblx0fSk7XG5cdFxuXHR2YXIgdWlkID0gMDtcblx0XG5cdGZ1bmN0aW9uIGluaXRNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogVGhlIG1haW4gaW5pdCBzZXF1ZW5jZS4gVGhpcyBpcyBjYWxsZWQgZm9yIGV2ZXJ5XG5cdCAgICogaW5zdGFuY2UsIGluY2x1ZGluZyBvbmVzIHRoYXQgYXJlIGNyZWF0ZWQgZnJvbSBleHRlbmRlZFxuXHQgICAqIGNvbnN0cnVjdG9ycy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gdGhpcyBvcHRpb25zIG9iamVjdCBzaG91bGQgYmVcblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoZSByZXN1bHQgb2YgbWVyZ2luZyBjbGFzc1xuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyBhbmQgdGhlIG9wdGlvbnMgcGFzc2VkXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0byB0aGUgY29uc3RydWN0b3IuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuXHQgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cdFxuXHQgICAgdGhpcy4kZWwgPSBudWxsO1xuXHQgICAgdGhpcy4kcGFyZW50ID0gb3B0aW9ucy5wYXJlbnQ7XG5cdCAgICB0aGlzLiRyb290ID0gdGhpcy4kcGFyZW50ID8gdGhpcy4kcGFyZW50LiRyb290IDogdGhpcztcblx0ICAgIHRoaXMuJGNoaWxkcmVuID0gW107XG5cdCAgICB0aGlzLiRyZWZzID0ge307IC8vIGNoaWxkIHZtIHJlZmVyZW5jZXNcblx0ICAgIHRoaXMuJGVscyA9IHt9OyAvLyBlbGVtZW50IHJlZmVyZW5jZXNcblx0ICAgIHRoaXMuX3dhdGNoZXJzID0gW107IC8vIGFsbCB3YXRjaGVycyBhcyBhbiBhcnJheVxuXHQgICAgdGhpcy5fZGlyZWN0aXZlcyA9IFtdOyAvLyBhbGwgZGlyZWN0aXZlc1xuXHRcblx0ICAgIC8vIGEgdWlkXG5cdCAgICB0aGlzLl91aWQgPSB1aWQrKztcblx0XG5cdCAgICAvLyBhIGZsYWcgdG8gYXZvaWQgdGhpcyBiZWluZyBvYnNlcnZlZFxuXHQgICAgdGhpcy5faXNWdWUgPSB0cnVlO1xuXHRcblx0ICAgIC8vIGV2ZW50cyBib29ra2VlcGluZ1xuXHQgICAgdGhpcy5fZXZlbnRzID0ge307IC8vIHJlZ2lzdGVyZWQgY2FsbGJhY2tzXG5cdCAgICB0aGlzLl9ldmVudHNDb3VudCA9IHt9OyAvLyBmb3IgJGJyb2FkY2FzdCBvcHRpbWl6YXRpb25cblx0XG5cdCAgICAvLyBmcmFnbWVudCBpbnN0YW5jZSBwcm9wZXJ0aWVzXG5cdCAgICB0aGlzLl9pc0ZyYWdtZW50ID0gZmFsc2U7XG5cdCAgICB0aGlzLl9mcmFnbWVudCA9IC8vIEB0eXBlIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgICAgdGhpcy5fZnJhZ21lbnRTdGFydCA9IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cdCAgICB0aGlzLl9mcmFnbWVudEVuZCA9IG51bGw7IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cdFxuXHQgICAgLy8gbGlmZWN5Y2xlIHN0YXRlXG5cdCAgICB0aGlzLl9pc0NvbXBpbGVkID0gdGhpcy5faXNEZXN0cm95ZWQgPSB0aGlzLl9pc1JlYWR5ID0gdGhpcy5faXNBdHRhY2hlZCA9IHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0aGlzLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcblx0ICAgIHRoaXMuX3VubGlua0ZuID0gbnVsbDtcblx0XG5cdCAgICAvLyBjb250ZXh0OlxuXHQgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuXHQgICAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXG5cdCAgICAvLyBhbmQgaXRzIGhvc3QuXG5cdCAgICB0aGlzLl9jb250ZXh0ID0gb3B0aW9ucy5fY29udGV4dCB8fCB0aGlzLiRwYXJlbnQ7XG5cdFxuXHQgICAgLy8gc2NvcGU6XG5cdCAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuXHQgICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcblx0ICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG5cdCAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG5cdCAgICB0aGlzLl9zY29wZSA9IG9wdGlvbnMuX3Njb3BlO1xuXHRcblx0ICAgIC8vIGZyYWdtZW50OlxuXHQgICAgLy8gaWYgdGhpcyBpbnN0YW5jZSBpcyBjb21waWxlZCBpbnNpZGUgYSBGcmFnbWVudCwgaXRcblx0ICAgIC8vIG5lZWRzIHRvIHJlaWdzdGVyIGl0c2VsZiBhcyBhIGNoaWxkIG9mIHRoYXQgZnJhZ21lbnRcblx0ICAgIC8vIGZvciBhdHRhY2gvZGV0YWNoIHRvIHdvcmsgcHJvcGVybHkuXG5cdCAgICB0aGlzLl9mcmFnID0gb3B0aW9ucy5fZnJhZztcblx0ICAgIGlmICh0aGlzLl9mcmFnKSB7XG5cdCAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4ucHVzaCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBwdXNoIHNlbGYgaW50byBwYXJlbnQgLyB0cmFuc2NsdXNpb24gaG9zdFxuXHQgICAgaWYgKHRoaXMuJHBhcmVudCkge1xuXHQgICAgICB0aGlzLiRwYXJlbnQuJGNoaWxkcmVuLnB1c2godGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gbWVyZ2Ugb3B0aW9ucy5cblx0ICAgIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuY29uc3RydWN0b3Iub3B0aW9ucywgb3B0aW9ucywgdGhpcyk7XG5cdFxuXHQgICAgLy8gc2V0IHJlZlxuXHQgICAgdGhpcy5fdXBkYXRlUmVmKCk7XG5cdFxuXHQgICAgLy8gaW5pdGlhbGl6ZSBkYXRhIGFzIGVtcHR5IG9iamVjdC5cblx0ICAgIC8vIGl0IHdpbGwgYmUgZmlsbGVkIHVwIGluIF9pbml0RGF0YSgpLlxuXHQgICAgdGhpcy5fZGF0YSA9IHt9O1xuXHRcblx0ICAgIC8vIGNhbGwgaW5pdCBob29rXG5cdCAgICB0aGlzLl9jYWxsSG9vaygnaW5pdCcpO1xuXHRcblx0ICAgIC8vIGluaXRpYWxpemUgZGF0YSBvYnNlcnZhdGlvbiBhbmQgc2NvcGUgaW5oZXJpdGFuY2UuXG5cdCAgICB0aGlzLl9pbml0U3RhdGUoKTtcblx0XG5cdCAgICAvLyBzZXR1cCBldmVudCBzeXN0ZW0gYW5kIG9wdGlvbiBldmVudHMuXG5cdCAgICB0aGlzLl9pbml0RXZlbnRzKCk7XG5cdFxuXHQgICAgLy8gY2FsbCBjcmVhdGVkIGhvb2tcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdjcmVhdGVkJyk7XG5cdFxuXHQgICAgLy8gaWYgYGVsYCBvcHRpb24gaXMgcGFzc2VkLCBzdGFydCBjb21waWxhdGlvbi5cblx0ICAgIGlmIChvcHRpb25zLmVsKSB7XG5cdCAgICAgIHRoaXMuJG1vdW50KG9wdGlvbnMuZWwpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBwYXRoQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdFxuXHQvLyBhY3Rpb25zXG5cdHZhciBBUFBFTkQgPSAwO1xuXHR2YXIgUFVTSCA9IDE7XG5cdHZhciBJTkNfU1VCX1BBVEhfREVQVEggPSAyO1xuXHR2YXIgUFVTSF9TVUJfUEFUSCA9IDM7XG5cdFxuXHQvLyBzdGF0ZXNcblx0dmFyIEJFRk9SRV9QQVRIID0gMDtcblx0dmFyIElOX1BBVEggPSAxO1xuXHR2YXIgQkVGT1JFX0lERU5UID0gMjtcblx0dmFyIElOX0lERU5UID0gMztcblx0dmFyIElOX1NVQl9QQVRIID0gNDtcblx0dmFyIElOX1NJTkdMRV9RVU9URSA9IDU7XG5cdHZhciBJTl9ET1VCTEVfUVVPVEUgPSA2O1xuXHR2YXIgQUZURVJfUEFUSCA9IDc7XG5cdHZhciBFUlJPUiA9IDg7XG5cdFxuXHR2YXIgcGF0aFN0YXRlTWFjaGluZSA9IFtdO1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfUEFUSF0gPSB7XG5cdCAgJ3dzJzogW0JFRk9SRV9QQVRIXSxcblx0ICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuXHQgICdlb2YnOiBbQUZURVJfUEFUSF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fUEFUSF0gPSB7XG5cdCAgJ3dzJzogW0lOX1BBVEhdLFxuXHQgICcuJzogW0JFRk9SRV9JREVOVF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuXHQgICdlb2YnOiBbQUZURVJfUEFUSF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX0lERU5UXSA9IHtcblx0ICAnd3MnOiBbQkVGT1JFX0lERU5UXSxcblx0ICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fSURFTlRdID0ge1xuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnMCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICd3cyc6IFtJTl9QQVRILCBQVVNIXSxcblx0ICAnLic6IFtCRUZPUkVfSURFTlQsIFBVU0hdLFxuXHQgICdbJzogW0lOX1NVQl9QQVRILCBQVVNIXSxcblx0ICAnZW9mJzogW0FGVEVSX1BBVEgsIFBVU0hdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX1NVQl9QQVRIXSA9IHtcblx0ICBcIidcIjogW0lOX1NJTkdMRV9RVU9URSwgQVBQRU5EXSxcblx0ICAnXCInOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdLFxuXHQgICdbJzogW0lOX1NVQl9QQVRILCBJTkNfU1VCX1BBVEhfREVQVEhdLFxuXHQgICddJzogW0lOX1BBVEgsIFBVU0hfU1VCX1BBVEhdLFxuXHQgICdlb2YnOiBFUlJPUixcblx0ICAnZWxzZSc6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9TSU5HTEVfUVVPVEVdID0ge1xuXHQgIFwiJ1wiOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG5cdCAgJ2VvZic6IEVSUk9SLFxuXHQgICdlbHNlJzogW0lOX1NJTkdMRV9RVU9URSwgQVBQRU5EXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9ET1VCTEVfUVVPVEVdID0ge1xuXHQgICdcIic6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcblx0ICAnZW9mJzogRVJST1IsXG5cdCAgJ2Vsc2UnOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdXG5cdH07XG5cdFxuXHQvKipcblx0ICogRGV0ZXJtaW5lIHRoZSB0eXBlIG9mIGEgY2hhcmFjdGVyIGluIGEga2V5cGF0aC5cblx0ICpcblx0ICogQHBhcmFtIHtDaGFyfSBjaFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRQYXRoQ2hhclR5cGUoY2gpIHtcblx0ICBpZiAoY2ggPT09IHVuZGVmaW5lZCkge1xuXHQgICAgcmV0dXJuICdlb2YnO1xuXHQgIH1cblx0XG5cdCAgdmFyIGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApO1xuXHRcblx0ICBzd2l0Y2ggKGNvZGUpIHtcblx0ICAgIGNhc2UgMHg1QjogLy8gW1xuXHQgICAgY2FzZSAweDVEOiAvLyBdXG5cdCAgICBjYXNlIDB4MkU6IC8vIC5cblx0ICAgIGNhc2UgMHgyMjogLy8gXCJcblx0ICAgIGNhc2UgMHgyNzogLy8gJ1xuXHQgICAgY2FzZSAweDMwOlxuXHQgICAgICAvLyAwXG5cdCAgICAgIHJldHVybiBjaDtcblx0XG5cdCAgICBjYXNlIDB4NUY6IC8vIF9cblx0ICAgIGNhc2UgMHgyNDpcblx0ICAgICAgLy8gJFxuXHQgICAgICByZXR1cm4gJ2lkZW50Jztcblx0XG5cdCAgICBjYXNlIDB4MjA6IC8vIFNwYWNlXG5cdCAgICBjYXNlIDB4MDk6IC8vIFRhYlxuXHQgICAgY2FzZSAweDBBOiAvLyBOZXdsaW5lXG5cdCAgICBjYXNlIDB4MEQ6IC8vIFJldHVyblxuXHQgICAgY2FzZSAweEEwOiAvLyBOby1icmVhayBzcGFjZVxuXHQgICAgY2FzZSAweEZFRkY6IC8vIEJ5dGUgT3JkZXIgTWFya1xuXHQgICAgY2FzZSAweDIwMjg6IC8vIExpbmUgU2VwYXJhdG9yXG5cdCAgICBjYXNlIDB4MjAyOTpcblx0ICAgICAgLy8gUGFyYWdyYXBoIFNlcGFyYXRvclxuXHQgICAgICByZXR1cm4gJ3dzJztcblx0ICB9XG5cdFxuXHQgIC8vIGEteiwgQS1aXG5cdCAgaWYgKGNvZGUgPj0gMHg2MSAmJiBjb2RlIDw9IDB4N0EgfHwgY29kZSA+PSAweDQxICYmIGNvZGUgPD0gMHg1QSkge1xuXHQgICAgcmV0dXJuICdpZGVudCc7XG5cdCAgfVxuXHRcblx0ICAvLyAxLTlcblx0ICBpZiAoY29kZSA+PSAweDMxICYmIGNvZGUgPD0gMHgzOSkge1xuXHQgICAgcmV0dXJuICdudW1iZXInO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuICdlbHNlJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCBhIHN1YlBhdGgsIHJldHVybiBpdHMgcGxhaW4gZm9ybSBpZiBpdCBpc1xuXHQgKiBhIGxpdGVyYWwgc3RyaW5nIG9yIG51bWJlci4gT3RoZXJ3aXNlIHByZXBlbmQgdGhlXG5cdCAqIGR5bmFtaWMgaW5kaWNhdG9yICgqKS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFN1YlBhdGgocGF0aCkge1xuXHQgIHZhciB0cmltbWVkID0gcGF0aC50cmltKCk7XG5cdCAgLy8gaW52YWxpZCBsZWFkaW5nIDBcblx0ICBpZiAocGF0aC5jaGFyQXQoMCkgPT09ICcwJyAmJiBpc05hTihwYXRoKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICByZXR1cm4gaXNMaXRlcmFsKHRyaW1tZWQpID8gc3RyaXBRdW90ZXModHJpbW1lZCkgOiAnKicgKyB0cmltbWVkO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYSBzdHJpbmcgcGF0aCBpbnRvIGFuIGFycmF5IG9mIHNlZ21lbnRzXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZShwYXRoKSB7XG5cdCAgdmFyIGtleXMgPSBbXTtcblx0ICB2YXIgaW5kZXggPSAtMTtcblx0ICB2YXIgbW9kZSA9IEJFRk9SRV9QQVRIO1xuXHQgIHZhciBzdWJQYXRoRGVwdGggPSAwO1xuXHQgIHZhciBjLCBuZXdDaGFyLCBrZXksIHR5cGUsIHRyYW5zaXRpb24sIGFjdGlvbiwgdHlwZU1hcDtcblx0XG5cdCAgdmFyIGFjdGlvbnMgPSBbXTtcblx0XG5cdCAgYWN0aW9uc1tQVVNIXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBrZXlzLnB1c2goa2V5KTtcblx0ICAgICAga2V5ID0gdW5kZWZpbmVkO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGFjdGlvbnNbQVBQRU5EXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICBrZXkgPSBuZXdDaGFyO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAga2V5ICs9IG5ld0NoYXI7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgYWN0aW9uc1tJTkNfU1VCX1BBVEhfREVQVEhdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG5cdCAgICBzdWJQYXRoRGVwdGgrKztcblx0ICB9O1xuXHRcblx0ICBhY3Rpb25zW1BVU0hfU1VCX1BBVEhdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHN1YlBhdGhEZXB0aCA+IDApIHtcblx0ICAgICAgc3ViUGF0aERlcHRoLS07XG5cdCAgICAgIG1vZGUgPSBJTl9TVUJfUEFUSDtcblx0ICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzdWJQYXRoRGVwdGggPSAwO1xuXHQgICAgICBrZXkgPSBmb3JtYXRTdWJQYXRoKGtleSk7XG5cdCAgICAgIGlmIChrZXkgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGFjdGlvbnNbUFVTSF0oKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIG1heWJlVW5lc2NhcGVRdW90ZSgpIHtcblx0ICAgIHZhciBuZXh0Q2hhciA9IHBhdGhbaW5kZXggKyAxXTtcblx0ICAgIGlmIChtb2RlID09PSBJTl9TSU5HTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09IFwiJ1wiIHx8IG1vZGUgPT09IElOX0RPVUJMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gJ1wiJykge1xuXHQgICAgICBpbmRleCsrO1xuXHQgICAgICBuZXdDaGFyID0gJ1xcXFwnICsgbmV4dENoYXI7XG5cdCAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHdoaWxlIChtb2RlICE9IG51bGwpIHtcblx0ICAgIGluZGV4Kys7XG5cdCAgICBjID0gcGF0aFtpbmRleF07XG5cdFxuXHQgICAgaWYgKGMgPT09ICdcXFxcJyAmJiBtYXliZVVuZXNjYXBlUXVvdGUoKSkge1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICB0eXBlID0gZ2V0UGF0aENoYXJUeXBlKGMpO1xuXHQgICAgdHlwZU1hcCA9IHBhdGhTdGF0ZU1hY2hpbmVbbW9kZV07XG5cdCAgICB0cmFuc2l0aW9uID0gdHlwZU1hcFt0eXBlXSB8fCB0eXBlTWFwWydlbHNlJ10gfHwgRVJST1I7XG5cdFxuXHQgICAgaWYgKHRyYW5zaXRpb24gPT09IEVSUk9SKSB7XG5cdCAgICAgIHJldHVybjsgLy8gcGFyc2UgZXJyb3Jcblx0ICAgIH1cblx0XG5cdCAgICBtb2RlID0gdHJhbnNpdGlvblswXTtcblx0ICAgIGFjdGlvbiA9IGFjdGlvbnNbdHJhbnNpdGlvblsxXV07XG5cdCAgICBpZiAoYWN0aW9uKSB7XG5cdCAgICAgIG5ld0NoYXIgPSB0cmFuc2l0aW9uWzJdO1xuXHQgICAgICBuZXdDaGFyID0gbmV3Q2hhciA9PT0gdW5kZWZpbmVkID8gYyA6IG5ld0NoYXI7XG5cdCAgICAgIGlmIChhY3Rpb24oKSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBpZiAobW9kZSA9PT0gQUZURVJfUEFUSCkge1xuXHQgICAgICBrZXlzLnJhdyA9IHBhdGg7XG5cdCAgICAgIHJldHVybiBrZXlzO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4dGVybmFsIHBhcnNlIHRoYXQgY2hlY2sgZm9yIGEgY2FjaGUgaGl0IGZpcnN0XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZVBhdGgocGF0aCkge1xuXHQgIHZhciBoaXQgPSBwYXRoQ2FjaGUuZ2V0KHBhdGgpO1xuXHQgIGlmICghaGl0KSB7XG5cdCAgICBoaXQgPSBwYXJzZShwYXRoKTtcblx0ICAgIGlmIChoaXQpIHtcblx0ICAgICAgcGF0aENhY2hlLnB1dChwYXRoLCBoaXQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gaGl0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IGZyb20gYW4gb2JqZWN0IGZyb20gYSBwYXRoIHN0cmluZ1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0UGF0aChvYmosIHBhdGgpIHtcblx0ICByZXR1cm4gcGFyc2VFeHByZXNzaW9uKHBhdGgpLmdldChvYmopO1xuXHR9XG5cdFxuXHQvKipcblx0ICogV2FybiBhZ2FpbnN0IHNldHRpbmcgbm9uLWV4aXN0ZW50IHJvb3QgcGF0aCBvbiBhIHZtLlxuXHQgKi9cblx0XG5cdHZhciB3YXJuTm9uRXhpc3RlbnQ7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgd2Fybk5vbkV4aXN0ZW50ID0gZnVuY3Rpb24gKHBhdGgsIHZtKSB7XG5cdCAgICB3YXJuKCdZb3UgYXJlIHNldHRpbmcgYSBub24tZXhpc3RlbnQgcGF0aCBcIicgKyBwYXRoLnJhdyArICdcIiAnICsgJ29uIGEgdm0gaW5zdGFuY2UuIENvbnNpZGVyIHByZS1pbml0aWFsaXppbmcgdGhlIHByb3BlcnR5ICcgKyAnd2l0aCB0aGUgXCJkYXRhXCIgb3B0aW9uIGZvciBtb3JlIHJlbGlhYmxlIHJlYWN0aXZpdHkgJyArICdhbmQgYmV0dGVyIHBlcmZvcm1hbmNlLicsIHZtKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogU2V0IG9uIGFuIG9iamVjdCBmcm9tIGEgcGF0aFxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nIHwgQXJyYXl9IHBhdGhcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzZXRQYXRoKG9iaiwgcGF0aCwgdmFsKSB7XG5cdCAgdmFyIG9yaWdpbmFsID0gb2JqO1xuXHQgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcblx0ICAgIHBhdGggPSBwYXJzZShwYXRoKTtcblx0ICB9XG5cdCAgaWYgKCFwYXRoIHx8ICFpc09iamVjdChvYmopKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciBsYXN0LCBrZXk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgbGFzdCA9IG9iajtcblx0ICAgIGtleSA9IHBhdGhbaV07XG5cdCAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyonKSB7XG5cdCAgICAgIGtleSA9IHBhcnNlRXhwcmVzc2lvbihrZXkuc2xpY2UoMSkpLmdldC5jYWxsKG9yaWdpbmFsLCBvcmlnaW5hbCk7XG5cdCAgICB9XG5cdCAgICBpZiAoaSA8IGwgLSAxKSB7XG5cdCAgICAgIG9iaiA9IG9ialtrZXldO1xuXHQgICAgICBpZiAoIWlzT2JqZWN0KG9iaikpIHtcblx0ICAgICAgICBvYmogPSB7fTtcblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBsYXN0Ll9pc1Z1ZSkge1xuXHQgICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIGxhc3QpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZXQobGFzdCwga2V5LCBvYmopO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoaXNBcnJheShvYmopKSB7XG5cdCAgICAgICAgb2JqLiRzZXQoa2V5LCB2YWwpO1xuXHQgICAgICB9IGVsc2UgaWYgKGtleSBpbiBvYmopIHtcblx0ICAgICAgICBvYmpba2V5XSA9IHZhbDtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvYmouX2lzVnVlKSB7XG5cdCAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgb2JqKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2V0KG9iaiwga2V5LCB2YWwpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHR2YXIgcGF0aCA9IE9iamVjdC5mcmVlemUoe1xuXHQgIHBhcnNlUGF0aDogcGFyc2VQYXRoLFxuXHQgIGdldFBhdGg6IGdldFBhdGgsXG5cdCAgc2V0UGF0aDogc2V0UGF0aFxuXHR9KTtcblx0XG5cdHZhciBleHByZXNzaW9uQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdFxuXHR2YXIgYWxsb3dlZEtleXdvcmRzID0gJ01hdGgsRGF0ZSx0aGlzLHRydWUsZmFsc2UsbnVsbCx1bmRlZmluZWQsSW5maW5pdHksTmFOLCcgKyAnaXNOYU4saXNGaW5pdGUsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksJyArICdlbmNvZGVVUklDb21wb25lbnQscGFyc2VJbnQscGFyc2VGbG9hdCc7XG5cdHZhciBhbGxvd2VkS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGFsbG93ZWRLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblx0XG5cdC8vIGtleXdvcmRzIHRoYXQgZG9uJ3QgbWFrZSBzZW5zZSBpbnNpZGUgZXhwcmVzc2lvbnNcblx0dmFyIGltcHJvcGVyS2V5d29yZHMgPSAnYnJlYWssY2FzZSxjbGFzcyxjYXRjaCxjb25zdCxjb250aW51ZSxkZWJ1Z2dlcixkZWZhdWx0LCcgKyAnZGVsZXRlLGRvLGVsc2UsZXhwb3J0LGV4dGVuZHMsZmluYWxseSxmb3IsZnVuY3Rpb24saWYsJyArICdpbXBvcnQsaW4saW5zdGFuY2VvZixsZXQscmV0dXJuLHN1cGVyLHN3aXRjaCx0aHJvdyx0cnksJyArICd2YXIsd2hpbGUsd2l0aCx5aWVsZCxlbnVtLGF3YWl0LGltcGxlbWVudHMscGFja2FnZSwnICsgJ3Byb3RlY3RlZCxzdGF0aWMsaW50ZXJmYWNlLHByaXZhdGUscHVibGljJztcblx0dmFyIGltcHJvcGVyS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGltcHJvcGVyS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cdFxuXHR2YXIgd3NSRSA9IC9cXHMvZztcblx0dmFyIG5ld2xpbmVSRSA9IC9cXG4vZztcblx0dmFyIHNhdmVSRSA9IC9bXFx7LF1cXHMqW1xcd1xcJF9dK1xccyo6fCgnKD86W14nXFxcXF18XFxcXC4pKid8XCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifGAoPzpbXmBcXFxcXXxcXFxcLikqXFwkXFx7fFxcfSg/OlteYFxcXFxdfFxcXFwuKSpgfGAoPzpbXmBcXFxcXXxcXFxcLikqYCl8bmV3IHx0eXBlb2YgfHZvaWQgL2c7XG5cdHZhciByZXN0b3JlUkUgPSAvXCIoXFxkKylcIi9nO1xuXHR2YXIgcGF0aFRlc3RSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooPzpcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFsnLio/J1xcXXxcXFtcIi4qP1wiXFxdfFxcW1xcZCtcXF18XFxbW0EtWmEtel8kXVtcXHckXSpcXF0pKiQvO1xuXHR2YXIgaWRlbnRSRSA9IC9bXlxcdyRcXC5dKD86W0EtWmEtel8kXVtcXHckXSopL2c7XG5cdHZhciBsaXRlcmFsVmFsdWVSRSQxID0gL14oPzp0cnVlfGZhbHNlfG51bGx8dW5kZWZpbmVkfEluZmluaXR5fE5hTikkLztcblx0XG5cdGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHRcblx0LyoqXG5cdCAqIFNhdmUgLyBSZXdyaXRlIC8gUmVzdG9yZVxuXHQgKlxuXHQgKiBXaGVuIHJld3JpdGluZyBwYXRocyBmb3VuZCBpbiBhbiBleHByZXNzaW9uLCBpdCBpc1xuXHQgKiBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgbGV0dGVyIHNlcXVlbmNlcyB0byBiZSBmb3VuZCBpblxuXHQgKiBzdHJpbmdzIGFuZCBPYmplY3QgbGl0ZXJhbCBwcm9wZXJ0eSBrZXlzLiBUaGVyZWZvcmUgd2Vcblx0ICogcmVtb3ZlIGFuZCBzdG9yZSB0aGVzZSBwYXJ0cyBpbiBhIHRlbXBvcmFyeSBhcnJheSwgYW5kXG5cdCAqIHJlc3RvcmUgdGhlbSBhZnRlciB0aGUgcGF0aCByZXdyaXRlLlxuXHQgKi9cblx0XG5cdHZhciBzYXZlZCA9IFtdO1xuXHRcblx0LyoqXG5cdCAqIFNhdmUgcmVwbGFjZXJcblx0ICpcblx0ICogVGhlIHNhdmUgcmVnZXggY2FuIG1hdGNoIHR3byBwb3NzaWJsZSBjYXNlczpcblx0ICogMS4gQW4gb3BlbmluZyBvYmplY3QgbGl0ZXJhbFxuXHQgKiAyLiBBIHN0cmluZ1xuXHQgKiBJZiBtYXRjaGVkIGFzIGEgcGxhaW4gc3RyaW5nLCB3ZSBuZWVkIHRvIGVzY2FwZSBpdHNcblx0ICogbmV3bGluZXMsIHNpbmNlIHRoZSBzdHJpbmcgbmVlZHMgdG8gYmUgcHJlc2VydmVkIHdoZW5cblx0ICogZ2VuZXJhdGluZyB0aGUgZnVuY3Rpb24gYm9keS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaXNTdHJpbmcgLSBzdHIgaWYgbWF0Y2hlZCBhcyBhIHN0cmluZ1xuXHQgKiBAcmV0dXJuIHtTdHJpbmd9IC0gcGxhY2Vob2xkZXIgd2l0aCBpbmRleFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNhdmUoc3RyLCBpc1N0cmluZykge1xuXHQgIHZhciBpID0gc2F2ZWQubGVuZ3RoO1xuXHQgIHNhdmVkW2ldID0gaXNTdHJpbmcgPyBzdHIucmVwbGFjZShuZXdsaW5lUkUsICdcXFxcbicpIDogc3RyO1xuXHQgIHJldHVybiAnXCInICsgaSArICdcIic7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXRoIHJld3JpdGUgcmVwbGFjZXJcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHJhd1xuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmV3cml0ZShyYXcpIHtcblx0ICB2YXIgYyA9IHJhdy5jaGFyQXQoMCk7XG5cdCAgdmFyIHBhdGggPSByYXcuc2xpY2UoMSk7XG5cdCAgaWYgKGFsbG93ZWRLZXl3b3Jkc1JFLnRlc3QocGF0aCkpIHtcblx0ICAgIHJldHVybiByYXc7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHBhdGggPSBwYXRoLmluZGV4T2YoJ1wiJykgPiAtMSA/IHBhdGgucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpIDogcGF0aDtcblx0ICAgIHJldHVybiBjICsgJ3Njb3BlLicgKyBwYXRoO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlc3RvcmUgcmVwbGFjZXJcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaSAtIG1hdGNoZWQgc2F2ZSBpbmRleFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzdG9yZShzdHIsIGkpIHtcblx0ICByZXR1cm4gc2F2ZWRbaV07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXdyaXRlIGFuIGV4cHJlc3Npb24sIHByZWZpeGluZyBhbGwgcGF0aCBhY2Nlc3NvcnMgd2l0aFxuXHQgKiBgc2NvcGUuYCBhbmQgZ2VuZXJhdGUgZ2V0dGVyL3NldHRlciBmdW5jdGlvbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZUdldHRlcihleHApIHtcblx0ICBpZiAoaW1wcm9wZXJLZXl3b3Jkc1JFLnRlc3QoZXhwKSkge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBdm9pZCB1c2luZyByZXNlcnZlZCBrZXl3b3JkcyBpbiBleHByZXNzaW9uOiAnICsgZXhwKTtcblx0ICB9XG5cdCAgLy8gcmVzZXQgc3RhdGVcblx0ICBzYXZlZC5sZW5ndGggPSAwO1xuXHQgIC8vIHNhdmUgc3RyaW5ncyBhbmQgb2JqZWN0IGxpdGVyYWwga2V5c1xuXHQgIHZhciBib2R5ID0gZXhwLnJlcGxhY2Uoc2F2ZVJFLCBzYXZlKS5yZXBsYWNlKHdzUkUsICcnKTtcblx0ICAvLyByZXdyaXRlIGFsbCBwYXRoc1xuXHQgIC8vIHBhZCAxIHNwYWNlIGhlcmUgYmVjYXVzZSB0aGUgcmVnZXggbWF0Y2hlcyAxIGV4dHJhIGNoYXJcblx0ICBib2R5ID0gKCcgJyArIGJvZHkpLnJlcGxhY2UoaWRlbnRSRSwgcmV3cml0ZSkucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpO1xuXHQgIHJldHVybiBtYWtlR2V0dGVyRm4oYm9keSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGdldHRlciBmdW5jdGlvbi4gUmVxdWlyZXMgZXZhbC5cblx0ICpcblx0ICogV2UgaXNvbGF0ZSB0aGUgdHJ5L2NhdGNoIHNvIGl0IGRvZXNuJ3QgYWZmZWN0IHRoZVxuXHQgKiBvcHRpbWl6YXRpb24gb2YgdGhlIHBhcnNlIGZ1bmN0aW9uIHdoZW4gaXQgaXMgbm90IGNhbGxlZC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGJvZHlcblx0ICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VHZXR0ZXJGbihib2R5KSB7XG5cdCAgdHJ5IHtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdzY29wZScsICdyZXR1cm4gJyArIGJvZHkgKyAnOycpO1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoZS50b1N0cmluZygpLm1hdGNoKC91bnNhZmUtZXZhbHxDU1AvKSkge1xuXHQgICAgICAgIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdGhlIGRlZmF1bHQgYnVpbGQgb2YgVnVlLmpzIGluIGFuIGVudmlyb25tZW50ICcgKyAnd2l0aCBDb250ZW50IFNlY3VyaXR5IFBvbGljeSB0aGF0IHByb2hpYml0cyB1bnNhZmUtZXZhbC4gJyArICdVc2UgdGhlIENTUC1jb21wbGlhbnQgYnVpbGQgaW5zdGVhZDogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2luc3RhbGxhdGlvbi5odG1sI0NTUC1jb21wbGlhbnQtYnVpbGQnKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB3YXJuKCdJbnZhbGlkIGV4cHJlc3Npb24uICcgKyAnR2VuZXJhdGVkIGZ1bmN0aW9uIGJvZHk6ICcgKyBib2R5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIG5vb3A7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIHNldHRlciBmdW5jdGlvbiBmb3IgdGhlIGV4cHJlc3Npb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVTZXR0ZXIoZXhwKSB7XG5cdCAgdmFyIHBhdGggPSBwYXJzZVBhdGgoZXhwKTtcblx0ICBpZiAocGF0aCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIChzY29wZSwgdmFsKSB7XG5cdCAgICAgIHNldFBhdGgoc2NvcGUsIHBhdGgsIHZhbCk7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgc2V0dGVyIGV4cHJlc3Npb246ICcgKyBleHApO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGFuIGV4cHJlc3Npb24gaW50byByZS13cml0dGVuIGdldHRlci9zZXR0ZXJzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gbmVlZFNldFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZUV4cHJlc3Npb24oZXhwLCBuZWVkU2V0KSB7XG5cdCAgZXhwID0gZXhwLnRyaW0oKTtcblx0ICAvLyB0cnkgY2FjaGVcblx0ICB2YXIgaGl0ID0gZXhwcmVzc2lvbkNhY2hlLmdldChleHApO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIGlmIChuZWVkU2V0ICYmICFoaXQuc2V0KSB7XG5cdCAgICAgIGhpdC5zZXQgPSBjb21waWxlU2V0dGVyKGhpdC5leHApO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdCAgdmFyIHJlcyA9IHsgZXhwOiBleHAgfTtcblx0ICByZXMuZ2V0ID0gaXNTaW1wbGVQYXRoKGV4cCkgJiYgZXhwLmluZGV4T2YoJ1snKSA8IDBcblx0ICAvLyBvcHRpbWl6ZWQgc3VwZXIgc2ltcGxlIGdldHRlclxuXHQgID8gbWFrZUdldHRlckZuKCdzY29wZS4nICsgZXhwKVxuXHQgIC8vIGR5bmFtaWMgZ2V0dGVyXG5cdCAgOiBjb21waWxlR2V0dGVyKGV4cCk7XG5cdCAgaWYgKG5lZWRTZXQpIHtcblx0ICAgIHJlcy5zZXQgPSBjb21waWxlU2V0dGVyKGV4cCk7XG5cdCAgfVxuXHQgIGV4cHJlc3Npb25DYWNoZS5wdXQoZXhwLCByZXMpO1xuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgc2ltcGxlIHBhdGguXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1NpbXBsZVBhdGgoZXhwKSB7XG5cdCAgcmV0dXJuIHBhdGhUZXN0UkUudGVzdChleHApICYmXG5cdCAgLy8gZG9uJ3QgdHJlYXQgbGl0ZXJhbCB2YWx1ZXMgYXMgcGF0aHNcblx0ICAhbGl0ZXJhbFZhbHVlUkUkMS50ZXN0KGV4cCkgJiZcblx0ICAvLyBNYXRoIGNvbnN0YW50cyBlLmcuIE1hdGguUEksIE1hdGguRSBldGMuXG5cdCAgZXhwLnNsaWNlKDAsIDUpICE9PSAnTWF0aC4nO1xuXHR9XG5cdFxuXHR2YXIgZXhwcmVzc2lvbiA9IE9iamVjdC5mcmVlemUoe1xuXHQgIHBhcnNlRXhwcmVzc2lvbjogcGFyc2VFeHByZXNzaW9uLFxuXHQgIGlzU2ltcGxlUGF0aDogaXNTaW1wbGVQYXRoXG5cdH0pO1xuXHRcblx0Ly8gd2UgaGF2ZSB0d28gc2VwYXJhdGUgcXVldWVzOiBvbmUgZm9yIGRpcmVjdGl2ZSB1cGRhdGVzXG5cdC8vIGFuZCBvbmUgZm9yIHVzZXIgd2F0Y2hlciByZWdpc3RlcmVkIHZpYSAkd2F0Y2goKS5cblx0Ly8gd2Ugd2FudCB0byBndWFyYW50ZWUgZGlyZWN0aXZlIHVwZGF0ZXMgdG8gYmUgY2FsbGVkXG5cdC8vIGJlZm9yZSB1c2VyIHdhdGNoZXJzIHNvIHRoYXQgd2hlbiB1c2VyIHdhdGNoZXJzIGFyZVxuXHQvLyB0cmlnZ2VyZWQsIHRoZSBET00gd291bGQgaGF2ZSBhbHJlYWR5IGJlZW4gaW4gdXBkYXRlZFxuXHQvLyBzdGF0ZS5cblx0XG5cdHZhciBxdWV1ZSA9IFtdO1xuXHR2YXIgdXNlclF1ZXVlID0gW107XG5cdHZhciBoYXMgPSB7fTtcblx0dmFyIGNpcmN1bGFyID0ge307XG5cdHZhciB3YWl0aW5nID0gZmFsc2U7XG5cdFxuXHQvKipcblx0ICogUmVzZXQgdGhlIGJhdGNoZXIncyBzdGF0ZS5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXNldEJhdGNoZXJTdGF0ZSgpIHtcblx0ICBxdWV1ZS5sZW5ndGggPSAwO1xuXHQgIHVzZXJRdWV1ZS5sZW5ndGggPSAwO1xuXHQgIGhhcyA9IHt9O1xuXHQgIGNpcmN1bGFyID0ge307XG5cdCAgd2FpdGluZyA9IGZhbHNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmx1c2ggYm90aCBxdWV1ZXMgYW5kIHJ1biB0aGUgd2F0Y2hlcnMuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmx1c2hCYXRjaGVyUXVldWUoKSB7XG5cdCAgdmFyIF9hZ2FpbiA9IHRydWU7XG5cdFxuXHQgIF9mdW5jdGlvbjogd2hpbGUgKF9hZ2Fpbikge1xuXHQgICAgX2FnYWluID0gZmFsc2U7XG5cdFxuXHQgICAgcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKTtcblx0ICAgIHJ1bkJhdGNoZXJRdWV1ZSh1c2VyUXVldWUpO1xuXHQgICAgLy8gdXNlciB3YXRjaGVycyB0cmlnZ2VyZWQgbW9yZSB3YXRjaGVycyxcblx0ICAgIC8vIGtlZXAgZmx1c2hpbmcgdW50aWwgaXQgZGVwbGV0ZXNcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgX2FnYWluID0gdHJ1ZTtcblx0ICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuXHQgICAgfVxuXHQgICAgLy8gZGV2IHRvb2wgaG9va1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoZGV2dG9vbHMgJiYgY29uZmlnLmRldnRvb2xzKSB7XG5cdCAgICAgIGRldnRvb2xzLmVtaXQoJ2ZsdXNoJyk7XG5cdCAgICB9XG5cdCAgICByZXNldEJhdGNoZXJTdGF0ZSgpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJ1biB0aGUgd2F0Y2hlcnMgaW4gYSBzaW5nbGUgcXVldWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKSB7XG5cdCAgLy8gZG8gbm90IGNhY2hlIGxlbmd0aCBiZWNhdXNlIG1vcmUgd2F0Y2hlcnMgbWlnaHQgYmUgcHVzaGVkXG5cdCAgLy8gYXMgd2UgcnVuIGV4aXN0aW5nIHdhdGNoZXJzXG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZS5sZW5ndGg7IGkrKykge1xuXHQgICAgdmFyIHdhdGNoZXIgPSBxdWV1ZVtpXTtcblx0ICAgIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG5cdCAgICBoYXNbaWRdID0gbnVsbDtcblx0ICAgIHdhdGNoZXIucnVuKCk7XG5cdCAgICAvLyBpbiBkZXYgYnVpbGQsIGNoZWNrIGFuZCBzdG9wIGNpcmN1bGFyIHVwZGF0ZXMuXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBoYXNbaWRdICE9IG51bGwpIHtcblx0ICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDE7XG5cdCAgICAgIGlmIChjaXJjdWxhcltpZF0gPiBjb25maWcuX21heFVwZGF0ZUNvdW50KSB7XG5cdCAgICAgICAgd2FybignWW91IG1heSBoYXZlIGFuIGluZmluaXRlIHVwZGF0ZSBsb29wIGZvciB3YXRjaGVyICcgKyAnd2l0aCBleHByZXNzaW9uIFwiJyArIHdhdGNoZXIuZXhwcmVzc2lvbiArICdcIicsIHdhdGNoZXIudm0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHF1ZXVlLmxlbmd0aCA9IDA7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQdXNoIGEgd2F0Y2hlciBpbnRvIHRoZSB3YXRjaGVyIHF1ZXVlLlxuXHQgKiBKb2JzIHdpdGggZHVwbGljYXRlIElEcyB3aWxsIGJlIHNraXBwZWQgdW5sZXNzIGl0J3Ncblx0ICogcHVzaGVkIHdoZW4gdGhlIHF1ZXVlIGlzIGJlaW5nIGZsdXNoZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7V2F0Y2hlcn0gd2F0Y2hlclxuXHQgKiAgIHByb3BlcnRpZXM6XG5cdCAqICAgLSB7TnVtYmVyfSBpZFxuXHQgKiAgIC0ge0Z1bmN0aW9ufSBydW5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwdXNoV2F0Y2hlcih3YXRjaGVyKSB7XG5cdCAgdmFyIGlkID0gd2F0Y2hlci5pZDtcblx0ICBpZiAoaGFzW2lkXSA9PSBudWxsKSB7XG5cdCAgICAvLyBwdXNoIHdhdGNoZXIgaW50byBhcHByb3ByaWF0ZSBxdWV1ZVxuXHQgICAgdmFyIHEgPSB3YXRjaGVyLnVzZXIgPyB1c2VyUXVldWUgOiBxdWV1ZTtcblx0ICAgIGhhc1tpZF0gPSBxLmxlbmd0aDtcblx0ICAgIHEucHVzaCh3YXRjaGVyKTtcblx0ICAgIC8vIHF1ZXVlIHRoZSBmbHVzaFxuXHQgICAgaWYgKCF3YWl0aW5nKSB7XG5cdCAgICAgIHdhaXRpbmcgPSB0cnVlO1xuXHQgICAgICBuZXh0VGljayhmbHVzaEJhdGNoZXJRdWV1ZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdWlkJDIgPSAwO1xuXHRcblx0LyoqXG5cdCAqIEEgd2F0Y2hlciBwYXJzZXMgYW4gZXhwcmVzc2lvbiwgY29sbGVjdHMgZGVwZW5kZW5jaWVzLFxuXHQgKiBhbmQgZmlyZXMgY2FsbGJhY2sgd2hlbiB0aGUgZXhwcmVzc2lvbiB2YWx1ZSBjaGFuZ2VzLlxuXHQgKiBUaGlzIGlzIHVzZWQgZm9yIGJvdGggdGhlICR3YXRjaCgpIGFwaSBhbmQgZGlyZWN0aXZlcy5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqICAgICAgICAgICAgICAgICAtIHtBcnJheX0gZmlsdGVyc1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdHdvV2F5XG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB1c2VyXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBzeW5jXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsYXp5XG5cdCAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3ByZVByb2Nlc3NdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3Bvc3RQcm9jZXNzXVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG5cdCAgLy8gbWl4IGluIG9wdGlvbnNcblx0ICBpZiAob3B0aW9ucykge1xuXHQgICAgZXh0ZW5kKHRoaXMsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICB2YXIgaXNGbiA9IHR5cGVvZiBleHBPckZuID09PSAnZnVuY3Rpb24nO1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICB2bS5fd2F0Y2hlcnMucHVzaCh0aGlzKTtcblx0ICB0aGlzLmV4cHJlc3Npb24gPSBleHBPckZuO1xuXHQgIHRoaXMuY2IgPSBjYjtcblx0ICB0aGlzLmlkID0gKyt1aWQkMjsgLy8gdWlkIGZvciBiYXRjaGluZ1xuXHQgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcblx0ICB0aGlzLmRpcnR5ID0gdGhpcy5sYXp5OyAvLyBmb3IgbGF6eSB3YXRjaGVyc1xuXHQgIHRoaXMuZGVwcyA9IFtdO1xuXHQgIHRoaXMubmV3RGVwcyA9IFtdO1xuXHQgIHRoaXMuZGVwSWRzID0gbmV3IF9TZXQoKTtcblx0ICB0aGlzLm5ld0RlcElkcyA9IG5ldyBfU2V0KCk7XG5cdCAgdGhpcy5wcmV2RXJyb3IgPSBudWxsOyAvLyBmb3IgYXN5bmMgZXJyb3Igc3RhY2tzXG5cdCAgLy8gcGFyc2UgZXhwcmVzc2lvbiBmb3IgZ2V0dGVyL3NldHRlclxuXHQgIGlmIChpc0ZuKSB7XG5cdCAgICB0aGlzLmdldHRlciA9IGV4cE9yRm47XG5cdCAgICB0aGlzLnNldHRlciA9IHVuZGVmaW5lZDtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHBPckZuLCB0aGlzLnR3b1dheSk7XG5cdCAgICB0aGlzLmdldHRlciA9IHJlcy5nZXQ7XG5cdCAgICB0aGlzLnNldHRlciA9IHJlcy5zZXQ7XG5cdCAgfVxuXHQgIHRoaXMudmFsdWUgPSB0aGlzLmxhenkgPyB1bmRlZmluZWQgOiB0aGlzLmdldCgpO1xuXHQgIC8vIHN0YXRlIGZvciBhdm9pZGluZyBmYWxzZSB0cmlnZ2VycyBmb3IgZGVlcCBhbmQgQXJyYXlcblx0ICAvLyB3YXRjaGVycyBkdXJpbmcgdm0uX2RpZ2VzdCgpXG5cdCAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEV2YWx1YXRlIHRoZSBnZXR0ZXIsIGFuZCByZS1jb2xsZWN0IGRlcGVuZGVuY2llcy5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5iZWZvcmVHZXQoKTtcblx0ICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG5cdCAgdmFyIHZhbHVlO1xuXHQgIHRyeSB7XG5cdCAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcblx0ICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIGV4cHJlc3Npb24gJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBcInRvdWNoXCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXNcblx0ICAvLyBkZXBlbmRlbmNpZXMgZm9yIGRlZXAgd2F0Y2hpbmdcblx0ICBpZiAodGhpcy5kZWVwKSB7XG5cdCAgICB0cmF2ZXJzZSh2YWx1ZSk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLnByZVByb2Nlc3MpIHtcblx0ICAgIHZhbHVlID0gdGhpcy5wcmVQcm9jZXNzKHZhbHVlKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMuZmlsdGVycykge1xuXHQgICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCBudWxsLCB0aGlzLmZpbHRlcnMsIGZhbHNlKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMucG9zdFByb2Nlc3MpIHtcblx0ICAgIHZhbHVlID0gdGhpcy5wb3N0UHJvY2Vzcyh2YWx1ZSk7XG5cdCAgfVxuXHQgIHRoaXMuYWZ0ZXJHZXQoKTtcblx0ICByZXR1cm4gdmFsdWU7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcblx0ICBpZiAodGhpcy5maWx0ZXJzKSB7XG5cdCAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIHRoaXMudmFsdWUsIHRoaXMuZmlsdGVycywgdHJ1ZSk7XG5cdCAgfVxuXHQgIHRyeSB7XG5cdCAgICB0aGlzLnNldHRlci5jYWxsKHNjb3BlLCBzY29wZSwgdmFsdWUpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuXHQgICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgc2V0dGVyICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gdHdvLXdheSBzeW5jIGZvciB2LWZvciBhbGlhc1xuXHQgIHZhciBmb3JDb250ZXh0ID0gc2NvcGUuJGZvckNvbnRleHQ7XG5cdCAgaWYgKGZvckNvbnRleHQgJiYgZm9yQ29udGV4dC5hbGlhcyA9PT0gdGhpcy5leHByZXNzaW9uKSB7XG5cdCAgICBpZiAoZm9yQ29udGV4dC5maWx0ZXJzKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0d28td2F5IGJpbmRpbmcgb24gJyArICdhIHYtZm9yIGFsaWFzICgnICsgdGhpcy5leHByZXNzaW9uICsgJyksIGFuZCB0aGUgJyArICd2LWZvciBoYXMgZmlsdGVycy4gVGhpcyB3aWxsIG5vdCB3b3JrIHByb3Blcmx5LiAnICsgJ0VpdGhlciByZW1vdmUgdGhlIGZpbHRlcnMgb3IgdXNlIGFuIGFycmF5IG9mICcgKyAnb2JqZWN0cyBhbmQgYmluZCB0byBvYmplY3QgcHJvcGVydGllcyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBmb3JDb250ZXh0Ll93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChzY29wZS4ka2V5KSB7XG5cdCAgICAgICAgLy8gb3JpZ2luYWwgaXMgYW4gb2JqZWN0XG5cdCAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZVtzY29wZS4ka2V5XSA9IHZhbHVlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZvckNvbnRleHQucmF3VmFsdWUuJHNldChzY29wZS4kaW5kZXgsIHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFByZXBhcmUgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5iZWZvcmVHZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgRGVwLnRhcmdldCA9IHRoaXM7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS5cblx0ICpcblx0ICogQHBhcmFtIHtEZXB9IGRlcFxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmFkZERlcCA9IGZ1bmN0aW9uIChkZXApIHtcblx0ICB2YXIgaWQgPSBkZXAuaWQ7XG5cdCAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoaWQpKSB7XG5cdCAgICB0aGlzLm5ld0RlcElkcy5hZGQoaWQpO1xuXHQgICAgdGhpcy5uZXdEZXBzLnB1c2goZGVwKTtcblx0ICAgIGlmICghdGhpcy5kZXBJZHMuaGFzKGlkKSkge1xuXHQgICAgICBkZXAuYWRkU3ViKHRoaXMpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDbGVhbiB1cCBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmFmdGVyR2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIERlcC50YXJnZXQgPSBudWxsO1xuXHQgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB2YXIgZGVwID0gdGhpcy5kZXBzW2ldO1xuXHQgICAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoZGVwLmlkKSkge1xuXHQgICAgICBkZXAucmVtb3ZlU3ViKHRoaXMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgdG1wID0gdGhpcy5kZXBJZHM7XG5cdCAgdGhpcy5kZXBJZHMgPSB0aGlzLm5ld0RlcElkcztcblx0ICB0aGlzLm5ld0RlcElkcyA9IHRtcDtcblx0ICB0aGlzLm5ld0RlcElkcy5jbGVhcigpO1xuXHQgIHRtcCA9IHRoaXMuZGVwcztcblx0ICB0aGlzLmRlcHMgPSB0aGlzLm5ld0RlcHM7XG5cdCAgdGhpcy5uZXdEZXBzID0gdG1wO1xuXHQgIHRoaXMubmV3RGVwcy5sZW5ndGggPSAwO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFN1YnNjcmliZXIgaW50ZXJmYWNlLlxuXHQgKiBXaWxsIGJlIGNhbGxlZCB3aGVuIGEgZGVwZW5kZW5jeSBjaGFuZ2VzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHNoYWxsb3dcblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoc2hhbGxvdykge1xuXHQgIGlmICh0aGlzLmxhenkpIHtcblx0ICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuXHQgIH0gZWxzZSBpZiAodGhpcy5zeW5jIHx8ICFjb25maWcuYXN5bmMpIHtcblx0ICAgIHRoaXMucnVuKCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIGlmIHF1ZXVlZCwgb25seSBvdmVyd3JpdGUgc2hhbGxvdyB3aXRoIG5vbi1zaGFsbG93LFxuXHQgICAgLy8gYnV0IG5vdCB0aGUgb3RoZXIgd2F5IGFyb3VuZC5cblx0ICAgIHRoaXMuc2hhbGxvdyA9IHRoaXMucXVldWVkID8gc2hhbGxvdyA/IHRoaXMuc2hhbGxvdyA6IGZhbHNlIDogISFzaGFsbG93O1xuXHQgICAgdGhpcy5xdWV1ZWQgPSB0cnVlO1xuXHQgICAgLy8gcmVjb3JkIGJlZm9yZS1wdXNoIGVycm9yIHN0YWNrIGluIGRlYnVnIG1vZGVcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnKSB7XG5cdCAgICAgIHRoaXMucHJldkVycm9yID0gbmV3IEVycm9yKCdbdnVlXSBhc3luYyBzdGFjayB0cmFjZScpO1xuXHQgICAgfVxuXHQgICAgcHVzaFdhdGNoZXIodGhpcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEJhdGNoZXIgam9iIGludGVyZmFjZS5cblx0ICogV2lsbCBiZSBjYWxsZWQgYnkgdGhlIGJhdGNoZXIuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLmFjdGl2ZSkge1xuXHQgICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoKTtcblx0ICAgIGlmICh2YWx1ZSAhPT0gdGhpcy52YWx1ZSB8fFxuXHQgICAgLy8gRGVlcCB3YXRjaGVycyBhbmQgd2F0Y2hlcnMgb24gT2JqZWN0L0FycmF5cyBzaG91bGQgZmlyZSBldmVuXG5cdCAgICAvLyB3aGVuIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZSwgYmVjYXVzZSB0aGUgdmFsdWUgbWF5XG5cdCAgICAvLyBoYXZlIG11dGF0ZWQ7IGJ1dCBvbmx5IGRvIHNvIGlmIHRoaXMgaXMgYVxuXHQgICAgLy8gbm9uLXNoYWxsb3cgdXBkYXRlIChjYXVzZWQgYnkgYSB2bSBkaWdlc3QpLlxuXHQgICAgKGlzT2JqZWN0KHZhbHVlKSB8fCB0aGlzLmRlZXApICYmICF0aGlzLnNoYWxsb3cpIHtcblx0ICAgICAgLy8gc2V0IG5ldyB2YWx1ZVxuXHQgICAgICB2YXIgb2xkVmFsdWUgPSB0aGlzLnZhbHVlO1xuXHQgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgICAgIC8vIGluIGRlYnVnICsgYXN5bmMgbW9kZSwgd2hlbiBhIHdhdGNoZXIgY2FsbGJhY2tzXG5cdCAgICAgIC8vIHRocm93cywgd2UgYWxzbyB0aHJvdyB0aGUgc2F2ZWQgYmVmb3JlLXB1c2ggZXJyb3Jcblx0ICAgICAgLy8gc28gdGhlIGZ1bGwgY3Jvc3MtdGljayBzdGFjayB0cmFjZSBpcyBhdmFpbGFibGUuXG5cdCAgICAgIHZhciBwcmV2RXJyb3IgPSB0aGlzLnByZXZFcnJvcjtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1ZyAmJiBwcmV2RXJyb3IpIHtcblx0ICAgICAgICB0aGlzLnByZXZFcnJvciA9IG51bGw7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgdGhyb3cgcHJldkVycm9yO1xuXHQgICAgICAgICAgfSwgMCk7XG5cdCAgICAgICAgICB0aHJvdyBlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRXZhbHVhdGUgdGhlIHZhbHVlIG9mIHRoZSB3YXRjaGVyLlxuXHQgKiBUaGlzIG9ubHkgZ2V0cyBjYWxsZWQgZm9yIGxhenkgd2F0Y2hlcnMuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuZXZhbHVhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gYXZvaWQgb3ZlcndyaXRpbmcgYW5vdGhlciB3YXRjaGVyIHRoYXQgaXMgYmVpbmdcblx0ICAvLyBjb2xsZWN0ZWQuXG5cdCAgdmFyIGN1cnJlbnQgPSBEZXAudGFyZ2V0O1xuXHQgIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpO1xuXHQgIHRoaXMuZGlydHkgPSBmYWxzZTtcblx0ICBEZXAudGFyZ2V0ID0gY3VycmVudDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZXBlbmQgb24gYWxsIGRlcHMgY29sbGVjdGVkIGJ5IHRoaXMgd2F0Y2hlci5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHRoaXMuZGVwc1tpXS5kZXBlbmQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIHNlbGYgZnJvbSBhbGwgZGVwZW5kZW5jaWVzJyBzdWJjcmliZXIgbGlzdC5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS50ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhpcy5hY3RpdmUpIHtcblx0ICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gdm0ncyB3YXRjaGVyIGxpc3Rcblx0ICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBleHBlbnNpdmUgb3BlcmF0aW9uIHNvIHdlIHNraXAgaXRcblx0ICAgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBkZXN0cm95ZWQgb3IgaXMgcGVyZm9ybWluZyBhIHYtZm9yXG5cdCAgICAvLyByZS1yZW5kZXIgKHRoZSB3YXRjaGVyIGxpc3QgaXMgdGhlbiBmaWx0ZXJlZCBieSB2LWZvcikuXG5cdCAgICBpZiAoIXRoaXMudm0uX2lzQmVpbmdEZXN0cm95ZWQgJiYgIXRoaXMudm0uX3ZGb3JSZW1vdmluZykge1xuXHQgICAgICB0aGlzLnZtLl93YXRjaGVycy4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB0aGlzLmRlcHNbaV0ucmVtb3ZlU3ViKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIHRoaXMudm0gPSB0aGlzLmNiID0gdGhpcy52YWx1ZSA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlY3J1c2l2ZWx5IHRyYXZlcnNlIGFuIG9iamVjdCB0byBldm9rZSBhbGwgY29udmVydGVkXG5cdCAqIGdldHRlcnMsIHNvIHRoYXQgZXZlcnkgbmVzdGVkIHByb3BlcnR5IGluc2lkZSB0aGUgb2JqZWN0XG5cdCAqIGlzIGNvbGxlY3RlZCBhcyBhIFwiZGVlcFwiIGRlcGVuZGVuY3kuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0dmFyIHNlZW5PYmplY3RzID0gbmV3IF9TZXQoKTtcblx0ZnVuY3Rpb24gdHJhdmVyc2UodmFsLCBzZWVuKSB7XG5cdCAgdmFyIGkgPSB1bmRlZmluZWQsXG5cdCAgICAgIGtleXMgPSB1bmRlZmluZWQ7XG5cdCAgaWYgKCFzZWVuKSB7XG5cdCAgICBzZWVuID0gc2Vlbk9iamVjdHM7XG5cdCAgICBzZWVuLmNsZWFyKCk7XG5cdCAgfVxuXHQgIHZhciBpc0EgPSBpc0FycmF5KHZhbCk7XG5cdCAgdmFyIGlzTyA9IGlzT2JqZWN0KHZhbCk7XG5cdCAgaWYgKChpc0EgfHwgaXNPKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbCkpIHtcblx0ICAgIGlmICh2YWwuX19vYl9fKSB7XG5cdCAgICAgIHZhciBkZXBJZCA9IHZhbC5fX29iX18uZGVwLmlkO1xuXHQgICAgICBpZiAoc2Vlbi5oYXMoZGVwSWQpKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNlZW4uYWRkKGRlcElkKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKGlzQSkge1xuXHQgICAgICBpID0gdmFsLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2ldLCBzZWVuKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNPKSB7XG5cdCAgICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuXHQgICAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtrZXlzW2ldXSwgc2Vlbik7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdGV4dCQxID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdGhpcy5hdHRyID0gdGhpcy5lbC5ub2RlVHlwZSA9PT0gMyA/ICdkYXRhJyA6ICd0ZXh0Q29udGVudCc7XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHRoaXMuZWxbdGhpcy5hdHRyXSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHRlbXBsYXRlQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdHZhciBpZFNlbGVjdG9yQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdFxuXHR2YXIgbWFwID0ge1xuXHQgIGVmYXVsdDogWzAsICcnLCAnJ10sXG5cdCAgbGVnZW5kOiBbMSwgJzxmaWVsZHNldD4nLCAnPC9maWVsZHNldD4nXSxcblx0ICB0cjogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG5cdCAgY29sOiBbMiwgJzx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXVxuXHR9O1xuXHRcblx0bWFwLnRkID0gbWFwLnRoID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cdFxuXHRtYXAub3B0aW9uID0gbWFwLm9wdGdyb3VwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J107XG5cdFxuXHRtYXAudGhlYWQgPSBtYXAudGJvZHkgPSBtYXAuY29sZ3JvdXAgPSBtYXAuY2FwdGlvbiA9IG1hcC50Zm9vdCA9IFsxLCAnPHRhYmxlPicsICc8L3RhYmxlPiddO1xuXHRcblx0bWFwLmcgPSBtYXAuZGVmcyA9IG1hcC5zeW1ib2wgPSBtYXAudXNlID0gbWFwLmltYWdlID0gbWFwLnRleHQgPSBtYXAuY2lyY2xlID0gbWFwLmVsbGlwc2UgPSBtYXAubGluZSA9IG1hcC5wYXRoID0gbWFwLnBvbHlnb24gPSBtYXAucG9seWxpbmUgPSBtYXAucmVjdCA9IFsxLCAnPHN2ZyAnICsgJ3htbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiAnICsgJ3htbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiICcgKyAneG1sbnM6ZXY9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHNcIicgKyAndmVyc2lvbj1cIjEuMVwiPicsICc8L3N2Zz4nXTtcblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBzdXBwb3J0ZWQgdGVtcGxhdGUgbm9kZSB3aXRoIGFcblx0ICogRG9jdW1lbnRGcmFnbWVudCBjb250ZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc1JlYWxUZW1wbGF0ZShub2RlKSB7XG5cdCAgcmV0dXJuIGlzVGVtcGxhdGUobm9kZSkgJiYgaXNGcmFnbWVudChub2RlLmNvbnRlbnQpO1xuXHR9XG5cdFxuXHR2YXIgdGFnUkUkMSA9IC88KFtcXHc6LV0rKS87XG5cdHZhciBlbnRpdHlSRSA9IC8mIz9cXHcrPzsvO1xuXHR2YXIgY29tbWVudFJFID0gLzwhLS0vO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSBzdHJpbmcgdGVtcGxhdGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuXHQgKiBEZXRlcm1pbmVzIGNvcnJlY3Qgd3JhcHBpbmcgYnkgdGFnIHR5cGVzLiBXcmFwcGluZ1xuXHQgKiBzdHJhdGVneSBmb3VuZCBpbiBqUXVlcnkgJiBjb21wb25lbnQvZG9taWZ5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVTdHJpbmdcblx0ICogQHBhcmFtIHtCb29sZWFufSByYXdcblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlU3RyaW5nLCByYXcpIHtcblx0ICAvLyB0cnkgYSBjYWNoZSBoaXQgZmlyc3Rcblx0ICB2YXIgY2FjaGVLZXkgPSByYXcgPyB0ZW1wbGF0ZVN0cmluZyA6IHRlbXBsYXRlU3RyaW5nLnRyaW0oKTtcblx0ICB2YXIgaGl0ID0gdGVtcGxhdGVDYWNoZS5nZXQoY2FjaGVLZXkpO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICB2YXIgdGFnTWF0Y2ggPSB0ZW1wbGF0ZVN0cmluZy5tYXRjaCh0YWdSRSQxKTtcblx0ICB2YXIgZW50aXR5TWF0Y2ggPSBlbnRpdHlSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcblx0ICB2YXIgY29tbWVudE1hdGNoID0gY29tbWVudFJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuXHRcblx0ICBpZiAoIXRhZ01hdGNoICYmICFlbnRpdHlNYXRjaCAmJiAhY29tbWVudE1hdGNoKSB7XG5cdCAgICAvLyB0ZXh0IG9ubHksIHJldHVybiBhIHNpbmdsZSB0ZXh0IG5vZGUuXG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRlbXBsYXRlU3RyaW5nKSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciB0YWcgPSB0YWdNYXRjaCAmJiB0YWdNYXRjaFsxXTtcblx0ICAgIHZhciB3cmFwID0gbWFwW3RhZ10gfHwgbWFwLmVmYXVsdDtcblx0ICAgIHZhciBkZXB0aCA9IHdyYXBbMF07XG5cdCAgICB2YXIgcHJlZml4ID0gd3JhcFsxXTtcblx0ICAgIHZhciBzdWZmaXggPSB3cmFwWzJdO1xuXHQgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XG5cdCAgICBub2RlLmlubmVySFRNTCA9IHByZWZpeCArIHRlbXBsYXRlU3RyaW5nICsgc3VmZml4O1xuXHQgICAgd2hpbGUgKGRlcHRoLS0pIHtcblx0ICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBjaGlsZDtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICB3aGlsZSAoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQpIHtcblx0ICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCFyYXcpIHtcblx0ICAgIHRyaW1Ob2RlKGZyYWcpO1xuXHQgIH1cblx0ICB0ZW1wbGF0ZUNhY2hlLnB1dChjYWNoZUtleSwgZnJhZyk7XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgdGVtcGxhdGUgbm9kZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG5vZGVUb0ZyYWdtZW50KG5vZGUpIHtcblx0ICAvLyBpZiBpdHMgYSB0ZW1wbGF0ZSB0YWcgYW5kIHRoZSBicm93c2VyIHN1cHBvcnRzIGl0LFxuXHQgIC8vIGl0cyBjb250ZW50IGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudC4gSG93ZXZlciwgaU9TIFNhZmFyaSBoYXNcblx0ICAvLyBidWcgd2hlbiB1c2luZyBkaXJlY3RseSBjbG9uZWQgdGVtcGxhdGUgY29udGVudCB3aXRoIHRvdWNoXG5cdCAgLy8gZXZlbnRzIGFuZCBjYW4gY2F1c2UgY3Jhc2hlcyB3aGVuIHRoZSBub2RlcyBhcmUgcmVtb3ZlZCBmcm9tIERPTSwgc28gd2Vcblx0ICAvLyBoYXZlIHRvIHRyZWF0IHRlbXBsYXRlIGVsZW1lbnRzIGFzIHN0cmluZyB0ZW1wbGF0ZXMuICgjMjgwNSlcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcblx0ICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUuaW5uZXJIVE1MKTtcblx0ICB9XG5cdCAgLy8gc2NyaXB0IHRlbXBsYXRlXG5cdCAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1NDUklQVCcpIHtcblx0ICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUudGV4dENvbnRlbnQpO1xuXHQgIH1cblx0ICAvLyBub3JtYWwgbm9kZSwgY2xvbmUgaXQgdG8gYXZvaWQgbXV0YXRpbmcgdGhlIG9yaWdpbmFsXG5cdCAgdmFyIGNsb25lZE5vZGUgPSBjbG9uZU5vZGUobm9kZSk7XG5cdCAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgdmFyIGNoaWxkO1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgd2hpbGUgKGNoaWxkID0gY2xvbmVkTm9kZS5maXJzdENoaWxkKSB7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKTtcblx0ICB9XG5cdCAgdHJpbU5vZGUoZnJhZyk7XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdC8vIFRlc3QgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgU2FmYXJpIHRlbXBsYXRlIGNsb25pbmcgYnVnXG5cdC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3d1Zy5jZ2k/aWQ9MTM3NzU1XG5cdHZhciBoYXNCcm9rZW5UZW1wbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAoaW5Ccm93c2VyKSB7XG5cdCAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgYS5pbm5lckhUTUwgPSAnPHRlbXBsYXRlPjE8L3RlbXBsYXRlPic7XG5cdCAgICByZXR1cm4gIWEuY2xvbmVOb2RlKHRydWUpLmZpcnN0Q2hpbGQuaW5uZXJIVE1MO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHR9KSgpO1xuXHRcblx0Ly8gVGVzdCBmb3IgSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBjbG9uZSBidWdcblx0dmFyIGhhc1RleHRhcmVhQ2xvbmVCdWcgPSAoZnVuY3Rpb24gKCkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKGluQnJvd3Nlcikge1xuXHQgICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuXHQgICAgdC5wbGFjZWhvbGRlciA9ICd0Jztcblx0ICAgIHJldHVybiB0LmNsb25lTm9kZSh0cnVlKS52YWx1ZSA9PT0gJ3QnO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHR9KSgpO1xuXHRcblx0LyoqXG5cdCAqIDEuIERlYWwgd2l0aCBTYWZhcmkgY2xvbmluZyBuZXN0ZWQgPHRlbXBsYXRlPiBidWcgYnlcblx0ICogICAgbWFudWFsbHkgY2xvbmluZyBhbGwgdGVtcGxhdGUgaW5zdGFuY2VzLlxuXHQgKiAyLiBEZWFsIHdpdGggSUUxMC8xMSB0ZXh0YXJlYSBwbGFjZWhvbGRlciBidWcgYnkgc2V0dGluZ1xuXHQgKiAgICB0aGUgY29ycmVjdCB2YWx1ZSBhZnRlciBjbG9uaW5nLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gbm9kZVxuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIW5vZGUucXVlcnlTZWxlY3RvckFsbCkge1xuXHQgICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKCk7XG5cdCAgfVxuXHQgIHZhciByZXMgPSBub2RlLmNsb25lTm9kZSh0cnVlKTtcblx0ICB2YXIgaSwgb3JpZ2luYWwsIGNsb25lZDtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaGFzQnJva2VuVGVtcGxhdGUpIHtcblx0ICAgIHZhciB0ZW1wQ2xvbmUgPSByZXM7XG5cdCAgICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcblx0ICAgICAgbm9kZSA9IG5vZGUuY29udGVudDtcblx0ICAgICAgdGVtcENsb25lID0gcmVzLmNvbnRlbnQ7XG5cdCAgICB9XG5cdCAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcblx0ICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcblx0ICAgICAgY2xvbmVkID0gdGVtcENsb25lLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG5cdCAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgY2xvbmVkW2ldLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lTm9kZShvcmlnaW5hbFtpXSksIGNsb25lZFtpXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGhhc1RleHRhcmVhQ2xvbmVCdWcpIHtcblx0ICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcblx0ICAgICAgcmVzLnZhbHVlID0gbm9kZS52YWx1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuXHQgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoKSB7XG5cdCAgICAgICAgY2xvbmVkID0gcmVzLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG5cdCAgICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG5cdCAgICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgICAgY2xvbmVkW2ldLnZhbHVlID0gb3JpZ2luYWxbaV0udmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24gYW5kIG5vcm1hbGl6ZXMgaXQgaW50byBhXG5cdCAqIGEgRG9jdW1lbnRGcmFnbWVudCB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgcGFydGlhbCBvciBhXG5cdCAqIGluc3RhbmNlIHRlbXBsYXRlLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHRlbXBsYXRlXG5cdCAqICAgICAgICBQb3NzaWJsZSB2YWx1ZXMgaW5jbHVkZTpcblx0ICogICAgICAgIC0gRG9jdW1lbnRGcmFnbWVudCBvYmplY3Rcblx0ICogICAgICAgIC0gTm9kZSBvYmplY3Qgb2YgdHlwZSBUZW1wbGF0ZVxuXHQgKiAgICAgICAgLSBpZCBzZWxlY3RvcjogJyNzb21lLXRlbXBsYXRlLWlkJ1xuXHQgKiAgICAgICAgLSB0ZW1wbGF0ZSBzdHJpbmc6ICc8ZGl2PjxzcGFuPnt7bXNnfX08L3NwYW4+PC9kaXY+J1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHNob3VsZENsb25lXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG5cdCAqICAgICAgICBpbmxpbmUgSFRNTCBpbnRlcnBvbGF0aW9uLiBEbyBub3QgY2hlY2sgZm9yIGlkXG5cdCAqICAgICAgICBzZWxlY3RvciBhbmQga2VlcCB3aGl0ZXNwYWNlIGluIHRoZSBzdHJpbmcuXG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHNob3VsZENsb25lLCByYXcpIHtcblx0ICB2YXIgbm9kZSwgZnJhZztcblx0XG5cdCAgLy8gaWYgdGhlIHRlbXBsYXRlIGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudCxcblx0ICAvLyBkbyBub3RoaW5nXG5cdCAgaWYgKGlzRnJhZ21lbnQodGVtcGxhdGUpKSB7XG5cdCAgICB0cmltTm9kZSh0ZW1wbGF0ZSk7XG5cdCAgICByZXR1cm4gc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUodGVtcGxhdGUpIDogdGVtcGxhdGU7XG5cdCAgfVxuXHRcblx0ICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuXHQgICAgLy8gaWQgc2VsZWN0b3Jcblx0ICAgIGlmICghcmF3ICYmIHRlbXBsYXRlLmNoYXJBdCgwKSA9PT0gJyMnKSB7XG5cdCAgICAgIC8vIGlkIHNlbGVjdG9yIGNhbiBiZSBjYWNoZWQgdG9vXG5cdCAgICAgIGZyYWcgPSBpZFNlbGVjdG9yQ2FjaGUuZ2V0KHRlbXBsYXRlKTtcblx0ICAgICAgaWYgKCFmcmFnKSB7XG5cdCAgICAgICAgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlLnNsaWNlKDEpKTtcblx0ICAgICAgICBpZiAobm9kZSkge1xuXHQgICAgICAgICAgZnJhZyA9IG5vZGVUb0ZyYWdtZW50KG5vZGUpO1xuXHQgICAgICAgICAgLy8gc2F2ZSBzZWxlY3RvciB0byBjYWNoZVxuXHQgICAgICAgICAgaWRTZWxlY3RvckNhY2hlLnB1dCh0ZW1wbGF0ZSwgZnJhZyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBub3JtYWwgc3RyaW5nIHRlbXBsYXRlXG5cdCAgICAgIGZyYWcgPSBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlLCByYXcpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAodGVtcGxhdGUubm9kZVR5cGUpIHtcblx0ICAgIC8vIGEgZGlyZWN0IG5vZGVcblx0ICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudCh0ZW1wbGF0ZSk7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gZnJhZyAmJiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZShmcmFnKSA6IGZyYWc7XG5cdH1cblx0XG5cdHZhciB0ZW1wbGF0ZSA9IE9iamVjdC5mcmVlemUoe1xuXHQgIGNsb25lTm9kZTogY2xvbmVOb2RlLFxuXHQgIHBhcnNlVGVtcGxhdGU6IHBhcnNlVGVtcGxhdGVcblx0fSk7XG5cdFxuXHR2YXIgaHRtbCA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIGEgY29tbWVudCBub2RlIG1lYW5zIHRoaXMgaXMgYSBiaW5kaW5nIGZvclxuXHQgICAgLy8ge3t7IGlubGluZSB1bmVzY2FwZWQgaHRtbCB9fX1cblx0ICAgIGlmICh0aGlzLmVsLm5vZGVUeXBlID09PSA4KSB7XG5cdCAgICAgIC8vIGhvbGQgbm9kZXNcblx0ICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuXHQgICAgICAvLyByZXBsYWNlIHRoZSBwbGFjZWhvbGRlciB3aXRoIHByb3BlciBhbmNob3Jcblx0ICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaHRtbCcpO1xuXHQgICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuXHQgICAgaWYgKHRoaXMubm9kZXMpIHtcblx0ICAgICAgdGhpcy5zd2FwKHZhbHVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gdmFsdWU7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgc3dhcDogZnVuY3Rpb24gc3dhcCh2YWx1ZSkge1xuXHQgICAgLy8gcmVtb3ZlIG9sZCBub2Rlc1xuXHQgICAgdmFyIGkgPSB0aGlzLm5vZGVzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgcmVtb3ZlKHRoaXMubm9kZXNbaV0pO1xuXHQgICAgfVxuXHQgICAgLy8gY29udmVydCBuZXcgdmFsdWUgdG8gYSBmcmFnbWVudFxuXHQgICAgLy8gZG8gbm90IGF0dGVtcHQgdG8gcmV0cmlldmUgZnJvbSBpZCBzZWxlY3RvclxuXHQgICAgdmFyIGZyYWcgPSBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlLCB0cnVlKTtcblx0ICAgIC8vIHNhdmUgYSByZWZlcmVuY2UgdG8gdGhlc2Ugbm9kZXMgc28gd2UgY2FuIHJlbW92ZSBsYXRlclxuXHQgICAgdGhpcy5ub2RlcyA9IHRvQXJyYXkoZnJhZy5jaGlsZE5vZGVzKTtcblx0ICAgIGJlZm9yZShmcmFnLCB0aGlzLmFuY2hvcik7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFic3RyYWN0aW9uIGZvciBhIHBhcnRpYWxseS1jb21waWxlZCBmcmFnbWVudC5cblx0ICogQ2FuIG9wdGlvbmFsbHkgY29tcGlsZSBjb250ZW50IHdpdGggYSBjaGlsZCBzY29wZS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcblx0ICogQHBhcmFtIHtWdWV9IFtob3N0XVxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBbcGFyZW50RnJhZ11cblx0ICovXG5cdGZ1bmN0aW9uIEZyYWdtZW50KGxpbmtlciwgdm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG5cdCAgdGhpcy5jaGlsZHJlbiA9IFtdO1xuXHQgIHRoaXMuY2hpbGRGcmFncyA9IFtdO1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICB0aGlzLnNjb3BlID0gc2NvcGU7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuXHQgIHRoaXMucGFyZW50RnJhZyA9IHBhcmVudEZyYWc7XG5cdCAgaWYgKHBhcmVudEZyYWcpIHtcblx0ICAgIHBhcmVudEZyYWcuY2hpbGRGcmFncy5wdXNoKHRoaXMpO1xuXHQgIH1cblx0ICB0aGlzLnVubGluayA9IGxpbmtlcih2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHRoaXMpO1xuXHQgIHZhciBzaW5nbGUgPSB0aGlzLnNpbmdsZSA9IGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiZcblx0ICAvLyBkbyBub3QgZ28gc2luZ2xlIG1vZGUgaWYgdGhlIG9ubHkgbm9kZSBpcyBhbiBhbmNob3Jcblx0ICAhZnJhZy5jaGlsZE5vZGVzWzBdLl9fdl9hbmNob3I7XG5cdCAgaWYgKHNpbmdsZSkge1xuXHQgICAgdGhpcy5ub2RlID0gZnJhZy5jaGlsZE5vZGVzWzBdO1xuXHQgICAgdGhpcy5iZWZvcmUgPSBzaW5nbGVCZWZvcmU7XG5cdCAgICB0aGlzLnJlbW92ZSA9IHNpbmdsZVJlbW92ZTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5ub2RlID0gY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1zdGFydCcpO1xuXHQgICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LWVuZCcpO1xuXHQgICAgdGhpcy5mcmFnID0gZnJhZztcblx0ICAgIHByZXBlbmQodGhpcy5ub2RlLCBmcmFnKTtcblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuXHQgICAgdGhpcy5iZWZvcmUgPSBtdWx0aUJlZm9yZTtcblx0ICAgIHRoaXMucmVtb3ZlID0gbXVsdGlSZW1vdmU7XG5cdCAgfVxuXHQgIHRoaXMubm9kZS5fX3ZfZnJhZyA9IHRoaXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDYWxsIGF0dGFjaC9kZXRhY2ggZm9yIGFsbCBjb21wb25lbnRzIGNvbnRhaW5lZCB3aXRoaW5cblx0ICogdGhpcyBmcmFnbWVudC4gQWxzbyBkbyBzbyByZWN1cnNpdmVseSBmb3IgYWxsIGNoaWxkXG5cdCAqIGZyYWdtZW50cy5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xuXHQgKi9cblx0XG5cdEZyYWdtZW50LnByb3RvdHlwZS5jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG5cdCAgdmFyIGksIGw7XG5cdCAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5jYWxsSG9vayhob29rKTtcblx0ICB9XG5cdCAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBob29rKHRoaXMuY2hpbGRyZW5baV0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBJbnNlcnQgZnJhZ21lbnQgYmVmb3JlIHRhcmdldCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhUcmFuc2l0aW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2luZ2xlQmVmb3JlKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcblx0ICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG5cdCAgbWV0aG9kKHRoaXMubm9kZSwgdGFyZ2V0LCB0aGlzLnZtKTtcblx0ICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuXHQgICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBmcmFnbWVudCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNpbmdsZVJlbW92ZSgpIHtcblx0ICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG5cdCAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuXHQgIHJlbW92ZVdpdGhUcmFuc2l0aW9uKHRoaXMubm9kZSwgdGhpcy52bSwgZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcblx0ICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuXHQgICAgfVxuXHQgICAgc2VsZi5kZXN0cm95KCk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnQgZnJhZ21lbnQgYmVmb3JlIHRhcmdldCwgbXVsdGktbm9kZXMgdmVyc2lvblxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHdpdGhUcmFuc2l0aW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbXVsdGlCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuXHQgIHZhciB2bSA9IHRoaXMudm07XG5cdCAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuXHQgIG1hcE5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuXHQgICAgbWV0aG9kKG5vZGUsIHRhcmdldCwgdm0pO1xuXHQgIH0pO1xuXHQgIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG5cdCAgICB0aGlzLmNhbGxIb29rKGF0dGFjaCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGZyYWdtZW50LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbXVsdGlSZW1vdmUoKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG5cdCAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcblx0ICByZW1vdmVOb2RlUmFuZ2UodGhpcy5ub2RlLCB0aGlzLmVuZCwgdGhpcy52bSwgdGhpcy5mcmFnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuXHQgICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XG5cdCAgICB9XG5cdCAgICBzZWxmLmRlc3Ryb3koKTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByZXBhcmUgdGhlIGZyYWdtZW50IGZvciByZW1vdmFsLlxuXHQgKi9cblx0XG5cdEZyYWdtZW50LnByb3RvdHlwZS5iZWZvcmVSZW1vdmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGksIGw7XG5cdCAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIC8vIGNhbGwgdGhlIHNhbWUgbWV0aG9kIHJlY3Vyc2l2ZWx5IG9uIGNoaWxkXG5cdCAgICAvLyBmcmFnbWVudHMsIGRlcHRoLWZpcnN0XG5cdCAgICB0aGlzLmNoaWxkRnJhZ3NbaV0uYmVmb3JlUmVtb3ZlKGZhbHNlKTtcblx0ICB9XG5cdCAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAvLyBDYWxsIGRlc3Ryb3kgZm9yIGFsbCBjb250YWluZWQgaW5zdGFuY2VzLFxuXHQgICAgLy8gd2l0aCByZW1vdmU6ZmFsc2UgYW5kIGRlZmVyOnRydWUuXG5cdCAgICAvLyBEZWZlciBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBuZWVkIHRvXG5cdCAgICAvLyBrZWVwIHRoZSBjaGlsZHJlbiB0byBjYWxsIGRldGFjaCBob29rc1xuXHQgICAgLy8gb24gdGhlbS5cblx0ICAgIHRoaXMuY2hpbGRyZW5baV0uJGRlc3Ryb3koZmFsc2UsIHRydWUpO1xuXHQgIH1cblx0ICB2YXIgZGlycyA9IHRoaXMudW5saW5rLmRpcnM7XG5cdCAgZm9yIChpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAvLyBkaXNhYmxlIHRoZSB3YXRjaGVycyBvbiBhbGwgdGhlIGRpcmVjdGl2ZXNcblx0ICAgIC8vIHNvIHRoYXQgdGhlIHJlbmRlcmVkIGNvbnRlbnQgc3RheXMgdGhlIHNhbWVcblx0ICAgIC8vIGR1cmluZyByZW1vdmFsLlxuXHQgICAgZGlyc1tpXS5fd2F0Y2hlciAmJiBkaXJzW2ldLl93YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERlc3Ryb3kgdGhlIGZyYWdtZW50LlxuXHQgKi9cblx0XG5cdEZyYWdtZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLnBhcmVudEZyYWcpIHtcblx0ICAgIHRoaXMucGFyZW50RnJhZy5jaGlsZEZyYWdzLiRyZW1vdmUodGhpcyk7XG5cdCAgfVxuXHQgIHRoaXMubm9kZS5fX3ZfZnJhZyA9IG51bGw7XG5cdCAgdGhpcy51bmxpbmsoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGF0dGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXR0YWNoKGNoaWxkKSB7XG5cdCAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2FsbCBkZXRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRldGFjaChjaGlsZCkge1xuXHQgIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuXHQgICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGxpbmtlckNhY2hlID0gbmV3IENhY2hlKDUwMDApO1xuXHRcblx0LyoqXG5cdCAqIEEgZmFjdG9yeSB0aGF0IGNhbiBiZSB1c2VkIHRvIGNyZWF0ZSBpbnN0YW5jZXMgb2YgYVxuXHQgKiBmcmFnbWVudC4gQ2FjaGVzIHRoZSBjb21waWxlZCBsaW5rZXIgaWYgcG9zc2libGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfSBlbFxuXHQgKi9cblx0ZnVuY3Rpb24gRnJhZ21lbnRGYWN0b3J5KHZtLCBlbCkge1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICB2YXIgdGVtcGxhdGU7XG5cdCAgdmFyIGlzU3RyaW5nID0gdHlwZW9mIGVsID09PSAnc3RyaW5nJztcblx0ICBpZiAoaXNTdHJpbmcgfHwgaXNUZW1wbGF0ZShlbCkgJiYgIWVsLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICB0ZW1wbGF0ZSA9IHBhcnNlVGVtcGxhdGUoZWwsIHRydWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICAgIHRlbXBsYXRlLmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdCAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuXHQgIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkLCBidXQgb25seSBmb3IgY29tcG9uZW50c1xuXHQgIHZhciBsaW5rZXI7XG5cdCAgdmFyIGNpZCA9IHZtLmNvbnN0cnVjdG9yLmNpZDtcblx0ICBpZiAoY2lkID4gMCkge1xuXHQgICAgdmFyIGNhY2hlSWQgPSBjaWQgKyAoaXNTdHJpbmcgPyBlbCA6IGdldE91dGVySFRNTChlbCkpO1xuXHQgICAgbGlua2VyID0gbGlua2VyQ2FjaGUuZ2V0KGNhY2hlSWQpO1xuXHQgICAgaWYgKCFsaW5rZXIpIHtcblx0ICAgICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuXHQgICAgICBsaW5rZXJDYWNoZS5wdXQoY2FjaGVJZCwgbGlua2VyKTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuXHQgIH1cblx0ICB0aGlzLmxpbmtlciA9IGxpbmtlcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhIGZyYWdtZW50IGluc3RhbmNlIHdpdGggZ2l2ZW4gaG9zdCBhbmQgc2NvcGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSBob3N0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZVxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBwYXJlbnRGcmFnXG5cdCAqL1xuXHRcblx0RnJhZ21lbnRGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcblx0ICB2YXIgZnJhZyA9IGNsb25lTm9kZSh0aGlzLnRlbXBsYXRlKTtcblx0ICByZXR1cm4gbmV3IEZyYWdtZW50KHRoaXMubGlua2VyLCB0aGlzLnZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZyk7XG5cdH07XG5cdFxuXHR2YXIgT04gPSA3MDA7XG5cdHZhciBNT0RFTCA9IDgwMDtcblx0dmFyIEJJTkQgPSA4NTA7XG5cdHZhciBUUkFOU0lUSU9OID0gMTEwMDtcblx0dmFyIEVMID0gMTUwMDtcblx0dmFyIENPTVBPTkVOVCA9IDE1MDA7XG5cdHZhciBQQVJUSUFMID0gMTc1MDtcblx0dmFyIElGID0gMjEwMDtcblx0dmFyIEZPUiA9IDIyMDA7XG5cdHZhciBTTE9UID0gMjMwMDtcblx0XG5cdHZhciB1aWQkMyA9IDA7XG5cdFxuXHR2YXIgdkZvciA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IEZPUixcblx0ICB0ZXJtaW5hbDogdHJ1ZSxcblx0XG5cdCAgcGFyYW1zOiBbJ3RyYWNrLWJ5JywgJ3N0YWdnZXInLCAnZW50ZXItc3RhZ2dlcicsICdsZWF2ZS1zdGFnZ2VyJ10sXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBzdXBwb3J0IFwiaXRlbSBpbi9vZiBpdGVtc1wiIHN5bnRheFxuXHQgICAgdmFyIGluTWF0Y2ggPSB0aGlzLmV4cHJlc3Npb24ubWF0Y2goLyguKikgKD86aW58b2YpICguKikvKTtcblx0ICAgIGlmIChpbk1hdGNoKSB7XG5cdCAgICAgIHZhciBpdE1hdGNoID0gaW5NYXRjaFsxXS5tYXRjaCgvXFwoKC4qKSwoLiopXFwpLyk7XG5cdCAgICAgIGlmIChpdE1hdGNoKSB7XG5cdCAgICAgICAgdGhpcy5pdGVyYXRvciA9IGl0TWF0Y2hbMV0udHJpbSgpO1xuXHQgICAgICAgIHRoaXMuYWxpYXMgPSBpdE1hdGNoWzJdLnRyaW0oKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmFsaWFzID0gaW5NYXRjaFsxXS50cmltKCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5leHByZXNzaW9uID0gaW5NYXRjaFsyXTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAoIXRoaXMuYWxpYXMpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHYtZm9yIGV4cHJlc3Npb24gXCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIjogJyArICdhbGlhcyBpcyByZXF1aXJlZC4nLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHVpZCBhcyBhIGNhY2hlIGlkZW50aWZpZXJcblx0ICAgIHRoaXMuaWQgPSAnX192LWZvcl9fJyArICsrdWlkJDM7XG5cdFxuXHQgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBvcHRpb24gbGlzdCxcblx0ICAgIC8vIHNvIHRoYXQgd2Uga25vdyBpZiB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgPHNlbGVjdD4nc1xuXHQgICAgLy8gdi1tb2RlbCB3aGVuIHRoZSBvcHRpb24gbGlzdCBoYXMgY2hhbmdlZC5cblx0ICAgIC8vIGJlY2F1c2Ugdi1tb2RlbCBoYXMgYSBsb3dlciBwcmlvcml0eSB0aGFuIHYtZm9yLFxuXHQgICAgLy8gdGhlIHYtbW9kZWwgaXMgbm90IGJvdW5kIGhlcmUgeWV0LCBzbyB3ZSBoYXZlIHRvXG5cdCAgICAvLyByZXRyaXZlIGl0IGluIHRoZSBhY3R1YWwgdXBkYXRlTW9kZWwoKSBmdW5jdGlvbi5cblx0ICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG5cdCAgICB0aGlzLmlzT3B0aW9uID0gKHRhZyA9PT0gJ09QVElPTicgfHwgdGFnID09PSAnT1BUR1JPVVAnKSAmJiB0aGlzLmVsLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ1NFTEVDVCc7XG5cdFxuXHQgICAgLy8gc2V0dXAgYW5jaG9yIG5vZGVzXG5cdCAgICB0aGlzLnN0YXJ0ID0gY3JlYXRlQW5jaG9yKCd2LWZvci1zdGFydCcpO1xuXHQgICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ3YtZm9yLWVuZCcpO1xuXHQgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmVuZCk7XG5cdCAgICBiZWZvcmUodGhpcy5zdGFydCwgdGhpcy5lbmQpO1xuXHRcblx0ICAgIC8vIGNhY2hlXG5cdCAgICB0aGlzLmNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdCAgICAvLyBmcmFnbWVudCBmYWN0b3J5XG5cdCAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGRhdGEpIHtcblx0ICAgIHRoaXMuZGlmZihkYXRhKTtcblx0ICAgIHRoaXMudXBkYXRlUmVmKCk7XG5cdCAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGlmZiwgYmFzZWQgb24gbmV3IGRhdGEgYW5kIG9sZCBkYXRhLCBkZXRlcm1pbmUgdGhlXG5cdCAgICogbWluaW11bSBhbW91bnQgb2YgRE9NIG1hbmlwdWxhdGlvbnMgbmVlZGVkIHRvIG1ha2UgdGhlXG5cdCAgICogRE9NIHJlZmxlY3QgdGhlIG5ldyBkYXRhIEFycmF5LlxuXHQgICAqXG5cdCAgICogVGhlIGFsZ29yaXRobSBkaWZmcyB0aGUgbmV3IGRhdGEgQXJyYXkgYnkgc3RvcmluZyBhXG5cdCAgICogaGlkZGVuIHJlZmVyZW5jZSB0byBhbiBvd25lciB2bSBpbnN0YW5jZSBvbiBwcmV2aW91c2x5XG5cdCAgICogc2VlbiBkYXRhLiBUaGlzIGFsbG93cyB1cyB0byBhY2hpZXZlIE8obikgd2hpY2ggaXNcblx0ICAgKiBiZXR0ZXIgdGhhbiBhIGxldmVuc2h0ZWluIGRpc3RhbmNlIGJhc2VkIGFsZ29yaXRobSxcblx0ICAgKiB3aGljaCBpcyBPKG0gKiBuKS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IGRhdGFcblx0ICAgKi9cblx0XG5cdCAgZGlmZjogZnVuY3Rpb24gZGlmZihkYXRhKSB7XG5cdCAgICAvLyBjaGVjayBpZiB0aGUgQXJyYXkgd2FzIGNvbnZlcnRlZCBmcm9tIGFuIE9iamVjdFxuXHQgICAgdmFyIGl0ZW0gPSBkYXRhWzBdO1xuXHQgICAgdmFyIGNvbnZlcnRlZEZyb21PYmplY3QgPSB0aGlzLmZyb21PYmplY3QgPSBpc09iamVjdChpdGVtKSAmJiBoYXNPd24oaXRlbSwgJyRrZXknKSAmJiBoYXNPd24oaXRlbSwgJyR2YWx1ZScpO1xuXHRcblx0ICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcblx0ICAgIHZhciBvbGRGcmFncyA9IHRoaXMuZnJhZ3M7XG5cdCAgICB2YXIgZnJhZ3MgPSB0aGlzLmZyYWdzID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtcblx0ICAgIHZhciBhbGlhcyA9IHRoaXMuYWxpYXM7XG5cdCAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLml0ZXJhdG9yO1xuXHQgICAgdmFyIHN0YXJ0ID0gdGhpcy5zdGFydDtcblx0ICAgIHZhciBlbmQgPSB0aGlzLmVuZDtcblx0ICAgIHZhciBpbkRvY3VtZW50ID0gaW5Eb2Moc3RhcnQpO1xuXHQgICAgdmFyIGluaXQgPSAhb2xkRnJhZ3M7XG5cdCAgICB2YXIgaSwgbCwgZnJhZywga2V5LCB2YWx1ZSwgcHJpbWl0aXZlO1xuXHRcblx0ICAgIC8vIEZpcnN0IHBhc3MsIGdvIHRocm91Z2ggdGhlIG5ldyBBcnJheSBhbmQgZmlsbCB1cFxuXHQgICAgLy8gdGhlIG5ldyBmcmFncyBhcnJheS4gSWYgYSBwaWVjZSBvZiBkYXRhIGhhcyBhIGNhY2hlZFxuXHQgICAgLy8gaW5zdGFuY2UgZm9yIGl0LCB3ZSByZXVzZSBpdC4gT3RoZXJ3aXNlIGJ1aWxkIGEgbmV3XG5cdCAgICAvLyBpbnN0YW5jZS5cblx0ICAgIGZvciAoaSA9IDAsIGwgPSBkYXRhLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBpdGVtID0gZGF0YVtpXTtcblx0ICAgICAga2V5ID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJGtleSA6IG51bGw7XG5cdCAgICAgIHZhbHVlID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJHZhbHVlIDogaXRlbTtcblx0ICAgICAgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcblx0ICAgICAgZnJhZyA9ICFpbml0ICYmIHRoaXMuZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaSwga2V5KTtcblx0ICAgICAgaWYgKGZyYWcpIHtcblx0ICAgICAgICAvLyByZXVzYWJsZSBmcmFnbWVudFxuXHQgICAgICAgIGZyYWcucmV1c2VkID0gdHJ1ZTtcblx0ICAgICAgICAvLyB1cGRhdGUgJGluZGV4XG5cdCAgICAgICAgZnJhZy5zY29wZS4kaW5kZXggPSBpO1xuXHQgICAgICAgIC8vIHVwZGF0ZSAka2V5XG5cdCAgICAgICAgaWYgKGtleSkge1xuXHQgICAgICAgICAgZnJhZy5zY29wZS4ka2V5ID0ga2V5O1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyB1cGRhdGUgaXRlcmF0b3Jcblx0ICAgICAgICBpZiAoaXRlcmF0b3IpIHtcblx0ICAgICAgICAgIGZyYWcuc2NvcGVbaXRlcmF0b3JdID0ga2V5ICE9PSBudWxsID8ga2V5IDogaTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gdXBkYXRlIGRhdGEgZm9yIHRyYWNrLWJ5LCBvYmplY3QgcmVwZWF0ICZcblx0ICAgICAgICAvLyBwcmltaXRpdmUgdmFsdWVzLlxuXHQgICAgICAgIGlmICh0cmFja0J5S2V5IHx8IGNvbnZlcnRlZEZyb21PYmplY3QgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgICAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIGZyYWcuc2NvcGVbYWxpYXNdID0gdmFsdWU7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gbmV3IGlzbnRhbmNlXG5cdCAgICAgICAgZnJhZyA9IHRoaXMuY3JlYXRlKHZhbHVlLCBhbGlhcywgaSwga2V5KTtcblx0ICAgICAgICBmcmFnLmZyZXNoID0gIWluaXQ7XG5cdCAgICAgIH1cblx0ICAgICAgZnJhZ3NbaV0gPSBmcmFnO1xuXHQgICAgICBpZiAoaW5pdCkge1xuXHQgICAgICAgIGZyYWcuYmVmb3JlKGVuZCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyB3ZSdyZSBkb25lIGZvciB0aGUgaW5pdGlhbCByZW5kZXIuXG5cdCAgICBpZiAoaW5pdCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gU2Vjb25kIHBhc3MsIGdvIHRocm91Z2ggdGhlIG9sZCBmcmFnbWVudHMgYW5kXG5cdCAgICAvLyBkZXN0cm95IHRob3NlIHdobyBhcmUgbm90IHJldXNlZCAoYW5kIHJlbW92ZSB0aGVtXG5cdCAgICAvLyBmcm9tIGNhY2hlKVxuXHQgICAgdmFyIHJlbW92YWxJbmRleCA9IDA7XG5cdCAgICB2YXIgdG90YWxSZW1vdmVkID0gb2xkRnJhZ3MubGVuZ3RoIC0gZnJhZ3MubGVuZ3RoO1xuXHQgICAgLy8gd2hlbiByZW1vdmluZyBhIGxhcmdlIG51bWJlciBvZiBmcmFnbWVudHMsIHdhdGNoZXIgcmVtb3ZhbFxuXHQgICAgLy8gdHVybnMgb3V0IHRvIGJlIGEgcGVyZiBib3R0bGVuZWNrLCBzbyB3ZSBiYXRjaCB0aGUgd2F0Y2hlclxuXHQgICAgLy8gcmVtb3ZhbHMgaW50byBhIHNpbmdsZSBmaWx0ZXIgY2FsbCFcblx0ICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IHRydWU7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gb2xkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGZyYWcgPSBvbGRGcmFnc1tpXTtcblx0ICAgICAgaWYgKCFmcmFnLnJldXNlZCkge1xuXHQgICAgICAgIHRoaXMuZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKTtcblx0ICAgICAgICB0aGlzLnJlbW92ZShmcmFnLCByZW1vdmFsSW5kZXgrKywgdG90YWxSZW1vdmVkLCBpbkRvY3VtZW50KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gZmFsc2U7XG5cdCAgICBpZiAocmVtb3ZhbEluZGV4KSB7XG5cdCAgICAgIHRoaXMudm0uX3dhdGNoZXJzID0gdGhpcy52bS5fd2F0Y2hlcnMuZmlsdGVyKGZ1bmN0aW9uICh3KSB7XG5cdCAgICAgICAgcmV0dXJuIHcuYWN0aXZlO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBGaW5hbCBwYXNzLCBtb3ZlL2luc2VydCBuZXcgZnJhZ21lbnRzIGludG8gdGhlXG5cdCAgICAvLyByaWdodCBwbGFjZS5cblx0ICAgIHZhciB0YXJnZXRQcmV2LCBwcmV2RWwsIGN1cnJlbnRQcmV2O1xuXHQgICAgdmFyIGluc2VydGlvbkluZGV4ID0gMDtcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBmcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgZnJhZyA9IGZyYWdzW2ldO1xuXHQgICAgICAvLyB0aGlzIGlzIHRoZSBmcmFnIHRoYXQgd2Ugc2hvdWxkIGJlIGFmdGVyXG5cdCAgICAgIHRhcmdldFByZXYgPSBmcmFnc1tpIC0gMV07XG5cdCAgICAgIHByZXZFbCA9IHRhcmdldFByZXYgPyB0YXJnZXRQcmV2LnN0YWdnZXJDYiA/IHRhcmdldFByZXYuc3RhZ2dlckFuY2hvciA6IHRhcmdldFByZXYuZW5kIHx8IHRhcmdldFByZXYubm9kZSA6IHN0YXJ0O1xuXHQgICAgICBpZiAoZnJhZy5yZXVzZWQgJiYgIWZyYWcuc3RhZ2dlckNiKSB7XG5cdCAgICAgICAgY3VycmVudFByZXYgPSBmaW5kUHJldkZyYWcoZnJhZywgc3RhcnQsIHRoaXMuaWQpO1xuXHQgICAgICAgIGlmIChjdXJyZW50UHJldiAhPT0gdGFyZ2V0UHJldiAmJiAoIWN1cnJlbnRQcmV2IHx8XG5cdCAgICAgICAgLy8gb3B0aW1pemF0aW9uIGZvciBtb3ZpbmcgYSBzaW5nbGUgaXRlbS5cblx0ICAgICAgICAvLyB0aGFua3MgdG8gc3VnZ2VzdGlvbnMgYnkgQGxpdm9yYXMgaW4gIzE4MDdcblx0ICAgICAgICBmaW5kUHJldkZyYWcoY3VycmVudFByZXYsIHN0YXJ0LCB0aGlzLmlkKSAhPT0gdGFyZ2V0UHJldikpIHtcblx0ICAgICAgICAgIHRoaXMubW92ZShmcmFnLCBwcmV2RWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBuZXcgaW5zdGFuY2UsIG9yIHN0aWxsIGluIHN0YWdnZXIuXG5cdCAgICAgICAgLy8gaW5zZXJ0IHdpdGggdXBkYXRlZCBzdGFnZ2VyIGluZGV4LlxuXHQgICAgICAgIHRoaXMuaW5zZXJ0KGZyYWcsIGluc2VydGlvbkluZGV4KyssIHByZXZFbCwgaW5Eb2N1bWVudCk7XG5cdCAgICAgIH1cblx0ICAgICAgZnJhZy5yZXVzZWQgPSBmcmFnLmZyZXNoID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGEgbmV3IGZyYWdtZW50IGluc3RhbmNlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBhbGlhc1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuXHQgICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuXHQgICAqL1xuXHRcblx0ICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSh2YWx1ZSwgYWxpYXMsIGluZGV4LCBrZXkpIHtcblx0ICAgIHZhciBob3N0ID0gdGhpcy5faG9zdDtcblx0ICAgIC8vIGNyZWF0ZSBpdGVyYXRpb24gc2NvcGVcblx0ICAgIHZhciBwYXJlbnRTY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG5cdCAgICB2YXIgc2NvcGUgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlKTtcblx0ICAgIC8vIHJlZiBob2xkZXIgZm9yIHRoZSBzY29wZVxuXHQgICAgc2NvcGUuJHJlZnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRyZWZzKTtcblx0ICAgIHNjb3BlLiRlbHMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRlbHMpO1xuXHQgICAgLy8gbWFrZSBzdXJlIHBvaW50ICRwYXJlbnQgdG8gcGFyZW50IHNjb3BlXG5cdCAgICBzY29wZS4kcGFyZW50ID0gcGFyZW50U2NvcGU7XG5cdCAgICAvLyBmb3IgdHdvLXdheSBiaW5kaW5nIG9uIGFsaWFzXG5cdCAgICBzY29wZS4kZm9yQ29udGV4dCA9IHRoaXM7XG5cdCAgICAvLyBkZWZpbmUgc2NvcGUgcHJvcGVydGllc1xuXHQgICAgLy8gaW1wb3J0YW50OiBkZWZpbmUgdGhlIHNjb3BlIGFsaWFzIHdpdGhvdXQgZm9yY2VkIGNvbnZlcnNpb25cblx0ICAgIC8vIHNvIHRoYXQgZnJvemVuIGRhdGEgc3RydWN0dXJlcyByZW1haW4gbm9uLXJlYWN0aXZlLlxuXHQgICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgYWxpYXMsIHZhbHVlKTtcblx0ICAgIH0pO1xuXHQgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICckaW5kZXgnLCBpbmRleCk7XG5cdCAgICBpZiAoa2V5KSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGtleScsIGtleSk7XG5cdCAgICB9IGVsc2UgaWYgKHNjb3BlLiRrZXkpIHtcblx0ICAgICAgLy8gYXZvaWQgYWNjaWRlbnRhbCBmYWxsYmFja1xuXHQgICAgICBkZWYoc2NvcGUsICcka2V5JywgbnVsbCk7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5pdGVyYXRvcikge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgdGhpcy5pdGVyYXRvciwga2V5ICE9PSBudWxsID8ga2V5IDogaW5kZXgpO1xuXHQgICAgfVxuXHQgICAgdmFyIGZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgIGZyYWcuZm9ySWQgPSB0aGlzLmlkO1xuXHQgICAgdGhpcy5jYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpO1xuXHQgICAgcmV0dXJuIGZyYWc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVXBkYXRlIHRoZSB2LXJlZiBvbiBvd25lciB2bS5cblx0ICAgKi9cblx0XG5cdCAgdXBkYXRlUmVmOiBmdW5jdGlvbiB1cGRhdGVSZWYoKSB7XG5cdCAgICB2YXIgcmVmID0gdGhpcy5kZXNjcmlwdG9yLnJlZjtcblx0ICAgIGlmICghcmVmKSByZXR1cm47XG5cdCAgICB2YXIgaGFzaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmcztcblx0ICAgIHZhciByZWZzO1xuXHQgICAgaWYgKCF0aGlzLmZyb21PYmplY3QpIHtcblx0ICAgICAgcmVmcyA9IHRoaXMuZnJhZ3MubWFwKGZpbmRWbUZyb21GcmFnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlZnMgPSB7fTtcblx0ICAgICAgdGhpcy5mcmFncy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnKSB7XG5cdCAgICAgICAgcmVmc1tmcmFnLnNjb3BlLiRrZXldID0gZmluZFZtRnJvbUZyYWcoZnJhZyk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgaGFzaFtyZWZdID0gcmVmcztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBGb3Igb3B0aW9uIGxpc3RzLCB1cGRhdGUgdGhlIGNvbnRhaW5pbmcgdi1tb2RlbCBvblxuXHQgICAqIHBhcmVudCA8c2VsZWN0Pi5cblx0ICAgKi9cblx0XG5cdCAgdXBkYXRlTW9kZWw6IGZ1bmN0aW9uIHVwZGF0ZU1vZGVsKCkge1xuXHQgICAgaWYgKHRoaXMuaXNPcHRpb24pIHtcblx0ICAgICAgdmFyIHBhcmVudCA9IHRoaXMuc3RhcnQucGFyZW50Tm9kZTtcblx0ICAgICAgdmFyIG1vZGVsID0gcGFyZW50ICYmIHBhcmVudC5fX3ZfbW9kZWw7XG5cdCAgICAgIGlmIChtb2RlbCkge1xuXHQgICAgICAgIG1vZGVsLmZvcmNlVXBkYXRlKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnQgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG5cdCAgICovXG5cdFxuXHQgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGZyYWcsIGluZGV4LCBwcmV2RWwsIGluRG9jdW1lbnQpIHtcblx0ICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcblx0ICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIG51bGwsICdlbnRlcicpO1xuXHQgICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuXHQgICAgICAvLyBjcmVhdGUgYW4gYW5jaG9yIGFuZCBpbnNlcnQgaXQgc3luY2hyb25vdXNseSxcblx0ICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gcmVzb2x2ZSB0aGUgY29ycmVjdCBvcmRlciB3aXRob3V0XG5cdCAgICAgIC8vIHdvcnJ5aW5nIGFib3V0IHNvbWUgZWxlbWVudHMgbm90IGluc2VydGVkIHlldFxuXHQgICAgICB2YXIgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yO1xuXHQgICAgICBpZiAoIWFuY2hvcikge1xuXHQgICAgICAgIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvciA9IGNyZWF0ZUFuY2hvcignc3RhZ2dlci1hbmNob3InKTtcblx0ICAgICAgICBhbmNob3IuX192X2ZyYWcgPSBmcmFnO1xuXHQgICAgICB9XG5cdCAgICAgIGFmdGVyKGFuY2hvciwgcHJldkVsKTtcblx0ICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuXHQgICAgICAgIGZyYWcuYmVmb3JlKGFuY2hvcik7XG5cdCAgICAgICAgcmVtb3ZlKGFuY2hvcik7XG5cdCAgICAgIH0pO1xuXHQgICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciB0YXJnZXQgPSBwcmV2RWwubmV4dFNpYmxpbmc7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoIXRhcmdldCkge1xuXHQgICAgICAgIC8vIHJlc2V0IGVuZCBhbmNob3IgcG9zaXRpb24gaW4gY2FzZSB0aGUgcG9zaXRpb24gd2FzIG1lc3NlZCB1cFxuXHQgICAgICAgIC8vIGJ5IGFuIGV4dGVybmFsIGRyYWctbi1kcm9wIGxpYnJhcnkuXG5cdCAgICAgICAgYWZ0ZXIodGhpcy5lbmQsIHByZXZFbCk7XG5cdCAgICAgICAgdGFyZ2V0ID0gdGhpcy5lbmQ7XG5cdCAgICAgIH1cblx0ICAgICAgZnJhZy5iZWZvcmUodGFyZ2V0KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuXHQgICAqL1xuXHRcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShmcmFnLCBpbmRleCwgdG90YWwsIGluRG9jdW1lbnQpIHtcblx0ICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcblx0ICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuXHQgICAgICAvLyBpdCdzIG5vdCBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgZnJhZyB0byBiZSByZW1vdmVkXG5cdCAgICAgIC8vIHR3aWNlLCBzbyBpZiB3ZSBoYXZlIGEgcGVuZGluZyBzdGFnZ2VyIGNhbGxiYWNrLFxuXHQgICAgICAvLyBpdCBtZWFucyB0aGlzIGZyYWcgaXMgcXVldWVkIGZvciBlbnRlciBidXQgcmVtb3ZlZFxuXHQgICAgICAvLyBiZWZvcmUgaXRzIHRyYW5zaXRpb24gc3RhcnRlZC4gU2luY2UgaXQgaXMgYWxyZWFkeVxuXHQgICAgICAvLyBkZXN0cm95ZWQsIHdlIGNhbiBqdXN0IGxlYXZlIGl0IGluIGRldGFjaGVkIHN0YXRlLlxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsICdsZWF2ZScpO1xuXHQgICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuXHQgICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICAgICAgZnJhZy5yZW1vdmUoKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZnJhZy5yZW1vdmUoKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBNb3ZlIGEgZnJhZ21lbnQgdG8gYSBuZXcgcG9zaXRpb24uXG5cdCAgICogRm9yY2Ugbm8gdHJhbnNpdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuXHQgICAqL1xuXHRcblx0ICBtb3ZlOiBmdW5jdGlvbiBtb3ZlKGZyYWcsIHByZXZFbCkge1xuXHQgICAgLy8gZml4IGEgY29tbW9uIGlzc3VlIHdpdGggU29ydGFibGU6XG5cdCAgICAvLyBpZiBwcmV2RWwgZG9lc24ndCBoYXZlIG5leHRTaWJsaW5nLCB0aGlzIG1lYW5zIGl0J3Ncblx0ICAgIC8vIGJlZW4gZHJhZ2dlZCBhZnRlciB0aGUgZW5kIGFuY2hvci4gSnVzdCByZS1wb3NpdGlvblxuXHQgICAgLy8gdGhlIGVuZCBhbmNob3IgdG8gdGhlIGVuZCBvZiB0aGUgY29udGFpbmVyLlxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIXByZXZFbC5uZXh0U2libGluZykge1xuXHQgICAgICB0aGlzLmVuZC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKHRoaXMuZW5kKTtcblx0ICAgIH1cblx0ICAgIGZyYWcuYmVmb3JlKHByZXZFbC5uZXh0U2libGluZywgZmFsc2UpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENhY2hlIGEgZnJhZ21lbnQgdXNpbmcgdHJhY2stYnkgb3IgdGhlIG9iamVjdCBrZXkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuXHQgICAqL1xuXHRcblx0ICBjYWNoZUZyYWc6IGZ1bmN0aW9uIGNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSkge1xuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZTtcblx0ICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgdmFyIGlkO1xuXHQgICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuXHQgICAgICBpZiAoIWNhY2hlW2lkXSkge1xuXHQgICAgICAgIGNhY2hlW2lkXSA9IGZyYWc7XG5cdCAgICAgIH0gZWxzZSBpZiAodHJhY2tCeUtleSAhPT0gJyRpbmRleCcpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlkID0gdGhpcy5pZDtcblx0ICAgICAgaWYgKGhhc093bih2YWx1ZSwgaWQpKSB7XG5cdCAgICAgICAgaWYgKHZhbHVlW2lkXSA9PT0gbnVsbCkge1xuXHQgICAgICAgICAgdmFsdWVbaWRdID0gZnJhZztcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSkge1xuXHQgICAgICAgIGRlZih2YWx1ZSwgaWQsIGZyYWcpO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB3YXJuKCdGcm96ZW4gdi1mb3Igb2JqZWN0cyBjYW5ub3QgYmUgYXV0b21hdGljYWxseSB0cmFja2VkLCBtYWtlIHN1cmUgdG8gJyArICdwcm92aWRlIGEgdHJhY2stYnkga2V5LicpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBmcmFnLnJhdyA9IHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldCBhIGNhY2hlZCBmcmFnbWVudCBmcm9tIHRoZSB2YWx1ZS9pbmRleC9rZXlcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICogQHJldHVybiB7RnJhZ21lbnR9XG5cdCAgICovXG5cdFxuXHQgIGdldENhY2hlZEZyYWc6IGZ1bmN0aW9uIGdldENhY2hlZEZyYWcodmFsdWUsIGluZGV4LCBrZXkpIHtcblx0ICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcblx0ICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgdmFyIGZyYWc7XG5cdCAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuXHQgICAgICBmcmFnID0gdGhpcy5jYWNoZVtpZF07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmcmFnID0gdmFsdWVbdGhpcy5pZF07XG5cdCAgICB9XG5cdCAgICBpZiAoZnJhZyAmJiAoZnJhZy5yZXVzZWQgfHwgZnJhZy5mcmVzaCkpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZyYWc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGVsZXRlIGEgZnJhZ21lbnQgZnJvbSBjYWNoZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKi9cblx0XG5cdCAgZGVsZXRlQ2FjaGVkRnJhZzogZnVuY3Rpb24gZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKSB7XG5cdCAgICB2YXIgdmFsdWUgPSBmcmFnLnJhdztcblx0ICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcblx0ICAgIHZhciBzY29wZSA9IGZyYWcuc2NvcGU7XG5cdCAgICB2YXIgaW5kZXggPSBzY29wZS4kaW5kZXg7XG5cdCAgICAvLyBmaXggIzk0ODogYXZvaWQgYWNjaWRlbnRhbGx5IGZhbGwgdGhyb3VnaCB0b1xuXHQgICAgLy8gYSBwYXJlbnQgcmVwZWF0ZXIgd2hpY2ggaGFwcGVucyB0byBoYXZlICRrZXkuXG5cdCAgICB2YXIga2V5ID0gaGFzT3duKHNjb3BlLCAnJGtleScpICYmIHNjb3BlLiRrZXk7XG5cdCAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcblx0ICAgIGlmICh0cmFja0J5S2V5IHx8IGtleSB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG5cdCAgICAgIHRoaXMuY2FjaGVbaWRdID0gbnVsbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhbHVlW3RoaXMuaWRdID0gbnVsbDtcblx0ICAgICAgZnJhZy5yYXcgPSBudWxsO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEdldCB0aGUgc3RhZ2dlciBhbW91bnQgZm9yIGFuIGluc2VydGlvbi9yZW1vdmFsLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAgICovXG5cdFxuXHQgIGdldFN0YWdnZXI6IGZ1bmN0aW9uIGdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCB0eXBlKSB7XG5cdCAgICB0eXBlID0gdHlwZSArICdTdGFnZ2VyJztcblx0ICAgIHZhciB0cmFucyA9IGZyYWcubm9kZS5fX3ZfdHJhbnM7XG5cdCAgICB2YXIgaG9va3MgPSB0cmFucyAmJiB0cmFucy5ob29rcztcblx0ICAgIHZhciBob29rID0gaG9va3MgJiYgKGhvb2tzW3R5cGVdIHx8IGhvb2tzLnN0YWdnZXIpO1xuXHQgICAgcmV0dXJuIGhvb2sgPyBob29rLmNhbGwoZnJhZywgaW5kZXgsIHRvdGFsKSA6IGluZGV4ICogcGFyc2VJbnQodGhpcy5wYXJhbXNbdHlwZV0gfHwgdGhpcy5wYXJhbXMuc3RhZ2dlciwgMTApO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFByZS1wcm9jZXNzIHRoZSB2YWx1ZSBiZWZvcmUgcGlwaW5nIGl0IHRocm91Z2ggdGhlXG5cdCAgICogZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cblx0ICAgKi9cblx0XG5cdCAgX3ByZVByb2Nlc3M6IGZ1bmN0aW9uIF9wcmVQcm9jZXNzKHZhbHVlKSB7XG5cdCAgICAvLyByZWdhcmRsZXNzIG9mIHR5cGUsIHN0b3JlIHRoZSB1bi1maWx0ZXJlZCByYXcgdmFsdWUuXG5cdCAgICB0aGlzLnJhd1ZhbHVlID0gdmFsdWU7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUG9zdC1wcm9jZXNzIHRoZSB2YWx1ZSBhZnRlciBpdCBoYXMgYmVlbiBwaXBlZCB0aHJvdWdoXG5cdCAgICogdGhlIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG5cdCAgICpcblx0ICAgKiBJdCBpcyBuZWNlc3NhcnkgZm9yIHRoaXMgdG8gYmUgY2FsbGVkIGR1cmluZyB0aGVcblx0ICAgKiB3YXRjaGVyJ3MgZGVwZW5kZW5jeSBjb2xsZWN0aW9uIHBoYXNlIGJlY2F1c2Ugd2Ugd2FudFxuXHQgICAqIHRoZSB2LWZvciB0byB1cGRhdGUgd2hlbiB0aGUgc291cmNlIE9iamVjdCBpcyBtdXRhdGVkLlxuXHQgICAqL1xuXHRcblx0ICBfcG9zdFByb2Nlc3M6IGZ1bmN0aW9uIF9wb3N0UHJvY2Vzcyh2YWx1ZSkge1xuXHQgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdCh2YWx1ZSkpIHtcblx0ICAgICAgLy8gY29udmVydCBwbGFpbiBvYmplY3QgdG8gYXJyYXkuXG5cdCAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuXHQgICAgICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgICB2YXIgcmVzID0gbmV3IEFycmF5KGkpO1xuXHQgICAgICB2YXIga2V5O1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgICByZXNbaV0gPSB7XG5cdCAgICAgICAgICAka2V5OiBrZXksXG5cdCAgICAgICAgICAkdmFsdWU6IHZhbHVlW2tleV1cblx0ICAgICAgICB9O1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiByZXM7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyAmJiAhaXNOYU4odmFsdWUpKSB7XG5cdCAgICAgICAgdmFsdWUgPSByYW5nZSh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbHVlIHx8IFtdO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcblx0ICAgICAgKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzW3RoaXMuZGVzY3JpcHRvci5yZWZdID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLmZyYWdzKSB7XG5cdCAgICAgIHZhciBpID0gdGhpcy5mcmFncy5sZW5ndGg7XG5cdCAgICAgIHZhciBmcmFnO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgZnJhZyA9IHRoaXMuZnJhZ3NbaV07XG5cdCAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuXHQgICAgICAgIGZyYWcuZGVzdHJveSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEhlbHBlciB0byBmaW5kIHRoZSBwcmV2aW91cyBlbGVtZW50IHRoYXQgaXMgYSBmcmFnbWVudFxuXHQgKiBhbmNob3IuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYSBkZXN0cm95ZWQgZnJhZydzXG5cdCAqIGVsZW1lbnQgY291bGQgc3RpbGwgYmUgbGluZ2VyaW5nIGluIHRoZSBET00gYmVmb3JlIGl0c1xuXHQgKiBsZWF2aW5nIHRyYW5zaXRpb24gZmluaXNoZXMsIGJ1dCBpdHMgaW5zZXJ0ZWQgZmxhZ1xuXHQgKiBzaG91bGQgaGF2ZSBiZWVuIHNldCB0byBmYWxzZSBzbyB3ZSBjYW4gc2tpcCB0aGVtLlxuXHQgKlxuXHQgKiBJZiB0aGlzIGlzIGEgYmxvY2sgcmVwZWF0LCB3ZSB3YW50IHRvIG1ha2Ugc3VyZSB3ZSBvbmx5XG5cdCAqIHJldHVybiBmcmFnIHRoYXQgaXMgYm91bmQgdG8gdGhpcyB2LWZvci4gKHNlZSAjOTI5KVxuXHQgKlxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAqIEBwYXJhbSB7Q29tbWVudHxUZXh0fSBhbmNob3Jcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAqIEByZXR1cm4ge0ZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZpbmRQcmV2RnJhZyhmcmFnLCBhbmNob3IsIGlkKSB7XG5cdCAgdmFyIGVsID0gZnJhZy5ub2RlLnByZXZpb3VzU2libGluZztcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIWVsKSByZXR1cm47XG5cdCAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuXHQgIHdoaWxlICgoIWZyYWcgfHwgZnJhZy5mb3JJZCAhPT0gaWQgfHwgIWZyYWcuaW5zZXJ0ZWQpICYmIGVsICE9PSBhbmNob3IpIHtcblx0ICAgIGVsID0gZWwucHJldmlvdXNTaWJsaW5nO1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIWVsKSByZXR1cm47XG5cdCAgICBmcmFnID0gZWwuX192X2ZyYWc7XG5cdCAgfVxuXHQgIHJldHVybiBmcmFnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmluZCBhIHZtIGZyb20gYSBmcmFnbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcmV0dXJuIHtWdWV8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZpbmRWbUZyb21GcmFnKGZyYWcpIHtcblx0ICB2YXIgbm9kZSA9IGZyYWcubm9kZTtcblx0ICAvLyBoYW5kbGUgbXVsdGktbm9kZSBmcmFnXG5cdCAgaWYgKGZyYWcuZW5kKSB7XG5cdCAgICB3aGlsZSAoIW5vZGUuX192dWVfXyAmJiBub2RlICE9PSBmcmFnLmVuZCAmJiBub2RlLm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gbm9kZS5fX3Z1ZV9fO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGEgcmFuZ2UgYXJyYXkgZnJvbSBnaXZlbiBudW1iZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBuXG5cdCAqIEByZXR1cm4ge0FycmF5fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJhbmdlKG4pIHtcblx0ICB2YXIgaSA9IC0xO1xuXHQgIHZhciByZXQgPSBuZXcgQXJyYXkoTWF0aC5mbG9vcihuKSk7XG5cdCAgd2hpbGUgKCsraSA8IG4pIHtcblx0ICAgIHJldFtpXSA9IGk7XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgdGhlIHRyYWNrIGJ5IGtleSBmb3IgYW4gaXRlbS5cblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW3RyYWNrQnlLZXldXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSkge1xuXHQgIHJldHVybiB0cmFja0J5S2V5ID8gdHJhY2tCeUtleSA9PT0gJyRpbmRleCcgPyBpbmRleCA6IHRyYWNrQnlLZXkuY2hhckF0KDApLm1hdGNoKC9cXHcvKSA/IGdldFBhdGgodmFsdWUsIHRyYWNrQnlLZXkpIDogdmFsdWVbdHJhY2tCeUtleV0gOiBrZXkgfHwgdmFsdWU7XG5cdH1cblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgdkZvci53YXJuRHVwbGljYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICB3YXJuKCdEdXBsaWNhdGUgdmFsdWUgZm91bmQgaW4gdi1mb3I9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIjogJyArIEpTT04uc3RyaW5naWZ5KHZhbHVlKSArICcuIFVzZSB0cmFjay1ieT1cIiRpbmRleFwiIGlmICcgKyAneW91IGFyZSBleHBlY3RpbmcgZHVwbGljYXRlIHZhbHVlcy4nLCB0aGlzLnZtKTtcblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgdklmID0ge1xuXHRcblx0ICBwcmlvcml0eTogSUYsXG5cdCAgdGVybWluYWw6IHRydWUsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgaWYgKCFlbC5fX3Z1ZV9fKSB7XG5cdCAgICAgIC8vIGNoZWNrIGVsc2UgYmxvY2tcblx0ICAgICAgdmFyIG5leHQgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdCAgICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG5cdCAgICAgICAgcmVtb3ZlKG5leHQpO1xuXHQgICAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcblx0ICAgICAgfVxuXHQgICAgICAvLyBjaGVjayBtYWluIGJsb2NrXG5cdCAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWlmJyk7XG5cdCAgICAgIHJlcGxhY2UoZWwsIHRoaXMuYW5jaG9yKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1pZj1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgY2Fubm90IGJlICcgKyAndXNlZCBvbiBhbiBpbnN0YW5jZSByb290IGVsZW1lbnQuJywgdGhpcy52bSk7XG5cdCAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICh0aGlzLmludmFsaWQpIHJldHVybjtcblx0ICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICBpZiAoIXRoaXMuZnJhZykge1xuXHQgICAgICAgIHRoaXMuaW5zZXJ0KCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMucmVtb3ZlKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoKSB7XG5cdCAgICBpZiAodGhpcy5lbHNlRnJhZykge1xuXHQgICAgICB0aGlzLmVsc2VGcmFnLnJlbW92ZSgpO1xuXHQgICAgICB0aGlzLmVsc2VGcmFnID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIC8vIGxhenkgaW5pdCBmYWN0b3J5XG5cdCAgICBpZiAoIXRoaXMuZmFjdG9yeSkge1xuXHQgICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5mcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICB0aGlzLmZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcblx0ICB9LFxuXHRcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZSgpIHtcblx0ICAgIGlmICh0aGlzLmZyYWcpIHtcblx0ICAgICAgdGhpcy5mcmFnLnJlbW92ZSgpO1xuXHQgICAgICB0aGlzLmZyYWcgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuZWxzZUVsICYmICF0aGlzLmVsc2VGcmFnKSB7XG5cdCAgICAgIGlmICghdGhpcy5lbHNlRmFjdG9yeSkge1xuXHQgICAgICAgIHRoaXMuZWxzZUZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMuZWxzZUVsLl9jb250ZXh0IHx8IHRoaXMudm0sIHRoaXMuZWxzZUVsKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmVsc2VGcmFnID0gdGhpcy5lbHNlRmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgICB0aGlzLmVsc2VGcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy5mcmFnKSB7XG5cdCAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5lbHNlRnJhZykge1xuXHQgICAgICB0aGlzLmVsc2VGcmFnLmRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgc2hvdyA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIGNoZWNrIGVsc2UgYmxvY2tcblx0ICAgIHZhciBuZXh0ID0gdGhpcy5lbC5uZXh0RWxlbWVudFNpYmxpbmc7XG5cdCAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuXHQgICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHRoaXMuYXBwbHkodGhpcy5lbCwgdmFsdWUpO1xuXHQgICAgaWYgKHRoaXMuZWxzZUVsKSB7XG5cdCAgICAgIHRoaXMuYXBwbHkodGhpcy5lbHNlRWwsICF2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgYXBwbHk6IGZ1bmN0aW9uIGFwcGx5KGVsLCB2YWx1ZSkge1xuXHQgICAgaWYgKGluRG9jKGVsKSkge1xuXHQgICAgICBhcHBseVRyYW5zaXRpb24oZWwsIHZhbHVlID8gMSA6IC0xLCB0b2dnbGUsIHRoaXMudm0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdG9nZ2xlKCk7XG5cdCAgICB9XG5cdCAgICBmdW5jdGlvbiB0b2dnbGUoKSB7XG5cdCAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSB2YWx1ZSA/ICcnIDogJ25vbmUnO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciB0ZXh0JDIgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdmFyIGlzUmFuZ2UgPSBlbC50eXBlID09PSAncmFuZ2UnO1xuXHQgICAgdmFyIGxhenkgPSB0aGlzLnBhcmFtcy5sYXp5O1xuXHQgICAgdmFyIG51bWJlciA9IHRoaXMucGFyYW1zLm51bWJlcjtcblx0ICAgIHZhciBkZWJvdW5jZSA9IHRoaXMucGFyYW1zLmRlYm91bmNlO1xuXHRcblx0ICAgIC8vIGhhbmRsZSBjb21wb3NpdGlvbiBldmVudHMuXG5cdCAgICAvLyAgIGh0dHA6Ly9ibG9nLmV2YW55b3UubWUvMjAxNC8wMS8wMy9jb21wb3NpdGlvbi1ldmVudC9cblx0ICAgIC8vIHNraXAgdGhpcyBmb3IgQW5kcm9pZCBiZWNhdXNlIGl0IGhhbmRsZXMgY29tcG9zaXRpb25cblx0ICAgIC8vIGV2ZW50cyBxdWl0ZSBkaWZmZXJlbnRseS4gQW5kcm9pZCBkb2Vzbid0IHRyaWdnZXJcblx0ICAgIC8vIGNvbXBvc2l0aW9uIGV2ZW50cyBmb3IgbGFuZ3VhZ2UgaW5wdXQgbWV0aG9kcyBlLmcuXG5cdCAgICAvLyBDaGluZXNlLCBidXQgaW5zdGVhZCB0cmlnZ2VycyB0aGVtIGZvciBzcGVsbGluZ1xuXHQgICAgLy8gc3VnZ2VzdGlvbnMuLi4gKHNlZSBEaXNjdXNzaW9uLyMxNjIpXG5cdCAgICB2YXIgY29tcG9zaW5nID0gZmFsc2U7XG5cdCAgICBpZiAoIWlzQW5kcm9pZCAmJiAhaXNSYW5nZSkge1xuXHQgICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbnN0YXJ0JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNvbXBvc2luZyA9IHRydWU7XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLm9uKCdjb21wb3NpdGlvbmVuZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjb21wb3NpbmcgPSBmYWxzZTtcblx0ICAgICAgICAvLyBpbiBJRTExIHRoZSBcImNvbXBvc2l0aW9uZW5kXCIgZXZlbnQgZmlyZXMgQUZURVJcblx0ICAgICAgICAvLyB0aGUgXCJpbnB1dFwiIGV2ZW50LCBzbyB0aGUgaW5wdXQgaGFuZGxlciBpcyBibG9ja2VkXG5cdCAgICAgICAgLy8gYXQgdGhlIGVuZC4uLiBoYXZlIHRvIGNhbGwgaXQgaGVyZS5cblx0ICAgICAgICAvL1xuXHQgICAgICAgIC8vICMxMzI3OiBpbiBsYXp5IG1vZGUgdGhpcyBpcyB1bmVjZXNzYXJ5LlxuXHQgICAgICAgIGlmICghbGF6eSkge1xuXHQgICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcHJldmVudCBtZXNzaW5nIHdpdGggdGhlIGlucHV0IHdoZW4gdXNlciBpcyB0eXBpbmcsXG5cdCAgICAvLyBhbmQgZm9yY2UgdXBkYXRlIG9uIGJsdXIuXG5cdCAgICB0aGlzLmZvY3VzZWQgPSBmYWxzZTtcblx0ICAgIGlmICghaXNSYW5nZSAmJiAhbGF6eSkge1xuXHQgICAgICB0aGlzLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLmZvY3VzZWQgPSB0cnVlO1xuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLmZvY3VzZWQgPSBmYWxzZTtcblx0ICAgICAgICAvLyBkbyBub3Qgc3luYyB2YWx1ZSBhZnRlciBmcmFnbWVudCByZW1vdmFsICgjMjAxNylcblx0ICAgICAgICBpZiAoIXNlbGYuX2ZyYWcgfHwgc2VsZi5fZnJhZy5pbnNlcnRlZCkge1xuXHQgICAgICAgICAgc2VsZi5yYXdMaXN0ZW5lcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gTm93IGF0dGFjaCB0aGUgbWFpbiBsaXN0ZW5lclxuXHQgICAgdGhpcy5saXN0ZW5lciA9IHRoaXMucmF3TGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChjb21wb3NpbmcgfHwgIXNlbGYuX2JvdW5kKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciB2YWwgPSBudW1iZXIgfHwgaXNSYW5nZSA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuXHQgICAgICBzZWxmLnNldCh2YWwpO1xuXHQgICAgICAvLyBmb3JjZSB1cGRhdGUgb24gbmV4dCB0aWNrIHRvIGF2b2lkIGxvY2sgJiBzYW1lIHZhbHVlXG5cdCAgICAgIC8vIGFsc28gb25seSB1cGRhdGUgd2hlbiB1c2VyIGlzIG5vdCB0eXBpbmdcblx0ICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChzZWxmLl9ib3VuZCAmJiAhc2VsZi5mb2N1c2VkKSB7XG5cdCAgICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLnZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBhcHBseSBkZWJvdW5jZVxuXHQgICAgaWYgKGRlYm91bmNlKSB7XG5cdCAgICAgIHRoaXMubGlzdGVuZXIgPSBfZGVib3VuY2UodGhpcy5saXN0ZW5lciwgZGVib3VuY2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFN1cHBvcnQgalF1ZXJ5IGV2ZW50cywgc2luY2UgalF1ZXJ5LnRyaWdnZXIoKSBkb2Vzbid0XG5cdCAgICAvLyB0cmlnZ2VyIG5hdGl2ZSBldmVudHMgaW4gc29tZSBjYXNlcyBhbmQgc29tZSBwbHVnaW5zXG5cdCAgICAvLyByZWx5IG9uICQudHJpZ2dlcigpXG5cdCAgICAvL1xuXHQgICAgLy8gV2Ugd2FudCB0byBtYWtlIHN1cmUgaWYgYSBsaXN0ZW5lciBpcyBhdHRhY2hlZCB1c2luZ1xuXHQgICAgLy8galF1ZXJ5LCBpdCBpcyBhbHNvIHJlbW92ZWQgd2l0aCBqUXVlcnksIHRoYXQncyB3aHlcblx0ICAgIC8vIHdlIGRvIHRoZSBjaGVjayBmb3IgZWFjaCBkaXJlY3RpdmUgaW5zdGFuY2UgYW5kXG5cdCAgICAvLyBzdG9yZSB0aGF0IGNoZWNrIHJlc3VsdCBvbiBpdHNlbGYuIFRoaXMgYWxzbyBhbGxvd3Ncblx0ICAgIC8vIGVhc2llciB0ZXN0IGNvdmVyYWdlIGNvbnRyb2wgYnkgdW5zZXR0aW5nIHRoZSBnbG9iYWxcblx0ICAgIC8vIGpRdWVyeSB2YXJpYWJsZSBpbiB0ZXN0cy5cblx0ICAgIHRoaXMuaGFzalF1ZXJ5ID0gdHlwZW9mIGpRdWVyeSA9PT0gJ2Z1bmN0aW9uJztcblx0ICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuXHQgICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9uID8gJ29uJyA6ICdiaW5kJztcblx0ICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcblx0ICAgICAgaWYgKCFsYXp5KSB7XG5cdCAgICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcblx0ICAgICAgaWYgKCFsYXp5KSB7XG5cdCAgICAgICAgdGhpcy5vbignaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIElFOSBkb2Vzbid0IGZpcmUgaW5wdXQgZXZlbnQgb24gYmFja3NwYWNlL2RlbC9jdXRcblx0ICAgIGlmICghbGF6eSAmJiBpc0lFOSkge1xuXHQgICAgICB0aGlzLm9uKCdjdXQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgbmV4dFRpY2soc2VsZi5saXN0ZW5lcik7XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG5cdCAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gNDYgfHwgZS5rZXlDb2RlID09PSA4KSB7XG5cdCAgICAgICAgICBzZWxmLmxpc3RlbmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBzZXQgaW5pdGlhbCB2YWx1ZSBpZiBwcmVzZW50XG5cdCAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2YWx1ZScpIHx8IGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScgJiYgZWwudmFsdWUudHJpbSgpKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgLy8gIzMwMjkgb25seSB1cGRhdGUgd2hlbiB0aGUgdmFsdWUgY2hhbmdlcy4gVGhpcyBwcmV2ZW50XG5cdCAgICAvLyBicm93c2VycyBmcm9tIG92ZXJ3cml0aW5nIHZhbHVlcyBsaWtlIHNlbGVjdGlvblN0YXJ0XG5cdCAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgICBpZiAodmFsdWUgIT09IHRoaXMuZWwudmFsdWUpIHRoaXMuZWwudmFsdWUgPSB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcblx0ICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vZmYgPyAnb2ZmJyA6ICd1bmJpbmQnO1xuXHQgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHJhZGlvID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0XG5cdCAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAvLyB2YWx1ZSBvdmVyd3JpdGUgdmlhIHYtYmluZDp2YWx1ZVxuXHQgICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpKSB7XG5cdCAgICAgICAgcmV0dXJuIGVsLl92YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgdmFsID0gZWwudmFsdWU7XG5cdCAgICAgIGlmIChzZWxmLnBhcmFtcy5udW1iZXIpIHtcblx0ICAgICAgICB2YWwgPSB0b051bWJlcih2YWwpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWw7XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHNlbGYuc2V0KHNlbGYuZ2V0VmFsdWUoKSk7XG5cdCAgICB9O1xuXHQgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdFxuXHQgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdGhpcy5lbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgc2VsZWN0ID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHRcblx0ICAgIC8vIG1ldGhvZCB0byBmb3JjZSB1cGRhdGUgRE9NIHVzaW5nIGxhdGVzdCB2YWx1ZS5cblx0ICAgIHRoaXMuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChzZWxmLl93YXRjaGVyKSB7XG5cdCAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci5nZXQoKSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpcGxlIHNlbGVjdFxuXHQgICAgdmFyIG11bHRpcGxlID0gdGhpcy5tdWx0aXBsZSA9IGVsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKTtcblx0XG5cdCAgICAvLyBhdHRhY2ggbGlzdGVuZXJcblx0ICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSk7XG5cdCAgICAgIHZhbHVlID0gc2VsZi5wYXJhbXMubnVtYmVyID8gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5tYXAodG9OdW1iZXIpIDogdG9OdW1iZXIodmFsdWUpIDogdmFsdWU7XG5cdCAgICAgIHNlbGYuc2V0KHZhbHVlKTtcblx0ICAgIH07XG5cdCAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0XG5cdCAgICAvLyBpZiBoYXMgaW5pdGlhbCB2YWx1ZSwgc2V0IGFmdGVyQmluZFxuXHQgICAgdmFyIGluaXRWYWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSwgdHJ1ZSk7XG5cdCAgICBpZiAobXVsdGlwbGUgJiYgaW5pdFZhbHVlLmxlbmd0aCB8fCAhbXVsdGlwbGUgJiYgaW5pdFZhbHVlICE9PSBudWxsKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBBbGwgbWFqb3IgYnJvd3NlcnMgZXhjZXB0IEZpcmVmb3ggcmVzZXRzXG5cdCAgICAvLyBzZWxlY3RlZEluZGV4IHdpdGggdmFsdWUgLTEgdG8gMCB3aGVuIHRoZSBlbGVtZW50XG5cdCAgICAvLyBpcyBhcHBlbmRlZCB0byBhIG5ldyBwYXJlbnQsIHRoZXJlZm9yZSB3ZSBoYXZlIHRvXG5cdCAgICAvLyBmb3JjZSBhIERPTSB1cGRhdGUgd2hlbmV2ZXIgdGhhdCBoYXBwZW5zLi4uXG5cdCAgICB0aGlzLnZtLiRvbignaG9vazphdHRhY2hlZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgbmV4dFRpY2soX3RoaXMuZm9yY2VVcGRhdGUpO1xuXHQgICAgfSk7XG5cdCAgICBpZiAoIWluRG9jKGVsKSkge1xuXHQgICAgICBuZXh0VGljayh0aGlzLmZvcmNlVXBkYXRlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcblx0ICAgIHZhciBtdWx0aSA9IHRoaXMubXVsdGlwbGUgJiYgaXNBcnJheSh2YWx1ZSk7XG5cdCAgICB2YXIgb3B0aW9ucyA9IGVsLm9wdGlvbnM7XG5cdCAgICB2YXIgaSA9IG9wdGlvbnMubGVuZ3RoO1xuXHQgICAgdmFyIG9wLCB2YWw7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIG9wID0gb3B0aW9uc1tpXTtcblx0ICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gb3AuX3ZhbHVlIDogb3AudmFsdWU7XG5cdCAgICAgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuXHQgICAgICBvcC5zZWxlY3RlZCA9IG11bHRpID8gaW5kZXhPZiQxKHZhbHVlLCB2YWwpID4gLTEgOiBsb29zZUVxdWFsKHZhbHVlLCB2YWwpO1xuXHQgICAgICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0ICAgIHRoaXMudm0uJG9mZignaG9vazphdHRhY2hlZCcsIHRoaXMuZm9yY2VVcGRhdGUpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBHZXQgc2VsZWN0IHZhbHVlXG5cdCAqXG5cdCAqIEBwYXJhbSB7U2VsZWN0RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtCb29sZWFufSBtdWx0aVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGluaXRcblx0ICogQHJldHVybiB7QXJyYXl8Kn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRWYWx1ZShlbCwgbXVsdGksIGluaXQpIHtcblx0ICB2YXIgcmVzID0gbXVsdGkgPyBbXSA6IG51bGw7XG5cdCAgdmFyIG9wLCB2YWwsIHNlbGVjdGVkO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG9wID0gZWwub3B0aW9uc1tpXTtcblx0ICAgIHNlbGVjdGVkID0gaW5pdCA/IG9wLmhhc0F0dHJpYnV0ZSgnc2VsZWN0ZWQnKSA6IG9wLnNlbGVjdGVkO1xuXHQgICAgaWYgKHNlbGVjdGVkKSB7XG5cdCAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuXHQgICAgICBpZiAobXVsdGkpIHtcblx0ICAgICAgICByZXMucHVzaCh2YWwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB2YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIE5hdGl2ZSBBcnJheS5pbmRleE9mIHVzZXMgc3RyaWN0IGVxdWFsLCBidXQgaW4gdGhpc1xuXHQgKiBjYXNlIHdlIG5lZWQgdG8gbWF0Y2ggc3RyaW5nL251bWJlcnMgd2l0aCBjdXN0b20gZXF1YWwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFyclxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluZGV4T2YkMShhcnIsIHZhbCkge1xuXHQgIHZhciBpID0gYXJyLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBpZiAobG9vc2VFcXVhbChhcnJbaV0sIHZhbCkpIHtcblx0ICAgICAgcmV0dXJuIGk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiAtMTtcblx0fVxuXHRcblx0dmFyIGNoZWNrYm94ID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0XG5cdCAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gZWwuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gZWwuX3ZhbHVlIDogc2VsZi5wYXJhbXMubnVtYmVyID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG5cdCAgICB9O1xuXHRcblx0ICAgIGZ1bmN0aW9uIGdldEJvb2xlYW5WYWx1ZSgpIHtcblx0ICAgICAgdmFyIHZhbCA9IGVsLmNoZWNrZWQ7XG5cdCAgICAgIGlmICh2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuXHQgICAgICAgIHJldHVybiBlbC5fdHJ1ZVZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghdmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfZmFsc2VWYWx1ZScpKSB7XG5cdCAgICAgICAgcmV0dXJuIGVsLl9mYWxzZVZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWw7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIG1vZGVsID0gc2VsZi5fd2F0Y2hlci52YWx1ZTtcblx0ICAgICAgaWYgKGlzQXJyYXkobW9kZWwpKSB7XG5cdCAgICAgICAgdmFyIHZhbCA9IHNlbGYuZ2V0VmFsdWUoKTtcblx0ICAgICAgICBpZiAoZWwuY2hlY2tlZCkge1xuXHQgICAgICAgICAgaWYgKGluZGV4T2YobW9kZWwsIHZhbCkgPCAwKSB7XG5cdCAgICAgICAgICAgIG1vZGVsLnB1c2godmFsKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbW9kZWwuJHJlbW92ZSh2YWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZWxmLnNldChnZXRCb29sZWFuVmFsdWUoKSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgIGVsLmNoZWNrZWQgPSBpbmRleE9mKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpID4gLTE7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuXHQgICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCBlbC5fdHJ1ZVZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBlbC5jaGVja2VkID0gISF2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBoYW5kbGVycyA9IHtcblx0ICB0ZXh0OiB0ZXh0JDIsXG5cdCAgcmFkaW86IHJhZGlvLFxuXHQgIHNlbGVjdDogc2VsZWN0LFxuXHQgIGNoZWNrYm94OiBjaGVja2JveFxuXHR9O1xuXHRcblx0dmFyIG1vZGVsID0ge1xuXHRcblx0ICBwcmlvcml0eTogTU9ERUwsXG5cdCAgdHdvV2F5OiB0cnVlLFxuXHQgIGhhbmRsZXJzOiBoYW5kbGVycyxcblx0ICBwYXJhbXM6IFsnbGF6eScsICdudW1iZXInLCAnZGVib3VuY2UnXSxcblx0XG5cdCAgLyoqXG5cdCAgICogUG9zc2libGUgZWxlbWVudHM6XG5cdCAgICogICA8c2VsZWN0PlxuXHQgICAqICAgPHRleHRhcmVhPlxuXHQgICAqICAgPGlucHV0IHR5cGU9XCIqXCI+XG5cdCAgICogICAgIC0gdGV4dFxuXHQgICAqICAgICAtIGNoZWNrYm94XG5cdCAgICogICAgIC0gcmFkaW9cblx0ICAgKiAgICAgLSBudW1iZXJcblx0ICAgKi9cblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIGZyaWVuZGx5IHdhcm5pbmcuLi5cblx0ICAgIHRoaXMuY2hlY2tGaWx0ZXJzKCk7XG5cdCAgICBpZiAodGhpcy5oYXNSZWFkICYmICF0aGlzLmhhc1dyaXRlKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyBhIHJlYWQtb25seSBmaWx0ZXIgd2l0aCAnICsgJ3YtbW9kZWw9XCInICsgdGhpcy5kZXNjcmlwdG9yLnJhdyArICdcIi4gJyArICdZb3UgbWlnaHQgd2FudCB0byB1c2UgYSB0d28td2F5IGZpbHRlciB0byBlbnN1cmUgY29ycmVjdCBiZWhhdmlvci4nLCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB2YXIgdGFnID0gZWwudGFnTmFtZTtcblx0ICAgIHZhciBoYW5kbGVyO1xuXHQgICAgaWYgKHRhZyA9PT0gJ0lOUFVUJykge1xuXHQgICAgICBoYW5kbGVyID0gaGFuZGxlcnNbZWwudHlwZV0gfHwgaGFuZGxlcnMudGV4dDtcblx0ICAgIH0gZWxzZSBpZiAodGFnID09PSAnU0VMRUNUJykge1xuXHQgICAgICBoYW5kbGVyID0gaGFuZGxlcnMuc2VsZWN0O1xuXHQgICAgfSBlbHNlIGlmICh0YWcgPT09ICdURVhUQVJFQScpIHtcblx0ICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnRleHQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtbW9kZWwgZG9lcyBub3Qgc3VwcG9ydCBlbGVtZW50IHR5cGU6ICcgKyB0YWcsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBlbC5fX3ZfbW9kZWwgPSB0aGlzO1xuXHQgICAgaGFuZGxlci5iaW5kLmNhbGwodGhpcyk7XG5cdCAgICB0aGlzLnVwZGF0ZSA9IGhhbmRsZXIudXBkYXRlO1xuXHQgICAgdGhpcy5fdW5iaW5kID0gaGFuZGxlci51bmJpbmQ7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgcmVhZC93cml0ZSBmaWx0ZXIgc3RhdHMuXG5cdCAgICovXG5cdFxuXHQgIGNoZWNrRmlsdGVyczogZnVuY3Rpb24gY2hlY2tGaWx0ZXJzKCkge1xuXHQgICAgdmFyIGZpbHRlcnMgPSB0aGlzLmZpbHRlcnM7XG5cdCAgICBpZiAoIWZpbHRlcnMpIHJldHVybjtcblx0ICAgIHZhciBpID0gZmlsdGVycy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhciBmaWx0ZXIgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBmaWx0ZXJzW2ldLm5hbWUpO1xuXHQgICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCBmaWx0ZXIucmVhZCkge1xuXHQgICAgICAgIHRoaXMuaGFzUmVhZCA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGZpbHRlci53cml0ZSkge1xuXHQgICAgICAgIHRoaXMuaGFzV3JpdGUgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLmVsLl9fdl9tb2RlbCA9IG51bGw7XG5cdCAgICB0aGlzLl91bmJpbmQgJiYgdGhpcy5fdW5iaW5kKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8ga2V5Q29kZSBhbGlhc2VzXG5cdHZhciBrZXlDb2RlcyA9IHtcblx0ICBlc2M6IDI3LFxuXHQgIHRhYjogOSxcblx0ICBlbnRlcjogMTMsXG5cdCAgc3BhY2U6IDMyLFxuXHQgICdkZWxldGUnOiBbOCwgNDZdLFxuXHQgIHVwOiAzOCxcblx0ICBsZWZ0OiAzNyxcblx0ICByaWdodDogMzksXG5cdCAgZG93bjogNDBcblx0fTtcblx0XG5cdGZ1bmN0aW9uIGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKSB7XG5cdCAgdmFyIGNvZGVzID0ga2V5cy5tYXAoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgdmFyIGNoYXJDb2RlID0ga2V5LmNoYXJDb2RlQXQoMCk7XG5cdCAgICBpZiAoY2hhckNvZGUgPiA0NyAmJiBjaGFyQ29kZSA8IDU4KSB7XG5cdCAgICAgIHJldHVybiBwYXJzZUludChrZXksIDEwKTtcblx0ICAgIH1cblx0ICAgIGlmIChrZXkubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIGNoYXJDb2RlID0ga2V5LnRvVXBwZXJDYXNlKCkuY2hhckNvZGVBdCgwKTtcblx0ICAgICAgaWYgKGNoYXJDb2RlID4gNjQgJiYgY2hhckNvZGUgPCA5MSkge1xuXHQgICAgICAgIHJldHVybiBjaGFyQ29kZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIGtleUNvZGVzW2tleV07XG5cdCAgfSk7XG5cdCAgY29kZXMgPSBbXS5jb25jYXQuYXBwbHkoW10sIGNvZGVzKTtcblx0ICByZXR1cm4gZnVuY3Rpb24ga2V5SGFuZGxlcihlKSB7XG5cdCAgICBpZiAoY29kZXMuaW5kZXhPZihlLmtleUNvZGUpID4gLTEpIHtcblx0ICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzdG9wRmlsdGVyKGhhbmRsZXIpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gc3RvcEhhbmRsZXIoZSkge1xuXHQgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0ICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gcHJldmVudEZpbHRlcihoYW5kbGVyKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHByZXZlbnRIYW5kbGVyKGUpIHtcblx0ICAgIGUucHJldmVudERlZmF1bHQoKTtcblx0ICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc2VsZkZpbHRlcihoYW5kbGVyKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHNlbGZIYW5kbGVyKGUpIHtcblx0ICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG5cdCAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIG9uJDEgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBPTixcblx0ICBhY2NlcHRTdGF0ZW1lbnQ6IHRydWUsXG5cdCAga2V5Q29kZXM6IGtleUNvZGVzLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gZGVhbCB3aXRoIGlmcmFtZXNcblx0ICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgPT09ICdJRlJBTUUnICYmIHRoaXMuYXJnICE9PSAnbG9hZCcpIHtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICB0aGlzLmlmcmFtZUJpbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgb24oc2VsZi5lbC5jb250ZW50V2luZG93LCBzZWxmLmFyZywgc2VsZi5oYW5kbGVyLCBzZWxmLm1vZGlmaWVycy5jYXB0dXJlKTtcblx0ICAgICAgfTtcblx0ICAgICAgdGhpcy5vbignbG9hZCcsIHRoaXMuaWZyYW1lQmluZCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaGFuZGxlcikge1xuXHQgICAgLy8gc3R1YiBhIG5vb3AgZm9yIHYtb24gd2l0aCBubyB2YWx1ZSxcblx0ICAgIC8vIGUuZy4gQG1vdXNlZG93bi5wcmV2ZW50XG5cdCAgICBpZiAoIXRoaXMuZGVzY3JpcHRvci5yYXcpIHtcblx0ICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uICgpIHt9O1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3Ytb246JyArIHRoaXMuYXJnICsgJz1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgZXhwZWN0cyBhIGZ1bmN0aW9uIHZhbHVlLCAnICsgJ2dvdCAnICsgaGFuZGxlciwgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBhcHBseSBtb2RpZmllcnNcblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5zdG9wKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBzdG9wRmlsdGVyKGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLnByZXZlbnQpIHtcblx0ICAgICAgaGFuZGxlciA9IHByZXZlbnRGaWx0ZXIoaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMuc2VsZikge1xuXHQgICAgICBoYW5kbGVyID0gc2VsZkZpbHRlcihoYW5kbGVyKTtcblx0ICAgIH1cblx0ICAgIC8vIGtleSBmaWx0ZXJcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5tb2RpZmllcnMpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgIHJldHVybiBrZXkgIT09ICdzdG9wJyAmJiBrZXkgIT09ICdwcmV2ZW50JyAmJiBrZXkgIT09ICdzZWxmJyAmJiBrZXkgIT09ICdjYXB0dXJlJztcblx0ICAgIH0pO1xuXHQgICAgaWYgKGtleXMubGVuZ3RoKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cyk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5yZXNldCgpO1xuXHQgICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcblx0XG5cdCAgICBpZiAodGhpcy5pZnJhbWVCaW5kKSB7XG5cdCAgICAgIHRoaXMuaWZyYW1lQmluZCgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb24odGhpcy5lbCwgdGhpcy5hcmcsIHRoaXMuaGFuZGxlciwgdGhpcy5tb2RpZmllcnMuY2FwdHVyZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5pZnJhbWVCaW5kID8gdGhpcy5lbC5jb250ZW50V2luZG93IDogdGhpcy5lbDtcblx0ICAgIGlmICh0aGlzLmhhbmRsZXIpIHtcblx0ICAgICAgb2ZmKGVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMucmVzZXQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcHJlZml4ZXMgPSBbJy13ZWJraXQtJywgJy1tb3otJywgJy1tcy0nXTtcblx0dmFyIGNhbWVsUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXTtcblx0dmFyIGltcG9ydGFudFJFID0gLyFpbXBvcnRhbnQ7PyQvO1xuXHR2YXIgcHJvcENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdHZhciB0ZXN0RWwgPSBudWxsO1xuXHRcblx0dmFyIHN0eWxlID0ge1xuXHRcblx0ICBkZWVwOiB0cnVlLFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdGhpcy5lbC5zdHlsZS5jc3NUZXh0ID0gdmFsdWU7XG5cdCAgICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlLnJlZHVjZShleHRlbmQsIHt9KSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgaGFuZGxlT2JqZWN0OiBmdW5jdGlvbiBoYW5kbGVPYmplY3QodmFsdWUpIHtcblx0ICAgIC8vIGNhY2hlIG9iamVjdCBzdHlsZXMgc28gdGhhdCBvbmx5IGNoYW5nZWQgcHJvcHNcblx0ICAgIC8vIGFyZSBhY3R1YWxseSB1cGRhdGVkLlxuXHQgICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSB8fCAodGhpcy5jYWNoZSA9IHt9KTtcblx0ICAgIHZhciBuYW1lLCB2YWw7XG5cdCAgICBmb3IgKG5hbWUgaW4gY2FjaGUpIHtcblx0ICAgICAgaWYgKCEobmFtZSBpbiB2YWx1ZSkpIHtcblx0ICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCBudWxsKTtcblx0ICAgICAgICBkZWxldGUgY2FjaGVbbmFtZV07XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGZvciAobmFtZSBpbiB2YWx1ZSkge1xuXHQgICAgICB2YWwgPSB2YWx1ZVtuYW1lXTtcblx0ICAgICAgaWYgKHZhbCAhPT0gY2FjaGVbbmFtZV0pIHtcblx0ICAgICAgICBjYWNoZVtuYW1lXSA9IHZhbDtcblx0ICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCB2YWwpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiBoYW5kbGVTaW5nbGUocHJvcCwgdmFsdWUpIHtcblx0ICAgIHByb3AgPSBub3JtYWxpemUocHJvcCk7XG5cdCAgICBpZiAoIXByb3ApIHJldHVybjsgLy8gdW5zdXBwb3J0ZWQgcHJvcFxuXHQgICAgLy8gY2FzdCBwb3NzaWJsZSBudW1iZXJzL2Jvb2xlYW5zIGludG8gc3RyaW5nc1xuXHQgICAgaWYgKHZhbHVlICE9IG51bGwpIHZhbHVlICs9ICcnO1xuXHQgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgIHZhciBpc0ltcG9ydGFudCA9IGltcG9ydGFudFJFLnRlc3QodmFsdWUpID8gJ2ltcG9ydGFudCcgOiAnJztcblx0ICAgICAgaWYgKGlzSW1wb3J0YW50KSB7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgIHdhcm4oJ0l0XFwncyBwcm9iYWJseSBhIGJhZCBpZGVhIHRvIHVzZSAhaW1wb3J0YW50IHdpdGggaW5saW5lIHJ1bGVzLiAnICsgJ1RoaXMgZmVhdHVyZSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBWdWUuJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZShpbXBvcnRhbnRSRSwgJycpLnRyaW0oKTtcblx0ICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHByb3Aua2ViYWIsIHZhbHVlLCBpc0ltcG9ydGFudCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9IHZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gJyc7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBOb3JtYWxpemUgYSBDU1MgcHJvcGVydHkgbmFtZS5cblx0ICogLSBjYWNoZSByZXN1bHRcblx0ICogLSBhdXRvIHByZWZpeFxuXHQgKiAtIGNhbWVsQ2FzZSAtPiBkYXNoLWNhc2Vcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHByb3Bcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZShwcm9wKSB7XG5cdCAgaWYgKHByb3BDYWNoZVtwcm9wXSkge1xuXHQgICAgcmV0dXJuIHByb3BDYWNoZVtwcm9wXTtcblx0ICB9XG5cdCAgdmFyIHJlcyA9IHByZWZpeChwcm9wKTtcblx0ICBwcm9wQ2FjaGVbcHJvcF0gPSBwcm9wQ2FjaGVbcmVzXSA9IHJlcztcblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXV0byBkZXRlY3QgdGhlIGFwcHJvcHJpYXRlIHByZWZpeCBmb3IgYSBDU1MgcHJvcGVydHkuXG5cdCAqIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3BhdWxpcmlzaC81MjM2OTJcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHByb3Bcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByZWZpeChwcm9wKSB7XG5cdCAgcHJvcCA9IGh5cGhlbmF0ZShwcm9wKTtcblx0ICB2YXIgY2FtZWwgPSBjYW1lbGl6ZShwcm9wKTtcblx0ICB2YXIgdXBwZXIgPSBjYW1lbC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsLnNsaWNlKDEpO1xuXHQgIGlmICghdGVzdEVsKSB7XG5cdCAgICB0ZXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICB9XG5cdCAgdmFyIGkgPSBwcmVmaXhlcy5sZW5ndGg7XG5cdCAgdmFyIHByZWZpeGVkO1xuXHQgIGlmIChjYW1lbCAhPT0gJ2ZpbHRlcicgJiYgY2FtZWwgaW4gdGVzdEVsLnN0eWxlKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBrZWJhYjogcHJvcCxcblx0ICAgICAgY2FtZWw6IGNhbWVsXG5cdCAgICB9O1xuXHQgIH1cblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBwcmVmaXhlZCA9IGNhbWVsUHJlZml4ZXNbaV0gKyB1cHBlcjtcblx0ICAgIGlmIChwcmVmaXhlZCBpbiB0ZXN0RWwuc3R5bGUpIHtcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBrZWJhYjogcHJlZml4ZXNbaV0gKyBwcm9wLFxuXHQgICAgICAgIGNhbWVsOiBwcmVmaXhlZFxuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0Ly8geGxpbmtcblx0dmFyIHhsaW5rTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayc7XG5cdHZhciB4bGlua1JFID0gL154bGluazovO1xuXHRcblx0Ly8gY2hlY2sgZm9yIGF0dHJpYnV0ZXMgdGhhdCBwcm9oaWJpdCBpbnRlcnBvbGF0aW9uc1xuXHR2YXIgZGlzYWxsb3dlZEludGVycEF0dHJSRSA9IC9edi18Xjp8XkB8Xig/OmlzfHRyYW5zaXRpb258dHJhbnNpdGlvbi1tb2RlfGRlYm91bmNlfHRyYWNrLWJ5fHN0YWdnZXJ8ZW50ZXItc3RhZ2dlcnxsZWF2ZS1zdGFnZ2VyKSQvO1xuXHQvLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBhbHNvIHNldCB0aGVpciBjb3JyZXNwb25kaW5nIHByb3BlcnRpZXNcblx0Ly8gYmVjYXVzZSB0aGV5IG9ubHkgYWZmZWN0IHRoZSBpbml0aWFsIHN0YXRlIG9mIHRoZSBlbGVtZW50XG5cdHZhciBhdHRyV2l0aFByb3BzUkUgPSAvXig/OnZhbHVlfGNoZWNrZWR8c2VsZWN0ZWR8bXV0ZWQpJC87XG5cdC8vIHRoZXNlIGF0dHJpYnV0ZXMgZXhwZWN0IGVudW1yYXRlZCB2YWx1ZXMgb2YgXCJ0cnVlXCIgb3IgXCJmYWxzZVwiXG5cdC8vIGJ1dCBhcmUgbm90IGJvb2xlYW4gYXR0cmlidXRlc1xuXHR2YXIgZW51bWVyYXRlZEF0dHJSRSA9IC9eKD86ZHJhZ2dhYmxlfGNvbnRlbnRlZGl0YWJsZXxzcGVsbGNoZWNrKSQvO1xuXHRcblx0Ly8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgc2V0IGEgaGlkZGVuIHByb3BlcnR5IGZvclxuXHQvLyBiaW5kaW5nIHYtbW9kZWwgdG8gb2JqZWN0IHZhbHVlc1xuXHR2YXIgbW9kZWxQcm9wcyA9IHtcblx0ICB2YWx1ZTogJ192YWx1ZScsXG5cdCAgJ3RydWUtdmFsdWUnOiAnX3RydWVWYWx1ZScsXG5cdCAgJ2ZhbHNlLXZhbHVlJzogJ19mYWxzZVZhbHVlJ1xuXHR9O1xuXHRcblx0dmFyIGJpbmQkMSA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IEJJTkQsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuXHQgICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcblx0ICAgIC8vIHNob3VsZCBiZSBkZWVwIHdhdGNoIG9uIG9iamVjdCBtb2RlXG5cdCAgICBpZiAoIWF0dHIpIHtcblx0ICAgICAgdGhpcy5kZWVwID0gdHJ1ZTtcblx0ICAgIH1cblx0ICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9uIGJpbmRpbmdzXG5cdCAgICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcblx0ICAgIHZhciB0b2tlbnMgPSBkZXNjcmlwdG9yLmludGVycDtcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgLy8gaGFuZGxlIGludGVycG9sYXRpb25zIHdpdGggb25lLXRpbWUgdG9rZW5zXG5cdCAgICAgIGlmIChkZXNjcmlwdG9yLmhhc09uZVRpbWUpIHtcblx0ICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSB0b2tlbnNUb0V4cCh0b2tlbnMsIHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBvbmx5IGFsbG93IGJpbmRpbmcgb24gbmF0aXZlIGF0dHJpYnV0ZXNcblx0ICAgICAgaWYgKGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUudGVzdChhdHRyKSB8fCBhdHRyID09PSAnbmFtZScgJiYgKHRhZyA9PT0gJ1BBUlRJQUwnIHx8IHRhZyA9PT0gJ1NMT1QnKSkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybihhdHRyICsgJz1cIicgKyBkZXNjcmlwdG9yLnJhdyArICdcIjogJyArICdhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbiBpcyBub3QgYWxsb3dlZCBpbiBWdWUuanMgJyArICdkaXJlY3RpdmVzIGFuZCBzcGVjaWFsIGF0dHJpYnV0ZXMuJywgdGhpcy52bSk7XG5cdCAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG5cdCAgICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgdmFyIHJhdyA9IGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnO1xuXHQgICAgICAgIC8vIHdhcm4gc3JjXG5cdCAgICAgICAgaWYgKGF0dHIgPT09ICdzcmMnKSB7XG5cdCAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3JjXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICdhIDQwNCByZXF1ZXN0LiBVc2Ugdi1iaW5kOnNyYyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gd2FybiBzdHlsZVxuXHQgICAgICAgIGlmIChhdHRyID09PSAnc3R5bGUnKSB7XG5cdCAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3R5bGVcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ3RoZSBhdHRyaWJ1dGUgdG8gYmUgZGlzY2FyZGVkIGluIEludGVybmV0IEV4cGxvcmVyLiAnICsgJ1VzZSB2LWJpbmQ6c3R5bGUgaW5zdGVhZC4nLCB0aGlzLnZtKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHRoaXMuaW52YWxpZCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuXHQgICAgaWYgKHRoaXMuYXJnKSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvLyBzaGFyZSBvYmplY3QgaGFuZGxlciB3aXRoIHYtYmluZDpjbGFzc1xuXHQgIGhhbmRsZU9iamVjdDogc3R5bGUuaGFuZGxlT2JqZWN0LFxuXHRcblx0ICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHZhciBpbnRlcnAgPSB0aGlzLmRlc2NyaXB0b3IuaW50ZXJwO1xuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLmNhbWVsKSB7XG5cdCAgICAgIGF0dHIgPSBjYW1lbGl6ZShhdHRyKTtcblx0ICAgIH1cblx0ICAgIGlmICghaW50ZXJwICYmIGF0dHJXaXRoUHJvcHNSRS50ZXN0KGF0dHIpICYmIGF0dHIgaW4gZWwpIHtcblx0ICAgICAgdmFyIGF0dHJWYWx1ZSA9IGF0dHIgPT09ICd2YWx1ZScgPyB2YWx1ZSA9PSBudWxsIC8vIElFOSB3aWxsIHNldCBpbnB1dC52YWx1ZSB0byBcIm51bGxcIiBmb3IgbnVsbC4uLlxuXHQgICAgICA/ICcnIDogdmFsdWUgOiB2YWx1ZTtcblx0XG5cdCAgICAgIGlmIChlbFthdHRyXSAhPT0gYXR0clZhbHVlKSB7XG5cdCAgICAgICAgZWxbYXR0cl0gPSBhdHRyVmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIHNldCBtb2RlbCBwcm9wc1xuXHQgICAgdmFyIG1vZGVsUHJvcCA9IG1vZGVsUHJvcHNbYXR0cl07XG5cdCAgICBpZiAoIWludGVycCAmJiBtb2RlbFByb3ApIHtcblx0ICAgICAgZWxbbW9kZWxQcm9wXSA9IHZhbHVlO1xuXHQgICAgICAvLyB1cGRhdGUgdi1tb2RlbCBpZiBwcmVzZW50XG5cdCAgICAgIHZhciBtb2RlbCA9IGVsLl9fdl9tb2RlbDtcblx0ICAgICAgaWYgKG1vZGVsKSB7XG5cdCAgICAgICAgbW9kZWwubGlzdGVuZXIoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gZG8gbm90IHNldCB2YWx1ZSBhdHRyaWJ1dGUgZm9yIHRleHRhcmVhXG5cdCAgICBpZiAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gdXBkYXRlIGF0dHJpYnV0ZVxuXHQgICAgaWYgKGVudW1lcmF0ZWRBdHRyUkUudGVzdChhdHRyKSkge1xuXHQgICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPyAndHJ1ZScgOiAnZmFsc2UnKTtcblx0ICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gZmFsc2UpIHtcblx0ICAgICAgaWYgKGF0dHIgPT09ICdjbGFzcycpIHtcblx0ICAgICAgICAvLyBoYW5kbGUgZWRnZSBjYXNlICMxOTYwOlxuXHQgICAgICAgIC8vIGNsYXNzIGludGVycG9sYXRpb24gc2hvdWxkIG5vdCBvdmVyd3JpdGUgVnVlIHRyYW5zaXRpb24gY2xhc3Ncblx0ICAgICAgICBpZiAoZWwuX192X3RyYW5zKSB7XG5cdCAgICAgICAgICB2YWx1ZSArPSAnICcgKyBlbC5fX3ZfdHJhbnMuaWQgKyAnLXRyYW5zaXRpb24nO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZXRDbGFzcyhlbCwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2UgaWYgKHhsaW5rUkUudGVzdChhdHRyKSkge1xuXHQgICAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgZWwgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBFTCxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCF0aGlzLmFyZykge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICB2YXIgaWQgPSB0aGlzLmlkID0gY2FtZWxpemUodGhpcy5hcmcpO1xuXHQgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcblx0ICAgIGlmIChoYXNPd24ocmVmcywgaWQpKSB7XG5cdCAgICAgIHJlZnNbaWRdID0gdGhpcy5lbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHJlZnMsIGlkLCB0aGlzLmVsKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG5cdCAgICBpZiAocmVmc1t0aGlzLmlkXSA9PT0gdGhpcy5lbCkge1xuXHQgICAgICByZWZzW3RoaXMuaWRdID0gbnVsbDtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcmVmID0ge1xuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtcmVmOicgKyB0aGlzLmFyZyArICcgbXVzdCBiZSB1c2VkIG9uIGEgY2hpbGQgJyArICdjb21wb25lbnQuIEZvdW5kIG9uIDwnICsgdGhpcy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPi4nLCB0aGlzLnZtKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgY2xvYWsgPSB7XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB0aGlzLnZtLiRvbmNlKCdwcmUtaG9vazpjb21waWxlZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCd2LWNsb2FrJyk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBtdXN0IGV4cG9ydCBwbGFpbiBvYmplY3Rcblx0dmFyIGRpcmVjdGl2ZXMgPSB7XG5cdCAgdGV4dDogdGV4dCQxLFxuXHQgIGh0bWw6IGh0bWwsXG5cdCAgJ2Zvcic6IHZGb3IsXG5cdCAgJ2lmJzogdklmLFxuXHQgIHNob3c6IHNob3csXG5cdCAgbW9kZWw6IG1vZGVsLFxuXHQgIG9uOiBvbiQxLFxuXHQgIGJpbmQ6IGJpbmQkMSxcblx0ICBlbDogZWwsXG5cdCAgcmVmOiByZWYsXG5cdCAgY2xvYWs6IGNsb2FrXG5cdH07XG5cdFxuXHR2YXIgdkNsYXNzID0ge1xuXHRcblx0ICBkZWVwOiB0cnVlLFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKCF2YWx1ZSkge1xuXHQgICAgICB0aGlzLmNsZWFudXAoKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0aGlzLnNldENsYXNzKHZhbHVlLnRyaW0oKS5zcGxpdCgvXFxzKy8pKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuc2V0Q2xhc3Mobm9ybWFsaXplJDEodmFsdWUpKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBzZXRDbGFzczogZnVuY3Rpb24gc2V0Q2xhc3ModmFsdWUpIHtcblx0ICAgIHRoaXMuY2xlYW51cCh2YWx1ZSk7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgdmFsID0gdmFsdWVbaV07XG5cdCAgICAgIGlmICh2YWwpIHtcblx0ICAgICAgICBhcHBseSh0aGlzLmVsLCB2YWwsIGFkZENsYXNzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdGhpcy5wcmV2S2V5cyA9IHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIGNsZWFudXA6IGZ1bmN0aW9uIGNsZWFudXAodmFsdWUpIHtcblx0ICAgIHZhciBwcmV2S2V5cyA9IHRoaXMucHJldktleXM7XG5cdCAgICBpZiAoIXByZXZLZXlzKSByZXR1cm47XG5cdCAgICB2YXIgaSA9IHByZXZLZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIGtleSA9IHByZXZLZXlzW2ldO1xuXHQgICAgICBpZiAoIXZhbHVlIHx8IHZhbHVlLmluZGV4T2Yoa2V5KSA8IDApIHtcblx0ICAgICAgICBhcHBseSh0aGlzLmVsLCBrZXksIHJlbW92ZUNsYXNzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBOb3JtYWxpemUgb2JqZWN0cyBhbmQgYXJyYXlzIChwb3RlbnRpYWxseSBjb250YWluaW5nIG9iamVjdHMpXG5cdCAqIGludG8gYXJyYXkgb2Ygc3RyaW5ncy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXk8U3RyaW5nfE9iamVjdD59IHZhbHVlXG5cdCAqIEByZXR1cm4ge0FycmF5PFN0cmluZz59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplJDEodmFsdWUpIHtcblx0ICB2YXIgcmVzID0gW107XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgX2tleSA9IHZhbHVlW2ldO1xuXHQgICAgICBpZiAoX2tleSkge1xuXHQgICAgICAgIGlmICh0eXBlb2YgX2tleSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICAgIHJlcy5wdXNoKF9rZXkpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBrIGluIF9rZXkpIHtcblx0ICAgICAgICAgICAgaWYgKF9rZXlba10pIHJlcy5wdXNoKGspO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNPYmplY3QodmFsdWUpKSB7XG5cdCAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcblx0ICAgICAgaWYgKHZhbHVlW2tleV0pIHJlcy5wdXNoKGtleSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBZGQgb3IgcmVtb3ZlIGEgY2xhc3MvY2xhc3NlcyBvbiBhbiBlbGVtZW50XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleSBUaGUgY2xhc3MgbmFtZS4gVGhpcyBtYXkgb3IgbWF5IG5vdFxuXHQgKiAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW4gYSBzcGFjZSBjaGFyYWN0ZXIsIGluIHN1Y2ggYVxuXHQgKiAgICAgICAgICAgICAgICAgICAgIGNhc2Ugd2UnbGwgZGVhbCB3aXRoIG11bHRpcGxlIGNsYXNzXG5cdCAqICAgICAgICAgICAgICAgICAgICAgbmFtZXMgYXQgb25jZS5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhcHBseShlbCwga2V5LCBmbikge1xuXHQgIGtleSA9IGtleS50cmltKCk7XG5cdCAgaWYgKGtleS5pbmRleE9mKCcgJykgPT09IC0xKSB7XG5cdCAgICBmbihlbCwga2V5KTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgLy8gVGhlIGtleSBjb250YWlucyBvbmUgb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzLlxuXHQgIC8vIFNpbmNlIGEgY2xhc3MgbmFtZSBkb2Vzbid0IGFjY2VwdCBzdWNoIGNoYXJhY3RlcnMsIHdlXG5cdCAgLy8gdHJlYXQgaXQgYXMgbXVsdGlwbGUgY2xhc3Nlcy5cblx0ICB2YXIga2V5cyA9IGtleS5zcGxpdCgvXFxzKy8pO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGZuKGVsLCBrZXlzW2ldKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBjb21wb25lbnQgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBDT01QT05FTlQsXG5cdFxuXHQgIHBhcmFtczogWydrZWVwLWFsaXZlJywgJ3RyYW5zaXRpb24tbW9kZScsICdpbmxpbmUtdGVtcGxhdGUnXSxcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAuIFR3byBwb3NzaWJsZSB1c2FnZXM6XG5cdCAgICpcblx0ICAgKiAtIHN0YXRpYzpcblx0ICAgKiAgIDxjb21wPiBvciA8ZGl2IHYtY29tcG9uZW50PVwiY29tcFwiPlxuXHQgICAqXG5cdCAgICogLSBkeW5hbWljOlxuXHQgICAqICAgPGNvbXBvbmVudCA6aXM9XCJ2aWV3XCI+XG5cdCAgICovXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICBpZiAoIXRoaXMuZWwuX192dWVfXykge1xuXHQgICAgICAvLyBrZWVwLWFsaXZlIGNhY2hlXG5cdCAgICAgIHRoaXMua2VlcEFsaXZlID0gdGhpcy5wYXJhbXMua2VlcEFsaXZlO1xuXHQgICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgICB0aGlzLmNhY2hlID0ge307XG5cdCAgICAgIH1cblx0ICAgICAgLy8gY2hlY2sgaW5saW5lLXRlbXBsYXRlXG5cdCAgICAgIGlmICh0aGlzLnBhcmFtcy5pbmxpbmVUZW1wbGF0ZSkge1xuXHQgICAgICAgIC8vIGV4dHJhY3QgaW5saW5lIHRlbXBsYXRlIGFzIGEgRG9jdW1lbnRGcmFnbWVudFxuXHQgICAgICAgIHRoaXMuaW5saW5lVGVtcGxhdGUgPSBleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBjb21wb25lbnQgcmVzb2x1dGlvbiByZWxhdGVkIHN0YXRlXG5cdCAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gdGhpcy5Db21wb25lbnQgPSBudWxsO1xuXHQgICAgICAvLyB0cmFuc2l0aW9uIHJlbGF0ZWQgc3RhdGVcblx0ICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMgPSAwO1xuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xuXHQgICAgICAvLyBjcmVhdGUgYSByZWYgYW5jaG9yXG5cdCAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWNvbXBvbmVudCcpO1xuXHQgICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcblx0ICAgICAgLy8gcmVtb3ZlIGlzIGF0dHJpYnV0ZS5cblx0ICAgICAgLy8gdGhpcyBpcyByZW1vdmVkIGR1cmluZyBjb21waWxhdGlvbiwgYnV0IGJlY2F1c2UgY29tcGlsYXRpb24gaXNcblx0ICAgICAgLy8gY2FjaGVkLCB3aGVuIHRoZSBjb21wb25lbnQgaXMgdXNlZCBlbHNld2hlcmUgdGhpcyBhdHRyaWJ1dGVcblx0ICAgICAgLy8gd2lsbCByZW1haW4gYXQgbGluayB0aW1lLlxuXHQgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcblx0ICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJzppcycpO1xuXHQgICAgICAvLyByZW1vdmUgcmVmLCBzYW1lIGFzIGFib3ZlXG5cdCAgICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG5cdCAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtcmVmOicgKyBoeXBoZW5hdGUodGhpcy5kZXNjcmlwdG9yLnJlZikpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGlmIHN0YXRpYywgYnVpbGQgcmlnaHQgbm93LlxuXHQgICAgICBpZiAodGhpcy5saXRlcmFsKSB7XG5cdCAgICAgICAgdGhpcy5zZXRDb21wb25lbnQodGhpcy5leHByZXNzaW9uKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdjYW5ub3QgbW91bnQgY29tcG9uZW50IFwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiAnICsgJ29uIGFscmVhZHkgbW91bnRlZCBlbGVtZW50OiAnICsgdGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUHVibGljIHVwZGF0ZSwgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyIGluIHRoZSBkeW5hbWljXG5cdCAgICogbGl0ZXJhbCBzY2VuYXJpbywgZS5nLiA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cblx0ICAgKi9cblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICghdGhpcy5saXRlcmFsKSB7XG5cdCAgICAgIHRoaXMuc2V0Q29tcG9uZW50KHZhbHVlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBTd2l0Y2ggZHluYW1pYyBjb21wb25lbnRzLiBNYXkgcmVzb2x2ZSB0aGUgY29tcG9uZW50XG5cdCAgICogYXN5bmNocm9ub3VzbHksIGFuZCBwZXJmb3JtIHRyYW5zaXRpb24gYmFzZWQgb25cblx0ICAgKiBzcGVjaWZpZWQgdHJhbnNpdGlvbiBtb2RlLiBBY2NlcHRzIGEgZmV3IGFkZGl0aW9uYWxcblx0ICAgKiBhcmd1bWVudHMgc3BlY2lmaWNhbGx5IGZvciB2dWUtcm91dGVyLlxuXHQgICAqXG5cdCAgICogVGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBmdWxsIHRyYW5zaXRpb24gaXNcblx0ICAgKiBmaW5pc2hlZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgc2V0Q29tcG9uZW50OiBmdW5jdGlvbiBzZXRDb21wb25lbnQodmFsdWUsIGNiKSB7XG5cdCAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG5cdCAgICBpZiAoIXZhbHVlKSB7XG5cdCAgICAgIC8vIGp1c3QgcmVtb3ZlIGN1cnJlbnRcblx0ICAgICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuXHQgICAgICB0aGlzLnJlbW92ZSh0aGlzLmNoaWxkVk0sIGNiKTtcblx0ICAgICAgdGhpcy5jaGlsZFZNID0gbnVsbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgdGhpcy5yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5tb3VudENvbXBvbmVudChjYik7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlc29sdmUgdGhlIGNvbXBvbmVudCBjb25zdHJ1Y3RvciB0byB1c2Ugd2hlbiBjcmVhdGluZ1xuXHQgICAqIHRoZSBjaGlsZCB2bS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIHJlc29sdmVDb21wb25lbnQ6IGZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQodmFsdWUsIGNiKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uIChDb21wb25lbnQpIHtcblx0ICAgICAgc2VsZi5Db21wb25lbnROYW1lID0gQ29tcG9uZW50Lm9wdGlvbnMubmFtZSB8fCAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogbnVsbCk7XG5cdCAgICAgIHNlbGYuQ29tcG9uZW50ID0gQ29tcG9uZW50O1xuXHQgICAgICBjYigpO1xuXHQgICAgfSk7XG5cdCAgICB0aGlzLnZtLl9yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCB0aGlzLnBlbmRpbmdDb21wb25lbnRDYik7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGEgbmV3IGluc3RhbmNlIHVzaW5nIHRoZSBjdXJyZW50IGNvbnN0cnVjdG9yIGFuZFxuXHQgICAqIHJlcGxhY2UgdGhlIGV4aXN0aW5nIGluc3RhbmNlLiBUaGlzIG1ldGhvZCBkb2Vzbid0IGNhcmVcblx0ICAgKiB3aGV0aGVyIHRoZSBuZXcgY29tcG9uZW50IGFuZCB0aGUgb2xkIG9uZSBhcmUgYWN0dWFsbHlcblx0ICAgKiB0aGUgc2FtZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIG1vdW50Q29tcG9uZW50KGNiKSB7XG5cdCAgICAvLyBhY3R1YWwgbW91bnRcblx0ICAgIHRoaXMudW5idWlsZCh0cnVlKTtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBhY3RpdmF0ZUhvb2tzID0gdGhpcy5Db21wb25lbnQub3B0aW9ucy5hY3RpdmF0ZTtcblx0ICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuXHQgICAgdmFyIG5ld0NvbXBvbmVudCA9IHRoaXMuYnVpbGQoKTtcblx0ICAgIGlmIChhY3RpdmF0ZUhvb2tzICYmICFjYWNoZWQpIHtcblx0ICAgICAgdGhpcy53YWl0aW5nRm9yID0gbmV3Q29tcG9uZW50O1xuXHQgICAgICBjYWxsQWN0aXZhdGVIb29rcyhhY3RpdmF0ZUhvb2tzLCBuZXdDb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoc2VsZi53YWl0aW5nRm9yICE9PSBuZXdDb21wb25lbnQpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2VsZi53YWl0aW5nRm9yID0gbnVsbDtcblx0ICAgICAgICBzZWxmLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gdXBkYXRlIHJlZiBmb3Iga2VwdC1hbGl2ZSBjb21wb25lbnRcblx0ICAgICAgaWYgKGNhY2hlZCkge1xuXHQgICAgICAgIG5ld0NvbXBvbmVudC5fdXBkYXRlUmVmKCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZW4gdGhlIGNvbXBvbmVudCBjaGFuZ2VzIG9yIHVuYmluZHMgYmVmb3JlIGFuIGFzeW5jXG5cdCAgICogY29uc3RydWN0b3IgaXMgcmVzb2x2ZWQsIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSBpdHNcblx0ICAgKiBwZW5kaW5nIGNhbGxiYWNrLlxuXHQgICAqL1xuXHRcblx0ICBpbnZhbGlkYXRlUGVuZGluZzogZnVuY3Rpb24gaW52YWxpZGF0ZVBlbmRpbmcoKSB7XG5cdCAgICBpZiAodGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpIHtcblx0ICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IuY2FuY2VsKCk7XG5cdCAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gbnVsbDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBJbnN0YW50aWF0ZS9pbnNlcnQgYSBuZXcgY2hpbGQgdm0uXG5cdCAgICogSWYga2VlcCBhbGl2ZSBhbmQgaGFzIGNhY2hlZCBpbnN0YW5jZSwgaW5zZXJ0IHRoYXRcblx0ICAgKiBpbnN0YW5jZTsgb3RoZXJ3aXNlIGJ1aWxkIGEgbmV3IG9uZSBhbmQgY2FjaGUgaXQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW2V4dHJhT3B0aW9uc11cblx0ICAgKiBAcmV0dXJuIHtWdWV9IC0gdGhlIGNyZWF0ZWQgaW5zdGFuY2Vcblx0ICAgKi9cblx0XG5cdCAgYnVpbGQ6IGZ1bmN0aW9uIGJ1aWxkKGV4dHJhT3B0aW9ucykge1xuXHQgICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG5cdCAgICBpZiAoY2FjaGVkKSB7XG5cdCAgICAgIHJldHVybiBjYWNoZWQ7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5Db21wb25lbnQpIHtcblx0ICAgICAgLy8gZGVmYXVsdCBvcHRpb25zXG5cdCAgICAgIHZhciBvcHRpb25zID0ge1xuXHQgICAgICAgIG5hbWU6IHRoaXMuQ29tcG9uZW50TmFtZSxcblx0ICAgICAgICBlbDogY2xvbmVOb2RlKHRoaXMuZWwpLFxuXHQgICAgICAgIHRlbXBsYXRlOiB0aGlzLmlubGluZVRlbXBsYXRlLFxuXHQgICAgICAgIC8vIG1ha2Ugc3VyZSB0byBhZGQgdGhlIGNoaWxkIHdpdGggY29ycmVjdCBwYXJlbnRcblx0ICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBpdHMgcGFyZW50XG5cdCAgICAgICAgLy8gc2hvdWxkIGJlIHRoZSB0cmFuc2NsdXNpb24gaG9zdC5cblx0ICAgICAgICBwYXJlbnQ6IHRoaXMuX2hvc3QgfHwgdGhpcy52bSxcblx0ICAgICAgICAvLyBpZiBubyBpbmxpbmUtdGVtcGxhdGUsIHRoZW4gdGhlIGNvbXBpbGVkXG5cdCAgICAgICAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5cblx0ICAgICAgICBfbGlua2VyQ2FjaGFibGU6ICF0aGlzLmlubGluZVRlbXBsYXRlLFxuXHQgICAgICAgIF9yZWY6IHRoaXMuZGVzY3JpcHRvci5yZWYsXG5cdCAgICAgICAgX2FzQ29tcG9uZW50OiB0cnVlLFxuXHQgICAgICAgIF9pc1JvdXRlclZpZXc6IHRoaXMuX2lzUm91dGVyVmlldyxcblx0ICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG5cdCAgICAgICAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXG5cdCAgICAgICAgLy8gYW5kIGl0cyBob3N0LlxuXHQgICAgICAgIF9jb250ZXh0OiB0aGlzLnZtLFxuXHQgICAgICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG5cdCAgICAgICAgLy8gd2lsbCBiZSB0aGUgaW50ZXJtZWRpYXRlIHNjb3BlIGNyZWF0ZWQgZm9yIHRoaXNcblx0ICAgICAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuXHQgICAgICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cblx0ICAgICAgICBfc2NvcGU6IHRoaXMuX3Njb3BlLFxuXHQgICAgICAgIC8vIHBhc3MgaW4gdGhlIG93bmVyIGZyYWdtZW50IG9mIHRoaXMgY29tcG9uZW50LlxuXHQgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IHNvIHRoYXQgdGhlIGZyYWdtZW50IGNhbiBrZWVwXG5cdCAgICAgICAgLy8gdHJhY2sgb2YgaXRzIGNvbnRhaW5lZCBjb21wb25lbnRzIGluIG9yZGVyIHRvXG5cdCAgICAgICAgLy8gY2FsbCBhdHRhY2gvZGV0YWNoIGhvb2tzIGZvciB0aGVtLlxuXHQgICAgICAgIF9mcmFnOiB0aGlzLl9mcmFnXG5cdCAgICAgIH07XG5cdCAgICAgIC8vIGV4dHJhIG9wdGlvbnNcblx0ICAgICAgLy8gaW4gMS4wLjAgdGhpcyBpcyB1c2VkIGJ5IHZ1ZS1yb3V0ZXIgb25seVxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKGV4dHJhT3B0aW9ucykge1xuXHQgICAgICAgIGV4dGVuZChvcHRpb25zLCBleHRyYU9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLkNvbXBvbmVudChvcHRpb25zKTtcblx0ICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdID0gY2hpbGQ7XG5cdCAgICAgIH1cblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwuaGFzQXR0cmlidXRlKCd0cmFuc2l0aW9uJykgJiYgY2hpbGQuX2lzRnJhZ21lbnQpIHtcblx0ICAgICAgICB3YXJuKCdUcmFuc2l0aW9ucyB3aWxsIG5vdCB3b3JrIG9uIGEgZnJhZ21lbnQgaW5zdGFuY2UuICcgKyAnVGVtcGxhdGU6ICcgKyBjaGlsZC4kb3B0aW9ucy50ZW1wbGF0ZSwgY2hpbGQpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBjaGlsZDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBUcnkgdG8gZ2V0IGEgY2FjaGVkIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG5cdCAgICovXG5cdFxuXHQgIGdldENhY2hlZDogZnVuY3Rpb24gZ2V0Q2FjaGVkKCkge1xuXHQgICAgcmV0dXJuIHRoaXMua2VlcEFsaXZlICYmIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBUZWFyZG93biB0aGUgY3VycmVudCBjaGlsZCwgYnV0IGRlZmVycyBjbGVhbnVwIHNvXG5cdCAgICogdGhhdCB3ZSBjYW4gc2VwYXJhdGUgdGhlIGRlc3Ryb3kgYW5kIHJlbW92YWwgc3RlcHMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyXG5cdCAgICovXG5cdFxuXHQgIHVuYnVpbGQ6IGZ1bmN0aW9uIHVuYnVpbGQoZGVmZXIpIHtcblx0ICAgIGlmICh0aGlzLndhaXRpbmdGb3IpIHtcblx0ICAgICAgaWYgKCF0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIHRoaXMud2FpdGluZ0Zvci4kZGVzdHJveSgpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkVk07XG5cdCAgICBpZiAoIWNoaWxkIHx8IHRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgIGlmIChjaGlsZCkge1xuXHQgICAgICAgIC8vIHJlbW92ZSByZWZcblx0ICAgICAgICBjaGlsZC5faW5hY3RpdmUgPSB0cnVlO1xuXHQgICAgICAgIGNoaWxkLl91cGRhdGVSZWYodHJ1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gdGhlIHNvbGUgcHVycG9zZSBvZiBgZGVmZXJDbGVhbnVwYCBpcyBzbyB0aGF0IHdlIGNhblxuXHQgICAgLy8gXCJkZWFjdGl2YXRlXCIgdGhlIHZtIHJpZ2h0IG5vdyBhbmQgcGVyZm9ybSBET00gcmVtb3ZhbFxuXHQgICAgLy8gbGF0ZXIuXG5cdCAgICBjaGlsZC4kZGVzdHJveShmYWxzZSwgZGVmZXIpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBjdXJyZW50IGRlc3Ryb3llZCBjaGlsZCBhbmQgbWFudWFsbHkgZG9cblx0ICAgKiB0aGUgY2xlYW51cCBhZnRlciByZW1vdmFsLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKi9cblx0XG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoY2hpbGQsIGNiKSB7XG5cdCAgICB2YXIga2VlcEFsaXZlID0gdGhpcy5rZWVwQWxpdmU7XG5cdCAgICBpZiAoY2hpbGQpIHtcblx0ICAgICAgLy8gd2UgbWF5IGhhdmUgYSBjb21wb25lbnQgc3dpdGNoIHdoZW4gYSBwcmV2aW91c1xuXHQgICAgICAvLyBjb21wb25lbnQgaXMgc3RpbGwgYmVpbmcgdHJhbnNpdGlvbmVkIG91dC5cblx0ICAgICAgLy8gd2Ugd2FudCB0byB0cmlnZ2VyIG9ubHkgb25lIGxhc3Rlc3QgaW5zZXJ0aW9uIGNiXG5cdCAgICAgIC8vIHdoZW4gdGhlIGV4aXN0aW5nIHRyYW5zaXRpb24gZmluaXNoZXMuICgjMTExOSlcblx0ICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMrKztcblx0ICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gY2I7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgY2hpbGQuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbHMtLTtcblx0ICAgICAgICBpZiAoIWtlZXBBbGl2ZSkgY2hpbGQuX2NsZWFudXAoKTtcblx0ICAgICAgICBpZiAoIXNlbGYucGVuZGluZ1JlbW92YWxzICYmIHNlbGYucGVuZGluZ1JlbW92YWxDYikge1xuXHQgICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKCk7XG5cdCAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2UgaWYgKGNiKSB7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQWN0dWFsbHkgc3dhcCB0aGUgY29tcG9uZW50cywgZGVwZW5kaW5nIG9uIHRoZVxuXHQgICAqIHRyYW5zaXRpb24gbW9kZS4gRGVmYXVsdHMgdG8gc2ltdWx0YW5lb3VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgdHJhbnNpdGlvbjogZnVuY3Rpb24gdHJhbnNpdGlvbih0YXJnZXQsIGNiKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgY3VycmVudCA9IHRoaXMuY2hpbGRWTTtcblx0ICAgIC8vIGZvciBkZXZ0b29sIGluc3BlY3Rpb25cblx0ICAgIGlmIChjdXJyZW50KSBjdXJyZW50Ll9pbmFjdGl2ZSA9IHRydWU7XG5cdCAgICB0YXJnZXQuX2luYWN0aXZlID0gZmFsc2U7XG5cdCAgICB0aGlzLmNoaWxkVk0gPSB0YXJnZXQ7XG5cdCAgICBzd2l0Y2ggKHNlbGYucGFyYW1zLnRyYW5zaXRpb25Nb2RlKSB7XG5cdCAgICAgIGNhc2UgJ2luLW91dCc6XG5cdCAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGNiKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAnb3V0LWluJzpcblx0ICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBkZWZhdWx0OlxuXHQgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQpO1xuXHQgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVW5iaW5kLlxuXHQgICAqL1xuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcblx0ICAgIC8vIERvIG5vdCBkZWZlciBjbGVhbnVwIHdoZW4gdW5iaW5kaW5nXG5cdCAgICB0aGlzLnVuYnVpbGQoKTtcblx0ICAgIC8vIGRlc3Ryb3kgYWxsIGtlZXAtYWxpdmUgY2FjaGVkIGluc3RhbmNlc1xuXHQgICAgaWYgKHRoaXMuY2FjaGUpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGUpIHtcblx0ICAgICAgICB0aGlzLmNhY2hlW2tleV0uJGRlc3Ryb3koKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmNhY2hlID0gbnVsbDtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhY3RpdmF0ZSBob29rcyBpbiBvcmRlciAoYXN5bmNocm9ub3VzKVxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBob29rc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjYWxsQWN0aXZhdGVIb29rcyhob29rcywgdm0sIGNiKSB7XG5cdCAgdmFyIHRvdGFsID0gaG9va3MubGVuZ3RoO1xuXHQgIHZhciBjYWxsZWQgPSAwO1xuXHQgIGhvb2tzWzBdLmNhbGwodm0sIG5leHQpO1xuXHQgIGZ1bmN0aW9uIG5leHQoKSB7XG5cdCAgICBpZiAoKytjYWxsZWQgPj0gdG90YWwpIHtcblx0ICAgICAgY2IoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGhvb2tzW2NhbGxlZF0uY2FsbCh2bSwgbmV4dCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgcHJvcEJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2Rlcztcblx0dmFyIGVtcHR5ID0ge307XG5cdFxuXHQvLyByZWdleGVzXG5cdHZhciBpZGVudFJFJDEgPSAvXlskX2EtekEtWl0rW1xcdyRdKiQvO1xuXHR2YXIgc2V0dGFibGVQYXRoUkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKFxcLltBLVphLXpfJF1bXFx3JF0qfFxcW1teXFxbXFxdXStcXF0pKiQvO1xuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgcHJvcHMgb24gYSByb290IGVsZW1lbnQgYW5kIHJldHVyblxuXHQgKiBhIHByb3BzIGxpbmsgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0FycmF5fSBwcm9wT3B0aW9uc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVByb3BzKGVsLCBwcm9wT3B0aW9ucywgdm0pIHtcblx0ICB2YXIgcHJvcHMgPSBbXTtcblx0ICB2YXIgbmFtZXMgPSBPYmplY3Qua2V5cyhwcm9wT3B0aW9ucyk7XG5cdCAgdmFyIGkgPSBuYW1lcy5sZW5ndGg7XG5cdCAgdmFyIG9wdGlvbnMsIG5hbWUsIGF0dHIsIHZhbHVlLCBwYXRoLCBwYXJzZWQsIHByb3A7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgbmFtZSA9IG5hbWVzW2ldO1xuXHQgICAgb3B0aW9ucyA9IHByb3BPcHRpb25zW25hbWVdIHx8IGVtcHR5O1xuXHRcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG5hbWUgPT09ICckZGF0YScpIHtcblx0ICAgICAgd2FybignRG8gbm90IHVzZSAkZGF0YSBhcyBwcm9wLicsIHZtKTtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcHJvcHMgY291bGQgY29udGFpbiBkYXNoZXMsIHdoaWNoIHdpbGwgYmVcblx0ICAgIC8vIGludGVycHJldGVkIGFzIG1pbnVzIGNhbGN1bGF0aW9ucyBieSB0aGUgcGFyc2VyXG5cdCAgICAvLyBzbyB3ZSBuZWVkIHRvIGNhbWVsaXplIHRoZSBwYXRoIGhlcmVcblx0ICAgIHBhdGggPSBjYW1lbGl6ZShuYW1lKTtcblx0ICAgIGlmICghaWRlbnRSRSQxLnRlc3QocGF0aCkpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3Aga2V5OiBcIicgKyBuYW1lICsgJ1wiLiBQcm9wIGtleXMgJyArICdtdXN0IGJlIHZhbGlkIGlkZW50aWZpZXJzLicsIHZtKTtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdFxuXHQgICAgcHJvcCA9IHtcblx0ICAgICAgbmFtZTogbmFtZSxcblx0ICAgICAgcGF0aDogcGF0aCxcblx0ICAgICAgb3B0aW9uczogb3B0aW9ucyxcblx0ICAgICAgbW9kZTogcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZLFxuXHQgICAgICByYXc6IG51bGxcblx0ICAgIH07XG5cdFxuXHQgICAgYXR0ciA9IGh5cGhlbmF0ZShuYW1lKTtcblx0ICAgIC8vIGZpcnN0IGNoZWNrIGR5bmFtaWMgdmVyc2lvblxuXHQgICAgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyKSkgPT09IG51bGwpIHtcblx0ICAgICAgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5zeW5jJykpICE9PSBudWxsKSB7XG5cdCAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuXHQgICAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5vbmNlJykpICE9PSBudWxsKSB7XG5cdCAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG5cdCAgICAgIC8vIGhhcyBkeW5hbWljIGJpbmRpbmchXG5cdCAgICAgIHByb3AucmF3ID0gdmFsdWU7XG5cdCAgICAgIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcblx0ICAgICAgdmFsdWUgPSBwYXJzZWQuZXhwcmVzc2lvbjtcblx0ICAgICAgcHJvcC5maWx0ZXJzID0gcGFyc2VkLmZpbHRlcnM7XG5cdCAgICAgIC8vIGNoZWNrIGJpbmRpbmcgdHlwZVxuXHQgICAgICBpZiAoaXNMaXRlcmFsKHZhbHVlKSAmJiAhcGFyc2VkLmZpbHRlcnMpIHtcblx0ICAgICAgICAvLyBmb3IgZXhwcmVzc2lvbnMgY29udGFpbmluZyBsaXRlcmFsIG51bWJlcnMgYW5kXG5cdCAgICAgICAgLy8gYm9vbGVhbnMsIHRoZXJlJ3Mgbm8gbmVlZCB0byBzZXR1cCBhIHByb3AgYmluZGluZyxcblx0ICAgICAgICAvLyBzbyB3ZSBjYW4gb3B0aW1pemUgdGhlbSBhcyBhIG9uZS10aW1lIHNldC5cblx0ICAgICAgICBwcm9wLm9wdGltaXplZExpdGVyYWwgPSB0cnVlO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHByb3AuZHluYW1pYyA9IHRydWU7XG5cdCAgICAgICAgLy8gY2hlY2sgbm9uLXNldHRhYmxlIHBhdGggZm9yIHR3by13YXkgYmluZGluZ3Ncblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSAmJiAhc2V0dGFibGVQYXRoUkUudGVzdCh2YWx1ZSkpIHtcblx0ICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWTtcblx0ICAgICAgICAgIHdhcm4oJ0Nhbm5vdCBiaW5kIHR3by13YXkgcHJvcCB3aXRoIG5vbi1zZXR0YWJsZSAnICsgJ3BhcmVudCBwYXRoOiAnICsgdmFsdWUsIHZtKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcHJvcC5wYXJlbnRQYXRoID0gdmFsdWU7XG5cdFxuXHQgICAgICAvLyB3YXJuIHJlcXVpcmVkIHR3by13YXlcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgb3B0aW9ucy50d29XYXkgJiYgcHJvcC5tb2RlICE9PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkpIHtcblx0ICAgICAgICB3YXJuKCdQcm9wIFwiJyArIG5hbWUgKyAnXCIgZXhwZWN0cyBhIHR3by13YXkgYmluZGluZyB0eXBlLicsIHZtKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRBdHRyKGVsLCBhdHRyKSkgIT09IG51bGwpIHtcblx0ICAgICAgLy8gaGFzIGxpdGVyYWwgYmluZGluZyFcblx0ICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAvLyBjaGVjayBwb3NzaWJsZSBjYW1lbENhc2UgcHJvcCB1c2FnZVxuXHQgICAgICB2YXIgbG93ZXJDYXNlTmFtZSA9IHBhdGgudG9Mb3dlckNhc2UoKTtcblx0ICAgICAgdmFsdWUgPSAvW0EtWlxcLV0vLnRlc3QobmFtZSkgJiYgKGVsLmdldEF0dHJpYnV0ZShsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykpO1xuXHQgICAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgICB3YXJuKCdQb3NzaWJsZSB1c2FnZSBlcnJvciBmb3IgcHJvcCBgJyArIGxvd2VyQ2FzZU5hbWUgKyAnYCAtICcgKyAnZGlkIHlvdSBtZWFuIGAnICsgYXR0ciArICdgPyBIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSAnICsgJ2tlYmFiLWNhc2UgZm9yIHByb3BzIGluIHRlbXBsYXRlcy4nLCB2bSk7XG5cdCAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZXF1aXJlZCkge1xuXHQgICAgICAgIC8vIHdhcm4gbWlzc2luZyByZXF1aXJlZFxuXHQgICAgICAgIHdhcm4oJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogJyArIG5hbWUsIHZtKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gcHVzaCBwcm9wXG5cdCAgICBwcm9wcy5wdXNoKHByb3ApO1xuXHQgIH1cblx0ICByZXR1cm4gbWFrZVByb3BzTGlua0ZuKHByb3BzKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBhcHBsaWVzIHByb3BzIHRvIGEgdm0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHByb3BzXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VQcm9wc0xpbmtGbihwcm9wcykge1xuXHQgIHJldHVybiBmdW5jdGlvbiBwcm9wc0xpbmtGbih2bSwgc2NvcGUpIHtcblx0ICAgIC8vIHN0b3JlIHJlc29sdmVkIHByb3BzIGluZm9cblx0ICAgIHZtLl9wcm9wcyA9IHt9O1xuXHQgICAgdmFyIGlubGluZVByb3BzID0gdm0uJG9wdGlvbnMucHJvcHNEYXRhO1xuXHQgICAgdmFyIGkgPSBwcm9wcy5sZW5ndGg7XG5cdCAgICB2YXIgcHJvcCwgcGF0aCwgb3B0aW9ucywgdmFsdWUsIHJhdztcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgcHJvcCA9IHByb3BzW2ldO1xuXHQgICAgICByYXcgPSBwcm9wLnJhdztcblx0ICAgICAgcGF0aCA9IHByb3AucGF0aDtcblx0ICAgICAgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcblx0ICAgICAgdm0uX3Byb3BzW3BhdGhdID0gcHJvcDtcblx0ICAgICAgaWYgKGlubGluZVByb3BzICYmIGhhc093bihpbmxpbmVQcm9wcywgcGF0aCkpIHtcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgaW5saW5lUHJvcHNbcGF0aF0pO1xuXHQgICAgICB9aWYgKHJhdyA9PT0gbnVsbCkge1xuXHQgICAgICAgIC8vIGluaXRpYWxpemUgYWJzZW50IHByb3Bcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdW5kZWZpbmVkKTtcblx0ICAgICAgfSBlbHNlIGlmIChwcm9wLmR5bmFtaWMpIHtcblx0ICAgICAgICAvLyBkeW5hbWljIHByb3Bcblx0ICAgICAgICBpZiAocHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FKSB7XG5cdCAgICAgICAgICAvLyBvbmUgdGltZSBiaW5kaW5nXG5cdCAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bS5fY29udGV4dCB8fCB2bSkuJGdldChwcm9wLnBhcmVudFBhdGgpO1xuXHQgICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgaWYgKHZtLl9jb250ZXh0KSB7XG5cdCAgICAgICAgICAgIC8vIGR5bmFtaWMgYmluZGluZ1xuXHQgICAgICAgICAgICB2bS5fYmluZERpcih7XG5cdCAgICAgICAgICAgICAgbmFtZTogJ3Byb3AnLFxuXHQgICAgICAgICAgICAgIGRlZjogcHJvcERlZixcblx0ICAgICAgICAgICAgICBwcm9wOiBwcm9wXG5cdCAgICAgICAgICAgIH0sIG51bGwsIG51bGwsIHNjb3BlKTsgLy8gZWwsIGhvc3QsIHNjb3BlXG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIC8vIHJvb3QgaW5zdGFuY2Vcblx0ICAgICAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdm0uJGdldChwcm9wLnBhcmVudFBhdGgpKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIGlmIChwcm9wLm9wdGltaXplZExpdGVyYWwpIHtcblx0ICAgICAgICAvLyBvcHRpbWl6ZWQgbGl0ZXJhbCwgY2FzdCBpdCBhbmQganVzdCBzZXQgb25jZVxuXHQgICAgICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKHJhdyk7XG5cdCAgICAgICAgdmFsdWUgPSBzdHJpcHBlZCA9PT0gcmF3ID8gdG9Cb29sZWFuKHRvTnVtYmVyKHJhdykpIDogc3RyaXBwZWQ7XG5cdCAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBzdHJpbmcgbGl0ZXJhbCwgYnV0IHdlIG5lZWQgdG8gY2F0ZXIgZm9yXG5cdCAgICAgICAgLy8gQm9vbGVhbiBwcm9wcyB3aXRoIG5vIHZhbHVlLCBvciB3aXRoIHNhbWVcblx0ICAgICAgICAvLyBsaXRlcmFsIHZhbHVlIChlLmcuIGRpc2FibGVkPVwiZGlzYWJsZWRcIilcblx0ICAgICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1sb2FkZXIvaXNzdWVzLzE4MlxuXHQgICAgICAgIHZhbHVlID0gb3B0aW9ucy50eXBlID09PSBCb29sZWFuICYmIChyYXcgPT09ICcnIHx8IHJhdyA9PT0gaHlwaGVuYXRlKHByb3AubmFtZSkpID8gdHJ1ZSA6IHJhdztcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgYSBwcm9wIHdpdGggYSByYXdWYWx1ZSwgYXBwbHlpbmcgbmVjZXNzYXJ5IGNvZXJzaW9ucyxcblx0ICogZGVmYXVsdCB2YWx1ZXMgJiBhc3NlcnRpb25zIGFuZCBjYWxsIHRoZSBnaXZlbiBjYWxsYmFjayB3aXRoXG5cdCAqIHByb2Nlc3NlZCB2YWx1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gcmF3VmFsdWVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCByYXdWYWx1ZSwgZm4pIHtcblx0ICB2YXIgaXNTaW1wbGUgPSBwcm9wLmR5bmFtaWMgJiYgaXNTaW1wbGVQYXRoKHByb3AucGFyZW50UGF0aCk7XG5cdCAgdmFyIHZhbHVlID0gcmF3VmFsdWU7XG5cdCAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHZhbHVlID0gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCk7XG5cdCAgfVxuXHQgIHZhbHVlID0gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pO1xuXHQgIHZhciBjb2VyY2VkID0gdmFsdWUgIT09IHJhd1ZhbHVlO1xuXHQgIGlmICghYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pKSB7XG5cdCAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdCAgaWYgKGlzU2ltcGxlICYmICFjb2VyY2VkKSB7XG5cdCAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGZuKHZhbHVlKTtcblx0ICAgIH0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBmbih2YWx1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogU2V0IGEgcHJvcCdzIGluaXRpYWwgdmFsdWUgb24gYSB2bSBhbmQgaXRzIGRhdGEgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xuXHQgIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIGRlZmluZVJlYWN0aXZlKHZtLCBwcm9wLnBhdGgsIHZhbHVlKTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFVwZGF0ZSBhIHByb3AncyB2YWx1ZSBvbiBhIHZtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHVwZGF0ZVByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG5cdCAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgdm1bcHJvcC5wYXRoXSA9IHZhbHVlO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IHRoZSBkZWZhdWx0IHZhbHVlIG9mIGEgcHJvcC5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEByZXR1cm4geyp9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCkge1xuXHQgIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcblx0ICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcblx0ICBpZiAoIWhhc093bihvcHRpb25zLCAnZGVmYXVsdCcpKSB7XG5cdCAgICAvLyBhYnNlbnQgYm9vbGVhbiB2YWx1ZSBkZWZhdWx0cyB0byBmYWxzZVxuXHQgICAgcmV0dXJuIG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiA/IGZhbHNlIDogdW5kZWZpbmVkO1xuXHQgIH1cblx0ICB2YXIgZGVmID0gb3B0aW9uc1snZGVmYXVsdCddO1xuXHQgIC8vIHdhcm4gYWdhaW5zdCBub24tZmFjdG9yeSBkZWZhdWx0cyBmb3IgT2JqZWN0ICYgQXJyYXlcblx0ICBpZiAoaXNPYmplY3QoZGVmKSkge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGRlZmF1bHQgdmFsdWUgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiAnICsgJ1Byb3BzIHdpdGggdHlwZSBPYmplY3QvQXJyYXkgbXVzdCB1c2UgYSBmYWN0b3J5IGZ1bmN0aW9uICcgKyAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsIHZtKTtcblx0ICB9XG5cdCAgLy8gY2FsbCBmYWN0b3J5IGZ1bmN0aW9uIGZvciBub24tRnVuY3Rpb24gdHlwZXNcblx0ICByZXR1cm4gdHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJyAmJiBvcHRpb25zLnR5cGUgIT09IEZ1bmN0aW9uID8gZGVmLmNhbGwodm0pIDogZGVmO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXNzZXJ0IHdoZXRoZXIgYSBwcm9wIGlzIHZhbGlkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFzc2VydFByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG5cdCAgaWYgKCFwcm9wLm9wdGlvbnMucmVxdWlyZWQgJiYgKCAvLyBub24tcmVxdWlyZWRcblx0ICBwcm9wLnJhdyA9PT0gbnVsbCB8fCAvLyBhYnNjZW50XG5cdCAgdmFsdWUgPT0gbnVsbCkgLy8gbnVsbCBvciB1bmRlZmluZWRcblx0ICApIHtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG5cdCAgdmFyIHR5cGUgPSBvcHRpb25zLnR5cGU7XG5cdCAgdmFyIHZhbGlkID0gIXR5cGU7XG5cdCAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTtcblx0ICBpZiAodHlwZSkge1xuXHQgICAgaWYgKCFpc0FycmF5KHR5cGUpKSB7XG5cdCAgICAgIHR5cGUgPSBbdHlwZV07XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR5cGUubGVuZ3RoICYmICF2YWxpZDsgaSsrKSB7XG5cdCAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTtcblx0ICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGFzc2VydGVkVHlwZS5leHBlY3RlZFR5cGUpO1xuXHQgICAgICB2YWxpZCA9IGFzc2VydGVkVHlwZS52YWxpZDtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKCF2YWxpZCkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgd2FybignSW52YWxpZCBwcm9wOiB0eXBlIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJyArICcgRXhwZWN0ZWQgJyArIGV4cGVjdGVkVHlwZXMubWFwKGZvcm1hdFR5cGUpLmpvaW4oJywgJykgKyAnLCBnb3QgJyArIGZvcm1hdFZhbHVlKHZhbHVlKSArICcuJywgdm0pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgdmFsaWRhdG9yID0gb3B0aW9ucy52YWxpZGF0b3I7XG5cdCAgaWYgKHZhbGlkYXRvcikge1xuXHQgICAgaWYgKCF2YWxpZGF0b3IodmFsdWUpKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBwcm9wOiBjdXN0b20gdmFsaWRhdG9yIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJywgdm0pO1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0cnVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9yY2UgcGFyc2luZyB2YWx1ZSB3aXRoIGNvZXJjZSBvcHRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7Kn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb2VyY2VQcm9wKHByb3AsIHZhbHVlLCB2bSkge1xuXHQgIHZhciBjb2VyY2UgPSBwcm9wLm9wdGlvbnMuY29lcmNlO1xuXHQgIGlmICghY29lcmNlKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2YgY29lcmNlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gY29lcmNlKHZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGNvZXJjZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6IGV4cGVjdGVkIGZ1bmN0aW9uLCBnb3QgJyArIHR5cGVvZiBjb2VyY2UgKyAnLicsIHZtKTtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBc3NlcnQgdGhlIHR5cGUgb2YgYSB2YWx1ZVxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHR5cGVcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFzc2VydFR5cGUodmFsdWUsIHR5cGUpIHtcblx0ICB2YXIgdmFsaWQ7XG5cdCAgdmFyIGV4cGVjdGVkVHlwZTtcblx0ICBpZiAodHlwZSA9PT0gU3RyaW5nKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnc3RyaW5nJztcblx0ICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBOdW1iZXIpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdudW1iZXInO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IEJvb2xlYW4pIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdib29sZWFuJztcblx0ICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBGdW5jdGlvbikge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ2Z1bmN0aW9uJztcblx0ICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBPYmplY3QpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdvYmplY3QnO1xuXHQgICAgdmFsaWQgPSBpc1BsYWluT2JqZWN0KHZhbHVlKTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IEFycmF5KSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnYXJyYXknO1xuXHQgICAgdmFsaWQgPSBpc0FycmF5KHZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG5cdCAgfVxuXHQgIHJldHVybiB7XG5cdCAgICB2YWxpZDogdmFsaWQsXG5cdCAgICBleHBlY3RlZFR5cGU6IGV4cGVjdGVkVHlwZVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgdHlwZSBmb3Igb3V0cHV0XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRUeXBlKHR5cGUpIHtcblx0ICByZXR1cm4gdHlwZSA/IHR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eXBlLnNsaWNlKDEpIDogJ2N1c3RvbSB0eXBlJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCB2YWx1ZVxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRWYWx1ZSh2YWwpIHtcblx0ICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpO1xuXHR9XG5cdFxuXHR2YXIgYmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuXHRcblx0dmFyIHByb3BEZWYgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgY2hpbGQgPSB0aGlzLnZtO1xuXHQgICAgdmFyIHBhcmVudCA9IGNoaWxkLl9jb250ZXh0O1xuXHQgICAgLy8gcGFzc2VkIGluIGZyb20gY29tcGlsZXIgZGlyZWN0bHlcblx0ICAgIHZhciBwcm9wID0gdGhpcy5kZXNjcmlwdG9yLnByb3A7XG5cdCAgICB2YXIgY2hpbGRLZXkgPSBwcm9wLnBhdGg7XG5cdCAgICB2YXIgcGFyZW50S2V5ID0gcHJvcC5wYXJlbnRQYXRoO1xuXHQgICAgdmFyIHR3b1dheSA9IHByb3AubW9kZSA9PT0gYmluZGluZ01vZGVzLlRXT19XQVk7XG5cdFxuXHQgICAgdmFyIHBhcmVudFdhdGNoZXIgPSB0aGlzLnBhcmVudFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihwYXJlbnQsIHBhcmVudEtleSwgZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICB1cGRhdGVQcm9wKGNoaWxkLCBwcm9wLCB2YWwpO1xuXHQgICAgfSwge1xuXHQgICAgICB0d29XYXk6IHR3b1dheSxcblx0ICAgICAgZmlsdGVyczogcHJvcC5maWx0ZXJzLFxuXHQgICAgICAvLyBpbXBvcnRhbnQ6IHByb3BzIG5lZWQgdG8gYmUgb2JzZXJ2ZWQgb24gdGhlXG5cdCAgICAgIC8vIHYtZm9yIHNjb3BlIGlmIHByZXNlbnRcblx0ICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG5cdCAgICB9KTtcblx0XG5cdCAgICAvLyBzZXQgdGhlIGNoaWxkIGluaXRpYWwgdmFsdWUuXG5cdCAgICBpbml0UHJvcChjaGlsZCwgcHJvcCwgcGFyZW50V2F0Y2hlci52YWx1ZSk7XG5cdFxuXHQgICAgLy8gc2V0dXAgdHdvLXdheSBiaW5kaW5nXG5cdCAgICBpZiAodHdvV2F5KSB7XG5cdCAgICAgIC8vIGltcG9ydGFudDogZGVmZXIgdGhlIGNoaWxkIHdhdGNoZXIgY3JlYXRpb24gdW50aWxcblx0ICAgICAgLy8gdGhlIGNyZWF0ZWQgaG9vayAoYWZ0ZXIgZGF0YSBvYnNlcnZhdGlvbilcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICBjaGlsZC4kb25jZSgncHJlLWhvb2s6Y3JlYXRlZCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLmNoaWxkV2F0Y2hlciA9IG5ldyBXYXRjaGVyKGNoaWxkLCBjaGlsZEtleSwgZnVuY3Rpb24gKHZhbCkge1xuXHQgICAgICAgICAgcGFyZW50V2F0Y2hlci5zZXQodmFsKTtcblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICAvLyBlbnN1cmUgc3luYyB1cHdhcmQgYmVmb3JlIHBhcmVudCBzeW5jIGRvd24uXG5cdCAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBpbiBjYXNlcyBlLmcuIHRoZSBjaGlsZFxuXHQgICAgICAgICAgLy8gbXV0YXRlcyBhIHByb3AgYXJyYXksIHRoZW4gcmVwbGFjZXMgaXQuICgjMTY4Mylcblx0ICAgICAgICAgIHN5bmM6IHRydWVcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLnBhcmVudFdhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIGlmICh0aGlzLmNoaWxkV2F0Y2hlcikge1xuXHQgICAgICB0aGlzLmNoaWxkV2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBxdWV1ZSQxID0gW107XG5cdHZhciBxdWV1ZWQgPSBmYWxzZTtcblx0XG5cdC8qKlxuXHQgKiBQdXNoIGEgam9iIGludG8gdGhlIHF1ZXVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBqb2Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwdXNoSm9iKGpvYikge1xuXHQgIHF1ZXVlJDEucHVzaChqb2IpO1xuXHQgIGlmICghcXVldWVkKSB7XG5cdCAgICBxdWV1ZWQgPSB0cnVlO1xuXHQgICAgbmV4dFRpY2soZmx1c2gpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEZsdXNoIHRoZSBxdWV1ZSwgYW5kIGRvIG9uZSBmb3JjZWQgcmVmbG93IGJlZm9yZVxuXHQgKiB0cmlnZ2VyaW5nIHRyYW5zaXRpb25zLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgIC8vIEZvcmNlIGxheW91dFxuXHQgIHZhciBmID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodDtcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlJDEubGVuZ3RoOyBpKyspIHtcblx0ICAgIHF1ZXVlJDFbaV0oKTtcblx0ICB9XG5cdCAgcXVldWUkMSA9IFtdO1xuXHQgIHF1ZXVlZCA9IGZhbHNlO1xuXHQgIC8vIGR1bW15IHJldHVybiwgc28ganMgbGludGVycyBkb24ndCBjb21wbGFpbiBhYm91dFxuXHQgIC8vIHVudXNlZCB2YXJpYWJsZSBmXG5cdCAgcmV0dXJuIGY7XG5cdH1cblx0XG5cdHZhciBUWVBFX1RSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XG5cdHZhciBUWVBFX0FOSU1BVElPTiA9ICdhbmltYXRpb24nO1xuXHR2YXIgdHJhbnNEdXJhdGlvblByb3AgPSB0cmFuc2l0aW9uUHJvcCArICdEdXJhdGlvbic7XG5cdHZhciBhbmltRHVyYXRpb25Qcm9wID0gYW5pbWF0aW9uUHJvcCArICdEdXJhdGlvbic7XG5cdFxuXHQvKipcblx0ICogSWYgYSBqdXN0LWVudGVyZWQgZWxlbWVudCBpcyBhcHBsaWVkIHRoZVxuXHQgKiBsZWF2ZSBjbGFzcyB3aGlsZSBpdHMgZW50ZXIgdHJhbnNpdGlvbiBoYXNuJ3Qgc3RhcnRlZCB5ZXQsXG5cdCAqIGFuZCB0aGUgdHJhbnNpdGlvbmVkIHByb3BlcnR5IGhhcyB0aGUgc2FtZSB2YWx1ZSBmb3IgYm90aFxuXHQgKiBlbnRlci9sZWF2ZSwgdGhlbiB0aGUgbGVhdmUgdHJhbnNpdGlvbiB3aWxsIGJlIHNraXBwZWQgYW5kXG5cdCAqIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiBUaGlzIGZ1bmN0aW9uIGVuc3VyZXNcblx0ICogaXRzIGNhbGxiYWNrIHRvIGJlIGNhbGxlZCBhZnRlciBhIHRyYW5zaXRpb24gaGFzIHN0YXJ0ZWRcblx0ICogYnkgd2FpdGluZyBmb3IgZG91YmxlIHJhZi5cblx0ICpcblx0ICogSXQgZmFsbHMgYmFjayB0byBzZXRUaW1lb3V0IG9uIGRldmljZXMgdGhhdCBzdXBwb3J0IENTU1xuXHQgKiB0cmFuc2l0aW9ucyBidXQgbm90IHJhZiAoZS5nLiBBbmRyb2lkIDQuMiBicm93c2VyKSAtIHNpbmNlXG5cdCAqIHRoZXNlIGVudmlyb25tZW50cyBhcmUgdXN1YWxseSBzbG93LCB3ZSBhcmUgZ2l2aW5nIGl0IGFcblx0ICogcmVsYXRpdmVseSBsYXJnZSB0aW1lb3V0LlxuXHQgKi9cblx0XG5cdHZhciByYWYgPSBpbkJyb3dzZXIgJiYgd2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZTtcblx0dmFyIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQgPSByYWZcblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0PyBmdW5jdGlvbiAoZm4pIHtcblx0ICByYWYoZnVuY3Rpb24gKCkge1xuXHQgICAgcmFmKGZuKTtcblx0ICB9KTtcblx0fSA6IGZ1bmN0aW9uIChmbikge1xuXHQgIHNldFRpbWVvdXQoZm4sIDUwKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBIFRyYW5zaXRpb24gb2JqZWN0IHRoYXQgZW5jYXBzdWxhdGVzIHRoZSBzdGF0ZSBhbmQgbG9naWNcblx0ICogb2YgdGhlIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBob29rc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdGZ1bmN0aW9uIFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdm0pIHtcblx0ICB0aGlzLmlkID0gaWQ7XG5cdCAgdGhpcy5lbCA9IGVsO1xuXHQgIHRoaXMuZW50ZXJDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmVudGVyQ2xhc3MgfHwgaWQgKyAnLWVudGVyJztcblx0ICB0aGlzLmxlYXZlQ2xhc3MgPSBob29rcyAmJiBob29rcy5sZWF2ZUNsYXNzIHx8IGlkICsgJy1sZWF2ZSc7XG5cdCAgdGhpcy5ob29rcyA9IGhvb2tzO1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICAvLyBhc3luYyBzdGF0ZVxuXHQgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG5cdCAgdGhpcy5qdXN0RW50ZXJlZCA9IGZhbHNlO1xuXHQgIHRoaXMuZW50ZXJlZCA9IHRoaXMubGVmdCA9IGZhbHNlO1xuXHQgIHRoaXMudHlwZUNhY2hlID0ge307XG5cdCAgLy8gY2hlY2sgY3NzIHRyYW5zaXRpb24gdHlwZVxuXHQgIHRoaXMudHlwZSA9IGhvb2tzICYmIGhvb2tzLnR5cGU7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGlmICh0aGlzLnR5cGUgJiYgdGhpcy50eXBlICE9PSBUWVBFX1RSQU5TSVRJT04gJiYgdGhpcy50eXBlICE9PSBUWVBFX0FOSU1BVElPTikge1xuXHQgICAgICB3YXJuKCdpbnZhbGlkIENTUyB0cmFuc2l0aW9uIHR5cGUgZm9yIHRyYW5zaXRpb249XCInICsgdGhpcy5pZCArICdcIjogJyArIHRoaXMudHlwZSwgdm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBiaW5kXG5cdCAgdmFyIHNlbGYgPSB0aGlzO1snZW50ZXJOZXh0VGljaycsICdlbnRlckRvbmUnLCAnbGVhdmVOZXh0VGljaycsICdsZWF2ZURvbmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG5cdCAgICBzZWxmW21dID0gYmluZChzZWxmW21dLCBzZWxmKTtcblx0ICB9KTtcblx0fVxuXHRcblx0dmFyIHAkMSA9IFRyYW5zaXRpb24ucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFN0YXJ0IGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIDEuIGVudGVyIHRyYW5zaXRpb24gdHJpZ2dlcmVkXG5cdCAqIDIuIGNhbGwgYmVmb3JlRW50ZXIgaG9va1xuXHQgKiAzLiBhZGQgZW50ZXIgY2xhc3Ncblx0ICogNC4gaW5zZXJ0L3Nob3cgZWxlbWVudFxuXHQgKiA1LiBjYWxsIGVudGVyIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG5cdCAqIDYuIHJlZmxvd1xuXHQgKiA3LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG5cdCAqICAgIC0gdHJhbnNpdGlvbjpcblx0ICogICAgICAgIHJlbW92ZSBjbGFzcyBub3csIHdhaXQgZm9yIHRyYW5zaXRpb25lbmQsXG5cdCAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogICAgLSBhbmltYXRpb246XG5cdCAqICAgICAgICB3YWl0IGZvciBhbmltYXRpb25lbmQsIHJlbW92ZSBjbGFzcyxcblx0ICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuXHQgKiAgICAgICAgZG9uZSBub3cgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogOC4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuXHQgKiAgICBhZnRlckVudGVyIGhvb2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gaW5zZXJ0L3Nob3cgdGhlIGVsZW1lbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdHAkMS5lbnRlciA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcblx0ICB0aGlzLmNhbmNlbFBlbmRpbmcoKTtcblx0ICB0aGlzLmNhbGxIb29rKCdiZWZvcmVFbnRlcicpO1xuXHQgIHRoaXMuY2IgPSBjYjtcblx0ICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgIG9wKCk7XG5cdCAgdGhpcy5lbnRlcmVkID0gZmFsc2U7XG5cdCAgdGhpcy5jYWxsSG9va1dpdGhDYignZW50ZXInKTtcblx0ICBpZiAodGhpcy5lbnRlcmVkKSB7XG5cdCAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cblx0ICB9XG5cdCAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuZW50ZXJDYW5jZWxsZWQ7XG5cdCAgcHVzaEpvYih0aGlzLmVudGVyTmV4dFRpY2spO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbiwgd2hpY2ggaXNcblx0ICogdG8gYmUgcHVzaGVkIGludG8gYSBxdWV1ZSBhbmQgZXhlY3V0ZWQgYWZ0ZXIgYSByZWZsb3cgc29cblx0ICogdGhhdCByZW1vdmluZyB0aGUgY2xhc3MgY2FuIHRyaWdnZXIgYSBDU1MgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEuZW50ZXJOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAvLyBwcmV2ZW50IHRyYW5zaXRpb24gc2tpcHBpbmdcblx0ICB0aGlzLmp1c3RFbnRlcmVkID0gdHJ1ZTtcblx0ICB3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0KGZ1bmN0aW9uICgpIHtcblx0ICAgIF90aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG5cdCAgfSk7XG5cdCAgdmFyIGVudGVyRG9uZSA9IHRoaXMuZW50ZXJEb25lO1xuXHQgIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmVudGVyQ2xhc3MpO1xuXHQgIGlmICghdGhpcy5wZW5kaW5nSnNDYikge1xuXHQgICAgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuXHQgICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gYnkgcmVtb3ZpbmcgZW50ZXIgY2xhc3Mgbm93XG5cdCAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgICAgIHRoaXMuc2V0dXBDc3NDYih0cmFuc2l0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfQU5JTUFUSU9OKSB7XG5cdCAgICAgIHRoaXMuc2V0dXBDc3NDYihhbmltYXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVudGVyRG9uZSgpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG5cdCAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEuZW50ZXJEb25lID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMuZW50ZXJlZCA9IHRydWU7XG5cdCAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcblx0ICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2FmdGVyRW50ZXInKTtcblx0ICBpZiAodGhpcy5jYikgdGhpcy5jYigpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFN0YXJ0IGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiAxLiBsZWF2ZSB0cmFuc2l0aW9uIHRyaWdnZXJlZC5cblx0ICogMi4gY2FsbCBiZWZvcmVMZWF2ZSBob29rXG5cdCAqIDMuIGFkZCBsZWF2ZSBjbGFzcyAodHJpZ2dlciBjc3MgdHJhbnNpdGlvbilcblx0ICogNC4gY2FsbCBsZWF2ZSBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuXHQgKiA1LiByZWZsb3cgaWYgbm8gZXhwbGljaXQganMgY2FsbGJhY2sgaXMgcHJvdmlkZWRcblx0ICogNi4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuXHQgKiAgICAtIHRyYW5zaXRpb24gb3IgYW5pbWF0aW9uOlxuXHQgKiAgICAgICAgd2FpdCBmb3IgZW5kIGV2ZW50LCByZW1vdmUgY2xhc3MsIHRoZW4gZG9uZSBpZlxuXHQgKiAgICAgICAgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcblx0ICogICAgICAgIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogNy4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuXHQgKiAgICBhZnRlckxlYXZlIGhvb2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gcmVtb3ZlL2hpZGUgdGhlIGVsZW1lbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdHAkMS5sZWF2ZSA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcblx0ICB0aGlzLmNhbmNlbFBlbmRpbmcoKTtcblx0ICB0aGlzLmNhbGxIb29rKCdiZWZvcmVMZWF2ZScpO1xuXHQgIHRoaXMub3AgPSBvcDtcblx0ICB0aGlzLmNiID0gY2I7XG5cdCAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcblx0ICB0aGlzLmxlZnQgPSBmYWxzZTtcblx0ICB0aGlzLmNhbGxIb29rV2l0aENiKCdsZWF2ZScpO1xuXHQgIGlmICh0aGlzLmxlZnQpIHtcblx0ICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuXHQgIH1cblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5sZWF2ZUNhbmNlbGxlZDtcblx0ICAvLyBvbmx5IG5lZWQgdG8gaGFuZGxlIGxlYXZlRG9uZSBpZlxuXHQgIC8vIDEuIHRoZSB0cmFuc2l0aW9uIGlzIGFscmVhZHkgZG9uZSAoc3luY2hyb25vdXNseSBjYWxsZWRcblx0ICAvLyAgICBieSB0aGUgdXNlciwgd2hpY2ggY2F1c2VzIHRoaXMub3Agc2V0IHRvIG51bGwpXG5cdCAgLy8gMi4gdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFja1xuXHQgIGlmICh0aGlzLm9wICYmICF0aGlzLnBlbmRpbmdKc0NiKSB7XG5cdCAgICAvLyBpZiBhIENTUyB0cmFuc2l0aW9uIGxlYXZlcyBpbW1lZGlhdGVseSBhZnRlciBlbnRlcixcblx0ICAgIC8vIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiB0aGVyZWZvcmUgd2Vcblx0ICAgIC8vIGRldGVjdCBzdWNoIGNhc2VzIGFuZCBlbmQgdGhlIGxlYXZlIGltbWVkaWF0ZWx5LlxuXHQgICAgaWYgKHRoaXMuanVzdEVudGVyZWQpIHtcblx0ICAgICAgdGhpcy5sZWF2ZURvbmUoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHB1c2hKb2IodGhpcy5sZWF2ZU5leHRUaWNrKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEubGVhdmVOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5sZWF2ZUNsYXNzKTtcblx0ICBpZiAodHlwZSkge1xuXHQgICAgdmFyIGV2ZW50ID0gdHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XG5cdCAgICB0aGlzLnNldHVwQ3NzQ2IoZXZlbnQsIHRoaXMubGVhdmVEb25lKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGhpcy5sZWF2ZURvbmUoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5sZWF2ZURvbmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5sZWZ0ID0gdHJ1ZTtcblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuXHQgIHRoaXMub3AoKTtcblx0ICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2FmdGVyTGVhdmUnKTtcblx0ICBpZiAodGhpcy5jYikgdGhpcy5jYigpO1xuXHQgIHRoaXMub3AgPSBudWxsO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbmNlbCBhbnkgcGVuZGluZyBjYWxsYmFja3MgZnJvbSBhIHByZXZpb3VzbHkgcnVubmluZ1xuXHQgKiBidXQgbm90IGZpbmlzaGVkIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmNhbmNlbFBlbmRpbmcgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuXHQgIHZhciBoYXNQZW5kaW5nID0gZmFsc2U7XG5cdCAgaWYgKHRoaXMucGVuZGluZ0Nzc0NiKSB7XG5cdCAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcblx0ICAgIG9mZih0aGlzLmVsLCB0aGlzLnBlbmRpbmdDc3NFdmVudCwgdGhpcy5wZW5kaW5nQ3NzQ2IpO1xuXHQgICAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IG51bGw7XG5cdCAgfVxuXHQgIGlmICh0aGlzLnBlbmRpbmdKc0NiKSB7XG5cdCAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcblx0ICAgIHRoaXMucGVuZGluZ0pzQ2IuY2FuY2VsKCk7XG5cdCAgICB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcblx0ICB9XG5cdCAgaWYgKGhhc1BlbmRpbmcpIHtcblx0ICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5jYW5jZWwpIHtcblx0ICAgIHRoaXMuY2FuY2VsLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgICB0aGlzLmNhbmNlbCA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYSB1c2VyLXByb3ZpZGVkIHN5bmNocm9ub3VzIGhvb2sgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqL1xuXHRcblx0cCQxLmNhbGxIb29rID0gZnVuY3Rpb24gKHR5cGUpIHtcblx0ICBpZiAodGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdKSB7XG5cdCAgICB0aGlzLmhvb2tzW3R5cGVdLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYSB1c2VyLXByb3ZpZGVkLCBwb3RlbnRpYWxseS1hc3luYyBob29rIGZ1bmN0aW9uLlxuXHQgKiBXZSBjaGVjayBmb3IgdGhlIGxlbmd0aCBvZiBhcmd1bWVudHMgdG8gc2VlIGlmIHRoZSBob29rXG5cdCAqIGV4cGVjdHMgYSBgZG9uZWAgY2FsbGJhY2suIElmIHRydWUsIHRoZSB0cmFuc2l0aW9uJ3MgZW5kXG5cdCAqIHdpbGwgYmUgZGV0ZXJtaW5lZCBieSB3aGVuIHRoZSB1c2VyIGNhbGxzIHRoYXQgY2FsbGJhY2s7XG5cdCAqIG90aGVyd2lzZSwgdGhlIGVuZCBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbiBvclxuXHQgKiBhbmltYXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG5cdCAqL1xuXHRcblx0cCQxLmNhbGxIb29rV2l0aENiID0gZnVuY3Rpb24gKHR5cGUpIHtcblx0ICB2YXIgaG9vayA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXTtcblx0ICBpZiAoaG9vaykge1xuXHQgICAgaWYgKGhvb2subGVuZ3RoID4gMSkge1xuXHQgICAgICB0aGlzLnBlbmRpbmdKc0NiID0gY2FuY2VsbGFibGUodGhpc1t0eXBlICsgJ0RvbmUnXSk7XG5cdCAgICB9XG5cdCAgICBob29rLmNhbGwodGhpcy52bSwgdGhpcy5lbCwgdGhpcy5wZW5kaW5nSnNDYik7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEdldCBhbiBlbGVtZW50J3MgdHJhbnNpdGlvbiB0eXBlIGJhc2VkIG9uIHRoZVxuXHQgKiBjYWxjdWxhdGVkIHN0eWxlcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsYXNzTmFtZVxuXHQgKiBAcmV0dXJuIHtOdW1iZXJ9XG5cdCAqL1xuXHRcblx0cCQxLmdldENzc1RyYW5zaXRpb25UeXBlID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG5cdCAgLy8gc2tpcCBDU1MgdHJhbnNpdGlvbnMgaWYgcGFnZSBpcyBub3QgdmlzaWJsZSAtXG5cdCAgLy8gdGhpcyBzb2x2ZXMgdGhlIGlzc3VlIG9mIHRyYW5zaXRpb25lbmQgZXZlbnRzIG5vdFxuXHQgIC8vIGZpcmluZyB1bnRpbCB0aGUgcGFnZSBpcyB2aXNpYmxlIGFnYWluLlxuXHQgIC8vIHBhZ2VWaXNpYmlsaXR5IEFQSSBpcyBzdXBwb3J0ZWQgaW4gSUUxMCssIHNhbWUgYXNcblx0ICAvLyBDU1MgdHJhbnNpdGlvbnMuXG5cdCAgZG9jdW1lbnQuaGlkZGVuIHx8XG5cdCAgLy8gZXhwbGljaXQganMtb25seSB0cmFuc2l0aW9uXG5cdCAgdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmNzcyA9PT0gZmFsc2UgfHxcblx0ICAvLyBlbGVtZW50IGlzIGhpZGRlblxuXHQgIGlzSGlkZGVuKHRoaXMuZWwpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciB0eXBlID0gdGhpcy50eXBlIHx8IHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV07XG5cdCAgaWYgKHR5cGUpIHJldHVybiB0eXBlO1xuXHQgIHZhciBpbmxpbmVTdHlsZXMgPSB0aGlzLmVsLnN0eWxlO1xuXHQgIHZhciBjb21wdXRlZFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwpO1xuXHQgIHZhciB0cmFuc0R1cmF0aW9uID0gaW5saW5lU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXSB8fCBjb21wdXRlZFN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF07XG5cdCAgaWYgKHRyYW5zRHVyYXRpb24gJiYgdHJhbnNEdXJhdGlvbiAhPT0gJzBzJykge1xuXHQgICAgdHlwZSA9IFRZUEVfVFJBTlNJVElPTjtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGFuaW1EdXJhdGlvbiA9IGlubGluZVN0eWxlc1thbmltRHVyYXRpb25Qcm9wXSB8fCBjb21wdXRlZFN0eWxlc1thbmltRHVyYXRpb25Qcm9wXTtcblx0ICAgIGlmIChhbmltRHVyYXRpb24gJiYgYW5pbUR1cmF0aW9uICE9PSAnMHMnKSB7XG5cdCAgICAgIHR5cGUgPSBUWVBFX0FOSU1BVElPTjtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKHR5cGUpIHtcblx0ICAgIHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV0gPSB0eXBlO1xuXHQgIH1cblx0ICByZXR1cm4gdHlwZTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXR1cCBhIENTUyB0cmFuc2l0aW9uZW5kL2FuaW1hdGlvbmVuZCBjYWxsYmFjay5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0cCQxLnNldHVwQ3NzQ2IgPSBmdW5jdGlvbiAoZXZlbnQsIGNiKSB7XG5cdCAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSBldmVudDtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICB2YXIgb25FbmQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IGZ1bmN0aW9uIChlKSB7XG5cdCAgICBpZiAoZS50YXJnZXQgPT09IGVsKSB7XG5cdCAgICAgIG9mZihlbCwgZXZlbnQsIG9uRW5kKTtcblx0ICAgICAgc2VsZi5wZW5kaW5nQ3NzRXZlbnQgPSBzZWxmLnBlbmRpbmdDc3NDYiA9IG51bGw7XG5cdCAgICAgIGlmICghc2VsZi5wZW5kaW5nSnNDYiAmJiBjYikge1xuXHQgICAgICAgIGNiKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHQgIG9uKGVsLCBldmVudCwgb25FbmQpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgaGlkZGVuIC0gaW4gdGhhdCBjYXNlIHdlIGNhbiBqdXN0XG5cdCAqIHNraXAgdGhlIHRyYW5zaXRpb24gYWxsdG9nZXRoZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc0hpZGRlbihlbCkge1xuXHQgIGlmICgvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG5cdCAgICAvLyBTVkcgZWxlbWVudHMgZG8gbm90IGhhdmUgb2Zmc2V0KFdpZHRofEhlaWdodClcblx0ICAgIC8vIHNvIHdlIG5lZWQgdG8gY2hlY2sgdGhlIGNsaWVudCByZWN0XG5cdCAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHQgICAgcmV0dXJuICEocmVjdC53aWR0aCB8fCByZWN0LmhlaWdodCk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiAhKGVsLm9mZnNldFdpZHRoIHx8IGVsLm9mZnNldEhlaWdodCB8fCBlbC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgdHJhbnNpdGlvbiQxID0ge1xuXHRcblx0ICBwcmlvcml0eTogVFJBTlNJVElPTixcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoaWQsIG9sZElkKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgLy8gcmVzb2x2ZSBvbiBvd25lciB2bVxuXHQgICAgdmFyIGhvb2tzID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICd0cmFuc2l0aW9ucycsIGlkKTtcblx0ICAgIGlkID0gaWQgfHwgJ3YnO1xuXHQgICAgb2xkSWQgPSBvbGRJZCB8fCAndic7XG5cdCAgICBlbC5fX3ZfdHJhbnMgPSBuZXcgVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB0aGlzLnZtKTtcblx0ICAgIHJlbW92ZUNsYXNzKGVsLCBvbGRJZCArICctdHJhbnNpdGlvbicpO1xuXHQgICAgYWRkQ2xhc3MoZWwsIGlkICsgJy10cmFuc2l0aW9uJyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGludGVybmFsRGlyZWN0aXZlcyA9IHtcblx0ICBzdHlsZTogc3R5bGUsXG5cdCAgJ2NsYXNzJzogdkNsYXNzLFxuXHQgIGNvbXBvbmVudDogY29tcG9uZW50LFxuXHQgIHByb3A6IHByb3BEZWYsXG5cdCAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiQxXG5cdH07XG5cdFxuXHQvLyBzcGVjaWFsIGJpbmRpbmcgcHJlZml4ZXNcblx0dmFyIGJpbmRSRSA9IC9edi1iaW5kOnxeOi87XG5cdHZhciBvblJFID0gL152LW9uOnxeQC87XG5cdHZhciBkaXJBdHRyUkUgPSAvXnYtKFteOl0rKSg/OiR8OiguKikkKS87XG5cdHZhciBtb2RpZmllclJFID0gL1xcLlteXFwuXSsvZztcblx0dmFyIHRyYW5zaXRpb25SRSA9IC9eKHYtYmluZDp8Oik/dHJhbnNpdGlvbiQvO1xuXHRcblx0Ly8gZGVmYXVsdCBkaXJlY3RpdmUgcHJpb3JpdHlcblx0dmFyIERFRkFVTFRfUFJJT1JJVFkgPSAxMDAwO1xuXHR2YXIgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSA9IDIwMDA7XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIHRlbXBsYXRlIGFuZCByZXR1cm4gYSByZXVzYWJsZSBjb21wb3NpdGUgbGlua1xuXHQgKiBmdW5jdGlvbiwgd2hpY2ggcmVjdXJzaXZlbHkgY29udGFpbnMgbW9yZSBsaW5rIGZ1bmN0aW9uc1xuXHQgKiBpbnNpZGUuIFRoaXMgdG9wIGxldmVsIGNvbXBpbGUgZnVuY3Rpb24gd291bGQgbm9ybWFsbHlcblx0ICogYmUgY2FsbGVkIG9uIGluc3RhbmNlIHJvb3Qgbm9kZXMsIGJ1dCBjYW4gYWxzbyBiZSB1c2VkXG5cdCAqIGZvciBwYXJ0aWFsIGNvbXBpbGF0aW9uIGlmIHRoZSBwYXJ0aWFsIGFyZ3VtZW50IGlzIHRydWUuXG5cdCAqXG5cdCAqIFRoZSByZXR1cm5lZCBjb21wb3NpdGUgbGluayBmdW5jdGlvbiwgd2hlbiBjYWxsZWQsIHdpbGxcblx0ICogcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBhbGwgZGlyZWN0aXZlc1xuXHQgKiBjcmVhdGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcGFydGlhbFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlKGVsLCBvcHRpb25zLCBwYXJ0aWFsKSB7XG5cdCAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgaXRzZWxmLlxuXHQgIHZhciBub2RlTGlua0ZuID0gcGFydGlhbCB8fCAhb3B0aW9ucy5fYXNDb21wb25lbnQgPyBjb21waWxlTm9kZShlbCwgb3B0aW9ucykgOiBudWxsO1xuXHQgIC8vIGxpbmsgZnVuY3Rpb24gZm9yIHRoZSBjaGlsZE5vZGVzXG5cdCAgdmFyIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmICFpc1NjcmlwdChlbCkgJiYgZWwuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KGVsLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcblx0XG5cdCAgLyoqXG5cdCAgICogQSBjb21wb3NpdGUgbGlua2VyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBhIGFscmVhZHlcblx0ICAgKiBjb21waWxlZCBwaWVjZSBvZiBET00sIHdoaWNoIGluc3RhbnRpYXRlcyBhbGwgZGlyZWN0aXZlXG5cdCAgICogaW5zdGFuY2VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIGhvc3Qgdm0gb2YgdHJhbnNjbHVkZWQgY29udGVudFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBsaW5rIGNvbnRleHQgZnJhZ21lbnRcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAgICovXG5cdFxuXHQgIHJldHVybiBmdW5jdGlvbiBjb21wb3NpdGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG5cdCAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoZWwuY2hpbGROb2Rlcyk7XG5cdCAgICAvLyBsaW5rXG5cdCAgICB2YXIgZGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtDYXB0dXJlcigpIHtcblx0ICAgICAgaWYgKG5vZGVMaW5rRm4pIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICAgIGlmIChjaGlsZExpbmtGbikgY2hpbGRMaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgIH0sIHZtKTtcblx0ICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIGRpcnMpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcHBseSBhIGxpbmtlciB0byBhIHZtL2VsZW1lbnQgcGFpciBhbmQgY2FwdHVyZSB0aGVcblx0ICogZGlyZWN0aXZlcyBjcmVhdGVkIGR1cmluZyB0aGUgcHJvY2Vzcy5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxpbmtBbmRDYXB0dXJlKGxpbmtlciwgdm0pIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgLy8gcmVzZXQgZGlyZWN0aXZlcyBiZWZvcmUgZXZlcnkgY2FwdHVyZSBpbiBwcm9kdWN0aW9uXG5cdCAgICAvLyBtb2RlLCBzbyB0aGF0IHdoZW4gdW5saW5raW5nIHdlIGRvbid0IG5lZWQgdG8gc3BsaWNlXG5cdCAgICAvLyB0aGVtIG91dCAod2hpY2ggdHVybnMgb3V0IHRvIGJlIGEgcGVyZiBoaXQpLlxuXHQgICAgLy8gdGhleSBhcmUga2VwdCBpbiBkZXZlbG9wbWVudCBtb2RlIGJlY2F1c2UgdGhleSBhcmVcblx0ICAgIC8vIHVzZWZ1bCBmb3IgVnVlJ3Mgb3duIHRlc3RzLlxuXHQgICAgdm0uX2RpcmVjdGl2ZXMgPSBbXTtcblx0ICB9XG5cdCAgdmFyIG9yaWdpbmFsRGlyQ291bnQgPSB2bS5fZGlyZWN0aXZlcy5sZW5ndGg7XG5cdCAgbGlua2VyKCk7XG5cdCAgdmFyIGRpcnMgPSB2bS5fZGlyZWN0aXZlcy5zbGljZShvcmlnaW5hbERpckNvdW50KTtcblx0ICBkaXJzLnNvcnQoZGlyZWN0aXZlQ29tcGFyYXRvcik7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZGlyc1tpXS5fYmluZCgpO1xuXHQgIH1cblx0ICByZXR1cm4gZGlycztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERpcmVjdGl2ZSBwcmlvcml0eSBzb3J0IGNvbXBhcmF0b3Jcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGFcblx0ICogQHBhcmFtIHtPYmplY3R9IGJcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkaXJlY3RpdmVDb21wYXJhdG9yKGEsIGIpIHtcblx0ICBhID0gYS5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuXHQgIGIgPSBiLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG5cdCAgcmV0dXJuIGEgPiBiID8gLTEgOiBhID09PSBiID8gMCA6IDE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBMaW5rZXIgZnVuY3Rpb25zIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdFxuXHQgKiB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXMgaW5zdGFuY2VzIGdlbmVyYXRlZCBkdXJpbmdcblx0ICogdGhlIHByb2Nlc3MuXG5cdCAqXG5cdCAqIFdlIGNyZWF0ZSB1bmxpbmsgZnVuY3Rpb25zIHdpdGggb25seSB0aGUgbmVjZXNzYXJ5XG5cdCAqIGluZm9ybWF0aW9uIHRvIGF2b2lkIHJldGFpbmluZyBhZGRpdGlvbmFsIGNsb3N1cmVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtBcnJheX0gZGlyc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gW2NvbnRleHRdXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtjb250ZXh0RGlyc11cblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVVubGlua0ZuKHZtLCBkaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycykge1xuXHQgIGZ1bmN0aW9uIHVubGluayhkZXN0cm95aW5nKSB7XG5cdCAgICB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpO1xuXHQgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dERpcnMpIHtcblx0ICAgICAgdGVhcmRvd25EaXJzKGNvbnRleHQsIGNvbnRleHREaXJzKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gZXhwb3NlIGxpbmtlZCBkaXJlY3RpdmVzXG5cdCAgdW5saW5rLmRpcnMgPSBkaXJzO1xuXHQgIHJldHVybiB1bmxpbms7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUZWFyZG93biBwYXJ0aWFsIGxpbmtlZCBkaXJlY3RpdmVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtBcnJheX0gZGlyc1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IGRlc3Ryb3lpbmdcblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpIHtcblx0ICB2YXIgaSA9IGRpcnMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGRpcnNbaV0uX3RlYXJkb3duKCk7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiAhZGVzdHJveWluZykge1xuXHQgICAgICB2bS5fZGlyZWN0aXZlcy4kcmVtb3ZlKGRpcnNbaV0pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgbGluayBwcm9wcyBvbiBhbiBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVBbmRMaW5rUHJvcHModm0sIGVsLCBwcm9wcywgc2NvcGUpIHtcblx0ICB2YXIgcHJvcHNMaW5rRm4gPSBjb21waWxlUHJvcHMoZWwsIHByb3BzLCB2bSk7XG5cdCAgdmFyIHByb3BEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuXHQgICAgcHJvcHNMaW5rRm4odm0sIHNjb3BlKTtcblx0ICB9LCB2bSk7XG5cdCAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgcHJvcERpcnMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSB0aGUgcm9vdCBlbGVtZW50IG9mIGFuIGluc3RhbmNlLlxuXHQgKlxuXHQgKiAxLiBhdHRycyBvbiBjb250ZXh0IGNvbnRhaW5lciAoY29udGV4dCBzY29wZSlcblx0ICogMi4gYXR0cnMgb24gdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSByb290IG5vZGUsIGlmXG5cdCAqICAgIHJlcGxhY2U6dHJ1ZSAoY2hpbGQgc2NvcGUpXG5cdCAqXG5cdCAqIElmIHRoaXMgaXMgYSBmcmFnbWVudCBpbnN0YW5jZSwgd2Ugb25seSBuZWVkIHRvIGNvbXBpbGUgMS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dE9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKSB7XG5cdCAgdmFyIGNvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fY29udGFpbmVyQXR0cnM7XG5cdCAgdmFyIHJlcGxhY2VyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzO1xuXHQgIHZhciBjb250ZXh0TGlua0ZuLCByZXBsYWNlckxpbmtGbjtcblx0XG5cdCAgLy8gb25seSBuZWVkIHRvIGNvbXBpbGUgb3RoZXIgYXR0cmlidXRlcyBmb3Jcblx0ICAvLyBub24tZnJhZ21lbnQgaW5zdGFuY2VzXG5cdCAgaWYgKGVsLm5vZGVUeXBlICE9PSAxMSkge1xuXHQgICAgLy8gZm9yIGNvbXBvbmVudHMsIGNvbnRhaW5lciBhbmQgcmVwbGFjZXIgbmVlZCB0byBiZVxuXHQgICAgLy8gY29tcGlsZWQgc2VwYXJhdGVseSBhbmQgbGlua2VkIGluIGRpZmZlcmVudCBzY29wZXMuXG5cdCAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcblx0ICAgICAgLy8gMi4gY29udGFpbmVyIGF0dHJpYnV0ZXNcblx0ICAgICAgaWYgKGNvbnRhaW5lckF0dHJzICYmIGNvbnRleHRPcHRpb25zKSB7XG5cdCAgICAgICAgY29udGV4dExpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGNvbnRhaW5lckF0dHJzLCBjb250ZXh0T3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHJlcGxhY2VyQXR0cnMpIHtcblx0ICAgICAgICAvLyAzLiByZXBsYWNlciBhdHRyaWJ1dGVzXG5cdCAgICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhyZXBsYWNlckF0dHJzLCBvcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm9uLWNvbXBvbmVudCwganVzdCBjb21waWxlIGFzIGEgbm9ybWFsIGVsZW1lbnQuXG5cdCAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoZWwuYXR0cmlidXRlcywgb3B0aW9ucyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbnRhaW5lckF0dHJzKSB7XG5cdCAgICAvLyB3YXJuIGNvbnRhaW5lciBkaXJlY3RpdmVzIGZvciBmcmFnbWVudCBpbnN0YW5jZXNcblx0ICAgIHZhciBuYW1lcyA9IGNvbnRhaW5lckF0dHJzLmZpbHRlcihmdW5jdGlvbiAoYXR0cikge1xuXHQgICAgICAvLyBhbGxvdyB2dWUtbG9hZGVyL3Z1ZWlmeSBzY29wZWQgY3NzIGF0dHJpYnV0ZXNcblx0ICAgICAgcmV0dXJuIGF0dHIubmFtZS5pbmRleE9mKCdfdi0nKSA8IDAgJiZcblx0ICAgICAgLy8gYWxsb3cgZXZlbnQgbGlzdGVuZXJzXG5cdCAgICAgICFvblJFLnRlc3QoYXR0ci5uYW1lKSAmJlxuXHQgICAgICAvLyBhbGxvdyBzbG90c1xuXHQgICAgICBhdHRyLm5hbWUgIT09ICdzbG90Jztcblx0ICAgIH0pLm1hcChmdW5jdGlvbiAoYXR0cikge1xuXHQgICAgICByZXR1cm4gJ1wiJyArIGF0dHIubmFtZSArICdcIic7XG5cdCAgICB9KTtcblx0ICAgIGlmIChuYW1lcy5sZW5ndGgpIHtcblx0ICAgICAgdmFyIHBsdXJhbCA9IG5hbWVzLmxlbmd0aCA+IDE7XG5cdCAgICAgIHdhcm4oJ0F0dHJpYnV0ZScgKyAocGx1cmFsID8gJ3MgJyA6ICcgJykgKyBuYW1lcy5qb2luKCcsICcpICsgKHBsdXJhbCA/ICcgYXJlJyA6ICcgaXMnKSArICcgaWdub3JlZCBvbiBjb21wb25lbnQgJyArICc8JyArIG9wdGlvbnMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4gYmVjYXVzZSAnICsgJ3RoZSBjb21wb25lbnQgaXMgYSBmcmFnbWVudCBpbnN0YW5jZTogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNGcmFnbWVudC1JbnN0YW5jZScpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gbnVsbDtcblx0ICByZXR1cm4gZnVuY3Rpb24gcm9vdExpbmtGbih2bSwgZWwsIHNjb3BlKSB7XG5cdCAgICAvLyBsaW5rIGNvbnRleHQgc2NvcGUgZGlyc1xuXHQgICAgdmFyIGNvbnRleHQgPSB2bS5fY29udGV4dDtcblx0ICAgIHZhciBjb250ZXh0RGlycztcblx0ICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHRMaW5rRm4pIHtcblx0ICAgICAgY29udGV4dERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY29udGV4dExpbmtGbihjb250ZXh0LCBlbCwgbnVsbCwgc2NvcGUpO1xuXHQgICAgICB9LCBjb250ZXh0KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBsaW5rIHNlbGZcblx0ICAgIHZhciBzZWxmRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHJlcGxhY2VyTGlua0ZuKSByZXBsYWNlckxpbmtGbih2bSwgZWwpO1xuXHQgICAgfSwgdm0pO1xuXHRcblx0ICAgIC8vIHJldHVybiB0aGUgdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGNvbnRleHRcblx0ICAgIC8vIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuXHQgICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgc2VsZkRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIG5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4gYmFzZWQgb24gdGhlXG5cdCAqIG5vZGUgdHlwZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZU5vZGUobm9kZSwgb3B0aW9ucykge1xuXHQgIHZhciB0eXBlID0gbm9kZS5ub2RlVHlwZTtcblx0ICBpZiAodHlwZSA9PT0gMSAmJiAhaXNTY3JpcHQobm9kZSkpIHtcblx0ICAgIHJldHVybiBjb21waWxlRWxlbWVudChub2RlLCBvcHRpb25zKTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IDMgJiYgbm9kZS5kYXRhLnRyaW0oKSkge1xuXHQgICAgcmV0dXJuIGNvbXBpbGVUZXh0Tm9kZShub2RlLCBvcHRpb25zKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZUVsZW1lbnQoZWwsIG9wdGlvbnMpIHtcblx0ICAvLyBwcmVwcm9jZXNzIHRleHRhcmVhcy5cblx0ICAvLyB0ZXh0YXJlYSB0cmVhdHMgaXRzIHRleHQgY29udGVudCBhcyB0aGUgaW5pdGlhbCB2YWx1ZS5cblx0ICAvLyBqdXN0IGJpbmQgaXQgYXMgYW4gYXR0ciBkaXJlY3RpdmUgZm9yIHZhbHVlLlxuXHQgIGlmIChlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG5cdCAgICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KGVsLnZhbHVlKTtcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgZWwuc2V0QXR0cmlidXRlKCc6dmFsdWUnLCB0b2tlbnNUb0V4cCh0b2tlbnMpKTtcblx0ICAgICAgZWwudmFsdWUgPSAnJztcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIGxpbmtGbjtcblx0ICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG5cdCAgdmFyIGF0dHJzID0gaGFzQXR0cnMgJiYgdG9BcnJheShlbC5hdHRyaWJ1dGVzKTtcblx0ICAvLyBjaGVjayB0ZXJtaW5hbCBkaXJlY3RpdmVzIChmb3IgJiBpZilcblx0ICBpZiAoaGFzQXR0cnMpIHtcblx0ICAgIGxpbmtGbiA9IGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIC8vIGNoZWNrIGVsZW1lbnQgZGlyZWN0aXZlc1xuXHQgIGlmICghbGlua0ZuKSB7XG5cdCAgICBsaW5rRm4gPSBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgLy8gY2hlY2sgY29tcG9uZW50XG5cdCAgaWYgKCFsaW5rRm4pIHtcblx0ICAgIGxpbmtGbiA9IGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcblx0ICBpZiAoIWxpbmtGbiAmJiBoYXNBdHRycykge1xuXHQgICAgbGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoYXR0cnMsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICByZXR1cm4gbGlua0ZuO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIHRleHROb2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1RleHROb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9IHRleHROb2RlTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpIHtcblx0ICAvLyBza2lwIG1hcmtlZCB0ZXh0IG5vZGVzXG5cdCAgaWYgKG5vZGUuX3NraXApIHtcblx0ICAgIHJldHVybiByZW1vdmVUZXh0O1xuXHQgIH1cblx0XG5cdCAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChub2RlLndob2xlVGV4dCk7XG5cdCAgaWYgKCF0b2tlbnMpIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0XG5cdCAgLy8gbWFyayBhZGphY2VudCB0ZXh0IG5vZGVzIGFzIHNraXBwZWQsXG5cdCAgLy8gYmVjYXVzZSB3ZSBhcmUgdXNpbmcgbm9kZS53aG9sZVRleHQgdG8gY29tcGlsZVxuXHQgIC8vIGFsbCBhZGphY2VudCB0ZXh0IG5vZGVzIHRvZ2V0aGVyLiBUaGlzIGZpeGVzXG5cdCAgLy8gaXNzdWVzIGluIElFIHdoZXJlIHNvbWV0aW1lcyBpdCBzcGxpdHMgdXAgYSBzaW5nbGVcblx0ICAvLyB0ZXh0IG5vZGUgaW50byBtdWx0aXBsZSBvbmVzLlxuXHQgIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcblx0ICB3aGlsZSAobmV4dCAmJiBuZXh0Lm5vZGVUeXBlID09PSAzKSB7XG5cdCAgICBuZXh0Ll9za2lwID0gdHJ1ZTtcblx0ICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuXHQgIH1cblx0XG5cdCAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgdmFyIGVsLCB0b2tlbjtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHRva2VuID0gdG9rZW5zW2ldO1xuXHQgICAgZWwgPSB0b2tlbi50YWcgPyBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0ICByZXR1cm4gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZywgb3B0aW9ucyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBMaW5rZXIgZm9yIGFuIHNraXBwZWQgdGV4dCBub2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtUZXh0fSBub2RlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlVGV4dCh2bSwgbm9kZSkge1xuXHQgIHJlbW92ZShub2RlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgYSBzaW5nbGUgdGV4dCB0b2tlbi5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge05vZGV9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykge1xuXHQgIHZhciBlbDtcblx0ICBpZiAodG9rZW4ub25lVGltZSkge1xuXHQgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGlmICh0b2tlbi5odG1sKSB7XG5cdCAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlQ29tbWVudCgndi1odG1sJyk7XG5cdCAgICAgIHNldFRva2VuVHlwZSgnaHRtbCcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gSUUgd2lsbCBjbGVhbiB1cCBlbXB0eSB0ZXh0Tm9kZXMgZHVyaW5nXG5cdCAgICAgIC8vIGZyYWcuY2xvbmVOb2RlKHRydWUpLCBzbyB3ZSBoYXZlIHRvIGdpdmUgaXRcblx0ICAgICAgLy8gc29tZXRoaW5nIGhlcmUuLi5cblx0ICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnICcpO1xuXHQgICAgICBzZXRUb2tlblR5cGUoJ3RleHQnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZnVuY3Rpb24gc2V0VG9rZW5UeXBlKHR5cGUpIHtcblx0ICAgIGlmICh0b2tlbi5kZXNjcmlwdG9yKSByZXR1cm47XG5cdCAgICB2YXIgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodG9rZW4udmFsdWUpO1xuXHQgICAgdG9rZW4uZGVzY3JpcHRvciA9IHtcblx0ICAgICAgbmFtZTogdHlwZSxcblx0ICAgICAgZGVmOiBkaXJlY3RpdmVzW3R5cGVdLFxuXHQgICAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcblx0ICAgICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnNcblx0ICAgIH07XG5cdCAgfVxuXHQgIHJldHVybiBlbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBwcm9jZXNzZXMgYSB0ZXh0Tm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSB0b2tlbnNcblx0ICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZykge1xuXHQgIHJldHVybiBmdW5jdGlvbiB0ZXh0Tm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlKSB7XG5cdCAgICB2YXIgZnJhZ0Nsb25lID0gZnJhZy5jbG9uZU5vZGUodHJ1ZSk7XG5cdCAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkoZnJhZ0Nsb25lLmNoaWxkTm9kZXMpO1xuXHQgICAgdmFyIHRva2VuLCB2YWx1ZSwgbm9kZTtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB0b2tlbiA9IHRva2Vuc1tpXTtcblx0ICAgICAgdmFsdWUgPSB0b2tlbi52YWx1ZTtcblx0ICAgICAgaWYgKHRva2VuLnRhZykge1xuXHQgICAgICAgIG5vZGUgPSBjaGlsZE5vZGVzW2ldO1xuXHQgICAgICAgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG5cdCAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bSkuJGV2YWwodmFsdWUpO1xuXHQgICAgICAgICAgaWYgKHRva2VuLmh0bWwpIHtcblx0ICAgICAgICAgICAgcmVwbGFjZShub2RlLCBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlKSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBub2RlLmRhdGEgPSBfdG9TdHJpbmcodmFsdWUpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB2bS5fYmluZERpcih0b2tlbi5kZXNjcmlwdG9yLCBub2RlLCBob3N0LCBzY29wZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXBsYWNlKGVsLCBmcmFnQ2xvbmUpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgbm9kZSBsaXN0IGFuZCByZXR1cm4gYSBjaGlsZExpbmtGbi5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZUxpc3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVOb2RlTGlzdChub2RlTGlzdCwgb3B0aW9ucykge1xuXHQgIHZhciBsaW5rRm5zID0gW107XG5cdCAgdmFyIG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuLCBub2RlO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZUxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBub2RlID0gbm9kZUxpc3RbaV07XG5cdCAgICBub2RlTGlua0ZuID0gY29tcGlsZU5vZGUobm9kZSwgb3B0aW9ucyk7XG5cdCAgICBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiBub2RlLnRhZ05hbWUgIT09ICdTQ1JJUFQnICYmIG5vZGUuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KG5vZGUuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuXHQgICAgbGlua0Zucy5wdXNoKG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuKTtcblx0ICB9XG5cdCAgcmV0dXJuIGxpbmtGbnMubGVuZ3RoID8gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIDogbnVsbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1ha2UgYSBjaGlsZCBsaW5rIGZ1bmN0aW9uIGZvciBhIG5vZGUncyBjaGlsZE5vZGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gbGlua0Zuc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gY2hpbGRMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlQ2hpbGRMaW5rRm4obGlua0Zucykge1xuXHQgIHJldHVybiBmdW5jdGlvbiBjaGlsZExpbmtGbih2bSwgbm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICB2YXIgbm9kZSwgbm9kZUxpbmtGbiwgY2hpbGRyZW5MaW5rRm47XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbiA9IDAsIGwgPSBsaW5rRm5zLmxlbmd0aDsgaSA8IGw7IG4rKykge1xuXHQgICAgICBub2RlID0gbm9kZXNbbl07XG5cdCAgICAgIG5vZGVMaW5rRm4gPSBsaW5rRm5zW2krK107XG5cdCAgICAgIGNoaWxkcmVuTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuXHQgICAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcblx0ICAgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KG5vZGUuY2hpbGROb2Rlcyk7XG5cdCAgICAgIGlmIChub2RlTGlua0ZuKSB7XG5cdCAgICAgICAgbm9kZUxpbmtGbih2bSwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChjaGlsZHJlbkxpbmtGbikge1xuXHQgICAgICAgIGNoaWxkcmVuTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgZm9yIGVsZW1lbnQgZGlyZWN0aXZlcyAoY3VzdG9tIGVsZW1lbnRzIHRoYXQgc2hvdWxkXG5cdCAqIGJlIHJlc292bGVkIGFzIHRlcm1pbmFsIGRpcmVjdGl2ZXMpLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucykge1xuXHQgIHZhciB0YWcgPSBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgaWYgKGNvbW1vblRhZ1JFLnRlc3QodGFnKSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZyk7XG5cdCAgaWYgKGRlZikge1xuXHQgICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIHRhZywgJycsIG9wdGlvbnMsIGRlZik7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudC4gSWYgeWVzLCByZXR1cm5cblx0ICogYSBjb21wb25lbnQgbGluayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgY29tcG9uZW50ID0gY2hlY2tDb21wb25lbnRBdHRyKGVsLCBvcHRpb25zKTtcblx0ICBpZiAoY29tcG9uZW50KSB7XG5cdCAgICB2YXIgcmVmID0gZmluZFJlZihlbCk7XG5cdCAgICB2YXIgZGVzY3JpcHRvciA9IHtcblx0ICAgICAgbmFtZTogJ2NvbXBvbmVudCcsXG5cdCAgICAgIHJlZjogcmVmLFxuXHQgICAgICBleHByZXNzaW9uOiBjb21wb25lbnQuaWQsXG5cdCAgICAgIGRlZjogaW50ZXJuYWxEaXJlY3RpdmVzLmNvbXBvbmVudCxcblx0ICAgICAgbW9kaWZpZXJzOiB7XG5cdCAgICAgICAgbGl0ZXJhbDogIWNvbXBvbmVudC5keW5hbWljXG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgICB2YXIgY29tcG9uZW50TGlua0ZuID0gZnVuY3Rpb24gY29tcG9uZW50TGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgICAgaWYgKHJlZikge1xuXHQgICAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIHJlZiwgbnVsbCk7XG5cdCAgICAgIH1cblx0ICAgICAgdm0uX2JpbmREaXIoZGVzY3JpcHRvciwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgIH07XG5cdCAgICBjb21wb25lbnRMaW5rRm4udGVybWluYWwgPSB0cnVlO1xuXHQgICAgcmV0dXJuIGNvbXBvbmVudExpbmtGbjtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBhbiBlbGVtZW50IGZvciB0ZXJtaW5hbCBkaXJlY3RpdmVzIGluIGZpeGVkIG9yZGVyLlxuXHQgKiBJZiBpdCBmaW5kcyBvbmUsIHJldHVybiBhIHRlcm1pbmFsIGxpbmsgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtBcnJheX0gYXR0cnNcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMoZWwsIGF0dHJzLCBvcHRpb25zKSB7XG5cdCAgLy8gc2tpcCB2LXByZVxuXHQgIGlmIChnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIHNraXA7XG5cdCAgfVxuXHQgIC8vIHNraXAgdi1lbHNlIGJsb2NrLCBidXQgb25seSBpZiBmb2xsb3dpbmcgdi1pZlxuXHQgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3YtZWxzZScpKSB7XG5cdCAgICB2YXIgcHJldiA9IGVsLnByZXZpb3VzRWxlbWVudFNpYmxpbmc7XG5cdCAgICBpZiAocHJldiAmJiBwcmV2Lmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICAgIHJldHVybiBza2lwO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCBtb2RpZmllcnMsIG1hdGNoZWQsIGRpck5hbWUsIHJhd05hbWUsIGFyZywgZGVmLCB0ZXJtRGVmO1xuXHQgIGZvciAodmFyIGkgPSAwLCBqID0gYXR0cnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdCAgICBhdHRyID0gYXR0cnNbaV07XG5cdCAgICBuYW1lID0gYXR0ci5uYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuXHQgICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcblx0ICAgICAgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdkaXJlY3RpdmVzJywgbWF0Y2hlZFsxXSk7XG5cdCAgICAgIGlmIChkZWYgJiYgZGVmLnRlcm1pbmFsKSB7XG5cdCAgICAgICAgaWYgKCF0ZXJtRGVmIHx8IChkZWYucHJpb3JpdHkgfHwgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSkgPiB0ZXJtRGVmLnByaW9yaXR5KSB7XG5cdCAgICAgICAgICB0ZXJtRGVmID0gZGVmO1xuXHQgICAgICAgICAgcmF3TmFtZSA9IGF0dHIubmFtZTtcblx0ICAgICAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKGF0dHIubmFtZSk7XG5cdCAgICAgICAgICB2YWx1ZSA9IGF0dHIudmFsdWU7XG5cdCAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcblx0ICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAodGVybURlZikge1xuXHQgICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCB0ZXJtRGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycyk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBza2lwKCkge31cblx0c2tpcC50ZXJtaW5hbCA9IHRydWU7XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBub2RlIGxpbmsgZnVuY3Rpb24gZm9yIGEgdGVybWluYWwgZGlyZWN0aXZlLlxuXHQgKiBBIHRlcm1pbmFsIGxpbmsgZnVuY3Rpb24gdGVybWluYXRlcyB0aGUgY3VycmVudFxuXHQgKiBjb21waWxhdGlvbiByZWN1cnNpb24gYW5kIGhhbmRsZXMgY29tcGlsYXRpb24gb2YgdGhlXG5cdCAqIHN1YnRyZWUgaW4gdGhlIGRpcmVjdGl2ZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtPYmplY3R9IGRlZlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW3Jhd05hbWVdXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbYXJnXVxuXHQgKiBAcGFyYW0ge09iamVjdH0gW21vZGlmaWVyc11cblx0ICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIGRlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpIHtcblx0ICB2YXIgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuXHQgIHZhciBkZXNjcmlwdG9yID0ge1xuXHQgICAgbmFtZTogZGlyTmFtZSxcblx0ICAgIGFyZzogYXJnLFxuXHQgICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG5cdCAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVycyxcblx0ICAgIHJhdzogdmFsdWUsXG5cdCAgICBhdHRyOiByYXdOYW1lLFxuXHQgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG5cdCAgICBkZWY6IGRlZlxuXHQgIH07XG5cdCAgLy8gY2hlY2sgcmVmIGZvciB2LWZvciBhbmQgcm91dGVyLXZpZXdcblx0ICBpZiAoZGlyTmFtZSA9PT0gJ2ZvcicgfHwgZGlyTmFtZSA9PT0gJ3JvdXRlci12aWV3Jykge1xuXHQgICAgZGVzY3JpcHRvci5yZWYgPSBmaW5kUmVmKGVsKTtcblx0ICB9XG5cdCAgdmFyIGZuID0gZnVuY3Rpb24gdGVybWluYWxOb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIGlmIChkZXNjcmlwdG9yLnJlZikge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCBkZXNjcmlwdG9yLnJlZiwgbnVsbCk7XG5cdCAgICB9XG5cdCAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgIH07XG5cdCAgZm4udGVybWluYWwgPSB0cnVlO1xuXHQgIHJldHVybiBmbjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgdGhlIGRpcmVjdGl2ZXMgb24gYW4gZWxlbWVudCBhbmQgcmV0dXJuIGEgbGlua2VyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fE5hbWVkTm9kZU1hcH0gYXR0cnNcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZURpcmVjdGl2ZXMoYXR0cnMsIG9wdGlvbnMpIHtcblx0ICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcblx0ICB2YXIgZGlycyA9IFtdO1xuXHQgIHZhciBhdHRyLCBuYW1lLCB2YWx1ZSwgcmF3TmFtZSwgcmF3VmFsdWUsIGRpck5hbWUsIGFyZywgbW9kaWZpZXJzLCBkaXJEZWYsIHRva2VucywgbWF0Y2hlZDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBhdHRyID0gYXR0cnNbaV07XG5cdCAgICBuYW1lID0gcmF3TmFtZSA9IGF0dHIubmFtZTtcblx0ICAgIHZhbHVlID0gcmF3VmFsdWUgPSBhdHRyLnZhbHVlO1xuXHQgICAgdG9rZW5zID0gcGFyc2VUZXh0KHZhbHVlKTtcblx0ICAgIC8vIHJlc2V0IGFyZ1xuXHQgICAgYXJnID0gbnVsbDtcblx0ICAgIC8vIGNoZWNrIG1vZGlmaWVyc1xuXHQgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMobmFtZSk7XG5cdCAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcblx0XG5cdCAgICAvLyBhdHRyaWJ1dGUgaW50ZXJwb2xhdGlvbnNcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgdmFsdWUgPSB0b2tlbnNUb0V4cCh0b2tlbnMpO1xuXHQgICAgICBhcmcgPSBuYW1lO1xuXHQgICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kLCB0b2tlbnMpO1xuXHQgICAgICAvLyB3YXJuIGFnYWluc3QgbWl4aW5nIG11c3RhY2hlcyB3aXRoIHYtYmluZFxuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIGlmIChuYW1lID09PSAnY2xhc3MnICYmIEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoYXR0cnMsIGZ1bmN0aW9uIChhdHRyKSB7XG5cdCAgICAgICAgICByZXR1cm4gYXR0ci5uYW1lID09PSAnOmNsYXNzJyB8fCBhdHRyLm5hbWUgPT09ICd2LWJpbmQ6Y2xhc3MnO1xuXHQgICAgICAgIH0pKSB7XG5cdCAgICAgICAgICB3YXJuKCdjbGFzcz1cIicgKyByYXdWYWx1ZSArICdcIjogRG8gbm90IG1peCBtdXN0YWNoZSBpbnRlcnBvbGF0aW9uICcgKyAnYW5kIHYtYmluZCBmb3IgXCJjbGFzc1wiIG9uIHRoZSBzYW1lIGVsZW1lbnQuIFVzZSBvbmUgb3IgdGhlIG90aGVyLicsIG9wdGlvbnMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlXG5cdFxuXHQgICAgICAvLyBzcGVjaWFsIGF0dHJpYnV0ZTogdHJhbnNpdGlvblxuXHQgICAgICBpZiAodHJhbnNpdGlvblJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICBtb2RpZmllcnMubGl0ZXJhbCA9ICFiaW5kUkUudGVzdChuYW1lKTtcblx0ICAgICAgICBwdXNoRGlyKCd0cmFuc2l0aW9uJywgaW50ZXJuYWxEaXJlY3RpdmVzLnRyYW5zaXRpb24pO1xuXHQgICAgICB9IGVsc2Vcblx0XG5cdCAgICAgICAgLy8gZXZlbnQgaGFuZGxlcnNcblx0ICAgICAgICBpZiAob25SRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgICBhcmcgPSBuYW1lLnJlcGxhY2Uob25SRSwgJycpO1xuXHQgICAgICAgICAgcHVzaERpcignb24nLCBkaXJlY3RpdmVzLm9uKTtcblx0ICAgICAgICB9IGVsc2Vcblx0XG5cdCAgICAgICAgICAvLyBhdHRyaWJ1dGUgYmluZGluZ3Ncblx0ICAgICAgICAgIGlmIChiaW5kUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgICAgICBkaXJOYW1lID0gbmFtZS5yZXBsYWNlKGJpbmRSRSwgJycpO1xuXHQgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ3N0eWxlJyB8fCBkaXJOYW1lID09PSAnY2xhc3MnKSB7XG5cdCAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBpbnRlcm5hbERpcmVjdGl2ZXNbZGlyTmFtZV0pO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGFyZyA9IGRpck5hbWU7XG5cdCAgICAgICAgICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0gZWxzZVxuXHRcblx0ICAgICAgICAgICAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcblx0ICAgICAgICAgICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcblx0ICAgICAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcblx0ICAgICAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xuXHRcblx0ICAgICAgICAgICAgICAvLyBza2lwIHYtZWxzZSAod2hlbiB1c2VkIHdpdGggdi1zaG93KVxuXHQgICAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnZWxzZScpIHtcblx0ICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgICAgICAgIH1cblx0XG5cdCAgICAgICAgICAgICAgZGlyRGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdkaXJlY3RpdmVzJywgZGlyTmFtZSwgdHJ1ZSk7XG5cdCAgICAgICAgICAgICAgaWYgKGRpckRlZikge1xuXHQgICAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBkaXJEZWYpO1xuXHQgICAgICAgICAgICAgIH1cblx0ICAgICAgICAgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUHVzaCBhIGRpcmVjdGl2ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG5cdCAgICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IGRlZlxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IFtpbnRlcnBUb2tlbnNdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHB1c2hEaXIoZGlyTmFtZSwgZGVmLCBpbnRlcnBUb2tlbnMpIHtcblx0ICAgIHZhciBoYXNPbmVUaW1lVG9rZW4gPSBpbnRlcnBUb2tlbnMgJiYgaGFzT25lVGltZShpbnRlcnBUb2tlbnMpO1xuXHQgICAgdmFyIHBhcnNlZCA9ICFoYXNPbmVUaW1lVG9rZW4gJiYgcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuXHQgICAgZGlycy5wdXNoKHtcblx0ICAgICAgbmFtZTogZGlyTmFtZSxcblx0ICAgICAgYXR0cjogcmF3TmFtZSxcblx0ICAgICAgcmF3OiByYXdWYWx1ZSxcblx0ICAgICAgZGVmOiBkZWYsXG5cdCAgICAgIGFyZzogYXJnLFxuXHQgICAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcblx0ICAgICAgLy8gY29udmVyc2lvbiBmcm9tIGludGVycG9sYXRpb24gc3RyaW5ncyB3aXRoIG9uZS10aW1lIHRva2VuXG5cdCAgICAgIC8vIHRvIGV4cHJlc3Npb24gaXMgZGlmZmVyZWQgdW50aWwgZGlyZWN0aXZlIGJpbmQgdGltZSBzbyB0aGF0IHdlXG5cdCAgICAgIC8vIGhhdmUgYWNjZXNzIHRvIHRoZSBhY3R1YWwgdm0gY29udGV4dCBmb3Igb25lLXRpbWUgYmluZGluZ3MuXG5cdCAgICAgIGV4cHJlc3Npb246IHBhcnNlZCAmJiBwYXJzZWQuZXhwcmVzc2lvbixcblx0ICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuXHQgICAgICBpbnRlcnA6IGludGVycFRva2Vucyxcblx0ICAgICAgaGFzT25lVGltZTogaGFzT25lVGltZVRva2VuXG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIGlmIChkaXJzLmxlbmd0aCkge1xuXHQgICAgcmV0dXJuIG1ha2VOb2RlTGlua0ZuKGRpcnMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIG1vZGlmaWVycyBmcm9tIGRpcmVjdGl2ZSBhdHRyaWJ1dGUgbmFtZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlTW9kaWZpZXJzKG5hbWUpIHtcblx0ICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB2YXIgbWF0Y2ggPSBuYW1lLm1hdGNoKG1vZGlmaWVyUkUpO1xuXHQgIGlmIChtYXRjaCkge1xuXHQgICAgdmFyIGkgPSBtYXRjaC5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHJlc1ttYXRjaFtpXS5zbGljZSgxKV0gPSB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBsaW5rIGZ1bmN0aW9uIGZvciBhbGwgZGlyZWN0aXZlcyBvbiBhIHNpbmdsZSBub2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBkaXJlY3RpdmVzXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBkaXJlY3RpdmVzTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZU5vZGVMaW5rRm4oZGlyZWN0aXZlcykge1xuXHQgIHJldHVybiBmdW5jdGlvbiBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIC8vIHJldmVyc2UgYXBwbHkgYmVjYXVzZSBpdCdzIHNvcnRlZCBsb3cgdG8gaGlnaFxuXHQgICAgdmFyIGkgPSBkaXJlY3RpdmVzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdm0uX2JpbmREaXIoZGlyZWN0aXZlc1tpXSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gaW50ZXJwb2xhdGlvbiBzdHJpbmcgY29udGFpbnMgb25lLXRpbWUgdG9rZW5zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBoYXNPbmVUaW1lKHRva2Vucykge1xuXHQgIHZhciBpID0gdG9rZW5zLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBpZiAodG9rZW5zW2ldLm9uZVRpbWUpIHJldHVybiB0cnVlO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNTY3JpcHQoZWwpIHtcblx0ICByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgKCFlbC5oYXNBdHRyaWJ1dGUoJ3R5cGUnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ3RleHQvamF2YXNjcmlwdCcpO1xuXHR9XG5cdFxuXHR2YXIgc3BlY2lhbENoYXJSRSA9IC9bXlxcd1xcLTpcXC5dLztcblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIGFuIGVsZW1lbnQgb3IgYSBEb2N1bWVudEZyYWdtZW50IGJhc2VkIG9uIGFcblx0ICogaW5zdGFuY2Ugb3B0aW9uIG9iamVjdC4gVGhpcyBhbGxvd3MgdXMgdG8gdHJhbnNjbHVkZVxuXHQgKiBhIHRlbXBsYXRlIG5vZGUvZnJhZ21lbnQgYmVmb3JlIHRoZSBpbnN0YW5jZSBpcyBjcmVhdGVkLFxuXHQgKiBzbyB0aGUgcHJvY2Vzc2VkIGZyYWdtZW50IGNhbiB0aGVuIGJlIGNsb25lZCBhbmQgcmV1c2VkXG5cdCAqIGluIHYtZm9yLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKSB7XG5cdCAgLy8gZXh0cmFjdCBjb250YWluZXIgYXR0cmlidXRlcyB0byBwYXNzIHRoZW0gZG93blxuXHQgIC8vIHRvIGNvbXBpbGVyLCBiZWNhdXNlIHRoZXkgbmVlZCB0byBiZSBjb21waWxlZCBpblxuXHQgIC8vIHBhcmVudCBzY29wZS4gd2UgYXJlIG11dGF0aW5nIHRoZSBvcHRpb25zIG9iamVjdCBoZXJlXG5cdCAgLy8gYXNzdW1pbmcgdGhlIHNhbWUgb2JqZWN0IHdpbGwgYmUgdXNlZCBmb3IgY29tcGlsZVxuXHQgIC8vIHJpZ2h0IGFmdGVyIHRoaXMuXG5cdCAgaWYgKG9wdGlvbnMpIHtcblx0ICAgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gZXh0cmFjdEF0dHJzKGVsKTtcblx0ICB9XG5cdCAgLy8gZm9yIHRlbXBsYXRlIHRhZ3MsIHdoYXQgd2Ugd2FudCBpcyBpdHMgY29udGVudCBhc1xuXHQgIC8vIGEgZG9jdW1lbnRGcmFnbWVudCAoZm9yIGZyYWdtZW50IGluc3RhbmNlcylcblx0ICBpZiAoaXNUZW1wbGF0ZShlbCkpIHtcblx0ICAgIGVsID0gcGFyc2VUZW1wbGF0ZShlbCk7XG5cdCAgfVxuXHQgIGlmIChvcHRpb25zKSB7XG5cdCAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQgJiYgIW9wdGlvbnMudGVtcGxhdGUpIHtcblx0ICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9ICc8c2xvdD48L3Nsb3Q+Jztcblx0ICAgIH1cblx0ICAgIGlmIChvcHRpb25zLnRlbXBsYXRlKSB7XG5cdCAgICAgIG9wdGlvbnMuX2NvbnRlbnQgPSBleHRyYWN0Q29udGVudChlbCk7XG5cdCAgICAgIGVsID0gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG5cdCAgICAvLyBhbmNob3JzIGZvciBmcmFnbWVudCBpbnN0YW5jZVxuXHQgICAgLy8gcGFzc2luZyBpbiBgcGVyc2lzdDogdHJ1ZWAgdG8gYXZvaWQgdGhlbSBiZWluZ1xuXHQgICAgLy8gZGlzY2FyZGVkIGJ5IElFIGR1cmluZyB0ZW1wbGF0ZSBjbG9uaW5nXG5cdCAgICBwcmVwZW5kKGNyZWF0ZUFuY2hvcigndi1zdGFydCcsIHRydWUpLCBlbCk7XG5cdCAgICBlbC5hcHBlbmRDaGlsZChjcmVhdGVBbmNob3IoJ3YtZW5kJywgdHJ1ZSkpO1xuXHQgIH1cblx0ICByZXR1cm4gZWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24uXG5cdCAqIElmIHRoZSByZXBsYWNlIG9wdGlvbiBpcyB0cnVlIHRoaXMgd2lsbCBzd2FwIHRoZSAkZWwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucykge1xuXHQgIHZhciB0ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XG5cdCAgdmFyIGZyYWcgPSBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCB0cnVlKTtcblx0ICBpZiAoZnJhZykge1xuXHQgICAgdmFyIHJlcGxhY2VyID0gZnJhZy5maXJzdENoaWxkO1xuXHQgICAgdmFyIHRhZyA9IHJlcGxhY2VyLnRhZ05hbWUgJiYgcmVwbGFjZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKGVsID09PSBkb2N1bWVudC5ib2R5KSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdZb3UgYXJlIG1vdW50aW5nIGFuIGluc3RhbmNlIHdpdGggYSB0ZW1wbGF0ZSB0byAnICsgJzxib2R5Pi4gVGhpcyB3aWxsIHJlcGxhY2UgPGJvZHk+IGVudGlyZWx5LiBZb3UgJyArICdzaG91bGQgcHJvYmFibHkgdXNlIGByZXBsYWNlOiBmYWxzZWAgaGVyZS4nKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyB0aGVyZSBhcmUgbWFueSBjYXNlcyB3aGVyZSB0aGUgaW5zdGFuY2UgbXVzdFxuXHQgICAgICAvLyBiZWNvbWUgYSBmcmFnbWVudCBpbnN0YW5jZTogYmFzaWNhbGx5IGFueXRoaW5nIHRoYXRcblx0ICAgICAgLy8gY2FuIGNyZWF0ZSBtb3JlIHRoYW4gMSByb290IG5vZGVzLlxuXHQgICAgICBpZiAoXG5cdCAgICAgIC8vIG11bHRpLWNoaWxkcmVuIHRlbXBsYXRlXG5cdCAgICAgIGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPiAxIHx8XG5cdCAgICAgIC8vIG5vbi1lbGVtZW50IHRlbXBsYXRlXG5cdCAgICAgIHJlcGxhY2VyLm5vZGVUeXBlICE9PSAxIHx8XG5cdCAgICAgIC8vIHNpbmdsZSBuZXN0ZWQgY29tcG9uZW50XG5cdCAgICAgIHRhZyA9PT0gJ2NvbXBvbmVudCcgfHwgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSB8fCBoYXNCaW5kQXR0cihyZXBsYWNlciwgJ2lzJykgfHxcblx0ICAgICAgLy8gZWxlbWVudCBkaXJlY3RpdmVcblx0ICAgICAgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZykgfHxcblx0ICAgICAgLy8gZm9yIGJsb2NrXG5cdCAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1mb3InKSB8fFxuXHQgICAgICAvLyBpZiBibG9ja1xuXHQgICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgICAgIHJldHVybiBmcmFnO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBleHRyYWN0QXR0cnMocmVwbGFjZXIpO1xuXHQgICAgICAgIG1lcmdlQXR0cnMoZWwsIHJlcGxhY2VyKTtcblx0ICAgICAgICByZXR1cm4gcmVwbGFjZXI7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGVsLmFwcGVuZENoaWxkKGZyYWcpO1xuXHQgICAgICByZXR1cm4gZWw7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB0ZW1wbGF0ZSBvcHRpb246ICcgKyB0ZW1wbGF0ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRvIGV4dHJhY3QgYSBjb21wb25lbnQgY29udGFpbmVyJ3MgYXR0cmlidXRlc1xuXHQgKiBpbnRvIGEgcGxhaW4gb2JqZWN0IGFycmF5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge0FycmF5fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RBdHRycyhlbCkge1xuXHQgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBlbC5oYXNBdHRyaWJ1dGVzKCkpIHtcblx0ICAgIHJldHVybiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE1lcmdlIHRoZSBhdHRyaWJ1dGVzIG9mIHR3byBlbGVtZW50cywgYW5kIG1ha2Ugc3VyZVxuXHQgKiB0aGUgY2xhc3MgbmFtZXMgYXJlIG1lcmdlZCBwcm9wZXJseS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBmcm9tXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdG9cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZUF0dHJzKGZyb20sIHRvKSB7XG5cdCAgdmFyIGF0dHJzID0gZnJvbS5hdHRyaWJ1dGVzO1xuXHQgIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuXHQgIHZhciBuYW1lLCB2YWx1ZTtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcblx0ICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG5cdCAgICBpZiAoIXRvLmhhc0F0dHJpYnV0ZShuYW1lKSAmJiAhc3BlY2lhbENoYXJSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgIHRvLnNldEF0dHJpYnV0ZShuYW1lLCB2YWx1ZSk7XG5cdCAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgIXBhcnNlVGV4dCh2YWx1ZSkgJiYgKHZhbHVlID0gdmFsdWUudHJpbSgpKSkge1xuXHQgICAgICB2YWx1ZS5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuXHQgICAgICAgIGFkZENsYXNzKHRvLCBjbHMpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTY2FuIGFuZCBkZXRlcm1pbmUgc2xvdCBjb250ZW50IGRpc3RyaWJ1dGlvbi5cblx0ICogV2UgZG8gdGhpcyBkdXJpbmcgdHJhbnNjbHVzaW9uIGluc3RlYWQgYXQgY29tcGlsZSB0aW1lIHNvIHRoYXRcblx0ICogdGhlIGRpc3RyaWJ1dGlvbiBpcyBkZWNvdXBsZWQgZnJvbSB0aGUgY29tcGlsYXRpb24gb3JkZXIgb2Zcblx0ICogdGhlIHNsb3RzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gdGVtcGxhdGVcblx0ICogQHBhcmFtIHtFbGVtZW50fSBjb250ZW50XG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVTbG90cyh2bSwgY29udGVudCkge1xuXHQgIGlmICghY29udGVudCkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgY29udGVudHMgPSB2bS5fc2xvdENvbnRlbnRzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB2YXIgZWwsIG5hbWU7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb250ZW50LmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZWwgPSBjb250ZW50LmNoaWxkcmVuW2ldO1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGlmIChuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCdzbG90JykpIHtcblx0ICAgICAgKGNvbnRlbnRzW25hbWVdIHx8IChjb250ZW50c1tuYW1lXSA9IFtdKSkucHVzaChlbCk7XG5cdCAgICB9XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBnZXRCaW5kQXR0cihlbCwgJ3Nsb3QnKSkge1xuXHQgICAgICB3YXJuKCdUaGUgXCJzbG90XCIgYXR0cmlidXRlIG11c3QgYmUgc3RhdGljLicsIHZtLiRwYXJlbnQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IgKG5hbWUgaW4gY29udGVudHMpIHtcblx0ICAgIGNvbnRlbnRzW25hbWVdID0gZXh0cmFjdEZyYWdtZW50KGNvbnRlbnRzW25hbWVdLCBjb250ZW50KTtcblx0ICB9XG5cdCAgaWYgKGNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICB2YXIgbm9kZXMgPSBjb250ZW50LmNoaWxkTm9kZXM7XG5cdCAgICBpZiAobm9kZXMubGVuZ3RoID09PSAxICYmIG5vZGVzWzBdLm5vZGVUeXBlID09PSAzICYmICFub2Rlc1swXS5kYXRhLnRyaW0oKSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBjb250ZW50c1snZGVmYXVsdCddID0gZXh0cmFjdEZyYWdtZW50KGNvbnRlbnQuY2hpbGROb2RlcywgY29udGVudCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRXh0cmFjdCBxdWFsaWZpZWQgY29udGVudCBub2RlcyBmcm9tIGEgbm9kZSBsaXN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGVMaXN0fSBub2Rlc1xuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dHJhY3RGcmFnbWVudChub2RlcywgcGFyZW50KSB7XG5cdCAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgbm9kZXMgPSB0b0FycmF5KG5vZGVzKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdmFyIG5vZGUgPSBub2Rlc1tpXTtcblx0ICAgIGlmIChpc1RlbXBsYXRlKG5vZGUpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1pZicpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1mb3InKSkge1xuXHQgICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG5cdCAgICAgIG5vZGUgPSBwYXJzZVRlbXBsYXRlKG5vZGUsIHRydWUpO1xuXHQgICAgfVxuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChub2RlKTtcblx0ICB9XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdFxuXHRcblx0dmFyIGNvbXBpbGVyID0gT2JqZWN0LmZyZWV6ZSh7XG5cdFx0Y29tcGlsZTogY29tcGlsZSxcblx0XHRjb21waWxlQW5kTGlua1Byb3BzOiBjb21waWxlQW5kTGlua1Byb3BzLFxuXHRcdGNvbXBpbGVSb290OiBjb21waWxlUm9vdCxcblx0XHR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlLFxuXHRcdHJlc29sdmVTbG90czogcmVzb2x2ZVNsb3RzXG5cdH0pO1xuXHRcblx0ZnVuY3Rpb24gc3RhdGVNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogQWNjZXNzb3IgZm9yIGAkZGF0YWAgcHJvcGVydHksIHNpbmNlIHNldHRpbmcgJGRhdGFcblx0ICAgKiByZXF1aXJlcyBvYnNlcnZpbmcgdGhlIG5ldyBvYmplY3QgYW5kIHVwZGF0aW5nXG5cdCAgICogcHJveGllZCBwcm9wZXJ0aWVzLlxuXHQgICAqL1xuXHRcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkoVnVlLnByb3RvdHlwZSwgJyRkYXRhJywge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld0RhdGEpIHtcblx0ICAgICAgaWYgKG5ld0RhdGEgIT09IHRoaXMuX2RhdGEpIHtcblx0ICAgICAgICB0aGlzLl9zZXREYXRhKG5ld0RhdGEpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwIHRoZSBzY29wZSBvZiBhbiBpbnN0YW5jZSwgd2hpY2ggY29udGFpbnM6XG5cdCAgICogLSBvYnNlcnZlZCBkYXRhXG5cdCAgICogLSBjb21wdXRlZCBwcm9wZXJ0aWVzXG5cdCAgICogLSB1c2VyIG1ldGhvZHNcblx0ICAgKiAtIG1ldGEgcHJvcGVydGllc1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLl9pbml0UHJvcHMoKTtcblx0ICAgIHRoaXMuX2luaXRNZXRhKCk7XG5cdCAgICB0aGlzLl9pbml0TWV0aG9kcygpO1xuXHQgICAgdGhpcy5faW5pdERhdGEoKTtcblx0ICAgIHRoaXMuX2luaXRDb21wdXRlZCgpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemUgcHJvcHMuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRQcm9wcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblx0ICAgIHZhciBlbCA9IG9wdGlvbnMuZWw7XG5cdCAgICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuXHQgICAgaWYgKHByb3BzICYmICFlbCkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Byb3BzIHdpbGwgbm90IGJlIGNvbXBpbGVkIGlmIG5vIGBlbGAgb3B0aW9uIGlzICcgKyAncHJvdmlkZWQgYXQgaW5zdGFudGlhdGlvbi4nLCB0aGlzKTtcblx0ICAgIH1cblx0ICAgIC8vIG1ha2Ugc3VyZSB0byBjb252ZXJ0IHN0cmluZyBzZWxlY3RvcnMgaW50byBlbGVtZW50IG5vd1xuXHQgICAgZWwgPSBvcHRpb25zLmVsID0gcXVlcnkoZWwpO1xuXHQgICAgdGhpcy5fcHJvcHNVbmxpbmtGbiA9IGVsICYmIGVsLm5vZGVUeXBlID09PSAxICYmIHByb3BzXG5cdCAgICAvLyBwcm9wcyBtdXN0IGJlIGxpbmtlZCBpbiBwcm9wZXIgc2NvcGUgaWYgaW5zaWRlIHYtZm9yXG5cdCAgICA/IGNvbXBpbGVBbmRMaW5rUHJvcHModGhpcywgZWwsIHByb3BzLCB0aGlzLl9zY29wZSkgOiBudWxsO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemUgdGhlIGRhdGEuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXREYXRhID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGRhdGFGbiA9IHRoaXMuJG9wdGlvbnMuZGF0YTtcblx0ICAgIHZhciBkYXRhID0gdGhpcy5fZGF0YSA9IGRhdGFGbiA/IGRhdGFGbigpIDoge307XG5cdCAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcblx0ICAgICAgZGF0YSA9IHt9O1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2RhdGEgZnVuY3Rpb25zIHNob3VsZCByZXR1cm4gYW4gb2JqZWN0LicsIHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdmFyIHByb3BzID0gdGhpcy5fcHJvcHM7XG5cdCAgICAvLyBwcm94eSBkYXRhIG9uIGluc3RhbmNlXG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuXHQgICAgdmFyIGksIGtleTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgLy8gdGhlcmUgYXJlIHR3byBzY2VuYXJpb3Mgd2hlcmUgd2UgY2FuIHByb3h5IGEgZGF0YSBrZXk6XG5cdCAgICAgIC8vIDEuIGl0J3Mgbm90IGFscmVhZHkgZGVmaW5lZCBhcyBhIHByb3Bcblx0ICAgICAgLy8gMi4gaXQncyBwcm92aWRlZCB2aWEgYSBpbnN0YW50aWF0aW9uIG9wdGlvbiBBTkQgdGhlcmUgYXJlIG5vXG5cdCAgICAgIC8vICAgIHRlbXBsYXRlIHByb3AgcHJlc2VudFxuXHQgICAgICBpZiAoIXByb3BzIHx8ICFoYXNPd24ocHJvcHMsIGtleSkpIHtcblx0ICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB3YXJuKCdEYXRhIGZpZWxkIFwiJyArIGtleSArICdcIiBpcyBhbHJlYWR5IGRlZmluZWQgJyArICdhcyBhIHByb3AuIFRvIHByb3ZpZGUgZGVmYXVsdCB2YWx1ZSBmb3IgYSBwcm9wLCB1c2UgdGhlIFwiZGVmYXVsdFwiICcgKyAncHJvcCBvcHRpb247IGlmIHlvdSB3YW50IHRvIHBhc3MgcHJvcCB2YWx1ZXMgdG8gYW4gaW5zdGFudGlhdGlvbiAnICsgJ2NhbGwsIHVzZSB0aGUgXCJwcm9wc0RhdGFcIiBvcHRpb24uJywgdGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIG9ic2VydmUgZGF0YVxuXHQgICAgb2JzZXJ2ZShkYXRhLCB0aGlzKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTd2FwIHRoZSBpbnN0YW5jZSdzICRkYXRhLiBDYWxsZWQgaW4gJGRhdGEncyBzZXR0ZXIuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gbmV3RGF0YVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9zZXREYXRhID0gZnVuY3Rpb24gKG5ld0RhdGEpIHtcblx0ICAgIG5ld0RhdGEgPSBuZXdEYXRhIHx8IHt9O1xuXHQgICAgdmFyIG9sZERhdGEgPSB0aGlzLl9kYXRhO1xuXHQgICAgdGhpcy5fZGF0YSA9IG5ld0RhdGE7XG5cdCAgICB2YXIga2V5cywga2V5LCBpO1xuXHQgICAgLy8gdW5wcm94eSBrZXlzIG5vdCBwcmVzZW50IGluIG5ldyBkYXRhXG5cdCAgICBrZXlzID0gT2JqZWN0LmtleXMob2xkRGF0YSk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgIGlmICghKGtleSBpbiBuZXdEYXRhKSkge1xuXHQgICAgICAgIHRoaXMuX3VucHJveHkoa2V5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gcHJveHkga2V5cyBub3QgYWxyZWFkeSBwcm94aWVkLFxuXHQgICAgLy8gYW5kIHRyaWdnZXIgY2hhbmdlIGZvciBjaGFuZ2VkIHZhbHVlc1xuXHQgICAga2V5cyA9IE9iamVjdC5rZXlzKG5ld0RhdGEpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICBpZiAoIWhhc093bih0aGlzLCBrZXkpKSB7XG5cdCAgICAgICAgLy8gbmV3IHByb3BlcnR5XG5cdCAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgb2xkRGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcyk7XG5cdCAgICBvYnNlcnZlKG5ld0RhdGEsIHRoaXMpO1xuXHQgICAgdGhpcy5fZGlnZXN0KCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUHJveHkgYSBwcm9wZXJ0eSwgc28gdGhhdFxuXHQgICAqIHZtLnByb3AgPT09IHZtLl9kYXRhLnByb3Bcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fcHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuXHQgICAgICAvLyBuZWVkIHRvIHN0b3JlIHJlZiB0byBzZWxmIGhlcmVcblx0ICAgICAgLy8gYmVjYXVzZSB0aGVzZSBnZXR0ZXIvc2V0dGVycyBtaWdodFxuXHQgICAgICAvLyBiZSBjYWxsZWQgYnkgY2hpbGQgc2NvcGVzIHZpYVxuXHQgICAgICAvLyBwcm90b3R5cGUgaW5oZXJpdGFuY2UuXG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIGtleSwge1xuXHQgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgIGdldDogZnVuY3Rpb24gcHJveHlHZXR0ZXIoKSB7XG5cdCAgICAgICAgICByZXR1cm4gc2VsZi5fZGF0YVtrZXldO1xuXHQgICAgICAgIH0sXG5cdCAgICAgICAgc2V0OiBmdW5jdGlvbiBwcm94eVNldHRlcih2YWwpIHtcblx0ICAgICAgICAgIHNlbGYuX2RhdGFba2V5XSA9IHZhbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFVucHJveHkgYSBwcm9wZXJ0eS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fdW5wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG5cdCAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRm9yY2UgdXBkYXRlIG9uIGV2ZXJ5IHdhdGNoZXIgaW4gc2NvcGUuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2RpZ2VzdCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnVwZGF0ZSh0cnVlKTsgLy8gc2hhbGxvdyB1cGRhdGVzXG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgY29tcHV0ZWQgcHJvcGVydGllcy4gVGhleSBhcmUgZXNzZW50aWFsbHlcblx0ICAgKiBzcGVjaWFsIGdldHRlci9zZXR0ZXJzXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG5vb3AoKSB7fVxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRDb21wdXRlZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBjb21wdXRlZCA9IHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQ7XG5cdCAgICBpZiAoY29tcHV0ZWQpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIGNvbXB1dGVkKSB7XG5cdCAgICAgICAgdmFyIHVzZXJEZWYgPSBjb21wdXRlZFtrZXldO1xuXHQgICAgICAgIHZhciBkZWYgPSB7XG5cdCAgICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgICAgICAgfTtcblx0ICAgICAgICBpZiAodHlwZW9mIHVzZXJEZWYgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgICAgIGRlZi5nZXQgPSBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZiwgdGhpcyk7XG5cdCAgICAgICAgICBkZWYuc2V0ID0gbm9vcDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZGVmLmdldCA9IHVzZXJEZWYuZ2V0ID8gdXNlckRlZi5jYWNoZSAhPT0gZmFsc2UgPyBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZi5nZXQsIHRoaXMpIDogYmluZCh1c2VyRGVmLmdldCwgdGhpcykgOiBub29wO1xuXHQgICAgICAgICAgZGVmLnNldCA9IHVzZXJEZWYuc2V0ID8gYmluZCh1c2VyRGVmLnNldCwgdGhpcykgOiBub29wO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCBkZWYpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gbWFrZUNvbXB1dGVkR2V0dGVyKGdldHRlciwgb3duZXIpIHtcblx0ICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIob3duZXIsIGdldHRlciwgbnVsbCwge1xuXHQgICAgICBsYXp5OiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlcigpIHtcblx0ICAgICAgaWYgKHdhdGNoZXIuZGlydHkpIHtcblx0ICAgICAgICB3YXRjaGVyLmV2YWx1YXRlKCk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKERlcC50YXJnZXQpIHtcblx0ICAgICAgICB3YXRjaGVyLmRlcGVuZCgpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB3YXRjaGVyLnZhbHVlO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwIGluc3RhbmNlIG1ldGhvZHMuIE1ldGhvZHMgbXVzdCBiZSBib3VuZCB0byB0aGVcblx0ICAgKiBpbnN0YW5jZSBzaW5jZSB0aGV5IG1pZ2h0IGJlIHBhc3NlZCBkb3duIGFzIGEgcHJvcCB0b1xuXHQgICAqIGNoaWxkIGNvbXBvbmVudHMuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRNZXRob2RzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG1ldGhvZHMgPSB0aGlzLiRvcHRpb25zLm1ldGhvZHM7XG5cdCAgICBpZiAobWV0aG9kcykge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gbWV0aG9kcykge1xuXHQgICAgICAgIHRoaXNba2V5XSA9IGJpbmQobWV0aG9kc1trZXldLCB0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemUgbWV0YSBpbmZvcm1hdGlvbiBsaWtlICRpbmRleCwgJGtleSAmICR2YWx1ZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGEgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgbWV0YXMgPSB0aGlzLiRvcHRpb25zLl9tZXRhO1xuXHQgICAgaWYgKG1ldGFzKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBtZXRhcykge1xuXHQgICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsIGtleSwgbWV0YXNba2V5XSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgZXZlbnRSRSA9IC9edi1vbjp8XkAvO1xuXHRcblx0ZnVuY3Rpb24gZXZlbnRzTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFNldHVwIHRoZSBpbnN0YW5jZSdzIG9wdGlvbiBldmVudHMgJiB3YXRjaGVycy5cblx0ICAgKiBJZiB0aGUgdmFsdWUgaXMgYSBzdHJpbmcsIHdlIHB1bGwgaXQgZnJvbSB0aGVcblx0ICAgKiBpbnN0YW5jZSdzIG1ldGhvZHMgYnkgbmFtZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblx0ICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuXHQgICAgICByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh0aGlzLCBvcHRpb25zLmVsKTtcblx0ICAgIH1cblx0ICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckb24nLCBvcHRpb25zLmV2ZW50cyk7XG5cdCAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJHdhdGNoJywgb3B0aW9ucy53YXRjaCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVnaXN0ZXIgdi1vbiBldmVudHMgb24gYSBjaGlsZCBjb21wb25lbnRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVnaXN0ZXJDb21wb25lbnRFdmVudHModm0sIGVsKSB7XG5cdCAgICB2YXIgYXR0cnMgPSBlbC5hdHRyaWJ1dGVzO1xuXHQgICAgdmFyIG5hbWUsIHZhbHVlLCBoYW5kbGVyO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG5cdCAgICAgIGlmIChldmVudFJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICBuYW1lID0gbmFtZS5yZXBsYWNlKGV2ZW50UkUsICcnKTtcblx0ICAgICAgICAvLyBmb3JjZSB0aGUgZXhwcmVzc2lvbiBpbnRvIGEgc3RhdGVtZW50IHNvIHRoYXRcblx0ICAgICAgICAvLyBpdCBhbHdheXMgZHluYW1pY2FsbHkgcmVzb2x2ZXMgdGhlIG1ldGhvZCB0byBjYWxsICgjMjY3MClcblx0ICAgICAgICAvLyBraW5kYSB1Z2x5IGhhY2ssIGJ1dCBkb2VzIHRoZSBqb2IuXG5cdCAgICAgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcblx0ICAgICAgICBpZiAoaXNTaW1wbGVQYXRoKHZhbHVlKSkge1xuXHQgICAgICAgICAgdmFsdWUgKz0gJy5hcHBseSh0aGlzLCAkYXJndW1lbnRzKSc7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGhhbmRsZXIgPSAodm0uX3Njb3BlIHx8IHZtLl9jb250ZXh0KS4kZXZhbCh2YWx1ZSwgdHJ1ZSk7XG5cdCAgICAgICAgaGFuZGxlci5fZnJvbVBhcmVudCA9IHRydWU7XG5cdCAgICAgICAgdm0uJG9uKG5hbWUucmVwbGFjZShldmVudFJFKSwgaGFuZGxlcik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlZ2lzdGVyIGNhbGxiYWNrcyBmb3Igb3B0aW9uIGV2ZW50cyBhbmQgd2F0Y2hlcnMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGhhc2hcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVnaXN0ZXJDYWxsYmFja3Modm0sIGFjdGlvbiwgaGFzaCkge1xuXHQgICAgaWYgKCFoYXNoKSByZXR1cm47XG5cdCAgICB2YXIgaGFuZGxlcnMsIGtleSwgaSwgajtcblx0ICAgIGZvciAoa2V5IGluIGhhc2gpIHtcblx0ICAgICAgaGFuZGxlcnMgPSBoYXNoW2tleV07XG5cdCAgICAgIGlmIChpc0FycmF5KGhhbmRsZXJzKSkge1xuXHQgICAgICAgIGZvciAoaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0ICAgICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnNbaV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSGVscGVyIHRvIHJlZ2lzdGVyIGFuIGV2ZW50L3dhdGNoIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ3xPYmplY3R9IGhhbmRsZXJcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlciwgb3B0aW9ucykge1xuXHQgICAgdmFyIHR5cGUgPSB0eXBlb2YgaGFuZGxlcjtcblx0ICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHZtW2FjdGlvbl0oa2V5LCBoYW5kbGVyLCBvcHRpb25zKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdmFyIG1ldGhvZHMgPSB2bS4kb3B0aW9ucy5tZXRob2RzO1xuXHQgICAgICB2YXIgbWV0aG9kID0gbWV0aG9kcyAmJiBtZXRob2RzW2hhbmRsZXJdO1xuXHQgICAgICBpZiAobWV0aG9kKSB7XG5cdCAgICAgICAgdm1bYWN0aW9uXShrZXksIG1ldGhvZCwgb3B0aW9ucyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdVbmtub3duIG1ldGhvZDogXCInICsgaGFuZGxlciArICdcIiB3aGVuICcgKyAncmVnaXN0ZXJpbmcgY2FsbGJhY2sgZm9yICcgKyBhY3Rpb24gKyAnOiBcIicgKyBrZXkgKyAnXCIuJywgdm0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGhhbmRsZXIgJiYgdHlwZSA9PT0gJ29iamVjdCcpIHtcblx0ICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLmhhbmRsZXIsIGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgcmVjdXJzaXZlIGF0dGFjaGVkL2RldGFjaGVkIGNhbGxzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRET01Ib29rcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuJG9uKCdob29rOmF0dGFjaGVkJywgb25BdHRhY2hlZCk7XG5cdCAgICB0aGlzLiRvbignaG9vazpkZXRhY2hlZCcsIG9uRGV0YWNoZWQpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgYXR0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBvbkF0dGFjaGVkKCkge1xuXHQgICAgaWYgKCF0aGlzLl9pc0F0dGFjaGVkKSB7XG5cdCAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuXHQgICAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxBdHRhY2gpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSXRlcmF0b3IgdG8gY2FsbCBhdHRhY2hlZCBob29rXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2FsbEF0dGFjaChjaGlsZCkge1xuXHQgICAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICAgIGNoaWxkLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgZGV0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBvbkRldGFjaGVkKCkge1xuXHQgICAgaWYgKHRoaXMuX2lzQXR0YWNoZWQpIHtcblx0ICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxEZXRhY2gpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSXRlcmF0b3IgdG8gY2FsbCBkZXRhY2hlZCBob29rXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2FsbERldGFjaChjaGlsZCkge1xuXHQgICAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyaWdnZXIgYWxsIGhhbmRsZXJzIGZvciBhIGhvb2tcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBob29rXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2NhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcblx0ICAgIHRoaXMuJGVtaXQoJ3ByZS1ob29rOicgKyBob29rKTtcblx0ICAgIHZhciBoYW5kbGVycyA9IHRoaXMuJG9wdGlvbnNbaG9va107XG5cdCAgICBpZiAoaGFuZGxlcnMpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0ICAgICAgICBoYW5kbGVyc1tpXS5jYWxsKHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLiRlbWl0KCdob29rOicgKyBob29rKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBub29wJDEoKSB7fVxuXHRcblx0LyoqXG5cdCAqIEEgZGlyZWN0aXZlIGxpbmtzIGEgRE9NIGVsZW1lbnQgd2l0aCBhIHBpZWNlIG9mIGRhdGEsXG5cdCAqIHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyBhbiBleHByZXNzaW9uLlxuXHQgKiBJdCByZWdpc3RlcnMgYSB3YXRjaGVyIHdpdGggdGhlIGV4cHJlc3Npb24gYW5kIGNhbGxzXG5cdCAqIHRoZSBET00gdXBkYXRlIGZ1bmN0aW9uIHdoZW4gYSBjaGFuZ2UgaXMgdHJpZ2dlcmVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvclxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBuYW1lXG5cdCAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IGRlZlxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBleHByZXNzaW9uXG5cdCAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbZmlsdGVyc11cblx0ICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW21vZGlmaWVyc11cblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxpdGVyYWxcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gYXR0clxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhcmdcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gcmF3XG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IFtyZWZdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbaW50ZXJwXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2hhc09uZVRpbWVdXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIERpcmVjdGl2ZShkZXNjcmlwdG9yLCB2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHRoaXMuZWwgPSBlbDtcblx0ICAvLyBjb3B5IGRlc2NyaXB0b3IgcHJvcGVydGllc1xuXHQgIHRoaXMuZGVzY3JpcHRvciA9IGRlc2NyaXB0b3I7XG5cdCAgdGhpcy5uYW1lID0gZGVzY3JpcHRvci5uYW1lO1xuXHQgIHRoaXMuZXhwcmVzc2lvbiA9IGRlc2NyaXB0b3IuZXhwcmVzc2lvbjtcblx0ICB0aGlzLmFyZyA9IGRlc2NyaXB0b3IuYXJnO1xuXHQgIHRoaXMubW9kaWZpZXJzID0gZGVzY3JpcHRvci5tb2RpZmllcnM7XG5cdCAgdGhpcy5maWx0ZXJzID0gZGVzY3JpcHRvci5maWx0ZXJzO1xuXHQgIHRoaXMubGl0ZXJhbCA9IHRoaXMubW9kaWZpZXJzICYmIHRoaXMubW9kaWZpZXJzLmxpdGVyYWw7XG5cdCAgLy8gcHJpdmF0ZVxuXHQgIHRoaXMuX2xvY2tlZCA9IGZhbHNlO1xuXHQgIHRoaXMuX2JvdW5kID0gZmFsc2U7XG5cdCAgdGhpcy5fbGlzdGVuZXJzID0gbnVsbDtcblx0ICAvLyBsaW5rIGNvbnRleHRcblx0ICB0aGlzLl9ob3N0ID0gaG9zdDtcblx0ICB0aGlzLl9zY29wZSA9IHNjb3BlO1xuXHQgIHRoaXMuX2ZyYWcgPSBmcmFnO1xuXHQgIC8vIHN0b3JlIGRpcmVjdGl2ZXMgb24gbm9kZSBpbiBkZXYgbW9kZVxuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcblx0ICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzID0gdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgfHwgW107XG5cdCAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy5wdXNoKHRoaXMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEluaXRpYWxpemUgdGhlIGRpcmVjdGl2ZSwgbWl4aW4gZGVmaW5pdGlvbiBwcm9wZXJ0aWVzLFxuXHQgKiBzZXR1cCB0aGUgd2F0Y2hlciwgY2FsbCBkZWZpbml0aW9uIGJpbmQoKSBhbmQgdXBkYXRlKClcblx0ICogaWYgcHJlc2VudC5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9iaW5kID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBuYW1lID0gdGhpcy5uYW1lO1xuXHQgIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuXHRcblx0ICAvLyByZW1vdmUgYXR0cmlidXRlXG5cdCAgaWYgKChuYW1lICE9PSAnY2xvYWsnIHx8IHRoaXMudm0uX2lzQ29tcGlsZWQpICYmIHRoaXMuZWwgJiYgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUpIHtcblx0ICAgIHZhciBhdHRyID0gZGVzY3JpcHRvci5hdHRyIHx8ICd2LScgKyBuYW1lO1xuXHQgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG5cdCAgfVxuXHRcblx0ICAvLyBjb3B5IGRlZiBwcm9wZXJ0aWVzXG5cdCAgdmFyIGRlZiA9IGRlc2NyaXB0b3IuZGVmO1xuXHQgIGlmICh0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aGlzLnVwZGF0ZSA9IGRlZjtcblx0ICB9IGVsc2Uge1xuXHQgICAgZXh0ZW5kKHRoaXMsIGRlZik7XG5cdCAgfVxuXHRcblx0ICAvLyBzZXR1cCBkaXJlY3RpdmUgcGFyYW1zXG5cdCAgdGhpcy5fc2V0dXBQYXJhbXMoKTtcblx0XG5cdCAgLy8gaW5pdGlhbCBiaW5kXG5cdCAgaWYgKHRoaXMuYmluZCkge1xuXHQgICAgdGhpcy5iaW5kKCk7XG5cdCAgfVxuXHQgIHRoaXMuX2JvdW5kID0gdHJ1ZTtcblx0XG5cdCAgaWYgKHRoaXMubGl0ZXJhbCkge1xuXHQgICAgdGhpcy51cGRhdGUgJiYgdGhpcy51cGRhdGUoZGVzY3JpcHRvci5yYXcpO1xuXHQgIH0gZWxzZSBpZiAoKHRoaXMuZXhwcmVzc2lvbiB8fCB0aGlzLm1vZGlmaWVycykgJiYgKHRoaXMudXBkYXRlIHx8IHRoaXMudHdvV2F5KSAmJiAhdGhpcy5fY2hlY2tTdGF0ZW1lbnQoKSkge1xuXHQgICAgLy8gd3JhcHBlZCB1cGRhdGVyIGZvciBjb250ZXh0XG5cdCAgICB2YXIgZGlyID0gdGhpcztcblx0ICAgIGlmICh0aGlzLnVwZGF0ZSkge1xuXHQgICAgICB0aGlzLl91cGRhdGUgPSBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcblx0ICAgICAgICBpZiAoIWRpci5fbG9ja2VkKSB7XG5cdCAgICAgICAgICBkaXIudXBkYXRlKHZhbCwgb2xkVmFsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLl91cGRhdGUgPSBub29wJDE7XG5cdCAgICB9XG5cdCAgICB2YXIgcHJlUHJvY2VzcyA9IHRoaXMuX3ByZVByb2Nlc3MgPyBiaW5kKHRoaXMuX3ByZVByb2Nlc3MsIHRoaXMpIDogbnVsbDtcblx0ICAgIHZhciBwb3N0UHJvY2VzcyA9IHRoaXMuX3Bvc3RQcm9jZXNzID8gYmluZCh0aGlzLl9wb3N0UHJvY2VzcywgdGhpcykgOiBudWxsO1xuXHQgICAgdmFyIHdhdGNoZXIgPSB0aGlzLl93YXRjaGVyID0gbmV3IFdhdGNoZXIodGhpcy52bSwgdGhpcy5leHByZXNzaW9uLCB0aGlzLl91cGRhdGUsIC8vIGNhbGxiYWNrXG5cdCAgICB7XG5cdCAgICAgIGZpbHRlcnM6IHRoaXMuZmlsdGVycyxcblx0ICAgICAgdHdvV2F5OiB0aGlzLnR3b1dheSxcblx0ICAgICAgZGVlcDogdGhpcy5kZWVwLFxuXHQgICAgICBwcmVQcm9jZXNzOiBwcmVQcm9jZXNzLFxuXHQgICAgICBwb3N0UHJvY2VzczogcG9zdFByb2Nlc3MsXG5cdCAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuXHQgICAgfSk7XG5cdCAgICAvLyB2LW1vZGVsIHdpdGggaW5pdGFsIGlubGluZSB2YWx1ZSBuZWVkIHRvIHN5bmMgYmFjayB0b1xuXHQgICAgLy8gbW9kZWwgaW5zdGVhZCBvZiB1cGRhdGUgdG8gRE9NIG9uIGluaXQuIFRoZXkgd291bGRcblx0ICAgIC8vIHNldCB0aGUgYWZ0ZXJCaW5kIGhvb2sgdG8gaW5kaWNhdGUgdGhhdC5cblx0ICAgIGlmICh0aGlzLmFmdGVyQmluZCkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCgpO1xuXHQgICAgfSBlbHNlIGlmICh0aGlzLnVwZGF0ZSkge1xuXHQgICAgICB0aGlzLnVwZGF0ZSh3YXRjaGVyLnZhbHVlKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0dXAgYWxsIHBhcmFtIGF0dHJpYnV0ZXMsIGUuZy4gdHJhY2stYnksXG5cdCAqIHRyYW5zaXRpb24tbW9kZSwgZXRjLi4uXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKCF0aGlzLnBhcmFtcykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgcGFyYW1zID0gdGhpcy5wYXJhbXM7XG5cdCAgLy8gc3dhcCB0aGUgcGFyYW1zIGFycmF5IHdpdGggYSBmcmVzaCBvYmplY3QuXG5cdCAgdGhpcy5wYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBpID0gcGFyYW1zLmxlbmd0aDtcblx0ICB2YXIga2V5LCB2YWwsIG1hcHBlZEtleTtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBrZXkgPSBoeXBoZW5hdGUocGFyYW1zW2ldKTtcblx0ICAgIG1hcHBlZEtleSA9IGNhbWVsaXplKGtleSk7XG5cdCAgICB2YWwgPSBnZXRCaW5kQXR0cih0aGlzLmVsLCBrZXkpO1xuXHQgICAgaWYgKHZhbCAhPSBudWxsKSB7XG5cdCAgICAgIC8vIGR5bmFtaWNcblx0ICAgICAgdGhpcy5fc2V0dXBQYXJhbVdhdGNoZXIobWFwcGVkS2V5LCB2YWwpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gc3RhdGljXG5cdCAgICAgIHZhbCA9IGdldEF0dHIodGhpcy5lbCwga2V5KTtcblx0ICAgICAgaWYgKHZhbCAhPSBudWxsKSB7XG5cdCAgICAgICAgdGhpcy5wYXJhbXNbbWFwcGVkS2V5XSA9IHZhbCA9PT0gJycgPyB0cnVlIDogdmFsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldHVwIGEgd2F0Y2hlciBmb3IgYSBkeW5hbWljIHBhcmFtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHByZXNzaW9uXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbVdhdGNoZXIgPSBmdW5jdGlvbiAoa2V5LCBleHByZXNzaW9uKSB7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHZhciBjYWxsZWQgPSBmYWxzZTtcblx0ICB2YXIgdW53YXRjaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kd2F0Y2goZXhwcmVzc2lvbiwgZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG5cdCAgICBzZWxmLnBhcmFtc1trZXldID0gdmFsO1xuXHQgICAgLy8gc2luY2Ugd2UgYXJlIGluIGltbWVkaWF0ZSBtb2RlLFxuXHQgICAgLy8gb25seSBjYWxsIHRoZSBwYXJhbSBjaGFuZ2UgY2FsbGJhY2tzIGlmIHRoaXMgaXMgbm90IHRoZSBmaXJzdCB1cGRhdGUuXG5cdCAgICBpZiAoY2FsbGVkKSB7XG5cdCAgICAgIHZhciBjYiA9IHNlbGYucGFyYW1XYXRjaGVycyAmJiBzZWxmLnBhcmFtV2F0Y2hlcnNba2V5XTtcblx0ICAgICAgaWYgKGNiKSB7XG5cdCAgICAgICAgY2IuY2FsbChzZWxmLCB2YWwsIG9sZFZhbCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGNhbGxlZCA9IHRydWU7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAgaW1tZWRpYXRlOiB0cnVlLFxuXHQgICAgdXNlcjogZmFsc2Vcblx0ICB9KTsodGhpcy5fcGFyYW1VbndhdGNoRm5zIHx8ICh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgPSBbXSkpLnB1c2godW53YXRjaCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgdGhlIGRpcmVjdGl2ZSBpcyBhIGZ1bmN0aW9uIGNhbGxlclxuXHQgKiBhbmQgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBjYWxsYWJsZSBvbmUuIElmIGJvdGggdHJ1ZSxcblx0ICogd2Ugd3JhcCB1cCB0aGUgZXhwcmVzc2lvbiBhbmQgdXNlIGl0IGFzIHRoZSBldmVudFxuXHQgKiBoYW5kbGVyLlxuXHQgKlxuXHQgKiBlLmcuIG9uLWNsaWNrPVwiYSsrXCJcblx0ICpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9jaGVja1N0YXRlbWVudCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgZXhwcmVzc2lvbiA9IHRoaXMuZXhwcmVzc2lvbjtcblx0ICBpZiAoZXhwcmVzc2lvbiAmJiB0aGlzLmFjY2VwdFN0YXRlbWVudCAmJiAhaXNTaW1wbGVQYXRoKGV4cHJlc3Npb24pKSB7XG5cdCAgICB2YXIgZm4gPSBwYXJzZUV4cHJlc3Npb24oZXhwcmVzc2lvbikuZ2V0O1xuXHQgICAgdmFyIHNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bTtcblx0ICAgIHZhciBoYW5kbGVyID0gZnVuY3Rpb24gaGFuZGxlcihlKSB7XG5cdCAgICAgIHNjb3BlLiRldmVudCA9IGU7XG5cdCAgICAgIGZuLmNhbGwoc2NvcGUsIHNjb3BlKTtcblx0ICAgICAgc2NvcGUuJGV2ZW50ID0gbnVsbDtcblx0ICAgIH07XG5cdCAgICBpZiAodGhpcy5maWx0ZXJzKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKGhhbmRsZXIsIG51bGwsIHRoaXMuZmlsdGVycyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLnVwZGF0ZShoYW5kbGVyKTtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuXHQgKiBUaGlzIHNob3VsZCBvbmx5IGJlIHVzZWQgaW4gdHdvLXdheSBkaXJlY3RpdmVzXG5cdCAqIGUuZy4gdi1tb2RlbC5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmICh0aGlzLnR3b1dheSkge1xuXHQgICAgdGhpcy5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aGlzLl93YXRjaGVyLnNldCh2YWx1ZSk7XG5cdCAgICB9KTtcblx0ICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIHdhcm4oJ0RpcmVjdGl2ZS5zZXQoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSB0d29XYXknICsgJ2RpcmVjdGl2ZXMuJyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEV4ZWN1dGUgYSBmdW5jdGlvbiB3aGlsZSBwcmV2ZW50aW5nIHRoYXQgZnVuY3Rpb24gZnJvbVxuXHQgKiB0cmlnZ2VyaW5nIHVwZGF0ZXMgb24gdGhpcyBkaXJlY3RpdmUgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fd2l0aExvY2sgPSBmdW5jdGlvbiAoZm4pIHtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgc2VsZi5fbG9ja2VkID0gdHJ1ZTtcblx0ICBmbi5jYWxsKHNlbGYpO1xuXHQgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgIHNlbGYuX2xvY2tlZCA9IGZhbHNlO1xuXHQgIH0pO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGF0dGFjaGVzIGEgRE9NIGV2ZW50IGxpc3RlbmVyXG5cdCAqIHRvIHRoZSBkaXJlY3RpdmUgZWxlbWVudCBhbmQgYXV0b21ldGljYWxseSB0ZWFycyBpdCBkb3duXG5cdCAqIGR1cmluZyB1bmJpbmQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSkge1xuXHQgIG9uKHRoaXMuZWwsIGV2ZW50LCBoYW5kbGVyLCB1c2VDYXB0dXJlKTsodGhpcy5fbGlzdGVuZXJzIHx8ICh0aGlzLl9saXN0ZW5lcnMgPSBbXSkpLnB1c2goW2V2ZW50LCBoYW5kbGVyXSk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGVhcmRvd24gdGhlIHdhdGNoZXIgYW5kIGNhbGwgdW5iaW5kLlxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX3RlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLl9ib3VuZCkge1xuXHQgICAgdGhpcy5fYm91bmQgPSBmYWxzZTtcblx0ICAgIGlmICh0aGlzLnVuYmluZCkge1xuXHQgICAgICB0aGlzLnVuYmluZCgpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuX3dhdGNoZXIpIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcblx0ICAgIHZhciBpO1xuXHQgICAgaWYgKGxpc3RlbmVycykge1xuXHQgICAgICBpID0gbGlzdGVuZXJzLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIG9mZih0aGlzLmVsLCBsaXN0ZW5lcnNbaV1bMF0sIGxpc3RlbmVyc1tpXVsxXSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZhciB1bndhdGNoRm5zID0gdGhpcy5fcGFyYW1VbndhdGNoRm5zO1xuXHQgICAgaWYgKHVud2F0Y2hGbnMpIHtcblx0ICAgICAgaSA9IHVud2F0Y2hGbnMubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgdW53YXRjaEZuc1tpXSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG5cdCAgICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLiRyZW1vdmUodGhpcyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLnZtID0gdGhpcy5lbCA9IHRoaXMuX3dhdGNoZXIgPSB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGxpZmVjeWNsZU1peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBVcGRhdGUgdi1yZWYgZm9yIGNvbXBvbmVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3VwZGF0ZVJlZiA9IGZ1bmN0aW9uIChyZW1vdmUpIHtcblx0ICAgIHZhciByZWYgPSB0aGlzLiRvcHRpb25zLl9yZWY7XG5cdCAgICBpZiAocmVmKSB7XG5cdCAgICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMuX2NvbnRleHQpLiRyZWZzO1xuXHQgICAgICBpZiAocmVtb3ZlKSB7XG5cdCAgICAgICAgaWYgKHJlZnNbcmVmXSA9PT0gdGhpcykge1xuXHQgICAgICAgICAgcmVmc1tyZWZdID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVmc1tyZWZdID0gdGhpcztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyYW5zY2x1ZGUsIGNvbXBpbGUgYW5kIGxpbmsgZWxlbWVudC5cblx0ICAgKlxuXHQgICAqIElmIGEgcHJlLWNvbXBpbGVkIGxpbmtlciBpcyBhdmFpbGFibGUsIHRoYXQgbWVhbnMgdGhlXG5cdCAgICogcGFzc2VkIGluIGVsZW1lbnQgd2lsbCBiZSBwcmUtdHJhbnNjbHVkZWQgYW5kIGNvbXBpbGVkXG5cdCAgICogYXMgd2VsbCAtIGFsbCB3ZSBuZWVkIHRvIGRvIGlzIHRvIGNhbGwgdGhlIGxpbmtlci5cblx0ICAgKlxuXHQgICAqIE90aGVyd2lzZSB3ZSBuZWVkIHRvIGNhbGwgdHJhbnNjbHVkZS9jb21waWxlL2xpbmsgaGVyZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fY29tcGlsZSA9IGZ1bmN0aW9uIChlbCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXHRcblx0ICAgIC8vIHRyYW5zY2x1ZGUgYW5kIGluaXQgZWxlbWVudFxuXHQgICAgLy8gdHJhbnNjbHVkZSBjYW4gcG90ZW50aWFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuXHQgICAgLy8gc28gd2UgbmVlZCB0byBrZWVwIHJlZmVyZW5jZTsgdGhpcyBzdGVwIGFsc28gaW5qZWN0c1xuXHQgICAgLy8gdGhlIHRlbXBsYXRlIGFuZCBjYWNoZXMgdGhlIG9yaWdpbmFsIGF0dHJpYnV0ZXNcblx0ICAgIC8vIG9uIHRoZSBjb250YWluZXIgbm9kZSBhbmQgcmVwbGFjZXIgbm9kZS5cblx0ICAgIHZhciBvcmlnaW5hbCA9IGVsO1xuXHQgICAgZWwgPSB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKTtcblx0ICAgIHRoaXMuX2luaXRFbGVtZW50KGVsKTtcblx0XG5cdCAgICAvLyBoYW5kbGUgdi1wcmUgb24gcm9vdCBub2RlICgjMjAyNilcblx0ICAgIGlmIChlbC5ub2RlVHlwZSA9PT0gMSAmJiBnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcm9vdCBpcyBhbHdheXMgY29tcGlsZWQgcGVyLWluc3RhbmNlLCBiZWNhdXNlXG5cdCAgICAvLyBjb250YWluZXIgYXR0cnMgYW5kIHByb3BzIGNhbiBiZSBkaWZmZXJlbnQgZXZlcnkgdGltZS5cblx0ICAgIHZhciBjb250ZXh0T3B0aW9ucyA9IHRoaXMuX2NvbnRleHQgJiYgdGhpcy5fY29udGV4dC4kb3B0aW9ucztcblx0ICAgIHZhciByb290TGlua2VyID0gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKTtcblx0XG5cdCAgICAvLyByZXNvbHZlIHNsb3QgZGlzdHJpYnV0aW9uXG5cdCAgICByZXNvbHZlU2xvdHModGhpcywgb3B0aW9ucy5fY29udGVudCk7XG5cdFxuXHQgICAgLy8gY29tcGlsZSBhbmQgbGluayB0aGUgcmVzdFxuXHQgICAgdmFyIGNvbnRlbnRMaW5rRm47XG5cdCAgICB2YXIgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG5cdCAgICAvLyBjb21wb25lbnQgY29tcGlsYXRpb24gY2FuIGJlIGNhY2hlZFxuXHQgICAgLy8gYXMgbG9uZyBhcyBpdCdzIG5vdCB1c2luZyBpbmxpbmUtdGVtcGxhdGVcblx0ICAgIGlmIChvcHRpb25zLl9saW5rZXJDYWNoYWJsZSkge1xuXHQgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXI7XG5cdCAgICAgIGlmICghY29udGVudExpbmtGbikge1xuXHQgICAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlciA9IGNvbXBpbGUoZWwsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gbGluayBwaGFzZVxuXHQgICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgcm9vdCB3aXRoIHByb3Agc2NvcGUhXG5cdCAgICB2YXIgcm9vdFVubGlua0ZuID0gcm9vdExpbmtlcih0aGlzLCBlbCwgdGhpcy5fc2NvcGUpO1xuXHQgICAgdmFyIGNvbnRlbnRVbmxpbmtGbiA9IGNvbnRlbnRMaW5rRm4gPyBjb250ZW50TGlua0ZuKHRoaXMsIGVsKSA6IGNvbXBpbGUoZWwsIG9wdGlvbnMpKHRoaXMsIGVsKTtcblx0XG5cdCAgICAvLyByZWdpc3RlciBjb21wb3NpdGUgdW5saW5rIGZ1bmN0aW9uXG5cdCAgICAvLyB0byBiZSBjYWxsZWQgZHVyaW5nIGluc3RhbmNlIGRlc3RydWN0aW9uXG5cdCAgICB0aGlzLl91bmxpbmtGbiA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcm9vdFVubGlua0ZuKCk7XG5cdCAgICAgIC8vIHBhc3NpbmcgZGVzdHJveWluZzogdHJ1ZSB0byBhdm9pZCBzZWFyY2hpbmcgYW5kXG5cdCAgICAgIC8vIHNwbGljaW5nIHRoZSBkaXJlY3RpdmVzXG5cdCAgICAgIGNvbnRlbnRVbmxpbmtGbih0cnVlKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gZmluYWxseSByZXBsYWNlIG9yaWdpbmFsXG5cdCAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG5cdCAgICAgIHJlcGxhY2Uob3JpZ2luYWwsIGVsKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLl9pc0NvbXBpbGVkID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdjb21waWxlZCcpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluaXRpYWxpemUgaW5zdGFuY2UgZWxlbWVudC4gQ2FsbGVkIGluIHRoZSBwdWJsaWNcblx0ICAgKiAkbW91bnQoKSBtZXRob2QuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRFbGVtZW50ID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgICBpZiAoaXNGcmFnbWVudChlbCkpIHtcblx0ICAgICAgdGhpcy5faXNGcmFnbWVudCA9IHRydWU7XG5cdCAgICAgIHRoaXMuJGVsID0gdGhpcy5fZnJhZ21lbnRTdGFydCA9IGVsLmZpcnN0Q2hpbGQ7XG5cdCAgICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gZWwubGFzdENoaWxkO1xuXHQgICAgICAvLyBzZXQgcGVyc2lzdGVkIHRleHQgYW5jaG9ycyB0byBlbXB0eVxuXHQgICAgICBpZiAodGhpcy5fZnJhZ21lbnRTdGFydC5ub2RlVHlwZSA9PT0gMykge1xuXHQgICAgICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQuZGF0YSA9IHRoaXMuX2ZyYWdtZW50RW5kLmRhdGEgPSAnJztcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLl9mcmFnbWVudCA9IGVsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy4kZWwgPSBlbDtcblx0ICAgIH1cblx0ICAgIHRoaXMuJGVsLl9fdnVlX18gPSB0aGlzO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZUNvbXBpbGUnKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYW5kIGJpbmQgYSBkaXJlY3RpdmUgdG8gYW4gZWxlbWVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yIC0gcGFyc2VkIGRpcmVjdGl2ZSBkZXNjcmlwdG9yXG5cdCAgICogQHBhcmFtIHtOb2RlfSBub2RlICAgLSB0YXJnZXQgbm9kZVxuXHQgICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fYmluZERpciA9IGZ1bmN0aW9uIChkZXNjcmlwdG9yLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgdGhpcy5fZGlyZWN0aXZlcy5wdXNoKG5ldyBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdGhpcywgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBUZWFyZG93biBhbiBpbnN0YW5jZSwgdW5vYnNlcnZlcyB0aGUgZGF0YSwgdW5iaW5kIGFsbCB0aGVcblx0ICAgKiBkaXJlY3RpdmVzLCB0dXJuIG9mZiBhbGwgdGhlIGV2ZW50IGxpc3RlbmVycywgZXRjLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmUgLSB3aGV0aGVyIHRvIHJlbW92ZSB0aGUgRE9NIG5vZGUuXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXAgLSBpZiB0cnVlLCBkZWZlciBjbGVhbnVwIHRvXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBjYWxsZWQgbGF0ZXJcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuXHQgICAgaWYgKHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQpIHtcblx0ICAgICAgaWYgKCFkZWZlckNsZWFudXApIHtcblx0ICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBkZXN0cm95UmVhZHk7XG5cdCAgICB2YXIgcGVuZGluZ1JlbW92YWw7XG5cdFxuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgLy8gQ2xlYW51cCBzaG91bGQgYmUgY2FsbGVkIGVpdGhlciBzeW5jaHJvbm91c2x5IG9yIGFzeW5jaHJvbm95c2x5IGFzXG5cdCAgICAvLyBjYWxsYmFjayBvZiB0aGlzLiRyZW1vdmUoKSwgb3IgaWYgcmVtb3ZlIGFuZCBkZWZlckNsZWFudXAgYXJlIGZhbHNlLlxuXHQgICAgLy8gSW4gYW55IGNhc2UgaXQgc2hvdWxkIGJlIGNhbGxlZCBhZnRlciBhbGwgb3RoZXIgcmVtb3ZpbmcsIHVuYmluZGluZyBhbmRcblx0ICAgIC8vIHR1cm5pbmcgb2YgaXMgZG9uZVxuXHQgICAgdmFyIGNsZWFudXBJZlBvc3NpYmxlID0gZnVuY3Rpb24gY2xlYW51cElmUG9zc2libGUoKSB7XG5cdCAgICAgIGlmIChkZXN0cm95UmVhZHkgJiYgIXBlbmRpbmdSZW1vdmFsICYmICFkZWZlckNsZWFudXApIHtcblx0ICAgICAgICBzZWxmLl9jbGVhbnVwKCk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLy8gcmVtb3ZlIERPTSBlbGVtZW50XG5cdCAgICBpZiAocmVtb3ZlICYmIHRoaXMuJGVsKSB7XG5cdCAgICAgIHBlbmRpbmdSZW1vdmFsID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBwZW5kaW5nUmVtb3ZhbCA9IGZhbHNlO1xuXHQgICAgICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVEZXN0cm95Jyk7XG5cdCAgICB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdHJ1ZTtcblx0ICAgIHZhciBpO1xuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBwYXJlbnQuIG9ubHkgbmVjZXNzYXJ5XG5cdCAgICAvLyBpZiBwYXJlbnQgaXMgbm90IGJlaW5nIGRlc3Ryb3llZCBhcyB3ZWxsLlxuXHQgICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcblx0ICAgIGlmIChwYXJlbnQgJiYgIXBhcmVudC5faXNCZWluZ0Rlc3Ryb3llZCkge1xuXHQgICAgICBwYXJlbnQuJGNoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG5cdCAgICAgIC8vIHVucmVnaXN0ZXIgcmVmIChyZW1vdmU6IHRydWUpXG5cdCAgICAgIHRoaXMuX3VwZGF0ZVJlZih0cnVlKTtcblx0ICAgIH1cblx0ICAgIC8vIGRlc3Ryb3kgYWxsIGNoaWxkcmVuLlxuXHQgICAgaSA9IHRoaXMuJGNoaWxkcmVuLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdGhpcy4kY2hpbGRyZW5baV0uJGRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICAgIC8vIHRlYXJkb3duIHByb3BzXG5cdCAgICBpZiAodGhpcy5fcHJvcHNVbmxpbmtGbikge1xuXHQgICAgICB0aGlzLl9wcm9wc1VubGlua0ZuKCk7XG5cdCAgICB9XG5cdCAgICAvLyB0ZWFyZG93biBhbGwgZGlyZWN0aXZlcy4gdGhpcyBhbHNvIHRlYXJzZG93biBhbGxcblx0ICAgIC8vIGRpcmVjdGl2ZS1vd25lZCB3YXRjaGVycy5cblx0ICAgIGlmICh0aGlzLl91bmxpbmtGbikge1xuXHQgICAgICB0aGlzLl91bmxpbmtGbigpO1xuXHQgICAgfVxuXHQgICAgaSA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKTtcblx0ICAgIH1cblx0ICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgdG8gc2VsZiBvbiAkZWxcblx0ICAgIGlmICh0aGlzLiRlbCkge1xuXHQgICAgICB0aGlzLiRlbC5fX3Z1ZV9fID0gbnVsbDtcblx0ICAgIH1cblx0XG5cdCAgICBkZXN0cm95UmVhZHkgPSB0cnVlO1xuXHQgICAgY2xlYW51cElmUG9zc2libGUoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDbGVhbiB1cCB0byBlbnN1cmUgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuXHQgICAqIFRoaXMgaXMgY2FsbGVkIGFmdGVyIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIGlmIHRoZXJlXG5cdCAgICogaXMgYW55LlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHRoaXMuX2lzRGVzdHJveWVkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gb3duZXIgZnJhZ21lbnRcblx0ICAgIC8vIGRvIGl0IGluIGNsZWFudXAgc28gdGhhdCB3ZSBjYW4gY2FsbCAkZGVzdHJveSB3aXRoXG5cdCAgICAvLyBkZWZlciByaWdodCB3aGVuIGEgZnJhZ21lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZC5cblx0ICAgIGlmICh0aGlzLl9mcmFnKSB7XG5cdCAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iXG5cdCAgICAvLyBmcm96ZW4gb2JqZWN0IG1heSBub3QgaGF2ZSBvYnNlcnZlci5cblx0ICAgIGlmICh0aGlzLl9kYXRhICYmIHRoaXMuX2RhdGEuX19vYl9fKSB7XG5cdCAgICAgIHRoaXMuX2RhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgLy8gQ2xlYW4gdXAgcmVmZXJlbmNlcyB0byBwcml2YXRlIHByb3BlcnRpZXMgYW5kIG90aGVyXG5cdCAgICAvLyBpbnN0YW5jZXMuIHByZXNlcnZlIHJlZmVyZW5jZSB0byBfZGF0YSBzbyB0aGF0IHByb3h5XG5cdCAgICAvLyBhY2Nlc3NvcnMgc3RpbGwgd29yay4gVGhlIG9ubHkgcG90ZW50aWFsIHNpZGUgZWZmZWN0XG5cdCAgICAvLyBoZXJlIGlzIHRoYXQgbXV0YXRpbmcgdGhlIGluc3RhbmNlIGFmdGVyIGl0J3MgZGVzdHJveWVkXG5cdCAgICAvLyBtYXkgYWZmZWN0IHRoZSBzdGF0ZSBvZiBvdGhlciBjb21wb25lbnRzIHRoYXQgYXJlIHN0aWxsXG5cdCAgICAvLyBvYnNlcnZpbmcgdGhlIHNhbWUgb2JqZWN0LCBidXQgdGhhdCBzZWVtcyB0byBiZSBhXG5cdCAgICAvLyByZWFzb25hYmxlIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgdXNlciByYXRoZXIgdGhhblxuXHQgICAgLy8gYWx3YXlzIHRocm93aW5nIGFuIGVycm9yIG9uIHRoZW0uXG5cdCAgICB0aGlzLiRlbCA9IHRoaXMuJHBhcmVudCA9IHRoaXMuJHJvb3QgPSB0aGlzLiRjaGlsZHJlbiA9IHRoaXMuX3dhdGNoZXJzID0gdGhpcy5fY29udGV4dCA9IHRoaXMuX3Njb3BlID0gdGhpcy5fZGlyZWN0aXZlcyA9IG51bGw7XG5cdCAgICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi5cblx0ICAgIHRoaXMuX2lzRGVzdHJveWVkID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdkZXN0cm95ZWQnKTtcblx0ICAgIC8vIHR1cm4gb2ZmIGFsbCBpbnN0YW5jZSBsaXN0ZW5lcnMuXG5cdCAgICB0aGlzLiRvZmYoKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBtaXNjTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIEFwcGx5IGEgbGlzdCBvZiBmaWx0ZXIgKGRlc2NyaXB0b3JzKSB0byBhIHZhbHVlLlxuXHQgICAqIFVzaW5nIHBsYWluIGZvciBsb29wcyBoZXJlIGJlY2F1c2UgdGhpcyB3aWxsIGJlIGNhbGxlZCBpblxuXHQgICAqIHRoZSBnZXR0ZXIgb2YgYW55IHdhdGNoZXIgd2l0aCBmaWx0ZXJzIHNvIGl0IGlzIHZlcnlcblx0ICAgKiBwZXJmb3JtYW5jZSBzZW5zaXRpdmUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHsqfSBbb2xkVmFsdWVdXG5cdCAgICogQHBhcmFtIHtBcnJheX0gZmlsdGVyc1xuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gd3JpdGVcblx0ICAgKiBAcmV0dXJuIHsqfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9hcHBseUZpbHRlcnMgPSBmdW5jdGlvbiAodmFsdWUsIG9sZFZhbHVlLCBmaWx0ZXJzLCB3cml0ZSkge1xuXHQgICAgdmFyIGZpbHRlciwgZm4sIGFyZ3MsIGFyZywgb2Zmc2V0LCBpLCBsLCBqLCBrO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IGZpbHRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGZpbHRlciA9IGZpbHRlcnNbd3JpdGUgPyBsIC0gaSAtIDEgOiBpXTtcblx0ICAgICAgZm4gPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2ZpbHRlcnMnLCBmaWx0ZXIubmFtZSwgdHJ1ZSk7XG5cdCAgICAgIGlmICghZm4pIGNvbnRpbnVlO1xuXHQgICAgICBmbiA9IHdyaXRlID8gZm4ud3JpdGUgOiBmbi5yZWFkIHx8IGZuO1xuXHQgICAgICBpZiAodHlwZW9mIGZuICE9PSAnZnVuY3Rpb24nKSBjb250aW51ZTtcblx0ICAgICAgYXJncyA9IHdyaXRlID8gW3ZhbHVlLCBvbGRWYWx1ZV0gOiBbdmFsdWVdO1xuXHQgICAgICBvZmZzZXQgPSB3cml0ZSA/IDIgOiAxO1xuXHQgICAgICBpZiAoZmlsdGVyLmFyZ3MpIHtcblx0ICAgICAgICBmb3IgKGogPSAwLCBrID0gZmlsdGVyLmFyZ3MubGVuZ3RoOyBqIDwgazsgaisrKSB7XG5cdCAgICAgICAgICBhcmcgPSBmaWx0ZXIuYXJnc1tqXTtcblx0ICAgICAgICAgIGFyZ3NbaiArIG9mZnNldF0gPSBhcmcuZHluYW1pYyA/IHRoaXMuJGdldChhcmcudmFsdWUpIDogYXJnLnZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB2YWx1ZSA9IGZuLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlc29sdmUgYSBjb21wb25lbnQsIGRlcGVuZGluZyBvbiB3aGV0aGVyIHRoZSBjb21wb25lbnRcblx0ICAgKiBpcyBkZWZpbmVkIG5vcm1hbGx5IG9yIHVzaW5nIGFuIGFzeW5jIGZhY3RvcnkgZnVuY3Rpb24uXG5cdCAgICogUmVzb2x2ZXMgc3luY2hyb25vdXNseSBpZiBhbHJlYWR5IHJlc29sdmVkLCBvdGhlcndpc2Vcblx0ICAgKiByZXNvbHZlcyBhc3luY2hyb25vdXNseSBhbmQgY2FjaGVzIHRoZSByZXNvbHZlZFxuXHQgICAqIGNvbnN0cnVjdG9yIG9uIHRoZSBmYWN0b3J5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICh2YWx1ZSwgY2IpIHtcblx0ICAgIHZhciBmYWN0b3J5O1xuXHQgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBmYWN0b3J5ID0gdmFsdWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmYWN0b3J5ID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdjb21wb25lbnRzJywgdmFsdWUsIHRydWUpO1xuXHQgICAgfVxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIWZhY3RvcnkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gYXN5bmMgY29tcG9uZW50IGZhY3Rvcnlcblx0ICAgIGlmICghZmFjdG9yeS5vcHRpb25zKSB7XG5cdCAgICAgIGlmIChmYWN0b3J5LnJlc29sdmVkKSB7XG5cdCAgICAgICAgLy8gY2FjaGVkXG5cdCAgICAgICAgY2IoZmFjdG9yeS5yZXNvbHZlZCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoZmFjdG9yeS5yZXF1ZXN0ZWQpIHtcblx0ICAgICAgICAvLyBwb29sIGNhbGxiYWNrc1xuXHQgICAgICAgIGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNiKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmYWN0b3J5LnJlcXVlc3RlZCA9IHRydWU7XG5cdCAgICAgICAgdmFyIGNicyA9IGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcyA9IFtjYl07XG5cdCAgICAgICAgZmFjdG9yeS5jYWxsKHRoaXMsIGZ1bmN0aW9uIHJlc29sdmUocmVzKSB7XG5cdCAgICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChyZXMpKSB7XG5cdCAgICAgICAgICAgIHJlcyA9IFZ1ZS5leHRlbmQocmVzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIC8vIGNhY2hlIHJlc29sdmVkXG5cdCAgICAgICAgICBmYWN0b3J5LnJlc29sdmVkID0gcmVzO1xuXHQgICAgICAgICAgLy8gaW52b2tlIGNhbGxiYWNrc1xuXHQgICAgICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGNic1tpXShyZXMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIGZ1bmN0aW9uIHJlamVjdChyZWFzb24pIHtcblx0ICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50JyArICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gJzogJyArIHZhbHVlIDogJycpICsgJy4gJyArIChyZWFzb24gPyAnXFxuUmVhc29uOiAnICsgcmVhc29uIDogJycpKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm9ybWFsIGNvbXBvbmVudFxuXHQgICAgICBjYihmYWN0b3J5KTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgZmlsdGVyUkUkMSA9IC9bXnxdXFx8W158XS87XG5cdFxuXHRmdW5jdGlvbiBkYXRhQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBHZXQgdGhlIHZhbHVlIGZyb20gYW4gZXhwcmVzc2lvbiBvbiB0aGlzIHZtLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuXHQgICAqIEByZXR1cm4geyp9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGdldCA9IGZ1bmN0aW9uIChleHAsIGFzU3RhdGVtZW50KSB7XG5cdCAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCk7XG5cdCAgICBpZiAocmVzKSB7XG5cdCAgICAgIGlmIChhc1N0YXRlbWVudCkge1xuXHQgICAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgICByZXR1cm4gZnVuY3Rpb24gc3RhdGVtZW50SGFuZGxlcigpIHtcblx0ICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcblx0ICAgICAgICAgIHZhciByZXN1bHQgPSByZXMuZ2V0LmNhbGwoc2VsZiwgc2VsZik7XG5cdCAgICAgICAgICBzZWxmLiRhcmd1bWVudHMgPSBudWxsO1xuXHQgICAgICAgICAgcmV0dXJuIHJlc3VsdDtcblx0ICAgICAgICB9O1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICByZXR1cm4gcmVzLmdldC5jYWxsKHRoaXMsIHRoaXMpO1xuXHQgICAgICAgIH0gY2F0Y2ggKGUpIHt9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTZXQgdGhlIHZhbHVlIGZyb20gYW4gZXhwcmVzc2lvbiBvbiB0aGlzIHZtLlxuXHQgICAqIFRoZSBleHByZXNzaW9uIG11c3QgYmUgYSB2YWxpZCBsZWZ0LWhhbmRcblx0ICAgKiBleHByZXNzaW9uIGluIGFuIGFzc2lnbm1lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAgICogQHBhcmFtIHsqfSB2YWxcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kc2V0ID0gZnVuY3Rpb24gKGV4cCwgdmFsKSB7XG5cdCAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCwgdHJ1ZSk7XG5cdCAgICBpZiAocmVzICYmIHJlcy5zZXQpIHtcblx0ICAgICAgcmVzLnNldC5jYWxsKHRoaXMsIHRoaXMsIHZhbCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRGVsZXRlIGEgcHJvcGVydHkgb24gdGhlIFZNXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGRlbGV0ZSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGRlbCh0aGlzLl9kYXRhLCBrZXkpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFdhdGNoIGFuIGV4cHJlc3Npb24sIHRyaWdnZXIgY2FsbGJhY2sgd2hlbiBpdHNcblx0ICAgKiB2YWx1ZSBjaGFuZ2VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuXHQgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBpbW1lZGlhdGVcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB1bndhdGNoRm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICB2YXIgcGFyc2VkO1xuXHQgICAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnc3RyaW5nJykge1xuXHQgICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZShleHBPckZuKTtcblx0ICAgICAgZXhwT3JGbiA9IHBhcnNlZC5leHByZXNzaW9uO1xuXHQgICAgfVxuXHQgICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIHtcblx0ICAgICAgZGVlcDogb3B0aW9ucyAmJiBvcHRpb25zLmRlZXAsXG5cdCAgICAgIHN5bmM6IG9wdGlvbnMgJiYgb3B0aW9ucy5zeW5jLFxuXHQgICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG5cdCAgICAgIHVzZXI6ICFvcHRpb25zIHx8IG9wdGlvbnMudXNlciAhPT0gZmFsc2Vcblx0ICAgIH0pO1xuXHQgICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbW1lZGlhdGUpIHtcblx0ICAgICAgY2IuY2FsbCh2bSwgd2F0Y2hlci52YWx1ZSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gdW53YXRjaEZuKCkge1xuXHQgICAgICB3YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9O1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEV2YWx1YXRlIGEgdGV4dCBkaXJlY3RpdmUsIGluY2x1ZGluZyBmaWx0ZXJzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGV2YWwgPSBmdW5jdGlvbiAodGV4dCwgYXNTdGF0ZW1lbnQpIHtcblx0ICAgIC8vIGNoZWNrIGZvciBmaWx0ZXJzLlxuXHQgICAgaWYgKGZpbHRlclJFJDEudGVzdCh0ZXh0KSkge1xuXHQgICAgICB2YXIgZGlyID0gcGFyc2VEaXJlY3RpdmUodGV4dCk7XG5cdCAgICAgIC8vIHRoZSBmaWx0ZXIgcmVnZXggY2hlY2sgbWlnaHQgZ2l2ZSBmYWxzZSBwb3NpdGl2ZVxuXHQgICAgICAvLyBmb3IgcGlwZXMgaW5zaWRlIHN0cmluZ3MsIHNvIGl0J3MgcG9zc2libGUgdGhhdFxuXHQgICAgICAvLyB3ZSBkb24ndCBnZXQgYW55IGZpbHRlcnMgaGVyZVxuXHQgICAgICB2YXIgdmFsID0gdGhpcy4kZ2V0KGRpci5leHByZXNzaW9uLCBhc1N0YXRlbWVudCk7XG5cdCAgICAgIHJldHVybiBkaXIuZmlsdGVycyA/IHRoaXMuX2FwcGx5RmlsdGVycyh2YWwsIG51bGwsIGRpci5maWx0ZXJzKSA6IHZhbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vIGZpbHRlclxuXHQgICAgICByZXR1cm4gdGhpcy4kZ2V0KHRleHQsIGFzU3RhdGVtZW50KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnRlcnBvbGF0ZSBhIHBpZWNlIG9mIHRlbXBsYXRlIHRleHQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiAodGV4dCkge1xuXHQgICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dCh0ZXh0KTtcblx0ICAgIHZhciB2bSA9IHRoaXM7XG5cdCAgICBpZiAodG9rZW5zKSB7XG5cdCAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgICAgcmV0dXJuIHZtLiRldmFsKHRva2Vuc1swXS52YWx1ZSkgKyAnJztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcblx0ICAgICAgICAgIHJldHVybiB0b2tlbi50YWcgPyB2bS4kZXZhbCh0b2tlbi52YWx1ZSkgOiB0b2tlbi52YWx1ZTtcblx0ICAgICAgICB9KS5qb2luKCcnKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIHRleHQ7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogTG9nIGluc3RhbmNlIGRhdGEgYXMgYSBwbGFpbiBKUyBvYmplY3Rcblx0ICAgKiBzbyB0aGF0IGl0IGlzIGVhc2llciB0byBpbnNwZWN0IGluIGNvbnNvbGUuXG5cdCAgICogVGhpcyBtZXRob2QgYXNzdW1lcyBjb25zb2xlIGlzIGF2YWlsYWJsZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBbcGF0aF1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kbG9nID0gZnVuY3Rpb24gKHBhdGgpIHtcblx0ICAgIHZhciBkYXRhID0gcGF0aCA/IGdldFBhdGgodGhpcy5fZGF0YSwgcGF0aCkgOiB0aGlzLl9kYXRhO1xuXHQgICAgaWYgKGRhdGEpIHtcblx0ICAgICAgZGF0YSA9IGNsZWFuKGRhdGEpO1xuXHQgICAgfVxuXHQgICAgLy8gaW5jbHVkZSBjb21wdXRlZCBmaWVsZHNcblx0ICAgIGlmICghcGF0aCkge1xuXHQgICAgICB2YXIga2V5O1xuXHQgICAgICBmb3IgKGtleSBpbiB0aGlzLiRvcHRpb25zLmNvbXB1dGVkKSB7XG5cdCAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAodGhpcy5fcHJvcHMpIHtcblx0ICAgICAgICBmb3IgKGtleSBpbiB0aGlzLl9wcm9wcykge1xuXHQgICAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFwiY2xlYW5cIiBhIGdldHRlci9zZXR0ZXIgY29udmVydGVkIG9iamVjdCBpbnRvIGEgcGxhaW5cblx0ICAgKiBvYmplY3QgY29weS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSAtIG9ialxuXHQgICAqIEByZXR1cm4ge09iamVjdH1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2xlYW4ob2JqKSB7XG5cdCAgICByZXR1cm4gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShvYmopKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGRvbUFQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogQ29udmVuaWVuY2Ugb24taW5zdGFuY2UgbmV4dFRpY2suIFRoZSBjYWxsYmFjayBpc1xuXHQgICAqIGF1dG8tYm91bmQgdG8gdGhlIGluc3RhbmNlLCBhbmQgdGhpcyBhdm9pZHMgY29tcG9uZW50XG5cdCAgICogbW9kdWxlcyBoYXZpbmcgdG8gcmVseSBvbiB0aGUgZ2xvYmFsIFZ1ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG5leHRUaWNrID0gZnVuY3Rpb24gKGZuKSB7XG5cdCAgICBuZXh0VGljayhmbiwgdGhpcyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQXBwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRhcHBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYXBwZW5kLCBhcHBlbmRXaXRoVHJhbnNpdGlvbik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUHJlcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kcHJlcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuXHQgICAgaWYgKHRhcmdldC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5maXJzdENoaWxkLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0IGluc3RhbmNlIGJlZm9yZSB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYmVmb3JlID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICByZXR1cm4gaW5zZXJ0KHRoaXMsIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBiZWZvcmVXaXRoQ2IsIGJlZm9yZVdpdGhUcmFuc2l0aW9uKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnQgaW5zdGFuY2UgYWZ0ZXIgdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGFmdGVyID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuXHQgICAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuXHQgICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0Lm5leHRTaWJsaW5nLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy4kYXBwZW5kVG8odGFyZ2V0LnBhcmVudE5vZGUsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgaW5zdGFuY2UgZnJvbSBET01cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHJlbW92ZSA9IGZ1bmN0aW9uIChjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIGlmICghdGhpcy4kZWwucGFyZW50Tm9kZSkge1xuXHQgICAgICByZXR1cm4gY2IgJiYgY2IoKTtcblx0ICAgIH1cblx0ICAgIHZhciBpbkRvY3VtZW50ID0gdGhpcy5faXNBdHRhY2hlZCAmJiBpbkRvYyh0aGlzLiRlbCk7XG5cdCAgICAvLyBpZiB3ZSBhcmUgbm90IGluIGRvY3VtZW50LCBubyBuZWVkIHRvIGNoZWNrXG5cdCAgICAvLyBmb3IgdHJhbnNpdGlvbnNcblx0ICAgIGlmICghaW5Eb2N1bWVudCkgd2l0aFRyYW5zaXRpb24gPSBmYWxzZTtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciByZWFsQ2IgPSBmdW5jdGlvbiByZWFsQ2IoKSB7XG5cdCAgICAgIGlmIChpbkRvY3VtZW50KSBzZWxmLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcblx0ICAgICAgaWYgKGNiKSBjYigpO1xuXHQgICAgfTtcblx0ICAgIGlmICh0aGlzLl9pc0ZyYWdtZW50KSB7XG5cdCAgICAgIHJlbW92ZU5vZGVSYW5nZSh0aGlzLl9mcmFnbWVudFN0YXJ0LCB0aGlzLl9mcmFnbWVudEVuZCwgdGhpcywgdGhpcy5fZnJhZ21lbnQsIHJlYWxDYik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgPyByZW1vdmVXaXRoQ2IgOiByZW1vdmVXaXRoVHJhbnNpdGlvbjtcblx0ICAgICAgb3AodGhpcy4kZWwsIHRoaXMsIHJlYWxDYik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTaGFyZWQgRE9NIGluc2VydGlvbiBmdW5jdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMSAtIG9wIGZvciBub24tdHJhbnNpdGlvbiBpbnNlcnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDIgLSBvcCBmb3IgdHJhbnNpdGlvbiBpbnNlcnRcblx0ICAgKiBAcmV0dXJuIHZtXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGluc2VydCh2bSwgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIG9wMSwgb3AyKSB7XG5cdCAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuXHQgICAgdmFyIHRhcmdldElzRGV0YWNoZWQgPSAhaW5Eb2ModGFyZ2V0KTtcblx0ICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSB8fCB0YXJnZXRJc0RldGFjaGVkID8gb3AxIDogb3AyO1xuXHQgICAgdmFyIHNob3VsZENhbGxIb29rID0gIXRhcmdldElzRGV0YWNoZWQgJiYgIXZtLl9pc0F0dGFjaGVkICYmICFpbkRvYyh2bS4kZWwpO1xuXHQgICAgaWYgKHZtLl9pc0ZyYWdtZW50KSB7XG5cdCAgICAgIG1hcE5vZGVSYW5nZSh2bS5fZnJhZ21lbnRTdGFydCwgdm0uX2ZyYWdtZW50RW5kLCBmdW5jdGlvbiAobm9kZSkge1xuXHQgICAgICAgIG9wKG5vZGUsIHRhcmdldCwgdm0pO1xuXHQgICAgICB9KTtcblx0ICAgICAgY2IgJiYgY2IoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9wKHZtLiRlbCwgdGFyZ2V0LCB2bSwgY2IpO1xuXHQgICAgfVxuXHQgICAgaWYgKHNob3VsZENhbGxIb29rKSB7XG5cdCAgICAgIHZtLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2bTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrIGZvciBzZWxlY3RvcnNcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG5cdCAgICByZXR1cm4gdHlwZW9mIGVsID09PSAnc3RyaW5nJyA/IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpIDogZWw7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBcHBlbmQgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYXBwZW5kKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuXHQgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydEJlZm9yZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBiZWZvcmVXaXRoQ2IoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlbW92ZVdpdGhDYihlbCwgdm0sIGNiKSB7XG5cdCAgICByZW1vdmUoZWwpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZXZlbnRzQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBMaXN0ZW4gb24gdGhlIGdpdmVuIGBldmVudGAgd2l0aCBgZm5gLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kb24gPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICAodGhpcy5fZXZlbnRzW2V2ZW50XSB8fCAodGhpcy5fZXZlbnRzW2V2ZW50XSA9IFtdKSkucHVzaChmbik7XG5cdCAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAxKTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFkZHMgYW4gYGV2ZW50YCBsaXN0ZW5lciB0aGF0IHdpbGwgYmUgaW52b2tlZCBhIHNpbmdsZVxuXHQgICAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgZnVuY3Rpb24gb24oKSB7XG5cdCAgICAgIHNlbGYuJG9mZihldmVudCwgb24pO1xuXHQgICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgICAgb24uZm4gPSBmbjtcblx0ICAgIHRoaXMuJG9uKGV2ZW50LCBvbik7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciBgZXZlbnRgIG9yIGFsbFxuXHQgICAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kb2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHQgICAgdmFyIGNicztcblx0ICAgIC8vIGFsbFxuXHQgICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG5cdCAgICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcblx0ICAgICAgICBmb3IgKGV2ZW50IGluIHRoaXMuX2V2ZW50cykge1xuXHQgICAgICAgICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcblx0ICAgICAgICAgIGlmIChjYnMpIHtcblx0ICAgICAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICB0aGlzLl9ldmVudHMgPSB7fTtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgICAvLyBzcGVjaWZpYyBldmVudFxuXHQgICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcblx0ICAgIGlmICghY2JzKSB7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuXHQgICAgICB0aGlzLl9ldmVudHNbZXZlbnRdID0gbnVsbDtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgICAvLyBzcGVjaWZpYyBoYW5kbGVyXG5cdCAgICB2YXIgY2I7XG5cdCAgICB2YXIgaSA9IGNicy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGNiID0gY2JzW2ldO1xuXHQgICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuXHQgICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC0xKTtcblx0ICAgICAgICBjYnMuc3BsaWNlKGksIDEpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBUcmlnZ2VyIGFuIGV2ZW50IG9uIHNlbGYuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG5cdCAgICogQHJldHVybiB7Qm9vbGVhbn0gc2hvdWxkUHJvcGFnYXRlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGVtaXQgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG5cdCAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuXHQgICAgdmFyIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG5cdCAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gaXNTb3VyY2UgfHwgIWNicztcblx0ICAgIGlmIChjYnMpIHtcblx0ICAgICAgY2JzID0gY2JzLmxlbmd0aCA+IDEgPyB0b0FycmF5KGNicykgOiBjYnM7XG5cdCAgICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBoYWNreSBzb2x1dGlvbiB0byB0aGUgcXVlc3Rpb24gcmFpc2VkXG5cdCAgICAgIC8vIGluICMyMTAyOiBmb3IgYW4gaW5saW5lIGNvbXBvbmVudCBsaXN0ZW5lciBsaWtlIDxjb21wIEB0ZXN0PVwiZG9UaGlzXCI+LFxuXHQgICAgICAvLyB0aGUgcHJvcGFnYXRpb24gaGFuZGxpbmcgaXMgc29tZXdoYXQgYnJva2VuLiBUaGVyZWZvcmUgd2Vcblx0ICAgICAgLy8gbmVlZCB0byB0cmVhdCB0aGVzZSBpbmxpbmUgY2FsbGJhY2tzIGRpZmZlcmVudGx5LlxuXHQgICAgICB2YXIgaGFzUGFyZW50Q2JzID0gaXNTb3VyY2UgJiYgY2JzLnNvbWUoZnVuY3Rpb24gKGNiKSB7XG5cdCAgICAgICAgcmV0dXJuIGNiLl9mcm9tUGFyZW50O1xuXHQgICAgICB9KTtcblx0ICAgICAgaWYgKGhhc1BhcmVudENicykge1xuXHQgICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB2YXIgY2IgPSBjYnNbaV07XG5cdCAgICAgICAgdmFyIHJlcyA9IGNiLmFwcGx5KHRoaXMsIGFyZ3MpO1xuXHQgICAgICAgIGlmIChyZXMgPT09IHRydWUgJiYgKCFoYXNQYXJlbnRDYnMgfHwgY2IuX2Zyb21QYXJlbnQpKSB7XG5cdCAgICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHNob3VsZFByb3BhZ2F0ZTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZWN1cnNpdmVseSBicm9hZGNhc3QgYW4gZXZlbnQgdG8gYWxsIGNoaWxkcmVuIGluc3RhbmNlcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcblx0ICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGJyb2FkY2FzdCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcblx0ICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG5cdCAgICAvLyBpZiBubyBjaGlsZCBoYXMgcmVnaXN0ZXJlZCBmb3IgdGhpcyBldmVudCxcblx0ICAgIC8vIHRoZW4gdGhlcmUncyBubyBuZWVkIHRvIGJyb2FkY2FzdC5cblx0ICAgIGlmICghdGhpcy5fZXZlbnRzQ291bnRbZXZlbnRdKSByZXR1cm47XG5cdCAgICB2YXIgY2hpbGRyZW4gPSB0aGlzLiRjaGlsZHJlbjtcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuXHQgICAgaWYgKGlzU291cmNlKSB7XG5cdCAgICAgIC8vIHVzZSBvYmplY3QgZXZlbnQgdG8gaW5kaWNhdGUgbm9uLXNvdXJjZSBlbWl0XG5cdCAgICAgIC8vIG9uIGNoaWxkcmVuXG5cdCAgICAgIGFyZ3NbMF0gPSB7IG5hbWU6IGV2ZW50LCBzb3VyY2U6IHRoaXMgfTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuXHQgICAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gY2hpbGQuJGVtaXQuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuXHQgICAgICBpZiAoc2hvdWxkUHJvcGFnYXRlKSB7XG5cdCAgICAgICAgY2hpbGQuJGJyb2FkY2FzdC5hcHBseShjaGlsZCwgYXJncyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlY3Vyc2l2ZWx5IHByb3BhZ2F0ZSBhbiBldmVudCB1cCB0aGUgcGFyZW50IGNoYWluLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHsuLi4qfSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRkaXNwYXRjaCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IHRoaXMuJGVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIGlmICghc2hvdWxkUHJvcGFnYXRlKSByZXR1cm47XG5cdCAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG5cdCAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuXHQgICAgLy8gb24gcGFyZW50c1xuXHQgICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuXHQgICAgd2hpbGUgKHBhcmVudCkge1xuXHQgICAgICBzaG91bGRQcm9wYWdhdGUgPSBwYXJlbnQuJGVtaXQuYXBwbHkocGFyZW50LCBhcmdzKTtcblx0ICAgICAgcGFyZW50ID0gc2hvdWxkUHJvcGFnYXRlID8gcGFyZW50LiRwYXJlbnQgOiBudWxsO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogTW9kaWZ5IHRoZSBsaXN0ZW5lciBjb3VudHMgb24gYWxsIHBhcmVudHMuXG5cdCAgICogVGhpcyBib29ra2VlcGluZyBhbGxvd3MgJGJyb2FkY2FzdCB0byByZXR1cm4gZWFybHkgd2hlblxuXHQgICAqIG5vIGNoaWxkIGhhcyBsaXN0ZW5lZCB0byBhIGNlcnRhaW4gZXZlbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gY291bnRcblx0ICAgKi9cblx0XG5cdCAgdmFyIGhvb2tSRSA9IC9eaG9vazovO1xuXHQgIGZ1bmN0aW9uIG1vZGlmeUxpc3RlbmVyQ291bnQodm0sIGV2ZW50LCBjb3VudCkge1xuXHQgICAgdmFyIHBhcmVudCA9IHZtLiRwYXJlbnQ7XG5cdCAgICAvLyBob29rcyBkbyBub3QgZ2V0IGJyb2FkY2FzdGVkIHNvIG5vIG5lZWRcblx0ICAgIC8vIHRvIGRvIGJvb2trZWVwaW5nIGZvciB0aGVtXG5cdCAgICBpZiAoIXBhcmVudCB8fCAhY291bnQgfHwgaG9va1JFLnRlc3QoZXZlbnQpKSByZXR1cm47XG5cdCAgICB3aGlsZSAocGFyZW50KSB7XG5cdCAgICAgIHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdID0gKHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdIHx8IDApICsgY291bnQ7XG5cdCAgICAgIHBhcmVudCA9IHBhcmVudC4kcGFyZW50O1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gbGlmZWN5Y2xlQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBTZXQgaW5zdGFuY2UgdGFyZ2V0IGVsZW1lbnQgYW5kIGtpY2sgb2ZmIHRoZSBjb21waWxhdGlvblxuXHQgICAqIHByb2Nlc3MuIFRoZSBwYXNzZWQgaW4gYGVsYCBjYW4gYmUgYSBzZWxlY3RvciBzdHJpbmcsIGFuXG5cdCAgICogZXhpc3RpbmcgRWxlbWVudCwgb3IgYSBEb2N1bWVudEZyYWdtZW50IChmb3IgYmxvY2tcblx0ICAgKiBpbnN0YW5jZXMpLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR8c3RyaW5nfSBlbFxuXHQgICAqIEBwdWJsaWNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kbW91bnQgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICAgIGlmICh0aGlzLl9pc0NvbXBpbGVkKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignJG1vdW50KCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJywgdGhpcyk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGVsID0gcXVlcnkoZWwpO1xuXHQgICAgaWYgKCFlbCkge1xuXHQgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgfVxuXHQgICAgdGhpcy5fY29tcGlsZShlbCk7XG5cdCAgICB0aGlzLl9pbml0RE9NSG9va3MoKTtcblx0ICAgIGlmIChpbkRvYyh0aGlzLiRlbCkpIHtcblx0ICAgICAgdGhpcy5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG5cdCAgICAgIHJlYWR5LmNhbGwodGhpcyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRvbmNlKCdob29rOmF0dGFjaGVkJywgcmVhZHkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogTWFyayBhbiBpbnN0YW5jZSBhcyByZWFkeS5cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2lzUmVhZHkgPSB0cnVlO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ3JlYWR5Jyk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBUZWFyZG93biB0aGUgaW5zdGFuY2UsIHNpbXBseSBkZWxlZ2F0ZSB0byB0aGUgaW50ZXJuYWxcblx0ICAgKiBfZGVzdHJveS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlckNsZWFudXBcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuXHQgICAgdGhpcy5fZGVzdHJveShyZW1vdmUsIGRlZmVyQ2xlYW51cCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUGFydGlhbGx5IGNvbXBpbGUgYSBwaWVjZSBvZiBET00gYW5kIHJldHVybiBhXG5cdCAgICogZGVjb21waWxlIGZ1bmN0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAgICogQHBhcmFtIHtWdWV9IFtob3N0XVxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddXG5cdCAgICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGNvbXBpbGUgPSBmdW5jdGlvbiAoZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICByZXR1cm4gY29tcGlsZShlbCwgdGhpcy4kb3B0aW9ucywgdHJ1ZSkodGhpcywgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGhlIGV4cG9zZWQgVnVlIGNvbnN0cnVjdG9yLlxuXHQgKlxuXHQgKiBBUEkgY29udmVudGlvbnM6XG5cdCAqIC0gcHVibGljIEFQSSBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYCRgXG5cdCAqIC0gaW50ZXJuYWwgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGBfYFxuXHQgKiAtIG5vbi1wcmVmaXhlZCBwcm9wZXJ0aWVzIGFyZSBhc3N1bWVkIHRvIGJlIHByb3hpZWQgdXNlclxuXHQgKiAgIGRhdGEuXG5cdCAqXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBWdWUob3B0aW9ucykge1xuXHQgIHRoaXMuX2luaXQob3B0aW9ucyk7XG5cdH1cblx0XG5cdC8vIGluc3RhbGwgaW50ZXJuYWxzXG5cdGluaXRNaXhpbihWdWUpO1xuXHRzdGF0ZU1peGluKFZ1ZSk7XG5cdGV2ZW50c01peGluKFZ1ZSk7XG5cdGxpZmVjeWNsZU1peGluKFZ1ZSk7XG5cdG1pc2NNaXhpbihWdWUpO1xuXHRcblx0Ly8gaW5zdGFsbCBpbnN0YW5jZSBBUElzXG5cdGRhdGFBUEkoVnVlKTtcblx0ZG9tQVBJKFZ1ZSk7XG5cdGV2ZW50c0FQSShWdWUpO1xuXHRsaWZlY3ljbGVBUEkoVnVlKTtcblx0XG5cdHZhciBzbG90ID0ge1xuXHRcblx0ICBwcmlvcml0eTogU0xPVCxcblx0ICBwYXJhbXM6IFsnbmFtZSddLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gdGhpcyB3YXMgcmVzb2x2ZWQgZHVyaW5nIGNvbXBvbmVudCB0cmFuc2NsdXNpb25cblx0ICAgIHZhciBuYW1lID0gdGhpcy5wYXJhbXMubmFtZSB8fCAnZGVmYXVsdCc7XG5cdCAgICB2YXIgY29udGVudCA9IHRoaXMudm0uX3Nsb3RDb250ZW50cyAmJiB0aGlzLnZtLl9zbG90Q29udGVudHNbbmFtZV07XG5cdCAgICBpZiAoIWNvbnRlbnQgfHwgIWNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICAgIHRoaXMuZmFsbGJhY2soKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuY29tcGlsZShjb250ZW50LmNsb25lTm9kZSh0cnVlKSwgdGhpcy52bS5fY29udGV4dCwgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZShjb250ZW50LCBjb250ZXh0LCBob3N0KSB7XG5cdCAgICBpZiAoY29udGVudCAmJiBjb250ZXh0KSB7XG5cdCAgICAgIGlmICh0aGlzLmVsLmhhc0NoaWxkTm9kZXMoKSAmJiBjb250ZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5ub2RlVHlwZSA9PT0gMSAmJiBjb250ZW50LmNoaWxkTm9kZXNbMF0uaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgICAgICAvLyBpZiB0aGUgaW5zZXJ0ZWQgc2xvdCBoYXMgdi1pZlxuXHQgICAgICAgIC8vIGluamVjdCBmYWxsYmFjayBjb250ZW50IGFzIHRoZSB2LWVsc2Vcblx0ICAgICAgICB2YXIgZWxzZUJsb2NrID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGVtcGxhdGUnKTtcblx0ICAgICAgICBlbHNlQmxvY2suc2V0QXR0cmlidXRlKCd2LWVsc2UnLCAnJyk7XG5cdCAgICAgICAgZWxzZUJsb2NrLmlubmVySFRNTCA9IHRoaXMuZWwuaW5uZXJIVE1MO1xuXHQgICAgICAgIC8vIHRoZSBlbHNlIGJsb2NrIHNob3VsZCBiZSBjb21waWxlZCBpbiBjaGlsZCBzY29wZVxuXHQgICAgICAgIGVsc2VCbG9jay5fY29udGV4dCA9IHRoaXMudm07XG5cdCAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlbHNlQmxvY2spO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBzY29wZSA9IGhvc3QgPyBob3N0Ll9zY29wZSA6IHRoaXMuX3Njb3BlO1xuXHQgICAgICB0aGlzLnVubGluayA9IGNvbnRleHQuJGNvbXBpbGUoY29udGVudCwgaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgfVxuXHQgICAgaWYgKGNvbnRlbnQpIHtcblx0ICAgICAgcmVwbGFjZSh0aGlzLmVsLCBjb250ZW50KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJlbW92ZSh0aGlzLmVsKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBmYWxsYmFjazogZnVuY3Rpb24gZmFsbGJhY2soKSB7XG5cdCAgICB0aGlzLmNvbXBpbGUoZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSksIHRoaXMudm0pO1xuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMudW5saW5rKSB7XG5cdCAgICAgIHRoaXMudW5saW5rKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHBhcnRpYWwgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBQQVJUSUFMLFxuXHRcblx0ICBwYXJhbXM6IFsnbmFtZSddLFxuXHRcblx0ICAvLyB3YXRjaCBjaGFuZ2VzIHRvIG5hbWUgZm9yIGR5bmFtaWMgcGFydGlhbHNcblx0ICBwYXJhbVdhdGNoZXJzOiB7XG5cdCAgICBuYW1lOiBmdW5jdGlvbiBuYW1lKHZhbHVlKSB7XG5cdCAgICAgIHZJZi5yZW1vdmUuY2FsbCh0aGlzKTtcblx0ICAgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgICAgdGhpcy5pbnNlcnQodmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LXBhcnRpYWwnKTtcblx0ICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgdGhpcy5pbnNlcnQodGhpcy5wYXJhbXMubmFtZSk7XG5cdCAgfSxcblx0XG5cdCAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoaWQpIHtcblx0ICAgIHZhciBwYXJ0aWFsID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdwYXJ0aWFscycsIGlkLCB0cnVlKTtcblx0ICAgIGlmIChwYXJ0aWFsKSB7XG5cdCAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgcGFydGlhbCk7XG5cdCAgICAgIHZJZi5pbnNlcnQuY2FsbCh0aGlzKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLmZyYWcpIHtcblx0ICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgZWxlbWVudERpcmVjdGl2ZXMgPSB7XG5cdCAgc2xvdDogc2xvdCxcblx0ICBwYXJ0aWFsOiBwYXJ0aWFsXG5cdH07XG5cdFxuXHR2YXIgY29udmVydEFycmF5ID0gdkZvci5fcG9zdFByb2Nlc3M7XG5cdFxuXHQvKipcblx0ICogTGltaXQgZmlsdGVyIGZvciBhcnJheXNcblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IG5cblx0ICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAoRGVjaW1hbCBleHBlY3RlZClcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBsaW1pdEJ5KGFyciwgbiwgb2Zmc2V0KSB7XG5cdCAgb2Zmc2V0ID0gb2Zmc2V0ID8gcGFyc2VJbnQob2Zmc2V0LCAxMCkgOiAwO1xuXHQgIG4gPSB0b051bWJlcihuKTtcblx0ICByZXR1cm4gdHlwZW9mIG4gPT09ICdudW1iZXInID8gYXJyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbikgOiBhcnI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW2RlbGltaXRlcl1cblx0ICogQHBhcmFtIHtTdHJpbmd9IC4uLmRhdGFLZXlzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmlsdGVyQnkoYXJyLCBzZWFyY2gsIGRlbGltaXRlcikge1xuXHQgIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuXHQgIGlmIChzZWFyY2ggPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIGFycjtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBzZWFyY2ggPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBhcnIuZmlsdGVyKHNlYXJjaCk7XG5cdCAgfVxuXHQgIC8vIGNhc3QgdG8gbG93ZXJjYXNlIHN0cmluZ1xuXHQgIHNlYXJjaCA9ICgnJyArIHNlYXJjaCkudG9Mb3dlckNhc2UoKTtcblx0ICAvLyBhbGxvdyBvcHRpb25hbCBgaW5gIGRlbGltaXRlclxuXHQgIC8vIGJlY2F1c2Ugd2h5IG5vdFxuXHQgIHZhciBuID0gZGVsaW1pdGVyID09PSAnaW4nID8gMyA6IDI7XG5cdCAgLy8gZXh0cmFjdCBhbmQgZmxhdHRlbiBrZXlzXG5cdCAgdmFyIGtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCB0b0FycmF5KGFyZ3VtZW50cywgbikpO1xuXHQgIHZhciByZXMgPSBbXTtcblx0ICB2YXIgaXRlbSwga2V5LCB2YWwsIGo7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcnIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBpdGVtID0gYXJyW2ldO1xuXHQgICAgdmFsID0gaXRlbSAmJiBpdGVtLiR2YWx1ZSB8fCBpdGVtO1xuXHQgICAgaiA9IGtleXMubGVuZ3RoO1xuXHQgICAgaWYgKGopIHtcblx0ICAgICAgd2hpbGUgKGotLSkge1xuXHQgICAgICAgIGtleSA9IGtleXNbal07XG5cdCAgICAgICAgaWYgKGtleSA9PT0gJyRrZXknICYmIGNvbnRhaW5zKGl0ZW0uJGtleSwgc2VhcmNoKSB8fCBjb250YWlucyhnZXRQYXRoKHZhbCwga2V5KSwgc2VhcmNoKSkge1xuXHQgICAgICAgICAgcmVzLnB1c2goaXRlbSk7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoY29udGFpbnMoaXRlbSwgc2VhcmNoKSkge1xuXHQgICAgICByZXMucHVzaChpdGVtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ3xBcnJheTxTdHJpbmc+fEZ1bmN0aW9ufSAuLi5zb3J0S2V5c1xuXHQgKiBAcGFyYW0ge051bWJlcn0gW29yZGVyXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9yZGVyQnkoYXJyKSB7XG5cdCAgdmFyIGNvbXBhcmF0b3IgPSBudWxsO1xuXHQgIHZhciBzb3J0S2V5cyA9IHVuZGVmaW5lZDtcblx0ICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcblx0XG5cdCAgLy8gZGV0ZXJtaW5lIG9yZGVyIChsYXN0IGFyZ3VtZW50KVxuXHQgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgIHZhciBvcmRlciA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcblx0ICBpZiAodHlwZW9mIG9yZGVyID09PSAnbnVtYmVyJykge1xuXHQgICAgb3JkZXIgPSBvcmRlciA8IDAgPyAtMSA6IDE7XG5cdCAgICBhcmdzID0gYXJncy5sZW5ndGggPiAxID8gYXJncy5zbGljZSgwLCAtMSkgOiBhcmdzO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBvcmRlciA9IDE7XG5cdCAgfVxuXHRcblx0ICAvLyBkZXRlcm1pbmUgc29ydEtleXMgJiBjb21wYXJhdG9yXG5cdCAgdmFyIGZpcnN0QXJnID0gYXJnc1swXTtcblx0ICBpZiAoIWZpcnN0QXJnKSB7XG5cdCAgICByZXR1cm4gYXJyO1xuXHQgIH0gZWxzZSBpZiAodHlwZW9mIGZpcnN0QXJnID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAvLyBjdXN0b20gY29tcGFyYXRvclxuXHQgICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiKSB7XG5cdCAgICAgIHJldHVybiBmaXJzdEFyZyhhLCBiKSAqIG9yZGVyO1xuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gc3RyaW5nIGtleXMuIGZsYXR0ZW4gZmlyc3Rcblx0ICAgIHNvcnRLZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgYXJncyk7XG5cdCAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIsIGkpIHtcblx0ICAgICAgaSA9IGkgfHwgMDtcblx0ICAgICAgcmV0dXJuIGkgPj0gc29ydEtleXMubGVuZ3RoIC0gMSA/IGJhc2VDb21wYXJlKGEsIGIsIGkpIDogYmFzZUNvbXBhcmUoYSwgYiwgaSkgfHwgY29tcGFyYXRvcihhLCBiLCBpICsgMSk7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gYmFzZUNvbXBhcmUoYSwgYiwgc29ydEtleUluZGV4KSB7XG5cdCAgICB2YXIgc29ydEtleSA9IHNvcnRLZXlzW3NvcnRLZXlJbmRleF07XG5cdCAgICBpZiAoc29ydEtleSkge1xuXHQgICAgICBpZiAoc29ydEtleSAhPT0gJyRrZXknKSB7XG5cdCAgICAgICAgaWYgKGlzT2JqZWN0KGEpICYmICckdmFsdWUnIGluIGEpIGEgPSBhLiR2YWx1ZTtcblx0ICAgICAgICBpZiAoaXNPYmplY3QoYikgJiYgJyR2YWx1ZScgaW4gYikgYiA9IGIuJHZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIGEgPSBpc09iamVjdChhKSA/IGdldFBhdGgoYSwgc29ydEtleSkgOiBhO1xuXHQgICAgICBiID0gaXNPYmplY3QoYikgPyBnZXRQYXRoKGIsIHNvcnRLZXkpIDogYjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBhID09PSBiID8gMCA6IGEgPiBiID8gb3JkZXIgOiAtb3JkZXI7XG5cdCAgfVxuXHRcblx0ICAvLyBzb3J0IG9uIGEgY29weSB0byBhdm9pZCBtdXRhdGluZyBvcmlnaW5hbCBhcnJheVxuXHQgIHJldHVybiBhcnIuc2xpY2UoKS5zb3J0KGNvbXBhcmF0b3IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaW5nIGNvbnRhaW4gaGVscGVyXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb250YWlucyh2YWwsIHNlYXJjaCkge1xuXHQgIHZhciBpO1xuXHQgIGlmIChpc1BsYWluT2JqZWN0KHZhbCkpIHtcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgaWYgKGNvbnRhaW5zKHZhbFtrZXlzW2ldXSwgc2VhcmNoKSkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc0FycmF5KHZhbCkpIHtcblx0ICAgIGkgPSB2YWwubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBpZiAoY29udGFpbnModmFsW2ldLCBzZWFyY2gpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHZhbCAhPSBudWxsKSB7XG5cdCAgICByZXR1cm4gdmFsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaCkgPiAtMTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBkaWdpdHNSRSA9IC8oXFxkezN9KSg/PVxcZCkvZztcblx0XG5cdC8vIGFzc2V0IGNvbGxlY3Rpb25zIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuXG5cdHZhciBmaWx0ZXJzID0ge1xuXHRcblx0ICBvcmRlckJ5OiBvcmRlckJ5LFxuXHQgIGZpbHRlckJ5OiBmaWx0ZXJCeSxcblx0ICBsaW1pdEJ5OiBsaW1pdEJ5LFxuXHRcblx0ICAvKipcblx0ICAgKiBTdHJpbmdpZnkgdmFsdWUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZW50XG5cdCAgICovXG5cdFxuXHQgIGpzb246IHtcblx0ICAgIHJlYWQ6IGZ1bmN0aW9uIHJlYWQodmFsdWUsIGluZGVudCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gaW5kZW50IDogMik7XG5cdCAgICB9LFxuXHQgICAgd3JpdGU6IGZ1bmN0aW9uIHdyaXRlKHZhbHVlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuXHQgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ2FiYycgPT4gJ0FiYydcblx0ICAgKi9cblx0XG5cdCAgY2FwaXRhbGl6ZTogZnVuY3Rpb24gY2FwaXRhbGl6ZSh2YWx1ZSkge1xuXHQgICAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuXHQgICAgdmFsdWUgPSB2YWx1ZS50b1N0cmluZygpO1xuXHQgICAgcmV0dXJuIHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ2FiYycgPT4gJ0FCQydcblx0ICAgKi9cblx0XG5cdCAgdXBwZXJjYXNlOiBmdW5jdGlvbiB1cHBlcmNhc2UodmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvU3RyaW5nKCkudG9VcHBlckNhc2UoKSA6ICcnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdBYkMnID0+ICdhYmMnXG5cdCAgICovXG5cdFxuXHQgIGxvd2VyY2FzZTogZnVuY3Rpb24gbG93ZXJjYXNlKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgOiAnJztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAxMjM0NSA9PiAkMTIsMzQ1LjAwXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gc2lnblxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWNpbWFscyBEZWNpbWFsIHBsYWNlc1xuXHQgICAqL1xuXHRcblx0ICBjdXJyZW5jeTogZnVuY3Rpb24gY3VycmVuY3kodmFsdWUsIF9jdXJyZW5jeSwgZGVjaW1hbHMpIHtcblx0ICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG5cdCAgICBpZiAoIWlzRmluaXRlKHZhbHVlKSB8fCAhdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcblx0ICAgIF9jdXJyZW5jeSA9IF9jdXJyZW5jeSAhPSBudWxsID8gX2N1cnJlbmN5IDogJyQnO1xuXHQgICAgZGVjaW1hbHMgPSBkZWNpbWFscyAhPSBudWxsID8gZGVjaW1hbHMgOiAyO1xuXHQgICAgdmFyIHN0cmluZ2lmaWVkID0gTWF0aC5hYnModmFsdWUpLnRvRml4ZWQoZGVjaW1hbHMpO1xuXHQgICAgdmFyIF9pbnQgPSBkZWNpbWFscyA/IHN0cmluZ2lmaWVkLnNsaWNlKDAsIC0xIC0gZGVjaW1hbHMpIDogc3RyaW5naWZpZWQ7XG5cdCAgICB2YXIgaSA9IF9pbnQubGVuZ3RoICUgMztcblx0ICAgIHZhciBoZWFkID0gaSA+IDAgPyBfaW50LnNsaWNlKDAsIGkpICsgKF9pbnQubGVuZ3RoID4gMyA/ICcsJyA6ICcnKSA6ICcnO1xuXHQgICAgdmFyIF9mbG9hdCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoLTEgLSBkZWNpbWFscykgOiAnJztcblx0ICAgIHZhciBzaWduID0gdmFsdWUgPCAwID8gJy0nIDogJyc7XG5cdCAgICByZXR1cm4gc2lnbiArIF9jdXJyZW5jeSArIGhlYWQgKyBfaW50LnNsaWNlKGkpLnJlcGxhY2UoZGlnaXRzUkUsICckMSwnKSArIF9mbG9hdDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnaXRlbScgPT4gJ2l0ZW1zJ1xuXHQgICAqXG5cdCAgICogQHBhcmFtc1xuXHQgICAqICBhbiBhcnJheSBvZiBzdHJpbmdzIGNvcnJlc3BvbmRpbmcgdG9cblx0ICAgKiAgdGhlIHNpbmdsZSwgZG91YmxlLCB0cmlwbGUgLi4uIGZvcm1zIG9mIHRoZSB3b3JkIHRvXG5cdCAgICogIGJlIHBsdXJhbGl6ZWQuIFdoZW4gdGhlIG51bWJlciB0byBiZSBwbHVyYWxpemVkXG5cdCAgICogIGV4Y2VlZHMgdGhlIGxlbmd0aCBvZiB0aGUgYXJncywgaXQgd2lsbCB1c2UgdGhlIGxhc3Rcblx0ICAgKiAgZW50cnkgaW4gdGhlIGFycmF5LlxuXHQgICAqXG5cdCAgICogIGUuZy4gWydzaW5nbGUnLCAnZG91YmxlJywgJ3RyaXBsZScsICdtdWx0aXBsZSddXG5cdCAgICovXG5cdFxuXHQgIHBsdXJhbGl6ZTogZnVuY3Rpb24gcGx1cmFsaXplKHZhbHVlKSB7XG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICAgIHZhciBsZW5ndGggPSBhcmdzLmxlbmd0aDtcblx0ICAgIGlmIChsZW5ndGggPiAxKSB7XG5cdCAgICAgIHZhciBpbmRleCA9IHZhbHVlICUgMTAgLSAxO1xuXHQgICAgICByZXR1cm4gaW5kZXggaW4gYXJncyA/IGFyZ3NbaW5kZXhdIDogYXJnc1tsZW5ndGggLSAxXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiBhcmdzWzBdICsgKHZhbHVlID09PSAxID8gJycgOiAncycpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIERlYm91bmNlIGEgaGFuZGxlciBmdW5jdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVsYXkgPSAzMDBcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICAgKi9cblx0XG5cdCAgZGVib3VuY2U6IGZ1bmN0aW9uIGRlYm91bmNlKGhhbmRsZXIsIGRlbGF5KSB7XG5cdCAgICBpZiAoIWhhbmRsZXIpIHJldHVybjtcblx0ICAgIGlmICghZGVsYXkpIHtcblx0ICAgICAgZGVsYXkgPSAzMDA7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gX2RlYm91bmNlKGhhbmRsZXIsIGRlbGF5KTtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBpbnN0YWxsR2xvYmFsQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBWdWUgYW5kIGV2ZXJ5IGNvbnN0cnVjdG9yIHRoYXQgZXh0ZW5kcyBWdWUgaGFzIGFuXG5cdCAgICogYXNzb2NpYXRlZCBvcHRpb25zIG9iamVjdCwgd2hpY2ggY2FuIGJlIGFjY2Vzc2VkIGR1cmluZ1xuXHQgICAqIGNvbXBpbGF0aW9uIHN0ZXBzIGFzIGB0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnNgLlxuXHQgICAqXG5cdCAgICogVGhlc2UgY2FuIGJlIHNlZW4gYXMgdGhlIGRlZmF1bHQgb3B0aW9ucyBvZiBldmVyeVxuXHQgICAqIFZ1ZSBpbnN0YW5jZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLm9wdGlvbnMgPSB7XG5cdCAgICBkaXJlY3RpdmVzOiBkaXJlY3RpdmVzLFxuXHQgICAgZWxlbWVudERpcmVjdGl2ZXM6IGVsZW1lbnREaXJlY3RpdmVzLFxuXHQgICAgZmlsdGVyczogZmlsdGVycyxcblx0ICAgIHRyYW5zaXRpb25zOiB7fSxcblx0ICAgIGNvbXBvbmVudHM6IHt9LFxuXHQgICAgcGFydGlhbHM6IHt9LFxuXHQgICAgcmVwbGFjZTogdHJ1ZVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEV4cG9zZSB1c2VmdWwgaW50ZXJuYWxzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS51dGlsID0gdXRpbDtcblx0ICBWdWUuY29uZmlnID0gY29uZmlnO1xuXHQgIFZ1ZS5zZXQgPSBzZXQ7XG5cdCAgVnVlWydkZWxldGUnXSA9IGRlbDtcblx0ICBWdWUubmV4dFRpY2sgPSBuZXh0VGljaztcblx0XG5cdCAgLyoqXG5cdCAgICogVGhlIGZvbGxvd2luZyBhcmUgZXhwb3NlZCBmb3IgYWR2YW5jZWQgdXNhZ2UgLyBwbHVnaW5zXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5jb21waWxlciA9IGNvbXBpbGVyO1xuXHQgIFZ1ZS5GcmFnbWVudEZhY3RvcnkgPSBGcmFnbWVudEZhY3Rvcnk7XG5cdCAgVnVlLmludGVybmFsRGlyZWN0aXZlcyA9IGludGVybmFsRGlyZWN0aXZlcztcblx0ICBWdWUucGFyc2VycyA9IHtcblx0ICAgIHBhdGg6IHBhdGgsXG5cdCAgICB0ZXh0OiB0ZXh0LFxuXHQgICAgdGVtcGxhdGU6IHRlbXBsYXRlLFxuXHQgICAgZGlyZWN0aXZlOiBkaXJlY3RpdmUsXG5cdCAgICBleHByZXNzaW9uOiBleHByZXNzaW9uXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRWFjaCBpbnN0YW5jZSBjb25zdHJ1Y3RvciwgaW5jbHVkaW5nIFZ1ZSwgaGFzIGEgdW5pcXVlXG5cdCAgICogY2lkLiBUaGlzIGVuYWJsZXMgdXMgdG8gY3JlYXRlIHdyYXBwZWQgXCJjaGlsZFxuXHQgICAqIGNvbnN0cnVjdG9yc1wiIGZvciBwcm90b3R5cGFsIGluaGVyaXRhbmNlIGFuZCBjYWNoZSB0aGVtLlxuXHQgICAqL1xuXHRcblx0ICBWdWUuY2lkID0gMDtcblx0ICB2YXIgY2lkID0gMTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2xhc3MgaW5oZXJpdGFuY2Vcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbmRPcHRpb25zXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5leHRlbmQgPSBmdW5jdGlvbiAoZXh0ZW5kT3B0aW9ucykge1xuXHQgICAgZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnMgfHwge307XG5cdCAgICB2YXIgU3VwZXIgPSB0aGlzO1xuXHQgICAgdmFyIGlzRmlyc3RFeHRlbmQgPSBTdXBlci5jaWQgPT09IDA7XG5cdCAgICBpZiAoaXNGaXJzdEV4dGVuZCAmJiBleHRlbmRPcHRpb25zLl9DdG9yKSB7XG5cdCAgICAgIHJldHVybiBleHRlbmRPcHRpb25zLl9DdG9yO1xuXHQgICAgfVxuXHQgICAgdmFyIG5hbWUgPSBleHRlbmRPcHRpb25zLm5hbWUgfHwgU3VwZXIub3B0aW9ucy5uYW1lO1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgaWYgKCEvXlthLXpBLVpdW1xcdy1dKiQvLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICB3YXJuKCdJbnZhbGlkIGNvbXBvbmVudCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiLiBDb21wb25lbnQgbmFtZXMgJyArICdjYW4gb25seSBjb250YWluIGFscGhhbnVtZXJpYyBjaGFyYWNhdGVycyBhbmQgdGhlIGh5cGhlbi4nKTtcblx0ICAgICAgICBuYW1lID0gbnVsbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIFN1YiA9IGNyZWF0ZUNsYXNzKG5hbWUgfHwgJ1Z1ZUNvbXBvbmVudCcpO1xuXHQgICAgU3ViLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTtcblx0ICAgIFN1Yi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWI7XG5cdCAgICBTdWIuY2lkID0gY2lkKys7XG5cdCAgICBTdWIub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhTdXBlci5vcHRpb25zLCBleHRlbmRPcHRpb25zKTtcblx0ICAgIFN1Ylsnc3VwZXInXSA9IFN1cGVyO1xuXHQgICAgLy8gYWxsb3cgZnVydGhlciBleHRlbnNpb25cblx0ICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7XG5cdCAgICAvLyBjcmVhdGUgYXNzZXQgcmVnaXN0ZXJzLCBzbyBleHRlbmRlZCBjbGFzc2VzXG5cdCAgICAvLyBjYW4gaGF2ZSB0aGVpciBwcml2YXRlIGFzc2V0cyB0b28uXG5cdCAgICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgICAgICBTdWJbdHlwZV0gPSBTdXBlclt0eXBlXTtcblx0ICAgIH0pO1xuXHQgICAgLy8gZW5hYmxlIHJlY3Vyc2l2ZSBzZWxmLWxvb2t1cFxuXHQgICAgaWYgKG5hbWUpIHtcblx0ICAgICAgU3ViLm9wdGlvbnMuY29tcG9uZW50c1tuYW1lXSA9IFN1Yjtcblx0ICAgIH1cblx0ICAgIC8vIGNhY2hlIGNvbnN0cnVjdG9yXG5cdCAgICBpZiAoaXNGaXJzdEV4dGVuZCkge1xuXHQgICAgICBleHRlbmRPcHRpb25zLl9DdG9yID0gU3ViO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIFN1Yjtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN1Yi1jbGFzcyBjb25zdHJ1Y3RvciB3aXRoIHRoZVxuXHQgICAqIGdpdmVuIG5hbWUuIFRoaXMgZ2l2ZXMgdXMgbXVjaCBuaWNlciBvdXRwdXQgd2hlblxuXHQgICAqIGxvZ2dpbmcgaW5zdGFuY2VzIGluIHRoZSBjb25zb2xlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY3JlYXRlQ2xhc3MobmFtZSkge1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3JldHVybiBmdW5jdGlvbiAnICsgY2xhc3NpZnkobmFtZSkgKyAnIChvcHRpb25zKSB7IHRoaXMuX2luaXQob3B0aW9ucykgfScpKCk7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBQbHVnaW4gc3lzdGVtXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gcGx1Z2luXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS51c2UgPSBmdW5jdGlvbiAocGx1Z2luKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChwbHVnaW4uaW5zdGFsbGVkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIGFkZGl0aW9uYWwgcGFyYW1ldGVyc1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG5cdCAgICBpZiAodHlwZW9mIHBsdWdpbi5pbnN0YWxsID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHBsdWdpbi5pbnN0YWxsLmFwcGx5KHBsdWdpbiwgYXJncyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwbHVnaW4uYXBwbHkobnVsbCwgYXJncyk7XG5cdCAgICB9XG5cdCAgICBwbHVnaW4uaW5zdGFsbGVkID0gdHJ1ZTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFwcGx5IGEgZ2xvYmFsIG1peGluIGJ5IG1lcmdpbmcgaXQgaW50byB0aGUgZGVmYXVsdFxuXHQgICAqIG9wdGlvbnMuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikge1xuXHQgICAgVnVlLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoVnVlLm9wdGlvbnMsIG1peGluKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYXNzZXQgcmVnaXN0cmF0aW9uIG1ldGhvZHMgd2l0aCB0aGUgZm9sbG93aW5nXG5cdCAgICogc2lnbmF0dXJlOlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAgICogQHBhcmFtIHsqfSBkZWZpbml0aW9uXG5cdCAgICovXG5cdFxuXHQgIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgICBWdWVbdHlwZV0gPSBmdW5jdGlvbiAoaWQsIGRlZmluaXRpb24pIHtcblx0ICAgICAgaWYgKCFkZWZpbml0aW9uKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiAoY29tbW9uVGFnUkUudGVzdChpZCkgfHwgcmVzZXJ2ZWRUYWdSRS50ZXN0KGlkKSkpIHtcblx0ICAgICAgICAgICAgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsgaWQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgaXNQbGFpbk9iamVjdChkZWZpbml0aW9uKSkge1xuXHQgICAgICAgICAgaWYgKCFkZWZpbml0aW9uLm5hbWUpIHtcblx0ICAgICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gaWQ7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICBkZWZpbml0aW9uID0gVnVlLmV4dGVuZChkZWZpbml0aW9uKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXSA9IGRlZmluaXRpb247XG5cdCAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfSk7XG5cdFxuXHQgIC8vIGV4cG9zZSBpbnRlcm5hbCB0cmFuc2l0aW9uIEFQSVxuXHQgIGV4dGVuZChWdWUudHJhbnNpdGlvbiwgdHJhbnNpdGlvbik7XG5cdH1cblx0XG5cdGluc3RhbGxHbG9iYWxBUEkoVnVlKTtcblx0XG5cdFZ1ZS52ZXJzaW9uID0gJzEuMC4yNic7XG5cdFxuXHQvLyBkZXZ0b29scyBnbG9iYWwgaG9va1xuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0ICBpZiAoY29uZmlnLmRldnRvb2xzKSB7XG5cdCAgICBpZiAoZGV2dG9vbHMpIHtcblx0ICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XG5cdCAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaW5Ccm93c2VyICYmIC9DaHJvbWVcXC9cXGQrLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSkge1xuXHQgICAgICBjb25zb2xlLmxvZygnRG93bmxvYWQgdGhlIFZ1ZSBEZXZ0b29scyBmb3IgYSBiZXR0ZXIgZGV2ZWxvcG1lbnQgZXhwZXJpZW5jZTpcXG4nICsgJ2h0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtZGV2dG9vbHMnKTtcblx0ICAgIH1cblx0ICB9XG5cdH0sIDApO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBWdWU7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5KSkpXG5cbi8qKiovIH0sXG4vKiAyMjggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihcImRlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdFwiKTsgfTtcclxuXG5cbi8qKiovIH0sXG4vKiAyMjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0XHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xyXG5cdFx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxyXG5cdFx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbW9kdWxlO1xyXG5cdH1cclxuXG5cbi8qKiovIH0sXG4vKiAyMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIChpZ25vcmVkKSAqL1xuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB2dWUuanNcbiAqKi8iLCIgXHQvLyBpbnN0YWxsIGEgSlNPTlAgY2FsbGJhY2sgZm9yIGNodW5rIGxvYWRpbmdcbiBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gd2luZG93W1wid2VicGFja0pzb25wXCJdO1xuIFx0d2luZG93W1wid2VicGFja0pzb25wXCJdID0gZnVuY3Rpb24gd2VicGFja0pzb25wQ2FsbGJhY2soY2h1bmtJZHMsIG1vcmVNb2R1bGVzKSB7XG4gXHRcdC8vIGFkZCBcIm1vcmVNb2R1bGVzXCIgdG8gdGhlIG1vZHVsZXMgb2JqZWN0LFxuIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbiBcdFx0dmFyIG1vZHVsZUlkLCBjaHVua0lkLCBpID0gMCwgY2FsbGJhY2tzID0gW107XG4gXHRcdGZvcig7aSA8IGNodW5rSWRzLmxlbmd0aDsgaSsrKSB7XG4gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuIFx0XHRcdGlmKGluc3RhbGxlZENodW5rc1tjaHVua0lkXSlcbiBcdFx0XHRcdGNhbGxiYWNrcy5wdXNoLmFwcGx5KGNhbGxiYWNrcywgaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKTtcbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuIFx0XHR9XG4gXHRcdGZvcihtb2R1bGVJZCBpbiBtb3JlTW9kdWxlcykge1xuIFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuIFx0XHR9XG4gXHRcdGlmKHBhcmVudEpzb25wRnVuY3Rpb24pIHBhcmVudEpzb25wRnVuY3Rpb24oY2h1bmtJZHMsIG1vcmVNb2R1bGVzKTtcbiBcdFx0d2hpbGUoY2FsbGJhY2tzLmxlbmd0aClcbiBcdFx0XHRjYWxsYmFja3Muc2hpZnQoKS5jYWxsKG51bGwsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHR9O1xuXG4gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBvYmplY3QgdG8gc3RvcmUgbG9hZGVkIGFuZCBsb2FkaW5nIGNodW5rc1xuIFx0Ly8gXCIwXCIgbWVhbnMgXCJhbHJlYWR5IGxvYWRlZFwiXG4gXHQvLyBBcnJheSBtZWFucyBcImxvYWRpbmdcIiwgYXJyYXkgY29udGFpbnMgY2FsbGJhY2tzXG4gXHR2YXIgaW5zdGFsbGVkQ2h1bmtzID0ge1xuIFx0XHQwOjAsXG4gXHRcdDE6MCxcbiBcdFx0MjowXG4gXHR9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcblxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0ZXhwb3J0czoge30sXG4gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuIFx0XHRcdGxvYWRlZDogZmFsc2VcbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cbiBcdC8vIFRoaXMgZmlsZSBjb250YWlucyBvbmx5IHRoZSBlbnRyeSBjaHVuay5cbiBcdC8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5lID0gZnVuY3Rpb24gcmVxdWlyZUVuc3VyZShjaHVua0lkLCBjYWxsYmFjaykge1xuIFx0XHQvLyBcIjBcIiBpcyB0aGUgc2lnbmFsIGZvciBcImFscmVhZHkgbG9hZGVkXCJcbiBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKVxuIFx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKG51bGwsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIGFuIGFycmF5IG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cbiBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdICE9PSB1bmRlZmluZWQpIHtcbiBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0ucHVzaChjYWxsYmFjayk7XG4gXHRcdH0gZWxzZSB7XG4gXHRcdFx0Ly8gc3RhcnQgY2h1bmsgbG9hZGluZ1xuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IFtjYWxsYmFja107XG4gXHRcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuIFx0XHRcdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcbiBcdFx0XHRzY3JpcHQudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnO1xuIFx0XHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04JztcbiBcdFx0XHRzY3JpcHQuYXN5bmMgPSB0cnVlO1xuXG4gXHRcdFx0c2NyaXB0LnNyYyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuYXBwLmpzXCI7XG4gXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzY3JpcHQpO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9oeWJyaWQtdGhvcml1bS9kZXYvYXBwL1wiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgN2MxNTlkMWJkNzg3NmNlNTc4NjJcbiAqKi8iLCJpbXBvcnQgVnVlIGZyb20gJ1Z1ZSc7XG5pbXBvcnQgVnVlUm91dGVyIGZyb20gJ3Z1ZS1yb3V0ZXInO1xuaW1wb3J0IHJvdXRlcyBmcm9tICcuL3JvdXRlcyc7XG5pbXBvcnQgSHlicmlkVGhvcml1bSBmcm9tICdoeWJyaWQtdGhvcml1bSc7XG5pbXBvcnQgUHJpc20gZnJvbSAncHJpc21qcyc7XG5pbXBvcnQgU2lkZU5hdiBmcm9tICcuL2NvbXBvbmVudHMvc2lkZS1uYXYvaW5kZXgudnVlJztcbmltcG9ydCBTaXRlSGVhZGVyIGZyb20gJy4vY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWUnO1xuVnVlLmNvbmZpZy5kZWJ1ZyA9IHRydWU7XG5cblZ1ZS51c2UoVnVlUm91dGVyKTtcblZ1ZS51c2UoSHlicmlkVGhvcml1bSk7XG5cbmxldCByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKCk7XG5sZXQgQXBwID0gVnVlLmV4dGVuZCh7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBTaWRlTmF2LFxuICAgIFNpdGVIZWFkZXJcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGlnZXJFbmRQb2ludDogJ2h0dHBzOi8vYXBpLmNtcy50ZWx1cy5jb20vbGVnYWxzJyxcbiAgICAgIGxpZ2VyQXBwbGljYXRpb25LZXk6ICdiOTczOGQ2N2I4OWRmYzc4Mjc0NmQ0YTljZjRhMTA5MydcbiAgICB9O1xuICB9XG59KTtcbnJvdXRlci5tYXAocm91dGVzKTtcbnJvdXRlci5hZnRlckVhY2goKCkgPT4ge1xuICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICBQcmlzbS5oaWdobGlnaHRBbGwoKTtcbiAgfSwgMCk7XG59KTtcbnJvdXRlci5yZWRpcmVjdCh7XG4gICcqJzogJy9nZXQtc3RhcnRlZCdcbn0pO1xucm91dGVyLnN0YXJ0KEFwcCwgJyNhcHAtbWFpbicpO1xuXG4vLyByb3V0ZXIuZ28oJy9nZXQtc3RhcnRlZCcpO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9kZXYvc3JjL21haW4uanNcbiAqKi8iLCIvKlxyXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG4qL1xyXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBsaXN0ID0gW107XHJcblxyXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XHJcblx0XHR2YXIgcmVzdWx0ID0gW107XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaXRlbSA9IHRoaXNbaV07XHJcblx0XHRcdGlmKGl0ZW1bMl0pIHtcclxuXHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goaXRlbVsxXSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcclxuXHR9O1xyXG5cclxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxyXG5cdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxyXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XHJcblx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcclxuXHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xyXG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXHJcblx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXHJcblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXHJcblx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xyXG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XHJcblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHRyZXR1cm4gbGlzdDtcclxufTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xudmFyIHN0eWxlc0luRG9tID0ge30sXG5cdG1lbW9pemUgPSBmdW5jdGlvbihmbikge1xuXHRcdHZhciBtZW1vO1xuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0cmV0dXJuIG1lbW87XG5cdFx0fTtcblx0fSxcblx0aXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIC9tc2llIFs2LTldXFxiLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuXHR9KSxcblx0Z2V0SGVhZEVsZW1lbnQgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XG5cdH0pLFxuXHRzaW5nbGV0b25FbGVtZW50ID0gbnVsbCxcblx0c2luZ2xldG9uQ291bnRlciA9IDAsXG5cdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wID0gW107XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRpZih0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcblx0XHRpZih0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAodHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgPGhlYWQ+LlxuXHRpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCk7XG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0fVxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKylcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0fVxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pXG5cdFx0XHRzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xuXHRcdGVsc2Vcblx0XHRcdG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KSB7XG5cdHZhciBoZWFkID0gZ2V0SGVhZEVsZW1lbnQoKTtcblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Bbc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGhlYWQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHRcdH1cblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlRWxlbWVudCk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0Jy4gTXVzdCBiZSAndG9wJyBvciAnYm90dG9tJy5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuXHRzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHR2YXIgaWR4ID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZUVsZW1lbnQpO1xuXHRpZihpZHggPj0gMCkge1xuXHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSB7XG5cdHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cdHN0eWxlRWxlbWVudC50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KTtcblx0cmV0dXJuIHN0eWxlRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZUVsZW1lbnQsIHVwZGF0ZSwgcmVtb3ZlO1xuXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXHRcdHN0eWxlRWxlbWVudCA9IHNpbmdsZXRvbkVsZW1lbnQgfHwgKHNpbmdsZXRvbkVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCB0cnVlKTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuXHRcdGlmKG5ld09iaikge1xuXHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZUVsZW1lbnQsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHRpZiAobWVkaWEpIHtcblx0XHRzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpO1xuXHR9XG5cblx0aWYgKHNvdXJjZU1hcCkge1xuXHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZGV2dG9vbHMvZG9jcy9qYXZhc2NyaXB0LWRlYnVnZ2luZ1xuXHRcdC8vIHRoaXMgbWFrZXMgc291cmNlIG1hcHMgaW5zaWRlIHN0eWxlIHRhZ3Mgd29yayBwcm9wZXJseSBpbiBDaHJvbWVcblx0XHRjc3MgKz0gJ1xcbi8qIyBzb3VyY2VVUkw9JyArIHNvdXJjZU1hcC5zb3VyY2VzWzBdICsgJyAqLyc7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xuXHRcdH1cblx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNoZWNrR2xvYmFsID0gcmVxdWlyZSgnLi9fY2hlY2tHbG9iYWwnKTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gY2hlY2tHbG9iYWwodHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwpO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gY2hlY2tHbG9iYWwodHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZik7XG5cbi8qKiBEZXRlY3QgYHRoaXNgIGFzIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHRoaXNHbG9iYWwgPSBjaGVja0dsb2JhbCh0eXBlb2YgdGhpcyA9PSAnb2JqZWN0JyAmJiB0aGlzKTtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgdGhpc0dsb2JhbCB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvb3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3Jvb3QuanNcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQHR5cGUge0Z1bmN0aW9ufVxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheSgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNBcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vYXBpLXRhYmxlLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUlzTmF0aXZlID0gcmVxdWlyZSgnLi9fYmFzZUlzTmF0aXZlJyksXG4gICAgZ2V0VmFsdWUgPSByZXF1aXJlKCcuL19nZXRWYWx1ZScpO1xuXG4vKipcbiAqIEdldHMgdGhlIG5hdGl2ZSBmdW5jdGlvbiBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuICovXG5mdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcbiAgdmFyIHZhbHVlID0gZ2V0VmFsdWUob2JqZWN0LCBrZXkpO1xuICByZXR1cm4gYmFzZUlzTmF0aXZlKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldE5hdGl2ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZ2V0TmF0aXZlLmpzXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNPYmplY3QuanNcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdExpa2U7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNPYmplY3RMaWtlLmpzXG4gKiogbW9kdWxlIGlkID0gOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGxpc3RDYWNoZUNsZWFyID0gcmVxdWlyZSgnLi9fbGlzdENhY2hlQ2xlYXInKSxcbiAgICBsaXN0Q2FjaGVEZWxldGUgPSByZXF1aXJlKCcuL19saXN0Q2FjaGVEZWxldGUnKSxcbiAgICBsaXN0Q2FjaGVHZXQgPSByZXF1aXJlKCcuL19saXN0Q2FjaGVHZXQnKSxcbiAgICBsaXN0Q2FjaGVIYXMgPSByZXF1aXJlKCcuL19saXN0Q2FjaGVIYXMnKSxcbiAgICBsaXN0Q2FjaGVTZXQgPSByZXF1aXJlKCcuL19saXN0Q2FjaGVTZXQnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBMaXN0Q2FjaGUoZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYExpc3RDYWNoZWAuXG5MaXN0Q2FjaGUucHJvdG90eXBlLmNsZWFyID0gbGlzdENhY2hlQ2xlYXI7XG5MaXN0Q2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IGxpc3RDYWNoZURlbGV0ZTtcbkxpc3RDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbGlzdENhY2hlR2V0O1xuTGlzdENhY2hlLnByb3RvdHlwZS5oYXMgPSBsaXN0Q2FjaGVIYXM7XG5MaXN0Q2FjaGUucHJvdG90eXBlLnNldCA9IGxpc3RDYWNoZVNldDtcblxubW9kdWxlLmV4cG9ydHMgPSBMaXN0Q2FjaGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX0xpc3RDYWNoZS5qc1xuICoqIG1vZHVsZSBpZCA9IDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBlcSA9IHJlcXVpcmUoJy4vZXEnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgYGtleWAgaXMgZm91bmQgaW4gYGFycmF5YCBvZiBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gKiBAcGFyYW0geyp9IGtleSBUaGUga2V5IHRvIHNlYXJjaCBmb3IuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICovXG5mdW5jdGlvbiBhc3NvY0luZGV4T2YoYXJyYXksIGtleSkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICBpZiAoZXEoYXJyYXlbbGVuZ3RoXVswXSwga2V5KSkge1xuICAgICAgcmV0dXJuIGxlbmd0aDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFzc29jSW5kZXhPZjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYXNzb2NJbmRleE9mLmpzXG4gKiogbW9kdWxlIGlkID0gMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0tleWFibGUgPSByZXF1aXJlKCcuL19pc0tleWFibGUnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBkYXRhIGZvciBgbWFwYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgcmVmZXJlbmNlIGtleS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXAgZGF0YS5cbiAqL1xuZnVuY3Rpb24gZ2V0TWFwRGF0YShtYXAsIGtleSkge1xuICB2YXIgZGF0YSA9IG1hcC5fX2RhdGFfXztcbiAgcmV0dXJuIGlzS2V5YWJsZShrZXkpXG4gICAgPyBkYXRhW3R5cGVvZiBrZXkgPT0gJ3N0cmluZycgPyAnc3RyaW5nJyA6ICdoYXNoJ11cbiAgICA6IGRhdGEubWFwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldE1hcERhdGE7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldE1hcERhdGEuanNcbiAqKiBtb2R1bGUgaWQgPSAxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBpc1N5bWJvbCA9IHJlcXVpcmUoJy4vaXNTeW1ib2wnKTtcblxuLyoqIFVzZWQgdG8gbWF0Y2ggcHJvcGVydHkgbmFtZXMgd2l0aGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHJlSXNEZWVwUHJvcCA9IC9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sXG4gICAgcmVJc1BsYWluUHJvcCA9IC9eXFx3KiQvO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSBhbmQgbm90IGEgcHJvcGVydHkgcGF0aC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeSBrZXlzIG9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzS2V5KHZhbHVlLCBvYmplY3QpIHtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICBpZiAodHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlID09ICdzeW1ib2wnIHx8IHR5cGUgPT0gJ2Jvb2xlYW4nIHx8XG4gICAgICB2YWx1ZSA9PSBudWxsIHx8IGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiByZUlzUGxhaW5Qcm9wLnRlc3QodmFsdWUpIHx8ICFyZUlzRGVlcFByb3AudGVzdCh2YWx1ZSkgfHxcbiAgICAob2JqZWN0ICE9IG51bGwgJiYgdmFsdWUgaW4gT2JqZWN0KG9iamVjdCkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzS2V5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc0tleS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9fZ2V0TmF0aXZlJyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBuYXRpdmVDcmVhdGUgPSBnZXROYXRpdmUoT2JqZWN0LCAnY3JlYXRlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmF0aXZlQ3JlYXRlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19uYXRpdmVDcmVhdGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzU3ltYm9sID0gcmVxdWlyZSgnLi9pc1N5bWJvbCcpO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcga2V5IGlmIGl0J3Mgbm90IGEgc3RyaW5nIG9yIHN5bWJvbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cbiAqIEByZXR1cm5zIHtzdHJpbmd8c3ltYm9sfSBSZXR1cm5zIHRoZSBrZXkuXG4gKi9cbmZ1bmN0aW9uIHRvS2V5KHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHwgaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHZhciByZXN1bHQgPSAodmFsdWUgKyAnJyk7XG4gIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b0tleTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fdG9LZXkuanNcbiAqKiBtb2R1bGUgaWQgPSAxNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBsb29zZWx5IGJhc2VkIG9uXG4gKiBbYFRvTGVuZ3RoYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtdG9sZW5ndGgpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0xlbmd0aCgzKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzTGVuZ3RoKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKEluZmluaXR5KTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aCgnMycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJlxuICAgIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0xlbmd0aDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc0xlbmd0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzU3ltYm9sO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzU3ltYm9sLmpzXG4gKiogbW9kdWxlIGlkID0gMTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBtYXBDYWNoZUNsZWFyID0gcmVxdWlyZSgnLi9fbWFwQ2FjaGVDbGVhcicpLFxuICAgIG1hcENhY2hlRGVsZXRlID0gcmVxdWlyZSgnLi9fbWFwQ2FjaGVEZWxldGUnKSxcbiAgICBtYXBDYWNoZUdldCA9IHJlcXVpcmUoJy4vX21hcENhY2hlR2V0JyksXG4gICAgbWFwQ2FjaGVIYXMgPSByZXF1aXJlKCcuL19tYXBDYWNoZUhhcycpLFxuICAgIG1hcENhY2hlU2V0ID0gcmVxdWlyZSgnLi9fbWFwQ2FjaGVTZXQnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbWFwIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIE1hcENhY2hlKGVudHJpZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBNYXBDYWNoZWAuXG5NYXBDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBtYXBDYWNoZUNsZWFyO1xuTWFwQ2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IG1hcENhY2hlRGVsZXRlO1xuTWFwQ2FjaGUucHJvdG90eXBlLmdldCA9IG1hcENhY2hlR2V0O1xuTWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IG1hcENhY2hlSGFzO1xuTWFwQ2FjaGUucHJvdG90eXBlLnNldCA9IG1hcENhY2hlU2V0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1hcENhY2hlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19NYXBDYWNoZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0Jyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBnZW5UYWcgPSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oXyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG4gIC8vIGluIFNhZmFyaSA4IHdoaWNoIHJldHVybnMgJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5IGFuZCB3ZWFrIG1hcCBjb25zdHJ1Y3RvcnMsXG4gIC8vIGFuZCBQaGFudG9tSlMgMS45IHdoaWNoIHJldHVybnMgJ2Z1bmN0aW9uJyBmb3IgYE5vZGVMaXN0YCBpbnN0YW5jZXMuXG4gIHZhciB0YWcgPSBpc09iamVjdCh2YWx1ZSkgPyBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuICByZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0Z1bmN0aW9uO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzRnVuY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNhY2hlZFNldFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTtcbiAgICB9XG4gIH1cbiAgdHJ5IHtcbiAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBpcyBub3QgZGVmaW5lZCcpO1xuICAgIH1cbiAgfVxufSAoKSlcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IGNhY2hlZFNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGNhY2hlZENsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9wcm9jZXNzL2Jyb3dzZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLypcbiAgQGRlc2MgQWRkIGJlaGF2aW9yIHRvIGFueSBlbGVtZW50LlxuICBXaGVuIGV2YWwgdG8gdHJ1ZSwgaXQgd2lsbCBzZXQgZWxlbWVudCB0YWIgaW5kZXggdG8gMCBhbmQgZm9jdXMgb24gaXQuXG4gIEV4YW1wbGU6IDxkaXYgc2V0LWZvY3VzPVwid2lsbEZvY3VzV2hlblRydWVcIj48L2Rpdj5cbiovXG5cbmltcG9ydCBkZWZlciBmcm9tICdsb2Rhc2gvZGVmZXInO1xuZXhwb3J0IGRlZmF1bHQge1xuICB1cGRhdGUobmV3VmFsKSB7XG4gICAgaWYgKG5ld1ZhbCA9PT0gdHJ1ZSkge1xuICAgICAgZGVmZXIoKCkgPT4ge1xuICAgICAgICB0aGlzLmVsLnRhYkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5lbC5mb2N1cygpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2RpcmVjdGl2ZXMvc2V0LWZvY3VzLmpzXG4gKiovIiwiaW1wb3J0IGV2ZW50cyBmcm9tICcuL2V2ZW50cyc7XG5pbXBvcnQgeGhyUmVzcG9uc2UgZnJvbSAnLi94aHItcmVzcG9uc2UnO1xuZXhwb3J0IGRlZmF1bHQgW1xuICBldmVudHMsXG4gIHhoclJlc3BvbnNlLFxuXTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21peGlucy9pbmRleC5qc1xuICoqLyIsInZhciBnZXROYXRpdmUgPSByZXF1aXJlKCcuL19nZXROYXRpdmUnKSxcbiAgICByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG52YXIgTWFwID0gZ2V0TmF0aXZlKHJvb3QsICdNYXAnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBNYXA7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX01hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDIyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgTGlzdENhY2hlID0gcmVxdWlyZSgnLi9fTGlzdENhY2hlJyksXG4gICAgc3RhY2tDbGVhciA9IHJlcXVpcmUoJy4vX3N0YWNrQ2xlYXInKSxcbiAgICBzdGFja0RlbGV0ZSA9IHJlcXVpcmUoJy4vX3N0YWNrRGVsZXRlJyksXG4gICAgc3RhY2tHZXQgPSByZXF1aXJlKCcuL19zdGFja0dldCcpLFxuICAgIHN0YWNrSGFzID0gcmVxdWlyZSgnLi9fc3RhY2tIYXMnKSxcbiAgICBzdGFja1NldCA9IHJlcXVpcmUoJy4vX3N0YWNrU2V0Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIHN0YWNrIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIFN0YWNrKGVudHJpZXMpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IG5ldyBMaXN0Q2FjaGUoZW50cmllcyk7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBTdGFja2AuXG5TdGFjay5wcm90b3R5cGUuY2xlYXIgPSBzdGFja0NsZWFyO1xuU3RhY2sucHJvdG90eXBlWydkZWxldGUnXSA9IHN0YWNrRGVsZXRlO1xuU3RhY2sucHJvdG90eXBlLmdldCA9IHN0YWNrR2V0O1xuU3RhY2sucHJvdG90eXBlLmhhcyA9IHN0YWNrSGFzO1xuU3RhY2sucHJvdG90eXBlLnNldCA9IHN0YWNrU2V0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YWNrO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19TdGFjay5qc1xuICoqIG1vZHVsZSBpZCA9IDIzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgU3ltYm9sID0gcm9vdC5TeW1ib2w7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ltYm9sO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19TeW1ib2wuanNcbiAqKiBtb2R1bGUgaWQgPSAyNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNhc3RQYXRoID0gcmVxdWlyZSgnLi9fY2FzdFBhdGgnKSxcbiAgICBpc0tleSA9IHJlcXVpcmUoJy4vX2lzS2V5JyksXG4gICAgdG9LZXkgPSByZXF1aXJlKCcuL190b0tleScpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmdldGAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWZhdWx0IHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gYmFzZUdldChvYmplY3QsIHBhdGgpIHtcbiAgcGF0aCA9IGlzS2V5KHBhdGgsIG9iamVjdCkgPyBbcGF0aF0gOiBjYXN0UGF0aChwYXRoKTtcblxuICB2YXIgaW5kZXggPSAwLFxuICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGg7XG5cbiAgd2hpbGUgKG9iamVjdCAhPSBudWxsICYmIGluZGV4IDwgbGVuZ3RoKSB7XG4gICAgb2JqZWN0ID0gb2JqZWN0W3RvS2V5KHBhdGhbaW5kZXgrK10pXTtcbiAgfVxuICByZXR1cm4gKGluZGV4ICYmIGluZGV4ID09IGxlbmd0aCkgPyBvYmplY3QgOiB1bmRlZmluZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUdldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUdldC5qc1xuICoqIG1vZHVsZSBpZCA9IDI1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0UHJvdG90eXBlID0gcmVxdWlyZSgnLi9fZ2V0UHJvdG90eXBlJyk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaGFzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IGtleSBUaGUga2V5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSGFzKG9iamVjdCwga2V5KSB7XG4gIC8vIEF2b2lkIGEgYnVnIGluIElFIDEwLTExIHdoZXJlIG9iamVjdHMgd2l0aCBhIFtbUHJvdG90eXBlXV0gb2YgYG51bGxgLFxuICAvLyB0aGF0IGFyZSBjb21wb3NlZCBlbnRpcmVseSBvZiBpbmRleCBwcm9wZXJ0aWVzLCByZXR1cm4gYGZhbHNlYCBmb3JcbiAgLy8gYGhhc093blByb3BlcnR5YCBjaGVja3Mgb2YgdGhlbS5cbiAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmXG4gICAgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpIHx8XG4gICAgICAodHlwZW9mIG9iamVjdCA9PSAnb2JqZWN0JyAmJiBrZXkgaW4gb2JqZWN0ICYmIGdldFByb3RvdHlwZShvYmplY3QpID09PSBudWxsKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUhhcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUhhcy5qc1xuICoqIG1vZHVsZSBpZCA9IDI2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUlzRXF1YWxEZWVwID0gcmVxdWlyZSgnLi9fYmFzZUlzRXF1YWxEZWVwJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0JyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aGljaCBzdXBwb3J0cyBwYXJ0aWFsIGNvbXBhcmlzb25zXG4gKiBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtib29sZWFufSBbYml0bWFza10gVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy5cbiAqICBUaGUgYml0bWFzayBtYXkgYmUgY29tcG9zZWQgb2YgdGhlIGZvbGxvd2luZyBmbGFnczpcbiAqICAgICAxIC0gVW5vcmRlcmVkIGNvbXBhcmlzb25cbiAqICAgICAyIC0gUGFydGlhbCBjb21wYXJpc29uXG4gKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcbiAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdCh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG4gIH1cbiAgcmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSwgb3RoZXIsIGJhc2VJc0VxdWFsLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUlzRXF1YWw7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VJc0VxdWFsLmpzXG4gKiogbW9kdWxlIGlkID0gMjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZVByb3BlcnR5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlUHJvcGVydHkuanNcbiAqKiBtb2R1bGUgaWQgPSAyOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBzdHJpbmdUb1BhdGggPSByZXF1aXJlKCcuL19zdHJpbmdUb1BhdGgnKTtcblxuLyoqXG4gKiBDYXN0cyBgdmFsdWVgIHRvIGEgcGF0aCBhcnJheSBpZiBpdCdzIG5vdCBvbmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNhc3QgcHJvcGVydHkgcGF0aCBhcnJheS5cbiAqL1xuZnVuY3Rpb24gY2FzdFBhdGgodmFsdWUpIHtcbiAgcmV0dXJuIGlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBzdHJpbmdUb1BhdGgodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNhc3RQYXRoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19jYXN0UGF0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgU2V0Q2FjaGUgPSByZXF1aXJlKCcuL19TZXRDYWNoZScpLFxuICAgIGFycmF5U29tZSA9IHJlcXVpcmUoJy4vX2FycmF5U29tZScpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cbnZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcbiAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBhcnJheXMgd2l0aCBzdXBwb3J0IGZvclxuICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7QXJyYXl9IG90aGVyIFRoZSBvdGhlciBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcbiAqICBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYGFycmF5YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcnJheXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxBcnJheXMoYXJyYXksIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG4gIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUcsXG4gICAgICBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7XG5cbiAgaWYgKGFyckxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIShpc1BhcnRpYWwgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KGFycmF5KTtcbiAgaWYgKHN0YWNrZWQpIHtcbiAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcbiAgfVxuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IHRydWUsXG4gICAgICBzZWVuID0gKGJpdG1hc2sgJiBVTk9SREVSRURfQ09NUEFSRV9GTEFHKSA/IG5ldyBTZXRDYWNoZSA6IHVuZGVmaW5lZDtcblxuICBzdGFjay5zZXQoYXJyYXksIG90aGVyKTtcblxuICAvLyBJZ25vcmUgbm9uLWluZGV4IHByb3BlcnRpZXMuXG4gIHdoaWxlICgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7XG4gICAgdmFyIGFyclZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2luZGV4XTtcblxuICAgIGlmIChjdXN0b21pemVyKSB7XG4gICAgICB2YXIgY29tcGFyZWQgPSBpc1BhcnRpYWxcbiAgICAgICAgPyBjdXN0b21pemVyKG90aFZhbHVlLCBhcnJWYWx1ZSwgaW5kZXgsIG90aGVyLCBhcnJheSwgc3RhY2spXG4gICAgICAgIDogY3VzdG9taXplcihhcnJWYWx1ZSwgb3RoVmFsdWUsIGluZGV4LCBhcnJheSwgb3RoZXIsIHN0YWNrKTtcbiAgICB9XG4gICAgaWYgKGNvbXBhcmVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChjb21wYXJlZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgaWYgKHNlZW4pIHtcbiAgICAgIGlmICghYXJyYXlTb21lKG90aGVyLCBmdW5jdGlvbihvdGhWYWx1ZSwgb3RoSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghc2Vlbi5oYXMob3RoSW5kZXgpICYmXG4gICAgICAgICAgICAgICAgKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzZWVuLmFkZChvdGhJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpIHtcbiAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIShcbiAgICAgICAgICBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHxcbiAgICAgICAgICAgIGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKVxuICAgICAgICApKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBzdGFja1snZGVsZXRlJ10oYXJyYXkpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVxdWFsQXJyYXlzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19lcXVhbEFycmF5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDMwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QgaW4gSUUgPCA5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNIb3N0T2JqZWN0KHZhbHVlKSB7XG4gIC8vIE1hbnkgaG9zdCBvYmplY3RzIGFyZSBgT2JqZWN0YCBvYmplY3RzIHRoYXQgY2FuIGNvZXJjZSB0byBzdHJpbmdzXG4gIC8vIGRlc3BpdGUgaGF2aW5nIGltcHJvcGVybHkgZGVmaW5lZCBgdG9TdHJpbmdgIG1ldGhvZHMuXG4gIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgaWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlLnRvU3RyaW5nICE9ICdmdW5jdGlvbicpIHtcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gISEodmFsdWUgKyAnJyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzSG9zdE9iamVjdDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faXNIb3N0T2JqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gMzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG52YXIgcmVJc1VpbnQgPSAvXig/OjB8WzEtOV1cXGQqKSQvO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG4gIHJldHVybiAhIWxlbmd0aCAmJlxuICAgICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpICYmXG4gICAgKHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzSW5kZXg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2lzSW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAzMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaWYgc3VpdGFibGUgZm9yIHN0cmljdFxuICogIGVxdWFsaXR5IGNvbXBhcmlzb25zLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09IHZhbHVlICYmICFpc09iamVjdCh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNTdHJpY3RDb21wYXJhYmxlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc1N0cmljdENvbXBhcmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYG1hdGNoZXNQcm9wZXJ0eWAgZm9yIHNvdXJjZSB2YWx1ZXMgc3VpdGFibGVcbiAqIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gbWF0Y2guXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZShrZXksIHNyY1ZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdFtrZXldID09PSBzcmNWYWx1ZSAmJlxuICAgICAgKHNyY1ZhbHVlICE9PSB1bmRlZmluZWQgfHwgKGtleSBpbiBPYmplY3Qob2JqZWN0KSkpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXRjaGVzU3RyaWN0Q29tcGFyYWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZnVuY1RvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIENvbnZlcnRzIGBmdW5jYCB0byBpdHMgc291cmNlIGNvZGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzb3VyY2UgY29kZS5cbiAqL1xuZnVuY3Rpb24gdG9Tb3VyY2UoZnVuYykge1xuICBpZiAoZnVuYyAhPSBudWxsKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmdW5jVG9TdHJpbmcuY2FsbChmdW5jKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gKGZ1bmMgKyAnJyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9Tb3VyY2U7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3RvU291cmNlLmpzXG4gKiogbW9kdWxlIGlkID0gMzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlRGVsYXkgPSByZXF1aXJlKCcuL19iYXNlRGVsYXknKSxcbiAgICByZXN0ID0gcmVxdWlyZSgnLi9yZXN0Jyk7XG5cbi8qKlxuICogRGVmZXJzIGludm9raW5nIHRoZSBgZnVuY2AgdW50aWwgdGhlIGN1cnJlbnQgY2FsbCBzdGFjayBoYXMgY2xlYXJlZC4gQW55XG4gKiBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQncyBpbnZva2VkLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVmZXIuXG4gKiBAcGFyYW0gey4uLip9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIGludm9rZSBgZnVuY2Agd2l0aC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVyIGlkLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmRlZmVyKGZ1bmN0aW9uKHRleHQpIHtcbiAqICAgY29uc29sZS5sb2codGV4dCk7XG4gKiB9LCAnZGVmZXJyZWQnKTtcbiAqIC8vID0+IExvZ3MgJ2RlZmVycmVkJyBhZnRlciBvbmUgb3IgbW9yZSBtaWxsaXNlY29uZHMuXG4gKi9cbnZhciBkZWZlciA9IHJlc3QoZnVuY3Rpb24oZnVuYywgYXJncykge1xuICByZXR1cm4gYmFzZURlbGF5KGZ1bmMsIDEsIGFyZ3MpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVmZXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvZGVmZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAzNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzQXJyYXlMaWtlT2JqZWN0ID0gcmVxdWlyZSgnLi9pc0FycmF5TGlrZU9iamVjdCcpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgcHJvcGVydHlJc0VudW1lcmFibGUgPSBvYmplY3RQcm90by5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuICAvLyBTYWZhcmkgOC4xIGluY29ycmVjdGx5IG1ha2VzIGBhcmd1bWVudHMuY2FsbGVlYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuICByZXR1cm4gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJlxuICAgICghcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpIHx8IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFyZ3NUYWcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQXJndW1lbnRzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzQXJndW1lbnRzLmpzXG4gKiogbW9kdWxlIGlkID0gMzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXRMZW5ndGggPSByZXF1aXJlKCcuL19nZXRMZW5ndGgnKSxcbiAgICBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnLi9pc0Z1bmN0aW9uJyksXG4gICAgaXNMZW5ndGggPSByZXF1aXJlKCcuL2lzTGVuZ3RoJyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS4gQSB2YWx1ZSBpcyBjb25zaWRlcmVkIGFycmF5LWxpa2UgaWYgaXQnc1xuICogbm90IGEgZnVuY3Rpb24gYW5kIGhhcyBhIGB2YWx1ZS5sZW5ndGhgIHRoYXQncyBhbiBpbnRlZ2VyIGdyZWF0ZXIgdGhhbiBvclxuICogZXF1YWwgdG8gYDBgIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoJ2FiYycpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKGdldExlbmd0aCh2YWx1ZSkpICYmICFpc0Z1bmN0aW9uKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5TGlrZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc0FycmF5TGlrZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTdHJpbmdgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3RyaW5nKCdhYmMnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3RyaW5nKDEpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fFxuICAgICghaXNBcnJheSh2YWx1ZSkgJiYgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzdHJpbmdUYWcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzU3RyaW5nO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzU3RyaW5nLmpzXG4gKiogbW9kdWxlIGlkID0gMzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlSGFzID0gcmVxdWlyZSgnLi9fYmFzZUhhcycpLFxuICAgIGJhc2VLZXlzID0gcmVxdWlyZSgnLi9fYmFzZUtleXMnKSxcbiAgICBpbmRleEtleXMgPSByZXF1aXJlKCcuL19pbmRleEtleXMnKSxcbiAgICBpc0FycmF5TGlrZSA9IHJlcXVpcmUoJy4vaXNBcnJheUxpa2UnKSxcbiAgICBpc0luZGV4ID0gcmVxdWlyZSgnLi9faXNJbmRleCcpLFxuICAgIGlzUHJvdG90eXBlID0gcmVxdWlyZSgnLi9faXNQcm90b3R5cGUnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy4gU2VlIHRoZVxuICogW0VTIHNwZWNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5rZXlzKVxuICogZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiAgIHRoaXMuYiA9IDI7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAqXG4gKiBfLmtleXMobmV3IEZvbyk7XG4gKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKlxuICogXy5rZXlzKCdoaScpO1xuICogLy8gPT4gWycwJywgJzEnXVxuICovXG5mdW5jdGlvbiBrZXlzKG9iamVjdCkge1xuICB2YXIgaXNQcm90byA9IGlzUHJvdG90eXBlKG9iamVjdCk7XG4gIGlmICghKGlzUHJvdG8gfHwgaXNBcnJheUxpa2Uob2JqZWN0KSkpIHtcbiAgICByZXR1cm4gYmFzZUtleXMob2JqZWN0KTtcbiAgfVxuICB2YXIgaW5kZXhlcyA9IGluZGV4S2V5cyhvYmplY3QpLFxuICAgICAgc2tpcEluZGV4ZXMgPSAhIWluZGV4ZXMsXG4gICAgICByZXN1bHQgPSBpbmRleGVzIHx8IFtdLFxuICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcblxuICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgaWYgKGJhc2VIYXMob2JqZWN0LCBrZXkpICYmXG4gICAgICAgICEoc2tpcEluZGV4ZXMgJiYgKGtleSA9PSAnbGVuZ3RoJyB8fCBpc0luZGV4KGtleSwgbGVuZ3RoKSkpICYmXG4gICAgICAgICEoaXNQcm90byAmJiBrZXkgPT0gJ2NvbnN0cnVjdG9yJykpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ga2V5cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9rZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gNDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciB0b0Zpbml0ZSA9IHJlcXVpcmUoJy4vdG9GaW5pdGUnKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIGludGVnZXIuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgVG9JbnRlZ2VyYF0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvaW50ZWdlcikuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgaW50ZWdlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b0ludGVnZXIoMy4yKTtcbiAqIC8vID0+IDNcbiAqXG4gKiBfLnRvSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDBcbiAqXG4gKiBfLnRvSW50ZWdlcihJbmZpbml0eSk7XG4gKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuICpcbiAqIF8udG9JbnRlZ2VyKCczLjInKTtcbiAqIC8vID0+IDNcbiAqL1xuZnVuY3Rpb24gdG9JbnRlZ2VyKHZhbHVlKSB7XG4gIHZhciByZXN1bHQgPSB0b0Zpbml0ZSh2YWx1ZSksXG4gICAgICByZW1haW5kZXIgPSByZXN1bHQgJSAxO1xuXG4gIHJldHVybiByZXN1bHQgPT09IHJlc3VsdCA/IChyZW1haW5kZXIgPyByZXN1bHQgLSByZW1haW5kZXIgOiByZXN1bHQpIDogMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b0ludGVnZXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvdG9JbnRlZ2VyLmpzXG4gKiogbW9kdWxlIGlkID0gNDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnLi9pc0Z1bmN0aW9uJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0JyksXG4gICAgaXNTeW1ib2wgPSByZXF1aXJlKCcuL2lzU3ltYm9sJyk7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b051bWJlcigzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuICogLy8gPT4gSW5maW5pdHlcbiAqXG4gKiBfLnRvTnVtYmVyKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gTkFOO1xuICB9XG4gIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YXIgb3RoZXIgPSBpc0Z1bmN0aW9uKHZhbHVlLnZhbHVlT2YpID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gIH1cbiAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcbiAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOClcbiAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b051bWJlcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC90b051bWJlci5qc1xuICoqIG1vZHVsZSBpZCA9IDQyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIFZ1ZS5qcyB2MS4wLjI2XG4gKiAoYykgMjAxNiBFdmFuIFlvdVxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHNldChvYmosIGtleSwgdmFsKSB7XG4gIGlmIChoYXNPd24ob2JqLCBrZXkpKSB7XG4gICAgb2JqW2tleV0gPSB2YWw7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChvYmouX2lzVnVlKSB7XG4gICAgc2V0KG9iai5fZGF0YSwga2V5LCB2YWwpO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgb2IgPSBvYmouX19vYl9fO1xuICBpZiAoIW9iKSB7XG4gICAgb2JqW2tleV0gPSB2YWw7XG4gICAgcmV0dXJuO1xuICB9XG4gIG9iLmNvbnZlcnQoa2V5LCB2YWwpO1xuICBvYi5kZXAubm90aWZ5KCk7XG4gIGlmIChvYi52bXMpIHtcbiAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuICAgICAgdm0uX3Byb3h5KGtleSk7XG4gICAgICB2bS5fZGlnZXN0KCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogRGVsZXRlIGEgcHJvcGVydHkgYW5kIHRyaWdnZXIgY2hhbmdlIGlmIG5lY2Vzc2FyeS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKi9cblxuZnVuY3Rpb24gZGVsKG9iaiwga2V5KSB7XG4gIGlmICghaGFzT3duKG9iaiwga2V5KSkge1xuICAgIHJldHVybjtcbiAgfVxuICBkZWxldGUgb2JqW2tleV07XG4gIHZhciBvYiA9IG9iai5fX29iX187XG4gIGlmICghb2IpIHtcbiAgICBpZiAob2JqLl9pc1Z1ZSkge1xuICAgICAgZGVsZXRlIG9iai5fZGF0YVtrZXldO1xuICAgICAgb2JqLl9kaWdlc3QoKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIG9iLmRlcC5ub3RpZnkoKTtcbiAgaWYgKG9iLnZtcykge1xuICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG4gICAgICB2bS5fdW5wcm94eShrZXkpO1xuICAgICAgdm0uX2RpZ2VzdCgpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGhhc093bihvYmosIGtleSkge1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIGxpdGVyYWwgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgbGl0ZXJhbFZhbHVlUkUgPSAvXlxccz8odHJ1ZXxmYWxzZXwtP1tcXGRcXC5dK3wnW14nXSonfFwiW15cIl0qXCIpXFxzPyQvO1xuXG5mdW5jdGlvbiBpc0xpdGVyYWwoZXhwKSB7XG4gIHJldHVybiBsaXRlcmFsVmFsdWVSRS50ZXN0KGV4cCk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzdHJpbmcgc3RhcnRzIHdpdGggJCBvciBfXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1Jlc2VydmVkKHN0cikge1xuICB2YXIgYyA9IChzdHIgKyAnJykuY2hhckNvZGVBdCgwKTtcbiAgcmV0dXJuIGMgPT09IDB4MjQgfHwgYyA9PT0gMHg1Rjtcbn1cblxuLyoqXG4gKiBHdWFyZCB0ZXh0IG91dHB1dCwgbWFrZSBzdXJlIHVuZGVmaW5lZCBvdXRwdXRzXG4gKiBlbXB0eSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gX3RvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZS50b1N0cmluZygpO1xufVxuXG4vKipcbiAqIENoZWNrIGFuZCBjb252ZXJ0IHBvc3NpYmxlIG51bWVyaWMgc3RyaW5ncyB0byBudW1iZXJzXG4gKiBiZWZvcmUgc2V0dGluZyBiYWNrIHRvIGRhdGFcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHsqfE51bWJlcn1cbiAqL1xuXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcbiAgICByZXR1cm4gaXNOYU4ocGFyc2VkKSA/IHZhbHVlIDogcGFyc2VkO1xuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBzdHJpbmcgYm9vbGVhbiBsaXRlcmFscyBpbnRvIHJlYWwgYm9vbGVhbnMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7KnxCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIHRvQm9vbGVhbih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09ICd0cnVlJyA/IHRydWUgOiB2YWx1ZSA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogdmFsdWU7XG59XG5cbi8qKlxuICogU3RyaXAgcXVvdGVzIGZyb20gYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmcgfCBmYWxzZX1cbiAqL1xuXG5mdW5jdGlvbiBzdHJpcFF1b3RlcyhzdHIpIHtcbiAgdmFyIGEgPSBzdHIuY2hhckNvZGVBdCgwKTtcbiAgdmFyIGIgPSBzdHIuY2hhckNvZGVBdChzdHIubGVuZ3RoIC0gMSk7XG4gIHJldHVybiBhID09PSBiICYmIChhID09PSAweDIyIHx8IGEgPT09IDB4MjcpID8gc3RyLnNsaWNlKDEsIC0xKSA6IHN0cjtcbn1cblxuLyoqXG4gKiBDYW1lbGl6ZSBhIGh5cGhlbi1kZWxtaXRlZCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbnZhciBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xuXG5mdW5jdGlvbiBjYW1lbGl6ZShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIHRvVXBwZXIpO1xufVxuXG5mdW5jdGlvbiB0b1VwcGVyKF8sIGMpIHtcbiAgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJztcbn1cblxuLyoqXG4gKiBIeXBoZW5hdGUgYSBjYW1lbENhc2Ugc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgaHlwaGVuYXRlUkUgPSAvKFthLXpcXGRdKShbQS1aXSkvZztcblxuZnVuY3Rpb24gaHlwaGVuYXRlKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICckMS0kMicpLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQ29udmVydHMgaHlwaGVuL3VuZGVyc2NvcmUvc2xhc2ggZGVsaW1pdGVyZWQgbmFtZXMgaW50b1xuICogY2FtZWxpemVkIGNsYXNzTmFtZXMuXG4gKlxuICogZS5nLiBteS1jb21wb25lbnQgPT4gTXlDb21wb25lbnRcbiAqICAgICAgc29tZV9lbHNlICAgID0+IFNvbWVFbHNlXG4gKiAgICAgIHNvbWUvY29tcCAgICA9PiBTb21lQ29tcFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstX1xcL10pKFxcdykvZztcblxuZnVuY3Rpb24gY2xhc3NpZnkoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCB0b1VwcGVyKTtcbn1cblxuLyoqXG4gKiBTaW1wbGUgYmluZCwgZmFzdGVyIHRoYW4gbmF0aXZlXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGJpbmQoZm4sIGN0eCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgbCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgcmV0dXJuIGwgPyBsID4gMSA/IGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKSA6IGZuLmNhbGwoY3R4LCBhKSA6IGZuLmNhbGwoY3R4KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGFuIEFycmF5LWxpa2Ugb2JqZWN0IHRvIGEgcmVhbCBBcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5LWxpa2V9IGxpc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRdIC0gc3RhcnQgaW5kZXhcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5cbmZ1bmN0aW9uIHRvQXJyYXkobGlzdCwgc3RhcnQpIHtcbiAgc3RhcnQgPSBzdGFydCB8fCAwO1xuICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoaSk7XG4gIHdoaWxlIChpLS0pIHtcbiAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRvXG4gKiBAcGFyYW0ge09iamVjdH0gZnJvbVxuICovXG5cbmZ1bmN0aW9uIGV4dGVuZCh0bywgZnJvbSkge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGZyb20pO1xuICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgdG9ba2V5c1tpXV0gPSBmcm9tW2tleXNbaV1dO1xuICB9XG4gIHJldHVybiB0bztcbn1cblxuLyoqXG4gKiBRdWljayBvYmplY3QgY2hlY2sgLSB0aGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIHRlbGxcbiAqIE9iamVjdHMgZnJvbSBwcmltaXRpdmUgdmFsdWVzIHdoZW4gd2Uga25vdyB0aGUgdmFsdWVcbiAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc09iamVjdChvYmopIHtcbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBTdHJpY3Qgb2JqZWN0IHR5cGUgY2hlY2suIE9ubHkgcmV0dXJucyB0cnVlXG4gKiBmb3IgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG52YXIgT0JKRUNUX1NUUklORyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSBPQkpFQ1RfU1RSSU5HO1xufVxuXG4vKipcbiAqIEFycmF5IHR5cGUgY2hlY2suXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4vKipcbiAqIERlZmluZSBhIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtlbnVtZXJhYmxlXVxuICovXG5cbmZ1bmN0aW9uIGRlZihvYmosIGtleSwgdmFsLCBlbnVtZXJhYmxlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIHZhbHVlOiB2YWwsXG4gICAgZW51bWVyYWJsZTogISFlbnVtZXJhYmxlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cblxuLyoqXG4gKiBEZWJvdW5jZSBhIGZ1bmN0aW9uIHNvIGl0IG9ubHkgZ2V0cyBjYWxsZWQgYWZ0ZXIgdGhlXG4gKiBpbnB1dCBzdG9wcyBhcnJpdmluZyBhZnRlciB0aGUgZ2l2ZW4gd2FpdCBwZXJpb2QuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY1xuICogQHBhcmFtIHtOdW1iZXJ9IHdhaXRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqL1xuXG5mdW5jdGlvbiBfZGVib3VuY2UoZnVuYywgd2FpdCkge1xuICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG4gIHZhciBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgIHZhciBsYXN0ID0gRGF0ZS5ub3coKSAtIHRpbWVzdGFtcDtcbiAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9XG4gIH07XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgY29udGV4dCA9IHRoaXM7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIGlmICghdGltZW91dCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuXG4vKipcbiAqIE1hbnVhbCBpbmRleE9mIGJlY2F1c2UgaXQncyBzbGlnaHRseSBmYXN0ZXIgdGhhblxuICogbmF0aXZlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICogQHBhcmFtIHsqfSBvYmpcbiAqL1xuXG5mdW5jdGlvbiBpbmRleE9mKGFyciwgb2JqKSB7XG4gIHZhciBpID0gYXJyLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGk7XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG4vKipcbiAqIE1ha2UgYSBjYW5jZWxsYWJsZSB2ZXJzaW9uIG9mIGFuIGFzeW5jIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjYW5jZWxsYWJsZShmbikge1xuICB2YXIgY2IgPSBmdW5jdGlvbiBjYigpIHtcbiAgICBpZiAoIWNiLmNhbmNlbGxlZCkge1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9O1xuICBjYi5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgY2IuY2FuY2VsbGVkID0gdHJ1ZTtcbiAgfTtcbiAgcmV0dXJuIGNiO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxuICogaWYgdGhleSBhcmUgcGxhaW4gb2JqZWN0cywgZG8gdGhleSBoYXZlIHRoZSBzYW1lIHNoYXBlP1xuICpcbiAqIEBwYXJhbSB7Kn0gYVxuICogQHBhcmFtIHsqfSBiXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGxvb3NlRXF1YWwoYSwgYikge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgcmV0dXJuIGEgPT0gYiB8fCAoaXNPYmplY3QoYSkgJiYgaXNPYmplY3QoYikgPyBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYikgOiBmYWxzZSk7XG4gIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG59XG5cbnZhciBoYXNQcm90byA9ICgnX19wcm90b19fJyBpbiB7fSk7XG5cbi8vIEJyb3dzZXIgZW52aXJvbm1lbnQgc25pZmZpbmdcbnZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93KSAhPT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbi8vIGRldGVjdCBkZXZ0b29sc1xudmFyIGRldnRvb2xzID0gaW5Ccm93c2VyICYmIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xuXG4vLyBVQSBzbmlmZmluZyBmb3Igd29ya2luZyBhcm91bmQgYnJvd3Nlci1zcGVjaWZpYyBxdWlya3NcbnZhciBVQSA9IGluQnJvd3NlciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xudmFyIGlzSUUgPSBVQSAmJiBVQS5pbmRleE9mKCd0cmlkZW50JykgPiAwO1xudmFyIGlzSUU5ID0gVUEgJiYgVUEuaW5kZXhPZignbXNpZSA5LjAnKSA+IDA7XG52YXIgaXNBbmRyb2lkID0gVUEgJiYgVUEuaW5kZXhPZignYW5kcm9pZCcpID4gMDtcbnZhciBpc0lvcyA9IFVBICYmIC8oaXBob25lfGlwYWR8aXBvZHxpb3MpL2kudGVzdChVQSk7XG52YXIgaW9zVmVyc2lvbk1hdGNoID0gaXNJb3MgJiYgVUEubWF0Y2goL29zIChbXFxkX10rKS8pO1xudmFyIGlvc1ZlcnNpb24gPSBpb3NWZXJzaW9uTWF0Y2ggJiYgaW9zVmVyc2lvbk1hdGNoWzFdLnNwbGl0KCdfJyk7XG5cbi8vIGRldGVjdGluZyBpT1MgVUlXZWJWaWV3IGJ5IGluZGV4ZWREQlxudmFyIGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcgPSBpb3NWZXJzaW9uICYmIE51bWJlcihpb3NWZXJzaW9uWzBdKSA+PSA5ICYmIE51bWJlcihpb3NWZXJzaW9uWzFdKSA+PSAzICYmICF3aW5kb3cuaW5kZXhlZERCO1xuXG52YXIgdHJhbnNpdGlvblByb3AgPSB1bmRlZmluZWQ7XG52YXIgdHJhbnNpdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xudmFyIGFuaW1hdGlvblByb3AgPSB1bmRlZmluZWQ7XG52YXIgYW5pbWF0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG5cbi8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmdcbmlmIChpbkJyb3dzZXIgJiYgIWlzSUU5KSB7XG4gIHZhciBpc1dlYmtpdFRyYW5zID0gd2luZG93Lm9udHJhbnNpdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQgIT09IHVuZGVmaW5lZDtcbiAgdmFyIGlzV2Via2l0QW5pbSA9IHdpbmRvdy5vbmFuaW1hdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCAhPT0gdW5kZWZpbmVkO1xuICB0cmFuc2l0aW9uUHJvcCA9IGlzV2Via2l0VHJhbnMgPyAnV2Via2l0VHJhbnNpdGlvbicgOiAndHJhbnNpdGlvbic7XG4gIHRyYW5zaXRpb25FbmRFdmVudCA9IGlzV2Via2l0VHJhbnMgPyAnd2Via2l0VHJhbnNpdGlvbkVuZCcgOiAndHJhbnNpdGlvbmVuZCc7XG4gIGFuaW1hdGlvblByb3AgPSBpc1dlYmtpdEFuaW0gPyAnV2Via2l0QW5pbWF0aW9uJyA6ICdhbmltYXRpb24nO1xuICBhbmltYXRpb25FbmRFdmVudCA9IGlzV2Via2l0QW5pbSA/ICd3ZWJraXRBbmltYXRpb25FbmQnIDogJ2FuaW1hdGlvbmVuZCc7XG59XG5cbi8qKlxuICogRGVmZXIgYSB0YXNrIHRvIGV4ZWN1dGUgaXQgYXN5bmNocm9ub3VzbHkuIElkZWFsbHkgdGhpc1xuICogc2hvdWxkIGJlIGV4ZWN1dGVkIGFzIGEgbWljcm90YXNrLCBzbyB3ZSBsZXZlcmFnZVxuICogTXV0YXRpb25PYnNlcnZlciBpZiBpdCdzIGF2YWlsYWJsZSwgYW5kIGZhbGxiYWNrIHRvXG4gKiBzZXRUaW1lb3V0KDApLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4XG4gKi9cblxudmFyIG5leHRUaWNrID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNhbGxiYWNrcyA9IFtdO1xuICB2YXIgcGVuZGluZyA9IGZhbHNlO1xuICB2YXIgdGltZXJGdW5jO1xuICBmdW5jdGlvbiBuZXh0VGlja0hhbmRsZXIoKSB7XG4gICAgcGVuZGluZyA9IGZhbHNlO1xuICAgIHZhciBjb3BpZXMgPSBjYWxsYmFja3Muc2xpY2UoMCk7XG4gICAgY2FsbGJhY2tzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvcGllc1tpXSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnICYmICFoYXNNdXRhdGlvbk9ic2VydmVyQnVnKSB7XG4gICAgdmFyIGNvdW50ZXIgPSAxO1xuICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG5leHRUaWNrSGFuZGxlcik7XG4gICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY291bnRlcik7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0ZXh0Tm9kZSwge1xuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuICAgIH0pO1xuICAgIHRpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvdW50ZXIgPSAoY291bnRlciArIDEpICUgMjtcbiAgICAgIHRleHROb2RlLmRhdGEgPSBjb3VudGVyO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gd2VicGFjayBhdHRlbXB0cyB0byBpbmplY3QgYSBzaGltIGZvciBzZXRJbW1lZGlhdGVcbiAgICAvLyBpZiBpdCBpcyB1c2VkIGFzIGEgZ2xvYmFsLCBzbyB3ZSBoYXZlIHRvIHdvcmsgYXJvdW5kIHRoYXQgdG9cbiAgICAvLyBhdm9pZCBidW5kbGluZyB1bm5lY2Vzc2FyeSBjb2RlLlxuICAgIHZhciBjb250ZXh0ID0gaW5Ccm93c2VyID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB7fTtcbiAgICB0aW1lckZ1bmMgPSBjb250ZXh0LnNldEltbWVkaWF0ZSB8fCBzZXRUaW1lb3V0O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoY2IsIGN0eCkge1xuICAgIHZhciBmdW5jID0gY3R4ID8gZnVuY3Rpb24gKCkge1xuICAgICAgY2IuY2FsbChjdHgpO1xuICAgIH0gOiBjYjtcbiAgICBjYWxsYmFja3MucHVzaChmdW5jKTtcbiAgICBpZiAocGVuZGluZykgcmV0dXJuO1xuICAgIHBlbmRpbmcgPSB0cnVlO1xuICAgIHRpbWVyRnVuYyhuZXh0VGlja0hhbmRsZXIsIDApO1xuICB9O1xufSkoKTtcblxudmFyIF9TZXQgPSB1bmRlZmluZWQ7XG4vKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbmlmICh0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJiBTZXQudG9TdHJpbmcoKS5tYXRjaCgvbmF0aXZlIGNvZGUvKSkge1xuICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS5cbiAgX1NldCA9IFNldDtcbn0gZWxzZSB7XG4gIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy5cbiAgX1NldCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH07XG4gIF9TZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgdGhpcy5zZXRba2V5XSA9IDE7XG4gIH07XG4gIF9TZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gQ2FjaGUobGltaXQpIHtcbiAgdGhpcy5zaXplID0gMDtcbiAgdGhpcy5saW1pdCA9IGxpbWl0O1xuICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2tleW1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5cbnZhciBwID0gQ2FjaGUucHJvdG90eXBlO1xuXG4vKipcbiAqIFB1dCA8dmFsdWU+IGludG8gdGhlIGNhY2hlIGFzc29jaWF0ZWQgd2l0aCA8a2V5Pi5cbiAqIFJldHVybnMgdGhlIGVudHJ5IHdoaWNoIHdhcyByZW1vdmVkIHRvIG1ha2Ugcm9vbSBmb3JcbiAqIHRoZSBuZXcgZW50cnkuIE90aGVyd2lzZSB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG4gKiAoaS5lLiBpZiB0aGVyZSB3YXMgZW5vdWdoIHJvb20gYWxyZWFkeSkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7RW50cnl8dW5kZWZpbmVkfVxuICovXG5cbnAucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgdmFyIHJlbW92ZWQ7XG5cbiAgdmFyIGVudHJ5ID0gdGhpcy5nZXQoa2V5LCB0cnVlKTtcbiAgaWYgKCFlbnRyeSkge1xuICAgIGlmICh0aGlzLnNpemUgPT09IHRoaXMubGltaXQpIHtcbiAgICAgIHJlbW92ZWQgPSB0aGlzLnNoaWZ0KCk7XG4gICAgfVxuICAgIGVudHJ5ID0ge1xuICAgICAga2V5OiBrZXlcbiAgICB9O1xuICAgIHRoaXMuX2tleW1hcFtrZXldID0gZW50cnk7XG4gICAgaWYgKHRoaXMudGFpbCkge1xuICAgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7XG4gICAgICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oZWFkID0gZW50cnk7XG4gICAgfVxuICAgIHRoaXMudGFpbCA9IGVudHJ5O1xuICAgIHRoaXMuc2l6ZSsrO1xuICB9XG4gIGVudHJ5LnZhbHVlID0gdmFsdWU7XG5cbiAgcmV0dXJuIHJlbW92ZWQ7XG59O1xuXG4vKipcbiAqIFB1cmdlIHRoZSBsZWFzdCByZWNlbnRseSB1c2VkIChvbGRlc3QpIGVudHJ5IGZyb20gdGhlXG4gKiBjYWNoZS4gUmV0dXJucyB0aGUgcmVtb3ZlZCBlbnRyeSBvciB1bmRlZmluZWQgaWYgdGhlXG4gKiBjYWNoZSB3YXMgZW1wdHkuXG4gKi9cblxucC5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGVudHJ5ID0gdGhpcy5oZWFkO1xuICBpZiAoZW50cnkpIHtcbiAgICB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV3ZXI7XG4gICAgdGhpcy5oZWFkLm9sZGVyID0gdW5kZWZpbmVkO1xuICAgIGVudHJ5Lm5ld2VyID0gZW50cnkub2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fa2V5bWFwW2VudHJ5LmtleV0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zaXplLS07XG4gIH1cbiAgcmV0dXJuIGVudHJ5O1xufTtcblxuLyoqXG4gKiBHZXQgYW5kIHJlZ2lzdGVyIHJlY2VudCB1c2Ugb2YgPGtleT4uIFJldHVybnMgdGhlIHZhbHVlXG4gKiBhc3NvY2lhdGVkIHdpdGggPGtleT4gb3IgdW5kZWZpbmVkIGlmIG5vdCBpbiBjYWNoZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge0Jvb2xlYW59IHJldHVybkVudHJ5XG4gKiBAcmV0dXJuIHtFbnRyeXwqfVxuICovXG5cbnAuZ2V0ID0gZnVuY3Rpb24gKGtleSwgcmV0dXJuRW50cnkpIHtcbiAgdmFyIGVudHJ5ID0gdGhpcy5fa2V5bWFwW2tleV07XG4gIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gIGlmIChlbnRyeSA9PT0gdGhpcy50YWlsKSB7XG4gICAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcbiAgfVxuICAvLyBIRUFELS0tLS0tLS0tLS0tLS1UQUlMXG4gIC8vICAgPC5vbGRlciAgIC5uZXdlcj5cbiAgLy8gIDwtLS0gYWRkIGRpcmVjdGlvbiAtLVxuICAvLyAgIEEgIEIgIEMgIDxEPiAgRVxuICBpZiAoZW50cnkubmV3ZXIpIHtcbiAgICBpZiAoZW50cnkgPT09IHRoaXMuaGVhZCkge1xuICAgICAgdGhpcy5oZWFkID0gZW50cnkubmV3ZXI7XG4gICAgfVxuICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7IC8vIEMgPC0tIEUuXG4gIH1cbiAgaWYgKGVudHJ5Lm9sZGVyKSB7XG4gICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjsgLy8gQy4gLS0+IEVcbiAgfVxuICBlbnRyeS5uZXdlciA9IHVuZGVmaW5lZDsgLy8gRCAtLXhcbiAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7IC8vIEQuIC0tPiBFXG4gIGlmICh0aGlzLnRhaWwpIHtcbiAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTsgLy8gRS4gPC0tIERcbiAgfVxuICB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcbn07XG5cbnZhciBjYWNoZSQxID0gbmV3IENhY2hlKDEwMDApO1xudmFyIGZpbHRlclRva2VuUkUgPSAvW15cXHMnXCJdK3wnW14nXSonfFwiW15cIl0qXCIvZztcbnZhciByZXNlcnZlZEFyZ1JFID0gL15pbiR8Xi0/XFxkKy87XG5cbi8qKlxuICogUGFyc2VyIHN0YXRlXG4gKi9cblxudmFyIHN0cjtcbnZhciBkaXI7XG52YXIgYztcbnZhciBwcmV2O1xudmFyIGk7XG52YXIgbDtcbnZhciBsYXN0RmlsdGVySW5kZXg7XG52YXIgaW5TaW5nbGU7XG52YXIgaW5Eb3VibGU7XG52YXIgY3VybHk7XG52YXIgc3F1YXJlO1xudmFyIHBhcmVuO1xuLyoqXG4gKiBQdXNoIGEgZmlsdGVyIHRvIHRoZSBjdXJyZW50IGRpcmVjdGl2ZSBvYmplY3RcbiAqL1xuXG5mdW5jdGlvbiBwdXNoRmlsdGVyKCkge1xuICB2YXIgZXhwID0gc3RyLnNsaWNlKGxhc3RGaWx0ZXJJbmRleCwgaSkudHJpbSgpO1xuICB2YXIgZmlsdGVyO1xuICBpZiAoZXhwKSB7XG4gICAgZmlsdGVyID0ge307XG4gICAgdmFyIHRva2VucyA9IGV4cC5tYXRjaChmaWx0ZXJUb2tlblJFKTtcbiAgICBmaWx0ZXIubmFtZSA9IHRva2Vuc1swXTtcbiAgICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZpbHRlci5hcmdzID0gdG9rZW5zLnNsaWNlKDEpLm1hcChwcm9jZXNzRmlsdGVyQXJnKTtcbiAgICB9XG4gIH1cbiAgaWYgKGZpbHRlcikge1xuICAgIChkaXIuZmlsdGVycyA9IGRpci5maWx0ZXJzIHx8IFtdKS5wdXNoKGZpbHRlcik7XG4gIH1cbiAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gYXJndW1lbnQgaXMgZHluYW1pYyBhbmQgc3RyaXAgcXVvdGVzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhcmdcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzRmlsdGVyQXJnKGFyZykge1xuICBpZiAocmVzZXJ2ZWRBcmdSRS50ZXN0KGFyZykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IHRvTnVtYmVyKGFyZyksXG4gICAgICBkeW5hbWljOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMoYXJnKTtcbiAgICB2YXIgZHluYW1pYyA9IHN0cmlwcGVkID09PSBhcmc7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBkeW5hbWljID8gYXJnIDogc3RyaXBwZWQsXG4gICAgICBkeW5hbWljOiBkeW5hbWljXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIGEgZGlyZWN0aXZlIHZhbHVlIGFuZCBleHRyYWN0IHRoZSBleHByZXNzaW9uXG4gKiBhbmQgaXRzIGZpbHRlcnMgaW50byBhIGRlc2NyaXB0b3IuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBcImEgKyAxIHwgdXBwZXJjYXNlXCIgd2lsbCB5aWVsZDpcbiAqIHtcbiAqICAgZXhwcmVzc2lvbjogJ2EgKyAxJyxcbiAqICAgZmlsdGVyczogW1xuICogICAgIHsgbmFtZTogJ3VwcGVyY2FzZScsIGFyZ3M6IG51bGwgfVxuICogICBdXG4gKiB9XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZURpcmVjdGl2ZShzKSB7XG4gIHZhciBoaXQgPSBjYWNoZSQxLmdldChzKTtcbiAgaWYgKGhpdCkge1xuICAgIHJldHVybiBoaXQ7XG4gIH1cblxuICAvLyByZXNldCBwYXJzZXIgc3RhdGVcbiAgc3RyID0gcztcbiAgaW5TaW5nbGUgPSBpbkRvdWJsZSA9IGZhbHNlO1xuICBjdXJseSA9IHNxdWFyZSA9IHBhcmVuID0gMDtcbiAgbGFzdEZpbHRlckluZGV4ID0gMDtcbiAgZGlyID0ge307XG5cbiAgZm9yIChpID0gMCwgbCA9IHN0ci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBwcmV2ID0gYztcbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgaWYgKGluU2luZ2xlKSB7XG4gICAgICAvLyBjaGVjayBzaW5nbGUgcXVvdGVcbiAgICAgIGlmIChjID09PSAweDI3ICYmIHByZXYgIT09IDB4NUMpIGluU2luZ2xlID0gIWluU2luZ2xlO1xuICAgIH0gZWxzZSBpZiAoaW5Eb3VibGUpIHtcbiAgICAgIC8vIGNoZWNrIGRvdWJsZSBxdW90ZVxuICAgICAgaWYgKGMgPT09IDB4MjIgJiYgcHJldiAhPT0gMHg1QykgaW5Eb3VibGUgPSAhaW5Eb3VibGU7XG4gICAgfSBlbHNlIGlmIChjID09PSAweDdDICYmIC8vIHBpcGVcbiAgICBzdHIuY2hhckNvZGVBdChpICsgMSkgIT09IDB4N0MgJiYgc3RyLmNoYXJDb2RlQXQoaSAtIDEpICE9PSAweDdDKSB7XG4gICAgICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuICAgICAgICAvLyBmaXJzdCBmaWx0ZXIsIGVuZCBvZiBleHByZXNzaW9uXG4gICAgICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuICAgICAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBhbHJlYWR5IGhhcyBmaWx0ZXJcbiAgICAgICAgcHVzaEZpbHRlcigpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgY2FzZSAweDIyOlxuICAgICAgICAgIGluRG91YmxlID0gdHJ1ZTticmVhazsgLy8gXCJcbiAgICAgICAgY2FzZSAweDI3OlxuICAgICAgICAgIGluU2luZ2xlID0gdHJ1ZTticmVhazsgLy8gJ1xuICAgICAgICBjYXNlIDB4Mjg6XG4gICAgICAgICAgcGFyZW4rKzticmVhazsgLy8gKFxuICAgICAgICBjYXNlIDB4Mjk6XG4gICAgICAgICAgcGFyZW4tLTticmVhazsgLy8gKVxuICAgICAgICBjYXNlIDB4NUI6XG4gICAgICAgICAgc3F1YXJlKys7YnJlYWs7IC8vIFtcbiAgICAgICAgY2FzZSAweDVEOlxuICAgICAgICAgIHNxdWFyZS0tO2JyZWFrOyAvLyBdXG4gICAgICAgIGNhc2UgMHg3QjpcbiAgICAgICAgICBjdXJseSsrO2JyZWFrOyAvLyB7XG4gICAgICAgIGNhc2UgMHg3RDpcbiAgICAgICAgICBjdXJseS0tO2JyZWFrOyAvLyB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcbiAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG4gIH0gZWxzZSBpZiAobGFzdEZpbHRlckluZGV4ICE9PSAwKSB7XG4gICAgcHVzaEZpbHRlcigpO1xuICB9XG5cbiAgY2FjaGUkMS5wdXQocywgZGlyKTtcbiAgcmV0dXJuIGRpcjtcbn1cblxudmFyIGRpcmVjdGl2ZSA9IE9iamVjdC5mcmVlemUoe1xuICBwYXJzZURpcmVjdGl2ZTogcGFyc2VEaXJlY3RpdmVcbn0pO1xuXG52YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2c7XG52YXIgY2FjaGUgPSB1bmRlZmluZWQ7XG52YXIgdGFnUkUgPSB1bmRlZmluZWQ7XG52YXIgaHRtbFJFID0gdW5kZWZpbmVkO1xuLyoqXG4gKiBFc2NhcGUgYSBzdHJpbmcgc28gaXQgY2FuIGJlIHVzZWQgaW4gYSBSZWdFeHBcbiAqIGNvbnN0cnVjdG9yLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqL1xuXG5mdW5jdGlvbiBlc2NhcGVSZWdleChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKTtcbn1cblxuZnVuY3Rpb24gY29tcGlsZVJlZ2V4KCkge1xuICB2YXIgb3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzBdKTtcbiAgdmFyIGNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMV0pO1xuICB2YXIgdW5zYWZlT3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzBdKTtcbiAgdmFyIHVuc2FmZUNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMV0pO1xuICB0YWdSRSA9IG5ldyBSZWdFeHAodW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnfCcgKyBvcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyBjbG9zZSwgJ2cnKTtcbiAgaHRtbFJFID0gbmV3IFJlZ0V4cCgnXicgKyB1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICckJyk7XG4gIC8vIHJlc2V0IGNhY2hlXG4gIGNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgdGVtcGxhdGUgdGV4dCBzdHJpbmcgaW50byBhbiBhcnJheSBvZiB0b2tlbnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAqIEByZXR1cm4ge0FycmF5PE9iamVjdD4gfCBudWxsfVxuICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHR5cGVcbiAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB2YWx1ZVxuICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaHRtbF1cbiAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW29uZVRpbWVdXG4gKi9cblxuZnVuY3Rpb24gcGFyc2VUZXh0KHRleHQpIHtcbiAgaWYgKCFjYWNoZSkge1xuICAgIGNvbXBpbGVSZWdleCgpO1xuICB9XG4gIHZhciBoaXQgPSBjYWNoZS5nZXQodGV4dCk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG4gIGlmICghdGFnUkUudGVzdCh0ZXh0KSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHZhciB0b2tlbnMgPSBbXTtcbiAgdmFyIGxhc3RJbmRleCA9IHRhZ1JFLmxhc3RJbmRleCA9IDA7XG4gIHZhciBtYXRjaCwgaW5kZXgsIGh0bWwsIHZhbHVlLCBmaXJzdCwgb25lVGltZTtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgd2hpbGUgKG1hdGNoID0gdGFnUkUuZXhlYyh0ZXh0KSkge1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBpbmRleCA9IG1hdGNoLmluZGV4O1xuICAgIC8vIHB1c2ggdGV4dCB0b2tlblxuICAgIGlmIChpbmRleCA+IGxhc3RJbmRleCkge1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgsIGluZGV4KVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIHRhZyB0b2tlblxuICAgIGh0bWwgPSBodG1sUkUudGVzdChtYXRjaFswXSk7XG4gICAgdmFsdWUgPSBodG1sID8gbWF0Y2hbMV0gOiBtYXRjaFsyXTtcbiAgICBmaXJzdCA9IHZhbHVlLmNoYXJDb2RlQXQoMCk7XG4gICAgb25lVGltZSA9IGZpcnN0ID09PSA0MjsgLy8gKlxuICAgIHZhbHVlID0gb25lVGltZSA/IHZhbHVlLnNsaWNlKDEpIDogdmFsdWU7XG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgdGFnOiB0cnVlLFxuICAgICAgdmFsdWU6IHZhbHVlLnRyaW0oKSxcbiAgICAgIGh0bWw6IGh0bWwsXG4gICAgICBvbmVUaW1lOiBvbmVUaW1lXG4gICAgfSk7XG4gICAgbGFzdEluZGV4ID0gaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG4gIH1cbiAgaWYgKGxhc3RJbmRleCA8IHRleHQubGVuZ3RoKSB7XG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4KVxuICAgIH0pO1xuICB9XG4gIGNhY2hlLnB1dCh0ZXh0LCB0b2tlbnMpO1xuICByZXR1cm4gdG9rZW5zO1xufVxuXG4vKipcbiAqIEZvcm1hdCBhIGxpc3Qgb2YgdG9rZW5zIGludG8gYW4gZXhwcmVzc2lvbi5cbiAqIGUuZy4gdG9rZW5zIHBhcnNlZCBmcm9tICdhIHt7Yn19IGMnIGNhbiBiZSBzZXJpYWxpemVkXG4gKiBpbnRvIG9uZSBzaW5nbGUgZXhwcmVzc2lvbiBhcyAnXCJhIFwiICsgYiArIFwiIGNcIicuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gdG9rZW5zXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHRva2Vuc1RvRXhwKHRva2Vucywgdm0pIHtcbiAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG4gICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICByZXR1cm4gZm9ybWF0VG9rZW4odG9rZW4sIHZtKTtcbiAgICB9KS5qb2luKCcrJyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2Vuc1swXSwgdm0sIHRydWUpO1xuICB9XG59XG5cbi8qKlxuICogRm9ybWF0IGEgc2luZ2xlIHRva2VuLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3NpbmdsZV1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRUb2tlbih0b2tlbiwgdm0sIHNpbmdsZSkge1xuICByZXR1cm4gdG9rZW4udGFnID8gdG9rZW4ub25lVGltZSAmJiB2bSA/ICdcIicgKyB2bS4kZXZhbCh0b2tlbi52YWx1ZSkgKyAnXCInIDogaW5saW5lRmlsdGVycyh0b2tlbi52YWx1ZSwgc2luZ2xlKSA6ICdcIicgKyB0b2tlbi52YWx1ZSArICdcIic7XG59XG5cbi8qKlxuICogRm9yIGFuIGF0dHJpYnV0ZSB3aXRoIG11bHRpcGxlIGludGVycG9sYXRpb24gdGFncyxcbiAqIGUuZy4gYXR0cj1cInNvbWUte3t0aGluZyB8IGZpbHRlcn19XCIsIGluIG9yZGVyIHRvIGNvbWJpbmVcbiAqIHRoZSB3aG9sZSB0aGluZyBpbnRvIGEgc2luZ2xlIHdhdGNoYWJsZSBleHByZXNzaW9uLCB3ZVxuICogaGF2ZSB0byBpbmxpbmUgdGhvc2UgZmlsdGVycy4gVGhpcyBmdW5jdGlvbiBkb2VzIGV4YWN0bHlcbiAqIHRoYXQuIFRoaXMgaXMgYSBiaXQgaGFja3kgYnV0IGl0IGF2b2lkcyBoZWF2eSBjaGFuZ2VzXG4gKiB0byBkaXJlY3RpdmUgcGFyc2VyIGFuZCB3YXRjaGVyIG1lY2hhbmlzbS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNpbmdsZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbnZhciBmaWx0ZXJSRSA9IC9bXnxdXFx8W158XS87XG5mdW5jdGlvbiBpbmxpbmVGaWx0ZXJzKGV4cCwgc2luZ2xlKSB7XG4gIGlmICghZmlsdGVyUkUudGVzdChleHApKSB7XG4gICAgcmV0dXJuIHNpbmdsZSA/IGV4cCA6ICcoJyArIGV4cCArICcpJztcbiAgfSBlbHNlIHtcbiAgICB2YXIgZGlyID0gcGFyc2VEaXJlY3RpdmUoZXhwKTtcbiAgICBpZiAoIWRpci5maWx0ZXJzKSB7XG4gICAgICByZXR1cm4gJygnICsgZXhwICsgJyknO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ3RoaXMuX2FwcGx5RmlsdGVycygnICsgZGlyLmV4cHJlc3Npb24gKyAvLyB2YWx1ZVxuICAgICAgJyxudWxsLCcgKyAvLyBvbGRWYWx1ZSAobnVsbCBmb3IgcmVhZClcbiAgICAgIEpTT04uc3RyaW5naWZ5KGRpci5maWx0ZXJzKSArIC8vIGZpbHRlciBkZXNjcmlwdG9yc1xuICAgICAgJyxmYWxzZSknOyAvLyB3cml0ZT9cbiAgICB9XG4gIH1cbn1cblxudmFyIHRleHQgPSBPYmplY3QuZnJlZXplKHtcbiAgY29tcGlsZVJlZ2V4OiBjb21waWxlUmVnZXgsXG4gIHBhcnNlVGV4dDogcGFyc2VUZXh0LFxuICB0b2tlbnNUb0V4cDogdG9rZW5zVG9FeHBcbn0pO1xuXG52YXIgZGVsaW1pdGVycyA9IFsne3snLCAnfX0nXTtcbnZhciB1bnNhZmVEZWxpbWl0ZXJzID0gWyd7e3snLCAnfX19J107XG5cbnZhciBjb25maWcgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gcHJpbnQgZGVidWcgbWVzc2FnZXMuXG4gICAqIEFsc28gZW5hYmxlcyBzdGFjayB0cmFjZSBmb3Igd2FybmluZ3MuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cblxuICBkZWJ1ZzogZmFsc2UsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3VwcHJlc3Mgd2FybmluZ3MuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cblxuICBzaWxlbnQ6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHVzZSBhc3luYyByZW5kZXJpbmcuXG4gICAqL1xuXG4gIGFzeW5jOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHdhcm4gYWdhaW5zdCBlcnJvcnMgY2F1Z2h0IHdoZW4gZXZhbHVhdGluZ1xuICAgKiBleHByZXNzaW9ucy5cbiAgICovXG5cbiAgd2FybkV4cHJlc3Npb25FcnJvcnM6IHRydWUsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gYWxsb3cgZGV2dG9vbHMgaW5zcGVjdGlvbi5cbiAgICogRGlzYWJsZWQgYnkgZGVmYXVsdCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAgICovXG5cbiAgZGV2dG9vbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG5cbiAgLyoqXG4gICAqIEludGVybmFsIGZsYWcgdG8gaW5kaWNhdGUgdGhlIGRlbGltaXRlcnMgaGF2ZSBiZWVuXG4gICAqIGNoYW5nZWQuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cblxuICBfZGVsaW1pdGVyc0NoYW5nZWQ6IHRydWUsXG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgYXNzZXQgdHlwZXMgdGhhdCBhIGNvbXBvbmVudCBjYW4gb3duLlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXl9XG4gICAqL1xuXG4gIF9hc3NldFR5cGVzOiBbJ2NvbXBvbmVudCcsICdkaXJlY3RpdmUnLCAnZWxlbWVudERpcmVjdGl2ZScsICdmaWx0ZXInLCAndHJhbnNpdGlvbicsICdwYXJ0aWFsJ10sXG5cbiAgLyoqXG4gICAqIHByb3AgYmluZGluZyBtb2Rlc1xuICAgKi9cblxuICBfcHJvcEJpbmRpbmdNb2Rlczoge1xuICAgIE9ORV9XQVk6IDAsXG4gICAgVFdPX1dBWTogMSxcbiAgICBPTkVfVElNRTogMlxuICB9LFxuXG4gIC8qKlxuICAgKiBNYXggY2lyY3VsYXIgdXBkYXRlcyBhbGxvd2VkIGluIGEgYmF0Y2hlciBmbHVzaCBjeWNsZS5cbiAgICovXG5cbiAgX21heFVwZGF0ZUNvdW50OiAxMDBcblxufSwge1xuICBkZWxpbWl0ZXJzOiB7IC8qKlxuICAgICAgICAgICAgICAgICAqIEludGVycG9sYXRpb24gZGVsaW1pdGVycy4gQ2hhbmdpbmcgdGhlc2Ugd291bGQgdHJpZ2dlclxuICAgICAgICAgICAgICAgICAqIHRoZSB0ZXh0IHBhcnNlciB0byByZS1jb21waWxlIHRoZSByZWd1bGFyIGV4cHJlc3Npb25zLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHR5cGUge0FycmF5PFN0cmluZz59XG4gICAgICAgICAgICAgICAgICovXG5cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBkZWxpbWl0ZXJzO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG4gICAgICBkZWxpbWl0ZXJzID0gdmFsO1xuICAgICAgY29tcGlsZVJlZ2V4KCk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICB1bnNhZmVEZWxpbWl0ZXJzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdW5zYWZlRGVsaW1pdGVycztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgdW5zYWZlRGVsaW1pdGVycyA9IHZhbDtcbiAgICAgIGNvbXBpbGVSZWdleCgpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSk7XG5cbnZhciB3YXJuID0gdW5kZWZpbmVkO1xudmFyIGZvcm1hdENvbXBvbmVudE5hbWUgPSB1bmRlZmluZWQ7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7XG5cbiAgICB3YXJuID0gZnVuY3Rpb24gKG1zZywgdm0pIHtcbiAgICAgIGlmIChoYXNDb25zb2xlICYmICFjb25maWcuc2lsZW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tWdWUgd2Fybl06ICcgKyBtc2cgKyAodm0gPyBmb3JtYXRDb21wb25lbnROYW1lKHZtKSA6ICcnKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZvcm1hdENvbXBvbmVudE5hbWUgPSBmdW5jdGlvbiAodm0pIHtcbiAgICAgIHZhciBuYW1lID0gdm0uX2lzVnVlID8gdm0uJG9wdGlvbnMubmFtZSA6IHZtLm5hbWU7XG4gICAgICByZXR1cm4gbmFtZSA/ICcgKGZvdW5kIGluIGNvbXBvbmVudDogPCcgKyBoeXBoZW5hdGUobmFtZSkgKyAnPiknIDogJyc7XG4gICAgfTtcbiAgfSkoKTtcbn1cblxuLyoqXG4gKiBBcHBlbmQgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiBhcHBlbmRXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgfSwgdm0sIGNiKTtcbn1cblxuLyoqXG4gKiBJbnNlcnRCZWZvcmUgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiBiZWZvcmVXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuICB9LCB2bSwgY2IpO1xufVxuXG4vKipcbiAqIFJlbW92ZSB3aXRoIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlV2l0aFRyYW5zaXRpb24oZWwsIHZtLCBjYikge1xuICBhcHBseVRyYW5zaXRpb24oZWwsIC0xLCBmdW5jdGlvbiAoKSB7XG4gICAgcmVtb3ZlKGVsKTtcbiAgfSwgdm0sIGNiKTtcbn1cblxuLyoqXG4gKiBBcHBseSB0cmFuc2l0aW9ucyB3aXRoIGFuIG9wZXJhdGlvbiBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge051bWJlcn0gZGlyZWN0aW9uXG4gKiAgICAgICAgICAgICAgICAgIDE6IGVudGVyXG4gKiAgICAgICAgICAgICAgICAgLTE6IGxlYXZlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHRoZSBhY3R1YWwgRE9NIG9wZXJhdGlvblxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYXBwbHlUcmFuc2l0aW9uKGVsLCBkaXJlY3Rpb24sIG9wLCB2bSwgY2IpIHtcbiAgdmFyIHRyYW5zaXRpb24gPSBlbC5fX3ZfdHJhbnM7XG4gIGlmICghdHJhbnNpdGlvbiB8fFxuICAvLyBza2lwIGlmIHRoZXJlIGFyZSBubyBqcyBob29rcyBhbmQgQ1NTIHRyYW5zaXRpb24gaXNcbiAgLy8gbm90IHN1cHBvcnRlZFxuICAhdHJhbnNpdGlvbi5ob29rcyAmJiAhdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG4gIC8vIHNraXAgdHJhbnNpdGlvbnMgZm9yIGluaXRpYWwgY29tcGlsZVxuICAhdm0uX2lzQ29tcGlsZWQgfHxcbiAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIG1hbmlwdWxhdGVkIGJ5IGEgcGFyZW50IGRpcmVjdGl2ZVxuICAvLyBkdXJpbmcgdGhlIHBhcmVudCdzIGNvbXBpbGF0aW9uIHBoYXNlLCBza2lwIHRoZVxuICAvLyBhbmltYXRpb24uXG4gIHZtLiRwYXJlbnQgJiYgIXZtLiRwYXJlbnQuX2lzQ29tcGlsZWQpIHtcbiAgICBvcCgpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGFjdGlvbiA9IGRpcmVjdGlvbiA+IDAgPyAnZW50ZXInIDogJ2xlYXZlJztcbiAgdHJhbnNpdGlvblthY3Rpb25dKG9wLCBjYik7XG59XG5cbnZhciB0cmFuc2l0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGFwcGVuZFdpdGhUcmFuc2l0aW9uOiBhcHBlbmRXaXRoVHJhbnNpdGlvbixcbiAgYmVmb3JlV2l0aFRyYW5zaXRpb246IGJlZm9yZVdpdGhUcmFuc2l0aW9uLFxuICByZW1vdmVXaXRoVHJhbnNpdGlvbjogcmVtb3ZlV2l0aFRyYW5zaXRpb24sXG4gIGFwcGx5VHJhbnNpdGlvbjogYXBwbHlUcmFuc2l0aW9uXG59KTtcblxuLyoqXG4gKiBRdWVyeSBhbiBlbGVtZW50IHNlbGVjdG9yIGlmIGl0J3Mgbm90IGFuIGVsZW1lbnQgYWxyZWFkeS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuICogQHJldHVybiB7RWxlbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBxdWVyeShlbCkge1xuICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuICAgIHZhciBzZWxlY3RvciA9IGVsO1xuICAgIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XG4gICAgaWYgKCFlbCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdDYW5ub3QgZmluZCBlbGVtZW50OiAnICsgc2VsZWN0b3IpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cbiAqIE5vdGU6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyBzaG91bGQgd29yayBoZXJlXG4gKiBidXQgYWx3YXlzIHJldHVybnMgZmFsc2UgZm9yIGNvbW1lbnQgbm9kZXMgaW4gcGhhbnRvbWpzLFxuICogbWFraW5nIHVuaXQgdGVzdHMgZGlmZmljdWx0LiBUaGlzIGlzIGZpeGVkIGJ5IGRvaW5nIHRoZVxuICogY29udGFpbnMoKSBjaGVjayBvbiB0aGUgbm9kZSdzIHBhcmVudE5vZGUgaW5zdGVhZCBvZlxuICogdGhlIG5vZGUgaXRzZWxmLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpbkRvYyhub2RlKSB7XG4gIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuICB2YXIgZG9jID0gbm9kZS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgcmV0dXJuIGRvYyA9PT0gbm9kZSB8fCBkb2MgPT09IHBhcmVudCB8fCAhIShwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09PSAxICYmIGRvYy5jb250YWlucyhwYXJlbnQpKTtcbn1cblxuLyoqXG4gKiBHZXQgYW5kIHJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSBhIG5vZGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gX2F0dHJcbiAqL1xuXG5mdW5jdGlvbiBnZXRBdHRyKG5vZGUsIF9hdHRyKSB7XG4gIHZhciB2YWwgPSBub2RlLmdldEF0dHJpYnV0ZShfYXR0cik7XG4gIGlmICh2YWwgIT09IG51bGwpIHtcbiAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShfYXR0cik7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiBHZXQgYW4gYXR0cmlidXRlIHdpdGggY29sb24gb3Igdi1iaW5kOiBwcmVmaXguXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7U3RyaW5nfG51bGx9XG4gKi9cblxuZnVuY3Rpb24gZ2V0QmluZEF0dHIobm9kZSwgbmFtZSkge1xuICB2YXIgdmFsID0gZ2V0QXR0cihub2RlLCAnOicgKyBuYW1lKTtcbiAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgIHZhbCA9IGdldEF0dHIobm9kZSwgJ3YtYmluZDonICsgbmFtZSk7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiBDaGVjayB0aGUgcHJlc2VuY2Ugb2YgYSBiaW5kIGF0dHJpYnV0ZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGhhc0JpbmRBdHRyKG5vZGUsIG5hbWUpIHtcbiAgcmV0dXJuIG5vZGUuaGFzQXR0cmlidXRlKG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCc6JyArIG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCd2LWJpbmQ6JyArIG5hbWUpO1xufVxuXG4vKipcbiAqIEluc2VydCBlbCBiZWZvcmUgdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqL1xuXG5mdW5jdGlvbiBiZWZvcmUoZWwsIHRhcmdldCkge1xuICB0YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWwsIHRhcmdldCk7XG59XG5cbi8qKlxuICogSW5zZXJ0IGVsIGFmdGVyIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZnVuY3Rpb24gYWZ0ZXIoZWwsIHRhcmdldCkge1xuICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQubmV4dFNpYmxpbmcpO1xuICB9IGVsc2Uge1xuICAgIHRhcmdldC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGVsKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBlbCBmcm9tIERPTVxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmUoZWwpIHtcbiAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG59XG5cbi8qKlxuICogUHJlcGVuZCBlbCB0byB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICovXG5cbmZ1bmN0aW9uIHByZXBlbmQoZWwsIHRhcmdldCkge1xuICBpZiAodGFyZ2V0LmZpcnN0Q2hpbGQpIHtcbiAgICBiZWZvcmUoZWwsIHRhcmdldC5maXJzdENoaWxkKTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuICB9XG59XG5cbi8qKlxuICogUmVwbGFjZSB0YXJnZXQgd2l0aCBlbFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZnVuY3Rpb24gcmVwbGFjZSh0YXJnZXQsIGVsKSB7XG4gIHZhciBwYXJlbnQgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkge1xuICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQoZWwsIHRhcmdldCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXG4gKi9cblxuZnVuY3Rpb24gb24oZWwsIGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSkge1xuICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSk7XG59XG5cbi8qKlxuICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZnVuY3Rpb24gb2ZmKGVsLCBldmVudCwgY2IpIHtcbiAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2IpO1xufVxuXG4vKipcbiAqIEZvciBJRTkgY29tcGF0OiB3aGVuIGJvdGggY2xhc3MgYW5kIDpjbGFzcyBhcmUgcHJlc2VudFxuICogZ2V0QXR0cmlidXRlKCdjbGFzcycpIHJldHVybnMgd3JvbmcgdmFsdWUuLi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZ2V0Q2xhc3MoZWwpIHtcbiAgdmFyIGNsYXNzbmFtZSA9IGVsLmNsYXNzTmFtZTtcbiAgaWYgKHR5cGVvZiBjbGFzc25hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgY2xhc3NuYW1lID0gY2xhc3NuYW1lLmJhc2VWYWwgfHwgJyc7XG4gIH1cbiAgcmV0dXJuIGNsYXNzbmFtZTtcbn1cblxuLyoqXG4gKiBJbiBJRTksIHNldEF0dHJpYnV0ZSgnY2xhc3MnKSB3aWxsIHJlc3VsdCBpbiBlbXB0eSBjbGFzc1xuICogaWYgdGhlIGVsZW1lbnQgYWxzbyBoYXMgdGhlIDpjbGFzcyBhdHRyaWJ1dGU7IEhvd2V2ZXIgaW5cbiAqIFBoYW50b21KUywgc2V0dGluZyBgY2xhc3NOYW1lYCBkb2VzIG5vdCB3b3JrIG9uIFNWRyBlbGVtZW50cy4uLlxuICogU28gd2UgaGF2ZSB0byBkbyBhIGNvbmRpdGlvbmFsIGNoZWNrIGhlcmUuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuICovXG5cbmZ1bmN0aW9uIHNldENsYXNzKGVsLCBjbHMpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc0lFOSAmJiAhL3N2ZyQvLnRlc3QoZWwubmFtZXNwYWNlVVJJKSkge1xuICAgIGVsLmNsYXNzTmFtZSA9IGNscztcbiAgfSBlbHNlIHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xzKTtcbiAgfVxufVxuXG4vKipcbiAqIEFkZCBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuICovXG5cbmZ1bmN0aW9uIGFkZENsYXNzKGVsLCBjbHMpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuICAgIGlmIChjdXIuaW5kZXhPZignICcgKyBjbHMgKyAnICcpIDwgMCkge1xuICAgICAgc2V0Q2xhc3MoZWwsIChjdXIgKyBjbHMpLnRyaW0oKSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xzXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNscykge1xuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XG4gICAgdmFyIHRhciA9ICcgJyArIGNscyArICcgJztcbiAgICB3aGlsZSAoY3VyLmluZGV4T2YodGFyKSA+PSAwKSB7XG4gICAgICBjdXIgPSBjdXIucmVwbGFjZSh0YXIsICcgJyk7XG4gICAgfVxuICAgIHNldENsYXNzKGVsLCBjdXIudHJpbSgpKTtcbiAgfVxuICBpZiAoIWVsLmNsYXNzTmFtZSkge1xuICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhY3QgcmF3IGNvbnRlbnQgaW5zaWRlIGFuIGVsZW1lbnQgaW50byBhIHRlbXBvcmFyeVxuICogY29udGFpbmVyIGRpdlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gYXNGcmFnbWVudFxuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIGV4dHJhY3RDb250ZW50KGVsLCBhc0ZyYWdtZW50KSB7XG4gIHZhciBjaGlsZDtcbiAgdmFyIHJhd0NvbnRlbnQ7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNUZW1wbGF0ZShlbCkgJiYgaXNGcmFnbWVudChlbC5jb250ZW50KSkge1xuICAgIGVsID0gZWwuY29udGVudDtcbiAgfVxuICBpZiAoZWwuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgdHJpbU5vZGUoZWwpO1xuICAgIHJhd0NvbnRlbnQgPSBhc0ZyYWdtZW50ID8gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICB3aGlsZSAoY2hpbGQgPSBlbC5maXJzdENoaWxkKSB7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgICByYXdDb250ZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJhd0NvbnRlbnQ7XG59XG5cbi8qKlxuICogVHJpbSBwb3NzaWJsZSBlbXB0eSBoZWFkL3RhaWwgdGV4dCBhbmQgY29tbWVudFxuICogbm9kZXMgaW5zaWRlIGEgcGFyZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICovXG5cbmZ1bmN0aW9uIHRyaW1Ob2RlKG5vZGUpIHtcbiAgdmFyIGNoaWxkO1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1zZXF1ZW5jZXMgKi9cbiAgd2hpbGUgKChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICB9XG4gIHdoaWxlICgoY2hpbGQgPSBub2RlLmxhc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICB9XG4gIC8qIGVzbGludC1lbmFibGUgbm8tc2VxdWVuY2VzICovXG59XG5cbmZ1bmN0aW9uIGlzVHJpbW1hYmxlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgKG5vZGUubm9kZVR5cGUgPT09IDMgJiYgIW5vZGUuZGF0YS50cmltKCkgfHwgbm9kZS5ub2RlVHlwZSA9PT0gOCk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIHRlbXBsYXRlIHRhZy5cbiAqIE5vdGUgaWYgdGhlIHRlbXBsYXRlIGFwcGVhcnMgaW5zaWRlIGFuIFNWRyBpdHMgdGFnTmFtZVxuICogd2lsbCBiZSBpbiBsb3dlcmNhc2UuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmZ1bmN0aW9uIGlzVGVtcGxhdGUoZWwpIHtcbiAgcmV0dXJuIGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndGVtcGxhdGUnO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBcImFuY2hvclwiIGZvciBwZXJmb3JtaW5nIGRvbSBpbnNlcnRpb24vcmVtb3ZhbHMuXG4gKiBUaGlzIGlzIHVzZWQgaW4gYSBudW1iZXIgb2Ygc2NlbmFyaW9zOlxuICogLSBmcmFnbWVudCBpbnN0YW5jZVxuICogLSB2LWh0bWxcbiAqIC0gdi1pZlxuICogLSB2LWZvclxuICogLSBjb21wb25lbnRcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxuICogQHBhcmFtIHtCb29sZWFufSBwZXJzaXN0IC0gSUUgdHJhc2hlcyBlbXB0eSB0ZXh0Tm9kZXMgb25cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lTm9kZSh0cnVlKSwgc28gaW4gY2VydGFpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZXMgdGhlIGFuY2hvciBuZWVkcyB0byBiZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uLWVtcHR5IHRvIGJlIHBlcnNpc3RlZCBpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzLlxuICogQHJldHVybiB7Q29tbWVudHxUZXh0fVxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZUFuY2hvcihjb250ZW50LCBwZXJzaXN0KSB7XG4gIHZhciBhbmNob3IgPSBjb25maWcuZGVidWcgPyBkb2N1bWVudC5jcmVhdGVDb21tZW50KGNvbnRlbnQpIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocGVyc2lzdCA/ICcgJyA6ICcnKTtcbiAgYW5jaG9yLl9fdl9hbmNob3IgPSB0cnVlO1xuICByZXR1cm4gYW5jaG9yO1xufVxuXG4vKipcbiAqIEZpbmQgYSBjb21wb25lbnQgcmVmIGF0dHJpYnV0ZSB0aGF0IHN0YXJ0cyB3aXRoICQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG4gKiBAcmV0dXJuIHtTdHJpbmd8dW5kZWZpbmVkfVxuICovXG5cbnZhciByZWZSRSA9IC9edi1yZWY6LztcblxuZnVuY3Rpb24gZmluZFJlZihub2RlKSB7XG4gIGlmIChub2RlLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgIHZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlcztcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuICAgICAgaWYgKHJlZlJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIGNhbWVsaXplKG5hbWUucmVwbGFjZShyZWZSRSwgJycpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBNYXAgYSBmdW5jdGlvbiB0byBhIHJhbmdlIG9mIG5vZGVzIC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7Tm9kZX0gZW5kXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcFxuICovXG5cbmZ1bmN0aW9uIG1hcE5vZGVSYW5nZShub2RlLCBlbmQsIG9wKSB7XG4gIHZhciBuZXh0O1xuICB3aGlsZSAobm9kZSAhPT0gZW5kKSB7XG4gICAgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgb3Aobm9kZSk7XG4gICAgbm9kZSA9IG5leHQ7XG4gIH1cbiAgb3AoZW5kKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYSByYW5nZSBvZiBub2RlcyB3aXRoIHRyYW5zaXRpb24sIHN0b3JlXG4gKiB0aGUgbm9kZXMgaW4gYSBmcmFnbWVudCB3aXRoIGNvcnJlY3Qgb3JkZXJpbmcsXG4gKiBhbmQgY2FsbCBjYWxsYmFjayB3aGVuIGRvbmUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBzdGFydFxuICogQHBhcmFtIHtOb2RlfSBlbmRcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZU5vZGVSYW5nZShzdGFydCwgZW5kLCB2bSwgZnJhZywgY2IpIHtcbiAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgdmFyIHJlbW92ZWQgPSAwO1xuICB2YXIgbm9kZXMgPSBbXTtcbiAgbWFwTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgaWYgKG5vZGUgPT09IGVuZCkgZG9uZSA9IHRydWU7XG4gICAgbm9kZXMucHVzaChub2RlKTtcbiAgICByZW1vdmVXaXRoVHJhbnNpdGlvbihub2RlLCB2bSwgb25SZW1vdmVkKTtcbiAgfSk7XG4gIGZ1bmN0aW9uIG9uUmVtb3ZlZCgpIHtcbiAgICByZW1vdmVkKys7XG4gICAgaWYgKGRvbmUgJiYgcmVtb3ZlZCA+PSBub2Rlcy5sZW5ndGgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChub2Rlc1tpXSk7XG4gICAgICB9XG4gICAgICBjYiAmJiBjYigpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIERvY3VtZW50RnJhZ21lbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzRnJhZ21lbnQobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSAxMTtcbn1cblxuLyoqXG4gKiBHZXQgb3V0ZXJIVE1MIG9mIGVsZW1lbnRzLCB0YWtpbmcgY2FyZVxuICogb2YgU1ZHIGVsZW1lbnRzIGluIElFIGFzIHdlbGwuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGdldE91dGVySFRNTChlbCkge1xuICBpZiAoZWwub3V0ZXJIVE1MKSB7XG4gICAgcmV0dXJuIGVsLm91dGVySFRNTDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgcmV0dXJuIGNvbnRhaW5lci5pbm5lckhUTUw7XG4gIH1cbn1cblxudmFyIGNvbW1vblRhZ1JFID0gL14oZGl2fHB8c3BhbnxpbWd8YXxifGl8YnJ8dWx8b2x8bGl8aDF8aDJ8aDN8aDR8aDV8aDZ8Y29kZXxwcmV8dGFibGV8dGh8dGR8dHJ8Zm9ybXxsYWJlbHxpbnB1dHxzZWxlY3R8b3B0aW9ufG5hdnxhcnRpY2xlfHNlY3Rpb258aGVhZGVyfGZvb3RlcikkL2k7XG52YXIgcmVzZXJ2ZWRUYWdSRSA9IC9eKHNsb3R8cGFydGlhbHxjb21wb25lbnQpJC9pO1xuXG52YXIgaXNVbmtub3duRWxlbWVudCA9IHVuZGVmaW5lZDtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGlzVW5rbm93bkVsZW1lbnQgPSBmdW5jdGlvbiAoZWwsIHRhZykge1xuICAgIGlmICh0YWcuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI4MjEwMzY0LzEwNzAyNDRcbiAgICAgIHJldHVybiBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxVbmtub3duRWxlbWVudCB8fCBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxFbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkgJiZcbiAgICAgICAgLy8gQ2hyb21lIHJldHVybnMgdW5rbm93biBmb3Igc2V2ZXJhbCBIVE1MNSBlbGVtZW50cy5cbiAgICAgICAgLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTU0MDUyNlxuICAgICAgICAvLyBGaXJlZm94IHJldHVybnMgdW5rbm93biBmb3Igc29tZSBcIkludGVyYWN0aXZlIGVsZW1lbnRzLlwiXG4gICAgICAgICEvXihkYXRhfHRpbWV8cnRjfHJifGRldGFpbHN8ZGlhbG9nfHN1bW1hcnkpJC8udGVzdCh0YWcpXG4gICAgICApO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LCBpZiB5ZXMgcmV0dXJuIGl0c1xuICogY29tcG9uZW50IGlkLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucykge1xuICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG4gIGlmICghY29tbW9uVGFnUkUudGVzdCh0YWcpICYmICFyZXNlcnZlZFRhZ1JFLnRlc3QodGFnKSkge1xuICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpKSB7XG4gICAgICByZXR1cm4geyBpZDogdGFnIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBpcyA9IGhhc0F0dHJzICYmIGdldElzQmluZGluZyhlbCwgb3B0aW9ucyk7XG4gICAgICBpZiAoaXMpIHtcbiAgICAgICAgcmV0dXJuIGlzO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhciBleHBlY3RlZFRhZyA9IG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXAgJiYgb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcFt0YWddO1xuICAgICAgICBpZiAoZXhwZWN0ZWRUYWcpIHtcbiAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gJyArICdkaWQgeW91IG1lYW4gPCcgKyBleHBlY3RlZFRhZyArICc+PyAnICsgJ0hUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlIGtlYmFiLWNhc2UgaW4gdGVtcGxhdGVzLicpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzVW5rbm93bkVsZW1lbnQoZWwsIHRhZykpIHtcbiAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gZGlkIHlvdSAnICsgJ3JlZ2lzdGVyIHRoZSBjb21wb25lbnQgY29ycmVjdGx5PyBGb3IgcmVjdXJzaXZlIGNvbXBvbmVudHMsICcgKyAnbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlIFwibmFtZVwiIG9wdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChoYXNBdHRycykge1xuICAgIHJldHVybiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuICB9XG59XG5cbi8qKlxuICogR2V0IFwiaXNcIiBiaW5kaW5nIGZyb20gYW4gZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpIHtcbiAgLy8gZHluYW1pYyBzeW50YXhcbiAgdmFyIGV4cCA9IGVsLmdldEF0dHJpYnV0ZSgnaXMnKTtcbiAgaWYgKGV4cCAhPSBudWxsKSB7XG4gICAgaWYgKHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIGV4cCkpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcbiAgICAgIHJldHVybiB7IGlkOiBleHAgfTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZXhwID0gZ2V0QmluZEF0dHIoZWwsICdpcycpO1xuICAgIGlmIChleHAgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHsgaWQ6IGV4cCwgZHluYW1pYzogdHJ1ZSB9O1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIE9wdGlvbiBvdmVyd3JpdGluZyBzdHJhdGVnaWVzIGFyZSBmdW5jdGlvbnMgdGhhdCBoYW5kbGVcbiAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uXG4gKiB2YWx1ZSBpbnRvIHRoZSBmaW5hbCB2YWx1ZS5cbiAqXG4gKiBBbGwgc3RyYXRlZ3kgZnVuY3Rpb25zIGZvbGxvdyB0aGUgc2FtZSBzaWduYXR1cmU6XG4gKlxuICogQHBhcmFtIHsqfSBwYXJlbnRWYWxcbiAqIEBwYXJhbSB7Kn0gY2hpbGRWYWxcbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKi9cblxudmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4vKipcbiAqIEhlbHBlciB0aGF0IHJlY3Vyc2l2ZWx5IG1lcmdlcyB0d28gZGF0YSBvYmplY3RzIHRvZ2V0aGVyLlxuICovXG5cbmZ1bmN0aW9uIG1lcmdlRGF0YSh0bywgZnJvbSkge1xuICB2YXIga2V5LCB0b1ZhbCwgZnJvbVZhbDtcbiAgZm9yIChrZXkgaW4gZnJvbSkge1xuICAgIHRvVmFsID0gdG9ba2V5XTtcbiAgICBmcm9tVmFsID0gZnJvbVtrZXldO1xuICAgIGlmICghaGFzT3duKHRvLCBrZXkpKSB7XG4gICAgICBzZXQodG8sIGtleSwgZnJvbVZhbCk7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdCh0b1ZhbCkgJiYgaXNPYmplY3QoZnJvbVZhbCkpIHtcbiAgICAgIG1lcmdlRGF0YSh0b1ZhbCwgZnJvbVZhbCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0bztcbn1cblxuLyoqXG4gKiBEYXRhXG4gKi9cblxuc3RyYXRzLmRhdGEgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcbiAgaWYgKCF2bSkge1xuICAgIC8vIGluIGEgVnVlLmV4dGVuZCBtZXJnZSwgYm90aCBzaG91bGQgYmUgZnVuY3Rpb25zXG4gICAgaWYgKCFjaGlsZFZhbCkge1xuICAgICAgcmV0dXJuIHBhcmVudFZhbDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJkYXRhXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcbiAgICAgIHJldHVybiBwYXJlbnRWYWw7XG4gICAgfVxuICAgIGlmICghcGFyZW50VmFsKSB7XG4gICAgICByZXR1cm4gY2hpbGRWYWw7XG4gICAgfVxuICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCxcbiAgICAvLyB3ZSBuZWVkIHRvIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgICAvLyBtZXJnZWQgcmVzdWx0IG9mIGJvdGggZnVuY3Rpb25zLi4uIG5vIG5lZWQgdG9cbiAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2VcbiAgICAvLyBpdCBoYXMgdG8gYmUgYSBmdW5jdGlvbiB0byBwYXNzIHByZXZpb3VzIG1lcmdlcy5cbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuKCkge1xuICAgICAgcmV0dXJuIG1lcmdlRGF0YShjaGlsZFZhbC5jYWxsKHRoaXMpLCBwYXJlbnRWYWwuY2FsbCh0aGlzKSk7XG4gICAgfTtcbiAgfSBlbHNlIGlmIChwYXJlbnRWYWwgfHwgY2hpbGRWYWwpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkSW5zdGFuY2VEYXRhRm4oKSB7XG4gICAgICAvLyBpbnN0YW5jZSBtZXJnZVxuICAgICAgdmFyIGluc3RhbmNlRGF0YSA9IHR5cGVvZiBjaGlsZFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkVmFsLmNhbGwodm0pIDogY2hpbGRWYWw7XG4gICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nID8gcGFyZW50VmFsLmNhbGwodm0pIDogdW5kZWZpbmVkO1xuICAgICAgaWYgKGluc3RhbmNlRGF0YSkge1xuICAgICAgICByZXR1cm4gbWVyZ2VEYXRhKGluc3RhbmNlRGF0YSwgZGVmYXVsdERhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG5cbi8qKlxuICogRWxcbiAqL1xuXG5zdHJhdHMuZWwgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcbiAgaWYgKCF2bSAmJiBjaGlsZFZhbCAmJiB0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImVsXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHJldCA9IGNoaWxkVmFsIHx8IHBhcmVudFZhbDtcbiAgLy8gaW52b2tlIHRoZSBlbGVtZW50IGZhY3RvcnkgaWYgdGhpcyBpcyBpbnN0YW5jZSBtZXJnZVxuICByZXR1cm4gdm0gJiYgdHlwZW9mIHJldCA9PT0gJ2Z1bmN0aW9uJyA/IHJldC5jYWxsKHZtKSA6IHJldDtcbn07XG5cbi8qKlxuICogSG9va3MgYW5kIHBhcmFtIGF0dHJpYnV0ZXMgYXJlIG1lcmdlZCBhcyBhcnJheXMuXG4gKi9cblxuc3RyYXRzLmluaXQgPSBzdHJhdHMuY3JlYXRlZCA9IHN0cmF0cy5yZWFkeSA9IHN0cmF0cy5hdHRhY2hlZCA9IHN0cmF0cy5kZXRhY2hlZCA9IHN0cmF0cy5iZWZvcmVDb21waWxlID0gc3RyYXRzLmNvbXBpbGVkID0gc3RyYXRzLmJlZm9yZURlc3Ryb3kgPSBzdHJhdHMuZGVzdHJveWVkID0gc3RyYXRzLmFjdGl2YXRlID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgcmV0dXJuIGNoaWxkVmFsID8gcGFyZW50VmFsID8gcGFyZW50VmFsLmNvbmNhdChjaGlsZFZhbCkgOiBpc0FycmF5KGNoaWxkVmFsKSA/IGNoaWxkVmFsIDogW2NoaWxkVmFsXSA6IHBhcmVudFZhbDtcbn07XG5cbi8qKlxuICogQXNzZXRzXG4gKlxuICogV2hlbiBhIHZtIGlzIHByZXNlbnQgKGluc3RhbmNlIGNyZWF0aW9uKSwgd2UgbmVlZCB0byBkb1xuICogYSB0aHJlZS13YXkgbWVyZ2UgYmV0d2VlbiBjb25zdHJ1Y3RvciBvcHRpb25zLCBpbnN0YW5jZVxuICogb3B0aW9ucyBhbmQgcGFyZW50IG9wdGlvbnMuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VBc3NldHMocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCk7XG4gIHJldHVybiBjaGlsZFZhbCA/IGV4dGVuZChyZXMsIGd1YXJkQXJyYXlBc3NldHMoY2hpbGRWYWwpKSA6IHJlcztcbn1cblxuY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgc3RyYXRzW3R5cGUgKyAncyddID0gbWVyZ2VBc3NldHM7XG59KTtcblxuLyoqXG4gKiBFdmVudHMgJiBXYXRjaGVycy5cbiAqXG4gKiBFdmVudHMgJiB3YXRjaGVycyBoYXNoZXMgc2hvdWxkIG5vdCBvdmVyd3JpdGUgb25lXG4gKiBhbm90aGVyLCBzbyB3ZSBtZXJnZSB0aGVtIGFzIGFycmF5cy5cbiAqL1xuXG5zdHJhdHMud2F0Y2ggPSBzdHJhdHMuZXZlbnRzID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcbiAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcbiAgdmFyIHJldCA9IHt9O1xuICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcbiAgICB2YXIgcGFyZW50ID0gcmV0W2tleV07XG4gICAgdmFyIGNoaWxkID0gY2hpbGRWYWxba2V5XTtcbiAgICBpZiAocGFyZW50ICYmICFpc0FycmF5KHBhcmVudCkpIHtcbiAgICAgIHBhcmVudCA9IFtwYXJlbnRdO1xuICAgIH1cbiAgICByZXRba2V5XSA9IHBhcmVudCA/IHBhcmVudC5jb25jYXQoY2hpbGQpIDogW2NoaWxkXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxuLyoqXG4gKiBPdGhlciBvYmplY3QgaGFzaGVzLlxuICovXG5cbnN0cmF0cy5wcm9wcyA9IHN0cmF0cy5tZXRob2RzID0gc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcbiAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcbiAgdmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG4gIGV4dGVuZChyZXQsIGNoaWxkVmFsKTtcbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogRGVmYXVsdCBzdHJhdGVneS5cbiAqL1xuXG52YXIgZGVmYXVsdFN0cmF0ID0gZnVuY3Rpb24gZGVmYXVsdFN0cmF0KHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWQgPyBwYXJlbnRWYWwgOiBjaGlsZFZhbDtcbn07XG5cbi8qKlxuICogTWFrZSBzdXJlIGNvbXBvbmVudCBvcHRpb25zIGdldCBjb252ZXJ0ZWQgdG8gYWN0dWFsXG4gKiBjb25zdHJ1Y3RvcnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBndWFyZENvbXBvbmVudHMob3B0aW9ucykge1xuICBpZiAob3B0aW9ucy5jb21wb25lbnRzKSB7XG4gICAgdmFyIGNvbXBvbmVudHMgPSBvcHRpb25zLmNvbXBvbmVudHMgPSBndWFyZEFycmF5QXNzZXRzKG9wdGlvbnMuY29tcG9uZW50cyk7XG4gICAgdmFyIGlkcyA9IE9iamVjdC5rZXlzKGNvbXBvbmVudHMpO1xuICAgIHZhciBkZWY7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBtYXAgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwID0ge307XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gaWRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGlkc1tpXTtcbiAgICAgIGlmIChjb21tb25UYWdSRS50ZXN0KGtleSkgfHwgcmVzZXJ2ZWRUYWdSRS50ZXN0KGtleSkpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBrZXkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIHJlY29yZCBhIGFsbCBsb3dlcmNhc2UgPC0+IGtlYmFiLWNhc2UgbWFwcGluZyBmb3JcbiAgICAgIC8vIHBvc3NpYmxlIGN1c3RvbSBlbGVtZW50IGNhc2UgZXJyb3Igd2FybmluZ1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgbWFwW2tleS5yZXBsYWNlKC8tL2csICcnKS50b0xvd2VyQ2FzZSgpXSA9IGh5cGhlbmF0ZShrZXkpO1xuICAgICAgfVxuICAgICAgZGVmID0gY29tcG9uZW50c1trZXldO1xuICAgICAgaWYgKGlzUGxhaW5PYmplY3QoZGVmKSkge1xuICAgICAgICBjb21wb25lbnRzW2tleV0gPSBWdWUuZXh0ZW5kKGRlZik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRW5zdXJlIGFsbCBwcm9wcyBvcHRpb24gc3ludGF4IGFyZSBub3JtYWxpemVkIGludG8gdGhlXG4gKiBPYmplY3QtYmFzZWQgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gZ3VhcmRQcm9wcyhvcHRpb25zKSB7XG4gIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG4gIHZhciBpLCB2YWw7XG4gIGlmIChpc0FycmF5KHByb3BzKSkge1xuICAgIG9wdGlvbnMucHJvcHMgPSB7fTtcbiAgICBpID0gcHJvcHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhbCA9IHByb3BzW2ldO1xuICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIG9wdGlvbnMucHJvcHNbdmFsXSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHZhbC5uYW1lKSB7XG4gICAgICAgIG9wdGlvbnMucHJvcHNbdmFsLm5hbWVdID0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHByb3BzKSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSBwcm9wc1trZXlzW2ldXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHByb3BzW2tleXNbaV1dID0geyB0eXBlOiB2YWwgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBHdWFyZCBhbiBBcnJheS1mb3JtYXQgYXNzZXRzIG9wdGlvbiBhbmQgY29udmVydGVkIGl0XG4gKiBpbnRvIHRoZSBrZXktdmFsdWUgT2JqZWN0IGZvcm1hdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gYXNzZXRzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gZ3VhcmRBcnJheUFzc2V0cyhhc3NldHMpIHtcbiAgaWYgKGlzQXJyYXkoYXNzZXRzKSkge1xuICAgIHZhciByZXMgPSB7fTtcbiAgICB2YXIgaSA9IGFzc2V0cy5sZW5ndGg7XG4gICAgdmFyIGFzc2V0O1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGFzc2V0ID0gYXNzZXRzW2ldO1xuICAgICAgdmFyIGlkID0gdHlwZW9mIGFzc2V0ID09PSAnZnVuY3Rpb24nID8gYXNzZXQub3B0aW9ucyAmJiBhc3NldC5vcHRpb25zLm5hbWUgfHwgYXNzZXQuaWQgOiBhc3NldC5uYW1lIHx8IGFzc2V0LmlkO1xuICAgICAgaWYgKCFpZCkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0FycmF5LXN5bnRheCBhc3NldHMgbXVzdCBwcm92aWRlIGEgXCJuYW1lXCIgb3IgXCJpZFwiIGZpZWxkLicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzW2lkXSA9IGFzc2V0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIHJldHVybiBhc3NldHM7XG59XG5cbi8qKlxuICogTWVyZ2UgdHdvIG9wdGlvbiBvYmplY3RzIGludG8gYSBuZXcgb25lLlxuICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyZW50XG4gKiBAcGFyYW0ge09iamVjdH0gY2hpbGRcbiAqIEBwYXJhbSB7VnVlfSBbdm1dIC0gaWYgdm0gaXMgcHJlc2VudCwgaW5kaWNhdGVzIHRoaXMgaXNcbiAqICAgICAgICAgICAgICAgICAgICAgYW4gaW5zdGFudGlhdGlvbiBtZXJnZS5cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZCwgdm0pIHtcbiAgZ3VhcmRDb21wb25lbnRzKGNoaWxkKTtcbiAgZ3VhcmRQcm9wcyhjaGlsZCk7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKGNoaWxkLnByb3BzRGF0YSAmJiAhdm0pIHtcbiAgICAgIHdhcm4oJ3Byb3BzRGF0YSBjYW4gb25seSBiZSB1c2VkIGFzIGFuIGluc3RhbnRpYXRpb24gb3B0aW9uLicpO1xuICAgIH1cbiAgfVxuICB2YXIgb3B0aW9ucyA9IHt9O1xuICB2YXIga2V5O1xuICBpZiAoY2hpbGRbJ2V4dGVuZHMnXSkge1xuICAgIHBhcmVudCA9IHR5cGVvZiBjaGlsZFsnZXh0ZW5kcyddID09PSAnZnVuY3Rpb24nID8gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXS5vcHRpb25zLCB2bSkgOiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLCB2bSk7XG4gIH1cbiAgaWYgKGNoaWxkLm1peGlucykge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIG1peGluID0gY2hpbGQubWl4aW5zW2ldO1xuICAgICAgdmFyIG1peGluT3B0aW9ucyA9IG1peGluLnByb3RvdHlwZSBpbnN0YW5jZW9mIFZ1ZSA/IG1peGluLm9wdGlvbnMgOiBtaXhpbjtcbiAgICAgIHBhcmVudCA9IG1lcmdlT3B0aW9ucyhwYXJlbnQsIG1peGluT3B0aW9ucywgdm0pO1xuICAgIH1cbiAgfVxuICBmb3IgKGtleSBpbiBwYXJlbnQpIHtcbiAgICBtZXJnZUZpZWxkKGtleSk7XG4gIH1cbiAgZm9yIChrZXkgaW4gY2hpbGQpIHtcbiAgICBpZiAoIWhhc093bihwYXJlbnQsIGtleSkpIHtcbiAgICAgIG1lcmdlRmllbGQoa2V5KTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gbWVyZ2VGaWVsZChrZXkpIHtcbiAgICB2YXIgc3RyYXQgPSBzdHJhdHNba2V5XSB8fCBkZWZhdWx0U3RyYXQ7XG4gICAgb3B0aW9uc1trZXldID0gc3RyYXQocGFyZW50W2tleV0sIGNoaWxkW2tleV0sIHZtLCBrZXkpO1xuICB9XG4gIHJldHVybiBvcHRpb25zO1xufVxuXG4vKipcbiAqIFJlc29sdmUgYW4gYXNzZXQuXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYmVjYXVzZSBjaGlsZCBpbnN0YW5jZXMgbmVlZCBhY2Nlc3NcbiAqIHRvIGFzc2V0cyBkZWZpbmVkIGluIGl0cyBhbmNlc3RvciBjaGFpbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHBhcmFtIHtCb29sZWFufSB3YXJuTWlzc2luZ1xuICogQHJldHVybiB7T2JqZWN0fEZ1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIHJlc29sdmVBc3NldChvcHRpb25zLCB0eXBlLCBpZCwgd2Fybk1pc3NpbmcpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBhc3NldHMgPSBvcHRpb25zW3R5cGVdO1xuICB2YXIgY2FtZWxpemVkSWQ7XG4gIHZhciByZXMgPSBhc3NldHNbaWRdIHx8XG4gIC8vIGNhbWVsQ2FzZSBJRFxuICBhc3NldHNbY2FtZWxpemVkSWQgPSBjYW1lbGl6ZShpZCldIHx8XG4gIC8vIFBhc2NhbCBDYXNlIElEXG4gIGFzc2V0c1tjYW1lbGl6ZWRJZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsaXplZElkLnNsaWNlKDEpXTtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xuICAgIHdhcm4oJ0ZhaWxlZCB0byByZXNvbHZlICcgKyB0eXBlLnNsaWNlKDAsIC0xKSArICc6ICcgKyBpZCwgb3B0aW9ucyk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxudmFyIHVpZCQxID0gMDtcblxuLyoqXG4gKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGVcbiAqIGRpcmVjdGl2ZXMgc3Vic2NyaWJpbmcgdG8gaXQuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERlcCgpIHtcbiAgdGhpcy5pZCA9IHVpZCQxKys7XG4gIHRoaXMuc3VicyA9IFtdO1xufVxuXG4vLyB0aGUgY3VycmVudCB0YXJnZXQgd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQuXG4vLyB0aGlzIGlzIGdsb2JhbGx5IHVuaXF1ZSBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG9ubHkgb25lXG4vLyB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZCBhdCBhbnkgdGltZS5cbkRlcC50YXJnZXQgPSBudWxsO1xuXG4vKipcbiAqIEFkZCBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuICpcbiAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcbiAqL1xuXG5EZXAucHJvdG90eXBlLmFkZFN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcbiAgdGhpcy5zdWJzLnB1c2goc3ViKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG4gKlxuICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuICovXG5cbkRlcC5wcm90b3R5cGUucmVtb3ZlU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuICB0aGlzLnN1YnMuJHJlbW92ZShzdWIpO1xufTtcblxuLyoqXG4gKiBBZGQgc2VsZiBhcyBhIGRlcGVuZGVuY3kgdG8gdGhlIHRhcmdldCB3YXRjaGVyLlxuICovXG5cbkRlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuICBEZXAudGFyZ2V0LmFkZERlcCh0aGlzKTtcbn07XG5cbi8qKlxuICogTm90aWZ5IGFsbCBzdWJzY3JpYmVycyBvZiBhIG5ldyB2YWx1ZS5cbiAqL1xuXG5EZXAucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gc3RhYmxpemUgdGhlIHN1YnNjcmliZXIgbGlzdCBmaXJzdFxuICB2YXIgc3VicyA9IHRvQXJyYXkodGhpcy5zdWJzKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHN1YnNbaV0udXBkYXRlKCk7XG4gIH1cbn07XG5cbnZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xudmFyIGFycmF5TWV0aG9kcyA9IE9iamVjdC5jcmVhdGUoYXJyYXlQcm90bylcblxuLyoqXG4gKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHNcbiAqL1xuXG47WydwdXNoJywgJ3BvcCcsICdzaGlmdCcsICd1bnNoaWZ0JywgJ3NwbGljZScsICdzb3J0JywgJ3JldmVyc2UnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgLy8gY2FjaGUgb3JpZ2luYWwgbWV0aG9kXG4gIHZhciBvcmlnaW5hbCA9IGFycmF5UHJvdG9bbWV0aG9kXTtcbiAgZGVmKGFycmF5TWV0aG9kcywgbWV0aG9kLCBmdW5jdGlvbiBtdXRhdG9yKCkge1xuICAgIC8vIGF2b2lkIGxlYWtpbmcgYXJndW1lbnRzOlxuICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Nsb3N1cmUtd2l0aC1hcmd1bWVudHNcbiAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIHZhciBvYiA9IHRoaXMuX19vYl9fO1xuICAgIHZhciBpbnNlcnRlZDtcbiAgICBzd2l0Y2ggKG1ldGhvZCkge1xuICAgICAgY2FzZSAncHVzaCc6XG4gICAgICAgIGluc2VydGVkID0gYXJncztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1bnNoaWZ0JzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NwbGljZSc6XG4gICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChpbnNlcnRlZCkgb2Iub2JzZXJ2ZUFycmF5KGluc2VydGVkKTtcbiAgICAvLyBub3RpZnkgY2hhbmdlXG4gICAgb2IuZGVwLm5vdGlmeSgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0pO1xufSk7XG5cbi8qKlxuICogU3dhcCB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXggd2l0aCBhIG5ldyB2YWx1ZVxuICogYW5kIGVtaXRzIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHJldHVybiB7Kn0gLSByZXBsYWNlZCBlbGVtZW50XG4gKi9cblxuZGVmKGFycmF5UHJvdG8sICckc2V0JywgZnVuY3Rpb24gJHNldChpbmRleCwgdmFsKSB7XG4gIGlmIChpbmRleCA+PSB0aGlzLmxlbmd0aCkge1xuICAgIHRoaXMubGVuZ3RoID0gTnVtYmVyKGluZGV4KSArIDE7XG4gIH1cbiAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxLCB2YWwpWzBdO1xufSk7XG5cbi8qKlxuICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIHJlbW92ZSB0aGUgZWxlbWVudCBhdCBnaXZlbiBpbmRleCBvciB0YXJnZXQgZWxlbWVudCByZWZlcmVuY2UuXG4gKlxuICogQHBhcmFtIHsqfSBpdGVtXG4gKi9cblxuZGVmKGFycmF5UHJvdG8sICckcmVtb3ZlJywgZnVuY3Rpb24gJHJlbW92ZShpdGVtKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm47XG4gIHZhciBpbmRleCA9IGluZGV4T2YodGhpcywgaXRlbSk7XG4gIGlmIChpbmRleCA+IC0xKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxufSk7XG5cbnZhciBhcnJheUtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcnJheU1ldGhvZHMpO1xuXG4vKipcbiAqIEJ5IGRlZmF1bHQsIHdoZW4gYSByZWFjdGl2ZSBwcm9wZXJ0eSBpcyBzZXQsIHRoZSBuZXcgdmFsdWUgaXNcbiAqIGFsc28gY29udmVydGVkIHRvIGJlY29tZSByZWFjdGl2ZS4gSG93ZXZlciBpbiBjZXJ0YWluIGNhc2VzLCBlLmcuXG4gKiB2LWZvciBzY29wZSBhbGlhcyBhbmQgcHJvcHMsIHdlIGRvbid0IHdhbnQgdG8gZm9yY2UgY29udmVyc2lvblxuICogYmVjYXVzZSB0aGUgdmFsdWUgbWF5IGJlIGEgbmVzdGVkIHZhbHVlIHVuZGVyIGEgZnJvemVuIGRhdGEgc3RydWN0dXJlLlxuICpcbiAqIFNvIHdoZW5ldmVyIHdlIHdhbnQgdG8gc2V0IGEgcmVhY3RpdmUgcHJvcGVydHkgd2l0aG91dCBmb3JjaW5nXG4gKiBjb252ZXJzaW9uIG9uIHRoZSBuZXcgdmFsdWUsIHdlIHdyYXAgdGhhdCBjYWxsIGluc2lkZSB0aGlzIGZ1bmN0aW9uLlxuICovXG5cbnZhciBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcblxuZnVuY3Rpb24gd2l0aG91dENvbnZlcnNpb24oZm4pIHtcbiAgc2hvdWxkQ29udmVydCA9IGZhbHNlO1xuICBmbigpO1xuICBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBPYnNlcnZlciBjbGFzcyB0aGF0IGFyZSBhdHRhY2hlZCB0byBlYWNoIG9ic2VydmVkXG4gKiBvYmplY3QuIE9uY2UgYXR0YWNoZWQsIHRoZSBvYnNlcnZlciBjb252ZXJ0cyB0YXJnZXRcbiAqIG9iamVjdCdzIHByb3BlcnR5IGtleXMgaW50byBnZXR0ZXIvc2V0dGVycyB0aGF0XG4gKiBjb2xsZWN0IGRlcGVuZGVuY2llcyBhbmQgZGlzcGF0Y2hlcyB1cGRhdGVzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSB2YWx1ZVxuICogQGNvbnN0cnVjdG9yXG4gKi9cblxuZnVuY3Rpb24gT2JzZXJ2ZXIodmFsdWUpIHtcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB0aGlzLmRlcCA9IG5ldyBEZXAoKTtcbiAgZGVmKHZhbHVlLCAnX19vYl9fJywgdGhpcyk7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIHZhciBhdWdtZW50ID0gaGFzUHJvdG8gPyBwcm90b0F1Z21lbnQgOiBjb3B5QXVnbWVudDtcbiAgICBhdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMsIGFycmF5S2V5cyk7XG4gICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMud2Fsayh2YWx1ZSk7XG4gIH1cbn1cblxuLy8gSW5zdGFuY2UgbWV0aG9kc1xuXG4vKipcbiAqIFdhbGsgdGhyb3VnaCBlYWNoIHByb3BlcnR5IGFuZCBjb252ZXJ0IHRoZW0gaW50b1xuICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuXG4gKiB2YWx1ZSB0eXBlIGlzIE9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRoaXMuY29udmVydChrZXlzW2ldLCBvYmpba2V5c1tpXV0pO1xuICB9XG59O1xuXG4vKipcbiAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGl0ZW1zXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmVBcnJheSA9IGZ1bmN0aW9uIChpdGVtcykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG9ic2VydmUoaXRlbXNbaV0pO1xuICB9XG59O1xuXG4vKipcbiAqIENvbnZlcnQgYSBwcm9wZXJ0eSBpbnRvIGdldHRlci9zZXR0ZXIgc28gd2UgY2FuIGVtaXRcbiAqIHRoZSBldmVudHMgd2hlbiB0aGUgcHJvcGVydHkgaXMgYWNjZXNzZWQvY2hhbmdlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS5jb252ZXJ0ID0gZnVuY3Rpb24gKGtleSwgdmFsKSB7XG4gIGRlZmluZVJlYWN0aXZlKHRoaXMudmFsdWUsIGtleSwgdmFsKTtcbn07XG5cbi8qKlxuICogQWRkIGFuIG93bmVyIHZtLCBzbyB0aGF0IHdoZW4gJHNldC8kZGVsZXRlIG11dGF0aW9uc1xuICogaGFwcGVuIHdlIGNhbiBub3RpZnkgb3duZXIgdm1zIHRvIHByb3h5IHRoZSBrZXlzIGFuZFxuICogZGlnZXN0IHRoZSB3YXRjaGVycy4gVGhpcyBpcyBvbmx5IGNhbGxlZCB3aGVuIHRoZSBvYmplY3RcbiAqIGlzIG9ic2VydmVkIGFzIGFuIGluc3RhbmNlJ3Mgcm9vdCAkZGF0YS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUuYWRkVm0gPSBmdW5jdGlvbiAodm0pIHtcbiAgKHRoaXMudm1zIHx8ICh0aGlzLnZtcyA9IFtdKSkucHVzaCh2bSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbiBvd25lciB2bS4gVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0IGlzXG4gKiBzd2FwcGVkIG91dCBhcyBhbiBpbnN0YW5jZSdzICRkYXRhIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUucmVtb3ZlVm0gPSBmdW5jdGlvbiAodm0pIHtcbiAgdGhpcy52bXMuJHJlbW92ZSh2bSk7XG59O1xuXG4vLyBoZWxwZXJzXG5cbi8qKlxuICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZ1xuICogdGhlIHByb3RvdHlwZSBjaGFpbiB1c2luZyBfX3Byb3RvX19cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG4gKiBAcGFyYW0ge09iamVjdH0gc3JjXG4gKi9cblxuZnVuY3Rpb24gcHJvdG9BdWdtZW50KHRhcmdldCwgc3JjKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG4gIHRhcmdldC5fX3Byb3RvX18gPSBzcmM7XG4gIC8qIGVzbGludC1lbmFibGUgbm8tcHJvdG8gKi9cbn1cblxuLyoqXG4gKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgZGVmaW5pbmdcbiAqIGhpZGRlbiBwcm9wZXJ0aWVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b1xuICovXG5cbmZ1bmN0aW9uIGNvcHlBdWdtZW50KHRhcmdldCwgc3JjLCBrZXlzKSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICBkZWYodGFyZ2V0LCBrZXksIHNyY1trZXldKTtcbiAgfVxufVxuXG4vKipcbiAqIEF0dGVtcHQgdG8gY3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGZvciBhIHZhbHVlLFxuICogcmV0dXJucyB0aGUgbmV3IG9ic2VydmVyIGlmIHN1Y2Nlc3NmdWxseSBvYnNlcnZlZCxcbiAqIG9yIHRoZSBleGlzdGluZyBvYnNlcnZlciBpZiB0aGUgdmFsdWUgYWxyZWFkeSBoYXMgb25lLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKiBAcmV0dXJuIHtPYnNlcnZlcnx1bmRlZmluZWR9XG4gKiBAc3RhdGljXG4gKi9cblxuZnVuY3Rpb24gb2JzZXJ2ZSh2YWx1ZSwgdm0pIHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBvYjtcbiAgaWYgKGhhc093bih2YWx1ZSwgJ19fb2JfXycpICYmIHZhbHVlLl9fb2JfXyBpbnN0YW5jZW9mIE9ic2VydmVyKSB7XG4gICAgb2IgPSB2YWx1ZS5fX29iX187XG4gIH0gZWxzZSBpZiAoc2hvdWxkQ29udmVydCAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNQbGFpbk9iamVjdCh2YWx1ZSkpICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpICYmICF2YWx1ZS5faXNWdWUpIHtcbiAgICBvYiA9IG5ldyBPYnNlcnZlcih2YWx1ZSk7XG4gIH1cbiAgaWYgKG9iICYmIHZtKSB7XG4gICAgb2IuYWRkVm0odm0pO1xuICB9XG4gIHJldHVybiBvYjtcbn1cblxuLyoqXG4gKiBEZWZpbmUgYSByZWFjdGl2ZSBwcm9wZXJ0eSBvbiBhbiBPYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBkZWZpbmVSZWFjdGl2ZShvYmosIGtleSwgdmFsKSB7XG4gIHZhciBkZXAgPSBuZXcgRGVwKCk7XG5cbiAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gY2F0ZXIgZm9yIHByZS1kZWZpbmVkIGdldHRlci9zZXR0ZXJzXG4gIHZhciBnZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5nZXQ7XG4gIHZhciBzZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5zZXQ7XG5cbiAgdmFyIGNoaWxkT2IgPSBvYnNlcnZlKHZhbCk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuICAgICAgaWYgKERlcC50YXJnZXQpIHtcbiAgICAgICAgZGVwLmRlcGVuZCgpO1xuICAgICAgICBpZiAoY2hpbGRPYikge1xuICAgICAgICAgIGNoaWxkT2IuZGVwLmRlcGVuZCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgIGZvciAodmFyIGUsIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBlID0gdmFsdWVbaV07XG4gICAgICAgICAgICBlICYmIGUuX19vYl9fICYmIGUuX19vYl9fLmRlcC5kZXBlbmQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIobmV3VmFsKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHNldHRlcikge1xuICAgICAgICBzZXR0ZXIuY2FsbChvYmosIG5ld1ZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWwgPSBuZXdWYWw7XG4gICAgICB9XG4gICAgICBjaGlsZE9iID0gb2JzZXJ2ZShuZXdWYWwpO1xuICAgICAgZGVwLm5vdGlmeSgpO1xuICAgIH1cbiAgfSk7XG59XG5cblxuXG52YXIgdXRpbCA9IE9iamVjdC5mcmVlemUoe1xuXHRkZWZpbmVSZWFjdGl2ZTogZGVmaW5lUmVhY3RpdmUsXG5cdHNldDogc2V0LFxuXHRkZWw6IGRlbCxcblx0aGFzT3duOiBoYXNPd24sXG5cdGlzTGl0ZXJhbDogaXNMaXRlcmFsLFxuXHRpc1Jlc2VydmVkOiBpc1Jlc2VydmVkLFxuXHRfdG9TdHJpbmc6IF90b1N0cmluZyxcblx0dG9OdW1iZXI6IHRvTnVtYmVyLFxuXHR0b0Jvb2xlYW46IHRvQm9vbGVhbixcblx0c3RyaXBRdW90ZXM6IHN0cmlwUXVvdGVzLFxuXHRjYW1lbGl6ZTogY2FtZWxpemUsXG5cdGh5cGhlbmF0ZTogaHlwaGVuYXRlLFxuXHRjbGFzc2lmeTogY2xhc3NpZnksXG5cdGJpbmQ6IGJpbmQsXG5cdHRvQXJyYXk6IHRvQXJyYXksXG5cdGV4dGVuZDogZXh0ZW5kLFxuXHRpc09iamVjdDogaXNPYmplY3QsXG5cdGlzUGxhaW5PYmplY3Q6IGlzUGxhaW5PYmplY3QsXG5cdGRlZjogZGVmLFxuXHRkZWJvdW5jZTogX2RlYm91bmNlLFxuXHRpbmRleE9mOiBpbmRleE9mLFxuXHRjYW5jZWxsYWJsZTogY2FuY2VsbGFibGUsXG5cdGxvb3NlRXF1YWw6IGxvb3NlRXF1YWwsXG5cdGlzQXJyYXk6IGlzQXJyYXksXG5cdGhhc1Byb3RvOiBoYXNQcm90byxcblx0aW5Ccm93c2VyOiBpbkJyb3dzZXIsXG5cdGRldnRvb2xzOiBkZXZ0b29scyxcblx0aXNJRTogaXNJRSxcblx0aXNJRTk6IGlzSUU5LFxuXHRpc0FuZHJvaWQ6IGlzQW5kcm9pZCxcblx0aXNJb3M6IGlzSW9zLFxuXHRpb3NWZXJzaW9uTWF0Y2g6IGlvc1ZlcnNpb25NYXRjaCxcblx0aW9zVmVyc2lvbjogaW9zVmVyc2lvbixcblx0aGFzTXV0YXRpb25PYnNlcnZlckJ1ZzogaGFzTXV0YXRpb25PYnNlcnZlckJ1Zyxcblx0Z2V0IHRyYW5zaXRpb25Qcm9wICgpIHsgcmV0dXJuIHRyYW5zaXRpb25Qcm9wOyB9LFxuXHRnZXQgdHJhbnNpdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIHRyYW5zaXRpb25FbmRFdmVudDsgfSxcblx0Z2V0IGFuaW1hdGlvblByb3AgKCkgeyByZXR1cm4gYW5pbWF0aW9uUHJvcDsgfSxcblx0Z2V0IGFuaW1hdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIGFuaW1hdGlvbkVuZEV2ZW50OyB9LFxuXHRuZXh0VGljazogbmV4dFRpY2ssXG5cdGdldCBfU2V0ICgpIHsgcmV0dXJuIF9TZXQ7IH0sXG5cdHF1ZXJ5OiBxdWVyeSxcblx0aW5Eb2M6IGluRG9jLFxuXHRnZXRBdHRyOiBnZXRBdHRyLFxuXHRnZXRCaW5kQXR0cjogZ2V0QmluZEF0dHIsXG5cdGhhc0JpbmRBdHRyOiBoYXNCaW5kQXR0cixcblx0YmVmb3JlOiBiZWZvcmUsXG5cdGFmdGVyOiBhZnRlcixcblx0cmVtb3ZlOiByZW1vdmUsXG5cdHByZXBlbmQ6IHByZXBlbmQsXG5cdHJlcGxhY2U6IHJlcGxhY2UsXG5cdG9uOiBvbixcblx0b2ZmOiBvZmYsXG5cdHNldENsYXNzOiBzZXRDbGFzcyxcblx0YWRkQ2xhc3M6IGFkZENsYXNzLFxuXHRyZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXG5cdGV4dHJhY3RDb250ZW50OiBleHRyYWN0Q29udGVudCxcblx0dHJpbU5vZGU6IHRyaW1Ob2RlLFxuXHRpc1RlbXBsYXRlOiBpc1RlbXBsYXRlLFxuXHRjcmVhdGVBbmNob3I6IGNyZWF0ZUFuY2hvcixcblx0ZmluZFJlZjogZmluZFJlZixcblx0bWFwTm9kZVJhbmdlOiBtYXBOb2RlUmFuZ2UsXG5cdHJlbW92ZU5vZGVSYW5nZTogcmVtb3ZlTm9kZVJhbmdlLFxuXHRpc0ZyYWdtZW50OiBpc0ZyYWdtZW50LFxuXHRnZXRPdXRlckhUTUw6IGdldE91dGVySFRNTCxcblx0bWVyZ2VPcHRpb25zOiBtZXJnZU9wdGlvbnMsXG5cdHJlc29sdmVBc3NldDogcmVzb2x2ZUFzc2V0LFxuXHRjaGVja0NvbXBvbmVudEF0dHI6IGNoZWNrQ29tcG9uZW50QXR0cixcblx0Y29tbW9uVGFnUkU6IGNvbW1vblRhZ1JFLFxuXHRyZXNlcnZlZFRhZ1JFOiByZXNlcnZlZFRhZ1JFLFxuXHRnZXQgd2FybiAoKSB7IHJldHVybiB3YXJuOyB9XG59KTtcblxudmFyIHVpZCA9IDA7XG5cbmZ1bmN0aW9uIGluaXRNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBUaGUgbWFpbiBpbml0IHNlcXVlbmNlLiBUaGlzIGlzIGNhbGxlZCBmb3IgZXZlcnlcbiAgICogaW5zdGFuY2UsIGluY2x1ZGluZyBvbmVzIHRoYXQgYXJlIGNyZWF0ZWQgZnJvbSBleHRlbmRlZFxuICAgKiBjb25zdHJ1Y3RvcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gdGhpcyBvcHRpb25zIG9iamVjdCBzaG91bGQgYmVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgcmVzdWx0IG9mIG1lcmdpbmcgY2xhc3NcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zIGFuZCB0aGUgb3B0aW9ucyBwYXNzZWRcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0byB0aGUgY29uc3RydWN0b3IuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgdGhpcy4kZWwgPSBudWxsO1xuICAgIHRoaXMuJHBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuICAgIHRoaXMuJHJvb3QgPSB0aGlzLiRwYXJlbnQgPyB0aGlzLiRwYXJlbnQuJHJvb3QgOiB0aGlzO1xuICAgIHRoaXMuJGNoaWxkcmVuID0gW107XG4gICAgdGhpcy4kcmVmcyA9IHt9OyAvLyBjaGlsZCB2bSByZWZlcmVuY2VzXG4gICAgdGhpcy4kZWxzID0ge307IC8vIGVsZW1lbnQgcmVmZXJlbmNlc1xuICAgIHRoaXMuX3dhdGNoZXJzID0gW107IC8vIGFsbCB3YXRjaGVycyBhcyBhbiBhcnJheVxuICAgIHRoaXMuX2RpcmVjdGl2ZXMgPSBbXTsgLy8gYWxsIGRpcmVjdGl2ZXNcblxuICAgIC8vIGEgdWlkXG4gICAgdGhpcy5fdWlkID0gdWlkKys7XG5cbiAgICAvLyBhIGZsYWcgdG8gYXZvaWQgdGhpcyBiZWluZyBvYnNlcnZlZFxuICAgIHRoaXMuX2lzVnVlID0gdHJ1ZTtcblxuICAgIC8vIGV2ZW50cyBib29ra2VlcGluZ1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9OyAvLyByZWdpc3RlcmVkIGNhbGxiYWNrc1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0ge307IC8vIGZvciAkYnJvYWRjYXN0IG9wdGltaXphdGlvblxuXG4gICAgLy8gZnJhZ21lbnQgaW5zdGFuY2UgcHJvcGVydGllc1xuICAgIHRoaXMuX2lzRnJhZ21lbnQgPSBmYWxzZTtcbiAgICB0aGlzLl9mcmFnbWVudCA9IC8vIEB0eXBlIHtEb2N1bWVudEZyYWdtZW50fVxuICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQgPSAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxuICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gbnVsbDsgLy8gQHR5cGUge1RleHR8Q29tbWVudH1cblxuICAgIC8vIGxpZmVjeWNsZSBzdGF0ZVxuICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRoaXMuX2lzUmVhZHkgPSB0aGlzLl9pc0F0dGFjaGVkID0gdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRoaXMuX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuICAgIHRoaXMuX3VubGlua0ZuID0gbnVsbDtcblxuICAgIC8vIGNvbnRleHQ6XG4gICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuICAgIC8vIGFuZCBpdHMgaG9zdC5cbiAgICB0aGlzLl9jb250ZXh0ID0gb3B0aW9ucy5fY29udGV4dCB8fCB0aGlzLiRwYXJlbnQ7XG5cbiAgICAvLyBzY29wZTpcbiAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG4gICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcbiAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgdGhpcy5fc2NvcGUgPSBvcHRpb25zLl9zY29wZTtcblxuICAgIC8vIGZyYWdtZW50OlxuICAgIC8vIGlmIHRoaXMgaW5zdGFuY2UgaXMgY29tcGlsZWQgaW5zaWRlIGEgRnJhZ21lbnQsIGl0XG4gICAgLy8gbmVlZHMgdG8gcmVpZ3N0ZXIgaXRzZWxmIGFzIGEgY2hpbGQgb2YgdGhhdCBmcmFnbWVudFxuICAgIC8vIGZvciBhdHRhY2gvZGV0YWNoIHRvIHdvcmsgcHJvcGVybHkuXG4gICAgdGhpcy5fZnJhZyA9IG9wdGlvbnMuX2ZyYWc7XG4gICAgaWYgKHRoaXMuX2ZyYWcpIHtcbiAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4ucHVzaCh0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBwdXNoIHNlbGYgaW50byBwYXJlbnQgLyB0cmFuc2NsdXNpb24gaG9zdFxuICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcbiAgICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4ucHVzaCh0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBtZXJnZSBvcHRpb25zLlxuICAgIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuY29uc3RydWN0b3Iub3B0aW9ucywgb3B0aW9ucywgdGhpcyk7XG5cbiAgICAvLyBzZXQgcmVmXG4gICAgdGhpcy5fdXBkYXRlUmVmKCk7XG5cbiAgICAvLyBpbml0aWFsaXplIGRhdGEgYXMgZW1wdHkgb2JqZWN0LlxuICAgIC8vIGl0IHdpbGwgYmUgZmlsbGVkIHVwIGluIF9pbml0RGF0YSgpLlxuICAgIHRoaXMuX2RhdGEgPSB7fTtcblxuICAgIC8vIGNhbGwgaW5pdCBob29rXG4gICAgdGhpcy5fY2FsbEhvb2soJ2luaXQnKTtcblxuICAgIC8vIGluaXRpYWxpemUgZGF0YSBvYnNlcnZhdGlvbiBhbmQgc2NvcGUgaW5oZXJpdGFuY2UuXG4gICAgdGhpcy5faW5pdFN0YXRlKCk7XG5cbiAgICAvLyBzZXR1cCBldmVudCBzeXN0ZW0gYW5kIG9wdGlvbiBldmVudHMuXG4gICAgdGhpcy5faW5pdEV2ZW50cygpO1xuXG4gICAgLy8gY2FsbCBjcmVhdGVkIGhvb2tcbiAgICB0aGlzLl9jYWxsSG9vaygnY3JlYXRlZCcpO1xuXG4gICAgLy8gaWYgYGVsYCBvcHRpb24gaXMgcGFzc2VkLCBzdGFydCBjb21waWxhdGlvbi5cbiAgICBpZiAob3B0aW9ucy5lbCkge1xuICAgICAgdGhpcy4kbW91bnQob3B0aW9ucy5lbCk7XG4gICAgfVxuICB9O1xufVxuXG52YXIgcGF0aENhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG4vLyBhY3Rpb25zXG52YXIgQVBQRU5EID0gMDtcbnZhciBQVVNIID0gMTtcbnZhciBJTkNfU1VCX1BBVEhfREVQVEggPSAyO1xudmFyIFBVU0hfU1VCX1BBVEggPSAzO1xuXG4vLyBzdGF0ZXNcbnZhciBCRUZPUkVfUEFUSCA9IDA7XG52YXIgSU5fUEFUSCA9IDE7XG52YXIgQkVGT1JFX0lERU5UID0gMjtcbnZhciBJTl9JREVOVCA9IDM7XG52YXIgSU5fU1VCX1BBVEggPSA0O1xudmFyIElOX1NJTkdMRV9RVU9URSA9IDU7XG52YXIgSU5fRE9VQkxFX1FVT1RFID0gNjtcbnZhciBBRlRFUl9QQVRIID0gNztcbnZhciBFUlJPUiA9IDg7XG5cbnZhciBwYXRoU3RhdGVNYWNoaW5lID0gW107XG5cbnBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX1BBVEhdID0ge1xuICAnd3MnOiBbQkVGT1JFX1BBVEhdLFxuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICdbJzogW0lOX1NVQl9QQVRIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRIXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9QQVRIXSA9IHtcbiAgJ3dzJzogW0lOX1BBVEhdLFxuICAnLic6IFtCRUZPUkVfSURFTlRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX0lERU5UXSA9IHtcbiAgJ3dzJzogW0JFRk9SRV9JREVOVF0sXG4gICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9JREVOVF0gPSB7XG4gICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJzAnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICdudW1iZXInOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICd3cyc6IFtJTl9QQVRILCBQVVNIXSxcbiAgJy4nOiBbQkVGT1JFX0lERU5ULCBQVVNIXSxcbiAgJ1snOiBbSU5fU1VCX1BBVEgsIFBVU0hdLFxuICAnZW9mJzogW0FGVEVSX1BBVEgsIFBVU0hdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX1NVQl9QQVRIXSA9IHtcbiAgXCInXCI6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF0sXG4gICdcIic6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF0sXG4gICdbJzogW0lOX1NVQl9QQVRILCBJTkNfU1VCX1BBVEhfREVQVEhdLFxuICAnXSc6IFtJTl9QQVRILCBQVVNIX1NVQl9QQVRIXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9TSU5HTEVfUVVPVEVdID0ge1xuICBcIidcIjogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuICAnZW9mJzogRVJST1IsXG4gICdlbHNlJzogW0lOX1NJTkdMRV9RVU9URSwgQVBQRU5EXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9ET1VCTEVfUVVPVEVdID0ge1xuICAnXCInOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG4gICdlb2YnOiBFUlJPUixcbiAgJ2Vsc2UnOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdXG59O1xuXG4vKipcbiAqIERldGVybWluZSB0aGUgdHlwZSBvZiBhIGNoYXJhY3RlciBpbiBhIGtleXBhdGguXG4gKlxuICogQHBhcmFtIHtDaGFyfSBjaFxuICogQHJldHVybiB7U3RyaW5nfSB0eXBlXG4gKi9cblxuZnVuY3Rpb24gZ2V0UGF0aENoYXJUeXBlKGNoKSB7XG4gIGlmIChjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICdlb2YnO1xuICB9XG5cbiAgdmFyIGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApO1xuXG4gIHN3aXRjaCAoY29kZSkge1xuICAgIGNhc2UgMHg1QjogLy8gW1xuICAgIGNhc2UgMHg1RDogLy8gXVxuICAgIGNhc2UgMHgyRTogLy8gLlxuICAgIGNhc2UgMHgyMjogLy8gXCJcbiAgICBjYXNlIDB4Mjc6IC8vICdcbiAgICBjYXNlIDB4MzA6XG4gICAgICAvLyAwXG4gICAgICByZXR1cm4gY2g7XG5cbiAgICBjYXNlIDB4NUY6IC8vIF9cbiAgICBjYXNlIDB4MjQ6XG4gICAgICAvLyAkXG4gICAgICByZXR1cm4gJ2lkZW50JztcblxuICAgIGNhc2UgMHgyMDogLy8gU3BhY2VcbiAgICBjYXNlIDB4MDk6IC8vIFRhYlxuICAgIGNhc2UgMHgwQTogLy8gTmV3bGluZVxuICAgIGNhc2UgMHgwRDogLy8gUmV0dXJuXG4gICAgY2FzZSAweEEwOiAvLyBOby1icmVhayBzcGFjZVxuICAgIGNhc2UgMHhGRUZGOiAvLyBCeXRlIE9yZGVyIE1hcmtcbiAgICBjYXNlIDB4MjAyODogLy8gTGluZSBTZXBhcmF0b3JcbiAgICBjYXNlIDB4MjAyOTpcbiAgICAgIC8vIFBhcmFncmFwaCBTZXBhcmF0b3JcbiAgICAgIHJldHVybiAnd3MnO1xuICB9XG5cbiAgLy8gYS16LCBBLVpcbiAgaWYgKGNvZGUgPj0gMHg2MSAmJiBjb2RlIDw9IDB4N0EgfHwgY29kZSA+PSAweDQxICYmIGNvZGUgPD0gMHg1QSkge1xuICAgIHJldHVybiAnaWRlbnQnO1xuICB9XG5cbiAgLy8gMS05XG4gIGlmIChjb2RlID49IDB4MzEgJiYgY29kZSA8PSAweDM5KSB7XG4gICAgcmV0dXJuICdudW1iZXInO1xuICB9XG5cbiAgcmV0dXJuICdlbHNlJztcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBzdWJQYXRoLCByZXR1cm4gaXRzIHBsYWluIGZvcm0gaWYgaXQgaXNcbiAqIGEgbGl0ZXJhbCBzdHJpbmcgb3IgbnVtYmVyLiBPdGhlcndpc2UgcHJlcGVuZCB0aGVcbiAqIGR5bmFtaWMgaW5kaWNhdG9yICgqKS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFN1YlBhdGgocGF0aCkge1xuICB2YXIgdHJpbW1lZCA9IHBhdGgudHJpbSgpO1xuICAvLyBpbnZhbGlkIGxlYWRpbmcgMFxuICBpZiAocGF0aC5jaGFyQXQoMCkgPT09ICcwJyAmJiBpc05hTihwYXRoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gaXNMaXRlcmFsKHRyaW1tZWQpID8gc3RyaXBRdW90ZXModHJpbW1lZCkgOiAnKicgKyB0cmltbWVkO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgc3RyaW5nIHBhdGggaW50byBhbiBhcnJheSBvZiBzZWdtZW50c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2UocGF0aCkge1xuICB2YXIga2V5cyA9IFtdO1xuICB2YXIgaW5kZXggPSAtMTtcbiAgdmFyIG1vZGUgPSBCRUZPUkVfUEFUSDtcbiAgdmFyIHN1YlBhdGhEZXB0aCA9IDA7XG4gIHZhciBjLCBuZXdDaGFyLCBrZXksIHR5cGUsIHRyYW5zaXRpb24sIGFjdGlvbiwgdHlwZU1hcDtcblxuICB2YXIgYWN0aW9ucyA9IFtdO1xuXG4gIGFjdGlvbnNbUFVTSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgIGtleSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH07XG5cbiAgYWN0aW9uc1tBUFBFTkRdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5ID0gbmV3Q2hhcjtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ICs9IG5ld0NoYXI7XG4gICAgfVxuICB9O1xuXG4gIGFjdGlvbnNbSU5DX1NVQl9QQVRIX0RFUFRIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICBzdWJQYXRoRGVwdGgrKztcbiAgfTtcblxuICBhY3Rpb25zW1BVU0hfU1VCX1BBVEhdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChzdWJQYXRoRGVwdGggPiAwKSB7XG4gICAgICBzdWJQYXRoRGVwdGgtLTtcbiAgICAgIG1vZGUgPSBJTl9TVUJfUEFUSDtcbiAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWJQYXRoRGVwdGggPSAwO1xuICAgICAga2V5ID0gZm9ybWF0U3ViUGF0aChrZXkpO1xuICAgICAgaWYgKGtleSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aW9uc1tQVVNIXSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBtYXliZVVuZXNjYXBlUXVvdGUoKSB7XG4gICAgdmFyIG5leHRDaGFyID0gcGF0aFtpbmRleCArIDFdO1xuICAgIGlmIChtb2RlID09PSBJTl9TSU5HTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09IFwiJ1wiIHx8IG1vZGUgPT09IElOX0RPVUJMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gJ1wiJykge1xuICAgICAgaW5kZXgrKztcbiAgICAgIG5ld0NoYXIgPSAnXFxcXCcgKyBuZXh0Q2hhcjtcbiAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgd2hpbGUgKG1vZGUgIT0gbnVsbCkge1xuICAgIGluZGV4Kys7XG4gICAgYyA9IHBhdGhbaW5kZXhdO1xuXG4gICAgaWYgKGMgPT09ICdcXFxcJyAmJiBtYXliZVVuZXNjYXBlUXVvdGUoKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdHlwZSA9IGdldFBhdGhDaGFyVHlwZShjKTtcbiAgICB0eXBlTWFwID0gcGF0aFN0YXRlTWFjaGluZVttb2RlXTtcbiAgICB0cmFuc2l0aW9uID0gdHlwZU1hcFt0eXBlXSB8fCB0eXBlTWFwWydlbHNlJ10gfHwgRVJST1I7XG5cbiAgICBpZiAodHJhbnNpdGlvbiA9PT0gRVJST1IpIHtcbiAgICAgIHJldHVybjsgLy8gcGFyc2UgZXJyb3JcbiAgICB9XG5cbiAgICBtb2RlID0gdHJhbnNpdGlvblswXTtcbiAgICBhY3Rpb24gPSBhY3Rpb25zW3RyYW5zaXRpb25bMV1dO1xuICAgIGlmIChhY3Rpb24pIHtcbiAgICAgIG5ld0NoYXIgPSB0cmFuc2l0aW9uWzJdO1xuICAgICAgbmV3Q2hhciA9IG5ld0NoYXIgPT09IHVuZGVmaW5lZCA/IGMgOiBuZXdDaGFyO1xuICAgICAgaWYgKGFjdGlvbigpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1vZGUgPT09IEFGVEVSX1BBVEgpIHtcbiAgICAgIGtleXMucmF3ID0gcGF0aDtcbiAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEV4dGVybmFsIHBhcnNlIHRoYXQgY2hlY2sgZm9yIGEgY2FjaGUgaGl0IGZpcnN0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZVBhdGgocGF0aCkge1xuICB2YXIgaGl0ID0gcGF0aENhY2hlLmdldChwYXRoKTtcbiAgaWYgKCFoaXQpIHtcbiAgICBoaXQgPSBwYXJzZShwYXRoKTtcbiAgICBpZiAoaGl0KSB7XG4gICAgICBwYXRoQ2FjaGUucHV0KHBhdGgsIGhpdCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBoaXQ7XG59XG5cbi8qKlxuICogR2V0IGZyb20gYW4gb2JqZWN0IGZyb20gYSBwYXRoIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKi9cblxuZnVuY3Rpb24gZ2V0UGF0aChvYmosIHBhdGgpIHtcbiAgcmV0dXJuIHBhcnNlRXhwcmVzc2lvbihwYXRoKS5nZXQob2JqKTtcbn1cblxuLyoqXG4gKiBXYXJuIGFnYWluc3Qgc2V0dGluZyBub24tZXhpc3RlbnQgcm9vdCBwYXRoIG9uIGEgdm0uXG4gKi9cblxudmFyIHdhcm5Ob25FeGlzdGVudDtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHdhcm5Ob25FeGlzdGVudCA9IGZ1bmN0aW9uIChwYXRoLCB2bSkge1xuICAgIHdhcm4oJ1lvdSBhcmUgc2V0dGluZyBhIG5vbi1leGlzdGVudCBwYXRoIFwiJyArIHBhdGgucmF3ICsgJ1wiICcgKyAnb24gYSB2bSBpbnN0YW5jZS4gQ29uc2lkZXIgcHJlLWluaXRpYWxpemluZyB0aGUgcHJvcGVydHkgJyArICd3aXRoIHRoZSBcImRhdGFcIiBvcHRpb24gZm9yIG1vcmUgcmVsaWFibGUgcmVhY3Rpdml0eSAnICsgJ2FuZCBiZXR0ZXIgcGVyZm9ybWFuY2UuJywgdm0pO1xuICB9O1xufVxuXG4vKipcbiAqIFNldCBvbiBhbiBvYmplY3QgZnJvbSBhIHBhdGhcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZyB8IEFycmF5fSBwYXRoXG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbmZ1bmN0aW9uIHNldFBhdGgob2JqLCBwYXRoLCB2YWwpIHtcbiAgdmFyIG9yaWdpbmFsID0gb2JqO1xuICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgcGF0aCA9IHBhcnNlKHBhdGgpO1xuICB9XG4gIGlmICghcGF0aCB8fCAhaXNPYmplY3Qob2JqKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgbGFzdCwga2V5O1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgbGFzdCA9IG9iajtcbiAgICBrZXkgPSBwYXRoW2ldO1xuICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnKicpIHtcbiAgICAgIGtleSA9IHBhcnNlRXhwcmVzc2lvbihrZXkuc2xpY2UoMSkpLmdldC5jYWxsKG9yaWdpbmFsLCBvcmlnaW5hbCk7XG4gICAgfVxuICAgIGlmIChpIDwgbCAtIDEpIHtcbiAgICAgIG9iaiA9IG9ialtrZXldO1xuICAgICAgaWYgKCFpc09iamVjdChvYmopKSB7XG4gICAgICAgIG9iaiA9IHt9O1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBsYXN0Ll9pc1Z1ZSkge1xuICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBsYXN0KTtcbiAgICAgICAgfVxuICAgICAgICBzZXQobGFzdCwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgICAgIG9iai4kc2V0KGtleSwgdmFsKTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICBvYmpba2V5XSA9IHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9iai5faXNWdWUpIHtcbiAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgb2JqKTtcbiAgICAgICAgfVxuICAgICAgICBzZXQob2JqLCBrZXksIHZhbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG52YXIgcGF0aCA9IE9iamVjdC5mcmVlemUoe1xuICBwYXJzZVBhdGg6IHBhcnNlUGF0aCxcbiAgZ2V0UGF0aDogZ2V0UGF0aCxcbiAgc2V0UGF0aDogc2V0UGF0aFxufSk7XG5cbnZhciBleHByZXNzaW9uQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cbnZhciBhbGxvd2VkS2V5d29yZHMgPSAnTWF0aCxEYXRlLHRoaXMsdHJ1ZSxmYWxzZSxudWxsLHVuZGVmaW5lZCxJbmZpbml0eSxOYU4sJyArICdpc05hTixpc0Zpbml0ZSxkZWNvZGVVUkksZGVjb2RlVVJJQ29tcG9uZW50LGVuY29kZVVSSSwnICsgJ2VuY29kZVVSSUNvbXBvbmVudCxwYXJzZUludCxwYXJzZUZsb2F0JztcbnZhciBhbGxvd2VkS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGFsbG93ZWRLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblxuLy8ga2V5d29yZHMgdGhhdCBkb24ndCBtYWtlIHNlbnNlIGluc2lkZSBleHByZXNzaW9uc1xudmFyIGltcHJvcGVyS2V5d29yZHMgPSAnYnJlYWssY2FzZSxjbGFzcyxjYXRjaCxjb25zdCxjb250aW51ZSxkZWJ1Z2dlcixkZWZhdWx0LCcgKyAnZGVsZXRlLGRvLGVsc2UsZXhwb3J0LGV4dGVuZHMsZmluYWxseSxmb3IsZnVuY3Rpb24saWYsJyArICdpbXBvcnQsaW4saW5zdGFuY2VvZixsZXQscmV0dXJuLHN1cGVyLHN3aXRjaCx0aHJvdyx0cnksJyArICd2YXIsd2hpbGUsd2l0aCx5aWVsZCxlbnVtLGF3YWl0LGltcGxlbWVudHMscGFja2FnZSwnICsgJ3Byb3RlY3RlZCxzdGF0aWMsaW50ZXJmYWNlLHByaXZhdGUscHVibGljJztcbnZhciBpbXByb3BlcktleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBpbXByb3BlcktleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpO1xuXG52YXIgd3NSRSA9IC9cXHMvZztcbnZhciBuZXdsaW5lUkUgPSAvXFxuL2c7XG52YXIgc2F2ZVJFID0gL1tcXHssXVxccypbXFx3XFwkX10rXFxzKjp8KCcoPzpbXidcXFxcXXxcXFxcLikqJ3xcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8YCg/OlteYFxcXFxdfFxcXFwuKSpcXCRcXHt8XFx9KD86W15gXFxcXF18XFxcXC4pKmB8YCg/OlteYFxcXFxdfFxcXFwuKSpgKXxuZXcgfHR5cGVvZiB8dm9pZCAvZztcbnZhciByZXN0b3JlUkUgPSAvXCIoXFxkKylcIi9nO1xudmFyIHBhdGhUZXN0UkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKD86XFwuW0EtWmEtel8kXVtcXHckXSp8XFxbJy4qPydcXF18XFxbXCIuKj9cIlxcXXxcXFtcXGQrXFxdfFxcW1tBLVphLXpfJF1bXFx3JF0qXFxdKSokLztcbnZhciBpZGVudFJFID0gL1teXFx3JFxcLl0oPzpbQS1aYS16XyRdW1xcdyRdKikvZztcbnZhciBsaXRlcmFsVmFsdWVSRSQxID0gL14oPzp0cnVlfGZhbHNlfG51bGx8dW5kZWZpbmVkfEluZmluaXR5fE5hTikkLztcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbi8qKlxuICogU2F2ZSAvIFJld3JpdGUgLyBSZXN0b3JlXG4gKlxuICogV2hlbiByZXdyaXRpbmcgcGF0aHMgZm91bmQgaW4gYW4gZXhwcmVzc2lvbiwgaXQgaXNcbiAqIHBvc3NpYmxlIGZvciB0aGUgc2FtZSBsZXR0ZXIgc2VxdWVuY2VzIHRvIGJlIGZvdW5kIGluXG4gKiBzdHJpbmdzIGFuZCBPYmplY3QgbGl0ZXJhbCBwcm9wZXJ0eSBrZXlzLiBUaGVyZWZvcmUgd2VcbiAqIHJlbW92ZSBhbmQgc3RvcmUgdGhlc2UgcGFydHMgaW4gYSB0ZW1wb3JhcnkgYXJyYXksIGFuZFxuICogcmVzdG9yZSB0aGVtIGFmdGVyIHRoZSBwYXRoIHJld3JpdGUuXG4gKi9cblxudmFyIHNhdmVkID0gW107XG5cbi8qKlxuICogU2F2ZSByZXBsYWNlclxuICpcbiAqIFRoZSBzYXZlIHJlZ2V4IGNhbiBtYXRjaCB0d28gcG9zc2libGUgY2FzZXM6XG4gKiAxLiBBbiBvcGVuaW5nIG9iamVjdCBsaXRlcmFsXG4gKiAyLiBBIHN0cmluZ1xuICogSWYgbWF0Y2hlZCBhcyBhIHBsYWluIHN0cmluZywgd2UgbmVlZCB0byBlc2NhcGUgaXRzXG4gKiBuZXdsaW5lcywgc2luY2UgdGhlIHN0cmluZyBuZWVkcyB0byBiZSBwcmVzZXJ2ZWQgd2hlblxuICogZ2VuZXJhdGluZyB0aGUgZnVuY3Rpb24gYm9keS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gaXNTdHJpbmcgLSBzdHIgaWYgbWF0Y2hlZCBhcyBhIHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfSAtIHBsYWNlaG9sZGVyIHdpdGggaW5kZXhcbiAqL1xuXG5mdW5jdGlvbiBzYXZlKHN0ciwgaXNTdHJpbmcpIHtcbiAgdmFyIGkgPSBzYXZlZC5sZW5ndGg7XG4gIHNhdmVkW2ldID0gaXNTdHJpbmcgPyBzdHIucmVwbGFjZShuZXdsaW5lUkUsICdcXFxcbicpIDogc3RyO1xuICByZXR1cm4gJ1wiJyArIGkgKyAnXCInO1xufVxuXG4vKipcbiAqIFBhdGggcmV3cml0ZSByZXBsYWNlclxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSByYXdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiByZXdyaXRlKHJhdykge1xuICB2YXIgYyA9IHJhdy5jaGFyQXQoMCk7XG4gIHZhciBwYXRoID0gcmF3LnNsaWNlKDEpO1xuICBpZiAoYWxsb3dlZEtleXdvcmRzUkUudGVzdChwYXRoKSkge1xuICAgIHJldHVybiByYXc7XG4gIH0gZWxzZSB7XG4gICAgcGF0aCA9IHBhdGguaW5kZXhPZignXCInKSA+IC0xID8gcGF0aC5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSkgOiBwYXRoO1xuICAgIHJldHVybiBjICsgJ3Njb3BlLicgKyBwYXRoO1xuICB9XG59XG5cbi8qKlxuICogUmVzdG9yZSByZXBsYWNlclxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBpIC0gbWF0Y2hlZCBzYXZlIGluZGV4XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcmVzdG9yZShzdHIsIGkpIHtcbiAgcmV0dXJuIHNhdmVkW2ldO1xufVxuXG4vKipcbiAqIFJld3JpdGUgYW4gZXhwcmVzc2lvbiwgcHJlZml4aW5nIGFsbCBwYXRoIGFjY2Vzc29ycyB3aXRoXG4gKiBgc2NvcGUuYCBhbmQgZ2VuZXJhdGUgZ2V0dGVyL3NldHRlciBmdW5jdGlvbnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZUdldHRlcihleHApIHtcbiAgaWYgKGltcHJvcGVyS2V5d29yZHNSRS50ZXN0KGV4cCkpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0F2b2lkIHVzaW5nIHJlc2VydmVkIGtleXdvcmRzIGluIGV4cHJlc3Npb246ICcgKyBleHApO1xuICB9XG4gIC8vIHJlc2V0IHN0YXRlXG4gIHNhdmVkLmxlbmd0aCA9IDA7XG4gIC8vIHNhdmUgc3RyaW5ncyBhbmQgb2JqZWN0IGxpdGVyYWwga2V5c1xuICB2YXIgYm9keSA9IGV4cC5yZXBsYWNlKHNhdmVSRSwgc2F2ZSkucmVwbGFjZSh3c1JFLCAnJyk7XG4gIC8vIHJld3JpdGUgYWxsIHBhdGhzXG4gIC8vIHBhZCAxIHNwYWNlIGhlcmUgYmVjYXVzZSB0aGUgcmVnZXggbWF0Y2hlcyAxIGV4dHJhIGNoYXJcbiAgYm9keSA9ICgnICcgKyBib2R5KS5yZXBsYWNlKGlkZW50UkUsIHJld3JpdGUpLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKTtcbiAgcmV0dXJuIG1ha2VHZXR0ZXJGbihib2R5KTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGdldHRlciBmdW5jdGlvbi4gUmVxdWlyZXMgZXZhbC5cbiAqXG4gKiBXZSBpc29sYXRlIHRoZSB0cnkvY2F0Y2ggc28gaXQgZG9lc24ndCBhZmZlY3QgdGhlXG4gKiBvcHRpbWl6YXRpb24gb2YgdGhlIHBhcnNlIGZ1bmN0aW9uIHdoZW4gaXQgaXMgbm90IGNhbGxlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYm9keVxuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIG1ha2VHZXR0ZXJGbihib2R5KSB7XG4gIHRyeSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdzY29wZScsICdyZXR1cm4gJyArIGJvZHkgKyAnOycpO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChlLnRvU3RyaW5nKCkubWF0Y2goL3Vuc2FmZS1ldmFsfENTUC8pKSB7XG4gICAgICAgIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdGhlIGRlZmF1bHQgYnVpbGQgb2YgVnVlLmpzIGluIGFuIGVudmlyb25tZW50ICcgKyAnd2l0aCBDb250ZW50IFNlY3VyaXR5IFBvbGljeSB0aGF0IHByb2hpYml0cyB1bnNhZmUtZXZhbC4gJyArICdVc2UgdGhlIENTUC1jb21wbGlhbnQgYnVpbGQgaW5zdGVhZDogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2luc3RhbGxhdGlvbi5odG1sI0NTUC1jb21wbGlhbnQtYnVpbGQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdhcm4oJ0ludmFsaWQgZXhwcmVzc2lvbi4gJyArICdHZW5lcmF0ZWQgZnVuY3Rpb24gYm9keTogJyArIGJvZHkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9vcDtcbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgYSBzZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSBleHByZXNzaW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlU2V0dGVyKGV4cCkge1xuICB2YXIgcGF0aCA9IHBhcnNlUGF0aChleHApO1xuICBpZiAocGF0aCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIHZhbCkge1xuICAgICAgc2V0UGF0aChzY29wZSwgcGF0aCwgdmFsKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBzZXR0ZXIgZXhwcmVzc2lvbjogJyArIGV4cCk7XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBhbiBleHByZXNzaW9uIGludG8gcmUtd3JpdHRlbiBnZXR0ZXIvc2V0dGVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG5lZWRTZXRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlRXhwcmVzc2lvbihleHAsIG5lZWRTZXQpIHtcbiAgZXhwID0gZXhwLnRyaW0oKTtcbiAgLy8gdHJ5IGNhY2hlXG4gIHZhciBoaXQgPSBleHByZXNzaW9uQ2FjaGUuZ2V0KGV4cCk7XG4gIGlmIChoaXQpIHtcbiAgICBpZiAobmVlZFNldCAmJiAhaGl0LnNldCkge1xuICAgICAgaGl0LnNldCA9IGNvbXBpbGVTZXR0ZXIoaGl0LmV4cCk7XG4gICAgfVxuICAgIHJldHVybiBoaXQ7XG4gIH1cbiAgdmFyIHJlcyA9IHsgZXhwOiBleHAgfTtcbiAgcmVzLmdldCA9IGlzU2ltcGxlUGF0aChleHApICYmIGV4cC5pbmRleE9mKCdbJykgPCAwXG4gIC8vIG9wdGltaXplZCBzdXBlciBzaW1wbGUgZ2V0dGVyXG4gID8gbWFrZUdldHRlckZuKCdzY29wZS4nICsgZXhwKVxuICAvLyBkeW5hbWljIGdldHRlclxuICA6IGNvbXBpbGVHZXR0ZXIoZXhwKTtcbiAgaWYgKG5lZWRTZXQpIHtcbiAgICByZXMuc2V0ID0gY29tcGlsZVNldHRlcihleHApO1xuICB9XG4gIGV4cHJlc3Npb25DYWNoZS5wdXQoZXhwLCByZXMpO1xuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBzaW1wbGUgcGF0aC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzU2ltcGxlUGF0aChleHApIHtcbiAgcmV0dXJuIHBhdGhUZXN0UkUudGVzdChleHApICYmXG4gIC8vIGRvbid0IHRyZWF0IGxpdGVyYWwgdmFsdWVzIGFzIHBhdGhzXG4gICFsaXRlcmFsVmFsdWVSRSQxLnRlc3QoZXhwKSAmJlxuICAvLyBNYXRoIGNvbnN0YW50cyBlLmcuIE1hdGguUEksIE1hdGguRSBldGMuXG4gIGV4cC5zbGljZSgwLCA1KSAhPT0gJ01hdGguJztcbn1cblxudmFyIGV4cHJlc3Npb24gPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VFeHByZXNzaW9uOiBwYXJzZUV4cHJlc3Npb24sXG4gIGlzU2ltcGxlUGF0aDogaXNTaW1wbGVQYXRoXG59KTtcblxuLy8gd2UgaGF2ZSB0d28gc2VwYXJhdGUgcXVldWVzOiBvbmUgZm9yIGRpcmVjdGl2ZSB1cGRhdGVzXG4vLyBhbmQgb25lIGZvciB1c2VyIHdhdGNoZXIgcmVnaXN0ZXJlZCB2aWEgJHdhdGNoKCkuXG4vLyB3ZSB3YW50IHRvIGd1YXJhbnRlZSBkaXJlY3RpdmUgdXBkYXRlcyB0byBiZSBjYWxsZWRcbi8vIGJlZm9yZSB1c2VyIHdhdGNoZXJzIHNvIHRoYXQgd2hlbiB1c2VyIHdhdGNoZXJzIGFyZVxuLy8gdHJpZ2dlcmVkLCB0aGUgRE9NIHdvdWxkIGhhdmUgYWxyZWFkeSBiZWVuIGluIHVwZGF0ZWRcbi8vIHN0YXRlLlxuXG52YXIgcXVldWUgPSBbXTtcbnZhciB1c2VyUXVldWUgPSBbXTtcbnZhciBoYXMgPSB7fTtcbnZhciBjaXJjdWxhciA9IHt9O1xudmFyIHdhaXRpbmcgPSBmYWxzZTtcblxuLyoqXG4gKiBSZXNldCB0aGUgYmF0Y2hlcidzIHN0YXRlLlxuICovXG5cbmZ1bmN0aW9uIHJlc2V0QmF0Y2hlclN0YXRlKCkge1xuICBxdWV1ZS5sZW5ndGggPSAwO1xuICB1c2VyUXVldWUubGVuZ3RoID0gMDtcbiAgaGFzID0ge307XG4gIGNpcmN1bGFyID0ge307XG4gIHdhaXRpbmcgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy5cbiAqL1xuXG5mdW5jdGlvbiBmbHVzaEJhdGNoZXJRdWV1ZSgpIHtcbiAgdmFyIF9hZ2FpbiA9IHRydWU7XG5cbiAgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7XG4gICAgX2FnYWluID0gZmFsc2U7XG5cbiAgICBydW5CYXRjaGVyUXVldWUocXVldWUpO1xuICAgIHJ1bkJhdGNoZXJRdWV1ZSh1c2VyUXVldWUpO1xuICAgIC8vIHVzZXIgd2F0Y2hlcnMgdHJpZ2dlcmVkIG1vcmUgd2F0Y2hlcnMsXG4gICAgLy8ga2VlcCBmbHVzaGluZyB1bnRpbCBpdCBkZXBsZXRlc1xuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgIF9hZ2FpbiA9IHRydWU7XG4gICAgICBjb250aW51ZSBfZnVuY3Rpb247XG4gICAgfVxuICAgIC8vIGRldiB0b29sIGhvb2tcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoZGV2dG9vbHMgJiYgY29uZmlnLmRldnRvb2xzKSB7XG4gICAgICBkZXZ0b29scy5lbWl0KCdmbHVzaCcpO1xuICAgIH1cbiAgICByZXNldEJhdGNoZXJTdGF0ZSgpO1xuICB9XG59XG5cbi8qKlxuICogUnVuIHRoZSB3YXRjaGVycyBpbiBhIHNpbmdsZSBxdWV1ZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBxdWV1ZVxuICovXG5cbmZ1bmN0aW9uIHJ1bkJhdGNoZXJRdWV1ZShxdWV1ZSkge1xuICAvLyBkbyBub3QgY2FjaGUgbGVuZ3RoIGJlY2F1c2UgbW9yZSB3YXRjaGVycyBtaWdodCBiZSBwdXNoZWRcbiAgLy8gYXMgd2UgcnVuIGV4aXN0aW5nIHdhdGNoZXJzXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgd2F0Y2hlciA9IHF1ZXVlW2ldO1xuICAgIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG4gICAgaGFzW2lkXSA9IG51bGw7XG4gICAgd2F0Y2hlci5ydW4oKTtcbiAgICAvLyBpbiBkZXYgYnVpbGQsIGNoZWNrIGFuZCBzdG9wIGNpcmN1bGFyIHVwZGF0ZXMuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaGFzW2lkXSAhPSBudWxsKSB7XG4gICAgICBjaXJjdWxhcltpZF0gPSAoY2lyY3VsYXJbaWRdIHx8IDApICsgMTtcbiAgICAgIGlmIChjaXJjdWxhcltpZF0gPiBjb25maWcuX21heFVwZGF0ZUNvdW50KSB7XG4gICAgICAgIHdhcm4oJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCBmb3Igd2F0Y2hlciAnICsgJ3dpdGggZXhwcmVzc2lvbiBcIicgKyB3YXRjaGVyLmV4cHJlc3Npb24gKyAnXCInLCB3YXRjaGVyLnZtKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHF1ZXVlLmxlbmd0aCA9IDA7XG59XG5cbi8qKlxuICogUHVzaCBhIHdhdGNoZXIgaW50byB0aGUgd2F0Y2hlciBxdWV1ZS5cbiAqIEpvYnMgd2l0aCBkdXBsaWNhdGUgSURzIHdpbGwgYmUgc2tpcHBlZCB1bmxlc3MgaXQnc1xuICogcHVzaGVkIHdoZW4gdGhlIHF1ZXVlIGlzIGJlaW5nIGZsdXNoZWQuXG4gKlxuICogQHBhcmFtIHtXYXRjaGVyfSB3YXRjaGVyXG4gKiAgIHByb3BlcnRpZXM6XG4gKiAgIC0ge051bWJlcn0gaWRcbiAqICAgLSB7RnVuY3Rpb259IHJ1blxuICovXG5cbmZ1bmN0aW9uIHB1c2hXYXRjaGVyKHdhdGNoZXIpIHtcbiAgdmFyIGlkID0gd2F0Y2hlci5pZDtcbiAgaWYgKGhhc1tpZF0gPT0gbnVsbCkge1xuICAgIC8vIHB1c2ggd2F0Y2hlciBpbnRvIGFwcHJvcHJpYXRlIHF1ZXVlXG4gICAgdmFyIHEgPSB3YXRjaGVyLnVzZXIgPyB1c2VyUXVldWUgOiBxdWV1ZTtcbiAgICBoYXNbaWRdID0gcS5sZW5ndGg7XG4gICAgcS5wdXNoKHdhdGNoZXIpO1xuICAgIC8vIHF1ZXVlIHRoZSBmbHVzaFxuICAgIGlmICghd2FpdGluZykge1xuICAgICAgd2FpdGluZyA9IHRydWU7XG4gICAgICBuZXh0VGljayhmbHVzaEJhdGNoZXJRdWV1ZSk7XG4gICAgfVxuICB9XG59XG5cbnZhciB1aWQkMiA9IDA7XG5cbi8qKlxuICogQSB3YXRjaGVyIHBhcnNlcyBhbiBleHByZXNzaW9uLCBjb2xsZWN0cyBkZXBlbmRlbmNpZXMsXG4gKiBhbmQgZmlyZXMgY2FsbGJhY2sgd2hlbiB0aGUgZXhwcmVzc2lvbiB2YWx1ZSBjaGFuZ2VzLlxuICogVGhpcyBpcyB1c2VkIGZvciBib3RoIHRoZSAkd2F0Y2goKSBhcGkgYW5kIGRpcmVjdGl2ZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiAgICAgICAgICAgICAgICAgLSB7QXJyYXl9IGZpbHRlcnNcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB0d29XYXlcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdXNlclxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHN5bmNcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsYXp5XG4gKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwcmVQcm9jZXNzXVxuICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcG9zdFByb2Nlc3NdXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcbiAgLy8gbWl4IGluIG9wdGlvbnNcbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBleHRlbmQodGhpcywgb3B0aW9ucyk7XG4gIH1cbiAgdmFyIGlzRm4gPSB0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJztcbiAgdGhpcy52bSA9IHZtO1xuICB2bS5fd2F0Y2hlcnMucHVzaCh0aGlzKTtcbiAgdGhpcy5leHByZXNzaW9uID0gZXhwT3JGbjtcbiAgdGhpcy5jYiA9IGNiO1xuICB0aGlzLmlkID0gKyt1aWQkMjsgLy8gdWlkIGZvciBiYXRjaGluZ1xuICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gIHRoaXMuZGlydHkgPSB0aGlzLmxhenk7IC8vIGZvciBsYXp5IHdhdGNoZXJzXG4gIHRoaXMuZGVwcyA9IFtdO1xuICB0aGlzLm5ld0RlcHMgPSBbXTtcbiAgdGhpcy5kZXBJZHMgPSBuZXcgX1NldCgpO1xuICB0aGlzLm5ld0RlcElkcyA9IG5ldyBfU2V0KCk7XG4gIHRoaXMucHJldkVycm9yID0gbnVsbDsgLy8gZm9yIGFzeW5jIGVycm9yIHN0YWNrc1xuICAvLyBwYXJzZSBleHByZXNzaW9uIGZvciBnZXR0ZXIvc2V0dGVyXG4gIGlmIChpc0ZuKSB7XG4gICAgdGhpcy5nZXR0ZXIgPSBleHBPckZuO1xuICAgIHRoaXMuc2V0dGVyID0gdW5kZWZpbmVkO1xuICB9IGVsc2Uge1xuICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwT3JGbiwgdGhpcy50d29XYXkpO1xuICAgIHRoaXMuZ2V0dGVyID0gcmVzLmdldDtcbiAgICB0aGlzLnNldHRlciA9IHJlcy5zZXQ7XG4gIH1cbiAgdGhpcy52YWx1ZSA9IHRoaXMubGF6eSA/IHVuZGVmaW5lZCA6IHRoaXMuZ2V0KCk7XG4gIC8vIHN0YXRlIGZvciBhdm9pZGluZyBmYWxzZSB0cmlnZ2VycyBmb3IgZGVlcCBhbmQgQXJyYXlcbiAgLy8gd2F0Y2hlcnMgZHVyaW5nIHZtLl9kaWdlc3QoKVxuICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xufVxuXG4vKipcbiAqIEV2YWx1YXRlIHRoZSBnZXR0ZXIsIGFuZCByZS1jb2xsZWN0IGRlcGVuZGVuY2llcy5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuYmVmb3JlR2V0KCk7XG4gIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcbiAgdmFyIHZhbHVlO1xuICB0cnkge1xuICAgIHZhbHVlID0gdGhpcy5nZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG4gICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgZXhwcmVzc2lvbiAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG4gICAgfVxuICB9XG4gIC8vIFwidG91Y2hcIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhc1xuICAvLyBkZXBlbmRlbmNpZXMgZm9yIGRlZXAgd2F0Y2hpbmdcbiAgaWYgKHRoaXMuZGVlcCkge1xuICAgIHRyYXZlcnNlKHZhbHVlKTtcbiAgfVxuICBpZiAodGhpcy5wcmVQcm9jZXNzKSB7XG4gICAgdmFsdWUgPSB0aGlzLnByZVByb2Nlc3ModmFsdWUpO1xuICB9XG4gIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIG51bGwsIHRoaXMuZmlsdGVycywgZmFsc2UpO1xuICB9XG4gIGlmICh0aGlzLnBvc3RQcm9jZXNzKSB7XG4gICAgdmFsdWUgPSB0aGlzLnBvc3RQcm9jZXNzKHZhbHVlKTtcbiAgfVxuICB0aGlzLmFmdGVyR2V0KCk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcbiAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyh2YWx1ZSwgdGhpcy52YWx1ZSwgdGhpcy5maWx0ZXJzLCB0cnVlKTtcbiAgfVxuICB0cnkge1xuICAgIHRoaXMuc2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlLCB2YWx1ZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcbiAgICAgIHdhcm4oJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBzZXR0ZXIgJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuICAgIH1cbiAgfVxuICAvLyB0d28td2F5IHN5bmMgZm9yIHYtZm9yIGFsaWFzXG4gIHZhciBmb3JDb250ZXh0ID0gc2NvcGUuJGZvckNvbnRleHQ7XG4gIGlmIChmb3JDb250ZXh0ICYmIGZvckNvbnRleHQuYWxpYXMgPT09IHRoaXMuZXhwcmVzc2lvbikge1xuICAgIGlmIChmb3JDb250ZXh0LmZpbHRlcnMpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0d28td2F5IGJpbmRpbmcgb24gJyArICdhIHYtZm9yIGFsaWFzICgnICsgdGhpcy5leHByZXNzaW9uICsgJyksIGFuZCB0aGUgJyArICd2LWZvciBoYXMgZmlsdGVycy4gVGhpcyB3aWxsIG5vdCB3b3JrIHByb3Blcmx5LiAnICsgJ0VpdGhlciByZW1vdmUgdGhlIGZpbHRlcnMgb3IgdXNlIGFuIGFycmF5IG9mICcgKyAnb2JqZWN0cyBhbmQgYmluZCB0byBvYmplY3QgcHJvcGVydGllcyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3JDb250ZXh0Ll93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2NvcGUuJGtleSkge1xuICAgICAgICAvLyBvcmlnaW5hbCBpcyBhbiBvYmplY3RcbiAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZVtzY29wZS4ka2V5XSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZS4kc2V0KHNjb3BlLiRpbmRleCwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIFByZXBhcmUgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5iZWZvcmVHZXQgPSBmdW5jdGlvbiAoKSB7XG4gIERlcC50YXJnZXQgPSB0aGlzO1xufTtcblxuLyoqXG4gKiBBZGQgYSBkZXBlbmRlbmN5IHRvIHRoaXMgZGlyZWN0aXZlLlxuICpcbiAqIEBwYXJhbSB7RGVwfSBkZXBcbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5hZGREZXAgPSBmdW5jdGlvbiAoZGVwKSB7XG4gIHZhciBpZCA9IGRlcC5pZDtcbiAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoaWQpKSB7XG4gICAgdGhpcy5uZXdEZXBJZHMuYWRkKGlkKTtcbiAgICB0aGlzLm5ld0RlcHMucHVzaChkZXApO1xuICAgIGlmICghdGhpcy5kZXBJZHMuaGFzKGlkKSkge1xuICAgICAgZGVwLmFkZFN1Yih0aGlzKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5hZnRlckdldCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldCA9IG51bGw7XG4gIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHZhciBkZXAgPSB0aGlzLmRlcHNbaV07XG4gICAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoZGVwLmlkKSkge1xuICAgICAgZGVwLnJlbW92ZVN1Yih0aGlzKTtcbiAgICB9XG4gIH1cbiAgdmFyIHRtcCA9IHRoaXMuZGVwSWRzO1xuICB0aGlzLmRlcElkcyA9IHRoaXMubmV3RGVwSWRzO1xuICB0aGlzLm5ld0RlcElkcyA9IHRtcDtcbiAgdGhpcy5uZXdEZXBJZHMuY2xlYXIoKTtcbiAgdG1wID0gdGhpcy5kZXBzO1xuICB0aGlzLmRlcHMgPSB0aGlzLm5ld0RlcHM7XG4gIHRoaXMubmV3RGVwcyA9IHRtcDtcbiAgdGhpcy5uZXdEZXBzLmxlbmd0aCA9IDA7XG59O1xuXG4vKipcbiAqIFN1YnNjcmliZXIgaW50ZXJmYWNlLlxuICogV2lsbCBiZSBjYWxsZWQgd2hlbiBhIGRlcGVuZGVuY3kgY2hhbmdlcy5cbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNoYWxsb3dcbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoc2hhbGxvdykge1xuICBpZiAodGhpcy5sYXp5KSB7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH0gZWxzZSBpZiAodGhpcy5zeW5jIHx8ICFjb25maWcuYXN5bmMpIHtcbiAgICB0aGlzLnJ1bigpO1xuICB9IGVsc2Uge1xuICAgIC8vIGlmIHF1ZXVlZCwgb25seSBvdmVyd3JpdGUgc2hhbGxvdyB3aXRoIG5vbi1zaGFsbG93LFxuICAgIC8vIGJ1dCBub3QgdGhlIG90aGVyIHdheSBhcm91bmQuXG4gICAgdGhpcy5zaGFsbG93ID0gdGhpcy5xdWV1ZWQgPyBzaGFsbG93ID8gdGhpcy5zaGFsbG93IDogZmFsc2UgOiAhIXNoYWxsb3c7XG4gICAgdGhpcy5xdWV1ZWQgPSB0cnVlO1xuICAgIC8vIHJlY29yZCBiZWZvcmUtcHVzaCBlcnJvciBzdGFjayBpbiBkZWJ1ZyBtb2RlXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnKSB7XG4gICAgICB0aGlzLnByZXZFcnJvciA9IG5ldyBFcnJvcignW3Z1ZV0gYXN5bmMgc3RhY2sgdHJhY2UnKTtcbiAgICB9XG4gICAgcHVzaFdhdGNoZXIodGhpcyk7XG4gIH1cbn07XG5cbi8qKlxuICogQmF0Y2hlciBqb2IgaW50ZXJmYWNlLlxuICogV2lsbCBiZSBjYWxsZWQgYnkgdGhlIGJhdGNoZXIuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLmdldCgpO1xuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy52YWx1ZSB8fFxuICAgIC8vIERlZXAgd2F0Y2hlcnMgYW5kIHdhdGNoZXJzIG9uIE9iamVjdC9BcnJheXMgc2hvdWxkIGZpcmUgZXZlblxuICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXlcbiAgICAvLyBoYXZlIG11dGF0ZWQ7IGJ1dCBvbmx5IGRvIHNvIGlmIHRoaXMgaXMgYVxuICAgIC8vIG5vbi1zaGFsbG93IHVwZGF0ZSAoY2F1c2VkIGJ5IGEgdm0gZGlnZXN0KS5cbiAgICAoaXNPYmplY3QodmFsdWUpIHx8IHRoaXMuZGVlcCkgJiYgIXRoaXMuc2hhbGxvdykge1xuICAgICAgLy8gc2V0IG5ldyB2YWx1ZVxuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIC8vIGluIGRlYnVnICsgYXN5bmMgbW9kZSwgd2hlbiBhIHdhdGNoZXIgY2FsbGJhY2tzXG4gICAgICAvLyB0aHJvd3MsIHdlIGFsc28gdGhyb3cgdGhlIHNhdmVkIGJlZm9yZS1wdXNoIGVycm9yXG4gICAgICAvLyBzbyB0aGUgZnVsbCBjcm9zcy10aWNrIHN0YWNrIHRyYWNlIGlzIGF2YWlsYWJsZS5cbiAgICAgIHZhciBwcmV2RXJyb3IgPSB0aGlzLnByZXZFcnJvcjtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnICYmIHByZXZFcnJvcikge1xuICAgICAgICB0aGlzLnByZXZFcnJvciA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyBwcmV2RXJyb3I7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG4gIH1cbn07XG5cbi8qKlxuICogRXZhbHVhdGUgdGhlIHZhbHVlIG9mIHRoZSB3YXRjaGVyLlxuICogVGhpcyBvbmx5IGdldHMgY2FsbGVkIGZvciBsYXp5IHdhdGNoZXJzLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKCkge1xuICAvLyBhdm9pZCBvdmVyd3JpdGluZyBhbm90aGVyIHdhdGNoZXIgdGhhdCBpcyBiZWluZ1xuICAvLyBjb2xsZWN0ZWQuXG4gIHZhciBjdXJyZW50ID0gRGVwLnRhcmdldDtcbiAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0KCk7XG4gIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgRGVwLnRhcmdldCA9IGN1cnJlbnQ7XG59O1xuXG4vKipcbiAqIERlcGVuZCBvbiBhbGwgZGVwcyBjb2xsZWN0ZWQgYnkgdGhpcyB3YXRjaGVyLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgdGhpcy5kZXBzW2ldLmRlcGVuZCgpO1xuICB9XG59O1xuXG4vKipcbiAqIFJlbW92ZSBzZWxmIGZyb20gYWxsIGRlcGVuZGVuY2llcycgc3ViY3JpYmVyIGxpc3QuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUudGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gdm0ncyB3YXRjaGVyIGxpc3RcbiAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgZXhwZW5zaXZlIG9wZXJhdGlvbiBzbyB3ZSBza2lwIGl0XG4gICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIGRlc3Ryb3llZCBvciBpcyBwZXJmb3JtaW5nIGEgdi1mb3JcbiAgICAvLyByZS1yZW5kZXIgKHRoZSB3YXRjaGVyIGxpc3QgaXMgdGhlbiBmaWx0ZXJlZCBieSB2LWZvcikuXG4gICAgaWYgKCF0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkICYmICF0aGlzLnZtLl92Rm9yUmVtb3ZpbmcpIHtcbiAgICAgIHRoaXMudm0uX3dhdGNoZXJzLiRyZW1vdmUodGhpcyk7XG4gICAgfVxuICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0aGlzLmRlcHNbaV0ucmVtb3ZlU3ViKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMudm0gPSB0aGlzLmNiID0gdGhpcy52YWx1ZSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogUmVjcnVzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcbiAqIGdldHRlcnMsIHNvIHRoYXQgZXZlcnkgbmVzdGVkIHByb3BlcnR5IGluc2lkZSB0aGUgb2JqZWN0XG4gKiBpcyBjb2xsZWN0ZWQgYXMgYSBcImRlZXBcIiBkZXBlbmRlbmN5LlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxudmFyIHNlZW5PYmplY3RzID0gbmV3IF9TZXQoKTtcbmZ1bmN0aW9uIHRyYXZlcnNlKHZhbCwgc2Vlbikge1xuICB2YXIgaSA9IHVuZGVmaW5lZCxcbiAgICAgIGtleXMgPSB1bmRlZmluZWQ7XG4gIGlmICghc2Vlbikge1xuICAgIHNlZW4gPSBzZWVuT2JqZWN0cztcbiAgICBzZWVuLmNsZWFyKCk7XG4gIH1cbiAgdmFyIGlzQSA9IGlzQXJyYXkodmFsKTtcbiAgdmFyIGlzTyA9IGlzT2JqZWN0KHZhbCk7XG4gIGlmICgoaXNBIHx8IGlzTykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWwpKSB7XG4gICAgaWYgKHZhbC5fX29iX18pIHtcbiAgICAgIHZhciBkZXBJZCA9IHZhbC5fX29iX18uZGVwLmlkO1xuICAgICAgaWYgKHNlZW4uaGFzKGRlcElkKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWVuLmFkZChkZXBJZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc0EpIHtcbiAgICAgIGkgPSB2YWwubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2ldLCBzZWVuKTtcbiAgICB9IGVsc2UgaWYgKGlzTykge1xuICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG4gICAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxba2V5c1tpXV0sIHNlZW4pO1xuICAgIH1cbiAgfVxufVxuXG52YXIgdGV4dCQxID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdGhpcy5hdHRyID0gdGhpcy5lbC5ub2RlVHlwZSA9PT0gMyA/ICdkYXRhJyA6ICd0ZXh0Q29udGVudCc7XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmVsW3RoaXMuYXR0cl0gPSBfdG9TdHJpbmcodmFsdWUpO1xuICB9XG59O1xuXG52YXIgdGVtcGxhdGVDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcbnZhciBpZFNlbGVjdG9yQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cbnZhciBtYXAgPSB7XG4gIGVmYXVsdDogWzAsICcnLCAnJ10sXG4gIGxlZ2VuZDogWzEsICc8ZmllbGRzZXQ+JywgJzwvZmllbGRzZXQ+J10sXG4gIHRyOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcbiAgY29sOiBbMiwgJzx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXVxufTtcblxubWFwLnRkID0gbWFwLnRoID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cbm1hcC5vcHRpb24gPSBtYXAub3B0Z3JvdXAgPSBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsICc8L3NlbGVjdD4nXTtcblxubWFwLnRoZWFkID0gbWFwLnRib2R5ID0gbWFwLmNvbGdyb3VwID0gbWFwLmNhcHRpb24gPSBtYXAudGZvb3QgPSBbMSwgJzx0YWJsZT4nLCAnPC90YWJsZT4nXTtcblxubWFwLmcgPSBtYXAuZGVmcyA9IG1hcC5zeW1ib2wgPSBtYXAudXNlID0gbWFwLmltYWdlID0gbWFwLnRleHQgPSBtYXAuY2lyY2xlID0gbWFwLmVsbGlwc2UgPSBtYXAubGluZSA9IG1hcC5wYXRoID0gbWFwLnBvbHlnb24gPSBtYXAucG9seWxpbmUgPSBtYXAucmVjdCA9IFsxLCAnPHN2ZyAnICsgJ3htbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiAnICsgJ3htbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiICcgKyAneG1sbnM6ZXY9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHNcIicgKyAndmVyc2lvbj1cIjEuMVwiPicsICc8L3N2Zz4nXTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBzdXBwb3J0ZWQgdGVtcGxhdGUgbm9kZSB3aXRoIGFcbiAqIERvY3VtZW50RnJhZ21lbnQgY29udGVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNSZWFsVGVtcGxhdGUobm9kZSkge1xuICByZXR1cm4gaXNUZW1wbGF0ZShub2RlKSAmJiBpc0ZyYWdtZW50KG5vZGUuY29udGVudCk7XG59XG5cbnZhciB0YWdSRSQxID0gLzwoW1xcdzotXSspLztcbnZhciBlbnRpdHlSRSA9IC8mIz9cXHcrPzsvO1xudmFyIGNvbW1lbnRSRSA9IC88IS0tLztcblxuLyoqXG4gKiBDb252ZXJ0IGEgc3RyaW5nIHRlbXBsYXRlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cbiAqIERldGVybWluZXMgY29ycmVjdCB3cmFwcGluZyBieSB0YWcgdHlwZXMuIFdyYXBwaW5nXG4gKiBzdHJhdGVneSBmb3VuZCBpbiBqUXVlcnkgJiBjb21wb25lbnQvZG9taWZ5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVN0cmluZ1xuICogQHBhcmFtIHtCb29sZWFufSByYXdcbiAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZVN0cmluZywgcmF3KSB7XG4gIC8vIHRyeSBhIGNhY2hlIGhpdCBmaXJzdFxuICB2YXIgY2FjaGVLZXkgPSByYXcgPyB0ZW1wbGF0ZVN0cmluZyA6IHRlbXBsYXRlU3RyaW5nLnRyaW0oKTtcbiAgdmFyIGhpdCA9IHRlbXBsYXRlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgaWYgKGhpdCkge1xuICAgIHJldHVybiBoaXQ7XG4gIH1cblxuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIHRhZ01hdGNoID0gdGVtcGxhdGVTdHJpbmcubWF0Y2godGFnUkUkMSk7XG4gIHZhciBlbnRpdHlNYXRjaCA9IGVudGl0eVJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuICB2YXIgY29tbWVudE1hdGNoID0gY29tbWVudFJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuXG4gIGlmICghdGFnTWF0Y2ggJiYgIWVudGl0eU1hdGNoICYmICFjb21tZW50TWF0Y2gpIHtcbiAgICAvLyB0ZXh0IG9ubHksIHJldHVybiBhIHNpbmdsZSB0ZXh0IG5vZGUuXG4gICAgZnJhZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZW1wbGF0ZVN0cmluZykpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YWcgPSB0YWdNYXRjaCAmJiB0YWdNYXRjaFsxXTtcbiAgICB2YXIgd3JhcCA9IG1hcFt0YWddIHx8IG1hcC5lZmF1bHQ7XG4gICAgdmFyIGRlcHRoID0gd3JhcFswXTtcbiAgICB2YXIgcHJlZml4ID0gd3JhcFsxXTtcbiAgICB2YXIgc3VmZml4ID0gd3JhcFsyXTtcbiAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgbm9kZS5pbm5lckhUTUwgPSBwcmVmaXggKyB0ZW1wbGF0ZVN0cmluZyArIHN1ZmZpeDtcbiAgICB3aGlsZSAoZGVwdGgtLSkge1xuICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkO1xuICAgIH1cblxuICAgIHZhciBjaGlsZDtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIHdoaWxlIChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCkge1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9XG4gIGlmICghcmF3KSB7XG4gICAgdHJpbU5vZGUoZnJhZyk7XG4gIH1cbiAgdGVtcGxhdGVDYWNoZS5wdXQoY2FjaGVLZXksIGZyYWcpO1xuICByZXR1cm4gZnJhZztcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgdGVtcGxhdGUgbm9kZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIG5vZGVUb0ZyYWdtZW50KG5vZGUpIHtcbiAgLy8gaWYgaXRzIGEgdGVtcGxhdGUgdGFnIGFuZCB0aGUgYnJvd3NlciBzdXBwb3J0cyBpdCxcbiAgLy8gaXRzIGNvbnRlbnQgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LiBIb3dldmVyLCBpT1MgU2FmYXJpIGhhc1xuICAvLyBidWcgd2hlbiB1c2luZyBkaXJlY3RseSBjbG9uZWQgdGVtcGxhdGUgY29udGVudCB3aXRoIHRvdWNoXG4gIC8vIGV2ZW50cyBhbmQgY2FuIGNhdXNlIGNyYXNoZXMgd2hlbiB0aGUgbm9kZXMgYXJlIHJlbW92ZWQgZnJvbSBET00sIHNvIHdlXG4gIC8vIGhhdmUgdG8gdHJlYXQgdGVtcGxhdGUgZWxlbWVudHMgYXMgc3RyaW5nIHRlbXBsYXRlcy4gKCMyODA1KVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG4gICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS5pbm5lckhUTUwpO1xuICB9XG4gIC8vIHNjcmlwdCB0ZW1wbGF0ZVxuICBpZiAobm9kZS50YWdOYW1lID09PSAnU0NSSVBUJykge1xuICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUudGV4dENvbnRlbnQpO1xuICB9XG4gIC8vIG5vcm1hbCBub2RlLCBjbG9uZSBpdCB0byBhdm9pZCBtdXRhdGluZyB0aGUgb3JpZ2luYWxcbiAgdmFyIGNsb25lZE5vZGUgPSBjbG9uZU5vZGUobm9kZSk7XG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB2YXIgY2hpbGQ7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gIHdoaWxlIChjaGlsZCA9IGNsb25lZE5vZGUuZmlyc3RDaGlsZCkge1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgfVxuICB0cmltTm9kZShmcmFnKTtcbiAgcmV0dXJuIGZyYWc7XG59XG5cbi8vIFRlc3QgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgU2FmYXJpIHRlbXBsYXRlIGNsb25pbmcgYnVnXG4vLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93dWcuY2dpP2lkPTEzNzc1NVxudmFyIGhhc0Jyb2tlblRlbXBsYXRlID0gKGZ1bmN0aW9uICgpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKGluQnJvd3Nlcikge1xuICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYS5pbm5lckhUTUwgPSAnPHRlbXBsYXRlPjE8L3RlbXBsYXRlPic7XG4gICAgcmV0dXJuICFhLmNsb25lTm9kZSh0cnVlKS5maXJzdENoaWxkLmlubmVySFRNTDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0pKCk7XG5cbi8vIFRlc3QgZm9yIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgY2xvbmUgYnVnXG52YXIgaGFzVGV4dGFyZWFDbG9uZUJ1ZyA9IChmdW5jdGlvbiAoKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChpbkJyb3dzZXIpIHtcbiAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgdC5wbGFjZWhvbGRlciA9ICd0JztcbiAgICByZXR1cm4gdC5jbG9uZU5vZGUodHJ1ZSkudmFsdWUgPT09ICd0JztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0pKCk7XG5cbi8qKlxuICogMS4gRGVhbCB3aXRoIFNhZmFyaSBjbG9uaW5nIG5lc3RlZCA8dGVtcGxhdGU+IGJ1ZyBieVxuICogICAgbWFudWFsbHkgY2xvbmluZyBhbGwgdGVtcGxhdGUgaW5zdGFuY2VzLlxuICogMi4gRGVhbCB3aXRoIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgYnVnIGJ5IHNldHRpbmdcbiAqICAgIHRoZSBjb3JyZWN0IHZhbHVlIGFmdGVyIGNsb25pbmcuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IG5vZGVcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBjbG9uZU5vZGUobm9kZSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3JBbGwpIHtcbiAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUoKTtcbiAgfVxuICB2YXIgcmVzID0gbm9kZS5jbG9uZU5vZGUodHJ1ZSk7XG4gIHZhciBpLCBvcmlnaW5hbCwgY2xvbmVkO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGhhc0Jyb2tlblRlbXBsYXRlKSB7XG4gICAgdmFyIHRlbXBDbG9uZSA9IHJlcztcbiAgICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcbiAgICAgIG5vZGUgPSBub2RlLmNvbnRlbnQ7XG4gICAgICB0ZW1wQ2xvbmUgPSByZXMuY29udGVudDtcbiAgICB9XG4gICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG4gICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuICAgICAgY2xvbmVkID0gdGVtcENsb25lLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG4gICAgICBpID0gY2xvbmVkLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY2xvbmVkW2ldLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lTm9kZShvcmlnaW5hbFtpXSksIGNsb25lZFtpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaGFzVGV4dGFyZWFDbG9uZUJ1Zykge1xuICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgIHJlcy52YWx1ZSA9IG5vZGUudmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuICAgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuICAgICAgICBjbG9uZWQgPSByZXMucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcbiAgICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICBjbG9uZWRbaV0udmFsdWUgPSBvcmlnaW5hbFtpXS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbiBhbmQgbm9ybWFsaXplcyBpdCBpbnRvIGFcbiAqIGEgRG9jdW1lbnRGcmFnbWVudCB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgcGFydGlhbCBvciBhXG4gKiBpbnN0YW5jZSB0ZW1wbGF0ZS5cbiAqXG4gKiBAcGFyYW0geyp9IHRlbXBsYXRlXG4gKiAgICAgICAgUG9zc2libGUgdmFsdWVzIGluY2x1ZGU6XG4gKiAgICAgICAgLSBEb2N1bWVudEZyYWdtZW50IG9iamVjdFxuICogICAgICAgIC0gTm9kZSBvYmplY3Qgb2YgdHlwZSBUZW1wbGF0ZVxuICogICAgICAgIC0gaWQgc2VsZWN0b3I6ICcjc29tZS10ZW1wbGF0ZS1pZCdcbiAqICAgICAgICAtIHRlbXBsYXRlIHN0cmluZzogJzxkaXY+PHNwYW4+e3ttc2d9fTwvc3Bhbj48L2Rpdj4nXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNob3VsZENsb25lXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuICogICAgICAgIGlubGluZSBIVE1MIGludGVycG9sYXRpb24uIERvIG5vdCBjaGVjayBmb3IgaWRcbiAqICAgICAgICBzZWxlY3RvciBhbmQga2VlcCB3aGl0ZXNwYWNlIGluIHRoZSBzdHJpbmcuXG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCBzaG91bGRDbG9uZSwgcmF3KSB7XG4gIHZhciBub2RlLCBmcmFnO1xuXG4gIC8vIGlmIHRoZSB0ZW1wbGF0ZSBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQsXG4gIC8vIGRvIG5vdGhpbmdcbiAgaWYgKGlzRnJhZ21lbnQodGVtcGxhdGUpKSB7XG4gICAgdHJpbU5vZGUodGVtcGxhdGUpO1xuICAgIHJldHVybiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZSh0ZW1wbGF0ZSkgOiB0ZW1wbGF0ZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdGVtcGxhdGUgPT09ICdzdHJpbmcnKSB7XG4gICAgLy8gaWQgc2VsZWN0b3JcbiAgICBpZiAoIXJhdyAmJiB0ZW1wbGF0ZS5jaGFyQXQoMCkgPT09ICcjJykge1xuICAgICAgLy8gaWQgc2VsZWN0b3IgY2FuIGJlIGNhY2hlZCB0b29cbiAgICAgIGZyYWcgPSBpZFNlbGVjdG9yQ2FjaGUuZ2V0KHRlbXBsYXRlKTtcbiAgICAgIGlmICghZnJhZykge1xuICAgICAgICBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGUuc2xpY2UoMSkpO1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudChub2RlKTtcbiAgICAgICAgICAvLyBzYXZlIHNlbGVjdG9yIHRvIGNhY2hlXG4gICAgICAgICAgaWRTZWxlY3RvckNhY2hlLnB1dCh0ZW1wbGF0ZSwgZnJhZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9ybWFsIHN0cmluZyB0ZW1wbGF0ZVxuICAgICAgZnJhZyA9IHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGUsIHJhdyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHRlbXBsYXRlLm5vZGVUeXBlKSB7XG4gICAgLy8gYSBkaXJlY3Qgbm9kZVxuICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudCh0ZW1wbGF0ZSk7XG4gIH1cblxuICByZXR1cm4gZnJhZyAmJiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZShmcmFnKSA6IGZyYWc7XG59XG5cbnZhciB0ZW1wbGF0ZSA9IE9iamVjdC5mcmVlemUoe1xuICBjbG9uZU5vZGU6IGNsb25lTm9kZSxcbiAgcGFyc2VUZW1wbGF0ZTogcGFyc2VUZW1wbGF0ZVxufSk7XG5cbnZhciBodG1sID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gYSBjb21tZW50IG5vZGUgbWVhbnMgdGhpcyBpcyBhIGJpbmRpbmcgZm9yXG4gICAgLy8ge3t7IGlubGluZSB1bmVzY2FwZWQgaHRtbCB9fX1cbiAgICBpZiAodGhpcy5lbC5ub2RlVHlwZSA9PT0gOCkge1xuICAgICAgLy8gaG9sZCBub2Rlc1xuICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgICAgLy8gcmVwbGFjZSB0aGUgcGxhY2Vob2xkZXIgd2l0aCBwcm9wZXIgYW5jaG9yXG4gICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1odG1sJyk7XG4gICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgaWYgKHRoaXMubm9kZXMpIHtcbiAgICAgIHRoaXMuc3dhcCh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgfVxuICB9LFxuXG4gIHN3YXA6IGZ1bmN0aW9uIHN3YXAodmFsdWUpIHtcbiAgICAvLyByZW1vdmUgb2xkIG5vZGVzXG4gICAgdmFyIGkgPSB0aGlzLm5vZGVzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZW1vdmUodGhpcy5ub2Rlc1tpXSk7XG4gICAgfVxuICAgIC8vIGNvbnZlcnQgbmV3IHZhbHVlIHRvIGEgZnJhZ21lbnRcbiAgICAvLyBkbyBub3QgYXR0ZW1wdCB0byByZXRyaWV2ZSBmcm9tIGlkIHNlbGVjdG9yXG4gICAgdmFyIGZyYWcgPSBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlLCB0cnVlKTtcbiAgICAvLyBzYXZlIGEgcmVmZXJlbmNlIHRvIHRoZXNlIG5vZGVzIHNvIHdlIGNhbiByZW1vdmUgbGF0ZXJcbiAgICB0aGlzLm5vZGVzID0gdG9BcnJheShmcmFnLmNoaWxkTm9kZXMpO1xuICAgIGJlZm9yZShmcmFnLCB0aGlzLmFuY2hvcik7XG4gIH1cbn07XG5cbi8qKlxuICogQWJzdHJhY3Rpb24gZm9yIGEgcGFydGlhbGx5LWNvbXBpbGVkIGZyYWdtZW50LlxuICogQ2FuIG9wdGlvbmFsbHkgY29tcGlsZSBjb250ZW50IHdpdGggYSBjaGlsZCBzY29wZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuICogQHBhcmFtIHtGcmFnbWVudH0gW3BhcmVudEZyYWddXG4gKi9cbmZ1bmN0aW9uIEZyYWdtZW50KGxpbmtlciwgdm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG4gIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgdGhpcy5jaGlsZEZyYWdzID0gW107XG4gIHRoaXMudm0gPSB2bTtcbiAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG4gIHRoaXMucGFyZW50RnJhZyA9IHBhcmVudEZyYWc7XG4gIGlmIChwYXJlbnRGcmFnKSB7XG4gICAgcGFyZW50RnJhZy5jaGlsZEZyYWdzLnB1c2godGhpcyk7XG4gIH1cbiAgdGhpcy51bmxpbmsgPSBsaW5rZXIodm0sIGZyYWcsIGhvc3QsIHNjb3BlLCB0aGlzKTtcbiAgdmFyIHNpbmdsZSA9IHRoaXMuc2luZ2xlID0gZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJlxuICAvLyBkbyBub3QgZ28gc2luZ2xlIG1vZGUgaWYgdGhlIG9ubHkgbm9kZSBpcyBhbiBhbmNob3JcbiAgIWZyYWcuY2hpbGROb2Rlc1swXS5fX3ZfYW5jaG9yO1xuICBpZiAoc2luZ2xlKSB7XG4gICAgdGhpcy5ub2RlID0gZnJhZy5jaGlsZE5vZGVzWzBdO1xuICAgIHRoaXMuYmVmb3JlID0gc2luZ2xlQmVmb3JlO1xuICAgIHRoaXMucmVtb3ZlID0gc2luZ2xlUmVtb3ZlO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubm9kZSA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtc3RhcnQnKTtcbiAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtZW5kJyk7XG4gICAgdGhpcy5mcmFnID0gZnJhZztcbiAgICBwcmVwZW5kKHRoaXMubm9kZSwgZnJhZyk7XG4gICAgZnJhZy5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG4gICAgdGhpcy5iZWZvcmUgPSBtdWx0aUJlZm9yZTtcbiAgICB0aGlzLnJlbW92ZSA9IG11bHRpUmVtb3ZlO1xuICB9XG4gIHRoaXMubm9kZS5fX3ZfZnJhZyA9IHRoaXM7XG59XG5cbi8qKlxuICogQ2FsbCBhdHRhY2gvZGV0YWNoIGZvciBhbGwgY29tcG9uZW50cyBjb250YWluZWQgd2l0aGluXG4gKiB0aGlzIGZyYWdtZW50LiBBbHNvIGRvIHNvIHJlY3Vyc2l2ZWx5IGZvciBhbGwgY2hpbGRcbiAqIGZyYWdtZW50cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcbiAgdmFyIGksIGw7XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdGhpcy5jaGlsZEZyYWdzW2ldLmNhbGxIb29rKGhvb2spO1xuICB9XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGhvb2sodGhpcy5jaGlsZHJlbltpXSk7XG4gIH1cbn07XG5cbi8qKlxuICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIHNpbmdsZSBub2RlIHZlcnNpb25cbiAqXG4gKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuICovXG5cbmZ1bmN0aW9uIHNpbmdsZUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG4gIG1ldGhvZCh0aGlzLm5vZGUsIHRhcmdldCwgdGhpcy52bSk7XG4gIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG4gICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGZyYWdtZW50LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gKi9cblxuZnVuY3Rpb24gc2luZ2xlUmVtb3ZlKCkge1xuICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG4gIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuICByZW1vdmVXaXRoVHJhbnNpdGlvbih0aGlzLm5vZGUsIHRoaXMudm0sIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuICAgIH1cbiAgICBzZWxmLmRlc3Ryb3koKTtcbiAgfSk7XG59XG5cbi8qKlxuICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIG11bHRpLW5vZGVzIHZlcnNpb25cbiAqXG4gKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuICovXG5cbmZ1bmN0aW9uIG11bHRpQmVmb3JlKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcbiAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG4gIHZhciB2bSA9IHRoaXMudm07XG4gIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2UgPyBiZWZvcmVXaXRoVHJhbnNpdGlvbiA6IGJlZm9yZTtcbiAgbWFwTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgbWV0aG9kKG5vZGUsIHRhcmdldCwgdm0pO1xuICB9KTtcbiAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcbiAgICB0aGlzLmNhbGxIb29rKGF0dGFjaCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZnJhZ21lbnQsIG11bHRpLW5vZGVzIHZlcnNpb25cbiAqL1xuXG5mdW5jdGlvbiBtdWx0aVJlbW92ZSgpIHtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcbiAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcbiAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIHRoaXMudm0sIHRoaXMuZnJhZywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG4gICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XG4gICAgfVxuICAgIHNlbGYuZGVzdHJveSgpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBQcmVwYXJlIHRoZSBmcmFnbWVudCBmb3IgcmVtb3ZhbC5cbiAqL1xuXG5GcmFnbWVudC5wcm90b3R5cGUuYmVmb3JlUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaSwgbDtcbiAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAvLyBjYWxsIHRoZSBzYW1lIG1ldGhvZCByZWN1cnNpdmVseSBvbiBjaGlsZFxuICAgIC8vIGZyYWdtZW50cywgZGVwdGgtZmlyc3RcbiAgICB0aGlzLmNoaWxkRnJhZ3NbaV0uYmVmb3JlUmVtb3ZlKGZhbHNlKTtcbiAgfVxuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAvLyBDYWxsIGRlc3Ryb3kgZm9yIGFsbCBjb250YWluZWQgaW5zdGFuY2VzLFxuICAgIC8vIHdpdGggcmVtb3ZlOmZhbHNlIGFuZCBkZWZlcjp0cnVlLlxuICAgIC8vIERlZmVyIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIG5lZWQgdG9cbiAgICAvLyBrZWVwIHRoZSBjaGlsZHJlbiB0byBjYWxsIGRldGFjaCBob29rc1xuICAgIC8vIG9uIHRoZW0uXG4gICAgdGhpcy5jaGlsZHJlbltpXS4kZGVzdHJveShmYWxzZSwgdHJ1ZSk7XG4gIH1cbiAgdmFyIGRpcnMgPSB0aGlzLnVubGluay5kaXJzO1xuICBmb3IgKGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAvLyBkaXNhYmxlIHRoZSB3YXRjaGVycyBvbiBhbGwgdGhlIGRpcmVjdGl2ZXNcbiAgICAvLyBzbyB0aGF0IHRoZSByZW5kZXJlZCBjb250ZW50IHN0YXlzIHRoZSBzYW1lXG4gICAgLy8gZHVyaW5nIHJlbW92YWwuXG4gICAgZGlyc1tpXS5fd2F0Y2hlciAmJiBkaXJzW2ldLl93YXRjaGVyLnRlYXJkb3duKCk7XG4gIH1cbn07XG5cbi8qKlxuICogRGVzdHJveSB0aGUgZnJhZ21lbnQuXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnBhcmVudEZyYWcpIHtcbiAgICB0aGlzLnBhcmVudEZyYWcuY2hpbGRGcmFncy4kcmVtb3ZlKHRoaXMpO1xuICB9XG4gIHRoaXMubm9kZS5fX3ZfZnJhZyA9IG51bGw7XG4gIHRoaXMudW5saW5rKCk7XG59O1xuXG4vKipcbiAqIENhbGwgYXR0YWNoIGhvb2sgZm9yIGEgVnVlIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICovXG5cbmZ1bmN0aW9uIGF0dGFjaChjaGlsZCkge1xuICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDYWxsIGRldGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAqL1xuXG5mdW5jdGlvbiBkZXRhY2goY2hpbGQpIHtcbiAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuICB9XG59XG5cbnZhciBsaW5rZXJDYWNoZSA9IG5ldyBDYWNoZSg1MDAwKTtcblxuLyoqXG4gKiBBIGZhY3RvcnkgdGhhdCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgaW5zdGFuY2VzIG9mIGFcbiAqIGZyYWdtZW50LiBDYWNoZXMgdGhlIGNvbXBpbGVkIGxpbmtlciBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd9IGVsXG4gKi9cbmZ1bmN0aW9uIEZyYWdtZW50RmFjdG9yeSh2bSwgZWwpIHtcbiAgdGhpcy52bSA9IHZtO1xuICB2YXIgdGVtcGxhdGU7XG4gIHZhciBpc1N0cmluZyA9IHR5cGVvZiBlbCA9PT0gJ3N0cmluZyc7XG4gIGlmIChpc1N0cmluZyB8fCBpc1RlbXBsYXRlKGVsKSAmJiAhZWwuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICB0ZW1wbGF0ZSA9IHBhcnNlVGVtcGxhdGUoZWwsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHRlbXBsYXRlLmFwcGVuZENoaWxkKGVsKTtcbiAgfVxuICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkLCBidXQgb25seSBmb3IgY29tcG9uZW50c1xuICB2YXIgbGlua2VyO1xuICB2YXIgY2lkID0gdm0uY29uc3RydWN0b3IuY2lkO1xuICBpZiAoY2lkID4gMCkge1xuICAgIHZhciBjYWNoZUlkID0gY2lkICsgKGlzU3RyaW5nID8gZWwgOiBnZXRPdXRlckhUTUwoZWwpKTtcbiAgICBsaW5rZXIgPSBsaW5rZXJDYWNoZS5nZXQoY2FjaGVJZCk7XG4gICAgaWYgKCFsaW5rZXIpIHtcbiAgICAgIGxpbmtlciA9IGNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKTtcbiAgICAgIGxpbmtlckNhY2hlLnB1dChjYWNoZUlkLCBsaW5rZXIpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG4gIH1cbiAgdGhpcy5saW5rZXIgPSBsaW5rZXI7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgZnJhZ21lbnQgaW5zdGFuY2Ugd2l0aCBnaXZlbiBob3N0IGFuZCBzY29wZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gaG9zdFxuICogQHBhcmFtIHtPYmplY3R9IHNjb3BlXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBwYXJlbnRGcmFnXG4gKi9cblxuRnJhZ21lbnRGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcbiAgdmFyIGZyYWcgPSBjbG9uZU5vZGUodGhpcy50ZW1wbGF0ZSk7XG4gIHJldHVybiBuZXcgRnJhZ21lbnQodGhpcy5saW5rZXIsIHRoaXMudm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKTtcbn07XG5cbnZhciBPTiA9IDcwMDtcbnZhciBNT0RFTCA9IDgwMDtcbnZhciBCSU5EID0gODUwO1xudmFyIFRSQU5TSVRJT04gPSAxMTAwO1xudmFyIEVMID0gMTUwMDtcbnZhciBDT01QT05FTlQgPSAxNTAwO1xudmFyIFBBUlRJQUwgPSAxNzUwO1xudmFyIElGID0gMjEwMDtcbnZhciBGT1IgPSAyMjAwO1xudmFyIFNMT1QgPSAyMzAwO1xuXG52YXIgdWlkJDMgPSAwO1xuXG52YXIgdkZvciA9IHtcblxuICBwcmlvcml0eTogRk9SLFxuICB0ZXJtaW5hbDogdHJ1ZSxcblxuICBwYXJhbXM6IFsndHJhY2stYnknLCAnc3RhZ2dlcicsICdlbnRlci1zdGFnZ2VyJywgJ2xlYXZlLXN0YWdnZXInXSxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIHN1cHBvcnQgXCJpdGVtIGluL29mIGl0ZW1zXCIgc3ludGF4XG4gICAgdmFyIGluTWF0Y2ggPSB0aGlzLmV4cHJlc3Npb24ubWF0Y2goLyguKikgKD86aW58b2YpICguKikvKTtcbiAgICBpZiAoaW5NYXRjaCkge1xuICAgICAgdmFyIGl0TWF0Y2ggPSBpbk1hdGNoWzFdLm1hdGNoKC9cXCgoLiopLCguKilcXCkvKTtcbiAgICAgIGlmIChpdE1hdGNoKSB7XG4gICAgICAgIHRoaXMuaXRlcmF0b3IgPSBpdE1hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGl0TWF0Y2hbMl0udHJpbSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGluTWF0Y2hbMV0udHJpbSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5leHByZXNzaW9uID0gaW5NYXRjaFsyXTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuYWxpYXMpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB2LWZvciBleHByZXNzaW9uIFwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYWxpYXMgaXMgcmVxdWlyZWQuJywgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdWlkIGFzIGEgY2FjaGUgaWRlbnRpZmllclxuICAgIHRoaXMuaWQgPSAnX192LWZvcl9fJyArICsrdWlkJDM7XG5cbiAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGFuIG9wdGlvbiBsaXN0LFxuICAgIC8vIHNvIHRoYXQgd2Uga25vdyBpZiB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgPHNlbGVjdD4nc1xuICAgIC8vIHYtbW9kZWwgd2hlbiB0aGUgb3B0aW9uIGxpc3QgaGFzIGNoYW5nZWQuXG4gICAgLy8gYmVjYXVzZSB2LW1vZGVsIGhhcyBhIGxvd2VyIHByaW9yaXR5IHRoYW4gdi1mb3IsXG4gICAgLy8gdGhlIHYtbW9kZWwgaXMgbm90IGJvdW5kIGhlcmUgeWV0LCBzbyB3ZSBoYXZlIHRvXG4gICAgLy8gcmV0cml2ZSBpdCBpbiB0aGUgYWN0dWFsIHVwZGF0ZU1vZGVsKCkgZnVuY3Rpb24uXG4gICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcbiAgICB0aGlzLmlzT3B0aW9uID0gKHRhZyA9PT0gJ09QVElPTicgfHwgdGFnID09PSAnT1BUR1JPVVAnKSAmJiB0aGlzLmVsLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ1NFTEVDVCc7XG5cbiAgICAvLyBzZXR1cCBhbmNob3Igbm9kZXNcbiAgICB0aGlzLnN0YXJ0ID0gY3JlYXRlQW5jaG9yKCd2LWZvci1zdGFydCcpO1xuICAgIHRoaXMuZW5kID0gY3JlYXRlQW5jaG9yKCd2LWZvci1lbmQnKTtcbiAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuZW5kKTtcbiAgICBiZWZvcmUodGhpcy5zdGFydCwgdGhpcy5lbmQpO1xuXG4gICAgLy8gY2FjaGVcbiAgICB0aGlzLmNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIC8vIGZyYWdtZW50IGZhY3RvcnlcbiAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGRhdGEpIHtcbiAgICB0aGlzLmRpZmYoZGF0YSk7XG4gICAgdGhpcy51cGRhdGVSZWYoKTtcbiAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERpZmYsIGJhc2VkIG9uIG5ldyBkYXRhIGFuZCBvbGQgZGF0YSwgZGV0ZXJtaW5lIHRoZVxuICAgKiBtaW5pbXVtIGFtb3VudCBvZiBET00gbWFuaXB1bGF0aW9ucyBuZWVkZWQgdG8gbWFrZSB0aGVcbiAgICogRE9NIHJlZmxlY3QgdGhlIG5ldyBkYXRhIEFycmF5LlxuICAgKlxuICAgKiBUaGUgYWxnb3JpdGhtIGRpZmZzIHRoZSBuZXcgZGF0YSBBcnJheSBieSBzdG9yaW5nIGFcbiAgICogaGlkZGVuIHJlZmVyZW5jZSB0byBhbiBvd25lciB2bSBpbnN0YW5jZSBvbiBwcmV2aW91c2x5XG4gICAqIHNlZW4gZGF0YS4gVGhpcyBhbGxvd3MgdXMgdG8gYWNoaWV2ZSBPKG4pIHdoaWNoIGlzXG4gICAqIGJldHRlciB0aGFuIGEgbGV2ZW5zaHRlaW4gZGlzdGFuY2UgYmFzZWQgYWxnb3JpdGhtLFxuICAgKiB3aGljaCBpcyBPKG0gKiBuKS5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gZGF0YVxuICAgKi9cblxuICBkaWZmOiBmdW5jdGlvbiBkaWZmKGRhdGEpIHtcbiAgICAvLyBjaGVjayBpZiB0aGUgQXJyYXkgd2FzIGNvbnZlcnRlZCBmcm9tIGFuIE9iamVjdFxuICAgIHZhciBpdGVtID0gZGF0YVswXTtcbiAgICB2YXIgY29udmVydGVkRnJvbU9iamVjdCA9IHRoaXMuZnJvbU9iamVjdCA9IGlzT2JqZWN0KGl0ZW0pICYmIGhhc093bihpdGVtLCAnJGtleScpICYmIGhhc093bihpdGVtLCAnJHZhbHVlJyk7XG5cbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIG9sZEZyYWdzID0gdGhpcy5mcmFncztcbiAgICB2YXIgZnJhZ3MgPSB0aGlzLmZyYWdzID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICB2YXIgYWxpYXMgPSB0aGlzLmFsaWFzO1xuICAgIHZhciBpdGVyYXRvciA9IHRoaXMuaXRlcmF0b3I7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5zdGFydDtcbiAgICB2YXIgZW5kID0gdGhpcy5lbmQ7XG4gICAgdmFyIGluRG9jdW1lbnQgPSBpbkRvYyhzdGFydCk7XG4gICAgdmFyIGluaXQgPSAhb2xkRnJhZ3M7XG4gICAgdmFyIGksIGwsIGZyYWcsIGtleSwgdmFsdWUsIHByaW1pdGl2ZTtcblxuICAgIC8vIEZpcnN0IHBhc3MsIGdvIHRocm91Z2ggdGhlIG5ldyBBcnJheSBhbmQgZmlsbCB1cFxuICAgIC8vIHRoZSBuZXcgZnJhZ3MgYXJyYXkuIElmIGEgcGllY2Ugb2YgZGF0YSBoYXMgYSBjYWNoZWRcbiAgICAvLyBpbnN0YW5jZSBmb3IgaXQsIHdlIHJldXNlIGl0LiBPdGhlcndpc2UgYnVpbGQgYSBuZXdcbiAgICAvLyBpbnN0YW5jZS5cbiAgICBmb3IgKGkgPSAwLCBsID0gZGF0YS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGl0ZW0gPSBkYXRhW2ldO1xuICAgICAga2V5ID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJGtleSA6IG51bGw7XG4gICAgICB2YWx1ZSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiR2YWx1ZSA6IGl0ZW07XG4gICAgICBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgICAgZnJhZyA9ICFpbml0ICYmIHRoaXMuZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaSwga2V5KTtcbiAgICAgIGlmIChmcmFnKSB7XG4gICAgICAgIC8vIHJldXNhYmxlIGZyYWdtZW50XG4gICAgICAgIGZyYWcucmV1c2VkID0gdHJ1ZTtcbiAgICAgICAgLy8gdXBkYXRlICRpbmRleFxuICAgICAgICBmcmFnLnNjb3BlLiRpbmRleCA9IGk7XG4gICAgICAgIC8vIHVwZGF0ZSAka2V5XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICBmcmFnLnNjb3BlLiRrZXkgPSBrZXk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIGl0ZXJhdG9yXG4gICAgICAgIGlmIChpdGVyYXRvcikge1xuICAgICAgICAgIGZyYWcuc2NvcGVbaXRlcmF0b3JdID0ga2V5ICE9PSBudWxsID8ga2V5IDogaTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1cGRhdGUgZGF0YSBmb3IgdHJhY2stYnksIG9iamVjdCByZXBlYXQgJlxuICAgICAgICAvLyBwcmltaXRpdmUgdmFsdWVzLlxuICAgICAgICBpZiAodHJhY2tCeUtleSB8fCBjb252ZXJ0ZWRGcm9tT2JqZWN0IHx8IHByaW1pdGl2ZSkge1xuICAgICAgICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZyYWcuc2NvcGVbYWxpYXNdID0gdmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5ldyBpc250YW5jZVxuICAgICAgICBmcmFnID0gdGhpcy5jcmVhdGUodmFsdWUsIGFsaWFzLCBpLCBrZXkpO1xuICAgICAgICBmcmFnLmZyZXNoID0gIWluaXQ7XG4gICAgICB9XG4gICAgICBmcmFnc1tpXSA9IGZyYWc7XG4gICAgICBpZiAoaW5pdCkge1xuICAgICAgICBmcmFnLmJlZm9yZShlbmQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHdlJ3JlIGRvbmUgZm9yIHRoZSBpbml0aWFsIHJlbmRlci5cbiAgICBpZiAoaW5pdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNlY29uZCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBvbGQgZnJhZ21lbnRzIGFuZFxuICAgIC8vIGRlc3Ryb3kgdGhvc2Ugd2hvIGFyZSBub3QgcmV1c2VkIChhbmQgcmVtb3ZlIHRoZW1cbiAgICAvLyBmcm9tIGNhY2hlKVxuICAgIHZhciByZW1vdmFsSW5kZXggPSAwO1xuICAgIHZhciB0b3RhbFJlbW92ZWQgPSBvbGRGcmFncy5sZW5ndGggLSBmcmFncy5sZW5ndGg7XG4gICAgLy8gd2hlbiByZW1vdmluZyBhIGxhcmdlIG51bWJlciBvZiBmcmFnbWVudHMsIHdhdGNoZXIgcmVtb3ZhbFxuICAgIC8vIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgYm90dGxlbmVjaywgc28gd2UgYmF0Y2ggdGhlIHdhdGNoZXJcbiAgICAvLyByZW1vdmFscyBpbnRvIGEgc2luZ2xlIGZpbHRlciBjYWxsIVxuICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IHRydWU7XG4gICAgZm9yIChpID0gMCwgbCA9IG9sZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZnJhZyA9IG9sZEZyYWdzW2ldO1xuICAgICAgaWYgKCFmcmFnLnJldXNlZCkge1xuICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG4gICAgICAgIHRoaXMucmVtb3ZlKGZyYWcsIHJlbW92YWxJbmRleCsrLCB0b3RhbFJlbW92ZWQsIGluRG9jdW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcbiAgICBpZiAocmVtb3ZhbEluZGV4KSB7XG4gICAgICB0aGlzLnZtLl93YXRjaGVycyA9IHRoaXMudm0uX3dhdGNoZXJzLmZpbHRlcihmdW5jdGlvbiAodykge1xuICAgICAgICByZXR1cm4gdy5hY3RpdmU7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBGaW5hbCBwYXNzLCBtb3ZlL2luc2VydCBuZXcgZnJhZ21lbnRzIGludG8gdGhlXG4gICAgLy8gcmlnaHQgcGxhY2UuXG4gICAgdmFyIHRhcmdldFByZXYsIHByZXZFbCwgY3VycmVudFByZXY7XG4gICAgdmFyIGluc2VydGlvbkluZGV4ID0gMDtcbiAgICBmb3IgKGkgPSAwLCBsID0gZnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmcmFnID0gZnJhZ3NbaV07XG4gICAgICAvLyB0aGlzIGlzIHRoZSBmcmFnIHRoYXQgd2Ugc2hvdWxkIGJlIGFmdGVyXG4gICAgICB0YXJnZXRQcmV2ID0gZnJhZ3NbaSAtIDFdO1xuICAgICAgcHJldkVsID0gdGFyZ2V0UHJldiA/IHRhcmdldFByZXYuc3RhZ2dlckNiID8gdGFyZ2V0UHJldi5zdGFnZ2VyQW5jaG9yIDogdGFyZ2V0UHJldi5lbmQgfHwgdGFyZ2V0UHJldi5ub2RlIDogc3RhcnQ7XG4gICAgICBpZiAoZnJhZy5yZXVzZWQgJiYgIWZyYWcuc3RhZ2dlckNiKSB7XG4gICAgICAgIGN1cnJlbnRQcmV2ID0gZmluZFByZXZGcmFnKGZyYWcsIHN0YXJ0LCB0aGlzLmlkKTtcbiAgICAgICAgaWYgKGN1cnJlbnRQcmV2ICE9PSB0YXJnZXRQcmV2ICYmICghY3VycmVudFByZXYgfHxcbiAgICAgICAgLy8gb3B0aW1pemF0aW9uIGZvciBtb3ZpbmcgYSBzaW5nbGUgaXRlbS5cbiAgICAgICAgLy8gdGhhbmtzIHRvIHN1Z2dlc3Rpb25zIGJ5IEBsaXZvcmFzIGluICMxODA3XG4gICAgICAgIGZpbmRQcmV2RnJhZyhjdXJyZW50UHJldiwgc3RhcnQsIHRoaXMuaWQpICE9PSB0YXJnZXRQcmV2KSkge1xuICAgICAgICAgIHRoaXMubW92ZShmcmFnLCBwcmV2RWwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBuZXcgaW5zdGFuY2UsIG9yIHN0aWxsIGluIHN0YWdnZXIuXG4gICAgICAgIC8vIGluc2VydCB3aXRoIHVwZGF0ZWQgc3RhZ2dlciBpbmRleC5cbiAgICAgICAgdGhpcy5pbnNlcnQoZnJhZywgaW5zZXJ0aW9uSW5kZXgrKywgcHJldkVsLCBpbkRvY3VtZW50KTtcbiAgICAgIH1cbiAgICAgIGZyYWcucmV1c2VkID0gZnJhZy5mcmVzaCA9IGZhbHNlO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGZyYWdtZW50IGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhbGlhc1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG4gICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuICAgKi9cblxuICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSh2YWx1ZSwgYWxpYXMsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgaG9zdCA9IHRoaXMuX2hvc3Q7XG4gICAgLy8gY3JlYXRlIGl0ZXJhdGlvbiBzY29wZVxuICAgIHZhciBwYXJlbnRTY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG4gICAgdmFyIHNjb3BlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZSk7XG4gICAgLy8gcmVmIGhvbGRlciBmb3IgdGhlIHNjb3BlXG4gICAgc2NvcGUuJHJlZnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRyZWZzKTtcbiAgICBzY29wZS4kZWxzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kZWxzKTtcbiAgICAvLyBtYWtlIHN1cmUgcG9pbnQgJHBhcmVudCB0byBwYXJlbnQgc2NvcGVcbiAgICBzY29wZS4kcGFyZW50ID0gcGFyZW50U2NvcGU7XG4gICAgLy8gZm9yIHR3by13YXkgYmluZGluZyBvbiBhbGlhc1xuICAgIHNjb3BlLiRmb3JDb250ZXh0ID0gdGhpcztcbiAgICAvLyBkZWZpbmUgc2NvcGUgcHJvcGVydGllc1xuICAgIC8vIGltcG9ydGFudDogZGVmaW5lIHRoZSBzY29wZSBhbGlhcyB3aXRob3V0IGZvcmNlZCBjb252ZXJzaW9uXG4gICAgLy8gc28gdGhhdCBmcm96ZW4gZGF0YSBzdHJ1Y3R1cmVzIHJlbWFpbiBub24tcmVhY3RpdmUuXG4gICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIGFsaWFzLCB2YWx1ZSk7XG4gICAgfSk7XG4gICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICckaW5kZXgnLCBpbmRleCk7XG4gICAgaWYgKGtleSkge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICcka2V5Jywga2V5KTtcbiAgICB9IGVsc2UgaWYgKHNjb3BlLiRrZXkpIHtcbiAgICAgIC8vIGF2b2lkIGFjY2lkZW50YWwgZmFsbGJhY2tcbiAgICAgIGRlZihzY29wZSwgJyRrZXknLCBudWxsKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXRlcmF0b3IpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCB0aGlzLml0ZXJhdG9yLCBrZXkgIT09IG51bGwgPyBrZXkgOiBpbmRleCk7XG4gICAgfVxuICAgIHZhciBmcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZShob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgZnJhZy5mb3JJZCA9IHRoaXMuaWQ7XG4gICAgdGhpcy5jYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpO1xuICAgIHJldHVybiBmcmFnO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHYtcmVmIG9uIG93bmVyIHZtLlxuICAgKi9cblxuICB1cGRhdGVSZWY6IGZ1bmN0aW9uIHVwZGF0ZVJlZigpIHtcbiAgICB2YXIgcmVmID0gdGhpcy5kZXNjcmlwdG9yLnJlZjtcbiAgICBpZiAoIXJlZikgcmV0dXJuO1xuICAgIHZhciBoYXNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzO1xuICAgIHZhciByZWZzO1xuICAgIGlmICghdGhpcy5mcm9tT2JqZWN0KSB7XG4gICAgICByZWZzID0gdGhpcy5mcmFncy5tYXAoZmluZFZtRnJvbUZyYWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWZzID0ge307XG4gICAgICB0aGlzLmZyYWdzLmZvckVhY2goZnVuY3Rpb24gKGZyYWcpIHtcbiAgICAgICAgcmVmc1tmcmFnLnNjb3BlLiRrZXldID0gZmluZFZtRnJvbUZyYWcoZnJhZyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaGFzaFtyZWZdID0gcmVmcztcbiAgfSxcblxuICAvKipcbiAgICogRm9yIG9wdGlvbiBsaXN0cywgdXBkYXRlIHRoZSBjb250YWluaW5nIHYtbW9kZWwgb25cbiAgICogcGFyZW50IDxzZWxlY3Q+LlxuICAgKi9cblxuICB1cGRhdGVNb2RlbDogZnVuY3Rpb24gdXBkYXRlTW9kZWwoKSB7XG4gICAgaWYgKHRoaXMuaXNPcHRpb24pIHtcbiAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnN0YXJ0LnBhcmVudE5vZGU7XG4gICAgICB2YXIgbW9kZWwgPSBwYXJlbnQgJiYgcGFyZW50Ll9fdl9tb2RlbDtcbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICBtb2RlbC5mb3JjZVVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW5zZXJ0IGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcbiAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG4gICAqL1xuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGZyYWcsIGluZGV4LCBwcmV2RWwsIGluRG9jdW1lbnQpIHtcbiAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgIH1cbiAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgbnVsbCwgJ2VudGVyJyk7XG4gICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuICAgICAgLy8gY3JlYXRlIGFuIGFuY2hvciBhbmQgaW5zZXJ0IGl0IHN5bmNocm9ub3VzbHksXG4gICAgICAvLyBzbyB0aGF0IHdlIGNhbiByZXNvbHZlIHRoZSBjb3JyZWN0IG9yZGVyIHdpdGhvdXRcbiAgICAgIC8vIHdvcnJ5aW5nIGFib3V0IHNvbWUgZWxlbWVudHMgbm90IGluc2VydGVkIHlldFxuICAgICAgdmFyIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvcjtcbiAgICAgIGlmICghYW5jaG9yKSB7XG4gICAgICAgIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvciA9IGNyZWF0ZUFuY2hvcignc3RhZ2dlci1hbmNob3InKTtcbiAgICAgICAgYW5jaG9yLl9fdl9mcmFnID0gZnJhZztcbiAgICAgIH1cbiAgICAgIGFmdGVyKGFuY2hvciwgcHJldkVsKTtcbiAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG4gICAgICAgIGZyYWcuYmVmb3JlKGFuY2hvcik7XG4gICAgICAgIHJlbW92ZShhbmNob3IpO1xuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHRhcmdldCA9IHByZXZFbC5uZXh0U2libGluZztcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgLy8gcmVzZXQgZW5kIGFuY2hvciBwb3NpdGlvbiBpbiBjYXNlIHRoZSBwb3NpdGlvbiB3YXMgbWVzc2VkIHVwXG4gICAgICAgIC8vIGJ5IGFuIGV4dGVybmFsIGRyYWctbi1kcm9wIGxpYnJhcnkuXG4gICAgICAgIGFmdGVyKHRoaXMuZW5kLCBwcmV2RWwpO1xuICAgICAgICB0YXJnZXQgPSB0aGlzLmVuZDtcbiAgICAgIH1cbiAgICAgIGZyYWcuYmVmb3JlKHRhcmdldCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcbiAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG4gICAqL1xuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGZyYWcsIGluZGV4LCB0b3RhbCwgaW5Eb2N1bWVudCkge1xuICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XG4gICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG4gICAgICAvLyBpdCdzIG5vdCBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgZnJhZyB0byBiZSByZW1vdmVkXG4gICAgICAvLyB0d2ljZSwgc28gaWYgd2UgaGF2ZSBhIHBlbmRpbmcgc3RhZ2dlciBjYWxsYmFjayxcbiAgICAgIC8vIGl0IG1lYW5zIHRoaXMgZnJhZyBpcyBxdWV1ZWQgZm9yIGVudGVyIGJ1dCByZW1vdmVkXG4gICAgICAvLyBiZWZvcmUgaXRzIHRyYW5zaXRpb24gc3RhcnRlZC4gU2luY2UgaXQgaXMgYWxyZWFkeVxuICAgICAgLy8gZGVzdHJveWVkLCB3ZSBjYW4ganVzdCBsZWF2ZSBpdCBpbiBkZXRhY2hlZCBzdGF0ZS5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCAnbGVhdmUnKTtcbiAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG4gICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgICBmcmFnLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZy5yZW1vdmUoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1vdmUgYSBmcmFnbWVudCB0byBhIG5ldyBwb3NpdGlvbi5cbiAgICogRm9yY2Ugbm8gdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuICAgKi9cblxuICBtb3ZlOiBmdW5jdGlvbiBtb3ZlKGZyYWcsIHByZXZFbCkge1xuICAgIC8vIGZpeCBhIGNvbW1vbiBpc3N1ZSB3aXRoIFNvcnRhYmxlOlxuICAgIC8vIGlmIHByZXZFbCBkb2Vzbid0IGhhdmUgbmV4dFNpYmxpbmcsIHRoaXMgbWVhbnMgaXQnc1xuICAgIC8vIGJlZW4gZHJhZ2dlZCBhZnRlciB0aGUgZW5kIGFuY2hvci4gSnVzdCByZS1wb3NpdGlvblxuICAgIC8vIHRoZSBlbmQgYW5jaG9yIHRvIHRoZSBlbmQgb2YgdGhlIGNvbnRhaW5lci5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXByZXZFbC5uZXh0U2libGluZykge1xuICAgICAgdGhpcy5lbmQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG4gICAgfVxuICAgIGZyYWcuYmVmb3JlKHByZXZFbC5uZXh0U2libGluZywgZmFsc2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDYWNoZSBhIGZyYWdtZW50IHVzaW5nIHRyYWNrLWJ5IG9yIHRoZSBvYmplY3Qga2V5LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICAgKi9cblxuICBjYWNoZUZyYWc6IGZ1bmN0aW9uIGNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSkge1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlO1xuICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgIHZhciBpZDtcbiAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuICAgICAgaWYgKCFjYWNoZVtpZF0pIHtcbiAgICAgICAgY2FjaGVbaWRdID0gZnJhZztcbiAgICAgIH0gZWxzZSBpZiAodHJhY2tCeUtleSAhPT0gJyRpbmRleCcpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZCA9IHRoaXMuaWQ7XG4gICAgICBpZiAoaGFzT3duKHZhbHVlLCBpZCkpIHtcbiAgICAgICAgaWYgKHZhbHVlW2lkXSA9PT0gbnVsbCkge1xuICAgICAgICAgIHZhbHVlW2lkXSA9IGZyYWc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpKSB7XG4gICAgICAgIGRlZih2YWx1ZSwgaWQsIGZyYWcpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm4oJ0Zyb3plbiB2LWZvciBvYmplY3RzIGNhbm5vdCBiZSBhdXRvbWF0aWNhbGx5IHRyYWNrZWQsIG1ha2Ugc3VyZSB0byAnICsgJ3Byb3ZpZGUgYSB0cmFjay1ieSBrZXkuJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGZyYWcucmF3ID0gdmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhIGNhY2hlZCBmcmFnbWVudCBmcm9tIHRoZSB2YWx1ZS9pbmRleC9rZXlcbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAgICovXG5cbiAgZ2V0Q2FjaGVkRnJhZzogZnVuY3Rpb24gZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaW5kZXgsIGtleSkge1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICB2YXIgZnJhZztcbiAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIGZyYWcgPSB0aGlzLmNhY2hlW2lkXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZyA9IHZhbHVlW3RoaXMuaWRdO1xuICAgIH1cbiAgICBpZiAoZnJhZyAmJiAoZnJhZy5yZXVzZWQgfHwgZnJhZy5mcmVzaCkpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZyYWc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGZyYWdtZW50IGZyb20gY2FjaGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICovXG5cbiAgZGVsZXRlQ2FjaGVkRnJhZzogZnVuY3Rpb24gZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKSB7XG4gICAgdmFyIHZhbHVlID0gZnJhZy5yYXc7XG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuICAgIHZhciBzY29wZSA9IGZyYWcuc2NvcGU7XG4gICAgdmFyIGluZGV4ID0gc2NvcGUuJGluZGV4O1xuICAgIC8vIGZpeCAjOTQ4OiBhdm9pZCBhY2NpZGVudGFsbHkgZmFsbCB0aHJvdWdoIHRvXG4gICAgLy8gYSBwYXJlbnQgcmVwZWF0ZXIgd2hpY2ggaGFwcGVucyB0byBoYXZlICRrZXkuXG4gICAgdmFyIGtleSA9IGhhc093bihzY29wZSwgJyRrZXknKSAmJiBzY29wZS4ka2V5O1xuICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgIGlmICh0cmFja0J5S2V5IHx8IGtleSB8fCBwcmltaXRpdmUpIHtcbiAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuICAgICAgdGhpcy5jYWNoZVtpZF0gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZVt0aGlzLmlkXSA9IG51bGw7XG4gICAgICBmcmFnLnJhdyA9IG51bGw7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0YWdnZXIgYW1vdW50IGZvciBhbiBpbnNlcnRpb24vcmVtb3ZhbC5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gICAqL1xuXG4gIGdldFN0YWdnZXI6IGZ1bmN0aW9uIGdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCB0eXBlKSB7XG4gICAgdHlwZSA9IHR5cGUgKyAnU3RhZ2dlcic7XG4gICAgdmFyIHRyYW5zID0gZnJhZy5ub2RlLl9fdl90cmFucztcbiAgICB2YXIgaG9va3MgPSB0cmFucyAmJiB0cmFucy5ob29rcztcbiAgICB2YXIgaG9vayA9IGhvb2tzICYmIChob29rc1t0eXBlXSB8fCBob29rcy5zdGFnZ2VyKTtcbiAgICByZXR1cm4gaG9vayA/IGhvb2suY2FsbChmcmFnLCBpbmRleCwgdG90YWwpIDogaW5kZXggKiBwYXJzZUludCh0aGlzLnBhcmFtc1t0eXBlXSB8fCB0aGlzLnBhcmFtcy5zdGFnZ2VyLCAxMCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFByZS1wcm9jZXNzIHRoZSB2YWx1ZSBiZWZvcmUgcGlwaW5nIGl0IHRocm91Z2ggdGhlXG4gICAqIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG4gICAqL1xuXG4gIF9wcmVQcm9jZXNzOiBmdW5jdGlvbiBfcHJlUHJvY2Vzcyh2YWx1ZSkge1xuICAgIC8vIHJlZ2FyZGxlc3Mgb2YgdHlwZSwgc3RvcmUgdGhlIHVuLWZpbHRlcmVkIHJhdyB2YWx1ZS5cbiAgICB0aGlzLnJhd1ZhbHVlID0gdmFsdWU7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQb3N0LXByb2Nlc3MgdGhlIHZhbHVlIGFmdGVyIGl0IGhhcyBiZWVuIHBpcGVkIHRocm91Z2hcbiAgICogdGhlIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG4gICAqXG4gICAqIEl0IGlzIG5lY2Vzc2FyeSBmb3IgdGhpcyB0byBiZSBjYWxsZWQgZHVyaW5nIHRoZVxuICAgKiB3YXRjaGVyJ3MgZGVwZW5kZW5jeSBjb2xsZWN0aW9uIHBoYXNlIGJlY2F1c2Ugd2Ugd2FudFxuICAgKiB0aGUgdi1mb3IgdG8gdXBkYXRlIHdoZW4gdGhlIHNvdXJjZSBPYmplY3QgaXMgbXV0YXRlZC5cbiAgICovXG5cbiAgX3Bvc3RQcm9jZXNzOiBmdW5jdGlvbiBfcG9zdFByb2Nlc3ModmFsdWUpIHtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICAvLyBjb252ZXJ0IHBsYWluIG9iamVjdCB0byBhcnJheS5cbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICAgICAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgICAgIHZhciByZXMgPSBuZXcgQXJyYXkoaSk7XG4gICAgICB2YXIga2V5O1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICByZXNbaV0gPSB7XG4gICAgICAgICAgJGtleToga2V5LFxuICAgICAgICAgICR2YWx1ZTogdmFsdWVba2V5XVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IHJhbmdlKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZSB8fCBbXTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcbiAgICAgICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmc1t0aGlzLmRlc2NyaXB0b3IucmVmXSA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmZyYWdzKSB7XG4gICAgICB2YXIgaSA9IHRoaXMuZnJhZ3MubGVuZ3RoO1xuICAgICAgdmFyIGZyYWc7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGZyYWcgPSB0aGlzLmZyYWdzW2ldO1xuICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG4gICAgICAgIGZyYWcuZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBIZWxwZXIgdG8gZmluZCB0aGUgcHJldmlvdXMgZWxlbWVudCB0aGF0IGlzIGEgZnJhZ21lbnRcbiAqIGFuY2hvci4gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBhIGRlc3Ryb3llZCBmcmFnJ3NcbiAqIGVsZW1lbnQgY291bGQgc3RpbGwgYmUgbGluZ2VyaW5nIGluIHRoZSBET00gYmVmb3JlIGl0c1xuICogbGVhdmluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLCBidXQgaXRzIGluc2VydGVkIGZsYWdcbiAqIHNob3VsZCBoYXZlIGJlZW4gc2V0IHRvIGZhbHNlIHNvIHdlIGNhbiBza2lwIHRoZW0uXG4gKlxuICogSWYgdGhpcyBpcyBhIGJsb2NrIHJlcGVhdCwgd2Ugd2FudCB0byBtYWtlIHN1cmUgd2Ugb25seVxuICogcmV0dXJuIGZyYWcgdGhhdCBpcyBib3VuZCB0byB0aGlzIHYtZm9yLiAoc2VlICM5MjkpXG4gKlxuICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtDb21tZW50fFRleHR9IGFuY2hvclxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBmaW5kUHJldkZyYWcoZnJhZywgYW5jaG9yLCBpZCkge1xuICB2YXIgZWwgPSBmcmFnLm5vZGUucHJldmlvdXNTaWJsaW5nO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFlbCkgcmV0dXJuO1xuICBmcmFnID0gZWwuX192X2ZyYWc7XG4gIHdoaWxlICgoIWZyYWcgfHwgZnJhZy5mb3JJZCAhPT0gaWQgfHwgIWZyYWcuaW5zZXJ0ZWQpICYmIGVsICE9PSBhbmNob3IpIHtcbiAgICBlbCA9IGVsLnByZXZpb3VzU2libGluZztcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIWVsKSByZXR1cm47XG4gICAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuICB9XG4gIHJldHVybiBmcmFnO1xufVxuXG4vKipcbiAqIEZpbmQgYSB2bSBmcm9tIGEgZnJhZ21lbnQuXG4gKlxuICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBmaW5kVm1Gcm9tRnJhZyhmcmFnKSB7XG4gIHZhciBub2RlID0gZnJhZy5ub2RlO1xuICAvLyBoYW5kbGUgbXVsdGktbm9kZSBmcmFnXG4gIGlmIChmcmFnLmVuZCkge1xuICAgIHdoaWxlICghbm9kZS5fX3Z1ZV9fICYmIG5vZGUgIT09IGZyYWcuZW5kICYmIG5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbm9kZS5fX3Z1ZV9fO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHJhbmdlIGFycmF5IGZyb20gZ2l2ZW4gbnVtYmVyLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiByYW5nZShuKSB7XG4gIHZhciBpID0gLTE7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoTWF0aC5mbG9vcihuKSk7XG4gIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgcmV0W2ldID0gaTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sgYnkga2V5IGZvciBhbiBpdGVtLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtTdHJpbmd9IFt0cmFja0J5S2V5XVxuICovXG5cbmZ1bmN0aW9uIGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpIHtcbiAgcmV0dXJuIHRyYWNrQnlLZXkgPyB0cmFja0J5S2V5ID09PSAnJGluZGV4JyA/IGluZGV4IDogdHJhY2tCeUtleS5jaGFyQXQoMCkubWF0Y2goL1xcdy8pID8gZ2V0UGF0aCh2YWx1ZSwgdHJhY2tCeUtleSkgOiB2YWx1ZVt0cmFja0J5S2V5XSA6IGtleSB8fCB2YWx1ZTtcbn1cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdkZvci53YXJuRHVwbGljYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgd2FybignRHVwbGljYXRlIHZhbHVlIGZvdW5kIGluIHYtZm9yPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnLiBVc2UgdHJhY2stYnk9XCIkaW5kZXhcIiBpZiAnICsgJ3lvdSBhcmUgZXhwZWN0aW5nIGR1cGxpY2F0ZSB2YWx1ZXMuJywgdGhpcy52bSk7XG4gIH07XG59XG5cbnZhciB2SWYgPSB7XG5cbiAgcHJpb3JpdHk6IElGLFxuICB0ZXJtaW5hbDogdHJ1ZSxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKCFlbC5fX3Z1ZV9fKSB7XG4gICAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG4gICAgICB2YXIgbmV4dCA9IGVsLm5leHRFbGVtZW50U2libGluZztcbiAgICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG4gICAgICAgIHJlbW92ZShuZXh0KTtcbiAgICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuICAgICAgfVxuICAgICAgLy8gY2hlY2sgbWFpbiBibG9ja1xuICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaWYnKTtcbiAgICAgIHJlcGxhY2UoZWwsIHRoaXMuYW5jaG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LWlmPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBjYW5ub3QgYmUgJyArICd1c2VkIG9uIGFuIGluc3RhbmNlIHJvb3QgZWxlbWVudC4nLCB0aGlzLnZtKTtcbiAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuaW52YWxpZCkgcmV0dXJuO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgaWYgKCF0aGlzLmZyYWcpIHtcbiAgICAgICAgdGhpcy5pbnNlcnQoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmUoKTtcbiAgICB9XG4gIH0sXG5cbiAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoKSB7XG4gICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcbiAgICAgIHRoaXMuZWxzZUZyYWcucmVtb3ZlKCk7XG4gICAgICB0aGlzLmVsc2VGcmFnID0gbnVsbDtcbiAgICB9XG4gICAgLy8gbGF6eSBpbml0IGZhY3RvcnlcbiAgICBpZiAoIXRoaXMuZmFjdG9yeSkge1xuICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgICB9XG4gICAgdGhpcy5mcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgdGhpcy5mcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG4gIH0sXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgaWYgKHRoaXMuZnJhZykge1xuICAgICAgdGhpcy5mcmFnLnJlbW92ZSgpO1xuICAgICAgdGhpcy5mcmFnID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuZWxzZUVsICYmICF0aGlzLmVsc2VGcmFnKSB7XG4gICAgICBpZiAoIXRoaXMuZWxzZUZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5lbHNlRmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy5lbHNlRWwuX2NvbnRleHQgfHwgdGhpcy52bSwgdGhpcy5lbHNlRWwpO1xuICAgICAgfVxuICAgICAgdGhpcy5lbHNlRnJhZyA9IHRoaXMuZWxzZUZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcbiAgICAgIHRoaXMuZWxzZUZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMuZnJhZykge1xuICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcbiAgICAgIHRoaXMuZWxzZUZyYWcuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHNob3cgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG4gICAgdmFyIG5leHQgPSB0aGlzLmVsLm5leHRFbGVtZW50U2libGluZztcbiAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHRoaXMuYXBwbHkodGhpcy5lbCwgdmFsdWUpO1xuICAgIGlmICh0aGlzLmVsc2VFbCkge1xuICAgICAgdGhpcy5hcHBseSh0aGlzLmVsc2VFbCwgIXZhbHVlKTtcbiAgICB9XG4gIH0sXG5cbiAgYXBwbHk6IGZ1bmN0aW9uIGFwcGx5KGVsLCB2YWx1ZSkge1xuICAgIGlmIChpbkRvYyhlbCkpIHtcbiAgICAgIGFwcGx5VHJhbnNpdGlvbihlbCwgdmFsdWUgPyAxIDogLTEsIHRvZ2dsZSwgdGhpcy52bSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvZ2dsZSgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyAnJyA6ICdub25lJztcbiAgICB9XG4gIH1cbn07XG5cbnZhciB0ZXh0JDIgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgaXNSYW5nZSA9IGVsLnR5cGUgPT09ICdyYW5nZSc7XG4gICAgdmFyIGxhenkgPSB0aGlzLnBhcmFtcy5sYXp5O1xuICAgIHZhciBudW1iZXIgPSB0aGlzLnBhcmFtcy5udW1iZXI7XG4gICAgdmFyIGRlYm91bmNlID0gdGhpcy5wYXJhbXMuZGVib3VuY2U7XG5cbiAgICAvLyBoYW5kbGUgY29tcG9zaXRpb24gZXZlbnRzLlxuICAgIC8vICAgaHR0cDovL2Jsb2cuZXZhbnlvdS5tZS8yMDE0LzAxLzAzL2NvbXBvc2l0aW9uLWV2ZW50L1xuICAgIC8vIHNraXAgdGhpcyBmb3IgQW5kcm9pZCBiZWNhdXNlIGl0IGhhbmRsZXMgY29tcG9zaXRpb25cbiAgICAvLyBldmVudHMgcXVpdGUgZGlmZmVyZW50bHkuIEFuZHJvaWQgZG9lc24ndCB0cmlnZ2VyXG4gICAgLy8gY29tcG9zaXRpb24gZXZlbnRzIGZvciBsYW5ndWFnZSBpbnB1dCBtZXRob2RzIGUuZy5cbiAgICAvLyBDaGluZXNlLCBidXQgaW5zdGVhZCB0cmlnZ2VycyB0aGVtIGZvciBzcGVsbGluZ1xuICAgIC8vIHN1Z2dlc3Rpb25zLi4uIChzZWUgRGlzY3Vzc2lvbi8jMTYyKVxuICAgIHZhciBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICBpZiAoIWlzQW5kcm9pZCAmJiAhaXNSYW5nZSkge1xuICAgICAgdGhpcy5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vbignY29tcG9zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbXBvc2luZyA9IGZhbHNlO1xuICAgICAgICAvLyBpbiBJRTExIHRoZSBcImNvbXBvc2l0aW9uZW5kXCIgZXZlbnQgZmlyZXMgQUZURVJcbiAgICAgICAgLy8gdGhlIFwiaW5wdXRcIiBldmVudCwgc28gdGhlIGlucHV0IGhhbmRsZXIgaXMgYmxvY2tlZFxuICAgICAgICAvLyBhdCB0aGUgZW5kLi4uIGhhdmUgdG8gY2FsbCBpdCBoZXJlLlxuICAgICAgICAvL1xuICAgICAgICAvLyAjMTMyNzogaW4gbGF6eSBtb2RlIHRoaXMgaXMgdW5lY2Vzc2FyeS5cbiAgICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBwcmV2ZW50IG1lc3Npbmcgd2l0aCB0aGUgaW5wdXQgd2hlbiB1c2VyIGlzIHR5cGluZyxcbiAgICAvLyBhbmQgZm9yY2UgdXBkYXRlIG9uIGJsdXIuXG4gICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG4gICAgaWYgKCFpc1JhbmdlICYmICFsYXp5KSB7XG4gICAgICB0aGlzLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5mb2N1c2VkID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIC8vIGRvIG5vdCBzeW5jIHZhbHVlIGFmdGVyIGZyYWdtZW50IHJlbW92YWwgKCMyMDE3KVxuICAgICAgICBpZiAoIXNlbGYuX2ZyYWcgfHwgc2VsZi5fZnJhZy5pbnNlcnRlZCkge1xuICAgICAgICAgIHNlbGYucmF3TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTm93IGF0dGFjaCB0aGUgbWFpbiBsaXN0ZW5lclxuICAgIHRoaXMubGlzdGVuZXIgPSB0aGlzLnJhd0xpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGNvbXBvc2luZyB8fCAhc2VsZi5fYm91bmQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIHZhbCA9IG51bWJlciB8fCBpc1JhbmdlID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG4gICAgICBzZWxmLnNldCh2YWwpO1xuICAgICAgLy8gZm9yY2UgdXBkYXRlIG9uIG5leHQgdGljayB0byBhdm9pZCBsb2NrICYgc2FtZSB2YWx1ZVxuICAgICAgLy8gYWxzbyBvbmx5IHVwZGF0ZSB3aGVuIHVzZXIgaXMgbm90IHR5cGluZ1xuICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi5fYm91bmQgJiYgIXNlbGYuZm9jdXNlZCkge1xuICAgICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIudmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gYXBwbHkgZGVib3VuY2VcbiAgICBpZiAoZGVib3VuY2UpIHtcbiAgICAgIHRoaXMubGlzdGVuZXIgPSBfZGVib3VuY2UodGhpcy5saXN0ZW5lciwgZGVib3VuY2UpO1xuICAgIH1cblxuICAgIC8vIFN1cHBvcnQgalF1ZXJ5IGV2ZW50cywgc2luY2UgalF1ZXJ5LnRyaWdnZXIoKSBkb2Vzbid0XG4gICAgLy8gdHJpZ2dlciBuYXRpdmUgZXZlbnRzIGluIHNvbWUgY2FzZXMgYW5kIHNvbWUgcGx1Z2luc1xuICAgIC8vIHJlbHkgb24gJC50cmlnZ2VyKClcbiAgICAvL1xuICAgIC8vIFdlIHdhbnQgdG8gbWFrZSBzdXJlIGlmIGEgbGlzdGVuZXIgaXMgYXR0YWNoZWQgdXNpbmdcbiAgICAvLyBqUXVlcnksIGl0IGlzIGFsc28gcmVtb3ZlZCB3aXRoIGpRdWVyeSwgdGhhdCdzIHdoeVxuICAgIC8vIHdlIGRvIHRoZSBjaGVjayBmb3IgZWFjaCBkaXJlY3RpdmUgaW5zdGFuY2UgYW5kXG4gICAgLy8gc3RvcmUgdGhhdCBjaGVjayByZXN1bHQgb24gaXRzZWxmLiBUaGlzIGFsc28gYWxsb3dzXG4gICAgLy8gZWFzaWVyIHRlc3QgY292ZXJhZ2UgY29udHJvbCBieSB1bnNldHRpbmcgdGhlIGdsb2JhbFxuICAgIC8vIGpRdWVyeSB2YXJpYWJsZSBpbiB0ZXN0cy5cbiAgICB0aGlzLmhhc2pRdWVyeSA9IHR5cGVvZiBqUXVlcnkgPT09ICdmdW5jdGlvbic7XG4gICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG4gICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9uID8gJ29uJyA6ICdiaW5kJztcbiAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG4gICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcbiAgICAgIGlmICghbGF6eSkge1xuICAgICAgICB0aGlzLm9uKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElFOSBkb2Vzbid0IGZpcmUgaW5wdXQgZXZlbnQgb24gYmFja3NwYWNlL2RlbC9jdXRcbiAgICBpZiAoIWxhenkgJiYgaXNJRTkpIHtcbiAgICAgIHRoaXMub24oJ2N1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbmV4dFRpY2soc2VsZi5saXN0ZW5lcik7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gNDYgfHwgZS5rZXlDb2RlID09PSA4KSB7XG4gICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBzZXQgaW5pdGlhbCB2YWx1ZSBpZiBwcmVzZW50XG4gICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndmFsdWUnKSB8fCBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnICYmIGVsLnZhbHVlLnRyaW0oKSkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIC8vICMzMDI5IG9ubHkgdXBkYXRlIHdoZW4gdGhlIHZhbHVlIGNoYW5nZXMuIFRoaXMgcHJldmVudFxuICAgIC8vIGJyb3dzZXJzIGZyb20gb3ZlcndyaXRpbmcgdmFsdWVzIGxpa2Ugc2VsZWN0aW9uU3RhcnRcbiAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgaWYgKHZhbHVlICE9PSB0aGlzLmVsLnZhbHVlKSB0aGlzLmVsLnZhbHVlID0gdmFsdWU7XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcbiAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub2ZmID8gJ29mZicgOiAndW5iaW5kJztcbiAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcmFkaW8gPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyB2YWx1ZSBvdmVyd3JpdGUgdmlhIHYtYmluZDp2YWx1ZVxuICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSkge1xuICAgICAgICByZXR1cm4gZWwuX3ZhbHVlO1xuICAgICAgfVxuICAgICAgdmFyIHZhbCA9IGVsLnZhbHVlO1xuICAgICAgaWYgKHNlbGYucGFyYW1zLm51bWJlcikge1xuICAgICAgICB2YWwgPSB0b051bWJlcih2YWwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xuXG4gICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGYuc2V0KHNlbGYuZ2V0VmFsdWUoKSk7XG4gICAgfTtcbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblxuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHRoaXMuZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSk7XG4gIH1cbn07XG5cbnZhciBzZWxlY3QgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICAvLyBtZXRob2QgdG8gZm9yY2UgdXBkYXRlIERPTSB1c2luZyBsYXRlc3QgdmFsdWUuXG4gICAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZWxmLl93YXRjaGVyKSB7XG4gICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIuZ2V0KCkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgbXVsdGlwbGUgc2VsZWN0XG4gICAgdmFyIG11bHRpcGxlID0gdGhpcy5tdWx0aXBsZSA9IGVsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKTtcblxuICAgIC8vIGF0dGFjaCBsaXN0ZW5lclxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUpO1xuICAgICAgdmFsdWUgPSBzZWxmLnBhcmFtcy5udW1iZXIgPyBpc0FycmF5KHZhbHVlKSA/IHZhbHVlLm1hcCh0b051bWJlcikgOiB0b051bWJlcih2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgIHNlbGYuc2V0KHZhbHVlKTtcbiAgICB9O1xuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXG4gICAgLy8gaWYgaGFzIGluaXRpYWwgdmFsdWUsIHNldCBhZnRlckJpbmRcbiAgICB2YXIgaW5pdFZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlLCB0cnVlKTtcbiAgICBpZiAobXVsdGlwbGUgJiYgaW5pdFZhbHVlLmxlbmd0aCB8fCAhbXVsdGlwbGUgJiYgaW5pdFZhbHVlICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG4gICAgfVxuXG4gICAgLy8gQWxsIG1ham9yIGJyb3dzZXJzIGV4Y2VwdCBGaXJlZm94IHJlc2V0c1xuICAgIC8vIHNlbGVjdGVkSW5kZXggd2l0aCB2YWx1ZSAtMSB0byAwIHdoZW4gdGhlIGVsZW1lbnRcbiAgICAvLyBpcyBhcHBlbmRlZCB0byBhIG5ldyBwYXJlbnQsIHRoZXJlZm9yZSB3ZSBoYXZlIHRvXG4gICAgLy8gZm9yY2UgYSBET00gdXBkYXRlIHdoZW5ldmVyIHRoYXQgaGFwcGVucy4uLlxuICAgIHRoaXMudm0uJG9uKCdob29rOmF0dGFjaGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgbmV4dFRpY2soX3RoaXMuZm9yY2VVcGRhdGUpO1xuICAgIH0pO1xuICAgIGlmICghaW5Eb2MoZWwpKSB7XG4gICAgICBuZXh0VGljayh0aGlzLmZvcmNlVXBkYXRlKTtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICB2YXIgbXVsdGkgPSB0aGlzLm11bHRpcGxlICYmIGlzQXJyYXkodmFsdWUpO1xuICAgIHZhciBvcHRpb25zID0gZWwub3B0aW9ucztcbiAgICB2YXIgaSA9IG9wdGlvbnMubGVuZ3RoO1xuICAgIHZhciBvcCwgdmFsO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIG9wID0gb3B0aW9uc1tpXTtcbiAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgICBvcC5zZWxlY3RlZCA9IG11bHRpID8gaW5kZXhPZiQxKHZhbHVlLCB2YWwpID4gLTEgOiBsb29zZUVxdWFsKHZhbHVlLCB2YWwpO1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICB0aGlzLnZtLiRvZmYoJ2hvb2s6YXR0YWNoZWQnLCB0aGlzLmZvcmNlVXBkYXRlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgc2VsZWN0IHZhbHVlXG4gKlxuICogQHBhcmFtIHtTZWxlY3RFbGVtZW50fSBlbFxuICogQHBhcmFtIHtCb29sZWFufSBtdWx0aVxuICogQHBhcmFtIHtCb29sZWFufSBpbml0XG4gKiBAcmV0dXJuIHtBcnJheXwqfVxuICovXG5cbmZ1bmN0aW9uIGdldFZhbHVlKGVsLCBtdWx0aSwgaW5pdCkge1xuICB2YXIgcmVzID0gbXVsdGkgPyBbXSA6IG51bGw7XG4gIHZhciBvcCwgdmFsLCBzZWxlY3RlZDtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBlbC5vcHRpb25zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG9wID0gZWwub3B0aW9uc1tpXTtcbiAgICBzZWxlY3RlZCA9IGluaXQgPyBvcC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgOiBvcC5zZWxlY3RlZDtcbiAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuICAgICAgaWYgKG11bHRpKSB7XG4gICAgICAgIHJlcy5wdXNoKHZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIE5hdGl2ZSBBcnJheS5pbmRleE9mIHVzZXMgc3RyaWN0IGVxdWFsLCBidXQgaW4gdGhpc1xuICogY2FzZSB3ZSBuZWVkIHRvIG1hdGNoIHN0cmluZy9udW1iZXJzIHdpdGggY3VzdG9tIGVxdWFsLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBpbmRleE9mJDEoYXJyLCB2YWwpIHtcbiAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG52YXIgY2hlY2tib3ggPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZWwuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gZWwuX3ZhbHVlIDogc2VsZi5wYXJhbXMubnVtYmVyID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldEJvb2xlYW5WYWx1ZSgpIHtcbiAgICAgIHZhciB2YWwgPSBlbC5jaGVja2VkO1xuICAgICAgaWYgKHZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBlbC5fdHJ1ZVZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKCF2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ19mYWxzZVZhbHVlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsLl9mYWxzZVZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG5cbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1vZGVsID0gc2VsZi5fd2F0Y2hlci52YWx1ZTtcbiAgICAgIGlmIChpc0FycmF5KG1vZGVsKSkge1xuICAgICAgICB2YXIgdmFsID0gc2VsZi5nZXRWYWx1ZSgpO1xuICAgICAgICBpZiAoZWwuY2hlY2tlZCkge1xuICAgICAgICAgIGlmIChpbmRleE9mKG1vZGVsLCB2YWwpIDwgMCkge1xuICAgICAgICAgICAgbW9kZWwucHVzaCh2YWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb2RlbC4kcmVtb3ZlKHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuc2V0KGdldEJvb2xlYW5WYWx1ZSgpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIGVsLmNoZWNrZWQgPSBpbmRleE9mKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpID4gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCBlbC5fdHJ1ZVZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSAhIXZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxudmFyIGhhbmRsZXJzID0ge1xuICB0ZXh0OiB0ZXh0JDIsXG4gIHJhZGlvOiByYWRpbyxcbiAgc2VsZWN0OiBzZWxlY3QsXG4gIGNoZWNrYm94OiBjaGVja2JveFxufTtcblxudmFyIG1vZGVsID0ge1xuXG4gIHByaW9yaXR5OiBNT0RFTCxcbiAgdHdvV2F5OiB0cnVlLFxuICBoYW5kbGVyczogaGFuZGxlcnMsXG4gIHBhcmFtczogWydsYXp5JywgJ251bWJlcicsICdkZWJvdW5jZSddLFxuXG4gIC8qKlxuICAgKiBQb3NzaWJsZSBlbGVtZW50czpcbiAgICogICA8c2VsZWN0PlxuICAgKiAgIDx0ZXh0YXJlYT5cbiAgICogICA8aW5wdXQgdHlwZT1cIipcIj5cbiAgICogICAgIC0gdGV4dFxuICAgKiAgICAgLSBjaGVja2JveFxuICAgKiAgICAgLSByYWRpb1xuICAgKiAgICAgLSBudW1iZXJcbiAgICovXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBmcmllbmRseSB3YXJuaW5nLi4uXG4gICAgdGhpcy5jaGVja0ZpbHRlcnMoKTtcbiAgICBpZiAodGhpcy5oYXNSZWFkICYmICF0aGlzLmhhc1dyaXRlKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgYSByZWFkLW9ubHkgZmlsdGVyIHdpdGggJyArICd2LW1vZGVsPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCIuICcgKyAnWW91IG1pZ2h0IHdhbnQgdG8gdXNlIGEgdHdvLXdheSBmaWx0ZXIgdG8gZW5zdXJlIGNvcnJlY3QgYmVoYXZpb3IuJywgdGhpcy52bSk7XG4gICAgfVxuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIHRhZyA9IGVsLnRhZ05hbWU7XG4gICAgdmFyIGhhbmRsZXI7XG4gICAgaWYgKHRhZyA9PT0gJ0lOUFVUJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzW2VsLnR5cGVdIHx8IGhhbmRsZXJzLnRleHQ7XG4gICAgfSBlbHNlIGlmICh0YWcgPT09ICdTRUxFQ1QnKSB7XG4gICAgICBoYW5kbGVyID0gaGFuZGxlcnMuc2VsZWN0O1xuICAgIH0gZWxzZSBpZiAodGFnID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICBoYW5kbGVyID0gaGFuZGxlcnMudGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW1vZGVsIGRvZXMgbm90IHN1cHBvcnQgZWxlbWVudCB0eXBlOiAnICsgdGFnLCB0aGlzLnZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWwuX192X21vZGVsID0gdGhpcztcbiAgICBoYW5kbGVyLmJpbmQuY2FsbCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZSA9IGhhbmRsZXIudXBkYXRlO1xuICAgIHRoaXMuX3VuYmluZCA9IGhhbmRsZXIudW5iaW5kO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayByZWFkL3dyaXRlIGZpbHRlciBzdGF0cy5cbiAgICovXG5cbiAgY2hlY2tGaWx0ZXJzOiBmdW5jdGlvbiBjaGVja0ZpbHRlcnMoKSB7XG4gICAgdmFyIGZpbHRlcnMgPSB0aGlzLmZpbHRlcnM7XG4gICAgaWYgKCFmaWx0ZXJzKSByZXR1cm47XG4gICAgdmFyIGkgPSBmaWx0ZXJzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIgZmlsdGVyID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyc1tpXS5uYW1lKTtcbiAgICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nIHx8IGZpbHRlci5yZWFkKSB7XG4gICAgICAgIHRoaXMuaGFzUmVhZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoZmlsdGVyLndyaXRlKSB7XG4gICAgICAgIHRoaXMuaGFzV3JpdGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLmVsLl9fdl9tb2RlbCA9IG51bGw7XG4gICAgdGhpcy5fdW5iaW5kICYmIHRoaXMuX3VuYmluZCgpO1xuICB9XG59O1xuXG4vLyBrZXlDb2RlIGFsaWFzZXNcbnZhciBrZXlDb2RlcyA9IHtcbiAgZXNjOiAyNyxcbiAgdGFiOiA5LFxuICBlbnRlcjogMTMsXG4gIHNwYWNlOiAzMixcbiAgJ2RlbGV0ZSc6IFs4LCA0Nl0sXG4gIHVwOiAzOCxcbiAgbGVmdDogMzcsXG4gIHJpZ2h0OiAzOSxcbiAgZG93bjogNDBcbn07XG5cbmZ1bmN0aW9uIGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKSB7XG4gIHZhciBjb2RlcyA9IGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgY2hhckNvZGUgPSBrZXkuY2hhckNvZGVBdCgwKTtcbiAgICBpZiAoY2hhckNvZGUgPiA0NyAmJiBjaGFyQ29kZSA8IDU4KSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoa2V5LCAxMCk7XG4gICAgfVxuICAgIGlmIChrZXkubGVuZ3RoID09PSAxKSB7XG4gICAgICBjaGFyQ29kZSA9IGtleS50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCk7XG4gICAgICBpZiAoY2hhckNvZGUgPiA2NCAmJiBjaGFyQ29kZSA8IDkxKSB7XG4gICAgICAgIHJldHVybiBjaGFyQ29kZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleUNvZGVzW2tleV07XG4gIH0pO1xuICBjb2RlcyA9IFtdLmNvbmNhdC5hcHBseShbXSwgY29kZXMpO1xuICByZXR1cm4gZnVuY3Rpb24ga2V5SGFuZGxlcihlKSB7XG4gICAgaWYgKGNvZGVzLmluZGV4T2YoZS5rZXlDb2RlKSA+IC0xKSB7XG4gICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gc3RvcEZpbHRlcihoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBzdG9wSGFuZGxlcihlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHByZXZlbnRIYW5kbGVyKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2VsZkZpbHRlcihoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBzZWxmSGFuZGxlcihlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gICAgfVxuICB9O1xufVxuXG52YXIgb24kMSA9IHtcblxuICBwcmlvcml0eTogT04sXG4gIGFjY2VwdFN0YXRlbWVudDogdHJ1ZSxcbiAga2V5Q29kZXM6IGtleUNvZGVzLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gZGVhbCB3aXRoIGlmcmFtZXNcbiAgICBpZiAodGhpcy5lbC50YWdOYW1lID09PSAnSUZSQU1FJyAmJiB0aGlzLmFyZyAhPT0gJ2xvYWQnKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB0aGlzLmlmcmFtZUJpbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9uKHNlbGYuZWwuY29udGVudFdpbmRvdywgc2VsZi5hcmcsIHNlbGYuaGFuZGxlciwgc2VsZi5tb2RpZmllcnMuY2FwdHVyZSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5vbignbG9hZCcsIHRoaXMuaWZyYW1lQmluZCk7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGhhbmRsZXIpIHtcbiAgICAvLyBzdHViIGEgbm9vcCBmb3Igdi1vbiB3aXRoIG5vIHZhbHVlLFxuICAgIC8vIGUuZy4gQG1vdXNlZG93bi5wcmV2ZW50XG4gICAgaWYgKCF0aGlzLmRlc2NyaXB0b3IucmF3KSB7XG4gICAgICBoYW5kbGVyID0gZnVuY3Rpb24gKCkge307XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3Ytb246JyArIHRoaXMuYXJnICsgJz1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgZXhwZWN0cyBhIGZ1bmN0aW9uIHZhbHVlLCAnICsgJ2dvdCAnICsgaGFuZGxlciwgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYXBwbHkgbW9kaWZpZXJzXG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLnN0b3ApIHtcbiAgICAgIGhhbmRsZXIgPSBzdG9wRmlsdGVyKGhhbmRsZXIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RpZmllcnMucHJldmVudCkge1xuICAgICAgaGFuZGxlciA9IHByZXZlbnRGaWx0ZXIoaGFuZGxlcik7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGlmaWVycy5zZWxmKSB7XG4gICAgICBoYW5kbGVyID0gc2VsZkZpbHRlcihoYW5kbGVyKTtcbiAgICB9XG4gICAgLy8ga2V5IGZpbHRlclxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5tb2RpZmllcnMpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4ga2V5ICE9PSAnc3RvcCcgJiYga2V5ICE9PSAncHJldmVudCcgJiYga2V5ICE9PSAnc2VsZicgJiYga2V5ICE9PSAnY2FwdHVyZSc7XG4gICAgfSk7XG4gICAgaWYgKGtleXMubGVuZ3RoKSB7XG4gICAgICBoYW5kbGVyID0ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpO1xuICAgIH1cblxuICAgIHRoaXMucmVzZXQoKTtcbiAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xuXG4gICAgaWYgKHRoaXMuaWZyYW1lQmluZCkge1xuICAgICAgdGhpcy5pZnJhbWVCaW5kKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uKHRoaXMuZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIsIHRoaXMubW9kaWZpZXJzLmNhcHR1cmUpO1xuICAgIH1cbiAgfSxcblxuICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5pZnJhbWVCaW5kID8gdGhpcy5lbC5jb250ZW50V2luZG93IDogdGhpcy5lbDtcbiAgICBpZiAodGhpcy5oYW5kbGVyKSB7XG4gICAgICBvZmYoZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cbn07XG5cbnZhciBwcmVmaXhlcyA9IFsnLXdlYmtpdC0nLCAnLW1vei0nLCAnLW1zLSddO1xudmFyIGNhbWVsUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXTtcbnZhciBpbXBvcnRhbnRSRSA9IC8haW1wb3J0YW50Oz8kLztcbnZhciBwcm9wQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG52YXIgdGVzdEVsID0gbnVsbDtcblxudmFyIHN0eWxlID0ge1xuXG4gIGRlZXA6IHRydWUsXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5lbC5zdHlsZS5jc3NUZXh0ID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUucmVkdWNlKGV4dGVuZCwge30pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pO1xuICAgIH1cbiAgfSxcblxuICBoYW5kbGVPYmplY3Q6IGZ1bmN0aW9uIGhhbmRsZU9iamVjdCh2YWx1ZSkge1xuICAgIC8vIGNhY2hlIG9iamVjdCBzdHlsZXMgc28gdGhhdCBvbmx5IGNoYW5nZWQgcHJvcHNcbiAgICAvLyBhcmUgYWN0dWFsbHkgdXBkYXRlZC5cbiAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlIHx8ICh0aGlzLmNhY2hlID0ge30pO1xuICAgIHZhciBuYW1lLCB2YWw7XG4gICAgZm9yIChuYW1lIGluIGNhY2hlKSB7XG4gICAgICBpZiAoIShuYW1lIGluIHZhbHVlKSkge1xuICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCBudWxsKTtcbiAgICAgICAgZGVsZXRlIGNhY2hlW25hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKG5hbWUgaW4gdmFsdWUpIHtcbiAgICAgIHZhbCA9IHZhbHVlW25hbWVdO1xuICAgICAgaWYgKHZhbCAhPT0gY2FjaGVbbmFtZV0pIHtcbiAgICAgICAgY2FjaGVbbmFtZV0gPSB2YWw7XG4gICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIHZhbCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKHByb3AsIHZhbHVlKSB7XG4gICAgcHJvcCA9IG5vcm1hbGl6ZShwcm9wKTtcbiAgICBpZiAoIXByb3ApIHJldHVybjsgLy8gdW5zdXBwb3J0ZWQgcHJvcFxuICAgIC8vIGNhc3QgcG9zc2libGUgbnVtYmVycy9ib29sZWFucyBpbnRvIHN0cmluZ3NcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkgdmFsdWUgKz0gJyc7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB2YXIgaXNJbXBvcnRhbnQgPSBpbXBvcnRhbnRSRS50ZXN0KHZhbHVlKSA/ICdpbXBvcnRhbnQnIDogJyc7XG4gICAgICBpZiAoaXNJbXBvcnRhbnQpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgd2FybignSXRcXCdzIHByb2JhYmx5IGEgYmFkIGlkZWEgdG8gdXNlICFpbXBvcnRhbnQgd2l0aCBpbmxpbmUgcnVsZXMuICcgKyAnVGhpcyBmZWF0dXJlIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFZ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKS50cmltKCk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkocHJvcC5rZWJhYiwgdmFsdWUsIGlzSW1wb3J0YW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9ICcnO1xuICAgIH1cbiAgfVxuXG59O1xuXG4vKipcbiAqIE5vcm1hbGl6ZSBhIENTUyBwcm9wZXJ0eSBuYW1lLlxuICogLSBjYWNoZSByZXN1bHRcbiAqIC0gYXV0byBwcmVmaXhcbiAqIC0gY2FtZWxDYXNlIC0+IGRhc2gtY2FzZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gbm9ybWFsaXplKHByb3ApIHtcbiAgaWYgKHByb3BDYWNoZVtwcm9wXSkge1xuICAgIHJldHVybiBwcm9wQ2FjaGVbcHJvcF07XG4gIH1cbiAgdmFyIHJlcyA9IHByZWZpeChwcm9wKTtcbiAgcHJvcENhY2hlW3Byb3BdID0gcHJvcENhY2hlW3Jlc10gPSByZXM7XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogQXV0byBkZXRlY3QgdGhlIGFwcHJvcHJpYXRlIHByZWZpeCBmb3IgYSBDU1MgcHJvcGVydHkuXG4gKiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wYXVsaXJpc2gvNTIzNjkyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBwcmVmaXgocHJvcCkge1xuICBwcm9wID0gaHlwaGVuYXRlKHByb3ApO1xuICB2YXIgY2FtZWwgPSBjYW1lbGl6ZShwcm9wKTtcbiAgdmFyIHVwcGVyID0gY2FtZWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbC5zbGljZSgxKTtcbiAgaWYgKCF0ZXN0RWwpIHtcbiAgICB0ZXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgfVxuICB2YXIgaSA9IHByZWZpeGVzLmxlbmd0aDtcbiAgdmFyIHByZWZpeGVkO1xuICBpZiAoY2FtZWwgIT09ICdmaWx0ZXInICYmIGNhbWVsIGluIHRlc3RFbC5zdHlsZSkge1xuICAgIHJldHVybiB7XG4gICAgICBrZWJhYjogcHJvcCxcbiAgICAgIGNhbWVsOiBjYW1lbFxuICAgIH07XG4gIH1cbiAgd2hpbGUgKGktLSkge1xuICAgIHByZWZpeGVkID0gY2FtZWxQcmVmaXhlc1tpXSArIHVwcGVyO1xuICAgIGlmIChwcmVmaXhlZCBpbiB0ZXN0RWwuc3R5bGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtlYmFiOiBwcmVmaXhlc1tpXSArIHByb3AsXG4gICAgICAgIGNhbWVsOiBwcmVmaXhlZFxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cblxuLy8geGxpbmtcbnZhciB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xudmFyIHhsaW5rUkUgPSAvXnhsaW5rOi87XG5cbi8vIGNoZWNrIGZvciBhdHRyaWJ1dGVzIHRoYXQgcHJvaGliaXQgaW50ZXJwb2xhdGlvbnNcbnZhciBkaXNhbGxvd2VkSW50ZXJwQXR0clJFID0gL152LXxeOnxeQHxeKD86aXN8dHJhbnNpdGlvbnx0cmFuc2l0aW9uLW1vZGV8ZGVib3VuY2V8dHJhY2stYnl8c3RhZ2dlcnxlbnRlci1zdGFnZ2VyfGxlYXZlLXN0YWdnZXIpJC87XG4vLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBhbHNvIHNldCB0aGVpciBjb3JyZXNwb25kaW5nIHByb3BlcnRpZXNcbi8vIGJlY2F1c2UgdGhleSBvbmx5IGFmZmVjdCB0aGUgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgZWxlbWVudFxudmFyIGF0dHJXaXRoUHJvcHNSRSA9IC9eKD86dmFsdWV8Y2hlY2tlZHxzZWxlY3RlZHxtdXRlZCkkLztcbi8vIHRoZXNlIGF0dHJpYnV0ZXMgZXhwZWN0IGVudW1yYXRlZCB2YWx1ZXMgb2YgXCJ0cnVlXCIgb3IgXCJmYWxzZVwiXG4vLyBidXQgYXJlIG5vdCBib29sZWFuIGF0dHJpYnV0ZXNcbnZhciBlbnVtZXJhdGVkQXR0clJFID0gL14oPzpkcmFnZ2FibGV8Y29udGVudGVkaXRhYmxlfHNwZWxsY2hlY2spJC87XG5cbi8vIHRoZXNlIGF0dHJpYnV0ZXMgc2hvdWxkIHNldCBhIGhpZGRlbiBwcm9wZXJ0eSBmb3Jcbi8vIGJpbmRpbmcgdi1tb2RlbCB0byBvYmplY3QgdmFsdWVzXG52YXIgbW9kZWxQcm9wcyA9IHtcbiAgdmFsdWU6ICdfdmFsdWUnLFxuICAndHJ1ZS12YWx1ZSc6ICdfdHJ1ZVZhbHVlJyxcbiAgJ2ZhbHNlLXZhbHVlJzogJ19mYWxzZVZhbHVlJ1xufTtcblxudmFyIGJpbmQkMSA9IHtcblxuICBwcmlvcml0eTogQklORCxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG4gICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcbiAgICAvLyBzaG91bGQgYmUgZGVlcCB3YXRjaCBvbiBvYmplY3QgbW9kZVxuICAgIGlmICghYXR0cikge1xuICAgICAgdGhpcy5kZWVwID0gdHJ1ZTtcbiAgICB9XG4gICAgLy8gaGFuZGxlIGludGVycG9sYXRpb24gYmluZGluZ3NcbiAgICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcbiAgICB2YXIgdG9rZW5zID0gZGVzY3JpcHRvci5pbnRlcnA7XG4gICAgaWYgKHRva2Vucykge1xuICAgICAgLy8gaGFuZGxlIGludGVycG9sYXRpb25zIHdpdGggb25lLXRpbWUgdG9rZW5zXG4gICAgICBpZiAoZGVzY3JpcHRvci5oYXNPbmVUaW1lKSB7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IHRva2Vuc1RvRXhwKHRva2VucywgdGhpcy5fc2NvcGUgfHwgdGhpcy52bSk7XG4gICAgICB9XG5cbiAgICAgIC8vIG9ubHkgYWxsb3cgYmluZGluZyBvbiBuYXRpdmUgYXR0cmlidXRlc1xuICAgICAgaWYgKGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUudGVzdChhdHRyKSB8fCBhdHRyID09PSAnbmFtZScgJiYgKHRhZyA9PT0gJ1BBUlRJQUwnIHx8IHRhZyA9PT0gJ1NMT1QnKSkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYXR0cmlidXRlIGludGVycG9sYXRpb24gaXMgbm90IGFsbG93ZWQgaW4gVnVlLmpzICcgKyAnZGlyZWN0aXZlcyBhbmQgc3BlY2lhbCBhdHRyaWJ1dGVzLicsIHRoaXMudm0pO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YXIgcmF3ID0gYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICc7XG4gICAgICAgIC8vIHdhcm4gc3JjXG4gICAgICAgIGlmIChhdHRyID09PSAnc3JjJykge1xuICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzcmNcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ2EgNDA0IHJlcXVlc3QuIFVzZSB2LWJpbmQ6c3JjIGluc3RlYWQuJywgdGhpcy52bSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3YXJuIHN0eWxlXG4gICAgICAgIGlmIChhdHRyID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgd2FybihyYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInN0eWxlXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICd0aGUgYXR0cmlidXRlIHRvIGJlIGRpc2NhcmRlZCBpbiBJbnRlcm5ldCBFeHBsb3Jlci4gJyArICdVc2Ugdi1iaW5kOnN0eWxlIGluc3RlYWQuJywgdGhpcy52bSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAodGhpcy5pbnZhbGlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG4gICAgaWYgKHRoaXMuYXJnKSB7XG4gICAgICB0aGlzLmhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gc2hhcmUgb2JqZWN0IGhhbmRsZXIgd2l0aCB2LWJpbmQ6Y2xhc3NcbiAgaGFuZGxlT2JqZWN0OiBzdHlsZS5oYW5kbGVPYmplY3QsXG5cbiAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiBoYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBpbnRlcnAgPSB0aGlzLmRlc2NyaXB0b3IuaW50ZXJwO1xuICAgIGlmICh0aGlzLm1vZGlmaWVycy5jYW1lbCkge1xuICAgICAgYXR0ciA9IGNhbWVsaXplKGF0dHIpO1xuICAgIH1cbiAgICBpZiAoIWludGVycCAmJiBhdHRyV2l0aFByb3BzUkUudGVzdChhdHRyKSAmJiBhdHRyIGluIGVsKSB7XG4gICAgICB2YXIgYXR0clZhbHVlID0gYXR0ciA9PT0gJ3ZhbHVlJyA/IHZhbHVlID09IG51bGwgLy8gSUU5IHdpbGwgc2V0IGlucHV0LnZhbHVlIHRvIFwibnVsbFwiIGZvciBudWxsLi4uXG4gICAgICA/ICcnIDogdmFsdWUgOiB2YWx1ZTtcblxuICAgICAgaWYgKGVsW2F0dHJdICE9PSBhdHRyVmFsdWUpIHtcbiAgICAgICAgZWxbYXR0cl0gPSBhdHRyVmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHNldCBtb2RlbCBwcm9wc1xuICAgIHZhciBtb2RlbFByb3AgPSBtb2RlbFByb3BzW2F0dHJdO1xuICAgIGlmICghaW50ZXJwICYmIG1vZGVsUHJvcCkge1xuICAgICAgZWxbbW9kZWxQcm9wXSA9IHZhbHVlO1xuICAgICAgLy8gdXBkYXRlIHYtbW9kZWwgaWYgcHJlc2VudFxuICAgICAgdmFyIG1vZGVsID0gZWwuX192X21vZGVsO1xuICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgIG1vZGVsLmxpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGRvIG5vdCBzZXQgdmFsdWUgYXR0cmlidXRlIGZvciB0ZXh0YXJlYVxuICAgIGlmIChhdHRyID09PSAndmFsdWUnICYmIGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdXBkYXRlIGF0dHJpYnV0ZVxuICAgIGlmIChlbnVtZXJhdGVkQXR0clJFLnRlc3QoYXR0cikpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZScpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gZmFsc2UpIHtcbiAgICAgIGlmIChhdHRyID09PSAnY2xhc3MnKSB7XG4gICAgICAgIC8vIGhhbmRsZSBlZGdlIGNhc2UgIzE5NjA6XG4gICAgICAgIC8vIGNsYXNzIGludGVycG9sYXRpb24gc2hvdWxkIG5vdCBvdmVyd3JpdGUgVnVlIHRyYW5zaXRpb24gY2xhc3NcbiAgICAgICAgaWYgKGVsLl9fdl90cmFucykge1xuICAgICAgICAgIHZhbHVlICs9ICcgJyArIGVsLl9fdl90cmFucy5pZCArICctdHJhbnNpdGlvbic7XG4gICAgICAgIH1cbiAgICAgICAgc2V0Q2xhc3MoZWwsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoeGxpbmtSRS50ZXN0KGF0dHIpKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGVsID0ge1xuXG4gIHByaW9yaXR5OiBFTCxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghdGhpcy5hcmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGlkID0gdGhpcy5pZCA9IGNhbWVsaXplKHRoaXMuYXJnKTtcbiAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzO1xuICAgIGlmIChoYXNPd24ocmVmcywgaWQpKSB7XG4gICAgICByZWZzW2lkXSA9IHRoaXMuZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHJlZnMsIGlkLCB0aGlzLmVsKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcbiAgICBpZiAocmVmc1t0aGlzLmlkXSA9PT0gdGhpcy5lbCkge1xuICAgICAgcmVmc1t0aGlzLmlkXSA9IG51bGw7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcmVmID0ge1xuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1yZWY6JyArIHRoaXMuYXJnICsgJyBtdXN0IGJlIHVzZWQgb24gYSBjaGlsZCAnICsgJ2NvbXBvbmVudC4gRm91bmQgb24gPCcgKyB0aGlzLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+LicsIHRoaXMudm0pO1xuICB9XG59O1xuXG52YXIgY2xvYWsgPSB7XG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB0aGlzLnZtLiRvbmNlKCdwcmUtaG9vazpjb21waWxlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgndi1jbG9haycpO1xuICAgIH0pO1xuICB9XG59O1xuXG4vLyBtdXN0IGV4cG9ydCBwbGFpbiBvYmplY3RcbnZhciBkaXJlY3RpdmVzID0ge1xuICB0ZXh0OiB0ZXh0JDEsXG4gIGh0bWw6IGh0bWwsXG4gICdmb3InOiB2Rm9yLFxuICAnaWYnOiB2SWYsXG4gIHNob3c6IHNob3csXG4gIG1vZGVsOiBtb2RlbCxcbiAgb246IG9uJDEsXG4gIGJpbmQ6IGJpbmQkMSxcbiAgZWw6IGVsLFxuICByZWY6IHJlZixcbiAgY2xvYWs6IGNsb2FrXG59O1xuXG52YXIgdkNsYXNzID0ge1xuXG4gIGRlZXA6IHRydWUsXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuc2V0Q2xhc3ModmFsdWUudHJpbSgpLnNwbGl0KC9cXHMrLykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldENsYXNzKG5vcm1hbGl6ZSQxKHZhbHVlKSk7XG4gICAgfVxuICB9LFxuXG4gIHNldENsYXNzOiBmdW5jdGlvbiBzZXRDbGFzcyh2YWx1ZSkge1xuICAgIHRoaXMuY2xlYW51cCh2YWx1ZSk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciB2YWwgPSB2YWx1ZVtpXTtcbiAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgYXBwbHkodGhpcy5lbCwgdmFsLCBhZGRDbGFzcyk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucHJldktleXMgPSB2YWx1ZTtcbiAgfSxcblxuICBjbGVhbnVwOiBmdW5jdGlvbiBjbGVhbnVwKHZhbHVlKSB7XG4gICAgdmFyIHByZXZLZXlzID0gdGhpcy5wcmV2S2V5cztcbiAgICBpZiAoIXByZXZLZXlzKSByZXR1cm47XG4gICAgdmFyIGkgPSBwcmV2S2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIGtleSA9IHByZXZLZXlzW2ldO1xuICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5pbmRleE9mKGtleSkgPCAwKSB7XG4gICAgICAgIGFwcGx5KHRoaXMuZWwsIGtleSwgcmVtb3ZlQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBOb3JtYWxpemUgb2JqZWN0cyBhbmQgYXJyYXlzIChwb3RlbnRpYWxseSBjb250YWluaW5nIG9iamVjdHMpXG4gKiBpbnRvIGFycmF5IG9mIHN0cmluZ3MuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXk8U3RyaW5nfE9iamVjdD59IHZhbHVlXG4gKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fVxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZSQxKHZhbHVlKSB7XG4gIHZhciByZXMgPSBbXTtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBfa2V5ID0gdmFsdWVbaV07XG4gICAgICBpZiAoX2tleSkge1xuICAgICAgICBpZiAodHlwZW9mIF9rZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmVzLnB1c2goX2tleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yICh2YXIgayBpbiBfa2V5KSB7XG4gICAgICAgICAgICBpZiAoX2tleVtrXSkgcmVzLnB1c2goayk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlW2tleV0pIHJlcy5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogQWRkIG9yIHJlbW92ZSBhIGNsYXNzL2NsYXNzZXMgb24gYW4gZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgVGhlIGNsYXNzIG5hbWUuIFRoaXMgbWF5IG9yIG1heSBub3RcbiAqICAgICAgICAgICAgICAgICAgICAgY29udGFpbiBhIHNwYWNlIGNoYXJhY3RlciwgaW4gc3VjaCBhXG4gKiAgICAgICAgICAgICAgICAgICAgIGNhc2Ugd2UnbGwgZGVhbCB3aXRoIG11bHRpcGxlIGNsYXNzXG4gKiAgICAgICAgICAgICAgICAgICAgIG5hbWVzIGF0IG9uY2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbmZ1bmN0aW9uIGFwcGx5KGVsLCBrZXksIGZuKSB7XG4gIGtleSA9IGtleS50cmltKCk7XG4gIGlmIChrZXkuaW5kZXhPZignICcpID09PSAtMSkge1xuICAgIGZuKGVsLCBrZXkpO1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBUaGUga2V5IGNvbnRhaW5zIG9uZSBvciBtb3JlIHNwYWNlIGNoYXJhY3RlcnMuXG4gIC8vIFNpbmNlIGEgY2xhc3MgbmFtZSBkb2Vzbid0IGFjY2VwdCBzdWNoIGNoYXJhY3RlcnMsIHdlXG4gIC8vIHRyZWF0IGl0IGFzIG11bHRpcGxlIGNsYXNzZXMuXG4gIHZhciBrZXlzID0ga2V5LnNwbGl0KC9cXHMrLyk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmbihlbCwga2V5c1tpXSk7XG4gIH1cbn1cblxudmFyIGNvbXBvbmVudCA9IHtcblxuICBwcmlvcml0eTogQ09NUE9ORU5ULFxuXG4gIHBhcmFtczogWydrZWVwLWFsaXZlJywgJ3RyYW5zaXRpb24tbW9kZScsICdpbmxpbmUtdGVtcGxhdGUnXSxcblxuICAvKipcbiAgICogU2V0dXAuIFR3byBwb3NzaWJsZSB1c2FnZXM6XG4gICAqXG4gICAqIC0gc3RhdGljOlxuICAgKiAgIDxjb21wPiBvciA8ZGl2IHYtY29tcG9uZW50PVwiY29tcFwiPlxuICAgKlxuICAgKiAtIGR5bmFtaWM6XG4gICAqICAgPGNvbXBvbmVudCA6aXM9XCJ2aWV3XCI+XG4gICAqL1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgaWYgKCF0aGlzLmVsLl9fdnVlX18pIHtcbiAgICAgIC8vIGtlZXAtYWxpdmUgY2FjaGVcbiAgICAgIHRoaXMua2VlcEFsaXZlID0gdGhpcy5wYXJhbXMua2VlcEFsaXZlO1xuICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG4gICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgIH1cbiAgICAgIC8vIGNoZWNrIGlubGluZS10ZW1wbGF0ZVxuICAgICAgaWYgKHRoaXMucGFyYW1zLmlubGluZVRlbXBsYXRlKSB7XG4gICAgICAgIC8vIGV4dHJhY3QgaW5saW5lIHRlbXBsYXRlIGFzIGEgRG9jdW1lbnRGcmFnbWVudFxuICAgICAgICB0aGlzLmlubGluZVRlbXBsYXRlID0gZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICAvLyBjb21wb25lbnQgcmVzb2x1dGlvbiByZWxhdGVkIHN0YXRlXG4gICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IHRoaXMuQ29tcG9uZW50ID0gbnVsbDtcbiAgICAgIC8vIHRyYW5zaXRpb24gcmVsYXRlZCBzdGF0ZVxuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMgPSAwO1xuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcbiAgICAgIC8vIGNyZWF0ZSBhIHJlZiBhbmNob3JcbiAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWNvbXBvbmVudCcpO1xuICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG4gICAgICAvLyByZW1vdmUgaXMgYXR0cmlidXRlLlxuICAgICAgLy8gdGhpcyBpcyByZW1vdmVkIGR1cmluZyBjb21waWxhdGlvbiwgYnV0IGJlY2F1c2UgY29tcGlsYXRpb24gaXNcbiAgICAgIC8vIGNhY2hlZCwgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVzZWQgZWxzZXdoZXJlIHRoaXMgYXR0cmlidXRlXG4gICAgICAvLyB3aWxsIHJlbWFpbiBhdCBsaW5rIHRpbWUuXG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcbiAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCc6aXMnKTtcbiAgICAgIC8vIHJlbW92ZSByZWYsIHNhbWUgYXMgYWJvdmVcbiAgICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCd2LXJlZjonICsgaHlwaGVuYXRlKHRoaXMuZGVzY3JpcHRvci5yZWYpKTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIHN0YXRpYywgYnVpbGQgcmlnaHQgbm93LlxuICAgICAgaWYgKHRoaXMubGl0ZXJhbCkge1xuICAgICAgICB0aGlzLnNldENvbXBvbmVudCh0aGlzLmV4cHJlc3Npb24pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2Nhbm5vdCBtb3VudCBjb21wb25lbnQgXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiICcgKyAnb24gYWxyZWFkeSBtb3VudGVkIGVsZW1lbnQ6ICcgKyB0aGlzLmVsKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFB1YmxpYyB1cGRhdGUsIGNhbGxlZCBieSB0aGUgd2F0Y2hlciBpbiB0aGUgZHluYW1pY1xuICAgKiBsaXRlcmFsIHNjZW5hcmlvLCBlLmcuIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuICAgKi9cblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICghdGhpcy5saXRlcmFsKSB7XG4gICAgICB0aGlzLnNldENvbXBvbmVudCh2YWx1ZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTd2l0Y2ggZHluYW1pYyBjb21wb25lbnRzLiBNYXkgcmVzb2x2ZSB0aGUgY29tcG9uZW50XG4gICAqIGFzeW5jaHJvbm91c2x5LCBhbmQgcGVyZm9ybSB0cmFuc2l0aW9uIGJhc2VkIG9uXG4gICAqIHNwZWNpZmllZCB0cmFuc2l0aW9uIG1vZGUuIEFjY2VwdHMgYSBmZXcgYWRkaXRpb25hbFxuICAgKiBhcmd1bWVudHMgc3BlY2lmaWNhbGx5IGZvciB2dWUtcm91dGVyLlxuICAgKlxuICAgKiBUaGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdoZW4gdGhlIGZ1bGwgdHJhbnNpdGlvbiBpc1xuICAgKiBmaW5pc2hlZC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgc2V0Q29tcG9uZW50OiBmdW5jdGlvbiBzZXRDb21wb25lbnQodmFsdWUsIGNiKSB7XG4gICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIC8vIGp1c3QgcmVtb3ZlIGN1cnJlbnRcbiAgICAgIHRoaXMudW5idWlsZCh0cnVlKTtcbiAgICAgIHRoaXMucmVtb3ZlKHRoaXMuY2hpbGRWTSwgY2IpO1xuICAgICAgdGhpcy5jaGlsZFZNID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdGhpcy5yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYubW91bnRDb21wb25lbnQoY2IpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXNvbHZlIHRoZSBjb21wb25lbnQgY29uc3RydWN0b3IgdG8gdXNlIHdoZW4gY3JlYXRpbmdcbiAgICogdGhlIGNoaWxkIHZtLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgcmVzb2x2ZUNvbXBvbmVudDogZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgY2IpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgICBzZWxmLkNvbXBvbmVudE5hbWUgPSBDb21wb25lbnQub3B0aW9ucy5uYW1lIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBudWxsKTtcbiAgICAgIHNlbGYuQ29tcG9uZW50ID0gQ29tcG9uZW50O1xuICAgICAgY2IoKTtcbiAgICB9KTtcbiAgICB0aGlzLnZtLl9yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCB0aGlzLnBlbmRpbmdDb21wb25lbnRDYik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSB1c2luZyB0aGUgY3VycmVudCBjb25zdHJ1Y3RvciBhbmRcbiAgICogcmVwbGFjZSB0aGUgZXhpc3RpbmcgaW5zdGFuY2UuIFRoaXMgbWV0aG9kIGRvZXNuJ3QgY2FyZVxuICAgKiB3aGV0aGVyIHRoZSBuZXcgY29tcG9uZW50IGFuZCB0aGUgb2xkIG9uZSBhcmUgYWN0dWFsbHlcbiAgICogdGhlIHNhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIG1vdW50Q29tcG9uZW50KGNiKSB7XG4gICAgLy8gYWN0dWFsIG1vdW50XG4gICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYWN0aXZhdGVIb29rcyA9IHRoaXMuQ29tcG9uZW50Lm9wdGlvbnMuYWN0aXZhdGU7XG4gICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG4gICAgdmFyIG5ld0NvbXBvbmVudCA9IHRoaXMuYnVpbGQoKTtcbiAgICBpZiAoYWN0aXZhdGVIb29rcyAmJiAhY2FjaGVkKSB7XG4gICAgICB0aGlzLndhaXRpbmdGb3IgPSBuZXdDb21wb25lbnQ7XG4gICAgICBjYWxsQWN0aXZhdGVIb29rcyhhY3RpdmF0ZUhvb2tzLCBuZXdDb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYud2FpdGluZ0ZvciAhPT0gbmV3Q29tcG9uZW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYud2FpdGluZ0ZvciA9IG51bGw7XG4gICAgICAgIHNlbGYudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGUgcmVmIGZvciBrZXB0LWFsaXZlIGNvbXBvbmVudFxuICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICBuZXdDb21wb25lbnQuX3VwZGF0ZVJlZigpO1xuICAgICAgfVxuICAgICAgdGhpcy50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogV2hlbiB0aGUgY29tcG9uZW50IGNoYW5nZXMgb3IgdW5iaW5kcyBiZWZvcmUgYW4gYXN5bmNcbiAgICogY29uc3RydWN0b3IgaXMgcmVzb2x2ZWQsIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSBpdHNcbiAgICogcGVuZGluZyBjYWxsYmFjay5cbiAgICovXG5cbiAgaW52YWxpZGF0ZVBlbmRpbmc6IGZ1bmN0aW9uIGludmFsaWRhdGVQZW5kaW5nKCkge1xuICAgIGlmICh0aGlzLnBlbmRpbmdDb21wb25lbnRDYikge1xuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IuY2FuY2VsKCk7XG4gICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IG51bGw7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBJbnN0YW50aWF0ZS9pbnNlcnQgYSBuZXcgY2hpbGQgdm0uXG4gICAqIElmIGtlZXAgYWxpdmUgYW5kIGhhcyBjYWNoZWQgaW5zdGFuY2UsIGluc2VydCB0aGF0XG4gICAqIGluc3RhbmNlOyBvdGhlcndpc2UgYnVpbGQgYSBuZXcgb25lIGFuZCBjYWNoZSBpdC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtleHRyYU9wdGlvbnNdXG4gICAqIEByZXR1cm4ge1Z1ZX0gLSB0aGUgY3JlYXRlZCBpbnN0YW5jZVxuICAgKi9cblxuICBidWlsZDogZnVuY3Rpb24gYnVpbGQoZXh0cmFPcHRpb25zKSB7XG4gICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICB9XG4gICAgaWYgKHRoaXMuQ29tcG9uZW50KSB7XG4gICAgICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBuYW1lOiB0aGlzLkNvbXBvbmVudE5hbWUsXG4gICAgICAgIGVsOiBjbG9uZU5vZGUodGhpcy5lbCksXG4gICAgICAgIHRlbXBsYXRlOiB0aGlzLmlubGluZVRlbXBsYXRlLFxuICAgICAgICAvLyBtYWtlIHN1cmUgdG8gYWRkIHRoZSBjaGlsZCB3aXRoIGNvcnJlY3QgcGFyZW50XG4gICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGl0cyBwYXJlbnRcbiAgICAgICAgLy8gc2hvdWxkIGJlIHRoZSB0cmFuc2NsdXNpb24gaG9zdC5cbiAgICAgICAgcGFyZW50OiB0aGlzLl9ob3N0IHx8IHRoaXMudm0sXG4gICAgICAgIC8vIGlmIG5vIGlubGluZS10ZW1wbGF0ZSwgdGhlbiB0aGUgY29tcGlsZWRcbiAgICAgICAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5cbiAgICAgICAgX2xpbmtlckNhY2hhYmxlOiAhdGhpcy5pbmxpbmVUZW1wbGF0ZSxcbiAgICAgICAgX3JlZjogdGhpcy5kZXNjcmlwdG9yLnJlZixcbiAgICAgICAgX2FzQ29tcG9uZW50OiB0cnVlLFxuICAgICAgICBfaXNSb3V0ZXJWaWV3OiB0aGlzLl9pc1JvdXRlclZpZXcsXG4gICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcbiAgICAgICAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXG4gICAgICAgIC8vIGFuZCBpdHMgaG9zdC5cbiAgICAgICAgX2NvbnRleHQ6IHRoaXMudm0sXG4gICAgICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG4gICAgICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG4gICAgICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG4gICAgICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cbiAgICAgICAgX3Njb3BlOiB0aGlzLl9zY29wZSxcbiAgICAgICAgLy8gcGFzcyBpbiB0aGUgb3duZXIgZnJhZ21lbnQgb2YgdGhpcyBjb21wb25lbnQuXG4gICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IHNvIHRoYXQgdGhlIGZyYWdtZW50IGNhbiBrZWVwXG4gICAgICAgIC8vIHRyYWNrIG9mIGl0cyBjb250YWluZWQgY29tcG9uZW50cyBpbiBvcmRlciB0b1xuICAgICAgICAvLyBjYWxsIGF0dGFjaC9kZXRhY2ggaG9va3MgZm9yIHRoZW0uXG4gICAgICAgIF9mcmFnOiB0aGlzLl9mcmFnXG4gICAgICB9O1xuICAgICAgLy8gZXh0cmEgb3B0aW9uc1xuICAgICAgLy8gaW4gMS4wLjAgdGhpcyBpcyB1c2VkIGJ5IHZ1ZS1yb3V0ZXIgb25seVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoZXh0cmFPcHRpb25zKSB7XG4gICAgICAgIGV4dGVuZChvcHRpb25zLCBleHRyYU9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuQ29tcG9uZW50KG9wdGlvbnMpO1xuICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG4gICAgICAgIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXSA9IGNoaWxkO1xuICAgICAgfVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsLmhhc0F0dHJpYnV0ZSgndHJhbnNpdGlvbicpICYmIGNoaWxkLl9pc0ZyYWdtZW50KSB7XG4gICAgICAgIHdhcm4oJ1RyYW5zaXRpb25zIHdpbGwgbm90IHdvcmsgb24gYSBmcmFnbWVudCBpbnN0YW5jZS4gJyArICdUZW1wbGF0ZTogJyArIGNoaWxkLiRvcHRpb25zLnRlbXBsYXRlLCBjaGlsZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUcnkgdG8gZ2V0IGEgY2FjaGVkIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IGNvbXBvbmVudC5cbiAgICpcbiAgICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cbiAgICovXG5cbiAgZ2V0Q2FjaGVkOiBmdW5jdGlvbiBnZXRDYWNoZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMua2VlcEFsaXZlICYmIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXTtcbiAgfSxcblxuICAvKipcbiAgICogVGVhcmRvd24gdGhlIGN1cnJlbnQgY2hpbGQsIGJ1dCBkZWZlcnMgY2xlYW51cCBzb1xuICAgKiB0aGF0IHdlIGNhbiBzZXBhcmF0ZSB0aGUgZGVzdHJveSBhbmQgcmVtb3ZhbCBzdGVwcy5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlclxuICAgKi9cblxuICB1bmJ1aWxkOiBmdW5jdGlvbiB1bmJ1aWxkKGRlZmVyKSB7XG4gICAgaWYgKHRoaXMud2FpdGluZ0Zvcikge1xuICAgICAgaWYgKCF0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLndhaXRpbmdGb3IuJGRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG51bGw7XG4gICAgfVxuICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRWTTtcbiAgICBpZiAoIWNoaWxkIHx8IHRoaXMua2VlcEFsaXZlKSB7XG4gICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgLy8gcmVtb3ZlIHJlZlxuICAgICAgICBjaGlsZC5faW5hY3RpdmUgPSB0cnVlO1xuICAgICAgICBjaGlsZC5fdXBkYXRlUmVmKHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyB0aGUgc29sZSBwdXJwb3NlIG9mIGBkZWZlckNsZWFudXBgIGlzIHNvIHRoYXQgd2UgY2FuXG4gICAgLy8gXCJkZWFjdGl2YXRlXCIgdGhlIHZtIHJpZ2h0IG5vdyBhbmQgcGVyZm9ybSBET00gcmVtb3ZhbFxuICAgIC8vIGxhdGVyLlxuICAgIGNoaWxkLiRkZXN0cm95KGZhbHNlLCBkZWZlcik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBjdXJyZW50IGRlc3Ryb3llZCBjaGlsZCBhbmQgbWFudWFsbHkgZG9cbiAgICogdGhlIGNsZWFudXAgYWZ0ZXIgcmVtb3ZhbC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoY2hpbGQsIGNiKSB7XG4gICAgdmFyIGtlZXBBbGl2ZSA9IHRoaXMua2VlcEFsaXZlO1xuICAgIGlmIChjaGlsZCkge1xuICAgICAgLy8gd2UgbWF5IGhhdmUgYSBjb21wb25lbnQgc3dpdGNoIHdoZW4gYSBwcmV2aW91c1xuICAgICAgLy8gY29tcG9uZW50IGlzIHN0aWxsIGJlaW5nIHRyYW5zaXRpb25lZCBvdXQuXG4gICAgICAvLyB3ZSB3YW50IHRvIHRyaWdnZXIgb25seSBvbmUgbGFzdGVzdCBpbnNlcnRpb24gY2JcbiAgICAgIC8vIHdoZW4gdGhlIGV4aXN0aW5nIHRyYW5zaXRpb24gZmluaXNoZXMuICgjMTExOSlcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzKys7XG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBjYjtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGNoaWxkLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFscy0tO1xuICAgICAgICBpZiAoIWtlZXBBbGl2ZSkgY2hpbGQuX2NsZWFudXAoKTtcbiAgICAgICAgaWYgKCFzZWxmLnBlbmRpbmdSZW1vdmFscyAmJiBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IpIHtcbiAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IoKTtcbiAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGNiKSB7XG4gICAgICBjYigpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQWN0dWFsbHkgc3dhcCB0aGUgY29tcG9uZW50cywgZGVwZW5kaW5nIG9uIHRoZVxuICAgKiB0cmFuc2l0aW9uIG1vZGUuIERlZmF1bHRzIHRvIHNpbXVsdGFuZW91cy5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIHRyYW5zaXRpb246IGZ1bmN0aW9uIHRyYW5zaXRpb24odGFyZ2V0LCBjYikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgY3VycmVudCA9IHRoaXMuY2hpbGRWTTtcbiAgICAvLyBmb3IgZGV2dG9vbCBpbnNwZWN0aW9uXG4gICAgaWYgKGN1cnJlbnQpIGN1cnJlbnQuX2luYWN0aXZlID0gdHJ1ZTtcbiAgICB0YXJnZXQuX2luYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5jaGlsZFZNID0gdGFyZ2V0O1xuICAgIHN3aXRjaCAoc2VsZi5wYXJhbXMudHJhbnNpdGlvbk1vZGUpIHtcbiAgICAgIGNhc2UgJ2luLW91dCc6XG4gICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgY2IpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdvdXQtaW4nOlxuICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCk7XG4gICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBVbmJpbmQuXG4gICAqL1xuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcbiAgICAvLyBEbyBub3QgZGVmZXIgY2xlYW51cCB3aGVuIHVuYmluZGluZ1xuICAgIHRoaXMudW5idWlsZCgpO1xuICAgIC8vIGRlc3Ryb3kgYWxsIGtlZXAtYWxpdmUgY2FjaGVkIGluc3RhbmNlc1xuICAgIGlmICh0aGlzLmNhY2hlKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZSkge1xuICAgICAgICB0aGlzLmNhY2hlW2tleV0uJGRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FjaGUgPSBudWxsO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBDYWxsIGFjdGl2YXRlIGhvb2tzIGluIG9yZGVyIChhc3luY2hyb25vdXMpXG4gKlxuICogQHBhcmFtIHtBcnJheX0gaG9va3NcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5mdW5jdGlvbiBjYWxsQWN0aXZhdGVIb29rcyhob29rcywgdm0sIGNiKSB7XG4gIHZhciB0b3RhbCA9IGhvb2tzLmxlbmd0aDtcbiAgdmFyIGNhbGxlZCA9IDA7XG4gIGhvb2tzWzBdLmNhbGwodm0sIG5leHQpO1xuICBmdW5jdGlvbiBuZXh0KCkge1xuICAgIGlmICgrK2NhbGxlZCA+PSB0b3RhbCkge1xuICAgICAgY2IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaG9va3NbY2FsbGVkXS5jYWxsKHZtLCBuZXh0KTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHByb3BCaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG52YXIgZW1wdHkgPSB7fTtcblxuLy8gcmVnZXhlc1xudmFyIGlkZW50UkUkMSA9IC9eWyRfYS16QS1aXStbXFx3JF0qJC87XG52YXIgc2V0dGFibGVQYXRoUkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKFxcLltBLVphLXpfJF1bXFx3JF0qfFxcW1teXFxbXFxdXStcXF0pKiQvO1xuXG4vKipcbiAqIENvbXBpbGUgcHJvcHMgb24gYSByb290IGVsZW1lbnQgYW5kIHJldHVyblxuICogYSBwcm9wcyBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICogQHBhcmFtIHtBcnJheX0gcHJvcE9wdGlvbnNcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZVByb3BzKGVsLCBwcm9wT3B0aW9ucywgdm0pIHtcbiAgdmFyIHByb3BzID0gW107XG4gIHZhciBuYW1lcyA9IE9iamVjdC5rZXlzKHByb3BPcHRpb25zKTtcbiAgdmFyIGkgPSBuYW1lcy5sZW5ndGg7XG4gIHZhciBvcHRpb25zLCBuYW1lLCBhdHRyLCB2YWx1ZSwgcGF0aCwgcGFyc2VkLCBwcm9wO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgbmFtZSA9IG5hbWVzW2ldO1xuICAgIG9wdGlvbnMgPSBwcm9wT3B0aW9uc1tuYW1lXSB8fCBlbXB0eTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG5hbWUgPT09ICckZGF0YScpIHtcbiAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgJGRhdGEgYXMgcHJvcC4nLCB2bSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBwcm9wcyBjb3VsZCBjb250YWluIGRhc2hlcywgd2hpY2ggd2lsbCBiZVxuICAgIC8vIGludGVycHJldGVkIGFzIG1pbnVzIGNhbGN1bGF0aW9ucyBieSB0aGUgcGFyc2VyXG4gICAgLy8gc28gd2UgbmVlZCB0byBjYW1lbGl6ZSB0aGUgcGF0aCBoZXJlXG4gICAgcGF0aCA9IGNhbWVsaXplKG5hbWUpO1xuICAgIGlmICghaWRlbnRSRSQxLnRlc3QocGF0aCkpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBwcm9wIGtleTogXCInICsgbmFtZSArICdcIi4gUHJvcCBrZXlzICcgKyAnbXVzdCBiZSB2YWxpZCBpZGVudGlmaWVycy4nLCB2bSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBwcm9wID0ge1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIHBhdGg6IHBhdGgsXG4gICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgbW9kZTogcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZLFxuICAgICAgcmF3OiBudWxsXG4gICAgfTtcblxuICAgIGF0dHIgPSBoeXBoZW5hdGUobmFtZSk7XG4gICAgLy8gZmlyc3QgY2hlY2sgZHluYW1pYyB2ZXJzaW9uXG4gICAgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyKSkgPT09IG51bGwpIHtcbiAgICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcuc3luYycpKSAhPT0gbnVsbCkge1xuICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVk7XG4gICAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5vbmNlJykpICE9PSBudWxsKSB7XG4gICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgLy8gaGFzIGR5bmFtaWMgYmluZGluZyFcbiAgICAgIHByb3AucmF3ID0gdmFsdWU7XG4gICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG4gICAgICB2YWx1ZSA9IHBhcnNlZC5leHByZXNzaW9uO1xuICAgICAgcHJvcC5maWx0ZXJzID0gcGFyc2VkLmZpbHRlcnM7XG4gICAgICAvLyBjaGVjayBiaW5kaW5nIHR5cGVcbiAgICAgIGlmIChpc0xpdGVyYWwodmFsdWUpICYmICFwYXJzZWQuZmlsdGVycykge1xuICAgICAgICAvLyBmb3IgZXhwcmVzc2lvbnMgY29udGFpbmluZyBsaXRlcmFsIG51bWJlcnMgYW5kXG4gICAgICAgIC8vIGJvb2xlYW5zLCB0aGVyZSdzIG5vIG5lZWQgdG8gc2V0dXAgYSBwcm9wIGJpbmRpbmcsXG4gICAgICAgIC8vIHNvIHdlIGNhbiBvcHRpbWl6ZSB0aGVtIGFzIGEgb25lLXRpbWUgc2V0LlxuICAgICAgICBwcm9wLm9wdGltaXplZExpdGVyYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvcC5keW5hbWljID0gdHJ1ZTtcbiAgICAgICAgLy8gY2hlY2sgbm9uLXNldHRhYmxlIHBhdGggZm9yIHR3by13YXkgYmluZGluZ3NcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgcHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkgJiYgIXNldHRhYmxlUGF0aFJFLnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZO1xuICAgICAgICAgIHdhcm4oJ0Nhbm5vdCBiaW5kIHR3by13YXkgcHJvcCB3aXRoIG5vbi1zZXR0YWJsZSAnICsgJ3BhcmVudCBwYXRoOiAnICsgdmFsdWUsIHZtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcHJvcC5wYXJlbnRQYXRoID0gdmFsdWU7XG5cbiAgICAgIC8vIHdhcm4gcmVxdWlyZWQgdHdvLXdheVxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgb3B0aW9ucy50d29XYXkgJiYgcHJvcC5tb2RlICE9PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkpIHtcbiAgICAgICAgd2FybignUHJvcCBcIicgKyBuYW1lICsgJ1wiIGV4cGVjdHMgYSB0d28td2F5IGJpbmRpbmcgdHlwZS4nLCB2bSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRBdHRyKGVsLCBhdHRyKSkgIT09IG51bGwpIHtcbiAgICAgIC8vIGhhcyBsaXRlcmFsIGJpbmRpbmchXG4gICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gY2hlY2sgcG9zc2libGUgY2FtZWxDYXNlIHByb3AgdXNhZ2VcbiAgICAgIHZhciBsb3dlckNhc2VOYW1lID0gcGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFsdWUgPSAvW0EtWlxcLV0vLnRlc3QobmFtZSkgJiYgKGVsLmdldEF0dHJpYnV0ZShsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykpO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHdhcm4oJ1Bvc3NpYmxlIHVzYWdlIGVycm9yIGZvciBwcm9wIGAnICsgbG93ZXJDYXNlTmFtZSArICdgIC0gJyArICdkaWQgeW91IG1lYW4gYCcgKyBhdHRyICsgJ2A/IEhUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlICcgKyAna2ViYWItY2FzZSBmb3IgcHJvcHMgaW4gdGVtcGxhdGVzLicsIHZtKTtcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZXF1aXJlZCkge1xuICAgICAgICAvLyB3YXJuIG1pc3NpbmcgcmVxdWlyZWRcbiAgICAgICAgd2FybignTWlzc2luZyByZXF1aXJlZCBwcm9wOiAnICsgbmFtZSwgdm0pO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBwdXNoIHByb3BcbiAgICBwcm9wcy5wdXNoKHByb3ApO1xuICB9XG4gIHJldHVybiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBhcHBsaWVzIHByb3BzIHRvIGEgdm0uXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcHJvcHNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VQcm9wc0xpbmtGbihwcm9wcykge1xuICByZXR1cm4gZnVuY3Rpb24gcHJvcHNMaW5rRm4odm0sIHNjb3BlKSB7XG4gICAgLy8gc3RvcmUgcmVzb2x2ZWQgcHJvcHMgaW5mb1xuICAgIHZtLl9wcm9wcyA9IHt9O1xuICAgIHZhciBpbmxpbmVQcm9wcyA9IHZtLiRvcHRpb25zLnByb3BzRGF0YTtcbiAgICB2YXIgaSA9IHByb3BzLmxlbmd0aDtcbiAgICB2YXIgcHJvcCwgcGF0aCwgb3B0aW9ucywgdmFsdWUsIHJhdztcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBwcm9wID0gcHJvcHNbaV07XG4gICAgICByYXcgPSBwcm9wLnJhdztcbiAgICAgIHBhdGggPSBwcm9wLnBhdGg7XG4gICAgICBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuICAgICAgdm0uX3Byb3BzW3BhdGhdID0gcHJvcDtcbiAgICAgIGlmIChpbmxpbmVQcm9wcyAmJiBoYXNPd24oaW5saW5lUHJvcHMsIHBhdGgpKSB7XG4gICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCBpbmxpbmVQcm9wc1twYXRoXSk7XG4gICAgICB9aWYgKHJhdyA9PT0gbnVsbCkge1xuICAgICAgICAvLyBpbml0aWFsaXplIGFic2VudCBwcm9wXG4gICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB1bmRlZmluZWQpO1xuICAgICAgfSBlbHNlIGlmIChwcm9wLmR5bmFtaWMpIHtcbiAgICAgICAgLy8gZHluYW1pYyBwcm9wXG4gICAgICAgIGlmIChwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUUpIHtcbiAgICAgICAgICAvLyBvbmUgdGltZSBiaW5kaW5nXG4gICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0uX2NvbnRleHQgfHwgdm0pLiRnZXQocHJvcC5wYXJlbnRQYXRoKTtcbiAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh2bS5fY29udGV4dCkge1xuICAgICAgICAgICAgLy8gZHluYW1pYyBiaW5kaW5nXG4gICAgICAgICAgICB2bS5fYmluZERpcih7XG4gICAgICAgICAgICAgIG5hbWU6ICdwcm9wJyxcbiAgICAgICAgICAgICAgZGVmOiBwcm9wRGVmLFxuICAgICAgICAgICAgICBwcm9wOiBwcm9wXG4gICAgICAgICAgICB9LCBudWxsLCBudWxsLCBzY29wZSk7IC8vIGVsLCBob3N0LCBzY29wZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIHJvb3QgaW5zdGFuY2VcbiAgICAgICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZtLiRnZXQocHJvcC5wYXJlbnRQYXRoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocHJvcC5vcHRpbWl6ZWRMaXRlcmFsKSB7XG4gICAgICAgIC8vIG9wdGltaXplZCBsaXRlcmFsLCBjYXN0IGl0IGFuZCBqdXN0IHNldCBvbmNlXG4gICAgICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKHJhdyk7XG4gICAgICAgIHZhbHVlID0gc3RyaXBwZWQgPT09IHJhdyA/IHRvQm9vbGVhbih0b051bWJlcihyYXcpKSA6IHN0cmlwcGVkO1xuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3RyaW5nIGxpdGVyYWwsIGJ1dCB3ZSBuZWVkIHRvIGNhdGVyIGZvclxuICAgICAgICAvLyBCb29sZWFuIHByb3BzIHdpdGggbm8gdmFsdWUsIG9yIHdpdGggc2FtZVxuICAgICAgICAvLyBsaXRlcmFsIHZhbHVlIChlLmcuIGRpc2FibGVkPVwiZGlzYWJsZWRcIilcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtbG9hZGVyL2lzc3Vlcy8xODJcbiAgICAgICAgdmFsdWUgPSBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gJiYgKHJhdyA9PT0gJycgfHwgcmF3ID09PSBoeXBoZW5hdGUocHJvcC5uYW1lKSkgPyB0cnVlIDogcmF3O1xuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIGEgcHJvcCB3aXRoIGEgcmF3VmFsdWUsIGFwcGx5aW5nIG5lY2Vzc2FyeSBjb2Vyc2lvbnMsXG4gKiBkZWZhdWx0IHZhbHVlcyAmIGFzc2VydGlvbnMgYW5kIGNhbGwgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGhcbiAqIHByb2Nlc3NlZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcGFyYW0geyp9IHJhd1ZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHJhd1ZhbHVlLCBmbikge1xuICB2YXIgaXNTaW1wbGUgPSBwcm9wLmR5bmFtaWMgJiYgaXNTaW1wbGVQYXRoKHByb3AucGFyZW50UGF0aCk7XG4gIHZhciB2YWx1ZSA9IHJhd1ZhbHVlO1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhbHVlID0gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCk7XG4gIH1cbiAgdmFsdWUgPSBjb2VyY2VQcm9wKHByb3AsIHZhbHVlLCB2bSk7XG4gIHZhciBjb2VyY2VkID0gdmFsdWUgIT09IHJhd1ZhbHVlO1xuICBpZiAoIWFzc2VydFByb3AocHJvcCwgdmFsdWUsIHZtKSkge1xuICAgIHZhbHVlID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChpc1NpbXBsZSAmJiAhY29lcmNlZCkge1xuICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIGZuKHZhbHVlKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBmbih2YWx1ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBTZXQgYSBwcm9wJ3MgaW5pdGlhbCB2YWx1ZSBvbiBhIHZtIGFuZCBpdHMgZGF0YSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbmZ1bmN0aW9uIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xuICBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCB2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgZGVmaW5lUmVhY3RpdmUodm0sIHByb3AucGF0aCwgdmFsdWUpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgYSBwcm9wJ3MgdmFsdWUgb24gYSB2bS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKi9cblxuZnVuY3Rpb24gdXBkYXRlUHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcbiAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZtW3Byb3AucGF0aF0gPSB2YWx1ZTtcbiAgfSk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBkZWZhdWx0IHZhbHVlIG9mIGEgcHJvcC5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcmV0dXJuIHsqfVxuICovXG5cbmZ1bmN0aW9uIGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApIHtcbiAgLy8gbm8gZGVmYXVsdCwgcmV0dXJuIHVuZGVmaW5lZFxuICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcbiAgaWYgKCFoYXNPd24ob3B0aW9ucywgJ2RlZmF1bHQnKSkge1xuICAgIC8vIGFic2VudCBib29sZWFuIHZhbHVlIGRlZmF1bHRzIHRvIGZhbHNlXG4gICAgcmV0dXJuIG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiA/IGZhbHNlIDogdW5kZWZpbmVkO1xuICB9XG4gIHZhciBkZWYgPSBvcHRpb25zWydkZWZhdWx0J107XG4gIC8vIHdhcm4gYWdhaW5zdCBub24tZmFjdG9yeSBkZWZhdWx0cyBmb3IgT2JqZWN0ICYgQXJyYXlcbiAgaWYgKGlzT2JqZWN0KGRlZikpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgZGVmYXVsdCB2YWx1ZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6ICcgKyAnUHJvcHMgd2l0aCB0eXBlIE9iamVjdC9BcnJheSBtdXN0IHVzZSBhIGZhY3RvcnkgZnVuY3Rpb24gJyArICd0byByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUuJywgdm0pO1xuICB9XG4gIC8vIGNhbGwgZmFjdG9yeSBmdW5jdGlvbiBmb3Igbm9uLUZ1bmN0aW9uIHR5cGVzXG4gIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIG9wdGlvbnMudHlwZSAhPT0gRnVuY3Rpb24gPyBkZWYuY2FsbCh2bSkgOiBkZWY7XG59XG5cbi8qKlxuICogQXNzZXJ0IHdoZXRoZXIgYSBwcm9wIGlzIHZhbGlkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiBhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkge1xuICBpZiAoIXByb3Aub3B0aW9ucy5yZXF1aXJlZCAmJiAoIC8vIG5vbi1yZXF1aXJlZFxuICBwcm9wLnJhdyA9PT0gbnVsbCB8fCAvLyBhYnNjZW50XG4gIHZhbHVlID09IG51bGwpIC8vIG51bGwgb3IgdW5kZWZpbmVkXG4gICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcbiAgdmFyIHR5cGUgPSBvcHRpb25zLnR5cGU7XG4gIHZhciB2YWxpZCA9ICF0eXBlO1xuICB2YXIgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuICBpZiAodHlwZSkge1xuICAgIGlmICghaXNBcnJheSh0eXBlKSkge1xuICAgICAgdHlwZSA9IFt0eXBlXTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aCAmJiAhdmFsaWQ7IGkrKykge1xuICAgICAgdmFyIGFzc2VydGVkVHlwZSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVbaV0pO1xuICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGFzc2VydGVkVHlwZS5leHBlY3RlZFR5cGUpO1xuICAgICAgdmFsaWQgPSBhc3NlcnRlZFR5cGUudmFsaWQ7XG4gICAgfVxuICB9XG4gIGlmICghdmFsaWQpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FybignSW52YWxpZCBwcm9wOiB0eXBlIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJyArICcgRXhwZWN0ZWQgJyArIGV4cGVjdGVkVHlwZXMubWFwKGZvcm1hdFR5cGUpLmpvaW4oJywgJykgKyAnLCBnb3QgJyArIGZvcm1hdFZhbHVlKHZhbHVlKSArICcuJywgdm0pO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHZhbGlkYXRvciA9IG9wdGlvbnMudmFsaWRhdG9yO1xuICBpZiAodmFsaWRhdG9yKSB7XG4gICAgaWYgKCF2YWxpZGF0b3IodmFsdWUpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicsIHZtKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogRm9yY2UgcGFyc2luZyB2YWx1ZSB3aXRoIGNvZXJjZSBvcHRpb24uXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4geyp9XG4gKi9cblxuZnVuY3Rpb24gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcbiAgdmFyIGNvZXJjZSA9IHByb3Aub3B0aW9ucy5jb2VyY2U7XG4gIGlmICghY29lcmNlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh0eXBlb2YgY29lcmNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGNvZXJjZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGNvZXJjZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6IGV4cGVjdGVkIGZ1bmN0aW9uLCBnb3QgJyArIHR5cGVvZiBjb2VyY2UgKyAnLicsIHZtKTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxuLyoqXG4gKiBBc3NlcnQgdGhlIHR5cGUgb2YgYSB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHR5cGVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlKSB7XG4gIHZhciB2YWxpZDtcbiAgdmFyIGV4cGVjdGVkVHlwZTtcbiAgaWYgKHR5cGUgPT09IFN0cmluZykge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdzdHJpbmcnO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gTnVtYmVyKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ251bWJlcic7XG4gICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBCb29sZWFuKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ2Jvb2xlYW4nO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gRnVuY3Rpb24pIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnZnVuY3Rpb24nO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gT2JqZWN0KSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ29iamVjdCc7XG4gICAgdmFsaWQgPSBpc1BsYWluT2JqZWN0KHZhbHVlKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBBcnJheSkge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdhcnJheSc7XG4gICAgdmFsaWQgPSBpc0FycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHZhbGlkOiB2YWxpZCxcbiAgICBleHBlY3RlZFR5cGU6IGV4cGVjdGVkVHlwZVxuICB9O1xufVxuXG4vKipcbiAqIEZvcm1hdCB0eXBlIGZvciBvdXRwdXRcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFR5cGUodHlwZSkge1xuICByZXR1cm4gdHlwZSA/IHR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eXBlLnNsaWNlKDEpIDogJ2N1c3RvbSB0eXBlJztcbn1cblxuLyoqXG4gKiBGb3JtYXQgdmFsdWVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKS5zbGljZSg4LCAtMSk7XG59XG5cbnZhciBiaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG5cbnZhciBwcm9wRGVmID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIGNoaWxkID0gdGhpcy52bTtcbiAgICB2YXIgcGFyZW50ID0gY2hpbGQuX2NvbnRleHQ7XG4gICAgLy8gcGFzc2VkIGluIGZyb20gY29tcGlsZXIgZGlyZWN0bHlcbiAgICB2YXIgcHJvcCA9IHRoaXMuZGVzY3JpcHRvci5wcm9wO1xuICAgIHZhciBjaGlsZEtleSA9IHByb3AucGF0aDtcbiAgICB2YXIgcGFyZW50S2V5ID0gcHJvcC5wYXJlbnRQYXRoO1xuICAgIHZhciB0d29XYXkgPSBwcm9wLm1vZGUgPT09IGJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuXG4gICAgdmFyIHBhcmVudFdhdGNoZXIgPSB0aGlzLnBhcmVudFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihwYXJlbnQsIHBhcmVudEtleSwgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgdXBkYXRlUHJvcChjaGlsZCwgcHJvcCwgdmFsKTtcbiAgICB9LCB7XG4gICAgICB0d29XYXk6IHR3b1dheSxcbiAgICAgIGZpbHRlcnM6IHByb3AuZmlsdGVycyxcbiAgICAgIC8vIGltcG9ydGFudDogcHJvcHMgbmVlZCB0byBiZSBvYnNlcnZlZCBvbiB0aGVcbiAgICAgIC8vIHYtZm9yIHNjb3BlIGlmIHByZXNlbnRcbiAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuICAgIH0pO1xuXG4gICAgLy8gc2V0IHRoZSBjaGlsZCBpbml0aWFsIHZhbHVlLlxuICAgIGluaXRQcm9wKGNoaWxkLCBwcm9wLCBwYXJlbnRXYXRjaGVyLnZhbHVlKTtcblxuICAgIC8vIHNldHVwIHR3by13YXkgYmluZGluZ1xuICAgIGlmICh0d29XYXkpIHtcbiAgICAgIC8vIGltcG9ydGFudDogZGVmZXIgdGhlIGNoaWxkIHdhdGNoZXIgY3JlYXRpb24gdW50aWxcbiAgICAgIC8vIHRoZSBjcmVhdGVkIGhvb2sgKGFmdGVyIGRhdGEgb2JzZXJ2YXRpb24pXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBjaGlsZC4kb25jZSgncHJlLWhvb2s6Y3JlYXRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5jaGlsZFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihjaGlsZCwgY2hpbGRLZXksIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICBwYXJlbnRXYXRjaGVyLnNldCh2YWwpO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgLy8gZW5zdXJlIHN5bmMgdXB3YXJkIGJlZm9yZSBwYXJlbnQgc3luYyBkb3duLlxuICAgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGluIGNhc2VzIGUuZy4gdGhlIGNoaWxkXG4gICAgICAgICAgLy8gbXV0YXRlcyBhIHByb3AgYXJyYXksIHRoZW4gcmVwbGFjZXMgaXQuICgjMTY4MylcbiAgICAgICAgICBzeW5jOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHRoaXMucGFyZW50V2F0Y2hlci50ZWFyZG93bigpO1xuICAgIGlmICh0aGlzLmNoaWxkV2F0Y2hlcikge1xuICAgICAgdGhpcy5jaGlsZFdhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBxdWV1ZSQxID0gW107XG52YXIgcXVldWVkID0gZmFsc2U7XG5cbi8qKlxuICogUHVzaCBhIGpvYiBpbnRvIHRoZSBxdWV1ZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBqb2JcbiAqL1xuXG5mdW5jdGlvbiBwdXNoSm9iKGpvYikge1xuICBxdWV1ZSQxLnB1c2goam9iKTtcbiAgaWYgKCFxdWV1ZWQpIHtcbiAgICBxdWV1ZWQgPSB0cnVlO1xuICAgIG5leHRUaWNrKGZsdXNoKTtcbiAgfVxufVxuXG4vKipcbiAqIEZsdXNoIHRoZSBxdWV1ZSwgYW5kIGRvIG9uZSBmb3JjZWQgcmVmbG93IGJlZm9yZVxuICogdHJpZ2dlcmluZyB0cmFuc2l0aW9ucy5cbiAqL1xuXG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgLy8gRm9yY2UgbGF5b3V0XG4gIHZhciBmID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZSQxLmxlbmd0aDsgaSsrKSB7XG4gICAgcXVldWUkMVtpXSgpO1xuICB9XG4gIHF1ZXVlJDEgPSBbXTtcbiAgcXVldWVkID0gZmFsc2U7XG4gIC8vIGR1bW15IHJldHVybiwgc28ganMgbGludGVycyBkb24ndCBjb21wbGFpbiBhYm91dFxuICAvLyB1bnVzZWQgdmFyaWFibGUgZlxuICByZXR1cm4gZjtcbn1cblxudmFyIFRZUEVfVFJBTlNJVElPTiA9ICd0cmFuc2l0aW9uJztcbnZhciBUWVBFX0FOSU1BVElPTiA9ICdhbmltYXRpb24nO1xudmFyIHRyYW5zRHVyYXRpb25Qcm9wID0gdHJhbnNpdGlvblByb3AgKyAnRHVyYXRpb24nO1xudmFyIGFuaW1EdXJhdGlvblByb3AgPSBhbmltYXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcblxuLyoqXG4gKiBJZiBhIGp1c3QtZW50ZXJlZCBlbGVtZW50IGlzIGFwcGxpZWQgdGhlXG4gKiBsZWF2ZSBjbGFzcyB3aGlsZSBpdHMgZW50ZXIgdHJhbnNpdGlvbiBoYXNuJ3Qgc3RhcnRlZCB5ZXQsXG4gKiBhbmQgdGhlIHRyYW5zaXRpb25lZCBwcm9wZXJ0eSBoYXMgdGhlIHNhbWUgdmFsdWUgZm9yIGJvdGhcbiAqIGVudGVyL2xlYXZlLCB0aGVuIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIHdpbGwgYmUgc2tpcHBlZCBhbmRcbiAqIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiBUaGlzIGZ1bmN0aW9uIGVuc3VyZXNcbiAqIGl0cyBjYWxsYmFjayB0byBiZSBjYWxsZWQgYWZ0ZXIgYSB0cmFuc2l0aW9uIGhhcyBzdGFydGVkXG4gKiBieSB3YWl0aW5nIGZvciBkb3VibGUgcmFmLlxuICpcbiAqIEl0IGZhbGxzIGJhY2sgdG8gc2V0VGltZW91dCBvbiBkZXZpY2VzIHRoYXQgc3VwcG9ydCBDU1NcbiAqIHRyYW5zaXRpb25zIGJ1dCBub3QgcmFmIChlLmcuIEFuZHJvaWQgNC4yIGJyb3dzZXIpIC0gc2luY2VcbiAqIHRoZXNlIGVudmlyb25tZW50cyBhcmUgdXN1YWxseSBzbG93LCB3ZSBhcmUgZ2l2aW5nIGl0IGFcbiAqIHJlbGF0aXZlbHkgbGFyZ2UgdGltZW91dC5cbiAqL1xuXG52YXIgcmFmID0gaW5Ccm93c2VyICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG52YXIgd2FpdEZvclRyYW5zaXRpb25TdGFydCA9IHJhZlxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbj8gZnVuY3Rpb24gKGZuKSB7XG4gIHJhZihmdW5jdGlvbiAoKSB7XG4gICAgcmFmKGZuKTtcbiAgfSk7XG59IDogZnVuY3Rpb24gKGZuKSB7XG4gIHNldFRpbWVvdXQoZm4sIDUwKTtcbn07XG5cbi8qKlxuICogQSBUcmFuc2l0aW9uIG9iamVjdCB0aGF0IGVuY2Fwc3VsYXRlcyB0aGUgc3RhdGUgYW5kIGxvZ2ljXG4gKiBvZiB0aGUgdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBob29rc1xuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cbmZ1bmN0aW9uIFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdm0pIHtcbiAgdGhpcy5pZCA9IGlkO1xuICB0aGlzLmVsID0gZWw7XG4gIHRoaXMuZW50ZXJDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmVudGVyQ2xhc3MgfHwgaWQgKyAnLWVudGVyJztcbiAgdGhpcy5sZWF2ZUNsYXNzID0gaG9va3MgJiYgaG9va3MubGVhdmVDbGFzcyB8fCBpZCArICctbGVhdmUnO1xuICB0aGlzLmhvb2tzID0gaG9va3M7XG4gIHRoaXMudm0gPSB2bTtcbiAgLy8gYXN5bmMgc3RhdGVcbiAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcbiAgdGhpcy5qdXN0RW50ZXJlZCA9IGZhbHNlO1xuICB0aGlzLmVudGVyZWQgPSB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgdGhpcy50eXBlQ2FjaGUgPSB7fTtcbiAgLy8gY2hlY2sgY3NzIHRyYW5zaXRpb24gdHlwZVxuICB0aGlzLnR5cGUgPSBob29rcyAmJiBob29rcy50eXBlO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAodGhpcy50eXBlICYmIHRoaXMudHlwZSAhPT0gVFlQRV9UUkFOU0lUSU9OICYmIHRoaXMudHlwZSAhPT0gVFlQRV9BTklNQVRJT04pIHtcbiAgICAgIHdhcm4oJ2ludmFsaWQgQ1NTIHRyYW5zaXRpb24gdHlwZSBmb3IgdHJhbnNpdGlvbj1cIicgKyB0aGlzLmlkICsgJ1wiOiAnICsgdGhpcy50eXBlLCB2bSk7XG4gICAgfVxuICB9XG4gIC8vIGJpbmRcbiAgdmFyIHNlbGYgPSB0aGlzO1snZW50ZXJOZXh0VGljaycsICdlbnRlckRvbmUnLCAnbGVhdmVOZXh0VGljaycsICdsZWF2ZURvbmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG4gICAgc2VsZlttXSA9IGJpbmQoc2VsZlttXSwgc2VsZik7XG4gIH0pO1xufVxuXG52YXIgcCQxID0gVHJhbnNpdGlvbi5wcm90b3R5cGU7XG5cbi8qKlxuICogU3RhcnQgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cbiAqXG4gKiAxLiBlbnRlciB0cmFuc2l0aW9uIHRyaWdnZXJlZFxuICogMi4gY2FsbCBiZWZvcmVFbnRlciBob29rXG4gKiAzLiBhZGQgZW50ZXIgY2xhc3NcbiAqIDQuIGluc2VydC9zaG93IGVsZW1lbnRcbiAqIDUuIGNhbGwgZW50ZXIgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcbiAqIDYuIHJlZmxvd1xuICogNy4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuICogICAgLSB0cmFuc2l0aW9uOlxuICogICAgICAgIHJlbW92ZSBjbGFzcyBub3csIHdhaXQgZm9yIHRyYW5zaXRpb25lbmQsXG4gKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiAgICAtIGFuaW1hdGlvbjpcbiAqICAgICAgICB3YWl0IGZvciBhbmltYXRpb25lbmQsIHJlbW92ZSBjbGFzcyxcbiAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG4gKiAgICAgICAgZG9uZSBub3cgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqIDguIHdhaXQgZm9yIGVpdGhlciBkb25lIG9yIGpzIGNhbGxiYWNrLCB0aGVuIGNhbGxcbiAqICAgIGFmdGVyRW50ZXIgaG9vay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIGluc2VydC9zaG93IHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxucCQxLmVudGVyID0gZnVuY3Rpb24gKG9wLCBjYikge1xuICB0aGlzLmNhbmNlbFBlbmRpbmcoKTtcbiAgdGhpcy5jYWxsSG9vaygnYmVmb3JlRW50ZXInKTtcbiAgdGhpcy5jYiA9IGNiO1xuICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICBvcCgpO1xuICB0aGlzLmVudGVyZWQgPSBmYWxzZTtcbiAgdGhpcy5jYWxsSG9va1dpdGhDYignZW50ZXInKTtcbiAgaWYgKHRoaXMuZW50ZXJlZCkge1xuICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuICB9XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmVudGVyQ2FuY2VsbGVkO1xuICBwdXNoSm9iKHRoaXMuZW50ZXJOZXh0VGljayk7XG59O1xuXG4vKipcbiAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbiwgd2hpY2ggaXNcbiAqIHRvIGJlIHB1c2hlZCBpbnRvIGEgcXVldWUgYW5kIGV4ZWN1dGVkIGFmdGVyIGEgcmVmbG93IHNvXG4gKiB0aGF0IHJlbW92aW5nIHRoZSBjbGFzcyBjYW4gdHJpZ2dlciBhIENTUyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5lbnRlck5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIC8vIHByZXZlbnQgdHJhbnNpdGlvbiBza2lwcGluZ1xuICB0aGlzLmp1c3RFbnRlcmVkID0gdHJ1ZTtcbiAgd2FpdEZvclRyYW5zaXRpb25TdGFydChmdW5jdGlvbiAoKSB7XG4gICAgX3RoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcbiAgfSk7XG4gIHZhciBlbnRlckRvbmUgPSB0aGlzLmVudGVyRG9uZTtcbiAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMuZW50ZXJDbGFzcyk7XG4gIGlmICghdGhpcy5wZW5kaW5nSnNDYikge1xuICAgIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcbiAgICAgIC8vIHRyaWdnZXIgdHJhbnNpdGlvbiBieSByZW1vdmluZyBlbnRlciBjbGFzcyBub3dcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gICAgICB0aGlzLnNldHVwQ3NzQ2IodHJhbnNpdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9BTklNQVRJT04pIHtcbiAgICAgIHRoaXMuc2V0dXBDc3NDYihhbmltYXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW50ZXJEb25lKCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmVudGVyRG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5lbnRlcmVkID0gdHJ1ZTtcbiAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcbiAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJFbnRlcicpO1xuICBpZiAodGhpcy5jYikgdGhpcy5jYigpO1xufTtcblxuLyoqXG4gKiBTdGFydCBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqXG4gKiAxLiBsZWF2ZSB0cmFuc2l0aW9uIHRyaWdnZXJlZC5cbiAqIDIuIGNhbGwgYmVmb3JlTGVhdmUgaG9va1xuICogMy4gYWRkIGxlYXZlIGNsYXNzICh0cmlnZ2VyIGNzcyB0cmFuc2l0aW9uKVxuICogNC4gY2FsbCBsZWF2ZSBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuICogNS4gcmVmbG93IGlmIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrIGlzIHByb3ZpZGVkXG4gKiA2LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG4gKiAgICAtIHRyYW5zaXRpb24gb3IgYW5pbWF0aW9uOlxuICogICAgICAgIHdhaXQgZm9yIGVuZCBldmVudCwgcmVtb3ZlIGNsYXNzLCB0aGVuIGRvbmUgaWZcbiAqICAgICAgICB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcbiAqICAgICAgICBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiA3LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG4gKiAgICBhZnRlckxlYXZlIGhvb2suXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSByZW1vdmUvaGlkZSB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbnAkMS5sZWF2ZSA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcbiAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG4gIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUxlYXZlJyk7XG4gIHRoaXMub3AgPSBvcDtcbiAgdGhpcy5jYiA9IGNiO1xuICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuICB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgdGhpcy5jYWxsSG9va1dpdGhDYignbGVhdmUnKTtcbiAgaWYgKHRoaXMubGVmdCkge1xuICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuICB9XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmxlYXZlQ2FuY2VsbGVkO1xuICAvLyBvbmx5IG5lZWQgdG8gaGFuZGxlIGxlYXZlRG9uZSBpZlxuICAvLyAxLiB0aGUgdHJhbnNpdGlvbiBpcyBhbHJlYWR5IGRvbmUgKHN5bmNocm9ub3VzbHkgY2FsbGVkXG4gIC8vICAgIGJ5IHRoZSB1c2VyLCB3aGljaCBjYXVzZXMgdGhpcy5vcCBzZXQgdG8gbnVsbClcbiAgLy8gMi4gdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFja1xuICBpZiAodGhpcy5vcCAmJiAhdGhpcy5wZW5kaW5nSnNDYikge1xuICAgIC8vIGlmIGEgQ1NTIHRyYW5zaXRpb24gbGVhdmVzIGltbWVkaWF0ZWx5IGFmdGVyIGVudGVyLFxuICAgIC8vIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiB0aGVyZWZvcmUgd2VcbiAgICAvLyBkZXRlY3Qgc3VjaCBjYXNlcyBhbmQgZW5kIHRoZSBsZWF2ZSBpbW1lZGlhdGVseS5cbiAgICBpZiAodGhpcy5qdXN0RW50ZXJlZCkge1xuICAgICAgdGhpcy5sZWF2ZURvbmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHVzaEpvYih0aGlzLmxlYXZlTmV4dFRpY2spO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5sZWF2ZU5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5sZWF2ZUNsYXNzKTtcbiAgaWYgKHR5cGUpIHtcbiAgICB2YXIgZXZlbnQgPSB0eXBlID09PSBUWVBFX1RSQU5TSVRJT04gPyB0cmFuc2l0aW9uRW5kRXZlbnQgOiBhbmltYXRpb25FbmRFdmVudDtcbiAgICB0aGlzLnNldHVwQ3NzQ2IoZXZlbnQsIHRoaXMubGVhdmVEb25lKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmxlYXZlRG9uZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEubGVhdmVEb25lID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmxlZnQgPSB0cnVlO1xuICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuICB0aGlzLm9wKCk7XG4gIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG4gIHRoaXMuY2FsbEhvb2soJ2FmdGVyTGVhdmUnKTtcbiAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcbiAgdGhpcy5vcCA9IG51bGw7XG59O1xuXG4vKipcbiAqIENhbmNlbCBhbnkgcGVuZGluZyBjYWxsYmFja3MgZnJvbSBhIHByZXZpb3VzbHkgcnVubmluZ1xuICogYnV0IG5vdCBmaW5pc2hlZCB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5jYW5jZWxQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG4gIHZhciBoYXNQZW5kaW5nID0gZmFsc2U7XG4gIGlmICh0aGlzLnBlbmRpbmdDc3NDYikge1xuICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuICAgIG9mZih0aGlzLmVsLCB0aGlzLnBlbmRpbmdDc3NFdmVudCwgdGhpcy5wZW5kaW5nQ3NzQ2IpO1xuICAgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBudWxsO1xuICB9XG4gIGlmICh0aGlzLnBlbmRpbmdKc0NiKSB7XG4gICAgaGFzUGVuZGluZyA9IHRydWU7XG4gICAgdGhpcy5wZW5kaW5nSnNDYi5jYW5jZWwoKTtcbiAgICB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcbiAgfVxuICBpZiAoaGFzUGVuZGluZykge1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcbiAgfVxuICBpZiAodGhpcy5jYW5jZWwpIHtcbiAgICB0aGlzLmNhbmNlbC5jYWxsKHRoaXMudm0sIHRoaXMuZWwpO1xuICAgIHRoaXMuY2FuY2VsID0gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBDYWxsIGEgdXNlci1wcm92aWRlZCBzeW5jaHJvbm91cyBob29rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cblxucCQxLmNhbGxIb29rID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgaWYgKHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXSkge1xuICAgIHRoaXMuaG9va3NbdHlwZV0uY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDYWxsIGEgdXNlci1wcm92aWRlZCwgcG90ZW50aWFsbHktYXN5bmMgaG9vayBmdW5jdGlvbi5cbiAqIFdlIGNoZWNrIGZvciB0aGUgbGVuZ3RoIG9mIGFyZ3VtZW50cyB0byBzZWUgaWYgdGhlIGhvb2tcbiAqIGV4cGVjdHMgYSBgZG9uZWAgY2FsbGJhY2suIElmIHRydWUsIHRoZSB0cmFuc2l0aW9uJ3MgZW5kXG4gKiB3aWxsIGJlIGRldGVybWluZWQgYnkgd2hlbiB0aGUgdXNlciBjYWxscyB0aGF0IGNhbGxiYWNrO1xuICogb3RoZXJ3aXNlLCB0aGUgZW5kIGlzIGRldGVybWluZWQgYnkgdGhlIENTUyB0cmFuc2l0aW9uIG9yXG4gKiBhbmltYXRpb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuXG5wJDEuY2FsbEhvb2tXaXRoQ2IgPSBmdW5jdGlvbiAodHlwZSkge1xuICB2YXIgaG9vayA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXTtcbiAgaWYgKGhvb2spIHtcbiAgICBpZiAoaG9vay5sZW5ndGggPiAxKSB7XG4gICAgICB0aGlzLnBlbmRpbmdKc0NiID0gY2FuY2VsbGFibGUodGhpc1t0eXBlICsgJ0RvbmUnXSk7XG4gICAgfVxuICAgIGhvb2suY2FsbCh0aGlzLnZtLCB0aGlzLmVsLCB0aGlzLnBlbmRpbmdKc0NiKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgYW4gZWxlbWVudCdzIHRyYW5zaXRpb24gdHlwZSBiYXNlZCBvbiB0aGVcbiAqIGNhbGN1bGF0ZWQgc3R5bGVzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWVcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuXG5wJDEuZ2V0Q3NzVHJhbnNpdGlvblR5cGUgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuICAvLyBza2lwIENTUyB0cmFuc2l0aW9ucyBpZiBwYWdlIGlzIG5vdCB2aXNpYmxlIC1cbiAgLy8gdGhpcyBzb2x2ZXMgdGhlIGlzc3VlIG9mIHRyYW5zaXRpb25lbmQgZXZlbnRzIG5vdFxuICAvLyBmaXJpbmcgdW50aWwgdGhlIHBhZ2UgaXMgdmlzaWJsZSBhZ2Fpbi5cbiAgLy8gcGFnZVZpc2liaWxpdHkgQVBJIGlzIHN1cHBvcnRlZCBpbiBJRTEwKywgc2FtZSBhc1xuICAvLyBDU1MgdHJhbnNpdGlvbnMuXG4gIGRvY3VtZW50LmhpZGRlbiB8fFxuICAvLyBleHBsaWNpdCBqcy1vbmx5IHRyYW5zaXRpb25cbiAgdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmNzcyA9PT0gZmFsc2UgfHxcbiAgLy8gZWxlbWVudCBpcyBoaWRkZW5cbiAgaXNIaWRkZW4odGhpcy5lbCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHR5cGUgPSB0aGlzLnR5cGUgfHwgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXTtcbiAgaWYgKHR5cGUpIHJldHVybiB0eXBlO1xuICB2YXIgaW5saW5lU3R5bGVzID0gdGhpcy5lbC5zdHlsZTtcbiAgdmFyIGNvbXB1dGVkU3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbCk7XG4gIHZhciB0cmFuc0R1cmF0aW9uID0gaW5saW5lU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXSB8fCBjb21wdXRlZFN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF07XG4gIGlmICh0cmFuc0R1cmF0aW9uICYmIHRyYW5zRHVyYXRpb24gIT09ICcwcycpIHtcbiAgICB0eXBlID0gVFlQRV9UUkFOU0lUSU9OO1xuICB9IGVsc2Uge1xuICAgIHZhciBhbmltRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF07XG4gICAgaWYgKGFuaW1EdXJhdGlvbiAmJiBhbmltRHVyYXRpb24gIT09ICcwcycpIHtcbiAgICAgIHR5cGUgPSBUWVBFX0FOSU1BVElPTjtcbiAgICB9XG4gIH1cbiAgaWYgKHR5cGUpIHtcbiAgICB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdID0gdHlwZTtcbiAgfVxuICByZXR1cm4gdHlwZTtcbn07XG5cbi8qKlxuICogU2V0dXAgYSBDU1MgdHJhbnNpdGlvbmVuZC9hbmltYXRpb25lbmQgY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbnAkMS5zZXR1cENzc0NiID0gZnVuY3Rpb24gKGV2ZW50LCBjYikge1xuICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IGV2ZW50O1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBlbCA9IHRoaXMuZWw7XG4gIHZhciBvbkVuZCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IGVsKSB7XG4gICAgICBvZmYoZWwsIGV2ZW50LCBvbkVuZCk7XG4gICAgICBzZWxmLnBlbmRpbmdDc3NFdmVudCA9IHNlbGYucGVuZGluZ0Nzc0NiID0gbnVsbDtcbiAgICAgIGlmICghc2VsZi5wZW5kaW5nSnNDYiAmJiBjYikge1xuICAgICAgICBjYigpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgb24oZWwsIGV2ZW50LCBvbkVuZCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgaGlkZGVuIC0gaW4gdGhhdCBjYXNlIHdlIGNhbiBqdXN0XG4gKiBza2lwIHRoZSB0cmFuc2l0aW9uIGFsbHRvZ2V0aGVyLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNIaWRkZW4oZWwpIHtcbiAgaWYgKC9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcbiAgICAvLyBTVkcgZWxlbWVudHMgZG8gbm90IGhhdmUgb2Zmc2V0KFdpZHRofEhlaWdodClcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIGNoZWNrIHRoZSBjbGllbnQgcmVjdFxuICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuICEocmVjdC53aWR0aCB8fCByZWN0LmhlaWdodCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTtcbiAgfVxufVxuXG52YXIgdHJhbnNpdGlvbiQxID0ge1xuXG4gIHByaW9yaXR5OiBUUkFOU0lUSU9OLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGlkLCBvbGRJZCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgLy8gcmVzb2x2ZSBvbiBvd25lciB2bVxuICAgIHZhciBob29rcyA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAndHJhbnNpdGlvbnMnLCBpZCk7XG4gICAgaWQgPSBpZCB8fCAndic7XG4gICAgb2xkSWQgPSBvbGRJZCB8fCAndic7XG4gICAgZWwuX192X3RyYW5zID0gbmV3IFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdGhpcy52bSk7XG4gICAgcmVtb3ZlQ2xhc3MoZWwsIG9sZElkICsgJy10cmFuc2l0aW9uJyk7XG4gICAgYWRkQ2xhc3MoZWwsIGlkICsgJy10cmFuc2l0aW9uJyk7XG4gIH1cbn07XG5cbnZhciBpbnRlcm5hbERpcmVjdGl2ZXMgPSB7XG4gIHN0eWxlOiBzdHlsZSxcbiAgJ2NsYXNzJzogdkNsYXNzLFxuICBjb21wb25lbnQ6IGNvbXBvbmVudCxcbiAgcHJvcDogcHJvcERlZixcbiAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiQxXG59O1xuXG4vLyBzcGVjaWFsIGJpbmRpbmcgcHJlZml4ZXNcbnZhciBiaW5kUkUgPSAvXnYtYmluZDp8XjovO1xudmFyIG9uUkUgPSAvXnYtb246fF5ALztcbnZhciBkaXJBdHRyUkUgPSAvXnYtKFteOl0rKSg/OiR8OiguKikkKS87XG52YXIgbW9kaWZpZXJSRSA9IC9cXC5bXlxcLl0rL2c7XG52YXIgdHJhbnNpdGlvblJFID0gL14odi1iaW5kOnw6KT90cmFuc2l0aW9uJC87XG5cbi8vIGRlZmF1bHQgZGlyZWN0aXZlIHByaW9yaXR5XG52YXIgREVGQVVMVF9QUklPUklUWSA9IDEwMDA7XG52YXIgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSA9IDIwMDA7XG5cbi8qKlxuICogQ29tcGlsZSBhIHRlbXBsYXRlIGFuZCByZXR1cm4gYSByZXVzYWJsZSBjb21wb3NpdGUgbGlua1xuICogZnVuY3Rpb24sIHdoaWNoIHJlY3Vyc2l2ZWx5IGNvbnRhaW5zIG1vcmUgbGluayBmdW5jdGlvbnNcbiAqIGluc2lkZS4gVGhpcyB0b3AgbGV2ZWwgY29tcGlsZSBmdW5jdGlvbiB3b3VsZCBub3JtYWxseVxuICogYmUgY2FsbGVkIG9uIGluc3RhbmNlIHJvb3Qgbm9kZXMsIGJ1dCBjYW4gYWxzbyBiZSB1c2VkXG4gKiBmb3IgcGFydGlhbCBjb21waWxhdGlvbiBpZiB0aGUgcGFydGlhbCBhcmd1bWVudCBpcyB0cnVlLlxuICpcbiAqIFRoZSByZXR1cm5lZCBjb21wb3NpdGUgbGluayBmdW5jdGlvbiwgd2hlbiBjYWxsZWQsIHdpbGxcbiAqIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXNcbiAqIGNyZWF0ZWQgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcGFydGlhbFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZShlbCwgb3B0aW9ucywgcGFydGlhbCkge1xuICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgbm9kZSBpdHNlbGYuXG4gIHZhciBub2RlTGlua0ZuID0gcGFydGlhbCB8fCAhb3B0aW9ucy5fYXNDb21wb25lbnQgPyBjb21waWxlTm9kZShlbCwgb3B0aW9ucykgOiBudWxsO1xuICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgY2hpbGROb2Rlc1xuICB2YXIgY2hpbGRMaW5rRm4gPSAhKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCkgJiYgIWlzU2NyaXB0KGVsKSAmJiBlbC5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3QoZWwuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuXG4gIC8qKlxuICAgKiBBIGNvbXBvc2l0ZSBsaW5rZXIgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGEgYWxyZWFkeVxuICAgKiBjb21waWxlZCBwaWVjZSBvZiBET00sIHdoaWNoIGluc3RhbnRpYXRlcyBhbGwgZGlyZWN0aXZlXG4gICAqIGluc3RhbmNlcy5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gaG9zdCB2bSBvZiB0cmFuc2NsdWRlZCBjb250ZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gbGluayBjb250ZXh0IGZyYWdtZW50XG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICovXG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG4gICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGVsLmNoaWxkTm9kZXMpO1xuICAgIC8vIGxpbmtcbiAgICB2YXIgZGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtDYXB0dXJlcigpIHtcbiAgICAgIGlmIChub2RlTGlua0ZuKSBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgICAgaWYgKGNoaWxkTGlua0ZuKSBjaGlsZExpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgIH0sIHZtKTtcbiAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBkaXJzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBBcHBseSBhIGxpbmtlciB0byBhIHZtL2VsZW1lbnQgcGFpciBhbmQgY2FwdHVyZSB0aGVcbiAqIGRpcmVjdGl2ZXMgY3JlYXRlZCBkdXJpbmcgdGhlIHByb2Nlc3MuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiBsaW5rQW5kQ2FwdHVyZShsaW5rZXIsIHZtKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgIC8vIHJlc2V0IGRpcmVjdGl2ZXMgYmVmb3JlIGV2ZXJ5IGNhcHR1cmUgaW4gcHJvZHVjdGlvblxuICAgIC8vIG1vZGUsIHNvIHRoYXQgd2hlbiB1bmxpbmtpbmcgd2UgZG9uJ3QgbmVlZCB0byBzcGxpY2VcbiAgICAvLyB0aGVtIG91dCAod2hpY2ggdHVybnMgb3V0IHRvIGJlIGEgcGVyZiBoaXQpLlxuICAgIC8vIHRoZXkgYXJlIGtlcHQgaW4gZGV2ZWxvcG1lbnQgbW9kZSBiZWNhdXNlIHRoZXkgYXJlXG4gICAgLy8gdXNlZnVsIGZvciBWdWUncyBvd24gdGVzdHMuXG4gICAgdm0uX2RpcmVjdGl2ZXMgPSBbXTtcbiAgfVxuICB2YXIgb3JpZ2luYWxEaXJDb3VudCA9IHZtLl9kaXJlY3RpdmVzLmxlbmd0aDtcbiAgbGlua2VyKCk7XG4gIHZhciBkaXJzID0gdm0uX2RpcmVjdGl2ZXMuc2xpY2Uob3JpZ2luYWxEaXJDb3VudCk7XG4gIGRpcnMuc29ydChkaXJlY3RpdmVDb21wYXJhdG9yKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGRpcnNbaV0uX2JpbmQoKTtcbiAgfVxuICByZXR1cm4gZGlycztcbn1cblxuLyoqXG4gKiBEaXJlY3RpdmUgcHJpb3JpdHkgc29ydCBjb21wYXJhdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFcbiAqIEBwYXJhbSB7T2JqZWN0fSBiXG4gKi9cblxuZnVuY3Rpb24gZGlyZWN0aXZlQ29tcGFyYXRvcihhLCBiKSB7XG4gIGEgPSBhLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG4gIGIgPSBiLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG4gIHJldHVybiBhID4gYiA/IC0xIDogYSA9PT0gYiA/IDAgOiAxO1xufVxuXG4vKipcbiAqIExpbmtlciBmdW5jdGlvbnMgcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0XG4gKiB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXMgaW5zdGFuY2VzIGdlbmVyYXRlZCBkdXJpbmdcbiAqIHRoZSBwcm9jZXNzLlxuICpcbiAqIFdlIGNyZWF0ZSB1bmxpbmsgZnVuY3Rpb25zIHdpdGggb25seSB0aGUgbmVjZXNzYXJ5XG4gKiBpbmZvcm1hdGlvbiB0byBhdm9pZCByZXRhaW5pbmcgYWRkaXRpb25hbCBjbG9zdXJlcy5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcbiAqIEBwYXJhbSB7VnVlfSBbY29udGV4dF1cbiAqIEBwYXJhbSB7QXJyYXl9IFtjb250ZXh0RGlyc11cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIG1ha2VVbmxpbmtGbih2bSwgZGlycywgY29udGV4dCwgY29udGV4dERpcnMpIHtcbiAgZnVuY3Rpb24gdW5saW5rKGRlc3Ryb3lpbmcpIHtcbiAgICB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpO1xuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHREaXJzKSB7XG4gICAgICB0ZWFyZG93bkRpcnMoY29udGV4dCwgY29udGV4dERpcnMpO1xuICAgIH1cbiAgfVxuICAvLyBleHBvc2UgbGlua2VkIGRpcmVjdGl2ZXNcbiAgdW5saW5rLmRpcnMgPSBkaXJzO1xuICByZXR1cm4gdW5saW5rO1xufVxuXG4vKipcbiAqIFRlYXJkb3duIHBhcnRpYWwgbGlua2VkIGRpcmVjdGl2ZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJzXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGRlc3Ryb3lpbmdcbiAqL1xuXG5mdW5jdGlvbiB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpIHtcbiAgdmFyIGkgPSBkaXJzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGRpcnNbaV0uX3RlYXJkb3duKCk7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIWRlc3Ryb3lpbmcpIHtcbiAgICAgIHZtLl9kaXJlY3RpdmVzLiRyZW1vdmUoZGlyc1tpXSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBsaW5rIHByb3BzIG9uIGFuIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZUFuZExpbmtQcm9wcyh2bSwgZWwsIHByb3BzLCBzY29wZSkge1xuICB2YXIgcHJvcHNMaW5rRm4gPSBjb21waWxlUHJvcHMoZWwsIHByb3BzLCB2bSk7XG4gIHZhciBwcm9wRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcbiAgICBwcm9wc0xpbmtGbih2bSwgc2NvcGUpO1xuICB9LCB2bSk7XG4gIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHByb3BEaXJzKTtcbn1cblxuLyoqXG4gKiBDb21waWxlIHRoZSByb290IGVsZW1lbnQgb2YgYW4gaW5zdGFuY2UuXG4gKlxuICogMS4gYXR0cnMgb24gY29udGV4dCBjb250YWluZXIgKGNvbnRleHQgc2NvcGUpXG4gKiAyLiBhdHRycyBvbiB0aGUgY29tcG9uZW50IHRlbXBsYXRlIHJvb3Qgbm9kZSwgaWZcbiAqICAgIHJlcGxhY2U6dHJ1ZSAoY2hpbGQgc2NvcGUpXG4gKlxuICogSWYgdGhpcyBpcyBhIGZyYWdtZW50IGluc3RhbmNlLCB3ZSBvbmx5IG5lZWQgdG8gY29tcGlsZSAxLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dE9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVSb290KGVsLCBvcHRpb25zLCBjb250ZXh0T3B0aW9ucykge1xuICB2YXIgY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9jb250YWluZXJBdHRycztcbiAgdmFyIHJlcGxhY2VyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzO1xuICB2YXIgY29udGV4dExpbmtGbiwgcmVwbGFjZXJMaW5rRm47XG5cbiAgLy8gb25seSBuZWVkIHRvIGNvbXBpbGUgb3RoZXIgYXR0cmlidXRlcyBmb3JcbiAgLy8gbm9uLWZyYWdtZW50IGluc3RhbmNlc1xuICBpZiAoZWwubm9kZVR5cGUgIT09IDExKSB7XG4gICAgLy8gZm9yIGNvbXBvbmVudHMsIGNvbnRhaW5lciBhbmQgcmVwbGFjZXIgbmVlZCB0byBiZVxuICAgIC8vIGNvbXBpbGVkIHNlcGFyYXRlbHkgYW5kIGxpbmtlZCBpbiBkaWZmZXJlbnQgc2NvcGVzLlxuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuICAgICAgLy8gMi4gY29udGFpbmVyIGF0dHJpYnV0ZXNcbiAgICAgIGlmIChjb250YWluZXJBdHRycyAmJiBjb250ZXh0T3B0aW9ucykge1xuICAgICAgICBjb250ZXh0TGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoY29udGFpbmVyQXR0cnMsIGNvbnRleHRPcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXBsYWNlckF0dHJzKSB7XG4gICAgICAgIC8vIDMuIHJlcGxhY2VyIGF0dHJpYnV0ZXNcbiAgICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhyZXBsYWNlckF0dHJzLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9uLWNvbXBvbmVudCwganVzdCBjb21waWxlIGFzIGEgbm9ybWFsIGVsZW1lbnQuXG4gICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGVsLmF0dHJpYnV0ZXMsIG9wdGlvbnMpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbnRhaW5lckF0dHJzKSB7XG4gICAgLy8gd2FybiBjb250YWluZXIgZGlyZWN0aXZlcyBmb3IgZnJhZ21lbnQgaW5zdGFuY2VzXG4gICAgdmFyIG5hbWVzID0gY29udGFpbmVyQXR0cnMuZmlsdGVyKGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICAvLyBhbGxvdyB2dWUtbG9hZGVyL3Z1ZWlmeSBzY29wZWQgY3NzIGF0dHJpYnV0ZXNcbiAgICAgIHJldHVybiBhdHRyLm5hbWUuaW5kZXhPZignX3YtJykgPCAwICYmXG4gICAgICAvLyBhbGxvdyBldmVudCBsaXN0ZW5lcnNcbiAgICAgICFvblJFLnRlc3QoYXR0ci5uYW1lKSAmJlxuICAgICAgLy8gYWxsb3cgc2xvdHNcbiAgICAgIGF0dHIubmFtZSAhPT0gJ3Nsb3QnO1xuICAgIH0pLm1hcChmdW5jdGlvbiAoYXR0cikge1xuICAgICAgcmV0dXJuICdcIicgKyBhdHRyLm5hbWUgKyAnXCInO1xuICAgIH0pO1xuICAgIGlmIChuYW1lcy5sZW5ndGgpIHtcbiAgICAgIHZhciBwbHVyYWwgPSBuYW1lcy5sZW5ndGggPiAxO1xuICAgICAgd2FybignQXR0cmlidXRlJyArIChwbHVyYWwgPyAncyAnIDogJyAnKSArIG5hbWVzLmpvaW4oJywgJykgKyAocGx1cmFsID8gJyBhcmUnIDogJyBpcycpICsgJyBpZ25vcmVkIG9uIGNvbXBvbmVudCAnICsgJzwnICsgb3B0aW9ucy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPiBiZWNhdXNlICcgKyAndGhlIGNvbXBvbmVudCBpcyBhIGZyYWdtZW50IGluc3RhbmNlOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvY29tcG9uZW50cy5odG1sI0ZyYWdtZW50LUluc3RhbmNlJyk7XG4gICAgfVxuICB9XG5cbiAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gbnVsbDtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJvb3RMaW5rRm4odm0sIGVsLCBzY29wZSkge1xuICAgIC8vIGxpbmsgY29udGV4dCBzY29wZSBkaXJzXG4gICAgdmFyIGNvbnRleHQgPSB2bS5fY29udGV4dDtcbiAgICB2YXIgY29udGV4dERpcnM7XG4gICAgaWYgKGNvbnRleHQgJiYgY29udGV4dExpbmtGbikge1xuICAgICAgY29udGV4dERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnRleHRMaW5rRm4oY29udGV4dCwgZWwsIG51bGwsIHNjb3BlKTtcbiAgICAgIH0sIGNvbnRleHQpO1xuICAgIH1cblxuICAgIC8vIGxpbmsgc2VsZlxuICAgIHZhciBzZWxmRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChyZXBsYWNlckxpbmtGbikgcmVwbGFjZXJMaW5rRm4odm0sIGVsKTtcbiAgICB9LCB2bSk7XG5cbiAgICAvLyByZXR1cm4gdGhlIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBjb250ZXh0XG4gICAgLy8gY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgc2VsZkRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb21waWxlIGEgbm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbiBiYXNlZCBvbiB0aGVcbiAqIG5vZGUgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpIHtcbiAgdmFyIHR5cGUgPSBub2RlLm5vZGVUeXBlO1xuICBpZiAodHlwZSA9PT0gMSAmJiAhaXNTY3JpcHQobm9kZSkpIHtcbiAgICByZXR1cm4gY29tcGlsZUVsZW1lbnQobm9kZSwgb3B0aW9ucyk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gMyAmJiBub2RlLmRhdGEudHJpbSgpKSB7XG4gICAgcmV0dXJuIGNvbXBpbGVUZXh0Tm9kZShub2RlLCBvcHRpb25zKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgYW4gZWxlbWVudCBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlRWxlbWVudChlbCwgb3B0aW9ucykge1xuICAvLyBwcmVwcm9jZXNzIHRleHRhcmVhcy5cbiAgLy8gdGV4dGFyZWEgdHJlYXRzIGl0cyB0ZXh0IGNvbnRlbnQgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG4gIC8vIGp1c3QgYmluZCBpdCBhcyBhbiBhdHRyIGRpcmVjdGl2ZSBmb3IgdmFsdWUuXG4gIGlmIChlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChlbC52YWx1ZSk7XG4gICAgaWYgKHRva2Vucykge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCc6dmFsdWUnLCB0b2tlbnNUb0V4cCh0b2tlbnMpKTtcbiAgICAgIGVsLnZhbHVlID0gJyc7XG4gICAgfVxuICB9XG4gIHZhciBsaW5rRm47XG4gIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcbiAgdmFyIGF0dHJzID0gaGFzQXR0cnMgJiYgdG9BcnJheShlbC5hdHRyaWJ1dGVzKTtcbiAgLy8gY2hlY2sgdGVybWluYWwgZGlyZWN0aXZlcyAoZm9yICYgaWYpXG4gIGlmIChoYXNBdHRycykge1xuICAgIGxpbmtGbiA9IGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucyk7XG4gIH1cbiAgLy8gY2hlY2sgZWxlbWVudCBkaXJlY3RpdmVzXG4gIGlmICghbGlua0ZuKSB7XG4gICAgbGlua0ZuID0gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucyk7XG4gIH1cbiAgLy8gY2hlY2sgY29tcG9uZW50XG4gIGlmICghbGlua0ZuKSB7XG4gICAgbGlua0ZuID0gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpO1xuICB9XG4gIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG4gIGlmICghbGlua0ZuICYmIGhhc0F0dHJzKSB7XG4gICAgbGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoYXR0cnMsIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiBsaW5rRm47XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIHRleHROb2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7VGV4dE5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfSB0ZXh0Tm9kZUxpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVUZXh0Tm9kZShub2RlLCBvcHRpb25zKSB7XG4gIC8vIHNraXAgbWFya2VkIHRleHQgbm9kZXNcbiAgaWYgKG5vZGUuX3NraXApIHtcbiAgICByZXR1cm4gcmVtb3ZlVGV4dDtcbiAgfVxuXG4gIHZhciB0b2tlbnMgPSBwYXJzZVRleHQobm9kZS53aG9sZVRleHQpO1xuICBpZiAoIXRva2Vucykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gbWFyayBhZGphY2VudCB0ZXh0IG5vZGVzIGFzIHNraXBwZWQsXG4gIC8vIGJlY2F1c2Ugd2UgYXJlIHVzaW5nIG5vZGUud2hvbGVUZXh0IHRvIGNvbXBpbGVcbiAgLy8gYWxsIGFkamFjZW50IHRleHQgbm9kZXMgdG9nZXRoZXIuIFRoaXMgZml4ZXNcbiAgLy8gaXNzdWVzIGluIElFIHdoZXJlIHNvbWV0aW1lcyBpdCBzcGxpdHMgdXAgYSBzaW5nbGVcbiAgLy8gdGV4dCBub2RlIGludG8gbXVsdGlwbGUgb25lcy5cbiAgdmFyIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICB3aGlsZSAobmV4dCAmJiBuZXh0Lm5vZGVUeXBlID09PSAzKSB7XG4gICAgbmV4dC5fc2tpcCA9IHRydWU7XG4gICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG4gIH1cblxuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIGVsLCB0b2tlbjtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgZWwgPSB0b2tlbi50YWcgPyBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcbiAgICBmcmFnLmFwcGVuZENoaWxkKGVsKTtcbiAgfVxuICByZXR1cm4gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZywgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogTGlua2VyIGZvciBhbiBza2lwcGVkIHRleHQgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7VGV4dH0gbm9kZVxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZVRleHQodm0sIG5vZGUpIHtcbiAgcmVtb3ZlKG5vZGUpO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgYSBzaW5nbGUgdGV4dCB0b2tlbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtOb2RlfVxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIHtcbiAgdmFyIGVsO1xuICBpZiAodG9rZW4ub25lVGltZSkge1xuICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0b2tlbi5odG1sKSB7XG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJ3YtaHRtbCcpO1xuICAgICAgc2V0VG9rZW5UeXBlKCdodG1sJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElFIHdpbGwgY2xlYW4gdXAgZW1wdHkgdGV4dE5vZGVzIGR1cmluZ1xuICAgICAgLy8gZnJhZy5jbG9uZU5vZGUodHJ1ZSksIHNvIHdlIGhhdmUgdG8gZ2l2ZSBpdFxuICAgICAgLy8gc29tZXRoaW5nIGhlcmUuLi5cbiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyAnKTtcbiAgICAgIHNldFRva2VuVHlwZSgndGV4dCcpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBzZXRUb2tlblR5cGUodHlwZSkge1xuICAgIGlmICh0b2tlbi5kZXNjcmlwdG9yKSByZXR1cm47XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHRva2VuLnZhbHVlKTtcbiAgICB0b2tlbi5kZXNjcmlwdG9yID0ge1xuICAgICAgbmFtZTogdHlwZSxcbiAgICAgIGRlZjogZGlyZWN0aXZlc1t0eXBlXSxcbiAgICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuICAgICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnNcbiAgICB9O1xuICB9XG4gIHJldHVybiBlbDtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgcHJvY2Vzc2VzIGEgdGV4dE5vZGUuXG4gKlxuICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSB0b2tlbnNcbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICovXG5cbmZ1bmN0aW9uIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHRleHROb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUpIHtcbiAgICB2YXIgZnJhZ0Nsb25lID0gZnJhZy5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGZyYWdDbG9uZS5jaGlsZE5vZGVzKTtcbiAgICB2YXIgdG9rZW4sIHZhbHVlLCBub2RlO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgICB2YWx1ZSA9IHRva2VuLnZhbHVlO1xuICAgICAgaWYgKHRva2VuLnRhZykge1xuICAgICAgICBub2RlID0gY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgaWYgKHRva2VuLm9uZVRpbWUpIHtcbiAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bSkuJGV2YWwodmFsdWUpO1xuICAgICAgICAgIGlmICh0b2tlbi5odG1sKSB7XG4gICAgICAgICAgICByZXBsYWNlKG5vZGUsIHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9kZS5kYXRhID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uX2JpbmREaXIodG9rZW4uZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJlcGxhY2UoZWwsIGZyYWdDbG9uZSk7XG4gIH07XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIG5vZGUgbGlzdCBhbmQgcmV0dXJuIGEgY2hpbGRMaW5rRm4uXG4gKlxuICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZUxpc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZU5vZGVMaXN0KG5vZGVMaXN0LCBvcHRpb25zKSB7XG4gIHZhciBsaW5rRm5zID0gW107XG4gIHZhciBub2RlTGlua0ZuLCBjaGlsZExpbmtGbiwgbm9kZTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2RlTGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBub2RlID0gbm9kZUxpc3RbaV07XG4gICAgbm9kZUxpbmtGbiA9IGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpO1xuICAgIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmIG5vZGUudGFnTmFtZSAhPT0gJ1NDUklQVCcgJiYgbm9kZS5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3Qobm9kZS5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG4gICAgbGlua0Zucy5wdXNoKG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuKTtcbiAgfVxuICByZXR1cm4gbGlua0Zucy5sZW5ndGggPyBtYWtlQ2hpbGRMaW5rRm4obGlua0ZucykgOiBudWxsO1xufVxuXG4vKipcbiAqIE1ha2UgYSBjaGlsZCBsaW5rIGZ1bmN0aW9uIGZvciBhIG5vZGUncyBjaGlsZE5vZGVzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fSBsaW5rRm5zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gY2hpbGRMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlQ2hpbGRMaW5rRm4obGlua0Zucykge1xuICByZXR1cm4gZnVuY3Rpb24gY2hpbGRMaW5rRm4odm0sIG5vZGVzLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIHZhciBub2RlLCBub2RlTGlua0ZuLCBjaGlsZHJlbkxpbmtGbjtcbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IDAsIGwgPSBsaW5rRm5zLmxlbmd0aDsgaSA8IGw7IG4rKykge1xuICAgICAgbm9kZSA9IG5vZGVzW25dO1xuICAgICAgbm9kZUxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcbiAgICAgIGNoaWxkcmVuTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuICAgICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG4gICAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkobm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgIGlmIChub2RlTGlua0ZuKSB7XG4gICAgICAgIG5vZGVMaW5rRm4odm0sIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIH1cbiAgICAgIGlmIChjaGlsZHJlbkxpbmtGbikge1xuICAgICAgICBjaGlsZHJlbkxpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBmb3IgZWxlbWVudCBkaXJlY3RpdmVzIChjdXN0b20gZWxlbWVudHMgdGhhdCBzaG91bGRcbiAqIGJlIHJlc292bGVkIGFzIHRlcm1pbmFsIGRpcmVjdGl2ZXMpLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucykge1xuICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICBpZiAoY29tbW9uVGFnUkUudGVzdCh0YWcpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKTtcbiAgaWYgKGRlZikge1xuICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCB0YWcsICcnLCBvcHRpb25zLCBkZWYpO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudC4gSWYgeWVzLCByZXR1cm5cbiAqIGEgY29tcG9uZW50IGxpbmsgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucykge1xuICB2YXIgY29tcG9uZW50ID0gY2hlY2tDb21wb25lbnRBdHRyKGVsLCBvcHRpb25zKTtcbiAgaWYgKGNvbXBvbmVudCkge1xuICAgIHZhciByZWYgPSBmaW5kUmVmKGVsKTtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICAgIG5hbWU6ICdjb21wb25lbnQnLFxuICAgICAgcmVmOiByZWYsXG4gICAgICBleHByZXNzaW9uOiBjb21wb25lbnQuaWQsXG4gICAgICBkZWY6IGludGVybmFsRGlyZWN0aXZlcy5jb21wb25lbnQsXG4gICAgICBtb2RpZmllcnM6IHtcbiAgICAgICAgbGl0ZXJhbDogIWNvbXBvbmVudC5keW5hbWljXG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgY29tcG9uZW50TGlua0ZuID0gZnVuY3Rpb24gY29tcG9uZW50TGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAgIGlmIChyZWYpIHtcbiAgICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgcmVmLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgfTtcbiAgICBjb21wb25lbnRMaW5rRm4udGVybWluYWwgPSB0cnVlO1xuICAgIHJldHVybiBjb21wb25lbnRMaW5rRm47XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBhbiBlbGVtZW50IGZvciB0ZXJtaW5hbCBkaXJlY3RpdmVzIGluIGZpeGVkIG9yZGVyLlxuICogSWYgaXQgZmluZHMgb25lLCByZXR1cm4gYSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7QXJyYXl9IGF0dHJzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMoZWwsIGF0dHJzLCBvcHRpb25zKSB7XG4gIC8vIHNraXAgdi1wcmVcbiAgaWYgKGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIHNraXA7XG4gIH1cbiAgLy8gc2tpcCB2LWVsc2UgYmxvY2ssIGJ1dCBvbmx5IGlmIGZvbGxvd2luZyB2LWlmXG4gIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3YtZWxzZScpKSB7XG4gICAgdmFyIHByZXYgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIGlmIChwcmV2ICYmIHByZXYuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICAgIHJldHVybiBza2lwO1xuICAgIH1cbiAgfVxuXG4gIHZhciBhdHRyLCBuYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBtYXRjaGVkLCBkaXJOYW1lLCByYXdOYW1lLCBhcmcsIGRlZiwgdGVybURlZjtcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBhdHRycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBhdHRyID0gYXR0cnNbaV07XG4gICAgbmFtZSA9IGF0dHIubmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcbiAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuICAgICAgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdkaXJlY3RpdmVzJywgbWF0Y2hlZFsxXSk7XG4gICAgICBpZiAoZGVmICYmIGRlZi50ZXJtaW5hbCkge1xuICAgICAgICBpZiAoIXRlcm1EZWYgfHwgKGRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZKSA+IHRlcm1EZWYucHJpb3JpdHkpIHtcbiAgICAgICAgICB0ZXJtRGVmID0gZGVmO1xuICAgICAgICAgIHJhd05hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMoYXR0ci5uYW1lKTtcbiAgICAgICAgICB2YWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XG4gICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmICh0ZXJtRGVmKSB7XG4gICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCB0ZXJtRGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2tpcCgpIHt9XG5za2lwLnRlcm1pbmFsID0gdHJ1ZTtcblxuLyoqXG4gKiBCdWlsZCBhIG5vZGUgbGluayBmdW5jdGlvbiBmb3IgYSB0ZXJtaW5hbCBkaXJlY3RpdmUuXG4gKiBBIHRlcm1pbmFsIGxpbmsgZnVuY3Rpb24gdGVybWluYXRlcyB0aGUgY3VycmVudFxuICogY29tcGlsYXRpb24gcmVjdXJzaW9uIGFuZCBoYW5kbGVzIGNvbXBpbGF0aW9uIG9mIHRoZVxuICogc3VidHJlZSBpbiB0aGUgZGlyZWN0aXZlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gZGVmXG4gKiBAcGFyYW0ge1N0cmluZ30gW3Jhd05hbWVdXG4gKiBAcGFyYW0ge1N0cmluZ30gW2FyZ11cbiAqIEBwYXJhbSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIGRlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpIHtcbiAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcbiAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgbmFtZTogZGlyTmFtZSxcbiAgICBhcmc6IGFyZyxcbiAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVycyxcbiAgICByYXc6IHZhbHVlLFxuICAgIGF0dHI6IHJhd05hbWUsXG4gICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG4gICAgZGVmOiBkZWZcbiAgfTtcbiAgLy8gY2hlY2sgcmVmIGZvciB2LWZvciBhbmQgcm91dGVyLXZpZXdcbiAgaWYgKGRpck5hbWUgPT09ICdmb3InIHx8IGRpck5hbWUgPT09ICdyb3V0ZXItdmlldycpIHtcbiAgICBkZXNjcmlwdG9yLnJlZiA9IGZpbmRSZWYoZWwpO1xuICB9XG4gIHZhciBmbiA9IGZ1bmN0aW9uIHRlcm1pbmFsTm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgaWYgKGRlc2NyaXB0b3IucmVmKSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCBkZXNjcmlwdG9yLnJlZiwgbnVsbCk7XG4gICAgfVxuICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gIH07XG4gIGZuLnRlcm1pbmFsID0gdHJ1ZTtcbiAgcmV0dXJuIGZuO1xufVxuXG4vKipcbiAqIENvbXBpbGUgdGhlIGRpcmVjdGl2ZXMgb24gYW4gZWxlbWVudCBhbmQgcmV0dXJuIGEgbGlua2VyLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8TmFtZWROb2RlTWFwfSBhdHRyc1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKSB7XG4gIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuICB2YXIgZGlycyA9IFtdO1xuICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIHJhd05hbWUsIHJhd1ZhbHVlLCBkaXJOYW1lLCBhcmcsIG1vZGlmaWVycywgZGlyRGVmLCB0b2tlbnMsIG1hdGNoZWQ7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBhdHRyID0gYXR0cnNbaV07XG4gICAgbmFtZSA9IHJhd05hbWUgPSBhdHRyLm5hbWU7XG4gICAgdmFsdWUgPSByYXdWYWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgdG9rZW5zID0gcGFyc2VUZXh0KHZhbHVlKTtcbiAgICAvLyByZXNldCBhcmdcbiAgICBhcmcgPSBudWxsO1xuICAgIC8vIGNoZWNrIG1vZGlmaWVyc1xuICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKG5hbWUpO1xuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuXG4gICAgLy8gYXR0cmlidXRlIGludGVycG9sYXRpb25zXG4gICAgaWYgKHRva2Vucykge1xuICAgICAgdmFsdWUgPSB0b2tlbnNUb0V4cCh0b2tlbnMpO1xuICAgICAgYXJnID0gbmFtZTtcbiAgICAgIHB1c2hEaXIoJ2JpbmQnLCBkaXJlY3RpdmVzLmJpbmQsIHRva2Vucyk7XG4gICAgICAvLyB3YXJuIGFnYWluc3QgbWl4aW5nIG11c3RhY2hlcyB3aXRoIHYtYmluZFxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhdHRycywgZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgICAgICByZXR1cm4gYXR0ci5uYW1lID09PSAnOmNsYXNzJyB8fCBhdHRyLm5hbWUgPT09ICd2LWJpbmQ6Y2xhc3MnO1xuICAgICAgICB9KSkge1xuICAgICAgICAgIHdhcm4oJ2NsYXNzPVwiJyArIHJhd1ZhbHVlICsgJ1wiOiBEbyBub3QgbWl4IG11c3RhY2hlIGludGVycG9sYXRpb24gJyArICdhbmQgdi1iaW5kIGZvciBcImNsYXNzXCIgb24gdGhlIHNhbWUgZWxlbWVudC4gVXNlIG9uZSBvciB0aGUgb3RoZXIuJywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2VcblxuICAgICAgLy8gc3BlY2lhbCBhdHRyaWJ1dGU6IHRyYW5zaXRpb25cbiAgICAgIGlmICh0cmFuc2l0aW9uUkUudGVzdChuYW1lKSkge1xuICAgICAgICBtb2RpZmllcnMubGl0ZXJhbCA9ICFiaW5kUkUudGVzdChuYW1lKTtcbiAgICAgICAgcHVzaERpcigndHJhbnNpdGlvbicsIGludGVybmFsRGlyZWN0aXZlcy50cmFuc2l0aW9uKTtcbiAgICAgIH0gZWxzZVxuXG4gICAgICAgIC8vIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgIGlmIChvblJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICBhcmcgPSBuYW1lLnJlcGxhY2Uob25SRSwgJycpO1xuICAgICAgICAgIHB1c2hEaXIoJ29uJywgZGlyZWN0aXZlcy5vbik7XG4gICAgICAgIH0gZWxzZVxuXG4gICAgICAgICAgLy8gYXR0cmlidXRlIGJpbmRpbmdzXG4gICAgICAgICAgaWYgKGJpbmRSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgICAgICBkaXJOYW1lID0gbmFtZS5yZXBsYWNlKGJpbmRSRSwgJycpO1xuICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdzdHlsZScgfHwgZGlyTmFtZSA9PT0gJ2NsYXNzJykge1xuICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGludGVybmFsRGlyZWN0aXZlc1tkaXJOYW1lXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhcmcgPSBkaXJOYW1lO1xuICAgICAgICAgICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2VcblxuICAgICAgICAgICAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcbiAgICAgICAgICAgIGlmIChtYXRjaGVkID0gbmFtZS5tYXRjaChkaXJBdHRyUkUpKSB7XG4gICAgICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuICAgICAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xuXG4gICAgICAgICAgICAgIC8vIHNraXAgdi1lbHNlICh3aGVuIHVzZWQgd2l0aCB2LXNob3cpXG4gICAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnZWxzZScpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGRpckRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIGRpck5hbWUsIHRydWUpO1xuICAgICAgICAgICAgICBpZiAoZGlyRGVmKSB7XG4gICAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBkaXJEZWYpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHVzaCBhIGRpcmVjdGl2ZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRpck5hbWVcbiAgICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IGRlZlxuICAgKiBAcGFyYW0ge0FycmF5fSBbaW50ZXJwVG9rZW5zXVxuICAgKi9cblxuICBmdW5jdGlvbiBwdXNoRGlyKGRpck5hbWUsIGRlZiwgaW50ZXJwVG9rZW5zKSB7XG4gICAgdmFyIGhhc09uZVRpbWVUb2tlbiA9IGludGVycFRva2VucyAmJiBoYXNPbmVUaW1lKGludGVycFRva2Vucyk7XG4gICAgdmFyIHBhcnNlZCA9ICFoYXNPbmVUaW1lVG9rZW4gJiYgcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuICAgIGRpcnMucHVzaCh7XG4gICAgICBuYW1lOiBkaXJOYW1lLFxuICAgICAgYXR0cjogcmF3TmFtZSxcbiAgICAgIHJhdzogcmF3VmFsdWUsXG4gICAgICBkZWY6IGRlZixcbiAgICAgIGFyZzogYXJnLFxuICAgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG4gICAgICAvLyBjb252ZXJzaW9uIGZyb20gaW50ZXJwb2xhdGlvbiBzdHJpbmdzIHdpdGggb25lLXRpbWUgdG9rZW5cbiAgICAgIC8vIHRvIGV4cHJlc3Npb24gaXMgZGlmZmVyZWQgdW50aWwgZGlyZWN0aXZlIGJpbmQgdGltZSBzbyB0aGF0IHdlXG4gICAgICAvLyBoYXZlIGFjY2VzcyB0byB0aGUgYWN0dWFsIHZtIGNvbnRleHQgZm9yIG9uZS10aW1lIGJpbmRpbmdzLlxuICAgICAgZXhwcmVzc2lvbjogcGFyc2VkICYmIHBhcnNlZC5leHByZXNzaW9uLFxuICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuICAgICAgaW50ZXJwOiBpbnRlcnBUb2tlbnMsXG4gICAgICBoYXNPbmVUaW1lOiBoYXNPbmVUaW1lVG9rZW5cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChkaXJzLmxlbmd0aCkge1xuICAgIHJldHVybiBtYWtlTm9kZUxpbmtGbihkaXJzKTtcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIG1vZGlmaWVycyBmcm9tIGRpcmVjdGl2ZSBhdHRyaWJ1dGUgbmFtZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlTW9kaWZpZXJzKG5hbWUpIHtcbiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSk7XG4gIGlmIChtYXRjaCkge1xuICAgIHZhciBpID0gbWF0Y2gubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHJlc1ttYXRjaFtpXS5zbGljZSgxKV0gPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgbGluayBmdW5jdGlvbiBmb3IgYWxsIGRpcmVjdGl2ZXMgb24gYSBzaW5nbGUgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJlY3RpdmVzXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gZGlyZWN0aXZlc0xpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VOb2RlTGlua0ZuKGRpcmVjdGl2ZXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIC8vIHJldmVyc2UgYXBwbHkgYmVjYXVzZSBpdCdzIHNvcnRlZCBsb3cgdG8gaGlnaFxuICAgIHZhciBpID0gZGlyZWN0aXZlcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdm0uX2JpbmREaXIoZGlyZWN0aXZlc1tpXSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gaW50ZXJwb2xhdGlvbiBzdHJpbmcgY29udGFpbnMgb25lLXRpbWUgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNPbmVUaW1lKHRva2Vucykge1xuICB2YXIgaSA9IHRva2Vucy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAodG9rZW5zW2ldLm9uZVRpbWUpIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzU2NyaXB0KGVsKSB7XG4gIHJldHVybiBlbC50YWdOYW1lID09PSAnU0NSSVBUJyAmJiAoIWVsLmhhc0F0dHJpYnV0ZSgndHlwZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAndGV4dC9qYXZhc2NyaXB0Jyk7XG59XG5cbnZhciBzcGVjaWFsQ2hhclJFID0gL1teXFx3XFwtOlxcLl0vO1xuXG4vKipcbiAqIFByb2Nlc3MgYW4gZWxlbWVudCBvciBhIERvY3VtZW50RnJhZ21lbnQgYmFzZWQgb24gYVxuICogaW5zdGFuY2Ugb3B0aW9uIG9iamVjdC4gVGhpcyBhbGxvd3MgdXMgdG8gdHJhbnNjbHVkZVxuICogYSB0ZW1wbGF0ZSBub2RlL2ZyYWdtZW50IGJlZm9yZSB0aGUgaW5zdGFuY2UgaXMgY3JlYXRlZCxcbiAqIHNvIHRoZSBwcm9jZXNzZWQgZnJhZ21lbnQgY2FuIHRoZW4gYmUgY2xvbmVkIGFuZCByZXVzZWRcbiAqIGluIHYtZm9yLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gdHJhbnNjbHVkZShlbCwgb3B0aW9ucykge1xuICAvLyBleHRyYWN0IGNvbnRhaW5lciBhdHRyaWJ1dGVzIHRvIHBhc3MgdGhlbSBkb3duXG4gIC8vIHRvIGNvbXBpbGVyLCBiZWNhdXNlIHRoZXkgbmVlZCB0byBiZSBjb21waWxlZCBpblxuICAvLyBwYXJlbnQgc2NvcGUuIHdlIGFyZSBtdXRhdGluZyB0aGUgb3B0aW9ucyBvYmplY3QgaGVyZVxuICAvLyBhc3N1bWluZyB0aGUgc2FtZSBvYmplY3Qgd2lsbCBiZSB1c2VkIGZvciBjb21waWxlXG4gIC8vIHJpZ2h0IGFmdGVyIHRoaXMuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBleHRyYWN0QXR0cnMoZWwpO1xuICB9XG4gIC8vIGZvciB0ZW1wbGF0ZSB0YWdzLCB3aGF0IHdlIHdhbnQgaXMgaXRzIGNvbnRlbnQgYXNcbiAgLy8gYSBkb2N1bWVudEZyYWdtZW50IChmb3IgZnJhZ21lbnQgaW5zdGFuY2VzKVxuICBpZiAoaXNUZW1wbGF0ZShlbCkpIHtcbiAgICBlbCA9IHBhcnNlVGVtcGxhdGUoZWwpO1xuICB9XG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50ICYmICFvcHRpb25zLnRlbXBsYXRlKSB7XG4gICAgICBvcHRpb25zLnRlbXBsYXRlID0gJzxzbG90Pjwvc2xvdD4nO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy50ZW1wbGF0ZSkge1xuICAgICAgb3B0aW9ucy5fY29udGVudCA9IGV4dHJhY3RDb250ZW50KGVsKTtcbiAgICAgIGVsID0gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG4gICAgLy8gYW5jaG9ycyBmb3IgZnJhZ21lbnQgaW5zdGFuY2VcbiAgICAvLyBwYXNzaW5nIGluIGBwZXJzaXN0OiB0cnVlYCB0byBhdm9pZCB0aGVtIGJlaW5nXG4gICAgLy8gZGlzY2FyZGVkIGJ5IElFIGR1cmluZyB0ZW1wbGF0ZSBjbG9uaW5nXG4gICAgcHJlcGVuZChjcmVhdGVBbmNob3IoJ3Ytc3RhcnQnLCB0cnVlKSwgZWwpO1xuICAgIGVsLmFwcGVuZENoaWxkKGNyZWF0ZUFuY2hvcigndi1lbmQnLCB0cnVlKSk7XG4gIH1cbiAgcmV0dXJuIGVsO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbi5cbiAqIElmIHRoZSByZXBsYWNlIG9wdGlvbiBpcyB0cnVlIHRoaXMgd2lsbCBzd2FwIHRoZSAkZWwuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcbiAgdmFyIGZyYWcgPSBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCB0cnVlKTtcbiAgaWYgKGZyYWcpIHtcbiAgICB2YXIgcmVwbGFjZXIgPSBmcmFnLmZpcnN0Q2hpbGQ7XG4gICAgdmFyIHRhZyA9IHJlcGxhY2VyLnRhZ05hbWUgJiYgcmVwbGFjZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGVsID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignWW91IGFyZSBtb3VudGluZyBhbiBpbnN0YW5jZSB3aXRoIGEgdGVtcGxhdGUgdG8gJyArICc8Ym9keT4uIFRoaXMgd2lsbCByZXBsYWNlIDxib2R5PiBlbnRpcmVseS4gWW91ICcgKyAnc2hvdWxkIHByb2JhYmx5IHVzZSBgcmVwbGFjZTogZmFsc2VgIGhlcmUuJyk7XG4gICAgICB9XG4gICAgICAvLyB0aGVyZSBhcmUgbWFueSBjYXNlcyB3aGVyZSB0aGUgaW5zdGFuY2UgbXVzdFxuICAgICAgLy8gYmVjb21lIGEgZnJhZ21lbnQgaW5zdGFuY2U6IGJhc2ljYWxseSBhbnl0aGluZyB0aGF0XG4gICAgICAvLyBjYW4gY3JlYXRlIG1vcmUgdGhhbiAxIHJvb3Qgbm9kZXMuXG4gICAgICBpZiAoXG4gICAgICAvLyBtdWx0aS1jaGlsZHJlbiB0ZW1wbGF0ZVxuICAgICAgZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA+IDEgfHxcbiAgICAgIC8vIG5vbi1lbGVtZW50IHRlbXBsYXRlXG4gICAgICByZXBsYWNlci5ub2RlVHlwZSAhPT0gMSB8fFxuICAgICAgLy8gc2luZ2xlIG5lc3RlZCBjb21wb25lbnRcbiAgICAgIHRhZyA9PT0gJ2NvbXBvbmVudCcgfHwgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSB8fCBoYXNCaW5kQXR0cihyZXBsYWNlciwgJ2lzJykgfHxcbiAgICAgIC8vIGVsZW1lbnQgZGlyZWN0aXZlXG4gICAgICByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKSB8fFxuICAgICAgLy8gZm9yIGJsb2NrXG4gICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykgfHxcbiAgICAgIC8vIGlmIGJsb2NrXG4gICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgICByZXR1cm4gZnJhZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBleHRyYWN0QXR0cnMocmVwbGFjZXIpO1xuICAgICAgICBtZXJnZUF0dHJzKGVsLCByZXBsYWNlcik7XG4gICAgICAgIHJldHVybiByZXBsYWNlcjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWwuYXBwZW5kQ2hpbGQoZnJhZyk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB0ZW1wbGF0ZSBvcHRpb246ICcgKyB0ZW1wbGF0ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZXh0cmFjdCBhIGNvbXBvbmVudCBjb250YWluZXIncyBhdHRyaWJ1dGVzXG4gKiBpbnRvIGEgcGxhaW4gb2JqZWN0IGFycmF5LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5cbmZ1bmN0aW9uIGV4dHJhY3RBdHRycyhlbCkge1xuICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZWwuaGFzQXR0cmlidXRlcygpKSB7XG4gICAgcmV0dXJuIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBNZXJnZSB0aGUgYXR0cmlidXRlcyBvZiB0d28gZWxlbWVudHMsIGFuZCBtYWtlIHN1cmVcbiAqIHRoZSBjbGFzcyBuYW1lcyBhcmUgbWVyZ2VkIHByb3Blcmx5LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZnJvbVxuICogQHBhcmFtIHtFbGVtZW50fSB0b1xuICovXG5cbmZ1bmN0aW9uIG1lcmdlQXR0cnMoZnJvbSwgdG8pIHtcbiAgdmFyIGF0dHJzID0gZnJvbS5hdHRyaWJ1dGVzO1xuICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcbiAgdmFyIG5hbWUsIHZhbHVlO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG4gICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcbiAgICBpZiAoIXRvLmhhc0F0dHJpYnV0ZShuYW1lKSAmJiAhc3BlY2lhbENoYXJSRS50ZXN0KG5hbWUpKSB7XG4gICAgICB0by5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiAhcGFyc2VUZXh0KHZhbHVlKSAmJiAodmFsdWUgPSB2YWx1ZS50cmltKCkpKSB7XG4gICAgICB2YWx1ZS5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgICAgICBhZGRDbGFzcyh0bywgY2xzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFNjYW4gYW5kIGRldGVybWluZSBzbG90IGNvbnRlbnQgZGlzdHJpYnV0aW9uLlxuICogV2UgZG8gdGhpcyBkdXJpbmcgdHJhbnNjbHVzaW9uIGluc3RlYWQgYXQgY29tcGlsZSB0aW1lIHNvIHRoYXRcbiAqIHRoZSBkaXN0cmlidXRpb24gaXMgZGVjb3VwbGVkIGZyb20gdGhlIGNvbXBpbGF0aW9uIG9yZGVyIG9mXG4gKiB0aGUgc2xvdHMuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IHRlbXBsYXRlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRlbnRcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5cbmZ1bmN0aW9uIHJlc29sdmVTbG90cyh2bSwgY29udGVudCkge1xuICBpZiAoIWNvbnRlbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGNvbnRlbnRzID0gdm0uX3Nsb3RDb250ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHZhciBlbCwgbmFtZTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb250ZW50LmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGVsID0gY29udGVudC5jaGlsZHJlbltpXTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGlmIChuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCdzbG90JykpIHtcbiAgICAgIChjb250ZW50c1tuYW1lXSB8fCAoY29udGVudHNbbmFtZV0gPSBbXSkpLnB1c2goZWwpO1xuICAgIH1cbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgZ2V0QmluZEF0dHIoZWwsICdzbG90JykpIHtcbiAgICAgIHdhcm4oJ1RoZSBcInNsb3RcIiBhdHRyaWJ1dGUgbXVzdCBiZSBzdGF0aWMuJywgdm0uJHBhcmVudCk7XG4gICAgfVxuICB9XG4gIGZvciAobmFtZSBpbiBjb250ZW50cykge1xuICAgIGNvbnRlbnRzW25hbWVdID0gZXh0cmFjdEZyYWdtZW50KGNvbnRlbnRzW25hbWVdLCBjb250ZW50KTtcbiAgfVxuICBpZiAoY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICB2YXIgbm9kZXMgPSBjb250ZW50LmNoaWxkTm9kZXM7XG4gICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMSAmJiBub2Rlc1swXS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZXNbMF0uZGF0YS50cmltKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29udGVudHNbJ2RlZmF1bHQnXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50LmNoaWxkTm9kZXMsIGNvbnRlbnQpO1xuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCBxdWFsaWZpZWQgY29udGVudCBub2RlcyBmcm9tIGEgbm9kZSBsaXN0LlxuICpcbiAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVzXG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIGV4dHJhY3RGcmFnbWVudChub2RlcywgcGFyZW50KSB7XG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBub2RlcyA9IHRvQXJyYXkobm9kZXMpO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBub2RlID0gbm9kZXNbaV07XG4gICAgaWYgKGlzVGVtcGxhdGUobm9kZSkgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWlmJykgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWZvcicpKSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICBub2RlID0gcGFyc2VUZW1wbGF0ZShub2RlLCB0cnVlKTtcbiAgICB9XG4gICAgZnJhZy5hcHBlbmRDaGlsZChub2RlKTtcbiAgfVxuICByZXR1cm4gZnJhZztcbn1cblxuXG5cbnZhciBjb21waWxlciA9IE9iamVjdC5mcmVlemUoe1xuXHRjb21waWxlOiBjb21waWxlLFxuXHRjb21waWxlQW5kTGlua1Byb3BzOiBjb21waWxlQW5kTGlua1Byb3BzLFxuXHRjb21waWxlUm9vdDogY29tcGlsZVJvb3QsXG5cdHRyYW5zY2x1ZGU6IHRyYW5zY2x1ZGUsXG5cdHJlc29sdmVTbG90czogcmVzb2x2ZVNsb3RzXG59KTtcblxuZnVuY3Rpb24gc3RhdGVNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBBY2Nlc3NvciBmb3IgYCRkYXRhYCBwcm9wZXJ0eSwgc2luY2Ugc2V0dGluZyAkZGF0YVxuICAgKiByZXF1aXJlcyBvYnNlcnZpbmcgdGhlIG5ldyBvYmplY3QgYW5kIHVwZGF0aW5nXG4gICAqIHByb3hpZWQgcHJvcGVydGllcy5cbiAgICovXG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckZGF0YScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3RGF0YSkge1xuICAgICAgaWYgKG5ld0RhdGEgIT09IHRoaXMuX2RhdGEpIHtcbiAgICAgICAgdGhpcy5fc2V0RGF0YShuZXdEYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgc2NvcGUgb2YgYW4gaW5zdGFuY2UsIHdoaWNoIGNvbnRhaW5zOlxuICAgKiAtIG9ic2VydmVkIGRhdGFcbiAgICogLSBjb21wdXRlZCBwcm9wZXJ0aWVzXG4gICAqIC0gdXNlciBtZXRob2RzXG4gICAqIC0gbWV0YSBwcm9wZXJ0aWVzXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9pbml0UHJvcHMoKTtcbiAgICB0aGlzLl9pbml0TWV0YSgpO1xuICAgIHRoaXMuX2luaXRNZXRob2RzKCk7XG4gICAgdGhpcy5faW5pdERhdGEoKTtcbiAgICB0aGlzLl9pbml0Q29tcHV0ZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBwcm9wcy5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdFByb3BzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcbiAgICB2YXIgZWwgPSBvcHRpb25zLmVsO1xuICAgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG4gICAgaWYgKHByb3BzICYmICFlbCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdQcm9wcyB3aWxsIG5vdCBiZSBjb21waWxlZCBpZiBubyBgZWxgIG9wdGlvbiBpcyAnICsgJ3Byb3ZpZGVkIGF0IGluc3RhbnRpYXRpb24uJywgdGhpcyk7XG4gICAgfVxuICAgIC8vIG1ha2Ugc3VyZSB0byBjb252ZXJ0IHN0cmluZyBzZWxlY3RvcnMgaW50byBlbGVtZW50IG5vd1xuICAgIGVsID0gb3B0aW9ucy5lbCA9IHF1ZXJ5KGVsKTtcbiAgICB0aGlzLl9wcm9wc1VubGlua0ZuID0gZWwgJiYgZWwubm9kZVR5cGUgPT09IDEgJiYgcHJvcHNcbiAgICAvLyBwcm9wcyBtdXN0IGJlIGxpbmtlZCBpbiBwcm9wZXIgc2NvcGUgaWYgaW5zaWRlIHYtZm9yXG4gICAgPyBjb21waWxlQW5kTGlua1Byb3BzKHRoaXMsIGVsLCBwcm9wcywgdGhpcy5fc2NvcGUpIDogbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgZGF0YS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRhdGFGbiA9IHRoaXMuJG9wdGlvbnMuZGF0YTtcbiAgICB2YXIgZGF0YSA9IHRoaXMuX2RhdGEgPSBkYXRhRm4gPyBkYXRhRm4oKSA6IHt9O1xuICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgZGF0YSA9IHt9O1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdkYXRhIGZ1bmN0aW9ucyBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC4nLCB0aGlzKTtcbiAgICB9XG4gICAgdmFyIHByb3BzID0gdGhpcy5fcHJvcHM7XG4gICAgLy8gcHJveHkgZGF0YSBvbiBpbnN0YW5jZVxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG4gICAgdmFyIGksIGtleTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIC8vIHRoZXJlIGFyZSB0d28gc2NlbmFyaW9zIHdoZXJlIHdlIGNhbiBwcm94eSBhIGRhdGEga2V5OlxuICAgICAgLy8gMS4gaXQncyBub3QgYWxyZWFkeSBkZWZpbmVkIGFzIGEgcHJvcFxuICAgICAgLy8gMi4gaXQncyBwcm92aWRlZCB2aWEgYSBpbnN0YW50aWF0aW9uIG9wdGlvbiBBTkQgdGhlcmUgYXJlIG5vXG4gICAgICAvLyAgICB0ZW1wbGF0ZSBwcm9wIHByZXNlbnRcbiAgICAgIGlmICghcHJvcHMgfHwgIWhhc093bihwcm9wcywga2V5KSkge1xuICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm4oJ0RhdGEgZmllbGQgXCInICsga2V5ICsgJ1wiIGlzIGFscmVhZHkgZGVmaW5lZCAnICsgJ2FzIGEgcHJvcC4gVG8gcHJvdmlkZSBkZWZhdWx0IHZhbHVlIGZvciBhIHByb3AsIHVzZSB0aGUgXCJkZWZhdWx0XCIgJyArICdwcm9wIG9wdGlvbjsgaWYgeW91IHdhbnQgdG8gcGFzcyBwcm9wIHZhbHVlcyB0byBhbiBpbnN0YW50aWF0aW9uICcgKyAnY2FsbCwgdXNlIHRoZSBcInByb3BzRGF0YVwiIG9wdGlvbi4nLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gb2JzZXJ2ZSBkYXRhXG4gICAgb2JzZXJ2ZShkYXRhLCB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogU3dhcCB0aGUgaW5zdGFuY2UncyAkZGF0YS4gQ2FsbGVkIGluICRkYXRhJ3Mgc2V0dGVyLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gbmV3RGF0YVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9zZXREYXRhID0gZnVuY3Rpb24gKG5ld0RhdGEpIHtcbiAgICBuZXdEYXRhID0gbmV3RGF0YSB8fCB7fTtcbiAgICB2YXIgb2xkRGF0YSA9IHRoaXMuX2RhdGE7XG4gICAgdGhpcy5fZGF0YSA9IG5ld0RhdGE7XG4gICAgdmFyIGtleXMsIGtleSwgaTtcbiAgICAvLyB1bnByb3h5IGtleXMgbm90IHByZXNlbnQgaW4gbmV3IGRhdGFcbiAgICBrZXlzID0gT2JqZWN0LmtleXMob2xkRGF0YSk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoIShrZXkgaW4gbmV3RGF0YSkpIHtcbiAgICAgICAgdGhpcy5fdW5wcm94eShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBwcm94eSBrZXlzIG5vdCBhbHJlYWR5IHByb3hpZWQsXG4gICAgLy8gYW5kIHRyaWdnZXIgY2hhbmdlIGZvciBjaGFuZ2VkIHZhbHVlc1xuICAgIGtleXMgPSBPYmplY3Qua2V5cyhuZXdEYXRhKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmICghaGFzT3duKHRoaXMsIGtleSkpIHtcbiAgICAgICAgLy8gbmV3IHByb3BlcnR5XG4gICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XG4gICAgICB9XG4gICAgfVxuICAgIG9sZERhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuICAgIG9ic2VydmUobmV3RGF0YSwgdGhpcyk7XG4gICAgdGhpcy5fZGlnZXN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByb3h5IGEgcHJvcGVydHksIHNvIHRoYXRcbiAgICogdm0ucHJvcCA9PT0gdm0uX2RhdGEucHJvcFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3Byb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG4gICAgICAvLyBuZWVkIHRvIHN0b3JlIHJlZiB0byBzZWxmIGhlcmVcbiAgICAgIC8vIGJlY2F1c2UgdGhlc2UgZ2V0dGVyL3NldHRlcnMgbWlnaHRcbiAgICAgIC8vIGJlIGNhbGxlZCBieSBjaGlsZCBzY29wZXMgdmlhXG4gICAgICAvLyBwcm90b3R5cGUgaW5oZXJpdGFuY2UuXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwga2V5LCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBwcm94eUdldHRlcigpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fZGF0YVtrZXldO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHByb3h5U2V0dGVyKHZhbCkge1xuICAgICAgICAgIHNlbGYuX2RhdGFba2V5XSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBVbnByb3h5IGEgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fdW5wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuICAgICAgZGVsZXRlIHRoaXNba2V5XTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEZvcmNlIHVwZGF0ZSBvbiBldmVyeSB3YXRjaGVyIGluIHNjb3BlLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnVwZGF0ZSh0cnVlKTsgLy8gc2hhbGxvdyB1cGRhdGVzXG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXR1cCBjb21wdXRlZCBwcm9wZXJ0aWVzLiBUaGV5IGFyZSBlc3NlbnRpYWxseVxuICAgKiBzcGVjaWFsIGdldHRlci9zZXR0ZXJzXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG5vb3AoKSB7fVxuICBWdWUucHJvdG90eXBlLl9pbml0Q29tcHV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNvbXB1dGVkID0gdGhpcy4kb3B0aW9ucy5jb21wdXRlZDtcbiAgICBpZiAoY29tcHV0ZWQpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkge1xuICAgICAgICB2YXIgdXNlckRlZiA9IGNvbXB1dGVkW2tleV07XG4gICAgICAgIHZhciBkZWYgPSB7XG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgZGVmLmdldCA9IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLCB0aGlzKTtcbiAgICAgICAgICBkZWYuc2V0ID0gbm9vcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWYuZ2V0ID0gdXNlckRlZi5nZXQgPyB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZSA/IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLmdldCwgdGhpcykgOiBiaW5kKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IG5vb3A7XG4gICAgICAgICAgZGVmLnNldCA9IHVzZXJEZWYuc2V0ID8gYmluZCh1c2VyRGVmLnNldCwgdGhpcykgOiBub29wO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIGRlZik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIG1ha2VDb21wdXRlZEdldHRlcihnZXR0ZXIsIG93bmVyKSB7XG4gICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcihvd25lciwgZ2V0dGVyLCBudWxsLCB7XG4gICAgICBsYXp5OiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyKCkge1xuICAgICAgaWYgKHdhdGNoZXIuZGlydHkpIHtcbiAgICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpO1xuICAgICAgfVxuICAgICAgaWYgKERlcC50YXJnZXQpIHtcbiAgICAgICAgd2F0Y2hlci5kZXBlbmQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3YXRjaGVyLnZhbHVlO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgaW5zdGFuY2UgbWV0aG9kcy4gTWV0aG9kcyBtdXN0IGJlIGJvdW5kIHRvIHRoZVxuICAgKiBpbnN0YW5jZSBzaW5jZSB0aGV5IG1pZ2h0IGJlIHBhc3NlZCBkb3duIGFzIGEgcHJvcCB0b1xuICAgKiBjaGlsZCBjb21wb25lbnRzLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0TWV0aG9kcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWV0aG9kcyA9IHRoaXMuJG9wdGlvbnMubWV0aG9kcztcbiAgICBpZiAobWV0aG9kcykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG1ldGhvZHMpIHtcbiAgICAgICAgdGhpc1trZXldID0gYmluZChtZXRob2RzW2tleV0sIHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBtZXRhIGluZm9ybWF0aW9uIGxpa2UgJGluZGV4LCAka2V5ICYgJHZhbHVlLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0TWV0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWV0YXMgPSB0aGlzLiRvcHRpb25zLl9tZXRhO1xuICAgIGlmIChtZXRhcykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG1ldGFzKSB7XG4gICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsIGtleSwgbWV0YXNba2V5XSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG52YXIgZXZlbnRSRSA9IC9edi1vbjp8XkAvO1xuXG5mdW5jdGlvbiBldmVudHNNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgaW5zdGFuY2UncyBvcHRpb24gZXZlbnRzICYgd2F0Y2hlcnMuXG4gICAqIElmIHRoZSB2YWx1ZSBpcyBhIHN0cmluZywgd2UgcHVsbCBpdCBmcm9tIHRoZVxuICAgKiBpbnN0YW5jZSdzIG1ldGhvZHMgYnkgbmFtZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG4gICAgICByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh0aGlzLCBvcHRpb25zLmVsKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyRvbicsIG9wdGlvbnMuZXZlbnRzKTtcbiAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJHdhdGNoJywgb3B0aW9ucy53YXRjaCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIHYtb24gZXZlbnRzIG9uIGEgY2hpbGQgY29tcG9uZW50XG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHZtLCBlbCkge1xuICAgIHZhciBhdHRycyA9IGVsLmF0dHJpYnV0ZXM7XG4gICAgdmFyIG5hbWUsIHZhbHVlLCBoYW5kbGVyO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICAgIGlmIChldmVudFJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShldmVudFJFLCAnJyk7XG4gICAgICAgIC8vIGZvcmNlIHRoZSBleHByZXNzaW9uIGludG8gYSBzdGF0ZW1lbnQgc28gdGhhdFxuICAgICAgICAvLyBpdCBhbHdheXMgZHluYW1pY2FsbHkgcmVzb2x2ZXMgdGhlIG1ldGhvZCB0byBjYWxsICgjMjY3MClcbiAgICAgICAgLy8ga2luZGEgdWdseSBoYWNrLCBidXQgZG9lcyB0aGUgam9iLlxuICAgICAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuICAgICAgICBpZiAoaXNTaW1wbGVQYXRoKHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlICs9ICcuYXBwbHkodGhpcywgJGFyZ3VtZW50cyknO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZXIgPSAodm0uX3Njb3BlIHx8IHZtLl9jb250ZXh0KS4kZXZhbCh2YWx1ZSwgdHJ1ZSk7XG4gICAgICAgIGhhbmRsZXIuX2Zyb21QYXJlbnQgPSB0cnVlO1xuICAgICAgICB2bS4kb24obmFtZS5yZXBsYWNlKGV2ZW50UkUpLCBoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgY2FsbGJhY2tzIGZvciBvcHRpb24gZXZlbnRzIGFuZCB3YXRjaGVycy5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IGhhc2hcbiAgICovXG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXJDYWxsYmFja3Modm0sIGFjdGlvbiwgaGFzaCkge1xuICAgIGlmICghaGFzaCkgcmV0dXJuO1xuICAgIHZhciBoYW5kbGVycywga2V5LCBpLCBqO1xuICAgIGZvciAoa2V5IGluIGhhc2gpIHtcbiAgICAgIGhhbmRsZXJzID0gaGFzaFtrZXldO1xuICAgICAgaWYgKGlzQXJyYXkoaGFuZGxlcnMpKSB7XG4gICAgICAgIGZvciAoaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVycyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byByZWdpc3RlciBhbiBldmVudC93YXRjaCBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ3xPYmplY3R9IGhhbmRsZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKi9cblxuICBmdW5jdGlvbiByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBoYW5kbGVyO1xuICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2bVthY3Rpb25dKGtleSwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgdmFyIG1ldGhvZHMgPSB2bS4kb3B0aW9ucy5tZXRob2RzO1xuICAgICAgdmFyIG1ldGhvZCA9IG1ldGhvZHMgJiYgbWV0aG9kc1toYW5kbGVyXTtcbiAgICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgdm1bYWN0aW9uXShrZXksIG1ldGhvZCwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Vua25vd24gbWV0aG9kOiBcIicgKyBoYW5kbGVyICsgJ1wiIHdoZW4gJyArICdyZWdpc3RlcmluZyBjYWxsYmFjayBmb3IgJyArIGFjdGlvbiArICc6IFwiJyArIGtleSArICdcIi4nLCB2bSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChoYW5kbGVyICYmIHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIuaGFuZGxlciwgaGFuZGxlcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHJlY3Vyc2l2ZSBhdHRhY2hlZC9kZXRhY2hlZCBjYWxsc1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0RE9NSG9va3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy4kb24oJ2hvb2s6YXR0YWNoZWQnLCBvbkF0dGFjaGVkKTtcbiAgICB0aGlzLiRvbignaG9vazpkZXRhY2hlZCcsIG9uRGV0YWNoZWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGF0dGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cbiAgICovXG5cbiAgZnVuY3Rpb24gb25BdHRhY2hlZCgpIHtcbiAgICBpZiAoIXRoaXMuX2lzQXR0YWNoZWQpIHtcbiAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsQXR0YWNoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0b3IgdG8gY2FsbCBhdHRhY2hlZCBob29rXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICAgKi9cblxuICBmdW5jdGlvbiBjYWxsQXR0YWNoKGNoaWxkKSB7XG4gICAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgZGV0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuICAgKi9cblxuICBmdW5jdGlvbiBvbkRldGFjaGVkKCkge1xuICAgIGlmICh0aGlzLl9pc0F0dGFjaGVkKSB7XG4gICAgICB0aGlzLl9pc0F0dGFjaGVkID0gZmFsc2U7XG4gICAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxEZXRhY2gpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRvciB0byBjYWxsIGRldGFjaGVkIGhvb2tcbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNhbGxEZXRhY2goY2hpbGQpIHtcbiAgICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlciBhbGwgaGFuZGxlcnMgZm9yIGEgaG9va1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gaG9va1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG4gICAgdGhpcy4kZW1pdCgncHJlLWhvb2s6JyArIGhvb2spO1xuICAgIHZhciBoYW5kbGVycyA9IHRoaXMuJG9wdGlvbnNbaG9va107XG4gICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICBoYW5kbGVyc1tpXS5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLiRlbWl0KCdob29rOicgKyBob29rKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gbm9vcCQxKCkge31cblxuLyoqXG4gKiBBIGRpcmVjdGl2ZSBsaW5rcyBhIERPTSBlbGVtZW50IHdpdGggYSBwaWVjZSBvZiBkYXRhLFxuICogd2hpY2ggaXMgdGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIGFuIGV4cHJlc3Npb24uXG4gKiBJdCByZWdpc3RlcnMgYSB3YXRjaGVyIHdpdGggdGhlIGV4cHJlc3Npb24gYW5kIGNhbGxzXG4gKiB0aGUgRE9NIHVwZGF0ZSBmdW5jdGlvbiB3aGVuIGEgY2hhbmdlIGlzIHRyaWdnZXJlZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvclxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gbmFtZVxuICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gZGVmXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBleHByZXNzaW9uXG4gKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ZpbHRlcnNdXG4gKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxpdGVyYWxcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGF0dHJcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGFyZ1xuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gcmF3XG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBbcmVmXVxuICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtpbnRlcnBdXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2hhc09uZVRpbWVdXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgdGhpcy52bSA9IHZtO1xuICB0aGlzLmVsID0gZWw7XG4gIC8vIGNvcHkgZGVzY3JpcHRvciBwcm9wZXJ0aWVzXG4gIHRoaXMuZGVzY3JpcHRvciA9IGRlc2NyaXB0b3I7XG4gIHRoaXMubmFtZSA9IGRlc2NyaXB0b3IubmFtZTtcbiAgdGhpcy5leHByZXNzaW9uID0gZGVzY3JpcHRvci5leHByZXNzaW9uO1xuICB0aGlzLmFyZyA9IGRlc2NyaXB0b3IuYXJnO1xuICB0aGlzLm1vZGlmaWVycyA9IGRlc2NyaXB0b3IubW9kaWZpZXJzO1xuICB0aGlzLmZpbHRlcnMgPSBkZXNjcmlwdG9yLmZpbHRlcnM7XG4gIHRoaXMubGl0ZXJhbCA9IHRoaXMubW9kaWZpZXJzICYmIHRoaXMubW9kaWZpZXJzLmxpdGVyYWw7XG4gIC8vIHByaXZhdGVcbiAgdGhpcy5fbG9ja2VkID0gZmFsc2U7XG4gIHRoaXMuX2JvdW5kID0gZmFsc2U7XG4gIHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG4gIC8vIGxpbmsgY29udGV4dFxuICB0aGlzLl9ob3N0ID0gaG9zdDtcbiAgdGhpcy5fc2NvcGUgPSBzY29wZTtcbiAgdGhpcy5fZnJhZyA9IGZyYWc7XG4gIC8vIHN0b3JlIGRpcmVjdGl2ZXMgb24gbm9kZSBpbiBkZXYgbW9kZVxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG4gICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgPSB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyB8fCBbXTtcbiAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy5wdXNoKHRoaXMpO1xuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgZGlyZWN0aXZlLCBtaXhpbiBkZWZpbml0aW9uIHByb3BlcnRpZXMsXG4gKiBzZXR1cCB0aGUgd2F0Y2hlciwgY2FsbCBkZWZpbml0aW9uIGJpbmQoKSBhbmQgdXBkYXRlKClcbiAqIGlmIHByZXNlbnQuXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fYmluZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG5hbWUgPSB0aGlzLm5hbWU7XG4gIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuXG4gIC8vIHJlbW92ZSBhdHRyaWJ1dGVcbiAgaWYgKChuYW1lICE9PSAnY2xvYWsnIHx8IHRoaXMudm0uX2lzQ29tcGlsZWQpICYmIHRoaXMuZWwgJiYgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUpIHtcbiAgICB2YXIgYXR0ciA9IGRlc2NyaXB0b3IuYXR0ciB8fCAndi0nICsgbmFtZTtcbiAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgfVxuXG4gIC8vIGNvcHkgZGVmIHByb3BlcnRpZXNcbiAgdmFyIGRlZiA9IGRlc2NyaXB0b3IuZGVmO1xuICBpZiAodHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMudXBkYXRlID0gZGVmO1xuICB9IGVsc2Uge1xuICAgIGV4dGVuZCh0aGlzLCBkZWYpO1xuICB9XG5cbiAgLy8gc2V0dXAgZGlyZWN0aXZlIHBhcmFtc1xuICB0aGlzLl9zZXR1cFBhcmFtcygpO1xuXG4gIC8vIGluaXRpYWwgYmluZFxuICBpZiAodGhpcy5iaW5kKSB7XG4gICAgdGhpcy5iaW5kKCk7XG4gIH1cbiAgdGhpcy5fYm91bmQgPSB0cnVlO1xuXG4gIGlmICh0aGlzLmxpdGVyYWwpIHtcbiAgICB0aGlzLnVwZGF0ZSAmJiB0aGlzLnVwZGF0ZShkZXNjcmlwdG9yLnJhdyk7XG4gIH0gZWxzZSBpZiAoKHRoaXMuZXhwcmVzc2lvbiB8fCB0aGlzLm1vZGlmaWVycykgJiYgKHRoaXMudXBkYXRlIHx8IHRoaXMudHdvV2F5KSAmJiAhdGhpcy5fY2hlY2tTdGF0ZW1lbnQoKSkge1xuICAgIC8vIHdyYXBwZWQgdXBkYXRlciBmb3IgY29udGV4dFxuICAgIHZhciBkaXIgPSB0aGlzO1xuICAgIGlmICh0aGlzLnVwZGF0ZSkge1xuICAgICAgdGhpcy5fdXBkYXRlID0gZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG4gICAgICAgIGlmICghZGlyLl9sb2NrZWQpIHtcbiAgICAgICAgICBkaXIudXBkYXRlKHZhbCwgb2xkVmFsKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdXBkYXRlID0gbm9vcCQxO1xuICAgIH1cbiAgICB2YXIgcHJlUHJvY2VzcyA9IHRoaXMuX3ByZVByb2Nlc3MgPyBiaW5kKHRoaXMuX3ByZVByb2Nlc3MsIHRoaXMpIDogbnVsbDtcbiAgICB2YXIgcG9zdFByb2Nlc3MgPSB0aGlzLl9wb3N0UHJvY2VzcyA/IGJpbmQodGhpcy5fcG9zdFByb2Nlc3MsIHRoaXMpIDogbnVsbDtcbiAgICB2YXIgd2F0Y2hlciA9IHRoaXMuX3dhdGNoZXIgPSBuZXcgV2F0Y2hlcih0aGlzLnZtLCB0aGlzLmV4cHJlc3Npb24sIHRoaXMuX3VwZGF0ZSwgLy8gY2FsbGJhY2tcbiAgICB7XG4gICAgICBmaWx0ZXJzOiB0aGlzLmZpbHRlcnMsXG4gICAgICB0d29XYXk6IHRoaXMudHdvV2F5LFxuICAgICAgZGVlcDogdGhpcy5kZWVwLFxuICAgICAgcHJlUHJvY2VzczogcHJlUHJvY2VzcyxcbiAgICAgIHBvc3RQcm9jZXNzOiBwb3N0UHJvY2VzcyxcbiAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuICAgIH0pO1xuICAgIC8vIHYtbW9kZWwgd2l0aCBpbml0YWwgaW5saW5lIHZhbHVlIG5lZWQgdG8gc3luYyBiYWNrIHRvXG4gICAgLy8gbW9kZWwgaW5zdGVhZCBvZiB1cGRhdGUgdG8gRE9NIG9uIGluaXQuIFRoZXkgd291bGRcbiAgICAvLyBzZXQgdGhlIGFmdGVyQmluZCBob29rIHRvIGluZGljYXRlIHRoYXQuXG4gICAgaWYgKHRoaXMuYWZ0ZXJCaW5kKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy51cGRhdGUpIHtcbiAgICAgIHRoaXMudXBkYXRlKHdhdGNoZXIudmFsdWUpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTZXR1cCBhbGwgcGFyYW0gYXR0cmlidXRlcywgZS5nLiB0cmFjay1ieSxcbiAqIHRyYW5zaXRpb24tbW9kZSwgZXRjLi4uXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5wYXJhbXMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHBhcmFtcyA9IHRoaXMucGFyYW1zO1xuICAvLyBzd2FwIHRoZSBwYXJhbXMgYXJyYXkgd2l0aCBhIGZyZXNoIG9iamVjdC5cbiAgdGhpcy5wYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgaSA9IHBhcmFtcy5sZW5ndGg7XG4gIHZhciBrZXksIHZhbCwgbWFwcGVkS2V5O1xuICB3aGlsZSAoaS0tKSB7XG4gICAga2V5ID0gaHlwaGVuYXRlKHBhcmFtc1tpXSk7XG4gICAgbWFwcGVkS2V5ID0gY2FtZWxpemUoa2V5KTtcbiAgICB2YWwgPSBnZXRCaW5kQXR0cih0aGlzLmVsLCBrZXkpO1xuICAgIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgLy8gZHluYW1pY1xuICAgICAgdGhpcy5fc2V0dXBQYXJhbVdhdGNoZXIobWFwcGVkS2V5LCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzdGF0aWNcbiAgICAgIHZhbCA9IGdldEF0dHIodGhpcy5lbCwga2V5KTtcbiAgICAgIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhcmFtc1ttYXBwZWRLZXldID0gdmFsID09PSAnJyA/IHRydWUgOiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFNldHVwIGEgd2F0Y2hlciBmb3IgYSBkeW5hbWljIHBhcmFtLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHByZXNzaW9uXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbVdhdGNoZXIgPSBmdW5jdGlvbiAoa2V5LCBleHByZXNzaW9uKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICB2YXIgdW53YXRjaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kd2F0Y2goZXhwcmVzc2lvbiwgZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG4gICAgc2VsZi5wYXJhbXNba2V5XSA9IHZhbDtcbiAgICAvLyBzaW5jZSB3ZSBhcmUgaW4gaW1tZWRpYXRlIG1vZGUsXG4gICAgLy8gb25seSBjYWxsIHRoZSBwYXJhbSBjaGFuZ2UgY2FsbGJhY2tzIGlmIHRoaXMgaXMgbm90IHRoZSBmaXJzdCB1cGRhdGUuXG4gICAgaWYgKGNhbGxlZCkge1xuICAgICAgdmFyIGNiID0gc2VsZi5wYXJhbVdhdGNoZXJzICYmIHNlbGYucGFyYW1XYXRjaGVyc1trZXldO1xuICAgICAgaWYgKGNiKSB7XG4gICAgICAgIGNiLmNhbGwoc2VsZiwgdmFsLCBvbGRWYWwpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsZWQgPSB0cnVlO1xuICAgIH1cbiAgfSwge1xuICAgIGltbWVkaWF0ZTogdHJ1ZSxcbiAgICB1c2VyOiBmYWxzZVxuICB9KTsodGhpcy5fcGFyYW1VbndhdGNoRm5zIHx8ICh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgPSBbXSkpLnB1c2godW53YXRjaCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBkaXJlY3RpdmUgaXMgYSBmdW5jdGlvbiBjYWxsZXJcbiAqIGFuZCBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIGNhbGxhYmxlIG9uZS4gSWYgYm90aCB0cnVlLFxuICogd2Ugd3JhcCB1cCB0aGUgZXhwcmVzc2lvbiBhbmQgdXNlIGl0IGFzIHRoZSBldmVudFxuICogaGFuZGxlci5cbiAqXG4gKiBlLmcuIG9uLWNsaWNrPVwiYSsrXCJcbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX2NoZWNrU3RhdGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZXhwcmVzc2lvbiA9IHRoaXMuZXhwcmVzc2lvbjtcbiAgaWYgKGV4cHJlc3Npb24gJiYgdGhpcy5hY2NlcHRTdGF0ZW1lbnQgJiYgIWlzU2ltcGxlUGF0aChleHByZXNzaW9uKSkge1xuICAgIHZhciBmbiA9IHBhcnNlRXhwcmVzc2lvbihleHByZXNzaW9uKS5nZXQ7XG4gICAgdmFyIHNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bTtcbiAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoZSkge1xuICAgICAgc2NvcGUuJGV2ZW50ID0gZTtcbiAgICAgIGZuLmNhbGwoc2NvcGUsIHNjb3BlKTtcbiAgICAgIHNjb3BlLiRldmVudCA9IG51bGw7XG4gICAgfTtcbiAgICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgICBoYW5kbGVyID0gc2NvcGUuX2FwcGx5RmlsdGVycyhoYW5kbGVyLCBudWxsLCB0aGlzLmZpbHRlcnMpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZShoYW5kbGVyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuLyoqXG4gKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuICogVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGluIHR3by13YXkgZGlyZWN0aXZlc1xuICogZS5nLiB2LW1vZGVsLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwdWJsaWNcbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAodGhpcy50d29XYXkpIHtcbiAgICB0aGlzLl93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl93YXRjaGVyLnNldCh2YWx1ZSk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHdhcm4oJ0RpcmVjdGl2ZS5zZXQoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSB0d29XYXknICsgJ2RpcmVjdGl2ZXMuJyk7XG4gIH1cbn07XG5cbi8qKlxuICogRXhlY3V0ZSBhIGZ1bmN0aW9uIHdoaWxlIHByZXZlbnRpbmcgdGhhdCBmdW5jdGlvbiBmcm9tXG4gKiB0cmlnZ2VyaW5nIHVwZGF0ZXMgb24gdGhpcyBkaXJlY3RpdmUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl93aXRoTG9jayA9IGZ1bmN0aW9uIChmbikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHNlbGYuX2xvY2tlZCA9IHRydWU7XG4gIGZuLmNhbGwoc2VsZik7XG4gIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLl9sb2NrZWQgPSBmYWxzZTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGF0dGFjaGVzIGEgRE9NIGV2ZW50IGxpc3RlbmVyXG4gKiB0byB0aGUgZGlyZWN0aXZlIGVsZW1lbnQgYW5kIGF1dG9tZXRpY2FsbHkgdGVhcnMgaXQgZG93blxuICogZHVyaW5nIHVuYmluZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSkge1xuICBvbih0aGlzLmVsLCBldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7KHRoaXMuX2xpc3RlbmVycyB8fCAodGhpcy5fbGlzdGVuZXJzID0gW10pKS5wdXNoKFtldmVudCwgaGFuZGxlcl0pO1xufTtcblxuLyoqXG4gKiBUZWFyZG93biB0aGUgd2F0Y2hlciBhbmQgY2FsbCB1bmJpbmQuXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fdGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLl9ib3VuZCkge1xuICAgIHRoaXMuX2JvdW5kID0gZmFsc2U7XG4gICAgaWYgKHRoaXMudW5iaW5kKSB7XG4gICAgICB0aGlzLnVuYmluZCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fd2F0Y2hlcikge1xuICAgICAgdGhpcy5fd2F0Y2hlci50ZWFyZG93bigpO1xuICAgIH1cbiAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuICAgIHZhciBpO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBvZmYodGhpcy5lbCwgbGlzdGVuZXJzW2ldWzBdLCBsaXN0ZW5lcnNbaV1bMV0pO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgdW53YXRjaEZucyA9IHRoaXMuX3BhcmFtVW53YXRjaEZucztcbiAgICBpZiAodW53YXRjaEZucykge1xuICAgICAgaSA9IHVud2F0Y2hGbnMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB1bndhdGNoRm5zW2ldKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcbiAgICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLiRyZW1vdmUodGhpcyk7XG4gICAgfVxuICAgIHRoaXMudm0gPSB0aGlzLmVsID0gdGhpcy5fd2F0Y2hlciA9IHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGxpZmVjeWNsZU1peGluIChWdWUpIHtcbiAgLyoqXG4gICAqIFVwZGF0ZSB2LXJlZiBmb3IgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl91cGRhdGVSZWYgPSBmdW5jdGlvbiAocmVtb3ZlKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMuJG9wdGlvbnMuX3JlZjtcbiAgICBpZiAocmVmKSB7XG4gICAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLl9jb250ZXh0KS4kcmVmcztcbiAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgaWYgKHJlZnNbcmVmXSA9PT0gdGhpcykge1xuICAgICAgICAgIHJlZnNbcmVmXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZnNbcmVmXSA9IHRoaXM7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUcmFuc2NsdWRlLCBjb21waWxlIGFuZCBsaW5rIGVsZW1lbnQuXG4gICAqXG4gICAqIElmIGEgcHJlLWNvbXBpbGVkIGxpbmtlciBpcyBhdmFpbGFibGUsIHRoYXQgbWVhbnMgdGhlXG4gICAqIHBhc3NlZCBpbiBlbGVtZW50IHdpbGwgYmUgcHJlLXRyYW5zY2x1ZGVkIGFuZCBjb21waWxlZFxuICAgKiBhcyB3ZWxsIC0gYWxsIHdlIG5lZWQgdG8gZG8gaXMgdG8gY2FsbCB0aGUgbGlua2VyLlxuICAgKlxuICAgKiBPdGhlcndpc2Ugd2UgbmVlZCB0byBjYWxsIHRyYW5zY2x1ZGUvY29tcGlsZS9saW5rIGhlcmUuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fY29tcGlsZSA9IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblxuICAgIC8vIHRyYW5zY2x1ZGUgYW5kIGluaXQgZWxlbWVudFxuICAgIC8vIHRyYW5zY2x1ZGUgY2FuIHBvdGVudGlhbGx5IHJlcGxhY2Ugb3JpZ2luYWxcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIGtlZXAgcmVmZXJlbmNlOyB0aGlzIHN0ZXAgYWxzbyBpbmplY3RzXG4gICAgLy8gdGhlIHRlbXBsYXRlIGFuZCBjYWNoZXMgdGhlIG9yaWdpbmFsIGF0dHJpYnV0ZXNcbiAgICAvLyBvbiB0aGUgY29udGFpbmVyIG5vZGUgYW5kIHJlcGxhY2VyIG5vZGUuXG4gICAgdmFyIG9yaWdpbmFsID0gZWw7XG4gICAgZWwgPSB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKTtcbiAgICB0aGlzLl9pbml0RWxlbWVudChlbCk7XG5cbiAgICAvLyBoYW5kbGUgdi1wcmUgb24gcm9vdCBub2RlICgjMjAyNilcbiAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyByb290IGlzIGFsd2F5cyBjb21waWxlZCBwZXItaW5zdGFuY2UsIGJlY2F1c2VcbiAgICAvLyBjb250YWluZXIgYXR0cnMgYW5kIHByb3BzIGNhbiBiZSBkaWZmZXJlbnQgZXZlcnkgdGltZS5cbiAgICB2YXIgY29udGV4dE9wdGlvbnMgPSB0aGlzLl9jb250ZXh0ICYmIHRoaXMuX2NvbnRleHQuJG9wdGlvbnM7XG4gICAgdmFyIHJvb3RMaW5rZXIgPSBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpO1xuXG4gICAgLy8gcmVzb2x2ZSBzbG90IGRpc3RyaWJ1dGlvblxuICAgIHJlc29sdmVTbG90cyh0aGlzLCBvcHRpb25zLl9jb250ZW50KTtcblxuICAgIC8vIGNvbXBpbGUgYW5kIGxpbmsgdGhlIHJlc3RcbiAgICB2YXIgY29udGVudExpbmtGbjtcbiAgICB2YXIgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgLy8gY29tcG9uZW50IGNvbXBpbGF0aW9uIGNhbiBiZSBjYWNoZWRcbiAgICAvLyBhcyBsb25nIGFzIGl0J3Mgbm90IHVzaW5nIGlubGluZS10ZW1wbGF0ZVxuICAgIGlmIChvcHRpb25zLl9saW5rZXJDYWNoYWJsZSkge1xuICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyO1xuICAgICAgaWYgKCFjb250ZW50TGlua0ZuKSB7XG4gICAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlciA9IGNvbXBpbGUoZWwsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGxpbmsgcGhhc2VcbiAgICAvLyBtYWtlIHN1cmUgdG8gbGluayByb290IHdpdGggcHJvcCBzY29wZSFcbiAgICB2YXIgcm9vdFVubGlua0ZuID0gcm9vdExpbmtlcih0aGlzLCBlbCwgdGhpcy5fc2NvcGUpO1xuICAgIHZhciBjb250ZW50VW5saW5rRm4gPSBjb250ZW50TGlua0ZuID8gY29udGVudExpbmtGbih0aGlzLCBlbCkgOiBjb21waWxlKGVsLCBvcHRpb25zKSh0aGlzLCBlbCk7XG5cbiAgICAvLyByZWdpc3RlciBjb21wb3NpdGUgdW5saW5rIGZ1bmN0aW9uXG4gICAgLy8gdG8gYmUgY2FsbGVkIGR1cmluZyBpbnN0YW5jZSBkZXN0cnVjdGlvblxuICAgIHRoaXMuX3VubGlua0ZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgcm9vdFVubGlua0ZuKCk7XG4gICAgICAvLyBwYXNzaW5nIGRlc3Ryb3lpbmc6IHRydWUgdG8gYXZvaWQgc2VhcmNoaW5nIGFuZFxuICAgICAgLy8gc3BsaWNpbmcgdGhlIGRpcmVjdGl2ZXNcbiAgICAgIGNvbnRlbnRVbmxpbmtGbih0cnVlKTtcbiAgICB9O1xuXG4gICAgLy8gZmluYWxseSByZXBsYWNlIG9yaWdpbmFsXG4gICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuICAgICAgcmVwbGFjZShvcmlnaW5hbCwgZWwpO1xuICAgIH1cblxuICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0cnVlO1xuICAgIHRoaXMuX2NhbGxIb29rKCdjb21waWxlZCcpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGluc3RhbmNlIGVsZW1lbnQuIENhbGxlZCBpbiB0aGUgcHVibGljXG4gICAqICRtb3VudCgpIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0RWxlbWVudCA9IGZ1bmN0aW9uIChlbCkge1xuICAgIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuICAgICAgdGhpcy5faXNGcmFnbWVudCA9IHRydWU7XG4gICAgICB0aGlzLiRlbCA9IHRoaXMuX2ZyYWdtZW50U3RhcnQgPSBlbC5maXJzdENoaWxkO1xuICAgICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBlbC5sYXN0Q2hpbGQ7XG4gICAgICAvLyBzZXQgcGVyc2lzdGVkIHRleHQgYW5jaG9ycyB0byBlbXB0eVxuICAgICAgaWYgKHRoaXMuX2ZyYWdtZW50U3RhcnQubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgICAgdGhpcy5fZnJhZ21lbnRTdGFydC5kYXRhID0gdGhpcy5fZnJhZ21lbnRFbmQuZGF0YSA9ICcnO1xuICAgICAgfVxuICAgICAgdGhpcy5fZnJhZ21lbnQgPSBlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kZWwgPSBlbDtcbiAgICB9XG4gICAgdGhpcy4kZWwuX192dWVfXyA9IHRoaXM7XG4gICAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZUNvbXBpbGUnKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFuZCBiaW5kIGEgZGlyZWN0aXZlIHRvIGFuIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yIC0gcGFyc2VkIGRpcmVjdGl2ZSBkZXNjcmlwdG9yXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAgIC0gdGFyZ2V0IG5vZGVcbiAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2JpbmREaXIgPSBmdW5jdGlvbiAoZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICB0aGlzLl9kaXJlY3RpdmVzLnB1c2gobmV3IERpcmVjdGl2ZShkZXNjcmlwdG9yLCB0aGlzLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUZWFyZG93biBhbiBpbnN0YW5jZSwgdW5vYnNlcnZlcyB0aGUgZGF0YSwgdW5iaW5kIGFsbCB0aGVcbiAgICogZGlyZWN0aXZlcywgdHVybiBvZmYgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMsIGV0Yy5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmUgLSB3aGV0aGVyIHRvIHJlbW92ZSB0aGUgRE9NIG5vZGUuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwIC0gaWYgdHJ1ZSwgZGVmZXIgY2xlYW51cCB0b1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGNhbGxlZCBsYXRlclxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG4gICAgaWYgKHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQpIHtcbiAgICAgIGlmICghZGVmZXJDbGVhbnVwKSB7XG4gICAgICAgIHRoaXMuX2NsZWFudXAoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZGVzdHJveVJlYWR5O1xuICAgIHZhciBwZW5kaW5nUmVtb3ZhbDtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvLyBDbGVhbnVwIHNob3VsZCBiZSBjYWxsZWQgZWl0aGVyIHN5bmNocm9ub3VzbHkgb3IgYXN5bmNocm9ub3lzbHkgYXNcbiAgICAvLyBjYWxsYmFjayBvZiB0aGlzLiRyZW1vdmUoKSwgb3IgaWYgcmVtb3ZlIGFuZCBkZWZlckNsZWFudXAgYXJlIGZhbHNlLlxuICAgIC8vIEluIGFueSBjYXNlIGl0IHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgYWxsIG90aGVyIHJlbW92aW5nLCB1bmJpbmRpbmcgYW5kXG4gICAgLy8gdHVybmluZyBvZiBpcyBkb25lXG4gICAgdmFyIGNsZWFudXBJZlBvc3NpYmxlID0gZnVuY3Rpb24gY2xlYW51cElmUG9zc2libGUoKSB7XG4gICAgICBpZiAoZGVzdHJveVJlYWR5ICYmICFwZW5kaW5nUmVtb3ZhbCAmJiAhZGVmZXJDbGVhbnVwKSB7XG4gICAgICAgIHNlbGYuX2NsZWFudXAoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gcmVtb3ZlIERPTSBlbGVtZW50XG4gICAgaWYgKHJlbW92ZSAmJiB0aGlzLiRlbCkge1xuICAgICAgcGVuZGluZ1JlbW92YWwgPSB0cnVlO1xuICAgICAgdGhpcy4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGVuZGluZ1JlbW92YWwgPSBmYWxzZTtcbiAgICAgICAgY2xlYW51cElmUG9zc2libGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVEZXN0cm95Jyk7XG4gICAgdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgdmFyIGk7XG4gICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBwYXJlbnQuIG9ubHkgbmVjZXNzYXJ5XG4gICAgLy8gaWYgcGFyZW50IGlzIG5vdCBiZWluZyBkZXN0cm95ZWQgYXMgd2VsbC5cbiAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuICAgIGlmIChwYXJlbnQgJiYgIXBhcmVudC5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgICAgcGFyZW50LiRjaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuICAgICAgLy8gdW5yZWdpc3RlciByZWYgKHJlbW92ZTogdHJ1ZSlcbiAgICAgIHRoaXMuX3VwZGF0ZVJlZih0cnVlKTtcbiAgICB9XG4gICAgLy8gZGVzdHJveSBhbGwgY2hpbGRyZW4uXG4gICAgaSA9IHRoaXMuJGNoaWxkcmVuLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0aGlzLiRjaGlsZHJlbltpXS4kZGVzdHJveSgpO1xuICAgIH1cbiAgICAvLyB0ZWFyZG93biBwcm9wc1xuICAgIGlmICh0aGlzLl9wcm9wc1VubGlua0ZuKSB7XG4gICAgICB0aGlzLl9wcm9wc1VubGlua0ZuKCk7XG4gICAgfVxuICAgIC8vIHRlYXJkb3duIGFsbCBkaXJlY3RpdmVzLiB0aGlzIGFsc28gdGVhcnNkb3duIGFsbFxuICAgIC8vIGRpcmVjdGl2ZS1vd25lZCB3YXRjaGVycy5cbiAgICBpZiAodGhpcy5fdW5saW5rRm4pIHtcbiAgICAgIHRoaXMuX3VubGlua0ZuKCk7XG4gICAgfVxuICAgIGkgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKTtcbiAgICB9XG4gICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSB0byBzZWxmIG9uICRlbFxuICAgIGlmICh0aGlzLiRlbCkge1xuICAgICAgdGhpcy4kZWwuX192dWVfXyA9IG51bGw7XG4gICAgfVxuXG4gICAgZGVzdHJveVJlYWR5ID0gdHJ1ZTtcbiAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCB0byBlbnN1cmUgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICAgKiBUaGlzIGlzIGNhbGxlZCBhZnRlciB0aGUgbGVhdmUgdHJhbnNpdGlvbiBpZiB0aGVyZVxuICAgKiBpcyBhbnkuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2lzRGVzdHJveWVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gb3duZXIgZnJhZ21lbnRcbiAgICAvLyBkbyBpdCBpbiBjbGVhbnVwIHNvIHRoYXQgd2UgY2FuIGNhbGwgJGRlc3Ryb3kgd2l0aFxuICAgIC8vIGRlZmVyIHJpZ2h0IHdoZW4gYSBmcmFnbWVudCBpcyBhYm91dCB0byBiZSByZW1vdmVkLlxuICAgIGlmICh0aGlzLl9mcmFnKSB7XG4gICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG4gICAgfVxuICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iXG4gICAgLy8gZnJvemVuIG9iamVjdCBtYXkgbm90IGhhdmUgb2JzZXJ2ZXIuXG4gICAgaWYgKHRoaXMuX2RhdGEgJiYgdGhpcy5fZGF0YS5fX29iX18pIHtcbiAgICAgIHRoaXMuX2RhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuICAgIH1cbiAgICAvLyBDbGVhbiB1cCByZWZlcmVuY2VzIHRvIHByaXZhdGUgcHJvcGVydGllcyBhbmQgb3RoZXJcbiAgICAvLyBpbnN0YW5jZXMuIHByZXNlcnZlIHJlZmVyZW5jZSB0byBfZGF0YSBzbyB0aGF0IHByb3h5XG4gICAgLy8gYWNjZXNzb3JzIHN0aWxsIHdvcmsuIFRoZSBvbmx5IHBvdGVudGlhbCBzaWRlIGVmZmVjdFxuICAgIC8vIGhlcmUgaXMgdGhhdCBtdXRhdGluZyB0aGUgaW5zdGFuY2UgYWZ0ZXIgaXQncyBkZXN0cm95ZWRcbiAgICAvLyBtYXkgYWZmZWN0IHRoZSBzdGF0ZSBvZiBvdGhlciBjb21wb25lbnRzIHRoYXQgYXJlIHN0aWxsXG4gICAgLy8gb2JzZXJ2aW5nIHRoZSBzYW1lIG9iamVjdCwgYnV0IHRoYXQgc2VlbXMgdG8gYmUgYVxuICAgIC8vIHJlYXNvbmFibGUgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSB1c2VyIHJhdGhlciB0aGFuXG4gICAgLy8gYWx3YXlzIHRocm93aW5nIGFuIGVycm9yIG9uIHRoZW0uXG4gICAgdGhpcy4kZWwgPSB0aGlzLiRwYXJlbnQgPSB0aGlzLiRyb290ID0gdGhpcy4kY2hpbGRyZW4gPSB0aGlzLl93YXRjaGVycyA9IHRoaXMuX2NvbnRleHQgPSB0aGlzLl9zY29wZSA9IHRoaXMuX2RpcmVjdGl2ZXMgPSBudWxsO1xuICAgIC8vIGNhbGwgdGhlIGxhc3QgaG9vay4uLlxuICAgIHRoaXMuX2lzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsSG9vaygnZGVzdHJveWVkJyk7XG4gICAgLy8gdHVybiBvZmYgYWxsIGluc3RhbmNlIGxpc3RlbmVycy5cbiAgICB0aGlzLiRvZmYoKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gbWlzY01peGluIChWdWUpIHtcbiAgLyoqXG4gICAqIEFwcGx5IGEgbGlzdCBvZiBmaWx0ZXIgKGRlc2NyaXB0b3JzKSB0byBhIHZhbHVlLlxuICAgKiBVc2luZyBwbGFpbiBmb3IgbG9vcHMgaGVyZSBiZWNhdXNlIHRoaXMgd2lsbCBiZSBjYWxsZWQgaW5cbiAgICogdGhlIGdldHRlciBvZiBhbnkgd2F0Y2hlciB3aXRoIGZpbHRlcnMgc28gaXQgaXMgdmVyeVxuICAgKiBwZXJmb3JtYW5jZSBzZW5zaXRpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHsqfSBbb2xkVmFsdWVdXG4gICAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcnNcbiAgICogQHBhcmFtIHtCb29sZWFufSB3cml0ZVxuICAgKiBAcmV0dXJuIHsqfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9hcHBseUZpbHRlcnMgPSBmdW5jdGlvbiAodmFsdWUsIG9sZFZhbHVlLCBmaWx0ZXJzLCB3cml0ZSkge1xuICAgIHZhciBmaWx0ZXIsIGZuLCBhcmdzLCBhcmcsIG9mZnNldCwgaSwgbCwgaiwgaztcbiAgICBmb3IgKGkgPSAwLCBsID0gZmlsdGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZpbHRlciA9IGZpbHRlcnNbd3JpdGUgPyBsIC0gaSAtIDEgOiBpXTtcbiAgICAgIGZuID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyLm5hbWUsIHRydWUpO1xuICAgICAgaWYgKCFmbikgY29udGludWU7XG4gICAgICBmbiA9IHdyaXRlID8gZm4ud3JpdGUgOiBmbi5yZWFkIHx8IGZuO1xuICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgY29udGludWU7XG4gICAgICBhcmdzID0gd3JpdGUgPyBbdmFsdWUsIG9sZFZhbHVlXSA6IFt2YWx1ZV07XG4gICAgICBvZmZzZXQgPSB3cml0ZSA/IDIgOiAxO1xuICAgICAgaWYgKGZpbHRlci5hcmdzKSB7XG4gICAgICAgIGZvciAoaiA9IDAsIGsgPSBmaWx0ZXIuYXJncy5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgICBhcmcgPSBmaWx0ZXIuYXJnc1tqXTtcbiAgICAgICAgICBhcmdzW2ogKyBvZmZzZXRdID0gYXJnLmR5bmFtaWMgPyB0aGlzLiRnZXQoYXJnLnZhbHVlKSA6IGFyZy52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFsdWUgPSBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXNvbHZlIGEgY29tcG9uZW50LCBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgY29tcG9uZW50XG4gICAqIGlzIGRlZmluZWQgbm9ybWFsbHkgb3IgdXNpbmcgYW4gYXN5bmMgZmFjdG9yeSBmdW5jdGlvbi5cbiAgICogUmVzb2x2ZXMgc3luY2hyb25vdXNseSBpZiBhbHJlYWR5IHJlc29sdmVkLCBvdGhlcndpc2VcbiAgICogcmVzb2x2ZXMgYXN5bmNocm9ub3VzbHkgYW5kIGNhY2hlcyB0aGUgcmVzb2x2ZWRcbiAgICogY29uc3RydWN0b3Igb24gdGhlIGZhY3RvcnkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB2YWx1ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBjYikge1xuICAgIHZhciBmYWN0b3J5O1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGZhY3RvcnkgPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmFjdG9yeSA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnY29tcG9uZW50cycsIHZhbHVlLCB0cnVlKTtcbiAgICB9XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFmYWN0b3J5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5XG4gICAgaWYgKCFmYWN0b3J5Lm9wdGlvbnMpIHtcbiAgICAgIGlmIChmYWN0b3J5LnJlc29sdmVkKSB7XG4gICAgICAgIC8vIGNhY2hlZFxuICAgICAgICBjYihmYWN0b3J5LnJlc29sdmVkKTtcbiAgICAgIH0gZWxzZSBpZiAoZmFjdG9yeS5yZXF1ZXN0ZWQpIHtcbiAgICAgICAgLy8gcG9vbCBjYWxsYmFja3NcbiAgICAgICAgZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmFjdG9yeS5yZXF1ZXN0ZWQgPSB0cnVlO1xuICAgICAgICB2YXIgY2JzID0gZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzID0gW2NiXTtcbiAgICAgICAgZmFjdG9yeS5jYWxsKHRoaXMsIGZ1bmN0aW9uIHJlc29sdmUocmVzKSB7XG4gICAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QocmVzKSkge1xuICAgICAgICAgICAgcmVzID0gVnVlLmV4dGVuZChyZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjYWNoZSByZXNvbHZlZFxuICAgICAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSByZXM7XG4gICAgICAgICAgLy8gaW52b2tlIGNhbGxiYWNrc1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgY2JzW2ldKHJlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQnICsgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyAnOiAnICsgdmFsdWUgOiAnJykgKyAnLiAnICsgKHJlYXNvbiA/ICdcXG5SZWFzb246ICcgKyByZWFzb24gOiAnJykpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9ybWFsIGNvbXBvbmVudFxuICAgICAgY2IoZmFjdG9yeSk7XG4gICAgfVxuICB9O1xufVxuXG52YXIgZmlsdGVyUkUkMSA9IC9bXnxdXFx8W158XS87XG5cbmZ1bmN0aW9uIGRhdGFBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZ2V0ID0gZnVuY3Rpb24gKGV4cCwgYXNTdGF0ZW1lbnQpIHtcbiAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCk7XG4gICAgaWYgKHJlcykge1xuICAgICAgaWYgKGFzU3RhdGVtZW50KSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0YXRlbWVudEhhbmRsZXIoKSB7XG4gICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgICAgICAgIHZhciByZXN1bHQgPSByZXMuZ2V0LmNhbGwoc2VsZiwgc2VsZik7XG4gICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gbnVsbDtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gcmVzLmdldC5jYWxsKHRoaXMsIHRoaXMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cbiAgICogVGhlIGV4cHJlc3Npb24gbXVzdCBiZSBhIHZhbGlkIGxlZnQtaGFuZFxuICAgKiBleHByZXNzaW9uIGluIGFuIGFzc2lnbm1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAgICogQHBhcmFtIHsqfSB2YWxcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kc2V0ID0gZnVuY3Rpb24gKGV4cCwgdmFsKSB7XG4gICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHAsIHRydWUpO1xuICAgIGlmIChyZXMgJiYgcmVzLnNldCkge1xuICAgICAgcmVzLnNldC5jYWxsKHRoaXMsIHRoaXMsIHZhbCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBwcm9wZXJ0eSBvbiB0aGUgVk1cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRkZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgZGVsKHRoaXMuX2RhdGEsIGtleSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdhdGNoIGFuIGV4cHJlc3Npb24sIHRyaWdnZXIgY2FsbGJhY2sgd2hlbiBpdHNcbiAgICogdmFsdWUgY2hhbmdlcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gaW1tZWRpYXRlXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHVud2F0Y2hGblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiR3YXRjaCA9IGZ1bmN0aW9uIChleHBPckZuLCBjYiwgb3B0aW9ucykge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdmFyIHBhcnNlZDtcbiAgICBpZiAodHlwZW9mIGV4cE9yRm4gPT09ICdzdHJpbmcnKSB7XG4gICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZShleHBPckZuKTtcbiAgICAgIGV4cE9yRm4gPSBwYXJzZWQuZXhwcmVzc2lvbjtcbiAgICB9XG4gICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIHtcbiAgICAgIGRlZXA6IG9wdGlvbnMgJiYgb3B0aW9ucy5kZWVwLFxuICAgICAgc3luYzogb3B0aW9ucyAmJiBvcHRpb25zLnN5bmMsXG4gICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG4gICAgICB1c2VyOiAhb3B0aW9ucyB8fCBvcHRpb25zLnVzZXIgIT09IGZhbHNlXG4gICAgfSk7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbW1lZGlhdGUpIHtcbiAgICAgIGNiLmNhbGwodm0sIHdhdGNoZXIudmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gdW53YXRjaEZuKCkge1xuICAgICAgd2F0Y2hlci50ZWFyZG93bigpO1xuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIEV2YWx1YXRlIGEgdGV4dCBkaXJlY3RpdmUsIGluY2x1ZGluZyBmaWx0ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRldmFsID0gZnVuY3Rpb24gKHRleHQsIGFzU3RhdGVtZW50KSB7XG4gICAgLy8gY2hlY2sgZm9yIGZpbHRlcnMuXG4gICAgaWYgKGZpbHRlclJFJDEudGVzdCh0ZXh0KSkge1xuICAgICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKHRleHQpO1xuICAgICAgLy8gdGhlIGZpbHRlciByZWdleCBjaGVjayBtaWdodCBnaXZlIGZhbHNlIHBvc2l0aXZlXG4gICAgICAvLyBmb3IgcGlwZXMgaW5zaWRlIHN0cmluZ3MsIHNvIGl0J3MgcG9zc2libGUgdGhhdFxuICAgICAgLy8gd2UgZG9uJ3QgZ2V0IGFueSBmaWx0ZXJzIGhlcmVcbiAgICAgIHZhciB2YWwgPSB0aGlzLiRnZXQoZGlyLmV4cHJlc3Npb24sIGFzU3RhdGVtZW50KTtcbiAgICAgIHJldHVybiBkaXIuZmlsdGVycyA/IHRoaXMuX2FwcGx5RmlsdGVycyh2YWwsIG51bGwsIGRpci5maWx0ZXJzKSA6IHZhbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm8gZmlsdGVyXG4gICAgICByZXR1cm4gdGhpcy4kZ2V0KHRleHQsIGFzU3RhdGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEludGVycG9sYXRlIGEgcGllY2Ugb2YgdGVtcGxhdGUgdGV4dC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRpbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dCh0ZXh0KTtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB2bS4kZXZhbCh0b2tlbnNbMF0udmFsdWUpICsgJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgICByZXR1cm4gdG9rZW4udGFnID8gdm0uJGV2YWwodG9rZW4udmFsdWUpIDogdG9rZW4udmFsdWU7XG4gICAgICAgIH0pLmpvaW4oJycpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIExvZyBpbnN0YW5jZSBkYXRhIGFzIGEgcGxhaW4gSlMgb2JqZWN0XG4gICAqIHNvIHRoYXQgaXQgaXMgZWFzaWVyIHRvIGluc3BlY3QgaW4gY29uc29sZS5cbiAgICogVGhpcyBtZXRob2QgYXNzdW1lcyBjb25zb2xlIGlzIGF2YWlsYWJsZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtwYXRoXVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRsb2cgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgIHZhciBkYXRhID0gcGF0aCA/IGdldFBhdGgodGhpcy5fZGF0YSwgcGF0aCkgOiB0aGlzLl9kYXRhO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICBkYXRhID0gY2xlYW4oZGF0YSk7XG4gICAgfVxuICAgIC8vIGluY2x1ZGUgY29tcHV0ZWQgZmllbGRzXG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICB2YXIga2V5O1xuICAgICAgZm9yIChrZXkgaW4gdGhpcy4kb3B0aW9ucy5jb21wdXRlZCkge1xuICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX3Byb3BzKSB7XG4gICAgICAgIGZvciAoa2V5IGluIHRoaXMuX3Byb3BzKSB7XG4gICAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgfTtcblxuICAvKipcbiAgICogXCJjbGVhblwiIGEgZ2V0dGVyL3NldHRlciBjb252ZXJ0ZWQgb2JqZWN0IGludG8gYSBwbGFpblxuICAgKiBvYmplY3QgY29weS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IC0gb2JqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG5cbiAgZnVuY3Rpb24gY2xlYW4ob2JqKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZG9tQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIG9uLWluc3RhbmNlIG5leHRUaWNrLiBUaGUgY2FsbGJhY2sgaXNcbiAgICogYXV0by1ib3VuZCB0byB0aGUgaW5zdGFuY2UsIGFuZCB0aGlzIGF2b2lkcyBjb21wb25lbnRcbiAgICogbW9kdWxlcyBoYXZpbmcgdG8gcmVseSBvbiB0aGUgZ2xvYmFsIFZ1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbmV4dFRpY2sgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICBuZXh0VGljayhmbiwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFwcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGFwcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYXBwZW5kLCBhcHBlbmRXaXRoVHJhbnNpdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByZXBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRwcmVwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuICAgIGlmICh0YXJnZXQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0LmZpcnN0Q2hpbGQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydCBpbnN0YW5jZSBiZWZvcmUgdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRiZWZvcmUgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICByZXR1cm4gaW5zZXJ0KHRoaXMsIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBiZWZvcmVXaXRoQ2IsIGJlZm9yZVdpdGhUcmFuc2l0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5zZXJ0IGluc3RhbmNlIGFmdGVyIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYWZ0ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuICAgIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcbiAgICAgIHRoaXMuJGJlZm9yZSh0YXJnZXQubmV4dFNpYmxpbmcsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldC5wYXJlbnROb2RlLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGluc3RhbmNlIGZyb20gRE9NXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRyZW1vdmUgPSBmdW5jdGlvbiAoY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgaWYgKCF0aGlzLiRlbC5wYXJlbnROb2RlKSB7XG4gICAgICByZXR1cm4gY2IgJiYgY2IoKTtcbiAgICB9XG4gICAgdmFyIGluRG9jdW1lbnQgPSB0aGlzLl9pc0F0dGFjaGVkICYmIGluRG9jKHRoaXMuJGVsKTtcbiAgICAvLyBpZiB3ZSBhcmUgbm90IGluIGRvY3VtZW50LCBubyBuZWVkIHRvIGNoZWNrXG4gICAgLy8gZm9yIHRyYW5zaXRpb25zXG4gICAgaWYgKCFpbkRvY3VtZW50KSB3aXRoVHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcmVhbENiID0gZnVuY3Rpb24gcmVhbENiKCkge1xuICAgICAgaWYgKGluRG9jdW1lbnQpIHNlbGYuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuICAgICAgaWYgKGNiKSBjYigpO1xuICAgIH07XG4gICAgaWYgKHRoaXMuX2lzRnJhZ21lbnQpIHtcbiAgICAgIHJlbW92ZU5vZGVSYW5nZSh0aGlzLl9mcmFnbWVudFN0YXJ0LCB0aGlzLl9mcmFnbWVudEVuZCwgdGhpcywgdGhpcy5fZnJhZ21lbnQsIHJlYWxDYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSA/IHJlbW92ZVdpdGhDYiA6IHJlbW92ZVdpdGhUcmFuc2l0aW9uO1xuICAgICAgb3AodGhpcy4kZWwsIHRoaXMsIHJlYWxDYik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTaGFyZWQgRE9NIGluc2VydGlvbiBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMSAtIG9wIGZvciBub24tdHJhbnNpdGlvbiBpbnNlcnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AyIC0gb3AgZm9yIHRyYW5zaXRpb24gaW5zZXJ0XG4gICAqIEByZXR1cm4gdm1cbiAgICovXG5cbiAgZnVuY3Rpb24gaW5zZXJ0KHZtLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgb3AxLCBvcDIpIHtcbiAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuICAgIHZhciB0YXJnZXRJc0RldGFjaGVkID0gIWluRG9jKHRhcmdldCk7XG4gICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlIHx8IHRhcmdldElzRGV0YWNoZWQgPyBvcDEgOiBvcDI7XG4gICAgdmFyIHNob3VsZENhbGxIb29rID0gIXRhcmdldElzRGV0YWNoZWQgJiYgIXZtLl9pc0F0dGFjaGVkICYmICFpbkRvYyh2bS4kZWwpO1xuICAgIGlmICh2bS5faXNGcmFnbWVudCkge1xuICAgICAgbWFwTm9kZVJhbmdlKHZtLl9mcmFnbWVudFN0YXJ0LCB2bS5fZnJhZ21lbnRFbmQsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIG9wKG5vZGUsIHRhcmdldCwgdm0pO1xuICAgICAgfSk7XG4gICAgICBjYiAmJiBjYigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcCh2bS4kZWwsIHRhcmdldCwgdm0sIGNiKTtcbiAgICB9XG4gICAgaWYgKHNob3VsZENhbGxIb29rKSB7XG4gICAgICB2bS5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgfVxuICAgIHJldHVybiB2bTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBmb3Igc2VsZWN0b3JzXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBlbCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKSA6IGVsO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGVuZCBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IGVsXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFwcGVuZChlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnRCZWZvcmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBiZWZvcmVXaXRoQ2IoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiByZW1vdmVXaXRoQ2IoZWwsIHZtLCBjYikge1xuICAgIHJlbW92ZShlbCk7XG4gICAgaWYgKGNiKSBjYigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV2ZW50c0FQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBMaXN0ZW4gb24gdGhlIGdpdmVuIGBldmVudGAgd2l0aCBgZm5gLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kb24gPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgKHRoaXMuX2V2ZW50c1tldmVudF0gfHwgKHRoaXMuX2V2ZW50c1tldmVudF0gPSBbXSkpLnB1c2goZm4pO1xuICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIDEpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcbiAgICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGZ1bmN0aW9uIG9uKCkge1xuICAgICAgc2VsZi4kb2ZmKGV2ZW50LCBvbik7XG4gICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBvbi5mbiA9IGZuO1xuICAgIHRoaXMuJG9uKGV2ZW50LCBvbik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXG4gICAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kb2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgIHZhciBjYnM7XG4gICAgLy8gYWxsXG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy4kcGFyZW50KSB7XG4gICAgICAgIGZvciAoZXZlbnQgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICAgICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICAgICAgICBpZiAoY2JzKSB7XG4gICAgICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBzcGVjaWZpYyBldmVudFxuICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG4gICAgaWYgKCFjYnMpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuICAgICAgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IG51bGw7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gc3BlY2lmaWMgaGFuZGxlclxuICAgIHZhciBjYjtcbiAgICB2YXIgaSA9IGNicy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgY2IgPSBjYnNbaV07XG4gICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtMSk7XG4gICAgICAgIGNicy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogVHJpZ2dlciBhbiBldmVudCBvbiBzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IHNob3VsZFByb3BhZ2F0ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRlbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcbiAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuICAgIHZhciBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBpc1NvdXJjZSB8fCAhY2JzO1xuICAgIGlmIChjYnMpIHtcbiAgICAgIGNicyA9IGNicy5sZW5ndGggPiAxID8gdG9BcnJheShjYnMpIDogY2JzO1xuICAgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGhhY2t5IHNvbHV0aW9uIHRvIHRoZSBxdWVzdGlvbiByYWlzZWRcbiAgICAgIC8vIGluICMyMTAyOiBmb3IgYW4gaW5saW5lIGNvbXBvbmVudCBsaXN0ZW5lciBsaWtlIDxjb21wIEB0ZXN0PVwiZG9UaGlzXCI+LFxuICAgICAgLy8gdGhlIHByb3BhZ2F0aW9uIGhhbmRsaW5nIGlzIHNvbWV3aGF0IGJyb2tlbi4gVGhlcmVmb3JlIHdlXG4gICAgICAvLyBuZWVkIHRvIHRyZWF0IHRoZXNlIGlubGluZSBjYWxsYmFja3MgZGlmZmVyZW50bHkuXG4gICAgICB2YXIgaGFzUGFyZW50Q2JzID0gaXNTb3VyY2UgJiYgY2JzLnNvbWUoZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgIHJldHVybiBjYi5fZnJvbVBhcmVudDtcbiAgICAgIH0pO1xuICAgICAgaWYgKGhhc1BhcmVudENicykge1xuICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBjYiA9IGNic1tpXTtcbiAgICAgICAgdmFyIHJlcyA9IGNiLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICBpZiAocmVzID09PSB0cnVlICYmICghaGFzUGFyZW50Q2JzIHx8IGNiLl9mcm9tUGFyZW50KSkge1xuICAgICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNob3VsZFByb3BhZ2F0ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgYnJvYWRjYXN0IGFuIGV2ZW50IHRvIGFsbCBjaGlsZHJlbiBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcbiAgICogQHBhcmFtIHsuLi4qfSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRicm9hZGNhc3QgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xuICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG4gICAgLy8gaWYgbm8gY2hpbGQgaGFzIHJlZ2lzdGVyZWQgZm9yIHRoaXMgZXZlbnQsXG4gICAgLy8gdGhlbiB0aGVyZSdzIG5vIG5lZWQgdG8gYnJvYWRjYXN0LlxuICAgIGlmICghdGhpcy5fZXZlbnRzQ291bnRbZXZlbnRdKSByZXR1cm47XG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy4kY2hpbGRyZW47XG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgaWYgKGlzU291cmNlKSB7XG4gICAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuICAgICAgLy8gb24gY2hpbGRyZW5cbiAgICAgIGFyZ3NbMF0gPSB7IG5hbWU6IGV2ZW50LCBzb3VyY2U6IHRoaXMgfTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IGNoaWxkLiRlbWl0LmFwcGx5KGNoaWxkLCBhcmdzKTtcbiAgICAgIGlmIChzaG91bGRQcm9wYWdhdGUpIHtcbiAgICAgICAgY2hpbGQuJGJyb2FkY2FzdC5hcHBseShjaGlsZCwgYXJncyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWN1cnNpdmVseSBwcm9wYWdhdGUgYW4gZXZlbnQgdXAgdGhlIHBhcmVudCBjaGFpbi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZGlzcGF0Y2ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gdGhpcy4kZW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICghc2hvdWxkUHJvcGFnYXRlKSByZXR1cm47XG4gICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuICAgIC8vIG9uIHBhcmVudHNcbiAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgc2hvdWxkUHJvcGFnYXRlID0gcGFyZW50LiRlbWl0LmFwcGx5KHBhcmVudCwgYXJncyk7XG4gICAgICBwYXJlbnQgPSBzaG91bGRQcm9wYWdhdGUgPyBwYXJlbnQuJHBhcmVudCA6IG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNb2RpZnkgdGhlIGxpc3RlbmVyIGNvdW50cyBvbiBhbGwgcGFyZW50cy5cbiAgICogVGhpcyBib29ra2VlcGluZyBhbGxvd3MgJGJyb2FkY2FzdCB0byByZXR1cm4gZWFybHkgd2hlblxuICAgKiBubyBjaGlsZCBoYXMgbGlzdGVuZWQgdG8gYSBjZXJ0YWluIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudFxuICAgKi9cblxuICB2YXIgaG9va1JFID0gL15ob29rOi87XG4gIGZ1bmN0aW9uIG1vZGlmeUxpc3RlbmVyQ291bnQodm0sIGV2ZW50LCBjb3VudCkge1xuICAgIHZhciBwYXJlbnQgPSB2bS4kcGFyZW50O1xuICAgIC8vIGhvb2tzIGRvIG5vdCBnZXQgYnJvYWRjYXN0ZWQgc28gbm8gbmVlZFxuICAgIC8vIHRvIGRvIGJvb2trZWVwaW5nIGZvciB0aGVtXG4gICAgaWYgKCFwYXJlbnQgfHwgIWNvdW50IHx8IGhvb2tSRS50ZXN0KGV2ZW50KSkgcmV0dXJuO1xuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdID0gKHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdIHx8IDApICsgY291bnQ7XG4gICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbGlmZWN5Y2xlQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIFNldCBpbnN0YW5jZSB0YXJnZXQgZWxlbWVudCBhbmQga2ljayBvZmYgdGhlIGNvbXBpbGF0aW9uXG4gICAqIHByb2Nlc3MuIFRoZSBwYXNzZWQgaW4gYGVsYCBjYW4gYmUgYSBzZWxlY3RvciBzdHJpbmcsIGFuXG4gICAqIGV4aXN0aW5nIEVsZW1lbnQsIG9yIGEgRG9jdW1lbnRGcmFnbWVudCAoZm9yIGJsb2NrXG4gICAqIGluc3RhbmNlcykuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fHN0cmluZ30gZWxcbiAgICogQHB1YmxpY1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uIChlbCkge1xuICAgIGlmICh0aGlzLl9pc0NvbXBpbGVkKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJyRtb3VudCgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLicsIHRoaXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbCA9IHF1ZXJ5KGVsKTtcbiAgICBpZiAoIWVsKSB7XG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIH1cbiAgICB0aGlzLl9jb21waWxlKGVsKTtcbiAgICB0aGlzLl9pbml0RE9NSG9va3MoKTtcbiAgICBpZiAoaW5Eb2ModGhpcy4kZWwpKSB7XG4gICAgICB0aGlzLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcbiAgICAgIHJlYWR5LmNhbGwodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJG9uY2UoJ2hvb2s6YXR0YWNoZWQnLCByZWFkeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNYXJrIGFuIGluc3RhbmNlIGFzIHJlYWR5LlxuICAgKi9cblxuICBmdW5jdGlvbiByZWFkeSgpIHtcbiAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9pc1JlYWR5ID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsSG9vaygncmVhZHknKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZWFyZG93biB0aGUgaW5zdGFuY2UsIHNpbXBseSBkZWxlZ2F0ZSB0byB0aGUgaW50ZXJuYWxcbiAgICogX2Rlc3Ryb3kuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGRlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcbiAgICB0aGlzLl9kZXN0cm95KHJlbW92ZSwgZGVmZXJDbGVhbnVwKTtcbiAgfTtcblxuICAvKipcbiAgICogUGFydGlhbGx5IGNvbXBpbGUgYSBwaWVjZSBvZiBET00gYW5kIHJldHVybiBhXG4gICAqIGRlY29tcGlsZSBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gICAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRjb21waWxlID0gZnVuY3Rpb24gKGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIHJldHVybiBjb21waWxlKGVsLCB0aGlzLiRvcHRpb25zLCB0cnVlKSh0aGlzLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBleHBvc2VkIFZ1ZSBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBBUEkgY29udmVudGlvbnM6XG4gKiAtIHB1YmxpYyBBUEkgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGAkYFxuICogLSBpbnRlcm5hbCBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYF9gXG4gKiAtIG5vbi1wcmVmaXhlZCBwcm9wZXJ0aWVzIGFyZSBhc3N1bWVkIHRvIGJlIHByb3hpZWQgdXNlclxuICogICBkYXRhLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIFZ1ZShvcHRpb25zKSB7XG4gIHRoaXMuX2luaXQob3B0aW9ucyk7XG59XG5cbi8vIGluc3RhbGwgaW50ZXJuYWxzXG5pbml0TWl4aW4oVnVlKTtcbnN0YXRlTWl4aW4oVnVlKTtcbmV2ZW50c01peGluKFZ1ZSk7XG5saWZlY3ljbGVNaXhpbihWdWUpO1xubWlzY01peGluKFZ1ZSk7XG5cbi8vIGluc3RhbGwgaW5zdGFuY2UgQVBJc1xuZGF0YUFQSShWdWUpO1xuZG9tQVBJKFZ1ZSk7XG5ldmVudHNBUEkoVnVlKTtcbmxpZmVjeWNsZUFQSShWdWUpO1xuXG52YXIgc2xvdCA9IHtcblxuICBwcmlvcml0eTogU0xPVCxcbiAgcGFyYW1zOiBbJ25hbWUnXSxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIHRoaXMgd2FzIHJlc29sdmVkIGR1cmluZyBjb21wb25lbnQgdHJhbnNjbHVzaW9uXG4gICAgdmFyIG5hbWUgPSB0aGlzLnBhcmFtcy5uYW1lIHx8ICdkZWZhdWx0JztcbiAgICB2YXIgY29udGVudCA9IHRoaXMudm0uX3Nsb3RDb250ZW50cyAmJiB0aGlzLnZtLl9zbG90Q29udGVudHNbbmFtZV07XG4gICAgaWYgKCFjb250ZW50IHx8ICFjb250ZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgdGhpcy5mYWxsYmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbXBpbGUoY29udGVudC5jbG9uZU5vZGUodHJ1ZSksIHRoaXMudm0uX2NvbnRleHQsIHRoaXMudm0pO1xuICAgIH1cbiAgfSxcblxuICBjb21waWxlOiBmdW5jdGlvbiBjb21waWxlKGNvbnRlbnQsIGNvbnRleHQsIGhvc3QpIHtcbiAgICBpZiAoY29udGVudCAmJiBjb250ZXh0KSB7XG4gICAgICBpZiAodGhpcy5lbC5oYXNDaGlsZE5vZGVzKCkgJiYgY29udGVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJiBjb250ZW50LmNoaWxkTm9kZXNbMF0ubm9kZVR5cGUgPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgICAgIC8vIGlmIHRoZSBpbnNlcnRlZCBzbG90IGhhcyB2LWlmXG4gICAgICAgIC8vIGluamVjdCBmYWxsYmFjayBjb250ZW50IGFzIHRoZSB2LWVsc2VcbiAgICAgICAgdmFyIGVsc2VCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgICAgIGVsc2VCbG9jay5zZXRBdHRyaWJ1dGUoJ3YtZWxzZScsICcnKTtcbiAgICAgICAgZWxzZUJsb2NrLmlubmVySFRNTCA9IHRoaXMuZWwuaW5uZXJIVE1MO1xuICAgICAgICAvLyB0aGUgZWxzZSBibG9jayBzaG91bGQgYmUgY29tcGlsZWQgaW4gY2hpbGQgc2NvcGVcbiAgICAgICAgZWxzZUJsb2NrLl9jb250ZXh0ID0gdGhpcy52bTtcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlbHNlQmxvY2spO1xuICAgICAgfVxuICAgICAgdmFyIHNjb3BlID0gaG9zdCA/IGhvc3QuX3Njb3BlIDogdGhpcy5fc2NvcGU7XG4gICAgICB0aGlzLnVubGluayA9IGNvbnRleHQuJGNvbXBpbGUoY29udGVudCwgaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIH1cbiAgICBpZiAoY29udGVudCkge1xuICAgICAgcmVwbGFjZSh0aGlzLmVsLCBjb250ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKHRoaXMuZWwpO1xuICAgIH1cbiAgfSxcblxuICBmYWxsYmFjazogZnVuY3Rpb24gZmFsbGJhY2soKSB7XG4gICAgdGhpcy5jb21waWxlKGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpLCB0aGlzLnZtKTtcbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAodGhpcy51bmxpbmspIHtcbiAgICAgIHRoaXMudW5saW5rKCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcGFydGlhbCA9IHtcblxuICBwcmlvcml0eTogUEFSVElBTCxcblxuICBwYXJhbXM6IFsnbmFtZSddLFxuXG4gIC8vIHdhdGNoIGNoYW5nZXMgdG8gbmFtZSBmb3IgZHluYW1pYyBwYXJ0aWFsc1xuICBwYXJhbVdhdGNoZXJzOiB7XG4gICAgbmFtZTogZnVuY3Rpb24gbmFtZSh2YWx1ZSkge1xuICAgICAgdklmLnJlbW92ZS5jYWxsKHRoaXMpO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0KHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1wYXJ0aWFsJyk7XG4gICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG4gICAgdGhpcy5pbnNlcnQodGhpcy5wYXJhbXMubmFtZSk7XG4gIH0sXG5cbiAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoaWQpIHtcbiAgICB2YXIgcGFydGlhbCA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAncGFydGlhbHMnLCBpZCwgdHJ1ZSk7XG4gICAgaWYgKHBhcnRpYWwpIHtcbiAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgcGFydGlhbCk7XG4gICAgICB2SWYuaW5zZXJ0LmNhbGwodGhpcyk7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgZWxlbWVudERpcmVjdGl2ZXMgPSB7XG4gIHNsb3Q6IHNsb3QsXG4gIHBhcnRpYWw6IHBhcnRpYWxcbn07XG5cbnZhciBjb252ZXJ0QXJyYXkgPSB2Rm9yLl9wb3N0UHJvY2VzcztcblxuLyoqXG4gKiBMaW1pdCBmaWx0ZXIgZm9yIGFycmF5c1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IChEZWNpbWFsIGV4cGVjdGVkKVxuICovXG5cbmZ1bmN0aW9uIGxpbWl0QnkoYXJyLCBuLCBvZmZzZXQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID8gcGFyc2VJbnQob2Zmc2V0LCAxMCkgOiAwO1xuICBuID0gdG9OdW1iZXIobik7XG4gIHJldHVybiB0eXBlb2YgbiA9PT0gJ251bWJlcicgPyBhcnIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBuKSA6IGFycjtcbn1cblxuLyoqXG4gKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG4gKiBAcGFyYW0ge1N0cmluZ30gW2RlbGltaXRlcl1cbiAqIEBwYXJhbSB7U3RyaW5nfSAuLi5kYXRhS2V5c1xuICovXG5cbmZ1bmN0aW9uIGZpbHRlckJ5KGFyciwgc2VhcmNoLCBkZWxpbWl0ZXIpIHtcbiAgYXJyID0gY29udmVydEFycmF5KGFycik7XG4gIGlmIChzZWFyY2ggPT0gbnVsbCkge1xuICAgIHJldHVybiBhcnI7XG4gIH1cbiAgaWYgKHR5cGVvZiBzZWFyY2ggPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gYXJyLmZpbHRlcihzZWFyY2gpO1xuICB9XG4gIC8vIGNhc3QgdG8gbG93ZXJjYXNlIHN0cmluZ1xuICBzZWFyY2ggPSAoJycgKyBzZWFyY2gpLnRvTG93ZXJDYXNlKCk7XG4gIC8vIGFsbG93IG9wdGlvbmFsIGBpbmAgZGVsaW1pdGVyXG4gIC8vIGJlY2F1c2Ugd2h5IG5vdFxuICB2YXIgbiA9IGRlbGltaXRlciA9PT0gJ2luJyA/IDMgOiAyO1xuICAvLyBleHRyYWN0IGFuZCBmbGF0dGVuIGtleXNcbiAgdmFyIGtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCB0b0FycmF5KGFyZ3VtZW50cywgbikpO1xuICB2YXIgcmVzID0gW107XG4gIHZhciBpdGVtLCBrZXksIHZhbCwgajtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcnIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaXRlbSA9IGFycltpXTtcbiAgICB2YWwgPSBpdGVtICYmIGl0ZW0uJHZhbHVlIHx8IGl0ZW07XG4gICAgaiA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChqKSB7XG4gICAgICB3aGlsZSAoai0tKSB7XG4gICAgICAgIGtleSA9IGtleXNbal07XG4gICAgICAgIGlmIChrZXkgPT09ICcka2V5JyAmJiBjb250YWlucyhpdGVtLiRrZXksIHNlYXJjaCkgfHwgY29udGFpbnMoZ2V0UGF0aCh2YWwsIGtleSksIHNlYXJjaCkpIHtcbiAgICAgICAgICByZXMucHVzaChpdGVtKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY29udGFpbnMoaXRlbSwgc2VhcmNoKSkge1xuICAgICAgcmVzLnB1c2goaXRlbSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8QXJyYXk8U3RyaW5nPnxGdW5jdGlvbn0gLi4uc29ydEtleXNcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3JkZXJdXG4gKi9cblxuZnVuY3Rpb24gb3JkZXJCeShhcnIpIHtcbiAgdmFyIGNvbXBhcmF0b3IgPSBudWxsO1xuICB2YXIgc29ydEtleXMgPSB1bmRlZmluZWQ7XG4gIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuXG4gIC8vIGRldGVybWluZSBvcmRlciAobGFzdCBhcmd1bWVudClcbiAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gIHZhciBvcmRlciA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgaWYgKHR5cGVvZiBvcmRlciA9PT0gJ251bWJlcicpIHtcbiAgICBvcmRlciA9IG9yZGVyIDwgMCA/IC0xIDogMTtcbiAgICBhcmdzID0gYXJncy5sZW5ndGggPiAxID8gYXJncy5zbGljZSgwLCAtMSkgOiBhcmdzO1xuICB9IGVsc2Uge1xuICAgIG9yZGVyID0gMTtcbiAgfVxuXG4gIC8vIGRldGVybWluZSBzb3J0S2V5cyAmIGNvbXBhcmF0b3JcbiAgdmFyIGZpcnN0QXJnID0gYXJnc1swXTtcbiAgaWYgKCFmaXJzdEFyZykge1xuICAgIHJldHVybiBhcnI7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGZpcnN0QXJnID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gY3VzdG9tIGNvbXBhcmF0b3JcbiAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBmaXJzdEFyZyhhLCBiKSAqIG9yZGVyO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gc3RyaW5nIGtleXMuIGZsYXR0ZW4gZmlyc3RcbiAgICBzb3J0S2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGFyZ3MpO1xuICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYiwgaSkge1xuICAgICAgaSA9IGkgfHwgMDtcbiAgICAgIHJldHVybiBpID49IHNvcnRLZXlzLmxlbmd0aCAtIDEgPyBiYXNlQ29tcGFyZShhLCBiLCBpKSA6IGJhc2VDb21wYXJlKGEsIGIsIGkpIHx8IGNvbXBhcmF0b3IoYSwgYiwgaSArIDEpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBiYXNlQ29tcGFyZShhLCBiLCBzb3J0S2V5SW5kZXgpIHtcbiAgICB2YXIgc29ydEtleSA9IHNvcnRLZXlzW3NvcnRLZXlJbmRleF07XG4gICAgaWYgKHNvcnRLZXkpIHtcbiAgICAgIGlmIChzb3J0S2V5ICE9PSAnJGtleScpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KGEpICYmICckdmFsdWUnIGluIGEpIGEgPSBhLiR2YWx1ZTtcbiAgICAgICAgaWYgKGlzT2JqZWN0KGIpICYmICckdmFsdWUnIGluIGIpIGIgPSBiLiR2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGEgPSBpc09iamVjdChhKSA/IGdldFBhdGgoYSwgc29ydEtleSkgOiBhO1xuICAgICAgYiA9IGlzT2JqZWN0KGIpID8gZ2V0UGF0aChiLCBzb3J0S2V5KSA6IGI7XG4gICAgfVxuICAgIHJldHVybiBhID09PSBiID8gMCA6IGEgPiBiID8gb3JkZXIgOiAtb3JkZXI7XG4gIH1cblxuICAvLyBzb3J0IG9uIGEgY29weSB0byBhdm9pZCBtdXRhdGluZyBvcmlnaW5hbCBhcnJheVxuICByZXR1cm4gYXJyLnNsaWNlKCkuc29ydChjb21wYXJhdG9yKTtcbn1cblxuLyoqXG4gKiBTdHJpbmcgY29udGFpbiBoZWxwZXJcbiAqXG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuICovXG5cbmZ1bmN0aW9uIGNvbnRhaW5zKHZhbCwgc2VhcmNoKSB7XG4gIHZhciBpO1xuICBpZiAoaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBpZiAoY29udGFpbnModmFsW2tleXNbaV1dLCBzZWFyY2gpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICBpID0gdmFsLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBpZiAoY29udGFpbnModmFsW2ldLCBzZWFyY2gpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICh2YWwgIT0gbnVsbCkge1xuICAgIHJldHVybiB2YWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoKSA+IC0xO1xuICB9XG59XG5cbnZhciBkaWdpdHNSRSA9IC8oXFxkezN9KSg/PVxcZCkvZztcblxuLy8gYXNzZXQgY29sbGVjdGlvbnMgbXVzdCBiZSBhIHBsYWluIG9iamVjdC5cbnZhciBmaWx0ZXJzID0ge1xuXG4gIG9yZGVyQnk6IG9yZGVyQnksXG4gIGZpbHRlckJ5OiBmaWx0ZXJCeSxcbiAgbGltaXRCeTogbGltaXRCeSxcblxuICAvKipcbiAgICogU3RyaW5naWZ5IHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZW50XG4gICAqL1xuXG4gIGpzb246IHtcbiAgICByZWFkOiBmdW5jdGlvbiByZWFkKHZhbHVlLCBpbmRlbnQpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgbnVsbCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBpbmRlbnQgOiAyKTtcbiAgICB9LFxuICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSh2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiAnYWJjJyA9PiAnQWJjJ1xuICAgKi9cblxuICBjYXBpdGFsaXplOiBmdW5jdGlvbiBjYXBpdGFsaXplKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICByZXR1cm4gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKTtcbiAgfSxcblxuICAvKipcbiAgICogJ2FiYycgPT4gJ0FCQydcbiAgICovXG5cbiAgdXBwZXJjYXNlOiBmdW5jdGlvbiB1cHBlcmNhc2UodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgOiAnJztcbiAgfSxcblxuICAvKipcbiAgICogJ0FiQycgPT4gJ2FiYydcbiAgICovXG5cbiAgbG93ZXJjYXNlOiBmdW5jdGlvbiBsb3dlcmNhc2UodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgOiAnJztcbiAgfSxcblxuICAvKipcbiAgICogMTIzNDUgPT4gJDEyLDM0NS4wMFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc2lnblxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVjaW1hbHMgRGVjaW1hbCBwbGFjZXNcbiAgICovXG5cbiAgY3VycmVuY3k6IGZ1bmN0aW9uIGN1cnJlbmN5KHZhbHVlLCBfY3VycmVuY3ksIGRlY2ltYWxzKSB7XG4gICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICBpZiAoIWlzRmluaXRlKHZhbHVlKSB8fCAhdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcbiAgICBfY3VycmVuY3kgPSBfY3VycmVuY3kgIT0gbnVsbCA/IF9jdXJyZW5jeSA6ICckJztcbiAgICBkZWNpbWFscyA9IGRlY2ltYWxzICE9IG51bGwgPyBkZWNpbWFscyA6IDI7XG4gICAgdmFyIHN0cmluZ2lmaWVkID0gTWF0aC5hYnModmFsdWUpLnRvRml4ZWQoZGVjaW1hbHMpO1xuICAgIHZhciBfaW50ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgwLCAtMSAtIGRlY2ltYWxzKSA6IHN0cmluZ2lmaWVkO1xuICAgIHZhciBpID0gX2ludC5sZW5ndGggJSAzO1xuICAgIHZhciBoZWFkID0gaSA+IDAgPyBfaW50LnNsaWNlKDAsIGkpICsgKF9pbnQubGVuZ3RoID4gMyA/ICcsJyA6ICcnKSA6ICcnO1xuICAgIHZhciBfZmxvYXQgPSBkZWNpbWFscyA/IHN0cmluZ2lmaWVkLnNsaWNlKC0xIC0gZGVjaW1hbHMpIDogJyc7XG4gICAgdmFyIHNpZ24gPSB2YWx1ZSA8IDAgPyAnLScgOiAnJztcbiAgICByZXR1cm4gc2lnbiArIF9jdXJyZW5jeSArIGhlYWQgKyBfaW50LnNsaWNlKGkpLnJlcGxhY2UoZGlnaXRzUkUsICckMSwnKSArIF9mbG9hdDtcbiAgfSxcblxuICAvKipcbiAgICogJ2l0ZW0nID0+ICdpdGVtcydcbiAgICpcbiAgICogQHBhcmFtc1xuICAgKiAgYW4gYXJyYXkgb2Ygc3RyaW5ncyBjb3JyZXNwb25kaW5nIHRvXG4gICAqICB0aGUgc2luZ2xlLCBkb3VibGUsIHRyaXBsZSAuLi4gZm9ybXMgb2YgdGhlIHdvcmQgdG9cbiAgICogIGJlIHBsdXJhbGl6ZWQuIFdoZW4gdGhlIG51bWJlciB0byBiZSBwbHVyYWxpemVkXG4gICAqICBleGNlZWRzIHRoZSBsZW5ndGggb2YgdGhlIGFyZ3MsIGl0IHdpbGwgdXNlIHRoZSBsYXN0XG4gICAqICBlbnRyeSBpbiB0aGUgYXJyYXkuXG4gICAqXG4gICAqICBlLmcuIFsnc2luZ2xlJywgJ2RvdWJsZScsICd0cmlwbGUnLCAnbXVsdGlwbGUnXVxuICAgKi9cblxuICBwbHVyYWxpemU6IGZ1bmN0aW9uIHBsdXJhbGl6ZSh2YWx1ZSkge1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgIHZhciBsZW5ndGggPSBhcmdzLmxlbmd0aDtcbiAgICBpZiAobGVuZ3RoID4gMSkge1xuICAgICAgdmFyIGluZGV4ID0gdmFsdWUgJSAxMCAtIDE7XG4gICAgICByZXR1cm4gaW5kZXggaW4gYXJncyA/IGFyZ3NbaW5kZXhdIDogYXJnc1tsZW5ndGggLSAxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGFyZ3NbMF0gKyAodmFsdWUgPT09IDEgPyAnJyA6ICdzJyk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZWJvdW5jZSBhIGhhbmRsZXIgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5ID0gMzAwXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBkZWJvdW5jZTogZnVuY3Rpb24gZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpIHtcbiAgICBpZiAoIWhhbmRsZXIpIHJldHVybjtcbiAgICBpZiAoIWRlbGF5KSB7XG4gICAgICBkZWxheSA9IDMwMDtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWJvdW5jZShoYW5kbGVyLCBkZWxheSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGluc3RhbGxHbG9iYWxBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogVnVlIGFuZCBldmVyeSBjb25zdHJ1Y3RvciB0aGF0IGV4dGVuZHMgVnVlIGhhcyBhblxuICAgKiBhc3NvY2lhdGVkIG9wdGlvbnMgb2JqZWN0LCB3aGljaCBjYW4gYmUgYWNjZXNzZWQgZHVyaW5nXG4gICAqIGNvbXBpbGF0aW9uIHN0ZXBzIGFzIGB0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnNgLlxuICAgKlxuICAgKiBUaGVzZSBjYW4gYmUgc2VlbiBhcyB0aGUgZGVmYXVsdCBvcHRpb25zIG9mIGV2ZXJ5XG4gICAqIFZ1ZSBpbnN0YW5jZS5cbiAgICovXG5cbiAgVnVlLm9wdGlvbnMgPSB7XG4gICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcbiAgICBlbGVtZW50RGlyZWN0aXZlczogZWxlbWVudERpcmVjdGl2ZXMsXG4gICAgZmlsdGVyczogZmlsdGVycyxcbiAgICB0cmFuc2l0aW9uczoge30sXG4gICAgY29tcG9uZW50czoge30sXG4gICAgcGFydGlhbHM6IHt9LFxuICAgIHJlcGxhY2U6IHRydWVcbiAgfTtcblxuICAvKipcbiAgICogRXhwb3NlIHVzZWZ1bCBpbnRlcm5hbHNcbiAgICovXG5cbiAgVnVlLnV0aWwgPSB1dGlsO1xuICBWdWUuY29uZmlnID0gY29uZmlnO1xuICBWdWUuc2V0ID0gc2V0O1xuICBWdWVbJ2RlbGV0ZSddID0gZGVsO1xuICBWdWUubmV4dFRpY2sgPSBuZXh0VGljaztcblxuICAvKipcbiAgICogVGhlIGZvbGxvd2luZyBhcmUgZXhwb3NlZCBmb3IgYWR2YW5jZWQgdXNhZ2UgLyBwbHVnaW5zXG4gICAqL1xuXG4gIFZ1ZS5jb21waWxlciA9IGNvbXBpbGVyO1xuICBWdWUuRnJhZ21lbnRGYWN0b3J5ID0gRnJhZ21lbnRGYWN0b3J5O1xuICBWdWUuaW50ZXJuYWxEaXJlY3RpdmVzID0gaW50ZXJuYWxEaXJlY3RpdmVzO1xuICBWdWUucGFyc2VycyA9IHtcbiAgICBwYXRoOiBwYXRoLFxuICAgIHRleHQ6IHRleHQsXG4gICAgdGVtcGxhdGU6IHRlbXBsYXRlLFxuICAgIGRpcmVjdGl2ZTogZGlyZWN0aXZlLFxuICAgIGV4cHJlc3Npb246IGV4cHJlc3Npb25cbiAgfTtcblxuICAvKipcbiAgICogRWFjaCBpbnN0YW5jZSBjb25zdHJ1Y3RvciwgaW5jbHVkaW5nIFZ1ZSwgaGFzIGEgdW5pcXVlXG4gICAqIGNpZC4gVGhpcyBlbmFibGVzIHVzIHRvIGNyZWF0ZSB3cmFwcGVkIFwiY2hpbGRcbiAgICogY29uc3RydWN0b3JzXCIgZm9yIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgYW5kIGNhY2hlIHRoZW0uXG4gICAqL1xuXG4gIFZ1ZS5jaWQgPSAwO1xuICB2YXIgY2lkID0gMTtcblxuICAvKipcbiAgICogQ2xhc3MgaW5oZXJpdGFuY2VcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGV4dGVuZE9wdGlvbnNcbiAgICovXG5cbiAgVnVlLmV4dGVuZCA9IGZ1bmN0aW9uIChleHRlbmRPcHRpb25zKSB7XG4gICAgZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnMgfHwge307XG4gICAgdmFyIFN1cGVyID0gdGhpcztcbiAgICB2YXIgaXNGaXJzdEV4dGVuZCA9IFN1cGVyLmNpZCA9PT0gMDtcbiAgICBpZiAoaXNGaXJzdEV4dGVuZCAmJiBleHRlbmRPcHRpb25zLl9DdG9yKSB7XG4gICAgICByZXR1cm4gZXh0ZW5kT3B0aW9ucy5fQ3RvcjtcbiAgICB9XG4gICAgdmFyIG5hbWUgPSBleHRlbmRPcHRpb25zLm5hbWUgfHwgU3VwZXIub3B0aW9ucy5uYW1lO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoIS9eW2EtekEtWl1bXFx3LV0qJC8udGVzdChuYW1lKSkge1xuICAgICAgICB3YXJuKCdJbnZhbGlkIGNvbXBvbmVudCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiLiBDb21wb25lbnQgbmFtZXMgJyArICdjYW4gb25seSBjb250YWluIGFscGhhbnVtZXJpYyBjaGFyYWNhdGVycyBhbmQgdGhlIGh5cGhlbi4nKTtcbiAgICAgICAgbmFtZSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBTdWIgPSBjcmVhdGVDbGFzcyhuYW1lIHx8ICdWdWVDb21wb25lbnQnKTtcbiAgICBTdWIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXBlci5wcm90b3R5cGUpO1xuICAgIFN1Yi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWI7XG4gICAgU3ViLmNpZCA9IGNpZCsrO1xuICAgIFN1Yi5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFN1cGVyLm9wdGlvbnMsIGV4dGVuZE9wdGlvbnMpO1xuICAgIFN1Ylsnc3VwZXInXSA9IFN1cGVyO1xuICAgIC8vIGFsbG93IGZ1cnRoZXIgZXh0ZW5zaW9uXG4gICAgU3ViLmV4dGVuZCA9IFN1cGVyLmV4dGVuZDtcbiAgICAvLyBjcmVhdGUgYXNzZXQgcmVnaXN0ZXJzLCBzbyBleHRlbmRlZCBjbGFzc2VzXG4gICAgLy8gY2FuIGhhdmUgdGhlaXIgcHJpdmF0ZSBhc3NldHMgdG9vLlxuICAgIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICBTdWJbdHlwZV0gPSBTdXBlclt0eXBlXTtcbiAgICB9KTtcbiAgICAvLyBlbmFibGUgcmVjdXJzaXZlIHNlbGYtbG9va3VwXG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIFN1Yi5vcHRpb25zLmNvbXBvbmVudHNbbmFtZV0gPSBTdWI7XG4gICAgfVxuICAgIC8vIGNhY2hlIGNvbnN0cnVjdG9yXG4gICAgaWYgKGlzRmlyc3RFeHRlbmQpIHtcbiAgICAgIGV4dGVuZE9wdGlvbnMuX0N0b3IgPSBTdWI7XG4gICAgfVxuICAgIHJldHVybiBTdWI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3ViLWNsYXNzIGNvbnN0cnVjdG9yIHdpdGggdGhlXG4gICAqIGdpdmVuIG5hbWUuIFRoaXMgZ2l2ZXMgdXMgbXVjaCBuaWNlciBvdXRwdXQgd2hlblxuICAgKiBsb2dnaW5nIGluc3RhbmNlcyBpbiB0aGUgY29uc29sZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUNsYXNzKG5hbWUpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3JldHVybiBmdW5jdGlvbiAnICsgY2xhc3NpZnkobmFtZSkgKyAnIChvcHRpb25zKSB7IHRoaXMuX2luaXQob3B0aW9ucykgfScpKCk7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuICB9XG5cbiAgLyoqXG4gICAqIFBsdWdpbiBzeXN0ZW1cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHBsdWdpblxuICAgKi9cblxuICBWdWUudXNlID0gZnVuY3Rpb24gKHBsdWdpbikge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChwbHVnaW4uaW5zdGFsbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGFkZGl0aW9uYWwgcGFyYW1ldGVyc1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgICBpZiAodHlwZW9mIHBsdWdpbi5pbnN0YWxsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwbHVnaW4uaW5zdGFsbC5hcHBseShwbHVnaW4sIGFyZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbHVnaW4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfVxuICAgIHBsdWdpbi5pbnN0YWxsZWQgPSB0cnVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBcHBseSBhIGdsb2JhbCBtaXhpbiBieSBtZXJnaW5nIGl0IGludG8gdGhlIGRlZmF1bHRcbiAgICogb3B0aW9ucy5cbiAgICovXG5cbiAgVnVlLm1peGluID0gZnVuY3Rpb24gKG1peGluKSB7XG4gICAgVnVlLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoVnVlLm9wdGlvbnMsIG1peGluKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFzc2V0IHJlZ2lzdHJhdGlvbiBtZXRob2RzIHdpdGggdGhlIGZvbGxvd2luZ1xuICAgKiBzaWduYXR1cmU6XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICAgKiBAcGFyYW0geyp9IGRlZmluaXRpb25cbiAgICovXG5cbiAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICBWdWVbdHlwZV0gPSBmdW5jdGlvbiAoaWQsIGRlZmluaXRpb24pIHtcbiAgICAgIGlmICghZGVmaW5pdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiAoY29tbW9uVGFnUkUudGVzdChpZCkgfHwgcmVzZXJ2ZWRUYWdSRS50ZXN0KGlkKSkpIHtcbiAgICAgICAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArICdpZDogJyArIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIGlzUGxhaW5PYmplY3QoZGVmaW5pdGlvbikpIHtcbiAgICAgICAgICBpZiAoIWRlZmluaXRpb24ubmFtZSkge1xuICAgICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gaWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmluaXRpb24gPSBWdWUuZXh0ZW5kKGRlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF0gPSBkZWZpbml0aW9uO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcblxuICAvLyBleHBvc2UgaW50ZXJuYWwgdHJhbnNpdGlvbiBBUElcbiAgZXh0ZW5kKFZ1ZS50cmFuc2l0aW9uLCB0cmFuc2l0aW9uKTtcbn1cblxuaW5zdGFsbEdsb2JhbEFQSShWdWUpO1xuXG5WdWUudmVyc2lvbiA9ICcxLjAuMjYnO1xuXG4vLyBkZXZ0b29scyBnbG9iYWwgaG9va1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICBpZiAoY29uZmlnLmRldnRvb2xzKSB7XG4gICAgaWYgKGRldnRvb2xzKSB7XG4gICAgICBkZXZ0b29scy5lbWl0KCdpbml0JywgVnVlKTtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaW5Ccm93c2VyICYmIC9DaHJvbWVcXC9cXGQrLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICAgICAgY29uc29sZS5sb2coJ0Rvd25sb2FkIHRoZSBWdWUgRGV2dG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6XFxuJyArICdodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWRldnRvb2xzJyk7XG4gICAgfVxuICB9XG59LCAwKTtcblxubW9kdWxlLmV4cG9ydHMgPSBWdWU7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vVnVlL2Rpc3QvdnVlLmNvbW1vbi5qc1xuICoqIG1vZHVsZSBpZCA9IDQzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuICAgIEBpbXBvcnQgJy4vYXBpLXRhYmxlJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL2FwaS10YWJsZS5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcHJvcHM6IHtcbiAgICBpdGVtczoge1xuICAgICAgdHlwZTogQXJyYXlcbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGluZGV4LnZ1ZT83ZmEzMGY2M1xuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi9zaWRlLW5hdic7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9zaWRlLW5hdi5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmxldCBjbGFzc05hbWUgPSAnaHlfdS1oaWRlJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgbWV0aG9kczoge1xuICAgIHNob3dOYXYoKSB7XG4gICAgICB0aGlzLiRlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgfSxcbiAgICBoaWRlTmF2KCkge1xuICAgICAgbGV0IGNsYXNzZXMgPSB0aGlzLiRlbC5jbGFzc05hbWUuc3BsaXQoJyAnKTtcbiAgICAgIGNsYXNzZXMucHVzaChjbGFzc05hbWUpO1xuICAgICAgdGhpcy4kZWwuY2xhc3NOYW1lID0gY2xhc3Nlcy5qb2luKCcgJyk7XG4gICAgfVxuICB9LFxuICBldmVudHM6IHtcbiAgICAndG9nZ2xlOjpzaXRlTmF2JygpIHtcbiAgICAgIGlmICh0aGlzLiRlbC5jbGFzc0xpc3QuY29udGFpbnMoY2xhc3NOYW1lKSkge1xuICAgICAgICB0aGlzLnNob3dOYXYoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaGlkZU5hdigpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogaW5kZXgudnVlPzI2ZjA4NzhiXG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICcuL3NpdGUtaGVhZGVyJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL3NpdGUtaGVhZGVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuZXhwb3J0IGRlZmF1bHQge1xuICBtZXRob2RzOiB7XG4gICAgdG9nZ2xlTmF2KCkge1xuICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCd0b2dnbGU6OnNpdGVOYXYnKTtcbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGluZGV4LnZ1ZT8wYzBiNzYzZFxuICoqLyIsIjx0ZW1wbGF0ZT5cbiAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cbiAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cbiAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5BbGVydDwvaDI+XG4gICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgIDxhbGVydCB0eXBlPVwiZXJyb3JcIj5UaGlzIGlzIGFuIGVycm9yIGFsZXJ0LjwvYWxlcnQ+XG4gICAgICAgICAgIDxhbGVydCB0eXBlPVwiaW5mb1wiPlRoaXMgaXMgYW4gaW5mbyBhbGVydC48L2FsZXJ0PlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIj5UaGlzIGlzIGEgc3VjY2VzcyBhbGVydC48L2FsZXJ0PlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6ZGlzbWlzc2libGU9XCJmYWxzZVwiPlRoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuPC9hbGVydD5cbiAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOm9uLWNsb3NlZD1cImRpc21pc3NDYWxsQmFja1wiPlRoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay48L2FsZXJ0PlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cImluZm9cIiA6dGltZW91dD1cIjUwMDBcIj5UaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy48L2FsZXJ0PlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4mbHQ7YWxlcnQgdHlwZT1cImVycm9yXCImZ3Q7VGhpcyBpcyBhbiBlcnJvciBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuJmx0O2FsZXJ0IHR5cGU9XCJpbmZvXCImZ3Q7VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG4mbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiZndDtUaGlzIGlzIGEgc3VjY2VzcyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOmRpc21pc3NpYmxlPVwiZmFsc2VcIiZndDtUaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG4mbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6b24tY2xvc2VkPVwiZGlzbWlzc0NhbGxCYWNrXCImZ3Q7VGhpcyBpcyBhbiBhbGVydCB3aXRoIGNhbGxiYWNrLiZsdDsvYWxlcnQmZ3Q7XG4mbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6dGltZW91dD1cIjUwMDBcIiZndDtUaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy4mbHQ7L2FsZXJ0Jmd0O1xuICAgICAgICAgICAgIDwvY29kZT5cbiAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuICAgICAgPC9kaXY+XG4gICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cbiAgICAgIDwvZGl2PlxuXG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBBcGlUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgQXBpVGFibGVcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzbWlzc0NhbGxCYWNrKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnYWxlcnQhISEnKTtcbiAgICAgIH0sXG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ3R5cGUnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgdHlwZSBvZiBhbGVydCAoZXJyb3IsIGluZm8sIHN1Y2Nlc3MpJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnZGlzbWlzc2libGUnLFxuICAgICAgICB0eXBlOiAnQm9vbGVhbicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiB0cnVlLFxuICAgICAgICBkZXNjOiAnSXMgdGhlIGFsZXJ0IGRpc21pc3NpYmxlPydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ3RpbWVvdXQnLFxuICAgICAgICB0eXBlOiAnTnVtYmVyJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6IC0xLFxuICAgICAgICBkZXNjOiAnVGhlIGR1cmF0aW9uIGFsZXJ0IHN0YXlzIG9uIHNjcmVlbiBpbiBtcydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ29uQ2xvc2VkJyxcbiAgICAgICAgdHlwZTogJ0Z1bmN0aW9uJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYWxlcnQgaXMgY2xvc2VkLidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogYWxlcnQtcGFnZS52dWU/NzlhNGRlODZcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+Q29sbGFwc2FibGUgUGFuZWw8L2gyPlxuICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cbiAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAxXCIgOmlzLW9wZW49XCJ0cnVlXCI+XG4gICAgICAgICAgICBQYW5lbCAxIGNvbnRlbnRcbiAgICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblxuICAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAyXCI+XG4gICAgICAgICAgICBQYW5lbCAyIGNvbnRlbnRcbiAgICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuICAgICAgICAgICA8cHJlPlxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuJmx0O2NvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMVwiIDppcy1vcGVuPVwidHJ1ZVwiJmd0O1xuIFBhbmVsIDEgY29udGVudFxuJmx0Oy9jb2xsYXBzYWJsZS1wYW5lbCZndDtcbiZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIlBhbmVsIDJcIiZndDtcbiBQYW5lbCAyIGNvbnRlbnRcbiZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuICAgICAgPC9kaXY+XG5cbiAgIDwvZGl2PlxuICA8L3NlY3Rpb24+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IEFwaVRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBBcGlUYWJsZVxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ2xhYmVsJyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnVGhlIGxhYmxlIG9mIHRoZSBwYW5lbCdcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2lzT3BlbicsXG4gICAgICAgIHR5cGU6ICdCb29sZWFuJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgICAgICBkZXNjOiAnSXMgdGhlIHBhbmVsIG9wZW4uJ1xuICAgICAgfV1cbiAgICB9O1xuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBjb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZT8wOTEyYjFiZFxuICoqLyIsIjx0ZW1wbGF0ZT5cbiAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cbiAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cbiAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5MZWdhbCBTeXN0ZW08L2gyPlxuICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cbiAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICA8cCBjbGFzcz1cImh5X2MtY29weSBoeV9jLWNvcHktLWJvZHkgaHlfdC1ncmV5XCI+XG4gICAgICAgICAgICAgTG9yZW0gaXBzdW08bGVnYWwtY291bnRlclxuICAgICAgICAgICAgICAgbGVnYWwta2V5PVwiaHMtcmVmZXJyYWwtdGVybXNcIlxuICAgICAgICAgICAgICAgbGVnYWwtbGFuZz1cImVuXCIgbGVnYWwtcmVnaW9uPVwiYmNcIlxuICAgICAgICAgICAgICAgPjwvbGVnYWwtY291bnRlcj4gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdCxcbiAgICAgICAgICAgICBzZWQgZG8gZWl1c21vZCB0ZW1wb3IgaW5jaWRpZHVudCB1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YS5cbiAgICAgICAgICAgICA8bGVnYWwtY291bnRlclxuICAgICAgICAgICAgICAgbGVnYWwta2V5PVwiMS15ZWFyLW9mZmVyLXN0aW1cIlxuICAgICAgICAgICAgICAgbGVnYWwtbGFuZz1cImVuXCIgbGVnYWwtcmVnaW9uPVwiYmNcIlxuICAgICAgICAgICAgICAgPjwvbGVnYWwtY291bnRlcj5cbiAgICAgICAgICAgICA8L3A+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgIDxsZWdhbC1jb250YWluZXI+PC9sZWdhbC1jb250YWluZXI+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cbiZsdDtsZWdhbC1jb3VudGVyXG4gIGxlZ2FsLWtleT1cImhzLXJlZmVycmFsLXRlcm1zXCJcbiAgbGVnYWwtbGFuZz1cImVuXCJcbiAgbGVnYWwtcmVnaW9uPVwiYmNcIlxuJmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xuJmx0O2xlZ2FsLWNvbnRhaW5lciZndDsmbHQ7L2xlZ2FsLWNvbnRhaW5lciZndDtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cImphdmFzY3JpcHRcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWphdmFzY3JpcHRcIj5cbmxldCB2bSA9IG5ldyBWdWUoe1xuIGVsOiAnYm9keScsXG4gZGF0YSgpIHtcbiAgIHJldHVybiB7XG4gICAgIGxpZ2VyRW5kUG9pbnQ6ICdodHRwczovL2FwaS5jbXMudGVsdXMuY29tL2xlZ2FscycsXG4gICAgIGxpZ2VyQXBwbGljYXRpb25LZXk6ICdiOTczOGQ2N2I4OWRmYzc4Mjc0NmQ0YTljZjRhMTA5MydcbiAgIH07XG4gfSxcbiBjb21wb25lbnRzOiB7XG4gICBMZWdhbENvdW50ZXIsXG4gICBMZWdhbENvbnRhaW5lclxuIH1cbn0pO1xuICAgICAgICAgICAgIDwvY29kZT5cbiAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuICAgICAgPC9kaXY+XG4gICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTogTGVnYWwgQ291bnRlcjwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cbiAgICAgIDwvZGl2PlxuICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5cblxuXG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IEFwaVRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBBcGlUYWJsZVxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ2xlZ2FsS2V5JyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAndGhlIGtleSBvZiBsZWdhbCBpbiBjbXMnXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdsZWdhbExhbmcnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICd0aGUgbGFuZ3VhZ2Ugb2YgbGVnYWwgaW4gY21zJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnbGVnYWxSZWdpb24nLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICd0aGUgcmVnaW9uIG9mIGxlZ2FsIGluIGNtcydcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogbGVnYWwtcGFnZS52dWU/M2IwMDRhNTlcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+T3ZlcmxheSBTeXN0ZW08L2gyPlxuICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cbiAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICA8YnV0dG9uIHYtb3ZlcmxheS1vcGVuZXI9XCJvdmVybGF5LTFcIiBjbGFzcz1cImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXCIgdHlwZT1cImJ1dHRvblwiIHJvbGU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgIE9wZW4gb3ZlcmxheSAjMSA8aSBjbGFzcz1cImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cIj48L2k+XG4gICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPVwib3ZlcmxheS0yXCIgY2xhc3M9XCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVwiIHR5cGU9XCJidXR0b25cIiByb2xlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICAgICBPcGVuIG92ZXJsYXkgIzIgPGkgY2xhc3M9XCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXCI+PC9pPlxuICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICA8L3A+XG4gICAgICAgICAgIDxvdmVybGF5LWNvbnRhaW5lcj5cbiAgICAgICAgICAgICAgICAgIDxvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0xXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcIiBzbG90PVwib3ZlcmxheS1oZWFkZXJcIj5UaGlzIGlzIG92ZXJsYXkgIzE8L2g0PlxuICAgICAgICAgICAgICAgICAgICA8YXJ0aWNsZSBzbG90PVwib3ZlcmxheS1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgICAgICBPdmVybGF5ICMxIGJvZHlcbiAgICAgICAgICAgICAgICAgICAgPC9hcnRpY2xlPlxuICAgICAgICAgICAgICAgICAgPC9vdmVybGF5PlxuICAgICAgICAgICAgICAgICAgPG92ZXJsYXkgb3ZlcmxheS1rZXk9XCJvdmVybGF5LTJcIj5cbiAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiPlRoaXMgaXMgb3ZlcmxheSAjMjwvaDQ+XG4gICAgICAgICAgICAgICAgICAgIDxhcnRpY2xlIHNsb3Q9XCJvdmVybGF5LWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIE92ZXJsYXkgIzIgYm9keVxuICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XG4gICAgICAgICAgICAgICAgICA8L292ZXJsYXk+XG4gICAgICAgICAgPC9vdmVybGF5LWNvbnRhaW5lcj5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuICAgICAgICAgICA8cHJlPlxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuJmx0O292ZXJsYXktY29udGFpbmVyJmd0O1xuICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0xXCImZ3Q7XG4gICAmbHQ7aDQgIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiJmd0O1xuICAgVGhpcyBpcyBvdmVybGF5ICMxXG4gICAmbHQ7L2g0Jmd0O1xuICAgJmx0O2FydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiJmd0O1xuICAgICBPdmVybGF5ICMxIGJvZHlcbiAgICZsdDsvYXJ0aWNsZSZndDtcbiAmbHQ7L292ZXJsYXkmZ3Q7XG4gJmx0O292ZXJsYXkgb3ZlcmxheS1rZXk9XCJvdmVybGF5LTJcIiZndDtcbiAgICZsdDtoNCAgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XCIgc2xvdD1cIm92ZXJsYXktaGVhZGVyXCImZ3Q7XG4gICBUaGlzIGlzIG92ZXJsYXkgIzFcbiAgICZsdDsvaDQmZ3Q7XG4gICAmbHQ7YXJ0aWNsZSBzbG90PVwib3ZlcmxheS1ib2R5XCImZ3Q7XG4gICAgIE92ZXJsYXkgIzIgYm9keVxuICAgJmx0Oy9hcnRpY2xlJmd0O1xuICZsdDsvb3ZlcmxheSZndDtcbiZsdDsvb3ZlcmxheS1jb250YWluZXImZ3Q7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuICAgICAgPC9kaXY+XG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuXG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IEFwaVRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBBcGlUYWJsZVxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ292ZXJsYXlLZXknLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUga2V5IG9mIHRoZSBvdmVybGF5LiBVc2VkIGJ5IHRoZSBvdmVybGF5IG9wZW5lciBkaXJlY3RpdmUgdG8gdGFyZ2V0IHRoZSBvdmVybGV5LidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogb3ZlcmxheS1wYWdlLnZ1ZT85ZDYzNzk3NlxuICoqLyIsIjx0ZW1wbGF0ZT5cbiAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cbiAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cbiAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5TcGlubmVyPC9oMj5cbiAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG4gICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiaHlfYy1jb250cm9sIGh5X2MtY29udHJvbC0tY2hlY2tib3hcIiA+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImh5X2MtY29udHJvbF9fbGFiZWwtdGV4dFwiPkZ1bGwgU2NyZWVuPC9zcGFuPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiICB2LW1vZGVsPVwiaXNGdWxsU2NyZWVuXCIgLz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoeV9jLWNvbnRyb2xfX2luZGljYXRvclwiPjwvZGl2PlxuICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICA8YnV0dG9uIEBjbGljaz1cInNob3dTcGlubmVyXCIgY2xhc3M9XCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tcmFpc2VkIGh5X3QtZ3JlZW5cIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICBTaG93IFNwaW5uZXJcbiAgICAgICAgICA8L2J1dHRvbj5cblxuXG5cbiAgICAgICAgICAgPHNwaW5uZXIgOmZ1bGwtc2NyZWVuPVwiaXNGdWxsU2NyZWVuXCIgOnRleHQ9XCJtc2dcIj48L3NwaW5uZXI+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cbiZsdDtzcGlubmVyIHRleHQ9XCJJIHdpbGwgY2xvc2UgaW4gMyBzZWNvbmRzXCIgOmZ1bGwtc2NyZWVuPVwidHJ1ZVwiJmd0OyZsdDsvc3Bpbm5lciZndDtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG4gICAgICA8L2Rpdj5cblxuICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgQXBpVGFibGUgZnJvbSAnLi4vY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50czoge1xuICAgIEFwaVRhYmxlXG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBzaG93U3Bpbm5lcigpIHtcbiAgICAgIHRoaXMuX3Jlc2V0TXNnKCk7XG4gICAgICB0aGlzLiRyb290LiRicm9hZGNhc3QoJ3Nob3c6OnNwaW5uZXInKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLiRyb290LiRicm9hZGNhc3QoJ2hpZGU6OnNwaW5uZXInKTtcbiAgICAgIH0sIDMwMDApO1xuICAgIH0sXG4gICAgX3Jlc2V0TXNnKCkge1xuICAgICAgbGV0IGNvdW50ZXIgPSAzO1xuICAgICAgbGV0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBpZiAoY291bnRlciA+IDApIHtcbiAgICAgICAgICBjb3VudGVyIC0tO1xuICAgICAgICAgIHRoaXMubXNnID0gYEkgd2lsbCBjbG9zZSBpbiAke2NvdW50ZXJ9IHNlY29uZHNgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICB9XG4gICAgICB9LCAxMDAwKTtcbiAgICAgIHRoaXMubXNnID0gYEkgd2lsbCBjbG9zZSBpbiAke2NvdW50ZXJ9IHNlY29uZHNgO1xuICAgIH1cbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbXNnOiAnJyxcbiAgICAgIGlzRnVsbFNjcmVlbjogZmFsc2UsXG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ2Z1bGxTY3JlZW4nLFxuICAgICAgICB0eXBlOiAnQm9vbGVhbicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgZGVzYzogJ1Nob3VsZCB0aGUgc3Bpbm5lciB0YWtlIGZ1bGwgc2NyZWVuJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAndGV4dCcsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogJ1xcJ1xcJycsXG4gICAgICAgIGRlc2M6ICdUaGUgdGV4dCBvZiB0aGUgc3Bpbm5lci4gRGVmYXVsdCBlbXB0eSdcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ3Nob3c6OnNwaW5uZXInLFxuICAgICAgICB0eXBlOiAnRXZlbnQnLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdBY3RpdmUgdGhlIHNwaW5uZXInXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdoaWRlOjpzcGlubmVyJyxcbiAgICAgICAgdHlwZTogJ0V2ZW50JyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnSGlkZSB0aGUgc3Bpbm5lcidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3Bpbm5lci1wYWdlLnZ1ZT8zNzI3ZDU4MFxuICoqLyIsIjx0ZW1wbGF0ZT5cbiAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cbiAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cbiAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5TdGVwIFRyYWNrZXI8L2gyPlxuICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cbiAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICA8c3RlcC10cmFja2VyIDpjdXJyZW50LXN0ZXA9XCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXCIgOmNvbmZpZz1cInN0ZXBUcmFja2VyQ29uZmlnXCI+PC9zdGVwLXRyYWNrZXI+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cbiAgICAgICA8cHJlPlxuICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4mbHQ7c3RlcC10cmFja2VyXG46Y3VycmVudC1zdGVwPVwic3RlcFRyYWNrZXJDdXJyZW50U3RlcFwiXG46Y29uZmlnPVwic3RlcFRyYWNrZXJDb25maWdcIiZndDtcbiZsdDsvc3RlcC10cmFja2VyJmd0O1xuICAgICAgICAgPC9jb2RlPlxuICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cImphdmFzY3JpcHRcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWpzXCI+XG5sZXQgc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XG5sZXQgc3RlcFRyYWNrZXJDb25maWcgPSB7XG4gIGlzQ2xpY2thYmxlOiB0cnVlLFxuICBzdGVwczogW1xuICAgIHtcbiAgICAgIHRpdGxlOiAnU3RlcCBBJyxcbiAgICAgIGxpbms6ICcnLFxuICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAwO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHRpdGxlOiAnU3RlcCBCJyxcbiAgICAgIGxpbms6ICcnLFxuICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAxO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIHRpdGxlOiAnU3RlcCBDJyxcbiAgICAgIGxpbms6ICcnLFxuICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xuICAgICAgfVxuICAgIH1cbiAgXVxufTtcbmxldCB2bSA9IG5ldyBWdWUoe1xuICBlbDogJ2JvZHknLFxuICBkYXRhOiB7XG4gICAgc3RlcFRyYWNrZXJDb25maWcsXG4gICAgc3RlcFRyYWNrZXJDdXJyZW50U3RlcFxufSxcbiAgY29tcG9uZW50czoge1xuICAgIFN0ZXBUcmFja2VyXG4gIH1cbn0pO1xuICAgICAgICAgICAgIDwvY29kZT5cbiAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuICAgICAgPC9kaXY+XG4gICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cbiAgICAgIDwvZGl2PlxuICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgQXBpVGFibGUgZnJvbSAnLi4vY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50czoge1xuICAgIEFwaVRhYmxlXG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHN0ZXBUcmFja2VyQ3VycmVudFN0ZXA6IDIsXG4gICAgICBzdGVwVHJhY2tlckNvbmZpZzoge1xuICAgICAgICBpc0NsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgc3RlcHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQScsXG4gICAgICAgICAgICBsaW5rOiAnJyxcbiAgICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiAnU3RlcCBCJyxcbiAgICAgICAgICAgIGxpbms6ICcnLFxuICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAxO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6ICdTdGVwIEMnLFxuICAgICAgICAgICAgbGluazogJycsXG4gICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgYXBpSXRlbXM6IFt7XG4gICAgICAgIG5hbWU6ICdjdXJyZW50U3RlcCcsXG4gICAgICAgIHR5cGU6ICdJbnRlZ2VyJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogMCxcbiAgICAgICAgZGVzYzogJ3RvZG8nXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdjb25maWcnLFxuICAgICAgICB0eXBlOiAnT2JqZWN0JyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICd0b2RvJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnY29uZmlnLnRpdGxlJyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnVGhlIHRpdGxlIG9mIHRoZSBzdGVwJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnY29uZmlnLmxpbmsnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnVGhlIGxpbmsgb2YgdGhlIHN0ZXAuICdcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2NvbmZpZy5vbkNsaWNrSGFuZGxlcicsXG4gICAgICAgIHR5cGU6ICdGdW5jdGlvbicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ1RoZSBjYWxsYmFjayBmdW5jdGlvbiB3aGVuIHN0ZXAgaXMgY2xpY2tlZC4nXG4gICAgICB9XVxuICAgIH07XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHN0ZXAtdHJhY2tlci1wYWdlLnZ1ZT8wMWY0ZjNkN1xuICoqLyIsIjx0ZW1wbGF0ZT5cbiAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cbiAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cbiAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5UYWI8L2gyPlxuICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cbiAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICA8dGFicyBjbGFzcz1cImMtcHJpY2UtbG9va3VwIGh5X28tbGF5b3V0X19pdGVtICBoeV91LXNpemUtM29mM0BzbSBoeV91LXNpemUtNG9mNEBtZCBoeV91LXNpemUtNm9mMTJAbGdcIj5cbiAgICAgICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIDFcIj5cbiAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgVGFiIDEgY29udGVudFxuICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgPC90YWI+XG4gICAgICAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiAyXCI+XG4gICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICAgVGFiIDIgY29udGVudFxuICAgICAgICAgICAgICAgPC9wPlxuICAgICAgICAgICAgIDwvdGFiPlxuICAgICAgICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgM1wiIDppcy1kaXNhYmxlZD1cInRydWVcIj5cbiAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICBUYWIgMyBjb250ZW50XG4gICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgPC90YWI+XG4gICAgICAgICAgIDwvdGFicz5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuICAgICAgICAgICA8cHJlPlxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuJmx0O3RhYnMmZ3Q7XG4gJmx0O3RhYiBsYWJlbD1cIlRhYiAxXCImZ3Q7XG4gICAmbHQ7cCZndDtcbiAgICAgVGFiIDEgY29udGVudFxuICAgJmx0Oy9wJmd0O1xuICZsdDsvdGFiJmd0O1xuICZsdDt0YWIgbGFiZWw9XCJUYWIgMlwiJmd0O1xuICAgJmx0O3AmZ3Q7XG4gICAgIFRhYiAyIGNvbnRlbnRcbiAgICZsdDsvcCZndDtcbiAmbHQ7L3RhYiZndDtcbiAmbHQ7dGFiIGxhYmVsPVwiVGFiIDNcIiA6aXMtZGlzYWJsZWQ9XCJ0cnVlXCImZ3Q7XG4gICAmbHQ7cCZndDtcbiAgICAgVGFiIDMgY29udGVudFxuICAgJmx0Oy9wJmd0O1xuICZsdDsvdGFiJmd0O1xuJmx0Oy90YWJzJmd0O1xuICAgICAgICAgICAgIDwvY29kZT5cbiAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuICAgICAgPC9kaXY+XG4gICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cbiAgICAgIDwvZGl2PlxuXG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBBcGlUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgQXBpVGFibGVcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYXBpSXRlbXM6IFt7XG4gICAgICAgIG5hbWU6ICdsYWJlbCcsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ1RoZSBsYWJsZSBvZiB0aGUgdGFiJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnaXNEaXNhYmxlZCcsXG4gICAgICAgIHR5cGU6ICdCb29sZWFuJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgICAgICBkZXNjOiAnSXMgdGhlIHRhYiBkaXNhYmxlZCBvciBub3QuIFdoZW4gc2V0IHRvIHRydWUsIHRoZSB0YWIgaXMgbm90IGNsaWNrYWJsZS4nXG4gICAgICB9XVxuICAgIH07XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHRhYnMtcGFnZS52dWU/N2E4NjZjMzdcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuICAgIEBpbXBvcnQgJy4uLy4uL3RyYW5zaXRpb25zL2ZhZGUuc2Nzcyc7XG4gICAgQGltcG9ydCAnLi9hbGVydC5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL2FsZXJ0Lmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuZXhwb3J0IGRlZmF1bHQge1xuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc1Zpc2libGU6IHRydWVcbiAgICB9O1xuICB9LFxuICBwcm9wczoge1xuICAgIHR5cGU6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICBkaXNtaXNzaWJsZToge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IHRydWVcbiAgICB9LFxuICAgIHRpbWVvdXQ6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IC0xXG4gICAgfSxcbiAgICBvbkNsb3NlZDoge1xuICAgICAgdHlwZTogRnVuY3Rpb25cbiAgICB9XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBkaXNtaXNzKCkge1xuICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICBpZiAoISF0aGlzLm9uQ2xvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLm9uQ2xvc2VkLmFwcGx5KHRoaXMpO1xuICAgICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcbiAgcmVhZHkoKSB7XG4gICAgaWYgKHRoaXMudGltZW91dCA+PSAwKSB7XG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgdGhpcy5kaXNtaXNzKCk7XG4gICAgICB9LCB0aGlzLnRpbWVvdXQpO1xuICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogaW5kZXgudnVlPzQ5OWZiZWFmXG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvY29tcG9uZW50cy91aS9pY29uJztcbiAgICBAaW1wb3J0ICcuL2NvbGxhcHNhYmxlLXBhbmVsLnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vY29sbGFwc2FibGUtcGFuZWwuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5leHBvcnQgZGVmYXVsdCB7XG4gIHByb3BzOiB7XG4gICAgaXNPcGVuOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICB9LFxuICAgIGxhYmVsOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIHRvZ2dsZU9wZW4oJGV2ZW50KSB7XG4gICAgICB0aGlzLmlzT3BlbiA9ICF0aGlzLmlzT3BlbjtcbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGluZGV4LnZ1ZT8wNWMyMjg3MFxuICoqLyIsIlxuPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICcuL2xlZ2FsLWNvbnRhaW5lci5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL2xlZ2FsLWNvbnRhaW5lci5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbiAvKlxuICAqIEFQSTogPGxlZ2FsLWNvbnRhaW5lcj48L2xlZ2FsLWNvbnRhaW5lcj5cbiAqL1xuXG5pbXBvcnQgbWl4aW5zIGZyb20gJy4uLy4uL21peGlucyc7XG5pbXBvcnQgZmluZEluZGV4IGZyb20gJ2xvZGFzaC9maW5kSW5kZXgnO1xuaW1wb3J0IGRlYm91bmNlIGZyb20gJ2xvZGFzaC9kZWJvdW5jZSc7XG5pbXBvcnQgc2V0Rm9jdXMgZnJvbSAnLi4vLi4vZGlyZWN0aXZlcy9zZXQtZm9jdXMnO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG1peGlucyxcbiAgZGlyZWN0aXZlczoge1xuICAgIHNldEZvY3VzXG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGluZGV4ZWRMZWdhbHM6IFtdLFxuICAgICAgbm9uSW5kZXhlZExlZ2FsczogW10sXG4gICAgICBhcGlMYW5nOiBudWxsLFxuICAgICAgYXBpUmVnaW9uOiBudWxsXG4gICAgfTtcbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGZldGNoTGVnYWxzKGtleXMpIHtcbiAgICAgIHJldHVybiBmZXRjaChgXG4gICAgICAgICAgJHt0aGlzLiRyb290LmxpZ2VyRW5kUG9pbnR9P2xhbmc9JHt0aGlzLmFwaUxhbmd9JnJlZ2lvbj0ke3RoaXMuYXBpUmVnaW9ufSZodG1sPXRydWVcbiAgICAgICAgYCwge1xuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICAgYXBwbGljYXRpb25LZXk6IHRoaXMuJHJvb3QubGlnZXJBcHBsaWNhdGlvbktleVxuICAgICAgICB9LFxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAga2V5czoga2V5c1xuICAgICAgICB9KVxuICAgICAgfSk7XG4gICAgfSxcbiAgICBhcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIodHlwZSwgZGF0YSkge1xuICAgICAgbGV0IHByb2Nlc3MgPSAodGFyZ2V0LCBkYXRhQXJ5KSA9PiB7XG4gICAgICAgIGRhdGFBcnkuZm9yRWFjaChsZWdhbFJlc3BvbnNlID0+IHtcbiAgICAgICAgICBsZXQgaW5kZXggPSB0YXJnZXQuZmluZEluZGV4KGwgPT4gbC5rZXkgPT09IGxlZ2FsUmVzcG9uc2Uua2V5KTtcbiAgICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xuICAgICAgICAgICAgdGFyZ2V0LiRzZXQoaW5kZXgsIHtcbiAgICAgICAgICAgICAgY29udGVudDogbGVnYWxSZXNwb25zZS5jb250ZW50LFxuICAgICAgICAgICAgICBrZXk6IGxlZ2FsUmVzcG9uc2Uua2V5XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcbiAgICAgIGlmICh0eXBlID09PSAnaW5kZXhlZCcpIHtcbiAgICAgICAgcHJvY2Vzcyh0aGlzLmluZGV4ZWRMZWdhbHMsIGRhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcyh0aGlzLm5vbkluZGV4ZWRMZWdhbHMsIGRhdGEpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZ2V0TGVnYWxzOiAoZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gZGVib3VuY2UuY2FsbCh0aGlzLCBmdW5jdGlvbigpIHtcbiAgICAgICAgbGV0IGluZGV4ZWRLZXlzID0gdGhpcy5pbmRleGVkTGVnYWxzLm1hcChsZWdhbCA9PiBsZWdhbC5rZXkpO1xuICAgICAgICBsZXQgbm9uSW5kZXhlZEtleXMgPSB0aGlzLm5vbkluZGV4ZWRMZWdhbHMubWFwKGxlZ2FsID0+IGxlZ2FsLmtleSk7XG5cbiAgICAgICAgaWYgKGluZGV4ZWRLZXlzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICB0aGlzLmZldGNoTGVnYWxzKGluZGV4ZWRLZXlzKVxuICAgICAgICAgIC50aGVuKHRoaXMucGFyc2VKU09OKVxuICAgICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgdGhpcy5hcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIoJ2luZGV4ZWQnLCBkYXRhKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAobm9uSW5kZXhlZEtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuZmV0Y2hMZWdhbHMobm9uSW5kZXhlZEtleXMpXG4gICAgICAgICAgLnRoZW4odGhpcy5wYXJzZUpTT04pXG4gICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZFJlc3BvbnNlVG9MZWdhbENvbnRhaW5lcignbm9uSW5kZXhlZCcsIGRhdGEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9LCAxMCk7XG4gICAgfSkoKVxuICB9LFxuICBldmVudHM6IHtcbiAgICAnbGVnYWw6OmNsaWNrJyhsZWdhbEtleSkge1xuICAgICAgbGV0IHRhcmdldExlZ2FsSW5kZXggPSB0aGlzLmluZGV4ZWRMZWdhbHMuZmluZEluZGV4KGwgPT4gbC5rZXkgPT09IGxlZ2FsS2V5KTtcbiAgICAgIGlmICh0YXJnZXRMZWdhbEluZGV4ID4gLTEpIHtcbiAgICAgICAgdGhpcy5pbmRleGVkTGVnYWxzLmZvckVhY2goKGwsIGkpID0+IHtcbiAgICAgICAgICBpZiAoaSAhPT0gdGFyZ2V0TGVnYWxJbmRleCkge1xuICAgICAgICAgICAgbC5pc1NlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaW5kZXhlZExlZ2Fsc1xuICAgICAgICAgICAgLiRzZXQoXG4gICAgICAgICAgICAgIGksXG4gICAgICAgICAgICAgIE9iamVjdC5hc3NpZ24oXG4gICAgICAgICAgICAgICAge30sXG4gICAgICAgICAgICAgICAgdGhpcy5pbmRleGVkTGVnYWxzW2ldLFxuICAgICAgICAgICAgICAgIHsgaXNTZWxlY3RlZDogdHJ1ZSB9XG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LFxuICAgICdsZWdhbDo6aW5pdCcobGVnYWxJbml0RGV0YWlsKSB7XG4gICAgICB0aGlzLmFwaUxhbmcgPSBsZWdhbEluaXREZXRhaWwubGFuZztcbiAgICAgIHRoaXMuYXBpUmVnaW9uID0gbGVnYWxJbml0RGV0YWlsLnJlZ2lvbjtcbiAgICAgIC8vIGNoZWNrIGlmIGxvYWRlZCBhbHJlYWR5XG4gICAgICBsZXQgY29udGFpbmVyUmVmID0gbGVnYWxJbml0RGV0YWlsLmlzTm9uSW5kZXhlZCA/IHRoaXMubm9uSW5kZXhlZExlZ2FscyA6IHRoaXMuaW5kZXhlZExlZ2FscztcbiAgICAgIGxldCBpbmRleCA9IGZpbmRJbmRleChjb250YWluZXJSZWYsIGxlZ2FsID0+IGxlZ2FsLmtleSA9PT0gbGVnYWxJbml0RGV0YWlsLmtleSk7XG4gICAgICAvLyBpZiBub3QgZm91bmRcbiAgICAgIGlmIChpbmRleCA8IDApIHtcbiAgICAgICAgaW5kZXggPSBjb250YWluZXJSZWYucHVzaChsZWdhbEluaXREZXRhaWwpIC0gMTtcbiAgICAgICAgdGhpcy5nZXRMZWdhbHMoKTtcbiAgICAgIH1cbiAgICAgIGlmICghbGVnYWxJbml0RGV0YWlsLmlzTm9uSW5kZXhlZCkge1xuICAgICAgICB0aGlzLnJvb3RCcm9hZGNhc3QoJ2xlZ2FsOjp1ZHBhdGUnLCB7XG4gICAgICAgICAga2V5OiBsZWdhbEluaXREZXRhaWwua2V5LFxuICAgICAgICAgIGlzTm9uSW5kZXhlZDogbGVnYWxJbml0RGV0YWlsLmlzTm9uSW5kZXhlZCxcbiAgICAgICAgICBpbmRleDogaW5kZXhcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBsZWdhbC1jb250YWluZXIudnVlP2E1MWVlMmQ2XG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICcuL2xlZ2FsLWNvdW50ZXIuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9sZWdhbC1jb3VudGVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuLypcbiAqIEFQSTogPGxlZ2FsLWNvdW50ZXJcbiAqICAgICAgICBsZWdhbC1rZXk9XCIoU3RyaW5nKSBrZXlcIlxuICogICAgICAgIGxlZ2FsLWxhbmc9XCIoU3RyaW5nKSBsYW5nXCJcbiAqICAgICAgICBsZWdhbC1yZWdpb249XCIoU3RyaW5nKSByZWdpb25cIlxuICogICAgICAgIGlzLW5vbi1pbmRleGVkPVwiKEJvb2xlYW4pIGlzTm9uSW5kZXhlZFwiXG4gKiAgICAgID48L2xlZ2FsLWNvdW50ZXI+XG4qL1xuXG5pbXBvcnQgbWl4aW5zIGZyb20gJy4uLy4uL21peGlucyc7XG5pbXBvcnQgZGVmZXIgZnJvbSAnbG9kYXNoL2RlZmVyJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICBtaXhpbnM6IG1peGlucyxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbGVnYWxDb3VudGVyOiBudWxsXG4gICAgfTtcbiAgfSxcbiAgcHJvcHM6IHtcbiAgICBsZWdhbEtleToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGlzTm9uSW5kZXhlZDoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlXG4gICAgfSxcbiAgICBsZWdhbExhbmc6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfSxcbiAgICBsZWdhbFJlZ2lvbjoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9XG4gIH0sXG4gIGV2ZW50czoge1xuICAgICdsZWdhbDo6dWRwYXRlJyh1cGRhdGVEZXRhaWwpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzTm9uSW5kZXhlZCAmJiB1cGRhdGVEZXRhaWwua2V5ID09PSB0aGlzLmxlZ2FsS2V5KSB7XG4gICAgICAgICAgdGhpcy5sZWdhbENvdW50ZXIgPSB1cGRhdGVEZXRhaWwuaW5kZXggKyAxO1xuICAgICAgICB9XG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgY2xpY2tIYW5kbGVyKCkge1xuICAgICAgdGhpcy5yb290QnJvYWRjYXN0KCdsZWdhbDo6Y2xpY2snLCB0aGlzLmxlZ2FsS2V5KTtcbiAgICB9XG4gIH0sXG4gIGJlZm9yZUNvbXBpbGUoKSB7XG4gIH0sXG4gIHJlYWR5KCkge1xuICAgIGRlZmVyKCgpID0+IHtcbiAgICAgIHRoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OmluaXQnLCB7XG4gICAgICAgIGtleTogdGhpcy5sZWdhbEtleSxcbiAgICAgICAgbGFuZzogdGhpcy5sZWdhbExhbmcsXG4gICAgICAgIHJlZ2lvbjogdGhpcy5sZWdhbFJlZ2lvbixcbiAgICAgICAgaXNOb25JbmRleGVkOiB0aGlzLmlzTm9uSW5kZXhlZFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGxlZ2FsLWNvdW50ZXIudnVlPzRmZTBkYzhlXG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICcuL292ZXJsYXktY29udGFpbmVyLnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vb3ZlcmxheS1jb250YWluZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG4vKlxuKiBFeDogPG92ZXJsYXktY29udGFpbmVyIGlzLXZpc2libGU9XCIoQm9vbGVhbikgZmFsc2VcIj5cbiAgICAgIDwvb3ZlcmxheS1jb250YWluZXI+XG4qL1xuY29uc3QgRVNDID0gMjc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIHByb3BzOiB7XG4gICAgaXNWaXNpYmxlOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICB9XG4gIH0sXG4gIHdhdGNoOiB7XG4gICAgaXNWaXNpYmxlKGlzVmlzaWJsZSkge1xuICAgICAgbGV0IGVsID0gd2luZG93LmRvY3VtZW50LmJvZHk7XG4gICAgICBsZXQgY2xhc3NOYW1lID0gJ25vLXNjcm9sbCc7XG4gICAgICBpZiAoaXNWaXNpYmxlKSB7XG4gICAgICAgIGlmICghIWVsLmNsYXNzTGlzdCkge1xuICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xhc3NOYW1lKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbGFzc05hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsLmNsYXNzTmFtZSA9IGVsXG4gICAgICAgICAgICAgICAgICAgICAgICAgIC5jbGFzc05hbWVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IFJlZ0V4cChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcoXnxcXFxcYiknICsgY2xhc3NOYW1lLnNwbGl0KCcgJykuam9pbignfCcpICsgJyhcXFxcYnwkKScsICdnaScpLCAnICdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSxcbiAgZXZlbnRzOiB7XG4gICAgJ292ZXJsYXlDb250YWluZXI6Om9wZW4nKCkge1xuICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuICAgIH0sXG4gICAgJ292ZXJsYXlDb250YWluZXI6OmNsb3NlJygpIHtcbiAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgfVxuICAgIH0sXG4gIHJlYWR5KCkge1xuICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGV2dCkgPT4ge1xuICAgICAgZXZ0ID0gZXZ0IHx8IHdpbmRvdy5ldmVudDtcbiAgICAgIGlmIChldnQua2V5Q29kZSA9PT0gRVNDKSB7XG4gICAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIG92ZXJsYXktY29udGFpbmVyLnZ1ZT8zZmMyMzA1OFxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi9vdmVybGF5LnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vb3ZlcmxheS5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbi8qXG4gKiBFeDogPG92ZXJsYXkgb3ZlcmxheS1rZXk9XCIoU3RyaW5nKSBrZXlcIj5cbiAqICAgICAgICBBbnkgY29udGVudFxuICogICAgICA8L292ZXJsYXk+XG4qL1xuZXhwb3J0IGRlZmF1bHQge1xuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBpc1Zpc2libGU6IGZhbHNlXG4gICAgfTtcbiAgfSxcbiAgcHJvcHM6IHtcbiAgICBvdmVybGF5S2V5OiB7XG4gICAgICB0eXBlOiBTdHJpbmdcbiAgICB9XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBjbG9zZU92ZXJsYXkoKSB7XG4gICAgICAgIHRoaXMuJGRpc3BhdGNoKCdvdmVybGF5Q29udGFpbmVyOjpjbG9zZScpO1xuICAgIH1cbiAgfSxcbiAgZXZlbnRzOiB7XG4gICAgJ292ZXJsYXk6Om9wZW4nKG92ZXJsYXlLZXkpIHtcbiAgICAgIGlmIChvdmVybGF5S2V5ID09PSB0aGlzLm92ZXJsYXlLZXkpIHtcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSB0cnVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogb3ZlcmxheS52dWU/MWYzN2ZkNGFcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJy4vc3Bpbm5lci5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL3NwaW5uZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5leHBvcnQgZGVmYXVsdCB7XG4gIHJlcGxhY2U6IHRydWUsXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFjdGl2ZTogZmFsc2VcbiAgICB9O1xuICB9LFxuICBwcm9wczoge1xuICAgIHRleHQ6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIGRlZmF1bHQ6ICcnXG4gICAgfSxcbiAgICBmdWxsU2NyZWVuOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICB9XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBzaG93KCkge1xuICAgICAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdzaG93bjo6c3Bpbm5lcicpO1xuICAgIH0sXG4gICAgaGlkZSgpIHtcbiAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG4gICAgICB0aGlzLiRyb290LiRicm9hZGNhc3QoJ2hpZGRlbjo6c3Bpbm5lcicpO1xuICAgIH1cbiAgfSxcbiAgZXZlbnRzOiB7XG4gICAgJ3Nob3c6OnNwaW5uZXInKCkge1xuICAgICAgdGhpcy5zaG93KCk7XG4gICAgfSxcbiAgICAnaGlkZTo6c3Bpbm5lcicoKSB7XG4gICAgICB0aGlzLmhpZGUoKTtcbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGluZGV4LnZ1ZT8zNjc3YzJkNVxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL2NvbXBvbmVudHMvdWkvaWNvbic7XG4gICAgQGltcG9ydCAnLi9zdGVwLXRyYWNrZXIuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9zdGVwLXRyYWNrZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5leHBvcnQgZGVmYXVsdCB7XG4gIHByb3BzOiB7XG4gICAgY29uZmlnOiB7XG4gICAgICB0eXBlOiBPYmplY3RcbiAgICB9LFxuICAgIGN1cnJlbnRTdGVwOiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAwXG4gICAgfSxcbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGNsaWNrSGFuZGxlcigkZXZlbnQsIHN0ZXAsIGluZGV4KSB7XG4gICAgICBpZiAoISFzdGVwLm9uQ2xpY2tIYW5kbGVyKSB7XG4gICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBpZiAodGhpcy5jdXJyZW50U3RlcCA+IGluZGV4KSB7XG4gICAgICAgICAgc3RlcC5vbkNsaWNrSGFuZGxlcigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBpbmRleC52dWU/MzVjMDViZGJcbiAqKi8iLCI8dGVtcGxhdGUgc3JjPVwiLi90YWIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5leHBvcnQgZGVmYXVsdCB7XG4gIHByb3BzOiB7XG4gICAgbGFiZWw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICB9LFxuICAgIGlzRGlzYWJsZWQ6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICB9LFxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0YWJJbmRleDogMCxcbiAgICAgIGlzVmlzaWJsZTogZmFsc2UsXG4gICAgfTtcbiAgfSxcbiAgY29tcHV0ZWQ6IHtcbiAgICBpc1Zpc2libGUoKSB7XG4gICAgICByZXR1cm4gKHRoaXMuJHBhcmVudC5hY3RpdmVUYWJJbmRleCA9PT0gdGhpcy50YWJJbmRleCk7XG4gICAgfSxcbiAgfSxcbiAgY3JlYXRlZCgpIHtcbiAgICB0aGlzLiRwYXJlbnQudGFicy5wdXNoKHtcbiAgICAgIGxhYmVsOiB0aGlzLmxhYmVsLFxuICAgICAgaXNEaXNhYmxlZDogdGhpcy5pc0Rpc2FibGVkLFxuICAgIH0pO1xuICB9LFxuICByZWFkeSgpIHtcbiAgICB0aGlzLiRwYXJlbnQuJGNoaWxkcmVuLmZvckVhY2goKGMsIGluZGV4KSA9PiB7XG4gICAgICBpZiAoYy4kZWwgPT09IHRoaXMuJGVsKSB7XG4gICAgICAgIHRoaXMudGFiSW5kZXggPSBpbmRleDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcbiAgYmVmb3JlRGVzdHJveSgpIHtcbiAgICB0aGlzLiRwYXJlbnQudGFicy5zcGxpY2UodGhpcy50YWJJbmRleCwgMSk7XG4gIH0sXG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB0YWIudnVlPzBjOGMyMWJmXG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICcuL3RhYnMuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi90YWJzLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuLypcbiAqICBFeDogPHRhYnMgYWN0aXZlLXRhYi1pbmRleD1cIihJbnRlZ2VyKSAwXCI+XG4gKiAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiBBXCI+XG4gKiAgICAgICAgICBBbnkgY29udGVudFxuICogICAgICAgIDwvdGFiPlxuICogICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgQlwiIGlzLWRpc2FibGVkPVwiKEJvb2xlYW4pIGZhbHNlXCI+XG4gKiAgICAgICAgICBBbnkgY29udGVudFxuICogICAgICAgIDwvdGFiPlxuICogICAgICAgPHRhYnM+XG4qL1xuZXhwb3J0IGRlZmF1bHQge1xuICBwcm9wczoge1xuICAgIGFjdGl2ZVRhYkluZGV4OiB7XG4gICAgICB0eXBlOiBOdW1iZXIsXG4gICAgICBkZWZhdWx0OiAwXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgaXNBY3RpdmUoaW5kZXgpIHtcbiAgICAgIHJldHVybiBhY3RpdmVUYWJJbmRleCA9PT0gaW5kZXg7XG4gICAgfVxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICB0YWJzOiBbXVxuICAgIH07XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICAgIGhhbmRsZVRhYkxpc3RDbGljayhpbmRleCwgdGFiKSB7XG4gICAgICAgICAgaWYgKCF0YWIuaXNEaXNhYmxlZCkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVUYWJJbmRleCA9IGluZGV4O1xuICAgICAgICAgIH1cbiAgICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogdGFicy52dWU/ZWM2NjI3YzRcbiAqKi8iLCJpbXBvcnQgR2V0U3RhcnRlZCBmcm9tICcuL3ZpZXdzL2dldC1zdGFydGVkLnZ1ZSc7XG5pbXBvcnQgU3RlcFRyYWNrZXJQYWdlIGZyb20gJy4vdmlld3Mvc3RlcC10cmFja2VyLXBhZ2UudnVlJztcbmltcG9ydCBUYWJzUGFnZSBmcm9tICcuL3ZpZXdzL3RhYnMtcGFnZS52dWUnO1xuaW1wb3J0IExlZ2FsUGFnZSBmcm9tICcuL3ZpZXdzL2xlZ2FsLXBhZ2UudnVlJztcbmltcG9ydCBPdmVybGF5UGFnZSBmcm9tICcuL3ZpZXdzL292ZXJsYXktcGFnZS52dWUnO1xuaW1wb3J0IExlZ2FsT3ZlcmxheVBhZ2UgZnJvbSAnLi92aWV3cy9sZWdhbC1vdmVybGF5LXBhZ2UudnVlJztcbmltcG9ydCBDb2xsYXBzYWJsZVBhbmVsUGFnZSBmcm9tICcuL3ZpZXdzL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlJztcbmltcG9ydCBBbGVydFBhZ2UgZnJvbSAnLi92aWV3cy9hbGVydC1wYWdlLnZ1ZSc7XG5pbXBvcnQgU3Bpbm5lclBhZ2UgZnJvbSAnLi92aWV3cy9zcGlubmVyLXBhZ2UudnVlJztcbmltcG9ydCBIeUhlYWRlclBhZ2UgZnJvbSAnLi92aWV3cy9oeS1oZWFkZXItcGFnZS52dWUnO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gICcvZ2V0LXN0YXJ0ZWQnOiB7XG4gICAgY29tcG9uZW50OiBHZXRTdGFydGVkXG4gIH0sXG4gICcvYWxlcnQnOiB7XG4gICAgY29tcG9uZW50OiB7XG4gICAgICB0ZW1wbGF0ZTogJzxhbGVydC1wYWdlPjwvYWxlcnQtcGFnZT4nLFxuICAgICAgY29tcG9uZW50czogeyBBbGVydFBhZ2UgfVxuICAgIH1cbiAgfSxcbiAgJy9zcGlubmVyJzoge1xuICAgIGNvbXBvbmVudDoge1xuICAgICAgdGVtcGxhdGU6ICc8c3Bpbm5lci1wYWdlPjwvc3Bpbm5lci1wYWdlPicsXG4gICAgICBjb21wb25lbnRzOiB7IFNwaW5uZXJQYWdlIH1cbiAgICB9XG4gIH0sXG4gICcvc3RlcC10cmFja2VyJzoge1xuICAgIGNvbXBvbmVudDoge1xuICAgICAgdGVtcGxhdGU6ICc8c3RlcC10cmFja2VyLXBhZ2U+PC9zdGVwLXRyYWNrZXItcGFnZT4nLFxuICAgICAgY29tcG9uZW50czogeyBTdGVwVHJhY2tlclBhZ2UgfVxuICAgIH1cbiAgfSxcbiAgJy90YWJzJzoge1xuICAgIGNvbXBvbmVudDoge1xuICAgICAgdGVtcGxhdGU6ICc8dGFicy1wYWdlPjwvdGFicy1wYWdlPicsXG4gICAgICBjb21wb25lbnRzOiB7IFRhYnNQYWdlIH1cbiAgICB9XG4gIH0sXG4gICcvbGVnYWwnOiB7XG4gICAgY29tcG9uZW50OiB7XG4gICAgICB0ZW1wbGF0ZTogJzxsZWdhbC1wYWdlPjwvbGVnYWwtcGFnZT4nLFxuICAgICAgY29tcG9uZW50czogeyBMZWdhbFBhZ2UgfVxuICAgIH1cbiAgfSxcbiAgJy9vdmVybGF5Jzoge1xuICAgIGNvbXBvbmVudDoge1xuICAgICAgdGVtcGxhdGU6ICc8b3ZlcmxheS1wYWdlPjwvb3ZlcmxheS1wYWdlPicsXG4gICAgICBjb21wb25lbnRzOiB7IE92ZXJsYXlQYWdlIH1cbiAgICB9XG4gIH0sXG4gICcvbGVnYWwtb3ZlcmxheSc6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPGxlZ2FsLW92ZXJsYXktcGFnZT48L2xlZ2FsLW92ZXJsYXktcGFnZT4nLFxuICAgICAgY29tcG9uZW50czogeyBMZWdhbE92ZXJsYXlQYWdlIH1cbiAgICB9XG4gIH0sXG4gICcvY29sbGFwc2FibGUtcGFuZWwnOiB7XG4gICAgY29tcG9uZW50OiB7XG4gICAgICB0ZW1wbGF0ZTogJzxjb2xsYXBzYWJsZS1wYW5lbC1wYWdlPjwvY29sbGFwc2FibGUtcGFuZWwtcGFnZT4nLFxuICAgICAgY29tcG9uZW50czogeyBDb2xsYXBzYWJsZVBhbmVsUGFnZSB9XG4gICAgfVxuICB9LFxuICAnL2h5LWhlYWRlcic6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPGh5LWhlYWRlci1wYWdlPjwvaHktaGVhZGVyLXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgSHlIZWFkZXJQYWdlIH1cbiAgICB9XG4gIH1cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2Rldi9zcmMvcm91dGVzLmpzXG4gKiovIiwiLypcbiAgQGRlc2MgQWRkIGJlaGF2aW9yIHRvIGFueSBlbGVtZW50LiBXaGVuIGNsaWNrZWQsIGl0IHdpbGwgb3BlbiB0aGUgY29ycmVzcG9uZGluZyBvdmVybGF5XG4gIEV4YW1wbGU6IDxidXR0b24gb3ZlcmxheS1vcGVuZXI9XCJteS1vdmVybGF5XCI+PC9idXR0b24+XG4qL1xuZXhwb3J0IGRlZmF1bHQge1xuICBpc0xpdGVyYWw6IHRydWUsXG4gIGV2ZW50SGFuZGxlcihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMudm0uJHJvb3QuJGJyb2FkY2FzdCgnb3ZlcmxheTo6b3BlbicsIHRoaXMuZXhwcmVzc2lvbik7XG4gICAgdGhpcy52bS4kcm9vdC4kYnJvYWRjYXN0KCdvdmVybGF5Q29udGFpbmVyOjpvcGVuJyk7XG4gIH0sXG4gIGJpbmQoKSB7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZXZlbnRIYW5kbGVyLmJpbmQodGhpcykpO1xuICB9LFxuICB1bmJpbmQoKSB7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZXZlbnRIYW5kbGVyLmJpbmQodGhpcykpO1xuICB9LFxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2RpcmVjdGl2ZXMvb3ZlcmxheS1vcGVuZXIuanNcbiAqKi8iLCJpbXBvcnQgb3ZlcmxheU9wZW5lciBmcm9tICcuL2RpcmVjdGl2ZXMvb3ZlcmxheS1vcGVuZXInO1xuaW1wb3J0IHNldEZvY3VzIGZyb20gJy4vZGlyZWN0aXZlcy9zZXQtZm9jdXMnO1xuaW1wb3J0IFN0ZXBUcmFja2VyIGZyb20gJy4vY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvaW5kZXgudnVlJztcbmltcG9ydCBPdmVybGF5Q29udGFpbmVyIGZyb20gJy4vY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZSc7XG5pbXBvcnQgT3ZlcmxheSBmcm9tICcuL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZSc7XG5pbXBvcnQgTGVnYWxDb3VudGVyIGZyb20gJy4vY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZSc7XG5pbXBvcnQgTGVnYWxDb250YWluZXIgZnJvbSAnLi9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWUnO1xuaW1wb3J0IFRhYnMgZnJvbSAnLi9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZSc7XG5pbXBvcnQgVGFiIGZyb20gJy4vY29tcG9uZW50cy90YWIvdGFiLnZ1ZSc7XG5pbXBvcnQgQ29sbGFwc2FibGVQYW5lbCBmcm9tICcuL2NvbXBvbmVudHMvY29sbGFwc2FibGUtcGFuZWwvaW5kZXgudnVlJztcbmltcG9ydCBBbGVydCBmcm9tICcuL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlJztcbmltcG9ydCBTcGlubmVyIGZyb20gJy4vY29tcG9uZW50cy9zcGlubmVyL2luZGV4LnZ1ZSc7XG5pbXBvcnQgSHlIZWFkZXIgZnJvbSAnLi9jb21wb25lbnRzL2h5LWhlYWRlci9pbmRleC52dWUnO1xuXG5sZXQgY29tcG9uZW50cyA9IHtcbiAgU3RlcFRyYWNrZXIsXG4gIE92ZXJsYXlDb250YWluZXIsXG4gIE92ZXJsYXksXG4gIExlZ2FsQ291bnRlcixcbiAgTGVnYWxDb250YWluZXIsXG4gIFRhYnMsXG4gIFRhYixcbiAgQ29sbGFwc2FibGVQYW5lbCxcbiAgQWxlcnQsXG4gIFNwaW5uZXIsXG4gIEh5SGVhZGVyXG59O1xubGV0IGRpcmVjdGl2ZXMgPSB7XG4gIG92ZXJsYXlPcGVuZXIsXG4gIHNldEZvY3VzXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGluc3RhbGwoVnVlKSB7XG4gIGZvciAobGV0IG5hbWUgaW4gY29tcG9uZW50cykge1xuICAgIFZ1ZS5jb21wb25lbnQobmFtZSwgY29tcG9uZW50c1tuYW1lXSk7XG4gIH1cbiAgZm9yIChsZXQgbmFtZSBpbiBkaXJlY3RpdmVzKSB7XG4gICAgVnVlLmRpcmVjdGl2ZShuYW1lLCBkaXJlY3RpdmVzW25hbWVdKTtcbiAgfVxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21haW4uanNcbiAqKi8iLCJleHBvcnQgZGVmYXVsdCB7XG4gIG1ldGhvZHM6IHtcbiAgICByb290QnJvYWRjYXN0KC4uLmFyZ3MpIHtcbiAgICAgIHRoaXMuJGJyb2FkY2FzdC5hcHBseSh0aGlzLiRyb290LCBhcmdzKTtcbiAgICB9LFxuICB9LFxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21peGlucy9ldmVudHMuanNcbiAqKi8iLCJleHBvcnQgZGVmYXVsdCB7XG4gIG1ldGhvZHM6IHtcbiAgICBwYXJzZUpTT04ocmVzcG9uc2UpIHtcbiAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgfSxcbiAgfSxcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9taXhpbnMveGhyLXJlc3BvbnNlLmpzXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uc2dfYy1hcGktdGFibGV7Ym9yZGVyLXNwYWNpbmc6MCAxMHB4O3dpZHRoOjEwMCV9LnNnX2MtYXBpLXRhYmxlIHRyey13ZWJraXQtYm94LWZsZXg6MTstbXMtZmxleDoxO2ZsZXg6MX0uc2dfYy1hcGktdGFibGUgdGgsLnNnX2MtYXBpLXRhYmxlIHRyOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2VlZX0uc2dfYy1hcGktdGFibGUgdGR7dGV4dC1hbGlnbjpjZW50ZXJ9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDcyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5zZ19jLW5hdntkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmZpeGVkO2xlZnQ6MDt3aWR0aDoyNXJlbTtoZWlnaHQ6MTAwJTtib3JkZXItcmlnaHQ6LjFyZW0gc29saWQgI2UyZTJlMjtwYWRkaW5nOjJyZW07cGFkZGluZy10b3A6NjhweDtvdmVyZmxvdy14OmhpZGRlbjtvdmVyZmxvdy15OmF1dG87YmFja2dyb3VuZC1jb2xvcjojZmZmO3otaW5kZXg6OTk5fS5zZ19jLW5hdl9fc2VjdGlvbntmb250LWZhbWlseTpUZWx1cyBNZWRpdW0sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Zm9udC1zaXplOjEuMnJlbTtib3JkZXItYm90dG9tOi4xcmVtIHNvbGlkICNlMmUyZTI7cGFkZGluZy10b3A6MXJlbTtwYWRkaW5nLWJvdHRvbTouNXJlbTttYXJnaW46MXJlbSAwfS5zZ19jLW5hdl9fbGlzdC1pdGVte3BhZGRpbmc6NXB4IDB9LnNnX2MtbmF2X19saW5rOmhvdmVye2NvbG9yOiM4YzY4YTZ9LnNnX2MtbmF2X19saW5rLS1hY3RpdmV7Y29sb3I6IzU3YTcwOH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA3M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJoZWFkZXIuc2dfYy1zaXRlLWhlYWRlcntiYWNrZ3JvdW5kLWNvbG9yOiM0YjI4NmQ7aGVpZ2h0OjY4cHg7dGV4dC1hbGlnbjpsZWZ0O3Bvc2l0aW9uOmZpeGVkO3dpZHRoOjEwMCU7ei1pbmRleDo5OTk5fWhlYWRlci5zZ19jLXNpdGUtaGVhZGVyIC5zZ19jLXNpdGUtaGVhZGVyX19jb250YWluZXJ7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJX1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlcl9fY29udGFpbmVyIGltZy5sb2dve2hlaWdodDoxMDAlO3BhZGRpbmc6MjBweDtkaXNwbGF5OmlubGluZS1ibG9jazttYXgtd2lkdGg6MTAwJX1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlcl9fdG9nZ2xlYnRue2NvbG9yOiNmZmY7Zm9udC1zaXplOjJyZW07bWFyZ2luOjA7YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuMSk7cGFkZGluZzoxLjVyZW07ZmxvYXQ6bGVmdDtjdXJzb3I6cG9pbnRlcjtib3JkZXI6MDtoZWlnaHQ6MTAwJTtkaXNwbGF5OmlubGluZS1ibG9ja31cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA3NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJib2R5e2JhY2tncm91bmQtY29sb3I6I2Y1ZjZmN30uc2dfYy1zaXRlX19tYWlue3BhZGRpbmctdG9wOjY4cHg7bWFyZ2luLWxlZnQ6MjVyZW19QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1OTlweCl7LnNnX2Mtc2l0ZV9fbWFpbnttYXJnaW4tbGVmdDowfX0uc2dfYy1kZW1ve21hcmdpbjoyMHB4IDB9LnNnX2MtZGVtb19fY29udGFpbmVye2JhY2tncm91bmQtY29sb3I6I2ZmZjtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyOjFweCBzb2xpZCAjZWVlO3BhZGRpbmc6MjVweDttYXJnaW46MjBweCAwfWNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2NvbG9yOiMwMDA7YmFja2dyb3VuZDpub25lO3RleHQtc2hhZG93OjAgMXB4ICNmZmY7Zm9udC1mYW1pbHk6Q29uc29sYXMsTW9uYWNvLEFuZGFsZSBNb25vLFVidW50dSBNb25vLG1vbm9zcGFjZTt0ZXh0LWFsaWduOmxlZnQ7d2hpdGUtc3BhY2U6cHJlO3dvcmQtc3BhY2luZzpub3JtYWw7d29yZC1icmVhazpub3JtYWw7d29yZC13cmFwOm5vcm1hbDtsaW5lLWhlaWdodDoxLjU7LW1vei10YWItc2l6ZTo0Oy1vLXRhYi1zaXplOjQ7dGFiLXNpemU6NDstd2Via2l0LWh5cGhlbnM6bm9uZTstbXMtaHlwaGVuczpub25lO2h5cGhlbnM6bm9uZX1jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixjb2RlW2NsYXNzKj1sYW5ndWFnZS1dIDo6LW1vei1zZWxlY3Rpb24scHJlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjotbW96LXNlbGVjdGlvbnt0ZXh0LXNoYWRvdzpub25lO2JhY2tncm91bmQ6I2IzZDRmY31jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjpzZWxlY3Rpb24sY29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSA6OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV06OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjpzZWxlY3Rpb257dGV4dC1zaGFkb3c6bm9uZTtiYWNrZ3JvdW5kOiNiM2Q0ZmN9QG1lZGlhIHByaW50e2NvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de3RleHQtc2hhZG93Om5vbmV9fXByZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOjFlbTttYXJnaW46LjVlbSAwO292ZXJmbG93OmF1dG99Om5vdChwcmUpPmNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2JhY2tncm91bmQ6I2Y1ZjJmMH06bm90KHByZSk+Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOi4xZW07Ym9yZGVyLXJhZGl1czouM2VtO3doaXRlLXNwYWNlOm5vcm1hbH0udG9rZW4uY2RhdGEsLnRva2VuLmNvbW1lbnQsLnRva2VuLmRvY3R5cGUsLnRva2VuLnByb2xvZ3tjb2xvcjojNzA4MDkwfS50b2tlbi5wdW5jdHVhdGlvbntjb2xvcjojOTk5fS5uYW1lc3BhY2V7b3BhY2l0eTouN30udG9rZW4uYm9vbGVhbiwudG9rZW4uY29uc3RhbnQsLnRva2VuLmRlbGV0ZWQsLnRva2VuLm51bWJlciwudG9rZW4ucHJvcGVydHksLnRva2VuLnN5bWJvbCwudG9rZW4udGFne2NvbG9yOiM5MDV9LnRva2VuLmF0dHItbmFtZSwudG9rZW4uYnVpbHRpbiwudG9rZW4uY2hhciwudG9rZW4uaW5zZXJ0ZWQsLnRva2VuLnNlbGVjdG9yLC50b2tlbi5zdHJpbmd7Y29sb3I6IzY5MH0ubGFuZ3VhZ2UtY3NzIC50b2tlbi5zdHJpbmcsLnN0eWxlIC50b2tlbi5zdHJpbmcsLnRva2VuLmVudGl0eSwudG9rZW4ub3BlcmF0b3IsLnRva2VuLnVybHtjb2xvcjojYTY3ZjU5O2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsLjUpfS50b2tlbi5hdHJ1bGUsLnRva2VuLmF0dHItdmFsdWUsLnRva2VuLmtleXdvcmR7Y29sb3I6IzA3YX0udG9rZW4uZnVuY3Rpb257Y29sb3I6I2RkNGE2OH0udG9rZW4uaW1wb3J0YW50LC50b2tlbi5yZWdleCwudG9rZW4udmFyaWFibGV7Y29sb3I6I2U5MH0udG9rZW4uYm9sZCwudG9rZW4uaW1wb3J0YW50e2ZvbnQtd2VpZ2h0OjcwMH0udG9rZW4uaXRhbGlje2ZvbnQtc3R5bGU6aXRhbGljfS50b2tlbi5lbnRpdHl7Y3Vyc29yOmhlbHB9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2dldC1zdGFydGVkLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDc1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5mYWRlLXRyYW5zaXRpb257LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZX0uZmFkZS1lbnRlciwuZmFkZS1sZWF2ZXtvcGFjaXR5OjB9LmMtYWxlcnR7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzo3cHggMTVweDttYXJnaW4tYm90dG9tOjFyZW07Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOi4yNXJlbX0uYy1hbGVydC0taW5mb3tiYWNrZ3JvdW5kLWNvbG9yOiMzMzM7Ym9yZGVyLWNvbG9yOiMwMDA7Y29sb3I6I2ZmZn0uYy1hbGVydC0taW5mbyBidXR0b257Y29sb3I6I2ZmZn0uYy1hbGVydC0tc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOiNlNmZmY2M7Ym9yZGVyLWNvbG9yOiM5ZjM7Y29sb3I6IzQwODAwMH0uYy1hbGVydC0tZXJyb3J7YmFja2dyb3VuZC1jb2xvcjojZjhkZGUzO2JvcmRlci1jb2xvcjojZjJjMGNhO2NvbG9yOiNjODEyMzV9LmMtYWxlcnRfX2Nsb3NlLWJ1dHRvbntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDoxMHB4Oy13ZWJraXQtYXBwZWFyYW5jZTpub25lO3BhZGRpbmc6MDtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOjAgMDtib3JkZXI6MDtmb250LXNpemU6Mi41cmVtO29wYWNpdHk6LjI7bGluZS1oZWlnaHQ6MzBweH0uYy1hbGVydF9fY2xvc2UtYnV0dG9uOmhvdmVye29wYWNpdHk6LjN9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9hbGVydC9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA3NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uYy1jb2xsYXBzYWJsZS1wYW5lbHtib3JkZXI6MXB4IHNvbGlkICNlMmUyZTI7Ym94LXNoYWRvdzowIDFweCAzcHggMXB4ICNlMmUyZTJ9LmMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlcntjdXJzb3I6cG9pbnRlcjtwYWRkaW5nOjEwcHggMTVweDtwb3NpdGlvbjpyZWxhdGl2ZX0uYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyOmFmdGVye3Bvc2l0aW9uOmFic29sdXRlO3JpZ2h0OjFlbTt0b3A6Ljc1ZW07Zm9udC1zaXplOi43NWVtO2ZvbnQtZmFtaWx5OlRlbHVzIEljb247Y29udGVudDonXFxcXEUxMTQnO2NvbG9yOiM1N2E3MDh9LmMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlci0tb3BlbjphZnRlcntjb250ZW50OidcXFxcRTExNyd9LmMtY29sbGFwc2FibGUtcGFuZWxfX2JvZHl7Ym9yZGVyLXRvcDoxcHggc29saWQgI2UyZTJlMjttYXgtaGVpZ2h0OjA7cGFkZGluZzowIDE1cHg7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZS1pbi1vdXQ7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2UtaW4tb3V0O292ZXJmbG93OmhpZGRlbjtvcGFjaXR5OjB9LmMtY29sbGFwc2FibGUtcGFuZWxfX2JvZHktLW9wZW57b3BhY2l0eToxO3BhZGRpbmc6MTVweDttYXgtaGVpZ2h0Ojk5OTlweH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDc3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIlwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvaHktaGVhZGVyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDc4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLWxlZ2FsLWNvbnRhaW5lcl9fb3JkZXJlZC1saXN0e21hcmdpbi10b3A6MTBweDttYXJnaW4tYm90dG9tOjIwcHg7bGlzdC1zdHlsZTpkZWNpbWFsO2xpc3Qtc3R5bGUtdHlwZTpkZWNpbWFsO3BhZGRpbmctbGVmdDoyMHB4fS5jLWxlZ2FsLWNvbnRhaW5lcl9fdW5vcmRlcmVkLWxpc3R7bWFyZ2luLXRvcDoxMHB4O21hcmdpbi1ib3R0b206MjBweDtwYWRkaW5nLWxlZnQ6MjBweDtsaXN0LXN0eWxlOm5vbmU7bGlzdC1zdHlsZS10eXBlOm5vbmV9LmMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW17bGluZS1oZWlnaHQ6MTlweDttYXJnaW4tYm90dG9tOjEwcHg7cGFkZGluZzoxMHB4fS5jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtLS1hY3RpdmV7YmFja2dyb3VuZC1jb2xvcjojZjlmMWZmfS5jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtIGF7Y29sb3I6IzQ5MTY2ZDt0ZXh0LWRlY29yYXRpb246bm9uZTtib3JkZXItYm90dG9tOjFweCBkb3R0ZWQ7cGFkZGluZy1ib3R0b206MXB4fS5jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtIGE6aG92ZXJ7Y29sb3I6IzhjNjhhNn1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWVcbiAqKiBtb2R1bGUgaWQgPSA3OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy1sZWdhbC1zdXB7Zm9udC1zaXplOi43NWVtO2xpbmUtaGVpZ2h0OjA7dmVydGljYWwtYWxpZ246c3VwZXI7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dG9wOjAhaW1wb3J0YW50O2N1cnNvcjpwb2ludGVyfS5jLWxlZ2FsLXN1cCBhe2NvbG9yOiM0OTE2NmR9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5uby1zY3JvbGx7b3ZlcmZsb3cteDpoaWRkZW47b3ZlcmZsb3c6aGlkZGVuO292ZXJmbG93LXk6aGlkZGVuO3Bvc2l0aW9uOnJlbGF0aXZlO2hlaWdodDoxMDAlfS5jLW92ZXJsYXktY29udGFpbmVyX19jdXJ0YWlue29wYWNpdHk6MDstd2Via2l0LXRyYW5zaXRpb246b3BhY2l0eSAuN3MgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKTt0cmFuc2l0aW9uOm9wYWNpdHkgLjdzIGN1YmljLWJlemllciguMjMsMSwuMzIsMSl9LmMtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW4tLWFjdGl2ZXtvcGFjaXR5OjE7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC41NSk7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO3JpZ2h0OjA7Ym90dG9tOjB9LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlze3Bvc2l0aW9uOmZpeGVkO3JpZ2h0OjA7dG9wOjA7Ym90dG9tOjA7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC41KTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKDEwMCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDEwMCUpOy13ZWJraXQtdHJhbnNpdGlvbjouN3MgY3ViaWMtYmV6aWVyKC4yMywxLC4zMiwxKTt0cmFuc2l0aW9uOi43cyBjdWJpYy1iZXppZXIoLjIzLDEsLjMyLDEpfUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NTk5cHgpey5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5c3t3aWR0aDoxMDAlfX1AbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjYwMHB4KXsuYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXN7d2lkdGg6NjYlfX0uYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXMtLWFjdGl2ZXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDApO3otaW5kZXg6OTk5OTl9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDgxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLW92ZXJsYXl7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9LmMtb3ZlcmxheV9faGVhZGVye3BhZGRpbmc6MjBweDtwb3NpdGlvbjpmaXhlZDt0b3A6MDtoZWlnaHQ6NzVweDt3aWR0aDoxMDAlO2JvcmRlci1ib3R0b206MXB4IHNvbGlkICNlMmUyZTI7YmFja2dyb3VuZC1jb2xvcjojZjVmNmY3fS5jLW92ZXJsYXlfX2Nsb3NlLWJ1dHRvbntjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOjA7Ym9yZGVyOjA7cG9zaXRpb246YWJzb2x1dGU7dG9wOjJyZW07cmlnaHQ6MXJlbTtmb250LWZhbWlseTpUZWx1cyBJY29uO2ZvbnQtc2l6ZToyZW07Y29sb3I6IzQ5MTY2ZH0uYy1vdmVybGF5X19jbG9zZS1idXR0b246YmVmb3Jle2NvbnRlbnQ6J1xcXFxFMTA2J30uYy1vdmVybGF5X19ib2R5e3Bvc2l0aW9uOmZpeGVkOy13ZWJraXQtb3ZlcmZsb3ctc2Nyb2xsaW5nOnRvdWNoO292ZXJmbG93LXk6c2Nyb2xsO3RvcDo3NXB4O2JvdHRvbTowO3dpZHRoOjEwMCU7cGFkZGluZzoyMHB4IDIwcHggNTBweH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS52dWVcbiAqKiBtb2R1bGUgaWQgPSA4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJALXdlYmtpdC1rZXlmcmFtZXMgcm90YXRle3Rvey13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxdHVybik7dHJhbnNmb3JtOnJvdGF0ZSgxdHVybil9fUBrZXlmcmFtZXMgcm90YXRle3Rvey13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxdHVybik7dHJhbnNmb3JtOnJvdGF0ZSgxdHVybil9fUAtd2Via2l0LWtleWZyYW1lcyBkYXNoezAle3N0cm9rZS1kYXNoYXJyYXk6MSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6MH01MCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTM1fXRve3N0cm9rZS1kYXNoYXJyYXk6ODksMjAwO3N0cm9rZS1kYXNob2Zmc2V0Oi0xMjR9fUBrZXlmcmFtZXMgZGFzaHswJXtzdHJva2UtZGFzaGFycmF5OjEsMjAwO3N0cm9rZS1kYXNob2Zmc2V0OjB9NTAle3N0cm9rZS1kYXNoYXJyYXk6ODksMjAwO3N0cm9rZS1kYXNob2Zmc2V0Oi0zNX10b3tzdHJva2UtZGFzaGFycmF5Ojg5LDIwMDtzdHJva2UtZGFzaG9mZnNldDotMTI0fX1ALXdlYmtpdC1rZXlmcmFtZXMgc3Bpbm5lci1jb2xvcnswJSx0b3tzdHJva2U6IzZjMH0yNSV7c3Ryb2tlOiM2YzB9NTAle3N0cm9rZTojNTdhNzA4fTc1JXtzdHJva2U6IzU3YTcwOH19QGtleWZyYW1lcyBzcGlubmVyLWNvbG9yezAlLHRve3N0cm9rZTojNmMwfTI1JXtzdHJva2U6IzZjMH01MCV7c3Ryb2tlOiM1N2E3MDh9NzUle3N0cm9rZTojNTdhNzA4fX0uYy1zcGlubmVye2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LXdlYmtpdC1ib3gtYWxpZ246Y2VudGVyOy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7ZGlzcGxheTotd2Via2l0LWZsZXg7LXdlYmtpdC1hbGlnbi1pdGVtczpjZW50ZXI7LXdlYmtpdC1ib3gtcGFjazpjZW50ZXI7LW1zLWZsZXgtcGFjazpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjttYXJnaW46YXV0bzstd2Via2l0LWJveC1vcmllbnQ6dmVydGljYWw7LXdlYmtpdC1ib3gtZGlyZWN0aW9uOm5vcm1hbDstbXMtZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0uYy1zcGlubmVyLS1mdWxsc2NyZWVue3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtyaWdodDowO2JvdHRvbTowO3otaW5kZXg6OTk5ODt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsLjgpfS5jLXNwaW5uZXIgc3Zne2FuaW1hdGlvbi1uYW1lOnJvdGF0ZTstd2Via2l0LWFuaW1hdGlvbi1uYW1lOnJvdGF0ZTstbW96LWFuaW1hdGlvbi1uYW1lOnJvdGF0ZTthbmltYXRpb24tZHVyYXRpb246MS44czstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjoxLjhzOy1tb3otYW5pbWF0aW9uLWR1cmF0aW9uOjEuOHM7YW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZTstd2Via2l0LWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6aW5maW5pdGU7LW1vei1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50OmluZmluaXRlO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246bGluZWFyOy13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpsaW5lYXI7LW1vei1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmxpbmVhcjtoZWlnaHQ6MTAwcHg7d2lkdGg6MTAwcHh9LmMtc3Bpbm5lciBjaXJjbGV7YW5pbWF0aW9uOmRhc2ggMS43cyBlYXNlLWluLW91dCBpbmZpbml0ZSAwcyxzcGlubmVyLWNvbG9yIDZzIGVhc2UtaW4tb3V0IGluZmluaXRlIC0uNzVzOy13ZWJraXQtYW5pbWF0aW9uOmRhc2ggMS43cyBlYXNlLWluLW91dCBpbmZpbml0ZSAwcyxzcGlubmVyLWNvbG9yIDZzIGVhc2UtaW4tb3V0IGluZmluaXRlIC0uNzVzOy1tb3otYW5pbWF0aW9uOmRhc2ggMS43cyBlYXNlLWluLW91dCBpbmZpbml0ZSAwcyxzcGlubmVyLWNvbG9yIDZzIGVhc2UtaW4tb3V0IGluZmluaXRlIC0uNzVzfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvc3Bpbm5lci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA4M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy1zdGVwLXRyYWNrZXJfX2ljb24sLmh5X2MtaWNvbntmb250LWZhbWlseTpUZWx1cyBJY29uLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO3RleHQtZGVjb3JhdGlvbjpub25lO3RleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTtjb2xvcjppbmhlcml0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtmb250LXNpemU6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0fS5oeV9jLWljb25fX3NxdWFyZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6Mi41cmVtO2xpbmUtaGVpZ2h0OjNyZW07d2lkdGg6M3JlbTtoZWlnaHQ6M3JlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS0yeHtmb250LXNpemU6MmVtfS5oeV9jLWljb24tLTN4e2ZvbnQtc2l6ZTozZW19Lmh5X2MtaWNvbi0tNHh7Zm9udC1zaXplOjRlbX0uaHlfYy1pY29uX19zdHlsZWd1aWRle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToycmVtO2xpbmUtaGVpZ2h0OjRyZW07d2lkdGg6NHJlbTtoZWlnaHQ6NHJlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS1jaXJjbGUtdGhpY2stb3V0bGluZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5oeV9jLWljb24tLWNpcmNsZS1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDVcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtbG9nbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDlcXFwifS5oeV9jLWljb24tLWJhci1jaGFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTBcXFwifS5oeV9jLWljb24tLXBpY3R1cmUtZnJhbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDExXFxcIn0uaHlfYy1pY29uLS1wYXBlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTJcXFwifS5oeV9jLWljb24tLXBhcGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxM1xcXCJ9Lmh5X2MtaWNvbi0tZm9sZGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNFxcXCJ9Lmh5X2MtaWNvbi0tc2hhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE1XFxcIn0uaHlfYy1pY29uLS1tYWduaWZ5LWdsYXNzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNlxcXCJ9Lmh5X2MtaWNvbi0td2FybmluZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMThcXFwifS5oeV9jLWljb24tLXN0YXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE5XFxcIn0uaHlfYy1pY29uLS1zdGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMFxcXCJ9Lmh5X2MtaWNvbi0taGVhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIxXFxcIn0uaHlfYy1pY29uLS1saWZlc2F2ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIyXFxcIn0uaHlfYy1pY29uLS1oYW1idXJnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI0XFxcIn0uaHlfYy1pY29uLS1ncmlkLXNxdWFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjVcXFwifS5oeV9jLWljb24tLWdyaWQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjZcXFwifS5oeV9jLWljb24tLWxpZ2h0YnVsYjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjdcXFwifS5oeV9jLWljb24tLXNwZWVkb21ldGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOFxcXCJ9Lmh5X2MtaWNvbi0tYWRkLXJlbW92ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjlcXFwifS5oeV9jLWljb24tLWNhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMwXFxcIn0uaHlfYy1pY29uLS10d2l0dGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMVxcXCJ9Lmh5X2MtaWNvbi0tZmFjZWJvb2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMyXFxcIn0uaHlfYy1pY29uLS15b3V0dWJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzM1xcXCJ9Lmh5X2MtaWNvbi0tZ29vZ2xlLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM0XFxcIn0uaHlfYy1pY29uLS10cmVuZC1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNVxcXCJ9Lmh5X2MtaWNvbi0tcGxheS1idXR0b24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM2XFxcIn0uaHlfYy1pY29uLS12aWRlby1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzdcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM4XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzlcXFwifS5oeV9jLWljb24tLWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MFxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQxXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MlxcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NFxcXCJ9Lmh5X2MtaWNvbi0tbW91c2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ1XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDZcXFwifS5oeV9jLWljb24tLXBhcGVyLW5vdGVzLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0N1xcXCJ9Lmh5X2MtaWNvbi0tdHY6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ4XFxcIn0uaHlfYy1pY29uLS1maWxtOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OVxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUwXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUxXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MlxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTNcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTVcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NlxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1N1xcXCJ9Lmh5X2MtaWNvbi0tdXNlcnM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU5XFxcIn0uaHlfYy1pY29uLS11c2Vycy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MFxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjJcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtYm94ZWQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYzXFxcIn0uaHlfYy1pY29uLS1nZWFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NFxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NVxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjZcXFwifS5oeV9jLWljb24tLXBhZGxvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY4XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrLWludmVyZXRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjlcXFwifS5oeV9jLWljb24tLXN0YWNrZWQtcGFwZXJzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MVxcXCJ9Lmh5X2MtaWNvbi0tbXVzaWMtbm90ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzJcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDczXFxcIn0uaHlfYy1pY29uLS10YWJsZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc0XFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc1XFxcIn0uaHlfYy1pY29uLS1tb3VzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzZcXFwifS5oeV9jLWljb24tLXByaWNldGFnLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3N1xcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc4XFxcIn0uaHlfYy1pY29uLS10di1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzlcXFwifS5oeV9jLWljb24tLWZpbG0tY2xhcHBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODBcXFwifS5oeV9jLWljb24tLWVudmVsb3BlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MVxcXCJ9Lmh5X2MtaWNvbi0tcGhvbmUtaGFuZHNldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODJcXFwifS5oeV9jLWljb24tLXVzYi1zdGljay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODNcXFwifS5oeV9jLWljb24tLWhvbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg0XFxcIn0uaHlfYy1pY29uLS1ob21lLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg1XFxcIn0uaHlfYy1pY29uLS1ob21lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NlxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTFcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkyXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5M1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk0XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5N1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOThcXFwifS5oeV9jLWljb24tLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk5XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDJcXFwifS5oeV9jLWljb24tLXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA0XFxcIn0uaHlfYy1pY29uLS14LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA1XFxcIn0uaHlfYy1pY29uLS14LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNlxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOFxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA5XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTFcXFwifS5oeV9jLWljb24tLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEyXFxcIn0uaHlfYy1pY29uLS1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEzXFxcIn0uaHlfYy1pY29uLS1wbHVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNFxcXCJ9Lmh5X2MtaWNvbi0tbWludXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE1XFxcIn0uaHlfYy1pY29uLS1taW51cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNlxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE3XFxcIn0uaHlfYy1pY29uLS1jaGF0LWJ1YmJsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTlcXFwifS5oeV9jLWljb24tLWNoYXQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjBcXFwifS5oeV9jLWljb24tLWNoYXQtY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIxXFxcIn0uaHlfYy1pY29uLS1jaGF0LXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIyXFxcIn0uaHlfYy1pY29uLS1jaGF0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyM1xcXCJ9Lmh5X2MtaWNvbi0tc2ltLWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI1XFxcIn0uaHlfYy1pY29uLS1jYWxjdWxhdG9yOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNlxcXCJ9Lmh5X2MtaWNvbi0tYmx1ZXRvb3RoLWhlYWRzZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI3XFxcIn0uaHlfYy1pY29uLS1vdXRnb2luZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyOVxcXCJ9Lmh5X2MtaWNvbi0taW5jb21pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzBcXFwifS5oeV9jLWljb24tLWNhdXRpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMxXFxcIn0uaHlfYy1pY29uLS13aWZpLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMlxcXCJ9Lmh5X2MtaWNvbi0td2lmaTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzNcXFwifS5oeV9jLWljb24tLXRoaW4tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNVxcXCJ9Lmh5X2MtaWNvbi0taW5mby1pbnZlcnRlZDpiZWZvcmUsLmh5X2MtaWNvbi0taW5mbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzZcXFwifS5oeV9jLWljb24tLXRyZW5kLXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzOFxcXCJ9Lmh5X2MtaWNvbi0tZ2xvYmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQwXFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQyXFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ0XFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NVxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ2XFxcIn0uaHlfYy1pY29uLS1vdmVydmlldy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDdcXFwifS5oeV9jLWljb24tLXRlbHVzLWNpcmNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDhcXFwifS5oeV9jLWljb24tLXB1bHNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OVxcXCJ9Lmh5X2MtaWNvbi0tbWlrZS1tb2JpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUwXFxcIn0uaHlfYy1pY29uLS1yZXdhcmRzLWJhZGdlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MVxcXCJ9Lmh5X2MtaWNvbi0tZmlsdGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MlxcXCJ9Lmh5X2MtaWNvbi0tc2NoZWR1bGUtdGFsazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTNcXFwifS5oeV9jLWljb24tLXdhcm5pbmc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU0XFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU1XFxcIn0uaHlfYy1pY29uLS1jYXJ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NlxcXCJ9Lmh5X2MtaWNvbi0tbGl2ZS1jaGF0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1N1xcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNThcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3Q6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU5XFxcIn0uaHlfYy1pY29uLS1jbG91ZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjBcXFwifS5oeV9jLWljb24tLWRhdGE6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYxXFxcIn0uaHlfYy1pY29uLS1kZWxpdmVyeS10cnVjazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjJcXFwifS5oeV9jLWljb24tLXByb3RlY3Rpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYzXFxcIn0uaHlfYy1pY29uLS1jb2xvdXItcGlja2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NFxcXCJ9Lmh5X2MtaWNvbi0tbXVsdGktYWNjb3VudC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjVcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NlxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY3XFxcIn0uaHlfYy1pY29uLS1kb2xsYXItc2lnbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjhcXFwifS5oeV9jLWljb24tLWxpbmstYWNjb3VudDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjlcXFwifS5oeV9jLWljb24tLWRhdGEtbWFuYWdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzBcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MVxcXCJ9Lmh5X2MtaWNvbi0tdG9vbHMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcyXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzNcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NFxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NVxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NlxcXCJ9Lmh5X2MtaWNvbi0tbGlua2VkLWluLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3N1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc4XFxcIn0uaHlfYy1pY29uLS1taWNyb3Bob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgwXFxcIn0uaHlfYy1pY29uLS1uZXR3b3JraW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MVxcXCJ9Lmh5X2MtaWNvbi0tY3ljbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgyXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgzXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg0XFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWFkZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODVcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NlxcXCJ9LmMtc3RlcC10cmFja2Vye2xpc3Qtc3R5bGU6bm9uZTtwYWRkaW5nOjA7cG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTotd2Via2l0LWJveDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstd2Via2l0LWJveC1wYWNrOmp1c3RpZnk7LW1zLWZsZXgtcGFjazpqdXN0aWZ5O2p1c3RpZnktY29udGVudDpzcGFjZS1iZXR3ZWVuO21hcmdpbjoxcmVtIC0xLjVyZW19QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDo2MDBweCl7LmMtc3RlcC10cmFja2Vye3BhZGRpbmctYm90dG9tOjIuNXJlbTttYXJnaW46MXJlbSAwfX0uYy1zdGVwLXRyYWNrZXJfX3N0ZXB7d2lkdGg6MTAwJTtwb3NpdGlvbjpyZWxhdGl2ZTt0ZXh0LWFsaWduOmNlbnRlcn0uYy1zdGVwLXRyYWNrZXJfX3N0ZXA6YWZ0ZXIsLmMtc3RlcC10cmFja2VyX19zdGVwOmJlZm9yZXtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6NTAlOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVkoLTUwJSk7d2lkdGg6Y2FsYyg1MCUgLSAxLjRyZW0pO2NvbnRlbnQ6JyAnO2JvcmRlci1ib3R0b206LjZyZW0gc29saWQgI2FlYWVhZX0uYy1zdGVwLXRyYWNrZXJfX3N0ZXA6YmVmb3Jle2xlZnQ6MH0uYy1zdGVwLXRyYWNrZXJfX3N0ZXA6YWZ0ZXJ7cmlnaHQ6MH0uYy1zdGVwLXRyYWNrZXIgLmMtc3RlcC10cmFja2VyX19zdGVwOmZpcnN0LWNoaWxkOmJlZm9yZSwuYy1zdGVwLXRyYWNrZXIgLmMtc3RlcC10cmFja2VyX19zdGVwOmxhc3QtY2hpbGQ6YWZ0ZXJ7Y29udGVudDpub25lfS5jLXN0ZXAtdHJhY2tlcl9fbGFiZWx7cG9zaXRpb246YWJzb2x1dGU7Ym90dG9tOi0zcmVtO2xlZnQ6MDtmb250LXNpemU6MS43cmVtO3dpZHRoOjEwMCU7aGVpZ2h0OjIuNXJlbTtmb250LWZhbWlseTpUZWx1cyBSZWd1bGFyLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiM2NjZ9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1OTlweCl7LmMtc3RlcC10cmFja2VyX19sYWJlbHtkaXNwbGF5Om5vbmV9fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlIC5jLXN0ZXAtdHJhY2tlcl9fbGFiZWx7Zm9udC1mYW1pbHk6VGVsdXMgTWVkaXVtLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiM0MDgwMDB9LmMtc3RlcC10cmFja2VyX19pY29ue2ZvbnQtc2l6ZTozcmVtO2NvbG9yOiNhZWFlYWV9LmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9LmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9LmMtc3RlcC10cmFja2VyX19zZXRwLS1jbGlja2FibGUgYXtjdXJzb3I6cG9pbnRlcn0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlOmFmdGVye2JvcmRlci1ib3R0b206LjZyZW0gc29saWQgIzU3YTcwOH0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlIC5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlIC5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmUsLmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbG9yOiM1N2E3MDh9LmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSsuYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZTpiZWZvcmUsLmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSsuYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlOmJlZm9yZXtib3JkZXItYm90dG9tOi42cmVtIHNvbGlkICM1N2E3MDh9LmMtc3RlcC10cmFja2VyLW1vYmlsZS1sYWJlbHtmb250LXNpemU6MS43cmVtO3RleHQtYWxpZ246Y2VudGVyO2ZvbnQtZmFtaWx5OlRlbHVzIFJlZ3VsYXIsSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6IzY2Nn1AbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjYwMHB4KXsuYy1zdGVwLXRyYWNrZXItbW9iaWxlLWxhYmVse2Rpc3BsYXk6bm9uZX19LmMtc3RlcC10cmFja2VyLW1vYmlsZS1sYWJlbF9fc3RlcHtmb250LWZhbWlseTpUZWx1cyBNZWRpdW0sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6IzQwODAwMH1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA4NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy10YWJzX19oZWFkZXJ7bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDttYXJnaW46MDtkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4fS5jLXRhYnNfX2hlYWRlci1pdGVte21hcmdpbi10b3A6MnB4O2hlaWdodDo0NXB4O3BhZGRpbmc6MCAycHg7LXdlYmtpdC1ib3gtZmxleDoxOy1tcy1mbGV4OjE7ZmxleDoxfS5jLXRhYnNfX2hlYWRlci1pdGVtIGF7YmFja2dyb3VuZC1jb2xvcjojZTJlMmUyO3RleHQtZGVjb3JhdGlvbjpub25lO3BhZGRpbmc6MTNweCAyMHB4O2NvbG9yOiM0OTE2NmQ7ZGlzcGxheTpibG9ja30uYy10YWJzX19oZWFkZXItaXRlbS0tYWN0aXZle21hcmdpbi10b3A6MXB4O2hlaWdodDo0NnB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXItdG9wOjFweCBzb2xpZCAjZTJlMmUyO2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjZTJlMmUyO2JvcmRlci1yaWdodDoxcHggc29saWQgI2UyZTJlMn0uYy10YWJzX19oZWFkZXItaXRlbS0tYWN0aXZlIGF7YmFja2dyb3VuZC1jb2xvcjojZmZmO2NvbG9yOiMzMzN9LmMtdGFic19faGVhZGVyLWl0ZW0tLWRpc2FibGVkIGF7YmFja2dyb3VuZC1jb2xvcjojZjVmNmY3O2NvbG9yOiNhZWFlYWU7Y3Vyc29yOm5vdC1hbGxvd2VkfS5jLXRhYnNfX2JvZHl7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlcjoxcHggc29saWQgI2UyZTJlMjttYXJnaW4tdG9wOi0xcHg7cGFkZGluZzoyMHB4fS5jLXRhYnNfX3BhbmV7ZGlzcGxheTpibG9jaztib3JkZXItdG9wOm5vbmU7b3BhY2l0eTowO2hlaWdodDowO292ZXJmbG93OmhpZGRlbjtwYWRkaW5nOjAgNXB4Oy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjVzIGVhc2Utb3V0O3RyYW5zaXRpb246YWxsIC41cyBlYXNlLW91dH0uYy10YWJzX19wYW5lLS1hY3RpdmV7b3BhY2l0eToxO3BhZGRpbmc6NXB4O2hlaWdodDphdXRvfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYnMudnVlXG4gKiogbW9kdWxlIGlkID0gODVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIVxuICogQG92ZXJ2aWV3IGVzNi1wcm9taXNlIC0gYSB0aW55IGltcGxlbWVudGF0aW9uIG9mIFByb21pc2VzL0ErLlxuICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcbiAqIEBsaWNlbnNlICAgTGljZW5zZWQgdW5kZXIgTUlUIGxpY2Vuc2VcbiAqICAgICAgICAgICAgU2VlIGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9qYWtlYXJjaGliYWxkL2VzNi1wcm9taXNlL21hc3Rlci9MSUNFTlNFXG4gKiBAdmVyc2lvbiAgIDMuMi4xXG4gKi9cblxuKGZ1bmN0aW9uKCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkb2JqZWN0T3JGdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oeCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnZnVuY3Rpb24nO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNNYXliZVRoZW5hYmxlKHgpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ29iamVjdCcgJiYgeCAhPT0gbnVsbDtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheTtcbiAgICBpZiAoIUFycmF5LmlzQXJyYXkpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkgPSBmdW5jdGlvbiAoeCkge1xuICAgICAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHgpID09PSAnW29iamVjdCBBcnJheV0nO1xuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheSA9IGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXk7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPSAwO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0O1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm47XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAgPSBmdW5jdGlvbiBhc2FwKGNhbGxiYWNrLCBhcmcpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuXSA9IGNhbGxiYWNrO1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2xpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gKyAxXSA9IGFyZztcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gKz0gMjtcbiAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuID09PSAyKSB7XG4gICAgICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cbiAgICAgICAgLy8gSWYgYWRkaXRpb25hbCBjYWxsYmFja3MgYXJlIHF1ZXVlZCBiZWZvcmUgdGhlIHF1ZXVlIGlzIGZsdXNoZWQsIHRoZXlcbiAgICAgICAgLy8gd2lsbCBiZSBwcm9jZXNzZWQgYnkgdGhpcyBmbHVzaCB0aGF0IHdlIGFyZSBzY2hlZHVsaW5nLlxuICAgICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2goKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRTY2hlZHVsZXIoc2NoZWR1bGVGbikge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcChhc2FwRm4pIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwID0gYXNhcEZuO1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgPyB3aW5kb3cgOiB1bmRlZmluZWQ7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJXaW5kb3cgfHwge307XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGlzTm9kZSA9IHR5cGVvZiBzZWxmID09PSAndW5kZWZpbmVkJyAmJiB0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcgJiYge30udG9TdHJpbmcuY2FsbChwcm9jZXNzKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nO1xuXG4gICAgLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGlzV29ya2VyID0gdHlwZW9mIFVpbnQ4Q2xhbXBlZEFycmF5ICE9PSAndW5kZWZpbmVkJyAmJlxuICAgICAgdHlwZW9mIGltcG9ydFNjcmlwdHMgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXG4gICAgLy8gbm9kZVxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljaygpIHtcbiAgICAgIC8vIG5vZGUgdmVyc2lvbiAwLjEwLnggZGlzcGxheXMgYSBkZXByZWNhdGlvbiB3YXJuaW5nIHdoZW4gbmV4dFRpY2sgaXMgdXNlZCByZWN1cnNpdmVseVxuICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9jdWpvanMvd2hlbi9pc3N1ZXMvNDEwIGZvciBkZXRhaWxzXG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHByb2Nlc3MubmV4dFRpY2sobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gdmVydHhcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lcigpIHtcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dChsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcbiAgICAgIHZhciBpdGVyYXRpb25zID0gMDtcbiAgICAgIHZhciBvYnNlcnZlciA9IG5ldyBsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcbiAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuICAgICAgb2JzZXJ2ZXIub2JzZXJ2ZShub2RlLCB7IGNoYXJhY3RlckRhdGE6IHRydWUgfSk7XG5cbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgbm9kZS5kYXRhID0gKGl0ZXJhdGlvbnMgPSArK2l0ZXJhdGlvbnMgJSAyKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgLy8gd2ViIHdvcmtlclxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcbiAgICAgIHZhciBjaGFubmVsID0gbmV3IE1lc3NhZ2VDaGFubmVsKCk7XG4gICAgICBjaGFubmVsLnBvcnQxLm9ubWVzc2FnZSA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaDtcbiAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNoYW5uZWwucG9ydDIucG9zdE1lc3NhZ2UoMCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBzZXRUaW1lb3V0KGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCwgMSk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWUgPSBuZXcgQXJyYXkoMTAwMCk7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuOyBpKz0yKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpXTtcbiAgICAgICAgdmFyIGFyZyA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpKzFdO1xuXG4gICAgICAgIGNhbGxiYWNrKGFyZyk7XG5cbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2ldID0gdW5kZWZpbmVkO1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaSsxXSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9IDA7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHZhciByID0gcmVxdWlyZTtcbiAgICAgICAgdmFyIHZlcnR4ID0gcigndmVydHgnKTtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHZlcnR4TmV4dCA9IHZlcnR4LnJ1bk9uTG9vcCB8fCB2ZXJ0eC5ydW5PbkNvbnRleHQ7XG4gICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lcigpO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaDtcbiAgICAvLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuICAgIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNOb2RlKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljaygpO1xuICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNdXRhdGlvbk9ic2VydmVyKCk7XG4gICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCk7XG4gICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiByZXF1aXJlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhdHRlbXB0VmVydHgoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdGhlbiQkdGhlbihvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuICAgICAgdmFyIHBhcmVudCA9IHRoaXM7XG5cbiAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLmNvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXG4gICAgICBpZiAoY2hpbGRbbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRF0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRtYWtlUHJvbWlzZShjaGlsZCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBzdGF0ZSA9IHBhcmVudC5fc3RhdGU7XG5cbiAgICAgIGlmIChzdGF0ZSkge1xuICAgICAgICB2YXIgY2FsbGJhY2sgPSBhcmd1bWVudHNbc3RhdGUgLSAxXTtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAoZnVuY3Rpb24oKXtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzdGF0ZSwgY2hpbGQsIGNhbGxiYWNrLCBwYXJlbnQuX3Jlc3VsdCk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkdGhlbiQkdGhlbjtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRyZXNvbHZlKG9iamVjdCkge1xuICAgICAgLypqc2hpbnQgdmFsaWR0aGlzOnRydWUgKi9cbiAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cbiAgICAgIGlmIChvYmplY3QgJiYgdHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcgJiYgb2JqZWN0LmNvbnN0cnVjdG9yID09PSBDb25zdHJ1Y3Rvcikge1xuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgICAgfVxuXG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgb2JqZWN0KTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmU7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSUQgPSBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMTYpO1xuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCgpIHt9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAgID0gdm9pZCAwO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQgPSAxO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCAgPSAyO1xuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SID0gbmV3IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCk7XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzZWxmRnVsZmlsbG1lbnQoKSB7XG4gICAgICByZXR1cm4gbmV3IFR5cGVFcnJvcihcIllvdSBjYW5ub3QgcmVzb2x2ZSBhIHByb21pc2Ugd2l0aCBpdHNlbGZcIik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkY2Fubm90UmV0dXJuT3duKCkge1xuICAgICAgcmV0dXJuIG5ldyBUeXBlRXJyb3IoJ0EgcHJvbWlzZXMgY2FsbGJhY2sgY2Fubm90IHJldHVybiB0aGF0IHNhbWUgcHJvbWlzZS4nKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKHByb21pc2UpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBwcm9taXNlLnRoZW47XG4gICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XG4gICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlUaGVuKHRoZW4sIHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoZW4uY2FsbCh2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUsIHRoZW4pIHtcbiAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChmdW5jdGlvbihwcm9taXNlKSB7XG4gICAgICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGVycm9yID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5VGhlbih0aGVuLCB0aGVuYWJsZSwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBpZiAoc2VhbGVkKSB7IHJldHVybjsgfVxuICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICAgICAgaWYgKHRoZW5hYmxlICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgICAgaWYgKHNlYWxlZCkgeyByZXR1cm47IH1cbiAgICAgICAgICBzZWFsZWQgPSB0cnVlO1xuXG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgICAgIH0sICdTZXR0bGU6ICcgKyAocHJvbWlzZS5fbGFiZWwgfHwgJyB1bmtub3duIHByb21pc2UnKSk7XG5cbiAgICAgICAgaWYgKCFzZWFsZWQgJiYgZXJyb3IpIHtcbiAgICAgICAgICBzZWFsZWQgPSB0cnVlO1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgICAgIH1cbiAgICAgIH0sIHByb21pc2UpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIHRoZW5hYmxlKSB7XG4gICAgICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgICAgIH0gZWxzZSBpZiAodGhlbmFibGUuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUodGhlbmFibGUsIHVuZGVmaW5lZCwgZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbikge1xuICAgICAgaWYgKG1heWJlVGhlbmFibGUuY29uc3RydWN0b3IgPT09IHByb21pc2UuY29uc3RydWN0b3IgJiZcbiAgICAgICAgICB0aGVuID09PSBsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCAmJlxuICAgICAgICAgIGNvbnN0cnVjdG9yLnJlc29sdmUgPT09IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAodGhlbiA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IuZXJyb3IpO1xuICAgICAgICB9IGVsc2UgaWYgKHRoZW4gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uKHRoZW4pKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKSB7XG4gICAgICBpZiAocHJvbWlzZSA9PT0gdmFsdWUpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxmaWxsbWVudCgpKTtcbiAgICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJHV0aWxzJCRvYmplY3RPckZ1bmN0aW9uKHZhbHVlKSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIHZhbHVlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKHZhbHVlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoUmVqZWN0aW9uKHByb21pc2UpIHtcbiAgICAgIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG4gICAgICAgIHByb21pc2UuX29uZXJyb3IocHJvbWlzZS5fcmVzdWx0KTtcbiAgICAgIH1cblxuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaChwcm9taXNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKSB7XG4gICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHsgcmV0dXJuOyB9XG5cbiAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHZhbHVlO1xuICAgICAgcHJvbWlzZS5fc3RhdGUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQ7XG5cbiAgICAgIGlmIChwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggIT09IDApIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaCwgcHJvbWlzZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7IHJldHVybjsgfVxuICAgICAgcHJvbWlzZS5fc3RhdGUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRDtcbiAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjtcblxuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbiwgcHJvbWlzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHBhcmVudCwgY2hpbGQsIG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gICAgICB2YXIgc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuICAgICAgdmFyIGxlbmd0aCA9IHN1YnNjcmliZXJzLmxlbmd0aDtcblxuICAgICAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblxuICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoXSA9IGNoaWxkO1xuICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoICsgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG4gICAgICBzdWJzY3JpYmVyc1tsZW5ndGggKyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRF0gID0gb25SZWplY3Rpb247XG5cbiAgICAgIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoLCBwYXJlbnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gocHJvbWlzZSkge1xuICAgICAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XG4gICAgICB2YXIgc2V0dGxlZCA9IHByb21pc2UuX3N0YXRlO1xuXG4gICAgICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7IHJldHVybjsgfVxuXG4gICAgICB2YXIgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwgPSBwcm9taXNlLl9yZXN1bHQ7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3Vic2NyaWJlcnMubGVuZ3RoOyBpICs9IDMpIHtcbiAgICAgICAgY2hpbGQgPSBzdWJzY3JpYmVyc1tpXTtcbiAgICAgICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cbiAgICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNhbGxiYWNrKGRldGFpbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpIHtcbiAgICAgIHRoaXMuZXJyb3IgPSBudWxsO1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1IgPSBuZXcgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKTtcblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhkZXRhaWwpO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUi5lcnJvciA9IGU7XG4gICAgICAgIHJldHVybiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRUUllfQ0FUQ0hfRVJST1I7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuICAgICAgdmFyIGhhc0NhbGxiYWNrID0gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uKGNhbGxiYWNrKSxcbiAgICAgICAgICB2YWx1ZSwgZXJyb3IsIHN1Y2NlZWRlZCwgZmFpbGVkO1xuXG4gICAgICBpZiAoaGFzQ2FsbGJhY2spIHtcbiAgICAgICAgdmFsdWUgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlDYXRjaChjYWxsYmFjaywgZGV0YWlsKTtcblxuICAgICAgICBpZiAodmFsdWUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUikge1xuICAgICAgICAgIGZhaWxlZCA9IHRydWU7XG4gICAgICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcbiAgICAgICAgICB2YWx1ZSA9IG51bGw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRjYW5ub3RSZXR1cm5Pd24oKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHZhbHVlID0gZGV0YWlsO1xuICAgICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHtcbiAgICAgICAgLy8gbm9vcFxuICAgICAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGZhaWxlZCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuICAgICAgfSBlbHNlIGlmIChzZXR0bGVkID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UocHJvbWlzZSwgcmVzb2x2ZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlc29sdmVyKGZ1bmN0aW9uIHJlc29sdmVQcm9taXNlKHZhbHVlKXtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpZCA9IDA7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbmV4dElkKCkge1xuICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGlkKys7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbWFrZVByb21pc2UocHJvbWlzZSkge1xuICAgICAgcHJvbWlzZVtsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGlkKys7XG4gICAgICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHVuZGVmaW5lZDtcbiAgICAgIHByb21pc2UuX3N1YnNjcmliZXJzID0gW107XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRhbGwoZW50cmllcykge1xuICAgICAgcmV0dXJuIG5ldyBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkZGVmYXVsdCh0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRhbGw7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZShlbnRyaWVzKSB7XG4gICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICAgICAgaWYgKCFsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkoZW50cmllcykpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBDb25zdHJ1Y3RvcihmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIHZhciBsZW5ndGggPSBlbnRyaWVzLmxlbmd0aDtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJHJhY2U7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3QocmVhc29uKSB7XG4gICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcbiAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbik7XG4gICAgICByZXR1cm4gcHJvbWlzZTtcbiAgICB9XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkcmVqZWN0O1xuXG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNSZXNvbHZlcigpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1lvdSBtdXN0IHBhc3MgYSByZXNvbHZlciBmdW5jdGlvbiBhcyB0aGUgZmlyc3QgYXJndW1lbnQgdG8gdGhlIHByb21pc2UgY29uc3RydWN0b3InKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNOZXcoKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlO1xuICAgIC8qKlxuICAgICAgUHJvbWlzZSBvYmplY3RzIHJlcHJlc2VudCB0aGUgZXZlbnR1YWwgcmVzdWx0IG9mIGFuIGFzeW5jaHJvbm91cyBvcGVyYXRpb24uIFRoZVxuICAgICAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcbiAgICAgIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlIHJlYXNvblxuICAgICAgd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgICAgIFRlcm1pbm9sb2d5XG4gICAgICAtLS0tLS0tLS0tLVxuXG4gICAgICAtIGBwcm9taXNlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gd2l0aCBhIGB0aGVuYCBtZXRob2Qgd2hvc2UgYmVoYXZpb3IgY29uZm9ybXMgdG8gdGhpcyBzcGVjaWZpY2F0aW9uLlxuICAgICAgLSBgdGhlbmFibGVgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB0aGF0IGRlZmluZXMgYSBgdGhlbmAgbWV0aG9kLlxuICAgICAgLSBgdmFsdWVgIGlzIGFueSBsZWdhbCBKYXZhU2NyaXB0IHZhbHVlIChpbmNsdWRpbmcgdW5kZWZpbmVkLCBhIHRoZW5hYmxlLCBvciBhIHByb21pc2UpLlxuICAgICAgLSBgZXhjZXB0aW9uYCBpcyBhIHZhbHVlIHRoYXQgaXMgdGhyb3duIHVzaW5nIHRoZSB0aHJvdyBzdGF0ZW1lbnQuXG4gICAgICAtIGByZWFzb25gIGlzIGEgdmFsdWUgdGhhdCBpbmRpY2F0ZXMgd2h5IGEgcHJvbWlzZSB3YXMgcmVqZWN0ZWQuXG4gICAgICAtIGBzZXR0bGVkYCB0aGUgZmluYWwgcmVzdGluZyBzdGF0ZSBvZiBhIHByb21pc2UsIGZ1bGZpbGxlZCBvciByZWplY3RlZC5cblxuICAgICAgQSBwcm9taXNlIGNhbiBiZSBpbiBvbmUgb2YgdGhyZWUgc3RhdGVzOiBwZW5kaW5nLCBmdWxmaWxsZWQsIG9yIHJlamVjdGVkLlxuXG4gICAgICBQcm9taXNlcyB0aGF0IGFyZSBmdWxmaWxsZWQgaGF2ZSBhIGZ1bGZpbGxtZW50IHZhbHVlIGFuZCBhcmUgaW4gdGhlIGZ1bGZpbGxlZFxuICAgICAgc3RhdGUuICBQcm9taXNlcyB0aGF0IGFyZSByZWplY3RlZCBoYXZlIGEgcmVqZWN0aW9uIHJlYXNvbiBhbmQgYXJlIGluIHRoZVxuICAgICAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cbiAgICAgIFByb21pc2VzIGNhbiBhbHNvIGJlIHNhaWQgdG8gKnJlc29sdmUqIGEgdmFsdWUuICBJZiB0aGlzIHZhbHVlIGlzIGFsc28gYVxuICAgICAgcHJvbWlzZSwgdGhlbiB0aGUgb3JpZ2luYWwgcHJvbWlzZSdzIHNldHRsZWQgc3RhdGUgd2lsbCBtYXRjaCB0aGUgdmFsdWUnc1xuICAgICAgc2V0dGxlZCBzdGF0ZS4gIFNvIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgcmVqZWN0cyB3aWxsXG4gICAgICBpdHNlbGYgcmVqZWN0LCBhbmQgYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCBmdWxmaWxscyB3aWxsXG4gICAgICBpdHNlbGYgZnVsZmlsbC5cblxuXG4gICAgICBCYXNpYyBVc2FnZTpcbiAgICAgIC0tLS0tLS0tLS0tLVxuXG4gICAgICBgYGBqc1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgICAgLy8gb24gc3VjY2Vzc1xuICAgICAgICByZXNvbHZlKHZhbHVlKTtcblxuICAgICAgICAvLyBvbiBmYWlsdXJlXG4gICAgICAgIHJlamVjdChyZWFzb24pO1xuICAgICAgfSk7XG5cbiAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAvLyBvbiBmdWxmaWxsbWVudFxuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG4gICAgICAgIC8vIG9uIHJlamVjdGlvblxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQWR2YW5jZWQgVXNhZ2U6XG4gICAgICAtLS0tLS0tLS0tLS0tLS1cblxuICAgICAgUHJvbWlzZXMgc2hpbmUgd2hlbiBhYnN0cmFjdGluZyBhd2F5IGFzeW5jaHJvbm91cyBpbnRlcmFjdGlvbnMgc3VjaCBhc1xuICAgICAgYFhNTEh0dHBSZXF1ZXN0YHMuXG5cbiAgICAgIGBgYGpzXG4gICAgICBmdW5jdGlvbiBnZXRKU09OKHVybCkge1xuICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcbiAgICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcbiAgICAgICAgICB4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gaGFuZGxlcjtcbiAgICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2pzb24nO1xuICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuICAgICAgICAgIHhoci5zZW5kKCk7XG5cbiAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuICAgICAgICAgICAgaWYgKHRoaXMucmVhZHlTdGF0ZSA9PT0gdGhpcy5ET05FKSB7XG4gICAgICAgICAgICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZWplY3QobmV3IEVycm9yKCdnZXRKU09OOiBgJyArIHVybCArICdgIGZhaWxlZCB3aXRoIHN0YXR1czogWycgKyB0aGlzLnN0YXR1cyArICddJykpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG4gICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgLy8gb24gcmVqZWN0aW9uXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBVbmxpa2UgY2FsbGJhY2tzLCBwcm9taXNlcyBhcmUgZ3JlYXQgY29tcG9zYWJsZSBwcmltaXRpdmVzLlxuXG4gICAgICBgYGBqc1xuICAgICAgUHJvbWlzZS5hbGwoW1xuICAgICAgICBnZXRKU09OKCcvcG9zdHMnKSxcbiAgICAgICAgZ2V0SlNPTignL2NvbW1lbnRzJylcbiAgICAgIF0pLnRoZW4oZnVuY3Rpb24odmFsdWVzKXtcbiAgICAgICAgdmFsdWVzWzBdIC8vID0+IHBvc3RzSlNPTlxuICAgICAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cbiAgICAgICAgcmV0dXJuIHZhbHVlcztcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEBjbGFzcyBQcm9taXNlXG4gICAgICBAcGFyYW0ge2Z1bmN0aW9ufSByZXNvbHZlclxuICAgICAgVXNlZnVsIGZvciB0b29saW5nLlxuICAgICAgQGNvbnN0cnVjdG9yXG4gICAgKi9cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZShyZXNvbHZlcikge1xuICAgICAgdGhpc1tsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5leHRJZCgpO1xuICAgICAgdGhpcy5fcmVzdWx0ID0gdGhpcy5fc3RhdGUgPSB1bmRlZmluZWQ7XG4gICAgICB0aGlzLl9zdWJzY3JpYmVycyA9IFtdO1xuXG4gICAgICBpZiAobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCAhPT0gcmVzb2x2ZXIpIHtcbiAgICAgICAgdHlwZW9mIHJlc29sdmVyICE9PSAnZnVuY3Rpb24nICYmIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyKCk7XG4gICAgICAgIHRoaXMgaW5zdGFuY2VvZiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZSA/IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLmFsbCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yYWNlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yZXNvbHZlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yZWplY3QgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJGRlZmF1bHQ7XG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX3NldFNjaGVkdWxlciA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRTY2hlZHVsZXI7XG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX3NldEFzYXAgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fYXNhcCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwO1xuXG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucHJvdG90eXBlID0ge1xuICAgICAgY29uc3RydWN0b3I6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLFxuXG4gICAgLyoqXG4gICAgICBUaGUgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCxcbiAgICAgIHdoaWNoIHJlZ2lzdGVycyBjYWxsYmFja3MgdG8gcmVjZWl2ZSBlaXRoZXIgYSBwcm9taXNlJ3MgZXZlbnR1YWwgdmFsdWUgb3IgdGhlXG4gICAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG4gICAgICAgIC8vIHVzZXIgaXMgYXZhaWxhYmxlXG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQ2hhaW5pbmdcbiAgICAgIC0tLS0tLS0tXG5cbiAgICAgIFRoZSByZXR1cm4gdmFsdWUgb2YgYHRoZW5gIGlzIGl0c2VsZiBhIHByb21pc2UuICBUaGlzIHNlY29uZCwgJ2Rvd25zdHJlYW0nXG4gICAgICBwcm9taXNlIGlzIHJlc29sdmVkIHdpdGggdGhlIHJldHVybiB2YWx1ZSBvZiB0aGUgZmlyc3QgcHJvbWlzZSdzIGZ1bGZpbGxtZW50XG4gICAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cblxuICAgICAgYGBganNcbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgICByZXR1cm4gdXNlci5uYW1lO1xuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh1c2VyTmFtZSkge1xuICAgICAgICAvLyBJZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHVzZXJOYW1lYCB3aWxsIGJlIHRoZSB1c2VyJ3MgbmFtZSwgb3RoZXJ3aXNlIGl0XG4gICAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuICAgICAgfSk7XG5cbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ZvdW5kIHVzZXIsIGJ1dCBzdGlsbCB1bmhhcHB5Jyk7XG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAvLyBpZiBgZmluZFVzZXJgIGZ1bGZpbGxlZCwgYHJlYXNvbmAgd2lsbCBiZSAnRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknLlxuICAgICAgICAvLyBJZiBgZmluZFVzZXJgIHJlamVjdGVkLCBgcmVhc29uYCB3aWxsIGJlICdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jy5cbiAgICAgIH0pO1xuICAgICAgYGBgXG4gICAgICBJZiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIGRvZXMgbm90IHNwZWNpZnkgYSByZWplY3Rpb24gaGFuZGxlciwgcmVqZWN0aW9uIHJlYXNvbnMgd2lsbCBiZSBwcm9wYWdhdGVkIGZ1cnRoZXIgZG93bnN0cmVhbS5cblxuICAgICAgYGBganNcbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuICAgICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBBc3NpbWlsYXRpb25cbiAgICAgIC0tLS0tLS0tLS0tLVxuXG4gICAgICBTb21ldGltZXMgdGhlIHZhbHVlIHlvdSB3YW50IHRvIHByb3BhZ2F0ZSB0byBhIGRvd25zdHJlYW0gcHJvbWlzZSBjYW4gb25seSBiZVxuICAgICAgcmV0cmlldmVkIGFzeW5jaHJvbm91c2x5LiBUaGlzIGNhbiBiZSBhY2hpZXZlZCBieSByZXR1cm5pbmcgYSBwcm9taXNlIGluIHRoZVxuICAgICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcbiAgICAgIHVudGlsIHRoZSByZXR1cm5lZCBwcm9taXNlIGlzIHNldHRsZWQuIFRoaXMgaXMgY2FsbGVkICphc3NpbWlsYXRpb24qLlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAgIC8vIFRoZSB1c2VyJ3MgY29tbWVudHMgYXJlIG5vdyBhdmFpbGFibGVcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIElmIHRoZSBhc3NpbWxpYXRlZCBwcm9taXNlIHJlamVjdHMsIHRoZW4gdGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIGFsc28gcmVqZWN0LlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG4gICAgICAgIC8vIElmIGBmaW5kQ29tbWVudHNCeUF1dGhvcmAgZnVsZmlsbHMsIHdlJ2xsIGhhdmUgdGhlIHZhbHVlIGhlcmVcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCByZWplY3RzLCB3ZSdsbCBoYXZlIHRoZSByZWFzb24gaGVyZVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgU2ltcGxlIEV4YW1wbGVcbiAgICAgIC0tLS0tLS0tLS0tLS0tXG5cbiAgICAgIFN5bmNocm9ub3VzIEV4YW1wbGVcblxuICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgdmFyIHJlc3VsdDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzdWx0ID0gZmluZFJlc3VsdCgpO1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9XG4gICAgICBgYGBcblxuICAgICAgRXJyYmFjayBFeGFtcGxlXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcbiAgICAgICAgaWYgKGVycikge1xuICAgICAgICAgIC8vIGZhaWx1cmVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBzdWNjZXNzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIFByb21pc2UgRXhhbXBsZTtcblxuICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgLy8gc3VjY2Vzc1xuICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQWR2YW5jZWQgRXhhbXBsZVxuICAgICAgLS0tLS0tLS0tLS0tLS1cblxuICAgICAgU3luY2hyb25vdXMgRXhhbXBsZVxuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICB2YXIgYXV0aG9yLCBib29rcztcblxuICAgICAgdHJ5IHtcbiAgICAgICAgYXV0aG9yID0gZmluZEF1dGhvcigpO1xuICAgICAgICBib29rcyAgPSBmaW5kQm9va3NCeUF1dGhvcihhdXRob3IpO1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9XG4gICAgICBgYGBcblxuICAgICAgRXJyYmFjayBFeGFtcGxlXG5cbiAgICAgIGBgYGpzXG5cbiAgICAgIGZ1bmN0aW9uIGZvdW5kQm9va3MoYm9va3MpIHtcblxuICAgICAgfVxuXG4gICAgICBmdW5jdGlvbiBmYWlsdXJlKHJlYXNvbikge1xuXG4gICAgICB9XG5cbiAgICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgIC8vIGZhaWx1cmVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuICAgICAgICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICBmb3VuZEJvb2tzKGJvb2tzKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAgICAgICAgICAgZmFpbHVyZShyZWFzb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSBjYXRjaChlcnJvcikge1xuICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBzdWNjZXNzXG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIFByb21pc2UgRXhhbXBsZTtcblxuICAgICAgYGBgamF2YXNjcmlwdFxuICAgICAgZmluZEF1dGhvcigpLlxuICAgICAgICB0aGVuKGZpbmRCb29rc0J5QXV0aG9yKS5cbiAgICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG4gICAgICAgICAgLy8gZm91bmQgYm9va3NcbiAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBAbWV0aG9kIHRoZW5cbiAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uRnVsZmlsbGVkXG4gICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG4gICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAgICovXG4gICAgICB0aGVuOiBsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCxcblxuICAgIC8qKlxuICAgICAgYGNhdGNoYCBpcyBzaW1wbHkgc3VnYXIgZm9yIGB0aGVuKHVuZGVmaW5lZCwgb25SZWplY3Rpb24pYCB3aGljaCBtYWtlcyBpdCB0aGUgc2FtZVxuICAgICAgYXMgdGhlIGNhdGNoIGJsb2NrIG9mIGEgdHJ5L2NhdGNoIHN0YXRlbWVudC5cblxuICAgICAgYGBganNcbiAgICAgIGZ1bmN0aW9uIGZpbmRBdXRob3IoKXtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIHN5bmNocm9ub3VzXG4gICAgICB0cnkge1xuICAgICAgICBmaW5kQXV0aG9yKCk7XG4gICAgICB9IGNhdGNoKHJlYXNvbikge1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgfVxuXG4gICAgICAvLyBhc3luYyB3aXRoIHByb21pc2VzXG4gICAgICBmaW5kQXV0aG9yKCkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEBtZXRob2QgY2F0Y2hcbiAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0aW9uXG4gICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgICBAcmV0dXJuIHtQcm9taXNlfVxuICAgICovXG4gICAgICAnY2F0Y2gnOiBmdW5jdGlvbihvblJlamVjdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy50aGVuKG51bGwsIG9uUmVqZWN0aW9uKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yKENvbnN0cnVjdG9yLCBpbnB1dCkge1xuICAgICAgdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuICAgICAgdGhpcy5wcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXG4gICAgICBpZiAoIXRoaXMucHJvbWlzZVtsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRtYWtlUHJvbWlzZSh0aGlzLnByb21pc2UpO1xuICAgICAgfVxuXG4gICAgICBpZiAobGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5KGlucHV0KSkge1xuICAgICAgICB0aGlzLl9pbnB1dCAgICAgPSBpbnB1dDtcbiAgICAgICAgdGhpcy5sZW5ndGggICAgID0gaW5wdXQubGVuZ3RoO1xuICAgICAgICB0aGlzLl9yZW1haW5pbmcgPSBpbnB1dC5sZW5ndGg7XG5cbiAgICAgICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcblxuICAgICAgICBpZiAodGhpcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmxlbmd0aCA9IHRoaXMubGVuZ3RoIHx8IDA7XG4gICAgICAgICAgdGhpcy5fZW51bWVyYXRlKCk7XG4gICAgICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbCh0aGlzLnByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QodGhpcy5wcm9taXNlLCBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkdmFsaWRhdGlvbkVycm9yKCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCR2YWxpZGF0aW9uRXJyb3IoKSB7XG4gICAgICByZXR1cm4gbmV3IEVycm9yKCdBcnJheSBNZXRob2RzIG11c3QgYmUgcHJvdmlkZWQgYW4gQXJyYXknKTtcbiAgICB9XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX2VudW1lcmF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGxlbmd0aCAgPSB0aGlzLmxlbmd0aDtcbiAgICAgIHZhciBpbnB1dCAgID0gdGhpcy5faW5wdXQ7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwOyB0aGlzLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpcy5fZWFjaEVudHJ5KGlucHV0W2ldLCBpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9lYWNoRW50cnkgPSBmdW5jdGlvbihlbnRyeSwgaSkge1xuICAgICAgdmFyIGMgPSB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yO1xuICAgICAgdmFyIHJlc29sdmUgPSBjLnJlc29sdmU7XG5cbiAgICAgIGlmIChyZXNvbHZlID09PSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0KSB7XG4gICAgICAgIHZhciB0aGVuID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbihlbnRyeSk7XG5cbiAgICAgICAgaWYgKHRoZW4gPT09IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0ICYmXG4gICAgICAgICAgICBlbnRyeS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHtcbiAgICAgICAgICB0aGlzLl9zZXR0bGVkQXQoZW50cnkuX3N0YXRlLCBpLCBlbnRyeS5fcmVzdWx0KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMuX3JlbWFpbmluZy0tO1xuICAgICAgICAgIHRoaXMuX3Jlc3VsdFtpXSA9IGVudHJ5O1xuICAgICAgICB9IGVsc2UgaWYgKGMgPT09IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0KSB7XG4gICAgICAgICAgdmFyIHByb21pc2UgPSBuZXcgYyhsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVNYXliZVRoZW5hYmxlKHByb21pc2UsIGVudHJ5LCB0aGVuKTtcbiAgICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KG5ldyBjKGZ1bmN0aW9uKHJlc29sdmUpIHsgcmVzb2x2ZShlbnRyeSk7IH0pLCBpKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fd2lsbFNldHRsZUF0KHJlc29sdmUoZW50cnkpLCBpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbihzdGF0ZSwgaSwgdmFsdWUpIHtcbiAgICAgIHZhciBwcm9taXNlID0gdGhpcy5wcm9taXNlO1xuXG4gICAgICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHtcbiAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG5cbiAgICAgICAgaWYgKHN0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHRoaXMuX3JlbWFpbmluZyA9PT0gMCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHRoaXMuX3Jlc3VsdCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24ocHJvbWlzZSwgaSkge1xuICAgICAgdmFyIGVudW1lcmF0b3IgPSB0aGlzO1xuXG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocHJvbWlzZSwgdW5kZWZpbmVkLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICBlbnVtZXJhdG9yLl9zZXR0bGVkQXQobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVELCBpLCB2YWx1ZSk7XG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgZW51bWVyYXRvci5fc2V0dGxlZEF0KGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVELCBpLCByZWFzb24pO1xuICAgICAgfSk7XG4gICAgfTtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsKCkge1xuICAgICAgdmFyIGxvY2FsO1xuXG4gICAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBsb2NhbCA9IGdsb2JhbDtcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgbG9jYWwgPSBzZWxmO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG4gICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3BvbHlmaWxsIGZhaWxlZCBiZWNhdXNlIGdsb2JhbCBvYmplY3QgaXMgdW5hdmFpbGFibGUgaW4gdGhpcyBlbnZpcm9ubWVudCcpO1xuICAgICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXG4gICAgICBpZiAoUCAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoUC5yZXNvbHZlKCkpID09PSAnW29iamVjdCBQcm9taXNlXScgJiYgIVAuY2FzdCkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGxvY2FsLlByb21pc2UgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdDtcbiAgICB9XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkcG9seWZpbGw7XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZSA9IHtcbiAgICAgICdQcm9taXNlJzogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQsXG4gICAgICAncG9seWZpbGwnOiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHRcbiAgICB9O1xuXG4gICAgLyogZ2xvYmFsIGRlZmluZTp0cnVlIG1vZHVsZTp0cnVlIHdpbmRvdzogdHJ1ZSAqL1xuICAgIGlmICh0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZVsnYW1kJ10pIHtcbiAgICAgIGRlZmluZShmdW5jdGlvbigpIHsgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7IH0pO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlWydleHBvcnRzJ10pIHtcbiAgICAgIG1vZHVsZVsnZXhwb3J0cyddID0gbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGlzICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpc1snRVM2UHJvbWlzZSddID0gbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZTtcbiAgICB9XG5cbiAgICBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQoKTtcbn0pLmNhbGwodGhpcyk7XG5cblxuXG4vKioqIEVYUE9SVFMgRlJPTSBleHBvcnRzLWxvYWRlciAqKiovXG5tb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5Qcm9taXNlO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2V4cG9ydHMtbG9hZGVyP2dsb2JhbC5Qcm9taXNlIS4vfi9lczYtcHJvbWlzZS9kaXN0L2VzNi1wcm9taXNlLmpzXG4gKiogbW9kdWxlIGlkID0gODZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIihmdW5jdGlvbihzZWxmKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBpZiAoc2VsZi5mZXRjaCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIHN1cHBvcnQgPSB7XG4gICAgc2VhcmNoUGFyYW1zOiAnVVJMU2VhcmNoUGFyYW1zJyBpbiBzZWxmLFxuICAgIGl0ZXJhYmxlOiAnU3ltYm9sJyBpbiBzZWxmICYmICdpdGVyYXRvcicgaW4gU3ltYm9sLFxuICAgIGJsb2I6ICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmICdCbG9iJyBpbiBzZWxmICYmIChmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG5ldyBCbG9iKClcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9KSgpLFxuICAgIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIHNlbGYsXG4gICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gc2VsZlxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgbmFtZSA9IFN0cmluZyhuYW1lKVxuICAgIH1cbiAgICBpZiAoL1teYS16MC05XFwtIyQlJicqKy5cXF5fYHx+XS9pLnRlc3QobmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lJylcbiAgICB9XG4gICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG4gICAgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgLy8gQnVpbGQgYSBkZXN0cnVjdGl2ZSBpdGVyYXRvciBmb3IgdGhlIHZhbHVlIGxpc3RcbiAgZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcbiAgICB2YXIgaXRlcmF0b3IgPSB7XG4gICAgICBuZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKVxuICAgICAgICByZXR1cm4ge2RvbmU6IHZhbHVlID09PSB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXRlcmF0b3JcbiAgfVxuXG4gIGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykge1xuICAgIHRoaXMubWFwID0ge31cblxuICAgIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykge1xuICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKVxuICAgICAgfSwgdGhpcylcblxuICAgIH0gZWxzZSBpZiAoaGVhZGVycykge1xuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pXG4gICAgICB9LCB0aGlzKVxuICAgIH1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgICB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKVxuICAgIHZhciBsaXN0ID0gdGhpcy5tYXBbbmFtZV1cbiAgICBpZiAoIWxpc3QpIHtcbiAgICAgIGxpc3QgPSBbXVxuICAgICAgdGhpcy5tYXBbbmFtZV0gPSBsaXN0XG4gICAgfVxuICAgIGxpc3QucHVzaCh2YWx1ZSlcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlWydkZWxldGUnXSA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICBkZWxldGUgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICB2YXIgdmFsdWVzID0gdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cbiAgICByZXR1cm4gdmFsdWVzID8gdmFsdWVzWzBdIDogbnVsbFxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZ2V0QWxsID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSB8fCBbXVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHJldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShub3JtYWxpemVOYW1lKG5hbWUpKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXSA9IFtub3JtYWxpemVWYWx1ZSh2YWx1ZSldXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5mb3JFYWNoID0gZnVuY3Rpb24oY2FsbGJhY2ssIHRoaXNBcmcpIHtcbiAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyh0aGlzLm1hcCkuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICB0aGlzLm1hcFtuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGNhbGxiYWNrLmNhbGwodGhpc0FyZywgdmFsdWUsIG5hbWUsIHRoaXMpXG4gICAgICB9LCB0aGlzKVxuICAgIH0sIHRoaXMpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChuYW1lKSB9KVxuICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdXG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7IGl0ZW1zLnB1c2godmFsdWUpIH0pXG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBpdGVtcyA9IFtdXG4gICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7IGl0ZW1zLnB1c2goW25hbWUsIHZhbHVlXSkgfSlcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH1cblxuICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgIEhlYWRlcnMucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPSBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzXG4gIH1cblxuICBmdW5jdGlvbiBjb25zdW1lZChib2R5KSB7XG4gICAgaWYgKGJvZHkuYm9keVVzZWQpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcbiAgICB9XG4gICAgYm9keS5ib2R5VXNlZCA9IHRydWVcbiAgfVxuXG4gIGZ1bmN0aW9uIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlc29sdmUocmVhZGVyLnJlc3VsdClcbiAgICAgIH1cbiAgICAgIHJlYWRlci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChyZWFkZXIuZXJyb3IpXG4gICAgICB9XG4gICAgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRCbG9iQXNBcnJheUJ1ZmZlcihibG9iKSB7XG4gICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcbiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRCbG9iQXNUZXh0KGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpXG4gICAgcmV0dXJuIGZpbGVSZWFkZXJSZWFkeShyZWFkZXIpXG4gIH1cblxuICBmdW5jdGlvbiBCb2R5KCkge1xuICAgIHRoaXMuYm9keVVzZWQgPSBmYWxzZVxuXG4gICAgdGhpcy5faW5pdEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHlcbiAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuYmxvYiAmJiBCbG9iLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlCbG9iID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmZvcm1EYXRhICYmIEZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlGb3JtRGF0YSA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gYm9keS50b1N0cmluZygpXG4gICAgICB9IGVsc2UgaWYgKCFib2R5KSB7XG4gICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gJydcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBBcnJheUJ1ZmZlci5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICAvLyBPbmx5IHN1cHBvcnQgQXJyYXlCdWZmZXJzIGZvciBQT1NUIG1ldGhvZC5cbiAgICAgICAgLy8gUmVjZWl2aW5nIEFycmF5QnVmZmVycyBoYXBwZW5zIHZpYSBCbG9icywgaW5zdGVhZC5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcigndW5zdXBwb3J0ZWQgQm9keUluaXQgdHlwZScpXG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5oZWFkZXJzLmdldCgnY29udGVudC10eXBlJykpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICd0ZXh0L3BsYWluO2NoYXJzZXQ9VVRGLTgnKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlCbG9iICYmIHRoaXMuX2JvZHlCbG9iLnR5cGUpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKVxuICAgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuc2VhcmNoUGFyYW1zICYmIFVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCcpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydC5ibG9iKSB7XG4gICAgICB0aGlzLmJsb2IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKVxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyBibG9iJylcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5VGV4dF0pKVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHRoaXMuYXJyYXlCdWZmZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuICAgICAgfVxuXG4gICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgICAgaWYgKHJlamVjdGVkKSB7XG4gICAgICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcbiAgICAgICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICAgIHJldHVybiByZWplY3RlZCA/IHJlamVjdGVkIDogUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0LmZvcm1EYXRhKSB7XG4gICAgICB0aGlzLmZvcm1EYXRhID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKGRlY29kZSlcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiB0aGlzLnRleHQoKS50aGVuKEpTT04ucGFyc2UpXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXNcbiAgfVxuXG4gIC8vIEhUVFAgbWV0aG9kcyB3aG9zZSBjYXBpdGFsaXphdGlvbiBzaG91bGQgYmUgbm9ybWFsaXplZFxuICB2YXIgbWV0aG9kcyA9IFsnREVMRVRFJywgJ0dFVCcsICdIRUFEJywgJ09QVElPTlMnLCAnUE9TVCcsICdQVVQnXVxuXG4gIGZ1bmN0aW9uIG5vcm1hbGl6ZU1ldGhvZChtZXRob2QpIHtcbiAgICB2YXIgdXBjYXNlZCA9IG1ldGhvZC50b1VwcGVyQ2FzZSgpXG4gICAgcmV0dXJuIChtZXRob2RzLmluZGV4T2YodXBjYXNlZCkgPiAtMSkgPyB1cGNhc2VkIDogbWV0aG9kXG4gIH1cblxuICBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0LCBvcHRpb25zKSB7XG4gICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge31cbiAgICB2YXIgYm9keSA9IG9wdGlvbnMuYm9keVxuICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSkge1xuICAgICAgaWYgKGlucHV0LmJvZHlVc2VkKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpXG4gICAgICB9XG4gICAgICB0aGlzLnVybCA9IGlucHV0LnVybFxuICAgICAgdGhpcy5jcmVkZW50aWFscyA9IGlucHV0LmNyZWRlbnRpYWxzXG4gICAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuICAgICAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhpbnB1dC5oZWFkZXJzKVxuICAgICAgfVxuICAgICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2RcbiAgICAgIHRoaXMubW9kZSA9IGlucHV0Lm1vZGVcbiAgICAgIGlmICghYm9keSkge1xuICAgICAgICBib2R5ID0gaW5wdXQuX2JvZHlJbml0XG4gICAgICAgIGlucHV0LmJvZHlVc2VkID0gdHJ1ZVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnVybCA9IGlucHV0XG4gICAgfVxuXG4gICAgdGhpcy5jcmVkZW50aWFscyA9IG9wdGlvbnMuY3JlZGVudGlhbHMgfHwgdGhpcy5jcmVkZW50aWFscyB8fCAnb21pdCdcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzIHx8ICF0aGlzLmhlYWRlcnMpIHtcbiAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgICB9XG4gICAgdGhpcy5tZXRob2QgPSBub3JtYWxpemVNZXRob2Qob3B0aW9ucy5tZXRob2QgfHwgdGhpcy5tZXRob2QgfHwgJ0dFVCcpXG4gICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZSB8fCBudWxsXG4gICAgdGhpcy5yZWZlcnJlciA9IG51bGxcblxuICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzJylcbiAgICB9XG4gICAgdGhpcy5faW5pdEJvZHkoYm9keSlcbiAgfVxuXG4gIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMpXG4gIH1cblxuICBmdW5jdGlvbiBkZWNvZGUoYm9keSkge1xuICAgIHZhciBmb3JtID0gbmV3IEZvcm1EYXRhKClcbiAgICBib2R5LnRyaW0oKS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcbiAgICAgIGlmIChieXRlcykge1xuICAgICAgICB2YXIgc3BsaXQgPSBieXRlcy5zcGxpdCgnPScpXG4gICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc9JykucmVwbGFjZSgvXFwrL2csICcgJylcbiAgICAgICAgZm9ybS5hcHBlbmQoZGVjb2RlVVJJQ29tcG9uZW50KG5hbWUpLCBkZWNvZGVVUklDb21wb25lbnQodmFsdWUpKVxuICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGZvcm1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhlYWRlcnMoeGhyKSB7XG4gICAgdmFyIGhlYWQgPSBuZXcgSGVhZGVycygpXG4gICAgdmFyIHBhaXJzID0gKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJykudHJpbSgpLnNwbGl0KCdcXG4nKVxuICAgIHBhaXJzLmZvckVhY2goZnVuY3Rpb24oaGVhZGVyKSB7XG4gICAgICB2YXIgc3BsaXQgPSBoZWFkZXIudHJpbSgpLnNwbGl0KCc6JylcbiAgICAgIHZhciBrZXkgPSBzcGxpdC5zaGlmdCgpLnRyaW0oKVxuICAgICAgdmFyIHZhbHVlID0gc3BsaXQuam9pbignOicpLnRyaW0oKVxuICAgICAgaGVhZC5hcHBlbmQoa2V5LCB2YWx1ZSlcbiAgICB9KVxuICAgIHJldHVybiBoZWFkXG4gIH1cblxuICBCb2R5LmNhbGwoUmVxdWVzdC5wcm90b3R5cGUpXG5cbiAgZnVuY3Rpb24gUmVzcG9uc2UoYm9keUluaXQsIG9wdGlvbnMpIHtcbiAgICBpZiAoIW9wdGlvbnMpIHtcbiAgICAgIG9wdGlvbnMgPSB7fVxuICAgIH1cblxuICAgIHRoaXMudHlwZSA9ICdkZWZhdWx0J1xuICAgIHRoaXMuc3RhdHVzID0gb3B0aW9ucy5zdGF0dXNcbiAgICB0aGlzLm9rID0gdGhpcy5zdGF0dXMgPj0gMjAwICYmIHRoaXMuc3RhdHVzIDwgMzAwXG4gICAgdGhpcy5zdGF0dXNUZXh0ID0gb3B0aW9ucy5zdGF0dXNUZXh0XG4gICAgdGhpcy5oZWFkZXJzID0gb3B0aW9ucy5oZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycyA/IG9wdGlvbnMuaGVhZGVycyA6IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgICB0aGlzLnVybCA9IG9wdGlvbnMudXJsIHx8ICcnXG4gICAgdGhpcy5faW5pdEJvZHkoYm9keUluaXQpXG4gIH1cblxuICBCb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKVxuXG4gIFJlc3BvbnNlLnByb3RvdHlwZS5jbG9uZSA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcbiAgICAgIHN0YXR1czogdGhpcy5zdGF0dXMsXG4gICAgICBzdGF0dXNUZXh0OiB0aGlzLnN0YXR1c1RleHQsXG4gICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuICAgICAgdXJsOiB0aGlzLnVybFxuICAgIH0pXG4gIH1cblxuICBSZXNwb25zZS5lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXNwb25zZSA9IG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiAwLCBzdGF0dXNUZXh0OiAnJ30pXG4gICAgcmVzcG9uc2UudHlwZSA9ICdlcnJvcidcbiAgICByZXR1cm4gcmVzcG9uc2VcbiAgfVxuXG4gIHZhciByZWRpcmVjdFN0YXR1c2VzID0gWzMwMSwgMzAyLCAzMDMsIDMwNywgMzA4XVxuXG4gIFJlc3BvbnNlLnJlZGlyZWN0ID0gZnVuY3Rpb24odXJsLCBzdGF0dXMpIHtcbiAgICBpZiAocmVkaXJlY3RTdGF0dXNlcy5pbmRleE9mKHN0YXR1cykgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG4gIH1cblxuICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzXG4gIHNlbGYuUmVxdWVzdCA9IFJlcXVlc3RcbiAgc2VsZi5SZXNwb25zZSA9IFJlc3BvbnNlXG5cbiAgc2VsZi5mZXRjaCA9IGZ1bmN0aW9uKGlucHV0LCBpbml0KSB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgdmFyIHJlcXVlc3RcbiAgICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSAmJiAhaW5pdCkge1xuICAgICAgICByZXF1ZXN0ID0gaW5wdXRcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlcXVlc3QgPSBuZXcgUmVxdWVzdChpbnB1dCwgaW5pdClcbiAgICAgIH1cblxuICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpXG5cbiAgICAgIGZ1bmN0aW9uIHJlc3BvbnNlVVJMKCkge1xuICAgICAgICBpZiAoJ3Jlc3BvbnNlVVJMJyBpbiB4aHIpIHtcbiAgICAgICAgICByZXR1cm4geGhyLnJlc3BvbnNlVVJMXG4gICAgICAgIH1cblxuICAgICAgICAvLyBBdm9pZCBzZWN1cml0eSB3YXJuaW5ncyBvbiBnZXRSZXNwb25zZUhlYWRlciB3aGVuIG5vdCBhbGxvd2VkIGJ5IENPUlNcbiAgICAgICAgaWYgKC9eWC1SZXF1ZXN0LVVSTDovbS50ZXN0KHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpIHtcbiAgICAgICAgICByZXR1cm4geGhyLmdldFJlc3BvbnNlSGVhZGVyKCdYLVJlcXVlc3QtVVJMJylcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVyblxuICAgICAgfVxuXG4gICAgICB4aHIub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcbiAgICAgICAgICBzdGF0dXNUZXh0OiB4aHIuc3RhdHVzVGV4dCxcbiAgICAgICAgICBoZWFkZXJzOiBoZWFkZXJzKHhociksXG4gICAgICAgICAgdXJsOiByZXNwb25zZVVSTCgpXG4gICAgICAgIH1cbiAgICAgICAgdmFyIGJvZHkgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHRcbiAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpXG4gICAgICB9XG5cbiAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG4gICAgICB9XG5cbiAgICAgIHhoci5vbnRpbWVvdXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9wZW4ocmVxdWVzdC5tZXRob2QsIHJlcXVlc3QudXJsLCB0cnVlKVxuXG4gICAgICBpZiAocmVxdWVzdC5jcmVkZW50aWFscyA9PT0gJ2luY2x1ZGUnKSB7XG4gICAgICAgIHhoci53aXRoQ3JlZGVudGlhbHMgPSB0cnVlXG4gICAgICB9XG5cbiAgICAgIGlmICgncmVzcG9uc2VUeXBlJyBpbiB4aHIgJiYgc3VwcG9ydC5ibG9iKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcbiAgICAgIH1cblxuICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIobmFtZSwgdmFsdWUpXG4gICAgICB9KVxuXG4gICAgICB4aHIuc2VuZCh0eXBlb2YgcmVxdWVzdC5fYm9keUluaXQgPT09ICd1bmRlZmluZWQnID8gbnVsbCA6IHJlcXVlc3QuX2JvZHlJbml0KVxuICAgIH0pXG4gIH1cbiAgc2VsZi5mZXRjaC5wb2x5ZmlsbCA9IHRydWVcbn0pKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJyA/IHNlbGYgOiB0aGlzKTtcblxuXG4vKioqIEVYUE9SVFMgRlJPTSBleHBvcnRzLWxvYWRlciAqKiovXG5tb2R1bGUuZXhwb3J0cyA9IHNlbGYuZmV0Y2g7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZXhwb3J0cy1sb2FkZXI/c2VsZi5mZXRjaCEuL34vd2hhdHdnLWZldGNoL2ZldGNoLmpzXG4gKiogbW9kdWxlIGlkID0gODdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3B1YmxpY19wYXRoX18gKyBcImI0ZGUyOWZlNDNhYzg1ZWYwYjY2ZjljN2RmYzQ3NGQzLnBuZ1wiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL2NvbXBvbmVudHMvc2l0ZS1oZWFkZXIvbG9nby5wbmdcbiAqKiBtb2R1bGUgaWQgPSA4OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4vX2dldE5hdGl2ZScpLFxuICAgIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBEYXRhVmlldyA9IGdldE5hdGl2ZShyb290LCAnRGF0YVZpZXcnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBEYXRhVmlldztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fRGF0YVZpZXcuanNcbiAqKiBtb2R1bGUgaWQgPSA4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGhhc2hDbGVhciA9IHJlcXVpcmUoJy4vX2hhc2hDbGVhcicpLFxuICAgIGhhc2hEZWxldGUgPSByZXF1aXJlKCcuL19oYXNoRGVsZXRlJyksXG4gICAgaGFzaEdldCA9IHJlcXVpcmUoJy4vX2hhc2hHZXQnKSxcbiAgICBoYXNoSGFzID0gcmVxdWlyZSgnLi9faGFzaEhhcycpLFxuICAgIGhhc2hTZXQgPSByZXF1aXJlKCcuL19oYXNoU2V0Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGhhc2ggb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBIYXNoKGVudHJpZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBIYXNoYC5cbkhhc2gucHJvdG90eXBlLmNsZWFyID0gaGFzaENsZWFyO1xuSGFzaC5wcm90b3R5cGVbJ2RlbGV0ZSddID0gaGFzaERlbGV0ZTtcbkhhc2gucHJvdG90eXBlLmdldCA9IGhhc2hHZXQ7XG5IYXNoLnByb3RvdHlwZS5oYXMgPSBoYXNoSGFzO1xuSGFzaC5wcm90b3R5cGUuc2V0ID0gaGFzaFNldDtcblxubW9kdWxlLmV4cG9ydHMgPSBIYXNoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19IYXNoLmpzXG4gKiogbW9kdWxlIGlkID0gOTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXROYXRpdmUgPSByZXF1aXJlKCcuL19nZXROYXRpdmUnKSxcbiAgICByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG52YXIgUHJvbWlzZSA9IGdldE5hdGl2ZShyb290LCAnUHJvbWlzZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFByb21pc2U7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX1Byb21pc2UuanNcbiAqKiBtb2R1bGUgaWQgPSA5MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4vX2dldE5hdGl2ZScpLFxuICAgIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBTZXQgPSBnZXROYXRpdmUocm9vdCwgJ1NldCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fU2V0LmpzXG4gKiogbW9kdWxlIGlkID0gOTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBNYXBDYWNoZSA9IHJlcXVpcmUoJy4vX01hcENhY2hlJyksXG4gICAgc2V0Q2FjaGVBZGQgPSByZXF1aXJlKCcuL19zZXRDYWNoZUFkZCcpLFxuICAgIHNldENhY2hlSGFzID0gcmVxdWlyZSgnLi9fc2V0Q2FjaGVIYXMnKTtcblxuLyoqXG4gKlxuICogQ3JlYXRlcyBhbiBhcnJheSBjYWNoZSBvYmplY3QgdG8gc3RvcmUgdW5pcXVlIHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQGNvbnN0cnVjdG9yXG4gKiBAcGFyYW0ge0FycmF5fSBbdmFsdWVzXSBUaGUgdmFsdWVzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBTZXRDYWNoZSh2YWx1ZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSB2YWx1ZXMgPyB2YWx1ZXMubGVuZ3RoIDogMDtcblxuICB0aGlzLl9fZGF0YV9fID0gbmV3IE1hcENhY2hlO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHRoaXMuYWRkKHZhbHVlc1tpbmRleF0pO1xuICB9XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBTZXRDYWNoZWAuXG5TZXRDYWNoZS5wcm90b3R5cGUuYWRkID0gU2V0Q2FjaGUucHJvdG90eXBlLnB1c2ggPSBzZXRDYWNoZUFkZDtcblNldENhY2hlLnByb3RvdHlwZS5oYXMgPSBzZXRDYWNoZUhhcztcblxubW9kdWxlLmV4cG9ydHMgPSBTZXRDYWNoZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fU2V0Q2FjaGUuanNcbiAqKiBtb2R1bGUgaWQgPSA5M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIFVpbnQ4QXJyYXkgPSByb290LlVpbnQ4QXJyYXk7XG5cbm1vZHVsZS5leHBvcnRzID0gVWludDhBcnJheTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fVWludDhBcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDk0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9fZ2V0TmF0aXZlJyksXG4gICAgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIFdlYWtNYXAgPSBnZXROYXRpdmUocm9vdCwgJ1dlYWtNYXAnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBXZWFrTWFwO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19XZWFrTWFwLmpzXG4gKiogbW9kdWxlIGlkID0gOTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQSBmYXN0ZXIgYWx0ZXJuYXRpdmUgdG8gYEZ1bmN0aW9uI2FwcGx5YCwgdGhpcyBmdW5jdGlvbiBpbnZva2VzIGBmdW5jYFxuICogd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgYHRoaXNBcmdgIGFuZCB0aGUgYXJndW1lbnRzIG9mIGBhcmdzYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gaW52b2tlLlxuICogQHBhcmFtIHsqfSB0aGlzQXJnIFRoZSBgdGhpc2AgYmluZGluZyBvZiBgZnVuY2AuXG4gKiBAcGFyYW0ge0FycmF5fSBhcmdzIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIGBmdW5jYCB3aXRoLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuXG4gKi9cbmZ1bmN0aW9uIGFwcGx5KGZ1bmMsIHRoaXNBcmcsIGFyZ3MpIHtcbiAgdmFyIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuICBzd2l0Y2ggKGxlbmd0aCkge1xuICAgIGNhc2UgMDogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnKTtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSk7XG4gICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0pO1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcbiAgfVxuICByZXR1cm4gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhcHBseTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYXBwbHkuanNcbiAqKiBtb2R1bGUgaWQgPSA5NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYF8uc29tZWAgZm9yIGFycmF5cyB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlXG4gKiBzaG9ydGhhbmRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbnkgZWxlbWVudCBwYXNzZXMgdGhlIHByZWRpY2F0ZSBjaGVjayxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGFycmF5U29tZShhcnJheSwgcHJlZGljYXRlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYXJyYXlTb21lO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19hcnJheVNvbWUuanNcbiAqKiBtb2R1bGUgaWQgPSA5N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZGVsYXlgIGFuZCBgXy5kZWZlcmAgd2hpY2ggYWNjZXB0cyBhbiBhcnJheVxuICogb2YgYGZ1bmNgIGFyZ3VtZW50cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVsYXkuXG4gKiBAcGFyYW0ge251bWJlcn0gd2FpdCBUaGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyB0byBkZWxheSBpbnZvY2F0aW9uLlxuICogQHBhcmFtIHtPYmplY3R9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVyIGlkLlxuICovXG5mdW5jdGlvbiBiYXNlRGVsYXkoZnVuYywgd2FpdCwgYXJncykge1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICByZXR1cm4gc2V0VGltZW91dChmdW5jdGlvbigpIHsgZnVuYy5hcHBseSh1bmRlZmluZWQsIGFyZ3MpOyB9LCB3YWl0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlRGVsYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VEZWxheS5qc1xuICoqIG1vZHVsZSBpZCA9IDk4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmZpbmRJbmRleGAgYW5kIGBfLmZpbmRMYXN0SW5kZXhgIHdpdGhvdXRcbiAqIHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwcmVkaWNhdGUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBmcm9tSW5kZXggVGhlIGluZGV4IHRvIHNlYXJjaCBmcm9tLlxuICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICovXG5mdW5jdGlvbiBiYXNlRmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUsIGZyb21JbmRleCwgZnJvbVJpZ2h0KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICBpbmRleCA9IGZyb21JbmRleCArIChmcm9tUmlnaHQgPyAxIDogLTEpO1xuXG4gIHdoaWxlICgoZnJvbVJpZ2h0ID8gaW5kZXgtLSA6ICsraW5kZXggPCBsZW5ndGgpKSB7XG4gICAgaWYgKHByZWRpY2F0ZShhcnJheVtpbmRleF0sIGluZGV4LCBhcnJheSkpIHtcbiAgICAgIHJldHVybiBpbmRleDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VGaW5kSW5kZXg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VGaW5kSW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSA5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5oYXNJbmAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBrZXkgVGhlIGtleSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUhhc0luKG9iamVjdCwga2V5KSB7XG4gIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJiBrZXkgaW4gT2JqZWN0KG9iamVjdCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUhhc0luO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlSGFzSW4uanNcbiAqKiBtb2R1bGUgaWQgPSAxMDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBTdGFjayA9IHJlcXVpcmUoJy4vX1N0YWNrJyksXG4gICAgZXF1YWxBcnJheXMgPSByZXF1aXJlKCcuL19lcXVhbEFycmF5cycpLFxuICAgIGVxdWFsQnlUYWcgPSByZXF1aXJlKCcuL19lcXVhbEJ5VGFnJyksXG4gICAgZXF1YWxPYmplY3RzID0gcmVxdWlyZSgnLi9fZXF1YWxPYmplY3RzJyksXG4gICAgZ2V0VGFnID0gcmVxdWlyZSgnLi9fZ2V0VGFnJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIGlzSG9zdE9iamVjdCA9IHJlcXVpcmUoJy4vX2lzSG9zdE9iamVjdCcpLFxuICAgIGlzVHlwZWRBcnJheSA9IHJlcXVpcmUoJy4vaXNUeXBlZEFycmF5Jyk7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xudmFyIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuICogZGVlcCBjb21wYXJpc29ucyBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzIGVuYWJsaW5nIG9iamVjdHMgd2l0aCBjaXJjdWxhclxuICogcmVmZXJlbmNlcyB0byBiZSBjb21wYXJlZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcGFyYW0ge251bWJlcn0gW2JpdG1hc2tdIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG4gKiAgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhY2tdIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNFcXVhbERlZXAob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG4gICAgICBvdGhJc0FyciA9IGlzQXJyYXkob3RoZXIpLFxuICAgICAgb2JqVGFnID0gYXJyYXlUYWcsXG4gICAgICBvdGhUYWcgPSBhcnJheVRhZztcblxuICBpZiAoIW9iaklzQXJyKSB7XG4gICAgb2JqVGFnID0gZ2V0VGFnKG9iamVjdCk7XG4gICAgb2JqVGFnID0gb2JqVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvYmpUYWc7XG4gIH1cbiAgaWYgKCFvdGhJc0Fycikge1xuICAgIG90aFRhZyA9IGdldFRhZyhvdGhlcik7XG4gICAgb3RoVGFnID0gb3RoVGFnID09IGFyZ3NUYWcgPyBvYmplY3RUYWcgOiBvdGhUYWc7XG4gIH1cbiAgdmFyIG9iaklzT2JqID0gb2JqVGFnID09IG9iamVjdFRhZyAmJiAhaXNIb3N0T2JqZWN0KG9iamVjdCksXG4gICAgICBvdGhJc09iaiA9IG90aFRhZyA9PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvdGhlciksXG4gICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT0gb3RoVGFnO1xuXG4gIGlmIChpc1NhbWVUYWcgJiYgIW9iaklzT2JqKSB7XG4gICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcbiAgICByZXR1cm4gKG9iaklzQXJyIHx8IGlzVHlwZWRBcnJheShvYmplY3QpKVxuICAgICAgPyBlcXVhbEFycmF5cyhvYmplY3QsIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKVxuICAgICAgOiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZywgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG4gIH1cbiAgaWYgKCEoYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHKSkge1xuICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksXG4gICAgICAgIG90aElzV3JhcHBlZCA9IG90aElzT2JqICYmIGhhc093blByb3BlcnR5LmNhbGwob3RoZXIsICdfX3dyYXBwZWRfXycpO1xuXG4gICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHtcbiAgICAgIHZhciBvYmpVbndyYXBwZWQgPSBvYmpJc1dyYXBwZWQgPyBvYmplY3QudmFsdWUoKSA6IG9iamVjdCxcbiAgICAgICAgICBvdGhVbndyYXBwZWQgPSBvdGhJc1dyYXBwZWQgPyBvdGhlci52YWx1ZSgpIDogb3RoZXI7XG5cbiAgICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG4gICAgICByZXR1cm4gZXF1YWxGdW5jKG9ialVud3JhcHBlZCwgb3RoVW53cmFwcGVkLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG4gICAgfVxuICB9XG4gIGlmICghaXNTYW1lVGFnKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG4gIHJldHVybiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUlzRXF1YWxEZWVwO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlSXNFcXVhbERlZXAuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBTdGFjayA9IHJlcXVpcmUoJy4vX1N0YWNrJyksXG4gICAgYmFzZUlzRXF1YWwgPSByZXF1aXJlKCcuL19iYXNlSXNFcXVhbCcpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cbnZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcbiAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNNYXRjaGAgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gKiBAcGFyYW0ge0FycmF5fSBtYXRjaERhdGEgVGhlIHByb3BlcnR5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIHRvIG1hdGNoLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG9iamVjdGAgaXMgYSBtYXRjaCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNNYXRjaChvYmplY3QsIHNvdXJjZSwgbWF0Y2hEYXRhLCBjdXN0b21pemVyKSB7XG4gIHZhciBpbmRleCA9IG1hdGNoRGF0YS5sZW5ndGgsXG4gICAgICBsZW5ndGggPSBpbmRleCxcbiAgICAgIG5vQ3VzdG9taXplciA9ICFjdXN0b21pemVyO1xuXG4gIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgIHJldHVybiAhbGVuZ3RoO1xuICB9XG4gIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuICB3aGlsZSAoaW5kZXgtLSkge1xuICAgIHZhciBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcbiAgICBpZiAoKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKVxuICAgICAgICAgID8gZGF0YVsxXSAhPT0gb2JqZWN0W2RhdGFbMF1dXG4gICAgICAgICAgOiAhKGRhdGFbMF0gaW4gb2JqZWN0KVxuICAgICAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcbiAgICB2YXIga2V5ID0gZGF0YVswXSxcbiAgICAgICAgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgc3JjVmFsdWUgPSBkYXRhWzFdO1xuXG4gICAgaWYgKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKSB7XG4gICAgICBpZiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHN0YWNrID0gbmV3IFN0YWNrO1xuICAgICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGN1c3RvbWl6ZXIob2JqVmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlLCBzdGFjayk7XG4gICAgICB9XG4gICAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBiYXNlSXNFcXVhbChzcmNWYWx1ZSwgb2JqVmFsdWUsIGN1c3RvbWl6ZXIsIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgfCBQQVJUSUFMX0NPTVBBUkVfRkxBRywgc3RhY2spXG4gICAgICAgICAgICA6IHJlc3VsdFxuICAgICAgICAgICkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNNYXRjaDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUlzTWF0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSAxMDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnLi9pc0Z1bmN0aW9uJyksXG4gICAgaXNIb3N0T2JqZWN0ID0gcmVxdWlyZSgnLi9faXNIb3N0T2JqZWN0JyksXG4gICAgaXNNYXNrZWQgPSByZXF1aXJlKCcuL19pc01hc2tlZCcpLFxuICAgIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpLFxuICAgIHRvU291cmNlID0gcmVxdWlyZSgnLi9fdG9Tb3VyY2UnKTtcblxuLyoqXG4gKiBVc2VkIHRvIG1hdGNoIGBSZWdFeHBgXG4gKiBbc3ludGF4IGNoYXJhY3RlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXBhdHRlcm5zKS5cbiAqL1xudmFyIHJlUmVnRXhwQ2hhciA9IC9bXFxcXF4kLiorPygpW1xcXXt9fF0vZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGhvc3QgY29uc3RydWN0b3JzIChTYWZhcmkpLiAqL1xudmFyIHJlSXNIb3N0Q3RvciA9IC9eXFxbb2JqZWN0IC4rP0NvbnN0cnVjdG9yXFxdJC87XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cbnZhciBmdW5jVG9TdHJpbmcgPSBGdW5jdGlvbi5wcm90b3R5cGUudG9TdHJpbmc7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBpZiBhIG1ldGhvZCBpcyBuYXRpdmUuICovXG52YXIgcmVJc05hdGl2ZSA9IFJlZ0V4cCgnXicgK1xuICBmdW5jVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXFxcJCYnKVxuICAucmVwbGFjZSgvaGFzT3duUHJvcGVydHl8KGZ1bmN0aW9uKS4qPyg/PVxcXFxcXCgpfCBmb3IgLis/KD89XFxcXFxcXSkvZywgJyQxLio/JykgKyAnJCdcbik7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNOYXRpdmVgIHdpdGhvdXQgYmFkIHNoaW0gY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzTmF0aXZlKHZhbHVlKSB7XG4gIGlmICghaXNPYmplY3QodmFsdWUpIHx8IGlzTWFza2VkKHZhbHVlKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgcGF0dGVybiA9IChpc0Z1bmN0aW9uKHZhbHVlKSB8fCBpc0hvc3RPYmplY3QodmFsdWUpKSA/IHJlSXNOYXRpdmUgOiByZUlzSG9zdEN0b3I7XG4gIHJldHVybiBwYXR0ZXJuLnRlc3QodG9Tb3VyY2UodmFsdWUpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNOYXRpdmU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VJc05hdGl2ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEwM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VNYXRjaGVzID0gcmVxdWlyZSgnLi9fYmFzZU1hdGNoZXMnKSxcbiAgICBiYXNlTWF0Y2hlc1Byb3BlcnR5ID0gcmVxdWlyZSgnLi9fYmFzZU1hdGNoZXNQcm9wZXJ0eScpLFxuICAgIGlkZW50aXR5ID0gcmVxdWlyZSgnLi9pZGVudGl0eScpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBwcm9wZXJ0eSA9IHJlcXVpcmUoJy4vcHJvcGVydHknKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pdGVyYXRlZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gW3ZhbHVlPV8uaWRlbnRpdHldIFRoZSB2YWx1ZSB0byBjb252ZXJ0IHRvIGFuIGl0ZXJhdGVlLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBpdGVyYXRlZS5cbiAqL1xuZnVuY3Rpb24gYmFzZUl0ZXJhdGVlKHZhbHVlKSB7XG4gIC8vIERvbid0IHN0b3JlIHRoZSBgdHlwZW9mYCByZXN1bHQgaW4gYSB2YXJpYWJsZSB0byBhdm9pZCBhIEpJVCBidWcgaW4gU2FmYXJpIDkuXG4gIC8vIFNlZSBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTU2MDM0IGZvciBtb3JlIGRldGFpbHMuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHJldHVybiBpZGVudGl0eTtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlID09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuIGlzQXJyYXkodmFsdWUpXG4gICAgICA/IGJhc2VNYXRjaGVzUHJvcGVydHkodmFsdWVbMF0sIHZhbHVlWzFdKVxuICAgICAgOiBiYXNlTWF0Y2hlcyh2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuIHByb3BlcnR5KHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSXRlcmF0ZWU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VJdGVyYXRlZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEwNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZUtleXMgPSBPYmplY3Qua2V5cztcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5rZXlzYCB3aGljaCBkb2Vzbid0IHNraXAgdGhlIGNvbnN0cnVjdG9yXG4gKiBwcm9wZXJ0eSBvZiBwcm90b3R5cGVzIG9yIHRyZWF0IHNwYXJzZSBhcnJheXMgYXMgZGVuc2UuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcHJvcGVydHkgbmFtZXMuXG4gKi9cbmZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCkge1xuICByZXR1cm4gbmF0aXZlS2V5cyhPYmplY3Qob2JqZWN0KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUtleXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VLZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gMTA1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUlzTWF0Y2ggPSByZXF1aXJlKCcuL19iYXNlSXNNYXRjaCcpLFxuICAgIGdldE1hdGNoRGF0YSA9IHJlcXVpcmUoJy4vX2dldE1hdGNoRGF0YScpLFxuICAgIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlID0gcmVxdWlyZSgnLi9fbWF0Y2hlc1N0cmljdENvbXBhcmFibGUnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzYCB3aGljaCBkb2Vzbid0IGNsb25lIGBzb3VyY2VgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZU1hdGNoZXMoc291cmNlKSB7XG4gIHZhciBtYXRjaERhdGEgPSBnZXRNYXRjaERhdGEoc291cmNlKTtcbiAgaWYgKG1hdGNoRGF0YS5sZW5ndGggPT0gMSAmJiBtYXRjaERhdGFbMF1bMl0pIHtcbiAgICByZXR1cm4gbWF0Y2hlc1N0cmljdENvbXBhcmFibGUobWF0Y2hEYXRhWzBdWzBdLCBtYXRjaERhdGFbMF1bMV0pO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gb2JqZWN0ID09PSBzb3VyY2UgfHwgYmFzZUlzTWF0Y2gob2JqZWN0LCBzb3VyY2UsIG1hdGNoRGF0YSk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZU1hdGNoZXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VNYXRjaGVzLmpzXG4gKiogbW9kdWxlIGlkID0gMTA2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUlzRXF1YWwgPSByZXF1aXJlKCcuL19iYXNlSXNFcXVhbCcpLFxuICAgIGdldCA9IHJlcXVpcmUoJy4vZ2V0JyksXG4gICAgaGFzSW4gPSByZXF1aXJlKCcuL2hhc0luJyksXG4gICAgaXNLZXkgPSByZXF1aXJlKCcuL19pc0tleScpLFxuICAgIGlzU3RyaWN0Q29tcGFyYWJsZSA9IHJlcXVpcmUoJy4vX2lzU3RyaWN0Q29tcGFyYWJsZScpLFxuICAgIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlID0gcmVxdWlyZSgnLi9fbWF0Y2hlc1N0cmljdENvbXBhcmFibGUnKSxcbiAgICB0b0tleSA9IHJlcXVpcmUoJy4vX3RvS2V5Jyk7XG5cbi8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xudmFyIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgPSAxLFxuICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzUHJvcGVydHlgIHdoaWNoIGRvZXNuJ3QgY2xvbmUgYHNyY1ZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEBwYXJhbSB7Kn0gc3JjVmFsdWUgVGhlIHZhbHVlIHRvIG1hdGNoLlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZU1hdGNoZXNQcm9wZXJ0eShwYXRoLCBzcmNWYWx1ZSkge1xuICBpZiAoaXNLZXkocGF0aCkgJiYgaXNTdHJpY3RDb21wYXJhYmxlKHNyY1ZhbHVlKSkge1xuICAgIHJldHVybiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSh0b0tleShwYXRoKSwgc3JjVmFsdWUpO1xuICB9XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICB2YXIgb2JqVmFsdWUgPSBnZXQob2JqZWN0LCBwYXRoKTtcbiAgICByZXR1cm4gKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgb2JqVmFsdWUgPT09IHNyY1ZhbHVlKVxuICAgICAgPyBoYXNJbihvYmplY3QsIHBhdGgpXG4gICAgICA6IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgdW5kZWZpbmVkLCBVTk9SREVSRURfQ09NUEFSRV9GTEFHIHwgUEFSVElBTF9DT01QQVJFX0ZMQUcpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VNYXRjaGVzUHJvcGVydHk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VNYXRjaGVzUHJvcGVydHkuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlR2V0ID0gcmVxdWlyZSgnLi9fYmFzZUdldCcpO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZVByb3BlcnR5YCB3aGljaCBzdXBwb3J0cyBkZWVwIHBhdGhzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCkge1xuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgcmV0dXJuIGJhc2VHZXQob2JqZWN0LCBwYXRoKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlUHJvcGVydHlEZWVwO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlUHJvcGVydHlEZWVwLmpzXG4gKiogbW9kdWxlIGlkID0gMTA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRpbWVzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHNcbiAqIG9yIG1heCBhcnJheSBsZW5ndGggY2hlY2tzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaXRlcmF0ZWUgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgYXJyYXkgb2YgcmVzdWx0cy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRpbWVzKG4sIGl0ZXJhdGVlKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobik7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBuKSB7XG4gICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VUaW1lcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZVRpbWVzLmpzXG4gKiogbW9kdWxlIGlkID0gMTA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgU3ltYm9sID0gcmVxdWlyZSgnLi9fU3ltYm9sJyksXG4gICAgaXNTeW1ib2wgPSByZXF1aXJlKCcuL2lzU3ltYm9sJyk7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIElORklOSVRZID0gMSAvIDA7XG5cbi8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xudmFyIHN5bWJvbFByb3RvID0gU3ltYm9sID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcbiAgICBzeW1ib2xUb1N0cmluZyA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udG9TdHJpbmcgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udG9TdHJpbmdgIHdoaWNoIGRvZXNuJ3QgY29udmVydCBudWxsaXNoXG4gKiB2YWx1ZXMgdG8gZW1wdHkgc3RyaW5ncy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqL1xuZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG4gIC8vIEV4aXQgZWFybHkgZm9yIHN0cmluZ3MgdG8gYXZvaWQgYSBwZXJmb3JtYW5jZSBoaXQgaW4gc29tZSBlbnZpcm9ubWVudHMuXG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiBzeW1ib2xUb1N0cmluZyA/IHN5bWJvbFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG4gIH1cbiAgdmFyIHJlc3VsdCA9ICh2YWx1ZSArICcnKTtcbiAgcmV0dXJuIChyZXN1bHQgPT0gJzAnICYmICgxIC8gdmFsdWUpID09IC1JTkZJTklUWSkgPyAnLTAnIDogcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VUb1N0cmluZztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZVRvU3RyaW5nLmpzXG4gKiogbW9kdWxlIGlkID0gMTEwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgZ2xvYmFsIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7bnVsbHxPYmplY3R9IFJldHVybnMgYHZhbHVlYCBpZiBpdCdzIGEgZ2xvYmFsIG9iamVjdCwgZWxzZSBgbnVsbGAuXG4gKi9cbmZ1bmN0aW9uIGNoZWNrR2xvYmFsKHZhbHVlKSB7XG4gIHJldHVybiAodmFsdWUgJiYgdmFsdWUuT2JqZWN0ID09PSBPYmplY3QpID8gdmFsdWUgOiBudWxsO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNoZWNrR2xvYmFsO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19jaGVja0dsb2JhbC5qc1xuICoqIG1vZHVsZSBpZCA9IDExMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvdmVycmVhY2hpbmcgY29yZS1qcyBzaGltcy4gKi9cbnZhciBjb3JlSnNEYXRhID0gcm9vdFsnX19jb3JlLWpzX3NoYXJlZF9fJ107XG5cbm1vZHVsZS5leHBvcnRzID0gY29yZUpzRGF0YTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fY29yZUpzRGF0YS5qc1xuICoqIG1vZHVsZSBpZCA9IDExMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIFN5bWJvbCA9IHJlcXVpcmUoJy4vX1N5bWJvbCcpLFxuICAgIFVpbnQ4QXJyYXkgPSByZXF1aXJlKCcuL19VaW50OEFycmF5JyksXG4gICAgZXF1YWxBcnJheXMgPSByZXF1aXJlKCcuL19lcXVhbEFycmF5cycpLFxuICAgIG1hcFRvQXJyYXkgPSByZXF1aXJlKCcuL19tYXBUb0FycmF5JyksXG4gICAgc2V0VG9BcnJheSA9IHJlcXVpcmUoJy4vX3NldFRvQXJyYXknKTtcblxuLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG52YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG4gICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICBzeW1ib2xUYWcgPSAnW29iamVjdCBTeW1ib2xdJztcblxudmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcbiAgICBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XSc7XG5cbi8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xudmFyIHN5bWJvbFByb3RvID0gU3ltYm9sID8gU3ltYm9sLnByb3RvdHlwZSA6IHVuZGVmaW5lZCxcbiAgICBzeW1ib2xWYWx1ZU9mID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by52YWx1ZU9mIDogdW5kZWZpbmVkO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgY29tcGFyaW5nIG9iamVjdHMgb2ZcbiAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gb25seSBzdXBwb3J0cyBjb21wYXJpbmcgdmFsdWVzIHdpdGggdGFncyBvZlxuICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7c3RyaW5nfSB0YWcgVGhlIGB0b1N0cmluZ1RhZ2Agb2YgdGhlIG9iamVjdHMgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG4gKiAgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCB0YWcsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcbiAgc3dpdGNoICh0YWcpIHtcbiAgICBjYXNlIGRhdGFWaWV3VGFnOlxuICAgICAgaWYgKChvYmplY3QuYnl0ZUxlbmd0aCAhPSBvdGhlci5ieXRlTGVuZ3RoKSB8fFxuICAgICAgICAgIChvYmplY3QuYnl0ZU9mZnNldCAhPSBvdGhlci5ieXRlT2Zmc2V0KSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICBvYmplY3QgPSBvYmplY3QuYnVmZmVyO1xuICAgICAgb3RoZXIgPSBvdGhlci5idWZmZXI7XG5cbiAgICBjYXNlIGFycmF5QnVmZmVyVGFnOlxuICAgICAgaWYgKChvYmplY3QuYnl0ZUxlbmd0aCAhPSBvdGhlci5ieXRlTGVuZ3RoKSB8fFxuICAgICAgICAgICFlcXVhbEZ1bmMobmV3IFVpbnQ4QXJyYXkob2JqZWN0KSwgbmV3IFVpbnQ4QXJyYXkob3RoZXIpKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcblxuICAgIGNhc2UgYm9vbFRhZzpcbiAgICBjYXNlIGRhdGVUYWc6XG4gICAgICAvLyBDb2VyY2UgZGF0ZXMgYW5kIGJvb2xlYW5zIHRvIG51bWJlcnMsIGRhdGVzIHRvIG1pbGxpc2Vjb25kcyBhbmRcbiAgICAgIC8vIGJvb2xlYW5zIHRvIGAxYCBvciBgMGAgdHJlYXRpbmcgaW52YWxpZCBkYXRlcyBjb2VyY2VkIHRvIGBOYU5gIGFzXG4gICAgICAvLyBub3QgZXF1YWwuXG4gICAgICByZXR1cm4gK29iamVjdCA9PSArb3RoZXI7XG5cbiAgICBjYXNlIGVycm9yVGFnOlxuICAgICAgcmV0dXJuIG9iamVjdC5uYW1lID09IG90aGVyLm5hbWUgJiYgb2JqZWN0Lm1lc3NhZ2UgPT0gb3RoZXIubWVzc2FnZTtcblxuICAgIGNhc2UgbnVtYmVyVGFnOlxuICAgICAgLy8gVHJlYXQgYE5hTmAgdnMuIGBOYU5gIGFzIGVxdWFsLlxuICAgICAgcmV0dXJuIChvYmplY3QgIT0gK29iamVjdCkgPyBvdGhlciAhPSArb3RoZXIgOiBvYmplY3QgPT0gK290aGVyO1xuXG4gICAgY2FzZSByZWdleHBUYWc6XG4gICAgY2FzZSBzdHJpbmdUYWc6XG4gICAgICAvLyBDb2VyY2UgcmVnZXhlcyB0byBzdHJpbmdzIGFuZCB0cmVhdCBzdHJpbmdzLCBwcmltaXRpdmVzIGFuZCBvYmplY3RzLFxuICAgICAgLy8gYXMgZXF1YWwuIFNlZSBodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtcmVnZXhwLnByb3RvdHlwZS50b3N0cmluZ1xuICAgICAgLy8gZm9yIG1vcmUgZGV0YWlscy5cbiAgICAgIHJldHVybiBvYmplY3QgPT0gKG90aGVyICsgJycpO1xuXG4gICAgY2FzZSBtYXBUYWc6XG4gICAgICB2YXIgY29udmVydCA9IG1hcFRvQXJyYXk7XG5cbiAgICBjYXNlIHNldFRhZzpcbiAgICAgIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUc7XG4gICAgICBjb252ZXJ0IHx8IChjb252ZXJ0ID0gc2V0VG9BcnJheSk7XG5cbiAgICAgIGlmIChvYmplY3Quc2l6ZSAhPSBvdGhlci5zaXplICYmICFpc1BhcnRpYWwpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICAgICAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQob2JqZWN0KTtcbiAgICAgIGlmIChzdGFja2VkKSB7XG4gICAgICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuICAgICAgfVxuICAgICAgYml0bWFzayB8PSBVTk9SREVSRURfQ09NUEFSRV9GTEFHO1xuICAgICAgc3RhY2suc2V0KG9iamVjdCwgb3RoZXIpO1xuXG4gICAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cbiAgICAgIHJldHVybiBlcXVhbEFycmF5cyhjb252ZXJ0KG9iamVjdCksIGNvbnZlcnQob3RoZXIpLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKTtcblxuICAgIGNhc2Ugc3ltYm9sVGFnOlxuICAgICAgaWYgKHN5bWJvbFZhbHVlT2YpIHtcbiAgICAgICAgcmV0dXJuIHN5bWJvbFZhbHVlT2YuY2FsbChvYmplY3QpID09IHN5bWJvbFZhbHVlT2YuY2FsbChvdGhlcik7XG4gICAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVxdWFsQnlUYWc7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2VxdWFsQnlUYWcuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlSGFzID0gcmVxdWlyZSgnLi9fYmFzZUhhcycpLFxuICAgIGtleXMgPSByZXF1aXJlKCcuL2tleXMnKTtcblxuLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG52YXIgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3Igb2JqZWN0cyB3aXRoIHN1cHBvcnQgZm9yXG4gKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cbiAqIEBwYXJhbSB7bnVtYmVyfSBiaXRtYXNrIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG4gKiAgZm9yIG1vcmUgZGV0YWlscy5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcbiAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRyxcbiAgICAgIG9ialByb3BzID0ga2V5cyhvYmplY3QpLFxuICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuICAgICAgb3RoUHJvcHMgPSBrZXlzKG90aGVyKSxcbiAgICAgIG90aExlbmd0aCA9IG90aFByb3BzLmxlbmd0aDtcblxuICBpZiAob2JqTGVuZ3RoICE9IG90aExlbmd0aCAmJiAhaXNQYXJ0aWFsKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBpbmRleCA9IG9iakxlbmd0aDtcbiAgd2hpbGUgKGluZGV4LS0pIHtcbiAgICB2YXIga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuICAgIGlmICghKGlzUGFydGlhbCA/IGtleSBpbiBvdGhlciA6IGJhc2VIYXMob3RoZXIsIGtleSkpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIC8vIEFzc3VtZSBjeWNsaWMgdmFsdWVzIGFyZSBlcXVhbC5cbiAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQob2JqZWN0KTtcbiAgaWYgKHN0YWNrZWQpIHtcbiAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcbiAgfVxuICB2YXIgcmVzdWx0ID0gdHJ1ZTtcbiAgc3RhY2suc2V0KG9iamVjdCwgb3RoZXIpO1xuXG4gIHZhciBza2lwQ3RvciA9IGlzUGFydGlhbDtcbiAgd2hpbGUgKCsraW5kZXggPCBvYmpMZW5ndGgpIHtcbiAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgdmFyIG9ialZhbHVlID0gb2JqZWN0W2tleV0sXG4gICAgICAgIG90aFZhbHVlID0gb3RoZXJba2V5XTtcblxuICAgIGlmIChjdXN0b21pemVyKSB7XG4gICAgICB2YXIgY29tcGFyZWQgPSBpc1BhcnRpYWxcbiAgICAgICAgPyBjdXN0b21pemVyKG90aFZhbHVlLCBvYmpWYWx1ZSwga2V5LCBvdGhlciwgb2JqZWN0LCBzdGFjaylcbiAgICAgICAgOiBjdXN0b21pemVyKG9ialZhbHVlLCBvdGhWYWx1ZSwga2V5LCBvYmplY3QsIG90aGVyLCBzdGFjayk7XG4gICAgfVxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgIGlmICghKGNvbXBhcmVkID09PSB1bmRlZmluZWRcbiAgICAgICAgICA/IChvYmpWYWx1ZSA9PT0gb3RoVmFsdWUgfHwgZXF1YWxGdW5jKG9ialZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spKVxuICAgICAgICAgIDogY29tcGFyZWRcbiAgICAgICAgKSkge1xuICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgc2tpcEN0b3IgfHwgKHNraXBDdG9yID0ga2V5ID09ICdjb25zdHJ1Y3RvcicpO1xuICB9XG4gIGlmIChyZXN1bHQgJiYgIXNraXBDdG9yKSB7XG4gICAgdmFyIG9iakN0b3IgPSBvYmplY3QuY29uc3RydWN0b3IsXG4gICAgICAgIG90aEN0b3IgPSBvdGhlci5jb25zdHJ1Y3RvcjtcblxuICAgIC8vIE5vbiBgT2JqZWN0YCBvYmplY3QgaW5zdGFuY2VzIHdpdGggZGlmZmVyZW50IGNvbnN0cnVjdG9ycyBhcmUgbm90IGVxdWFsLlxuICAgIGlmIChvYmpDdG9yICE9IG90aEN0b3IgJiZcbiAgICAgICAgKCdjb25zdHJ1Y3RvcicgaW4gb2JqZWN0ICYmICdjb25zdHJ1Y3RvcicgaW4gb3RoZXIpICYmXG4gICAgICAgICEodHlwZW9mIG9iakN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvYmpDdG9yIGluc3RhbmNlb2Ygb2JqQ3RvciAmJlxuICAgICAgICAgIHR5cGVvZiBvdGhDdG9yID09ICdmdW5jdGlvbicgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICB9XG4gIH1cbiAgc3RhY2tbJ2RlbGV0ZSddKG9iamVjdCk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXF1YWxPYmplY3RzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19lcXVhbE9iamVjdHMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlUHJvcGVydHkgPSByZXF1aXJlKCcuL19iYXNlUHJvcGVydHknKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBcImxlbmd0aFwiIHByb3BlcnR5IHZhbHVlIG9mIGBvYmplY3RgLlxuICpcbiAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgdG8gYXZvaWQgYVxuICogW0pJVCBidWddKGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNDI3OTIpIHRoYXQgYWZmZWN0c1xuICogU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgXCJsZW5ndGhcIiB2YWx1ZS5cbiAqL1xudmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0TGVuZ3RoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19nZXRMZW5ndGguanNcbiAqKiBtb2R1bGUgaWQgPSAxMTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc1N0cmljdENvbXBhcmFibGUgPSByZXF1aXJlKCcuL19pc1N0cmljdENvbXBhcmFibGUnKSxcbiAgICBrZXlzID0gcmVxdWlyZSgnLi9rZXlzJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgcHJvcGVydHkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3Mgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgbWF0Y2ggZGF0YSBvZiBgb2JqZWN0YC5cbiAqL1xuZnVuY3Rpb24gZ2V0TWF0Y2hEYXRhKG9iamVjdCkge1xuICB2YXIgcmVzdWx0ID0ga2V5cyhvYmplY3QpLFxuICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcblxuICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICB2YXIga2V5ID0gcmVzdWx0W2xlbmd0aF0sXG4gICAgICAgIHZhbHVlID0gb2JqZWN0W2tleV07XG5cbiAgICByZXN1bHRbbGVuZ3RoXSA9IFtrZXksIHZhbHVlLCBpc1N0cmljdENvbXBhcmFibGUodmFsdWUpXTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldE1hdGNoRGF0YTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZ2V0TWF0Y2hEYXRhLmpzXG4gKiogbW9kdWxlIGlkID0gMTE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlR2V0UHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuXG4vKipcbiAqIEdldHMgdGhlIGBbW1Byb3RvdHlwZV1dYCBvZiBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyB0aGUgYFtbUHJvdG90eXBlXV1gLlxuICovXG5mdW5jdGlvbiBnZXRQcm90b3R5cGUodmFsdWUpIHtcbiAgcmV0dXJuIG5hdGl2ZUdldFByb3RvdHlwZShPYmplY3QodmFsdWUpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRQcm90b3R5cGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldFByb3RvdHlwZS5qc1xuICoqIG1vZHVsZSBpZCA9IDExN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIERhdGFWaWV3ID0gcmVxdWlyZSgnLi9fRGF0YVZpZXcnKSxcbiAgICBNYXAgPSByZXF1aXJlKCcuL19NYXAnKSxcbiAgICBQcm9taXNlID0gcmVxdWlyZSgnLi9fUHJvbWlzZScpLFxuICAgIFNldCA9IHJlcXVpcmUoJy4vX1NldCcpLFxuICAgIFdlYWtNYXAgPSByZXF1aXJlKCcuL19XZWFrTWFwJyksXG4gICAgdG9Tb3VyY2UgPSByZXF1aXJlKCcuL190b1NvdXJjZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG4gICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG4gICAgcHJvbWlzZVRhZyA9ICdbb2JqZWN0IFByb21pc2VdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgZGF0YVZpZXdUYWcgPSAnW29iamVjdCBEYXRhVmlld10nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG1hcHMsIHNldHMsIGFuZCB3ZWFrbWFwcy4gKi9cbnZhciBkYXRhVmlld0N0b3JTdHJpbmcgPSB0b1NvdXJjZShEYXRhVmlldyksXG4gICAgbWFwQ3RvclN0cmluZyA9IHRvU291cmNlKE1hcCksXG4gICAgcHJvbWlzZUN0b3JTdHJpbmcgPSB0b1NvdXJjZShQcm9taXNlKSxcbiAgICBzZXRDdG9yU3RyaW5nID0gdG9Tb3VyY2UoU2V0KSxcbiAgICB3ZWFrTWFwQ3RvclN0cmluZyA9IHRvU291cmNlKFdlYWtNYXApO1xuXG4vKipcbiAqIEdldHMgdGhlIGB0b1N0cmluZ1RhZ2Agb2YgYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBgdG9TdHJpbmdUYWdgLlxuICovXG5mdW5jdGlvbiBnZXRUYWcodmFsdWUpIHtcbiAgcmV0dXJuIG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpO1xufVxuXG4vLyBGYWxsYmFjayBmb3IgZGF0YSB2aWV3cywgbWFwcywgc2V0cywgYW5kIHdlYWsgbWFwcyBpbiBJRSAxMSxcbi8vIGZvciBkYXRhIHZpZXdzIGluIEVkZ2UsIGFuZCBwcm9taXNlcyBpbiBOb2RlLmpzLlxuaWYgKChEYXRhVmlldyAmJiBnZXRUYWcobmV3IERhdGFWaWV3KG5ldyBBcnJheUJ1ZmZlcigxKSkpICE9IGRhdGFWaWV3VGFnKSB8fFxuICAgIChNYXAgJiYgZ2V0VGFnKG5ldyBNYXApICE9IG1hcFRhZykgfHxcbiAgICAoUHJvbWlzZSAmJiBnZXRUYWcoUHJvbWlzZS5yZXNvbHZlKCkpICE9IHByb21pc2VUYWcpIHx8XG4gICAgKFNldCAmJiBnZXRUYWcobmV3IFNldCkgIT0gc2V0VGFnKSB8fFxuICAgIChXZWFrTWFwICYmIGdldFRhZyhuZXcgV2Vha01hcCkgIT0gd2Vha01hcFRhZykpIHtcbiAgZ2V0VGFnID0gZnVuY3Rpb24odmFsdWUpIHtcbiAgICB2YXIgcmVzdWx0ID0gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSksXG4gICAgICAgIEN0b3IgPSByZXN1bHQgPT0gb2JqZWN0VGFnID8gdmFsdWUuY29uc3RydWN0b3IgOiB1bmRlZmluZWQsXG4gICAgICAgIGN0b3JTdHJpbmcgPSBDdG9yID8gdG9Tb3VyY2UoQ3RvcikgOiB1bmRlZmluZWQ7XG5cbiAgICBpZiAoY3RvclN0cmluZykge1xuICAgICAgc3dpdGNoIChjdG9yU3RyaW5nKSB7XG4gICAgICAgIGNhc2UgZGF0YVZpZXdDdG9yU3RyaW5nOiByZXR1cm4gZGF0YVZpZXdUYWc7XG4gICAgICAgIGNhc2UgbWFwQ3RvclN0cmluZzogcmV0dXJuIG1hcFRhZztcbiAgICAgICAgY2FzZSBwcm9taXNlQ3RvclN0cmluZzogcmV0dXJuIHByb21pc2VUYWc7XG4gICAgICAgIGNhc2Ugc2V0Q3RvclN0cmluZzogcmV0dXJuIHNldFRhZztcbiAgICAgICAgY2FzZSB3ZWFrTWFwQ3RvclN0cmluZzogcmV0dXJuIHdlYWtNYXBUYWc7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0VGFnO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19nZXRUYWcuanNcbiAqKiBtb2R1bGUgaWQgPSAxMThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogR2V0cyB0aGUgdmFsdWUgYXQgYGtleWAgb2YgYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGdldFZhbHVlKG9iamVjdCwga2V5KSB7XG4gIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFZhbHVlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19nZXRWYWx1ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDExOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNhc3RQYXRoID0gcmVxdWlyZSgnLi9fY2FzdFBhdGgnKSxcbiAgICBpc0FyZ3VtZW50cyA9IHJlcXVpcmUoJy4vaXNBcmd1bWVudHMnKSxcbiAgICBpc0FycmF5ID0gcmVxdWlyZSgnLi9pc0FycmF5JyksXG4gICAgaXNJbmRleCA9IHJlcXVpcmUoJy4vX2lzSW5kZXgnKSxcbiAgICBpc0tleSA9IHJlcXVpcmUoJy4vX2lzS2V5JyksXG4gICAgaXNMZW5ndGggPSByZXF1aXJlKCcuL2lzTGVuZ3RoJyksXG4gICAgaXNTdHJpbmcgPSByZXF1aXJlKCcuL2lzU3RyaW5nJyksXG4gICAgdG9LZXkgPSByZXF1aXJlKCcuL190b0tleScpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgcGF0aGAgZXhpc3RzIG9uIGBvYmplY3RgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhc0Z1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrIHByb3BlcnRpZXMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHBhdGhgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBoYXNQYXRoKG9iamVjdCwgcGF0aCwgaGFzRnVuYykge1xuICBwYXRoID0gaXNLZXkocGF0aCwgb2JqZWN0KSA/IFtwYXRoXSA6IGNhc3RQYXRoKHBhdGgpO1xuXG4gIHZhciByZXN1bHQsXG4gICAgICBpbmRleCA9IC0xLFxuICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGg7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIga2V5ID0gdG9LZXkocGF0aFtpbmRleF0pO1xuICAgIGlmICghKHJlc3VsdCA9IG9iamVjdCAhPSBudWxsICYmIGhhc0Z1bmMob2JqZWN0LCBrZXkpKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIG9iamVjdCA9IG9iamVjdFtrZXldO1xuICB9XG4gIGlmIChyZXN1bHQpIHtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIHZhciBsZW5ndGggPSBvYmplY3QgPyBvYmplY3QubGVuZ3RoIDogMDtcbiAgcmV0dXJuICEhbGVuZ3RoICYmIGlzTGVuZ3RoKGxlbmd0aCkgJiYgaXNJbmRleChrZXksIGxlbmd0aCkgJiZcbiAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzU3RyaW5nKG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaGFzUGF0aDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faGFzUGF0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDEyMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIG5hdGl2ZUNyZWF0ZSA9IHJlcXVpcmUoJy4vX25hdGl2ZUNyZWF0ZScpO1xuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGhhc2guXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgSGFzaFxuICovXG5mdW5jdGlvbiBoYXNoQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSBuYXRpdmVDcmVhdGUgPyBuYXRpdmVDcmVhdGUobnVsbCkgOiB7fTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoYXNoQ2xlYXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2hhc2hDbGVhci5qc1xuICoqIG1vZHVsZSBpZCA9IDEyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgaGFzaC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtPYmplY3R9IGhhc2ggVGhlIGhhc2ggdG8gbW9kaWZ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGhhc2hEZWxldGUoa2V5KSB7XG4gIHJldHVybiB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaGFzaERlbGV0ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faGFzaERlbGV0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIG5hdGl2ZUNyZWF0ZSA9IHJlcXVpcmUoJy4vX25hdGl2ZUNyZWF0ZScpO1xuXG4vKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG52YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogR2V0cyB0aGUgaGFzaCB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIEhhc2hcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBoYXNoR2V0KGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIGlmIChuYXRpdmVDcmVhdGUpIHtcbiAgICB2YXIgcmVzdWx0ID0gZGF0YVtrZXldO1xuICAgIHJldHVybiByZXN1bHQgPT09IEhBU0hfVU5ERUZJTkVEID8gdW5kZWZpbmVkIDogcmVzdWx0O1xuICB9XG4gIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSkgPyBkYXRhW2tleV0gOiB1bmRlZmluZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaGFzaEdldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faGFzaEdldC5qc1xuICoqIG1vZHVsZSBpZCA9IDEyM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIG5hdGl2ZUNyZWF0ZSA9IHJlcXVpcmUoJy4vX25hdGl2ZUNyZWF0ZScpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIGhhc2ggdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGhhc2hIYXMoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgcmV0dXJuIG5hdGl2ZUNyZWF0ZSA/IGRhdGFba2V5XSAhPT0gdW5kZWZpbmVkIDogaGFzT3duUHJvcGVydHkuY2FsbChkYXRhLCBrZXkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc2hIYXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2hhc2hIYXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBuYXRpdmVDcmVhdGUgPSByZXF1aXJlKCcuL19uYXRpdmVDcmVhdGUnKTtcblxuLyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xudmFyIEhBU0hfVU5ERUZJTkVEID0gJ19fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18nO1xuXG4vKipcbiAqIFNldHMgdGhlIGhhc2ggYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBoYXNoIGluc3RhbmNlLlxuICovXG5mdW5jdGlvbiBoYXNoU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICBkYXRhW2tleV0gPSAobmF0aXZlQ3JlYXRlICYmIHZhbHVlID09PSB1bmRlZmluZWQpID8gSEFTSF9VTkRFRklORUQgOiB2YWx1ZTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaGFzaFNldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faGFzaFNldC5qc1xuICoqIG1vZHVsZSBpZCA9IDEyNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VUaW1lcyA9IHJlcXVpcmUoJy4vX2Jhc2VUaW1lcycpLFxuICAgIGlzQXJndW1lbnRzID0gcmVxdWlyZSgnLi9pc0FyZ3VtZW50cycpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBpc0xlbmd0aCA9IHJlcXVpcmUoJy4vaXNMZW5ndGgnKSxcbiAgICBpc1N0cmluZyA9IHJlcXVpcmUoJy4vaXNTdHJpbmcnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIGluZGV4IGtleXMgZm9yIGBvYmplY3RgIHZhbHVlcyBvZiBhcnJheXMsXG4gKiBgYXJndW1lbnRzYCBvYmplY3RzLCBhbmQgc3RyaW5ncywgb3RoZXJ3aXNlIGBudWxsYCBpcyByZXR1cm5lZC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fG51bGx9IFJldHVybnMgaW5kZXgga2V5cywgZWxzZSBgbnVsbGAuXG4gKi9cbmZ1bmN0aW9uIGluZGV4S2V5cyhvYmplY3QpIHtcbiAgdmFyIGxlbmd0aCA9IG9iamVjdCA/IG9iamVjdC5sZW5ndGggOiB1bmRlZmluZWQ7XG4gIGlmIChpc0xlbmd0aChsZW5ndGgpICYmXG4gICAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzU3RyaW5nKG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSkpIHtcbiAgICByZXR1cm4gYmFzZVRpbWVzKGxlbmd0aCwgU3RyaW5nKTtcbiAgfVxuICByZXR1cm4gbnVsbDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpbmRleEtleXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2luZGV4S2V5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDEyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSBmb3IgdXNlIGFzIHVuaXF1ZSBvYmplY3Qga2V5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzS2V5YWJsZSh2YWx1ZSkge1xuICB2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZTtcbiAgcmV0dXJuICh0eXBlID09ICdzdHJpbmcnIHx8IHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJylcbiAgICA/ICh2YWx1ZSAhPT0gJ19fcHJvdG9fXycpXG4gICAgOiAodmFsdWUgPT09IG51bGwpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzS2V5YWJsZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faXNLZXlhYmxlLmpzXG4gKiogbW9kdWxlIGlkID0gMTI3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgY29yZUpzRGF0YSA9IHJlcXVpcmUoJy4vX2NvcmVKc0RhdGEnKTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG1ldGhvZHMgbWFzcXVlcmFkaW5nIGFzIG5hdGl2ZS4gKi9cbnZhciBtYXNrU3JjS2V5ID0gKGZ1bmN0aW9uKCkge1xuICB2YXIgdWlkID0gL1teLl0rJC8uZXhlYyhjb3JlSnNEYXRhICYmIGNvcmVKc0RhdGEua2V5cyAmJiBjb3JlSnNEYXRhLmtleXMuSUVfUFJPVE8gfHwgJycpO1xuICByZXR1cm4gdWlkID8gKCdTeW1ib2woc3JjKV8xLicgKyB1aWQpIDogJyc7XG59KCkpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgZnVuY2AgaGFzIGl0cyBzb3VyY2UgbWFza2VkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaXMgbWFza2VkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzTWFza2VkKGZ1bmMpIHtcbiAgcmV0dXJuICEhbWFza1NyY0tleSAmJiAobWFza1NyY0tleSBpbiBmdW5jKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc01hc2tlZDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faXNNYXNrZWQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGEgcHJvdG90eXBlIG9iamVjdC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHByb3RvdHlwZSwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBpc1Byb3RvdHlwZSh2YWx1ZSkge1xuICB2YXIgQ3RvciA9IHZhbHVlICYmIHZhbHVlLmNvbnN0cnVjdG9yLFxuICAgICAgcHJvdG8gPSAodHlwZW9mIEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBDdG9yLnByb3RvdHlwZSkgfHwgb2JqZWN0UHJvdG87XG5cbiAgcmV0dXJuIHZhbHVlID09PSBwcm90bztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc1Byb3RvdHlwZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faXNQcm90b3R5cGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbGlzdCBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSBbXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVDbGVhcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbGlzdENhY2hlQ2xlYXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBhc3NvY0luZGV4T2YgPSByZXF1aXJlKCcuL19hc3NvY0luZGV4T2YnKTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5cbi8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xudmFyIHNwbGljZSA9IGFycmF5UHJvdG8uc3BsaWNlO1xuXG4vKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVEZWxldGUoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgaWYgKGluZGV4IDwgMCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgbGFzdEluZGV4ID0gZGF0YS5sZW5ndGggLSAxO1xuICBpZiAoaW5kZXggPT0gbGFzdEluZGV4KSB7XG4gICAgZGF0YS5wb3AoKTtcbiAgfSBlbHNlIHtcbiAgICBzcGxpY2UuY2FsbChkYXRhLCBpbmRleCwgMSk7XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlRGVsZXRlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19saXN0Q2FjaGVEZWxldGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBhc3NvY0luZGV4T2YgPSByZXF1aXJlKCcuL19hc3NvY0luZGV4T2YnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBsaXN0IGNhY2hlIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlR2V0KGtleSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG4gICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXG4gIHJldHVybiBpbmRleCA8IDAgPyB1bmRlZmluZWQgOiBkYXRhW2luZGV4XVsxXTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVHZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2xpc3RDYWNoZUdldC5qc1xuICoqIG1vZHVsZSBpZCA9IDEzMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGFzc29jSW5kZXhPZiA9IHJlcXVpcmUoJy4vX2Fzc29jSW5kZXhPZicpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIGxpc3QgY2FjaGUgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlSGFzKGtleSkge1xuICByZXR1cm4gYXNzb2NJbmRleE9mKHRoaXMuX19kYXRhX18sIGtleSkgPiAtMTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVIYXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2xpc3RDYWNoZUhhcy5qc1xuICoqIG1vZHVsZSBpZCA9IDEzM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGFzc29jSW5kZXhPZiA9IHJlcXVpcmUoJy4vX2Fzc29jSW5kZXhPZicpO1xuXG4vKipcbiAqIFNldHMgdGhlIGxpc3QgY2FjaGUgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgTGlzdENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGxpc3QgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZVNldChrZXksIHZhbHVlKSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgaWYgKGluZGV4IDwgMCkge1xuICAgIGRhdGEucHVzaChba2V5LCB2YWx1ZV0pO1xuICB9IGVsc2Uge1xuICAgIGRhdGFbaW5kZXhdWzFdID0gdmFsdWU7XG4gIH1cbiAgcmV0dXJuIHRoaXM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlU2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19saXN0Q2FjaGVTZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBIYXNoID0gcmVxdWlyZSgnLi9fSGFzaCcpLFxuICAgIExpc3RDYWNoZSA9IHJlcXVpcmUoJy4vX0xpc3RDYWNoZScpLFxuICAgIE1hcCA9IHJlcXVpcmUoJy4vX01hcCcpO1xuXG4vKipcbiAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIG1hcC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUNsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0ge1xuICAgICdoYXNoJzogbmV3IEhhc2gsXG4gICAgJ21hcCc6IG5ldyAoTWFwIHx8IExpc3RDYWNoZSksXG4gICAgJ3N0cmluZyc6IG5ldyBIYXNoXG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVDbGVhcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbWFwQ2FjaGVDbGVhci5qc1xuICoqIG1vZHVsZSBpZCA9IDEzNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE1hcERhdGEgPSByZXF1aXJlKCcuL19nZXRNYXBEYXRhJyk7XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIG1hcC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZURlbGV0ZShrZXkpIHtcbiAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KVsnZGVsZXRlJ10oa2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZURlbGV0ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbWFwQ2FjaGVEZWxldGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXRNYXBEYXRhID0gcmVxdWlyZSgnLi9fZ2V0TWFwRGF0YScpO1xuXG4vKipcbiAqIEdldHMgdGhlIG1hcCB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVHZXQoa2V5KSB7XG4gIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSkuZ2V0KGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVHZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX21hcENhY2hlR2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTM3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TWFwRGF0YSA9IHJlcXVpcmUoJy4vX2dldE1hcERhdGEnKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYSBtYXAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUhhcyhrZXkpIHtcbiAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5oYXMoa2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUhhcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbWFwQ2FjaGVIYXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXRNYXBEYXRhID0gcmVxdWlyZSgnLi9fZ2V0TWFwRGF0YScpO1xuXG4vKipcbiAqIFNldHMgdGhlIG1hcCBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBtYXAgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlU2V0KGtleSwgdmFsdWUpIHtcbiAgZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLnNldChrZXksIHZhbHVlKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVTZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX21hcENhY2hlU2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvbnZlcnRzIGBtYXBgIHRvIGl0cyBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBtYXAgVGhlIG1hcCB0byBjb252ZXJ0LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBrZXktdmFsdWUgcGFpcnMuXG4gKi9cbmZ1bmN0aW9uIG1hcFRvQXJyYXkobWFwKSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkobWFwLnNpemUpO1xuXG4gIG1hcC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcbiAgICByZXN1bHRbKytpbmRleF0gPSBba2V5LCB2YWx1ZV07XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcFRvQXJyYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX21hcFRvQXJyYXkuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cbnZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblxuLyoqXG4gKiBBZGRzIGB2YWx1ZWAgdG8gdGhlIGFycmF5IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBhZGRcbiAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuICogQGFsaWFzIHB1c2hcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNhY2hlLlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIHNldENhY2hlQWRkKHZhbHVlKSB7XG4gIHRoaXMuX19kYXRhX18uc2V0KHZhbHVlLCBIQVNIX1VOREVGSU5FRCk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldENhY2hlQWRkO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19zZXRDYWNoZUFkZC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBpbiB0aGUgYXJyYXkgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIFNldENhY2hlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBmb3VuZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBzZXRDYWNoZUhhcyh2YWx1ZSkge1xuICByZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXModmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldENhY2hlSGFzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19zZXRDYWNoZUhhcy5qc1xuICoqIG1vZHVsZSBpZCA9IDE0MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDb252ZXJ0cyBgc2V0YCB0byBhbiBhcnJheSBvZiBpdHMgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gc2V0IFRoZSBzZXQgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgdmFsdWVzLlxuICovXG5mdW5jdGlvbiBzZXRUb0FycmF5KHNldCkge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IEFycmF5KHNldC5zaXplKTtcblxuICBzZXQuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkge1xuICAgIHJlc3VsdFsrK2luZGV4XSA9IHZhbHVlO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzZXRUb0FycmF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19zZXRUb0FycmF5LmpzXG4gKiogbW9kdWxlIGlkID0gMTQzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgTGlzdENhY2hlID0gcmVxdWlyZSgnLi9fTGlzdENhY2hlJyk7XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgc3RhY2suXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGNsZWFyXG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqL1xuZnVuY3Rpb24gc3RhY2tDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IG5ldyBMaXN0Q2FjaGU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3RhY2tDbGVhcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc3RhY2tDbGVhci5qc1xuICoqIG1vZHVsZSBpZCA9IDE0NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgc3RhY2suXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gc3RhY2tEZWxldGUoa2V5KSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fWydkZWxldGUnXShrZXkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0YWNrRGVsZXRlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19zdGFja0RlbGV0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE0NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBHZXRzIHRoZSBzdGFjayB2YWx1ZSBmb3IgYGtleWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGdldFxuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gc3RhY2tHZXQoa2V5KSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmdldChrZXkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0YWNrR2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19zdGFja0dldC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYSBzdGFjayB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrSGFzKGtleSkge1xuICByZXR1cm4gdGhpcy5fX2RhdGFfXy5oYXMoa2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdGFja0hhcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc3RhY2tIYXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBMaXN0Q2FjaGUgPSByZXF1aXJlKCcuL19MaXN0Q2FjaGUnKSxcbiAgICBNYXBDYWNoZSA9IHJlcXVpcmUoJy4vX01hcENhY2hlJyk7XG5cbi8qKiBVc2VkIGFzIHRoZSBzaXplIHRvIGVuYWJsZSBsYXJnZSBhcnJheSBvcHRpbWl6YXRpb25zLiAqL1xudmFyIExBUkdFX0FSUkFZX1NJWkUgPSAyMDA7XG5cbi8qKlxuICogU2V0cyB0aGUgc3RhY2sgYGtleWAgdG8gYHZhbHVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgc2V0XG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgc3RhY2sgY2FjaGUgaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIHN0YWNrU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGNhY2hlID0gdGhpcy5fX2RhdGFfXztcbiAgaWYgKGNhY2hlIGluc3RhbmNlb2YgTGlzdENhY2hlICYmIGNhY2hlLl9fZGF0YV9fLmxlbmd0aCA9PSBMQVJHRV9BUlJBWV9TSVpFKSB7XG4gICAgY2FjaGUgPSB0aGlzLl9fZGF0YV9fID0gbmV3IE1hcENhY2hlKGNhY2hlLl9fZGF0YV9fKTtcbiAgfVxuICBjYWNoZS5zZXQoa2V5LCB2YWx1ZSk7XG4gIHJldHVybiB0aGlzO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0YWNrU2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19zdGFja1NldC5qc1xuICoqIG1vZHVsZSBpZCA9IDE0OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIG1lbW9pemUgPSByZXF1aXJlKCcuL21lbW9pemUnKSxcbiAgICB0b1N0cmluZyA9IHJlcXVpcmUoJy4vdG9TdHJpbmcnKTtcblxuLyoqIFVzZWQgdG8gbWF0Y2ggcHJvcGVydHkgbmFtZXMgd2l0aGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxcXF18XFxcXC4pKj8pXFwyKVxcXXwoPz0oXFwufFxcW1xcXSkoPzpcXDR8JCkpL2c7XG5cbi8qKiBVc2VkIHRvIG1hdGNoIGJhY2tzbGFzaGVzIGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHJlRXNjYXBlQ2hhciA9IC9cXFxcKFxcXFwpPy9nO1xuXG4vKipcbiAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIGEgcHJvcGVydHkgcGF0aCBhcnJheS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHByb3BlcnR5IHBhdGggYXJyYXkuXG4gKi9cbnZhciBzdHJpbmdUb1BhdGggPSBtZW1vaXplKGZ1bmN0aW9uKHN0cmluZykge1xuICB2YXIgcmVzdWx0ID0gW107XG4gIHRvU3RyaW5nKHN0cmluZykucmVwbGFjZShyZVByb3BOYW1lLCBmdW5jdGlvbihtYXRjaCwgbnVtYmVyLCBxdW90ZSwgc3RyaW5nKSB7XG4gICAgcmVzdWx0LnB1c2gocXVvdGUgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZUNoYXIsICckMScpIDogKG51bWJlciB8fCBtYXRjaCkpO1xuICB9KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHN0cmluZ1RvUGF0aDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fc3RyaW5nVG9QYXRoLmpzXG4gKiogbW9kdWxlIGlkID0gMTQ5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0JyksXG4gICAgbm93ID0gcmVxdWlyZSgnLi9ub3cnKSxcbiAgICB0b051bWJlciA9IHJlcXVpcmUoJy4vdG9OdW1iZXInKTtcblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heCxcbiAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcbiAqIG1pbGxpc2Vjb25kcyBoYXZlIGVsYXBzZWQgc2luY2UgdGhlIGxhc3QgdGltZSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHdhc1xuICogaW52b2tlZC4gVGhlIGRlYm91bmNlZCBmdW5jdGlvbiBjb21lcyB3aXRoIGEgYGNhbmNlbGAgbWV0aG9kIHRvIGNhbmNlbFxuICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG4gKiBQcm92aWRlIGFuIG9wdGlvbnMgb2JqZWN0IHRvIGluZGljYXRlIHdoZXRoZXIgYGZ1bmNgIHNob3VsZCBiZSBpbnZva2VkIG9uXG4gKiB0aGUgbGVhZGluZyBhbmQvb3IgdHJhaWxpbmcgZWRnZSBvZiB0aGUgYHdhaXRgIHRpbWVvdXQuIFRoZSBgZnVuY2AgaXMgaW52b2tlZFxuICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudCBjYWxsc1xuICogdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbiByZXR1cm4gdGhlIHJlc3VsdCBvZiB0aGUgbGFzdCBgZnVuY2AgaW52b2NhdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzIGludm9rZWRcbiAqIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0IG9ubHkgaWYgdGhlIGRlYm91bmNlZCBmdW5jdGlvbiBpc1xuICogaW52b2tlZCBtb3JlIHRoYW4gb25jZSBkdXJpbmcgdGhlIGB3YWl0YCB0aW1lb3V0LlxuICpcbiAqIFNlZSBbRGF2aWQgQ29yYmFjaG8ncyBhcnRpY2xlXShodHRwczovL2Nzcy10cmlja3MuY29tL2RlYm91bmNpbmctdGhyb3R0bGluZy1leHBsYWluZWQtZXhhbXBsZXMvKVxuICogZm9yIGRldGFpbHMgb3ZlciB0aGUgZGlmZmVyZW5jZXMgYmV0d2VlbiBgXy5kZWJvdW5jZWAgYW5kIGBfLnRocm90dGxlYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlYm91bmNlLlxuICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zPXt9XSBUaGUgb3B0aW9ucyBvYmplY3QuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmxlYWRpbmc9ZmFsc2VdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHBhcmFtIHtudW1iZXJ9IFtvcHRpb25zLm1heFdhaXRdXG4gKiAgVGhlIG1heGltdW0gdGltZSBgZnVuY2AgaXMgYWxsb3dlZCB0byBiZSBkZWxheWVkIGJlZm9yZSBpdCdzIGludm9rZWQuXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG4gKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgdHJhaWxpbmcgZWRnZSBvZiB0aGUgdGltZW91dC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGRlYm91bmNlZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogLy8gQXZvaWQgY29zdGx5IGNhbGN1bGF0aW9ucyB3aGlsZSB0aGUgd2luZG93IHNpemUgaXMgaW4gZmx1eC5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG4gKlxuICogLy8gSW52b2tlIGBzZW5kTWFpbGAgd2hlbiBjbGlja2VkLCBkZWJvdW5jaW5nIHN1YnNlcXVlbnQgY2FsbHMuXG4gKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG4gKiAgICdsZWFkaW5nJzogdHJ1ZSxcbiAqICAgJ3RyYWlsaW5nJzogZmFsc2VcbiAqIH0pKTtcbiAqXG4gKiAvLyBFbnN1cmUgYGJhdGNoTG9nYCBpcyBpbnZva2VkIG9uY2UgYWZ0ZXIgMSBzZWNvbmQgb2YgZGVib3VuY2VkIGNhbGxzLlxuICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG4gKiB2YXIgc291cmNlID0gbmV3IEV2ZW50U291cmNlKCcvc3RyZWFtJyk7XG4gKiBqUXVlcnkoc291cmNlKS5vbignbWVzc2FnZScsIGRlYm91bmNlZCk7XG4gKlxuICogLy8gQ2FuY2VsIHRoZSB0cmFpbGluZyBkZWJvdW5jZWQgaW52b2NhdGlvbi5cbiAqIGpRdWVyeSh3aW5kb3cpLm9uKCdwb3BzdGF0ZScsIGRlYm91bmNlZC5jYW5jZWwpO1xuICovXG5mdW5jdGlvbiBkZWJvdW5jZShmdW5jLCB3YWl0LCBvcHRpb25zKSB7XG4gIHZhciBsYXN0QXJncyxcbiAgICAgIGxhc3RUaGlzLFxuICAgICAgbWF4V2FpdCxcbiAgICAgIHJlc3VsdCxcbiAgICAgIHRpbWVySWQsXG4gICAgICBsYXN0Q2FsbFRpbWUsXG4gICAgICBsYXN0SW52b2tlVGltZSA9IDAsXG4gICAgICBsZWFkaW5nID0gZmFsc2UsXG4gICAgICBtYXhpbmcgPSBmYWxzZSxcbiAgICAgIHRyYWlsaW5nID0gdHJ1ZTtcblxuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcbiAgfVxuICB3YWl0ID0gdG9OdW1iZXIod2FpdCkgfHwgMDtcbiAgaWYgKGlzT2JqZWN0KG9wdGlvbnMpKSB7XG4gICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuICAgIG1heGluZyA9ICdtYXhXYWl0JyBpbiBvcHRpb25zO1xuICAgIG1heFdhaXQgPSBtYXhpbmcgPyBuYXRpdmVNYXgodG9OdW1iZXIob3B0aW9ucy5tYXhXYWl0KSB8fCAwLCB3YWl0KSA6IG1heFdhaXQ7XG4gICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcbiAgfVxuXG4gIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuICAgIHZhciBhcmdzID0gbGFzdEFyZ3MsXG4gICAgICAgIHRoaXNBcmcgPSBsYXN0VGhpcztcblxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGxlYWRpbmdFZGdlKHRpbWUpIHtcbiAgICAvLyBSZXNldCBhbnkgYG1heFdhaXRgIHRpbWVyLlxuICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcbiAgICAvLyBTdGFydCB0aGUgdGltZXIgZm9yIHRoZSB0cmFpbGluZyBlZGdlLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgd2FpdCk7XG4gICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG4gICAgcmV0dXJuIGxlYWRpbmcgPyBpbnZva2VGdW5jKHRpbWUpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtYWluaW5nV2FpdCh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcbiAgICAgICAgcmVzdWx0ID0gd2FpdCAtIHRpbWVTaW5jZUxhc3RDYWxsO1xuXG4gICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG4gICAgdmFyIHRpbWVTaW5jZUxhc3RDYWxsID0gdGltZSAtIGxhc3RDYWxsVGltZSxcbiAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZTtcblxuICAgIC8vIEVpdGhlciB0aGlzIGlzIHRoZSBmaXJzdCBjYWxsLCBhY3Rpdml0eSBoYXMgc3RvcHBlZCBhbmQgd2UncmUgYXQgdGhlXG4gICAgLy8gdHJhaWxpbmcgZWRnZSwgdGhlIHN5c3RlbSB0aW1lIGhhcyBnb25lIGJhY2t3YXJkcyBhbmQgd2UncmUgdHJlYXRpbmdcbiAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG4gICAgcmV0dXJuIChsYXN0Q2FsbFRpbWUgPT09IHVuZGVmaW5lZCB8fCAodGltZVNpbmNlTGFzdENhbGwgPj0gd2FpdCkgfHxcbiAgICAgICh0aW1lU2luY2VMYXN0Q2FsbCA8IDApIHx8IChtYXhpbmcgJiYgdGltZVNpbmNlTGFzdEludm9rZSA+PSBtYXhXYWl0KSk7XG4gIH1cblxuICBmdW5jdGlvbiB0aW1lckV4cGlyZWQoKSB7XG4gICAgdmFyIHRpbWUgPSBub3coKTtcbiAgICBpZiAoc2hvdWxkSW52b2tlKHRpbWUpKSB7XG4gICAgICByZXR1cm4gdHJhaWxpbmdFZGdlKHRpbWUpO1xuICAgIH1cbiAgICAvLyBSZXN0YXJ0IHRoZSB0aW1lci5cbiAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHJlbWFpbmluZ1dhaXQodGltZSkpO1xuICB9XG5cbiAgZnVuY3Rpb24gdHJhaWxpbmdFZGdlKHRpbWUpIHtcbiAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXG4gICAgLy8gT25seSBpbnZva2UgaWYgd2UgaGF2ZSBgbGFzdEFyZ3NgIHdoaWNoIG1lYW5zIGBmdW5jYCBoYXMgYmVlblxuICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuICAgIGlmICh0cmFpbGluZyAmJiBsYXN0QXJncykge1xuICAgICAgcmV0dXJuIGludm9rZUZ1bmModGltZSk7XG4gICAgfVxuICAgIGxhc3RBcmdzID0gbGFzdFRoaXMgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbmNlbCgpIHtcbiAgICBsYXN0SW52b2tlVGltZSA9IDA7XG4gICAgbGFzdEFyZ3MgPSBsYXN0Q2FsbFRpbWUgPSBsYXN0VGhpcyA9IHRpbWVySWQgPSB1bmRlZmluZWQ7XG4gIH1cblxuICBmdW5jdGlvbiBmbHVzaCgpIHtcbiAgICByZXR1cm4gdGltZXJJZCA9PT0gdW5kZWZpbmVkID8gcmVzdWx0IDogdHJhaWxpbmdFZGdlKG5vdygpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYm91bmNlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpLFxuICAgICAgICBpc0ludm9raW5nID0gc2hvdWxkSW52b2tlKHRpbWUpO1xuXG4gICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG4gICAgbGFzdFRoaXMgPSB0aGlzO1xuICAgIGxhc3RDYWxsVGltZSA9IHRpbWU7XG5cbiAgICBpZiAoaXNJbnZva2luZykge1xuICAgICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICAgIGlmIChtYXhpbmcpIHtcbiAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cbiAgICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAgICAgcmV0dXJuIGludm9rZUZ1bmMobGFzdENhbGxUaW1lKTtcbiAgICAgIH1cbiAgICB9XG4gICAgaWYgKHRpbWVySWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuICBkZWJvdW5jZWQuY2FuY2VsID0gY2FuY2VsO1xuICBkZWJvdW5jZWQuZmx1c2ggPSBmbHVzaDtcbiAgcmV0dXJuIGRlYm91bmNlZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9kZWJvdW5jZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE1MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBQZXJmb3JtcyBhXG4gKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuICogY29tcGFyaXNvbiBiZXR3ZWVuIHR3byB2YWx1ZXMgdG8gZGV0ZXJtaW5lIGlmIHRoZXkgYXJlIGVxdWl2YWxlbnQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0geyp9IG90aGVyIFRoZSBvdGhlciB2YWx1ZSB0byBjb21wYXJlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAqIHZhciBvdGhlciA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcbiAqXG4gKiBfLmVxKG9iamVjdCwgb2JqZWN0KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmVxKG9iamVjdCwgb3RoZXIpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmVxKCdhJywgJ2EnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmVxKCdhJywgT2JqZWN0KCdhJykpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmVxKE5hTiwgTmFOKTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZnVuY3Rpb24gZXEodmFsdWUsIG90aGVyKSB7XG4gIHJldHVybiB2YWx1ZSA9PT0gb3RoZXIgfHwgKHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXIpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVxO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2VxLmpzXG4gKiogbW9kdWxlIGlkID0gMTUxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUZpbmRJbmRleCA9IHJlcXVpcmUoJy4vX2Jhc2VGaW5kSW5kZXgnKSxcbiAgICBiYXNlSXRlcmF0ZWUgPSByZXF1aXJlKCcuL19iYXNlSXRlcmF0ZWUnKSxcbiAgICB0b0ludGVnZXIgPSByZXF1aXJlKCcuL3RvSW50ZWdlcicpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXg7XG5cbi8qKlxuICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kYCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3RcbiAqIGVsZW1lbnQgYHByZWRpY2F0ZWAgcmV0dXJucyB0cnV0aHkgZm9yIGluc3RlYWQgb2YgdGhlIGVsZW1lbnQgaXRzZWxmLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMS4xLjBcbiAqIEBjYXRlZ29yeSBBcnJheVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAqIEBwYXJhbSB7QXJyYXl8RnVuY3Rpb258T2JqZWN0fHN0cmluZ30gW3ByZWRpY2F0ZT1fLmlkZW50aXR5XVxuICogIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG4gKiBAcGFyYW0ge251bWJlcn0gW2Zyb21JbmRleD0wXSBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZm91bmQgZWxlbWVudCwgZWxzZSBgLTFgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgdXNlcnMgPSBbXG4gKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiBmYWxzZSB9LFxuICogICB7ICd1c2VyJzogJ2ZyZWQnLCAgICAnYWN0aXZlJzogZmFsc2UgfSxcbiAqICAgeyAndXNlcic6ICdwZWJibGVzJywgJ2FjdGl2ZSc6IHRydWUgfVxuICogXTtcbiAqXG4gKiBfLmZpbmRJbmRleCh1c2VycywgZnVuY3Rpb24obykgeyByZXR1cm4gby51c2VyID09ICdiYXJuZXknOyB9KTtcbiAqIC8vID0+IDBcbiAqXG4gKiAvLyBUaGUgYF8ubWF0Y2hlc2AgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICogXy5maW5kSW5kZXgodXNlcnMsIHsgJ3VzZXInOiAnZnJlZCcsICdhY3RpdmUnOiBmYWxzZSB9KTtcbiAqIC8vID0+IDFcbiAqXG4gKiAvLyBUaGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gKiBfLmZpbmRJbmRleCh1c2VycywgWydhY3RpdmUnLCBmYWxzZV0pO1xuICogLy8gPT4gMFxuICpcbiAqIC8vIFRoZSBgXy5wcm9wZXJ0eWAgaXRlcmF0ZWUgc2hvcnRoYW5kLlxuICogXy5maW5kSW5kZXgodXNlcnMsICdhY3RpdmUnKTtcbiAqIC8vID0+IDJcbiAqL1xuZnVuY3Rpb24gZmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUsIGZyb21JbmRleCkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuICBpZiAoIWxlbmd0aCkge1xuICAgIHJldHVybiAtMTtcbiAgfVxuICB2YXIgaW5kZXggPSBmcm9tSW5kZXggPT0gbnVsbCA/IDAgOiB0b0ludGVnZXIoZnJvbUluZGV4KTtcbiAgaWYgKGluZGV4IDwgMCkge1xuICAgIGluZGV4ID0gbmF0aXZlTWF4KGxlbmd0aCArIGluZGV4LCAwKTtcbiAgfVxuICByZXR1cm4gYmFzZUZpbmRJbmRleChhcnJheSwgYmFzZUl0ZXJhdGVlKHByZWRpY2F0ZSwgMyksIGluZGV4KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmaW5kSW5kZXg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvZmluZEluZGV4LmpzXG4gKiogbW9kdWxlIGlkID0gMTUyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUdldCA9IHJlcXVpcmUoJy4vX2Jhc2VHZXQnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSB2YWx1ZSBhdCBgcGF0aGAgb2YgYG9iamVjdGAuIElmIHRoZSByZXNvbHZlZCB2YWx1ZSBpc1xuICogYHVuZGVmaW5lZGAsIHRoZSBgZGVmYXVsdFZhbHVlYCBpcyB1c2VkIGluIGl0cyBwbGFjZS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDMuNy4wXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHBhcmFtIHsqfSBbZGVmYXVsdFZhbHVlXSBUaGUgdmFsdWUgcmV0dXJuZWQgZm9yIGB1bmRlZmluZWRgIHJlc29sdmVkIHZhbHVlcy5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiAzIH0gfV0gfTtcbiAqXG4gKiBfLmdldChvYmplY3QsICdhWzBdLmIuYycpO1xuICogLy8gPT4gM1xuICpcbiAqIF8uZ2V0KG9iamVjdCwgWydhJywgJzAnLCAnYicsICdjJ10pO1xuICogLy8gPT4gM1xuICpcbiAqIF8uZ2V0KG9iamVjdCwgJ2EuYi5jJywgJ2RlZmF1bHQnKTtcbiAqIC8vID0+ICdkZWZhdWx0J1xuICovXG5mdW5jdGlvbiBnZXQob2JqZWN0LCBwYXRoLCBkZWZhdWx0VmFsdWUpIHtcbiAgdmFyIHJlc3VsdCA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogYmFzZUdldChvYmplY3QsIHBhdGgpO1xuICByZXR1cm4gcmVzdWx0ID09PSB1bmRlZmluZWQgPyBkZWZhdWx0VmFsdWUgOiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2dldC5qc1xuICoqIG1vZHVsZSBpZCA9IDE1M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VIYXNJbiA9IHJlcXVpcmUoJy4vX2Jhc2VIYXNJbicpLFxuICAgIGhhc1BhdGggPSByZXF1aXJlKCcuL19oYXNQYXRoJyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGBwYXRoYCBpcyBhIGRpcmVjdCBvciBpbmhlcml0ZWQgcHJvcGVydHkgb2YgYG9iamVjdGAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IE9iamVjdFxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHBhdGhgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0gXy5jcmVhdGUoeyAnYSc6IF8uY3JlYXRlKHsgJ2InOiAyIH0pIH0pO1xuICpcbiAqIF8uaGFzSW4ob2JqZWN0LCAnYScpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaGFzSW4ob2JqZWN0LCAnYS5iJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5oYXNJbihvYmplY3QsIFsnYScsICdiJ10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaGFzSW4ob2JqZWN0LCAnYicpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaGFzSW4ob2JqZWN0LCBwYXRoKSB7XG4gIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJiBoYXNQYXRoKG9iamVjdCwgcGF0aCwgYmFzZUhhc0luKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoYXNJbjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9oYXNJbi5qc1xuICoqIG1vZHVsZSBpZCA9IDE1NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBUaGlzIG1ldGhvZCByZXR1cm5zIHRoZSBmaXJzdCBhcmd1bWVudCBnaXZlbiB0byBpdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgVXRpbFxuICogQHBhcmFtIHsqfSB2YWx1ZSBBbnkgdmFsdWUuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICpcbiAqIGNvbnNvbGUubG9nKF8uaWRlbnRpdHkob2JqZWN0KSA9PT0gb2JqZWN0KTtcbiAqIC8vID0+IHRydWVcbiAqL1xuZnVuY3Rpb24gaWRlbnRpdHkodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlkZW50aXR5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lkZW50aXR5LmpzXG4gKiogbW9kdWxlIGlkID0gMTU1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNBcnJheUxpa2UgPSByZXF1aXJlKCcuL2lzQXJyYXlMaWtlJyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKTtcblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmlzQXJyYXlMaWtlYCBleGNlcHQgdGhhdCBpdCBhbHNvIGNoZWNrcyBpZiBgdmFsdWVgXG4gKiBpcyBhbiBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gYXJyYXktbGlrZSBvYmplY3QsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KFsxLCAyLCAzXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0FycmF5TGlrZU9iamVjdChfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgaXNBcnJheUxpa2UodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXlMaWtlT2JqZWN0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzQXJyYXlMaWtlT2JqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gMTU2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNMZW5ndGggPSByZXF1aXJlKCcuL2lzTGVuZ3RoJyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJyxcbiAgICBhcnJheVRhZyA9ICdbb2JqZWN0IEFycmF5XScsXG4gICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcbiAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuICAgIGVycm9yVGFnID0gJ1tvYmplY3QgRXJyb3JdJyxcbiAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICByZWdleHBUYWcgPSAnW29iamVjdCBSZWdFeHBdJyxcbiAgICBzZXRUYWcgPSAnW29iamVjdCBTZXRdJyxcbiAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcbiAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJyxcbiAgICBmbG9hdDMyVGFnID0gJ1tvYmplY3QgRmxvYXQzMkFycmF5XScsXG4gICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuICAgIGludDhUYWcgPSAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICBpbnQxNlRhZyA9ICdbb2JqZWN0IEludDE2QXJyYXldJyxcbiAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcbiAgICB1aW50OFRhZyA9ICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICB1aW50OENsYW1wZWRUYWcgPSAnW29iamVjdCBVaW50OENsYW1wZWRBcnJheV0nLFxuICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG4gICAgdWludDMyVGFnID0gJ1tvYmplY3QgVWludDMyQXJyYXldJztcblxuLyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgb2YgdHlwZWQgYXJyYXlzLiAqL1xudmFyIHR5cGVkQXJyYXlUYWdzID0ge307XG50eXBlZEFycmF5VGFnc1tmbG9hdDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Zsb2F0NjRUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW2ludDMyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQ4VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50OENsYW1wZWRUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDE2VGFnXSA9XG50eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcbnR5cGVkQXJyYXlUYWdzW2FyZ3NUYWddID0gdHlwZWRBcnJheVRhZ3NbYXJyYXlUYWddID1cbnR5cGVkQXJyYXlUYWdzW2FycmF5QnVmZmVyVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Jvb2xUYWddID1cbnR5cGVkQXJyYXlUYWdzW2RhdGFWaWV3VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID1cbnR5cGVkQXJyYXlUYWdzW2Vycm9yVGFnXSA9IHR5cGVkQXJyYXlUYWdzW2Z1bmNUYWddID1cbnR5cGVkQXJyYXlUYWdzW21hcFRhZ10gPSB0eXBlZEFycmF5VGFnc1tudW1iZXJUYWddID1cbnR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPSB0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID1cbnR5cGVkQXJyYXlUYWdzW3NldFRhZ10gPSB0eXBlZEFycmF5VGFnc1tzdHJpbmdUYWddID1cbnR5cGVkQXJyYXlUYWdzW3dlYWtNYXBUYWddID0gZmFsc2U7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSB0eXBlZCBhcnJheS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDMuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KG5ldyBVaW50OEFycmF5KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzVHlwZWRBcnJheShbXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc1R5cGVkQXJyYXkodmFsdWUpIHtcbiAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiZcbiAgICBpc0xlbmd0aCh2YWx1ZS5sZW5ndGgpICYmICEhdHlwZWRBcnJheVRhZ3Nbb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSldO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzVHlwZWRBcnJheTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc1R5cGVkQXJyYXkuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBNYXBDYWNoZSA9IHJlcXVpcmUoJy4vX01hcENhY2hlJyk7XG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IG1lbW9pemVzIHRoZSByZXN1bHQgb2YgYGZ1bmNgLiBJZiBgcmVzb2x2ZXJgIGlzXG4gKiBwcm92aWRlZCwgaXQgZGV0ZXJtaW5lcyB0aGUgY2FjaGUga2V5IGZvciBzdG9yaW5nIHRoZSByZXN1bHQgYmFzZWQgb24gdGhlXG4gKiBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uLiBCeSBkZWZhdWx0LCB0aGUgZmlyc3QgYXJndW1lbnRcbiAqIHByb3ZpZGVkIHRvIHRoZSBtZW1vaXplZCBmdW5jdGlvbiBpcyB1c2VkIGFzIHRoZSBtYXAgY2FjaGUga2V5LiBUaGUgYGZ1bmNgXG4gKiBpcyBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBtZW1vaXplZCBmdW5jdGlvbi5cbiAqXG4gKiAqKk5vdGU6KiogVGhlIGNhY2hlIGlzIGV4cG9zZWQgYXMgdGhlIGBjYWNoZWAgcHJvcGVydHkgb24gdGhlIG1lbW9pemVkXG4gKiBmdW5jdGlvbi4gSXRzIGNyZWF0aW9uIG1heSBiZSBjdXN0b21pemVkIGJ5IHJlcGxhY2luZyB0aGUgYF8ubWVtb2l6ZS5DYWNoZWBcbiAqIGNvbnN0cnVjdG9yIHdpdGggb25lIHdob3NlIGluc3RhbmNlcyBpbXBsZW1lbnQgdGhlXG4gKiBbYE1hcGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXByb3BlcnRpZXMtb2YtdGhlLW1hcC1wcm90b3R5cGUtb2JqZWN0KVxuICogbWV0aG9kIGludGVyZmFjZSBvZiBgZGVsZXRlYCwgYGdldGAsIGBoYXNgLCBhbmQgYHNldGAuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IEZ1bmN0aW9uXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBoYXZlIGl0cyBvdXRwdXQgbWVtb2l6ZWQuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbcmVzb2x2ZXJdIFRoZSBmdW5jdGlvbiB0byByZXNvbHZlIHRoZSBjYWNoZSBrZXkuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBtZW1vaXplZCBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdCA9IHsgJ2EnOiAxLCAnYic6IDIgfTtcbiAqIHZhciBvdGhlciA9IHsgJ2MnOiAzLCAnZCc6IDQgfTtcbiAqXG4gKiB2YXIgdmFsdWVzID0gXy5tZW1vaXplKF8udmFsdWVzKTtcbiAqIHZhbHVlcyhvYmplY3QpO1xuICogLy8gPT4gWzEsIDJdXG4gKlxuICogdmFsdWVzKG90aGVyKTtcbiAqIC8vID0+IFszLCA0XVxuICpcbiAqIG9iamVjdC5hID0gMjtcbiAqIHZhbHVlcyhvYmplY3QpO1xuICogLy8gPT4gWzEsIDJdXG4gKlxuICogLy8gTW9kaWZ5IHRoZSByZXN1bHQgY2FjaGUuXG4gKiB2YWx1ZXMuY2FjaGUuc2V0KG9iamVjdCwgWydhJywgJ2InXSk7XG4gKiB2YWx1ZXMob2JqZWN0KTtcbiAqIC8vID0+IFsnYScsICdiJ11cbiAqXG4gKiAvLyBSZXBsYWNlIGBfLm1lbW9pemUuQ2FjaGVgLlxuICogXy5tZW1vaXplLkNhY2hlID0gV2Vha01hcDtcbiAqL1xuZnVuY3Rpb24gbWVtb2l6ZShmdW5jLCByZXNvbHZlcikge1xuICBpZiAodHlwZW9mIGZ1bmMgIT0gJ2Z1bmN0aW9uJyB8fCAocmVzb2x2ZXIgJiYgdHlwZW9mIHJlc29sdmVyICE9ICdmdW5jdGlvbicpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHZhciBtZW1vaXplZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuICAgICAgICBrZXkgPSByZXNvbHZlciA/IHJlc29sdmVyLmFwcGx5KHRoaXMsIGFyZ3MpIDogYXJnc1swXSxcbiAgICAgICAgY2FjaGUgPSBtZW1vaXplZC5jYWNoZTtcblxuICAgIGlmIChjYWNoZS5oYXMoa2V5KSkge1xuICAgICAgcmV0dXJuIGNhY2hlLmdldChrZXkpO1xuICAgIH1cbiAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICBtZW1vaXplZC5jYWNoZSA9IGNhY2hlLnNldChrZXksIHJlc3VsdCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbiAgbWVtb2l6ZWQuY2FjaGUgPSBuZXcgKG1lbW9pemUuQ2FjaGUgfHwgTWFwQ2FjaGUpO1xuICByZXR1cm4gbWVtb2l6ZWQ7XG59XG5cbi8vIEFzc2lnbiBjYWNoZSB0byBgXy5tZW1vaXplYC5cbm1lbW9pemUuQ2FjaGUgPSBNYXBDYWNoZTtcblxubW9kdWxlLmV4cG9ydHMgPSBtZW1vaXplO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL21lbW9pemUuanNcbiAqKiBtb2R1bGUgaWQgPSAxNThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG4gKiB0aGUgVW5peCBlcG9jaCAoMSBKYW51YXJ5IDE5NzAgMDA6MDA6MDAgVVRDKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDIuNC4wXG4gKiBAY2F0ZWdvcnkgRGF0ZVxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXN0YW1wLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmRlZmVyKGZ1bmN0aW9uKHN0YW1wKSB7XG4gKiAgIGNvbnNvbGUubG9nKF8ubm93KCkgLSBzdGFtcCk7XG4gKiB9LCBfLm5vdygpKTtcbiAqIC8vID0+IExvZ3MgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgaXQgdG9vayBmb3IgdGhlIGRlZmVycmVkIGludm9jYXRpb24uXG4gKi9cbmZ1bmN0aW9uIG5vdygpIHtcbiAgcmV0dXJuIERhdGUubm93KCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbm93O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL25vdy5qc1xuICoqIG1vZHVsZSBpZCA9IDE1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vX2Jhc2VQcm9wZXJ0eScpLFxuICAgIGJhc2VQcm9wZXJ0eURlZXAgPSByZXF1aXJlKCcuL19iYXNlUHJvcGVydHlEZWVwJyksXG4gICAgaXNLZXkgPSByZXF1aXJlKCcuL19pc0tleScpLFxuICAgIHRvS2V5ID0gcmVxdWlyZSgnLi9fdG9LZXknKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZSB2YWx1ZSBhdCBgcGF0aGAgb2YgYSBnaXZlbiBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAyLjQuMFxuICogQGNhdGVnb3J5IFV0aWxcbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIG9iamVjdHMgPSBbXG4gKiAgIHsgJ2EnOiB7ICdiJzogMiB9IH0sXG4gKiAgIHsgJ2EnOiB7ICdiJzogMSB9IH1cbiAqIF07XG4gKlxuICogXy5tYXAob2JqZWN0cywgXy5wcm9wZXJ0eSgnYS5iJykpO1xuICogLy8gPT4gWzIsIDFdXG4gKlxuICogXy5tYXAoXy5zb3J0Qnkob2JqZWN0cywgXy5wcm9wZXJ0eShbJ2EnLCAnYiddKSksICdhLmInKTtcbiAqIC8vID0+IFsxLCAyXVxuICovXG5mdW5jdGlvbiBwcm9wZXJ0eShwYXRoKSB7XG4gIHJldHVybiBpc0tleShwYXRoKSA/IGJhc2VQcm9wZXJ0eSh0b0tleShwYXRoKSkgOiBiYXNlUHJvcGVydHlEZWVwKHBhdGgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHByb3BlcnR5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL3Byb3BlcnR5LmpzXG4gKiogbW9kdWxlIGlkID0gMTYwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYXBwbHkgPSByZXF1aXJlKCcuL19hcHBseScpLFxuICAgIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4vdG9JbnRlZ2VyJyk7XG5cbi8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG52YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXg7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgaW52b2tlcyBgZnVuY2Agd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlXG4gKiBjcmVhdGVkIGZ1bmN0aW9uIGFuZCBhcmd1bWVudHMgZnJvbSBgc3RhcnRgIGFuZCBiZXlvbmQgcHJvdmlkZWQgYXNcbiAqIGFuIGFycmF5LlxuICpcbiAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvbiB0aGVcbiAqIFtyZXN0IHBhcmFtZXRlcl0oaHR0cHM6Ly9tZG4uaW8vcmVzdF9wYXJhbWV0ZXJzKS5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGFwcGx5IGEgcmVzdCBwYXJhbWV0ZXIgdG8uXG4gKiBAcGFyYW0ge251bWJlcn0gW3N0YXJ0PWZ1bmMubGVuZ3RoLTFdIFRoZSBzdGFydCBwb3NpdGlvbiBvZiB0aGUgcmVzdCBwYXJhbWV0ZXIuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cbiAqIEBleGFtcGxlXG4gKlxuICogdmFyIHNheSA9IF8ucmVzdChmdW5jdGlvbih3aGF0LCBuYW1lcykge1xuICogICByZXR1cm4gd2hhdCArICcgJyArIF8uaW5pdGlhbChuYW1lcykuam9pbignLCAnKSArXG4gKiAgICAgKF8uc2l6ZShuYW1lcykgPiAxID8gJywgJiAnIDogJycpICsgXy5sYXN0KG5hbWVzKTtcbiAqIH0pO1xuICpcbiAqIHNheSgnaGVsbG8nLCAnZnJlZCcsICdiYXJuZXknLCAncGViYmxlcycpO1xuICogLy8gPT4gJ2hlbGxvIGZyZWQsIGJhcm5leSwgJiBwZWJibGVzJ1xuICovXG5mdW5jdGlvbiByZXN0KGZ1bmMsIHN0YXJ0KSB7XG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHN0YXJ0ID0gbmF0aXZlTWF4KHN0YXJ0ID09PSB1bmRlZmluZWQgPyAoZnVuYy5sZW5ndGggLSAxKSA6IHRvSW50ZWdlcihzdGFydCksIDApO1xuICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgIGluZGV4ID0gLTEsXG4gICAgICAgIGxlbmd0aCA9IG5hdGl2ZU1heChhcmdzLmxlbmd0aCAtIHN0YXJ0LCAwKSxcbiAgICAgICAgYXJyYXkgPSBBcnJheShsZW5ndGgpO1xuXG4gICAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICAgIGFycmF5W2luZGV4XSA9IGFyZ3Nbc3RhcnQgKyBpbmRleF07XG4gICAgfVxuICAgIHN3aXRjaCAoc3RhcnQpIHtcbiAgICAgIGNhc2UgMDogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCBhcnJheSk7XG4gICAgICBjYXNlIDE6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJnc1swXSwgYXJyYXkpO1xuICAgICAgY2FzZSAyOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFycmF5KTtcbiAgICB9XG4gICAgdmFyIG90aGVyQXJncyA9IEFycmF5KHN0YXJ0ICsgMSk7XG4gICAgaW5kZXggPSAtMTtcbiAgICB3aGlsZSAoKytpbmRleCA8IHN0YXJ0KSB7XG4gICAgICBvdGhlckFyZ3NbaW5kZXhdID0gYXJnc1tpbmRleF07XG4gICAgfVxuICAgIG90aGVyQXJnc1tzdGFydF0gPSBhcnJheTtcbiAgICByZXR1cm4gYXBwbHkoZnVuYywgdGhpcywgb3RoZXJBcmdzKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSByZXN0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL3Jlc3QuanNcbiAqKiBtb2R1bGUgaWQgPSAxNjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciB0b051bWJlciA9IHJlcXVpcmUoJy4vdG9OdW1iZXInKTtcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMCxcbiAgICBNQVhfSU5URUdFUiA9IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4O1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBmaW5pdGUgbnVtYmVyLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4xMi4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGNvbnZlcnRlZCBudW1iZXIuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9GaW5pdGUoMy4yKTtcbiAqIC8vID0+IDMuMlxuICpcbiAqIF8udG9GaW5pdGUoTnVtYmVyLk1JTl9WQUxVRSk7XG4gKiAvLyA9PiA1ZS0zMjRcbiAqXG4gKiBfLnRvRmluaXRlKEluZmluaXR5KTtcbiAqIC8vID0+IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4XG4gKlxuICogXy50b0Zpbml0ZSgnMy4yJyk7XG4gKiAvLyA9PiAzLjJcbiAqL1xuZnVuY3Rpb24gdG9GaW5pdGUodmFsdWUpIHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogMDtcbiAgfVxuICB2YWx1ZSA9IHRvTnVtYmVyKHZhbHVlKTtcbiAgaWYgKHZhbHVlID09PSBJTkZJTklUWSB8fCB2YWx1ZSA9PT0gLUlORklOSVRZKSB7XG4gICAgdmFyIHNpZ24gPSAodmFsdWUgPCAwID8gLTEgOiAxKTtcbiAgICByZXR1cm4gc2lnbiAqIE1BWF9JTlRFR0VSO1xuICB9XG4gIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgPyB2YWx1ZSA6IDA7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9GaW5pdGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvdG9GaW5pdGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxNjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlVG9TdHJpbmcgPSByZXF1aXJlKCcuL19iYXNlVG9TdHJpbmcnKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGEgc3RyaW5nLiBBbiBlbXB0eSBzdHJpbmcgaXMgcmV0dXJuZWQgZm9yIGBudWxsYFxuICogYW5kIGB1bmRlZmluZWRgIHZhbHVlcy4gVGhlIHNpZ24gb2YgYC0wYCBpcyBwcmVzZXJ2ZWQuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8udG9TdHJpbmcobnVsbCk7XG4gKiAvLyA9PiAnJ1xuICpcbiAqIF8udG9TdHJpbmcoLTApO1xuICogLy8gPT4gJy0wJ1xuICpcbiAqIF8udG9TdHJpbmcoWzEsIDIsIDNdKTtcbiAqIC8vID0+ICcxLDIsMydcbiAqL1xuZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IGJhc2VUb1N0cmluZyh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9TdHJpbmc7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvdG9TdHJpbmcuanNcbiAqKiBtb2R1bGUgaWQgPSAxNjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1jb3JlLmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cbnZhciBfc2VsZiA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJylcblx0PyB3aW5kb3cgICAvLyBpZiBpbiBicm93c2VyXG5cdDogKFxuXHRcdCh0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZSlcblx0XHQ/IHNlbGYgLy8gaWYgaW4gd29ya2VyXG5cdFx0OiB7fSAgIC8vIGlmIGluIG5vZGUganNcblx0KTtcblxuLyoqXG4gKiBQcmlzbTogTGlnaHR3ZWlnaHQsIHJvYnVzdCwgZWxlZ2FudCBzeW50YXggaGlnaGxpZ2h0aW5nXG4gKiBNSVQgbGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocC9cbiAqIEBhdXRob3IgTGVhIFZlcm91IGh0dHA6Ly9sZWEudmVyb3UubWVcbiAqL1xuXG52YXIgUHJpc20gPSAoZnVuY3Rpb24oKXtcblxuLy8gUHJpdmF0ZSBoZWxwZXIgdmFyc1xudmFyIGxhbmcgPSAvXFxibGFuZyg/OnVhZ2UpPy0oXFx3KylcXGIvaTtcbnZhciB1bmlxdWVJZCA9IDA7XG5cbnZhciBfID0gX3NlbGYuUHJpc20gPSB7XG5cdHV0aWw6IHtcblx0XHRlbmNvZGU6IGZ1bmN0aW9uICh0b2tlbnMpIHtcblx0XHRcdGlmICh0b2tlbnMgaW5zdGFuY2VvZiBUb2tlbikge1xuXHRcdFx0XHRyZXR1cm4gbmV3IFRva2VuKHRva2Vucy50eXBlLCBfLnV0aWwuZW5jb2RlKHRva2Vucy5jb250ZW50KSwgdG9rZW5zLmFsaWFzKTtcblx0XHRcdH0gZWxzZSBpZiAoXy51dGlsLnR5cGUodG9rZW5zKSA9PT0gJ0FycmF5Jykge1xuXHRcdFx0XHRyZXR1cm4gdG9rZW5zLm1hcChfLnV0aWwuZW5jb2RlKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiB0b2tlbnMucmVwbGFjZSgvJi9nLCAnJmFtcDsnKS5yZXBsYWNlKC88L2csICcmbHQ7JykucmVwbGFjZSgvXFx1MDBhMC9nLCAnICcpO1xuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHR0eXBlOiBmdW5jdGlvbiAobykge1xuXHRcdFx0cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5tYXRjaCgvXFxbb2JqZWN0IChcXHcrKVxcXS8pWzFdO1xuXHRcdH0sXG5cblx0XHRvYmpJZDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0aWYgKCFvYmpbJ19faWQnXSkge1xuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCAnX19pZCcsIHsgdmFsdWU6ICsrdW5pcXVlSWQgfSk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gb2JqWydfX2lkJ107XG5cdFx0fSxcblxuXHRcdC8vIERlZXAgY2xvbmUgYSBsYW5ndWFnZSBkZWZpbml0aW9uIChlLmcuIHRvIGV4dGVuZCBpdClcblx0XHRjbG9uZTogZnVuY3Rpb24gKG8pIHtcblx0XHRcdHZhciB0eXBlID0gXy51dGlsLnR5cGUobyk7XG5cblx0XHRcdHN3aXRjaCAodHlwZSkge1xuXHRcdFx0XHRjYXNlICdPYmplY3QnOlxuXHRcdFx0XHRcdHZhciBjbG9uZSA9IHt9O1xuXG5cdFx0XHRcdFx0Zm9yICh2YXIga2V5IGluIG8pIHtcblx0XHRcdFx0XHRcdGlmIChvLmhhc093blByb3BlcnR5KGtleSkpIHtcblx0XHRcdFx0XHRcdFx0Y2xvbmVba2V5XSA9IF8udXRpbC5jbG9uZShvW2tleV0pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBjbG9uZTtcblxuXHRcdFx0XHRjYXNlICdBcnJheSc6XG5cdFx0XHRcdFx0Ly8gQ2hlY2sgZm9yIGV4aXN0ZW5jZSBmb3IgSUU4XG5cdFx0XHRcdFx0cmV0dXJuIG8ubWFwICYmIG8ubWFwKGZ1bmN0aW9uKHYpIHsgcmV0dXJuIF8udXRpbC5jbG9uZSh2KTsgfSk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBvO1xuXHRcdH1cblx0fSxcblxuXHRsYW5ndWFnZXM6IHtcblx0XHRleHRlbmQ6IGZ1bmN0aW9uIChpZCwgcmVkZWYpIHtcblx0XHRcdHZhciBsYW5nID0gXy51dGlsLmNsb25lKF8ubGFuZ3VhZ2VzW2lkXSk7XG5cblx0XHRcdGZvciAodmFyIGtleSBpbiByZWRlZikge1xuXHRcdFx0XHRsYW5nW2tleV0gPSByZWRlZltrZXldO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gbGFuZztcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogSW5zZXJ0IGEgdG9rZW4gYmVmb3JlIGFub3RoZXIgdG9rZW4gaW4gYSBsYW5ndWFnZSBsaXRlcmFsXG5cdFx0ICogQXMgdGhpcyBuZWVkcyB0byByZWNyZWF0ZSB0aGUgb2JqZWN0ICh3ZSBjYW5ub3QgYWN0dWFsbHkgaW5zZXJ0IGJlZm9yZSBrZXlzIGluIG9iamVjdCBsaXRlcmFscyksXG5cdFx0ICogd2UgY2Fubm90IGp1c3QgcHJvdmlkZSBhbiBvYmplY3QsIHdlIG5lZWQgYW5vYmplY3QgYW5kIGEga2V5LlxuXHRcdCAqIEBwYXJhbSBpbnNpZGUgVGhlIGtleSAob3IgbGFuZ3VhZ2UgaWQpIG9mIHRoZSBwYXJlbnRcblx0XHQgKiBAcGFyYW0gYmVmb3JlIFRoZSBrZXkgdG8gaW5zZXJ0IGJlZm9yZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgZnVuY3Rpb24gYXBwZW5kcyBpbnN0ZWFkLlxuXHRcdCAqIEBwYXJhbSBpbnNlcnQgT2JqZWN0IHdpdGggdGhlIGtleS92YWx1ZSBwYWlycyB0byBpbnNlcnRcblx0XHQgKiBAcGFyYW0gcm9vdCBUaGUgb2JqZWN0IHRoYXQgY29udGFpbnMgYGluc2lkZWAuIElmIGVxdWFsIHRvIFByaXNtLmxhbmd1YWdlcywgaXQgY2FuIGJlIG9taXR0ZWQuXG5cdFx0ICovXG5cdFx0aW5zZXJ0QmVmb3JlOiBmdW5jdGlvbiAoaW5zaWRlLCBiZWZvcmUsIGluc2VydCwgcm9vdCkge1xuXHRcdFx0cm9vdCA9IHJvb3QgfHwgXy5sYW5ndWFnZXM7XG5cdFx0XHR2YXIgZ3JhbW1hciA9IHJvb3RbaW5zaWRlXTtcblxuXHRcdFx0aWYgKGFyZ3VtZW50cy5sZW5ndGggPT0gMikge1xuXHRcdFx0XHRpbnNlcnQgPSBhcmd1bWVudHNbMV07XG5cblx0XHRcdFx0Zm9yICh2YXIgbmV3VG9rZW4gaW4gaW5zZXJ0KSB7XG5cdFx0XHRcdFx0aWYgKGluc2VydC5oYXNPd25Qcm9wZXJ0eShuZXdUb2tlbikpIHtcblx0XHRcdFx0XHRcdGdyYW1tYXJbbmV3VG9rZW5dID0gaW5zZXJ0W25ld1Rva2VuXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZ3JhbW1hcjtcblx0XHRcdH1cblxuXHRcdFx0dmFyIHJldCA9IHt9O1xuXG5cdFx0XHRmb3IgKHZhciB0b2tlbiBpbiBncmFtbWFyKSB7XG5cblx0XHRcdFx0aWYgKGdyYW1tYXIuaGFzT3duUHJvcGVydHkodG9rZW4pKSB7XG5cblx0XHRcdFx0XHRpZiAodG9rZW4gPT0gYmVmb3JlKSB7XG5cblx0XHRcdFx0XHRcdGZvciAodmFyIG5ld1Rva2VuIGluIGluc2VydCkge1xuXG5cdFx0XHRcdFx0XHRcdGlmIChpbnNlcnQuaGFzT3duUHJvcGVydHkobmV3VG9rZW4pKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmV0W25ld1Rva2VuXSA9IGluc2VydFtuZXdUb2tlbl07XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXRbdG9rZW5dID0gZ3JhbW1hclt0b2tlbl07XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVXBkYXRlIHJlZmVyZW5jZXMgaW4gb3RoZXIgbGFuZ3VhZ2UgZGVmaW5pdGlvbnNcblx0XHRcdF8ubGFuZ3VhZ2VzLkRGUyhfLmxhbmd1YWdlcywgZnVuY3Rpb24oa2V5LCB2YWx1ZSkge1xuXHRcdFx0XHRpZiAodmFsdWUgPT09IHJvb3RbaW5zaWRlXSAmJiBrZXkgIT0gaW5zaWRlKSB7XG5cdFx0XHRcdFx0dGhpc1trZXldID0gcmV0O1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblxuXHRcdFx0cmV0dXJuIHJvb3RbaW5zaWRlXSA9IHJldDtcblx0XHR9LFxuXG5cdFx0Ly8gVHJhdmVyc2UgYSBsYW5ndWFnZSBkZWZpbml0aW9uIHdpdGggRGVwdGggRmlyc3QgU2VhcmNoXG5cdFx0REZTOiBmdW5jdGlvbihvLCBjYWxsYmFjaywgdHlwZSwgdmlzaXRlZCkge1xuXHRcdFx0dmlzaXRlZCA9IHZpc2l0ZWQgfHwge307XG5cdFx0XHRmb3IgKHZhciBpIGluIG8pIHtcblx0XHRcdFx0aWYgKG8uaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRjYWxsYmFjay5jYWxsKG8sIGksIG9baV0sIHR5cGUgfHwgaSk7XG5cblx0XHRcdFx0XHRpZiAoXy51dGlsLnR5cGUob1tpXSkgPT09ICdPYmplY3QnICYmICF2aXNpdGVkW18udXRpbC5vYmpJZChvW2ldKV0pIHtcblx0XHRcdFx0XHRcdHZpc2l0ZWRbXy51dGlsLm9iaklkKG9baV0pXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRfLmxhbmd1YWdlcy5ERlMob1tpXSwgY2FsbGJhY2ssIG51bGwsIHZpc2l0ZWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRlbHNlIGlmIChfLnV0aWwudHlwZShvW2ldKSA9PT0gJ0FycmF5JyAmJiAhdmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldKSB7XG5cdFx0XHRcdFx0XHR2aXNpdGVkW18udXRpbC5vYmpJZChvW2ldKV0gPSB0cnVlO1xuXHRcdFx0XHRcdFx0Xy5sYW5ndWFnZXMuREZTKG9baV0sIGNhbGxiYWNrLCBpLCB2aXNpdGVkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdHBsdWdpbnM6IHt9LFxuXG5cdGhpZ2hsaWdodEFsbDogZnVuY3Rpb24oYXN5bmMsIGNhbGxiYWNrKSB7XG5cdFx0dmFyIGVudiA9IHtcblx0XHRcdGNhbGxiYWNrOiBjYWxsYmFjayxcblx0XHRcdHNlbGVjdG9yOiAnY29kZVtjbGFzcyo9XCJsYW5ndWFnZS1cIl0sIFtjbGFzcyo9XCJsYW5ndWFnZS1cIl0gY29kZSwgY29kZVtjbGFzcyo9XCJsYW5nLVwiXSwgW2NsYXNzKj1cImxhbmctXCJdIGNvZGUnXG5cdFx0fTtcblxuXHRcdF8uaG9va3MucnVuKFwiYmVmb3JlLWhpZ2hsaWdodGFsbFwiLCBlbnYpO1xuXG5cdFx0dmFyIGVsZW1lbnRzID0gZW52LmVsZW1lbnRzIHx8IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoZW52LnNlbGVjdG9yKTtcblxuXHRcdGZvciAodmFyIGk9MCwgZWxlbWVudDsgZWxlbWVudCA9IGVsZW1lbnRzW2krK107KSB7XG5cdFx0XHRfLmhpZ2hsaWdodEVsZW1lbnQoZWxlbWVudCwgYXN5bmMgPT09IHRydWUsIGVudi5jYWxsYmFjayk7XG5cdFx0fVxuXHR9LFxuXG5cdGhpZ2hsaWdodEVsZW1lbnQ6IGZ1bmN0aW9uKGVsZW1lbnQsIGFzeW5jLCBjYWxsYmFjaykge1xuXHRcdC8vIEZpbmQgbGFuZ3VhZ2Vcblx0XHR2YXIgbGFuZ3VhZ2UsIGdyYW1tYXIsIHBhcmVudCA9IGVsZW1lbnQ7XG5cblx0XHR3aGlsZSAocGFyZW50ICYmICFsYW5nLnRlc3QocGFyZW50LmNsYXNzTmFtZSkpIHtcblx0XHRcdHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlO1xuXHRcdH1cblxuXHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdGxhbmd1YWdlID0gKHBhcmVudC5jbGFzc05hbWUubWF0Y2gobGFuZykgfHwgWywnJ10pWzFdLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRncmFtbWFyID0gXy5sYW5ndWFnZXNbbGFuZ3VhZ2VdO1xuXHRcdH1cblxuXHRcdC8vIFNldCBsYW5ndWFnZSBvbiB0aGUgZWxlbWVudCwgaWYgbm90IHByZXNlbnRcblx0XHRlbGVtZW50LmNsYXNzTmFtZSA9IGVsZW1lbnQuY2xhc3NOYW1lLnJlcGxhY2UobGFuZywgJycpLnJlcGxhY2UoL1xccysvZywgJyAnKSArICcgbGFuZ3VhZ2UtJyArIGxhbmd1YWdlO1xuXG5cdFx0Ly8gU2V0IGxhbmd1YWdlIG9uIHRoZSBwYXJlbnQsIGZvciBzdHlsaW5nXG5cdFx0cGFyZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xuXG5cdFx0aWYgKC9wcmUvaS50ZXN0KHBhcmVudC5ub2RlTmFtZSkpIHtcblx0XHRcdHBhcmVudC5jbGFzc05hbWUgPSBwYXJlbnQuY2xhc3NOYW1lLnJlcGxhY2UobGFuZywgJycpLnJlcGxhY2UoL1xccysvZywgJyAnKSArICcgbGFuZ3VhZ2UtJyArIGxhbmd1YWdlO1xuXHRcdH1cblxuXHRcdHZhciBjb2RlID0gZWxlbWVudC50ZXh0Q29udGVudDtcblxuXHRcdHZhciBlbnYgPSB7XG5cdFx0XHRlbGVtZW50OiBlbGVtZW50LFxuXHRcdFx0bGFuZ3VhZ2U6IGxhbmd1YWdlLFxuXHRcdFx0Z3JhbW1hcjogZ3JhbW1hcixcblx0XHRcdGNvZGU6IGNvZGVcblx0XHR9O1xuXG5cdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1zYW5pdHktY2hlY2snLCBlbnYpO1xuXG5cdFx0aWYgKCFlbnYuY29kZSB8fCAhZW52LmdyYW1tYXIpIHtcblx0XHRcdF8uaG9va3MucnVuKCdjb21wbGV0ZScsIGVudik7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1oaWdobGlnaHQnLCBlbnYpO1xuXG5cdFx0aWYgKGFzeW5jICYmIF9zZWxmLldvcmtlcikge1xuXHRcdFx0dmFyIHdvcmtlciA9IG5ldyBXb3JrZXIoXy5maWxlbmFtZSk7XG5cblx0XHRcdHdvcmtlci5vbm1lc3NhZ2UgPSBmdW5jdGlvbihldnQpIHtcblx0XHRcdFx0ZW52LmhpZ2hsaWdodGVkQ29kZSA9IGV2dC5kYXRhO1xuXG5cdFx0XHRcdF8uaG9va3MucnVuKCdiZWZvcmUtaW5zZXJ0JywgZW52KTtcblxuXHRcdFx0XHRlbnYuZWxlbWVudC5pbm5lckhUTUwgPSBlbnYuaGlnaGxpZ2h0ZWRDb2RlO1xuXG5cdFx0XHRcdGNhbGxiYWNrICYmIGNhbGxiYWNrLmNhbGwoZW52LmVsZW1lbnQpO1xuXHRcdFx0XHRfLmhvb2tzLnJ1bignYWZ0ZXItaGlnaGxpZ2h0JywgZW52KTtcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHRcdH07XG5cblx0XHRcdHdvcmtlci5wb3N0TWVzc2FnZShKU09OLnN0cmluZ2lmeSh7XG5cdFx0XHRcdGxhbmd1YWdlOiBlbnYubGFuZ3VhZ2UsXG5cdFx0XHRcdGNvZGU6IGVudi5jb2RlLFxuXHRcdFx0XHRpbW1lZGlhdGVDbG9zZTogdHJ1ZVxuXHRcdFx0fSkpO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGVudi5oaWdobGlnaHRlZENvZGUgPSBfLmhpZ2hsaWdodChlbnYuY29kZSwgZW52LmdyYW1tYXIsIGVudi5sYW5ndWFnZSk7XG5cblx0XHRcdF8uaG9va3MucnVuKCdiZWZvcmUtaW5zZXJ0JywgZW52KTtcblxuXHRcdFx0ZW52LmVsZW1lbnQuaW5uZXJIVE1MID0gZW52LmhpZ2hsaWdodGVkQ29kZTtcblxuXHRcdFx0Y2FsbGJhY2sgJiYgY2FsbGJhY2suY2FsbChlbGVtZW50KTtcblxuXHRcdFx0Xy5ob29rcy5ydW4oJ2FmdGVyLWhpZ2hsaWdodCcsIGVudik7XG5cdFx0XHRfLmhvb2tzLnJ1bignY29tcGxldGUnLCBlbnYpO1xuXHRcdH1cblx0fSxcblxuXHRoaWdobGlnaHQ6IGZ1bmN0aW9uICh0ZXh0LCBncmFtbWFyLCBsYW5ndWFnZSkge1xuXHRcdHZhciB0b2tlbnMgPSBfLnRva2VuaXplKHRleHQsIGdyYW1tYXIpO1xuXHRcdHJldHVybiBUb2tlbi5zdHJpbmdpZnkoXy51dGlsLmVuY29kZSh0b2tlbnMpLCBsYW5ndWFnZSk7XG5cdH0sXG5cblx0dG9rZW5pemU6IGZ1bmN0aW9uKHRleHQsIGdyYW1tYXIsIGxhbmd1YWdlKSB7XG5cdFx0dmFyIFRva2VuID0gXy5Ub2tlbjtcblxuXHRcdHZhciBzdHJhcnIgPSBbdGV4dF07XG5cblx0XHR2YXIgcmVzdCA9IGdyYW1tYXIucmVzdDtcblxuXHRcdGlmIChyZXN0KSB7XG5cdFx0XHRmb3IgKHZhciB0b2tlbiBpbiByZXN0KSB7XG5cdFx0XHRcdGdyYW1tYXJbdG9rZW5dID0gcmVzdFt0b2tlbl07XG5cdFx0XHR9XG5cblx0XHRcdGRlbGV0ZSBncmFtbWFyLnJlc3Q7XG5cdFx0fVxuXG5cdFx0dG9rZW5sb29wOiBmb3IgKHZhciB0b2tlbiBpbiBncmFtbWFyKSB7XG5cdFx0XHRpZighZ3JhbW1hci5oYXNPd25Qcm9wZXJ0eSh0b2tlbikgfHwgIWdyYW1tYXJbdG9rZW5dKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgcGF0dGVybnMgPSBncmFtbWFyW3Rva2VuXTtcblx0XHRcdHBhdHRlcm5zID0gKF8udXRpbC50eXBlKHBhdHRlcm5zKSA9PT0gXCJBcnJheVwiKSA/IHBhdHRlcm5zIDogW3BhdHRlcm5zXTtcblxuXHRcdFx0Zm9yICh2YXIgaiA9IDA7IGogPCBwYXR0ZXJucy5sZW5ndGg7ICsraikge1xuXHRcdFx0XHR2YXIgcGF0dGVybiA9IHBhdHRlcm5zW2pdLFxuXHRcdFx0XHRcdGluc2lkZSA9IHBhdHRlcm4uaW5zaWRlLFxuXHRcdFx0XHRcdGxvb2tiZWhpbmQgPSAhIXBhdHRlcm4ubG9va2JlaGluZCxcblx0XHRcdFx0XHRncmVlZHkgPSAhIXBhdHRlcm4uZ3JlZWR5LFxuXHRcdFx0XHRcdGxvb2tiZWhpbmRMZW5ndGggPSAwLFxuXHRcdFx0XHRcdGFsaWFzID0gcGF0dGVybi5hbGlhcztcblxuXHRcdFx0XHRwYXR0ZXJuID0gcGF0dGVybi5wYXR0ZXJuIHx8IHBhdHRlcm47XG5cblx0XHRcdFx0Zm9yICh2YXIgaT0wOyBpPHN0cmFyci5sZW5ndGg7IGkrKykgeyAvLyBEb27igJl0IGNhY2hlIGxlbmd0aCBhcyBpdCBjaGFuZ2VzIGR1cmluZyB0aGUgbG9vcFxuXG5cdFx0XHRcdFx0dmFyIHN0ciA9IHN0cmFycltpXTtcblxuXHRcdFx0XHRcdGlmIChzdHJhcnIubGVuZ3RoID4gdGV4dC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdC8vIFNvbWV0aGluZyB3ZW50IHRlcnJpYmx5IHdyb25nLCBBQk9SVCwgQUJPUlQhXG5cdFx0XHRcdFx0XHRicmVhayB0b2tlbmxvb3A7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKHN0ciBpbnN0YW5jZW9mIFRva2VuKSB7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRwYXR0ZXJuLmxhc3RJbmRleCA9IDA7XG5cblx0XHRcdFx0XHR2YXIgbWF0Y2ggPSBwYXR0ZXJuLmV4ZWMoc3RyKSxcblx0XHRcdFx0XHQgICAgZGVsTnVtID0gMTtcblxuXHRcdFx0XHRcdC8vIEdyZWVkeSBwYXR0ZXJucyBjYW4gb3ZlcnJpZGUvcmVtb3ZlIHVwIHRvIHR3byBwcmV2aW91c2x5IG1hdGNoZWQgdG9rZW5zXG5cdFx0XHRcdFx0aWYgKCFtYXRjaCAmJiBncmVlZHkgJiYgaSAhPSBzdHJhcnIubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdFx0Ly8gUmVjb25zdHJ1Y3QgdGhlIG9yaWdpbmFsIHRleHQgdXNpbmcgdGhlIG5leHQgdHdvIHRva2Vuc1xuXHRcdFx0XHRcdFx0dmFyIG5leHRUb2tlbiA9IHN0cmFycltpICsgMV0ubWF0Y2hlZFN0ciB8fCBzdHJhcnJbaSArIDFdLFxuXHRcdFx0XHRcdFx0ICAgIGNvbWJTdHIgPSBzdHIgKyBuZXh0VG9rZW47XG5cblx0XHRcdFx0XHRcdGlmIChpIDwgc3RyYXJyLmxlbmd0aCAtIDIpIHtcblx0XHRcdFx0XHRcdFx0Y29tYlN0ciArPSBzdHJhcnJbaSArIDJdLm1hdGNoZWRTdHIgfHwgc3RyYXJyW2kgKyAyXTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gVHJ5IHRoZSBwYXR0ZXJuIGFnYWluIG9uIHRoZSByZWNvbnN0cnVjdGVkIHRleHRcblx0XHRcdFx0XHRcdHBhdHRlcm4ubGFzdEluZGV4ID0gMDtcblx0XHRcdFx0XHRcdG1hdGNoID0gcGF0dGVybi5leGVjKGNvbWJTdHIpO1xuXHRcdFx0XHRcdFx0aWYgKCFtYXRjaCkge1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0dmFyIGZyb20gPSBtYXRjaC5pbmRleCArIChsb29rYmVoaW5kID8gbWF0Y2hbMV0ubGVuZ3RoIDogMCk7XG5cdFx0XHRcdFx0XHQvLyBUbyBiZSBhIHZhbGlkIGNhbmRpZGF0ZSwgdGhlIG5ldyBtYXRjaCBoYXMgdG8gc3RhcnQgaW5zaWRlIG9mIHN0clxuXHRcdFx0XHRcdFx0aWYgKGZyb20gPj0gc3RyLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHZhciB0byA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoLFxuXHRcdFx0XHRcdFx0ICAgIGxlbiA9IHN0ci5sZW5ndGggKyBuZXh0VG9rZW4ubGVuZ3RoO1xuXG5cdFx0XHRcdFx0XHQvLyBOdW1iZXIgb2YgdG9rZW5zIHRvIGRlbGV0ZSBhbmQgcmVwbGFjZSB3aXRoIHRoZSBuZXcgbWF0Y2hcblx0XHRcdFx0XHRcdGRlbE51bSA9IDM7XG5cblx0XHRcdFx0XHRcdGlmICh0byA8PSBsZW4pIHtcblx0XHRcdFx0XHRcdFx0aWYgKHN0cmFycltpICsgMV0uZ3JlZWR5KSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZGVsTnVtID0gMjtcblx0XHRcdFx0XHRcdFx0Y29tYlN0ciA9IGNvbWJTdHIuc2xpY2UoMCwgbGVuKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdHN0ciA9IGNvbWJTdHI7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYgKCFtYXRjaCkge1xuXHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0aWYobG9va2JlaGluZCkge1xuXHRcdFx0XHRcdFx0bG9va2JlaGluZExlbmd0aCA9IG1hdGNoWzFdLmxlbmd0aDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YXIgZnJvbSA9IG1hdGNoLmluZGV4ICsgbG9va2JlaGluZExlbmd0aCxcblx0XHRcdFx0XHQgICAgbWF0Y2ggPSBtYXRjaFswXS5zbGljZShsb29rYmVoaW5kTGVuZ3RoKSxcblx0XHRcdFx0XHQgICAgdG8gPSBmcm9tICsgbWF0Y2gubGVuZ3RoLFxuXHRcdFx0XHRcdCAgICBiZWZvcmUgPSBzdHIuc2xpY2UoMCwgZnJvbSksXG5cdFx0XHRcdFx0ICAgIGFmdGVyID0gc3RyLnNsaWNlKHRvKTtcblxuXHRcdFx0XHRcdHZhciBhcmdzID0gW2ksIGRlbE51bV07XG5cblx0XHRcdFx0XHRpZiAoYmVmb3JlKSB7XG5cdFx0XHRcdFx0XHRhcmdzLnB1c2goYmVmb3JlKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHR2YXIgd3JhcHBlZCA9IG5ldyBUb2tlbih0b2tlbiwgaW5zaWRlPyBfLnRva2VuaXplKG1hdGNoLCBpbnNpZGUpIDogbWF0Y2gsIGFsaWFzLCBtYXRjaCwgZ3JlZWR5KTtcblxuXHRcdFx0XHRcdGFyZ3MucHVzaCh3cmFwcGVkKTtcblxuXHRcdFx0XHRcdGlmIChhZnRlcikge1xuXHRcdFx0XHRcdFx0YXJncy5wdXNoKGFmdGVyKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRBcnJheS5wcm90b3R5cGUuc3BsaWNlLmFwcGx5KHN0cmFyciwgYXJncyk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gc3RyYXJyO1xuXHR9LFxuXG5cdGhvb2tzOiB7XG5cdFx0YWxsOiB7fSxcblxuXHRcdGFkZDogZnVuY3Rpb24gKG5hbWUsIGNhbGxiYWNrKSB7XG5cdFx0XHR2YXIgaG9va3MgPSBfLmhvb2tzLmFsbDtcblxuXHRcdFx0aG9va3NbbmFtZV0gPSBob29rc1tuYW1lXSB8fCBbXTtcblxuXHRcdFx0aG9va3NbbmFtZV0ucHVzaChjYWxsYmFjayk7XG5cdFx0fSxcblxuXHRcdHJ1bjogZnVuY3Rpb24gKG5hbWUsIGVudikge1xuXHRcdFx0dmFyIGNhbGxiYWNrcyA9IF8uaG9va3MuYWxsW25hbWVdO1xuXG5cdFx0XHRpZiAoIWNhbGxiYWNrcyB8fCAhY2FsbGJhY2tzLmxlbmd0aCkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGZvciAodmFyIGk9MCwgY2FsbGJhY2s7IGNhbGxiYWNrID0gY2FsbGJhY2tzW2krK107KSB7XG5cdFx0XHRcdGNhbGxiYWNrKGVudik7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG52YXIgVG9rZW4gPSBfLlRva2VuID0gZnVuY3Rpb24odHlwZSwgY29udGVudCwgYWxpYXMsIG1hdGNoZWRTdHIsIGdyZWVkeSkge1xuXHR0aGlzLnR5cGUgPSB0eXBlO1xuXHR0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuXHR0aGlzLmFsaWFzID0gYWxpYXM7XG5cdC8vIENvcHkgb2YgdGhlIGZ1bGwgc3RyaW5nIHRoaXMgdG9rZW4gd2FzIGNyZWF0ZWQgZnJvbVxuXHR0aGlzLm1hdGNoZWRTdHIgPSBtYXRjaGVkU3RyIHx8IG51bGw7XG5cdHRoaXMuZ3JlZWR5ID0gISFncmVlZHk7XG59O1xuXG5Ub2tlbi5zdHJpbmdpZnkgPSBmdW5jdGlvbihvLCBsYW5ndWFnZSwgcGFyZW50KSB7XG5cdGlmICh0eXBlb2YgbyA9PSAnc3RyaW5nJykge1xuXHRcdHJldHVybiBvO1xuXHR9XG5cblx0aWYgKF8udXRpbC50eXBlKG8pID09PSAnQXJyYXknKSB7XG5cdFx0cmV0dXJuIG8ubWFwKGZ1bmN0aW9uKGVsZW1lbnQpIHtcblx0XHRcdHJldHVybiBUb2tlbi5zdHJpbmdpZnkoZWxlbWVudCwgbGFuZ3VhZ2UsIG8pO1xuXHRcdH0pLmpvaW4oJycpO1xuXHR9XG5cblx0dmFyIGVudiA9IHtcblx0XHR0eXBlOiBvLnR5cGUsXG5cdFx0Y29udGVudDogVG9rZW4uc3RyaW5naWZ5KG8uY29udGVudCwgbGFuZ3VhZ2UsIHBhcmVudCksXG5cdFx0dGFnOiAnc3BhbicsXG5cdFx0Y2xhc3NlczogWyd0b2tlbicsIG8udHlwZV0sXG5cdFx0YXR0cmlidXRlczoge30sXG5cdFx0bGFuZ3VhZ2U6IGxhbmd1YWdlLFxuXHRcdHBhcmVudDogcGFyZW50XG5cdH07XG5cblx0aWYgKGVudi50eXBlID09ICdjb21tZW50Jykge1xuXHRcdGVudi5hdHRyaWJ1dGVzWydzcGVsbGNoZWNrJ10gPSAndHJ1ZSc7XG5cdH1cblxuXHRpZiAoby5hbGlhcykge1xuXHRcdHZhciBhbGlhc2VzID0gXy51dGlsLnR5cGUoby5hbGlhcykgPT09ICdBcnJheScgPyBvLmFsaWFzIDogW28uYWxpYXNdO1xuXHRcdEFycmF5LnByb3RvdHlwZS5wdXNoLmFwcGx5KGVudi5jbGFzc2VzLCBhbGlhc2VzKTtcblx0fVxuXG5cdF8uaG9va3MucnVuKCd3cmFwJywgZW52KTtcblxuXHR2YXIgYXR0cmlidXRlcyA9ICcnO1xuXG5cdGZvciAodmFyIG5hbWUgaW4gZW52LmF0dHJpYnV0ZXMpIHtcblx0XHRhdHRyaWJ1dGVzICs9IChhdHRyaWJ1dGVzID8gJyAnIDogJycpICsgbmFtZSArICc9XCInICsgKGVudi5hdHRyaWJ1dGVzW25hbWVdIHx8ICcnKSArICdcIic7XG5cdH1cblxuXHRyZXR1cm4gJzwnICsgZW52LnRhZyArICcgY2xhc3M9XCInICsgZW52LmNsYXNzZXMuam9pbignICcpICsgJ1wiICcgKyBhdHRyaWJ1dGVzICsgJz4nICsgZW52LmNvbnRlbnQgKyAnPC8nICsgZW52LnRhZyArICc+JztcblxufTtcblxuaWYgKCFfc2VsZi5kb2N1bWVudCkge1xuXHRpZiAoIV9zZWxmLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0XHQvLyBpbiBOb2RlLmpzXG5cdFx0cmV0dXJuIF9zZWxmLlByaXNtO1xuXHR9XG4gXHQvLyBJbiB3b3JrZXJcblx0X3NlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uKGV2dCkge1xuXHRcdHZhciBtZXNzYWdlID0gSlNPTi5wYXJzZShldnQuZGF0YSksXG5cdFx0ICAgIGxhbmcgPSBtZXNzYWdlLmxhbmd1YWdlLFxuXHRcdCAgICBjb2RlID0gbWVzc2FnZS5jb2RlLFxuXHRcdCAgICBpbW1lZGlhdGVDbG9zZSA9IG1lc3NhZ2UuaW1tZWRpYXRlQ2xvc2U7XG5cblx0XHRfc2VsZi5wb3N0TWVzc2FnZShfLmhpZ2hsaWdodChjb2RlLCBfLmxhbmd1YWdlc1tsYW5nXSwgbGFuZykpO1xuXHRcdGlmIChpbW1lZGlhdGVDbG9zZSkge1xuXHRcdFx0X3NlbGYuY2xvc2UoKTtcblx0XHR9XG5cdH0sIGZhbHNlKTtcblxuXHRyZXR1cm4gX3NlbGYuUHJpc207XG59XG5cbi8vR2V0IGN1cnJlbnQgc2NyaXB0IGFuZCBoaWdobGlnaHRcbnZhciBzY3JpcHQgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0IHx8IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIikpLnBvcCgpO1xuXG5pZiAoc2NyaXB0KSB7XG5cdF8uZmlsZW5hbWUgPSBzY3JpcHQuc3JjO1xuXG5cdGlmIChkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyICYmICFzY3JpcHQuaGFzQXR0cmlidXRlKCdkYXRhLW1hbnVhbCcpKSB7XG5cdFx0aWYoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIpIHtcblx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZShfLmhpZ2hsaWdodEFsbCwgMCk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIF8uaGlnaGxpZ2h0QWxsKTtcblx0XHR9XG5cdH1cbn1cblxucmV0dXJuIF9zZWxmLlByaXNtO1xuXG59KSgpO1xuXG5pZiAodHlwZW9mIG1vZHVsZSAhPT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0bW9kdWxlLmV4cG9ydHMgPSBQcmlzbTtcbn1cblxuLy8gaGFjayBmb3IgY29tcG9uZW50cyB0byB3b3JrIGNvcnJlY3RseSBpbiBub2RlLmpzXG5pZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0Z2xvYmFsLlByaXNtID0gUHJpc207XG59XG5cblxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1tYXJrdXAuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxuUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCA9IHtcblx0J2NvbW1lbnQnOiAvPCEtLVtcXHdcXFddKj8tLT4vLFxuXHQncHJvbG9nJzogLzxcXD9bXFx3XFxXXSs/XFw/Pi8sXG5cdCdkb2N0eXBlJzogLzwhRE9DVFlQRVtcXHdcXFddKz8+Lyxcblx0J2NkYXRhJzogLzwhXFxbQ0RBVEFcXFtbXFx3XFxXXSo/XV0+L2ksXG5cdCd0YWcnOiB7XG5cdFx0cGF0dGVybjogLzxcXC8/KD8hXFxkKVteXFxzPlxcLz0uJDxdKyg/OlxccytbXlxccz5cXC89XSsoPzo9KD86KFwifCcpKD86XFxcXFxcMXxcXFxcPyg/IVxcMSlbXFx3XFxXXSkqXFwxfFteXFxzJ1wiPj1dKykpPykqXFxzKlxcLz8+L2ksXG5cdFx0aW5zaWRlOiB7XG5cdFx0XHQndGFnJzoge1xuXHRcdFx0XHRwYXR0ZXJuOiAvXjxcXC8/W15cXHM+XFwvXSsvaSxcblx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0J3B1bmN0dWF0aW9uJzogL148XFwvPy8sXG5cdFx0XHRcdFx0J25hbWVzcGFjZSc6IC9eW15cXHM+XFwvOl0rOi9cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdCdhdHRyLXZhbHVlJzoge1xuXHRcdFx0XHRwYXR0ZXJuOiAvPSg/OignfFwiKVtcXHdcXFddKj8oXFwxKXxbXlxccz5dKykvaSxcblx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0J3B1bmN0dWF0aW9uJzogL1s9PlwiJ10vXG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHQncHVuY3R1YXRpb24nOiAvXFwvPz4vLFxuXHRcdFx0J2F0dHItbmFtZSc6IHtcblx0XHRcdFx0cGF0dGVybjogL1teXFxzPlxcL10rLyxcblx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0J25hbWVzcGFjZSc6IC9eW15cXHM+XFwvOl0rOi9cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fVxuXHR9LFxuXHQnZW50aXR5JzogLyYjP1tcXGRhLXpdezEsOH07L2lcbn07XG5cbi8vIFBsdWdpbiB0byBtYWtlIGVudGl0eSB0aXRsZSBzaG93IHRoZSByZWFsIGVudGl0eSwgaWRlYSBieSBSb21hbiBLb21hcm92XG5QcmlzbS5ob29rcy5hZGQoJ3dyYXAnLCBmdW5jdGlvbihlbnYpIHtcblxuXHRpZiAoZW52LnR5cGUgPT09ICdlbnRpdHknKSB7XG5cdFx0ZW52LmF0dHJpYnV0ZXNbJ3RpdGxlJ10gPSBlbnYuY29udGVudC5yZXBsYWNlKC8mYW1wOy8sICcmJyk7XG5cdH1cbn0pO1xuXG5QcmlzbS5sYW5ndWFnZXMueG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblByaXNtLmxhbmd1YWdlcy5odG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblByaXNtLmxhbmd1YWdlcy5tYXRobWwgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuUHJpc20ubGFuZ3VhZ2VzLnN2ZyA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5cblxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1jc3MuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxuUHJpc20ubGFuZ3VhZ2VzLmNzcyA9IHtcblx0J2NvbW1lbnQnOiAvXFwvXFwqW1xcd1xcV10qP1xcKlxcLy8sXG5cdCdhdHJ1bGUnOiB7XG5cdFx0cGF0dGVybjogL0BbXFx3LV0rPy4qPyg7fCg/PVxccypcXHspKS9pLFxuXHRcdGluc2lkZToge1xuXHRcdFx0J3J1bGUnOiAvQFtcXHctXSsvXG5cdFx0XHQvLyBTZWUgcmVzdCBiZWxvd1xuXHRcdH1cblx0fSxcblx0J3VybCc6IC91cmxcXCgoPzooW1wiJ10pKFxcXFwoPzpcXHJcXG58W1xcd1xcV10pfCg/IVxcMSlbXlxcXFxcXHJcXG5dKSpcXDF8Lio/KVxcKS9pLFxuXHQnc2VsZWN0b3InOiAvW15cXHtcXH1cXHNdW15cXHtcXH07XSo/KD89XFxzKlxceykvLFxuXHQnc3RyaW5nJzogLyhcInwnKShcXFxcKD86XFxyXFxufFtcXHdcXFddKXwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxLyxcblx0J3Byb3BlcnR5JzogLyhcXGJ8XFxCKVtcXHctXSsoPz1cXHMqOikvaSxcblx0J2ltcG9ydGFudCc6IC9cXEIhaW1wb3J0YW50XFxiL2ksXG5cdCdmdW5jdGlvbic6IC9bLWEtejAtOV0rKD89XFwoKS9pLFxuXHQncHVuY3R1YXRpb24nOiAvWygpe307Ol0vXG59O1xuXG5QcmlzbS5sYW5ndWFnZXMuY3NzWydhdHJ1bGUnXS5pbnNpZGUucmVzdCA9IFByaXNtLnV0aWwuY2xvbmUoUHJpc20ubGFuZ3VhZ2VzLmNzcyk7XG5cbmlmIChQcmlzbS5sYW5ndWFnZXMubWFya3VwKSB7XG5cdFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ21hcmt1cCcsICd0YWcnLCB7XG5cdFx0J3N0eWxlJzoge1xuXHRcdFx0cGF0dGVybjogLyg8c3R5bGVbXFx3XFxXXSo/PilbXFx3XFxXXSo/KD89PFxcL3N0eWxlPikvaSxcblx0XHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0XHRpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5jc3MsXG5cdFx0XHRhbGlhczogJ2xhbmd1YWdlLWNzcydcblx0XHR9XG5cdH0pO1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnaW5zaWRlJywgJ2F0dHItdmFsdWUnLCB7XG5cdFx0J3N0eWxlLWF0dHInOiB7XG5cdFx0XHRwYXR0ZXJuOiAvXFxzKnN0eWxlPShcInwnKS4qP1xcMS9pLFxuXHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdCdhdHRyLW5hbWUnOiB7XG5cdFx0XHRcdFx0cGF0dGVybjogL15cXHMqc3R5bGUvaSxcblx0XHRcdFx0XHRpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnLmluc2lkZVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQncHVuY3R1YXRpb24nOiAvXlxccyo9XFxzKlsnXCJdfFsnXCJdXFxzKiQvLFxuXHRcdFx0XHQnYXR0ci12YWx1ZSc6IHtcblx0XHRcdFx0XHRwYXR0ZXJuOiAvLisvaSxcblx0XHRcdFx0XHRpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5jc3Ncblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGFsaWFzOiAnbGFuZ3VhZ2UtY3NzJ1xuXHRcdH1cblx0fSwgUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcpO1xufVxuXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLWNsaWtlLmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cblByaXNtLmxhbmd1YWdlcy5jbGlrZSA9IHtcblx0J2NvbW1lbnQnOiBbXG5cdFx0e1xuXHRcdFx0cGF0dGVybjogLyhefFteXFxcXF0pXFwvXFwqW1xcd1xcV10qP1xcKlxcLy8sXG5cdFx0XHRsb29rYmVoaW5kOiB0cnVlXG5cdFx0fSxcblx0XHR7XG5cdFx0XHRwYXR0ZXJuOiAvKF58W15cXFxcOl0pXFwvXFwvLiovLFxuXHRcdFx0bG9va2JlaGluZDogdHJ1ZVxuXHRcdH1cblx0XSxcblx0J3N0cmluZyc6IHtcblx0XHRwYXR0ZXJuOiAvKFtcIiddKShcXFxcKD86XFxyXFxufFtcXHNcXFNdKXwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxLyxcblx0XHRncmVlZHk6IHRydWVcblx0fSxcblx0J2NsYXNzLW5hbWUnOiB7XG5cdFx0cGF0dGVybjogLygoPzpcXGIoPzpjbGFzc3xpbnRlcmZhY2V8ZXh0ZW5kc3xpbXBsZW1lbnRzfHRyYWl0fGluc3RhbmNlb2Z8bmV3KVxccyspfCg/OmNhdGNoXFxzK1xcKCkpW2EtejAtOV9cXC5cXFxcXSsvaSxcblx0XHRsb29rYmVoaW5kOiB0cnVlLFxuXHRcdGluc2lkZToge1xuXHRcdFx0cHVuY3R1YXRpb246IC8oXFwufFxcXFwpL1xuXHRcdH1cblx0fSxcblx0J2tleXdvcmQnOiAvXFxiKGlmfGVsc2V8d2hpbGV8ZG98Zm9yfHJldHVybnxpbnxpbnN0YW5jZW9mfGZ1bmN0aW9ufG5ld3x0cnl8dGhyb3d8Y2F0Y2h8ZmluYWxseXxudWxsfGJyZWFrfGNvbnRpbnVlKVxcYi8sXG5cdCdib29sZWFuJzogL1xcYih0cnVlfGZhbHNlKVxcYi8sXG5cdCdmdW5jdGlvbic6IC9bYS16MC05X10rKD89XFwoKS9pLFxuXHQnbnVtYmVyJzogL1xcYi0/KD86MHhbXFxkYS1mXSt8XFxkKlxcLj9cXGQrKD86ZVsrLV0/XFxkKyk/KVxcYi9pLFxuXHQnb3BlcmF0b3InOiAvLS0/fFxcK1xcKz98IT0/PT98PD0/fD49P3w9PT89P3wmJj98XFx8XFx8P3xcXD98XFwqfFxcL3x+fFxcXnwlLyxcblx0J3B1bmN0dWF0aW9uJzogL1t7fVtcXF07KCksLjpdL1xufTtcblxuXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLWphdmFzY3JpcHQuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxuUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHQgPSBQcmlzbS5sYW5ndWFnZXMuZXh0ZW5kKCdjbGlrZScsIHtcblx0J2tleXdvcmQnOiAvXFxiKGFzfGFzeW5jfGF3YWl0fGJyZWFrfGNhc2V8Y2F0Y2h8Y2xhc3N8Y29uc3R8Y29udGludWV8ZGVidWdnZXJ8ZGVmYXVsdHxkZWxldGV8ZG98ZWxzZXxlbnVtfGV4cG9ydHxleHRlbmRzfGZpbmFsbHl8Zm9yfGZyb218ZnVuY3Rpb258Z2V0fGlmfGltcGxlbWVudHN8aW1wb3J0fGlufGluc3RhbmNlb2Z8aW50ZXJmYWNlfGxldHxuZXd8bnVsbHxvZnxwYWNrYWdlfHByaXZhdGV8cHJvdGVjdGVkfHB1YmxpY3xyZXR1cm58c2V0fHN0YXRpY3xzdXBlcnxzd2l0Y2h8dGhpc3x0aHJvd3x0cnl8dHlwZW9mfHZhcnx2b2lkfHdoaWxlfHdpdGh8eWllbGQpXFxiLyxcblx0J251bWJlcic6IC9cXGItPygweFtcXGRBLUZhLWZdK3wwYlswMV0rfDBvWzAtN10rfFxcZCpcXC4/XFxkKyhbRWVdWystXT9cXGQrKT98TmFOfEluZmluaXR5KVxcYi8sXG5cdC8vIEFsbG93IGZvciBhbGwgbm9uLUFTQ0lJIGNoYXJhY3RlcnMgKFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMDA4NDQ0KVxuXHQnZnVuY3Rpb24nOiAvW18kYS16QS1aXFx4QTAtXFx1RkZGRl1bXyRhLXpBLVowLTlcXHhBMC1cXHVGRkZGXSooPz1cXCgpL2lcbn0pO1xuXG5QcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdqYXZhc2NyaXB0JywgJ2tleXdvcmQnLCB7XG5cdCdyZWdleCc6IHtcblx0XHRwYXR0ZXJuOiAvKF58W14vXSlcXC8oPyFcXC8pKFxcWy4rP118XFxcXC58W14vXFxcXFxcclxcbl0pK1xcL1tnaW15dV17MCw1fSg/PVxccyooJHxbXFxyXFxuLC47fSldKSkvLFxuXHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0Z3JlZWR5OiB0cnVlXG5cdH1cbn0pO1xuXG5QcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdqYXZhc2NyaXB0JywgJ3N0cmluZycsIHtcblx0J3RlbXBsYXRlLXN0cmluZyc6IHtcblx0XHRwYXR0ZXJuOiAvYCg/OlxcXFxcXFxcfFxcXFw/W15cXFxcXSkqP2AvLFxuXHRcdGdyZWVkeTogdHJ1ZSxcblx0XHRpbnNpZGU6IHtcblx0XHRcdCdpbnRlcnBvbGF0aW9uJzoge1xuXHRcdFx0XHRwYXR0ZXJuOiAvXFwkXFx7W159XStcXH0vLFxuXHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHQnaW50ZXJwb2xhdGlvbi1wdW5jdHVhdGlvbic6IHtcblx0XHRcdFx0XHRcdHBhdHRlcm46IC9eXFwkXFx7fFxcfSQvLFxuXHRcdFx0XHRcdFx0YWxpYXM6ICdwdW5jdHVhdGlvbidcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdHJlc3Q6IFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHQnc3RyaW5nJzogL1tcXHNcXFNdKy9cblx0XHR9XG5cdH1cbn0pO1xuXG5pZiAoUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCkge1xuXHRQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdtYXJrdXAnLCAndGFnJywge1xuXHRcdCdzY3JpcHQnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvKDxzY3JpcHRbXFx3XFxXXSo/PilbXFx3XFxXXSo/KD89PFxcL3NjcmlwdD4pL2ksXG5cdFx0XHRsb29rYmVoaW5kOiB0cnVlLFxuXHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdCxcblx0XHRcdGFsaWFzOiAnbGFuZ3VhZ2UtamF2YXNjcmlwdCdcblx0XHR9XG5cdH0pO1xufVxuXG5QcmlzbS5sYW5ndWFnZXMuanMgPSBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdDtcblxuLyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuICAgICBCZWdpbiBwcmlzbS1maWxlLWhpZ2hsaWdodC5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG4oZnVuY3Rpb24gKCkge1xuXHRpZiAodHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnIHx8ICFzZWxmLlByaXNtIHx8ICFzZWxmLmRvY3VtZW50IHx8ICFkb2N1bWVudC5xdWVyeVNlbGVjdG9yKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0c2VsZi5QcmlzbS5maWxlSGlnaGxpZ2h0ID0gZnVuY3Rpb24oKSB7XG5cblx0XHR2YXIgRXh0ZW5zaW9ucyA9IHtcblx0XHRcdCdqcyc6ICdqYXZhc2NyaXB0Jyxcblx0XHRcdCdweSc6ICdweXRob24nLFxuXHRcdFx0J3JiJzogJ3J1YnknLFxuXHRcdFx0J3BzMSc6ICdwb3dlcnNoZWxsJyxcblx0XHRcdCdwc20xJzogJ3Bvd2Vyc2hlbGwnLFxuXHRcdFx0J3NoJzogJ2Jhc2gnLFxuXHRcdFx0J2JhdCc6ICdiYXRjaCcsXG5cdFx0XHQnaCc6ICdjJyxcblx0XHRcdCd0ZXgnOiAnbGF0ZXgnXG5cdFx0fTtcblxuXHRcdGlmKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSB7IC8vIENoZWNrIHRvIHByZXZlbnQgZXJyb3IgaW4gSUU4XG5cdFx0XHRBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdwcmVbZGF0YS1zcmNdJykpLmZvckVhY2goZnVuY3Rpb24gKHByZSkge1xuXHRcdFx0XHR2YXIgc3JjID0gcHJlLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKTtcblxuXHRcdFx0XHR2YXIgbGFuZ3VhZ2UsIHBhcmVudCA9IHByZTtcblx0XHRcdFx0dmFyIGxhbmcgPSAvXFxibGFuZyg/OnVhZ2UpPy0oPyFcXCopKFxcdyspXFxiL2k7XG5cdFx0XHRcdHdoaWxlIChwYXJlbnQgJiYgIWxhbmcudGVzdChwYXJlbnQuY2xhc3NOYW1lKSkge1xuXHRcdFx0XHRcdHBhcmVudCA9IHBhcmVudC5wYXJlbnROb2RlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0XHRcdGxhbmd1YWdlID0gKHByZS5jbGFzc05hbWUubWF0Y2gobGFuZykgfHwgWywgJyddKVsxXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmICghbGFuZ3VhZ2UpIHtcblx0XHRcdFx0XHR2YXIgZXh0ZW5zaW9uID0gKHNyYy5tYXRjaCgvXFwuKFxcdyspJC8pIHx8IFssICcnXSlbMV07XG5cdFx0XHRcdFx0bGFuZ3VhZ2UgPSBFeHRlbnNpb25zW2V4dGVuc2lvbl0gfHwgZXh0ZW5zaW9uO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dmFyIGNvZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjb2RlJyk7XG5cdFx0XHRcdGNvZGUuY2xhc3NOYW1lID0gJ2xhbmd1YWdlLScgKyBsYW5ndWFnZTtcblxuXHRcdFx0XHRwcmUudGV4dENvbnRlbnQgPSAnJztcblxuXHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0gJ0xvYWRpbmfigKYnO1xuXG5cdFx0XHRcdHByZS5hcHBlbmRDaGlsZChjb2RlKTtcblxuXHRcdFx0XHR2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cblx0XHRcdFx0eGhyLm9wZW4oJ0dFVCcsIHNyYywgdHJ1ZSk7XG5cblx0XHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRpZiAoeGhyLnJlYWR5U3RhdGUgPT0gNCkge1xuXG5cdFx0XHRcdFx0XHRpZiAoeGhyLnN0YXR1cyA8IDQwMCAmJiB4aHIucmVzcG9uc2VUZXh0KSB7XG5cdFx0XHRcdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSB4aHIucmVzcG9uc2VUZXh0O1xuXG5cdFx0XHRcdFx0XHRcdFByaXNtLmhpZ2hsaWdodEVsZW1lbnQoY29kZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIGlmICh4aHIuc3RhdHVzID49IDQwMCkge1xuXHRcdFx0XHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0gJ+KcliBFcnJvciAnICsgeGhyLnN0YXR1cyArICcgd2hpbGUgZmV0Y2hpbmcgZmlsZTogJyArIHhoci5zdGF0dXNUZXh0O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSAn4pyWIEVycm9yOiBGaWxlIGRvZXMgbm90IGV4aXN0IG9yIGlzIGVtcHR5Jztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0eGhyLnNlbmQobnVsbCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0fTtcblxuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgc2VsZi5QcmlzbS5maWxlSGlnaGxpZ2h0KTtcblxufSkoKTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3ByaXNtanMvcHJpc20uanNcbiAqKiBtb2R1bGUgaWQgPSAxNjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8dGFibGUgY2xhc3M9c2dfYy1hcGktdGFibGU+IDx0cj4gPHRoPiBOYW1lIDwvdGg+IDx0aD4gVHlwZSA8L3RoPiA8dGg+IFJlcXVpcmVkIDwvdGg+IDx0aD4gRGVmYXVsdCA8L3RoPiA8dGg+IERlc2NyaXB0aW9uIDwvdGg+IDwvdHI+IDx0ciB2LWZvcj1cXFwiaXRlbSBpbiBpdGVtc1xcXCI+IDx0ZD57e2l0ZW0ubmFtZX19PC90ZD4gPHRkPnt7aXRlbS50eXBlfX08L3RkPiA8dGQ+e3tpdGVtLmlzUmVxdWlyZWR9fTwvdGQ+IDx0ZD57e2l0ZW0uZGVmYXVsdH19PC90ZD4gPHRkPnt7aXRlbS5kZXNjfX08L3RkPiA8L3RyPiA8L3RhYmxlPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2Rldi9zcmMvY29tcG9uZW50cy9hcGktdGFibGUvYXBpLXRhYmxlLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxNjVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8bmF2IGNsYXNzPVxcXCJzZ19jLW5hdiBoeV91LWhpZGUgaHlfdS1zaG93QG1kXFxcIiBAY2xpY2s9aGlkZU5hdj4gPGgyIGNsYXNzPXNnX2MtbmF2X19zZWN0aW9uPklOVFJPRFVDVElPTjwvaDI+IDx1bCBjbGFzcz1oeV9vLWxpc3QgQGNsaWNrPWhpZGVOYXY+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL2dldC1zdGFydGVkJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBHZXQgU3RhcnRlZCA8L2E+IDwvbGk+IDwvdWw+IDxoMiBjbGFzcz1zZ19jLW5hdl9fc2VjdGlvbj5DT01QT05FTlRTPC9oMj4gPHVsIGNsYXNzPWh5X28tbGlzdD4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvYWxlcnQnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IEFsZXJ0IDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvc3Bpbm5lcicsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gU3Bpbm5lciA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL3N0ZXAtdHJhY2tlcicsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gU3RlcCBUcmFja2VyIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvdGFicycsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gVGFicyA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL292ZXJsYXknLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IE92ZXJsYXkgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9sZWdhbCcsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gTGVnYWwgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9sZWdhbC1vdmVybGF5JywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBMZWdhbCArIE92ZXJsYXkgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9jb2xsYXBzYWJsZS1wYW5lbCcsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gQ29sbGFwc2FibGUgUGFuZWwgPC9hPiA8L2xpPiA8L3VsPiA8aDIgY2xhc3M9c2dfYy1uYXZfX3NlY3Rpb24+RElSRUNUSVZFUzwvaDI+IDx1bCBjbGFzcz1oeV9vLWxpc3Q+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL292ZXJsYXktb3BlbmVyJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBPdmVybGF5IE9wZW5lciA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL3NldC1mb2N1cycsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gU2V0IEZvY3VzIDwvYT4gPC9saT4gPC91bD4gPC9uYXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vZGV2L3NyYy9jb21wb25lbnRzL3NpZGUtbmF2L3NpZGUtbmF2Lmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxNjZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8aGVhZGVyIGNsYXNzPXNnX2Mtc2l0ZS1oZWFkZXI+IDxkaXYgY2xhc3M9c2dfYy1zaXRlLWhlYWRlcl9fY29udGFpbmVyPiA8YnV0dG9uIEBjbGljaz10b2dnbGVOYXYgY2xhc3M9XFxcImh5X3UtaGlkZUBtZCBqcy1hY3RpdmUgc2dfYy1zaXRlLWhlYWRlcl9fdG9nZ2xlYnRuXFxcIiB0eXBlPWJ1dHRvbiByb2xlPWJ1dHRvbj4gPHNwYW4gY2xhc3M9XFxcIlxcXCI+PGkgY2xhc3M9XFxcImh5X2MtaWNvbiBoeV9jLWljb24tLWhhbWJ1cmdlclxcXCI+PC9pPjwvc3Bhbj4gPC9idXR0b24+IDxhIHYtbGluaz1cXFwie3BhdGg6ICcvZ2V0LXN0YXJ0ZWQnfVxcXCI+IDxpbWcgY2xhc3M9bG9nbyBzcmM9XCIgKyByZXF1aXJlKFwiLi9sb2dvLnBuZ1wiKSArIFwiIGFsdD1Mb2dvPiA8L2E+IDwvZGl2PiA8L2hlYWRlcj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9kZXYvc3JjL2NvbXBvbmVudHMvc2l0ZS1oZWFkZXIvc2l0ZS1oZWFkZXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE2N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkFsZXJ0PC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxhbGVydCB0eXBlPWVycm9yPlRoaXMgaXMgYW4gZXJyb3IgYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9aW5mbz5UaGlzIGlzIGFuIGluZm8gYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9c3VjY2Vzcz5UaGlzIGlzIGEgc3VjY2VzcyBhbGVydC48L2FsZXJ0PiA8YWxlcnQgdHlwZT1zdWNjZXNzIDpkaXNtaXNzaWJsZT1mYWxzZT5UaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPXN1Y2Nlc3MgOm9uLWNsb3NlZD1kaXNtaXNzQ2FsbEJhY2s+VGhpcyBpcyBhbiBhbGVydCB3aXRoIGNhbGxiYWNrLjwvYWxlcnQ+IDxhbGVydCB0eXBlPWluZm8gOnRpbWVvdXQ9NTAwMD5UaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy48L2FsZXJ0PiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O2FsZXJ0IHR5cGU9XFxcImVycm9yXFxcIiZndDtUaGlzIGlzIGFuIGVycm9yIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcImluZm9cXFwiJmd0O1RoaXMgaXMgYW4gaW5mbyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xcbiZsdDthbGVydCB0eXBlPVxcXCJzdWNjZXNzXFxcIiZndDtUaGlzIGlzIGEgc3VjY2VzcyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xcbiZsdDthbGVydCB0eXBlPVxcXCJzdWNjZXNzXFxcIiA6ZGlzbWlzc2libGU9XFxcImZhbHNlXFxcIiZndDtUaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiIDpvbi1jbG9zZWQ9XFxcImRpc21pc3NDYWxsQmFja1xcXCImZ3Q7VGhpcyBpcyBhbiBhbGVydCB3aXRoIGNhbGxiYWNrLiZsdDsvYWxlcnQmZ3Q7XFxuJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiIDp0aW1lb3V0PVxcXCI1MDAwXFxcIiZndDtUaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy4mbHQ7L2FsZXJ0Jmd0O1xcbiAgICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2Rldi9zcmMvdmlld3MvYWxlcnQtcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNjhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5Db2xsYXBzYWJsZSBQYW5lbDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XFxcIlBhbmVsIDFcXFwiIDppcy1vcGVuPXRydWU+IFBhbmVsIDEgY29udGVudCA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XFxcIlBhbmVsIDJcXFwiPiBQYW5lbCAyIGNvbnRlbnQgPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMVxcXCIgOmlzLW9wZW49XFxcInRydWVcXFwiJmd0O1xcbiBQYW5lbCAxIGNvbnRlbnRcXG4mbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xcbiZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMlxcXCImZ3Q7XFxuIFBhbmVsIDIgY29udGVudFxcbiZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE2OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkdldHRpbmcgU3RhcnRlZDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleSBoeV91LXNwYWNlLW1iLTFcXFwiPkluc3RhbGxhdGlvbjwvaDM+IDxoNCBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXkgaHlfdS1zcGFjZS1tYi0xXFxcIj5OUE08L2g0PiA8cHJlPlxcbiAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1iYXNoPlxcbm5wbSBpbnN0YWxsIGh5YnJpZC10aG9yaXVtXFxuICAgICAgIDwvY29kZT5cXG4gICAgIDwvcHJlPiA8aDQgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5IGh5X3Utc3BhY2UtbWItMVxcXCI+VXNhZ2U8L2g0PiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBVc2UgYXMgYSBwbHVnaW4gKHJlZ2lzdGVycyBhbGwgY29tcG9uZW50cyBnbG9iYWxseSk6IDwvcD4gPHByZT5cXG4gICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtamF2YXNjcmlwdD5cXG5pbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7XFxuaW1wb3J0IEh5YnJpZFRob3JpdW0gZnJvbSAnaHlicmlkLXRob3JpdW0nO1xcblxcblZ1ZS51c2UoSHlicmlkVGhvcml1bSk7XFxuXFxubmV3IFZ1ZSh7XFxuICBlbDogJyNhcHAnXFxufSk7XFxuICAgICAgIDwvY29kZT5cXG4gICAgIDwvcHJlPiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBVc2UgaW5kaXZpZHVhbCBjb21wb25lbnRzOiA8L3A+IDxwcmU+XFxuICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWphdmFzY3JpcHQ+XFxuaW1wb3J0IFZ1ZSBmcm9tICd2dWUnO1xcbmltcG9ydCB7IEFsZXJ0LCBTdGVwVHJhY2tlciB9IGZyb20gJ2h5YnJpZC10aG9yaXVtJztcXG5cXG5uZXcgVnVlKHtcXG4gIGVsOiAnI2FwcCcsXFxuICBjb21wb25lbnRzOiB7XFxuICAgIEFsZXJ0LFxcbiAgICBTdGVwVHJhY2tlclxcbiAgfVxcbn0pO1xcbiAgICAgICA8L2NvZGU+XFxuICAgICA8L3ByZT4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleSBoeV91LXNwYWNlLW1iLTFcXFwiPkNETiAoc2NyaXB0IHRhZyk8L2g0PiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBUaGUgaHlicmlkLXRob3JpdW0uanMgZmlsZSBpbiB0aGUgQ0ROIGNvbnRhaW5zIGFsbCB0aGUgY29tcG9uZW50cyBleHBvc2VkIG9uIGEgZ2xvYmFsIHdpbmRvdy5IeWJyaWRUaG9yaXVtIG9iamVjdC4gPC9wPiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBGaXJzdCwgaW5jbHVkZSB0aGUgSlMgYW5kIENTUyBmaWxlcyBpbiB5b3VyIHBhZ2U6IDwvcD4gPHByZT5cXG4gICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDtodG1sJmd0O1xcbiZsdDtoZWFkJmd0O1xcbiAgJmx0O2xpbmsgcmVsPVxcXCJzdHlsZXNoZWV0XFxcIiBocmVmPVxcXCJodHRwczovL2Nkbi50ZWx1cy5kaWdpdGFsL3VpL2h5ZHJhLzAuNi40L2Jhc2UuY3NzXFxcIiBjaGFyc2V0PVxcXCJ1dGYtOFxcXCImZ3Q7XFxuICAmbHQ7bGluayByZWw9XFxcInN0eWxlc2hlZXRcXFwiIGhyZWY9XFxcInBhdGgvdG8vY2RuL2h5YnJpZC10aG9yaXVtLmNzc1xcXCImZ3Q7XFxuJmx0Oy9oZWFkJmd0O1xcbiZsdDtib2R5Jmd0O1xcbiAgJmx0OyEtLSBFeGFtcGxlIHVzYWdlIG9mIGFsZXJ0IC0tJmd0O1xcbiAgJmx0O2FsZXJ0IHR5cGU9XFxcImVycm9yXFxcIiZndDtUaGlzIGlzIGFuIGVycm9yIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuICAmbHQ7c2NyaXB0IHNyYz1cXFwicGF0aC90by92dWUuanNcXFwiJmd0OyZsdDsvc2NyaXB0Jmd0O1xcbiAgJmx0O3NjcmlwdCBzcmM9XFxcInBhdGgvdG8vY2RuL2h5YnJpZC10aG9yaXVtLmpzXFxcIiZndDsmbHQ7L3NjcmlwdCZndDtcXG4gICZsdDtzY3JpcHQgc3JjPVxcXCJwYXRoL3RvL2FwcC5qc1xcXCImZ3Q7Jmx0Oy9zY3JpcHQmZ3Q7XFxuJmx0Oy9ib2R5Jmd0O1xcbiZsdDsvaHRtbCZndDtcXG4gICAgICA8L2NvZGU+XFxuICAgIDwvcHJlPiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBUaGVuLCByZWdpc3RlciB0aGUgY29tcG9uZW50cyBnbG9iYWxseSBmb3IgdXNlIGluIHlvdXIgdGVtcGxhdGVzOiA8L3A+IDxwcmU+XFxuICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtamF2YXNjcmlwdD5cXG4vL2FwcC5qc1xcblxcblZ1ZS51c2UoSHlicmlkVGhvcml1bSk7XFxuXFxubmV3IFZ1ZSh7XFxuIGVsOiAnI2FwcCdcXG59KTtcXG4gICAgICA8L2NvZGU+XFxuICAgIDwvcHJlPiA8L2Rpdj4gPC9kaXY+PC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9nZXQtc3RhcnRlZC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNzBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5UYWI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGh5LWhlYWRlcj48L2h5LWhlYWRlcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4gICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2h5LWhlYWRlci1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE3MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkxlZ2FsICsgT3ZlcmxheTwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBMb3JlbTxsZWdhbC1jb3VudGVyIHYtb3ZlcmxheS1vcGVuZXI9bGVnYWwtb3ZlcmxheSBsZWdhbC1rZXk9Y29tYm8tb2ZmZXJzIGxlZ2FsLWxhbmc9ZW4gbGVnYWwtcmVnaW9uPWJjPjwvbGVnYWwtY291bnRlcj4gaXBzdW08bGVnYWwtY291bnRlciB2LW92ZXJsYXktb3BlbmVyPWxlZ2FsLW92ZXJsYXkgbGVnYWwta2V5PWhzLXJlZmVycmFsLXRlcm1zIGxlZ2FsLWxhbmc9ZW4gbGVnYWwtcmVnaW9uPWJjPjwvbGVnYWwtY291bnRlcj4gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIDxsZWdhbC1jb3VudGVyIGFwcHMtcmVxdWlyZW1lbnQgdi1vdmVybGF5LW9wZW5lcj1sZWdhbC1vdmVybGF5IGxlZ2FsLWtleT1hcHBzLXJlcXVpcmVtZW50IGxlZ2FsLWxhbmc9ZW4gbGVnYWwtcmVnaW9uPWJjPjwvbGVnYWwtY291bnRlcj5hZGlwaXNjaW5nIGVsaXQsIHNlZCBkbyBlaXVzbW9kIHRlbXBvciA8bGVnYWwtY291bnRlciB2LW92ZXJsYXktb3BlbmVyPWxlZ2FsLW92ZXJsYXkgbGVnYWwta2V5PTEteWVhci1vZmZlci1zdGltIGxlZ2FsLWxhbmc9ZW4gbGVnYWwtcmVnaW9uPWJjPjwvbGVnYWwtY291bnRlcj5pbmNpZGlkdW50IHV0IGxhYm9yZSBldCBkb2xvcmUgbWFnbmEgYWxpcXVhLiA8bGVnYWwtY291bnRlciB2LW92ZXJsYXktb3BlbmVyPWxlZ2FsLW92ZXJsYXkgbGVnYWwta2V5PWNvbWJvLW9mZmVycyBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+IDwvcD4gPG92ZXJsYXktY29udGFpbmVyPiA8b3ZlcmxheSBvdmVybGF5LWtleT1sZWdhbC1vdmVybGF5PiA8aDQgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9b3ZlcmxheS1oZWFkZXI+VGVybSBhbmQgY29uZGl0aW9uczwvaDQ+IDxhcnRpY2xlIHNsb3Q9b3ZlcmxheS1ib2R5PiA8bGVnYWwtY29udGFpbmVyPjwvbGVnYWwtY29udGFpbmVyPiA8L2FydGljbGU+IDwvb3ZlcmxheT4gPC9vdmVybGF5LWNvbnRhaW5lcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiZsdDtwJmd0O1xcbiBMb3JlbSZsdDtsZWdhbC1jb3VudGVyXFxuICAgdi1vdmVybGF5LW9wZW5lcj1cXFwibGVnYWwtb3ZlcmxheVxcXCJcXG4gICBsZWdhbC1rZXk9XFxcImNvbWJvLW9mZmVyc1xcXCJcXG4gICBsZWdhbC1sYW5nPVxcXCJlblxcXCIgbGVnYWwtcmVnaW9uPVxcXCJiY1xcXCJcXG4gICAmZ3Q7Jmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xcbiAgaXBzdW0mbHQ7bGVnYWwtY291bnRlclxcbiAgIHYtb3ZlcmxheS1vcGVuZXI9XFxcImxlZ2FsLW92ZXJsYXlcXFwiXFxuICAgbGVnYWwta2V5PVxcXCJocy1yZWZlcnJhbC10ZXJtc1xcXCJcXG4gICBsZWdhbC1sYW5nPVxcXCJlblxcXCIgbGVnYWwtcmVnaW9uPVxcXCJiY1xcXCJcXG4gICAmZ3Q7Jmx0Oy9sZWdhbC1jb3VudGVyJmd0OyBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXJcXG4gICAmbHQ7bGVnYWwtY291bnRlciBhcHBzLXJlcXVpcmVtZW50XFxuICAgICB2LW92ZXJsYXktb3BlbmVyPVxcXCJsZWdhbC1vdmVybGF5XFxcIlxcbiAgICAgbGVnYWwta2V5PVxcXCJhcHBzLXJlcXVpcmVtZW50XFxcIlxcbiAgICAgbGVnYWwtbGFuZz1cXFwiZW5cXFwiIGxlZ2FsLXJlZ2lvbj1cXFwiYmNcXFwiXFxuICAgICAmZ3Q7Jmx0Oy9sZWdhbC1jb3VudGVyJmd0O2FkaXBpc2NpbmcgZWxpdCxcXG4gc2VkIGRvIGVpdXNtb2QgdGVtcG9yICZsdDtsZWdhbC1jb3VudGVyXFxuICAgdi1vdmVybGF5LW9wZW5lcj1cXFwibGVnYWwtb3ZlcmxheVxcXCJcXG4gICBsZWdhbC1rZXk9XFxcIjEteWVhci1vZmZlci1zdGltXFxcIlxcbiAgIGxlZ2FsLWxhbmc9XFxcImVuXFxcIiBsZWdhbC1yZWdpb249XFxcImJjXFxcIlxcbiAgICZndDsmbHQ7L2xlZ2FsLWNvdW50ZXImZ3Q7aW5jaWRpZHVudCB1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YS5cXG4gJmx0O2xlZ2FsLWNvdW50ZXJcXG4gICB2LW92ZXJsYXktb3BlbmVyPVxcXCJsZWdhbC1vdmVybGF5XFxcIlxcbiAgIGxlZ2FsLWtleT1cXFwiY29tYm8tb2ZmZXJzXFxcIlxcbiAgIGxlZ2FsLWxhbmc9XFxcImVuXFxcIiBsZWdhbC1yZWdpb249XFxcImJjXFxcIlxcbiAgICZndDsmbHQ7L2xlZ2FsLWNvdW50ZXImZ3Q7XFxuICZsdDsvcCZndDtcXG4gXFxuICZsdDtvdmVybGF5LWNvbnRhaW5lciZndDtcXG4gICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVxcXCJsZWdhbC1vdmVybGF5XFxcIiZndDtcXG4gICAgJmx0O2g0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PVxcXCJvdmVybGF5LWhlYWRlclxcXCImZ3Q7VGVybSBhbmQgY29uZGl0aW9ucyZsdDsvaDQmZ3Q7XFxuICAgICZsdDthcnRpY2xlIHNsb3Q9XFxcIm92ZXJsYXktYm9keVxcXCImZ3Q7XFxuICAgICAgJmx0O2xlZ2FsLWNvbnRhaW5lciZndDsmbHQ7L2xlZ2FsLWNvbnRhaW5lciZndDtcXG4gICAgJmx0Oy9hcnRpY2xlJmd0O1xcbiAgJmx0Oy9vdmVybGF5Jmd0O1xcbiZsdDsvb3ZlcmxheS1jb250YWluZXImZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2Rldi9zcmMvdmlld3MvbGVnYWwtb3ZlcmxheS1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE3MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkxlZ2FsIFN5c3RlbTwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBMb3JlbSBpcHN1bTxsZWdhbC1jb3VudGVyIGxlZ2FsLWtleT1ocy1yZWZlcnJhbC10ZXJtcyBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+IGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQsIHNlZCBkbyBlaXVzbW9kIHRlbXBvciBpbmNpZGlkdW50IHV0IGxhYm9yZSBldCBkb2xvcmUgbWFnbmEgYWxpcXVhLiA8bGVnYWwtY291bnRlciBsZWdhbC1rZXk9MS15ZWFyLW9mZmVyLXN0aW0gbGVnYWwtbGFuZz1lbiBsZWdhbC1yZWdpb249YmM+PC9sZWdhbC1jb3VudGVyPiA8L3A+IDwvZGl2PiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8bGVnYWwtY29udGFpbmVyPjwvbGVnYWwtY29udGFpbmVyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O2xlZ2FsLWNvdW50ZXJcXG4gIGxlZ2FsLWtleT1cXFwiaHMtcmVmZXJyYWwtdGVybXNcXFwiXFxuICBsZWdhbC1sYW5nPVxcXCJlblxcXCJcXG4gIGxlZ2FsLXJlZ2lvbj1cXFwiYmNcXFwiXFxuJmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xcbiZsdDtsZWdhbC1jb250YWluZXImZ3Q7Jmx0Oy9sZWdhbC1jb250YWluZXImZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9amF2YXNjcmlwdD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtamF2YXNjcmlwdD5cXG5sZXQgdm0gPSBuZXcgVnVlKHtcXG4gZWw6ICdib2R5JyxcXG4gZGF0YSgpIHtcXG4gICByZXR1cm4ge1xcbiAgICAgbGlnZXJFbmRQb2ludDogJ2h0dHBzOi8vYXBpLmNtcy50ZWx1cy5jb20vbGVnYWxzJyxcXG4gICAgIGxpZ2VyQXBwbGljYXRpb25LZXk6ICdiOTczOGQ2N2I4OWRmYzc4Mjc0NmQ0YTljZjRhMTA5MydcXG4gICB9O1xcbiB9LFxcbiBjb21wb25lbnRzOiB7XFxuICAgTGVnYWxDb3VudGVyLFxcbiAgIExlZ2FsQ29udGFpbmVyXFxuIH1cXG59KTtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk6IExlZ2FsIENvdW50ZXI8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2xlZ2FsLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTczXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+T3ZlcmxheSBTeXN0ZW08L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHA+IDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1vdmVybGF5LTEgY2xhc3M9XFxcImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXFxcIiB0eXBlPWJ1dHRvbiByb2xlPWJ1dHRvbj4gT3BlbiBvdmVybGF5ICMxIDxpIGNsYXNzPVxcXCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXFxcIj48L2k+IDwvYnV0dG9uPiA8L3A+IDxwPiA8YnV0dG9uIHYtb3ZlcmxheS1vcGVuZXI9b3ZlcmxheS0yIGNsYXNzPVxcXCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVxcXCIgdHlwZT1idXR0b24gcm9sZT1idXR0b24+IE9wZW4gb3ZlcmxheSAjMiA8aSBjbGFzcz1cXFwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblxcXCI+PC9pPiA8L2J1dHRvbj4gPC9wPiA8b3ZlcmxheS1jb250YWluZXI+IDxvdmVybGF5IG92ZXJsYXkta2V5PW92ZXJsYXktMT4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PW92ZXJsYXktaGVhZGVyPlRoaXMgaXMgb3ZlcmxheSAjMTwvaDQ+IDxhcnRpY2xlIHNsb3Q9b3ZlcmxheS1ib2R5PiBPdmVybGF5ICMxIGJvZHkgPC9hcnRpY2xlPiA8L292ZXJsYXk+IDxvdmVybGF5IG92ZXJsYXkta2V5PW92ZXJsYXktMj4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PW92ZXJsYXktaGVhZGVyPlRoaXMgaXMgb3ZlcmxheSAjMjwvaDQ+IDxhcnRpY2xlIHNsb3Q9b3ZlcmxheS1ib2R5PiBPdmVybGF5ICMyIGJvZHkgPC9hcnRpY2xlPiA8L292ZXJsYXk+IDwvb3ZlcmxheS1jb250YWluZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7b3ZlcmxheS1jb250YWluZXImZ3Q7XFxuICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVxcXCJvdmVybGF5LTFcXFwiJmd0O1xcbiAgICZsdDtoNCAgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9XFxcIm92ZXJsYXktaGVhZGVyXFxcIiZndDtcXG4gICBUaGlzIGlzIG92ZXJsYXkgIzFcXG4gICAmbHQ7L2g0Jmd0O1xcbiAgICZsdDthcnRpY2xlIHNsb3Q9XFxcIm92ZXJsYXktYm9keVxcXCImZ3Q7XFxuICAgICBPdmVybGF5ICMxIGJvZHlcXG4gICAmbHQ7L2FydGljbGUmZ3Q7XFxuICZsdDsvb3ZlcmxheSZndDtcXG4gJmx0O292ZXJsYXkgb3ZlcmxheS1rZXk9XFxcIm92ZXJsYXktMlxcXCImZ3Q7XFxuICAgJmx0O2g0ICBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1cXFwib3ZlcmxheS1oZWFkZXJcXFwiJmd0O1xcbiAgIFRoaXMgaXMgb3ZlcmxheSAjMVxcbiAgICZsdDsvaDQmZ3Q7XFxuICAgJmx0O2FydGljbGUgc2xvdD1cXFwib3ZlcmxheS1ib2R5XFxcIiZndDtcXG4gICAgIE92ZXJsYXkgIzIgYm9keVxcbiAgICZsdDsvYXJ0aWNsZSZndDtcXG4gJmx0Oy9vdmVybGF5Jmd0O1xcbiZsdDsvb3ZlcmxheS1jb250YWluZXImZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9vdmVybGF5LXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTc0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+U3Bpbm5lcjwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8bGFiZWwgY2xhc3M9XFxcImh5X2MtY29udHJvbCBoeV9jLWNvbnRyb2wtLWNoZWNrYm94XFxcIj4gPHNwYW4gY2xhc3M9aHlfYy1jb250cm9sX19sYWJlbC10ZXh0PkZ1bGwgU2NyZWVuPC9zcGFuPiA8aW5wdXQgdHlwZT1jaGVja2JveCB2LW1vZGVsPWlzRnVsbFNjcmVlbiAvPiA8ZGl2IGNsYXNzPWh5X2MtY29udHJvbF9faW5kaWNhdG9yPjwvZGl2PiA8L2xhYmVsPiA8YnV0dG9uIEBjbGljaz1zaG93U3Bpbm5lciBjbGFzcz1cXFwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLXJhaXNlZCBoeV90LWdyZWVuXFxcIiB0eXBlPWJ1dHRvbj4gU2hvdyBTcGlubmVyIDwvYnV0dG9uPiA8c3Bpbm5lciA6ZnVsbC1zY3JlZW49aXNGdWxsU2NyZWVuIDp0ZXh0PW1zZz48L3NwaW5uZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4mbHQ7c3Bpbm5lciB0ZXh0PVxcXCJJIHdpbGwgY2xvc2UgaW4gMyBzZWNvbmRzXFxcIiA6ZnVsbC1zY3JlZW49XFxcInRydWVcXFwiJmd0OyZsdDsvc3Bpbm5lciZndDtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL3NwaW5uZXItcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5TdGVwIFRyYWNrZXI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHN0ZXAtdHJhY2tlciA6Y3VycmVudC1zdGVwPXN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgOmNvbmZpZz1zdGVwVHJhY2tlckNvbmZpZz48L3N0ZXAtdHJhY2tlcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O3N0ZXAtdHJhY2tlclxcbjpjdXJyZW50LXN0ZXA9XFxcInN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcXFwiXFxuOmNvbmZpZz1cXFwic3RlcFRyYWNrZXJDb25maWdcXFwiJmd0O1xcbiZsdDsvc3RlcC10cmFja2VyJmd0O1xcbiAgICAgICAgIDwvY29kZT5cXG4gICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1qYXZhc2NyaXB0PiA8cHJlPlxcbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1qcz5cXG5sZXQgc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XFxubGV0IHN0ZXBUcmFja2VyQ29uZmlnID0ge1xcbiAgaXNDbGlja2FibGU6IHRydWUsXFxuICBzdGVwczogW1xcbiAgICB7XFxuICAgICAgdGl0bGU6ICdTdGVwIEEnLFxcbiAgICAgIGxpbms6ICcnLFxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcXG4gICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDA7XFxuICAgICAgfVxcbiAgICB9LCB7XFxuICAgICAgdGl0bGU6ICdTdGVwIEInLFxcbiAgICAgIGxpbms6ICcnLFxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcXG4gICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDE7XFxuICAgICAgfVxcbiAgICB9LCB7XFxuICAgICAgdGl0bGU6ICdTdGVwIEMnLFxcbiAgICAgIGxpbms6ICcnLFxcbiAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcXG4gICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XFxuICAgICAgfVxcbiAgICB9XFxuICBdXFxufTtcXG5sZXQgdm0gPSBuZXcgVnVlKHtcXG4gIGVsOiAnYm9keScsXFxuICBkYXRhOiB7XFxuICAgIHN0ZXBUcmFja2VyQ29uZmlnLFxcbiAgICBzdGVwVHJhY2tlckN1cnJlbnRTdGVwXFxufSxcXG4gIGNvbXBvbmVudHM6IHtcXG4gICAgU3RlcFRyYWNrZXJcXG4gIH1cXG59KTtcXG4gICAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL3N0ZXAtdHJhY2tlci1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE3NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlRhYjwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8dGFicyBjbGFzcz1cXFwiYy1wcmljZS1sb29rdXAgaHlfby1sYXlvdXRfX2l0ZW0gaHlfdS1zaXplLTNvZjNAc20gaHlfdS1zaXplLTRvZjRAbWQgaHlfdS1zaXplLTZvZjEyQGxnXFxcIj4gPHRhYiBsYWJlbD1cXFwiVGFiIDFcXFwiPiA8cD4gVGFiIDEgY29udGVudCA8L3A+IDwvdGFiPiA8dGFiIGxhYmVsPVxcXCJUYWIgMlxcXCI+IDxwPiBUYWIgMiBjb250ZW50IDwvcD4gPC90YWI+IDx0YWIgbGFiZWw9XFxcIlRhYiAzXFxcIiA6aXMtZGlzYWJsZWQ9dHJ1ZT4gPHA+IFRhYiAzIGNvbnRlbnQgPC9wPiA8L3RhYj4gPC90YWJzPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuJmx0O3RhYnMmZ3Q7XFxuICZsdDt0YWIgbGFiZWw9XFxcIlRhYiAxXFxcIiZndDtcXG4gICAmbHQ7cCZndDtcXG4gICAgIFRhYiAxIGNvbnRlbnRcXG4gICAmbHQ7L3AmZ3Q7XFxuICZsdDsvdGFiJmd0O1xcbiAmbHQ7dGFiIGxhYmVsPVxcXCJUYWIgMlxcXCImZ3Q7XFxuICAgJmx0O3AmZ3Q7XFxuICAgICBUYWIgMiBjb250ZW50XFxuICAgJmx0Oy9wJmd0O1xcbiAmbHQ7L3RhYiZndDtcXG4gJmx0O3RhYiBsYWJlbD1cXFwiVGFiIDNcXFwiIDppcy1kaXNhYmxlZD1cXFwidHJ1ZVxcXCImZ3Q7XFxuICAgJmx0O3AmZ3Q7XFxuICAgICBUYWIgMyBjb250ZW50XFxuICAgJmx0Oy9wJmd0O1xcbiAmbHQ7L3RhYiZndDtcXG4mbHQ7L3RhYnMmZ3Q7XFxuICAgICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy90YWJzLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTc3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiB2LWlmPWlzVmlzaWJsZSB0cmFuc2l0aW9uPWZhZGUgY2xhc3M9Yy1hbGVydCA6Y2xhc3M9XFxcIidjLWFsZXJ0LS0nICsgdHlwZVxcXCIgOmNsYXNzPVxcXCJ7ICdjLWFsZXJ0LS1kaXNtaXNzaWJsZSc6IGRpc21pc3NpYmxlIH1cXFwiIHJvbGU9YWxlcnQ+IDxidXR0b24gdi1pZj1kaXNtaXNzaWJsZSBAY2xpY2s9ZGlzbWlzcyB0eXBlPWJ1dHRvbiBjbGFzcz1jLWFsZXJ0X19jbG9zZS1idXR0b24gYXJpYS1sYWJlbD1DbG9zZT4gPHNwYW4gYXJpYS1oaWRkZW49dHJ1ZT4mdGltZXM7PC9zcGFuPiA8c3BhbiBjbGFzcz1oeV91LWludmlzaWJsZT5DbG9zZTwvc3Bhbj4gPC9idXR0b24+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvYWxlcnQvYWxlcnQuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE3OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1jb2xsYXBzYWJsZS1wYW5lbD4gPGgzIEBjbGljay5wcmV2ZW50PXRvZ2dsZU9wZW4gOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2MtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlci0tb3Blbic6IGlzT3BlblxcbiAgICB9XFxcIiBjbGFzcz1cXFwiYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyIGh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIiB2LWh0bWw9bGFiZWw+IDwvaDM+IDxkaXYgY2xhc3M9Yy1jb2xsYXBzYWJsZS1wYW5lbF9fYm9keSA6Y2xhc3M9XFxcIntcXG4gICAgJ2MtY29sbGFwc2FibGUtcGFuZWxfX2JvZHktLW9wZW4nOiBpc09wZW5cXG4gIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9jb2xsYXBzYWJsZS1wYW5lbC5odG1sXG4gKiogbW9kdWxlIGlkID0gMTc5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy9oeS1oZWFkZXIvaHktaGVhZGVyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxODBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPWMtbGVnYWwtY29udGFpbmVyPiA8b2wgY2xhc3M9Yy1sZWdhbC1jb250YWluZXJfX29yZGVyZWQtbGlzdD4gPGxpIHYtc2V0LWZvY3VzPWxlZ2FsLmlzU2VsZWN0ZWQgY2xhc3M9Yy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSA6Y2xhc3M9XFxcIntcXG4gICAgICAnYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbS0tYWN0aXZlJzogbGVnYWwuaXNTZWxlY3RlZFxcbiAgICB9XFxcIiB2LWZvcj1cXFwibGVnYWwgaW4gaW5kZXhlZExlZ2Fsc1xcXCIgdi1odG1sPWxlZ2FsLmNvbnRlbnQ+IDwvbGk+IDwvb2w+IDx1bCBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcl9fdW5vcmRlcmVkLWxpc3Q+IDxsaSBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtIHYtZm9yPVxcXCJsZWdhbCBpbiBub25JbmRleGVkTGVnYWxzXFxcIiB2LWh0bWw9bGVnYWwuY29udGVudD4gPC9saT4gPC91bD4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY29udGFpbmVyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxODFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3VwIGNsYXNzPWMtbGVnYWwtc3VwPiA8YSBocmVmPSMgQGNsaWNrLnByZXZlbnQ9Y2xpY2tIYW5kbGVyPiB7e2xlZ2FsQ291bnRlcn19IDwvYT4gPC9zdXA+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTgyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLW92ZXJsYXktY29udGFpbmVyPiA8ZGl2IGNsYXNzPWMtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW4gOmNsYXNzPVxcXCJ7XFxuICAgICAgICAnYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbi0tYWN0aXZlJzogaXNWaXNpYmxlXFxuICAgIH1cXFwiIEBjbGljay5wcmV2ZW50PVxcXCJpc1Zpc2libGU9ZmFsc2VcXFwiPiA8L2Rpdj4gPGRpdiBjbGFzcz1jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5cyA6Y2xhc3M9XFxcIntcXG4gICAgICAgICdjLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5cy0tYWN0aXZlJzogaXNWaXNpYmxlXFxuICAgIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxODNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8YXJ0aWNsZSBjbGFzcz1jLW92ZXJsYXkgdi1zaG93PWlzVmlzaWJsZT4gPGRpdiBjbGFzcz1jLW92ZXJsYXlfX2JvZHk+IDxzbG90IG5hbWU9b3ZlcmxheS1ib2R5Pjwvc2xvdD4gPC9kaXY+IDxoZWFkZXIgY2xhc3M9Yy1vdmVybGF5X19oZWFkZXI+IDxzbG90IG5hbWU9b3ZlcmxheS1oZWFkZXI+PC9zbG90PiA8YnV0dG9uIHR5cGU9YnV0dG9uIGNsYXNzPWMtb3ZlcmxheV9fY2xvc2UtYnV0dG9uIGFyaWEtbGFiZWw9Q2xvc2UgdGFiaW5kZXg9MCBAY2xpY2sucHJldmVudD1jbG9zZU92ZXJsYXk+PC9idXR0b24+IDwvaGVhZGVyPiA8L2FydGljbGU+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5Lmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxODRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IHYtc2hvdz1hY3RpdmUgY2xhc3M9Yy1zcGlubmVyIDpjbGFzcz1cXFwieyAnYy1zcGlubmVyLS1mdWxsc2NyZWVuJzogZnVsbFNjcmVlbiB9XFxcIj4gPHN2ZyB2aWV3Qm94PVxcXCIwIDAgMTAwIDEwMFxcXCIgd2lkdGg9MCBoZWlnaHQ9MD4gPGNpcmNsZSBzdHJva2Utd2lkdGg9NCBmaWxsPW5vbmUgc3Ryb2tlLWxpbmVjYXA9cm91bmQgc3Ryb2tlLWRhc2hvZmZzZXQ9MCBjeD01MCBjeT01MCByPTIwPjwvY2lyY2xlPiA8L3N2Zz4gPHAgY2xhc3M9XFxcImMtc3Bpbm5lcl9fdGV4dCBoeV9jLWNvcHkgaHlfdS1mb250LXdlaWdodC0tbWVkaXVtXFxcIiB2LWlmPSEhdGV4dD57e3RleHR9fTwvcD4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvc3Bpbm5lci9zcGlubmVyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxODVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8dWwgY2xhc3M9Yy1zdGVwLXRyYWNrZXI+IDxsaSBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9fc3RlcCA6Y2xhc3M9XFxcIntcXG4gICAgICAnYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlJzogY3VycmVudFN0ZXAgPiAkaW5kZXgsXFxuICAgICAgJ2Mtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmUnOiBjdXJyZW50U3RlcCA9PT0gJGluZGV4LFxcbiAgICAgICdjLXN0ZXAtdHJhY2tlcl9fc2V0cC0tY2xpY2thYmxlJzogKGN1cnJlbnRTdGVwID4gJGluZGV4ICYmIGNvbmZpZy5pc0NsaWNrYWJsZSlcXG4gIH1cXFwiIHYtZm9yPVxcXCJzdGVwIGluIGNvbmZpZy5zdGVwc1xcXCI+IDxhIDpocmVmPVxcXCJzdGVwLmxpbmsgfHwgZmFsc2VcXFwiIEBjbGljaz1cXFwiY2xpY2tIYW5kbGVyKCRldmVudCwgc3RlcCwgJGluZGV4KVxcXCIgdi1pZj1jb25maWcuaXNDbGlja2FibGU+IDxzcGFuIGNsYXNzPWMtc3RlcC10cmFja2VyX19pY29uPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX2xhYmVsPnt7JGluZGV4ICsgMX19LiB7e3N0ZXAudGl0bGV9fTwvc3Bhbj4gPC9hPiA8c3BhbiB2LWVsc2UgY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX2ljb24+PC9zcGFuPiA8c3BhbiB2LWVsc2UgY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX2xhYmVsPnt7JGluZGV4ICsgMX19LiB7e3N0ZXAudGl0bGV9fTwvc3Bhbj4gPC9saT4gPC91bD4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvc3RlcC10cmFja2VyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxODZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPWMtdGFic19fcGFuZSA6Y2xhc3M9XFxcIntcXG4gICAgJ2MtdGFic19fcGFuZS0tYWN0aXZlJzogaXNWaXNpYmxlXFxuICB9XFxcIj4gPHNsb3Q+PC9zbG90PiA8L2Rpdj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy90YWIvdGFiLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxODdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPWMtdGFicz4gPHVsIGNsYXNzPWMtdGFic19faGVhZGVyPiA8bGkgdi1mb3I9XFxcInRhYiBpbiB0YWJzXFxcIiBjbGFzcz1jLXRhYnNfX2hlYWRlci1pdGVtIDpjbGFzcz1cXFwie1xcbiAgICAgICAgICAgICAgICAnYy10YWJzX19oZWFkZXItaXRlbS0tYWN0aXZlJzogKCRpbmRleCA9PT0gYWN0aXZlVGFiSW5kZXgpLFxcbiAgICAgICAgICAgICAgICAnYy10YWJzX19oZWFkZXItaXRlbS0tZGlzYWJsZWQnOiB0YWIuaXNEaXNhYmxlZFxcbiAgICAgICAgICAgICAgfVxcXCIgOmRpc2FibGVkPXRhYi5kaXNhYmxlZD4gPGEgaHJlZj0jIEBjbGljay5wcmV2ZW50PVxcXCJoYW5kbGVUYWJMaXN0Q2xpY2soJGluZGV4LCB0YWIpXFxcIiB2LWh0bWw9dGFiLmxhYmVsPjwvYT4gPC9saT4gPC91bD4gPGRpdiBjbGFzcz1jLXRhYnNfX2JvZHk+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IDwvZGl2PiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxODhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc2lkZS1uYXYuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL2NvbXBvbmVudHMvc2lkZS1uYXYvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMTg5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NpdGUtaGVhZGVyLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9hbGVydC1wYWdlLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vYWxlcnQtcGFnZS52dWVcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy92aWV3cy9hbGVydC1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWVcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy92aWV3cy9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9nZXQtc3RhcnRlZC52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2dldC1zdGFydGVkLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZ2V0LXN0YXJ0ZWQudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3MvZ2V0LXN0YXJ0ZWQudnVlXG4gKiogbW9kdWxlIGlkID0gMTkzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2h5LWhlYWRlci1wYWdlLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vaHktaGVhZGVyLXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3MvaHktaGVhZGVyLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTk0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2xlZ2FsLW92ZXJsYXktcGFnZS52dWVcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy92aWV3cy9sZWdhbC1vdmVybGF5LXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTk1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2xlZ2FsLXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9sZWdhbC1wYWdlLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL2xlZ2FsLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTk2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL292ZXJsYXktcGFnZS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL292ZXJsYXktcGFnZS52dWVcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy92aWV3cy9vdmVybGF5LXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTk3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL3NwaW5uZXItcGFnZS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL3NwaW5uZXItcGFnZS52dWVcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy92aWV3cy9zcGlubmVyLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTk4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL3N0ZXAtdHJhY2tlci1wYWdlLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vc3RlcC10cmFja2VyLXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3Mvc3RlcC10cmFja2VyLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTk5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL3RhYnMtcGFnZS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL3RhYnMtcGFnZS52dWVcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy92aWV3cy90YWJzLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMjAwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2FsZXJ0Lmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2NvbGxhcHNhYmxlLXBhbmVsLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvY29sbGFwc2FibGUtcGFuZWwvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2h5LWhlYWRlci5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL2h5LWhlYWRlci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9sZWdhbC1jb250YWluZXIuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gMjA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9sZWdhbC1jb3VudGVyLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9sZWdhbC1jb3VudGVyLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS1jb250YWluZXIudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vb3ZlcmxheS1jb250YWluZXIuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIwNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vb3ZlcmxheS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vb3ZlcmxheS5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3Bpbm5lci5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL3NwaW5uZXIvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3N0ZXAtdHJhY2tlci5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vdGFiLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi90YWIuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy90YWIvdGFiLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIxMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi90YWJzLnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vdGFicy52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vdGFicy5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiB2dWUtcm91dGVyIHYwLjcuMTNcbiAqIChjKSAyMDE2IEV2YW4gWW91XG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG4gKi9cbihmdW5jdGlvbiAoZ2xvYmFsLCBmYWN0b3J5KSB7XG4gIHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyA/IG1vZHVsZS5leHBvcnRzID0gZmFjdG9yeSgpIDpcbiAgdHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kID8gZGVmaW5lKGZhY3RvcnkpIDpcbiAgZ2xvYmFsLlZ1ZVJvdXRlciA9IGZhY3RvcnkoKTtcbn0odGhpcywgZnVuY3Rpb24gKCkgeyAndXNlIHN0cmljdCc7XG5cbiAgdmFyIGJhYmVsSGVscGVycyA9IHt9O1xuXG4gIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTtcbiAgICB9XG4gIH07XG4gIGZ1bmN0aW9uIFRhcmdldChwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkge1xuICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgdGhpcy5tYXRjaGVyID0gbWF0Y2hlcjtcbiAgICB0aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7XG4gIH1cblxuICBUYXJnZXQucHJvdG90eXBlID0ge1xuICAgIHRvOiBmdW5jdGlvbiB0byh0YXJnZXQsIGNhbGxiYWNrKSB7XG4gICAgICB2YXIgZGVsZWdhdGUgPSB0aGlzLmRlbGVnYXRlO1xuXG4gICAgICBpZiAoZGVsZWdhdGUgJiYgZGVsZWdhdGUud2lsbEFkZFJvdXRlKSB7XG4gICAgICAgIHRhcmdldCA9IGRlbGVnYXRlLndpbGxBZGRSb3V0ZSh0aGlzLm1hdGNoZXIudGFyZ2V0LCB0YXJnZXQpO1xuICAgICAgfVxuXG4gICAgICB0aGlzLm1hdGNoZXIuYWRkKHRoaXMucGF0aCwgdGFyZ2V0KTtcblxuICAgICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJZb3UgbXVzdCBoYXZlIGFuIGFyZ3VtZW50IGluIHRoZSBmdW5jdGlvbiBwYXNzZWQgdG8gYHRvYFwiKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1hdGNoZXIuYWRkQ2hpbGQodGhpcy5wYXRoLCB0YXJnZXQsIGNhbGxiYWNrLCB0aGlzLmRlbGVnYXRlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBNYXRjaGVyKHRhcmdldCkge1xuICAgIHRoaXMucm91dGVzID0ge307XG4gICAgdGhpcy5jaGlsZHJlbiA9IHt9O1xuICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICB9XG5cbiAgTWF0Y2hlci5wcm90b3R5cGUgPSB7XG4gICAgYWRkOiBmdW5jdGlvbiBhZGQocGF0aCwgaGFuZGxlcikge1xuICAgICAgdGhpcy5yb3V0ZXNbcGF0aF0gPSBoYW5kbGVyO1xuICAgIH0sXG5cbiAgICBhZGRDaGlsZDogZnVuY3Rpb24gYWRkQ2hpbGQocGF0aCwgdGFyZ2V0LCBjYWxsYmFjaywgZGVsZWdhdGUpIHtcbiAgICAgIHZhciBtYXRjaGVyID0gbmV3IE1hdGNoZXIodGFyZ2V0KTtcbiAgICAgIHRoaXMuY2hpbGRyZW5bcGF0aF0gPSBtYXRjaGVyO1xuXG4gICAgICB2YXIgbWF0Y2ggPSBnZW5lcmF0ZU1hdGNoKHBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKTtcblxuICAgICAgaWYgKGRlbGVnYXRlICYmIGRlbGVnYXRlLmNvbnRleHRFbnRlcmVkKSB7XG4gICAgICAgIGRlbGVnYXRlLmNvbnRleHRFbnRlcmVkKHRhcmdldCwgbWF0Y2gpO1xuICAgICAgfVxuXG4gICAgICBjYWxsYmFjayhtYXRjaCk7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIGdlbmVyYXRlTWF0Y2goc3RhcnRpbmdQYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkge1xuICAgIHJldHVybiBmdW5jdGlvbiAocGF0aCwgbmVzdGVkQ2FsbGJhY2spIHtcbiAgICAgIHZhciBmdWxsUGF0aCA9IHN0YXJ0aW5nUGF0aCArIHBhdGg7XG5cbiAgICAgIGlmIChuZXN0ZWRDYWxsYmFjaykge1xuICAgICAgICBuZXN0ZWRDYWxsYmFjayhnZW5lcmF0ZU1hdGNoKGZ1bGxQYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIG5ldyBUYXJnZXQoc3RhcnRpbmdQYXRoICsgcGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpO1xuICAgICAgfVxuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRoLCBoYW5kbGVyKSB7XG4gICAgdmFyIGxlbiA9IDA7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZUFycmF5Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgbGVuICs9IHJvdXRlQXJyYXlbaV0ucGF0aC5sZW5ndGg7XG4gICAgfVxuXG4gICAgcGF0aCA9IHBhdGguc3Vic3RyKGxlbik7XG4gICAgdmFyIHJvdXRlID0geyBwYXRoOiBwYXRoLCBoYW5kbGVyOiBoYW5kbGVyIH07XG4gICAgcm91dGVBcnJheS5wdXNoKHJvdXRlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVhY2hSb3V0ZShiYXNlUm91dGUsIG1hdGNoZXIsIGNhbGxiYWNrLCBiaW5kaW5nKSB7XG4gICAgdmFyIHJvdXRlcyA9IG1hdGNoZXIucm91dGVzO1xuXG4gICAgZm9yICh2YXIgcGF0aCBpbiByb3V0ZXMpIHtcbiAgICAgIGlmIChyb3V0ZXMuaGFzT3duUHJvcGVydHkocGF0aCkpIHtcbiAgICAgICAgdmFyIHJvdXRlQXJyYXkgPSBiYXNlUm91dGUuc2xpY2UoKTtcbiAgICAgICAgYWRkUm91dGUocm91dGVBcnJheSwgcGF0aCwgcm91dGVzW3BhdGhdKTtcblxuICAgICAgICBpZiAobWF0Y2hlci5jaGlsZHJlbltwYXRoXSkge1xuICAgICAgICAgIGVhY2hSb3V0ZShyb3V0ZUFycmF5LCBtYXRjaGVyLmNoaWxkcmVuW3BhdGhdLCBjYWxsYmFjaywgYmluZGluZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2suY2FsbChiaW5kaW5nLCByb3V0ZUFycmF5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1hcCAoY2FsbGJhY2ssIGFkZFJvdXRlQ2FsbGJhY2spIHtcbiAgICB2YXIgbWF0Y2hlciA9IG5ldyBNYXRjaGVyKCk7XG5cbiAgICBjYWxsYmFjayhnZW5lcmF0ZU1hdGNoKFwiXCIsIG1hdGNoZXIsIHRoaXMuZGVsZWdhdGUpKTtcblxuICAgIGVhY2hSb3V0ZShbXSwgbWF0Y2hlciwgZnVuY3Rpb24gKHJvdXRlKSB7XG4gICAgICBpZiAoYWRkUm91dGVDYWxsYmFjaykge1xuICAgICAgICBhZGRSb3V0ZUNhbGxiYWNrKHRoaXMsIHJvdXRlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWRkKHJvdXRlKTtcbiAgICAgIH1cbiAgICB9LCB0aGlzKTtcbiAgfVxuXG4gIHZhciBzcGVjaWFscyA9IFsnLycsICcuJywgJyonLCAnKycsICc/JywgJ3wnLCAnKCcsICcpJywgJ1snLCAnXScsICd7JywgJ30nLCAnXFxcXCddO1xuXG4gIHZhciBlc2NhcGVSZWdleCA9IG5ldyBSZWdFeHAoJyhcXFxcJyArIHNwZWNpYWxzLmpvaW4oJ3xcXFxcJykgKyAnKScsICdnJyk7XG5cbiAgdmFyIG5vV2FybmluZyA9IGZhbHNlO1xuICBmdW5jdGlvbiB3YXJuKG1zZykge1xuICAgIGlmICghbm9XYXJuaW5nICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgY29uc29sZS5lcnJvcignW3Z1ZS1yb3V0ZXJdICcgKyBtc2cpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHRyeURlY29kZSh1cmksIGFzQ29tcG9uZW50KSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhc0NvbXBvbmVudCA/IGRlY29kZVVSSUNvbXBvbmVudCh1cmkpIDogZGVjb2RlVVJJKHVyaSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgd2FybignbWFsZm9ybWVkIFVSSScgKyAoYXNDb21wb25lbnQgPyAnIGNvbXBvbmVudDogJyA6ICc6ICcpICsgdXJpKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBpc0FycmF5KHRlc3QpIHtcbiAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRlc3QpID09PSBcIltvYmplY3QgQXJyYXldXCI7XG4gIH1cblxuICAvLyBBIFNlZ21lbnQgcmVwcmVzZW50cyBhIHNlZ21lbnQgaW4gdGhlIG9yaWdpbmFsIHJvdXRlIGRlc2NyaXB0aW9uLlxuICAvLyBFYWNoIFNlZ21lbnQgdHlwZSBwcm92aWRlcyBhbiBgZWFjaENoYXJgIGFuZCBgcmVnZXhgIG1ldGhvZC5cbiAgLy9cbiAgLy8gVGhlIGBlYWNoQ2hhcmAgbWV0aG9kIGludm9rZXMgdGhlIGNhbGxiYWNrIHdpdGggb25lIG9yIG1vcmUgY2hhcmFjdGVyXG4gIC8vIHNwZWNpZmljYXRpb25zLiBBIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGNvbnN1bWVzIG9uZSBvciBtb3JlIGlucHV0XG4gIC8vIGNoYXJhY3RlcnMuXG4gIC8vXG4gIC8vIFRoZSBgcmVnZXhgIG1ldGhvZCByZXR1cm5zIGEgcmVnZXggZnJhZ21lbnQgZm9yIHRoZSBzZWdtZW50LiBJZiB0aGVcbiAgLy8gc2VnbWVudCBpcyBhIGR5bmFtaWMgb2Ygc3RhciBzZWdtZW50LCB0aGUgcmVnZXggZnJhZ21lbnQgYWxzbyBpbmNsdWRlc1xuICAvLyBhIGNhcHR1cmUuXG4gIC8vXG4gIC8vIEEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY29udGFpbnM6XG4gIC8vXG4gIC8vICogYHZhbGlkQ2hhcnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgdmFsaWQgY2hhcmFjdGVycywgb3JcbiAgLy8gKiBgaW52YWxpZENoYXJzYDogYSBTdHJpbmcgd2l0aCBhIGxpc3Qgb2YgYWxsIGludmFsaWQgY2hhcmFjdGVyc1xuICAvLyAqIGByZXBlYXRgOiB0cnVlIGlmIHRoZSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjYW4gcmVwZWF0XG5cbiAgZnVuY3Rpb24gU3RhdGljU2VnbWVudChzdHJpbmcpIHtcbiAgICB0aGlzLnN0cmluZyA9IHN0cmluZztcbiAgfVxuICBTdGF0aWNTZWdtZW50LnByb3RvdHlwZSA9IHtcbiAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoY2FsbGJhY2spIHtcbiAgICAgIHZhciBzdHJpbmcgPSB0aGlzLnN0cmluZyxcbiAgICAgICAgICBjaDtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdHJpbmcubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNoID0gc3RyaW5nLmNoYXJBdChpKTtcbiAgICAgICAgY2FsbGJhY2soeyB2YWxpZENoYXJzOiBjaCB9KTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nLnJlcGxhY2UoZXNjYXBlUmVnZXgsICdcXFxcJDEnKTtcbiAgICB9LFxuXG4gICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKCkge1xuICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBEeW5hbWljU2VnbWVudChuYW1lKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgfVxuICBEeW5hbWljU2VnbWVudC5wcm90b3R5cGUgPSB7XG4gICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjayh7IGludmFsaWRDaGFyczogXCIvXCIsIHJlcGVhdDogdHJ1ZSB9KTtcbiAgICB9LFxuXG4gICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuICAgICAgcmV0dXJuIFwiKFteL10rKVwiO1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUocGFyYW1zKSB7XG4gICAgICB2YXIgdmFsID0gcGFyYW1zW3RoaXMubmFtZV07XG4gICAgICByZXR1cm4gdmFsID09IG51bGwgPyBcIjpcIiArIHRoaXMubmFtZSA6IHZhbDtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gU3RhclNlZ21lbnQobmFtZSkge1xuICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gIH1cbiAgU3RhclNlZ21lbnQucHJvdG90eXBlID0ge1xuICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcihjYWxsYmFjaykge1xuICAgICAgY2FsbGJhY2soeyBpbnZhbGlkQ2hhcnM6IFwiXCIsIHJlcGVhdDogdHJ1ZSB9KTtcbiAgICB9LFxuXG4gICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuICAgICAgcmV0dXJuIFwiKC4rKVwiO1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUocGFyYW1zKSB7XG4gICAgICB2YXIgdmFsID0gcGFyYW1zW3RoaXMubmFtZV07XG4gICAgICByZXR1cm4gdmFsID09IG51bGwgPyBcIjpcIiArIHRoaXMubmFtZSA6IHZhbDtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gRXBzaWxvblNlZ21lbnQoKSB7fVxuICBFcHNpbG9uU2VnbWVudC5wcm90b3R5cGUgPSB7XG4gICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKCkge30sXG4gICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuICAgICAgcmV0dXJuIFwiXCI7XG4gICAgfSxcbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gcGFyc2Uocm91dGUsIG5hbWVzLCBzcGVjaWZpY2l0eSkge1xuICAgIC8vIG5vcm1hbGl6ZSByb3V0ZSBhcyBub3Qgc3RhcnRpbmcgd2l0aCBhIFwiL1wiLiBSZWNvZ25pdGlvbiB3aWxsXG4gICAgLy8gYWxzbyBub3JtYWxpemUuXG4gICAgaWYgKHJvdXRlLmNoYXJBdCgwKSA9PT0gXCIvXCIpIHtcbiAgICAgIHJvdXRlID0gcm91dGUuc3Vic3RyKDEpO1xuICAgIH1cblxuICAgIHZhciBzZWdtZW50cyA9IHJvdXRlLnNwbGl0KFwiL1wiKSxcbiAgICAgICAgcmVzdWx0cyA9IFtdO1xuXG4gICAgLy8gQSByb3V0ZXMgaGFzIHNwZWNpZmljaXR5IGRldGVybWluZWQgYnkgdGhlIG9yZGVyIHRoYXQgaXRzIGRpZmZlcmVudCBzZWdtZW50c1xuICAgIC8vIGFwcGVhciBpbi4gVGhpcyBzeXN0ZW0gbWlycm9ycyBob3cgdGhlIG1hZ25pdHVkZSBvZiBudW1iZXJzIHdyaXR0ZW4gYXMgc3RyaW5nc1xuICAgIC8vIHdvcmtzLlxuICAgIC8vIENvbnNpZGVyIGEgbnVtYmVyIHdyaXR0ZW4gYXM6IFwiYWJjXCIuIEFuIGV4YW1wbGUgd291bGQgYmUgXCIyMDBcIi4gQW55IG90aGVyIG51bWJlciB3cml0dGVuXG4gICAgLy8gXCJ4eXpcIiB3aWxsIGJlIHNtYWxsZXIgdGhhbiBcImFiY1wiIHNvIGxvbmcgYXMgYGEgPiB6YC4gRm9yIGluc3RhbmNlLCBcIjE5OVwiIGlzIHNtYWxsZXJcbiAgICAvLyB0aGVuIFwiMjAwXCIsIGV2ZW4gdGhvdWdoIFwieVwiIGFuZCBcInpcIiAod2hpY2ggYXJlIGJvdGggOSkgYXJlIGxhcmdlciB0aGFuIFwiMFwiICh0aGUgdmFsdWVcbiAgICAvLyBvZiAoYGJgIGFuZCBgY2ApLiBUaGlzIGlzIGJlY2F1c2UgdGhlIGxlYWRpbmcgc3ltYm9sLCBcIjJcIiwgaXMgbGFyZ2VyIHRoYW4gdGhlIG90aGVyXG4gICAgLy8gbGVhZGluZyBzeW1ib2wsIFwiMVwiLlxuICAgIC8vIFRoZSBydWxlIGlzIHRoYXQgc3ltYm9scyB0byB0aGUgbGVmdCBjYXJyeSBtb3JlIHdlaWdodCB0aGFuIHN5bWJvbHMgdG8gdGhlIHJpZ2h0XG4gICAgLy8gd2hlbiBhIG51bWJlciBpcyB3cml0dGVuIG91dCBhcyBhIHN0cmluZy4gSW4gdGhlIGFib3ZlIHN0cmluZ3MsIHRoZSBsZWFkaW5nIGRpZ2l0XG4gICAgLy8gcmVwcmVzZW50cyBob3cgbWFueSAxMDAncyBhcmUgaW4gdGhlIG51bWJlciwgYW5kIGl0IGNhcnJpZXMgbW9yZSB3ZWlnaHQgdGhhbiB0aGUgbWlkZGxlXG4gICAgLy8gbnVtYmVyIHdoaWNoIHJlcHJlc2VudHMgaG93IG1hbnkgMTAncyBhcmUgaW4gdGhlIG51bWJlci5cbiAgICAvLyBUaGlzIHN5c3RlbSBvZiBudW1iZXIgbWFnbml0dWRlIHdvcmtzIHdlbGwgZm9yIHJvdXRlIHNwZWNpZmljaXR5LCB0b28uIEEgcm91dGUgd3JpdHRlbiBhc1xuICAgIC8vIGBhL2IvY2Agd2lsbCBiZSBtb3JlIHNwZWNpZmljIHRoYW4gYHgveS96YCBhcyBsb25nIGFzIGBhYCBpcyBtb3JlIHNwZWNpZmljIHRoYW5cbiAgICAvLyBgeGAsIGlycmVzcGVjdGl2ZSBvZiB0aGUgb3RoZXIgcGFydHMuXG4gICAgLy8gQmVjYXVzZSBvZiB0aGlzIHNpbWlsYXJpdHksIHdlIGFzc2lnbiBlYWNoIHR5cGUgb2Ygc2VnbWVudCBhIG51bWJlciB2YWx1ZSB3cml0dGVuIGFzIGFcbiAgICAvLyBzdHJpbmcuIFdlIGNhbiBmaW5kIHRoZSBzcGVjaWZpY2l0eSBvZiBjb21wb3VuZCByb3V0ZXMgYnkgY29uY2F0ZW5hdGluZyB0aGVzZSBzdHJpbmdzXG4gICAgLy8gdG9nZXRoZXIsIGZyb20gbGVmdCB0byByaWdodC4gQWZ0ZXIgd2UgaGF2ZSBsb29wZWQgdGhyb3VnaCBhbGwgb2YgdGhlIHNlZ21lbnRzLFxuICAgIC8vIHdlIGNvbnZlcnQgdGhlIHN0cmluZyB0byBhIG51bWJlci5cbiAgICBzcGVjaWZpY2l0eS52YWwgPSAnJztcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldLFxuICAgICAgICAgIG1hdGNoO1xuXG4gICAgICBpZiAobWF0Y2ggPSBzZWdtZW50Lm1hdGNoKC9eOihbXlxcL10rKSQvKSkge1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IER5bmFtaWNTZWdtZW50KG1hdGNoWzFdKSk7XG4gICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pO1xuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzMnO1xuICAgICAgfSBlbHNlIGlmIChtYXRjaCA9IHNlZ21lbnQubWF0Y2goL15cXCooW15cXC9dKykkLykpIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTdGFyU2VnbWVudChtYXRjaFsxXSkpO1xuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzInO1xuICAgICAgICBuYW1lcy5wdXNoKG1hdGNoWzFdKTtcbiAgICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gXCJcIikge1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IEVwc2lsb25TZWdtZW50KCkpO1xuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzEnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBTdGF0aWNTZWdtZW50KHNlZ21lbnQpKTtcbiAgICAgICAgc3BlY2lmaWNpdHkudmFsICs9ICc0JztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBzcGVjaWZpY2l0eS52YWwgPSArc3BlY2lmaWNpdHkudmFsO1xuXG4gICAgcmV0dXJuIHJlc3VsdHM7XG4gIH1cblxuICAvLyBBIFN0YXRlIGhhcyBhIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFuZCAoYGNoYXJTcGVjYCkgYW5kIGEgbGlzdCBvZiBwb3NzaWJsZVxuICAvLyBzdWJzZXF1ZW50IHN0YXRlcyAoYG5leHRTdGF0ZXNgKS5cbiAgLy9cbiAgLy8gSWYgYSBTdGF0ZSBpcyBhbiBhY2NlcHRpbmcgc3RhdGUsIGl0IHdpbGwgYWxzbyBoYXZlIHNldmVyYWwgYWRkaXRpb25hbFxuICAvLyBwcm9wZXJ0aWVzOlxuICAvL1xuICAvLyAqIGByZWdleGA6IEEgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCB0byBleHRyYWN0IHBhcmFtZXRlcnMgZnJvbSBwYXRoc1xuICAvLyAgIHRoYXQgcmVhY2hlZCB0aGlzIGFjY2VwdGluZyBzdGF0ZS5cbiAgLy8gKiBgaGFuZGxlcnNgOiBJbmZvcm1hdGlvbiBvbiBob3cgdG8gY29udmVydCB0aGUgbGlzdCBvZiBjYXB0dXJlcyBpbnRvIGNhbGxzXG4gIC8vICAgdG8gcmVnaXN0ZXJlZCBoYW5kbGVycyB3aXRoIHRoZSBzcGVjaWZpZWQgcGFyYW1ldGVyc1xuICAvLyAqIGB0eXBlc2A6IEhvdyBtYW55IHN0YXRpYywgZHluYW1pYyBvciBzdGFyIHNlZ21lbnRzIGluIHRoaXMgcm91dGUuIFVzZWQgdG9cbiAgLy8gICBkZWNpZGUgd2hpY2ggcm91dGUgdG8gdXNlIGlmIG11bHRpcGxlIHJlZ2lzdGVyZWQgcm91dGVzIG1hdGNoIGEgcGF0aC5cbiAgLy9cbiAgLy8gQ3VycmVudGx5LCBTdGF0ZSBpcyBpbXBsZW1lbnRlZCBuYWl2ZWx5IGJ5IGxvb3Bpbmcgb3ZlciBgbmV4dFN0YXRlc2AgYW5kXG4gIC8vIGNvbXBhcmluZyBhIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFnYWluc3QgYSBjaGFyYWN0ZXIuIEEgbW9yZSBlZmZpY2llbnRcbiAgLy8gaW1wbGVtZW50YXRpb24gd291bGQgdXNlIGEgaGFzaCBvZiBrZXlzIHBvaW50aW5nIGF0IG9uZSBvciBtb3JlIG5leHQgc3RhdGVzLlxuXG4gIGZ1bmN0aW9uIFN0YXRlKGNoYXJTcGVjKSB7XG4gICAgdGhpcy5jaGFyU3BlYyA9IGNoYXJTcGVjO1xuICAgIHRoaXMubmV4dFN0YXRlcyA9IFtdO1xuICB9XG5cbiAgU3RhdGUucHJvdG90eXBlID0ge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KGNoYXJTcGVjKSB7XG4gICAgICB2YXIgbmV4dFN0YXRlcyA9IHRoaXMubmV4dFN0YXRlcztcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBuZXh0U3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgY2hpbGQgPSBuZXh0U3RhdGVzW2ldO1xuXG4gICAgICAgIHZhciBpc0VxdWFsID0gY2hpbGQuY2hhclNwZWMudmFsaWRDaGFycyA9PT0gY2hhclNwZWMudmFsaWRDaGFycztcbiAgICAgICAgaXNFcXVhbCA9IGlzRXF1YWwgJiYgY2hpbGQuY2hhclNwZWMuaW52YWxpZENoYXJzID09PSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnM7XG5cbiAgICAgICAgaWYgKGlzRXF1YWwpIHtcbiAgICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LFxuXG4gICAgcHV0OiBmdW5jdGlvbiBwdXQoY2hhclNwZWMpIHtcbiAgICAgIHZhciBzdGF0ZTtcblxuICAgICAgLy8gSWYgdGhlIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFscmVhZHkgZXhpc3RzIGluIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnRcbiAgICAgIC8vIHN0YXRlLCBqdXN0IHJldHVybiB0aGF0IHN0YXRlLlxuICAgICAgaWYgKHN0YXRlID0gdGhpcy5nZXQoY2hhclNwZWMpKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZTtcbiAgICAgIH1cblxuICAgICAgLy8gTWFrZSBhIG5ldyBzdGF0ZSBmb3IgdGhlIGNoYXJhY3RlciBzcGVjXG4gICAgICBzdGF0ZSA9IG5ldyBTdGF0ZShjaGFyU3BlYyk7XG5cbiAgICAgIC8vIEluc2VydCB0aGUgbmV3IHN0YXRlIGFzIGEgY2hpbGQgb2YgdGhlIGN1cnJlbnQgc3RhdGVcbiAgICAgIHRoaXMubmV4dFN0YXRlcy5wdXNoKHN0YXRlKTtcblxuICAgICAgLy8gSWYgdGhpcyBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiByZXBlYXRzLCBpbnNlcnQgdGhlIG5ldyBzdGF0ZSBhcyBhIGNoaWxkXG4gICAgICAvLyBvZiBpdHNlbGYuIE5vdGUgdGhhdCB0aGlzIHdpbGwgbm90IHRyaWdnZXIgYW4gaW5maW5pdGUgbG9vcCBiZWNhdXNlIGVhY2hcbiAgICAgIC8vIHRyYW5zaXRpb24gZHVyaW5nIHJlY29nbml0aW9uIGNvbnN1bWVzIGEgY2hhcmFjdGVyLlxuICAgICAgaWYgKGNoYXJTcGVjLnJlcGVhdCkge1xuICAgICAgICBzdGF0ZS5uZXh0U3RhdGVzLnB1c2goc3RhdGUpO1xuICAgICAgfVxuXG4gICAgICAvLyBSZXR1cm4gdGhlIG5ldyBzdGF0ZVxuICAgICAgcmV0dXJuIHN0YXRlO1xuICAgIH0sXG5cbiAgICAvLyBGaW5kIGEgbGlzdCBvZiBjaGlsZCBzdGF0ZXMgbWF0Y2hpbmcgdGhlIG5leHQgY2hhcmFjdGVyXG4gICAgbWF0Y2g6IGZ1bmN0aW9uIG1hdGNoKGNoKSB7XG4gICAgICAvLyBERUJVRyBcIlByb2Nlc3NpbmcgYFwiICsgY2ggKyBcImA6XCJcbiAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzLFxuICAgICAgICAgIGNoaWxkLFxuICAgICAgICAgIGNoYXJTcGVjLFxuICAgICAgICAgIGNoYXJzO1xuXG4gICAgICAvLyBERUJVRyBcIiAgXCIgKyBkZWJ1Z1N0YXRlKHRoaXMpXG4gICAgICB2YXIgcmV0dXJuZWQgPSBbXTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBuZXh0U3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBjaGlsZCA9IG5leHRTdGF0ZXNbaV07XG5cbiAgICAgICAgY2hhclNwZWMgPSBjaGlsZC5jaGFyU3BlYztcblxuICAgICAgICBpZiAodHlwZW9mIChjaGFycyA9IGNoYXJTcGVjLnZhbGlkQ2hhcnMpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmIChjaGFycy5pbmRleE9mKGNoKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybmVkLnB1c2goY2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgKGNoYXJzID0gY2hhclNwZWMuaW52YWxpZENoYXJzKSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBpZiAoY2hhcnMuaW5kZXhPZihjaCkgPT09IC0xKSB7XG4gICAgICAgICAgICByZXR1cm5lZC5wdXNoKGNoaWxkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJldHVybmVkO1xuICAgIH1cblxuICAgIC8qKiBJRiBERUJVR1xuICAgICwgZGVidWc6IGZ1bmN0aW9uKCkge1xuICAgICAgdmFyIGNoYXJTcGVjID0gdGhpcy5jaGFyU3BlYyxcbiAgICAgICAgICBkZWJ1ZyA9IFwiW1wiLFxuICAgICAgICAgIGNoYXJzID0gY2hhclNwZWMudmFsaWRDaGFycyB8fCBjaGFyU3BlYy5pbnZhbGlkQ2hhcnM7XG4gICAgICAgaWYgKGNoYXJTcGVjLmludmFsaWRDaGFycykgeyBkZWJ1ZyArPSBcIl5cIjsgfVxuICAgICAgZGVidWcgKz0gY2hhcnM7XG4gICAgICBkZWJ1ZyArPSBcIl1cIjtcbiAgICAgICBpZiAoY2hhclNwZWMucmVwZWF0KSB7IGRlYnVnICs9IFwiK1wiOyB9XG4gICAgICAgcmV0dXJuIGRlYnVnO1xuICAgIH1cbiAgICBFTkQgSUYgKiovXG4gIH07XG5cbiAgLyoqIElGIERFQlVHXG4gIGZ1bmN0aW9uIGRlYnVnKGxvZykge1xuICAgIGNvbnNvbGUubG9nKGxvZyk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWJ1Z1N0YXRlKHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLm5leHRTdGF0ZXMubWFwKGZ1bmN0aW9uKG4pIHtcbiAgICAgIGlmIChuLm5leHRTdGF0ZXMubGVuZ3RoID09PSAwKSB7IHJldHVybiBcIiggXCIgKyBuLmRlYnVnKCkgKyBcIiBbYWNjZXB0aW5nXSApXCI7IH1cbiAgICAgIHJldHVybiBcIiggXCIgKyBuLmRlYnVnKCkgKyBcIiA8dGhlbj4gXCIgKyBuLm5leHRTdGF0ZXMubWFwKGZ1bmN0aW9uKHMpIHsgcmV0dXJuIHMuZGVidWcoKSB9KS5qb2luKFwiIG9yIFwiKSArIFwiIClcIjtcbiAgICB9KS5qb2luKFwiLCBcIilcbiAgfVxuICBFTkQgSUYgKiovXG5cbiAgLy8gU29ydCB0aGUgcm91dGVzIGJ5IHNwZWNpZmljaXR5XG4gIGZ1bmN0aW9uIHNvcnRTb2x1dGlvbnMoc3RhdGVzKSB7XG4gICAgcmV0dXJuIHN0YXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gYi5zcGVjaWZpY2l0eS52YWwgLSBhLnNwZWNpZmljaXR5LnZhbDtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlY29nbml6ZUNoYXIoc3RhdGVzLCBjaCkge1xuICAgIHZhciBuZXh0U3RhdGVzID0gW107XG5cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBzdGF0ZSA9IHN0YXRlc1tpXTtcblxuICAgICAgbmV4dFN0YXRlcyA9IG5leHRTdGF0ZXMuY29uY2F0KHN0YXRlLm1hdGNoKGNoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5leHRTdGF0ZXM7XG4gIH1cblxuICB2YXIgb0NyZWF0ZSA9IE9iamVjdC5jcmVhdGUgfHwgZnVuY3Rpb24gKHByb3RvKSB7XG4gICAgZnVuY3Rpb24gRigpIHt9XG4gICAgRi5wcm90b3R5cGUgPSBwcm90bztcbiAgICByZXR1cm4gbmV3IEYoKTtcbiAgfTtcblxuICBmdW5jdGlvbiBSZWNvZ25pemVSZXN1bHRzKHF1ZXJ5UGFyYW1zKSB7XG4gICAgdGhpcy5xdWVyeVBhcmFtcyA9IHF1ZXJ5UGFyYW1zIHx8IHt9O1xuICB9XG4gIFJlY29nbml6ZVJlc3VsdHMucHJvdG90eXBlID0gb0NyZWF0ZSh7XG4gICAgc3BsaWNlOiBBcnJheS5wcm90b3R5cGUuc3BsaWNlLFxuICAgIHNsaWNlOiBBcnJheS5wcm90b3R5cGUuc2xpY2UsXG4gICAgcHVzaDogQXJyYXkucHJvdG90eXBlLnB1c2gsXG4gICAgbGVuZ3RoOiAwLFxuICAgIHF1ZXJ5UGFyYW1zOiBudWxsXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBxdWVyeVBhcmFtcykge1xuICAgIHZhciBoYW5kbGVycyA9IHN0YXRlLmhhbmRsZXJzLFxuICAgICAgICByZWdleCA9IHN0YXRlLnJlZ2V4O1xuICAgIHZhciBjYXB0dXJlcyA9IHBhdGgubWF0Y2gocmVnZXgpLFxuICAgICAgICBjdXJyZW50Q2FwdHVyZSA9IDE7XG4gICAgdmFyIHJlc3VsdCA9IG5ldyBSZWNvZ25pemVSZXN1bHRzKHF1ZXJ5UGFyYW1zKTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2ldLFxuICAgICAgICAgIG5hbWVzID0gaGFuZGxlci5uYW1lcyxcbiAgICAgICAgICBwYXJhbXMgPSB7fTtcblxuICAgICAgZm9yICh2YXIgaiA9IDAsIG0gPSBuYW1lcy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgICAgcGFyYW1zW25hbWVzW2pdXSA9IGNhcHR1cmVzW2N1cnJlbnRDYXB0dXJlKytdO1xuICAgICAgfVxuXG4gICAgICByZXN1bHQucHVzaCh7IGhhbmRsZXI6IGhhbmRsZXIuaGFuZGxlciwgcGFyYW1zOiBwYXJhbXMsIGlzRHluYW1pYzogISFuYW1lcy5sZW5ndGggfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KSB7XG4gICAgc2VnbWVudC5lYWNoQ2hhcihmdW5jdGlvbiAoY2gpIHtcbiAgICAgIHZhciBzdGF0ZTtcblxuICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1dChjaCk7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY3VycmVudFN0YXRlO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFydCkge1xuICAgIC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2h0bWw0MDEvaW50ZXJhY3QvZm9ybXMuaHRtbCNoLTE3LjEzLjQuMVxuICAgIHBhcnQgPSBwYXJ0LnJlcGxhY2UoL1xcKy9nbSwgJyUyMCcpO1xuICAgIHJldHVybiB0cnlEZWNvZGUocGFydCwgdHJ1ZSk7XG4gIH1cblxuICAvLyBUaGUgbWFpbiBpbnRlcmZhY2VcblxuICB2YXIgUm91dGVSZWNvZ25pemVyID0gZnVuY3Rpb24gUm91dGVSZWNvZ25pemVyKCkge1xuICAgIHRoaXMucm9vdFN0YXRlID0gbmV3IFN0YXRlKCk7XG4gICAgdGhpcy5uYW1lcyA9IHt9O1xuICB9O1xuXG4gIFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUgPSB7XG4gICAgYWRkOiBmdW5jdGlvbiBhZGQocm91dGVzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgY3VycmVudFN0YXRlID0gdGhpcy5yb290U3RhdGUsXG4gICAgICAgICAgcmVnZXggPSBcIl5cIixcbiAgICAgICAgICBzcGVjaWZpY2l0eSA9IHt9LFxuICAgICAgICAgIGhhbmRsZXJzID0gW10sXG4gICAgICAgICAgYWxsU2VnbWVudHMgPSBbXSxcbiAgICAgICAgICBuYW1lO1xuXG4gICAgICB2YXIgaXNFbXB0eSA9IHRydWU7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcm91dGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgcm91dGUgPSByb3V0ZXNbaV0sXG4gICAgICAgICAgICBuYW1lcyA9IFtdO1xuXG4gICAgICAgIHZhciBzZWdtZW50cyA9IHBhcnNlKHJvdXRlLnBhdGgsIG5hbWVzLCBzcGVjaWZpY2l0eSk7XG5cbiAgICAgICAgYWxsU2VnbWVudHMgPSBhbGxTZWdtZW50cy5jb25jYXQoc2VnbWVudHMpO1xuXG4gICAgICAgIGZvciAodmFyIGogPSAwLCBtID0gc2VnbWVudHMubGVuZ3RoOyBqIDwgbTsgaisrKSB7XG4gICAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tqXTtcblxuICAgICAgICAgIGlmIChzZWdtZW50IGluc3RhbmNlb2YgRXBzaWxvblNlZ21lbnQpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlzRW1wdHkgPSBmYWxzZTtcblxuICAgICAgICAgIC8vIEFkZCBhIFwiL1wiIGZvciB0aGUgbmV3IHNlZ21lbnRcbiAgICAgICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3RhdGUucHV0KHsgdmFsaWRDaGFyczogXCIvXCIgfSk7XG4gICAgICAgICAgcmVnZXggKz0gXCIvXCI7XG5cbiAgICAgICAgICAvLyBBZGQgYSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc2VnbWVudCB0byB0aGUgTkZBIGFuZCByZWdleFxuICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGFkZFNlZ21lbnQoY3VycmVudFN0YXRlLCBzZWdtZW50KTtcbiAgICAgICAgICByZWdleCArPSBzZWdtZW50LnJlZ2V4KCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgaGFuZGxlciA9IHsgaGFuZGxlcjogcm91dGUuaGFuZGxlciwgbmFtZXM6IG5hbWVzIH07XG4gICAgICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0VtcHR5KSB7XG4gICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoeyB2YWxpZENoYXJzOiBcIi9cIiB9KTtcbiAgICAgICAgcmVnZXggKz0gXCIvXCI7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnRTdGF0ZS5oYW5kbGVycyA9IGhhbmRsZXJzO1xuICAgICAgY3VycmVudFN0YXRlLnJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleCArIFwiJFwiKTtcbiAgICAgIGN1cnJlbnRTdGF0ZS5zcGVjaWZpY2l0eSA9IHNwZWNpZmljaXR5O1xuXG4gICAgICBpZiAobmFtZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5hcykge1xuICAgICAgICB0aGlzLm5hbWVzW25hbWVdID0ge1xuICAgICAgICAgIHNlZ21lbnRzOiBhbGxTZWdtZW50cyxcbiAgICAgICAgICBoYW5kbGVyczogaGFuZGxlcnNcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LFxuXG4gICAgaGFuZGxlcnNGb3I6IGZ1bmN0aW9uIGhhbmRsZXJzRm9yKG5hbWUpIHtcbiAgICAgIHZhciByb3V0ZSA9IHRoaXMubmFtZXNbbmFtZV0sXG4gICAgICAgICAgcmVzdWx0ID0gW107XG4gICAgICBpZiAoIXJvdXRlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIHJvdXRlIG5hbWVkIFwiICsgbmFtZSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcm91dGUuaGFuZGxlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKHJvdXRlLmhhbmRsZXJzW2ldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9LFxuXG4gICAgaGFzUm91dGU6IGZ1bmN0aW9uIGhhc1JvdXRlKG5hbWUpIHtcbiAgICAgIHJldHVybiAhIXRoaXMubmFtZXNbbmFtZV07XG4gICAgfSxcblxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShuYW1lLCBwYXJhbXMpIHtcbiAgICAgIHZhciByb3V0ZSA9IHRoaXMubmFtZXNbbmFtZV0sXG4gICAgICAgICAgb3V0cHV0ID0gXCJcIjtcbiAgICAgIGlmICghcm91dGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gcm91dGUgbmFtZWQgXCIgKyBuYW1lKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHNlZ21lbnRzID0gcm91dGUuc2VnbWVudHM7XG5cbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gc2VnbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV07XG5cbiAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgb3V0cHV0ICs9IFwiL1wiO1xuICAgICAgICBvdXRwdXQgKz0gc2VnbWVudC5nZW5lcmF0ZShwYXJhbXMpO1xuICAgICAgfVxuXG4gICAgICBpZiAob3V0cHV0LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICAgIG91dHB1dCA9ICcvJyArIG91dHB1dDtcbiAgICAgIH1cblxuICAgICAgaWYgKHBhcmFtcyAmJiBwYXJhbXMucXVlcnlQYXJhbXMpIHtcbiAgICAgICAgb3V0cHV0ICs9IHRoaXMuZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXJhbXMucXVlcnlQYXJhbXMpO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZVF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtcykge1xuICAgICAgdmFyIHBhaXJzID0gW107XG4gICAgICB2YXIga2V5cyA9IFtdO1xuICAgICAgZm9yICh2YXIga2V5IGluIHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAga2V5cy5zb3J0KCk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0ga2V5cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICB2YXIgdmFsdWUgPSBwYXJhbXNba2V5XTtcbiAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGFpciA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpO1xuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBmb3IgKHZhciBqID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaiA8IGw7IGorKykge1xuICAgICAgICAgICAgdmFyIGFycmF5UGFpciA9IGtleSArICdbXScgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWVbal0pO1xuICAgICAgICAgICAgcGFpcnMucHVzaChhcnJheVBhaXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBwYWlyICs9IFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKTtcbiAgICAgICAgICBwYWlycy5wdXNoKHBhaXIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChwYWlycy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gXCI/XCIgKyBwYWlycy5qb2luKFwiJlwiKTtcbiAgICB9LFxuXG4gICAgcGFyc2VRdWVyeVN0cmluZzogZnVuY3Rpb24gcGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZykge1xuICAgICAgdmFyIHBhaXJzID0gcXVlcnlTdHJpbmcuc3BsaXQoXCImXCIpLFxuICAgICAgICAgIHF1ZXJ5UGFyYW1zID0ge307XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhaXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBwYWlyID0gcGFpcnNbaV0uc3BsaXQoJz0nKSxcbiAgICAgICAgICAgIGtleSA9IGRlY29kZVF1ZXJ5UGFyYW1QYXJ0KHBhaXJbMF0pLFxuICAgICAgICAgICAga2V5TGVuZ3RoID0ga2V5Lmxlbmd0aCxcbiAgICAgICAgICAgIGlzQXJyYXkgPSBmYWxzZSxcbiAgICAgICAgICAgIHZhbHVlO1xuICAgICAgICBpZiAocGFpci5sZW5ndGggPT09IDEpIHtcbiAgICAgICAgICB2YWx1ZSA9ICd0cnVlJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvL0hhbmRsZSBhcnJheXNcbiAgICAgICAgICBpZiAoa2V5TGVuZ3RoID4gMiAmJiBrZXkuc2xpY2Uoa2V5TGVuZ3RoIC0gMikgPT09ICdbXScpIHtcbiAgICAgICAgICAgIGlzQXJyYXkgPSB0cnVlO1xuICAgICAgICAgICAga2V5ID0ga2V5LnNsaWNlKDAsIGtleUxlbmd0aCAtIDIpO1xuICAgICAgICAgICAgaWYgKCFxdWVyeVBhcmFtc1trZXldKSB7XG4gICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0gPSBbXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgPSBwYWlyWzFdID8gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFpclsxXSkgOiAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheSkge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0ucHVzaCh2YWx1ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IHZhbHVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gcXVlcnlQYXJhbXM7XG4gICAgfSxcblxuICAgIHJlY29nbml6ZTogZnVuY3Rpb24gcmVjb2duaXplKHBhdGgsIHNpbGVudCkge1xuICAgICAgbm9XYXJuaW5nID0gc2lsZW50O1xuICAgICAgdmFyIHN0YXRlcyA9IFt0aGlzLnJvb3RTdGF0ZV0sXG4gICAgICAgICAgcGF0aExlbixcbiAgICAgICAgICBpLFxuICAgICAgICAgIGwsXG4gICAgICAgICAgcXVlcnlTdGFydCxcbiAgICAgICAgICBxdWVyeVBhcmFtcyA9IHt9LFxuICAgICAgICAgIGlzU2xhc2hEcm9wcGVkID0gZmFsc2U7XG5cbiAgICAgIHF1ZXJ5U3RhcnQgPSBwYXRoLmluZGV4T2YoJz8nKTtcbiAgICAgIGlmIChxdWVyeVN0YXJ0ICE9PSAtMSkge1xuICAgICAgICB2YXIgcXVlcnlTdHJpbmcgPSBwYXRoLnN1YnN0cihxdWVyeVN0YXJ0ICsgMSwgcGF0aC5sZW5ndGgpO1xuICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcXVlcnlTdGFydCk7XG4gICAgICAgIGlmIChxdWVyeVN0cmluZykge1xuICAgICAgICAgIHF1ZXJ5UGFyYW1zID0gdGhpcy5wYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwYXRoID0gdHJ5RGVjb2RlKHBhdGgpO1xuICAgICAgaWYgKCFwYXRoKSByZXR1cm47XG5cbiAgICAgIC8vIERFQlVHIEdST1VQIHBhdGhcblxuICAgICAgaWYgKHBhdGguY2hhckF0KDApICE9PSBcIi9cIikge1xuICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoO1xuICAgICAgfVxuXG4gICAgICBwYXRoTGVuID0gcGF0aC5sZW5ndGg7XG4gICAgICBpZiAocGF0aExlbiA+IDEgJiYgcGF0aC5jaGFyQXQocGF0aExlbiAtIDEpID09PSBcIi9cIikge1xuICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcGF0aExlbiAtIDEpO1xuICAgICAgICBpc1NsYXNoRHJvcHBlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGZvciAoaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBzdGF0ZXMgPSByZWNvZ25pemVDaGFyKHN0YXRlcywgcGF0aC5jaGFyQXQoaSkpO1xuICAgICAgICBpZiAoIXN0YXRlcy5sZW5ndGgpIHtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBFTkQgREVCVUcgR1JPVVBcblxuICAgICAgdmFyIHNvbHV0aW9ucyA9IFtdO1xuICAgICAgZm9yIChpID0gMCwgbCA9IHN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgaWYgKHN0YXRlc1tpXS5oYW5kbGVycykge1xuICAgICAgICAgIHNvbHV0aW9ucy5wdXNoKHN0YXRlc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgc3RhdGVzID0gc29ydFNvbHV0aW9ucyhzb2x1dGlvbnMpO1xuXG4gICAgICB2YXIgc3RhdGUgPSBzb2x1dGlvbnNbMF07XG5cbiAgICAgIGlmIChzdGF0ZSAmJiBzdGF0ZS5oYW5kbGVycykge1xuICAgICAgICAvLyBpZiBhIHRyYWlsaW5nIHNsYXNoIHdhcyBkcm9wcGVkIGFuZCBhIHN0YXIgc2VnbWVudCBpcyB0aGUgbGFzdCBzZWdtZW50XG4gICAgICAgIC8vIHNwZWNpZmllZCwgcHV0IHRoZSB0cmFpbGluZyBzbGFzaCBiYWNrXG4gICAgICAgIGlmIChpc1NsYXNoRHJvcHBlZCAmJiBzdGF0ZS5yZWdleC5zb3VyY2Uuc2xpY2UoLTUpID09PSBcIiguKykkXCIpIHtcbiAgICAgICAgICBwYXRoID0gcGF0aCArIFwiL1wiO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBmaW5kSGFuZGxlcihzdGF0ZSwgcGF0aCwgcXVlcnlQYXJhbXMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlLm1hcCA9IG1hcDtcblxuICB2YXIgZ2VuUXVlcnkgPSBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlLmdlbmVyYXRlUXVlcnlTdHJpbmc7XG5cbiAgLy8gZXhwb3J0IGRlZmF1bHQgZm9yIGhvbGRpbmcgdGhlIFZ1ZSByZWZlcmVuY2VcbiAgdmFyIGV4cG9ydHMkMSA9IHt9O1xuICAvKipcbiAgICogV2FybiBzdHVmZi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG1zZ1xuICAgKi9cblxuICBmdW5jdGlvbiB3YXJuJDEobXNnKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJvdXRlcl0gJyArIG1zZyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlc29sdmUgYSByZWxhdGl2ZSBwYXRoLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gYmFzZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gcmVsYXRpdmVcbiAgICogQHBhcmFtIHtCb29sZWFufSBhcHBlbmRcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBmdW5jdGlvbiByZXNvbHZlUGF0aChiYXNlLCByZWxhdGl2ZSwgYXBwZW5kKSB7XG4gICAgdmFyIHF1ZXJ5ID0gYmFzZS5tYXRjaCgvKFxcPy4qKSQvKTtcbiAgICBpZiAocXVlcnkpIHtcbiAgICAgIHF1ZXJ5ID0gcXVlcnlbMV07XG4gICAgICBiYXNlID0gYmFzZS5zbGljZSgwLCAtcXVlcnkubGVuZ3RoKTtcbiAgICB9XG4gICAgLy8gYSBxdWVyeSFcbiAgICBpZiAocmVsYXRpdmUuY2hhckF0KDApID09PSAnPycpIHtcbiAgICAgIHJldHVybiBiYXNlICsgcmVsYXRpdmU7XG4gICAgfVxuICAgIHZhciBzdGFjayA9IGJhc2Uuc3BsaXQoJy8nKTtcbiAgICAvLyByZW1vdmUgdHJhaWxpbmcgc2VnbWVudCBpZjpcbiAgICAvLyAtIG5vdCBhcHBlbmRpbmdcbiAgICAvLyAtIGFwcGVuZGluZyB0byB0cmFpbGluZyBzbGFzaCAobGFzdCBzZWdtZW50IGlzIGVtcHR5KVxuICAgIGlmICghYXBwZW5kIHx8ICFzdGFja1tzdGFjay5sZW5ndGggLSAxXSkge1xuICAgICAgc3RhY2sucG9wKCk7XG4gICAgfVxuICAgIC8vIHJlc29sdmUgcmVsYXRpdmUgcGF0aFxuICAgIHZhciBzZWdtZW50cyA9IHJlbGF0aXZlLnJlcGxhY2UoL15cXC8vLCAnJykuc3BsaXQoJy8nKTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2ldO1xuICAgICAgaWYgKHNlZ21lbnQgPT09ICcuJykge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSBpZiAoc2VnbWVudCA9PT0gJy4uJykge1xuICAgICAgICBzdGFjay5wb3AoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YWNrLnB1c2goc2VnbWVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGVuc3VyZSBsZWFkaW5nIHNsYXNoXG4gICAgaWYgKHN0YWNrWzBdICE9PSAnJykge1xuICAgICAgc3RhY2sudW5zaGlmdCgnJyk7XG4gICAgfVxuICAgIHJldHVybiBzdGFjay5qb2luKCcvJyk7XG4gIH1cblxuICAvKipcbiAgICogRm9yZ2l2aW5nIGNoZWNrIGZvciBhIHByb21pc2VcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHBcbiAgICogQHJldHVybiB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZnVuY3Rpb24gaXNQcm9taXNlKHApIHtcbiAgICByZXR1cm4gcCAmJiB0eXBlb2YgcC50aGVuID09PSAnZnVuY3Rpb24nO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHJpdmUgYSByb3V0ZSBjb25maWcgZmllbGQgZnJvbSBhIGNvbXBvbmVudCBpbnN0YW5jZVxuICAgKiBPUiBhIGNvbXBvbmVudCBjb250cnVjdG9yLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFZ1ZX0gY29tcG9uZW50XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgbmFtZSkge1xuICAgIHZhciBvcHRpb25zID0gY29tcG9uZW50ICYmIChjb21wb25lbnQuJG9wdGlvbnMgfHwgY29tcG9uZW50Lm9wdGlvbnMpO1xuICAgIHJldHVybiBvcHRpb25zICYmIG9wdGlvbnMucm91dGUgJiYgb3B0aW9ucy5yb3V0ZVtuYW1lXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNvbHZlIGFuIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5LiBIYXZlIHRvIGRvIGEgZGlydHlcbiAgICogbW9jayBoZXJlIGJlY2F1c2Ugb2YgVnVlIGNvcmUncyBpbnRlcm5hbCBBUEkgZGVwZW5kcyBvblxuICAgKiBhbiBJRCBjaGVjay5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgdmFyIHJlc29sdmVyID0gdW5kZWZpbmVkO1xuXG4gIGZ1bmN0aW9uIHJlc29sdmVBc3luY0NvbXBvbmVudChoYW5kbGVyLCBjYikge1xuICAgIGlmICghcmVzb2x2ZXIpIHtcbiAgICAgIHJlc29sdmVyID0ge1xuICAgICAgICByZXNvbHZlOiBleHBvcnRzJDEuVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCxcbiAgICAgICAgJG9wdGlvbnM6IHtcbiAgICAgICAgICBjb21wb25lbnRzOiB7XG4gICAgICAgICAgICBfOiBoYW5kbGVyLmNvbXBvbmVudFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzb2x2ZXIuJG9wdGlvbnMuY29tcG9uZW50cy5fID0gaGFuZGxlci5jb21wb25lbnQ7XG4gICAgfVxuICAgIHJlc29sdmVyLnJlc29sdmUoJ18nLCBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgICBoYW5kbGVyLmNvbXBvbmVudCA9IENvbXBvbmVudDtcbiAgICAgIGNiKENvbXBvbmVudCk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTWFwIHRoZSBkeW5hbWljIHNlZ21lbnRzIGluIGEgcGF0aCB0byBwYXJhbXMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXNcbiAgICogQHBhcmFtIHtPYmplY3R9IHF1ZXJ5XG4gICAqL1xuXG4gIGZ1bmN0aW9uIG1hcFBhcmFtcyhwYXRoLCBwYXJhbXMsIHF1ZXJ5KSB7XG4gICAgaWYgKHBhcmFtcyA9PT0gdW5kZWZpbmVkKSBwYXJhbXMgPSB7fTtcblxuICAgIHBhdGggPSBwYXRoLnJlcGxhY2UoLzooW15cXC9dKykvZywgZnVuY3Rpb24gKF8sIGtleSkge1xuICAgICAgdmFyIHZhbCA9IHBhcmFtc1trZXldO1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoIXZhbCkge1xuICAgICAgICB3YXJuJDEoJ3BhcmFtIFwiJyArIGtleSArICdcIiBub3QgZm91bmQgd2hlbiBnZW5lcmF0aW5nICcgKyAncGF0aCBmb3IgXCInICsgcGF0aCArICdcIiB3aXRoIHBhcmFtcyAnICsgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsIHx8ICcnO1xuICAgIH0pO1xuICAgIGlmIChxdWVyeSkge1xuICAgICAgcGF0aCArPSBnZW5RdWVyeShxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiBwYXRoO1xuICB9XG5cbiAgdmFyIGhhc2hSRSA9IC8jLiokLztcblxuICB2YXIgSFRNTDVIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIVE1MNUhpc3RvcnkoX3JlZikge1xuICAgICAgdmFyIHJvb3QgPSBfcmVmLnJvb3Q7XG4gICAgICB2YXIgb25DaGFuZ2UgPSBfcmVmLm9uQ2hhbmdlO1xuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIEhUTUw1SGlzdG9yeSk7XG5cbiAgICAgIGlmIChyb290ICYmIHJvb3QgIT09ICcvJykge1xuICAgICAgICAvLyBtYWtlIHN1cmUgdGhlcmUncyB0aGUgc3RhcnRpbmcgc2xhc2hcbiAgICAgICAgaWYgKHJvb3QuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgICByb290ID0gJy8nICsgcm9vdDtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW1vdmUgdHJhaWxpbmcgc2xhc2hcbiAgICAgICAgdGhpcy5yb290ID0gcm9vdC5yZXBsYWNlKC9cXC8kLywgJycpO1xuICAgICAgICB0aGlzLnJvb3RSRSA9IG5ldyBSZWdFeHAoJ15cXFxcJyArIHRoaXMucm9vdCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJvb3QgPSBudWxsO1xuICAgICAgfVxuICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuICAgICAgLy8gY2hlY2sgYmFzZSB0YWdcbiAgICAgIHZhciBiYXNlRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdiYXNlJyk7XG4gICAgICB0aGlzLmJhc2UgPSBiYXNlRWwgJiYgYmFzZUVsLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIH1cblxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgdXJsID0gbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2g7XG4gICAgICAgIGlmIChfdGhpcy5yb290KSB7XG4gICAgICAgICAgdXJsID0gdXJsLnJlcGxhY2UoX3RoaXMucm9vdFJFLCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgX3RoaXMub25DaGFuZ2UodXJsLCBlICYmIGUuc3RhdGUsIGxvY2F0aW9uLmhhc2gpO1xuICAgICAgfTtcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgdGhpcy5saXN0ZW5lcigpO1xuICAgIH07XG5cbiAgICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgfTtcblxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcbiAgICAgIHZhciB1cmwgPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcbiAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHt9LCAnJywgdXJsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHJlY29yZCBzY3JvbGwgcG9zaXRpb24gYnkgcmVwbGFjaW5nIGN1cnJlbnQgc3RhdGVcbiAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe1xuICAgICAgICAgIHBvczoge1xuICAgICAgICAgICAgeDogd2luZG93LnBhZ2VYT2Zmc2V0LFxuICAgICAgICAgICAgeTogd2luZG93LnBhZ2VZT2Zmc2V0XG4gICAgICAgICAgfVxuICAgICAgICB9LCAnJywgbG9jYXRpb24uaHJlZik7XG4gICAgICAgIC8vIHRoZW4gcHVzaCBuZXcgc3RhdGVcbiAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoe30sICcnLCB1cmwpO1xuICAgICAgfVxuICAgICAgdmFyIGhhc2hNYXRjaCA9IHBhdGgubWF0Y2goaGFzaFJFKTtcbiAgICAgIHZhciBoYXNoID0gaGFzaE1hdGNoICYmIGhhc2hNYXRjaFswXTtcbiAgICAgIHBhdGggPSB1cmxcbiAgICAgIC8vIHN0cmlwIGhhc2ggc28gaXQgZG9lc24ndCBtZXNzIHVwIHBhcmFtc1xuICAgICAgLnJlcGxhY2UoaGFzaFJFLCAnJylcbiAgICAgIC8vIHJlbW92ZSByb290IGJlZm9yZSBtYXRjaGluZ1xuICAgICAgLnJlcGxhY2UodGhpcy5yb290UkUsICcnKTtcbiAgICAgIHRoaXMub25DaGFuZ2UocGF0aCwgbnVsbCwgaGFzaCk7XG4gICAgfTtcblxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZm9ybWF0UGF0aCA9IGZ1bmN0aW9uIGZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKSB7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJ1xuICAgICAgLy8gYWJzb2x1dGUgcGF0aFxuICAgICAgPyB0aGlzLnJvb3QgPyB0aGlzLnJvb3QgKyAnLycgKyBwYXRoLnJlcGxhY2UoL15cXC8vLCAnJykgOiBwYXRoIDogcmVzb2x2ZVBhdGgodGhpcy5iYXNlIHx8IGxvY2F0aW9uLnBhdGhuYW1lLCBwYXRoLCBhcHBlbmQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSFRNTDVIaXN0b3J5O1xuICB9KSgpO1xuXG4gIHZhciBIYXNoSGlzdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gSGFzaEhpc3RvcnkoX3JlZikge1xuICAgICAgdmFyIGhhc2hiYW5nID0gX3JlZi5oYXNoYmFuZztcbiAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgSGFzaEhpc3RvcnkpO1xuXG4gICAgICB0aGlzLmhhc2hiYW5nID0gaGFzaGJhbmc7XG4gICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG4gICAgfVxuXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcGF0aCA9IGxvY2F0aW9uLmhhc2g7XG4gICAgICAgIHZhciByYXcgPSBwYXRoLnJlcGxhY2UoL14jIT8vLCAnJyk7XG4gICAgICAgIC8vIGFsd2F5c1xuICAgICAgICBpZiAocmF3LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG4gICAgICAgICAgcmF3ID0gJy8nICsgcmF3O1xuICAgICAgICB9XG4gICAgICAgIHZhciBmb3JtYXR0ZWRQYXRoID0gc2VsZi5mb3JtYXRQYXRoKHJhdyk7XG4gICAgICAgIGlmIChmb3JtYXR0ZWRQYXRoICE9PSBwYXRoKSB7XG4gICAgICAgICAgbG9jYXRpb24ucmVwbGFjZShmb3JtYXR0ZWRQYXRoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gZGV0ZXJtaW5lIHF1ZXJ5XG4gICAgICAgIC8vIG5vdGUgaXQncyBwb3NzaWJsZSB0byBoYXZlIHF1ZXJpZXMgaW4gYm90aCB0aGUgYWN0dWFsIFVSTFxuICAgICAgICAvLyBhbmQgdGhlIGhhc2ggZnJhZ21lbnQgaXRzZWxmLlxuICAgICAgICB2YXIgcXVlcnkgPSBsb2NhdGlvbi5zZWFyY2ggJiYgcGF0aC5pbmRleE9mKCc/JykgPiAtMSA/ICcmJyArIGxvY2F0aW9uLnNlYXJjaC5zbGljZSgxKSA6IGxvY2F0aW9uLnNlYXJjaDtcbiAgICAgICAgc2VsZi5vbkNoYW5nZShwYXRoLnJlcGxhY2UoL14jIT8vLCAnJykgKyBxdWVyeSk7XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIHRoaXMubGlzdGVuZXIoKTtcbiAgICB9O1xuXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICB9O1xuXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28ocGF0aCwgcmVwbGFjZSwgYXBwZW5kKSB7XG4gICAgICBwYXRoID0gdGhpcy5mb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCk7XG4gICAgICBpZiAocmVwbGFjZSkge1xuICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKHBhdGgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbG9jYXRpb24uaGFzaCA9IHBhdGg7XG4gICAgICB9XG4gICAgfTtcblxuICAgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcbiAgICAgIHZhciBpc0Fic29sb3V0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLyc7XG4gICAgICB2YXIgcHJlZml4ID0gJyMnICsgKHRoaXMuaGFzaGJhbmcgPyAnIScgOiAnJyk7XG4gICAgICByZXR1cm4gaXNBYnNvbG91dGUgPyBwcmVmaXggKyBwYXRoIDogcHJlZml4ICsgcmVzb2x2ZVBhdGgobG9jYXRpb24uaGFzaC5yZXBsYWNlKC9eIyE/LywgJycpLCBwYXRoLCBhcHBlbmQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gSGFzaEhpc3Rvcnk7XG4gIH0pKCk7XG5cbiAgdmFyIEFic3RyYWN0SGlzdG9yeSA9IChmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQWJzdHJhY3RIaXN0b3J5KF9yZWYpIHtcbiAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgQWJzdHJhY3RIaXN0b3J5KTtcblxuICAgICAgdGhpcy5vbkNoYW5nZSA9IG9uQ2hhbmdlO1xuICAgICAgdGhpcy5jdXJyZW50UGF0aCA9ICcvJztcbiAgICB9XG5cbiAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICB0aGlzLm9uQ2hhbmdlKCcvJyk7XG4gICAgfTtcblxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICAvLyBub29wXG4gICAgfTtcblxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcbiAgICAgIHBhdGggPSB0aGlzLmN1cnJlbnRQYXRoID0gdGhpcy5mb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCk7XG4gICAgICB0aGlzLm9uQ2hhbmdlKHBhdGgpO1xuICAgIH07XG5cbiAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuICAgICAgcmV0dXJuIHBhdGguY2hhckF0KDApID09PSAnLycgPyBwYXRoIDogcmVzb2x2ZVBhdGgodGhpcy5jdXJyZW50UGF0aCwgcGF0aCwgYXBwZW5kKTtcbiAgICB9O1xuXG4gICAgcmV0dXJuIEFic3RyYWN0SGlzdG9yeTtcbiAgfSkoKTtcblxuICAvKipcbiAgICogRGV0ZXJtaW5lIHRoZSByZXVzYWJpbGl0eSBvZiBhbiBleGlzdGluZyByb3V0ZXIgdmlldy5cbiAgICpcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcbiAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNhblJldXNlKHZpZXcsIGhhbmRsZXIsIHRyYW5zaXRpb24pIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuICAgIGlmICghY29tcG9uZW50IHx8ICFoYW5kbGVyKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIGltcG9ydGFudDogY2hlY2sgdmlldy5Db21wb25lbnQgaGVyZSBiZWNhdXNlIGl0IG1heVxuICAgIC8vIGhhdmUgYmVlbiBjaGFuZ2VkIGluIGFjdGl2YXRlIGhvb2tcbiAgICBpZiAodmlldy5Db21wb25lbnQgIT09IGhhbmRsZXIuY29tcG9uZW50KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHZhciBjYW5SZXVzZUZuID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnY2FuUmV1c2UnKTtcbiAgICByZXR1cm4gdHlwZW9mIGNhblJldXNlRm4gPT09ICdib29sZWFuJyA/IGNhblJldXNlRm4gOiBjYW5SZXVzZUZuID8gY2FuUmV1c2VGbi5jYWxsKGNvbXBvbmVudCwge1xuICAgICAgdG86IHRyYW5zaXRpb24udG8sXG4gICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb21cbiAgICB9KSA6IHRydWU7IC8vIGRlZmF1bHRzIHRvIHRydWVcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGNvbXBvbmVudCBjYW4gZGVhY3RpdmF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FuRGVhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBuZXh0KSB7XG4gICAgdmFyIGZyb21Db21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG4gICAgdmFyIGhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhmcm9tQ29tcG9uZW50LCAnY2FuRGVhY3RpdmF0ZScpO1xuICAgIGlmICghaG9vaykge1xuICAgICAgbmV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIGZyb21Db21wb25lbnQsIG5leHQsIHtcbiAgICAgICAgZXhwZWN0Qm9vbGVhbjogdHJ1ZVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgY29tcG9uZW50IGNhbiBhY3RpdmF0ZS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FuQWN0aXZhdGUoaGFuZGxlciwgdHJhbnNpdGlvbiwgbmV4dCkge1xuICAgIHJlc29sdmVBc3luY0NvbXBvbmVudChoYW5kbGVyLCBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgICAvLyBoYXZlIHRvIGNoZWNrIGR1ZSB0byBhc3luYy1uZXNzXG4gICAgICBpZiAodHJhbnNpdGlvbi5hYm9ydGVkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIGRldGVybWluZSBpZiB0aGlzIGNvbXBvbmVudCBjYW4gYmUgYWN0aXZhdGVkXG4gICAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2NhbkFjdGl2YXRlJyk7XG4gICAgICBpZiAoIWhvb2spIHtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJhbnNpdGlvbi5jYWxsSG9vayhob29rLCBudWxsLCBuZXh0LCB7XG4gICAgICAgICAgZXhwZWN0Qm9vbGVhbjogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsIGRlYWN0aXZhdGUgaG9va3MgZm9yIGV4aXN0aW5nIHJvdXRlci12aWV3cy5cbiAgICpcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcbiAgICovXG5cbiAgZnVuY3Rpb24gZGVhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBuZXh0KSB7XG4gICAgdmFyIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcbiAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgJ2RlYWN0aXZhdGUnKTtcbiAgICBpZiAoIWhvb2spIHtcbiAgICAgIG5leHQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoaG9vaywgY29tcG9uZW50LCBuZXh0KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQWN0aXZhdGUgLyBzd2l0Y2ggY29tcG9uZW50IGZvciBhIHJvdXRlci12aWV3LlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlcHRoXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gYWN0aXZhdGUodmlldywgdHJhbnNpdGlvbiwgZGVwdGgsIGNiLCByZXVzZSkge1xuICAgIHZhciBoYW5kbGVyID0gdHJhbnNpdGlvbi5hY3RpdmF0ZVF1ZXVlW2RlcHRoXTtcbiAgICBpZiAoIWhhbmRsZXIpIHtcbiAgICAgIHNhdmVDaGlsZFZpZXcodmlldyk7XG4gICAgICBpZiAodmlldy5fYm91bmQpIHtcbiAgICAgICAgdmlldy5zZXRDb21wb25lbnQobnVsbCk7XG4gICAgICB9XG4gICAgICBjYiAmJiBjYigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBDb21wb25lbnQgPSB2aWV3LkNvbXBvbmVudCA9IGhhbmRsZXIuY29tcG9uZW50O1xuICAgIHZhciBhY3RpdmF0ZUhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICdhY3RpdmF0ZScpO1xuICAgIHZhciBkYXRhSG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2RhdGEnKTtcbiAgICB2YXIgd2FpdEZvckRhdGEgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICd3YWl0Rm9yRGF0YScpO1xuXG4gICAgdmlldy5kZXB0aCA9IGRlcHRoO1xuICAgIHZpZXcuYWN0aXZhdGVkID0gZmFsc2U7XG5cbiAgICB2YXIgY29tcG9uZW50ID0gdW5kZWZpbmVkO1xuICAgIHZhciBsb2FkaW5nID0gISEoZGF0YUhvb2sgJiYgIXdhaXRGb3JEYXRhKTtcblxuICAgIC8vIFwicmV1c2VcIiBpcyBhIGZsYWcgcGFzc2VkIGRvd24gd2hlbiB0aGUgcGFyZW50IHZpZXcgaXNcbiAgICAvLyBlaXRoZXIgcmV1c2VkIHZpYSBrZWVwLWFsaXZlIG9yIGFzIGEgY2hpbGQgb2YgYSBrZXB0LWFsaXZlIHZpZXcuXG4gICAgLy8gb2YgY291cnNlIHdlIGNhbiBvbmx5IHJldXNlIGlmIHRoZSBjdXJyZW50IGtlcHQtYWxpdmUgaW5zdGFuY2VcbiAgICAvLyBpcyBvZiB0aGUgY29ycmVjdCB0eXBlLlxuICAgIHJldXNlID0gcmV1c2UgJiYgdmlldy5jaGlsZFZNICYmIHZpZXcuY2hpbGRWTS5jb25zdHJ1Y3RvciA9PT0gQ29tcG9uZW50O1xuXG4gICAgaWYgKHJldXNlKSB7XG4gICAgICAvLyBqdXN0IHJldXNlXG4gICAgICBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG4gICAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSBsb2FkaW5nO1xuICAgIH0gZWxzZSB7XG4gICAgICBzYXZlQ2hpbGRWaWV3KHZpZXcpO1xuXG4gICAgICAvLyB1bmJ1aWxkIGN1cnJlbnQgY29tcG9uZW50LiB0aGlzIHN0ZXAgYWxzbyBkZXN0cm95c1xuICAgICAgLy8gYW5kIHJlbW92ZXMgYWxsIG5lc3RlZCBjaGlsZCB2aWV3cy5cbiAgICAgIHZpZXcudW5idWlsZCh0cnVlKTtcblxuICAgICAgLy8gYnVpbGQgdGhlIG5ldyBjb21wb25lbnQuIHRoaXMgd2lsbCBhbHNvIGNyZWF0ZSB0aGVcbiAgICAgIC8vIGRpcmVjdCBjaGlsZCB2aWV3IG9mIHRoZSBjdXJyZW50IG9uZS4gaXQgd2lsbCByZWdpc3RlclxuICAgICAgLy8gaXRzZWxmIGFzIHZpZXcuY2hpbGRWaWV3LlxuICAgICAgY29tcG9uZW50ID0gdmlldy5idWlsZCh7XG4gICAgICAgIF9tZXRhOiB7XG4gICAgICAgICAgJGxvYWRpbmdSb3V0ZURhdGE6IGxvYWRpbmdcbiAgICAgICAgfSxcbiAgICAgICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcbiAgICAgICAgICB0aGlzLl9yb3V0ZXJWaWV3ID0gdmlldztcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIGhhbmRsZSBrZWVwLWFsaXZlLlxuICAgICAgLy8gd2hlbiBhIGtlcHQtYWxpdmUgY2hpbGQgdm0gaXMgcmVzdG9yZWQsIHdlIG5lZWQgdG9cbiAgICAgIC8vIGFkZCBpdHMgY2FjaGVkIGNoaWxkIHZpZXdzIGludG8gdGhlIHJvdXRlcidzIHZpZXcgbGlzdCxcbiAgICAgIC8vIGFuZCBhbHNvIHByb3Blcmx5IHVwZGF0ZSBjdXJyZW50IHZpZXcncyBjaGlsZCB2aWV3LlxuICAgICAgaWYgKHZpZXcua2VlcEFsaXZlKSB7XG4gICAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGxvYWRpbmc7XG4gICAgICAgIHZhciBjYWNoZWRDaGlsZFZpZXcgPSBjb21wb25lbnQuX2tlZXBBbGl2ZVJvdXRlclZpZXc7XG4gICAgICAgIGlmIChjYWNoZWRDaGlsZFZpZXcpIHtcbiAgICAgICAgICB2aWV3LmNoaWxkVmlldyA9IGNhY2hlZENoaWxkVmlldztcbiAgICAgICAgICBjb21wb25lbnQuX2tlZXBBbGl2ZVJvdXRlclZpZXcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY2xlYW51cCB0aGUgY29tcG9uZW50IGluIGNhc2UgdGhlIHRyYW5zaXRpb24gaXMgYWJvcnRlZFxuICAgIC8vIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIGV2ZXIgaW5zZXJ0ZWQuXG4gICAgdmFyIGNsZWFudXAgPSBmdW5jdGlvbiBjbGVhbnVwKCkge1xuICAgICAgY29tcG9uZW50LiRkZXN0cm95KCk7XG4gICAgfTtcblxuICAgIC8vIGFjdHVhbGx5IGluc2VydCB0aGUgY29tcG9uZW50IGFuZCB0cmlnZ2VyIHRyYW5zaXRpb25cbiAgICB2YXIgaW5zZXJ0ID0gZnVuY3Rpb24gaW5zZXJ0KCkge1xuICAgICAgaWYgKHJldXNlKSB7XG4gICAgICAgIGNiICYmIGNiKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciByb3V0ZXIgPSB0cmFuc2l0aW9uLnJvdXRlcjtcbiAgICAgIGlmIChyb3V0ZXIuX3JlbmRlcmVkIHx8IHJvdXRlci5fdHJhbnNpdGlvbk9uTG9hZCkge1xuICAgICAgICB2aWV3LnRyYW5zaXRpb24oY29tcG9uZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5vIHRyYW5zaXRpb24gb24gZmlyc3QgcmVuZGVyLCBtYW51YWwgdHJhbnNpdGlvblxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHZpZXcuc2V0Q3VycmVudCkge1xuICAgICAgICAgIC8vIDAuMTIgY29tcGF0XG4gICAgICAgICAgdmlldy5zZXRDdXJyZW50KGNvbXBvbmVudCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gMS4wXG4gICAgICAgICAgdmlldy5jaGlsZFZNID0gY29tcG9uZW50O1xuICAgICAgICB9XG4gICAgICAgIGNvbXBvbmVudC4kYmVmb3JlKHZpZXcuYW5jaG9yLCBudWxsLCBmYWxzZSk7XG4gICAgICB9XG4gICAgICBjYiAmJiBjYigpO1xuICAgIH07XG5cbiAgICB2YXIgYWZ0ZXJEYXRhID0gZnVuY3Rpb24gYWZ0ZXJEYXRhKCkge1xuICAgICAgLy8gYWN0aXZhdGUgdGhlIGNoaWxkIHZpZXdcbiAgICAgIGlmICh2aWV3LmNoaWxkVmlldykge1xuICAgICAgICBhY3RpdmF0ZSh2aWV3LmNoaWxkVmlldywgdHJhbnNpdGlvbiwgZGVwdGggKyAxLCBudWxsLCByZXVzZSB8fCB2aWV3LmtlZXBBbGl2ZSk7XG4gICAgICB9XG4gICAgICBpbnNlcnQoKTtcbiAgICB9O1xuXG4gICAgLy8gY2FsbGVkIGFmdGVyIGFjdGl2YXRpb24gaG9vayBpcyByZXNvbHZlZFxuICAgIHZhciBhZnRlckFjdGl2YXRlID0gZnVuY3Rpb24gYWZ0ZXJBY3RpdmF0ZSgpIHtcbiAgICAgIHZpZXcuYWN0aXZhdGVkID0gdHJ1ZTtcbiAgICAgIGlmIChkYXRhSG9vayAmJiB3YWl0Rm9yRGF0YSkge1xuICAgICAgICAvLyB3YWl0IHVudGlsIGRhdGEgbG9hZGVkIHRvIGluc2VydFxuICAgICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rLCBhZnRlckRhdGEsIGNsZWFudXApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbG9hZCBkYXRhIGFuZCBpbnNlcnQgYXQgdGhlIHNhbWUgdGltZVxuICAgICAgICBpZiAoZGF0YUhvb2spIHtcbiAgICAgICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rKTtcbiAgICAgICAgfVxuICAgICAgICBhZnRlckRhdGEoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgaWYgKGFjdGl2YXRlSG9vaykge1xuICAgICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoYWN0aXZhdGVIb29rLCBjb21wb25lbnQsIGFmdGVyQWN0aXZhdGUsIHtcbiAgICAgICAgY2xlYW51cDogY2xlYW51cCxcbiAgICAgICAgcG9zdEFjdGl2YXRlOiB0cnVlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgYWZ0ZXJBY3RpdmF0ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZXVzZSBhIHZpZXcsIGp1c3QgcmVsb2FkIGRhdGEgaWYgbmVjZXNzYXJ5LlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICovXG5cbiAgZnVuY3Rpb24gcmV1c2UodmlldywgdHJhbnNpdGlvbikge1xuICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG4gICAgdmFyIGRhdGFIb29rID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnZGF0YScpO1xuICAgIGlmIChkYXRhSG9vaykge1xuICAgICAgbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBkYXRhSG9vayk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEFzeW5jaHJvbm91c2x5IGxvYWQgYW5kIGFwcGx5IGRhdGEgdG8gY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gY29tcG9uZW50XG4gICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNsZWFudXBcbiAgICovXG5cbiAgZnVuY3Rpb24gbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBob29rLCBjYiwgY2xlYW51cCkge1xuICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IHRydWU7XG4gICAgdHJhbnNpdGlvbi5jYWxsSG9va3MoaG9vaywgY29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSBmYWxzZTtcbiAgICAgIGNvbXBvbmVudC4kZW1pdCgncm91dGUtZGF0YS1sb2FkZWQnLCBjb21wb25lbnQpO1xuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9LCB7XG4gICAgICBjbGVhbnVwOiBjbGVhbnVwLFxuICAgICAgcG9zdEFjdGl2YXRlOiB0cnVlLFxuICAgICAgcHJvY2Vzc0RhdGE6IGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGRhdGEpIHtcbiAgICAgICAgLy8gaGFuZGxlIHByb21pc2Ugc3VnYXIgc3ludGF4XG4gICAgICAgIHZhciBwcm9taXNlcyA9IFtdO1xuICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgICAgIE9iamVjdC5rZXlzKGRhdGEpLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgdmFyIHZhbCA9IGRhdGFba2V5XTtcbiAgICAgICAgICAgIGlmIChpc1Byb21pc2UodmFsKSkge1xuICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHZhbC50aGVuKGZ1bmN0aW9uIChyZXNvbHZlZFZhbCkge1xuICAgICAgICAgICAgICAgIGNvbXBvbmVudC4kc2V0KGtleSwgcmVzb2x2ZWRWYWwpO1xuICAgICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBjb21wb25lbnQuJHNldChrZXksIHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb21pc2VzLmxlbmd0aCkge1xuICAgICAgICAgIHJldHVybiBwcm9taXNlc1swXS5jb25zdHJ1Y3Rvci5hbGwocHJvbWlzZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU2F2ZSB0aGUgY2hpbGQgdmlldyBmb3IgYSBrZXB0LWFsaXZlIHZpZXcgc28gdGhhdFxuICAgKiB3ZSBjYW4gcmVzdG9yZSBpdCB3aGVuIGl0IGlzIHN3aXRjaGVkIGJhY2sgdG8uXG4gICAqXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHNhdmVDaGlsZFZpZXcodmlldykge1xuICAgIGlmICh2aWV3LmtlZXBBbGl2ZSAmJiB2aWV3LmNoaWxkVk0gJiYgdmlldy5jaGlsZFZpZXcpIHtcbiAgICAgIHZpZXcuY2hpbGRWTS5fa2VlcEFsaXZlUm91dGVyVmlldyA9IHZpZXcuY2hpbGRWaWV3O1xuICAgIH1cbiAgICB2aWV3LmNoaWxkVmlldyA9IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgcGxhaW4gb2JqZWN0LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbFxuICAgKi9cblxuICBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG4gIH1cblxuICAvKipcbiAgICogQSBSb3V0ZVRyYW5zaXRpb24gb2JqZWN0IG1hbmFnZXMgdGhlIHBpcGVsaW5lIG9mIGFcbiAgICogcm91dGVyLXZpZXcgc3dpdGNoaW5nIHByb2Nlc3MuIFRoaXMgaXMgYWxzbyB0aGUgb2JqZWN0XG4gICAqIHBhc3NlZCBpbnRvIHVzZXIgcm91dGUgaG9va3MuXG4gICAqXG4gICAqIEBwYXJhbSB7Um91dGVyfSByb3V0ZXJcbiAgICogQHBhcmFtIHtSb3V0ZX0gdG9cbiAgICogQHBhcmFtIHtSb3V0ZX0gZnJvbVxuICAgKi9cblxuICB2YXIgUm91dGVUcmFuc2l0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSb3V0ZVRyYW5zaXRpb24ocm91dGVyLCB0bywgZnJvbSkge1xuICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdXRlVHJhbnNpdGlvbik7XG5cbiAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuICAgICAgdGhpcy50byA9IHRvO1xuICAgICAgdGhpcy5mcm9tID0gZnJvbTtcbiAgICAgIHRoaXMubmV4dCA9IG51bGw7XG4gICAgICB0aGlzLmFib3J0ZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuZG9uZSA9IGZhbHNlO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEFib3J0IGN1cnJlbnQgdHJhbnNpdGlvbiBhbmQgcmV0dXJuIHRvIHByZXZpb3VzIGxvY2F0aW9uLlxuICAgICAqL1xuXG4gICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgLy8gaWYgdGhlIHJvb3QgcGF0aCB0aHJvd3MgYW4gZXJyb3IgZHVyaW5nIHZhbGlkYXRpb25cbiAgICAgICAgLy8gb24gaW5pdGlhbCBsb2FkLCBpdCBnZXRzIGNhdWdodCBpbiBhbiBpbmZpbml0ZSBsb29wLlxuICAgICAgICB2YXIgYWJvcnRpbmdPbkxvYWQgPSAhdGhpcy5mcm9tLnBhdGggJiYgdGhpcy50by5wYXRoID09PSAnLyc7XG4gICAgICAgIGlmICghYWJvcnRpbmdPbkxvYWQpIHtcbiAgICAgICAgICB0aGlzLnJvdXRlci5yZXBsYWNlKHRoaXMuZnJvbS5wYXRoIHx8ICcvJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWJvcnQgY3VycmVudCB0cmFuc2l0aW9uIGFuZCByZWRpcmVjdCB0byBhIG5ldyBsb2NhdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICovXG5cbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLnJlZGlyZWN0ID0gZnVuY3Rpb24gcmVkaXJlY3QocGF0aCkge1xuICAgICAgaWYgKCF0aGlzLmFib3J0ZWQpIHtcbiAgICAgICAgdGhpcy5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHBhdGggPSBtYXBQYXJhbXMocGF0aCwgdGhpcy50by5wYXJhbXMsIHRoaXMudG8ucXVlcnkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhdGgucGFyYW1zID0gcGF0aC5wYXJhbXMgfHwgdGhpcy50by5wYXJhbXM7XG4gICAgICAgICAgcGF0aC5xdWVyeSA9IHBhdGgucXVlcnkgfHwgdGhpcy50by5xdWVyeTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvdXRlci5yZXBsYWNlKHBhdGgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBIHJvdXRlciB2aWV3IHRyYW5zaXRpb24ncyBwaXBlbGluZSBjYW4gYmUgZGVzY3JpYmVkIGFzXG4gICAgICogZm9sbG93cywgYXNzdW1pbmcgd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBhbiBleGlzdGluZ1xuICAgICAqIDxyb3V0ZXItdmlldz4gY2hhaW4gW0NvbXBvbmVudCBBLCBDb21wb25lbnQgQl0gdG8gYSBuZXdcbiAgICAgKiBjaGFpbiBbQ29tcG9uZW50IEEsIENvbXBvbmVudCBDXTpcbiAgICAgKlxuICAgICAqICBBICAgIEFcbiAgICAgKiAgfCA9PiB8XG4gICAgICogIEIgICAgQ1xuICAgICAqXG4gICAgICogMS4gUmV1c2FibGl0eSBwaGFzZTpcbiAgICAgKiAgIC0+IGNhblJldXNlKEEsIEEpXG4gICAgICogICAtPiBjYW5SZXVzZShCLCBDKVxuICAgICAqICAgLT4gZGV0ZXJtaW5lIG5ldyBxdWV1ZXM6XG4gICAgICogICAgICAtIGRlYWN0aXZhdGlvbjogW0JdXG4gICAgICogICAgICAtIGFjdGl2YXRpb246IFtDXVxuICAgICAqXG4gICAgICogMi4gVmFsaWRhdGlvbiBwaGFzZTpcbiAgICAgKiAgIC0+IGNhbkRlYWN0aXZhdGUoQilcbiAgICAgKiAgIC0+IGNhbkFjdGl2YXRlKEMpXG4gICAgICpcbiAgICAgKiAzLiBBY3RpdmF0aW9uIHBoYXNlOlxuICAgICAqICAgLT4gZGVhY3RpdmF0ZShCKVxuICAgICAqICAgLT4gYWN0aXZhdGUoQylcbiAgICAgKlxuICAgICAqIEVhY2ggb2YgdGhlc2Ugc3RlcHMgY2FuIGJlIGFzeW5jaHJvbm91cywgYW5kIGFueVxuICAgICAqIHN0ZXAgY2FuIHBvdGVudGlhbGx5IGFib3J0IHRoZSB0cmFuc2l0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydChjYikge1xuICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzO1xuXG4gICAgICAvLyBkZXRlcm1pbmUgdGhlIHF1ZXVlIG9mIHZpZXdzIHRvIGRlYWN0aXZhdGVcbiAgICAgIHZhciBkZWFjdGl2YXRlUXVldWUgPSBbXTtcbiAgICAgIHZhciB2aWV3ID0gdGhpcy5yb3V0ZXIuX3Jvb3RWaWV3O1xuICAgICAgd2hpbGUgKHZpZXcpIHtcbiAgICAgICAgZGVhY3RpdmF0ZVF1ZXVlLnVuc2hpZnQodmlldyk7XG4gICAgICAgIHZpZXcgPSB2aWV3LmNoaWxkVmlldztcbiAgICAgIH1cbiAgICAgIHZhciByZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlID0gZGVhY3RpdmF0ZVF1ZXVlLnNsaWNlKCkucmV2ZXJzZSgpO1xuXG4gICAgICAvLyBkZXRlcm1pbmUgdGhlIHF1ZXVlIG9mIHJvdXRlIGhhbmRsZXJzIHRvIGFjdGl2YXRlXG4gICAgICB2YXIgYWN0aXZhdGVRdWV1ZSA9IHRoaXMuYWN0aXZhdGVRdWV1ZSA9IHRvQXJyYXkodGhpcy50by5tYXRjaGVkKS5tYXAoZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgIHJldHVybiBtYXRjaC5oYW5kbGVyO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIDEuIFJldXNhYmlsaXR5IHBoYXNlXG4gICAgICB2YXIgaSA9IHVuZGVmaW5lZCxcbiAgICAgICAgICByZXVzZVF1ZXVlID0gdW5kZWZpbmVkO1xuICAgICAgZm9yIChpID0gMDsgaSA8IHJldmVyc2VEZWFjdGl2YXRlUXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKCFjYW5SZXVzZShyZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlW2ldLCBhY3RpdmF0ZVF1ZXVlW2ldLCB0cmFuc2l0aW9uKSkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoaSA+IDApIHtcbiAgICAgICAgcmV1c2VRdWV1ZSA9IHJldmVyc2VEZWFjdGl2YXRlUXVldWUuc2xpY2UoMCwgaSk7XG4gICAgICAgIGRlYWN0aXZhdGVRdWV1ZSA9IHJldmVyc2VEZWFjdGl2YXRlUXVldWUuc2xpY2UoaSkucmV2ZXJzZSgpO1xuICAgICAgICBhY3RpdmF0ZVF1ZXVlID0gYWN0aXZhdGVRdWV1ZS5zbGljZShpKTtcbiAgICAgIH1cblxuICAgICAgLy8gMi4gVmFsaWRhdGlvbiBwaGFzZVxuICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShkZWFjdGl2YXRlUXVldWUsIGNhbkRlYWN0aXZhdGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShhY3RpdmF0ZVF1ZXVlLCBjYW5BY3RpdmF0ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoZGVhY3RpdmF0ZVF1ZXVlLCBkZWFjdGl2YXRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyAzLiBBY3RpdmF0aW9uIHBoYXNlXG5cbiAgICAgICAgICAgIC8vIFVwZGF0ZSByb3V0ZXIgY3VycmVudCByb3V0ZVxuICAgICAgICAgICAgdHJhbnNpdGlvbi5yb3V0ZXIuX29uVHJhbnNpdGlvblZhbGlkYXRlZCh0cmFuc2l0aW9uKTtcblxuICAgICAgICAgICAgLy8gdHJpZ2dlciByZXVzZSBmb3IgYWxsIHJldXNlZCB2aWV3c1xuICAgICAgICAgICAgcmV1c2VRdWV1ZSAmJiByZXVzZVF1ZXVlLmZvckVhY2goZnVuY3Rpb24gKHZpZXcpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHJldXNlKHZpZXcsIHRyYW5zaXRpb24pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIHRoZSByb290IG9mIHRoZSBjaGFpbiB0aGF0IG5lZWRzIHRvIGJlIHJlcGxhY2VkXG4gICAgICAgICAgICAvLyBpcyB0aGUgdG9wLW1vc3Qgbm9uLXJldXNhYmxlIHZpZXcuXG4gICAgICAgICAgICBpZiAoZGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgICAgICB2YXIgX3ZpZXcgPSBkZWFjdGl2YXRlUXVldWVbZGVhY3RpdmF0ZVF1ZXVlLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgICB2YXIgZGVwdGggPSByZXVzZVF1ZXVlID8gcmV1c2VRdWV1ZS5sZW5ndGggOiAwO1xuICAgICAgICAgICAgICBhY3RpdmF0ZShfdmlldywgdHJhbnNpdGlvbiwgZGVwdGgsIGNiKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNiKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFzeW5jaHJvbm91c2x5IGFuZCBzZXF1ZW50aWFsbHkgYXBwbHkgYSBmdW5jdGlvbiB0byBhXG4gICAgICogcXVldWUuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBxdWV1ZVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUucnVuUXVldWUgPSBmdW5jdGlvbiBydW5RdWV1ZShxdWV1ZSwgZm4sIGNiKSB7XG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XG4gICAgICBzdGVwKDApO1xuICAgICAgZnVuY3Rpb24gc3RlcChpbmRleCkge1xuICAgICAgICBpZiAoaW5kZXggPj0gcXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBmbihxdWV1ZVtpbmRleF0sIHRyYW5zaXRpb24sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHN0ZXAoaW5kZXggKyAxKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYWxsIGEgdXNlciBwcm92aWRlZCByb3V0ZSB0cmFuc2l0aW9uIGhvb2sgYW5kIGhhbmRsZVxuICAgICAqIHRoZSByZXNwb25zZSAoZS5nLiBpZiB0aGUgdXNlciByZXR1cm5zIGEgcHJvbWlzZSkuXG4gICAgICpcbiAgICAgKiBJZiB0aGUgdXNlciBuZWl0aGVyIGV4cGVjdHMgYW4gYXJndW1lbnQgbm9yIHJldHVybnMgYVxuICAgICAqIHByb21pc2UsIHRoZSBob29rIGlzIGFzc3VtZWQgdG8gYmUgc3luY2hyb25vdXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG4gICAgICogQHBhcmFtIHsqfSBbY29udGV4dF1cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBleHBlY3RCb29sZWFuXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHBvc3RBY3RpdmVcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IHByb2Nlc3NEYXRhXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBjbGVhbnVwXG4gICAgICovXG5cbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gY2FsbEhvb2soaG9vaywgY29udGV4dCwgY2IpIHtcbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbM107XG5cbiAgICAgIHZhciBfcmVmJGV4cGVjdEJvb2xlYW4gPSBfcmVmLmV4cGVjdEJvb2xlYW47XG4gICAgICB2YXIgZXhwZWN0Qm9vbGVhbiA9IF9yZWYkZXhwZWN0Qm9vbGVhbiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGV4cGVjdEJvb2xlYW47XG4gICAgICB2YXIgX3JlZiRwb3N0QWN0aXZhdGUgPSBfcmVmLnBvc3RBY3RpdmF0ZTtcbiAgICAgIHZhciBwb3N0QWN0aXZhdGUgPSBfcmVmJHBvc3RBY3RpdmF0ZSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHBvc3RBY3RpdmF0ZTtcbiAgICAgIHZhciBwcm9jZXNzRGF0YSA9IF9yZWYucHJvY2Vzc0RhdGE7XG4gICAgICB2YXIgY2xlYW51cCA9IF9yZWYuY2xlYW51cDtcblxuICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzO1xuICAgICAgdmFyIG5leHRDYWxsZWQgPSBmYWxzZTtcblxuICAgICAgLy8gYWJvcnQgdGhlIHRyYW5zaXRpb25cbiAgICAgIHZhciBhYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuICAgICAgICBjbGVhbnVwICYmIGNsZWFudXAoKTtcbiAgICAgICAgdHJhbnNpdGlvbi5hYm9ydCgpO1xuICAgICAgfTtcblxuICAgICAgLy8gaGFuZGxlIGVycm9yc1xuICAgICAgdmFyIG9uRXJyb3IgPSBmdW5jdGlvbiBvbkVycm9yKGVycikge1xuICAgICAgICBwb3N0QWN0aXZhdGUgPyBuZXh0KCkgOiBhYm9ydCgpO1xuICAgICAgICBpZiAoZXJyICYmICF0cmFuc2l0aW9uLnJvdXRlci5fc3VwcHJlc3MpIHtcbiAgICAgICAgICB3YXJuJDEoJ1VuY2F1Z2h0IGVycm9yIGR1cmluZyB0cmFuc2l0aW9uOiAnKTtcbiAgICAgICAgICB0aHJvdyBlcnIgaW5zdGFuY2VvZiBFcnJvciA/IGVyciA6IG5ldyBFcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBzaW5jZSBwcm9taXNlIHN3YWxsb3dzIGVycm9ycywgd2UgaGF2ZSB0b1xuICAgICAgLy8gdGhyb3cgaXQgaW4gdGhlIG5leHQgdGljay4uLlxuICAgICAgdmFyIG9uUHJvbWlzZUVycm9yID0gZnVuY3Rpb24gb25Qcm9taXNlRXJyb3IoZXJyKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgb25FcnJvcihlcnIpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBhZHZhbmNlIHRoZSB0cmFuc2l0aW9uIHRvIHRoZSBuZXh0IHN0ZXBcbiAgICAgIHZhciBuZXh0ID0gZnVuY3Rpb24gbmV4dCgpIHtcbiAgICAgICAgaWYgKG5leHRDYWxsZWQpIHtcbiAgICAgICAgICB3YXJuJDEoJ3RyYW5zaXRpb24ubmV4dCgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBuZXh0Q2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgaWYgKHRyYW5zaXRpb24uYWJvcnRlZCkge1xuICAgICAgICAgIGNsZWFudXAgJiYgY2xlYW51cCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBjYiAmJiBjYigpO1xuICAgICAgfTtcblxuICAgICAgdmFyIG5leHRXaXRoQm9vbGVhbiA9IGZ1bmN0aW9uIG5leHRXaXRoQm9vbGVhbihyZXMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiByZXMgPT09ICdib29sZWFuJykge1xuICAgICAgICAgIHJlcyA/IG5leHQoKSA6IGFib3J0KCk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXNQcm9taXNlKHJlcykpIHtcbiAgICAgICAgICByZXMudGhlbihmdW5jdGlvbiAob2spIHtcbiAgICAgICAgICAgIG9rID8gbmV4dCgpIDogYWJvcnQoKTtcbiAgICAgICAgICB9LCBvblByb21pc2VFcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAoIWhvb2subGVuZ3RoKSB7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgbmV4dFdpdGhEYXRhID0gZnVuY3Rpb24gbmV4dFdpdGhEYXRhKGRhdGEpIHtcbiAgICAgICAgdmFyIHJlcyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXMgPSBwcm9jZXNzRGF0YShkYXRhKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIG9uRXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNQcm9taXNlKHJlcykpIHtcbiAgICAgICAgICByZXMudGhlbihuZXh0LCBvblByb21pc2VFcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbmV4dCgpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBleHBvc2UgYSBjbG9uZSBvZiB0aGUgdHJhbnNpdGlvbiBvYmplY3QsIHNvIHRoYXQgZWFjaFxuICAgICAgLy8gaG9vayBnZXRzIGEgY2xlYW4gY29weSBhbmQgcHJldmVudCB0aGUgdXNlciBmcm9tXG4gICAgICAvLyBtZXNzaW5nIHdpdGggdGhlIGludGVybmFscy5cbiAgICAgIHZhciBleHBvc2VkID0ge1xuICAgICAgICB0bzogdHJhbnNpdGlvbi50byxcbiAgICAgICAgZnJvbTogdHJhbnNpdGlvbi5mcm9tLFxuICAgICAgICBhYm9ydDogYWJvcnQsXG4gICAgICAgIG5leHQ6IHByb2Nlc3NEYXRhID8gbmV4dFdpdGhEYXRhIDogbmV4dCxcbiAgICAgICAgcmVkaXJlY3Q6IGZ1bmN0aW9uIHJlZGlyZWN0KCkge1xuICAgICAgICAgIHRyYW5zaXRpb24ucmVkaXJlY3QuYXBwbHkodHJhbnNpdGlvbiwgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgICAgfTtcblxuICAgICAgLy8gYWN0dWFsbHkgY2FsbCB0aGUgaG9va1xuICAgICAgdmFyIHJlcyA9IHVuZGVmaW5lZDtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJlcyA9IGhvb2suY2FsbChjb250ZXh0LCBleHBvc2VkKTtcbiAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXhwZWN0Qm9vbGVhbikge1xuICAgICAgICAvLyBib29sZWFuIGhvb2tzXG4gICAgICAgIG5leHRXaXRoQm9vbGVhbihyZXMpO1xuICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzKSkge1xuICAgICAgICAvLyBwcm9taXNlXG4gICAgICAgIGlmIChwcm9jZXNzRGF0YSkge1xuICAgICAgICAgIHJlcy50aGVuKG5leHRXaXRoRGF0YSwgb25Qcm9taXNlRXJyb3IpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJlcy50aGVuKG5leHQsIG9uUHJvbWlzZUVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzRGF0YSAmJiBpc1BsYWluT2piZWN0KHJlcykpIHtcbiAgICAgICAgLy8gZGF0YSBwcm9taXNlIHN1Z2FyXG4gICAgICAgIG5leHRXaXRoRGF0YShyZXMpO1xuICAgICAgfSBlbHNlIGlmICghaG9vay5sZW5ndGgpIHtcbiAgICAgICAgbmV4dCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDYWxsIGEgc2luZ2xlIGhvb2sgb3IgYW4gYXJyYXkgb2YgYXN5bmMgaG9va3MgaW4gc2VyaWVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtBcnJheX0gaG9va3NcbiAgICAgKiBAcGFyYW0geyp9IGNvbnRleHRcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuY2FsbEhvb2tzID0gZnVuY3Rpb24gY2FsbEhvb2tzKGhvb2tzLCBjb250ZXh0LCBjYiwgb3B0aW9ucykge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoaG9va3MpKSB7XG4gICAgICAgIHRoaXMucnVuUXVldWUoaG9va3MsIGZ1bmN0aW9uIChob29rLCBfLCBuZXh0KSB7XG4gICAgICAgICAgaWYgKCFfdGhpcy5hYm9ydGVkKSB7XG4gICAgICAgICAgICBfdGhpcy5jYWxsSG9vayhob29rLCBjb250ZXh0LCBuZXh0LCBvcHRpb25zKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIGNiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2FsbEhvb2soaG9va3MsIGNvbnRleHQsIGNiLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIFJvdXRlVHJhbnNpdGlvbjtcbiAgfSkoKTtcblxuICBmdW5jdGlvbiBpc1BsYWluT2piZWN0KHZhbCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKSA9PT0gJ1tvYmplY3QgT2JqZWN0XSc7XG4gIH1cblxuICBmdW5jdGlvbiB0b0FycmF5KHZhbCkge1xuICAgIHJldHVybiB2YWwgPyBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh2YWwpIDogW107XG4gIH1cblxuICB2YXIgaW50ZXJuYWxLZXlzUkUgPSAvXihjb21wb25lbnR8c3ViUm91dGVzfGZ1bGxQYXRoKSQvO1xuXG4gIC8qKlxuICAgKiBSb3V0ZSBDb250ZXh0IE9iamVjdFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgKiBAcGFyYW0ge1JvdXRlcn0gcm91dGVyXG4gICAqL1xuXG4gIHZhciBSb3V0ZSA9IGZ1bmN0aW9uIFJvdXRlKHBhdGgsIHJvdXRlcikge1xuICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGUpO1xuXG4gICAgdmFyIG1hdGNoZWQgPSByb3V0ZXIuX3JlY29nbml6ZXIucmVjb2duaXplKHBhdGgpO1xuICAgIGlmIChtYXRjaGVkKSB7XG4gICAgICAvLyBjb3B5IGFsbCBjdXN0b20gZmllbGRzIGZyb20gcm91dGUgY29uZmlnc1xuICAgICAgW10uZm9yRWFjaC5jYWxsKG1hdGNoZWQsIGZ1bmN0aW9uIChtYXRjaCkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWF0Y2guaGFuZGxlcikge1xuICAgICAgICAgIGlmICghaW50ZXJuYWxLZXlzUkUudGVzdChrZXkpKSB7XG4gICAgICAgICAgICBfdGhpc1trZXldID0gbWF0Y2guaGFuZGxlcltrZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyBzZXQgcXVlcnkgYW5kIHBhcmFtc1xuICAgICAgdGhpcy5xdWVyeSA9IG1hdGNoZWQucXVlcnlQYXJhbXM7XG4gICAgICB0aGlzLnBhcmFtcyA9IFtdLnJlZHVjZS5jYWxsKG1hdGNoZWQsIGZ1bmN0aW9uIChwcmV2LCBjdXIpIHtcbiAgICAgICAgaWYgKGN1ci5wYXJhbXMpIHtcbiAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gY3VyLnBhcmFtcykge1xuICAgICAgICAgICAgcHJldltrZXldID0gY3VyLnBhcmFtc1trZXldO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcHJldjtcbiAgICAgIH0sIHt9KTtcbiAgICB9XG4gICAgLy8gZXhwb3NlIHBhdGggYW5kIHJvdXRlclxuICAgIHRoaXMucGF0aCA9IHBhdGg7XG4gICAgLy8gZm9yIGludGVybmFsIHVzZVxuICAgIHRoaXMubWF0Y2hlZCA9IG1hdGNoZWQgfHwgcm91dGVyLl9ub3RGb3VuZEhhbmRsZXI7XG4gICAgLy8gaW50ZXJuYWwgcmVmZXJlbmNlIHRvIHJvdXRlclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncm91dGVyJywge1xuICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICB2YWx1ZTogcm91dGVyXG4gICAgfSk7XG4gICAgLy8gSW1wb3J0YW50OiBmcmVlemUgc2VsZiB0byBwcmV2ZW50IG9ic2VydmF0aW9uXG4gICAgT2JqZWN0LmZyZWV6ZSh0aGlzKTtcbiAgfTtcblxuICBmdW5jdGlvbiBhcHBseU92ZXJyaWRlIChWdWUpIHtcbiAgICB2YXIgX1Z1ZSR1dGlsID0gVnVlLnV0aWw7XG4gICAgdmFyIGV4dGVuZCA9IF9WdWUkdXRpbC5leHRlbmQ7XG4gICAgdmFyIGlzQXJyYXkgPSBfVnVlJHV0aWwuaXNBcnJheTtcbiAgICB2YXIgZGVmaW5lUmVhY3RpdmUgPSBfVnVlJHV0aWwuZGVmaW5lUmVhY3RpdmU7XG5cbiAgICAvLyBvdmVycmlkZSBWdWUncyBpbml0IGFuZCBkZXN0cm95IHByb2Nlc3MgdG8ga2VlcCB0cmFjayBvZiByb3V0ZXIgaW5zdGFuY2VzXG4gICAgdmFyIGluaXQgPSBWdWUucHJvdG90eXBlLl9pbml0O1xuICAgIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gICAgICB2YXIgcm9vdCA9IG9wdGlvbnMuX3BhcmVudCB8fCBvcHRpb25zLnBhcmVudCB8fCB0aGlzO1xuICAgICAgdmFyIHJvdXRlciA9IHJvb3QuJHJvdXRlcjtcbiAgICAgIHZhciByb3V0ZSA9IHJvb3QuJHJvdXRlO1xuICAgICAgaWYgKHJvdXRlcikge1xuICAgICAgICAvLyBleHBvc2Ugcm91dGVyXG4gICAgICAgIHRoaXMuJHJvdXRlciA9IHJvdXRlcjtcbiAgICAgICAgcm91dGVyLl9jaGlsZHJlbi5wdXNoKHRoaXMpO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRoaXMuX2RlZmluZU1ldGEpIHtcbiAgICAgICAgICAvLyAwLjEyXG4gICAgICAgICAgdGhpcy5fZGVmaW5lTWV0YSgnJHJvdXRlJywgcm91dGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIDEuMFxuICAgICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsICckcm91dGUnLCByb3V0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGluaXQuY2FsbCh0aGlzLCBvcHRpb25zKTtcbiAgICB9O1xuXG4gICAgdmFyIGRlc3Ryb3kgPSBWdWUucHJvdG90eXBlLl9kZXN0cm95O1xuICAgIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoIXRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgJiYgdGhpcy4kcm91dGVyKSB7XG4gICAgICAgIHRoaXMuJHJvdXRlci5fY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcbiAgICAgIH1cbiAgICAgIGRlc3Ryb3kuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9O1xuXG4gICAgLy8gMS4wIG9ubHk6IGVuYWJsZSByb3V0ZSBtaXhpbnNcbiAgICB2YXIgc3RyYXRzID0gVnVlLmNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXM7XG4gICAgdmFyIGhvb2tzVG9NZXJnZVJFID0gL14oZGF0YXxhY3RpdmF0ZXxkZWFjdGl2YXRlKSQvO1xuXG4gICAgaWYgKHN0cmF0cykge1xuICAgICAgc3RyYXRzLnJvdXRlID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgICAgICAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcbiAgICAgICAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcbiAgICAgICAgdmFyIHJldCA9IHt9O1xuICAgICAgICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcbiAgICAgICAgICB2YXIgYSA9IHJldFtrZXldO1xuICAgICAgICAgIHZhciBiID0gY2hpbGRWYWxba2V5XTtcbiAgICAgICAgICAvLyBmb3IgZGF0YSwgYWN0aXZhdGUgYW5kIGRlYWN0aXZhdGUsIHdlIG5lZWQgdG8gbWVyZ2UgdGhlbSBpbnRvXG4gICAgICAgICAgLy8gYXJyYXlzIHNpbWlsYXIgdG8gbGlmZWN5Y2xlIGhvb2tzLlxuICAgICAgICAgIGlmIChhICYmIGhvb2tzVG9NZXJnZVJFLnRlc3Qoa2V5KSkge1xuICAgICAgICAgICAgcmV0W2tleV0gPSAoaXNBcnJheShhKSA/IGEgOiBbYV0pLmNvbmNhdChiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0W2tleV0gPSBiO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmV0O1xuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBWaWV3IChWdWUpIHtcblxuICAgIHZhciBfID0gVnVlLnV0aWw7XG4gICAgdmFyIGNvbXBvbmVudERlZiA9XG4gICAgLy8gMC4xMlxuICAgIFZ1ZS5kaXJlY3RpdmUoJ19jb21wb25lbnQnKSB8fFxuICAgIC8vIDEuMFxuICAgIFZ1ZS5pbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50O1xuICAgIC8vIDxyb3V0ZXItdmlldz4gZXh0ZW5kcyB0aGUgaW50ZXJuYWwgY29tcG9uZW50IGRpcmVjdGl2ZVxuICAgIHZhciB2aWV3RGVmID0gXy5leHRlbmQoe30sIGNvbXBvbmVudERlZik7XG5cbiAgICAvLyB3aXRoIHNvbWUgb3ZlcnJpZGVzXG4gICAgXy5leHRlbmQodmlld0RlZiwge1xuXG4gICAgICBfaXNSb3V0ZXJWaWV3OiB0cnVlLFxuXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgICB2YXIgcm91dGUgPSB0aGlzLnZtLiRyb3V0ZTtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmICghcm91dGUpIHtcbiAgICAgICAgICB3YXJuJDEoJzxyb3V0ZXItdmlldz4gY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgYSAnICsgJ3JvdXRlci1lbmFibGVkIGFwcC4nKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gZm9yY2UgZHluYW1pYyBkaXJlY3RpdmUgc28gdi1jb21wb25lbnQgZG9lc24ndFxuICAgICAgICAvLyBhdHRlbXB0IHRvIGJ1aWxkIHJpZ2h0IG5vd1xuICAgICAgICB0aGlzLl9pc0R5bmFtaWNMaXRlcmFsID0gdHJ1ZTtcbiAgICAgICAgLy8gZmluYWxseSwgaW5pdCBieSBkZWxlZ2F0aW5nIHRvIHYtY29tcG9uZW50XG4gICAgICAgIGNvbXBvbmVudERlZi5iaW5kLmNhbGwodGhpcyk7XG5cbiAgICAgICAgLy8gbG9jYXRlIHRoZSBwYXJlbnQgdmlld1xuICAgICAgICB2YXIgcGFyZW50VmlldyA9IHVuZGVmaW5lZDtcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMudm07XG4gICAgICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgICAgICBpZiAocGFyZW50Ll9yb3V0ZXJWaWV3KSB7XG4gICAgICAgICAgICBwYXJlbnRWaWV3ID0gcGFyZW50Ll9yb3V0ZXJWaWV3O1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHBhcmVudCA9IHBhcmVudC4kcGFyZW50O1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXJlbnRWaWV3KSB7XG4gICAgICAgICAgLy8gcmVnaXN0ZXIgc2VsZiBhcyBhIGNoaWxkIG9mIHRoZSBwYXJlbnQgdmlldyxcbiAgICAgICAgICAvLyBpbnN0ZWFkIG9mIGFjdGl2YXRpbmcgbm93LiBUaGlzIGlzIHNvIHRoYXQgdGhlXG4gICAgICAgICAgLy8gY2hpbGQncyBhY3RpdmF0ZSBob29rIGlzIGNhbGxlZCBhZnRlciB0aGVcbiAgICAgICAgICAvLyBwYXJlbnQncyBoYXMgcmVzb2x2ZWQuXG4gICAgICAgICAgdGhpcy5wYXJlbnRWaWV3ID0gcGFyZW50VmlldztcbiAgICAgICAgICBwYXJlbnRWaWV3LmNoaWxkVmlldyA9IHRoaXM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdGhpcyBpcyB0aGUgcm9vdCB2aWV3IVxuICAgICAgICAgIHZhciByb3V0ZXIgPSByb3V0ZS5yb3V0ZXI7XG4gICAgICAgICAgcm91dGVyLl9yb290VmlldyA9IHRoaXM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBoYW5kbGUgbGF0ZS1yZW5kZXJlZCB2aWV3XG4gICAgICAgIC8vIHR3byBwb3NzaWJpbGl0aWVzOlxuICAgICAgICAvLyAxLiByb290IHZpZXcgcmVuZGVyZWQgYWZ0ZXIgdHJhbnNpdGlvbiBoYXMgYmVlblxuICAgICAgICAvLyAgICB2YWxpZGF0ZWQ7XG4gICAgICAgIC8vIDIuIGNoaWxkIHZpZXcgcmVuZGVyZWQgYWZ0ZXIgcGFyZW50IHZpZXcgaGFzIGJlZW5cbiAgICAgICAgLy8gICAgYWN0aXZhdGVkLlxuICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IHJvdXRlLnJvdXRlci5fY3VycmVudFRyYW5zaXRpb247XG4gICAgICAgIGlmICghcGFyZW50VmlldyAmJiB0cmFuc2l0aW9uLmRvbmUgfHwgcGFyZW50VmlldyAmJiBwYXJlbnRWaWV3LmFjdGl2YXRlZCkge1xuICAgICAgICAgIHZhciBkZXB0aCA9IHBhcmVudFZpZXcgPyBwYXJlbnRWaWV3LmRlcHRoICsgMSA6IDA7XG4gICAgICAgICAgYWN0aXZhdGUodGhpcywgdHJhbnNpdGlvbiwgZGVwdGgpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgICAgaWYgKHRoaXMucGFyZW50Vmlldykge1xuICAgICAgICAgIHRoaXMucGFyZW50Vmlldy5jaGlsZFZpZXcgPSBudWxsO1xuICAgICAgICB9XG4gICAgICAgIGNvbXBvbmVudERlZi51bmJpbmQuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFZ1ZS5lbGVtZW50RGlyZWN0aXZlKCdyb3V0ZXItdmlldycsIHZpZXdEZWYpO1xuICB9XG5cbiAgdmFyIHRyYWlsaW5nU2xhc2hSRSA9IC9cXC8kLztcbiAgdmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuICB2YXIgcXVlcnlTdHJpbmdSRSA9IC9cXD8uKiQvO1xuXG4gIC8vIGluc3RhbGwgdi1saW5rLCB3aGljaCBwcm92aWRlcyBuYXZpZ2F0aW9uIHN1cHBvcnQgZm9yXG4gIC8vIEhUTUw1IGhpc3RvcnkgbW9kZVxuICBmdW5jdGlvbiBMaW5rIChWdWUpIHtcbiAgICB2YXIgX1Z1ZSR1dGlsID0gVnVlLnV0aWw7XG4gICAgdmFyIF9iaW5kID0gX1Z1ZSR1dGlsLmJpbmQ7XG4gICAgdmFyIGlzT2JqZWN0ID0gX1Z1ZSR1dGlsLmlzT2JqZWN0O1xuICAgIHZhciBhZGRDbGFzcyA9IF9WdWUkdXRpbC5hZGRDbGFzcztcbiAgICB2YXIgcmVtb3ZlQ2xhc3MgPSBfVnVlJHV0aWwucmVtb3ZlQ2xhc3M7XG5cbiAgICB2YXIgb25Qcmlvcml0eSA9IFZ1ZS5kaXJlY3RpdmUoJ29uJykucHJpb3JpdHk7XG4gICAgdmFyIExJTktfVVBEQVRFID0gJ19fdnVlLXJvdXRlci1saW5rLXVwZGF0ZV9fJztcblxuICAgIHZhciBhY3RpdmVJZCA9IDA7XG5cbiAgICBWdWUuZGlyZWN0aXZlKCdsaW5rLWFjdGl2ZScsIHtcbiAgICAgIHByaW9yaXR5OiA5OTk5LFxuICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgICB2YXIgaWQgPSBTdHJpbmcoYWN0aXZlSWQrKyk7XG4gICAgICAgIC8vIGNvbGxlY3Qgdi1saW5rcyBjb250YWluZWQgd2l0aGluIHRoaXMgZWxlbWVudC5cbiAgICAgICAgLy8gd2UgbmVlZCBkbyB0aGlzIGhlcmUgYmVmb3JlIHRoZSBwYXJlbnQtY2hpbGQgcmVsYXRpb25zaGlwXG4gICAgICAgIC8vIGdldHMgbWVzc2VkIHVwIGJ5IHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGlmLCBmb3IsIGNvbXBvbmVudHMpXG4gICAgICAgIHZhciBjaGlsZExpbmtzID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCdbdi1saW5rXScpO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkTGlua3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgdmFyIGxpbmsgPSBjaGlsZExpbmtzW2ldO1xuICAgICAgICAgIHZhciBleGlzdGluZ0lkID0gbGluay5nZXRBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuICAgICAgICAgIHZhciB2YWx1ZSA9IGV4aXN0aW5nSWQgPyBleGlzdGluZ0lkICsgJywnICsgaWQgOiBpZDtcbiAgICAgICAgICAvLyBsZWF2ZSBhIG1hcmsgb24gdGhlIGxpbmsgZWxlbWVudCB3aGljaCBjYW4gYmUgcGVyc2lzdGVkXG4gICAgICAgICAgLy8gdGhyb3VnaCBmcmFnbWVudCBjbG9uZXMuXG4gICAgICAgICAgbGluay5zZXRBdHRyaWJ1dGUoTElOS19VUERBVEUsIHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnZtLiRvbihMSU5LX1VQREFURSwgdGhpcy5jYiA9IGZ1bmN0aW9uIChsaW5rLCBwYXRoKSB7XG4gICAgICAgICAgaWYgKGxpbmsuYWN0aXZlSWRzLmluZGV4T2YoaWQpID4gLTEpIHtcbiAgICAgICAgICAgIGxpbmsudXBkYXRlQ2xhc3NlcyhwYXRoLCBfdGhpcy5lbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgICAgdGhpcy52bS4kb2ZmKExJTktfVVBEQVRFLCB0aGlzLmNiKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIFZ1ZS5kaXJlY3RpdmUoJ2xpbmsnLCB7XG4gICAgICBwcmlvcml0eTogb25Qcmlvcml0eSAtIDIsXG5cbiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICAgIHZhciB2bSA9IHRoaXMudm07XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAoIXZtLiRyb3V0ZSkge1xuICAgICAgICAgIHdhcm4kMSgndi1saW5rIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIGEgcm91dGVyLWVuYWJsZWQgYXBwLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJvdXRlciA9IHZtLiRyb3V0ZS5yb3V0ZXI7XG4gICAgICAgIC8vIHVwZGF0ZSB0aGluZ3Mgd2hlbiB0aGUgcm91dGUgY2hhbmdlc1xuICAgICAgICB0aGlzLnVud2F0Y2ggPSB2bS4kd2F0Y2goJyRyb3V0ZScsIF9iaW5kKHRoaXMub25Sb3V0ZVVwZGF0ZSwgdGhpcykpO1xuICAgICAgICAvLyBjaGVjayB2LWxpbmstYWN0aXZlIGlkc1xuICAgICAgICB2YXIgYWN0aXZlSWRzID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuICAgICAgICBpZiAoYWN0aXZlSWRzKSB7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuICAgICAgICAgIHRoaXMuYWN0aXZlSWRzID0gYWN0aXZlSWRzLnNwbGl0KCcsJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbm8gbmVlZCB0byBoYW5kbGUgY2xpY2sgaWYgbGluayBleHBlY3RzIHRvIGJlIG9wZW5lZFxuICAgICAgICAvLyBpbiBhIG5ldyB3aW5kb3cvdGFiLlxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0EnICYmIHRoaXMuZWwuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKSA9PT0gJ19ibGFuaycpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gaGFuZGxlIGNsaWNrXG4gICAgICAgIHRoaXMuaGFuZGxlciA9IF9iaW5kKHRoaXMub25DbGljaywgdGhpcyk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmhhbmRsZXIpO1xuICAgICAgfSxcblxuICAgICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodGFyZ2V0KSB7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuICAgICAgICBpZiAoaXNPYmplY3QodGFyZ2V0KSkge1xuICAgICAgICAgIHRoaXMuYXBwZW5kID0gdGFyZ2V0LmFwcGVuZDtcbiAgICAgICAgICB0aGlzLmV4YWN0ID0gdGFyZ2V0LmV4YWN0O1xuICAgICAgICAgIHRoaXMucHJldkFjdGl2ZUNsYXNzID0gdGhpcy5hY3RpdmVDbGFzcztcbiAgICAgICAgICB0aGlzLmFjdGl2ZUNsYXNzID0gdGFyZ2V0LmFjdGl2ZUNsYXNzO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub25Sb3V0ZVVwZGF0ZSh0aGlzLnZtLiRyb3V0ZSk7XG4gICAgICB9LFxuXG4gICAgICBvbkNsaWNrOiBmdW5jdGlvbiBvbkNsaWNrKGUpIHtcbiAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2l0aCBjb250cm9sIGtleXNcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChlLm1ldGFLZXkgfHwgZS5jdHJsS2V5IHx8IGUuc2hpZnRLZXkpIHJldHVybjtcbiAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgd2hlbiBwcmV2ZW50RGVmYXVsdCBjYWxsZWRcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChlLmRlZmF1bHRQcmV2ZW50ZWQpIHJldHVybjtcbiAgICAgICAgLy8gZG9uJ3QgcmVkaXJlY3Qgb24gcmlnaHQgY2xpY2tcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChlLmJ1dHRvbiAhPT0gMCkgcmV0dXJuO1xuXG4gICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldDtcbiAgICAgICAgaWYgKHRhcmdldCkge1xuICAgICAgICAgIC8vIHYtbGluayB3aXRoIGV4cHJlc3Npb24sIGp1c3QgZ29cbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5yb3V0ZXIuZ28odGFyZ2V0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBubyBleHByZXNzaW9uLCBkZWxlZ2F0ZSBmb3IgYW4gPGE+IGluc2lkZVxuICAgICAgICAgIHZhciBlbCA9IGUudGFyZ2V0O1xuICAgICAgICAgIHdoaWxlIChlbC50YWdOYW1lICE9PSAnQScgJiYgZWwgIT09IHRoaXMuZWwpIHtcbiAgICAgICAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKGVsLnRhZ05hbWUgPT09ICdBJyAmJiBzYW1lT3JpZ2luKGVsKSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIHBhdGggPSBlbC5wYXRobmFtZTtcbiAgICAgICAgICAgIGlmICh0aGlzLnJvdXRlci5oaXN0b3J5LnJvb3QpIHtcbiAgICAgICAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZSh0aGlzLnJvdXRlci5oaXN0b3J5LnJvb3RSRSwgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5yb3V0ZXIuZ28oe1xuICAgICAgICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICAgICAgICByZXBsYWNlOiB0YXJnZXQgJiYgdGFyZ2V0LnJlcGxhY2UsXG4gICAgICAgICAgICAgIGFwcGVuZDogdGFyZ2V0ICYmIHRhcmdldC5hcHBlbmRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgb25Sb3V0ZVVwZGF0ZTogZnVuY3Rpb24gb25Sb3V0ZVVwZGF0ZShyb3V0ZSkge1xuICAgICAgICAvLyByb3V0ZXIuc3RyaW5naWZ5UGF0aCBpcyBkZXBlbmRlbnQgb24gY3VycmVudCByb3V0ZVxuICAgICAgICAvLyBhbmQgbmVlZHMgdG8gYmUgY2FsbGVkIGFnYWluIHdoZW52ZXIgcm91dGUgY2hhbmdlcy5cbiAgICAgICAgdmFyIG5ld1BhdGggPSB0aGlzLnJvdXRlci5zdHJpbmdpZnlQYXRoKHRoaXMudGFyZ2V0KTtcbiAgICAgICAgaWYgKHRoaXMucGF0aCAhPT0gbmV3UGF0aCkge1xuICAgICAgICAgIHRoaXMucGF0aCA9IG5ld1BhdGg7XG4gICAgICAgICAgdGhpcy51cGRhdGVBY3RpdmVNYXRjaCgpO1xuICAgICAgICAgIHRoaXMudXBkYXRlSHJlZigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUlkcykge1xuICAgICAgICAgIHRoaXMudm0uJGVtaXQoTElOS19VUERBVEUsIHRoaXMsIHJvdXRlLnBhdGgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMudXBkYXRlQ2xhc3Nlcyhyb3V0ZS5wYXRoLCB0aGlzLmVsKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgdXBkYXRlQWN0aXZlTWF0Y2g6IGZ1bmN0aW9uIHVwZGF0ZUFjdGl2ZU1hdGNoKCkge1xuICAgICAgICB0aGlzLmFjdGl2ZVJFID0gdGhpcy5wYXRoICYmICF0aGlzLmV4YWN0ID8gbmV3IFJlZ0V4cCgnXicgKyB0aGlzLnBhdGgucmVwbGFjZSgvXFwvJC8sICcnKS5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKS5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKSArICcoXFxcXC98JCknKSA6IG51bGw7XG4gICAgICB9LFxuXG4gICAgICB1cGRhdGVIcmVmOiBmdW5jdGlvbiB1cGRhdGVIcmVmKCkge1xuICAgICAgICBpZiAodGhpcy5lbC50YWdOYW1lICE9PSAnQScpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHBhdGggPSB0aGlzLnBhdGg7XG4gICAgICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlcjtcbiAgICAgICAgdmFyIGlzQWJzb2x1dGUgPSBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nO1xuICAgICAgICAvLyBkbyBub3QgZm9ybWF0IG5vbi1oYXNoIHJlbGF0aXZlIHBhdGhzXG4gICAgICAgIHZhciBocmVmID0gcGF0aCAmJiAocm91dGVyLm1vZGUgPT09ICdoYXNoJyB8fCBpc0Fic29sdXRlKSA/IHJvdXRlci5oaXN0b3J5LmZvcm1hdFBhdGgocGF0aCwgdGhpcy5hcHBlbmQpIDogcGF0aDtcbiAgICAgICAgaWYgKGhyZWYpIHtcbiAgICAgICAgICB0aGlzLmVsLmhyZWYgPSBocmVmO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdocmVmJyk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHVwZGF0ZUNsYXNzZXM6IGZ1bmN0aW9uIHVwZGF0ZUNsYXNzZXMocGF0aCwgZWwpIHtcbiAgICAgICAgdmFyIGFjdGl2ZUNsYXNzID0gdGhpcy5hY3RpdmVDbGFzcyB8fCB0aGlzLnJvdXRlci5fbGlua0FjdGl2ZUNsYXNzO1xuICAgICAgICAvLyBjbGVhciBvbGQgY2xhc3NcbiAgICAgICAgaWYgKHRoaXMucHJldkFjdGl2ZUNsYXNzICYmIHRoaXMucHJldkFjdGl2ZUNsYXNzICE9PSBhY3RpdmVDbGFzcykge1xuICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIHRoaXMucHJldkFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmVtb3ZlIHF1ZXJ5IHN0cmluZyBiZWZvcmUgbWF0Y2hpbmdcbiAgICAgICAgdmFyIGRlc3QgPSB0aGlzLnBhdGgucmVwbGFjZShxdWVyeVN0cmluZ1JFLCAnJyk7XG4gICAgICAgIHBhdGggPSBwYXRoLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpO1xuICAgICAgICAvLyBhZGQgbmV3IGNsYXNzXG4gICAgICAgIGlmICh0aGlzLmV4YWN0KSB7XG4gICAgICAgICAgaWYgKGRlc3QgPT09IHBhdGggfHxcbiAgICAgICAgICAvLyBhbHNvIGFsbG93IGFkZGl0aW9uYWwgdHJhaWxpbmcgc2xhc2hcbiAgICAgICAgICBkZXN0LmNoYXJBdChkZXN0Lmxlbmd0aCAtIDEpICE9PSAnLycgJiYgZGVzdCA9PT0gcGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwgJycpKSB7XG4gICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgYWRkQ2xhc3MpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy5hY3RpdmVSRSAmJiB0aGlzLmFjdGl2ZVJFLnRlc3QocGF0aCkpIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCBhZGRDbGFzcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlcik7XG4gICAgICAgIHRoaXMudW53YXRjaCAmJiB0aGlzLnVud2F0Y2goKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHNhbWVPcmlnaW4obGluaykge1xuICAgICAgcmV0dXJuIGxpbmsucHJvdG9jb2wgPT09IGxvY2F0aW9uLnByb3RvY29sICYmIGxpbmsuaG9zdG5hbWUgPT09IGxvY2F0aW9uLmhvc3RuYW1lICYmIGxpbmsucG9ydCA9PT0gbG9jYXRpb24ucG9ydDtcbiAgICB9XG5cbiAgICAvLyB0aGlzIGZ1bmN0aW9uIGlzIGNvcGllZCBmcm9tIHYtYmluZDpjbGFzcyBpbXBsZW1lbnRhdGlvbiB1bnRpbFxuICAgIC8vIHdlIHByb3Blcmx5IGV4cG9zZSBpdC4uLlxuICAgIGZ1bmN0aW9uIHRvZ2dsZUNsYXNzZXMoZWwsIGtleSwgZm4pIHtcbiAgICAgIGtleSA9IGtleS50cmltKCk7XG4gICAgICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcbiAgICAgICAgZm4oZWwsIGtleSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciBrZXlzID0ga2V5LnNwbGl0KC9cXHMrLyk7XG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGZuKGVsLCBrZXlzW2ldKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICB2YXIgaGlzdG9yeUJhY2tlbmRzID0ge1xuICAgIGFic3RyYWN0OiBBYnN0cmFjdEhpc3RvcnksXG4gICAgaGFzaDogSGFzaEhpc3RvcnksXG4gICAgaHRtbDU6IEhUTUw1SGlzdG9yeVxuICB9O1xuXG4gIC8vIGxhdGUgYmluZCBkdXJpbmcgaW5zdGFsbFxuICB2YXIgVnVlID0gdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBSb3V0ZXIgY29uc3RydWN0b3JcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKi9cblxuICB2YXIgUm91dGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBSb3V0ZXIoKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICB2YXIgX3JlZiA9IGFyZ3VtZW50cy5sZW5ndGggPD0gMCB8fCBhcmd1bWVudHNbMF0gPT09IHVuZGVmaW5lZCA/IHt9IDogYXJndW1lbnRzWzBdO1xuXG4gICAgICB2YXIgX3JlZiRoYXNoYmFuZyA9IF9yZWYuaGFzaGJhbmc7XG4gICAgICB2YXIgaGFzaGJhbmcgPSBfcmVmJGhhc2hiYW5nID09PSB1bmRlZmluZWQgPyB0cnVlIDogX3JlZiRoYXNoYmFuZztcbiAgICAgIHZhciBfcmVmJGFic3RyYWN0ID0gX3JlZi5hYnN0cmFjdDtcbiAgICAgIHZhciBhYnN0cmFjdCA9IF9yZWYkYWJzdHJhY3QgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRhYnN0cmFjdDtcbiAgICAgIHZhciBfcmVmJGhpc3RvcnkgPSBfcmVmLmhpc3Rvcnk7XG4gICAgICB2YXIgaGlzdG9yeSA9IF9yZWYkaGlzdG9yeSA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGhpc3Rvcnk7XG4gICAgICB2YXIgX3JlZiRzYXZlU2Nyb2xsUG9zaXRpb24gPSBfcmVmLnNhdmVTY3JvbGxQb3NpdGlvbjtcbiAgICAgIHZhciBzYXZlU2Nyb2xsUG9zaXRpb24gPSBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbjtcbiAgICAgIHZhciBfcmVmJHRyYW5zaXRpb25PbkxvYWQgPSBfcmVmLnRyYW5zaXRpb25PbkxvYWQ7XG4gICAgICB2YXIgdHJhbnNpdGlvbk9uTG9hZCA9IF9yZWYkdHJhbnNpdGlvbk9uTG9hZCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHRyYW5zaXRpb25PbkxvYWQ7XG4gICAgICB2YXIgX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9IF9yZWYuc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG4gICAgICB2YXIgc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPSBfcmVmJHN1cHByZXNzVHJhbnNpdGlvbkVycm9yID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG4gICAgICB2YXIgX3JlZiRyb290ID0gX3JlZi5yb290O1xuICAgICAgdmFyIHJvb3QgPSBfcmVmJHJvb3QgPT09IHVuZGVmaW5lZCA/IG51bGwgOiBfcmVmJHJvb3Q7XG4gICAgICB2YXIgX3JlZiRsaW5rQWN0aXZlQ2xhc3MgPSBfcmVmLmxpbmtBY3RpdmVDbGFzcztcbiAgICAgIHZhciBsaW5rQWN0aXZlQ2xhc3MgPSBfcmVmJGxpbmtBY3RpdmVDbGFzcyA9PT0gdW5kZWZpbmVkID8gJ3YtbGluay1hY3RpdmUnIDogX3JlZiRsaW5rQWN0aXZlQ2xhc3M7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGVyKTtcblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoIVJvdXRlci5pbnN0YWxsZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdQbGVhc2UgaW5zdGFsbCB0aGUgUm91dGVyIHdpdGggVnVlLnVzZSgpIGJlZm9yZSAnICsgJ2NyZWF0aW5nIGFuIGluc3RhbmNlLicpO1xuICAgICAgfVxuXG4gICAgICAvLyBWdWUgaW5zdGFuY2VzXG4gICAgICB0aGlzLmFwcCA9IG51bGw7XG4gICAgICB0aGlzLl9jaGlsZHJlbiA9IFtdO1xuXG4gICAgICAvLyByb3V0ZSByZWNvZ25pemVyXG4gICAgICB0aGlzLl9yZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXplcigpO1xuICAgICAgdGhpcy5fZ3VhcmRSZWNvZ25pemVyID0gbmV3IFJvdXRlUmVjb2duaXplcigpO1xuXG4gICAgICAvLyBzdGF0ZVxuICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5fc3RhcnRDYiA9IG51bGw7XG4gICAgICB0aGlzLl9jdXJyZW50Um91dGUgPSB7fTtcbiAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMuX3ByZXZpb3VzVHJhbnNpdGlvbiA9IG51bGw7XG4gICAgICB0aGlzLl9ub3RGb3VuZEhhbmRsZXIgPSBudWxsO1xuICAgICAgdGhpcy5fbm90Rm91bmRSZWRpcmVjdCA9IG51bGw7XG4gICAgICB0aGlzLl9iZWZvcmVFYWNoSG9va3MgPSBbXTtcbiAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzID0gW107XG5cbiAgICAgIC8vIHRyaWdnZXIgdHJhbnNpdGlvbiBvbiBpbml0aWFsIHJlbmRlcj9cbiAgICAgIHRoaXMuX3JlbmRlcmVkID0gZmFsc2U7XG4gICAgICB0aGlzLl90cmFuc2l0aW9uT25Mb2FkID0gdHJhbnNpdGlvbk9uTG9hZDtcblxuICAgICAgLy8gaGlzdG9yeSBtb2RlXG4gICAgICB0aGlzLl9yb290ID0gcm9vdDtcbiAgICAgIHRoaXMuX2Fic3RyYWN0ID0gYWJzdHJhY3Q7XG4gICAgICB0aGlzLl9oYXNoYmFuZyA9IGhhc2hiYW5nO1xuXG4gICAgICAvLyBjaGVjayBpZiBIVE1MNSBoaXN0b3J5IGlzIGF2YWlsYWJsZVxuICAgICAgdmFyIGhhc1B1c2hTdGF0ZSA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5oaXN0b3J5ICYmIHdpbmRvdy5oaXN0b3J5LnB1c2hTdGF0ZTtcbiAgICAgIHRoaXMuX2hpc3RvcnkgPSBoaXN0b3J5ICYmIGhhc1B1c2hTdGF0ZTtcbiAgICAgIHRoaXMuX2hpc3RvcnlGYWxsYmFjayA9IGhpc3RvcnkgJiYgIWhhc1B1c2hTdGF0ZTtcblxuICAgICAgLy8gY3JlYXRlIGhpc3Rvcnkgb2JqZWN0XG4gICAgICB2YXIgaW5Ccm93c2VyID0gVnVlLnV0aWwuaW5Ccm93c2VyO1xuICAgICAgdGhpcy5tb2RlID0gIWluQnJvd3NlciB8fCB0aGlzLl9hYnN0cmFjdCA/ICdhYnN0cmFjdCcgOiB0aGlzLl9oaXN0b3J5ID8gJ2h0bWw1JyA6ICdoYXNoJztcblxuICAgICAgdmFyIEhpc3RvcnkgPSBoaXN0b3J5QmFja2VuZHNbdGhpcy5tb2RlXTtcbiAgICAgIHRoaXMuaGlzdG9yeSA9IG5ldyBIaXN0b3J5KHtcbiAgICAgICAgcm9vdDogcm9vdCxcbiAgICAgICAgaGFzaGJhbmc6IHRoaXMuX2hhc2hiYW5nLFxuICAgICAgICBvbkNoYW5nZTogZnVuY3Rpb24gb25DaGFuZ2UocGF0aCwgc3RhdGUsIGFuY2hvcikge1xuICAgICAgICAgIF90aGlzLl9tYXRjaChwYXRoLCBzdGF0ZSwgYW5jaG9yKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIC8vIG90aGVyIG9wdGlvbnNcbiAgICAgIHRoaXMuX3NhdmVTY3JvbGxQb3NpdGlvbiA9IHNhdmVTY3JvbGxQb3NpdGlvbjtcbiAgICAgIHRoaXMuX2xpbmtBY3RpdmVDbGFzcyA9IGxpbmtBY3RpdmVDbGFzcztcbiAgICAgIHRoaXMuX3N1cHByZXNzID0gc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWxsb3cgZGlyZWN0bHkgcGFzc2luZyBjb21wb25lbnRzIHRvIGEgcm91dGVcbiAgICAgKiBkZWZpbml0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgICAqL1xuXG4gICAgLy8gQVBJID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4gICAgLyoqXG4gICAgKiBSZWdpc3RlciBhIG1hcCBvZiB0b3AtbGV2ZWwgcGF0aHMuXG4gICAgKlxuICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLm1hcCA9IGZ1bmN0aW9uIG1hcChfbWFwKSB7XG4gICAgICBmb3IgKHZhciByb3V0ZSBpbiBfbWFwKSB7XG4gICAgICAgIHRoaXMub24ocm91dGUsIF9tYXBbcm91dGVdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBSZWdpc3RlciBhIHNpbmdsZSByb290LWxldmVsIHBhdGhcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByb290UGF0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG4gICAgICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gY29tcG9uZW50XG4gICAgICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW3N1YlJvdXRlc11cbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2ZvcmNlUmVmcmVzaF1cbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtiZWZvcmVdXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbYWZ0ZXJdXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gb24ocm9vdFBhdGgsIGhhbmRsZXIpIHtcbiAgICAgIGlmIChyb290UGF0aCA9PT0gJyonKSB7XG4gICAgICAgIHRoaXMuX25vdEZvdW5kKGhhbmRsZXIpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWRkUm91dGUocm9vdFBhdGgsIGhhbmRsZXIsIFtdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgcmVkaXJlY3RzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5yZWRpcmVjdCA9IGZ1bmN0aW9uIHJlZGlyZWN0KG1hcCkge1xuICAgICAgZm9yICh2YXIgcGF0aCBpbiBtYXApIHtcbiAgICAgICAgdGhpcy5fYWRkUmVkaXJlY3QocGF0aCwgbWFwW3BhdGhdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgYWxpYXNlcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXBcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuYWxpYXMgPSBmdW5jdGlvbiBhbGlhcyhtYXApIHtcbiAgICAgIGZvciAodmFyIHBhdGggaW4gbWFwKSB7XG4gICAgICAgIHRoaXMuX2FkZEFsaWFzKHBhdGgsIG1hcFtwYXRoXSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0IGdsb2JhbCBiZWZvcmUgaG9vay5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLmJlZm9yZUVhY2ggPSBmdW5jdGlvbiBiZWZvcmVFYWNoKGZuKSB7XG4gICAgICB0aGlzLl9iZWZvcmVFYWNoSG9va3MucHVzaChmbik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0IGdsb2JhbCBhZnRlciBob29rLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuYWZ0ZXJFYWNoID0gZnVuY3Rpb24gYWZ0ZXJFYWNoKGZuKSB7XG4gICAgICB0aGlzLl9hZnRlckVhY2hIb29rcy5wdXNoKGZuKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBOYXZpZ2F0ZSB0byBhIGdpdmVuIHBhdGguXG4gICAgICogVGhlIHBhdGggY2FuIGJlIGFuIG9iamVjdCBkZXNjcmliaW5nIGEgbmFtZWQgcGF0aCBpblxuICAgICAqIHRoZSBmb3JtYXQgb2YgeyBuYW1lOiAnLi4uJywgcGFyYW1zOiB7fSwgcXVlcnk6IHt9fVxuICAgICAqIFRoZSBwYXRoIGlzIGFzc3VtZWQgdG8gYmUgYWxyZWFkeSBkZWNvZGVkLCBhbmQgd2lsbFxuICAgICAqIGJlIHJlc29sdmVkIGFnYWluc3Qgcm9vdCAoaWYgcHJvdmlkZWQpXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IHBhdGhcbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IFtyZXBsYWNlXVxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgpIHtcbiAgICAgIHZhciByZXBsYWNlID0gZmFsc2U7XG4gICAgICB2YXIgYXBwZW5kID0gZmFsc2U7XG4gICAgICBpZiAoVnVlLnV0aWwuaXNPYmplY3QocGF0aCkpIHtcbiAgICAgICAgcmVwbGFjZSA9IHBhdGgucmVwbGFjZTtcbiAgICAgICAgYXBwZW5kID0gcGF0aC5hcHBlbmQ7XG4gICAgICB9XG4gICAgICBwYXRoID0gdGhpcy5zdHJpbmdpZnlQYXRoKHBhdGgpO1xuICAgICAgaWYgKHBhdGgpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5LmdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNob3J0IGhhbmQgZm9yIHJlcGxhY2luZyBjdXJyZW50IHBhdGhcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnJlcGxhY2UgPSBmdW5jdGlvbiByZXBsYWNlKHBhdGgpIHtcbiAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgcGF0aCA9IHsgcGF0aDogcGF0aCB9O1xuICAgICAgfVxuICAgICAgcGF0aC5yZXBsYWNlID0gdHJ1ZTtcbiAgICAgIHRoaXMuZ28ocGF0aCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN0YXJ0IHRoZSByb3V0ZXIuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1Z1ZUNvbnN0cnVjdG9yfSBBcHBcbiAgICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBjb250YWluZXJcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoQXBwLCBjb250YWluZXIsIGNiKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICh0aGlzLl9zdGFydGVkKSB7XG4gICAgICAgIHdhcm4kMSgnYWxyZWFkeSBzdGFydGVkLicpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB0aGlzLl9zdGFydGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX3N0YXJ0Q2IgPSBjYjtcbiAgICAgIGlmICghdGhpcy5hcHApIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmICghQXBwIHx8ICFjb250YWluZXIpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3RhcnQgdnVlLXJvdXRlciB3aXRoIGEgY29tcG9uZW50IGFuZCBhICcgKyAncm9vdCBjb250YWluZXIuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChBcHAgaW5zdGFuY2VvZiBWdWUpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3RhcnQgdnVlLXJvdXRlciB3aXRoIGEgY29tcG9uZW50LCBub3QgYSAnICsgJ1Z1ZSBpbnN0YW5jZS4nKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9hcHBDb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICAgIHZhciBDdG9yID0gdGhpcy5fYXBwQ29uc3RydWN0b3IgPSB0eXBlb2YgQXBwID09PSAnZnVuY3Rpb24nID8gQXBwIDogVnVlLmV4dGVuZChBcHApO1xuICAgICAgICAvLyBnaXZlIGl0IGEgbmFtZSBmb3IgYmV0dGVyIGRlYnVnZ2luZ1xuICAgICAgICBDdG9yLm9wdGlvbnMubmFtZSA9IEN0b3Iub3B0aW9ucy5uYW1lIHx8ICdSb3V0ZXJBcHAnO1xuICAgICAgfVxuXG4gICAgICAvLyBoYW5kbGUgaGlzdG9yeSBmYWxsYmFjayBpbiBicm93c2VycyB0aGF0IGRvIG5vdFxuICAgICAgLy8gc3VwcG9ydCBIVE1MNSBoaXN0b3J5IEFQSVxuICAgICAgaWYgKHRoaXMuX2hpc3RvcnlGYWxsYmFjaykge1xuICAgICAgICB2YXIgX2xvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuICAgICAgICB2YXIgX2hpc3RvcnkgPSBuZXcgSFRNTDVIaXN0b3J5KHsgcm9vdDogdGhpcy5fcm9vdCB9KTtcbiAgICAgICAgdmFyIHBhdGggPSBfaGlzdG9yeS5yb290ID8gX2xvY2F0aW9uLnBhdGhuYW1lLnJlcGxhY2UoX2hpc3Rvcnkucm9vdFJFLCAnJykgOiBfbG9jYXRpb24ucGF0aG5hbWU7XG4gICAgICAgIGlmIChwYXRoICYmIHBhdGggIT09ICcvJykge1xuICAgICAgICAgIF9sb2NhdGlvbi5hc3NpZ24oKF9oaXN0b3J5LnJvb3QgfHwgJycpICsgJy8nICsgdGhpcy5oaXN0b3J5LmZvcm1hdFBhdGgocGF0aCkgKyBfbG9jYXRpb24uc2VhcmNoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5oaXN0b3J5LnN0YXJ0KCk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFN0b3AgbGlzdGVuaW5nIHRvIHJvdXRlIGNoYW5nZXMuXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuICAgICAgdGhpcy5oaXN0b3J5LnN0b3AoKTtcbiAgICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTm9ybWFsaXplIG5hbWVkIHJvdXRlIG9iamVjdCAvIHN0cmluZyBwYXRocyBpbnRvXG4gICAgICogYSBzdHJpbmcuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd8TnVtYmVyfSBwYXRoXG4gICAgICogQHJldHVybiB7U3RyaW5nfVxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5zdHJpbmdpZnlQYXRoID0gZnVuY3Rpb24gc3RyaW5naWZ5UGF0aChwYXRoKSB7XG4gICAgICB2YXIgZ2VuZXJhdGVkUGF0aCA9ICcnO1xuICAgICAgaWYgKHBhdGggJiYgdHlwZW9mIHBhdGggPT09ICdvYmplY3QnKSB7XG4gICAgICAgIGlmIChwYXRoLm5hbWUpIHtcbiAgICAgICAgICB2YXIgZXh0ZW5kID0gVnVlLnV0aWwuZXh0ZW5kO1xuICAgICAgICAgIHZhciBjdXJyZW50UGFyYW1zID0gdGhpcy5fY3VycmVudFRyYW5zaXRpb24gJiYgdGhpcy5fY3VycmVudFRyYW5zaXRpb24udG8ucGFyYW1zO1xuICAgICAgICAgIHZhciB0YXJnZXRQYXJhbXMgPSBwYXRoLnBhcmFtcyB8fCB7fTtcbiAgICAgICAgICB2YXIgcGFyYW1zID0gY3VycmVudFBhcmFtcyA/IGV4dGVuZChleHRlbmQoe30sIGN1cnJlbnRQYXJhbXMpLCB0YXJnZXRQYXJhbXMpIDogdGFyZ2V0UGFyYW1zO1xuICAgICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkodGhpcy5fcmVjb2duaXplci5nZW5lcmF0ZShwYXRoLm5hbWUsIHBhcmFtcykpO1xuICAgICAgICB9IGVsc2UgaWYgKHBhdGgucGF0aCkge1xuICAgICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkocGF0aC5wYXRoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocGF0aC5xdWVyeSkge1xuICAgICAgICAgIC8vIG5vdGU6IHRoZSBnZW5lcmF0ZWQgcXVlcnkgc3RyaW5nIGlzIHByZS1VUkwtZW5jb2RlZCBieSB0aGUgcmVjb2duaXplclxuICAgICAgICAgIHZhciBxdWVyeSA9IHRoaXMuX3JlY29nbml6ZXIuZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXRoLnF1ZXJ5KTtcbiAgICAgICAgICBpZiAoZ2VuZXJhdGVkUGF0aC5pbmRleE9mKCc/JykgPiAtMSkge1xuICAgICAgICAgICAgZ2VuZXJhdGVkUGF0aCArPSAnJicgKyBxdWVyeS5zbGljZSgxKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZ2VuZXJhdGVkUGF0aCArPSBxdWVyeTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkocGF0aCA/IHBhdGggKyAnJyA6ICcnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBnZW5lcmF0ZWRQYXRoO1xuICAgIH07XG5cbiAgICAvLyBJbnRlcm5hbCBtZXRob2RzID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvKipcbiAgICAqIEFkZCBhIHJvdXRlIGNvbnRhaW5pbmcgYSBsaXN0IG9mIHNlZ21lbnRzIHRvIHRoZSBpbnRlcm5hbFxuICAgICogcm91dGUgcmVjb2duaXplci4gV2lsbCBiZSBjYWxsZWQgcmVjdXJzaXZlbHkgdG8gYWRkIGFsbFxuICAgICogcG9zc2libGUgc3ViLXJvdXRlcy5cbiAgICAqXG4gICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICAqIEBwYXJhbSB7QXJyYXl9IHNlZ21lbnRzXG4gICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZFJvdXRlID0gZnVuY3Rpb24gX2FkZFJvdXRlKHBhdGgsIGhhbmRsZXIsIHNlZ21lbnRzKSB7XG4gICAgICBndWFyZENvbXBvbmVudChwYXRoLCBoYW5kbGVyKTtcbiAgICAgIGhhbmRsZXIucGF0aCA9IHBhdGg7XG4gICAgICBoYW5kbGVyLmZ1bGxQYXRoID0gKHNlZ21lbnRzLnJlZHVjZShmdW5jdGlvbiAocGF0aCwgc2VnbWVudCkge1xuICAgICAgICByZXR1cm4gcGF0aCArIHNlZ21lbnQucGF0aDtcbiAgICAgIH0sICcnKSArIHBhdGgpLnJlcGxhY2UoJy8vJywgJy8nKTtcbiAgICAgIHNlZ21lbnRzLnB1c2goe1xuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICBoYW5kbGVyOiBoYW5kbGVyXG4gICAgICB9KTtcbiAgICAgIHRoaXMuX3JlY29nbml6ZXIuYWRkKHNlZ21lbnRzLCB7XG4gICAgICAgIGFzOiBoYW5kbGVyLm5hbWVcbiAgICAgIH0pO1xuICAgICAgLy8gYWRkIHN1YiByb3V0ZXNcbiAgICAgIGlmIChoYW5kbGVyLnN1YlJvdXRlcykge1xuICAgICAgICBmb3IgKHZhciBzdWJQYXRoIGluIGhhbmRsZXIuc3ViUm91dGVzKSB7XG4gICAgICAgICAgLy8gcmVjdXJzaXZlbHkgd2FsayBhbGwgc3ViIHJvdXRlc1xuICAgICAgICAgIHRoaXMuX2FkZFJvdXRlKHN1YlBhdGgsIGhhbmRsZXIuc3ViUm91dGVzW3N1YlBhdGhdLFxuICAgICAgICAgIC8vIHBhc3MgYSBjb3B5IGluIHJlY3Vyc2lvbiB0byBhdm9pZCBtdXRhdGluZ1xuICAgICAgICAgIC8vIGFjcm9zcyBicmFuY2hlc1xuICAgICAgICAgIHNlZ21lbnRzLnNsaWNlKCkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCB0aGUgbm90Rm91bmQgcm91dGUgaGFuZGxlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9ub3RGb3VuZCA9IGZ1bmN0aW9uIF9ub3RGb3VuZChoYW5kbGVyKSB7XG4gICAgICBndWFyZENvbXBvbmVudCgnKicsIGhhbmRsZXIpO1xuICAgICAgdGhpcy5fbm90Rm91bmRIYW5kbGVyID0gW3sgaGFuZGxlcjogaGFuZGxlciB9XTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkIGEgcmVkaXJlY3QgcmVjb3JkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcmVkaXJlY3RQYXRoXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRSZWRpcmVjdCA9IGZ1bmN0aW9uIF9hZGRSZWRpcmVjdChwYXRoLCByZWRpcmVjdFBhdGgpIHtcbiAgICAgIGlmIChwYXRoID09PSAnKicpIHtcbiAgICAgICAgdGhpcy5fbm90Rm91bmRSZWRpcmVjdCA9IHJlZGlyZWN0UGF0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX2FkZEd1YXJkKHBhdGgsIHJlZGlyZWN0UGF0aCwgdGhpcy5yZXBsYWNlKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkIGFuIGFsaWFzIHJlY29yZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzUGF0aFxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fYWRkQWxpYXMgPSBmdW5jdGlvbiBfYWRkQWxpYXMocGF0aCwgYWxpYXNQYXRoKSB7XG4gICAgICB0aGlzLl9hZGRHdWFyZChwYXRoLCBhbGlhc1BhdGgsIHRoaXMuX21hdGNoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQWRkIGEgcGF0aCBndWFyZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IG1hcHBlZFBhdGhcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRHdWFyZCA9IGZ1bmN0aW9uIF9hZGRHdWFyZChwYXRoLCBtYXBwZWRQYXRoLCBfaGFuZGxlcikge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgICAgIHRoaXMuX2d1YXJkUmVjb2duaXplci5hZGQoW3tcbiAgICAgICAgcGF0aDogcGF0aCxcbiAgICAgICAgaGFuZGxlcjogZnVuY3Rpb24gaGFuZGxlcihtYXRjaCwgcXVlcnkpIHtcbiAgICAgICAgICB2YXIgcmVhbFBhdGggPSBtYXBQYXJhbXMobWFwcGVkUGF0aCwgbWF0Y2gucGFyYW1zLCBxdWVyeSk7XG4gICAgICAgICAgX2hhbmRsZXIuY2FsbChfdGhpczIsIHJlYWxQYXRoKTtcbiAgICAgICAgfVxuICAgICAgfV0pO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBDaGVjayBpZiBhIHBhdGggbWF0Y2hlcyBhbnkgcmVkaXJlY3QgcmVjb3Jkcy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgICogQHJldHVybiB7Qm9vbGVhbn0gLSBpZiB0cnVlLCB3aWxsIHNraXAgbm9ybWFsIG1hdGNoLlxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fY2hlY2tHdWFyZCA9IGZ1bmN0aW9uIF9jaGVja0d1YXJkKHBhdGgpIHtcbiAgICAgIHZhciBtYXRjaGVkID0gdGhpcy5fZ3VhcmRSZWNvZ25pemVyLnJlY29nbml6ZShwYXRoLCB0cnVlKTtcbiAgICAgIGlmIChtYXRjaGVkKSB7XG4gICAgICAgIG1hdGNoZWRbMF0uaGFuZGxlcihtYXRjaGVkWzBdLCBtYXRjaGVkLnF1ZXJ5UGFyYW1zKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX25vdEZvdW5kUmVkaXJlY3QpIHtcbiAgICAgICAgbWF0Y2hlZCA9IHRoaXMuX3JlY29nbml6ZXIucmVjb2duaXplKHBhdGgpO1xuICAgICAgICBpZiAoIW1hdGNoZWQpIHtcbiAgICAgICAgICB0aGlzLnJlcGxhY2UodGhpcy5fbm90Rm91bmRSZWRpcmVjdCk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogTWF0Y2ggYSBVUkwgcGF0aCBhbmQgc2V0IHRoZSByb3V0ZSBjb250ZXh0IG9uIHZtLFxuICAgICAqIHRyaWdnZXJpbmcgdmlldyB1cGRhdGVzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YXRlXVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbYW5jaG9yXVxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fbWF0Y2ggPSBmdW5jdGlvbiBfbWF0Y2gocGF0aCwgc3RhdGUsIGFuY2hvcikge1xuICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cbiAgICAgIGlmICh0aGlzLl9jaGVja0d1YXJkKHBhdGgpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdmFyIGN1cnJlbnRSb3V0ZSA9IHRoaXMuX2N1cnJlbnRSb3V0ZTtcbiAgICAgIHZhciBjdXJyZW50VHJhbnNpdGlvbiA9IHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uO1xuXG4gICAgICBpZiAoY3VycmVudFRyYW5zaXRpb24pIHtcbiAgICAgICAgaWYgKGN1cnJlbnRUcmFuc2l0aW9uLnRvLnBhdGggPT09IHBhdGgpIHtcbiAgICAgICAgICAvLyBkbyBub3RoaW5nIGlmIHdlIGhhdmUgYW4gYWN0aXZlIHRyYW5zaXRpb24gZ29pbmcgdG8gdGhlIHNhbWUgcGF0aFxuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50Um91dGUucGF0aCA9PT0gcGF0aCkge1xuICAgICAgICAgIC8vIFdlIGFyZSBnb2luZyB0byB0aGUgc2FtZSBwYXRoLCBidXQgd2UgYWxzbyBoYXZlIGFuIG9uZ29pbmcgYnV0XG4gICAgICAgICAgLy8gbm90LXlldC12YWxpZGF0ZWQgdHJhbnNpdGlvbi4gQWJvcnQgdGhhdCB0cmFuc2l0aW9uIGFuZCByZXNldCB0b1xuICAgICAgICAgIC8vIHByZXYgdHJhbnNpdGlvbi5cbiAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiA9IHRoaXMuX3ByZXZUcmFuc2l0aW9uO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBnb2luZyB0byBhIHRvdGFsbHkgZGlmZmVyZW50IHBhdGguIGFib3J0IG9uZ29pbmcgdHJhbnNpdGlvbi5cbiAgICAgICAgICBjdXJyZW50VHJhbnNpdGlvbi5hYm9ydGVkID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBjb25zdHJ1Y3QgbmV3IHJvdXRlIGFuZCB0cmFuc2l0aW9uIGNvbnRleHRcbiAgICAgIHZhciByb3V0ZSA9IG5ldyBSb3V0ZShwYXRoLCB0aGlzKTtcbiAgICAgIHZhciB0cmFuc2l0aW9uID0gbmV3IFJvdXRlVHJhbnNpdGlvbih0aGlzLCByb3V0ZSwgY3VycmVudFJvdXRlKTtcblxuICAgICAgLy8gY3VycmVudCB0cmFuc2l0aW9uIGlzIHVwZGF0ZWQgcmlnaHQgbm93LlxuICAgICAgLy8gaG93ZXZlciwgY3VycmVudCByb3V0ZSB3aWxsIG9ubHkgYmUgdXBkYXRlZCBhZnRlciB0aGUgdHJhbnNpdGlvbiBoYXNcbiAgICAgIC8vIGJlZW4gdmFsaWRhdGVkLlxuICAgICAgdGhpcy5fcHJldlRyYW5zaXRpb24gPSBjdXJyZW50VHJhbnNpdGlvbjtcbiAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gdHJhbnNpdGlvbjtcblxuICAgICAgaWYgKCF0aGlzLmFwcCkge1xuICAgICAgICAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIC8vIGluaXRpYWwgcmVuZGVyXG4gICAgICAgICAgdmFyIHJvdXRlciA9IF90aGlzMztcbiAgICAgICAgICBfdGhpczMuYXBwID0gbmV3IF90aGlzMy5fYXBwQ29uc3RydWN0b3Ioe1xuICAgICAgICAgICAgZWw6IF90aGlzMy5fYXBwQ29udGFpbmVyLFxuICAgICAgICAgICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcbiAgICAgICAgICAgICAgdGhpcy4kcm91dGVyID0gcm91dGVyO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIF9tZXRhOiB7XG4gICAgICAgICAgICAgICRyb3V0ZTogcm91dGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSkoKTtcbiAgICAgIH1cblxuICAgICAgLy8gY2hlY2sgZ2xvYmFsIGJlZm9yZSBob29rXG4gICAgICB2YXIgYmVmb3JlSG9va3MgPSB0aGlzLl9iZWZvcmVFYWNoSG9va3M7XG4gICAgICB2YXIgc3RhcnRUcmFuc2l0aW9uID0gZnVuY3Rpb24gc3RhcnRUcmFuc2l0aW9uKCkge1xuICAgICAgICB0cmFuc2l0aW9uLnN0YXJ0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczMuX3Bvc3RUcmFuc2l0aW9uKHJvdXRlLCBzdGF0ZSwgYW5jaG9yKTtcbiAgICAgICAgfSk7XG4gICAgICB9O1xuXG4gICAgICBpZiAoYmVmb3JlSG9va3MubGVuZ3RoKSB7XG4gICAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoYmVmb3JlSG9va3MsIGZ1bmN0aW9uIChob29rLCBfLCBuZXh0KSB7XG4gICAgICAgICAgaWYgKHRyYW5zaXRpb24gPT09IF90aGlzMy5fY3VycmVudFRyYW5zaXRpb24pIHtcbiAgICAgICAgICAgIHRyYW5zaXRpb24uY2FsbEhvb2soaG9vaywgbnVsbCwgbmV4dCwge1xuICAgICAgICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHN0YXJ0VHJhbnNpdGlvbik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGFydFRyYW5zaXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLl9yZW5kZXJlZCAmJiB0aGlzLl9zdGFydENiKSB7XG4gICAgICAgIHRoaXMuX3N0YXJ0Q2IuY2FsbChudWxsKTtcbiAgICAgIH1cblxuICAgICAgLy8gSEFDSzpcbiAgICAgIC8vIHNldCByZW5kZXJlZCB0byB0cnVlIGFmdGVyIHRoZSB0cmFuc2l0aW9uIHN0YXJ0LCBzb1xuICAgICAgLy8gdGhhdCBjb21wb25lbnRzIHRoYXQgYXJlIGFjaXR2YXRlZCBzeW5jaHJvbm91c2x5IGtub3dcbiAgICAgIC8vIHdoZXRoZXIgaXQgaXMgdGhlIGluaXRpYWwgcmVuZGVyLlxuICAgICAgdGhpcy5fcmVuZGVyZWQgPSB0cnVlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgY3VycmVudCB0byB0aGUgbmV3IHRyYW5zaXRpb24uXG4gICAgICogVGhpcyBpcyBjYWxsZWQgYnkgdGhlIHRyYW5zaXRpb24gb2JqZWN0IHdoZW4gdGhlXG4gICAgICogdmFsaWRhdGlvbiBvZiBhIHJvdXRlIGhhcyBzdWNjZWVkZWQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX29uVHJhbnNpdGlvblZhbGlkYXRlZCA9IGZ1bmN0aW9uIF9vblRyYW5zaXRpb25WYWxpZGF0ZWQodHJhbnNpdGlvbikge1xuICAgICAgLy8gc2V0IGN1cnJlbnQgcm91dGVcbiAgICAgIHZhciByb3V0ZSA9IHRoaXMuX2N1cnJlbnRSb3V0ZSA9IHRyYW5zaXRpb24udG87XG4gICAgICAvLyB1cGRhdGUgcm91dGUgY29udGV4dCBmb3IgYWxsIGNoaWxkcmVuXG4gICAgICBpZiAodGhpcy5hcHAuJHJvdXRlICE9PSByb3V0ZSkge1xuICAgICAgICB0aGlzLmFwcC4kcm91dGUgPSByb3V0ZTtcbiAgICAgICAgdGhpcy5fY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoY2hpbGQpIHtcbiAgICAgICAgICBjaGlsZC4kcm91dGUgPSByb3V0ZTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICAvLyBjYWxsIGdsb2JhbCBhZnRlciBob29rXG4gICAgICBpZiAodGhpcy5fYWZ0ZXJFYWNoSG9va3MubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzLmZvckVhY2goZnVuY3Rpb24gKGhvb2spIHtcbiAgICAgICAgICByZXR1cm4gaG9vay5jYWxsKG51bGwsIHtcbiAgICAgICAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuICAgICAgICAgICAgZnJvbTogdHJhbnNpdGlvbi5mcm9tXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24uZG9uZSA9IHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBzdHVmZiBhZnRlciB0aGUgdHJhbnNpdGlvbi5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7Um91dGV9IHJvdXRlXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtzdGF0ZV1cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gW2FuY2hvcl1cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX3Bvc3RUcmFuc2l0aW9uID0gZnVuY3Rpb24gX3Bvc3RUcmFuc2l0aW9uKHJvdXRlLCBzdGF0ZSwgYW5jaG9yKSB7XG4gICAgICAvLyBoYW5kbGUgc2Nyb2xsIHBvc2l0aW9uc1xuICAgICAgLy8gc2F2ZWQgc2Nyb2xsIHBvc2l0aW9ucyB0YWtlIHByaW9yaXR5XG4gICAgICAvLyB0aGVuIHdlIGNoZWNrIGlmIHRoZSBwYXRoIGhhcyBhbiBhbmNob3JcbiAgICAgIHZhciBwb3MgPSBzdGF0ZSAmJiBzdGF0ZS5wb3M7XG4gICAgICBpZiAocG9zICYmIHRoaXMuX3NhdmVTY3JvbGxQb3NpdGlvbikge1xuICAgICAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyhwb3MueCwgcG9zLnkpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSBpZiAoYW5jaG9yKSB7XG4gICAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYW5jaG9yLnNsaWNlKDEpKTtcbiAgICAgICAgICBpZiAoZWwpIHtcbiAgICAgICAgICAgIHdpbmRvdy5zY3JvbGxUbyh3aW5kb3cuc2Nyb2xsWCwgZWwub2Zmc2V0VG9wKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gUm91dGVyO1xuICB9KSgpO1xuXG4gIGZ1bmN0aW9uIGd1YXJkQ29tcG9uZW50KHBhdGgsIGhhbmRsZXIpIHtcbiAgICB2YXIgY29tcCA9IGhhbmRsZXIuY29tcG9uZW50O1xuICAgIGlmIChWdWUudXRpbC5pc1BsYWluT2JqZWN0KGNvbXApKSB7XG4gICAgICBjb21wID0gaGFuZGxlci5jb21wb25lbnQgPSBWdWUuZXh0ZW5kKGNvbXApO1xuICAgIH1cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAodHlwZW9mIGNvbXAgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGhhbmRsZXIuY29tcG9uZW50ID0gbnVsbDtcbiAgICAgIHdhcm4kMSgnaW52YWxpZCBjb21wb25lbnQgZm9yIHJvdXRlIFwiJyArIHBhdGggKyAnXCIuJyk7XG4gICAgfVxuICB9XG5cbiAgLyogSW5zdGFsbGF0aW9uICovXG5cbiAgUm91dGVyLmluc3RhbGxlZCA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBJbnN0YWxsYXRpb24gaW50ZXJmYWNlLlxuICAgKiBJbnN0YWxsIHRoZSBuZWNlc3NhcnkgZGlyZWN0aXZlcy5cbiAgICovXG5cbiAgUm91dGVyLmluc3RhbGwgPSBmdW5jdGlvbiAoZXh0ZXJuYWxWdWUpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoUm91dGVyLmluc3RhbGxlZCkge1xuICAgICAgd2FybiQxKCdhbHJlYWR5IGluc3RhbGxlZC4nKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgVnVlID0gZXh0ZXJuYWxWdWU7XG4gICAgYXBwbHlPdmVycmlkZShWdWUpO1xuICAgIFZpZXcoVnVlKTtcbiAgICBMaW5rKFZ1ZSk7XG4gICAgZXhwb3J0cyQxLlZ1ZSA9IFZ1ZTtcbiAgICBSb3V0ZXIuaW5zdGFsbGVkID0gdHJ1ZTtcbiAgfTtcblxuICAvLyBhdXRvIGluc3RhbGxcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVnVlKSB7XG4gICAgd2luZG93LlZ1ZS51c2UoUm91dGVyKTtcbiAgfVxuXG4gIHJldHVybiBSb3V0ZXI7XG5cbn0pKTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtcm91dGVyL2Rpc3QvdnVlLXJvdXRlci5qc1xuICoqIG1vZHVsZSBpZCA9IDIxMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL2NvbXBvbmVudHMvc2lkZS1uYXYvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2dldC1zdGFydGVkLnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2dldC1zdGFydGVkLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9nZXQtc3RhcnRlZC52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9nZXQtc3RhcnRlZC52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9oeS1oZWFkZXIvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMjBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LWNvbnRhaW5lci52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMjJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXkudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIyM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIyNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjI1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi90YWJzLnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBWdWUuanMgdjEuMC4yNlxuICogKGMpIDIwMTYgRXZhbiBZb3VcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBzZXQob2JqLCBrZXksIHZhbCkge1xuICBpZiAoaGFzT3duKG9iaiwga2V5KSkge1xuICAgIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAob2JqLl9pc1Z1ZSkge1xuICAgIHNldChvYmouX2RhdGEsIGtleSwgdmFsKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG9iID0gb2JqLl9fb2JfXztcbiAgaWYgKCFvYikge1xuICAgIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybjtcbiAgfVxuICBvYi5jb252ZXJ0KGtleSwgdmFsKTtcbiAgb2IuZGVwLm5vdGlmeSgpO1xuICBpZiAob2Iudm1zKSB7XG4gICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcbiAgICAgIHZtLl9wcm94eShrZXkpO1xuICAgICAgdm0uX2RpZ2VzdCgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICovXG5cbmZ1bmN0aW9uIGRlbChvYmosIGtleSkge1xuICBpZiAoIWhhc093bihvYmosIGtleSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZGVsZXRlIG9ialtrZXldO1xuICB2YXIgb2IgPSBvYmouX19vYl9fO1xuICBpZiAoIW9iKSB7XG4gICAgaWYgKG9iai5faXNWdWUpIHtcbiAgICAgIGRlbGV0ZSBvYmouX2RhdGFba2V5XTtcbiAgICAgIG9iai5fZGlnZXN0KCk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBvYi5kZXAubm90aWZ5KCk7XG4gIGlmIChvYi52bXMpIHtcbiAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuICAgICAgdm0uX3VucHJveHkoa2V5KTtcbiAgICAgIHZtLl9kaWdlc3QoKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgb2JqZWN0IGhhcyB0aGUgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxudmFyIGxpdGVyYWxWYWx1ZVJFID0gL15cXHM/KHRydWV8ZmFsc2V8LT9bXFxkXFwuXSt8J1teJ10qJ3xcIlteXCJdKlwiKVxccz8kLztcblxuZnVuY3Rpb24gaXNMaXRlcmFsKGV4cCkge1xuICByZXR1cm4gbGl0ZXJhbFZhbHVlUkUudGVzdChleHApO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgX1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNSZXNlcnZlZChzdHIpIHtcbiAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7XG4gIHJldHVybiBjID09PSAweDI0IHx8IGMgPT09IDB4NUY7XG59XG5cbi8qKlxuICogR3VhcmQgdGV4dCBvdXRwdXQsIG1ha2Ugc3VyZSB1bmRlZmluZWQgb3V0cHV0c1xuICogZW1wdHkgc3RyaW5nXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIF90b1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcbn1cblxuLyoqXG4gKiBDaGVjayBhbmQgY29udmVydCBwb3NzaWJsZSBudW1lcmljIHN0cmluZ3MgdG8gbnVtYmVyc1xuICogYmVmb3JlIHNldHRpbmcgYmFjayB0byBkYXRhXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7KnxOdW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XG4gICAgcmV0dXJuIGlzTmFOKHBhcnNlZCkgPyB2YWx1ZSA6IHBhcnNlZDtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnQgc3RyaW5nIGJvb2xlYW4gbGl0ZXJhbHMgaW50byByZWFsIGJvb2xlYW5zLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4geyp8Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiB0b0Jvb2xlYW4odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSAndHJ1ZScgPyB0cnVlIDogdmFsdWUgPT09ICdmYWxzZScgPyBmYWxzZSA6IHZhbHVlO1xufVxuXG4vKipcbiAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nIHwgZmFsc2V9XG4gKi9cblxuZnVuY3Rpb24gc3RyaXBRdW90ZXMoc3RyKSB7XG4gIHZhciBhID0gc3RyLmNoYXJDb2RlQXQoMCk7XG4gIHZhciBiID0gc3RyLmNoYXJDb2RlQXQoc3RyLmxlbmd0aCAtIDEpO1xuICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KSA/IHN0ci5zbGljZSgxLCAtMSkgOiBzdHI7XG59XG5cbi8qKlxuICogQ2FtZWxpemUgYSBoeXBoZW4tZGVsbWl0ZWQgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcblxuZnVuY3Rpb24gY2FtZWxpemUoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCB0b1VwcGVyKTtcbn1cblxuZnVuY3Rpb24gdG9VcHBlcihfLCBjKSB7XG4gIHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7XG59XG5cbi8qKlxuICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGh5cGhlbmF0ZVJFID0gLyhbYS16XFxkXSkoW0EtWl0pL2c7XG5cbmZ1bmN0aW9uIGh5cGhlbmF0ZShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGh5cGhlbi91bmRlcnNjb3JlL3NsYXNoIGRlbGltaXRlcmVkIG5hbWVzIGludG9cbiAqIGNhbWVsaXplZCBjbGFzc05hbWVzLlxuICpcbiAqIGUuZy4gbXktY29tcG9uZW50ID0+IE15Q29tcG9uZW50XG4gKiAgICAgIHNvbWVfZWxzZSAgICA9PiBTb21lRWxzZVxuICogICAgICBzb21lL2NvbXAgICAgPT4gU29tZUNvbXBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9cXC9dKShcXHcpL2c7XG5cbmZ1bmN0aW9uIGNsYXNzaWZ5KHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoY2xhc3NpZnlSRSwgdG9VcHBlcik7XG59XG5cbi8qKlxuICogU2ltcGxlIGJpbmQsIGZhc3RlciB0aGFuIG5hdGl2ZVxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBiaW5kKGZuLCBjdHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHJldHVybiBsID8gbCA+IDEgPyBmbi5hcHBseShjdHgsIGFyZ3VtZW50cykgOiBmbi5jYWxsKGN0eCwgYSkgOiBmbi5jYWxsKGN0eCk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydCBhbiBBcnJheS1saWtlIG9iamVjdCB0byBhIHJlYWwgQXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheS1saWtlfSBsaXN0XG4gKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0XSAtIHN0YXJ0IGluZGV4XG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiB0b0FycmF5KGxpc3QsIHN0YXJ0KSB7XG4gIHN0YXJ0ID0gc3RhcnQgfHwgMDtcbiAgdmFyIGkgPSBsaXN0Lmxlbmd0aCAtIHN0YXJ0O1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgcmV0W2ldID0gbGlzdFtpICsgc3RhcnRdO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b1xuICogQHBhcmFtIHtPYmplY3R9IGZyb21cbiAqL1xuXG5mdW5jdGlvbiBleHRlbmQodG8sIGZyb20pIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmcm9tKTtcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHRvW2tleXNbaV1dID0gZnJvbVtrZXlzW2ldXTtcbiAgfVxuICByZXR1cm4gdG87XG59XG5cbi8qKlxuICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsXG4gKiBPYmplY3RzIGZyb20gcHJpbWl0aXZlIHZhbHVlcyB3aGVuIHdlIGtub3cgdGhlIHZhbHVlXG4gKiBpcyBhIEpTT04tY29tcGxpYW50IHR5cGUuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIE9CSkVDVF9TVFJJTkcgPSAnW29iamVjdCBPYmplY3RdJztcblxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gT0JKRUNUX1NUUklORztcbn1cblxuLyoqXG4gKiBBcnJheSB0eXBlIGNoZWNrLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBEZWZpbmUgYSBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHBhcmFtIHtCb29sZWFufSBbZW51bWVyYWJsZV1cbiAqL1xuXG5mdW5jdGlvbiBkZWYob2JqLCBrZXksIHZhbCwgZW51bWVyYWJsZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICB2YWx1ZTogdmFsLFxuICAgIGVudW1lcmFibGU6ICEhZW51bWVyYWJsZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbi8qKlxuICogRGVib3VuY2UgYSBmdW5jdGlvbiBzbyBpdCBvbmx5IGdldHMgY2FsbGVkIGFmdGVyIHRoZVxuICogaW5wdXQgc3RvcHMgYXJyaXZpbmcgYWZ0ZXIgdGhlIGdpdmVuIHdhaXQgcGVyaW9kLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKi9cblxuZnVuY3Rpb24gX2RlYm91bmNlKGZ1bmMsIHdhaXQpIHtcbiAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICB2YXIgbGFzdCA9IERhdGUubm93KCkgLSB0aW1lc3RhbXA7XG4gICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgfVxuICB9O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGNvbnRleHQgPSB0aGlzO1xuICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICBpZiAoIXRpbWVvdXQpIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxuLyoqXG4gKiBNYW51YWwgaW5kZXhPZiBiZWNhdXNlIGl0J3Mgc2xpZ2h0bHkgZmFzdGVyIHRoYW5cbiAqIG5hdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKi9cblxuZnVuY3Rpb24gaW5kZXhPZihhcnIsIG9iaikge1xuICB2YXIgaSA9IGFyci5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpO1xuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2FuY2VsbGFibGUgdmVyc2lvbiBvZiBhbiBhc3luYyBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY2FuY2VsbGFibGUoZm4pIHtcbiAgdmFyIGNiID0gZnVuY3Rpb24gY2IoKSB7XG4gICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcbiAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfTtcbiAgY2IuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgIGNiLmNhbmNlbGxlZCA9IHRydWU7XG4gIH07XG4gIHJldHVybiBjYjtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0d28gdmFsdWVzIGFyZSBsb29zZWx5IGVxdWFsIC0gdGhhdCBpcyxcbiAqIGlmIHRoZXkgYXJlIHBsYWluIG9iamVjdHMsIGRvIHRoZXkgaGF2ZSB0aGUgc2FtZSBzaGFwZT9cbiAqXG4gKiBAcGFyYW0geyp9IGFcbiAqIEBwYXJhbSB7Kn0gYlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gIHJldHVybiBhID09IGIgfHwgKGlzT2JqZWN0KGEpICYmIGlzT2JqZWN0KGIpID8gSlNPTi5zdHJpbmdpZnkoYSkgPT09IEpTT04uc3RyaW5naWZ5KGIpIDogZmFsc2UpO1xuICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xufVxuXG52YXIgaGFzUHJvdG8gPSAoJ19fcHJvdG9fXycgaW4ge30pO1xuXG4vLyBCcm93c2VyIGVudmlyb25tZW50IHNuaWZmaW5nXG52YXIgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdykgIT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXG4vLyBkZXRlY3QgZGV2dG9vbHNcbnZhciBkZXZ0b29scyA9IGluQnJvd3NlciAmJiB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblxuLy8gVUEgc25pZmZpbmcgZm9yIHdvcmtpbmcgYXJvdW5kIGJyb3dzZXItc3BlY2lmaWMgcXVpcmtzXG52YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbnZhciBpc0lFID0gVUEgJiYgVUEuaW5kZXhPZigndHJpZGVudCcpID4gMDtcbnZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwO1xudmFyIGlzQW5kcm9pZCA9IFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDA7XG52YXIgaXNJb3MgPSBVQSAmJiAvKGlwaG9uZXxpcGFkfGlwb2R8aW9zKS9pLnRlc3QoVUEpO1xudmFyIGlvc1ZlcnNpb25NYXRjaCA9IGlzSW9zICYmIFVBLm1hdGNoKC9vcyAoW1xcZF9dKykvKTtcbnZhciBpb3NWZXJzaW9uID0gaW9zVmVyc2lvbk1hdGNoICYmIGlvc1ZlcnNpb25NYXRjaFsxXS5zcGxpdCgnXycpO1xuXG4vLyBkZXRlY3RpbmcgaU9TIFVJV2ViVmlldyBieSBpbmRleGVkREJcbnZhciBoYXNNdXRhdGlvbk9ic2VydmVyQnVnID0gaW9zVmVyc2lvbiAmJiBOdW1iZXIoaW9zVmVyc2lvblswXSkgPj0gOSAmJiBOdW1iZXIoaW9zVmVyc2lvblsxXSkgPj0gMyAmJiAhd2luZG93LmluZGV4ZWREQjtcblxudmFyIHRyYW5zaXRpb25Qcm9wID0gdW5kZWZpbmVkO1xudmFyIHRyYW5zaXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcbnZhciBhbmltYXRpb25Qcm9wID0gdW5kZWZpbmVkO1xudmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xuXG4vLyBUcmFuc2l0aW9uIHByb3BlcnR5L2V2ZW50IHNuaWZmaW5nXG5pZiAoaW5Ccm93c2VyICYmICFpc0lFOSkge1xuICB2YXIgaXNXZWJraXRUcmFucyA9IHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG4gIHZhciBpc1dlYmtpdEFuaW0gPSB3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZDtcbiAgdHJhbnNpdGlvblByb3AgPSBpc1dlYmtpdFRyYW5zID8gJ1dlYmtpdFRyYW5zaXRpb24nIDogJ3RyYW5zaXRpb24nO1xuICB0cmFuc2l0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdFRyYW5zID8gJ3dlYmtpdFRyYW5zaXRpb25FbmQnIDogJ3RyYW5zaXRpb25lbmQnO1xuICBhbmltYXRpb25Qcm9wID0gaXNXZWJraXRBbmltID8gJ1dlYmtpdEFuaW1hdGlvbicgOiAnYW5pbWF0aW9uJztcbiAgYW5pbWF0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdEFuaW0gPyAnd2Via2l0QW5pbWF0aW9uRW5kJyA6ICdhbmltYXRpb25lbmQnO1xufVxuXG4vKipcbiAqIERlZmVyIGEgdGFzayB0byBleGVjdXRlIGl0IGFzeW5jaHJvbm91c2x5LiBJZGVhbGx5IHRoaXNcbiAqIHNob3VsZCBiZSBleGVjdXRlZCBhcyBhIG1pY3JvdGFzaywgc28gd2UgbGV2ZXJhZ2VcbiAqIE11dGF0aW9uT2JzZXJ2ZXIgaWYgaXQncyBhdmFpbGFibGUsIGFuZCBmYWxsYmFjayB0b1xuICogc2V0VGltZW91dCgwKS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtPYmplY3R9IGN0eFxuICovXG5cbnZhciBuZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBjYWxsYmFja3MgPSBbXTtcbiAgdmFyIHBlbmRpbmcgPSBmYWxzZTtcbiAgdmFyIHRpbWVyRnVuYztcbiAgZnVuY3Rpb24gbmV4dFRpY2tIYW5kbGVyKCkge1xuICAgIHBlbmRpbmcgPSBmYWxzZTtcbiAgICB2YXIgY29waWVzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuICAgIGNhbGxiYWNrcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29waWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb3BpZXNbaV0oKTtcbiAgICB9XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJyAmJiAhaGFzTXV0YXRpb25PYnNlcnZlckJ1Zykge1xuICAgIHZhciBjb3VudGVyID0gMTtcbiAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihuZXh0VGlja0hhbmRsZXIpO1xuICAgIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvdW50ZXIpO1xuICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHtcbiAgICAgIGNoYXJhY3RlckRhdGE6IHRydWVcbiAgICB9KTtcbiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjb3VudGVyID0gKGNvdW50ZXIgKyAxKSAlIDI7XG4gICAgICB0ZXh0Tm9kZS5kYXRhID0gY291bnRlcjtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIHdlYnBhY2sgYXR0ZW1wdHMgdG8gaW5qZWN0IGEgc2hpbSBmb3Igc2V0SW1tZWRpYXRlXG4gICAgLy8gaWYgaXQgaXMgdXNlZCBhcyBhIGdsb2JhbCwgc28gd2UgaGF2ZSB0byB3b3JrIGFyb3VuZCB0aGF0IHRvXG4gICAgLy8gYXZvaWQgYnVuZGxpbmcgdW5uZWNlc3NhcnkgY29kZS5cbiAgICB2YXIgY29udGV4dCA9IGluQnJvd3NlciA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDoge307XG4gICAgdGltZXJGdW5jID0gY29udGV4dC5zZXRJbW1lZGlhdGUgfHwgc2V0VGltZW91dDtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNiLCBjdHgpIHtcbiAgICB2YXIgZnVuYyA9IGN0eCA/IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNiLmNhbGwoY3R4KTtcbiAgICB9IDogY2I7XG4gICAgY2FsbGJhY2tzLnB1c2goZnVuYyk7XG4gICAgaWYgKHBlbmRpbmcpIHJldHVybjtcbiAgICBwZW5kaW5nID0gdHJ1ZTtcbiAgICB0aW1lckZ1bmMobmV4dFRpY2tIYW5kbGVyLCAwKTtcbiAgfTtcbn0pKCk7XG5cbnZhciBfU2V0ID0gdW5kZWZpbmVkO1xuLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5pZiAodHlwZW9mIFNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgU2V0LnRvU3RyaW5nKCkubWF0Y2goL25hdGl2ZSBjb2RlLykpIHtcbiAgLy8gdXNlIG5hdGl2ZSBTZXQgd2hlbiBhdmFpbGFibGUuXG4gIF9TZXQgPSBTZXQ7XG59IGVsc2Uge1xuICAvLyBhIG5vbi1zdGFuZGFyZCBTZXQgcG9seWZpbGwgdGhhdCBvbmx5IHdvcmtzIHdpdGggcHJpbWl0aXZlIGtleXMuXG4gIF9TZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0W2tleV0gIT09IHVuZGVmaW5lZDtcbiAgfTtcbiAgX1NldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHRoaXMuc2V0W2tleV0gPSAxO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIENhY2hlKGxpbWl0KSB7XG4gIHRoaXMuc2l6ZSA9IDA7XG4gIHRoaXMubGltaXQgPSBsaW1pdDtcbiAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkO1xuICB0aGlzLl9rZXltYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuXG52YXIgcCA9IENhY2hlLnByb3RvdHlwZTtcblxuLyoqXG4gKiBQdXQgPHZhbHVlPiBpbnRvIHRoZSBjYWNoZSBhc3NvY2lhdGVkIHdpdGggPGtleT4uXG4gKiBSZXR1cm5zIHRoZSBlbnRyeSB3aGljaCB3YXMgcmVtb3ZlZCB0byBtYWtlIHJvb20gZm9yXG4gKiB0aGUgbmV3IGVudHJ5LiBPdGhlcndpc2UgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuICogKGkuZS4gaWYgdGhlcmUgd2FzIGVub3VnaCByb29tIGFscmVhZHkpLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge0VudHJ5fHVuZGVmaW5lZH1cbiAqL1xuXG5wLnB1dCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIHZhciByZW1vdmVkO1xuXG4gIHZhciBlbnRyeSA9IHRoaXMuZ2V0KGtleSwgdHJ1ZSk7XG4gIGlmICghZW50cnkpIHtcbiAgICBpZiAodGhpcy5zaXplID09PSB0aGlzLmxpbWl0KSB7XG4gICAgICByZW1vdmVkID0gdGhpcy5zaGlmdCgpO1xuICAgIH1cbiAgICBlbnRyeSA9IHtcbiAgICAgIGtleToga2V5XG4gICAgfTtcbiAgICB0aGlzLl9rZXltYXBba2V5XSA9IGVudHJ5O1xuICAgIGlmICh0aGlzLnRhaWwpIHtcbiAgICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5O1xuICAgICAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuICAgIH1cbiAgICB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgICB0aGlzLnNpemUrKztcbiAgfVxuICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuXG4gIHJldHVybiByZW1vdmVkO1xufTtcblxuLyoqXG4gKiBQdXJnZSB0aGUgbGVhc3QgcmVjZW50bHkgdXNlZCAob2xkZXN0KSBlbnRyeSBmcm9tIHRoZVxuICogY2FjaGUuIFJldHVybnMgdGhlIHJlbW92ZWQgZW50cnkgb3IgdW5kZWZpbmVkIGlmIHRoZVxuICogY2FjaGUgd2FzIGVtcHR5LlxuICovXG5cbnAuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBlbnRyeSA9IHRoaXMuaGVhZDtcbiAgaWYgKGVudHJ5KSB7XG4gICAgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5ld2VyO1xuICAgIHRoaXMuaGVhZC5vbGRlciA9IHVuZGVmaW5lZDtcbiAgICBlbnRyeS5uZXdlciA9IGVudHJ5Lm9sZGVyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2tleW1hcFtlbnRyeS5rZXldID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2l6ZS0tO1xuICB9XG4gIHJldHVybiBlbnRyeTtcbn07XG5cbi8qKlxuICogR2V0IGFuZCByZWdpc3RlciByZWNlbnQgdXNlIG9mIDxrZXk+LiBSZXR1cm5zIHRoZSB2YWx1ZVxuICogYXNzb2NpYXRlZCB3aXRoIDxrZXk+IG9yIHVuZGVmaW5lZCBpZiBub3QgaW4gY2FjaGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHtCb29sZWFufSByZXR1cm5FbnRyeVxuICogQHJldHVybiB7RW50cnl8Kn1cbiAqL1xuXG5wLmdldCA9IGZ1bmN0aW9uIChrZXksIHJldHVybkVudHJ5KSB7XG4gIHZhciBlbnRyeSA9IHRoaXMuX2tleW1hcFtrZXldO1xuICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBpZiAoZW50cnkgPT09IHRoaXMudGFpbCkge1xuICAgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG4gIH1cbiAgLy8gSEVBRC0tLS0tLS0tLS0tLS0tVEFJTFxuICAvLyAgIDwub2xkZXIgICAubmV3ZXI+XG4gIC8vICA8LS0tIGFkZCBkaXJlY3Rpb24gLS1cbiAgLy8gICBBICBCICBDICA8RD4gIEVcbiAgaWYgKGVudHJ5Lm5ld2VyKSB7XG4gICAgaWYgKGVudHJ5ID09PSB0aGlzLmhlYWQpIHtcbiAgICAgIHRoaXMuaGVhZCA9IGVudHJ5Lm5ld2VyO1xuICAgIH1cbiAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyOyAvLyBDIDwtLSBFLlxuICB9XG4gIGlmIChlbnRyeS5vbGRlcikge1xuICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7IC8vIEMuIC0tPiBFXG4gIH1cbiAgZW50cnkubmV3ZXIgPSB1bmRlZmluZWQ7IC8vIEQgLS14XG4gIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsOyAvLyBELiAtLT4gRVxuICBpZiAodGhpcy50YWlsKSB7XG4gICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7IC8vIEUuIDwtLSBEXG4gIH1cbiAgdGhpcy50YWlsID0gZW50cnk7XG4gIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG59O1xuXG52YXIgY2FjaGUkMSA9IG5ldyBDYWNoZSgxMDAwKTtcbnZhciBmaWx0ZXJUb2tlblJFID0gL1teXFxzJ1wiXSt8J1teJ10qJ3xcIlteXCJdKlwiL2c7XG52YXIgcmVzZXJ2ZWRBcmdSRSA9IC9eaW4kfF4tP1xcZCsvO1xuXG4vKipcbiAqIFBhcnNlciBzdGF0ZVxuICovXG5cbnZhciBzdHI7XG52YXIgZGlyO1xudmFyIGM7XG52YXIgcHJldjtcbnZhciBpO1xudmFyIGw7XG52YXIgbGFzdEZpbHRlckluZGV4O1xudmFyIGluU2luZ2xlO1xudmFyIGluRG91YmxlO1xudmFyIGN1cmx5O1xudmFyIHNxdWFyZTtcbnZhciBwYXJlbjtcbi8qKlxuICogUHVzaCBhIGZpbHRlciB0byB0aGUgY3VycmVudCBkaXJlY3RpdmUgb2JqZWN0XG4gKi9cblxuZnVuY3Rpb24gcHVzaEZpbHRlcigpIHtcbiAgdmFyIGV4cCA9IHN0ci5zbGljZShsYXN0RmlsdGVySW5kZXgsIGkpLnRyaW0oKTtcbiAgdmFyIGZpbHRlcjtcbiAgaWYgKGV4cCkge1xuICAgIGZpbHRlciA9IHt9O1xuICAgIHZhciB0b2tlbnMgPSBleHAubWF0Y2goZmlsdGVyVG9rZW5SRSk7XG4gICAgZmlsdGVyLm5hbWUgPSB0b2tlbnNbMF07XG4gICAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG4gICAgICBmaWx0ZXIuYXJncyA9IHRva2Vucy5zbGljZSgxKS5tYXAocHJvY2Vzc0ZpbHRlckFyZyk7XG4gICAgfVxuICB9XG4gIGlmIChmaWx0ZXIpIHtcbiAgICAoZGlyLmZpbHRlcnMgPSBkaXIuZmlsdGVycyB8fCBbXSkucHVzaChmaWx0ZXIpO1xuICB9XG4gIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGFyZ3VtZW50IGlzIGR5bmFtaWMgYW5kIHN0cmlwIHF1b3Rlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYXJnXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcHJvY2Vzc0ZpbHRlckFyZyhhcmcpIHtcbiAgaWYgKHJlc2VydmVkQXJnUkUudGVzdChhcmcpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiB0b051bWJlcihhcmcpLFxuICAgICAgZHluYW1pYzogZmFsc2VcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKGFyZyk7XG4gICAgdmFyIGR5bmFtaWMgPSBzdHJpcHBlZCA9PT0gYXJnO1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogZHluYW1pYyA/IGFyZyA6IHN0cmlwcGVkLFxuICAgICAgZHluYW1pYzogZHluYW1pY1xuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBhIGRpcmVjdGl2ZSB2YWx1ZSBhbmQgZXh0cmFjdCB0aGUgZXhwcmVzc2lvblxuICogYW5kIGl0cyBmaWx0ZXJzIGludG8gYSBkZXNjcmlwdG9yLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogXCJhICsgMSB8IHVwcGVyY2FzZVwiIHdpbGwgeWllbGQ6XG4gKiB7XG4gKiAgIGV4cHJlc3Npb246ICdhICsgMScsXG4gKiAgIGZpbHRlcnM6IFtcbiAqICAgICB7IG5hbWU6ICd1cHBlcmNhc2UnLCBhcmdzOiBudWxsIH1cbiAqICAgXVxuICogfVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmUocykge1xuICB2YXIgaGl0ID0gY2FjaGUkMS5nZXQocyk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG5cbiAgLy8gcmVzZXQgcGFyc2VyIHN0YXRlXG4gIHN0ciA9IHM7XG4gIGluU2luZ2xlID0gaW5Eb3VibGUgPSBmYWxzZTtcbiAgY3VybHkgPSBzcXVhcmUgPSBwYXJlbiA9IDA7XG4gIGxhc3RGaWx0ZXJJbmRleCA9IDA7XG4gIGRpciA9IHt9O1xuXG4gIGZvciAoaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgcHJldiA9IGM7XG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChpblNpbmdsZSkge1xuICAgICAgLy8gY2hlY2sgc2luZ2xlIHF1b3RlXG4gICAgICBpZiAoYyA9PT0gMHgyNyAmJiBwcmV2ICE9PSAweDVDKSBpblNpbmdsZSA9ICFpblNpbmdsZTtcbiAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7XG4gICAgICAvLyBjaGVjayBkb3VibGUgcXVvdGVcbiAgICAgIGlmIChjID09PSAweDIyICYmIHByZXYgIT09IDB4NUMpIGluRG91YmxlID0gIWluRG91YmxlO1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gMHg3QyAmJiAvLyBwaXBlXG4gICAgc3RyLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmIHN0ci5jaGFyQ29kZUF0KGkgLSAxKSAhPT0gMHg3Qykge1xuICAgICAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcbiAgICAgICAgLy8gZmlyc3QgZmlsdGVyLCBlbmQgb2YgZXhwcmVzc2lvblxuICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcbiAgICAgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYWxyZWFkeSBoYXMgZmlsdGVyXG4gICAgICAgIHB1c2hGaWx0ZXIoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChjKSB7XG4gICAgICAgIGNhc2UgMHgyMjpcbiAgICAgICAgICBpbkRvdWJsZSA9IHRydWU7YnJlYWs7IC8vIFwiXG4gICAgICAgIGNhc2UgMHgyNzpcbiAgICAgICAgICBpblNpbmdsZSA9IHRydWU7YnJlYWs7IC8vICdcbiAgICAgICAgY2FzZSAweDI4OlxuICAgICAgICAgIHBhcmVuKys7YnJlYWs7IC8vIChcbiAgICAgICAgY2FzZSAweDI5OlxuICAgICAgICAgIHBhcmVuLS07YnJlYWs7IC8vIClcbiAgICAgICAgY2FzZSAweDVCOlxuICAgICAgICAgIHNxdWFyZSsrO2JyZWFrOyAvLyBbXG4gICAgICAgIGNhc2UgMHg1RDpcbiAgICAgICAgICBzcXVhcmUtLTticmVhazsgLy8gXVxuICAgICAgICBjYXNlIDB4N0I6XG4gICAgICAgICAgY3VybHkrKzticmVhazsgLy8ge1xuICAgICAgICBjYXNlIDB4N0Q6XG4gICAgICAgICAgY3VybHktLTticmVhazsgLy8gfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG4gICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuICAgIHB1c2hGaWx0ZXIoKTtcbiAgfVxuXG4gIGNhY2hlJDEucHV0KHMsIGRpcik7XG4gIHJldHVybiBkaXI7XG59XG5cbnZhciBkaXJlY3RpdmUgPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VEaXJlY3RpdmU6IHBhcnNlRGlyZWN0aXZlXG59KTtcblxudmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xudmFyIGNhY2hlID0gdW5kZWZpbmVkO1xudmFyIHRhZ1JFID0gdW5kZWZpbmVkO1xudmFyIGh0bWxSRSA9IHVuZGVmaW5lZDtcbi8qKlxuICogRXNjYXBlIGEgc3RyaW5nIHNvIGl0IGNhbiBiZSB1c2VkIGluIGEgUmVnRXhwXG4gKiBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cblxuZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XG59XG5cbmZ1bmN0aW9uIGNvbXBpbGVSZWdleCgpIHtcbiAgdmFyIG9wZW4gPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1swXSk7XG4gIHZhciBjbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzFdKTtcbiAgdmFyIHVuc2FmZU9wZW4gPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1swXSk7XG4gIHZhciB1bnNhZmVDbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzFdKTtcbiAgdGFnUkUgPSBuZXcgUmVnRXhwKHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJ3wnICsgb3BlbiArICcoKD86LnxcXFxcbikrPyknICsgY2xvc2UsICdnJyk7XG4gIGh0bWxSRSA9IG5ldyBSZWdFeHAoJ14nICsgdW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnJCcpO1xuICAvLyByZXNldCBjYWNoZVxuICBjYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHRlbXBsYXRlIHRleHQgc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJuIHtBcnJheTxPYmplY3Q+IHwgbnVsbH1cbiAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB0eXBlXG4gKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdmFsdWVcbiAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2h0bWxdXG4gKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtvbmVUaW1lXVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlVGV4dCh0ZXh0KSB7XG4gIGlmICghY2FjaGUpIHtcbiAgICBjb21waWxlUmVnZXgoKTtcbiAgfVxuICB2YXIgaGl0ID0gY2FjaGUuZ2V0KHRleHQpO1xuICBpZiAoaGl0KSB7XG4gICAgcmV0dXJuIGhpdDtcbiAgfVxuICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB2YXIgdG9rZW5zID0gW107XG4gIHZhciBsYXN0SW5kZXggPSB0YWdSRS5sYXN0SW5kZXggPSAwO1xuICB2YXIgbWF0Y2gsIGluZGV4LCBodG1sLCB2YWx1ZSwgZmlyc3QsIG9uZVRpbWU7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gIHdoaWxlIChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpIHtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgaW5kZXggPSBtYXRjaC5pbmRleDtcbiAgICAvLyBwdXNoIHRleHQgdG9rZW5cbiAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4LCBpbmRleClcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyB0YWcgdG9rZW5cbiAgICBodG1sID0gaHRtbFJFLnRlc3QobWF0Y2hbMF0pO1xuICAgIHZhbHVlID0gaHRtbCA/IG1hdGNoWzFdIDogbWF0Y2hbMl07XG4gICAgZmlyc3QgPSB2YWx1ZS5jaGFyQ29kZUF0KDApO1xuICAgIG9uZVRpbWUgPSBmaXJzdCA9PT0gNDI7IC8vICpcbiAgICB2YWx1ZSA9IG9uZVRpbWUgPyB2YWx1ZS5zbGljZSgxKSA6IHZhbHVlO1xuICAgIHRva2Vucy5wdXNoKHtcbiAgICAgIHRhZzogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2YWx1ZS50cmltKCksXG4gICAgICBodG1sOiBodG1sLFxuICAgICAgb25lVGltZTogb25lVGltZVxuICAgIH0pO1xuICAgIGxhc3RJbmRleCA9IGluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICB9XG4gIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuICAgIHRva2Vucy5wdXNoKHtcbiAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleClcbiAgICB9KTtcbiAgfVxuICBjYWNoZS5wdXQodGV4dCwgdG9rZW5zKTtcbiAgcmV0dXJuIHRva2Vucztcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBsaXN0IG9mIHRva2VucyBpbnRvIGFuIGV4cHJlc3Npb24uXG4gKiBlLmcuIHRva2VucyBwYXJzZWQgZnJvbSAnYSB7e2J9fSBjJyBjYW4gYmUgc2VyaWFsaXplZFxuICogaW50byBvbmUgc2luZ2xlIGV4cHJlc3Npb24gYXMgJ1wiYSBcIiArIGIgKyBcIiBjXCInLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB0b2tlbnNUb0V4cCh0b2tlbnMsIHZtKSB7XG4gIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2VuLCB2bSk7XG4gICAgfSkuam9pbignKycpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbnNbMF0sIHZtLCB0cnVlKTtcbiAgfVxufVxuXG4vKipcbiAqIEZvcm1hdCBhIHNpbmdsZSB0b2tlbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtzaW5nbGVdXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0VG9rZW4odG9rZW4sIHZtLCBzaW5nbGUpIHtcbiAgcmV0dXJuIHRva2VuLnRhZyA/IHRva2VuLm9uZVRpbWUgJiYgdm0gPyAnXCInICsgdm0uJGV2YWwodG9rZW4udmFsdWUpICsgJ1wiJyA6IGlubGluZUZpbHRlcnModG9rZW4udmFsdWUsIHNpbmdsZSkgOiAnXCInICsgdG9rZW4udmFsdWUgKyAnXCInO1xufVxuXG4vKipcbiAqIEZvciBhbiBhdHRyaWJ1dGUgd2l0aCBtdWx0aXBsZSBpbnRlcnBvbGF0aW9uIHRhZ3MsXG4gKiBlLmcuIGF0dHI9XCJzb21lLXt7dGhpbmcgfCBmaWx0ZXJ9fVwiLCBpbiBvcmRlciB0byBjb21iaW5lXG4gKiB0aGUgd2hvbGUgdGhpbmcgaW50byBhIHNpbmdsZSB3YXRjaGFibGUgZXhwcmVzc2lvbiwgd2VcbiAqIGhhdmUgdG8gaW5saW5lIHRob3NlIGZpbHRlcnMuIFRoaXMgZnVuY3Rpb24gZG9lcyBleGFjdGx5XG4gKiB0aGF0LiBUaGlzIGlzIGEgYml0IGhhY2t5IGJ1dCBpdCBhdm9pZHMgaGVhdnkgY2hhbmdlc1xuICogdG8gZGlyZWN0aXZlIHBhcnNlciBhbmQgd2F0Y2hlciBtZWNoYW5pc20uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHBhcmFtIHtCb29sZWFufSBzaW5nbGVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgZmlsdGVyUkUgPSAvW158XVxcfFtefF0vO1xuZnVuY3Rpb24gaW5saW5lRmlsdGVycyhleHAsIHNpbmdsZSkge1xuICBpZiAoIWZpbHRlclJFLnRlc3QoZXhwKSkge1xuICAgIHJldHVybiBzaW5nbGUgPyBleHAgOiAnKCcgKyBleHAgKyAnKSc7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKGV4cCk7XG4gICAgaWYgKCFkaXIuZmlsdGVycykge1xuICAgICAgcmV0dXJuICcoJyArIGV4cCArICcpJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICd0aGlzLl9hcHBseUZpbHRlcnMoJyArIGRpci5leHByZXNzaW9uICsgLy8gdmFsdWVcbiAgICAgICcsbnVsbCwnICsgLy8gb2xkVmFsdWUgKG51bGwgZm9yIHJlYWQpXG4gICAgICBKU09OLnN0cmluZ2lmeShkaXIuZmlsdGVycykgKyAvLyBmaWx0ZXIgZGVzY3JpcHRvcnNcbiAgICAgICcsZmFsc2UpJzsgLy8gd3JpdGU/XG4gICAgfVxuICB9XG59XG5cbnZhciB0ZXh0ID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGNvbXBpbGVSZWdleDogY29tcGlsZVJlZ2V4LFxuICBwYXJzZVRleHQ6IHBhcnNlVGV4dCxcbiAgdG9rZW5zVG9FeHA6IHRva2Vuc1RvRXhwXG59KTtcblxudmFyIGRlbGltaXRlcnMgPSBbJ3t7JywgJ319J107XG52YXIgdW5zYWZlRGVsaW1pdGVycyA9IFsne3t7JywgJ319fSddO1xuXG52YXIgY29uZmlnID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHByaW50IGRlYnVnIG1lc3NhZ2VzLlxuICAgKiBBbHNvIGVuYWJsZXMgc3RhY2sgdHJhY2UgZm9yIHdhcm5pbmdzLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZGVidWc6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgc2lsZW50OiBmYWxzZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byB1c2UgYXN5bmMgcmVuZGVyaW5nLlxuICAgKi9cblxuICBhc3luYzogdHJ1ZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byB3YXJuIGFnYWluc3QgZXJyb3JzIGNhdWdodCB3aGVuIGV2YWx1YXRpbmdcbiAgICogZXhwcmVzc2lvbnMuXG4gICAqL1xuXG4gIHdhcm5FeHByZXNzaW9uRXJyb3JzOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGFsbG93IGRldnRvb2xzIGluc3BlY3Rpb24uXG4gICAqIERpc2FibGVkIGJ5IGRlZmF1bHQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gICAqL1xuXG4gIGRldnRvb2xzOiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLFxuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIGluZGljYXRlIHRoZSBkZWxpbWl0ZXJzIGhhdmUgYmVlblxuICAgKiBjaGFuZ2VkLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgX2RlbGltaXRlcnNDaGFuZ2VkOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBMaXN0IG9mIGFzc2V0IHR5cGVzIHRoYXQgYSBjb21wb25lbnQgY2FuIG93bi5cbiAgICpcbiAgICogQHR5cGUge0FycmF5fVxuICAgKi9cblxuICBfYXNzZXRUeXBlczogWydjb21wb25lbnQnLCAnZGlyZWN0aXZlJywgJ2VsZW1lbnREaXJlY3RpdmUnLCAnZmlsdGVyJywgJ3RyYW5zaXRpb24nLCAncGFydGlhbCddLFxuXG4gIC8qKlxuICAgKiBwcm9wIGJpbmRpbmcgbW9kZXNcbiAgICovXG5cbiAgX3Byb3BCaW5kaW5nTW9kZXM6IHtcbiAgICBPTkVfV0FZOiAwLFxuICAgIFRXT19XQVk6IDEsXG4gICAgT05FX1RJTUU6IDJcbiAgfSxcblxuICAvKipcbiAgICogTWF4IGNpcmN1bGFyIHVwZGF0ZXMgYWxsb3dlZCBpbiBhIGJhdGNoZXIgZmx1c2ggY3ljbGUuXG4gICAqL1xuXG4gIF9tYXhVcGRhdGVDb3VudDogMTAwXG5cbn0sIHtcbiAgZGVsaW1pdGVyczogeyAvKipcbiAgICAgICAgICAgICAgICAgKiBJbnRlcnBvbGF0aW9uIGRlbGltaXRlcnMuIENoYW5naW5nIHRoZXNlIHdvdWxkIHRyaWdnZXJcbiAgICAgICAgICAgICAgICAgKiB0aGUgdGV4dCBwYXJzZXIgdG8gcmUtY29tcGlsZSB0aGUgcmVndWxhciBleHByZXNzaW9ucy5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEB0eXBlIHtBcnJheTxTdHJpbmc+fVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZGVsaW1pdGVycztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgZGVsaW1pdGVycyA9IHZhbDtcbiAgICAgIGNvbXBpbGVSZWdleCgpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdW5zYWZlRGVsaW1pdGVyczoge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHVuc2FmZURlbGltaXRlcnM7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcbiAgICAgIHVuc2FmZURlbGltaXRlcnMgPSB2YWw7XG4gICAgICBjb21waWxlUmVnZXgoKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pO1xuXG52YXIgd2FybiA9IHVuZGVmaW5lZDtcbnZhciBmb3JtYXRDb21wb25lbnROYW1lID0gdW5kZWZpbmVkO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xuXG4gICAgd2FybiA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XG4gICAgICBpZiAoaGFzQ29uc29sZSAmJiAhY29uZmlnLnNpbGVudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbVnVlIHdhcm5dOiAnICsgbXNnICsgKHZtID8gZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkgOiAnJykpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3JtYXRDb21wb25lbnROYW1lID0gZnVuY3Rpb24gKHZtKSB7XG4gICAgICB2YXIgbmFtZSA9IHZtLl9pc1Z1ZSA/IHZtLiRvcHRpb25zLm5hbWUgOiB2bS5uYW1lO1xuICAgICAgcmV0dXJuIG5hbWUgPyAnIChmb3VuZCBpbiBjb21wb25lbnQ6IDwnICsgaHlwaGVuYXRlKG5hbWUpICsgJz4pJyA6ICcnO1xuICAgIH07XG4gIH0pKCk7XG59XG5cbi8qKlxuICogQXBwZW5kIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYXBwZW5kV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG4gIH0sIHZtLCBjYik7XG59XG5cbi8qKlxuICogSW5zZXJ0QmVmb3JlIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYmVmb3JlV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcbiAgfSwgdm0sIGNiKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZVdpdGhUcmFuc2l0aW9uKGVsLCB2bSwgY2IpIHtcbiAgYXBwbHlUcmFuc2l0aW9uKGVsLCAtMSwgZnVuY3Rpb24gKCkge1xuICAgIHJlbW92ZShlbCk7XG4gIH0sIHZtLCBjYik7XG59XG5cbi8qKlxuICogQXBwbHkgdHJhbnNpdGlvbnMgd2l0aCBhbiBvcGVyYXRpb24gY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtOdW1iZXJ9IGRpcmVjdGlvblxuICogICAgICAgICAgICAgICAgICAxOiBlbnRlclxuICogICAgICAgICAgICAgICAgIC0xOiBsZWF2ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSB0aGUgYWN0dWFsIERPTSBvcGVyYXRpb25cbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIGFwcGx5VHJhbnNpdGlvbihlbCwgZGlyZWN0aW9uLCBvcCwgdm0sIGNiKSB7XG4gIHZhciB0cmFuc2l0aW9uID0gZWwuX192X3RyYW5zO1xuICBpZiAoIXRyYW5zaXRpb24gfHxcbiAgLy8gc2tpcCBpZiB0aGVyZSBhcmUgbm8ganMgaG9va3MgYW5kIENTUyB0cmFuc2l0aW9uIGlzXG4gIC8vIG5vdCBzdXBwb3J0ZWRcbiAgIXRyYW5zaXRpb24uaG9va3MgJiYgIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuICAvLyBza2lwIHRyYW5zaXRpb25zIGZvciBpbml0aWFsIGNvbXBpbGVcbiAgIXZtLl9pc0NvbXBpbGVkIHx8XG4gIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBtYW5pcHVsYXRlZCBieSBhIHBhcmVudCBkaXJlY3RpdmVcbiAgLy8gZHVyaW5nIHRoZSBwYXJlbnQncyBjb21waWxhdGlvbiBwaGFzZSwgc2tpcCB0aGVcbiAgLy8gYW5pbWF0aW9uLlxuICB2bS4kcGFyZW50ICYmICF2bS4kcGFyZW50Ll9pc0NvbXBpbGVkKSB7XG4gICAgb3AoKTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBhY3Rpb24gPSBkaXJlY3Rpb24gPiAwID8gJ2VudGVyJyA6ICdsZWF2ZSc7XG4gIHRyYW5zaXRpb25bYWN0aW9uXShvcCwgY2IpO1xufVxuXG52YXIgdHJhbnNpdGlvbiA9IE9iamVjdC5mcmVlemUoe1xuICBhcHBlbmRXaXRoVHJhbnNpdGlvbjogYXBwZW5kV2l0aFRyYW5zaXRpb24sXG4gIGJlZm9yZVdpdGhUcmFuc2l0aW9uOiBiZWZvcmVXaXRoVHJhbnNpdGlvbixcbiAgcmVtb3ZlV2l0aFRyYW5zaXRpb246IHJlbW92ZVdpdGhUcmFuc2l0aW9uLFxuICBhcHBseVRyYW5zaXRpb246IGFwcGx5VHJhbnNpdGlvblxufSk7XG5cbi8qKlxuICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cblxuZnVuY3Rpb24gcXVlcnkoZWwpIHtcbiAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgc2VsZWN0b3IgPSBlbDtcbiAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuICAgIGlmICghZWwpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQ2Fubm90IGZpbmQgZWxlbWVudDogJyArIHNlbGVjdG9yKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVsO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgbm9kZSBpcyBpbiB0aGUgZG9jdW1lbnQuXG4gKiBOb3RlOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMgc2hvdWxkIHdvcmsgaGVyZVxuICogYnV0IGFsd2F5cyByZXR1cm5zIGZhbHNlIGZvciBjb21tZW50IG5vZGVzIGluIHBoYW50b21qcyxcbiAqIG1ha2luZyB1bml0IHRlc3RzIGRpZmZpY3VsdC4gVGhpcyBpcyBmaXhlZCBieSBkb2luZyB0aGVcbiAqIGNvbnRhaW5zKCkgY2hlY2sgb24gdGhlIG5vZGUncyBwYXJlbnROb2RlIGluc3RlYWQgb2ZcbiAqIHRoZSBub2RlIGl0c2VsZi5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaW5Eb2Mobm9kZSkge1xuICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTtcbiAgdmFyIGRvYyA9IG5vZGUub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gIHJldHVybiBkb2MgPT09IG5vZGUgfHwgZG9jID09PSBwYXJlbnQgfHwgISEocGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSAmJiBkb2MuY29udGFpbnMocGFyZW50KSk7XG59XG5cbi8qKlxuICogR2V0IGFuZCByZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gYSBub2RlLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IF9hdHRyXG4gKi9cblxuZnVuY3Rpb24gZ2V0QXR0cihub2RlLCBfYXR0cikge1xuICB2YXIgdmFsID0gbm9kZS5nZXRBdHRyaWJ1dGUoX2F0dHIpO1xuICBpZiAodmFsICE9PSBudWxsKSB7XG4gICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoX2F0dHIpO1xuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogR2V0IGFuIGF0dHJpYnV0ZSB3aXRoIGNvbG9uIG9yIHYtYmluZDogcHJlZml4LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuICovXG5cbmZ1bmN0aW9uIGdldEJpbmRBdHRyKG5vZGUsIG5hbWUpIHtcbiAgdmFyIHZhbCA9IGdldEF0dHIobm9kZSwgJzonICsgbmFtZSk7XG4gIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICB2YWwgPSBnZXRBdHRyKG5vZGUsICd2LWJpbmQ6JyArIG5hbWUpO1xuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogQ2hlY2sgdGhlIHByZXNlbmNlIG9mIGEgYmluZCBhdHRyaWJ1dGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNCaW5kQXR0cihub2RlLCBuYW1lKSB7XG4gIHJldHVybiBub2RlLmhhc0F0dHJpYnV0ZShuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgnOicgKyBuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgndi1iaW5kOicgKyBuYW1lKTtcbn1cblxuLyoqXG4gKiBJbnNlcnQgZWwgYmVmb3JlIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZnVuY3Rpb24gYmVmb3JlKGVsLCB0YXJnZXQpIHtcbiAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCB0YXJnZXQpO1xufVxuXG4vKipcbiAqIEluc2VydCBlbCBhZnRlciB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICovXG5cbmZ1bmN0aW9uIGFmdGVyKGVsLCB0YXJnZXQpIHtcbiAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0Lm5leHRTaWJsaW5nKTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZWwgZnJvbSBET01cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlKGVsKSB7XG4gIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xufVxuXG4vKipcbiAqIFByZXBlbmQgZWwgdG8gdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqL1xuXG5mdW5jdGlvbiBwcmVwZW5kKGVsLCB0YXJnZXQpIHtcbiAgaWYgKHRhcmdldC5maXJzdENoaWxkKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlcGxhY2UgdGFyZ2V0IHdpdGggZWxcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmZ1bmN0aW9uIHJlcGxhY2UodGFyZ2V0LCBlbCkge1xuICB2YXIgcGFyZW50ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gIGlmIChwYXJlbnQpIHtcbiAgICBwYXJlbnQucmVwbGFjZUNoaWxkKGVsLCB0YXJnZXQpO1xuICB9XG59XG5cbi8qKlxuICogQWRkIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuICovXG5cbmZ1bmN0aW9uIG9uKGVsLCBldmVudCwgY2IsIHVzZUNhcHR1cmUpIHtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2IsIHVzZUNhcHR1cmUpO1xufVxuXG4vKipcbiAqIFJlbW92ZSBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbmZ1bmN0aW9uIG9mZihlbCwgZXZlbnQsIGNiKSB7XG4gIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiKTtcbn1cblxuLyoqXG4gKiBGb3IgSUU5IGNvbXBhdDogd2hlbiBib3RoIGNsYXNzIGFuZCA6Y2xhc3MgYXJlIHByZXNlbnRcbiAqIGdldEF0dHJpYnV0ZSgnY2xhc3MnKSByZXR1cm5zIHdyb25nIHZhbHVlLi4uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGdldENsYXNzKGVsKSB7XG4gIHZhciBjbGFzc25hbWUgPSBlbC5jbGFzc05hbWU7XG4gIGlmICh0eXBlb2YgY2xhc3NuYW1lID09PSAnb2JqZWN0Jykge1xuICAgIGNsYXNzbmFtZSA9IGNsYXNzbmFtZS5iYXNlVmFsIHx8ICcnO1xuICB9XG4gIHJldHVybiBjbGFzc25hbWU7XG59XG5cbi8qKlxuICogSW4gSUU5LCBzZXRBdHRyaWJ1dGUoJ2NsYXNzJykgd2lsbCByZXN1bHQgaW4gZW1wdHkgY2xhc3NcbiAqIGlmIHRoZSBlbGVtZW50IGFsc28gaGFzIHRoZSA6Y2xhc3MgYXR0cmlidXRlOyBIb3dldmVyIGluXG4gKiBQaGFudG9tSlMsIHNldHRpbmcgYGNsYXNzTmFtZWAgZG9lcyBub3Qgd29yayBvbiBTVkcgZWxlbWVudHMuLi5cbiAqIFNvIHdlIGhhdmUgdG8gZG8gYSBjb25kaXRpb25hbCBjaGVjayBoZXJlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAqL1xuXG5mdW5jdGlvbiBzZXRDbGFzcyhlbCwgY2xzKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNJRTkgJiYgIS9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcbiAgICBlbC5jbGFzc05hbWUgPSBjbHM7XG4gIH0gZWxzZSB7XG4gICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNscyk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAqL1xuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xzKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcbiAgICBpZiAoY3VyLmluZGV4T2YoJyAnICsgY2xzICsgJyAnKSA8IDApIHtcbiAgICAgIHNldENsYXNzKGVsLCAoY3VyICsgY2xzKS50cmltKCkpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuICovXG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjbHMpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG4gICAgd2hpbGUgKGN1ci5pbmRleE9mKHRhcikgPj0gMCkge1xuICAgICAgY3VyID0gY3VyLnJlcGxhY2UodGFyLCAnICcpO1xuICAgIH1cbiAgICBzZXRDbGFzcyhlbCwgY3VyLnRyaW0oKSk7XG4gIH1cbiAgaWYgKCFlbC5jbGFzc05hbWUpIHtcbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IHJhdyBjb250ZW50IGluc2lkZSBhbiBlbGVtZW50IGludG8gYSB0ZW1wb3JhcnlcbiAqIGNvbnRhaW5lciBkaXZcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGFzRnJhZ21lbnRcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0Q29udGVudChlbCwgYXNGcmFnbWVudCkge1xuICB2YXIgY2hpbGQ7XG4gIHZhciByYXdDb250ZW50O1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzVGVtcGxhdGUoZWwpICYmIGlzRnJhZ21lbnQoZWwuY29udGVudCkpIHtcbiAgICBlbCA9IGVsLmNvbnRlbnQ7XG4gIH1cbiAgaWYgKGVsLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgIHRyaW1Ob2RlKGVsKTtcbiAgICByYXdDb250ZW50ID0gYXNGcmFnbWVudCA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgd2hpbGUgKGNoaWxkID0gZWwuZmlyc3RDaGlsZCkge1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgICAgcmF3Q29udGVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByYXdDb250ZW50O1xufVxuXG4vKipcbiAqIFRyaW0gcG9zc2libGUgZW1wdHkgaGVhZC90YWlsIHRleHQgYW5kIGNvbW1lbnRcbiAqIG5vZGVzIGluc2lkZSBhIHBhcmVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqL1xuXG5mdW5jdGlvbiB0cmltTm9kZShub2RlKSB7XG4gIHZhciBjaGlsZDtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VxdWVuY2VzICovXG4gIHdoaWxlICgoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgfVxuICB3aGlsZSAoKGNoaWxkID0gbm9kZS5sYXN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlcXVlbmNlcyAqL1xufVxuXG5mdW5jdGlvbiBpc1RyaW1tYWJsZShub2RlKSB7XG4gIHJldHVybiBub2RlICYmIChub2RlLm5vZGVUeXBlID09PSAzICYmICFub2RlLmRhdGEudHJpbSgpIHx8IG5vZGUubm9kZVR5cGUgPT09IDgpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSB0YWcuXG4gKiBOb3RlIGlmIHRoZSB0ZW1wbGF0ZSBhcHBlYXJzIGluc2lkZSBhbiBTVkcgaXRzIHRhZ05hbWVcbiAqIHdpbGwgYmUgaW4gbG93ZXJjYXNlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5mdW5jdGlvbiBpc1RlbXBsYXRlKGVsKSB7XG4gIHJldHVybiBlbC50YWdOYW1lICYmIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RlbXBsYXRlJztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gXCJhbmNob3JcIiBmb3IgcGVyZm9ybWluZyBkb20gaW5zZXJ0aW9uL3JlbW92YWxzLlxuICogVGhpcyBpcyB1c2VkIGluIGEgbnVtYmVyIG9mIHNjZW5hcmlvczpcbiAqIC0gZnJhZ21lbnQgaW5zdGFuY2VcbiAqIC0gdi1odG1sXG4gKiAtIHYtaWZcbiAqIC0gdi1mb3JcbiAqIC0gY29tcG9uZW50XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcGVyc2lzdCAtIElFIHRyYXNoZXMgZW1wdHkgdGV4dE5vZGVzIG9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZU5vZGUodHJ1ZSksIHNvIGluIGNlcnRhaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2VzIHRoZSBhbmNob3IgbmVlZHMgdG8gYmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbi1lbXB0eSB0byBiZSBwZXJzaXN0ZWQgaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcy5cbiAqIEByZXR1cm4ge0NvbW1lbnR8VGV4dH1cbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVBbmNob3IoY29udGVudCwgcGVyc2lzdCkge1xuICB2YXIgYW5jaG9yID0gY29uZmlnLmRlYnVnID8gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBlcnNpc3QgPyAnICcgOiAnJyk7XG4gIGFuY2hvci5fX3ZfYW5jaG9yID0gdHJ1ZTtcbiAgcmV0dXJuIGFuY2hvcjtcbn1cblxuLyoqXG4gKiBGaW5kIGEgY29tcG9uZW50IHJlZiBhdHRyaWJ1dGUgdGhhdCBzdGFydHMgd2l0aCAkLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7U3RyaW5nfHVuZGVmaW5lZH1cbiAqL1xuXG52YXIgcmVmUkUgPSAvXnYtcmVmOi87XG5cbmZ1bmN0aW9uIGZpbmRSZWYobm9kZSkge1xuICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICB2YXIgYXR0cnMgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBuYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICAgIGlmIChyZWZSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBjYW1lbGl6ZShuYW1lLnJlcGxhY2UocmVmUkUsICcnKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogTWFwIGEgZnVuY3Rpb24gdG8gYSByYW5nZSBvZiBub2RlcyAuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge05vZGV9IGVuZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3BcbiAqL1xuXG5mdW5jdGlvbiBtYXBOb2RlUmFuZ2Uobm9kZSwgZW5kLCBvcCkge1xuICB2YXIgbmV4dDtcbiAgd2hpbGUgKG5vZGUgIT09IGVuZCkge1xuICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIG9wKG5vZGUpO1xuICAgIG5vZGUgPSBuZXh0O1xuICB9XG4gIG9wKGVuZCk7XG59XG5cbi8qKlxuICogUmVtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgd2l0aCB0cmFuc2l0aW9uLCBzdG9yZVxuICogdGhlIG5vZGVzIGluIGEgZnJhZ21lbnQgd2l0aCBjb3JyZWN0IG9yZGVyaW5nLFxuICogYW5kIGNhbGwgY2FsbGJhY2sgd2hlbiBkb25lLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gc3RhcnRcbiAqIEBwYXJhbSB7Tm9kZX0gZW5kXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgdm0sIGZyYWcsIGNiKSB7XG4gIHZhciBkb25lID0gZmFsc2U7XG4gIHZhciByZW1vdmVkID0gMDtcbiAgdmFyIG5vZGVzID0gW107XG4gIG1hcE5vZGVSYW5nZShzdGFydCwgZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIGlmIChub2RlID09PSBlbmQpIGRvbmUgPSB0cnVlO1xuICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgcmVtb3ZlV2l0aFRyYW5zaXRpb24obm9kZSwgdm0sIG9uUmVtb3ZlZCk7XG4gIH0pO1xuICBmdW5jdGlvbiBvblJlbW92ZWQoKSB7XG4gICAgcmVtb3ZlZCsrO1xuICAgIGlmIChkb25lICYmIHJlbW92ZWQgPj0gbm9kZXMubGVuZ3RoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZXNbaV0pO1xuICAgICAgfVxuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBEb2N1bWVudEZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc0ZyYWdtZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMTE7XG59XG5cbi8qKlxuICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmVcbiAqIG9mIFNWRyBlbGVtZW50cyBpbiBJRSBhcyB3ZWxsLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBnZXRPdXRlckhUTUwoZWwpIHtcbiAgaWYgKGVsLm91dGVySFRNTCkge1xuICAgIHJldHVybiBlbC5vdXRlckhUTUw7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIHJldHVybiBjb250YWluZXIuaW5uZXJIVE1MO1xuICB9XG59XG5cbnZhciBjb21tb25UYWdSRSA9IC9eKGRpdnxwfHNwYW58aW1nfGF8YnxpfGJyfHVsfG9sfGxpfGgxfGgyfGgzfGg0fGg1fGg2fGNvZGV8cHJlfHRhYmxlfHRofHRkfHRyfGZvcm18bGFiZWx8aW5wdXR8c2VsZWN0fG9wdGlvbnxuYXZ8YXJ0aWNsZXxzZWN0aW9ufGhlYWRlcnxmb290ZXIpJC9pO1xudmFyIHJlc2VydmVkVGFnUkUgPSAvXihzbG90fHBhcnRpYWx8Y29tcG9uZW50KSQvaTtcblxudmFyIGlzVW5rbm93bkVsZW1lbnQgPSB1bmRlZmluZWQ7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBpc1Vua25vd25FbGVtZW50ID0gZnVuY3Rpb24gKGVsLCB0YWcpIHtcbiAgICBpZiAodGFnLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODIxMDM2NC8xMDcwMjQ0XG4gICAgICByZXR1cm4gZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQgfHwgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICgvSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpICYmXG4gICAgICAgIC8vIENocm9tZSByZXR1cm5zIHVua25vd24gZm9yIHNldmVyYWwgSFRNTDUgZWxlbWVudHMuXG4gICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01NDA1MjZcbiAgICAgICAgLy8gRmlyZWZveCByZXR1cm5zIHVua25vd24gZm9yIHNvbWUgXCJJbnRlcmFjdGl2ZSBlbGVtZW50cy5cIlxuICAgICAgICAhL14oZGF0YXx0aW1lfHJ0Y3xyYnxkZXRhaWxzfGRpYWxvZ3xzdW1tYXJ5KSQvLnRlc3QodGFnKVxuICAgICAgKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudCwgaWYgeWVzIHJldHVybiBpdHNcbiAqIGNvbXBvbmVudCBpZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuICBpZiAoIWNvbW1vblRhZ1JFLnRlc3QodGFnKSAmJiAhcmVzZXJ2ZWRUYWdSRS50ZXN0KHRhZykpIHtcbiAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkge1xuICAgICAgcmV0dXJuIHsgaWQ6IHRhZyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaXMgPSBoYXNBdHRycyAmJiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuICAgICAgaWYgKGlzKSB7XG4gICAgICAgIHJldHVybiBpcztcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YXIgZXhwZWN0ZWRUYWcgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwICYmIG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXBbdGFnXTtcbiAgICAgICAgaWYgKGV4cGVjdGVkVGFnKSB7XG4gICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtICcgKyAnZGlkIHlvdSBtZWFuIDwnICsgZXhwZWN0ZWRUYWcgKyAnPj8gJyArICdIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSBrZWJhYi1jYXNlIGluIHRlbXBsYXRlcy4nKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1Vua25vd25FbGVtZW50KGVsLCB0YWcpKSB7XG4gICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArICdyZWdpc3RlciB0aGUgY29tcG9uZW50IGNvcnJlY3RseT8gRm9yIHJlY3Vyc2l2ZSBjb21wb25lbnRzLCAnICsgJ21ha2Ugc3VyZSB0byBwcm92aWRlIHRoZSBcIm5hbWVcIiBvcHRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaGFzQXR0cnMpIHtcbiAgICByZXR1cm4gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBcImlzXCIgYmluZGluZyBmcm9tIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKSB7XG4gIC8vIGR5bmFtaWMgc3ludGF4XG4gIHZhciBleHAgPSBlbC5nZXRBdHRyaWJ1dGUoJ2lzJyk7XG4gIGlmIChleHAgIT0gbnVsbCkge1xuICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCBleHApKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgICByZXR1cm4geyBpZDogZXhwIH07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGV4cCA9IGdldEJpbmRBdHRyKGVsLCAnaXMnKTtcbiAgICBpZiAoZXhwICE9IG51bGwpIHtcbiAgICAgIHJldHVybiB7IGlkOiBleHAsIGR5bmFtaWM6IHRydWUgfTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBPcHRpb24gb3ZlcndyaXRpbmcgc3RyYXRlZ2llcyBhcmUgZnVuY3Rpb25zIHRoYXQgaGFuZGxlXG4gKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxuICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuXG4gKlxuICogQWxsIHN0cmF0ZWd5IGZ1bmN0aW9ucyBmb2xsb3cgdGhlIHNhbWUgc2lnbmF0dXJlOlxuICpcbiAqIEBwYXJhbSB7Kn0gcGFyZW50VmFsXG4gKiBAcGFyYW0geyp9IGNoaWxkVmFsXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICovXG5cbnZhciBzdHJhdHMgPSBjb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuLyoqXG4gKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci5cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZURhdGEodG8sIGZyb20pIHtcbiAgdmFyIGtleSwgdG9WYWwsIGZyb21WYWw7XG4gIGZvciAoa2V5IGluIGZyb20pIHtcbiAgICB0b1ZhbCA9IHRvW2tleV07XG4gICAgZnJvbVZhbCA9IGZyb21ba2V5XTtcbiAgICBpZiAoIWhhc093bih0bywga2V5KSkge1xuICAgICAgc2V0KHRvLCBrZXksIGZyb21WYWwpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodG9WYWwpICYmIGlzT2JqZWN0KGZyb21WYWwpKSB7XG4gICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdG87XG59XG5cbi8qKlxuICogRGF0YVxuICovXG5cbnN0cmF0cy5kYXRhID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG4gIGlmICghdm0pIHtcbiAgICAvLyBpbiBhIFZ1ZS5leHRlbmQgbWVyZ2UsIGJvdGggc2hvdWxkIGJlIGZ1bmN0aW9uc1xuICAgIGlmICghY2hpbGRWYWwpIHtcbiAgICAgIHJldHVybiBwYXJlbnRWYWw7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZGF0YVwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG4gICAgICByZXR1cm4gcGFyZW50VmFsO1xuICAgIH1cbiAgICBpZiAoIXBhcmVudFZhbCkge1xuICAgICAgcmV0dXJuIGNoaWxkVmFsO1xuICAgIH1cbiAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXG4gICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG4gICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG4gICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXG4gICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcbiAgICAgIHJldHVybiBtZXJnZURhdGEoY2hpbGRWYWwuY2FsbCh0aGlzKSwgcGFyZW50VmFsLmNhbGwodGhpcykpO1xuICAgIH07XG4gIH0gZWxzZSBpZiAocGFyZW50VmFsIHx8IGNoaWxkVmFsKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZEluc3RhbmNlRGF0YUZuKCkge1xuICAgICAgLy8gaW5zdGFuY2UgbWVyZ2VcbiAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHZtKSA6IGNoaWxkVmFsO1xuICAgICAgdmFyIGRlZmF1bHREYXRhID0gdHlwZW9mIHBhcmVudFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmVudFZhbC5jYWxsKHZtKSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChpbnN0YW5jZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIG1lcmdlRGF0YShpbnN0YW5jZURhdGEsIGRlZmF1bHREYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEVsXG4gKi9cblxuc3RyYXRzLmVsID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG4gIGlmICghdm0gJiYgY2hpbGRWYWwgJiYgdHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJlbFwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciByZXQgPSBjaGlsZFZhbCB8fCBwYXJlbnRWYWw7XG4gIC8vIGludm9rZSB0aGUgZWxlbWVudCBmYWN0b3J5IGlmIHRoaXMgaXMgaW5zdGFuY2UgbWVyZ2VcbiAgcmV0dXJuIHZtICYmIHR5cGVvZiByZXQgPT09ICdmdW5jdGlvbicgPyByZXQuY2FsbCh2bSkgOiByZXQ7XG59O1xuXG4vKipcbiAqIEhvb2tzIGFuZCBwYXJhbSBhdHRyaWJ1dGVzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuICovXG5cbnN0cmF0cy5pbml0ID0gc3RyYXRzLmNyZWF0ZWQgPSBzdHJhdHMucmVhZHkgPSBzdHJhdHMuYXR0YWNoZWQgPSBzdHJhdHMuZGV0YWNoZWQgPSBzdHJhdHMuYmVmb3JlQ29tcGlsZSA9IHN0cmF0cy5jb21waWxlZCA9IHN0cmF0cy5iZWZvcmVEZXN0cm95ID0gc3RyYXRzLmRlc3Ryb3llZCA9IHN0cmF0cy5hY3RpdmF0ZSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbCA/IHBhcmVudFZhbCA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpIDogaXNBcnJheShjaGlsZFZhbCkgPyBjaGlsZFZhbCA6IFtjaGlsZFZhbF0gOiBwYXJlbnRWYWw7XG59O1xuXG4vKipcbiAqIEFzc2V0c1xuICpcbiAqIFdoZW4gYSB2bSBpcyBwcmVzZW50IChpbnN0YW5jZSBjcmVhdGlvbiksIHdlIG5lZWQgdG8gZG9cbiAqIGEgdGhyZWUtd2F5IG1lcmdlIGJldHdlZW4gY29uc3RydWN0b3Igb3B0aW9ucywgaW5zdGFuY2VcbiAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLlxuICovXG5cbmZ1bmN0aW9uIG1lcmdlQXNzZXRzKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpO1xuICByZXR1cm4gY2hpbGRWYWwgPyBleHRlbmQocmVzLCBndWFyZEFycmF5QXNzZXRzKGNoaWxkVmFsKSkgOiByZXM7XG59XG5cbmNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gIHN0cmF0c1t0eXBlICsgJ3MnXSA9IG1lcmdlQXNzZXRzO1xufSk7XG5cbi8qKlxuICogRXZlbnRzICYgV2F0Y2hlcnMuXG4gKlxuICogRXZlbnRzICYgd2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZVxuICogYW5vdGhlciwgc28gd2UgbWVyZ2UgdGhlbSBhcyBhcnJheXMuXG4gKi9cblxuc3RyYXRzLndhdGNoID0gc3RyYXRzLmV2ZW50cyA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG4gIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG4gIHZhciByZXQgPSB7fTtcbiAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcbiAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XG4gICAgdmFyIHBhcmVudCA9IHJldFtrZXldO1xuICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleV07XG4gICAgaWYgKHBhcmVudCAmJiAhaXNBcnJheShwYXJlbnQpKSB7XG4gICAgICBwYXJlbnQgPSBbcGFyZW50XTtcbiAgICB9XG4gICAgcmV0W2tleV0gPSBwYXJlbnQgPyBwYXJlbnQuY29uY2F0KGNoaWxkKSA6IFtjaGlsZF07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogT3RoZXIgb2JqZWN0IGhhc2hlcy5cbiAqL1xuXG5zdHJhdHMucHJvcHMgPSBzdHJhdHMubWV0aG9kcyA9IHN0cmF0cy5jb21wdXRlZCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG4gIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG4gIHZhciByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICBleHRlbmQocmV0LCBjaGlsZFZhbCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIERlZmF1bHQgc3RyYXRlZ3kuXG4gKi9cblxudmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIGRlZmF1bHRTdHJhdChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbCA9PT0gdW5kZWZpbmVkID8gcGFyZW50VmFsIDogY2hpbGRWYWw7XG59O1xuXG4vKipcbiAqIE1ha2Ugc3VyZSBjb21wb25lbnQgb3B0aW9ucyBnZXQgY29udmVydGVkIHRvIGFjdHVhbFxuICogY29uc3RydWN0b3JzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gZ3VhcmRDb21wb25lbnRzKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuY29tcG9uZW50cykge1xuICAgIHZhciBjb21wb25lbnRzID0gb3B0aW9ucy5jb21wb25lbnRzID0gZ3VhcmRBcnJheUFzc2V0cyhvcHRpb25zLmNvbXBvbmVudHMpO1xuICAgIHZhciBpZHMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRzKTtcbiAgICB2YXIgZGVmO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgbWFwID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCA9IHt9O1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGlkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBpZHNbaV07XG4gICAgICBpZiAoY29tbW9uVGFnUkUudGVzdChrZXkpIHx8IHJlc2VydmVkVGFnUkUudGVzdChrZXkpKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsga2V5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyByZWNvcmQgYSBhbGwgbG93ZXJjYXNlIDwtPiBrZWJhYi1jYXNlIG1hcHBpbmcgZm9yXG4gICAgICAvLyBwb3NzaWJsZSBjdXN0b20gZWxlbWVudCBjYXNlIGVycm9yIHdhcm5pbmdcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIG1hcFtrZXkucmVwbGFjZSgvLS9nLCAnJykudG9Mb3dlckNhc2UoKV0gPSBoeXBoZW5hdGUoa2V5KTtcbiAgICAgIH1cbiAgICAgIGRlZiA9IGNvbXBvbmVudHNba2V5XTtcbiAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRlZikpIHtcbiAgICAgICAgY29tcG9uZW50c1trZXldID0gVnVlLmV4dGVuZChkZWYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBhbGwgcHJvcHMgb3B0aW9uIHN5bnRheCBhcmUgbm9ybWFsaXplZCBpbnRvIHRoZVxuICogT2JqZWN0LWJhc2VkIGZvcm1hdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGd1YXJkUHJvcHMob3B0aW9ucykge1xuICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICB2YXIgaSwgdmFsO1xuICBpZiAoaXNBcnJheShwcm9wcykpIHtcbiAgICBvcHRpb25zLnByb3BzID0ge307XG4gICAgaSA9IHByb3BzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSBwcm9wc1tpXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgICBvcHRpb25zLnByb3BzW3ZhbF0gPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSkge1xuICAgICAgICBvcHRpb25zLnByb3BzW3ZhbC5uYW1lXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwcm9wcykpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFsID0gcHJvcHNba2V5c1tpXV07XG4gICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcm9wc1trZXlzW2ldXSA9IHsgdHlwZTogdmFsIH07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogR3VhcmQgYW4gQXJyYXktZm9ybWF0IGFzc2V0cyBvcHRpb24gYW5kIGNvbnZlcnRlZCBpdFxuICogaW50byB0aGUga2V5LXZhbHVlIE9iamVjdCBmb3JtYXQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGFzc2V0c1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGd1YXJkQXJyYXlBc3NldHMoYXNzZXRzKSB7XG4gIGlmIChpc0FycmF5KGFzc2V0cykpIHtcbiAgICB2YXIgcmVzID0ge307XG4gICAgdmFyIGkgPSBhc3NldHMubGVuZ3RoO1xuICAgIHZhciBhc3NldDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBhc3NldCA9IGFzc2V0c1tpXTtcbiAgICAgIHZhciBpZCA9IHR5cGVvZiBhc3NldCA9PT0gJ2Z1bmN0aW9uJyA/IGFzc2V0Lm9wdGlvbnMgJiYgYXNzZXQub3B0aW9ucy5uYW1lIHx8IGFzc2V0LmlkIDogYXNzZXQubmFtZSB8fCBhc3NldC5pZDtcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBcnJheS1zeW50YXggYXNzZXRzIG11c3QgcHJvdmlkZSBhIFwibmFtZVwiIG9yIFwiaWRcIiBmaWVsZC4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc1tpZF0gPSBhc3NldDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICByZXR1cm4gYXNzZXRzO1xufVxuXG4vKipcbiAqIE1lcmdlIHR3byBvcHRpb24gb2JqZWN0cyBpbnRvIGEgbmV3IG9uZS5cbiAqIENvcmUgdXRpbGl0eSB1c2VkIGluIGJvdGggaW5zdGFudGlhdGlvbiBhbmQgaW5oZXJpdGFuY2UuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhcmVudFxuICogQHBhcmFtIHtPYmplY3R9IGNoaWxkXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXSAtIGlmIHZtIGlzIHByZXNlbnQsIGluZGljYXRlcyB0aGlzIGlzXG4gKiAgICAgICAgICAgICAgICAgICAgIGFuIGluc3RhbnRpYXRpb24gbWVyZ2UuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQsIHZtKSB7XG4gIGd1YXJkQ29tcG9uZW50cyhjaGlsZCk7XG4gIGd1YXJkUHJvcHMoY2hpbGQpO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChjaGlsZC5wcm9wc0RhdGEgJiYgIXZtKSB7XG4gICAgICB3YXJuKCdwcm9wc0RhdGEgY2FuIG9ubHkgYmUgdXNlZCBhcyBhbiBpbnN0YW50aWF0aW9uIG9wdGlvbi4nKTtcbiAgICB9XG4gIH1cbiAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgdmFyIGtleTtcbiAgaWYgKGNoaWxkWydleHRlbmRzJ10pIHtcbiAgICBwYXJlbnQgPSB0eXBlb2YgY2hpbGRbJ2V4dGVuZHMnXSA9PT0gJ2Z1bmN0aW9uJyA/IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10ub3B0aW9ucywgdm0pIDogbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXSwgdm0pO1xuICB9XG4gIGlmIChjaGlsZC5taXhpbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkLm1peGlucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBtaXhpbiA9IGNoaWxkLm1peGluc1tpXTtcbiAgICAgIHZhciBtaXhpbk9wdGlvbnMgPSBtaXhpbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBWdWUgPyBtaXhpbi5vcHRpb25zIDogbWl4aW47XG4gICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBtaXhpbk9wdGlvbnMsIHZtKTtcbiAgICB9XG4gIH1cbiAgZm9yIChrZXkgaW4gcGFyZW50KSB7XG4gICAgbWVyZ2VGaWVsZChrZXkpO1xuICB9XG4gIGZvciAoa2V5IGluIGNoaWxkKSB7XG4gICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7XG4gICAgICBtZXJnZUZpZWxkKGtleSk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIG1lcmdlRmllbGQoa2V5KSB7XG4gICAgdmFyIHN0cmF0ID0gc3RyYXRzW2tleV0gfHwgZGVmYXVsdFN0cmF0O1xuICAgIG9wdGlvbnNba2V5XSA9IHN0cmF0KHBhcmVudFtrZXldLCBjaGlsZFtrZXldLCB2bSwga2V5KTtcbiAgfVxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuLyoqXG4gKiBSZXNvbHZlIGFuIGFzc2V0LlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJlY2F1c2UgY2hpbGQgaW5zdGFuY2VzIG5lZWQgYWNjZXNzXG4gKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2Fybk1pc3NpbmdcbiAqIEByZXR1cm4ge09iamVjdHxGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiByZXNvbHZlQXNzZXQob3B0aW9ucywgdHlwZSwgaWQsIHdhcm5NaXNzaW5nKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXTtcbiAgdmFyIGNhbWVsaXplZElkO1xuICB2YXIgcmVzID0gYXNzZXRzW2lkXSB8fFxuICAvLyBjYW1lbENhc2UgSURcbiAgYXNzZXRzW2NhbWVsaXplZElkID0gY2FtZWxpemUoaWQpXSB8fFxuICAvLyBQYXNjYWwgQ2FzZSBJRFxuICBhc3NldHNbY2FtZWxpemVkSWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbGl6ZWRJZC5zbGljZSgxKV07XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcbiAgICB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSAnICsgdHlwZS5zbGljZSgwLCAtMSkgKyAnOiAnICsgaWQsIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5cbnZhciB1aWQkMSA9IDA7XG5cbi8qKlxuICogQSBkZXAgaXMgYW4gb2JzZXJ2YWJsZSB0aGF0IGNhbiBoYXZlIG11bHRpcGxlXG4gKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBEZXAoKSB7XG4gIHRoaXMuaWQgPSB1aWQkMSsrO1xuICB0aGlzLnN1YnMgPSBbXTtcbn1cblxuLy8gdGhlIGN1cnJlbnQgdGFyZ2V0IHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkLlxuLy8gdGhpcyBpcyBnbG9iYWxseSB1bmlxdWUgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvbmx5IG9uZVxuLy8gd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQgYXQgYW55IHRpbWUuXG5EZXAudGFyZ2V0ID0gbnVsbDtcblxuLyoqXG4gKiBBZGQgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cbiAqXG4gKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG4gKi9cblxuRGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG4gIHRoaXMuc3Vicy5wdXNoKHN1Yik7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuICpcbiAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcbiAqL1xuXG5EZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcbiAgdGhpcy5zdWJzLiRyZW1vdmUoc3ViKTtcbn07XG5cbi8qKlxuICogQWRkIHNlbGYgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSB0YXJnZXQgd2F0Y2hlci5cbiAqL1xuXG5EZXAucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldC5hZGREZXAodGhpcyk7XG59O1xuXG4vKipcbiAqIE5vdGlmeSBhbGwgc3Vic2NyaWJlcnMgb2YgYSBuZXcgdmFsdWUuXG4gKi9cblxuRGVwLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHN0YWJsaXplIHRoZSBzdWJzY3JpYmVyIGxpc3QgZmlyc3RcbiAgdmFyIHN1YnMgPSB0b0FycmF5KHRoaXMuc3Vicyk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gc3Vicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBzdWJzW2ldLnVwZGF0ZSgpO1xuICB9XG59O1xuXG52YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcbnZhciBhcnJheU1ldGhvZHMgPSBPYmplY3QuY3JlYXRlKGFycmF5UHJvdG8pXG5cbi8qKlxuICogSW50ZXJjZXB0IG11dGF0aW5nIG1ldGhvZHMgYW5kIGVtaXQgZXZlbnRzXG4gKi9cblxuO1sncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAndW5zaGlmdCcsICdzcGxpY2UnLCAnc29ydCcsICdyZXZlcnNlJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZFxuICB2YXIgb3JpZ2luYWwgPSBhcnJheVByb3RvW21ldGhvZF07XG4gIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvcigpIHtcbiAgICAvLyBhdm9pZCBsZWFraW5nIGFyZ3VtZW50czpcbiAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jbG9zdXJlLXdpdGgtYXJndW1lbnRzXG4gICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkpO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB2YXIgb2IgPSB0aGlzLl9fb2JfXztcbiAgICB2YXIgaW5zZXJ0ZWQ7XG4gICAgc3dpdGNoIChtZXRob2QpIHtcbiAgICAgIGNhc2UgJ3B1c2gnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndW5zaGlmdCc6XG4gICAgICAgIGluc2VydGVkID0gYXJncztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzcGxpY2UnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3Muc2xpY2UoMik7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoaW5zZXJ0ZWQpIG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7XG4gICAgLy8gbm90aWZ5IGNoYW5nZVxuICAgIG9iLmRlcC5ub3RpZnkoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KTtcbn0pO1xuXG4vKipcbiAqIFN3YXAgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4IHdpdGggYSBuZXcgdmFsdWVcbiAqIGFuZCBlbWl0cyBjb3JyZXNwb25kaW5nIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEByZXR1cm4geyp9IC0gcmVwbGFjZWQgZWxlbWVudFxuICovXG5cbmRlZihhcnJheVByb3RvLCAnJHNldCcsIGZ1bmN0aW9uICRzZXQoaW5kZXgsIHZhbCkge1xuICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGgpIHtcbiAgICB0aGlzLmxlbmd0aCA9IE51bWJlcihpbmRleCkgKyAxO1xuICB9XG4gIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSwgdmFsKVswXTtcbn0pO1xuXG4vKipcbiAqIENvbnZlbmllbmNlIG1ldGhvZCB0byByZW1vdmUgdGhlIGVsZW1lbnQgYXQgZ2l2ZW4gaW5kZXggb3IgdGFyZ2V0IGVsZW1lbnQgcmVmZXJlbmNlLlxuICpcbiAqIEBwYXJhbSB7Kn0gaXRlbVxuICovXG5cbmRlZihhcnJheVByb3RvLCAnJHJlbW92ZScsIGZ1bmN0aW9uICRyZW1vdmUoaXRlbSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuO1xuICB2YXIgaW5kZXggPSBpbmRleE9mKHRoaXMsIGl0ZW0pO1xuICBpZiAoaW5kZXggPiAtMSkge1xuICAgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbn0pO1xuXG52YXIgYXJyYXlLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXJyYXlNZXRob2RzKTtcblxuLyoqXG4gKiBCeSBkZWZhdWx0LCB3aGVuIGEgcmVhY3RpdmUgcHJvcGVydHkgaXMgc2V0LCB0aGUgbmV3IHZhbHVlIGlzXG4gKiBhbHNvIGNvbnZlcnRlZCB0byBiZWNvbWUgcmVhY3RpdmUuIEhvd2V2ZXIgaW4gY2VydGFpbiBjYXNlcywgZS5nLlxuICogdi1mb3Igc2NvcGUgYWxpYXMgYW5kIHByb3BzLCB3ZSBkb24ndCB3YW50IHRvIGZvcmNlIGNvbnZlcnNpb25cbiAqIGJlY2F1c2UgdGhlIHZhbHVlIG1heSBiZSBhIG5lc3RlZCB2YWx1ZSB1bmRlciBhIGZyb3plbiBkYXRhIHN0cnVjdHVyZS5cbiAqXG4gKiBTbyB3aGVuZXZlciB3ZSB3YW50IHRvIHNldCBhIHJlYWN0aXZlIHByb3BlcnR5IHdpdGhvdXQgZm9yY2luZ1xuICogY29udmVyc2lvbiBvbiB0aGUgbmV3IHZhbHVlLCB3ZSB3cmFwIHRoYXQgY2FsbCBpbnNpZGUgdGhpcyBmdW5jdGlvbi5cbiAqL1xuXG52YXIgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cbmZ1bmN0aW9uIHdpdGhvdXRDb252ZXJzaW9uKGZuKSB7XG4gIHNob3VsZENvbnZlcnQgPSBmYWxzZTtcbiAgZm4oKTtcbiAgc2hvdWxkQ29udmVydCA9IHRydWU7XG59XG5cbi8qKlxuICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuICogb2JqZWN0LiBPbmNlIGF0dGFjaGVkLCB0aGUgb2JzZXJ2ZXIgY29udmVydHMgdGFyZ2V0XG4gKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoZXMgdXBkYXRlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdmFsdWVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmZ1bmN0aW9uIE9ic2VydmVyKHZhbHVlKSB7XG4gIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7XG4gIGRlZih2YWx1ZSwgJ19fb2JfXycsIHRoaXMpO1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICB2YXIgYXVnbWVudCA9IGhhc1Byb3RvID8gcHJvdG9BdWdtZW50IDogY29weUF1Z21lbnQ7XG4gICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuICAgIHRoaXMub2JzZXJ2ZUFycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLndhbGsodmFsdWUpO1xuICB9XG59XG5cbi8vIEluc3RhbmNlIG1ldGhvZHNcblxuLyoqXG4gKiBXYWxrIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBhbmQgY29udmVydCB0aGVtIGludG9cbiAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB0aGlzLmNvbnZlcnQoa2V5c1tpXSwgb2JqW2tleXNbaV1dKTtcbiAgfVxufTtcblxuLyoqXG4gKiBPYnNlcnZlIGEgbGlzdCBvZiBBcnJheSBpdGVtcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBpdGVtc1xuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBpdGVtcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBvYnNlcnZlKGl0ZW1zW2ldKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgcHJvcGVydHkgaW50byBnZXR0ZXIvc2V0dGVyIHNvIHdlIGNhbiBlbWl0XG4gKiB0aGUgZXZlbnRzIHdoZW4gdGhlIHByb3BlcnR5IGlzIGFjY2Vzc2VkL2NoYW5nZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUuY29udmVydCA9IGZ1bmN0aW9uIChrZXksIHZhbCkge1xuICBkZWZpbmVSZWFjdGl2ZSh0aGlzLnZhbHVlLCBrZXksIHZhbCk7XG59O1xuXG4vKipcbiAqIEFkZCBhbiBvd25lciB2bSwgc28gdGhhdCB3aGVuICRzZXQvJGRlbGV0ZSBtdXRhdGlvbnNcbiAqIGhhcHBlbiB3ZSBjYW4gbm90aWZ5IG93bmVyIHZtcyB0byBwcm94eSB0aGUga2V5cyBhbmRcbiAqIGRpZ2VzdCB0aGUgd2F0Y2hlcnMuIFRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0XG4gKiBpcyBvYnNlcnZlZCBhcyBhbiBpbnN0YW5jZSdzIHJvb3QgJGRhdGEuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLmFkZFZtID0gZnVuY3Rpb24gKHZtKSB7XG4gICh0aGlzLnZtcyB8fCAodGhpcy52bXMgPSBbXSkpLnB1c2godm0pO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gb3duZXIgdm0uIFRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIG9iamVjdCBpc1xuICogc3dhcHBlZCBvdXQgYXMgYW4gaW5zdGFuY2UncyAkZGF0YSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLnJlbW92ZVZtID0gZnVuY3Rpb24gKHZtKSB7XG4gIHRoaXMudm1zLiRyZW1vdmUodm0pO1xufTtcblxuLy8gaGVscGVyc1xuXG4vKipcbiAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBpbnRlcmNlcHRpbmdcbiAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuICogQHBhcmFtIHtPYmplY3R9IHNyY1xuICovXG5cbmZ1bmN0aW9uIHByb3RvQXVnbWVudCh0YXJnZXQsIHNyYykge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovXG59XG5cbi8qKlxuICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGRlZmluaW5nXG4gKiBoaWRkZW4gcHJvcGVydGllcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvdG9cbiAqL1xuXG5mdW5jdGlvbiBjb3B5QXVnbWVudCh0YXJnZXQsIHNyYywga2V5cykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgZGVmKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcbiAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG4gKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICogQHJldHVybiB7T2JzZXJ2ZXJ8dW5kZWZpbmVkfVxuICogQHN0YXRpY1xuICovXG5cbmZ1bmN0aW9uIG9ic2VydmUodmFsdWUsIHZtKSB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgb2I7XG4gIGlmIChoYXNPd24odmFsdWUsICdfX29iX18nKSAmJiB2YWx1ZS5fX29iX18gaW5zdGFuY2VvZiBPYnNlcnZlcikge1xuICAgIG9iID0gdmFsdWUuX19vYl9fO1xuICB9IGVsc2UgaWYgKHNob3VsZENvbnZlcnQgJiYgKGlzQXJyYXkodmFsdWUpIHx8IGlzUGxhaW5PYmplY3QodmFsdWUpKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSAmJiAhdmFsdWUuX2lzVnVlKSB7XG4gICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpO1xuICB9XG4gIGlmIChvYiAmJiB2bSkge1xuICAgIG9iLmFkZFZtKHZtKTtcbiAgfVxuICByZXR1cm4gb2I7XG59XG5cbi8qKlxuICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gZGVmaW5lUmVhY3RpdmUob2JqLCBrZXksIHZhbCkge1xuICB2YXIgZGVwID0gbmV3IERlcCgpO1xuXG4gIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGNhdGVyIGZvciBwcmUtZGVmaW5lZCBnZXR0ZXIvc2V0dGVyc1xuICB2YXIgZ2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuZ2V0O1xuICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0O1xuXG4gIHZhciBjaGlsZE9iID0gb2JzZXJ2ZSh2YWwpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlR2V0dGVyKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgIGRlcC5kZXBlbmQoKTtcbiAgICAgICAgaWYgKGNoaWxkT2IpIHtcbiAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBmb3IgKHZhciBlLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgZSA9IHZhbHVlW2ldO1xuICAgICAgICAgICAgZSAmJiBlLl9fb2JfXyAmJiBlLl9fb2JfXy5kZXAuZGVwZW5kKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlU2V0dGVyKG5ld1ZhbCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIGlmIChuZXdWYWwgPT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzZXR0ZXIpIHtcbiAgICAgICAgc2V0dGVyLmNhbGwob2JqLCBuZXdWYWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gbmV3VmFsO1xuICAgICAgfVxuICAgICAgY2hpbGRPYiA9IG9ic2VydmUobmV3VmFsKTtcbiAgICAgIGRlcC5ub3RpZnkoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5cblxudmFyIHV0aWwgPSBPYmplY3QuZnJlZXplKHtcblx0ZGVmaW5lUmVhY3RpdmU6IGRlZmluZVJlYWN0aXZlLFxuXHRzZXQ6IHNldCxcblx0ZGVsOiBkZWwsXG5cdGhhc093bjogaGFzT3duLFxuXHRpc0xpdGVyYWw6IGlzTGl0ZXJhbCxcblx0aXNSZXNlcnZlZDogaXNSZXNlcnZlZCxcblx0X3RvU3RyaW5nOiBfdG9TdHJpbmcsXG5cdHRvTnVtYmVyOiB0b051bWJlcixcblx0dG9Cb29sZWFuOiB0b0Jvb2xlYW4sXG5cdHN0cmlwUXVvdGVzOiBzdHJpcFF1b3Rlcyxcblx0Y2FtZWxpemU6IGNhbWVsaXplLFxuXHRoeXBoZW5hdGU6IGh5cGhlbmF0ZSxcblx0Y2xhc3NpZnk6IGNsYXNzaWZ5LFxuXHRiaW5kOiBiaW5kLFxuXHR0b0FycmF5OiB0b0FycmF5LFxuXHRleHRlbmQ6IGV4dGVuZCxcblx0aXNPYmplY3Q6IGlzT2JqZWN0LFxuXHRpc1BsYWluT2JqZWN0OiBpc1BsYWluT2JqZWN0LFxuXHRkZWY6IGRlZixcblx0ZGVib3VuY2U6IF9kZWJvdW5jZSxcblx0aW5kZXhPZjogaW5kZXhPZixcblx0Y2FuY2VsbGFibGU6IGNhbmNlbGxhYmxlLFxuXHRsb29zZUVxdWFsOiBsb29zZUVxdWFsLFxuXHRpc0FycmF5OiBpc0FycmF5LFxuXHRoYXNQcm90bzogaGFzUHJvdG8sXG5cdGluQnJvd3NlcjogaW5Ccm93c2VyLFxuXHRkZXZ0b29sczogZGV2dG9vbHMsXG5cdGlzSUU6IGlzSUUsXG5cdGlzSUU5OiBpc0lFOSxcblx0aXNBbmRyb2lkOiBpc0FuZHJvaWQsXG5cdGlzSW9zOiBpc0lvcyxcblx0aW9zVmVyc2lvbk1hdGNoOiBpb3NWZXJzaW9uTWF0Y2gsXG5cdGlvc1ZlcnNpb246IGlvc1ZlcnNpb24sXG5cdGhhc011dGF0aW9uT2JzZXJ2ZXJCdWc6IGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcsXG5cdGdldCB0cmFuc2l0aW9uUHJvcCAoKSB7IHJldHVybiB0cmFuc2l0aW9uUHJvcDsgfSxcblx0Z2V0IHRyYW5zaXRpb25FbmRFdmVudCAoKSB7IHJldHVybiB0cmFuc2l0aW9uRW5kRXZlbnQ7IH0sXG5cdGdldCBhbmltYXRpb25Qcm9wICgpIHsgcmV0dXJuIGFuaW1hdGlvblByb3A7IH0sXG5cdGdldCBhbmltYXRpb25FbmRFdmVudCAoKSB7IHJldHVybiBhbmltYXRpb25FbmRFdmVudDsgfSxcblx0bmV4dFRpY2s6IG5leHRUaWNrLFxuXHRnZXQgX1NldCAoKSB7IHJldHVybiBfU2V0OyB9LFxuXHRxdWVyeTogcXVlcnksXG5cdGluRG9jOiBpbkRvYyxcblx0Z2V0QXR0cjogZ2V0QXR0cixcblx0Z2V0QmluZEF0dHI6IGdldEJpbmRBdHRyLFxuXHRoYXNCaW5kQXR0cjogaGFzQmluZEF0dHIsXG5cdGJlZm9yZTogYmVmb3JlLFxuXHRhZnRlcjogYWZ0ZXIsXG5cdHJlbW92ZTogcmVtb3ZlLFxuXHRwcmVwZW5kOiBwcmVwZW5kLFxuXHRyZXBsYWNlOiByZXBsYWNlLFxuXHRvbjogb24sXG5cdG9mZjogb2ZmLFxuXHRzZXRDbGFzczogc2V0Q2xhc3MsXG5cdGFkZENsYXNzOiBhZGRDbGFzcyxcblx0cmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuXHRleHRyYWN0Q29udGVudDogZXh0cmFjdENvbnRlbnQsXG5cdHRyaW1Ob2RlOiB0cmltTm9kZSxcblx0aXNUZW1wbGF0ZTogaXNUZW1wbGF0ZSxcblx0Y3JlYXRlQW5jaG9yOiBjcmVhdGVBbmNob3IsXG5cdGZpbmRSZWY6IGZpbmRSZWYsXG5cdG1hcE5vZGVSYW5nZTogbWFwTm9kZVJhbmdlLFxuXHRyZW1vdmVOb2RlUmFuZ2U6IHJlbW92ZU5vZGVSYW5nZSxcblx0aXNGcmFnbWVudDogaXNGcmFnbWVudCxcblx0Z2V0T3V0ZXJIVE1MOiBnZXRPdXRlckhUTUwsXG5cdG1lcmdlT3B0aW9uczogbWVyZ2VPcHRpb25zLFxuXHRyZXNvbHZlQXNzZXQ6IHJlc29sdmVBc3NldCxcblx0Y2hlY2tDb21wb25lbnRBdHRyOiBjaGVja0NvbXBvbmVudEF0dHIsXG5cdGNvbW1vblRhZ1JFOiBjb21tb25UYWdSRSxcblx0cmVzZXJ2ZWRUYWdSRTogcmVzZXJ2ZWRUYWdSRSxcblx0Z2V0IHdhcm4gKCkgeyByZXR1cm4gd2FybjsgfVxufSk7XG5cbnZhciB1aWQgPSAwO1xuXG5mdW5jdGlvbiBpbml0TWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogVGhlIG1haW4gaW5pdCBzZXF1ZW5jZS4gVGhpcyBpcyBjYWxsZWQgZm9yIGV2ZXJ5XG4gICAqIGluc3RhbmNlLCBpbmNsdWRpbmcgb25lcyB0aGF0IGFyZSBjcmVhdGVkIGZyb20gZXh0ZW5kZWRcbiAgICogY29uc3RydWN0b3JzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIHRoaXMgb3B0aW9ucyBvYmplY3Qgc2hvdWxkIGJlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHJlc3VsdCBvZiBtZXJnaW5nIGNsYXNzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyBhbmQgdGhlIG9wdGlvbnMgcGFzc2VkXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdG8gdGhlIGNvbnN0cnVjdG9yLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIHRoaXMuJGVsID0gbnVsbDtcbiAgICB0aGlzLiRwYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcbiAgICB0aGlzLiRyb290ID0gdGhpcy4kcGFyZW50ID8gdGhpcy4kcGFyZW50LiRyb290IDogdGhpcztcbiAgICB0aGlzLiRjaGlsZHJlbiA9IFtdO1xuICAgIHRoaXMuJHJlZnMgPSB7fTsgLy8gY2hpbGQgdm0gcmVmZXJlbmNlc1xuICAgIHRoaXMuJGVscyA9IHt9OyAvLyBlbGVtZW50IHJlZmVyZW5jZXNcbiAgICB0aGlzLl93YXRjaGVycyA9IFtdOyAvLyBhbGwgd2F0Y2hlcnMgYXMgYW4gYXJyYXlcbiAgICB0aGlzLl9kaXJlY3RpdmVzID0gW107IC8vIGFsbCBkaXJlY3RpdmVzXG5cbiAgICAvLyBhIHVpZFxuICAgIHRoaXMuX3VpZCA9IHVpZCsrO1xuXG4gICAgLy8gYSBmbGFnIHRvIGF2b2lkIHRoaXMgYmVpbmcgb2JzZXJ2ZWRcbiAgICB0aGlzLl9pc1Z1ZSA9IHRydWU7XG5cbiAgICAvLyBldmVudHMgYm9va2tlZXBpbmdcbiAgICB0aGlzLl9ldmVudHMgPSB7fTsgLy8gcmVnaXN0ZXJlZCBjYWxsYmFja3NcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IHt9OyAvLyBmb3IgJGJyb2FkY2FzdCBvcHRpbWl6YXRpb25cblxuICAgIC8vIGZyYWdtZW50IGluc3RhbmNlIHByb3BlcnRpZXNcbiAgICB0aGlzLl9pc0ZyYWdtZW50ID0gZmFsc2U7XG4gICAgdGhpcy5fZnJhZ21lbnQgPSAvLyBAdHlwZSB7RG9jdW1lbnRGcmFnbWVudH1cbiAgICB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gLy8gQHR5cGUge1RleHR8Q29tbWVudH1cbiAgICB0aGlzLl9mcmFnbWVudEVuZCA9IG51bGw7IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cbiAgICAvLyBsaWZlY3ljbGUgc3RhdGVcbiAgICB0aGlzLl9pc0NvbXBpbGVkID0gdGhpcy5faXNEZXN0cm95ZWQgPSB0aGlzLl9pc1JlYWR5ID0gdGhpcy5faXNBdHRhY2hlZCA9IHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0aGlzLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl91bmxpbmtGbiA9IG51bGw7XG5cbiAgICAvLyBjb250ZXh0OlxuICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcbiAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2VcbiAgICAvLyBhbmQgaXRzIGhvc3QuXG4gICAgdGhpcy5fY29udGV4dCA9IG9wdGlvbnMuX2NvbnRleHQgfHwgdGhpcy4kcGFyZW50O1xuXG4gICAgLy8gc2NvcGU6XG4gICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcbiAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG4gICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgIHRoaXMuX3Njb3BlID0gb3B0aW9ucy5fc2NvcGU7XG5cbiAgICAvLyBmcmFnbWVudDpcbiAgICAvLyBpZiB0aGlzIGluc3RhbmNlIGlzIGNvbXBpbGVkIGluc2lkZSBhIEZyYWdtZW50LCBpdFxuICAgIC8vIG5lZWRzIHRvIHJlaWdzdGVyIGl0c2VsZiBhcyBhIGNoaWxkIG9mIHRoYXQgZnJhZ21lbnRcbiAgICAvLyBmb3IgYXR0YWNoL2RldGFjaCB0byB3b3JrIHByb3Blcmx5LlxuICAgIHRoaXMuX2ZyYWcgPSBvcHRpb25zLl9mcmFnO1xuICAgIGlmICh0aGlzLl9mcmFnKSB7XG4gICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgLy8gcHVzaCBzZWxmIGludG8gcGFyZW50IC8gdHJhbnNjbHVzaW9uIGhvc3RcbiAgICBpZiAodGhpcy4kcGFyZW50KSB7XG4gICAgICB0aGlzLiRwYXJlbnQuJGNoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgLy8gbWVyZ2Ugb3B0aW9ucy5cbiAgICBvcHRpb25zID0gdGhpcy4kb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnMsIG9wdGlvbnMsIHRoaXMpO1xuXG4gICAgLy8gc2V0IHJlZlxuICAgIHRoaXMuX3VwZGF0ZVJlZigpO1xuXG4gICAgLy8gaW5pdGlhbGl6ZSBkYXRhIGFzIGVtcHR5IG9iamVjdC5cbiAgICAvLyBpdCB3aWxsIGJlIGZpbGxlZCB1cCBpbiBfaW5pdERhdGEoKS5cbiAgICB0aGlzLl9kYXRhID0ge307XG5cbiAgICAvLyBjYWxsIGluaXQgaG9va1xuICAgIHRoaXMuX2NhbGxIb29rKCdpbml0Jyk7XG5cbiAgICAvLyBpbml0aWFsaXplIGRhdGEgb2JzZXJ2YXRpb24gYW5kIHNjb3BlIGluaGVyaXRhbmNlLlxuICAgIHRoaXMuX2luaXRTdGF0ZSgpO1xuXG4gICAgLy8gc2V0dXAgZXZlbnQgc3lzdGVtIGFuZCBvcHRpb24gZXZlbnRzLlxuICAgIHRoaXMuX2luaXRFdmVudHMoKTtcblxuICAgIC8vIGNhbGwgY3JlYXRlZCBob29rXG4gICAgdGhpcy5fY2FsbEhvb2soJ2NyZWF0ZWQnKTtcblxuICAgIC8vIGlmIGBlbGAgb3B0aW9uIGlzIHBhc3NlZCwgc3RhcnQgY29tcGlsYXRpb24uXG4gICAgaWYgKG9wdGlvbnMuZWwpIHtcbiAgICAgIHRoaXMuJG1vdW50KG9wdGlvbnMuZWwpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIHBhdGhDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblxuLy8gYWN0aW9uc1xudmFyIEFQUEVORCA9IDA7XG52YXIgUFVTSCA9IDE7XG52YXIgSU5DX1NVQl9QQVRIX0RFUFRIID0gMjtcbnZhciBQVVNIX1NVQl9QQVRIID0gMztcblxuLy8gc3RhdGVzXG52YXIgQkVGT1JFX1BBVEggPSAwO1xudmFyIElOX1BBVEggPSAxO1xudmFyIEJFRk9SRV9JREVOVCA9IDI7XG52YXIgSU5fSURFTlQgPSAzO1xudmFyIElOX1NVQl9QQVRIID0gNDtcbnZhciBJTl9TSU5HTEVfUVVPVEUgPSA1O1xudmFyIElOX0RPVUJMRV9RVU9URSA9IDY7XG52YXIgQUZURVJfUEFUSCA9IDc7XG52YXIgRVJST1IgPSA4O1xuXG52YXIgcGF0aFN0YXRlTWFjaGluZSA9IFtdO1xuXG5wYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9QQVRIXSA9IHtcbiAgJ3dzJzogW0JFRk9SRV9QQVRIXSxcbiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fUEFUSF0gPSB7XG4gICd3cyc6IFtJTl9QQVRIXSxcbiAgJy4nOiBbQkVGT1JFX0lERU5UXSxcbiAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuICAnZW9mJzogW0FGVEVSX1BBVEhdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9JREVOVF0gPSB7XG4gICd3cyc6IFtCRUZPUkVfSURFTlRdLFxuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fSURFTlRdID0ge1xuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnd3MnOiBbSU5fUEFUSCwgUFVTSF0sXG4gICcuJzogW0JFRk9SRV9JREVOVCwgUFVTSF0sXG4gICdbJzogW0lOX1NVQl9QQVRILCBQVVNIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRILCBQVVNIXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7XG4gIFwiJ1wiOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdLFxuICAnXCInOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSCwgSU5DX1NVQl9QQVRIX0RFUFRIXSxcbiAgJ10nOiBbSU5fUEFUSCwgUFVTSF9TVUJfUEFUSF0sXG4gICdlb2YnOiBFUlJPUixcbiAgJ2Vsc2UnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fU0lOR0xFX1FVT1RFXSA9IHtcbiAgXCInXCI6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fRE9VQkxFX1FVT1RFXSA9IHtcbiAgJ1wiJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuICAnZW9mJzogRVJST1IsXG4gICdlbHNlJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXVxufTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSBjaGFyYWN0ZXIgaW4gYSBrZXlwYXRoLlxuICpcbiAqIEBwYXJhbSB7Q2hhcn0gY2hcbiAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuICovXG5cbmZ1bmN0aW9uIGdldFBhdGhDaGFyVHlwZShjaCkge1xuICBpZiAoY2ggPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAnZW9mJztcbiAgfVxuXG4gIHZhciBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcblxuICBzd2l0Y2ggKGNvZGUpIHtcbiAgICBjYXNlIDB4NUI6IC8vIFtcbiAgICBjYXNlIDB4NUQ6IC8vIF1cbiAgICBjYXNlIDB4MkU6IC8vIC5cbiAgICBjYXNlIDB4MjI6IC8vIFwiXG4gICAgY2FzZSAweDI3OiAvLyAnXG4gICAgY2FzZSAweDMwOlxuICAgICAgLy8gMFxuICAgICAgcmV0dXJuIGNoO1xuXG4gICAgY2FzZSAweDVGOiAvLyBfXG4gICAgY2FzZSAweDI0OlxuICAgICAgLy8gJFxuICAgICAgcmV0dXJuICdpZGVudCc7XG5cbiAgICBjYXNlIDB4MjA6IC8vIFNwYWNlXG4gICAgY2FzZSAweDA5OiAvLyBUYWJcbiAgICBjYXNlIDB4MEE6IC8vIE5ld2xpbmVcbiAgICBjYXNlIDB4MEQ6IC8vIFJldHVyblxuICAgIGNhc2UgMHhBMDogLy8gTm8tYnJlYWsgc3BhY2VcbiAgICBjYXNlIDB4RkVGRjogLy8gQnl0ZSBPcmRlciBNYXJrXG4gICAgY2FzZSAweDIwMjg6IC8vIExpbmUgU2VwYXJhdG9yXG4gICAgY2FzZSAweDIwMjk6XG4gICAgICAvLyBQYXJhZ3JhcGggU2VwYXJhdG9yXG4gICAgICByZXR1cm4gJ3dzJztcbiAgfVxuXG4gIC8vIGEteiwgQS1aXG4gIGlmIChjb2RlID49IDB4NjEgJiYgY29kZSA8PSAweDdBIHx8IGNvZGUgPj0gMHg0MSAmJiBjb2RlIDw9IDB4NUEpIHtcbiAgICByZXR1cm4gJ2lkZW50JztcbiAgfVxuXG4gIC8vIDEtOVxuICBpZiAoY29kZSA+PSAweDMxICYmIGNvZGUgPD0gMHgzOSkge1xuICAgIHJldHVybiAnbnVtYmVyJztcbiAgfVxuXG4gIHJldHVybiAnZWxzZSc7XG59XG5cbi8qKlxuICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzXG4gKiBhIGxpdGVyYWwgc3RyaW5nIG9yIG51bWJlci4gT3RoZXJ3aXNlIHByZXBlbmQgdGhlXG4gKiBkeW5hbWljIGluZGljYXRvciAoKikuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRTdWJQYXRoKHBhdGgpIHtcbiAgdmFyIHRyaW1tZWQgPSBwYXRoLnRyaW0oKTtcbiAgLy8gaW52YWxpZCBsZWFkaW5nIDBcbiAgaWYgKHBhdGguY2hhckF0KDApID09PSAnMCcgJiYgaXNOYU4ocGF0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGlzTGl0ZXJhbCh0cmltbWVkKSA/IHN0cmlwUXVvdGVzKHRyaW1tZWQpIDogJyonICsgdHJpbW1lZDtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHN0cmluZyBwYXRoIGludG8gYW4gYXJyYXkgb2Ygc2VnbWVudHNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHBhdGgpIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgdmFyIGluZGV4ID0gLTE7XG4gIHZhciBtb2RlID0gQkVGT1JFX1BBVEg7XG4gIHZhciBzdWJQYXRoRGVwdGggPSAwO1xuICB2YXIgYywgbmV3Q2hhciwga2V5LCB0eXBlLCB0cmFuc2l0aW9uLCBhY3Rpb24sIHR5cGVNYXA7XG5cbiAgdmFyIGFjdGlvbnMgPSBbXTtcblxuICBhY3Rpb25zW1BVU0hdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICBrZXkgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuXG4gIGFjdGlvbnNbQVBQRU5EXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGtleSA9IG5ld0NoYXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSArPSBuZXdDaGFyO1xuICAgIH1cbiAgfTtcblxuICBhY3Rpb25zW0lOQ19TVUJfUEFUSF9ERVBUSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgYWN0aW9uc1tBUFBFTkRdKCk7XG4gICAgc3ViUGF0aERlcHRoKys7XG4gIH07XG5cbiAgYWN0aW9uc1tQVVNIX1NVQl9QQVRIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc3ViUGF0aERlcHRoID4gMCkge1xuICAgICAgc3ViUGF0aERlcHRoLS07XG4gICAgICBtb2RlID0gSU5fU1VCX1BBVEg7XG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ViUGF0aERlcHRoID0gMDtcbiAgICAgIGtleSA9IGZvcm1hdFN1YlBhdGgoa2V5KTtcbiAgICAgIGlmIChrZXkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdGlvbnNbUFVTSF0oKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gbWF5YmVVbmVzY2FwZVF1b3RlKCkge1xuICAgIHZhciBuZXh0Q2hhciA9IHBhdGhbaW5kZXggKyAxXTtcbiAgICBpZiAobW9kZSA9PT0gSU5fU0lOR0xFX1FVT1RFICYmIG5leHRDaGFyID09PSBcIidcIiB8fCBtb2RlID09PSBJTl9ET1VCTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09ICdcIicpIHtcbiAgICAgIGluZGV4Kys7XG4gICAgICBuZXdDaGFyID0gJ1xcXFwnICsgbmV4dENoYXI7XG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHdoaWxlIChtb2RlICE9IG51bGwpIHtcbiAgICBpbmRleCsrO1xuICAgIGMgPSBwYXRoW2luZGV4XTtcblxuICAgIGlmIChjID09PSAnXFxcXCcgJiYgbWF5YmVVbmVzY2FwZVF1b3RlKCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7XG4gICAgdHlwZU1hcCA9IHBhdGhTdGF0ZU1hY2hpbmVbbW9kZV07XG4gICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFsnZWxzZSddIHx8IEVSUk9SO1xuXG4gICAgaWYgKHRyYW5zaXRpb24gPT09IEVSUk9SKSB7XG4gICAgICByZXR1cm47IC8vIHBhcnNlIGVycm9yXG4gICAgfVxuXG4gICAgbW9kZSA9IHRyYW5zaXRpb25bMF07XG4gICAgYWN0aW9uID0gYWN0aW9uc1t0cmFuc2l0aW9uWzFdXTtcbiAgICBpZiAoYWN0aW9uKSB7XG4gICAgICBuZXdDaGFyID0gdHJhbnNpdGlvblsyXTtcbiAgICAgIG5ld0NoYXIgPSBuZXdDaGFyID09PSB1bmRlZmluZWQgPyBjIDogbmV3Q2hhcjtcbiAgICAgIGlmIChhY3Rpb24oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtb2RlID09PSBBRlRFUl9QQVRIKSB7XG4gICAgICBrZXlzLnJhdyA9IHBhdGg7XG4gICAgICByZXR1cm4ga2V5cztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRlcm5hbCBwYXJzZSB0aGF0IGNoZWNrIGZvciBhIGNhY2hlIGhpdCBmaXJzdFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgdmFyIGhpdCA9IHBhdGhDYWNoZS5nZXQocGF0aCk7XG4gIGlmICghaGl0KSB7XG4gICAgaGl0ID0gcGFyc2UocGF0aCk7XG4gICAgaWYgKGhpdCkge1xuICAgICAgcGF0aENhY2hlLnB1dChwYXRoLCBoaXQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaGl0O1xufVxuXG4vKipcbiAqIEdldCBmcm9tIGFuIG9iamVjdCBmcm9tIGEgcGF0aCBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICovXG5cbmZ1bmN0aW9uIGdldFBhdGgob2JqLCBwYXRoKSB7XG4gIHJldHVybiBwYXJzZUV4cHJlc3Npb24ocGF0aCkuZ2V0KG9iaik7XG59XG5cbi8qKlxuICogV2FybiBhZ2FpbnN0IHNldHRpbmcgbm9uLWV4aXN0ZW50IHJvb3QgcGF0aCBvbiBhIHZtLlxuICovXG5cbnZhciB3YXJuTm9uRXhpc3RlbnQ7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB3YXJuTm9uRXhpc3RlbnQgPSBmdW5jdGlvbiAocGF0aCwgdm0pIHtcbiAgICB3YXJuKCdZb3UgYXJlIHNldHRpbmcgYSBub24tZXhpc3RlbnQgcGF0aCBcIicgKyBwYXRoLnJhdyArICdcIiAnICsgJ29uIGEgdm0gaW5zdGFuY2UuIENvbnNpZGVyIHByZS1pbml0aWFsaXppbmcgdGhlIHByb3BlcnR5ICcgKyAnd2l0aCB0aGUgXCJkYXRhXCIgb3B0aW9uIGZvciBtb3JlIHJlbGlhYmxlIHJlYWN0aXZpdHkgJyArICdhbmQgYmV0dGVyIHBlcmZvcm1hbmNlLicsIHZtKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBTZXQgb24gYW4gb2JqZWN0IGZyb20gYSBwYXRoXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmcgfCBBcnJheX0gcGF0aFxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBzZXRQYXRoKG9iaiwgcGF0aCwgdmFsKSB7XG4gIHZhciBvcmlnaW5hbCA9IG9iajtcbiAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgIHBhdGggPSBwYXJzZShwYXRoKTtcbiAgfVxuICBpZiAoIXBhdGggfHwgIWlzT2JqZWN0KG9iaikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGxhc3QsIGtleTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGxhc3QgPSBvYmo7XG4gICAga2V5ID0gcGF0aFtpXTtcbiAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyonKSB7XG4gICAgICBrZXkgPSBwYXJzZUV4cHJlc3Npb24oa2V5LnNsaWNlKDEpKS5nZXQuY2FsbChvcmlnaW5hbCwgb3JpZ2luYWwpO1xuICAgIH1cbiAgICBpZiAoaSA8IGwgLSAxKSB7XG4gICAgICBvYmogPSBvYmpba2V5XTtcbiAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuICAgICAgICBvYmogPSB7fTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbGFzdC5faXNWdWUpIHtcbiAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgbGFzdCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KGxhc3QsIGtleSwgb2JqKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgICBvYmouJHNldChrZXksIHZhbCk7XG4gICAgICB9IGVsc2UgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvYmouX2lzVnVlKSB7XG4gICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KG9iaiwga2V5LCB2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxudmFyIHBhdGggPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VQYXRoOiBwYXJzZVBhdGgsXG4gIGdldFBhdGg6IGdldFBhdGgsXG4gIHNldFBhdGg6IHNldFBhdGhcbn0pO1xuXG52YXIgZXhwcmVzc2lvbkNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG52YXIgYWxsb3dlZEtleXdvcmRzID0gJ01hdGgsRGF0ZSx0aGlzLHRydWUsZmFsc2UsbnVsbCx1bmRlZmluZWQsSW5maW5pdHksTmFOLCcgKyAnaXNOYU4saXNGaW5pdGUsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksJyArICdlbmNvZGVVUklDb21wb25lbnQscGFyc2VJbnQscGFyc2VGbG9hdCc7XG52YXIgYWxsb3dlZEtleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBhbGxvd2VkS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cbi8vIGtleXdvcmRzIHRoYXQgZG9uJ3QgbWFrZSBzZW5zZSBpbnNpZGUgZXhwcmVzc2lvbnNcbnZhciBpbXByb3BlcktleXdvcmRzID0gJ2JyZWFrLGNhc2UsY2xhc3MsY2F0Y2gsY29uc3QsY29udGludWUsZGVidWdnZXIsZGVmYXVsdCwnICsgJ2RlbGV0ZSxkbyxlbHNlLGV4cG9ydCxleHRlbmRzLGZpbmFsbHksZm9yLGZ1bmN0aW9uLGlmLCcgKyAnaW1wb3J0LGluLGluc3RhbmNlb2YsbGV0LHJldHVybixzdXBlcixzd2l0Y2gsdGhyb3csdHJ5LCcgKyAndmFyLHdoaWxlLHdpdGgseWllbGQsZW51bSxhd2FpdCxpbXBsZW1lbnRzLHBhY2thZ2UsJyArICdwcm90ZWN0ZWQsc3RhdGljLGludGVyZmFjZSxwcml2YXRlLHB1YmxpYyc7XG52YXIgaW1wcm9wZXJLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgaW1wcm9wZXJLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblxudmFyIHdzUkUgPSAvXFxzL2c7XG52YXIgbmV3bGluZVJFID0gL1xcbi9nO1xudmFyIHNhdmVSRSA9IC9bXFx7LF1cXHMqW1xcd1xcJF9dK1xccyo6fCgnKD86W14nXFxcXF18XFxcXC4pKid8XCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifGAoPzpbXmBcXFxcXXxcXFxcLikqXFwkXFx7fFxcfSg/OlteYFxcXFxdfFxcXFwuKSpgfGAoPzpbXmBcXFxcXXxcXFxcLikqYCl8bmV3IHx0eXBlb2YgfHZvaWQgL2c7XG52YXIgcmVzdG9yZVJFID0gL1wiKFxcZCspXCIvZztcbnZhciBwYXRoVGVzdFJFID0gL15bQS1aYS16XyRdW1xcdyRdKig/OlxcLltBLVphLXpfJF1bXFx3JF0qfFxcWycuKj8nXFxdfFxcW1wiLio/XCJcXF18XFxbXFxkK1xcXXxcXFtbQS1aYS16XyRdW1xcdyRdKlxcXSkqJC87XG52YXIgaWRlbnRSRSA9IC9bXlxcdyRcXC5dKD86W0EtWmEtel8kXVtcXHckXSopL2c7XG52YXIgbGl0ZXJhbFZhbHVlUkUkMSA9IC9eKD86dHJ1ZXxmYWxzZXxudWxsfHVuZGVmaW5lZHxJbmZpbml0eXxOYU4pJC87XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vKipcbiAqIFNhdmUgLyBSZXdyaXRlIC8gUmVzdG9yZVxuICpcbiAqIFdoZW4gcmV3cml0aW5nIHBhdGhzIGZvdW5kIGluIGFuIGV4cHJlc3Npb24sIGl0IGlzXG4gKiBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgbGV0dGVyIHNlcXVlbmNlcyB0byBiZSBmb3VuZCBpblxuICogc3RyaW5ncyBhbmQgT2JqZWN0IGxpdGVyYWwgcHJvcGVydHkga2V5cy4gVGhlcmVmb3JlIHdlXG4gKiByZW1vdmUgYW5kIHN0b3JlIHRoZXNlIHBhcnRzIGluIGEgdGVtcG9yYXJ5IGFycmF5LCBhbmRcbiAqIHJlc3RvcmUgdGhlbSBhZnRlciB0aGUgcGF0aCByZXdyaXRlLlxuICovXG5cbnZhciBzYXZlZCA9IFtdO1xuXG4vKipcbiAqIFNhdmUgcmVwbGFjZXJcbiAqXG4gKiBUaGUgc2F2ZSByZWdleCBjYW4gbWF0Y2ggdHdvIHBvc3NpYmxlIGNhc2VzOlxuICogMS4gQW4gb3BlbmluZyBvYmplY3QgbGl0ZXJhbFxuICogMi4gQSBzdHJpbmdcbiAqIElmIG1hdGNoZWQgYXMgYSBwbGFpbiBzdHJpbmcsIHdlIG5lZWQgdG8gZXNjYXBlIGl0c1xuICogbmV3bGluZXMsIHNpbmNlIHRoZSBzdHJpbmcgbmVlZHMgdG8gYmUgcHJlc2VydmVkIHdoZW5cbiAqIGdlbmVyYXRpbmcgdGhlIGZ1bmN0aW9uIGJvZHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IGlzU3RyaW5nIC0gc3RyIGlmIG1hdGNoZWQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ30gLSBwbGFjZWhvbGRlciB3aXRoIGluZGV4XG4gKi9cblxuZnVuY3Rpb24gc2F2ZShzdHIsIGlzU3RyaW5nKSB7XG4gIHZhciBpID0gc2F2ZWQubGVuZ3RoO1xuICBzYXZlZFtpXSA9IGlzU3RyaW5nID8gc3RyLnJlcGxhY2UobmV3bGluZVJFLCAnXFxcXG4nKSA6IHN0cjtcbiAgcmV0dXJuICdcIicgKyBpICsgJ1wiJztcbn1cblxuLyoqXG4gKiBQYXRoIHJld3JpdGUgcmVwbGFjZXJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcmF3XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcmV3cml0ZShyYXcpIHtcbiAgdmFyIGMgPSByYXcuY2hhckF0KDApO1xuICB2YXIgcGF0aCA9IHJhdy5zbGljZSgxKTtcbiAgaWYgKGFsbG93ZWRLZXl3b3Jkc1JFLnRlc3QocGF0aCkpIHtcbiAgICByZXR1cm4gcmF3O1xuICB9IGVsc2Uge1xuICAgIHBhdGggPSBwYXRoLmluZGV4T2YoJ1wiJykgPiAtMSA/IHBhdGgucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpIDogcGF0aDtcbiAgICByZXR1cm4gYyArICdzY29wZS4nICsgcGF0aDtcbiAgfVxufVxuXG4vKipcbiAqIFJlc3RvcmUgcmVwbGFjZXJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gaSAtIG1hdGNoZWQgc2F2ZSBpbmRleFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHJlc3RvcmUoc3RyLCBpKSB7XG4gIHJldHVybiBzYXZlZFtpXTtcbn1cblxuLyoqXG4gKiBSZXdyaXRlIGFuIGV4cHJlc3Npb24sIHByZWZpeGluZyBhbGwgcGF0aCBhY2Nlc3NvcnMgd2l0aFxuICogYHNjb3BlLmAgYW5kIGdlbmVyYXRlIGdldHRlci9zZXR0ZXIgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVHZXR0ZXIoZXhwKSB7XG4gIGlmIChpbXByb3BlcktleXdvcmRzUkUudGVzdChleHApKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBdm9pZCB1c2luZyByZXNlcnZlZCBrZXl3b3JkcyBpbiBleHByZXNzaW9uOiAnICsgZXhwKTtcbiAgfVxuICAvLyByZXNldCBzdGF0ZVxuICBzYXZlZC5sZW5ndGggPSAwO1xuICAvLyBzYXZlIHN0cmluZ3MgYW5kIG9iamVjdCBsaXRlcmFsIGtleXNcbiAgdmFyIGJvZHkgPSBleHAucmVwbGFjZShzYXZlUkUsIHNhdmUpLnJlcGxhY2Uod3NSRSwgJycpO1xuICAvLyByZXdyaXRlIGFsbCBwYXRoc1xuICAvLyBwYWQgMSBzcGFjZSBoZXJlIGJlY2F1c2UgdGhlIHJlZ2V4IG1hdGNoZXMgMSBleHRyYSBjaGFyXG4gIGJvZHkgPSAoJyAnICsgYm9keSkucmVwbGFjZShpZGVudFJFLCByZXdyaXRlKS5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSk7XG4gIHJldHVybiBtYWtlR2V0dGVyRm4oYm9keSk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBnZXR0ZXIgZnVuY3Rpb24uIFJlcXVpcmVzIGV2YWwuXG4gKlxuICogV2UgaXNvbGF0ZSB0aGUgdHJ5L2NhdGNoIHNvIGl0IGRvZXNuJ3QgYWZmZWN0IHRoZVxuICogb3B0aW1pemF0aW9uIG9mIHRoZSBwYXJzZSBmdW5jdGlvbiB3aGVuIGl0IGlzIG5vdCBjYWxsZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGJvZHlcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlR2V0dGVyRm4oYm9keSkge1xuICB0cnkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbignc2NvcGUnLCAncmV0dXJuICcgKyBib2R5ICsgJzsnKTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoZS50b1N0cmluZygpLm1hdGNoKC91bnNhZmUtZXZhbHxDU1AvKSkge1xuICAgICAgICB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IGJ1aWxkIG9mIFZ1ZS5qcyBpbiBhbiBlbnZpcm9ubWVudCAnICsgJ3dpdGggQ29udGVudCBTZWN1cml0eSBQb2xpY3kgdGhhdCBwcm9oaWJpdHMgdW5zYWZlLWV2YWwuICcgKyAnVXNlIHRoZSBDU1AtY29tcGxpYW50IGJ1aWxkIGluc3RlYWQ6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbCNDU1AtY29tcGxpYW50LWJ1aWxkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuKCdJbnZhbGlkIGV4cHJlc3Npb24uICcgKyAnR2VuZXJhdGVkIGZ1bmN0aW9uIGJvZHk6ICcgKyBib2R5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vb3A7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGEgc2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgZXhwcmVzc2lvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZVNldHRlcihleHApIHtcbiAgdmFyIHBhdGggPSBwYXJzZVBhdGgoZXhwKTtcbiAgaWYgKHBhdGgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCB2YWwpIHtcbiAgICAgIHNldFBhdGgoc2NvcGUsIHBhdGgsIHZhbCk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgc2V0dGVyIGV4cHJlc3Npb246ICcgKyBleHApO1xuICB9XG59XG5cbi8qKlxuICogUGFyc2UgYW4gZXhwcmVzc2lvbiBpbnRvIHJlLXdyaXR0ZW4gZ2V0dGVyL3NldHRlcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHBhcmFtIHtCb29sZWFufSBuZWVkU2V0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZUV4cHJlc3Npb24oZXhwLCBuZWVkU2V0KSB7XG4gIGV4cCA9IGV4cC50cmltKCk7XG4gIC8vIHRyeSBjYWNoZVxuICB2YXIgaGl0ID0gZXhwcmVzc2lvbkNhY2hlLmdldChleHApO1xuICBpZiAoaGl0KSB7XG4gICAgaWYgKG5lZWRTZXQgJiYgIWhpdC5zZXQpIHtcbiAgICAgIGhpdC5zZXQgPSBjb21waWxlU2V0dGVyKGhpdC5leHApO1xuICAgIH1cbiAgICByZXR1cm4gaGl0O1xuICB9XG4gIHZhciByZXMgPSB7IGV4cDogZXhwIH07XG4gIHJlcy5nZXQgPSBpc1NpbXBsZVBhdGgoZXhwKSAmJiBleHAuaW5kZXhPZignWycpIDwgMFxuICAvLyBvcHRpbWl6ZWQgc3VwZXIgc2ltcGxlIGdldHRlclxuICA/IG1ha2VHZXR0ZXJGbignc2NvcGUuJyArIGV4cClcbiAgLy8gZHluYW1pYyBnZXR0ZXJcbiAgOiBjb21waWxlR2V0dGVyKGV4cCk7XG4gIGlmIChuZWVkU2V0KSB7XG4gICAgcmVzLnNldCA9IGNvbXBpbGVTZXR0ZXIoZXhwKTtcbiAgfVxuICBleHByZXNzaW9uQ2FjaGUucHV0KGV4cCwgcmVzKTtcbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgc2ltcGxlIHBhdGguXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1NpbXBsZVBhdGgoZXhwKSB7XG4gIHJldHVybiBwYXRoVGVzdFJFLnRlc3QoZXhwKSAmJlxuICAvLyBkb24ndCB0cmVhdCBsaXRlcmFsIHZhbHVlcyBhcyBwYXRoc1xuICAhbGl0ZXJhbFZhbHVlUkUkMS50ZXN0KGV4cCkgJiZcbiAgLy8gTWF0aCBjb25zdGFudHMgZS5nLiBNYXRoLlBJLCBNYXRoLkUgZXRjLlxuICBleHAuc2xpY2UoMCwgNSkgIT09ICdNYXRoLic7XG59XG5cbnZhciBleHByZXNzaW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gIHBhcnNlRXhwcmVzc2lvbjogcGFyc2VFeHByZXNzaW9uLFxuICBpc1NpbXBsZVBhdGg6IGlzU2ltcGxlUGF0aFxufSk7XG5cbi8vIHdlIGhhdmUgdHdvIHNlcGFyYXRlIHF1ZXVlczogb25lIGZvciBkaXJlY3RpdmUgdXBkYXRlc1xuLy8gYW5kIG9uZSBmb3IgdXNlciB3YXRjaGVyIHJlZ2lzdGVyZWQgdmlhICR3YXRjaCgpLlxuLy8gd2Ugd2FudCB0byBndWFyYW50ZWUgZGlyZWN0aXZlIHVwZGF0ZXMgdG8gYmUgY2FsbGVkXG4vLyBiZWZvcmUgdXNlciB3YXRjaGVycyBzbyB0aGF0IHdoZW4gdXNlciB3YXRjaGVycyBhcmVcbi8vIHRyaWdnZXJlZCwgdGhlIERPTSB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBpbiB1cGRhdGVkXG4vLyBzdGF0ZS5cblxudmFyIHF1ZXVlID0gW107XG52YXIgdXNlclF1ZXVlID0gW107XG52YXIgaGFzID0ge307XG52YXIgY2lyY3VsYXIgPSB7fTtcbnZhciB3YWl0aW5nID0gZmFsc2U7XG5cbi8qKlxuICogUmVzZXQgdGhlIGJhdGNoZXIncyBzdGF0ZS5cbiAqL1xuXG5mdW5jdGlvbiByZXNldEJhdGNoZXJTdGF0ZSgpIHtcbiAgcXVldWUubGVuZ3RoID0gMDtcbiAgdXNlclF1ZXVlLmxlbmd0aCA9IDA7XG4gIGhhcyA9IHt9O1xuICBjaXJjdWxhciA9IHt9O1xuICB3YWl0aW5nID0gZmFsc2U7XG59XG5cbi8qKlxuICogRmx1c2ggYm90aCBxdWV1ZXMgYW5kIHJ1biB0aGUgd2F0Y2hlcnMuXG4gKi9cblxuZnVuY3Rpb24gZmx1c2hCYXRjaGVyUXVldWUoKSB7XG4gIHZhciBfYWdhaW4gPSB0cnVlO1xuXG4gIF9mdW5jdGlvbjogd2hpbGUgKF9hZ2Fpbikge1xuICAgIF9hZ2FpbiA9IGZhbHNlO1xuXG4gICAgcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKTtcbiAgICBydW5CYXRjaGVyUXVldWUodXNlclF1ZXVlKTtcbiAgICAvLyB1c2VyIHdhdGNoZXJzIHRyaWdnZXJlZCBtb3JlIHdhdGNoZXJzLFxuICAgIC8vIGtlZXAgZmx1c2hpbmcgdW50aWwgaXQgZGVwbGV0ZXNcbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICBfYWdhaW4gPSB0cnVlO1xuICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuICAgIH1cbiAgICAvLyBkZXYgdG9vbCBob29rXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKGRldnRvb2xzICYmIGNvbmZpZy5kZXZ0b29scykge1xuICAgICAgZGV2dG9vbHMuZW1pdCgnZmx1c2gnKTtcbiAgICB9XG4gICAgcmVzZXRCYXRjaGVyU3RhdGUoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJ1biB0aGUgd2F0Y2hlcnMgaW4gYSBzaW5nbGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcXVldWVcbiAqL1xuXG5mdW5jdGlvbiBydW5CYXRjaGVyUXVldWUocXVldWUpIHtcbiAgLy8gZG8gbm90IGNhY2hlIGxlbmd0aCBiZWNhdXNlIG1vcmUgd2F0Y2hlcnMgbWlnaHQgYmUgcHVzaGVkXG4gIC8vIGFzIHdlIHJ1biBleGlzdGluZyB3YXRjaGVyc1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHdhdGNoZXIgPSBxdWV1ZVtpXTtcbiAgICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuICAgIGhhc1tpZF0gPSBudWxsO1xuICAgIHdhdGNoZXIucnVuKCk7XG4gICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDE7XG4gICAgICBpZiAoY2lyY3VsYXJbaWRdID4gY29uZmlnLl9tYXhVcGRhdGVDb3VudCkge1xuICAgICAgICB3YXJuKCdZb3UgbWF5IGhhdmUgYW4gaW5maW5pdGUgdXBkYXRlIGxvb3AgZm9yIHdhdGNoZXIgJyArICd3aXRoIGV4cHJlc3Npb24gXCInICsgd2F0Y2hlci5leHByZXNzaW9uICsgJ1wiJywgd2F0Y2hlci52bSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBxdWV1ZS5sZW5ndGggPSAwO1xufVxuXG4vKipcbiAqIFB1c2ggYSB3YXRjaGVyIGludG8gdGhlIHdhdGNoZXIgcXVldWUuXG4gKiBKb2JzIHdpdGggZHVwbGljYXRlIElEcyB3aWxsIGJlIHNraXBwZWQgdW5sZXNzIGl0J3NcbiAqIHB1c2hlZCB3aGVuIHRoZSBxdWV1ZSBpcyBiZWluZyBmbHVzaGVkLlxuICpcbiAqIEBwYXJhbSB7V2F0Y2hlcn0gd2F0Y2hlclxuICogICBwcm9wZXJ0aWVzOlxuICogICAtIHtOdW1iZXJ9IGlkXG4gKiAgIC0ge0Z1bmN0aW9ufSBydW5cbiAqL1xuXG5mdW5jdGlvbiBwdXNoV2F0Y2hlcih3YXRjaGVyKSB7XG4gIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG4gIGlmIChoYXNbaWRdID09IG51bGwpIHtcbiAgICAvLyBwdXNoIHdhdGNoZXIgaW50byBhcHByb3ByaWF0ZSBxdWV1ZVxuICAgIHZhciBxID0gd2F0Y2hlci51c2VyID8gdXNlclF1ZXVlIDogcXVldWU7XG4gICAgaGFzW2lkXSA9IHEubGVuZ3RoO1xuICAgIHEucHVzaCh3YXRjaGVyKTtcbiAgICAvLyBxdWV1ZSB0aGUgZmx1c2hcbiAgICBpZiAoIXdhaXRpbmcpIHtcbiAgICAgIHdhaXRpbmcgPSB0cnVlO1xuICAgICAgbmV4dFRpY2soZmx1c2hCYXRjaGVyUXVldWUpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgdWlkJDIgPSAwO1xuXG4vKipcbiAqIEEgd2F0Y2hlciBwYXJzZXMgYW4gZXhwcmVzc2lvbiwgY29sbGVjdHMgZGVwZW5kZW5jaWVzLFxuICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy5cbiAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogICAgICAgICAgICAgICAgIC0ge0FycmF5fSBmaWx0ZXJzXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdHdvV2F5XG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHVzZXJcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBzeW5jXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGF6eVxuICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcHJlUHJvY2Vzc11cbiAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3Bvc3RQcm9jZXNzXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG4gIC8vIG1peCBpbiBvcHRpb25zXG4gIGlmIChvcHRpb25zKSB7XG4gICAgZXh0ZW5kKHRoaXMsIG9wdGlvbnMpO1xuICB9XG4gIHZhciBpc0ZuID0gdHlwZW9mIGV4cE9yRm4gPT09ICdmdW5jdGlvbic7XG4gIHRoaXMudm0gPSB2bTtcbiAgdm0uX3dhdGNoZXJzLnB1c2godGhpcyk7XG4gIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm47XG4gIHRoaXMuY2IgPSBjYjtcbiAgdGhpcy5pZCA9ICsrdWlkJDI7IC8vIHVpZCBmb3IgYmF0Y2hpbmdcbiAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICB0aGlzLmRpcnR5ID0gdGhpcy5sYXp5OyAvLyBmb3IgbGF6eSB3YXRjaGVyc1xuICB0aGlzLmRlcHMgPSBbXTtcbiAgdGhpcy5uZXdEZXBzID0gW107XG4gIHRoaXMuZGVwSWRzID0gbmV3IF9TZXQoKTtcbiAgdGhpcy5uZXdEZXBJZHMgPSBuZXcgX1NldCgpO1xuICB0aGlzLnByZXZFcnJvciA9IG51bGw7IC8vIGZvciBhc3luYyBlcnJvciBzdGFja3NcbiAgLy8gcGFyc2UgZXhwcmVzc2lvbiBmb3IgZ2V0dGVyL3NldHRlclxuICBpZiAoaXNGbikge1xuICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcbiAgICB0aGlzLnNldHRlciA9IHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cE9yRm4sIHRoaXMudHdvV2F5KTtcbiAgICB0aGlzLmdldHRlciA9IHJlcy5nZXQ7XG4gICAgdGhpcy5zZXR0ZXIgPSByZXMuc2V0O1xuICB9XG4gIHRoaXMudmFsdWUgPSB0aGlzLmxhenkgPyB1bmRlZmluZWQgOiB0aGlzLmdldCgpO1xuICAvLyBzdGF0ZSBmb3IgYXZvaWRpbmcgZmFsc2UgdHJpZ2dlcnMgZm9yIGRlZXAgYW5kIEFycmF5XG4gIC8vIHdhdGNoZXJzIGR1cmluZyB2bS5fZGlnZXN0KClcbiAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBFdmFsdWF0ZSB0aGUgZ2V0dGVyLCBhbmQgcmUtY29sbGVjdCBkZXBlbmRlbmNpZXMuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmJlZm9yZUdldCgpO1xuICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG4gIHZhciB2YWx1ZTtcbiAgdHJ5IHtcbiAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIGV4cHJlc3Npb24gJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuICAgIH1cbiAgfVxuICAvLyBcInRvdWNoXCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXNcbiAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nXG4gIGlmICh0aGlzLmRlZXApIHtcbiAgICB0cmF2ZXJzZSh2YWx1ZSk7XG4gIH1cbiAgaWYgKHRoaXMucHJlUHJvY2Vzcykge1xuICAgIHZhbHVlID0gdGhpcy5wcmVQcm9jZXNzKHZhbHVlKTtcbiAgfVxuICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCBudWxsLCB0aGlzLmZpbHRlcnMsIGZhbHNlKTtcbiAgfVxuICBpZiAodGhpcy5wb3N0UHJvY2Vzcykge1xuICAgIHZhbHVlID0gdGhpcy5wb3N0UHJvY2Vzcyh2YWx1ZSk7XG4gIH1cbiAgdGhpcy5hZnRlckdldCgpO1xuICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG4gIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIHRoaXMudmFsdWUsIHRoaXMuZmlsdGVycywgdHJ1ZSk7XG4gIH1cbiAgdHJ5IHtcbiAgICB0aGlzLnNldHRlci5jYWxsKHNjb3BlLCBzY29wZSwgdmFsdWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG4gICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgc2V0dGVyICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcbiAgICB9XG4gIH1cbiAgLy8gdHdvLXdheSBzeW5jIGZvciB2LWZvciBhbGlhc1xuICB2YXIgZm9yQ29udGV4dCA9IHNjb3BlLiRmb3JDb250ZXh0O1xuICBpZiAoZm9yQ29udGV4dCAmJiBmb3JDb250ZXh0LmFsaWFzID09PSB0aGlzLmV4cHJlc3Npb24pIHtcbiAgICBpZiAoZm9yQ29udGV4dC5maWx0ZXJzKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdHdvLXdheSBiaW5kaW5nIG9uICcgKyAnYSB2LWZvciBhbGlhcyAoJyArIHRoaXMuZXhwcmVzc2lvbiArICcpLCBhbmQgdGhlICcgKyAndi1mb3IgaGFzIGZpbHRlcnMuIFRoaXMgd2lsbCBub3Qgd29yayBwcm9wZXJseS4gJyArICdFaXRoZXIgcmVtb3ZlIHRoZSBmaWx0ZXJzIG9yIHVzZSBhbiBhcnJheSBvZiAnICsgJ29iamVjdHMgYW5kIGJpbmQgdG8gb2JqZWN0IHByb3BlcnRpZXMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yQ29udGV4dC5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNjb3BlLiRrZXkpIHtcbiAgICAgICAgLy8gb3JpZ2luYWwgaXMgYW4gb2JqZWN0XG4gICAgICAgIGZvckNvbnRleHQucmF3VmFsdWVbc2NvcGUuJGtleV0gPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvckNvbnRleHQucmF3VmFsdWUuJHNldChzY29wZS4kaW5kZXgsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBQcmVwYXJlIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYmVmb3JlR2V0ID0gZnVuY3Rpb24gKCkge1xuICBEZXAudGFyZ2V0ID0gdGhpcztcbn07XG5cbi8qKlxuICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0RlcH0gZGVwXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gKGRlcCkge1xuICB2YXIgaWQgPSBkZXAuaWQ7XG4gIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGlkKSkge1xuICAgIHRoaXMubmV3RGVwSWRzLmFkZChpZCk7XG4gICAgdGhpcy5uZXdEZXBzLnB1c2goZGVwKTtcbiAgICBpZiAoIXRoaXMuZGVwSWRzLmhhcyhpZCkpIHtcbiAgICAgIGRlcC5hZGRTdWIodGhpcyk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENsZWFuIHVwIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYWZ0ZXJHZXQgPSBmdW5jdGlvbiAoKSB7XG4gIERlcC50YXJnZXQgPSBudWxsO1xuICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgZGVwID0gdGhpcy5kZXBzW2ldO1xuICAgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGRlcC5pZCkpIHtcbiAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyk7XG4gICAgfVxuICB9XG4gIHZhciB0bXAgPSB0aGlzLmRlcElkcztcbiAgdGhpcy5kZXBJZHMgPSB0aGlzLm5ld0RlcElkcztcbiAgdGhpcy5uZXdEZXBJZHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG4gIHRtcCA9IHRoaXMuZGVwcztcbiAgdGhpcy5kZXBzID0gdGhpcy5uZXdEZXBzO1xuICB0aGlzLm5ld0RlcHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwcy5sZW5ndGggPSAwO1xufTtcblxuLyoqXG4gKiBTdWJzY3JpYmVyIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSBzaGFsbG93XG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHNoYWxsb3cpIHtcbiAgaWYgKHRoaXMubGF6eSkge1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICB9IGVsc2UgaWYgKHRoaXMuc3luYyB8fCAhY29uZmlnLmFzeW5jKSB7XG4gICAgdGhpcy5ydW4oKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBpZiBxdWV1ZWQsIG9ubHkgb3ZlcndyaXRlIHNoYWxsb3cgd2l0aCBub24tc2hhbGxvdyxcbiAgICAvLyBidXQgbm90IHRoZSBvdGhlciB3YXkgYXJvdW5kLlxuICAgIHRoaXMuc2hhbGxvdyA9IHRoaXMucXVldWVkID8gc2hhbGxvdyA/IHRoaXMuc2hhbGxvdyA6IGZhbHNlIDogISFzaGFsbG93O1xuICAgIHRoaXMucXVldWVkID0gdHJ1ZTtcbiAgICAvLyByZWNvcmQgYmVmb3JlLXB1c2ggZXJyb3Igc3RhY2sgaW4gZGVidWcgbW9kZVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1Zykge1xuICAgICAgdGhpcy5wcmV2RXJyb3IgPSBuZXcgRXJyb3IoJ1t2dWVdIGFzeW5jIHN0YWNrIHRyYWNlJyk7XG4gICAgfVxuICAgIHB1c2hXYXRjaGVyKHRoaXMpO1xuICB9XG59O1xuXG4vKipcbiAqIEJhdGNoZXIgam9iIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBiYXRjaGVyLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoKTtcbiAgICBpZiAodmFsdWUgIT09IHRoaXMudmFsdWUgfHxcbiAgICAvLyBEZWVwIHdhdGNoZXJzIGFuZCB3YXRjaGVycyBvbiBPYmplY3QvQXJyYXlzIHNob3VsZCBmaXJlIGV2ZW5cbiAgICAvLyB3aGVuIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZSwgYmVjYXVzZSB0aGUgdmFsdWUgbWF5XG4gICAgLy8gaGF2ZSBtdXRhdGVkOyBidXQgb25seSBkbyBzbyBpZiB0aGlzIGlzIGFcbiAgICAvLyBub24tc2hhbGxvdyB1cGRhdGUgKGNhdXNlZCBieSBhIHZtIGRpZ2VzdCkuXG4gICAgKGlzT2JqZWN0KHZhbHVlKSB8fCB0aGlzLmRlZXApICYmICF0aGlzLnNoYWxsb3cpIHtcbiAgICAgIC8vIHNldCBuZXcgdmFsdWVcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAvLyBpbiBkZWJ1ZyArIGFzeW5jIG1vZGUsIHdoZW4gYSB3YXRjaGVyIGNhbGxiYWNrc1xuICAgICAgLy8gdGhyb3dzLCB3ZSBhbHNvIHRocm93IHRoZSBzYXZlZCBiZWZvcmUtcHVzaCBlcnJvclxuICAgICAgLy8gc28gdGhlIGZ1bGwgY3Jvc3MtdGljayBzdGFjayB0cmFjZSBpcyBhdmFpbGFibGUuXG4gICAgICB2YXIgcHJldkVycm9yID0gdGhpcy5wcmV2RXJyb3I7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1ZyAmJiBwcmV2RXJyb3IpIHtcbiAgICAgICAgdGhpcy5wcmV2RXJyb3IgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3cgcHJldkVycm9yO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuICB9XG59O1xuXG4vKipcbiAqIEV2YWx1YXRlIHRoZSB2YWx1ZSBvZiB0aGUgd2F0Y2hlci5cbiAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gYXZvaWQgb3ZlcndyaXRpbmcgYW5vdGhlciB3YXRjaGVyIHRoYXQgaXMgYmVpbmdcbiAgLy8gY29sbGVjdGVkLlxuICB2YXIgY3VycmVudCA9IERlcC50YXJnZXQ7XG4gIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpO1xuICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gIERlcC50YXJnZXQgPSBjdXJyZW50O1xufTtcblxuLyoqXG4gKiBEZXBlbmQgb24gYWxsIGRlcHMgY29sbGVjdGVkIGJ5IHRoaXMgd2F0Y2hlci5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHRoaXMuZGVwc1tpXS5kZXBlbmQoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YmNyaWJlciBsaXN0LlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0XG4gICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGV4cGVuc2l2ZSBvcGVyYXRpb24gc28gd2Ugc2tpcCBpdFxuICAgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBkZXN0cm95ZWQgb3IgaXMgcGVyZm9ybWluZyBhIHYtZm9yXG4gICAgLy8gcmUtcmVuZGVyICh0aGUgd2F0Y2hlciBsaXN0IGlzIHRoZW4gZmlsdGVyZWQgYnkgdi1mb3IpLlxuICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdGhpcy52bS5fdkZvclJlbW92aW5nKSB7XG4gICAgICB0aGlzLnZtLl93YXRjaGVycy4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnZtID0gdGhpcy5jYiA9IHRoaXMudmFsdWUgPSBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIFJlY3J1c2l2ZWx5IHRyYXZlcnNlIGFuIG9iamVjdCB0byBldm9rZSBhbGwgY29udmVydGVkXG4gKiBnZXR0ZXJzLCBzbyB0aGF0IGV2ZXJ5IG5lc3RlZCBwcm9wZXJ0eSBpbnNpZGUgdGhlIG9iamVjdFxuICogaXMgY29sbGVjdGVkIGFzIGEgXCJkZWVwXCIgZGVwZW5kZW5jeS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbnZhciBzZWVuT2JqZWN0cyA9IG5ldyBfU2V0KCk7XG5mdW5jdGlvbiB0cmF2ZXJzZSh2YWwsIHNlZW4pIHtcbiAgdmFyIGkgPSB1bmRlZmluZWQsXG4gICAgICBrZXlzID0gdW5kZWZpbmVkO1xuICBpZiAoIXNlZW4pIHtcbiAgICBzZWVuID0gc2Vlbk9iamVjdHM7XG4gICAgc2Vlbi5jbGVhcigpO1xuICB9XG4gIHZhciBpc0EgPSBpc0FycmF5KHZhbCk7XG4gIHZhciBpc08gPSBpc09iamVjdCh2YWwpO1xuICBpZiAoKGlzQSB8fCBpc08pICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsKSkge1xuICAgIGlmICh2YWwuX19vYl9fKSB7XG4gICAgICB2YXIgZGVwSWQgPSB2YWwuX19vYl9fLmRlcC5pZDtcbiAgICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2Vlbi5hZGQoZGVwSWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNBKSB7XG4gICAgICBpID0gdmFsLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtpXSwgc2Vlbik7XG4gICAgfSBlbHNlIGlmIChpc08pIHtcbiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuICAgICAgaSA9IGtleXMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2tleXNbaV1dLCBzZWVuKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHRleHQkMSA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHRoaXMuYXR0ciA9IHRoaXMuZWwubm9kZVR5cGUgPT09IDMgPyAnZGF0YScgOiAndGV4dENvbnRlbnQnO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdGhpcy5lbFt0aGlzLmF0dHJdID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgfVxufTtcblxudmFyIHRlbXBsYXRlQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG52YXIgaWRTZWxlY3RvckNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG52YXIgbWFwID0ge1xuICBlZmF1bHQ6IFswLCAnJywgJyddLFxuICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuICB0cjogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG4gIGNvbDogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J11cbn07XG5cbm1hcC50ZCA9IG1hcC50aCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXG5tYXAub3B0aW9uID0gbWFwLm9wdGdyb3VwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J107XG5cbm1hcC50aGVhZCA9IG1hcC50Ym9keSA9IG1hcC5jb2xncm91cCA9IG1hcC5jYXB0aW9uID0gbWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cbm1hcC5nID0gbWFwLmRlZnMgPSBtYXAuc3ltYm9sID0gbWFwLnVzZSA9IG1hcC5pbWFnZSA9IG1hcC50ZXh0ID0gbWFwLmNpcmNsZSA9IG1hcC5lbGxpcHNlID0gbWFwLmxpbmUgPSBtYXAucGF0aCA9IG1hcC5wb2x5Z29uID0gbWFwLnBvbHlsaW5lID0gbWFwLnJlY3QgPSBbMSwgJzxzdmcgJyArICd4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgJyArICd4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiAnICsgJ3htbG5zOmV2PVwiaHR0cDovL3d3dy53My5vcmcvMjAwMS94bWwtZXZlbnRzXCInICsgJ3ZlcnNpb249XCIxLjFcIj4nLCAnPC9zdmc+J107XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgc3VwcG9ydGVkIHRlbXBsYXRlIG5vZGUgd2l0aCBhXG4gKiBEb2N1bWVudEZyYWdtZW50IGNvbnRlbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzUmVhbFRlbXBsYXRlKG5vZGUpIHtcbiAgcmV0dXJuIGlzVGVtcGxhdGUobm9kZSkgJiYgaXNGcmFnbWVudChub2RlLmNvbnRlbnQpO1xufVxuXG52YXIgdGFnUkUkMSA9IC88KFtcXHc6LV0rKS87XG52YXIgZW50aXR5UkUgPSAvJiM/XFx3Kz87LztcbnZhciBjb21tZW50UkUgPSAvPCEtLS87XG5cbi8qKlxuICogQ29udmVydCBhIHN0cmluZyB0ZW1wbGF0ZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG4gKiBEZXRlcm1pbmVzIGNvcnJlY3Qgd3JhcHBpbmcgYnkgdGFnIHR5cGVzLiBXcmFwcGluZ1xuICogc3RyYXRlZ3kgZm91bmQgaW4galF1ZXJ5ICYgY29tcG9uZW50L2RvbWlmeS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVTdHJpbmdcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGVTdHJpbmcsIHJhdykge1xuICAvLyB0cnkgYSBjYWNoZSBoaXQgZmlyc3RcbiAgdmFyIGNhY2hlS2V5ID0gcmF3ID8gdGVtcGxhdGVTdHJpbmcgOiB0ZW1wbGF0ZVN0cmluZy50cmltKCk7XG4gIHZhciBoaXQgPSB0ZW1wbGF0ZUNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG5cbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciB0YWdNYXRjaCA9IHRlbXBsYXRlU3RyaW5nLm1hdGNoKHRhZ1JFJDEpO1xuICB2YXIgZW50aXR5TWF0Y2ggPSBlbnRpdHlSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcbiAgdmFyIGNvbW1lbnRNYXRjaCA9IGNvbW1lbnRSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcblxuICBpZiAoIXRhZ01hdGNoICYmICFlbnRpdHlNYXRjaCAmJiAhY29tbWVudE1hdGNoKSB7XG4gICAgLy8gdGV4dCBvbmx5LCByZXR1cm4gYSBzaW5nbGUgdGV4dCBub2RlLlxuICAgIGZyYWcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGVtcGxhdGVTdHJpbmcpKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFnID0gdGFnTWF0Y2ggJiYgdGFnTWF0Y2hbMV07XG4gICAgdmFyIHdyYXAgPSBtYXBbdGFnXSB8fCBtYXAuZWZhdWx0O1xuICAgIHZhciBkZXB0aCA9IHdyYXBbMF07XG4gICAgdmFyIHByZWZpeCA9IHdyYXBbMV07XG4gICAgdmFyIHN1ZmZpeCA9IHdyYXBbMl07XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIG5vZGUuaW5uZXJIVE1MID0gcHJlZml4ICsgdGVtcGxhdGVTdHJpbmcgKyBzdWZmaXg7XG4gICAgd2hpbGUgKGRlcHRoLS0pIHtcbiAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDtcbiAgICB9XG5cbiAgICB2YXIgY2hpbGQ7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICB3aGlsZSAoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgfVxuICBpZiAoIXJhdykge1xuICAgIHRyaW1Ob2RlKGZyYWcpO1xuICB9XG4gIHRlbXBsYXRlQ2FjaGUucHV0KGNhY2hlS2V5LCBmcmFnKTtcbiAgcmV0dXJuIGZyYWc7XG59XG5cbi8qKlxuICogQ29udmVydCBhIHRlbXBsYXRlIG5vZGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBub2RlVG9GcmFnbWVudChub2RlKSB7XG4gIC8vIGlmIGl0cyBhIHRlbXBsYXRlIHRhZyBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQsXG4gIC8vIGl0cyBjb250ZW50IGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudC4gSG93ZXZlciwgaU9TIFNhZmFyaSBoYXNcbiAgLy8gYnVnIHdoZW4gdXNpbmcgZGlyZWN0bHkgY2xvbmVkIHRlbXBsYXRlIGNvbnRlbnQgd2l0aCB0b3VjaFxuICAvLyBldmVudHMgYW5kIGNhbiBjYXVzZSBjcmFzaGVzIHdoZW4gdGhlIG5vZGVzIGFyZSByZW1vdmVkIGZyb20gRE9NLCBzbyB3ZVxuICAvLyBoYXZlIHRvIHRyZWF0IHRlbXBsYXRlIGVsZW1lbnRzIGFzIHN0cmluZyB0ZW1wbGF0ZXMuICgjMjgwNSlcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUuaW5uZXJIVE1MKTtcbiAgfVxuICAvLyBzY3JpcHQgdGVtcGxhdGVcbiAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1NDUklQVCcpIHtcbiAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLnRleHRDb250ZW50KTtcbiAgfVxuICAvLyBub3JtYWwgbm9kZSwgY2xvbmUgaXQgdG8gYXZvaWQgbXV0YXRpbmcgdGhlIG9yaWdpbmFsXG4gIHZhciBjbG9uZWROb2RlID0gY2xvbmVOb2RlKG5vZGUpO1xuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIGNoaWxkO1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICB3aGlsZSAoY2hpbGQgPSBjbG9uZWROb2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG4gIH1cbiAgdHJpbU5vZGUoZnJhZyk7XG4gIHJldHVybiBmcmFnO1xufVxuXG4vLyBUZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIFNhZmFyaSB0ZW1wbGF0ZSBjbG9uaW5nIGJ1Z1xuLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd3VnLmNnaT9pZD0xMzc3NTVcbnZhciBoYXNCcm9rZW5UZW1wbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChpbkJyb3dzZXIpIHtcbiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGEuaW5uZXJIVE1MID0gJzx0ZW1wbGF0ZT4xPC90ZW1wbGF0ZT4nO1xuICAgIHJldHVybiAhYS5jbG9uZU5vZGUodHJ1ZSkuZmlyc3RDaGlsZC5pbm5lckhUTUw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KSgpO1xuXG4vLyBUZXN0IGZvciBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGNsb25lIGJ1Z1xudmFyIGhhc1RleHRhcmVhQ2xvbmVCdWcgPSAoZnVuY3Rpb24gKCkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoaW5Ccm93c2VyKSB7XG4gICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIHQucGxhY2Vob2xkZXIgPSAndCc7XG4gICAgcmV0dXJuIHQuY2xvbmVOb2RlKHRydWUpLnZhbHVlID09PSAndCc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KSgpO1xuXG4vKipcbiAqIDEuIERlYWwgd2l0aCBTYWZhcmkgY2xvbmluZyBuZXN0ZWQgPHRlbXBsYXRlPiBidWcgYnlcbiAqICAgIG1hbnVhbGx5IGNsb25pbmcgYWxsIHRlbXBsYXRlIGluc3RhbmNlcy5cbiAqIDIuIERlYWwgd2l0aCBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZyBieSBzZXR0aW5nXG4gKiAgICB0aGUgY29ycmVjdCB2YWx1ZSBhZnRlciBjbG9uaW5nLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBub2RlXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yQWxsKSB7XG4gICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKCk7XG4gIH1cbiAgdmFyIHJlcyA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xuICB2YXIgaSwgb3JpZ2luYWwsIGNsb25lZDtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChoYXNCcm9rZW5UZW1wbGF0ZSkge1xuICAgIHZhciB0ZW1wQ2xvbmUgPSByZXM7XG4gICAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG4gICAgICBub2RlID0gbm9kZS5jb250ZW50O1xuICAgICAgdGVtcENsb25lID0gcmVzLmNvbnRlbnQ7XG4gICAgfVxuICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICAgIGNsb25lZCA9IHRlbXBDbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNsb25lZFtpXS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZU5vZGUob3JpZ2luYWxbaV0pLCBjbG9uZWRbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGhhc1RleHRhcmVhQ2xvbmVCdWcpIHtcbiAgICBpZiAobm9kZS50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICByZXMudmFsdWUgPSBub2RlLnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcbiAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICAgICAgY2xvbmVkID0gcmVzLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG4gICAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgY2xvbmVkW2ldLnZhbHVlID0gb3JpZ2luYWxbaV0udmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24gYW5kIG5vcm1hbGl6ZXMgaXQgaW50byBhXG4gKiBhIERvY3VtZW50RnJhZ21lbnQgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHBhcnRpYWwgb3IgYVxuICogaW5zdGFuY2UgdGVtcGxhdGUuXG4gKlxuICogQHBhcmFtIHsqfSB0ZW1wbGF0ZVxuICogICAgICAgIFBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlOlxuICogICAgICAgIC0gRG9jdW1lbnRGcmFnbWVudCBvYmplY3RcbiAqICAgICAgICAtIE5vZGUgb2JqZWN0IG9mIHR5cGUgVGVtcGxhdGVcbiAqICAgICAgICAtIGlkIHNlbGVjdG9yOiAnI3NvbWUtdGVtcGxhdGUtaWQnXG4gKiAgICAgICAgLSB0ZW1wbGF0ZSBzdHJpbmc6ICc8ZGl2PjxzcGFuPnt7bXNnfX08L3NwYW4+PC9kaXY+J1xuICogQHBhcmFtIHtCb29sZWFufSBzaG91bGRDbG9uZVxuICogQHBhcmFtIHtCb29sZWFufSByYXdcbiAqICAgICAgICBpbmxpbmUgSFRNTCBpbnRlcnBvbGF0aW9uLiBEbyBub3QgY2hlY2sgZm9yIGlkXG4gKiAgICAgICAgc2VsZWN0b3IgYW5kIGtlZXAgd2hpdGVzcGFjZSBpbiB0aGUgc3RyaW5nLlxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudHx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgc2hvdWxkQ2xvbmUsIHJhdykge1xuICB2YXIgbm9kZSwgZnJhZztcblxuICAvLyBpZiB0aGUgdGVtcGxhdGUgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LFxuICAvLyBkbyBub3RoaW5nXG4gIGlmIChpc0ZyYWdtZW50KHRlbXBsYXRlKSkge1xuICAgIHRyaW1Ob2RlKHRlbXBsYXRlKTtcbiAgICByZXR1cm4gc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUodGVtcGxhdGUpIDogdGVtcGxhdGU7XG4gIH1cblxuICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuICAgIC8vIGlkIHNlbGVjdG9yXG4gICAgaWYgKCFyYXcgJiYgdGVtcGxhdGUuY2hhckF0KDApID09PSAnIycpIHtcbiAgICAgIC8vIGlkIHNlbGVjdG9yIGNhbiBiZSBjYWNoZWQgdG9vXG4gICAgICBmcmFnID0gaWRTZWxlY3RvckNhY2hlLmdldCh0ZW1wbGF0ZSk7XG4gICAgICBpZiAoIWZyYWcpIHtcbiAgICAgICAgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlLnNsaWNlKDEpKTtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQobm9kZSk7XG4gICAgICAgICAgLy8gc2F2ZSBzZWxlY3RvciB0byBjYWNoZVxuICAgICAgICAgIGlkU2VsZWN0b3JDYWNoZS5wdXQodGVtcGxhdGUsIGZyYWcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vcm1hbCBzdHJpbmcgdGVtcGxhdGVcbiAgICAgIGZyYWcgPSBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlLCByYXcpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5ub2RlVHlwZSkge1xuICAgIC8vIGEgZGlyZWN0IG5vZGVcbiAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQodGVtcGxhdGUpO1xuICB9XG5cbiAgcmV0dXJuIGZyYWcgJiYgc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUoZnJhZykgOiBmcmFnO1xufVxuXG52YXIgdGVtcGxhdGUgPSBPYmplY3QuZnJlZXplKHtcbiAgY2xvbmVOb2RlOiBjbG9uZU5vZGUsXG4gIHBhcnNlVGVtcGxhdGU6IHBhcnNlVGVtcGxhdGVcbn0pO1xuXG52YXIgaHRtbCA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGEgY29tbWVudCBub2RlIG1lYW5zIHRoaXMgaXMgYSBiaW5kaW5nIGZvclxuICAgIC8vIHt7eyBpbmxpbmUgdW5lc2NhcGVkIGh0bWwgfX19XG4gICAgaWYgKHRoaXMuZWwubm9kZVR5cGUgPT09IDgpIHtcbiAgICAgIC8vIGhvbGQgbm9kZXNcbiAgICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIHBsYWNlaG9sZGVyIHdpdGggcHJvcGVyIGFuY2hvclxuICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaHRtbCcpO1xuICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgIGlmICh0aGlzLm5vZGVzKSB7XG4gICAgICB0aGlzLnN3YXAodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLmlubmVySFRNTCA9IHZhbHVlO1xuICAgIH1cbiAgfSxcblxuICBzd2FwOiBmdW5jdGlvbiBzd2FwKHZhbHVlKSB7XG4gICAgLy8gcmVtb3ZlIG9sZCBub2Rlc1xuICAgIHZhciBpID0gdGhpcy5ub2Rlcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcmVtb3ZlKHRoaXMubm9kZXNbaV0pO1xuICAgIH1cbiAgICAvLyBjb252ZXJ0IG5ldyB2YWx1ZSB0byBhIGZyYWdtZW50XG4gICAgLy8gZG8gbm90IGF0dGVtcHQgdG8gcmV0cmlldmUgZnJvbSBpZCBzZWxlY3RvclxuICAgIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgLy8gc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGVzZSBub2RlcyBzbyB3ZSBjYW4gcmVtb3ZlIGxhdGVyXG4gICAgdGhpcy5ub2RlcyA9IHRvQXJyYXkoZnJhZy5jaGlsZE5vZGVzKTtcbiAgICBiZWZvcmUoZnJhZywgdGhpcy5hbmNob3IpO1xuICB9XG59O1xuXG4vKipcbiAqIEFic3RyYWN0aW9uIGZvciBhIHBhcnRpYWxseS1jb21waWxlZCBmcmFnbWVudC5cbiAqIENhbiBvcHRpb25hbGx5IGNvbXBpbGUgY29udGVudCB3aXRoIGEgY2hpbGQgc2NvcGUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtWdWV9IFtob3N0XVxuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAqIEBwYXJhbSB7RnJhZ21lbnR9IFtwYXJlbnRGcmFnXVxuICovXG5mdW5jdGlvbiBGcmFnbWVudChsaW5rZXIsIHZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuICB0aGlzLmNoaWxkcmVuID0gW107XG4gIHRoaXMuY2hpbGRGcmFncyA9IFtdO1xuICB0aGlzLnZtID0gdm07XG4gIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB0aGlzLnBhcmVudEZyYWcgPSBwYXJlbnRGcmFnO1xuICBpZiAocGFyZW50RnJhZykge1xuICAgIHBhcmVudEZyYWcuY2hpbGRGcmFncy5wdXNoKHRoaXMpO1xuICB9XG4gIHRoaXMudW5saW5rID0gbGlua2VyKHZtLCBmcmFnLCBob3N0LCBzY29wZSwgdGhpcyk7XG4gIHZhciBzaW5nbGUgPSB0aGlzLnNpbmdsZSA9IGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiZcbiAgLy8gZG8gbm90IGdvIHNpbmdsZSBtb2RlIGlmIHRoZSBvbmx5IG5vZGUgaXMgYW4gYW5jaG9yXG4gICFmcmFnLmNoaWxkTm9kZXNbMF0uX192X2FuY2hvcjtcbiAgaWYgKHNpbmdsZSkge1xuICAgIHRoaXMubm9kZSA9IGZyYWcuY2hpbGROb2Rlc1swXTtcbiAgICB0aGlzLmJlZm9yZSA9IHNpbmdsZUJlZm9yZTtcbiAgICB0aGlzLnJlbW92ZSA9IHNpbmdsZVJlbW92ZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLm5vZGUgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LXN0YXJ0Jyk7XG4gICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LWVuZCcpO1xuICAgIHRoaXMuZnJhZyA9IGZyYWc7XG4gICAgcHJlcGVuZCh0aGlzLm5vZGUsIGZyYWcpO1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuICAgIHRoaXMuYmVmb3JlID0gbXVsdGlCZWZvcmU7XG4gICAgdGhpcy5yZW1vdmUgPSBtdWx0aVJlbW92ZTtcbiAgfVxuICB0aGlzLm5vZGUuX192X2ZyYWcgPSB0aGlzO1xufVxuXG4vKipcbiAqIENhbGwgYXR0YWNoL2RldGFjaCBmb3IgYWxsIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpblxuICogdGhpcyBmcmFnbWVudC4gQWxzbyBkbyBzbyByZWN1cnNpdmVseSBmb3IgYWxsIGNoaWxkXG4gKiBmcmFnbWVudHMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG4gIHZhciBpLCBsO1xuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5jYWxsSG9vayhob29rKTtcbiAgfVxuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBob29rKHRoaXMuY2hpbGRyZW5baV0pO1xuICB9XG59O1xuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBzaW5nbGVCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcbiAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuICBtZXRob2QodGhpcy5ub2RlLCB0YXJnZXQsIHRoaXMudm0pO1xuICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBmcmFnbWVudCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuICovXG5cbmZ1bmN0aW9uIHNpbmdsZVJlbW92ZSgpIHtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcbiAgcmVtb3ZlV2l0aFRyYW5zaXRpb24odGhpcy5ub2RlLCB0aGlzLnZtLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcbiAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcbiAgICB9XG4gICAgc2VsZi5kZXN0cm95KCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBtdWx0aUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuICB2YXIgdm0gPSB0aGlzLnZtO1xuICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG4gIG1hcE5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIG1ldGhvZChub2RlLCB0YXJnZXQsIHZtKTtcbiAgfSk7XG4gIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG4gICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGZyYWdtZW50LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gKi9cblxuZnVuY3Rpb24gbXVsdGlSZW1vdmUoKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG4gIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG4gIHJlbW92ZU5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCB0aGlzLnZtLCB0aGlzLmZyYWcsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuICAgIH1cbiAgICBzZWxmLmRlc3Ryb3koKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUHJlcGFyZSB0aGUgZnJhZ21lbnQgZm9yIHJlbW92YWwuXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmJlZm9yZVJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGksIGw7XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gY2FsbCB0aGUgc2FtZSBtZXRob2QgcmVjdXJzaXZlbHkgb24gY2hpbGRcbiAgICAvLyBmcmFnbWVudHMsIGRlcHRoLWZpcnN0XG4gICAgdGhpcy5jaGlsZEZyYWdzW2ldLmJlZm9yZVJlbW92ZShmYWxzZSk7XG4gIH1cbiAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gQ2FsbCBkZXN0cm95IGZvciBhbGwgY29udGFpbmVkIGluc3RhbmNlcyxcbiAgICAvLyB3aXRoIHJlbW92ZTpmYWxzZSBhbmQgZGVmZXI6dHJ1ZS5cbiAgICAvLyBEZWZlciBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBuZWVkIHRvXG4gICAgLy8ga2VlcCB0aGUgY2hpbGRyZW4gdG8gY2FsbCBkZXRhY2ggaG9va3NcbiAgICAvLyBvbiB0aGVtLlxuICAgIHRoaXMuY2hpbGRyZW5baV0uJGRlc3Ryb3koZmFsc2UsIHRydWUpO1xuICB9XG4gIHZhciBkaXJzID0gdGhpcy51bmxpbmsuZGlycztcbiAgZm9yIChpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gZGlzYWJsZSB0aGUgd2F0Y2hlcnMgb24gYWxsIHRoZSBkaXJlY3RpdmVzXG4gICAgLy8gc28gdGhhdCB0aGUgcmVuZGVyZWQgY29udGVudCBzdGF5cyB0aGUgc2FtZVxuICAgIC8vIGR1cmluZyByZW1vdmFsLlxuICAgIGRpcnNbaV0uX3dhdGNoZXIgJiYgZGlyc1tpXS5fd2F0Y2hlci50ZWFyZG93bigpO1xuICB9XG59O1xuXG4vKipcbiAqIERlc3Ryb3kgdGhlIGZyYWdtZW50LlxuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5wYXJlbnRGcmFnKSB7XG4gICAgdGhpcy5wYXJlbnRGcmFnLmNoaWxkRnJhZ3MuJHJlbW92ZSh0aGlzKTtcbiAgfVxuICB0aGlzLm5vZGUuX192X2ZyYWcgPSBudWxsO1xuICB0aGlzLnVubGluaygpO1xufTtcblxuLyoqXG4gKiBDYWxsIGF0dGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAqL1xuXG5mdW5jdGlvbiBhdHRhY2goY2hpbGQpIHtcbiAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICB9XG59XG5cbi8qKlxuICogQ2FsbCBkZXRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gKi9cblxuZnVuY3Rpb24gZGV0YWNoKGNoaWxkKSB7XG4gIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgfVxufVxuXG52YXIgbGlua2VyQ2FjaGUgPSBuZXcgQ2FjaGUoNTAwMCk7XG5cbi8qKlxuICogQSBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBhXG4gKiBmcmFnbWVudC4gQ2FjaGVzIHRoZSBjb21waWxlZCBsaW5rZXIgaWYgcG9zc2libGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfSBlbFxuICovXG5mdW5jdGlvbiBGcmFnbWVudEZhY3Rvcnkodm0sIGVsKSB7XG4gIHRoaXMudm0gPSB2bTtcbiAgdmFyIHRlbXBsYXRlO1xuICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgZWwgPT09ICdzdHJpbmcnO1xuICBpZiAoaXNTdHJpbmcgfHwgaXNUZW1wbGF0ZShlbCkgJiYgIWVsLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgdGVtcGxhdGUgPSBwYXJzZVRlbXBsYXRlKGVsLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbiAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCwgYnV0IG9ubHkgZm9yIGNvbXBvbmVudHNcbiAgdmFyIGxpbmtlcjtcbiAgdmFyIGNpZCA9IHZtLmNvbnN0cnVjdG9yLmNpZDtcbiAgaWYgKGNpZCA+IDApIHtcbiAgICB2YXIgY2FjaGVJZCA9IGNpZCArIChpc1N0cmluZyA/IGVsIDogZ2V0T3V0ZXJIVE1MKGVsKSk7XG4gICAgbGlua2VyID0gbGlua2VyQ2FjaGUuZ2V0KGNhY2hlSWQpO1xuICAgIGlmICghbGlua2VyKSB7XG4gICAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG4gICAgICBsaW5rZXJDYWNoZS5wdXQoY2FjaGVJZCwgbGlua2VyKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuICB9XG4gIHRoaXMubGlua2VyID0gbGlua2VyO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGZyYWdtZW50IGluc3RhbmNlIHdpdGggZ2l2ZW4gaG9zdCBhbmQgc2NvcGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IGhvc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZVxuICogQHBhcmFtIHtGcmFnbWVudH0gcGFyZW50RnJhZ1xuICovXG5cbkZyYWdtZW50RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG4gIHZhciBmcmFnID0gY2xvbmVOb2RlKHRoaXMudGVtcGxhdGUpO1xuICByZXR1cm4gbmV3IEZyYWdtZW50KHRoaXMubGlua2VyLCB0aGlzLnZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZyk7XG59O1xuXG52YXIgT04gPSA3MDA7XG52YXIgTU9ERUwgPSA4MDA7XG52YXIgQklORCA9IDg1MDtcbnZhciBUUkFOU0lUSU9OID0gMTEwMDtcbnZhciBFTCA9IDE1MDA7XG52YXIgQ09NUE9ORU5UID0gMTUwMDtcbnZhciBQQVJUSUFMID0gMTc1MDtcbnZhciBJRiA9IDIxMDA7XG52YXIgRk9SID0gMjIwMDtcbnZhciBTTE9UID0gMjMwMDtcblxudmFyIHVpZCQzID0gMDtcblxudmFyIHZGb3IgPSB7XG5cbiAgcHJpb3JpdHk6IEZPUixcbiAgdGVybWluYWw6IHRydWUsXG5cbiAgcGFyYW1zOiBbJ3RyYWNrLWJ5JywgJ3N0YWdnZXInLCAnZW50ZXItc3RhZ2dlcicsICdsZWF2ZS1zdGFnZ2VyJ10sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBzdXBwb3J0IFwiaXRlbSBpbi9vZiBpdGVtc1wiIHN5bnRheFxuICAgIHZhciBpbk1hdGNoID0gdGhpcy5leHByZXNzaW9uLm1hdGNoKC8oLiopICg/OmlufG9mKSAoLiopLyk7XG4gICAgaWYgKGluTWF0Y2gpIHtcbiAgICAgIHZhciBpdE1hdGNoID0gaW5NYXRjaFsxXS5tYXRjaCgvXFwoKC4qKSwoLiopXFwpLyk7XG4gICAgICBpZiAoaXRNYXRjaCkge1xuICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRNYXRjaFsxXS50cmltKCk7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpdE1hdGNoWzJdLnRyaW0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGluTWF0Y2hbMl07XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmFsaWFzKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdi1mb3IgZXhwcmVzc2lvbiBcIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2FsaWFzIGlzIHJlcXVpcmVkLicsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHVpZCBhcyBhIGNhY2hlIGlkZW50aWZpZXJcbiAgICB0aGlzLmlkID0gJ19fdi1mb3JfXycgKyArK3VpZCQzO1xuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBvcHRpb24gbGlzdCxcbiAgICAvLyBzbyB0aGF0IHdlIGtub3cgaWYgd2UgbmVlZCB0byB1cGRhdGUgdGhlIDxzZWxlY3Q+J3NcbiAgICAvLyB2LW1vZGVsIHdoZW4gdGhlIG9wdGlvbiBsaXN0IGhhcyBjaGFuZ2VkLlxuICAgIC8vIGJlY2F1c2Ugdi1tb2RlbCBoYXMgYSBsb3dlciBwcmlvcml0eSB0aGFuIHYtZm9yLFxuICAgIC8vIHRoZSB2LW1vZGVsIGlzIG5vdCBib3VuZCBoZXJlIHlldCwgc28gd2UgaGF2ZSB0b1xuICAgIC8vIHJldHJpdmUgaXQgaW4gdGhlIGFjdHVhbCB1cGRhdGVNb2RlbCgpIGZ1bmN0aW9uLlxuICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG4gICAgdGhpcy5pc09wdGlvbiA9ICh0YWcgPT09ICdPUFRJT04nIHx8IHRhZyA9PT0gJ09QVEdST1VQJykgJiYgdGhpcy5lbC5wYXJlbnROb2RlLnRhZ05hbWUgPT09ICdTRUxFQ1QnO1xuXG4gICAgLy8gc2V0dXAgYW5jaG9yIG5vZGVzXG4gICAgdGhpcy5zdGFydCA9IGNyZWF0ZUFuY2hvcigndi1mb3Itc3RhcnQnKTtcbiAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcigndi1mb3ItZW5kJyk7XG4gICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmVuZCk7XG4gICAgYmVmb3JlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTtcblxuICAgIC8vIGNhY2hlXG4gICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAvLyBmcmFnbWVudCBmYWN0b3J5XG4gICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShkYXRhKSB7XG4gICAgdGhpcy5kaWZmKGRhdGEpO1xuICAgIHRoaXMudXBkYXRlUmVmKCk7XG4gICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEaWZmLCBiYXNlZCBvbiBuZXcgZGF0YSBhbmQgb2xkIGRhdGEsIGRldGVybWluZSB0aGVcbiAgICogbWluaW11bSBhbW91bnQgb2YgRE9NIG1hbmlwdWxhdGlvbnMgbmVlZGVkIHRvIG1ha2UgdGhlXG4gICAqIERPTSByZWZsZWN0IHRoZSBuZXcgZGF0YSBBcnJheS5cbiAgICpcbiAgICogVGhlIGFsZ29yaXRobSBkaWZmcyB0aGUgbmV3IGRhdGEgQXJyYXkgYnkgc3RvcmluZyBhXG4gICAqIGhpZGRlbiByZWZlcmVuY2UgdG8gYW4gb3duZXIgdm0gaW5zdGFuY2Ugb24gcHJldmlvdXNseVxuICAgKiBzZWVuIGRhdGEuIFRoaXMgYWxsb3dzIHVzIHRvIGFjaGlldmUgTyhuKSB3aGljaCBpc1xuICAgKiBiZXR0ZXIgdGhhbiBhIGxldmVuc2h0ZWluIGRpc3RhbmNlIGJhc2VkIGFsZ29yaXRobSxcbiAgICogd2hpY2ggaXMgTyhtICogbikuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGRhdGFcbiAgICovXG5cbiAgZGlmZjogZnVuY3Rpb24gZGlmZihkYXRhKSB7XG4gICAgLy8gY2hlY2sgaWYgdGhlIEFycmF5IHdhcyBjb252ZXJ0ZWQgZnJvbSBhbiBPYmplY3RcbiAgICB2YXIgaXRlbSA9IGRhdGFbMF07XG4gICAgdmFyIGNvbnZlcnRlZEZyb21PYmplY3QgPSB0aGlzLmZyb21PYmplY3QgPSBpc09iamVjdChpdGVtKSAmJiBoYXNPd24oaXRlbSwgJyRrZXknKSAmJiBoYXNPd24oaXRlbSwgJyR2YWx1ZScpO1xuXG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuICAgIHZhciBvbGRGcmFncyA9IHRoaXMuZnJhZ3M7XG4gICAgdmFyIGZyYWdzID0gdGhpcy5mcmFncyA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgdmFyIGFsaWFzID0gdGhpcy5hbGlhcztcbiAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLml0ZXJhdG9yO1xuICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQ7XG4gICAgdmFyIGVuZCA9IHRoaXMuZW5kO1xuICAgIHZhciBpbkRvY3VtZW50ID0gaW5Eb2Moc3RhcnQpO1xuICAgIHZhciBpbml0ID0gIW9sZEZyYWdzO1xuICAgIHZhciBpLCBsLCBmcmFnLCBrZXksIHZhbHVlLCBwcmltaXRpdmU7XG5cbiAgICAvLyBGaXJzdCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBuZXcgQXJyYXkgYW5kIGZpbGwgdXBcbiAgICAvLyB0aGUgbmV3IGZyYWdzIGFycmF5LiBJZiBhIHBpZWNlIG9mIGRhdGEgaGFzIGEgY2FjaGVkXG4gICAgLy8gaW5zdGFuY2UgZm9yIGl0LCB3ZSByZXVzZSBpdC4gT3RoZXJ3aXNlIGJ1aWxkIGEgbmV3XG4gICAgLy8gaW5zdGFuY2UuXG4gICAgZm9yIChpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpdGVtID0gZGF0YVtpXTtcbiAgICAgIGtleSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiRrZXkgOiBudWxsO1xuICAgICAgdmFsdWUgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4kdmFsdWUgOiBpdGVtO1xuICAgICAgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICAgIGZyYWcgPSAhaW5pdCAmJiB0aGlzLmdldENhY2hlZEZyYWcodmFsdWUsIGksIGtleSk7XG4gICAgICBpZiAoZnJhZykge1xuICAgICAgICAvLyByZXVzYWJsZSBmcmFnbWVudFxuICAgICAgICBmcmFnLnJldXNlZCA9IHRydWU7XG4gICAgICAgIC8vIHVwZGF0ZSAkaW5kZXhcbiAgICAgICAgZnJhZy5zY29wZS4kaW5kZXggPSBpO1xuICAgICAgICAvLyB1cGRhdGUgJGtleVxuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgZnJhZy5zY29wZS4ka2V5ID0ga2V5O1xuICAgICAgICB9XG4gICAgICAgIC8vIHVwZGF0ZSBpdGVyYXRvclxuICAgICAgICBpZiAoaXRlcmF0b3IpIHtcbiAgICAgICAgICBmcmFnLnNjb3BlW2l0ZXJhdG9yXSA9IGtleSAhPT0gbnVsbCA/IGtleSA6IGk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIGRhdGEgZm9yIHRyYWNrLWJ5LCBvYmplY3QgcmVwZWF0ICZcbiAgICAgICAgLy8gcHJpbWl0aXZlIHZhbHVlcy5cbiAgICAgICAgaWYgKHRyYWNrQnlLZXkgfHwgY29udmVydGVkRnJvbU9iamVjdCB8fCBwcmltaXRpdmUpIHtcbiAgICAgICAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmcmFnLnNjb3BlW2FsaWFzXSA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBuZXcgaXNudGFuY2VcbiAgICAgICAgZnJhZyA9IHRoaXMuY3JlYXRlKHZhbHVlLCBhbGlhcywgaSwga2V5KTtcbiAgICAgICAgZnJhZy5mcmVzaCA9ICFpbml0O1xuICAgICAgfVxuICAgICAgZnJhZ3NbaV0gPSBmcmFnO1xuICAgICAgaWYgKGluaXQpIHtcbiAgICAgICAgZnJhZy5iZWZvcmUoZW5kKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB3ZSdyZSBkb25lIGZvciB0aGUgaW5pdGlhbCByZW5kZXIuXG4gICAgaWYgKGluaXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZWNvbmQgcGFzcywgZ28gdGhyb3VnaCB0aGUgb2xkIGZyYWdtZW50cyBhbmRcbiAgICAvLyBkZXN0cm95IHRob3NlIHdobyBhcmUgbm90IHJldXNlZCAoYW5kIHJlbW92ZSB0aGVtXG4gICAgLy8gZnJvbSBjYWNoZSlcbiAgICB2YXIgcmVtb3ZhbEluZGV4ID0gMDtcbiAgICB2YXIgdG90YWxSZW1vdmVkID0gb2xkRnJhZ3MubGVuZ3RoIC0gZnJhZ3MubGVuZ3RoO1xuICAgIC8vIHdoZW4gcmVtb3ZpbmcgYSBsYXJnZSBudW1iZXIgb2YgZnJhZ21lbnRzLCB3YXRjaGVyIHJlbW92YWxcbiAgICAvLyB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGJvdHRsZW5lY2ssIHNvIHdlIGJhdGNoIHRoZSB3YXRjaGVyXG4gICAgLy8gcmVtb3ZhbHMgaW50byBhIHNpbmdsZSBmaWx0ZXIgY2FsbCFcbiAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSB0cnVlO1xuICAgIGZvciAoaSA9IDAsIGwgPSBvbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZyYWcgPSBvbGRGcmFnc1tpXTtcbiAgICAgIGlmICghZnJhZy5yZXVzZWQpIHtcbiAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuICAgICAgICB0aGlzLnJlbW92ZShmcmFnLCByZW1vdmFsSW5kZXgrKywgdG90YWxSZW1vdmVkLCBpbkRvY3VtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gZmFsc2U7XG4gICAgaWYgKHJlbW92YWxJbmRleCkge1xuICAgICAgdGhpcy52bS5fd2F0Y2hlcnMgPSB0aGlzLnZtLl93YXRjaGVycy5maWx0ZXIoZnVuY3Rpb24gKHcpIHtcbiAgICAgICAgcmV0dXJuIHcuYWN0aXZlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRmluYWwgcGFzcywgbW92ZS9pbnNlcnQgbmV3IGZyYWdtZW50cyBpbnRvIHRoZVxuICAgIC8vIHJpZ2h0IHBsYWNlLlxuICAgIHZhciB0YXJnZXRQcmV2LCBwcmV2RWwsIGN1cnJlbnRQcmV2O1xuICAgIHZhciBpbnNlcnRpb25JbmRleCA9IDA7XG4gICAgZm9yIChpID0gMCwgbCA9IGZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZnJhZyA9IGZyYWdzW2ldO1xuICAgICAgLy8gdGhpcyBpcyB0aGUgZnJhZyB0aGF0IHdlIHNob3VsZCBiZSBhZnRlclxuICAgICAgdGFyZ2V0UHJldiA9IGZyYWdzW2kgLSAxXTtcbiAgICAgIHByZXZFbCA9IHRhcmdldFByZXYgPyB0YXJnZXRQcmV2LnN0YWdnZXJDYiA/IHRhcmdldFByZXYuc3RhZ2dlckFuY2hvciA6IHRhcmdldFByZXYuZW5kIHx8IHRhcmdldFByZXYubm9kZSA6IHN0YXJ0O1xuICAgICAgaWYgKGZyYWcucmV1c2VkICYmICFmcmFnLnN0YWdnZXJDYikge1xuICAgICAgICBjdXJyZW50UHJldiA9IGZpbmRQcmV2RnJhZyhmcmFnLCBzdGFydCwgdGhpcy5pZCk7XG4gICAgICAgIGlmIChjdXJyZW50UHJldiAhPT0gdGFyZ2V0UHJldiAmJiAoIWN1cnJlbnRQcmV2IHx8XG4gICAgICAgIC8vIG9wdGltaXphdGlvbiBmb3IgbW92aW5nIGEgc2luZ2xlIGl0ZW0uXG4gICAgICAgIC8vIHRoYW5rcyB0byBzdWdnZXN0aW9ucyBieSBAbGl2b3JhcyBpbiAjMTgwN1xuICAgICAgICBmaW5kUHJldkZyYWcoY3VycmVudFByZXYsIHN0YXJ0LCB0aGlzLmlkKSAhPT0gdGFyZ2V0UHJldikpIHtcbiAgICAgICAgICB0aGlzLm1vdmUoZnJhZywgcHJldkVsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbmV3IGluc3RhbmNlLCBvciBzdGlsbCBpbiBzdGFnZ2VyLlxuICAgICAgICAvLyBpbnNlcnQgd2l0aCB1cGRhdGVkIHN0YWdnZXIgaW5kZXguXG4gICAgICAgIHRoaXMuaW5zZXJ0KGZyYWcsIGluc2VydGlvbkluZGV4KyssIHByZXZFbCwgaW5Eb2N1bWVudCk7XG4gICAgICB9XG4gICAgICBmcmFnLnJldXNlZCA9IGZyYWcuZnJlc2ggPSBmYWxzZTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBmcmFnbWVudCBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAgICovXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodmFsdWUsIGFsaWFzLCBpbmRleCwga2V5KSB7XG4gICAgdmFyIGhvc3QgPSB0aGlzLl9ob3N0O1xuICAgIC8vIGNyZWF0ZSBpdGVyYXRpb24gc2NvcGVcbiAgICB2YXIgcGFyZW50U2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuICAgIHZhciBzY29wZSA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUpO1xuICAgIC8vIHJlZiBob2xkZXIgZm9yIHRoZSBzY29wZVxuICAgIHNjb3BlLiRyZWZzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kcmVmcyk7XG4gICAgc2NvcGUuJGVscyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJGVscyk7XG4gICAgLy8gbWFrZSBzdXJlIHBvaW50ICRwYXJlbnQgdG8gcGFyZW50IHNjb3BlXG4gICAgc2NvcGUuJHBhcmVudCA9IHBhcmVudFNjb3BlO1xuICAgIC8vIGZvciB0d28td2F5IGJpbmRpbmcgb24gYWxpYXNcbiAgICBzY29wZS4kZm9yQ29udGV4dCA9IHRoaXM7XG4gICAgLy8gZGVmaW5lIHNjb3BlIHByb3BlcnRpZXNcbiAgICAvLyBpbXBvcnRhbnQ6IGRlZmluZSB0aGUgc2NvcGUgYWxpYXMgd2l0aG91dCBmb3JjZWQgY29udmVyc2lvblxuICAgIC8vIHNvIHRoYXQgZnJvemVuIGRhdGEgc3RydWN0dXJlcyByZW1haW4gbm9uLXJlYWN0aXZlLlxuICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCBhbGlhcywgdmFsdWUpO1xuICAgIH0pO1xuICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGluZGV4JywgaW5kZXgpO1xuICAgIGlmIChrZXkpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGtleScsIGtleSk7XG4gICAgfSBlbHNlIGlmIChzY29wZS4ka2V5KSB7XG4gICAgICAvLyBhdm9pZCBhY2NpZGVudGFsIGZhbGxiYWNrXG4gICAgICBkZWYoc2NvcGUsICcka2V5JywgbnVsbCk7XG4gICAgfVxuICAgIGlmICh0aGlzLml0ZXJhdG9yKSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgdGhpcy5pdGVyYXRvciwga2V5ICE9PSBudWxsID8ga2V5IDogaW5kZXgpO1xuICAgIH1cbiAgICB2YXIgZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIGZyYWcuZm9ySWQgPSB0aGlzLmlkO1xuICAgIHRoaXMuY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KTtcbiAgICByZXR1cm4gZnJhZztcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB2LXJlZiBvbiBvd25lciB2bS5cbiAgICovXG5cbiAgdXBkYXRlUmVmOiBmdW5jdGlvbiB1cGRhdGVSZWYoKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMuZGVzY3JpcHRvci5yZWY7XG4gICAgaWYgKCFyZWYpIHJldHVybjtcbiAgICB2YXIgaGFzaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmcztcbiAgICB2YXIgcmVmcztcbiAgICBpZiAoIXRoaXMuZnJvbU9iamVjdCkge1xuICAgICAgcmVmcyA9IHRoaXMuZnJhZ3MubWFwKGZpbmRWbUZyb21GcmFnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVmcyA9IHt9O1xuICAgICAgdGhpcy5mcmFncy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnKSB7XG4gICAgICAgIHJlZnNbZnJhZy5zY29wZS4ka2V5XSA9IGZpbmRWbUZyb21GcmFnKGZyYWcpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGhhc2hbcmVmXSA9IHJlZnM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZvciBvcHRpb24gbGlzdHMsIHVwZGF0ZSB0aGUgY29udGFpbmluZyB2LW1vZGVsIG9uXG4gICAqIHBhcmVudCA8c2VsZWN0Pi5cbiAgICovXG5cbiAgdXBkYXRlTW9kZWw6IGZ1bmN0aW9uIHVwZGF0ZU1vZGVsKCkge1xuICAgIGlmICh0aGlzLmlzT3B0aW9uKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcy5zdGFydC5wYXJlbnROb2RlO1xuICAgICAgdmFyIG1vZGVsID0gcGFyZW50ICYmIHBhcmVudC5fX3ZfbW9kZWw7XG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgbW9kZWwuZm9yY2VVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEluc2VydCBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuICAgKi9cblxuICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChmcmFnLCBpbmRleCwgcHJldkVsLCBpbkRvY3VtZW50KSB7XG4gICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG4gICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcbiAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIG51bGwsICdlbnRlcicpO1xuICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcbiAgICAgIC8vIGNyZWF0ZSBhbiBhbmNob3IgYW5kIGluc2VydCBpdCBzeW5jaHJvbm91c2x5LFxuICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gcmVzb2x2ZSB0aGUgY29ycmVjdCBvcmRlciB3aXRob3V0XG4gICAgICAvLyB3b3JyeWluZyBhYm91dCBzb21lIGVsZW1lbnRzIG5vdCBpbnNlcnRlZCB5ZXRcbiAgICAgIHZhciBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3I7XG4gICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3IgPSBjcmVhdGVBbmNob3IoJ3N0YWdnZXItYW5jaG9yJyk7XG4gICAgICAgIGFuY2hvci5fX3ZfZnJhZyA9IGZyYWc7XG4gICAgICB9XG4gICAgICBhZnRlcihhbmNob3IsIHByZXZFbCk7XG4gICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgICBmcmFnLmJlZm9yZShhbmNob3IpO1xuICAgICAgICByZW1vdmUoYW5jaG9yKTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0YXJnZXQgPSBwcmV2RWwubmV4dFNpYmxpbmc7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgIC8vIHJlc2V0IGVuZCBhbmNob3IgcG9zaXRpb24gaW4gY2FzZSB0aGUgcG9zaXRpb24gd2FzIG1lc3NlZCB1cFxuICAgICAgICAvLyBieSBhbiBleHRlcm5hbCBkcmFnLW4tZHJvcCBsaWJyYXJ5LlxuICAgICAgICBhZnRlcih0aGlzLmVuZCwgcHJldkVsKTtcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy5lbmQ7XG4gICAgICB9XG4gICAgICBmcmFnLmJlZm9yZSh0YXJnZXQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuICAgKi9cblxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShmcmFnLCBpbmRleCwgdG90YWwsIGluRG9jdW1lbnQpIHtcbiAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgLy8gaXQncyBub3QgcG9zc2libGUgZm9yIHRoZSBzYW1lIGZyYWcgdG8gYmUgcmVtb3ZlZFxuICAgICAgLy8gdHdpY2UsIHNvIGlmIHdlIGhhdmUgYSBwZW5kaW5nIHN0YWdnZXIgY2FsbGJhY2ssXG4gICAgICAvLyBpdCBtZWFucyB0aGlzIGZyYWcgaXMgcXVldWVkIGZvciBlbnRlciBidXQgcmVtb3ZlZFxuICAgICAgLy8gYmVmb3JlIGl0cyB0cmFuc2l0aW9uIHN0YXJ0ZWQuIFNpbmNlIGl0IGlzIGFscmVhZHlcbiAgICAgIC8vIGRlc3Ryb3llZCwgd2UgY2FuIGp1c3QgbGVhdmUgaXQgaW4gZGV0YWNoZWQgc3RhdGUuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgJ2xlYXZlJyk7XG4gICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICAgICAgZnJhZy5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYWcucmVtb3ZlKCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBNb3ZlIGEgZnJhZ21lbnQgdG8gYSBuZXcgcG9zaXRpb24uXG4gICAqIEZvcmNlIG5vIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcbiAgICovXG5cbiAgbW92ZTogZnVuY3Rpb24gbW92ZShmcmFnLCBwcmV2RWwpIHtcbiAgICAvLyBmaXggYSBjb21tb24gaXNzdWUgd2l0aCBTb3J0YWJsZTpcbiAgICAvLyBpZiBwcmV2RWwgZG9lc24ndCBoYXZlIG5leHRTaWJsaW5nLCB0aGlzIG1lYW5zIGl0J3NcbiAgICAvLyBiZWVuIGRyYWdnZWQgYWZ0ZXIgdGhlIGVuZCBhbmNob3IuIEp1c3QgcmUtcG9zaXRpb25cbiAgICAvLyB0aGUgZW5kIGFuY2hvciB0byB0aGUgZW5kIG9mIHRoZSBjb250YWluZXIuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFwcmV2RWwubmV4dFNpYmxpbmcpIHtcbiAgICAgIHRoaXMuZW5kLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuICAgIH1cbiAgICBmcmFnLmJlZm9yZShwcmV2RWwubmV4dFNpYmxpbmcsIGZhbHNlKTtcbiAgfSxcblxuICAvKipcbiAgICogQ2FjaGUgYSBmcmFnbWVudCB1c2luZyB0cmFjay1ieSBvciB0aGUgb2JqZWN0IGtleS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cbiAgICovXG5cbiAgY2FjaGVGcmFnOiBmdW5jdGlvbiBjYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICB2YXIgaWQ7XG4gICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuICAgICAgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIGlmICghY2FjaGVbaWRdKSB7XG4gICAgICAgIGNhY2hlW2lkXSA9IGZyYWc7XG4gICAgICB9IGVsc2UgaWYgKHRyYWNrQnlLZXkgIT09ICckaW5kZXgnKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWQgPSB0aGlzLmlkO1xuICAgICAgaWYgKGhhc093bih2YWx1ZSwgaWQpKSB7XG4gICAgICAgIGlmICh2YWx1ZVtpZF0gPT09IG51bGwpIHtcbiAgICAgICAgICB2YWx1ZVtpZF0gPSBmcmFnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSkge1xuICAgICAgICBkZWYodmFsdWUsIGlkLCBmcmFnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKCdGcm96ZW4gdi1mb3Igb2JqZWN0cyBjYW5ub3QgYmUgYXV0b21hdGljYWxseSB0cmFja2VkLCBtYWtlIHN1cmUgdG8gJyArICdwcm92aWRlIGEgdHJhY2stYnkga2V5LicpO1xuICAgICAgfVxuICAgIH1cbiAgICBmcmFnLnJhdyA9IHZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgYSBjYWNoZWQgZnJhZ21lbnQgZnJvbSB0aGUgdmFsdWUvaW5kZXgva2V5XG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7RnJhZ21lbnR9XG4gICAqL1xuXG4gIGdldENhY2hlZEZyYWc6IGZ1bmN0aW9uIGdldENhY2hlZEZyYWcodmFsdWUsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG4gICAgdmFyIGZyYWc7XG4gICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG4gICAgICBmcmFnID0gdGhpcy5jYWNoZVtpZF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYWcgPSB2YWx1ZVt0aGlzLmlkXTtcbiAgICB9XG4gICAgaWYgKGZyYWcgJiYgKGZyYWcucmV1c2VkIHx8IGZyYWcuZnJlc2gpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBmcmFnO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmcmFnbWVudCBmcm9tIGNhY2hlLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqL1xuXG4gIGRlbGV0ZUNhY2hlZEZyYWc6IGZ1bmN0aW9uIGRlbGV0ZUNhY2hlZEZyYWcoZnJhZykge1xuICAgIHZhciB2YWx1ZSA9IGZyYWcucmF3O1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgc2NvcGUgPSBmcmFnLnNjb3BlO1xuICAgIHZhciBpbmRleCA9IHNjb3BlLiRpbmRleDtcbiAgICAvLyBmaXggIzk0ODogYXZvaWQgYWNjaWRlbnRhbGx5IGZhbGwgdGhyb3VnaCB0b1xuICAgIC8vIGEgcGFyZW50IHJlcGVhdGVyIHdoaWNoIGhhcHBlbnMgdG8gaGF2ZSAka2V5LlxuICAgIHZhciBrZXkgPSBoYXNPd24oc2NvcGUsICcka2V5JykgJiYgc2NvcGUuJGtleTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICBpZiAodHJhY2tCeUtleSB8fCBrZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIHRoaXMuY2FjaGVbaWRdID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWVbdGhpcy5pZF0gPSBudWxsO1xuICAgICAgZnJhZy5yYXcgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBzdGFnZ2VyIGFtb3VudCBmb3IgYW4gaW5zZXJ0aW9uL3JlbW92YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICAgKi9cblxuICBnZXRTdGFnZ2VyOiBmdW5jdGlvbiBnZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgdHlwZSkge1xuICAgIHR5cGUgPSB0eXBlICsgJ1N0YWdnZXInO1xuICAgIHZhciB0cmFucyA9IGZyYWcubm9kZS5fX3ZfdHJhbnM7XG4gICAgdmFyIGhvb2tzID0gdHJhbnMgJiYgdHJhbnMuaG9va3M7XG4gICAgdmFyIGhvb2sgPSBob29rcyAmJiAoaG9va3NbdHlwZV0gfHwgaG9va3Muc3RhZ2dlcik7XG4gICAgcmV0dXJuIGhvb2sgPyBob29rLmNhbGwoZnJhZywgaW5kZXgsIHRvdGFsKSA6IGluZGV4ICogcGFyc2VJbnQodGhpcy5wYXJhbXNbdHlwZV0gfHwgdGhpcy5wYXJhbXMuc3RhZ2dlciwgMTApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQcmUtcHJvY2VzcyB0aGUgdmFsdWUgYmVmb3JlIHBpcGluZyBpdCB0aHJvdWdoIHRoZVxuICAgKiBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuICAgKi9cblxuICBfcHJlUHJvY2VzczogZnVuY3Rpb24gX3ByZVByb2Nlc3ModmFsdWUpIHtcbiAgICAvLyByZWdhcmRsZXNzIG9mIHR5cGUsIHN0b3JlIHRoZSB1bi1maWx0ZXJlZCByYXcgdmFsdWUuXG4gICAgdGhpcy5yYXdWYWx1ZSA9IHZhbHVlO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcblxuICAvKipcbiAgICogUG9zdC1wcm9jZXNzIHRoZSB2YWx1ZSBhZnRlciBpdCBoYXMgYmVlbiBwaXBlZCB0aHJvdWdoXG4gICAqIHRoZSBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuICAgKlxuICAgKiBJdCBpcyBuZWNlc3NhcnkgZm9yIHRoaXMgdG8gYmUgY2FsbGVkIGR1cmluZyB0aGVcbiAgICogd2F0Y2hlcidzIGRlcGVuZGVuY3kgY29sbGVjdGlvbiBwaGFzZSBiZWNhdXNlIHdlIHdhbnRcbiAgICogdGhlIHYtZm9yIHRvIHVwZGF0ZSB3aGVuIHRoZSBzb3VyY2UgT2JqZWN0IGlzIG11dGF0ZWQuXG4gICAqL1xuXG4gIF9wb3N0UHJvY2VzczogZnVuY3Rpb24gX3Bvc3RQcm9jZXNzKHZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgLy8gY29udmVydCBwbGFpbiBvYmplY3QgdG8gYXJyYXkuXG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgICAgIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gICAgICB2YXIgcmVzID0gbmV3IEFycmF5KGkpO1xuICAgICAgdmFyIGtleTtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgcmVzW2ldID0ge1xuICAgICAgICAgICRrZXk6IGtleSxcbiAgICAgICAgICAkdmFsdWU6IHZhbHVlW2tleV1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSByYW5nZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgfHwgW107XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG4gICAgICAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnNbdGhpcy5kZXNjcmlwdG9yLnJlZl0gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5mcmFncykge1xuICAgICAgdmFyIGkgPSB0aGlzLmZyYWdzLmxlbmd0aDtcbiAgICAgIHZhciBmcmFnO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBmcmFnID0gdGhpcy5mcmFnc1tpXTtcbiAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuICAgICAgICBmcmFnLmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogSGVscGVyIHRvIGZpbmQgdGhlIHByZXZpb3VzIGVsZW1lbnQgdGhhdCBpcyBhIGZyYWdtZW50XG4gKiBhbmNob3IuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYSBkZXN0cm95ZWQgZnJhZydzXG4gKiBlbGVtZW50IGNvdWxkIHN0aWxsIGJlIGxpbmdlcmluZyBpbiB0aGUgRE9NIGJlZm9yZSBpdHNcbiAqIGxlYXZpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcywgYnV0IGl0cyBpbnNlcnRlZCBmbGFnXG4gKiBzaG91bGQgaGF2ZSBiZWVuIHNldCB0byBmYWxzZSBzbyB3ZSBjYW4gc2tpcCB0aGVtLlxuICpcbiAqIElmIHRoaXMgaXMgYSBibG9jayByZXBlYXQsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIG9ubHlcbiAqIHJldHVybiBmcmFnIHRoYXQgaXMgYm91bmQgdG8gdGhpcyB2LWZvci4gKHNlZSAjOTI5KVxuICpcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAqIEBwYXJhbSB7Q29tbWVudHxUZXh0fSBhbmNob3JcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHJldHVybiB7RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gZmluZFByZXZGcmFnKGZyYWcsIGFuY2hvciwgaWQpIHtcbiAgdmFyIGVsID0gZnJhZy5ub2RlLnByZXZpb3VzU2libGluZztcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghZWwpIHJldHVybjtcbiAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuICB3aGlsZSAoKCFmcmFnIHx8IGZyYWcuZm9ySWQgIT09IGlkIHx8ICFmcmFnLmluc2VydGVkKSAmJiBlbCAhPT0gYW5jaG9yKSB7XG4gICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFlbCkgcmV0dXJuO1xuICAgIGZyYWcgPSBlbC5fX3ZfZnJhZztcbiAgfVxuICByZXR1cm4gZnJhZztcbn1cblxuLyoqXG4gKiBGaW5kIGEgdm0gZnJvbSBhIGZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gZmluZFZtRnJvbUZyYWcoZnJhZykge1xuICB2YXIgbm9kZSA9IGZyYWcubm9kZTtcbiAgLy8gaGFuZGxlIG11bHRpLW5vZGUgZnJhZ1xuICBpZiAoZnJhZy5lbmQpIHtcbiAgICB3aGlsZSAoIW5vZGUuX192dWVfXyAmJiBub2RlICE9PSBmcmFnLmVuZCAmJiBub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGUuX192dWVfXztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSByYW5nZSBhcnJheSBmcm9tIGdpdmVuIG51bWJlci5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cblxuZnVuY3Rpb24gcmFuZ2Uobikge1xuICB2YXIgaSA9IC0xO1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KE1hdGguZmxvb3IobikpO1xuICB3aGlsZSAoKytpIDwgbikge1xuICAgIHJldFtpXSA9IGk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHRyYWNrIGJ5IGtleSBmb3IgYW4gaXRlbS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBbdHJhY2tCeUtleV1cbiAqL1xuXG5mdW5jdGlvbiBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KSB7XG4gIHJldHVybiB0cmFja0J5S2V5ID8gdHJhY2tCeUtleSA9PT0gJyRpbmRleCcgPyBpbmRleCA6IHRyYWNrQnlLZXkuY2hhckF0KDApLm1hdGNoKC9cXHcvKSA/IGdldFBhdGgodmFsdWUsIHRyYWNrQnlLZXkpIDogdmFsdWVbdHJhY2tCeUtleV0gOiBrZXkgfHwgdmFsdWU7XG59XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZGb3Iud2FybkR1cGxpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHdhcm4oJ0R1cGxpY2F0ZSB2YWx1ZSBmb3VuZCBpbiB2LWZvcj1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJy4gVXNlIHRyYWNrLWJ5PVwiJGluZGV4XCIgaWYgJyArICd5b3UgYXJlIGV4cGVjdGluZyBkdXBsaWNhdGUgdmFsdWVzLicsIHRoaXMudm0pO1xuICB9O1xufVxuXG52YXIgdklmID0ge1xuXG4gIHByaW9yaXR5OiBJRixcbiAgdGVybWluYWw6IHRydWUsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGlmICghZWwuX192dWVfXykge1xuICAgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuICAgICAgdmFyIG5leHQgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgICByZW1vdmUobmV4dCk7XG4gICAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcbiAgICAgIH1cbiAgICAgIC8vIGNoZWNrIG1haW4gYmxvY2tcbiAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWlmJyk7XG4gICAgICByZXBsYWNlKGVsLCB0aGlzLmFuY2hvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1pZj1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgY2Fubm90IGJlICcgKyAndXNlZCBvbiBhbiBpbnN0YW5jZSByb290IGVsZW1lbnQuJywgdGhpcy52bSk7XG4gICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmludmFsaWQpIHJldHVybjtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGlmICghdGhpcy5mcmFnKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgfVxuICB9LFxuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KCkge1xuICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG4gICAgICB0aGlzLmVsc2VGcmFnLnJlbW92ZSgpO1xuICAgICAgdGhpcy5lbHNlRnJhZyA9IG51bGw7XG4gICAgfVxuICAgIC8vIGxhenkgaW5pdCBmYWN0b3J5XG4gICAgaWYgKCF0aGlzLmZhY3RvcnkpIHtcbiAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG4gICAgfVxuICAgIHRoaXMuZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIHRoaXMuZnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5yZW1vdmUoKTtcbiAgICAgIHRoaXMuZnJhZyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmVsc2VFbCAmJiAhdGhpcy5lbHNlRnJhZykge1xuICAgICAgaWYgKCF0aGlzLmVsc2VGYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuZWxzZUZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMuZWxzZUVsLl9jb250ZXh0IHx8IHRoaXMudm0sIHRoaXMuZWxzZUVsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWxzZUZyYWcgPSB0aGlzLmVsc2VGYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgICB0aGlzLmVsc2VGcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG4gICAgICB0aGlzLmVsc2VGcmFnLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBzaG93ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuICAgIHZhciBuZXh0ID0gdGhpcy5lbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmFwcGx5KHRoaXMuZWwsIHZhbHVlKTtcbiAgICBpZiAodGhpcy5lbHNlRWwpIHtcbiAgICAgIHRoaXMuYXBwbHkodGhpcy5lbHNlRWwsICF2YWx1ZSk7XG4gICAgfVxuICB9LFxuXG4gIGFwcGx5OiBmdW5jdGlvbiBhcHBseShlbCwgdmFsdWUpIHtcbiAgICBpZiAoaW5Eb2MoZWwpKSB7XG4gICAgICBhcHBseVRyYW5zaXRpb24oZWwsIHZhbHVlID8gMSA6IC0xLCB0b2dnbGUsIHRoaXMudm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2dnbGUoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gJycgOiAnbm9uZSc7XG4gICAgfVxuICB9XG59O1xuXG52YXIgdGV4dCQyID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGlzUmFuZ2UgPSBlbC50eXBlID09PSAncmFuZ2UnO1xuICAgIHZhciBsYXp5ID0gdGhpcy5wYXJhbXMubGF6eTtcbiAgICB2YXIgbnVtYmVyID0gdGhpcy5wYXJhbXMubnVtYmVyO1xuICAgIHZhciBkZWJvdW5jZSA9IHRoaXMucGFyYW1zLmRlYm91bmNlO1xuXG4gICAgLy8gaGFuZGxlIGNvbXBvc2l0aW9uIGV2ZW50cy5cbiAgICAvLyAgIGh0dHA6Ly9ibG9nLmV2YW55b3UubWUvMjAxNC8wMS8wMy9jb21wb3NpdGlvbi1ldmVudC9cbiAgICAvLyBza2lwIHRoaXMgZm9yIEFuZHJvaWQgYmVjYXVzZSBpdCBoYW5kbGVzIGNvbXBvc2l0aW9uXG4gICAgLy8gZXZlbnRzIHF1aXRlIGRpZmZlcmVudGx5LiBBbmRyb2lkIGRvZXNuJ3QgdHJpZ2dlclxuICAgIC8vIGNvbXBvc2l0aW9uIGV2ZW50cyBmb3IgbGFuZ3VhZ2UgaW5wdXQgbWV0aG9kcyBlLmcuXG4gICAgLy8gQ2hpbmVzZSwgYnV0IGluc3RlYWQgdHJpZ2dlcnMgdGhlbSBmb3Igc3BlbGxpbmdcbiAgICAvLyBzdWdnZXN0aW9ucy4uLiAoc2VlIERpc2N1c3Npb24vIzE2MilcbiAgICB2YXIgY29tcG9zaW5nID0gZmFsc2U7XG4gICAgaWYgKCFpc0FuZHJvaWQgJiYgIWlzUmFuZ2UpIHtcbiAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbXBvc2luZyA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgLy8gaW4gSUUxMSB0aGUgXCJjb21wb3NpdGlvbmVuZFwiIGV2ZW50IGZpcmVzIEFGVEVSXG4gICAgICAgIC8vIHRoZSBcImlucHV0XCIgZXZlbnQsIHNvIHRoZSBpbnB1dCBoYW5kbGVyIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gYXQgdGhlIGVuZC4uLiBoYXZlIHRvIGNhbGwgaXQgaGVyZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gIzEzMjc6IGluIGxhenkgbW9kZSB0aGlzIGlzIHVuZWNlc3NhcnkuXG4gICAgICAgIGlmICghbGF6eSkge1xuICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gcHJldmVudCBtZXNzaW5nIHdpdGggdGhlIGlucHV0IHdoZW4gdXNlciBpcyB0eXBpbmcsXG4gICAgLy8gYW5kIGZvcmNlIHVwZGF0ZSBvbiBibHVyLlxuICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuICAgIGlmICghaXNSYW5nZSAmJiAhbGF6eSkge1xuICAgICAgdGhpcy5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZm9jdXNlZCA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAvLyBkbyBub3Qgc3luYyB2YWx1ZSBhZnRlciBmcmFnbWVudCByZW1vdmFsICgjMjAxNylcbiAgICAgICAgaWYgKCFzZWxmLl9mcmFnIHx8IHNlbGYuX2ZyYWcuaW5zZXJ0ZWQpIHtcbiAgICAgICAgICBzZWxmLnJhd0xpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE5vdyBhdHRhY2ggdGhlIG1haW4gbGlzdGVuZXJcbiAgICB0aGlzLmxpc3RlbmVyID0gdGhpcy5yYXdMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChjb21wb3NpbmcgfHwgIXNlbGYuX2JvdW5kKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciB2YWwgPSBudW1iZXIgfHwgaXNSYW5nZSA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuICAgICAgc2VsZi5zZXQodmFsKTtcbiAgICAgIC8vIGZvcmNlIHVwZGF0ZSBvbiBuZXh0IHRpY2sgdG8gYXZvaWQgbG9jayAmIHNhbWUgdmFsdWVcbiAgICAgIC8vIGFsc28gb25seSB1cGRhdGUgd2hlbiB1c2VyIGlzIG5vdCB0eXBpbmdcbiAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuX2JvdW5kICYmICFzZWxmLmZvY3VzZWQpIHtcbiAgICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIGFwcGx5IGRlYm91bmNlXG4gICAgaWYgKGRlYm91bmNlKSB7XG4gICAgICB0aGlzLmxpc3RlbmVyID0gX2RlYm91bmNlKHRoaXMubGlzdGVuZXIsIGRlYm91bmNlKTtcbiAgICB9XG5cbiAgICAvLyBTdXBwb3J0IGpRdWVyeSBldmVudHMsIHNpbmNlIGpRdWVyeS50cmlnZ2VyKCkgZG9lc24ndFxuICAgIC8vIHRyaWdnZXIgbmF0aXZlIGV2ZW50cyBpbiBzb21lIGNhc2VzIGFuZCBzb21lIHBsdWdpbnNcbiAgICAvLyByZWx5IG9uICQudHJpZ2dlcigpXG4gICAgLy9cbiAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSBpZiBhIGxpc3RlbmVyIGlzIGF0dGFjaGVkIHVzaW5nXG4gICAgLy8galF1ZXJ5LCBpdCBpcyBhbHNvIHJlbW92ZWQgd2l0aCBqUXVlcnksIHRoYXQncyB3aHlcbiAgICAvLyB3ZSBkbyB0aGUgY2hlY2sgZm9yIGVhY2ggZGlyZWN0aXZlIGluc3RhbmNlIGFuZFxuICAgIC8vIHN0b3JlIHRoYXQgY2hlY2sgcmVzdWx0IG9uIGl0c2VsZi4gVGhpcyBhbHNvIGFsbG93c1xuICAgIC8vIGVhc2llciB0ZXN0IGNvdmVyYWdlIGNvbnRyb2wgYnkgdW5zZXR0aW5nIHRoZSBnbG9iYWxcbiAgICAvLyBqUXVlcnkgdmFyaWFibGUgaW4gdGVzdHMuXG4gICAgdGhpcy5oYXNqUXVlcnkgPSB0eXBlb2YgalF1ZXJ5ID09PSAnZnVuY3Rpb24nO1xuICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vbiA/ICdvbicgOiAnYmluZCc7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG4gICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgdGhpcy5vbignaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJRTkgZG9lc24ndCBmaXJlIGlucHV0IGV2ZW50IG9uIGJhY2tzcGFjZS9kZWwvY3V0XG4gICAgaWYgKCFsYXp5ICYmIGlzSUU5KSB7XG4gICAgICB0aGlzLm9uKCdjdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG5leHRUaWNrKHNlbGYubGlzdGVuZXIpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQ2IHx8IGUua2V5Q29kZSA9PT0gOCkge1xuICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gc2V0IGluaXRpYWwgdmFsdWUgaWYgcHJlc2VudFxuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJiBlbC52YWx1ZS50cmltKCkpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICAvLyAjMzAyOSBvbmx5IHVwZGF0ZSB3aGVuIHRoZSB2YWx1ZSBjaGFuZ2VzLiBUaGlzIHByZXZlbnRcbiAgICAvLyBicm93c2VycyBmcm9tIG92ZXJ3cml0aW5nIHZhbHVlcyBsaWtlIHNlbGVjdGlvblN0YXJ0XG4gICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5lbC52YWx1ZSkgdGhpcy5lbC52YWx1ZSA9IHZhbHVlO1xuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG4gICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHJhZGlvID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gdmFsdWUgb3ZlcndyaXRlIHZpYSB2LWJpbmQ6dmFsdWVcbiAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsLl92YWx1ZTtcbiAgICAgIH1cbiAgICAgIHZhciB2YWwgPSBlbC52YWx1ZTtcbiAgICAgIGlmIChzZWxmLnBhcmFtcy5udW1iZXIpIHtcbiAgICAgICAgdmFsID0gdG9OdW1iZXIodmFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcblxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLnNldChzZWxmLmdldFZhbHVlKCkpO1xuICAgIH07XG4gICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpO1xuICB9XG59O1xuXG52YXIgc2VsZWN0ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgLy8gbWV0aG9kIHRvIGZvcmNlIHVwZGF0ZSBET00gdXNpbmcgbGF0ZXN0IHZhbHVlLlxuICAgIHRoaXMuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2VsZi5fd2F0Y2hlcikge1xuICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLmdldCgpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpcGxlIHNlbGVjdFxuICAgIHZhciBtdWx0aXBsZSA9IHRoaXMubXVsdGlwbGUgPSBlbC5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJyk7XG5cbiAgICAvLyBhdHRhY2ggbGlzdGVuZXJcbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlKTtcbiAgICAgIHZhbHVlID0gc2VsZi5wYXJhbXMubnVtYmVyID8gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5tYXAodG9OdW1iZXIpIDogdG9OdW1iZXIodmFsdWUpIDogdmFsdWU7XG4gICAgICBzZWxmLnNldCh2YWx1ZSk7XG4gICAgfTtcbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblxuICAgIC8vIGlmIGhhcyBpbml0aWFsIHZhbHVlLCBzZXQgYWZ0ZXJCaW5kXG4gICAgdmFyIGluaXRWYWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSwgdHJ1ZSk7XG4gICAgaWYgKG11bHRpcGxlICYmIGluaXRWYWx1ZS5sZW5ndGggfHwgIW11bHRpcGxlICYmIGluaXRWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cblxuICAgIC8vIEFsbCBtYWpvciBicm93c2VycyBleGNlcHQgRmlyZWZveCByZXNldHNcbiAgICAvLyBzZWxlY3RlZEluZGV4IHdpdGggdmFsdWUgLTEgdG8gMCB3aGVuIHRoZSBlbGVtZW50XG4gICAgLy8gaXMgYXBwZW5kZWQgdG8gYSBuZXcgcGFyZW50LCB0aGVyZWZvcmUgd2UgaGF2ZSB0b1xuICAgIC8vIGZvcmNlIGEgRE9NIHVwZGF0ZSB3aGVuZXZlciB0aGF0IGhhcHBlbnMuLi5cbiAgICB0aGlzLnZtLiRvbignaG9vazphdHRhY2hlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG5leHRUaWNrKF90aGlzLmZvcmNlVXBkYXRlKTtcbiAgICB9KTtcbiAgICBpZiAoIWluRG9jKGVsKSkge1xuICAgICAgbmV4dFRpY2sodGhpcy5mb3JjZVVwZGF0ZSk7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG4gICAgdmFyIG11bHRpID0gdGhpcy5tdWx0aXBsZSAmJiBpc0FycmF5KHZhbHVlKTtcbiAgICB2YXIgb3B0aW9ucyA9IGVsLm9wdGlvbnM7XG4gICAgdmFyIGkgPSBvcHRpb25zLmxlbmd0aDtcbiAgICB2YXIgb3AsIHZhbDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBvcCA9IG9wdGlvbnNbaV07XG4gICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgICAgb3Auc2VsZWN0ZWQgPSBtdWx0aSA/IGluZGV4T2YkMSh2YWx1ZSwgdmFsKSA+IC0xIDogbG9vc2VFcXVhbCh2YWx1ZSwgdmFsKTtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgdGhpcy52bS4kb2ZmKCdob29rOmF0dGFjaGVkJywgdGhpcy5mb3JjZVVwZGF0ZSk7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IHNlbGVjdCB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7U2VsZWN0RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbXVsdGlcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5pdFxuICogQHJldHVybiB7QXJyYXl8Kn1cbiAqL1xuXG5mdW5jdGlvbiBnZXRWYWx1ZShlbCwgbXVsdGksIGluaXQpIHtcbiAgdmFyIHJlcyA9IG11bHRpID8gW10gOiBudWxsO1xuICB2YXIgb3AsIHZhbCwgc2VsZWN0ZWQ7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBvcCA9IGVsLm9wdGlvbnNbaV07XG4gICAgc2VsZWN0ZWQgPSBpbml0ID8gb3AuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpIDogb3Auc2VsZWN0ZWQ7XG4gICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcbiAgICAgIGlmIChtdWx0aSkge1xuICAgICAgICByZXMucHVzaCh2YWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBOYXRpdmUgQXJyYXkuaW5kZXhPZiB1c2VzIHN0cmljdCBlcXVhbCwgYnV0IGluIHRoaXNcbiAqIGNhc2Ugd2UgbmVlZCB0byBtYXRjaCBzdHJpbmcvbnVtYmVycyB3aXRoIGN1c3RvbSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gaW5kZXhPZiQxKGFyciwgdmFsKSB7XG4gIHZhciBpID0gYXJyLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGlmIChsb29zZUVxdWFsKGFycltpXSwgdmFsKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxudmFyIGNoZWNrYm94ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IGVsLl92YWx1ZSA6IHNlbGYucGFyYW1zLm51bWJlciA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRCb29sZWFuVmFsdWUoKSB7XG4gICAgICB2YXIgdmFsID0gZWwuY2hlY2tlZDtcbiAgICAgIGlmICh2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuICAgICAgICByZXR1cm4gZWwuX3RydWVWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICghdmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfZmFsc2VWYWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBlbC5fZmFsc2VWYWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuXG4gICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtb2RlbCA9IHNlbGYuX3dhdGNoZXIudmFsdWU7XG4gICAgICBpZiAoaXNBcnJheShtb2RlbCkpIHtcbiAgICAgICAgdmFyIHZhbCA9IHNlbGYuZ2V0VmFsdWUoKTtcbiAgICAgICAgaWYgKGVsLmNoZWNrZWQpIHtcbiAgICAgICAgICBpZiAoaW5kZXhPZihtb2RlbCwgdmFsKSA8IDApIHtcbiAgICAgICAgICAgIG1vZGVsLnB1c2godmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbW9kZWwuJHJlbW92ZSh2YWwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLnNldChnZXRCb29sZWFuVmFsdWUoKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICBlbC5jaGVja2VkID0gaW5kZXhPZih2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKSA+IC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZWwuX3RydWVWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5jaGVja2VkID0gISF2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbnZhciBoYW5kbGVycyA9IHtcbiAgdGV4dDogdGV4dCQyLFxuICByYWRpbzogcmFkaW8sXG4gIHNlbGVjdDogc2VsZWN0LFxuICBjaGVja2JveDogY2hlY2tib3hcbn07XG5cbnZhciBtb2RlbCA9IHtcblxuICBwcmlvcml0eTogTU9ERUwsXG4gIHR3b1dheTogdHJ1ZSxcbiAgaGFuZGxlcnM6IGhhbmRsZXJzLFxuICBwYXJhbXM6IFsnbGF6eScsICdudW1iZXInLCAnZGVib3VuY2UnXSxcblxuICAvKipcbiAgICogUG9zc2libGUgZWxlbWVudHM6XG4gICAqICAgPHNlbGVjdD5cbiAgICogICA8dGV4dGFyZWE+XG4gICAqICAgPGlucHV0IHR5cGU9XCIqXCI+XG4gICAqICAgICAtIHRleHRcbiAgICogICAgIC0gY2hlY2tib3hcbiAgICogICAgIC0gcmFkaW9cbiAgICogICAgIC0gbnVtYmVyXG4gICAqL1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gZnJpZW5kbHkgd2FybmluZy4uLlxuICAgIHRoaXMuY2hlY2tGaWx0ZXJzKCk7XG4gICAgaWYgKHRoaXMuaGFzUmVhZCAmJiAhdGhpcy5oYXNXcml0ZSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIGEgcmVhZC1vbmx5IGZpbHRlciB3aXRoICcgKyAndi1tb2RlbD1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiLiAnICsgJ1lvdSBtaWdodCB3YW50IHRvIHVzZSBhIHR3by13YXkgZmlsdGVyIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW9yLicsIHRoaXMudm0pO1xuICAgIH1cbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciB0YWcgPSBlbC50YWdOYW1lO1xuICAgIHZhciBoYW5kbGVyO1xuICAgIGlmICh0YWcgPT09ICdJTlBVVCcpIHtcbiAgICAgIGhhbmRsZXIgPSBoYW5kbGVyc1tlbC50eXBlXSB8fCBoYW5kbGVycy50ZXh0O1xuICAgIH0gZWxzZSBpZiAodGFnID09PSAnU0VMRUNUJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnNlbGVjdDtcbiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnRleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1tb2RlbCBkb2VzIG5vdCBzdXBwb3J0IGVsZW1lbnQgdHlwZTogJyArIHRhZywgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsLl9fdl9tb2RlbCA9IHRoaXM7XG4gICAgaGFuZGxlci5iaW5kLmNhbGwodGhpcyk7XG4gICAgdGhpcy51cGRhdGUgPSBoYW5kbGVyLnVwZGF0ZTtcbiAgICB0aGlzLl91bmJpbmQgPSBoYW5kbGVyLnVuYmluZDtcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgcmVhZC93cml0ZSBmaWx0ZXIgc3RhdHMuXG4gICAqL1xuXG4gIGNoZWNrRmlsdGVyczogZnVuY3Rpb24gY2hlY2tGaWx0ZXJzKCkge1xuICAgIHZhciBmaWx0ZXJzID0gdGhpcy5maWx0ZXJzO1xuICAgIGlmICghZmlsdGVycykgcmV0dXJuO1xuICAgIHZhciBpID0gZmlsdGVycy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIGZpbHRlciA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlcnNbaV0ubmFtZSk7XG4gICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCBmaWx0ZXIucmVhZCkge1xuICAgICAgICB0aGlzLmhhc1JlYWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGZpbHRlci53cml0ZSkge1xuICAgICAgICB0aGlzLmhhc1dyaXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5lbC5fX3ZfbW9kZWwgPSBudWxsO1xuICAgIHRoaXMuX3VuYmluZCAmJiB0aGlzLl91bmJpbmQoKTtcbiAgfVxufTtcblxuLy8ga2V5Q29kZSBhbGlhc2VzXG52YXIga2V5Q29kZXMgPSB7XG4gIGVzYzogMjcsXG4gIHRhYjogOSxcbiAgZW50ZXI6IDEzLFxuICBzcGFjZTogMzIsXG4gICdkZWxldGUnOiBbOCwgNDZdLFxuICB1cDogMzgsXG4gIGxlZnQ6IDM3LFxuICByaWdodDogMzksXG4gIGRvd246IDQwXG59O1xuXG5mdW5jdGlvbiBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cykge1xuICB2YXIgY29kZXMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGNoYXJDb2RlID0ga2V5LmNoYXJDb2RlQXQoMCk7XG4gICAgaWYgKGNoYXJDb2RlID4gNDcgJiYgY2hhckNvZGUgPCA1OCkge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KGtleSwgMTApO1xuICAgIH1cbiAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgY2hhckNvZGUgPSBrZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKGNoYXJDb2RlID4gNjQgJiYgY2hhckNvZGUgPCA5MSkge1xuICAgICAgICByZXR1cm4gY2hhckNvZGU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBrZXlDb2Rlc1trZXldO1xuICB9KTtcbiAgY29kZXMgPSBbXS5jb25jYXQuYXBwbHkoW10sIGNvZGVzKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIGtleUhhbmRsZXIoZSkge1xuICAgIGlmIChjb2Rlcy5pbmRleE9mKGUua2V5Q29kZSkgPiAtMSkge1xuICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0b3BGaWx0ZXIoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gc3RvcEhhbmRsZXIoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJldmVudEZpbHRlcihoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBwcmV2ZW50SGFuZGxlcihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHNlbGZGaWx0ZXIoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gc2VsZkhhbmRsZXIoZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIG9uJDEgPSB7XG5cbiAgcHJpb3JpdHk6IE9OLFxuICBhY2NlcHRTdGF0ZW1lbnQ6IHRydWUsXG4gIGtleUNvZGVzOiBrZXlDb2RlcyxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGRlYWwgd2l0aCBpZnJhbWVzXG4gICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScgJiYgdGhpcy5hcmcgIT09ICdsb2FkJykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdGhpcy5pZnJhbWVCaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBvbihzZWxmLmVsLmNvbnRlbnRXaW5kb3csIHNlbGYuYXJnLCBzZWxmLmhhbmRsZXIsIHNlbGYubW9kaWZpZXJzLmNhcHR1cmUpO1xuICAgICAgfTtcbiAgICAgIHRoaXMub24oJ2xvYWQnLCB0aGlzLmlmcmFtZUJpbmQpO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShoYW5kbGVyKSB7XG4gICAgLy8gc3R1YiBhIG5vb3AgZm9yIHYtb24gd2l0aCBubyB2YWx1ZSxcbiAgICAvLyBlLmcuIEBtb3VzZWRvd24ucHJldmVudFxuICAgIGlmICghdGhpcy5kZXNjcmlwdG9yLnJhdykge1xuICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uICgpIHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW9uOicgKyB0aGlzLmFyZyArICc9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGV4cGVjdHMgYSBmdW5jdGlvbiB2YWx1ZSwgJyArICdnb3QgJyArIGhhbmRsZXIsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFwcGx5IG1vZGlmaWVyc1xuICAgIGlmICh0aGlzLm1vZGlmaWVycy5zdG9wKSB7XG4gICAgICBoYW5kbGVyID0gc3RvcEZpbHRlcihoYW5kbGVyKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLnByZXZlbnQpIHtcbiAgICAgIGhhbmRsZXIgPSBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RpZmllcnMuc2VsZikge1xuICAgICAgaGFuZGxlciA9IHNlbGZGaWx0ZXIoaGFuZGxlcik7XG4gICAgfVxuICAgIC8vIGtleSBmaWx0ZXJcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubW9kaWZpZXJzKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGtleSAhPT0gJ3N0b3AnICYmIGtleSAhPT0gJ3ByZXZlbnQnICYmIGtleSAhPT0gJ3NlbGYnICYmIGtleSAhPT0gJ2NhcHR1cmUnO1xuICAgIH0pO1xuICAgIGlmIChrZXlzLmxlbmd0aCkge1xuICAgICAgaGFuZGxlciA9IGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcblxuICAgIGlmICh0aGlzLmlmcmFtZUJpbmQpIHtcbiAgICAgIHRoaXMuaWZyYW1lQmluZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbih0aGlzLmVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyLCB0aGlzLm1vZGlmaWVycy5jYXB0dXJlKTtcbiAgICB9XG4gIH0sXG5cbiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHZhciBlbCA9IHRoaXMuaWZyYW1lQmluZCA/IHRoaXMuZWwuY29udGVudFdpbmRvdyA6IHRoaXMuZWw7XG4gICAgaWYgKHRoaXMuaGFuZGxlcikge1xuICAgICAgb2ZmKGVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG59O1xuXG52YXIgcHJlZml4ZXMgPSBbJy13ZWJraXQtJywgJy1tb3otJywgJy1tcy0nXTtcbnZhciBjYW1lbFByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XG52YXIgaW1wb3J0YW50UkUgPSAvIWltcG9ydGFudDs/JC87XG52YXIgcHJvcENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxudmFyIHRlc3RFbCA9IG51bGw7XG5cbnZhciBzdHlsZSA9IHtcblxuICBkZWVwOiB0cnVlLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUuY3NzVGV4dCA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlLnJlZHVjZShleHRlbmQsIHt9KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcbiAgICB9XG4gIH0sXG5cbiAgaGFuZGxlT2JqZWN0OiBmdW5jdGlvbiBoYW5kbGVPYmplY3QodmFsdWUpIHtcbiAgICAvLyBjYWNoZSBvYmplY3Qgc3R5bGVzIHNvIHRoYXQgb25seSBjaGFuZ2VkIHByb3BzXG4gICAgLy8gYXJlIGFjdHVhbGx5IHVwZGF0ZWQuXG4gICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSB8fCAodGhpcy5jYWNoZSA9IHt9KTtcbiAgICB2YXIgbmFtZSwgdmFsO1xuICAgIGZvciAobmFtZSBpbiBjYWNoZSkge1xuICAgICAgaWYgKCEobmFtZSBpbiB2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgbnVsbCk7XG4gICAgICAgIGRlbGV0ZSBjYWNoZVtuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChuYW1lIGluIHZhbHVlKSB7XG4gICAgICB2YWwgPSB2YWx1ZVtuYW1lXTtcbiAgICAgIGlmICh2YWwgIT09IGNhY2hlW25hbWVdKSB7XG4gICAgICAgIGNhY2hlW25hbWVdID0gdmFsO1xuICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCB2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShwcm9wLCB2YWx1ZSkge1xuICAgIHByb3AgPSBub3JtYWxpemUocHJvcCk7XG4gICAgaWYgKCFwcm9wKSByZXR1cm47IC8vIHVuc3VwcG9ydGVkIHByb3BcbiAgICAvLyBjYXN0IHBvc3NpYmxlIG51bWJlcnMvYm9vbGVhbnMgaW50byBzdHJpbmdzXG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHZhbHVlICs9ICcnO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdmFyIGlzSW1wb3J0YW50ID0gaW1wb3J0YW50UkUudGVzdCh2YWx1ZSkgPyAnaW1wb3J0YW50JyA6ICcnO1xuICAgICAgaWYgKGlzSW1wb3J0YW50KSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIHdhcm4oJ0l0XFwncyBwcm9iYWJseSBhIGJhZCBpZGVhIHRvIHVzZSAhaW1wb3J0YW50IHdpdGggaW5saW5lIHJ1bGVzLiAnICsgJ1RoaXMgZmVhdHVyZSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBWdWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGltcG9ydGFudFJFLCAnJykudHJpbSgpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHByb3Aua2ViYWIsIHZhbHVlLCBpc0ltcG9ydGFudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSAnJztcbiAgICB9XG4gIH1cblxufTtcblxuLyoqXG4gKiBOb3JtYWxpemUgYSBDU1MgcHJvcGVydHkgbmFtZS5cbiAqIC0gY2FjaGUgcmVzdWx0XG4gKiAtIGF1dG8gcHJlZml4XG4gKiAtIGNhbWVsQ2FzZSAtPiBkYXNoLWNhc2VcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZShwcm9wKSB7XG4gIGlmIChwcm9wQ2FjaGVbcHJvcF0pIHtcbiAgICByZXR1cm4gcHJvcENhY2hlW3Byb3BdO1xuICB9XG4gIHZhciByZXMgPSBwcmVmaXgocHJvcCk7XG4gIHByb3BDYWNoZVtwcm9wXSA9IHByb3BDYWNoZVtyZXNdID0gcmVzO1xuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEF1dG8gZGV0ZWN0IHRoZSBhcHByb3ByaWF0ZSBwcmVmaXggZm9yIGEgQ1NTIHByb3BlcnR5LlxuICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzUyMzY5MlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcHJlZml4KHByb3ApIHtcbiAgcHJvcCA9IGh5cGhlbmF0ZShwcm9wKTtcbiAgdmFyIGNhbWVsID0gY2FtZWxpemUocHJvcCk7XG4gIHZhciB1cHBlciA9IGNhbWVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWwuc2xpY2UoMSk7XG4gIGlmICghdGVzdEVsKSB7XG4gICAgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIH1cbiAgdmFyIGkgPSBwcmVmaXhlcy5sZW5ndGg7XG4gIHZhciBwcmVmaXhlZDtcbiAgaWYgKGNhbWVsICE9PSAnZmlsdGVyJyAmJiBjYW1lbCBpbiB0ZXN0RWwuc3R5bGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAga2ViYWI6IHByb3AsXG4gICAgICBjYW1lbDogY2FtZWxcbiAgICB9O1xuICB9XG4gIHdoaWxlIChpLS0pIHtcbiAgICBwcmVmaXhlZCA9IGNhbWVsUHJlZml4ZXNbaV0gKyB1cHBlcjtcbiAgICBpZiAocHJlZml4ZWQgaW4gdGVzdEVsLnN0eWxlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZWJhYjogcHJlZml4ZXNbaV0gKyBwcm9wLFxuICAgICAgICBjYW1lbDogcHJlZml4ZWRcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbi8vIHhsaW5rXG52YXIgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcbnZhciB4bGlua1JFID0gL154bGluazovO1xuXG4vLyBjaGVjayBmb3IgYXR0cmlidXRlcyB0aGF0IHByb2hpYml0IGludGVycG9sYXRpb25zXG52YXIgZGlzYWxsb3dlZEludGVycEF0dHJSRSA9IC9edi18Xjp8XkB8Xig/OmlzfHRyYW5zaXRpb258dHJhbnNpdGlvbi1tb2RlfGRlYm91bmNlfHRyYWNrLWJ5fHN0YWdnZXJ8ZW50ZXItc3RhZ2dlcnxsZWF2ZS1zdGFnZ2VyKSQvO1xuLy8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgYWxzbyBzZXQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzXG4vLyBiZWNhdXNlIHRoZXkgb25seSBhZmZlY3QgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGVsZW1lbnRcbnZhciBhdHRyV2l0aFByb3BzUkUgPSAvXig/OnZhbHVlfGNoZWNrZWR8c2VsZWN0ZWR8bXV0ZWQpJC87XG4vLyB0aGVzZSBhdHRyaWJ1dGVzIGV4cGVjdCBlbnVtcmF0ZWQgdmFsdWVzIG9mIFwidHJ1ZVwiIG9yIFwiZmFsc2VcIlxuLy8gYnV0IGFyZSBub3QgYm9vbGVhbiBhdHRyaWJ1dGVzXG52YXIgZW51bWVyYXRlZEF0dHJSRSA9IC9eKD86ZHJhZ2dhYmxlfGNvbnRlbnRlZGl0YWJsZXxzcGVsbGNoZWNrKSQvO1xuXG4vLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBzZXQgYSBoaWRkZW4gcHJvcGVydHkgZm9yXG4vLyBiaW5kaW5nIHYtbW9kZWwgdG8gb2JqZWN0IHZhbHVlc1xudmFyIG1vZGVsUHJvcHMgPSB7XG4gIHZhbHVlOiAnX3ZhbHVlJyxcbiAgJ3RydWUtdmFsdWUnOiAnX3RydWVWYWx1ZScsXG4gICdmYWxzZS12YWx1ZSc6ICdfZmFsc2VWYWx1ZSdcbn07XG5cbnZhciBiaW5kJDEgPSB7XG5cbiAgcHJpb3JpdHk6IEJJTkQsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG4gICAgLy8gc2hvdWxkIGJlIGRlZXAgd2F0Y2ggb24gb2JqZWN0IG1vZGVcbiAgICBpZiAoIWF0dHIpIHtcbiAgICAgIHRoaXMuZGVlcCA9IHRydWU7XG4gICAgfVxuICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9uIGJpbmRpbmdzXG4gICAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG4gICAgdmFyIHRva2VucyA9IGRlc2NyaXB0b3IuaW50ZXJwO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9ucyB3aXRoIG9uZS10aW1lIHRva2Vuc1xuICAgICAgaWYgKGRlc2NyaXB0b3IuaGFzT25lVGltZSkge1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSB0b2tlbnNUb0V4cCh0b2tlbnMsIHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pO1xuICAgICAgfVxuXG4gICAgICAvLyBvbmx5IGFsbG93IGJpbmRpbmcgb24gbmF0aXZlIGF0dHJpYnV0ZXNcbiAgICAgIGlmIChkaXNhbGxvd2VkSW50ZXJwQXR0clJFLnRlc3QoYXR0cikgfHwgYXR0ciA9PT0gJ25hbWUnICYmICh0YWcgPT09ICdQQVJUSUFMJyB8fCB0YWcgPT09ICdTTE9UJykpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2F0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGlzIG5vdCBhbGxvd2VkIGluIFZ1ZS5qcyAnICsgJ2RpcmVjdGl2ZXMgYW5kIHNwZWNpYWwgYXR0cmlidXRlcy4nLCB0aGlzLnZtKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdmFyIHJhdyA9IGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnO1xuICAgICAgICAvLyB3YXJuIHNyY1xuICAgICAgICBpZiAoYXR0ciA9PT0gJ3NyYycpIHtcbiAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3JjXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICdhIDQwNCByZXF1ZXN0LiBVc2Ugdi1iaW5kOnNyYyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2FybiBzdHlsZVxuICAgICAgICBpZiAoYXR0ciA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzdHlsZVwiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAndGhlIGF0dHJpYnV0ZSB0byBiZSBkaXNjYXJkZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuICcgKyAnVXNlIHYtYmluZDpzdHlsZSBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuaW52YWxpZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuICAgIGlmICh0aGlzLmFyZykge1xuICAgICAgdGhpcy5oYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIHNoYXJlIG9iamVjdCBoYW5kbGVyIHdpdGggdi1iaW5kOmNsYXNzXG4gIGhhbmRsZU9iamVjdDogc3R5bGUuaGFuZGxlT2JqZWN0LFxuXG4gIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgaW50ZXJwID0gdGhpcy5kZXNjcmlwdG9yLmludGVycDtcbiAgICBpZiAodGhpcy5tb2RpZmllcnMuY2FtZWwpIHtcbiAgICAgIGF0dHIgPSBjYW1lbGl6ZShhdHRyKTtcbiAgICB9XG4gICAgaWYgKCFpbnRlcnAgJiYgYXR0cldpdGhQcm9wc1JFLnRlc3QoYXR0cikgJiYgYXR0ciBpbiBlbCkge1xuICAgICAgdmFyIGF0dHJWYWx1ZSA9IGF0dHIgPT09ICd2YWx1ZScgPyB2YWx1ZSA9PSBudWxsIC8vIElFOSB3aWxsIHNldCBpbnB1dC52YWx1ZSB0byBcIm51bGxcIiBmb3IgbnVsbC4uLlxuICAgICAgPyAnJyA6IHZhbHVlIDogdmFsdWU7XG5cbiAgICAgIGlmIChlbFthdHRyXSAhPT0gYXR0clZhbHVlKSB7XG4gICAgICAgIGVsW2F0dHJdID0gYXR0clZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBzZXQgbW9kZWwgcHJvcHNcbiAgICB2YXIgbW9kZWxQcm9wID0gbW9kZWxQcm9wc1thdHRyXTtcbiAgICBpZiAoIWludGVycCAmJiBtb2RlbFByb3ApIHtcbiAgICAgIGVsW21vZGVsUHJvcF0gPSB2YWx1ZTtcbiAgICAgIC8vIHVwZGF0ZSB2LW1vZGVsIGlmIHByZXNlbnRcbiAgICAgIHZhciBtb2RlbCA9IGVsLl9fdl9tb2RlbDtcbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICBtb2RlbC5saXN0ZW5lcigpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBkbyBub3Qgc2V0IHZhbHVlIGF0dHJpYnV0ZSBmb3IgdGV4dGFyZWFcbiAgICBpZiAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVcbiAgICBpZiAoZW51bWVyYXRlZEF0dHJSRS50ZXN0KGF0dHIpKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPyAndHJ1ZScgOiAnZmFsc2UnKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgIT09IGZhbHNlKSB7XG4gICAgICBpZiAoYXR0ciA9PT0gJ2NsYXNzJykge1xuICAgICAgICAvLyBoYW5kbGUgZWRnZSBjYXNlICMxOTYwOlxuICAgICAgICAvLyBjbGFzcyBpbnRlcnBvbGF0aW9uIHNob3VsZCBub3Qgb3ZlcndyaXRlIFZ1ZSB0cmFuc2l0aW9uIGNsYXNzXG4gICAgICAgIGlmIChlbC5fX3ZfdHJhbnMpIHtcbiAgICAgICAgICB2YWx1ZSArPSAnICcgKyBlbC5fX3ZfdHJhbnMuaWQgKyAnLXRyYW5zaXRpb24nO1xuICAgICAgICB9XG4gICAgICAgIHNldENsYXNzKGVsLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHhsaW5rUkUudGVzdChhdHRyKSkge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBlbCA9IHtcblxuICBwcmlvcml0eTogRUwsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXRoaXMuYXJnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpZCA9IHRoaXMuaWQgPSBjYW1lbGl6ZSh0aGlzLmFyZyk7XG4gICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcbiAgICBpZiAoaGFzT3duKHJlZnMsIGlkKSkge1xuICAgICAgcmVmc1tpZF0gPSB0aGlzLmVsO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShyZWZzLCBpZCwgdGhpcy5lbCk7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG4gICAgaWYgKHJlZnNbdGhpcy5pZF0gPT09IHRoaXMuZWwpIHtcbiAgICAgIHJlZnNbdGhpcy5pZF0gPSBudWxsO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHJlZiA9IHtcbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtcmVmOicgKyB0aGlzLmFyZyArICcgbXVzdCBiZSB1c2VkIG9uIGEgY2hpbGQgJyArICdjb21wb25lbnQuIEZvdW5kIG9uIDwnICsgdGhpcy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPi4nLCB0aGlzLnZtKTtcbiAgfVxufTtcblxudmFyIGNsb2FrID0ge1xuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdGhpcy52bS4kb25jZSgncHJlLWhvb2s6Y29tcGlsZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtY2xvYWsnKTtcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gbXVzdCBleHBvcnQgcGxhaW4gb2JqZWN0XG52YXIgZGlyZWN0aXZlcyA9IHtcbiAgdGV4dDogdGV4dCQxLFxuICBodG1sOiBodG1sLFxuICAnZm9yJzogdkZvcixcbiAgJ2lmJzogdklmLFxuICBzaG93OiBzaG93LFxuICBtb2RlbDogbW9kZWwsXG4gIG9uOiBvbiQxLFxuICBiaW5kOiBiaW5kJDEsXG4gIGVsOiBlbCxcbiAgcmVmOiByZWYsXG4gIGNsb2FrOiBjbG9ha1xufTtcblxudmFyIHZDbGFzcyA9IHtcblxuICBkZWVwOiB0cnVlLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLnNldENsYXNzKHZhbHVlLnRyaW0oKS5zcGxpdCgvXFxzKy8pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRDbGFzcyhub3JtYWxpemUkMSh2YWx1ZSkpO1xuICAgIH1cbiAgfSxcblxuICBzZXRDbGFzczogZnVuY3Rpb24gc2V0Q2xhc3ModmFsdWUpIHtcbiAgICB0aGlzLmNsZWFudXAodmFsdWUpO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgdmFsID0gdmFsdWVbaV07XG4gICAgICBpZiAodmFsKSB7XG4gICAgICAgIGFwcGx5KHRoaXMuZWwsIHZhbCwgYWRkQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnByZXZLZXlzID0gdmFsdWU7XG4gIH0sXG5cbiAgY2xlYW51cDogZnVuY3Rpb24gY2xlYW51cCh2YWx1ZSkge1xuICAgIHZhciBwcmV2S2V5cyA9IHRoaXMucHJldktleXM7XG4gICAgaWYgKCFwcmV2S2V5cykgcmV0dXJuO1xuICAgIHZhciBpID0gcHJldktleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciBrZXkgPSBwcmV2S2V5c1tpXTtcbiAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUuaW5kZXhPZihrZXkpIDwgMCkge1xuICAgICAgICBhcHBseSh0aGlzLmVsLCBrZXksIHJlbW92ZUNsYXNzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogTm9ybWFsaXplIG9iamVjdHMgYW5kIGFycmF5cyAocG90ZW50aWFsbHkgY29udGFpbmluZyBvYmplY3RzKVxuICogaW50byBhcnJheSBvZiBzdHJpbmdzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5PFN0cmluZ3xPYmplY3Q+fSB2YWx1ZVxuICogQHJldHVybiB7QXJyYXk8U3RyaW5nPn1cbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemUkMSh2YWx1ZSkge1xuICB2YXIgcmVzID0gW107XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgX2tleSA9IHZhbHVlW2ldO1xuICAgICAgaWYgKF9rZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBfa2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJlcy5wdXNoKF9rZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAodmFyIGsgaW4gX2tleSkge1xuICAgICAgICAgICAgaWYgKF9rZXlba10pIHJlcy5wdXNoKGspO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZVtrZXldKSByZXMucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEFkZCBvciByZW1vdmUgYSBjbGFzcy9jbGFzc2VzIG9uIGFuIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBjbGFzcyBuYW1lLiBUaGlzIG1heSBvciBtYXkgbm90XG4gKiAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW4gYSBzcGFjZSBjaGFyYWN0ZXIsIGluIHN1Y2ggYVxuICogICAgICAgICAgICAgICAgICAgICBjYXNlIHdlJ2xsIGRlYWwgd2l0aCBtdWx0aXBsZSBjbGFzc1xuICogICAgICAgICAgICAgICAgICAgICBuYW1lcyBhdCBvbmNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5mdW5jdGlvbiBhcHBseShlbCwga2V5LCBmbikge1xuICBrZXkgPSBrZXkudHJpbSgpO1xuICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcbiAgICBmbihlbCwga2V5KTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gVGhlIGtleSBjb250YWlucyBvbmUgb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzLlxuICAvLyBTaW5jZSBhIGNsYXNzIG5hbWUgZG9lc24ndCBhY2NlcHQgc3VjaCBjaGFyYWN0ZXJzLCB3ZVxuICAvLyB0cmVhdCBpdCBhcyBtdWx0aXBsZSBjbGFzc2VzLlxuICB2YXIga2V5cyA9IGtleS5zcGxpdCgvXFxzKy8pO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm4oZWwsIGtleXNbaV0pO1xuICB9XG59XG5cbnZhciBjb21wb25lbnQgPSB7XG5cbiAgcHJpb3JpdHk6IENPTVBPTkVOVCxcblxuICBwYXJhbXM6IFsna2VlcC1hbGl2ZScsICd0cmFuc2l0aW9uLW1vZGUnLCAnaW5saW5lLXRlbXBsYXRlJ10sXG5cbiAgLyoqXG4gICAqIFNldHVwLiBUd28gcG9zc2libGUgdXNhZ2VzOlxuICAgKlxuICAgKiAtIHN0YXRpYzpcbiAgICogICA8Y29tcD4gb3IgPGRpdiB2LWNvbXBvbmVudD1cImNvbXBcIj5cbiAgICpcbiAgICogLSBkeW5hbWljOlxuICAgKiAgIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuICAgKi9cblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIGlmICghdGhpcy5lbC5fX3Z1ZV9fKSB7XG4gICAgICAvLyBrZWVwLWFsaXZlIGNhY2hlXG4gICAgICB0aGlzLmtlZXBBbGl2ZSA9IHRoaXMucGFyYW1zLmtlZXBBbGl2ZTtcbiAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLmNhY2hlID0ge307XG4gICAgICB9XG4gICAgICAvLyBjaGVjayBpbmxpbmUtdGVtcGxhdGVcbiAgICAgIGlmICh0aGlzLnBhcmFtcy5pbmxpbmVUZW1wbGF0ZSkge1xuICAgICAgICAvLyBleHRyYWN0IGlubGluZSB0ZW1wbGF0ZSBhcyBhIERvY3VtZW50RnJhZ21lbnRcbiAgICAgICAgdGhpcy5pbmxpbmVUZW1wbGF0ZSA9IGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpO1xuICAgICAgfVxuICAgICAgLy8gY29tcG9uZW50IHJlc29sdXRpb24gcmVsYXRlZCBzdGF0ZVxuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSB0aGlzLkNvbXBvbmVudCA9IG51bGw7XG4gICAgICAvLyB0cmFuc2l0aW9uIHJlbGF0ZWQgc3RhdGVcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzID0gMDtcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG4gICAgICAvLyBjcmVhdGUgYSByZWYgYW5jaG9yXG4gICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1jb21wb25lbnQnKTtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgICAgLy8gcmVtb3ZlIGlzIGF0dHJpYnV0ZS5cbiAgICAgIC8vIHRoaXMgaXMgcmVtb3ZlZCBkdXJpbmcgY29tcGlsYXRpb24sIGJ1dCBiZWNhdXNlIGNvbXBpbGF0aW9uIGlzXG4gICAgICAvLyBjYWNoZWQsIHdoZW4gdGhlIGNvbXBvbmVudCBpcyB1c2VkIGVsc2V3aGVyZSB0aGlzIGF0dHJpYnV0ZVxuICAgICAgLy8gd2lsbCByZW1haW4gYXQgbGluayB0aW1lLlxuICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnOmlzJyk7XG4gICAgICAvLyByZW1vdmUgcmVmLCBzYW1lIGFzIGFib3ZlXG4gICAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgndi1yZWY6JyArIGh5cGhlbmF0ZSh0aGlzLmRlc2NyaXB0b3IucmVmKSk7XG4gICAgICB9XG4gICAgICAvLyBpZiBzdGF0aWMsIGJ1aWxkIHJpZ2h0IG5vdy5cbiAgICAgIGlmICh0aGlzLmxpdGVyYWwpIHtcbiAgICAgICAgdGhpcy5zZXRDb21wb25lbnQodGhpcy5leHByZXNzaW9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdjYW5ub3QgbW91bnQgY29tcG9uZW50IFwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiAnICsgJ29uIGFscmVhZHkgbW91bnRlZCBlbGVtZW50OiAnICsgdGhpcy5lbCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBQdWJsaWMgdXBkYXRlLCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIgaW4gdGhlIGR5bmFtaWNcbiAgICogbGl0ZXJhbCBzY2VuYXJpbywgZS5nLiA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cbiAgICovXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAoIXRoaXMubGl0ZXJhbCkge1xuICAgICAgdGhpcy5zZXRDb21wb25lbnQodmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU3dpdGNoIGR5bmFtaWMgY29tcG9uZW50cy4gTWF5IHJlc29sdmUgdGhlIGNvbXBvbmVudFxuICAgKiBhc3luY2hyb25vdXNseSwgYW5kIHBlcmZvcm0gdHJhbnNpdGlvbiBiYXNlZCBvblxuICAgKiBzcGVjaWZpZWQgdHJhbnNpdGlvbiBtb2RlLiBBY2NlcHRzIGEgZmV3IGFkZGl0aW9uYWxcbiAgICogYXJndW1lbnRzIHNwZWNpZmljYWxseSBmb3IgdnVlLXJvdXRlci5cbiAgICpcbiAgICogVGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBmdWxsIHRyYW5zaXRpb24gaXNcbiAgICogZmluaXNoZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIHNldENvbXBvbmVudDogZnVuY3Rpb24gc2V0Q29tcG9uZW50KHZhbHVlLCBjYikge1xuICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAvLyBqdXN0IHJlbW92ZSBjdXJyZW50XG4gICAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG4gICAgICB0aGlzLnJlbW92ZSh0aGlzLmNoaWxkVk0sIGNiKTtcbiAgICAgIHRoaXMuY2hpbGRWTSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMucmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLm1vdW50Q29tcG9uZW50KGNiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVzb2x2ZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG4gICAqIHRoZSBjaGlsZCB2bS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIHJlc29sdmVDb21wb25lbnQ6IGZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQodmFsdWUsIGNiKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICAgICAgc2VsZi5Db21wb25lbnROYW1lID0gQ29tcG9uZW50Lm9wdGlvbnMubmFtZSB8fCAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogbnVsbCk7XG4gICAgICBzZWxmLkNvbXBvbmVudCA9IENvbXBvbmVudDtcbiAgICAgIGNiKCk7XG4gICAgfSk7XG4gICAgdGhpcy52bS5fcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2UgdXNpbmcgdGhlIGN1cnJlbnQgY29uc3RydWN0b3IgYW5kXG4gICAqIHJlcGxhY2UgdGhlIGV4aXN0aW5nIGluc3RhbmNlLiBUaGlzIG1ldGhvZCBkb2Vzbid0IGNhcmVcbiAgICogd2hldGhlciB0aGUgbmV3IGNvbXBvbmVudCBhbmQgdGhlIG9sZCBvbmUgYXJlIGFjdHVhbGx5XG4gICAqIHRoZSBzYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiBtb3VudENvbXBvbmVudChjYikge1xuICAgIC8vIGFjdHVhbCBtb3VudFxuICAgIHRoaXMudW5idWlsZCh0cnVlKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFjdGl2YXRlSG9va3MgPSB0aGlzLkNvbXBvbmVudC5vcHRpb25zLmFjdGl2YXRlO1xuICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuICAgIHZhciBuZXdDb21wb25lbnQgPSB0aGlzLmJ1aWxkKCk7XG4gICAgaWYgKGFjdGl2YXRlSG9va3MgJiYgIWNhY2hlZCkge1xuICAgICAgdGhpcy53YWl0aW5nRm9yID0gbmV3Q29tcG9uZW50O1xuICAgICAgY2FsbEFjdGl2YXRlSG9va3MoYWN0aXZhdGVIb29rcywgbmV3Q29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLndhaXRpbmdGb3IgIT09IG5ld0NvbXBvbmVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLndhaXRpbmdGb3IgPSBudWxsO1xuICAgICAgICBzZWxmLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIHJlZiBmb3Iga2VwdC1hbGl2ZSBjb21wb25lbnRcbiAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgbmV3Q29tcG9uZW50Ll91cGRhdGVSZWYoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGNvbXBvbmVudCBjaGFuZ2VzIG9yIHVuYmluZHMgYmVmb3JlIGFuIGFzeW5jXG4gICAqIGNvbnN0cnVjdG9yIGlzIHJlc29sdmVkLCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgaXRzXG4gICAqIHBlbmRpbmcgY2FsbGJhY2suXG4gICAqL1xuXG4gIGludmFsaWRhdGVQZW5kaW5nOiBmdW5jdGlvbiBpbnZhbGlkYXRlUGVuZGluZygpIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpIHtcbiAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiLmNhbmNlbCgpO1xuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW5zdGFudGlhdGUvaW5zZXJ0IGEgbmV3IGNoaWxkIHZtLlxuICAgKiBJZiBrZWVwIGFsaXZlIGFuZCBoYXMgY2FjaGVkIGluc3RhbmNlLCBpbnNlcnQgdGhhdFxuICAgKiBpbnN0YW5jZTsgb3RoZXJ3aXNlIGJ1aWxkIGEgbmV3IG9uZSBhbmQgY2FjaGUgaXQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0cmFPcHRpb25zXVxuICAgKiBAcmV0dXJuIHtWdWV9IC0gdGhlIGNyZWF0ZWQgaW5zdGFuY2VcbiAgICovXG5cbiAgYnVpbGQ6IGZ1bmN0aW9uIGJ1aWxkKGV4dHJhT3B0aW9ucykge1xuICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLkNvbXBvbmVudCkge1xuICAgICAgLy8gZGVmYXVsdCBvcHRpb25zXG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgbmFtZTogdGhpcy5Db21wb25lbnROYW1lLFxuICAgICAgICBlbDogY2xvbmVOb2RlKHRoaXMuZWwpLFxuICAgICAgICB0ZW1wbGF0ZTogdGhpcy5pbmxpbmVUZW1wbGF0ZSxcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGFkZCB0aGUgY2hpbGQgd2l0aCBjb3JyZWN0IHBhcmVudFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBpdHMgcGFyZW50XG4gICAgICAgIC8vIHNob3VsZCBiZSB0aGUgdHJhbnNjbHVzaW9uIGhvc3QuXG4gICAgICAgIHBhcmVudDogdGhpcy5faG9zdCB8fCB0aGlzLnZtLFxuICAgICAgICAvLyBpZiBubyBpbmxpbmUtdGVtcGxhdGUsIHRoZW4gdGhlIGNvbXBpbGVkXG4gICAgICAgIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gICAgICAgIF9saW5rZXJDYWNoYWJsZTogIXRoaXMuaW5saW5lVGVtcGxhdGUsXG4gICAgICAgIF9yZWY6IHRoaXMuZGVzY3JpcHRvci5yZWYsXG4gICAgICAgIF9hc0NvbXBvbmVudDogdHJ1ZSxcbiAgICAgICAgX2lzUm91dGVyVmlldzogdGhpcy5faXNSb3V0ZXJWaWV3LFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG4gICAgICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuICAgICAgICAvLyBhbmQgaXRzIGhvc3QuXG4gICAgICAgIF9jb250ZXh0OiB0aGlzLnZtLFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuICAgICAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuICAgICAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuICAgICAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgICAgIF9zY29wZTogdGhpcy5fc2NvcGUsXG4gICAgICAgIC8vIHBhc3MgaW4gdGhlIG93bmVyIGZyYWdtZW50IG9mIHRoaXMgY29tcG9uZW50LlxuICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBzbyB0aGF0IHRoZSBmcmFnbWVudCBjYW4ga2VlcFxuICAgICAgICAvLyB0cmFjayBvZiBpdHMgY29udGFpbmVkIGNvbXBvbmVudHMgaW4gb3JkZXIgdG9cbiAgICAgICAgLy8gY2FsbCBhdHRhY2gvZGV0YWNoIGhvb2tzIGZvciB0aGVtLlxuICAgICAgICBfZnJhZzogdGhpcy5fZnJhZ1xuICAgICAgfTtcbiAgICAgIC8vIGV4dHJhIG9wdGlvbnNcbiAgICAgIC8vIGluIDEuMC4wIHRoaXMgaXMgdXNlZCBieSB2dWUtcm91dGVyIG9ubHlcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGV4dHJhT3B0aW9ucykge1xuICAgICAgICBleHRlbmQob3B0aW9ucywgZXh0cmFPcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLkNvbXBvbmVudChvcHRpb25zKTtcbiAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF0gPSBjaGlsZDtcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbC5oYXNBdHRyaWJ1dGUoJ3RyYW5zaXRpb24nKSAmJiBjaGlsZC5faXNGcmFnbWVudCkge1xuICAgICAgICB3YXJuKCdUcmFuc2l0aW9ucyB3aWxsIG5vdCB3b3JrIG9uIGEgZnJhZ21lbnQgaW5zdGFuY2UuICcgKyAnVGVtcGxhdGU6ICcgKyBjaGlsZC4kb3B0aW9ucy50ZW1wbGF0ZSwgY2hpbGQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVHJ5IHRvIGdldCBhIGNhY2hlZCBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBjb21wb25lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG4gICAqL1xuXG4gIGdldENhY2hlZDogZnVuY3Rpb24gZ2V0Q2FjaGVkKCkge1xuICAgIHJldHVybiB0aGlzLmtlZXBBbGl2ZSAmJiB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRlYXJkb3duIHRoZSBjdXJyZW50IGNoaWxkLCBidXQgZGVmZXJzIGNsZWFudXAgc29cbiAgICogdGhhdCB3ZSBjYW4gc2VwYXJhdGUgdGhlIGRlc3Ryb3kgYW5kIHJlbW92YWwgc3RlcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJcbiAgICovXG5cbiAgdW5idWlsZDogZnVuY3Rpb24gdW5idWlsZChkZWZlcikge1xuICAgIGlmICh0aGlzLndhaXRpbmdGb3IpIHtcbiAgICAgIGlmICghdGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgICAgdGhpcy53YWl0aW5nRm9yLiRkZXN0cm95KCk7XG4gICAgICB9XG4gICAgICB0aGlzLndhaXRpbmdGb3IgPSBudWxsO1xuICAgIH1cbiAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkVk07XG4gICAgaWYgKCFjaGlsZCB8fCB0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgIC8vIHJlbW92ZSByZWZcbiAgICAgICAgY2hpbGQuX2luYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgY2hpbGQuX3VwZGF0ZVJlZih0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdGhlIHNvbGUgcHVycG9zZSBvZiBgZGVmZXJDbGVhbnVwYCBpcyBzbyB0aGF0IHdlIGNhblxuICAgIC8vIFwiZGVhY3RpdmF0ZVwiIHRoZSB2bSByaWdodCBub3cgYW5kIHBlcmZvcm0gRE9NIHJlbW92YWxcbiAgICAvLyBsYXRlci5cbiAgICBjaGlsZC4kZGVzdHJveShmYWxzZSwgZGVmZXIpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgY3VycmVudCBkZXN0cm95ZWQgY2hpbGQgYW5kIG1hbnVhbGx5IGRvXG4gICAqIHRoZSBjbGVhbnVwIGFmdGVyIHJlbW92YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGNoaWxkLCBjYikge1xuICAgIHZhciBrZWVwQWxpdmUgPSB0aGlzLmtlZXBBbGl2ZTtcbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIC8vIHdlIG1heSBoYXZlIGEgY29tcG9uZW50IHN3aXRjaCB3aGVuIGEgcHJldmlvdXNcbiAgICAgIC8vIGNvbXBvbmVudCBpcyBzdGlsbCBiZWluZyB0cmFuc2l0aW9uZWQgb3V0LlxuICAgICAgLy8gd2Ugd2FudCB0byB0cmlnZ2VyIG9ubHkgb25lIGxhc3Rlc3QgaW5zZXJ0aW9uIGNiXG4gICAgICAvLyB3aGVuIHRoZSBleGlzdGluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLiAoIzExMTkpXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscysrO1xuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gY2I7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBjaGlsZC4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbHMtLTtcbiAgICAgICAgaWYgKCFrZWVwQWxpdmUpIGNoaWxkLl9jbGVhbnVwKCk7XG4gICAgICAgIGlmICghc2VsZi5wZW5kaW5nUmVtb3ZhbHMgJiYgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKSB7XG4gICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKCk7XG4gICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChjYikge1xuICAgICAgY2IoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFjdHVhbGx5IHN3YXAgdGhlIGNvbXBvbmVudHMsIGRlcGVuZGluZyBvbiB0aGVcbiAgICogdHJhbnNpdGlvbiBtb2RlLiBEZWZhdWx0cyB0byBzaW11bHRhbmVvdXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICB0cmFuc2l0aW9uOiBmdW5jdGlvbiB0cmFuc2l0aW9uKHRhcmdldCwgY2IpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGN1cnJlbnQgPSB0aGlzLmNoaWxkVk07XG4gICAgLy8gZm9yIGRldnRvb2wgaW5zcGVjdGlvblxuICAgIGlmIChjdXJyZW50KSBjdXJyZW50Ll9pbmFjdGl2ZSA9IHRydWU7XG4gICAgdGFyZ2V0Ll9pbmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuY2hpbGRWTSA9IHRhcmdldDtcbiAgICBzd2l0Y2ggKHNlbGYucGFyYW1zLnRyYW5zaXRpb25Nb2RlKSB7XG4gICAgICBjYXNlICdpbi1vdXQnOlxuICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGNiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb3V0LWluJzpcbiAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQpO1xuICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVW5iaW5kLlxuICAgKi9cblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG4gICAgLy8gRG8gbm90IGRlZmVyIGNsZWFudXAgd2hlbiB1bmJpbmRpbmdcbiAgICB0aGlzLnVuYnVpbGQoKTtcbiAgICAvLyBkZXN0cm95IGFsbCBrZWVwLWFsaXZlIGNhY2hlZCBpbnN0YW5jZXNcbiAgICBpZiAodGhpcy5jYWNoZSkge1xuICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGUpIHtcbiAgICAgICAgdGhpcy5jYWNoZVtrZXldLiRkZXN0cm95KCk7XG4gICAgICB9XG4gICAgICB0aGlzLmNhY2hlID0gbnVsbDtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhY3RpdmF0ZSBob29rcyBpbiBvcmRlciAoYXN5bmNocm9ub3VzKVxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGhvb2tzXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZnVuY3Rpb24gY2FsbEFjdGl2YXRlSG9va3MoaG9va3MsIHZtLCBjYikge1xuICB2YXIgdG90YWwgPSBob29rcy5sZW5ndGg7XG4gIHZhciBjYWxsZWQgPSAwO1xuICBob29rc1swXS5jYWxsKHZtLCBuZXh0KTtcbiAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICBpZiAoKytjYWxsZWQgPj0gdG90YWwpIHtcbiAgICAgIGNiKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhvb2tzW2NhbGxlZF0uY2FsbCh2bSwgbmV4dCk7XG4gICAgfVxuICB9XG59XG5cbnZhciBwcm9wQmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xudmFyIGVtcHR5ID0ge307XG5cbi8vIHJlZ2V4ZXNcbnZhciBpZGVudFJFJDEgPSAvXlskX2EtekEtWl0rW1xcdyRdKiQvO1xudmFyIHNldHRhYmxlUGF0aFJFID0gL15bQS1aYS16XyRdW1xcdyRdKihcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFtbXlxcW1xcXV0rXFxdKSokLztcblxuLyoqXG4gKiBDb21waWxlIHByb3BzIG9uIGEgcm9vdCBlbGVtZW50IGFuZCByZXR1cm5cbiAqIGEgcHJvcHMgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BPcHRpb25zXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVQcm9wcyhlbCwgcHJvcE9wdGlvbnMsIHZtKSB7XG4gIHZhciBwcm9wcyA9IFtdO1xuICB2YXIgbmFtZXMgPSBPYmplY3Qua2V5cyhwcm9wT3B0aW9ucyk7XG4gIHZhciBpID0gbmFtZXMubGVuZ3RoO1xuICB2YXIgb3B0aW9ucywgbmFtZSwgYXR0ciwgdmFsdWUsIHBhdGgsIHBhcnNlZCwgcHJvcDtcbiAgd2hpbGUgKGktLSkge1xuICAgIG5hbWUgPSBuYW1lc1tpXTtcbiAgICBvcHRpb25zID0gcHJvcE9wdGlvbnNbbmFtZV0gfHwgZW1wdHk7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lID09PSAnJGRhdGEnKSB7XG4gICAgICB3YXJuKCdEbyBub3QgdXNlICRkYXRhIGFzIHByb3AuJywgdm0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gcHJvcHMgY291bGQgY29udGFpbiBkYXNoZXMsIHdoaWNoIHdpbGwgYmVcbiAgICAvLyBpbnRlcnByZXRlZCBhcyBtaW51cyBjYWxjdWxhdGlvbnMgYnkgdGhlIHBhcnNlclxuICAgIC8vIHNvIHdlIG5lZWQgdG8gY2FtZWxpemUgdGhlIHBhdGggaGVyZVxuICAgIHBhdGggPSBjYW1lbGl6ZShuYW1lKTtcbiAgICBpZiAoIWlkZW50UkUkMS50ZXN0KHBhdGgpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcCBrZXk6IFwiJyArIG5hbWUgKyAnXCIuIFByb3Aga2V5cyAnICsgJ211c3QgYmUgdmFsaWQgaWRlbnRpZmllcnMuJywgdm0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcHJvcCA9IHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBwYXRoOiBwYXRoLFxuICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgIG1vZGU6IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWSxcbiAgICAgIHJhdzogbnVsbFxuICAgIH07XG5cbiAgICBhdHRyID0gaHlwaGVuYXRlKG5hbWUpO1xuICAgIC8vIGZpcnN0IGNoZWNrIGR5bmFtaWMgdmVyc2lvblxuICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0cikpID09PSBudWxsKSB7XG4gICAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLnN5bmMnKSkgIT09IG51bGwpIHtcbiAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuICAgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcub25jZScpKSAhPT0gbnVsbCkge1xuICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICAgIC8vIGhhcyBkeW5hbWljIGJpbmRpbmchXG4gICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuICAgICAgdmFsdWUgPSBwYXJzZWQuZXhwcmVzc2lvbjtcbiAgICAgIHByb3AuZmlsdGVycyA9IHBhcnNlZC5maWx0ZXJzO1xuICAgICAgLy8gY2hlY2sgYmluZGluZyB0eXBlXG4gICAgICBpZiAoaXNMaXRlcmFsKHZhbHVlKSAmJiAhcGFyc2VkLmZpbHRlcnMpIHtcbiAgICAgICAgLy8gZm9yIGV4cHJlc3Npb25zIGNvbnRhaW5pbmcgbGl0ZXJhbCBudW1iZXJzIGFuZFxuICAgICAgICAvLyBib29sZWFucywgdGhlcmUncyBubyBuZWVkIHRvIHNldHVwIGEgcHJvcCBiaW5kaW5nLFxuICAgICAgICAvLyBzbyB3ZSBjYW4gb3B0aW1pemUgdGhlbSBhcyBhIG9uZS10aW1lIHNldC5cbiAgICAgICAgcHJvcC5vcHRpbWl6ZWRMaXRlcmFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb3AuZHluYW1pYyA9IHRydWU7XG4gICAgICAgIC8vIGNoZWNrIG5vbi1zZXR0YWJsZSBwYXRoIGZvciB0d28td2F5IGJpbmRpbmdzXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZICYmICFzZXR0YWJsZVBhdGhSRS50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWTtcbiAgICAgICAgICB3YXJuKCdDYW5ub3QgYmluZCB0d28td2F5IHByb3Agd2l0aCBub24tc2V0dGFibGUgJyArICdwYXJlbnQgcGF0aDogJyArIHZhbHVlLCB2bSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHByb3AucGFyZW50UGF0aCA9IHZhbHVlO1xuXG4gICAgICAvLyB3YXJuIHJlcXVpcmVkIHR3by13YXlcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9wdGlvbnMudHdvV2F5ICYmIHByb3AubW9kZSAhPT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZKSB7XG4gICAgICAgIHdhcm4oJ1Byb3AgXCInICsgbmFtZSArICdcIiBleHBlY3RzIGEgdHdvLXdheSBiaW5kaW5nIHR5cGUuJywgdm0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QXR0cihlbCwgYXR0cikpICE9PSBudWxsKSB7XG4gICAgICAvLyBoYXMgbGl0ZXJhbCBiaW5kaW5nIVxuICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIGNoZWNrIHBvc3NpYmxlIGNhbWVsQ2FzZSBwcm9wIHVzYWdlXG4gICAgICB2YXIgbG93ZXJDYXNlTmFtZSA9IHBhdGgudG9Mb3dlckNhc2UoKTtcbiAgICAgIHZhbHVlID0gL1tBLVpcXC1dLy50ZXN0KG5hbWUpICYmIChlbC5nZXRBdHRyaWJ1dGUobG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpKTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB3YXJuKCdQb3NzaWJsZSB1c2FnZSBlcnJvciBmb3IgcHJvcCBgJyArIGxvd2VyQ2FzZU5hbWUgKyAnYCAtICcgKyAnZGlkIHlvdSBtZWFuIGAnICsgYXR0ciArICdgPyBIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSAnICsgJ2tlYmFiLWNhc2UgZm9yIHByb3BzIGluIHRlbXBsYXRlcy4nLCB2bSk7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVxdWlyZWQpIHtcbiAgICAgICAgLy8gd2FybiBtaXNzaW5nIHJlcXVpcmVkXG4gICAgICAgIHdhcm4oJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogJyArIG5hbWUsIHZtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcHVzaCBwcm9wXG4gICAgcHJvcHMucHVzaChwcm9wKTtcbiAgfVxuICByZXR1cm4gbWFrZVByb3BzTGlua0ZuKHByb3BzKTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyBwcm9wcyB0byBhIHZtLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHByb3BzTGlua0ZuKHZtLCBzY29wZSkge1xuICAgIC8vIHN0b3JlIHJlc29sdmVkIHByb3BzIGluZm9cbiAgICB2bS5fcHJvcHMgPSB7fTtcbiAgICB2YXIgaW5saW5lUHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGE7XG4gICAgdmFyIGkgPSBwcm9wcy5sZW5ndGg7XG4gICAgdmFyIHByb3AsIHBhdGgsIG9wdGlvbnMsIHZhbHVlLCByYXc7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgcmF3ID0gcHJvcC5yYXc7XG4gICAgICBwYXRoID0gcHJvcC5wYXRoO1xuICAgICAgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcbiAgICAgIHZtLl9wcm9wc1twYXRoXSA9IHByb3A7XG4gICAgICBpZiAoaW5saW5lUHJvcHMgJiYgaGFzT3duKGlubGluZVByb3BzLCBwYXRoKSkge1xuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgaW5saW5lUHJvcHNbcGF0aF0pO1xuICAgICAgfWlmIChyYXcgPT09IG51bGwpIHtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBhYnNlbnQgcHJvcFxuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdW5kZWZpbmVkKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcC5keW5hbWljKSB7XG4gICAgICAgIC8vIGR5bmFtaWMgcHJvcFxuICAgICAgICBpZiAocHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FKSB7XG4gICAgICAgICAgLy8gb25lIHRpbWUgYmluZGluZ1xuICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtLl9jb250ZXh0IHx8IHZtKS4kZ2V0KHByb3AucGFyZW50UGF0aCk7XG4gICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodm0uX2NvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIGR5bmFtaWMgYmluZGluZ1xuICAgICAgICAgICAgdm0uX2JpbmREaXIoe1xuICAgICAgICAgICAgICBuYW1lOiAncHJvcCcsXG4gICAgICAgICAgICAgIGRlZjogcHJvcERlZixcbiAgICAgICAgICAgICAgcHJvcDogcHJvcFxuICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgc2NvcGUpOyAvLyBlbCwgaG9zdCwgc2NvcGVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyByb290IGluc3RhbmNlXG4gICAgICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2bS4kZ2V0KHByb3AucGFyZW50UGF0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHByb3Aub3B0aW1pemVkTGl0ZXJhbCkge1xuICAgICAgICAvLyBvcHRpbWl6ZWQgbGl0ZXJhbCwgY2FzdCBpdCBhbmQganVzdCBzZXQgb25jZVxuICAgICAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhyYXcpO1xuICAgICAgICB2YWx1ZSA9IHN0cmlwcGVkID09PSByYXcgPyB0b0Jvb2xlYW4odG9OdW1iZXIocmF3KSkgOiBzdHJpcHBlZDtcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHN0cmluZyBsaXRlcmFsLCBidXQgd2UgbmVlZCB0byBjYXRlciBmb3JcbiAgICAgICAgLy8gQm9vbGVhbiBwcm9wcyB3aXRoIG5vIHZhbHVlLCBvciB3aXRoIHNhbWVcbiAgICAgICAgLy8gbGl0ZXJhbCB2YWx1ZSAoZS5nLiBkaXNhYmxlZD1cImRpc2FibGVkXCIpXG4gICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWxvYWRlci9pc3N1ZXMvMTgyXG4gICAgICAgIHZhbHVlID0gb3B0aW9ucy50eXBlID09PSBCb29sZWFuICYmIChyYXcgPT09ICcnIHx8IHJhdyA9PT0gaHlwaGVuYXRlKHByb3AubmFtZSkpID8gdHJ1ZSA6IHJhdztcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogUHJvY2VzcyBhIHByb3Agd2l0aCBhIHJhd1ZhbHVlLCBhcHBseWluZyBuZWNlc3NhcnkgY29lcnNpb25zLFxuICogZGVmYXVsdCB2YWx1ZXMgJiBhc3NlcnRpb25zIGFuZCBjYWxsIHRoZSBnaXZlbiBjYWxsYmFjayB3aXRoXG4gKiBwcm9jZXNzZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSByYXdWYWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCByYXdWYWx1ZSwgZm4pIHtcbiAgdmFyIGlzU2ltcGxlID0gcHJvcC5keW5hbWljICYmIGlzU2ltcGxlUGF0aChwcm9wLnBhcmVudFBhdGgpO1xuICB2YXIgdmFsdWUgPSByYXdWYWx1ZTtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApO1xuICB9XG4gIHZhbHVlID0gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pO1xuICB2YXIgY29lcmNlZCA9IHZhbHVlICE9PSByYXdWYWx1ZTtcbiAgaWYgKCFhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkpIHtcbiAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoaXNTaW1wbGUgJiYgIWNvZXJjZWQpIHtcbiAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICBmbih2YWx1ZSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgZm4odmFsdWUpO1xuICB9XG59XG5cbi8qKlxuICogU2V0IGEgcHJvcCdzIGluaXRpYWwgdmFsdWUgb24gYSB2bSBhbmQgaXRzIGRhdGEgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqL1xuXG5mdW5jdGlvbiBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcbiAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGRlZmluZVJlYWN0aXZlKHZtLCBwcm9wLnBhdGgsIHZhbHVlKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVXBkYXRlIGEgcHJvcCdzIHZhbHVlIG9uIGEgdm0uXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbmZ1bmN0aW9uIHVwZGF0ZVByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG4gIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2bVtwcm9wLnBhdGhdID0gdmFsdWU7XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHJldHVybiB7Kn1cbiAqL1xuXG5mdW5jdGlvbiBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKSB7XG4gIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcbiAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gIGlmICghaGFzT3duKG9wdGlvbnMsICdkZWZhdWx0JykpIHtcbiAgICAvLyBhYnNlbnQgYm9vbGVhbiB2YWx1ZSBkZWZhdWx0cyB0byBmYWxzZVxuICAgIHJldHVybiBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gPyBmYWxzZSA6IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgZGVmID0gb3B0aW9uc1snZGVmYXVsdCddO1xuICAvLyB3YXJuIGFnYWluc3Qgbm9uLWZhY3RvcnkgZGVmYXVsdHMgZm9yIE9iamVjdCAmIEFycmF5XG4gIGlmIChpc09iamVjdChkZWYpKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGRlZmF1bHQgdmFsdWUgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiAnICsgJ1Byb3BzIHdpdGggdHlwZSBPYmplY3QvQXJyYXkgbXVzdCB1c2UgYSBmYWN0b3J5IGZ1bmN0aW9uICcgKyAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsIHZtKTtcbiAgfVxuICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuICByZXR1cm4gdHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJyAmJiBvcHRpb25zLnR5cGUgIT09IEZ1bmN0aW9uID8gZGVmLmNhbGwodm0pIDogZGVmO1xufVxuXG4vKipcbiAqIEFzc2VydCB3aGV0aGVyIGEgcHJvcCBpcyB2YWxpZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcbiAgaWYgKCFwcm9wLm9wdGlvbnMucmVxdWlyZWQgJiYgKCAvLyBub24tcmVxdWlyZWRcbiAgcHJvcC5yYXcgPT09IG51bGwgfHwgLy8gYWJzY2VudFxuICB2YWx1ZSA9PSBudWxsKSAvLyBudWxsIG9yIHVuZGVmaW5lZFxuICApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gIHZhciB0eXBlID0gb3B0aW9ucy50eXBlO1xuICB2YXIgdmFsaWQgPSAhdHlwZTtcbiAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTtcbiAgaWYgKHR5cGUpIHtcbiAgICBpZiAoIWlzQXJyYXkodHlwZSkpIHtcbiAgICAgIHR5cGUgPSBbdHlwZV07XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZS5sZW5ndGggJiYgIXZhbGlkOyBpKyspIHtcbiAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTtcbiAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChhc3NlcnRlZFR5cGUuZXhwZWN0ZWRUeXBlKTtcbiAgICAgIHZhbGlkID0gYXNzZXJ0ZWRUeXBlLnZhbGlkO1xuICAgIH1cbiAgfVxuICBpZiAoIXZhbGlkKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm4oJ0ludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicgKyAnIEV4cGVjdGVkICcgKyBleHBlY3RlZFR5cGVzLm1hcChmb3JtYXRUeXBlKS5qb2luKCcsICcpICsgJywgZ290ICcgKyBmb3JtYXRWYWx1ZSh2YWx1ZSkgKyAnLicsIHZtKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB2YWxpZGF0b3IgPSBvcHRpb25zLnZhbGlkYXRvcjtcbiAgaWYgKHZhbGlkYXRvcikge1xuICAgIGlmICghdmFsaWRhdG9yKHZhbHVlKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nLCB2bSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEZvcmNlIHBhcnNpbmcgdmFsdWUgd2l0aCBjb2VyY2Ugb3B0aW9uLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHsqfVxuICovXG5cbmZ1bmN0aW9uIGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG4gIHZhciBjb2VyY2UgPSBwcm9wLm9wdGlvbnMuY29lcmNlO1xuICBpZiAoIWNvZXJjZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIGNvZXJjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBjb2VyY2UodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBjb2VyY2UgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiBleHBlY3RlZCBmdW5jdGlvbiwgZ290ICcgKyB0eXBlb2YgY29lcmNlICsgJy4nLCB2bSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbi8qKlxuICogQXNzZXJ0IHRoZSB0eXBlIG9mIGEgdmFsdWVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0eXBlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xuICB2YXIgdmFsaWQ7XG4gIHZhciBleHBlY3RlZFR5cGU7XG4gIGlmICh0eXBlID09PSBTdHJpbmcpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnc3RyaW5nJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IE51bWJlcikge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdudW1iZXInO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gQm9vbGVhbikge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdib29sZWFuJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IEZ1bmN0aW9uKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ2Z1bmN0aW9uJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IE9iamVjdCkge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdvYmplY3QnO1xuICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdCh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gQXJyYXkpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnYXJyYXknO1xuICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogdmFsaWQsXG4gICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcbiAgfTtcbn1cblxuLyoqXG4gKiBGb3JtYXQgdHlwZSBmb3Igb3V0cHV0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRUeXBlKHR5cGUpIHtcbiAgcmV0dXJuIHR5cGUgPyB0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKSA6ICdjdXN0b20gdHlwZSc7XG59XG5cbi8qKlxuICogRm9ybWF0IHZhbHVlXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpO1xufVxuXG52YXIgYmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuXG52YXIgcHJvcERlZiA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBjaGlsZCA9IHRoaXMudm07XG4gICAgdmFyIHBhcmVudCA9IGNoaWxkLl9jb250ZXh0O1xuICAgIC8vIHBhc3NlZCBpbiBmcm9tIGNvbXBpbGVyIGRpcmVjdGx5XG4gICAgdmFyIHByb3AgPSB0aGlzLmRlc2NyaXB0b3IucHJvcDtcbiAgICB2YXIgY2hpbGRLZXkgPSBwcm9wLnBhdGg7XG4gICAgdmFyIHBhcmVudEtleSA9IHByb3AucGFyZW50UGF0aDtcbiAgICB2YXIgdHdvV2F5ID0gcHJvcC5tb2RlID09PSBiaW5kaW5nTW9kZXMuVFdPX1dBWTtcblxuICAgIHZhciBwYXJlbnRXYXRjaGVyID0gdGhpcy5wYXJlbnRXYXRjaGVyID0gbmV3IFdhdGNoZXIocGFyZW50LCBwYXJlbnRLZXksIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgIHVwZGF0ZVByb3AoY2hpbGQsIHByb3AsIHZhbCk7XG4gICAgfSwge1xuICAgICAgdHdvV2F5OiB0d29XYXksXG4gICAgICBmaWx0ZXJzOiBwcm9wLmZpbHRlcnMsXG4gICAgICAvLyBpbXBvcnRhbnQ6IHByb3BzIG5lZWQgdG8gYmUgb2JzZXJ2ZWQgb24gdGhlXG4gICAgICAvLyB2LWZvciBzY29wZSBpZiBwcmVzZW50XG4gICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICB9KTtcblxuICAgIC8vIHNldCB0aGUgY2hpbGQgaW5pdGlhbCB2YWx1ZS5cbiAgICBpbml0UHJvcChjaGlsZCwgcHJvcCwgcGFyZW50V2F0Y2hlci52YWx1ZSk7XG5cbiAgICAvLyBzZXR1cCB0d28td2F5IGJpbmRpbmdcbiAgICBpZiAodHdvV2F5KSB7XG4gICAgICAvLyBpbXBvcnRhbnQ6IGRlZmVyIHRoZSBjaGlsZCB3YXRjaGVyIGNyZWF0aW9uIHVudGlsXG4gICAgICAvLyB0aGUgY3JlYXRlZCBob29rIChhZnRlciBkYXRhIG9ic2VydmF0aW9uKVxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgY2hpbGQuJG9uY2UoJ3ByZS1ob29rOmNyZWF0ZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuY2hpbGRXYXRjaGVyID0gbmV3IFdhdGNoZXIoY2hpbGQsIGNoaWxkS2V5LCBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgcGFyZW50V2F0Y2hlci5zZXQodmFsKTtcbiAgICAgICAgfSwge1xuICAgICAgICAgIC8vIGVuc3VyZSBzeW5jIHVwd2FyZCBiZWZvcmUgcGFyZW50IHN5bmMgZG93bi5cbiAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBpbiBjYXNlcyBlLmcuIHRoZSBjaGlsZFxuICAgICAgICAgIC8vIG11dGF0ZXMgYSBwcm9wIGFycmF5LCB0aGVuIHJlcGxhY2VzIGl0LiAoIzE2ODMpXG4gICAgICAgICAgc3luYzogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLnBhcmVudFdhdGNoZXIudGVhcmRvd24oKTtcbiAgICBpZiAodGhpcy5jaGlsZFdhdGNoZXIpIHtcbiAgICAgIHRoaXMuY2hpbGRXYXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcXVldWUkMSA9IFtdO1xudmFyIHF1ZXVlZCA9IGZhbHNlO1xuXG4vKipcbiAqIFB1c2ggYSBqb2IgaW50byB0aGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gam9iXG4gKi9cblxuZnVuY3Rpb24gcHVzaEpvYihqb2IpIHtcbiAgcXVldWUkMS5wdXNoKGpvYik7XG4gIGlmICghcXVldWVkKSB7XG4gICAgcXVldWVkID0gdHJ1ZTtcbiAgICBuZXh0VGljayhmbHVzaCk7XG4gIH1cbn1cblxuLyoqXG4gKiBGbHVzaCB0aGUgcXVldWUsIGFuZCBkbyBvbmUgZm9yY2VkIHJlZmxvdyBiZWZvcmVcbiAqIHRyaWdnZXJpbmcgdHJhbnNpdGlvbnMuXG4gKi9cblxuZnVuY3Rpb24gZmx1c2goKSB7XG4gIC8vIEZvcmNlIGxheW91dFxuICB2YXIgZiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUkMS5sZW5ndGg7IGkrKykge1xuICAgIHF1ZXVlJDFbaV0oKTtcbiAgfVxuICBxdWV1ZSQxID0gW107XG4gIHF1ZXVlZCA9IGZhbHNlO1xuICAvLyBkdW1teSByZXR1cm4sIHNvIGpzIGxpbnRlcnMgZG9uJ3QgY29tcGxhaW4gYWJvdXRcbiAgLy8gdW51c2VkIHZhcmlhYmxlIGZcbiAgcmV0dXJuIGY7XG59XG5cbnZhciBUWVBFX1RSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XG52YXIgVFlQRV9BTklNQVRJT04gPSAnYW5pbWF0aW9uJztcbnZhciB0cmFuc0R1cmF0aW9uUHJvcCA9IHRyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcbnZhciBhbmltRHVyYXRpb25Qcm9wID0gYW5pbWF0aW9uUHJvcCArICdEdXJhdGlvbic7XG5cbi8qKlxuICogSWYgYSBqdXN0LWVudGVyZWQgZWxlbWVudCBpcyBhcHBsaWVkIHRoZVxuICogbGVhdmUgY2xhc3Mgd2hpbGUgaXRzIGVudGVyIHRyYW5zaXRpb24gaGFzbid0IHN0YXJ0ZWQgeWV0LFxuICogYW5kIHRoZSB0cmFuc2l0aW9uZWQgcHJvcGVydHkgaGFzIHRoZSBzYW1lIHZhbHVlIGZvciBib3RoXG4gKiBlbnRlci9sZWF2ZSwgdGhlbiB0aGUgbGVhdmUgdHJhbnNpdGlvbiB3aWxsIGJlIHNraXBwZWQgYW5kXG4gKiB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gVGhpcyBmdW5jdGlvbiBlbnN1cmVzXG4gKiBpdHMgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIGFmdGVyIGEgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZFxuICogYnkgd2FpdGluZyBmb3IgZG91YmxlIHJhZi5cbiAqXG4gKiBJdCBmYWxscyBiYWNrIHRvIHNldFRpbWVvdXQgb24gZGV2aWNlcyB0aGF0IHN1cHBvcnQgQ1NTXG4gKiB0cmFuc2l0aW9ucyBidXQgbm90IHJhZiAoZS5nLiBBbmRyb2lkIDQuMiBicm93c2VyKSAtIHNpbmNlXG4gKiB0aGVzZSBlbnZpcm9ubWVudHMgYXJlIHVzdWFsbHkgc2xvdywgd2UgYXJlIGdpdmluZyBpdCBhXG4gKiByZWxhdGl2ZWx5IGxhcmdlIHRpbWVvdXQuXG4gKi9cblxudmFyIHJhZiA9IGluQnJvd3NlciAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xudmFyIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQgPSByYWZcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4/IGZ1bmN0aW9uIChmbikge1xuICByYWYoZnVuY3Rpb24gKCkge1xuICAgIHJhZihmbik7XG4gIH0pO1xufSA6IGZ1bmN0aW9uIChmbikge1xuICBzZXRUaW1lb3V0KGZuLCA1MCk7XG59O1xuXG4vKipcbiAqIEEgVHJhbnNpdGlvbiBvYmplY3QgdGhhdCBlbmNhcHN1bGF0ZXMgdGhlIHN0YXRlIGFuZCBsb2dpY1xuICogb2YgdGhlIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcGFyYW0ge09iamVjdH0gaG9va3NcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5mdW5jdGlvbiBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHZtKSB7XG4gIHRoaXMuaWQgPSBpZDtcbiAgdGhpcy5lbCA9IGVsO1xuICB0aGlzLmVudGVyQ2xhc3MgPSBob29rcyAmJiBob29rcy5lbnRlckNsYXNzIHx8IGlkICsgJy1lbnRlcic7XG4gIHRoaXMubGVhdmVDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmxlYXZlQ2xhc3MgfHwgaWQgKyAnLWxlYXZlJztcbiAgdGhpcy5ob29rcyA9IGhvb2tzO1xuICB0aGlzLnZtID0gdm07XG4gIC8vIGFzeW5jIHN0YXRlXG4gIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG4gIHRoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcbiAgdGhpcy5lbnRlcmVkID0gdGhpcy5sZWZ0ID0gZmFsc2U7XG4gIHRoaXMudHlwZUNhY2hlID0ge307XG4gIC8vIGNoZWNrIGNzcyB0cmFuc2l0aW9uIHR5cGVcbiAgdGhpcy50eXBlID0gaG9va3MgJiYgaG9va3MudHlwZTtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKHRoaXMudHlwZSAmJiB0aGlzLnR5cGUgIT09IFRZUEVfVFJBTlNJVElPTiAmJiB0aGlzLnR5cGUgIT09IFRZUEVfQU5JTUFUSU9OKSB7XG4gICAgICB3YXJuKCdpbnZhbGlkIENTUyB0cmFuc2l0aW9uIHR5cGUgZm9yIHRyYW5zaXRpb249XCInICsgdGhpcy5pZCArICdcIjogJyArIHRoaXMudHlwZSwgdm0pO1xuICAgIH1cbiAgfVxuICAvLyBiaW5kXG4gIHZhciBzZWxmID0gdGhpcztbJ2VudGVyTmV4dFRpY2snLCAnZW50ZXJEb25lJywgJ2xlYXZlTmV4dFRpY2snLCAnbGVhdmVEb25lJ10uZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgIHNlbGZbbV0gPSBiaW5kKHNlbGZbbV0sIHNlbGYpO1xuICB9KTtcbn1cblxudmFyIHAkMSA9IFRyYW5zaXRpb24ucHJvdG90eXBlO1xuXG4vKipcbiAqIFN0YXJ0IGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG4gKlxuICogMS4gZW50ZXIgdHJhbnNpdGlvbiB0cmlnZ2VyZWRcbiAqIDIuIGNhbGwgYmVmb3JlRW50ZXIgaG9va1xuICogMy4gYWRkIGVudGVyIGNsYXNzXG4gKiA0LiBpbnNlcnQvc2hvdyBlbGVtZW50XG4gKiA1LiBjYWxsIGVudGVyIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG4gKiA2LiByZWZsb3dcbiAqIDcuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcbiAqICAgIC0gdHJhbnNpdGlvbjpcbiAqICAgICAgICByZW1vdmUgY2xhc3Mgbm93LCB3YWl0IGZvciB0cmFuc2l0aW9uZW5kLFxuICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogICAgLSBhbmltYXRpb246XG4gKiAgICAgICAgd2FpdCBmb3IgYW5pbWF0aW9uZW5kLCByZW1vdmUgY2xhc3MsXG4gKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuICogICAgICAgIGRvbmUgbm93IGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiA4LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG4gKiAgICBhZnRlckVudGVyIGhvb2suXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSBpbnNlcnQvc2hvdyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbnAkMS5lbnRlciA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcbiAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG4gIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUVudGVyJyk7XG4gIHRoaXMuY2IgPSBjYjtcbiAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgb3AoKTtcbiAgdGhpcy5lbnRlcmVkID0gZmFsc2U7XG4gIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2VudGVyJyk7XG4gIGlmICh0aGlzLmVudGVyZWQpIHtcbiAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgfVxuICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5lbnRlckNhbmNlbGxlZDtcbiAgcHVzaEpvYih0aGlzLmVudGVyTmV4dFRpY2spO1xufTtcblxuLyoqXG4gKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24sIHdoaWNoIGlzXG4gKiB0byBiZSBwdXNoZWQgaW50byBhIHF1ZXVlIGFuZCBleGVjdXRlZCBhZnRlciBhIHJlZmxvdyBzb1xuICogdGhhdCByZW1vdmluZyB0aGUgY2xhc3MgY2FuIHRyaWdnZXIgYSBDU1MgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEuZW50ZXJOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICAvLyBwcmV2ZW50IHRyYW5zaXRpb24gc2tpcHBpbmdcbiAgdGhpcy5qdXN0RW50ZXJlZCA9IHRydWU7XG4gIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQoZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG4gIH0pO1xuICB2YXIgZW50ZXJEb25lID0gdGhpcy5lbnRlckRvbmU7XG4gIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmVudGVyQ2xhc3MpO1xuICBpZiAoIXRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG4gICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gYnkgcmVtb3ZpbmcgZW50ZXIgY2xhc3Mgbm93XG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgICAgdGhpcy5zZXR1cENzc0NiKHRyYW5zaXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfQU5JTUFUSU9OKSB7XG4gICAgICB0aGlzLnNldHVwQ3NzQ2IoYW5pbWF0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudGVyRG9uZSgpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5lbnRlckRvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZW50ZXJlZCA9IHRydWU7XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gIHRoaXMuY2FsbEhvb2soJ2FmdGVyRW50ZXInKTtcbiAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcbn07XG5cbi8qKlxuICogU3RhcnQgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKlxuICogMS4gbGVhdmUgdHJhbnNpdGlvbiB0cmlnZ2VyZWQuXG4gKiAyLiBjYWxsIGJlZm9yZUxlYXZlIGhvb2tcbiAqIDMuIGFkZCBsZWF2ZSBjbGFzcyAodHJpZ2dlciBjc3MgdHJhbnNpdGlvbilcbiAqIDQuIGNhbGwgbGVhdmUgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcbiAqIDUuIHJlZmxvdyBpZiBubyBleHBsaWNpdCBqcyBjYWxsYmFjayBpcyBwcm92aWRlZFxuICogNi4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuICogICAgLSB0cmFuc2l0aW9uIG9yIGFuaW1hdGlvbjpcbiAqICAgICAgICB3YWl0IGZvciBlbmQgZXZlbnQsIHJlbW92ZSBjbGFzcywgdGhlbiBkb25lIGlmXG4gKiAgICAgICAgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG4gKiAgICAgICAgZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogNy4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuICogICAgYWZ0ZXJMZWF2ZSBob29rLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gcmVtb3ZlL2hpZGUgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5wJDEubGVhdmUgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG4gIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuICB0aGlzLmNhbGxIb29rKCdiZWZvcmVMZWF2ZScpO1xuICB0aGlzLm9wID0gb3A7XG4gIHRoaXMuY2IgPSBjYjtcbiAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcbiAgdGhpcy5sZWZ0ID0gZmFsc2U7XG4gIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2xlYXZlJyk7XG4gIGlmICh0aGlzLmxlZnQpIHtcbiAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgfVxuICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5sZWF2ZUNhbmNlbGxlZDtcbiAgLy8gb25seSBuZWVkIHRvIGhhbmRsZSBsZWF2ZURvbmUgaWZcbiAgLy8gMS4gdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBkb25lIChzeW5jaHJvbm91c2x5IGNhbGxlZFxuICAvLyAgICBieSB0aGUgdXNlciwgd2hpY2ggY2F1c2VzIHRoaXMub3Agc2V0IHRvIG51bGwpXG4gIC8vIDIuIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2tcbiAgaWYgKHRoaXMub3AgJiYgIXRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICAvLyBpZiBhIENTUyB0cmFuc2l0aW9uIGxlYXZlcyBpbW1lZGlhdGVseSBhZnRlciBlbnRlcixcbiAgICAvLyB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gdGhlcmVmb3JlIHdlXG4gICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGVuZCB0aGUgbGVhdmUgaW1tZWRpYXRlbHkuXG4gICAgaWYgKHRoaXMuanVzdEVudGVyZWQpIHtcbiAgICAgIHRoaXMubGVhdmVEb25lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHB1c2hKb2IodGhpcy5sZWF2ZU5leHRUaWNrKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEubGVhdmVOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMubGVhdmVDbGFzcyk7XG4gIGlmICh0eXBlKSB7XG4gICAgdmFyIGV2ZW50ID0gdHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XG4gICAgdGhpcy5zZXR1cENzc0NiKGV2ZW50LCB0aGlzLmxlYXZlRG9uZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5sZWF2ZURvbmUoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmxlYXZlRG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5sZWZ0ID0gdHJ1ZTtcbiAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcbiAgdGhpcy5vcCgpO1xuICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuICB0aGlzLmNhbGxIb29rKCdhZnRlckxlYXZlJyk7XG4gIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG4gIHRoaXMub3AgPSBudWxsO1xufTtcblxuLyoqXG4gKiBDYW5jZWwgYW55IHBlbmRpbmcgY2FsbGJhY2tzIGZyb20gYSBwcmV2aW91c2x5IHJ1bm5pbmdcbiAqIGJ1dCBub3QgZmluaXNoZWQgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEuY2FuY2VsUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuICB2YXIgaGFzUGVuZGluZyA9IGZhbHNlO1xuICBpZiAodGhpcy5wZW5kaW5nQ3NzQ2IpIHtcbiAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcbiAgICBvZmYodGhpcy5lbCwgdGhpcy5wZW5kaW5nQ3NzRXZlbnQsIHRoaXMucGVuZGluZ0Nzc0NiKTtcbiAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gbnVsbDtcbiAgfVxuICBpZiAodGhpcy5wZW5kaW5nSnNDYikge1xuICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuICAgIHRoaXMucGVuZGluZ0pzQ2IuY2FuY2VsKCk7XG4gICAgdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gIH1cbiAgaWYgKGhhc1BlbmRpbmcpIHtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG4gIH1cbiAgaWYgKHRoaXMuY2FuY2VsKSB7XG4gICAgdGhpcy5jYW5jZWwuY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgICB0aGlzLmNhbmNlbCA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhIHVzZXItcHJvdmlkZWQgc3luY2hyb25vdXMgaG9vayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5cbnAkMS5jYWxsSG9vayA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIGlmICh0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV0pIHtcbiAgICB0aGlzLmhvb2tzW3R5cGVdLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhIHVzZXItcHJvdmlkZWQsIHBvdGVudGlhbGx5LWFzeW5jIGhvb2sgZnVuY3Rpb24uXG4gKiBXZSBjaGVjayBmb3IgdGhlIGxlbmd0aCBvZiBhcmd1bWVudHMgdG8gc2VlIGlmIHRoZSBob29rXG4gKiBleHBlY3RzIGEgYGRvbmVgIGNhbGxiYWNrLiBJZiB0cnVlLCB0aGUgdHJhbnNpdGlvbidzIGVuZFxuICogd2lsbCBiZSBkZXRlcm1pbmVkIGJ5IHdoZW4gdGhlIHVzZXIgY2FsbHMgdGhhdCBjYWxsYmFjaztcbiAqIG90aGVyd2lzZSwgdGhlIGVuZCBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbiBvclxuICogYW5pbWF0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cblxucCQxLmNhbGxIb29rV2l0aENiID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdmFyIGhvb2sgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV07XG4gIGlmIChob29rKSB7XG4gICAgaWYgKGhvb2subGVuZ3RoID4gMSkge1xuICAgICAgdGhpcy5wZW5kaW5nSnNDYiA9IGNhbmNlbGxhYmxlKHRoaXNbdHlwZSArICdEb25lJ10pO1xuICAgIH1cbiAgICBob29rLmNhbGwodGhpcy52bSwgdGhpcy5lbCwgdGhpcy5wZW5kaW5nSnNDYik7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IGFuIGVsZW1lbnQncyB0cmFuc2l0aW9uIHR5cGUgYmFzZWQgb24gdGhlXG4gKiBjYWxjdWxhdGVkIHN0eWxlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cblxucCQxLmdldENzc1RyYW5zaXRpb25UeXBlID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcbiAgLy8gc2tpcCBDU1MgdHJhbnNpdGlvbnMgaWYgcGFnZSBpcyBub3QgdmlzaWJsZSAtXG4gIC8vIHRoaXMgc29sdmVzIHRoZSBpc3N1ZSBvZiB0cmFuc2l0aW9uZW5kIGV2ZW50cyBub3RcbiAgLy8gZmlyaW5nIHVudGlsIHRoZSBwYWdlIGlzIHZpc2libGUgYWdhaW4uXG4gIC8vIHBhZ2VWaXNpYmlsaXR5IEFQSSBpcyBzdXBwb3J0ZWQgaW4gSUUxMCssIHNhbWUgYXNcbiAgLy8gQ1NTIHRyYW5zaXRpb25zLlxuICBkb2N1bWVudC5oaWRkZW4gfHxcbiAgLy8gZXhwbGljaXQganMtb25seSB0cmFuc2l0aW9uXG4gIHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5jc3MgPT09IGZhbHNlIHx8XG4gIC8vIGVsZW1lbnQgaXMgaGlkZGVuXG4gIGlzSGlkZGVuKHRoaXMuZWwpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciB0eXBlID0gdGhpcy50eXBlIHx8IHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV07XG4gIGlmICh0eXBlKSByZXR1cm4gdHlwZTtcbiAgdmFyIGlubGluZVN0eWxlcyA9IHRoaXMuZWwuc3R5bGU7XG4gIHZhciBjb21wdXRlZFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwpO1xuICB2YXIgdHJhbnNEdXJhdGlvbiA9IGlubGluZVN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdO1xuICBpZiAodHJhbnNEdXJhdGlvbiAmJiB0cmFuc0R1cmF0aW9uICE9PSAnMHMnKSB7XG4gICAgdHlwZSA9IFRZUEVfVFJBTlNJVElPTjtcbiAgfSBlbHNlIHtcbiAgICB2YXIgYW5pbUR1cmF0aW9uID0gaW5saW5lU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdO1xuICAgIGlmIChhbmltRHVyYXRpb24gJiYgYW5pbUR1cmF0aW9uICE9PSAnMHMnKSB7XG4gICAgICB0eXBlID0gVFlQRV9BTklNQVRJT047XG4gICAgfVxuICB9XG4gIGlmICh0eXBlKSB7XG4gICAgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXSA9IHR5cGU7XG4gIH1cbiAgcmV0dXJuIHR5cGU7XG59O1xuXG4vKipcbiAqIFNldHVwIGEgQ1NTIHRyYW5zaXRpb25lbmQvYW5pbWF0aW9uZW5kIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5wJDEuc2V0dXBDc3NDYiA9IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcbiAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSBldmVudDtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgZWwgPSB0aGlzLmVsO1xuICB2YXIgb25FbmQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlbCkge1xuICAgICAgb2ZmKGVsLCBldmVudCwgb25FbmQpO1xuICAgICAgc2VsZi5wZW5kaW5nQ3NzRXZlbnQgPSBzZWxmLnBlbmRpbmdDc3NDYiA9IG51bGw7XG4gICAgICBpZiAoIXNlbGYucGVuZGluZ0pzQ2IgJiYgY2IpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIG9uKGVsLCBldmVudCwgb25FbmQpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGhpZGRlbiAtIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdFxuICogc2tpcCB0aGUgdHJhbnNpdGlvbiBhbGx0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzSGlkZGVuKGVsKSB7XG4gIGlmICgvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG4gICAgLy8gU1ZHIGVsZW1lbnRzIGRvIG5vdCBoYXZlIG9mZnNldChXaWR0aHxIZWlnaHQpXG4gICAgLy8gc28gd2UgbmVlZCB0byBjaGVjayB0aGUgY2xpZW50IHJlY3RcbiAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiAhKHJlY3Qud2lkdGggfHwgcmVjdC5oZWlnaHQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAhKGVsLm9mZnNldFdpZHRoIHx8IGVsLm9mZnNldEhlaWdodCB8fCBlbC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7XG4gIH1cbn1cblxudmFyIHRyYW5zaXRpb24kMSA9IHtcblxuICBwcmlvcml0eTogVFJBTlNJVElPTixcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShpZCwgb2xkSWQpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIC8vIHJlc29sdmUgb24gb3duZXIgdm1cbiAgICB2YXIgaG9va3MgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3RyYW5zaXRpb25zJywgaWQpO1xuICAgIGlkID0gaWQgfHwgJ3YnO1xuICAgIG9sZElkID0gb2xkSWQgfHwgJ3YnO1xuICAgIGVsLl9fdl90cmFucyA9IG5ldyBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHRoaXMudm0pO1xuICAgIHJlbW92ZUNsYXNzKGVsLCBvbGRJZCArICctdHJhbnNpdGlvbicpO1xuICAgIGFkZENsYXNzKGVsLCBpZCArICctdHJhbnNpdGlvbicpO1xuICB9XG59O1xuXG52YXIgaW50ZXJuYWxEaXJlY3RpdmVzID0ge1xuICBzdHlsZTogc3R5bGUsXG4gICdjbGFzcyc6IHZDbGFzcyxcbiAgY29tcG9uZW50OiBjb21wb25lbnQsXG4gIHByb3A6IHByb3BEZWYsXG4gIHRyYW5zaXRpb246IHRyYW5zaXRpb24kMVxufTtcblxuLy8gc3BlY2lhbCBiaW5kaW5nIHByZWZpeGVzXG52YXIgYmluZFJFID0gL152LWJpbmQ6fF46LztcbnZhciBvblJFID0gL152LW9uOnxeQC87XG52YXIgZGlyQXR0clJFID0gL152LShbXjpdKykoPzokfDooLiopJCkvO1xudmFyIG1vZGlmaWVyUkUgPSAvXFwuW15cXC5dKy9nO1xudmFyIHRyYW5zaXRpb25SRSA9IC9eKHYtYmluZDp8Oik/dHJhbnNpdGlvbiQvO1xuXG4vLyBkZWZhdWx0IGRpcmVjdGl2ZSBwcmlvcml0eVxudmFyIERFRkFVTFRfUFJJT1JJVFkgPSAxMDAwO1xudmFyIERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkgPSAyMDAwO1xuXG4vKipcbiAqIENvbXBpbGUgYSB0ZW1wbGF0ZSBhbmQgcmV0dXJuIGEgcmV1c2FibGUgY29tcG9zaXRlIGxpbmtcbiAqIGZ1bmN0aW9uLCB3aGljaCByZWN1cnNpdmVseSBjb250YWlucyBtb3JlIGxpbmsgZnVuY3Rpb25zXG4gKiBpbnNpZGUuIFRoaXMgdG9wIGxldmVsIGNvbXBpbGUgZnVuY3Rpb24gd291bGQgbm9ybWFsbHlcbiAqIGJlIGNhbGxlZCBvbiBpbnN0YW5jZSByb290IG5vZGVzLCBidXQgY2FuIGFsc28gYmUgdXNlZFxuICogZm9yIHBhcnRpYWwgY29tcGlsYXRpb24gaWYgdGhlIHBhcnRpYWwgYXJndW1lbnQgaXMgdHJ1ZS5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgY29tcG9zaXRlIGxpbmsgZnVuY3Rpb24sIHdoZW4gY2FsbGVkLCB3aWxsXG4gKiByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzXG4gKiBjcmVhdGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHBhcnRpYWxcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGUoZWwsIG9wdGlvbnMsIHBhcnRpYWwpIHtcbiAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgaXRzZWxmLlxuICB2YXIgbm9kZUxpbmtGbiA9IHBhcnRpYWwgfHwgIW9wdGlvbnMuX2FzQ29tcG9uZW50ID8gY29tcGlsZU5vZGUoZWwsIG9wdGlvbnMpIDogbnVsbDtcbiAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIGNoaWxkTm9kZXNcbiAgdmFyIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmICFpc1NjcmlwdChlbCkgJiYgZWwuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KGVsLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcblxuICAvKipcbiAgICogQSBjb21wb3NpdGUgbGlua2VyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBhIGFscmVhZHlcbiAgICogY29tcGlsZWQgcGllY2Ugb2YgRE9NLCB3aGljaCBpbnN0YW50aWF0ZXMgYWxsIGRpcmVjdGl2ZVxuICAgKiBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIGhvc3Qgdm0gb2YgdHJhbnNjbHVkZWQgY29udGVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIGxpbmsgY29udGV4dCBmcmFnbWVudFxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gICAqL1xuXG4gIHJldHVybiBmdW5jdGlvbiBjb21wb3NpdGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShlbC5jaGlsZE5vZGVzKTtcbiAgICAvLyBsaW5rXG4gICAgdmFyIGRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiBjb21wb3NpdGVMaW5rQ2FwdHVyZXIoKSB7XG4gICAgICBpZiAobm9kZUxpbmtGbikgbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIGlmIChjaGlsZExpbmtGbikgY2hpbGRMaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICB9LCB2bSk7XG4gICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgZGlycyk7XG4gIH07XG59XG5cbi8qKlxuICogQXBwbHkgYSBsaW5rZXIgdG8gYSB2bS9lbGVtZW50IHBhaXIgYW5kIGNhcHR1cmUgdGhlXG4gKiBkaXJlY3RpdmVzIGNyZWF0ZWQgZHVyaW5nIHRoZSBwcm9jZXNzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gbGlua0FuZENhcHR1cmUobGlua2VyLCB2bSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyByZXNldCBkaXJlY3RpdmVzIGJlZm9yZSBldmVyeSBjYXB0dXJlIGluIHByb2R1Y3Rpb25cbiAgICAvLyBtb2RlLCBzbyB0aGF0IHdoZW4gdW5saW5raW5nIHdlIGRvbid0IG5lZWQgdG8gc3BsaWNlXG4gICAgLy8gdGhlbSBvdXQgKHdoaWNoIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgaGl0KS5cbiAgICAvLyB0aGV5IGFyZSBrZXB0IGluIGRldmVsb3BtZW50IG1vZGUgYmVjYXVzZSB0aGV5IGFyZVxuICAgIC8vIHVzZWZ1bCBmb3IgVnVlJ3Mgb3duIHRlc3RzLlxuICAgIHZtLl9kaXJlY3RpdmVzID0gW107XG4gIH1cbiAgdmFyIG9yaWdpbmFsRGlyQ291bnQgPSB2bS5fZGlyZWN0aXZlcy5sZW5ndGg7XG4gIGxpbmtlcigpO1xuICB2YXIgZGlycyA9IHZtLl9kaXJlY3RpdmVzLnNsaWNlKG9yaWdpbmFsRGlyQ291bnQpO1xuICBkaXJzLnNvcnQoZGlyZWN0aXZlQ29tcGFyYXRvcik7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBkaXJzW2ldLl9iaW5kKCk7XG4gIH1cbiAgcmV0dXJuIGRpcnM7XG59XG5cbi8qKlxuICogRGlyZWN0aXZlIHByaW9yaXR5IHNvcnQgY29tcGFyYXRvclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhXG4gKiBAcGFyYW0ge09iamVjdH0gYlxuICovXG5cbmZ1bmN0aW9uIGRpcmVjdGl2ZUNvbXBhcmF0b3IoYSwgYikge1xuICBhID0gYS5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuICBiID0gYi5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcbn1cblxuLyoqXG4gKiBMaW5rZXIgZnVuY3Rpb25zIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdFxuICogdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzIGluc3RhbmNlcyBnZW5lcmF0ZWQgZHVyaW5nXG4gKiB0aGUgcHJvY2Vzcy5cbiAqXG4gKiBXZSBjcmVhdGUgdW5saW5rIGZ1bmN0aW9ucyB3aXRoIG9ubHkgdGhlIG5lY2Vzc2FyeVxuICogaW5mb3JtYXRpb24gdG8gYXZvaWQgcmV0YWluaW5nIGFkZGl0aW9uYWwgY2xvc3VyZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJzXG4gKiBAcGFyYW0ge1Z1ZX0gW2NvbnRleHRdXG4gKiBAcGFyYW0ge0FycmF5fSBbY29udGV4dERpcnNdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlVW5saW5rRm4odm0sIGRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKSB7XG4gIGZ1bmN0aW9uIHVubGluayhkZXN0cm95aW5nKSB7XG4gICAgdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKTtcbiAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0RGlycykge1xuICAgICAgdGVhcmRvd25EaXJzKGNvbnRleHQsIGNvbnRleHREaXJzKTtcbiAgICB9XG4gIH1cbiAgLy8gZXhwb3NlIGxpbmtlZCBkaXJlY3RpdmVzXG4gIHVubGluay5kaXJzID0gZGlycztcbiAgcmV0dXJuIHVubGluaztcbn1cblxuLyoqXG4gKiBUZWFyZG93biBwYXJ0aWFsIGxpbmtlZCBkaXJlY3RpdmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtBcnJheX0gZGlyc1xuICogQHBhcmFtIHtCb29sZWFufSBkZXN0cm95aW5nXG4gKi9cblxuZnVuY3Rpb24gdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKSB7XG4gIHZhciBpID0gZGlycy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBkaXJzW2ldLl90ZWFyZG93bigpO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFkZXN0cm95aW5nKSB7XG4gICAgICB2bS5fZGlyZWN0aXZlcy4kcmVtb3ZlKGRpcnNbaV0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgbGluayBwcm9wcyBvbiBhbiBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVBbmRMaW5rUHJvcHModm0sIGVsLCBwcm9wcywgc2NvcGUpIHtcbiAgdmFyIHByb3BzTGlua0ZuID0gY29tcGlsZVByb3BzKGVsLCBwcm9wcywgdm0pO1xuICB2YXIgcHJvcERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgcHJvcHNMaW5rRm4odm0sIHNjb3BlKTtcbiAgfSwgdm0pO1xuICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBwcm9wRGlycyk7XG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgcm9vdCBlbGVtZW50IG9mIGFuIGluc3RhbmNlLlxuICpcbiAqIDEuIGF0dHJzIG9uIGNvbnRleHQgY29udGFpbmVyIChjb250ZXh0IHNjb3BlKVxuICogMi4gYXR0cnMgb24gdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSByb290IG5vZGUsIGlmXG4gKiAgICByZXBsYWNlOnRydWUgKGNoaWxkIHNjb3BlKVxuICpcbiAqIElmIHRoaXMgaXMgYSBmcmFnbWVudCBpbnN0YW5jZSwgd2Ugb25seSBuZWVkIHRvIGNvbXBpbGUgMS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRPcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpIHtcbiAgdmFyIGNvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fY29udGFpbmVyQXR0cnM7XG4gIHZhciByZXBsYWNlckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycztcbiAgdmFyIGNvbnRleHRMaW5rRm4sIHJlcGxhY2VyTGlua0ZuO1xuXG4gIC8vIG9ubHkgbmVlZCB0byBjb21waWxlIG90aGVyIGF0dHJpYnV0ZXMgZm9yXG4gIC8vIG5vbi1mcmFnbWVudCBpbnN0YW5jZXNcbiAgaWYgKGVsLm5vZGVUeXBlICE9PSAxMSkge1xuICAgIC8vIGZvciBjb21wb25lbnRzLCBjb250YWluZXIgYW5kIHJlcGxhY2VyIG5lZWQgdG8gYmVcbiAgICAvLyBjb21waWxlZCBzZXBhcmF0ZWx5IGFuZCBsaW5rZWQgaW4gZGlmZmVyZW50IHNjb3Blcy5cbiAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcbiAgICAgIC8vIDIuIGNvbnRhaW5lciBhdHRyaWJ1dGVzXG4gICAgICBpZiAoY29udGFpbmVyQXR0cnMgJiYgY29udGV4dE9wdGlvbnMpIHtcbiAgICAgICAgY29udGV4dExpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGNvbnRhaW5lckF0dHJzLCBjb250ZXh0T3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBpZiAocmVwbGFjZXJBdHRycykge1xuICAgICAgICAvLyAzLiByZXBsYWNlciBhdHRyaWJ1dGVzXG4gICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMocmVwbGFjZXJBdHRycywgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vbi1jb21wb25lbnQsIGp1c3QgY29tcGlsZSBhcyBhIG5vcm1hbCBlbGVtZW50LlxuICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhlbC5hdHRyaWJ1dGVzLCBvcHRpb25zKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb250YWluZXJBdHRycykge1xuICAgIC8vIHdhcm4gY29udGFpbmVyIGRpcmVjdGl2ZXMgZm9yIGZyYWdtZW50IGluc3RhbmNlc1xuICAgIHZhciBuYW1lcyA9IGNvbnRhaW5lckF0dHJzLmZpbHRlcihmdW5jdGlvbiAoYXR0cikge1xuICAgICAgLy8gYWxsb3cgdnVlLWxvYWRlci92dWVpZnkgc2NvcGVkIGNzcyBhdHRyaWJ1dGVzXG4gICAgICByZXR1cm4gYXR0ci5uYW1lLmluZGV4T2YoJ192LScpIDwgMCAmJlxuICAgICAgLy8gYWxsb3cgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAhb25SRS50ZXN0KGF0dHIubmFtZSkgJiZcbiAgICAgIC8vIGFsbG93IHNsb3RzXG4gICAgICBhdHRyLm5hbWUgIT09ICdzbG90JztcbiAgICB9KS5tYXAoZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgIHJldHVybiAnXCInICsgYXR0ci5uYW1lICsgJ1wiJztcbiAgICB9KTtcbiAgICBpZiAobmFtZXMubGVuZ3RoKSB7XG4gICAgICB2YXIgcGx1cmFsID0gbmFtZXMubGVuZ3RoID4gMTtcbiAgICAgIHdhcm4oJ0F0dHJpYnV0ZScgKyAocGx1cmFsID8gJ3MgJyA6ICcgJykgKyBuYW1lcy5qb2luKCcsICcpICsgKHBsdXJhbCA/ICcgYXJlJyA6ICcgaXMnKSArICcgaWdub3JlZCBvbiBjb21wb25lbnQgJyArICc8JyArIG9wdGlvbnMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4gYmVjYXVzZSAnICsgJ3RoZSBjb21wb25lbnQgaXMgYSBmcmFnbWVudCBpbnN0YW5jZTogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNGcmFnbWVudC1JbnN0YW5jZScpO1xuICAgIH1cbiAgfVxuXG4gIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IG51bGw7XG4gIHJldHVybiBmdW5jdGlvbiByb290TGlua0ZuKHZtLCBlbCwgc2NvcGUpIHtcbiAgICAvLyBsaW5rIGNvbnRleHQgc2NvcGUgZGlyc1xuICAgIHZhciBjb250ZXh0ID0gdm0uX2NvbnRleHQ7XG4gICAgdmFyIGNvbnRleHREaXJzO1xuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHRMaW5rRm4pIHtcbiAgICAgIGNvbnRleHREaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZXh0TGlua0ZuKGNvbnRleHQsIGVsLCBudWxsLCBzY29wZSk7XG4gICAgICB9LCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICAvLyBsaW5rIHNlbGZcbiAgICB2YXIgc2VsZkRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocmVwbGFjZXJMaW5rRm4pIHJlcGxhY2VyTGlua0ZuKHZtLCBlbCk7XG4gICAgfSwgdm0pO1xuXG4gICAgLy8gcmV0dXJuIHRoZSB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gY29udGV4dFxuICAgIC8vIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHNlbGZEaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycyk7XG4gIH07XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIG5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4gYmFzZWQgb24gdGhlXG4gKiBub2RlIHR5cGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKSB7XG4gIHZhciB0eXBlID0gbm9kZS5ub2RlVHlwZTtcbiAgaWYgKHR5cGUgPT09IDEgJiYgIWlzU2NyaXB0KG5vZGUpKSB7XG4gICAgcmV0dXJuIGNvbXBpbGVFbGVtZW50KG5vZGUsIG9wdGlvbnMpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IDMgJiYgbm9kZS5kYXRhLnRyaW0oKSkge1xuICAgIHJldHVybiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZUVsZW1lbnQoZWwsIG9wdGlvbnMpIHtcbiAgLy8gcHJlcHJvY2VzcyB0ZXh0YXJlYXMuXG4gIC8vIHRleHRhcmVhIHRyZWF0cyBpdHMgdGV4dCBjb250ZW50IGFzIHRoZSBpbml0aWFsIHZhbHVlLlxuICAvLyBqdXN0IGJpbmQgaXQgYXMgYW4gYXR0ciBkaXJlY3RpdmUgZm9yIHZhbHVlLlxuICBpZiAoZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQoZWwudmFsdWUpO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnOnZhbHVlJywgdG9rZW5zVG9FeHAodG9rZW5zKSk7XG4gICAgICBlbC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgfVxuICB2YXIgbGlua0ZuO1xuICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG4gIHZhciBhdHRycyA9IGhhc0F0dHJzICYmIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG4gIC8vIGNoZWNrIHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGZvciAmIGlmKVxuICBpZiAoaGFzQXR0cnMpIHtcbiAgICBsaW5rRm4gPSBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpO1xuICB9XG4gIC8vIGNoZWNrIGVsZW1lbnQgZGlyZWN0aXZlc1xuICBpZiAoIWxpbmtGbikge1xuICAgIGxpbmtGbiA9IGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpO1xuICB9XG4gIC8vIGNoZWNrIGNvbXBvbmVudFxuICBpZiAoIWxpbmtGbikge1xuICAgIGxpbmtGbiA9IGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKTtcbiAgfVxuICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuICBpZiAoIWxpbmtGbiAmJiBoYXNBdHRycykge1xuICAgIGxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKTtcbiAgfVxuICByZXR1cm4gbGlua0ZuO1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSB0ZXh0Tm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cbiAqXG4gKiBAcGFyYW0ge1RleHROb2RlfSBub2RlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH0gdGV4dE5vZGVMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucykge1xuICAvLyBza2lwIG1hcmtlZCB0ZXh0IG5vZGVzXG4gIGlmIChub2RlLl9za2lwKSB7XG4gICAgcmV0dXJuIHJlbW92ZVRleHQ7XG4gIH1cblxuICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KG5vZGUud2hvbGVUZXh0KTtcbiAgaWYgKCF0b2tlbnMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIG1hcmsgYWRqYWNlbnQgdGV4dCBub2RlcyBhcyBza2lwcGVkLFxuICAvLyBiZWNhdXNlIHdlIGFyZSB1c2luZyBub2RlLndob2xlVGV4dCB0byBjb21waWxlXG4gIC8vIGFsbCBhZGphY2VudCB0ZXh0IG5vZGVzIHRvZ2V0aGVyLiBUaGlzIGZpeGVzXG4gIC8vIGlzc3VlcyBpbiBJRSB3aGVyZSBzb21ldGltZXMgaXQgc3BsaXRzIHVwIGEgc2luZ2xlXG4gIC8vIHRleHQgbm9kZSBpbnRvIG11bHRpcGxlIG9uZXMuXG4gIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgd2hpbGUgKG5leHQgJiYgbmV4dC5ub2RlVHlwZSA9PT0gMykge1xuICAgIG5leHQuX3NraXAgPSB0cnVlO1xuICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICB9XG5cbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciBlbCwgdG9rZW47XG4gIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgIGVsID0gdG9rZW4udGFnID8gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG4gICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbiAgcmV0dXJuIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIExpbmtlciBmb3IgYW4gc2tpcHBlZCB0ZXh0IG5vZGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge1RleHR9IG5vZGVcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVUZXh0KHZtLCBub2RlKSB7XG4gIHJlbW92ZShub2RlKTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIGEgc2luZ2xlIHRleHQgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7Tm9kZX1cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSB7XG4gIHZhciBlbDtcbiAgaWYgKHRva2VuLm9uZVRpbWUpIHtcbiAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodG9rZW4uaHRtbCkge1xuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCd2LWh0bWwnKTtcbiAgICAgIHNldFRva2VuVHlwZSgnaHRtbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJRSB3aWxsIGNsZWFuIHVwIGVtcHR5IHRleHROb2RlcyBkdXJpbmdcbiAgICAgIC8vIGZyYWcuY2xvbmVOb2RlKHRydWUpLCBzbyB3ZSBoYXZlIHRvIGdpdmUgaXRcbiAgICAgIC8vIHNvbWV0aGluZyBoZXJlLi4uXG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgJyk7XG4gICAgICBzZXRUb2tlblR5cGUoJ3RleHQnKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gc2V0VG9rZW5UeXBlKHR5cGUpIHtcbiAgICBpZiAodG9rZW4uZGVzY3JpcHRvcikgcmV0dXJuO1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh0b2tlbi52YWx1ZSk7XG4gICAgdG9rZW4uZGVzY3JpcHRvciA9IHtcbiAgICAgIG5hbWU6IHR5cGUsXG4gICAgICBkZWY6IGRpcmVjdGl2ZXNbdHlwZV0sXG4gICAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzXG4gICAgfTtcbiAgfVxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBhIHRleHROb2RlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gdG9rZW5zXG4gKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcbiAqL1xuXG5mdW5jdGlvbiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB0ZXh0Tm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlKSB7XG4gICAgdmFyIGZyYWdDbG9uZSA9IGZyYWcuY2xvbmVOb2RlKHRydWUpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShmcmFnQ2xvbmUuY2hpbGROb2Rlcyk7XG4gICAgdmFyIHRva2VuLCB2YWx1ZSwgbm9kZTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgdmFsdWUgPSB0b2tlbi52YWx1ZTtcbiAgICAgIGlmICh0b2tlbi50YWcpIHtcbiAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbaV07XG4gICAgICAgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG4gICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0pLiRldmFsKHZhbHVlKTtcbiAgICAgICAgICBpZiAodG9rZW4uaHRtbCkge1xuICAgICAgICAgICAgcmVwbGFjZShub2RlLCBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLl9iaW5kRGlyKHRva2VuLmRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXBsYWNlKGVsLCBmcmFnQ2xvbmUpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSBub2RlIGxpc3QgYW5kIHJldHVybiBhIGNoaWxkTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVOb2RlTGlzdChub2RlTGlzdCwgb3B0aW9ucykge1xuICB2YXIgbGlua0ZucyA9IFtdO1xuICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGU7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZUxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgbm9kZSA9IG5vZGVMaXN0W2ldO1xuICAgIG5vZGVMaW5rRm4gPSBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKTtcbiAgICBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiBub2RlLnRhZ05hbWUgIT09ICdTQ1JJUFQnICYmIG5vZGUuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KG5vZGUuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuICAgIGxpbmtGbnMucHVzaChub2RlTGlua0ZuLCBjaGlsZExpbmtGbik7XG4gIH1cbiAgcmV0dXJuIGxpbmtGbnMubGVuZ3RoID8gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIDogbnVsbDtcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2hpbGQgbGluayBmdW5jdGlvbiBmb3IgYSBub2RlJ3MgY2hpbGROb2Rlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gbGlua0Zuc1xuICogQHJldHVybiB7RnVuY3Rpb259IGNoaWxkTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNoaWxkTGlua0ZuKHZtLCBub2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICB2YXIgbm9kZSwgbm9kZUxpbmtGbiwgY2hpbGRyZW5MaW5rRm47XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSAwLCBsID0gbGlua0Zucy5sZW5ndGg7IGkgPCBsOyBuKyspIHtcbiAgICAgIG5vZGUgPSBub2Rlc1tuXTtcbiAgICAgIG5vZGVMaW5rRm4gPSBsaW5rRm5zW2krK107XG4gICAgICBjaGlsZHJlbkxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcbiAgICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuICAgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KG5vZGUuY2hpbGROb2Rlcyk7XG4gICAgICBpZiAobm9kZUxpbmtGbikge1xuICAgICAgICBub2RlTGlua0ZuKHZtLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgICB9XG4gICAgICBpZiAoY2hpbGRyZW5MaW5rRm4pIHtcbiAgICAgICAgY2hpbGRyZW5MaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgZm9yIGVsZW1lbnQgZGlyZWN0aXZlcyAoY3VzdG9tIGVsZW1lbnRzIHRoYXQgc2hvdWxkXG4gKiBiZSByZXNvdmxlZCBhcyB0ZXJtaW5hbCBkaXJlY3RpdmVzKS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGNvbW1vblRhZ1JFLnRlc3QodGFnKSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZyk7XG4gIGlmIChkZWYpIHtcbiAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgdGFnLCAnJywgb3B0aW9ucywgZGVmKTtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQuIElmIHllcywgcmV0dXJuXG4gKiBhIGNvbXBvbmVudCBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIGNvbXBvbmVudCA9IGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucyk7XG4gIGlmIChjb21wb25lbnQpIHtcbiAgICB2YXIgcmVmID0gZmluZFJlZihlbCk7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgICBuYW1lOiAnY29tcG9uZW50JyxcbiAgICAgIHJlZjogcmVmLFxuICAgICAgZXhwcmVzc2lvbjogY29tcG9uZW50LmlkLFxuICAgICAgZGVmOiBpbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50LFxuICAgICAgbW9kaWZpZXJzOiB7XG4gICAgICAgIGxpdGVyYWw6ICFjb21wb25lbnQuZHluYW1pY1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGNvbXBvbmVudExpbmtGbiA9IGZ1bmN0aW9uIGNvbXBvbmVudExpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgICBpZiAocmVmKSB7XG4gICAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIHJlZiwgbnVsbCk7XG4gICAgICB9XG4gICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgIH07XG4gICAgY29tcG9uZW50TGlua0ZuLnRlcm1pbmFsID0gdHJ1ZTtcbiAgICByZXR1cm4gY29tcG9uZW50TGlua0ZuO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgYW4gZWxlbWVudCBmb3IgdGVybWluYWwgZGlyZWN0aXZlcyBpbiBmaXhlZCBvcmRlci5cbiAqIElmIGl0IGZpbmRzIG9uZSwgcmV0dXJuIGEgdGVybWluYWwgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0FycmF5fSBhdHRyc1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucykge1xuICAvLyBza2lwIHYtcHJlXG4gIGlmIChnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuICAgIHJldHVybiBza2lwO1xuICB9XG4gIC8vIHNraXAgdi1lbHNlIGJsb2NrLCBidXQgb25seSBpZiBmb2xsb3dpbmcgdi1pZlxuICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2LWVsc2UnKSkge1xuICAgIHZhciBwcmV2ID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICBpZiAocHJldiAmJiBwcmV2Lmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgICByZXR1cm4gc2tpcDtcbiAgICB9XG4gIH1cblxuICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIG1vZGlmaWVycywgbWF0Y2hlZCwgZGlyTmFtZSwgcmF3TmFtZSwgYXJnLCBkZWYsIHRlcm1EZWY7XG4gIGZvciAodmFyIGkgPSAwLCBqID0gYXR0cnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgYXR0ciA9IGF0dHJzW2ldO1xuICAgIG5hbWUgPSBhdHRyLm5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG4gICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcbiAgICAgIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIG1hdGNoZWRbMV0pO1xuICAgICAgaWYgKGRlZiAmJiBkZWYudGVybWluYWwpIHtcbiAgICAgICAgaWYgKCF0ZXJtRGVmIHx8IChkZWYucHJpb3JpdHkgfHwgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSkgPiB0ZXJtRGVmLnByaW9yaXR5KSB7XG4gICAgICAgICAgdGVybURlZiA9IGRlZjtcbiAgICAgICAgICByYXdOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKGF0dHIubmFtZSk7XG4gICAgICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAodGVybURlZikge1xuICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgdGVybURlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNraXAoKSB7fVxuc2tpcC50ZXJtaW5hbCA9IHRydWU7XG5cbi8qKlxuICogQnVpbGQgYSBub2RlIGxpbmsgZnVuY3Rpb24gZm9yIGEgdGVybWluYWwgZGlyZWN0aXZlLlxuICogQSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uIHRlcm1pbmF0ZXMgdGhlIGN1cnJlbnRcbiAqIGNvbXBpbGF0aW9uIHJlY3Vyc2lvbiBhbmQgaGFuZGxlcyBjb21waWxhdGlvbiBvZiB0aGVcbiAqIHN1YnRyZWUgaW4gdGhlIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IGRlZlxuICogQHBhcmFtIHtTdHJpbmd9IFtyYXdOYW1lXVxuICogQHBhcmFtIHtTdHJpbmd9IFthcmddXG4gKiBAcGFyYW0ge09iamVjdH0gW21vZGlmaWVyc11cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCBkZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKSB7XG4gIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG4gIHZhciBkZXNjcmlwdG9yID0ge1xuICAgIG5hbWU6IGRpck5hbWUsXG4gICAgYXJnOiBhcmcsXG4gICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG4gICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnMsXG4gICAgcmF3OiB2YWx1ZSxcbiAgICBhdHRyOiByYXdOYW1lLFxuICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuICAgIGRlZjogZGVmXG4gIH07XG4gIC8vIGNoZWNrIHJlZiBmb3Igdi1mb3IgYW5kIHJvdXRlci12aWV3XG4gIGlmIChkaXJOYW1lID09PSAnZm9yJyB8fCBkaXJOYW1lID09PSAncm91dGVyLXZpZXcnKSB7XG4gICAgZGVzY3JpcHRvci5yZWYgPSBmaW5kUmVmKGVsKTtcbiAgfVxuICB2YXIgZm4gPSBmdW5jdGlvbiB0ZXJtaW5hbE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIGlmIChkZXNjcmlwdG9yLnJlZikge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgZGVzY3JpcHRvci5yZWYsIG51bGwpO1xuICAgIH1cbiAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICB9O1xuICBmbi50ZXJtaW5hbCA9IHRydWU7XG4gIHJldHVybiBmbjtcbn1cblxuLyoqXG4gKiBDb21waWxlIHRoZSBkaXJlY3RpdmVzIG9uIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIGxpbmtlci5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE5hbWVkTm9kZU1hcH0gYXR0cnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucykge1xuICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcbiAgdmFyIGRpcnMgPSBbXTtcbiAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCByYXdOYW1lLCByYXdWYWx1ZSwgZGlyTmFtZSwgYXJnLCBtb2RpZmllcnMsIGRpckRlZiwgdG9rZW5zLCBtYXRjaGVkO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgYXR0ciA9IGF0dHJzW2ldO1xuICAgIG5hbWUgPSByYXdOYW1lID0gYXR0ci5uYW1lO1xuICAgIHZhbHVlID0gcmF3VmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgIHRva2VucyA9IHBhcnNlVGV4dCh2YWx1ZSk7XG4gICAgLy8gcmVzZXQgYXJnXG4gICAgYXJnID0gbnVsbDtcbiAgICAvLyBjaGVjayBtb2RpZmllcnNcbiAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhuYW1lKTtcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcblxuICAgIC8vIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uc1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIHZhbHVlID0gdG9rZW5zVG9FeHAodG9rZW5zKTtcbiAgICAgIGFyZyA9IG5hbWU7XG4gICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kLCB0b2tlbnMpO1xuICAgICAgLy8gd2FybiBhZ2FpbnN0IG1peGluZyBtdXN0YWNoZXMgd2l0aCB2LWJpbmRcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnY2xhc3MnICYmIEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoYXR0cnMsIGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICAgICAgcmV0dXJuIGF0dHIubmFtZSA9PT0gJzpjbGFzcycgfHwgYXR0ci5uYW1lID09PSAndi1iaW5kOmNsYXNzJztcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICB3YXJuKCdjbGFzcz1cIicgKyByYXdWYWx1ZSArICdcIjogRG8gbm90IG1peCBtdXN0YWNoZSBpbnRlcnBvbGF0aW9uICcgKyAnYW5kIHYtYmluZCBmb3IgXCJjbGFzc1wiIG9uIHRoZSBzYW1lIGVsZW1lbnQuIFVzZSBvbmUgb3IgdGhlIG90aGVyLicsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlXG5cbiAgICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlOiB0cmFuc2l0aW9uXG4gICAgICBpZiAodHJhbnNpdGlvblJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgbW9kaWZpZXJzLmxpdGVyYWwgPSAhYmluZFJFLnRlc3QobmFtZSk7XG4gICAgICAgIHB1c2hEaXIoJ3RyYW5zaXRpb24nLCBpbnRlcm5hbERpcmVjdGl2ZXMudHJhbnNpdGlvbik7XG4gICAgICB9IGVsc2VcblxuICAgICAgICAvLyBldmVudCBoYW5kbGVyc1xuICAgICAgICBpZiAob25SRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgICAgYXJnID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTtcbiAgICAgICAgICBwdXNoRGlyKCdvbicsIGRpcmVjdGl2ZXMub24pO1xuICAgICAgICB9IGVsc2VcblxuICAgICAgICAgIC8vIGF0dHJpYnV0ZSBiaW5kaW5nc1xuICAgICAgICAgIGlmIChiaW5kUkUudGVzdChuYW1lKSkge1xuICAgICAgICAgICAgZGlyTmFtZSA9IG5hbWUucmVwbGFjZShiaW5kUkUsICcnKTtcbiAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnc3R5bGUnIHx8IGRpck5hbWUgPT09ICdjbGFzcycpIHtcbiAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBpbnRlcm5hbERpcmVjdGl2ZXNbZGlyTmFtZV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXJnID0gZGlyTmFtZTtcbiAgICAgICAgICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlXG5cbiAgICAgICAgICAgIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG4gICAgICAgICAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuICAgICAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcbiAgICAgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcblxuICAgICAgICAgICAgICAvLyBza2lwIHYtZWxzZSAod2hlbiB1c2VkIHdpdGggdi1zaG93KVxuICAgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ2Vsc2UnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBkaXJEZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXJOYW1lLCB0cnVlKTtcbiAgICAgICAgICAgICAgaWYgKGRpckRlZikge1xuICAgICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgZGlyRGVmKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFB1c2ggYSBkaXJlY3RpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSBkZWZcbiAgICogQHBhcmFtIHtBcnJheX0gW2ludGVycFRva2Vuc11cbiAgICovXG5cbiAgZnVuY3Rpb24gcHVzaERpcihkaXJOYW1lLCBkZWYsIGludGVycFRva2Vucykge1xuICAgIHZhciBoYXNPbmVUaW1lVG9rZW4gPSBpbnRlcnBUb2tlbnMgJiYgaGFzT25lVGltZShpbnRlcnBUb2tlbnMpO1xuICAgIHZhciBwYXJzZWQgPSAhaGFzT25lVGltZVRva2VuICYmIHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcbiAgICBkaXJzLnB1c2goe1xuICAgICAgbmFtZTogZGlyTmFtZSxcbiAgICAgIGF0dHI6IHJhd05hbWUsXG4gICAgICByYXc6IHJhd1ZhbHVlLFxuICAgICAgZGVmOiBkZWYsXG4gICAgICBhcmc6IGFyZyxcbiAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuICAgICAgLy8gY29udmVyc2lvbiBmcm9tIGludGVycG9sYXRpb24gc3RyaW5ncyB3aXRoIG9uZS10aW1lIHRva2VuXG4gICAgICAvLyB0byBleHByZXNzaW9uIGlzIGRpZmZlcmVkIHVudGlsIGRpcmVjdGl2ZSBiaW5kIHRpbWUgc28gdGhhdCB3ZVxuICAgICAgLy8gaGF2ZSBhY2Nlc3MgdG8gdGhlIGFjdHVhbCB2bSBjb250ZXh0IGZvciBvbmUtdGltZSBiaW5kaW5ncy5cbiAgICAgIGV4cHJlc3Npb246IHBhcnNlZCAmJiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcbiAgICAgIGludGVycDogaW50ZXJwVG9rZW5zLFxuICAgICAgaGFzT25lVGltZTogaGFzT25lVGltZVRva2VuXG4gICAgfSk7XG4gIH1cblxuICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbWFrZU5vZGVMaW5rRm4oZGlycyk7XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBtb2RpZmllcnMgZnJvbSBkaXJlY3RpdmUgYXR0cmlidXRlIG5hbWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZU1vZGlmaWVycyhuYW1lKSB7XG4gIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgbWF0Y2ggPSBuYW1lLm1hdGNoKG1vZGlmaWVyUkUpO1xuICBpZiAobWF0Y2gpIHtcbiAgICB2YXIgaSA9IG1hdGNoLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZXNbbWF0Y2hbaV0uc2xpY2UoMSldID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGxpbmsgZnVuY3Rpb24gZm9yIGFsbCBkaXJlY3RpdmVzIG9uIGEgc2luZ2xlIG5vZGUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gZGlyZWN0aXZlc1xuICogQHJldHVybiB7RnVuY3Rpb259IGRpcmVjdGl2ZXNMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlTm9kZUxpbmtGbihkaXJlY3RpdmVzKSB7XG4gIHJldHVybiBmdW5jdGlvbiBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAvLyByZXZlcnNlIGFwcGx5IGJlY2F1c2UgaXQncyBzb3J0ZWQgbG93IHRvIGhpZ2hcbiAgICB2YXIgaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZtLl9iaW5kRGlyKGRpcmVjdGl2ZXNbaV0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGludGVycG9sYXRpb24gc3RyaW5nIGNvbnRhaW5zIG9uZS10aW1lIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaGFzT25lVGltZSh0b2tlbnMpIHtcbiAgdmFyIGkgPSB0b2tlbnMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKHRva2Vuc1tpXS5vbmVUaW1lKSByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1NjcmlwdChlbCkge1xuICByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgKCFlbC5oYXNBdHRyaWJ1dGUoJ3R5cGUnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ3RleHQvamF2YXNjcmlwdCcpO1xufVxuXG52YXIgc3BlY2lhbENoYXJSRSA9IC9bXlxcd1xcLTpcXC5dLztcblxuLyoqXG4gKiBQcm9jZXNzIGFuIGVsZW1lbnQgb3IgYSBEb2N1bWVudEZyYWdtZW50IGJhc2VkIG9uIGFcbiAqIGluc3RhbmNlIG9wdGlvbiBvYmplY3QuIFRoaXMgYWxsb3dzIHVzIHRvIHRyYW5zY2x1ZGVcbiAqIGEgdGVtcGxhdGUgbm9kZS9mcmFnbWVudCBiZWZvcmUgdGhlIGluc3RhbmNlIGlzIGNyZWF0ZWQsXG4gKiBzbyB0aGUgcHJvY2Vzc2VkIGZyYWdtZW50IGNhbiB0aGVuIGJlIGNsb25lZCBhbmQgcmV1c2VkXG4gKiBpbiB2LWZvci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpIHtcbiAgLy8gZXh0cmFjdCBjb250YWluZXIgYXR0cmlidXRlcyB0byBwYXNzIHRoZW0gZG93blxuICAvLyB0byBjb21waWxlciwgYmVjYXVzZSB0aGV5IG5lZWQgdG8gYmUgY29tcGlsZWQgaW5cbiAgLy8gcGFyZW50IHNjb3BlLiB3ZSBhcmUgbXV0YXRpbmcgdGhlIG9wdGlvbnMgb2JqZWN0IGhlcmVcbiAgLy8gYXNzdW1pbmcgdGhlIHNhbWUgb2JqZWN0IHdpbGwgYmUgdXNlZCBmb3IgY29tcGlsZVxuICAvLyByaWdodCBhZnRlciB0aGlzLlxuICBpZiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gZXh0cmFjdEF0dHJzKGVsKTtcbiAgfVxuICAvLyBmb3IgdGVtcGxhdGUgdGFncywgd2hhdCB3ZSB3YW50IGlzIGl0cyBjb250ZW50IGFzXG4gIC8vIGEgZG9jdW1lbnRGcmFnbWVudCAoZm9yIGZyYWdtZW50IGluc3RhbmNlcylcbiAgaWYgKGlzVGVtcGxhdGUoZWwpKSB7XG4gICAgZWwgPSBwYXJzZVRlbXBsYXRlKGVsKTtcbiAgfVxuICBpZiAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCAmJiAhb3B0aW9ucy50ZW1wbGF0ZSkge1xuICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9ICc8c2xvdD48L3Nsb3Q+JztcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgIG9wdGlvbnMuX2NvbnRlbnQgPSBleHRyYWN0Q29udGVudChlbCk7XG4gICAgICBlbCA9IHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG4gIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuICAgIC8vIGFuY2hvcnMgZm9yIGZyYWdtZW50IGluc3RhbmNlXG4gICAgLy8gcGFzc2luZyBpbiBgcGVyc2lzdDogdHJ1ZWAgdG8gYXZvaWQgdGhlbSBiZWluZ1xuICAgIC8vIGRpc2NhcmRlZCBieSBJRSBkdXJpbmcgdGVtcGxhdGUgY2xvbmluZ1xuICAgIHByZXBlbmQoY3JlYXRlQW5jaG9yKCd2LXN0YXJ0JywgdHJ1ZSksIGVsKTtcbiAgICBlbC5hcHBlbmRDaGlsZChjcmVhdGVBbmNob3IoJ3YtZW5kJywgdHJ1ZSkpO1xuICB9XG4gIHJldHVybiBlbDtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24uXG4gKiBJZiB0aGUgcmVwbGFjZSBvcHRpb24gaXMgdHJ1ZSB0aGlzIHdpbGwgc3dhcCB0aGUgJGVsLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKSB7XG4gIHZhciB0ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XG4gIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgdHJ1ZSk7XG4gIGlmIChmcmFnKSB7XG4gICAgdmFyIHJlcGxhY2VyID0gZnJhZy5maXJzdENoaWxkO1xuICAgIHZhciB0YWcgPSByZXBsYWNlci50YWdOYW1lICYmIHJlcGxhY2VyLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChlbCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1lvdSBhcmUgbW91bnRpbmcgYW4gaW5zdGFuY2Ugd2l0aCBhIHRlbXBsYXRlIHRvICcgKyAnPGJvZHk+LiBUaGlzIHdpbGwgcmVwbGFjZSA8Ym9keT4gZW50aXJlbHkuIFlvdSAnICsgJ3Nob3VsZCBwcm9iYWJseSB1c2UgYHJlcGxhY2U6IGZhbHNlYCBoZXJlLicpO1xuICAgICAgfVxuICAgICAgLy8gdGhlcmUgYXJlIG1hbnkgY2FzZXMgd2hlcmUgdGhlIGluc3RhbmNlIG11c3RcbiAgICAgIC8vIGJlY29tZSBhIGZyYWdtZW50IGluc3RhbmNlOiBiYXNpY2FsbHkgYW55dGhpbmcgdGhhdFxuICAgICAgLy8gY2FuIGNyZWF0ZSBtb3JlIHRoYW4gMSByb290IG5vZGVzLlxuICAgICAgaWYgKFxuICAgICAgLy8gbXVsdGktY2hpbGRyZW4gdGVtcGxhdGVcbiAgICAgIGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPiAxIHx8XG4gICAgICAvLyBub24tZWxlbWVudCB0ZW1wbGF0ZVxuICAgICAgcmVwbGFjZXIubm9kZVR5cGUgIT09IDEgfHxcbiAgICAgIC8vIHNpbmdsZSBuZXN0ZWQgY29tcG9uZW50XG4gICAgICB0YWcgPT09ICdjb21wb25lbnQnIHx8IHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykgfHwgaGFzQmluZEF0dHIocmVwbGFjZXIsICdpcycpIHx8XG4gICAgICAvLyBlbGVtZW50IGRpcmVjdGl2ZVxuICAgICAgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZykgfHxcbiAgICAgIC8vIGZvciBibG9ja1xuICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWZvcicpIHx8XG4gICAgICAvLyBpZiBibG9ja1xuICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICAgICAgcmV0dXJuIGZyYWc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gZXh0cmFjdEF0dHJzKHJlcGxhY2VyKTtcbiAgICAgICAgbWVyZ2VBdHRycyhlbCwgcmVwbGFjZXIpO1xuICAgICAgICByZXR1cm4gcmVwbGFjZXI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgb3B0aW9uOiAnICsgdGVtcGxhdGUpO1xuICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGV4dHJhY3QgYSBjb21wb25lbnQgY29udGFpbmVyJ3MgYXR0cmlidXRlc1xuICogaW50byBhIHBsYWluIG9iamVjdCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0QXR0cnMoZWwpIHtcbiAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGVsLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgIHJldHVybiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuICB9XG59XG5cbi8qKlxuICogTWVyZ2UgdGhlIGF0dHJpYnV0ZXMgb2YgdHdvIGVsZW1lbnRzLCBhbmQgbWFrZSBzdXJlXG4gKiB0aGUgY2xhc3MgbmFtZXMgYXJlIG1lcmdlZCBwcm9wZXJseS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGZyb21cbiAqIEBwYXJhbSB7RWxlbWVudH0gdG9cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZUF0dHJzKGZyb20sIHRvKSB7XG4gIHZhciBhdHRycyA9IGZyb20uYXR0cmlidXRlcztcbiAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG4gIHZhciBuYW1lLCB2YWx1ZTtcbiAgd2hpbGUgKGktLSkge1xuICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG4gICAgaWYgKCF0by5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIXNwZWNpYWxDaGFyUkUudGVzdChuYW1lKSkge1xuICAgICAgdG8uc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgIXBhcnNlVGV4dCh2YWx1ZSkgJiYgKHZhbHVlID0gdmFsdWUudHJpbSgpKSkge1xuICAgICAgdmFsdWUuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgICAgYWRkQ2xhc3ModG8sIGNscyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTY2FuIGFuZCBkZXRlcm1pbmUgc2xvdCBjb250ZW50IGRpc3RyaWJ1dGlvbi5cbiAqIFdlIGRvIHRoaXMgZHVyaW5nIHRyYW5zY2x1c2lvbiBpbnN0ZWFkIGF0IGNvbXBpbGUgdGltZSBzbyB0aGF0XG4gKiB0aGUgZGlzdHJpYnV0aW9uIGlzIGRlY291cGxlZCBmcm9tIHRoZSBjb21waWxhdGlvbiBvcmRlciBvZlxuICogdGhlIHNsb3RzLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSB0ZW1wbGF0ZVxuICogQHBhcmFtIHtFbGVtZW50fSBjb250ZW50XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiByZXNvbHZlU2xvdHModm0sIGNvbnRlbnQpIHtcbiAgaWYgKCFjb250ZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjb250ZW50cyA9IHZtLl9zbG90Q29udGVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgZWwsIG5hbWU7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gY29udGVudC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBlbCA9IGNvbnRlbnQuY2hpbGRyZW5baV07XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBpZiAobmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnc2xvdCcpKSB7XG4gICAgICAoY29udGVudHNbbmFtZV0gfHwgKGNvbnRlbnRzW25hbWVdID0gW10pKS5wdXNoKGVsKTtcbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGdldEJpbmRBdHRyKGVsLCAnc2xvdCcpKSB7XG4gICAgICB3YXJuKCdUaGUgXCJzbG90XCIgYXR0cmlidXRlIG11c3QgYmUgc3RhdGljLicsIHZtLiRwYXJlbnQpO1xuICAgIH1cbiAgfVxuICBmb3IgKG5hbWUgaW4gY29udGVudHMpIHtcbiAgICBjb250ZW50c1tuYW1lXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50c1tuYW1lXSwgY29udGVudCk7XG4gIH1cbiAgaWYgKGNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgdmFyIG5vZGVzID0gY29udGVudC5jaGlsZE5vZGVzO1xuICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEgJiYgbm9kZXNbMF0ubm9kZVR5cGUgPT09IDMgJiYgIW5vZGVzWzBdLmRhdGEudHJpbSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnRlbnRzWydkZWZhdWx0J10gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudC5jaGlsZE5vZGVzLCBjb250ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhY3QgcXVhbGlmaWVkIGNvbnRlbnQgbm9kZXMgZnJvbSBhIG5vZGUgbGlzdC5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fSBub2Rlc1xuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0RnJhZ21lbnQobm9kZXMsIHBhcmVudCkge1xuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgbm9kZXMgPSB0b0FycmF5KG5vZGVzKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuICAgIGlmIChpc1RlbXBsYXRlKG5vZGUpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1pZicpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1mb3InKSkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgbm9kZSA9IHBhcnNlVGVtcGxhdGUobm9kZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7XG4gIH1cbiAgcmV0dXJuIGZyYWc7XG59XG5cblxuXG52YXIgY29tcGlsZXIgPSBPYmplY3QuZnJlZXplKHtcblx0Y29tcGlsZTogY29tcGlsZSxcblx0Y29tcGlsZUFuZExpbmtQcm9wczogY29tcGlsZUFuZExpbmtQcm9wcyxcblx0Y29tcGlsZVJvb3Q6IGNvbXBpbGVSb290LFxuXHR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlLFxuXHRyZXNvbHZlU2xvdHM6IHJlc29sdmVTbG90c1xufSk7XG5cbmZ1bmN0aW9uIHN0YXRlTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogQWNjZXNzb3IgZm9yIGAkZGF0YWAgcHJvcGVydHksIHNpbmNlIHNldHRpbmcgJGRhdGFcbiAgICogcmVxdWlyZXMgb2JzZXJ2aW5nIHRoZSBuZXcgb2JqZWN0IGFuZCB1cGRhdGluZ1xuICAgKiBwcm94aWVkIHByb3BlcnRpZXMuXG4gICAqL1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld0RhdGEpIHtcbiAgICAgIGlmIChuZXdEYXRhICE9PSB0aGlzLl9kYXRhKSB7XG4gICAgICAgIHRoaXMuX3NldERhdGEobmV3RGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogU2V0dXAgdGhlIHNjb3BlIG9mIGFuIGluc3RhbmNlLCB3aGljaCBjb250YWluczpcbiAgICogLSBvYnNlcnZlZCBkYXRhXG4gICAqIC0gY29tcHV0ZWQgcHJvcGVydGllc1xuICAgKiAtIHVzZXIgbWV0aG9kc1xuICAgKiAtIG1ldGEgcHJvcGVydGllc1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5faW5pdFByb3BzKCk7XG4gICAgdGhpcy5faW5pdE1ldGEoKTtcbiAgICB0aGlzLl9pbml0TWV0aG9kcygpO1xuICAgIHRoaXMuX2luaXREYXRhKCk7XG4gICAgdGhpcy5faW5pdENvbXB1dGVkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgcHJvcHMuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRQcm9wcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgdmFyIGVsID0gb3B0aW9ucy5lbDtcbiAgICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICAgIGlmIChwcm9wcyAmJiAhZWwpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignUHJvcHMgd2lsbCBub3QgYmUgY29tcGlsZWQgaWYgbm8gYGVsYCBvcHRpb24gaXMgJyArICdwcm92aWRlZCBhdCBpbnN0YW50aWF0aW9uLicsIHRoaXMpO1xuICAgIH1cbiAgICAvLyBtYWtlIHN1cmUgdG8gY29udmVydCBzdHJpbmcgc2VsZWN0b3JzIGludG8gZWxlbWVudCBub3dcbiAgICBlbCA9IG9wdGlvbnMuZWwgPSBxdWVyeShlbCk7XG4gICAgdGhpcy5fcHJvcHNVbmxpbmtGbiA9IGVsICYmIGVsLm5vZGVUeXBlID09PSAxICYmIHByb3BzXG4gICAgLy8gcHJvcHMgbXVzdCBiZSBsaW5rZWQgaW4gcHJvcGVyIHNjb3BlIGlmIGluc2lkZSB2LWZvclxuICAgID8gY29tcGlsZUFuZExpbmtQcm9wcyh0aGlzLCBlbCwgcHJvcHMsIHRoaXMuX3Njb3BlKSA6IG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGRhdGEuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRhRm4gPSB0aGlzLiRvcHRpb25zLmRhdGE7XG4gICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhID0gZGF0YUZuID8gZGF0YUZuKCkgOiB7fTtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcbiAgICAgIGRhdGEgPSB7fTtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignZGF0YSBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuJywgdGhpcyk7XG4gICAgfVxuICAgIHZhciBwcm9wcyA9IHRoaXMuX3Byb3BzO1xuICAgIC8vIHByb3h5IGRhdGEgb24gaW5zdGFuY2VcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICAgIHZhciBpLCBrZXk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAvLyB0aGVyZSBhcmUgdHdvIHNjZW5hcmlvcyB3aGVyZSB3ZSBjYW4gcHJveHkgYSBkYXRhIGtleTpcbiAgICAgIC8vIDEuIGl0J3Mgbm90IGFscmVhZHkgZGVmaW5lZCBhcyBhIHByb3BcbiAgICAgIC8vIDIuIGl0J3MgcHJvdmlkZWQgdmlhIGEgaW5zdGFudGlhdGlvbiBvcHRpb24gQU5EIHRoZXJlIGFyZSBub1xuICAgICAgLy8gICAgdGVtcGxhdGUgcHJvcCBwcmVzZW50XG4gICAgICBpZiAoIXByb3BzIHx8ICFoYXNPd24ocHJvcHMsIGtleSkpIHtcbiAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKCdEYXRhIGZpZWxkIFwiJyArIGtleSArICdcIiBpcyBhbHJlYWR5IGRlZmluZWQgJyArICdhcyBhIHByb3AuIFRvIHByb3ZpZGUgZGVmYXVsdCB2YWx1ZSBmb3IgYSBwcm9wLCB1c2UgdGhlIFwiZGVmYXVsdFwiICcgKyAncHJvcCBvcHRpb247IGlmIHlvdSB3YW50IHRvIHBhc3MgcHJvcCB2YWx1ZXMgdG8gYW4gaW5zdGFudGlhdGlvbiAnICsgJ2NhbGwsIHVzZSB0aGUgXCJwcm9wc0RhdGFcIiBvcHRpb24uJywgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIG9ic2VydmUgZGF0YVxuICAgIG9ic2VydmUoZGF0YSwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN3YXAgdGhlIGluc3RhbmNlJ3MgJGRhdGEuIENhbGxlZCBpbiAkZGF0YSdzIHNldHRlci5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG5ld0RhdGFcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fc2V0RGF0YSA9IGZ1bmN0aW9uIChuZXdEYXRhKSB7XG4gICAgbmV3RGF0YSA9IG5ld0RhdGEgfHwge307XG4gICAgdmFyIG9sZERhdGEgPSB0aGlzLl9kYXRhO1xuICAgIHRoaXMuX2RhdGEgPSBuZXdEYXRhO1xuICAgIHZhciBrZXlzLCBrZXksIGk7XG4gICAgLy8gdW5wcm94eSBrZXlzIG5vdCBwcmVzZW50IGluIG5ldyBkYXRhXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKG9sZERhdGEpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKCEoa2V5IGluIG5ld0RhdGEpKSB7XG4gICAgICAgIHRoaXMuX3VucHJveHkoa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcHJveHkga2V5cyBub3QgYWxyZWFkeSBwcm94aWVkLFxuICAgIC8vIGFuZCB0cmlnZ2VyIGNoYW5nZSBmb3IgY2hhbmdlZCB2YWx1ZXNcbiAgICBrZXlzID0gT2JqZWN0LmtleXMobmV3RGF0YSk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoIWhhc093bih0aGlzLCBrZXkpKSB7XG4gICAgICAgIC8vIG5ldyBwcm9wZXJ0eVxuICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICBvbGREYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcbiAgICBvYnNlcnZlKG5ld0RhdGEsIHRoaXMpO1xuICAgIHRoaXMuX2RpZ2VzdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcm94eSBhIHByb3BlcnR5LCBzbyB0aGF0XG4gICAqIHZtLnByb3AgPT09IHZtLl9kYXRhLnByb3BcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuICAgICAgLy8gbmVlZCB0byBzdG9yZSByZWYgdG8gc2VsZiBoZXJlXG4gICAgICAvLyBiZWNhdXNlIHRoZXNlIGdldHRlci9zZXR0ZXJzIG1pZ2h0XG4gICAgICAvLyBiZSBjYWxsZWQgYnkgY2hpbGQgc2NvcGVzIHZpYVxuICAgICAgLy8gcHJvdG90eXBlIGluaGVyaXRhbmNlLlxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIGtleSwge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogZnVuY3Rpb24gcHJveHlHZXR0ZXIoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFba2V5XTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBwcm94eVNldHRlcih2YWwpIHtcbiAgICAgICAgICBzZWxmLl9kYXRhW2tleV0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVW5wcm94eSBhIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3VucHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcbiAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBGb3JjZSB1cGRhdGUgb24gZXZlcnkgd2F0Y2hlciBpbiBzY29wZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB0aGlzLl93YXRjaGVyc1tpXS51cGRhdGUodHJ1ZSk7IC8vIHNoYWxsb3cgdXBkYXRlc1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0dXAgY29tcHV0ZWQgcHJvcGVydGllcy4gVGhleSBhcmUgZXNzZW50aWFsbHlcbiAgICogc3BlY2lhbCBnZXR0ZXIvc2V0dGVyc1xuICAgKi9cblxuICBmdW5jdGlvbiBub29wKCkge31cbiAgVnVlLnByb3RvdHlwZS5faW5pdENvbXB1dGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb21wdXRlZCA9IHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQ7XG4gICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcbiAgICAgICAgdmFyIHVzZXJEZWYgPSBjb21wdXRlZFtrZXldO1xuICAgICAgICB2YXIgZGVmID0ge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGRlZi5nZXQgPSBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZiwgdGhpcyk7XG4gICAgICAgICAgZGVmLnNldCA9IG5vb3A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmLmdldCA9IHVzZXJEZWYuZ2V0ID8gdXNlckRlZi5jYWNoZSAhPT0gZmFsc2UgPyBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZi5nZXQsIHRoaXMpIDogYmluZCh1c2VyRGVmLmdldCwgdGhpcykgOiBub29wO1xuICAgICAgICAgIGRlZi5zZXQgPSB1c2VyRGVmLnNldCA/IGJpbmQodXNlckRlZi5zZXQsIHRoaXMpIDogbm9vcDtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCBkZWYpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlQ29tcHV0ZWRHZXR0ZXIoZ2V0dGVyLCBvd25lcikge1xuICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIob3duZXIsIGdldHRlciwgbnVsbCwge1xuICAgICAgbGF6eTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlcigpIHtcbiAgICAgIGlmICh3YXRjaGVyLmRpcnR5KSB7XG4gICAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKTtcbiAgICAgIH1cbiAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgIHdhdGNoZXIuZGVwZW5kKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd2F0Y2hlci52YWx1ZTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGluc3RhbmNlIG1ldGhvZHMuIE1ldGhvZHMgbXVzdCBiZSBib3VuZCB0byB0aGVcbiAgICogaW5zdGFuY2Ugc2luY2UgdGhleSBtaWdodCBiZSBwYXNzZWQgZG93biBhcyBhIHByb3AgdG9cbiAgICogY2hpbGQgY29tcG9uZW50cy5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGhvZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1ldGhvZHMgPSB0aGlzLiRvcHRpb25zLm1ldGhvZHM7XG4gICAgaWYgKG1ldGhvZHMpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRob2RzKSB7XG4gICAgICAgIHRoaXNba2V5XSA9IGJpbmQobWV0aG9kc1trZXldLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgbWV0YSBpbmZvcm1hdGlvbiBsaWtlICRpbmRleCwgJGtleSAmICR2YWx1ZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1ldGFzID0gdGhpcy4kb3B0aW9ucy5fbWV0YTtcbiAgICBpZiAobWV0YXMpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRhcykge1xuICAgICAgICBkZWZpbmVSZWFjdGl2ZSh0aGlzLCBrZXksIG1ldGFzW2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxudmFyIGV2ZW50UkUgPSAvXnYtb246fF5ALztcblxuZnVuY3Rpb24gZXZlbnRzTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogU2V0dXAgdGhlIGluc3RhbmNlJ3Mgb3B0aW9uIGV2ZW50cyAmIHdhdGNoZXJzLlxuICAgKiBJZiB0aGUgdmFsdWUgaXMgYSBzdHJpbmcsIHdlIHB1bGwgaXQgZnJvbSB0aGVcbiAgICogaW5zdGFuY2UncyBtZXRob2RzIGJ5IG5hbWUuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuICAgICAgcmVnaXN0ZXJDb21wb25lbnRFdmVudHModGhpcywgb3B0aW9ucy5lbCk7XG4gICAgfVxuICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckb24nLCBvcHRpb25zLmV2ZW50cyk7XG4gICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyR3YXRjaCcsIG9wdGlvbnMud2F0Y2gpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciB2LW9uIGV2ZW50cyBvbiBhIGNoaWxkIGNvbXBvbmVudFxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh2bSwgZWwpIHtcbiAgICB2YXIgYXR0cnMgPSBlbC5hdHRyaWJ1dGVzO1xuICAgIHZhciBuYW1lLCB2YWx1ZSwgaGFuZGxlcjtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG4gICAgICBpZiAoZXZlbnRSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZXZlbnRSRSwgJycpO1xuICAgICAgICAvLyBmb3JjZSB0aGUgZXhwcmVzc2lvbiBpbnRvIGEgc3RhdGVtZW50IHNvIHRoYXRcbiAgICAgICAgLy8gaXQgYWx3YXlzIGR5bmFtaWNhbGx5IHJlc29sdmVzIHRoZSBtZXRob2QgdG8gY2FsbCAoIzI2NzApXG4gICAgICAgIC8vIGtpbmRhIHVnbHkgaGFjaywgYnV0IGRvZXMgdGhlIGpvYi5cbiAgICAgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcbiAgICAgICAgaWYgKGlzU2ltcGxlUGF0aCh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSArPSAnLmFwcGx5KHRoaXMsICRhcmd1bWVudHMpJztcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVyID0gKHZtLl9zY29wZSB8fCB2bS5fY29udGV4dCkuJGV2YWwodmFsdWUsIHRydWUpO1xuICAgICAgICBoYW5kbGVyLl9mcm9tUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgdm0uJG9uKG5hbWUucmVwbGFjZShldmVudFJFKSwgaGFuZGxlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGNhbGxiYWNrcyBmb3Igb3B0aW9uIGV2ZW50cyBhbmQgd2F0Y2hlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyQ2FsbGJhY2tzKHZtLCBhY3Rpb24sIGhhc2gpIHtcbiAgICBpZiAoIWhhc2gpIHJldHVybjtcbiAgICB2YXIgaGFuZGxlcnMsIGtleSwgaSwgajtcbiAgICBmb3IgKGtleSBpbiBoYXNoKSB7XG4gICAgICBoYW5kbGVycyA9IGhhc2hba2V5XTtcbiAgICAgIGlmIChpc0FycmF5KGhhbmRsZXJzKSkge1xuICAgICAgICBmb3IgKGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gcmVnaXN0ZXIgYW4gZXZlbnQvd2F0Y2ggY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd8T2JqZWN0fSBoYW5kbGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2YgaGFuZGxlcjtcbiAgICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdm1bYWN0aW9uXShrZXksIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHZhciBtZXRob2RzID0gdm0uJG9wdGlvbnMubWV0aG9kcztcbiAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzICYmIG1ldGhvZHNbaGFuZGxlcl07XG4gICAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgIHZtW2FjdGlvbl0oa2V5LCBtZXRob2QsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdVbmtub3duIG1ldGhvZDogXCInICsgaGFuZGxlciArICdcIiB3aGVuICcgKyAncmVnaXN0ZXJpbmcgY2FsbGJhY2sgZm9yICcgKyBhY3Rpb24gKyAnOiBcIicgKyBrZXkgKyAnXCIuJywgdm0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaGFuZGxlciAmJiB0eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLmhhbmRsZXIsIGhhbmRsZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCByZWN1cnNpdmUgYXR0YWNoZWQvZGV0YWNoZWQgY2FsbHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdERPTUhvb2tzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJG9uKCdob29rOmF0dGFjaGVkJywgb25BdHRhY2hlZCk7XG4gICAgdGhpcy4kb24oJ2hvb2s6ZGV0YWNoZWQnLCBvbkRldGFjaGVkKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBhdHRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG9uQXR0YWNoZWQoKSB7XG4gICAgaWYgKCF0aGlzLl9pc0F0dGFjaGVkKSB7XG4gICAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbEF0dGFjaCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdG9yIHRvIGNhbGwgYXR0YWNoZWQgaG9va1xuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FsbEF0dGFjaChjaGlsZCkge1xuICAgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGRldGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cbiAgICovXG5cbiAgZnVuY3Rpb24gb25EZXRhY2hlZCgpIHtcbiAgICBpZiAodGhpcy5faXNBdHRhY2hlZCkge1xuICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IGZhbHNlO1xuICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsRGV0YWNoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0b3IgdG8gY2FsbCBkZXRhY2hlZCBob29rXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICAgKi9cblxuICBmdW5jdGlvbiBjYWxsRGV0YWNoKGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYWxsIGhhbmRsZXJzIGZvciBhIGhvb2tcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGhvb2tcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuICAgIHRoaXMuJGVtaXQoJ3ByZS1ob29rOicgKyBob29rKTtcbiAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLiRvcHRpb25zW2hvb2tdO1xuICAgIGlmIChoYW5kbGVycykge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgaGFuZGxlcnNbaV0uY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy4kZW1pdCgnaG9vazonICsgaG9vayk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG5vb3AkMSgpIHt9XG5cbi8qKlxuICogQSBkaXJlY3RpdmUgbGlua3MgYSBET00gZWxlbWVudCB3aXRoIGEgcGllY2Ugb2YgZGF0YSxcbiAqIHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyBhbiBleHByZXNzaW9uLlxuICogSXQgcmVnaXN0ZXJzIGEgd2F0Y2hlciB3aXRoIHRoZSBleHByZXNzaW9uIGFuZCBjYWxsc1xuICogdGhlIERPTSB1cGRhdGUgZnVuY3Rpb24gd2hlbiBhIGNoYW5nZSBpcyB0cmlnZ2VyZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3JcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IG5hbWVcbiAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IGRlZlxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gZXhwcmVzc2lvblxuICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtmaWx0ZXJzXVxuICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW21vZGlmaWVyc11cbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsaXRlcmFsXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhdHRyXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhcmdcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IHJhd1xuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gW3JlZl1cbiAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbaW50ZXJwXVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtoYXNPbmVUaW1lXVxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge05vZGV9IGVsXG4gKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERpcmVjdGl2ZShkZXNjcmlwdG9yLCB2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gIHRoaXMudm0gPSB2bTtcbiAgdGhpcy5lbCA9IGVsO1xuICAvLyBjb3B5IGRlc2NyaXB0b3IgcHJvcGVydGllc1xuICB0aGlzLmRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yO1xuICB0aGlzLm5hbWUgPSBkZXNjcmlwdG9yLm5hbWU7XG4gIHRoaXMuZXhwcmVzc2lvbiA9IGRlc2NyaXB0b3IuZXhwcmVzc2lvbjtcbiAgdGhpcy5hcmcgPSBkZXNjcmlwdG9yLmFyZztcbiAgdGhpcy5tb2RpZmllcnMgPSBkZXNjcmlwdG9yLm1vZGlmaWVycztcbiAgdGhpcy5maWx0ZXJzID0gZGVzY3JpcHRvci5maWx0ZXJzO1xuICB0aGlzLmxpdGVyYWwgPSB0aGlzLm1vZGlmaWVycyAmJiB0aGlzLm1vZGlmaWVycy5saXRlcmFsO1xuICAvLyBwcml2YXRlXG4gIHRoaXMuX2xvY2tlZCA9IGZhbHNlO1xuICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuICB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuICAvLyBsaW5rIGNvbnRleHRcbiAgdGhpcy5faG9zdCA9IGhvc3Q7XG4gIHRoaXMuX3Njb3BlID0gc2NvcGU7XG4gIHRoaXMuX2ZyYWcgPSBmcmFnO1xuICAvLyBzdG9yZSBkaXJlY3RpdmVzIG9uIG5vZGUgaW4gZGV2IG1vZGVcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzID0gdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgfHwgW107XG4gICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMucHVzaCh0aGlzKTtcbiAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIGRpcmVjdGl2ZSwgbWl4aW4gZGVmaW5pdGlvbiBwcm9wZXJ0aWVzLFxuICogc2V0dXAgdGhlIHdhdGNoZXIsIGNhbGwgZGVmaW5pdGlvbiBiaW5kKCkgYW5kIHVwZGF0ZSgpXG4gKiBpZiBwcmVzZW50LlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX2JpbmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBuYW1lID0gdGhpcy5uYW1lO1xuICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcblxuICAvLyByZW1vdmUgYXR0cmlidXRlXG4gIGlmICgobmFtZSAhPT0gJ2Nsb2FrJyB8fCB0aGlzLnZtLl9pc0NvbXBpbGVkKSAmJiB0aGlzLmVsICYmIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKSB7XG4gICAgdmFyIGF0dHIgPSBkZXNjcmlwdG9yLmF0dHIgfHwgJ3YtJyArIG5hbWU7XG4gICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gIH1cblxuICAvLyBjb3B5IGRlZiBwcm9wZXJ0aWVzXG4gIHZhciBkZWYgPSBkZXNjcmlwdG9yLmRlZjtcbiAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLnVwZGF0ZSA9IGRlZjtcbiAgfSBlbHNlIHtcbiAgICBleHRlbmQodGhpcywgZGVmKTtcbiAgfVxuXG4gIC8vIHNldHVwIGRpcmVjdGl2ZSBwYXJhbXNcbiAgdGhpcy5fc2V0dXBQYXJhbXMoKTtcblxuICAvLyBpbml0aWFsIGJpbmRcbiAgaWYgKHRoaXMuYmluZCkge1xuICAgIHRoaXMuYmluZCgpO1xuICB9XG4gIHRoaXMuX2JvdW5kID0gdHJ1ZTtcblxuICBpZiAodGhpcy5saXRlcmFsKSB7XG4gICAgdGhpcy51cGRhdGUgJiYgdGhpcy51cGRhdGUoZGVzY3JpcHRvci5yYXcpO1xuICB9IGVsc2UgaWYgKCh0aGlzLmV4cHJlc3Npb24gfHwgdGhpcy5tb2RpZmllcnMpICYmICh0aGlzLnVwZGF0ZSB8fCB0aGlzLnR3b1dheSkgJiYgIXRoaXMuX2NoZWNrU3RhdGVtZW50KCkpIHtcbiAgICAvLyB3cmFwcGVkIHVwZGF0ZXIgZm9yIGNvbnRleHRcbiAgICB2YXIgZGlyID0gdGhpcztcbiAgICBpZiAodGhpcy51cGRhdGUpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuICAgICAgICBpZiAoIWRpci5fbG9ja2VkKSB7XG4gICAgICAgICAgZGlyLnVwZGF0ZSh2YWwsIG9sZFZhbCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IG5vb3AkMTtcbiAgICB9XG4gICAgdmFyIHByZVByb2Nlc3MgPSB0aGlzLl9wcmVQcm9jZXNzID8gYmluZCh0aGlzLl9wcmVQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG4gICAgdmFyIHBvc3RQcm9jZXNzID0gdGhpcy5fcG9zdFByb2Nlc3MgPyBiaW5kKHRoaXMuX3Bvc3RQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG4gICAgdmFyIHdhdGNoZXIgPSB0aGlzLl93YXRjaGVyID0gbmV3IFdhdGNoZXIodGhpcy52bSwgdGhpcy5leHByZXNzaW9uLCB0aGlzLl91cGRhdGUsIC8vIGNhbGxiYWNrXG4gICAge1xuICAgICAgZmlsdGVyczogdGhpcy5maWx0ZXJzLFxuICAgICAgdHdvV2F5OiB0aGlzLnR3b1dheSxcbiAgICAgIGRlZXA6IHRoaXMuZGVlcCxcbiAgICAgIHByZVByb2Nlc3M6IHByZVByb2Nlc3MsXG4gICAgICBwb3N0UHJvY2VzczogcG9zdFByb2Nlc3MsXG4gICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICB9KTtcbiAgICAvLyB2LW1vZGVsIHdpdGggaW5pdGFsIGlubGluZSB2YWx1ZSBuZWVkIHRvIHN5bmMgYmFjayB0b1xuICAgIC8vIG1vZGVsIGluc3RlYWQgb2YgdXBkYXRlIHRvIERPTSBvbiBpbml0LiBUaGV5IHdvdWxkXG4gICAgLy8gc2V0IHRoZSBhZnRlckJpbmQgaG9vayB0byBpbmRpY2F0ZSB0aGF0LlxuICAgIGlmICh0aGlzLmFmdGVyQmluZCkge1xuICAgICAgdGhpcy5hZnRlckJpbmQoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudXBkYXRlKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh3YXRjaGVyLnZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogU2V0dXAgYWxsIHBhcmFtIGF0dHJpYnV0ZXMsIGUuZy4gdHJhY2stYnksXG4gKiB0cmFuc2l0aW9uLW1vZGUsIGV0Yy4uLlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1zID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMucGFyYW1zKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcztcbiAgLy8gc3dhcCB0aGUgcGFyYW1zIGFycmF5IHdpdGggYSBmcmVzaCBvYmplY3QuXG4gIHRoaXMucGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIGkgPSBwYXJhbXMubGVuZ3RoO1xuICB2YXIga2V5LCB2YWwsIG1hcHBlZEtleTtcbiAgd2hpbGUgKGktLSkge1xuICAgIGtleSA9IGh5cGhlbmF0ZShwYXJhbXNbaV0pO1xuICAgIG1hcHBlZEtleSA9IGNhbWVsaXplKGtleSk7XG4gICAgdmFsID0gZ2V0QmluZEF0dHIodGhpcy5lbCwga2V5KTtcbiAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgIC8vIGR5bmFtaWNcbiAgICAgIHRoaXMuX3NldHVwUGFyYW1XYXRjaGVyKG1hcHBlZEtleSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc3RhdGljXG4gICAgICB2YWwgPSBnZXRBdHRyKHRoaXMuZWwsIGtleSk7XG4gICAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXJhbXNbbWFwcGVkS2V5XSA9IHZhbCA9PT0gJycgPyB0cnVlIDogdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTZXR1cCBhIHdhdGNoZXIgZm9yIGEgZHluYW1pYyBwYXJhbS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwcmVzc2lvblxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1XYXRjaGVyID0gZnVuY3Rpb24gKGtleSwgZXhwcmVzc2lvbikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgdmFyIHVud2F0Y2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHdhdGNoKGV4cHJlc3Npb24sIGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuICAgIHNlbGYucGFyYW1zW2tleV0gPSB2YWw7XG4gICAgLy8gc2luY2Ugd2UgYXJlIGluIGltbWVkaWF0ZSBtb2RlLFxuICAgIC8vIG9ubHkgY2FsbCB0aGUgcGFyYW0gY2hhbmdlIGNhbGxiYWNrcyBpZiB0aGlzIGlzIG5vdCB0aGUgZmlyc3QgdXBkYXRlLlxuICAgIGlmIChjYWxsZWQpIHtcbiAgICAgIHZhciBjYiA9IHNlbGYucGFyYW1XYXRjaGVycyAmJiBzZWxmLnBhcmFtV2F0Y2hlcnNba2V5XTtcbiAgICAgIGlmIChjYikge1xuICAgICAgICBjYi5jYWxsKHNlbGYsIHZhbCwgb2xkVmFsKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBpbW1lZGlhdGU6IHRydWUsXG4gICAgdXNlcjogZmFsc2VcbiAgfSk7KHRoaXMuX3BhcmFtVW53YXRjaEZucyB8fCAodGhpcy5fcGFyYW1VbndhdGNoRm5zID0gW10pKS5wdXNoKHVud2F0Y2gpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZGlyZWN0aXZlIGlzIGEgZnVuY3Rpb24gY2FsbGVyXG4gKiBhbmQgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBjYWxsYWJsZSBvbmUuIElmIGJvdGggdHJ1ZSxcbiAqIHdlIHdyYXAgdXAgdGhlIGV4cHJlc3Npb24gYW5kIHVzZSBpdCBhcyB0aGUgZXZlbnRcbiAqIGhhbmRsZXIuXG4gKlxuICogZS5nLiBvbi1jbGljaz1cImErK1wiXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9jaGVja1N0YXRlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLmV4cHJlc3Npb247XG4gIGlmIChleHByZXNzaW9uICYmIHRoaXMuYWNjZXB0U3RhdGVtZW50ICYmICFpc1NpbXBsZVBhdGgoZXhwcmVzc2lvbikpIHtcbiAgICB2YXIgZm4gPSBwYXJzZUV4cHJlc3Npb24oZXhwcmVzc2lvbikuZ2V0O1xuICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG4gICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGUpIHtcbiAgICAgIHNjb3BlLiRldmVudCA9IGU7XG4gICAgICBmbi5jYWxsKHNjb3BlLCBzY29wZSk7XG4gICAgICBzY29wZS4kZXZlbnQgPSBudWxsO1xuICAgIH07XG4gICAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgICAgaGFuZGxlciA9IHNjb3BlLl9hcHBseUZpbHRlcnMoaGFuZGxlciwgbnVsbCwgdGhpcy5maWx0ZXJzKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGUoaGFuZGxlcik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cbi8qKlxuICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cbiAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0d28td2F5IGRpcmVjdGl2ZXNcbiAqIGUuZy4gdi1tb2RlbC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcHVibGljXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKHRoaXMudHdvV2F5KSB7XG4gICAgdGhpcy5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fd2F0Y2hlci5zZXQodmFsdWUpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB3YXJuKCdEaXJlY3RpdmUuc2V0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgdHdvV2F5JyArICdkaXJlY3RpdmVzLicpO1xuICB9XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgYSBmdW5jdGlvbiB3aGlsZSBwcmV2ZW50aW5nIHRoYXQgZnVuY3Rpb24gZnJvbVxuICogdHJpZ2dlcmluZyB1cGRhdGVzIG9uIHRoaXMgZGlyZWN0aXZlIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fd2l0aExvY2sgPSBmdW5jdGlvbiAoZm4pIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBzZWxmLl9sb2NrZWQgPSB0cnVlO1xuICBmbi5jYWxsKHNlbGYpO1xuICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5fbG9ja2VkID0gZmFsc2U7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdGhhdCBhdHRhY2hlcyBhIERPTSBldmVudCBsaXN0ZW5lclxuICogdG8gdGhlIGRpcmVjdGl2ZSBlbGVtZW50IGFuZCBhdXRvbWV0aWNhbGx5IHRlYXJzIGl0IGRvd25cbiAqIGR1cmluZyB1bmJpbmQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpIHtcbiAgb24odGhpcy5lbCwgZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpOyh0aGlzLl9saXN0ZW5lcnMgfHwgKHRoaXMuX2xpc3RlbmVycyA9IFtdKSkucHVzaChbZXZlbnQsIGhhbmRsZXJdKTtcbn07XG5cbi8qKlxuICogVGVhcmRvd24gdGhlIHdhdGNoZXIgYW5kIGNhbGwgdW5iaW5kLlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3RlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5fYm91bmQpIHtcbiAgICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnVuYmluZCkge1xuICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3dhdGNoZXIpIHtcbiAgICAgIHRoaXMuX3dhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9XG4gICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICB2YXIgaTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBpID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgb2ZmKHRoaXMuZWwsIGxpc3RlbmVyc1tpXVswXSwgbGlzdGVuZXJzW2ldWzFdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHVud2F0Y2hGbnMgPSB0aGlzLl9wYXJhbVVud2F0Y2hGbnM7XG4gICAgaWYgKHVud2F0Y2hGbnMpIHtcbiAgICAgIGkgPSB1bndhdGNoRm5zLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdW53YXRjaEZuc1tpXSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG4gICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLnZtID0gdGhpcy5lbCA9IHRoaXMuX3dhdGNoZXIgPSB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBsaWZlY3ljbGVNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBVcGRhdGUgdi1yZWYgZm9yIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fdXBkYXRlUmVmID0gZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgIHZhciByZWYgPSB0aGlzLiRvcHRpb25zLl9yZWY7XG4gICAgaWYgKHJlZikge1xuICAgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy5fY29udGV4dCkuJHJlZnM7XG4gICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgIGlmIChyZWZzW3JlZl0gPT09IHRoaXMpIHtcbiAgICAgICAgICByZWZzW3JlZl0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWZzW3JlZl0gPSB0aGlzO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVHJhbnNjbHVkZSwgY29tcGlsZSBhbmQgbGluayBlbGVtZW50LlxuICAgKlxuICAgKiBJZiBhIHByZS1jb21waWxlZCBsaW5rZXIgaXMgYXZhaWxhYmxlLCB0aGF0IG1lYW5zIHRoZVxuICAgKiBwYXNzZWQgaW4gZWxlbWVudCB3aWxsIGJlIHByZS10cmFuc2NsdWRlZCBhbmQgY29tcGlsZWRcbiAgICogYXMgd2VsbCAtIGFsbCB3ZSBuZWVkIHRvIGRvIGlzIHRvIGNhbGwgdGhlIGxpbmtlci5cbiAgICpcbiAgICogT3RoZXJ3aXNlIHdlIG5lZWQgdG8gY2FsbCB0cmFuc2NsdWRlL2NvbXBpbGUvbGluayBoZXJlLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2NvbXBpbGUgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cbiAgICAvLyB0cmFuc2NsdWRlIGFuZCBpbml0IGVsZW1lbnRcbiAgICAvLyB0cmFuc2NsdWRlIGNhbiBwb3RlbnRpYWxseSByZXBsYWNlIG9yaWdpbmFsXG4gICAgLy8gc28gd2UgbmVlZCB0byBrZWVwIHJlZmVyZW5jZTsgdGhpcyBzdGVwIGFsc28gaW5qZWN0c1xuICAgIC8vIHRoZSB0ZW1wbGF0ZSBhbmQgY2FjaGVzIHRoZSBvcmlnaW5hbCBhdHRyaWJ1dGVzXG4gICAgLy8gb24gdGhlIGNvbnRhaW5lciBub2RlIGFuZCByZXBsYWNlciBub2RlLlxuICAgIHZhciBvcmlnaW5hbCA9IGVsO1xuICAgIGVsID0gdHJhbnNjbHVkZShlbCwgb3B0aW9ucyk7XG4gICAgdGhpcy5faW5pdEVsZW1lbnQoZWwpO1xuXG4gICAgLy8gaGFuZGxlIHYtcHJlIG9uIHJvb3Qgbm9kZSAoIzIwMjYpXG4gICAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gcm9vdCBpcyBhbHdheXMgY29tcGlsZWQgcGVyLWluc3RhbmNlLCBiZWNhdXNlXG4gICAgLy8gY29udGFpbmVyIGF0dHJzIGFuZCBwcm9wcyBjYW4gYmUgZGlmZmVyZW50IGV2ZXJ5IHRpbWUuXG4gICAgdmFyIGNvbnRleHRPcHRpb25zID0gdGhpcy5fY29udGV4dCAmJiB0aGlzLl9jb250ZXh0LiRvcHRpb25zO1xuICAgIHZhciByb290TGlua2VyID0gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKTtcblxuICAgIC8vIHJlc29sdmUgc2xvdCBkaXN0cmlidXRpb25cbiAgICByZXNvbHZlU2xvdHModGhpcywgb3B0aW9ucy5fY29udGVudCk7XG5cbiAgICAvLyBjb21waWxlIGFuZCBsaW5rIHRoZSByZXN0XG4gICAgdmFyIGNvbnRlbnRMaW5rRm47XG4gICAgdmFyIGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgIC8vIGNvbXBvbmVudCBjb21waWxhdGlvbiBjYW4gYmUgY2FjaGVkXG4gICAgLy8gYXMgbG9uZyBhcyBpdCdzIG5vdCB1c2luZyBpbmxpbmUtdGVtcGxhdGVcbiAgICBpZiAob3B0aW9ucy5fbGlua2VyQ2FjaGFibGUpIHtcbiAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlcjtcbiAgICAgIGlmICghY29udGVudExpbmtGbikge1xuICAgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXIgPSBjb21waWxlKGVsLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBsaW5rIHBoYXNlXG4gICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgcm9vdCB3aXRoIHByb3Agc2NvcGUhXG4gICAgdmFyIHJvb3RVbmxpbmtGbiA9IHJvb3RMaW5rZXIodGhpcywgZWwsIHRoaXMuX3Njb3BlKTtcbiAgICB2YXIgY29udGVudFVubGlua0ZuID0gY29udGVudExpbmtGbiA/IGNvbnRlbnRMaW5rRm4odGhpcywgZWwpIDogY29tcGlsZShlbCwgb3B0aW9ucykodGhpcywgZWwpO1xuXG4gICAgLy8gcmVnaXN0ZXIgY29tcG9zaXRlIHVubGluayBmdW5jdGlvblxuICAgIC8vIHRvIGJlIGNhbGxlZCBkdXJpbmcgaW5zdGFuY2UgZGVzdHJ1Y3Rpb25cbiAgICB0aGlzLl91bmxpbmtGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJvb3RVbmxpbmtGbigpO1xuICAgICAgLy8gcGFzc2luZyBkZXN0cm95aW5nOiB0cnVlIHRvIGF2b2lkIHNlYXJjaGluZyBhbmRcbiAgICAgIC8vIHNwbGljaW5nIHRoZSBkaXJlY3RpdmVzXG4gICAgICBjb250ZW50VW5saW5rRm4odHJ1ZSk7XG4gICAgfTtcblxuICAgIC8vIGZpbmFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcbiAgICAgIHJlcGxhY2Uob3JpZ2luYWwsIGVsKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc0NvbXBpbGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsSG9vaygnY29tcGlsZWQnKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBpbnN0YW5jZSBlbGVtZW50LiBDYWxsZWQgaW4gdGhlIHB1YmxpY1xuICAgKiAkbW91bnQoKSBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAoaXNGcmFnbWVudChlbCkpIHtcbiAgICAgIHRoaXMuX2lzRnJhZ21lbnQgPSB0cnVlO1xuICAgICAgdGhpcy4kZWwgPSB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gZWwuZmlyc3RDaGlsZDtcbiAgICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gZWwubGFzdENoaWxkO1xuICAgICAgLy8gc2V0IHBlcnNpc3RlZCB0ZXh0IGFuY2hvcnMgdG8gZW1wdHlcbiAgICAgIGlmICh0aGlzLl9mcmFnbWVudFN0YXJ0Lm5vZGVUeXBlID09PSAzKSB7XG4gICAgICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQuZGF0YSA9IHRoaXMuX2ZyYWdtZW50RW5kLmRhdGEgPSAnJztcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ZyYWdtZW50ID0gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGVsID0gZWw7XG4gICAgfVxuICAgIHRoaXMuJGVsLl9fdnVlX18gPSB0aGlzO1xuICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVDb21waWxlJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbmQgYmluZCBhIGRpcmVjdGl2ZSB0byBhbiBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvciAtIHBhcnNlZCBkaXJlY3RpdmUgZGVzY3JpcHRvclxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgICAtIHRhcmdldCBub2RlXG4gICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9iaW5kRGlyID0gZnVuY3Rpb24gKGRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgdGhpcy5fZGlyZWN0aXZlcy5wdXNoKG5ldyBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdGhpcywgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVhcmRvd24gYW4gaW5zdGFuY2UsIHVub2JzZXJ2ZXMgdGhlIGRhdGEsIHVuYmluZCBhbGwgdGhlXG4gICAqIGRpcmVjdGl2ZXMsIHR1cm4gb2ZmIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzLCBldGMuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIC0gd2hldGhlciB0byByZW1vdmUgdGhlIERPTSBub2RlLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cCAtIGlmIHRydWUsIGRlZmVyIGNsZWFudXAgdG9cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBjYWxsZWQgbGF0ZXJcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuICAgIGlmICh0aGlzLl9pc0JlaW5nRGVzdHJveWVkKSB7XG4gICAgICBpZiAoIWRlZmVyQ2xlYW51cCkge1xuICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGRlc3Ryb3lSZWFkeTtcbiAgICB2YXIgcGVuZGluZ1JlbW92YWw7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy8gQ2xlYW51cCBzaG91bGQgYmUgY2FsbGVkIGVpdGhlciBzeW5jaHJvbm91c2x5IG9yIGFzeW5jaHJvbm95c2x5IGFzXG4gICAgLy8gY2FsbGJhY2sgb2YgdGhpcy4kcmVtb3ZlKCksIG9yIGlmIHJlbW92ZSBhbmQgZGVmZXJDbGVhbnVwIGFyZSBmYWxzZS5cbiAgICAvLyBJbiBhbnkgY2FzZSBpdCBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGFsbCBvdGhlciByZW1vdmluZywgdW5iaW5kaW5nIGFuZFxuICAgIC8vIHR1cm5pbmcgb2YgaXMgZG9uZVxuICAgIHZhciBjbGVhbnVwSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIGNsZWFudXBJZlBvc3NpYmxlKCkge1xuICAgICAgaWYgKGRlc3Ryb3lSZWFkeSAmJiAhcGVuZGluZ1JlbW92YWwgJiYgIWRlZmVyQ2xlYW51cCkge1xuICAgICAgICBzZWxmLl9jbGVhbnVwKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIHJlbW92ZSBET00gZWxlbWVudFxuICAgIGlmIChyZW1vdmUgJiYgdGhpcy4kZWwpIHtcbiAgICAgIHBlbmRpbmdSZW1vdmFsID0gdHJ1ZTtcbiAgICAgIHRoaXMuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBlbmRpbmdSZW1vdmFsID0gZmFsc2U7XG4gICAgICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlRGVzdHJveScpO1xuICAgIHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlO1xuICAgIHZhciBpO1xuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gcGFyZW50LiBvbmx5IG5lY2Vzc2FyeVxuICAgIC8vIGlmIHBhcmVudCBpcyBub3QgYmVpbmcgZGVzdHJveWVkIGFzIHdlbGwuXG4gICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcbiAgICBpZiAocGFyZW50ICYmICFwYXJlbnQuX2lzQmVpbmdEZXN0cm95ZWQpIHtcbiAgICAgIHBhcmVudC4kY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcbiAgICAgIC8vIHVucmVnaXN0ZXIgcmVmIChyZW1vdmU6IHRydWUpXG4gICAgICB0aGlzLl91cGRhdGVSZWYodHJ1ZSk7XG4gICAgfVxuICAgIC8vIGRlc3Ryb3kgYWxsIGNoaWxkcmVuLlxuICAgIGkgPSB0aGlzLiRjaGlsZHJlbi5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy4kY2hpbGRyZW5baV0uJGRlc3Ryb3koKTtcbiAgICB9XG4gICAgLy8gdGVhcmRvd24gcHJvcHNcbiAgICBpZiAodGhpcy5fcHJvcHNVbmxpbmtGbikge1xuICAgICAgdGhpcy5fcHJvcHNVbmxpbmtGbigpO1xuICAgIH1cbiAgICAvLyB0ZWFyZG93biBhbGwgZGlyZWN0aXZlcy4gdGhpcyBhbHNvIHRlYXJzZG93biBhbGxcbiAgICAvLyBkaXJlY3RpdmUtb3duZWQgd2F0Y2hlcnMuXG4gICAgaWYgKHRoaXMuX3VubGlua0ZuKSB7XG4gICAgICB0aGlzLl91bmxpbmtGbigpO1xuICAgIH1cbiAgICBpID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnRlYXJkb3duKCk7XG4gICAgfVxuICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgdG8gc2VsZiBvbiAkZWxcbiAgICBpZiAodGhpcy4kZWwpIHtcbiAgICAgIHRoaXMuJGVsLl9fdnVlX18gPSBudWxsO1xuICAgIH1cblxuICAgIGRlc3Ryb3lSZWFkeSA9IHRydWU7XG4gICAgY2xlYW51cElmUG9zc2libGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYW4gdXAgdG8gZW5zdXJlIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAgICogVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGxlYXZlIHRyYW5zaXRpb24gaWYgdGhlcmVcbiAgICogaXMgYW55LlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc0Rlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIG93bmVyIGZyYWdtZW50XG4gICAgLy8gZG8gaXQgaW4gY2xlYW51cCBzbyB0aGF0IHdlIGNhbiBjYWxsICRkZXN0cm95IHdpdGhcbiAgICAvLyBkZWZlciByaWdodCB3aGVuIGEgZnJhZ21lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZC5cbiAgICBpZiAodGhpcy5fZnJhZykge1xuICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICAvLyByZW1vdmUgcmVmZXJlbmNlIGZyb20gZGF0YSBvYlxuICAgIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLlxuICAgIGlmICh0aGlzLl9kYXRhICYmIHRoaXMuX2RhdGEuX19vYl9fKSB7XG4gICAgICB0aGlzLl9kYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcbiAgICB9XG4gICAgLy8gQ2xlYW4gdXAgcmVmZXJlbmNlcyB0byBwcml2YXRlIHByb3BlcnRpZXMgYW5kIG90aGVyXG4gICAgLy8gaW5zdGFuY2VzLiBwcmVzZXJ2ZSByZWZlcmVuY2UgdG8gX2RhdGEgc28gdGhhdCBwcm94eVxuICAgIC8vIGFjY2Vzc29ycyBzdGlsbCB3b3JrLiBUaGUgb25seSBwb3RlbnRpYWwgc2lkZSBlZmZlY3RcbiAgICAvLyBoZXJlIGlzIHRoYXQgbXV0YXRpbmcgdGhlIGluc3RhbmNlIGFmdGVyIGl0J3MgZGVzdHJveWVkXG4gICAgLy8gbWF5IGFmZmVjdCB0aGUgc3RhdGUgb2Ygb3RoZXIgY29tcG9uZW50cyB0aGF0IGFyZSBzdGlsbFxuICAgIC8vIG9ic2VydmluZyB0aGUgc2FtZSBvYmplY3QsIGJ1dCB0aGF0IHNlZW1zIHRvIGJlIGFcbiAgICAvLyByZWFzb25hYmxlIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgdXNlciByYXRoZXIgdGhhblxuICAgIC8vIGFsd2F5cyB0aHJvd2luZyBhbiBlcnJvciBvbiB0aGVtLlxuICAgIHRoaXMuJGVsID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kcm9vdCA9IHRoaXMuJGNoaWxkcmVuID0gdGhpcy5fd2F0Y2hlcnMgPSB0aGlzLl9jb250ZXh0ID0gdGhpcy5fc2NvcGUgPSB0aGlzLl9kaXJlY3RpdmVzID0gbnVsbDtcbiAgICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi5cbiAgICB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgdGhpcy5fY2FsbEhvb2soJ2Rlc3Ryb3llZCcpO1xuICAgIC8vIHR1cm4gb2ZmIGFsbCBpbnN0YW5jZSBsaXN0ZW5lcnMuXG4gICAgdGhpcy4kb2ZmKCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG1pc2NNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBBcHBseSBhIGxpc3Qgb2YgZmlsdGVyIChkZXNjcmlwdG9ycykgdG8gYSB2YWx1ZS5cbiAgICogVXNpbmcgcGxhaW4gZm9yIGxvb3BzIGhlcmUgYmVjYXVzZSB0aGlzIHdpbGwgYmUgY2FsbGVkIGluXG4gICAqIHRoZSBnZXR0ZXIgb2YgYW55IHdhdGNoZXIgd2l0aCBmaWx0ZXJzIHNvIGl0IGlzIHZlcnlcbiAgICogcGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7Kn0gW29sZFZhbHVlXVxuICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gd3JpdGVcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fYXBwbHlGaWx0ZXJzID0gZnVuY3Rpb24gKHZhbHVlLCBvbGRWYWx1ZSwgZmlsdGVycywgd3JpdGUpIHtcbiAgICB2YXIgZmlsdGVyLCBmbiwgYXJncywgYXJnLCBvZmZzZXQsIGksIGwsIGosIGs7XG4gICAgZm9yIChpID0gMCwgbCA9IGZpbHRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmaWx0ZXIgPSBmaWx0ZXJzW3dyaXRlID8gbCAtIGkgLSAxIDogaV07XG4gICAgICBmbiA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlci5uYW1lLCB0cnVlKTtcbiAgICAgIGlmICghZm4pIGNvbnRpbnVlO1xuICAgICAgZm4gPSB3cml0ZSA/IGZuLndyaXRlIDogZm4ucmVhZCB8fCBmbjtcbiAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIGNvbnRpbnVlO1xuICAgICAgYXJncyA9IHdyaXRlID8gW3ZhbHVlLCBvbGRWYWx1ZV0gOiBbdmFsdWVdO1xuICAgICAgb2Zmc2V0ID0gd3JpdGUgPyAyIDogMTtcbiAgICAgIGlmIChmaWx0ZXIuYXJncykge1xuICAgICAgICBmb3IgKGogPSAwLCBrID0gZmlsdGVyLmFyZ3MubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgYXJnID0gZmlsdGVyLmFyZ3Nbal07XG4gICAgICAgICAgYXJnc1tqICsgb2Zmc2V0XSA9IGFyZy5keW5hbWljID8gdGhpcy4kZ2V0KGFyZy52YWx1ZSkgOiBhcmcudmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmVzb2x2ZSBhIGNvbXBvbmVudCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGNvbXBvbmVudFxuICAgKiBpcyBkZWZpbmVkIG5vcm1hbGx5IG9yIHVzaW5nIGFuIGFzeW5jIGZhY3RvcnkgZnVuY3Rpb24uXG4gICAqIFJlc29sdmVzIHN5bmNocm9ub3VzbHkgaWYgYWxyZWFkeSByZXNvbHZlZCwgb3RoZXJ3aXNlXG4gICAqIHJlc29sdmVzIGFzeW5jaHJvbm91c2x5IGFuZCBjYWNoZXMgdGhlIHJlc29sdmVkXG4gICAqIGNvbnN0cnVjdG9yIG9uIHRoZSBmYWN0b3J5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICh2YWx1ZSwgY2IpIHtcbiAgICB2YXIgZmFjdG9yeTtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBmYWN0b3J5ID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZhY3RvcnkgPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2NvbXBvbmVudHMnLCB2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghZmFjdG9yeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBhc3luYyBjb21wb25lbnQgZmFjdG9yeVxuICAgIGlmICghZmFjdG9yeS5vcHRpb25zKSB7XG4gICAgICBpZiAoZmFjdG9yeS5yZXNvbHZlZCkge1xuICAgICAgICAvLyBjYWNoZWRcbiAgICAgICAgY2IoZmFjdG9yeS5yZXNvbHZlZCk7XG4gICAgICB9IGVsc2UgaWYgKGZhY3RvcnkucmVxdWVzdGVkKSB7XG4gICAgICAgIC8vIHBvb2wgY2FsbGJhY2tzXG4gICAgICAgIGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZhY3RvcnkucmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIGNicyA9IGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcyA9IFtjYl07XG4gICAgICAgIGZhY3RvcnkuY2FsbCh0aGlzLCBmdW5jdGlvbiByZXNvbHZlKHJlcykge1xuICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHJlcykpIHtcbiAgICAgICAgICAgIHJlcyA9IFZ1ZS5leHRlbmQocmVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY2FjaGUgcmVzb2x2ZWRcbiAgICAgICAgICBmYWN0b3J5LnJlc29sdmVkID0gcmVzO1xuICAgICAgICAgIC8vIGludm9rZSBjYWxsYmFja3NcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGNic1tpXShyZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50JyArICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gJzogJyArIHZhbHVlIDogJycpICsgJy4gJyArIChyZWFzb24gPyAnXFxuUmVhc29uOiAnICsgcmVhc29uIDogJycpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vcm1hbCBjb21wb25lbnRcbiAgICAgIGNiKGZhY3RvcnkpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIGZpbHRlclJFJDEgPSAvW158XVxcfFtefF0vO1xuXG5mdW5jdGlvbiBkYXRhQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGdldCA9IGZ1bmN0aW9uIChleHAsIGFzU3RhdGVtZW50KSB7XG4gICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHApO1xuICAgIGlmIChyZXMpIHtcbiAgICAgIGlmIChhc1N0YXRlbWVudCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZW1lbnRIYW5kbGVyKCkge1xuICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzLmdldC5jYWxsKHNlbGYsIHNlbGYpO1xuICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5nZXQuY2FsbCh0aGlzLCB0aGlzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG4gICAqIFRoZSBleHByZXNzaW9uIG11c3QgYmUgYSB2YWxpZCBsZWZ0LWhhbmRcbiAgICogZXhwcmVzc2lvbiBpbiBhbiBhc3NpZ25tZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJHNldCA9IGZ1bmN0aW9uIChleHAsIHZhbCkge1xuICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwLCB0cnVlKTtcbiAgICBpZiAocmVzICYmIHJlcy5zZXQpIHtcbiAgICAgIHJlcy5zZXQuY2FsbCh0aGlzLCB0aGlzLCB2YWwpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGVsZXRlIGEgcHJvcGVydHkgb24gdGhlIFZNXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuICAgIGRlbCh0aGlzLl9kYXRhLCBrZXkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXYXRjaCBhbiBleHByZXNzaW9uLCB0cmlnZ2VyIGNhbGxiYWNrIHdoZW4gaXRzXG4gICAqIHZhbHVlIGNoYW5nZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGltbWVkaWF0ZVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB1bndhdGNoRm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZhciBwYXJzZWQ7XG4gICAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnc3RyaW5nJykge1xuICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUoZXhwT3JGbik7XG4gICAgICBleHBPckZuID0gcGFyc2VkLmV4cHJlc3Npb247XG4gICAgfVxuICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCB7XG4gICAgICBkZWVwOiBvcHRpb25zICYmIG9wdGlvbnMuZGVlcCxcbiAgICAgIHN5bmM6IG9wdGlvbnMgJiYgb3B0aW9ucy5zeW5jLFxuICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuICAgICAgdXNlcjogIW9wdGlvbnMgfHwgb3B0aW9ucy51c2VyICE9PSBmYWxzZVxuICAgIH0pO1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaW1tZWRpYXRlKSB7XG4gICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVud2F0Y2hGbigpIHtcbiAgICAgIHdhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZSBhIHRleHQgZGlyZWN0aXZlLCBpbmNsdWRpbmcgZmlsdGVycy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZXZhbCA9IGZ1bmN0aW9uICh0ZXh0LCBhc1N0YXRlbWVudCkge1xuICAgIC8vIGNoZWNrIGZvciBmaWx0ZXJzLlxuICAgIGlmIChmaWx0ZXJSRSQxLnRlc3QodGV4dCkpIHtcbiAgICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZSh0ZXh0KTtcbiAgICAgIC8vIHRoZSBmaWx0ZXIgcmVnZXggY2hlY2sgbWlnaHQgZ2l2ZSBmYWxzZSBwb3NpdGl2ZVxuICAgICAgLy8gZm9yIHBpcGVzIGluc2lkZSBzdHJpbmdzLCBzbyBpdCdzIHBvc3NpYmxlIHRoYXRcbiAgICAgIC8vIHdlIGRvbid0IGdldCBhbnkgZmlsdGVycyBoZXJlXG4gICAgICB2YXIgdmFsID0gdGhpcy4kZ2V0KGRpci5leHByZXNzaW9uLCBhc1N0YXRlbWVudCk7XG4gICAgICByZXR1cm4gZGlyLmZpbHRlcnMgPyB0aGlzLl9hcHBseUZpbHRlcnModmFsLCBudWxsLCBkaXIuZmlsdGVycykgOiB2YWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vIGZpbHRlclxuICAgICAgcmV0dXJuIHRoaXMuJGdldCh0ZXh0LCBhc1N0YXRlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZSBhIHBpZWNlIG9mIHRlbXBsYXRlIHRleHQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQodGV4dCk7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICBpZiAodG9rZW5zKSB7XG4gICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdm0uJGV2YWwodG9rZW5zWzBdLnZhbHVlKSArICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICAgcmV0dXJuIHRva2VuLnRhZyA/IHZtLiRldmFsKHRva2VuLnZhbHVlKSA6IHRva2VuLnZhbHVlO1xuICAgICAgICB9KS5qb2luKCcnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBMb2cgaW5zdGFuY2UgZGF0YSBhcyBhIHBsYWluIEpTIG9iamVjdFxuICAgKiBzbyB0aGF0IGl0IGlzIGVhc2llciB0byBpbnNwZWN0IGluIGNvbnNvbGUuXG4gICAqIFRoaXMgbWV0aG9kIGFzc3VtZXMgY29uc29sZSBpcyBhdmFpbGFibGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcGF0aF1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbG9nID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICB2YXIgZGF0YSA9IHBhdGggPyBnZXRQYXRoKHRoaXMuX2RhdGEsIHBhdGgpIDogdGhpcy5fZGF0YTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgZGF0YSA9IGNsZWFuKGRhdGEpO1xuICAgIH1cbiAgICAvLyBpbmNsdWRlIGNvbXB1dGVkIGZpZWxkc1xuICAgIGlmICghcGF0aCkge1xuICAgICAgdmFyIGtleTtcbiAgICAgIGZvciAoa2V5IGluIHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQpIHtcbiAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9wcm9wcykge1xuICAgICAgICBmb3IgKGtleSBpbiB0aGlzLl9wcm9wcykge1xuICAgICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFwiY2xlYW5cIiBhIGdldHRlci9zZXR0ZXIgY29udmVydGVkIG9iamVjdCBpbnRvIGEgcGxhaW5cbiAgICogb2JqZWN0IGNvcHkuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAtIG9ialxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNsZWFuKG9iaikge1xuICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRvbUFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBvbi1pbnN0YW5jZSBuZXh0VGljay4gVGhlIGNhbGxiYWNrIGlzXG4gICAqIGF1dG8tYm91bmQgdG8gdGhlIGluc3RhbmNlLCBhbmQgdGhpcyBhdm9pZHMgY29tcG9uZW50XG4gICAqIG1vZHVsZXMgaGF2aW5nIHRvIHJlbHkgb24gdGhlIGdsb2JhbCBWdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG5leHRUaWNrID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgbmV4dFRpY2soZm4sIHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBcHBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRhcHBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGFwcGVuZCwgYXBwZW5kV2l0aFRyYW5zaXRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcmVwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kcHJlcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICBpZiAodGFyZ2V0Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5maXJzdENoaWxkLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnNlcnQgaW5zdGFuY2UgYmVmb3JlIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYmVmb3JlID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYmVmb3JlV2l0aENiLCBiZWZvcmVXaXRoVHJhbnNpdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydCBpbnN0YW5jZSBhZnRlciB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGFmdGVyID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG4gICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0Lm5leHRTaWJsaW5nLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQucGFyZW50Tm9kZSwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBpbnN0YW5jZSBmcm9tIERPTVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlID0gZnVuY3Rpb24gKGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIGlmICghdGhpcy4kZWwucGFyZW50Tm9kZSkge1xuICAgICAgcmV0dXJuIGNiICYmIGNiKCk7XG4gICAgfVxuICAgIHZhciBpbkRvY3VtZW50ID0gdGhpcy5faXNBdHRhY2hlZCAmJiBpbkRvYyh0aGlzLiRlbCk7XG4gICAgLy8gaWYgd2UgYXJlIG5vdCBpbiBkb2N1bWVudCwgbm8gbmVlZCB0byBjaGVja1xuICAgIC8vIGZvciB0cmFuc2l0aW9uc1xuICAgIGlmICghaW5Eb2N1bWVudCkgd2l0aFRyYW5zaXRpb24gPSBmYWxzZTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHJlYWxDYiA9IGZ1bmN0aW9uIHJlYWxDYigpIHtcbiAgICAgIGlmIChpbkRvY3VtZW50KSBzZWxmLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgICAgIGlmIChjYikgY2IoKTtcbiAgICB9O1xuICAgIGlmICh0aGlzLl9pc0ZyYWdtZW50KSB7XG4gICAgICByZW1vdmVOb2RlUmFuZ2UodGhpcy5fZnJhZ21lbnRTdGFydCwgdGhpcy5fZnJhZ21lbnRFbmQsIHRoaXMsIHRoaXMuX2ZyYWdtZW50LCByZWFsQ2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgPyByZW1vdmVXaXRoQ2IgOiByZW1vdmVXaXRoVHJhbnNpdGlvbjtcbiAgICAgIG9wKHRoaXMuJGVsLCB0aGlzLCByZWFsQ2IpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2hhcmVkIERPTSBpbnNlcnRpb24gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDEgLSBvcCBmb3Igbm9uLXRyYW5zaXRpb24gaW5zZXJ0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMiAtIG9wIGZvciB0cmFuc2l0aW9uIGluc2VydFxuICAgKiBAcmV0dXJuIHZtXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGluc2VydCh2bSwgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIG9wMSwgb3AyKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICB2YXIgdGFyZ2V0SXNEZXRhY2hlZCA9ICFpbkRvYyh0YXJnZXQpO1xuICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSB8fCB0YXJnZXRJc0RldGFjaGVkID8gb3AxIDogb3AyO1xuICAgIHZhciBzaG91bGRDYWxsSG9vayA9ICF0YXJnZXRJc0RldGFjaGVkICYmICF2bS5faXNBdHRhY2hlZCAmJiAhaW5Eb2Modm0uJGVsKTtcbiAgICBpZiAodm0uX2lzRnJhZ21lbnQpIHtcbiAgICAgIG1hcE5vZGVSYW5nZSh2bS5fZnJhZ21lbnRTdGFydCwgdm0uX2ZyYWdtZW50RW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBvcChub2RlLCB0YXJnZXQsIHZtKTtcbiAgICAgIH0pO1xuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3Aodm0uJGVsLCB0YXJnZXQsIHZtLCBjYik7XG4gICAgfVxuICAgIGlmIChzaG91bGRDYWxsSG9vaykge1xuICAgICAgdm0uX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gdm07XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgZm9yIHNlbGVjdG9yc1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiBxdWVyeShlbCkge1xuICAgIHJldHVybiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgOiBlbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBlbmQgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBhcHBlbmQoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0QmVmb3JlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gYmVmb3JlV2l0aENiKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVtb3ZlV2l0aENiKGVsLCB2bSwgY2IpIHtcbiAgICByZW1vdmUoZWwpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBldmVudHNBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9uID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgICh0aGlzLl9ldmVudHNbZXZlbnRdIHx8ICh0aGlzLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcbiAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXG4gICAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRvbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBmdW5jdGlvbiBvbigpIHtcbiAgICAgIHNlbGYuJG9mZihldmVudCwgb24pO1xuICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgb24uZm4gPSBmbjtcbiAgICB0aGlzLiRvbihldmVudCwgb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciBgZXZlbnRgIG9yIGFsbFxuICAgKiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9mZiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgY2JzO1xuICAgIC8vIGFsbFxuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuJHBhcmVudCkge1xuICAgICAgICBmb3IgKGV2ZW50IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG4gICAgICAgICAgaWYgKGNicykge1xuICAgICAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gc3BlY2lmaWMgZXZlbnRcbiAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICAgIGlmICghY2JzKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcbiAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBudWxsO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIHNwZWNpZmljIGhhbmRsZXJcbiAgICB2YXIgY2I7XG4gICAgdmFyIGkgPSBjYnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGNiID0gY2JzW2ldO1xuICAgICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcbiAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLTEpO1xuICAgICAgICBjYnMuc3BsaWNlKGksIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYW4gZXZlbnQgb24gc2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBzaG91bGRQcm9wYWdhdGVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG4gICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcbiAgICB2YXIgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gaXNTb3VyY2UgfHwgIWNicztcbiAgICBpZiAoY2JzKSB7XG4gICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcbiAgICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBoYWNreSBzb2x1dGlvbiB0byB0aGUgcXVlc3Rpb24gcmFpc2VkXG4gICAgICAvLyBpbiAjMjEwMjogZm9yIGFuIGlubGluZSBjb21wb25lbnQgbGlzdGVuZXIgbGlrZSA8Y29tcCBAdGVzdD1cImRvVGhpc1wiPixcbiAgICAgIC8vIHRoZSBwcm9wYWdhdGlvbiBoYW5kbGluZyBpcyBzb21ld2hhdCBicm9rZW4uIFRoZXJlZm9yZSB3ZVxuICAgICAgLy8gbmVlZCB0byB0cmVhdCB0aGVzZSBpbmxpbmUgY2FsbGJhY2tzIGRpZmZlcmVudGx5LlxuICAgICAgdmFyIGhhc1BhcmVudENicyA9IGlzU291cmNlICYmIGNicy5zb21lKGZ1bmN0aW9uIChjYikge1xuICAgICAgICByZXR1cm4gY2IuX2Zyb21QYXJlbnQ7XG4gICAgICB9KTtcbiAgICAgIGlmIChoYXNQYXJlbnRDYnMpIHtcbiAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgY2IgPSBjYnNbaV07XG4gICAgICAgIHZhciByZXMgPSBjYi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgaWYgKHJlcyA9PT0gdHJ1ZSAmJiAoIWhhc1BhcmVudENicyB8fCBjYi5fZnJvbVBhcmVudCkpIHtcbiAgICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaG91bGRQcm9wYWdhdGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlY3Vyc2l2ZWx5IGJyb2FkY2FzdCBhbiBldmVudCB0byBhbGwgY2hpbGRyZW4gaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG4gICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYnJvYWRjYXN0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcbiAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuICAgIC8vIGlmIG5vIGNoaWxkIGhhcyByZWdpc3RlcmVkIGZvciB0aGlzIGV2ZW50LFxuICAgIC8vIHRoZW4gdGhlcmUncyBubyBuZWVkIHRvIGJyb2FkY2FzdC5cbiAgICBpZiAoIXRoaXMuX2V2ZW50c0NvdW50W2V2ZW50XSkgcmV0dXJuO1xuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuJGNoaWxkcmVuO1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgIGlmIChpc1NvdXJjZSkge1xuICAgICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcbiAgICAgIC8vIG9uIGNoaWxkcmVuXG4gICAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBjaGlsZC4kZW1pdC5hcHBseShjaGlsZCwgYXJncyk7XG4gICAgICBpZiAoc2hvdWxkUHJvcGFnYXRlKSB7XG4gICAgICAgIGNoaWxkLiRicm9hZGNhc3QuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgcHJvcGFnYXRlIGFuIGV2ZW50IHVwIHRoZSBwYXJlbnQgY2hhaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGRpc3BhdGNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IHRoaXMuJGVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoIXNob3VsZFByb3BhZ2F0ZSkgcmV0dXJuO1xuICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcbiAgICAvLyBvbiBwYXJlbnRzXG4gICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHBhcmVudC4kZW1pdC5hcHBseShwYXJlbnQsIGFyZ3MpO1xuICAgICAgcGFyZW50ID0gc2hvdWxkUHJvcGFnYXRlID8gcGFyZW50LiRwYXJlbnQgOiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogTW9kaWZ5IHRoZSBsaXN0ZW5lciBjb3VudHMgb24gYWxsIHBhcmVudHMuXG4gICAqIFRoaXMgYm9va2tlZXBpbmcgYWxsb3dzICRicm9hZGNhc3QgdG8gcmV0dXJuIGVhcmx5IHdoZW5cbiAgICogbm8gY2hpbGQgaGFzIGxpc3RlbmVkIHRvIGEgY2VydGFpbiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnRcbiAgICovXG5cbiAgdmFyIGhvb2tSRSA9IC9eaG9vazovO1xuICBmdW5jdGlvbiBtb2RpZnlMaXN0ZW5lckNvdW50KHZtLCBldmVudCwgY291bnQpIHtcbiAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDtcbiAgICAvLyBob29rcyBkbyBub3QgZ2V0IGJyb2FkY2FzdGVkIHNvIG5vIG5lZWRcbiAgICAvLyB0byBkbyBib29ra2VlcGluZyBmb3IgdGhlbVxuICAgIGlmICghcGFyZW50IHx8ICFjb3VudCB8fCBob29rUkUudGVzdChldmVudCkpIHJldHVybjtcbiAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICBwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSA9IChwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSB8fCAwKSArIGNvdW50O1xuICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGxpZmVjeWNsZUFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBTZXQgaW5zdGFuY2UgdGFyZ2V0IGVsZW1lbnQgYW5kIGtpY2sgb2ZmIHRoZSBjb21waWxhdGlvblxuICAgKiBwcm9jZXNzLiBUaGUgcGFzc2VkIGluIGBlbGAgY2FuIGJlIGEgc2VsZWN0b3Igc3RyaW5nLCBhblxuICAgKiBleGlzdGluZyBFbGVtZW50LCBvciBhIERvY3VtZW50RnJhZ21lbnQgKGZvciBibG9ja1xuICAgKiBpbnN0YW5jZXMpLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudHxzdHJpbmd9IGVsXG4gICAqIEBwdWJsaWNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbW91bnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAodGhpcy5faXNDb21waWxlZCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCckbW91bnQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nLCB0aGlzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWwgPSBxdWVyeShlbCk7XG4gICAgaWYgKCFlbCkge1xuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB9XG4gICAgdGhpcy5fY29tcGlsZShlbCk7XG4gICAgdGhpcy5faW5pdERPTUhvb2tzKCk7XG4gICAgaWYgKGluRG9jKHRoaXMuJGVsKSkge1xuICAgICAgdGhpcy5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgICByZWFkeS5jYWxsKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRvbmNlKCdob29rOmF0dGFjaGVkJywgcmVhZHkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogTWFyayBhbiBpbnN0YW5jZSBhcyByZWFkeS5cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVhZHkoKSB7XG4gICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG4gICAgdGhpcy5faXNSZWFkeSA9IHRydWU7XG4gICAgdGhpcy5fY2FsbEhvb2soJ3JlYWR5Jyk7XG4gIH1cblxuICAvKipcbiAgICogVGVhcmRvd24gdGhlIGluc3RhbmNlLCBzaW1wbHkgZGVsZWdhdGUgdG8gdGhlIGludGVybmFsXG4gICAqIF9kZXN0cm95LlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG4gICAgdGhpcy5fZGVzdHJveShyZW1vdmUsIGRlZmVyQ2xlYW51cCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhcnRpYWxseSBjb21waWxlIGEgcGllY2Ugb2YgRE9NIGFuZCByZXR1cm4gYVxuICAgKiBkZWNvbXBpbGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kY29tcGlsZSA9IGZ1bmN0aW9uIChlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICByZXR1cm4gY29tcGlsZShlbCwgdGhpcy4kb3B0aW9ucywgdHJ1ZSkodGhpcywgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgZXhwb3NlZCBWdWUgY29uc3RydWN0b3IuXG4gKlxuICogQVBJIGNvbnZlbnRpb25zOlxuICogLSBwdWJsaWMgQVBJIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgJGBcbiAqIC0gaW50ZXJuYWwgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGBfYFxuICogLSBub24tcHJlZml4ZWQgcHJvcGVydGllcyBhcmUgYXNzdW1lZCB0byBiZSBwcm94aWVkIHVzZXJcbiAqICAgZGF0YS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBWdWUob3B0aW9ucykge1xuICB0aGlzLl9pbml0KG9wdGlvbnMpO1xufVxuXG4vLyBpbnN0YWxsIGludGVybmFsc1xuaW5pdE1peGluKFZ1ZSk7XG5zdGF0ZU1peGluKFZ1ZSk7XG5ldmVudHNNaXhpbihWdWUpO1xubGlmZWN5Y2xlTWl4aW4oVnVlKTtcbm1pc2NNaXhpbihWdWUpO1xuXG4vLyBpbnN0YWxsIGluc3RhbmNlIEFQSXNcbmRhdGFBUEkoVnVlKTtcbmRvbUFQSShWdWUpO1xuZXZlbnRzQVBJKFZ1ZSk7XG5saWZlY3ljbGVBUEkoVnVlKTtcblxudmFyIHNsb3QgPSB7XG5cbiAgcHJpb3JpdHk6IFNMT1QsXG4gIHBhcmFtczogWyduYW1lJ10sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyB0aGlzIHdhcyByZXNvbHZlZCBkdXJpbmcgY29tcG9uZW50IHRyYW5zY2x1c2lvblxuICAgIHZhciBuYW1lID0gdGhpcy5wYXJhbXMubmFtZSB8fCAnZGVmYXVsdCc7XG4gICAgdmFyIGNvbnRlbnQgPSB0aGlzLnZtLl9zbG90Q29udGVudHMgJiYgdGhpcy52bS5fc2xvdENvbnRlbnRzW25hbWVdO1xuICAgIGlmICghY29udGVudCB8fCAhY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgIHRoaXMuZmFsbGJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb21waWxlKGNvbnRlbnQuY2xvbmVOb2RlKHRydWUpLCB0aGlzLnZtLl9jb250ZXh0LCB0aGlzLnZtKTtcbiAgICB9XG4gIH0sXG5cbiAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZShjb250ZW50LCBjb250ZXh0LCBob3N0KSB7XG4gICAgaWYgKGNvbnRlbnQgJiYgY29udGV4dCkge1xuICAgICAgaWYgKHRoaXMuZWwuaGFzQ2hpbGROb2RlcygpICYmIGNvbnRlbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLm5vZGVUeXBlID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgICAvLyBpZiB0aGUgaW5zZXJ0ZWQgc2xvdCBoYXMgdi1pZlxuICAgICAgICAvLyBpbmplY3QgZmFsbGJhY2sgY29udGVudCBhcyB0aGUgdi1lbHNlXG4gICAgICAgIHZhciBlbHNlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgICAgICBlbHNlQmxvY2suc2V0QXR0cmlidXRlKCd2LWVsc2UnLCAnJyk7XG4gICAgICAgIGVsc2VCbG9jay5pbm5lckhUTUwgPSB0aGlzLmVsLmlubmVySFRNTDtcbiAgICAgICAgLy8gdGhlIGVsc2UgYmxvY2sgc2hvdWxkIGJlIGNvbXBpbGVkIGluIGNoaWxkIHNjb3BlXG4gICAgICAgIGVsc2VCbG9jay5fY29udGV4dCA9IHRoaXMudm07XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWxzZUJsb2NrKTtcbiAgICAgIH1cbiAgICAgIHZhciBzY29wZSA9IGhvc3QgPyBob3N0Ll9zY29wZSA6IHRoaXMuX3Njb3BlO1xuICAgICAgdGhpcy51bmxpbmsgPSBjb250ZXh0LiRjb21waWxlKGNvbnRlbnQsIGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcbiAgICB9XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgY29udGVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSh0aGlzLmVsKTtcbiAgICB9XG4gIH0sXG5cbiAgZmFsbGJhY2s6IGZ1bmN0aW9uIGZhbGxiYWNrKCkge1xuICAgIHRoaXMuY29tcGlsZShleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKSwgdGhpcy52bSk7XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMudW5saW5rKSB7XG4gICAgICB0aGlzLnVubGluaygpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHBhcnRpYWwgPSB7XG5cbiAgcHJpb3JpdHk6IFBBUlRJQUwsXG5cbiAgcGFyYW1zOiBbJ25hbWUnXSxcblxuICAvLyB3YXRjaCBjaGFuZ2VzIHRvIG5hbWUgZm9yIGR5bmFtaWMgcGFydGlhbHNcbiAgcGFyYW1XYXRjaGVyczoge1xuICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUodmFsdWUpIHtcbiAgICAgIHZJZi5yZW1vdmUuY2FsbCh0aGlzKTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmluc2VydCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtcGFydGlhbCcpO1xuICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgIHRoaXMuaW5zZXJ0KHRoaXMucGFyYW1zLm5hbWUpO1xuICB9LFxuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGlkKSB7XG4gICAgdmFyIHBhcnRpYWwgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3BhcnRpYWxzJywgaWQsIHRydWUpO1xuICAgIGlmIChwYXJ0aWFsKSB7XG4gICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHBhcnRpYWwpO1xuICAgICAgdklmLmluc2VydC5jYWxsKHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGVsZW1lbnREaXJlY3RpdmVzID0ge1xuICBzbG90OiBzbG90LFxuICBwYXJ0aWFsOiBwYXJ0aWFsXG59O1xuXG52YXIgY29udmVydEFycmF5ID0gdkZvci5fcG9zdFByb2Nlc3M7XG5cbi8qKlxuICogTGltaXQgZmlsdGVyIGZvciBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAoRGVjaW1hbCBleHBlY3RlZClcbiAqL1xuXG5mdW5jdGlvbiBsaW1pdEJ5KGFyciwgbiwgb2Zmc2V0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA/IHBhcnNlSW50KG9mZnNldCwgMTApIDogMDtcbiAgbiA9IHRvTnVtYmVyKG4pO1xuICByZXR1cm4gdHlwZW9mIG4gPT09ICdudW1iZXInID8gYXJyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbikgOiBhcnI7XG59XG5cbi8qKlxuICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuICogQHBhcmFtIHtTdHJpbmd9IFtkZWxpbWl0ZXJdXG4gKiBAcGFyYW0ge1N0cmluZ30gLi4uZGF0YUtleXNcbiAqL1xuXG5mdW5jdGlvbiBmaWx0ZXJCeShhcnIsIHNlYXJjaCwgZGVsaW1pdGVyKSB7XG4gIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuICBpZiAoc2VhcmNoID09IG51bGwpIHtcbiAgICByZXR1cm4gYXJyO1xuICB9XG4gIGlmICh0eXBlb2Ygc2VhcmNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGFyci5maWx0ZXIoc2VhcmNoKTtcbiAgfVxuICAvLyBjYXN0IHRvIGxvd2VyY2FzZSBzdHJpbmdcbiAgc2VhcmNoID0gKCcnICsgc2VhcmNoKS50b0xvd2VyQ2FzZSgpO1xuICAvLyBhbGxvdyBvcHRpb25hbCBgaW5gIGRlbGltaXRlclxuICAvLyBiZWNhdXNlIHdoeSBub3RcbiAgdmFyIG4gPSBkZWxpbWl0ZXIgPT09ICdpbicgPyAzIDogMjtcbiAgLy8gZXh0cmFjdCBhbmQgZmxhdHRlbiBrZXlzXG4gIHZhciBrZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgdG9BcnJheShhcmd1bWVudHMsIG4pKTtcbiAgdmFyIHJlcyA9IFtdO1xuICB2YXIgaXRlbSwga2V5LCB2YWwsIGo7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGl0ZW0gPSBhcnJbaV07XG4gICAgdmFsID0gaXRlbSAmJiBpdGVtLiR2YWx1ZSB8fCBpdGVtO1xuICAgIGogPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAoaikge1xuICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICBrZXkgPSBrZXlzW2pdO1xuICAgICAgICBpZiAoa2V5ID09PSAnJGtleScgJiYgY29udGFpbnMoaXRlbS4ka2V5LCBzZWFyY2gpIHx8IGNvbnRhaW5zKGdldFBhdGgodmFsLCBrZXkpLCBzZWFyY2gpKSB7XG4gICAgICAgICAgcmVzLnB1c2goaXRlbSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvbnRhaW5zKGl0ZW0sIHNlYXJjaCkpIHtcbiAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5PFN0cmluZz58RnVuY3Rpb259IC4uLnNvcnRLZXlzXG4gKiBAcGFyYW0ge051bWJlcn0gW29yZGVyXVxuICovXG5cbmZ1bmN0aW9uIG9yZGVyQnkoYXJyKSB7XG4gIHZhciBjb21wYXJhdG9yID0gbnVsbDtcbiAgdmFyIHNvcnRLZXlzID0gdW5kZWZpbmVkO1xuICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcblxuICAvLyBkZXRlcm1pbmUgb3JkZXIgKGxhc3QgYXJndW1lbnQpXG4gIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICB2YXIgb3JkZXIgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gIGlmICh0eXBlb2Ygb3JkZXIgPT09ICdudW1iZXInKSB7XG4gICAgb3JkZXIgPSBvcmRlciA8IDAgPyAtMSA6IDE7XG4gICAgYXJncyA9IGFyZ3MubGVuZ3RoID4gMSA/IGFyZ3Muc2xpY2UoMCwgLTEpIDogYXJncztcbiAgfSBlbHNlIHtcbiAgICBvcmRlciA9IDE7XG4gIH1cblxuICAvLyBkZXRlcm1pbmUgc29ydEtleXMgJiBjb21wYXJhdG9yXG4gIHZhciBmaXJzdEFyZyA9IGFyZ3NbMF07XG4gIGlmICghZmlyc3RBcmcpIHtcbiAgICByZXR1cm4gYXJyO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBmaXJzdEFyZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIGN1c3RvbSBjb21wYXJhdG9yXG4gICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gZmlyc3RBcmcoYSwgYikgKiBvcmRlcjtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIHN0cmluZyBrZXlzLiBmbGF0dGVuIGZpcnN0XG4gICAgc29ydEtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcmdzKTtcbiAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIsIGkpIHtcbiAgICAgIGkgPSBpIHx8IDA7XG4gICAgICByZXR1cm4gaSA+PSBzb3J0S2V5cy5sZW5ndGggLSAxID8gYmFzZUNvbXBhcmUoYSwgYiwgaSkgOiBiYXNlQ29tcGFyZShhLCBiLCBpKSB8fCBjb21wYXJhdG9yKGEsIGIsIGkgKyAxKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gYmFzZUNvbXBhcmUoYSwgYiwgc29ydEtleUluZGV4KSB7XG4gICAgdmFyIHNvcnRLZXkgPSBzb3J0S2V5c1tzb3J0S2V5SW5kZXhdO1xuICAgIGlmIChzb3J0S2V5KSB7XG4gICAgICBpZiAoc29ydEtleSAhPT0gJyRrZXknKSB7XG4gICAgICAgIGlmIChpc09iamVjdChhKSAmJiAnJHZhbHVlJyBpbiBhKSBhID0gYS4kdmFsdWU7XG4gICAgICAgIGlmIChpc09iamVjdChiKSAmJiAnJHZhbHVlJyBpbiBiKSBiID0gYi4kdmFsdWU7XG4gICAgICB9XG4gICAgICBhID0gaXNPYmplY3QoYSkgPyBnZXRQYXRoKGEsIHNvcnRLZXkpIDogYTtcbiAgICAgIGIgPSBpc09iamVjdChiKSA/IGdldFBhdGgoYiwgc29ydEtleSkgOiBiO1xuICAgIH1cbiAgICByZXR1cm4gYSA9PT0gYiA/IDAgOiBhID4gYiA/IG9yZGVyIDogLW9yZGVyO1xuICB9XG5cbiAgLy8gc29ydCBvbiBhIGNvcHkgdG8gYXZvaWQgbXV0YXRpbmcgb3JpZ2luYWwgYXJyYXlcbiAgcmV0dXJuIGFyci5zbGljZSgpLnNvcnQoY29tcGFyYXRvcik7XG59XG5cbi8qKlxuICogU3RyaW5nIGNvbnRhaW4gaGVscGVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcbiAqL1xuXG5mdW5jdGlvbiBjb250YWlucyh2YWwsIHNlYXJjaCkge1xuICB2YXIgaTtcbiAgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNvbnRhaW5zKHZhbFtrZXlzW2ldXSwgc2VhcmNoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgaSA9IHZhbC5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNvbnRhaW5zKHZhbFtpXSwgc2VhcmNoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAodmFsICE9IG51bGwpIHtcbiAgICByZXR1cm4gdmFsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaCkgPiAtMTtcbiAgfVxufVxuXG52YXIgZGlnaXRzUkUgPSAvKFxcZHszfSkoPz1cXGQpL2c7XG5cbi8vIGFzc2V0IGNvbGxlY3Rpb25zIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuXG52YXIgZmlsdGVycyA9IHtcblxuICBvcmRlckJ5OiBvcmRlckJ5LFxuICBmaWx0ZXJCeTogZmlsdGVyQnksXG4gIGxpbWl0Qnk6IGxpbWl0QnksXG5cbiAgLyoqXG4gICAqIFN0cmluZ2lmeSB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGVudFxuICAgKi9cblxuICBqc29uOiB7XG4gICAgcmVhZDogZnVuY3Rpb24gcmVhZCh2YWx1ZSwgaW5kZW50KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gaW5kZW50IDogMik7XG4gICAgfSxcbiAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUodmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogJ2FiYycgPT4gJ0FiYydcbiAgICovXG5cbiAgY2FwaXRhbGl6ZTogZnVuY3Rpb24gY2FwaXRhbGl6ZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcbiAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdhYmMnID0+ICdBQkMnXG4gICAqL1xuXG4gIHVwcGVyY2FzZTogZnVuY3Rpb24gdXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpIDogJyc7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdBYkMnID0+ICdhYmMnXG4gICAqL1xuXG4gIGxvd2VyY2FzZTogZnVuY3Rpb24gbG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpIDogJyc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIDEyMzQ1ID0+ICQxMiwzNDUuMDBcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNpZ25cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlY2ltYWxzIERlY2ltYWwgcGxhY2VzXG4gICAqL1xuXG4gIGN1cnJlbmN5OiBmdW5jdGlvbiBjdXJyZW5jeSh2YWx1ZSwgX2N1cnJlbmN5LCBkZWNpbWFscykge1xuICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgaWYgKCFpc0Zpbml0ZSh2YWx1ZSkgfHwgIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG4gICAgX2N1cnJlbmN5ID0gX2N1cnJlbmN5ICE9IG51bGwgPyBfY3VycmVuY3kgOiAnJCc7XG4gICAgZGVjaW1hbHMgPSBkZWNpbWFscyAhPSBudWxsID8gZGVjaW1hbHMgOiAyO1xuICAgIHZhciBzdHJpbmdpZmllZCA9IE1hdGguYWJzKHZhbHVlKS50b0ZpeGVkKGRlY2ltYWxzKTtcbiAgICB2YXIgX2ludCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoMCwgLTEgLSBkZWNpbWFscykgOiBzdHJpbmdpZmllZDtcbiAgICB2YXIgaSA9IF9pbnQubGVuZ3RoICUgMztcbiAgICB2YXIgaGVhZCA9IGkgPiAwID8gX2ludC5zbGljZSgwLCBpKSArIChfaW50Lmxlbmd0aCA+IDMgPyAnLCcgOiAnJykgOiAnJztcbiAgICB2YXIgX2Zsb2F0ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgtMSAtIGRlY2ltYWxzKSA6ICcnO1xuICAgIHZhciBzaWduID0gdmFsdWUgPCAwID8gJy0nIDogJyc7XG4gICAgcmV0dXJuIHNpZ24gKyBfY3VycmVuY3kgKyBoZWFkICsgX2ludC5zbGljZShpKS5yZXBsYWNlKGRpZ2l0c1JFLCAnJDEsJykgKyBfZmxvYXQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdpdGVtJyA9PiAnaXRlbXMnXG4gICAqXG4gICAqIEBwYXJhbXNcbiAgICogIGFuIGFycmF5IG9mIHN0cmluZ3MgY29ycmVzcG9uZGluZyB0b1xuICAgKiAgdGhlIHNpbmdsZSwgZG91YmxlLCB0cmlwbGUgLi4uIGZvcm1zIG9mIHRoZSB3b3JkIHRvXG4gICAqICBiZSBwbHVyYWxpemVkLiBXaGVuIHRoZSBudW1iZXIgdG8gYmUgcGx1cmFsaXplZFxuICAgKiAgZXhjZWVkcyB0aGUgbGVuZ3RoIG9mIHRoZSBhcmdzLCBpdCB3aWxsIHVzZSB0aGUgbGFzdFxuICAgKiAgZW50cnkgaW4gdGhlIGFycmF5LlxuICAgKlxuICAgKiAgZS5nLiBbJ3NpbmdsZScsICdkb3VibGUnLCAndHJpcGxlJywgJ211bHRpcGxlJ11cbiAgICovXG5cbiAgcGx1cmFsaXplOiBmdW5jdGlvbiBwbHVyYWxpemUodmFsdWUpIHtcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBpbmRleCA9IHZhbHVlICUgMTAgLSAxO1xuICAgICAgcmV0dXJuIGluZGV4IGluIGFyZ3MgPyBhcmdzW2luZGV4XSA6IGFyZ3NbbGVuZ3RoIC0gMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhcmdzWzBdICsgKHZhbHVlID09PSAxID8gJycgOiAncycpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVib3VuY2UgYSBoYW5kbGVyIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheSA9IDMwMFxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgZGVib3VuY2U6IGZ1bmN0aW9uIGRlYm91bmNlKGhhbmRsZXIsIGRlbGF5KSB7XG4gICAgaWYgKCFoYW5kbGVyKSByZXR1cm47XG4gICAgaWYgKCFkZWxheSkge1xuICAgICAgZGVsYXkgPSAzMDA7XG4gICAgfVxuICAgIHJldHVybiBfZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBpbnN0YWxsR2xvYmFsQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIFZ1ZSBhbmQgZXZlcnkgY29uc3RydWN0b3IgdGhhdCBleHRlbmRzIFZ1ZSBoYXMgYW5cbiAgICogYXNzb2NpYXRlZCBvcHRpb25zIG9iamVjdCwgd2hpY2ggY2FuIGJlIGFjY2Vzc2VkIGR1cmluZ1xuICAgKiBjb21waWxhdGlvbiBzdGVwcyBhcyBgdGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zYC5cbiAgICpcbiAgICogVGhlc2UgY2FuIGJlIHNlZW4gYXMgdGhlIGRlZmF1bHQgb3B0aW9ucyBvZiBldmVyeVxuICAgKiBWdWUgaW5zdGFuY2UuXG4gICAqL1xuXG4gIFZ1ZS5vcHRpb25zID0ge1xuICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG4gICAgZWxlbWVudERpcmVjdGl2ZXM6IGVsZW1lbnREaXJlY3RpdmVzLFxuICAgIGZpbHRlcnM6IGZpbHRlcnMsXG4gICAgdHJhbnNpdGlvbnM6IHt9LFxuICAgIGNvbXBvbmVudHM6IHt9LFxuICAgIHBhcnRpYWxzOiB7fSxcbiAgICByZXBsYWNlOiB0cnVlXG4gIH07XG5cbiAgLyoqXG4gICAqIEV4cG9zZSB1c2VmdWwgaW50ZXJuYWxzXG4gICAqL1xuXG4gIFZ1ZS51dGlsID0gdXRpbDtcbiAgVnVlLmNvbmZpZyA9IGNvbmZpZztcbiAgVnVlLnNldCA9IHNldDtcbiAgVnVlWydkZWxldGUnXSA9IGRlbDtcbiAgVnVlLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cbiAgLyoqXG4gICAqIFRoZSBmb2xsb3dpbmcgYXJlIGV4cG9zZWQgZm9yIGFkdmFuY2VkIHVzYWdlIC8gcGx1Z2luc1xuICAgKi9cblxuICBWdWUuY29tcGlsZXIgPSBjb21waWxlcjtcbiAgVnVlLkZyYWdtZW50RmFjdG9yeSA9IEZyYWdtZW50RmFjdG9yeTtcbiAgVnVlLmludGVybmFsRGlyZWN0aXZlcyA9IGludGVybmFsRGlyZWN0aXZlcztcbiAgVnVlLnBhcnNlcnMgPSB7XG4gICAgcGF0aDogcGF0aCxcbiAgICB0ZXh0OiB0ZXh0LFxuICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSxcbiAgICBkaXJlY3RpdmU6IGRpcmVjdGl2ZSxcbiAgICBleHByZXNzaW9uOiBleHByZXNzaW9uXG4gIH07XG5cbiAgLyoqXG4gICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxuICAgKiBjaWQuIFRoaXMgZW5hYmxlcyB1cyB0byBjcmVhdGUgd3JhcHBlZCBcImNoaWxkXG4gICAqIGNvbnN0cnVjdG9yc1wiIGZvciBwcm90b3R5cGFsIGluaGVyaXRhbmNlIGFuZCBjYWNoZSB0aGVtLlxuICAgKi9cblxuICBWdWUuY2lkID0gMDtcbiAgdmFyIGNpZCA9IDE7XG5cbiAgLyoqXG4gICAqIENsYXNzIGluaGVyaXRhbmNlXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbmRPcHRpb25zXG4gICAqL1xuXG4gIFZ1ZS5leHRlbmQgPSBmdW5jdGlvbiAoZXh0ZW5kT3B0aW9ucykge1xuICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9O1xuICAgIHZhciBTdXBlciA9IHRoaXM7XG4gICAgdmFyIGlzRmlyc3RFeHRlbmQgPSBTdXBlci5jaWQgPT09IDA7XG4gICAgaWYgKGlzRmlyc3RFeHRlbmQgJiYgZXh0ZW5kT3B0aW9ucy5fQ3Rvcikge1xuICAgICAgcmV0dXJuIGV4dGVuZE9wdGlvbnMuX0N0b3I7XG4gICAgfVxuICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKCEvXlthLXpBLVpdW1xcdy1dKiQvLnRlc3QobmFtZSkpIHtcbiAgICAgICAgd2FybignSW52YWxpZCBjb21wb25lbnQgbmFtZTogXCInICsgbmFtZSArICdcIi4gQ29tcG9uZW50IG5hbWVzICcgKyAnY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjYXRlcnMgYW5kIHRoZSBoeXBoZW4uJyk7XG4gICAgICAgIG5hbWUgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgU3ViID0gY3JlYXRlQ2xhc3MobmFtZSB8fCAnVnVlQ29tcG9uZW50Jyk7XG4gICAgU3ViLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTtcbiAgICBTdWIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViO1xuICAgIFN1Yi5jaWQgPSBjaWQrKztcbiAgICBTdWIub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhTdXBlci5vcHRpb25zLCBleHRlbmRPcHRpb25zKTtcbiAgICBTdWJbJ3N1cGVyJ10gPSBTdXBlcjtcbiAgICAvLyBhbGxvdyBmdXJ0aGVyIGV4dGVuc2lvblxuICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7XG4gICAgLy8gY3JlYXRlIGFzc2V0IHJlZ2lzdGVycywgc28gZXh0ZW5kZWQgY2xhc3Nlc1xuICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cbiAgICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgU3ViW3R5cGVdID0gU3VwZXJbdHlwZV07XG4gICAgfSk7XG4gICAgLy8gZW5hYmxlIHJlY3Vyc2l2ZSBzZWxmLWxvb2t1cFxuICAgIGlmIChuYW1lKSB7XG4gICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuICAgIH1cbiAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvclxuICAgIGlmIChpc0ZpcnN0RXh0ZW5kKSB7XG4gICAgICBleHRlbmRPcHRpb25zLl9DdG9yID0gU3ViO1xuICAgIH1cbiAgICByZXR1cm4gU3ViO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN1Yi1jbGFzcyBjb25zdHJ1Y3RvciB3aXRoIHRoZVxuICAgKiBnaXZlbiBuYW1lLiBUaGlzIGdpdmVzIHVzIG11Y2ggbmljZXIgb3V0cHV0IHdoZW5cbiAgICogbG9nZ2luZyBpbnN0YW5jZXMgaW4gdGhlIGNvbnNvbGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhuYW1lKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gZnVuY3Rpb24gJyArIGNsYXNzaWZ5KG5hbWUpICsgJyAob3B0aW9ucykgeyB0aGlzLl9pbml0KG9wdGlvbnMpIH0nKSgpO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cbiAgfVxuXG4gIC8qKlxuICAgKiBQbHVnaW4gc3lzdGVtXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwbHVnaW5cbiAgICovXG5cbiAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAocGx1Z2luLmluc3RhbGxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcGx1Z2luLmluc3RhbGwuYXBwbHkocGx1Z2luLCBhcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH1cbiAgICBwbHVnaW4uaW5zdGFsbGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQXBwbHkgYSBnbG9iYWwgbWl4aW4gYnkgbWVyZ2luZyBpdCBpbnRvIHRoZSBkZWZhdWx0XG4gICAqIG9wdGlvbnMuXG4gICAqL1xuXG4gIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikge1xuICAgIFZ1ZS5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFZ1ZS5vcHRpb25zLCBtaXhpbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhc3NldCByZWdpc3RyYXRpb24gbWV0aG9kcyB3aXRoIHRoZSBmb2xsb3dpbmdcbiAgICogc2lnbmF0dXJlOlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAgICogQHBhcmFtIHsqfSBkZWZpbml0aW9uXG4gICAqL1xuXG4gIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKGlkLCBkZWZpbml0aW9uKSB7XG4gICAgICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgKGNvbW1vblRhZ1JFLnRlc3QoaWQpIHx8IHJlc2VydmVkVGFnUkUudGVzdChpZCkpKSB7XG4gICAgICAgICAgICB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG4gICAgICAgICAgaWYgKCFkZWZpbml0aW9uLm5hbWUpIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA9IGlkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZpbml0aW9uID0gVnVlLmV4dGVuZChkZWZpbml0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdID0gZGVmaW5pdGlvbjtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gZXhwb3NlIGludGVybmFsIHRyYW5zaXRpb24gQVBJXG4gIGV4dGVuZChWdWUudHJhbnNpdGlvbiwgdHJhbnNpdGlvbik7XG59XG5cbmluc3RhbGxHbG9iYWxBUEkoVnVlKTtcblxuVnVlLnZlcnNpb24gPSAnMS4wLjI2JztcblxuLy8gZGV2dG9vbHMgZ2xvYmFsIGhvb2tcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgaWYgKGNvbmZpZy5kZXZ0b29scykge1xuICAgIGlmIChkZXZ0b29scykge1xuICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGluQnJvd3NlciAmJiAvQ2hyb21lXFwvXFxkKy8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdEb3dubG9hZCB0aGUgVnVlIERldnRvb2xzIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBleHBlcmllbmNlOlxcbicgKyAnaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1kZXZ0b29scycpO1xuICAgIH1cbiAgfVxufSwgMCk7XG5cbm1vZHVsZS5leHBvcnRzID0gVnVlO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS9kaXN0L3Z1ZS5jb21tb24uanNcbiAqKiBtb2R1bGUgaWQgPSAyMjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihcImRlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdFwiKTsgfTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvYnVpbGRpbi9hbWQtZGVmaW5lLmpzXG4gKiogbW9kdWxlIGlkID0gMjI4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xyXG5cdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xyXG5cdH1cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gMjI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9