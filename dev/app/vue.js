!function(e){function t(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n=window.webpackJsonp;window.webpackJsonp=function(i,r){for(var s,a,c=0,l=[];c<i.length;c++)a=i[c],o[a]&&l.push.apply(l,o[a]),o[a]=0;for(s in r)e[s]=r[s];for(n&&n(i,r);l.length;)l.shift().call(null,t)};var i={},o={0:0,1:0,2:0};return t.e=function(e,n){if(0===o[e])return n.call(null,t);if(void 0!==o[e])o[e].push(n);else{o[e]=[n];var i=document.getElementsByTagName("head")[0],r=document.createElement("script");r.type="text/javascript",r.charset="utf-8",r.async=!0,r.src=t.p+""+e+".app.js",i.appendChild(r)}},t.m=e,t.c=i,t.p="/hybrid-thorium/dev/app/",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(43),r=i(o),s=n(203),a=i(s),c=n(65),l=i(c),h=n(67),u=i(h),f=n(161),p=i(f),d=n(183),v=i(d),y=n(184),_=i(y);r["default"].config.debug=!0,r["default"].use(a["default"]),r["default"].use(u["default"]);var b=new a["default"],m=r["default"].extend({components:{SideNav:v["default"],SiteHeader:_["default"]},data:function(){return{ligerEndPoint:"https://api.cms.telus.com/legals",ligerApplicationKey:"b9738d67b89dfc782746d4a9cf4a1093"}}});b.map(l["default"]),b.afterEach(function(){setTimeout(function(){p["default"].highlightAll()},0)}),b.start(m,"#app-main")},function(e,t){e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var n=this[t];n[2]?e.push("@media "+n[2]+"{"+n[1]+"}"):e.push(n[1])}return e.join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},o=0;o<this.length;o++){var r=this[o][0];"number"==typeof r&&(i[r]=!0)}for(o=0;o<t.length;o++){var s=t[o];"number"==typeof s[0]&&i[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(e,t,n){function i(e,t){for(var n=0;n<e.length;n++){var i=e[n],o=u[i.id];if(o){o.refs++;for(var r=0;r<o.parts.length;r++)o.parts[r](i.parts[r]);for(;r<i.parts.length;r++)o.parts.push(c(i.parts[r],t))}else{for(var s=[],r=0;r<i.parts.length;r++)s.push(c(i.parts[r],t));u[i.id]={id:i.id,refs:1,parts:s}}}}function o(e){for(var t=[],n={},i=0;i<e.length;i++){var o=e[i],r=o[0],s=o[1],a=o[2],c=o[3],l={css:s,media:a,sourceMap:c};n[r]?n[r].parts.push(l):t.push(n[r]={id:r,parts:[l]})}return t}function r(e,t){var n=d(),i=_[_.length-1];if("top"===e.insertAt)i?i.nextSibling?n.insertBefore(t,i.nextSibling):n.appendChild(t):n.insertBefore(t,n.firstChild),_.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");n.appendChild(t)}}function s(e){e.parentNode.removeChild(e);var t=_.indexOf(e);t>=0&&_.splice(t,1)}function a(e){var t=document.createElement("style");return t.type="text/css",r(e,t),t}function c(e,t){var n,i,o;if(t.singleton){var r=y++;n=v||(v=a(t)),i=l.bind(null,n,r,!1),o=l.bind(null,n,r,!0)}else n=a(t),i=h.bind(null,n),o=function(){s(n)};return i(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;i(e=t)}else o()}}function l(e,t,n,i){var o=n?"":i.css;if(e.styleSheet)e.styleSheet.cssText=b(t,o);else{var r=document.createTextNode(o),s=e.childNodes;s[t]&&e.removeChild(s[t]),s.length?e.insertBefore(r,s[t]):e.appendChild(r)}}function h(e,t){var n=t.css,i=t.media,o=t.sourceMap;if(i&&e.setAttribute("media",i),o&&(n+="\n/*# sourceURL="+o.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(o))))+" */"),e.styleSheet)e.styleSheet.cssText=n;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(n))}}var u={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},p=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),d=f(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,y=0,_=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=p()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var n=o(e);return i(n,t),function(e){for(var r=[],s=0;s<n.length;s++){var a=n[s],c=u[a.id];c.refs--,r.push(c)}if(e){var l=o(e);i(l,t)}for(var s=0;s<r.length;s++){var c=r[s];if(0===c.refs){for(var h=0;h<c.parts.length;h++)c.parts[h]();delete u[c.id]}}}};var b=function(){var e=[];return function(t,n){return e[t]=n,e.filter(Boolean).join("\n")}}()},function(e,t,n){(function(t){var i=n(108),o=i("object"==typeof t&&t),r=i("object"==typeof self&&self),s=i("object"==typeof this&&this),a=o||r||s||Function("return this")();e.exports=a}).call(t,function(){return this}())},function(e,t){var n=Array.isArray;e.exports=n},function(e,t,n){var i,o;n(204),i=n(44),o=n(162),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){function i(e,t){var n=r(e,t);return o(n)?n:void 0}var o=n(100),r=n(116);e.exports=i},function(e,t){function n(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(127),r=n(128),s=n(129),a=n(130),c=n(131);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){function i(e,t){for(var n=e.length;n--;)if(o(e[n][0],t))return n;return-1}var o=n(148);e.exports=i},function(e,t,n){function i(e,t){var n=e.__data__;return o(t)?n["string"==typeof t?"string":"hash"]:n.map}var o=n(124);e.exports=i},function(e,t,n){function i(e,t){if(o(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!r(e))||(a.test(e)||!s.test(e)||null!=t&&e in Object(t))}var o=n(4),r=n(16),s=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=i},function(e,t,n){var i=n(6),o=i(Object,"create");e.exports=o},function(e,t,n){function i(e){if("string"==typeof e||o(e))return e;var t=e+"";return"0"==t&&1/e==-r?"-0":t}var o=n(16),r=1/0;e.exports=i},function(e,t){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}var i=9007199254740991;e.exports=n},function(e,t,n){function i(e){return"symbol"==typeof e||o(e)&&a.call(e)==r}var o=n(8),r="[object Symbol]",s=Object.prototype,a=s.toString;e.exports=i},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(132),r=n(133),s=n(134),a=n(135),c=n(136);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){function i(e){var t=o(e)?c.call(e):"";return t==r||t==s}var o=n(7),r="[object Function]",s="[object GeneratorFunction]",a=Object.prototype,c=a.toString;e.exports=i},function(e,t){function n(){u&&l&&(u=!1,l.length?h=l.concat(h):f=-1,h.length&&i())}function i(){if(!u){var e=s(n);u=!0;for(var t=h.length;t;){for(l=h,h=[];++f<t;)l&&l[f].run();f=-1,t=h.length}l=null,u=!1,a(e)}}function o(e,t){this.fun=e,this.array=t}function r(){}var s,a,c=e.exports={};!function(){try{s=setTimeout}catch(e){s=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(e){a=function(){throw new Error("clearTimeout is not defined")}}}();var l,h=[],u=!1,f=-1;c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new o(e,t)),1!==h.length||u||s(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=r,c.addListener=r,c.once=r,c.off=r,c.removeListener=r,c.removeAllListeners=r,c.emit=r,c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(36),r=i(o);t["default"]={update:function(e){var t=this;e===!0&&(0,r["default"])(function(){t.el.tabIndex=0,t.el.focus()})}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(68),r=i(o),s=n(69),a=i(s);t["default"]=[r["default"],a["default"]]},function(e,t,n){var i=n(6),o=n(3),r=i(o,"Map");e.exports=r},function(e,t,n){function i(e){this.__data__=new o(e)}var o=n(9),r=n(141),s=n(142),a=n(143),c=n(144),l=n(145);i.prototype.clear=r,i.prototype["delete"]=s,i.prototype.get=a,i.prototype.has=c,i.prototype.set=l,e.exports=i},function(e,t,n){var i=n(3),o=i.Symbol;e.exports=o},function(e,t,n){function i(e,t){t=r(t,e)?[t]:o(t);for(var n=0,i=t.length;null!=e&&n<i;)e=e[s(t[n++])];return n&&n==i?e:void 0}var o=n(29),r=n(12),s=n(14);e.exports=i},function(e,t,n){function i(e,t){return null!=e&&(s.call(e,t)||"object"==typeof e&&t in e&&null===o(e))}var o=n(114),r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,a,c){return e===t||(null==e||null==t||!r(e)&&!s(t)?e!==e&&t!==t:o(e,t,i,n,a,c))}var o=n(98),r=n(7),s=n(8);e.exports=i},function(e,t){function n(e){return function(t){return null==t?void 0:t[e]}}e.exports=n},function(e,t,n){function i(e){return o(e)?e:r(e)}var o=n(4),r=n(146);e.exports=i},function(e,t,n){function i(e,t,n,i,c,l){var h=c&a,u=e.length,f=t.length;if(u!=f&&!(h&&f>u))return!1;var p=l.get(e);if(p)return p==t;var d=-1,v=!0,y=c&s?new o:void 0;for(l.set(e,t);++d<u;){var _=e[d],b=t[d];if(i)var m=h?i(b,_,d,t,e,l):i(_,b,d,e,t,l);if(void 0!==m){if(m)continue;v=!1;break}if(y){if(!r(t,function(e,t){if(!y.has(t)&&(_===e||n(_,e,i,c,l)))return y.add(t)})){v=!1;break}}else if(_!==b&&!n(_,b,i,c,l)){v=!1;break}}return l["delete"](e),v}var o=n(90),r=n(94),s=1,a=2;e.exports=i},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(n){}return t}e.exports=n},function(e,t){function n(e,t){return t=null==t?i:t,!!t&&("number"==typeof e||o.test(e))&&e>-1&&e%1==0&&e<t}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=n},function(e,t,n){function i(e){return e===e&&!o(e)}var o=n(7);e.exports=i},function(e,t){function n(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}e.exports=n},function(e,t){function n(e){if(null!=e){try{return i.call(e)}catch(t){}try{return e+""}catch(t){}}return""}var i=Function.prototype.toString;e.exports=n},function(e,t,n){var i=n(95),o=n(158),r=o(function(e,t){return i(e,1,t)});e.exports=r},function(e,t,n){function i(e){return o(e)&&a.call(e,"callee")&&(!l.call(e,"callee")||c.call(e)==r)}var o=n(153),r="[object Arguments]",s=Object.prototype,a=s.hasOwnProperty,c=s.toString,l=s.propertyIsEnumerable;e.exports=i},function(e,t,n){function i(e){return null!=e&&s(o(e))&&!r(e)}var o=n(112),r=n(18),s=n(15);e.exports=i},function(e,t,n){function i(e){return"string"==typeof e||!o(e)&&r(e)&&c.call(e)==s}var o=n(4),r=n(8),s="[object String]",a=Object.prototype,c=a.toString;e.exports=i},function(e,t,n){function i(e){var t=l(e);if(!t&&!a(e))return r(e);var n=s(e),i=!!n,h=n||[],u=h.length;for(var f in e)!o(e,f)||i&&("length"==f||c(f,u))||t&&"constructor"==f||h.push(f);return h}var o=n(26),r=n(102),s=n(123),a=n(38),c=n(32),l=n(126);e.exports=i},function(e,t,n){function i(e){var t=o(e),n=t%1;return t===t?n?t-n:t:0}var o=n(159);e.exports=i},function(e,t,n){function i(e){if("number"==typeof e)return e;if(s(e))return a;if(r(e)){var t=o(e.valueOf)?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(c,"");var n=h.test(e);return n||u.test(e)?f(e.slice(2),n?2:8):l.test(e)?a:+e}var o=n(18),r=n(7),s=n(16),a=NaN,c=/^\s+|\s+$/g,l=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,u=/^0o[0-7]+$/i,f=parseInt;e.exports=i},function(e,t,n){(function(t,n){/*!
	 * Vue.js v1.0.26
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
"use strict";function i(e,t,n){if(r(e,t))return void(e[t]=n);if(e._isVue)return void i(e._data,t,n);var o=e.__ob__;if(!o)return void(e[t]=n);if(o.convert(t,n),o.dep.notify(),o.vms)for(var s=o.vms.length;s--;){var a=o.vms[s];a._proxy(t),a._digest()}return n}function o(e,t){if(r(e,t)){delete e[t];var n=e.__ob__;if(!n)return void(e._isVue&&(delete e._data[t],e._digest()));if(n.dep.notify(),n.vms)for(var i=n.vms.length;i--;){var o=n.vms[i];o._unproxy(t),o._digest()}}}function r(e,t){return Sn.call(e,t)}function s(e){return Vn.test(e)}function a(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function c(e){return null==e?"":e.toString()}function l(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t}function h(e){return"true"===e||"false"!==e&&e}function u(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}function f(e){return e.replace(Pn,p)}function p(e,t){return t?t.toUpperCase():""}function d(e){return e.replace(Rn,"$1-$2").toLowerCase()}function v(e){return e.replace(Fn,p)}function y(e,t){return function(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}}function _(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function b(e,t){for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function m(e){return null!==e&&"object"==typeof e}function g(e){return Mn.call(e)===In}function E(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function w(e,t){var n,i,o,r,s,a=function c(){var a=Date.now()-r;a<t&&a>=0?n=setTimeout(c,t-a):(n=null,s=e.apply(o,i),n||(o=i=null))};return function(){return o=this,i=arguments,r=Date.now(),n||(n=setTimeout(a,t)),s}}function x(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function k(e){var t=function n(){if(!n.cancelled)return e.apply(this,arguments)};return t.cancel=function(){t.cancelled=!0},t}function C(e,t){return e==t||!(!m(e)||!m(t))&&JSON.stringify(e)===JSON.stringify(t)}function $(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function N(){var e,t=ai.slice(pi,ui).trim();if(t){e={};var n=t.match(gi);e.name=n[0],n.length>1&&(e.args=n.slice(1).map(O))}e&&(ci.filters=ci.filters||[]).push(e),pi=ui+1}function O(e){if(Ei.test(e))return{value:l(e),dynamic:!1};var t=u(e),n=t===e;return{value:n?e:t,dynamic:n}}function A(e){var t=mi.get(e);if(t)return t;for(ai=e,di=vi=!1,yi=_i=bi=0,pi=0,ci={},ui=0,fi=ai.length;ui<fi;ui++)if(hi=li,li=ai.charCodeAt(ui),di)39===li&&92!==hi&&(di=!di);else if(vi)34===li&&92!==hi&&(vi=!vi);else if(124===li&&124!==ai.charCodeAt(ui+1)&&124!==ai.charCodeAt(ui-1))null==ci.expression?(pi=ui+1,ci.expression=ai.slice(0,ui).trim()):N();else switch(li){case 34:vi=!0;break;case 39:di=!0;break;case 40:bi++;break;case 41:bi--;break;case 91:_i++;break;case 93:_i--;break;case 123:yi++;break;case 125:yi--}return null==ci.expression?ci.expression=ai.slice(0,ui).trim():0!==pi&&N(),mi.put(e,ci),ci}function T(e){return e.replace(xi,"\\$&")}function j(){var e=T(ji.delimiters[0]),t=T(ji.delimiters[1]),n=T(ji.unsafeDelimiters[0]),i=T(ji.unsafeDelimiters[1]);Ci=new RegExp(n+"((?:.|\\n)+?)"+i+"|"+e+"((?:.|\\n)+?)"+t,"g"),$i=new RegExp("^"+n+"((?:.|\\n)+?)"+i+"$"),ki=new $(1e3)}function D(e){ki||j();var t=ki.get(e);if(t)return t;if(!Ci.test(e))return null;for(var n,i,o,r,s,a,c=[],l=Ci.lastIndex=0;n=Ci.exec(e);)i=n.index,i>l&&c.push({value:e.slice(l,i)}),o=$i.test(n[0]),r=o?n[1]:n[2],s=r.charCodeAt(0),a=42===s,r=a?r.slice(1):r,c.push({tag:!0,value:r.trim(),html:o,oneTime:a}),l=i+n[0].length;return l<e.length&&c.push({value:e.slice(l)}),ki.put(e,c),c}function S(e,t){return e.length>1?e.map(function(e){return V(e,t)}).join("+"):V(e[0],t,!0)}function V(e,t,n){return e.tag?e.oneTime&&t?'"'+t.$eval(e.value)+'"':P(e.value,n):'"'+e.value+'"'}function P(e,t){if(Ni.test(e)){var n=A(e);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+e+")"}return t?e:"("+e+")"}function R(e,t,n,i){I(e,1,function(){t.appendChild(e)},n,i)}function F(e,t,n,i){I(e,1,function(){W(e,t)},n,i)}function M(e,t,n){I(e,-1,function(){J(e)},t,n)}function I(e,t,n,i,o){var r=e.__v_trans;if(!r||!r.hooks&&!Xn||!i._isCompiled||i.$parent&&!i.$parent._isCompiled)return n(),void(o&&o());var s=t>0?"enter":"leave";r[s](n,o)}function L(e){if("string"==typeof e){var t=e;e=document.querySelector(e),e||"production"!==n.env.NODE_ENV&&Di("Cannot find element: "+t)}return e}function H(e){if(!e)return!1;var t=e.ownerDocument.documentElement,n=e.parentNode;return t===e||t===n||!(!n||1!==n.nodeType||!t.contains(n))}function z(e,t){var n=e.getAttribute(t);return null!==n&&e.removeAttribute(t),n}function B(e,t){var n=z(e,":"+t);return null===n&&(n=z(e,"v-bind:"+t)),n}function U(e,t){return e.hasAttribute(t)||e.hasAttribute(":"+t)||e.hasAttribute("v-bind:"+t)}function W(e,t){t.parentNode.insertBefore(e,t)}function q(e,t){t.nextSibling?W(e,t.nextSibling):t.parentNode.appendChild(e)}function J(e){e.parentNode.removeChild(e)}function Q(e,t){t.firstChild?W(e,t.firstChild):t.appendChild(e)}function Y(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function G(e,t,n,i){e.addEventListener(t,n,i)}function K(e,t,n){e.removeEventListener(t,n)}function Z(e){var t=e.className;return"object"==typeof t&&(t=t.baseVal||""),t}function X(e,t){qn&&!/svg$/.test(e.namespaceURI)?e.className=t:e.setAttribute("class",t)}function ee(e,t){if(e.classList)e.classList.add(t);else{var n=" "+Z(e)+" ";n.indexOf(" "+t+" ")<0&&X(e,(n+t).trim())}}function te(e,t){if(e.classList)e.classList.remove(t);else{for(var n=" "+Z(e)+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");X(e,n.trim())}e.className||e.removeAttribute("class")}function ne(e,t){var n,i;if(re(e)&&he(e.content)&&(e=e.content),e.hasChildNodes())for(ie(e),i=t?document.createDocumentFragment():document.createElement("div");n=e.firstChild;)i.appendChild(n);return i}function ie(e){for(var t;t=e.firstChild,oe(t);)e.removeChild(t);for(;t=e.lastChild,oe(t);)e.removeChild(t)}function oe(e){return e&&(3===e.nodeType&&!e.data.trim()||8===e.nodeType)}function re(e){return e.tagName&&"template"===e.tagName.toLowerCase()}function se(e,t){var n=ji.debug?document.createComment(e):document.createTextNode(t?" ":"");return n.__v_anchor=!0,n}function ae(e){if(e.hasAttributes())for(var t=e.attributes,n=0,i=t.length;n<i;n++){var o=t[n].name;if(Pi.test(o))return f(o.replace(Pi,""))}}function ce(e,t,n){for(var i;e!==t;)i=e.nextSibling,n(e),e=i;n(t)}function le(e,t,n,i,o){function r(){if(a++,s&&a>=c.length){for(var e=0;e<c.length;e++)i.appendChild(c[e]);o&&o()}}var s=!1,a=0,c=[];ce(e,t,function(e){e===t&&(s=!0),c.push(e),M(e,n,r)})}function he(e){return e&&11===e.nodeType}function ue(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function fe(e,t){var i=e.tagName.toLowerCase(),o=e.hasAttributes();if(Ri.test(i)||Fi.test(i)){if(o)return pe(e,t)}else{if(ge(t,"components",i))return{id:i};var r=o&&pe(e,t);if(r)return r;if("production"!==n.env.NODE_ENV){var s=t._componentNameMap&&t._componentNameMap[i];s?Di("Unknown custom element: <"+i+"> - did you mean <"+s+">? HTML is case-insensitive, remember to use kebab-case in templates."):Mi(e,i)&&Di("Unknown custom element: <"+i+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function pe(e,t){var n=e.getAttribute("is");if(null!=n){if(ge(t,"components",n))return e.removeAttribute("is"),{id:n}}else if(n=B(e,"is"),null!=n)return{id:n,dynamic:!0}}function de(e,t){var n,o,s;for(n in t)o=e[n],s=t[n],r(e,n)?m(o)&&m(s)&&de(o,s):i(e,n,s);return e}function ve(e,t){var n=Object.create(e||null);return t?b(n,be(t)):n}function ye(e){if(e.components){var t,i=e.components=be(e.components),o=Object.keys(i);if("production"!==n.env.NODE_ENV)var r=e._componentNameMap={};for(var s=0,a=o.length;s<a;s++){var c=o[s];Ri.test(c)||Fi.test(c)?"production"!==n.env.NODE_ENV&&Di("Do not use built-in or reserved HTML elements as component id: "+c):("production"!==n.env.NODE_ENV&&(r[c.replace(/-/g,"").toLowerCase()]=d(c)),t=i[c],g(t)&&(i[c]=Nn.extend(t)))}}}function _e(e){var t,n,i=e.props;if(Ln(i))for(e.props={},t=i.length;t--;)n=i[t],"string"==typeof n?e.props[n]=null:n.name&&(e.props[n.name]=n);else if(g(i)){var o=Object.keys(i);for(t=o.length;t--;)n=i[o[t]],"function"==typeof n&&(i[o[t]]={type:n})}}function be(e){if(Ln(e)){for(var t,i={},o=e.length;o--;){t=e[o];var r="function"==typeof t?t.options&&t.options.name||t.id:t.name||t.id;r?i[r]=t:"production"!==n.env.NODE_ENV&&Di('Array-syntax assets must provide a "name" or "id" field.')}return i}return e}function me(e,t,i){function o(n){var o=Ii[n]||Li;a[n]=o(e[n],t[n],i,n)}ye(t),_e(t),"production"!==n.env.NODE_ENV&&t.propsData&&!i&&Di("propsData can only be used as an instantiation option.");var s,a={};if(t["extends"]&&(e="function"==typeof t["extends"]?me(e,t["extends"].options,i):me(e,t["extends"],i)),t.mixins)for(var c=0,l=t.mixins.length;c<l;c++){var h=t.mixins[c],u=h.prototype instanceof Nn?h.options:h;e=me(e,u,i)}for(s in e)o(s);for(s in t)r(e,s)||o(s);return a}function ge(e,t,i,o){if("string"==typeof i){var r,s=e[t],a=s[i]||s[r=f(i)]||s[r.charAt(0).toUpperCase()+r.slice(1)];return"production"!==n.env.NODE_ENV&&o&&!a&&Di("Failed to resolve "+t.slice(0,-1)+": "+i,e),a}}function Ee(){this.id=Hi++,this.subs=[]}function we(e){Wi=!1,e(),Wi=!0}function xe(e){if(this.value=e,this.dep=new Ee,E(e,"__ob__",this),Ln(e)){var t=Hn?ke:Ce;t(e,Bi,Ui),this.observeArray(e)}else this.walk(e)}function ke(e,t){e.__proto__=t}function Ce(e,t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];E(e,r,t[r])}}function $e(e,t){if(e&&"object"==typeof e){var n;return r(e,"__ob__")&&e.__ob__ instanceof xe?n=e.__ob__:Wi&&(Ln(e)||g(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new xe(e)),n&&t&&n.addVm(t),n}}function Ne(e,t,n){var i=new Ee,o=Object.getOwnPropertyDescriptor(e,t);if(!o||o.configurable!==!1){var r=o&&o.get,s=o&&o.set,a=$e(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=r?r.call(e):n;if(Ee.target&&(i.depend(),a&&a.dep.depend(),Ln(t)))for(var o,s=0,c=t.length;s<c;s++)o=t[s],o&&o.__ob__&&o.__ob__.dep.depend();return t},set:function(t){var o=r?r.call(e):n;t!==o&&(s?s.call(e,t):n=t,a=$e(t),i.notify())}})}}function Oe(e){e.prototype._init=function(e){e=e||{},this.$el=null,this.$parent=e.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=Ji++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=e._context||this.$parent,this._scope=e._scope,this._frag=e._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),e=this.$options=me(this.constructor.options,e,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),e.el&&this.$mount(e.el)}}function Ae(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&t<=122||t>=65&&t<=90?"ident":t>=49&&t<=57?"number":"else"}function Te(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(s(t)?u(t):"*"+t)}function je(e){function t(){var t=e[h+1];if(u===oo&&"'"===t||u===ro&&'"'===t)return h++,i="\\"+t,p[Yi](),!0}var n,i,o,r,s,a,c,l=[],h=-1,u=Xi,f=0,p=[];for(p[Gi]=function(){void 0!==o&&(l.push(o),o=void 0)},p[Yi]=function(){void 0===o?o=i:o+=i},p[Ki]=function(){p[Yi](),f++},p[Zi]=function(){if(f>0)f--,u=io,p[Yi]();else{if(f=0,o=Te(o),o===!1)return!1;p[Gi]()}};null!=u;)if(h++,n=e[h],"\\"!==n||!t()){if(r=Ae(n),c=co[u],s=c[r]||c["else"]||ao,s===ao)return;if(u=s[0],a=p[s[1]],a&&(i=s[2],i=void 0===i?n:i,a()===!1))return;if(u===so)return l.raw=e,l}}function De(e){var t=Qi.get(e);return t||(t=je(e),t&&Qi.put(e,t)),t}function Se(e,t){return ze(t).get(e)}function Ve(e,t,o){var r=e;if("string"==typeof t&&(t=je(t)),!t||!m(e))return!1;for(var s,a,c=0,l=t.length;c<l;c++)s=e,a=t[c],"*"===a.charAt(0)&&(a=ze(a.slice(1)).get.call(r,r)),c<l-1?(e=e[a],m(e)||(e={},"production"!==n.env.NODE_ENV&&s._isVue&&lo(t,s),i(s,a,e))):Ln(e)?e.$set(a,o):a in e?e[a]=o:("production"!==n.env.NODE_ENV&&e._isVue&&lo(t,e),i(e,a,o));return!0}function Pe(){}function Re(e,t){var n=ko.length;return ko[n]=t?e.replace(bo,"\\n"):e,'"'+n+'"'}function Fe(e){var t=e.charAt(0),n=e.slice(1);return po.test(n)?e:(n=n.indexOf('"')>-1?n.replace(go,Me):n,t+"scope."+n)}function Me(e,t){return ko[t]}function Ie(e){yo.test(e)&&"production"!==n.env.NODE_ENV&&Di("Avoid using reserved keywords in expression: "+e),ko.length=0;var t=e.replace(mo,Re).replace(_o,"");return t=(" "+t).replace(wo,Fe).replace(go,Me),Le(t)}function Le(e){try{return new Function("scope","return "+e+";")}catch(t){return"production"!==n.env.NODE_ENV&&Di(t.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+e),Pe}}function He(e){var t=De(e);return t?function(e,n){Ve(e,t,n)}:void("production"!==n.env.NODE_ENV&&Di("Invalid setter expression: "+e))}function ze(e,t){e=e.trim();var n=uo.get(e);if(n)return t&&!n.set&&(n.set=He(n.exp)),n;var i={exp:e};return i.get=Be(e)&&e.indexOf("[")<0?Le("scope."+e):Ie(e),t&&(i.set=He(e)),uo.put(e,i),i}function Be(e){return Eo.test(e)&&!xo.test(e)&&"Math."!==e.slice(0,5)}function Ue(){$o.length=0,No.length=0,Oo={},Ao={},To=!1}function We(){for(var e=!0;e;)e=!1,qe($o),qe(No),$o.length?e=!0:(Bn&&ji.devtools&&Bn.emit("flush"),Ue())}function qe(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.id;if(Oo[o]=null,i.run(),"production"!==n.env.NODE_ENV&&null!=Oo[o]&&(Ao[o]=(Ao[o]||0)+1,Ao[o]>ji._maxUpdateCount)){Di('You may have an infinite update loop for watcher with expression "'+i.expression+'"',i.vm);break}}e.length=0}function Je(e){var t=e.id;if(null==Oo[t]){var n=e.user?No:$o;Oo[t]=n.length,n.push(e),To||(To=!0,oi(We))}}function Qe(e,t,n,i){i&&b(this,i);var o="function"==typeof t;if(this.vm=e,e._watchers.push(this),this.expression=t,this.cb=n,this.id=++jo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ri,this.newDepIds=new ri,this.prevError=null,o)this.getter=t,this.setter=void 0;else{var r=ze(t,this.twoWay);this.getter=r.get,this.setter=r.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function Ye(e,t){var n=void 0,i=void 0;t||(t=Do,t.clear());var o=Ln(e),r=m(e);if((o||r)&&Object.isExtensible(e)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(o)for(n=e.length;n--;)Ye(e[n],t);else if(r)for(i=Object.keys(e),n=i.length;n--;)Ye(e[i[n]],t)}}function Ge(e){return re(e)&&he(e.content)}function Ke(e,t){var n=t?e:e.trim(),i=Vo.get(n);if(i)return i;var o=document.createDocumentFragment(),r=e.match(Fo),s=Mo.test(e),a=Io.test(e);if(r||s||a){var c=r&&r[1],l=Ro[c]||Ro.efault,h=l[0],u=l[1],f=l[2],p=document.createElement("div");for(p.innerHTML=u+e+f;h--;)p=p.lastChild;for(var d;d=p.firstChild;)o.appendChild(d)}else o.appendChild(document.createTextNode(e));return t||ie(o),Vo.put(n,o),o}function Ze(e){if(Ge(e))return Ke(e.innerHTML);if("SCRIPT"===e.tagName)return Ke(e.textContent);for(var t,n=Xe(e),i=document.createDocumentFragment();t=n.firstChild;)i.appendChild(t);return ie(i),i}function Xe(e){if(!e.querySelectorAll)return e.cloneNode();var t,n,i,o=e.cloneNode(!0);if(Lo){var r=o;if(Ge(e)&&(e=e.content,r=o.content),n=e.querySelectorAll("template"),n.length)for(i=r.querySelectorAll("template"),t=i.length;t--;)i[t].parentNode.replaceChild(Xe(n[t]),i[t])}if(Ho)if("TEXTAREA"===e.tagName)o.value=e.value;else if(n=e.querySelectorAll("textarea"),n.length)for(i=o.querySelectorAll("textarea"),t=i.length;t--;)i[t].value=n[t].value;return o}function et(e,t,n){var i,o;return he(e)?(ie(e),t?Xe(e):e):("string"==typeof e?n||"#"!==e.charAt(0)?o=Ke(e,n):(o=Po.get(e),o||(i=document.getElementById(e.slice(1)),i&&(o=Ze(i),Po.put(e,o)))):e.nodeType&&(o=Ze(e)),o&&t?Xe(o):o)}function tt(e,t,n,i,o,r){this.children=[],this.childFrags=[],this.vm=t,this.scope=o,this.inserted=!1,this.parentFrag=r,r&&r.childFrags.push(this),this.unlink=e(t,n,i,o,this);var s=this.single=1===n.childNodes.length&&!n.childNodes[0].__v_anchor;s?(this.node=n.childNodes[0],this.before=nt,this.remove=it):(this.node=se("fragment-start"),this.end=se("fragment-end"),this.frag=n,Q(this.node,n),n.appendChild(this.end),this.before=ot,this.remove=rt),this.node.__v_frag=this}function nt(e,t){this.inserted=!0;var n=t!==!1?F:W;n(this.node,e,this.vm),H(this.node)&&this.callHook(st)}function it(){this.inserted=!1;var e=H(this.node),t=this;this.beforeRemove(),M(this.node,this.vm,function(){e&&t.callHook(at),t.destroy()})}function ot(e,t){this.inserted=!0;var n=this.vm,i=t!==!1?F:W;ce(this.node,this.end,function(t){i(t,e,n)}),H(this.node)&&this.callHook(st)}function rt(){this.inserted=!1;var e=this,t=H(this.node);this.beforeRemove(),le(this.node,this.end,this.vm,this.frag,function(){t&&e.callHook(at),e.destroy()})}function st(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function at(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}function ct(e,t){this.vm=e;var n,i="string"==typeof t;i||re(t)&&!t.hasAttribute("v-if")?n=et(t,!0):(n=document.createDocumentFragment(),n.appendChild(t)),this.template=n;var o,r=e.constructor.cid;if(r>0){var s=r+(i?t:ue(t));o=Uo.get(s),o||(o=It(n,e.$options,!0),Uo.put(s,o))}else o=It(n,e.$options,!0);this.linker=o}function lt(e,t,n){var i=e.node.previousSibling;if(i){for(e=i.__v_frag;!(e&&e.forId===n&&e.inserted||i===t);){if(i=i.previousSibling,!i)return;e=i.__v_frag}return e}}function ht(e){var t=e.node;if(e.end)for(;!t.__vue__&&t!==e.end&&t.nextSibling;)t=t.nextSibling;return t.__vue__}function ut(e){for(var t=-1,n=new Array(Math.floor(e));++t<e;)n[t]=t;return n}function ft(e,t,n,i){return i?"$index"===i?e:i.charAt(0).match(/\w/)?Se(n,i):n[i]:t||n}function pt(e,t,n){for(var i,o,r,s=t?[]:null,a=0,c=e.options.length;a<c;a++)if(i=e.options[a],r=n?i.hasAttribute("selected"):i.selected){if(o=i.hasOwnProperty("_value")?i._value:i.value,!t)return o;s.push(o)}return s}function dt(e,t){for(var n=e.length;n--;)if(C(e[n],t))return n;return-1}function vt(e,t){var n=t.map(function(e){var t=e.charCodeAt(0);return t>47&&t<58?parseInt(e,10):1===e.length&&(t=e.toUpperCase().charCodeAt(0),t>64&&t<91)?t:ur[e]});return n=[].concat.apply([],n),function(t){if(n.indexOf(t.keyCode)>-1)return e.call(this,t)}}function yt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function _t(e){return function(t){return t.preventDefault(),e.call(this,t)}}function bt(e){return function(t){if(t.target===t.currentTarget)return e.call(this,t)}}function mt(e){if(yr[e])return yr[e];var t=gt(e);return yr[e]=yr[t]=t,t}function gt(e){e=d(e);var t=f(e),n=t.charAt(0).toUpperCase()+t.slice(1);_r||(_r=document.createElement("div"));var i,o=pr.length;if("filter"!==t&&t in _r.style)return{kebab:e,camel:t};for(;o--;)if(i=dr[o]+n,i in _r.style)return{kebab:pr[o]+e,camel:i}}function Et(e){var t=[];if(Ln(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];if(o)if("string"==typeof o)t.push(o);else for(var r in o)o[r]&&t.push(r)}else if(m(e))for(var s in e)e[s]&&t.push(s);return t}function wt(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}function xt(e,t,n){function i(){++r>=o?n():e[r].call(t,i)}var o=e.length,r=0;e[0].call(t,i)}function kt(e,t,i){for(var o,r,a,c,l,h,u,p=[],v=Object.keys(t),y=v.length;y--;)if(r=v[y],o=t[r]||Sr,"production"===n.env.NODE_ENV||"$data"!==r)if(l=f(r),Vr.test(l)){if(u={name:r,path:l,options:o,mode:Dr.ONE_WAY,raw:null},a=d(r),null===(c=B(e,a))&&(null!==(c=B(e,a+".sync"))?u.mode=Dr.TWO_WAY:null!==(c=B(e,a+".once"))&&(u.mode=Dr.ONE_TIME)),null!==c)u.raw=c,h=A(c),c=h.expression,u.filters=h.filters,s(c)&&!h.filters?u.optimizedLiteral=!0:(u.dynamic=!0,"production"===n.env.NODE_ENV||u.mode!==Dr.TWO_WAY||Pr.test(c)||(u.mode=Dr.ONE_WAY,Di("Cannot bind two-way prop with non-settable parent path: "+c,i))),u.parentPath=c,"production"!==n.env.NODE_ENV&&o.twoWay&&u.mode!==Dr.TWO_WAY&&Di('Prop "'+r+'" expects a two-way binding type.',i);else if(null!==(c=z(e,a)))u.raw=c;else if("production"!==n.env.NODE_ENV){var _=l.toLowerCase();c=/[A-Z\-]/.test(r)&&(e.getAttribute(_)||e.getAttribute(":"+_)||e.getAttribute("v-bind:"+_)||e.getAttribute(":"+_+".once")||e.getAttribute("v-bind:"+_+".once")||e.getAttribute(":"+_+".sync")||e.getAttribute("v-bind:"+_+".sync")),c?Di("Possible usage error for prop `"+_+"` - did you mean `"+a+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",i):o.required&&Di("Missing required prop: "+r,i)}p.push(u)}else"production"!==n.env.NODE_ENV&&Di('Invalid prop key: "'+r+'". Prop keys must be valid identifiers.',i);else Di("Do not use $data as prop.",i);return Ct(p)}function Ct(e){return function(t,n){t._props={};for(var i,o,s,a,c,f=t.$options.propsData,p=e.length;p--;)if(i=e[p],c=i.raw,o=i.path,s=i.options,t._props[o]=i,f&&r(f,o)&&Nt(t,i,f[o]),null===c)Nt(t,i,void 0);else if(i.dynamic)i.mode===Dr.ONE_TIME?(a=(n||t._context||t).$get(i.parentPath),Nt(t,i,a)):t._context?t._bindDir({name:"prop",def:Fr,prop:i},null,null,n):Nt(t,i,t.$get(i.parentPath));else if(i.optimizedLiteral){var v=u(c);a=v===c?h(l(c)):v,Nt(t,i,a)}else a=s.type===Boolean&&(""===c||c===d(i.name))||c,Nt(t,i,a)}}function $t(e,t,n,i){var o=t.dynamic&&Be(t.parentPath),r=n;void 0===r&&(r=At(e,t)),r=jt(t,r,e);var s=r!==n;Tt(t,r,e)||(r=void 0),o&&!s?we(function(){i(r)}):i(r)}function Nt(e,t,n){$t(e,t,n,function(n){Ne(e,t.path,n)})}function Ot(e,t,n){$t(e,t,n,function(n){e[t.path]=n})}function At(e,t){var i=t.options;if(!r(i,"default"))return i.type!==Boolean&&void 0;var o=i["default"];return m(o)&&"production"!==n.env.NODE_ENV&&Di('Invalid default value for prop "'+t.name+'": Props with type Object/Array must use a factory function to return the default value.',e),"function"==typeof o&&i.type!==Function?o.call(e):o}function Tt(e,t,i){if(!e.options.required&&(null===e.raw||null==t))return!0;var o=e.options,r=o.type,s=!r,a=[];if(r){Ln(r)||(r=[r]);for(var c=0;c<r.length&&!s;c++){var l=Dt(t,r[c]);a.push(l.expectedType),s=l.valid}}if(!s)return"production"!==n.env.NODE_ENV&&Di('Invalid prop: type check failed for prop "'+e.name+'". Expected '+a.map(St).join(", ")+", got "+Vt(t)+".",i),!1;var h=o.validator;return!(h&&!h(t))||("production"!==n.env.NODE_ENV&&Di('Invalid prop: custom validator check failed for prop "'+e.name+'".',i),!1)}function jt(e,t,i){var o=e.options.coerce;return o?"function"==typeof o?o(t):("production"!==n.env.NODE_ENV&&Di('Invalid coerce for prop "'+e.name+'": expected function, got '+typeof o+".",i),t):t}function Dt(e,t){var n,i;return t===String?(i="string",n=typeof e===i):t===Number?(i="number",n=typeof e===i):t===Boolean?(i="boolean",n=typeof e===i):t===Function?(i="function",n=typeof e===i):t===Object?(i="object",n=g(e)):t===Array?(i="array",n=Ln(e)):n=e instanceof t,{valid:n,expectedType:i}}function St(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"custom type"}function Vt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Pt(e){Mr.push(e),Ir||(Ir=!0,oi(Rt))}function Rt(){for(var e=document.documentElement.offsetHeight,t=0;t<Mr.length;t++)Mr[t]();return Mr=[],Ir=!1,e}function Ft(e,t,i,o){this.id=t,this.el=e,this.enterClass=i&&i.enterClass||t+"-enter",this.leaveClass=i&&i.leaveClass||t+"-leave",this.hooks=i,this.vm=o,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=i&&i.type,"production"!==n.env.NODE_ENV&&this.type&&this.type!==Lr&&this.type!==Hr&&Di('invalid CSS transition type for transition="'+this.id+'": '+this.type,o);var r=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(e){r[e]=y(r[e],r)})}function Mt(e){if(/svg$/.test(e.namespaceURI)){var t=e.getBoundingClientRect();return!(t.width||t.height)}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function It(e,t,n){var i=n||!t._asComponent?qt(e,t):null,o=i&&i.terminal||hn(e)||!e.hasChildNodes()?null:Zt(e.childNodes,t);return function(e,t,n,r,s){var a=_(t.childNodes),c=Lt(function(){i&&i(e,t,n,r,s),o&&o(e,a,n,r,s)},e);return zt(e,c)}}function Lt(e,t){"production"===n.env.NODE_ENV&&(t._directives=[]);var i=t._directives.length;e();var o=t._directives.slice(i);o.sort(Ht);for(var r=0,s=o.length;r<s;r++)o[r]._bind();return o}function Ht(e,t){return e=e.descriptor.def.priority||es,t=t.descriptor.def.priority||es,e>t?-1:e===t?0:1}function zt(e,t,n,i){function o(o){Bt(e,t,o),n&&i&&Bt(n,i)}return o.dirs=t,o}function Bt(e,t,i){for(var o=t.length;o--;)t[o]._teardown(),"production"===n.env.NODE_ENV||i||e._directives.$remove(t[o])}function Ut(e,t,n,i){var o=kt(t,n,e),r=Lt(function(){o(e,i)},e);return zt(e,r)}function Wt(e,t,i){var o,r,s=t._containerAttrs,a=t._replacerAttrs;if(11!==e.nodeType)t._asComponent?(s&&i&&(o=sn(s,i)),a&&(r=sn(a,t))):r=sn(e.attributes,t);else if("production"!==n.env.NODE_ENV&&s){var c=s.filter(function(e){return e.name.indexOf("_v-")<0&&!Gr.test(e.name)&&"slot"!==e.name}).map(function(e){return'"'+e.name+'"'});if(c.length){var l=c.length>1;Di("Attribute"+(l?"s ":" ")+c.join(", ")+(l?" are":" is")+" ignored on component <"+t.el.tagName.toLowerCase()+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return t._containerAttrs=t._replacerAttrs=null,function(e,t,n){var i,s=e._context;s&&o&&(i=Lt(function(){o(s,t,null,n)},s));var a=Lt(function(){r&&r(e,t)},e);return zt(e,a,s,i)}}function qt(e,t){var n=e.nodeType;return 1!==n||hn(e)?3===n&&e.data.trim()?Qt(e,t):null:Jt(e,t)}function Jt(e,t){if("TEXTAREA"===e.tagName){var n=D(e.value);n&&(e.setAttribute(":value",S(n)),e.value="")}var i,o=e.hasAttributes(),r=o&&_(e.attributes);return o&&(i=nn(e,r,t)),i||(i=en(e,t)),i||(i=tn(e,t)),!i&&o&&(i=sn(r,t)),i}function Qt(e,t){if(e._skip)return Yt;var n=D(e.wholeText);if(!n)return null;for(var i=e.nextSibling;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var o,r,s=document.createDocumentFragment(),a=0,c=n.length;a<c;a++)r=n[a],o=r.tag?Gt(r,t):document.createTextNode(r.value),s.appendChild(o);return Kt(n,s,t)}function Yt(e,t){J(t)}function Gt(e,t){function n(t){if(!e.descriptor){var n=A(e.value);e.descriptor={name:t,def:Ar[t],expression:n.expression,filters:n.filters}}}var i;return e.oneTime?i=document.createTextNode(e.value):e.html?(i=document.createComment("v-html"),n("html")):(i=document.createTextNode(" "),n("text")),i}function Kt(e,t){return function(n,i,o,r){for(var s,a,l,h=t.cloneNode(!0),u=_(h.childNodes),f=0,p=e.length;f<p;f++)s=e[f],a=s.value,s.tag&&(l=u[f],s.oneTime?(a=(r||n).$eval(a),s.html?Y(l,et(a,!0)):l.data=c(a)):n._bindDir(s.descriptor,l,o,r));Y(i,h)}}function Zt(e,t){for(var n,i,o,r=[],s=0,a=e.length;s<a;s++)o=e[s],n=qt(o,t),i=n&&n.terminal||"SCRIPT"===o.tagName||!o.hasChildNodes()?null:Zt(o.childNodes,t),r.push(n,i);return r.length?Xt(r):null}function Xt(e){return function(t,n,i,o,r){for(var s,a,c,l=0,h=0,u=e.length;l<u;h++){s=n[h],a=e[l++],c=e[l++];var f=_(s.childNodes);a&&a(t,s,i,o,r),c&&c(t,f,i,o,r)}}}function en(e,t){var n=e.tagName.toLowerCase();if(!Ri.test(n)){var i=ge(t,"elementDirectives",n);return i?rn(e,n,"",t,i):void 0}}function tn(e,t){var n=fe(e,t);if(n){var i=ae(e),o={name:"component",ref:i,expression:n.id,def:Qr.component,modifiers:{literal:!n.dynamic}},r=function(e,t,n,r,s){i&&Ne((r||e).$refs,i,null),e._bindDir(o,t,n,r,s)};return r.terminal=!0,r}}function nn(e,t,n){if(null!==z(e,"v-pre"))return on;if(e.hasAttribute("v-else")){var i=e.previousElementSibling;if(i&&i.hasAttribute("v-if"))return on}for(var o,r,s,a,c,l,h,u,f,p,d=0,v=t.length;d<v;d++)o=t[d],r=o.name.replace(Zr,""),(c=r.match(Kr))&&(f=ge(n,"directives",c[1]),f&&f.terminal&&(!p||(f.priority||ts)>p.priority)&&(p=f,h=o.name,a=an(o.name),s=o.value,l=c[1],u=c[2]));return p?rn(e,l,s,n,p,h,u,a):void 0}function on(){}function rn(e,t,n,i,o,r,s,a){var c=A(n),l={name:t,arg:s,expression:c.expression,filters:c.filters,raw:n,attr:r,modifiers:a,def:o};"for"!==t&&"router-view"!==t||(l.ref=ae(e));var h=function(e,t,n,i,o){l.ref&&Ne((i||e).$refs,l.ref,null),e._bindDir(l,t,n,i,o)};return h.terminal=!0,h}function sn(e,t){function i(e,t,n){var i=n&&ln(n),o=!i&&A(s);y.push({name:e,attr:a,raw:c,def:t,arg:h,modifiers:u,expression:o&&o.expression,filters:o&&o.filters,interp:n,hasOneTime:i})}for(var o,r,s,a,c,l,h,u,f,p,d,v=e.length,y=[];v--;)if(o=e[v],r=a=o.name,s=c=o.value,p=D(s),h=null,u=an(r),r=r.replace(Zr,""),p)s=S(p),h=r,i("bind",Ar.bind,p),"production"!==n.env.NODE_ENV&&"class"===r&&Array.prototype.some.call(e,function(e){return":class"===e.name||"v-bind:class"===e.name})&&Di('class="'+c+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',t);else if(Xr.test(r))u.literal=!Yr.test(r),i("transition",Qr.transition);else if(Gr.test(r))h=r.replace(Gr,""),i("on",Ar.on);else if(Yr.test(r))l=r.replace(Yr,""),"style"===l||"class"===l?i(l,Qr[l]):(h=l,i("bind",Ar.bind));else if(d=r.match(Kr)){if(l=d[1],h=d[2],"else"===l)continue;f=ge(t,"directives",l,!0),f&&i(l,f)}if(y.length)return cn(y)}function an(e){var t=Object.create(null),n=e.match(Zr);if(n)for(var i=n.length;i--;)t[n[i].slice(1)]=!0;return t}function cn(e){return function(t,n,i,o,r){for(var s=e.length;s--;)t._bindDir(e[s],n,i,o,r)}}function ln(e){for(var t=e.length;t--;)if(e[t].oneTime)return!0}function hn(e){return"SCRIPT"===e.tagName&&(!e.hasAttribute("type")||"text/javascript"===e.getAttribute("type"))}function un(e,t){return t&&(t._containerAttrs=pn(e)),re(e)&&(e=et(e)),t&&(t._asComponent&&!t.template&&(t.template="<slot></slot>"),t.template&&(t._content=ne(e),e=fn(e,t))),he(e)&&(Q(se("v-start",!0),e),e.appendChild(se("v-end",!0))),e}function fn(e,t){var i=t.template,o=et(i,!0);if(o){var r=o.firstChild,s=r.tagName&&r.tagName.toLowerCase();return t.replace?(e===document.body&&"production"!==n.env.NODE_ENV&&Di("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),o.childNodes.length>1||1!==r.nodeType||"component"===s||ge(t,"components",s)||U(r,"is")||ge(t,"elementDirectives",s)||r.hasAttribute("v-for")||r.hasAttribute("v-if")?o:(t._replacerAttrs=pn(r),dn(e,r),r)):(e.appendChild(o),e)}"production"!==n.env.NODE_ENV&&Di("Invalid template option: "+i)}function pn(e){if(1===e.nodeType&&e.hasAttributes())return _(e.attributes)}function dn(e,t){for(var n,i,o=e.attributes,r=o.length;r--;)n=o[r].name,i=o[r].value,t.hasAttribute(n)||ns.test(n)?"class"===n&&!D(i)&&(i=i.trim())&&i.split(/\s+/).forEach(function(e){ee(t,e)}):t.setAttribute(n,i)}function vn(e,t){if(t){for(var i,o,r=e._slotContents=Object.create(null),s=0,a=t.children.length;s<a;s++)i=t.children[s],(o=i.getAttribute("slot"))&&(r[o]||(r[o]=[])).push(i),"production"!==n.env.NODE_ENV&&B(i,"slot")&&Di('The "slot" attribute must be static.',e.$parent);for(o in r)r[o]=yn(r[o],t);if(t.hasChildNodes()){var c=t.childNodes;if(1===c.length&&3===c[0].nodeType&&!c[0].data.trim())return;r["default"]=yn(t.childNodes,t)}}}function yn(e,t){var n=document.createDocumentFragment();e=_(e);for(var i=0,o=e.length;i<o;i++){var r=e[i];!re(r)||r.hasAttribute("v-if")||r.hasAttribute("v-for")||(t.removeChild(r),r=et(r,!0)),n.appendChild(r)}return n}function _n(e){function t(){}function i(e,t){var n=new Qe(t,e,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),
Ee.target&&n.depend(),n.value}}Object.defineProperty(e.prototype,"$data",{get:function(){return this._data},set:function(e){e!==this._data&&this._setData(e)}}),e.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},e.prototype._initProps=function(){var e=this.$options,t=e.el,i=e.props;i&&!t&&"production"!==n.env.NODE_ENV&&Di("Props will not be compiled if no `el` option is provided at instantiation.",this),t=e.el=L(t),this._propsUnlinkFn=t&&1===t.nodeType&&i?Ut(this,t,i,this._scope):null},e.prototype._initData=function(){var e=this.$options.data,t=this._data=e?e():{};g(t)||(t={},"production"!==n.env.NODE_ENV&&Di("data functions should return an object.",this));var i,o,s=this._props,a=Object.keys(t);for(i=a.length;i--;)o=a[i],s&&r(s,o)?"production"!==n.env.NODE_ENV&&Di('Data field "'+o+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(o);$e(t,this)},e.prototype._setData=function(e){e=e||{};var t=this._data;this._data=e;var n,i,o;for(n=Object.keys(t),o=n.length;o--;)i=n[o],i in e||this._unproxy(i);for(n=Object.keys(e),o=n.length;o--;)i=n[o],r(this,i)||this._proxy(i);t.__ob__.removeVm(this),$e(e,this),this._digest()},e.prototype._proxy=function(e){if(!a(e)){var t=this;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(n){t._data[e]=n}})}},e.prototype._unproxy=function(e){a(e)||delete this[e]},e.prototype._digest=function(){for(var e=0,t=this._watchers.length;e<t;e++)this._watchers[e].update(!0)},e.prototype._initComputed=function(){var e=this.$options.computed;if(e)for(var n in e){var o=e[n],r={enumerable:!0,configurable:!0};"function"==typeof o?(r.get=i(o,this),r.set=t):(r.get=o.get?o.cache!==!1?i(o.get,this):y(o.get,this):t,r.set=o.set?y(o.set,this):t),Object.defineProperty(this,n,r)}},e.prototype._initMethods=function(){var e=this.$options.methods;if(e)for(var t in e)this[t]=y(e[t],this)},e.prototype._initMeta=function(){var e=this.$options._meta;if(e)for(var t in e)Ne(this,t,e[t])}}function bn(e){function t(e,t){for(var n,i,o,r=t.attributes,s=0,a=r.length;s<a;s++)n=r[s].name,os.test(n)&&(n=n.replace(os,""),i=r[s].value,Be(i)&&(i+=".apply(this, $arguments)"),o=(e._scope||e._context).$eval(i,!0),o._fromParent=!0,e.$on(n.replace(os),o))}function i(e,t,n){if(n){var i,r,s,a;for(r in n)if(i=n[r],Ln(i))for(s=0,a=i.length;s<a;s++)o(e,t,r,i[s]);else o(e,t,r,i)}}function o(e,t,i,r,s){var a=typeof r;if("function"===a)e[t](i,r,s);else if("string"===a){var c=e.$options.methods,l=c&&c[r];l?e[t](i,l,s):"production"!==n.env.NODE_ENV&&Di('Unknown method: "'+r+'" when registering callback for '+t+': "'+i+'".',e)}else r&&"object"===a&&o(e,t,i,r.handler,r)}function r(){this._isAttached||(this._isAttached=!0,this.$children.forEach(s))}function s(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function a(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(c))}function c(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}e.prototype._initEvents=function(){var e=this.$options;e._asComponent&&t(this,e.el),i(this,"$on",e.events),i(this,"$watch",e.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",r),this.$on("hook:detached",a)},e.prototype._callHook=function(e){this.$emit("pre-hook:"+e);var t=this.$options[e];if(t)for(var n=0,i=t.length;n<i;n++)t[n].call(this);this.$emit("hook:"+e)}}function mn(){}function gn(e,t,i,o,r,s){this.vm=t,this.el=i,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=o,this._scope=r,this._frag=s,"production"!==n.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function En(e){e.prototype._updateRef=function(e){var t=this.$options._ref;if(t){var n=(this._scope||this._context).$refs;e?n[t]===this&&(n[t]=null):n[t]=this}},e.prototype._compile=function(e){var t=this.$options,n=e;if(e=un(e,t),this._initElement(e),1!==e.nodeType||null===z(e,"v-pre")){var i=this._context&&this._context.$options,o=Wt(e,t,i);vn(this,t._content);var r,s=this.constructor;t._linkerCachable&&(r=s.linker,r||(r=s.linker=It(e,t)));var a=o(this,e,this._scope),c=r?r(this,e):It(e,t)(this,e);this._unlinkFn=function(){a(),c(!0)},t.replace&&Y(n,e),this._isCompiled=!0,this._callHook("compiled")}},e.prototype._initElement=function(e){he(e)?(this._isFragment=!0,this.$el=this._fragmentStart=e.firstChild,this._fragmentEnd=e.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=e):this.$el=e,this.$el.__vue__=this,this._callHook("beforeCompile")},e.prototype._bindDir=function(e,t,n,i,o){this._directives.push(new gn(e,this,t,n,i,o))},e.prototype._destroy=function(e,t){if(this._isBeingDestroyed)return void(t||this._cleanup());var n,i,o=this,r=function(){!n||i||t||o._cleanup()};e&&this.$el&&(i=!0,this.$remove(function(){i=!1,r()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var s,a=this.$parent;for(a&&!a._isBeingDestroyed&&(a.$children.$remove(this),this._updateRef(!0)),s=this.$children.length;s--;)this.$children[s].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),s=this._watchers.length;s--;)this._watchers[s].teardown();this.$el&&(this.$el.__vue__=null),n=!0,r()},e.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function wn(e){e.prototype._applyFilters=function(e,t,n,i){var o,r,s,a,c,l,h,u,f;for(l=0,h=n.length;l<h;l++)if(o=n[i?h-l-1:l],r=ge(this.$options,"filters",o.name,!0),r&&(r=i?r.write:r.read||r,"function"==typeof r)){if(s=i?[e,t]:[e],c=i?2:1,o.args)for(u=0,f=o.args.length;u<f;u++)a=o.args[u],s[u+c]=a.dynamic?this.$get(a.value):a.value;e=r.apply(this,s)}return e},e.prototype._resolveComponent=function(t,i){var o;if(o="function"==typeof t?t:ge(this.$options,"components",t,!0))if(o.options)i(o);else if(o.resolved)i(o.resolved);else if(o.requested)o.pendingCallbacks.push(i);else{o.requested=!0;var r=o.pendingCallbacks=[i];o.call(this,function(t){g(t)&&(t=e.extend(t)),o.resolved=t;for(var n=0,i=r.length;n<i;n++)r[n](t)},function(e){"production"!==n.env.NODE_ENV&&Di("Failed to resolve async component"+("string"==typeof t?": "+t:"")+". "+(e?"\nReason: "+e:""))})}}}function xn(e){function t(e){return JSON.parse(JSON.stringify(e))}e.prototype.$get=function(e,t){var n=ze(e);if(n){if(t){var i=this;return function(){i.$arguments=_(arguments);var e=n.get.call(i,i);return i.$arguments=null,e}}try{return n.get.call(this,this)}catch(o){}}},e.prototype.$set=function(e,t){var n=ze(e,!0);n&&n.set&&n.set.call(this,this,t)},e.prototype.$delete=function(e){o(this._data,e)},e.prototype.$watch=function(e,t,n){var i,o=this;"string"==typeof e&&(i=A(e),e=i.expression);var r=new Qe(o,e,t,{deep:n&&n.deep,sync:n&&n.sync,filters:i&&i.filters,user:!n||n.user!==!1});return n&&n.immediate&&t.call(o,r.value),function(){r.teardown()}},e.prototype.$eval=function(e,t){if(rs.test(e)){var n=A(e),i=this.$get(n.expression,t);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(e,t)},e.prototype.$interpolate=function(e){var t=D(e),n=this;return t?1===t.length?n.$eval(t[0].value)+"":t.map(function(e){return e.tag?n.$eval(e.value):e.value}).join(""):e},e.prototype.$log=function(e){var n=e?Se(this._data,e):this._data;if(n&&(n=t(n)),!e){var i;for(i in this.$options.computed)n[i]=t(this[i]);if(this._props)for(i in this._props)n[i]=t(this[i])}console.log(n)}}function kn(e){function t(e,t,i,o,r,s){t=n(t);var a=!H(t),c=o===!1||a?r:s,l=!a&&!e._isAttached&&!H(e.$el);return e._isFragment?(ce(e._fragmentStart,e._fragmentEnd,function(n){c(n,t,e)}),i&&i()):c(e.$el,t,e,i),l&&e._callHook("attached"),e}function n(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t,n,i){t.appendChild(e),i&&i()}function o(e,t,n,i){W(e,t),i&&i()}function r(e,t,n){J(e),n&&n()}e.prototype.$nextTick=function(e){oi(e,this)},e.prototype.$appendTo=function(e,n,o){return t(this,e,n,o,i,R)},e.prototype.$prependTo=function(e,t,i){return e=n(e),e.hasChildNodes()?this.$before(e.firstChild,t,i):this.$appendTo(e,t,i),this},e.prototype.$before=function(e,n,i){return t(this,e,n,i,o,F)},e.prototype.$after=function(e,t,i){return e=n(e),e.nextSibling?this.$before(e.nextSibling,t,i):this.$appendTo(e.parentNode,t,i),this},e.prototype.$remove=function(e,t){if(!this.$el.parentNode)return e&&e();var n=this._isAttached&&H(this.$el);n||(t=!1);var i=this,o=function(){n&&i._callHook("detached"),e&&e()};if(this._isFragment)le(this._fragmentStart,this._fragmentEnd,this,this._fragment,o);else{var s=t===!1?r:M;s(this.$el,this,o)}return this}}function Cn(e){function t(e,t,i){var o=e.$parent;if(o&&i&&!n.test(t))for(;o;)o._eventsCount[t]=(o._eventsCount[t]||0)+i,o=o.$parent}e.prototype.$on=function(e,n){return(this._events[e]||(this._events[e]=[])).push(n),t(this,e,1),this},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(this,arguments)}var i=this;return n.fn=t,this.$on(e,n),this},e.prototype.$off=function(e,n){var i;if(!arguments.length){if(this.$parent)for(e in this._events)i=this._events[e],i&&t(this,e,-i.length);return this._events={},this}if(i=this._events[e],!i)return this;if(1===arguments.length)return t(this,e,-i.length),this._events[e]=null,this;for(var o,r=i.length;r--;)if(o=i[r],o===n||o.fn===n){t(this,e,-1),i.splice(r,1);break}return this},e.prototype.$emit=function(e){var t="string"==typeof e;e=t?e:e.name;var n=this._events[e],i=t||!n;if(n){n=n.length>1?_(n):n;var o=t&&n.some(function(e){return e._fromParent});o&&(i=!1);for(var r=_(arguments,1),s=0,a=n.length;s<a;s++){var c=n[s],l=c.apply(this,r);l!==!0||o&&!c._fromParent||(i=!0)}}return i},e.prototype.$broadcast=function(e){var t="string"==typeof e;if(e=t?e:e.name,this._eventsCount[e]){var n=this.$children,i=_(arguments);t&&(i[0]={name:e,source:this});for(var o=0,r=n.length;o<r;o++){var s=n[o],a=s.$emit.apply(s,i);a&&s.$broadcast.apply(s,i)}return this}},e.prototype.$dispatch=function(e){var t=this.$emit.apply(this,arguments);if(t){var n=this.$parent,i=_(arguments);for(i[0]={name:e,source:this};n;)t=n.$emit.apply(n,i),n=t?n.$parent:null;return this}};var n=/^hook:/}function $n(e){function t(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void("production"!==n.env.NODE_ENV&&Di("$mount() should be called only once.",this)):(e=L(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),H(this.$el)?(this._callHook("attached"),t.call(this)):this.$once("hook:attached",t),this)},e.prototype.$destroy=function(e,t){this._destroy(e,t)},e.prototype.$compile=function(e,t,n,i){return It(e,this.$options,!0)(this,e,t,n,i)}}function Nn(e){this._init(e)}function On(e,t,n){return n=n?parseInt(n,10):0,t=l(t),"number"==typeof t?e.slice(n,n+t):e}function An(e,t,n){if(e=ls(e),null==t)return e;if("function"==typeof t)return e.filter(t);t=(""+t).toLowerCase();for(var i,o,r,s,a="in"===n?3:2,c=Array.prototype.concat.apply([],_(arguments,a)),l=[],h=0,u=e.length;h<u;h++)if(i=e[h],r=i&&i.$value||i,s=c.length){for(;s--;)if(o=c[s],"$key"===o&&jn(i.$key,t)||jn(Se(r,o),t)){l.push(i);break}}else jn(i,t)&&l.push(i);return l}function Tn(e){function t(e,t,n){var o=i[n];return o&&("$key"!==o&&(m(e)&&"$value"in e&&(e=e.$value),m(t)&&"$value"in t&&(t=t.$value)),e=m(e)?Se(e,o):e,t=m(t)?Se(t,o):t),e===t?0:e>t?r:-r}var n=null,i=void 0;e=ls(e);var o=_(arguments,1),r=o[o.length-1];"number"==typeof r?(r=r<0?-1:1,o=o.length>1?o.slice(0,-1):o):r=1;var s=o[0];return s?("function"==typeof s?n=function(e,t){return s(e,t)*r}:(i=Array.prototype.concat.apply([],o),n=function(e,o,r){return r=r||0,r>=i.length-1?t(e,o,r):t(e,o,r)||n(e,o,r+1)}),e.slice().sort(n)):e}function jn(e,t){var n;if(g(e)){var i=Object.keys(e);for(n=i.length;n--;)if(jn(e[i[n]],t))return!0}else if(Ln(e)){for(n=e.length;n--;)if(jn(e[n],t))return!0}else if(null!=e)return e.toString().toLowerCase().indexOf(t)>-1}function Dn(e){function t(e){return new Function("return function "+v(e)+" (options) { this._init(options) }")()}e.options={directives:Ar,elementDirectives:cs,filters:us,transitions:{},components:{},partials:{},replace:!0},e.util=qi,e.config=ji,e.set=i,e["delete"]=o,e.nextTick=oi,e.compiler=is,e.FragmentFactory=ct,e.internalDirectives=Qr,e.parsers={path:ho,text:Oi,template:zo,directive:wi,expression:Co},e.cid=0;var r=1;e.extend=function(e){e=e||{};var i=this,o=0===i.cid;if(o&&e._Ctor)return e._Ctor;var s=e.name||i.options.name;"production"!==n.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(s)||(Di('Invalid component name: "'+s+'". Component names can only contain alphanumeric characaters and the hyphen.'),s=null));var a=t(s||"VueComponent");return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.cid=r++,a.options=me(i.options,e),a["super"]=i,a.extend=i.extend,ji._assetTypes.forEach(function(e){a[e]=i[e]}),s&&(a.options.components[s]=a),o&&(e._Ctor=a),a},e.use=function(e){if(!e.installed){var t=_(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}},e.mixin=function(t){e.options=me(e.options,t)},ji._assetTypes.forEach(function(t){e[t]=function(i,o){return o?("production"!==n.env.NODE_ENV&&"component"===t&&(Ri.test(i)||Fi.test(i))&&Di("Do not use built-in or reserved HTML elements as component id: "+i),"component"===t&&g(o)&&(o.name||(o.name=i),o=e.extend(o)),this.options[t+"s"][i]=o,o):this.options[t+"s"][i]}}),b(e.transition,Vi)}var Sn=Object.prototype.hasOwnProperty,Vn=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,Pn=/-(\w)/g,Rn=/([a-z\d])([A-Z])/g,Fn=/(?:^|[-_\/])(\w)/g,Mn=Object.prototype.toString,In="[object Object]",Ln=Array.isArray,Hn="__proto__"in{},zn="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Bn=zn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Un=zn&&window.navigator.userAgent.toLowerCase(),Wn=Un&&Un.indexOf("trident")>0,qn=Un&&Un.indexOf("msie 9.0")>0,Jn=Un&&Un.indexOf("android")>0,Qn=Un&&/(iphone|ipad|ipod|ios)/i.test(Un),Yn=Qn&&Un.match(/os ([\d_]+)/),Gn=Yn&&Yn[1].split("_"),Kn=Gn&&Number(Gn[0])>=9&&Number(Gn[1])>=3&&!window.indexedDB,Zn=void 0,Xn=void 0,ei=void 0,ti=void 0;if(zn&&!qn){var ni=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,ii=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;Zn=ni?"WebkitTransition":"transition",Xn=ni?"webkitTransitionEnd":"transitionend",ei=ii?"WebkitAnimation":"animation",ti=ii?"webkitAnimationEnd":"animationend"}var oi=function(){function e(){o=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}var n,i=[],o=!1;if("undefined"==typeof MutationObserver||Kn){var r=zn?window:"undefined"!=typeof t?t:{};n=r.setImmediate||setTimeout}else{var s=1,a=new MutationObserver(e),c=document.createTextNode(s);a.observe(c,{characterData:!0}),n=function(){s=(s+1)%2,c.data=s}}return function(t,r){var s=r?function(){t.call(r)}:t;i.push(s),o||(o=!0,n(e,0))}}(),ri=void 0;"undefined"!=typeof Set&&Set.toString().match(/native code/)?ri=Set:(ri=function(){this.set=Object.create(null)},ri.prototype.has=function(e){return void 0!==this.set[e]},ri.prototype.add=function(e){this.set[e]=1},ri.prototype.clear=function(){this.set=Object.create(null)});var si=$.prototype;si.put=function(e,t){var n,i=this.get(e,!0);return i||(this.size===this.limit&&(n=this.shift()),i={key:e},this._keymap[e]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size++),i.value=t,n},si.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},si.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail?t?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,t?n:n.value)};var ai,ci,li,hi,ui,fi,pi,di,vi,yi,_i,bi,mi=new $(1e3),gi=/[^\s'"]+|'[^']*'|"[^"]*"/g,Ei=/^in$|^-?\d+/,wi=Object.freeze({parseDirective:A}),xi=/[-.*+?^${}()|[\]\/\\]/g,ki=void 0,Ci=void 0,$i=void 0,Ni=/[^|]\|[^|]/,Oi=Object.freeze({compileRegex:j,parseText:D,tokensToExp:S}),Ai=["{{","}}"],Ti=["{{{","}}}"],ji=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==n.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return Ai},set:function(e){Ai=e,j()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return Ti},set:function(e){Ti=e,j()},configurable:!0,enumerable:!0}}),Di=void 0,Si=void 0;"production"!==n.env.NODE_ENV&&!function(){var e="undefined"!=typeof console;Di=function(t,n){e&&!ji.silent&&console.error("[Vue warn]: "+t+(n?Si(n):""))},Si=function(e){var t=e._isVue?e.$options.name:e.name;return t?" (found in component: <"+d(t)+">)":""}}();var Vi=Object.freeze({appendWithTransition:R,beforeWithTransition:F,removeWithTransition:M,applyTransition:I}),Pi=/^v-ref:/,Ri=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,Fi=/^(slot|partial|component)$/i,Mi=void 0;"production"!==n.env.NODE_ENV&&(Mi=function(e,t){return t.indexOf("-")>-1?e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:/HTMLUnknownElement/.test(e.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(t)});var Ii=ji.optionMergeStrategies=Object.create(null);Ii.data=function(e,t,i){return i?e||t?function(){var n="function"==typeof t?t.call(i):t,o="function"==typeof e?e.call(i):void 0;return n?de(n,o):o}:void 0:t?"function"!=typeof t?("production"!==n.env.NODE_ENV&&Di('The "data" option should be a function that returns a per-instance value in component definitions.',i),e):e?function(){return de(t.call(this),e.call(this))}:t:e},Ii.el=function(e,t,i){if(!i&&t&&"function"!=typeof t)return void("production"!==n.env.NODE_ENV&&Di('The "el" option should be a function that returns a per-instance value in component definitions.',i));var o=t||e;return i&&"function"==typeof o?o.call(i):o},Ii.init=Ii.created=Ii.ready=Ii.attached=Ii.detached=Ii.beforeCompile=Ii.compiled=Ii.beforeDestroy=Ii.destroyed=Ii.activate=function(e,t){return t?e?e.concat(t):Ln(t)?t:[t]:e},ji._assetTypes.forEach(function(e){Ii[e+"s"]=ve}),Ii.watch=Ii.events=function(e,t){if(!t)return e;if(!e)return t;var n={};b(n,e);for(var i in t){var o=n[i],r=t[i];o&&!Ln(o)&&(o=[o]),n[i]=o?o.concat(r):[r]}return n},Ii.props=Ii.methods=Ii.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return b(n,e),b(n,t),n};var Li=function(e,t){return void 0===t?e:t},Hi=0;Ee.target=null,Ee.prototype.addSub=function(e){this.subs.push(e)},Ee.prototype.removeSub=function(e){this.subs.$remove(e)},Ee.prototype.depend=function(){Ee.target.addDep(this)},Ee.prototype.notify=function(){for(var e=_(this.subs),t=0,n=e.length;t<n;t++)e[t].update()};var zi=Array.prototype,Bi=Object.create(zi);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=zi[e];E(Bi,e,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var o,r=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),r})}),E(zi,"$set",function(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}),E(zi,"$remove",function(e){if(this.length){var t=x(this,e);return t>-1?this.splice(t,1):void 0}});var Ui=Object.getOwnPropertyNames(Bi),Wi=!0;xe.prototype.walk=function(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;n++)this.convert(t[n],e[t[n]])},xe.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)$e(e[t])},xe.prototype.convert=function(e,t){Ne(this.value,e,t)},xe.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},xe.prototype.removeVm=function(e){this.vms.$remove(e)};var qi=Object.freeze({defineReactive:Ne,set:i,del:o,hasOwn:r,isLiteral:s,isReserved:a,_toString:c,toNumber:l,toBoolean:h,stripQuotes:u,camelize:f,hyphenate:d,classify:v,bind:y,toArray:_,extend:b,isObject:m,isPlainObject:g,def:E,debounce:w,indexOf:x,cancellable:k,looseEqual:C,isArray:Ln,hasProto:Hn,inBrowser:zn,devtools:Bn,isIE:Wn,isIE9:qn,isAndroid:Jn,isIos:Qn,iosVersionMatch:Yn,iosVersion:Gn,hasMutationObserverBug:Kn,get transitionProp(){return Zn},get transitionEndEvent(){return Xn},get animationProp(){return ei},get animationEndEvent(){return ti},nextTick:oi,get _Set(){return ri},query:L,inDoc:H,getAttr:z,getBindAttr:B,hasBindAttr:U,before:W,after:q,remove:J,prepend:Q,replace:Y,on:G,off:K,setClass:X,addClass:ee,removeClass:te,extractContent:ne,trimNode:ie,isTemplate:re,createAnchor:se,findRef:ae,mapNodeRange:ce,removeNodeRange:le,isFragment:he,getOuterHTML:ue,mergeOptions:me,resolveAsset:ge,checkComponentAttr:fe,commonTagRE:Ri,reservedTagRE:Fi,get warn(){return Di}}),Ji=0,Qi=new $(1e3),Yi=0,Gi=1,Ki=2,Zi=3,Xi=0,eo=1,to=2,no=3,io=4,oo=5,ro=6,so=7,ao=8,co=[];co[Xi]={ws:[Xi],ident:[no,Yi],"[":[io],eof:[so]},co[eo]={ws:[eo],".":[to],"[":[io],eof:[so]},co[to]={ws:[to],ident:[no,Yi]},co[no]={ident:[no,Yi],0:[no,Yi],number:[no,Yi],ws:[eo,Gi],".":[to,Gi],"[":[io,Gi],eof:[so,Gi]},co[io]={"'":[oo,Yi],'"':[ro,Yi],"[":[io,Ki],"]":[eo,Zi],eof:ao,"else":[io,Yi]},co[oo]={"'":[io,Yi],eof:ao,"else":[oo,Yi]},co[ro]={'"':[io,Yi],eof:ao,"else":[ro,Yi]};var lo;"production"!==n.env.NODE_ENV&&(lo=function(e,t){Di('You are setting a non-existent path "'+e.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',t)});var ho=Object.freeze({parsePath:De,getPath:Se,setPath:Ve}),uo=new $(1e3),fo="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",po=new RegExp("^("+fo.replace(/,/g,"\\b|")+"\\b)"),vo="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",yo=new RegExp("^("+vo.replace(/,/g,"\\b|")+"\\b)"),_o=/\s/g,bo=/\n/g,mo=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,go=/"(\d+)"/g,Eo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,wo=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,xo=/^(?:true|false|null|undefined|Infinity|NaN)$/,ko=[],Co=Object.freeze({parseExpression:ze,isSimplePath:Be}),$o=[],No=[],Oo={},Ao={},To=!1,jo=0;Qe.prototype.get=function(){this.beforeGet();var e,t=this.scope||this.vm;try{e=this.getter.call(t,t)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating expression "'+this.expression+'": '+i.toString(),this.vm)}return this.deep&&Ye(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=t._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},Qe.prototype.set=function(e){var t=this.scope||this.vm;this.filters&&(e=t._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(t,t,e)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating setter "'+this.expression+'": '+i.toString(),this.vm)}var o=t.$forContext;if(o&&o.alias===this.expression){if(o.filters)return void("production"!==n.env.NODE_ENV&&Di("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));o._withLock(function(){t.$key?o.rawValue[t.$key]=e:o.rawValue.$set(t.$index,e)})}},Qe.prototype.beforeGet=function(){Ee.target=this},Qe.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Qe.prototype.afterGet=function(){Ee.target=null;for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Qe.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!ji.async?this.run():(this.shallow=this.queued?!!e&&this.shallow:!!e,this.queued=!0,"production"!==n.env.NODE_ENV&&ji.debug&&(this.prevError=new Error("[vue] async stack trace")),Je(this))},Qe.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(m(e)||this.deep)&&!this.shallow){var t=this.value;this.value=e;var i=this.prevError;if("production"!==n.env.NODE_ENV&&ji.debug&&i){this.prevError=null;try{this.cb.call(this.vm,e,t)}catch(o){throw oi(function(){throw i},0),o}}else this.cb.call(this.vm,e,t)}this.queued=this.shallow=!1}},Qe.prototype.evaluate=function(){var e=Ee.target;this.value=this.get(),this.dirty=!1,Ee.target=e},Qe.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},Qe.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var Do=new ri,So={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(e){this.el[this.attr]=c(e)}},Vo=new $(1e3),Po=new $(1e3),Ro={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};Ro.td=Ro.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Ro.option=Ro.optgroup=[1,'<select multiple="multiple">',"</select>"],Ro.thead=Ro.tbody=Ro.colgroup=Ro.caption=Ro.tfoot=[1,"<table>","</table>"],Ro.g=Ro.defs=Ro.symbol=Ro.use=Ro.image=Ro.text=Ro.circle=Ro.ellipse=Ro.line=Ro.path=Ro.polygon=Ro.polyline=Ro.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Fo=/<([\w:-]+)/,Mo=/&#?\w+?;/,Io=/<!--/,Lo=function(){if(zn){var e=document.createElement("div");return e.innerHTML="<template>1</template>",!e.cloneNode(!0).firstChild.innerHTML}return!1}(),Ho=function(){if(zn){var e=document.createElement("textarea");return e.placeholder="t","t"===e.cloneNode(!0).value}return!1}(),zo=Object.freeze({cloneNode:Xe,parseTemplate:et}),Bo={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=se("v-html"),Y(this.el,this.anchor))},update:function(e){e=c(e),this.nodes?this.swap(e):this.el.innerHTML=e},swap:function(e){for(var t=this.nodes.length;t--;)J(this.nodes[t]);var n=et(e,!0,!0);this.nodes=_(n.childNodes),W(n,this.anchor)}};tt.prototype.callHook=function(e){var t,n;for(t=0,n=this.childFrags.length;t<n;t++)this.childFrags[t].callHook(e);for(t=0,n=this.children.length;t<n;t++)e(this.children[t])},tt.prototype.beforeRemove=function(){var e,t;for(e=0,t=this.childFrags.length;e<t;e++)this.childFrags[e].beforeRemove(!1);for(e=0,t=this.children.length;e<t;e++)this.children[e].$destroy(!1,!0);var n=this.unlink.dirs;for(e=0,t=n.length;e<t;e++)n[e]._watcher&&n[e]._watcher.teardown()},tt.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var Uo=new $(5e3);ct.prototype.create=function(e,t,n){var i=Xe(this.template);return new tt(this.linker,this.vm,i,e,t,n)};var Wo=700,qo=800,Jo=850,Qo=1100,Yo=1500,Go=1500,Ko=1750,Zo=2100,Xo=2200,er=2300,tr=0,nr={priority:Xo,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var e=this.expression.match(/(.*) (?:in|of) (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=t[1].trim(),this.alias=t[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(!this.alias)return void("production"!==n.env.NODE_ENV&&Di('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++tr;var i=this.el.tagName;this.isOption=("OPTION"===i||"OPTGROUP"===i)&&"SELECT"===this.el.parentNode.tagName,this.start=se("v-for-start"),this.end=se("v-for-end"),Y(this.el,this.end),W(this.start,this.end),this.cache=Object.create(null),this.factory=new ct(this.vm,this.el)},update:function(e){this.diff(e),this.updateRef(),this.updateModel()},diff:function(e){var t,n,i,o,s,a,c=e[0],l=this.fromObject=m(c)&&r(c,"$key")&&r(c,"$value"),h=this.params.trackBy,u=this.frags,f=this.frags=new Array(e.length),p=this.alias,d=this.iterator,v=this.start,y=this.end,_=H(v),b=!u;for(t=0,n=e.length;t<n;t++)c=e[t],o=l?c.$key:null,s=l?c.$value:c,a=!m(s),i=!b&&this.getCachedFrag(s,t,o),i?(i.reused=!0,i.scope.$index=t,o&&(i.scope.$key=o),d&&(i.scope[d]=null!==o?o:t),(h||l||a)&&we(function(){i.scope[p]=s})):(i=this.create(s,p,t,o),i.fresh=!b),f[t]=i,b&&i.before(y);if(!b){var g=0,E=u.length-f.length;for(this.vm._vForRemoving=!0,t=0,n=u.length;t<n;t++)i=u[t],i.reused||(this.deleteCachedFrag(i),this.remove(i,g++,E,_));this.vm._vForRemoving=!1,g&&(this.vm._watchers=this.vm._watchers.filter(function(e){return e.active}));var w,x,k,C=0;for(t=0,n=f.length;t<n;t++)i=f[t],w=f[t-1],x=w?w.staggerCb?w.staggerAnchor:w.end||w.node:v,i.reused&&!i.staggerCb?(k=lt(i,v,this.id),k===w||k&&lt(k,v,this.id)===w||this.move(i,x)):this.insert(i,C++,x,_),i.reused=i.fresh=!1}},create:function(e,t,n,i){var o=this._host,r=this._scope||this.vm,s=Object.create(r);s.$refs=Object.create(r.$refs),s.$els=Object.create(r.$els),s.$parent=r,s.$forContext=this,we(function(){Ne(s,t,e)}),Ne(s,"$index",n),i?Ne(s,"$key",i):s.$key&&E(s,"$key",null),this.iterator&&Ne(s,this.iterator,null!==i?i:n);var a=this.factory.create(o,s,this._frag);return a.forId=this.id,this.cacheFrag(e,a,n,i),a},updateRef:function(){var e=this.descriptor.ref;if(e){var t,n=(this._scope||this.vm).$refs;this.fromObject?(t={},this.frags.forEach(function(e){t[e.scope.$key]=ht(e)})):t=this.frags.map(ht),n[e]=t}},updateModel:function(){if(this.isOption){var e=this.start.parentNode,t=e&&e.__v_model;t&&t.forceUpdate()}},insert:function(e,t,n,i){e.staggerCb&&(e.staggerCb.cancel(),e.staggerCb=null);var o=this.getStagger(e,t,null,"enter");if(i&&o){var r=e.staggerAnchor;r||(r=e.staggerAnchor=se("stagger-anchor"),r.__v_frag=e),q(r,n);var s=e.staggerCb=k(function(){e.staggerCb=null,e.before(r),J(r)});setTimeout(s,o)}else{var a=n.nextSibling;a||(q(this.end,n),a=this.end),e.before(a)}},remove:function(e,t,n,i){if(e.staggerCb)return e.staggerCb.cancel(),void(e.staggerCb=null);var o=this.getStagger(e,t,n,"leave");if(i&&o){var r=e.staggerCb=k(function(){e.staggerCb=null,e.remove()});setTimeout(r,o)}else e.remove()},move:function(e,t){t.nextSibling||this.end.parentNode.appendChild(this.end),e.before(t.nextSibling,!1)},cacheFrag:function(e,t,i,o){var s,a=this.params.trackBy,c=this.cache,l=!m(e);o||a||l?(s=ft(i,o,e,a),c[s]?"$index"!==a&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):c[s]=t):(s=this.id,r(e,s)?null===e[s]?e[s]=t:"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):Object.isExtensible(e)?E(e,s,t):"production"!==n.env.NODE_ENV&&Di("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),t.raw=e;
},getCachedFrag:function(e,t,i){var o,r=this.params.trackBy,s=!m(e);if(i||r||s){var a=ft(t,i,e,r);o=this.cache[a]}else o=e[this.id];return o&&(o.reused||o.fresh)&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e),o},deleteCachedFrag:function(e){var t=e.raw,n=this.params.trackBy,i=e.scope,o=i.$index,s=r(i,"$key")&&i.$key,a=!m(t);if(n||s||a){var c=ft(o,s,t,n);this.cache[c]=null}else t[this.id]=null,e.raw=null},getStagger:function(e,t,n,i){i+="Stagger";var o=e.node.__v_trans,r=o&&o.hooks,s=r&&(r[i]||r.stagger);return s?s.call(e,t,n):t*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(e){return this.rawValue=e,e},_postProcess:function(e){if(Ln(e))return e;if(g(e)){for(var t,n=Object.keys(e),i=n.length,o=new Array(i);i--;)t=n[i],o[i]={$key:t,$value:e[t]};return o}return"number"!=typeof e||isNaN(e)||(e=ut(e)),e||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var e,t=this.frags.length;t--;)e=this.frags[t],this.deleteCachedFrag(e),e.destroy()}};"production"!==n.env.NODE_ENV&&(nr.warnDuplicate=function(e){Di('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(e)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var ir={priority:Zo,terminal:!0,bind:function(){var e=this.el;if(e.__vue__)"production"!==n.env.NODE_ENV&&Di('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var t=e.nextElementSibling;t&&null!==z(t,"v-else")&&(J(t),this.elseEl=t),this.anchor=se("v-if"),Y(e,this.anchor)}},update:function(e){this.invalid||(e?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new ct(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new ct(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},or={bind:function(){var e=this.el.nextElementSibling;e&&null!==z(e,"v-else")&&(this.elseEl=e)},update:function(e){this.apply(this.el,e),this.elseEl&&this.apply(this.elseEl,!e)},apply:function(e,t){function n(){e.style.display=t?"":"none"}H(e)?I(e,t?1:-1,n,this.vm):n()}},rr={bind:function(){var e=this,t=this.el,n="range"===t.type,i=this.params.lazy,o=this.params.number,r=this.params.debounce,s=!1;if(Jn||n||(this.on("compositionstart",function(){s=!0}),this.on("compositionend",function(){s=!1,i||e.listener()})),this.focused=!1,n||i||(this.on("focus",function(){e.focused=!0}),this.on("blur",function(){e.focused=!1,e._frag&&!e._frag.inserted||e.rawListener()})),this.listener=this.rawListener=function(){if(!s&&e._bound){var i=o||n?l(t.value):t.value;e.set(i),oi(function(){e._bound&&!e.focused&&e.update(e._watcher.value)})}},r&&(this.listener=w(this.listener,r)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(t)[a]("change",this.rawListener),i||jQuery(t)[a]("input",this.listener)}else this.on("change",this.rawListener),i||this.on("input",this.listener);!i&&qn&&(this.on("cut",function(){oi(e.listener)}),this.on("keyup",function(t){46!==t.keyCode&&8!==t.keyCode||e.listener()})),(t.hasAttribute("value")||"TEXTAREA"===t.tagName&&t.value.trim())&&(this.afterBind=this.listener)},update:function(e){e=c(e),e!==this.el.value&&(this.el.value=e)},unbind:function(){var e=this.el;if(this.hasjQuery){var t=jQuery.fn.off?"off":"unbind";jQuery(e)[t]("change",this.listener),jQuery(e)[t]("input",this.listener)}}},sr={bind:function(){var e=this,t=this.el;this.getValue=function(){if(t.hasOwnProperty("_value"))return t._value;var n=t.value;return e.params.number&&(n=l(n)),n},this.listener=function(){e.set(e.getValue())},this.on("change",this.listener),t.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){this.el.checked=C(e,this.getValue())}},ar={bind:function(){var e=this,t=this,n=this.el;this.forceUpdate=function(){t._watcher&&t.update(t._watcher.get())};var i=this.multiple=n.hasAttribute("multiple");this.listener=function(){var e=pt(n,i);e=t.params.number?Ln(e)?e.map(l):l(e):e,t.set(e)},this.on("change",this.listener);var o=pt(n,i,!0);(i&&o.length||!i&&null!==o)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){oi(e.forceUpdate)}),H(n)||oi(this.forceUpdate)},update:function(e){var t=this.el;t.selectedIndex=-1;for(var n,i,o=this.multiple&&Ln(e),r=t.options,s=r.length;s--;)n=r[s],i=n.hasOwnProperty("_value")?n._value:n.value,n.selected=o?dt(e,i)>-1:C(e,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},cr={bind:function(){function e(){var e=n.checked;return e&&n.hasOwnProperty("_trueValue")?n._trueValue:!e&&n.hasOwnProperty("_falseValue")?n._falseValue:e}var t=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:t.params.number?l(n.value):n.value},this.listener=function(){var i=t._watcher.value;if(Ln(i)){var o=t.getValue();n.checked?x(i,o)<0&&i.push(o):i.$remove(o)}else t.set(e())},this.on("change",this.listener),n.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){var t=this.el;Ln(e)?t.checked=x(e,this.getValue())>-1:t.hasOwnProperty("_trueValue")?t.checked=C(e,t._trueValue):t.checked=!!e}},lr={text:rr,radio:sr,select:ar,checkbox:cr},hr={priority:qo,twoWay:!0,handlers:lr,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==n.env.NODE_ENV&&Di('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var e,t=this.el,i=t.tagName;if("INPUT"===i)e=lr[t.type]||lr.text;else if("SELECT"===i)e=lr.select;else{if("TEXTAREA"!==i)return void("production"!==n.env.NODE_ENV&&Di("v-model does not support element type: "+i,this.vm));e=lr.text}t.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var e=this.filters;if(e)for(var t=e.length;t--;){var n=ge(this.vm.$options,"filters",e[t].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},ur={esc:27,tab:9,enter:13,space:32,"delete":[8,46],up:38,left:37,right:39,down:40},fr={priority:Wo,acceptStatement:!0,keyCodes:ur,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var e=this;this.iframeBind=function(){G(e.el.contentWindow,e.arg,e.handler,e.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"!=typeof e)return void("production"!==n.env.NODE_ENV&&Di("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+e,this.vm));this.modifiers.stop&&(e=yt(e)),this.modifiers.prevent&&(e=_t(e)),this.modifiers.self&&(e=bt(e));var t=Object.keys(this.modifiers).filter(function(e){return"stop"!==e&&"prevent"!==e&&"self"!==e&&"capture"!==e});t.length&&(e=vt(e,t)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():G(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var e=this.iframeBind?this.el.contentWindow:this.el;this.handler&&K(e,this.arg,this.handler)},unbind:function(){this.reset()}},pr=["-webkit-","-moz-","-ms-"],dr=["Webkit","Moz","ms"],vr=/!important;?$/,yr=Object.create(null),_r=null,br={deep:!0,update:function(e){"string"==typeof e?this.el.style.cssText=e:Ln(e)?this.handleObject(e.reduce(b,{})):this.handleObject(e||{})},handleObject:function(e){var t,n,i=this.cache||(this.cache={});for(t in i)t in e||(this.handleSingle(t,null),delete i[t]);for(t in e)n=e[t],n!==i[t]&&(i[t]=n,this.handleSingle(t,n))},handleSingle:function(e,t){if(e=mt(e))if(null!=t&&(t+=""),t){var i=vr.test(t)?"important":"";i?("production"!==n.env.NODE_ENV&&Di("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),t=t.replace(vr,"").trim(),this.el.style.setProperty(e.kebab,t,i)):this.el.style[e.camel]=t}else this.el.style[e.camel]=""}},mr="http://www.w3.org/1999/xlink",gr=/^xlink:/,Er=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,wr=/^(?:value|checked|selected|muted)$/,xr=/^(?:draggable|contenteditable|spellcheck)$/,kr={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Cr={priority:Jo,bind:function(){var e=this.arg,t=this.el.tagName;e||(this.deep=!0);var i=this.descriptor,o=i.interp;if(o&&(i.hasOneTime&&(this.expression=S(o,this._scope||this.vm)),(Er.test(e)||"name"===e&&("PARTIAL"===t||"SLOT"===t))&&("production"!==n.env.NODE_ENV&&Di(e+'="'+i.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(e),this.invalid=!0),"production"!==n.env.NODE_ENV)){var r=e+'="'+i.raw+'": ';"src"===e&&Di(r+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===e&&Di(r+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(e){if(!this.invalid){var t=this.arg;this.arg?this.handleSingle(t,e):this.handleObject(e||{})}},handleObject:br.handleObject,handleSingle:function(e,t){var n=this.el,i=this.descriptor.interp;if(this.modifiers.camel&&(e=f(e)),!i&&wr.test(e)&&e in n){var o="value"===e&&null==t?"":t;n[e]!==o&&(n[e]=o)}var r=kr[e];if(!i&&r){n[r]=t;var s=n.__v_model;s&&s.listener()}return"value"===e&&"TEXTAREA"===n.tagName?void n.removeAttribute(e):void(xr.test(e)?n.setAttribute(e,t?"true":"false"):null!=t&&t!==!1?"class"===e?(n.__v_trans&&(t+=" "+n.__v_trans.id+"-transition"),X(n,t)):gr.test(e)?n.setAttributeNS(mr,e,t===!0?"":t):n.setAttribute(e,t===!0?"":t):n.removeAttribute(e))}},$r={priority:Yo,bind:function(){if(this.arg){var e=this.id=f(this.arg),t=(this._scope||this.vm).$els;r(t,e)?t[e]=this.el:Ne(t,e,this.el)}},unbind:function(){var e=(this._scope||this.vm).$els;e[this.id]===this.el&&(e[this.id]=null)}},Nr={bind:function(){"production"!==n.env.NODE_ENV&&Di("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},Or={bind:function(){var e=this.el;this.vm.$once("pre-hook:compiled",function(){e.removeAttribute("v-cloak")})}},Ar={text:So,html:Bo,"for":nr,"if":ir,show:or,model:hr,on:fr,bind:Cr,el:$r,ref:Nr,cloak:Or},Tr={deep:!0,update:function(e){e?"string"==typeof e?this.setClass(e.trim().split(/\s+/)):this.setClass(Et(e)):this.cleanup()},setClass:function(e){this.cleanup(e);for(var t=0,n=e.length;t<n;t++){var i=e[t];i&&wt(this.el,i,ee)}this.prevKeys=e},cleanup:function(e){var t=this.prevKeys;if(t)for(var n=t.length;n--;){var i=t[n];(!e||e.indexOf(i)<0)&&wt(this.el,i,te)}}},jr={priority:Go,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==n.env.NODE_ENV&&Di('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=ne(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=se("v-component"),Y(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+d(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(e){this.literal||this.setComponent(e)},setComponent:function(e,t){if(this.invalidatePending(),e){var n=this;this.resolveComponent(e,function(){n.mountComponent(t)})}else this.unbuild(!0),this.remove(this.childVM,t),this.childVM=null},resolveComponent:function(e,t){var n=this;this.pendingComponentCb=k(function(i){n.ComponentName=i.options.name||("string"==typeof e?e:null),n.Component=i,t()}),this.vm._resolveComponent(e,this.pendingComponentCb)},mountComponent:function(e){this.unbuild(!0);var t=this,n=this.Component.options.activate,i=this.getCached(),o=this.build();n&&!i?(this.waitingFor=o,xt(n,o,function(){t.waitingFor===o&&(t.waitingFor=null,t.transition(o,e))})):(i&&o._updateRef(),this.transition(o,e))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var t=this.getCached();if(t)return t;if(this.Component){var i={name:this.ComponentName,el:Xe(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&b(i,e);var o=new this.Component(i);return this.keepAlive&&(this.cache[this.Component.cid]=o),"production"!==n.env.NODE_ENV&&this.el.hasAttribute("transition")&&o._isFragment&&Di("Transitions will not work on a fragment instance. Template: "+o.$options.template,o),o}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(e){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var t=this.childVM;return!t||this.keepAlive?void(t&&(t._inactive=!0,t._updateRef(!0))):void t.$destroy(!1,e)},remove:function(e,t){var n=this.keepAlive;if(e){this.pendingRemovals++,this.pendingRemovalCb=t;var i=this;e.$remove(function(){i.pendingRemovals--,n||e._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else t&&t()},transition:function(e,t){var n=this,i=this.childVM;switch(i&&(i._inactive=!0),e._inactive=!1,this.childVM=e,n.params.transitionMode){case"in-out":e.$before(n.anchor,function(){n.remove(i,t)});break;case"out-in":n.remove(i,function(){e.$before(n.anchor,t)});break;default:n.remove(i),e.$before(n.anchor,t)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var e in this.cache)this.cache[e].$destroy();this.cache=null}}},Dr=ji._propBindingModes,Sr={},Vr=/^[$_a-zA-Z]+[\w$]*$/,Pr=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,Rr=ji._propBindingModes,Fr={bind:function(){var e=this.vm,t=e._context,n=this.descriptor.prop,i=n.path,o=n.parentPath,r=n.mode===Rr.TWO_WAY,s=this.parentWatcher=new Qe(t,o,function(t){Ot(e,n,t)},{twoWay:r,filters:n.filters,scope:this._scope});if(Nt(e,n,s.value),r){var a=this;e.$once("pre-hook:created",function(){a.childWatcher=new Qe(e,i,function(e){s.set(e)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},Mr=[],Ir=!1,Lr="transition",Hr="animation",zr=Zn+"Duration",Br=ei+"Duration",Ur=zn&&window.requestAnimationFrame,Wr=Ur?function(e){Ur(function(){Ur(e)})}:function(e){setTimeout(e,50)},qr=Ft.prototype;qr.enter=function(e,t){this.cancelPending(),this.callHook("beforeEnter"),this.cb=t,ee(this.el,this.enterClass),e(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,Pt(this.enterNextTick))},qr.enterNextTick=function(){var e=this;this.justEntered=!0,Wr(function(){e.justEntered=!1});var t=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===Lr&&te(this.el,this.enterClass):n===Lr?(te(this.el,this.enterClass),this.setupCssCb(Xn,t)):n===Hr?this.setupCssCb(ti,t):t()},qr.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,te(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},qr.leave=function(e,t){this.cancelPending(),this.callHook("beforeLeave"),this.op=e,this.cb=t,ee(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():Pt(this.leaveNextTick)))},qr.leaveNextTick=function(){var e=this.getCssTransitionType(this.leaveClass);if(e){var t=e===Lr?Xn:ti;this.setupCssCb(t,this.leaveDone)}else this.leaveDone()},qr.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),te(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},qr.cancelPending=function(){this.op=this.cb=null;var e=!1;this.pendingCssCb&&(e=!0,K(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(e=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),e&&(te(this.el,this.enterClass),te(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},qr.callHook=function(e){this.hooks&&this.hooks[e]&&this.hooks[e].call(this.vm,this.el)},qr.callHookWithCb=function(e){var t=this.hooks&&this.hooks[e];t&&(t.length>1&&(this.pendingJsCb=k(this[e+"Done"])),t.call(this.vm,this.el,this.pendingJsCb))},qr.getCssTransitionType=function(e){if(!(!Xn||document.hidden||this.hooks&&this.hooks.css===!1||Mt(this.el))){var t=this.type||this.typeCache[e];if(t)return t;var n=this.el.style,i=window.getComputedStyle(this.el),o=n[zr]||i[zr];if(o&&"0s"!==o)t=Lr;else{var r=n[Br]||i[Br];r&&"0s"!==r&&(t=Hr)}return t&&(this.typeCache[e]=t),t}},qr.setupCssCb=function(e,t){this.pendingCssEvent=e;var n=this,i=this.el,o=this.pendingCssCb=function(r){r.target===i&&(K(i,e,o),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&t&&t())};G(i,e,o)};var Jr={priority:Qo,update:function(e,t){var n=this.el,i=ge(this.vm.$options,"transitions",e);e=e||"v",t=t||"v",n.__v_trans=new Ft(n,e,i,this.vm),te(n,t+"-transition"),ee(n,e+"-transition")}},Qr={style:br,"class":Tr,component:jr,prop:Fr,transition:Jr},Yr=/^v-bind:|^:/,Gr=/^v-on:|^@/,Kr=/^v-([^:]+)(?:$|:(.*)$)/,Zr=/\.[^\.]+/g,Xr=/^(v-bind:|:)?transition$/,es=1e3,ts=2e3;on.terminal=!0;var ns=/[^\w\-:\.]/,is=Object.freeze({compile:It,compileAndLinkProps:Ut,compileRoot:Wt,transclude:un,resolveSlots:vn}),os=/^v-on:|^@/;gn.prototype._bind=function(){var e=this.name,t=this.descriptor;if(("cloak"!==e||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=t.attr||"v-"+e;this.el.removeAttribute(n)}var i=t.def;if("function"==typeof i?this.update=i:b(this,i),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(t.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var o=this;this.update?this._update=function(e,t){o._locked||o.update(e,t)}:this._update=mn;var r=this._preProcess?y(this._preProcess,this):null,s=this._postProcess?y(this._postProcess,this):null,a=this._watcher=new Qe(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:r,postProcess:s,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(a.value)}},gn.prototype._setupParams=function(){if(this.params){var e=this.params;this.params=Object.create(null);for(var t,n,i,o=e.length;o--;)t=d(e[o]),i=f(t),n=B(this.el,t),null!=n?this._setupParamWatcher(i,n):(n=z(this.el,t),null!=n&&(this.params[i]=""===n||n))}},gn.prototype._setupParamWatcher=function(e,t){var n=this,i=!1,o=(this._scope||this.vm).$watch(t,function(t,o){if(n.params[e]=t,i){var r=n.paramWatchers&&n.paramWatchers[e];r&&r.call(n,t,o)}else i=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(o)},gn.prototype._checkStatement=function(){var e=this.expression;if(e&&this.acceptStatement&&!Be(e)){var t=ze(e).get,n=this._scope||this.vm,i=function(e){n.$event=e,t.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},gn.prototype.set=function(e){this.twoWay?this._withLock(function(){this._watcher.set(e)}):"production"!==n.env.NODE_ENV&&Di("Directive.set() can only be used inside twoWaydirectives.")},gn.prototype._withLock=function(e){var t=this;t._locked=!0,e.call(t),oi(function(){t._locked=!1})},gn.prototype.on=function(e,t,n){G(this.el,e,t,n),(this._listeners||(this._listeners=[])).push([e,t])},gn.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,t=this._listeners;if(t)for(e=t.length;e--;)K(this.el,t[e][0],t[e][1]);var i=this._paramUnwatchFns;if(i)for(e=i.length;e--;)i[e]();"production"!==n.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var rs=/[^|]\|[^|]/;Oe(Nn),_n(Nn),bn(Nn),En(Nn),wn(Nn),xn(Nn),kn(Nn),Cn(Nn),$n(Nn);var ss={priority:er,params:["name"],bind:function(){var e=this.params.name||"default",t=this.vm._slotContents&&this.vm._slotContents[e];t&&t.hasChildNodes()?this.compile(t.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(e,t,n){if(e&&t){if(this.el.hasChildNodes()&&1===e.childNodes.length&&1===e.childNodes[0].nodeType&&e.childNodes[0].hasAttribute("v-if")){var i=document.createElement("template");i.setAttribute("v-else",""),i.innerHTML=this.el.innerHTML,i._context=this.vm,e.appendChild(i)}var o=n?n._scope:this._scope;this.unlink=t.$compile(e,n,o,this._frag)}e?Y(this.el,e):J(this.el)},fallback:function(){this.compile(ne(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},as={priority:Ko,params:["name"],paramWatchers:{name:function(e){ir.remove.call(this),e&&this.insert(e)}},bind:function(){this.anchor=se("v-partial"),Y(this.el,this.anchor),this.insert(this.params.name)},insert:function(e){var t=ge(this.vm.$options,"partials",e,!0);t&&(this.factory=new ct(this.vm,t),ir.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},cs={slot:ss,partial:as},ls=nr._postProcess,hs=/(\d{3})(?=\d)/g,us={orderBy:Tn,filterBy:An,limitBy:On,json:{read:function(e,t){return"string"==typeof e?e:JSON.stringify(e,null,arguments.length>1?t:2)},write:function(e){try{return JSON.parse(e)}catch(t){return e}}},capitalize:function(e){return e||0===e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},uppercase:function(e){return e||0===e?e.toString().toUpperCase():""},lowercase:function(e){return e||0===e?e.toString().toLowerCase():""},currency:function(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",n=null!=n?n:2;var i=Math.abs(e).toFixed(n),o=n?i.slice(0,-1-n):i,r=o.length%3,s=r>0?o.slice(0,r)+(o.length>3?",":""):"",a=n?i.slice(-1-n):"",c=e<0?"-":"";return c+t+s+o.slice(r).replace(hs,"$1,")+a},pluralize:function(e){var t=_(arguments,1),n=t.length;if(n>1){var i=e%10-1;return i in t?t[i]:t[n-1]}return t[0]+(1===e?"":"s")},debounce:function(e,t){if(e)return t||(t=300),w(e,t)}};Dn(Nn),Nn.version="1.0.26",setTimeout(function(){ji.devtools&&(Bn?Bn.emit("init",Nn):"production"!==n.env.NODE_ENV&&zn&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),e.exports=Nn}).call(t,function(){return this}(),n(19))},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{items:{type:Array}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{dismissCallBack:function(){console.log("alert!!!")},apiItems:[{name:"type",type:"String",isRequired:!0,"default":"n/a",desc:"The type of alert (error, info, success)"},{name:"dismissible",type:"Boolean",isRequired:!1,"default":!0,desc:"Is the alert dismissible?"},{name:"timeout",type:"Number",isRequired:!1,"default":-1,desc:"The duration alert stays on screen in ms"},{name:"onClosed",type:"Function",isRequired:!1,"default":"n/a",desc:"Callback function to be called when alert is closed."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"label",type:"String",isRequired:!0,"default":"n/a",desc:"The lable of the panel"},{name:"isOpen",type:"Boolean",isRequired:!1,"default":!1,desc:"Is the panel open."}]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"legalKey",type:"String",isRequired:!0,"default":"n/a",desc:"the key of legal in cms"},{name:"legalLang",type:"String",isRequired:!0,"default":"n/a",desc:"the language of legal in cms"},{name:"legalRegion",type:"String",isRequired:!0,"default":"n/a",desc:"the region of legal in cms"}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"overlayKey",type:"String",isRequired:!0,"default":"n/a",desc:"The key of the overlay. Used by the overlay opener directive to target the overley."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},methods:{showSpinner:function(){var e=this;this._resetMsg(),this.$root.$broadcast("show::spinner"),setTimeout(function(){e.$root.$broadcast("hide::spinner")},3e3)},_resetMsg:function(){var e=this,t=3,n=setInterval(function(){t>0?(t--,e.msg="I will close in "+t+" seconds"):clearInterval(n)},1e3);this.msg="I will close in "+t+" seconds"}},data:function(){return{msg:"",isFullScreen:!1,apiItems:[{name:"fullScreen",type:"Boolean",isRequired:!1,"default":!1,desc:"Should the spinner take full screen"},{name:"text",type:"String",isRequired:!1,"default":"''",desc:"The text of the spinner. Default empty"},{name:"show::spinner",type:"Event",isRequired:!1,"default":"n/a",desc:"Active the spinner"},{name:"hide::spinner",type:"Event",isRequired:!1,"default":"n/a",desc:"Hide the spinner"}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){var e=this;return{stepTrackerCurrentStep:2,stepTrackerConfig:{isClickable:!0,steps:[{title:"Step A",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=0}},{title:"Step B",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=1}},{title:"Step C",link:"",onClickHandler:function(t){e.stepTrackerCurrentStep=2}}]},apiItems:[{name:"currentStep",type:"Integer",isRequired:!0,"default":0,desc:"todo"},{name:"config",type:"Object",isRequired:!0,"default":"n/a",desc:"todo"},{name:"config.title",type:"String",isRequired:!0,"default":"n/a",desc:"The title of the step"},{name:"config.link",type:"String",isRequired:!1,"default":"n/a",desc:"The link of the step. "},{name:"config.onClickHandler",type:"Function",isRequired:!1,"default":"n/a",desc:"The callback function when step is clicked."}]}}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(5),r=i(o);t["default"]={components:{ApiTable:r["default"]},data:function(){return{apiItems:[{name:"label",type:"String",isRequired:!0,"default":"n/a",desc:"The lable of the tab"},{name:"isDisabled",type:"Boolean",isRequired:!1,"default":!1,desc:"Is the tab disabled or not. When set to true, the tab is not clickable."}]}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{isVisible:!0}},props:{type:{type:String,required:!0},dismissible:{type:Boolean,"default":!0},timeout:{type:Number,"default":-1},onClosed:{type:Function}},methods:{dismiss:function(){var e=this;this.isVisible=!1,setTimeout(function(){e.onClosed&&e.onClosed.apply(e)})}},ready:function(){var e=this;this.timeout>=0&&setTimeout(function(){e.dismiss()},this.timeout)}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{isOpen:{type:Boolean,"default":!1},label:{type:String,required:!0}},methods:{toggleOpen:function(e){this.isOpen=!this.isOpen}}}},function(e,t,n){(function(e){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=i(o),s=n(149),a=i(s),c=n(147),l=i(c),h=n(20),u=i(h);t["default"]={mixins:r["default"],directives:{setFocus:u["default"]},data:function(){return{indexedLegals:[],nonIndexedLegals:[],apiLang:null,apiRegion:null}},methods:{fetchLegals:function(t){return e("\n          "+this.$root.ligerEndPoint+"?lang="+this.apiLang+"&region="+this.apiRegion+"&html=true\n        ",{method:"POST",headers:{"Content-Type":"application/json",applicationKey:this.$root.ligerApplicationKey},body:JSON.stringify({keys:t})})},appendResponseToLegalContainer:function(e,t){var n=function(e,t){t.forEach(function(t){var n=e.findIndex(function(e){return e.key===t.key});n>-1&&e.$set(n,{content:t.content,key:t.key})})};"indexed"===e?n(this.indexedLegals,t):n(this.nonIndexedLegals,t)},getLegals:function(){return l["default"].call(this,function(){var e=this,t=this.indexedLegals.map(function(e){return e.key}),n=this.nonIndexedLegals.map(function(e){return e.key});t.length>0&&this.fetchLegals(t).then(this.parseJSON).then(function(t){e.appendResponseToLegalContainer("indexed",t)}),n.length>0&&this.fetchLegals(n).then(this.parseJSON).then(function(t){e.appendResponseToLegalContainer("nonIndexed",t)})},10)}()},events:{"legal::click":function(e){var t=this,n=this.indexedLegals.findIndex(function(t){return t.key===e});n>-1&&this.indexedLegals.forEach(function(e,i){i!==n?e.isSelected=!1:t.indexedLegals.$set(i,Object.assign({},t.indexedLegals[i],{isSelected:!0}))})},"legal::init":function(e){this.apiLang=e.lang,this.apiRegion=e.region;var t=e.isNonIndexed?this.nonIndexedLegals:this.indexedLegals,n=(0,a["default"])(t,function(t){return t.key===e.key});n<0&&(n=t.push(e)-1,this.getLegals()),e.isNonIndexed||this.rootBroadcast("legal::udpate",{key:e.key,isNonIndexed:e.isNonIndexed,index:n})}}}}).call(t,n(84))},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(21),r=i(o),s=n(36),a=i(s);t["default"]={mixins:r["default"],data:function(){return{legalCounter:null}},props:{legalKey:{type:String,required:!0},isNonIndexed:{type:Boolean,"default":!1},legalLang:{type:String,required:!0},legalRegion:{type:String,required:!0}},events:{"legal::udpate":function(e){this.isNonIndexed||e.key!==this.legalKey||(this.legalCounter=e.index+1)}},methods:{clickHandler:function(){this.rootBroadcast("legal::click",this.legalKey)}},beforeCompile:function(){},ready:function(){var e=this;(0,a["default"])(function(){e.rootBroadcast("legal::init",{key:e.legalKey,lang:e.legalLang,region:e.legalRegion,isNonIndexed:e.isNonIndexed})})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=27;t["default"]={props:{isVisible:{type:Boolean,"default":!1}},watch:{isVisible:function(e){var t=window.document.body,n="no-scroll";e?t.classList?t.classList.add(n):t.className+=" "+n:t.classList?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")}},events:{"overlayContainer::open":function(){this.isVisible=!0},"overlayContainer::close":function(){this.isVisible=!1}},ready:function(){var e=this;window.document.addEventListener("keydown",function(t){t=t||window.event,
t.keyCode===n&&(e.isVisible=!1)})}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={data:function(){return{isVisible:!1}},props:{overlayKey:{type:String}},methods:{closeOverlay:function(){this.$dispatch("overlayContainer::close")}},events:{"overlay::open":function(e){return e===this.overlayKey?void(this.isVisible=!0):void(this.isVisible=!1)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={replace:!0,data:function(){return{active:!1}},props:{text:{type:String,"default":""},fullScreen:{type:Boolean,"default":!1}},methods:{show:function(){this.active=!0,this.$root.$broadcast("shown::spinner")},hide:function(){this.active=!1,this.$root.$broadcast("hidden::spinner")}},events:{"show::spinner":function(){this.show()},"hide::spinner":function(){this.hide()}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{config:{type:Object},currentStep:{type:Number,"default":0}},methods:{clickHandler:function(e,t,n){t.onClickHandler&&(e.preventDefault(),this.currentStep>n&&t.onClickHandler())}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={props:{label:{type:String},isDisabled:{type:Boolean,"default":!1}},data:function(){return{tabIndex:0,isVisible:!1}},computed:{isVisible:function(){return this.$parent.activeTabIndex===this.tabIndex}},created:function(){this.$parent.tabs.push({label:this.label,isDisabled:this.isDisabled})},ready:function(){var e=this;this.$parent.$children.forEach(function(t,n){t.$el===e.$el&&(e.tabIndex=n)})},beforeDestroy:function(){this.$parent.tabs.splice(this.tabIndex,1)}}},function(e,t){"use strict";function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=n({props:{activeTabIndex:{type:Number,"default":0}},methods:{isActive:function(e){return activeTabIndex===e}},data:function(){return{tabs:[]}}},"methods",{handleTabListClick:function(e,t){t.isDisabled||(this.activeTabIndex=e)}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var o=n(187),r=i(o),s=n(191),a=i(s),c=n(192),l=i(c),h=n(188),u=i(h),f=n(189),p=i(f),d=n(186),v=i(d),y=n(185),_=i(y),b=n(190),m=i(b);t["default"]={"/":{component:r["default"]},"/alert":{component:{template:"<alert-page></alert-page>",components:{AlertPage:_["default"]}}},"/spinner":{component:{template:"<spinner-page></spinner-page>",components:{SpinnerPage:m["default"]}}},"/step-tracker":{component:{template:"<step-tracker-page></step-tracker-page>",components:{StepTrackerPage:a["default"]}}},"/tabs":{component:{template:"<tabs-page></tabs-page>",components:{TabsPage:l["default"]}}},"/legal":{component:{template:"<legal-page></legal-page>",components:{LegalPage:u["default"]}}},"/overlay":{component:{template:"<overlay-page></overlay-page>",components:{OverlayPage:p["default"]}}},"/collapsable-panel":{component:{template:"<collapsable-panel-page></collapsable-panel-page>",components:{CollapsablePanelPage:v["default"]}}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={isLiteral:!0,eventHandler:function(e){e.preventDefault(),this.vm.$root.$broadcast("overlay::open",this.expression),this.vm.$root.$broadcast("overlayContainer::open")},bind:function(){this.el.addEventListener("click",this.eventHandler.bind(this))},unbind:function(){this.el.removeEventListener("click",this.eventHandler.bind(this))}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{"default":e}}var o=n(66),r=i(o),s=n(20),a=i(s),c=n(200),l=i(c),h=n(197),u=i(h),f=n(198),p=i(f),d=n(196),v=i(d),y=n(195),_=i(y),b=n(202),m=i(b),g=n(201),E=i(g),w=n(194),x=i(w),k=n(193),C=i(k),$=n(199),N=i($),O={StepTracker:l["default"],OverlayContainer:u["default"],Overlay:p["default"],LegalCounter:v["default"],LegalContainer:_["default"],Tabs:m["default"],Tab:E["default"],CollapsablePanel:x["default"],Alert:C["default"],Spinner:N["default"]},A={overlayOpener:r["default"],setFocus:a["default"]};e.exports=function(e){for(var t in O)e.component(t,O[t]);for(var n in A)e.directive(n,A[n])}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{rootBroadcast:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];this.$broadcast.apply(this.$root,t)}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={methods:{parseJSON:function(e){return e.json()}}}},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.sg_c-api-table{border-spacing:0 10px;width:100%}.sg_c-api-table tr{-webkit-box-flex:1;-ms-flex:1;flex:1}.sg_c-api-table th,.sg_c-api-table tr:hover{background-color:#eee}.sg_c-api-table td{text-align:center}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".sg_c-nav{display:block;position:fixed;left:0;width:25rem;height:100%;border-right:.1rem solid #e2e2e2;padding:2rem;padding-top:68px;overflow-x:hidden;overflow-y:auto;background-color:#fff}.sg_c-nav__section{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;font-size:1.2rem;border-bottom:.1rem solid #e2e2e2;padding-top:1rem;padding-bottom:.5rem;margin:1rem 0}.sg_c-nav__list-item{padding:5px 0}.sg_c-nav__link:hover{color:#8c68a6}.sg_c-nav__link--active{color:#57a708}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"header.sg_c-site-header{background-color:#4b286d;height:68px;text-align:left;position:fixed;width:100%;z-index:9999}header.sg_c-site-header .sg_c-site-header-container{height:100%;width:100%;padding:0 10px}header.sg_c-site-header .sg_c-site-header-container img.logo{height:100%;padding:20px;display:inline-block;max-width:100%}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"body{background-color:#f5f6f7}.sg_c-site__main{padding-top:68px;margin-left:25rem}.sg_c-demo{margin:20px 0}.sg_c-demo__container{background-color:#fff;overflow:hidden;border-radius:5px;border:1px solid #eee;padding:25px;margin:20px 0}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.fade-transition{-webkit-transition:all .3s ease;transition:all .3s ease}.fade-enter,.fade-leave{opacity:0}.c-alert{position:relative;padding:7px 15px;margin-bottom:1rem;border:1px solid transparent;border-radius:.25rem}.c-alert--info{background-color:#333;border-color:#000;color:#fff}.c-alert--info button{color:#fff}.c-alert--success{background-color:#e6ffcc;border-color:#9f3;color:#408000}.c-alert--error{background-color:#f8dde3;border-color:#f2c0ca;color:#c81235}.c-alert__close-button{position:absolute;top:0;right:10px;-webkit-appearance:none;padding:0;cursor:pointer;background:0 0;border:0;font-size:2.5rem;opacity:.2}.c-alert__close-button:hover{opacity:.3}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.c-collapsable-panel{border:1px solid #e2e2e2;box-shadow:0 1px 3px 1px #e2e2e2}.c-collapsable-panel__header{cursor:pointer;padding:10px 15px;position:relative}.c-collapsable-panel__header:after{position:absolute;right:1em;top:.75em;font-size:.75em;font-family:Telus Icon;content:\'\\E114\';color:#57a708}.c-collapsable-panel__header--open:after{content:\'\\E117\'}.c-collapsable-panel__body{border-top:1px solid #e2e2e2;max-height:0;padding:0 15px;-webkit-transition:all .3s ease-in-out;transition:all .3s ease-in-out;overflow:hidden;opacity:0}.c-collapsable-panel__body--open{opacity:1;padding:15px;max-height:9999px}',""]);
},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-legal-container__ordered-list{margin-top:10px;margin-bottom:20px;list-style:decimal;list-style-type:decimal;padding-left:20px}.c-legal-container__unordered-list{margin-top:10px;margin-bottom:20px;padding-left:20px;list-style:none;list-style-type:none}.c-legal-container__list-item{line-height:19px;margin-bottom:10px;padding:10px}.c-legal-container__list-item--active{background-color:#f9f1ff}.c-legal-container__list-item a{color:#49166d;text-decoration:none;border-bottom:1px dotted;padding-bottom:1px}.c-legal-container__list-item a:hover{color:#8c68a6}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-legal-sup{font-size:.75em;line-height:0;vertical-align:super;text-decoration:none;top:0!important;cursor:pointer}.c-legal-sup a{color:#49166d}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".no-scroll{overflow-x:hidden;overflow:hidden;overflow-y:hidden;position:relative;height:100%}.c-overlay-container__curtain{opacity:0;-webkit-transition:opacity 1.3s ease-in-out;transition:opacity 1.3s ease-in-out}.c-overlay-container__curtain--active{opacity:1;background:rgba(0,0,0,.55);position:fixed;top:0;left:0;right:0;bottom:0}.c-overlay-container__overlays{position:fixed;right:0;top:0;bottom:0;background-color:rgba(0,0,0,.5);-webkit-transform:translateX(100%);transform:translateX(100%);-webkit-transition:1s ease-in-out;transition:1s ease-in-out}@media screen and (max-width:599px){.c-overlay-container__overlays{width:100%}}@media screen and (min-width:600px){.c-overlay-container__overlays{width:66%}}.c-overlay-container__overlays--active{-webkit-transform:translateX(0);transform:translateX(0);z-index:99999}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-overlay{height:100%;width:100%;background-color:#fff}.c-overlay__header{padding:20px;position:fixed;top:0;height:75px;width:100%;border-bottom:1px solid #e2e2e2;background-color:#f5f6f7}.c-overlay__close-button{cursor:pointer;background:0;border:0;position:absolute;top:20px;right:20px;font-family:Telus Icon;font-size:2em;color:#49166d}.c-overlay__close-button:before{content:'\\E106'}.c-overlay__body{position:fixed;-webkit-overflow-scrolling:touch;overflow-y:scroll;top:75px;bottom:0;width:100%;padding:20px 20px 50px}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,"@-webkit-keyframes rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes rotate{to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@-webkit-keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@keyframes dash{0%{stroke-dasharray:1,200;stroke-dashoffset:0}50%{stroke-dasharray:89,200;stroke-dashoffset:-35}to{stroke-dasharray:89,200;stroke-dashoffset:-124}}@-webkit-keyframes spinner-color{0%,to{stroke:#6c0}25%{stroke:#6c0}50%{stroke:#57a708}75%{stroke:#57a708}}@keyframes spinner-color{0%,to{stroke:#6c0}25%{stroke:#6c0}50%{stroke:#57a708}75%{stroke:#57a708}}.c-spinner{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;display:-webkit-flex;-webkit-align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:auto;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}.c-spinner--fullscreen{position:fixed;top:0;left:0;right:0;bottom:0;z-index:9998;width:100%;height:100%;background:hsla(0,0%,100%,.8)}.c-spinner svg{animation-name:rotate;-webkit-animation-name:rotate;-moz-animation-name:rotate;animation-duration:1.8s;-webkit-animation-duration:1.8s;-moz-animation-duration:1.8s;animation-iteration-count:infinite;-webkit-animation-iteration-count:infinite;-moz-animation-iteration-count:infinite;animation-timing-function:linear;-webkit-animation-timing-function:linear;-moz-animation-timing-function:linear;height:100px;width:100px}.c-spinner circle{animation:dash 1.7s ease-in-out infinite 0s,spinner-color 6s ease-in-out infinite -.75s;-webkit-animation:dash 1.7s ease-in-out infinite 0s,spinner-color 6s ease-in-out infinite -.75s;-moz-animation:dash 1.7s ease-in-out infinite 0s,spinner-color 6s ease-in-out infinite -.75s}",""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,'.c-step-tracker__icon,.hy_c-icon{font-family:Telus Icon,Helvetica Neue,Helvetica,Arial,sans-serif;text-decoration:none;text-rendering:optimizeLegibility;color:inherit;vertical-align:middle;font-size:inherit;line-height:inherit}.hy_c-icon__square{display:inline-block;font-size:2.5rem;line-height:3rem;width:3rem;height:3rem;text-align:center}.hy_c-icon--2x{font-size:2em}.hy_c-icon--3x{font-size:3em}.hy_c-icon--4x{font-size:4em}.hy_c-icon__styleguide{display:inline-block;font-size:2rem;line-height:4rem;width:4rem;height:4rem;text-align:center}.hy_c-icon--circle-thick-outline:before{content:"\\E001"}.hy_c-icon--circle-solid:before{content:"\\E002"}.hy_c-icon--big-arrow-up:before{content:"\\E005"}.hy_c-icon--big-arrow-down:before{content:"\\E006"}.hy_c-icon--telus-logo:before{content:"\\E009"}.hy_c-icon--bar-chart:before{content:"\\E010"}.hy_c-icon--picture-frame:before{content:"\\E011"}.hy_c-icon--paper:before{content:"\\E012"}.hy_c-icon--paper-solid:before{content:"\\E013"}.hy_c-icon--folder-solid:before{content:"\\E014"}.hy_c-icon--share:before{content:"\\E015"}.hy_c-icon--magnify-glass:before{content:"\\E016"}.hy_c-icon--warning-inverted:before{content:"\\E018"}.hy_c-icon--star-inverted:before{content:"\\E019"}.hy_c-icon--star:before{content:"\\E020"}.hy_c-icon--heart:before{content:"\\E021"}.hy_c-icon--lifesaver:before{content:"\\E022"}.hy_c-icon--hamburger:before{content:"\\E024"}.hy_c-icon--grid-square:before{content:"\\E025"}.hy_c-icon--grid-dots:before{content:"\\E026"}.hy_c-icon--lightbulb:before{content:"\\E027"}.hy_c-icon--speedometer-inverted:before{content:"\\E028"}.hy_c-icon--add-remove:before{content:"\\E029"}.hy_c-icon--cart:before{content:"\\E030"}.hy_c-icon--twitter:before{content:"\\E031"}.hy_c-icon--facebook:before{content:"\\E032"}.hy_c-icon--youtube:before{content:"\\E033"}.hy_c-icon--google-plus:before{content:"\\E034"}.hy_c-icon--trend-down:before{content:"\\E035"}.hy_c-icon--play-button-inverted:before{content:"\\E036"}.hy_c-icon--video-inverted:before{content:"\\E037"}.hy_c-icon--infinity-circled:before{content:"\\E038"}.hy_c-icon--infinity-inverted:before{content:"\\E039"}.hy_c-icon--clock:before{content:"\\E040"}.hy_c-icon--clock-inverted:before{content:"\\E041"}.hy_c-icon--smartphone:before{content:"\\E042"}.hy_c-icon--tablet:before{content:"\\E043"}.hy_c-icon--homephone:before{content:"\\E044"}.hy_c-icon--mouse:before{content:"\\E045"}.hy_c-icon--pricetag:before{content:"\\E046"}.hy_c-icon--paper-notes-solid:before{content:"\\E047"}.hy_c-icon--tv:before{content:"\\E048"}.hy_c-icon--film:before{content:"\\E049"}.hy_c-icon--envelope:before{content:"\\E050"}.hy_c-icon--usb-stick:before{content:"\\E051"}.hy_c-icon--map-marker:before{content:"\\E052"}.hy_c-icon--map-marker-inverted:before{content:"\\E053"}.hy_c-icon--user-profile:before{content:"\\E055"}.hy_c-icon--user-profile-circled:before{content:"\\E056"}.hy_c-icon--user-profile-inverted:before{content:"\\E057"}.hy_c-icon--users:before{content:"\\E059"}.hy_c-icon--users-circled:before{content:"\\E060"}.hy_c-icon--telus-t-inverted:before{content:"\\E062"}.hy_c-icon--telus-t-boxed-inverted:before{content:"\\E063"}.hy_c-icon--gear:before{content:"\\E064"}.hy_c-icon--gear-circled:before{content:"\\E065"}.hy_c-icon--gear-inverted:before{content:"\\E066"}.hy_c-icon--padlock:before{content:"\\E068"}.hy_c-icon--padlock-invereted:before{content:"\\E069"}.hy_c-icon--stacked-papers-inverted:before{content:"\\E071"}.hy_c-icon--music-note-inverted:before{content:"\\E072"}.hy_c-icon--smartphone-inverted:before{content:"\\E073"}.hy_c-icon--tablet-inverted:before{content:"\\E074"}.hy_c-icon--homephone-inverted:before{content:"\\E075"}.hy_c-icon--mouse-inverted:before{content:"\\E076"}.hy_c-icon--pricetag-inverted:before{content:"\\E077"}.hy_c-icon--paper-inverted:before{content:"\\E078"}.hy_c-icon--tv-inverted:before{content:"\\E079"}.hy_c-icon--film-clapper-inverted:before{content:"\\E080"}.hy_c-icon--envelope-inverted:before{content:"\\E081"}.hy_c-icon--phone-handset-inverted:before{content:"\\E082"}.hy_c-icon--usb-stick-inverted:before{content:"\\E083"}.hy_c-icon--home:before{content:"\\E084"}.hy_c-icon--home-circled:before{content:"\\E085"}.hy_c-icon--home-inverted:before{content:"\\E086"}.hy_c-icon--calendar:before{content:"\\E088"}.hy_c-icon--arrow-right-inverted:before{content:"\\E091"}.hy_c-icon--arrow-down-inverted:before{content:"\\E092"}.hy_c-icon--arrow-left-inverted:before{content:"\\E093"}.hy_c-icon--arrow-up-inverted:before{content:"\\E094"}.hy_c-icon--arrow-right-circled:before{content:"\\E095"}.hy_c-icon--arrow-down-circled:before{content:"\\E096"}.hy_c-icon--arrow-left-circled:before{content:"\\E097"}.hy_c-icon--arrow-up-circled:before{content:"\\E098"}.hy_c-icon--arrow-down:before{content:"\\E099"}.hy_c-icon--arrow-left:before{content:"\\E100"}.hy_c-icon--arrow-up:before{content:"\\E101"}.hy_c-icon--arrow-right:before{content:"\\E102"}.hy_c-icon--x:before{content:"\\E104"}.hy_c-icon--x-circled:before{content:"\\E105"}.hy_c-icon--x-inverted:before{content:"\\E106"}.hy_c-icon--checkmark:before{content:"\\E108"}.hy_c-icon--checkmark-circled:before{content:"\\E109"}.hy_c-icon--checkmark-inverted:before{content:"\\E110"}.hy_c-icon--infinity:before{content:"\\E111"}.hy_c-icon--plus:before{content:"\\E112"}.hy_c-icon--plus-circled:before{content:"\\E113"}.hy_c-icon--plus-inverted:before{content:"\\E114"}.hy_c-icon--minus:before{content:"\\E115"}.hy_c-icon--minus-circled:before{content:"\\E116"}.hy_c-icon--minus-inverted:before{content:"\\E117"}.hy_c-icon--chat-bubble:before{content:"\\E119"}.hy_c-icon--chat-dots:before{content:"\\E120"}.hy_c-icon--chat-clock:before{content:"\\E121"}.hy_c-icon--chat-x:before{content:"\\E122"}.hy_c-icon--chat-inverted:before{content:"\\E123"}.hy_c-icon--sim-card:before{content:"\\E125"}.hy_c-icon--calculator:before{content:"\\E126"}.hy_c-icon--bluetooth-headset:before{content:"\\E127"}.hy_c-icon--outgoing-call:before{content:"\\E129"}.hy_c-icon--incoming-call:before{content:"\\E130"}.hy_c-icon--caution:before{content:"\\E131"}.hy_c-icon--wifi-inverted:before{content:"\\E132"}.hy_c-icon--wifi:before{content:"\\E133"}.hy_c-icon--thin-plus-circled:before{content:"\\E135"}.hy_c-icon--info-inverted:before,.hy_c-icon--info:before{content:"\\E136"}.hy_c-icon--trend-up:before{content:"\\E138"}.hy_c-icon--globe:before{content:"\\E140"}.hy_c-icon--satellite-inverted:before{content:"\\E142"}.hy_c-icon--card-arrow-left:before{content:"\\E144"}.hy_c-icon--card-arrow-right:before{content:"\\E145"}.hy_c-icon--calendar-inverted:before{content:"\\E146"}.hy_c-icon--overview-inverted:before{content:"\\E147"}.hy_c-icon--telus-circle-inverted:before{content:"\\E148"}.hy_c-icon--pulse-inverted:before{content:"\\E149"}.hy_c-icon--mike-mobile:before{content:"\\E150"}.hy_c-icon--rewards-badge:before{content:"\\E151"}.hy_c-icon--filter:before{content:"\\E152"}.hy_c-icon--schedule-talk:before{content:"\\E153"}.hy_c-icon--warning:before{content:"\\E154"}.hy_c-icon--satellite:before{content:"\\E155"}.hy_c-icon--cart-inverted:before{content:"\\E156"}.hy_c-icon--live-chat:before{content:"\\E157"}.hy_c-icon--business-connect-inverted:before{content:"\\E158"}.hy_c-icon--business-connect:before{content:"\\E159"}.hy_c-icon--cloud:before{content:"\\E160"}.hy_c-icon--data:before{content:"\\E161"}.hy_c-icon--delivery-truck:before{content:"\\E162"}.hy_c-icon--protection:before{content:"\\E163"}.hy_c-icon--colour-picker:before{content:"\\E164"}.hy_c-icon--multi-account-inverted:before{content:"\\E165"}.hy_c-icon--accessories-inverted:before{content:"\\E166"}.hy_c-icon--credit-card:before{content:"\\E167"}.hy_c-icon--dollar-sign:before{content:"\\E168"}.hy_c-icon--link-account:before{content:"\\E169"}.hy_c-icon--data-manager:before{content:"\\E170"}.hy_c-icon--accessories:before{content:"\\E171"}.hy_c-icon--tools-inverted:before{content:"\\E172"}.hy_c-icon--web-conference:before{content:"\\E173"}.hy_c-icon--web-conference-inverted:before{content:"\\E174"}.hy_c-icon--ip-fax:before{content:"\\E175"}.hy_c-icon--ip-fax-inverted:before{content:"\\E176"}.hy_c-icon--linked-in-inverted:before{content:"\\E177"}.hy_c-icon--wifi-signal:before{content:"\\E178"}.hy_c-icon--microphone-inverted:before{content:"\\E179"}.hy_c-icon--wifi-signal-inverted:before{content:"\\E180"}.hy_c-icon--networking-inverted:before{content:"\\E181"}.hy_c-icon--cycle-inverted:before{content:"\\E182"}.hy_c-icon--wifi-signal-alt-inverted:before{content:"\\E183"}.hy_c-icon--wifi-signal-alt:before{content:"\\E184"}.hy_c-icon--smartphone-add-inverted:before{content:"\\E185"}.hy_c-icon--credit-card-inverted:before{content:"\\E186"}.c-step-tracker{list-style:none;padding:0;position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;margin:1rem -1.5rem}@media screen and (min-width:600px){.c-step-tracker{padding-bottom:2.5rem;margin:1rem 0}}.c-step-tracker__step{width:100%;position:relative;text-align:center}.c-step-tracker__step:after,.c-step-tracker__step:before{position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);width:calc(50% - 1.4rem);content:\' \';border-bottom:.6rem solid #aeaeae}.c-step-tracker__step:before{left:0}.c-step-tracker__step:after{right:0}.c-step-tracker .c-step-tracker__step:first-child:before,.c-step-tracker .c-step-tracker__step:last-child:after{content:none}.c-step-tracker__label{position:absolute;bottom:-3rem;left:0;font-size:1.7rem;width:100%;height:2.5rem;font-family:Telus Regular,Helvetica Neue,Helvetica,Arial,sans-serif;color:#666}@media screen and (max-width:599px){.c-step-tracker__label{display:none}}.c-step-tracker__step--active .c-step-tracker__label{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;color:#408000}.c-step-tracker__icon{font-size:3rem;color:#aeaeae}.c-step-tracker__icon:before{content:"\\E001"}.c-step-tracker__step--active .c-step-tracker__icon:before{content:"\\E002"}.c-step-tracker__setp--clickable a{cursor:pointer}.c-step-tracker__step--complete:after{border-bottom:.6rem solid #57a708}.c-step-tracker__step--complete .c-step-tracker__icon:before{content:"\\E110"}.c-step-tracker__step--active .c-step-tracker__icon:before,.c-step-tracker__step--complete .c-step-tracker__icon:before{color:#57a708}.c-step-tracker__step--complete+.c-step-tracker__step--active:before,.c-step-tracker__step--complete+.c-step-tracker__step--complete:before{border-bottom:.6rem solid #57a708}.c-step-tracker-mobile-label{font-size:1.7rem;text-align:center;font-family:Telus Regular,Helvetica Neue,Helvetica,Arial,sans-serif;color:#666}@media screen and (min-width:600px){.c-step-tracker-mobile-label{display:none}}.c-step-tracker-mobile-label__step{font-family:Telus Medium,Helvetica Neue,Helvetica,Arial,sans-serif;color:#408000}',""])},function(e,t,n){t=e.exports=n(1)(),t.push([e.id,".c-tabs__header{list-style:none;padding:0;margin:0;display:-webkit-box;display:-ms-flexbox;display:flex}.c-tabs__header-item{margin-top:2px;height:45px;padding:0 2px;-webkit-box-flex:1;-ms-flex:1;flex:1}.c-tabs__header-item a{background-color:#e2e2e2;text-decoration:none;padding:13px 20px;color:#49166d;display:block}.c-tabs__header-item--active{margin-top:1px;height:46px;background-color:#fff;border-top:1px solid #e2e2e2;border-left:1px solid #e2e2e2;border-right:1px solid #e2e2e2}.c-tabs__header-item--active a{background-color:#fff;color:#333}.c-tabs__header-item--disabled a{background-color:#f5f6f7;color:#aeaeae;cursor:not-allowed}.c-tabs__body{background-color:#fff;border:1px solid #e2e2e2;margin-top:-1px;padding:20px}.c-tabs__pane{display:block;border-top:none;opacity:0;height:0;overflow:hidden;padding:0 5px;-webkit-transition:all .5s ease-out;transition:all .5s ease-out}.c-tabs__pane--active{opacity:1;padding:5px;height:auto}",""])},function(e,t,n){var i;(function(e,o,r){/*!
	 * @overview es6-promise - a tiny implementation of Promises/A+.
	 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
	 * @license   Licensed under MIT license
	 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
	 * @version   3.2.1
	 */
(function(){"use strict";function s(e){return"function"==typeof e||"object"==typeof e&&null!==e}function a(e){return"function"==typeof e}function c(e){G=e}function l(e){ee=e}function h(){return function(){e.nextTick(v)}}function u(){return function(){Y(v)}}function f(){var e=0,t=new ie(v),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function p(){var e=new MessageChannel;return e.port1.onmessage=v,function(){e.port2.postMessage(0)}}function d(){return function(){setTimeout(v,1)}}function v(){for(var e=0;e<X;e+=2){var t=se[e],n=se[e+1];t(n),se[e]=void 0,se[e+1]=void 0}X=0}function y(){try{var e=n(220);return Y=e.runOnLoop||e.runOnContext,u()}catch(t){return d()}}function _(e,t){var n=this,i=new this.constructor(m);void 0===i[le]&&M(i);var o=n._state;if(o){var r=arguments[o-1];ee(function(){P(o,i,r,n._result)})}else j(n,i,e,t);return i}function b(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(m);return N(n,e),n}function m(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function E(){return new TypeError("A promises callback cannot return that same promise.")}function w(e){try{return e.then}catch(t){return pe.error=t,pe}}function x(e,t,n,i){try{e.call(t,n,i)}catch(o){return o}}function k(e,t,n){ee(function(e){var i=!1,o=x(n,t,function(n){i||(i=!0,t!==n?N(e,n):A(e,n))},function(t){i||(i=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&o&&(i=!0,T(e,o))},e)}function C(e,t){t._state===ue?A(e,t._result):t._state===fe?T(e,t._result):j(t,void 0,function(t){N(e,t)},function(t){T(e,t)})}function $(e,t,n){t.constructor===e.constructor&&n===ae&&constructor.resolve===ce?C(e,t):n===pe?T(e,pe.error):void 0===n?A(e,t):a(n)?k(e,t,n):A(e,t)}function N(e,t){e===t?T(e,g()):s(t)?$(e,t,w(t)):A(e,t)}function O(e){e._onerror&&e._onerror(e._result),D(e)}function A(e,t){e._state===he&&(e._result=t,e._state=ue,0!==e._subscribers.length&&ee(D,e))}function T(e,t){e._state===he&&(e._state=fe,e._result=t,ee(O,e))}function j(e,t,n,i){var o=e._subscribers,r=o.length;e._onerror=null,o[r]=t,o[r+ue]=n,o[r+fe]=i,0===r&&e._state&&ee(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i,o,r=e._result,s=0;s<t.length;s+=3)i=t[s],o=t[s+n],i?P(n,i,o,r):o(r);e._subscribers.length=0}}function S(){this.error=null}function V(e,t){try{return e(t)}catch(n){return de.error=n,de}}function P(e,t,n,i){var o,r,s,c,l=a(n);if(l){if(o=V(n,i),o===de?(c=!0,r=o.error,o=null):s=!0,t===o)return void T(t,E())}else o=i,s=!0;t._state!==he||(l&&s?N(t,o):c?T(t,r):e===ue?A(t,o):e===fe&&T(t,o))}function R(e,t){try{t(function(t){N(e,t)},function(t){T(e,t)})}catch(n){T(e,n)}}function F(){return ve++}function M(e){e[le]=ve++,e._state=void 0,e._result=void 0,e._subscribers=[]}function I(e){return new ge(this,e).promise}function L(e){var t=this;return new t(Z(e)?function(n,i){for(var o=e.length,r=0;r<o;r++)t.resolve(e[r]).then(n,i)}:function(e,t){t(new TypeError("You must pass an array to race."))})}function H(e){var t=this,n=new t(m);return T(n,e),n}function z(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function B(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(e){this[le]=F(),this._result=this._state=void 0,this._subscribers=[],m!==e&&("function"!=typeof e&&z(),this instanceof U?R(this,e):B())}function W(e,t){this._instanceConstructor=e,this.promise=new e(m),this.promise[le]||M(this.promise),Z(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?A(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&A(this.promise,this._result))):T(this.promise,q())}function q(){return new Error("Array Methods must be provided an Array")}function J(){var e;if("undefined"!=typeof o)e=o;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var n=e.Promise;n&&"[object Promise]"===Object.prototype.toString.call(n.resolve())&&!n.cast||(e.Promise=me)}var Q;Q=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y,G,K,Z=Q,X=0,ee=function(e,t){se[X]=e,se[X+1]=t,X+=2,2===X&&(G?G(v):K())},te="undefined"!=typeof window?window:void 0,ne=te||{},ie=ne.MutationObserver||ne.WebKitMutationObserver,oe="undefined"==typeof self&&"undefined"!=typeof e&&"[object process]"==={}.toString.call(e),re="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,se=new Array(1e3);K=oe?h():ie?f():re?p():void 0===te?y():d();var ae=_,ce=b,le=Math.random().toString(36).substring(16),he=void 0,ue=1,fe=2,pe=new S,de=new S,ve=0,ye=I,_e=L,be=H,me=U;U.all=ye,U.race=_e,U.resolve=ce,U.reject=be,U._setScheduler=c,U._setAsap=l,U._asap=ee,U.prototype={constructor:U,then:ae,"catch":function(e){return this.then(null,e)}};var ge=W;W.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===he&&n<e;n++)this._eachEntry(t[n],n)},W.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===ce){var o=w(e);if(o===ae&&e._state!==he)this._settledAt(e._state,t,e._result);else if("function"!=typeof o)this._remaining--,this._result[t]=e;else if(n===me){var r=new n(m);$(r,e,o),this._willSettleAt(r,t)}else this._willSettleAt(new n(function(t){t(e)}),t)}else this._willSettleAt(i(e),t)},W.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===he&&(this._remaining--,e===fe?T(i,n):this._result[t]=n),0===this._remaining&&A(i,this._result)},W.prototype._willSettleAt=function(e,t){var n=this;j(e,void 0,function(e){n._settledAt(ue,t,e)},function(e){n._settledAt(fe,t,e)})};var Ee=J,we={Promise:me,polyfill:Ee};n(218).amd?(i=function(){return we}.call(t,n,t,r),!(void 0!==i&&(r.exports=i))):"undefined"!=typeof r&&r.exports?r.exports=we:"undefined"!=typeof this&&(this.ES6Promise=we),Ee()}).call(this),r.exports=o.Promise}).call(t,n(19),function(){return this}(),n(219)(e))},function(e,t,n){(function(t){!function(e){"use strict";function n(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function i(e){return"string"!=typeof e&&(e=String(e)),e}function o(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return y.iterable&&(t[Symbol.iterator]=function(){return t}),t}function r(e){this.map={},e instanceof r?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function s(e){return e.bodyUsed?t.reject(new TypeError("Already read")):void(e.bodyUsed=!0)}function a(e){return new t(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function l(e){var t=new FileReader;return t.readAsText(e),a(t)}function h(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(y.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(y.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!y.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},y.blob?(this.blob=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return t.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return t.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e=s(this);if(e)return e;if(this._bodyBlob)return l(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return t.resolve(this._bodyText)}):this.text=function(){var e=s(this);return e?e:t.resolve(this._bodyText)},y.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function u(e){var t=e.toUpperCase();return _.indexOf(t)>-1?t:e}function f(e,t){t=t||{};var n=t.body;if(f.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new r(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new r(t.headers)),this.method=u(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(o))}}),t}function d(e){var t=new r,n=(e.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(e){var n=e.trim().split(":"),i=n.shift().trim(),o=n.join(":").trim();t.append(i,o)}),t}function v(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof r?t.headers:new r(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var y={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};r.prototype.append=function(e,t){e=n(e),t=i(t);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(t)},r.prototype["delete"]=function(e){delete this.map[n(e)]},r.prototype.get=function(e){var t=this.map[n(e)];return t?t[0]:null},r.prototype.getAll=function(e){return this.map[n(e)]||[]},r.prototype.has=function(e){return this.map.hasOwnProperty(n(e))},r.prototype.set=function(e,t){this.map[n(e)]=[i(t)]},r.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){e.call(t,i,n,this)},this)},this)},r.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),o(e)},r.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),o(e)},r.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),o(e)},y.iterable&&(r.prototype[Symbol.iterator]=r.prototype.entries);var _=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},h.call(f.prototype),h.call(v.prototype),v.prototype.clone=function(){return new v(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new r(this.headers),url:this.url})},v.error=function(){var e=new v(null,{status:0,statusText:""});return e.type="error",e};var b=[301,302,303,307,308];v.redirect=function(e,t){if(b.indexOf(t)===-1)throw new RangeError("Invalid status code");return new v(null,{status:t,headers:{location:e}})},e.Headers=r,e.Request=f,e.Response=v,e.fetch=function(e,n){return new t(function(t,i){function o(){return"responseURL"in s?s.responseURL:/^X-Request-URL:/m.test(s.getAllResponseHeaders())?s.getResponseHeader("X-Request-URL"):void 0}var r;r=f.prototype.isPrototypeOf(e)&&!n?e:new f(e,n);var s=new XMLHttpRequest;s.onload=function(){var e={status:s.status,statusText:s.statusText,headers:d(s),url:o()},n="response"in s?s.response:s.responseText;t(new v(n,e))},s.onerror=function(){i(new TypeError("Network request failed"))},s.ontimeout=function(){i(new TypeError("Network request failed"))},s.open(r.method,r.url,!0),"include"===r.credentials&&(s.withCredentials=!0),"responseType"in s&&y.blob&&(s.responseType="blob"),r.headers.forEach(function(e,t){s.setRequestHeader(t,e)}),s.send("undefined"==typeof r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),e.exports=self.fetch}).call(t,n(83))},function(e,t,n){e.exports=n.p+"b4de29fe43ac85ef0b66f9c7dfc474d3.png"},function(e,t,n){var i=n(6),o=n(3),r=i(o,"DataView");e.exports=r},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var i=e[t];this.set(i[0],i[1])}}var o=n(118),r=n(119),s=n(120),a=n(121),c=n(122);i.prototype.clear=o,i.prototype["delete"]=r,i.prototype.get=s,i.prototype.has=a,i.prototype.set=c,e.exports=i},function(e,t,n){var i=n(6),o=n(3),r=i(o,"Promise");e.exports=r},function(e,t,n){var i=n(6),o=n(3),r=i(o,"Set");e.exports=r},function(e,t,n){function i(e){var t=-1,n=e?e.length:0;for(this.__data__=new o;++t<n;)this.add(e[t])}var o=n(17),r=n(138),s=n(139);i.prototype.add=i.prototype.push=r,i.prototype.has=s,e.exports=i},function(e,t,n){var i=n(3),o=i.Uint8Array;e.exports=o},function(e,t,n){var i=n(6),o=n(3),r=i(o,"WeakMap");e.exports=r},function(e,t){function n(e,t,n){var i=n.length;switch(i){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}e.exports=n},function(e,t){function n(e,t){for(var n=-1,i=e?e.length:0;++n<i;)if(t(e[n],n,e))return!0;return!1}e.exports=n},function(e,t){function n(e,t,n){if("function"!=typeof e)throw new TypeError(i);return setTimeout(function(){e.apply(void 0,n)},t)}var i="Expected a function";e.exports=n},function(e,t){function n(e,t,n,i){for(var o=e.length,r=n+(i?1:-1);i?r--:++r<o;)if(t(e[r],r,e))return r;return-1}e.exports=n},function(e,t){function n(e,t){return null!=e&&t in Object(e)}e.exports=n},function(e,t,n){function i(e,t,n,i,y,b){var m=l(e),g=l(t),E=d,w=d;m||(E=c(e),E=E==p?v:E),g||(w=c(t),w=w==p?v:w);var x=E==v&&!h(e),k=w==v&&!h(t),C=E==w;if(C&&!x)return b||(b=new o),m||u(e)?r(e,t,n,i,y,b):s(e,t,E,n,i,y,b);if(!(y&f)){var $=x&&_.call(e,"__wrapped__"),N=k&&_.call(t,"__wrapped__");if($||N){var O=$?e.value():e,A=N?t.value():t;return b||(b=new o),n(O,A,i,y,b)}}return!!C&&(b||(b=new o),a(e,t,n,i,y,b))}var o=n(23),r=n(30),s=n(110),a=n(111),c=n(115),l=n(4),h=n(31),u=n(154),f=2,p="[object Arguments]",d="[object Array]",v="[object Object]",y=Object.prototype,_=y.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t,n,i){var c=n.length,l=c,h=!i;if(null==e)return!l;for(e=Object(e);c--;){var u=n[c];if(h&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++c<l;){u=n[c];var f=u[0],p=e[f],d=u[1];if(h&&u[2]){if(void 0===p&&!(f in e))return!1}else{var v=new o;if(i)var y=i(p,d,f,e,t,v);if(!(void 0===y?r(d,p,i,s|a,v):y))return!1}}return!0}var o=n(23),r=n(27),s=1,a=2;e.exports=i},function(e,t,n){function i(e){if(!a(e)||s(e))return!1;var t=o(e)||r(e)?d:h;return t.test(c(e))}var o=n(18),r=n(31),s=n(125),a=n(7),c=n(35),l=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,u=Object.prototype,f=Function.prototype.toString,p=u.hasOwnProperty,d=RegExp("^"+f.call(p).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=i},function(e,t,n){function i(e){return"function"==typeof e?e:null==e?s:"object"==typeof e?a(e)?r(e[0],e[1]):o(e):c(e)}var o=n(103),r=n(104),s=n(152),a=n(4),c=n(157);e.exports=i},function(e,t){function n(e){return i(Object(e))}var i=Object.keys;e.exports=n},function(e,t,n){function i(e){var t=r(e);return 1==t.length&&t[0][2]?s(t[0][0],t[0][1]):function(n){return n===e||o(n,e,t)}}var o=n(99),r=n(113),s=n(34);e.exports=i},function(e,t,n){function i(e,t){return a(e)&&c(t)?l(h(e),t):function(n){var i=r(n,e);return void 0===i&&i===t?s(n,e):o(t,i,void 0,u|f)}}var o=n(27),r=n(150),s=n(151),a=n(12),c=n(33),l=n(34),h=n(14),u=1,f=2;e.exports=i},function(e,t,n){function i(e){return function(t){return o(t,e)}}var o=n(25);e.exports=i},function(e,t){function n(e,t){for(var n=-1,i=Array(e);++n<e;)i[n]=t(n);return i}e.exports=n},function(e,t,n){function i(e){if("string"==typeof e)return e;if(r(e))return c?c.call(e):"";var t=e+"";return"0"==t&&1/e==-s?"-0":t}var o=n(24),r=n(16),s=1/0,a=o?o.prototype:void 0,c=a?a.toString:void 0;e.exports=i},function(e,t){function n(e){return e&&e.Object===Object?e:null}e.exports=n},function(e,t,n){var i=n(3),o=i["__core-js_shared__"];e.exports=o},function(e,t,n){function i(e,t,n,i,o,w,k){switch(n){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case g:return!(e.byteLength!=t.byteLength||!i(new r(e),new r(t)));case u:case f:return+e==+t;case p:return e.name==t.name&&e.message==t.message;case v:return e!=+e?t!=+t:e==+t;case y:case b:return e==t+"";case d:var C=a;case _:var $=w&h;if(C||(C=c),e.size!=t.size&&!$)return!1;var N=k.get(e);return N?N==t:(w|=l,k.set(e,t),s(C(e),C(t),i,o,w,k));case m:if(x)return x.call(e)==x.call(t)}return!1}var o=n(24),r=n(91),s=n(30),a=n(137),c=n(140),l=1,h=2,u="[object Boolean]",f="[object Date]",p="[object Error]",d="[object Map]",v="[object Number]",y="[object RegExp]",_="[object Set]",b="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",E="[object DataView]",w=o?o.prototype:void 0,x=w?w.valueOf:void 0;e.exports=i},function(e,t,n){function i(e,t,n,i,a,c){var l=a&s,h=r(e),u=h.length,f=r(t),p=f.length;if(u!=p&&!l)return!1;for(var d=u;d--;){var v=h[d];if(!(l?v in t:o(t,v)))return!1}var y=c.get(e);if(y)return y==t;var _=!0;c.set(e,t);for(var b=l;++d<u;){v=h[d];var m=e[v],g=t[v];if(i)var E=l?i(g,m,v,t,e,c):i(m,g,v,e,t,c);if(!(void 0===E?m===g||n(m,g,i,a,c):E)){_=!1;break}b||(b="constructor"==v)}if(_&&!b){var w=e.constructor,x=t.constructor;w!=x&&"constructor"in e&&"constructor"in t&&!("function"==typeof w&&w instanceof w&&"function"==typeof x&&x instanceof x)&&(_=!1)}return c["delete"](e),_}var o=n(26),r=n(40),s=2;e.exports=i},function(e,t,n){var i=n(28),o=i("length");e.exports=o},function(e,t,n){function i(e){for(var t=r(e),n=t.length;n--;){var i=t[n],s=e[i];t[n]=[i,s,o(s)]}return t}var o=n(33),r=n(40);e.exports=i},function(e,t){function n(e){return i(Object(e))}var i=Object.getPrototypeOf;e.exports=n},function(e,t,n){function i(e){return _.call(e)}var o=n(86),r=n(22),s=n(88),a=n(89),c=n(92),l=n(35),h="[object Map]",u="[object Object]",f="[object Promise]",p="[object Set]",d="[object WeakMap]",v="[object DataView]",y=Object.prototype,_=y.toString,b=l(o),m=l(r),g=l(s),E=l(a),w=l(c);(o&&i(new o(new ArrayBuffer(1)))!=v||r&&i(new r)!=h||s&&i(s.resolve())!=f||a&&i(new a)!=p||c&&i(new c)!=d)&&(i=function(e){var t=_.call(e),n=t==u?e.constructor:void 0,i=n?l(n):void 0;if(i)switch(i){case b:return v;case m:return h;case g:return f;case E:return p;case w:return d}return t}),e.exports=i},function(e,t){function n(e,t){return null==e?void 0:e[t]}e.exports=n},function(e,t,n){function i(e,t,n){t=c(t,e)?[t]:o(t);for(var i,f=-1,p=t.length;++f<p;){var d=u(t[f]);if(!(i=null!=e&&n(e,d)))break;e=e[d]}if(i)return i;var p=e?e.length:0;return!!p&&l(p)&&a(d,p)&&(s(e)||h(e)||r(e))}var o=n(29),r=n(37),s=n(4),a=n(32),c=n(12),l=n(15),h=n(39),u=n(14);e.exports=i},function(e,t,n){function i(){this.__data__=o?o(null):{}}var o=n(13);e.exports=i},function(e,t){function n(e){return this.has(e)&&delete this.__data__[e]}e.exports=n},function(e,t,n){function i(e){var t=this.__data__;if(o){var n=t[e];return n===r?void 0:n}return a.call(t,e)?t[e]:void 0}var o=n(13),r="__lodash_hash_undefined__",s=Object.prototype,a=s.hasOwnProperty;e.exports=i},function(e,t,n){function i(e){var t=this.__data__;return o?void 0!==t[e]:s.call(t,e)}var o=n(13),r=Object.prototype,s=r.hasOwnProperty;e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__;return n[e]=o&&void 0===t?r:t,this}var o=n(13),r="__lodash_hash_undefined__";e.exports=i},function(e,t,n){function i(e){var t=e?e.length:void 0;return a(t)&&(s(e)||c(e)||r(e))?o(t,String):null}var o=n(106),r=n(37),s=n(4),a=n(15),c=n(39);e.exports=i},function(e,t){function n(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=n},function(e,t,n){function i(e){return!!r&&r in e}var o=n(109),r=function(){var e=/[^.]+$/.exec(o&&o.keys&&o.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=i},function(e,t){function n(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||i;return e===n}var i=Object.prototype;e.exports=n},function(e,t){function n(){this.__data__=[]}e.exports=n},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():s.call(t,n,1),!0}var o=n(10),r=Array.prototype,s=r.splice;e.exports=i},function(e,t,n){function i(e){var t=this.__data__,n=o(t,e);return n<0?void 0:t[n][1]}var o=n(10);e.exports=i},function(e,t,n){function i(e){return o(this.__data__,e)>-1}var o=n(10);e.exports=i},function(e,t,n){function i(e,t){var n=this.__data__,i=o(n,e);return i<0?n.push([e,t]):n[i][1]=t,this}var o=n(10);e.exports=i},function(e,t,n){function i(){this.__data__={hash:new o,map:new(s||r),string:new o}}var o=n(87),r=n(9),s=n(22);e.exports=i},function(e,t,n){function i(e){return o(this,e)["delete"](e)}var o=n(11);e.exports=i},function(e,t,n){function i(e){return o(this,e).get(e)}var o=n(11);e.exports=i},function(e,t,n){function i(e){return o(this,e).has(e)}var o=n(11);e.exports=i},function(e,t,n){function i(e,t){return o(this,e).set(e,t),this}var o=n(11);e.exports=i},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e,i){n[++t]=[i,e]}),n}e.exports=n},function(e,t){function n(e){return this.__data__.set(e,i),this}var i="__lodash_hash_undefined__";e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t){function n(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}e.exports=n},function(e,t,n){function i(){this.__data__=new o}var o=n(9);e.exports=i},function(e,t){function n(e){return this.__data__["delete"](e)}e.exports=n},function(e,t){function n(e){return this.__data__.get(e)}e.exports=n},function(e,t){function n(e){return this.__data__.has(e)}e.exports=n},function(e,t,n){function i(e,t){var n=this.__data__;return n instanceof o&&n.__data__.length==s&&(n=this.__data__=new r(n.__data__)),n.set(e,t),this}var o=n(9),r=n(17),s=200;e.exports=i},function(e,t,n){var i=n(155),o=n(160),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(\.|\[\])(?:\4|$))/g,s=/\\(\\)?/g,a=i(function(e){var t=[];return o(e).replace(r,function(e,n,i,o){t.push(i?o.replace(s,"$1"):n||e)}),t});e.exports=a},function(e,t,n){function i(e,t,n){function i(t){var n=b,i=m;return b=m=void 0,k=t,E=e.apply(i,n)}function h(e){return k=e,w=setTimeout(p,t),C?i(e):E}function u(e){var n=e-x,i=e-k,o=t-n;return $?l(o,g-i):o}function f(e){var n=e-x,i=e-k;return void 0===x||n>=t||n<0||$&&i>=g}function p(){var e=r();return f(e)?d(e):void(w=setTimeout(p,u(e)))}function d(e){return w=void 0,N&&b?i(e):(b=m=void 0,E)}function v(){k=0,b=x=m=w=void 0}function y(){return void 0===w?E:d(r())}function _(){var e=r(),n=f(e);if(b=arguments,m=this,x=e,n){if(void 0===w)return h(x);if($)return w=setTimeout(p,t),i(x)}return void 0===w&&(w=setTimeout(p,t)),E}var b,m,g,E,w,x,k=0,C=!1,$=!1,N=!0;if("function"!=typeof e)throw new TypeError(a);return t=s(t)||0,o(n)&&(C=!!n.leading,$="maxWait"in n,g=$?c(s(n.maxWait)||0,t):g,N="trailing"in n?!!n.trailing:N),_.cancel=v,_.flush=y,_}var o=n(7),r=n(156),s=n(42),a="Expected a function",c=Math.max,l=Math.min;e.exports=i},function(e,t){function n(e,t){return e===t||e!==e&&t!==t}e.exports=n},function(e,t,n){function i(e,t,n){var i=e?e.length:0;if(!i)return-1;var c=null==n?0:s(n);return c<0&&(c=a(i+c,0)),o(e,r(t,3),c)}var o=n(96),r=n(101),s=n(41),a=Math.max;e.exports=i},function(e,t,n){function i(e,t,n){var i=null==e?void 0:o(e,t);return void 0===i?n:i}var o=n(25);e.exports=i},function(e,t,n){function i(e,t){return null!=e&&r(e,t,o)}var o=n(97),r=n(117);e.exports=i},function(e,t){function n(e){return e}e.exports=n},function(e,t,n){function i(e){return r(e)&&o(e)}var o=n(38),r=n(8);e.exports=i},function(e,t,n){function i(e){return r(e)&&o(e.length)&&!!T[D.call(e)]}var o=n(15),r=n(8),s="[object Arguments]",a="[object Array]",c="[object Boolean]",l="[object Date]",h="[object Error]",u="[object Function]",f="[object Map]",p="[object Number]",d="[object Object]",v="[object RegExp]",y="[object Set]",_="[object String]",b="[object WeakMap]",m="[object ArrayBuffer]",g="[object DataView]",E="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",k="[object Int16Array]",C="[object Int32Array]",$="[object Uint8Array]",N="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]",T={};T[E]=T[w]=T[x]=T[k]=T[C]=T[$]=T[N]=T[O]=T[A]=!0,T[s]=T[a]=T[m]=T[c]=T[g]=T[l]=T[h]=T[u]=T[f]=T[p]=T[d]=T[v]=T[y]=T[_]=T[b]=!1;var j=Object.prototype,D=j.toString;e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new TypeError(r);var n=function(){var i=arguments,o=t?t.apply(this,i):i[0],r=n.cache;if(r.has(o))return r.get(o);var s=e.apply(this,i);return n.cache=r.set(o,s),s};return n.cache=new(i.Cache||o),n}var o=n(17),r="Expected a function";i.Cache=o,e.exports=i},function(e,t){function n(){return Date.now()}e.exports=n},function(e,t,n){function i(e){return s(e)?o(a(e)):r(e)}var o=n(28),r=n(105),s=n(12),a=n(14);e.exports=i},function(e,t,n){function i(e,t){if("function"!=typeof e)throw new TypeError(s);return t=a(void 0===t?e.length-1:r(t),0),function(){for(var n=arguments,i=-1,r=a(n.length-t,0),s=Array(r);++i<r;)s[i]=n[t+i];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,n[0],s);case 2:return e.call(this,n[0],n[1],s)}var c=Array(t+1);for(i=-1;++i<t;)c[i]=n[i];return c[t]=s,o(e,this,c)}}var o=n(93),r=n(41),s="Expected a function",a=Math.max;e.exports=i},function(e,t,n){function i(e){if(!e)return 0===e?e:0;if(e=o(e),e===r||e===-r){var t=e<0?-1:1;return t*s}return e===e?e:0}var o=n(42),r=1/0,s=1.7976931348623157e308;e.exports=i},function(e,t,n){function i(e){return null==e?"":o(e)}var o=n(107);e.exports=i},function(e,t){(function(t){var n="undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope?self:{},i=function(){var e=/\blang(?:uage)?-(\w+)\b/i,t=0,i=n.Prism={util:{encode:function(e){return e instanceof o?new o(e.type,i.util.encode(e.content),e.alias):"Array"===i.util.type(e)?e.map(i.util.encode):e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(e){return Object.prototype.toString.call(e).match(/\[object (\w+)\]/)[1]},objId:function(e){return e.__id||Object.defineProperty(e,"__id",{value:++t}),e.__id},clone:function(e){var t=i.util.type(e);switch(t){case"Object":var n={};for(var o in e)e.hasOwnProperty(o)&&(n[o]=i.util.clone(e[o]));return n;case"Array":return e.map&&e.map(function(e){return i.util.clone(e)})}return e}},languages:{extend:function(e,t){var n=i.util.clone(i.languages[e]);for(var o in t)n[o]=t[o];return n},insertBefore:function(e,t,n,o){o=o||i.languages;var r=o[e];if(2==arguments.length){n=arguments[1];for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s]);return r}var a={};for(var c in r)if(r.hasOwnProperty(c)){if(c==t)for(var s in n)n.hasOwnProperty(s)&&(a[s]=n[s]);a[c]=r[c]}return i.languages.DFS(i.languages,function(t,n){n===o[e]&&t!=e&&(this[t]=a)}),o[e]=a},DFS:function(e,t,n,o){o=o||{};for(var r in e)e.hasOwnProperty(r)&&(t.call(e,r,e[r],n||r),"Object"!==i.util.type(e[r])||o[i.util.objId(e[r])]?"Array"!==i.util.type(e[r])||o[i.util.objId(e[r])]||(o[i.util.objId(e[r])]=!0,i.languages.DFS(e[r],t,r,o)):(o[i.util.objId(e[r])]=!0,i.languages.DFS(e[r],t,null,o)))}},plugins:{},highlightAll:function(e,t){var n={callback:t,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};i.hooks.run("before-highlightall",n);for(var o,r=n.elements||document.querySelectorAll(n.selector),s=0;o=r[s++];)i.highlightElement(o,e===!0,n.callback)},highlightElement:function(t,o,r){for(var s,a,c=t;c&&!e.test(c.className);)c=c.parentNode;c&&(s=(c.className.match(e)||[,""])[1].toLowerCase(),a=i.languages[s]),t.className=t.className.replace(e,"").replace(/\s+/g," ")+" language-"+s,c=t.parentNode,/pre/i.test(c.nodeName)&&(c.className=c.className.replace(e,"").replace(/\s+/g," ")+" language-"+s);var l=t.textContent,h={element:t,language:s,grammar:a,code:l};if(i.hooks.run("before-sanity-check",h),!h.code||!h.grammar)return void i.hooks.run("complete",h);if(i.hooks.run("before-highlight",h),o&&n.Worker){var u=new Worker(i.filename);u.onmessage=function(e){h.highlightedCode=e.data,i.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,r&&r.call(h.element),i.hooks.run("after-highlight",h),i.hooks.run("complete",h)},u.postMessage(JSON.stringify({language:h.language,code:h.code,immediateClose:!0}))}else h.highlightedCode=i.highlight(h.code,h.grammar,h.language),i.hooks.run("before-insert",h),h.element.innerHTML=h.highlightedCode,r&&r.call(t),i.hooks.run("after-highlight",h),i.hooks.run("complete",h)},highlight:function(e,t,n){var r=i.tokenize(e,t);return o.stringify(i.util.encode(r),n)},tokenize:function(e,t,n){var o=i.Token,r=[e],s=t.rest;if(s){for(var a in s)t[a]=s[a];delete t.rest}e:for(var a in t)if(t.hasOwnProperty(a)&&t[a]){var c=t[a];c="Array"===i.util.type(c)?c:[c];for(var l=0;l<c.length;++l){var h=c[l],u=h.inside,f=!!h.lookbehind,p=!!h.greedy,d=0,v=h.alias;h=h.pattern||h;for(var y=0;y<r.length;y++){var _=r[y];if(r.length>e.length)break e;if(!(_ instanceof o)){h.lastIndex=0;var b=h.exec(_),m=1;if(!b&&p&&y!=r.length-1){var g=r[y+1].matchedStr||r[y+1],E=_+g;if(y<r.length-2&&(E+=r[y+2].matchedStr||r[y+2]),h.lastIndex=0,b=h.exec(E),!b)continue;var w=b.index+(f?b[1].length:0);if(w>=_.length)continue;var x=b.index+b[0].length,k=_.length+g.length;if(m=3,x<=k){if(r[y+1].greedy)continue;m=2,E=E.slice(0,k)}_=E}if(b){f&&(d=b[1].length);var w=b.index+d,b=b[0].slice(d),x=w+b.length,C=_.slice(0,w),$=_.slice(x),N=[y,m];C&&N.push(C);var O=new o(a,u?i.tokenize(b,u):b,v,b,p);N.push(O),$&&N.push($),Array.prototype.splice.apply(r,N)}}}}}return r},hooks:{all:{},add:function(e,t){var n=i.hooks.all;n[e]=n[e]||[],n[e].push(t)},run:function(e,t){var n=i.hooks.all[e];if(n&&n.length)for(var o,r=0;o=n[r++];)o(t)}}},o=i.Token=function(e,t,n,i,o){this.type=e,this.content=t,this.alias=n,this.matchedStr=i||null,this.greedy=!!o};if(o.stringify=function(e,t,n){if("string"==typeof e)return e;if("Array"===i.util.type(e))return e.map(function(n){return o.stringify(n,t,e)}).join("");var r={type:e.type,content:o.stringify(e.content,t,n),tag:"span",classes:["token",e.type],attributes:{},language:t,parent:n};if("comment"==r.type&&(r.attributes.spellcheck="true"),e.alias){var s="Array"===i.util.type(e.alias)?e.alias:[e.alias];Array.prototype.push.apply(r.classes,s)}i.hooks.run("wrap",r);var a="";for(var c in r.attributes)a+=(a?" ":"")+c+'="'+(r.attributes[c]||"")+'"';return"<"+r.tag+' class="'+r.classes.join(" ")+'" '+a+">"+r.content+"</"+r.tag+">"},!n.document)return n.addEventListener?(n.addEventListener("message",function(e){var t=JSON.parse(e.data),o=t.language,r=t.code,s=t.immediateClose;n.postMessage(i.highlight(r,i.languages[o],o)),s&&n.close()},!1),n.Prism):n.Prism;var r=document.currentScript||[].slice.call(document.getElementsByTagName("script")).pop();return r&&(i.filename=r.src,document.addEventListener&&!r.hasAttribute("data-manual")&&("loading"!==document.readyState?requestAnimationFrame(i.highlightAll,0):document.addEventListener("DOMContentLoaded",i.highlightAll))),n.Prism}();"undefined"!=typeof e&&e.exports&&(e.exports=i),
"undefined"!=typeof t&&(t.Prism=i),i.languages.markup={comment:/<!--[\w\W]*?-->/,prolog:/<\?[\w\W]+?\?>/,doctype:/<!DOCTYPE[\w\W]+?>/,cdata:/<!\[CDATA\[[\w\W]*?]]>/i,tag:{pattern:/<\/?(?!\d)[^\s>\/=.$<]+(?:\s+[^\s>\/=]+(?:=(?:("|')(?:\\\1|\\?(?!\1)[\w\W])*\1|[^\s'">=]+))?)*\s*\/?>/i,inside:{tag:{pattern:/^<\/?[^\s>\/]+/i,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"attr-value":{pattern:/=(?:('|")[\w\W]*?(\1)|[^\s>]+)/i,inside:{punctuation:/[=>"']/}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:/&#?[\da-z]{1,8};/i},i.hooks.add("wrap",function(e){"entity"===e.type&&(e.attributes.title=e.content.replace(/&amp;/,"&"))}),i.languages.xml=i.languages.markup,i.languages.html=i.languages.markup,i.languages.mathml=i.languages.markup,i.languages.svg=i.languages.markup,i.languages.css={comment:/\/\*[\w\W]*?\*\//,atrule:{pattern:/@[\w-]+?.*?(;|(?=\s*\{))/i,inside:{rule:/@[\w-]+/}},url:/url\((?:(["'])(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1|.*?)\)/i,selector:/[^\{\}\s][^\{\};]*?(?=\s*\{)/,string:/("|')(\\(?:\r\n|[\w\W])|(?!\1)[^\\\r\n])*\1/,property:/(\b|\B)[\w-]+(?=\s*:)/i,important:/\B!important\b/i,"function":/[-a-z0-9]+(?=\()/i,punctuation:/[(){};:]/},i.languages.css.atrule.inside.rest=i.util.clone(i.languages.css),i.languages.markup&&(i.languages.insertBefore("markup","tag",{style:{pattern:/(<style[\w\W]*?>)[\w\W]*?(?=<\/style>)/i,lookbehind:!0,inside:i.languages.css,alias:"language-css"}}),i.languages.insertBefore("inside","attr-value",{"style-attr":{pattern:/\s*style=("|').*?\1/i,inside:{"attr-name":{pattern:/^\s*style/i,inside:i.languages.markup.tag.inside},punctuation:/^\s*=\s*['"]|['"]\s*$/,"attr-value":{pattern:/.+/i,inside:i.languages.css}},alias:"language-css"}},i.languages.markup.tag)),i.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\w\W]*?\*\//,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0}],string:{pattern:/(["'])(\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[a-z0-9_\.\\]+/i,lookbehind:!0,inside:{punctuation:/(\.|\\)/}},keyword:/\b(if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,"boolean":/\b(true|false)\b/,"function":/[a-z0-9_]+(?=\()/i,number:/\b-?(?:0x[\da-f]+|\d*\.?\d+(?:e[+-]?\d+)?)\b/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/},i.languages.javascript=i.languages.extend("clike",{keyword:/\b(as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|var|void|while|with|yield)\b/,number:/\b-?(0x[\dA-Fa-f]+|0b[01]+|0o[0-7]+|\d*\.?\d+([Ee][+-]?\d+)?|NaN|Infinity)\b/,"function":/[_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*(?=\()/i}),i.languages.insertBefore("javascript","keyword",{regex:{pattern:/(^|[^\/])\/(?!\/)(\[.+?]|\\.|[^\/\\\r\n])+\/[gimyu]{0,5}(?=\s*($|[\r\n,.;})]))/,lookbehind:!0,greedy:!0}}),i.languages.insertBefore("javascript","string",{"template-string":{pattern:/`(?:\\\\|\\?[^\\])*?`/,greedy:!0,inside:{interpolation:{pattern:/\$\{[^}]+\}/,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:i.languages.javascript}},string:/[\s\S]+/}}}),i.languages.markup&&i.languages.insertBefore("markup","tag",{script:{pattern:/(<script[\w\W]*?>)[\w\W]*?(?=<\/script>)/i,lookbehind:!0,inside:i.languages.javascript,alias:"language-javascript"}}),i.languages.js=i.languages.javascript,function(){"undefined"!=typeof self&&self.Prism&&self.document&&document.querySelector&&(self.Prism.fileHighlight=function(){var e={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"};Array.prototype.forEach&&Array.prototype.slice.call(document.querySelectorAll("pre[data-src]")).forEach(function(t){for(var n,o=t.getAttribute("data-src"),r=t,s=/\blang(?:uage)?-(?!\*)(\w+)\b/i;r&&!s.test(r.className);)r=r.parentNode;if(r&&(n=(t.className.match(s)||[,""])[1]),!n){var a=(o.match(/\.(\w+)$/)||[,""])[1];n=e[a]||a}var c=document.createElement("code");c.className="language-"+n,t.textContent="",c.textContent="Loading",t.appendChild(c);var l=new XMLHttpRequest;l.open("GET",o,!0),l.onreadystatechange=function(){4==l.readyState&&(l.status<400&&l.responseText?(c.textContent=l.responseText,i.highlightElement(c)):l.status>=400?c.textContent=" Error "+l.status+" while fetching file: "+l.statusText:c.textContent=" Error: File does not exist or is empty")},l.send(null)})},document.addEventListener("DOMContentLoaded",self.Prism.fileHighlight))}()}).call(t,function(){return this}())},function(e,t){e.exports='<table class=sg_c-api-table> <tr> <th> Name </th> <th> Type </th> <th> Required </th> <th> Default </th> <th> Description </th> </tr> <tr v-for="item in items"> <td>{{item.name}}</td> <td>{{item.type}}</td> <td>{{item.isRequired}}</td> <td>{{item.default}}</td> <td>{{item.desc}}</td> </tr> </table> '},function(e,t){e.exports="<nav class=sg_c-nav> <h2 class=sg_c-nav__section>COMPONENTS</h2> <ul class=hy_o-list> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/', activeClass: 'sg_c-nav__link--active'}\"> Get Started </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/alert', activeClass: 'sg_c-nav__link--active'}\"> Alert </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/spinner', activeClass: 'sg_c-nav__link--active'}\"> Spinner </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/step-tracker', activeClass: 'sg_c-nav__link--active'}\"> Step Tracker </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/tabs', activeClass: 'sg_c-nav__link--active'}\"> Tabs </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/overlay', activeClass: 'sg_c-nav__link--active'}\"> Overlay </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/legal', activeClass: 'sg_c-nav__link--active'}\"> Legal </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/collapsable-panel', activeClass: 'sg_c-nav__link--active'}\"> Collapsable Panel </a> </li> </ul> <h2 class=sg_c-nav__section>DIRECTIVES</h2> <ul class=hy_o-list> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/overlay-opener', activeClass: 'sg_c-nav__link--active'}\"> Overlay Opener </a> </li> <li class=sg_c-nav__list-item> <a class=sg_c-nav__link v-link=\"{path: '/set-focus', activeClass: 'sg_c-nav__link--active'}\"> Set Focus </a> </li> </ul> </nav> "},function(e,t,n){e.exports='<header class="sg_c-site-header dfd hy_u-hidesm"> <div class=sg_c-site-header-container> <a href=/ > <img class=logo src='+n(85)+" alt=Logo> </a> </div> </header> "},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Alert</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <alert type=error>This is an error alert.</alert> <alert type=info>This is an info alert.</alert> <alert type=success>This is a success alert.</alert> <alert type=success :dismissible=false>This is not a dismissible alert.</alert> <alert type=success :on-closed=dismissCallBack>This is an alert with callback.</alert> <alert type=info :timeout=5000>This alert should timeout in 5 seconds.</alert> </div> <collapsable-panel label=HTML> <pre>\n           <code class=language-html>\n         &lt;alert type="error"&gt;This is an error alert.&lt;/alert&gt;\n         &lt;alert type="info"&gt;This is an info alert.&lt;/alert&gt;\n         &lt;alert type="success"&gt;This is a success alert.&lt;/alert&gt;\n         &lt;alert type="success" :dismissible="false"&gt;This is not a dismissible alert.&lt;/alert&gt;\n         &lt;alert type="success" :on-closed="dismissCallBack"&gt;This is an alert with callback.&lt;/alert&gt;\n         &lt;alert type="success" :timeout="5000"&gt;This alert should timeout in 5 seconds.&lt;/alert&gt;\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Collapsable Panel</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <collapsable-panel label="Panel 1" :is-open=true> Panel 1 content </collapsable-panel> <collapsable-panel label="Panel 2"> Panel 2 content </collapsable-panel> </div> <collapsable-panel label=HTML> <pre>\n           <code class=language-html>\n             &lt;collapsable-panel label="Panel 1" :is-open="true"&gt;\n               Panel 1 content\n             &lt;/collapsable-panel&gt;\n             &lt;collapsable-panel label="Panel 2"&gt;\n               Panel 2 content\n             &lt;/collapsable-panel&gt;\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Getting Started</h2> <hr class=hy_u-space-mb-2> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <h3 class="hy_c-headline hy_c-headline--5 hy_t-grey">CDN</h3> <p> ... </p> </div> </div></section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Legal System</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <p class="hy_c-copy hy_c-copy--body hy_t-grey"> Lorem ipsum<legal-counter v-overlay-opener=legal-overlay legal-key=hs-referral-terms legal-lang=en legal-region=bc></legal-counter> dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. <legal-counter v-overlay-opener=legal-overlay legal-key=1-year-offer-stim legal-lang=en legal-region=bc></legal-counter> </p> </div> <div class=sg_c-demo__container> <legal-container></legal-container> </div> <collapsable-panel label=HTML> <pre>\n           <code class=language-html>\n             &lt;legal-counter&gt;\n                legal-key="hs-referral-terms"\n                legal-lang="en"\n                legal-region="bc"\n             &lt;/legal-counter&gt;\n             &lt;legal-container&gt;&lt;/legal-container&gt;\n           </code>\n         </pre> </collapsable-panel> <collapsable-panel label=javascript> <pre>\n           <code class=language-javascript>\n             let vm = new Vue({\n               el: \'body\',\n               data() {\n                 return {\n                   ligerEndPoint: \'https://api.cms.telus.com/legals\',\n                   ligerApplicationKey: \'b9738d67b89dfc782746d4a9cf4a1093\'\n                 };\n               },\n               components: {\n                 LegalCounter,\n                 LegalContainer\n               }\n             });\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API: Legal Counter</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Overlay System</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <p> <button v-overlay-opener=overlay-1 class="hy_c-button hy_c-button--link hy_t-purple" type=button role=button> Open overlay #1 <i class="hy_c-icon hy_c-icon--arrow-right-circled hy_c-button__icon"></i> </button> </p> <p> <button v-overlay-opener=overlay-2 class="hy_c-button hy_c-button--link hy_t-purple" type=button role=button> Open overlay #2 <i class="hy_c-icon hy_c-icon--arrow-right-circled hy_c-button__icon"></i> </button> </p> <overlay-container> <overlay overlay-key=overlay-1> <h4 class="hy_c-headline hy_c-headline--h4" slot=overlay-header>This is overlay #1</h4> <article slot=overlay-body> Overlay #1 body </article> </overlay> <overlay overlay-key=overlay-2> <h4 class="hy_c-headline hy_c-headline--h4" slot=overlay-header>This is overlay #2</h4> <article slot=overlay-body> Overlay #2 body </article> </overlay> </overlay-container> </div> <collapsable-panel label=HTML> <pre>\n           <code class=language-html>\n             &lt;overlay-container&gt;\n               &lt;overlay overlay-key="overlay-1"&gt;\n                 &lt;h4  class="hy_c-headline hy_c-headline--h4" slot="overlay-header"&gt;\n                 This is overlay #1\n                 &lt;/h4&gt;\n                 &lt;article slot="overlay-body"&gt;\n                   Overlay #1 body\n                 &lt;/article&gt;\n               &lt;/overlay&gt;\n               &lt;overlay overlay-key="overlay-2"&gt;\n                 &lt;h4  class="hy_c-headline hy_c-headline--h4" slot="overlay-header"&gt;\n                 This is overlay #1\n                 &lt;/h4&gt;\n                 &lt;article slot="overlay-body"&gt;\n                   Overlay #2 body\n                 &lt;/article&gt;\n               &lt;/overlay&gt;\n             &lt;/overlay-container&gt;\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Spinner</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <label class="hy_c-control hy_c-control--checkbox"> <span class=hy_c-control__label-text>Full Screen</span> <input type=checkbox v-model=isFullScreen /> <div class=hy_c-control__indicator></div> </label> <button @click=showSpinner class="hy_c-button hy_c-button--raised hy_t-green" type=button> Show Spinner </button> <spinner :full-screen=isFullScreen :text=msg></spinner> </div> <collapsable-panel label=HTML> <pre>\n           <code class=language-html>\n             &lt;spinner text="I will close in 3 seconds" :full-screen="true"&gt;&lt;/spinner&gt;\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports=" <section class=\"hy_c-module hy_t-grey\"> <div class=hy_o-wrapper> <h2 class=\"hy_c-headline hy_c-headline--h4 hy_t-grey\">Step Tracker</h2> <hr class=hy_u-space-mb-2> <div class=\"sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed\"> <div class=sg_c-demo__container> <step-tracker :current-step=stepTrackerCurrentStep :config=stepTrackerConfig></step-tracker> </div> <collapsable-panel label=HTML> <pre>\n       <code class=language-html>\n        &lt;step-tracker\n        :current-step=\"stepTrackerCurrentStep\"\n        :config=\"stepTrackerConfig\"&gt;\n        &lt;/step-tracker&gt;\n       </code>\n     </pre> </collapsable-panel> <collapsable-panel label=javascript> <pre>\n           <code class=language-js>\n            let stepTrackerCurrentStep = 2;\n            let stepTrackerConfig = {\n              isClickable: true,\n              steps: [\n                {\n                  title: 'Step A',\n                  link: '',\n                  onClickHandler: (event) => {\n                    this.stepTrackerCurrentStep = 0;\n                  }\n                }, {\n                  title: 'Step B',\n                  link: '',\n                  onClickHandler: (event) => {\n                    this.stepTrackerCurrentStep = 1;\n                  }\n                }, {\n                  title: 'Step C',\n                  link: '',\n                  onClickHandler: (event) => {\n                    this.stepTrackerCurrentStep = 2;\n                  }\n                }\n              ]\n            };\n            let vm = new Vue({\n              el: 'body',\n              data: {\n                stepTrackerConfig,\n                stepTrackerCurrentStep\n            },\n              components: {\n                StepTracker\n              }\n            });\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class=\"hy_c-headline hy_c-headline--h5 hy_t-grey\">API</h3> <div class=\"hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed\"> <api-table :items=apiItems></api-table> </div> </div> </section> "},function(e,t){e.exports=' <section class="hy_c-module hy_t-grey"> <div class=hy_o-wrapper> <h2 class="hy_c-headline hy_c-headline--h4 hy_t-grey">Tab</h2> <hr class=hy_u-space-mb-2> <div class="sg_c-demo hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <div class=sg_c-demo__container> <tabs> <tab label="Tab 1"> <p> Tab 1 content </p> </tab> <tab label="Tab 2"> <p> Tab 2 content </p> </tab> <tab label="Tab 3" :is-disabled=true> <p> Tab 3 content </p> </tab> </tabs> </div> <collapsable-panel label=HTML> <pre>\n           <code class=language-html>\n             &lt;tabs&gt;\n               &lt;tab label="Tab 1"&gt;\n                 &lt;p&gt;\n                   Tab 1 content\n                 &lt;/p&gt;\n               &lt;/tab&gt;\n               &lt;tab label="Tab 2"&gt;\n                 &lt;p&gt;\n                   Tab 2 content\n                 &lt;/p&gt;\n               &lt;/tab&gt;\n               &lt;tab label="Tab 3" :is-disabled="true"&gt;\n                 &lt;p&gt;\n                   Tab 3 content\n                 &lt;/p&gt;\n               &lt;/tab&gt;\n             &lt;/tabs&gt;\n           </code>\n         </pre> </collapsable-panel> </div> <h3 class="hy_c-headline hy_c-headline--h5 hy_t-grey">API</h3> <div class="hy_o-layout hy_o-layout--with-gutter hy_o-layout--flushed"> <api-table :items=apiItems></api-table> </div> </div> </section> '},function(e,t){e.exports="<div v-if=isVisible transition=fade class=c-alert :class=\"'c-alert--' + type\" :class=\"{ 'c-alert--dismissible': dismissible }\" role=alert> <button v-if=dismissible @click=dismiss type=button class=c-alert__close-button aria-label=Close> <span aria-hidden=true>&times;</span> <span class=hy_u-invisible>Close</span> </button> <slot></slot> </div> "},function(e,t){e.exports='<div class=c-collapsable-panel> <h3 @click.prevent=toggleOpen :class="{\n      \'c-collapsable-panel__header--open\': isOpen\n    }" class="c-collapsable-panel__header hy_c-headline hy_c-headline--h5 hy_t-grey" v-html=label> </h3> <div class=c-collapsable-panel__body :class="{\n    \'c-collapsable-panel__body--open\': isOpen\n  }"> <slot></slot> </div> </div> '},function(e,t){e.exports='<div class=c-legal-container> <ol class=c-legal-container__ordered-list> <li v-set-focus=legal.isSelected class=c-legal-container__list-item :class="{\n      \'c-legal-container__list-item--active\': legal.isSelected\n    }" v-for="legal in indexedLegals" v-html=legal.content> </li> </ol> <ul class=c-legal-container__unordered-list> <li class=c-legal-container__list-item v-for="legal in nonIndexedLegals" v-html=legal.content> </li> </ul> </div> '},function(e,t){e.exports="<sup class=c-legal-sup> <a href=# @click.prevent=clickHandler> {{legalCounter}} </a> </sup> "},function(e,t){e.exports='<div class=c-overlay-container> <div class=c-overlay-container__curtain :class="{\n        \'c-overlay-container__curtain--active\': isVisible\n    }" @click.prevent="isVisible=false"> </div> <div class=c-overlay-container__overlays :class="{\n        \'c-overlay-container__overlays--active\': isVisible\n    }"> <slot></slot> </div> </div> '},function(e,t){e.exports="<article class=c-overlay v-show=isVisible> <div class=c-overlay__body> <slot name=overlay-body></slot> </div> <header class=c-overlay__header> <slot name=overlay-header></slot> <button type=button class=c-overlay__close-button aria-label=Close tabindex=0 @click.prevent=closeOverlay></button> </header> </article> "},function(e,t){e.exports='<div v-show=active class=c-spinner :class="{ \'c-spinner--fullscreen\': fullScreen }"> <svg viewBox="0 0 100 100" width=0 height=0> <circle stroke-width=4 fill=none stroke-linecap=round stroke-dashoffset=0 cx=50 cy=50 r=20></circle> </svg> <p class="c-spinner__text hy_c-copy hy_u-font-weight--medium" v-if=!!text>{{text}}</p> </div> '},function(e,t){e.exports='<ul class=c-step-tracker> <li class=c-step-tracker__step :class="{\n      \'c-step-tracker__step--complete\': currentStep > $index,\n      \'c-step-tracker__step--active\': currentStep === $index,\n      \'c-step-tracker__setp--clickable\': (currentStep > $index && config.isClickable)\n  }" v-for="step in config.steps"> <a :href="step.link || false" @click="clickHandler($event, step, $index)" v-if=config.isClickable> <span class=c-step-tracker__icon></span> <span class=c-step-tracker__label>{{$index + 1}}. {{step.title}}</span> </a> <span v-else class=c-step-tracker__icon></span> <span v-else class=c-step-tracker__label>{{$index + 1}}. {{step.title}}</span> </li> </ul> '},function(e,t){e.exports="<div class=c-tabs__pane :class=\"{\n    'c-tabs__pane--active': isVisible\n  }\"> <slot></slot> </div> "},function(e,t){e.exports='<div class=c-tabs> <ul class=c-tabs__header> <li v-for="tab in tabs" class=c-tabs__header-item :class="{\n                \'c-tabs__header-item--active\': ($index === activeTabIndex),\n                \'c-tabs__header-item--disabled\': tab.isDisabled\n              }" :disabled=tab.disabled> <a href=# @click.prevent="handleTabListClick($index, tab)" v-html=tab.label></a> </li> </ul> <div class=c-tabs__body> <slot></slot> </div> </div> '},function(e,t,n){var i,o;n(205),i=n(45),o=n(163),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(206),i=n(46),o=n(164),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(47),o=n(165),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(48),o=n(166),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(207),i=n(49),o=n(167),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(50),o=n(168),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(51),o=n(169),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(52),o=n(170),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(53),o=n(171),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(54),o=n(172),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(208),i=n(55),o=n(173),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(209),i=n(56),o=n(174),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(210),i=n(57),o=n(175),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(211),i=n(58),o=n(176),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(212),i=n(59),o=n(177),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(213),i=n(60),o=n(178),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(214),i=n(61),o=n(179),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(215),i=n(62),o=n(180),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;i=n(63),o=n(181),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){var i,o;n(216),i=n(64),o=n(182),e.exports=i||{},e.exports.__esModule&&(e.exports=e.exports["default"]),o&&(("function"==typeof e.exports?e.exports.options||(e.exports.options={}):e.exports).template=o)},function(e,t,n){/*!
	 * vue-router v0.7.13
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
!function(t,n){e.exports=n()}(this,function(){"use strict";function e(e,t,n){this.path=e,this.matcher=t,this.delegate=n}function t(e){this.routes={},this.children={},this.target=e}function n(t,i,o){return function(r,s){var a=t+r;return s?void s(n(a,i,o)):new e(t+r,i,o)}}function i(e,t,n){for(var i=0,o=0,r=e.length;o<r;o++)i+=e[o].path.length;t=t.substr(i);var s={path:t,handler:n};e.push(s)}function o(e,t,n,r){var s=t.routes;for(var a in s)if(s.hasOwnProperty(a)){var c=e.slice();i(c,a,s[a]),t.children[a]?o(c,t.children[a],n,r):n.call(r,c)}}function r(e,i){var r=new t;e(n("",r,this.delegate)),o([],r,function(e){i?i(this,e):this.add(e)},this)}function s(e){W||"undefined"==typeof console||console.error("[vue-router] "+e)}function a(e,t){try{return t?decodeURIComponent(e):decodeURI(e)}catch(n){s("malformed URI"+(t?" component: ":": ")+e)}}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function l(e){this.string=e}function h(e){this.name=e}function u(e){this.name=e}function f(){}function p(e,t,n){"/"===e.charAt(0)&&(e=e.substr(1));var i=e.split("/"),o=[];n.val="";for(var r=0,s=i.length;r<s;r++){var a,c=i[r];(a=c.match(/^:([^\/]+)$/))?(o.push(new h(a[1])),t.push(a[1]),n.val+="3"):(a=c.match(/^\*([^\/]+)$/))?(o.push(new u(a[1])),n.val+="2",t.push(a[1])):""===c?(o.push(new f),n.val+="1"):(o.push(new l(c)),n.val+="4")}return n.val=+n.val,o}function d(e){this.charSpec=e,this.nextStates=[]}function v(e){return e.sort(function(e,t){return t.specificity.val-e.specificity.val})}function y(e,t){for(var n=[],i=0,o=e.length;i<o;i++){var r=e[i];n=n.concat(r.match(t))}return n}function _(e){this.queryParams=e||{}}function b(e,t,n){for(var i=e.handlers,o=e.regex,r=t.match(o),s=1,a=new _(n),c=0,l=i.length;c<l;c++){for(var h=i[c],u=h.names,f={},p=0,d=u.length;p<d;p++)f[u[p]]=r[s++];a.push({handler:h.handler,params:f,isDynamic:!!u.length})}return a}function m(e,t){return t.eachChar(function(t){e=e.put(t)}),e}function g(e){return e=e.replace(/\+/gm,"%20"),a(e,!0)}function E(e){"undefined"!=typeof console&&console.error("[vue-router] "+e)}function w(e,t,n){var i=e.match(/(\?.*)$/);if(i&&(i=i[1],e=e.slice(0,-i.length)),"?"===t.charAt(0))return e+t;var o=e.split("/");n&&o[o.length-1]||o.pop();for(var r=t.replace(/^\//,"").split("/"),s=0;s<r.length;s++){var a=r[s];"."!==a&&(".."===a?o.pop():o.push(a))}return""!==o[0]&&o.unshift(""),o.join("/")}function x(e){return e&&"function"==typeof e.then}function k(e,t){var n=e&&(e.$options||e.options);return n&&n.route&&n.route[t]}function C(e,t){G?G.$options.components._=e.component:G={resolve:Y.Vue.prototype._resolveComponent,$options:{components:{_:e.component}}},G.resolve("_",function(n){e.component=n,t(n)})}function $(e,t,n){return void 0===t&&(t={}),e=e.replace(/:([^\/]+)/g,function(n,i){var o=t[i];return o||E('param "'+i+'" not found when generating path for "'+e+'" with params '+JSON.stringify(t)),o||""}),n&&(e+=Q(n)),e}function N(e,t,n){var i=e.childVM;if(!i||!t)return!1;if(e.Component!==t.component)return!1;var o=k(i,"canReuse");return"boolean"==typeof o?o:!o||o.call(i,{to:n.to,from:n.from})}function O(e,t,n){var i=e.childVM,o=k(i,"canDeactivate");o?t.callHook(o,i,n,{expectBoolean:!0}):n()}function A(e,t,n){C(e,function(e){if(!t.aborted){var i=k(e,"canActivate");i?t.callHook(i,null,n,{expectBoolean:!0}):n()}})}function T(e,t,n){var i=e.childVM,o=k(i,"deactivate");o?t.callHooks(o,i,n):n()}function j(e,t,n,i,o){var r=t.activateQueue[n];if(!r)return V(e),e._bound&&e.setComponent(null),void(i&&i());var s=e.Component=r.component,a=k(s,"activate"),c=k(s,"data"),l=k(s,"waitForData");e.depth=n,e.activated=!1;var h=void 0,u=!(!c||l);if(o=o&&e.childVM&&e.childVM.constructor===s)h=e.childVM,h.$loadingRouteData=u;else if(V(e),e.unbuild(!0),h=e.build({_meta:{$loadingRouteData:u},created:function(){this._routerView=e}}),e.keepAlive){h.$loadingRouteData=u;var f=h._keepAliveRouterView;f&&(e.childView=f,h._keepAliveRouterView=null)}var p=function(){h.$destroy()},d=function(){if(o)return void(i&&i());var n=t.router;n._rendered||n._transitionOnLoad?e.transition(h):(e.setCurrent?e.setCurrent(h):e.childVM=h,h.$before(e.anchor,null,!1)),i&&i()},v=function(){e.childView&&j(e.childView,t,n+1,null,o||e.keepAlive),d()},y=function(){e.activated=!0,c&&l?S(h,t,c,v,p):(c&&S(h,t,c),v())};a?t.callHooks(a,h,y,{cleanup:p,postActivate:!0}):y()}function D(e,t){var n=e.childVM,i=k(n,"data");i&&S(n,t,i)}function S(e,t,n,i,o){e.$loadingRouteData=!0,t.callHooks(n,e,function(){e.$loadingRouteData=!1,e.$emit("route-data-loaded",e),i&&i()},{cleanup:o,postActivate:!0,processData:function(t){var n=[];if(P(t)&&Object.keys(t).forEach(function(i){var o=t[i];x(o)?n.push(o.then(function(t){e.$set(i,t)})):e.$set(i,o)}),n.length)return n[0].constructor.all(n)}})}function V(e){e.keepAlive&&e.childVM&&e.childView&&(e.childVM._keepAliveRouterView=e.childView),e.childView=null}function P(e){return"[object Object]"===Object.prototype.toString.call(e)}function R(e){return"[object Object]"===Object.prototype.toString.call(e)}function F(e){return e?Array.prototype.slice.call(e):[]}function M(e){var t=e.util,n=t.extend,i=t.isArray,o=t.defineReactive,r=e.prototype._init;e.prototype._init=function(e){e=e||{};var t=e._parent||e.parent||this,n=t.$router,i=t.$route;n&&(this.$router=n,n._children.push(this),this._defineMeta?this._defineMeta("$route",i):o(this,"$route",i)),r.call(this,e)};var s=e.prototype._destroy;e.prototype._destroy=function(){!this._isBeingDestroyed&&this.$router&&this.$router._children.$remove(this),s.apply(this,arguments)};var a=e.config.optionMergeStrategies,c=/^(data|activate|deactivate)$/;a&&(a.route=function(e,t){if(!t)return e;if(!e)return t;var o={};n(o,e);for(var r in t){var s=o[r],a=t[r];s&&c.test(r)?o[r]=(i(s)?s:[s]).concat(a):o[r]=a}return o})}function I(e){var t=e.util,n=e.directive("_component")||e.internalDirectives.component,i=t.extend({},n);t.extend(i,{_isRouterView:!0,bind:function(){var e=this.vm.$route;if(!e)return void E("<router-view> can only be used inside a router-enabled app.");this._isDynamicLiteral=!0,n.bind.call(this);for(var t=void 0,i=this.vm;i;){if(i._routerView){t=i._routerView;break}i=i.$parent}if(t)this.parentView=t,t.childView=this;else{var o=e.router;o._rootView=this}var r=e.router._currentTransition;if(!t&&r.done||t&&t.activated){var s=t?t.depth+1:0;j(this,r,s)}},unbind:function(){this.parentView&&(this.parentView.childView=null),n.unbind.call(this)}}),e.elementDirective("router-view",i)}function L(e){function t(e){return e.protocol===location.protocol&&e.hostname===location.hostname&&e.port===location.port}function n(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}var i=e.util,o=i.bind,r=i.isObject,s=i.addClass,a=i.removeClass,c=e.directive("on").priority,l="__vue-router-link-update__",h=0;e.directive("link-active",{priority:9999,bind:function(){for(var e=this,t=String(h++),n=this.el.querySelectorAll("[v-link]"),i=0,o=n.length;i<o;i++){var r=n[i],s=r.getAttribute(l),a=s?s+","+t:t;r.setAttribute(l,a)}this.vm.$on(l,this.cb=function(n,i){n.activeIds.indexOf(t)>-1&&n.updateClasses(i,e.el)})},unbind:function(){this.vm.$off(l,this.cb)}}),e.directive("link",{priority:c-2,bind:function(){var e=this.vm;if(!e.$route)return void E("v-link can only be used inside a router-enabled app.");this.router=e.$route.router,this.unwatch=e.$watch("$route",o(this.onRouteUpdate,this));var t=this.el.getAttribute(l);t&&(this.el.removeAttribute(l),this.activeIds=t.split(",")),"A"===this.el.tagName&&"_blank"===this.el.getAttribute("target")||(this.handler=o(this.onClick,this),this.el.addEventListener("click",this.handler))},update:function(e){this.target=e,r(e)&&(this.append=e.append,this.exact=e.exact,this.prevActiveClass=this.activeClass,this.activeClass=e.activeClass),this.onRouteUpdate(this.vm.$route)},onClick:function(e){if(!(e.metaKey||e.ctrlKey||e.shiftKey||e.defaultPrevented||0!==e.button)){var n=this.target;if(n)e.preventDefault(),this.router.go(n);else{for(var i=e.target;"A"!==i.tagName&&i!==this.el;)i=i.parentNode;if("A"===i.tagName&&t(i)){e.preventDefault();var o=i.pathname;this.router.history.root&&(o=o.replace(this.router.history.rootRE,"")),this.router.go({path:o,replace:n&&n.replace,append:n&&n.append})}}}},onRouteUpdate:function(e){var t=this.router.stringifyPath(this.target);this.path!==t&&(this.path=t,this.updateActiveMatch(),this.updateHref()),this.activeIds?this.vm.$emit(l,this,e.path):this.updateClasses(e.path,this.el)},updateActiveMatch:function(){this.activeRE=this.path&&!this.exact?new RegExp("^"+this.path.replace(/\/$/,"").replace(se,"").replace(re,"\\$&")+"(\\/|$)"):null},updateHref:function(){if("A"===this.el.tagName){var e=this.path,t=this.router,n="/"===e.charAt(0),i=e&&("hash"===t.mode||n)?t.history.formatPath(e,this.append):e;i?this.el.href=i:this.el.removeAttribute("href")}},updateClasses:function(e,t){var i=this.activeClass||this.router._linkActiveClass;this.prevActiveClass&&this.prevActiveClass!==i&&n(t,this.prevActiveClass,a);var o=this.path.replace(se,"");e=e.replace(se,""),this.exact?o===e||"/"!==o.charAt(o.length-1)&&o===e.replace(oe,"")?n(t,i,s):n(t,i,a):this.activeRE&&this.activeRE.test(e)?n(t,i,s):n(t,i,a)},unbind:function(){this.el.removeEventListener("click",this.handler),this.unwatch&&this.unwatch()}})}function H(e,t){var n=t.component;ce.util.isPlainObject(n)&&(n=t.component=ce.extend(n)),"function"!=typeof n&&(t.component=null,E('invalid component for route "'+e+'".'))}var z={};z.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.prototype={to:function(e,t){var n=this.delegate;if(n&&n.willAddRoute&&(e=n.willAddRoute(this.matcher.target,e)),this.matcher.add(this.path,e),t){if(0===t.length)throw new Error("You must have an argument in the function passed to `to`");this.matcher.addChild(this.path,e,t,this.delegate)}return this}},t.prototype={add:function(e,t){this.routes[e]=t},addChild:function(e,i,o,r){var s=new t(i);this.children[e]=s;var a=n(e,s,r);r&&r.contextEntered&&r.contextEntered(i,a),o(a)}};var B=["/",".","*","+","?","|","(",")","[","]","{","}","\\"],U=new RegExp("(\\"+B.join("|\\")+")","g"),W=!1;l.prototype={eachChar:function(e){for(var t,n=this.string,i=0,o=n.length;i<o;i++)t=n.charAt(i),e({validChars:t})},regex:function(){return this.string.replace(U,"\\$1")},generate:function(){return this.string}},h.prototype={eachChar:function(e){e({invalidChars:"/",repeat:!0})},regex:function(){return"([^/]+)"},generate:function(e){var t=e[this.name];return null==t?":"+this.name:t}},u.prototype={eachChar:function(e){e({invalidChars:"",repeat:!0})},regex:function(){return"(.+)"},generate:function(e){var t=e[this.name];return null==t?":"+this.name:t}},f.prototype={eachChar:function(){},regex:function(){return""},generate:function(){return""}},d.prototype={get:function(e){for(var t=this.nextStates,n=0,i=t.length;n<i;n++){var o=t[n],r=o.charSpec.validChars===e.validChars;if(r=r&&o.charSpec.invalidChars===e.invalidChars)return o}},put:function(e){var t;return(t=this.get(e))?t:(t=new d(e),this.nextStates.push(t),e.repeat&&t.nextStates.push(t),t)},match:function(e){for(var t,n,i,o=this.nextStates,r=[],s=0,a=o.length;s<a;s++)t=o[s],n=t.charSpec,"undefined"!=typeof(i=n.validChars)?i.indexOf(e)!==-1&&r.push(t):"undefined"!=typeof(i=n.invalidChars)&&i.indexOf(e)===-1&&r.push(t);return r}};var q=Object.create||function(e){function t(){}return t.prototype=e,new t};_.prototype=q({splice:Array.prototype.splice,slice:Array.prototype.slice,push:Array.prototype.push,length:0,queryParams:null});var J=function(){this.rootState=new d,this.names={}};J.prototype={add:function(e,t){for(var n,i=this.rootState,o="^",r={},s=[],a=[],c=!0,l=0,h=e.length;l<h;l++){var u=e[l],d=[],v=p(u.path,d,r);a=a.concat(v);for(var y=0,_=v.length;y<_;y++){var b=v[y];b instanceof f||(c=!1,i=i.put({validChars:"/"}),o+="/",i=m(i,b),o+=b.regex())}var g={handler:u.handler,names:d};s.push(g)}c&&(i=i.put({validChars:"/"}),o+="/"),i.handlers=s,i.regex=new RegExp(o+"$"),i.specificity=r,(n=t&&t.as)&&(this.names[n]={segments:a,handlers:s})},handlersFor:function(e){var t=this.names[e],n=[];if(!t)throw new Error("There is no route named "+e);for(var i=0,o=t.handlers.length;i<o;i++)n.push(t.handlers[i]);return n},hasRoute:function(e){return!!this.names[e]},generate:function(e,t){var n=this.names[e],i="";if(!n)throw new Error("There is no route named "+e);for(var o=n.segments,r=0,s=o.length;r<s;r++){var a=o[r];a instanceof f||(i+="/",i+=a.generate(t))}return"/"!==i.charAt(0)&&(i="/"+i),t&&t.queryParams&&(i+=this.generateQueryString(t.queryParams)),i},generateQueryString:function(e){var t=[],n=[];for(var i in e)e.hasOwnProperty(i)&&n.push(i);n.sort();for(var o=0,r=n.length;o<r;o++){i=n[o];var s=e[i];if(null!=s){var a=encodeURIComponent(i);if(c(s))for(var l=0,h=s.length;l<h;l++){var u=i+"[]="+encodeURIComponent(s[l]);t.push(u)}else a+="="+encodeURIComponent(s),t.push(a)}}return 0===t.length?"":"?"+t.join("&")},parseQueryString:function(e){for(var t=e.split("&"),n={},i=0;i<t.length;i++){var o,r=t[i].split("="),s=g(r[0]),a=s.length,c=!1;1===r.length?o="true":(a>2&&"[]"===s.slice(a-2)&&(c=!0,s=s.slice(0,a-2),n[s]||(n[s]=[])),o=r[1]?g(r[1]):""),c?n[s].push(o):n[s]=o}return n},recognize:function(e,t){W=t;var n,i,o,r,s=[this.rootState],c={},l=!1;if(r=e.indexOf("?"),r!==-1){var h=e.substr(r+1,e.length);e=e.substr(0,r),h&&(c=this.parseQueryString(h))}if(e=a(e)){for("/"!==e.charAt(0)&&(e="/"+e),n=e.length,n>1&&"/"===e.charAt(n-1)&&(e=e.substr(0,n-1),l=!0),i=0,o=e.length;i<o&&(s=y(s,e.charAt(i)),s.length);i++);var u=[];for(i=0,o=s.length;i<o;i++)s[i].handlers&&u.push(s[i]);s=v(u);var f=u[0];return f&&f.handlers?(l&&"(.+)$"===f.regex.source.slice(-5)&&(e+="/"),b(f,e,c)):void 0}}},J.prototype.map=r;var Q=J.prototype.generateQueryString,Y={},G=void 0,K=/#.*$/,Z=function(){function e(t){var n=t.root,i=t.onChange;z.classCallCheck(this,e),n&&"/"!==n?("/"!==n.charAt(0)&&(n="/"+n),this.root=n.replace(/\/$/,""),this.rootRE=new RegExp("^\\"+this.root)):this.root=null,this.onChange=i;var o=document.querySelector("base");this.base=o&&o.getAttribute("href")}return e.prototype.start=function(){var e=this;this.listener=function(t){var n=location.pathname+location.search;e.root&&(n=n.replace(e.rootRE,"")),e.onChange(n,t&&t.state,location.hash)},window.addEventListener("popstate",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("popstate",this.listener)},e.prototype.go=function(e,t,n){var i=this.formatPath(e,n);t?history.replaceState({},"",i):(history.replaceState({pos:{x:window.pageXOffset,y:window.pageYOffset}},"",location.href),history.pushState({},"",i));var o=e.match(K),r=o&&o[0];e=i.replace(K,"").replace(this.rootRE,""),this.onChange(e,null,r)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?this.root?this.root+"/"+e.replace(/^\//,""):e:w(this.base||location.pathname,e,t)},e}(),X=function(){function e(t){var n=t.hashbang,i=t.onChange;z.classCallCheck(this,e),this.hashbang=n,this.onChange=i}return e.prototype.start=function(){var e=this;this.listener=function(){var t=location.hash,n=t.replace(/^#!?/,"");"/"!==n.charAt(0)&&(n="/"+n);var i=e.formatPath(n);if(i!==t)return void location.replace(i);var o=location.search&&t.indexOf("?")>-1?"&"+location.search.slice(1):location.search;e.onChange(t.replace(/^#!?/,"")+o)},window.addEventListener("hashchange",this.listener),this.listener()},e.prototype.stop=function(){window.removeEventListener("hashchange",this.listener)},e.prototype.go=function(e,t,n){e=this.formatPath(e,n),t?location.replace(e):location.hash=e},e.prototype.formatPath=function(e,t){var n="/"===e.charAt(0),i="#"+(this.hashbang?"!":"");return n?i+e:i+w(location.hash.replace(/^#!?/,""),e,t)},e}(),ee=function(){function e(t){var n=t.onChange;z.classCallCheck(this,e),this.onChange=n,this.currentPath="/"}return e.prototype.start=function(){this.onChange("/")},e.prototype.stop=function(){},e.prototype.go=function(e,t,n){e=this.currentPath=this.formatPath(e,n),this.onChange(e)},e.prototype.formatPath=function(e,t){return"/"===e.charAt(0)?e:w(this.currentPath,e,t)},e}(),te=function(){function e(t,n,i){z.classCallCheck(this,e),this.router=t,this.to=n,this.from=i,this.next=null,this.aborted=!1,this.done=!1}return e.prototype.abort=function(){if(!this.aborted){this.aborted=!0;var e=!this.from.path&&"/"===this.to.path;e||this.router.replace(this.from.path||"/")}},e.prototype.redirect=function(e){this.aborted||(this.aborted=!0,"string"==typeof e?e=$(e,this.to.params,this.to.query):(e.params=e.params||this.to.params,e.query=e.query||this.to.query),this.router.replace(e))},e.prototype.start=function(e){for(var t=this,n=[],i=this.router._rootView;i;)n.unshift(i),i=i.childView;var o=n.slice().reverse(),r=this.activateQueue=F(this.to.matched).map(function(e){return e.handler}),s=void 0,a=void 0;for(s=0;s<o.length&&N(o[s],r[s],t);s++);s>0&&(a=o.slice(0,s),n=o.slice(s).reverse(),r=r.slice(s)),t.runQueue(n,O,function(){t.runQueue(r,A,function(){t.runQueue(n,T,function(){if(t.router._onTransitionValidated(t),a&&a.forEach(function(e){return D(e,t)}),n.length){var i=n[n.length-1],o=a?a.length:0;j(i,t,o,e)}else e()})})})},e.prototype.runQueue=function(e,t,n){function i(r){r>=e.length?n():t(e[r],o,function(){i(r+1)})}var o=this;i(0)},e.prototype.callHook=function(e,t,n){var i=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],o=i.expectBoolean,r=void 0!==o&&o,s=i.postActivate,a=void 0!==s&&s,c=i.processData,l=i.cleanup,h=this,u=!1,f=function(){l&&l(),h.abort()},p=function(e){if(a?v():f(),e&&!h.router._suppress)throw E("Uncaught error during transition: "),e instanceof Error?e:new Error(e)},d=function(e){try{p(e)}catch(t){setTimeout(function(){throw t},0)}},v=function(){return u?void E("transition.next() should be called only once."):(u=!0,h.aborted?void(l&&l()):void(n&&n()))},y=function(t){"boolean"==typeof t?t?v():f():x(t)?t.then(function(e){e?v():f()},d):e.length||v()},_=function(e){var t=void 0;try{t=c(e)}catch(n){return p(n)}x(t)?t.then(v,d):v()},b={to:h.to,from:h.from,abort:f,next:c?_:v,redirect:function(){h.redirect.apply(h,arguments)}},m=void 0;try{m=e.call(t,b)}catch(g){return p(g)}r?y(m):x(m)?c?m.then(_,d):m.then(v,d):c&&R(m)?_(m):e.length||v()},e.prototype.callHooks=function(e,t,n,i){var o=this;Array.isArray(e)?this.runQueue(e,function(e,n,r){o.aborted||o.callHook(e,t,r,i)},n):this.callHook(e,t,n,i)},e}(),ne=/^(component|subRoutes|fullPath)$/,ie=function he(e,t){var n=this;z.classCallCheck(this,he);var i=t._recognizer.recognize(e);i&&([].forEach.call(i,function(e){for(var t in e.handler)ne.test(t)||(n[t]=e.handler[t])}),this.query=i.queryParams,this.params=[].reduce.call(i,function(e,t){if(t.params)for(var n in t.params)e[n]=t.params[n];return e},{})),this.path=e,this.matched=i||t._notFoundHandler,Object.defineProperty(this,"router",{enumerable:!1,value:t}),Object.freeze(this)},oe=/\/$/,re=/[-.*+?^${}()|[\]\/\\]/g,se=/\?.*$/,ae={"abstract":ee,hash:X,html5:Z},ce=void 0,le=function(){function e(){var t=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],i=n.hashbang,o=void 0===i||i,r=n["abstract"],s=void 0!==r&&r,a=n.history,c=void 0!==a&&a,l=n.saveScrollPosition,h=void 0!==l&&l,u=n.transitionOnLoad,f=void 0!==u&&u,p=n.suppressTransitionError,d=void 0!==p&&p,v=n.root,y=void 0===v?null:v,_=n.linkActiveClass,b=void 0===_?"v-link-active":_;if(z.classCallCheck(this,e),!e.installed)throw new Error("Please install the Router with Vue.use() before creating an instance.");this.app=null,this._children=[],this._recognizer=new J,this._guardRecognizer=new J,this._started=!1,this._startCb=null,this._currentRoute={},this._currentTransition=null,this._previousTransition=null,this._notFoundHandler=null,this._notFoundRedirect=null,this._beforeEachHooks=[],this._afterEachHooks=[],this._rendered=!1,this._transitionOnLoad=f,this._root=y,this._abstract=s,this._hashbang=o;var m="undefined"!=typeof window&&window.history&&window.history.pushState;this._history=c&&m,this._historyFallback=c&&!m;var g=ce.util.inBrowser;this.mode=!g||this._abstract?"abstract":this._history?"html5":"hash";var E=ae[this.mode];this.history=new E({root:y,hashbang:this._hashbang,onChange:function(e,n,i){t._match(e,n,i)}}),this._saveScrollPosition=h,this._linkActiveClass=b,this._suppress=d}return e.prototype.map=function(e){for(var t in e)this.on(t,e[t]);return this},e.prototype.on=function(e,t){return"*"===e?this._notFound(t):this._addRoute(e,t,[]),this},e.prototype.redirect=function(e){for(var t in e)this._addRedirect(t,e[t]);return this},e.prototype.alias=function(e){for(var t in e)this._addAlias(t,e[t]);return this},e.prototype.beforeEach=function(e){return this._beforeEachHooks.push(e),this},e.prototype.afterEach=function(e){return this._afterEachHooks.push(e),this},e.prototype.go=function(e){var t=!1,n=!1;ce.util.isObject(e)&&(t=e.replace,n=e.append),e=this.stringifyPath(e),e&&this.history.go(e,t,n)},e.prototype.replace=function(e){"string"==typeof e&&(e={path:e}),e.replace=!0,this.go(e)},e.prototype.start=function(e,t,n){if(this._started)return void E("already started.");if(this._started=!0,this._startCb=n,!this.app){if(!e||!t)throw new Error("Must start vue-router with a component and a root container.");if(e instanceof ce)throw new Error("Must start vue-router with a component, not a Vue instance.");this._appContainer=t;var i=this._appConstructor="function"==typeof e?e:ce.extend(e);i.options.name=i.options.name||"RouterApp"}if(this._historyFallback){var o=window.location,r=new Z({root:this._root}),s=r.root?o.pathname.replace(r.rootRE,""):o.pathname;if(s&&"/"!==s)return void o.assign((r.root||"")+"/"+this.history.formatPath(s)+o.search)}this.history.start()},e.prototype.stop=function(){this.history.stop(),this._started=!1},e.prototype.stringifyPath=function(e){var t="";if(e&&"object"==typeof e){if(e.name){var n=ce.util.extend,i=this._currentTransition&&this._currentTransition.to.params,o=e.params||{},r=i?n(n({},i),o):o;t=encodeURI(this._recognizer.generate(e.name,r))}else e.path&&(t=encodeURI(e.path));if(e.query){var s=this._recognizer.generateQueryString(e.query);t+=t.indexOf("?")>-1?"&"+s.slice(1):s}}else t=encodeURI(e?e+"":"");return t},e.prototype._addRoute=function(e,t,n){if(H(e,t),t.path=e,t.fullPath=(n.reduce(function(e,t){return e+t.path},"")+e).replace("//","/"),n.push({path:e,handler:t}),this._recognizer.add(n,{as:t.name}),t.subRoutes)for(var i in t.subRoutes)this._addRoute(i,t.subRoutes[i],n.slice())},e.prototype._notFound=function(e){H("*",e),this._notFoundHandler=[{handler:e}]},e.prototype._addRedirect=function(e,t){"*"===e?this._notFoundRedirect=t:this._addGuard(e,t,this.replace)},e.prototype._addAlias=function(e,t){this._addGuard(e,t,this._match)},e.prototype._addGuard=function(e,t,n){var i=this;this._guardRecognizer.add([{path:e,handler:function(e,o){var r=$(t,e.params,o);n.call(i,r)}}])},e.prototype._checkGuard=function(e){var t=this._guardRecognizer.recognize(e,!0);return t?(t[0].handler(t[0],t.queryParams),!0):this._notFoundRedirect&&(t=this._recognizer.recognize(e),!t)?(this.replace(this._notFoundRedirect),!0):void 0},e.prototype._match=function(e,t,n){var i=this;if(!this._checkGuard(e)){var o=this._currentRoute,r=this._currentTransition;if(r){if(r.to.path===e)return;if(o.path===e)return r.aborted=!0,void(this._currentTransition=this._prevTransition);r.aborted=!0}var s=new ie(e,this),a=new te(this,s,o);this._prevTransition=r,this._currentTransition=a,this.app||!function(){var e=i;i.app=new i._appConstructor({el:i._appContainer,created:function(){this.$router=e},_meta:{$route:s}})}();var c=this._beforeEachHooks,l=function(){a.start(function(){i._postTransition(s,t,n)})};c.length?a.runQueue(c,function(e,t,n){a===i._currentTransition&&a.callHook(e,null,n,{expectBoolean:!0})},l):l(),!this._rendered&&this._startCb&&this._startCb.call(null),this._rendered=!0}},e.prototype._onTransitionValidated=function(e){var t=this._currentRoute=e.to;this.app.$route!==t&&(this.app.$route=t,this._children.forEach(function(e){e.$route=t})),this._afterEachHooks.length&&this._afterEachHooks.forEach(function(t){return t.call(null,{to:e.to,from:e.from})}),this._currentTransition.done=!0},e.prototype._postTransition=function(e,t,n){var i=t&&t.pos;i&&this._saveScrollPosition?ce.nextTick(function(){window.scrollTo(i.x,i.y)}):n&&ce.nextTick(function(){var e=document.getElementById(n.slice(1));e&&window.scrollTo(window.scrollX,e.offsetTop)})},e}();return le.installed=!1,le.install=function(e){return le.installed?void E("already installed."):(ce=e,M(ce),I(ce),L(ce),Y.Vue=ce,void(le.installed=!0))},"undefined"!=typeof window&&window.Vue&&window.Vue.use(le),le})},function(e,t,n){var i=n(70);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(71);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(72);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(73);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(74);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(75);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(76);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(77);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(78);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(79);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(80);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(81);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){var i=n(82);"string"==typeof i&&(i=[[e.id,i,""]]);n(2)(i,{});i.locals&&(e.exports=i.locals)},function(e,t,n){(function(t,n){/*!
	 * Vue.js v1.0.26
	 * (c) 2016 Evan You
	 * Released under the MIT License.
	 */
"use strict";function i(e,t,n){if(r(e,t))return void(e[t]=n);if(e._isVue)return void i(e._data,t,n);var o=e.__ob__;if(!o)return void(e[t]=n);if(o.convert(t,n),o.dep.notify(),o.vms)for(var s=o.vms.length;s--;){var a=o.vms[s];a._proxy(t),a._digest()}return n}function o(e,t){if(r(e,t)){delete e[t];var n=e.__ob__;if(!n)return void(e._isVue&&(delete e._data[t],e._digest()));if(n.dep.notify(),n.vms)for(var i=n.vms.length;i--;){var o=n.vms[i];o._unproxy(t),o._digest()}}}function r(e,t){return Sn.call(e,t)}function s(e){return Vn.test(e)}function a(e){var t=(e+"").charCodeAt(0);return 36===t||95===t}function c(e){return null==e?"":e.toString()}function l(e){if("string"!=typeof e)return e;var t=Number(e);return isNaN(t)?e:t}function h(e){return"true"===e||"false"!==e&&e}function u(e){var t=e.charCodeAt(0),n=e.charCodeAt(e.length-1);return t!==n||34!==t&&39!==t?e:e.slice(1,-1)}function f(e){return e.replace(Pn,p)}function p(e,t){return t?t.toUpperCase():""}function d(e){return e.replace(Rn,"$1-$2").toLowerCase()}function v(e){return e.replace(Fn,p)}function y(e,t){return function(n){var i=arguments.length;return i?i>1?e.apply(t,arguments):e.call(t,n):e.call(t)}}function _(e,t){t=t||0;for(var n=e.length-t,i=new Array(n);n--;)i[n]=e[n+t];return i}function b(e,t){for(var n=Object.keys(t),i=n.length;i--;)e[n[i]]=t[n[i]];return e}function m(e){return null!==e&&"object"==typeof e}function g(e){return Mn.call(e)===In}function E(e,t,n,i){Object.defineProperty(e,t,{value:n,enumerable:!!i,writable:!0,configurable:!0})}function w(e,t){var n,i,o,r,s,a=function c(){var a=Date.now()-r;a<t&&a>=0?n=setTimeout(c,t-a):(n=null,s=e.apply(o,i),n||(o=i=null))};return function(){return o=this,i=arguments,r=Date.now(),n||(n=setTimeout(a,t)),s}}function x(e,t){for(var n=e.length;n--;)if(e[n]===t)return n;return-1}function k(e){var t=function n(){if(!n.cancelled)return e.apply(this,arguments)};return t.cancel=function(){t.cancelled=!0},t}function C(e,t){return e==t||!(!m(e)||!m(t))&&JSON.stringify(e)===JSON.stringify(t)}function $(e){this.size=0,this.limit=e,this.head=this.tail=void 0,this._keymap=Object.create(null)}function N(){var e,t=ai.slice(pi,ui).trim();if(t){e={};var n=t.match(gi);e.name=n[0],n.length>1&&(e.args=n.slice(1).map(O))}e&&(ci.filters=ci.filters||[]).push(e),pi=ui+1}function O(e){if(Ei.test(e))return{value:l(e),dynamic:!1};var t=u(e),n=t===e;return{value:n?e:t,dynamic:n}}function A(e){var t=mi.get(e);if(t)return t;for(ai=e,di=vi=!1,yi=_i=bi=0,pi=0,ci={},ui=0,fi=ai.length;ui<fi;ui++)if(hi=li,li=ai.charCodeAt(ui),di)39===li&&92!==hi&&(di=!di);else if(vi)34===li&&92!==hi&&(vi=!vi);else if(124===li&&124!==ai.charCodeAt(ui+1)&&124!==ai.charCodeAt(ui-1))null==ci.expression?(pi=ui+1,ci.expression=ai.slice(0,ui).trim()):N();else switch(li){case 34:vi=!0;break;case 39:di=!0;break;case 40:bi++;break;case 41:bi--;break;case 91:_i++;break;case 93:_i--;break;case 123:yi++;break;case 125:yi--}return null==ci.expression?ci.expression=ai.slice(0,ui).trim():0!==pi&&N(),mi.put(e,ci),ci}function T(e){return e.replace(xi,"\\$&")}function j(){var e=T(ji.delimiters[0]),t=T(ji.delimiters[1]),n=T(ji.unsafeDelimiters[0]),i=T(ji.unsafeDelimiters[1]);Ci=new RegExp(n+"((?:.|\\n)+?)"+i+"|"+e+"((?:.|\\n)+?)"+t,"g"),$i=new RegExp("^"+n+"((?:.|\\n)+?)"+i+"$"),ki=new $(1e3)}function D(e){ki||j();var t=ki.get(e);if(t)return t;if(!Ci.test(e))return null;for(var n,i,o,r,s,a,c=[],l=Ci.lastIndex=0;n=Ci.exec(e);)i=n.index,i>l&&c.push({value:e.slice(l,i)}),o=$i.test(n[0]),r=o?n[1]:n[2],s=r.charCodeAt(0),a=42===s,r=a?r.slice(1):r,c.push({tag:!0,value:r.trim(),html:o,oneTime:a}),l=i+n[0].length;return l<e.length&&c.push({value:e.slice(l)}),ki.put(e,c),c}function S(e,t){return e.length>1?e.map(function(e){return V(e,t)}).join("+"):V(e[0],t,!0)}function V(e,t,n){return e.tag?e.oneTime&&t?'"'+t.$eval(e.value)+'"':P(e.value,n):'"'+e.value+'"'}function P(e,t){if(Ni.test(e)){var n=A(e);return n.filters?"this._applyFilters("+n.expression+",null,"+JSON.stringify(n.filters)+",false)":"("+e+")"}return t?e:"("+e+")"}function R(e,t,n,i){I(e,1,function(){t.appendChild(e)},n,i)}function F(e,t,n,i){I(e,1,function(){W(e,t)},n,i)}function M(e,t,n){I(e,-1,function(){J(e)},t,n)}function I(e,t,n,i,o){var r=e.__v_trans;if(!r||!r.hooks&&!Xn||!i._isCompiled||i.$parent&&!i.$parent._isCompiled)return n(),void(o&&o());var s=t>0?"enter":"leave";r[s](n,o)}function L(e){if("string"==typeof e){var t=e;e=document.querySelector(e),e||"production"!==n.env.NODE_ENV&&Di("Cannot find element: "+t)}return e}function H(e){if(!e)return!1;var t=e.ownerDocument.documentElement,n=e.parentNode;return t===e||t===n||!(!n||1!==n.nodeType||!t.contains(n))}function z(e,t){var n=e.getAttribute(t);return null!==n&&e.removeAttribute(t),n}function B(e,t){var n=z(e,":"+t);return null===n&&(n=z(e,"v-bind:"+t)),n}function U(e,t){return e.hasAttribute(t)||e.hasAttribute(":"+t)||e.hasAttribute("v-bind:"+t)}function W(e,t){t.parentNode.insertBefore(e,t)}function q(e,t){t.nextSibling?W(e,t.nextSibling):t.parentNode.appendChild(e)}function J(e){e.parentNode.removeChild(e)}function Q(e,t){t.firstChild?W(e,t.firstChild):t.appendChild(e)}function Y(e,t){var n=e.parentNode;n&&n.replaceChild(t,e)}function G(e,t,n,i){e.addEventListener(t,n,i)}function K(e,t,n){e.removeEventListener(t,n)}function Z(e){var t=e.className;return"object"==typeof t&&(t=t.baseVal||""),t}function X(e,t){qn&&!/svg$/.test(e.namespaceURI)?e.className=t:e.setAttribute("class",t)}function ee(e,t){if(e.classList)e.classList.add(t);else{var n=" "+Z(e)+" ";n.indexOf(" "+t+" ")<0&&X(e,(n+t).trim())}}function te(e,t){if(e.classList)e.classList.remove(t);else{for(var n=" "+Z(e)+" ",i=" "+t+" ";n.indexOf(i)>=0;)n=n.replace(i," ");X(e,n.trim())}e.className||e.removeAttribute("class")}function ne(e,t){var n,i;if(re(e)&&he(e.content)&&(e=e.content),e.hasChildNodes())for(ie(e),i=t?document.createDocumentFragment():document.createElement("div");n=e.firstChild;)i.appendChild(n);return i}function ie(e){for(var t;t=e.firstChild,oe(t);)e.removeChild(t);for(;t=e.lastChild,oe(t);)e.removeChild(t)}function oe(e){return e&&(3===e.nodeType&&!e.data.trim()||8===e.nodeType)}function re(e){return e.tagName&&"template"===e.tagName.toLowerCase()}function se(e,t){var n=ji.debug?document.createComment(e):document.createTextNode(t?" ":"");return n.__v_anchor=!0,n}function ae(e){if(e.hasAttributes())for(var t=e.attributes,n=0,i=t.length;n<i;n++){var o=t[n].name;if(Pi.test(o))return f(o.replace(Pi,""))}}function ce(e,t,n){for(var i;e!==t;)i=e.nextSibling,n(e),e=i;n(t)}function le(e,t,n,i,o){function r(){if(a++,s&&a>=c.length){for(var e=0;e<c.length;e++)i.appendChild(c[e]);o&&o()}}var s=!1,a=0,c=[];ce(e,t,function(e){e===t&&(s=!0),c.push(e),M(e,n,r)})}function he(e){return e&&11===e.nodeType}function ue(e){if(e.outerHTML)return e.outerHTML;var t=document.createElement("div");return t.appendChild(e.cloneNode(!0)),t.innerHTML}function fe(e,t){var i=e.tagName.toLowerCase(),o=e.hasAttributes();if(Ri.test(i)||Fi.test(i)){if(o)return pe(e,t)}else{if(ge(t,"components",i))return{id:i};var r=o&&pe(e,t);if(r)return r;if("production"!==n.env.NODE_ENV){var s=t._componentNameMap&&t._componentNameMap[i];s?Di("Unknown custom element: <"+i+"> - did you mean <"+s+">? HTML is case-insensitive, remember to use kebab-case in templates."):Mi(e,i)&&Di("Unknown custom element: <"+i+'> - did you register the component correctly? For recursive components, make sure to provide the "name" option.')}}}function pe(e,t){var n=e.getAttribute("is");if(null!=n){if(ge(t,"components",n))return e.removeAttribute("is"),{id:n}}else if(n=B(e,"is"),null!=n)return{id:n,dynamic:!0}}function de(e,t){var n,o,s;for(n in t)o=e[n],s=t[n],r(e,n)?m(o)&&m(s)&&de(o,s):i(e,n,s);return e}function ve(e,t){var n=Object.create(e||null);return t?b(n,be(t)):n}function ye(e){if(e.components){var t,i=e.components=be(e.components),o=Object.keys(i);if("production"!==n.env.NODE_ENV)var r=e._componentNameMap={};for(var s=0,a=o.length;s<a;s++){var c=o[s];Ri.test(c)||Fi.test(c)?"production"!==n.env.NODE_ENV&&Di("Do not use built-in or reserved HTML elements as component id: "+c):("production"!==n.env.NODE_ENV&&(r[c.replace(/-/g,"").toLowerCase()]=d(c)),t=i[c],g(t)&&(i[c]=Nn.extend(t)))}}}function _e(e){var t,n,i=e.props;if(Ln(i))for(e.props={},t=i.length;t--;)n=i[t],"string"==typeof n?e.props[n]=null:n.name&&(e.props[n.name]=n);else if(g(i)){var o=Object.keys(i);for(t=o.length;t--;)n=i[o[t]],"function"==typeof n&&(i[o[t]]={type:n})}}function be(e){if(Ln(e)){for(var t,i={},o=e.length;o--;){t=e[o];var r="function"==typeof t?t.options&&t.options.name||t.id:t.name||t.id;r?i[r]=t:"production"!==n.env.NODE_ENV&&Di('Array-syntax assets must provide a "name" or "id" field.')}return i}return e}function me(e,t,i){function o(n){var o=Ii[n]||Li;a[n]=o(e[n],t[n],i,n)}ye(t),_e(t),"production"!==n.env.NODE_ENV&&t.propsData&&!i&&Di("propsData can only be used as an instantiation option.");var s,a={};if(t["extends"]&&(e="function"==typeof t["extends"]?me(e,t["extends"].options,i):me(e,t["extends"],i)),t.mixins)for(var c=0,l=t.mixins.length;c<l;c++){var h=t.mixins[c],u=h.prototype instanceof Nn?h.options:h;e=me(e,u,i)}for(s in e)o(s);for(s in t)r(e,s)||o(s);return a}function ge(e,t,i,o){if("string"==typeof i){var r,s=e[t],a=s[i]||s[r=f(i)]||s[r.charAt(0).toUpperCase()+r.slice(1)];return"production"!==n.env.NODE_ENV&&o&&!a&&Di("Failed to resolve "+t.slice(0,-1)+": "+i,e),a}}function Ee(){this.id=Hi++,this.subs=[]}function we(e){Wi=!1,e(),Wi=!0}function xe(e){if(this.value=e,this.dep=new Ee,E(e,"__ob__",this),Ln(e)){var t=Hn?ke:Ce;t(e,Bi,Ui),this.observeArray(e)}else this.walk(e)}function ke(e,t){e.__proto__=t}function Ce(e,t,n){for(var i=0,o=n.length;i<o;i++){var r=n[i];E(e,r,t[r])}}function $e(e,t){if(e&&"object"==typeof e){var n;return r(e,"__ob__")&&e.__ob__ instanceof xe?n=e.__ob__:Wi&&(Ln(e)||g(e))&&Object.isExtensible(e)&&!e._isVue&&(n=new xe(e)),n&&t&&n.addVm(t),n}}function Ne(e,t,n){var i=new Ee,o=Object.getOwnPropertyDescriptor(e,t);if(!o||o.configurable!==!1){var r=o&&o.get,s=o&&o.set,a=$e(n);Object.defineProperty(e,t,{enumerable:!0,configurable:!0,get:function(){var t=r?r.call(e):n;if(Ee.target&&(i.depend(),a&&a.dep.depend(),Ln(t)))for(var o,s=0,c=t.length;s<c;s++)o=t[s],o&&o.__ob__&&o.__ob__.dep.depend();return t},set:function(t){var o=r?r.call(e):n;t!==o&&(s?s.call(e,t):n=t,a=$e(t),i.notify())}})}}function Oe(e){e.prototype._init=function(e){e=e||{},this.$el=null,this.$parent=e.parent,this.$root=this.$parent?this.$parent.$root:this,this.$children=[],this.$refs={},this.$els={},this._watchers=[],this._directives=[],this._uid=Ji++,this._isVue=!0,this._events={},this._eventsCount={},this._isFragment=!1,this._fragment=this._fragmentStart=this._fragmentEnd=null,this._isCompiled=this._isDestroyed=this._isReady=this._isAttached=this._isBeingDestroyed=this._vForRemoving=!1,this._unlinkFn=null,this._context=e._context||this.$parent,this._scope=e._scope,this._frag=e._frag,this._frag&&this._frag.children.push(this),this.$parent&&this.$parent.$children.push(this),e=this.$options=me(this.constructor.options,e,this),this._updateRef(),this._data={},this._callHook("init"),this._initState(),this._initEvents(),this._callHook("created"),e.el&&this.$mount(e.el)}}function Ae(e){if(void 0===e)return"eof";var t=e.charCodeAt(0);switch(t){case 91:case 93:case 46:case 34:case 39:case 48:return e;case 95:case 36:return"ident";case 32:case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"ws"}return t>=97&&t<=122||t>=65&&t<=90?"ident":t>=49&&t<=57?"number":"else"}function Te(e){var t=e.trim();return("0"!==e.charAt(0)||!isNaN(e))&&(s(t)?u(t):"*"+t)}function je(e){function t(){var t=e[h+1];if(u===oo&&"'"===t||u===ro&&'"'===t)return h++,i="\\"+t,p[Yi](),!0}var n,i,o,r,s,a,c,l=[],h=-1,u=Xi,f=0,p=[];for(p[Gi]=function(){void 0!==o&&(l.push(o),o=void 0)},p[Yi]=function(){void 0===o?o=i:o+=i},p[Ki]=function(){p[Yi](),f++},p[Zi]=function(){if(f>0)f--,u=io,p[Yi]();else{if(f=0,o=Te(o),o===!1)return!1;p[Gi]()}};null!=u;)if(h++,n=e[h],"\\"!==n||!t()){if(r=Ae(n),c=co[u],s=c[r]||c["else"]||ao,s===ao)return;if(u=s[0],a=p[s[1]],a&&(i=s[2],i=void 0===i?n:i,a()===!1))return;if(u===so)return l.raw=e,l}}function De(e){var t=Qi.get(e);return t||(t=je(e),t&&Qi.put(e,t)),t}function Se(e,t){return ze(t).get(e)}function Ve(e,t,o){var r=e;if("string"==typeof t&&(t=je(t)),!t||!m(e))return!1;for(var s,a,c=0,l=t.length;c<l;c++)s=e,a=t[c],"*"===a.charAt(0)&&(a=ze(a.slice(1)).get.call(r,r)),c<l-1?(e=e[a],m(e)||(e={},"production"!==n.env.NODE_ENV&&s._isVue&&lo(t,s),i(s,a,e))):Ln(e)?e.$set(a,o):a in e?e[a]=o:("production"!==n.env.NODE_ENV&&e._isVue&&lo(t,e),i(e,a,o));return!0}function Pe(){}function Re(e,t){var n=ko.length;return ko[n]=t?e.replace(bo,"\\n"):e,'"'+n+'"'}function Fe(e){var t=e.charAt(0),n=e.slice(1);return po.test(n)?e:(n=n.indexOf('"')>-1?n.replace(go,Me):n,t+"scope."+n)}function Me(e,t){return ko[t]}function Ie(e){yo.test(e)&&"production"!==n.env.NODE_ENV&&Di("Avoid using reserved keywords in expression: "+e),ko.length=0;var t=e.replace(mo,Re).replace(_o,"");return t=(" "+t).replace(wo,Fe).replace(go,Me),Le(t)}function Le(e){try{return new Function("scope","return "+e+";")}catch(t){return"production"!==n.env.NODE_ENV&&Di(t.toString().match(/unsafe-eval|CSP/)?"It seems you are using the default build of Vue.js in an environment with Content Security Policy that prohibits unsafe-eval. Use the CSP-compliant build instead: http://vuejs.org/guide/installation.html#CSP-compliant-build":"Invalid expression. Generated function body: "+e),Pe}}function He(e){var t=De(e);return t?function(e,n){Ve(e,t,n)}:void("production"!==n.env.NODE_ENV&&Di("Invalid setter expression: "+e))}function ze(e,t){e=e.trim();var n=uo.get(e);if(n)return t&&!n.set&&(n.set=He(n.exp)),n;var i={exp:e};return i.get=Be(e)&&e.indexOf("[")<0?Le("scope."+e):Ie(e),t&&(i.set=He(e)),uo.put(e,i),i}function Be(e){return Eo.test(e)&&!xo.test(e)&&"Math."!==e.slice(0,5)}function Ue(){$o.length=0,No.length=0,Oo={},Ao={},To=!1}function We(){for(var e=!0;e;)e=!1,qe($o),qe(No),$o.length?e=!0:(Bn&&ji.devtools&&Bn.emit("flush"),Ue())}function qe(e){for(var t=0;t<e.length;t++){var i=e[t],o=i.id;if(Oo[o]=null,i.run(),"production"!==n.env.NODE_ENV&&null!=Oo[o]&&(Ao[o]=(Ao[o]||0)+1,Ao[o]>ji._maxUpdateCount)){Di('You may have an infinite update loop for watcher with expression "'+i.expression+'"',i.vm);break}}e.length=0}function Je(e){var t=e.id;if(null==Oo[t]){var n=e.user?No:$o;Oo[t]=n.length,n.push(e),To||(To=!0,oi(We))}}function Qe(e,t,n,i){i&&b(this,i);var o="function"==typeof t;if(this.vm=e,e._watchers.push(this),this.expression=t,this.cb=n,this.id=++jo,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ri,this.newDepIds=new ri,this.prevError=null,o)this.getter=t,this.setter=void 0;else{var r=ze(t,this.twoWay);this.getter=r.get,this.setter=r.set}this.value=this.lazy?void 0:this.get(),this.queued=this.shallow=!1}function Ye(e,t){var n=void 0,i=void 0;t||(t=Do,t.clear());var o=Ln(e),r=m(e);if((o||r)&&Object.isExtensible(e)){if(e.__ob__){var s=e.__ob__.dep.id;if(t.has(s))return;t.add(s)}if(o)for(n=e.length;n--;)Ye(e[n],t);else if(r)for(i=Object.keys(e),n=i.length;n--;)Ye(e[i[n]],t)}}function Ge(e){return re(e)&&he(e.content)}function Ke(e,t){var n=t?e:e.trim(),i=Vo.get(n);if(i)return i;var o=document.createDocumentFragment(),r=e.match(Fo),s=Mo.test(e),a=Io.test(e);if(r||s||a){var c=r&&r[1],l=Ro[c]||Ro.efault,h=l[0],u=l[1],f=l[2],p=document.createElement("div");for(p.innerHTML=u+e+f;h--;)p=p.lastChild;for(var d;d=p.firstChild;)o.appendChild(d)}else o.appendChild(document.createTextNode(e));return t||ie(o),Vo.put(n,o),o}function Ze(e){if(Ge(e))return Ke(e.innerHTML);if("SCRIPT"===e.tagName)return Ke(e.textContent);for(var t,n=Xe(e),i=document.createDocumentFragment();t=n.firstChild;)i.appendChild(t);return ie(i),i}function Xe(e){if(!e.querySelectorAll)return e.cloneNode();var t,n,i,o=e.cloneNode(!0);if(Lo){var r=o;if(Ge(e)&&(e=e.content,r=o.content),n=e.querySelectorAll("template"),n.length)for(i=r.querySelectorAll("template"),t=i.length;t--;)i[t].parentNode.replaceChild(Xe(n[t]),i[t])}if(Ho)if("TEXTAREA"===e.tagName)o.value=e.value;else if(n=e.querySelectorAll("textarea"),n.length)for(i=o.querySelectorAll("textarea"),t=i.length;t--;)i[t].value=n[t].value;return o}function et(e,t,n){var i,o;return he(e)?(ie(e),t?Xe(e):e):("string"==typeof e?n||"#"!==e.charAt(0)?o=Ke(e,n):(o=Po.get(e),o||(i=document.getElementById(e.slice(1)),i&&(o=Ze(i),Po.put(e,o)))):e.nodeType&&(o=Ze(e)),o&&t?Xe(o):o)}function tt(e,t,n,i,o,r){this.children=[],this.childFrags=[],this.vm=t,this.scope=o,this.inserted=!1,this.parentFrag=r,r&&r.childFrags.push(this),this.unlink=e(t,n,i,o,this);var s=this.single=1===n.childNodes.length&&!n.childNodes[0].__v_anchor;s?(this.node=n.childNodes[0],this.before=nt,this.remove=it):(this.node=se("fragment-start"),this.end=se("fragment-end"),this.frag=n,Q(this.node,n),n.appendChild(this.end),this.before=ot,this.remove=rt),this.node.__v_frag=this}function nt(e,t){this.inserted=!0;var n=t!==!1?F:W;n(this.node,e,this.vm),H(this.node)&&this.callHook(st)}function it(){this.inserted=!1;var e=H(this.node),t=this;this.beforeRemove(),M(this.node,this.vm,function(){e&&t.callHook(at),t.destroy()})}function ot(e,t){this.inserted=!0;var n=this.vm,i=t!==!1?F:W;ce(this.node,this.end,function(t){i(t,e,n)}),H(this.node)&&this.callHook(st)}function rt(){this.inserted=!1;var e=this,t=H(this.node);this.beforeRemove(),le(this.node,this.end,this.vm,this.frag,function(){t&&e.callHook(at),e.destroy()})}function st(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function at(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}function ct(e,t){this.vm=e;var n,i="string"==typeof t;i||re(t)&&!t.hasAttribute("v-if")?n=et(t,!0):(n=document.createDocumentFragment(),n.appendChild(t)),this.template=n;var o,r=e.constructor.cid;if(r>0){var s=r+(i?t:ue(t));o=Uo.get(s),o||(o=It(n,e.$options,!0),Uo.put(s,o))}else o=It(n,e.$options,!0);this.linker=o}function lt(e,t,n){var i=e.node.previousSibling;if(i){for(e=i.__v_frag;!(e&&e.forId===n&&e.inserted||i===t);){if(i=i.previousSibling,!i)return;e=i.__v_frag}return e}}function ht(e){var t=e.node;if(e.end)for(;!t.__vue__&&t!==e.end&&t.nextSibling;)t=t.nextSibling;return t.__vue__}function ut(e){for(var t=-1,n=new Array(Math.floor(e));++t<e;)n[t]=t;return n}function ft(e,t,n,i){return i?"$index"===i?e:i.charAt(0).match(/\w/)?Se(n,i):n[i]:t||n}function pt(e,t,n){for(var i,o,r,s=t?[]:null,a=0,c=e.options.length;a<c;a++)if(i=e.options[a],r=n?i.hasAttribute("selected"):i.selected){if(o=i.hasOwnProperty("_value")?i._value:i.value,!t)return o;s.push(o)}return s}function dt(e,t){for(var n=e.length;n--;)if(C(e[n],t))return n;return-1}function vt(e,t){var n=t.map(function(e){var t=e.charCodeAt(0);return t>47&&t<58?parseInt(e,10):1===e.length&&(t=e.toUpperCase().charCodeAt(0),t>64&&t<91)?t:ur[e]});return n=[].concat.apply([],n),function(t){if(n.indexOf(t.keyCode)>-1)return e.call(this,t)}}function yt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function _t(e){return function(t){return t.preventDefault(),e.call(this,t)}}function bt(e){return function(t){if(t.target===t.currentTarget)return e.call(this,t)}}function mt(e){if(yr[e])return yr[e];var t=gt(e);return yr[e]=yr[t]=t,t}function gt(e){e=d(e);var t=f(e),n=t.charAt(0).toUpperCase()+t.slice(1);_r||(_r=document.createElement("div"));var i,o=pr.length;if("filter"!==t&&t in _r.style)return{kebab:e,camel:t};for(;o--;)if(i=dr[o]+n,i in _r.style)return{kebab:pr[o]+e,camel:i}}function Et(e){var t=[];if(Ln(e))for(var n=0,i=e.length;n<i;n++){var o=e[n];if(o)if("string"==typeof o)t.push(o);else for(var r in o)o[r]&&t.push(r)}else if(m(e))for(var s in e)e[s]&&t.push(s);return t}function wt(e,t,n){if(t=t.trim(),t.indexOf(" ")===-1)return void n(e,t);for(var i=t.split(/\s+/),o=0,r=i.length;o<r;o++)n(e,i[o])}function xt(e,t,n){function i(){++r>=o?n():e[r].call(t,i)}var o=e.length,r=0;e[0].call(t,i)}function kt(e,t,i){for(var o,r,a,c,l,h,u,p=[],v=Object.keys(t),y=v.length;y--;)if(r=v[y],o=t[r]||Sr,"production"===n.env.NODE_ENV||"$data"!==r)if(l=f(r),Vr.test(l)){if(u={name:r,path:l,options:o,mode:Dr.ONE_WAY,raw:null},a=d(r),null===(c=B(e,a))&&(null!==(c=B(e,a+".sync"))?u.mode=Dr.TWO_WAY:null!==(c=B(e,a+".once"))&&(u.mode=Dr.ONE_TIME)),null!==c)u.raw=c,h=A(c),c=h.expression,u.filters=h.filters,s(c)&&!h.filters?u.optimizedLiteral=!0:(u.dynamic=!0,"production"===n.env.NODE_ENV||u.mode!==Dr.TWO_WAY||Pr.test(c)||(u.mode=Dr.ONE_WAY,Di("Cannot bind two-way prop with non-settable parent path: "+c,i))),u.parentPath=c,"production"!==n.env.NODE_ENV&&o.twoWay&&u.mode!==Dr.TWO_WAY&&Di('Prop "'+r+'" expects a two-way binding type.',i);else if(null!==(c=z(e,a)))u.raw=c;else if("production"!==n.env.NODE_ENV){var _=l.toLowerCase();c=/[A-Z\-]/.test(r)&&(e.getAttribute(_)||e.getAttribute(":"+_)||e.getAttribute("v-bind:"+_)||e.getAttribute(":"+_+".once")||e.getAttribute("v-bind:"+_+".once")||e.getAttribute(":"+_+".sync")||e.getAttribute("v-bind:"+_+".sync")),c?Di("Possible usage error for prop `"+_+"` - did you mean `"+a+"`? HTML is case-insensitive, remember to use kebab-case for props in templates.",i):o.required&&Di("Missing required prop: "+r,i)}p.push(u)}else"production"!==n.env.NODE_ENV&&Di('Invalid prop key: "'+r+'". Prop keys must be valid identifiers.',i);else Di("Do not use $data as prop.",i);return Ct(p)}function Ct(e){return function(t,n){t._props={};for(var i,o,s,a,c,f=t.$options.propsData,p=e.length;p--;)if(i=e[p],c=i.raw,o=i.path,s=i.options,t._props[o]=i,f&&r(f,o)&&Nt(t,i,f[o]),null===c)Nt(t,i,void 0);else if(i.dynamic)i.mode===Dr.ONE_TIME?(a=(n||t._context||t).$get(i.parentPath),Nt(t,i,a)):t._context?t._bindDir({name:"prop",def:Fr,prop:i},null,null,n):Nt(t,i,t.$get(i.parentPath));else if(i.optimizedLiteral){var v=u(c);a=v===c?h(l(c)):v,Nt(t,i,a)}else a=s.type===Boolean&&(""===c||c===d(i.name))||c,Nt(t,i,a)}}function $t(e,t,n,i){var o=t.dynamic&&Be(t.parentPath),r=n;void 0===r&&(r=At(e,t)),r=jt(t,r,e);var s=r!==n;Tt(t,r,e)||(r=void 0),o&&!s?we(function(){i(r)}):i(r)}function Nt(e,t,n){$t(e,t,n,function(n){Ne(e,t.path,n)})}function Ot(e,t,n){$t(e,t,n,function(n){e[t.path]=n})}function At(e,t){var i=t.options;if(!r(i,"default"))return i.type!==Boolean&&void 0;var o=i["default"];return m(o)&&"production"!==n.env.NODE_ENV&&Di('Invalid default value for prop "'+t.name+'": Props with type Object/Array must use a factory function to return the default value.',e),"function"==typeof o&&i.type!==Function?o.call(e):o}function Tt(e,t,i){if(!e.options.required&&(null===e.raw||null==t))return!0;var o=e.options,r=o.type,s=!r,a=[];if(r){Ln(r)||(r=[r]);for(var c=0;c<r.length&&!s;c++){var l=Dt(t,r[c]);a.push(l.expectedType),s=l.valid}}if(!s)return"production"!==n.env.NODE_ENV&&Di('Invalid prop: type check failed for prop "'+e.name+'". Expected '+a.map(St).join(", ")+", got "+Vt(t)+".",i),!1;var h=o.validator;return!(h&&!h(t))||("production"!==n.env.NODE_ENV&&Di('Invalid prop: custom validator check failed for prop "'+e.name+'".',i),!1)}function jt(e,t,i){var o=e.options.coerce;return o?"function"==typeof o?o(t):("production"!==n.env.NODE_ENV&&Di('Invalid coerce for prop "'+e.name+'": expected function, got '+typeof o+".",i),t):t}function Dt(e,t){var n,i;return t===String?(i="string",n=typeof e===i):t===Number?(i="number",n=typeof e===i):t===Boolean?(i="boolean",n=typeof e===i):t===Function?(i="function",n=typeof e===i):t===Object?(i="object",n=g(e)):t===Array?(i="array",n=Ln(e)):n=e instanceof t,{valid:n,expectedType:i}}function St(e){return e?e.charAt(0).toUpperCase()+e.slice(1):"custom type"}function Vt(e){return Object.prototype.toString.call(e).slice(8,-1)}function Pt(e){Mr.push(e),Ir||(Ir=!0,oi(Rt))}function Rt(){for(var e=document.documentElement.offsetHeight,t=0;t<Mr.length;t++)Mr[t]();return Mr=[],Ir=!1,e}function Ft(e,t,i,o){this.id=t,this.el=e,this.enterClass=i&&i.enterClass||t+"-enter",this.leaveClass=i&&i.leaveClass||t+"-leave",this.hooks=i,this.vm=o,this.pendingCssEvent=this.pendingCssCb=this.cancel=this.pendingJsCb=this.op=this.cb=null,this.justEntered=!1,this.entered=this.left=!1,this.typeCache={},this.type=i&&i.type,"production"!==n.env.NODE_ENV&&this.type&&this.type!==Lr&&this.type!==Hr&&Di('invalid CSS transition type for transition="'+this.id+'": '+this.type,o);var r=this;["enterNextTick","enterDone","leaveNextTick","leaveDone"].forEach(function(e){r[e]=y(r[e],r)})}function Mt(e){if(/svg$/.test(e.namespaceURI)){var t=e.getBoundingClientRect();return!(t.width||t.height)}return!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function It(e,t,n){var i=n||!t._asComponent?qt(e,t):null,o=i&&i.terminal||hn(e)||!e.hasChildNodes()?null:Zt(e.childNodes,t);return function(e,t,n,r,s){var a=_(t.childNodes),c=Lt(function(){i&&i(e,t,n,r,s),o&&o(e,a,n,r,s)},e);return zt(e,c)}}function Lt(e,t){"production"===n.env.NODE_ENV&&(t._directives=[]);var i=t._directives.length;e();var o=t._directives.slice(i);o.sort(Ht);for(var r=0,s=o.length;r<s;r++)o[r]._bind();return o}function Ht(e,t){return e=e.descriptor.def.priority||es,t=t.descriptor.def.priority||es,e>t?-1:e===t?0:1}function zt(e,t,n,i){function o(o){Bt(e,t,o),n&&i&&Bt(n,i)}return o.dirs=t,o}function Bt(e,t,i){for(var o=t.length;o--;)t[o]._teardown(),"production"===n.env.NODE_ENV||i||e._directives.$remove(t[o])}function Ut(e,t,n,i){var o=kt(t,n,e),r=Lt(function(){o(e,i)},e);return zt(e,r)}function Wt(e,t,i){var o,r,s=t._containerAttrs,a=t._replacerAttrs;if(11!==e.nodeType)t._asComponent?(s&&i&&(o=sn(s,i)),a&&(r=sn(a,t))):r=sn(e.attributes,t);else if("production"!==n.env.NODE_ENV&&s){var c=s.filter(function(e){return e.name.indexOf("_v-")<0&&!Gr.test(e.name)&&"slot"!==e.name}).map(function(e){return'"'+e.name+'"'});if(c.length){var l=c.length>1;Di("Attribute"+(l?"s ":" ")+c.join(", ")+(l?" are":" is")+" ignored on component <"+t.el.tagName.toLowerCase()+"> because the component is a fragment instance: http://vuejs.org/guide/components.html#Fragment-Instance")}}return t._containerAttrs=t._replacerAttrs=null,function(e,t,n){var i,s=e._context;s&&o&&(i=Lt(function(){o(s,t,null,n)},s));var a=Lt(function(){r&&r(e,t)},e);return zt(e,a,s,i)}}function qt(e,t){var n=e.nodeType;return 1!==n||hn(e)?3===n&&e.data.trim()?Qt(e,t):null:Jt(e,t)}function Jt(e,t){if("TEXTAREA"===e.tagName){var n=D(e.value);n&&(e.setAttribute(":value",S(n)),e.value="")}var i,o=e.hasAttributes(),r=o&&_(e.attributes);return o&&(i=nn(e,r,t)),i||(i=en(e,t)),i||(i=tn(e,t)),!i&&o&&(i=sn(r,t)),i}function Qt(e,t){if(e._skip)return Yt;var n=D(e.wholeText);if(!n)return null;for(var i=e.nextSibling;i&&3===i.nodeType;)i._skip=!0,i=i.nextSibling;for(var o,r,s=document.createDocumentFragment(),a=0,c=n.length;a<c;a++)r=n[a],o=r.tag?Gt(r,t):document.createTextNode(r.value),s.appendChild(o);return Kt(n,s,t)}function Yt(e,t){J(t)}function Gt(e,t){function n(t){if(!e.descriptor){var n=A(e.value);e.descriptor={name:t,def:Ar[t],expression:n.expression,filters:n.filters}}}var i;return e.oneTime?i=document.createTextNode(e.value):e.html?(i=document.createComment("v-html"),n("html")):(i=document.createTextNode(" "),n("text")),i}function Kt(e,t){return function(n,i,o,r){for(var s,a,l,h=t.cloneNode(!0),u=_(h.childNodes),f=0,p=e.length;f<p;f++)s=e[f],a=s.value,s.tag&&(l=u[f],s.oneTime?(a=(r||n).$eval(a),s.html?Y(l,et(a,!0)):l.data=c(a)):n._bindDir(s.descriptor,l,o,r));Y(i,h)}}function Zt(e,t){for(var n,i,o,r=[],s=0,a=e.length;s<a;s++)o=e[s],n=qt(o,t),i=n&&n.terminal||"SCRIPT"===o.tagName||!o.hasChildNodes()?null:Zt(o.childNodes,t),r.push(n,i);return r.length?Xt(r):null}function Xt(e){return function(t,n,i,o,r){for(var s,a,c,l=0,h=0,u=e.length;l<u;h++){s=n[h],a=e[l++],c=e[l++];var f=_(s.childNodes);a&&a(t,s,i,o,r),c&&c(t,f,i,o,r)}}}function en(e,t){var n=e.tagName.toLowerCase();if(!Ri.test(n)){var i=ge(t,"elementDirectives",n);return i?rn(e,n,"",t,i):void 0}}function tn(e,t){var n=fe(e,t);if(n){var i=ae(e),o={name:"component",ref:i,expression:n.id,def:Qr.component,modifiers:{literal:!n.dynamic}},r=function(e,t,n,r,s){i&&Ne((r||e).$refs,i,null),e._bindDir(o,t,n,r,s)};return r.terminal=!0,r}}function nn(e,t,n){if(null!==z(e,"v-pre"))return on;if(e.hasAttribute("v-else")){var i=e.previousElementSibling;if(i&&i.hasAttribute("v-if"))return on}for(var o,r,s,a,c,l,h,u,f,p,d=0,v=t.length;d<v;d++)o=t[d],r=o.name.replace(Zr,""),(c=r.match(Kr))&&(f=ge(n,"directives",c[1]),f&&f.terminal&&(!p||(f.priority||ts)>p.priority)&&(p=f,h=o.name,a=an(o.name),s=o.value,l=c[1],u=c[2]));return p?rn(e,l,s,n,p,h,u,a):void 0}function on(){}function rn(e,t,n,i,o,r,s,a){var c=A(n),l={name:t,arg:s,expression:c.expression,filters:c.filters,raw:n,attr:r,modifiers:a,def:o};"for"!==t&&"router-view"!==t||(l.ref=ae(e));var h=function(e,t,n,i,o){l.ref&&Ne((i||e).$refs,l.ref,null),e._bindDir(l,t,n,i,o)};return h.terminal=!0,h}function sn(e,t){function i(e,t,n){var i=n&&ln(n),o=!i&&A(s);y.push({name:e,attr:a,raw:c,def:t,arg:h,modifiers:u,expression:o&&o.expression,filters:o&&o.filters,interp:n,hasOneTime:i})}for(var o,r,s,a,c,l,h,u,f,p,d,v=e.length,y=[];v--;)if(o=e[v],r=a=o.name,s=c=o.value,p=D(s),h=null,u=an(r),r=r.replace(Zr,""),p)s=S(p),h=r,i("bind",Ar.bind,p),"production"!==n.env.NODE_ENV&&"class"===r&&Array.prototype.some.call(e,function(e){return":class"===e.name||"v-bind:class"===e.name})&&Di('class="'+c+'": Do not mix mustache interpolation and v-bind for "class" on the same element. Use one or the other.',t);else if(Xr.test(r))u.literal=!Yr.test(r),i("transition",Qr.transition);else if(Gr.test(r))h=r.replace(Gr,""),i("on",Ar.on);else if(Yr.test(r))l=r.replace(Yr,""),"style"===l||"class"===l?i(l,Qr[l]):(h=l,i("bind",Ar.bind));else if(d=r.match(Kr)){if(l=d[1],h=d[2],"else"===l)continue;f=ge(t,"directives",l,!0),f&&i(l,f)}if(y.length)return cn(y)}function an(e){var t=Object.create(null),n=e.match(Zr);if(n)for(var i=n.length;i--;)t[n[i].slice(1)]=!0;return t}function cn(e){return function(t,n,i,o,r){for(var s=e.length;s--;)t._bindDir(e[s],n,i,o,r)}}function ln(e){for(var t=e.length;t--;)if(e[t].oneTime)return!0}function hn(e){return"SCRIPT"===e.tagName&&(!e.hasAttribute("type")||"text/javascript"===e.getAttribute("type"))}function un(e,t){return t&&(t._containerAttrs=pn(e)),re(e)&&(e=et(e)),t&&(t._asComponent&&!t.template&&(t.template="<slot></slot>"),t.template&&(t._content=ne(e),e=fn(e,t))),he(e)&&(Q(se("v-start",!0),e),e.appendChild(se("v-end",!0))),e}function fn(e,t){var i=t.template,o=et(i,!0);if(o){var r=o.firstChild,s=r.tagName&&r.tagName.toLowerCase();return t.replace?(e===document.body&&"production"!==n.env.NODE_ENV&&Di("You are mounting an instance with a template to <body>. This will replace <body> entirely. You should probably use `replace: false` here."),o.childNodes.length>1||1!==r.nodeType||"component"===s||ge(t,"components",s)||U(r,"is")||ge(t,"elementDirectives",s)||r.hasAttribute("v-for")||r.hasAttribute("v-if")?o:(t._replacerAttrs=pn(r),dn(e,r),r)):(e.appendChild(o),e)}"production"!==n.env.NODE_ENV&&Di("Invalid template option: "+i)}function pn(e){if(1===e.nodeType&&e.hasAttributes())return _(e.attributes)}function dn(e,t){for(var n,i,o=e.attributes,r=o.length;r--;)n=o[r].name,i=o[r].value,t.hasAttribute(n)||ns.test(n)?"class"===n&&!D(i)&&(i=i.trim())&&i.split(/\s+/).forEach(function(e){ee(t,e)}):t.setAttribute(n,i)}function vn(e,t){if(t){for(var i,o,r=e._slotContents=Object.create(null),s=0,a=t.children.length;s<a;s++)i=t.children[s],(o=i.getAttribute("slot"))&&(r[o]||(r[o]=[])).push(i),"production"!==n.env.NODE_ENV&&B(i,"slot")&&Di('The "slot" attribute must be static.',e.$parent);for(o in r)r[o]=yn(r[o],t);if(t.hasChildNodes()){var c=t.childNodes;if(1===c.length&&3===c[0].nodeType&&!c[0].data.trim())return;r["default"]=yn(t.childNodes,t)}}}function yn(e,t){var n=document.createDocumentFragment();e=_(e);for(var i=0,o=e.length;i<o;i++){var r=e[i];!re(r)||r.hasAttribute("v-if")||r.hasAttribute("v-for")||(t.removeChild(r),r=et(r,!0)),n.appendChild(r)}return n}function _n(e){function t(){}function i(e,t){var n=new Qe(t,e,null,{lazy:!0});return function(){return n.dirty&&n.evaluate(),
Ee.target&&n.depend(),n.value}}Object.defineProperty(e.prototype,"$data",{get:function(){return this._data},set:function(e){e!==this._data&&this._setData(e)}}),e.prototype._initState=function(){this._initProps(),this._initMeta(),this._initMethods(),this._initData(),this._initComputed()},e.prototype._initProps=function(){var e=this.$options,t=e.el,i=e.props;i&&!t&&"production"!==n.env.NODE_ENV&&Di("Props will not be compiled if no `el` option is provided at instantiation.",this),t=e.el=L(t),this._propsUnlinkFn=t&&1===t.nodeType&&i?Ut(this,t,i,this._scope):null},e.prototype._initData=function(){var e=this.$options.data,t=this._data=e?e():{};g(t)||(t={},"production"!==n.env.NODE_ENV&&Di("data functions should return an object.",this));var i,o,s=this._props,a=Object.keys(t);for(i=a.length;i--;)o=a[i],s&&r(s,o)?"production"!==n.env.NODE_ENV&&Di('Data field "'+o+'" is already defined as a prop. To provide default value for a prop, use the "default" prop option; if you want to pass prop values to an instantiation call, use the "propsData" option.',this):this._proxy(o);$e(t,this)},e.prototype._setData=function(e){e=e||{};var t=this._data;this._data=e;var n,i,o;for(n=Object.keys(t),o=n.length;o--;)i=n[o],i in e||this._unproxy(i);for(n=Object.keys(e),o=n.length;o--;)i=n[o],r(this,i)||this._proxy(i);t.__ob__.removeVm(this),$e(e,this),this._digest()},e.prototype._proxy=function(e){if(!a(e)){var t=this;Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return t._data[e]},set:function(n){t._data[e]=n}})}},e.prototype._unproxy=function(e){a(e)||delete this[e]},e.prototype._digest=function(){for(var e=0,t=this._watchers.length;e<t;e++)this._watchers[e].update(!0)},e.prototype._initComputed=function(){var e=this.$options.computed;if(e)for(var n in e){var o=e[n],r={enumerable:!0,configurable:!0};"function"==typeof o?(r.get=i(o,this),r.set=t):(r.get=o.get?o.cache!==!1?i(o.get,this):y(o.get,this):t,r.set=o.set?y(o.set,this):t),Object.defineProperty(this,n,r)}},e.prototype._initMethods=function(){var e=this.$options.methods;if(e)for(var t in e)this[t]=y(e[t],this)},e.prototype._initMeta=function(){var e=this.$options._meta;if(e)for(var t in e)Ne(this,t,e[t])}}function bn(e){function t(e,t){for(var n,i,o,r=t.attributes,s=0,a=r.length;s<a;s++)n=r[s].name,os.test(n)&&(n=n.replace(os,""),i=r[s].value,Be(i)&&(i+=".apply(this, $arguments)"),o=(e._scope||e._context).$eval(i,!0),o._fromParent=!0,e.$on(n.replace(os),o))}function i(e,t,n){if(n){var i,r,s,a;for(r in n)if(i=n[r],Ln(i))for(s=0,a=i.length;s<a;s++)o(e,t,r,i[s]);else o(e,t,r,i)}}function o(e,t,i,r,s){var a=typeof r;if("function"===a)e[t](i,r,s);else if("string"===a){var c=e.$options.methods,l=c&&c[r];l?e[t](i,l,s):"production"!==n.env.NODE_ENV&&Di('Unknown method: "'+r+'" when registering callback for '+t+': "'+i+'".',e)}else r&&"object"===a&&o(e,t,i,r.handler,r)}function r(){this._isAttached||(this._isAttached=!0,this.$children.forEach(s))}function s(e){!e._isAttached&&H(e.$el)&&e._callHook("attached")}function a(){this._isAttached&&(this._isAttached=!1,this.$children.forEach(c))}function c(e){e._isAttached&&!H(e.$el)&&e._callHook("detached")}e.prototype._initEvents=function(){var e=this.$options;e._asComponent&&t(this,e.el),i(this,"$on",e.events),i(this,"$watch",e.watch)},e.prototype._initDOMHooks=function(){this.$on("hook:attached",r),this.$on("hook:detached",a)},e.prototype._callHook=function(e){this.$emit("pre-hook:"+e);var t=this.$options[e];if(t)for(var n=0,i=t.length;n<i;n++)t[n].call(this);this.$emit("hook:"+e)}}function mn(){}function gn(e,t,i,o,r,s){this.vm=t,this.el=i,this.descriptor=e,this.name=e.name,this.expression=e.expression,this.arg=e.arg,this.modifiers=e.modifiers,this.filters=e.filters,this.literal=this.modifiers&&this.modifiers.literal,this._locked=!1,this._bound=!1,this._listeners=null,this._host=o,this._scope=r,this._frag=s,"production"!==n.env.NODE_ENV&&this.el&&(this.el._vue_directives=this.el._vue_directives||[],this.el._vue_directives.push(this))}function En(e){e.prototype._updateRef=function(e){var t=this.$options._ref;if(t){var n=(this._scope||this._context).$refs;e?n[t]===this&&(n[t]=null):n[t]=this}},e.prototype._compile=function(e){var t=this.$options,n=e;if(e=un(e,t),this._initElement(e),1!==e.nodeType||null===z(e,"v-pre")){var i=this._context&&this._context.$options,o=Wt(e,t,i);vn(this,t._content);var r,s=this.constructor;t._linkerCachable&&(r=s.linker,r||(r=s.linker=It(e,t)));var a=o(this,e,this._scope),c=r?r(this,e):It(e,t)(this,e);this._unlinkFn=function(){a(),c(!0)},t.replace&&Y(n,e),this._isCompiled=!0,this._callHook("compiled")}},e.prototype._initElement=function(e){he(e)?(this._isFragment=!0,this.$el=this._fragmentStart=e.firstChild,this._fragmentEnd=e.lastChild,3===this._fragmentStart.nodeType&&(this._fragmentStart.data=this._fragmentEnd.data=""),this._fragment=e):this.$el=e,this.$el.__vue__=this,this._callHook("beforeCompile")},e.prototype._bindDir=function(e,t,n,i,o){this._directives.push(new gn(e,this,t,n,i,o))},e.prototype._destroy=function(e,t){if(this._isBeingDestroyed)return void(t||this._cleanup());var n,i,o=this,r=function(){!n||i||t||o._cleanup()};e&&this.$el&&(i=!0,this.$remove(function(){i=!1,r()})),this._callHook("beforeDestroy"),this._isBeingDestroyed=!0;var s,a=this.$parent;for(a&&!a._isBeingDestroyed&&(a.$children.$remove(this),this._updateRef(!0)),s=this.$children.length;s--;)this.$children[s].$destroy();for(this._propsUnlinkFn&&this._propsUnlinkFn(),this._unlinkFn&&this._unlinkFn(),s=this._watchers.length;s--;)this._watchers[s].teardown();this.$el&&(this.$el.__vue__=null),n=!0,r()},e.prototype._cleanup=function(){this._isDestroyed||(this._frag&&this._frag.children.$remove(this),this._data&&this._data.__ob__&&this._data.__ob__.removeVm(this),this.$el=this.$parent=this.$root=this.$children=this._watchers=this._context=this._scope=this._directives=null,this._isDestroyed=!0,this._callHook("destroyed"),this.$off())}}function wn(e){e.prototype._applyFilters=function(e,t,n,i){var o,r,s,a,c,l,h,u,f;for(l=0,h=n.length;l<h;l++)if(o=n[i?h-l-1:l],r=ge(this.$options,"filters",o.name,!0),r&&(r=i?r.write:r.read||r,"function"==typeof r)){if(s=i?[e,t]:[e],c=i?2:1,o.args)for(u=0,f=o.args.length;u<f;u++)a=o.args[u],s[u+c]=a.dynamic?this.$get(a.value):a.value;e=r.apply(this,s)}return e},e.prototype._resolveComponent=function(t,i){var o;if(o="function"==typeof t?t:ge(this.$options,"components",t,!0))if(o.options)i(o);else if(o.resolved)i(o.resolved);else if(o.requested)o.pendingCallbacks.push(i);else{o.requested=!0;var r=o.pendingCallbacks=[i];o.call(this,function(t){g(t)&&(t=e.extend(t)),o.resolved=t;for(var n=0,i=r.length;n<i;n++)r[n](t)},function(e){"production"!==n.env.NODE_ENV&&Di("Failed to resolve async component"+("string"==typeof t?": "+t:"")+". "+(e?"\nReason: "+e:""))})}}}function xn(e){function t(e){return JSON.parse(JSON.stringify(e))}e.prototype.$get=function(e,t){var n=ze(e);if(n){if(t){var i=this;return function(){i.$arguments=_(arguments);var e=n.get.call(i,i);return i.$arguments=null,e}}try{return n.get.call(this,this)}catch(o){}}},e.prototype.$set=function(e,t){var n=ze(e,!0);n&&n.set&&n.set.call(this,this,t)},e.prototype.$delete=function(e){o(this._data,e)},e.prototype.$watch=function(e,t,n){var i,o=this;"string"==typeof e&&(i=A(e),e=i.expression);var r=new Qe(o,e,t,{deep:n&&n.deep,sync:n&&n.sync,filters:i&&i.filters,user:!n||n.user!==!1});return n&&n.immediate&&t.call(o,r.value),function(){r.teardown()}},e.prototype.$eval=function(e,t){if(rs.test(e)){var n=A(e),i=this.$get(n.expression,t);return n.filters?this._applyFilters(i,null,n.filters):i}return this.$get(e,t)},e.prototype.$interpolate=function(e){var t=D(e),n=this;return t?1===t.length?n.$eval(t[0].value)+"":t.map(function(e){return e.tag?n.$eval(e.value):e.value}).join(""):e},e.prototype.$log=function(e){var n=e?Se(this._data,e):this._data;if(n&&(n=t(n)),!e){var i;for(i in this.$options.computed)n[i]=t(this[i]);if(this._props)for(i in this._props)n[i]=t(this[i])}console.log(n)}}function kn(e){function t(e,t,i,o,r,s){t=n(t);var a=!H(t),c=o===!1||a?r:s,l=!a&&!e._isAttached&&!H(e.$el);return e._isFragment?(ce(e._fragmentStart,e._fragmentEnd,function(n){c(n,t,e)}),i&&i()):c(e.$el,t,e,i),l&&e._callHook("attached"),e}function n(e){return"string"==typeof e?document.querySelector(e):e}function i(e,t,n,i){t.appendChild(e),i&&i()}function o(e,t,n,i){W(e,t),i&&i()}function r(e,t,n){J(e),n&&n()}e.prototype.$nextTick=function(e){oi(e,this)},e.prototype.$appendTo=function(e,n,o){return t(this,e,n,o,i,R)},e.prototype.$prependTo=function(e,t,i){return e=n(e),e.hasChildNodes()?this.$before(e.firstChild,t,i):this.$appendTo(e,t,i),this},e.prototype.$before=function(e,n,i){return t(this,e,n,i,o,F)},e.prototype.$after=function(e,t,i){return e=n(e),e.nextSibling?this.$before(e.nextSibling,t,i):this.$appendTo(e.parentNode,t,i),this},e.prototype.$remove=function(e,t){if(!this.$el.parentNode)return e&&e();var n=this._isAttached&&H(this.$el);n||(t=!1);var i=this,o=function(){n&&i._callHook("detached"),e&&e()};if(this._isFragment)le(this._fragmentStart,this._fragmentEnd,this,this._fragment,o);else{var s=t===!1?r:M;s(this.$el,this,o)}return this}}function Cn(e){function t(e,t,i){var o=e.$parent;if(o&&i&&!n.test(t))for(;o;)o._eventsCount[t]=(o._eventsCount[t]||0)+i,o=o.$parent}e.prototype.$on=function(e,n){return(this._events[e]||(this._events[e]=[])).push(n),t(this,e,1),this},e.prototype.$once=function(e,t){function n(){i.$off(e,n),t.apply(this,arguments)}var i=this;return n.fn=t,this.$on(e,n),this},e.prototype.$off=function(e,n){var i;if(!arguments.length){if(this.$parent)for(e in this._events)i=this._events[e],i&&t(this,e,-i.length);return this._events={},this}if(i=this._events[e],!i)return this;if(1===arguments.length)return t(this,e,-i.length),this._events[e]=null,this;for(var o,r=i.length;r--;)if(o=i[r],o===n||o.fn===n){t(this,e,-1),i.splice(r,1);break}return this},e.prototype.$emit=function(e){var t="string"==typeof e;e=t?e:e.name;var n=this._events[e],i=t||!n;if(n){n=n.length>1?_(n):n;var o=t&&n.some(function(e){return e._fromParent});o&&(i=!1);for(var r=_(arguments,1),s=0,a=n.length;s<a;s++){var c=n[s],l=c.apply(this,r);l!==!0||o&&!c._fromParent||(i=!0)}}return i},e.prototype.$broadcast=function(e){var t="string"==typeof e;if(e=t?e:e.name,this._eventsCount[e]){var n=this.$children,i=_(arguments);t&&(i[0]={name:e,source:this});for(var o=0,r=n.length;o<r;o++){var s=n[o],a=s.$emit.apply(s,i);a&&s.$broadcast.apply(s,i)}return this}},e.prototype.$dispatch=function(e){var t=this.$emit.apply(this,arguments);if(t){var n=this.$parent,i=_(arguments);for(i[0]={name:e,source:this};n;)t=n.$emit.apply(n,i),n=t?n.$parent:null;return this}};var n=/^hook:/}function $n(e){function t(){this._isAttached=!0,this._isReady=!0,this._callHook("ready")}e.prototype.$mount=function(e){return this._isCompiled?void("production"!==n.env.NODE_ENV&&Di("$mount() should be called only once.",this)):(e=L(e),e||(e=document.createElement("div")),this._compile(e),this._initDOMHooks(),H(this.$el)?(this._callHook("attached"),t.call(this)):this.$once("hook:attached",t),this)},e.prototype.$destroy=function(e,t){this._destroy(e,t)},e.prototype.$compile=function(e,t,n,i){return It(e,this.$options,!0)(this,e,t,n,i)}}function Nn(e){this._init(e)}function On(e,t,n){return n=n?parseInt(n,10):0,t=l(t),"number"==typeof t?e.slice(n,n+t):e}function An(e,t,n){if(e=ls(e),null==t)return e;if("function"==typeof t)return e.filter(t);t=(""+t).toLowerCase();for(var i,o,r,s,a="in"===n?3:2,c=Array.prototype.concat.apply([],_(arguments,a)),l=[],h=0,u=e.length;h<u;h++)if(i=e[h],r=i&&i.$value||i,s=c.length){for(;s--;)if(o=c[s],"$key"===o&&jn(i.$key,t)||jn(Se(r,o),t)){l.push(i);break}}else jn(i,t)&&l.push(i);return l}function Tn(e){function t(e,t,n){var o=i[n];return o&&("$key"!==o&&(m(e)&&"$value"in e&&(e=e.$value),m(t)&&"$value"in t&&(t=t.$value)),e=m(e)?Se(e,o):e,t=m(t)?Se(t,o):t),e===t?0:e>t?r:-r}var n=null,i=void 0;e=ls(e);var o=_(arguments,1),r=o[o.length-1];"number"==typeof r?(r=r<0?-1:1,o=o.length>1?o.slice(0,-1):o):r=1;var s=o[0];return s?("function"==typeof s?n=function(e,t){return s(e,t)*r}:(i=Array.prototype.concat.apply([],o),n=function(e,o,r){return r=r||0,r>=i.length-1?t(e,o,r):t(e,o,r)||n(e,o,r+1)}),e.slice().sort(n)):e}function jn(e,t){var n;if(g(e)){var i=Object.keys(e);for(n=i.length;n--;)if(jn(e[i[n]],t))return!0}else if(Ln(e)){for(n=e.length;n--;)if(jn(e[n],t))return!0}else if(null!=e)return e.toString().toLowerCase().indexOf(t)>-1}function Dn(e){function t(e){return new Function("return function "+v(e)+" (options) { this._init(options) }")()}e.options={directives:Ar,elementDirectives:cs,filters:us,transitions:{},components:{},partials:{},replace:!0},e.util=qi,e.config=ji,e.set=i,e["delete"]=o,e.nextTick=oi,e.compiler=is,e.FragmentFactory=ct,e.internalDirectives=Qr,e.parsers={path:ho,text:Oi,template:zo,directive:wi,expression:Co},e.cid=0;var r=1;e.extend=function(e){e=e||{};var i=this,o=0===i.cid;if(o&&e._Ctor)return e._Ctor;var s=e.name||i.options.name;"production"!==n.env.NODE_ENV&&(/^[a-zA-Z][\w-]*$/.test(s)||(Di('Invalid component name: "'+s+'". Component names can only contain alphanumeric characaters and the hyphen.'),s=null));var a=t(s||"VueComponent");return a.prototype=Object.create(i.prototype),a.prototype.constructor=a,a.cid=r++,a.options=me(i.options,e),a["super"]=i,a.extend=i.extend,ji._assetTypes.forEach(function(e){a[e]=i[e]}),s&&(a.options.components[s]=a),o&&(e._Ctor=a),a},e.use=function(e){if(!e.installed){var t=_(arguments,1);return t.unshift(this),"function"==typeof e.install?e.install.apply(e,t):e.apply(null,t),e.installed=!0,this}},e.mixin=function(t){e.options=me(e.options,t)},ji._assetTypes.forEach(function(t){e[t]=function(i,o){return o?("production"!==n.env.NODE_ENV&&"component"===t&&(Ri.test(i)||Fi.test(i))&&Di("Do not use built-in or reserved HTML elements as component id: "+i),"component"===t&&g(o)&&(o.name||(o.name=i),o=e.extend(o)),this.options[t+"s"][i]=o,o):this.options[t+"s"][i]}}),b(e.transition,Vi)}var Sn=Object.prototype.hasOwnProperty,Vn=/^\s?(true|false|-?[\d\.]+|'[^']*'|"[^"]*")\s?$/,Pn=/-(\w)/g,Rn=/([a-z\d])([A-Z])/g,Fn=/(?:^|[-_\/])(\w)/g,Mn=Object.prototype.toString,In="[object Object]",Ln=Array.isArray,Hn="__proto__"in{},zn="undefined"!=typeof window&&"[object Object]"!==Object.prototype.toString.call(window),Bn=zn&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__,Un=zn&&window.navigator.userAgent.toLowerCase(),Wn=Un&&Un.indexOf("trident")>0,qn=Un&&Un.indexOf("msie 9.0")>0,Jn=Un&&Un.indexOf("android")>0,Qn=Un&&/(iphone|ipad|ipod|ios)/i.test(Un),Yn=Qn&&Un.match(/os ([\d_]+)/),Gn=Yn&&Yn[1].split("_"),Kn=Gn&&Number(Gn[0])>=9&&Number(Gn[1])>=3&&!window.indexedDB,Zn=void 0,Xn=void 0,ei=void 0,ti=void 0;if(zn&&!qn){var ni=void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend,ii=void 0===window.onanimationend&&void 0!==window.onwebkitanimationend;Zn=ni?"WebkitTransition":"transition",Xn=ni?"webkitTransitionEnd":"transitionend",ei=ii?"WebkitAnimation":"animation",ti=ii?"webkitAnimationEnd":"animationend"}var oi=function(){function e(){o=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}var n,i=[],o=!1;if("undefined"==typeof MutationObserver||Kn){var r=zn?window:"undefined"!=typeof t?t:{};n=r.setImmediate||setTimeout}else{var s=1,a=new MutationObserver(e),c=document.createTextNode(s);a.observe(c,{characterData:!0}),n=function(){s=(s+1)%2,c.data=s}}return function(t,r){var s=r?function(){t.call(r)}:t;i.push(s),o||(o=!0,n(e,0))}}(),ri=void 0;"undefined"!=typeof Set&&Set.toString().match(/native code/)?ri=Set:(ri=function(){this.set=Object.create(null)},ri.prototype.has=function(e){return void 0!==this.set[e]},ri.prototype.add=function(e){this.set[e]=1},ri.prototype.clear=function(){this.set=Object.create(null)});var si=$.prototype;si.put=function(e,t){var n,i=this.get(e,!0);return i||(this.size===this.limit&&(n=this.shift()),i={key:e},this._keymap[e]=i,this.tail?(this.tail.newer=i,i.older=this.tail):this.head=i,this.tail=i,this.size++),i.value=t,n},si.shift=function(){var e=this.head;return e&&(this.head=this.head.newer,this.head.older=void 0,e.newer=e.older=void 0,this._keymap[e.key]=void 0,this.size--),e},si.get=function(e,t){var n=this._keymap[e];if(void 0!==n)return n===this.tail?t?n:n.value:(n.newer&&(n===this.head&&(this.head=n.newer),n.newer.older=n.older),n.older&&(n.older.newer=n.newer),n.newer=void 0,n.older=this.tail,this.tail&&(this.tail.newer=n),this.tail=n,t?n:n.value)};var ai,ci,li,hi,ui,fi,pi,di,vi,yi,_i,bi,mi=new $(1e3),gi=/[^\s'"]+|'[^']*'|"[^"]*"/g,Ei=/^in$|^-?\d+/,wi=Object.freeze({parseDirective:A}),xi=/[-.*+?^${}()|[\]\/\\]/g,ki=void 0,Ci=void 0,$i=void 0,Ni=/[^|]\|[^|]/,Oi=Object.freeze({compileRegex:j,parseText:D,tokensToExp:S}),Ai=["{{","}}"],Ti=["{{{","}}}"],ji=Object.defineProperties({debug:!1,silent:!1,async:!0,warnExpressionErrors:!0,devtools:"production"!==n.env.NODE_ENV,_delimitersChanged:!0,_assetTypes:["component","directive","elementDirective","filter","transition","partial"],_propBindingModes:{ONE_WAY:0,TWO_WAY:1,ONE_TIME:2},_maxUpdateCount:100},{delimiters:{get:function(){return Ai},set:function(e){Ai=e,j()},configurable:!0,enumerable:!0},unsafeDelimiters:{get:function(){return Ti},set:function(e){Ti=e,j()},configurable:!0,enumerable:!0}}),Di=void 0,Si=void 0;"production"!==n.env.NODE_ENV&&!function(){var e="undefined"!=typeof console;Di=function(t,n){e&&!ji.silent&&console.error("[Vue warn]: "+t+(n?Si(n):""))},Si=function(e){var t=e._isVue?e.$options.name:e.name;return t?" (found in component: <"+d(t)+">)":""}}();var Vi=Object.freeze({appendWithTransition:R,beforeWithTransition:F,removeWithTransition:M,applyTransition:I}),Pi=/^v-ref:/,Ri=/^(div|p|span|img|a|b|i|br|ul|ol|li|h1|h2|h3|h4|h5|h6|code|pre|table|th|td|tr|form|label|input|select|option|nav|article|section|header|footer)$/i,Fi=/^(slot|partial|component)$/i,Mi=void 0;"production"!==n.env.NODE_ENV&&(Mi=function(e,t){return t.indexOf("-")>-1?e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:/HTMLUnknownElement/.test(e.toString())&&!/^(data|time|rtc|rb|details|dialog|summary)$/.test(t)});var Ii=ji.optionMergeStrategies=Object.create(null);Ii.data=function(e,t,i){return i?e||t?function(){var n="function"==typeof t?t.call(i):t,o="function"==typeof e?e.call(i):void 0;return n?de(n,o):o}:void 0:t?"function"!=typeof t?("production"!==n.env.NODE_ENV&&Di('The "data" option should be a function that returns a per-instance value in component definitions.',i),e):e?function(){return de(t.call(this),e.call(this))}:t:e},Ii.el=function(e,t,i){if(!i&&t&&"function"!=typeof t)return void("production"!==n.env.NODE_ENV&&Di('The "el" option should be a function that returns a per-instance value in component definitions.',i));var o=t||e;return i&&"function"==typeof o?o.call(i):o},Ii.init=Ii.created=Ii.ready=Ii.attached=Ii.detached=Ii.beforeCompile=Ii.compiled=Ii.beforeDestroy=Ii.destroyed=Ii.activate=function(e,t){return t?e?e.concat(t):Ln(t)?t:[t]:e},ji._assetTypes.forEach(function(e){Ii[e+"s"]=ve}),Ii.watch=Ii.events=function(e,t){if(!t)return e;if(!e)return t;var n={};b(n,e);for(var i in t){var o=n[i],r=t[i];o&&!Ln(o)&&(o=[o]),n[i]=o?o.concat(r):[r]}return n},Ii.props=Ii.methods=Ii.computed=function(e,t){if(!t)return e;if(!e)return t;var n=Object.create(null);return b(n,e),b(n,t),n};var Li=function(e,t){return void 0===t?e:t},Hi=0;Ee.target=null,Ee.prototype.addSub=function(e){this.subs.push(e)},Ee.prototype.removeSub=function(e){this.subs.$remove(e)},Ee.prototype.depend=function(){Ee.target.addDep(this)},Ee.prototype.notify=function(){for(var e=_(this.subs),t=0,n=e.length;t<n;t++)e[t].update()};var zi=Array.prototype,Bi=Object.create(zi);["push","pop","shift","unshift","splice","sort","reverse"].forEach(function(e){var t=zi[e];E(Bi,e,function(){for(var n=arguments.length,i=new Array(n);n--;)i[n]=arguments[n];var o,r=t.apply(this,i),s=this.__ob__;switch(e){case"push":o=i;break;case"unshift":o=i;break;case"splice":o=i.slice(2)}return o&&s.observeArray(o),s.dep.notify(),r})}),E(zi,"$set",function(e,t){return e>=this.length&&(this.length=Number(e)+1),this.splice(e,1,t)[0]}),E(zi,"$remove",function(e){if(this.length){var t=x(this,e);return t>-1?this.splice(t,1):void 0}});var Ui=Object.getOwnPropertyNames(Bi),Wi=!0;xe.prototype.walk=function(e){for(var t=Object.keys(e),n=0,i=t.length;n<i;n++)this.convert(t[n],e[t[n]])},xe.prototype.observeArray=function(e){for(var t=0,n=e.length;t<n;t++)$e(e[t])},xe.prototype.convert=function(e,t){Ne(this.value,e,t)},xe.prototype.addVm=function(e){(this.vms||(this.vms=[])).push(e)},xe.prototype.removeVm=function(e){this.vms.$remove(e)};var qi=Object.freeze({defineReactive:Ne,set:i,del:o,hasOwn:r,isLiteral:s,isReserved:a,_toString:c,toNumber:l,toBoolean:h,stripQuotes:u,camelize:f,hyphenate:d,classify:v,bind:y,toArray:_,extend:b,isObject:m,isPlainObject:g,def:E,debounce:w,indexOf:x,cancellable:k,looseEqual:C,isArray:Ln,hasProto:Hn,inBrowser:zn,devtools:Bn,isIE:Wn,isIE9:qn,isAndroid:Jn,isIos:Qn,iosVersionMatch:Yn,iosVersion:Gn,hasMutationObserverBug:Kn,get transitionProp(){return Zn},get transitionEndEvent(){return Xn},get animationProp(){return ei},get animationEndEvent(){return ti},nextTick:oi,get _Set(){return ri},query:L,inDoc:H,getAttr:z,getBindAttr:B,hasBindAttr:U,before:W,after:q,remove:J,prepend:Q,replace:Y,on:G,off:K,setClass:X,addClass:ee,removeClass:te,extractContent:ne,trimNode:ie,isTemplate:re,createAnchor:se,findRef:ae,mapNodeRange:ce,removeNodeRange:le,isFragment:he,getOuterHTML:ue,mergeOptions:me,resolveAsset:ge,checkComponentAttr:fe,commonTagRE:Ri,reservedTagRE:Fi,get warn(){return Di}}),Ji=0,Qi=new $(1e3),Yi=0,Gi=1,Ki=2,Zi=3,Xi=0,eo=1,to=2,no=3,io=4,oo=5,ro=6,so=7,ao=8,co=[];co[Xi]={ws:[Xi],ident:[no,Yi],"[":[io],eof:[so]},co[eo]={ws:[eo],".":[to],"[":[io],eof:[so]},co[to]={ws:[to],ident:[no,Yi]},co[no]={ident:[no,Yi],0:[no,Yi],number:[no,Yi],ws:[eo,Gi],".":[to,Gi],"[":[io,Gi],eof:[so,Gi]},co[io]={"'":[oo,Yi],'"':[ro,Yi],"[":[io,Ki],"]":[eo,Zi],eof:ao,"else":[io,Yi]},co[oo]={"'":[io,Yi],eof:ao,"else":[oo,Yi]},co[ro]={'"':[io,Yi],eof:ao,"else":[ro,Yi]};var lo;"production"!==n.env.NODE_ENV&&(lo=function(e,t){Di('You are setting a non-existent path "'+e.raw+'" on a vm instance. Consider pre-initializing the property with the "data" option for more reliable reactivity and better performance.',t)});var ho=Object.freeze({parsePath:De,getPath:Se,setPath:Ve}),uo=new $(1e3),fo="Math,Date,this,true,false,null,undefined,Infinity,NaN,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,parseInt,parseFloat",po=new RegExp("^("+fo.replace(/,/g,"\\b|")+"\\b)"),vo="break,case,class,catch,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,let,return,super,switch,throw,try,var,while,with,yield,enum,await,implements,package,protected,static,interface,private,public",yo=new RegExp("^("+vo.replace(/,/g,"\\b|")+"\\b)"),_o=/\s/g,bo=/\n/g,mo=/[\{,]\s*[\w\$_]+\s*:|('(?:[^'\\]|\\.)*'|"(?:[^"\\]|\\.)*"|`(?:[^`\\]|\\.)*\$\{|\}(?:[^`\\]|\\.)*`|`(?:[^`\\]|\\.)*`)|new |typeof |void /g,go=/"(\d+)"/g,Eo=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['.*?'\]|\[".*?"\]|\[\d+\]|\[[A-Za-z_$][\w$]*\])*$/,wo=/[^\w$\.](?:[A-Za-z_$][\w$]*)/g,xo=/^(?:true|false|null|undefined|Infinity|NaN)$/,ko=[],Co=Object.freeze({parseExpression:ze,isSimplePath:Be}),$o=[],No=[],Oo={},Ao={},To=!1,jo=0;Qe.prototype.get=function(){this.beforeGet();var e,t=this.scope||this.vm;try{e=this.getter.call(t,t)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating expression "'+this.expression+'": '+i.toString(),this.vm)}return this.deep&&Ye(e),this.preProcess&&(e=this.preProcess(e)),this.filters&&(e=t._applyFilters(e,null,this.filters,!1)),this.postProcess&&(e=this.postProcess(e)),this.afterGet(),e},Qe.prototype.set=function(e){var t=this.scope||this.vm;this.filters&&(e=t._applyFilters(e,this.value,this.filters,!0));try{this.setter.call(t,t,e)}catch(i){"production"!==n.env.NODE_ENV&&ji.warnExpressionErrors&&Di('Error when evaluating setter "'+this.expression+'": '+i.toString(),this.vm)}var o=t.$forContext;if(o&&o.alias===this.expression){if(o.filters)return void("production"!==n.env.NODE_ENV&&Di("It seems you are using two-way binding on a v-for alias ("+this.expression+"), and the v-for has filters. This will not work properly. Either remove the filters or use an array of objects and bind to object properties instead.",this.vm));o._withLock(function(){t.$key?o.rawValue[t.$key]=e:o.rawValue.$set(t.$index,e)})}},Qe.prototype.beforeGet=function(){Ee.target=this},Qe.prototype.addDep=function(e){var t=e.id;this.newDepIds.has(t)||(this.newDepIds.add(t),this.newDeps.push(e),this.depIds.has(t)||e.addSub(this))},Qe.prototype.afterGet=function(){Ee.target=null;for(var e=this.deps.length;e--;){var t=this.deps[e];this.newDepIds.has(t.id)||t.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},Qe.prototype.update=function(e){this.lazy?this.dirty=!0:this.sync||!ji.async?this.run():(this.shallow=this.queued?!!e&&this.shallow:!!e,this.queued=!0,"production"!==n.env.NODE_ENV&&ji.debug&&(this.prevError=new Error("[vue] async stack trace")),Je(this))},Qe.prototype.run=function(){if(this.active){var e=this.get();if(e!==this.value||(m(e)||this.deep)&&!this.shallow){var t=this.value;this.value=e;var i=this.prevError;if("production"!==n.env.NODE_ENV&&ji.debug&&i){this.prevError=null;try{this.cb.call(this.vm,e,t)}catch(o){throw oi(function(){throw i},0),o}}else this.cb.call(this.vm,e,t)}this.queued=this.shallow=!1}},Qe.prototype.evaluate=function(){var e=Ee.target;this.value=this.get(),this.dirty=!1,Ee.target=e},Qe.prototype.depend=function(){for(var e=this.deps.length;e--;)this.deps[e].depend()},Qe.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||this.vm._vForRemoving||this.vm._watchers.$remove(this);for(var e=this.deps.length;e--;)this.deps[e].removeSub(this);this.active=!1,this.vm=this.cb=this.value=null}};var Do=new ri,So={bind:function(){this.attr=3===this.el.nodeType?"data":"textContent"},update:function(e){this.el[this.attr]=c(e)}},Vo=new $(1e3),Po=new $(1e3),Ro={efault:[0,"",""],legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"]};Ro.td=Ro.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Ro.option=Ro.optgroup=[1,'<select multiple="multiple">',"</select>"],Ro.thead=Ro.tbody=Ro.colgroup=Ro.caption=Ro.tfoot=[1,"<table>","</table>"],Ro.g=Ro.defs=Ro.symbol=Ro.use=Ro.image=Ro.text=Ro.circle=Ro.ellipse=Ro.line=Ro.path=Ro.polygon=Ro.polyline=Ro.rect=[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:ev="http://www.w3.org/2001/xml-events"version="1.1">',"</svg>"];var Fo=/<([\w:-]+)/,Mo=/&#?\w+?;/,Io=/<!--/,Lo=function(){if(zn){var e=document.createElement("div");return e.innerHTML="<template>1</template>",!e.cloneNode(!0).firstChild.innerHTML}return!1}(),Ho=function(){if(zn){var e=document.createElement("textarea");return e.placeholder="t","t"===e.cloneNode(!0).value}return!1}(),zo=Object.freeze({cloneNode:Xe,parseTemplate:et}),Bo={bind:function(){8===this.el.nodeType&&(this.nodes=[],this.anchor=se("v-html"),Y(this.el,this.anchor))},update:function(e){e=c(e),this.nodes?this.swap(e):this.el.innerHTML=e},swap:function(e){for(var t=this.nodes.length;t--;)J(this.nodes[t]);var n=et(e,!0,!0);this.nodes=_(n.childNodes),W(n,this.anchor)}};tt.prototype.callHook=function(e){var t,n;for(t=0,n=this.childFrags.length;t<n;t++)this.childFrags[t].callHook(e);for(t=0,n=this.children.length;t<n;t++)e(this.children[t])},tt.prototype.beforeRemove=function(){var e,t;for(e=0,t=this.childFrags.length;e<t;e++)this.childFrags[e].beforeRemove(!1);for(e=0,t=this.children.length;e<t;e++)this.children[e].$destroy(!1,!0);var n=this.unlink.dirs;for(e=0,t=n.length;e<t;e++)n[e]._watcher&&n[e]._watcher.teardown()},tt.prototype.destroy=function(){this.parentFrag&&this.parentFrag.childFrags.$remove(this),this.node.__v_frag=null,this.unlink()};var Uo=new $(5e3);ct.prototype.create=function(e,t,n){var i=Xe(this.template);return new tt(this.linker,this.vm,i,e,t,n)};var Wo=700,qo=800,Jo=850,Qo=1100,Yo=1500,Go=1500,Ko=1750,Zo=2100,Xo=2200,er=2300,tr=0,nr={priority:Xo,terminal:!0,params:["track-by","stagger","enter-stagger","leave-stagger"],bind:function(){var e=this.expression.match(/(.*) (?:in|of) (.*)/);if(e){var t=e[1].match(/\((.*),(.*)\)/);t?(this.iterator=t[1].trim(),this.alias=t[2].trim()):this.alias=e[1].trim(),this.expression=e[2]}if(!this.alias)return void("production"!==n.env.NODE_ENV&&Di('Invalid v-for expression "'+this.descriptor.raw+'": alias is required.',this.vm));this.id="__v-for__"+ ++tr;var i=this.el.tagName;this.isOption=("OPTION"===i||"OPTGROUP"===i)&&"SELECT"===this.el.parentNode.tagName,this.start=se("v-for-start"),this.end=se("v-for-end"),Y(this.el,this.end),W(this.start,this.end),this.cache=Object.create(null),this.factory=new ct(this.vm,this.el)},update:function(e){this.diff(e),this.updateRef(),this.updateModel()},diff:function(e){var t,n,i,o,s,a,c=e[0],l=this.fromObject=m(c)&&r(c,"$key")&&r(c,"$value"),h=this.params.trackBy,u=this.frags,f=this.frags=new Array(e.length),p=this.alias,d=this.iterator,v=this.start,y=this.end,_=H(v),b=!u;for(t=0,n=e.length;t<n;t++)c=e[t],o=l?c.$key:null,s=l?c.$value:c,a=!m(s),i=!b&&this.getCachedFrag(s,t,o),i?(i.reused=!0,i.scope.$index=t,o&&(i.scope.$key=o),d&&(i.scope[d]=null!==o?o:t),(h||l||a)&&we(function(){i.scope[p]=s})):(i=this.create(s,p,t,o),i.fresh=!b),f[t]=i,b&&i.before(y);if(!b){var g=0,E=u.length-f.length;for(this.vm._vForRemoving=!0,t=0,n=u.length;t<n;t++)i=u[t],i.reused||(this.deleteCachedFrag(i),this.remove(i,g++,E,_));this.vm._vForRemoving=!1,g&&(this.vm._watchers=this.vm._watchers.filter(function(e){return e.active}));var w,x,k,C=0;for(t=0,n=f.length;t<n;t++)i=f[t],w=f[t-1],x=w?w.staggerCb?w.staggerAnchor:w.end||w.node:v,i.reused&&!i.staggerCb?(k=lt(i,v,this.id),k===w||k&&lt(k,v,this.id)===w||this.move(i,x)):this.insert(i,C++,x,_),i.reused=i.fresh=!1}},create:function(e,t,n,i){var o=this._host,r=this._scope||this.vm,s=Object.create(r);s.$refs=Object.create(r.$refs),s.$els=Object.create(r.$els),s.$parent=r,s.$forContext=this,we(function(){Ne(s,t,e)}),Ne(s,"$index",n),i?Ne(s,"$key",i):s.$key&&E(s,"$key",null),this.iterator&&Ne(s,this.iterator,null!==i?i:n);var a=this.factory.create(o,s,this._frag);return a.forId=this.id,this.cacheFrag(e,a,n,i),a},updateRef:function(){var e=this.descriptor.ref;if(e){var t,n=(this._scope||this.vm).$refs;this.fromObject?(t={},this.frags.forEach(function(e){t[e.scope.$key]=ht(e)})):t=this.frags.map(ht),n[e]=t}},updateModel:function(){if(this.isOption){var e=this.start.parentNode,t=e&&e.__v_model;t&&t.forceUpdate()}},insert:function(e,t,n,i){e.staggerCb&&(e.staggerCb.cancel(),e.staggerCb=null);var o=this.getStagger(e,t,null,"enter");if(i&&o){var r=e.staggerAnchor;r||(r=e.staggerAnchor=se("stagger-anchor"),r.__v_frag=e),q(r,n);var s=e.staggerCb=k(function(){e.staggerCb=null,e.before(r),J(r)});setTimeout(s,o)}else{var a=n.nextSibling;a||(q(this.end,n),a=this.end),e.before(a)}},remove:function(e,t,n,i){if(e.staggerCb)return e.staggerCb.cancel(),void(e.staggerCb=null);var o=this.getStagger(e,t,n,"leave");if(i&&o){var r=e.staggerCb=k(function(){e.staggerCb=null,e.remove()});setTimeout(r,o)}else e.remove()},move:function(e,t){t.nextSibling||this.end.parentNode.appendChild(this.end),e.before(t.nextSibling,!1)},cacheFrag:function(e,t,i,o){var s,a=this.params.trackBy,c=this.cache,l=!m(e);o||a||l?(s=ft(i,o,e,a),c[s]?"$index"!==a&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):c[s]=t):(s=this.id,r(e,s)?null===e[s]?e[s]=t:"production"!==n.env.NODE_ENV&&this.warnDuplicate(e):Object.isExtensible(e)?E(e,s,t):"production"!==n.env.NODE_ENV&&Di("Frozen v-for objects cannot be automatically tracked, make sure to provide a track-by key.")),t.raw=e;
},getCachedFrag:function(e,t,i){var o,r=this.params.trackBy,s=!m(e);if(i||r||s){var a=ft(t,i,e,r);o=this.cache[a]}else o=e[this.id];return o&&(o.reused||o.fresh)&&"production"!==n.env.NODE_ENV&&this.warnDuplicate(e),o},deleteCachedFrag:function(e){var t=e.raw,n=this.params.trackBy,i=e.scope,o=i.$index,s=r(i,"$key")&&i.$key,a=!m(t);if(n||s||a){var c=ft(o,s,t,n);this.cache[c]=null}else t[this.id]=null,e.raw=null},getStagger:function(e,t,n,i){i+="Stagger";var o=e.node.__v_trans,r=o&&o.hooks,s=r&&(r[i]||r.stagger);return s?s.call(e,t,n):t*parseInt(this.params[i]||this.params.stagger,10)},_preProcess:function(e){return this.rawValue=e,e},_postProcess:function(e){if(Ln(e))return e;if(g(e)){for(var t,n=Object.keys(e),i=n.length,o=new Array(i);i--;)t=n[i],o[i]={$key:t,$value:e[t]};return o}return"number"!=typeof e||isNaN(e)||(e=ut(e)),e||[]},unbind:function(){if(this.descriptor.ref&&((this._scope||this.vm).$refs[this.descriptor.ref]=null),this.frags)for(var e,t=this.frags.length;t--;)e=this.frags[t],this.deleteCachedFrag(e),e.destroy()}};"production"!==n.env.NODE_ENV&&(nr.warnDuplicate=function(e){Di('Duplicate value found in v-for="'+this.descriptor.raw+'": '+JSON.stringify(e)+'. Use track-by="$index" if you are expecting duplicate values.',this.vm)});var ir={priority:Zo,terminal:!0,bind:function(){var e=this.el;if(e.__vue__)"production"!==n.env.NODE_ENV&&Di('v-if="'+this.expression+'" cannot be used on an instance root element.',this.vm),this.invalid=!0;else{var t=e.nextElementSibling;t&&null!==z(t,"v-else")&&(J(t),this.elseEl=t),this.anchor=se("v-if"),Y(e,this.anchor)}},update:function(e){this.invalid||(e?this.frag||this.insert():this.remove())},insert:function(){this.elseFrag&&(this.elseFrag.remove(),this.elseFrag=null),this.factory||(this.factory=new ct(this.vm,this.el)),this.frag=this.factory.create(this._host,this._scope,this._frag),this.frag.before(this.anchor)},remove:function(){this.frag&&(this.frag.remove(),this.frag=null),this.elseEl&&!this.elseFrag&&(this.elseFactory||(this.elseFactory=new ct(this.elseEl._context||this.vm,this.elseEl)),this.elseFrag=this.elseFactory.create(this._host,this._scope,this._frag),this.elseFrag.before(this.anchor))},unbind:function(){this.frag&&this.frag.destroy(),this.elseFrag&&this.elseFrag.destroy()}},or={bind:function(){var e=this.el.nextElementSibling;e&&null!==z(e,"v-else")&&(this.elseEl=e)},update:function(e){this.apply(this.el,e),this.elseEl&&this.apply(this.elseEl,!e)},apply:function(e,t){function n(){e.style.display=t?"":"none"}H(e)?I(e,t?1:-1,n,this.vm):n()}},rr={bind:function(){var e=this,t=this.el,n="range"===t.type,i=this.params.lazy,o=this.params.number,r=this.params.debounce,s=!1;if(Jn||n||(this.on("compositionstart",function(){s=!0}),this.on("compositionend",function(){s=!1,i||e.listener()})),this.focused=!1,n||i||(this.on("focus",function(){e.focused=!0}),this.on("blur",function(){e.focused=!1,e._frag&&!e._frag.inserted||e.rawListener()})),this.listener=this.rawListener=function(){if(!s&&e._bound){var i=o||n?l(t.value):t.value;e.set(i),oi(function(){e._bound&&!e.focused&&e.update(e._watcher.value)})}},r&&(this.listener=w(this.listener,r)),this.hasjQuery="function"==typeof jQuery,this.hasjQuery){var a=jQuery.fn.on?"on":"bind";jQuery(t)[a]("change",this.rawListener),i||jQuery(t)[a]("input",this.listener)}else this.on("change",this.rawListener),i||this.on("input",this.listener);!i&&qn&&(this.on("cut",function(){oi(e.listener)}),this.on("keyup",function(t){46!==t.keyCode&&8!==t.keyCode||e.listener()})),(t.hasAttribute("value")||"TEXTAREA"===t.tagName&&t.value.trim())&&(this.afterBind=this.listener)},update:function(e){e=c(e),e!==this.el.value&&(this.el.value=e)},unbind:function(){var e=this.el;if(this.hasjQuery){var t=jQuery.fn.off?"off":"unbind";jQuery(e)[t]("change",this.listener),jQuery(e)[t]("input",this.listener)}}},sr={bind:function(){var e=this,t=this.el;this.getValue=function(){if(t.hasOwnProperty("_value"))return t._value;var n=t.value;return e.params.number&&(n=l(n)),n},this.listener=function(){e.set(e.getValue())},this.on("change",this.listener),t.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){this.el.checked=C(e,this.getValue())}},ar={bind:function(){var e=this,t=this,n=this.el;this.forceUpdate=function(){t._watcher&&t.update(t._watcher.get())};var i=this.multiple=n.hasAttribute("multiple");this.listener=function(){var e=pt(n,i);e=t.params.number?Ln(e)?e.map(l):l(e):e,t.set(e)},this.on("change",this.listener);var o=pt(n,i,!0);(i&&o.length||!i&&null!==o)&&(this.afterBind=this.listener),this.vm.$on("hook:attached",function(){oi(e.forceUpdate)}),H(n)||oi(this.forceUpdate)},update:function(e){var t=this.el;t.selectedIndex=-1;for(var n,i,o=this.multiple&&Ln(e),r=t.options,s=r.length;s--;)n=r[s],i=n.hasOwnProperty("_value")?n._value:n.value,n.selected=o?dt(e,i)>-1:C(e,i)},unbind:function(){this.vm.$off("hook:attached",this.forceUpdate)}},cr={bind:function(){function e(){var e=n.checked;return e&&n.hasOwnProperty("_trueValue")?n._trueValue:!e&&n.hasOwnProperty("_falseValue")?n._falseValue:e}var t=this,n=this.el;this.getValue=function(){return n.hasOwnProperty("_value")?n._value:t.params.number?l(n.value):n.value},this.listener=function(){var i=t._watcher.value;if(Ln(i)){var o=t.getValue();n.checked?x(i,o)<0&&i.push(o):i.$remove(o)}else t.set(e())},this.on("change",this.listener),n.hasAttribute("checked")&&(this.afterBind=this.listener)},update:function(e){var t=this.el;Ln(e)?t.checked=x(e,this.getValue())>-1:t.hasOwnProperty("_trueValue")?t.checked=C(e,t._trueValue):t.checked=!!e}},lr={text:rr,radio:sr,select:ar,checkbox:cr},hr={priority:qo,twoWay:!0,handlers:lr,params:["lazy","number","debounce"],bind:function(){this.checkFilters(),this.hasRead&&!this.hasWrite&&"production"!==n.env.NODE_ENV&&Di('It seems you are using a read-only filter with v-model="'+this.descriptor.raw+'". You might want to use a two-way filter to ensure correct behavior.',this.vm);var e,t=this.el,i=t.tagName;if("INPUT"===i)e=lr[t.type]||lr.text;else if("SELECT"===i)e=lr.select;else{if("TEXTAREA"!==i)return void("production"!==n.env.NODE_ENV&&Di("v-model does not support element type: "+i,this.vm));e=lr.text}t.__v_model=this,e.bind.call(this),this.update=e.update,this._unbind=e.unbind},checkFilters:function(){var e=this.filters;if(e)for(var t=e.length;t--;){var n=ge(this.vm.$options,"filters",e[t].name);("function"==typeof n||n.read)&&(this.hasRead=!0),n.write&&(this.hasWrite=!0)}},unbind:function(){this.el.__v_model=null,this._unbind&&this._unbind()}},ur={esc:27,tab:9,enter:13,space:32,"delete":[8,46],up:38,left:37,right:39,down:40},fr={priority:Wo,acceptStatement:!0,keyCodes:ur,bind:function(){if("IFRAME"===this.el.tagName&&"load"!==this.arg){var e=this;this.iframeBind=function(){G(e.el.contentWindow,e.arg,e.handler,e.modifiers.capture)},this.on("load",this.iframeBind)}},update:function(e){if(this.descriptor.raw||(e=function(){}),"function"!=typeof e)return void("production"!==n.env.NODE_ENV&&Di("v-on:"+this.arg+'="'+this.expression+'" expects a function value, got '+e,this.vm));this.modifiers.stop&&(e=yt(e)),this.modifiers.prevent&&(e=_t(e)),this.modifiers.self&&(e=bt(e));var t=Object.keys(this.modifiers).filter(function(e){return"stop"!==e&&"prevent"!==e&&"self"!==e&&"capture"!==e});t.length&&(e=vt(e,t)),this.reset(),this.handler=e,this.iframeBind?this.iframeBind():G(this.el,this.arg,this.handler,this.modifiers.capture)},reset:function(){var e=this.iframeBind?this.el.contentWindow:this.el;this.handler&&K(e,this.arg,this.handler)},unbind:function(){this.reset()}},pr=["-webkit-","-moz-","-ms-"],dr=["Webkit","Moz","ms"],vr=/!important;?$/,yr=Object.create(null),_r=null,br={deep:!0,update:function(e){"string"==typeof e?this.el.style.cssText=e:Ln(e)?this.handleObject(e.reduce(b,{})):this.handleObject(e||{})},handleObject:function(e){var t,n,i=this.cache||(this.cache={});for(t in i)t in e||(this.handleSingle(t,null),delete i[t]);for(t in e)n=e[t],n!==i[t]&&(i[t]=n,this.handleSingle(t,n))},handleSingle:function(e,t){if(e=mt(e))if(null!=t&&(t+=""),t){var i=vr.test(t)?"important":"";i?("production"!==n.env.NODE_ENV&&Di("It's probably a bad idea to use !important with inline rules. This feature will be deprecated in a future version of Vue."),t=t.replace(vr,"").trim(),this.el.style.setProperty(e.kebab,t,i)):this.el.style[e.camel]=t}else this.el.style[e.camel]=""}},mr="http://www.w3.org/1999/xlink",gr=/^xlink:/,Er=/^v-|^:|^@|^(?:is|transition|transition-mode|debounce|track-by|stagger|enter-stagger|leave-stagger)$/,wr=/^(?:value|checked|selected|muted)$/,xr=/^(?:draggable|contenteditable|spellcheck)$/,kr={value:"_value","true-value":"_trueValue","false-value":"_falseValue"},Cr={priority:Jo,bind:function(){var e=this.arg,t=this.el.tagName;e||(this.deep=!0);var i=this.descriptor,o=i.interp;if(o&&(i.hasOneTime&&(this.expression=S(o,this._scope||this.vm)),(Er.test(e)||"name"===e&&("PARTIAL"===t||"SLOT"===t))&&("production"!==n.env.NODE_ENV&&Di(e+'="'+i.raw+'": attribute interpolation is not allowed in Vue.js directives and special attributes.',this.vm),this.el.removeAttribute(e),this.invalid=!0),"production"!==n.env.NODE_ENV)){var r=e+'="'+i.raw+'": ';"src"===e&&Di(r+'interpolation in "src" attribute will cause a 404 request. Use v-bind:src instead.',this.vm),"style"===e&&Di(r+'interpolation in "style" attribute will cause the attribute to be discarded in Internet Explorer. Use v-bind:style instead.',this.vm)}},update:function(e){if(!this.invalid){var t=this.arg;this.arg?this.handleSingle(t,e):this.handleObject(e||{})}},handleObject:br.handleObject,handleSingle:function(e,t){var n=this.el,i=this.descriptor.interp;if(this.modifiers.camel&&(e=f(e)),!i&&wr.test(e)&&e in n){var o="value"===e&&null==t?"":t;n[e]!==o&&(n[e]=o)}var r=kr[e];if(!i&&r){n[r]=t;var s=n.__v_model;s&&s.listener()}return"value"===e&&"TEXTAREA"===n.tagName?void n.removeAttribute(e):void(xr.test(e)?n.setAttribute(e,t?"true":"false"):null!=t&&t!==!1?"class"===e?(n.__v_trans&&(t+=" "+n.__v_trans.id+"-transition"),X(n,t)):gr.test(e)?n.setAttributeNS(mr,e,t===!0?"":t):n.setAttribute(e,t===!0?"":t):n.removeAttribute(e))}},$r={priority:Yo,bind:function(){if(this.arg){var e=this.id=f(this.arg),t=(this._scope||this.vm).$els;r(t,e)?t[e]=this.el:Ne(t,e,this.el)}},unbind:function(){var e=(this._scope||this.vm).$els;e[this.id]===this.el&&(e[this.id]=null)}},Nr={bind:function(){"production"!==n.env.NODE_ENV&&Di("v-ref:"+this.arg+" must be used on a child component. Found on <"+this.el.tagName.toLowerCase()+">.",this.vm)}},Or={bind:function(){var e=this.el;this.vm.$once("pre-hook:compiled",function(){e.removeAttribute("v-cloak")})}},Ar={text:So,html:Bo,"for":nr,"if":ir,show:or,model:hr,on:fr,bind:Cr,el:$r,ref:Nr,cloak:Or},Tr={deep:!0,update:function(e){e?"string"==typeof e?this.setClass(e.trim().split(/\s+/)):this.setClass(Et(e)):this.cleanup()},setClass:function(e){this.cleanup(e);for(var t=0,n=e.length;t<n;t++){var i=e[t];i&&wt(this.el,i,ee)}this.prevKeys=e},cleanup:function(e){var t=this.prevKeys;if(t)for(var n=t.length;n--;){var i=t[n];(!e||e.indexOf(i)<0)&&wt(this.el,i,te)}}},jr={priority:Go,params:["keep-alive","transition-mode","inline-template"],bind:function(){this.el.__vue__?"production"!==n.env.NODE_ENV&&Di('cannot mount component "'+this.expression+'" on already mounted element: '+this.el):(this.keepAlive=this.params.keepAlive,this.keepAlive&&(this.cache={}),this.params.inlineTemplate&&(this.inlineTemplate=ne(this.el,!0)),this.pendingComponentCb=this.Component=null,this.pendingRemovals=0,this.pendingRemovalCb=null,this.anchor=se("v-component"),Y(this.el,this.anchor),this.el.removeAttribute("is"),this.el.removeAttribute(":is"),this.descriptor.ref&&this.el.removeAttribute("v-ref:"+d(this.descriptor.ref)),this.literal&&this.setComponent(this.expression))},update:function(e){this.literal||this.setComponent(e)},setComponent:function(e,t){if(this.invalidatePending(),e){var n=this;this.resolveComponent(e,function(){n.mountComponent(t)})}else this.unbuild(!0),this.remove(this.childVM,t),this.childVM=null},resolveComponent:function(e,t){var n=this;this.pendingComponentCb=k(function(i){n.ComponentName=i.options.name||("string"==typeof e?e:null),n.Component=i,t()}),this.vm._resolveComponent(e,this.pendingComponentCb)},mountComponent:function(e){this.unbuild(!0);var t=this,n=this.Component.options.activate,i=this.getCached(),o=this.build();n&&!i?(this.waitingFor=o,xt(n,o,function(){t.waitingFor===o&&(t.waitingFor=null,t.transition(o,e))})):(i&&o._updateRef(),this.transition(o,e))},invalidatePending:function(){this.pendingComponentCb&&(this.pendingComponentCb.cancel(),this.pendingComponentCb=null)},build:function(e){var t=this.getCached();if(t)return t;if(this.Component){var i={name:this.ComponentName,el:Xe(this.el),template:this.inlineTemplate,parent:this._host||this.vm,_linkerCachable:!this.inlineTemplate,_ref:this.descriptor.ref,_asComponent:!0,_isRouterView:this._isRouterView,_context:this.vm,_scope:this._scope,_frag:this._frag};e&&b(i,e);var o=new this.Component(i);return this.keepAlive&&(this.cache[this.Component.cid]=o),"production"!==n.env.NODE_ENV&&this.el.hasAttribute("transition")&&o._isFragment&&Di("Transitions will not work on a fragment instance. Template: "+o.$options.template,o),o}},getCached:function(){return this.keepAlive&&this.cache[this.Component.cid]},unbuild:function(e){this.waitingFor&&(this.keepAlive||this.waitingFor.$destroy(),this.waitingFor=null);var t=this.childVM;return!t||this.keepAlive?void(t&&(t._inactive=!0,t._updateRef(!0))):void t.$destroy(!1,e)},remove:function(e,t){var n=this.keepAlive;if(e){this.pendingRemovals++,this.pendingRemovalCb=t;var i=this;e.$remove(function(){i.pendingRemovals--,n||e._cleanup(),!i.pendingRemovals&&i.pendingRemovalCb&&(i.pendingRemovalCb(),i.pendingRemovalCb=null)})}else t&&t()},transition:function(e,t){var n=this,i=this.childVM;switch(i&&(i._inactive=!0),e._inactive=!1,this.childVM=e,n.params.transitionMode){case"in-out":e.$before(n.anchor,function(){n.remove(i,t)});break;case"out-in":n.remove(i,function(){e.$before(n.anchor,t)});break;default:n.remove(i),e.$before(n.anchor,t)}},unbind:function(){if(this.invalidatePending(),this.unbuild(),this.cache){for(var e in this.cache)this.cache[e].$destroy();this.cache=null}}},Dr=ji._propBindingModes,Sr={},Vr=/^[$_a-zA-Z]+[\w$]*$/,Pr=/^[A-Za-z_$][\w$]*(\.[A-Za-z_$][\w$]*|\[[^\[\]]+\])*$/,Rr=ji._propBindingModes,Fr={bind:function(){var e=this.vm,t=e._context,n=this.descriptor.prop,i=n.path,o=n.parentPath,r=n.mode===Rr.TWO_WAY,s=this.parentWatcher=new Qe(t,o,function(t){Ot(e,n,t)},{twoWay:r,filters:n.filters,scope:this._scope});if(Nt(e,n,s.value),r){var a=this;e.$once("pre-hook:created",function(){a.childWatcher=new Qe(e,i,function(e){s.set(e)},{sync:!0})})}},unbind:function(){this.parentWatcher.teardown(),this.childWatcher&&this.childWatcher.teardown()}},Mr=[],Ir=!1,Lr="transition",Hr="animation",zr=Zn+"Duration",Br=ei+"Duration",Ur=zn&&window.requestAnimationFrame,Wr=Ur?function(e){Ur(function(){Ur(e)})}:function(e){setTimeout(e,50)},qr=Ft.prototype;qr.enter=function(e,t){this.cancelPending(),this.callHook("beforeEnter"),this.cb=t,ee(this.el,this.enterClass),e(),this.entered=!1,this.callHookWithCb("enter"),this.entered||(this.cancel=this.hooks&&this.hooks.enterCancelled,Pt(this.enterNextTick))},qr.enterNextTick=function(){var e=this;this.justEntered=!0,Wr(function(){e.justEntered=!1});var t=this.enterDone,n=this.getCssTransitionType(this.enterClass);this.pendingJsCb?n===Lr&&te(this.el,this.enterClass):n===Lr?(te(this.el,this.enterClass),this.setupCssCb(Xn,t)):n===Hr?this.setupCssCb(ti,t):t()},qr.enterDone=function(){this.entered=!0,this.cancel=this.pendingJsCb=null,te(this.el,this.enterClass),this.callHook("afterEnter"),this.cb&&this.cb()},qr.leave=function(e,t){this.cancelPending(),this.callHook("beforeLeave"),this.op=e,this.cb=t,ee(this.el,this.leaveClass),this.left=!1,this.callHookWithCb("leave"),this.left||(this.cancel=this.hooks&&this.hooks.leaveCancelled,this.op&&!this.pendingJsCb&&(this.justEntered?this.leaveDone():Pt(this.leaveNextTick)))},qr.leaveNextTick=function(){var e=this.getCssTransitionType(this.leaveClass);if(e){var t=e===Lr?Xn:ti;this.setupCssCb(t,this.leaveDone)}else this.leaveDone()},qr.leaveDone=function(){this.left=!0,this.cancel=this.pendingJsCb=null,this.op(),te(this.el,this.leaveClass),this.callHook("afterLeave"),this.cb&&this.cb(),this.op=null},qr.cancelPending=function(){this.op=this.cb=null;var e=!1;this.pendingCssCb&&(e=!0,K(this.el,this.pendingCssEvent,this.pendingCssCb),this.pendingCssEvent=this.pendingCssCb=null),this.pendingJsCb&&(e=!0,this.pendingJsCb.cancel(),this.pendingJsCb=null),e&&(te(this.el,this.enterClass),te(this.el,this.leaveClass)),this.cancel&&(this.cancel.call(this.vm,this.el),this.cancel=null)},qr.callHook=function(e){this.hooks&&this.hooks[e]&&this.hooks[e].call(this.vm,this.el)},qr.callHookWithCb=function(e){var t=this.hooks&&this.hooks[e];t&&(t.length>1&&(this.pendingJsCb=k(this[e+"Done"])),t.call(this.vm,this.el,this.pendingJsCb))},qr.getCssTransitionType=function(e){if(!(!Xn||document.hidden||this.hooks&&this.hooks.css===!1||Mt(this.el))){var t=this.type||this.typeCache[e];if(t)return t;var n=this.el.style,i=window.getComputedStyle(this.el),o=n[zr]||i[zr];if(o&&"0s"!==o)t=Lr;else{var r=n[Br]||i[Br];r&&"0s"!==r&&(t=Hr)}return t&&(this.typeCache[e]=t),t}},qr.setupCssCb=function(e,t){this.pendingCssEvent=e;var n=this,i=this.el,o=this.pendingCssCb=function(r){r.target===i&&(K(i,e,o),n.pendingCssEvent=n.pendingCssCb=null,!n.pendingJsCb&&t&&t())};G(i,e,o)};var Jr={priority:Qo,update:function(e,t){var n=this.el,i=ge(this.vm.$options,"transitions",e);e=e||"v",t=t||"v",n.__v_trans=new Ft(n,e,i,this.vm),te(n,t+"-transition"),ee(n,e+"-transition")}},Qr={style:br,"class":Tr,component:jr,prop:Fr,transition:Jr},Yr=/^v-bind:|^:/,Gr=/^v-on:|^@/,Kr=/^v-([^:]+)(?:$|:(.*)$)/,Zr=/\.[^\.]+/g,Xr=/^(v-bind:|:)?transition$/,es=1e3,ts=2e3;on.terminal=!0;var ns=/[^\w\-:\.]/,is=Object.freeze({compile:It,compileAndLinkProps:Ut,compileRoot:Wt,transclude:un,resolveSlots:vn}),os=/^v-on:|^@/;gn.prototype._bind=function(){var e=this.name,t=this.descriptor;if(("cloak"!==e||this.vm._isCompiled)&&this.el&&this.el.removeAttribute){var n=t.attr||"v-"+e;this.el.removeAttribute(n)}var i=t.def;if("function"==typeof i?this.update=i:b(this,i),this._setupParams(),this.bind&&this.bind(),this._bound=!0,this.literal)this.update&&this.update(t.raw);else if((this.expression||this.modifiers)&&(this.update||this.twoWay)&&!this._checkStatement()){var o=this;this.update?this._update=function(e,t){o._locked||o.update(e,t)}:this._update=mn;var r=this._preProcess?y(this._preProcess,this):null,s=this._postProcess?y(this._postProcess,this):null,a=this._watcher=new Qe(this.vm,this.expression,this._update,{filters:this.filters,twoWay:this.twoWay,deep:this.deep,preProcess:r,postProcess:s,scope:this._scope});this.afterBind?this.afterBind():this.update&&this.update(a.value)}},gn.prototype._setupParams=function(){if(this.params){var e=this.params;this.params=Object.create(null);for(var t,n,i,o=e.length;o--;)t=d(e[o]),i=f(t),n=B(this.el,t),null!=n?this._setupParamWatcher(i,n):(n=z(this.el,t),null!=n&&(this.params[i]=""===n||n))}},gn.prototype._setupParamWatcher=function(e,t){var n=this,i=!1,o=(this._scope||this.vm).$watch(t,function(t,o){if(n.params[e]=t,i){var r=n.paramWatchers&&n.paramWatchers[e];r&&r.call(n,t,o)}else i=!0},{immediate:!0,user:!1});(this._paramUnwatchFns||(this._paramUnwatchFns=[])).push(o)},gn.prototype._checkStatement=function(){var e=this.expression;if(e&&this.acceptStatement&&!Be(e)){var t=ze(e).get,n=this._scope||this.vm,i=function(e){n.$event=e,t.call(n,n),n.$event=null};return this.filters&&(i=n._applyFilters(i,null,this.filters)),this.update(i),!0}},gn.prototype.set=function(e){this.twoWay?this._withLock(function(){this._watcher.set(e)}):"production"!==n.env.NODE_ENV&&Di("Directive.set() can only be used inside twoWaydirectives.")},gn.prototype._withLock=function(e){var t=this;t._locked=!0,e.call(t),oi(function(){t._locked=!1})},gn.prototype.on=function(e,t,n){G(this.el,e,t,n),(this._listeners||(this._listeners=[])).push([e,t])},gn.prototype._teardown=function(){if(this._bound){this._bound=!1,this.unbind&&this.unbind(),this._watcher&&this._watcher.teardown();var e,t=this._listeners;if(t)for(e=t.length;e--;)K(this.el,t[e][0],t[e][1]);var i=this._paramUnwatchFns;if(i)for(e=i.length;e--;)i[e]();"production"!==n.env.NODE_ENV&&this.el&&this.el._vue_directives.$remove(this),this.vm=this.el=this._watcher=this._listeners=null}};var rs=/[^|]\|[^|]/;Oe(Nn),_n(Nn),bn(Nn),En(Nn),wn(Nn),xn(Nn),kn(Nn),Cn(Nn),$n(Nn);var ss={priority:er,params:["name"],bind:function(){var e=this.params.name||"default",t=this.vm._slotContents&&this.vm._slotContents[e];t&&t.hasChildNodes()?this.compile(t.cloneNode(!0),this.vm._context,this.vm):this.fallback()},compile:function(e,t,n){if(e&&t){if(this.el.hasChildNodes()&&1===e.childNodes.length&&1===e.childNodes[0].nodeType&&e.childNodes[0].hasAttribute("v-if")){var i=document.createElement("template");i.setAttribute("v-else",""),i.innerHTML=this.el.innerHTML,i._context=this.vm,e.appendChild(i)}var o=n?n._scope:this._scope;this.unlink=t.$compile(e,n,o,this._frag)}e?Y(this.el,e):J(this.el)},fallback:function(){this.compile(ne(this.el,!0),this.vm)},unbind:function(){this.unlink&&this.unlink()}},as={priority:Ko,params:["name"],paramWatchers:{name:function(e){ir.remove.call(this),e&&this.insert(e)}},bind:function(){this.anchor=se("v-partial"),Y(this.el,this.anchor),this.insert(this.params.name)},insert:function(e){var t=ge(this.vm.$options,"partials",e,!0);t&&(this.factory=new ct(this.vm,t),ir.insert.call(this))},unbind:function(){this.frag&&this.frag.destroy()}},cs={slot:ss,partial:as},ls=nr._postProcess,hs=/(\d{3})(?=\d)/g,us={orderBy:Tn,filterBy:An,limitBy:On,json:{read:function(e,t){return"string"==typeof e?e:JSON.stringify(e,null,arguments.length>1?t:2)},write:function(e){try{return JSON.parse(e)}catch(t){return e}}},capitalize:function(e){return e||0===e?(e=e.toString(),e.charAt(0).toUpperCase()+e.slice(1)):""},uppercase:function(e){return e||0===e?e.toString().toUpperCase():""},lowercase:function(e){return e||0===e?e.toString().toLowerCase():""},currency:function(e,t,n){if(e=parseFloat(e),!isFinite(e)||!e&&0!==e)return"";t=null!=t?t:"$",n=null!=n?n:2;var i=Math.abs(e).toFixed(n),o=n?i.slice(0,-1-n):i,r=o.length%3,s=r>0?o.slice(0,r)+(o.length>3?",":""):"",a=n?i.slice(-1-n):"",c=e<0?"-":"";return c+t+s+o.slice(r).replace(hs,"$1,")+a},pluralize:function(e){var t=_(arguments,1),n=t.length;if(n>1){var i=e%10-1;return i in t?t[i]:t[n-1]}return t[0]+(1===e?"":"s")},debounce:function(e,t){if(e)return t||(t=300),w(e,t)}};Dn(Nn),Nn.version="1.0.26",setTimeout(function(){ji.devtools&&(Bn?Bn.emit("init",Nn):"production"!==n.env.NODE_ENV&&zn&&/Chrome\/\d+/.test(window.navigator.userAgent)&&console.log("Download the Vue Devtools for a better development experience:\nhttps://github.com/vuejs/vue-devtools"))},0),e.exports=Nn}).call(t,function(){return this}(),n(19))},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vdnVlLmpzIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBjODUwM2VmZGJmMmU2ZmUwNWQzNSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL21haW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19yb290LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2lzQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldE5hdGl2ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc09iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc09iamVjdExpa2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX0xpc3RDYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYXNzb2NJbmRleE9mLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19nZXRNYXBEYXRhLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc0tleS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbmF0aXZlQ3JlYXRlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL190b0tleS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc0xlbmd0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc1N5bWJvbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fTWFwQ2FjaGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNGdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly8vLi9+L3Byb2Nlc3MvYnJvd3Nlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlyZWN0aXZlcy9zZXQtZm9jdXMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL21peGlucy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fTWFwLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19TdGFjay5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fU3ltYm9sLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlR2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSGFzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSXNFcXVhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVByb3BlcnR5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19jYXN0UGF0aC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZXF1YWxBcnJheXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2lzSG9zdE9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNJbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNTdHJpY3RDb21wYXJhYmxlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19tYXRjaGVzU3RyaWN0Q29tcGFyYWJsZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fdG9Tb3VyY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZGVmZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNBcmd1bWVudHMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNBcnJheUxpa2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvaXNTdHJpbmcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gva2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC90b0ludGVnZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvdG9OdW1iZXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9WdWUvZGlzdC92dWUuY29tbW9uLmpzIiwid2VicGFjazovLy9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vL2FsZXJ0LXBhZ2UudnVlIiwid2VicGFjazovLy9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vbGVnYWwtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vL292ZXJsYXktcGFnZS52dWUiLCJ3ZWJwYWNrOi8vL3NwaW5uZXItcGFnZS52dWUiLCJ3ZWJwYWNrOi8vL3N0ZXAtdHJhY2tlci1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vdGFicy1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vaW5kZXgudnVlPzllODIiLCJ3ZWJwYWNrOi8vL2luZGV4LnZ1ZT85YTk1Iiwid2VicGFjazovLy9sZWdhbC1jb250YWluZXIudnVlIiwid2VicGFjazovLy9sZWdhbC1jb3VudGVyLnZ1ZSIsIndlYnBhY2s6Ly8vb3ZlcmxheS1jb250YWluZXIudnVlIiwid2VicGFjazovLy9vdmVybGF5LnZ1ZSIsIndlYnBhY2s6Ly8vaW5kZXgudnVlP2RhYmIiLCJ3ZWJwYWNrOi8vL2luZGV4LnZ1ZT8zMWViIiwid2VicGFjazovLy90YWIudnVlIiwid2VicGFjazovLy90YWJzLnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3JvdXRlcy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGlyZWN0aXZlcy9vdmVybGF5LW9wZW5lci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWFpbi5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWl4aW5zL2V2ZW50cy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbWl4aW5zL3hoci1yZXNwb25zZS5qcyIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZT84M2Q0Iiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9pbmRleC52dWU/ZDllYSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvc2l0ZS1oZWFkZXIvaW5kZXgudnVlPzViZTUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9pbmRleC52dWU/NWM4YiIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9hbGVydC9pbmRleC52dWU/Yzk5NCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWU/NjVjNyIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIudnVlPzQ0NmUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWU/ZTAzMSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZT8zZTgzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS52dWU/YjU3NCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL2luZGV4LnZ1ZT83ZjIzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3N0ZXAtdHJhY2tlci9pbmRleC52dWU/ZGVmZCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy52dWU/YjY0ZiIsIndlYnBhY2s6Ly8vLi9+L2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi93aGF0d2ctZmV0Y2gvZmV0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL2xvZ28ucG5nIiwid2VicGFjazovLy8uL34vbG9kYXNoL19EYXRhVmlldy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fSGFzaC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fUHJvbWlzZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fU2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19TZXRDYWNoZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fVWludDhBcnJheS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fV2Vha01hcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYXBwbHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2FycmF5U29tZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZURlbGF5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlRmluZEluZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlSGFzSW4uanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VJc0VxdWFsRGVlcC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZUlzTWF0Y2guanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VJc05hdGl2ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZUl0ZXJhdGVlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19iYXNlS2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZU1hdGNoZXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VNYXRjaGVzUHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VQcm9wZXJ0eURlZXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2Jhc2VUaW1lcy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fYmFzZVRvU3RyaW5nLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19jaGVja0dsb2JhbC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fY29yZUpzRGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZXF1YWxCeVRhZy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZXF1YWxPYmplY3RzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19nZXRMZW5ndGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldE1hdGNoRGF0YS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fZ2V0UHJvdG90eXBlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19nZXRUYWcuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2dldFZhbHVlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19oYXNQYXRoLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19oYXNoQ2xlYXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc2hEZWxldGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc2hHZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc2hIYXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2hhc2hTZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2luZGV4S2V5cy5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNLZXlhYmxlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19pc01hc2tlZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9faXNQcm90b3R5cGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2xpc3RDYWNoZUNsZWFyLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19saXN0Q2FjaGVEZWxldGUuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX2xpc3RDYWNoZUdldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbGlzdENhY2hlSGFzLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19saXN0Q2FjaGVTZXQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX21hcENhY2hlQ2xlYXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX21hcENhY2hlRGVsZXRlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19tYXBDYWNoZUdldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fbWFwQ2FjaGVIYXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX21hcENhY2hlU2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19tYXBUb0FycmF5LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19zZXRDYWNoZUFkZC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc2V0Q2FjaGVIYXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3NldFRvQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3N0YWNrQ2xlYXIuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3N0YWNrRGVsZXRlLmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19zdGFja0dldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9fc3RhY2tIYXMuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvX3N0YWNrU2V0LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL19zdHJpbmdUb1BhdGguanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZGVib3VuY2UuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZXEuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvZmluZEluZGV4LmpzIiwid2VicGFjazovLy8uL34vbG9kYXNoL2dldC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9oYXNJbi5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pZGVudGl0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc0FycmF5TGlrZU9iamVjdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9pc1R5cGVkQXJyYXkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvbWVtb2l6ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC9ub3cuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvcHJvcGVydHkuanMiLCJ3ZWJwYWNrOi8vLy4vfi9sb2Rhc2gvcmVzdC5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC90b0Zpbml0ZS5qcyIsIndlYnBhY2s6Ly8vLi9+L2xvZGFzaC90b1N0cmluZy5qcyIsIndlYnBhY2s6Ly8vLi9+L3ByaXNtanMvcHJpc20uanMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9hcGktdGFibGUuaHRtbCIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvc2lkZS1uYXYvc2lkZS1uYXYuaHRtbCIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL2NvbXBvbmVudHMvc2l0ZS1oZWFkZXIvc2l0ZS1oZWFkZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2FsZXJ0LXBhZ2UudnVlPzkxZjMiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZT8wMGM1Iiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvaW5kZXgudnVlPzZjNDUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9sZWdhbC1wYWdlLnZ1ZT83NjhlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3Mvb3ZlcmxheS1wYWdlLnZ1ZT83OGY3Iiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3Mvc3Bpbm5lci1wYWdlLnZ1ZT8wZjUyIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3Mvc3RlcC10cmFja2VyLXBhZ2UudnVlP2YwZWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy90YWJzLXBhZ2UudnVlP2E3ZjIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvYWxlcnQvYWxlcnQuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9jb2xsYXBzYWJsZS1wYW5lbC5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvdW50ZXIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5Lmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc3Bpbm5lci9zcGlubmVyLmh0bWwiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL3N0ZXAtdHJhY2tlci5odG1sIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYi90YWIuaHRtbCIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy5odG1sIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2FsZXJ0LXBhZ2UudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9sZWdhbC1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL292ZXJsYXktcGFnZS52dWUiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy92aWV3cy9zcGlubmVyLXBhZ2UudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3Mvc3RlcC10cmFja2VyLXBhZ2UudnVlIiwid2VicGFjazovLy8uL2Rldi9zcmMvdmlld3MvdGFicy1wYWdlLnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9hbGVydC9pbmRleC52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvY29sbGFwc2FibGUtcGFuZWwvaW5kZXgudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LWNvbnRhaW5lci52dWUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL2luZGV4LnZ1ZSIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvaW5kZXgudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYi90YWIudnVlIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZSIsIndlYnBhY2s6Ly8vLi9+L3Z1ZS1yb3V0ZXIvZGlzdC92dWUtcm91dGVyLmpzIiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlPzc5MjYiLCJ3ZWJwYWNrOi8vLy4vZGV2L3NyYy9jb21wb25lbnRzL3NpZGUtbmF2L2luZGV4LnZ1ZT80YTQ3Iiwid2VicGFjazovLy8uL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWU/NTU2OSIsIndlYnBhY2s6Ly8vLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZT81MjE4Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZT8wMjc1Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZT9kMWM0Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWU/MzU3NiIsIndlYnBhY2s6Ly8vLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZT9lYjM5Iiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlPzE5NzIiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZT9jMzgzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3NwaW5uZXIvaW5kZXgudnVlPzYzMzUiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL2luZGV4LnZ1ZT8wMWUzIiwid2VicGFjazovLy8uL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZT9mOTFmIiwid2VicGFjazovLy8uL34vdnVlL2Rpc3QvdnVlLmNvbW1vbi5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vYW1kLWRlZmluZS5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsInBhcmVudEpzb25wRnVuY3Rpb24iLCJ3aW5kb3ciLCJjaHVua0lkcyIsIm1vcmVNb2R1bGVzIiwiY2h1bmtJZCIsImkiLCJjYWxsYmFja3MiLCJsZW5ndGgiLCJpbnN0YWxsZWRDaHVua3MiLCJwdXNoIiwiYXBwbHkiLCJzaGlmdCIsIjAiLCIxIiwiMiIsImUiLCJjYWxsYmFjayIsInVuZGVmaW5lZCIsImhlYWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwic2NyaXB0IiwiY3JlYXRlRWxlbWVudCIsInR5cGUiLCJjaGFyc2V0IiwiYXN5bmMiLCJzcmMiLCJwIiwiYXBwZW5kQ2hpbGQiLCJtIiwiYyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJvYmoiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsIl9WdWUiLCJfVnVlMiIsIl92dWVSb3V0ZXIiLCJfdnVlUm91dGVyMiIsIl9yb3V0ZXMiLCJfcm91dGVzMiIsIl9oeWJyaWRUaG9yaXVtIiwiX2h5YnJpZFRob3JpdW0yIiwiX3ByaXNtanMiLCJfcHJpc21qczIiLCJfaW5kZXgiLCJfaW5kZXgyIiwiX2luZGV4MyIsIl9pbmRleDQiLCJjb25maWciLCJkZWJ1ZyIsInVzZSIsInJvdXRlciIsIkFwcCIsImV4dGVuZCIsImNvbXBvbmVudHMiLCJTaWRlTmF2IiwiU2l0ZUhlYWRlciIsImRhdGEiLCJsaWdlckVuZFBvaW50IiwibGlnZXJBcHBsaWNhdGlvbktleSIsIm1hcCIsImFmdGVyRWFjaCIsInNldFRpbWVvdXQiLCJoaWdobGlnaHRBbGwiLCJzdGFydCIsImxpc3QiLCJ0b1N0cmluZyIsInJlc3VsdCIsInRoaXMiLCJpdGVtIiwiam9pbiIsIm1lZGlhUXVlcnkiLCJhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzIiwiYWRkU3R5bGVzVG9Eb20iLCJzdHlsZXMiLCJvcHRpb25zIiwiZG9tU3R5bGUiLCJzdHlsZXNJbkRvbSIsInJlZnMiLCJqIiwicGFydHMiLCJhZGRTdHlsZSIsImxpc3RUb1N0eWxlcyIsIm5ld1N0eWxlcyIsImNzcyIsIm1lZGlhIiwic291cmNlTWFwIiwicGFydCIsImluc2VydFN0eWxlRWxlbWVudCIsInN0eWxlRWxlbWVudCIsImdldEhlYWRFbGVtZW50IiwibGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AiLCJzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcCIsImluc2VydEF0IiwibmV4dFNpYmxpbmciLCJpbnNlcnRCZWZvcmUiLCJmaXJzdENoaWxkIiwiRXJyb3IiLCJyZW1vdmVTdHlsZUVsZW1lbnQiLCJwYXJlbnROb2RlIiwicmVtb3ZlQ2hpbGQiLCJpZHgiLCJpbmRleE9mIiwic3BsaWNlIiwiY3JlYXRlU3R5bGVFbGVtZW50IiwidXBkYXRlIiwicmVtb3ZlIiwic2luZ2xldG9uIiwic3R5bGVJbmRleCIsInNpbmdsZXRvbkNvdW50ZXIiLCJzaW5nbGV0b25FbGVtZW50IiwiYXBwbHlUb1NpbmdsZXRvblRhZyIsImJpbmQiLCJhcHBseVRvVGFnIiwibmV3T2JqIiwiaW5kZXgiLCJzdHlsZVNoZWV0IiwiY3NzVGV4dCIsInJlcGxhY2VUZXh0IiwiY3NzTm9kZSIsImNyZWF0ZVRleHROb2RlIiwiY2hpbGROb2RlcyIsInNldEF0dHJpYnV0ZSIsInNvdXJjZXMiLCJidG9hIiwidW5lc2NhcGUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJKU09OIiwic3RyaW5naWZ5IiwibWVtb2l6ZSIsImZuIiwibWVtbyIsImFyZ3VtZW50cyIsImlzT2xkSUUiLCJ0ZXN0IiwibmF2aWdhdG9yIiwidXNlckFnZW50IiwidG9Mb3dlckNhc2UiLCJuZXdMaXN0IiwibWF5UmVtb3ZlIiwidGV4dFN0b3JlIiwicmVwbGFjZW1lbnQiLCJmaWx0ZXIiLCJCb29sZWFuIiwiZ2xvYmFsIiwiY2hlY2tHbG9iYWwiLCJmcmVlR2xvYmFsIiwiZnJlZVNlbGYiLCJzZWxmIiwidGhpc0dsb2JhbCIsInJvb3QiLCJGdW5jdGlvbiIsImlzQXJyYXkiLCJBcnJheSIsIl9fdnVlX3NjcmlwdF9fIiwiX192dWVfdGVtcGxhdGVfXyIsInRlbXBsYXRlIiwiZ2V0TmF0aXZlIiwib2JqZWN0Iiwia2V5IiwidmFsdWUiLCJnZXRWYWx1ZSIsImJhc2VJc05hdGl2ZSIsImlzT2JqZWN0IiwiaXNPYmplY3RMaWtlIiwiTGlzdENhY2hlIiwiZW50cmllcyIsImNsZWFyIiwiZW50cnkiLCJzZXQiLCJsaXN0Q2FjaGVDbGVhciIsImxpc3RDYWNoZURlbGV0ZSIsImxpc3RDYWNoZUdldCIsImxpc3RDYWNoZUhhcyIsImxpc3RDYWNoZVNldCIsInByb3RvdHlwZSIsImdldCIsImhhcyIsImFzc29jSW5kZXhPZiIsImFycmF5IiwiZXEiLCJnZXRNYXBEYXRhIiwiX19kYXRhX18iLCJpc0tleWFibGUiLCJpc0tleSIsImlzU3ltYm9sIiwicmVJc1BsYWluUHJvcCIsInJlSXNEZWVwUHJvcCIsIk9iamVjdCIsIm5hdGl2ZUNyZWF0ZSIsInRvS2V5IiwiSU5GSU5JVFkiLCJpc0xlbmd0aCIsIk1BWF9TQUZFX0lOVEVHRVIiLCJvYmplY3RUb1N0cmluZyIsInN5bWJvbFRhZyIsIm9iamVjdFByb3RvIiwiTWFwQ2FjaGUiLCJtYXBDYWNoZUNsZWFyIiwibWFwQ2FjaGVEZWxldGUiLCJtYXBDYWNoZUdldCIsIm1hcENhY2hlSGFzIiwibWFwQ2FjaGVTZXQiLCJpc0Z1bmN0aW9uIiwidGFnIiwiZnVuY1RhZyIsImdlblRhZyIsImNsZWFuVXBOZXh0VGljayIsImRyYWluaW5nIiwiY3VycmVudFF1ZXVlIiwicXVldWUiLCJjb25jYXQiLCJxdWV1ZUluZGV4IiwiZHJhaW5RdWV1ZSIsInRpbWVvdXQiLCJjYWNoZWRTZXRUaW1lb3V0IiwibGVuIiwicnVuIiwiY2FjaGVkQ2xlYXJUaW1lb3V0IiwiSXRlbSIsImZ1biIsIm5vb3AiLCJwcm9jZXNzIiwiY2xlYXJUaW1lb3V0IiwibmV4dFRpY2siLCJhcmdzIiwidGl0bGUiLCJicm93c2VyIiwiZW52IiwiYXJndiIsInZlcnNpb24iLCJ2ZXJzaW9ucyIsIm9uIiwiYWRkTGlzdGVuZXIiLCJvbmNlIiwib2ZmIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJlbWl0IiwiYmluZGluZyIsIm5hbWUiLCJjd2QiLCJjaGRpciIsImRpciIsInVtYXNrIiwiZGVmaW5lUHJvcGVydHkiLCJfZGVmZXIiLCJfZGVmZXIyIiwibmV3VmFsIiwiX3RoaXMiLCJlbCIsInRhYkluZGV4IiwiZm9jdXMiLCJfZXZlbnRzIiwiX2V2ZW50czIiLCJfeGhyUmVzcG9uc2UiLCJfeGhyUmVzcG9uc2UyIiwiTWFwIiwiU3RhY2siLCJzdGFja0NsZWFyIiwic3RhY2tEZWxldGUiLCJzdGFja0dldCIsInN0YWNrSGFzIiwic3RhY2tTZXQiLCJTeW1ib2wiLCJiYXNlR2V0IiwicGF0aCIsImNhc3RQYXRoIiwiYmFzZUhhcyIsImhhc093blByb3BlcnR5IiwiZ2V0UHJvdG90eXBlIiwiYmFzZUlzRXF1YWwiLCJvdGhlciIsImN1c3RvbWl6ZXIiLCJiaXRtYXNrIiwic3RhY2siLCJiYXNlSXNFcXVhbERlZXAiLCJiYXNlUHJvcGVydHkiLCJzdHJpbmdUb1BhdGgiLCJlcXVhbEFycmF5cyIsImVxdWFsRnVuYyIsImlzUGFydGlhbCIsIlBBUlRJQUxfQ09NUEFSRV9GTEFHIiwiYXJyTGVuZ3RoIiwib3RoTGVuZ3RoIiwic3RhY2tlZCIsInNlZW4iLCJVTk9SREVSRURfQ09NUEFSRV9GTEFHIiwiU2V0Q2FjaGUiLCJhcnJWYWx1ZSIsIm90aFZhbHVlIiwiY29tcGFyZWQiLCJhcnJheVNvbWUiLCJvdGhJbmRleCIsImFkZCIsImlzSG9zdE9iamVjdCIsImlzSW5kZXgiLCJyZUlzVWludCIsImlzU3RyaWN0Q29tcGFyYWJsZSIsIm1hdGNoZXNTdHJpY3RDb21wYXJhYmxlIiwic3JjVmFsdWUiLCJ0b1NvdXJjZSIsImZ1bmMiLCJmdW5jVG9TdHJpbmciLCJiYXNlRGVsYXkiLCJyZXN0IiwiZGVmZXIiLCJpc0FyZ3VtZW50cyIsImlzQXJyYXlMaWtlT2JqZWN0IiwicHJvcGVydHlJc0VudW1lcmFibGUiLCJhcmdzVGFnIiwiaXNBcnJheUxpa2UiLCJnZXRMZW5ndGgiLCJpc1N0cmluZyIsInN0cmluZ1RhZyIsImtleXMiLCJpc1Byb3RvIiwiaXNQcm90b3R5cGUiLCJiYXNlS2V5cyIsImluZGV4ZXMiLCJpbmRleEtleXMiLCJza2lwSW5kZXhlcyIsInRvSW50ZWdlciIsInRvRmluaXRlIiwicmVtYWluZGVyIiwidG9OdW1iZXIiLCJOQU4iLCJ2YWx1ZU9mIiwicmVwbGFjZSIsInJlVHJpbSIsImlzQmluYXJ5IiwicmVJc0JpbmFyeSIsInJlSXNPY3RhbCIsImZyZWVQYXJzZUludCIsInNsaWNlIiwicmVJc0JhZEhleCIsInBhcnNlSW50IiwidmFsIiwiaGFzT3duIiwiX2lzVnVlIiwiX2RhdGEiLCJvYiIsIl9fb2JfXyIsImNvbnZlcnQiLCJkZXAiLCJub3RpZnkiLCJ2bXMiLCJ2bSIsIl9wcm94eSIsIl9kaWdlc3QiLCJkZWwiLCJfdW5wcm94eSIsImlzTGl0ZXJhbCIsImV4cCIsImxpdGVyYWxWYWx1ZVJFIiwiaXNSZXNlcnZlZCIsInN0ciIsImNoYXJDb2RlQXQiLCJfdG9TdHJpbmciLCJwYXJzZWQiLCJOdW1iZXIiLCJpc05hTiIsInRvQm9vbGVhbiIsInN0cmlwUXVvdGVzIiwiYSIsImIiLCJjYW1lbGl6ZSIsImNhbWVsaXplUkUiLCJ0b1VwcGVyIiwiXyIsInRvVXBwZXJDYXNlIiwiaHlwaGVuYXRlIiwiaHlwaGVuYXRlUkUiLCJjbGFzc2lmeSIsImNsYXNzaWZ5UkUiLCJjdHgiLCJsIiwidG9BcnJheSIsInJldCIsInRvIiwiZnJvbSIsImlzUGxhaW5PYmplY3QiLCJPQkpFQ1RfU1RSSU5HIiwiZGVmIiwiZW51bWVyYWJsZSIsIndyaXRhYmxlIiwiY29uZmlndXJhYmxlIiwiX2RlYm91bmNlIiwid2FpdCIsImNvbnRleHQiLCJ0aW1lc3RhbXAiLCJsYXRlciIsImxhc3QiLCJEYXRlIiwibm93IiwiYXJyIiwiY2FuY2VsbGFibGUiLCJjYiIsImNhbmNlbGxlZCIsImNhbmNlbCIsImxvb3NlRXF1YWwiLCJDYWNoZSIsImxpbWl0Iiwic2l6ZSIsInRhaWwiLCJfa2V5bWFwIiwiY3JlYXRlIiwicHVzaEZpbHRlciIsImxhc3RGaWx0ZXJJbmRleCIsInRyaW0iLCJ0b2tlbnMiLCJtYXRjaCIsImZpbHRlclRva2VuUkUiLCJwcm9jZXNzRmlsdGVyQXJnIiwiZmlsdGVycyIsImFyZyIsInJlc2VydmVkQXJnUkUiLCJkeW5hbWljIiwic3RyaXBwZWQiLCJwYXJzZURpcmVjdGl2ZSIsInMiLCJoaXQiLCJjYWNoZSQxIiwiaW5TaW5nbGUiLCJpbkRvdWJsZSIsImN1cmx5Iiwic3F1YXJlIiwicGFyZW4iLCJwcmV2IiwiZXhwcmVzc2lvbiIsInB1dCIsImVzY2FwZVJlZ2V4IiwicmVnZXhFc2NhcGVSRSIsImNvbXBpbGVSZWdleCIsIm9wZW4iLCJkZWxpbWl0ZXJzIiwiY2xvc2UiLCJ1bnNhZmVPcGVuIiwidW5zYWZlRGVsaW1pdGVycyIsInVuc2FmZUNsb3NlIiwidGFnUkUiLCJSZWdFeHAiLCJodG1sUkUiLCJjYWNoZSIsInBhcnNlVGV4dCIsInRleHQiLCJodG1sIiwiZmlyc3QiLCJvbmVUaW1lIiwibGFzdEluZGV4IiwiZXhlYyIsInRva2Vuc1RvRXhwIiwidG9rZW4iLCJmb3JtYXRUb2tlbiIsInNpbmdsZSIsIiRldmFsIiwiaW5saW5lRmlsdGVycyIsImZpbHRlclJFIiwiYXBwZW5kV2l0aFRyYW5zaXRpb24iLCJ0YXJnZXQiLCJhcHBseVRyYW5zaXRpb24iLCJiZWZvcmVXaXRoVHJhbnNpdGlvbiIsImJlZm9yZSIsInJlbW92ZVdpdGhUcmFuc2l0aW9uIiwiZGlyZWN0aW9uIiwib3AiLCJ0cmFuc2l0aW9uIiwiX192X3RyYW5zIiwiaG9va3MiLCJ0cmFuc2l0aW9uRW5kRXZlbnQiLCJfaXNDb21waWxlZCIsIiRwYXJlbnQiLCJhY3Rpb24iLCJxdWVyeSIsInNlbGVjdG9yIiwicXVlcnlTZWxlY3RvciIsIk5PREVfRU5WIiwid2FybiIsImluRG9jIiwibm9kZSIsImRvYyIsIm93bmVyRG9jdW1lbnQiLCJkb2N1bWVudEVsZW1lbnQiLCJwYXJlbnQiLCJub2RlVHlwZSIsImNvbnRhaW5zIiwiZ2V0QXR0ciIsIl9hdHRyIiwiZ2V0QXR0cmlidXRlIiwicmVtb3ZlQXR0cmlidXRlIiwiZ2V0QmluZEF0dHIiLCJoYXNCaW5kQXR0ciIsImhhc0F0dHJpYnV0ZSIsImFmdGVyIiwicHJlcGVuZCIsInJlcGxhY2VDaGlsZCIsImV2ZW50IiwidXNlQ2FwdHVyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZ2V0Q2xhc3MiLCJjbGFzc25hbWUiLCJjbGFzc05hbWUiLCJiYXNlVmFsIiwic2V0Q2xhc3MiLCJjbHMiLCJpc0lFOSIsIm5hbWVzcGFjZVVSSSIsImFkZENsYXNzIiwiY2xhc3NMaXN0IiwiY3VyIiwicmVtb3ZlQ2xhc3MiLCJ0YXIiLCJleHRyYWN0Q29udGVudCIsImFzRnJhZ21lbnQiLCJjaGlsZCIsInJhd0NvbnRlbnQiLCJpc1RlbXBsYXRlIiwiaXNGcmFnbWVudCIsImNvbnRlbnQiLCJoYXNDaGlsZE5vZGVzIiwidHJpbU5vZGUiLCJjcmVhdGVEb2N1bWVudEZyYWdtZW50IiwiaXNUcmltbWFibGUiLCJsYXN0Q2hpbGQiLCJ0YWdOYW1lIiwiY3JlYXRlQW5jaG9yIiwicGVyc2lzdCIsImFuY2hvciIsImNyZWF0ZUNvbW1lbnQiLCJfX3ZfYW5jaG9yIiwiZmluZFJlZiIsImhhc0F0dHJpYnV0ZXMiLCJhdHRycyIsImF0dHJpYnV0ZXMiLCJyZWZSRSIsIm1hcE5vZGVSYW5nZSIsImVuZCIsIm5leHQiLCJyZW1vdmVOb2RlUmFuZ2UiLCJmcmFnIiwib25SZW1vdmVkIiwicmVtb3ZlZCIsImRvbmUiLCJub2RlcyIsImdldE91dGVySFRNTCIsIm91dGVySFRNTCIsImNvbnRhaW5lciIsImNsb25lTm9kZSIsImlubmVySFRNTCIsImNoZWNrQ29tcG9uZW50QXR0ciIsImhhc0F0dHJzIiwiY29tbW9uVGFnUkUiLCJyZXNlcnZlZFRhZ1JFIiwiZ2V0SXNCaW5kaW5nIiwicmVzb2x2ZUFzc2V0IiwiaXMiLCJleHBlY3RlZFRhZyIsIl9jb21wb25lbnROYW1lTWFwIiwiaXNVbmtub3duRWxlbWVudCIsIm1lcmdlRGF0YSIsInRvVmFsIiwiZnJvbVZhbCIsIm1lcmdlQXNzZXRzIiwicGFyZW50VmFsIiwiY2hpbGRWYWwiLCJyZXMiLCJndWFyZEFycmF5QXNzZXRzIiwiZ3VhcmRDb21wb25lbnRzIiwiaWRzIiwiVnVlIiwiZ3VhcmRQcm9wcyIsInByb3BzIiwiYXNzZXRzIiwiYXNzZXQiLCJtZXJnZU9wdGlvbnMiLCJtZXJnZUZpZWxkIiwic3RyYXQiLCJzdHJhdHMiLCJkZWZhdWx0U3RyYXQiLCJwcm9wc0RhdGEiLCJtaXhpbnMiLCJtaXhpbiIsIm1peGluT3B0aW9ucyIsIndhcm5NaXNzaW5nIiwiY2FtZWxpemVkSWQiLCJjaGFyQXQiLCJEZXAiLCJ1aWQkMSIsInN1YnMiLCJ3aXRob3V0Q29udmVyc2lvbiIsInNob3VsZENvbnZlcnQiLCJPYnNlcnZlciIsImF1Z21lbnQiLCJoYXNQcm90byIsInByb3RvQXVnbWVudCIsImNvcHlBdWdtZW50IiwiYXJyYXlNZXRob2RzIiwiYXJyYXlLZXlzIiwib2JzZXJ2ZUFycmF5Iiwid2FsayIsIl9fcHJvdG9fXyIsIm9ic2VydmUiLCJpc0V4dGVuc2libGUiLCJhZGRWbSIsImRlZmluZVJlYWN0aXZlIiwicHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJnZXR0ZXIiLCJzZXR0ZXIiLCJjaGlsZE9iIiwiZGVwZW5kIiwiaW5pdE1peGluIiwiX2luaXQiLCIkZWwiLCIkcm9vdCIsIiRjaGlsZHJlbiIsIiRyZWZzIiwiJGVscyIsIl93YXRjaGVycyIsIl9kaXJlY3RpdmVzIiwiX3VpZCIsInVpZCIsIl9ldmVudHNDb3VudCIsIl9pc0ZyYWdtZW50IiwiX2ZyYWdtZW50IiwiX2ZyYWdtZW50U3RhcnQiLCJfZnJhZ21lbnRFbmQiLCJfaXNEZXN0cm95ZWQiLCJfaXNSZWFkeSIsIl9pc0F0dGFjaGVkIiwiX2lzQmVpbmdEZXN0cm95ZWQiLCJfdkZvclJlbW92aW5nIiwiX3VubGlua0ZuIiwiX2NvbnRleHQiLCJfc2NvcGUiLCJfZnJhZyIsImNoaWxkcmVuIiwiJG9wdGlvbnMiLCJjb25zdHJ1Y3RvciIsIl91cGRhdGVSZWYiLCJfY2FsbEhvb2siLCJfaW5pdFN0YXRlIiwiX2luaXRFdmVudHMiLCIkbW91bnQiLCJnZXRQYXRoQ2hhclR5cGUiLCJjaCIsImNvZGUiLCJmb3JtYXRTdWJQYXRoIiwidHJpbW1lZCIsInBhcnNlIiwibWF5YmVVbmVzY2FwZVF1b3RlIiwibmV4dENoYXIiLCJtb2RlIiwiSU5fU0lOR0xFX1FVT1RFIiwiSU5fRE9VQkxFX1FVT1RFIiwibmV3Q2hhciIsImFjdGlvbnMiLCJBUFBFTkQiLCJ0eXBlTWFwIiwiQkVGT1JFX1BBVEgiLCJzdWJQYXRoRGVwdGgiLCJQVVNIIiwiSU5DX1NVQl9QQVRIX0RFUFRIIiwiUFVTSF9TVUJfUEFUSCIsIklOX1NVQl9QQVRIIiwicGF0aFN0YXRlTWFjaGluZSIsIkVSUk9SIiwiQUZURVJfUEFUSCIsInJhdyIsInBhcnNlUGF0aCIsInBhdGhDYWNoZSIsImdldFBhdGgiLCJwYXJzZUV4cHJlc3Npb24iLCJzZXRQYXRoIiwib3JpZ2luYWwiLCJ3YXJuTm9uRXhpc3RlbnQiLCIkc2V0Iiwic2F2ZSIsInNhdmVkIiwibmV3bGluZVJFIiwicmV3cml0ZSIsImFsbG93ZWRLZXl3b3Jkc1JFIiwicmVzdG9yZVJFIiwicmVzdG9yZSIsImNvbXBpbGVHZXR0ZXIiLCJpbXByb3BlcktleXdvcmRzUkUiLCJib2R5Iiwic2F2ZVJFIiwid3NSRSIsImlkZW50UkUiLCJtYWtlR2V0dGVyRm4iLCJjb21waWxlU2V0dGVyIiwic2NvcGUiLCJuZWVkU2V0IiwiZXhwcmVzc2lvbkNhY2hlIiwiaXNTaW1wbGVQYXRoIiwicGF0aFRlc3RSRSIsImxpdGVyYWxWYWx1ZVJFJDEiLCJyZXNldEJhdGNoZXJTdGF0ZSIsInVzZXJRdWV1ZSIsImNpcmN1bGFyIiwid2FpdGluZyIsImZsdXNoQmF0Y2hlclF1ZXVlIiwiX2FnYWluIiwicnVuQmF0Y2hlclF1ZXVlIiwiZGV2dG9vbHMiLCJ3YXRjaGVyIiwiX21heFVwZGF0ZUNvdW50IiwicHVzaFdhdGNoZXIiLCJxIiwidXNlciIsIldhdGNoZXIiLCJleHBPckZuIiwiaXNGbiIsInVpZCQyIiwiYWN0aXZlIiwiZGlydHkiLCJsYXp5IiwiZGVwcyIsIm5ld0RlcHMiLCJkZXBJZHMiLCJfU2V0IiwibmV3RGVwSWRzIiwicHJldkVycm9yIiwidHdvV2F5IiwicXVldWVkIiwic2hhbGxvdyIsInRyYXZlcnNlIiwic2Vlbk9iamVjdHMiLCJpc0EiLCJpc08iLCJkZXBJZCIsImlzUmVhbFRlbXBsYXRlIiwic3RyaW5nVG9GcmFnbWVudCIsInRlbXBsYXRlU3RyaW5nIiwiY2FjaGVLZXkiLCJ0ZW1wbGF0ZUNhY2hlIiwidGFnTWF0Y2giLCJ0YWdSRSQxIiwiZW50aXR5TWF0Y2giLCJlbnRpdHlSRSIsImNvbW1lbnRNYXRjaCIsImNvbW1lbnRSRSIsIndyYXAiLCJlZmF1bHQiLCJkZXB0aCIsInByZWZpeCIsInN1ZmZpeCIsIm5vZGVUb0ZyYWdtZW50IiwidGV4dENvbnRlbnQiLCJjbG9uZWROb2RlIiwicXVlcnlTZWxlY3RvckFsbCIsImNsb25lZCIsImhhc0Jyb2tlblRlbXBsYXRlIiwidGVtcENsb25lIiwiaGFzVGV4dGFyZWFDbG9uZUJ1ZyIsInBhcnNlVGVtcGxhdGUiLCJzaG91bGRDbG9uZSIsImlkU2VsZWN0b3JDYWNoZSIsImdldEVsZW1lbnRCeUlkIiwiRnJhZ21lbnQiLCJsaW5rZXIiLCJob3N0IiwicGFyZW50RnJhZyIsImNoaWxkRnJhZ3MiLCJpbnNlcnRlZCIsInVubGluayIsInNpbmdsZUJlZm9yZSIsInNpbmdsZVJlbW92ZSIsIm11bHRpQmVmb3JlIiwibXVsdGlSZW1vdmUiLCJfX3ZfZnJhZyIsIndpdGhUcmFuc2l0aW9uIiwibWV0aG9kIiwiY2FsbEhvb2siLCJhdHRhY2giLCJzaG91bGRDYWxsUmVtb3ZlIiwiYmVmb3JlUmVtb3ZlIiwiZGV0YWNoIiwiZGVzdHJveSIsIkZyYWdtZW50RmFjdG9yeSIsImNpZCIsImNhY2hlSWQiLCJsaW5rZXJDYWNoZSIsImNvbXBpbGUiLCJmaW5kUHJldkZyYWciLCJwcmV2aW91c1NpYmxpbmciLCJmb3JJZCIsImZpbmRWbUZyb21GcmFnIiwiX192dWVfXyIsInJhbmdlIiwibiIsIk1hdGgiLCJmbG9vciIsImdldFRyYWNrQnlLZXkiLCJ0cmFja0J5S2V5IiwibXVsdGkiLCJpbml0Iiwic2VsZWN0ZWQiLCJfdmFsdWUiLCJpbmRleE9mJDEiLCJrZXlGaWx0ZXIiLCJoYW5kbGVyIiwiY29kZXMiLCJjaGFyQ29kZSIsImtleUNvZGVzIiwia2V5Q29kZSIsInN0b3BGaWx0ZXIiLCJzdG9wUHJvcGFnYXRpb24iLCJwcmV2ZW50RmlsdGVyIiwicHJldmVudERlZmF1bHQiLCJzZWxmRmlsdGVyIiwiY3VycmVudFRhcmdldCIsIm5vcm1hbGl6ZSIsInByb3AiLCJwcm9wQ2FjaGUiLCJjYW1lbCIsInVwcGVyIiwidGVzdEVsIiwicHJlZml4ZWQiLCJwcmVmaXhlcyIsInN0eWxlIiwia2ViYWIiLCJjYW1lbFByZWZpeGVzIiwibm9ybWFsaXplJDEiLCJfa2V5IiwiayIsInNwbGl0IiwiY2FsbEFjdGl2YXRlSG9va3MiLCJjYWxsZWQiLCJ0b3RhbCIsImNvbXBpbGVQcm9wcyIsInByb3BPcHRpb25zIiwiYXR0ciIsIm5hbWVzIiwiZW1wdHkiLCJpZGVudFJFJDEiLCJwcm9wQmluZGluZ01vZGVzIiwiT05FX1dBWSIsIlRXT19XQVkiLCJPTkVfVElNRSIsIm9wdGltaXplZExpdGVyYWwiLCJzZXR0YWJsZVBhdGhSRSIsInBhcmVudFBhdGgiLCJsb3dlckNhc2VOYW1lIiwicmVxdWlyZWQiLCJtYWtlUHJvcHNMaW5rRm4iLCJfcHJvcHMiLCJpbmxpbmVQcm9wcyIsImluaXRQcm9wIiwiJGdldCIsIl9iaW5kRGlyIiwicHJvcERlZiIsInByb2Nlc3NQcm9wVmFsdWUiLCJyYXdWYWx1ZSIsImlzU2ltcGxlIiwiZ2V0UHJvcERlZmF1bHRWYWx1ZSIsImNvZXJjZVByb3AiLCJjb2VyY2VkIiwiYXNzZXJ0UHJvcCIsInVwZGF0ZVByb3AiLCJ2YWxpZCIsImV4cGVjdGVkVHlwZXMiLCJhc3NlcnRlZFR5cGUiLCJhc3NlcnRUeXBlIiwiZXhwZWN0ZWRUeXBlIiwiZm9ybWF0VHlwZSIsImZvcm1hdFZhbHVlIiwidmFsaWRhdG9yIiwiY29lcmNlIiwiU3RyaW5nIiwicHVzaEpvYiIsImpvYiIsInF1ZXVlJDEiLCJmbHVzaCIsImYiLCJvZmZzZXRIZWlnaHQiLCJUcmFuc2l0aW9uIiwiZW50ZXJDbGFzcyIsImxlYXZlQ2xhc3MiLCJwZW5kaW5nQ3NzRXZlbnQiLCJwZW5kaW5nQ3NzQ2IiLCJwZW5kaW5nSnNDYiIsImp1c3RFbnRlcmVkIiwiZW50ZXJlZCIsImxlZnQiLCJ0eXBlQ2FjaGUiLCJUWVBFX1RSQU5TSVRJT04iLCJUWVBFX0FOSU1BVElPTiIsImZvckVhY2giLCJpc0hpZGRlbiIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJ3aWR0aCIsImhlaWdodCIsIm9mZnNldFdpZHRoIiwiZ2V0Q2xpZW50UmVjdHMiLCJwYXJ0aWFsIiwibm9kZUxpbmtGbiIsIl9hc0NvbXBvbmVudCIsImNvbXBpbGVOb2RlIiwiY2hpbGRMaW5rRm4iLCJ0ZXJtaW5hbCIsImlzU2NyaXB0IiwiY29tcGlsZU5vZGVMaXN0IiwiZGlycyIsImxpbmtBbmRDYXB0dXJlIiwibWFrZVVubGlua0ZuIiwib3JpZ2luYWxEaXJDb3VudCIsInNvcnQiLCJkaXJlY3RpdmVDb21wYXJhdG9yIiwiX2JpbmQiLCJkZXNjcmlwdG9yIiwicHJpb3JpdHkiLCJERUZBVUxUX1BSSU9SSVRZIiwiY29udGV4dERpcnMiLCJkZXN0cm95aW5nIiwidGVhcmRvd25EaXJzIiwiX3RlYXJkb3duIiwiJHJlbW92ZSIsImNvbXBpbGVBbmRMaW5rUHJvcHMiLCJwcm9wc0xpbmtGbiIsInByb3BEaXJzIiwiY29tcGlsZVJvb3QiLCJjb250ZXh0T3B0aW9ucyIsImNvbnRleHRMaW5rRm4iLCJyZXBsYWNlckxpbmtGbiIsImNvbnRhaW5lckF0dHJzIiwiX2NvbnRhaW5lckF0dHJzIiwicmVwbGFjZXJBdHRycyIsIl9yZXBsYWNlckF0dHJzIiwiY29tcGlsZURpcmVjdGl2ZXMiLCJvblJFIiwicGx1cmFsIiwic2VsZkRpcnMiLCJjb21waWxlVGV4dE5vZGUiLCJjb21waWxlRWxlbWVudCIsImxpbmtGbiIsImNoZWNrVGVybWluYWxEaXJlY3RpdmVzIiwiY2hlY2tFbGVtZW50RGlyZWN0aXZlcyIsImNoZWNrQ29tcG9uZW50IiwiX3NraXAiLCJyZW1vdmVUZXh0Iiwid2hvbGVUZXh0IiwicHJvY2Vzc1RleHRUb2tlbiIsIm1ha2VUZXh0Tm9kZUxpbmtGbiIsInNldFRva2VuVHlwZSIsImRpcmVjdGl2ZXMiLCJmcmFnQ2xvbmUiLCJub2RlTGlzdCIsImxpbmtGbnMiLCJtYWtlQ2hpbGRMaW5rRm4iLCJjaGlsZHJlbkxpbmtGbiIsIm1ha2VUZXJtaW5hbE5vZGVMaW5rRm4iLCJjb21wb25lbnQiLCJyZWYiLCJpbnRlcm5hbERpcmVjdGl2ZXMiLCJtb2RpZmllcnMiLCJsaXRlcmFsIiwiY29tcG9uZW50TGlua0ZuIiwic2tpcCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJtYXRjaGVkIiwiZGlyTmFtZSIsInJhd05hbWUiLCJ0ZXJtRGVmIiwibW9kaWZpZXJSRSIsImRpckF0dHJSRSIsIkRFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkiLCJwYXJzZU1vZGlmaWVycyIsInB1c2hEaXIiLCJpbnRlcnBUb2tlbnMiLCJoYXNPbmVUaW1lVG9rZW4iLCJoYXNPbmVUaW1lIiwiaW50ZXJwIiwiZGlyRGVmIiwic29tZSIsInRyYW5zaXRpb25SRSIsImJpbmRSRSIsIm1ha2VOb2RlTGlua0ZuIiwidHJhbnNjbHVkZSIsImV4dHJhY3RBdHRycyIsIl9jb250ZW50IiwidHJhbnNjbHVkZVRlbXBsYXRlIiwicmVwbGFjZXIiLCJtZXJnZUF0dHJzIiwic3BlY2lhbENoYXJSRSIsInJlc29sdmVTbG90cyIsImNvbnRlbnRzIiwiX3Nsb3RDb250ZW50cyIsImV4dHJhY3RGcmFnbWVudCIsInN0YXRlTWl4aW4iLCJtYWtlQ29tcHV0ZWRHZXR0ZXIiLCJvd25lciIsImV2YWx1YXRlIiwibmV3RGF0YSIsIl9zZXREYXRhIiwiX2luaXRQcm9wcyIsIl9pbml0TWV0YSIsIl9pbml0TWV0aG9kcyIsIl9pbml0RGF0YSIsIl9pbml0Q29tcHV0ZWQiLCJfcHJvcHNVbmxpbmtGbiIsImRhdGFGbiIsIm9sZERhdGEiLCJyZW1vdmVWbSIsImNvbXB1dGVkIiwidXNlckRlZiIsIm1ldGhvZHMiLCJtZXRhcyIsIl9tZXRhIiwiZXZlbnRzTWl4aW4iLCJyZWdpc3RlckNvbXBvbmVudEV2ZW50cyIsImV2ZW50UkUiLCJfZnJvbVBhcmVudCIsIiRvbiIsInJlZ2lzdGVyQ2FsbGJhY2tzIiwiaGFzaCIsImhhbmRsZXJzIiwicmVnaXN0ZXIiLCJvbkF0dGFjaGVkIiwiY2FsbEF0dGFjaCIsIm9uRGV0YWNoZWQiLCJjYWxsRGV0YWNoIiwiZXZlbnRzIiwid2F0Y2giLCJfaW5pdERPTUhvb2tzIiwiaG9vayIsIiRlbWl0Iiwibm9vcCQxIiwiRGlyZWN0aXZlIiwiX2xvY2tlZCIsIl9ib3VuZCIsIl9saXN0ZW5lcnMiLCJfaG9zdCIsIl92dWVfZGlyZWN0aXZlcyIsImxpZmVjeWNsZU1peGluIiwiX3JlZiIsIl9jb21waWxlIiwiX2luaXRFbGVtZW50Iiwicm9vdExpbmtlciIsImNvbnRlbnRMaW5rRm4iLCJjdG9yIiwiX2xpbmtlckNhY2hhYmxlIiwicm9vdFVubGlua0ZuIiwiY29udGVudFVubGlua0ZuIiwiX2Rlc3Ryb3kiLCJkZWZlckNsZWFudXAiLCJfY2xlYW51cCIsImRlc3Ryb3lSZWFkeSIsInBlbmRpbmdSZW1vdmFsIiwiY2xlYW51cElmUG9zc2libGUiLCIkZGVzdHJveSIsInRlYXJkb3duIiwiJG9mZiIsIm1pc2NNaXhpbiIsIl9hcHBseUZpbHRlcnMiLCJvbGRWYWx1ZSIsIndyaXRlIiwib2Zmc2V0IiwicmVhZCIsIl9yZXNvbHZlQ29tcG9uZW50IiwiZmFjdG9yeSIsInJlc29sdmVkIiwicmVxdWVzdGVkIiwicGVuZGluZ0NhbGxiYWNrcyIsImNicyIsInJlYXNvbiIsImRhdGFBUEkiLCJjbGVhbiIsImFzU3RhdGVtZW50IiwiJGFyZ3VtZW50cyIsIiRkZWxldGUiLCIkd2F0Y2giLCJkZWVwIiwic3luYyIsImltbWVkaWF0ZSIsImZpbHRlclJFJDEiLCIkaW50ZXJwb2xhdGUiLCIkbG9nIiwiY29uc29sZSIsImxvZyIsImRvbUFQSSIsImluc2VydCIsIm9wMSIsIm9wMiIsInRhcmdldElzRGV0YWNoZWQiLCJzaG91bGRDYWxsSG9vayIsImFwcGVuZCIsImJlZm9yZVdpdGhDYiIsInJlbW92ZVdpdGhDYiIsIiRuZXh0VGljayIsIiRhcHBlbmRUbyIsIiRwcmVwZW5kVG8iLCIkYmVmb3JlIiwiJGFmdGVyIiwiaW5Eb2N1bWVudCIsInJlYWxDYiIsImV2ZW50c0FQSSIsIm1vZGlmeUxpc3RlbmVyQ291bnQiLCJjb3VudCIsImhvb2tSRSIsIiRvbmNlIiwiaXNTb3VyY2UiLCJzaG91bGRQcm9wYWdhdGUiLCJoYXNQYXJlbnRDYnMiLCIkYnJvYWRjYXN0Iiwic291cmNlIiwiJGRpc3BhdGNoIiwibGlmZWN5Y2xlQVBJIiwicmVhZHkiLCIkY29tcGlsZSIsImxpbWl0QnkiLCJmaWx0ZXJCeSIsInNlYXJjaCIsImRlbGltaXRlciIsImNvbnZlcnRBcnJheSIsIiR2YWx1ZSIsIiRrZXkiLCJvcmRlckJ5IiwiYmFzZUNvbXBhcmUiLCJzb3J0S2V5SW5kZXgiLCJzb3J0S2V5Iiwic29ydEtleXMiLCJvcmRlciIsImNvbXBhcmF0b3IiLCJmaXJzdEFyZyIsImluc3RhbGxHbG9iYWxBUEkiLCJjcmVhdGVDbGFzcyIsImVsZW1lbnREaXJlY3RpdmVzIiwidHJhbnNpdGlvbnMiLCJwYXJ0aWFscyIsInV0aWwiLCJjb21waWxlciIsInBhcnNlcnMiLCJkaXJlY3RpdmUiLCJleHRlbmRPcHRpb25zIiwiU3VwZXIiLCJpc0ZpcnN0RXh0ZW5kIiwiX0N0b3IiLCJTdWIiLCJfYXNzZXRUeXBlcyIsInBsdWdpbiIsImluc3RhbGxlZCIsInVuc2hpZnQiLCJpbnN0YWxsIiwiZGVmaW5pdGlvbiIsImluQnJvd3NlciIsIl9fVlVFX0RFVlRPT0xTX0dMT0JBTF9IT09LX18iLCJVQSIsImlzSUUiLCJpc0FuZHJvaWQiLCJpc0lvcyIsImlvc1ZlcnNpb25NYXRjaCIsImlvc1ZlcnNpb24iLCJoYXNNdXRhdGlvbk9ic2VydmVyQnVnIiwiaW5kZXhlZERCIiwidHJhbnNpdGlvblByb3AiLCJhbmltYXRpb25Qcm9wIiwiYW5pbWF0aW9uRW5kRXZlbnQiLCJpc1dlYmtpdFRyYW5zIiwib250cmFuc2l0aW9uZW5kIiwib253ZWJraXR0cmFuc2l0aW9uZW5kIiwiaXNXZWJraXRBbmltIiwib25hbmltYXRpb25lbmQiLCJvbndlYmtpdGFuaW1hdGlvbmVuZCIsIm5leHRUaWNrSGFuZGxlciIsInBlbmRpbmciLCJjb3BpZXMiLCJ0aW1lckZ1bmMiLCJNdXRhdGlvbk9ic2VydmVyIiwic2V0SW1tZWRpYXRlIiwiY291bnRlciIsIm9ic2VydmVyIiwidGV4dE5vZGUiLCJjaGFyYWN0ZXJEYXRhIiwiU2V0IiwibmV3ZXIiLCJvbGRlciIsInJldHVybkVudHJ5IiwiZnJlZXplIiwiZGVmaW5lUHJvcGVydGllcyIsInNpbGVudCIsIndhcm5FeHByZXNzaW9uRXJyb3JzIiwiX2RlbGltaXRlcnNDaGFuZ2VkIiwiX3Byb3BCaW5kaW5nTW9kZXMiLCJmb3JtYXRDb21wb25lbnROYW1lIiwiaGFzQ29uc29sZSIsIm1zZyIsImVycm9yIiwiSFRNTFVua25vd25FbGVtZW50IiwiSFRNTEVsZW1lbnQiLCJvcHRpb25NZXJnZVN0cmF0ZWdpZXMiLCJpbnN0YW5jZURhdGEiLCJkZWZhdWx0RGF0YSIsImNyZWF0ZWQiLCJhdHRhY2hlZCIsImRldGFjaGVkIiwiYmVmb3JlQ29tcGlsZSIsImNvbXBpbGVkIiwiYmVmb3JlRGVzdHJveSIsImRlc3Ryb3llZCIsImFjdGl2YXRlIiwiYWRkU3ViIiwic3ViIiwicmVtb3ZlU3ViIiwiYWRkRGVwIiwiYXJyYXlQcm90byIsImdldE93blByb3BlcnR5TmFtZXMiLCJpdGVtcyIsImRlYm91bmNlIiwiSU5fUEFUSCIsIkJFRk9SRV9JREVOVCIsIklOX0lERU5UIiwid3MiLCJpZGVudCIsIlsiLCJlb2YiLCIuIiwibnVtYmVyIiwiJyIsIlwiIiwiXSIsImVsc2UiLCJhbGxvd2VkS2V5d29yZHMiLCJpbXByb3BlcktleXdvcmRzIiwiYmVmb3JlR2V0IiwicHJlUHJvY2VzcyIsInBvc3RQcm9jZXNzIiwiYWZ0ZXJHZXQiLCJmb3JDb250ZXh0IiwiJGZvckNvbnRleHQiLCJhbGlhcyIsIl93aXRoTG9jayIsIiRpbmRleCIsInRtcCIsImN1cnJlbnQiLCJ0ZXh0JDEiLCJsZWdlbmQiLCJ0ciIsImNvbCIsInRkIiwidGgiLCJvcHRpb24iLCJvcHRncm91cCIsInRoZWFkIiwidGJvZHkiLCJjb2xncm91cCIsImNhcHRpb24iLCJ0Zm9vdCIsImciLCJkZWZzIiwic3ltYm9sIiwiaW1hZ2UiLCJjaXJjbGUiLCJlbGxpcHNlIiwibGluZSIsInBvbHlnb24iLCJwb2x5bGluZSIsInQiLCJwbGFjZWhvbGRlciIsInN3YXAiLCJfd2F0Y2hlciIsIk9OIiwiTU9ERUwiLCJCSU5EIiwiVFJBTlNJVElPTiIsIkVMIiwiQ09NUE9ORU5UIiwiUEFSVElBTCIsIklGIiwiRk9SIiwiU0xPVCIsInVpZCQzIiwidkZvciIsInBhcmFtcyIsImluTWF0Y2giLCJpdE1hdGNoIiwiaXRlcmF0b3IiLCJpc09wdGlvbiIsImRpZmYiLCJ1cGRhdGVSZWYiLCJ1cGRhdGVNb2RlbCIsInByaW1pdGl2ZSIsImNvbnZlcnRlZEZyb21PYmplY3QiLCJmcm9tT2JqZWN0IiwidHJhY2tCeSIsIm9sZEZyYWdzIiwiZnJhZ3MiLCJnZXRDYWNoZWRGcmFnIiwicmV1c2VkIiwiZnJlc2giLCJyZW1vdmFsSW5kZXgiLCJ0b3RhbFJlbW92ZWQiLCJkZWxldGVDYWNoZWRGcmFnIiwidyIsInRhcmdldFByZXYiLCJwcmV2RWwiLCJjdXJyZW50UHJldiIsImluc2VydGlvbkluZGV4Iiwic3RhZ2dlckNiIiwic3RhZ2dlckFuY2hvciIsIm1vdmUiLCJwYXJlbnRTY29wZSIsImNhY2hlRnJhZyIsIm1vZGVsIiwiX192X21vZGVsIiwiZm9yY2VVcGRhdGUiLCJzdGFnZ2VyQW1vdW50IiwiZ2V0U3RhZ2dlciIsIndhcm5EdXBsaWNhdGUiLCJ0cmFucyIsInN0YWdnZXIiLCJfcHJlUHJvY2VzcyIsIl9wb3N0UHJvY2VzcyIsInVuYmluZCIsInZJZiIsImludmFsaWQiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJlbHNlRWwiLCJlbHNlRnJhZyIsImVsc2VGYWN0b3J5Iiwic2hvdyIsInRvZ2dsZSIsImRpc3BsYXkiLCJ0ZXh0JDIiLCJpc1JhbmdlIiwiY29tcG9zaW5nIiwibGlzdGVuZXIiLCJmb2N1c2VkIiwicmF3TGlzdGVuZXIiLCJoYXNqUXVlcnkiLCJqUXVlcnkiLCJhZnRlckJpbmQiLCJyYWRpbyIsImNoZWNrZWQiLCJzZWxlY3QiLCJtdWx0aXBsZSIsImluaXRWYWx1ZSIsInNlbGVjdGVkSW5kZXgiLCJjaGVja2JveCIsImdldEJvb2xlYW5WYWx1ZSIsIl90cnVlVmFsdWUiLCJfZmFsc2VWYWx1ZSIsImNoZWNrRmlsdGVycyIsImhhc1JlYWQiLCJoYXNXcml0ZSIsIl91bmJpbmQiLCJlc2MiLCJ0YWIiLCJlbnRlciIsInNwYWNlIiwiZGVsZXRlIiwidXAiLCJyaWdodCIsImRvd24iLCJvbiQxIiwiYWNjZXB0U3RhdGVtZW50IiwiaWZyYW1lQmluZCIsImNvbnRlbnRXaW5kb3ciLCJjYXB0dXJlIiwic3RvcCIsInByZXZlbnQiLCJyZXNldCIsImltcG9ydGFudFJFIiwiaGFuZGxlT2JqZWN0IiwicmVkdWNlIiwiaGFuZGxlU2luZ2xlIiwiaXNJbXBvcnRhbnQiLCJzZXRQcm9wZXJ0eSIsInhsaW5rTlMiLCJ4bGlua1JFIiwiZGlzYWxsb3dlZEludGVycEF0dHJSRSIsImF0dHJXaXRoUHJvcHNSRSIsImVudW1lcmF0ZWRBdHRyUkUiLCJtb2RlbFByb3BzIiwidHJ1ZS12YWx1ZSIsImZhbHNlLXZhbHVlIiwiYmluZCQxIiwiYXR0clZhbHVlIiwibW9kZWxQcm9wIiwic2V0QXR0cmlidXRlTlMiLCJjbG9hayIsImZvciIsImlmIiwidkNsYXNzIiwiY2xlYW51cCIsInByZXZLZXlzIiwia2VlcEFsaXZlIiwiaW5saW5lVGVtcGxhdGUiLCJwZW5kaW5nQ29tcG9uZW50Q2IiLCJDb21wb25lbnQiLCJwZW5kaW5nUmVtb3ZhbHMiLCJwZW5kaW5nUmVtb3ZhbENiIiwic2V0Q29tcG9uZW50IiwiaW52YWxpZGF0ZVBlbmRpbmciLCJyZXNvbHZlQ29tcG9uZW50IiwibW91bnRDb21wb25lbnQiLCJ1bmJ1aWxkIiwiY2hpbGRWTSIsIkNvbXBvbmVudE5hbWUiLCJhY3RpdmF0ZUhvb2tzIiwiY2FjaGVkIiwiZ2V0Q2FjaGVkIiwibmV3Q29tcG9uZW50IiwiYnVpbGQiLCJ3YWl0aW5nRm9yIiwiZXh0cmFPcHRpb25zIiwiX2lzUm91dGVyVmlldyIsIl9pbmFjdGl2ZSIsInRyYW5zaXRpb25Nb2RlIiwiYmluZGluZ01vZGVzIiwiY2hpbGRLZXkiLCJwYXJlbnRLZXkiLCJwYXJlbnRXYXRjaGVyIiwiY2hpbGRXYXRjaGVyIiwidHJhbnNEdXJhdGlvblByb3AiLCJhbmltRHVyYXRpb25Qcm9wIiwicmFmIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwid2FpdEZvclRyYW5zaXRpb25TdGFydCIsInAkMSIsImNhbmNlbFBlbmRpbmciLCJjYWxsSG9va1dpdGhDYiIsImVudGVyQ2FuY2VsbGVkIiwiZW50ZXJOZXh0VGljayIsImVudGVyRG9uZSIsImdldENzc1RyYW5zaXRpb25UeXBlIiwic2V0dXBDc3NDYiIsImxlYXZlIiwibGVhdmVDYW5jZWxsZWQiLCJsZWF2ZURvbmUiLCJsZWF2ZU5leHRUaWNrIiwiaGFzUGVuZGluZyIsImhpZGRlbiIsImlubGluZVN0eWxlcyIsImNvbXB1dGVkU3R5bGVzIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInRyYW5zRHVyYXRpb24iLCJhbmltRHVyYXRpb24iLCJvbkVuZCIsInRyYW5zaXRpb24kMSIsIm9sZElkIiwiY2xhc3MiLCJfc2V0dXBQYXJhbXMiLCJfY2hlY2tTdGF0ZW1lbnQiLCJfdXBkYXRlIiwib2xkVmFsIiwibWFwcGVkS2V5IiwiX3NldHVwUGFyYW1XYXRjaGVyIiwidW53YXRjaCIsInBhcmFtV2F0Y2hlcnMiLCJfcGFyYW1VbndhdGNoRm5zIiwiJGV2ZW50IiwibGlzdGVuZXJzIiwidW53YXRjaEZucyIsInNsb3QiLCJmYWxsYmFjayIsImVsc2VCbG9jayIsImRpZ2l0c1JFIiwianNvbiIsImluZGVudCIsImNhcGl0YWxpemUiLCJ1cHBlcmNhc2UiLCJsb3dlcmNhc2UiLCJjdXJyZW5jeSIsIl9jdXJyZW5jeSIsImRlY2ltYWxzIiwicGFyc2VGbG9hdCIsImlzRmluaXRlIiwic3RyaW5naWZpZWQiLCJhYnMiLCJ0b0ZpeGVkIiwiX2ludCIsIl9mbG9hdCIsInNpZ24iLCJwbHVyYWxpemUiLCJkZWxheSIsIkFwaVRhYmxlIiwiZGlzbWlzc0NhbGxCYWNrIiwiYXBpSXRlbXMiLCJpc1JlcXVpcmVkIiwiZGVzYyIsInNob3dTcGlubmVyIiwiX3Jlc2V0TXNnIiwiX3RoaXMyIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJpc0Z1bGxTY3JlZW4iLCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwIiwic3RlcFRyYWNrZXJDb25maWciLCJpc0NsaWNrYWJsZSIsInN0ZXBzIiwibGluayIsIm9uQ2xpY2tIYW5kbGVyIiwiaXNWaXNpYmxlIiwiZGlzbWlzc2libGUiLCJvbkNsb3NlZCIsImRpc21pc3MiLCJpc09wZW4iLCJsYWJlbCIsInRvZ2dsZU9wZW4iLCJmZXRjaCIsIl9taXhpbnMiLCJfbWl4aW5zMiIsIl9maW5kSW5kZXgiLCJfZmluZEluZGV4MiIsIl9kZWJvdW5jZTIiLCJfc2V0Rm9jdXMiLCJfc2V0Rm9jdXMyIiwic2V0Rm9jdXMiLCJpbmRleGVkTGVnYWxzIiwibm9uSW5kZXhlZExlZ2FscyIsImFwaUxhbmciLCJhcGlSZWdpb24iLCJmZXRjaExlZ2FscyIsImhlYWRlcnMiLCJDb250ZW50LVR5cGUiLCJhcHBsaWNhdGlvbktleSIsImFwcGVuZFJlc3BvbnNlVG9MZWdhbENvbnRhaW5lciIsImRhdGFBcnkiLCJsZWdhbFJlc3BvbnNlIiwiZmluZEluZGV4IiwiZ2V0TGVnYWxzIiwiaW5kZXhlZEtleXMiLCJsZWdhbCIsIm5vbkluZGV4ZWRLZXlzIiwidGhlbiIsInBhcnNlSlNPTiIsImxlZ2FsOjpjbGljayIsImxlZ2FsS2V5IiwidGFyZ2V0TGVnYWxJbmRleCIsImlzU2VsZWN0ZWQiLCJhc3NpZ24iLCJsZWdhbDo6aW5pdCIsImxlZ2FsSW5pdERldGFpbCIsImxhbmciLCJyZWdpb24iLCJjb250YWluZXJSZWYiLCJpc05vbkluZGV4ZWQiLCJyb290QnJvYWRjYXN0IiwibGVnYWxDb3VudGVyIiwibGVnYWxMYW5nIiwibGVnYWxSZWdpb24iLCJsZWdhbDo6dWRwYXRlIiwidXBkYXRlRGV0YWlsIiwiY2xpY2tIYW5kbGVyIiwiRVNDIiwiX2lzVmlzaWJsZSIsIm92ZXJsYXlDb250YWluZXI6Om9wZW4iLCJvdmVybGF5Q29udGFpbmVyOjpjbG9zZSIsImV2dCIsIm92ZXJsYXlLZXkiLCJjbG9zZU92ZXJsYXkiLCJvdmVybGF5OjpvcGVuIiwiZnVsbFNjcmVlbiIsImhpZGUiLCJzaG93OjpzcGlubmVyIiwiaGlkZTo6c3Bpbm5lciIsImN1cnJlbnRTdGVwIiwic3RlcCIsImlzRGlzYWJsZWQiLCJhY3RpdmVUYWJJbmRleCIsInRhYnMiLCJfZGVmaW5lUHJvcGVydHkiLCJpc0FjdGl2ZSIsImhhbmRsZVRhYkxpc3RDbGljayIsIl9zdGVwVHJhY2tlclBhZ2UiLCJfc3RlcFRyYWNrZXJQYWdlMiIsIl90YWJzUGFnZSIsIl90YWJzUGFnZTIiLCJfbGVnYWxQYWdlIiwiX2xlZ2FsUGFnZTIiLCJfb3ZlcmxheVBhZ2UiLCJfb3ZlcmxheVBhZ2UyIiwiX2NvbGxhcHNhYmxlUGFuZWxQYWdlIiwiX2NvbGxhcHNhYmxlUGFuZWxQYWdlMiIsIl9hbGVydFBhZ2UiLCJfYWxlcnRQYWdlMiIsIl9zcGlubmVyUGFnZSIsIl9zcGlubmVyUGFnZTIiLCIvIiwiL2FsZXJ0IiwiQWxlcnRQYWdlIiwiL3NwaW5uZXIiLCJTcGlubmVyUGFnZSIsIi9zdGVwLXRyYWNrZXIiLCJTdGVwVHJhY2tlclBhZ2UiLCIvdGFicyIsIlRhYnNQYWdlIiwiL2xlZ2FsIiwiTGVnYWxQYWdlIiwiL292ZXJsYXkiLCJPdmVybGF5UGFnZSIsIi9jb2xsYXBzYWJsZS1wYW5lbCIsIkNvbGxhcHNhYmxlUGFuZWxQYWdlIiwiZXZlbnRIYW5kbGVyIiwiX292ZXJsYXlPcGVuZXIiLCJfb3ZlcmxheU9wZW5lcjIiLCJfb3ZlcmxheUNvbnRhaW5lciIsIl9vdmVybGF5Q29udGFpbmVyMiIsIl9vdmVybGF5IiwiX292ZXJsYXkyIiwiX2xlZ2FsQ291bnRlciIsIl9sZWdhbENvdW50ZXIyIiwiX2xlZ2FsQ29udGFpbmVyIiwiX2xlZ2FsQ29udGFpbmVyMiIsIl90YWJzIiwiX3RhYnMyIiwiX3RhYiIsIl90YWIyIiwiX2luZGV4NSIsIl9pbmRleDYiLCJfaW5kZXg3IiwiX2luZGV4OCIsIlN0ZXBUcmFja2VyIiwiT3ZlcmxheUNvbnRhaW5lciIsIk92ZXJsYXkiLCJMZWdhbENvdW50ZXIiLCJMZWdhbENvbnRhaW5lciIsIlRhYnMiLCJUYWIiLCJDb2xsYXBzYWJsZVBhbmVsIiwiQWxlcnQiLCJTcGlubmVyIiwib3ZlcmxheU9wZW5lciIsIl9uYW1lIiwiX2xlbiIsInJlc3BvbnNlIiwiX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18iLCJsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24iLCJ4IiwibGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0Z1bmN0aW9uIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHNldFNjaGVkdWxlciIsInNjaGVkdWxlRm4iLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4iLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcCIsImFzYXBGbiIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVZlcnR4VGltZXIiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0IiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIiLCJpdGVyYXRpb25zIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsIiwiY2hhbm5lbCIsIk1lc3NhZ2VDaGFubmVsIiwicG9ydDEiLCJvbm1lc3NhZ2UiLCJwb3J0MiIsInBvc3RNZXNzYWdlIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVNldFRpbWVvdXQiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCIsInZlcnR4IiwicnVuT25Mb29wIiwicnVuT25Db250ZXh0IiwibGliJGVzNiRwcm9taXNlJHRoZW4kJHRoZW4iLCJvbkZ1bGZpbGxtZW50Iiwib25SZWplY3Rpb24iLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlIiwic3RhdGUiLCJfc3RhdGUiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayIsIl9yZXN1bHQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRyZXNvbHZlIiwiQ29uc3RydWN0b3IiLCJwcm9taXNlIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZSIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxmaWxsbWVudCIsIlR5cGVFcnJvciIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93biIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4iLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUiIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeVRoZW4iLCJmdWxmaWxsbWVudEhhbmRsZXIiLCJyZWplY3Rpb25IYW5kbGVyIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlIiwidGhlbmFibGUiLCJzZWFsZWQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0IiwiX2xhYmVsIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlT3duVGhlbmFibGUiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUiLCJtYXliZVRoZW5hYmxlIiwibGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQiLCJyZXNvbHZlIiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2hSZWplY3Rpb24iLCJfb25lcnJvciIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2giLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HIiwiX3N1YnNjcmliZXJzIiwic3Vic2NyaWJlcnMiLCJzZXR0bGVkIiwiZGV0YWlsIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QiLCJsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlDYXRjaCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUiIsInN1Y2NlZWRlZCIsImZhaWxlZCIsImhhc0NhbGxiYWNrIiwibGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UiLCJyZXNvbHZlciIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5leHRJZCIsImxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGlkIiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRhbGwiLCJsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJHJhY2UiLCJsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkiLCJyZWplY3QiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJHJlamVjdCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyIiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3IiwibGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UiLCJsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvciIsImlucHV0IiwiX2luc3RhbmNlQ29uc3RydWN0b3IiLCJfaW5wdXQiLCJfcmVtYWluaW5nIiwiX2VudW1lcmF0ZSIsImxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCR2YWxpZGF0aW9uRXJyb3IiLCJsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsIiwibG9jYWwiLCJQIiwiUHJvbWlzZSIsImNhc3QiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkiLCJsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93IiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwiLCJXZWJLaXRNdXRhdGlvbk9ic2VydmVyIiwibGliJGVzNiRwcm9taXNlJGFzYXAkJGlzTm9kZSIsImxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc1dvcmtlciIsIlVpbnQ4Q2xhbXBlZEFycmF5IiwiaW1wb3J0U2NyaXB0cyIsInJhbmRvbSIsInN1YnN0cmluZyIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdCIsImxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJGRlZmF1bHQiLCJhbGwiLCJyYWNlIiwiX3NldFNjaGVkdWxlciIsIl9zZXRBc2FwIiwiX2FzYXAiLCJjYXRjaCIsIl9lYWNoRW50cnkiLCJfc2V0dGxlZEF0IiwiX3dpbGxTZXR0bGVBdCIsImVudW1lcmF0b3IiLCJsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQiLCJsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlIiwicG9seWZpbGwiLCJub3JtYWxpemVOYW1lIiwibm9ybWFsaXplVmFsdWUiLCJpdGVyYXRvckZvciIsInN1cHBvcnQiLCJpdGVyYWJsZSIsIkhlYWRlcnMiLCJjb25zdW1lZCIsImJvZHlVc2VkIiwiZmlsZVJlYWRlclJlYWR5IiwicmVhZGVyIiwib25sb2FkIiwib25lcnJvciIsInJlYWRCbG9iQXNBcnJheUJ1ZmZlciIsImJsb2IiLCJGaWxlUmVhZGVyIiwicmVhZEFzQXJyYXlCdWZmZXIiLCJyZWFkQmxvYkFzVGV4dCIsInJlYWRBc1RleHQiLCJCb2R5IiwiX2luaXRCb2R5IiwiX2JvZHlJbml0IiwiX2JvZHlUZXh0IiwiQmxvYiIsImlzUHJvdG90eXBlT2YiLCJfYm9keUJsb2IiLCJmb3JtRGF0YSIsIkZvcm1EYXRhIiwiX2JvZHlGb3JtRGF0YSIsInNlYXJjaFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsImFycmF5QnVmZmVyIiwiQXJyYXlCdWZmZXIiLCJyZWplY3RlZCIsImRlY29kZSIsIm5vcm1hbGl6ZU1ldGhvZCIsInVwY2FzZWQiLCJSZXF1ZXN0IiwidXJsIiwiY3JlZGVudGlhbHMiLCJyZWZlcnJlciIsImZvcm0iLCJieXRlcyIsImRlY29kZVVSSUNvbXBvbmVudCIsInhociIsInBhaXJzIiwiZ2V0QWxsUmVzcG9uc2VIZWFkZXJzIiwiaGVhZGVyIiwiUmVzcG9uc2UiLCJib2R5SW5pdCIsInN0YXR1cyIsIm9rIiwic3RhdHVzVGV4dCIsInZhbHVlcyIsImdldEFsbCIsInRoaXNBcmciLCJjbG9uZSIsInJlZGlyZWN0U3RhdHVzZXMiLCJyZWRpcmVjdCIsIlJhbmdlRXJyb3IiLCJsb2NhdGlvbiIsInJlc3BvbnNlVVJMIiwiZ2V0UmVzcG9uc2VIZWFkZXIiLCJyZXF1ZXN0IiwiWE1MSHR0cFJlcXVlc3QiLCJyZXNwb25zZVRleHQiLCJvbnRpbWVvdXQiLCJ3aXRoQ3JlZGVudGlhbHMiLCJyZXNwb25zZVR5cGUiLCJzZXRSZXF1ZXN0SGVhZGVyIiwic2VuZCIsIkRhdGFWaWV3IiwiSGFzaCIsImhhc2hDbGVhciIsImhhc2hEZWxldGUiLCJoYXNoR2V0IiwiaGFzaEhhcyIsImhhc2hTZXQiLCJzZXRDYWNoZUFkZCIsInNldENhY2hlSGFzIiwiVWludDhBcnJheSIsIldlYWtNYXAiLCJwcmVkaWNhdGUiLCJGVU5DX0VSUk9SX1RFWFQiLCJiYXNlRmluZEluZGV4IiwiZnJvbUluZGV4IiwiZnJvbVJpZ2h0IiwiYmFzZUhhc0luIiwib2JqSXNBcnIiLCJvdGhJc0FyciIsIm9ialRhZyIsImFycmF5VGFnIiwib3RoVGFnIiwiZ2V0VGFnIiwib2JqZWN0VGFnIiwib2JqSXNPYmoiLCJvdGhJc09iaiIsImlzU2FtZVRhZyIsImlzVHlwZWRBcnJheSIsImVxdWFsQnlUYWciLCJvYmpJc1dyYXBwZWQiLCJvdGhJc1dyYXBwZWQiLCJvYmpVbndyYXBwZWQiLCJvdGhVbndyYXBwZWQiLCJlcXVhbE9iamVjdHMiLCJiYXNlSXNNYXRjaCIsIm1hdGNoRGF0YSIsIm5vQ3VzdG9taXplciIsIm9ialZhbHVlIiwiaXNNYXNrZWQiLCJwYXR0ZXJuIiwicmVJc05hdGl2ZSIsInJlSXNIb3N0Q3RvciIsInJlUmVnRXhwQ2hhciIsImJhc2VJdGVyYXRlZSIsImlkZW50aXR5IiwiYmFzZU1hdGNoZXNQcm9wZXJ0eSIsImJhc2VNYXRjaGVzIiwibmF0aXZlS2V5cyIsImdldE1hdGNoRGF0YSIsImhhc0luIiwiYmFzZVByb3BlcnR5RGVlcCIsImJhc2VUaW1lcyIsIml0ZXJhdGVlIiwiYmFzZVRvU3RyaW5nIiwic3ltYm9sVG9TdHJpbmciLCJzeW1ib2xQcm90byIsImNvcmVKc0RhdGEiLCJkYXRhVmlld1RhZyIsImJ5dGVMZW5ndGgiLCJieXRlT2Zmc2V0IiwiYnVmZmVyIiwiYXJyYXlCdWZmZXJUYWciLCJib29sVGFnIiwiZGF0ZVRhZyIsImVycm9yVGFnIiwibWVzc2FnZSIsIm51bWJlclRhZyIsInJlZ2V4cFRhZyIsIm1hcFRhZyIsIm1hcFRvQXJyYXkiLCJzZXRUYWciLCJzZXRUb0FycmF5Iiwic3ltYm9sVmFsdWVPZiIsIm9ialByb3BzIiwib2JqTGVuZ3RoIiwib3RoUHJvcHMiLCJza2lwQ3RvciIsIm9iakN0b3IiLCJvdGhDdG9yIiwibmF0aXZlR2V0UHJvdG90eXBlIiwiZ2V0UHJvdG90eXBlT2YiLCJwcm9taXNlVGFnIiwid2Vha01hcFRhZyIsImRhdGFWaWV3Q3RvclN0cmluZyIsIm1hcEN0b3JTdHJpbmciLCJwcm9taXNlQ3RvclN0cmluZyIsInNldEN0b3JTdHJpbmciLCJ3ZWFrTWFwQ3RvclN0cmluZyIsIkN0b3IiLCJjdG9yU3RyaW5nIiwiaGFzUGF0aCIsImhhc0Z1bmMiLCJIQVNIX1VOREVGSU5FRCIsIm1hc2tTcmNLZXkiLCJJRV9QUk9UTyIsInByb3RvIiwicG9wIiwic3RyaW5nIiwiTEFSR0VfQVJSQVlfU0laRSIsInJlUHJvcE5hbWUiLCJyZUVzY2FwZUNoYXIiLCJxdW90ZSIsImludm9rZUZ1bmMiLCJ0aW1lIiwibGFzdEFyZ3MiLCJsYXN0VGhpcyIsImxhc3RJbnZva2VUaW1lIiwibGVhZGluZ0VkZ2UiLCJ0aW1lcklkIiwidGltZXJFeHBpcmVkIiwibGVhZGluZyIsInJlbWFpbmluZ1dhaXQiLCJ0aW1lU2luY2VMYXN0Q2FsbCIsImxhc3RDYWxsVGltZSIsInRpbWVTaW5jZUxhc3RJbnZva2UiLCJtYXhpbmciLCJuYXRpdmVNaW4iLCJtYXhXYWl0Iiwic2hvdWxkSW52b2tlIiwidHJhaWxpbmdFZGdlIiwidHJhaWxpbmciLCJkZWJvdW5jZWQiLCJpc0ludm9raW5nIiwibmF0aXZlTWF4IiwibWF4IiwibWluIiwiZGVmYXVsdFZhbHVlIiwidHlwZWRBcnJheVRhZ3MiLCJmbG9hdDMyVGFnIiwiZmxvYXQ2NFRhZyIsImludDhUYWciLCJpbnQxNlRhZyIsImludDMyVGFnIiwidWludDhUYWciLCJ1aW50OENsYW1wZWRUYWciLCJ1aW50MTZUYWciLCJ1aW50MzJUYWciLCJtZW1vaXplZCIsIm90aGVyQXJncyIsIk1BWF9JTlRFR0VSIiwiX3NlbGYiLCJXb3JrZXJHbG9iYWxTY29wZSIsIlByaXNtIiwidW5pcXVlSWQiLCJlbmNvZGUiLCJUb2tlbiIsIm8iLCJvYmpJZCIsInYiLCJsYW5ndWFnZXMiLCJyZWRlZiIsImluc2lkZSIsImdyYW1tYXIiLCJuZXdUb2tlbiIsIkRGUyIsInZpc2l0ZWQiLCJwbHVnaW5zIiwiZWxlbWVudCIsImVsZW1lbnRzIiwiaGlnaGxpZ2h0RWxlbWVudCIsImxhbmd1YWdlIiwibm9kZU5hbWUiLCJXb3JrZXIiLCJ3b3JrZXIiLCJmaWxlbmFtZSIsImhpZ2hsaWdodGVkQ29kZSIsImltbWVkaWF0ZUNsb3NlIiwiaGlnaGxpZ2h0IiwidG9rZW5pemUiLCJzdHJhcnIiLCJ0b2tlbmxvb3AiLCJwYXR0ZXJucyIsImxvb2tiZWhpbmQiLCJncmVlZHkiLCJsb29rYmVoaW5kTGVuZ3RoIiwiZGVsTnVtIiwibmV4dFRva2VuIiwibWF0Y2hlZFN0ciIsImNvbWJTdHIiLCJ3cmFwcGVkIiwiY2xhc3NlcyIsImFsaWFzZXMiLCJjdXJyZW50U2NyaXB0IiwicmVhZHlTdGF0ZSIsIm1hcmt1cCIsImNvbW1lbnQiLCJwcm9sb2ciLCJkb2N0eXBlIiwiY2RhdGEiLCJwdW5jdHVhdGlvbiIsIm5hbWVzcGFjZSIsImF0dHItdmFsdWUiLCJhdHRyLW5hbWUiLCJlbnRpdHkiLCJ4bWwiLCJtYXRobWwiLCJzdmciLCJhdHJ1bGUiLCJydWxlIiwiaW1wb3J0YW50IiwiZnVuY3Rpb24iLCJzdHlsZS1hdHRyIiwiY2xpa2UiLCJjbGFzcy1uYW1lIiwia2V5d29yZCIsImJvb2xlYW4iLCJvcGVyYXRvciIsImphdmFzY3JpcHQiLCJyZWdleCIsInRlbXBsYXRlLXN0cmluZyIsImludGVycG9sYXRpb24iLCJpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uIiwianMiLCJmaWxlSGlnaGxpZ2h0IiwiRXh0ZW5zaW9ucyIsInB5IiwicmIiLCJwczEiLCJwc20xIiwic2giLCJiYXQiLCJoIiwidGV4IiwicHJlIiwiZXh0ZW5zaW9uIiwib25yZWFkeXN0YXRlY2hhbmdlIiwiVGFyZ2V0IiwibWF0Y2hlciIsImRlbGVnYXRlIiwiTWF0Y2hlciIsInJvdXRlcyIsImdlbmVyYXRlTWF0Y2giLCJzdGFydGluZ1BhdGgiLCJuZXN0ZWRDYWxsYmFjayIsImZ1bGxQYXRoIiwiYWRkUm91dGUiLCJyb3V0ZUFycmF5Iiwic3Vic3RyIiwicm91dGUiLCJlYWNoUm91dGUiLCJiYXNlUm91dGUiLCJhZGRSb3V0ZUNhbGxiYWNrIiwibm9XYXJuaW5nIiwidHJ5RGVjb2RlIiwidXJpIiwiYXNDb21wb25lbnQiLCJkZWNvZGVVUkkiLCJTdGF0aWNTZWdtZW50IiwiRHluYW1pY1NlZ21lbnQiLCJTdGFyU2VnbWVudCIsIkVwc2lsb25TZWdtZW50Iiwic3BlY2lmaWNpdHkiLCJzZWdtZW50cyIsInJlc3VsdHMiLCJzZWdtZW50IiwiU3RhdGUiLCJjaGFyU3BlYyIsIm5leHRTdGF0ZXMiLCJzb3J0U29sdXRpb25zIiwic3RhdGVzIiwicmVjb2duaXplQ2hhciIsIlJlY29nbml6ZVJlc3VsdHMiLCJxdWVyeVBhcmFtcyIsImZpbmRIYW5kbGVyIiwiY2FwdHVyZXMiLCJjdXJyZW50Q2FwdHVyZSIsImlzRHluYW1pYyIsImFkZFNlZ21lbnQiLCJjdXJyZW50U3RhdGUiLCJlYWNoQ2hhciIsImRlY29kZVF1ZXJ5UGFyYW1QYXJ0Iiwid2FybiQxIiwicmVzb2x2ZVBhdGgiLCJiYXNlIiwicmVsYXRpdmUiLCJpc1Byb21pc2UiLCJnZXRSb3V0ZUNvbmZpZyIsInJlc29sdmVBc3luY0NvbXBvbmVudCIsImV4cG9ydHMkMSIsIm1hcFBhcmFtcyIsImdlblF1ZXJ5IiwiY2FuUmV1c2UiLCJ2aWV3IiwiY2FuUmV1c2VGbiIsImNhbkRlYWN0aXZhdGUiLCJmcm9tQ29tcG9uZW50IiwiZXhwZWN0Qm9vbGVhbiIsImNhbkFjdGl2YXRlIiwiYWJvcnRlZCIsImRlYWN0aXZhdGUiLCJjYWxsSG9va3MiLCJyZXVzZSIsImFjdGl2YXRlUXVldWUiLCJzYXZlQ2hpbGRWaWV3IiwiYWN0aXZhdGVIb29rIiwiZGF0YUhvb2siLCJ3YWl0Rm9yRGF0YSIsImFjdGl2YXRlZCIsImxvYWRpbmciLCIkbG9hZGluZ1JvdXRlRGF0YSIsIl9yb3V0ZXJWaWV3IiwiY2FjaGVkQ2hpbGRWaWV3IiwiX2tlZXBBbGl2ZVJvdXRlclZpZXciLCJjaGlsZFZpZXciLCJfcmVuZGVyZWQiLCJfdHJhbnNpdGlvbk9uTG9hZCIsInNldEN1cnJlbnQiLCJhZnRlckRhdGEiLCJhZnRlckFjdGl2YXRlIiwibG9hZERhdGEiLCJwb3N0QWN0aXZhdGUiLCJwcm9jZXNzRGF0YSIsInByb21pc2VzIiwicmVzb2x2ZWRWYWwiLCJpc1BsYWluT2piZWN0IiwiYXBwbHlPdmVycmlkZSIsIl9WdWUkdXRpbCIsIl9wYXJlbnQiLCIkcm91dGVyIiwiJHJvdXRlIiwiX2NoaWxkcmVuIiwiX2RlZmluZU1ldGEiLCJob29rc1RvTWVyZ2VSRSIsIlZpZXciLCJjb21wb25lbnREZWYiLCJ2aWV3RGVmIiwiX2lzRHluYW1pY0xpdGVyYWwiLCJwYXJlbnRWaWV3IiwiX3Jvb3RWaWV3IiwiX2N1cnJlbnRUcmFuc2l0aW9uIiwiZWxlbWVudERpcmVjdGl2ZSIsIkxpbmsiLCJzYW1lT3JpZ2luIiwicHJvdG9jb2wiLCJob3N0bmFtZSIsInBvcnQiLCJ0b2dnbGVDbGFzc2VzIiwib25Qcmlvcml0eSIsIkxJTktfVVBEQVRFIiwiYWN0aXZlSWQiLCJjaGlsZExpbmtzIiwiZXhpc3RpbmdJZCIsImFjdGl2ZUlkcyIsInVwZGF0ZUNsYXNzZXMiLCJvblJvdXRlVXBkYXRlIiwib25DbGljayIsImV4YWN0IiwicHJldkFjdGl2ZUNsYXNzIiwiYWN0aXZlQ2xhc3MiLCJtZXRhS2V5IiwiY3RybEtleSIsInNoaWZ0S2V5IiwiZGVmYXVsdFByZXZlbnRlZCIsImJ1dHRvbiIsImdvIiwicGF0aG5hbWUiLCJoaXN0b3J5Iiwicm9vdFJFIiwibmV3UGF0aCIsInN0cmluZ2lmeVBhdGgiLCJ1cGRhdGVBY3RpdmVNYXRjaCIsInVwZGF0ZUhyZWYiLCJhY3RpdmVSRSIsInF1ZXJ5U3RyaW5nUkUiLCJpc0Fic29sdXRlIiwiaHJlZiIsImZvcm1hdFBhdGgiLCJfbGlua0FjdGl2ZUNsYXNzIiwiZGVzdCIsInRyYWlsaW5nU2xhc2hSRSIsImd1YXJkQ29tcG9uZW50IiwiY29tcCIsImJhYmVsSGVscGVycyIsImNsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJ3aWxsQWRkUm91dGUiLCJhZGRDaGlsZCIsImNvbnRleHRFbnRlcmVkIiwic3BlY2lhbHMiLCJ2YWxpZENoYXJzIiwiZ2VuZXJhdGUiLCJpbnZhbGlkQ2hhcnMiLCJyZXBlYXQiLCJpc0VxdWFsIiwiY2hhcnMiLCJyZXR1cm5lZCIsIm9DcmVhdGUiLCJGIiwiUm91dGVSZWNvZ25pemVyIiwicm9vdFN0YXRlIiwiYWxsU2VnbWVudHMiLCJpc0VtcHR5IiwiYXMiLCJoYW5kbGVyc0ZvciIsImhhc1JvdXRlIiwib3V0cHV0IiwiZ2VuZXJhdGVRdWVyeVN0cmluZyIsInBhaXIiLCJhcnJheVBhaXIiLCJwYXJzZVF1ZXJ5U3RyaW5nIiwicXVlcnlTdHJpbmciLCJrZXlMZW5ndGgiLCJyZWNvZ25pemUiLCJwYXRoTGVuIiwicXVlcnlTdGFydCIsImlzU2xhc2hEcm9wcGVkIiwic29sdXRpb25zIiwiaGFzaFJFIiwiSFRNTDVIaXN0b3J5Iiwib25DaGFuZ2UiLCJiYXNlRWwiLCJyZXBsYWNlU3RhdGUiLCJwb3MiLCJwYWdlWE9mZnNldCIsInkiLCJwYWdlWU9mZnNldCIsInB1c2hTdGF0ZSIsImhhc2hNYXRjaCIsIkhhc2hIaXN0b3J5IiwiaGFzaGJhbmciLCJmb3JtYXR0ZWRQYXRoIiwiaXNBYnNvbG91dGUiLCJBYnN0cmFjdEhpc3RvcnkiLCJjdXJyZW50UGF0aCIsIlJvdXRlVHJhbnNpdGlvbiIsImFib3J0IiwiYWJvcnRpbmdPbkxvYWQiLCJkZWFjdGl2YXRlUXVldWUiLCJyZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlIiwicmV2ZXJzZSIsInJldXNlUXVldWUiLCJydW5RdWV1ZSIsIl9vblRyYW5zaXRpb25WYWxpZGF0ZWQiLCJfdmlldyIsIl9yZWYkZXhwZWN0Qm9vbGVhbiIsIl9yZWYkcG9zdEFjdGl2YXRlIiwibmV4dENhbGxlZCIsIm9uRXJyb3IiLCJlcnIiLCJfc3VwcHJlc3MiLCJvblByb21pc2VFcnJvciIsIm5leHRXaXRoQm9vbGVhbiIsIm5leHRXaXRoRGF0YSIsImV4cG9zZWQiLCJpbnRlcm5hbEtleXNSRSIsIlJvdXRlIiwiX3JlY29nbml6ZXIiLCJfbm90Rm91bmRIYW5kbGVyIiwiaGlzdG9yeUJhY2tlbmRzIiwiYWJzdHJhY3QiLCJodG1sNSIsIlJvdXRlciIsIl9yZWYkaGFzaGJhbmciLCJfcmVmJGFic3RyYWN0IiwiX3JlZiRoaXN0b3J5IiwiX3JlZiRzYXZlU2Nyb2xsUG9zaXRpb24iLCJzYXZlU2Nyb2xsUG9zaXRpb24iLCJfcmVmJHRyYW5zaXRpb25PbkxvYWQiLCJ0cmFuc2l0aW9uT25Mb2FkIiwiX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvciIsInN1cHByZXNzVHJhbnNpdGlvbkVycm9yIiwiX3JlZiRyb290IiwiX3JlZiRsaW5rQWN0aXZlQ2xhc3MiLCJsaW5rQWN0aXZlQ2xhc3MiLCJhcHAiLCJfZ3VhcmRSZWNvZ25pemVyIiwiX3N0YXJ0ZWQiLCJfc3RhcnRDYiIsIl9jdXJyZW50Um91dGUiLCJfcHJldmlvdXNUcmFuc2l0aW9uIiwiX25vdEZvdW5kUmVkaXJlY3QiLCJfYmVmb3JlRWFjaEhvb2tzIiwiX2FmdGVyRWFjaEhvb2tzIiwiX3Jvb3QiLCJfYWJzdHJhY3QiLCJfaGFzaGJhbmciLCJoYXNQdXNoU3RhdGUiLCJfaGlzdG9yeSIsIl9oaXN0b3J5RmFsbGJhY2siLCJIaXN0b3J5IiwiX21hdGNoIiwiX3NhdmVTY3JvbGxQb3NpdGlvbiIsIl9tYXAiLCJyb290UGF0aCIsIl9ub3RGb3VuZCIsIl9hZGRSb3V0ZSIsIl9hZGRSZWRpcmVjdCIsIl9hZGRBbGlhcyIsImJlZm9yZUVhY2giLCJfYXBwQ29udGFpbmVyIiwiX2FwcENvbnN0cnVjdG9yIiwiX2xvY2F0aW9uIiwiZ2VuZXJhdGVkUGF0aCIsImN1cnJlbnRQYXJhbXMiLCJ0YXJnZXRQYXJhbXMiLCJlbmNvZGVVUkkiLCJzdWJSb3V0ZXMiLCJzdWJQYXRoIiwicmVkaXJlY3RQYXRoIiwiX2FkZEd1YXJkIiwiYWxpYXNQYXRoIiwibWFwcGVkUGF0aCIsIl9oYW5kbGVyIiwicmVhbFBhdGgiLCJfY2hlY2tHdWFyZCIsIl90aGlzMyIsImN1cnJlbnRSb3V0ZSIsImN1cnJlbnRUcmFuc2l0aW9uIiwiX3ByZXZUcmFuc2l0aW9uIiwiYmVmb3JlSG9va3MiLCJzdGFydFRyYW5zaXRpb24iLCJfcG9zdFRyYW5zaXRpb24iLCJzY3JvbGxUbyIsInNjcm9sbFgiLCJvZmZzZXRUb3AiLCJleHRlcm5hbFZ1ZSIsImxvY2FscyIsIndlYnBhY2tQb2x5ZmlsbCIsImRlcHJlY2F0ZSIsInBhdGhzIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ2tDbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUFyREEsR0FBQUssR0FBQUMsT0FBQSxZQUNBQSxRQUFBLHNCQUFBQyxFQUFBQyxHQUlBLElBREEsR0FBQVYsR0FBQVcsRUFBQUMsRUFBQSxFQUFBQyxLQUNRRCxFQUFBSCxFQUFBSyxPQUFvQkYsSUFDNUJELEVBQUFGLEVBQUFHLEdBQ0FHLEVBQUFKLElBQ0FFLEVBQUFHLEtBQUFDLE1BQUFKLEVBQUFFLEVBQUFKLElBQ0FJLEVBQUFKLEdBQUEsQ0FFQSxLQUFBWCxJQUFBVSxHQUNBWixFQUFBRSxHQUFBVSxFQUFBVixFQUdBLEtBREFPLEtBQUFFLEVBQUFDLEdBQ0FHLEVBQUFDLFFB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UCxFQUFTLGNBQzdCc0ssT0FBTyxHK0NqdVhWLElBQUFwSCxHQUFBckQsRUFBQSxHL0NzdVhLc0QsRUFBVWYsRUFBdUJjLEVBSXJDbEQsZUFDRTRELFkrQ3Z1WEhpNUMsU0FBQTE1QyxjL0MwdVhHWSxLQUFNLFdBQ0osT0FDRSs0QyxnQkFBaUIsV0FDZi9ZLFFBQVFDLEkrQ3p1WGpCLGEvQzR1WE8rWSxXQUNFenRDLEsrQzF1WFQsTy9DMnVYUzFOLEsrQzF1WFQsUy9DMnVYU283QyxZK0MxdVhULEUvQzJ1WFN6NkMsVStDMXVYVCxNL0MydVhTMDZDLEsrQzF1WFQsNkMvQzR1WFMzdEMsSytDMXVYVCxjL0MydVhTMU4sSytDMXVYVCxVL0MydVhTbzdDLFkrQzF1WFQsRS9DMnVYU3o2QyxXK0MxdVhULEUvQzJ1WFMwNkMsSytDMXVYVCw4Qi9DNHVYUzN0QyxLK0MxdVhULFUvQzJ1WFMxTixLK0MxdVhULFMvQzJ1WFNvN0MsWStDMXVYVCxFL0MydVhTejZDLGFBQ0EwNkMsSytDMXVYVCw2Qy9DNHVYUzN0QyxLK0MxdVhULFcvQzJ1WFMxTixLK0MxdVhULFcvQzJ1WFNvN0MsWStDMXVYVCxFL0MydVhTejZDLFUrQzF1WFQsTS9DMnVYUzA2QyxLK0N4dVhULDZEL0N3eFhNLFNBQVNoOUMsRUFBUUQsRUFBU0gsR0FFL0IsWUFVQSxTQUFTdUMsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsVUFBU0YsR0FSdkY2SixPQUFPeUQsZUFBZTNQLEVBQVMsY0FDN0JzSyxPQUFPLEdnRC96WFYsSUFBQXBILEdBQUFyRCxFQUFBLEdoRG8wWEtzRCxFQUFVZixFQUF1QmMsRUFJckNsRCxlQUNFNEQsWWdEcjBYSGk1QyxTQUFBMTVDLGNoRHcwWEdZLEtBQU0sV0FDSixPQUNFZzVDLFdBQ0V6dEMsS2dEdjBYVCxRaER3MFhTMU4sS2dEdjBYVCxTaER3MFhTbzdDLFlnRHYwWFQsRWhEdzBYU3o2QyxVZ0R2MFhULE1oRHcwWFMwNkMsS2dEdjBYVCwyQmhEeTBYUzN0QyxLZ0R2MFhULFNoRHcwWFMx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ejZDLFVtRHRwWVQsS25EdXBZUzA2QyxLbUR0cFlULDJDbkR3cFlTM3RDLEttRHRwWVQsZ0JuRHVwWVMxTixLbUR0cFlULFFuRHVwWVNvN0MsWW1EdHBZVCxFbkR1cFlTejZDLFVtRHRwWVQsTW5EdXBZUzA2QyxLbUR0cFlULHVCbkR3cFlTM3RDLEttRHRwWVQsZ0JuRHVwWVMxTixLbUR0cFlULFFuRHVwWVNvN0MsWW1EdHBZVCxFbkR1cFlTejZDLFVtRHRwWVQsTW5EdXBZUzA2QyxLbURwcFlULHlCbkRzc1lNLFNBQVNoOUMsRUFBUUQsRUFBU0gsR0FFL0IsWUFVQSxTQUFTdUMsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsVUFBU0YsR0FSdkY2SixPQUFPeUQsZUFBZTNQLEVBQVMsY0FDN0JzSyxPQUFPLEdvRG51WVYsSUFBQXBILEdBQUFyRCxFQUFBLEdwRHd1WUtzRCxFQUFVZixFQUF1QmMsRUFJckNsRCxlQUNFNEQsWW9EenVZSGk1QyxTQUFBMTVDLGNwRDR1WUdZLEtBQU0sV29EM3VZVCxHQUFBZ00sR0FBQXJMLElwRDh1WUssUUFDRSs0Qyx1Qm9EN3VZUCxFcEQ4dVlPQyxtQkFDRUMsYW9EN3VZVCxFcEQ4dVlTQyxRQUNFcHZDLE1vRDV1WVgsU3BENnVZV3F2QyxLb0Q1dVlYLEdwRDZ1WVdDLGVBQWdCLFNBQXdCeCtCLEdBQ3RDdlAsRUFBTTB0Qyx1Qm9ENXVZbkIsS3BEK3VZV2p2QyxNb0QzdVlYLFNwRDR1WVdxdkMsS29EM3VZWCxHcEQ0dVlXQyxlQUFnQixTQUF3QngrQixHQUN0Q3ZQLEVBQU0wdEMsdUJvRDN1WW5CLEtwRDh1WVdqdkMsTW9EMXVZWCxTcEQydVlXcXZDLEtvRDF1WVgsR3BEMnVZV0MsZUFBZ0IsU0FBd0J4K0IsR0FDdEN2UCxFQUFNMHRDLHVCb0QxdVluQixNcEQ4dVlPVixXQUNFenRDLEtvRHp1WVQsY3BEMHVZUzFOLEtvRHp1WVQsVXBEMHVZU283QyxZb0R6dVlULEVwRDB1WVN6NkMsVW9EenVZVCxFcEQwdVlTMDZDLEtvRHp1WVQsU3BEMnVZUzN0QyxLb0R6dVlULFNwRDB1WVMxTixLb0R6dVlULFNwRDB1WVNvN0MsWW9EenVZVCxFcEQwdVlTejZDLFVvRHp1WVQsTXBEMHVZUzA2QyxLb0R6dVlULFNwRDJ1WVMzdEMsS29EenVZVCxlcEQwdVlTMU4sS29EenVZVCxTcEQwdVlTbzdDLFlvRHp1WVQsRXBEMHVZU3o2QyxVb0R6dVlULE1wRDB1WVMwNkMsS29EenVZVCwwQnBEMnVZUzN0QyxLb0R6dVlULGNwRDB1WVMxTixLb0R6dVlULFNwRDB1WVNvN0MsWW9EenVZVCxFcEQwdVlTejZDLFVvRHp1WVQsTXBEMHVZUzA2QyxLb0R6dVlULDJCcEQydVlTM3RDLEtvRHp1WVQsd0JwRDB1WVMxTixLb0R6dVlULFdwRDB1WVNvN0MsWW9EenVZVCxFcEQwdVlTejZDLFVvRHp1WVQsTXBEMHVZUzA2QyxLb0R2dVlULG9EcER3ellNLFNBQVNoOUMsRUFBUUQsRUFBU0gsR0FFL0IsWUFVQSxTQUFTdUMsR0FBdUJDLEdBQU8sTUFBT0EsSUFBT0EsRUFBSUMsV0FBYUQsR0FBUUUsVUFBU0YsR0FSdkY2SixPQUFPeUQsZUFBZTNQLEVBQVMsY0FDN0JzSyxPQUFPLEdxRHo0WVYsSUFBQXBILEdBQUFyRCxFQUFBLEdyRDg0WUtzRCxFQUFVZixFQUF1QmMsRUFJckNsRCxlQUNFNEQsWXFELzRZSGk1QyxTQUFBMTVDLGNyRGs1WUdZLEtBQU0sV0FDSixPQUNFZzVDLFdBQ0V6dEMsS3FEajVZVCxRckRrNVlTMU4sS3FEajVZVCxTckRrNVlTbzdDLFlxRGo1WVQsRXJEazVZU3o2QyxVcURqNVlULE1yRGs1WVMwNkMsS3FEajVZVCx5QnJEbTVZUzN0QyxLcURqNVlULGFyRGs1WVMxTixLcURqNVlULFVyRGs1WVNvN0MsWXFEajVZVCxFckRrNVlTejZDLFdxRGo1WVQsRXJEazVZUzA2QyxLcUQvNFlULGdGckRxOVlNLFNBQVNoOUMsRUFBUUQsR0FFdEIsWUFFQWtNLFFBQU95RCxlQUFlM1AsRUFBUyxjQUM3QnNLLE9BQU8sSUFZVHRLLGNBQ0UrRCxLQUFNLFdBQ0os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QTRVLElBQ0ssZUFBQTVWLEVBQUFNLElBQUF3UCxVQUFBZ3FCLElBQUEsY0FBQXQvQixLQUFBdEksT0FBQXVJLFVBQUFDLFlBQ0xpN0IsUUFBQUMsSUFBQSwyR0FHQyxHQUVEL2pDLEVBQUFELFFBQUFna0IsS3hOaXpyQjhCNWpCLEtBQUtKLEVBQVUsV0FBYSxNQUFPMEUsU0FBWTdFLEVBQW9CLE1BSTNGLFNBQVNJLEVBQVFELEd5TjlvL0J2QkMsRUFBQUQsUUFBQSxXQUE2QixTQUFBdUcsT0FBQSxvQ3pOcXAvQnZCLFNBQVN0RyxFQUFRRCxHME5ycC9CdkJDLEVBQUFELFFBQUEsU0FBQUMsR0FRQSxNQVBBQSxHQUFBc3pFLGtCQUNBdHpFLEVBQUF1ekUsVUFBQSxhQUNBdnpFLEVBQUF3ekUsU0FFQXh6RSxFQUFBa29CLFlBQ0Fsb0IsRUFBQXN6RSxnQkFBQSxHQUVBdHpFLEkxTjZwL0JNLFNBQVNBLEVBQVFEIiwiZmlsZSI6InZ1ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gaW5zdGFsbCBhIEpTT05QIGNhbGxiYWNrIGZvciBjaHVuayBsb2FkaW5nXG4vKioqKioqLyBcdHZhciBwYXJlbnRKc29ucEZ1bmN0aW9uID0gd2luZG93W1wid2VicGFja0pzb25wXCJdO1xuLyoqKioqKi8gXHR3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSBmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhjaHVua0lkcywgbW9yZU1vZHVsZXMpIHtcbi8qKioqKiovIFx0XHQvLyBhZGQgXCJtb3JlTW9kdWxlc1wiIHRvIHRoZSBtb2R1bGVzIG9iamVjdCxcbi8qKioqKiovIFx0XHQvLyB0aGVuIGZsYWcgYWxsIFwiY2h1bmtJZHNcIiBhcyBsb2FkZWQgYW5kIGZpcmUgY2FsbGJhY2tcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCBjYWxsYmFja3MgPSBbXTtcbi8qKioqKiovIFx0XHRmb3IoO2kgPCBjaHVua0lkcy5sZW5ndGg7IGkrKykge1xuLyoqKioqKi8gXHRcdFx0Y2h1bmtJZCA9IGNodW5rSWRzW2ldO1xuLyoqKioqKi8gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKVxuLyoqKioqKi8gXHRcdFx0XHRjYWxsYmFja3MucHVzaC5hcHBseShjYWxsYmFja3MsIGluc3RhbGxlZENodW5rc1tjaHVua0lkXSk7XG4vKioqKioqLyBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSAwO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRmb3IobW9kdWxlSWQgaW4gbW9yZU1vZHVsZXMpIHtcbi8qKioqKiovIFx0XHRcdG1vZHVsZXNbbW9kdWxlSWRdID0gbW9yZU1vZHVsZXNbbW9kdWxlSWRdO1xuLyoqKioqKi8gXHRcdH1cbi8qKioqKiovIFx0XHRpZihwYXJlbnRKc29ucEZ1bmN0aW9uKSBwYXJlbnRKc29ucEZ1bmN0aW9uKGNodW5rSWRzLCBtb3JlTW9kdWxlcyk7XG4vKioqKioqLyBcdFx0d2hpbGUoY2FsbGJhY2tzLmxlbmd0aClcbi8qKioqKiovIFx0XHRcdGNhbGxiYWNrcy5zaGlmdCgpLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gb2JqZWN0IHRvIHN0b3JlIGxvYWRlZCBhbmQgbG9hZGluZyBjaHVua3Ncbi8qKioqKiovIFx0Ly8gXCIwXCIgbWVhbnMgXCJhbHJlYWR5IGxvYWRlZFwiXG4vKioqKioqLyBcdC8vIEFycmF5IG1lYW5zIFwibG9hZGluZ1wiLCBhcnJheSBjb250YWlucyBjYWxsYmFja3Ncbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZENodW5rcyA9IHtcbi8qKioqKiovIFx0XHQwOjAsXG4vKioqKioqLyBcdFx0MTowLFxuLyoqKioqKi8gXHRcdDI6MFxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGlzIGZpbGUgY29udGFpbnMgb25seSB0aGUgZW50cnkgY2h1bmsuXG4vKioqKioqLyBcdC8vIFRoZSBjaHVuayBsb2FkaW5nIGZ1bmN0aW9uIGZvciBhZGRpdGlvbmFsIGNodW5rc1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSBmdW5jdGlvbiByZXF1aXJlRW5zdXJlKGNodW5rSWQsIGNhbGxiYWNrKSB7XG4vKioqKioqLyBcdFx0Ly8gXCIwXCIgaXMgdGhlIHNpZ25hbCBmb3IgXCJhbHJlYWR5IGxvYWRlZFwiXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID09PSAwKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIGFuIGFycmF5IG1lYW5zIFwiY3VycmVudGx5IGxvYWRpbmdcIi5cbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gIT09IHVuZGVmaW5lZCkge1xuLyoqKioqKi8gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdLnB1c2goY2FsbGJhY2spO1xuLyoqKioqKi8gXHRcdH0gZWxzZSB7XG4vKioqKioqLyBcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG4vKioqKioqLyBcdFx0XHRpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPSBbY2FsbGJhY2tdO1xuLyoqKioqKi8gXHRcdFx0dmFyIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdO1xuLyoqKioqKi8gXHRcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuLyoqKioqKi8gXHRcdFx0c2NyaXB0LnR5cGUgPSAndGV4dC9qYXZhc2NyaXB0Jztcbi8qKioqKiovIFx0XHRcdHNjcmlwdC5jaGFyc2V0ID0gJ3V0Zi04Jztcbi8qKioqKiovIFx0XHRcdHNjcmlwdC5hc3luYyA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdFx0c2NyaXB0LnNyYyA9IF9fd2VicGFja19yZXF1aXJlX18ucCArIFwiXCIgKyBjaHVua0lkICsgXCIuYXBwLmpzXCI7XG4vKioqKioqLyBcdFx0XHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9oeWJyaWQtdGhvcml1bS9kZXYvYXBwL1wiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9WdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQzKTtcblx0XG5cdHZhciBfVnVlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX1Z1ZSk7XG5cdFxuXHR2YXIgX3Z1ZVJvdXRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMjAzKTtcblx0XG5cdHZhciBfdnVlUm91dGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3Z1ZVJvdXRlcik7XG5cdFxuXHR2YXIgX3JvdXRlcyA9IF9fd2VicGFja19yZXF1aXJlX18oNjUpO1xuXHRcblx0dmFyIF9yb3V0ZXMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfcm91dGVzKTtcblx0XG5cdHZhciBfaHlicmlkVGhvcml1bSA9IF9fd2VicGFja19yZXF1aXJlX18oNjcpO1xuXHRcblx0dmFyIF9oeWJyaWRUaG9yaXVtMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2h5YnJpZFRob3JpdW0pO1xuXHRcblx0dmFyIF9wcmlzbWpzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjEpO1xuXHRcblx0dmFyIF9wcmlzbWpzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3ByaXNtanMpO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMTgzKTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0dmFyIF9pbmRleDMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE4NCk7XG5cdFxuXHR2YXIgX2luZGV4NCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4Myk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0X1Z1ZTIuZGVmYXVsdC5jb25maWcuZGVidWcgPSB0cnVlO1xuXHRcblx0X1Z1ZTIuZGVmYXVsdC51c2UoX3Z1ZVJvdXRlcjIuZGVmYXVsdCk7XG5cdF9WdWUyLmRlZmF1bHQudXNlKF9oeWJyaWRUaG9yaXVtMi5kZWZhdWx0KTtcblx0XG5cdHZhciByb3V0ZXIgPSBuZXcgX3Z1ZVJvdXRlcjIuZGVmYXVsdCgpO1xuXHR2YXIgQXBwID0gX1Z1ZTIuZGVmYXVsdC5leHRlbmQoe1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIFNpZGVOYXY6IF9pbmRleDIuZGVmYXVsdCxcblx0ICAgIFNpdGVIZWFkZXI6IF9pbmRleDQuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGxpZ2VyRW5kUG9pbnQ6ICdodHRwczovL2FwaS5jbXMudGVsdXMuY29tL2xlZ2FscycsXG5cdCAgICAgIGxpZ2VyQXBwbGljYXRpb25LZXk6ICdiOTczOGQ2N2I4OWRmYzc4Mjc0NmQ0YTljZjRhMTA5Mydcblx0ICAgIH07XG5cdCAgfVxuXHR9KTtcblx0cm91dGVyLm1hcChfcm91dGVzMi5kZWZhdWx0KTtcblx0cm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAoKSB7XG5cdCAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICBfcHJpc21qczIuZGVmYXVsdC5oaWdobGlnaHRBbGwoKTtcblx0ICB9LCAwKTtcblx0fSk7XG5cdHJvdXRlci5zdGFydChBcHAsICcjYXBwLW1haW4nKTtcblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qXHJcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxyXG5cdFx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG5cdCovXHJcblx0Ly8gY3NzIGJhc2UgY29kZSwgaW5qZWN0ZWQgYnkgdGhlIGNzcy1sb2FkZXJcclxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0dmFyIGxpc3QgPSBbXTtcclxuXHRcclxuXHRcdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRcdGxpc3QudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZygpIHtcclxuXHRcdFx0dmFyIHJlc3VsdCA9IFtdO1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpdGVtID0gdGhpc1tpXTtcclxuXHRcdFx0XHRpZihpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHJlc3VsdC5wdXNoKGl0ZW1bMV0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gcmVzdWx0LmpvaW4oXCJcIik7XHJcblx0XHR9O1xyXG5cdFxyXG5cdFx0Ly8gaW1wb3J0IGEgbGlzdCBvZiBtb2R1bGVzIGludG8gdGhlIGxpc3RcclxuXHRcdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0aWYodHlwZW9mIG1vZHVsZXMgPT09IFwic3RyaW5nXCIpXHJcblx0XHRcdFx0bW9kdWxlcyA9IFtbbnVsbCwgbW9kdWxlcywgXCJcIl1dO1xyXG5cdFx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHRcdHZhciBpZCA9IHRoaXNbaV1bMF07XHJcblx0XHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdFx0YWxyZWFkeUltcG9ydGVkTW9kdWxlc1tpZF0gPSB0cnVlO1xyXG5cdFx0XHR9XHJcblx0XHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0XHR2YXIgaXRlbSA9IG1vZHVsZXNbaV07XHJcblx0XHRcdFx0Ly8gc2tpcCBhbHJlYWR5IGltcG9ydGVkIG1vZHVsZVxyXG5cdFx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdFx0Ly8gIHdoZW4gYSBtb2R1bGUgaXMgaW1wb3J0ZWQgbXVsdGlwbGUgdGltZXMgd2l0aCBkaWZmZXJlbnQgbWVkaWEgcXVlcmllcy5cclxuXHRcdFx0XHQvLyAgSSBob3BlIHRoaXMgd2lsbCBuZXZlciBvY2N1ciAoSGV5IHRoaXMgd2F5IHdlIGhhdmUgc21hbGxlciBidW5kbGVzKVxyXG5cdFx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0XHRpZihtZWRpYVF1ZXJ5ICYmICFpdGVtWzJdKSB7XHJcblx0XHRcdFx0XHRcdGl0ZW1bMl0gPSBtZWRpYVF1ZXJ5O1xyXG5cdFx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdFx0aXRlbVsyXSA9IFwiKFwiICsgaXRlbVsyXSArIFwiKSBhbmQgKFwiICsgbWVkaWFRdWVyeSArIFwiKVwiO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fTtcclxuXHRcdHJldHVybiBsaXN0O1xyXG5cdH07XHJcblxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Lypcblx0XHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRcdEF1dGhvciBUb2JpYXMgS29wcGVycyBAc29rcmFcblx0Ki9cblx0dmFyIHN0eWxlc0luRG9tID0ge30sXG5cdFx0bWVtb2l6ZSA9IGZ1bmN0aW9uKGZuKSB7XG5cdFx0XHR2YXIgbWVtbztcblx0XHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdGlmICh0eXBlb2YgbWVtbyA9PT0gXCJ1bmRlZmluZWRcIikgbWVtbyA9IGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdFx0XHRcdHJldHVybiBtZW1vO1xuXHRcdFx0fTtcblx0XHR9LFxuXHRcdGlzT2xkSUUgPSBtZW1vaXplKGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIC9tc2llIFs2LTldXFxiLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuXHRcdH0pLFxuXHRcdGdldEhlYWRFbGVtZW50ID0gbWVtb2l6ZShmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XG5cdFx0fSksXG5cdFx0c2luZ2xldG9uRWxlbWVudCA9IG51bGwsXG5cdFx0c2luZ2xldG9uQ291bnRlciA9IDAsXG5cdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AgPSBbXTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRcdGlmKGZhbHNlKSB7XG5cdFx0XHRpZih0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0XHR9XG5cdFxuXHRcdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcdC8vIEZvcmNlIHNpbmdsZS10YWcgc29sdXRpb24gb24gSUU2LTksIHdoaWNoIGhhcyBhIGhhcmQgbGltaXQgb24gdGhlICMgb2YgPHN0eWxlPlxuXHRcdC8vIHRhZ3MgaXQgd2lsbCBhbGxvdyBvbiBhIHBhZ2Vcblx0XHRpZiAodHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblx0XG5cdFx0Ly8gQnkgZGVmYXVsdCwgYWRkIDxzdHlsZT4gdGFncyB0byB0aGUgYm90dG9tIG9mIDxoZWFkPi5cblx0XHRpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXHRcblx0XHR2YXIgc3R5bGVzID0gbGlzdFRvU3R5bGVzKGxpc3QpO1xuXHRcdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cdFxuXHRcdHJldHVybiBmdW5jdGlvbiB1cGRhdGUobmV3TGlzdCkge1xuXHRcdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IHN0eWxlcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0XHRcdGRvbVN0eWxlLnJlZnMtLTtcblx0XHRcdFx0bWF5UmVtb3ZlLnB1c2goZG9tU3R5bGUpO1xuXHRcdFx0fVxuXHRcdFx0aWYobmV3TGlzdCkge1xuXHRcdFx0XHR2YXIgbmV3U3R5bGVzID0gbGlzdFRvU3R5bGVzKG5ld0xpc3QpO1xuXHRcdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdFx0fVxuXHRcdFx0Zm9yKHZhciBpID0gMDsgaSA8IG1heVJlbW92ZS5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cdFx0XHRcdGlmKGRvbVN0eWxlLnJlZnMgPT09IDApIHtcblx0XHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspXG5cdFx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXHRcdFx0XHRcdGRlbGV0ZSBzdHlsZXNJbkRvbVtkb21TdHlsZS5pZF07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBhZGRTdHlsZXNUb0RvbShzdHlsZXMsIG9wdGlvbnMpIHtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgc3R5bGVzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHRcdHZhciBkb21TdHlsZSA9IHN0eWxlc0luRG9tW2l0ZW0uaWRdO1xuXHRcdFx0aWYoZG9tU3R5bGUpIHtcblx0XHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXHRcdFx0XHRmb3IodmFyIGogPSAwOyBqIDwgZG9tU3R5bGUucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXShpdGVtLnBhcnRzW2pdKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRmb3IoOyBqIDwgaXRlbS5wYXJ0cy5sZW5ndGg7IGorKykge1xuXHRcdFx0XHRcdGRvbVN0eWxlLnBhcnRzLnB1c2goYWRkU3R5bGUoaXRlbS5wYXJ0c1tqXSwgb3B0aW9ucykpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YXIgcGFydHMgPSBbXTtcblx0XHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0XHRwYXJ0cy5wdXNoKGFkZFN0eWxlKGl0ZW0ucGFydHNbal0sIG9wdGlvbnMpKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxpc3RUb1N0eWxlcyhsaXN0KSB7XG5cdFx0dmFyIHN0eWxlcyA9IFtdO1xuXHRcdHZhciBuZXdTdHlsZXMgPSB7fTtcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbGlzdC5sZW5ndGg7IGkrKykge1xuXHRcdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdFx0dmFyIGlkID0gaXRlbVswXTtcblx0XHRcdHZhciBjc3MgPSBpdGVtWzFdO1xuXHRcdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHRcdHZhciBzb3VyY2VNYXAgPSBpdGVtWzNdO1xuXHRcdFx0dmFyIHBhcnQgPSB7Y3NzOiBjc3MsIG1lZGlhOiBtZWRpYSwgc291cmNlTWFwOiBzb3VyY2VNYXB9O1xuXHRcdFx0aWYoIW5ld1N0eWxlc1tpZF0pXG5cdFx0XHRcdHN0eWxlcy5wdXNoKG5ld1N0eWxlc1tpZF0gPSB7aWQ6IGlkLCBwYXJ0czogW3BhcnRdfSk7XG5cdFx0XHRlbHNlXG5cdFx0XHRcdG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0XHR9XG5cdFx0cmV0dXJuIHN0eWxlcztcblx0fVxuXHRcblx0ZnVuY3Rpb24gaW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCkge1xuXHRcdHZhciBoZWFkID0gZ2V0SGVhZEVsZW1lbnQoKTtcblx0XHR2YXIgbGFzdFN0eWxlRWxlbWVudEluc2VydGVkQXRUb3AgPSBzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcFtzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5sZW5ndGggLSAxXTtcblx0XHRpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJ0b3BcIikge1xuXHRcdFx0aWYoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHRcdGhlYWQuaW5zZXJ0QmVmb3JlKHN0eWxlRWxlbWVudCwgaGVhZC5maXJzdENoaWxkKTtcblx0XHRcdH0gZWxzZSBpZihsYXN0U3R5bGVFbGVtZW50SW5zZXJ0ZWRBdFRvcC5uZXh0U2libGluZykge1xuXHRcdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHRcdH1cblx0XHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnB1c2goc3R5bGVFbGVtZW50KTtcblx0XHR9IGVsc2UgaWYgKG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwiYm90dG9tXCIpIHtcblx0XHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB2YWx1ZSBmb3IgcGFyYW1ldGVyICdpbnNlcnRBdCcuIE11c3QgYmUgJ3RvcCcgb3IgJ2JvdHRvbScuXCIpO1xuXHRcdH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuXHRcdHN0eWxlRWxlbWVudC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHN0eWxlRWxlbWVudCk7XG5cdFx0dmFyIGlkeCA9IHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLmluZGV4T2Yoc3R5bGVFbGVtZW50KTtcblx0XHRpZihpZHggPj0gMCkge1xuXHRcdFx0c3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Auc3BsaWNlKGlkeCwgMSk7XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykge1xuXHRcdHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cdFx0c3R5bGVFbGVtZW50LnR5cGUgPSBcInRleHQvY3NzXCI7XG5cdFx0aW5zZXJ0U3R5bGVFbGVtZW50KG9wdGlvbnMsIHN0eWxlRWxlbWVudCk7XG5cdFx0cmV0dXJuIHN0eWxlRWxlbWVudDtcblx0fVxuXHRcblx0ZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG5cdFx0dmFyIHN0eWxlRWxlbWVudCwgdXBkYXRlLCByZW1vdmU7XG5cdFxuXHRcdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdFx0dmFyIHN0eWxlSW5kZXggPSBzaW5nbGV0b25Db3VudGVyKys7XG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBzaW5nbGV0b25FbGVtZW50IHx8IChzaW5nbGV0b25FbGVtZW50ID0gY3JlYXRlU3R5bGVFbGVtZW50KG9wdGlvbnMpKTtcblx0XHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRcdHJlbW92ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIHRydWUpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0XHR1cGRhdGUgPSBhcHBseVRvVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50KTtcblx0XHRcdHJlbW92ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcblx0XHRcdH07XG5cdFx0fVxuXHRcblx0XHR1cGRhdGUob2JqKTtcblx0XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuXHRcdFx0aWYobmV3T2JqKSB7XG5cdFx0XHRcdGlmKG5ld09iai5jc3MgPT09IG9iai5jc3MgJiYgbmV3T2JqLm1lZGlhID09PSBvYmoubWVkaWEgJiYgbmV3T2JqLnNvdXJjZU1hcCA9PT0gb2JqLnNvdXJjZU1hcClcblx0XHRcdFx0XHRyZXR1cm47XG5cdFx0XHRcdHVwZGF0ZShvYmogPSBuZXdPYmopO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmVtb3ZlKCk7XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXHRcblx0dmFyIHJlcGxhY2VUZXh0ID0gKGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgdGV4dFN0b3JlID0gW107XG5cdFxuXHRcdHJldHVybiBmdW5jdGlvbiAoaW5kZXgsIHJlcGxhY2VtZW50KSB7XG5cdFx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cdFx0XHRyZXR1cm4gdGV4dFN0b3JlLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG4nKTtcblx0XHR9O1xuXHR9KSgpO1xuXHRcblx0ZnVuY3Rpb24gYXBwbHlUb1NpbmdsZXRvblRhZyhzdHlsZUVsZW1lbnQsIGluZGV4LCByZW1vdmUsIG9iaikge1xuXHRcdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblx0XG5cdFx0aWYgKHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0KSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBjc3NOb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKTtcblx0XHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XG5cdFx0XHRpZiAoY2hpbGROb2Rlc1tpbmRleF0pIHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0XHRpZiAoY2hpbGROb2Rlcy5sZW5ndGgpIHtcblx0XHRcdFx0c3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoY3NzTm9kZSk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBhcHBseVRvVGFnKHN0eWxlRWxlbWVudCwgb2JqKSB7XG5cdFx0dmFyIGNzcyA9IG9iai5jc3M7XG5cdFx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXHRcdHZhciBzb3VyY2VNYXAgPSBvYmouc291cmNlTWFwO1xuXHRcblx0XHRpZiAobWVkaWEpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJtZWRpYVwiLCBtZWRpYSk7XG5cdFx0fVxuXHRcblx0XHRpZiAoc291cmNlTWFwKSB7XG5cdFx0XHQvLyBodHRwczovL2RldmVsb3Blci5jaHJvbWUuY29tL2RldnRvb2xzL2RvY3MvamF2YXNjcmlwdC1kZWJ1Z2dpbmdcblx0XHRcdC8vIHRoaXMgbWFrZXMgc291cmNlIG1hcHMgaW5zaWRlIHN0eWxlIHRhZ3Mgd29yayBwcm9wZXJseSBpbiBDaHJvbWVcblx0XHRcdGNzcyArPSAnXFxuLyojIHNvdXJjZVVSTD0nICsgc291cmNlTWFwLnNvdXJjZXNbMF0gKyAnICovJztcblx0XHRcdC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI2NjAzODc1XG5cdFx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdFx0fVxuXHRcblx0XHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRcdHN0eWxlRWxlbWVudC5zdHlsZVNoZWV0LmNzc1RleHQgPSBjc3M7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG5cdFx0XHRcdHN0eWxlRWxlbWVudC5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQuZmlyc3RDaGlsZCk7XG5cdFx0XHR9XG5cdFx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdFx0fVxuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHt2YXIgY2hlY2tHbG9iYWwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOCk7XG5cdFxuXHQvKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYGdsb2JhbGAgZnJvbSBOb2RlLmpzLiAqL1xuXHR2YXIgZnJlZUdsb2JhbCA9IGNoZWNrR2xvYmFsKHR5cGVvZiBnbG9iYWwgPT0gJ29iamVjdCcgJiYgZ2xvYmFsKTtcblx0XG5cdC8qKiBEZXRlY3QgZnJlZSB2YXJpYWJsZSBgc2VsZmAuICovXG5cdHZhciBmcmVlU2VsZiA9IGNoZWNrR2xvYmFsKHR5cGVvZiBzZWxmID09ICdvYmplY3QnICYmIHNlbGYpO1xuXHRcblx0LyoqIERldGVjdCBgdGhpc2AgYXMgdGhlIGdsb2JhbCBvYmplY3QuICovXG5cdHZhciB0aGlzR2xvYmFsID0gY2hlY2tHbG9iYWwodHlwZW9mIHRoaXMgPT0gJ29iamVjdCcgJiYgdGhpcyk7XG5cdFxuXHQvKiogVXNlZCBhcyBhIHJlZmVyZW5jZSB0byB0aGUgZ2xvYmFsIG9iamVjdC4gKi9cblx0dmFyIHJvb3QgPSBmcmVlR2xvYmFsIHx8IGZyZWVTZWxmIHx8IHRoaXNHbG9iYWwgfHwgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gcm9vdDtcblx0XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGFuIGBBcnJheWAgb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAdHlwZSB7RnVuY3Rpb259XG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0FycmF5KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoJ2FiYycpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXkoXy5ub29wKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNBcnJheTtcblxuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjA0KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDQpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Milcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiA2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUlzTmF0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDApLFxuXHQgICAgZ2V0VmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNik7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgbmF0aXZlIGZ1bmN0aW9uIGF0IGBrZXlgIG9mIGBvYmplY3RgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgbWV0aG9kIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TmF0aXZlKG9iamVjdCwga2V5KSB7XG5cdCAgdmFyIHZhbHVlID0gZ2V0VmFsdWUob2JqZWN0LCBrZXkpO1xuXHQgIHJldHVybiBiYXNlSXNOYXRpdmUodmFsdWUpID8gdmFsdWUgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0TmF0aXZlO1xuXG5cbi8qKiovIH0sXG4vKiA3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgdGhlXG5cdCAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcblx0ICogb2YgYE9iamVjdGAuIChlLmcuIGFycmF5cywgZnVuY3Rpb25zLCBvYmplY3RzLCByZWdleGVzLCBgbmV3IE51bWJlcigwKWAsIGFuZCBgbmV3IFN0cmluZygnJylgKVxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYW4gb2JqZWN0LCBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3Qoe30pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNPYmplY3QoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0KF8ubm9vcCk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdChudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0KHZhbHVlKSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICEhdmFsdWUgJiYgKHR5cGUgPT0gJ29iamVjdCcgfHwgdHlwZSA9PSAnZnVuY3Rpb24nKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdDtcblxuXG4vKioqLyB9LFxuLyogOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuXHQgKiBhbmQgaGFzIGEgYHR5cGVvZmAgcmVzdWx0IG9mIFwib2JqZWN0XCIuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBvYmplY3QtbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZSh7fSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc09iamVjdExpa2UoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShfLm5vb3ApO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzT2JqZWN0TGlrZShudWxsKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGlzT2JqZWN0TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdExpa2U7XG5cblxuLyoqKi8gfSxcbi8qIDkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBsaXN0Q2FjaGVDbGVhciA9IF9fd2VicGFja19yZXF1aXJlX18oMTI3KSxcblx0ICAgIGxpc3RDYWNoZURlbGV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI4KSxcblx0ICAgIGxpc3RDYWNoZUdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTI5KSxcblx0ICAgIGxpc3RDYWNoZUhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTMwKSxcblx0ICAgIGxpc3RDYWNoZVNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTMxKTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG5cdCAqL1xuXHRmdW5jdGlvbiBMaXN0Q2FjaGUoZW50cmllcykge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXHRcblx0ICB0aGlzLmNsZWFyKCk7XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuXHQgICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEFkZCBtZXRob2RzIHRvIGBMaXN0Q2FjaGVgLlxuXHRMaXN0Q2FjaGUucHJvdG90eXBlLmNsZWFyID0gbGlzdENhY2hlQ2xlYXI7XG5cdExpc3RDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbGlzdENhY2hlRGVsZXRlO1xuXHRMaXN0Q2FjaGUucHJvdG90eXBlLmdldCA9IGxpc3RDYWNoZUdldDtcblx0TGlzdENhY2hlLnByb3RvdHlwZS5oYXMgPSBsaXN0Q2FjaGVIYXM7XG5cdExpc3RDYWNoZS5wcm90b3R5cGUuc2V0ID0gbGlzdENhY2hlU2V0O1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBMaXN0Q2FjaGU7XG5cblxuLyoqKi8gfSxcbi8qIDEwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZXEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0OCk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgaW5kZXggYXQgd2hpY2ggdGhlIGBrZXlgIGlzIGZvdW5kIGluIGBhcnJheWAgb2Yga2V5LXZhbHVlIHBhaXJzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuXHQgKiBAcGFyYW0geyp9IGtleSBUaGUga2V5IHRvIHNlYXJjaCBmb3IuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBhc3NvY0luZGV4T2YoYXJyYXksIGtleSkge1xuXHQgIHZhciBsZW5ndGggPSBhcnJheS5sZW5ndGg7XG5cdCAgd2hpbGUgKGxlbmd0aC0tKSB7XG5cdCAgICBpZiAoZXEoYXJyYXlbbGVuZ3RoXVswXSwga2V5KSkge1xuXHQgICAgICByZXR1cm4gbGVuZ3RoO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYXNzb2NJbmRleE9mO1xuXG5cbi8qKiovIH0sXG4vKiAxMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzS2V5YWJsZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI0KTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBkYXRhIGZvciBgbWFwYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSByZWZlcmVuY2Uga2V5LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgbWFwIGRhdGEuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRNYXBEYXRhKG1hcCwga2V5KSB7XG5cdCAgdmFyIGRhdGEgPSBtYXAuX19kYXRhX187XG5cdCAgcmV0dXJuIGlzS2V5YWJsZShrZXkpXG5cdCAgICA/IGRhdGFbdHlwZW9mIGtleSA9PSAnc3RyaW5nJyA/ICdzdHJpbmcnIDogJ2hhc2gnXVxuXHQgICAgOiBkYXRhLm1hcDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRNYXBEYXRhO1xuXG5cbi8qKiovIH0sXG4vKiAxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNTeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlSXNEZWVwUHJvcCA9IC9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sXG5cdCAgICByZUlzUGxhaW5Qcm9wID0gL15cXHcqJC87XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lIGFuZCBub3QgYSBwcm9wZXJ0eSBwYXRoLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkga2V5cyBvbi5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0tleSh2YWx1ZSwgb2JqZWN0KSB7XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuXHQgIGlmICh0eXBlID09ICdudW1iZXInIHx8IHR5cGUgPT0gJ3N5bWJvbCcgfHwgdHlwZSA9PSAnYm9vbGVhbicgfHxcblx0ICAgICAgdmFsdWUgPT0gbnVsbCB8fCBpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiB0cnVlO1xuXHQgIH1cblx0ICByZXR1cm4gcmVJc1BsYWluUHJvcC50ZXN0KHZhbHVlKSB8fCAhcmVJc0RlZXBQcm9wLnRlc3QodmFsdWUpIHx8XG5cdCAgICAob2JqZWN0ICE9IG51bGwgJiYgdmFsdWUgaW4gT2JqZWN0KG9iamVjdCkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzS2V5O1xuXG5cbi8qKiovIH0sXG4vKiAxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE5hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNik7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBuYXRpdmVDcmVhdGUgPSBnZXROYXRpdmUoT2JqZWN0LCAnY3JlYXRlJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG5hdGl2ZUNyZWF0ZTtcblxuXG4vKioqLyB9LFxuLyogMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc1N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBJTkZJTklUWSA9IDEgLyAwO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcga2V5IGlmIGl0J3Mgbm90IGEgc3RyaW5nIG9yIHN5bWJvbC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cblx0ICogQHJldHVybnMge3N0cmluZ3xzeW1ib2x9IFJldHVybnMgdGhlIGtleS5cblx0ICovXG5cdGZ1bmN0aW9uIHRvS2V5KHZhbHVlKSB7XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fCBpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgdmFyIHJlc3VsdCA9ICh2YWx1ZSArICcnKTtcblx0ICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gdG9LZXk7XG5cblxuLyoqKi8gfSxcbi8qIDE1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBsZW5ndGguXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIGlzIGxvb3NlbHkgYmFzZWQgb25cblx0ICogW2BUb0xlbmd0aGBdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvbGVuZ3RoKS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzTGVuZ3RoKDMpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNMZW5ndGgoTnVtYmVyLk1JTl9WQUxVRSk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqXG5cdCAqIF8uaXNMZW5ndGgoSW5maW5pdHkpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmlzTGVuZ3RoKCczJyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0xlbmd0aCh2YWx1ZSkge1xuXHQgIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgJiZcblx0ICAgIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0xlbmd0aDtcblxuXG4vKioqLyB9LFxuLyogMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc09iamVjdExpa2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgc3ltYm9sVGFnID0gJ1tvYmplY3QgU3ltYm9sXSc7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byByZXNvbHZlIHRoZVxuXHQgKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcblx0ICogb2YgdmFsdWVzLlxuXHQgKi9cblx0dmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTeW1ib2xgIHByaW1pdGl2ZSBvciBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc1N5bWJvbChTeW1ib2wuaXRlcmF0b3IpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNTeW1ib2woJ2FiYycpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTeW1ib2wodmFsdWUpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzeW1ib2wnIHx8XG5cdCAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzU3ltYm9sO1xuXG5cbi8qKiovIH0sXG4vKiAxNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG1hcENhY2hlQ2xlYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzMiksXG5cdCAgICBtYXBDYWNoZURlbGV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMzKSxcblx0ICAgIG1hcENhY2hlR2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMzQpLFxuXHQgICAgbWFwQ2FjaGVIYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNSksXG5cdCAgICBtYXBDYWNoZVNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTM2KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgbWFwIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cblx0ICovXG5cdGZ1bmN0aW9uIE1hcENhY2hlKGVudHJpZXMpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gZW50cmllcyA/IGVudHJpZXMubGVuZ3RoIDogMDtcblx0XG5cdCAgdGhpcy5jbGVhcigpO1xuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcblx0ICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBBZGQgbWV0aG9kcyB0byBgTWFwQ2FjaGVgLlxuXHRNYXBDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBtYXBDYWNoZUNsZWFyO1xuXHRNYXBDYWNoZS5wcm90b3R5cGVbJ2RlbGV0ZSddID0gbWFwQ2FjaGVEZWxldGU7XG5cdE1hcENhY2hlLnByb3RvdHlwZS5nZXQgPSBtYXBDYWNoZUdldDtcblx0TWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IG1hcENhY2hlSGFzO1xuXHRNYXBDYWNoZS5wcm90b3R5cGUuc2V0ID0gbWFwQ2FjaGVTZXQ7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IE1hcENhY2hlO1xuXG5cbi8qKiovIH0sXG4vKiAxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuXHQgICAgZ2VuVGFnID0gJ1tvYmplY3QgR2VuZXJhdG9yRnVuY3Rpb25dJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcblx0ICogIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy5pc0Z1bmN0aW9uKF8pO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaXNGdW5jdGlvbigvYWJjLyk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0Z1bmN0aW9uKHZhbHVlKSB7XG5cdCAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG5cdCAgLy8gaW4gU2FmYXJpIDggd2hpY2ggcmV0dXJucyAnb2JqZWN0JyBmb3IgdHlwZWQgYXJyYXkgYW5kIHdlYWsgbWFwIGNvbnN0cnVjdG9ycyxcblx0ICAvLyBhbmQgUGhhbnRvbUpTIDEuOSB3aGljaCByZXR1cm5zICdmdW5jdGlvbicgZm9yIGBOb2RlTGlzdGAgaW5zdGFuY2VzLlxuXHQgIHZhciB0YWcgPSBpc09iamVjdCh2YWx1ZSkgPyBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuXHQgIHJldHVybiB0YWcgPT0gZnVuY1RhZyB8fCB0YWcgPT0gZ2VuVGFnO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzRnVuY3Rpb247XG5cblxuLyoqKi8gfSxcbi8qIDE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvLyBzaGltIGZvciB1c2luZyBwcm9jZXNzIGluIGJyb3dzZXJcblx0XG5cdHZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblx0XG5cdC8vIGNhY2hlZCBmcm9tIHdoYXRldmVyIGdsb2JhbCBpcyBwcmVzZW50IHNvIHRoYXQgdGVzdCBydW5uZXJzIHRoYXQgc3R1YiBpdFxuXHQvLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcblx0Ly8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuXHQvLyBmdW5jdGlvbiBiZWNhdXNlIHRyeS9jYXRjaGVzIGRlb3B0aW1pemUgaW4gY2VydGFpbiBlbmdpbmVzLlxuXHRcblx0dmFyIGNhY2hlZFNldFRpbWVvdXQ7XG5cdHZhciBjYWNoZWRDbGVhclRpbWVvdXQ7XG5cdFxuXHQoZnVuY3Rpb24gKCkge1xuXHQgIHRyeSB7XG5cdCAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdHJ5IHtcblx0ICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRocm93IG5ldyBFcnJvcignY2xlYXJUaW1lb3V0IGlzIG5vdCBkZWZpbmVkJyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9ICgpKVxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIGRyYWluaW5nID0gZmFsc2U7XG5cdHZhciBjdXJyZW50UXVldWU7XG5cdHZhciBxdWV1ZUluZGV4ID0gLTE7XG5cdFxuXHRmdW5jdGlvbiBjbGVhblVwTmV4dFRpY2soKSB7XG5cdCAgICBpZiAoIWRyYWluaW5nIHx8ICFjdXJyZW50UXVldWUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcblx0ICAgICAgICBxdWV1ZSA9IGN1cnJlbnRRdWV1ZS5jb25jYXQocXVldWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG5cdCAgICB9XG5cdCAgICBpZiAocXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgZHJhaW5RdWV1ZSgpO1xuXHQgICAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkcmFpblF1ZXVlKCkge1xuXHQgICAgaWYgKGRyYWluaW5nKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHRpbWVvdXQgPSBjYWNoZWRTZXRUaW1lb3V0KGNsZWFuVXBOZXh0VGljayk7XG5cdCAgICBkcmFpbmluZyA9IHRydWU7XG5cdFxuXHQgICAgdmFyIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIHdoaWxlKGxlbikge1xuXHQgICAgICAgIGN1cnJlbnRRdWV1ZSA9IHF1ZXVlO1xuXHQgICAgICAgIHF1ZXVlID0gW107XG5cdCAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuXHQgICAgICAgICAgICBpZiAoY3VycmVudFF1ZXVlKSB7XG5cdCAgICAgICAgICAgICAgICBjdXJyZW50UXVldWVbcXVldWVJbmRleF0ucnVuKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgcXVldWVJbmRleCA9IC0xO1xuXHQgICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcblx0ICAgIH1cblx0ICAgIGN1cnJlbnRRdWV1ZSA9IG51bGw7XG5cdCAgICBkcmFpbmluZyA9IGZhbHNlO1xuXHQgICAgY2FjaGVkQ2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuXHR9XG5cdFxuXHRwcm9jZXNzLm5leHRUaWNrID0gZnVuY3Rpb24gKGZ1bikge1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCAtIDEpO1xuXHQgICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG5cdCAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICAgICAgYXJnc1tpIC0gMV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICAgICAgfVxuXHQgICAgfVxuXHQgICAgcXVldWUucHVzaChuZXcgSXRlbShmdW4sIGFyZ3MpKTtcblx0ICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG5cdCAgICAgICAgY2FjaGVkU2V0VGltZW91dChkcmFpblF1ZXVlLCAwKTtcblx0ICAgIH1cblx0fTtcblx0XG5cdC8vIHY4IGxpa2VzIHByZWRpY3RpYmxlIG9iamVjdHNcblx0ZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG5cdCAgICB0aGlzLmZ1biA9IGZ1bjtcblx0ICAgIHRoaXMuYXJyYXkgPSBhcnJheTtcblx0fVxuXHRJdGVtLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLmZ1bi5hcHBseShudWxsLCB0aGlzLmFycmF5KTtcblx0fTtcblx0cHJvY2Vzcy50aXRsZSA9ICdicm93c2VyJztcblx0cHJvY2Vzcy5icm93c2VyID0gdHJ1ZTtcblx0cHJvY2Vzcy5lbnYgPSB7fTtcblx0cHJvY2Vzcy5hcmd2ID0gW107XG5cdHByb2Nlc3MudmVyc2lvbiA9ICcnOyAvLyBlbXB0eSBzdHJpbmcgdG8gYXZvaWQgcmVnZXhwIGlzc3Vlc1xuXHRwcm9jZXNzLnZlcnNpb25zID0ge307XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdHByb2Nlc3Mub24gPSBub29wO1xuXHRwcm9jZXNzLmFkZExpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5vbmNlID0gbm9vcDtcblx0cHJvY2Vzcy5vZmYgPSBub29wO1xuXHRwcm9jZXNzLnJlbW92ZUxpc3RlbmVyID0gbm9vcDtcblx0cHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xuXHRwcm9jZXNzLmVtaXQgPSBub29wO1xuXHRcblx0cHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcblx0ICAgIHRocm93IG5ldyBFcnJvcigncHJvY2Vzcy5iaW5kaW5nIGlzIG5vdCBzdXBwb3J0ZWQnKTtcblx0fTtcblx0XG5cdHByb2Nlc3MuY3dkID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gJy8nIH07XG5cdHByb2Nlc3MuY2hkaXIgPSBmdW5jdGlvbiAoZGlyKSB7XG5cdCAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xuXHR9O1xuXHRwcm9jZXNzLnVtYXNrID0gZnVuY3Rpb24oKSB7IHJldHVybiAwOyB9O1xuXG5cbi8qKiovIH0sXG4vKiAyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2RlZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdFxuXHR2YXIgX2RlZmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUobmV3VmFsKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIGlmIChuZXdWYWwgPT09IHRydWUpIHtcblx0ICAgICAgKDAsIF9kZWZlcjIuZGVmYXVsdCkoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIF90aGlzLmVsLnRhYkluZGV4ID0gMDtcblx0ICAgICAgICBfdGhpcy5lbC5mb2N1cygpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9XG5cdH07IC8qXG5cdCAgICAgQGRlc2MgQWRkIGJlaGF2aW9yIHRvIGFueSBlbGVtZW50LlxuXHQgICAgIFdoZW4gZXZhbCB0byB0cnVlLCBpdCB3aWxsIHNldCBlbGVtZW50IHRhYiBpbmRleCB0byAwIGFuZCBmb2N1cyBvbiBpdC5cblx0ICAgICBFeGFtcGxlOiA8ZGl2IHNldC1mb2N1cz1cIndpbGxGb2N1c1doZW5UcnVlXCI+PC9kaXY+XG5cdCAgICovXG5cbi8qKiovIH0sXG4vKiAyMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2V2ZW50cyA9IF9fd2VicGFja19yZXF1aXJlX18oNjgpO1xuXHRcblx0dmFyIF9ldmVudHMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfZXZlbnRzKTtcblx0XG5cdHZhciBfeGhyUmVzcG9uc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDY5KTtcblx0XG5cdHZhciBfeGhyUmVzcG9uc2UyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfeGhyUmVzcG9uc2UpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IFtfZXZlbnRzMi5kZWZhdWx0LCBfeGhyUmVzcG9uc2UyLmRlZmF1bHRdO1xuXG4vKioqLyB9LFxuLyogMjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXROYXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLFxuXHQgICAgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBNYXAgPSBnZXROYXRpdmUocm9vdCwgJ01hcCcpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBNYXA7XG5cblxuLyoqKi8gfSxcbi8qIDIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTGlzdENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KSxcblx0ICAgIHN0YWNrQ2xlYXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0MSksXG5cdCAgICBzdGFja0RlbGV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQyKSxcblx0ICAgIHN0YWNrR2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDMpLFxuXHQgICAgc3RhY2tIYXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0NCksXG5cdCAgICBzdGFja1NldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ1KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgc3RhY2sgY2FjaGUgb2JqZWN0IHRvIHN0b3JlIGtleS12YWx1ZSBwYWlycy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuXHQgKi9cblx0ZnVuY3Rpb24gU3RhY2soZW50cmllcykge1xuXHQgIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlKGVudHJpZXMpO1xuXHR9XG5cdFxuXHQvLyBBZGQgbWV0aG9kcyB0byBgU3RhY2tgLlxuXHRTdGFjay5wcm90b3R5cGUuY2xlYXIgPSBzdGFja0NsZWFyO1xuXHRTdGFjay5wcm90b3R5cGVbJ2RlbGV0ZSddID0gc3RhY2tEZWxldGU7XG5cdFN0YWNrLnByb3RvdHlwZS5nZXQgPSBzdGFja0dldDtcblx0U3RhY2sucHJvdG90eXBlLmhhcyA9IHN0YWNrSGFzO1xuXHRTdGFjay5wcm90b3R5cGUuc2V0ID0gc3RhY2tTZXQ7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFN0YWNrO1xuXG5cbi8qKiovIH0sXG4vKiAyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG5cdHZhciBTeW1ib2wgPSByb290LlN5bWJvbDtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU3ltYm9sO1xuXG5cbi8qKiovIH0sXG4vKiAyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNhc3RQYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOSksXG5cdCAgICBpc0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTIpLFxuXHQgICAgdG9LZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5nZXRgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVmYXVsdCB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUdldChvYmplY3QsIHBhdGgpIHtcblx0ICBwYXRoID0gaXNLZXkocGF0aCwgb2JqZWN0KSA/IFtwYXRoXSA6IGNhc3RQYXRoKHBhdGgpO1xuXHRcblx0ICB2YXIgaW5kZXggPSAwLFxuXHQgICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblx0XG5cdCAgd2hpbGUgKG9iamVjdCAhPSBudWxsICYmIGluZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICBvYmplY3QgPSBvYmplY3RbdG9LZXkocGF0aFtpbmRleCsrXSldO1xuXHQgIH1cblx0ICByZXR1cm4gKGluZGV4ICYmIGluZGV4ID09IGxlbmd0aCkgPyBvYmplY3QgOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUdldDtcblxuXG4vKioqLyB9LFxuLyogMjYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXRQcm90b3R5cGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExNCk7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaGFzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30ga2V5IFRoZSBrZXkgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VIYXMob2JqZWN0LCBrZXkpIHtcblx0ICAvLyBBdm9pZCBhIGJ1ZyBpbiBJRSAxMC0xMSB3aGVyZSBvYmplY3RzIHdpdGggYSBbW1Byb3RvdHlwZV1dIG9mIGBudWxsYCxcblx0ICAvLyB0aGF0IGFyZSBjb21wb3NlZCBlbnRpcmVseSBvZiBpbmRleCBwcm9wZXJ0aWVzLCByZXR1cm4gYGZhbHNlYCBmb3Jcblx0ICAvLyBgaGFzT3duUHJvcGVydHlgIGNoZWNrcyBvZiB0aGVtLlxuXHQgIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJlxuXHQgICAgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpIHx8XG5cdCAgICAgICh0eXBlb2Ygb2JqZWN0ID09ICdvYmplY3QnICYmIGtleSBpbiBvYmplY3QgJiYgZ2V0UHJvdG90eXBlKG9iamVjdCkgPT09IG51bGwpKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSGFzO1xuXG5cbi8qKiovIH0sXG4vKiAyNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VJc0VxdWFsRGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oOTgpLFxuXHQgICAgaXNPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDcpLFxuXHQgICAgaXNPYmplY3RMaWtlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aGljaCBzdXBwb3J0cyBwYXJ0aWFsIGNvbXBhcmlzb25zXG5cdCAqIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtiaXRtYXNrXSBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLlxuXHQgKiAgVGhlIGJpdG1hc2sgbWF5IGJlIGNvbXBvc2VkIG9mIHRoZSBmb2xsb3dpbmcgZmxhZ3M6XG5cdCAqICAgICAxIC0gVW5vcmRlcmVkIGNvbXBhcmlzb25cblx0ICogICAgIDIgLSBQYXJ0aWFsIGNvbXBhcmlzb25cblx0ICogQHBhcmFtIHtPYmplY3R9IFtzdGFja10gVHJhY2tzIHRyYXZlcnNlZCBgdmFsdWVgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlSXNFcXVhbCh2YWx1ZSwgb3RoZXIsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG5cdCAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHQgIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdCh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcjtcblx0ICB9XG5cdCAgcmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSwgb3RoZXIsIGJhc2VJc0VxdWFsLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUlzRXF1YWw7XG5cblxuLyoqKi8gfSxcbi8qIDI4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZVByb3BlcnR5O1xuXG5cbi8qKiovIH0sXG4vKiAyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgc3RyaW5nVG9QYXRoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDYpO1xuXHRcblx0LyoqXG5cdCAqIENhc3RzIGB2YWx1ZWAgdG8gYSBwYXRoIGFycmF5IGlmIGl0J3Mgbm90IG9uZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBjYXN0IHByb3BlcnR5IHBhdGggYXJyYXkuXG5cdCAqL1xuXHRmdW5jdGlvbiBjYXN0UGF0aCh2YWx1ZSkge1xuXHQgIHJldHVybiBpc0FycmF5KHZhbHVlKSA/IHZhbHVlIDogc3RyaW5nVG9QYXRoKHZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBjYXN0UGF0aDtcblxuXG4vKioqLyB9LFxuLyogMzAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBTZXRDYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oOTApLFxuXHQgICAgYXJyYXlTb21lID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5NCk7XG5cdFxuXHQvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cblx0dmFyIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgPSAxLFxuXHQgICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxEZWVwYCBmb3IgYXJyYXlzIHdpdGggc3VwcG9ydCBmb3Jcblx0ICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHtBcnJheX0gb3RoZXIgVGhlIG90aGVyIGFycmF5IHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuXHQgKiAgZm9yIG1vcmUgZGV0YWlscy5cblx0ICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYGFycmF5YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGFycmF5cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXF1YWxBcnJheXMoYXJyYXksIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG5cdCAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRyxcblx0ICAgICAgYXJyTGVuZ3RoID0gYXJyYXkubGVuZ3RoLFxuXHQgICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7XG5cdFxuXHQgIGlmIChhcnJMZW5ndGggIT0gb3RoTGVuZ3RoICYmICEoaXNQYXJ0aWFsICYmIG90aExlbmd0aCA+IGFyckxlbmd0aCkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuXHQgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KGFycmF5KTtcblx0ICBpZiAoc3RhY2tlZCkge1xuXHQgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG5cdCAgfVxuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICByZXN1bHQgPSB0cnVlLFxuXHQgICAgICBzZWVuID0gKGJpdG1hc2sgJiBVTk9SREVSRURfQ09NUEFSRV9GTEFHKSA/IG5ldyBTZXRDYWNoZSA6IHVuZGVmaW5lZDtcblx0XG5cdCAgc3RhY2suc2V0KGFycmF5LCBvdGhlcik7XG5cdFxuXHQgIC8vIElnbm9yZSBub24taW5kZXggcHJvcGVydGllcy5cblx0ICB3aGlsZSAoKytpbmRleCA8IGFyckxlbmd0aCkge1xuXHQgICAgdmFyIGFyclZhbHVlID0gYXJyYXlbaW5kZXhdLFxuXHQgICAgICAgIG90aFZhbHVlID0gb3RoZXJbaW5kZXhdO1xuXHRcblx0ICAgIGlmIChjdXN0b21pemVyKSB7XG5cdCAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuXHQgICAgICAgID8gY3VzdG9taXplcihvdGhWYWx1ZSwgYXJyVmFsdWUsIGluZGV4LCBvdGhlciwgYXJyYXksIHN0YWNrKVxuXHQgICAgICAgIDogY3VzdG9taXplcihhcnJWYWx1ZSwgb3RoVmFsdWUsIGluZGV4LCBhcnJheSwgb3RoZXIsIHN0YWNrKTtcblx0ICAgIH1cblx0ICAgIGlmIChjb21wYXJlZCAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGlmIChjb21wYXJlZCkge1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG5cdCAgICBpZiAoc2Vlbikge1xuXHQgICAgICBpZiAoIWFycmF5U29tZShvdGhlciwgZnVuY3Rpb24ob3RoVmFsdWUsIG90aEluZGV4KSB7XG5cdCAgICAgICAgICAgIGlmICghc2Vlbi5oYXMob3RoSW5kZXgpICYmXG5cdCAgICAgICAgICAgICAgICAoYXJyVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSkpIHtcblx0ICAgICAgICAgICAgICByZXR1cm4gc2Vlbi5hZGQob3RoSW5kZXgpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KSkge1xuXHQgICAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKCEoXG5cdCAgICAgICAgICBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHxcblx0ICAgICAgICAgICAgZXF1YWxGdW5jKGFyclZhbHVlLCBvdGhWYWx1ZSwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spXG5cdCAgICAgICAgKSkge1xuXHQgICAgICByZXN1bHQgPSBmYWxzZTtcblx0ICAgICAgYnJlYWs7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHN0YWNrWydkZWxldGUnXShhcnJheSk7XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBlcXVhbEFycmF5cztcblxuXG4vKioqLyB9LFxuLyogMzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBhIGhvc3Qgb2JqZWN0IGluIElFIDwgOS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzSG9zdE9iamVjdCh2YWx1ZSkge1xuXHQgIC8vIE1hbnkgaG9zdCBvYmplY3RzIGFyZSBgT2JqZWN0YCBvYmplY3RzIHRoYXQgY2FuIGNvZXJjZSB0byBzdHJpbmdzXG5cdCAgLy8gZGVzcGl0ZSBoYXZpbmcgaW1wcm9wZXJseSBkZWZpbmVkIGB0b1N0cmluZ2AgbWV0aG9kcy5cblx0ICB2YXIgcmVzdWx0ID0gZmFsc2U7XG5cdCAgaWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlLnRvU3RyaW5nICE9ICdmdW5jdGlvbicpIHtcblx0ICAgIHRyeSB7XG5cdCAgICAgIHJlc3VsdCA9ICEhKHZhbHVlICsgJycpO1xuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0hvc3RPYmplY3Q7XG5cblxuLyoqKi8gfSxcbi8qIDMyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IHVuc2lnbmVkIGludGVnZXIgdmFsdWVzLiAqL1xuXHR2YXIgcmVJc1VpbnQgPSAvXig/OjB8WzEtOV1cXGQqKSQvO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbbGVuZ3RoPU1BWF9TQUZFX0lOVEVHRVJdIFRoZSB1cHBlciBib3VuZHMgb2YgYSB2YWxpZCBpbmRleC5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBpbmRleCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNJbmRleCh2YWx1ZSwgbGVuZ3RoKSB7XG5cdCAgbGVuZ3RoID0gbGVuZ3RoID09IG51bGwgPyBNQVhfU0FGRV9JTlRFR0VSIDogbGVuZ3RoO1xuXHQgIHJldHVybiAhIWxlbmd0aCAmJlxuXHQgICAgKHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyB8fCByZUlzVWludC50ZXN0KHZhbHVlKSkgJiZcblx0ICAgICh2YWx1ZSA+IC0xICYmIHZhbHVlICUgMSA9PSAwICYmIHZhbHVlIDwgbGVuZ3RoKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0luZGV4O1xuXG5cbi8qKiovIH0sXG4vKiAzMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSBmb3Igc3RyaWN0IGVxdWFsaXR5IGNvbXBhcmlzb25zLCBpLmUuIGA9PT1gLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaWYgc3VpdGFibGUgZm9yIHN0cmljdFxuXHQgKiAgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSA9PT0gdmFsdWUgJiYgIWlzT2JqZWN0KHZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1N0cmljdENvbXBhcmFibGU7XG5cblxuLyoqKi8gfSxcbi8qIDM0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBtYXRjaGVzUHJvcGVydHlgIGZvciBzb3VyY2UgdmFsdWVzIHN1aXRhYmxlXG5cdCAqIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcGFyYW0geyp9IHNyY1ZhbHVlIFRoZSB2YWx1ZSB0byBtYXRjaC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKGtleSwgc3JjVmFsdWUpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIG9iamVjdFtrZXldID09PSBzcmNWYWx1ZSAmJlxuXHQgICAgICAoc3JjVmFsdWUgIT09IHVuZGVmaW5lZCB8fCAoa2V5IGluIE9iamVjdChvYmplY3QpKSk7XG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZTtcblxuXG4vKioqLyB9LFxuLyogMzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKiBVc2VkIHRvIHJlc29sdmUgdGhlIGRlY29tcGlsZWQgc291cmNlIG9mIGZ1bmN0aW9ucy4gKi9cblx0dmFyIGZ1bmNUb1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgZnVuY2AgdG8gaXRzIHNvdXJjZSBjb2RlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzb3VyY2UgY29kZS5cblx0ICovXG5cdGZ1bmN0aW9uIHRvU291cmNlKGZ1bmMpIHtcblx0ICBpZiAoZnVuYyAhPSBudWxsKSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gZnVuY1RvU3RyaW5nLmNhbGwoZnVuYyk7XG5cdCAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgdHJ5IHtcblx0ICAgICAgcmV0dXJuIChmdW5jICsgJycpO1xuXHQgICAgfSBjYXRjaCAoZSkge31cblx0ICB9XG5cdCAgcmV0dXJuICcnO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHRvU291cmNlO1xuXG5cbi8qKiovIH0sXG4vKiAzNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VEZWxheSA9IF9fd2VicGFja19yZXF1aXJlX18oOTUpLFxuXHQgICAgcmVzdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTU4KTtcblx0XG5cdC8qKlxuXHQgKiBEZWZlcnMgaW52b2tpbmcgdGhlIGBmdW5jYCB1bnRpbCB0aGUgY3VycmVudCBjYWxsIHN0YWNrIGhhcyBjbGVhcmVkLiBBbnlcblx0ICogYWRkaXRpb25hbCBhcmd1bWVudHMgYXJlIHByb3ZpZGVkIHRvIGBmdW5jYCB3aGVuIGl0J3MgaW52b2tlZC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQGNhdGVnb3J5IEZ1bmN0aW9uXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRlZmVyLlxuXHQgKiBAcGFyYW0gey4uLip9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIGludm9rZSBgZnVuY2Agd2l0aC5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uZGVmZXIoZnVuY3Rpb24odGV4dCkge1xuXHQgKiAgIGNvbnNvbGUubG9nKHRleHQpO1xuXHQgKiB9LCAnZGVmZXJyZWQnKTtcblx0ICogLy8gPT4gTG9ncyAnZGVmZXJyZWQnIGFmdGVyIG9uZSBvciBtb3JlIG1pbGxpc2Vjb25kcy5cblx0ICovXG5cdHZhciBkZWZlciA9IHJlc3QoZnVuY3Rpb24oZnVuYywgYXJncykge1xuXHQgIHJldHVybiBiYXNlRGVsYXkoZnVuYywgMSwgYXJncyk7XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkZWZlcjtcblxuXG4vKioqLyB9LFxuLyogMzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc0FycmF5TGlrZU9iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUzKTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGFyZ3NUYWcgPSAnW29iamVjdCBBcmd1bWVudHNdJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xuXHR2YXIgcHJvcGVydHlJc0VudW1lcmFibGUgPSBvYmplY3RQcm90by5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uaXNBcmd1bWVudHMoZnVuY3Rpb24oKSB7IHJldHVybiBhcmd1bWVudHM7IH0oKSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FyZ3VtZW50cyhbMSwgMiwgM10pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNBcmd1bWVudHModmFsdWUpIHtcblx0ICAvLyBTYWZhcmkgOC4xIGluY29ycmVjdGx5IG1ha2VzIGBhcmd1bWVudHMuY2FsbGVlYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuXHQgIHJldHVybiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkgJiYgaGFzT3duUHJvcGVydHkuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpICYmXG5cdCAgICAoIXByb3BlcnR5SXNFbnVtZXJhYmxlLmNhbGwodmFsdWUsICdjYWxsZWUnKSB8fCBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBhcmdzVGFnKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0FyZ3VtZW50cztcblxuXG4vKioqLyB9LFxuLyogMzggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXRMZW5ndGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExMiksXG5cdCAgICBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCksXG5cdCAgICBpc0xlbmd0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTUpO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGFycmF5LWxpa2UuIEEgdmFsdWUgaXMgY29uc2lkZXJlZCBhcnJheS1saWtlIGlmIGl0J3Ncblx0ICogbm90IGEgZnVuY3Rpb24gYW5kIGhhcyBhIGB2YWx1ZS5sZW5ndGhgIHRoYXQncyBhbiBpbnRlZ2VyIGdyZWF0ZXIgdGhhbiBvclxuXHQgKiBlcXVhbCB0byBgMGAgYW5kIGxlc3MgdGhhbiBvciBlcXVhbCB0byBgTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVJgLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZSwgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlKFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZShkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlKCdhYmMnKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlKF8ubm9vcCk7XG5cdCAqIC8vID0+IGZhbHNlXG5cdCAqL1xuXHRmdW5jdGlvbiBpc0FycmF5TGlrZSh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKGdldExlbmd0aCh2YWx1ZSkpICYmICFpc0Z1bmN0aW9uKHZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5TGlrZTtcblxuXG4vKioqLyB9LFxuLyogMzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KSxcblx0ICAgIGlzT2JqZWN0TGlrZSA9IF9fd2VicGFja19yZXF1aXJlX18oOCk7XG5cdFxuXHQvKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG5cdHZhciBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN0cmluZ2AgcHJpbWl0aXZlIG9yIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAc2luY2UgMC4xLjBcblx0ICogQG1lbWJlck9mIF9cblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzU3RyaW5nKCdhYmMnKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzU3RyaW5nKDEpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcblx0ICByZXR1cm4gdHlwZW9mIHZhbHVlID09ICdzdHJpbmcnIHx8XG5cdCAgICAoIWlzQXJyYXkodmFsdWUpICYmIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiYgb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSkgPT0gc3RyaW5nVGFnKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc1N0cmluZztcblxuXG4vKioqLyB9LFxuLyogNDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlSGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNiksXG5cdCAgICBiYXNlS2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAyKSxcblx0ICAgIGluZGV4S2V5cyA9IF9fd2VicGFja19yZXF1aXJlX18oMTIzKSxcblx0ICAgIGlzQXJyYXlMaWtlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOCksXG5cdCAgICBpc0luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMiksXG5cdCAgICBpc1Byb3RvdHlwZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTI2KTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogKipOb3RlOioqIE5vbi1vYmplY3QgdmFsdWVzIGFyZSBjb2VyY2VkIHRvIG9iamVjdHMuIFNlZSB0aGVcblx0ICogW0VTIHNwZWNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5rZXlzKVxuXHQgKiBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBzaW5jZSAwLjEuMFxuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAY2F0ZWdvcnkgT2JqZWN0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogZnVuY3Rpb24gRm9vKCkge1xuXHQgKiAgIHRoaXMuYSA9IDE7XG5cdCAqICAgdGhpcy5iID0gMjtcblx0ICogfVxuXHQgKlxuXHQgKiBGb28ucHJvdG90eXBlLmMgPSAzO1xuXHQgKlxuXHQgKiBfLmtleXMobmV3IEZvbyk7XG5cdCAqIC8vID0+IFsnYScsICdiJ10gKGl0ZXJhdGlvbiBvcmRlciBpcyBub3QgZ3VhcmFudGVlZClcblx0ICpcblx0ICogXy5rZXlzKCdoaScpO1xuXHQgKiAvLyA9PiBbJzAnLCAnMSddXG5cdCAqL1xuXHRmdW5jdGlvbiBrZXlzKG9iamVjdCkge1xuXHQgIHZhciBpc1Byb3RvID0gaXNQcm90b3R5cGUob2JqZWN0KTtcblx0ICBpZiAoIShpc1Byb3RvIHx8IGlzQXJyYXlMaWtlKG9iamVjdCkpKSB7XG5cdCAgICByZXR1cm4gYmFzZUtleXMob2JqZWN0KTtcblx0ICB9XG5cdCAgdmFyIGluZGV4ZXMgPSBpbmRleEtleXMob2JqZWN0KSxcblx0ICAgICAgc2tpcEluZGV4ZXMgPSAhIWluZGV4ZXMsXG5cdCAgICAgIHJlc3VsdCA9IGluZGV4ZXMgfHwgW10sXG5cdCAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cdFxuXHQgIGZvciAodmFyIGtleSBpbiBvYmplY3QpIHtcblx0ICAgIGlmIChiYXNlSGFzKG9iamVjdCwga2V5KSAmJlxuXHQgICAgICAgICEoc2tpcEluZGV4ZXMgJiYgKGtleSA9PSAnbGVuZ3RoJyB8fCBpc0luZGV4KGtleSwgbGVuZ3RoKSkpICYmXG5cdCAgICAgICAgIShpc1Byb3RvICYmIGtleSA9PSAnY29uc3RydWN0b3InKSkge1xuXHQgICAgICByZXN1bHQucHVzaChrZXkpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGtleXM7XG5cblxuLyoqKi8gfSxcbi8qIDQxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgdG9GaW5pdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1OSk7XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgYHZhbHVlYCB0byBhbiBpbnRlZ2VyLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogVGhpcyBtZXRob2QgaXMgbG9vc2VseSBiYXNlZCBvblxuXHQgKiBbYFRvSW50ZWdlcmBdKGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy10b2ludGVnZXIpLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgaW50ZWdlci5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy50b0ludGVnZXIoMy4yKTtcblx0ICogLy8gPT4gM1xuXHQgKlxuXHQgKiBfLnRvSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcblx0ICogLy8gPT4gMFxuXHQgKlxuXHQgKiBfLnRvSW50ZWdlcihJbmZpbml0eSk7XG5cdCAqIC8vID0+IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4XG5cdCAqXG5cdCAqIF8udG9JbnRlZ2VyKCczLjInKTtcblx0ICogLy8gPT4gM1xuXHQgKi9cblx0ZnVuY3Rpb24gdG9JbnRlZ2VyKHZhbHVlKSB7XG5cdCAgdmFyIHJlc3VsdCA9IHRvRmluaXRlKHZhbHVlKSxcblx0ICAgICAgcmVtYWluZGVyID0gcmVzdWx0ICUgMTtcblx0XG5cdCAgcmV0dXJuIHJlc3VsdCA9PT0gcmVzdWx0ID8gKHJlbWFpbmRlciA/IHJlc3VsdCAtIHJlbWFpbmRlciA6IHJlc3VsdCkgOiAwO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHRvSW50ZWdlcjtcblxuXG4vKioqLyB9LFxuLyogNDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc0Z1bmN0aW9uID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOCksXG5cdCAgICBpc09iamVjdCA9IF9fd2VicGFja19yZXF1aXJlX18oNyksXG5cdCAgICBpc1N5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMTYpO1xuXHRcblx0LyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG5cdHZhciBOQU4gPSAwIC8gMDtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIGxlYWRpbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuICovXG5cdHZhciByZVRyaW0gPSAvXlxccyt8XFxzKyQvZztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBiYWQgc2lnbmVkIGhleGFkZWNpbWFsIHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzQmFkSGV4ID0gL15bLStdMHhbMC05YS1mXSskL2k7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgYmluYXJ5IHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzQmluYXJ5ID0gL14wYlswMV0rJC9pO1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IG9jdGFsIHN0cmluZyB2YWx1ZXMuICovXG5cdHZhciByZUlzT2N0YWwgPSAvXjBvWzAtN10rJC9pO1xuXHRcblx0LyoqIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHdpdGhvdXQgYSBkZXBlbmRlbmN5IG9uIGByb290YC4gKi9cblx0dmFyIGZyZWVQYXJzZUludCA9IHBhcnNlSW50O1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBudW1iZXIuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDQuMC4wXG5cdCAqIEBjYXRlZ29yeSBMYW5nXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHByb2Nlc3MuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy50b051bWJlcigzLjIpO1xuXHQgKiAvLyA9PiAzLjJcblx0ICpcblx0ICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcblx0ICogLy8gPT4gNWUtMzI0XG5cdCAqXG5cdCAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuXHQgKiAvLyA9PiBJbmZpbml0eVxuXHQgKlxuXHQgKiBfLnRvTnVtYmVyKCczLjInKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqL1xuXHRmdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKGlzU3ltYm9sKHZhbHVlKSkge1xuXHQgICAgcmV0dXJuIE5BTjtcblx0ICB9XG5cdCAgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgdmFyIG90aGVyID0gaXNGdW5jdGlvbih2YWx1ZS52YWx1ZU9mKSA/IHZhbHVlLnZhbHVlT2YoKSA6IHZhbHVlO1xuXHQgICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG5cdCAgfVxuXHQgIHZhbHVlID0gdmFsdWUucmVwbGFjZShyZVRyaW0sICcnKTtcblx0ICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuXHQgIHJldHVybiAoaXNCaW5hcnkgfHwgcmVJc09jdGFsLnRlc3QodmFsdWUpKVxuXHQgICAgPyBmcmVlUGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIGlzQmluYXJ5ID8gMiA6IDgpXG5cdCAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b051bWJlcjtcblxuXG4vKioqLyB9LFxuLyogNDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwsIHByb2Nlc3MpIHsvKiFcblx0ICogVnVlLmpzIHYxLjAuMjZcblx0ICogKGMpIDIwMTYgRXZhbiBZb3Vcblx0ICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuXHQgKi9cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0ZnVuY3Rpb24gc2V0KG9iaiwga2V5LCB2YWwpIHtcblx0ICBpZiAoaGFzT3duKG9iaiwga2V5KSkge1xuXHQgICAgb2JqW2tleV0gPSB2YWw7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIGlmIChvYmouX2lzVnVlKSB7XG5cdCAgICBzZXQob2JqLl9kYXRhLCBrZXksIHZhbCk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBvYiA9IG9iai5fX29iX187XG5cdCAgaWYgKCFvYikge1xuXHQgICAgb2JqW2tleV0gPSB2YWw7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIG9iLmNvbnZlcnQoa2V5LCB2YWwpO1xuXHQgIG9iLmRlcC5ub3RpZnkoKTtcblx0ICBpZiAob2Iudm1zKSB7XG5cdCAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcblx0ICAgICAgdm0uX3Byb3h5KGtleSk7XG5cdCAgICAgIHZtLl9kaWdlc3QoKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHZhbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRlbChvYmosIGtleSkge1xuXHQgIGlmICghaGFzT3duKG9iaiwga2V5KSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBkZWxldGUgb2JqW2tleV07XG5cdCAgdmFyIG9iID0gb2JqLl9fb2JfXztcblx0ICBpZiAoIW9iKSB7XG5cdCAgICBpZiAob2JqLl9pc1Z1ZSkge1xuXHQgICAgICBkZWxldGUgb2JqLl9kYXRhW2tleV07XG5cdCAgICAgIG9iai5fZGlnZXN0KCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIG9iLmRlcC5ub3RpZnkoKTtcblx0ICBpZiAob2Iudm1zKSB7XG5cdCAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcblx0ICAgICAgdm0uX3VucHJveHkoa2V5KTtcblx0ICAgICAgdm0uX2RpZ2VzdCgpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblx0LyoqXG5cdCAqIENoZWNrIHdoZXRoZXIgdGhlIG9iamVjdCBoYXMgdGhlIHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcblx0ICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgbGl0ZXJhbCB2YWx1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdHZhciBsaXRlcmFsVmFsdWVSRSA9IC9eXFxzPyh0cnVlfGZhbHNlfC0/W1xcZFxcLl0rfCdbXiddKid8XCJbXlwiXSpcIilcXHM/JC87XG5cdFxuXHRmdW5jdGlvbiBpc0xpdGVyYWwoZXhwKSB7XG5cdCAgcmV0dXJuIGxpdGVyYWxWYWx1ZVJFLnRlc3QoZXhwKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgX1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNSZXNlcnZlZChzdHIpIHtcblx0ICB2YXIgYyA9IChzdHIgKyAnJykuY2hhckNvZGVBdCgwKTtcblx0ICByZXR1cm4gYyA9PT0gMHgyNCB8fCBjID09PSAweDVGO1xuXHR9XG5cdFxuXHQvKipcblx0ICogR3VhcmQgdGV4dCBvdXRwdXQsIG1ha2Ugc3VyZSB1bmRlZmluZWQgb3V0cHV0c1xuXHQgKiBlbXB0eSBzdHJpbmdcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gX3RvU3RyaW5nKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09IG51bGwgPyAnJyA6IHZhbHVlLnRvU3RyaW5nKCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBhbmQgY29udmVydCBwb3NzaWJsZSBudW1lcmljIHN0cmluZ3MgdG8gbnVtYmVyc1xuXHQgKiBiZWZvcmUgc2V0dGluZyBiYWNrIHRvIGRhdGFcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHsqfE51bWJlcn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuXHQgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBwYXJzZWQgPSBOdW1iZXIodmFsdWUpO1xuXHQgICAgcmV0dXJuIGlzTmFOKHBhcnNlZCkgPyB2YWx1ZSA6IHBhcnNlZDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IHN0cmluZyBib29sZWFuIGxpdGVyYWxzIGludG8gcmVhbCBib29sZWFucy5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHsqfEJvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9Cb29sZWFuKHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09PSAndHJ1ZScgPyB0cnVlIDogdmFsdWUgPT09ICdmYWxzZScgPyBmYWxzZSA6IHZhbHVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaXAgcXVvdGVzIGZyb20gYSBzdHJpbmdcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmcgfCBmYWxzZX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzdHJpcFF1b3RlcyhzdHIpIHtcblx0ICB2YXIgYSA9IHN0ci5jaGFyQ29kZUF0KDApO1xuXHQgIHZhciBiID0gc3RyLmNoYXJDb2RlQXQoc3RyLmxlbmd0aCAtIDEpO1xuXHQgIHJldHVybiBhID09PSBiICYmIChhID09PSAweDIyIHx8IGEgPT09IDB4MjcpID8gc3RyLnNsaWNlKDEsIC0xKSA6IHN0cjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENhbWVsaXplIGEgaHlwaGVuLWRlbG1pdGVkIHN0cmluZy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGNhbWVsaXplUkUgPSAvLShcXHcpL2c7XG5cdFxuXHRmdW5jdGlvbiBjYW1lbGl6ZShzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxpemVSRSwgdG9VcHBlcik7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHRvVXBwZXIoXywgYykge1xuXHQgIHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBIeXBoZW5hdGUgYSBjYW1lbENhc2Ugc3RyaW5nLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHR2YXIgaHlwaGVuYXRlUkUgPSAvKFthLXpcXGRdKShbQS1aXSkvZztcblx0XG5cdGZ1bmN0aW9uIGh5cGhlbmF0ZShzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICckMS0kMicpLnRvTG93ZXJDYXNlKCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBoeXBoZW4vdW5kZXJzY29yZS9zbGFzaCBkZWxpbWl0ZXJlZCBuYW1lcyBpbnRvXG5cdCAqIGNhbWVsaXplZCBjbGFzc05hbWVzLlxuXHQgKlxuXHQgKiBlLmcuIG15LWNvbXBvbmVudCA9PiBNeUNvbXBvbmVudFxuXHQgKiAgICAgIHNvbWVfZWxzZSAgICA9PiBTb21lRWxzZVxuXHQgKiAgICAgIHNvbWUvY29tcCAgICA9PiBTb21lQ29tcFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHR2YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstX1xcL10pKFxcdykvZztcblx0XG5cdGZ1bmN0aW9uIGNsYXNzaWZ5KHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCB0b1VwcGVyKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFNpbXBsZSBiaW5kLCBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBiaW5kKGZuLCBjdHgpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcblx0ICAgIHZhciBsID0gYXJndW1lbnRzLmxlbmd0aDtcblx0ICAgIHJldHVybiBsID8gbCA+IDEgPyBmbi5hcHBseShjdHgsIGFyZ3VtZW50cykgOiBmbi5jYWxsKGN0eCwgYSkgOiBmbi5jYWxsKGN0eCk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYW4gQXJyYXktbGlrZSBvYmplY3QgdG8gYSByZWFsIEFycmF5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5LWxpa2V9IGxpc3Rcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtzdGFydF0gLSBzdGFydCBpbmRleFxuXHQgKiBAcmV0dXJuIHtBcnJheX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0b0FycmF5KGxpc3QsIHN0YXJ0KSB7XG5cdCAgc3RhcnQgPSBzdGFydCB8fCAwO1xuXHQgIHZhciBpID0gbGlzdC5sZW5ndGggLSBzdGFydDtcblx0ICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHJldFtpXSA9IGxpc3RbaSArIHN0YXJ0XTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1peCBwcm9wZXJ0aWVzIGludG8gdGFyZ2V0IG9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHRvXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBmcm9tXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0ZW5kKHRvLCBmcm9tKSB7XG5cdCAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmcm9tKTtcblx0ICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHRvW2tleXNbaV1dID0gZnJvbVtrZXlzW2ldXTtcblx0ICB9XG5cdCAgcmV0dXJuIHRvO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsXG5cdCAqIE9iamVjdHMgZnJvbSBwcmltaXRpdmUgdmFsdWVzIHdoZW4gd2Uga25vdyB0aGUgdmFsdWVcblx0ICogaXMgYSBKU09OLWNvbXBsaWFudCB0eXBlLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzT2JqZWN0KG9iaikge1xuXHQgIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdHJpY3Qgb2JqZWN0IHR5cGUgY2hlY2suIE9ubHkgcmV0dXJucyB0cnVlXG5cdCAqIGZvciBwbGFpbiBKYXZhU2NyaXB0IG9iamVjdHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0dmFyIHRvU3RyaW5nID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblx0dmFyIE9CSkVDVF9TVFJJTkcgPSAnW29iamVjdCBPYmplY3RdJztcblx0XG5cdGZ1bmN0aW9uIGlzUGxhaW5PYmplY3Qob2JqKSB7XG5cdCAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gT0JKRUNUX1NUUklORztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFycmF5IHR5cGUgY2hlY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0dmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXHRcblx0LyoqXG5cdCAqIERlZmluZSBhIHByb3BlcnR5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICogQHBhcmFtIHtCb29sZWFufSBbZW51bWVyYWJsZV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZWYob2JqLCBrZXksIHZhbCwgZW51bWVyYWJsZSkge1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuXHQgICAgdmFsdWU6IHZhbCxcblx0ICAgIGVudW1lcmFibGU6ICEhZW51bWVyYWJsZSxcblx0ICAgIHdyaXRhYmxlOiB0cnVlLFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlXG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWJvdW5jZSBhIGZ1bmN0aW9uIHNvIGl0IG9ubHkgZ2V0cyBjYWxsZWQgYWZ0ZXIgdGhlXG5cdCAqIGlucHV0IHN0b3BzIGFycml2aW5nIGFmdGVyIHRoZSBnaXZlbiB3YWl0IHBlcmlvZC5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY1xuXHQgKiBAcGFyYW0ge051bWJlcn0gd2FpdFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gX2RlYm91bmNlKGZ1bmMsIHdhaXQpIHtcblx0ICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG5cdCAgdmFyIGxhdGVyID0gZnVuY3Rpb24gbGF0ZXIoKSB7XG5cdCAgICB2YXIgbGFzdCA9IERhdGUubm93KCkgLSB0aW1lc3RhbXA7XG5cdCAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XG5cdCAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0IC0gbGFzdCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aW1lb3V0ID0gbnVsbDtcblx0ICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcblx0ICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG5cdCAgICB9XG5cdCAgfTtcblx0ICByZXR1cm4gZnVuY3Rpb24gKCkge1xuXHQgICAgY29udGV4dCA9IHRoaXM7XG5cdCAgICBhcmdzID0gYXJndW1lbnRzO1xuXHQgICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcblx0ICAgIGlmICghdGltZW91dCkge1xuXHQgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYW51YWwgaW5kZXhPZiBiZWNhdXNlIGl0J3Mgc2xpZ2h0bHkgZmFzdGVyIHRoYW5cblx0ICogbmF0aXZlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbmRleE9mKGFyciwgb2JqKSB7XG5cdCAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGk7XG5cdCAgfVxuXHQgIHJldHVybiAtMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1ha2UgYSBjYW5jZWxsYWJsZSB2ZXJzaW9uIG9mIGFuIGFzeW5jIGNhbGxiYWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjYW5jZWxsYWJsZShmbikge1xuXHQgIHZhciBjYiA9IGZ1bmN0aW9uIGNiKCkge1xuXHQgICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcblx0ICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgfTtcblx0ICBjYi5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBjYi5jYW5jZWxsZWQgPSB0cnVlO1xuXHQgIH07XG5cdCAgcmV0dXJuIGNiO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgdHdvIHZhbHVlcyBhcmUgbG9vc2VseSBlcXVhbCAtIHRoYXQgaXMsXG5cdCAqIGlmIHRoZXkgYXJlIHBsYWluIG9iamVjdHMsIGRvIHRoZXkgaGF2ZSB0aGUgc2FtZSBzaGFwZT9cblx0ICpcblx0ICogQHBhcmFtIHsqfSBhXG5cdCAqIEBwYXJhbSB7Kn0gYlxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxvb3NlRXF1YWwoYSwgYikge1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuXHQgIHJldHVybiBhID09IGIgfHwgKGlzT2JqZWN0KGEpICYmIGlzT2JqZWN0KGIpID8gSlNPTi5zdHJpbmdpZnkoYSkgPT09IEpTT04uc3RyaW5naWZ5KGIpIDogZmFsc2UpO1xuXHQgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG5cdH1cblx0XG5cdHZhciBoYXNQcm90byA9ICgnX19wcm90b19fJyBpbiB7fSk7XG5cdFxuXHQvLyBCcm93c2VyIGVudmlyb25tZW50IHNuaWZmaW5nXG5cdHZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93KSAhPT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdFxuXHQvLyBkZXRlY3QgZGV2dG9vbHNcblx0dmFyIGRldnRvb2xzID0gaW5Ccm93c2VyICYmIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xuXHRcblx0Ly8gVUEgc25pZmZpbmcgZm9yIHdvcmtpbmcgYXJvdW5kIGJyb3dzZXItc3BlY2lmaWMgcXVpcmtzXG5cdHZhciBVQSA9IGluQnJvd3NlciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xuXHR2YXIgaXNJRSA9IFVBICYmIFVBLmluZGV4T2YoJ3RyaWRlbnQnKSA+IDA7XG5cdHZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwO1xuXHR2YXIgaXNBbmRyb2lkID0gVUEgJiYgVUEuaW5kZXhPZignYW5kcm9pZCcpID4gMDtcblx0dmFyIGlzSW9zID0gVUEgJiYgLyhpcGhvbmV8aXBhZHxpcG9kfGlvcykvaS50ZXN0KFVBKTtcblx0dmFyIGlvc1ZlcnNpb25NYXRjaCA9IGlzSW9zICYmIFVBLm1hdGNoKC9vcyAoW1xcZF9dKykvKTtcblx0dmFyIGlvc1ZlcnNpb24gPSBpb3NWZXJzaW9uTWF0Y2ggJiYgaW9zVmVyc2lvbk1hdGNoWzFdLnNwbGl0KCdfJyk7XG5cdFxuXHQvLyBkZXRlY3RpbmcgaU9TIFVJV2ViVmlldyBieSBpbmRleGVkREJcblx0dmFyIGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcgPSBpb3NWZXJzaW9uICYmIE51bWJlcihpb3NWZXJzaW9uWzBdKSA+PSA5ICYmIE51bWJlcihpb3NWZXJzaW9uWzFdKSA+PSAzICYmICF3aW5kb3cuaW5kZXhlZERCO1xuXHRcblx0dmFyIHRyYW5zaXRpb25Qcm9wID0gdW5kZWZpbmVkO1xuXHR2YXIgdHJhbnNpdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xuXHR2YXIgYW5pbWF0aW9uUHJvcCA9IHVuZGVmaW5lZDtcblx0dmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xuXHRcblx0Ly8gVHJhbnNpdGlvbiBwcm9wZXJ0eS9ldmVudCBzbmlmZmluZ1xuXHRpZiAoaW5Ccm93c2VyICYmICFpc0lFOSkge1xuXHQgIHZhciBpc1dlYmtpdFRyYW5zID0gd2luZG93Lm9udHJhbnNpdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQgIT09IHVuZGVmaW5lZDtcblx0ICB2YXIgaXNXZWJraXRBbmltID0gd2luZG93Lm9uYW5pbWF0aW9uZW5kID09PSB1bmRlZmluZWQgJiYgd2luZG93Lm9ud2Via2l0YW5pbWF0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG5cdCAgdHJhbnNpdGlvblByb3AgPSBpc1dlYmtpdFRyYW5zID8gJ1dlYmtpdFRyYW5zaXRpb24nIDogJ3RyYW5zaXRpb24nO1xuXHQgIHRyYW5zaXRpb25FbmRFdmVudCA9IGlzV2Via2l0VHJhbnMgPyAnd2Via2l0VHJhbnNpdGlvbkVuZCcgOiAndHJhbnNpdGlvbmVuZCc7XG5cdCAgYW5pbWF0aW9uUHJvcCA9IGlzV2Via2l0QW5pbSA/ICdXZWJraXRBbmltYXRpb24nIDogJ2FuaW1hdGlvbic7XG5cdCAgYW5pbWF0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdEFuaW0gPyAnd2Via2l0QW5pbWF0aW9uRW5kJyA6ICdhbmltYXRpb25lbmQnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVmZXIgYSB0YXNrIHRvIGV4ZWN1dGUgaXQgYXN5bmNocm9ub3VzbHkuIElkZWFsbHkgdGhpc1xuXHQgKiBzaG91bGQgYmUgZXhlY3V0ZWQgYXMgYSBtaWNyb3Rhc2ssIHNvIHdlIGxldmVyYWdlXG5cdCAqIE11dGF0aW9uT2JzZXJ2ZXIgaWYgaXQncyBhdmFpbGFibGUsIGFuZCBmYWxsYmFjayB0b1xuXHQgKiBzZXRUaW1lb3V0KDApLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKiBAcGFyYW0ge09iamVjdH0gY3R4XG5cdCAqL1xuXHRcblx0dmFyIG5leHRUaWNrID0gKGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgY2FsbGJhY2tzID0gW107XG5cdCAgdmFyIHBlbmRpbmcgPSBmYWxzZTtcblx0ICB2YXIgdGltZXJGdW5jO1xuXHQgIGZ1bmN0aW9uIG5leHRUaWNrSGFuZGxlcigpIHtcblx0ICAgIHBlbmRpbmcgPSBmYWxzZTtcblx0ICAgIHZhciBjb3BpZXMgPSBjYWxsYmFja3Muc2xpY2UoMCk7XG5cdCAgICBjYWxsYmFja3MgPSBbXTtcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29waWVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIGNvcGllc1tpXSgpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJyAmJiAhaGFzTXV0YXRpb25PYnNlcnZlckJ1Zykge1xuXHQgICAgdmFyIGNvdW50ZXIgPSAxO1xuXHQgICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIobmV4dFRpY2tIYW5kbGVyKTtcblx0ICAgIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvdW50ZXIpO1xuXHQgICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0ZXh0Tm9kZSwge1xuXHQgICAgICBjaGFyYWN0ZXJEYXRhOiB0cnVlXG5cdCAgICB9KTtcblx0ICAgIHRpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgY291bnRlciA9IChjb3VudGVyICsgMSkgJSAyO1xuXHQgICAgICB0ZXh0Tm9kZS5kYXRhID0gY291bnRlcjtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIHdlYnBhY2sgYXR0ZW1wdHMgdG8gaW5qZWN0IGEgc2hpbSBmb3Igc2V0SW1tZWRpYXRlXG5cdCAgICAvLyBpZiBpdCBpcyB1c2VkIGFzIGEgZ2xvYmFsLCBzbyB3ZSBoYXZlIHRvIHdvcmsgYXJvdW5kIHRoYXQgdG9cblx0ICAgIC8vIGF2b2lkIGJ1bmRsaW5nIHVubmVjZXNzYXJ5IGNvZGUuXG5cdCAgICB2YXIgY29udGV4dCA9IGluQnJvd3NlciA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDoge307XG5cdCAgICB0aW1lckZ1bmMgPSBjb250ZXh0LnNldEltbWVkaWF0ZSB8fCBzZXRUaW1lb3V0O1xuXHQgIH1cblx0ICByZXR1cm4gZnVuY3Rpb24gKGNiLCBjdHgpIHtcblx0ICAgIHZhciBmdW5jID0gY3R4ID8gZnVuY3Rpb24gKCkge1xuXHQgICAgICBjYi5jYWxsKGN0eCk7XG5cdCAgICB9IDogY2I7XG5cdCAgICBjYWxsYmFja3MucHVzaChmdW5jKTtcblx0ICAgIGlmIChwZW5kaW5nKSByZXR1cm47XG5cdCAgICBwZW5kaW5nID0gdHJ1ZTtcblx0ICAgIHRpbWVyRnVuYyhuZXh0VGlja0hhbmRsZXIsIDApO1xuXHQgIH07XG5cdH0pKCk7XG5cdFxuXHR2YXIgX1NldCA9IHVuZGVmaW5lZDtcblx0LyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdGlmICh0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJiBTZXQudG9TdHJpbmcoKS5tYXRjaCgvbmF0aXZlIGNvZGUvKSkge1xuXHQgIC8vIHVzZSBuYXRpdmUgU2V0IHdoZW4gYXZhaWxhYmxlLlxuXHQgIF9TZXQgPSBTZXQ7XG5cdH0gZWxzZSB7XG5cdCAgLy8gYSBub24tc3RhbmRhcmQgU2V0IHBvbHlmaWxsIHRoYXQgb25seSB3b3JrcyB3aXRoIHByaW1pdGl2ZSBrZXlzLlxuXHQgIF9TZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgfTtcblx0ICBfU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICByZXR1cm4gdGhpcy5zZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuXHQgIH07XG5cdCAgX1NldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgdGhpcy5zZXRba2V5XSA9IDE7XG5cdCAgfTtcblx0ICBfU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBDYWNoZShsaW1pdCkge1xuXHQgIHRoaXMuc2l6ZSA9IDA7XG5cdCAgdGhpcy5saW1pdCA9IGxpbWl0O1xuXHQgIHRoaXMuaGVhZCA9IHRoaXMudGFpbCA9IHVuZGVmaW5lZDtcblx0ICB0aGlzLl9rZXltYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHR9XG5cdFxuXHR2YXIgcCA9IENhY2hlLnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBQdXQgPHZhbHVlPiBpbnRvIHRoZSBjYWNoZSBhc3NvY2lhdGVkIHdpdGggPGtleT4uXG5cdCAqIFJldHVybnMgdGhlIGVudHJ5IHdoaWNoIHdhcyByZW1vdmVkIHRvIG1ha2Ugcm9vbSBmb3Jcblx0ICogdGhlIG5ldyBlbnRyeS4gT3RoZXJ3aXNlIHVuZGVmaW5lZCBpcyByZXR1cm5lZC5cblx0ICogKGkuZS4gaWYgdGhlcmUgd2FzIGVub3VnaCByb29tIGFscmVhZHkpLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7RW50cnl8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdHAucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcblx0ICB2YXIgcmVtb3ZlZDtcblx0XG5cdCAgdmFyIGVudHJ5ID0gdGhpcy5nZXQoa2V5LCB0cnVlKTtcblx0ICBpZiAoIWVudHJ5KSB7XG5cdCAgICBpZiAodGhpcy5zaXplID09PSB0aGlzLmxpbWl0KSB7XG5cdCAgICAgIHJlbW92ZWQgPSB0aGlzLnNoaWZ0KCk7XG5cdCAgICB9XG5cdCAgICBlbnRyeSA9IHtcblx0ICAgICAga2V5OiBrZXlcblx0ICAgIH07XG5cdCAgICB0aGlzLl9rZXltYXBba2V5XSA9IGVudHJ5O1xuXHQgICAgaWYgKHRoaXMudGFpbCkge1xuXHQgICAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTtcblx0ICAgICAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmhlYWQgPSBlbnRyeTtcblx0ICAgIH1cblx0ICAgIHRoaXMudGFpbCA9IGVudHJ5O1xuXHQgICAgdGhpcy5zaXplKys7XG5cdCAgfVxuXHQgIGVudHJ5LnZhbHVlID0gdmFsdWU7XG5cdFxuXHQgIHJldHVybiByZW1vdmVkO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFB1cmdlIHRoZSBsZWFzdCByZWNlbnRseSB1c2VkIChvbGRlc3QpIGVudHJ5IGZyb20gdGhlXG5cdCAqIGNhY2hlLiBSZXR1cm5zIHRoZSByZW1vdmVkIGVudHJ5IG9yIHVuZGVmaW5lZCBpZiB0aGVcblx0ICogY2FjaGUgd2FzIGVtcHR5LlxuXHQgKi9cblx0XG5cdHAuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGVudHJ5ID0gdGhpcy5oZWFkO1xuXHQgIGlmIChlbnRyeSkge1xuXHQgICAgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5ld2VyO1xuXHQgICAgdGhpcy5oZWFkLm9sZGVyID0gdW5kZWZpbmVkO1xuXHQgICAgZW50cnkubmV3ZXIgPSBlbnRyeS5vbGRlciA9IHVuZGVmaW5lZDtcblx0ICAgIHRoaXMuX2tleW1hcFtlbnRyeS5rZXldID0gdW5kZWZpbmVkO1xuXHQgICAgdGhpcy5zaXplLS07XG5cdCAgfVxuXHQgIHJldHVybiBlbnRyeTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBHZXQgYW5kIHJlZ2lzdGVyIHJlY2VudCB1c2Ugb2YgPGtleT4uIFJldHVybnMgdGhlIHZhbHVlXG5cdCAqIGFzc29jaWF0ZWQgd2l0aCA8a2V5PiBvciB1bmRlZmluZWQgaWYgbm90IGluIGNhY2hlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcmV0dXJuRW50cnlcblx0ICogQHJldHVybiB7RW50cnl8Kn1cblx0ICovXG5cdFxuXHRwLmdldCA9IGZ1bmN0aW9uIChrZXksIHJldHVybkVudHJ5KSB7XG5cdCAgdmFyIGVudHJ5ID0gdGhpcy5fa2V5bWFwW2tleV07XG5cdCAgaWYgKGVudHJ5ID09PSB1bmRlZmluZWQpIHJldHVybjtcblx0ICBpZiAoZW50cnkgPT09IHRoaXMudGFpbCkge1xuXHQgICAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcblx0ICB9XG5cdCAgLy8gSEVBRC0tLS0tLS0tLS0tLS0tVEFJTFxuXHQgIC8vICAgPC5vbGRlciAgIC5uZXdlcj5cblx0ICAvLyAgPC0tLSBhZGQgZGlyZWN0aW9uIC0tXG5cdCAgLy8gICBBICBCICBDICA8RD4gIEVcblx0ICBpZiAoZW50cnkubmV3ZXIpIHtcblx0ICAgIGlmIChlbnRyeSA9PT0gdGhpcy5oZWFkKSB7XG5cdCAgICAgIHRoaXMuaGVhZCA9IGVudHJ5Lm5ld2VyO1xuXHQgICAgfVxuXHQgICAgZW50cnkubmV3ZXIub2xkZXIgPSBlbnRyeS5vbGRlcjsgLy8gQyA8LS0gRS5cblx0ICB9XG5cdCAgaWYgKGVudHJ5Lm9sZGVyKSB7XG5cdCAgICBlbnRyeS5vbGRlci5uZXdlciA9IGVudHJ5Lm5ld2VyOyAvLyBDLiAtLT4gRVxuXHQgIH1cblx0ICBlbnRyeS5uZXdlciA9IHVuZGVmaW5lZDsgLy8gRCAtLXhcblx0ICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDsgLy8gRC4gLS0+IEVcblx0ICBpZiAodGhpcy50YWlsKSB7XG5cdCAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTsgLy8gRS4gPC0tIERcblx0ICB9XG5cdCAgdGhpcy50YWlsID0gZW50cnk7XG5cdCAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcblx0fTtcblx0XG5cdHZhciBjYWNoZSQxID0gbmV3IENhY2hlKDEwMDApO1xuXHR2YXIgZmlsdGVyVG9rZW5SRSA9IC9bXlxccydcIl0rfCdbXiddKid8XCJbXlwiXSpcIi9nO1xuXHR2YXIgcmVzZXJ2ZWRBcmdSRSA9IC9eaW4kfF4tP1xcZCsvO1xuXHRcblx0LyoqXG5cdCAqIFBhcnNlciBzdGF0ZVxuXHQgKi9cblx0XG5cdHZhciBzdHI7XG5cdHZhciBkaXI7XG5cdHZhciBjO1xuXHR2YXIgcHJldjtcblx0dmFyIGk7XG5cdHZhciBsO1xuXHR2YXIgbGFzdEZpbHRlckluZGV4O1xuXHR2YXIgaW5TaW5nbGU7XG5cdHZhciBpbkRvdWJsZTtcblx0dmFyIGN1cmx5O1xuXHR2YXIgc3F1YXJlO1xuXHR2YXIgcGFyZW47XG5cdC8qKlxuXHQgKiBQdXNoIGEgZmlsdGVyIHRvIHRoZSBjdXJyZW50IGRpcmVjdGl2ZSBvYmplY3Rcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwdXNoRmlsdGVyKCkge1xuXHQgIHZhciBleHAgPSBzdHIuc2xpY2UobGFzdEZpbHRlckluZGV4LCBpKS50cmltKCk7XG5cdCAgdmFyIGZpbHRlcjtcblx0ICBpZiAoZXhwKSB7XG5cdCAgICBmaWx0ZXIgPSB7fTtcblx0ICAgIHZhciB0b2tlbnMgPSBleHAubWF0Y2goZmlsdGVyVG9rZW5SRSk7XG5cdCAgICBmaWx0ZXIubmFtZSA9IHRva2Vuc1swXTtcblx0ICAgIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuXHQgICAgICBmaWx0ZXIuYXJncyA9IHRva2Vucy5zbGljZSgxKS5tYXAocHJvY2Vzc0ZpbHRlckFyZyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChmaWx0ZXIpIHtcblx0ICAgIChkaXIuZmlsdGVycyA9IGRpci5maWx0ZXJzIHx8IFtdKS5wdXNoKGZpbHRlcik7XG5cdCAgfVxuXHQgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gYXJndW1lbnQgaXMgZHluYW1pYyBhbmQgc3RyaXAgcXVvdGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gYXJnXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzRmlsdGVyQXJnKGFyZykge1xuXHQgIGlmIChyZXNlcnZlZEFyZ1JFLnRlc3QoYXJnKSkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdmFsdWU6IHRvTnVtYmVyKGFyZyksXG5cdCAgICAgIGR5bmFtaWM6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhhcmcpO1xuXHQgICAgdmFyIGR5bmFtaWMgPSBzdHJpcHBlZCA9PT0gYXJnO1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdmFsdWU6IGR5bmFtaWMgPyBhcmcgOiBzdHJpcHBlZCxcblx0ICAgICAgZHluYW1pYzogZHluYW1pY1xuXHQgICAgfTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhIGRpcmVjdGl2ZSB2YWx1ZSBhbmQgZXh0cmFjdCB0aGUgZXhwcmVzc2lvblxuXHQgKiBhbmQgaXRzIGZpbHRlcnMgaW50byBhIGRlc2NyaXB0b3IuXG5cdCAqXG5cdCAqIEV4YW1wbGU6XG5cdCAqXG5cdCAqIFwiYSArIDEgfCB1cHBlcmNhc2VcIiB3aWxsIHlpZWxkOlxuXHQgKiB7XG5cdCAqICAgZXhwcmVzc2lvbjogJ2EgKyAxJyxcblx0ICogICBmaWx0ZXJzOiBbXG5cdCAqICAgICB7IG5hbWU6ICd1cHBlcmNhc2UnLCBhcmdzOiBudWxsIH1cblx0ICogICBdXG5cdCAqIH1cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlRGlyZWN0aXZlKHMpIHtcblx0ICB2YXIgaGl0ID0gY2FjaGUkMS5nZXQocyk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdFxuXHQgIC8vIHJlc2V0IHBhcnNlciBzdGF0ZVxuXHQgIHN0ciA9IHM7XG5cdCAgaW5TaW5nbGUgPSBpbkRvdWJsZSA9IGZhbHNlO1xuXHQgIGN1cmx5ID0gc3F1YXJlID0gcGFyZW4gPSAwO1xuXHQgIGxhc3RGaWx0ZXJJbmRleCA9IDA7XG5cdCAgZGlyID0ge307XG5cdFxuXHQgIGZvciAoaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBwcmV2ID0gYztcblx0ICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTtcblx0ICAgIGlmIChpblNpbmdsZSkge1xuXHQgICAgICAvLyBjaGVjayBzaW5nbGUgcXVvdGVcblx0ICAgICAgaWYgKGMgPT09IDB4MjcgJiYgcHJldiAhPT0gMHg1QykgaW5TaW5nbGUgPSAhaW5TaW5nbGU7XG5cdCAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7XG5cdCAgICAgIC8vIGNoZWNrIGRvdWJsZSBxdW90ZVxuXHQgICAgICBpZiAoYyA9PT0gMHgyMiAmJiBwcmV2ICE9PSAweDVDKSBpbkRvdWJsZSA9ICFpbkRvdWJsZTtcblx0ICAgIH0gZWxzZSBpZiAoYyA9PT0gMHg3QyAmJiAvLyBwaXBlXG5cdCAgICBzdHIuY2hhckNvZGVBdChpICsgMSkgIT09IDB4N0MgJiYgc3RyLmNoYXJDb2RlQXQoaSAtIDEpICE9PSAweDdDKSB7XG5cdCAgICAgIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG5cdCAgICAgICAgLy8gZmlyc3QgZmlsdGVyLCBlbmQgb2YgZXhwcmVzc2lvblxuXHQgICAgICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuXHQgICAgICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBhbHJlYWR5IGhhcyBmaWx0ZXJcblx0ICAgICAgICBwdXNoRmlsdGVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN3aXRjaCAoYykge1xuXHQgICAgICAgIGNhc2UgMHgyMjpcblx0ICAgICAgICAgIGluRG91YmxlID0gdHJ1ZTticmVhazsgLy8gXCJcblx0ICAgICAgICBjYXNlIDB4Mjc6XG5cdCAgICAgICAgICBpblNpbmdsZSA9IHRydWU7YnJlYWs7IC8vICdcblx0ICAgICAgICBjYXNlIDB4Mjg6XG5cdCAgICAgICAgICBwYXJlbisrO2JyZWFrOyAvLyAoXG5cdCAgICAgICAgY2FzZSAweDI5OlxuXHQgICAgICAgICAgcGFyZW4tLTticmVhazsgLy8gKVxuXHQgICAgICAgIGNhc2UgMHg1Qjpcblx0ICAgICAgICAgIHNxdWFyZSsrO2JyZWFrOyAvLyBbXG5cdCAgICAgICAgY2FzZSAweDVEOlxuXHQgICAgICAgICAgc3F1YXJlLS07YnJlYWs7IC8vIF1cblx0ICAgICAgICBjYXNlIDB4N0I6XG5cdCAgICAgICAgICBjdXJseSsrO2JyZWFrOyAvLyB7XG5cdCAgICAgICAgY2FzZSAweDdEOlxuXHQgICAgICAgICAgY3VybHktLTticmVhazsgLy8gfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuXHQgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuXHQgIH0gZWxzZSBpZiAobGFzdEZpbHRlckluZGV4ICE9PSAwKSB7XG5cdCAgICBwdXNoRmlsdGVyKCk7XG5cdCAgfVxuXHRcblx0ICBjYWNoZSQxLnB1dChzLCBkaXIpO1xuXHQgIHJldHVybiBkaXI7XG5cdH1cblx0XG5cdHZhciBkaXJlY3RpdmUgPSBPYmplY3QuZnJlZXplKHtcblx0ICBwYXJzZURpcmVjdGl2ZTogcGFyc2VEaXJlY3RpdmVcblx0fSk7XG5cdFxuXHR2YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2c7XG5cdHZhciBjYWNoZSA9IHVuZGVmaW5lZDtcblx0dmFyIHRhZ1JFID0gdW5kZWZpbmVkO1xuXHR2YXIgaHRtbFJFID0gdW5kZWZpbmVkO1xuXHQvKipcblx0ICogRXNjYXBlIGEgc3RyaW5nIHNvIGl0IGNhbiBiZSB1c2VkIGluIGEgUmVnRXhwXG5cdCAqIGNvbnN0cnVjdG9yLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVJlZ2V4KCkge1xuXHQgIHZhciBvcGVuID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMF0pO1xuXHQgIHZhciBjbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzFdKTtcblx0ICB2YXIgdW5zYWZlT3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzBdKTtcblx0ICB2YXIgdW5zYWZlQ2xvc2UgPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1sxXSk7XG5cdCAgdGFnUkUgPSBuZXcgUmVnRXhwKHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJ3wnICsgb3BlbiArICcoKD86LnxcXFxcbikrPyknICsgY2xvc2UsICdnJyk7XG5cdCAgaHRtbFJFID0gbmV3IFJlZ0V4cCgnXicgKyB1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICckJyk7XG5cdCAgLy8gcmVzZXQgY2FjaGVcblx0ICBjYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGEgdGVtcGxhdGUgdGV4dCBzdHJpbmcgaW50byBhbiBhcnJheSBvZiB0b2tlbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdCAqIEByZXR1cm4ge0FycmF5PE9iamVjdD4gfCBudWxsfVxuXHQgKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdHlwZVxuXHQgKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdmFsdWVcblx0ICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaHRtbF1cblx0ICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbb25lVGltZV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZVRleHQodGV4dCkge1xuXHQgIGlmICghY2FjaGUpIHtcblx0ICAgIGNvbXBpbGVSZWdleCgpO1xuXHQgIH1cblx0ICB2YXIgaGl0ID0gY2FjaGUuZ2V0KHRleHQpO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHQgIGlmICghdGFnUkUudGVzdCh0ZXh0KSkge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHQgIHZhciB0b2tlbnMgPSBbXTtcblx0ICB2YXIgbGFzdEluZGV4ID0gdGFnUkUubGFzdEluZGV4ID0gMDtcblx0ICB2YXIgbWF0Y2gsIGluZGV4LCBodG1sLCB2YWx1ZSwgZmlyc3QsIG9uZVRpbWU7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICB3aGlsZSAobWF0Y2ggPSB0YWdSRS5leGVjKHRleHQpKSB7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICBpbmRleCA9IG1hdGNoLmluZGV4O1xuXHQgICAgLy8gcHVzaCB0ZXh0IHRva2VuXG5cdCAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcblx0ICAgICAgdG9rZW5zLnB1c2goe1xuXHQgICAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleCwgaW5kZXgpXG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgICAgLy8gdGFnIHRva2VuXG5cdCAgICBodG1sID0gaHRtbFJFLnRlc3QobWF0Y2hbMF0pO1xuXHQgICAgdmFsdWUgPSBodG1sID8gbWF0Y2hbMV0gOiBtYXRjaFsyXTtcblx0ICAgIGZpcnN0ID0gdmFsdWUuY2hhckNvZGVBdCgwKTtcblx0ICAgIG9uZVRpbWUgPSBmaXJzdCA9PT0gNDI7IC8vICpcblx0ICAgIHZhbHVlID0gb25lVGltZSA/IHZhbHVlLnNsaWNlKDEpIDogdmFsdWU7XG5cdCAgICB0b2tlbnMucHVzaCh7XG5cdCAgICAgIHRhZzogdHJ1ZSxcblx0ICAgICAgdmFsdWU6IHZhbHVlLnRyaW0oKSxcblx0ICAgICAgaHRtbDogaHRtbCxcblx0ICAgICAgb25lVGltZTogb25lVGltZVxuXHQgICAgfSk7XG5cdCAgICBsYXN0SW5kZXggPSBpbmRleCArIG1hdGNoWzBdLmxlbmd0aDtcblx0ICB9XG5cdCAgaWYgKGxhc3RJbmRleCA8IHRleHQubGVuZ3RoKSB7XG5cdCAgICB0b2tlbnMucHVzaCh7XG5cdCAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleClcblx0ICAgIH0pO1xuXHQgIH1cblx0ICBjYWNoZS5wdXQodGV4dCwgdG9rZW5zKTtcblx0ICByZXR1cm4gdG9rZW5zO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IGEgbGlzdCBvZiB0b2tlbnMgaW50byBhbiBleHByZXNzaW9uLlxuXHQgKiBlLmcuIHRva2VucyBwYXJzZWQgZnJvbSAnYSB7e2J9fSBjJyBjYW4gYmUgc2VyaWFsaXplZFxuXHQgKiBpbnRvIG9uZSBzaW5nbGUgZXhwcmVzc2lvbiBhcyAnXCJhIFwiICsgYiArIFwiIGNcIicuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9rZW5zVG9FeHAodG9rZW5zLCB2bSkge1xuXHQgIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuXHQgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG5cdCAgICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbiwgdm0pO1xuXHQgICAgfSkuam9pbignKycpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gZm9ybWF0VG9rZW4odG9rZW5zWzBdLCB2bSwgdHJ1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IGEgc2luZ2xlIHRva2VuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICogQHBhcmFtIHtCb29sZWFufSBbc2luZ2xlXVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0VG9rZW4odG9rZW4sIHZtLCBzaW5nbGUpIHtcblx0ICByZXR1cm4gdG9rZW4udGFnID8gdG9rZW4ub25lVGltZSAmJiB2bSA/ICdcIicgKyB2bS4kZXZhbCh0b2tlbi52YWx1ZSkgKyAnXCInIDogaW5saW5lRmlsdGVycyh0b2tlbi52YWx1ZSwgc2luZ2xlKSA6ICdcIicgKyB0b2tlbi52YWx1ZSArICdcIic7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3IgYW4gYXR0cmlidXRlIHdpdGggbXVsdGlwbGUgaW50ZXJwb2xhdGlvbiB0YWdzLFxuXHQgKiBlLmcuIGF0dHI9XCJzb21lLXt7dGhpbmcgfCBmaWx0ZXJ9fVwiLCBpbiBvcmRlciB0byBjb21iaW5lXG5cdCAqIHRoZSB3aG9sZSB0aGluZyBpbnRvIGEgc2luZ2xlIHdhdGNoYWJsZSBleHByZXNzaW9uLCB3ZVxuXHQgKiBoYXZlIHRvIGlubGluZSB0aG9zZSBmaWx0ZXJzLiBUaGlzIGZ1bmN0aW9uIGRvZXMgZXhhY3RseVxuXHQgKiB0aGF0LiBUaGlzIGlzIGEgYml0IGhhY2t5IGJ1dCBpdCBhdm9pZHMgaGVhdnkgY2hhbmdlc1xuXHQgKiB0byBkaXJlY3RpdmUgcGFyc2VyIGFuZCB3YXRjaGVyIG1lY2hhbmlzbS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHNpbmdsZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGZpbHRlclJFID0gL1tefF1cXHxbXnxdLztcblx0ZnVuY3Rpb24gaW5saW5lRmlsdGVycyhleHAsIHNpbmdsZSkge1xuXHQgIGlmICghZmlsdGVyUkUudGVzdChleHApKSB7XG5cdCAgICByZXR1cm4gc2luZ2xlID8gZXhwIDogJygnICsgZXhwICsgJyknO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgZGlyID0gcGFyc2VEaXJlY3RpdmUoZXhwKTtcblx0ICAgIGlmICghZGlyLmZpbHRlcnMpIHtcblx0ICAgICAgcmV0dXJuICcoJyArIGV4cCArICcpJztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAndGhpcy5fYXBwbHlGaWx0ZXJzKCcgKyBkaXIuZXhwcmVzc2lvbiArIC8vIHZhbHVlXG5cdCAgICAgICcsbnVsbCwnICsgLy8gb2xkVmFsdWUgKG51bGwgZm9yIHJlYWQpXG5cdCAgICAgIEpTT04uc3RyaW5naWZ5KGRpci5maWx0ZXJzKSArIC8vIGZpbHRlciBkZXNjcmlwdG9yc1xuXHQgICAgICAnLGZhbHNlKSc7IC8vIHdyaXRlP1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHRleHQgPSBPYmplY3QuZnJlZXplKHtcblx0ICBjb21waWxlUmVnZXg6IGNvbXBpbGVSZWdleCxcblx0ICBwYXJzZVRleHQ6IHBhcnNlVGV4dCxcblx0ICB0b2tlbnNUb0V4cDogdG9rZW5zVG9FeHBcblx0fSk7XG5cdFxuXHR2YXIgZGVsaW1pdGVycyA9IFsne3snLCAnfX0nXTtcblx0dmFyIHVuc2FmZURlbGltaXRlcnMgPSBbJ3t7eycsICd9fX0nXTtcblx0XG5cdHZhciBjb25maWcgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gcHJpbnQgZGVidWcgbWVzc2FnZXMuXG5cdCAgICogQWxzbyBlbmFibGVzIHN0YWNrIHRyYWNlIGZvciB3YXJuaW5ncy5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtCb29sZWFufVxuXHQgICAqL1xuXHRcblx0ICBkZWJ1ZzogZmFsc2UsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gc3VwcHJlc3Mgd2FybmluZ3MuXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7Qm9vbGVhbn1cblx0ICAgKi9cblx0XG5cdCAgc2lsZW50OiBmYWxzZSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byB1c2UgYXN5bmMgcmVuZGVyaW5nLlxuXHQgICAqL1xuXHRcblx0ICBhc3luYzogdHJ1ZSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hldGhlciB0byB3YXJuIGFnYWluc3QgZXJyb3JzIGNhdWdodCB3aGVuIGV2YWx1YXRpbmdcblx0ICAgKiBleHByZXNzaW9ucy5cblx0ICAgKi9cblx0XG5cdCAgd2FybkV4cHJlc3Npb25FcnJvcnM6IHRydWUsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gYWxsb3cgZGV2dG9vbHMgaW5zcGVjdGlvbi5cblx0ICAgKiBEaXNhYmxlZCBieSBkZWZhdWx0IGluIHByb2R1Y3Rpb24gYnVpbGRzLlxuXHQgICAqL1xuXHRcblx0ICBkZXZ0b29sczogcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyxcblx0XG5cdCAgLyoqXG5cdCAgICogSW50ZXJuYWwgZmxhZyB0byBpbmRpY2F0ZSB0aGUgZGVsaW1pdGVycyBoYXZlIGJlZW5cblx0ICAgKiBjaGFuZ2VkLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIF9kZWxpbWl0ZXJzQ2hhbmdlZDogdHJ1ZSxcblx0XG5cdCAgLyoqXG5cdCAgICogTGlzdCBvZiBhc3NldCB0eXBlcyB0aGF0IGEgY29tcG9uZW50IGNhbiBvd24uXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7QXJyYXl9XG5cdCAgICovXG5cdFxuXHQgIF9hc3NldFR5cGVzOiBbJ2NvbXBvbmVudCcsICdkaXJlY3RpdmUnLCAnZWxlbWVudERpcmVjdGl2ZScsICdmaWx0ZXInLCAndHJhbnNpdGlvbicsICdwYXJ0aWFsJ10sXG5cdFxuXHQgIC8qKlxuXHQgICAqIHByb3AgYmluZGluZyBtb2Rlc1xuXHQgICAqL1xuXHRcblx0ICBfcHJvcEJpbmRpbmdNb2Rlczoge1xuXHQgICAgT05FX1dBWTogMCxcblx0ICAgIFRXT19XQVk6IDEsXG5cdCAgICBPTkVfVElNRTogMlxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIE1heCBjaXJjdWxhciB1cGRhdGVzIGFsbG93ZWQgaW4gYSBiYXRjaGVyIGZsdXNoIGN5Y2xlLlxuXHQgICAqL1xuXHRcblx0ICBfbWF4VXBkYXRlQ291bnQ6IDEwMFxuXHRcblx0fSwge1xuXHQgIGRlbGltaXRlcnM6IHsgLyoqXG5cdCAgICAgICAgICAgICAgICAgKiBJbnRlcnBvbGF0aW9uIGRlbGltaXRlcnMuIENoYW5naW5nIHRoZXNlIHdvdWxkIHRyaWdnZXJcblx0ICAgICAgICAgICAgICAgICAqIHRoZSB0ZXh0IHBhcnNlciB0byByZS1jb21waWxlIHRoZSByZWd1bGFyIGV4cHJlc3Npb25zLlxuXHQgICAgICAgICAgICAgICAgICpcblx0ICAgICAgICAgICAgICAgICAqIEB0eXBlIHtBcnJheTxTdHJpbmc+fVxuXHQgICAgICAgICAgICAgICAgICovXG5cdFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiBkZWxpbWl0ZXJzO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuXHQgICAgICBkZWxpbWl0ZXJzID0gdmFsO1xuXHQgICAgICBjb21waWxlUmVnZXgoKTtcblx0ICAgIH0sXG5cdCAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlXG5cdCAgfSxcblx0ICB1bnNhZmVEZWxpbWl0ZXJzOiB7XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIHVuc2FmZURlbGltaXRlcnM7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG5cdCAgICAgIHVuc2FmZURlbGltaXRlcnMgPSB2YWw7XG5cdCAgICAgIGNvbXBpbGVSZWdleCgpO1xuXHQgICAgfSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgIGVudW1lcmFibGU6IHRydWVcblx0ICB9XG5cdH0pO1xuXHRcblx0dmFyIHdhcm4gPSB1bmRlZmluZWQ7XG5cdHZhciBmb3JtYXRDb21wb25lbnROYW1lID0gdW5kZWZpbmVkO1xuXHRcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAoZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7XG5cdFxuXHQgICAgd2FybiA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XG5cdCAgICAgIGlmIChoYXNDb25zb2xlICYmICFjb25maWcuc2lsZW50KSB7XG5cdCAgICAgICAgY29uc29sZS5lcnJvcignW1Z1ZSB3YXJuXTogJyArIG1zZyArICh2bSA/IGZvcm1hdENvbXBvbmVudE5hbWUodm0pIDogJycpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBmb3JtYXRDb21wb25lbnROYW1lID0gZnVuY3Rpb24gKHZtKSB7XG5cdCAgICAgIHZhciBuYW1lID0gdm0uX2lzVnVlID8gdm0uJG9wdGlvbnMubmFtZSA6IHZtLm5hbWU7XG5cdCAgICAgIHJldHVybiBuYW1lID8gJyAoZm91bmQgaW4gY29tcG9uZW50OiA8JyArIGh5cGhlbmF0ZShuYW1lKSArICc+KScgOiAnJztcblx0ICAgIH07XG5cdCAgfSkoKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFwcGVuZCB3aXRoIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhcHBlbmRXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICBhcHBseVRyYW5zaXRpb24oZWwsIDEsIGZ1bmN0aW9uICgpIHtcblx0ICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfSwgdm0sIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydEJlZm9yZSB3aXRoIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBiZWZvcmVXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICBhcHBseVRyYW5zaXRpb24oZWwsIDEsIGZ1bmN0aW9uICgpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcblx0ICB9LCB2bSwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIHdpdGggdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZVdpdGhUcmFuc2l0aW9uKGVsLCB2bSwgY2IpIHtcblx0ICBhcHBseVRyYW5zaXRpb24oZWwsIC0xLCBmdW5jdGlvbiAoKSB7XG5cdCAgICByZW1vdmUoZWwpO1xuXHQgIH0sIHZtLCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcHBseSB0cmFuc2l0aW9ucyB3aXRoIGFuIG9wZXJhdGlvbiBjYWxsYmFjay5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge051bWJlcn0gZGlyZWN0aW9uXG5cdCAqICAgICAgICAgICAgICAgICAgMTogZW50ZXJcblx0ICogICAgICAgICAgICAgICAgIC0xOiBsZWF2ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHRoZSBhY3R1YWwgRE9NIG9wZXJhdGlvblxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFwcGx5VHJhbnNpdGlvbihlbCwgZGlyZWN0aW9uLCBvcCwgdm0sIGNiKSB7XG5cdCAgdmFyIHRyYW5zaXRpb24gPSBlbC5fX3ZfdHJhbnM7XG5cdCAgaWYgKCF0cmFuc2l0aW9uIHx8XG5cdCAgLy8gc2tpcCBpZiB0aGVyZSBhcmUgbm8ganMgaG9va3MgYW5kIENTUyB0cmFuc2l0aW9uIGlzXG5cdCAgLy8gbm90IHN1cHBvcnRlZFxuXHQgICF0cmFuc2l0aW9uLmhvb2tzICYmICF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcblx0ICAvLyBza2lwIHRyYW5zaXRpb25zIGZvciBpbml0aWFsIGNvbXBpbGVcblx0ICAhdm0uX2lzQ29tcGlsZWQgfHxcblx0ICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgbWFuaXB1bGF0ZWQgYnkgYSBwYXJlbnQgZGlyZWN0aXZlXG5cdCAgLy8gZHVyaW5nIHRoZSBwYXJlbnQncyBjb21waWxhdGlvbiBwaGFzZSwgc2tpcCB0aGVcblx0ICAvLyBhbmltYXRpb24uXG5cdCAgdm0uJHBhcmVudCAmJiAhdm0uJHBhcmVudC5faXNDb21waWxlZCkge1xuXHQgICAgb3AoKTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGFjdGlvbiA9IGRpcmVjdGlvbiA+IDAgPyAnZW50ZXInIDogJ2xlYXZlJztcblx0ICB0cmFuc2l0aW9uW2FjdGlvbl0ob3AsIGNiKTtcblx0fVxuXHRcblx0dmFyIHRyYW5zaXRpb24gPSBPYmplY3QuZnJlZXplKHtcblx0ICBhcHBlbmRXaXRoVHJhbnNpdGlvbjogYXBwZW5kV2l0aFRyYW5zaXRpb24sXG5cdCAgYmVmb3JlV2l0aFRyYW5zaXRpb246IGJlZm9yZVdpdGhUcmFuc2l0aW9uLFxuXHQgIHJlbW92ZVdpdGhUcmFuc2l0aW9uOiByZW1vdmVXaXRoVHJhbnNpdGlvbixcblx0ICBhcHBseVRyYW5zaXRpb246IGFwcGx5VHJhbnNpdGlvblxuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBRdWVyeSBhbiBlbGVtZW50IHNlbGVjdG9yIGlmIGl0J3Mgbm90IGFuIGVsZW1lbnQgYWxyZWFkeS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7RWxlbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBxdWVyeShlbCkge1xuXHQgIGlmICh0eXBlb2YgZWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICB2YXIgc2VsZWN0b3IgPSBlbDtcblx0ICAgIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XG5cdCAgICBpZiAoIWVsKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQ2Fubm90IGZpbmQgZWxlbWVudDogJyArIHNlbGVjdG9yKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGVsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cblx0ICogTm90ZTogZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNvbnRhaW5zIHNob3VsZCB3b3JrIGhlcmVcblx0ICogYnV0IGFsd2F5cyByZXR1cm5zIGZhbHNlIGZvciBjb21tZW50IG5vZGVzIGluIHBoYW50b21qcyxcblx0ICogbWFraW5nIHVuaXQgdGVzdHMgZGlmZmljdWx0LiBUaGlzIGlzIGZpeGVkIGJ5IGRvaW5nIHRoZVxuXHQgKiBjb250YWlucygpIGNoZWNrIG9uIHRoZSBub2RlJ3MgcGFyZW50Tm9kZSBpbnN0ZWFkIG9mXG5cdCAqIHRoZSBub2RlIGl0c2VsZi5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5Eb2Mobm9kZSkge1xuXHQgIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuXHQgIHZhciBkb2MgPSBub2RlLm93bmVyRG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXHQgIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG5cdCAgcmV0dXJuIGRvYyA9PT0gbm9kZSB8fCBkb2MgPT09IHBhcmVudCB8fCAhIShwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09PSAxICYmIGRvYy5jb250YWlucyhwYXJlbnQpKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBhbmQgcmVtb3ZlIGFuIGF0dHJpYnV0ZSBmcm9tIGEgbm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBfYXR0clxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldEF0dHIobm9kZSwgX2F0dHIpIHtcblx0ICB2YXIgdmFsID0gbm9kZS5nZXRBdHRyaWJ1dGUoX2F0dHIpO1xuXHQgIGlmICh2YWwgIT09IG51bGwpIHtcblx0ICAgIG5vZGUucmVtb3ZlQXR0cmlidXRlKF9hdHRyKTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBhbiBhdHRyaWJ1dGUgd2l0aCBjb2xvbiBvciB2LWJpbmQ6IHByZWZpeC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldEJpbmRBdHRyKG5vZGUsIG5hbWUpIHtcblx0ICB2YXIgdmFsID0gZ2V0QXR0cihub2RlLCAnOicgKyBuYW1lKTtcblx0ICBpZiAodmFsID09PSBudWxsKSB7XG5cdCAgICB2YWwgPSBnZXRBdHRyKG5vZGUsICd2LWJpbmQ6JyArIG5hbWUpO1xuXHQgIH1cblx0ICByZXR1cm4gdmFsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgdGhlIHByZXNlbmNlIG9mIGEgYmluZCBhdHRyaWJ1dGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGhhc0JpbmRBdHRyKG5vZGUsIG5hbWUpIHtcblx0ICByZXR1cm4gbm9kZS5oYXNBdHRyaWJ1dGUobmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJzonICsgbmFtZSkgfHwgbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtYmluZDonICsgbmFtZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnQgZWwgYmVmb3JlIHRhcmdldFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYmVmb3JlKGVsLCB0YXJnZXQpIHtcblx0ICB0YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWwsIHRhcmdldCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnQgZWwgYWZ0ZXIgdGFyZ2V0XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhZnRlcihlbCwgdGFyZ2V0KSB7XG5cdCAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuXHQgICAgYmVmb3JlKGVsLCB0YXJnZXQubmV4dFNpYmxpbmcpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0YXJnZXQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGVsIGZyb20gRE9NXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmUoZWwpIHtcblx0ICBlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGVsKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByZXBlbmQgZWwgdG8gdGFyZ2V0XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcmVwZW5kKGVsLCB0YXJnZXQpIHtcblx0ICBpZiAodGFyZ2V0LmZpcnN0Q2hpbGQpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0LmZpcnN0Q2hpbGQpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlcGxhY2UgdGFyZ2V0IHdpdGggZWxcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlcGxhY2UodGFyZ2V0LCBlbCkge1xuXHQgIHZhciBwYXJlbnQgPSB0YXJnZXQucGFyZW50Tm9kZTtcblx0ICBpZiAocGFyZW50KSB7XG5cdCAgICBwYXJlbnQucmVwbGFjZUNoaWxkKGVsLCB0YXJnZXQpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb24oZWwsIGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSkge1xuXHQgIGVsLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiLCB1c2VDYXB0dXJlKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb2ZmKGVsLCBldmVudCwgY2IpIHtcblx0ICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3IgSUU5IGNvbXBhdDogd2hlbiBib3RoIGNsYXNzIGFuZCA6Y2xhc3MgYXJlIHByZXNlbnRcblx0ICogZ2V0QXR0cmlidXRlKCdjbGFzcycpIHJldHVybnMgd3JvbmcgdmFsdWUuLi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0Q2xhc3MoZWwpIHtcblx0ICB2YXIgY2xhc3NuYW1lID0gZWwuY2xhc3NOYW1lO1xuXHQgIGlmICh0eXBlb2YgY2xhc3NuYW1lID09PSAnb2JqZWN0Jykge1xuXHQgICAgY2xhc3NuYW1lID0gY2xhc3NuYW1lLmJhc2VWYWwgfHwgJyc7XG5cdCAgfVxuXHQgIHJldHVybiBjbGFzc25hbWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbiBJRTksIHNldEF0dHJpYnV0ZSgnY2xhc3MnKSB3aWxsIHJlc3VsdCBpbiBlbXB0eSBjbGFzc1xuXHQgKiBpZiB0aGUgZWxlbWVudCBhbHNvIGhhcyB0aGUgOmNsYXNzIGF0dHJpYnV0ZTsgSG93ZXZlciBpblxuXHQgKiBQaGFudG9tSlMsIHNldHRpbmcgYGNsYXNzTmFtZWAgZG9lcyBub3Qgd29yayBvbiBTVkcgZWxlbWVudHMuLi5cblx0ICogU28gd2UgaGF2ZSB0byBkbyBhIGNvbmRpdGlvbmFsIGNoZWNrIGhlcmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNldENsYXNzKGVsLCBjbHMpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNJRTkgJiYgIS9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcblx0ICAgIGVsLmNsYXNzTmFtZSA9IGNscztcblx0ICB9IGVsc2Uge1xuXHQgICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNscyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYWRkQ2xhc3MoZWwsIGNscykge1xuXHQgIGlmIChlbC5jbGFzc0xpc3QpIHtcblx0ICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcblx0ICAgIGlmIChjdXIuaW5kZXhPZignICcgKyBjbHMgKyAnICcpIDwgMCkge1xuXHQgICAgICBzZXRDbGFzcyhlbCwgKGN1ciArIGNscykudHJpbSgpKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVDbGFzcyhlbCwgY2xzKSB7XG5cdCAgaWYgKGVsLmNsYXNzTGlzdCkge1xuXHQgICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuXHQgICAgdmFyIHRhciA9ICcgJyArIGNscyArICcgJztcblx0ICAgIHdoaWxlIChjdXIuaW5kZXhPZih0YXIpID49IDApIHtcblx0ICAgICAgY3VyID0gY3VyLnJlcGxhY2UodGFyLCAnICcpO1xuXHQgICAgfVxuXHQgICAgc2V0Q2xhc3MoZWwsIGN1ci50cmltKCkpO1xuXHQgIH1cblx0ICBpZiAoIWVsLmNsYXNzTmFtZSkge1xuXHQgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdjbGFzcycpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4dHJhY3QgcmF3IGNvbnRlbnQgaW5zaWRlIGFuIGVsZW1lbnQgaW50byBhIHRlbXBvcmFyeVxuXHQgKiBjb250YWluZXIgZGl2XG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtCb29sZWFufSBhc0ZyYWdtZW50XG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0Q29udGVudChlbCwgYXNGcmFnbWVudCkge1xuXHQgIHZhciBjaGlsZDtcblx0ICB2YXIgcmF3Q29udGVudDtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaXNUZW1wbGF0ZShlbCkgJiYgaXNGcmFnbWVudChlbC5jb250ZW50KSkge1xuXHQgICAgZWwgPSBlbC5jb250ZW50O1xuXHQgIH1cblx0ICBpZiAoZWwuaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICB0cmltTm9kZShlbCk7XG5cdCAgICByYXdDb250ZW50ID0gYXNGcmFnbWVudCA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIHdoaWxlIChjaGlsZCA9IGVsLmZpcnN0Q2hpbGQpIHtcblx0ICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgICByYXdDb250ZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJhd0NvbnRlbnQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUcmltIHBvc3NpYmxlIGVtcHR5IGhlYWQvdGFpbCB0ZXh0IGFuZCBjb21tZW50XG5cdCAqIG5vZGVzIGluc2lkZSBhIHBhcmVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdHJpbU5vZGUobm9kZSkge1xuXHQgIHZhciBjaGlsZDtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1zZXF1ZW5jZXMgKi9cblx0ICB3aGlsZSAoKGNoaWxkID0gbm9kZS5maXJzdENoaWxkLCBpc1RyaW1tYWJsZShjaGlsZCkpKSB7XG5cdCAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0ICB9XG5cdCAgd2hpbGUgKChjaGlsZCA9IG5vZGUubGFzdENoaWxkLCBpc1RyaW1tYWJsZShjaGlsZCkpKSB7XG5cdCAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcblx0ICB9XG5cdCAgLyogZXNsaW50LWVuYWJsZSBuby1zZXF1ZW5jZXMgKi9cblx0fVxuXHRcblx0ZnVuY3Rpb24gaXNUcmltbWFibGUobm9kZSkge1xuXHQgIHJldHVybiBub2RlICYmIChub2RlLm5vZGVUeXBlID09PSAzICYmICFub2RlLmRhdGEudHJpbSgpIHx8IG5vZGUubm9kZVR5cGUgPT09IDgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIHRlbXBsYXRlIHRhZy5cblx0ICogTm90ZSBpZiB0aGUgdGVtcGxhdGUgYXBwZWFycyBpbnNpZGUgYW4gU1ZHIGl0cyB0YWdOYW1lXG5cdCAqIHdpbGwgYmUgaW4gbG93ZXJjYXNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNUZW1wbGF0ZShlbCkge1xuXHQgIHJldHVybiBlbC50YWdOYW1lICYmIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RlbXBsYXRlJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhbiBcImFuY2hvclwiIGZvciBwZXJmb3JtaW5nIGRvbSBpbnNlcnRpb24vcmVtb3ZhbHMuXG5cdCAqIFRoaXMgaXMgdXNlZCBpbiBhIG51bWJlciBvZiBzY2VuYXJpb3M6XG5cdCAqIC0gZnJhZ21lbnQgaW5zdGFuY2Vcblx0ICogLSB2LWh0bWxcblx0ICogLSB2LWlmXG5cdCAqIC0gdi1mb3Jcblx0ICogLSBjb21wb25lbnRcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcblx0ICogQHBhcmFtIHtCb29sZWFufSBwZXJzaXN0IC0gSUUgdHJhc2hlcyBlbXB0eSB0ZXh0Tm9kZXMgb25cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xvbmVOb2RlKHRydWUpLCBzbyBpbiBjZXJ0YWluXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2VzIHRoZSBhbmNob3IgbmVlZHMgdG8gYmVcblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uLWVtcHR5IHRvIGJlIHBlcnNpc3RlZCBpblxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wbGF0ZXMuXG5cdCAqIEByZXR1cm4ge0NvbW1lbnR8VGV4dH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjcmVhdGVBbmNob3IoY29udGVudCwgcGVyc2lzdCkge1xuXHQgIHZhciBhbmNob3IgPSBjb25maWcuZGVidWcgPyBkb2N1bWVudC5jcmVhdGVDb21tZW50KGNvbnRlbnQpIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocGVyc2lzdCA/ICcgJyA6ICcnKTtcblx0ICBhbmNob3IuX192X2FuY2hvciA9IHRydWU7XG5cdCAgcmV0dXJuIGFuY2hvcjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbmQgYSBjb21wb25lbnQgcmVmIGF0dHJpYnV0ZSB0aGF0IHN0YXJ0cyB3aXRoICQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdHZhciByZWZSRSA9IC9edi1yZWY6Lztcblx0XG5cdGZ1bmN0aW9uIGZpbmRSZWYobm9kZSkge1xuXHQgIGlmIChub2RlLmhhc0F0dHJpYnV0ZXMoKSkge1xuXHQgICAgdmFyIGF0dHJzID0gbm9kZS5hdHRyaWJ1dGVzO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuXHQgICAgICBpZiAocmVmUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgIHJldHVybiBjYW1lbGl6ZShuYW1lLnJlcGxhY2UocmVmUkUsICcnKSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYXAgYSBmdW5jdGlvbiB0byBhIHJhbmdlIG9mIG5vZGVzIC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEBwYXJhbSB7Tm9kZX0gZW5kXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IG9wXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFwTm9kZVJhbmdlKG5vZGUsIGVuZCwgb3ApIHtcblx0ICB2YXIgbmV4dDtcblx0ICB3aGlsZSAobm9kZSAhPT0gZW5kKSB7XG5cdCAgICBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcblx0ICAgIG9wKG5vZGUpO1xuXHQgICAgbm9kZSA9IG5leHQ7XG5cdCAgfVxuXHQgIG9wKGVuZCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgYSByYW5nZSBvZiBub2RlcyB3aXRoIHRyYW5zaXRpb24sIHN0b3JlXG5cdCAqIHRoZSBub2RlcyBpbiBhIGZyYWdtZW50IHdpdGggY29ycmVjdCBvcmRlcmluZyxcblx0ICogYW5kIGNhbGwgY2FsbGJhY2sgd2hlbiBkb25lLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IHN0YXJ0XG5cdCAqIEBwYXJhbSB7Tm9kZX0gZW5kXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgdm0sIGZyYWcsIGNiKSB7XG5cdCAgdmFyIGRvbmUgPSBmYWxzZTtcblx0ICB2YXIgcmVtb3ZlZCA9IDA7XG5cdCAgdmFyIG5vZGVzID0gW107XG5cdCAgbWFwTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICBpZiAobm9kZSA9PT0gZW5kKSBkb25lID0gdHJ1ZTtcblx0ICAgIG5vZGVzLnB1c2gobm9kZSk7XG5cdCAgICByZW1vdmVXaXRoVHJhbnNpdGlvbihub2RlLCB2bSwgb25SZW1vdmVkKTtcblx0ICB9KTtcblx0ICBmdW5jdGlvbiBvblJlbW92ZWQoKSB7XG5cdCAgICByZW1vdmVkKys7XG5cdCAgICBpZiAoZG9uZSAmJiByZW1vdmVkID49IG5vZGVzLmxlbmd0aCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChub2Rlc1tpXSk7XG5cdCAgICAgIH1cblx0ICAgICAgY2IgJiYgY2IoKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBEb2N1bWVudEZyYWdtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc0ZyYWdtZW50KG5vZGUpIHtcblx0ICByZXR1cm4gbm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSAxMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBvdXRlckhUTUwgb2YgZWxlbWVudHMsIHRha2luZyBjYXJlXG5cdCAqIG9mIFNWRyBlbGVtZW50cyBpbiBJRSBhcyB3ZWxsLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRPdXRlckhUTUwoZWwpIHtcblx0ICBpZiAoZWwub3V0ZXJIVE1MKSB7XG5cdCAgICByZXR1cm4gZWwub3V0ZXJIVE1MO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBjb250YWluZXIuYXBwZW5kQ2hpbGQoZWwuY2xvbmVOb2RlKHRydWUpKTtcblx0ICAgIHJldHVybiBjb250YWluZXIuaW5uZXJIVE1MO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGNvbW1vblRhZ1JFID0gL14oZGl2fHB8c3BhbnxpbWd8YXxifGl8YnJ8dWx8b2x8bGl8aDF8aDJ8aDN8aDR8aDV8aDZ8Y29kZXxwcmV8dGFibGV8dGh8dGR8dHJ8Zm9ybXxsYWJlbHxpbnB1dHxzZWxlY3R8b3B0aW9ufG5hdnxhcnRpY2xlfHNlY3Rpb258aGVhZGVyfGZvb3RlcikkL2k7XG5cdHZhciByZXNlcnZlZFRhZ1JFID0gL14oc2xvdHxwYXJ0aWFsfGNvbXBvbmVudCkkL2k7XG5cdFxuXHR2YXIgaXNVbmtub3duRWxlbWVudCA9IHVuZGVmaW5lZDtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICBpc1Vua25vd25FbGVtZW50ID0gZnVuY3Rpb24gKGVsLCB0YWcpIHtcblx0ICAgIGlmICh0YWcuaW5kZXhPZignLScpID4gLTEpIHtcblx0ICAgICAgLy8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjgyMTAzNjQvMTA3MDI0NFxuXHQgICAgICByZXR1cm4gZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQgfHwgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiAoL0hUTUxVbmtub3duRWxlbWVudC8udGVzdChlbC50b1N0cmluZygpKSAmJlxuXHQgICAgICAgIC8vIENocm9tZSByZXR1cm5zIHVua25vd24gZm9yIHNldmVyYWwgSFRNTDUgZWxlbWVudHMuXG5cdCAgICAgICAgLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTU0MDUyNlxuXHQgICAgICAgIC8vIEZpcmVmb3ggcmV0dXJucyB1bmtub3duIGZvciBzb21lIFwiSW50ZXJhY3RpdmUgZWxlbWVudHMuXCJcblx0ICAgICAgICAhL14oZGF0YXx0aW1lfHJ0Y3xyYnxkZXRhaWxzfGRpYWxvZ3xzdW1tYXJ5KSQvLnRlc3QodGFnKVxuXHQgICAgICApO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LCBpZiB5ZXMgcmV0dXJuIGl0c1xuXHQgKiBjb21wb25lbnQgaWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcblx0ICBpZiAoIWNvbW1vblRhZ1JFLnRlc3QodGFnKSAmJiAhcmVzZXJ2ZWRUYWdSRS50ZXN0KHRhZykpIHtcblx0ICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpKSB7XG5cdCAgICAgIHJldHVybiB7IGlkOiB0YWcgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBpcyA9IGhhc0F0dHJzICYmIGdldElzQmluZGluZyhlbCwgb3B0aW9ucyk7XG5cdCAgICAgIGlmIChpcykge1xuXHQgICAgICAgIHJldHVybiBpcztcblx0ICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgdmFyIGV4cGVjdGVkVGFnID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCAmJiBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwW3RhZ107XG5cdCAgICAgICAgaWYgKGV4cGVjdGVkVGFnKSB7XG5cdCAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gJyArICdkaWQgeW91IG1lYW4gPCcgKyBleHBlY3RlZFRhZyArICc+PyAnICsgJ0hUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlIGtlYmFiLWNhc2UgaW4gdGVtcGxhdGVzLicpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoaXNVbmtub3duRWxlbWVudChlbCwgdGFnKSkge1xuXHQgICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArICdyZWdpc3RlciB0aGUgY29tcG9uZW50IGNvcnJlY3RseT8gRm9yIHJlY3Vyc2l2ZSBjb21wb25lbnRzLCAnICsgJ21ha2Ugc3VyZSB0byBwcm92aWRlIHRoZSBcIm5hbWVcIiBvcHRpb24uJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChoYXNBdHRycykge1xuXHQgICAgcmV0dXJuIGdldElzQmluZGluZyhlbCwgb3B0aW9ucyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IFwiaXNcIiBiaW5kaW5nIGZyb20gYW4gZWxlbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldElzQmluZGluZyhlbCwgb3B0aW9ucykge1xuXHQgIC8vIGR5bmFtaWMgc3ludGF4XG5cdCAgdmFyIGV4cCA9IGVsLmdldEF0dHJpYnV0ZSgnaXMnKTtcblx0ICBpZiAoZXhwICE9IG51bGwpIHtcblx0ICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCBleHApKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcblx0ICAgICAgcmV0dXJuIHsgaWQ6IGV4cCB9O1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBleHAgPSBnZXRCaW5kQXR0cihlbCwgJ2lzJyk7XG5cdCAgICBpZiAoZXhwICE9IG51bGwpIHtcblx0ICAgICAgcmV0dXJuIHsgaWQ6IGV4cCwgZHluYW1pYzogdHJ1ZSB9O1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIE9wdGlvbiBvdmVyd3JpdGluZyBzdHJhdGVnaWVzIGFyZSBmdW5jdGlvbnMgdGhhdCBoYW5kbGVcblx0ICogaG93IHRvIG1lcmdlIGEgcGFyZW50IG9wdGlvbiB2YWx1ZSBhbmQgYSBjaGlsZCBvcHRpb25cblx0ICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuXG5cdCAqXG5cdCAqIEFsbCBzdHJhdGVneSBmdW5jdGlvbnMgZm9sbG93IHRoZSBzYW1lIHNpZ25hdHVyZTpcblx0ICpcblx0ICogQHBhcmFtIHsqfSBwYXJlbnRWYWxcblx0ICogQHBhcmFtIHsqfSBjaGlsZFZhbFxuXHQgKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuXHQgKi9cblx0XG5cdHZhciBzdHJhdHMgPSBjb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0XG5cdC8qKlxuXHQgKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZURhdGEodG8sIGZyb20pIHtcblx0ICB2YXIga2V5LCB0b1ZhbCwgZnJvbVZhbDtcblx0ICBmb3IgKGtleSBpbiBmcm9tKSB7XG5cdCAgICB0b1ZhbCA9IHRvW2tleV07XG5cdCAgICBmcm9tVmFsID0gZnJvbVtrZXldO1xuXHQgICAgaWYgKCFoYXNPd24odG8sIGtleSkpIHtcblx0ICAgICAgc2V0KHRvLCBrZXksIGZyb21WYWwpO1xuXHQgICAgfSBlbHNlIGlmIChpc09iamVjdCh0b1ZhbCkgJiYgaXNPYmplY3QoZnJvbVZhbCkpIHtcblx0ICAgICAgbWVyZ2VEYXRhKHRvVmFsLCBmcm9tVmFsKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRvO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGF0YVxuXHQgKi9cblx0XG5cdHN0cmF0cy5kYXRhID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG5cdCAgaWYgKCF2bSkge1xuXHQgICAgLy8gaW4gYSBWdWUuZXh0ZW5kIG1lcmdlLCBib3RoIHNob3VsZCBiZSBmdW5jdGlvbnNcblx0ICAgIGlmICghY2hpbGRWYWwpIHtcblx0ICAgICAgcmV0dXJuIHBhcmVudFZhbDtcblx0ICAgIH1cblx0ICAgIGlmICh0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJkYXRhXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcblx0ICAgICAgcmV0dXJuIHBhcmVudFZhbDtcblx0ICAgIH1cblx0ICAgIGlmICghcGFyZW50VmFsKSB7XG5cdCAgICAgIHJldHVybiBjaGlsZFZhbDtcblx0ICAgIH1cblx0ICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCxcblx0ICAgIC8vIHdlIG5lZWQgdG8gcmV0dXJuIGEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIHRoZVxuXHQgICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG5cdCAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2Vcblx0ICAgIC8vIGl0IGhhcyB0byBiZSBhIGZ1bmN0aW9uIHRvIHBhc3MgcHJldmlvdXMgbWVyZ2VzLlxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcblx0ICAgICAgcmV0dXJuIG1lcmdlRGF0YShjaGlsZFZhbC5jYWxsKHRoaXMpLCBwYXJlbnRWYWwuY2FsbCh0aGlzKSk7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSBpZiAocGFyZW50VmFsIHx8IGNoaWxkVmFsKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkSW5zdGFuY2VEYXRhRm4oKSB7XG5cdCAgICAgIC8vIGluc3RhbmNlIG1lcmdlXG5cdCAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHZtKSA6IGNoaWxkVmFsO1xuXHQgICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nID8gcGFyZW50VmFsLmNhbGwodm0pIDogdW5kZWZpbmVkO1xuXHQgICAgICBpZiAoaW5zdGFuY2VEYXRhKSB7XG5cdCAgICAgICAgcmV0dXJuIG1lcmdlRGF0YShpbnN0YW5jZURhdGEsIGRlZmF1bHREYXRhKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gZGVmYXVsdERhdGE7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEVsXG5cdCAqL1xuXHRcblx0c3RyYXRzLmVsID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG5cdCAgaWYgKCF2bSAmJiBjaGlsZFZhbCAmJiB0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZWxcIiBvcHRpb24gc2hvdWxkIGJlIGEgZnVuY3Rpb24gJyArICd0aGF0IHJldHVybnMgYSBwZXItaW5zdGFuY2UgdmFsdWUgaW4gY29tcG9uZW50ICcgKyAnZGVmaW5pdGlvbnMuJywgdm0pO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgcmV0ID0gY2hpbGRWYWwgfHwgcGFyZW50VmFsO1xuXHQgIC8vIGludm9rZSB0aGUgZWxlbWVudCBmYWN0b3J5IGlmIHRoaXMgaXMgaW5zdGFuY2UgbWVyZ2Vcblx0ICByZXR1cm4gdm0gJiYgdHlwZW9mIHJldCA9PT0gJ2Z1bmN0aW9uJyA/IHJldC5jYWxsKHZtKSA6IHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBIb29rcyBhbmQgcGFyYW0gYXR0cmlidXRlcyBhcmUgbWVyZ2VkIGFzIGFycmF5cy5cblx0ICovXG5cdFxuXHRzdHJhdHMuaW5pdCA9IHN0cmF0cy5jcmVhdGVkID0gc3RyYXRzLnJlYWR5ID0gc3RyYXRzLmF0dGFjaGVkID0gc3RyYXRzLmRldGFjaGVkID0gc3RyYXRzLmJlZm9yZUNvbXBpbGUgPSBzdHJhdHMuY29tcGlsZWQgPSBzdHJhdHMuYmVmb3JlRGVzdHJveSA9IHN0cmF0cy5kZXN0cm95ZWQgPSBzdHJhdHMuYWN0aXZhdGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIHJldHVybiBjaGlsZFZhbCA/IHBhcmVudFZhbCA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpIDogaXNBcnJheShjaGlsZFZhbCkgPyBjaGlsZFZhbCA6IFtjaGlsZFZhbF0gOiBwYXJlbnRWYWw7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQXNzZXRzXG5cdCAqXG5cdCAqIFdoZW4gYSB2bSBpcyBwcmVzZW50IChpbnN0YW5jZSBjcmVhdGlvbiksIHdlIG5lZWQgdG8gZG9cblx0ICogYSB0aHJlZS13YXkgbWVyZ2UgYmV0d2VlbiBjb25zdHJ1Y3RvciBvcHRpb25zLCBpbnN0YW5jZVxuXHQgKiBvcHRpb25zIGFuZCBwYXJlbnQgb3B0aW9ucy5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtZXJnZUFzc2V0cyhwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpO1xuXHQgIHJldHVybiBjaGlsZFZhbCA/IGV4dGVuZChyZXMsIGd1YXJkQXJyYXlBc3NldHMoY2hpbGRWYWwpKSA6IHJlcztcblx0fVxuXHRcblx0Y29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICBzdHJhdHNbdHlwZSArICdzJ10gPSBtZXJnZUFzc2V0cztcblx0fSk7XG5cdFxuXHQvKipcblx0ICogRXZlbnRzICYgV2F0Y2hlcnMuXG5cdCAqXG5cdCAqIEV2ZW50cyAmIHdhdGNoZXJzIGhhc2hlcyBzaG91bGQgbm90IG92ZXJ3cml0ZSBvbmVcblx0ICogYW5vdGhlciwgc28gd2UgbWVyZ2UgdGhlbSBhcyBhcnJheXMuXG5cdCAqL1xuXHRcblx0c3RyYXRzLndhdGNoID0gc3RyYXRzLmV2ZW50cyA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcblx0ICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuXHQgIHZhciByZXQgPSB7fTtcblx0ICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuXHQgIGZvciAodmFyIGtleSBpbiBjaGlsZFZhbCkge1xuXHQgICAgdmFyIHBhcmVudCA9IHJldFtrZXldO1xuXHQgICAgdmFyIGNoaWxkID0gY2hpbGRWYWxba2V5XTtcblx0ICAgIGlmIChwYXJlbnQgJiYgIWlzQXJyYXkocGFyZW50KSkge1xuXHQgICAgICBwYXJlbnQgPSBbcGFyZW50XTtcblx0ICAgIH1cblx0ICAgIHJldFtrZXldID0gcGFyZW50ID8gcGFyZW50LmNvbmNhdChjaGlsZCkgOiBbY2hpbGRdO1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE90aGVyIG9iamVjdCBoYXNoZXMuXG5cdCAqL1xuXHRcblx0c3RyYXRzLnByb3BzID0gc3RyYXRzLm1ldGhvZHMgPSBzdHJhdHMuY29tcHV0ZWQgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcblx0ICB2YXIgcmV0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuXHQgIGV4dGVuZChyZXQsIGNoaWxkVmFsKTtcblx0ICByZXR1cm4gcmV0O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERlZmF1bHQgc3RyYXRlZ3kuXG5cdCAqL1xuXHRcblx0dmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIGRlZmF1bHRTdHJhdChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWQgPyBwYXJlbnRWYWwgOiBjaGlsZFZhbDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBNYWtlIHN1cmUgY29tcG9uZW50IG9wdGlvbnMgZ2V0IGNvbnZlcnRlZCB0byBhY3R1YWxcblx0ICogY29uc3RydWN0b3JzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGd1YXJkQ29tcG9uZW50cyhvcHRpb25zKSB7XG5cdCAgaWYgKG9wdGlvbnMuY29tcG9uZW50cykge1xuXHQgICAgdmFyIGNvbXBvbmVudHMgPSBvcHRpb25zLmNvbXBvbmVudHMgPSBndWFyZEFycmF5QXNzZXRzKG9wdGlvbnMuY29tcG9uZW50cyk7XG5cdCAgICB2YXIgaWRzID0gT2JqZWN0LmtleXMoY29tcG9uZW50cyk7XG5cdCAgICB2YXIgZGVmO1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgdmFyIG1hcCA9IG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXAgPSB7fTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gaWRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIga2V5ID0gaWRzW2ldO1xuXHQgICAgICBpZiAoY29tbW9uVGFnUkUudGVzdChrZXkpIHx8IHJlc2VydmVkVGFnUkUudGVzdChrZXkpKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBrZXkpO1xuXHQgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIHJlY29yZCBhIGFsbCBsb3dlcmNhc2UgPC0+IGtlYmFiLWNhc2UgbWFwcGluZyBmb3Jcblx0ICAgICAgLy8gcG9zc2libGUgY3VzdG9tIGVsZW1lbnQgY2FzZSBlcnJvciB3YXJuaW5nXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgbWFwW2tleS5yZXBsYWNlKC8tL2csICcnKS50b0xvd2VyQ2FzZSgpXSA9IGh5cGhlbmF0ZShrZXkpO1xuXHQgICAgICB9XG5cdCAgICAgIGRlZiA9IGNvbXBvbmVudHNba2V5XTtcblx0ICAgICAgaWYgKGlzUGxhaW5PYmplY3QoZGVmKSkge1xuXHQgICAgICAgIGNvbXBvbmVudHNba2V5XSA9IFZ1ZS5leHRlbmQoZGVmKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEVuc3VyZSBhbGwgcHJvcHMgb3B0aW9uIHN5bnRheCBhcmUgbm9ybWFsaXplZCBpbnRvIHRoZVxuXHQgKiBPYmplY3QtYmFzZWQgZm9ybWF0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGd1YXJkUHJvcHMob3B0aW9ucykge1xuXHQgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG5cdCAgdmFyIGksIHZhbDtcblx0ICBpZiAoaXNBcnJheShwcm9wcykpIHtcblx0ICAgIG9wdGlvbnMucHJvcHMgPSB7fTtcblx0ICAgIGkgPSBwcm9wcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhbCA9IHByb3BzW2ldO1xuXHQgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBvcHRpb25zLnByb3BzW3ZhbF0gPSBudWxsO1xuXHQgICAgICB9IGVsc2UgaWYgKHZhbC5uYW1lKSB7XG5cdCAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWwubmFtZV0gPSB2YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QocHJvcHMpKSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFsID0gcHJvcHNba2V5c1tpXV07XG5cdCAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgcHJvcHNba2V5c1tpXV0gPSB7IHR5cGU6IHZhbCB9O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogR3VhcmQgYW4gQXJyYXktZm9ybWF0IGFzc2V0cyBvcHRpb24gYW5kIGNvbnZlcnRlZCBpdFxuXHQgKiBpbnRvIHRoZSBrZXktdmFsdWUgT2JqZWN0IGZvcm1hdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGFzc2V0c1xuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ3VhcmRBcnJheUFzc2V0cyhhc3NldHMpIHtcblx0ICBpZiAoaXNBcnJheShhc3NldHMpKSB7XG5cdCAgICB2YXIgcmVzID0ge307XG5cdCAgICB2YXIgaSA9IGFzc2V0cy5sZW5ndGg7XG5cdCAgICB2YXIgYXNzZXQ7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGFzc2V0ID0gYXNzZXRzW2ldO1xuXHQgICAgICB2YXIgaWQgPSB0eXBlb2YgYXNzZXQgPT09ICdmdW5jdGlvbicgPyBhc3NldC5vcHRpb25zICYmIGFzc2V0Lm9wdGlvbnMubmFtZSB8fCBhc3NldC5pZCA6IGFzc2V0Lm5hbWUgfHwgYXNzZXQuaWQ7XG5cdCAgICAgIGlmICghaWQpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0FycmF5LXN5bnRheCBhc3NldHMgbXVzdCBwcm92aWRlIGEgXCJuYW1lXCIgb3IgXCJpZFwiIGZpZWxkLicpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlc1tpZF0gPSBhc3NldDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlcztcblx0ICB9XG5cdCAgcmV0dXJuIGFzc2V0cztcblx0fVxuXHRcblx0LyoqXG5cdCAqIE1lcmdlIHR3byBvcHRpb24gb2JqZWN0cyBpbnRvIGEgbmV3IG9uZS5cblx0ICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHBhcmVudFxuXHQgKiBAcGFyYW0ge09iamVjdH0gY2hpbGRcblx0ICogQHBhcmFtIHtWdWV9IFt2bV0gLSBpZiB2bSBpcyBwcmVzZW50LCBpbmRpY2F0ZXMgdGhpcyBpc1xuXHQgKiAgICAgICAgICAgICAgICAgICAgIGFuIGluc3RhbnRpYXRpb24gbWVyZ2UuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQsIHZtKSB7XG5cdCAgZ3VhcmRDb21wb25lbnRzKGNoaWxkKTtcblx0ICBndWFyZFByb3BzKGNoaWxkKTtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgaWYgKGNoaWxkLnByb3BzRGF0YSAmJiAhdm0pIHtcblx0ICAgICAgd2FybigncHJvcHNEYXRhIGNhbiBvbmx5IGJlIHVzZWQgYXMgYW4gaW5zdGFudGlhdGlvbiBvcHRpb24uJyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBvcHRpb25zID0ge307XG5cdCAgdmFyIGtleTtcblx0ICBpZiAoY2hpbGRbJ2V4dGVuZHMnXSkge1xuXHQgICAgcGFyZW50ID0gdHlwZW9mIGNoaWxkWydleHRlbmRzJ10gPT09ICdmdW5jdGlvbicgPyBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLm9wdGlvbnMsIHZtKSA6IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10sIHZtKTtcblx0ICB9XG5cdCAgaWYgKGNoaWxkLm1peGlucykge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZC5taXhpbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBtaXhpbiA9IGNoaWxkLm1peGluc1tpXTtcblx0ICAgICAgdmFyIG1peGluT3B0aW9ucyA9IG1peGluLnByb3RvdHlwZSBpbnN0YW5jZW9mIFZ1ZSA/IG1peGluLm9wdGlvbnMgOiBtaXhpbjtcblx0ICAgICAgcGFyZW50ID0gbWVyZ2VPcHRpb25zKHBhcmVudCwgbWl4aW5PcHRpb25zLCB2bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZvciAoa2V5IGluIHBhcmVudCkge1xuXHQgICAgbWVyZ2VGaWVsZChrZXkpO1xuXHQgIH1cblx0ICBmb3IgKGtleSBpbiBjaGlsZCkge1xuXHQgICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7XG5cdCAgICAgIG1lcmdlRmllbGQoa2V5KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZnVuY3Rpb24gbWVyZ2VGaWVsZChrZXkpIHtcblx0ICAgIHZhciBzdHJhdCA9IHN0cmF0c1trZXldIHx8IGRlZmF1bHRTdHJhdDtcblx0ICAgIG9wdGlvbnNba2V5XSA9IHN0cmF0KHBhcmVudFtrZXldLCBjaGlsZFtrZXldLCB2bSwga2V5KTtcblx0ICB9XG5cdCAgcmV0dXJuIG9wdGlvbnM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXNvbHZlIGFuIGFzc2V0LlxuXHQgKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYmVjYXVzZSBjaGlsZCBpbnN0YW5jZXMgbmVlZCBhY2Nlc3Ncblx0ICogdG8gYXNzZXRzIGRlZmluZWQgaW4gaXRzIGFuY2VzdG9yIGNoYWluLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICogQHBhcmFtIHtCb29sZWFufSB3YXJuTWlzc2luZ1xuXHQgKiBAcmV0dXJuIHtPYmplY3R8RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsIHR5cGUsIGlkLCB3YXJuTWlzc2luZykge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBhc3NldHMgPSBvcHRpb25zW3R5cGVdO1xuXHQgIHZhciBjYW1lbGl6ZWRJZDtcblx0ICB2YXIgcmVzID0gYXNzZXRzW2lkXSB8fFxuXHQgIC8vIGNhbWVsQ2FzZSBJRFxuXHQgIGFzc2V0c1tjYW1lbGl6ZWRJZCA9IGNhbWVsaXplKGlkKV0gfHxcblx0ICAvLyBQYXNjYWwgQ2FzZSBJRFxuXHQgIGFzc2V0c1tjYW1lbGl6ZWRJZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsaXplZElkLnNsaWNlKDEpXTtcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuTWlzc2luZyAmJiAhcmVzKSB7XG5cdCAgICB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSAnICsgdHlwZS5zbGljZSgwLCAtMSkgKyAnOiAnICsgaWQsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHR2YXIgdWlkJDEgPSAwO1xuXHRcblx0LyoqXG5cdCAqIEEgZGVwIGlzIGFuIG9ic2VydmFibGUgdGhhdCBjYW4gaGF2ZSBtdWx0aXBsZVxuXHQgKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LlxuXHQgKlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICovXG5cdGZ1bmN0aW9uIERlcCgpIHtcblx0ICB0aGlzLmlkID0gdWlkJDErKztcblx0ICB0aGlzLnN1YnMgPSBbXTtcblx0fVxuXHRcblx0Ly8gdGhlIGN1cnJlbnQgdGFyZ2V0IHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkLlxuXHQvLyB0aGlzIGlzIGdsb2JhbGx5IHVuaXF1ZSBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG9ubHkgb25lXG5cdC8vIHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkIGF0IGFueSB0aW1lLlxuXHREZXAudGFyZ2V0ID0gbnVsbDtcblx0XG5cdC8qKlxuXHQgKiBBZGQgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cblx0ICpcblx0ICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUuYWRkU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuXHQgIHRoaXMuc3Vicy5wdXNoKHN1Yik7XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcblx0ICB0aGlzLnN1YnMuJHJlbW92ZShzdWIpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFkZCBzZWxmIGFzIGEgZGVwZW5kZW5jeSB0byB0aGUgdGFyZ2V0IHdhdGNoZXIuXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgRGVwLnRhcmdldC5hZGREZXAodGhpcyk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogTm90aWZ5IGFsbCBzdWJzY3JpYmVycyBvZiBhIG5ldyB2YWx1ZS5cblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uICgpIHtcblx0ICAvLyBzdGFibGl6ZSB0aGUgc3Vic2NyaWJlciBsaXN0IGZpcnN0XG5cdCAgdmFyIHN1YnMgPSB0b0FycmF5KHRoaXMuc3Vicyk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgc3Vic1tpXS51cGRhdGUoKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcblx0dmFyIGFycmF5TWV0aG9kcyA9IE9iamVjdC5jcmVhdGUoYXJyYXlQcm90bylcblx0XG5cdC8qKlxuXHQgKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHNcblx0ICovXG5cdFxuXHQ7WydwdXNoJywgJ3BvcCcsICdzaGlmdCcsICd1bnNoaWZ0JywgJ3NwbGljZScsICdzb3J0JywgJ3JldmVyc2UnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcblx0ICAvLyBjYWNoZSBvcmlnaW5hbCBtZXRob2Rcblx0ICB2YXIgb3JpZ2luYWwgPSBhcnJheVByb3RvW21ldGhvZF07XG5cdCAgZGVmKGFycmF5TWV0aG9kcywgbWV0aG9kLCBmdW5jdGlvbiBtdXRhdG9yKCkge1xuXHQgICAgLy8gYXZvaWQgbGVha2luZyBhcmd1bWVudHM6XG5cdCAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jbG9zdXJlLXdpdGgtYXJndW1lbnRzXG5cdCAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICB2YXIgYXJncyA9IG5ldyBBcnJheShpKTtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcblx0ICAgIH1cblx0ICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgIHZhciBvYiA9IHRoaXMuX19vYl9fO1xuXHQgICAgdmFyIGluc2VydGVkO1xuXHQgICAgc3dpdGNoIChtZXRob2QpIHtcblx0ICAgICAgY2FzZSAncHVzaCc6XG5cdCAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICd1bnNoaWZ0Jzpcblx0ICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ3NwbGljZSc6XG5cdCAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzLnNsaWNlKDIpO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgaWYgKGluc2VydGVkKSBvYi5vYnNlcnZlQXJyYXkoaW5zZXJ0ZWQpO1xuXHQgICAgLy8gbm90aWZ5IGNoYW5nZVxuXHQgICAgb2IuZGVwLm5vdGlmeSgpO1xuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9KTtcblx0fSk7XG5cdFxuXHQvKipcblx0ICogU3dhcCB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXggd2l0aCBhIG5ldyB2YWx1ZVxuXHQgKiBhbmQgZW1pdHMgY29ycmVzcG9uZGluZyBldmVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqIEByZXR1cm4geyp9IC0gcmVwbGFjZWQgZWxlbWVudFxuXHQgKi9cblx0XG5cdGRlZihhcnJheVByb3RvLCAnJHNldCcsIGZ1bmN0aW9uICRzZXQoaW5kZXgsIHZhbCkge1xuXHQgIGlmIChpbmRleCA+PSB0aGlzLmxlbmd0aCkge1xuXHQgICAgdGhpcy5sZW5ndGggPSBOdW1iZXIoaW5kZXgpICsgMTtcblx0ICB9XG5cdCAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxLCB2YWwpWzBdO1xuXHR9KTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZW5pZW5jZSBtZXRob2QgdG8gcmVtb3ZlIHRoZSBlbGVtZW50IGF0IGdpdmVuIGluZGV4IG9yIHRhcmdldCBlbGVtZW50IHJlZmVyZW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBpdGVtXG5cdCAqL1xuXHRcblx0ZGVmKGFycmF5UHJvdG8sICckcmVtb3ZlJywgZnVuY3Rpb24gJHJlbW92ZShpdGVtKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuO1xuXHQgIHZhciBpbmRleCA9IGluZGV4T2YodGhpcywgaXRlbSk7XG5cdCAgaWYgKGluZGV4ID4gLTEpIHtcblx0ICAgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSk7XG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciBhcnJheUtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcnJheU1ldGhvZHMpO1xuXHRcblx0LyoqXG5cdCAqIEJ5IGRlZmF1bHQsIHdoZW4gYSByZWFjdGl2ZSBwcm9wZXJ0eSBpcyBzZXQsIHRoZSBuZXcgdmFsdWUgaXNcblx0ICogYWxzbyBjb252ZXJ0ZWQgdG8gYmVjb21lIHJlYWN0aXZlLiBIb3dldmVyIGluIGNlcnRhaW4gY2FzZXMsIGUuZy5cblx0ICogdi1mb3Igc2NvcGUgYWxpYXMgYW5kIHByb3BzLCB3ZSBkb24ndCB3YW50IHRvIGZvcmNlIGNvbnZlcnNpb25cblx0ICogYmVjYXVzZSB0aGUgdmFsdWUgbWF5IGJlIGEgbmVzdGVkIHZhbHVlIHVuZGVyIGEgZnJvemVuIGRhdGEgc3RydWN0dXJlLlxuXHQgKlxuXHQgKiBTbyB3aGVuZXZlciB3ZSB3YW50IHRvIHNldCBhIHJlYWN0aXZlIHByb3BlcnR5IHdpdGhvdXQgZm9yY2luZ1xuXHQgKiBjb252ZXJzaW9uIG9uIHRoZSBuZXcgdmFsdWUsIHdlIHdyYXAgdGhhdCBjYWxsIGluc2lkZSB0aGlzIGZ1bmN0aW9uLlxuXHQgKi9cblx0XG5cdHZhciBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcblx0XG5cdGZ1bmN0aW9uIHdpdGhvdXRDb252ZXJzaW9uKGZuKSB7XG5cdCAgc2hvdWxkQ29udmVydCA9IGZhbHNlO1xuXHQgIGZuKCk7XG5cdCAgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBPYnNlcnZlciBjbGFzcyB0aGF0IGFyZSBhdHRhY2hlZCB0byBlYWNoIG9ic2VydmVkXG5cdCAqIG9iamVjdC4gT25jZSBhdHRhY2hlZCwgdGhlIG9ic2VydmVyIGNvbnZlcnRzIHRhcmdldFxuXHQgKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuXHQgKiBjb2xsZWN0IGRlcGVuZGVuY2llcyBhbmQgZGlzcGF0Y2hlcyB1cGRhdGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdmFsdWVcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gT2JzZXJ2ZXIodmFsdWUpIHtcblx0ICB0aGlzLnZhbHVlID0gdmFsdWU7XG5cdCAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7XG5cdCAgZGVmKHZhbHVlLCAnX19vYl9fJywgdGhpcyk7XG5cdCAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICB2YXIgYXVnbWVudCA9IGhhc1Byb3RvID8gcHJvdG9BdWdtZW50IDogY29weUF1Z21lbnQ7XG5cdCAgICBhdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMsIGFycmF5S2V5cyk7XG5cdCAgICB0aGlzLm9ic2VydmVBcnJheSh2YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMud2Fsayh2YWx1ZSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBJbnN0YW5jZSBtZXRob2RzXG5cdFxuXHQvKipcblx0ICogV2FsayB0aHJvdWdoIGVhY2ggcHJvcGVydHkgYW5kIGNvbnZlcnQgdGhlbSBpbnRvXG5cdCAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuXHQgKiB2YWx1ZSB0eXBlIGlzIE9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gKG9iaikge1xuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB0aGlzLmNvbnZlcnQoa2V5c1tpXSwgb2JqW2tleXNbaV1dKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogT2JzZXJ2ZSBhIGxpc3Qgb2YgQXJyYXkgaXRlbXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGl0ZW1zXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmVBcnJheSA9IGZ1bmN0aW9uIChpdGVtcykge1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gaXRlbXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBvYnNlcnZlKGl0ZW1zW2ldKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhIHByb3BlcnR5IGludG8gZ2V0dGVyL3NldHRlciBzbyB3ZSBjYW4gZW1pdFxuXHQgKiB0aGUgZXZlbnRzIHdoZW4gdGhlIHByb3BlcnR5IGlzIGFjY2Vzc2VkL2NoYW5nZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUuY29udmVydCA9IGZ1bmN0aW9uIChrZXksIHZhbCkge1xuXHQgIGRlZmluZVJlYWN0aXZlKHRoaXMudmFsdWUsIGtleSwgdmFsKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBZGQgYW4gb3duZXIgdm0sIHNvIHRoYXQgd2hlbiAkc2V0LyRkZWxldGUgbXV0YXRpb25zXG5cdCAqIGhhcHBlbiB3ZSBjYW4gbm90aWZ5IG93bmVyIHZtcyB0byBwcm94eSB0aGUga2V5cyBhbmRcblx0ICogZGlnZXN0IHRoZSB3YXRjaGVycy4gVGhpcyBpcyBvbmx5IGNhbGxlZCB3aGVuIHRoZSBvYmplY3Rcblx0ICogaXMgb2JzZXJ2ZWQgYXMgYW4gaW5zdGFuY2UncyByb290ICRkYXRhLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUuYWRkVm0gPSBmdW5jdGlvbiAodm0pIHtcblx0ICAodGhpcy52bXMgfHwgKHRoaXMudm1zID0gW10pKS5wdXNoKHZtKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgYW4gb3duZXIgdm0uIFRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIG9iamVjdCBpc1xuXHQgKiBzd2FwcGVkIG91dCBhcyBhbiBpbnN0YW5jZSdzICRkYXRhIG9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLnJlbW92ZVZtID0gZnVuY3Rpb24gKHZtKSB7XG5cdCAgdGhpcy52bXMuJHJlbW92ZSh2bSk7XG5cdH07XG5cdFxuXHQvLyBoZWxwZXJzXG5cdFxuXHQvKipcblx0ICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZ1xuXHQgKiB0aGUgcHJvdG90eXBlIGNoYWluIHVzaW5nIF9fcHJvdG9fX1xuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzcmNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm90b0F1Z21lbnQodGFyZ2V0LCBzcmMpIHtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuXHQgIHRhcmdldC5fX3Byb3RvX18gPSBzcmM7XG5cdCAgLyogZXNsaW50LWVuYWJsZSBuby1wcm90byAqL1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGRlZmluaW5nXG5cdCAqIGhpZGRlbiBwcm9wZXJ0aWVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvcHlBdWdtZW50KHRhcmdldCwgc3JjLCBrZXlzKSB7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdmFyIGtleSA9IGtleXNbaV07XG5cdCAgICBkZWYodGFyZ2V0LCBrZXksIHNyY1trZXldKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcblx0ICogcmV0dXJucyB0aGUgbmV3IG9ic2VydmVyIGlmIHN1Y2Nlc3NmdWxseSBvYnNlcnZlZCxcblx0ICogb3IgdGhlIGV4aXN0aW5nIG9ic2VydmVyIGlmIHRoZSB2YWx1ZSBhbHJlYWR5IGhhcyBvbmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICogQHJldHVybiB7T2JzZXJ2ZXJ8dW5kZWZpbmVkfVxuXHQgKiBAc3RhdGljXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb2JzZXJ2ZSh2YWx1ZSwgdm0pIHtcblx0ICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIG9iO1xuXHQgIGlmIChoYXNPd24odmFsdWUsICdfX29iX18nKSAmJiB2YWx1ZS5fX29iX18gaW5zdGFuY2VvZiBPYnNlcnZlcikge1xuXHQgICAgb2IgPSB2YWx1ZS5fX29iX187XG5cdCAgfSBlbHNlIGlmIChzaG91bGRDb252ZXJ0ICYmIChpc0FycmF5KHZhbHVlKSB8fCBpc1BsYWluT2JqZWN0KHZhbHVlKSkgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkgJiYgIXZhbHVlLl9pc1Z1ZSkge1xuXHQgICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpO1xuXHQgIH1cblx0ICBpZiAob2IgJiYgdm0pIHtcblx0ICAgIG9iLmFkZFZtKHZtKTtcblx0ICB9XG5cdCAgcmV0dXJuIG9iO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZWZpbmVSZWFjdGl2ZShvYmosIGtleSwgdmFsKSB7XG5cdCAgdmFyIGRlcCA9IG5ldyBEZXAoKTtcblx0XG5cdCAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG5cdCAgaWYgKHByb3BlcnR5ICYmIHByb3BlcnR5LmNvbmZpZ3VyYWJsZSA9PT0gZmFsc2UpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdFxuXHQgIC8vIGNhdGVyIGZvciBwcmUtZGVmaW5lZCBnZXR0ZXIvc2V0dGVyc1xuXHQgIHZhciBnZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5nZXQ7XG5cdCAgdmFyIHNldHRlciA9IHByb3BlcnR5ICYmIHByb3BlcnR5LnNldDtcblx0XG5cdCAgdmFyIGNoaWxkT2IgPSBvYnNlcnZlKHZhbCk7XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwga2V5LCB7XG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlLFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiByZWFjdGl2ZUdldHRlcigpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcblx0ICAgICAgaWYgKERlcC50YXJnZXQpIHtcblx0ICAgICAgICBkZXAuZGVwZW5kKCk7XG5cdCAgICAgICAgaWYgKGNoaWxkT2IpIHtcblx0ICAgICAgICAgIGNoaWxkT2IuZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgICAgIGZvciAodmFyIGUsIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgICAgIGUgPSB2YWx1ZVtpXTtcblx0ICAgICAgICAgICAgZSAmJiBlLl9fb2JfXyAmJiBlLl9fb2JfXy5kZXAuZGVwZW5kKCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlU2V0dGVyKG5ld1ZhbCkge1xuXHQgICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuXHQgICAgICBpZiAobmV3VmFsID09PSB2YWx1ZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoc2V0dGVyKSB7XG5cdCAgICAgICAgc2V0dGVyLmNhbGwob2JqLCBuZXdWYWwpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhbCA9IG5ld1ZhbDtcblx0ICAgICAgfVxuXHQgICAgICBjaGlsZE9iID0gb2JzZXJ2ZShuZXdWYWwpO1xuXHQgICAgICBkZXAubm90aWZ5KCk7XG5cdCAgICB9XG5cdCAgfSk7XG5cdH1cblx0XG5cdFxuXHRcblx0dmFyIHV0aWwgPSBPYmplY3QuZnJlZXplKHtcblx0XHRkZWZpbmVSZWFjdGl2ZTogZGVmaW5lUmVhY3RpdmUsXG5cdFx0c2V0OiBzZXQsXG5cdFx0ZGVsOiBkZWwsXG5cdFx0aGFzT3duOiBoYXNPd24sXG5cdFx0aXNMaXRlcmFsOiBpc0xpdGVyYWwsXG5cdFx0aXNSZXNlcnZlZDogaXNSZXNlcnZlZCxcblx0XHRfdG9TdHJpbmc6IF90b1N0cmluZyxcblx0XHR0b051bWJlcjogdG9OdW1iZXIsXG5cdFx0dG9Cb29sZWFuOiB0b0Jvb2xlYW4sXG5cdFx0c3RyaXBRdW90ZXM6IHN0cmlwUXVvdGVzLFxuXHRcdGNhbWVsaXplOiBjYW1lbGl6ZSxcblx0XHRoeXBoZW5hdGU6IGh5cGhlbmF0ZSxcblx0XHRjbGFzc2lmeTogY2xhc3NpZnksXG5cdFx0YmluZDogYmluZCxcblx0XHR0b0FycmF5OiB0b0FycmF5LFxuXHRcdGV4dGVuZDogZXh0ZW5kLFxuXHRcdGlzT2JqZWN0OiBpc09iamVjdCxcblx0XHRpc1BsYWluT2JqZWN0OiBpc1BsYWluT2JqZWN0LFxuXHRcdGRlZjogZGVmLFxuXHRcdGRlYm91bmNlOiBfZGVib3VuY2UsXG5cdFx0aW5kZXhPZjogaW5kZXhPZixcblx0XHRjYW5jZWxsYWJsZTogY2FuY2VsbGFibGUsXG5cdFx0bG9vc2VFcXVhbDogbG9vc2VFcXVhbCxcblx0XHRpc0FycmF5OiBpc0FycmF5LFxuXHRcdGhhc1Byb3RvOiBoYXNQcm90byxcblx0XHRpbkJyb3dzZXI6IGluQnJvd3Nlcixcblx0XHRkZXZ0b29sczogZGV2dG9vbHMsXG5cdFx0aXNJRTogaXNJRSxcblx0XHRpc0lFOTogaXNJRTksXG5cdFx0aXNBbmRyb2lkOiBpc0FuZHJvaWQsXG5cdFx0aXNJb3M6IGlzSW9zLFxuXHRcdGlvc1ZlcnNpb25NYXRjaDogaW9zVmVyc2lvbk1hdGNoLFxuXHRcdGlvc1ZlcnNpb246IGlvc1ZlcnNpb24sXG5cdFx0aGFzTXV0YXRpb25PYnNlcnZlckJ1ZzogaGFzTXV0YXRpb25PYnNlcnZlckJ1Zyxcblx0XHRnZXQgdHJhbnNpdGlvblByb3AgKCkgeyByZXR1cm4gdHJhbnNpdGlvblByb3A7IH0sXG5cdFx0Z2V0IHRyYW5zaXRpb25FbmRFdmVudCAoKSB7IHJldHVybiB0cmFuc2l0aW9uRW5kRXZlbnQ7IH0sXG5cdFx0Z2V0IGFuaW1hdGlvblByb3AgKCkgeyByZXR1cm4gYW5pbWF0aW9uUHJvcDsgfSxcblx0XHRnZXQgYW5pbWF0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gYW5pbWF0aW9uRW5kRXZlbnQ7IH0sXG5cdFx0bmV4dFRpY2s6IG5leHRUaWNrLFxuXHRcdGdldCBfU2V0ICgpIHsgcmV0dXJuIF9TZXQ7IH0sXG5cdFx0cXVlcnk6IHF1ZXJ5LFxuXHRcdGluRG9jOiBpbkRvYyxcblx0XHRnZXRBdHRyOiBnZXRBdHRyLFxuXHRcdGdldEJpbmRBdHRyOiBnZXRCaW5kQXR0cixcblx0XHRoYXNCaW5kQXR0cjogaGFzQmluZEF0dHIsXG5cdFx0YmVmb3JlOiBiZWZvcmUsXG5cdFx0YWZ0ZXI6IGFmdGVyLFxuXHRcdHJlbW92ZTogcmVtb3ZlLFxuXHRcdHByZXBlbmQ6IHByZXBlbmQsXG5cdFx0cmVwbGFjZTogcmVwbGFjZSxcblx0XHRvbjogb24sXG5cdFx0b2ZmOiBvZmYsXG5cdFx0c2V0Q2xhc3M6IHNldENsYXNzLFxuXHRcdGFkZENsYXNzOiBhZGRDbGFzcyxcblx0XHRyZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXG5cdFx0ZXh0cmFjdENvbnRlbnQ6IGV4dHJhY3RDb250ZW50LFxuXHRcdHRyaW1Ob2RlOiB0cmltTm9kZSxcblx0XHRpc1RlbXBsYXRlOiBpc1RlbXBsYXRlLFxuXHRcdGNyZWF0ZUFuY2hvcjogY3JlYXRlQW5jaG9yLFxuXHRcdGZpbmRSZWY6IGZpbmRSZWYsXG5cdFx0bWFwTm9kZVJhbmdlOiBtYXBOb2RlUmFuZ2UsXG5cdFx0cmVtb3ZlTm9kZVJhbmdlOiByZW1vdmVOb2RlUmFuZ2UsXG5cdFx0aXNGcmFnbWVudDogaXNGcmFnbWVudCxcblx0XHRnZXRPdXRlckhUTUw6IGdldE91dGVySFRNTCxcblx0XHRtZXJnZU9wdGlvbnM6IG1lcmdlT3B0aW9ucyxcblx0XHRyZXNvbHZlQXNzZXQ6IHJlc29sdmVBc3NldCxcblx0XHRjaGVja0NvbXBvbmVudEF0dHI6IGNoZWNrQ29tcG9uZW50QXR0cixcblx0XHRjb21tb25UYWdSRTogY29tbW9uVGFnUkUsXG5cdFx0cmVzZXJ2ZWRUYWdSRTogcmVzZXJ2ZWRUYWdSRSxcblx0XHRnZXQgd2FybiAoKSB7IHJldHVybiB3YXJuOyB9XG5cdH0pO1xuXHRcblx0dmFyIHVpZCA9IDA7XG5cdFxuXHRmdW5jdGlvbiBpbml0TWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFRoZSBtYWluIGluaXQgc2VxdWVuY2UuIFRoaXMgaXMgY2FsbGVkIGZvciBldmVyeVxuXHQgICAqIGluc3RhbmNlLCBpbmNsdWRpbmcgb25lcyB0aGF0IGFyZSBjcmVhdGVkIGZyb20gZXh0ZW5kZWRcblx0ICAgKiBjb25zdHJ1Y3RvcnMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIHRoaXMgb3B0aW9ucyBvYmplY3Qgc2hvdWxkIGJlXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgcmVzdWx0IG9mIG1lcmdpbmcgY2xhc3Ncblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMgYW5kIHRoZSBvcHRpb25zIHBhc3NlZFxuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdG8gdGhlIGNvbnN0cnVjdG9yLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblx0ICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHRcblx0ICAgIHRoaXMuJGVsID0gbnVsbDtcblx0ICAgIHRoaXMuJHBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuXHQgICAgdGhpcy4kcm9vdCA9IHRoaXMuJHBhcmVudCA/IHRoaXMuJHBhcmVudC4kcm9vdCA6IHRoaXM7XG5cdCAgICB0aGlzLiRjaGlsZHJlbiA9IFtdO1xuXHQgICAgdGhpcy4kcmVmcyA9IHt9OyAvLyBjaGlsZCB2bSByZWZlcmVuY2VzXG5cdCAgICB0aGlzLiRlbHMgPSB7fTsgLy8gZWxlbWVudCByZWZlcmVuY2VzXG5cdCAgICB0aGlzLl93YXRjaGVycyA9IFtdOyAvLyBhbGwgd2F0Y2hlcnMgYXMgYW4gYXJyYXlcblx0ICAgIHRoaXMuX2RpcmVjdGl2ZXMgPSBbXTsgLy8gYWxsIGRpcmVjdGl2ZXNcblx0XG5cdCAgICAvLyBhIHVpZFxuXHQgICAgdGhpcy5fdWlkID0gdWlkKys7XG5cdFxuXHQgICAgLy8gYSBmbGFnIHRvIGF2b2lkIHRoaXMgYmVpbmcgb2JzZXJ2ZWRcblx0ICAgIHRoaXMuX2lzVnVlID0gdHJ1ZTtcblx0XG5cdCAgICAvLyBldmVudHMgYm9va2tlZXBpbmdcblx0ICAgIHRoaXMuX2V2ZW50cyA9IHt9OyAvLyByZWdpc3RlcmVkIGNhbGxiYWNrc1xuXHQgICAgdGhpcy5fZXZlbnRzQ291bnQgPSB7fTsgLy8gZm9yICRicm9hZGNhc3Qgb3B0aW1pemF0aW9uXG5cdFxuXHQgICAgLy8gZnJhZ21lbnQgaW5zdGFuY2UgcHJvcGVydGllc1xuXHQgICAgdGhpcy5faXNGcmFnbWVudCA9IGZhbHNlO1xuXHQgICAgdGhpcy5fZnJhZ21lbnQgPSAvLyBAdHlwZSB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQgPSAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxuXHQgICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBudWxsOyAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxuXHRcblx0ICAgIC8vIGxpZmVjeWNsZSBzdGF0ZVxuXHQgICAgdGhpcy5faXNDb21waWxlZCA9IHRoaXMuX2lzRGVzdHJveWVkID0gdGhpcy5faXNSZWFkeSA9IHRoaXMuX2lzQXR0YWNoZWQgPSB0aGlzLl9pc0JlaW5nRGVzdHJveWVkID0gdGhpcy5fdkZvclJlbW92aW5nID0gZmFsc2U7XG5cdCAgICB0aGlzLl91bmxpbmtGbiA9IG51bGw7XG5cdFxuXHQgICAgLy8gY29udGV4dDpcblx0ICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcblx0ICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuXHQgICAgLy8gYW5kIGl0cyBob3N0LlxuXHQgICAgdGhpcy5fY29udGV4dCA9IG9wdGlvbnMuX2NvbnRleHQgfHwgdGhpcy4kcGFyZW50O1xuXHRcblx0ICAgIC8vIHNjb3BlOlxuXHQgICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcblx0ICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG5cdCAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuXHQgICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuXHQgICAgdGhpcy5fc2NvcGUgPSBvcHRpb25zLl9zY29wZTtcblx0XG5cdCAgICAvLyBmcmFnbWVudDpcblx0ICAgIC8vIGlmIHRoaXMgaW5zdGFuY2UgaXMgY29tcGlsZWQgaW5zaWRlIGEgRnJhZ21lbnQsIGl0XG5cdCAgICAvLyBuZWVkcyB0byByZWlnc3RlciBpdHNlbGYgYXMgYSBjaGlsZCBvZiB0aGF0IGZyYWdtZW50XG5cdCAgICAvLyBmb3IgYXR0YWNoL2RldGFjaCB0byB3b3JrIHByb3Blcmx5LlxuXHQgICAgdGhpcy5fZnJhZyA9IG9wdGlvbnMuX2ZyYWc7XG5cdCAgICBpZiAodGhpcy5fZnJhZykge1xuXHQgICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLnB1c2godGhpcyk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gcHVzaCBzZWxmIGludG8gcGFyZW50IC8gdHJhbnNjbHVzaW9uIGhvc3Rcblx0ICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcblx0ICAgICAgdGhpcy4kcGFyZW50LiRjaGlsZHJlbi5wdXNoKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIG1lcmdlIG9wdGlvbnMuXG5cdCAgICBvcHRpb25zID0gdGhpcy4kb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnMsIG9wdGlvbnMsIHRoaXMpO1xuXHRcblx0ICAgIC8vIHNldCByZWZcblx0ICAgIHRoaXMuX3VwZGF0ZVJlZigpO1xuXHRcblx0ICAgIC8vIGluaXRpYWxpemUgZGF0YSBhcyBlbXB0eSBvYmplY3QuXG5cdCAgICAvLyBpdCB3aWxsIGJlIGZpbGxlZCB1cCBpbiBfaW5pdERhdGEoKS5cblx0ICAgIHRoaXMuX2RhdGEgPSB7fTtcblx0XG5cdCAgICAvLyBjYWxsIGluaXQgaG9va1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2luaXQnKTtcblx0XG5cdCAgICAvLyBpbml0aWFsaXplIGRhdGEgb2JzZXJ2YXRpb24gYW5kIHNjb3BlIGluaGVyaXRhbmNlLlxuXHQgICAgdGhpcy5faW5pdFN0YXRlKCk7XG5cdFxuXHQgICAgLy8gc2V0dXAgZXZlbnQgc3lzdGVtIGFuZCBvcHRpb24gZXZlbnRzLlxuXHQgICAgdGhpcy5faW5pdEV2ZW50cygpO1xuXHRcblx0ICAgIC8vIGNhbGwgY3JlYXRlZCBob29rXG5cdCAgICB0aGlzLl9jYWxsSG9vaygnY3JlYXRlZCcpO1xuXHRcblx0ICAgIC8vIGlmIGBlbGAgb3B0aW9uIGlzIHBhc3NlZCwgc3RhcnQgY29tcGlsYXRpb24uXG5cdCAgICBpZiAob3B0aW9ucy5lbCkge1xuXHQgICAgICB0aGlzLiRtb3VudChvcHRpb25zLmVsKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgcGF0aENhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHRcblx0Ly8gYWN0aW9uc1xuXHR2YXIgQVBQRU5EID0gMDtcblx0dmFyIFBVU0ggPSAxO1xuXHR2YXIgSU5DX1NVQl9QQVRIX0RFUFRIID0gMjtcblx0dmFyIFBVU0hfU1VCX1BBVEggPSAzO1xuXHRcblx0Ly8gc3RhdGVzXG5cdHZhciBCRUZPUkVfUEFUSCA9IDA7XG5cdHZhciBJTl9QQVRIID0gMTtcblx0dmFyIEJFRk9SRV9JREVOVCA9IDI7XG5cdHZhciBJTl9JREVOVCA9IDM7XG5cdHZhciBJTl9TVUJfUEFUSCA9IDQ7XG5cdHZhciBJTl9TSU5HTEVfUVVPVEUgPSA1O1xuXHR2YXIgSU5fRE9VQkxFX1FVT1RFID0gNjtcblx0dmFyIEFGVEVSX1BBVEggPSA3O1xuXHR2YXIgRVJST1IgPSA4O1xuXHRcblx0dmFyIHBhdGhTdGF0ZU1hY2hpbmUgPSBbXTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX1BBVEhdID0ge1xuXHQgICd3cyc6IFtCRUZPUkVfUEFUSF0sXG5cdCAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICdbJzogW0lOX1NVQl9QQVRIXSxcblx0ICAnZW9mJzogW0FGVEVSX1BBVEhdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX1BBVEhdID0ge1xuXHQgICd3cyc6IFtJTl9QQVRIXSxcblx0ICAnLic6IFtCRUZPUkVfSURFTlRdLFxuXHQgICdbJzogW0lOX1NVQl9QQVRIXSxcblx0ICAnZW9mJzogW0FGVEVSX1BBVEhdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9JREVOVF0gPSB7XG5cdCAgJ3dzJzogW0JFRk9SRV9JREVOVF0sXG5cdCAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX0lERU5UXSA9IHtcblx0ICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJzAnOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJ251bWJlcic6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnd3MnOiBbSU5fUEFUSCwgUFVTSF0sXG5cdCAgJy4nOiBbQkVGT1JFX0lERU5ULCBQVVNIXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSCwgUFVTSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRILCBQVVNIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7XG5cdCAgXCInXCI6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF0sXG5cdCAgJ1wiJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSCwgSU5DX1NVQl9QQVRIX0RFUFRIXSxcblx0ICAnXSc6IFtJTl9QQVRILCBQVVNIX1NVQl9QQVRIXSxcblx0ICAnZW9mJzogRVJST1IsXG5cdCAgJ2Vsc2UnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fU0lOR0xFX1FVT1RFXSA9IHtcblx0ICBcIidcIjogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuXHQgICdlb2YnOiBFUlJPUixcblx0ICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fRE9VQkxFX1FVT1RFXSA9IHtcblx0ICAnXCInOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG5cdCAgJ2VvZic6IEVSUk9SLFxuXHQgICdlbHNlJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERldGVybWluZSB0aGUgdHlwZSBvZiBhIGNoYXJhY3RlciBpbiBhIGtleXBhdGguXG5cdCAqXG5cdCAqIEBwYXJhbSB7Q2hhcn0gY2hcblx0ICogQHJldHVybiB7U3RyaW5nfSB0eXBlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0UGF0aENoYXJUeXBlKGNoKSB7XG5cdCAgaWYgKGNoID09PSB1bmRlZmluZWQpIHtcblx0ICAgIHJldHVybiAnZW9mJztcblx0ICB9XG5cdFxuXHQgIHZhciBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcblx0XG5cdCAgc3dpdGNoIChjb2RlKSB7XG5cdCAgICBjYXNlIDB4NUI6IC8vIFtcblx0ICAgIGNhc2UgMHg1RDogLy8gXVxuXHQgICAgY2FzZSAweDJFOiAvLyAuXG5cdCAgICBjYXNlIDB4MjI6IC8vIFwiXG5cdCAgICBjYXNlIDB4Mjc6IC8vICdcblx0ICAgIGNhc2UgMHgzMDpcblx0ICAgICAgLy8gMFxuXHQgICAgICByZXR1cm4gY2g7XG5cdFxuXHQgICAgY2FzZSAweDVGOiAvLyBfXG5cdCAgICBjYXNlIDB4MjQ6XG5cdCAgICAgIC8vICRcblx0ICAgICAgcmV0dXJuICdpZGVudCc7XG5cdFxuXHQgICAgY2FzZSAweDIwOiAvLyBTcGFjZVxuXHQgICAgY2FzZSAweDA5OiAvLyBUYWJcblx0ICAgIGNhc2UgMHgwQTogLy8gTmV3bGluZVxuXHQgICAgY2FzZSAweDBEOiAvLyBSZXR1cm5cblx0ICAgIGNhc2UgMHhBMDogLy8gTm8tYnJlYWsgc3BhY2Vcblx0ICAgIGNhc2UgMHhGRUZGOiAvLyBCeXRlIE9yZGVyIE1hcmtcblx0ICAgIGNhc2UgMHgyMDI4OiAvLyBMaW5lIFNlcGFyYXRvclxuXHQgICAgY2FzZSAweDIwMjk6XG5cdCAgICAgIC8vIFBhcmFncmFwaCBTZXBhcmF0b3Jcblx0ICAgICAgcmV0dXJuICd3cyc7XG5cdCAgfVxuXHRcblx0ICAvLyBhLXosIEEtWlxuXHQgIGlmIChjb2RlID49IDB4NjEgJiYgY29kZSA8PSAweDdBIHx8IGNvZGUgPj0gMHg0MSAmJiBjb2RlIDw9IDB4NUEpIHtcblx0ICAgIHJldHVybiAnaWRlbnQnO1xuXHQgIH1cblx0XG5cdCAgLy8gMS05XG5cdCAgaWYgKGNvZGUgPj0gMHgzMSAmJiBjb2RlIDw9IDB4MzkpIHtcblx0ICAgIHJldHVybiAnbnVtYmVyJztcblx0ICB9XG5cdFxuXHQgIHJldHVybiAnZWxzZSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgYSBzdWJQYXRoLCByZXR1cm4gaXRzIHBsYWluIGZvcm0gaWYgaXQgaXNcblx0ICogYSBsaXRlcmFsIHN0cmluZyBvciBudW1iZXIuIE90aGVyd2lzZSBwcmVwZW5kIHRoZVxuXHQgKiBkeW5hbWljIGluZGljYXRvciAoKikuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmb3JtYXRTdWJQYXRoKHBhdGgpIHtcblx0ICB2YXIgdHJpbW1lZCA9IHBhdGgudHJpbSgpO1xuXHQgIC8vIGludmFsaWQgbGVhZGluZyAwXG5cdCAgaWYgKHBhdGguY2hhckF0KDApID09PSAnMCcgJiYgaXNOYU4ocGF0aCkpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgcmV0dXJuIGlzTGl0ZXJhbCh0cmltbWVkKSA/IHN0cmlwUXVvdGVzKHRyaW1tZWQpIDogJyonICsgdHJpbW1lZDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhcnNlIGEgc3RyaW5nIHBhdGggaW50byBhbiBhcnJheSBvZiBzZWdtZW50c1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2UocGF0aCkge1xuXHQgIHZhciBrZXlzID0gW107XG5cdCAgdmFyIGluZGV4ID0gLTE7XG5cdCAgdmFyIG1vZGUgPSBCRUZPUkVfUEFUSDtcblx0ICB2YXIgc3ViUGF0aERlcHRoID0gMDtcblx0ICB2YXIgYywgbmV3Q2hhciwga2V5LCB0eXBlLCB0cmFuc2l0aW9uLCBhY3Rpb24sIHR5cGVNYXA7XG5cdFxuXHQgIHZhciBhY3Rpb25zID0gW107XG5cdFxuXHQgIGFjdGlvbnNbUFVTSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoa2V5ICE9PSB1bmRlZmluZWQpIHtcblx0ICAgICAga2V5cy5wdXNoKGtleSk7XG5cdCAgICAgIGtleSA9IHVuZGVmaW5lZDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBhY3Rpb25zW0FQUEVORF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAga2V5ID0gbmV3Q2hhcjtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGtleSArPSBuZXdDaGFyO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGFjdGlvbnNbSU5DX1NVQl9QQVRIX0RFUFRIXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuXHQgICAgc3ViUGF0aERlcHRoKys7XG5cdCAgfTtcblx0XG5cdCAgYWN0aW9uc1tQVVNIX1NVQl9QQVRIXSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChzdWJQYXRoRGVwdGggPiAwKSB7XG5cdCAgICAgIHN1YlBhdGhEZXB0aC0tO1xuXHQgICAgICBtb2RlID0gSU5fU1VCX1BBVEg7XG5cdCAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgc3ViUGF0aERlcHRoID0gMDtcblx0ICAgICAga2V5ID0gZm9ybWF0U3ViUGF0aChrZXkpO1xuXHQgICAgICBpZiAoa2V5ID09PSBmYWxzZSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBhY3Rpb25zW1BVU0hdKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBtYXliZVVuZXNjYXBlUXVvdGUoKSB7XG5cdCAgICB2YXIgbmV4dENoYXIgPSBwYXRoW2luZGV4ICsgMV07XG5cdCAgICBpZiAobW9kZSA9PT0gSU5fU0lOR0xFX1FVT1RFICYmIG5leHRDaGFyID09PSBcIidcIiB8fCBtb2RlID09PSBJTl9ET1VCTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09ICdcIicpIHtcblx0ICAgICAgaW5kZXgrKztcblx0ICAgICAgbmV3Q2hhciA9ICdcXFxcJyArIG5leHRDaGFyO1xuXHQgICAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB3aGlsZSAobW9kZSAhPSBudWxsKSB7XG5cdCAgICBpbmRleCsrO1xuXHQgICAgYyA9IHBhdGhbaW5kZXhdO1xuXHRcblx0ICAgIGlmIChjID09PSAnXFxcXCcgJiYgbWF5YmVVbmVzY2FwZVF1b3RlKCkpIHtcblx0ICAgICAgY29udGludWU7XG5cdCAgICB9XG5cdFxuXHQgICAgdHlwZSA9IGdldFBhdGhDaGFyVHlwZShjKTtcblx0ICAgIHR5cGVNYXAgPSBwYXRoU3RhdGVNYWNoaW5lW21vZGVdO1xuXHQgICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFsnZWxzZSddIHx8IEVSUk9SO1xuXHRcblx0ICAgIGlmICh0cmFuc2l0aW9uID09PSBFUlJPUikge1xuXHQgICAgICByZXR1cm47IC8vIHBhcnNlIGVycm9yXG5cdCAgICB9XG5cdFxuXHQgICAgbW9kZSA9IHRyYW5zaXRpb25bMF07XG5cdCAgICBhY3Rpb24gPSBhY3Rpb25zW3RyYW5zaXRpb25bMV1dO1xuXHQgICAgaWYgKGFjdGlvbikge1xuXHQgICAgICBuZXdDaGFyID0gdHJhbnNpdGlvblsyXTtcblx0ICAgICAgbmV3Q2hhciA9IG5ld0NoYXIgPT09IHVuZGVmaW5lZCA/IGMgOiBuZXdDaGFyO1xuXHQgICAgICBpZiAoYWN0aW9uKCkgPT09IGZhbHNlKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKG1vZGUgPT09IEFGVEVSX1BBVEgpIHtcblx0ICAgICAga2V5cy5yYXcgPSBwYXRoO1xuXHQgICAgICByZXR1cm4ga2V5cztcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHRlcm5hbCBwYXJzZSB0aGF0IGNoZWNrIGZvciBhIGNhY2hlIGhpdCBmaXJzdFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcblx0ICB2YXIgaGl0ID0gcGF0aENhY2hlLmdldChwYXRoKTtcblx0ICBpZiAoIWhpdCkge1xuXHQgICAgaGl0ID0gcGFyc2UocGF0aCk7XG5cdCAgICBpZiAoaGl0KSB7XG5cdCAgICAgIHBhdGhDYWNoZS5wdXQocGF0aCwgaGl0KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGhpdDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBmcm9tIGFuIG9iamVjdCBmcm9tIGEgcGF0aCBzdHJpbmdcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFBhdGgob2JqLCBwYXRoKSB7XG5cdCAgcmV0dXJuIHBhcnNlRXhwcmVzc2lvbihwYXRoKS5nZXQob2JqKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFdhcm4gYWdhaW5zdCBzZXR0aW5nIG5vbi1leGlzdGVudCByb290IHBhdGggb24gYSB2bS5cblx0ICovXG5cdFxuXHR2YXIgd2Fybk5vbkV4aXN0ZW50O1xuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIHdhcm5Ob25FeGlzdGVudCA9IGZ1bmN0aW9uIChwYXRoLCB2bSkge1xuXHQgICAgd2FybignWW91IGFyZSBzZXR0aW5nIGEgbm9uLWV4aXN0ZW50IHBhdGggXCInICsgcGF0aC5yYXcgKyAnXCIgJyArICdvbiBhIHZtIGluc3RhbmNlLiBDb25zaWRlciBwcmUtaW5pdGlhbGl6aW5nIHRoZSBwcm9wZXJ0eSAnICsgJ3dpdGggdGhlIFwiZGF0YVwiIG9wdGlvbiBmb3IgbW9yZSByZWxpYWJsZSByZWFjdGl2aXR5ICcgKyAnYW5kIGJldHRlciBwZXJmb3JtYW5jZS4nLCB2bSk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFNldCBvbiBhbiBvYmplY3QgZnJvbSBhIHBhdGhcblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZyB8IEFycmF5fSBwYXRoXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2V0UGF0aChvYmosIHBhdGgsIHZhbCkge1xuXHQgIHZhciBvcmlnaW5hbCA9IG9iajtcblx0ICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG5cdCAgICBwYXRoID0gcGFyc2UocGF0aCk7XG5cdCAgfVxuXHQgIGlmICghcGF0aCB8fCAhaXNPYmplY3Qob2JqKSkge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICB2YXIgbGFzdCwga2V5O1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gcGF0aC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGxhc3QgPSBvYmo7XG5cdCAgICBrZXkgPSBwYXRoW2ldO1xuXHQgICAgaWYgKGtleS5jaGFyQXQoMCkgPT09ICcqJykge1xuXHQgICAgICBrZXkgPSBwYXJzZUV4cHJlc3Npb24oa2V5LnNsaWNlKDEpKS5nZXQuY2FsbChvcmlnaW5hbCwgb3JpZ2luYWwpO1xuXHQgICAgfVxuXHQgICAgaWYgKGkgPCBsIC0gMSkge1xuXHQgICAgICBvYmogPSBvYmpba2V5XTtcblx0ICAgICAgaWYgKCFpc09iamVjdChvYmopKSB7XG5cdCAgICAgICAgb2JqID0ge307XG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbGFzdC5faXNWdWUpIHtcblx0ICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBsYXN0KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2V0KGxhc3QsIGtleSwgb2JqKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKGlzQXJyYXkob2JqKSkge1xuXHQgICAgICAgIG9iai4kc2V0KGtleSwgdmFsKTtcblx0ICAgICAgfSBlbHNlIGlmIChrZXkgaW4gb2JqKSB7XG5cdCAgICAgICAgb2JqW2tleV0gPSB2YWw7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgb2JqLl9pc1Z1ZSkge1xuXHQgICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIG9iaik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldChvYmosIGtleSwgdmFsKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0dmFyIHBhdGggPSBPYmplY3QuZnJlZXplKHtcblx0ICBwYXJzZVBhdGg6IHBhcnNlUGF0aCxcblx0ICBnZXRQYXRoOiBnZXRQYXRoLFxuXHQgIHNldFBhdGg6IHNldFBhdGhcblx0fSk7XG5cdFxuXHR2YXIgZXhwcmVzc2lvbkNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHRcblx0dmFyIGFsbG93ZWRLZXl3b3JkcyA9ICdNYXRoLERhdGUsdGhpcyx0cnVlLGZhbHNlLG51bGwsdW5kZWZpbmVkLEluZmluaXR5LE5hTiwnICsgJ2lzTmFOLGlzRmluaXRlLGRlY29kZVVSSSxkZWNvZGVVUklDb21wb25lbnQsZW5jb2RlVVJJLCcgKyAnZW5jb2RlVVJJQ29tcG9uZW50LHBhcnNlSW50LHBhcnNlRmxvYXQnO1xuXHR2YXIgYWxsb3dlZEtleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBhbGxvd2VkS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cdFxuXHQvLyBrZXl3b3JkcyB0aGF0IGRvbid0IG1ha2Ugc2Vuc2UgaW5zaWRlIGV4cHJlc3Npb25zXG5cdHZhciBpbXByb3BlcktleXdvcmRzID0gJ2JyZWFrLGNhc2UsY2xhc3MsY2F0Y2gsY29uc3QsY29udGludWUsZGVidWdnZXIsZGVmYXVsdCwnICsgJ2RlbGV0ZSxkbyxlbHNlLGV4cG9ydCxleHRlbmRzLGZpbmFsbHksZm9yLGZ1bmN0aW9uLGlmLCcgKyAnaW1wb3J0LGluLGluc3RhbmNlb2YsbGV0LHJldHVybixzdXBlcixzd2l0Y2gsdGhyb3csdHJ5LCcgKyAndmFyLHdoaWxlLHdpdGgseWllbGQsZW51bSxhd2FpdCxpbXBsZW1lbnRzLHBhY2thZ2UsJyArICdwcm90ZWN0ZWQsc3RhdGljLGludGVyZmFjZSxwcml2YXRlLHB1YmxpYyc7XG5cdHZhciBpbXByb3BlcktleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBpbXByb3BlcktleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpO1xuXHRcblx0dmFyIHdzUkUgPSAvXFxzL2c7XG5cdHZhciBuZXdsaW5lUkUgPSAvXFxuL2c7XG5cdHZhciBzYXZlUkUgPSAvW1xceyxdXFxzKltcXHdcXCRfXStcXHMqOnwoJyg/OlteJ1xcXFxdfFxcXFwuKSonfFwiKD86W15cIlxcXFxdfFxcXFwuKSpcInxgKD86W15gXFxcXF18XFxcXC4pKlxcJFxce3xcXH0oPzpbXmBcXFxcXXxcXFxcLikqYHxgKD86W15gXFxcXF18XFxcXC4pKmApfG5ldyB8dHlwZW9mIHx2b2lkIC9nO1xuXHR2YXIgcmVzdG9yZVJFID0gL1wiKFxcZCspXCIvZztcblx0dmFyIHBhdGhUZXN0UkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKD86XFwuW0EtWmEtel8kXVtcXHckXSp8XFxbJy4qPydcXF18XFxbXCIuKj9cIlxcXXxcXFtcXGQrXFxdfFxcW1tBLVphLXpfJF1bXFx3JF0qXFxdKSokLztcblx0dmFyIGlkZW50UkUgPSAvW15cXHckXFwuXSg/OltBLVphLXpfJF1bXFx3JF0qKS9nO1xuXHR2YXIgbGl0ZXJhbFZhbHVlUkUkMSA9IC9eKD86dHJ1ZXxmYWxzZXxudWxsfHVuZGVmaW5lZHxJbmZpbml0eXxOYU4pJC87XG5cdFxuXHRmdW5jdGlvbiBub29wKCkge31cblx0XG5cdC8qKlxuXHQgKiBTYXZlIC8gUmV3cml0ZSAvIFJlc3RvcmVcblx0ICpcblx0ICogV2hlbiByZXdyaXRpbmcgcGF0aHMgZm91bmQgaW4gYW4gZXhwcmVzc2lvbiwgaXQgaXNcblx0ICogcG9zc2libGUgZm9yIHRoZSBzYW1lIGxldHRlciBzZXF1ZW5jZXMgdG8gYmUgZm91bmQgaW5cblx0ICogc3RyaW5ncyBhbmQgT2JqZWN0IGxpdGVyYWwgcHJvcGVydHkga2V5cy4gVGhlcmVmb3JlIHdlXG5cdCAqIHJlbW92ZSBhbmQgc3RvcmUgdGhlc2UgcGFydHMgaW4gYSB0ZW1wb3JhcnkgYXJyYXksIGFuZFxuXHQgKiByZXN0b3JlIHRoZW0gYWZ0ZXIgdGhlIHBhdGggcmV3cml0ZS5cblx0ICovXG5cdFxuXHR2YXIgc2F2ZWQgPSBbXTtcblx0XG5cdC8qKlxuXHQgKiBTYXZlIHJlcGxhY2VyXG5cdCAqXG5cdCAqIFRoZSBzYXZlIHJlZ2V4IGNhbiBtYXRjaCB0d28gcG9zc2libGUgY2FzZXM6XG5cdCAqIDEuIEFuIG9wZW5pbmcgb2JqZWN0IGxpdGVyYWxcblx0ICogMi4gQSBzdHJpbmdcblx0ICogSWYgbWF0Y2hlZCBhcyBhIHBsYWluIHN0cmluZywgd2UgbmVlZCB0byBlc2NhcGUgaXRzXG5cdCAqIG5ld2xpbmVzLCBzaW5jZSB0aGUgc3RyaW5nIG5lZWRzIHRvIGJlIHByZXNlcnZlZCB3aGVuXG5cdCAqIGdlbmVyYXRpbmcgdGhlIGZ1bmN0aW9uIGJvZHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlzU3RyaW5nIC0gc3RyIGlmIG1hdGNoZWQgYXMgYSBzdHJpbmdcblx0ICogQHJldHVybiB7U3RyaW5nfSAtIHBsYWNlaG9sZGVyIHdpdGggaW5kZXhcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzYXZlKHN0ciwgaXNTdHJpbmcpIHtcblx0ICB2YXIgaSA9IHNhdmVkLmxlbmd0aDtcblx0ICBzYXZlZFtpXSA9IGlzU3RyaW5nID8gc3RyLnJlcGxhY2UobmV3bGluZVJFLCAnXFxcXG4nKSA6IHN0cjtcblx0ICByZXR1cm4gJ1wiJyArIGkgKyAnXCInO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUGF0aCByZXdyaXRlIHJlcGxhY2VyXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSByYXdcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJld3JpdGUocmF3KSB7XG5cdCAgdmFyIGMgPSByYXcuY2hhckF0KDApO1xuXHQgIHZhciBwYXRoID0gcmF3LnNsaWNlKDEpO1xuXHQgIGlmIChhbGxvd2VkS2V5d29yZHNSRS50ZXN0KHBhdGgpKSB7XG5cdCAgICByZXR1cm4gcmF3O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBwYXRoID0gcGF0aC5pbmRleE9mKCdcIicpID4gLTEgPyBwYXRoLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKSA6IHBhdGg7XG5cdCAgICByZXR1cm4gYyArICdzY29wZS4nICsgcGF0aDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXN0b3JlIHJlcGxhY2VyXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHBhcmFtIHtTdHJpbmd9IGkgLSBtYXRjaGVkIHNhdmUgaW5kZXhcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc3RvcmUoc3RyLCBpKSB7XG5cdCAgcmV0dXJuIHNhdmVkW2ldO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmV3cml0ZSBhbiBleHByZXNzaW9uLCBwcmVmaXhpbmcgYWxsIHBhdGggYWNjZXNzb3JzIHdpdGhcblx0ICogYHNjb3BlLmAgYW5kIGdlbmVyYXRlIGdldHRlci9zZXR0ZXIgZnVuY3Rpb25zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVHZXR0ZXIoZXhwKSB7XG5cdCAgaWYgKGltcHJvcGVyS2V5d29yZHNSRS50ZXN0KGV4cCkpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQXZvaWQgdXNpbmcgcmVzZXJ2ZWQga2V5d29yZHMgaW4gZXhwcmVzc2lvbjogJyArIGV4cCk7XG5cdCAgfVxuXHQgIC8vIHJlc2V0IHN0YXRlXG5cdCAgc2F2ZWQubGVuZ3RoID0gMDtcblx0ICAvLyBzYXZlIHN0cmluZ3MgYW5kIG9iamVjdCBsaXRlcmFsIGtleXNcblx0ICB2YXIgYm9keSA9IGV4cC5yZXBsYWNlKHNhdmVSRSwgc2F2ZSkucmVwbGFjZSh3c1JFLCAnJyk7XG5cdCAgLy8gcmV3cml0ZSBhbGwgcGF0aHNcblx0ICAvLyBwYWQgMSBzcGFjZSBoZXJlIGJlY2F1c2UgdGhlIHJlZ2V4IG1hdGNoZXMgMSBleHRyYSBjaGFyXG5cdCAgYm9keSA9ICgnICcgKyBib2R5KS5yZXBsYWNlKGlkZW50UkUsIHJld3JpdGUpLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKTtcblx0ICByZXR1cm4gbWFrZUdldHRlckZuKGJvZHkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBnZXR0ZXIgZnVuY3Rpb24uIFJlcXVpcmVzIGV2YWwuXG5cdCAqXG5cdCAqIFdlIGlzb2xhdGUgdGhlIHRyeS9jYXRjaCBzbyBpdCBkb2Vzbid0IGFmZmVjdCB0aGVcblx0ICogb3B0aW1pemF0aW9uIG9mIHRoZSBwYXJzZSBmdW5jdGlvbiB3aGVuIGl0IGlzIG5vdCBjYWxsZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBib2R5XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlR2V0dGVyRm4oYm9keSkge1xuXHQgIHRyeSB7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbignc2NvcGUnLCAncmV0dXJuICcgKyBib2R5ICsgJzsnKTtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKGUudG9TdHJpbmcoKS5tYXRjaCgvdW5zYWZlLWV2YWx8Q1NQLykpIHtcblx0ICAgICAgICB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IGJ1aWxkIG9mIFZ1ZS5qcyBpbiBhbiBlbnZpcm9ubWVudCAnICsgJ3dpdGggQ29udGVudCBTZWN1cml0eSBQb2xpY3kgdGhhdCBwcm9oaWJpdHMgdW5zYWZlLWV2YWwuICcgKyAnVXNlIHRoZSBDU1AtY29tcGxpYW50IGJ1aWxkIGluc3RlYWQ6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbCNDU1AtY29tcGxpYW50LWJ1aWxkJyk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgd2FybignSW52YWxpZCBleHByZXNzaW9uLiAnICsgJ0dlbmVyYXRlZCBmdW5jdGlvbiBib2R5OiAnICsgYm9keSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBub29wO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSBzZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSBleHByZXNzaW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlU2V0dGVyKGV4cCkge1xuXHQgIHZhciBwYXRoID0gcGFyc2VQYXRoKGV4cCk7XG5cdCAgaWYgKHBhdGgpIHtcblx0ICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIHZhbCkge1xuXHQgICAgICBzZXRQYXRoKHNjb3BlLCBwYXRoLCB2YWwpO1xuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHNldHRlciBleHByZXNzaW9uOiAnICsgZXhwKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhbiBleHByZXNzaW9uIGludG8gcmUtd3JpdHRlbiBnZXR0ZXIvc2V0dGVycy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IG5lZWRTZXRcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VFeHByZXNzaW9uKGV4cCwgbmVlZFNldCkge1xuXHQgIGV4cCA9IGV4cC50cmltKCk7XG5cdCAgLy8gdHJ5IGNhY2hlXG5cdCAgdmFyIGhpdCA9IGV4cHJlc3Npb25DYWNoZS5nZXQoZXhwKTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICBpZiAobmVlZFNldCAmJiAhaGl0LnNldCkge1xuXHQgICAgICBoaXQuc2V0ID0gY29tcGlsZVNldHRlcihoaXQuZXhwKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHQgIHZhciByZXMgPSB7IGV4cDogZXhwIH07XG5cdCAgcmVzLmdldCA9IGlzU2ltcGxlUGF0aChleHApICYmIGV4cC5pbmRleE9mKCdbJykgPCAwXG5cdCAgLy8gb3B0aW1pemVkIHN1cGVyIHNpbXBsZSBnZXR0ZXJcblx0ICA/IG1ha2VHZXR0ZXJGbignc2NvcGUuJyArIGV4cClcblx0ICAvLyBkeW5hbWljIGdldHRlclxuXHQgIDogY29tcGlsZUdldHRlcihleHApO1xuXHQgIGlmIChuZWVkU2V0KSB7XG5cdCAgICByZXMuc2V0ID0gY29tcGlsZVNldHRlcihleHApO1xuXHQgIH1cblx0ICBleHByZXNzaW9uQ2FjaGUucHV0KGV4cCwgcmVzKTtcblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIHNpbXBsZSBwYXRoLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNTaW1wbGVQYXRoKGV4cCkge1xuXHQgIHJldHVybiBwYXRoVGVzdFJFLnRlc3QoZXhwKSAmJlxuXHQgIC8vIGRvbid0IHRyZWF0IGxpdGVyYWwgdmFsdWVzIGFzIHBhdGhzXG5cdCAgIWxpdGVyYWxWYWx1ZVJFJDEudGVzdChleHApICYmXG5cdCAgLy8gTWF0aCBjb25zdGFudHMgZS5nLiBNYXRoLlBJLCBNYXRoLkUgZXRjLlxuXHQgIGV4cC5zbGljZSgwLCA1KSAhPT0gJ01hdGguJztcblx0fVxuXHRcblx0dmFyIGV4cHJlc3Npb24gPSBPYmplY3QuZnJlZXplKHtcblx0ICBwYXJzZUV4cHJlc3Npb246IHBhcnNlRXhwcmVzc2lvbixcblx0ICBpc1NpbXBsZVBhdGg6IGlzU2ltcGxlUGF0aFxuXHR9KTtcblx0XG5cdC8vIHdlIGhhdmUgdHdvIHNlcGFyYXRlIHF1ZXVlczogb25lIGZvciBkaXJlY3RpdmUgdXBkYXRlc1xuXHQvLyBhbmQgb25lIGZvciB1c2VyIHdhdGNoZXIgcmVnaXN0ZXJlZCB2aWEgJHdhdGNoKCkuXG5cdC8vIHdlIHdhbnQgdG8gZ3VhcmFudGVlIGRpcmVjdGl2ZSB1cGRhdGVzIHRvIGJlIGNhbGxlZFxuXHQvLyBiZWZvcmUgdXNlciB3YXRjaGVycyBzbyB0aGF0IHdoZW4gdXNlciB3YXRjaGVycyBhcmVcblx0Ly8gdHJpZ2dlcmVkLCB0aGUgRE9NIHdvdWxkIGhhdmUgYWxyZWFkeSBiZWVuIGluIHVwZGF0ZWRcblx0Ly8gc3RhdGUuXG5cdFxuXHR2YXIgcXVldWUgPSBbXTtcblx0dmFyIHVzZXJRdWV1ZSA9IFtdO1xuXHR2YXIgaGFzID0ge307XG5cdHZhciBjaXJjdWxhciA9IHt9O1xuXHR2YXIgd2FpdGluZyA9IGZhbHNlO1xuXHRcblx0LyoqXG5cdCAqIFJlc2V0IHRoZSBiYXRjaGVyJ3Mgc3RhdGUuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzZXRCYXRjaGVyU3RhdGUoKSB7XG5cdCAgcXVldWUubGVuZ3RoID0gMDtcblx0ICB1c2VyUXVldWUubGVuZ3RoID0gMDtcblx0ICBoYXMgPSB7fTtcblx0ICBjaXJjdWxhciA9IHt9O1xuXHQgIHdhaXRpbmcgPSBmYWxzZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZsdXNoIGJvdGggcXVldWVzIGFuZCBydW4gdGhlIHdhdGNoZXJzLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZsdXNoQmF0Y2hlclF1ZXVlKCkge1xuXHQgIHZhciBfYWdhaW4gPSB0cnVlO1xuXHRcblx0ICBfZnVuY3Rpb246IHdoaWxlIChfYWdhaW4pIHtcblx0ICAgIF9hZ2FpbiA9IGZhbHNlO1xuXHRcblx0ICAgIHJ1bkJhdGNoZXJRdWV1ZShxdWV1ZSk7XG5cdCAgICBydW5CYXRjaGVyUXVldWUodXNlclF1ZXVlKTtcblx0ICAgIC8vIHVzZXIgd2F0Y2hlcnMgdHJpZ2dlcmVkIG1vcmUgd2F0Y2hlcnMsXG5cdCAgICAvLyBrZWVwIGZsdXNoaW5nIHVudGlsIGl0IGRlcGxldGVzXG5cdCAgICBpZiAocXVldWUubGVuZ3RoKSB7XG5cdCAgICAgIF9hZ2FpbiA9IHRydWU7XG5cdCAgICAgIGNvbnRpbnVlIF9mdW5jdGlvbjtcblx0ICAgIH1cblx0ICAgIC8vIGRldiB0b29sIGhvb2tcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKGRldnRvb2xzICYmIGNvbmZpZy5kZXZ0b29scykge1xuXHQgICAgICBkZXZ0b29scy5lbWl0KCdmbHVzaCcpO1xuXHQgICAgfVxuXHQgICAgcmVzZXRCYXRjaGVyU3RhdGUoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSdW4gdGhlIHdhdGNoZXJzIGluIGEgc2luZ2xlIHF1ZXVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBxdWV1ZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJ1bkJhdGNoZXJRdWV1ZShxdWV1ZSkge1xuXHQgIC8vIGRvIG5vdCBjYWNoZSBsZW5ndGggYmVjYXVzZSBtb3JlIHdhdGNoZXJzIG1pZ2h0IGJlIHB1c2hlZFxuXHQgIC8vIGFzIHdlIHJ1biBleGlzdGluZyB3YXRjaGVyc1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcblx0ICAgIHZhciB3YXRjaGVyID0gcXVldWVbaV07XG5cdCAgICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuXHQgICAgaGFzW2lkXSA9IG51bGw7XG5cdCAgICB3YXRjaGVyLnJ1bigpO1xuXHQgICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaGFzW2lkXSAhPSBudWxsKSB7XG5cdCAgICAgIGNpcmN1bGFyW2lkXSA9IChjaXJjdWxhcltpZF0gfHwgMCkgKyAxO1xuXHQgICAgICBpZiAoY2lyY3VsYXJbaWRdID4gY29uZmlnLl9tYXhVcGRhdGVDb3VudCkge1xuXHQgICAgICAgIHdhcm4oJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCBmb3Igd2F0Y2hlciAnICsgJ3dpdGggZXhwcmVzc2lvbiBcIicgKyB3YXRjaGVyLmV4cHJlc3Npb24gKyAnXCInLCB3YXRjaGVyLnZtKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICBxdWV1ZS5sZW5ndGggPSAwO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHVzaCBhIHdhdGNoZXIgaW50byB0aGUgd2F0Y2hlciBxdWV1ZS5cblx0ICogSm9icyB3aXRoIGR1cGxpY2F0ZSBJRHMgd2lsbCBiZSBza2lwcGVkIHVubGVzcyBpdCdzXG5cdCAqIHB1c2hlZCB3aGVuIHRoZSBxdWV1ZSBpcyBiZWluZyBmbHVzaGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1dhdGNoZXJ9IHdhdGNoZXJcblx0ICogICBwcm9wZXJ0aWVzOlxuXHQgKiAgIC0ge051bWJlcn0gaWRcblx0ICogICAtIHtGdW5jdGlvbn0gcnVuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHVzaFdhdGNoZXIod2F0Y2hlcikge1xuXHQgIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG5cdCAgaWYgKGhhc1tpZF0gPT0gbnVsbCkge1xuXHQgICAgLy8gcHVzaCB3YXRjaGVyIGludG8gYXBwcm9wcmlhdGUgcXVldWVcblx0ICAgIHZhciBxID0gd2F0Y2hlci51c2VyID8gdXNlclF1ZXVlIDogcXVldWU7XG5cdCAgICBoYXNbaWRdID0gcS5sZW5ndGg7XG5cdCAgICBxLnB1c2god2F0Y2hlcik7XG5cdCAgICAvLyBxdWV1ZSB0aGUgZmx1c2hcblx0ICAgIGlmICghd2FpdGluZykge1xuXHQgICAgICB3YWl0aW5nID0gdHJ1ZTtcblx0ICAgICAgbmV4dFRpY2soZmx1c2hCYXRjaGVyUXVldWUpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHVpZCQyID0gMDtcblx0XG5cdC8qKlxuXHQgKiBBIHdhdGNoZXIgcGFyc2VzIGFuIGV4cHJlc3Npb24sIGNvbGxlY3RzIGRlcGVuZGVuY2llcyxcblx0ICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy5cblx0ICogVGhpcyBpcyB1c2VkIGZvciBib3RoIHRoZSAkd2F0Y2goKSBhcGkgYW5kIGRpcmVjdGl2ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7QXJyYXl9IGZpbHRlcnNcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHR3b1dheVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdXNlclxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gc3luY1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGF6eVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwcmVQcm9jZXNzXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwb3N0UHJvY2Vzc11cblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwgb3B0aW9ucykge1xuXHQgIC8vIG1peCBpbiBvcHRpb25zXG5cdCAgaWYgKG9wdGlvbnMpIHtcblx0ICAgIGV4dGVuZCh0aGlzLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgdmFyIGlzRm4gPSB0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJztcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdm0uX3dhdGNoZXJzLnB1c2godGhpcyk7XG5cdCAgdGhpcy5leHByZXNzaW9uID0gZXhwT3JGbjtcblx0ICB0aGlzLmNiID0gY2I7XG5cdCAgdGhpcy5pZCA9ICsrdWlkJDI7IC8vIHVpZCBmb3IgYmF0Y2hpbmdcblx0ICB0aGlzLmFjdGl2ZSA9IHRydWU7XG5cdCAgdGhpcy5kaXJ0eSA9IHRoaXMubGF6eTsgLy8gZm9yIGxhenkgd2F0Y2hlcnNcblx0ICB0aGlzLmRlcHMgPSBbXTtcblx0ICB0aGlzLm5ld0RlcHMgPSBbXTtcblx0ICB0aGlzLmRlcElkcyA9IG5ldyBfU2V0KCk7XG5cdCAgdGhpcy5uZXdEZXBJZHMgPSBuZXcgX1NldCgpO1xuXHQgIHRoaXMucHJldkVycm9yID0gbnVsbDsgLy8gZm9yIGFzeW5jIGVycm9yIHN0YWNrc1xuXHQgIC8vIHBhcnNlIGV4cHJlc3Npb24gZm9yIGdldHRlci9zZXR0ZXJcblx0ICBpZiAoaXNGbikge1xuXHQgICAgdGhpcy5nZXR0ZXIgPSBleHBPckZuO1xuXHQgICAgdGhpcy5zZXR0ZXIgPSB1bmRlZmluZWQ7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwT3JGbiwgdGhpcy50d29XYXkpO1xuXHQgICAgdGhpcy5nZXR0ZXIgPSByZXMuZ2V0O1xuXHQgICAgdGhpcy5zZXR0ZXIgPSByZXMuc2V0O1xuXHQgIH1cblx0ICB0aGlzLnZhbHVlID0gdGhpcy5sYXp5ID8gdW5kZWZpbmVkIDogdGhpcy5nZXQoKTtcblx0ICAvLyBzdGF0ZSBmb3IgYXZvaWRpbmcgZmFsc2UgdHJpZ2dlcnMgZm9yIGRlZXAgYW5kIEFycmF5XG5cdCAgLy8gd2F0Y2hlcnMgZHVyaW5nIHZtLl9kaWdlc3QoKVxuXHQgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFdmFsdWF0ZSB0aGUgZ2V0dGVyLCBhbmQgcmUtY29sbGVjdCBkZXBlbmRlbmNpZXMuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMuYmVmb3JlR2V0KCk7XG5cdCAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtO1xuXHQgIHZhciB2YWx1ZTtcblx0ICB0cnkge1xuXHQgICAgdmFsdWUgPSB0aGlzLmdldHRlci5jYWxsKHNjb3BlLCBzY29wZSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG5cdCAgICAgIHdhcm4oJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBleHByZXNzaW9uICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gXCJ0b3VjaFwiIGV2ZXJ5IHByb3BlcnR5IHNvIHRoZXkgYXJlIGFsbCB0cmFja2VkIGFzXG5cdCAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nXG5cdCAgaWYgKHRoaXMuZGVlcCkge1xuXHQgICAgdHJhdmVyc2UodmFsdWUpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5wcmVQcm9jZXNzKSB7XG5cdCAgICB2YWx1ZSA9IHRoaXMucHJlUHJvY2Vzcyh2YWx1ZSk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLmZpbHRlcnMpIHtcblx0ICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyh2YWx1ZSwgbnVsbCwgdGhpcy5maWx0ZXJzLCBmYWxzZSk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLnBvc3RQcm9jZXNzKSB7XG5cdCAgICB2YWx1ZSA9IHRoaXMucG9zdFByb2Nlc3ModmFsdWUpO1xuXHQgIH1cblx0ICB0aGlzLmFmdGVyR2V0KCk7XG5cdCAgcmV0dXJuIHZhbHVlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG5cdCAgaWYgKHRoaXMuZmlsdGVycykge1xuXHQgICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCB0aGlzLnZhbHVlLCB0aGlzLmZpbHRlcnMsIHRydWUpO1xuXHQgIH1cblx0ICB0cnkge1xuXHQgICAgdGhpcy5zZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUsIHZhbHVlKTtcblx0ICB9IGNhdGNoIChlKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcblx0ICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIHNldHRlciAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIHR3by13YXkgc3luYyBmb3Igdi1mb3IgYWxpYXNcblx0ICB2YXIgZm9yQ29udGV4dCA9IHNjb3BlLiRmb3JDb250ZXh0O1xuXHQgIGlmIChmb3JDb250ZXh0ICYmIGZvckNvbnRleHQuYWxpYXMgPT09IHRoaXMuZXhwcmVzc2lvbikge1xuXHQgICAgaWYgKGZvckNvbnRleHQuZmlsdGVycykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdHdvLXdheSBiaW5kaW5nIG9uICcgKyAnYSB2LWZvciBhbGlhcyAoJyArIHRoaXMuZXhwcmVzc2lvbiArICcpLCBhbmQgdGhlICcgKyAndi1mb3IgaGFzIGZpbHRlcnMuIFRoaXMgd2lsbCBub3Qgd29yayBwcm9wZXJseS4gJyArICdFaXRoZXIgcmVtb3ZlIHRoZSBmaWx0ZXJzIG9yIHVzZSBhbiBhcnJheSBvZiAnICsgJ29iamVjdHMgYW5kIGJpbmQgdG8gb2JqZWN0IHByb3BlcnRpZXMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZm9yQ29udGV4dC5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoc2NvcGUuJGtleSkge1xuXHQgICAgICAgIC8vIG9yaWdpbmFsIGlzIGFuIG9iamVjdFxuXHQgICAgICAgIGZvckNvbnRleHQucmF3VmFsdWVbc2NvcGUuJGtleV0gPSB2YWx1ZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlLiRzZXQoc2NvcGUuJGluZGV4LCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBQcmVwYXJlIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuYmVmb3JlR2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgIERlcC50YXJnZXQgPSB0aGlzO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFkZCBhIGRlcGVuZGVuY3kgdG8gdGhpcyBkaXJlY3RpdmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RGVwfSBkZXBcblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5hZGREZXAgPSBmdW5jdGlvbiAoZGVwKSB7XG5cdCAgdmFyIGlkID0gZGVwLmlkO1xuXHQgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGlkKSkge1xuXHQgICAgdGhpcy5uZXdEZXBJZHMuYWRkKGlkKTtcblx0ICAgIHRoaXMubmV3RGVwcy5wdXNoKGRlcCk7XG5cdCAgICBpZiAoIXRoaXMuZGVwSWRzLmhhcyhpZCkpIHtcblx0ICAgICAgZGVwLmFkZFN1Yih0aGlzKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5hZnRlckdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICBEZXAudGFyZ2V0ID0gbnVsbDtcblx0ICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdmFyIGRlcCA9IHRoaXMuZGVwc1tpXTtcblx0ICAgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGRlcC5pZCkpIHtcblx0ICAgICAgZGVwLnJlbW92ZVN1Yih0aGlzKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgdmFyIHRtcCA9IHRoaXMuZGVwSWRzO1xuXHQgIHRoaXMuZGVwSWRzID0gdGhpcy5uZXdEZXBJZHM7XG5cdCAgdGhpcy5uZXdEZXBJZHMgPSB0bXA7XG5cdCAgdGhpcy5uZXdEZXBJZHMuY2xlYXIoKTtcblx0ICB0bXAgPSB0aGlzLmRlcHM7XG5cdCAgdGhpcy5kZXBzID0gdGhpcy5uZXdEZXBzO1xuXHQgIHRoaXMubmV3RGVwcyA9IHRtcDtcblx0ICB0aGlzLm5ld0RlcHMubGVuZ3RoID0gMDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTdWJzY3JpYmVyIGludGVyZmFjZS5cblx0ICogV2lsbCBiZSBjYWxsZWQgd2hlbiBhIGRlcGVuZGVuY3kgY2hhbmdlcy5cblx0ICpcblx0ICogQHBhcmFtIHtCb29sZWFufSBzaGFsbG93XG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHNoYWxsb3cpIHtcblx0ICBpZiAodGhpcy5sYXp5KSB7XG5cdCAgICB0aGlzLmRpcnR5ID0gdHJ1ZTtcblx0ICB9IGVsc2UgaWYgKHRoaXMuc3luYyB8fCAhY29uZmlnLmFzeW5jKSB7XG5cdCAgICB0aGlzLnJ1bigpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBpZiBxdWV1ZWQsIG9ubHkgb3ZlcndyaXRlIHNoYWxsb3cgd2l0aCBub24tc2hhbGxvdyxcblx0ICAgIC8vIGJ1dCBub3QgdGhlIG90aGVyIHdheSBhcm91bmQuXG5cdCAgICB0aGlzLnNoYWxsb3cgPSB0aGlzLnF1ZXVlZCA/IHNoYWxsb3cgPyB0aGlzLnNoYWxsb3cgOiBmYWxzZSA6ICEhc2hhbGxvdztcblx0ICAgIHRoaXMucXVldWVkID0gdHJ1ZTtcblx0ICAgIC8vIHJlY29yZCBiZWZvcmUtcHVzaCBlcnJvciBzdGFjayBpbiBkZWJ1ZyBtb2RlXG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1Zykge1xuXHQgICAgICB0aGlzLnByZXZFcnJvciA9IG5ldyBFcnJvcignW3Z1ZV0gYXN5bmMgc3RhY2sgdHJhY2UnKTtcblx0ICAgIH1cblx0ICAgIHB1c2hXYXRjaGVyKHRoaXMpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBCYXRjaGVyIGpvYiBpbnRlcmZhY2UuXG5cdCAqIFdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBiYXRjaGVyLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhpcy5hY3RpdmUpIHtcblx0ICAgIHZhciB2YWx1ZSA9IHRoaXMuZ2V0KCk7XG5cdCAgICBpZiAodmFsdWUgIT09IHRoaXMudmFsdWUgfHxcblx0ICAgIC8vIERlZXAgd2F0Y2hlcnMgYW5kIHdhdGNoZXJzIG9uIE9iamVjdC9BcnJheXMgc2hvdWxkIGZpcmUgZXZlblxuXHQgICAgLy8gd2hlbiB0aGUgdmFsdWUgaXMgdGhlIHNhbWUsIGJlY2F1c2UgdGhlIHZhbHVlIG1heVxuXHQgICAgLy8gaGF2ZSBtdXRhdGVkOyBidXQgb25seSBkbyBzbyBpZiB0aGlzIGlzIGFcblx0ICAgIC8vIG5vbi1zaGFsbG93IHVwZGF0ZSAoY2F1c2VkIGJ5IGEgdm0gZGlnZXN0KS5cblx0ICAgIChpc09iamVjdCh2YWx1ZSkgfHwgdGhpcy5kZWVwKSAmJiAhdGhpcy5zaGFsbG93KSB7XG5cdCAgICAgIC8vIHNldCBuZXcgdmFsdWVcblx0ICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZTtcblx0ICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgICAgICAvLyBpbiBkZWJ1ZyArIGFzeW5jIG1vZGUsIHdoZW4gYSB3YXRjaGVyIGNhbGxiYWNrc1xuXHQgICAgICAvLyB0aHJvd3MsIHdlIGFsc28gdGhyb3cgdGhlIHNhdmVkIGJlZm9yZS1wdXNoIGVycm9yXG5cdCAgICAgIC8vIHNvIHRoZSBmdWxsIGNyb3NzLXRpY2sgc3RhY2sgdHJhY2UgaXMgYXZhaWxhYmxlLlxuXHQgICAgICB2YXIgcHJldkVycm9yID0gdGhpcy5wcmV2RXJyb3I7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcgJiYgcHJldkVycm9yKSB7XG5cdCAgICAgICAgdGhpcy5wcmV2RXJyb3IgPSBudWxsO1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICB0aGlzLmNiLmNhbGwodGhpcy52bSwgdmFsdWUsIG9sZFZhbHVlKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHRocm93IHByZXZFcnJvcjtcblx0ICAgICAgICAgIH0sIDApO1xuXHQgICAgICAgICAgdGhyb3cgZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEV2YWx1YXRlIHRoZSB2YWx1ZSBvZiB0aGUgd2F0Y2hlci5cblx0ICogVGhpcyBvbmx5IGdldHMgY2FsbGVkIGZvciBsYXp5IHdhdGNoZXJzLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKCkge1xuXHQgIC8vIGF2b2lkIG92ZXJ3cml0aW5nIGFub3RoZXIgd2F0Y2hlciB0aGF0IGlzIGJlaW5nXG5cdCAgLy8gY29sbGVjdGVkLlxuXHQgIHZhciBjdXJyZW50ID0gRGVwLnRhcmdldDtcblx0ICB0aGlzLnZhbHVlID0gdGhpcy5nZXQoKTtcblx0ICB0aGlzLmRpcnR5ID0gZmFsc2U7XG5cdCAgRGVwLnRhcmdldCA9IGN1cnJlbnQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogRGVwZW5kIG9uIGFsbCBkZXBzIGNvbGxlY3RlZCBieSB0aGlzIHdhdGNoZXIuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB0aGlzLmRlcHNbaV0uZGVwZW5kKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBzZWxmIGZyb20gYWxsIGRlcGVuZGVuY2llcycgc3ViY3JpYmVyIGxpc3QuXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUudGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMuYWN0aXZlKSB7XG5cdCAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0XG5cdCAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgZXhwZW5zaXZlIG9wZXJhdGlvbiBzbyB3ZSBza2lwIGl0XG5cdCAgICAvLyBpZiB0aGUgdm0gaXMgYmVpbmcgZGVzdHJveWVkIG9yIGlzIHBlcmZvcm1pbmcgYSB2LWZvclxuXHQgICAgLy8gcmUtcmVuZGVyICh0aGUgd2F0Y2hlciBsaXN0IGlzIHRoZW4gZmlsdGVyZWQgYnkgdi1mb3IpLlxuXHQgICAgaWYgKCF0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkICYmICF0aGlzLnZtLl92Rm9yUmVtb3ZpbmcpIHtcblx0ICAgICAgdGhpcy52bS5fd2F0Y2hlcnMuJHJlbW92ZSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdGhpcy5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzKTtcblx0ICAgIH1cblx0ICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG5cdCAgICB0aGlzLnZtID0gdGhpcy5jYiA9IHRoaXMudmFsdWUgPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZWNydXNpdmVseSB0cmF2ZXJzZSBhbiBvYmplY3QgdG8gZXZva2UgYWxsIGNvbnZlcnRlZFxuXHQgKiBnZXR0ZXJzLCBzbyB0aGF0IGV2ZXJ5IG5lc3RlZCBwcm9wZXJ0eSBpbnNpZGUgdGhlIG9iamVjdFxuXHQgKiBpcyBjb2xsZWN0ZWQgYXMgYSBcImRlZXBcIiBkZXBlbmRlbmN5LlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdHZhciBzZWVuT2JqZWN0cyA9IG5ldyBfU2V0KCk7XG5cdGZ1bmN0aW9uIHRyYXZlcnNlKHZhbCwgc2Vlbikge1xuXHQgIHZhciBpID0gdW5kZWZpbmVkLFxuXHQgICAgICBrZXlzID0gdW5kZWZpbmVkO1xuXHQgIGlmICghc2Vlbikge1xuXHQgICAgc2VlbiA9IHNlZW5PYmplY3RzO1xuXHQgICAgc2Vlbi5jbGVhcigpO1xuXHQgIH1cblx0ICB2YXIgaXNBID0gaXNBcnJheSh2YWwpO1xuXHQgIHZhciBpc08gPSBpc09iamVjdCh2YWwpO1xuXHQgIGlmICgoaXNBIHx8IGlzTykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWwpKSB7XG5cdCAgICBpZiAodmFsLl9fb2JfXykge1xuXHQgICAgICB2YXIgZGVwSWQgPSB2YWwuX19vYl9fLmRlcC5pZDtcblx0ICAgICAgaWYgKHNlZW4uaGFzKGRlcElkKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzZWVuLmFkZChkZXBJZCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChpc0EpIHtcblx0ICAgICAgaSA9IHZhbC5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtpXSwgc2Vlbik7XG5cdCAgICB9IGVsc2UgaWYgKGlzTykge1xuXHQgICAgICBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcblx0ICAgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxba2V5c1tpXV0sIHNlZW4pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHRleHQkMSA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHRoaXMuYXR0ciA9IHRoaXMuZWwubm9kZVR5cGUgPT09IDMgPyAnZGF0YScgOiAndGV4dENvbnRlbnQnO1xuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB0aGlzLmVsW3RoaXMuYXR0cl0gPSBfdG9TdHJpbmcodmFsdWUpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciB0ZW1wbGF0ZUNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHR2YXIgaWRTZWxlY3RvckNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXHRcblx0dmFyIG1hcCA9IHtcblx0ICBlZmF1bHQ6IFswLCAnJywgJyddLFxuXHQgIGxlZ2VuZDogWzEsICc8ZmllbGRzZXQ+JywgJzwvZmllbGRzZXQ+J10sXG5cdCAgdHI6IFsyLCAnPHRhYmxlPjx0Ym9keT4nLCAnPC90Ym9keT48L3RhYmxlPiddLFxuXHQgIGNvbDogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J11cblx0fTtcblx0XG5cdG1hcC50ZCA9IG1hcC50aCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXHRcblx0bWFwLm9wdGlvbiA9IG1hcC5vcHRncm91cCA9IFsxLCAnPHNlbGVjdCBtdWx0aXBsZT1cIm11bHRpcGxlXCI+JywgJzwvc2VsZWN0PiddO1xuXHRcblx0bWFwLnRoZWFkID0gbWFwLnRib2R5ID0gbWFwLmNvbGdyb3VwID0gbWFwLmNhcHRpb24gPSBtYXAudGZvb3QgPSBbMSwgJzx0YWJsZT4nLCAnPC90YWJsZT4nXTtcblx0XG5cdG1hcC5nID0gbWFwLmRlZnMgPSBtYXAuc3ltYm9sID0gbWFwLnVzZSA9IG1hcC5pbWFnZSA9IG1hcC50ZXh0ID0gbWFwLmNpcmNsZSA9IG1hcC5lbGxpcHNlID0gbWFwLmxpbmUgPSBtYXAucGF0aCA9IG1hcC5wb2x5Z29uID0gbWFwLnBvbHlsaW5lID0gbWFwLnJlY3QgPSBbMSwgJzxzdmcgJyArICd4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgJyArICd4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiAnICsgJ3htbG5zOmV2PVwiaHR0cDovL3d3dy53My5vcmcvMjAwMS94bWwtZXZlbnRzXCInICsgJ3ZlcnNpb249XCIxLjFcIj4nLCAnPC9zdmc+J107XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgc3VwcG9ydGVkIHRlbXBsYXRlIG5vZGUgd2l0aCBhXG5cdCAqIERvY3VtZW50RnJhZ21lbnQgY29udGVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNSZWFsVGVtcGxhdGUobm9kZSkge1xuXHQgIHJldHVybiBpc1RlbXBsYXRlKG5vZGUpICYmIGlzRnJhZ21lbnQobm9kZS5jb250ZW50KTtcblx0fVxuXHRcblx0dmFyIHRhZ1JFJDEgPSAvPChbXFx3Oi1dKykvO1xuXHR2YXIgZW50aXR5UkUgPSAvJiM/XFx3Kz87Lztcblx0dmFyIGNvbW1lbnRSRSA9IC88IS0tLztcblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGEgc3RyaW5nIHRlbXBsYXRlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cblx0ICogRGV0ZXJtaW5lcyBjb3JyZWN0IHdyYXBwaW5nIGJ5IHRhZyB0eXBlcy4gV3JhcHBpbmdcblx0ICogc3RyYXRlZ3kgZm91bmQgaW4galF1ZXJ5ICYgY29tcG9uZW50L2RvbWlmeS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHRlbXBsYXRlU3RyaW5nXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZVN0cmluZywgcmF3KSB7XG5cdCAgLy8gdHJ5IGEgY2FjaGUgaGl0IGZpcnN0XG5cdCAgdmFyIGNhY2hlS2V5ID0gcmF3ID8gdGVtcGxhdGVTdHJpbmcgOiB0ZW1wbGF0ZVN0cmluZy50cmltKCk7XG5cdCAgdmFyIGhpdCA9IHRlbXBsYXRlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0XG5cdCAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgdmFyIHRhZ01hdGNoID0gdGVtcGxhdGVTdHJpbmcubWF0Y2godGFnUkUkMSk7XG5cdCAgdmFyIGVudGl0eU1hdGNoID0gZW50aXR5UkUudGVzdCh0ZW1wbGF0ZVN0cmluZyk7XG5cdCAgdmFyIGNvbW1lbnRNYXRjaCA9IGNvbW1lbnRSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcblx0XG5cdCAgaWYgKCF0YWdNYXRjaCAmJiAhZW50aXR5TWF0Y2ggJiYgIWNvbW1lbnRNYXRjaCkge1xuXHQgICAgLy8gdGV4dCBvbmx5LCByZXR1cm4gYSBzaW5nbGUgdGV4dCBub2RlLlxuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZW1wbGF0ZVN0cmluZykpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgdGFnID0gdGFnTWF0Y2ggJiYgdGFnTWF0Y2hbMV07XG5cdCAgICB2YXIgd3JhcCA9IG1hcFt0YWddIHx8IG1hcC5lZmF1bHQ7XG5cdCAgICB2YXIgZGVwdGggPSB3cmFwWzBdO1xuXHQgICAgdmFyIHByZWZpeCA9IHdyYXBbMV07XG5cdCAgICB2YXIgc3VmZml4ID0gd3JhcFsyXTtcblx0ICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFxuXHQgICAgbm9kZS5pbm5lckhUTUwgPSBwcmVmaXggKyB0ZW1wbGF0ZVN0cmluZyArIHN1ZmZpeDtcblx0ICAgIHdoaWxlIChkZXB0aC0tKSB7XG5cdCAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgY2hpbGQ7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgd2hpbGUgKGNoaWxkID0gbm9kZS5maXJzdENoaWxkKSB7XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICghcmF3KSB7XG5cdCAgICB0cmltTm9kZShmcmFnKTtcblx0ICB9XG5cdCAgdGVtcGxhdGVDYWNoZS5wdXQoY2FjaGVLZXksIGZyYWcpO1xuXHQgIHJldHVybiBmcmFnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhIHRlbXBsYXRlIG5vZGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBub2RlVG9GcmFnbWVudChub2RlKSB7XG5cdCAgLy8gaWYgaXRzIGEgdGVtcGxhdGUgdGFnIGFuZCB0aGUgYnJvd3NlciBzdXBwb3J0cyBpdCxcblx0ICAvLyBpdHMgY29udGVudCBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQuIEhvd2V2ZXIsIGlPUyBTYWZhcmkgaGFzXG5cdCAgLy8gYnVnIHdoZW4gdXNpbmcgZGlyZWN0bHkgY2xvbmVkIHRlbXBsYXRlIGNvbnRlbnQgd2l0aCB0b3VjaFxuXHQgIC8vIGV2ZW50cyBhbmQgY2FuIGNhdXNlIGNyYXNoZXMgd2hlbiB0aGUgbm9kZXMgYXJlIHJlbW92ZWQgZnJvbSBET00sIHNvIHdlXG5cdCAgLy8gaGF2ZSB0byB0cmVhdCB0ZW1wbGF0ZSBlbGVtZW50cyBhcyBzdHJpbmcgdGVtcGxhdGVzLiAoIzI4MDUpXG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG5cdCAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLmlubmVySFRNTCk7XG5cdCAgfVxuXHQgIC8vIHNjcmlwdCB0ZW1wbGF0ZVxuXHQgIGlmIChub2RlLnRhZ05hbWUgPT09ICdTQ1JJUFQnKSB7XG5cdCAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLnRleHRDb250ZW50KTtcblx0ICB9XG5cdCAgLy8gbm9ybWFsIG5vZGUsIGNsb25lIGl0IHRvIGF2b2lkIG11dGF0aW5nIHRoZSBvcmlnaW5hbFxuXHQgIHZhciBjbG9uZWROb2RlID0gY2xvbmVOb2RlKG5vZGUpO1xuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIHZhciBjaGlsZDtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgIHdoaWxlIChjaGlsZCA9IGNsb25lZE5vZGUuZmlyc3RDaGlsZCkge1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgfVxuXHQgIHRyaW1Ob2RlKGZyYWcpO1xuXHQgIHJldHVybiBmcmFnO1xuXHR9XG5cdFxuXHQvLyBUZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIFNhZmFyaSB0ZW1wbGF0ZSBjbG9uaW5nIGJ1Z1xuXHQvLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93dWcuY2dpP2lkPTEzNzc1NVxuXHR2YXIgaGFzQnJva2VuVGVtcGxhdGUgPSAoZnVuY3Rpb24gKCkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKGluQnJvd3Nlcikge1xuXHQgICAgdmFyIGEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIGEuaW5uZXJIVE1MID0gJzx0ZW1wbGF0ZT4xPC90ZW1wbGF0ZT4nO1xuXHQgICAgcmV0dXJuICFhLmNsb25lTm9kZSh0cnVlKS5maXJzdENoaWxkLmlubmVySFRNTDtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0fSkoKTtcblx0XG5cdC8vIFRlc3QgZm9yIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgY2xvbmUgYnVnXG5cdHZhciBoYXNUZXh0YXJlYUNsb25lQnVnID0gKGZ1bmN0aW9uICgpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmIChpbkJyb3dzZXIpIHtcblx0ICAgIHZhciB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcblx0ICAgIHQucGxhY2Vob2xkZXIgPSAndCc7XG5cdCAgICByZXR1cm4gdC5jbG9uZU5vZGUodHJ1ZSkudmFsdWUgPT09ICd0Jztcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0fSkoKTtcblx0XG5cdC8qKlxuXHQgKiAxLiBEZWFsIHdpdGggU2FmYXJpIGNsb25pbmcgbmVzdGVkIDx0ZW1wbGF0ZT4gYnVnIGJ5XG5cdCAqICAgIG1hbnVhbGx5IGNsb25pbmcgYWxsIHRlbXBsYXRlIGluc3RhbmNlcy5cblx0ICogMi4gRGVhbCB3aXRoIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgYnVnIGJ5IHNldHRpbmdcblx0ICogICAgdGhlIGNvcnJlY3QgdmFsdWUgYWZ0ZXIgY2xvbmluZy5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IG5vZGVcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNsb25lTm9kZShub2RlKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3JBbGwpIHtcblx0ICAgIHJldHVybiBub2RlLmNsb25lTm9kZSgpO1xuXHQgIH1cblx0ICB2YXIgcmVzID0gbm9kZS5jbG9uZU5vZGUodHJ1ZSk7XG5cdCAgdmFyIGksIG9yaWdpbmFsLCBjbG9uZWQ7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGhhc0Jyb2tlblRlbXBsYXRlKSB7XG5cdCAgICB2YXIgdGVtcENsb25lID0gcmVzO1xuXHQgICAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG5cdCAgICAgIG5vZGUgPSBub2RlLmNvbnRlbnQ7XG5cdCAgICAgIHRlbXBDbG9uZSA9IHJlcy5jb250ZW50O1xuXHQgICAgfVxuXHQgICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG5cdCAgICBpZiAob3JpZ2luYWwubGVuZ3RoKSB7XG5cdCAgICAgIGNsb25lZCA9IHRlbXBDbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuXHQgICAgICBpID0gY2xvbmVkLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIGNsb25lZFtpXS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZU5vZGUob3JpZ2luYWxbaV0pLCBjbG9uZWRbaV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChoYXNUZXh0YXJlYUNsb25lQnVnKSB7XG5cdCAgICBpZiAobm9kZS50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG5cdCAgICAgIHJlcy52YWx1ZSA9IG5vZGUudmFsdWU7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcblx0ICAgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuXHQgICAgICAgIGNsb25lZCA9IHJlcy5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuXHQgICAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuXHQgICAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICAgIGNsb25lZFtpXS52YWx1ZSA9IG9yaWdpbmFsW2ldLnZhbHVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uIGFuZCBub3JtYWxpemVzIGl0IGludG8gYVxuXHQgKiBhIERvY3VtZW50RnJhZ21lbnQgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHBhcnRpYWwgb3IgYVxuXHQgKiBpbnN0YW5jZSB0ZW1wbGF0ZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB0ZW1wbGF0ZVxuXHQgKiAgICAgICAgUG9zc2libGUgdmFsdWVzIGluY2x1ZGU6XG5cdCAqICAgICAgICAtIERvY3VtZW50RnJhZ21lbnQgb2JqZWN0XG5cdCAqICAgICAgICAtIE5vZGUgb2JqZWN0IG9mIHR5cGUgVGVtcGxhdGVcblx0ICogICAgICAgIC0gaWQgc2VsZWN0b3I6ICcjc29tZS10ZW1wbGF0ZS1pZCdcblx0ICogICAgICAgIC0gdGVtcGxhdGUgc3RyaW5nOiAnPGRpdj48c3Bhbj57e21zZ319PC9zcGFuPjwvZGl2Pidcblx0ICogQHBhcmFtIHtCb29sZWFufSBzaG91bGRDbG9uZVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuXHQgKiAgICAgICAgaW5saW5lIEhUTUwgaW50ZXJwb2xhdGlvbi4gRG8gbm90IGNoZWNrIGZvciBpZFxuXHQgKiAgICAgICAgc2VsZWN0b3IgYW5kIGtlZXAgd2hpdGVzcGFjZSBpbiB0aGUgc3RyaW5nLlxuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCBzaG91bGRDbG9uZSwgcmF3KSB7XG5cdCAgdmFyIG5vZGUsIGZyYWc7XG5cdFxuXHQgIC8vIGlmIHRoZSB0ZW1wbGF0ZSBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQsXG5cdCAgLy8gZG8gbm90aGluZ1xuXHQgIGlmIChpc0ZyYWdtZW50KHRlbXBsYXRlKSkge1xuXHQgICAgdHJpbU5vZGUodGVtcGxhdGUpO1xuXHQgICAgcmV0dXJuIHNob3VsZENsb25lID8gY2xvbmVOb2RlKHRlbXBsYXRlKSA6IHRlbXBsYXRlO1xuXHQgIH1cblx0XG5cdCAgaWYgKHR5cGVvZiB0ZW1wbGF0ZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgIC8vIGlkIHNlbGVjdG9yXG5cdCAgICBpZiAoIXJhdyAmJiB0ZW1wbGF0ZS5jaGFyQXQoMCkgPT09ICcjJykge1xuXHQgICAgICAvLyBpZCBzZWxlY3RvciBjYW4gYmUgY2FjaGVkIHRvb1xuXHQgICAgICBmcmFnID0gaWRTZWxlY3RvckNhY2hlLmdldCh0ZW1wbGF0ZSk7XG5cdCAgICAgIGlmICghZnJhZykge1xuXHQgICAgICAgIG5vZGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0ZW1wbGF0ZS5zbGljZSgxKSk7XG5cdCAgICAgICAgaWYgKG5vZGUpIHtcblx0ICAgICAgICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudChub2RlKTtcblx0ICAgICAgICAgIC8vIHNhdmUgc2VsZWN0b3IgdG8gY2FjaGVcblx0ICAgICAgICAgIGlkU2VsZWN0b3JDYWNoZS5wdXQodGVtcGxhdGUsIGZyYWcpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm9ybWFsIHN0cmluZyB0ZW1wbGF0ZVxuXHQgICAgICBmcmFnID0gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZSwgcmF3KTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHRlbXBsYXRlLm5vZGVUeXBlKSB7XG5cdCAgICAvLyBhIGRpcmVjdCBub2RlXG5cdCAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQodGVtcGxhdGUpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIGZyYWcgJiYgc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUoZnJhZykgOiBmcmFnO1xuXHR9XG5cdFxuXHR2YXIgdGVtcGxhdGUgPSBPYmplY3QuZnJlZXplKHtcblx0ICBjbG9uZU5vZGU6IGNsb25lTm9kZSxcblx0ICBwYXJzZVRlbXBsYXRlOiBwYXJzZVRlbXBsYXRlXG5cdH0pO1xuXHRcblx0dmFyIGh0bWwgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBhIGNvbW1lbnQgbm9kZSBtZWFucyB0aGlzIGlzIGEgYmluZGluZyBmb3Jcblx0ICAgIC8vIHt7eyBpbmxpbmUgdW5lc2NhcGVkIGh0bWwgfX19XG5cdCAgICBpZiAodGhpcy5lbC5ub2RlVHlwZSA9PT0gOCkge1xuXHQgICAgICAvLyBob2xkIG5vZGVzXG5cdCAgICAgIHRoaXMubm9kZXMgPSBbXTtcblx0ICAgICAgLy8gcmVwbGFjZSB0aGUgcGxhY2Vob2xkZXIgd2l0aCBwcm9wZXIgYW5jaG9yXG5cdCAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWh0bWwnKTtcblx0ICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICAgIGlmICh0aGlzLm5vZGVzKSB7XG5cdCAgICAgIHRoaXMuc3dhcCh2YWx1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmVsLmlubmVySFRNTCA9IHZhbHVlO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHN3YXA6IGZ1bmN0aW9uIHN3YXAodmFsdWUpIHtcblx0ICAgIC8vIHJlbW92ZSBvbGQgbm9kZXNcblx0ICAgIHZhciBpID0gdGhpcy5ub2Rlcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHJlbW92ZSh0aGlzLm5vZGVzW2ldKTtcblx0ICAgIH1cblx0ICAgIC8vIGNvbnZlcnQgbmV3IHZhbHVlIHRvIGEgZnJhZ21lbnRcblx0ICAgIC8vIGRvIG5vdCBhdHRlbXB0IHRvIHJldHJpZXZlIGZyb20gaWQgc2VsZWN0b3Jcblx0ICAgIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSwgdHJ1ZSk7XG5cdCAgICAvLyBzYXZlIGEgcmVmZXJlbmNlIHRvIHRoZXNlIG5vZGVzIHNvIHdlIGNhbiByZW1vdmUgbGF0ZXJcblx0ICAgIHRoaXMubm9kZXMgPSB0b0FycmF5KGZyYWcuY2hpbGROb2Rlcyk7XG5cdCAgICBiZWZvcmUoZnJhZywgdGhpcy5hbmNob3IpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBYnN0cmFjdGlvbiBmb3IgYSBwYXJ0aWFsbHktY29tcGlsZWQgZnJhZ21lbnQuXG5cdCAqIENhbiBvcHRpb25hbGx5IGNvbXBpbGUgY29udGVudCB3aXRoIGEgY2hpbGQgc2NvcGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG5cdCAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cblx0ICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cblx0ICogQHBhcmFtIHtGcmFnbWVudH0gW3BhcmVudEZyYWddXG5cdCAqL1xuXHRmdW5jdGlvbiBGcmFnbWVudChsaW5rZXIsIHZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuXHQgIHRoaXMuY2hpbGRyZW4gPSBbXTtcblx0ICB0aGlzLmNoaWxkRnJhZ3MgPSBbXTtcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdGhpcy5zY29wZSA9IHNjb3BlO1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcblx0ICB0aGlzLnBhcmVudEZyYWcgPSBwYXJlbnRGcmFnO1xuXHQgIGlmIChwYXJlbnRGcmFnKSB7XG5cdCAgICBwYXJlbnRGcmFnLmNoaWxkRnJhZ3MucHVzaCh0aGlzKTtcblx0ICB9XG5cdCAgdGhpcy51bmxpbmsgPSBsaW5rZXIodm0sIGZyYWcsIGhvc3QsIHNjb3BlLCB0aGlzKTtcblx0ICB2YXIgc2luZ2xlID0gdGhpcy5zaW5nbGUgPSBmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICYmXG5cdCAgLy8gZG8gbm90IGdvIHNpbmdsZSBtb2RlIGlmIHRoZSBvbmx5IG5vZGUgaXMgYW4gYW5jaG9yXG5cdCAgIWZyYWcuY2hpbGROb2Rlc1swXS5fX3ZfYW5jaG9yO1xuXHQgIGlmIChzaW5nbGUpIHtcblx0ICAgIHRoaXMubm9kZSA9IGZyYWcuY2hpbGROb2Rlc1swXTtcblx0ICAgIHRoaXMuYmVmb3JlID0gc2luZ2xlQmVmb3JlO1xuXHQgICAgdGhpcy5yZW1vdmUgPSBzaW5nbGVSZW1vdmU7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMubm9kZSA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtc3RhcnQnKTtcblx0ICAgIHRoaXMuZW5kID0gY3JlYXRlQW5jaG9yKCdmcmFnbWVudC1lbmQnKTtcblx0ICAgIHRoaXMuZnJhZyA9IGZyYWc7XG5cdCAgICBwcmVwZW5kKHRoaXMubm9kZSwgZnJhZyk7XG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKHRoaXMuZW5kKTtcblx0ICAgIHRoaXMuYmVmb3JlID0gbXVsdGlCZWZvcmU7XG5cdCAgICB0aGlzLnJlbW92ZSA9IG11bHRpUmVtb3ZlO1xuXHQgIH1cblx0ICB0aGlzLm5vZGUuX192X2ZyYWcgPSB0aGlzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhdHRhY2gvZGV0YWNoIGZvciBhbGwgY29tcG9uZW50cyBjb250YWluZWQgd2l0aGluXG5cdCAqIHRoaXMgZnJhZ21lbnQuIEFsc28gZG8gc28gcmVjdXJzaXZlbHkgZm9yIGFsbCBjaGlsZFxuXHQgKiBmcmFnbWVudHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcblx0ICovXG5cdFxuXHRGcmFnbWVudC5wcm90b3R5cGUuY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuXHQgIHZhciBpLCBsO1xuXHQgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB0aGlzLmNoaWxkRnJhZ3NbaV0uY2FsbEhvb2soaG9vayk7XG5cdCAgfVxuXHQgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgaG9vayh0aGlzLmNoaWxkcmVuW2ldKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIHNpbmdsZSBub2RlIHZlcnNpb25cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNpbmdsZUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG5cdCAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuXHQgIG1ldGhvZCh0aGlzLm5vZGUsIHRhcmdldCwgdGhpcy52bSk7XG5cdCAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcblx0ICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZnJhZ21lbnQsIHNpbmdsZSBub2RlIHZlcnNpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzaW5nbGVSZW1vdmUoKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuXHQgIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcblx0ICByZW1vdmVXaXRoVHJhbnNpdGlvbih0aGlzLm5vZGUsIHRoaXMudm0sIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG5cdCAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcblx0ICAgIH1cblx0ICAgIHNlbGYuZGVzdHJveSgpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIG11bHRpLW5vZGVzIHZlcnNpb25cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG11bHRpQmVmb3JlKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcblx0ICB2YXIgdm0gPSB0aGlzLnZtO1xuXHQgIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2UgPyBiZWZvcmVXaXRoVHJhbnNpdGlvbiA6IGJlZm9yZTtcblx0ICBtYXBOb2RlUmFuZ2UodGhpcy5ub2RlLCB0aGlzLmVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcblx0ICAgIG1ldGhvZChub2RlLCB0YXJnZXQsIHZtKTtcblx0ICB9KTtcblx0ICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuXHQgICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBmcmFnbWVudCwgbXVsdGktbm9kZXMgdmVyc2lvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG11bHRpUmVtb3ZlKCkge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIHNob3VsZENhbGxSZW1vdmUgPSBpbkRvYyh0aGlzLm5vZGUpO1xuXHQgIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG5cdCAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIHRoaXMudm0sIHRoaXMuZnJhZywgZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcblx0ICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuXHQgICAgfVxuXHQgICAgc2VsZi5kZXN0cm95KCk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcmVwYXJlIHRoZSBmcmFnbWVudCBmb3IgcmVtb3ZhbC5cblx0ICovXG5cdFxuXHRGcmFnbWVudC5wcm90b3R5cGUuYmVmb3JlUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBpLCBsO1xuXHQgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAvLyBjYWxsIHRoZSBzYW1lIG1ldGhvZCByZWN1cnNpdmVseSBvbiBjaGlsZFxuXHQgICAgLy8gZnJhZ21lbnRzLCBkZXB0aC1maXJzdFxuXHQgICAgdGhpcy5jaGlsZEZyYWdzW2ldLmJlZm9yZVJlbW92ZShmYWxzZSk7XG5cdCAgfVxuXHQgIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgLy8gQ2FsbCBkZXN0cm95IGZvciBhbGwgY29udGFpbmVkIGluc3RhbmNlcyxcblx0ICAgIC8vIHdpdGggcmVtb3ZlOmZhbHNlIGFuZCBkZWZlcjp0cnVlLlxuXHQgICAgLy8gRGVmZXIgaXMgbmVjZXNzYXJ5IGJlY2F1c2Ugd2UgbmVlZCB0b1xuXHQgICAgLy8ga2VlcCB0aGUgY2hpbGRyZW4gdG8gY2FsbCBkZXRhY2ggaG9va3Ncblx0ICAgIC8vIG9uIHRoZW0uXG5cdCAgICB0aGlzLmNoaWxkcmVuW2ldLiRkZXN0cm95KGZhbHNlLCB0cnVlKTtcblx0ICB9XG5cdCAgdmFyIGRpcnMgPSB0aGlzLnVubGluay5kaXJzO1xuXHQgIGZvciAoaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgLy8gZGlzYWJsZSB0aGUgd2F0Y2hlcnMgb24gYWxsIHRoZSBkaXJlY3RpdmVzXG5cdCAgICAvLyBzbyB0aGF0IHRoZSByZW5kZXJlZCBjb250ZW50IHN0YXlzIHRoZSBzYW1lXG5cdCAgICAvLyBkdXJpbmcgcmVtb3ZhbC5cblx0ICAgIGRpcnNbaV0uX3dhdGNoZXIgJiYgZGlyc1tpXS5fd2F0Y2hlci50ZWFyZG93bigpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZXN0cm95IHRoZSBmcmFnbWVudC5cblx0ICovXG5cdFxuXHRGcmFnbWVudC5wcm90b3R5cGUuZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhpcy5wYXJlbnRGcmFnKSB7XG5cdCAgICB0aGlzLnBhcmVudEZyYWcuY2hpbGRGcmFncy4kcmVtb3ZlKHRoaXMpO1xuXHQgIH1cblx0ICB0aGlzLm5vZGUuX192X2ZyYWcgPSBudWxsO1xuXHQgIHRoaXMudW5saW5rKCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhdHRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGF0dGFjaChjaGlsZCkge1xuXHQgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuXHQgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENhbGwgZGV0YWNoIGhvb2sgZm9yIGEgVnVlIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZXRhY2goY2hpbGQpIHtcblx0ICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBsaW5rZXJDYWNoZSA9IG5ldyBDYWNoZSg1MDAwKTtcblx0XG5cdC8qKlxuXHQgKiBBIGZhY3RvcnkgdGhhdCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgaW5zdGFuY2VzIG9mIGFcblx0ICogZnJhZ21lbnQuIENhY2hlcyB0aGUgY29tcGlsZWQgbGlua2VyIGlmIHBvc3NpYmxlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtFbGVtZW50fFN0cmluZ30gZWxcblx0ICovXG5cdGZ1bmN0aW9uIEZyYWdtZW50RmFjdG9yeSh2bSwgZWwpIHtcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdmFyIHRlbXBsYXRlO1xuXHQgIHZhciBpc1N0cmluZyA9IHR5cGVvZiBlbCA9PT0gJ3N0cmluZyc7XG5cdCAgaWYgKGlzU3RyaW5nIHx8IGlzVGVtcGxhdGUoZWwpICYmICFlbC5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgdGVtcGxhdGUgPSBwYXJzZVRlbXBsYXRlKGVsLCB0cnVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGVtcGxhdGUgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG5cdCAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHQgIHRoaXMudGVtcGxhdGUgPSB0ZW1wbGF0ZTtcblx0ICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCwgYnV0IG9ubHkgZm9yIGNvbXBvbmVudHNcblx0ICB2YXIgbGlua2VyO1xuXHQgIHZhciBjaWQgPSB2bS5jb25zdHJ1Y3Rvci5jaWQ7XG5cdCAgaWYgKGNpZCA+IDApIHtcblx0ICAgIHZhciBjYWNoZUlkID0gY2lkICsgKGlzU3RyaW5nID8gZWwgOiBnZXRPdXRlckhUTUwoZWwpKTtcblx0ICAgIGxpbmtlciA9IGxpbmtlckNhY2hlLmdldChjYWNoZUlkKTtcblx0ICAgIGlmICghbGlua2VyKSB7XG5cdCAgICAgIGxpbmtlciA9IGNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKTtcblx0ICAgICAgbGlua2VyQ2FjaGUucHV0KGNhY2hlSWQsIGxpbmtlcik7XG5cdCAgICB9XG5cdCAgfSBlbHNlIHtcblx0ICAgIGxpbmtlciA9IGNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKTtcblx0ICB9XG5cdCAgdGhpcy5saW5rZXIgPSBsaW5rZXI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYSBmcmFnbWVudCBpbnN0YW5jZSB3aXRoIGdpdmVuIGhvc3QgYW5kIHNjb3BlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gaG9zdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gc2NvcGVcblx0ICogQHBhcmFtIHtGcmFnbWVudH0gcGFyZW50RnJhZ1xuXHQgKi9cblx0XG5cdEZyYWdtZW50RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG5cdCAgdmFyIGZyYWcgPSBjbG9uZU5vZGUodGhpcy50ZW1wbGF0ZSk7XG5cdCAgcmV0dXJuIG5ldyBGcmFnbWVudCh0aGlzLmxpbmtlciwgdGhpcy52bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpO1xuXHR9O1xuXHRcblx0dmFyIE9OID0gNzAwO1xuXHR2YXIgTU9ERUwgPSA4MDA7XG5cdHZhciBCSU5EID0gODUwO1xuXHR2YXIgVFJBTlNJVElPTiA9IDExMDA7XG5cdHZhciBFTCA9IDE1MDA7XG5cdHZhciBDT01QT05FTlQgPSAxNTAwO1xuXHR2YXIgUEFSVElBTCA9IDE3NTA7XG5cdHZhciBJRiA9IDIxMDA7XG5cdHZhciBGT1IgPSAyMjAwO1xuXHR2YXIgU0xPVCA9IDIzMDA7XG5cdFxuXHR2YXIgdWlkJDMgPSAwO1xuXHRcblx0dmFyIHZGb3IgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBGT1IsXG5cdCAgdGVybWluYWw6IHRydWUsXG5cdFxuXHQgIHBhcmFtczogWyd0cmFjay1ieScsICdzdGFnZ2VyJywgJ2VudGVyLXN0YWdnZXInLCAnbGVhdmUtc3RhZ2dlciddLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gc3VwcG9ydCBcIml0ZW0gaW4vb2YgaXRlbXNcIiBzeW50YXhcblx0ICAgIHZhciBpbk1hdGNoID0gdGhpcy5leHByZXNzaW9uLm1hdGNoKC8oLiopICg/OmlufG9mKSAoLiopLyk7XG5cdCAgICBpZiAoaW5NYXRjaCkge1xuXHQgICAgICB2YXIgaXRNYXRjaCA9IGluTWF0Y2hbMV0ubWF0Y2goL1xcKCguKiksKC4qKVxcKS8pO1xuXHQgICAgICBpZiAoaXRNYXRjaCkge1xuXHQgICAgICAgIHRoaXMuaXRlcmF0b3IgPSBpdE1hdGNoWzFdLnRyaW0oKTtcblx0ICAgICAgICB0aGlzLmFsaWFzID0gaXRNYXRjaFsyXS50cmltKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5hbGlhcyA9IGluTWF0Y2hbMV0udHJpbSgpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGluTWF0Y2hbMl07XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKCF0aGlzLmFsaWFzKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB2LWZvciBleHByZXNzaW9uIFwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYWxpYXMgaXMgcmVxdWlyZWQuJywgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyB1aWQgYXMgYSBjYWNoZSBpZGVudGlmaWVyXG5cdCAgICB0aGlzLmlkID0gJ19fdi1mb3JfXycgKyArK3VpZCQzO1xuXHRcblx0ICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYW4gb3B0aW9uIGxpc3QsXG5cdCAgICAvLyBzbyB0aGF0IHdlIGtub3cgaWYgd2UgbmVlZCB0byB1cGRhdGUgdGhlIDxzZWxlY3Q+J3Ncblx0ICAgIC8vIHYtbW9kZWwgd2hlbiB0aGUgb3B0aW9uIGxpc3QgaGFzIGNoYW5nZWQuXG5cdCAgICAvLyBiZWNhdXNlIHYtbW9kZWwgaGFzIGEgbG93ZXIgcHJpb3JpdHkgdGhhbiB2LWZvcixcblx0ICAgIC8vIHRoZSB2LW1vZGVsIGlzIG5vdCBib3VuZCBoZXJlIHlldCwgc28gd2UgaGF2ZSB0b1xuXHQgICAgLy8gcmV0cml2ZSBpdCBpbiB0aGUgYWN0dWFsIHVwZGF0ZU1vZGVsKCkgZnVuY3Rpb24uXG5cdCAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lO1xuXHQgICAgdGhpcy5pc09wdGlvbiA9ICh0YWcgPT09ICdPUFRJT04nIHx8IHRhZyA9PT0gJ09QVEdST1VQJykgJiYgdGhpcy5lbC5wYXJlbnROb2RlLnRhZ05hbWUgPT09ICdTRUxFQ1QnO1xuXHRcblx0ICAgIC8vIHNldHVwIGFuY2hvciBub2Rlc1xuXHQgICAgdGhpcy5zdGFydCA9IGNyZWF0ZUFuY2hvcigndi1mb3Itc3RhcnQnKTtcblx0ICAgIHRoaXMuZW5kID0gY3JlYXRlQW5jaG9yKCd2LWZvci1lbmQnKTtcblx0ICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5lbmQpO1xuXHQgICAgYmVmb3JlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTtcblx0XG5cdCAgICAvLyBjYWNoZVxuXHQgICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHQgICAgLy8gZnJhZ21lbnQgZmFjdG9yeVxuXHQgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShkYXRhKSB7XG5cdCAgICB0aGlzLmRpZmYoZGF0YSk7XG5cdCAgICB0aGlzLnVwZGF0ZVJlZigpO1xuXHQgICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIERpZmYsIGJhc2VkIG9uIG5ldyBkYXRhIGFuZCBvbGQgZGF0YSwgZGV0ZXJtaW5lIHRoZVxuXHQgICAqIG1pbmltdW0gYW1vdW50IG9mIERPTSBtYW5pcHVsYXRpb25zIG5lZWRlZCB0byBtYWtlIHRoZVxuXHQgICAqIERPTSByZWZsZWN0IHRoZSBuZXcgZGF0YSBBcnJheS5cblx0ICAgKlxuXHQgICAqIFRoZSBhbGdvcml0aG0gZGlmZnMgdGhlIG5ldyBkYXRhIEFycmF5IGJ5IHN0b3JpbmcgYVxuXHQgICAqIGhpZGRlbiByZWZlcmVuY2UgdG8gYW4gb3duZXIgdm0gaW5zdGFuY2Ugb24gcHJldmlvdXNseVxuXHQgICAqIHNlZW4gZGF0YS4gVGhpcyBhbGxvd3MgdXMgdG8gYWNoaWV2ZSBPKG4pIHdoaWNoIGlzXG5cdCAgICogYmV0dGVyIHRoYW4gYSBsZXZlbnNodGVpbiBkaXN0YW5jZSBiYXNlZCBhbGdvcml0aG0sXG5cdCAgICogd2hpY2ggaXMgTyhtICogbikuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0FycmF5fSBkYXRhXG5cdCAgICovXG5cdFxuXHQgIGRpZmY6IGZ1bmN0aW9uIGRpZmYoZGF0YSkge1xuXHQgICAgLy8gY2hlY2sgaWYgdGhlIEFycmF5IHdhcyBjb252ZXJ0ZWQgZnJvbSBhbiBPYmplY3Rcblx0ICAgIHZhciBpdGVtID0gZGF0YVswXTtcblx0ICAgIHZhciBjb252ZXJ0ZWRGcm9tT2JqZWN0ID0gdGhpcy5mcm9tT2JqZWN0ID0gaXNPYmplY3QoaXRlbSkgJiYgaGFzT3duKGl0ZW0sICcka2V5JykgJiYgaGFzT3duKGl0ZW0sICckdmFsdWUnKTtcblx0XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgb2xkRnJhZ3MgPSB0aGlzLmZyYWdzO1xuXHQgICAgdmFyIGZyYWdzID0gdGhpcy5mcmFncyA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCk7XG5cdCAgICB2YXIgYWxpYXMgPSB0aGlzLmFsaWFzO1xuXHQgICAgdmFyIGl0ZXJhdG9yID0gdGhpcy5pdGVyYXRvcjtcblx0ICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQ7XG5cdCAgICB2YXIgZW5kID0gdGhpcy5lbmQ7XG5cdCAgICB2YXIgaW5Eb2N1bWVudCA9IGluRG9jKHN0YXJ0KTtcblx0ICAgIHZhciBpbml0ID0gIW9sZEZyYWdzO1xuXHQgICAgdmFyIGksIGwsIGZyYWcsIGtleSwgdmFsdWUsIHByaW1pdGl2ZTtcblx0XG5cdCAgICAvLyBGaXJzdCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBuZXcgQXJyYXkgYW5kIGZpbGwgdXBcblx0ICAgIC8vIHRoZSBuZXcgZnJhZ3MgYXJyYXkuIElmIGEgcGllY2Ugb2YgZGF0YSBoYXMgYSBjYWNoZWRcblx0ICAgIC8vIGluc3RhbmNlIGZvciBpdCwgd2UgcmV1c2UgaXQuIE90aGVyd2lzZSBidWlsZCBhIG5ld1xuXHQgICAgLy8gaW5zdGFuY2UuXG5cdCAgICBmb3IgKGkgPSAwLCBsID0gZGF0YS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgaXRlbSA9IGRhdGFbaV07XG5cdCAgICAgIGtleSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiRrZXkgOiBudWxsO1xuXHQgICAgICB2YWx1ZSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiR2YWx1ZSA6IGl0ZW07XG5cdCAgICAgIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICAgIGZyYWcgPSAhaW5pdCAmJiB0aGlzLmdldENhY2hlZEZyYWcodmFsdWUsIGksIGtleSk7XG5cdCAgICAgIGlmIChmcmFnKSB7XG5cdCAgICAgICAgLy8gcmV1c2FibGUgZnJhZ21lbnRcblx0ICAgICAgICBmcmFnLnJldXNlZCA9IHRydWU7XG5cdCAgICAgICAgLy8gdXBkYXRlICRpbmRleFxuXHQgICAgICAgIGZyYWcuc2NvcGUuJGluZGV4ID0gaTtcblx0ICAgICAgICAvLyB1cGRhdGUgJGtleVxuXHQgICAgICAgIGlmIChrZXkpIHtcblx0ICAgICAgICAgIGZyYWcuc2NvcGUuJGtleSA9IGtleTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gdXBkYXRlIGl0ZXJhdG9yXG5cdCAgICAgICAgaWYgKGl0ZXJhdG9yKSB7XG5cdCAgICAgICAgICBmcmFnLnNjb3BlW2l0ZXJhdG9yXSA9IGtleSAhPT0gbnVsbCA/IGtleSA6IGk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHVwZGF0ZSBkYXRhIGZvciB0cmFjay1ieSwgb2JqZWN0IHJlcGVhdCAmXG5cdCAgICAgICAgLy8gcHJpbWl0aXZlIHZhbHVlcy5cblx0ICAgICAgICBpZiAodHJhY2tCeUtleSB8fCBjb252ZXJ0ZWRGcm9tT2JqZWN0IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICAgICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICBmcmFnLnNjb3BlW2FsaWFzXSA9IHZhbHVlO1xuXHQgICAgICAgICAgfSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIG5ldyBpc250YW5jZVxuXHQgICAgICAgIGZyYWcgPSB0aGlzLmNyZWF0ZSh2YWx1ZSwgYWxpYXMsIGksIGtleSk7XG5cdCAgICAgICAgZnJhZy5mcmVzaCA9ICFpbml0O1xuXHQgICAgICB9XG5cdCAgICAgIGZyYWdzW2ldID0gZnJhZztcblx0ICAgICAgaWYgKGluaXQpIHtcblx0ICAgICAgICBmcmFnLmJlZm9yZShlbmQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gd2UncmUgZG9uZSBmb3IgdGhlIGluaXRpYWwgcmVuZGVyLlxuXHQgICAgaWYgKGluaXQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIFNlY29uZCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBvbGQgZnJhZ21lbnRzIGFuZFxuXHQgICAgLy8gZGVzdHJveSB0aG9zZSB3aG8gYXJlIG5vdCByZXVzZWQgKGFuZCByZW1vdmUgdGhlbVxuXHQgICAgLy8gZnJvbSBjYWNoZSlcblx0ICAgIHZhciByZW1vdmFsSW5kZXggPSAwO1xuXHQgICAgdmFyIHRvdGFsUmVtb3ZlZCA9IG9sZEZyYWdzLmxlbmd0aCAtIGZyYWdzLmxlbmd0aDtcblx0ICAgIC8vIHdoZW4gcmVtb3ZpbmcgYSBsYXJnZSBudW1iZXIgb2YgZnJhZ21lbnRzLCB3YXRjaGVyIHJlbW92YWxcblx0ICAgIC8vIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgYm90dGxlbmVjaywgc28gd2UgYmF0Y2ggdGhlIHdhdGNoZXJcblx0ICAgIC8vIHJlbW92YWxzIGludG8gYSBzaW5nbGUgZmlsdGVyIGNhbGwhXG5cdCAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSB0cnVlO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IG9sZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBmcmFnID0gb2xkRnJhZ3NbaV07XG5cdCAgICAgIGlmICghZnJhZy5yZXVzZWQpIHtcblx0ICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG5cdCAgICAgICAgdGhpcy5yZW1vdmUoZnJhZywgcmVtb3ZhbEluZGV4KyssIHRvdGFsUmVtb3ZlZCwgaW5Eb2N1bWVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuXHQgICAgaWYgKHJlbW92YWxJbmRleCkge1xuXHQgICAgICB0aGlzLnZtLl93YXRjaGVycyA9IHRoaXMudm0uX3dhdGNoZXJzLmZpbHRlcihmdW5jdGlvbiAodykge1xuXHQgICAgICAgIHJldHVybiB3LmFjdGl2ZTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gRmluYWwgcGFzcywgbW92ZS9pbnNlcnQgbmV3IGZyYWdtZW50cyBpbnRvIHRoZVxuXHQgICAgLy8gcmlnaHQgcGxhY2UuXG5cdCAgICB2YXIgdGFyZ2V0UHJldiwgcHJldkVsLCBjdXJyZW50UHJldjtcblx0ICAgIHZhciBpbnNlcnRpb25JbmRleCA9IDA7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gZnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGZyYWcgPSBmcmFnc1tpXTtcblx0ICAgICAgLy8gdGhpcyBpcyB0aGUgZnJhZyB0aGF0IHdlIHNob3VsZCBiZSBhZnRlclxuXHQgICAgICB0YXJnZXRQcmV2ID0gZnJhZ3NbaSAtIDFdO1xuXHQgICAgICBwcmV2RWwgPSB0YXJnZXRQcmV2ID8gdGFyZ2V0UHJldi5zdGFnZ2VyQ2IgPyB0YXJnZXRQcmV2LnN0YWdnZXJBbmNob3IgOiB0YXJnZXRQcmV2LmVuZCB8fCB0YXJnZXRQcmV2Lm5vZGUgOiBzdGFydDtcblx0ICAgICAgaWYgKGZyYWcucmV1c2VkICYmICFmcmFnLnN0YWdnZXJDYikge1xuXHQgICAgICAgIGN1cnJlbnRQcmV2ID0gZmluZFByZXZGcmFnKGZyYWcsIHN0YXJ0LCB0aGlzLmlkKTtcblx0ICAgICAgICBpZiAoY3VycmVudFByZXYgIT09IHRhcmdldFByZXYgJiYgKCFjdXJyZW50UHJldiB8fFxuXHQgICAgICAgIC8vIG9wdGltaXphdGlvbiBmb3IgbW92aW5nIGEgc2luZ2xlIGl0ZW0uXG5cdCAgICAgICAgLy8gdGhhbmtzIHRvIHN1Z2dlc3Rpb25zIGJ5IEBsaXZvcmFzIGluICMxODA3XG5cdCAgICAgICAgZmluZFByZXZGcmFnKGN1cnJlbnRQcmV2LCBzdGFydCwgdGhpcy5pZCkgIT09IHRhcmdldFByZXYpKSB7XG5cdCAgICAgICAgICB0aGlzLm1vdmUoZnJhZywgcHJldkVsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gbmV3IGluc3RhbmNlLCBvciBzdGlsbCBpbiBzdGFnZ2VyLlxuXHQgICAgICAgIC8vIGluc2VydCB3aXRoIHVwZGF0ZWQgc3RhZ2dlciBpbmRleC5cblx0ICAgICAgICB0aGlzLmluc2VydChmcmFnLCBpbnNlcnRpb25JbmRleCsrLCBwcmV2RWwsIGluRG9jdW1lbnQpO1xuXHQgICAgICB9XG5cdCAgICAgIGZyYWcucmV1c2VkID0gZnJhZy5mcmVzaCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhIG5ldyBmcmFnbWVudCBpbnN0YW5jZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cblx0ICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cblx0ICAgKi9cblx0XG5cdCAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodmFsdWUsIGFsaWFzLCBpbmRleCwga2V5KSB7XG5cdCAgICB2YXIgaG9zdCA9IHRoaXMuX2hvc3Q7XG5cdCAgICAvLyBjcmVhdGUgaXRlcmF0aW9uIHNjb3BlXG5cdCAgICB2YXIgcGFyZW50U2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuXHQgICAgdmFyIHNjb3BlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZSk7XG5cdCAgICAvLyByZWYgaG9sZGVyIGZvciB0aGUgc2NvcGVcblx0ICAgIHNjb3BlLiRyZWZzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kcmVmcyk7XG5cdCAgICBzY29wZS4kZWxzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kZWxzKTtcblx0ICAgIC8vIG1ha2Ugc3VyZSBwb2ludCAkcGFyZW50IHRvIHBhcmVudCBzY29wZVxuXHQgICAgc2NvcGUuJHBhcmVudCA9IHBhcmVudFNjb3BlO1xuXHQgICAgLy8gZm9yIHR3by13YXkgYmluZGluZyBvbiBhbGlhc1xuXHQgICAgc2NvcGUuJGZvckNvbnRleHQgPSB0aGlzO1xuXHQgICAgLy8gZGVmaW5lIHNjb3BlIHByb3BlcnRpZXNcblx0ICAgIC8vIGltcG9ydGFudDogZGVmaW5lIHRoZSBzY29wZSBhbGlhcyB3aXRob3V0IGZvcmNlZCBjb252ZXJzaW9uXG5cdCAgICAvLyBzbyB0aGF0IGZyb3plbiBkYXRhIHN0cnVjdHVyZXMgcmVtYWluIG5vbi1yZWFjdGl2ZS5cblx0ICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIGFsaWFzLCB2YWx1ZSk7XG5cdCAgICB9KTtcblx0ICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGluZGV4JywgaW5kZXgpO1xuXHQgICAgaWYgKGtleSkge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRrZXknLCBrZXkpO1xuXHQgICAgfSBlbHNlIGlmIChzY29wZS4ka2V5KSB7XG5cdCAgICAgIC8vIGF2b2lkIGFjY2lkZW50YWwgZmFsbGJhY2tcblx0ICAgICAgZGVmKHNjb3BlLCAnJGtleScsIG51bGwpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuaXRlcmF0b3IpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIHRoaXMuaXRlcmF0b3IsIGtleSAhPT0gbnVsbCA/IGtleSA6IGluZGV4KTtcblx0ICAgIH1cblx0ICAgIHZhciBmcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZShob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICBmcmFnLmZvcklkID0gdGhpcy5pZDtcblx0ICAgIHRoaXMuY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KTtcblx0ICAgIHJldHVybiBmcmFnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFVwZGF0ZSB0aGUgdi1yZWYgb24gb3duZXIgdm0uXG5cdCAgICovXG5cdFxuXHQgIHVwZGF0ZVJlZjogZnVuY3Rpb24gdXBkYXRlUmVmKCkge1xuXHQgICAgdmFyIHJlZiA9IHRoaXMuZGVzY3JpcHRvci5yZWY7XG5cdCAgICBpZiAoIXJlZikgcmV0dXJuO1xuXHQgICAgdmFyIGhhc2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnM7XG5cdCAgICB2YXIgcmVmcztcblx0ICAgIGlmICghdGhpcy5mcm9tT2JqZWN0KSB7XG5cdCAgICAgIHJlZnMgPSB0aGlzLmZyYWdzLm1hcChmaW5kVm1Gcm9tRnJhZyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZWZzID0ge307XG5cdCAgICAgIHRoaXMuZnJhZ3MuZm9yRWFjaChmdW5jdGlvbiAoZnJhZykge1xuXHQgICAgICAgIHJlZnNbZnJhZy5zY29wZS4ka2V5XSA9IGZpbmRWbUZyb21GcmFnKGZyYWcpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIGhhc2hbcmVmXSA9IHJlZnM7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRm9yIG9wdGlvbiBsaXN0cywgdXBkYXRlIHRoZSBjb250YWluaW5nIHYtbW9kZWwgb25cblx0ICAgKiBwYXJlbnQgPHNlbGVjdD4uXG5cdCAgICovXG5cdFxuXHQgIHVwZGF0ZU1vZGVsOiBmdW5jdGlvbiB1cGRhdGVNb2RlbCgpIHtcblx0ICAgIGlmICh0aGlzLmlzT3B0aW9uKSB7XG5cdCAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnN0YXJ0LnBhcmVudE5vZGU7XG5cdCAgICAgIHZhciBtb2RlbCA9IHBhcmVudCAmJiBwYXJlbnQuX192X21vZGVsO1xuXHQgICAgICBpZiAobW9kZWwpIHtcblx0ICAgICAgICBtb2RlbC5mb3JjZVVwZGF0ZSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0IGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuXHQgICAqL1xuXHRcblx0ICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChmcmFnLCBpbmRleCwgcHJldkVsLCBpbkRvY3VtZW50KSB7XG5cdCAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcblx0ICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCBudWxsLCAnZW50ZXInKTtcblx0ICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcblx0ICAgICAgLy8gY3JlYXRlIGFuIGFuY2hvciBhbmQgaW5zZXJ0IGl0IHN5bmNocm9ub3VzbHksXG5cdCAgICAgIC8vIHNvIHRoYXQgd2UgY2FuIHJlc29sdmUgdGhlIGNvcnJlY3Qgb3JkZXIgd2l0aG91dFxuXHQgICAgICAvLyB3b3JyeWluZyBhYm91dCBzb21lIGVsZW1lbnRzIG5vdCBpbnNlcnRlZCB5ZXRcblx0ICAgICAgdmFyIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvcjtcblx0ICAgICAgaWYgKCFhbmNob3IpIHtcblx0ICAgICAgICBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3IgPSBjcmVhdGVBbmNob3IoJ3N0YWdnZXItYW5jaG9yJyk7XG5cdCAgICAgICAgYW5jaG9yLl9fdl9mcmFnID0gZnJhZztcblx0ICAgICAgfVxuXHQgICAgICBhZnRlcihhbmNob3IsIHByZXZFbCk7XG5cdCAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgICAgICBmcmFnLmJlZm9yZShhbmNob3IpO1xuXHQgICAgICAgIHJlbW92ZShhbmNob3IpO1xuXHQgICAgICB9KTtcblx0ICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgdGFyZ2V0ID0gcHJldkVsLm5leHRTaWJsaW5nO1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKCF0YXJnZXQpIHtcblx0ICAgICAgICAvLyByZXNldCBlbmQgYW5jaG9yIHBvc2l0aW9uIGluIGNhc2UgdGhlIHBvc2l0aW9uIHdhcyBtZXNzZWQgdXBcblx0ICAgICAgICAvLyBieSBhbiBleHRlcm5hbCBkcmFnLW4tZHJvcCBsaWJyYXJ5LlxuXHQgICAgICAgIGFmdGVyKHRoaXMuZW5kLCBwcmV2RWwpO1xuXHQgICAgICAgIHRhcmdldCA9IHRoaXMuZW5kO1xuXHQgICAgICB9XG5cdCAgICAgIGZyYWcuYmVmb3JlKHRhcmdldCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jdW1lbnRcblx0ICAgKi9cblx0XG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoZnJhZywgaW5kZXgsIHRvdGFsLCBpbkRvY3VtZW50KSB7XG5cdCAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcblx0ICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgICAgLy8gaXQncyBub3QgcG9zc2libGUgZm9yIHRoZSBzYW1lIGZyYWcgdG8gYmUgcmVtb3ZlZFxuXHQgICAgICAvLyB0d2ljZSwgc28gaWYgd2UgaGF2ZSBhIHBlbmRpbmcgc3RhZ2dlciBjYWxsYmFjayxcblx0ICAgICAgLy8gaXQgbWVhbnMgdGhpcyBmcmFnIGlzIHF1ZXVlZCBmb3IgZW50ZXIgYnV0IHJlbW92ZWRcblx0ICAgICAgLy8gYmVmb3JlIGl0cyB0cmFuc2l0aW9uIHN0YXJ0ZWQuIFNpbmNlIGl0IGlzIGFscmVhZHlcblx0ICAgICAgLy8gZGVzdHJveWVkLCB3ZSBjYW4ganVzdCBsZWF2ZSBpdCBpbiBkZXRhY2hlZCBzdGF0ZS5cblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCAnbGVhdmUnKTtcblx0ICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcblx0ICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuXHQgICAgICAgIGZyYWcucmVtb3ZlKCk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZyYWcucmVtb3ZlKCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogTW92ZSBhIGZyYWdtZW50IHRvIGEgbmV3IHBvc2l0aW9uLlxuXHQgICAqIEZvcmNlIG5vIHRyYW5zaXRpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcblx0ICAgKi9cblx0XG5cdCAgbW92ZTogZnVuY3Rpb24gbW92ZShmcmFnLCBwcmV2RWwpIHtcblx0ICAgIC8vIGZpeCBhIGNvbW1vbiBpc3N1ZSB3aXRoIFNvcnRhYmxlOlxuXHQgICAgLy8gaWYgcHJldkVsIGRvZXNuJ3QgaGF2ZSBuZXh0U2libGluZywgdGhpcyBtZWFucyBpdCdzXG5cdCAgICAvLyBiZWVuIGRyYWdnZWQgYWZ0ZXIgdGhlIGVuZCBhbmNob3IuIEp1c3QgcmUtcG9zaXRpb25cblx0ICAgIC8vIHRoZSBlbmQgYW5jaG9yIHRvIHRoZSBlbmQgb2YgdGhlIGNvbnRhaW5lci5cblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFwcmV2RWwubmV4dFNpYmxpbmcpIHtcblx0ICAgICAgdGhpcy5lbmQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG5cdCAgICB9XG5cdCAgICBmcmFnLmJlZm9yZShwcmV2RWwubmV4dFNpYmxpbmcsIGZhbHNlKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDYWNoZSBhIGZyYWdtZW50IHVzaW5nIHRyYWNrLWJ5IG9yIHRoZSBvYmplY3Qga2V5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cblx0ICAgKi9cblx0XG5cdCAgY2FjaGVGcmFnOiBmdW5jdGlvbiBjYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpIHtcblx0ICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcblx0ICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGU7XG5cdCAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcblx0ICAgIHZhciBpZDtcblx0ICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcblx0ICAgICAgaWYgKCFjYWNoZVtpZF0pIHtcblx0ICAgICAgICBjYWNoZVtpZF0gPSBmcmFnO1xuXHQgICAgICB9IGVsc2UgaWYgKHRyYWNrQnlLZXkgIT09ICckaW5kZXgnKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBpZCA9IHRoaXMuaWQ7XG5cdCAgICAgIGlmIChoYXNPd24odmFsdWUsIGlkKSkge1xuXHQgICAgICAgIGlmICh2YWx1ZVtpZF0gPT09IG51bGwpIHtcblx0ICAgICAgICAgIHZhbHVlW2lkXSA9IGZyYWc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAoT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWx1ZSkpIHtcblx0ICAgICAgICBkZWYodmFsdWUsIGlkLCBmcmFnKTtcblx0ICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgd2FybignRnJvemVuIHYtZm9yIG9iamVjdHMgY2Fubm90IGJlIGF1dG9tYXRpY2FsbHkgdHJhY2tlZCwgbWFrZSBzdXJlIHRvICcgKyAncHJvdmlkZSBhIHRyYWNrLWJ5IGtleS4nKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgZnJhZy5yYXcgPSB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBHZXQgYSBjYWNoZWQgZnJhZ21lbnQgZnJvbSB0aGUgdmFsdWUvaW5kZXgva2V5XG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuXHQgICAqL1xuXHRcblx0ICBnZXRDYWNoZWRGcmFnOiBmdW5jdGlvbiBnZXRDYWNoZWRGcmFnKHZhbHVlLCBpbmRleCwga2V5KSB7XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcblx0ICAgIHZhciBmcmFnO1xuXHQgICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcblx0ICAgICAgZnJhZyA9IHRoaXMuY2FjaGVbaWRdO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZnJhZyA9IHZhbHVlW3RoaXMuaWRdO1xuXHQgICAgfVxuXHQgICAgaWYgKGZyYWcgJiYgKGZyYWcucmV1c2VkIHx8IGZyYWcuZnJlc2gpKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmcmFnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIERlbGV0ZSBhIGZyYWdtZW50IGZyb20gY2FjaGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICovXG5cdFxuXHQgIGRlbGV0ZUNhY2hlZEZyYWc6IGZ1bmN0aW9uIGRlbGV0ZUNhY2hlZEZyYWcoZnJhZykge1xuXHQgICAgdmFyIHZhbHVlID0gZnJhZy5yYXc7XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgc2NvcGUgPSBmcmFnLnNjb3BlO1xuXHQgICAgdmFyIGluZGV4ID0gc2NvcGUuJGluZGV4O1xuXHQgICAgLy8gZml4ICM5NDg6IGF2b2lkIGFjY2lkZW50YWxseSBmYWxsIHRocm91Z2ggdG9cblx0ICAgIC8vIGEgcGFyZW50IHJlcGVhdGVyIHdoaWNoIGhhcHBlbnMgdG8gaGF2ZSAka2V5LlxuXHQgICAgdmFyIGtleSA9IGhhc093bihzY29wZSwgJyRrZXknKSAmJiBzY29wZS4ka2V5O1xuXHQgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICBpZiAodHJhY2tCeUtleSB8fCBrZXkgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuXHQgICAgICB0aGlzLmNhY2hlW2lkXSA9IG51bGw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YWx1ZVt0aGlzLmlkXSA9IG51bGw7XG5cdCAgICAgIGZyYWcucmF3ID0gbnVsbDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBHZXQgdGhlIHN0YWdnZXIgYW1vdW50IGZvciBhbiBpbnNlcnRpb24vcmVtb3ZhbC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgICAqL1xuXHRcblx0ICBnZXRTdGFnZ2VyOiBmdW5jdGlvbiBnZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgdHlwZSkge1xuXHQgICAgdHlwZSA9IHR5cGUgKyAnU3RhZ2dlcic7XG5cdCAgICB2YXIgdHJhbnMgPSBmcmFnLm5vZGUuX192X3RyYW5zO1xuXHQgICAgdmFyIGhvb2tzID0gdHJhbnMgJiYgdHJhbnMuaG9va3M7XG5cdCAgICB2YXIgaG9vayA9IGhvb2tzICYmIChob29rc1t0eXBlXSB8fCBob29rcy5zdGFnZ2VyKTtcblx0ICAgIHJldHVybiBob29rID8gaG9vay5jYWxsKGZyYWcsIGluZGV4LCB0b3RhbCkgOiBpbmRleCAqIHBhcnNlSW50KHRoaXMucGFyYW1zW3R5cGVdIHx8IHRoaXMucGFyYW1zLnN0YWdnZXIsIDEwKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBQcmUtcHJvY2VzcyB0aGUgdmFsdWUgYmVmb3JlIHBpcGluZyBpdCB0aHJvdWdoIHRoZVxuXHQgICAqIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG5cdCAgICovXG5cdFxuXHQgIF9wcmVQcm9jZXNzOiBmdW5jdGlvbiBfcHJlUHJvY2Vzcyh2YWx1ZSkge1xuXHQgICAgLy8gcmVnYXJkbGVzcyBvZiB0eXBlLCBzdG9yZSB0aGUgdW4tZmlsdGVyZWQgcmF3IHZhbHVlLlxuXHQgICAgdGhpcy5yYXdWYWx1ZSA9IHZhbHVlO1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFBvc3QtcHJvY2VzcyB0aGUgdmFsdWUgYWZ0ZXIgaXQgaGFzIGJlZW4gcGlwZWQgdGhyb3VnaFxuXHQgICAqIHRoZSBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuXHQgICAqXG5cdCAgICogSXQgaXMgbmVjZXNzYXJ5IGZvciB0aGlzIHRvIGJlIGNhbGxlZCBkdXJpbmcgdGhlXG5cdCAgICogd2F0Y2hlcidzIGRlcGVuZGVuY3kgY29sbGVjdGlvbiBwaGFzZSBiZWNhdXNlIHdlIHdhbnRcblx0ICAgKiB0aGUgdi1mb3IgdG8gdXBkYXRlIHdoZW4gdGhlIHNvdXJjZSBPYmplY3QgaXMgbXV0YXRlZC5cblx0ICAgKi9cblx0XG5cdCAgX3Bvc3RQcm9jZXNzOiBmdW5jdGlvbiBfcG9zdFByb2Nlc3ModmFsdWUpIHtcblx0ICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG5cdCAgICAgIC8vIGNvbnZlcnQgcGxhaW4gb2JqZWN0IHRvIGFycmF5LlxuXHQgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcblx0ICAgICAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgICAgdmFyIHJlcyA9IG5ldyBBcnJheShpKTtcblx0ICAgICAgdmFyIGtleTtcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgICAgcmVzW2ldID0ge1xuXHQgICAgICAgICAgJGtleToga2V5LFxuXHQgICAgICAgICAgJHZhbHVlOiB2YWx1ZVtrZXldXG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gcmVzO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbHVlKSkge1xuXHQgICAgICAgIHZhbHVlID0gcmFuZ2UodmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB2YWx1ZSB8fCBbXTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG5cdCAgICAgICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmc1t0aGlzLmRlc2NyaXB0b3IucmVmXSA9IG51bGw7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5mcmFncykge1xuXHQgICAgICB2YXIgaSA9IHRoaXMuZnJhZ3MubGVuZ3RoO1xuXHQgICAgICB2YXIgZnJhZztcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIGZyYWcgPSB0aGlzLmZyYWdzW2ldO1xuXHQgICAgICAgIHRoaXMuZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKTtcblx0ICAgICAgICBmcmFnLmRlc3Ryb3koKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBIZWxwZXIgdG8gZmluZCB0aGUgcHJldmlvdXMgZWxlbWVudCB0aGF0IGlzIGEgZnJhZ21lbnRcblx0ICogYW5jaG9yLiBUaGlzIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIGEgZGVzdHJveWVkIGZyYWcnc1xuXHQgKiBlbGVtZW50IGNvdWxkIHN0aWxsIGJlIGxpbmdlcmluZyBpbiB0aGUgRE9NIGJlZm9yZSBpdHNcblx0ICogbGVhdmluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLCBidXQgaXRzIGluc2VydGVkIGZsYWdcblx0ICogc2hvdWxkIGhhdmUgYmVlbiBzZXQgdG8gZmFsc2Ugc28gd2UgY2FuIHNraXAgdGhlbS5cblx0ICpcblx0ICogSWYgdGhpcyBpcyBhIGJsb2NrIHJlcGVhdCwgd2Ugd2FudCB0byBtYWtlIHN1cmUgd2Ugb25seVxuXHQgKiByZXR1cm4gZnJhZyB0aGF0IGlzIGJvdW5kIHRvIHRoaXMgdi1mb3IuIChzZWUgIzkyOSlcblx0ICpcblx0ICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcGFyYW0ge0NvbW1lbnR8VGV4dH0gYW5jaG9yXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuXHQgKiBAcmV0dXJuIHtGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kUHJldkZyYWcoZnJhZywgYW5jaG9yLCBpZCkge1xuXHQgIHZhciBlbCA9IGZyYWcubm9kZS5wcmV2aW91c1NpYmxpbmc7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCFlbCkgcmV0dXJuO1xuXHQgIGZyYWcgPSBlbC5fX3ZfZnJhZztcblx0ICB3aGlsZSAoKCFmcmFnIHx8IGZyYWcuZm9ySWQgIT09IGlkIHx8ICFmcmFnLmluc2VydGVkKSAmJiBlbCAhPT0gYW5jaG9yKSB7XG5cdCAgICBlbCA9IGVsLnByZXZpb3VzU2libGluZztcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFlbCkgcmV0dXJuO1xuXHQgICAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuXHQgIH1cblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbmQgYSB2bSBmcm9tIGEgZnJhZ21lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmaW5kVm1Gcm9tRnJhZyhmcmFnKSB7XG5cdCAgdmFyIG5vZGUgPSBmcmFnLm5vZGU7XG5cdCAgLy8gaGFuZGxlIG11bHRpLW5vZGUgZnJhZ1xuXHQgIGlmIChmcmFnLmVuZCkge1xuXHQgICAgd2hpbGUgKCFub2RlLl9fdnVlX18gJiYgbm9kZSAhPT0gZnJhZy5lbmQgJiYgbm9kZS5uZXh0U2libGluZykge1xuXHQgICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIG5vZGUuX192dWVfXztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENyZWF0ZSBhIHJhbmdlIGFycmF5IGZyb20gZ2l2ZW4gbnVtYmVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gblxuXHQgKiBAcmV0dXJuIHtBcnJheX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByYW5nZShuKSB7XG5cdCAgdmFyIGkgPSAtMTtcblx0ICB2YXIgcmV0ID0gbmV3IEFycmF5KE1hdGguZmxvb3IobikpO1xuXHQgIHdoaWxlICgrK2kgPCBuKSB7XG5cdCAgICByZXRbaV0gPSBpO1xuXHQgIH1cblx0ICByZXR1cm4gcmV0O1xuXHR9XG5cdFxuXHQvKipcblx0ICogR2V0IHRoZSB0cmFjayBieSBrZXkgZm9yIGFuIGl0ZW0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtTdHJpbmd9IFt0cmFja0J5S2V5XVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpIHtcblx0ICByZXR1cm4gdHJhY2tCeUtleSA/IHRyYWNrQnlLZXkgPT09ICckaW5kZXgnID8gaW5kZXggOiB0cmFja0J5S2V5LmNoYXJBdCgwKS5tYXRjaCgvXFx3LykgPyBnZXRQYXRoKHZhbHVlLCB0cmFja0J5S2V5KSA6IHZhbHVlW3RyYWNrQnlLZXldIDoga2V5IHx8IHZhbHVlO1xuXHR9XG5cdFxuXHRpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgIHZGb3Iud2FybkR1cGxpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgd2FybignRHVwbGljYXRlIHZhbHVlIGZvdW5kIGluIHYtZm9yPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnLiBVc2UgdHJhY2stYnk9XCIkaW5kZXhcIiBpZiAnICsgJ3lvdSBhcmUgZXhwZWN0aW5nIGR1cGxpY2F0ZSB2YWx1ZXMuJywgdGhpcy52bSk7XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIHZJZiA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IElGLFxuXHQgIHRlcm1pbmFsOiB0cnVlLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGlmICghZWwuX192dWVfXykge1xuXHQgICAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG5cdCAgICAgIHZhciBuZXh0ID0gZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuXHQgICAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuXHQgICAgICAgIHJlbW92ZShuZXh0KTtcblx0ICAgICAgICB0aGlzLmVsc2VFbCA9IG5leHQ7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gY2hlY2sgbWFpbiBibG9ja1xuXHQgICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1pZicpO1xuXHQgICAgICByZXBsYWNlKGVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtaWY9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGNhbm5vdCBiZSAnICsgJ3VzZWQgb24gYW4gaW5zdGFuY2Ugcm9vdCBlbGVtZW50LicsIHRoaXMudm0pO1xuXHQgICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAodGhpcy5pbnZhbGlkKSByZXR1cm47XG5cdCAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgaWYgKCF0aGlzLmZyYWcpIHtcblx0ICAgICAgICB0aGlzLmluc2VydCgpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLnJlbW92ZSgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KCkge1xuXHQgICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcblx0ICAgICAgdGhpcy5lbHNlRnJhZy5yZW1vdmUoKTtcblx0ICAgICAgdGhpcy5lbHNlRnJhZyA9IG51bGw7XG5cdCAgICB9XG5cdCAgICAvLyBsYXp5IGluaXQgZmFjdG9yeVxuXHQgICAgaWYgKCF0aGlzLmZhY3RvcnkpIHtcblx0ICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICAgIH1cblx0ICAgIHRoaXMuZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgdGhpcy5mcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG5cdCAgfSxcblx0XG5cdCAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG5cdCAgICBpZiAodGhpcy5mcmFnKSB7XG5cdCAgICAgIHRoaXMuZnJhZy5yZW1vdmUoKTtcblx0ICAgICAgdGhpcy5mcmFnID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLmVsc2VFbCAmJiAhdGhpcy5lbHNlRnJhZykge1xuXHQgICAgICBpZiAoIXRoaXMuZWxzZUZhY3RvcnkpIHtcblx0ICAgICAgICB0aGlzLmVsc2VGYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLmVsc2VFbC5fY29udGV4dCB8fCB0aGlzLnZtLCB0aGlzLmVsc2VFbCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5lbHNlRnJhZyA9IHRoaXMuZWxzZUZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgICAgdGhpcy5lbHNlRnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMuZnJhZykge1xuXHQgICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcblx0ICAgICAgdGhpcy5lbHNlRnJhZy5kZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHNob3cgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG5cdCAgICB2YXIgbmV4dCA9IHRoaXMuZWwubmV4dEVsZW1lbnRTaWJsaW5nO1xuXHQgICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcblx0ICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB0aGlzLmFwcGx5KHRoaXMuZWwsIHZhbHVlKTtcblx0ICAgIGlmICh0aGlzLmVsc2VFbCkge1xuXHQgICAgICB0aGlzLmFwcGx5KHRoaXMuZWxzZUVsLCAhdmFsdWUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGFwcGx5OiBmdW5jdGlvbiBhcHBseShlbCwgdmFsdWUpIHtcblx0ICAgIGlmIChpbkRvYyhlbCkpIHtcblx0ICAgICAgYXBwbHlUcmFuc2l0aW9uKGVsLCB2YWx1ZSA/IDEgOiAtMSwgdG9nZ2xlLCB0aGlzLnZtKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRvZ2dsZSgpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuXHQgICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyAnJyA6ICdub25lJztcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgdGV4dCQyID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHZhciBpc1JhbmdlID0gZWwudHlwZSA9PT0gJ3JhbmdlJztcblx0ICAgIHZhciBsYXp5ID0gdGhpcy5wYXJhbXMubGF6eTtcblx0ICAgIHZhciBudW1iZXIgPSB0aGlzLnBhcmFtcy5udW1iZXI7XG5cdCAgICB2YXIgZGVib3VuY2UgPSB0aGlzLnBhcmFtcy5kZWJvdW5jZTtcblx0XG5cdCAgICAvLyBoYW5kbGUgY29tcG9zaXRpb24gZXZlbnRzLlxuXHQgICAgLy8gICBodHRwOi8vYmxvZy5ldmFueW91Lm1lLzIwMTQvMDEvMDMvY29tcG9zaXRpb24tZXZlbnQvXG5cdCAgICAvLyBza2lwIHRoaXMgZm9yIEFuZHJvaWQgYmVjYXVzZSBpdCBoYW5kbGVzIGNvbXBvc2l0aW9uXG5cdCAgICAvLyBldmVudHMgcXVpdGUgZGlmZmVyZW50bHkuIEFuZHJvaWQgZG9lc24ndCB0cmlnZ2VyXG5cdCAgICAvLyBjb21wb3NpdGlvbiBldmVudHMgZm9yIGxhbmd1YWdlIGlucHV0IG1ldGhvZHMgZS5nLlxuXHQgICAgLy8gQ2hpbmVzZSwgYnV0IGluc3RlYWQgdHJpZ2dlcnMgdGhlbSBmb3Igc3BlbGxpbmdcblx0ICAgIC8vIHN1Z2dlc3Rpb25zLi4uIChzZWUgRGlzY3Vzc2lvbi8jMTYyKVxuXHQgICAgdmFyIGNvbXBvc2luZyA9IGZhbHNlO1xuXHQgICAgaWYgKCFpc0FuZHJvaWQgJiYgIWlzUmFuZ2UpIHtcblx0ICAgICAgdGhpcy5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjb21wb3NpbmcgPSB0cnVlO1xuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5vbignY29tcG9zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY29tcG9zaW5nID0gZmFsc2U7XG5cdCAgICAgICAgLy8gaW4gSUUxMSB0aGUgXCJjb21wb3NpdGlvbmVuZFwiIGV2ZW50IGZpcmVzIEFGVEVSXG5cdCAgICAgICAgLy8gdGhlIFwiaW5wdXRcIiBldmVudCwgc28gdGhlIGlucHV0IGhhbmRsZXIgaXMgYmxvY2tlZFxuXHQgICAgICAgIC8vIGF0IHRoZSBlbmQuLi4gaGF2ZSB0byBjYWxsIGl0IGhlcmUuXG5cdCAgICAgICAgLy9cblx0ICAgICAgICAvLyAjMTMyNzogaW4gbGF6eSBtb2RlIHRoaXMgaXMgdW5lY2Vzc2FyeS5cblx0ICAgICAgICBpZiAoIWxhenkpIHtcblx0ICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHByZXZlbnQgbWVzc2luZyB3aXRoIHRoZSBpbnB1dCB3aGVuIHVzZXIgaXMgdHlwaW5nLFxuXHQgICAgLy8gYW5kIGZvcmNlIHVwZGF0ZSBvbiBibHVyLlxuXHQgICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG5cdCAgICBpZiAoIWlzUmFuZ2UgJiYgIWxhenkpIHtcblx0ICAgICAgdGhpcy5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5mb2N1c2VkID0gdHJ1ZTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5mb2N1c2VkID0gZmFsc2U7XG5cdCAgICAgICAgLy8gZG8gbm90IHN5bmMgdmFsdWUgYWZ0ZXIgZnJhZ21lbnQgcmVtb3ZhbCAoIzIwMTcpXG5cdCAgICAgICAgaWYgKCFzZWxmLl9mcmFnIHx8IHNlbGYuX2ZyYWcuaW5zZXJ0ZWQpIHtcblx0ICAgICAgICAgIHNlbGYucmF3TGlzdGVuZXIoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIE5vdyBhdHRhY2ggdGhlIG1haW4gbGlzdGVuZXJcblx0ICAgIHRoaXMubGlzdGVuZXIgPSB0aGlzLnJhd0xpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoY29tcG9zaW5nIHx8ICFzZWxmLl9ib3VuZCkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgdmFsID0gbnVtYmVyIHx8IGlzUmFuZ2UgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcblx0ICAgICAgc2VsZi5zZXQodmFsKTtcblx0ICAgICAgLy8gZm9yY2UgdXBkYXRlIG9uIG5leHQgdGljayB0byBhdm9pZCBsb2NrICYgc2FtZSB2YWx1ZVxuXHQgICAgICAvLyBhbHNvIG9ubHkgdXBkYXRlIHdoZW4gdXNlciBpcyBub3QgdHlwaW5nXG5cdCAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBpZiAoc2VsZi5fYm91bmQgJiYgIXNlbGYuZm9jdXNlZCkge1xuXHQgICAgICAgICAgc2VsZi51cGRhdGUoc2VsZi5fd2F0Y2hlci52YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gYXBwbHkgZGVib3VuY2Vcblx0ICAgIGlmIChkZWJvdW5jZSkge1xuXHQgICAgICB0aGlzLmxpc3RlbmVyID0gX2RlYm91bmNlKHRoaXMubGlzdGVuZXIsIGRlYm91bmNlKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBTdXBwb3J0IGpRdWVyeSBldmVudHMsIHNpbmNlIGpRdWVyeS50cmlnZ2VyKCkgZG9lc24ndFxuXHQgICAgLy8gdHJpZ2dlciBuYXRpdmUgZXZlbnRzIGluIHNvbWUgY2FzZXMgYW5kIHNvbWUgcGx1Z2luc1xuXHQgICAgLy8gcmVseSBvbiAkLnRyaWdnZXIoKVxuXHQgICAgLy9cblx0ICAgIC8vIFdlIHdhbnQgdG8gbWFrZSBzdXJlIGlmIGEgbGlzdGVuZXIgaXMgYXR0YWNoZWQgdXNpbmdcblx0ICAgIC8vIGpRdWVyeSwgaXQgaXMgYWxzbyByZW1vdmVkIHdpdGggalF1ZXJ5LCB0aGF0J3Mgd2h5XG5cdCAgICAvLyB3ZSBkbyB0aGUgY2hlY2sgZm9yIGVhY2ggZGlyZWN0aXZlIGluc3RhbmNlIGFuZFxuXHQgICAgLy8gc3RvcmUgdGhhdCBjaGVjayByZXN1bHQgb24gaXRzZWxmLiBUaGlzIGFsc28gYWxsb3dzXG5cdCAgICAvLyBlYXNpZXIgdGVzdCBjb3ZlcmFnZSBjb250cm9sIGJ5IHVuc2V0dGluZyB0aGUgZ2xvYmFsXG5cdCAgICAvLyBqUXVlcnkgdmFyaWFibGUgaW4gdGVzdHMuXG5cdCAgICB0aGlzLmhhc2pRdWVyeSA9IHR5cGVvZiBqUXVlcnkgPT09ICdmdW5jdGlvbic7XG5cdCAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcblx0ICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vbiA/ICdvbicgOiAnYmluZCc7XG5cdCAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG5cdCAgICAgIGlmICghbGF6eSkge1xuXHQgICAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG5cdCAgICAgIGlmICghbGF6eSkge1xuXHQgICAgICAgIHRoaXMub24oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBJRTkgZG9lc24ndCBmaXJlIGlucHV0IGV2ZW50IG9uIGJhY2tzcGFjZS9kZWwvY3V0XG5cdCAgICBpZiAoIWxhenkgJiYgaXNJRTkpIHtcblx0ICAgICAgdGhpcy5vbignY3V0JywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG5leHRUaWNrKHNlbGYubGlzdGVuZXIpO1xuXHQgICAgICB9KTtcblx0ICAgICAgdGhpcy5vbigna2V5dXAnLCBmdW5jdGlvbiAoZSkge1xuXHQgICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQ2IHx8IGUua2V5Q29kZSA9PT0gOCkge1xuXHQgICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gc2V0IGluaXRpYWwgdmFsdWUgaWYgcHJlc2VudFxuXHQgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndmFsdWUnKSB8fCBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnICYmIGVsLnZhbHVlLnRyaW0oKSkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIC8vICMzMDI5IG9ubHkgdXBkYXRlIHdoZW4gdGhlIHZhbHVlIGNoYW5nZXMuIFRoaXMgcHJldmVudFxuXHQgICAgLy8gYnJvd3NlcnMgZnJvbSBvdmVyd3JpdGluZyB2YWx1ZXMgbGlrZSBzZWxlY3Rpb25TdGFydFxuXHQgICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuXHQgICAgaWYgKHZhbHVlICE9PSB0aGlzLmVsLnZhbHVlKSB0aGlzLmVsLnZhbHVlID0gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG5cdCAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub2ZmID8gJ29mZicgOiAndW5iaW5kJztcblx0ICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciByYWRpbyA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdFxuXHQgICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgLy8gdmFsdWUgb3ZlcndyaXRlIHZpYSB2LWJpbmQ6dmFsdWVcblx0ICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSkge1xuXHQgICAgICAgIHJldHVybiBlbC5fdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHZhbCA9IGVsLnZhbHVlO1xuXHQgICAgICBpZiAoc2VsZi5wYXJhbXMubnVtYmVyKSB7XG5cdCAgICAgICAgdmFsID0gdG9OdW1iZXIodmFsKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsO1xuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBzZWxmLnNldChzZWxmLmdldFZhbHVlKCkpO1xuXHQgICAgfTtcblx0ICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHRcblx0ICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHRoaXMuZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHNlbGVjdCA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0XG5cdCAgICAvLyBtZXRob2QgdG8gZm9yY2UgdXBkYXRlIERPTSB1c2luZyBsYXRlc3QgdmFsdWUuXG5cdCAgICB0aGlzLmZvcmNlVXBkYXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoc2VsZi5fd2F0Y2hlcikge1xuXHQgICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIuZ2V0KCkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGNoZWNrIGlmIHRoaXMgaXMgYSBtdWx0aXBsZSBzZWxlY3Rcblx0ICAgIHZhciBtdWx0aXBsZSA9IHRoaXMubXVsdGlwbGUgPSBlbC5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJyk7XG5cdFxuXHQgICAgLy8gYXR0YWNoIGxpc3RlbmVyXG5cdCAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUpO1xuXHQgICAgICB2YWx1ZSA9IHNlbGYucGFyYW1zLm51bWJlciA/IGlzQXJyYXkodmFsdWUpID8gdmFsdWUubWFwKHRvTnVtYmVyKSA6IHRvTnVtYmVyKHZhbHVlKSA6IHZhbHVlO1xuXHQgICAgICBzZWxmLnNldCh2YWx1ZSk7XG5cdCAgICB9O1xuXHQgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdFxuXHQgICAgLy8gaWYgaGFzIGluaXRpYWwgdmFsdWUsIHNldCBhZnRlckJpbmRcblx0ICAgIHZhciBpbml0VmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUsIHRydWUpO1xuXHQgICAgaWYgKG11bHRpcGxlICYmIGluaXRWYWx1ZS5sZW5ndGggfHwgIW11bHRpcGxlICYmIGluaXRWYWx1ZSAhPT0gbnVsbCkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gQWxsIG1ham9yIGJyb3dzZXJzIGV4Y2VwdCBGaXJlZm94IHJlc2V0c1xuXHQgICAgLy8gc2VsZWN0ZWRJbmRleCB3aXRoIHZhbHVlIC0xIHRvIDAgd2hlbiB0aGUgZWxlbWVudFxuXHQgICAgLy8gaXMgYXBwZW5kZWQgdG8gYSBuZXcgcGFyZW50LCB0aGVyZWZvcmUgd2UgaGF2ZSB0b1xuXHQgICAgLy8gZm9yY2UgYSBET00gdXBkYXRlIHdoZW5ldmVyIHRoYXQgaGFwcGVucy4uLlxuXHQgICAgdGhpcy52bS4kb24oJ2hvb2s6YXR0YWNoZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIG5leHRUaWNrKF90aGlzLmZvcmNlVXBkYXRlKTtcblx0ICAgIH0pO1xuXHQgICAgaWYgKCFpbkRvYyhlbCkpIHtcblx0ICAgICAgbmV4dFRpY2sodGhpcy5mb3JjZVVwZGF0ZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG5cdCAgICB2YXIgbXVsdGkgPSB0aGlzLm11bHRpcGxlICYmIGlzQXJyYXkodmFsdWUpO1xuXHQgICAgdmFyIG9wdGlvbnMgPSBlbC5vcHRpb25zO1xuXHQgICAgdmFyIGkgPSBvcHRpb25zLmxlbmd0aDtcblx0ICAgIHZhciBvcCwgdmFsO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBvcCA9IG9wdGlvbnNbaV07XG5cdCAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuXHQgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cblx0ICAgICAgb3Auc2VsZWN0ZWQgPSBtdWx0aSA/IGluZGV4T2YkMSh2YWx1ZSwgdmFsKSA+IC0xIDogbG9vc2VFcXVhbCh2YWx1ZSwgdmFsKTtcblx0ICAgICAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgICB0aGlzLnZtLiRvZmYoJ2hvb2s6YXR0YWNoZWQnLCB0aGlzLmZvcmNlVXBkYXRlKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IHNlbGVjdCB2YWx1ZVxuXHQgKlxuXHQgKiBAcGFyYW0ge1NlbGVjdEVsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gbXVsdGlcblx0ICogQHBhcmFtIHtCb29sZWFufSBpbml0XG5cdCAqIEByZXR1cm4ge0FycmF5fCp9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0VmFsdWUoZWwsIG11bHRpLCBpbml0KSB7XG5cdCAgdmFyIHJlcyA9IG11bHRpID8gW10gOiBudWxsO1xuXHQgIHZhciBvcCwgdmFsLCBzZWxlY3RlZDtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGVsLm9wdGlvbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBvcCA9IGVsLm9wdGlvbnNbaV07XG5cdCAgICBzZWxlY3RlZCA9IGluaXQgPyBvcC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgOiBvcC5zZWxlY3RlZDtcblx0ICAgIGlmIChzZWxlY3RlZCkge1xuXHQgICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcblx0ICAgICAgaWYgKG11bHRpKSB7XG5cdCAgICAgICAgcmVzLnB1c2godmFsKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gdmFsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBOYXRpdmUgQXJyYXkuaW5kZXhPZiB1c2VzIHN0cmljdCBlcXVhbCwgYnV0IGluIHRoaXNcblx0ICogY2FzZSB3ZSBuZWVkIHRvIG1hdGNoIHN0cmluZy9udW1iZXJzIHdpdGggY3VzdG9tIGVxdWFsLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbmRleE9mJDEoYXJyLCB2YWwpIHtcblx0ICB2YXIgaSA9IGFyci5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7XG5cdCAgICAgIHJldHVybiBpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdHZhciBjaGVja2JveCA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdFxuXHQgICAgdGhpcy5nZXRWYWx1ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgcmV0dXJuIGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IGVsLl92YWx1ZSA6IHNlbGYucGFyYW1zLm51bWJlciA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuXHQgICAgfTtcblx0XG5cdCAgICBmdW5jdGlvbiBnZXRCb29sZWFuVmFsdWUoKSB7XG5cdCAgICAgIHZhciB2YWwgPSBlbC5jaGVja2VkO1xuXHQgICAgICBpZiAodmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcblx0ICAgICAgICByZXR1cm4gZWwuX3RydWVWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoIXZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX2ZhbHNlVmFsdWUnKSkge1xuXHQgICAgICAgIHJldHVybiBlbC5fZmFsc2VWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHZhciBtb2RlbCA9IHNlbGYuX3dhdGNoZXIudmFsdWU7XG5cdCAgICAgIGlmIChpc0FycmF5KG1vZGVsKSkge1xuXHQgICAgICAgIHZhciB2YWwgPSBzZWxmLmdldFZhbHVlKCk7XG5cdCAgICAgICAgaWYgKGVsLmNoZWNrZWQpIHtcblx0ICAgICAgICAgIGlmIChpbmRleE9mKG1vZGVsLCB2YWwpIDwgMCkge1xuXHQgICAgICAgICAgICBtb2RlbC5wdXNoKHZhbCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIG1vZGVsLiRyZW1vdmUodmFsKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc2VsZi5zZXQoZ2V0Qm9vbGVhblZhbHVlKCkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICBlbC5jaGVja2VkID0gaW5kZXhPZih2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKSA+IC0xO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdHJ1ZVZhbHVlJykpIHtcblx0ICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZWwuX3RydWVWYWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZWwuY2hlY2tlZCA9ICEhdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgaGFuZGxlcnMgPSB7XG5cdCAgdGV4dDogdGV4dCQyLFxuXHQgIHJhZGlvOiByYWRpbyxcblx0ICBzZWxlY3Q6IHNlbGVjdCxcblx0ICBjaGVja2JveDogY2hlY2tib3hcblx0fTtcblx0XG5cdHZhciBtb2RlbCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IE1PREVMLFxuXHQgIHR3b1dheTogdHJ1ZSxcblx0ICBoYW5kbGVyczogaGFuZGxlcnMsXG5cdCAgcGFyYW1zOiBbJ2xhenknLCAnbnVtYmVyJywgJ2RlYm91bmNlJ10sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFBvc3NpYmxlIGVsZW1lbnRzOlxuXHQgICAqICAgPHNlbGVjdD5cblx0ICAgKiAgIDx0ZXh0YXJlYT5cblx0ICAgKiAgIDxpbnB1dCB0eXBlPVwiKlwiPlxuXHQgICAqICAgICAtIHRleHRcblx0ICAgKiAgICAgLSBjaGVja2JveFxuXHQgICAqICAgICAtIHJhZGlvXG5cdCAgICogICAgIC0gbnVtYmVyXG5cdCAgICovXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBmcmllbmRseSB3YXJuaW5nLi4uXG5cdCAgICB0aGlzLmNoZWNrRmlsdGVycygpO1xuXHQgICAgaWYgKHRoaXMuaGFzUmVhZCAmJiAhdGhpcy5oYXNXcml0ZSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgYSByZWFkLW9ubHkgZmlsdGVyIHdpdGggJyArICd2LW1vZGVsPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCIuICcgKyAnWW91IG1pZ2h0IHdhbnQgdG8gdXNlIGEgdHdvLXdheSBmaWx0ZXIgdG8gZW5zdXJlIGNvcnJlY3QgYmVoYXZpb3IuJywgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdmFyIHRhZyA9IGVsLnRhZ05hbWU7XG5cdCAgICB2YXIgaGFuZGxlcjtcblx0ICAgIGlmICh0YWcgPT09ICdJTlBVVCcpIHtcblx0ICAgICAgaGFuZGxlciA9IGhhbmRsZXJzW2VsLnR5cGVdIHx8IGhhbmRsZXJzLnRleHQ7XG5cdCAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1NFTEVDVCcpIHtcblx0ICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnNlbGVjdDtcblx0ICAgIH0gZWxzZSBpZiAodGFnID09PSAnVEVYVEFSRUEnKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy50ZXh0O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW1vZGVsIGRvZXMgbm90IHN1cHBvcnQgZWxlbWVudCB0eXBlOiAnICsgdGFnLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZWwuX192X21vZGVsID0gdGhpcztcblx0ICAgIGhhbmRsZXIuYmluZC5jYWxsKHRoaXMpO1xuXHQgICAgdGhpcy51cGRhdGUgPSBoYW5kbGVyLnVwZGF0ZTtcblx0ICAgIHRoaXMuX3VuYmluZCA9IGhhbmRsZXIudW5iaW5kO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENoZWNrIHJlYWQvd3JpdGUgZmlsdGVyIHN0YXRzLlxuXHQgICAqL1xuXHRcblx0ICBjaGVja0ZpbHRlcnM6IGZ1bmN0aW9uIGNoZWNrRmlsdGVycygpIHtcblx0ICAgIHZhciBmaWx0ZXJzID0gdGhpcy5maWx0ZXJzO1xuXHQgICAgaWYgKCFmaWx0ZXJzKSByZXR1cm47XG5cdCAgICB2YXIgaSA9IGZpbHRlcnMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIgZmlsdGVyID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyc1tpXS5uYW1lKTtcblx0ICAgICAgaWYgKHR5cGVvZiBmaWx0ZXIgPT09ICdmdW5jdGlvbicgfHwgZmlsdGVyLnJlYWQpIHtcblx0ICAgICAgICB0aGlzLmhhc1JlYWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChmaWx0ZXIud3JpdGUpIHtcblx0ICAgICAgICB0aGlzLmhhc1dyaXRlID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5lbC5fX3ZfbW9kZWwgPSBudWxsO1xuXHQgICAgdGhpcy5fdW5iaW5kICYmIHRoaXMuX3VuYmluZCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIGtleUNvZGUgYWxpYXNlc1xuXHR2YXIga2V5Q29kZXMgPSB7XG5cdCAgZXNjOiAyNyxcblx0ICB0YWI6IDksXG5cdCAgZW50ZXI6IDEzLFxuXHQgIHNwYWNlOiAzMixcblx0ICAnZGVsZXRlJzogWzgsIDQ2XSxcblx0ICB1cDogMzgsXG5cdCAgbGVmdDogMzcsXG5cdCAgcmlnaHQ6IDM5LFxuXHQgIGRvd246IDQwXG5cdH07XG5cdFxuXHRmdW5jdGlvbiBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cykge1xuXHQgIHZhciBjb2RlcyA9IGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHZhciBjaGFyQ29kZSA9IGtleS5jaGFyQ29kZUF0KDApO1xuXHQgICAgaWYgKGNoYXJDb2RlID4gNDcgJiYgY2hhckNvZGUgPCA1OCkge1xuXHQgICAgICByZXR1cm4gcGFyc2VJbnQoa2V5LCAxMCk7XG5cdCAgICB9XG5cdCAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICBjaGFyQ29kZSA9IGtleS50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCk7XG5cdCAgICAgIGlmIChjaGFyQ29kZSA+IDY0ICYmIGNoYXJDb2RlIDwgOTEpIHtcblx0ICAgICAgICByZXR1cm4gY2hhckNvZGU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBrZXlDb2Rlc1trZXldO1xuXHQgIH0pO1xuXHQgIGNvZGVzID0gW10uY29uY2F0LmFwcGx5KFtdLCBjb2Rlcyk7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGtleUhhbmRsZXIoZSkge1xuXHQgICAgaWYgKGNvZGVzLmluZGV4T2YoZS5rZXlDb2RlKSA+IC0xKSB7XG5cdCAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gc3RvcEZpbHRlcihoYW5kbGVyKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHN0b3BIYW5kbGVyKGUpIHtcblx0ICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdCAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHByZXZlbnRGaWx0ZXIoaGFuZGxlcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiBwcmV2ZW50SGFuZGxlcihlKSB7XG5cdCAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNlbGZGaWx0ZXIoaGFuZGxlcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiBzZWxmSGFuZGxlcihlKSB7XG5cdCAgICBpZiAoZS50YXJnZXQgPT09IGUuY3VycmVudFRhcmdldCkge1xuXHQgICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBvbiQxID0ge1xuXHRcblx0ICBwcmlvcml0eTogT04sXG5cdCAgYWNjZXB0U3RhdGVtZW50OiB0cnVlLFxuXHQgIGtleUNvZGVzOiBrZXlDb2Rlcyxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIGRlYWwgd2l0aCBpZnJhbWVzXG5cdCAgICBpZiAodGhpcy5lbC50YWdOYW1lID09PSAnSUZSQU1FJyAmJiB0aGlzLmFyZyAhPT0gJ2xvYWQnKSB7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgdGhpcy5pZnJhbWVCaW5kID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIG9uKHNlbGYuZWwuY29udGVudFdpbmRvdywgc2VsZi5hcmcsIHNlbGYuaGFuZGxlciwgc2VsZi5tb2RpZmllcnMuY2FwdHVyZSk7XG5cdCAgICAgIH07XG5cdCAgICAgIHRoaXMub24oJ2xvYWQnLCB0aGlzLmlmcmFtZUJpbmQpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGhhbmRsZXIpIHtcblx0ICAgIC8vIHN0dWIgYSBub29wIGZvciB2LW9uIHdpdGggbm8gdmFsdWUsXG5cdCAgICAvLyBlLmcuIEBtb3VzZWRvd24ucHJldmVudFxuXHQgICAgaWYgKCF0aGlzLmRlc2NyaXB0b3IucmF3KSB7XG5cdCAgICAgIGhhbmRsZXIgPSBmdW5jdGlvbiAoKSB7fTtcblx0ICAgIH1cblx0XG5cdCAgICBpZiAodHlwZW9mIGhhbmRsZXIgIT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW9uOicgKyB0aGlzLmFyZyArICc9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGV4cGVjdHMgYSBmdW5jdGlvbiB2YWx1ZSwgJyArICdnb3QgJyArIGhhbmRsZXIsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gYXBwbHkgbW9kaWZpZXJzXG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMuc3RvcCkge1xuXHQgICAgICBoYW5kbGVyID0gc3RvcEZpbHRlcihoYW5kbGVyKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5wcmV2ZW50KSB7XG5cdCAgICAgIGhhbmRsZXIgPSBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLnNlbGYpIHtcblx0ICAgICAgaGFuZGxlciA9IHNlbGZGaWx0ZXIoaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgICAvLyBrZXkgZmlsdGVyXG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubW9kaWZpZXJzKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuXHQgICAgICByZXR1cm4ga2V5ICE9PSAnc3RvcCcgJiYga2V5ICE9PSAncHJldmVudCcgJiYga2V5ICE9PSAnc2VsZicgJiYga2V5ICE9PSAnY2FwdHVyZSc7XG5cdCAgICB9KTtcblx0ICAgIGlmIChrZXlzLmxlbmd0aCkge1xuXHQgICAgICBoYW5kbGVyID0ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMucmVzZXQoKTtcblx0ICAgIHRoaXMuaGFuZGxlciA9IGhhbmRsZXI7XG5cdFxuXHQgICAgaWYgKHRoaXMuaWZyYW1lQmluZCkge1xuXHQgICAgICB0aGlzLmlmcmFtZUJpbmQoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIG9uKHRoaXMuZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIsIHRoaXMubW9kaWZpZXJzLmNhcHR1cmUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHJlc2V0OiBmdW5jdGlvbiByZXNldCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuaWZyYW1lQmluZCA/IHRoaXMuZWwuY29udGVudFdpbmRvdyA6IHRoaXMuZWw7XG5cdCAgICBpZiAodGhpcy5oYW5kbGVyKSB7XG5cdCAgICAgIG9mZihlbCwgdGhpcy5hcmcsIHRoaXMuaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLnJlc2V0KCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHByZWZpeGVzID0gWyctd2Via2l0LScsICctbW96LScsICctbXMtJ107XG5cdHZhciBjYW1lbFByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XG5cdHZhciBpbXBvcnRhbnRSRSA9IC8haW1wb3J0YW50Oz8kLztcblx0dmFyIHByb3BDYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHR2YXIgdGVzdEVsID0gbnVsbDtcblx0XG5cdHZhciBzdHlsZSA9IHtcblx0XG5cdCAgZGVlcDogdHJ1ZSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRoaXMuZWwuc3R5bGUuY3NzVGV4dCA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZS5yZWR1Y2UoZXh0ZW5kLCB7fSkpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGhhbmRsZU9iamVjdDogZnVuY3Rpb24gaGFuZGxlT2JqZWN0KHZhbHVlKSB7XG5cdCAgICAvLyBjYWNoZSBvYmplY3Qgc3R5bGVzIHNvIHRoYXQgb25seSBjaGFuZ2VkIHByb3BzXG5cdCAgICAvLyBhcmUgYWN0dWFsbHkgdXBkYXRlZC5cblx0ICAgIHZhciBjYWNoZSA9IHRoaXMuY2FjaGUgfHwgKHRoaXMuY2FjaGUgPSB7fSk7XG5cdCAgICB2YXIgbmFtZSwgdmFsO1xuXHQgICAgZm9yIChuYW1lIGluIGNhY2hlKSB7XG5cdCAgICAgIGlmICghKG5hbWUgaW4gdmFsdWUpKSB7XG5cdCAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgbnVsbCk7XG5cdCAgICAgICAgZGVsZXRlIGNhY2hlW25hbWVdO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBmb3IgKG5hbWUgaW4gdmFsdWUpIHtcblx0ICAgICAgdmFsID0gdmFsdWVbbmFtZV07XG5cdCAgICAgIGlmICh2YWwgIT09IGNhY2hlW25hbWVdKSB7XG5cdCAgICAgICAgY2FjaGVbbmFtZV0gPSB2YWw7XG5cdCAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgdmFsKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKHByb3AsIHZhbHVlKSB7XG5cdCAgICBwcm9wID0gbm9ybWFsaXplKHByb3ApO1xuXHQgICAgaWYgKCFwcm9wKSByZXR1cm47IC8vIHVuc3VwcG9ydGVkIHByb3Bcblx0ICAgIC8vIGNhc3QgcG9zc2libGUgbnVtYmVycy9ib29sZWFucyBpbnRvIHN0cmluZ3Ncblx0ICAgIGlmICh2YWx1ZSAhPSBudWxsKSB2YWx1ZSArPSAnJztcblx0ICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICB2YXIgaXNJbXBvcnRhbnQgPSBpbXBvcnRhbnRSRS50ZXN0KHZhbHVlKSA/ICdpbXBvcnRhbnQnIDogJyc7XG5cdCAgICAgIGlmIChpc0ltcG9ydGFudCkge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgICB3YXJuKCdJdFxcJ3MgcHJvYmFibHkgYSBiYWQgaWRlYSB0byB1c2UgIWltcG9ydGFudCB3aXRoIGlubGluZSBydWxlcy4gJyArICdUaGlzIGZlYXR1cmUgd2lsbCBiZSBkZXByZWNhdGVkIGluIGEgZnV0dXJlIHZlcnNpb24gb2YgVnVlLicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKS50cmltKCk7XG5cdCAgICAgICAgdGhpcy5lbC5zdHlsZS5zZXRQcm9wZXJ0eShwcm9wLmtlYmFiLCB2YWx1ZSwgaXNJbXBvcnRhbnQpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSB2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdH07XG5cdFxuXHQvKipcblx0ICogTm9ybWFsaXplIGEgQ1NTIHByb3BlcnR5IG5hbWUuXG5cdCAqIC0gY2FjaGUgcmVzdWx0XG5cdCAqIC0gYXV0byBwcmVmaXhcblx0ICogLSBjYW1lbENhc2UgLT4gZGFzaC1jYXNlXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBub3JtYWxpemUocHJvcCkge1xuXHQgIGlmIChwcm9wQ2FjaGVbcHJvcF0pIHtcblx0ICAgIHJldHVybiBwcm9wQ2FjaGVbcHJvcF07XG5cdCAgfVxuXHQgIHZhciByZXMgPSBwcmVmaXgocHJvcCk7XG5cdCAgcHJvcENhY2hlW3Byb3BdID0gcHJvcENhY2hlW3Jlc10gPSByZXM7XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEF1dG8gZGV0ZWN0IHRoZSBhcHByb3ByaWF0ZSBwcmVmaXggZm9yIGEgQ1NTIHByb3BlcnR5LlxuXHQgKiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wYXVsaXJpc2gvNTIzNjkyXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcmVmaXgocHJvcCkge1xuXHQgIHByb3AgPSBoeXBoZW5hdGUocHJvcCk7XG5cdCAgdmFyIGNhbWVsID0gY2FtZWxpemUocHJvcCk7XG5cdCAgdmFyIHVwcGVyID0gY2FtZWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbC5zbGljZSgxKTtcblx0ICBpZiAoIXRlc3RFbCkge1xuXHQgICAgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgfVxuXHQgIHZhciBpID0gcHJlZml4ZXMubGVuZ3RoO1xuXHQgIHZhciBwcmVmaXhlZDtcblx0ICBpZiAoY2FtZWwgIT09ICdmaWx0ZXInICYmIGNhbWVsIGluIHRlc3RFbC5zdHlsZSkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAga2ViYWI6IHByb3AsXG5cdCAgICAgIGNhbWVsOiBjYW1lbFxuXHQgICAgfTtcblx0ICB9XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgcHJlZml4ZWQgPSBjYW1lbFByZWZpeGVzW2ldICsgdXBwZXI7XG5cdCAgICBpZiAocHJlZml4ZWQgaW4gdGVzdEVsLnN0eWxlKSB7XG5cdCAgICAgIHJldHVybiB7XG5cdCAgICAgICAga2ViYWI6IHByZWZpeGVzW2ldICsgcHJvcCxcblx0ICAgICAgICBjYW1lbDogcHJlZml4ZWRcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8vIHhsaW5rXG5cdHZhciB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xuXHR2YXIgeGxpbmtSRSA9IC9eeGxpbms6Lztcblx0XG5cdC8vIGNoZWNrIGZvciBhdHRyaWJ1dGVzIHRoYXQgcHJvaGliaXQgaW50ZXJwb2xhdGlvbnNcblx0dmFyIGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUgPSAvXnYtfF46fF5AfF4oPzppc3x0cmFuc2l0aW9ufHRyYW5zaXRpb24tbW9kZXxkZWJvdW5jZXx0cmFjay1ieXxzdGFnZ2VyfGVudGVyLXN0YWdnZXJ8bGVhdmUtc3RhZ2dlcikkLztcblx0Ly8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgYWxzbyBzZXQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzXG5cdC8vIGJlY2F1c2UgdGhleSBvbmx5IGFmZmVjdCB0aGUgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgZWxlbWVudFxuXHR2YXIgYXR0cldpdGhQcm9wc1JFID0gL14oPzp2YWx1ZXxjaGVja2VkfHNlbGVjdGVkfG11dGVkKSQvO1xuXHQvLyB0aGVzZSBhdHRyaWJ1dGVzIGV4cGVjdCBlbnVtcmF0ZWQgdmFsdWVzIG9mIFwidHJ1ZVwiIG9yIFwiZmFsc2VcIlxuXHQvLyBidXQgYXJlIG5vdCBib29sZWFuIGF0dHJpYnV0ZXNcblx0dmFyIGVudW1lcmF0ZWRBdHRyUkUgPSAvXig/OmRyYWdnYWJsZXxjb250ZW50ZWRpdGFibGV8c3BlbGxjaGVjaykkLztcblx0XG5cdC8vIHRoZXNlIGF0dHJpYnV0ZXMgc2hvdWxkIHNldCBhIGhpZGRlbiBwcm9wZXJ0eSBmb3Jcblx0Ly8gYmluZGluZyB2LW1vZGVsIHRvIG9iamVjdCB2YWx1ZXNcblx0dmFyIG1vZGVsUHJvcHMgPSB7XG5cdCAgdmFsdWU6ICdfdmFsdWUnLFxuXHQgICd0cnVlLXZhbHVlJzogJ190cnVlVmFsdWUnLFxuXHQgICdmYWxzZS12YWx1ZSc6ICdfZmFsc2VWYWx1ZSdcblx0fTtcblx0XG5cdHZhciBiaW5kJDEgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBCSU5ELFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGF0dHIgPSB0aGlzLmFyZztcblx0ICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG5cdCAgICAvLyBzaG91bGQgYmUgZGVlcCB3YXRjaCBvbiBvYmplY3QgbW9kZVxuXHQgICAgaWYgKCFhdHRyKSB7XG5cdCAgICAgIHRoaXMuZGVlcCA9IHRydWU7XG5cdCAgICB9XG5cdCAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbiBiaW5kaW5nc1xuXHQgICAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG5cdCAgICB2YXIgdG9rZW5zID0gZGVzY3JpcHRvci5pbnRlcnA7XG5cdCAgICBpZiAodG9rZW5zKSB7XG5cdCAgICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9ucyB3aXRoIG9uZS10aW1lIHRva2Vuc1xuXHQgICAgICBpZiAoZGVzY3JpcHRvci5oYXNPbmVUaW1lKSB7XG5cdCAgICAgICAgdGhpcy5leHByZXNzaW9uID0gdG9rZW5zVG9FeHAodG9rZW5zLCB0aGlzLl9zY29wZSB8fCB0aGlzLnZtKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gb25seSBhbGxvdyBiaW5kaW5nIG9uIG5hdGl2ZSBhdHRyaWJ1dGVzXG5cdCAgICAgIGlmIChkaXNhbGxvd2VkSW50ZXJwQXR0clJFLnRlc3QoYXR0cikgfHwgYXR0ciA9PT0gJ25hbWUnICYmICh0YWcgPT09ICdQQVJUSUFMJyB8fCB0YWcgPT09ICdTTE9UJykpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYXR0cmlidXRlIGludGVycG9sYXRpb24gaXMgbm90IGFsbG93ZWQgaW4gVnVlLmpzICcgKyAnZGlyZWN0aXZlcyBhbmQgc3BlY2lhbCBhdHRyaWJ1dGVzLicsIHRoaXMudm0pO1xuXHQgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgICAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHZhciByYXcgPSBhdHRyICsgJz1cIicgKyBkZXNjcmlwdG9yLnJhdyArICdcIjogJztcblx0ICAgICAgICAvLyB3YXJuIHNyY1xuXHQgICAgICAgIGlmIChhdHRyID09PSAnc3JjJykge1xuXHQgICAgICAgICAgd2FybihyYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInNyY1wiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAnYSA0MDQgcmVxdWVzdC4gVXNlIHYtYmluZDpzcmMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIC8vIHdhcm4gc3R5bGVcblx0ICAgICAgICBpZiAoYXR0ciA9PT0gJ3N0eWxlJykge1xuXHQgICAgICAgICAgd2FybihyYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInN0eWxlXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICd0aGUgYXR0cmlidXRlIHRvIGJlIGRpc2NhcmRlZCBpbiBJbnRlcm5ldCBFeHBsb3Jlci4gJyArICdVc2Ugdi1iaW5kOnN0eWxlIGluc3RlYWQuJywgdGhpcy52bSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICh0aGlzLmludmFsaWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIGF0dHIgPSB0aGlzLmFyZztcblx0ICAgIGlmICh0aGlzLmFyZykge1xuXHQgICAgICB0aGlzLmhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLy8gc2hhcmUgb2JqZWN0IGhhbmRsZXIgd2l0aCB2LWJpbmQ6Y2xhc3Ncblx0ICBoYW5kbGVPYmplY3Q6IHN0eWxlLmhhbmRsZU9iamVjdCxcblx0XG5cdCAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiBoYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB2YXIgaW50ZXJwID0gdGhpcy5kZXNjcmlwdG9yLmludGVycDtcblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5jYW1lbCkge1xuXHQgICAgICBhdHRyID0gY2FtZWxpemUoYXR0cik7XG5cdCAgICB9XG5cdCAgICBpZiAoIWludGVycCAmJiBhdHRyV2l0aFByb3BzUkUudGVzdChhdHRyKSAmJiBhdHRyIGluIGVsKSB7XG5cdCAgICAgIHZhciBhdHRyVmFsdWUgPSBhdHRyID09PSAndmFsdWUnID8gdmFsdWUgPT0gbnVsbCAvLyBJRTkgd2lsbCBzZXQgaW5wdXQudmFsdWUgdG8gXCJudWxsXCIgZm9yIG51bGwuLi5cblx0ICAgICAgPyAnJyA6IHZhbHVlIDogdmFsdWU7XG5cdFxuXHQgICAgICBpZiAoZWxbYXR0cl0gIT09IGF0dHJWYWx1ZSkge1xuXHQgICAgICAgIGVsW2F0dHJdID0gYXR0clZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBzZXQgbW9kZWwgcHJvcHNcblx0ICAgIHZhciBtb2RlbFByb3AgPSBtb2RlbFByb3BzW2F0dHJdO1xuXHQgICAgaWYgKCFpbnRlcnAgJiYgbW9kZWxQcm9wKSB7XG5cdCAgICAgIGVsW21vZGVsUHJvcF0gPSB2YWx1ZTtcblx0ICAgICAgLy8gdXBkYXRlIHYtbW9kZWwgaWYgcHJlc2VudFxuXHQgICAgICB2YXIgbW9kZWwgPSBlbC5fX3ZfbW9kZWw7XG5cdCAgICAgIGlmIChtb2RlbCkge1xuXHQgICAgICAgIG1vZGVsLmxpc3RlbmVyKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIGRvIG5vdCBzZXQgdmFsdWUgYXR0cmlidXRlIGZvciB0ZXh0YXJlYVxuXHQgICAgaWYgKGF0dHIgPT09ICd2YWx1ZScgJiYgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVcblx0ICAgIGlmIChlbnVtZXJhdGVkQXR0clJFLnRlc3QoYXR0cikpIHtcblx0ICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID8gJ3RydWUnIDogJ2ZhbHNlJyk7XG5cdCAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgIT09IGZhbHNlKSB7XG5cdCAgICAgIGlmIChhdHRyID09PSAnY2xhc3MnKSB7XG5cdCAgICAgICAgLy8gaGFuZGxlIGVkZ2UgY2FzZSAjMTk2MDpcblx0ICAgICAgICAvLyBjbGFzcyBpbnRlcnBvbGF0aW9uIHNob3VsZCBub3Qgb3ZlcndyaXRlIFZ1ZSB0cmFuc2l0aW9uIGNsYXNzXG5cdCAgICAgICAgaWYgKGVsLl9fdl90cmFucykge1xuXHQgICAgICAgICAgdmFsdWUgKz0gJyAnICsgZWwuX192X3RyYW5zLmlkICsgJy10cmFuc2l0aW9uJztcblx0ICAgICAgICB9XG5cdCAgICAgICAgc2V0Q2xhc3MoZWwsIHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIGlmICh4bGlua1JFLnRlc3QoYXR0cikpIHtcblx0ICAgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGVsID0ge1xuXHRcblx0ICBwcmlvcml0eTogRUwsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghdGhpcy5hcmcpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgdmFyIGlkID0gdGhpcy5pZCA9IGNhbWVsaXplKHRoaXMuYXJnKTtcblx0ICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG5cdCAgICBpZiAoaGFzT3duKHJlZnMsIGlkKSkge1xuXHQgICAgICByZWZzW2lkXSA9IHRoaXMuZWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBkZWZpbmVSZWFjdGl2ZShyZWZzLCBpZCwgdGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzO1xuXHQgICAgaWYgKHJlZnNbdGhpcy5pZF0gPT09IHRoaXMuZWwpIHtcblx0ICAgICAgcmVmc1t0aGlzLmlkXSA9IG51bGw7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHJlZiA9IHtcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LXJlZjonICsgdGhpcy5hcmcgKyAnIG11c3QgYmUgdXNlZCBvbiBhIGNoaWxkICcgKyAnY29tcG9uZW50LiBGb3VuZCBvbiA8JyArIHRoaXMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4uJywgdGhpcy52bSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGNsb2FrID0ge1xuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdGhpcy52bS4kb25jZSgncHJlLWhvb2s6Y29tcGlsZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgndi1jbG9haycpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0Ly8gbXVzdCBleHBvcnQgcGxhaW4gb2JqZWN0XG5cdHZhciBkaXJlY3RpdmVzID0ge1xuXHQgIHRleHQ6IHRleHQkMSxcblx0ICBodG1sOiBodG1sLFxuXHQgICdmb3InOiB2Rm9yLFxuXHQgICdpZic6IHZJZixcblx0ICBzaG93OiBzaG93LFxuXHQgIG1vZGVsOiBtb2RlbCxcblx0ICBvbjogb24kMSxcblx0ICBiaW5kOiBiaW5kJDEsXG5cdCAgZWw6IGVsLFxuXHQgIHJlZjogcmVmLFxuXHQgIGNsb2FrOiBjbG9ha1xuXHR9O1xuXHRcblx0dmFyIHZDbGFzcyA9IHtcblx0XG5cdCAgZGVlcDogdHJ1ZSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIGlmICghdmFsdWUpIHtcblx0ICAgICAgdGhpcy5jbGVhbnVwKCk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgdGhpcy5zZXRDbGFzcyh2YWx1ZS50cmltKCkuc3BsaXQoL1xccysvKSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLnNldENsYXNzKG5vcm1hbGl6ZSQxKHZhbHVlKSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgc2V0Q2xhc3M6IGZ1bmN0aW9uIHNldENsYXNzKHZhbHVlKSB7XG5cdCAgICB0aGlzLmNsZWFudXAodmFsdWUpO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIHZhbCA9IHZhbHVlW2ldO1xuXHQgICAgICBpZiAodmFsKSB7XG5cdCAgICAgICAgYXBwbHkodGhpcy5lbCwgdmFsLCBhZGRDbGFzcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMucHJldktleXMgPSB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICBjbGVhbnVwOiBmdW5jdGlvbiBjbGVhbnVwKHZhbHVlKSB7XG5cdCAgICB2YXIgcHJldktleXMgPSB0aGlzLnByZXZLZXlzO1xuXHQgICAgaWYgKCFwcmV2S2V5cykgcmV0dXJuO1xuXHQgICAgdmFyIGkgPSBwcmV2S2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhciBrZXkgPSBwcmV2S2V5c1tpXTtcblx0ICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5pbmRleE9mKGtleSkgPCAwKSB7XG5cdCAgICAgICAgYXBwbHkodGhpcy5lbCwga2V5LCByZW1vdmVDbGFzcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogTm9ybWFsaXplIG9iamVjdHMgYW5kIGFycmF5cyAocG90ZW50aWFsbHkgY29udGFpbmluZyBvYmplY3RzKVxuXHQgKiBpbnRvIGFycmF5IG9mIHN0cmluZ3MuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5PFN0cmluZ3xPYmplY3Q+fSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG5vcm1hbGl6ZSQxKHZhbHVlKSB7XG5cdCAgdmFyIHJlcyA9IFtdO1xuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIF9rZXkgPSB2YWx1ZVtpXTtcblx0ICAgICAgaWYgKF9rZXkpIHtcblx0ICAgICAgICBpZiAodHlwZW9mIF9rZXkgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgICByZXMucHVzaChfa2V5KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZm9yICh2YXIgayBpbiBfa2V5KSB7XG5cdCAgICAgICAgICAgIGlmIChfa2V5W2tdKSByZXMucHVzaChrKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgZm9yICh2YXIga2V5IGluIHZhbHVlKSB7XG5cdCAgICAgIGlmICh2YWx1ZVtrZXldKSByZXMucHVzaChrZXkpO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQWRkIG9yIHJlbW92ZSBhIGNsYXNzL2NsYXNzZXMgb24gYW4gZWxlbWVudFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgVGhlIGNsYXNzIG5hbWUuIFRoaXMgbWF5IG9yIG1heSBub3Rcblx0ICogICAgICAgICAgICAgICAgICAgICBjb250YWluIGEgc3BhY2UgY2hhcmFjdGVyLCBpbiBzdWNoIGFcblx0ICogICAgICAgICAgICAgICAgICAgICBjYXNlIHdlJ2xsIGRlYWwgd2l0aCBtdWx0aXBsZSBjbGFzc1xuXHQgKiAgICAgICAgICAgICAgICAgICAgIG5hbWVzIGF0IG9uY2UuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXBwbHkoZWwsIGtleSwgZm4pIHtcblx0ICBrZXkgPSBrZXkudHJpbSgpO1xuXHQgIGlmIChrZXkuaW5kZXhPZignICcpID09PSAtMSkge1xuXHQgICAgZm4oZWwsIGtleSk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIC8vIFRoZSBrZXkgY29udGFpbnMgb25lIG9yIG1vcmUgc3BhY2UgY2hhcmFjdGVycy5cblx0ICAvLyBTaW5jZSBhIGNsYXNzIG5hbWUgZG9lc24ndCBhY2NlcHQgc3VjaCBjaGFyYWN0ZXJzLCB3ZVxuXHQgIC8vIHRyZWF0IGl0IGFzIG11bHRpcGxlIGNsYXNzZXMuXG5cdCAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBmbihlbCwga2V5c1tpXSk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgY29tcG9uZW50ID0ge1xuXHRcblx0ICBwcmlvcml0eTogQ09NUE9ORU5ULFxuXHRcblx0ICBwYXJhbXM6IFsna2VlcC1hbGl2ZScsICd0cmFuc2l0aW9uLW1vZGUnLCAnaW5saW5lLXRlbXBsYXRlJ10sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwLiBUd28gcG9zc2libGUgdXNhZ2VzOlxuXHQgICAqXG5cdCAgICogLSBzdGF0aWM6XG5cdCAgICogICA8Y29tcD4gb3IgPGRpdiB2LWNvbXBvbmVudD1cImNvbXBcIj5cblx0ICAgKlxuXHQgICAqIC0gZHluYW1pYzpcblx0ICAgKiAgIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuXHQgICAqL1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgaWYgKCF0aGlzLmVsLl9fdnVlX18pIHtcblx0ICAgICAgLy8ga2VlcC1hbGl2ZSBjYWNoZVxuXHQgICAgICB0aGlzLmtlZXBBbGl2ZSA9IHRoaXMucGFyYW1zLmtlZXBBbGl2ZTtcblx0ICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNoZWNrIGlubGluZS10ZW1wbGF0ZVxuXHQgICAgICBpZiAodGhpcy5wYXJhbXMuaW5saW5lVGVtcGxhdGUpIHtcblx0ICAgICAgICAvLyBleHRyYWN0IGlubGluZSB0ZW1wbGF0ZSBhcyBhIERvY3VtZW50RnJhZ21lbnRcblx0ICAgICAgICB0aGlzLmlubGluZVRlbXBsYXRlID0gZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gY29tcG9uZW50IHJlc29sdXRpb24gcmVsYXRlZCBzdGF0ZVxuXHQgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IHRoaXMuQ29tcG9uZW50ID0gbnVsbDtcblx0ICAgICAgLy8gdHJhbnNpdGlvbiByZWxhdGVkIHN0YXRlXG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzID0gMDtcblx0ICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcblx0ICAgICAgLy8gY3JlYXRlIGEgcmVmIGFuY2hvclxuXHQgICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1jb21wb25lbnQnKTtcblx0ICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICAgIC8vIHJlbW92ZSBpcyBhdHRyaWJ1dGUuXG5cdCAgICAgIC8vIHRoaXMgaXMgcmVtb3ZlZCBkdXJpbmcgY29tcGlsYXRpb24sIGJ1dCBiZWNhdXNlIGNvbXBpbGF0aW9uIGlzXG5cdCAgICAgIC8vIGNhY2hlZCwgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVzZWQgZWxzZXdoZXJlIHRoaXMgYXR0cmlidXRlXG5cdCAgICAgIC8vIHdpbGwgcmVtYWluIGF0IGxpbmsgdGltZS5cblx0ICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG5cdCAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCc6aXMnKTtcblx0ICAgICAgLy8gcmVtb3ZlIHJlZiwgc2FtZSBhcyBhYm92ZVxuXHQgICAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuXHQgICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCd2LXJlZjonICsgaHlwaGVuYXRlKHRoaXMuZGVzY3JpcHRvci5yZWYpKTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBpZiBzdGF0aWMsIGJ1aWxkIHJpZ2h0IG5vdy5cblx0ICAgICAgaWYgKHRoaXMubGl0ZXJhbCkge1xuXHQgICAgICAgIHRoaXMuc2V0Q29tcG9uZW50KHRoaXMuZXhwcmVzc2lvbik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignY2Fubm90IG1vdW50IGNvbXBvbmVudCBcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgJyArICdvbiBhbHJlYWR5IG1vdW50ZWQgZWxlbWVudDogJyArIHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFB1YmxpYyB1cGRhdGUsIGNhbGxlZCBieSB0aGUgd2F0Y2hlciBpbiB0aGUgZHluYW1pY1xuXHQgICAqIGxpdGVyYWwgc2NlbmFyaW8sIGUuZy4gPGNvbXBvbmVudCA6aXM9XCJ2aWV3XCI+XG5cdCAgICovXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAoIXRoaXMubGl0ZXJhbCkge1xuXHQgICAgICB0aGlzLnNldENvbXBvbmVudCh2YWx1ZSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogU3dpdGNoIGR5bmFtaWMgY29tcG9uZW50cy4gTWF5IHJlc29sdmUgdGhlIGNvbXBvbmVudFxuXHQgICAqIGFzeW5jaHJvbm91c2x5LCBhbmQgcGVyZm9ybSB0cmFuc2l0aW9uIGJhc2VkIG9uXG5cdCAgICogc3BlY2lmaWVkIHRyYW5zaXRpb24gbW9kZS4gQWNjZXB0cyBhIGZldyBhZGRpdGlvbmFsXG5cdCAgICogYXJndW1lbnRzIHNwZWNpZmljYWxseSBmb3IgdnVlLXJvdXRlci5cblx0ICAgKlxuXHQgICAqIFRoZSBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiB0aGUgZnVsbCB0cmFuc2l0aW9uIGlzXG5cdCAgICogZmluaXNoZWQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIHNldENvbXBvbmVudDogZnVuY3Rpb24gc2V0Q29tcG9uZW50KHZhbHVlLCBjYikge1xuXHQgICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuXHQgICAgaWYgKCF2YWx1ZSkge1xuXHQgICAgICAvLyBqdXN0IHJlbW92ZSBjdXJyZW50XG5cdCAgICAgIHRoaXMudW5idWlsZCh0cnVlKTtcblx0ICAgICAgdGhpcy5yZW1vdmUodGhpcy5jaGlsZFZNLCBjYik7XG5cdCAgICAgIHRoaXMuY2hpbGRWTSA9IG51bGw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIHRoaXMucmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYubW91bnRDb21wb25lbnQoY2IpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZXNvbHZlIHRoZSBjb21wb25lbnQgY29uc3RydWN0b3IgdG8gdXNlIHdoZW4gY3JlYXRpbmdcblx0ICAgKiB0aGUgY2hpbGQgdm0uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqL1xuXHRcblx0ICByZXNvbHZlQ29tcG9uZW50OiBmdW5jdGlvbiByZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBjYikge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG5cdCAgICAgIHNlbGYuQ29tcG9uZW50TmFtZSA9IENvbXBvbmVudC5vcHRpb25zLm5hbWUgfHwgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IG51bGwpO1xuXHQgICAgICBzZWxmLkNvbXBvbmVudCA9IENvbXBvbmVudDtcblx0ICAgICAgY2IoKTtcblx0ICAgIH0pO1xuXHQgICAgdGhpcy52bS5fcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSB1c2luZyB0aGUgY3VycmVudCBjb25zdHJ1Y3RvciBhbmRcblx0ICAgKiByZXBsYWNlIHRoZSBleGlzdGluZyBpbnN0YW5jZS4gVGhpcyBtZXRob2QgZG9lc24ndCBjYXJlXG5cdCAgICogd2hldGhlciB0aGUgbmV3IGNvbXBvbmVudCBhbmQgdGhlIG9sZCBvbmUgYXJlIGFjdHVhbGx5XG5cdCAgICogdGhlIHNhbWUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiBtb3VudENvbXBvbmVudChjYikge1xuXHQgICAgLy8gYWN0dWFsIG1vdW50XG5cdCAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgYWN0aXZhdGVIb29rcyA9IHRoaXMuQ29tcG9uZW50Lm9wdGlvbnMuYWN0aXZhdGU7XG5cdCAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcblx0ICAgIHZhciBuZXdDb21wb25lbnQgPSB0aGlzLmJ1aWxkKCk7XG5cdCAgICBpZiAoYWN0aXZhdGVIb29rcyAmJiAhY2FjaGVkKSB7XG5cdCAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG5ld0NvbXBvbmVudDtcblx0ICAgICAgY2FsbEFjdGl2YXRlSG9va3MoYWN0aXZhdGVIb29rcywgbmV3Q29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHNlbGYud2FpdGluZ0ZvciAhPT0gbmV3Q29tcG9uZW50KSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNlbGYud2FpdGluZ0ZvciA9IG51bGw7XG5cdCAgICAgICAgc2VsZi50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHVwZGF0ZSByZWYgZm9yIGtlcHQtYWxpdmUgY29tcG9uZW50XG5cdCAgICAgIGlmIChjYWNoZWQpIHtcblx0ICAgICAgICBuZXdDb21wb25lbnQuX3VwZGF0ZVJlZigpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGVuIHRoZSBjb21wb25lbnQgY2hhbmdlcyBvciB1bmJpbmRzIGJlZm9yZSBhbiBhc3luY1xuXHQgICAqIGNvbnN0cnVjdG9yIGlzIHJlc29sdmVkLCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgaXRzXG5cdCAgICogcGVuZGluZyBjYWxsYmFjay5cblx0ICAgKi9cblx0XG5cdCAgaW52YWxpZGF0ZVBlbmRpbmc6IGZ1bmN0aW9uIGludmFsaWRhdGVQZW5kaW5nKCkge1xuXHQgICAgaWYgKHRoaXMucGVuZGluZ0NvbXBvbmVudENiKSB7XG5cdCAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiLmNhbmNlbCgpO1xuXHQgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IG51bGw7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zdGFudGlhdGUvaW5zZXJ0IGEgbmV3IGNoaWxkIHZtLlxuXHQgICAqIElmIGtlZXAgYWxpdmUgYW5kIGhhcyBjYWNoZWQgaW5zdGFuY2UsIGluc2VydCB0aGF0XG5cdCAgICogaW5zdGFuY2U7IG90aGVyd2lzZSBidWlsZCBhIG5ldyBvbmUgYW5kIGNhY2hlIGl0LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtleHRyYU9wdGlvbnNdXG5cdCAgICogQHJldHVybiB7VnVlfSAtIHRoZSBjcmVhdGVkIGluc3RhbmNlXG5cdCAgICovXG5cdFxuXHQgIGJ1aWxkOiBmdW5jdGlvbiBidWlsZChleHRyYU9wdGlvbnMpIHtcblx0ICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuXHQgICAgaWYgKGNhY2hlZCkge1xuXHQgICAgICByZXR1cm4gY2FjaGVkO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuQ29tcG9uZW50KSB7XG5cdCAgICAgIC8vIGRlZmF1bHQgb3B0aW9uc1xuXHQgICAgICB2YXIgb3B0aW9ucyA9IHtcblx0ICAgICAgICBuYW1lOiB0aGlzLkNvbXBvbmVudE5hbWUsXG5cdCAgICAgICAgZWw6IGNsb25lTm9kZSh0aGlzLmVsKSxcblx0ICAgICAgICB0ZW1wbGF0ZTogdGhpcy5pbmxpbmVUZW1wbGF0ZSxcblx0ICAgICAgICAvLyBtYWtlIHN1cmUgdG8gYWRkIHRoZSBjaGlsZCB3aXRoIGNvcnJlY3QgcGFyZW50XG5cdCAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgaXRzIHBhcmVudFxuXHQgICAgICAgIC8vIHNob3VsZCBiZSB0aGUgdHJhbnNjbHVzaW9uIGhvc3QuXG5cdCAgICAgICAgcGFyZW50OiB0aGlzLl9ob3N0IHx8IHRoaXMudm0sXG5cdCAgICAgICAgLy8gaWYgbm8gaW5saW5lLXRlbXBsYXRlLCB0aGVuIHRoZSBjb21waWxlZFxuXHQgICAgICAgIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXG5cdCAgICAgICAgX2xpbmtlckNhY2hhYmxlOiAhdGhpcy5pbmxpbmVUZW1wbGF0ZSxcblx0ICAgICAgICBfcmVmOiB0aGlzLmRlc2NyaXB0b3IucmVmLFxuXHQgICAgICAgIF9hc0NvbXBvbmVudDogdHJ1ZSxcblx0ICAgICAgICBfaXNSb3V0ZXJWaWV3OiB0aGlzLl9pc1JvdXRlclZpZXcsXG5cdCAgICAgICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuXHQgICAgICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuXHQgICAgICAgIC8vIGFuZCBpdHMgaG9zdC5cblx0ICAgICAgICBfY29udGV4dDogdGhpcy52bSxcblx0ICAgICAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuXHQgICAgICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG5cdCAgICAgICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcblx0ICAgICAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG5cdCAgICAgICAgX3Njb3BlOiB0aGlzLl9zY29wZSxcblx0ICAgICAgICAvLyBwYXNzIGluIHRoZSBvd25lciBmcmFnbWVudCBvZiB0aGlzIGNvbXBvbmVudC5cblx0ICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBzbyB0aGF0IHRoZSBmcmFnbWVudCBjYW4ga2VlcFxuXHQgICAgICAgIC8vIHRyYWNrIG9mIGl0cyBjb250YWluZWQgY29tcG9uZW50cyBpbiBvcmRlciB0b1xuXHQgICAgICAgIC8vIGNhbGwgYXR0YWNoL2RldGFjaCBob29rcyBmb3IgdGhlbS5cblx0ICAgICAgICBfZnJhZzogdGhpcy5fZnJhZ1xuXHQgICAgICB9O1xuXHQgICAgICAvLyBleHRyYSBvcHRpb25zXG5cdCAgICAgIC8vIGluIDEuMC4wIHRoaXMgaXMgdXNlZCBieSB2dWUtcm91dGVyIG9ubHlcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChleHRyYU9wdGlvbnMpIHtcblx0ICAgICAgICBleHRlbmQob3B0aW9ucywgZXh0cmFPcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5Db21wb25lbnQob3B0aW9ucyk7XG5cdCAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXSA9IGNoaWxkO1xuXHQgICAgICB9XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsLmhhc0F0dHJpYnV0ZSgndHJhbnNpdGlvbicpICYmIGNoaWxkLl9pc0ZyYWdtZW50KSB7XG5cdCAgICAgICAgd2FybignVHJhbnNpdGlvbnMgd2lsbCBub3Qgd29yayBvbiBhIGZyYWdtZW50IGluc3RhbmNlLiAnICsgJ1RlbXBsYXRlOiAnICsgY2hpbGQuJG9wdGlvbnMudGVtcGxhdGUsIGNoaWxkKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gY2hpbGQ7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVHJ5IHRvIGdldCBhIGNhY2hlZCBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBjb21wb25lbnQuXG5cdCAgICpcblx0ICAgKiBAcmV0dXJuIHtWdWV8dW5kZWZpbmVkfVxuXHQgICAqL1xuXHRcblx0ICBnZXRDYWNoZWQ6IGZ1bmN0aW9uIGdldENhY2hlZCgpIHtcblx0ICAgIHJldHVybiB0aGlzLmtlZXBBbGl2ZSAmJiB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF07XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogVGVhcmRvd24gdGhlIGN1cnJlbnQgY2hpbGQsIGJ1dCBkZWZlcnMgY2xlYW51cCBzb1xuXHQgICAqIHRoYXQgd2UgY2FuIHNlcGFyYXRlIHRoZSBkZXN0cm95IGFuZCByZW1vdmFsIHN0ZXBzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlclxuXHQgICAqL1xuXHRcblx0ICB1bmJ1aWxkOiBmdW5jdGlvbiB1bmJ1aWxkKGRlZmVyKSB7XG5cdCAgICBpZiAodGhpcy53YWl0aW5nRm9yKSB7XG5cdCAgICAgIGlmICghdGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgICB0aGlzLndhaXRpbmdGb3IuJGRlc3Ryb3koKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLndhaXRpbmdGb3IgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgdmFyIGNoaWxkID0gdGhpcy5jaGlsZFZNO1xuXHQgICAgaWYgKCFjaGlsZCB8fCB0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICBpZiAoY2hpbGQpIHtcblx0ICAgICAgICAvLyByZW1vdmUgcmVmXG5cdCAgICAgICAgY2hpbGQuX2luYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgICBjaGlsZC5fdXBkYXRlUmVmKHRydWUpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIHRoZSBzb2xlIHB1cnBvc2Ugb2YgYGRlZmVyQ2xlYW51cGAgaXMgc28gdGhhdCB3ZSBjYW5cblx0ICAgIC8vIFwiZGVhY3RpdmF0ZVwiIHRoZSB2bSByaWdodCBub3cgYW5kIHBlcmZvcm0gRE9NIHJlbW92YWxcblx0ICAgIC8vIGxhdGVyLlxuXHQgICAgY2hpbGQuJGRlc3Ryb3koZmFsc2UsIGRlZmVyKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBSZW1vdmUgY3VycmVudCBkZXN0cm95ZWQgY2hpbGQgYW5kIG1hbnVhbGx5IGRvXG5cdCAgICogdGhlIGNsZWFudXAgYWZ0ZXIgcmVtb3ZhbC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGNoaWxkLCBjYikge1xuXHQgICAgdmFyIGtlZXBBbGl2ZSA9IHRoaXMua2VlcEFsaXZlO1xuXHQgICAgaWYgKGNoaWxkKSB7XG5cdCAgICAgIC8vIHdlIG1heSBoYXZlIGEgY29tcG9uZW50IHN3aXRjaCB3aGVuIGEgcHJldmlvdXNcblx0ICAgICAgLy8gY29tcG9uZW50IGlzIHN0aWxsIGJlaW5nIHRyYW5zaXRpb25lZCBvdXQuXG5cdCAgICAgIC8vIHdlIHdhbnQgdG8gdHJpZ2dlciBvbmx5IG9uZSBsYXN0ZXN0IGluc2VydGlvbiBjYlxuXHQgICAgICAvLyB3aGVuIHRoZSBleGlzdGluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLiAoIzExMTkpXG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzKys7XG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IGNiO1xuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIGNoaWxkLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxzLS07XG5cdCAgICAgICAgaWYgKCFrZWVwQWxpdmUpIGNoaWxkLl9jbGVhbnVwKCk7XG5cdCAgICAgICAgaWYgKCFzZWxmLnBlbmRpbmdSZW1vdmFscyAmJiBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IpIHtcblx0ICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYigpO1xuXHQgICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfSBlbHNlIGlmIChjYikge1xuXHQgICAgICBjYigpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEFjdHVhbGx5IHN3YXAgdGhlIGNvbXBvbmVudHMsIGRlcGVuZGluZyBvbiB0aGVcblx0ICAgKiB0cmFuc2l0aW9uIG1vZGUuIERlZmF1bHRzIHRvIHNpbXVsdGFuZW91cy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIHRyYW5zaXRpb246IGZ1bmN0aW9uIHRyYW5zaXRpb24odGFyZ2V0LCBjYikge1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGN1cnJlbnQgPSB0aGlzLmNoaWxkVk07XG5cdCAgICAvLyBmb3IgZGV2dG9vbCBpbnNwZWN0aW9uXG5cdCAgICBpZiAoY3VycmVudCkgY3VycmVudC5faW5hY3RpdmUgPSB0cnVlO1xuXHQgICAgdGFyZ2V0Ll9pbmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgdGhpcy5jaGlsZFZNID0gdGFyZ2V0O1xuXHQgICAgc3dpdGNoIChzZWxmLnBhcmFtcy50cmFuc2l0aW9uTW9kZSkge1xuXHQgICAgICBjYXNlICdpbi1vdXQnOlxuXHQgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBjYik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGNhc2UgJ291dC1pbic6XG5cdCAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgZGVmYXVsdDpcblx0ICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50KTtcblx0ICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFVuYmluZC5cblx0ICAgKi9cblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG5cdCAgICAvLyBEbyBub3QgZGVmZXIgY2xlYW51cCB3aGVuIHVuYmluZGluZ1xuXHQgICAgdGhpcy51bmJ1aWxkKCk7XG5cdCAgICAvLyBkZXN0cm95IGFsbCBrZWVwLWFsaXZlIGNhY2hlZCBpbnN0YW5jZXNcblx0ICAgIGlmICh0aGlzLmNhY2hlKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLmNhY2hlKSB7XG5cdCAgICAgICAgdGhpcy5jYWNoZVtrZXldLiRkZXN0cm95KCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5jYWNoZSA9IG51bGw7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYWN0aXZhdGUgaG9va3MgaW4gb3JkZXIgKGFzeW5jaHJvbm91cylcblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gaG9va3Ncblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2FsbEFjdGl2YXRlSG9va3MoaG9va3MsIHZtLCBjYikge1xuXHQgIHZhciB0b3RhbCA9IGhvb2tzLmxlbmd0aDtcblx0ICB2YXIgY2FsbGVkID0gMDtcblx0ICBob29rc1swXS5jYWxsKHZtLCBuZXh0KTtcblx0ICBmdW5jdGlvbiBuZXh0KCkge1xuXHQgICAgaWYgKCsrY2FsbGVkID49IHRvdGFsKSB7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBob29rc1tjYWxsZWRdLmNhbGwodm0sIG5leHQpO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0dmFyIHByb3BCaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG5cdHZhciBlbXB0eSA9IHt9O1xuXHRcblx0Ly8gcmVnZXhlc1xuXHR2YXIgaWRlbnRSRSQxID0gL15bJF9hLXpBLVpdK1tcXHckXSokLztcblx0dmFyIHNldHRhYmxlUGF0aFJFID0gL15bQS1aYS16XyRdW1xcdyRdKihcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFtbXlxcW1xcXV0rXFxdKSokLztcblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIHByb3BzIG9uIGEgcm9vdCBlbGVtZW50IGFuZCByZXR1cm5cblx0ICogYSBwcm9wcyBsaW5rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICogQHBhcmFtIHtBcnJheX0gcHJvcE9wdGlvbnNcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVQcm9wcyhlbCwgcHJvcE9wdGlvbnMsIHZtKSB7XG5cdCAgdmFyIHByb3BzID0gW107XG5cdCAgdmFyIG5hbWVzID0gT2JqZWN0LmtleXMocHJvcE9wdGlvbnMpO1xuXHQgIHZhciBpID0gbmFtZXMubGVuZ3RoO1xuXHQgIHZhciBvcHRpb25zLCBuYW1lLCBhdHRyLCB2YWx1ZSwgcGF0aCwgcGFyc2VkLCBwcm9wO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIG5hbWUgPSBuYW1lc1tpXTtcblx0ICAgIG9wdGlvbnMgPSBwcm9wT3B0aW9uc1tuYW1lXSB8fCBlbXB0eTtcblx0XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lID09PSAnJGRhdGEnKSB7XG5cdCAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgJGRhdGEgYXMgcHJvcC4nLCB2bSk7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHByb3BzIGNvdWxkIGNvbnRhaW4gZGFzaGVzLCB3aGljaCB3aWxsIGJlXG5cdCAgICAvLyBpbnRlcnByZXRlZCBhcyBtaW51cyBjYWxjdWxhdGlvbnMgYnkgdGhlIHBhcnNlclxuXHQgICAgLy8gc28gd2UgbmVlZCB0byBjYW1lbGl6ZSB0aGUgcGF0aCBoZXJlXG5cdCAgICBwYXRoID0gY2FtZWxpemUobmFtZSk7XG5cdCAgICBpZiAoIWlkZW50UkUkMS50ZXN0KHBhdGgpKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBwcm9wIGtleTogXCInICsgbmFtZSArICdcIi4gUHJvcCBrZXlzICcgKyAnbXVzdCBiZSB2YWxpZCBpZGVudGlmaWVycy4nLCB2bSk7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIHByb3AgPSB7XG5cdCAgICAgIG5hbWU6IG5hbWUsXG5cdCAgICAgIHBhdGg6IHBhdGgsXG5cdCAgICAgIG9wdGlvbnM6IG9wdGlvbnMsXG5cdCAgICAgIG1vZGU6IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWSxcblx0ICAgICAgcmF3OiBudWxsXG5cdCAgICB9O1xuXHRcblx0ICAgIGF0dHIgPSBoeXBoZW5hdGUobmFtZSk7XG5cdCAgICAvLyBmaXJzdCBjaGVjayBkeW5hbWljIHZlcnNpb25cblx0ICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0cikpID09PSBudWxsKSB7XG5cdCAgICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcuc3luYycpKSAhPT0gbnVsbCkge1xuXHQgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWTtcblx0ICAgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcub25jZScpKSAhPT0gbnVsbCkge1xuXHQgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuXHQgICAgICAvLyBoYXMgZHluYW1pYyBiaW5kaW5nIVxuXHQgICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuXHQgICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG5cdCAgICAgIHZhbHVlID0gcGFyc2VkLmV4cHJlc3Npb247XG5cdCAgICAgIHByb3AuZmlsdGVycyA9IHBhcnNlZC5maWx0ZXJzO1xuXHQgICAgICAvLyBjaGVjayBiaW5kaW5nIHR5cGVcblx0ICAgICAgaWYgKGlzTGl0ZXJhbCh2YWx1ZSkgJiYgIXBhcnNlZC5maWx0ZXJzKSB7XG5cdCAgICAgICAgLy8gZm9yIGV4cHJlc3Npb25zIGNvbnRhaW5pbmcgbGl0ZXJhbCBudW1iZXJzIGFuZFxuXHQgICAgICAgIC8vIGJvb2xlYW5zLCB0aGVyZSdzIG5vIG5lZWQgdG8gc2V0dXAgYSBwcm9wIGJpbmRpbmcsXG5cdCAgICAgICAgLy8gc28gd2UgY2FuIG9wdGltaXplIHRoZW0gYXMgYSBvbmUtdGltZSBzZXQuXG5cdCAgICAgICAgcHJvcC5vcHRpbWl6ZWRMaXRlcmFsID0gdHJ1ZTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9wLmR5bmFtaWMgPSB0cnVlO1xuXHQgICAgICAgIC8vIGNoZWNrIG5vbi1zZXR0YWJsZSBwYXRoIGZvciB0d28td2F5IGJpbmRpbmdzXG5cdCAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgcHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkgJiYgIXNldHRhYmxlUGF0aFJFLnRlc3QodmFsdWUpKSB7XG5cdCAgICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVk7XG5cdCAgICAgICAgICB3YXJuKCdDYW5ub3QgYmluZCB0d28td2F5IHByb3Agd2l0aCBub24tc2V0dGFibGUgJyArICdwYXJlbnQgcGF0aDogJyArIHZhbHVlLCB2bSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHByb3AucGFyZW50UGF0aCA9IHZhbHVlO1xuXHRcblx0ICAgICAgLy8gd2FybiByZXF1aXJlZCB0d28td2F5XG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9wdGlvbnMudHdvV2F5ICYmIHByb3AubW9kZSAhPT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZKSB7XG5cdCAgICAgICAgd2FybignUHJvcCBcIicgKyBuYW1lICsgJ1wiIGV4cGVjdHMgYSB0d28td2F5IGJpbmRpbmcgdHlwZS4nLCB2bSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QXR0cihlbCwgYXR0cikpICE9PSBudWxsKSB7XG5cdCAgICAgIC8vIGhhcyBsaXRlcmFsIGJpbmRpbmchXG5cdCAgICAgIHByb3AucmF3ID0gdmFsdWU7XG5cdCAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgLy8gY2hlY2sgcG9zc2libGUgY2FtZWxDYXNlIHByb3AgdXNhZ2Vcblx0ICAgICAgdmFyIGxvd2VyQ2FzZU5hbWUgPSBwYXRoLnRvTG93ZXJDYXNlKCk7XG5cdCAgICAgIHZhbHVlID0gL1tBLVpcXC1dLy50ZXN0KG5hbWUpICYmIChlbC5nZXRBdHRyaWJ1dGUobG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpKTtcblx0ICAgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgICAgd2FybignUG9zc2libGUgdXNhZ2UgZXJyb3IgZm9yIHByb3AgYCcgKyBsb3dlckNhc2VOYW1lICsgJ2AgLSAnICsgJ2RpZCB5b3UgbWVhbiBgJyArIGF0dHIgKyAnYD8gSFRNTCBpcyBjYXNlLWluc2Vuc2l0aXZlLCByZW1lbWJlciB0byB1c2UgJyArICdrZWJhYi1jYXNlIGZvciBwcm9wcyBpbiB0ZW1wbGF0ZXMuJywgdm0pO1xuXHQgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVxdWlyZWQpIHtcblx0ICAgICAgICAvLyB3YXJuIG1pc3NpbmcgcmVxdWlyZWRcblx0ICAgICAgICB3YXJuKCdNaXNzaW5nIHJlcXVpcmVkIHByb3A6ICcgKyBuYW1lLCB2bSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIHB1c2ggcHJvcFxuXHQgICAgcHJvcHMucHVzaChwcm9wKTtcblx0ICB9XG5cdCAgcmV0dXJuIG1ha2VQcm9wc0xpbmtGbihwcm9wcyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyBwcm9wcyB0byBhIHZtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBwcm9wc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gcHJvcHNMaW5rRm4odm0sIHNjb3BlKSB7XG5cdCAgICAvLyBzdG9yZSByZXNvbHZlZCBwcm9wcyBpbmZvXG5cdCAgICB2bS5fcHJvcHMgPSB7fTtcblx0ICAgIHZhciBpbmxpbmVQcm9wcyA9IHZtLiRvcHRpb25zLnByb3BzRGF0YTtcblx0ICAgIHZhciBpID0gcHJvcHMubGVuZ3RoO1xuXHQgICAgdmFyIHByb3AsIHBhdGgsIG9wdGlvbnMsIHZhbHVlLCByYXc7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHByb3AgPSBwcm9wc1tpXTtcblx0ICAgICAgcmF3ID0gcHJvcC5yYXc7XG5cdCAgICAgIHBhdGggPSBwcm9wLnBhdGg7XG5cdCAgICAgIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG5cdCAgICAgIHZtLl9wcm9wc1twYXRoXSA9IHByb3A7XG5cdCAgICAgIGlmIChpbmxpbmVQcm9wcyAmJiBoYXNPd24oaW5saW5lUHJvcHMsIHBhdGgpKSB7XG5cdCAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIGlubGluZVByb3BzW3BhdGhdKTtcblx0ICAgICAgfWlmIChyYXcgPT09IG51bGwpIHtcblx0ICAgICAgICAvLyBpbml0aWFsaXplIGFic2VudCBwcm9wXG5cdCAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHVuZGVmaW5lZCk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvcC5keW5hbWljKSB7XG5cdCAgICAgICAgLy8gZHluYW1pYyBwcm9wXG5cdCAgICAgICAgaWYgKHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfVElNRSkge1xuXHQgICAgICAgICAgLy8gb25lIHRpbWUgYmluZGluZ1xuXHQgICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0uX2NvbnRleHQgfHwgdm0pLiRnZXQocHJvcC5wYXJlbnRQYXRoKTtcblx0ICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGlmICh2bS5fY29udGV4dCkge1xuXHQgICAgICAgICAgICAvLyBkeW5hbWljIGJpbmRpbmdcblx0ICAgICAgICAgICAgdm0uX2JpbmREaXIoe1xuXHQgICAgICAgICAgICAgIG5hbWU6ICdwcm9wJyxcblx0ICAgICAgICAgICAgICBkZWY6IHByb3BEZWYsXG5cdCAgICAgICAgICAgICAgcHJvcDogcHJvcFxuXHQgICAgICAgICAgICB9LCBudWxsLCBudWxsLCBzY29wZSk7IC8vIGVsLCBob3N0LCBzY29wZVxuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICAvLyByb290IGluc3RhbmNlXG5cdCAgICAgICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZtLiRnZXQocHJvcC5wYXJlbnRQYXRoKSk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvcC5vcHRpbWl6ZWRMaXRlcmFsKSB7XG5cdCAgICAgICAgLy8gb3B0aW1pemVkIGxpdGVyYWwsIGNhc3QgaXQgYW5kIGp1c3Qgc2V0IG9uY2Vcblx0ICAgICAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhyYXcpO1xuXHQgICAgICAgIHZhbHVlID0gc3RyaXBwZWQgPT09IHJhdyA/IHRvQm9vbGVhbih0b051bWJlcihyYXcpKSA6IHN0cmlwcGVkO1xuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gc3RyaW5nIGxpdGVyYWwsIGJ1dCB3ZSBuZWVkIHRvIGNhdGVyIGZvclxuXHQgICAgICAgIC8vIEJvb2xlYW4gcHJvcHMgd2l0aCBubyB2YWx1ZSwgb3Igd2l0aCBzYW1lXG5cdCAgICAgICAgLy8gbGl0ZXJhbCB2YWx1ZSAoZS5nLiBkaXNhYmxlZD1cImRpc2FibGVkXCIpXG5cdCAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtbG9hZGVyL2lzc3Vlcy8xODJcblx0ICAgICAgICB2YWx1ZSA9IG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiAmJiAocmF3ID09PSAnJyB8fCByYXcgPT09IGh5cGhlbmF0ZShwcm9wLm5hbWUpKSA/IHRydWUgOiByYXc7XG5cdCAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIGEgcHJvcCB3aXRoIGEgcmF3VmFsdWUsIGFwcGx5aW5nIG5lY2Vzc2FyeSBjb2Vyc2lvbnMsXG5cdCAqIGRlZmF1bHQgdmFsdWVzICYgYXNzZXJ0aW9ucyBhbmQgY2FsbCB0aGUgZ2l2ZW4gY2FsbGJhY2sgd2l0aFxuXHQgKiBwcm9jZXNzZWQgdmFsdWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHJhd1ZhbHVlXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgcmF3VmFsdWUsIGZuKSB7XG5cdCAgdmFyIGlzU2ltcGxlID0gcHJvcC5keW5hbWljICYmIGlzU2ltcGxlUGF0aChwcm9wLnBhcmVudFBhdGgpO1xuXHQgIHZhciB2YWx1ZSA9IHJhd1ZhbHVlO1xuXHQgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApO1xuXHQgIH1cblx0ICB2YWx1ZSA9IGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKTtcblx0ICB2YXIgY29lcmNlZCA9IHZhbHVlICE9PSByYXdWYWx1ZTtcblx0ICBpZiAoIWFzc2VydFByb3AocHJvcCwgdmFsdWUsIHZtKSkge1xuXHQgICAgdmFsdWUgPSB1bmRlZmluZWQ7XG5cdCAgfVxuXHQgIGlmIChpc1NpbXBsZSAmJiAhY29lcmNlZCkge1xuXHQgICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuXHQgICAgICBmbih2YWx1ZSk7XG5cdCAgICB9KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZm4odmFsdWUpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFNldCBhIHByb3AncyBpbml0aWFsIHZhbHVlIG9uIGEgdm0gYW5kIGl0cyBkYXRhIG9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcblx0ICBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCB2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICBkZWZpbmVSZWFjdGl2ZSh2bSwgcHJvcC5wYXRoLCB2YWx1ZSk7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBVcGRhdGUgYSBwcm9wJ3MgdmFsdWUgb24gYSB2bS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiB1cGRhdGVQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xuXHQgIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIHZtW3Byb3AucGF0aF0gPSB2YWx1ZTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcmV0dXJuIHsqfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApIHtcblx0ICAvLyBubyBkZWZhdWx0LCByZXR1cm4gdW5kZWZpbmVkXG5cdCAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG5cdCAgaWYgKCFoYXNPd24ob3B0aW9ucywgJ2RlZmF1bHQnKSkge1xuXHQgICAgLy8gYWJzZW50IGJvb2xlYW4gdmFsdWUgZGVmYXVsdHMgdG8gZmFsc2Vcblx0ICAgIHJldHVybiBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gPyBmYWxzZSA6IHVuZGVmaW5lZDtcblx0ICB9XG5cdCAgdmFyIGRlZiA9IG9wdGlvbnNbJ2RlZmF1bHQnXTtcblx0ICAvLyB3YXJuIGFnYWluc3Qgbm9uLWZhY3RvcnkgZGVmYXVsdHMgZm9yIE9iamVjdCAmIEFycmF5XG5cdCAgaWYgKGlzT2JqZWN0KGRlZikpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBkZWZhdWx0IHZhbHVlIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIjogJyArICdQcm9wcyB3aXRoIHR5cGUgT2JqZWN0L0FycmF5IG11c3QgdXNlIGEgZmFjdG9yeSBmdW5jdGlvbiAnICsgJ3RvIHJldHVybiB0aGUgZGVmYXVsdCB2YWx1ZS4nLCB2bSk7XG5cdCAgfVxuXHQgIC8vIGNhbGwgZmFjdG9yeSBmdW5jdGlvbiBmb3Igbm9uLUZ1bmN0aW9uIHR5cGVzXG5cdCAgcmV0dXJuIHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicgJiYgb3B0aW9ucy50eXBlICE9PSBGdW5jdGlvbiA/IGRlZi5jYWxsKHZtKSA6IGRlZjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFzc2VydCB3aGV0aGVyIGEgcHJvcCBpcyB2YWxpZC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkge1xuXHQgIGlmICghcHJvcC5vcHRpb25zLnJlcXVpcmVkICYmICggLy8gbm9uLXJlcXVpcmVkXG5cdCAgcHJvcC5yYXcgPT09IG51bGwgfHwgLy8gYWJzY2VudFxuXHQgIHZhbHVlID09IG51bGwpIC8vIG51bGwgb3IgdW5kZWZpbmVkXG5cdCAgKSB7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuXHQgIHZhciB0eXBlID0gb3B0aW9ucy50eXBlO1xuXHQgIHZhciB2YWxpZCA9ICF0eXBlO1xuXHQgIHZhciBleHBlY3RlZFR5cGVzID0gW107XG5cdCAgaWYgKHR5cGUpIHtcblx0ICAgIGlmICghaXNBcnJheSh0eXBlKSkge1xuXHQgICAgICB0eXBlID0gW3R5cGVdO1xuXHQgICAgfVxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aCAmJiAhdmFsaWQ7IGkrKykge1xuXHQgICAgICB2YXIgYXNzZXJ0ZWRUeXBlID0gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZVtpXSk7XG5cdCAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChhc3NlcnRlZFR5cGUuZXhwZWN0ZWRUeXBlKTtcblx0ICAgICAgdmFsaWQgPSBhc3NlcnRlZFR5cGUudmFsaWQ7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICghdmFsaWQpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHdhcm4oJ0ludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicgKyAnIEV4cGVjdGVkICcgKyBleHBlY3RlZFR5cGVzLm1hcChmb3JtYXRUeXBlKS5qb2luKCcsICcpICsgJywgZ290ICcgKyBmb3JtYXRWYWx1ZSh2YWx1ZSkgKyAnLicsIHZtKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIHZhbGlkYXRvciA9IG9wdGlvbnMudmFsaWRhdG9yO1xuXHQgIGlmICh2YWxpZGF0b3IpIHtcblx0ICAgIGlmICghdmFsaWRhdG9yKHZhbHVlKSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicsIHZtKTtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcmNlIHBhcnNpbmcgdmFsdWUgd2l0aCBjb2VyY2Ugb3B0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4geyp9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcblx0ICB2YXIgY29lcmNlID0gcHJvcC5vcHRpb25zLmNvZXJjZTtcblx0ICBpZiAoIWNvZXJjZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIGNvZXJjZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGNvZXJjZSh2YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBjb2VyY2UgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiBleHBlY3RlZCBmdW5jdGlvbiwgZ290ICcgKyB0eXBlb2YgY29lcmNlICsgJy4nLCB2bSk7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQXNzZXJ0IHRoZSB0eXBlIG9mIGEgdmFsdWVcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSB0eXBlXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlKSB7XG5cdCAgdmFyIHZhbGlkO1xuXHQgIHZhciBleHBlY3RlZFR5cGU7XG5cdCAgaWYgKHR5cGUgPT09IFN0cmluZykge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ3N0cmluZyc7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gTnVtYmVyKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnbnVtYmVyJztcblx0ICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBCb29sZWFuKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnYm9vbGVhbic7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gRnVuY3Rpb24pIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdmdW5jdGlvbic7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gT2JqZWN0KSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnb2JqZWN0Jztcblx0ICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdCh2YWx1ZSk7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBBcnJheSkge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ2FycmF5Jztcblx0ICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhbGlkID0gdmFsdWUgaW5zdGFuY2VvZiB0eXBlO1xuXHQgIH1cblx0ICByZXR1cm4ge1xuXHQgICAgdmFsaWQ6IHZhbGlkLFxuXHQgICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IHR5cGUgZm9yIG91dHB1dFxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0VHlwZSh0eXBlKSB7XG5cdCAgcmV0dXJuIHR5cGUgPyB0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKSA6ICdjdXN0b20gdHlwZSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JtYXQgdmFsdWVcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsKSB7XG5cdCAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpLnNsaWNlKDgsIC0xKTtcblx0fVxuXHRcblx0dmFyIGJpbmRpbmdNb2RlcyA9IGNvbmZpZy5fcHJvcEJpbmRpbmdNb2Rlcztcblx0XG5cdHZhciBwcm9wRGVmID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGNoaWxkID0gdGhpcy52bTtcblx0ICAgIHZhciBwYXJlbnQgPSBjaGlsZC5fY29udGV4dDtcblx0ICAgIC8vIHBhc3NlZCBpbiBmcm9tIGNvbXBpbGVyIGRpcmVjdGx5XG5cdCAgICB2YXIgcHJvcCA9IHRoaXMuZGVzY3JpcHRvci5wcm9wO1xuXHQgICAgdmFyIGNoaWxkS2V5ID0gcHJvcC5wYXRoO1xuXHQgICAgdmFyIHBhcmVudEtleSA9IHByb3AucGFyZW50UGF0aDtcblx0ICAgIHZhciB0d29XYXkgPSBwcm9wLm1vZGUgPT09IGJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuXHRcblx0ICAgIHZhciBwYXJlbnRXYXRjaGVyID0gdGhpcy5wYXJlbnRXYXRjaGVyID0gbmV3IFdhdGNoZXIocGFyZW50LCBwYXJlbnRLZXksIGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgdXBkYXRlUHJvcChjaGlsZCwgcHJvcCwgdmFsKTtcblx0ICAgIH0sIHtcblx0ICAgICAgdHdvV2F5OiB0d29XYXksXG5cdCAgICAgIGZpbHRlcnM6IHByb3AuZmlsdGVycyxcblx0ICAgICAgLy8gaW1wb3J0YW50OiBwcm9wcyBuZWVkIHRvIGJlIG9ic2VydmVkIG9uIHRoZVxuXHQgICAgICAvLyB2LWZvciBzY29wZSBpZiBwcmVzZW50XG5cdCAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuXHQgICAgfSk7XG5cdFxuXHQgICAgLy8gc2V0IHRoZSBjaGlsZCBpbml0aWFsIHZhbHVlLlxuXHQgICAgaW5pdFByb3AoY2hpbGQsIHByb3AsIHBhcmVudFdhdGNoZXIudmFsdWUpO1xuXHRcblx0ICAgIC8vIHNldHVwIHR3by13YXkgYmluZGluZ1xuXHQgICAgaWYgKHR3b1dheSkge1xuXHQgICAgICAvLyBpbXBvcnRhbnQ6IGRlZmVyIHRoZSBjaGlsZCB3YXRjaGVyIGNyZWF0aW9uIHVudGlsXG5cdCAgICAgIC8vIHRoZSBjcmVhdGVkIGhvb2sgKGFmdGVyIGRhdGEgb2JzZXJ2YXRpb24pXG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgY2hpbGQuJG9uY2UoJ3ByZS1ob29rOmNyZWF0ZWQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgc2VsZi5jaGlsZFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihjaGlsZCwgY2hpbGRLZXksIGZ1bmN0aW9uICh2YWwpIHtcblx0ICAgICAgICAgIHBhcmVudFdhdGNoZXIuc2V0KHZhbCk7XG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgLy8gZW5zdXJlIHN5bmMgdXB3YXJkIGJlZm9yZSBwYXJlbnQgc3luYyBkb3duLlxuXHQgICAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3NhcnkgaW4gY2FzZXMgZS5nLiB0aGUgY2hpbGRcblx0ICAgICAgICAgIC8vIG11dGF0ZXMgYSBwcm9wIGFycmF5LCB0aGVuIHJlcGxhY2VzIGl0LiAoIzE2ODMpXG5cdCAgICAgICAgICBzeW5jOiB0cnVlXG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5wYXJlbnRXYXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICBpZiAodGhpcy5jaGlsZFdhdGNoZXIpIHtcblx0ICAgICAgdGhpcy5jaGlsZFdhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcXVldWUkMSA9IFtdO1xuXHR2YXIgcXVldWVkID0gZmFsc2U7XG5cdFxuXHQvKipcblx0ICogUHVzaCBhIGpvYiBpbnRvIHRoZSBxdWV1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gam9iXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHVzaEpvYihqb2IpIHtcblx0ICBxdWV1ZSQxLnB1c2goam9iKTtcblx0ICBpZiAoIXF1ZXVlZCkge1xuXHQgICAgcXVldWVkID0gdHJ1ZTtcblx0ICAgIG5leHRUaWNrKGZsdXNoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGbHVzaCB0aGUgcXVldWUsIGFuZCBkbyBvbmUgZm9yY2VkIHJlZmxvdyBiZWZvcmVcblx0ICogdHJpZ2dlcmluZyB0cmFuc2l0aW9ucy5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmbHVzaCgpIHtcblx0ICAvLyBGb3JjZSBsYXlvdXRcblx0ICB2YXIgZiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7XG5cdCAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZSQxLmxlbmd0aDsgaSsrKSB7XG5cdCAgICBxdWV1ZSQxW2ldKCk7XG5cdCAgfVxuXHQgIHF1ZXVlJDEgPSBbXTtcblx0ICBxdWV1ZWQgPSBmYWxzZTtcblx0ICAvLyBkdW1teSByZXR1cm4sIHNvIGpzIGxpbnRlcnMgZG9uJ3QgY29tcGxhaW4gYWJvdXRcblx0ICAvLyB1bnVzZWQgdmFyaWFibGUgZlxuXHQgIHJldHVybiBmO1xuXHR9XG5cdFxuXHR2YXIgVFlQRV9UUkFOU0lUSU9OID0gJ3RyYW5zaXRpb24nO1xuXHR2YXIgVFlQRV9BTklNQVRJT04gPSAnYW5pbWF0aW9uJztcblx0dmFyIHRyYW5zRHVyYXRpb25Qcm9wID0gdHJhbnNpdGlvblByb3AgKyAnRHVyYXRpb24nO1xuXHR2YXIgYW5pbUR1cmF0aW9uUHJvcCA9IGFuaW1hdGlvblByb3AgKyAnRHVyYXRpb24nO1xuXHRcblx0LyoqXG5cdCAqIElmIGEganVzdC1lbnRlcmVkIGVsZW1lbnQgaXMgYXBwbGllZCB0aGVcblx0ICogbGVhdmUgY2xhc3Mgd2hpbGUgaXRzIGVudGVyIHRyYW5zaXRpb24gaGFzbid0IHN0YXJ0ZWQgeWV0LFxuXHQgKiBhbmQgdGhlIHRyYW5zaXRpb25lZCBwcm9wZXJ0eSBoYXMgdGhlIHNhbWUgdmFsdWUgZm9yIGJvdGhcblx0ICogZW50ZXIvbGVhdmUsIHRoZW4gdGhlIGxlYXZlIHRyYW5zaXRpb24gd2lsbCBiZSBza2lwcGVkIGFuZFxuXHQgKiB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gVGhpcyBmdW5jdGlvbiBlbnN1cmVzXG5cdCAqIGl0cyBjYWxsYmFjayB0byBiZSBjYWxsZWQgYWZ0ZXIgYSB0cmFuc2l0aW9uIGhhcyBzdGFydGVkXG5cdCAqIGJ5IHdhaXRpbmcgZm9yIGRvdWJsZSByYWYuXG5cdCAqXG5cdCAqIEl0IGZhbGxzIGJhY2sgdG8gc2V0VGltZW91dCBvbiBkZXZpY2VzIHRoYXQgc3VwcG9ydCBDU1Ncblx0ICogdHJhbnNpdGlvbnMgYnV0IG5vdCByYWYgKGUuZy4gQW5kcm9pZCA0LjIgYnJvd3NlcikgLSBzaW5jZVxuXHQgKiB0aGVzZSBlbnZpcm9ubWVudHMgYXJlIHVzdWFsbHkgc2xvdywgd2UgYXJlIGdpdmluZyBpdCBhXG5cdCAqIHJlbGF0aXZlbHkgbGFyZ2UgdGltZW91dC5cblx0ICovXG5cdFxuXHR2YXIgcmFmID0gaW5Ccm93c2VyICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG5cdHZhciB3YWl0Rm9yVHJhbnNpdGlvblN0YXJ0ID0gcmFmXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdD8gZnVuY3Rpb24gKGZuKSB7XG5cdCAgcmFmKGZ1bmN0aW9uICgpIHtcblx0ICAgIHJhZihmbik7XG5cdCAgfSk7XG5cdH0gOiBmdW5jdGlvbiAoZm4pIHtcblx0ICBzZXRUaW1lb3V0KGZuLCA1MCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQSBUcmFuc2l0aW9uIG9iamVjdCB0aGF0IGVuY2Fwc3VsYXRlcyB0aGUgc3RhdGUgYW5kIGxvZ2ljXG5cdCAqIG9mIHRoZSB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuXHQgKiBAcGFyYW0ge09iamVjdH0gaG9va3Ncblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRmdW5jdGlvbiBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHZtKSB7XG5cdCAgdGhpcy5pZCA9IGlkO1xuXHQgIHRoaXMuZWwgPSBlbDtcblx0ICB0aGlzLmVudGVyQ2xhc3MgPSBob29rcyAmJiBob29rcy5lbnRlckNsYXNzIHx8IGlkICsgJy1lbnRlcic7XG5cdCAgdGhpcy5sZWF2ZUNsYXNzID0gaG9va3MgJiYgaG9va3MubGVhdmVDbGFzcyB8fCBpZCArICctbGVhdmUnO1xuXHQgIHRoaXMuaG9va3MgPSBob29rcztcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgLy8gYXN5bmMgc3RhdGVcblx0ICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuXHQgIHRoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcblx0ICB0aGlzLmVudGVyZWQgPSB0aGlzLmxlZnQgPSBmYWxzZTtcblx0ICB0aGlzLnR5cGVDYWNoZSA9IHt9O1xuXHQgIC8vIGNoZWNrIGNzcyB0cmFuc2l0aW9uIHR5cGVcblx0ICB0aGlzLnR5cGUgPSBob29rcyAmJiBob29rcy50eXBlO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICBpZiAodGhpcy50eXBlICYmIHRoaXMudHlwZSAhPT0gVFlQRV9UUkFOU0lUSU9OICYmIHRoaXMudHlwZSAhPT0gVFlQRV9BTklNQVRJT04pIHtcblx0ICAgICAgd2FybignaW52YWxpZCBDU1MgdHJhbnNpdGlvbiB0eXBlIGZvciB0cmFuc2l0aW9uPVwiJyArIHRoaXMuaWQgKyAnXCI6ICcgKyB0aGlzLnR5cGUsIHZtKTtcblx0ICAgIH1cblx0ICB9XG5cdCAgLy8gYmluZFxuXHQgIHZhciBzZWxmID0gdGhpcztbJ2VudGVyTmV4dFRpY2snLCAnZW50ZXJEb25lJywgJ2xlYXZlTmV4dFRpY2snLCAnbGVhdmVEb25lJ10uZm9yRWFjaChmdW5jdGlvbiAobSkge1xuXHQgICAgc2VsZlttXSA9IGJpbmQoc2VsZlttXSwgc2VsZik7XG5cdCAgfSk7XG5cdH1cblx0XG5cdHZhciBwJDEgPSBUcmFuc2l0aW9uLnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBTdGFydCBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiAxLiBlbnRlciB0cmFuc2l0aW9uIHRyaWdnZXJlZFxuXHQgKiAyLiBjYWxsIGJlZm9yZUVudGVyIGhvb2tcblx0ICogMy4gYWRkIGVudGVyIGNsYXNzXG5cdCAqIDQuIGluc2VydC9zaG93IGVsZW1lbnRcblx0ICogNS4gY2FsbCBlbnRlciBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuXHQgKiA2LiByZWZsb3dcblx0ICogNy4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuXHQgKiAgICAtIHRyYW5zaXRpb246XG5cdCAqICAgICAgICByZW1vdmUgY2xhc3Mgbm93LCB3YWl0IGZvciB0cmFuc2l0aW9uZW5kLFxuXHQgKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqICAgIC0gYW5pbWF0aW9uOlxuXHQgKiAgICAgICAgd2FpdCBmb3IgYW5pbWF0aW9uZW5kLCByZW1vdmUgY2xhc3MsXG5cdCAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cblx0ICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcblx0ICogICAgICAgIGRvbmUgbm93IGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqIDguIHdhaXQgZm9yIGVpdGhlciBkb25lIG9yIGpzIGNhbGxiYWNrLCB0aGVuIGNhbGxcblx0ICogICAgYWZ0ZXJFbnRlciBob29rLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIGluc2VydC9zaG93IHRoZSBlbGVtZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRwJDEuZW50ZXIgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG5cdCAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYmVmb3JlRW50ZXInKTtcblx0ICB0aGlzLmNiID0gY2I7XG5cdCAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICBvcCgpO1xuXHQgIHRoaXMuZW50ZXJlZCA9IGZhbHNlO1xuXHQgIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2VudGVyJyk7XG5cdCAgaWYgKHRoaXMuZW50ZXJlZCkge1xuXHQgICAgcmV0dXJuOyAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG5cdCAgfVxuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmVudGVyQ2FuY2VsbGVkO1xuXHQgIHB1c2hKb2IodGhpcy5lbnRlck5leHRUaWNrKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24sIHdoaWNoIGlzXG5cdCAqIHRvIGJlIHB1c2hlZCBpbnRvIGEgcXVldWUgYW5kIGV4ZWN1dGVkIGFmdGVyIGEgcmVmbG93IHNvXG5cdCAqIHRoYXQgcmVtb3ZpbmcgdGhlIGNsYXNzIGNhbiB0cmlnZ2VyIGEgQ1NTIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmVudGVyTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgLy8gcHJldmVudCB0cmFuc2l0aW9uIHNraXBwaW5nXG5cdCAgdGhpcy5qdXN0RW50ZXJlZCA9IHRydWU7XG5cdCAgd2FpdEZvclRyYW5zaXRpb25TdGFydChmdW5jdGlvbiAoKSB7XG5cdCAgICBfdGhpcy5qdXN0RW50ZXJlZCA9IGZhbHNlO1xuXHQgIH0pO1xuXHQgIHZhciBlbnRlckRvbmUgPSB0aGlzLmVudGVyRG9uZTtcblx0ICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5lbnRlckNsYXNzKTtcblx0ICBpZiAoIXRoaXMucGVuZGluZ0pzQ2IpIHtcblx0ICAgIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcblx0ICAgICAgLy8gdHJpZ2dlciB0cmFuc2l0aW9uIGJ5IHJlbW92aW5nIGVudGVyIGNsYXNzIG5vd1xuXHQgICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgICAgICB0aGlzLnNldHVwQ3NzQ2IodHJhbnNpdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX0FOSU1BVElPTikge1xuXHQgICAgICB0aGlzLnNldHVwQ3NzQ2IoYW5pbWF0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbnRlckRvbmUoKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuXHQgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmVudGVyRG9uZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLmVudGVyZWQgPSB0cnVlO1xuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG5cdCAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICB0aGlzLmNhbGxIb29rKCdhZnRlckVudGVyJyk7XG5cdCAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTdGFydCBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cblx0ICpcblx0ICogMS4gbGVhdmUgdHJhbnNpdGlvbiB0cmlnZ2VyZWQuXG5cdCAqIDIuIGNhbGwgYmVmb3JlTGVhdmUgaG9va1xuXHQgKiAzLiBhZGQgbGVhdmUgY2xhc3MgKHRyaWdnZXIgY3NzIHRyYW5zaXRpb24pXG5cdCAqIDQuIGNhbGwgbGVhdmUgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcblx0ICogNS4gcmVmbG93IGlmIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrIGlzIHByb3ZpZGVkXG5cdCAqIDYuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcblx0ICogICAgLSB0cmFuc2l0aW9uIG9yIGFuaW1hdGlvbjpcblx0ICogICAgICAgIHdhaXQgZm9yIGVuZCBldmVudCwgcmVtb3ZlIGNsYXNzLCB0aGVuIGRvbmUgaWZcblx0ICogICAgICAgIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG5cdCAqICAgICAgICBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqIDcuIHdhaXQgZm9yIGVpdGhlciBkb25lIG9yIGpzIGNhbGxiYWNrLCB0aGVuIGNhbGxcblx0ICogICAgYWZ0ZXJMZWF2ZSBob29rLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHJlbW92ZS9oaWRlIHRoZSBlbGVtZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRwJDEubGVhdmUgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG5cdCAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYmVmb3JlTGVhdmUnKTtcblx0ICB0aGlzLm9wID0gb3A7XG5cdCAgdGhpcy5jYiA9IGNiO1xuXHQgIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgdGhpcy5sZWZ0ID0gZmFsc2U7XG5cdCAgdGhpcy5jYWxsSG9va1dpdGhDYignbGVhdmUnKTtcblx0ICBpZiAodGhpcy5sZWZ0KSB7XG5cdCAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cblx0ICB9XG5cdCAgdGhpcy5jYW5jZWwgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MubGVhdmVDYW5jZWxsZWQ7XG5cdCAgLy8gb25seSBuZWVkIHRvIGhhbmRsZSBsZWF2ZURvbmUgaWZcblx0ICAvLyAxLiB0aGUgdHJhbnNpdGlvbiBpcyBhbHJlYWR5IGRvbmUgKHN5bmNocm9ub3VzbHkgY2FsbGVkXG5cdCAgLy8gICAgYnkgdGhlIHVzZXIsIHdoaWNoIGNhdXNlcyB0aGlzLm9wIHNldCB0byBudWxsKVxuXHQgIC8vIDIuIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2tcblx0ICBpZiAodGhpcy5vcCAmJiAhdGhpcy5wZW5kaW5nSnNDYikge1xuXHQgICAgLy8gaWYgYSBDU1MgdHJhbnNpdGlvbiBsZWF2ZXMgaW1tZWRpYXRlbHkgYWZ0ZXIgZW50ZXIsXG5cdCAgICAvLyB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gdGhlcmVmb3JlIHdlXG5cdCAgICAvLyBkZXRlY3Qgc3VjaCBjYXNlcyBhbmQgZW5kIHRoZSBsZWF2ZSBpbW1lZGlhdGVseS5cblx0ICAgIGlmICh0aGlzLmp1c3RFbnRlcmVkKSB7XG5cdCAgICAgIHRoaXMubGVhdmVEb25lKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwdXNoSm9iKHRoaXMubGVhdmVOZXh0VGljayk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmxlYXZlTmV4dFRpY2sgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgaWYgKHR5cGUpIHtcblx0ICAgIHZhciBldmVudCA9IHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTiA/IHRyYW5zaXRpb25FbmRFdmVudCA6IGFuaW1hdGlvbkVuZEV2ZW50O1xuXHQgICAgdGhpcy5zZXR1cENzc0NiKGV2ZW50LCB0aGlzLmxlYXZlRG9uZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRoaXMubGVhdmVEb25lKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEubGVhdmVEb25lID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMubGVmdCA9IHRydWU7XG5cdCAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcblx0ICB0aGlzLm9wKCk7XG5cdCAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcblx0ICB0aGlzLmNhbGxIb29rKCdhZnRlckxlYXZlJyk7XG5cdCAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcblx0ICB0aGlzLm9wID0gbnVsbDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYW5jZWwgYW55IHBlbmRpbmcgY2FsbGJhY2tzIGZyb20gYSBwcmV2aW91c2x5IHJ1bm5pbmdcblx0ICogYnV0IG5vdCBmaW5pc2hlZCB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5jYW5jZWxQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuXHQgIHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcblx0ICB2YXIgaGFzUGVuZGluZyA9IGZhbHNlO1xuXHQgIGlmICh0aGlzLnBlbmRpbmdDc3NDYikge1xuXHQgICAgaGFzUGVuZGluZyA9IHRydWU7XG5cdCAgICBvZmYodGhpcy5lbCwgdGhpcy5wZW5kaW5nQ3NzRXZlbnQsIHRoaXMucGVuZGluZ0Nzc0NiKTtcblx0ICAgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBudWxsO1xuXHQgIH1cblx0ICBpZiAodGhpcy5wZW5kaW5nSnNDYikge1xuXHQgICAgaGFzUGVuZGluZyA9IHRydWU7XG5cdCAgICB0aGlzLnBlbmRpbmdKc0NiLmNhbmNlbCgpO1xuXHQgICAgdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG5cdCAgfVxuXHQgIGlmIChoYXNQZW5kaW5nKSB7XG5cdCAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuXHQgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMuY2FuY2VsKSB7XG5cdCAgICB0aGlzLmNhbmNlbC5jYWxsKHRoaXMudm0sIHRoaXMuZWwpO1xuXHQgICAgdGhpcy5jYW5jZWwgPSBudWxsO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGEgdXNlci1wcm92aWRlZCBzeW5jaHJvbm91cyBob29rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0XG5cdHAkMS5jYWxsSG9vayA9IGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgaWYgKHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXSkge1xuXHQgICAgdGhpcy5ob29rc1t0eXBlXS5jYWxsKHRoaXMudm0sIHRoaXMuZWwpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGEgdXNlci1wcm92aWRlZCwgcG90ZW50aWFsbHktYXN5bmMgaG9vayBmdW5jdGlvbi5cblx0ICogV2UgY2hlY2sgZm9yIHRoZSBsZW5ndGggb2YgYXJndW1lbnRzIHRvIHNlZSBpZiB0aGUgaG9va1xuXHQgKiBleHBlY3RzIGEgYGRvbmVgIGNhbGxiYWNrLiBJZiB0cnVlLCB0aGUgdHJhbnNpdGlvbidzIGVuZFxuXHQgKiB3aWxsIGJlIGRldGVybWluZWQgYnkgd2hlbiB0aGUgdXNlciBjYWxscyB0aGF0IGNhbGxiYWNrO1xuXHQgKiBvdGhlcndpc2UsIHRoZSBlbmQgaXMgZGV0ZXJtaW5lZCBieSB0aGUgQ1NTIHRyYW5zaXRpb24gb3Jcblx0ICogYW5pbWF0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0XG5cdHAkMS5jYWxsSG9va1dpdGhDYiA9IGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgdmFyIGhvb2sgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV07XG5cdCAgaWYgKGhvb2spIHtcblx0ICAgIGlmIChob29rLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgdGhpcy5wZW5kaW5nSnNDYiA9IGNhbmNlbGxhYmxlKHRoaXNbdHlwZSArICdEb25lJ10pO1xuXHQgICAgfVxuXHQgICAgaG9vay5jYWxsKHRoaXMudm0sIHRoaXMuZWwsIHRoaXMucGVuZGluZ0pzQ2IpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBHZXQgYW4gZWxlbWVudCdzIHRyYW5zaXRpb24gdHlwZSBiYXNlZCBvbiB0aGVcblx0ICogY2FsY3VsYXRlZCBzdHlsZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWVcblx0ICogQHJldHVybiB7TnVtYmVyfVxuXHQgKi9cblx0XG5cdHAkMS5nZXRDc3NUcmFuc2l0aW9uVHlwZSA9IGZ1bmN0aW9uIChjbGFzc05hbWUpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuXHQgIC8vIHNraXAgQ1NTIHRyYW5zaXRpb25zIGlmIHBhZ2UgaXMgbm90IHZpc2libGUgLVxuXHQgIC8vIHRoaXMgc29sdmVzIHRoZSBpc3N1ZSBvZiB0cmFuc2l0aW9uZW5kIGV2ZW50cyBub3Rcblx0ICAvLyBmaXJpbmcgdW50aWwgdGhlIHBhZ2UgaXMgdmlzaWJsZSBhZ2Fpbi5cblx0ICAvLyBwYWdlVmlzaWJpbGl0eSBBUEkgaXMgc3VwcG9ydGVkIGluIElFMTArLCBzYW1lIGFzXG5cdCAgLy8gQ1NTIHRyYW5zaXRpb25zLlxuXHQgIGRvY3VtZW50LmhpZGRlbiB8fFxuXHQgIC8vIGV4cGxpY2l0IGpzLW9ubHkgdHJhbnNpdGlvblxuXHQgIHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5jc3MgPT09IGZhbHNlIHx8XG5cdCAgLy8gZWxlbWVudCBpcyBoaWRkZW5cblx0ICBpc0hpZGRlbih0aGlzLmVsKSkge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgdHlwZSA9IHRoaXMudHlwZSB8fCB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdO1xuXHQgIGlmICh0eXBlKSByZXR1cm4gdHlwZTtcblx0ICB2YXIgaW5saW5lU3R5bGVzID0gdGhpcy5lbC5zdHlsZTtcblx0ICB2YXIgY29tcHV0ZWRTdHlsZXMgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmVsKTtcblx0ICB2YXIgdHJhbnNEdXJhdGlvbiA9IGlubGluZVN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdO1xuXHQgIGlmICh0cmFuc0R1cmF0aW9uICYmIHRyYW5zRHVyYXRpb24gIT09ICcwcycpIHtcblx0ICAgIHR5cGUgPSBUWVBFX1RSQU5TSVRJT047XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBhbmltRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF07XG5cdCAgICBpZiAoYW5pbUR1cmF0aW9uICYmIGFuaW1EdXJhdGlvbiAhPT0gJzBzJykge1xuXHQgICAgICB0eXBlID0gVFlQRV9BTklNQVRJT047XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmICh0eXBlKSB7XG5cdCAgICB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdID0gdHlwZTtcblx0ICB9XG5cdCAgcmV0dXJuIHR5cGU7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0dXAgYSBDU1MgdHJhbnNpdGlvbmVuZC9hbmltYXRpb25lbmQgY2FsbGJhY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdHAkMS5zZXR1cENzc0NiID0gZnVuY3Rpb24gKGV2ZW50LCBjYikge1xuXHQgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gZXZlbnQ7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgdmFyIG9uRW5kID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBmdW5jdGlvbiAoZSkge1xuXHQgICAgaWYgKGUudGFyZ2V0ID09PSBlbCkge1xuXHQgICAgICBvZmYoZWwsIGV2ZW50LCBvbkVuZCk7XG5cdCAgICAgIHNlbGYucGVuZGluZ0Nzc0V2ZW50ID0gc2VsZi5wZW5kaW5nQ3NzQ2IgPSBudWxsO1xuXHQgICAgICBpZiAoIXNlbGYucGVuZGluZ0pzQ2IgJiYgY2IpIHtcblx0ICAgICAgICBjYigpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0ICBvbihlbCwgZXZlbnQsIG9uRW5kKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGhpZGRlbiAtIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdFxuXHQgKiBza2lwIHRoZSB0cmFuc2l0aW9uIGFsbHRvZ2V0aGVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNIaWRkZW4oZWwpIHtcblx0ICBpZiAoL3N2ZyQvLnRlc3QoZWwubmFtZXNwYWNlVVJJKSkge1xuXHQgICAgLy8gU1ZHIGVsZW1lbnRzIGRvIG5vdCBoYXZlIG9mZnNldChXaWR0aHxIZWlnaHQpXG5cdCAgICAvLyBzbyB3ZSBuZWVkIHRvIGNoZWNrIHRoZSBjbGllbnQgcmVjdFxuXHQgICAgdmFyIHJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0ICAgIHJldHVybiAhKHJlY3Qud2lkdGggfHwgcmVjdC5oZWlnaHQpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gIShlbC5vZmZzZXRXaWR0aCB8fCBlbC5vZmZzZXRIZWlnaHQgfHwgZWwuZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIHRyYW5zaXRpb24kMSA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IFRSQU5TSVRJT04sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGlkLCBvbGRJZCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIC8vIHJlc29sdmUgb24gb3duZXIgdm1cblx0ICAgIHZhciBob29rcyA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAndHJhbnNpdGlvbnMnLCBpZCk7XG5cdCAgICBpZCA9IGlkIHx8ICd2Jztcblx0ICAgIG9sZElkID0gb2xkSWQgfHwgJ3YnO1xuXHQgICAgZWwuX192X3RyYW5zID0gbmV3IFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdGhpcy52bSk7XG5cdCAgICByZW1vdmVDbGFzcyhlbCwgb2xkSWQgKyAnLXRyYW5zaXRpb24nKTtcblx0ICAgIGFkZENsYXNzKGVsLCBpZCArICctdHJhbnNpdGlvbicpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBpbnRlcm5hbERpcmVjdGl2ZXMgPSB7XG5cdCAgc3R5bGU6IHN0eWxlLFxuXHQgICdjbGFzcyc6IHZDbGFzcyxcblx0ICBjb21wb25lbnQ6IGNvbXBvbmVudCxcblx0ICBwcm9wOiBwcm9wRGVmLFxuXHQgIHRyYW5zaXRpb246IHRyYW5zaXRpb24kMVxuXHR9O1xuXHRcblx0Ly8gc3BlY2lhbCBiaW5kaW5nIHByZWZpeGVzXG5cdHZhciBiaW5kUkUgPSAvXnYtYmluZDp8XjovO1xuXHR2YXIgb25SRSA9IC9edi1vbjp8XkAvO1xuXHR2YXIgZGlyQXR0clJFID0gL152LShbXjpdKykoPzokfDooLiopJCkvO1xuXHR2YXIgbW9kaWZpZXJSRSA9IC9cXC5bXlxcLl0rL2c7XG5cdHZhciB0cmFuc2l0aW9uUkUgPSAvXih2LWJpbmQ6fDopP3RyYW5zaXRpb24kLztcblx0XG5cdC8vIGRlZmF1bHQgZGlyZWN0aXZlIHByaW9yaXR5XG5cdHZhciBERUZBVUxUX1BSSU9SSVRZID0gMTAwMDtcblx0dmFyIERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkgPSAyMDAwO1xuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSB0ZW1wbGF0ZSBhbmQgcmV0dXJuIGEgcmV1c2FibGUgY29tcG9zaXRlIGxpbmtcblx0ICogZnVuY3Rpb24sIHdoaWNoIHJlY3Vyc2l2ZWx5IGNvbnRhaW5zIG1vcmUgbGluayBmdW5jdGlvbnNcblx0ICogaW5zaWRlLiBUaGlzIHRvcCBsZXZlbCBjb21waWxlIGZ1bmN0aW9uIHdvdWxkIG5vcm1hbGx5XG5cdCAqIGJlIGNhbGxlZCBvbiBpbnN0YW5jZSByb290IG5vZGVzLCBidXQgY2FuIGFsc28gYmUgdXNlZFxuXHQgKiBmb3IgcGFydGlhbCBjb21waWxhdGlvbiBpZiB0aGUgcGFydGlhbCBhcmd1bWVudCBpcyB0cnVlLlxuXHQgKlxuXHQgKiBUaGUgcmV0dXJuZWQgY29tcG9zaXRlIGxpbmsgZnVuY3Rpb24sIHdoZW4gY2FsbGVkLCB3aWxsXG5cdCAqIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXNcblx0ICogY3JlYXRlZCBkdXJpbmcgdGhlIGxpbmtpbmcgcGhhc2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHBhcnRpYWxcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZShlbCwgb3B0aW9ucywgcGFydGlhbCkge1xuXHQgIC8vIGxpbmsgZnVuY3Rpb24gZm9yIHRoZSBub2RlIGl0c2VsZi5cblx0ICB2YXIgbm9kZUxpbmtGbiA9IHBhcnRpYWwgfHwgIW9wdGlvbnMuX2FzQ29tcG9uZW50ID8gY29tcGlsZU5vZGUoZWwsIG9wdGlvbnMpIDogbnVsbDtcblx0ICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgY2hpbGROb2Rlc1xuXHQgIHZhciBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiAhaXNTY3JpcHQoZWwpICYmIGVsLmhhc0NoaWxkTm9kZXMoKSA/IGNvbXBpbGVOb2RlTGlzdChlbC5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEEgY29tcG9zaXRlIGxpbmtlciBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gYSBhbHJlYWR5XG5cdCAgICogY29tcGlsZWQgcGllY2Ugb2YgRE9NLCB3aGljaCBpbnN0YW50aWF0ZXMgYWxsIGRpcmVjdGl2ZVxuXHQgICAqIGluc3RhbmNlcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuXHQgICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSBob3N0IHZtIG9mIHRyYW5zY2x1ZGVkIGNvbnRlbnRcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gbGluayBjb250ZXh0IGZyYWdtZW50XG5cdCAgICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgICAqL1xuXHRcblx0ICByZXR1cm4gZnVuY3Rpb24gY29tcG9zaXRlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuXHQgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGVsLmNoaWxkTm9kZXMpO1xuXHQgICAgLy8gbGlua1xuXHQgICAgdmFyIGRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiBjb21wb3NpdGVMaW5rQ2FwdHVyZXIoKSB7XG5cdCAgICAgIGlmIChub2RlTGlua0ZuKSBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgICBpZiAoY2hpbGRMaW5rRm4pIGNoaWxkTGlua0ZuKHZtLCBjaGlsZE5vZGVzLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICB9LCB2bSk7XG5cdCAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBkaXJzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXBwbHkgYSBsaW5rZXIgdG8gYSB2bS9lbGVtZW50IHBhaXIgYW5kIGNhcHR1cmUgdGhlXG5cdCAqIGRpcmVjdGl2ZXMgY3JlYXRlZCBkdXJpbmcgdGhlIHByb2Nlc3MuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBsaW5rQW5kQ2FwdHVyZShsaW5rZXIsIHZtKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIC8vIHJlc2V0IGRpcmVjdGl2ZXMgYmVmb3JlIGV2ZXJ5IGNhcHR1cmUgaW4gcHJvZHVjdGlvblxuXHQgICAgLy8gbW9kZSwgc28gdGhhdCB3aGVuIHVubGlua2luZyB3ZSBkb24ndCBuZWVkIHRvIHNwbGljZVxuXHQgICAgLy8gdGhlbSBvdXQgKHdoaWNoIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgaGl0KS5cblx0ICAgIC8vIHRoZXkgYXJlIGtlcHQgaW4gZGV2ZWxvcG1lbnQgbW9kZSBiZWNhdXNlIHRoZXkgYXJlXG5cdCAgICAvLyB1c2VmdWwgZm9yIFZ1ZSdzIG93biB0ZXN0cy5cblx0ICAgIHZtLl9kaXJlY3RpdmVzID0gW107XG5cdCAgfVxuXHQgIHZhciBvcmlnaW5hbERpckNvdW50ID0gdm0uX2RpcmVjdGl2ZXMubGVuZ3RoO1xuXHQgIGxpbmtlcigpO1xuXHQgIHZhciBkaXJzID0gdm0uX2RpcmVjdGl2ZXMuc2xpY2Uob3JpZ2luYWxEaXJDb3VudCk7XG5cdCAgZGlycy5zb3J0KGRpcmVjdGl2ZUNvbXBhcmF0b3IpO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGRpcnNbaV0uX2JpbmQoKTtcblx0ICB9XG5cdCAgcmV0dXJuIGRpcnM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEaXJlY3RpdmUgcHJpb3JpdHkgc29ydCBjb21wYXJhdG9yXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBhXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGlyZWN0aXZlQ29tcGFyYXRvcihhLCBiKSB7XG5cdCAgYSA9IGEuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcblx0ICBiID0gYi5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuXHQgIHJldHVybiBhID4gYiA/IC0xIDogYSA9PT0gYiA/IDAgOiAxO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTGlua2VyIGZ1bmN0aW9ucyByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXRcblx0ICogdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzIGluc3RhbmNlcyBnZW5lcmF0ZWQgZHVyaW5nXG5cdCAqIHRoZSBwcm9jZXNzLlxuXHQgKlxuXHQgKiBXZSBjcmVhdGUgdW5saW5rIGZ1bmN0aW9ucyB3aXRoIG9ubHkgdGhlIG5lY2Vzc2FyeVxuXHQgKiBpbmZvcm1hdGlvbiB0byBhdm9pZCByZXRhaW5pbmcgYWRkaXRpb25hbCBjbG9zdXJlcy5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcblx0ICogQHBhcmFtIHtWdWV9IFtjb250ZXh0XVxuXHQgKiBAcGFyYW0ge0FycmF5fSBbY29udGV4dERpcnNdXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VVbmxpbmtGbih2bSwgZGlycywgY29udGV4dCwgY29udGV4dERpcnMpIHtcblx0ICBmdW5jdGlvbiB1bmxpbmsoZGVzdHJveWluZykge1xuXHQgICAgdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKTtcblx0ICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHREaXJzKSB7XG5cdCAgICAgIHRlYXJkb3duRGlycyhjb250ZXh0LCBjb250ZXh0RGlycyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIGV4cG9zZSBsaW5rZWQgZGlyZWN0aXZlc1xuXHQgIHVubGluay5kaXJzID0gZGlycztcblx0ICByZXR1cm4gdW5saW5rO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVGVhcmRvd24gcGFydGlhbCBsaW5rZWQgZGlyZWN0aXZlcy5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcblx0ICogQHBhcmFtIHtCb29sZWFufSBkZXN0cm95aW5nXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKSB7XG5cdCAgdmFyIGkgPSBkaXJzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBkaXJzW2ldLl90ZWFyZG93bigpO1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIWRlc3Ryb3lpbmcpIHtcblx0ICAgICAgdm0uX2RpcmVjdGl2ZXMuJHJlbW92ZShkaXJzW2ldKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGxpbmsgcHJvcHMgb24gYW4gaW5zdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlQW5kTGlua1Byb3BzKHZtLCBlbCwgcHJvcHMsIHNjb3BlKSB7XG5cdCAgdmFyIHByb3BzTGlua0ZuID0gY29tcGlsZVByb3BzKGVsLCBwcm9wcywgdm0pO1xuXHQgIHZhciBwcm9wRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcblx0ICAgIHByb3BzTGlua0ZuKHZtLCBzY29wZSk7XG5cdCAgfSwgdm0pO1xuXHQgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHByb3BEaXJzKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgdGhlIHJvb3QgZWxlbWVudCBvZiBhbiBpbnN0YW5jZS5cblx0ICpcblx0ICogMS4gYXR0cnMgb24gY29udGV4dCBjb250YWluZXIgKGNvbnRleHQgc2NvcGUpXG5cdCAqIDIuIGF0dHJzIG9uIHRoZSBjb21wb25lbnQgdGVtcGxhdGUgcm9vdCBub2RlLCBpZlxuXHQgKiAgICByZXBsYWNlOnRydWUgKGNoaWxkIHNjb3BlKVxuXHQgKlxuXHQgKiBJZiB0aGlzIGlzIGEgZnJhZ21lbnQgaW5zdGFuY2UsIHdlIG9ubHkgbmVlZCB0byBjb21waWxlIDEuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRPcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVSb290KGVsLCBvcHRpb25zLCBjb250ZXh0T3B0aW9ucykge1xuXHQgIHZhciBjb250YWluZXJBdHRycyA9IG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzO1xuXHQgIHZhciByZXBsYWNlckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycztcblx0ICB2YXIgY29udGV4dExpbmtGbiwgcmVwbGFjZXJMaW5rRm47XG5cdFxuXHQgIC8vIG9ubHkgbmVlZCB0byBjb21waWxlIG90aGVyIGF0dHJpYnV0ZXMgZm9yXG5cdCAgLy8gbm9uLWZyYWdtZW50IGluc3RhbmNlc1xuXHQgIGlmIChlbC5ub2RlVHlwZSAhPT0gMTEpIHtcblx0ICAgIC8vIGZvciBjb21wb25lbnRzLCBjb250YWluZXIgYW5kIHJlcGxhY2VyIG5lZWQgdG8gYmVcblx0ICAgIC8vIGNvbXBpbGVkIHNlcGFyYXRlbHkgYW5kIGxpbmtlZCBpbiBkaWZmZXJlbnQgc2NvcGVzLlxuXHQgICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG5cdCAgICAgIC8vIDIuIGNvbnRhaW5lciBhdHRyaWJ1dGVzXG5cdCAgICAgIGlmIChjb250YWluZXJBdHRycyAmJiBjb250ZXh0T3B0aW9ucykge1xuXHQgICAgICAgIGNvbnRleHRMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhjb250YWluZXJBdHRycywgY29udGV4dE9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChyZXBsYWNlckF0dHJzKSB7XG5cdCAgICAgICAgLy8gMy4gcmVwbGFjZXIgYXR0cmlidXRlc1xuXHQgICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMocmVwbGFjZXJBdHRycywgb3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vbi1jb21wb25lbnQsIGp1c3QgY29tcGlsZSBhcyBhIG5vcm1hbCBlbGVtZW50LlxuXHQgICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGVsLmF0dHJpYnV0ZXMsIG9wdGlvbnMpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb250YWluZXJBdHRycykge1xuXHQgICAgLy8gd2FybiBjb250YWluZXIgZGlyZWN0aXZlcyBmb3IgZnJhZ21lbnQgaW5zdGFuY2VzXG5cdCAgICB2YXIgbmFtZXMgPSBjb250YWluZXJBdHRycy5maWx0ZXIoZnVuY3Rpb24gKGF0dHIpIHtcblx0ICAgICAgLy8gYWxsb3cgdnVlLWxvYWRlci92dWVpZnkgc2NvcGVkIGNzcyBhdHRyaWJ1dGVzXG5cdCAgICAgIHJldHVybiBhdHRyLm5hbWUuaW5kZXhPZignX3YtJykgPCAwICYmXG5cdCAgICAgIC8vIGFsbG93IGV2ZW50IGxpc3RlbmVyc1xuXHQgICAgICAhb25SRS50ZXN0KGF0dHIubmFtZSkgJiZcblx0ICAgICAgLy8gYWxsb3cgc2xvdHNcblx0ICAgICAgYXR0ci5uYW1lICE9PSAnc2xvdCc7XG5cdCAgICB9KS5tYXAoZnVuY3Rpb24gKGF0dHIpIHtcblx0ICAgICAgcmV0dXJuICdcIicgKyBhdHRyLm5hbWUgKyAnXCInO1xuXHQgICAgfSk7XG5cdCAgICBpZiAobmFtZXMubGVuZ3RoKSB7XG5cdCAgICAgIHZhciBwbHVyYWwgPSBuYW1lcy5sZW5ndGggPiAxO1xuXHQgICAgICB3YXJuKCdBdHRyaWJ1dGUnICsgKHBsdXJhbCA/ICdzICcgOiAnICcpICsgbmFtZXMuam9pbignLCAnKSArIChwbHVyYWwgPyAnIGFyZScgOiAnIGlzJykgKyAnIGlnbm9yZWQgb24gY29tcG9uZW50ICcgKyAnPCcgKyBvcHRpb25zLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+IGJlY2F1c2UgJyArICd0aGUgY29tcG9uZW50IGlzIGEgZnJhZ21lbnQgaW5zdGFuY2U6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9jb21wb25lbnRzLmh0bWwjRnJhZ21lbnQtSW5zdGFuY2UnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IG51bGw7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHJvb3RMaW5rRm4odm0sIGVsLCBzY29wZSkge1xuXHQgICAgLy8gbGluayBjb250ZXh0IHNjb3BlIGRpcnNcblx0ICAgIHZhciBjb250ZXh0ID0gdm0uX2NvbnRleHQ7XG5cdCAgICB2YXIgY29udGV4dERpcnM7XG5cdCAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0TGlua0ZuKSB7XG5cdCAgICAgIGNvbnRleHREaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNvbnRleHRMaW5rRm4oY29udGV4dCwgZWwsIG51bGwsIHNjb3BlKTtcblx0ICAgICAgfSwgY29udGV4dCk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gbGluayBzZWxmXG5cdCAgICB2YXIgc2VsZkRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGlmIChyZXBsYWNlckxpbmtGbikgcmVwbGFjZXJMaW5rRm4odm0sIGVsKTtcblx0ICAgIH0sIHZtKTtcblx0XG5cdCAgICAvLyByZXR1cm4gdGhlIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBjb250ZXh0XG5cdCAgICAvLyBjb250YWluZXIgZGlyZWN0aXZlcy5cblx0ICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHNlbGZEaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycyk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSBub2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuIGJhc2VkIG9uIHRoZVxuXHQgKiBub2RlIHR5cGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpIHtcblx0ICB2YXIgdHlwZSA9IG5vZGUubm9kZVR5cGU7XG5cdCAgaWYgKHR5cGUgPT09IDEgJiYgIWlzU2NyaXB0KG5vZGUpKSB7XG5cdCAgICByZXR1cm4gY29tcGlsZUVsZW1lbnQobm9kZSwgb3B0aW9ucyk7XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSAzICYmIG5vZGUuZGF0YS50cmltKCkpIHtcblx0ICAgIHJldHVybiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYW4gZWxlbWVudCBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVFbGVtZW50KGVsLCBvcHRpb25zKSB7XG5cdCAgLy8gcHJlcHJvY2VzcyB0ZXh0YXJlYXMuXG5cdCAgLy8gdGV4dGFyZWEgdHJlYXRzIGl0cyB0ZXh0IGNvbnRlbnQgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG5cdCAgLy8ganVzdCBiaW5kIGl0IGFzIGFuIGF0dHIgZGlyZWN0aXZlIGZvciB2YWx1ZS5cblx0ICBpZiAoZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChlbC52YWx1ZSk7XG5cdCAgICBpZiAodG9rZW5zKSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZSgnOnZhbHVlJywgdG9rZW5zVG9FeHAodG9rZW5zKSk7XG5cdCAgICAgIGVsLnZhbHVlID0gJyc7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciBsaW5rRm47XG5cdCAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuXHQgIHZhciBhdHRycyA9IGhhc0F0dHJzICYmIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG5cdCAgLy8gY2hlY2sgdGVybWluYWwgZGlyZWN0aXZlcyAoZm9yICYgaWYpXG5cdCAgaWYgKGhhc0F0dHJzKSB7XG5cdCAgICBsaW5rRm4gPSBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICAvLyBjaGVjayBlbGVtZW50IGRpcmVjdGl2ZXNcblx0ICBpZiAoIWxpbmtGbikge1xuXHQgICAgbGlua0ZuID0gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIC8vIGNoZWNrIGNvbXBvbmVudFxuXHQgIGlmICghbGlua0ZuKSB7XG5cdCAgICBsaW5rRm4gPSBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG5cdCAgaWYgKCFsaW5rRm4gJiYgaGFzQXR0cnMpIHtcblx0ICAgIGxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgcmV0dXJuIGxpbmtGbjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSB0ZXh0Tm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cblx0ICpcblx0ICogQHBhcmFtIHtUZXh0Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfSB0ZXh0Tm9kZUxpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVUZXh0Tm9kZShub2RlLCBvcHRpb25zKSB7XG5cdCAgLy8gc2tpcCBtYXJrZWQgdGV4dCBub2Rlc1xuXHQgIGlmIChub2RlLl9za2lwKSB7XG5cdCAgICByZXR1cm4gcmVtb3ZlVGV4dDtcblx0ICB9XG5cdFxuXHQgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQobm9kZS53aG9sZVRleHQpO1xuXHQgIGlmICghdG9rZW5zKSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdFxuXHQgIC8vIG1hcmsgYWRqYWNlbnQgdGV4dCBub2RlcyBhcyBza2lwcGVkLFxuXHQgIC8vIGJlY2F1c2Ugd2UgYXJlIHVzaW5nIG5vZGUud2hvbGVUZXh0IHRvIGNvbXBpbGVcblx0ICAvLyBhbGwgYWRqYWNlbnQgdGV4dCBub2RlcyB0b2dldGhlci4gVGhpcyBmaXhlc1xuXHQgIC8vIGlzc3VlcyBpbiBJRSB3aGVyZSBzb21ldGltZXMgaXQgc3BsaXRzIHVwIGEgc2luZ2xlXG5cdCAgLy8gdGV4dCBub2RlIGludG8gbXVsdGlwbGUgb25lcy5cblx0ICB2YXIgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdCAgd2hpbGUgKG5leHQgJiYgbmV4dC5ub2RlVHlwZSA9PT0gMykge1xuXHQgICAgbmV4dC5fc2tpcCA9IHRydWU7XG5cdCAgICBuZXh0ID0gbmV4dC5uZXh0U2libGluZztcblx0ICB9XG5cdFxuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIHZhciBlbCwgdG9rZW47XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB0b2tlbiA9IHRva2Vuc1tpXTtcblx0ICAgIGVsID0gdG9rZW4udGFnID8gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdCAgcmV0dXJuIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcsIG9wdGlvbnMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTGlua2VyIGZvciBhbiBza2lwcGVkIHRleHQgbm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7VGV4dH0gbm9kZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlbW92ZVRleHQodm0sIG5vZGUpIHtcblx0ICByZW1vdmUobm9kZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcm9jZXNzIGEgc2luZ2xlIHRleHQgdG9rZW4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtOb2RlfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIHtcblx0ICB2YXIgZWw7XG5cdCAgaWYgKHRva2VuLm9uZVRpbWUpIHtcblx0ICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBpZiAodG9rZW4uaHRtbCkge1xuXHQgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJ3YtaHRtbCcpO1xuXHQgICAgICBzZXRUb2tlblR5cGUoJ2h0bWwnKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIElFIHdpbGwgY2xlYW4gdXAgZW1wdHkgdGV4dE5vZGVzIGR1cmluZ1xuXHQgICAgICAvLyBmcmFnLmNsb25lTm9kZSh0cnVlKSwgc28gd2UgaGF2ZSB0byBnaXZlIGl0XG5cdCAgICAgIC8vIHNvbWV0aGluZyBoZXJlLi4uXG5cdCAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyAnKTtcblx0ICAgICAgc2V0VG9rZW5UeXBlKCd0ZXh0Jyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZ1bmN0aW9uIHNldFRva2VuVHlwZSh0eXBlKSB7XG5cdCAgICBpZiAodG9rZW4uZGVzY3JpcHRvcikgcmV0dXJuO1xuXHQgICAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHRva2VuLnZhbHVlKTtcblx0ICAgIHRva2VuLmRlc2NyaXB0b3IgPSB7XG5cdCAgICAgIG5hbWU6IHR5cGUsXG5cdCAgICAgIGRlZjogZGlyZWN0aXZlc1t0eXBlXSxcblx0ICAgICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG5cdCAgICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzXG5cdCAgICB9O1xuXHQgIH1cblx0ICByZXR1cm4gZWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgcHJvY2Vzc2VzIGEgdGV4dE5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gdG9rZW5zXG5cdCAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gdGV4dE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSkge1xuXHQgICAgdmFyIGZyYWdDbG9uZSA9IGZyYWcuY2xvbmVOb2RlKHRydWUpO1xuXHQgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGZyYWdDbG9uZS5jaGlsZE5vZGVzKTtcblx0ICAgIHZhciB0b2tlbiwgdmFsdWUsIG5vZGU7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdG9rZW4gPSB0b2tlbnNbaV07XG5cdCAgICAgIHZhbHVlID0gdG9rZW4udmFsdWU7XG5cdCAgICAgIGlmICh0b2tlbi50YWcpIHtcblx0ICAgICAgICBub2RlID0gY2hpbGROb2Rlc1tpXTtcblx0ICAgICAgICBpZiAodG9rZW4ub25lVGltZSkge1xuXHQgICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0pLiRldmFsKHZhbHVlKTtcblx0ICAgICAgICAgIGlmICh0b2tlbi5odG1sKSB7XG5cdCAgICAgICAgICAgIHJlcGxhY2Uobm9kZSwgcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSkpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgbm9kZS5kYXRhID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdm0uX2JpbmREaXIodG9rZW4uZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmVwbGFjZShlbCwgZnJhZ0Nsb25lKTtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBhIG5vZGUgbGlzdCBhbmQgcmV0dXJuIGEgY2hpbGRMaW5rRm4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlTm9kZUxpc3Qobm9kZUxpc3QsIG9wdGlvbnMpIHtcblx0ICB2YXIgbGlua0ZucyA9IFtdO1xuXHQgIHZhciBub2RlTGlua0ZuLCBjaGlsZExpbmtGbiwgbm9kZTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVMaXN0Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgbm9kZSA9IG5vZGVMaXN0W2ldO1xuXHQgICAgbm9kZUxpbmtGbiA9IGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpO1xuXHQgICAgY2hpbGRMaW5rRm4gPSAhKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCkgJiYgbm9kZS50YWdOYW1lICE9PSAnU0NSSVBUJyAmJiBub2RlLmhhc0NoaWxkTm9kZXMoKSA/IGNvbXBpbGVOb2RlTGlzdChub2RlLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcblx0ICAgIGxpbmtGbnMucHVzaChub2RlTGlua0ZuLCBjaGlsZExpbmtGbik7XG5cdCAgfVxuXHQgIHJldHVybiBsaW5rRm5zLmxlbmd0aCA/IG1ha2VDaGlsZExpbmtGbihsaW5rRm5zKSA6IG51bGw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYWtlIGEgY2hpbGQgbGluayBmdW5jdGlvbiBmb3IgYSBub2RlJ3MgY2hpbGROb2Rlcy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheTxGdW5jdGlvbj59IGxpbmtGbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IGNoaWxkTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gY2hpbGRMaW5rRm4odm0sIG5vZGVzLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgdmFyIG5vZGUsIG5vZGVMaW5rRm4sIGNoaWxkcmVuTGlua0ZuO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIG4gPSAwLCBsID0gbGlua0Zucy5sZW5ndGg7IGkgPCBsOyBuKyspIHtcblx0ICAgICAgbm9kZSA9IG5vZGVzW25dO1xuXHQgICAgICBub2RlTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuXHQgICAgICBjaGlsZHJlbkxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcblx0ICAgICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG5cdCAgICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShub2RlLmNoaWxkTm9kZXMpO1xuXHQgICAgICBpZiAobm9kZUxpbmtGbikge1xuXHQgICAgICAgIG5vZGVMaW5rRm4odm0sIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoY2hpbGRyZW5MaW5rRm4pIHtcblx0ICAgICAgICBjaGlsZHJlbkxpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGZvciBlbGVtZW50IGRpcmVjdGl2ZXMgKGN1c3RvbSBlbGVtZW50cyB0aGF0IHNob3VsZFxuXHQgKiBiZSByZXNvdmxlZCBhcyB0ZXJtaW5hbCBkaXJlY3RpdmVzKS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHQgIGlmIChjb21tb25UYWdSRS50ZXN0KHRhZykpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpO1xuXHQgIGlmIChkZWYpIHtcblx0ICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCB0YWcsICcnLCBvcHRpb25zLCBkZWYpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQuIElmIHllcywgcmV0dXJuXG5cdCAqIGEgY29tcG9uZW50IGxpbmsgZnVuY3Rpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIGNvbXBvbmVudCA9IGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucyk7XG5cdCAgaWYgKGNvbXBvbmVudCkge1xuXHQgICAgdmFyIHJlZiA9IGZpbmRSZWYoZWwpO1xuXHQgICAgdmFyIGRlc2NyaXB0b3IgPSB7XG5cdCAgICAgIG5hbWU6ICdjb21wb25lbnQnLFxuXHQgICAgICByZWY6IHJlZixcblx0ICAgICAgZXhwcmVzc2lvbjogY29tcG9uZW50LmlkLFxuXHQgICAgICBkZWY6IGludGVybmFsRGlyZWN0aXZlcy5jb21wb25lbnQsXG5cdCAgICAgIG1vZGlmaWVyczoge1xuXHQgICAgICAgIGxpdGVyYWw6ICFjb21wb25lbnQuZHluYW1pY1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgdmFyIGNvbXBvbmVudExpbmtGbiA9IGZ1bmN0aW9uIGNvbXBvbmVudExpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICAgIGlmIChyZWYpIHtcblx0ICAgICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCByZWYsIG51bGwpO1xuXHQgICAgICB9XG5cdCAgICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICB9O1xuXHQgICAgY29tcG9uZW50TGlua0ZuLnRlcm1pbmFsID0gdHJ1ZTtcblx0ICAgIHJldHVybiBjb21wb25lbnRMaW5rRm47XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgYW4gZWxlbWVudCBmb3IgdGVybWluYWwgZGlyZWN0aXZlcyBpbiBmaXhlZCBvcmRlci5cblx0ICogSWYgaXQgZmluZHMgb25lLCByZXR1cm4gYSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGF0dHJzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucykge1xuXHQgIC8vIHNraXAgdi1wcmVcblx0ICBpZiAoZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcblx0ICAgIHJldHVybiBza2lwO1xuXHQgIH1cblx0ICAvLyBza2lwIHYtZWxzZSBibG9jaywgYnV0IG9ubHkgaWYgZm9sbG93aW5nIHYtaWZcblx0ICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2LWVsc2UnKSkge1xuXHQgICAgdmFyIHByZXYgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuXHQgICAgaWYgKHByZXYgJiYgcHJldi5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgICByZXR1cm4gc2tpcDtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIHZhciBhdHRyLCBuYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBtYXRjaGVkLCBkaXJOYW1lLCByYXdOYW1lLCBhcmcsIGRlZiwgdGVybURlZjtcblx0ICBmb3IgKHZhciBpID0gMCwgaiA9IGF0dHJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHQgICAgYXR0ciA9IGF0dHJzW2ldO1xuXHQgICAgbmFtZSA9IGF0dHIubmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcblx0ICAgIGlmIChtYXRjaGVkID0gbmFtZS5tYXRjaChkaXJBdHRyUkUpKSB7XG5cdCAgICAgIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIG1hdGNoZWRbMV0pO1xuXHQgICAgICBpZiAoZGVmICYmIGRlZi50ZXJtaW5hbCkge1xuXHQgICAgICAgIGlmICghdGVybURlZiB8fCAoZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkpID4gdGVybURlZi5wcmlvcml0eSkge1xuXHQgICAgICAgICAgdGVybURlZiA9IGRlZjtcblx0ICAgICAgICAgIHJhd05hbWUgPSBhdHRyLm5hbWU7XG5cdCAgICAgICAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhhdHRyLm5hbWUpO1xuXHQgICAgICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuXHQgICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XG5cdCAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKHRlcm1EZWYpIHtcblx0ICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgdGVybURlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gc2tpcCgpIHt9XG5cdHNraXAudGVybWluYWwgPSB0cnVlO1xuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgbm9kZSBsaW5rIGZ1bmN0aW9uIGZvciBhIHRlcm1pbmFsIGRpcmVjdGl2ZS5cblx0ICogQSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uIHRlcm1pbmF0ZXMgdGhlIGN1cnJlbnRcblx0ICogY29tcGlsYXRpb24gcmVjdXJzaW9uIGFuZCBoYW5kbGVzIGNvbXBpbGF0aW9uIG9mIHRoZVxuXHQgKiBzdWJ0cmVlIGluIHRoZSBkaXJlY3RpdmUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGRpck5hbWVcblx0ICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBkZWZcblx0ICogQHBhcmFtIHtTdHJpbmd9IFtyYXdOYW1lXVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gW2FyZ11cblx0ICogQHBhcmFtIHtPYmplY3R9IFttb2RpZmllcnNdXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCBkZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKSB7XG5cdCAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcblx0ICB2YXIgZGVzY3JpcHRvciA9IHtcblx0ICAgIG5hbWU6IGRpck5hbWUsXG5cdCAgICBhcmc6IGFyZyxcblx0ICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuXHQgICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnMsXG5cdCAgICByYXc6IHZhbHVlLFxuXHQgICAgYXR0cjogcmF3TmFtZSxcblx0ICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuXHQgICAgZGVmOiBkZWZcblx0ICB9O1xuXHQgIC8vIGNoZWNrIHJlZiBmb3Igdi1mb3IgYW5kIHJvdXRlci12aWV3XG5cdCAgaWYgKGRpck5hbWUgPT09ICdmb3InIHx8IGRpck5hbWUgPT09ICdyb3V0ZXItdmlldycpIHtcblx0ICAgIGRlc2NyaXB0b3IucmVmID0gZmluZFJlZihlbCk7XG5cdCAgfVxuXHQgIHZhciBmbiA9IGZ1bmN0aW9uIHRlcm1pbmFsTm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICBpZiAoZGVzY3JpcHRvci5yZWYpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgZGVzY3JpcHRvci5yZWYsIG51bGwpO1xuXHQgICAgfVxuXHQgICAgdm0uX2JpbmREaXIoZGVzY3JpcHRvciwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICB9O1xuXHQgIGZuLnRlcm1pbmFsID0gdHJ1ZTtcblx0ICByZXR1cm4gZm47XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIHRoZSBkaXJlY3RpdmVzIG9uIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIGxpbmtlci5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheXxOYW1lZE5vZGVNYXB9IGF0dHJzXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKSB7XG5cdCAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG5cdCAgdmFyIGRpcnMgPSBbXTtcblx0ICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIHJhd05hbWUsIHJhd1ZhbHVlLCBkaXJOYW1lLCBhcmcsIG1vZGlmaWVycywgZGlyRGVmLCB0b2tlbnMsIG1hdGNoZWQ7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgYXR0ciA9IGF0dHJzW2ldO1xuXHQgICAgbmFtZSA9IHJhd05hbWUgPSBhdHRyLm5hbWU7XG5cdCAgICB2YWx1ZSA9IHJhd1ZhbHVlID0gYXR0ci52YWx1ZTtcblx0ICAgIHRva2VucyA9IHBhcnNlVGV4dCh2YWx1ZSk7XG5cdCAgICAvLyByZXNldCBhcmdcblx0ICAgIGFyZyA9IG51bGw7XG5cdCAgICAvLyBjaGVjayBtb2RpZmllcnNcblx0ICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKG5hbWUpO1xuXHQgICAgbmFtZSA9IG5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG5cdFxuXHQgICAgLy8gYXR0cmlidXRlIGludGVycG9sYXRpb25zXG5cdCAgICBpZiAodG9rZW5zKSB7XG5cdCAgICAgIHZhbHVlID0gdG9rZW5zVG9FeHAodG9rZW5zKTtcblx0ICAgICAgYXJnID0gbmFtZTtcblx0ICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCwgdG9rZW5zKTtcblx0ICAgICAgLy8gd2FybiBhZ2FpbnN0IG1peGluZyBtdXN0YWNoZXMgd2l0aCB2LWJpbmRcblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiBBcnJheS5wcm90b3R5cGUuc29tZS5jYWxsKGF0dHJzLCBmdW5jdGlvbiAoYXR0cikge1xuXHQgICAgICAgICAgcmV0dXJuIGF0dHIubmFtZSA9PT0gJzpjbGFzcycgfHwgYXR0ci5uYW1lID09PSAndi1iaW5kOmNsYXNzJztcblx0ICAgICAgICB9KSkge1xuXHQgICAgICAgICAgd2FybignY2xhc3M9XCInICsgcmF3VmFsdWUgKyAnXCI6IERvIG5vdCBtaXggbXVzdGFjaGUgaW50ZXJwb2xhdGlvbiAnICsgJ2FuZCB2LWJpbmQgZm9yIFwiY2xhc3NcIiBvbiB0aGUgc2FtZSBlbGVtZW50LiBVc2Ugb25lIG9yIHRoZSBvdGhlci4nLCBvcHRpb25zKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZVxuXHRcblx0ICAgICAgLy8gc3BlY2lhbCBhdHRyaWJ1dGU6IHRyYW5zaXRpb25cblx0ICAgICAgaWYgKHRyYW5zaXRpb25SRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgbW9kaWZpZXJzLmxpdGVyYWwgPSAhYmluZFJFLnRlc3QobmFtZSk7XG5cdCAgICAgICAgcHVzaERpcigndHJhbnNpdGlvbicsIGludGVybmFsRGlyZWN0aXZlcy50cmFuc2l0aW9uKTtcblx0ICAgICAgfSBlbHNlXG5cdFxuXHQgICAgICAgIC8vIGV2ZW50IGhhbmRsZXJzXG5cdCAgICAgICAgaWYgKG9uUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgICAgYXJnID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTtcblx0ICAgICAgICAgIHB1c2hEaXIoJ29uJywgZGlyZWN0aXZlcy5vbik7XG5cdCAgICAgICAgfSBlbHNlXG5cdFxuXHQgICAgICAgICAgLy8gYXR0cmlidXRlIGJpbmRpbmdzXG5cdCAgICAgICAgICBpZiAoYmluZFJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICAgICAgZGlyTmFtZSA9IG5hbWUucmVwbGFjZShiaW5kUkUsICcnKTtcblx0ICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdzdHlsZScgfHwgZGlyTmFtZSA9PT0gJ2NsYXNzJykge1xuXHQgICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgaW50ZXJuYWxEaXJlY3RpdmVzW2Rpck5hbWVdKTtcblx0ICAgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgICBhcmcgPSBkaXJOYW1lO1xuXHQgICAgICAgICAgICAgIHB1c2hEaXIoJ2JpbmQnLCBkaXJlY3RpdmVzLmJpbmQpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9IGVsc2Vcblx0XG5cdCAgICAgICAgICAgIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG5cdCAgICAgICAgICAgIGlmIChtYXRjaGVkID0gbmFtZS5tYXRjaChkaXJBdHRyUkUpKSB7XG5cdCAgICAgICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XG5cdCAgICAgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcblx0XG5cdCAgICAgICAgICAgICAgLy8gc2tpcCB2LWVsc2UgKHdoZW4gdXNlZCB3aXRoIHYtc2hvdylcblx0ICAgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ2Vsc2UnKSB7XG5cdCAgICAgICAgICAgICAgICBjb250aW51ZTtcblx0ICAgICAgICAgICAgICB9XG5cdFxuXHQgICAgICAgICAgICAgIGRpckRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIGRpck5hbWUsIHRydWUpO1xuXHQgICAgICAgICAgICAgIGlmIChkaXJEZWYpIHtcblx0ICAgICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgZGlyRGVmKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFB1c2ggYSBkaXJlY3RpdmUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSBkZWZcblx0ICAgKiBAcGFyYW0ge0FycmF5fSBbaW50ZXJwVG9rZW5zXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBwdXNoRGlyKGRpck5hbWUsIGRlZiwgaW50ZXJwVG9rZW5zKSB7XG5cdCAgICB2YXIgaGFzT25lVGltZVRva2VuID0gaW50ZXJwVG9rZW5zICYmIGhhc09uZVRpbWUoaW50ZXJwVG9rZW5zKTtcblx0ICAgIHZhciBwYXJzZWQgPSAhaGFzT25lVGltZVRva2VuICYmIHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcblx0ICAgIGRpcnMucHVzaCh7XG5cdCAgICAgIG5hbWU6IGRpck5hbWUsXG5cdCAgICAgIGF0dHI6IHJhd05hbWUsXG5cdCAgICAgIHJhdzogcmF3VmFsdWUsXG5cdCAgICAgIGRlZjogZGVmLFxuXHQgICAgICBhcmc6IGFyZyxcblx0ICAgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG5cdCAgICAgIC8vIGNvbnZlcnNpb24gZnJvbSBpbnRlcnBvbGF0aW9uIHN0cmluZ3Mgd2l0aCBvbmUtdGltZSB0b2tlblxuXHQgICAgICAvLyB0byBleHByZXNzaW9uIGlzIGRpZmZlcmVkIHVudGlsIGRpcmVjdGl2ZSBiaW5kIHRpbWUgc28gdGhhdCB3ZVxuXHQgICAgICAvLyBoYXZlIGFjY2VzcyB0byB0aGUgYWN0dWFsIHZtIGNvbnRleHQgZm9yIG9uZS10aW1lIGJpbmRpbmdzLlxuXHQgICAgICBleHByZXNzaW9uOiBwYXJzZWQgJiYgcGFyc2VkLmV4cHJlc3Npb24sXG5cdCAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcblx0ICAgICAgaW50ZXJwOiBpbnRlcnBUb2tlbnMsXG5cdCAgICAgIGhhc09uZVRpbWU6IGhhc09uZVRpbWVUb2tlblxuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBpZiAoZGlycy5sZW5ndGgpIHtcblx0ICAgIHJldHVybiBtYWtlTm9kZUxpbmtGbihkaXJzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBtb2RpZmllcnMgZnJvbSBkaXJlY3RpdmUgYXR0cmlidXRlIG5hbWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZU1vZGlmaWVycyhuYW1lKSB7XG5cdCAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdmFyIG1hdGNoID0gbmFtZS5tYXRjaChtb2RpZmllclJFKTtcblx0ICBpZiAobWF0Y2gpIHtcblx0ICAgIHZhciBpID0gbWF0Y2gubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICByZXNbbWF0Y2hbaV0uc2xpY2UoMSldID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgbGluayBmdW5jdGlvbiBmb3IgYWxsIGRpcmVjdGl2ZXMgb24gYSBzaW5nbGUgbm9kZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gZGlyZWN0aXZlc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gZGlyZWN0aXZlc0xpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VOb2RlTGlua0ZuKGRpcmVjdGl2ZXMpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICAvLyByZXZlcnNlIGFwcGx5IGJlY2F1c2UgaXQncyBzb3J0ZWQgbG93IHRvIGhpZ2hcblx0ICAgIHZhciBpID0gZGlyZWN0aXZlcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZtLl9iaW5kRGlyKGRpcmVjdGl2ZXNbaV0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGludGVycG9sYXRpb24gc3RyaW5nIGNvbnRhaW5zIG9uZS10aW1lIHRva2Vucy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gdG9rZW5zXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaGFzT25lVGltZSh0b2tlbnMpIHtcblx0ICB2YXIgaSA9IHRva2Vucy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgaWYgKHRva2Vuc1tpXS5vbmVUaW1lKSByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzU2NyaXB0KGVsKSB7XG5cdCAgcmV0dXJuIGVsLnRhZ05hbWUgPT09ICdTQ1JJUFQnICYmICghZWwuaGFzQXR0cmlidXRlKCd0eXBlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd0eXBlJykgPT09ICd0ZXh0L2phdmFzY3JpcHQnKTtcblx0fVxuXHRcblx0dmFyIHNwZWNpYWxDaGFyUkUgPSAvW15cXHdcXC06XFwuXS87XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyBhbiBlbGVtZW50IG9yIGEgRG9jdW1lbnRGcmFnbWVudCBiYXNlZCBvbiBhXG5cdCAqIGluc3RhbmNlIG9wdGlvbiBvYmplY3QuIFRoaXMgYWxsb3dzIHVzIHRvIHRyYW5zY2x1ZGVcblx0ICogYSB0ZW1wbGF0ZSBub2RlL2ZyYWdtZW50IGJlZm9yZSB0aGUgaW5zdGFuY2UgaXMgY3JlYXRlZCxcblx0ICogc28gdGhlIHByb2Nlc3NlZCBmcmFnbWVudCBjYW4gdGhlbiBiZSBjbG9uZWQgYW5kIHJldXNlZFxuXHQgKiBpbiB2LWZvci5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdHJhbnNjbHVkZShlbCwgb3B0aW9ucykge1xuXHQgIC8vIGV4dHJhY3QgY29udGFpbmVyIGF0dHJpYnV0ZXMgdG8gcGFzcyB0aGVtIGRvd25cblx0ICAvLyB0byBjb21waWxlciwgYmVjYXVzZSB0aGV5IG5lZWQgdG8gYmUgY29tcGlsZWQgaW5cblx0ICAvLyBwYXJlbnQgc2NvcGUuIHdlIGFyZSBtdXRhdGluZyB0aGUgb3B0aW9ucyBvYmplY3QgaGVyZVxuXHQgIC8vIGFzc3VtaW5nIHRoZSBzYW1lIG9iamVjdCB3aWxsIGJlIHVzZWQgZm9yIGNvbXBpbGVcblx0ICAvLyByaWdodCBhZnRlciB0aGlzLlxuXHQgIGlmIChvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zLl9jb250YWluZXJBdHRycyA9IGV4dHJhY3RBdHRycyhlbCk7XG5cdCAgfVxuXHQgIC8vIGZvciB0ZW1wbGF0ZSB0YWdzLCB3aGF0IHdlIHdhbnQgaXMgaXRzIGNvbnRlbnQgYXNcblx0ICAvLyBhIGRvY3VtZW50RnJhZ21lbnQgKGZvciBmcmFnbWVudCBpbnN0YW5jZXMpXG5cdCAgaWYgKGlzVGVtcGxhdGUoZWwpKSB7XG5cdCAgICBlbCA9IHBhcnNlVGVtcGxhdGUoZWwpO1xuXHQgIH1cblx0ICBpZiAob3B0aW9ucykge1xuXHQgICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50ICYmICFvcHRpb25zLnRlbXBsYXRlKSB7XG5cdCAgICAgIG9wdGlvbnMudGVtcGxhdGUgPSAnPHNsb3Q+PC9zbG90Pic7XG5cdCAgICB9XG5cdCAgICBpZiAob3B0aW9ucy50ZW1wbGF0ZSkge1xuXHQgICAgICBvcHRpb25zLl9jb250ZW50ID0gZXh0cmFjdENvbnRlbnQoZWwpO1xuXHQgICAgICBlbCA9IHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuXHQgICAgLy8gYW5jaG9ycyBmb3IgZnJhZ21lbnQgaW5zdGFuY2Vcblx0ICAgIC8vIHBhc3NpbmcgaW4gYHBlcnNpc3Q6IHRydWVgIHRvIGF2b2lkIHRoZW0gYmVpbmdcblx0ICAgIC8vIGRpc2NhcmRlZCBieSBJRSBkdXJpbmcgdGVtcGxhdGUgY2xvbmluZ1xuXHQgICAgcHJlcGVuZChjcmVhdGVBbmNob3IoJ3Ytc3RhcnQnLCB0cnVlKSwgZWwpO1xuXHQgICAgZWwuYXBwZW5kQ2hpbGQoY3JlYXRlQW5jaG9yKCd2LWVuZCcsIHRydWUpKTtcblx0ICB9XG5cdCAgcmV0dXJuIGVsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyB0aGUgdGVtcGxhdGUgb3B0aW9uLlxuXHQgKiBJZiB0aGUgcmVwbGFjZSBvcHRpb24gaXMgdHJ1ZSB0aGlzIHdpbGwgc3dhcCB0aGUgJGVsLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpIHtcblx0ICB2YXIgdGVtcGxhdGUgPSBvcHRpb25zLnRlbXBsYXRlO1xuXHQgIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgdHJ1ZSk7XG5cdCAgaWYgKGZyYWcpIHtcblx0ICAgIHZhciByZXBsYWNlciA9IGZyYWcuZmlyc3RDaGlsZDtcblx0ICAgIHZhciB0YWcgPSByZXBsYWNlci50YWdOYW1lICYmIHJlcGxhY2VyLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0ICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChlbCA9PT0gZG9jdW1lbnQuYm9keSkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignWW91IGFyZSBtb3VudGluZyBhbiBpbnN0YW5jZSB3aXRoIGEgdGVtcGxhdGUgdG8gJyArICc8Ym9keT4uIFRoaXMgd2lsbCByZXBsYWNlIDxib2R5PiBlbnRpcmVseS4gWW91ICcgKyAnc2hvdWxkIHByb2JhYmx5IHVzZSBgcmVwbGFjZTogZmFsc2VgIGhlcmUuJyk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gdGhlcmUgYXJlIG1hbnkgY2FzZXMgd2hlcmUgdGhlIGluc3RhbmNlIG11c3Rcblx0ICAgICAgLy8gYmVjb21lIGEgZnJhZ21lbnQgaW5zdGFuY2U6IGJhc2ljYWxseSBhbnl0aGluZyB0aGF0XG5cdCAgICAgIC8vIGNhbiBjcmVhdGUgbW9yZSB0aGFuIDEgcm9vdCBub2Rlcy5cblx0ICAgICAgaWYgKFxuXHQgICAgICAvLyBtdWx0aS1jaGlsZHJlbiB0ZW1wbGF0ZVxuXHQgICAgICBmcmFnLmNoaWxkTm9kZXMubGVuZ3RoID4gMSB8fFxuXHQgICAgICAvLyBub24tZWxlbWVudCB0ZW1wbGF0ZVxuXHQgICAgICByZXBsYWNlci5ub2RlVHlwZSAhPT0gMSB8fFxuXHQgICAgICAvLyBzaW5nbGUgbmVzdGVkIGNvbXBvbmVudFxuXHQgICAgICB0YWcgPT09ICdjb21wb25lbnQnIHx8IHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykgfHwgaGFzQmluZEF0dHIocmVwbGFjZXIsICdpcycpIHx8XG5cdCAgICAgIC8vIGVsZW1lbnQgZGlyZWN0aXZlXG5cdCAgICAgIHJlc29sdmVBc3NldChvcHRpb25zLCAnZWxlbWVudERpcmVjdGl2ZXMnLCB0YWcpIHx8XG5cdCAgICAgIC8vIGZvciBibG9ja1xuXHQgICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykgfHxcblx0ICAgICAgLy8gaWYgYmxvY2tcblx0ICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgICAgICByZXR1cm4gZnJhZztcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gZXh0cmFjdEF0dHJzKHJlcGxhY2VyKTtcblx0ICAgICAgICBtZXJnZUF0dHJzKGVsLCByZXBsYWNlcik7XG5cdCAgICAgICAgcmV0dXJuIHJlcGxhY2VyO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBlbC5hcHBlbmRDaGlsZChmcmFnKTtcblx0ICAgICAgcmV0dXJuIGVsO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgb3B0aW9uOiAnICsgdGVtcGxhdGUpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEhlbHBlciB0byBleHRyYWN0IGEgY29tcG9uZW50IGNvbnRhaW5lcidzIGF0dHJpYnV0ZXNcblx0ICogaW50byBhIHBsYWluIG9iamVjdCBhcnJheS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtBcnJheX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0QXR0cnMoZWwpIHtcblx0ICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZWwuaGFzQXR0cmlidXRlcygpKSB7XG5cdCAgICByZXR1cm4gdG9BcnJheShlbC5hdHRyaWJ1dGVzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNZXJnZSB0aGUgYXR0cmlidXRlcyBvZiB0d28gZWxlbWVudHMsIGFuZCBtYWtlIHN1cmVcblx0ICogdGhlIGNsYXNzIG5hbWVzIGFyZSBtZXJnZWQgcHJvcGVybHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZnJvbVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRvXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VBdHRycyhmcm9tLCB0bykge1xuXHQgIHZhciBhdHRycyA9IGZyb20uYXR0cmlidXRlcztcblx0ICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcblx0ICB2YXIgbmFtZSwgdmFsdWU7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG5cdCAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuXHQgICAgaWYgKCF0by5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIXNwZWNpYWxDaGFyUkUudGVzdChuYW1lKSkge1xuXHQgICAgICB0by5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuXHQgICAgfSBlbHNlIGlmIChuYW1lID09PSAnY2xhc3MnICYmICFwYXJzZVRleHQodmFsdWUpICYmICh2YWx1ZSA9IHZhbHVlLnRyaW0oKSkpIHtcblx0ICAgICAgdmFsdWUuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcblx0ICAgICAgICBhZGRDbGFzcyh0bywgY2xzKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogU2NhbiBhbmQgZGV0ZXJtaW5lIHNsb3QgY29udGVudCBkaXN0cmlidXRpb24uXG5cdCAqIFdlIGRvIHRoaXMgZHVyaW5nIHRyYW5zY2x1c2lvbiBpbnN0ZWFkIGF0IGNvbXBpbGUgdGltZSBzbyB0aGF0XG5cdCAqIHRoZSBkaXN0cmlidXRpb24gaXMgZGVjb3VwbGVkIGZyb20gdGhlIGNvbXBpbGF0aW9uIG9yZGVyIG9mXG5cdCAqIHRoZSBzbG90cy5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IHRlbXBsYXRlXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gY29udGVudFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXNvbHZlU2xvdHModm0sIGNvbnRlbnQpIHtcblx0ICBpZiAoIWNvbnRlbnQpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIGNvbnRlbnRzID0gdm0uX3Nsb3RDb250ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdmFyIGVsLCBuYW1lO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gY29udGVudC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGVsID0gY29udGVudC5jaGlsZHJlbltpXTtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICBpZiAobmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnc2xvdCcpKSB7XG5cdCAgICAgIChjb250ZW50c1tuYW1lXSB8fCAoY29udGVudHNbbmFtZV0gPSBbXSkpLnB1c2goZWwpO1xuXHQgICAgfVxuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgZ2V0QmluZEF0dHIoZWwsICdzbG90JykpIHtcblx0ICAgICAgd2FybignVGhlIFwic2xvdFwiIGF0dHJpYnV0ZSBtdXN0IGJlIHN0YXRpYy4nLCB2bS4kcGFyZW50KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgZm9yIChuYW1lIGluIGNvbnRlbnRzKSB7XG5cdCAgICBjb250ZW50c1tuYW1lXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50c1tuYW1lXSwgY29udGVudCk7XG5cdCAgfVxuXHQgIGlmIChjb250ZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgdmFyIG5vZGVzID0gY29udGVudC5jaGlsZE5vZGVzO1xuXHQgICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMSAmJiBub2Rlc1swXS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZXNbMF0uZGF0YS50cmltKCkpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgY29udGVudHNbJ2RlZmF1bHQnXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50LmNoaWxkTm9kZXMsIGNvbnRlbnQpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEV4dHJhY3QgcXVhbGlmaWVkIGNvbnRlbnQgbm9kZXMgZnJvbSBhIG5vZGUgbGlzdC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZXNcblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBleHRyYWN0RnJhZ21lbnQobm9kZXMsIHBhcmVudCkge1xuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIG5vZGVzID0gdG9BcnJheShub2Rlcyk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHZhciBub2RlID0gbm9kZXNbaV07XG5cdCAgICBpZiAoaXNUZW1wbGF0ZShub2RlKSAmJiAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSAmJiAhbm9kZS5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykpIHtcblx0ICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuXHQgICAgICBub2RlID0gcGFyc2VUZW1wbGF0ZShub2RlLCB0cnVlKTtcblx0ICAgIH1cblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7XG5cdCAgfVxuXHQgIHJldHVybiBmcmFnO1xuXHR9XG5cdFxuXHRcblx0XG5cdHZhciBjb21waWxlciA9IE9iamVjdC5mcmVlemUoe1xuXHRcdGNvbXBpbGU6IGNvbXBpbGUsXG5cdFx0Y29tcGlsZUFuZExpbmtQcm9wczogY29tcGlsZUFuZExpbmtQcm9wcyxcblx0XHRjb21waWxlUm9vdDogY29tcGlsZVJvb3QsXG5cdFx0dHJhbnNjbHVkZTogdHJhbnNjbHVkZSxcblx0XHRyZXNvbHZlU2xvdHM6IHJlc29sdmVTbG90c1xuXHR9KTtcblx0XG5cdGZ1bmN0aW9uIHN0YXRlTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIEFjY2Vzc29yIGZvciBgJGRhdGFgIHByb3BlcnR5LCBzaW5jZSBzZXR0aW5nICRkYXRhXG5cdCAgICogcmVxdWlyZXMgb2JzZXJ2aW5nIHRoZSBuZXcgb2JqZWN0IGFuZCB1cGRhdGluZ1xuXHQgICAqIHByb3hpZWQgcHJvcGVydGllcy5cblx0ICAgKi9cblx0XG5cdCAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckZGF0YScsIHtcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5fZGF0YTtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldChuZXdEYXRhKSB7XG5cdCAgICAgIGlmIChuZXdEYXRhICE9PSB0aGlzLl9kYXRhKSB7XG5cdCAgICAgICAgdGhpcy5fc2V0RGF0YShuZXdEYXRhKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0pO1xuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCB0aGUgc2NvcGUgb2YgYW4gaW5zdGFuY2UsIHdoaWNoIGNvbnRhaW5zOlxuXHQgICAqIC0gb2JzZXJ2ZWQgZGF0YVxuXHQgICAqIC0gY29tcHV0ZWQgcHJvcGVydGllc1xuXHQgICAqIC0gdXNlciBtZXRob2RzXG5cdCAgICogLSBtZXRhIHByb3BlcnRpZXNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdFN0YXRlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5faW5pdFByb3BzKCk7XG5cdCAgICB0aGlzLl9pbml0TWV0YSgpO1xuXHQgICAgdGhpcy5faW5pdE1ldGhvZHMoKTtcblx0ICAgIHRoaXMuX2luaXREYXRhKCk7XG5cdCAgICB0aGlzLl9pbml0Q29tcHV0ZWQoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplIHByb3BzLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0UHJvcHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cdCAgICB2YXIgZWwgPSBvcHRpb25zLmVsO1xuXHQgICAgdmFyIHByb3BzID0gb3B0aW9ucy5wcm9wcztcblx0ICAgIGlmIChwcm9wcyAmJiAhZWwpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdQcm9wcyB3aWxsIG5vdCBiZSBjb21waWxlZCBpZiBubyBgZWxgIG9wdGlvbiBpcyAnICsgJ3Byb3ZpZGVkIGF0IGluc3RhbnRpYXRpb24uJywgdGhpcyk7XG5cdCAgICB9XG5cdCAgICAvLyBtYWtlIHN1cmUgdG8gY29udmVydCBzdHJpbmcgc2VsZWN0b3JzIGludG8gZWxlbWVudCBub3dcblx0ICAgIGVsID0gb3B0aW9ucy5lbCA9IHF1ZXJ5KGVsKTtcblx0ICAgIHRoaXMuX3Byb3BzVW5saW5rRm4gPSBlbCAmJiBlbC5ub2RlVHlwZSA9PT0gMSAmJiBwcm9wc1xuXHQgICAgLy8gcHJvcHMgbXVzdCBiZSBsaW5rZWQgaW4gcHJvcGVyIHNjb3BlIGlmIGluc2lkZSB2LWZvclxuXHQgICAgPyBjb21waWxlQW5kTGlua1Byb3BzKHRoaXMsIGVsLCBwcm9wcywgdGhpcy5fc2NvcGUpIDogbnVsbDtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplIHRoZSBkYXRhLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RGF0YSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBkYXRhRm4gPSB0aGlzLiRvcHRpb25zLmRhdGE7XG5cdCAgICB2YXIgZGF0YSA9IHRoaXMuX2RhdGEgPSBkYXRhRm4gPyBkYXRhRm4oKSA6IHt9O1xuXHQgICAgaWYgKCFpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG5cdCAgICAgIGRhdGEgPSB7fTtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdkYXRhIGZ1bmN0aW9ucyBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC4nLCB0aGlzKTtcblx0ICAgIH1cblx0ICAgIHZhciBwcm9wcyA9IHRoaXMuX3Byb3BzO1xuXHQgICAgLy8gcHJveHkgZGF0YSBvbiBpbnN0YW5jZVxuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhkYXRhKTtcblx0ICAgIHZhciBpLCBrZXk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgIC8vIHRoZXJlIGFyZSB0d28gc2NlbmFyaW9zIHdoZXJlIHdlIGNhbiBwcm94eSBhIGRhdGEga2V5OlxuXHQgICAgICAvLyAxLiBpdCdzIG5vdCBhbHJlYWR5IGRlZmluZWQgYXMgYSBwcm9wXG5cdCAgICAgIC8vIDIuIGl0J3MgcHJvdmlkZWQgdmlhIGEgaW5zdGFudGlhdGlvbiBvcHRpb24gQU5EIHRoZXJlIGFyZSBub1xuXHQgICAgICAvLyAgICB0ZW1wbGF0ZSBwcm9wIHByZXNlbnRcblx0ICAgICAgaWYgKCFwcm9wcyB8fCAhaGFzT3duKHByb3BzLCBrZXkpKSB7XG5cdCAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcblx0ICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgd2FybignRGF0YSBmaWVsZCBcIicgKyBrZXkgKyAnXCIgaXMgYWxyZWFkeSBkZWZpbmVkICcgKyAnYXMgYSBwcm9wLiBUbyBwcm92aWRlIGRlZmF1bHQgdmFsdWUgZm9yIGEgcHJvcCwgdXNlIHRoZSBcImRlZmF1bHRcIiAnICsgJ3Byb3Agb3B0aW9uOyBpZiB5b3Ugd2FudCB0byBwYXNzIHByb3AgdmFsdWVzIHRvIGFuIGluc3RhbnRpYXRpb24gJyArICdjYWxsLCB1c2UgdGhlIFwicHJvcHNEYXRhXCIgb3B0aW9uLicsIHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBvYnNlcnZlIGRhdGFcblx0ICAgIG9ic2VydmUoZGF0YSwgdGhpcyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU3dhcCB0aGUgaW5zdGFuY2UncyAkZGF0YS4gQ2FsbGVkIGluICRkYXRhJ3Mgc2V0dGVyLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG5ld0RhdGFcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fc2V0RGF0YSA9IGZ1bmN0aW9uIChuZXdEYXRhKSB7XG5cdCAgICBuZXdEYXRhID0gbmV3RGF0YSB8fCB7fTtcblx0ICAgIHZhciBvbGREYXRhID0gdGhpcy5fZGF0YTtcblx0ICAgIHRoaXMuX2RhdGEgPSBuZXdEYXRhO1xuXHQgICAgdmFyIGtleXMsIGtleSwgaTtcblx0ICAgIC8vIHVucHJveHkga2V5cyBub3QgcHJlc2VudCBpbiBuZXcgZGF0YVxuXHQgICAga2V5cyA9IE9iamVjdC5rZXlzKG9sZERhdGEpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICBpZiAoIShrZXkgaW4gbmV3RGF0YSkpIHtcblx0ICAgICAgICB0aGlzLl91bnByb3h5KGtleSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIC8vIHByb3h5IGtleXMgbm90IGFscmVhZHkgcHJveGllZCxcblx0ICAgIC8vIGFuZCB0cmlnZ2VyIGNoYW5nZSBmb3IgY2hhbmdlZCB2YWx1ZXNcblx0ICAgIGtleXMgPSBPYmplY3Qua2V5cyhuZXdEYXRhKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgaWYgKCFoYXNPd24odGhpcywga2V5KSkge1xuXHQgICAgICAgIC8vIG5ldyBwcm9wZXJ0eVxuXHQgICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIG9sZERhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuXHQgICAgb2JzZXJ2ZShuZXdEYXRhLCB0aGlzKTtcblx0ICAgIHRoaXMuX2RpZ2VzdCgpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFByb3h5IGEgcHJvcGVydHksIHNvIHRoYXRcblx0ICAgKiB2bS5wcm9wID09PSB2bS5fZGF0YS5wcm9wXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3Byb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcblx0ICAgICAgLy8gbmVlZCB0byBzdG9yZSByZWYgdG8gc2VsZiBoZXJlXG5cdCAgICAgIC8vIGJlY2F1c2UgdGhlc2UgZ2V0dGVyL3NldHRlcnMgbWlnaHRcblx0ICAgICAgLy8gYmUgY2FsbGVkIGJ5IGNoaWxkIHNjb3BlcyB2aWFcblx0ICAgICAgLy8gcHJvdG90eXBlIGluaGVyaXRhbmNlLlxuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzZWxmLCBrZXksIHtcblx0ICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICBnZXQ6IGZ1bmN0aW9uIHByb3h5R2V0dGVyKCkge1xuXHQgICAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFba2V5XTtcblx0ICAgICAgICB9LFxuXHQgICAgICAgIHNldDogZnVuY3Rpb24gcHJveHlTZXR0ZXIodmFsKSB7XG5cdCAgICAgICAgICBzZWxmLl9kYXRhW2tleV0gPSB2YWw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBVbnByb3h5IGEgcHJvcGVydHkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3VucHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuXHQgICAgICBkZWxldGUgdGhpc1trZXldO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEZvcmNlIHVwZGF0ZSBvbiBldmVyeSB3YXRjaGVyIGluIHNjb3BlLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRoaXMuX3dhdGNoZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB0aGlzLl93YXRjaGVyc1tpXS51cGRhdGUodHJ1ZSk7IC8vIHNoYWxsb3cgdXBkYXRlc1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwIGNvbXB1dGVkIHByb3BlcnRpZXMuIFRoZXkgYXJlIGVzc2VudGlhbGx5XG5cdCAgICogc3BlY2lhbCBnZXR0ZXIvc2V0dGVyc1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBub29wKCkge31cblx0ICBWdWUucHJvdG90eXBlLl9pbml0Q29tcHV0ZWQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgY29tcHV0ZWQgPSB0aGlzLiRvcHRpb25zLmNvbXB1dGVkO1xuXHQgICAgaWYgKGNvbXB1dGVkKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkge1xuXHQgICAgICAgIHZhciB1c2VyRGVmID0gY29tcHV0ZWRba2V5XTtcblx0ICAgICAgICB2YXIgZGVmID0ge1xuXHQgICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgICAgICAgIH07XG5cdCAgICAgICAgaWYgKHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgICAgICBkZWYuZ2V0ID0gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYsIHRoaXMpO1xuXHQgICAgICAgICAgZGVmLnNldCA9IG5vb3A7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGRlZi5nZXQgPSB1c2VyRGVmLmdldCA/IHVzZXJEZWYuY2FjaGUgIT09IGZhbHNlID8gbWFrZUNvbXB1dGVkR2V0dGVyKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IGJpbmQodXNlckRlZi5nZXQsIHRoaXMpIDogbm9vcDtcblx0ICAgICAgICAgIGRlZi5zZXQgPSB1c2VyRGVmLnNldCA/IGJpbmQodXNlckRlZi5zZXQsIHRoaXMpIDogbm9vcDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsIGtleSwgZGVmKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIG1ha2VDb21wdXRlZEdldHRlcihnZXR0ZXIsIG93bmVyKSB7XG5cdCAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKG93bmVyLCBnZXR0ZXIsIG51bGwsIHtcblx0ICAgICAgbGF6eTogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gY29tcHV0ZWRHZXR0ZXIoKSB7XG5cdCAgICAgIGlmICh3YXRjaGVyLmRpcnR5KSB7XG5cdCAgICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG5cdCAgICAgICAgd2F0Y2hlci5kZXBlbmQoKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gd2F0Y2hlci52YWx1ZTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCBpbnN0YW5jZSBtZXRob2RzLiBNZXRob2RzIG11c3QgYmUgYm91bmQgdG8gdGhlXG5cdCAgICogaW5zdGFuY2Ugc2luY2UgdGhleSBtaWdodCBiZSBwYXNzZWQgZG93biBhcyBhIHByb3AgdG9cblx0ICAgKiBjaGlsZCBjb21wb25lbnRzLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0TWV0aG9kcyA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBtZXRob2RzID0gdGhpcy4kb3B0aW9ucy5tZXRob2RzO1xuXHQgICAgaWYgKG1ldGhvZHMpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIG1ldGhvZHMpIHtcblx0ICAgICAgICB0aGlzW2tleV0gPSBiaW5kKG1ldGhvZHNba2V5XSwgdGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplIG1ldGEgaW5mb3JtYXRpb24gbGlrZSAkaW5kZXgsICRrZXkgJiAkdmFsdWUuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRNZXRhID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG1ldGFzID0gdGhpcy4kb3B0aW9ucy5fbWV0YTtcblx0ICAgIGlmIChtZXRhcykge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gbWV0YXMpIHtcblx0ICAgICAgICBkZWZpbmVSZWFjdGl2ZSh0aGlzLCBrZXksIG1ldGFzW2tleV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIGV2ZW50UkUgPSAvXnYtb246fF5ALztcblx0XG5cdGZ1bmN0aW9uIGV2ZW50c01peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBTZXR1cCB0aGUgaW5zdGFuY2UncyBvcHRpb24gZXZlbnRzICYgd2F0Y2hlcnMuXG5cdCAgICogSWYgdGhlIHZhbHVlIGlzIGEgc3RyaW5nLCB3ZSBwdWxsIGl0IGZyb20gdGhlXG5cdCAgICogaW5zdGFuY2UncyBtZXRob2RzIGJ5IG5hbWUuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cdCAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcblx0ICAgICAgcmVnaXN0ZXJDb21wb25lbnRFdmVudHModGhpcywgb3B0aW9ucy5lbCk7XG5cdCAgICB9XG5cdCAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJG9uJywgb3B0aW9ucy5ldmVudHMpO1xuXHQgICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyR3YXRjaCcsIG9wdGlvbnMud2F0Y2gpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlZ2lzdGVyIHYtb24gZXZlbnRzIG9uIGEgY2hpbGQgY29tcG9uZW50XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHZtLCBlbCkge1xuXHQgICAgdmFyIGF0dHJzID0gZWwuYXR0cmlidXRlcztcblx0ICAgIHZhciBuYW1lLCB2YWx1ZSwgaGFuZGxlcjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuXHQgICAgICBpZiAoZXZlbnRSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShldmVudFJFLCAnJyk7XG5cdCAgICAgICAgLy8gZm9yY2UgdGhlIGV4cHJlc3Npb24gaW50byBhIHN0YXRlbWVudCBzbyB0aGF0XG5cdCAgICAgICAgLy8gaXQgYWx3YXlzIGR5bmFtaWNhbGx5IHJlc29sdmVzIHRoZSBtZXRob2QgdG8gY2FsbCAoIzI2NzApXG5cdCAgICAgICAgLy8ga2luZGEgdWdseSBoYWNrLCBidXQgZG9lcyB0aGUgam9iLlxuXHQgICAgICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG5cdCAgICAgICAgaWYgKGlzU2ltcGxlUGF0aCh2YWx1ZSkpIHtcblx0ICAgICAgICAgIHZhbHVlICs9ICcuYXBwbHkodGhpcywgJGFyZ3VtZW50cyknO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBoYW5kbGVyID0gKHZtLl9zY29wZSB8fCB2bS5fY29udGV4dCkuJGV2YWwodmFsdWUsIHRydWUpO1xuXHQgICAgICAgIGhhbmRsZXIuX2Zyb21QYXJlbnQgPSB0cnVlO1xuXHQgICAgICAgIHZtLiRvbihuYW1lLnJlcGxhY2UoZXZlbnRSRSksIGhhbmRsZXIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZWdpc3RlciBjYWxsYmFja3MgZm9yIG9wdGlvbiBldmVudHMgYW5kIHdhdGNoZXJzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGFjdGlvblxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlZ2lzdGVyQ2FsbGJhY2tzKHZtLCBhY3Rpb24sIGhhc2gpIHtcblx0ICAgIGlmICghaGFzaCkgcmV0dXJuO1xuXHQgICAgdmFyIGhhbmRsZXJzLCBrZXksIGksIGo7XG5cdCAgICBmb3IgKGtleSBpbiBoYXNoKSB7XG5cdCAgICAgIGhhbmRsZXJzID0gaGFzaFtrZXldO1xuXHQgICAgICBpZiAoaXNBcnJheShoYW5kbGVycykpIHtcblx0ICAgICAgICBmb3IgKGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdCAgICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzW2ldKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVycyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEhlbHBlciB0byByZWdpc3RlciBhbiBldmVudC93YXRjaCBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd8T2JqZWN0fSBoYW5kbGVyXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIsIG9wdGlvbnMpIHtcblx0ICAgIHZhciB0eXBlID0gdHlwZW9mIGhhbmRsZXI7XG5cdCAgICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICB2bVthY3Rpb25dKGtleSwgaGFuZGxlciwgb3B0aW9ucyk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHZhciBtZXRob2RzID0gdm0uJG9wdGlvbnMubWV0aG9kcztcblx0ICAgICAgdmFyIG1ldGhvZCA9IG1ldGhvZHMgJiYgbWV0aG9kc1toYW5kbGVyXTtcblx0ICAgICAgaWYgKG1ldGhvZCkge1xuXHQgICAgICAgIHZtW2FjdGlvbl0oa2V5LCBtZXRob2QsIG9wdGlvbnMpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVW5rbm93biBtZXRob2Q6IFwiJyArIGhhbmRsZXIgKyAnXCIgd2hlbiAnICsgJ3JlZ2lzdGVyaW5nIGNhbGxiYWNrIGZvciAnICsgYWN0aW9uICsgJzogXCInICsga2V5ICsgJ1wiLicsIHZtKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChoYW5kbGVyICYmIHR5cGUgPT09ICdvYmplY3QnKSB7XG5cdCAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlci5oYW5kbGVyLCBoYW5kbGVyKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldHVwIHJlY3Vyc2l2ZSBhdHRhY2hlZC9kZXRhY2hlZCBjYWxsc1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RE9NSG9va3MgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLiRvbignaG9vazphdHRhY2hlZCcsIG9uQXR0YWNoZWQpO1xuXHQgICAgdGhpcy4kb24oJ2hvb2s6ZGV0YWNoZWQnLCBvbkRldGFjaGVkKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGF0dGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gb25BdHRhY2hlZCgpIHtcblx0ICAgIGlmICghdGhpcy5faXNBdHRhY2hlZCkge1xuXHQgICAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsQXR0YWNoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEl0ZXJhdG9yIHRvIGNhbGwgYXR0YWNoZWQgaG9va1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNhbGxBdHRhY2goY2hpbGQpIHtcblx0ICAgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuXHQgICAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGRldGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gb25EZXRhY2hlZCgpIHtcblx0ICAgIGlmICh0aGlzLl9pc0F0dGFjaGVkKSB7XG5cdCAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSBmYWxzZTtcblx0ICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsRGV0YWNoKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEl0ZXJhdG9yIHRvIGNhbGwgZGV0YWNoZWQgaG9va1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNhbGxEZXRhY2goY2hpbGQpIHtcblx0ICAgIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuXHQgICAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBUcmlnZ2VyIGFsbCBoYW5kbGVycyBmb3IgYSBob29rXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gaG9va1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG5cdCAgICB0aGlzLiRlbWl0KCdwcmUtaG9vazonICsgaG9vayk7XG5cdCAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLiRvcHRpb25zW2hvb2tdO1xuXHQgICAgaWYgKGhhbmRsZXJzKSB7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG5cdCAgICAgICAgaGFuZGxlcnNbaV0uY2FsbCh0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdGhpcy4kZW1pdCgnaG9vazonICsgaG9vayk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbm9vcCQxKCkge31cblx0XG5cdC8qKlxuXHQgKiBBIGRpcmVjdGl2ZSBsaW5rcyBhIERPTSBlbGVtZW50IHdpdGggYSBwaWVjZSBvZiBkYXRhLFxuXHQgKiB3aGljaCBpcyB0aGUgcmVzdWx0IG9mIGV2YWx1YXRpbmcgYW4gZXhwcmVzc2lvbi5cblx0ICogSXQgcmVnaXN0ZXJzIGEgd2F0Y2hlciB3aXRoIHRoZSBleHByZXNzaW9uIGFuZCBjYWxsc1xuXHQgKiB0aGUgRE9NIHVwZGF0ZSBmdW5jdGlvbiB3aGVuIGEgY2hhbmdlIGlzIHRyaWdnZXJlZC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3Jcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gbmFtZVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBkZWZcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gZXhwcmVzc2lvblxuXHQgKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ZpbHRlcnNdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IFttb2RpZmllcnNdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsaXRlcmFsXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGF0dHJcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gYXJnXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IHJhd1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBbcmVmXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ludGVycF1cblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtoYXNPbmVUaW1lXVxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcblx0ICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gb3duZXIgZnJhZ21lbnRcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgIHRoaXMudm0gPSB2bTtcblx0ICB0aGlzLmVsID0gZWw7XG5cdCAgLy8gY29weSBkZXNjcmlwdG9yIHByb3BlcnRpZXNcblx0ICB0aGlzLmRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yO1xuXHQgIHRoaXMubmFtZSA9IGRlc2NyaXB0b3IubmFtZTtcblx0ICB0aGlzLmV4cHJlc3Npb24gPSBkZXNjcmlwdG9yLmV4cHJlc3Npb247XG5cdCAgdGhpcy5hcmcgPSBkZXNjcmlwdG9yLmFyZztcblx0ICB0aGlzLm1vZGlmaWVycyA9IGRlc2NyaXB0b3IubW9kaWZpZXJzO1xuXHQgIHRoaXMuZmlsdGVycyA9IGRlc2NyaXB0b3IuZmlsdGVycztcblx0ICB0aGlzLmxpdGVyYWwgPSB0aGlzLm1vZGlmaWVycyAmJiB0aGlzLm1vZGlmaWVycy5saXRlcmFsO1xuXHQgIC8vIHByaXZhdGVcblx0ICB0aGlzLl9sb2NrZWQgPSBmYWxzZTtcblx0ICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuXHQgIHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG5cdCAgLy8gbGluayBjb250ZXh0XG5cdCAgdGhpcy5faG9zdCA9IGhvc3Q7XG5cdCAgdGhpcy5fc2NvcGUgPSBzY29wZTtcblx0ICB0aGlzLl9mcmFnID0gZnJhZztcblx0ICAvLyBzdG9yZSBkaXJlY3RpdmVzIG9uIG5vZGUgaW4gZGV2IG1vZGVcblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG5cdCAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyA9IHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzIHx8IFtdO1xuXHQgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMucHVzaCh0aGlzKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbml0aWFsaXplIHRoZSBkaXJlY3RpdmUsIG1peGluIGRlZmluaXRpb24gcHJvcGVydGllcyxcblx0ICogc2V0dXAgdGhlIHdhdGNoZXIsIGNhbGwgZGVmaW5pdGlvbiBiaW5kKCkgYW5kIHVwZGF0ZSgpXG5cdCAqIGlmIHByZXNlbnQuXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fYmluZCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgbmFtZSA9IHRoaXMubmFtZTtcblx0ICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcblx0XG5cdCAgLy8gcmVtb3ZlIGF0dHJpYnV0ZVxuXHQgIGlmICgobmFtZSAhPT0gJ2Nsb2FrJyB8fCB0aGlzLnZtLl9pc0NvbXBpbGVkKSAmJiB0aGlzLmVsICYmIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKSB7XG5cdCAgICB2YXIgYXR0ciA9IGRlc2NyaXB0b3IuYXR0ciB8fCAndi0nICsgbmFtZTtcblx0ICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgIH1cblx0XG5cdCAgLy8gY29weSBkZWYgcHJvcGVydGllc1xuXHQgIHZhciBkZWYgPSBkZXNjcmlwdG9yLmRlZjtcblx0ICBpZiAodHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgdGhpcy51cGRhdGUgPSBkZWY7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGV4dGVuZCh0aGlzLCBkZWYpO1xuXHQgIH1cblx0XG5cdCAgLy8gc2V0dXAgZGlyZWN0aXZlIHBhcmFtc1xuXHQgIHRoaXMuX3NldHVwUGFyYW1zKCk7XG5cdFxuXHQgIC8vIGluaXRpYWwgYmluZFxuXHQgIGlmICh0aGlzLmJpbmQpIHtcblx0ICAgIHRoaXMuYmluZCgpO1xuXHQgIH1cblx0ICB0aGlzLl9ib3VuZCA9IHRydWU7XG5cdFxuXHQgIGlmICh0aGlzLmxpdGVyYWwpIHtcblx0ICAgIHRoaXMudXBkYXRlICYmIHRoaXMudXBkYXRlKGRlc2NyaXB0b3IucmF3KTtcblx0ICB9IGVsc2UgaWYgKCh0aGlzLmV4cHJlc3Npb24gfHwgdGhpcy5tb2RpZmllcnMpICYmICh0aGlzLnVwZGF0ZSB8fCB0aGlzLnR3b1dheSkgJiYgIXRoaXMuX2NoZWNrU3RhdGVtZW50KCkpIHtcblx0ICAgIC8vIHdyYXBwZWQgdXBkYXRlciBmb3IgY29udGV4dFxuXHQgICAgdmFyIGRpciA9IHRoaXM7XG5cdCAgICBpZiAodGhpcy51cGRhdGUpIHtcblx0ICAgICAgdGhpcy5fdXBkYXRlID0gZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG5cdCAgICAgICAgaWYgKCFkaXIuX2xvY2tlZCkge1xuXHQgICAgICAgICAgZGlyLnVwZGF0ZSh2YWwsIG9sZFZhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5fdXBkYXRlID0gbm9vcCQxO1xuXHQgICAgfVxuXHQgICAgdmFyIHByZVByb2Nlc3MgPSB0aGlzLl9wcmVQcm9jZXNzID8gYmluZCh0aGlzLl9wcmVQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG5cdCAgICB2YXIgcG9zdFByb2Nlc3MgPSB0aGlzLl9wb3N0UHJvY2VzcyA/IGJpbmQodGhpcy5fcG9zdFByb2Nlc3MsIHRoaXMpIDogbnVsbDtcblx0ICAgIHZhciB3YXRjaGVyID0gdGhpcy5fd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHRoaXMudm0sIHRoaXMuZXhwcmVzc2lvbiwgdGhpcy5fdXBkYXRlLCAvLyBjYWxsYmFja1xuXHQgICAge1xuXHQgICAgICBmaWx0ZXJzOiB0aGlzLmZpbHRlcnMsXG5cdCAgICAgIHR3b1dheTogdGhpcy50d29XYXksXG5cdCAgICAgIGRlZXA6IHRoaXMuZGVlcCxcblx0ICAgICAgcHJlUHJvY2VzczogcHJlUHJvY2Vzcyxcblx0ICAgICAgcG9zdFByb2Nlc3M6IHBvc3RQcm9jZXNzLFxuXHQgICAgICBzY29wZTogdGhpcy5fc2NvcGVcblx0ICAgIH0pO1xuXHQgICAgLy8gdi1tb2RlbCB3aXRoIGluaXRhbCBpbmxpbmUgdmFsdWUgbmVlZCB0byBzeW5jIGJhY2sgdG9cblx0ICAgIC8vIG1vZGVsIGluc3RlYWQgb2YgdXBkYXRlIHRvIERPTSBvbiBpbml0LiBUaGV5IHdvdWxkXG5cdCAgICAvLyBzZXQgdGhlIGFmdGVyQmluZCBob29rIHRvIGluZGljYXRlIHRoYXQuXG5cdCAgICBpZiAodGhpcy5hZnRlckJpbmQpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQoKTtcblx0ICAgIH0gZWxzZSBpZiAodGhpcy51cGRhdGUpIHtcblx0ICAgICAgdGhpcy51cGRhdGUod2F0Y2hlci52YWx1ZSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldHVwIGFsbCBwYXJhbSBhdHRyaWJ1dGVzLCBlLmcuIHRyYWNrLWJ5LFxuXHQgKiB0cmFuc2l0aW9uLW1vZGUsIGV0Yy4uLlxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1zID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICghdGhpcy5wYXJhbXMpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHBhcmFtcyA9IHRoaXMucGFyYW1zO1xuXHQgIC8vIHN3YXAgdGhlIHBhcmFtcyBhcnJheSB3aXRoIGEgZnJlc2ggb2JqZWN0LlxuXHQgIHRoaXMucGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0ICB2YXIgaSA9IHBhcmFtcy5sZW5ndGg7XG5cdCAgdmFyIGtleSwgdmFsLCBtYXBwZWRLZXk7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAga2V5ID0gaHlwaGVuYXRlKHBhcmFtc1tpXSk7XG5cdCAgICBtYXBwZWRLZXkgPSBjYW1lbGl6ZShrZXkpO1xuXHQgICAgdmFsID0gZ2V0QmluZEF0dHIodGhpcy5lbCwga2V5KTtcblx0ICAgIGlmICh2YWwgIT0gbnVsbCkge1xuXHQgICAgICAvLyBkeW5hbWljXG5cdCAgICAgIHRoaXMuX3NldHVwUGFyYW1XYXRjaGVyKG1hcHBlZEtleSwgdmFsKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIHN0YXRpY1xuXHQgICAgICB2YWwgPSBnZXRBdHRyKHRoaXMuZWwsIGtleSk7XG5cdCAgICAgIGlmICh2YWwgIT0gbnVsbCkge1xuXHQgICAgICAgIHRoaXMucGFyYW1zW21hcHBlZEtleV0gPSB2YWwgPT09ICcnID8gdHJ1ZSA6IHZhbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXR1cCBhIHdhdGNoZXIgZm9yIGEgZHluYW1pYyBwYXJhbS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXhwcmVzc2lvblxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1XYXRjaGVyID0gZnVuY3Rpb24gKGtleSwgZXhwcmVzc2lvbikge1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgY2FsbGVkID0gZmFsc2U7XG5cdCAgdmFyIHVud2F0Y2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHdhdGNoKGV4cHJlc3Npb24sIGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuXHQgICAgc2VsZi5wYXJhbXNba2V5XSA9IHZhbDtcblx0ICAgIC8vIHNpbmNlIHdlIGFyZSBpbiBpbW1lZGlhdGUgbW9kZSxcblx0ICAgIC8vIG9ubHkgY2FsbCB0aGUgcGFyYW0gY2hhbmdlIGNhbGxiYWNrcyBpZiB0aGlzIGlzIG5vdCB0aGUgZmlyc3QgdXBkYXRlLlxuXHQgICAgaWYgKGNhbGxlZCkge1xuXHQgICAgICB2YXIgY2IgPSBzZWxmLnBhcmFtV2F0Y2hlcnMgJiYgc2VsZi5wYXJhbVdhdGNoZXJzW2tleV07XG5cdCAgICAgIGlmIChjYikge1xuXHQgICAgICAgIGNiLmNhbGwoc2VsZiwgdmFsLCBvbGRWYWwpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBjYWxsZWQgPSB0cnVlO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGltbWVkaWF0ZTogdHJ1ZSxcblx0ICAgIHVzZXI6IGZhbHNlXG5cdCAgfSk7KHRoaXMuX3BhcmFtVW53YXRjaEZucyB8fCAodGhpcy5fcGFyYW1VbndhdGNoRm5zID0gW10pKS5wdXNoKHVud2F0Y2gpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIHRoZSBkaXJlY3RpdmUgaXMgYSBmdW5jdGlvbiBjYWxsZXJcblx0ICogYW5kIGlmIHRoZSBleHByZXNzaW9uIGlzIGEgY2FsbGFibGUgb25lLiBJZiBib3RoIHRydWUsXG5cdCAqIHdlIHdyYXAgdXAgdGhlIGV4cHJlc3Npb24gYW5kIHVzZSBpdCBhcyB0aGUgZXZlbnRcblx0ICogaGFuZGxlci5cblx0ICpcblx0ICogZS5nLiBvbi1jbGljaz1cImErK1wiXG5cdCAqXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fY2hlY2tTdGF0ZW1lbnQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLmV4cHJlc3Npb247XG5cdCAgaWYgKGV4cHJlc3Npb24gJiYgdGhpcy5hY2NlcHRTdGF0ZW1lbnQgJiYgIWlzU2ltcGxlUGF0aChleHByZXNzaW9uKSkge1xuXHQgICAgdmFyIGZuID0gcGFyc2VFeHByZXNzaW9uKGV4cHJlc3Npb24pLmdldDtcblx0ICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG5cdCAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoZSkge1xuXHQgICAgICBzY29wZS4kZXZlbnQgPSBlO1xuXHQgICAgICBmbi5jYWxsKHNjb3BlLCBzY29wZSk7XG5cdCAgICAgIHNjb3BlLiRldmVudCA9IG51bGw7XG5cdCAgICB9O1xuXHQgICAgaWYgKHRoaXMuZmlsdGVycykge1xuXHQgICAgICBoYW5kbGVyID0gc2NvcGUuX2FwcGx5RmlsdGVycyhoYW5kbGVyLCBudWxsLCB0aGlzLmZpbHRlcnMpO1xuXHQgICAgfVxuXHQgICAgdGhpcy51cGRhdGUoaGFuZGxlcik7XG5cdCAgICByZXR1cm4gdHJ1ZTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cblx0ICogVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGluIHR3by13YXkgZGlyZWN0aXZlc1xuXHQgKiBlLmcuIHYtbW9kZWwuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHB1YmxpY1xuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAodGhpcy50d29XYXkpIHtcblx0ICAgIHRoaXMuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlci5zZXQodmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICB3YXJuKCdEaXJlY3RpdmUuc2V0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgdHdvV2F5JyArICdkaXJlY3RpdmVzLicpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFeGVjdXRlIGEgZnVuY3Rpb24gd2hpbGUgcHJldmVudGluZyB0aGF0IGZ1bmN0aW9uIGZyb21cblx0ICogdHJpZ2dlcmluZyB1cGRhdGVzIG9uIHRoaXMgZGlyZWN0aXZlIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX3dpdGhMb2NrID0gZnVuY3Rpb24gKGZuKSB7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHNlbGYuX2xvY2tlZCA9IHRydWU7XG5cdCAgZm4uY2FsbChzZWxmKTtcblx0ICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICBzZWxmLl9sb2NrZWQgPSBmYWxzZTtcblx0ICB9KTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDb252ZW5pZW5jZSBtZXRob2QgdGhhdCBhdHRhY2hlcyBhIERPTSBldmVudCBsaXN0ZW5lclxuXHQgKiB0byB0aGUgZGlyZWN0aXZlIGVsZW1lbnQgYW5kIGF1dG9tZXRpY2FsbHkgdGVhcnMgaXQgZG93blxuXHQgKiBkdXJpbmcgdW5iaW5kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpIHtcblx0ICBvbih0aGlzLmVsLCBldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7KHRoaXMuX2xpc3RlbmVycyB8fCAodGhpcy5fbGlzdGVuZXJzID0gW10pKS5wdXNoKFtldmVudCwgaGFuZGxlcl0pO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRlYXJkb3duIHRoZSB3YXRjaGVyIGFuZCBjYWxsIHVuYmluZC5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl90ZWFyZG93biA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAodGhpcy5fYm91bmQpIHtcblx0ICAgIHRoaXMuX2JvdW5kID0gZmFsc2U7XG5cdCAgICBpZiAodGhpcy51bmJpbmQpIHtcblx0ICAgICAgdGhpcy51bmJpbmQoKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLl93YXRjaGVyKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIH1cblx0ICAgIHZhciBsaXN0ZW5lcnMgPSB0aGlzLl9saXN0ZW5lcnM7XG5cdCAgICB2YXIgaTtcblx0ICAgIGlmIChsaXN0ZW5lcnMpIHtcblx0ICAgICAgaSA9IGxpc3RlbmVycy5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBvZmYodGhpcy5lbCwgbGlzdGVuZXJzW2ldWzBdLCBsaXN0ZW5lcnNbaV1bMV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgdW53YXRjaEZucyA9IHRoaXMuX3BhcmFtVW53YXRjaEZucztcblx0ICAgIGlmICh1bndhdGNoRm5zKSB7XG5cdCAgICAgIGkgPSB1bndhdGNoRm5zLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICAgIHVud2F0Y2hGbnNbaV0oKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuXHQgICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgdGhpcy52bSA9IHRoaXMuZWwgPSB0aGlzLl93YXRjaGVyID0gdGhpcy5fbGlzdGVuZXJzID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHRmdW5jdGlvbiBsaWZlY3ljbGVNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogVXBkYXRlIHYtcmVmIGZvciBjb21wb25lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl91cGRhdGVSZWYgPSBmdW5jdGlvbiAocmVtb3ZlKSB7XG5cdCAgICB2YXIgcmVmID0gdGhpcy4kb3B0aW9ucy5fcmVmO1xuXHQgICAgaWYgKHJlZikge1xuXHQgICAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLl9jb250ZXh0KS4kcmVmcztcblx0ICAgICAgaWYgKHJlbW92ZSkge1xuXHQgICAgICAgIGlmIChyZWZzW3JlZl0gPT09IHRoaXMpIHtcblx0ICAgICAgICAgIHJlZnNbcmVmXSA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlZnNbcmVmXSA9IHRoaXM7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBUcmFuc2NsdWRlLCBjb21waWxlIGFuZCBsaW5rIGVsZW1lbnQuXG5cdCAgICpcblx0ICAgKiBJZiBhIHByZS1jb21waWxlZCBsaW5rZXIgaXMgYXZhaWxhYmxlLCB0aGF0IG1lYW5zIHRoZVxuXHQgICAqIHBhc3NlZCBpbiBlbGVtZW50IHdpbGwgYmUgcHJlLXRyYW5zY2x1ZGVkIGFuZCBjb21waWxlZFxuXHQgICAqIGFzIHdlbGwgLSBhbGwgd2UgbmVlZCB0byBkbyBpcyB0byBjYWxsIHRoZSBsaW5rZXIuXG5cdCAgICpcblx0ICAgKiBPdGhlcndpc2Ugd2UgbmVlZCB0byBjYWxsIHRyYW5zY2x1ZGUvY29tcGlsZS9saW5rIGhlcmUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2NvbXBpbGUgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblx0XG5cdCAgICAvLyB0cmFuc2NsdWRlIGFuZCBpbml0IGVsZW1lbnRcblx0ICAgIC8vIHRyYW5zY2x1ZGUgY2FuIHBvdGVudGlhbGx5IHJlcGxhY2Ugb3JpZ2luYWxcblx0ICAgIC8vIHNvIHdlIG5lZWQgdG8ga2VlcCByZWZlcmVuY2U7IHRoaXMgc3RlcCBhbHNvIGluamVjdHNcblx0ICAgIC8vIHRoZSB0ZW1wbGF0ZSBhbmQgY2FjaGVzIHRoZSBvcmlnaW5hbCBhdHRyaWJ1dGVzXG5cdCAgICAvLyBvbiB0aGUgY29udGFpbmVyIG5vZGUgYW5kIHJlcGxhY2VyIG5vZGUuXG5cdCAgICB2YXIgb3JpZ2luYWwgPSBlbDtcblx0ICAgIGVsID0gdHJhbnNjbHVkZShlbCwgb3B0aW9ucyk7XG5cdCAgICB0aGlzLl9pbml0RWxlbWVudChlbCk7XG5cdFxuXHQgICAgLy8gaGFuZGxlIHYtcHJlIG9uIHJvb3Qgbm9kZSAoIzIwMjYpXG5cdCAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHJvb3QgaXMgYWx3YXlzIGNvbXBpbGVkIHBlci1pbnN0YW5jZSwgYmVjYXVzZVxuXHQgICAgLy8gY29udGFpbmVyIGF0dHJzIGFuZCBwcm9wcyBjYW4gYmUgZGlmZmVyZW50IGV2ZXJ5IHRpbWUuXG5cdCAgICB2YXIgY29udGV4dE9wdGlvbnMgPSB0aGlzLl9jb250ZXh0ICYmIHRoaXMuX2NvbnRleHQuJG9wdGlvbnM7XG5cdCAgICB2YXIgcm9vdExpbmtlciA9IGNvbXBpbGVSb290KGVsLCBvcHRpb25zLCBjb250ZXh0T3B0aW9ucyk7XG5cdFxuXHQgICAgLy8gcmVzb2x2ZSBzbG90IGRpc3RyaWJ1dGlvblxuXHQgICAgcmVzb2x2ZVNsb3RzKHRoaXMsIG9wdGlvbnMuX2NvbnRlbnQpO1xuXHRcblx0ICAgIC8vIGNvbXBpbGUgYW5kIGxpbmsgdGhlIHJlc3Rcblx0ICAgIHZhciBjb250ZW50TGlua0ZuO1xuXHQgICAgdmFyIGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuXHQgICAgLy8gY29tcG9uZW50IGNvbXBpbGF0aW9uIGNhbiBiZSBjYWNoZWRcblx0ICAgIC8vIGFzIGxvbmcgYXMgaXQncyBub3QgdXNpbmcgaW5saW5lLXRlbXBsYXRlXG5cdCAgICBpZiAob3B0aW9ucy5fbGlua2VyQ2FjaGFibGUpIHtcblx0ICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyO1xuXHQgICAgICBpZiAoIWNvbnRlbnRMaW5rRm4pIHtcblx0ICAgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXIgPSBjb21waWxlKGVsLCBvcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIGxpbmsgcGhhc2Vcblx0ICAgIC8vIG1ha2Ugc3VyZSB0byBsaW5rIHJvb3Qgd2l0aCBwcm9wIHNjb3BlIVxuXHQgICAgdmFyIHJvb3RVbmxpbmtGbiA9IHJvb3RMaW5rZXIodGhpcywgZWwsIHRoaXMuX3Njb3BlKTtcblx0ICAgIHZhciBjb250ZW50VW5saW5rRm4gPSBjb250ZW50TGlua0ZuID8gY29udGVudExpbmtGbih0aGlzLCBlbCkgOiBjb21waWxlKGVsLCBvcHRpb25zKSh0aGlzLCBlbCk7XG5cdFxuXHQgICAgLy8gcmVnaXN0ZXIgY29tcG9zaXRlIHVubGluayBmdW5jdGlvblxuXHQgICAgLy8gdG8gYmUgY2FsbGVkIGR1cmluZyBpbnN0YW5jZSBkZXN0cnVjdGlvblxuXHQgICAgdGhpcy5fdW5saW5rRm4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJvb3RVbmxpbmtGbigpO1xuXHQgICAgICAvLyBwYXNzaW5nIGRlc3Ryb3lpbmc6IHRydWUgdG8gYXZvaWQgc2VhcmNoaW5nIGFuZFxuXHQgICAgICAvLyBzcGxpY2luZyB0aGUgZGlyZWN0aXZlc1xuXHQgICAgICBjb250ZW50VW5saW5rRm4odHJ1ZSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGZpbmFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuXHQgICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuXHQgICAgICByZXBsYWNlKG9yaWdpbmFsLCBlbCk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5faXNDb21waWxlZCA9IHRydWU7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnY29tcGlsZWQnKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbml0aWFsaXplIGluc3RhbmNlIGVsZW1lbnQuIENhbGxlZCBpbiB0aGUgcHVibGljXG5cdCAgICogJG1vdW50KCkgbWV0aG9kLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RWxlbWVudCA9IGZ1bmN0aW9uIChlbCkge1xuXHQgICAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG5cdCAgICAgIHRoaXMuX2lzRnJhZ21lbnQgPSB0cnVlO1xuXHQgICAgICB0aGlzLiRlbCA9IHRoaXMuX2ZyYWdtZW50U3RhcnQgPSBlbC5maXJzdENoaWxkO1xuXHQgICAgICB0aGlzLl9mcmFnbWVudEVuZCA9IGVsLmxhc3RDaGlsZDtcblx0ICAgICAgLy8gc2V0IHBlcnNpc3RlZCB0ZXh0IGFuY2hvcnMgdG8gZW1wdHlcblx0ICAgICAgaWYgKHRoaXMuX2ZyYWdtZW50U3RhcnQubm9kZVR5cGUgPT09IDMpIHtcblx0ICAgICAgICB0aGlzLl9mcmFnbWVudFN0YXJ0LmRhdGEgPSB0aGlzLl9mcmFnbWVudEVuZC5kYXRhID0gJyc7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fZnJhZ21lbnQgPSBlbDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJGVsID0gZWw7XG5cdCAgICB9XG5cdCAgICB0aGlzLiRlbC5fX3Z1ZV9fID0gdGhpcztcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVDb21waWxlJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGFuZCBiaW5kIGEgZGlyZWN0aXZlIHRvIGFuIGVsZW1lbnQuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvciAtIHBhcnNlZCBkaXJlY3RpdmUgZGVzY3JpcHRvclxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAgIC0gdGFyZ2V0IG5vZGVcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2JpbmREaXIgPSBmdW5jdGlvbiAoZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIHRoaXMuX2RpcmVjdGl2ZXMucHVzaChuZXcgRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHRoaXMsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVGVhcmRvd24gYW4gaW5zdGFuY2UsIHVub2JzZXJ2ZXMgdGhlIGRhdGEsIHVuYmluZCBhbGwgdGhlXG5cdCAgICogZGlyZWN0aXZlcywgdHVybiBvZmYgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMsIGV0Yy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIC0gd2hldGhlciB0byByZW1vdmUgdGhlIERPTSBub2RlLlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwIC0gaWYgdHJ1ZSwgZGVmZXIgY2xlYW51cCB0b1xuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmUgY2FsbGVkIGxhdGVyXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcblx0ICAgIGlmICh0aGlzLl9pc0JlaW5nRGVzdHJveWVkKSB7XG5cdCAgICAgIGlmICghZGVmZXJDbGVhbnVwKSB7XG5cdCAgICAgICAgdGhpcy5fY2xlYW51cCgpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgZGVzdHJveVJlYWR5O1xuXHQgICAgdmFyIHBlbmRpbmdSZW1vdmFsO1xuXHRcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIC8vIENsZWFudXAgc2hvdWxkIGJlIGNhbGxlZCBlaXRoZXIgc3luY2hyb25vdXNseSBvciBhc3luY2hyb25veXNseSBhc1xuXHQgICAgLy8gY2FsbGJhY2sgb2YgdGhpcy4kcmVtb3ZlKCksIG9yIGlmIHJlbW92ZSBhbmQgZGVmZXJDbGVhbnVwIGFyZSBmYWxzZS5cblx0ICAgIC8vIEluIGFueSBjYXNlIGl0IHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgYWxsIG90aGVyIHJlbW92aW5nLCB1bmJpbmRpbmcgYW5kXG5cdCAgICAvLyB0dXJuaW5nIG9mIGlzIGRvbmVcblx0ICAgIHZhciBjbGVhbnVwSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIGNsZWFudXBJZlBvc3NpYmxlKCkge1xuXHQgICAgICBpZiAoZGVzdHJveVJlYWR5ICYmICFwZW5kaW5nUmVtb3ZhbCAmJiAhZGVmZXJDbGVhbnVwKSB7XG5cdCAgICAgICAgc2VsZi5fY2xlYW51cCgpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIHJlbW92ZSBET00gZWxlbWVudFxuXHQgICAgaWYgKHJlbW92ZSAmJiB0aGlzLiRlbCkge1xuXHQgICAgICBwZW5kaW5nUmVtb3ZhbCA9IHRydWU7XG5cdCAgICAgIHRoaXMuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgcGVuZGluZ1JlbW92YWwgPSBmYWxzZTtcblx0ICAgICAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlRGVzdHJveScpO1xuXHQgICAgdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRydWU7XG5cdCAgICB2YXIgaTtcblx0ICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gcGFyZW50LiBvbmx5IG5lY2Vzc2FyeVxuXHQgICAgLy8gaWYgcGFyZW50IGlzIG5vdCBiZWluZyBkZXN0cm95ZWQgYXMgd2VsbC5cblx0ICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG5cdCAgICBpZiAocGFyZW50ICYmICFwYXJlbnQuX2lzQmVpbmdEZXN0cm95ZWQpIHtcblx0ICAgICAgcGFyZW50LiRjaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgICAvLyB1bnJlZ2lzdGVyIHJlZiAocmVtb3ZlOiB0cnVlKVxuXHQgICAgICB0aGlzLl91cGRhdGVSZWYodHJ1ZSk7XG5cdCAgICB9XG5cdCAgICAvLyBkZXN0cm95IGFsbCBjaGlsZHJlbi5cblx0ICAgIGkgPSB0aGlzLiRjaGlsZHJlbi5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHRoaXMuJGNoaWxkcmVuW2ldLiRkZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgICAvLyB0ZWFyZG93biBwcm9wc1xuXHQgICAgaWYgKHRoaXMuX3Byb3BzVW5saW5rRm4pIHtcblx0ICAgICAgdGhpcy5fcHJvcHNVbmxpbmtGbigpO1xuXHQgICAgfVxuXHQgICAgLy8gdGVhcmRvd24gYWxsIGRpcmVjdGl2ZXMuIHRoaXMgYWxzbyB0ZWFyc2Rvd24gYWxsXG5cdCAgICAvLyBkaXJlY3RpdmUtb3duZWQgd2F0Y2hlcnMuXG5cdCAgICBpZiAodGhpcy5fdW5saW5rRm4pIHtcblx0ICAgICAgdGhpcy5fdW5saW5rRm4oKTtcblx0ICAgIH1cblx0ICAgIGkgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgICAvLyByZW1vdmUgcmVmZXJlbmNlIHRvIHNlbGYgb24gJGVsXG5cdCAgICBpZiAodGhpcy4kZWwpIHtcblx0ICAgICAgdGhpcy4kZWwuX192dWVfXyA9IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgZGVzdHJveVJlYWR5ID0gdHJ1ZTtcblx0ICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2xlYW4gdXAgdG8gZW5zdXJlIGdhcmJhZ2UgY29sbGVjdGlvbi5cblx0ICAgKiBUaGlzIGlzIGNhbGxlZCBhZnRlciB0aGUgbGVhdmUgdHJhbnNpdGlvbiBpZiB0aGVyZVxuXHQgICAqIGlzIGFueS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fY2xlYW51cCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmICh0aGlzLl9pc0Rlc3Ryb3llZCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyByZW1vdmUgc2VsZiBmcm9tIG93bmVyIGZyYWdtZW50XG5cdCAgICAvLyBkbyBpdCBpbiBjbGVhbnVwIHNvIHRoYXQgd2UgY2FuIGNhbGwgJGRlc3Ryb3kgd2l0aFxuXHQgICAgLy8gZGVmZXIgcmlnaHQgd2hlbiBhIGZyYWdtZW50IGlzIGFib3V0IHRvIGJlIHJlbW92ZWQuXG5cdCAgICBpZiAodGhpcy5fZnJhZykge1xuXHQgICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG5cdCAgICB9XG5cdCAgICAvLyByZW1vdmUgcmVmZXJlbmNlIGZyb20gZGF0YSBvYlxuXHQgICAgLy8gZnJvemVuIG9iamVjdCBtYXkgbm90IGhhdmUgb2JzZXJ2ZXIuXG5cdCAgICBpZiAodGhpcy5fZGF0YSAmJiB0aGlzLl9kYXRhLl9fb2JfXykge1xuXHQgICAgICB0aGlzLl9kYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIC8vIENsZWFuIHVwIHJlZmVyZW5jZXMgdG8gcHJpdmF0ZSBwcm9wZXJ0aWVzIGFuZCBvdGhlclxuXHQgICAgLy8gaW5zdGFuY2VzLiBwcmVzZXJ2ZSByZWZlcmVuY2UgdG8gX2RhdGEgc28gdGhhdCBwcm94eVxuXHQgICAgLy8gYWNjZXNzb3JzIHN0aWxsIHdvcmsuIFRoZSBvbmx5IHBvdGVudGlhbCBzaWRlIGVmZmVjdFxuXHQgICAgLy8gaGVyZSBpcyB0aGF0IG11dGF0aW5nIHRoZSBpbnN0YW5jZSBhZnRlciBpdCdzIGRlc3Ryb3llZFxuXHQgICAgLy8gbWF5IGFmZmVjdCB0aGUgc3RhdGUgb2Ygb3RoZXIgY29tcG9uZW50cyB0aGF0IGFyZSBzdGlsbFxuXHQgICAgLy8gb2JzZXJ2aW5nIHRoZSBzYW1lIG9iamVjdCwgYnV0IHRoYXQgc2VlbXMgdG8gYmUgYVxuXHQgICAgLy8gcmVhc29uYWJsZSByZXNwb25zaWJpbGl0eSBmb3IgdGhlIHVzZXIgcmF0aGVyIHRoYW5cblx0ICAgIC8vIGFsd2F5cyB0aHJvd2luZyBhbiBlcnJvciBvbiB0aGVtLlxuXHQgICAgdGhpcy4kZWwgPSB0aGlzLiRwYXJlbnQgPSB0aGlzLiRyb290ID0gdGhpcy4kY2hpbGRyZW4gPSB0aGlzLl93YXRjaGVycyA9IHRoaXMuX2NvbnRleHQgPSB0aGlzLl9zY29wZSA9IHRoaXMuX2RpcmVjdGl2ZXMgPSBudWxsO1xuXHQgICAgLy8gY2FsbCB0aGUgbGFzdCBob29rLi4uXG5cdCAgICB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRydWU7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnZGVzdHJveWVkJyk7XG5cdCAgICAvLyB0dXJuIG9mZiBhbGwgaW5zdGFuY2UgbGlzdGVuZXJzLlxuXHQgICAgdGhpcy4kb2ZmKCk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gbWlzY01peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBBcHBseSBhIGxpc3Qgb2YgZmlsdGVyIChkZXNjcmlwdG9ycykgdG8gYSB2YWx1ZS5cblx0ICAgKiBVc2luZyBwbGFpbiBmb3IgbG9vcHMgaGVyZSBiZWNhdXNlIHRoaXMgd2lsbCBiZSBjYWxsZWQgaW5cblx0ICAgKiB0aGUgZ2V0dGVyIG9mIGFueSB3YXRjaGVyIHdpdGggZmlsdGVycyBzbyBpdCBpcyB2ZXJ5XG5cdCAgICogcGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7Kn0gW29sZFZhbHVlXVxuXHQgICAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcnNcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHdyaXRlXG5cdCAgICogQHJldHVybiB7Kn1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fYXBwbHlGaWx0ZXJzID0gZnVuY3Rpb24gKHZhbHVlLCBvbGRWYWx1ZSwgZmlsdGVycywgd3JpdGUpIHtcblx0ICAgIHZhciBmaWx0ZXIsIGZuLCBhcmdzLCBhcmcsIG9mZnNldCwgaSwgbCwgaiwgaztcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBmaWx0ZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBmaWx0ZXIgPSBmaWx0ZXJzW3dyaXRlID8gbCAtIGkgLSAxIDogaV07XG5cdCAgICAgIGZuID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyLm5hbWUsIHRydWUpO1xuXHQgICAgICBpZiAoIWZuKSBjb250aW51ZTtcblx0ICAgICAgZm4gPSB3cml0ZSA/IGZuLndyaXRlIDogZm4ucmVhZCB8fCBmbjtcblx0ICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgY29udGludWU7XG5cdCAgICAgIGFyZ3MgPSB3cml0ZSA/IFt2YWx1ZSwgb2xkVmFsdWVdIDogW3ZhbHVlXTtcblx0ICAgICAgb2Zmc2V0ID0gd3JpdGUgPyAyIDogMTtcblx0ICAgICAgaWYgKGZpbHRlci5hcmdzKSB7XG5cdCAgICAgICAgZm9yIChqID0gMCwgayA9IGZpbHRlci5hcmdzLmxlbmd0aDsgaiA8IGs7IGorKykge1xuXHQgICAgICAgICAgYXJnID0gZmlsdGVyLmFyZ3Nbal07XG5cdCAgICAgICAgICBhcmdzW2ogKyBvZmZzZXRdID0gYXJnLmR5bmFtaWMgPyB0aGlzLiRnZXQoYXJnLnZhbHVlKSA6IGFyZy52YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdmFsdWUgPSBmbi5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZXNvbHZlIGEgY29tcG9uZW50LCBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgY29tcG9uZW50XG5cdCAgICogaXMgZGVmaW5lZCBub3JtYWxseSBvciB1c2luZyBhbiBhc3luYyBmYWN0b3J5IGZ1bmN0aW9uLlxuXHQgICAqIFJlc29sdmVzIHN5bmNocm9ub3VzbHkgaWYgYWxyZWFkeSByZXNvbHZlZCwgb3RoZXJ3aXNlXG5cdCAgICogcmVzb2x2ZXMgYXN5bmNocm9ub3VzbHkgYW5kIGNhY2hlcyB0aGUgcmVzb2x2ZWRcblx0ICAgKiBjb25zdHJ1Y3RvciBvbiB0aGUgZmFjdG9yeS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3Jlc29sdmVDb21wb25lbnQgPSBmdW5jdGlvbiAodmFsdWUsIGNiKSB7XG5cdCAgICB2YXIgZmFjdG9yeTtcblx0ICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgZmFjdG9yeSA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZmFjdG9yeSA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnY29tcG9uZW50cycsIHZhbHVlLCB0cnVlKTtcblx0ICAgIH1cblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKCFmYWN0b3J5KSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIC8vIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5XG5cdCAgICBpZiAoIWZhY3Rvcnkub3B0aW9ucykge1xuXHQgICAgICBpZiAoZmFjdG9yeS5yZXNvbHZlZCkge1xuXHQgICAgICAgIC8vIGNhY2hlZFxuXHQgICAgICAgIGNiKGZhY3RvcnkucmVzb2x2ZWQpO1xuXHQgICAgICB9IGVsc2UgaWYgKGZhY3RvcnkucmVxdWVzdGVkKSB7XG5cdCAgICAgICAgLy8gcG9vbCBjYWxsYmFja3Ncblx0ICAgICAgICBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MucHVzaChjYik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZmFjdG9yeS5yZXF1ZXN0ZWQgPSB0cnVlO1xuXHQgICAgICAgIHZhciBjYnMgPSBmYWN0b3J5LnBlbmRpbmdDYWxsYmFja3MgPSBbY2JdO1xuXHQgICAgICAgIGZhY3RvcnkuY2FsbCh0aGlzLCBmdW5jdGlvbiByZXNvbHZlKHJlcykge1xuXHQgICAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QocmVzKSkge1xuXHQgICAgICAgICAgICByZXMgPSBWdWUuZXh0ZW5kKHJlcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgICAvLyBjYWNoZSByZXNvbHZlZFxuXHQgICAgICAgICAgZmFjdG9yeS5yZXNvbHZlZCA9IHJlcztcblx0ICAgICAgICAgIC8vIGludm9rZSBjYWxsYmFja3Ncblx0ICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgICAgICBjYnNbaV0ocmVzKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9LCBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG5cdCAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ZhaWxlZCB0byByZXNvbHZlIGFzeW5jIGNvbXBvbmVudCcgKyAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/ICc6ICcgKyB2YWx1ZSA6ICcnKSArICcuICcgKyAocmVhc29uID8gJ1xcblJlYXNvbjogJyArIHJlYXNvbiA6ICcnKSk7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vcm1hbCBjb21wb25lbnRcblx0ICAgICAgY2IoZmFjdG9yeSk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIGZpbHRlclJFJDEgPSAvW158XVxcfFtefF0vO1xuXHRcblx0ZnVuY3Rpb24gZGF0YUFQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogR2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cblx0ICAgKiBAcmV0dXJuIHsqfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRnZXQgPSBmdW5jdGlvbiAoZXhwLCBhc1N0YXRlbWVudCkge1xuXHQgICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHApO1xuXHQgICAgaWYgKHJlcykge1xuXHQgICAgICBpZiAoYXNTdGF0ZW1lbnQpIHtcblx0ICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0YXRlbWVudEhhbmRsZXIoKSB7XG5cdCAgICAgICAgICBzZWxmLiRhcmd1bWVudHMgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG5cdCAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzLmdldC5jYWxsKHNlbGYsIHNlbGYpO1xuXHQgICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gbnVsbDtcblx0ICAgICAgICAgIHJldHVybiByZXN1bHQ7XG5cdCAgICAgICAgfTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgcmV0dXJuIHJlcy5nZXQuY2FsbCh0aGlzLCB0aGlzKTtcblx0ICAgICAgICB9IGNhdGNoIChlKSB7fVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cblx0ICAgKiBUaGUgZXhwcmVzc2lvbiBtdXN0IGJlIGEgdmFsaWQgbGVmdC1oYW5kXG5cdCAgICogZXhwcmVzc2lvbiBpbiBhbiBhc3NpZ25tZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHNldCA9IGZ1bmN0aW9uIChleHAsIHZhbCkge1xuXHQgICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHAsIHRydWUpO1xuXHQgICAgaWYgKHJlcyAmJiByZXMuc2V0KSB7XG5cdCAgICAgIHJlcy5zZXQuY2FsbCh0aGlzLCB0aGlzLCB2YWwpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIERlbGV0ZSBhIHByb3BlcnR5IG9uIHRoZSBWTVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRkZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICBkZWwodGhpcy5fZGF0YSwga2V5KTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBXYXRjaCBhbiBleHByZXNzaW9uLCB0cmlnZ2VyIGNhbGxiYWNrIHdoZW4gaXRzXG5cdCAgICogdmFsdWUgY2hhbmdlcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcblx0ICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gaW1tZWRpYXRlXG5cdCAgICogQHJldHVybiB7RnVuY3Rpb259IC0gdW53YXRjaEZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHdhdGNoID0gZnVuY3Rpb24gKGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgdmFyIHBhcnNlZDtcblx0ICAgIGlmICh0eXBlb2YgZXhwT3JGbiA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUoZXhwT3JGbik7XG5cdCAgICAgIGV4cE9yRm4gPSBwYXJzZWQuZXhwcmVzc2lvbjtcblx0ICAgIH1cblx0ICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCB7XG5cdCAgICAgIGRlZXA6IG9wdGlvbnMgJiYgb3B0aW9ucy5kZWVwLFxuXHQgICAgICBzeW5jOiBvcHRpb25zICYmIG9wdGlvbnMuc3luYyxcblx0ICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuXHQgICAgICB1c2VyOiAhb3B0aW9ucyB8fCBvcHRpb25zLnVzZXIgIT09IGZhbHNlXG5cdCAgICB9KTtcblx0ICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaW1tZWRpYXRlKSB7XG5cdCAgICAgIGNiLmNhbGwodm0sIHdhdGNoZXIudmFsdWUpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIHVud2F0Y2hGbigpIHtcblx0ICAgICAgd2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgfTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBFdmFsdWF0ZSBhIHRleHQgZGlyZWN0aXZlLCBpbmNsdWRpbmcgZmlsdGVycy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG5cdCAgICogQHJldHVybiB7U3RyaW5nfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRldmFsID0gZnVuY3Rpb24gKHRleHQsIGFzU3RhdGVtZW50KSB7XG5cdCAgICAvLyBjaGVjayBmb3IgZmlsdGVycy5cblx0ICAgIGlmIChmaWx0ZXJSRSQxLnRlc3QodGV4dCkpIHtcblx0ICAgICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKHRleHQpO1xuXHQgICAgICAvLyB0aGUgZmlsdGVyIHJlZ2V4IGNoZWNrIG1pZ2h0IGdpdmUgZmFsc2UgcG9zaXRpdmVcblx0ICAgICAgLy8gZm9yIHBpcGVzIGluc2lkZSBzdHJpbmdzLCBzbyBpdCdzIHBvc3NpYmxlIHRoYXRcblx0ICAgICAgLy8gd2UgZG9uJ3QgZ2V0IGFueSBmaWx0ZXJzIGhlcmVcblx0ICAgICAgdmFyIHZhbCA9IHRoaXMuJGdldChkaXIuZXhwcmVzc2lvbiwgYXNTdGF0ZW1lbnQpO1xuXHQgICAgICByZXR1cm4gZGlyLmZpbHRlcnMgPyB0aGlzLl9hcHBseUZpbHRlcnModmFsLCBudWxsLCBkaXIuZmlsdGVycykgOiB2YWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBubyBmaWx0ZXJcblx0ICAgICAgcmV0dXJuIHRoaXMuJGdldCh0ZXh0LCBhc1N0YXRlbWVudCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW50ZXJwb2xhdGUgYSBwaWVjZSBvZiB0ZW1wbGF0ZSB0ZXh0LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcblx0ICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGludGVycG9sYXRlID0gZnVuY3Rpb24gKHRleHQpIHtcblx0ICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQodGV4dCk7XG5cdCAgICB2YXIgdm0gPSB0aGlzO1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgIHJldHVybiB2bS4kZXZhbCh0b2tlbnNbMF0udmFsdWUpICsgJyc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG5cdCAgICAgICAgICByZXR1cm4gdG9rZW4udGFnID8gdm0uJGV2YWwodG9rZW4udmFsdWUpIDogdG9rZW4udmFsdWU7XG5cdCAgICAgICAgfSkuam9pbignJyk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHJldHVybiB0ZXh0O1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIExvZyBpbnN0YW5jZSBkYXRhIGFzIGEgcGxhaW4gSlMgb2JqZWN0XG5cdCAgICogc28gdGhhdCBpdCBpcyBlYXNpZXIgdG8gaW5zcGVjdCBpbiBjb25zb2xlLlxuXHQgICAqIFRoaXMgbWV0aG9kIGFzc3VtZXMgY29uc29sZSBpcyBhdmFpbGFibGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gW3BhdGhdXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGxvZyA9IGZ1bmN0aW9uIChwYXRoKSB7XG5cdCAgICB2YXIgZGF0YSA9IHBhdGggPyBnZXRQYXRoKHRoaXMuX2RhdGEsIHBhdGgpIDogdGhpcy5fZGF0YTtcblx0ICAgIGlmIChkYXRhKSB7XG5cdCAgICAgIGRhdGEgPSBjbGVhbihkYXRhKTtcblx0ICAgIH1cblx0ICAgIC8vIGluY2x1ZGUgY29tcHV0ZWQgZmllbGRzXG5cdCAgICBpZiAoIXBhdGgpIHtcblx0ICAgICAgdmFyIGtleTtcblx0ICAgICAgZm9yIChrZXkgaW4gdGhpcy4kb3B0aW9ucy5jb21wdXRlZCkge1xuXHQgICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHRoaXMuX3Byb3BzKSB7XG5cdCAgICAgICAgZm9yIChrZXkgaW4gdGhpcy5fcHJvcHMpIHtcblx0ICAgICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBjb25zb2xlLmxvZyhkYXRhKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBcImNsZWFuXCIgYSBnZXR0ZXIvc2V0dGVyIGNvbnZlcnRlZCBvYmplY3QgaW50byBhIHBsYWluXG5cdCAgICogb2JqZWN0IGNvcHkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gLSBvYmpcblx0ICAgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNsZWFuKG9iaikge1xuXHQgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBkb21BUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIENvbnZlbmllbmNlIG9uLWluc3RhbmNlIG5leHRUaWNrLiBUaGUgY2FsbGJhY2sgaXNcblx0ICAgKiBhdXRvLWJvdW5kIHRvIHRoZSBpbnN0YW5jZSwgYW5kIHRoaXMgYXZvaWRzIGNvbXBvbmVudFxuXHQgICAqIG1vZHVsZXMgaGF2aW5nIHRvIHJlbHkgb24gdGhlIGdsb2JhbCBWdWUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRuZXh0VGljayA9IGZ1bmN0aW9uIChmbikge1xuXHQgICAgbmV4dFRpY2soZm4sIHRoaXMpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFwcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYXBwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGFwcGVuZCwgYXBwZW5kV2l0aFRyYW5zaXRpb24pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFByZXBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJHByZXBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcblx0ICAgIGlmICh0YXJnZXQuaGFzQ2hpbGROb2RlcygpKSB7XG5cdCAgICAgIHRoaXMuJGJlZm9yZSh0YXJnZXQuZmlyc3RDaGlsZCwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydCBpbnN0YW5jZSBiZWZvcmUgdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGJlZm9yZSA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYmVmb3JlV2l0aENiLCBiZWZvcmVXaXRoVHJhbnNpdGlvbik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0IGluc3RhbmNlIGFmdGVyIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRhZnRlciA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcblx0ICAgIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcblx0ICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5uZXh0U2libGluZywgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldC5wYXJlbnROb2RlLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIGluc3RhbmNlIGZyb20gRE9NXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRyZW1vdmUgPSBmdW5jdGlvbiAoY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICBpZiAoIXRoaXMuJGVsLnBhcmVudE5vZGUpIHtcblx0ICAgICAgcmV0dXJuIGNiICYmIGNiKCk7XG5cdCAgICB9XG5cdCAgICB2YXIgaW5Eb2N1bWVudCA9IHRoaXMuX2lzQXR0YWNoZWQgJiYgaW5Eb2ModGhpcy4kZWwpO1xuXHQgICAgLy8gaWYgd2UgYXJlIG5vdCBpbiBkb2N1bWVudCwgbm8gbmVlZCB0byBjaGVja1xuXHQgICAgLy8gZm9yIHRyYW5zaXRpb25zXG5cdCAgICBpZiAoIWluRG9jdW1lbnQpIHdpdGhUcmFuc2l0aW9uID0gZmFsc2U7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgcmVhbENiID0gZnVuY3Rpb24gcmVhbENiKCkge1xuXHQgICAgICBpZiAoaW5Eb2N1bWVudCkgc2VsZi5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG5cdCAgICAgIGlmIChjYikgY2IoKTtcblx0ICAgIH07XG5cdCAgICBpZiAodGhpcy5faXNGcmFnbWVudCkge1xuXHQgICAgICByZW1vdmVOb2RlUmFuZ2UodGhpcy5fZnJhZ21lbnRTdGFydCwgdGhpcy5fZnJhZ21lbnRFbmQsIHRoaXMsIHRoaXMuX2ZyYWdtZW50LCByZWFsQ2IpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlID8gcmVtb3ZlV2l0aENiIDogcmVtb3ZlV2l0aFRyYW5zaXRpb247XG5cdCAgICAgIG9wKHRoaXMuJGVsLCB0aGlzLCByZWFsQ2IpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2hhcmVkIERPTSBpbnNlcnRpb24gZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl1cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDEgLSBvcCBmb3Igbm9uLXRyYW5zaXRpb24gaW5zZXJ0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AyIC0gb3AgZm9yIHRyYW5zaXRpb24gaW5zZXJ0XG5cdCAgICogQHJldHVybiB2bVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBpbnNlcnQodm0sIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBvcDEsIG9wMikge1xuXHQgICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcblx0ICAgIHZhciB0YXJnZXRJc0RldGFjaGVkID0gIWluRG9jKHRhcmdldCk7XG5cdCAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgfHwgdGFyZ2V0SXNEZXRhY2hlZCA/IG9wMSA6IG9wMjtcblx0ICAgIHZhciBzaG91bGRDYWxsSG9vayA9ICF0YXJnZXRJc0RldGFjaGVkICYmICF2bS5faXNBdHRhY2hlZCAmJiAhaW5Eb2Modm0uJGVsKTtcblx0ICAgIGlmICh2bS5faXNGcmFnbWVudCkge1xuXHQgICAgICBtYXBOb2RlUmFuZ2Uodm0uX2ZyYWdtZW50U3RhcnQsIHZtLl9mcmFnbWVudEVuZCwgZnVuY3Rpb24gKG5vZGUpIHtcblx0ICAgICAgICBvcChub2RlLCB0YXJnZXQsIHZtKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIGNiICYmIGNiKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvcCh2bS4kZWwsIHRhcmdldCwgdm0sIGNiKTtcblx0ICAgIH1cblx0ICAgIGlmIChzaG91bGRDYWxsSG9vaykge1xuXHQgICAgICB2bS5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdm07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBmb3Igc2VsZWN0b3JzXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBxdWVyeShlbCkge1xuXHQgICAgcmV0dXJuIHR5cGVvZiBlbCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKSA6IGVsO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQXBwZW5kIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGFwcGVuZChlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnRCZWZvcmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYmVmb3JlV2l0aENiKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuXHQgICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZW1vdmVXaXRoQ2IoZWwsIHZtLCBjYikge1xuXHQgICAgcmVtb3ZlKGVsKTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGV2ZW50c0FQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG9uID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuXHQgICAgKHRoaXMuX2V2ZW50c1tldmVudF0gfHwgKHRoaXMuX2V2ZW50c1tldmVudF0gPSBbXSkpLnB1c2goZm4pO1xuXHQgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgMSk7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcblx0ICAgKiB0aW1lIHRoZW4gYXV0b21hdGljYWxseSByZW1vdmVkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kb25jZSA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIGZ1bmN0aW9uIG9uKCkge1xuXHQgICAgICBzZWxmLiRvZmYoZXZlbnQsIG9uKTtcblx0ICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH1cblx0ICAgIG9uLmZuID0gZm47XG5cdCAgICB0aGlzLiRvbihldmVudCwgb24pO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIHRoZSBnaXZlbiBjYWxsYmFjayBmb3IgYGV2ZW50YCBvciBhbGxcblx0ICAgKiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG9mZiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgIHZhciBjYnM7XG5cdCAgICAvLyBhbGxcblx0ICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuXHQgICAgICBpZiAodGhpcy4kcGFyZW50KSB7XG5cdCAgICAgICAgZm9yIChldmVudCBpbiB0aGlzLl9ldmVudHMpIHtcblx0ICAgICAgICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG5cdCAgICAgICAgICBpZiAoY2JzKSB7XG5cdCAgICAgICAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5fZXZlbnRzID0ge307XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgICAgLy8gc3BlY2lmaWMgZXZlbnRcblx0ICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG5cdCAgICBpZiAoIWNicykge1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG5cdCAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcblx0ICAgICAgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IG51bGw7XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfVxuXHQgICAgLy8gc3BlY2lmaWMgaGFuZGxlclxuXHQgICAgdmFyIGNiO1xuXHQgICAgdmFyIGkgPSBjYnMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBjYiA9IGNic1tpXTtcblx0ICAgICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcblx0ICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtMSk7XG5cdCAgICAgICAgY2JzLnNwbGljZShpLCAxKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVHJpZ2dlciBhbiBldmVudCBvbiBzZWxmLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuXHQgICAqIEByZXR1cm4ge0Jvb2xlYW59IHNob3VsZFByb3BhZ2F0ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRlbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xuXHQgICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcblx0ICAgIHZhciBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IGlzU291cmNlIHx8ICFjYnM7XG5cdCAgICBpZiAoY2JzKSB7XG5cdCAgICAgIGNicyA9IGNicy5sZW5ndGggPiAxID8gdG9BcnJheShjYnMpIDogY2JzO1xuXHQgICAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgaGFja3kgc29sdXRpb24gdG8gdGhlIHF1ZXN0aW9uIHJhaXNlZFxuXHQgICAgICAvLyBpbiAjMjEwMjogZm9yIGFuIGlubGluZSBjb21wb25lbnQgbGlzdGVuZXIgbGlrZSA8Y29tcCBAdGVzdD1cImRvVGhpc1wiPixcblx0ICAgICAgLy8gdGhlIHByb3BhZ2F0aW9uIGhhbmRsaW5nIGlzIHNvbWV3aGF0IGJyb2tlbi4gVGhlcmVmb3JlIHdlXG5cdCAgICAgIC8vIG5lZWQgdG8gdHJlYXQgdGhlc2UgaW5saW5lIGNhbGxiYWNrcyBkaWZmZXJlbnRseS5cblx0ICAgICAgdmFyIGhhc1BhcmVudENicyA9IGlzU291cmNlICYmIGNicy5zb21lKGZ1bmN0aW9uIChjYikge1xuXHQgICAgICAgIHJldHVybiBjYi5fZnJvbVBhcmVudDtcblx0ICAgICAgfSk7XG5cdCAgICAgIGlmIChoYXNQYXJlbnRDYnMpIHtcblx0ICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgdmFyIGNiID0gY2JzW2ldO1xuXHQgICAgICAgIHZhciByZXMgPSBjYi5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgICAgICBpZiAocmVzID09PSB0cnVlICYmICghaGFzUGFyZW50Q2JzIHx8IGNiLl9mcm9tUGFyZW50KSkge1xuXHQgICAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiBzaG91bGRQcm9wYWdhdGU7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVjdXJzaXZlbHkgYnJvYWRjYXN0IGFuIGV2ZW50IHRvIGFsbCBjaGlsZHJlbiBpbnN0YW5jZXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG5cdCAgICogQHBhcmFtIHsuLi4qfSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRicm9hZGNhc3QgPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG5cdCAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuXHQgICAgLy8gaWYgbm8gY2hpbGQgaGFzIHJlZ2lzdGVyZWQgZm9yIHRoaXMgZXZlbnQsXG5cdCAgICAvLyB0aGVuIHRoZXJlJ3Mgbm8gbmVlZCB0byBicm9hZGNhc3QuXG5cdCAgICBpZiAoIXRoaXMuX2V2ZW50c0NvdW50W2V2ZW50XSkgcmV0dXJuO1xuXHQgICAgdmFyIGNoaWxkcmVuID0gdGhpcy4kY2hpbGRyZW47XG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcblx0ICAgIGlmIChpc1NvdXJjZSkge1xuXHQgICAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuXHQgICAgICAvLyBvbiBjaGlsZHJlblxuXHQgICAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcblx0ICAgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IGNoaWxkLiRlbWl0LmFwcGx5KGNoaWxkLCBhcmdzKTtcblx0ICAgICAgaWYgKHNob3VsZFByb3BhZ2F0ZSkge1xuXHQgICAgICAgIGNoaWxkLiRicm9hZGNhc3QuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZWN1cnNpdmVseSBwcm9wYWdhdGUgYW4gZXZlbnQgdXAgdGhlIHBhcmVudCBjaGFpbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZGlzcGF0Y2ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcblx0ICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSB0aGlzLiRlbWl0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICBpZiAoIXNob3VsZFByb3BhZ2F0ZSkgcmV0dXJuO1xuXHQgICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuXHQgICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcblx0ICAgIC8vIG9uIHBhcmVudHNcblx0ICAgIGFyZ3NbMF0gPSB7IG5hbWU6IGV2ZW50LCBzb3VyY2U6IHRoaXMgfTtcblx0ICAgIHdoaWxlIChwYXJlbnQpIHtcblx0ICAgICAgc2hvdWxkUHJvcGFnYXRlID0gcGFyZW50LiRlbWl0LmFwcGx5KHBhcmVudCwgYXJncyk7XG5cdCAgICAgIHBhcmVudCA9IHNob3VsZFByb3BhZ2F0ZSA/IHBhcmVudC4kcGFyZW50IDogbnVsbDtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIE1vZGlmeSB0aGUgbGlzdGVuZXIgY291bnRzIG9uIGFsbCBwYXJlbnRzLlxuXHQgICAqIFRoaXMgYm9va2tlZXBpbmcgYWxsb3dzICRicm9hZGNhc3QgdG8gcmV0dXJuIGVhcmx5IHdoZW5cblx0ICAgKiBubyBjaGlsZCBoYXMgbGlzdGVuZWQgdG8gYSBjZXJ0YWluIGV2ZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGNvdW50XG5cdCAgICovXG5cdFxuXHQgIHZhciBob29rUkUgPSAvXmhvb2s6Lztcblx0ICBmdW5jdGlvbiBtb2RpZnlMaXN0ZW5lckNvdW50KHZtLCBldmVudCwgY291bnQpIHtcblx0ICAgIHZhciBwYXJlbnQgPSB2bS4kcGFyZW50O1xuXHQgICAgLy8gaG9va3MgZG8gbm90IGdldCBicm9hZGNhc3RlZCBzbyBubyBuZWVkXG5cdCAgICAvLyB0byBkbyBib29ra2VlcGluZyBmb3IgdGhlbVxuXHQgICAgaWYgKCFwYXJlbnQgfHwgIWNvdW50IHx8IGhvb2tSRS50ZXN0KGV2ZW50KSkgcmV0dXJuO1xuXHQgICAgd2hpbGUgKHBhcmVudCkge1xuXHQgICAgICBwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSA9IChwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSB8fCAwKSArIGNvdW50O1xuXHQgICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGxpZmVjeWNsZUFQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogU2V0IGluc3RhbmNlIHRhcmdldCBlbGVtZW50IGFuZCBraWNrIG9mZiB0aGUgY29tcGlsYXRpb25cblx0ICAgKiBwcm9jZXNzLiBUaGUgcGFzc2VkIGluIGBlbGAgY2FuIGJlIGEgc2VsZWN0b3Igc3RyaW5nLCBhblxuXHQgICAqIGV4aXN0aW5nIEVsZW1lbnQsIG9yIGEgRG9jdW1lbnRGcmFnbWVudCAoZm9yIGJsb2NrXG5cdCAgICogaW5zdGFuY2VzKS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fHN0cmluZ30gZWxcblx0ICAgKiBAcHVibGljXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG1vdW50ID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgICBpZiAodGhpcy5faXNDb21waWxlZCkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJyRtb3VudCgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLicsIHRoaXMpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICBlbCA9IHF1ZXJ5KGVsKTtcblx0ICAgIGlmICghZWwpIHtcblx0ICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIH1cblx0ICAgIHRoaXMuX2NvbXBpbGUoZWwpO1xuXHQgICAgdGhpcy5faW5pdERPTUhvb2tzKCk7XG5cdCAgICBpZiAoaW5Eb2ModGhpcy4kZWwpKSB7XG5cdCAgICAgIHRoaXMuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgICAgICByZWFkeS5jYWxsKHRoaXMpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy4kb25jZSgnaG9vazphdHRhY2hlZCcsIHJlYWR5KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIE1hcmsgYW4gaW5zdGFuY2UgYXMgcmVhZHkuXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHJlYWR5KCkge1xuXHQgICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG5cdCAgICB0aGlzLl9pc1JlYWR5ID0gdHJ1ZTtcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdyZWFkeScpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogVGVhcmRvd24gdGhlIGluc3RhbmNlLCBzaW1wbHkgZGVsZWdhdGUgdG8gdGhlIGludGVybmFsXG5cdCAgICogX2Rlc3Ryb3kuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGRlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcblx0ICAgIHRoaXMuX2Rlc3Ryb3kocmVtb3ZlLCBkZWZlckNsZWFudXApO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFBhcnRpYWxseSBjb21waWxlIGEgcGllY2Ugb2YgRE9NIGFuZCByZXR1cm4gYVxuXHQgICAqIGRlY29tcGlsZSBmdW5jdGlvbi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuXHQgICAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXVxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRjb21waWxlID0gZnVuY3Rpb24gKGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgcmV0dXJuIGNvbXBpbGUoZWwsIHRoaXMuJG9wdGlvbnMsIHRydWUpKHRoaXMsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRoZSBleHBvc2VkIFZ1ZSBjb25zdHJ1Y3Rvci5cblx0ICpcblx0ICogQVBJIGNvbnZlbnRpb25zOlxuXHQgKiAtIHB1YmxpYyBBUEkgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGAkYFxuXHQgKiAtIGludGVybmFsIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgX2Bcblx0ICogLSBub24tcHJlZml4ZWQgcHJvcGVydGllcyBhcmUgYXNzdW1lZCB0byBiZSBwcm94aWVkIHVzZXJcblx0ICogICBkYXRhLlxuXHQgKlxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgKiBAcHVibGljXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gVnVlKG9wdGlvbnMpIHtcblx0ICB0aGlzLl9pbml0KG9wdGlvbnMpO1xuXHR9XG5cdFxuXHQvLyBpbnN0YWxsIGludGVybmFsc1xuXHRpbml0TWl4aW4oVnVlKTtcblx0c3RhdGVNaXhpbihWdWUpO1xuXHRldmVudHNNaXhpbihWdWUpO1xuXHRsaWZlY3ljbGVNaXhpbihWdWUpO1xuXHRtaXNjTWl4aW4oVnVlKTtcblx0XG5cdC8vIGluc3RhbGwgaW5zdGFuY2UgQVBJc1xuXHRkYXRhQVBJKFZ1ZSk7XG5cdGRvbUFQSShWdWUpO1xuXHRldmVudHNBUEkoVnVlKTtcblx0bGlmZWN5Y2xlQVBJKFZ1ZSk7XG5cdFxuXHR2YXIgc2xvdCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IFNMT1QsXG5cdCAgcGFyYW1zOiBbJ25hbWUnXSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIHRoaXMgd2FzIHJlc29sdmVkIGR1cmluZyBjb21wb25lbnQgdHJhbnNjbHVzaW9uXG5cdCAgICB2YXIgbmFtZSA9IHRoaXMucGFyYW1zLm5hbWUgfHwgJ2RlZmF1bHQnO1xuXHQgICAgdmFyIGNvbnRlbnQgPSB0aGlzLnZtLl9zbG90Q29udGVudHMgJiYgdGhpcy52bS5fc2xvdENvbnRlbnRzW25hbWVdO1xuXHQgICAgaWYgKCFjb250ZW50IHx8ICFjb250ZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgICB0aGlzLmZhbGxiYWNrKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLmNvbXBpbGUoY29udGVudC5jbG9uZU5vZGUodHJ1ZSksIHRoaXMudm0uX2NvbnRleHQsIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGNvbXBpbGU6IGZ1bmN0aW9uIGNvbXBpbGUoY29udGVudCwgY29udGV4dCwgaG9zdCkge1xuXHQgICAgaWYgKGNvbnRlbnQgJiYgY29udGV4dCkge1xuXHQgICAgICBpZiAodGhpcy5lbC5oYXNDaGlsZE5vZGVzKCkgJiYgY29udGVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJiBjb250ZW50LmNoaWxkTm9kZXNbMF0ubm9kZVR5cGUgPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICAgICAgLy8gaWYgdGhlIGluc2VydGVkIHNsb3QgaGFzIHYtaWZcblx0ICAgICAgICAvLyBpbmplY3QgZmFsbGJhY2sgY29udGVudCBhcyB0aGUgdi1lbHNlXG5cdCAgICAgICAgdmFyIGVsc2VCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG5cdCAgICAgICAgZWxzZUJsb2NrLnNldEF0dHJpYnV0ZSgndi1lbHNlJywgJycpO1xuXHQgICAgICAgIGVsc2VCbG9jay5pbm5lckhUTUwgPSB0aGlzLmVsLmlubmVySFRNTDtcblx0ICAgICAgICAvLyB0aGUgZWxzZSBibG9jayBzaG91bGQgYmUgY29tcGlsZWQgaW4gY2hpbGQgc2NvcGVcblx0ICAgICAgICBlbHNlQmxvY2suX2NvbnRleHQgPSB0aGlzLnZtO1xuXHQgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWxzZUJsb2NrKTtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgc2NvcGUgPSBob3N0ID8gaG9zdC5fc2NvcGUgOiB0aGlzLl9zY29wZTtcblx0ICAgICAgdGhpcy51bmxpbmsgPSBjb250ZXh0LiRjb21waWxlKGNvbnRlbnQsIGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgIH1cblx0ICAgIGlmIChjb250ZW50KSB7XG5cdCAgICAgIHJlcGxhY2UodGhpcy5lbCwgY29udGVudCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZW1vdmUodGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgZmFsbGJhY2s6IGZ1bmN0aW9uIGZhbGxiYWNrKCkge1xuXHQgICAgdGhpcy5jb21waWxlKGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpLCB0aGlzLnZtKTtcblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLnVubGluaykge1xuXHQgICAgICB0aGlzLnVubGluaygpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBwYXJ0aWFsID0ge1xuXHRcblx0ICBwcmlvcml0eTogUEFSVElBTCxcblx0XG5cdCAgcGFyYW1zOiBbJ25hbWUnXSxcblx0XG5cdCAgLy8gd2F0Y2ggY2hhbmdlcyB0byBuYW1lIGZvciBkeW5hbWljIHBhcnRpYWxzXG5cdCAgcGFyYW1XYXRjaGVyczoge1xuXHQgICAgbmFtZTogZnVuY3Rpb24gbmFtZSh2YWx1ZSkge1xuXHQgICAgICB2SWYucmVtb3ZlLmNhbGwodGhpcyk7XG5cdCAgICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICAgIHRoaXMuaW5zZXJ0KHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1wYXJ0aWFsJyk7XG5cdCAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcblx0ICAgIHRoaXMuaW5zZXJ0KHRoaXMucGFyYW1zLm5hbWUpO1xuXHQgIH0sXG5cdFxuXHQgIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGlkKSB7XG5cdCAgICB2YXIgcGFydGlhbCA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAncGFydGlhbHMnLCBpZCwgdHJ1ZSk7XG5cdCAgICBpZiAocGFydGlhbCkge1xuXHQgICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHBhcnRpYWwpO1xuXHQgICAgICB2SWYuaW5zZXJ0LmNhbGwodGhpcyk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy5mcmFnKSB7XG5cdCAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGVsZW1lbnREaXJlY3RpdmVzID0ge1xuXHQgIHNsb3Q6IHNsb3QsXG5cdCAgcGFydGlhbDogcGFydGlhbFxuXHR9O1xuXHRcblx0dmFyIGNvbnZlcnRBcnJheSA9IHZGb3IuX3Bvc3RQcm9jZXNzO1xuXHRcblx0LyoqXG5cdCAqIExpbWl0IGZpbHRlciBmb3IgYXJyYXlzXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBuXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgKERlY2ltYWwgZXhwZWN0ZWQpXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbGltaXRCeShhcnIsIG4sIG9mZnNldCkge1xuXHQgIG9mZnNldCA9IG9mZnNldCA/IHBhcnNlSW50KG9mZnNldCwgMTApIDogMDtcblx0ICBuID0gdG9OdW1iZXIobik7XG5cdCAgcmV0dXJuIHR5cGVvZiBuID09PSAnbnVtYmVyJyA/IGFyci5zbGljZShvZmZzZXQsIG9mZnNldCArIG4pIDogYXJyO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcblx0ICogQHBhcmFtIHtTdHJpbmd9IFtkZWxpbWl0ZXJdXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSAuLi5kYXRhS2V5c1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZpbHRlckJ5KGFyciwgc2VhcmNoLCBkZWxpbWl0ZXIpIHtcblx0ICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcblx0ICBpZiAoc2VhcmNoID09IG51bGwpIHtcblx0ICAgIHJldHVybiBhcnI7XG5cdCAgfVxuXHQgIGlmICh0eXBlb2Ygc2VhcmNoID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICByZXR1cm4gYXJyLmZpbHRlcihzZWFyY2gpO1xuXHQgIH1cblx0ICAvLyBjYXN0IHRvIGxvd2VyY2FzZSBzdHJpbmdcblx0ICBzZWFyY2ggPSAoJycgKyBzZWFyY2gpLnRvTG93ZXJDYXNlKCk7XG5cdCAgLy8gYWxsb3cgb3B0aW9uYWwgYGluYCBkZWxpbWl0ZXJcblx0ICAvLyBiZWNhdXNlIHdoeSBub3Rcblx0ICB2YXIgbiA9IGRlbGltaXRlciA9PT0gJ2luJyA/IDMgOiAyO1xuXHQgIC8vIGV4dHJhY3QgYW5kIGZsYXR0ZW4ga2V5c1xuXHQgIHZhciBrZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgdG9BcnJheShhcmd1bWVudHMsIG4pKTtcblx0ICB2YXIgcmVzID0gW107XG5cdCAgdmFyIGl0ZW0sIGtleSwgdmFsLCBqO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgaXRlbSA9IGFycltpXTtcblx0ICAgIHZhbCA9IGl0ZW0gJiYgaXRlbS4kdmFsdWUgfHwgaXRlbTtcblx0ICAgIGogPSBrZXlzLmxlbmd0aDtcblx0ICAgIGlmIChqKSB7XG5cdCAgICAgIHdoaWxlIChqLS0pIHtcblx0ICAgICAgICBrZXkgPSBrZXlzW2pdO1xuXHQgICAgICAgIGlmIChrZXkgPT09ICcka2V5JyAmJiBjb250YWlucyhpdGVtLiRrZXksIHNlYXJjaCkgfHwgY29udGFpbnMoZ2V0UGF0aCh2YWwsIGtleSksIHNlYXJjaCkpIHtcblx0ICAgICAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuXHQgICAgICAgICAgYnJlYWs7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKGNvbnRhaW5zKGl0ZW0sIHNlYXJjaCkpIHtcblx0ICAgICAgcmVzLnB1c2goaXRlbSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd8QXJyYXk8U3RyaW5nPnxGdW5jdGlvbn0gLi4uc29ydEtleXNcblx0ICogQHBhcmFtIHtOdW1iZXJ9IFtvcmRlcl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBvcmRlckJ5KGFycikge1xuXHQgIHZhciBjb21wYXJhdG9yID0gbnVsbDtcblx0ICB2YXIgc29ydEtleXMgPSB1bmRlZmluZWQ7XG5cdCAgYXJyID0gY29udmVydEFycmF5KGFycik7XG5cdFxuXHQgIC8vIGRldGVybWluZSBvcmRlciAobGFzdCBhcmd1bWVudClcblx0ICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICB2YXIgb3JkZXIgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG5cdCAgaWYgKHR5cGVvZiBvcmRlciA9PT0gJ251bWJlcicpIHtcblx0ICAgIG9yZGVyID0gb3JkZXIgPCAwID8gLTEgOiAxO1xuXHQgICAgYXJncyA9IGFyZ3MubGVuZ3RoID4gMSA/IGFyZ3Muc2xpY2UoMCwgLTEpIDogYXJncztcblx0ICB9IGVsc2Uge1xuXHQgICAgb3JkZXIgPSAxO1xuXHQgIH1cblx0XG5cdCAgLy8gZGV0ZXJtaW5lIHNvcnRLZXlzICYgY29tcGFyYXRvclxuXHQgIHZhciBmaXJzdEFyZyA9IGFyZ3NbMF07XG5cdCAgaWYgKCFmaXJzdEFyZykge1xuXHQgICAgcmV0dXJuIGFycjtcblx0ICB9IGVsc2UgaWYgKHR5cGVvZiBmaXJzdEFyZyA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgLy8gY3VzdG9tIGNvbXBhcmF0b3Jcblx0ICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikge1xuXHQgICAgICByZXR1cm4gZmlyc3RBcmcoYSwgYikgKiBvcmRlcjtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIC8vIHN0cmluZyBrZXlzLiBmbGF0dGVuIGZpcnN0XG5cdCAgICBzb3J0S2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGFyZ3MpO1xuXHQgICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiLCBpKSB7XG5cdCAgICAgIGkgPSBpIHx8IDA7XG5cdCAgICAgIHJldHVybiBpID49IHNvcnRLZXlzLmxlbmd0aCAtIDEgPyBiYXNlQ29tcGFyZShhLCBiLCBpKSA6IGJhc2VDb21wYXJlKGEsIGIsIGkpIHx8IGNvbXBhcmF0b3IoYSwgYiwgaSArIDEpO1xuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGJhc2VDb21wYXJlKGEsIGIsIHNvcnRLZXlJbmRleCkge1xuXHQgICAgdmFyIHNvcnRLZXkgPSBzb3J0S2V5c1tzb3J0S2V5SW5kZXhdO1xuXHQgICAgaWYgKHNvcnRLZXkpIHtcblx0ICAgICAgaWYgKHNvcnRLZXkgIT09ICcka2V5Jykge1xuXHQgICAgICAgIGlmIChpc09iamVjdChhKSAmJiAnJHZhbHVlJyBpbiBhKSBhID0gYS4kdmFsdWU7XG5cdCAgICAgICAgaWYgKGlzT2JqZWN0KGIpICYmICckdmFsdWUnIGluIGIpIGIgPSBiLiR2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgICBhID0gaXNPYmplY3QoYSkgPyBnZXRQYXRoKGEsIHNvcnRLZXkpIDogYTtcblx0ICAgICAgYiA9IGlzT2JqZWN0KGIpID8gZ2V0UGF0aChiLCBzb3J0S2V5KSA6IGI7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gYSA9PT0gYiA/IDAgOiBhID4gYiA/IG9yZGVyIDogLW9yZGVyO1xuXHQgIH1cblx0XG5cdCAgLy8gc29ydCBvbiBhIGNvcHkgdG8gYXZvaWQgbXV0YXRpbmcgb3JpZ2luYWwgYXJyYXlcblx0ICByZXR1cm4gYXJyLnNsaWNlKCkuc29ydChjb21wYXJhdG9yKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN0cmluZyBjb250YWluIGhlbHBlclxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29udGFpbnModmFsLCBzZWFyY2gpIHtcblx0ICB2YXIgaTtcblx0ICBpZiAoaXNQbGFpbk9iamVjdCh2YWwpKSB7XG5cdCAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGlmIChjb250YWlucyh2YWxba2V5c1tpXV0sIHNlYXJjaCkpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7XG5cdCAgICBpID0gdmFsLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgaWYgKGNvbnRhaW5zKHZhbFtpXSwgc2VhcmNoKSkge1xuXHQgICAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh2YWwgIT0gbnVsbCkge1xuXHQgICAgcmV0dXJuIHZhbC50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzZWFyY2gpID4gLTE7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgZGlnaXRzUkUgPSAvKFxcZHszfSkoPz1cXGQpL2c7XG5cdFxuXHQvLyBhc3NldCBjb2xsZWN0aW9ucyBtdXN0IGJlIGEgcGxhaW4gb2JqZWN0LlxuXHR2YXIgZmlsdGVycyA9IHtcblx0XG5cdCAgb3JkZXJCeTogb3JkZXJCeSxcblx0ICBmaWx0ZXJCeTogZmlsdGVyQnksXG5cdCAgbGltaXRCeTogbGltaXRCeSxcblx0XG5cdCAgLyoqXG5cdCAgICogU3RyaW5naWZ5IHZhbHVlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGVudFxuXHQgICAqL1xuXHRcblx0ICBqc29uOiB7XG5cdCAgICByZWFkOiBmdW5jdGlvbiByZWFkKHZhbHVlLCBpbmRlbnQpIHtcblx0ICAgICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyB2YWx1ZSA6IEpTT04uc3RyaW5naWZ5KHZhbHVlLCBudWxsLCBhcmd1bWVudHMubGVuZ3RoID4gMSA/IGluZGVudCA6IDIpO1xuXHQgICAgfSxcblx0ICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSh2YWx1ZSkge1xuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcblx0ICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgIHJldHVybiB2YWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdhYmMnID0+ICdBYmMnXG5cdCAgICovXG5cdFxuXHQgIGNhcGl0YWxpemU6IGZ1bmN0aW9uIGNhcGl0YWxpemUodmFsdWUpIHtcblx0ICAgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcblx0ICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcblx0ICAgIHJldHVybiB2YWx1ZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHZhbHVlLnNsaWNlKDEpO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdhYmMnID0+ICdBQkMnXG5cdCAgICovXG5cdFxuXHQgIHVwcGVyY2FzZTogZnVuY3Rpb24gdXBwZXJjYXNlKHZhbHVlKSB7XG5cdCAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgOiAnJztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnQWJDJyA9PiAnYWJjJ1xuXHQgICAqL1xuXHRcblx0ICBsb3dlcmNhc2U6IGZ1bmN0aW9uIGxvd2VyY2FzZSh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpIDogJyc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogMTIzNDUgPT4gJDEyLDM0NS4wMFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHNpZ25cblx0ICAgKiBAcGFyYW0ge051bWJlcn0gZGVjaW1hbHMgRGVjaW1hbCBwbGFjZXNcblx0ICAgKi9cblx0XG5cdCAgY3VycmVuY3k6IGZ1bmN0aW9uIGN1cnJlbmN5KHZhbHVlLCBfY3VycmVuY3ksIGRlY2ltYWxzKSB7XG5cdCAgICB2YWx1ZSA9IHBhcnNlRmxvYXQodmFsdWUpO1xuXHQgICAgaWYgKCFpc0Zpbml0ZSh2YWx1ZSkgfHwgIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG5cdCAgICBfY3VycmVuY3kgPSBfY3VycmVuY3kgIT0gbnVsbCA/IF9jdXJyZW5jeSA6ICckJztcblx0ICAgIGRlY2ltYWxzID0gZGVjaW1hbHMgIT0gbnVsbCA/IGRlY2ltYWxzIDogMjtcblx0ICAgIHZhciBzdHJpbmdpZmllZCA9IE1hdGguYWJzKHZhbHVlKS50b0ZpeGVkKGRlY2ltYWxzKTtcblx0ICAgIHZhciBfaW50ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgwLCAtMSAtIGRlY2ltYWxzKSA6IHN0cmluZ2lmaWVkO1xuXHQgICAgdmFyIGkgPSBfaW50Lmxlbmd0aCAlIDM7XG5cdCAgICB2YXIgaGVhZCA9IGkgPiAwID8gX2ludC5zbGljZSgwLCBpKSArIChfaW50Lmxlbmd0aCA+IDMgPyAnLCcgOiAnJykgOiAnJztcblx0ICAgIHZhciBfZmxvYXQgPSBkZWNpbWFscyA/IHN0cmluZ2lmaWVkLnNsaWNlKC0xIC0gZGVjaW1hbHMpIDogJyc7XG5cdCAgICB2YXIgc2lnbiA9IHZhbHVlIDwgMCA/ICctJyA6ICcnO1xuXHQgICAgcmV0dXJuIHNpZ24gKyBfY3VycmVuY3kgKyBoZWFkICsgX2ludC5zbGljZShpKS5yZXBsYWNlKGRpZ2l0c1JFLCAnJDEsJykgKyBfZmxvYXQ7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ2l0ZW0nID0+ICdpdGVtcydcblx0ICAgKlxuXHQgICAqIEBwYXJhbXNcblx0ICAgKiAgYW4gYXJyYXkgb2Ygc3RyaW5ncyBjb3JyZXNwb25kaW5nIHRvXG5cdCAgICogIHRoZSBzaW5nbGUsIGRvdWJsZSwgdHJpcGxlIC4uLiBmb3JtcyBvZiB0aGUgd29yZCB0b1xuXHQgICAqICBiZSBwbHVyYWxpemVkLiBXaGVuIHRoZSBudW1iZXIgdG8gYmUgcGx1cmFsaXplZFxuXHQgICAqICBleGNlZWRzIHRoZSBsZW5ndGggb2YgdGhlIGFyZ3MsIGl0IHdpbGwgdXNlIHRoZSBsYXN0XG5cdCAgICogIGVudHJ5IGluIHRoZSBhcnJheS5cblx0ICAgKlxuXHQgICAqICBlLmcuIFsnc2luZ2xlJywgJ2RvdWJsZScsICd0cmlwbGUnLCAnbXVsdGlwbGUnXVxuXHQgICAqL1xuXHRcblx0ICBwbHVyYWxpemU6IGZ1bmN0aW9uIHBsdXJhbGl6ZSh2YWx1ZSkge1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG5cdCAgICBpZiAobGVuZ3RoID4gMSkge1xuXHQgICAgICB2YXIgaW5kZXggPSB2YWx1ZSAlIDEwIC0gMTtcblx0ICAgICAgcmV0dXJuIGluZGV4IGluIGFyZ3MgPyBhcmdzW2luZGV4XSA6IGFyZ3NbbGVuZ3RoIC0gMV07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gYXJnc1swXSArICh2YWx1ZSA9PT0gMSA/ICcnIDogJ3MnKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBEZWJvdW5jZSBhIGhhbmRsZXIgZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5ID0gMzAwXG5cdCAgICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAgICovXG5cdFxuXHQgIGRlYm91bmNlOiBmdW5jdGlvbiBkZWJvdW5jZShoYW5kbGVyLCBkZWxheSkge1xuXHQgICAgaWYgKCFoYW5kbGVyKSByZXR1cm47XG5cdCAgICBpZiAoIWRlbGF5KSB7XG5cdCAgICAgIGRlbGF5ID0gMzAwO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIF9kZWJvdW5jZShoYW5kbGVyLCBkZWxheSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gaW5zdGFsbEdsb2JhbEFQSSAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogVnVlIGFuZCBldmVyeSBjb25zdHJ1Y3RvciB0aGF0IGV4dGVuZHMgVnVlIGhhcyBhblxuXHQgICAqIGFzc29jaWF0ZWQgb3B0aW9ucyBvYmplY3QsIHdoaWNoIGNhbiBiZSBhY2Nlc3NlZCBkdXJpbmdcblx0ICAgKiBjb21waWxhdGlvbiBzdGVwcyBhcyBgdGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zYC5cblx0ICAgKlxuXHQgICAqIFRoZXNlIGNhbiBiZSBzZWVuIGFzIHRoZSBkZWZhdWx0IG9wdGlvbnMgb2YgZXZlcnlcblx0ICAgKiBWdWUgaW5zdGFuY2UuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5vcHRpb25zID0ge1xuXHQgICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcblx0ICAgIGVsZW1lbnREaXJlY3RpdmVzOiBlbGVtZW50RGlyZWN0aXZlcyxcblx0ICAgIGZpbHRlcnM6IGZpbHRlcnMsXG5cdCAgICB0cmFuc2l0aW9uczoge30sXG5cdCAgICBjb21wb25lbnRzOiB7fSxcblx0ICAgIHBhcnRpYWxzOiB7fSxcblx0ICAgIHJlcGxhY2U6IHRydWVcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBFeHBvc2UgdXNlZnVsIGludGVybmFsc1xuXHQgICAqL1xuXHRcblx0ICBWdWUudXRpbCA9IHV0aWw7XG5cdCAgVnVlLmNvbmZpZyA9IGNvbmZpZztcblx0ICBWdWUuc2V0ID0gc2V0O1xuXHQgIFZ1ZVsnZGVsZXRlJ10gPSBkZWw7XG5cdCAgVnVlLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRoZSBmb2xsb3dpbmcgYXJlIGV4cG9zZWQgZm9yIGFkdmFuY2VkIHVzYWdlIC8gcGx1Z2luc1xuXHQgICAqL1xuXHRcblx0ICBWdWUuY29tcGlsZXIgPSBjb21waWxlcjtcblx0ICBWdWUuRnJhZ21lbnRGYWN0b3J5ID0gRnJhZ21lbnRGYWN0b3J5O1xuXHQgIFZ1ZS5pbnRlcm5hbERpcmVjdGl2ZXMgPSBpbnRlcm5hbERpcmVjdGl2ZXM7XG5cdCAgVnVlLnBhcnNlcnMgPSB7XG5cdCAgICBwYXRoOiBwYXRoLFxuXHQgICAgdGV4dDogdGV4dCxcblx0ICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSxcblx0ICAgIGRpcmVjdGl2ZTogZGlyZWN0aXZlLFxuXHQgICAgZXhwcmVzc2lvbjogZXhwcmVzc2lvblxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxuXHQgICAqIGNpZC4gVGhpcyBlbmFibGVzIHVzIHRvIGNyZWF0ZSB3cmFwcGVkIFwiY2hpbGRcblx0ICAgKiBjb25zdHJ1Y3RvcnNcIiBmb3IgcHJvdG90eXBhbCBpbmhlcml0YW5jZSBhbmQgY2FjaGUgdGhlbS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLmNpZCA9IDA7XG5cdCAgdmFyIGNpZCA9IDE7XG5cdFxuXHQgIC8qKlxuXHQgICAqIENsYXNzIGluaGVyaXRhbmNlXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gZXh0ZW5kT3B0aW9uc1xuXHQgICAqL1xuXHRcblx0ICBWdWUuZXh0ZW5kID0gZnVuY3Rpb24gKGV4dGVuZE9wdGlvbnMpIHtcblx0ICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9O1xuXHQgICAgdmFyIFN1cGVyID0gdGhpcztcblx0ICAgIHZhciBpc0ZpcnN0RXh0ZW5kID0gU3VwZXIuY2lkID09PSAwO1xuXHQgICAgaWYgKGlzRmlyc3RFeHRlbmQgJiYgZXh0ZW5kT3B0aW9ucy5fQ3Rvcikge1xuXHQgICAgICByZXR1cm4gZXh0ZW5kT3B0aW9ucy5fQ3Rvcjtcblx0ICAgIH1cblx0ICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIGlmICghL15bYS16QS1aXVtcXHctXSokLy50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgd2FybignSW52YWxpZCBjb21wb25lbnQgbmFtZTogXCInICsgbmFtZSArICdcIi4gQ29tcG9uZW50IG5hbWVzICcgKyAnY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjYXRlcnMgYW5kIHRoZSBoeXBoZW4uJyk7XG5cdCAgICAgICAgbmFtZSA9IG51bGw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHZhciBTdWIgPSBjcmVhdGVDbGFzcyhuYW1lIHx8ICdWdWVDb21wb25lbnQnKTtcblx0ICAgIFN1Yi5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKFN1cGVyLnByb3RvdHlwZSk7XG5cdCAgICBTdWIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViO1xuXHQgICAgU3ViLmNpZCA9IGNpZCsrO1xuXHQgICAgU3ViLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoU3VwZXIub3B0aW9ucywgZXh0ZW5kT3B0aW9ucyk7XG5cdCAgICBTdWJbJ3N1cGVyJ10gPSBTdXBlcjtcblx0ICAgIC8vIGFsbG93IGZ1cnRoZXIgZXh0ZW5zaW9uXG5cdCAgICBTdWIuZXh0ZW5kID0gU3VwZXIuZXh0ZW5kO1xuXHQgICAgLy8gY3JlYXRlIGFzc2V0IHJlZ2lzdGVycywgc28gZXh0ZW5kZWQgY2xhc3Nlc1xuXHQgICAgLy8gY2FuIGhhdmUgdGhlaXIgcHJpdmF0ZSBhc3NldHMgdG9vLlxuXHQgICAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICAgICAgU3ViW3R5cGVdID0gU3VwZXJbdHlwZV07XG5cdCAgICB9KTtcblx0ICAgIC8vIGVuYWJsZSByZWN1cnNpdmUgc2VsZi1sb29rdXBcblx0ICAgIGlmIChuYW1lKSB7XG5cdCAgICAgIFN1Yi5vcHRpb25zLmNvbXBvbmVudHNbbmFtZV0gPSBTdWI7XG5cdCAgICB9XG5cdCAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvclxuXHQgICAgaWYgKGlzRmlyc3RFeHRlbmQpIHtcblx0ICAgICAgZXh0ZW5kT3B0aW9ucy5fQ3RvciA9IFN1Yjtcblx0ICAgIH1cblx0ICAgIHJldHVybiBTdWI7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQSBmdW5jdGlvbiB0aGF0IHJldHVybnMgYSBzdWItY2xhc3MgY29uc3RydWN0b3Igd2l0aCB0aGVcblx0ICAgKiBnaXZlbiBuYW1lLiBUaGlzIGdpdmVzIHVzIG11Y2ggbmljZXIgb3V0cHV0IHdoZW5cblx0ICAgKiBsb2dnaW5nIGluc3RhbmNlcyBpbiB0aGUgY29uc29sZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAgICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNyZWF0ZUNsYXNzKG5hbWUpIHtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gZnVuY3Rpb24gJyArIGNsYXNzaWZ5KG5hbWUpICsgJyAob3B0aW9ucykgeyB0aGlzLl9pbml0KG9wdGlvbnMpIH0nKSgpO1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUGx1Z2luIHN5c3RlbVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IHBsdWdpblxuXHQgICAqL1xuXHRcblx0ICBWdWUudXNlID0gZnVuY3Rpb24gKHBsdWdpbikge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAocGx1Z2luLmluc3RhbGxlZCkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgICAgYXJncy51bnNoaWZ0KHRoaXMpO1xuXHQgICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICBwbHVnaW4uaW5zdGFsbC5hcHBseShwbHVnaW4sIGFyZ3MpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpO1xuXHQgICAgfVxuXHQgICAgcGx1Z2luLmluc3RhbGxlZCA9IHRydWU7XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBcHBseSBhIGdsb2JhbCBtaXhpbiBieSBtZXJnaW5nIGl0IGludG8gdGhlIGRlZmF1bHRcblx0ICAgKiBvcHRpb25zLlxuXHQgICAqL1xuXHRcblx0ICBWdWUubWl4aW4gPSBmdW5jdGlvbiAobWl4aW4pIHtcblx0ICAgIFZ1ZS5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFZ1ZS5vcHRpb25zLCBtaXhpbik7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGFzc2V0IHJlZ2lzdHJhdGlvbiBtZXRob2RzIHdpdGggdGhlIGZvbGxvd2luZ1xuXHQgICAqIHNpZ25hdHVyZTpcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuXHQgICAqIEBwYXJhbSB7Kn0gZGVmaW5pdGlvblxuXHQgICAqL1xuXHRcblx0ICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuXHQgICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKGlkLCBkZWZpbml0aW9uKSB7XG5cdCAgICAgIGlmICghZGVmaW5pdGlvbikge1xuXHQgICAgICAgIHJldHVybiB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgKGNvbW1vblRhZ1JFLnRlc3QoaWQpIHx8IHJlc2VydmVkVGFnUkUudGVzdChpZCkpKSB7XG5cdCAgICAgICAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArICdpZDogJyArIGlkKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIGlzUGxhaW5PYmplY3QoZGVmaW5pdGlvbikpIHtcblx0ICAgICAgICAgIGlmICghZGVmaW5pdGlvbi5uYW1lKSB7XG5cdCAgICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA9IGlkO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgZGVmaW5pdGlvbiA9IFZ1ZS5leHRlbmQoZGVmaW5pdGlvbik7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF0gPSBkZWZpbml0aW9uO1xuXHQgICAgICAgIHJldHVybiBkZWZpbml0aW9uO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH0pO1xuXHRcblx0ICAvLyBleHBvc2UgaW50ZXJuYWwgdHJhbnNpdGlvbiBBUElcblx0ICBleHRlbmQoVnVlLnRyYW5zaXRpb24sIHRyYW5zaXRpb24pO1xuXHR9XG5cdFxuXHRpbnN0YWxsR2xvYmFsQVBJKFZ1ZSk7XG5cdFxuXHRWdWUudmVyc2lvbiA9ICcxLjAuMjYnO1xuXHRcblx0Ly8gZGV2dG9vbHMgZ2xvYmFsIGhvb2tcblx0LyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cblx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKGNvbmZpZy5kZXZ0b29scykge1xuXHQgICAgaWYgKGRldnRvb2xzKSB7XG5cdCAgICAgIGRldnRvb2xzLmVtaXQoJ2luaXQnLCBWdWUpO1xuXHQgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGluQnJvd3NlciAmJiAvQ2hyb21lXFwvXFxkKy8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcblx0ICAgICAgY29uc29sZS5sb2coJ0Rvd25sb2FkIHRoZSBWdWUgRGV2dG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6XFxuJyArICdodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWRldnRvb2xzJyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9LCAwKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVnVlO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgKGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSgpKSwgX193ZWJwYWNrX3JlcXVpcmVfXygxOSkpKVxuXG4vKioqLyB9LFxuLyogNDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuXHQvLyAgICAgQGltcG9ydCAnLi9hcGktdGFibGUnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9hcGktdGFibGUuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgaXRlbXM6IHtcblx0ICAgICAgdHlwZTogQXJyYXlcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA0NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi9zaWRlLW5hdic7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL3NpZGUtbmF2Lmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHRleHBvcnRzLmRlZmF1bHQgPSB7fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDQ2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICcuL3NpdGUtaGVhZGVyJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vc2l0ZS1oZWFkZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHt9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNDcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgQXBpVGFibGU6IF9pbmRleDIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGRpc21pc3NDYWxsQmFjazogZnVuY3Rpb24gZGlzbWlzc0NhbGxCYWNrKCkge1xuXHQgICAgICAgIGNvbnNvbGUubG9nKCdhbGVydCEhIScpO1xuXHQgICAgICB9LFxuXHRcblx0ICAgICAgYXBpSXRlbXM6IFt7XG5cdCAgICAgICAgbmFtZTogJ3R5cGUnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSB0eXBlIG9mIGFsZXJ0IChlcnJvciwgaW5mbywgc3VjY2VzcyknXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnZGlzbWlzc2libGUnLFxuXHQgICAgICAgIHR5cGU6ICdCb29sZWFuJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiB0cnVlLFxuXHQgICAgICAgIGRlc2M6ICdJcyB0aGUgYWxlcnQgZGlzbWlzc2libGU/J1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ3RpbWVvdXQnLFxuXHQgICAgICAgIHR5cGU6ICdOdW1iZXInLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6IC0xLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgZHVyYXRpb24gYWxlcnQgc3RheXMgb24gc2NyZWVuIGluIG1zJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ29uQ2xvc2VkJyxcblx0ICAgICAgICB0eXBlOiAnRnVuY3Rpb24nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdDYWxsYmFjayBmdW5jdGlvbiB0byBiZSBjYWxsZWQgd2hlbiBhbGVydCBpcyBjbG9zZWQuJ1xuXHQgICAgICB9XVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cdC8vIDx0ZW1wbGF0ZT5cblx0Ly8gICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuXHQvLyAgICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG5cdC8vICAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5BbGVydDwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJlcnJvclwiPlRoaXMgaXMgYW4gZXJyb3IgYWxlcnQuPC9hbGVydD5cblx0Ly8gICAgICAgICAgICA8YWxlcnQgdHlwZT1cImluZm9cIj5UaGlzIGlzIGFuIGluZm8gYWxlcnQuPC9hbGVydD5cblx0Ly8gICAgICAgICAgICA8YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIj5UaGlzIGlzIGEgc3VjY2VzcyBhbGVydC48L2FsZXJ0PlxuXHQvLyAgICAgICAgICAgIDxhbGVydCB0eXBlPVwic3VjY2Vzc1wiIDpkaXNtaXNzaWJsZT1cImZhbHNlXCI+VGhpcyBpcyBub3QgYSBkaXNtaXNzaWJsZSBhbGVydC48L2FsZXJ0PlxuXHQvLyAgICAgICAgICAgIDxhbGVydCB0eXBlPVwic3VjY2Vzc1wiIDpvbi1jbG9zZWQ9XCJkaXNtaXNzQ2FsbEJhY2tcIj5UaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suPC9hbGVydD5cblx0Ly8gICAgICAgICAgICA8YWxlcnQgdHlwZT1cImluZm9cIiA6dGltZW91dD1cIjUwMDBcIj5UaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy48L2FsZXJ0PlxuXHQvLyAgICAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuXHQvLyAgICAgICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cblx0Ly8gICAgICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cImVycm9yXCImZ3Q7VGhpcyBpcyBhbiBlcnJvciBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuXHQvLyAgICAgICAgICAgICZsdDthbGVydCB0eXBlPVwiaW5mb1wiJmd0O1RoaXMgaXMgYW4gaW5mbyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuXHQvLyAgICAgICAgICAgICZsdDthbGVydCB0eXBlPVwic3VjY2Vzc1wiJmd0O1RoaXMgaXMgYSBzdWNjZXNzIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICAgICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOmRpc21pc3NpYmxlPVwiZmFsc2VcIiZndDtUaGlzIGlzIG5vdCBhIGRpc21pc3NpYmxlIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICAgICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOm9uLWNsb3NlZD1cImRpc21pc3NDYWxsQmFja1wiJmd0O1RoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay4mbHQ7L2FsZXJ0Jmd0O1xuXHQvLyAgICAgICAgICAgICZsdDthbGVydCB0eXBlPVwic3VjY2Vzc1wiIDp0aW1lb3V0PVwiNTAwMFwiJmd0O1RoaXMgYWxlcnQgc2hvdWxkIHRpbWVvdXQgaW4gNSBzZWNvbmRzLiZsdDsvYWxlcnQmZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvL1xuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA0OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBfaW5kZXgyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgpO1xuXHRcblx0ZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblx0XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBjb21wb25lbnRzOiB7XG5cdCAgICBBcGlUYWJsZTogX2luZGV4Mi5kZWZhdWx0XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgYXBpSXRlbXM6IFt7XG5cdCAgICAgICAgbmFtZTogJ2xhYmVsJyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgbGFibGUgb2YgdGhlIHBhbmVsJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2lzT3BlbicsXG5cdCAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuXHQgICAgICAgIGRlc2M6ICdJcyB0aGUgcGFuZWwgb3Blbi4nXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPkNvbGxhcHNhYmxlIFBhbmVsPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAxXCIgOmlzLW9wZW49XCJ0cnVlXCI+XG5cdC8vICAgICAgICAgICAgIFBhbmVsIDEgY29udGVudFxuXHQvLyAgICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vXG5cdC8vICAgICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMlwiPlxuXHQvLyAgICAgICAgICAgICBQYW5lbCAyIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuXHQvLyAgICAgICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cblx0Ly8gICAgICAgICAgICAgICAgJmx0O2NvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMVwiIDppcy1vcGVuPVwidHJ1ZVwiJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgIFBhbmVsIDEgY29udGVudFxuXHQvLyAgICAgICAgICAgICAgICAmbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAmbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAyXCImZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgUGFuZWwgMiBjb250ZW50XG5cdC8vICAgICAgICAgICAgICAgICZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XG5cdC8vICAgICAgICAgICAgICA8L2NvZGU+XG5cdC8vICAgICAgICAgICAgPC9wcmU+XG5cdC8vICAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG5cdC8vICAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG5cdC8vICAgICAgIDwvZGl2PlxuXHQvL1xuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cbi8qKiovIH0sXG4vKiA0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPkdldHRpbmcgU3RhcnRlZDwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0tNSBoeV90LWdyZXlcIj5DRE48L2gzPlxuXHQvLyAgICAgIDxwPlxuXHQvLyAgICAgICAgLi4uXG5cdC8vICAgICAgPC9wPlxuXHQvLyAgICA8L2Rpdj5cblx0Ly8gICA8L3NlY3Rpb24+XG5cdC8vIDwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4uL3Njc3MvbWFpbi5zY3NzJztcblx0Ly8gICAgIEBpbXBvcnQgJy4uL3Njc3MvcHJpc20uc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHt9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgQXBpVGFibGU6IF9pbmRleDIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGFwaUl0ZW1zOiBbe1xuXHQgICAgICAgIG5hbWU6ICdsZWdhbEtleScsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAndGhlIGtleSBvZiBsZWdhbCBpbiBjbXMnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnbGVnYWxMYW5nJyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICd0aGUgbGFuZ3VhZ2Ugb2YgbGVnYWwgaW4gY21zJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2xlZ2FsUmVnaW9uJyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICd0aGUgcmVnaW9uIG9mIGxlZ2FsIGluIGNtcydcblx0ICAgICAgfV1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvLyA8dGVtcGxhdGU+XG5cdC8vICAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cblx0Ly8gICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuXHQvLyAgICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+TGVnYWwgU3lzdGVtPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8cCBjbGFzcz1cImh5X2MtY29weSBoeV9jLWNvcHktLWJvZHkgaHlfdC1ncmV5XCI+XG5cdC8vICAgICAgICAgICAgICBMb3JlbSBpcHN1bTxsZWdhbC1jb3VudGVyXG5cdC8vICAgICAgICAgICAgICAgIHYtb3ZlcmxheS1vcGVuZXI9XCJsZWdhbC1vdmVybGF5XCJcblx0Ly8gICAgICAgICAgICAgICAgbGVnYWwta2V5PVwiaHMtcmVmZXJyYWwtdGVybXNcIlxuXHQvLyAgICAgICAgICAgICAgICBsZWdhbC1sYW5nPVwiZW5cIiBsZWdhbC1yZWdpb249XCJiY1wiXG5cdC8vICAgICAgICAgICAgICAgID48L2xlZ2FsLWNvdW50ZXI+IGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQsXG5cdC8vICAgICAgICAgICAgICBzZWQgZG8gZWl1c21vZCB0ZW1wb3IgaW5jaWRpZHVudCB1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YS5cblx0Ly8gICAgICAgICAgICAgIDxsZWdhbC1jb3VudGVyXG5cdC8vICAgICAgICAgICAgICAgIHYtb3ZlcmxheS1vcGVuZXI9XCJsZWdhbC1vdmVybGF5XCJcblx0Ly8gICAgICAgICAgICAgICAgbGVnYWwta2V5PVwiMS15ZWFyLW9mZmVyLXN0aW1cIlxuXHQvLyAgICAgICAgICAgICAgICBsZWdhbC1sYW5nPVwiZW5cIiBsZWdhbC1yZWdpb249XCJiY1wiXG5cdC8vICAgICAgICAgICAgICAgID48L2xlZ2FsLWNvdW50ZXI+XG5cdC8vICAgICAgICAgICAgICA8L3A+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgIDxsZWdhbC1jb250YWluZXI+PC9sZWdhbC1jb250YWluZXI+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAgICAgICAgICAgICAgICAmbHQ7bGVnYWwtY291bnRlciZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAgbGVnYWwta2V5PVwiaHMtcmVmZXJyYWwtdGVybXNcIlxuXHQvLyAgICAgICAgICAgICAgICAgICBsZWdhbC1sYW5nPVwiZW5cIlxuXHQvLyAgICAgICAgICAgICAgICAgICBsZWdhbC1yZWdpb249XCJiY1wiXG5cdC8vICAgICAgICAgICAgICAgICZsdDsvbGVnYWwtY291bnRlciZndDtcblx0Ly8gICAgICAgICAgICAgICAgJmx0O2xlZ2FsLWNvbnRhaW5lciZndDsmbHQ7L2xlZ2FsLWNvbnRhaW5lciZndDtcblx0Ly8gICAgICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiamF2YXNjcmlwdFwiPlxuXHQvLyAgICAgICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWphdmFzY3JpcHRcIj5cblx0Ly8gICAgICAgICAgICAgICAgbGV0IHZtID0gbmV3IFZ1ZSh7XG5cdC8vICAgICAgICAgICAgICAgICAgZWw6ICdib2R5Jyxcblx0Ly8gICAgICAgICAgICAgICAgICBkYXRhKCkge1xuXHQvLyAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcblx0Ly8gICAgICAgICAgICAgICAgICAgICAgbGlnZXJFbmRQb2ludDogJ2h0dHBzOi8vYXBpLmNtcy50ZWx1cy5jb20vbGVnYWxzJyxcblx0Ly8gICAgICAgICAgICAgICAgICAgICAgbGlnZXJBcHBsaWNhdGlvbktleTogJ2I5NzM4ZDY3Yjg5ZGZjNzgyNzQ2ZDRhOWNmNGExMDkzJ1xuXHQvLyAgICAgICAgICAgICAgICAgICAgfTtcblx0Ly8gICAgICAgICAgICAgICAgICB9LFxuXHQvLyAgICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IHtcblx0Ly8gICAgICAgICAgICAgICAgICAgIExlZ2FsQ291bnRlcixcblx0Ly8gICAgICAgICAgICAgICAgICAgIExlZ2FsQ29udGFpbmVyXG5cdC8vICAgICAgICAgICAgICAgICAgfVxuXHQvLyAgICAgICAgICAgICAgICB9KTtcblx0Ly8gICAgICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJOiBMZWdhbCBDb3VudGVyPC9oMz5cblx0Ly8gICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgIDwvZGl2PlxuXHQvLyAgIDwvc2VjdGlvbj5cblx0Ly9cblx0Ly9cblx0Ly8gPC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblxuLyoqKi8gfSxcbi8qIDUxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIEFwaVRhYmxlOiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBhcGlJdGVtczogW3tcblx0ICAgICAgICBuYW1lOiAnb3ZlcmxheUtleScsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnVGhlIGtleSBvZiB0aGUgb3ZlcmxheS4gVXNlZCBieSB0aGUgb3ZlcmxheSBvcGVuZXIgZGlyZWN0aXZlIHRvIHRhcmdldCB0aGUgb3ZlcmxleS4nXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPk92ZXJsYXkgU3lzdGVtPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8cD5cblx0Ly8gICAgICAgICAgICAgIDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1cIm92ZXJsYXktMVwiIGNsYXNzPVwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLWxpbmsgaHlfdC1wdXJwbGVcIiB0eXBlPVwiYnV0dG9uXCIgcm9sZT1cImJ1dHRvblwiPlxuXHQvLyAgICAgICAgICAgICAgICBPcGVuIG92ZXJsYXkgIzEgPGkgY2xhc3M9XCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXCI+PC9pPlxuXHQvLyAgICAgICAgICAgICAgPC9idXR0b24+XG5cdC8vICAgICAgICAgICAgPC9wPlxuXHQvLyAgICAgICAgICAgIDxwPlxuXHQvLyAgICAgICAgICAgICAgPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPVwib3ZlcmxheS0yXCIgY2xhc3M9XCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVwiIHR5cGU9XCJidXR0b25cIiByb2xlPVwiYnV0dG9uXCI+XG5cdC8vICAgICAgICAgICAgICAgIE9wZW4gb3ZlcmxheSAjMiA8aSBjbGFzcz1cImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cIj48L2k+XG5cdC8vICAgICAgICAgICAgICA8L2J1dHRvbj5cblx0Ly8gICAgICAgICAgICA8L3A+XG5cdC8vICAgICAgICAgICAgPG92ZXJsYXktY29udGFpbmVyPlxuXHQvLyAgICAgICAgICAgICAgICAgICA8b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMVwiPlxuXHQvLyAgICAgICAgICAgICAgICAgICAgIDxoNCBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcIiBzbG90PVwib3ZlcmxheS1oZWFkZXJcIj5UaGlzIGlzIG92ZXJsYXkgIzE8L2g0PlxuXHQvLyAgICAgICAgICAgICAgICAgICAgIDxhcnRpY2xlIHNsb3Q9XCJvdmVybGF5LWJvZHlcIj5cblx0Ly8gICAgICAgICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMSBib2R5XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPC9hcnRpY2xlPlxuXHQvLyAgICAgICAgICAgICAgICAgICA8L292ZXJsYXk+XG5cdC8vICAgICAgICAgICAgICAgICAgIDxvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0yXCI+XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiPlRoaXMgaXMgb3ZlcmxheSAjMjwvaDQ+XG5cdC8vICAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiPlxuXHQvLyAgICAgICAgICAgICAgICAgICAgICAgICBPdmVybGF5ICMyIGJvZHlcblx0Ly8gICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XG5cdC8vICAgICAgICAgICAgICAgICAgIDwvb3ZlcmxheT5cblx0Ly8gICAgICAgICAgIDwvb3ZlcmxheS1jb250YWluZXI+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuXHQvLyAgICAgICAgICAgICAgICAmbHQ7b3ZlcmxheS1jb250YWluZXImZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgJmx0O292ZXJsYXkgb3ZlcmxheS1rZXk9XCJvdmVybGF5LTFcIiZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAgICZsdDtoNCAgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XCIgc2xvdD1cIm92ZXJsYXktaGVhZGVyXCImZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgICBUaGlzIGlzIG92ZXJsYXkgIzFcblx0Ly8gICAgICAgICAgICAgICAgICAgICZsdDsvaDQmZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgICAmbHQ7YXJ0aWNsZSBzbG90PVwib3ZlcmxheS1ib2R5XCImZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgICAgIE92ZXJsYXkgIzEgYm9keVxuXHQvLyAgICAgICAgICAgICAgICAgICAgJmx0Oy9hcnRpY2xlJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICZsdDsvb3ZlcmxheSZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMlwiJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICAgJmx0O2g0ICBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcIiBzbG90PVwib3ZlcmxheS1oZWFkZXJcIiZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAgIFRoaXMgaXMgb3ZlcmxheSAjMVxuXHQvLyAgICAgICAgICAgICAgICAgICAgJmx0Oy9oNCZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAgICZsdDthcnRpY2xlIHNsb3Q9XCJvdmVybGF5LWJvZHlcIiZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMiBib2R5XG5cdC8vICAgICAgICAgICAgICAgICAgICAmbHQ7L2FydGljbGUmZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgJmx0Oy9vdmVybGF5Jmd0O1xuXHQvLyAgICAgICAgICAgICAgICAmbHQ7L292ZXJsYXktY29udGFpbmVyJmd0O1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuXHQvLyAgICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgPC9kaXY+XG5cdC8vICAgPC9zZWN0aW9uPlxuXHQvL1xuXHQvLyA8L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXG4vKioqLyB9LFxuLyogNTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgQXBpVGFibGU6IF9pbmRleDIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgc2hvd1NwaW5uZXI6IGZ1bmN0aW9uIHNob3dTcGlubmVyKCkge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgdGhpcy5fcmVzZXRNc2coKTtcblx0ICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdzaG93OjpzcGlubmVyJyk7XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIF90aGlzLiRyb290LiRicm9hZGNhc3QoJ2hpZGU6OnNwaW5uZXInKTtcblx0ICAgICAgfSwgMzAwMCk7XG5cdCAgICB9LFxuXHQgICAgX3Jlc2V0TXNnOiBmdW5jdGlvbiBfcmVzZXRNc2coKSB7XG5cdCAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIGNvdW50ZXIgPSAzO1xuXHQgICAgICB2YXIgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKGNvdW50ZXIgPiAwKSB7XG5cdCAgICAgICAgICBjb3VudGVyLS07XG5cdCAgICAgICAgICBfdGhpczIubXNnID0gJ0kgd2lsbCBjbG9zZSBpbiAnICsgY291bnRlciArICcgc2Vjb25kcyc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSwgMTAwMCk7XG5cdCAgICAgIHRoaXMubXNnID0gJ0kgd2lsbCBjbG9zZSBpbiAnICsgY291bnRlciArICcgc2Vjb25kcyc7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgbXNnOiAnJyxcblx0ICAgICAgaXNGdWxsU2NyZWVuOiBmYWxzZSxcblx0ICAgICAgYXBpSXRlbXM6IFt7XG5cdCAgICAgICAgbmFtZTogJ2Z1bGxTY3JlZW4nLFxuXHQgICAgICAgIHR5cGU6ICdCb29sZWFuJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiBmYWxzZSxcblx0ICAgICAgICBkZXNjOiAnU2hvdWxkIHRoZSBzcGlubmVyIHRha2UgZnVsbCBzY3JlZW4nXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAndGV4dCcsXG5cdCAgICAgICAgdHlwZTogJ1N0cmluZycsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogJ1xcJ1xcJycsXG5cdCAgICAgICAgZGVzYzogJ1RoZSB0ZXh0IG9mIHRoZSBzcGlubmVyLiBEZWZhdWx0IGVtcHR5J1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ3Nob3c6OnNwaW5uZXInLFxuXHQgICAgICAgIHR5cGU6ICdFdmVudCcsXG5cdCAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ0FjdGl2ZSB0aGUgc3Bpbm5lcidcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdoaWRlOjpzcGlubmVyJyxcblx0ICAgICAgICB0eXBlOiAnRXZlbnQnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdIaWRlIHRoZSBzcGlubmVyJ1xuXHQgICAgICB9XVxuXHQgICAgfTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cdC8vIDx0ZW1wbGF0ZT5cblx0Ly8gICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuXHQvLyAgICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG5cdC8vICAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5TcGlubmVyPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8bGFiZWwgY2xhc3M9XCJoeV9jLWNvbnRyb2wgaHlfYy1jb250cm9sLS1jaGVja2JveFwiID5cblx0Ly8gICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJoeV9jLWNvbnRyb2xfX2xhYmVsLXRleHRcIj5GdWxsIFNjcmVlbjwvc3Bhbj5cblx0Ly8gICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiICB2LW1vZGVsPVwiaXNGdWxsU2NyZWVuXCIgLz5cblx0Ly8gICAgICAgICAgICAgPGRpdiBjbGFzcz1cImh5X2MtY29udHJvbF9faW5kaWNhdG9yXCI+PC9kaXY+XG5cdC8vICAgICAgICAgICA8L2xhYmVsPlxuXHQvL1xuXHQvLyAgICAgICAgICAgPGJ1dHRvbiBAY2xpY2s9XCJzaG93U3Bpbm5lclwiIGNsYXNzPVwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLXJhaXNlZCBoeV90LWdyZWVuXCIgdHlwZT1cImJ1dHRvblwiPlxuXHQvLyAgICAgICAgICAgICBTaG93IFNwaW5uZXJcblx0Ly8gICAgICAgICAgIDwvYnV0dG9uPlxuXHQvL1xuXHQvL1xuXHQvL1xuXHQvLyAgICAgICAgICAgIDxzcGlubmVyIDpmdWxsLXNjcmVlbj1cImlzRnVsbFNjcmVlblwiIDp0ZXh0PVwibXNnXCI+PC9zcGlubmVyPlxuXHQvLyAgICAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuXHQvLyAgICAgICAgICAgIDxwcmU+XG5cdC8vICAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cblx0Ly8gICAgICAgICAgICAgICAgJmx0O3NwaW5uZXIgdGV4dD1cIkkgd2lsbCBjbG9zZSBpbiAzIHNlY29uZHNcIiA6ZnVsbC1zY3JlZW49XCJ0cnVlXCImZ3Q7Jmx0Oy9zcGlubmVyJmd0O1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuXHQvLyAgICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly9cblx0Ly8gICAgPC9kaXY+XG5cdC8vICAgPC9zZWN0aW9uPlxuXHQvLyA8L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXG4vKioqLyB9LFxuLyogNTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9pbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oNSk7XG5cdFxuXHR2YXIgX2luZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4KTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgY29tcG9uZW50czoge1xuXHQgICAgQXBpVGFibGU6IF9pbmRleDIuZGVmYXVsdFxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgc3RlcFRyYWNrZXJDdXJyZW50U3RlcDogMixcblx0ICAgICAgc3RlcFRyYWNrZXJDb25maWc6IHtcblx0ICAgICAgICBpc0NsaWNrYWJsZTogdHJ1ZSxcblx0ICAgICAgICBzdGVwczogW3tcblx0ICAgICAgICAgIHRpdGxlOiAnU3RlcCBBJyxcblx0ICAgICAgICAgIGxpbms6ICcnLFxuXHQgICAgICAgICAgb25DbGlja0hhbmRsZXI6IGZ1bmN0aW9uIG9uQ2xpY2tIYW5kbGVyKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIF90aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAwO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIHRpdGxlOiAnU3RlcCBCJyxcblx0ICAgICAgICAgIGxpbms6ICcnLFxuXHQgICAgICAgICAgb25DbGlja0hhbmRsZXI6IGZ1bmN0aW9uIG9uQ2xpY2tIYW5kbGVyKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIF90aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAxO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIHRpdGxlOiAnU3RlcCBDJyxcblx0ICAgICAgICAgIGxpbms6ICcnLFxuXHQgICAgICAgICAgb25DbGlja0hhbmRsZXI6IGZ1bmN0aW9uIG9uQ2xpY2tIYW5kbGVyKGV2ZW50KSB7XG5cdCAgICAgICAgICAgIF90aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAyO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1dXG5cdCAgICAgIH0sXG5cdCAgICAgIGFwaUl0ZW1zOiBbe1xuXHQgICAgICAgIG5hbWU6ICdjdXJyZW50U3RlcCcsXG5cdCAgICAgICAgdHlwZTogJ0ludGVnZXInLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogMCxcblx0ICAgICAgICBkZXNjOiAndG9kbydcblx0ICAgICAgfSwge1xuXHQgICAgICAgIG5hbWU6ICdjb25maWcnLFxuXHQgICAgICAgIHR5cGU6ICdPYmplY3QnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ3RvZG8nXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnY29uZmlnLnRpdGxlJyxcblx0ICAgICAgICB0eXBlOiAnU3RyaW5nJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgdGl0bGUgb2YgdGhlIHN0ZXAnXG5cdCAgICAgIH0sIHtcblx0ICAgICAgICBuYW1lOiAnY29uZmlnLmxpbmsnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuXHQgICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuXHQgICAgICAgIGRlc2M6ICdUaGUgbGluayBvZiB0aGUgc3RlcC4gJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2NvbmZpZy5vbkNsaWNrSGFuZGxlcicsXG5cdCAgICAgICAgdHlwZTogJ0Z1bmN0aW9uJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiAnbi9hJyxcblx0ICAgICAgICBkZXNjOiAnVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gc3RlcCBpcyBjbGlja2VkLidcblx0ICAgICAgfV1cblx0ICAgIH07XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvLyA8dGVtcGxhdGU+XG5cdC8vICAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cblx0Ly8gICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuXHQvLyAgICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+U3RlcCBUcmFja2VyPC9oMj5cblx0Ly8gICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cblx0Ly8gICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cblx0Ly8gICAgICAgICAgICA8c3RlcC10cmFja2VyIDpjdXJyZW50LXN0ZXA9XCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXCIgOmNvbmZpZz1cInN0ZXBUcmFja2VyQ29uZmlnXCI+PC9zdGVwLXRyYWNrZXI+XG5cdC8vICAgICAgICAgIDwvZGl2PlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG5cdC8vICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cblx0Ly8gICAgICAgICAgICZsdDtzdGVwLXRyYWNrZXJcblx0Ly8gICAgICAgICAgIDpjdXJyZW50LXN0ZXA9XCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXCJcblx0Ly8gICAgICAgICAgIDpjb25maWc9XCJzdGVwVHJhY2tlckNvbmZpZ1wiJmd0O1xuXHQvLyAgICAgICAgICAgJmx0Oy9zdGVwLXRyYWNrZXImZ3Q7XG5cdC8vICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJqYXZhc2NyaXB0XCI+XG5cdC8vICAgICAgICAgICAgPHByZT5cblx0Ly8gICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtanNcIj5cblx0Ly8gICAgICAgICAgICAgICBsZXQgc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XG5cdC8vICAgICAgICAgICAgICAgbGV0IHN0ZXBUcmFja2VyQ29uZmlnID0ge1xuXHQvLyAgICAgICAgICAgICAgICAgaXNDbGlja2FibGU6IHRydWUsXG5cdC8vICAgICAgICAgICAgICAgICBzdGVwczogW1xuXHQvLyAgICAgICAgICAgICAgICAgICB7XG5cdC8vICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTdGVwIEEnLFxuXHQvLyAgICAgICAgICAgICAgICAgICAgIGxpbms6ICcnLFxuXHQvLyAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcblx0Ly8gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDA7XG5cdC8vICAgICAgICAgICAgICAgICAgICAgfVxuXHQvLyAgICAgICAgICAgICAgICAgICB9LCB7XG5cdC8vICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTdGVwIEInLFxuXHQvLyAgICAgICAgICAgICAgICAgICAgIGxpbms6ICcnLFxuXHQvLyAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcblx0Ly8gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDE7XG5cdC8vICAgICAgICAgICAgICAgICAgICAgfVxuXHQvLyAgICAgICAgICAgICAgICAgICB9LCB7XG5cdC8vICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTdGVwIEMnLFxuXHQvLyAgICAgICAgICAgICAgICAgICAgIGxpbms6ICcnLFxuXHQvLyAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcblx0Ly8gICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XG5cdC8vICAgICAgICAgICAgICAgICAgICAgfVxuXHQvLyAgICAgICAgICAgICAgICAgICB9XG5cdC8vICAgICAgICAgICAgICAgICBdXG5cdC8vICAgICAgICAgICAgICAgfTtcblx0Ly8gICAgICAgICAgICAgICBsZXQgdm0gPSBuZXcgVnVlKHtcblx0Ly8gICAgICAgICAgICAgICAgIGVsOiAnYm9keScsXG5cdC8vICAgICAgICAgICAgICAgICBkYXRhOiB7XG5cdC8vICAgICAgICAgICAgICAgICAgIHN0ZXBUcmFja2VyQ29uZmlnLFxuXHQvLyAgICAgICAgICAgICAgICAgICBzdGVwVHJhY2tlckN1cnJlbnRTdGVwXG5cdC8vICAgICAgICAgICAgICAgfSxcblx0Ly8gICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IHtcblx0Ly8gICAgICAgICAgICAgICAgICAgU3RlcFRyYWNrZXJcblx0Ly8gICAgICAgICAgICAgICAgIH1cblx0Ly8gICAgICAgICAgICAgICB9KTtcblx0Ly8gICAgICAgICAgICAgIDwvY29kZT5cblx0Ly8gICAgICAgICAgICA8L3ByZT5cblx0Ly8gICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cblx0Ly8gICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuXHQvLyAgICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cblx0Ly8gICAgICAgPC9kaXY+XG5cdC8vICAgIDwvZGl2PlxuXHQvLyAgIDwvc2VjdGlvbj5cblx0Ly8gPC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblxuLyoqKi8gfSxcbi8qIDU0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0XG5cdHZhciBfaW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDUpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGNvbXBvbmVudHM6IHtcblx0ICAgIEFwaVRhYmxlOiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBhcGlJdGVtczogW3tcblx0ICAgICAgICBuYW1lOiAnbGFiZWwnLFxuXHQgICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuXHQgICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG5cdCAgICAgICAgZGVmYXVsdDogJ24vYScsXG5cdCAgICAgICAgZGVzYzogJ1RoZSBsYWJsZSBvZiB0aGUgdGFiJ1xuXHQgICAgICB9LCB7XG5cdCAgICAgICAgbmFtZTogJ2lzRGlzYWJsZWQnLFxuXHQgICAgICAgIHR5cGU6ICdCb29sZWFuJyxcblx0ICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcblx0ICAgICAgICBkZWZhdWx0OiBmYWxzZSxcblx0ICAgICAgICBkZXNjOiAnSXMgdGhlIHRhYiBkaXNhYmxlZCBvciBub3QuIFdoZW4gc2V0IHRvIHRydWUsIHRoZSB0YWIgaXMgbm90IGNsaWNrYWJsZS4nXG5cdCAgICAgIH1dXG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblx0Ly8gPHRlbXBsYXRlPlxuXHQvLyAgIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG5cdC8vICAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cblx0Ly8gICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPlRhYjwvaDI+XG5cdC8vICAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG5cdC8vICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cblx0Ly8gICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG5cdC8vICAgICAgICAgICAgPHRhYnM+XG5cdC8vICAgICAgICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIDFcIj5cblx0Ly8gICAgICAgICAgICAgICA8cD5cblx0Ly8gICAgICAgICAgICAgICAgIFRhYiAxIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICAgICA8L3A+XG5cdC8vICAgICAgICAgICAgICA8L3RhYj5cblx0Ly8gICAgICAgICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgMlwiPlxuXHQvLyAgICAgICAgICAgICAgICA8cD5cblx0Ly8gICAgICAgICAgICAgICAgICBUYWIgMiBjb250ZW50XG5cdC8vICAgICAgICAgICAgICAgIDwvcD5cblx0Ly8gICAgICAgICAgICAgIDwvdGFiPlxuXHQvLyAgICAgICAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiAzXCIgOmlzLWRpc2FibGVkPVwidHJ1ZVwiPlxuXHQvLyAgICAgICAgICAgICAgICA8cD5cblx0Ly8gICAgICAgICAgICAgICAgICBUYWIgMyBjb250ZW50XG5cdC8vICAgICAgICAgICAgICAgIDwvcD5cblx0Ly8gICAgICAgICAgICAgIDwvdGFiPlxuXHQvLyAgICAgICAgICAgIDwvdGFicz5cblx0Ly8gICAgICAgICAgPC9kaXY+XG5cdC8vICAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cblx0Ly8gICAgICAgICAgICA8cHJlPlxuXHQvLyAgICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG5cdC8vICAgICAgICAgICAgICAgICZsdDt0YWJzJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICZsdDt0YWIgbGFiZWw9XCJUYWIgMVwiJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgICAgIFRhYiAxIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICAgICAgICAgICZsdDsvcCZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAmbHQ7dGFiIGxhYmVsPVwiVGFiIDJcIiZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAgICZsdDtwJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICAgICBUYWIgMiBjb250ZW50XG5cdC8vICAgICAgICAgICAgICAgICAgICAmbHQ7L3AmZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgJmx0Oy90YWImZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgJmx0O3RhYiBsYWJlbD1cIlRhYiAzXCIgOmlzLWRpc2FibGVkPVwidHJ1ZVwiJmd0O1xuXHQvLyAgICAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XG5cdC8vICAgICAgICAgICAgICAgICAgICAgIFRhYiAzIGNvbnRlbnRcblx0Ly8gICAgICAgICAgICAgICAgICAgICZsdDsvcCZndDtcblx0Ly8gICAgICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcblx0Ly8gICAgICAgICAgICAgICAgJmx0Oy90YWJzJmd0O1xuXHQvLyAgICAgICAgICAgICAgPC9jb2RlPlxuXHQvLyAgICAgICAgICAgIDwvcHJlPlxuXHQvLyAgICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly8gICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuXHQvLyAgICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG5cdC8vICAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuXHQvLyAgICAgICA8L2Rpdj5cblx0Ly9cblx0Ly8gICAgPC9kaXY+XG5cdC8vICAgPC9zZWN0aW9uPlxuXHQvLyA8L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXG4vKioqLyB9LFxuLyogNTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuXHQvLyAgICAgQGltcG9ydCAnLi4vLi4vdHJhbnNpdGlvbnMvZmFkZS5zY3NzJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vYWxlcnQuc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL2FsZXJ0Lmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGlzVmlzaWJsZTogdHJ1ZVxuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICBwcm9wczoge1xuXHQgICAgdHlwZToge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIHJlcXVpcmVkOiB0cnVlXG5cdCAgICB9LFxuXHQgICAgZGlzbWlzc2libGU6IHtcblx0ICAgICAgdHlwZTogQm9vbGVhbixcblx0ICAgICAgZGVmYXVsdDogdHJ1ZVxuXHQgICAgfSxcblx0ICAgIHRpbWVvdXQ6IHtcblx0ICAgICAgdHlwZTogTnVtYmVyLFxuXHQgICAgICBkZWZhdWx0OiAtMVxuXHQgICAgfSxcblx0ICAgIG9uQ2xvc2VkOiB7XG5cdCAgICAgIHR5cGU6IEZ1bmN0aW9uXG5cdCAgICB9XG5cdCAgfSxcblx0ICBtZXRob2RzOiB7XG5cdCAgICBkaXNtaXNzOiBmdW5jdGlvbiBkaXNtaXNzKCkge1xuXHQgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcblx0ICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKCEhX3RoaXMub25DbG9zZWQpIHtcblx0ICAgICAgICAgIF90aGlzLm9uQ2xvc2VkLmFwcGx5KF90aGlzKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgcmVhZHk6IGZ1bmN0aW9uIHJlYWR5KCkge1xuXHQgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgaWYgKHRoaXMudGltZW91dCA+PSAwKSB7XG5cdCAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIF90aGlzMi5kaXNtaXNzKCk7XG5cdCAgICAgIH0sIHRoaXMudGltZW91dCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuXHQvLyAgICAgQGltcG9ydCAnLi9jb2xsYXBzYWJsZS1wYW5lbC5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vY29sbGFwc2FibGUtcGFuZWwuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgaXNPcGVuOiB7XG5cdCAgICAgIHR5cGU6IEJvb2xlYW4sXG5cdCAgICAgIGRlZmF1bHQ6IGZhbHNlXG5cdCAgICB9LFxuXHQgICAgbGFiZWw6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nLFxuXHQgICAgICByZXF1aXJlZDogdHJ1ZVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgdG9nZ2xlT3BlbjogZnVuY3Rpb24gdG9nZ2xlT3BlbigkZXZlbnQpIHtcblx0ICAgICAgdGhpcy5pc09wZW4gPSAhdGhpcy5pc09wZW47XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihmZXRjaCkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9taXhpbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdHZhciBfbWl4aW5zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21peGlucyk7XG5cdFxuXHR2YXIgX2ZpbmRJbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMTQ5KTtcblx0XG5cdHZhciBfZmluZEluZGV4MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2ZpbmRJbmRleCk7XG5cdFxuXHR2YXIgX2RlYm91bmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDcpO1xuXHRcblx0dmFyIF9kZWJvdW5jZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9kZWJvdW5jZSk7XG5cdFxuXHR2YXIgX3NldEZvY3VzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMCk7XG5cdFxuXHR2YXIgX3NldEZvY3VzMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3NldEZvY3VzKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvL1xuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICcuL2xlZ2FsLWNvbnRhaW5lci5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vbGVnYWwtY29udGFpbmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvKlxuXHQgKiBBUEk6IDxsZWdhbC1jb250YWluZXI+PC9sZWdhbC1jb250YWluZXI+XG5cdCovXG5cdFxuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgbWl4aW5zOiBfbWl4aW5zMi5kZWZhdWx0LFxuXHQgIGRpcmVjdGl2ZXM6IHtcblx0ICAgIHNldEZvY3VzOiBfc2V0Rm9jdXMyLmRlZmF1bHRcblx0ICB9LFxuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBpbmRleGVkTGVnYWxzOiBbXSxcblx0ICAgICAgbm9uSW5kZXhlZExlZ2FsczogW10sXG5cdCAgICAgIGFwaUxhbmc6IG51bGwsXG5cdCAgICAgIGFwaVJlZ2lvbjogbnVsbFxuXHQgICAgfTtcblx0ICB9LFxuXHRcblx0ICBtZXRob2RzOiB7XG5cdCAgICBmZXRjaExlZ2FsczogZnVuY3Rpb24gZmV0Y2hMZWdhbHMoa2V5cykge1xuXHQgICAgICByZXR1cm4gZmV0Y2goJ1xcbiAgICAgICAgICAnICsgdGhpcy4kcm9vdC5saWdlckVuZFBvaW50ICsgJz9sYW5nPScgKyB0aGlzLmFwaUxhbmcgKyAnJnJlZ2lvbj0nICsgdGhpcy5hcGlSZWdpb24gKyAnJmh0bWw9dHJ1ZVxcbiAgICAgICAgJywge1xuXHQgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuXHQgICAgICAgIGhlYWRlcnM6IHtcblx0ICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG5cdCAgICAgICAgICBhcHBsaWNhdGlvbktleTogdGhpcy4kcm9vdC5saWdlckFwcGxpY2F0aW9uS2V5XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG5cdCAgICAgICAgICBrZXlzOiBrZXlzXG5cdCAgICAgICAgfSlcblx0ICAgICAgfSk7XG5cdCAgICB9LFxuXHQgICAgYXBwZW5kUmVzcG9uc2VUb0xlZ2FsQ29udGFpbmVyOiBmdW5jdGlvbiBhcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIodHlwZSwgZGF0YSkge1xuXHQgICAgICB2YXIgcHJvY2VzcyA9IGZ1bmN0aW9uIHByb2Nlc3ModGFyZ2V0LCBkYXRhQXJ5KSB7XG5cdCAgICAgICAgZGF0YUFyeS5mb3JFYWNoKGZ1bmN0aW9uIChsZWdhbFJlc3BvbnNlKSB7XG5cdCAgICAgICAgICB2YXIgaW5kZXggPSB0YXJnZXQuZmluZEluZGV4KGZ1bmN0aW9uIChsKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBsLmtleSA9PT0gbGVnYWxSZXNwb25zZS5rZXk7XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG5cdCAgICAgICAgICAgIHRhcmdldC4kc2V0KGluZGV4LCB7XG5cdCAgICAgICAgICAgICAgY29udGVudDogbGVnYWxSZXNwb25zZS5jb250ZW50LFxuXHQgICAgICAgICAgICAgIGtleTogbGVnYWxSZXNwb25zZS5rZXlcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH07XG5cdCAgICAgIGlmICh0eXBlID09PSAnaW5kZXhlZCcpIHtcblx0ICAgICAgICBwcm9jZXNzKHRoaXMuaW5kZXhlZExlZ2FscywgZGF0YSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvY2Vzcyh0aGlzLm5vbkluZGV4ZWRMZWdhbHMsIGRhdGEpO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGdldExlZ2FsczogZnVuY3Rpb24gKCkge1xuXHQgICAgICByZXR1cm4gX2RlYm91bmNlMi5kZWZhdWx0LmNhbGwodGhpcywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICAgIHZhciBpbmRleGVkS2V5cyA9IHRoaXMuaW5kZXhlZExlZ2Fscy5tYXAoZnVuY3Rpb24gKGxlZ2FsKSB7XG5cdCAgICAgICAgICByZXR1cm4gbGVnYWwua2V5O1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIHZhciBub25JbmRleGVkS2V5cyA9IHRoaXMubm9uSW5kZXhlZExlZ2Fscy5tYXAoZnVuY3Rpb24gKGxlZ2FsKSB7XG5cdCAgICAgICAgICByZXR1cm4gbGVnYWwua2V5O1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBpZiAoaW5kZXhlZEtleXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgdGhpcy5mZXRjaExlZ2FscyhpbmRleGVkS2V5cykudGhlbih0aGlzLnBhcnNlSlNPTikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgICAgICBfdGhpcy5hcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIoJ2luZGV4ZWQnLCBkYXRhKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAobm9uSW5kZXhlZEtleXMubGVuZ3RoID4gMCkge1xuXHQgICAgICAgICAgdGhpcy5mZXRjaExlZ2Fscyhub25JbmRleGVkS2V5cykudGhlbih0aGlzLnBhcnNlSlNPTikudGhlbihmdW5jdGlvbiAoZGF0YSkge1xuXHQgICAgICAgICAgICBfdGhpcy5hcHBlbmRSZXNwb25zZVRvTGVnYWxDb250YWluZXIoJ25vbkluZGV4ZWQnLCBkYXRhKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSwgMTApO1xuXHQgICAgfSgpXG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdsZWdhbDo6Y2xpY2snOiBmdW5jdGlvbiBsZWdhbENsaWNrKGxlZ2FsS2V5KSB7XG5cdCAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuXHRcblx0ICAgICAgdmFyIHRhcmdldExlZ2FsSW5kZXggPSB0aGlzLmluZGV4ZWRMZWdhbHMuZmluZEluZGV4KGZ1bmN0aW9uIChsKSB7XG5cdCAgICAgICAgcmV0dXJuIGwua2V5ID09PSBsZWdhbEtleTtcblx0ICAgICAgfSk7XG5cdCAgICAgIGlmICh0YXJnZXRMZWdhbEluZGV4ID4gLTEpIHtcblx0ICAgICAgICB0aGlzLmluZGV4ZWRMZWdhbHMuZm9yRWFjaChmdW5jdGlvbiAobCwgaSkge1xuXHQgICAgICAgICAgaWYgKGkgIT09IHRhcmdldExlZ2FsSW5kZXgpIHtcblx0ICAgICAgICAgICAgbC5pc1NlbGVjdGVkID0gZmFsc2U7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBfdGhpczIuaW5kZXhlZExlZ2Fscy4kc2V0KGksIE9iamVjdC5hc3NpZ24oe30sIF90aGlzMi5pbmRleGVkTGVnYWxzW2ldLCB7IGlzU2VsZWN0ZWQ6IHRydWUgfSkpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHQgICAgJ2xlZ2FsOjppbml0JzogZnVuY3Rpb24gbGVnYWxJbml0KGxlZ2FsSW5pdERldGFpbCkge1xuXHQgICAgICB0aGlzLmFwaUxhbmcgPSBsZWdhbEluaXREZXRhaWwubGFuZztcblx0ICAgICAgdGhpcy5hcGlSZWdpb24gPSBsZWdhbEluaXREZXRhaWwucmVnaW9uO1xuXHQgICAgICAvLyBjaGVjayBpZiBsb2FkZWQgYWxyZWFkeVxuXHQgICAgICB2YXIgY29udGFpbmVyUmVmID0gbGVnYWxJbml0RGV0YWlsLmlzTm9uSW5kZXhlZCA/IHRoaXMubm9uSW5kZXhlZExlZ2FscyA6IHRoaXMuaW5kZXhlZExlZ2Fscztcblx0ICAgICAgdmFyIGluZGV4ID0gKDAsIF9maW5kSW5kZXgyLmRlZmF1bHQpKGNvbnRhaW5lclJlZiwgZnVuY3Rpb24gKGxlZ2FsKSB7XG5cdCAgICAgICAgcmV0dXJuIGxlZ2FsLmtleSA9PT0gbGVnYWxJbml0RGV0YWlsLmtleTtcblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIGlmIG5vdCBmb3VuZFxuXHQgICAgICBpZiAoaW5kZXggPCAwKSB7XG5cdCAgICAgICAgaW5kZXggPSBjb250YWluZXJSZWYucHVzaChsZWdhbEluaXREZXRhaWwpIC0gMTtcblx0ICAgICAgICB0aGlzLmdldExlZ2FscygpO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghbGVnYWxJbml0RGV0YWlsLmlzTm9uSW5kZXhlZCkge1xuXHQgICAgICAgIHRoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OnVkcGF0ZScsIHtcblx0ICAgICAgICAgIGtleTogbGVnYWxJbml0RGV0YWlsLmtleSxcblx0ICAgICAgICAgIGlzTm9uSW5kZXhlZDogbGVnYWxJbml0RGV0YWlsLmlzTm9uSW5kZXhlZCxcblx0ICAgICAgICAgIGluZGV4OiBpbmRleFxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg4NCkpKVxuXG4vKioqLyB9LFxuLyogNTggKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRcblx0dmFyIF9taXhpbnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxKTtcblx0XG5cdHZhciBfbWl4aW5zMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX21peGlucyk7XG5cdFxuXHR2YXIgX2RlZmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNik7XG5cdFxuXHR2YXIgX2RlZmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmVyKTtcblx0XG5cdGZ1bmN0aW9uIF9pbnRlcm9wUmVxdWlyZURlZmF1bHQob2JqKSB7IHJldHVybiBvYmogJiYgb2JqLl9fZXNNb2R1bGUgPyBvYmogOiB7IGRlZmF1bHQ6IG9iaiB9OyB9XG5cdFxuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICcuL2xlZ2FsLWNvdW50ZXIuc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL2xlZ2FsLWNvdW50ZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdC8qXG5cdCAqIEFQSTogPGxlZ2FsLWNvdW50ZXJcblx0ICogICAgICAgIGxlZ2FsLWtleT1cIihTdHJpbmcpIGtleVwiXG5cdCAqICAgICAgICBsZWdhbC1sYW5nPVwiKFN0cmluZykgbGFuZ1wiXG5cdCAqICAgICAgICBsZWdhbC1yZWdpb249XCIoU3RyaW5nKSByZWdpb25cIlxuXHQgKiAgICAgICAgaXMtbm9uLWluZGV4ZWQ9XCIoQm9vbGVhbikgaXNOb25JbmRleGVkXCJcblx0ICogICAgICA+PC9sZWdhbC1jb3VudGVyPlxuXHQqL1xuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIG1peGluczogX21peGluczIuZGVmYXVsdCxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgbGVnYWxDb3VudGVyOiBudWxsXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIHByb3BzOiB7XG5cdCAgICBsZWdhbEtleToge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIHJlcXVpcmVkOiB0cnVlXG5cdCAgICB9LFxuXHQgICAgaXNOb25JbmRleGVkOiB7XG5cdCAgICAgIHR5cGU6IEJvb2xlYW4sXG5cdCAgICAgIGRlZmF1bHQ6IGZhbHNlXG5cdCAgICB9LFxuXHQgICAgbGVnYWxMYW5nOiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZyxcblx0ICAgICAgcmVxdWlyZWQ6IHRydWVcblx0ICAgIH0sXG5cdCAgICBsZWdhbFJlZ2lvbjoge1xuXHQgICAgICB0eXBlOiBTdHJpbmcsXG5cdCAgICAgIHJlcXVpcmVkOiB0cnVlXG5cdCAgICB9XG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdsZWdhbDo6dWRwYXRlJzogZnVuY3Rpb24gbGVnYWxVZHBhdGUodXBkYXRlRGV0YWlsKSB7XG5cdCAgICAgIGlmICghdGhpcy5pc05vbkluZGV4ZWQgJiYgdXBkYXRlRGV0YWlsLmtleSA9PT0gdGhpcy5sZWdhbEtleSkge1xuXHQgICAgICAgIHRoaXMubGVnYWxDb3VudGVyID0gdXBkYXRlRGV0YWlsLmluZGV4ICsgMTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBjbGlja0hhbmRsZXIoKSB7XG5cdCAgICAgIHRoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OmNsaWNrJywgdGhpcy5sZWdhbEtleSk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBiZWZvcmVDb21waWxlOiBmdW5jdGlvbiBiZWZvcmVDb21waWxlKCkge30sXG5cdCAgcmVhZHk6IGZ1bmN0aW9uIHJlYWR5KCkge1xuXHQgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAoMCwgX2RlZmVyMi5kZWZhdWx0KShmdW5jdGlvbiAoKSB7XG5cdCAgICAgIF90aGlzLnJvb3RCcm9hZGNhc3QoJ2xlZ2FsOjppbml0Jywge1xuXHQgICAgICAgIGtleTogX3RoaXMubGVnYWxLZXksXG5cdCAgICAgICAgbGFuZzogX3RoaXMubGVnYWxMYW5nLFxuXHQgICAgICAgIHJlZ2lvbjogX3RoaXMubGVnYWxSZWdpb24sXG5cdCAgICAgICAgaXNOb25JbmRleGVkOiBfdGhpcy5pc05vbkluZGV4ZWRcblx0ICAgICAgfSk7XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA1OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vb3ZlcmxheS1jb250YWluZXIuc2Nzcyc7XG5cdC8vIDwvc3R5bGU+XG5cdC8vXG5cdC8vIDx0ZW1wbGF0ZSBzcmM9XCIuL292ZXJsYXktY29udGFpbmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvKlxuXHQqIEV4OiA8b3ZlcmxheS1jb250YWluZXIgaXMtdmlzaWJsZT1cIihCb29sZWFuKSBmYWxzZVwiPlxuXHQgICAgICA8L292ZXJsYXktY29udGFpbmVyPlxuXHQqL1xuXHR2YXIgRVNDID0gMjc7XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgaXNWaXNpYmxlOiB7XG5cdCAgICAgIHR5cGU6IEJvb2xlYW4sXG5cdCAgICAgIGRlZmF1bHQ6IGZhbHNlXG5cdCAgICB9XG5cdCAgfSxcblx0ICB3YXRjaDoge1xuXHQgICAgaXNWaXNpYmxlOiBmdW5jdGlvbiBpc1Zpc2libGUoX2lzVmlzaWJsZSkge1xuXHQgICAgICB2YXIgZWwgPSB3aW5kb3cuZG9jdW1lbnQuYm9keTtcblx0ICAgICAgdmFyIGNsYXNzTmFtZSA9ICduby1zY3JvbGwnO1xuXHQgICAgICBpZiAoX2lzVmlzaWJsZSkge1xuXHQgICAgICAgIGlmICghIWVsLmNsYXNzTGlzdCkge1xuXHQgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBlbC5jbGFzc05hbWUgKz0gJyAnICsgY2xhc3NOYW1lO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGVsLmNsYXNzTmFtZSA9IGVsLmNsYXNzTmFtZS5yZXBsYWNlKG5ldyBSZWdFeHAoJyhefFxcXFxiKScgKyBjbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKFxcXFxifCQpJywgJ2dpJyksICcgJyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdvdmVybGF5Q29udGFpbmVyOjpvcGVuJzogZnVuY3Rpb24gb3ZlcmxheUNvbnRhaW5lck9wZW4oKSB7XG5cdCAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcblx0ICAgIH0sXG5cdCAgICAnb3ZlcmxheUNvbnRhaW5lcjo6Y2xvc2UnOiBmdW5jdGlvbiBvdmVybGF5Q29udGFpbmVyQ2xvc2UoKSB7XG5cdCAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG5cdCAgICB9XG5cdCAgfSxcblx0ICByZWFkeTogZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHdpbmRvdy5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZnVuY3Rpb24gKGV2dCkge1xuXHQgICAgICBldnQgPSBldnQgfHwgd2luZG93LmV2ZW50O1xuXHQgICAgICBpZiAoZXZ0LmtleUNvZGUgPT09IEVTQykge1xuXHQgICAgICAgIF90aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA2MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vb3ZlcmxheS5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vb3ZlcmxheS5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0Lypcblx0ICogRXg6IDxvdmVybGF5IG92ZXJsYXkta2V5PVwiKFN0cmluZykga2V5XCI+XG5cdCAqICAgICAgICBBbnkgY29udGVudFxuXHQgKiAgICAgIDwvb3ZlcmxheT5cblx0Ki9cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7XG5cdCAgICByZXR1cm4ge1xuXHQgICAgICBpc1Zpc2libGU6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIHByb3BzOiB7XG5cdCAgICBvdmVybGF5S2V5OiB7XG5cdCAgICAgIHR5cGU6IFN0cmluZ1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgY2xvc2VPdmVybGF5OiBmdW5jdGlvbiBjbG9zZU92ZXJsYXkoKSB7XG5cdCAgICAgIHRoaXMuJGRpc3BhdGNoKCdvdmVybGF5Q29udGFpbmVyOjpjbG9zZScpO1xuXHQgICAgfVxuXHQgIH0sXG5cdCAgZXZlbnRzOiB7XG5cdCAgICAnb3ZlcmxheTo6b3Blbic6IGZ1bmN0aW9uIG92ZXJsYXlPcGVuKG92ZXJsYXlLZXkpIHtcblx0ICAgICAgaWYgKG92ZXJsYXlLZXkgPT09IHRoaXMub3ZlcmxheUtleSkge1xuXHQgICAgICAgIHRoaXMuaXNWaXNpYmxlID0gdHJ1ZTtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA2MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8vIDxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuXHQvLyAgICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vc3Bpbm5lci5zY3NzJztcblx0Ly8gPC9zdHlsZT5cblx0Ly9cblx0Ly8gPHRlbXBsYXRlIHNyYz1cIi4vc3Bpbm5lci5odG1sXCI+PC90ZW1wbGF0ZT5cblx0Ly9cblx0Ly8gPHNjcmlwdD5cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIHJlcGxhY2U6IHRydWUsXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGFjdGl2ZTogZmFsc2Vcblx0ICAgIH07XG5cdCAgfSxcblx0XG5cdCAgcHJvcHM6IHtcblx0ICAgIHRleHQ6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nLFxuXHQgICAgICBkZWZhdWx0OiAnJ1xuXHQgICAgfSxcblx0ICAgIGZ1bGxTY3JlZW46IHtcblx0ICAgICAgdHlwZTogQm9vbGVhbixcblx0ICAgICAgZGVmYXVsdDogZmFsc2Vcblx0ICAgIH1cblx0ICB9LFxuXHQgIG1ldGhvZHM6IHtcblx0ICAgIHNob3c6IGZ1bmN0aW9uIHNob3coKSB7XG5cdCAgICAgIHRoaXMuYWN0aXZlID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kcm9vdC4kYnJvYWRjYXN0KCdzaG93bjo6c3Bpbm5lcicpO1xuXHQgICAgfSxcblx0ICAgIGhpZGU6IGZ1bmN0aW9uIGhpZGUoKSB7XG5cdCAgICAgIHRoaXMuYWN0aXZlID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuJHJvb3QuJGJyb2FkY2FzdCgnaGlkZGVuOjpzcGlubmVyJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBldmVudHM6IHtcblx0ICAgICdzaG93OjpzcGlubmVyJzogZnVuY3Rpb24gc2hvd1NwaW5uZXIoKSB7XG5cdCAgICAgIHRoaXMuc2hvdygpO1xuXHQgICAgfSxcblx0ICAgICdoaWRlOjpzcGlubmVyJzogZnVuY3Rpb24gaGlkZVNwaW5uZXIoKSB7XG5cdCAgICAgIHRoaXMuaGlkZSgpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDYyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8c3R5bGUgbGFuZz1cInNhc3NcIj5cblx0Ly8gICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvY29tcG9uZW50cy91aS9pY29uJztcblx0Ly8gICAgIEBpbXBvcnQgJy4vc3RlcC10cmFja2VyLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi9zdGVwLXRyYWNrZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgY29uZmlnOiB7XG5cdCAgICAgIHR5cGU6IE9iamVjdFxuXHQgICAgfSxcblx0ICAgIGN1cnJlbnRTdGVwOiB7XG5cdCAgICAgIHR5cGU6IE51bWJlcixcblx0ICAgICAgZGVmYXVsdDogMFxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgY2xpY2tIYW5kbGVyOiBmdW5jdGlvbiBjbGlja0hhbmRsZXIoJGV2ZW50LCBzdGVwLCBpbmRleCkge1xuXHQgICAgICBpZiAoISFzdGVwLm9uQ2xpY2tIYW5kbGVyKSB7XG5cdCAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgaWYgKHRoaXMuY3VycmVudFN0ZXAgPiBpbmRleCkge1xuXHQgICAgICAgICAgc3RlcC5vbkNsaWNrSGFuZGxlcigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0Ly8gPC9zY3JpcHQ+XG5cblx0LyogZ2VuZXJhdGVkIGJ5IHZ1ZS1sb2FkZXIgKi9cblxuLyoqKi8gfSxcbi8qIDYzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi90YWIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cdC8vXG5cdC8vIDxzY3JpcHQ+XG5cdGV4cG9ydHMuZGVmYXVsdCA9IHtcblx0ICBwcm9wczoge1xuXHQgICAgbGFiZWw6IHtcblx0ICAgICAgdHlwZTogU3RyaW5nXG5cdCAgICB9LFxuXHQgICAgaXNEaXNhYmxlZDoge1xuXHQgICAgICB0eXBlOiBCb29sZWFuLFxuXHQgICAgICBkZWZhdWx0OiBmYWxzZVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHRhYkluZGV4OiAwLFxuXHQgICAgICBpc1Zpc2libGU6IGZhbHNlXG5cdCAgICB9O1xuXHQgIH0sXG5cdFxuXHQgIGNvbXB1dGVkOiB7XG5cdCAgICBpc1Zpc2libGU6IGZ1bmN0aW9uIGlzVmlzaWJsZSgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuJHBhcmVudC5hY3RpdmVUYWJJbmRleCA9PT0gdGhpcy50YWJJbmRleDtcblx0ICAgIH1cblx0ICB9LFxuXHQgIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7XG5cdCAgICB0aGlzLiRwYXJlbnQudGFicy5wdXNoKHtcblx0ICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG5cdCAgICAgIGlzRGlzYWJsZWQ6IHRoaXMuaXNEaXNhYmxlZFxuXHQgICAgfSk7XG5cdCAgfSxcblx0ICByZWFkeTogZnVuY3Rpb24gcmVhZHkoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYywgaW5kZXgpIHtcblx0ICAgICAgaWYgKGMuJGVsID09PSBfdGhpcy4kZWwpIHtcblx0ICAgICAgICBfdGhpcy50YWJJbmRleCA9IGluZGV4O1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9LFxuXHQgIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7XG5cdCAgICB0aGlzLiRwYXJlbnQudGFicy5zcGxpY2UodGhpcy50YWJJbmRleCwgMSk7XG5cdCAgfVxuXHR9O1xuXHQvLyA8L3NjcmlwdD5cblxuXHQvKiBnZW5lcmF0ZWQgYnkgdnVlLWxvYWRlciAqL1xuXG4vKioqLyB9LFxuLyogNjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBfZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHZhbHVlKSB7IGlmIChrZXkgaW4gb2JqKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwgeyB2YWx1ZTogdmFsdWUsIGVudW1lcmFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSwgd3JpdGFibGU6IHRydWUgfSk7IH0gZWxzZSB7IG9ialtrZXldID0gdmFsdWU7IH0gcmV0dXJuIG9iajsgfVxuXHRcblx0Ly8gPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG5cdC8vICAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuXHQvLyAgICAgQGltcG9ydCAnLi90YWJzLnNjc3MnO1xuXHQvLyA8L3N0eWxlPlxuXHQvL1xuXHQvLyA8dGVtcGxhdGUgc3JjPVwiLi90YWJzLmh0bWxcIj48L3RlbXBsYXRlPlxuXHQvL1xuXHQvLyA8c2NyaXB0PlxuXHQvKlxuXHQgKiAgRXg6IDx0YWJzIGFjdGl2ZS10YWItaW5kZXg9XCIoSW50ZWdlcikgMFwiPlxuXHQgKiAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiBBXCI+XG5cdCAqICAgICAgICAgIEFueSBjb250ZW50XG5cdCAqICAgICAgICA8L3RhYj5cblx0ICogICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgQlwiIGlzLWRpc2FibGVkPVwiKEJvb2xlYW4pIGZhbHNlXCI+XG5cdCAqICAgICAgICAgIEFueSBjb250ZW50XG5cdCAqICAgICAgICA8L3RhYj5cblx0ICogICAgICAgPHRhYnM+XG5cdCovXG5cdGV4cG9ydHMuZGVmYXVsdCA9IF9kZWZpbmVQcm9wZXJ0eSh7XG5cdCAgcHJvcHM6IHtcblx0ICAgIGFjdGl2ZVRhYkluZGV4OiB7XG5cdCAgICAgIHR5cGU6IE51bWJlcixcblx0ICAgICAgZGVmYXVsdDogMFxuXHQgICAgfVxuXHQgIH0sXG5cdCAgbWV0aG9kczoge1xuXHQgICAgaXNBY3RpdmU6IGZ1bmN0aW9uIGlzQWN0aXZlKGluZGV4KSB7XG5cdCAgICAgIHJldHVybiBhY3RpdmVUYWJJbmRleCA9PT0gaW5kZXg7XG5cdCAgICB9XG5cdCAgfSxcblx0ICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkge1xuXHQgICAgcmV0dXJuIHtcblx0ICAgICAgdGFiczogW11cblx0ICAgIH07XG5cdCAgfVxuXHR9LCBcIm1ldGhvZHNcIiwge1xuXHQgIGhhbmRsZVRhYkxpc3RDbGljazogZnVuY3Rpb24gaGFuZGxlVGFiTGlzdENsaWNrKGluZGV4LCB0YWIpIHtcblx0ICAgIGlmICghdGFiLmlzRGlzYWJsZWQpIHtcblx0ICAgICAgdGhpcy5hY3RpdmVUYWJJbmRleCA9IGluZGV4O1xuXHQgICAgfVxuXHQgIH1cblx0fSk7XG5cdC8vIDwvc2NyaXB0PlxuXG5cdC8qIGdlbmVyYXRlZCBieSB2dWUtbG9hZGVyICovXG5cbi8qKiovIH0sXG4vKiA2NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODcpO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHR2YXIgX3N0ZXBUcmFja2VyUGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTkxKTtcblx0XG5cdHZhciBfc3RlcFRyYWNrZXJQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3N0ZXBUcmFja2VyUGFnZSk7XG5cdFxuXHR2YXIgX3RhYnNQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTIpO1xuXHRcblx0dmFyIF90YWJzUGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF90YWJzUGFnZSk7XG5cdFxuXHR2YXIgX2xlZ2FsUGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTg4KTtcblx0XG5cdHZhciBfbGVnYWxQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlZ2FsUGFnZSk7XG5cdFxuXHR2YXIgX292ZXJsYXlQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODkpO1xuXHRcblx0dmFyIF9vdmVybGF5UGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9vdmVybGF5UGFnZSk7XG5cdFxuXHR2YXIgX2NvbGxhcHNhYmxlUGFuZWxQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODYpO1xuXHRcblx0dmFyIF9jb2xsYXBzYWJsZVBhbmVsUGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9jb2xsYXBzYWJsZVBhbmVsUGFnZSk7XG5cdFxuXHR2YXIgX2FsZXJ0UGFnZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTg1KTtcblx0XG5cdHZhciBfYWxlcnRQYWdlMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2FsZXJ0UGFnZSk7XG5cdFxuXHR2YXIgX3NwaW5uZXJQYWdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTApO1xuXHRcblx0dmFyIF9zcGlubmVyUGFnZTIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zcGlubmVyUGFnZSk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgICcvJzoge1xuXHQgICAgY29tcG9uZW50OiBfaW5kZXgyLmRlZmF1bHRcblx0ICB9LFxuXHQgICcvYWxlcnQnOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8YWxlcnQtcGFnZT48L2FsZXJ0LXBhZ2U+Jyxcblx0ICAgICAgY29tcG9uZW50czogeyBBbGVydFBhZ2U6IF9hbGVydFBhZ2UyLmRlZmF1bHQgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgJy9zcGlubmVyJzoge1xuXHQgICAgY29tcG9uZW50OiB7XG5cdCAgICAgIHRlbXBsYXRlOiAnPHNwaW5uZXItcGFnZT48L3NwaW5uZXItcGFnZT4nLFxuXHQgICAgICBjb21wb25lbnRzOiB7IFNwaW5uZXJQYWdlOiBfc3Bpbm5lclBhZ2UyLmRlZmF1bHQgfVxuXHQgICAgfVxuXHQgIH0sXG5cdCAgJy9zdGVwLXRyYWNrZXInOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8c3RlcC10cmFja2VyLXBhZ2U+PC9zdGVwLXRyYWNrZXItcGFnZT4nLFxuXHQgICAgICBjb21wb25lbnRzOiB7IFN0ZXBUcmFja2VyUGFnZTogX3N0ZXBUcmFja2VyUGFnZTIuZGVmYXVsdCB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICAnL3RhYnMnOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8dGFicy1wYWdlPjwvdGFicy1wYWdlPicsXG5cdCAgICAgIGNvbXBvbmVudHM6IHsgVGFic1BhZ2U6IF90YWJzUGFnZTIuZGVmYXVsdCB9XG5cdCAgICB9XG5cdCAgfSxcblx0ICAnL2xlZ2FsJzoge1xuXHQgICAgY29tcG9uZW50OiB7XG5cdCAgICAgIHRlbXBsYXRlOiAnPGxlZ2FsLXBhZ2U+PC9sZWdhbC1wYWdlPicsXG5cdCAgICAgIGNvbXBvbmVudHM6IHsgTGVnYWxQYWdlOiBfbGVnYWxQYWdlMi5kZWZhdWx0IH1cblx0ICAgIH1cblx0ICB9LFxuXHQgICcvb3ZlcmxheSc6IHtcblx0ICAgIGNvbXBvbmVudDoge1xuXHQgICAgICB0ZW1wbGF0ZTogJzxvdmVybGF5LXBhZ2U+PC9vdmVybGF5LXBhZ2U+Jyxcblx0ICAgICAgY29tcG9uZW50czogeyBPdmVybGF5UGFnZTogX292ZXJsYXlQYWdlMi5kZWZhdWx0IH1cblx0ICAgIH1cblx0ICB9LFxuXHQgICcvY29sbGFwc2FibGUtcGFuZWwnOiB7XG5cdCAgICBjb21wb25lbnQ6IHtcblx0ICAgICAgdGVtcGxhdGU6ICc8Y29sbGFwc2FibGUtcGFuZWwtcGFnZT48L2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2U+Jyxcblx0ICAgICAgY29tcG9uZW50czogeyBDb2xsYXBzYWJsZVBhbmVsUGFnZTogX2NvbGxhcHNhYmxlUGFuZWxQYWdlMi5kZWZhdWx0IH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiA2NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7XG5cdCAgdmFsdWU6IHRydWVcblx0fSk7XG5cdC8qXG5cdCAgQGRlc2MgQWRkIGJlaGF2aW9yIHRvIGFueSBlbGVtZW50LiBXaGVuIGNsaWNrZWQsIGl0IHdpbGwgb3BlbiB0aGUgY29ycmVzcG9uZGluZyBvdmVybGF5XG5cdCAgRXhhbXBsZTogPGJ1dHRvbiBvdmVybGF5LW9wZW5lcj1cIm15LW92ZXJsYXlcIj48L2J1dHRvbj5cblx0Ki9cblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIGlzTGl0ZXJhbDogdHJ1ZSxcblx0ICBldmVudEhhbmRsZXI6IGZ1bmN0aW9uIGV2ZW50SGFuZGxlcihlKSB7XG5cdCAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICB0aGlzLnZtLiRyb290LiRicm9hZGNhc3QoJ292ZXJsYXk6Om9wZW4nLCB0aGlzLmV4cHJlc3Npb24pO1xuXHQgICAgdGhpcy52bS4kcm9vdC4kYnJvYWRjYXN0KCdvdmVybGF5Q29udGFpbmVyOjpvcGVuJyk7XG5cdCAgfSxcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZXZlbnRIYW5kbGVyLmJpbmQodGhpcykpO1xuXHQgIH0sXG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5ldmVudEhhbmRsZXIuYmluZCh0aGlzKSk7XG5cdCAgfVxuXHR9O1xuXG4vKioqLyB9LFxuLyogNjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfb3ZlcmxheU9wZW5lciA9IF9fd2VicGFja19yZXF1aXJlX18oNjYpO1xuXHRcblx0dmFyIF9vdmVybGF5T3BlbmVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX292ZXJsYXlPcGVuZXIpO1xuXHRcblx0dmFyIF9zZXRGb2N1cyA9IF9fd2VicGFja19yZXF1aXJlX18oMjApO1xuXHRcblx0dmFyIF9zZXRGb2N1czIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9zZXRGb2N1cyk7XG5cdFxuXHR2YXIgX2luZGV4ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMDApO1xuXHRcblx0dmFyIF9pbmRleDIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleCk7XG5cdFxuXHR2YXIgX292ZXJsYXlDb250YWluZXIgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5Nyk7XG5cdFxuXHR2YXIgX292ZXJsYXlDb250YWluZXIyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3ZlcmxheUNvbnRhaW5lcik7XG5cdFxuXHR2YXIgX292ZXJsYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5OCk7XG5cdFxuXHR2YXIgX292ZXJsYXkyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfb3ZlcmxheSk7XG5cdFxuXHR2YXIgX2xlZ2FsQ291bnRlciA9IF9fd2VicGFja19yZXF1aXJlX18oMTk2KTtcblx0XG5cdHZhciBfbGVnYWxDb3VudGVyMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2xlZ2FsQ291bnRlcik7XG5cdFxuXHR2YXIgX2xlZ2FsQ29udGFpbmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTUpO1xuXHRcblx0dmFyIF9sZWdhbENvbnRhaW5lcjIgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9sZWdhbENvbnRhaW5lcik7XG5cdFxuXHR2YXIgX3RhYnMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIwMik7XG5cdFxuXHR2YXIgX3RhYnMyID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfdGFicyk7XG5cdFxuXHR2YXIgX3RhYiA9IF9fd2VicGFja19yZXF1aXJlX18oMjAxKTtcblx0XG5cdHZhciBfdGFiMiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX3RhYik7XG5cdFxuXHR2YXIgX2luZGV4MyA9IF9fd2VicGFja19yZXF1aXJlX18oMTk0KTtcblx0XG5cdHZhciBfaW5kZXg0ID0gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChfaW5kZXgzKTtcblx0XG5cdHZhciBfaW5kZXg1ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxOTMpO1xuXHRcblx0dmFyIF9pbmRleDYgPSBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KF9pbmRleDUpO1xuXHRcblx0dmFyIF9pbmRleDcgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE5OSk7XG5cdFxuXHR2YXIgX2luZGV4OCA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2luZGV4Nyk7XG5cdFxuXHRmdW5jdGlvbiBfaW50ZXJvcFJlcXVpcmVEZWZhdWx0KG9iaikgeyByZXR1cm4gb2JqICYmIG9iai5fX2VzTW9kdWxlID8gb2JqIDogeyBkZWZhdWx0OiBvYmogfTsgfVxuXHRcblx0dmFyIGNvbXBvbmVudHMgPSB7XG5cdCAgU3RlcFRyYWNrZXI6IF9pbmRleDIuZGVmYXVsdCxcblx0ICBPdmVybGF5Q29udGFpbmVyOiBfb3ZlcmxheUNvbnRhaW5lcjIuZGVmYXVsdCxcblx0ICBPdmVybGF5OiBfb3ZlcmxheTIuZGVmYXVsdCxcblx0ICBMZWdhbENvdW50ZXI6IF9sZWdhbENvdW50ZXIyLmRlZmF1bHQsXG5cdCAgTGVnYWxDb250YWluZXI6IF9sZWdhbENvbnRhaW5lcjIuZGVmYXVsdCxcblx0ICBUYWJzOiBfdGFiczIuZGVmYXVsdCxcblx0ICBUYWI6IF90YWIyLmRlZmF1bHQsXG5cdCAgQ29sbGFwc2FibGVQYW5lbDogX2luZGV4NC5kZWZhdWx0LFxuXHQgIEFsZXJ0OiBfaW5kZXg2LmRlZmF1bHQsXG5cdCAgU3Bpbm5lcjogX2luZGV4OC5kZWZhdWx0XG5cdH07XG5cdHZhciBkaXJlY3RpdmVzID0ge1xuXHQgIG92ZXJsYXlPcGVuZXI6IF9vdmVybGF5T3BlbmVyMi5kZWZhdWx0LFxuXHQgIHNldEZvY3VzOiBfc2V0Rm9jdXMyLmRlZmF1bHRcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gaW5zdGFsbChWdWUpIHtcblx0ICBmb3IgKHZhciBuYW1lIGluIGNvbXBvbmVudHMpIHtcblx0ICAgIFZ1ZS5jb21wb25lbnQobmFtZSwgY29tcG9uZW50c1tuYW1lXSk7XG5cdCAgfVxuXHQgIGZvciAodmFyIF9uYW1lIGluIGRpcmVjdGl2ZXMpIHtcblx0ICAgIFZ1ZS5kaXJlY3RpdmUoX25hbWUsIGRpcmVjdGl2ZXNbX25hbWVdKTtcblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiA2OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cdFxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHtcblx0ICB2YWx1ZTogdHJ1ZVxuXHR9KTtcblx0ZXhwb3J0cy5kZWZhdWx0ID0ge1xuXHQgIG1ldGhvZHM6IHtcblx0ICAgIHJvb3RCcm9hZGNhc3Q6IGZ1bmN0aW9uIHJvb3RCcm9hZGNhc3QoKSB7XG5cdCAgICAgIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gQXJyYXkoX2xlbiksIF9rZXkgPSAwOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7XG5cdCAgICAgICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdGhpcy4kYnJvYWRjYXN0LmFwcGx5KHRoaXMuJHJvb3QsIGFyZ3MpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblxuLyoqKi8gfSxcbi8qIDY5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRcInVzZSBzdHJpY3RcIjtcblx0XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwge1xuXHQgIHZhbHVlOiB0cnVlXG5cdH0pO1xuXHRleHBvcnRzLmRlZmF1bHQgPSB7XG5cdCAgbWV0aG9kczoge1xuXHQgICAgcGFyc2VKU09OOiBmdW5jdGlvbiBwYXJzZUpTT04ocmVzcG9uc2UpIHtcblx0ICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cbi8qKiovIH0sXG4vKiA3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5zZ19jLWFwaS10YWJsZXtib3JkZXItc3BhY2luZzowIDEwcHg7d2lkdGg6MTAwJX0uc2dfYy1hcGktdGFibGUgdHJ7LXdlYmtpdC1ib3gtZmxleDoxOy1tcy1mbGV4OjE7ZmxleDoxfS5zZ19jLWFwaS10YWJsZSB0aCwuc2dfYy1hcGktdGFibGUgdHI6aG92ZXJ7YmFja2dyb3VuZC1jb2xvcjojZWVlfS5zZ19jLWFwaS10YWJsZSB0ZHt0ZXh0LWFsaWduOmNlbnRlcn1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5zZ19jLW5hdntkaXNwbGF5OmJsb2NrO3Bvc2l0aW9uOmZpeGVkO2xlZnQ6MDt3aWR0aDoyNXJlbTtoZWlnaHQ6MTAwJTtib3JkZXItcmlnaHQ6LjFyZW0gc29saWQgI2UyZTJlMjtwYWRkaW5nOjJyZW07cGFkZGluZy10b3A6NjhweDtvdmVyZmxvdy14OmhpZGRlbjtvdmVyZmxvdy15OmF1dG87YmFja2dyb3VuZC1jb2xvcjojZmZmfS5zZ19jLW5hdl9fc2VjdGlvbntmb250LWZhbWlseTpUZWx1cyBNZWRpdW0sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Zm9udC1zaXplOjEuMnJlbTtib3JkZXItYm90dG9tOi4xcmVtIHNvbGlkICNlMmUyZTI7cGFkZGluZy10b3A6MXJlbTtwYWRkaW5nLWJvdHRvbTouNXJlbTttYXJnaW46MXJlbSAwfS5zZ19jLW5hdl9fbGlzdC1pdGVte3BhZGRpbmc6NXB4IDB9LnNnX2MtbmF2X19saW5rOmhvdmVye2NvbG9yOiM4YzY4YTZ9LnNnX2MtbmF2X19saW5rLS1hY3RpdmV7Y29sb3I6IzU3YTcwOH1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImhlYWRlci5zZ19jLXNpdGUtaGVhZGVye2JhY2tncm91bmQtY29sb3I6IzRiMjg2ZDtoZWlnaHQ6NjhweDt0ZXh0LWFsaWduOmxlZnQ7cG9zaXRpb246Zml4ZWQ7d2lkdGg6MTAwJTt6LWluZGV4Ojk5OTl9aGVhZGVyLnNnX2Mtc2l0ZS1oZWFkZXIgLnNnX2Mtc2l0ZS1oZWFkZXItY29udGFpbmVye2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7cGFkZGluZzowIDEwcHh9aGVhZGVyLnNnX2Mtc2l0ZS1oZWFkZXIgLnNnX2Mtc2l0ZS1oZWFkZXItY29udGFpbmVyIGltZy5sb2dve2hlaWdodDoxMDAlO3BhZGRpbmc6MjBweDtkaXNwbGF5OmlubGluZS1ibG9jazttYXgtd2lkdGg6MTAwJX1cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImJvZHl7YmFja2dyb3VuZC1jb2xvcjojZjVmNmY3fS5zZ19jLXNpdGVfX21haW57cGFkZGluZy10b3A6NjhweDttYXJnaW4tbGVmdDoyNXJlbX0uc2dfYy1kZW1ve21hcmdpbjoyMHB4IDB9LnNnX2MtZGVtb19fY29udGFpbmVye2JhY2tncm91bmQtY29sb3I6I2ZmZjtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyOjFweCBzb2xpZCAjZWVlO3BhZGRpbmc6MjVweDttYXJnaW46MjBweCAwfWNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2NvbG9yOiMwMDA7YmFja2dyb3VuZDpub25lO3RleHQtc2hhZG93OjAgMXB4ICNmZmY7Zm9udC1mYW1pbHk6Q29uc29sYXMsTW9uYWNvLEFuZGFsZSBNb25vLFVidW50dSBNb25vLG1vbm9zcGFjZTt0ZXh0LWFsaWduOmxlZnQ7d2hpdGUtc3BhY2U6cHJlO3dvcmQtc3BhY2luZzpub3JtYWw7d29yZC1icmVhazpub3JtYWw7d29yZC13cmFwOm5vcm1hbDtsaW5lLWhlaWdodDoxLjU7LW1vei10YWItc2l6ZTo0Oy1vLXRhYi1zaXplOjQ7dGFiLXNpemU6NDstd2Via2l0LWh5cGhlbnM6bm9uZTstbXMtaHlwaGVuczpub25lO2h5cGhlbnM6bm9uZX1jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixjb2RlW2NsYXNzKj1sYW5ndWFnZS1dIDo6LW1vei1zZWxlY3Rpb24scHJlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjotbW96LXNlbGVjdGlvbnt0ZXh0LXNoYWRvdzpub25lO2JhY2tncm91bmQ6I2IzZDRmY31jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjpzZWxlY3Rpb24sY29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSA6OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV06OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjpzZWxlY3Rpb257dGV4dC1zaGFkb3c6bm9uZTtiYWNrZ3JvdW5kOiNiM2Q0ZmN9QG1lZGlhIHByaW50e2NvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de3RleHQtc2hhZG93Om5vbmV9fXByZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOjFlbTttYXJnaW46LjVlbSAwO292ZXJmbG93OmF1dG99Om5vdChwcmUpPmNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2JhY2tncm91bmQ6I2Y1ZjJmMH06bm90KHByZSk+Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOi4xZW07Ym9yZGVyLXJhZGl1czouM2VtO3doaXRlLXNwYWNlOm5vcm1hbH0udG9rZW4uY2RhdGEsLnRva2VuLmNvbW1lbnQsLnRva2VuLmRvY3R5cGUsLnRva2VuLnByb2xvZ3tjb2xvcjojNzA4MDkwfS50b2tlbi5wdW5jdHVhdGlvbntjb2xvcjojOTk5fS5uYW1lc3BhY2V7b3BhY2l0eTouN30udG9rZW4uYm9vbGVhbiwudG9rZW4uY29uc3RhbnQsLnRva2VuLmRlbGV0ZWQsLnRva2VuLm51bWJlciwudG9rZW4ucHJvcGVydHksLnRva2VuLnN5bWJvbCwudG9rZW4udGFne2NvbG9yOiM5MDV9LnRva2VuLmF0dHItbmFtZSwudG9rZW4uYnVpbHRpbiwudG9rZW4uY2hhciwudG9rZW4uaW5zZXJ0ZWQsLnRva2VuLnNlbGVjdG9yLC50b2tlbi5zdHJpbmd7Y29sb3I6IzY5MH0ubGFuZ3VhZ2UtY3NzIC50b2tlbi5zdHJpbmcsLnN0eWxlIC50b2tlbi5zdHJpbmcsLnRva2VuLmVudGl0eSwudG9rZW4ub3BlcmF0b3IsLnRva2VuLnVybHtjb2xvcjojYTY3ZjU5O2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsLjUpfS50b2tlbi5hdHJ1bGUsLnRva2VuLmF0dHItdmFsdWUsLnRva2VuLmtleXdvcmR7Y29sb3I6IzA3YX0udG9rZW4uZnVuY3Rpb257Y29sb3I6I2RkNGE2OH0udG9rZW4uaW1wb3J0YW50LC50b2tlbi5yZWdleCwudG9rZW4udmFyaWFibGV7Y29sb3I6I2U5MH0udG9rZW4uYm9sZCwudG9rZW4uaW1wb3J0YW50e2ZvbnQtd2VpZ2h0OjcwMH0udG9rZW4uaXRhbGlje2ZvbnQtc3R5bGU6aXRhbGljfS50b2tlbi5lbnRpdHl7Y3Vyc29yOmhlbHB9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uZmFkZS10cmFuc2l0aW9uey13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2U7dHJhbnNpdGlvbjphbGwgLjNzIGVhc2V9LmZhZGUtZW50ZXIsLmZhZGUtbGVhdmV7b3BhY2l0eTowfS5jLWFsZXJ0e3Bvc2l0aW9uOnJlbGF0aXZlO3BhZGRpbmc6N3B4IDE1cHg7bWFyZ2luLWJvdHRvbToxcmVtO2JvcmRlcjoxcHggc29saWQgdHJhbnNwYXJlbnQ7Ym9yZGVyLXJhZGl1czouMjVyZW19LmMtYWxlcnQtLWluZm97YmFja2dyb3VuZC1jb2xvcjojMzMzO2JvcmRlci1jb2xvcjojMDAwO2NvbG9yOiNmZmZ9LmMtYWxlcnQtLWluZm8gYnV0dG9ue2NvbG9yOiNmZmZ9LmMtYWxlcnQtLXN1Y2Nlc3N7YmFja2dyb3VuZC1jb2xvcjojZTZmZmNjO2JvcmRlci1jb2xvcjojOWYzO2NvbG9yOiM0MDgwMDB9LmMtYWxlcnQtLWVycm9ye2JhY2tncm91bmQtY29sb3I6I2Y4ZGRlMztib3JkZXItY29sb3I6I2YyYzBjYTtjb2xvcjojYzgxMjM1fS5jLWFsZXJ0X19jbG9zZS1idXR0b257cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MTBweDstd2Via2l0LWFwcGVhcmFuY2U6bm9uZTtwYWRkaW5nOjA7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZDowIDA7Ym9yZGVyOjA7Zm9udC1zaXplOjIuNXJlbTtvcGFjaXR5Oi4yfS5jLWFsZXJ0X19jbG9zZS1idXR0b246aG92ZXJ7b3BhY2l0eTouM31cIiwgXCJcIl0pO1xuXHRcblx0Ly8gZXhwb3J0c1xuXG5cbi8qKiovIH0sXG4vKiA3NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0ZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxKSgpO1xuXHQvLyBpbXBvcnRzXG5cdFxuXHRcblx0Ly8gbW9kdWxlXG5cdGV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5jLWNvbGxhcHNhYmxlLXBhbmVse2JvcmRlcjoxcHggc29saWQgI2UyZTJlMjtib3gtc2hhZG93OjAgMXB4IDNweCAxcHggI2UyZTJlMn0uYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVye2N1cnNvcjpwb2ludGVyO3BhZGRpbmc6MTBweCAxNXB4O3Bvc2l0aW9uOnJlbGF0aXZlfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXI6YWZ0ZXJ7cG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MWVtO3RvcDouNzVlbTtmb250LXNpemU6Ljc1ZW07Zm9udC1mYW1pbHk6VGVsdXMgSWNvbjtjb250ZW50OidcXFxcRTExNCc7Y29sb3I6IzU3YTcwOH0uYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyLS1vcGVuOmFmdGVye2NvbnRlbnQ6J1xcXFxFMTE3J30uYy1jb2xsYXBzYWJsZS1wYW5lbF9fYm9keXtib3JkZXItdG9wOjFweCBzb2xpZCAjZTJlMmUyO21heC1oZWlnaHQ6MDtwYWRkaW5nOjAgMTVweDstd2Via2l0LXRyYW5zaXRpb246YWxsIC4zcyBlYXNlLWluLW91dDt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZS1pbi1vdXQ7b3ZlcmZsb3c6aGlkZGVuO29wYWNpdHk6MH0uYy1jb2xsYXBzYWJsZS1wYW5lbF9fYm9keS0tb3BlbntvcGFjaXR5OjE7cGFkZGluZzoxNXB4O21heC1oZWlnaHQ6OTk5OXB4fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDc2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtbGVnYWwtY29udGFpbmVyX19vcmRlcmVkLWxpc3R7bWFyZ2luLXRvcDoxMHB4O21hcmdpbi1ib3R0b206MjBweDtsaXN0LXN0eWxlOmRlY2ltYWw7bGlzdC1zdHlsZS10eXBlOmRlY2ltYWw7cGFkZGluZy1sZWZ0OjIwcHh9LmMtbGVnYWwtY29udGFpbmVyX191bm9yZGVyZWQtbGlzdHttYXJnaW4tdG9wOjEwcHg7bWFyZ2luLWJvdHRvbToyMHB4O3BhZGRpbmctbGVmdDoyMHB4O2xpc3Qtc3R5bGU6bm9uZTtsaXN0LXN0eWxlLXR5cGU6bm9uZX0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbXtsaW5lLWhlaWdodDoxOXB4O21hcmdpbi1ib3R0b206MTBweDtwYWRkaW5nOjEwcHh9LmMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0tLWFjdGl2ZXtiYWNrZ3JvdW5kLWNvbG9yOiNmOWYxZmZ9LmMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gYXtjb2xvcjojNDkxNjZkO3RleHQtZGVjb3JhdGlvbjpub25lO2JvcmRlci1ib3R0b206MXB4IGRvdHRlZDtwYWRkaW5nLWJvdHRvbToxcHh9LmMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gYTpob3Zlcntjb2xvcjojOGM2OGE2fVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDc3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtbGVnYWwtc3Vwe2ZvbnQtc2l6ZTouNzVlbTtsaW5lLWhlaWdodDowO3ZlcnRpY2FsLWFsaWduOnN1cGVyO3RleHQtZGVjb3JhdGlvbjpub25lO3RvcDowIWltcG9ydGFudDtjdXJzb3I6cG9pbnRlcn0uYy1sZWdhbC1zdXAgYXtjb2xvcjojNDkxNjZkfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDc4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLm5vLXNjcm9sbHtvdmVyZmxvdy14OmhpZGRlbjtvdmVyZmxvdzpoaWRkZW47b3ZlcmZsb3cteTpoaWRkZW47cG9zaXRpb246cmVsYXRpdmU7aGVpZ2h0OjEwMCV9LmMtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW57b3BhY2l0eTowOy13ZWJraXQtdHJhbnNpdGlvbjpvcGFjaXR5IDEuM3MgZWFzZS1pbi1vdXQ7dHJhbnNpdGlvbjpvcGFjaXR5IDEuM3MgZWFzZS1pbi1vdXR9LmMtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW4tLWFjdGl2ZXtvcGFjaXR5OjE7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLC41NSk7cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO3JpZ2h0OjA7Ym90dG9tOjB9LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlze3Bvc2l0aW9uOmZpeGVkO3JpZ2h0OjA7dG9wOjA7Ym90dG9tOjA7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLC41KTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKDEwMCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDEwMCUpOy13ZWJraXQtdHJhbnNpdGlvbjoxcyBlYXNlLWluLW91dDt0cmFuc2l0aW9uOjFzIGVhc2UtaW4tb3V0fUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NTk5cHgpey5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5c3t3aWR0aDoxMDAlfX1AbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjYwMHB4KXsuYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXN7d2lkdGg6NjYlfX0uYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXMtLWFjdGl2ZXstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVYKDApO3RyYW5zZm9ybTp0cmFuc2xhdGVYKDApO3otaW5kZXg6OTk5OTl9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogNzkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy1vdmVybGF5e2hlaWdodDoxMDAlO3dpZHRoOjEwMCU7YmFja2dyb3VuZC1jb2xvcjojZmZmfS5jLW92ZXJsYXlfX2hlYWRlcntwYWRkaW5nOjIwcHg7cG9zaXRpb246Zml4ZWQ7dG9wOjA7aGVpZ2h0Ojc1cHg7d2lkdGg6MTAwJTtib3JkZXItYm90dG9tOjFweCBzb2xpZCAjZTJlMmUyO2JhY2tncm91bmQtY29sb3I6I2Y1ZjZmN30uYy1vdmVybGF5X19jbG9zZS1idXR0b257Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZDowO2JvcmRlcjowO3Bvc2l0aW9uOmFic29sdXRlO3RvcDoyMHB4O3JpZ2h0OjIwcHg7Zm9udC1mYW1pbHk6VGVsdXMgSWNvbjtmb250LXNpemU6MmVtO2NvbG9yOiM0OTE2NmR9LmMtb3ZlcmxheV9fY2xvc2UtYnV0dG9uOmJlZm9yZXtjb250ZW50OidcXFxcRTEwNid9LmMtb3ZlcmxheV9fYm9keXtwb3NpdGlvbjpmaXhlZDstd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZzp0b3VjaDtvdmVyZmxvdy15OnNjcm9sbDt0b3A6NzVweDtib3R0b206MDt3aWR0aDoxMDAlO3BhZGRpbmc6MjBweCAyMHB4IDUwcHh9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogODAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCJALXdlYmtpdC1rZXlmcmFtZXMgcm90YXRle3Rvey13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxdHVybik7dHJhbnNmb3JtOnJvdGF0ZSgxdHVybil9fUBrZXlmcmFtZXMgcm90YXRle3Rvey13ZWJraXQtdHJhbnNmb3JtOnJvdGF0ZSgxdHVybik7dHJhbnNmb3JtOnJvdGF0ZSgxdHVybil9fUAtd2Via2l0LWtleWZyYW1lcyBkYXNoezAle3N0cm9rZS1kYXNoYXJyYXk6MSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6MH01MCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTM1fXRve3N0cm9rZS1kYXNoYXJyYXk6ODksMjAwO3N0cm9rZS1kYXNob2Zmc2V0Oi0xMjR9fUBrZXlmcmFtZXMgZGFzaHswJXtzdHJva2UtZGFzaGFycmF5OjEsMjAwO3N0cm9rZS1kYXNob2Zmc2V0OjB9NTAle3N0cm9rZS1kYXNoYXJyYXk6ODksMjAwO3N0cm9rZS1kYXNob2Zmc2V0Oi0zNX10b3tzdHJva2UtZGFzaGFycmF5Ojg5LDIwMDtzdHJva2UtZGFzaG9mZnNldDotMTI0fX1ALXdlYmtpdC1rZXlmcmFtZXMgc3Bpbm5lci1jb2xvcnswJSx0b3tzdHJva2U6IzZjMH0yNSV7c3Ryb2tlOiM2YzB9NTAle3N0cm9rZTojNTdhNzA4fTc1JXtzdHJva2U6IzU3YTcwOH19QGtleWZyYW1lcyBzcGlubmVyLWNvbG9yezAlLHRve3N0cm9rZTojNmMwfTI1JXtzdHJva2U6IzZjMH01MCV7c3Ryb2tlOiM1N2E3MDh9NzUle3N0cm9rZTojNTdhNzA4fX0uYy1zcGlubmVye2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LXdlYmtpdC1ib3gtYWxpZ246Y2VudGVyOy1tcy1mbGV4LWFsaWduOmNlbnRlcjthbGlnbi1pdGVtczpjZW50ZXI7ZGlzcGxheTotd2Via2l0LWZsZXg7LXdlYmtpdC1hbGlnbi1pdGVtczpjZW50ZXI7LXdlYmtpdC1ib3gtcGFjazpjZW50ZXI7LW1zLWZsZXgtcGFjazpjZW50ZXI7anVzdGlmeS1jb250ZW50OmNlbnRlcjttYXJnaW46YXV0bzstd2Via2l0LWJveC1vcmllbnQ6dmVydGljYWw7LXdlYmtpdC1ib3gtZGlyZWN0aW9uOm5vcm1hbDstbXMtZmxleC1kaXJlY3Rpb246Y29sdW1uO2ZsZXgtZGlyZWN0aW9uOmNvbHVtbn0uYy1zcGlubmVyLS1mdWxsc2NyZWVue3Bvc2l0aW9uOmZpeGVkO3RvcDowO2xlZnQ6MDtyaWdodDowO2JvdHRvbTowO3otaW5kZXg6OTk5ODt3aWR0aDoxMDAlO2hlaWdodDoxMDAlO2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsLjgpfS5jLXNwaW5uZXIgc3Zne2FuaW1hdGlvbi1uYW1lOnJvdGF0ZTstd2Via2l0LWFuaW1hdGlvbi1uYW1lOnJvdGF0ZTstbW96LWFuaW1hdGlvbi1uYW1lOnJvdGF0ZTthbmltYXRpb24tZHVyYXRpb246MS44czstd2Via2l0LWFuaW1hdGlvbi1kdXJhdGlvbjoxLjhzOy1tb3otYW5pbWF0aW9uLWR1cmF0aW9uOjEuOHM7YW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZTstd2Via2l0LWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6aW5maW5pdGU7LW1vei1hbmltYXRpb24taXRlcmF0aW9uLWNvdW50OmluZmluaXRlO2FuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246bGluZWFyOy13ZWJraXQtYW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpsaW5lYXI7LW1vei1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmxpbmVhcjtoZWlnaHQ6MTAwcHg7d2lkdGg6MTAwcHh9LmMtc3Bpbm5lciBjaXJjbGV7YW5pbWF0aW9uOmRhc2ggMS43cyBlYXNlLWluLW91dCBpbmZpbml0ZSAwcyxzcGlubmVyLWNvbG9yIDZzIGVhc2UtaW4tb3V0IGluZmluaXRlIC0uNzVzOy13ZWJraXQtYW5pbWF0aW9uOmRhc2ggMS43cyBlYXNlLWluLW91dCBpbmZpbml0ZSAwcyxzcGlubmVyLWNvbG9yIDZzIGVhc2UtaW4tb3V0IGluZmluaXRlIC0uNzVzOy1tb3otYW5pbWF0aW9uOmRhc2ggMS43cyBlYXNlLWluLW91dCBpbmZpbml0ZSAwcyxzcGlubmVyLWNvbG9yIDZzIGVhc2UtaW4tb3V0IGluZmluaXRlIC0uNzVzfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDgxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHRleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKCk7XG5cdC8vIGltcG9ydHNcblx0XG5cdFxuXHQvLyBtb2R1bGVcblx0ZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtc3RlcC10cmFja2VyX19pY29uLC5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5jLXN0ZXAtdHJhY2tlcntsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO3Bvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXg7LXdlYmtpdC1ib3gtcGFjazpqdXN0aWZ5Oy1tcy1mbGV4LXBhY2s6anVzdGlmeTtqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjttYXJnaW46MXJlbSAtMS41cmVtfUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjAwcHgpey5jLXN0ZXAtdHJhY2tlcntwYWRkaW5nLWJvdHRvbToyLjVyZW07bWFyZ2luOjFyZW0gMH19LmMtc3RlcC10cmFja2VyX19zdGVwe3dpZHRoOjEwMCU7cG9zaXRpb246cmVsYXRpdmU7dGV4dC1hbGlnbjpjZW50ZXJ9LmMtc3RlcC10cmFja2VyX19zdGVwOmFmdGVyLC5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpiZWZvcmV7cG9zaXRpb246YWJzb2x1dGU7dG9wOjUwJTstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3RyYW5zZm9ybTp0cmFuc2xhdGVZKC01MCUpO3dpZHRoOmNhbGMoNTAlIC0gMS40cmVtKTtjb250ZW50OicgJztib3JkZXItYm90dG9tOi42cmVtIHNvbGlkICNhZWFlYWV9LmMtc3RlcC10cmFja2VyX19zdGVwOmJlZm9yZXtsZWZ0OjB9LmMtc3RlcC10cmFja2VyX19zdGVwOmFmdGVye3JpZ2h0OjB9LmMtc3RlcC10cmFja2VyIC5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpmaXJzdC1jaGlsZDpiZWZvcmUsLmMtc3RlcC10cmFja2VyIC5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpsYXN0LWNoaWxkOmFmdGVye2NvbnRlbnQ6bm9uZX0uYy1zdGVwLXRyYWNrZXJfX2xhYmVse3Bvc2l0aW9uOmFic29sdXRlO2JvdHRvbTotM3JlbTtsZWZ0OjA7Zm9udC1zaXplOjEuN3JlbTt3aWR0aDoxMDAlO2hlaWdodDoyLjVyZW07Zm9udC1mYW1pbHk6VGVsdXMgUmVndWxhcixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNjY2fUBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6NTk5cHgpey5jLXN0ZXAtdHJhY2tlcl9fbGFiZWx7ZGlzcGxheTpub25lfX0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSAuYy1zdGVwLXRyYWNrZXJfX2xhYmVse2ZvbnQtZmFtaWx5OlRlbHVzIE1lZGl1bSxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNDA4MDAwfS5jLXN0ZXAtdHJhY2tlcl9faWNvbntmb250LXNpemU6M3JlbTtjb2xvcjojYWVhZWFlfS5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlIC5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5jLXN0ZXAtdHJhY2tlcl9fc2V0cC0tY2xpY2thYmxlIGF7Y3Vyc29yOnBvaW50ZXJ9LmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZTphZnRlcntib3JkZXItYm90dG9tOi42cmVtIHNvbGlkICM1N2E3MDh9LmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3JlLC5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZXtjb2xvcjojNTdhNzA4fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUrLmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmU6YmVmb3JlLC5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUrLmMtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZTpiZWZvcmV7Ym9yZGVyLWJvdHRvbTouNnJlbSBzb2xpZCAjNTdhNzA4fS5jLXN0ZXAtdHJhY2tlci1tb2JpbGUtbGFiZWx7Zm9udC1zaXplOjEuN3JlbTt0ZXh0LWFsaWduOmNlbnRlcjtmb250LWZhbWlseTpUZWx1cyBSZWd1bGFyLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiM2NjZ9QG1lZGlhIHNjcmVlbiBhbmQgKG1pbi13aWR0aDo2MDBweCl7LmMtc3RlcC10cmFja2VyLW1vYmlsZS1sYWJlbHtkaXNwbGF5Om5vbmV9fS5jLXN0ZXAtdHJhY2tlci1tb2JpbGUtbGFiZWxfX3N0ZXB7Zm9udC1mYW1pbHk6VGVsdXMgTWVkaXVtLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2NvbG9yOiM0MDgwMDB9XCIsIFwiXCJdKTtcblx0XG5cdC8vIGV4cG9ydHNcblxuXG4vKioqLyB9LFxuLyogODIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMSkoKTtcblx0Ly8gaW1wb3J0c1xuXHRcblx0XG5cdC8vIG1vZHVsZVxuXHRleHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy10YWJzX19oZWFkZXJ7bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDttYXJnaW46MDtkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4fS5jLXRhYnNfX2hlYWRlci1pdGVte21hcmdpbi10b3A6MnB4O2hlaWdodDo0NXB4O3BhZGRpbmc6MCAycHg7LXdlYmtpdC1ib3gtZmxleDoxOy1tcy1mbGV4OjE7ZmxleDoxfS5jLXRhYnNfX2hlYWRlci1pdGVtIGF7YmFja2dyb3VuZC1jb2xvcjojZTJlMmUyO3RleHQtZGVjb3JhdGlvbjpub25lO3BhZGRpbmc6MTNweCAyMHB4O2NvbG9yOiM0OTE2NmQ7ZGlzcGxheTpibG9ja30uYy10YWJzX19oZWFkZXItaXRlbS0tYWN0aXZle21hcmdpbi10b3A6MXB4O2hlaWdodDo0NnB4O2JhY2tncm91bmQtY29sb3I6I2ZmZjtib3JkZXItdG9wOjFweCBzb2xpZCAjZTJlMmUyO2JvcmRlci1sZWZ0OjFweCBzb2xpZCAjZTJlMmUyO2JvcmRlci1yaWdodDoxcHggc29saWQgI2UyZTJlMn0uYy10YWJzX19oZWFkZXItaXRlbS0tYWN0aXZlIGF7YmFja2dyb3VuZC1jb2xvcjojZmZmO2NvbG9yOiMzMzN9LmMtdGFic19faGVhZGVyLWl0ZW0tLWRpc2FibGVkIGF7YmFja2dyb3VuZC1jb2xvcjojZjVmNmY3O2NvbG9yOiNhZWFlYWU7Y3Vyc29yOm5vdC1hbGxvd2VkfS5jLXRhYnNfX2JvZHl7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlcjoxcHggc29saWQgI2UyZTJlMjttYXJnaW4tdG9wOi0xcHg7cGFkZGluZzoyMHB4fS5jLXRhYnNfX3BhbmV7ZGlzcGxheTpibG9jaztib3JkZXItdG9wOm5vbmU7b3BhY2l0eTowO2hlaWdodDowO292ZXJmbG93OmhpZGRlbjtwYWRkaW5nOjAgNXB4Oy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjVzIGVhc2Utb3V0O3RyYW5zaXRpb246YWxsIC41cyBlYXNlLW91dH0uYy10YWJzX19wYW5lLS1hY3RpdmV7b3BhY2l0eToxO3BhZGRpbmc6NXB4O2hlaWdodDphdXRvfVwiLCBcIlwiXSk7XG5cdFxuXHQvLyBleHBvcnRzXG5cblxuLyoqKi8gfSxcbi8qIDgzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgcmVxdWlyZTt2YXIgX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX187LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKHByb2Nlc3MsIGdsb2JhbCwgbW9kdWxlKSB7LyohXG5cdCAqIEBvdmVydmlldyBlczYtcHJvbWlzZSAtIGEgdGlueSBpbXBsZW1lbnRhdGlvbiBvZiBQcm9taXNlcy9BKy5cblx0ICogQGNvcHlyaWdodCBDb3B5cmlnaHQgKGMpIDIwMTQgWWVodWRhIEthdHosIFRvbSBEYWxlLCBTdGVmYW4gUGVubmVyIGFuZCBjb250cmlidXRvcnMgKENvbnZlcnNpb24gdG8gRVM2IEFQSSBieSBKYWtlIEFyY2hpYmFsZClcblx0ICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuXHQgKiAgICAgICAgICAgIFNlZSBodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vamFrZWFyY2hpYmFsZC9lczYtcHJvbWlzZS9tYXN0ZXIvTElDRU5TRVxuXHQgKiBAdmVyc2lvbiAgIDMuMi4xXG5cdCAqL1xuXHRcblx0KGZ1bmN0aW9uKCkge1xuXHQgICAgXCJ1c2Ugc3RyaWN0XCI7XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24oeCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbicgfHwgKHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oeCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc01heWJlVGhlbmFibGUoeCkge1xuXHQgICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXk7XG5cdCAgICBpZiAoIUFycmF5LmlzQXJyYXkpIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG5cdCAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh4KSA9PT0gJ1tvYmplY3QgQXJyYXldJztcblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkX2lzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkgPSBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5O1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPSAwO1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQ7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuO1xuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbl0gPSBjYWxsYmFjaztcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2xpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gKyAxXSA9IGFyZztcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiArPSAyO1xuXHQgICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9PT0gMikge1xuXHQgICAgICAgIC8vIElmIGxlbiBpcyAyLCB0aGF0IG1lYW5zIHRoYXQgd2UgbmVlZCB0byBzY2hlZHVsZSBhbiBhc3luYyBmbHVzaC5cblx0ICAgICAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuXHQgICAgICAgIC8vIHdpbGwgYmUgcHJvY2Vzc2VkIGJ5IHRoaXMgZmx1c2ggdGhhdCB3ZSBhcmUgc2NoZWR1bGluZy5cblx0ICAgICAgICBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4obGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2goKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyKHNjaGVkdWxlRm4pIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGN1c3RvbVNjaGVkdWxlckZuID0gc2NoZWR1bGVGbjtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcChhc2FwRm4pIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAgPSBhc2FwRm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93IHx8IHt9O1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlciA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyR2xvYmFsLk11dGF0aW9uT2JzZXJ2ZXIgfHwgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwuV2ViS2l0TXV0YXRpb25PYnNlcnZlcjtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cdFxuXHQgICAgLy8gdGVzdCBmb3Igd2ViIHdvcmtlciBidXQgbm90IGluIElFMTBcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmXG5cdCAgICAgIHR5cGVvZiBpbXBvcnRTY3JpcHRzICE9PSAndW5kZWZpbmVkJyAmJlxuXHQgICAgICB0eXBlb2YgTWVzc2FnZUNoYW5uZWwgIT09ICd1bmRlZmluZWQnO1xuXHRcblx0ICAgIC8vIG5vZGVcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VOZXh0VGljaygpIHtcblx0ICAgICAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG5cdCAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vY3Vqb2pzL3doZW4vaXNzdWVzLzQxMCBmb3IgZGV0YWlsc1xuXHQgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHZlcnR4XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlVmVydHhUaW1lcigpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTXV0YXRpb25PYnNlcnZlcigpIHtcblx0ICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuXHQgICAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgbGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG5cdCAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJycpO1xuXHQgICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblx0XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgICAgICBub2RlLmRhdGEgPSAoaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDIpO1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHdlYiB3b3JrZXJcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNZXNzYWdlQ2hhbm5lbCgpIHtcblx0ICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcblx0ICAgICAgY2hhbm5lbC5wb3J0MS5vbm1lc3NhZ2UgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2g7XG5cdCAgICAgIHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpIHtcblx0ICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHNldFRpbWVvdXQobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoLCAxKTtcblx0ICAgICAgfTtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlID0gbmV3IEFycmF5KDEwMDApO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKCkge1xuXHQgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW47IGkrPTIpIHtcblx0ICAgICAgICB2YXIgY2FsbGJhY2sgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaV07XG5cdCAgICAgICAgdmFyIGFyZyA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpKzFdO1xuXHRcblx0ICAgICAgICBjYWxsYmFjayhhcmcpO1xuXHRcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaV0gPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2krMV0gPSB1bmRlZmluZWQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPSAwO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhdHRlbXB0VmVydHgoKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdmFyIHIgPSByZXF1aXJlO1xuXHQgICAgICAgIHZhciB2ZXJ0eCA9IF9fd2VicGFja19yZXF1aXJlX18oMjIwKTtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcblx0ICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVZlcnR4VGltZXIoKTtcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2g7XG5cdCAgICAvLyBEZWNpZGUgd2hhdCBhc3luYyBtZXRob2QgdG8gdXNlIHRvIHRyaWdnZXJpbmcgcHJvY2Vzc2luZyBvZiBxdWV1ZWQgY2FsbGJhY2tzOlxuXHQgICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUpIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTmV4dFRpY2soKTtcblx0ICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcblx0ICAgIH0gZWxzZSBpZiAobGliJGVzNiRwcm9taXNlJGFzYXAkJGlzV29ya2VyKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCk7XG5cdCAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgXCJmdW5jdGlvblwiID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlU2V0VGltZW91dCgpO1xuXHQgICAgfVxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHRoZW4kJHRoZW4ob25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcblx0ICAgICAgdmFyIHBhcmVudCA9IHRoaXM7XG5cdFxuXHQgICAgICB2YXIgY2hpbGQgPSBuZXcgdGhpcy5jb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblx0XG5cdCAgICAgIGlmIChjaGlsZFtsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbWFrZVByb21pc2UoY2hpbGQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgc3RhdGUgPSBwYXJlbnQuX3N0YXRlO1xuXHRcblx0ICAgICAgaWYgKHN0YXRlKSB7XG5cdCAgICAgICAgdmFyIGNhbGxiYWNrID0gYXJndW1lbnRzW3N0YXRlIC0gMV07XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAoZnVuY3Rpb24oKXtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHN0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gY2hpbGQ7XG5cdCAgICB9XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkdGhlbiQkdGhlbjtcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmUob2JqZWN0KSB7XG5cdCAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAob2JqZWN0ICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnICYmIG9iamVjdC5jb25zdHJ1Y3RvciA9PT0gQ29uc3RydWN0b3IpIHtcblx0ICAgICAgICByZXR1cm4gb2JqZWN0O1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBDb25zdHJ1Y3RvcihsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKTtcblx0ICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuXHQgICAgICByZXR1cm4gcHJvbWlzZTtcblx0ICAgIH1cblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkcmVzb2x2ZTtcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDE2KTtcblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKCkge31cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAgID0gdm9pZCAwO1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCA9IDE7XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQgID0gMjtcblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IgPSBuZXcgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKTtcblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzZWxmRnVsZmlsbG1lbnQoKSB7XG5cdCAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRjYW5ub3RSZXR1cm5Pd24oKSB7XG5cdCAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKCdBIHByb21pc2VzIGNhbGxiYWNrIGNhbm5vdCByZXR1cm4gdGhhdCBzYW1lIHByb21pc2UuJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbihwcm9taXNlKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbjtcblx0ICAgICAgfSBjYXRjaChlcnJvcikge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SLmVycm9yID0gZXJyb3I7XG5cdCAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5VGhlbih0aGVuLCB2YWx1ZSwgZnVsZmlsbG1lbnRIYW5kbGVyLCByZWplY3Rpb25IYW5kbGVyKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuXHQgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICByZXR1cm4gZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbikge1xuXHQgICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAoZnVuY3Rpb24ocHJvbWlzZSkge1xuXHQgICAgICAgIHZhciBzZWFsZWQgPSBmYWxzZTtcblx0ICAgICAgICB2YXIgZXJyb3IgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlUaGVuKHRoZW4sIHRoZW5hYmxlLCBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgICAgaWYgKHNlYWxlZCkgeyByZXR1cm47IH1cblx0ICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG5cdCAgICAgICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG5cdCAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAgICAgICBpZiAoc2VhbGVkKSB7IHJldHVybjsgfVxuXHQgICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICAgICAgICB9LCAnU2V0dGxlOiAnICsgKHByb21pc2UuX2xhYmVsIHx8ICcgdW5rbm93biBwcm9taXNlJykpO1xuXHRcblx0ICAgICAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuXHQgICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlcnJvcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LCBwcm9taXNlKTtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSkge1xuXHQgICAgICBpZiAodGhlbmFibGUuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuXHQgICAgICB9IGVsc2UgaWYgKHRoZW5hYmxlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgdGhlbmFibGUuX3Jlc3VsdCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc3Vic2NyaWJlKHRoZW5hYmxlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuKSB7XG5cdCAgICAgIGlmIChtYXliZVRoZW5hYmxlLmNvbnN0cnVjdG9yID09PSBwcm9taXNlLmNvbnN0cnVjdG9yICYmXG5cdCAgICAgICAgICB0aGVuID09PSBsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCAmJlxuXHQgICAgICAgICAgY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU93blRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmICh0aGVuID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUikge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SLmVycm9yKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKHRoZW4gPT09IHVuZGVmaW5lZCkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbih0aGVuKSkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlRm9yZWlnblRoZW5hYmxlKHByb21pc2UsIG1heWJlVGhlbmFibGUsIHRoZW4pO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIG1heWJlVGhlbmFibGUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcblx0ICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxmaWxsbWVudCgpKTtcblx0ICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCB2YWx1ZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZ2V0VGhlbih2YWx1ZSkpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaFJlamVjdGlvbihwcm9taXNlKSB7XG5cdCAgICAgIGlmIChwcm9taXNlLl9vbmVycm9yKSB7XG5cdCAgICAgICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoKHByb21pc2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcblx0ICAgICAgaWYgKHByb21pc2UuX3N0YXRlICE9PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HKSB7IHJldHVybjsgfVxuXHRcblx0ICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG5cdCAgICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEO1xuXHRcblx0ICAgICAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gsIHByb21pc2UpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHJlYXNvbikge1xuXHQgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHsgcmV0dXJuOyB9XG5cdCAgICAgIHByb21pc2UuX3N0YXRlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQ7XG5cdCAgICAgIHByb21pc2UuX3Jlc3VsdCA9IHJlYXNvbjtcblx0XG5cdCAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2hSZWplY3Rpb24sIHByb21pc2UpO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwYXJlbnQsIGNoaWxkLCBvbkZ1bGZpbGxtZW50LCBvblJlamVjdGlvbikge1xuXHQgICAgICB2YXIgc3Vic2NyaWJlcnMgPSBwYXJlbnQuX3N1YnNjcmliZXJzO1xuXHQgICAgICB2YXIgbGVuZ3RoID0gc3Vic2NyaWJlcnMubGVuZ3RoO1xuXHRcblx0ICAgICAgcGFyZW50Ll9vbmVycm9yID0gbnVsbDtcblx0XG5cdCAgICAgIHN1YnNjcmliZXJzW2xlbmd0aF0gPSBjaGlsZDtcblx0ICAgICAgc3Vic2NyaWJlcnNbbGVuZ3RoICsgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRlVMRklMTEVEXSA9IG9uRnVsZmlsbG1lbnQ7XG5cdCAgICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEXSAgPSBvblJlamVjdGlvbjtcblx0XG5cdCAgICAgIGlmIChsZW5ndGggPT09IDAgJiYgcGFyZW50Ll9zdGF0ZSkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gsIHBhcmVudCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoKHByb21pc2UpIHtcblx0ICAgICAgdmFyIHN1YnNjcmliZXJzID0gcHJvbWlzZS5fc3Vic2NyaWJlcnM7XG5cdCAgICAgIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cdFxuXHQgICAgICBpZiAoc3Vic2NyaWJlcnMubGVuZ3RoID09PSAwKSB7IHJldHVybjsgfVxuXHRcblx0ICAgICAgdmFyIGNoaWxkLCBjYWxsYmFjaywgZGV0YWlsID0gcHJvbWlzZS5fcmVzdWx0O1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuXHQgICAgICAgIGNoaWxkID0gc3Vic2NyaWJlcnNbaV07XG5cdCAgICAgICAgY2FsbGJhY2sgPSBzdWJzY3JpYmVyc1tpICsgc2V0dGxlZF07XG5cdFxuXHQgICAgICAgIGlmIChjaGlsZCkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgY2hpbGQsIGNhbGxiYWNrLCBkZXRhaWwpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBjYWxsYmFjayhkZXRhaWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgcHJvbWlzZS5fc3Vic2NyaWJlcnMubGVuZ3RoID0gMDtcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpIHtcblx0ICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpO1xuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4gY2FsbGJhY2soZGV0YWlsKTtcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcblx0ICAgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW52b2tlQ2FsbGJhY2soc2V0dGxlZCwgcHJvbWlzZSwgY2FsbGJhY2ssIGRldGFpbCkge1xuXHQgICAgICB2YXIgaGFzQ2FsbGJhY2sgPSBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuXHQgICAgICAgICAgdmFsdWUsIGVycm9yLCBzdWNjZWVkZWQsIGZhaWxlZDtcblx0XG5cdCAgICAgIGlmIChoYXNDYWxsYmFjaykge1xuXHQgICAgICAgIHZhbHVlID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCk7XG5cdFxuXHQgICAgICAgIGlmICh2YWx1ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SKSB7XG5cdCAgICAgICAgICBmYWlsZWQgPSB0cnVlO1xuXHQgICAgICAgICAgZXJyb3IgPSB2YWx1ZS5lcnJvcjtcblx0ICAgICAgICAgIHZhbHVlID0gbnVsbDtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgc3VjY2VlZGVkID0gdHJ1ZTtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93bigpKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdFxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHZhbHVlID0gZGV0YWlsO1xuXHQgICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuXHQgICAgICAgIC8vIG5vb3Bcblx0ICAgICAgfSBlbHNlIGlmIChoYXNDYWxsYmFjayAmJiBzdWNjZWVkZWQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIGlmIChmYWlsZWQpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZXJyb3IpO1xuXHQgICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlKHByb21pc2UsIHJlc29sdmVyKSB7XG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpe1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCB2YWx1ZSk7XG5cdCAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0UHJvbWlzZShyZWFzb24pIHtcblx0ICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9IGNhdGNoKGUpIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQgPSAwO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbmV4dElkKCkge1xuXHQgICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQrKztcblx0ICAgIH1cblx0XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRtYWtlUHJvbWlzZShwcm9taXNlKSB7XG5cdCAgICAgIHByb21pc2VbbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRF0gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpZCsrO1xuXHQgICAgICBwcm9taXNlLl9zdGF0ZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuXHQgICAgICBwcm9taXNlLl9zdWJzY3JpYmVycyA9IFtdO1xuXHQgICAgfVxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsKGVudHJpZXMpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkZGVmYXVsdCh0aGlzLCBlbnRyaWVzKS5wcm9taXNlO1xuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJGFsbCQkYWxsO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZShlbnRyaWVzKSB7XG5cdCAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAoIWxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheShlbnRyaWVzKSkge1xuXHQgICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhbiBhcnJheSB0byByYWNlLicpKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xuXHQgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuXHQgICAgICAgICAgICBDb25zdHJ1Y3Rvci5yZXNvbHZlKGVudHJpZXNbaV0pLnRoZW4ocmVzb2x2ZSwgcmVqZWN0KTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlO1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3QocmVhc29uKSB7XG5cdCAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG5cdCAgICAgIHZhciBDb25zdHJ1Y3RvciA9IHRoaXM7XG5cdCAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXHQgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcblx0ICAgICAgcmV0dXJuIHByb21pc2U7XG5cdCAgICB9XG5cdCAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3Q7XG5cdFxuXHRcblx0ICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyKCkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGEgcmVzb2x2ZXIgZnVuY3Rpb24gYXMgdGhlIGZpcnN0IGFyZ3VtZW50IHRvIHRoZSBwcm9taXNlIGNvbnN0cnVjdG9yJyk7XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3KCkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiRmFpbGVkIHRvIGNvbnN0cnVjdCAnUHJvbWlzZSc6IFBsZWFzZSB1c2UgdGhlICduZXcnIG9wZXJhdG9yLCB0aGlzIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO1xuXHQgICAgfVxuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlO1xuXHQgICAgLyoqXG5cdCAgICAgIFByb21pc2Ugb2JqZWN0cyByZXByZXNlbnQgdGhlIGV2ZW50dWFsIHJlc3VsdCBvZiBhbiBhc3luY2hyb25vdXMgb3BlcmF0aW9uLiBUaGVcblx0ICAgICAgcHJpbWFyeSB3YXkgb2YgaW50ZXJhY3Rpbmcgd2l0aCBhIHByb21pc2UgaXMgdGhyb3VnaCBpdHMgYHRoZW5gIG1ldGhvZCwgd2hpY2hcblx0ICAgICAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG5cdCAgICAgIHdoeSB0aGUgcHJvbWlzZSBjYW5ub3QgYmUgZnVsZmlsbGVkLlxuXHRcblx0ICAgICAgVGVybWlub2xvZ3lcblx0ICAgICAgLS0tLS0tLS0tLS1cblx0XG5cdCAgICAgIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG5cdCAgICAgIC0gYHRoZW5hYmxlYCBpcyBhbiBvYmplY3Qgb3IgZnVuY3Rpb24gdGhhdCBkZWZpbmVzIGEgYHRoZW5gIG1ldGhvZC5cblx0ICAgICAgLSBgdmFsdWVgIGlzIGFueSBsZWdhbCBKYXZhU2NyaXB0IHZhbHVlIChpbmNsdWRpbmcgdW5kZWZpbmVkLCBhIHRoZW5hYmxlLCBvciBhIHByb21pc2UpLlxuXHQgICAgICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cblx0ICAgICAgLSBgcmVhc29uYCBpcyBhIHZhbHVlIHRoYXQgaW5kaWNhdGVzIHdoeSBhIHByb21pc2Ugd2FzIHJlamVjdGVkLlxuXHQgICAgICAtIGBzZXR0bGVkYCB0aGUgZmluYWwgcmVzdGluZyBzdGF0ZSBvZiBhIHByb21pc2UsIGZ1bGZpbGxlZCBvciByZWplY3RlZC5cblx0XG5cdCAgICAgIEEgcHJvbWlzZSBjYW4gYmUgaW4gb25lIG9mIHRocmVlIHN0YXRlczogcGVuZGluZywgZnVsZmlsbGVkLCBvciByZWplY3RlZC5cblx0XG5cdCAgICAgIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG5cdCAgICAgIHN0YXRlLiAgUHJvbWlzZXMgdGhhdCBhcmUgcmVqZWN0ZWQgaGF2ZSBhIHJlamVjdGlvbiByZWFzb24gYW5kIGFyZSBpbiB0aGVcblx0ICAgICAgcmVqZWN0ZWQgc3RhdGUuICBBIGZ1bGZpbGxtZW50IHZhbHVlIGlzIG5ldmVyIGEgdGhlbmFibGUuXG5cdFxuXHQgICAgICBQcm9taXNlcyBjYW4gYWxzbyBiZSBzYWlkIHRvICpyZXNvbHZlKiBhIHZhbHVlLiAgSWYgdGhpcyB2YWx1ZSBpcyBhbHNvIGFcblx0ICAgICAgcHJvbWlzZSwgdGhlbiB0aGUgb3JpZ2luYWwgcHJvbWlzZSdzIHNldHRsZWQgc3RhdGUgd2lsbCBtYXRjaCB0aGUgdmFsdWUnc1xuXHQgICAgICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcblx0ICAgICAgaXRzZWxmIHJlamVjdCwgYW5kIGEgcHJvbWlzZSB0aGF0ICpyZXNvbHZlcyogYSBwcm9taXNlIHRoYXQgZnVsZmlsbHMgd2lsbFxuXHQgICAgICBpdHNlbGYgZnVsZmlsbC5cblx0XG5cdFxuXHQgICAgICBCYXNpYyBVc2FnZTpcblx0ICAgICAgLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuXHQgICAgICAgIC8vIG9uIHN1Y2Nlc3Ncblx0ICAgICAgICByZXNvbHZlKHZhbHVlKTtcblx0XG5cdCAgICAgICAgLy8gb24gZmFpbHVyZVxuXHQgICAgICAgIHJlamVjdChyZWFzb24pO1xuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIHByb21pc2UudGhlbihmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50XG5cdCAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuXHQgICAgICAgIC8vIG9uIHJlamVjdGlvblxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBBZHZhbmNlZCBVc2FnZTpcblx0ICAgICAgLS0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG5cdCAgICAgIGBYTUxIdHRwUmVxdWVzdGBzLlxuXHRcblx0ICAgICAgYGBganNcblx0ICAgICAgZnVuY3Rpb24gZ2V0SlNPTih1cmwpIHtcblx0ICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KXtcblx0ICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblx0XG5cdCAgICAgICAgICB4aHIub3BlbignR0VUJywgdXJsKTtcblx0ICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuXHQgICAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdqc29uJztcblx0ICAgICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdBY2NlcHQnLCAnYXBwbGljYXRpb24vanNvbicpO1xuXHQgICAgICAgICAgeGhyLnNlbmQoKTtcblx0XG5cdCAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVyKCkge1xuXHQgICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcblx0ICAgICAgICAgICAgICBpZiAodGhpcy5zdGF0dXMgPT09IDIwMCkge1xuXHQgICAgICAgICAgICAgICAgcmVzb2x2ZSh0aGlzLnJlc3BvbnNlKTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcignZ2V0SlNPTjogYCcgKyB1cmwgKyAnYCBmYWlsZWQgd2l0aCBzdGF0dXM6IFsnICsgdGhpcy5zdGF0dXMgKyAnXScpKTtcblx0ICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH07XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGdldEpTT04oJy9wb3N0cy5qc29uJykudGhlbihmdW5jdGlvbihqc29uKSB7XG5cdCAgICAgICAgLy8gb24gZnVsZmlsbG1lbnRcblx0ICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAgICAgLy8gb24gcmVqZWN0aW9uXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBQcm9taXNlLmFsbChbXG5cdCAgICAgICAgZ2V0SlNPTignL3Bvc3RzJyksXG5cdCAgICAgICAgZ2V0SlNPTignL2NvbW1lbnRzJylcblx0ICAgICAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuXHQgICAgICAgIHZhbHVlc1swXSAvLyA9PiBwb3N0c0pTT05cblx0ICAgICAgICB2YWx1ZXNbMV0gLy8gPT4gY29tbWVudHNKU09OXG5cdFxuXHQgICAgICAgIHJldHVybiB2YWx1ZXM7XG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEBjbGFzcyBQcm9taXNlXG5cdCAgICAgIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG5cdCAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICAgICAgQGNvbnN0cnVjdG9yXG5cdCAgICAqL1xuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UocmVzb2x2ZXIpIHtcblx0ICAgICAgdGhpc1tsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5leHRJZCgpO1xuXHQgICAgICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcblx0ICAgICAgdGhpcy5fc3Vic2NyaWJlcnMgPSBbXTtcblx0XG5cdCAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wICE9PSByZXNvbHZlcikge1xuXHQgICAgICAgIHR5cGVvZiByZXNvbHZlciAhPT0gJ2Z1bmN0aW9uJyAmJiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkbmVlZHNSZXNvbHZlcigpO1xuXHQgICAgICAgIHRoaXMgaW5zdGFuY2VvZiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZSA/IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGluaXRpYWxpemVQcm9taXNlKHRoaXMsIHJlc29sdmVyKSA6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuYWxsID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0O1xuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucmFjZSA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJhY2UkJGRlZmF1bHQ7XG5cdCAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5yZXNvbHZlID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlamVjdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9zZXRTY2hlZHVsZXIgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0U2NoZWR1bGVyO1xuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuX3NldEFzYXAgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2V0QXNhcDtcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9hc2FwID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXA7XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UucHJvdG90eXBlID0ge1xuXHQgICAgICBjb25zdHJ1Y3RvcjogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UsXG5cdFxuXHQgICAgLyoqXG5cdCAgICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuXHQgICAgICB3aGljaCByZWdpc3RlcnMgY2FsbGJhY2tzIHRvIHJlY2VpdmUgZWl0aGVyIGEgcHJvbWlzZSdzIGV2ZW50dWFsIHZhbHVlIG9yIHRoZVxuXHQgICAgICByZWFzb24gd2h5IHRoZSBwcm9taXNlIGNhbm5vdCBiZSBmdWxmaWxsZWQuXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24odXNlcil7XG5cdCAgICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcblx0ICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKXtcblx0ICAgICAgICAvLyB1c2VyIGlzIHVuYXZhaWxhYmxlLCBhbmQgeW91IGFyZSBnaXZlbiB0aGUgcmVhc29uIHdoeVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBDaGFpbmluZ1xuXHQgICAgICAtLS0tLS0tLVxuXHRcblx0ICAgICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcblx0ICAgICAgcHJvbWlzZSBpcyByZXNvbHZlZCB3aXRoIHRoZSByZXR1cm4gdmFsdWUgb2YgdGhlIGZpcnN0IHByb21pc2UncyBmdWxmaWxsbWVudFxuXHQgICAgICBvciByZWplY3Rpb24gaGFuZGxlciwgb3IgcmVqZWN0ZWQgaWYgdGhlIGhhbmRsZXIgdGhyb3dzIGFuIGV4Y2VwdGlvbi5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHJldHVybiB1c2VyLm5hbWU7XG5cdCAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgICByZXR1cm4gJ2RlZmF1bHQgbmFtZSc7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG5cdCAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCBmdWxmaWxsZWQsIGB1c2VyTmFtZWAgd2lsbCBiZSB0aGUgdXNlcidzIG5hbWUsIG90aGVyd2lzZSBpdFxuXHQgICAgICAgIC8vIHdpbGwgYmUgYCdkZWZhdWx0IG5hbWUnYFxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScpO1xuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG5cdCAgICAgICAgLy8gSWYgYGZpbmRVc2VyYCByZWplY3RlZCwgYHJlYXNvbmAgd2lsbCBiZSAnYGZpbmRVc2VyYCByZWplY3RlZCBhbmQgd2UncmUgdW5oYXBweScuXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0ICAgICAgSWYgdGhlIGRvd25zdHJlYW0gcHJvbWlzZSBkb2VzIG5vdCBzcGVjaWZ5IGEgcmVqZWN0aW9uIGhhbmRsZXIsIHJlamVjdGlvbiByZWFzb25zIHdpbGwgYmUgcHJvcGFnYXRlZCBmdXJ0aGVyIGRvd25zdHJlYW0uXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgUGVkYWdvZ2ljYWxFeGNlcHRpb24oJ1Vwc3RyZWFtIGVycm9yJyk7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICAgICAgLy8gbmV2ZXIgcmVhY2hlZFxuXHQgICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcblx0ICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuXHQgICAgICAgIC8vIFRoZSBgUGVkZ2Fnb2NpYWxFeGNlcHRpb25gIGlzIHByb3BhZ2F0ZWQgYWxsIHRoZSB3YXkgZG93biB0byBoZXJlXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEFzc2ltaWxhdGlvblxuXHQgICAgICAtLS0tLS0tLS0tLS1cblx0XG5cdCAgICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG5cdCAgICAgIHJldHJpZXZlZCBhc3luY2hyb25vdXNseS4gVGhpcyBjYW4gYmUgYWNoaWV2ZWQgYnkgcmV0dXJuaW5nIGEgcHJvbWlzZSBpbiB0aGVcblx0ICAgICAgZnVsZmlsbG1lbnQgb3IgcmVqZWN0aW9uIGhhbmRsZXIuIFRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCB0aGVuIGJlIHBlbmRpbmdcblx0ICAgICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcblx0ICAgICAgICByZXR1cm4gZmluZENvbW1lbnRzQnlBdXRob3IodXNlcik7XG5cdCAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKGNvbW1lbnRzKSB7XG5cdCAgICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBJZiB0aGUgYXNzaW1saWF0ZWQgcHJvbWlzZSByZWplY3RzLCB0aGVuIHRoZSBkb3duc3RyZWFtIHByb21pc2Ugd2lsbCBhbHNvIHJlamVjdC5cblx0XG5cdCAgICAgIGBgYGpzXG5cdCAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbiAodXNlcikge1xuXHQgICAgICAgIHJldHVybiBmaW5kQ29tbWVudHNCeUF1dGhvcih1c2VyKTtcblx0ICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcblx0ICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIGZ1bGZpbGxzLCB3ZSdsbCBoYXZlIHRoZSB2YWx1ZSBoZXJlXG5cdCAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcblx0ICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIFNpbXBsZSBFeGFtcGxlXG5cdCAgICAgIC0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICAgIHZhciByZXN1bHQ7XG5cdFxuXHQgICAgICB0cnkge1xuXHQgICAgICAgIHJlc3VsdCA9IGZpbmRSZXN1bHQoKTtcblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgRXJyYmFjayBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmaW5kUmVzdWx0KGZ1bmN0aW9uKHJlc3VsdCwgZXJyKXtcblx0ICAgICAgICBpZiAoZXJyKSB7XG5cdCAgICAgICAgICAvLyBmYWlsdXJlXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIHN1Y2Nlc3Ncblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIFByb21pc2UgRXhhbXBsZTtcblx0XG5cdCAgICAgIGBgYGphdmFzY3JpcHRcblx0ICAgICAgZmluZFJlc3VsdCgpLnRoZW4oZnVuY3Rpb24ocmVzdWx0KXtcblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9KTtcblx0ICAgICAgYGBgXG5cdFxuXHQgICAgICBBZHZhbmNlZCBFeGFtcGxlXG5cdCAgICAgIC0tLS0tLS0tLS0tLS0tXG5cdFxuXHQgICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqYXZhc2NyaXB0XG5cdCAgICAgIHZhciBhdXRob3IsIGJvb2tzO1xuXHRcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG5cdCAgICAgICAgYm9va3MgID0gZmluZEJvb2tzQnlBdXRob3IoYXV0aG9yKTtcblx0ICAgICAgICAvLyBzdWNjZXNzXG5cdCAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG5cdCAgICAgICAgLy8gZmFpbHVyZVxuXHQgICAgICB9XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgRXJyYmFjayBFeGFtcGxlXG5cdFxuXHQgICAgICBgYGBqc1xuXHRcblx0ICAgICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuXHRcblx0ICAgICAgfVxuXHRcblx0ICAgICAgZnVuY3Rpb24gZmFpbHVyZShyZWFzb24pIHtcblx0XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGZpbmRBdXRob3IoZnVuY3Rpb24oYXV0aG9yLCBlcnIpe1xuXHQgICAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICAgIGZhaWx1cmUoZXJyKTtcblx0ICAgICAgICAgIC8vIGZhaWx1cmVcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgZmluZEJvb29rc0J5QXV0aG9yKGF1dGhvciwgZnVuY3Rpb24oYm9va3MsIGVycikge1xuXHQgICAgICAgICAgICAgIGlmIChlcnIpIHtcblx0ICAgICAgICAgICAgICAgIGZhaWx1cmUoZXJyKTtcblx0ICAgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICAgICAgZm91bmRCb29rcyhib29rcyk7XG5cdCAgICAgICAgICAgICAgICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG5cdCAgICAgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9KTtcblx0ICAgICAgICAgIH0gY2F0Y2goZXJyb3IpIHtcblx0ICAgICAgICAgICAgZmFpbHVyZShlcnIpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gc3VjY2Vzc1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXHRcblx0ICAgICAgYGBgamF2YXNjcmlwdFxuXHQgICAgICBmaW5kQXV0aG9yKCkuXG5cdCAgICAgICAgdGhlbihmaW5kQm9va3NCeUF1dGhvcikuXG5cdCAgICAgICAgdGhlbihmdW5jdGlvbihib29rcyl7XG5cdCAgICAgICAgICAvLyBmb3VuZCBib29rc1xuXHQgICAgICB9KS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuXHQgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG5cdCAgICAgIH0pO1xuXHQgICAgICBgYGBcblx0XG5cdCAgICAgIEBtZXRob2QgdGhlblxuXHQgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvbkZ1bGZpbGxlZFxuXHQgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGVkXG5cdCAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cblx0ICAgICAgQHJldHVybiB7UHJvbWlzZX1cblx0ICAgICovXG5cdCAgICAgIHRoZW46IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0LFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG5cdCAgICAgIGFzIHRoZSBjYXRjaCBibG9jayBvZiBhIHRyeS9jYXRjaCBzdGF0ZW1lbnQuXG5cdFxuXHQgICAgICBgYGBqc1xuXHQgICAgICBmdW5jdGlvbiBmaW5kQXV0aG9yKCl7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZG4ndCBmaW5kIHRoYXQgYXV0aG9yJyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIHN5bmNocm9ub3VzXG5cdCAgICAgIHRyeSB7XG5cdCAgICAgICAgZmluZEF1dGhvcigpO1xuXHQgICAgICB9IGNhdGNoKHJlYXNvbikge1xuXHQgICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcblx0ICAgICAgZmluZEF1dGhvcigpLmNhdGNoKGZ1bmN0aW9uKHJlYXNvbil7XG5cdCAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3Jvbmdcblx0ICAgICAgfSk7XG5cdCAgICAgIGBgYFxuXHRcblx0ICAgICAgQG1ldGhvZCBjYXRjaFxuXHQgICAgICBAcGFyYW0ge0Z1bmN0aW9ufSBvblJlamVjdGlvblxuXHQgICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG5cdCAgICAgIEByZXR1cm4ge1Byb21pc2V9XG5cdCAgICAqL1xuXHQgICAgICAnY2F0Y2gnOiBmdW5jdGlvbihvblJlamVjdGlvbikge1xuXHQgICAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgICAgdmFyIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3I7XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvcihDb25zdHJ1Y3RvciwgaW5wdXQpIHtcblx0ICAgICAgdGhpcy5faW5zdGFuY2VDb25zdHJ1Y3RvciA9IENvbnN0cnVjdG9yO1xuXHQgICAgICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cdFxuXHQgICAgICBpZiAoIXRoaXMucHJvbWlzZVtsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSkge1xuXHQgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkoaW5wdXQpKSB7XG5cdCAgICAgICAgdGhpcy5faW5wdXQgICAgID0gaW5wdXQ7XG5cdCAgICAgICAgdGhpcy5sZW5ndGggICAgID0gaW5wdXQubGVuZ3RoO1xuXHQgICAgICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblx0XG5cdCAgICAgICAgdGhpcy5fcmVzdWx0ID0gbmV3IEFycmF5KHRoaXMubGVuZ3RoKTtcblx0XG5cdCAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09PSAwKSB7XG5cdCAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLmxlbmd0aCB8fCAwO1xuXHQgICAgICAgICAgdGhpcy5fZW51bWVyYXRlKCk7XG5cdCAgICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG5cdCAgICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QodGhpcy5wcm9taXNlLCBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkdmFsaWRhdGlvbkVycm9yKCkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJHZhbGlkYXRpb25FcnJvcigpIHtcblx0ICAgICAgcmV0dXJuIG5ldyBFcnJvcignQXJyYXkgTWV0aG9kcyBtdXN0IGJlIHByb3ZpZGVkIGFuIEFycmF5Jyk7XG5cdCAgICB9XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9lbnVtZXJhdGUgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGxlbmd0aCAgPSB0aGlzLmxlbmd0aDtcblx0ICAgICAgdmFyIGlucHV0ICAgPSB0aGlzLl9pbnB1dDtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyB0aGlzLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORyAmJiBpIDwgbGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB0aGlzLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZWFjaEVudHJ5ID0gZnVuY3Rpb24oZW50cnksIGkpIHtcblx0ICAgICAgdmFyIGMgPSB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yO1xuXHQgICAgICB2YXIgcmVzb2x2ZSA9IGMucmVzb2x2ZTtcblx0XG5cdCAgICAgIGlmIChyZXNvbHZlID09PSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0KSB7XG5cdCAgICAgICAgdmFyIHRoZW4gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKGVudHJ5KTtcblx0XG5cdCAgICAgICAgaWYgKHRoZW4gPT09IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0ICYmXG5cdCAgICAgICAgICAgIGVudHJ5Ll9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuXHQgICAgICAgICAgdGhpcy5fc2V0dGxlZEF0KGVudHJ5Ll9zdGF0ZSwgaSwgZW50cnkuX3Jlc3VsdCk7XG5cdCAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgdGhlbiAhPT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG5cdCAgICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSBlbnRyeTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGMgPT09IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0KSB7XG5cdCAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBlbnRyeSwgdGhlbik7XG5cdCAgICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocHJvbWlzZSwgaSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChuZXcgYyhmdW5jdGlvbihyZXNvbHZlKSB7IHJlc29sdmUoZW50cnkpOyB9KSwgaSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChyZXNvbHZlKGVudHJ5KSwgaSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl9zZXR0bGVkQXQgPSBmdW5jdGlvbihzdGF0ZSwgaSwgdmFsdWUpIHtcblx0ICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cdFxuXHQgICAgICBpZiAocHJvbWlzZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHtcblx0ICAgICAgICB0aGlzLl9yZW1haW5pbmctLTtcblx0XG5cdCAgICAgICAgaWYgKHN0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRSRUpFQ1RFRCkge1xuXHQgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gdmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG5cdCAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fd2lsbFNldHRsZUF0ID0gZnVuY3Rpb24ocHJvbWlzZSwgaSkge1xuXHQgICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cdFxuXHQgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocHJvbWlzZSwgdW5kZWZpbmVkLCBmdW5jdGlvbih2YWx1ZSkge1xuXHQgICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQsIGksIHZhbHVlKTtcblx0ICAgICAgfSwgZnVuY3Rpb24ocmVhc29uKSB7XG5cdCAgICAgICAgZW51bWVyYXRvci5fc2V0dGxlZEF0KGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVELCBpLCByZWFzb24pO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdCAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsKCkge1xuXHQgICAgICB2YXIgbG9jYWw7XG5cdFxuXHQgICAgICBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgIGxvY2FsID0gZ2xvYmFsO1xuXHQgICAgICB9IGVsc2UgaWYgKHR5cGVvZiBzZWxmICE9PSAndW5kZWZpbmVkJykge1xuXHQgICAgICAgICAgbG9jYWwgPSBzZWxmO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgICAgICBsb2NhbCA9IEZ1bmN0aW9uKCdyZXR1cm4gdGhpcycpKCk7XG5cdCAgICAgICAgICB9IGNhdGNoIChlKSB7XG5cdCAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdwb2x5ZmlsbCBmYWlsZWQgYmVjYXVzZSBnbG9iYWwgb2JqZWN0IGlzIHVuYXZhaWxhYmxlIGluIHRoaXMgZW52aXJvbm1lbnQnKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIFAgPSBsb2NhbC5Qcm9taXNlO1xuXHRcblx0ICAgICAgaWYgKFAgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKFAucmVzb2x2ZSgpKSA9PT0gJ1tvYmplY3QgUHJvbWlzZV0nICYmICFQLmNhc3QpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGxvY2FsLlByb21pc2UgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdDtcblx0ICAgIH1cblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJHBvbHlmaWxsO1xuXHRcblx0ICAgIHZhciBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlID0ge1xuXHQgICAgICAnUHJvbWlzZSc6IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0LFxuXHQgICAgICAncG9seWZpbGwnOiBsaWIkZXM2JHByb21pc2UkcG9seWZpbGwkJGRlZmF1bHRcblx0ICAgIH07XG5cdFxuXHQgICAgLyogZ2xvYmFsIGRlZmluZTp0cnVlIG1vZHVsZTp0cnVlIHdpbmRvdzogdHJ1ZSAqL1xuXHQgICAgaWYgKFwiZnVuY3Rpb25cIiA9PT0gJ2Z1bmN0aW9uJyAmJiBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxOClbJ2FtZCddKSB7XG5cdCAgICAgICEoX19XRUJQQUNLX0FNRF9ERUZJTkVfUkVTVUxUX18gPSBmdW5jdGlvbigpIHsgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7IH0uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fLCBleHBvcnRzLCBtb2R1bGUpLCBfX1dFQlBBQ0tfQU1EX0RFRklORV9SRVNVTFRfXyAhPT0gdW5kZWZpbmVkICYmIChtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19BTURfREVGSU5FX1JFU1VMVF9fKSk7XG5cdCAgICB9IGVsc2UgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZVsnZXhwb3J0cyddKSB7XG5cdCAgICAgIG1vZHVsZVsnZXhwb3J0cyddID0gbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIHRoaXNbJ0VTNlByb21pc2UnXSA9IGxpYiRlczYkcHJvbWlzZSR1bWQkJEVTNlByb21pc2U7XG5cdCAgICB9XG5cdFxuXHQgICAgbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0KCk7XG5cdH0pLmNhbGwodGhpcyk7XG5cdFxuXHRcblx0XG5cdC8qKiogRVhQT1JUUyBGUk9NIGV4cG9ydHMtbG9hZGVyICoqKi9cblx0bW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuUHJvbWlzZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18oMTkpLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDIxOSkobW9kdWxlKSkpXG5cbi8qKiovIH0sXG4vKiA4NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKFByb21pc2UpIHsoZnVuY3Rpb24oc2VsZikge1xuXHQgICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgaWYgKHNlbGYuZmV0Y2gpIHtcblx0ICAgIHJldHVyblxuXHQgIH1cblx0XG5cdCAgdmFyIHN1cHBvcnQgPSB7XG5cdCAgICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIHNlbGYsXG5cdCAgICBpdGVyYWJsZTogJ1N5bWJvbCcgaW4gc2VsZiAmJiAnaXRlcmF0b3InIGluIFN5bWJvbCxcblx0ICAgIGJsb2I6ICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmICdCbG9iJyBpbiBzZWxmICYmIChmdW5jdGlvbigpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICBuZXcgQmxvYigpXG5cdCAgICAgICAgcmV0dXJuIHRydWVcblx0ICAgICAgfSBjYXRjaChlKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlXG5cdCAgICAgIH1cblx0ICAgIH0pKCksXG5cdCAgICBmb3JtRGF0YTogJ0Zvcm1EYXRhJyBpbiBzZWxmLFxuXHQgICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gc2VsZlxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG5cdCAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIG5hbWUgPSBTdHJpbmcobmFtZSlcblx0ICAgIH1cblx0ICAgIGlmICgvW15hLXowLTlcXC0jJCUmJyorLlxcXl9gfH5dL2kudGVzdChuYW1lKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdJbnZhbGlkIGNoYXJhY3RlciBpbiBoZWFkZXIgZmllbGQgbmFtZScpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcblx0ICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsdWVcblx0ICB9XG5cdFxuXHQgIC8vIEJ1aWxkIGEgZGVzdHJ1Y3RpdmUgaXRlcmF0b3IgZm9yIHRoZSB2YWx1ZSBsaXN0XG5cdCAgZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcblx0ICAgIHZhciBpdGVyYXRvciA9IHtcblx0ICAgICAgbmV4dDogZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKVxuXHQgICAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHN1cHBvcnQuaXRlcmFibGUpIHtcblx0ICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJldHVybiBpdGVyYXRvclxuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIGl0ZXJhdG9yXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBIZWFkZXJzKGhlYWRlcnMpIHtcblx0ICAgIHRoaXMubWFwID0ge31cblx0XG5cdCAgICBpZiAoaGVhZGVycyBpbnN0YW5jZW9mIEhlYWRlcnMpIHtcblx0ICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG5cdCAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpXG5cdCAgICAgIH0sIHRoaXMpXG5cdFxuXHQgICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG5cdCAgICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGhlYWRlcnMpLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuXHQgICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pXG5cdCAgICAgIH0sIHRoaXMpXG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5hcHBlbmQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuXHQgICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcblx0ICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG5cdCAgICB2YXIgbGlzdCA9IHRoaXMubWFwW25hbWVdXG5cdCAgICBpZiAoIWxpc3QpIHtcblx0ICAgICAgbGlzdCA9IFtdXG5cdCAgICAgIHRoaXMubWFwW25hbWVdID0gbGlzdFxuXHQgICAgfVxuXHQgICAgbGlzdC5wdXNoKHZhbHVlKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuXHQgICAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICB2YXIgdmFsdWVzID0gdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV1cblx0ICAgIHJldHVybiB2YWx1ZXMgPyB2YWx1ZXNbMF0gOiBudWxsXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihuYW1lKSB7XG5cdCAgICByZXR1cm4gdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gfHwgW11cblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcblx0ICAgIHJldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShub3JtYWxpemVOYW1lKG5hbWUpKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcblx0ICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gW25vcm1hbGl6ZVZhbHVlKHZhbHVlKV1cblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuXHQgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModGhpcy5tYXApLmZvckVhY2goZnVuY3Rpb24obmFtZSkge1xuXHQgICAgICB0aGlzLm1hcFtuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG5cdCAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB2YWx1ZSwgbmFtZSwgdGhpcylcblx0ICAgICAgfSwgdGhpcylcblx0ICAgIH0sIHRoaXMpXG5cdCAgfVxuXHRcblx0ICBIZWFkZXJzLnByb3RvdHlwZS5rZXlzID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgaXRlbXMgPSBbXVxuXHQgICAgdGhpcy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7IGl0ZW1zLnB1c2gobmFtZSkgfSlcblx0ICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcblx0ICB9XG5cdFxuXHQgIEhlYWRlcnMucHJvdG90eXBlLnZhbHVlcyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGl0ZW1zID0gW11cblx0ICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSkgeyBpdGVtcy5wdXNoKHZhbHVlKSB9KVxuXHQgICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuXHQgIH1cblx0XG5cdCAgSGVhZGVycy5wcm90b3R5cGUuZW50cmllcyA9IGZ1bmN0aW9uKCkge1xuXHQgICAgdmFyIGl0ZW1zID0gW11cblx0ICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKFtuYW1lLCB2YWx1ZV0pIH0pXG5cdCAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG5cdCAgfVxuXHRcblx0ICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuXHQgICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXNcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcblx0ICAgIGlmIChib2R5LmJvZHlVc2VkKSB7XG5cdCAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKSlcblx0ICAgIH1cblx0ICAgIGJvZHkuYm9keVVzZWQgPSB0cnVlXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKSB7XG5cdCAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG5cdCAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXNvbHZlKHJlYWRlci5yZXN1bHQpXG5cdCAgICAgIH1cblx0ICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZWplY3QocmVhZGVyLmVycm9yKVxuXHQgICAgICB9XG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcblx0ICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG5cdCAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcblx0ICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuXHQgICAgdmFyIHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKClcblx0ICAgIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpXG5cdCAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIEJvZHkoKSB7XG5cdCAgICB0aGlzLmJvZHlVc2VkID0gZmFsc2Vcblx0XG5cdCAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcblx0ICAgICAgdGhpcy5fYm9keUluaXQgPSBib2R5XG5cdCAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcblx0ICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmJsb2IgJiYgQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihib2R5KSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlCbG9iID0gYm9keVxuXHQgICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcblx0ICAgICAgICB0aGlzLl9ib2R5Rm9ybURhdGEgPSBib2R5XG5cdCAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcblx0ICAgICAgfSBlbHNlIGlmICghYm9keSkge1xuXHQgICAgICAgIHRoaXMuX2JvZHlUZXh0ID0gJydcblx0ICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgLy8gT25seSBzdXBwb3J0IEFycmF5QnVmZmVycyBmb3IgUE9TVCBtZXRob2QuXG5cdCAgICAgICAgLy8gUmVjZWl2aW5nIEFycmF5QnVmZmVycyBoYXBwZW5zIHZpYSBCbG9icywgaW5zdGVhZC5cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIEJvZHlJbml0IHR5cGUnKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoIXRoaXMuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpXG5cdCAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QmxvYiAmJiB0aGlzLl9ib2R5QmxvYi50eXBlKSB7XG5cdCAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCB0aGlzLl9ib2R5QmxvYi50eXBlKVxuXHQgICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG5cdCAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcblx0ICAgICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcblx0ICAgICAgICBpZiAocmVqZWN0ZWQpIHtcblx0ICAgICAgICAgIHJldHVybiByZWplY3RlZFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKVxuXHQgICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuYmxvYigpLnRoZW4ocmVhZEJsb2JBc0FycmF5QnVmZmVyKVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuXHQgICAgICAgIGlmIChyZWplY3RlZCkge1xuXHQgICAgICAgICAgcmV0dXJuIHJlamVjdGVkXG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICBpZiAodGhpcy5fYm9keUJsb2IpIHtcblx0ICAgICAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dCh0aGlzLl9ib2R5QmxvYilcblx0ICAgICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlGb3JtRGF0YSkge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlUZXh0KVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy50ZXh0ID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcblx0ICAgICAgICByZXR1cm4gcmVqZWN0ZWQgPyByZWplY3RlZCA6IFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChzdXBwb3J0LmZvcm1EYXRhKSB7XG5cdCAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihkZWNvZGUpXG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmpzb24gPSBmdW5jdGlvbigpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcblx0ICAgIH1cblx0XG5cdCAgICByZXR1cm4gdGhpc1xuXHQgIH1cblx0XG5cdCAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG5cdCAgdmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ11cblx0XG5cdCAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuXHQgICAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuXHQgICAgcmV0dXJuIChtZXRob2RzLmluZGV4T2YodXBjYXNlZCkgPiAtMSkgPyB1cGNhc2VkIDogbWV0aG9kXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBSZXF1ZXN0KGlucHV0LCBvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuXHQgICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHlcblx0ICAgIGlmIChSZXF1ZXN0LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGlucHV0KSkge1xuXHQgICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcblx0ICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG5cdCAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFsc1xuXHQgICAgICBpZiAoIW9wdGlvbnMuaGVhZGVycykge1xuXHQgICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy5tZXRob2QgPSBpbnB1dC5tZXRob2Rcblx0ICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuXHQgICAgICBpZiAoIWJvZHkpIHtcblx0ICAgICAgICBib2R5ID0gaW5wdXQuX2JvZHlJbml0XG5cdCAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMudXJsID0gaW5wdXRcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdvbWl0J1xuXHQgICAgaWYgKG9wdGlvbnMuaGVhZGVycyB8fCAhdGhpcy5oZWFkZXJzKSB7XG5cdCAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcblx0ICAgIH1cblx0ICAgIHRoaXMubWV0aG9kID0gbm9ybWFsaXplTWV0aG9kKG9wdGlvbnMubWV0aG9kIHx8IHRoaXMubWV0aG9kIHx8ICdHRVQnKVxuXHQgICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZSB8fCBudWxsXG5cdCAgICB0aGlzLnJlZmVycmVyID0gbnVsbFxuXHRcblx0ICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcblx0ICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuXHQgICAgfVxuXHQgICAgdGhpcy5faW5pdEJvZHkoYm9keSlcblx0ICB9XG5cdFxuXHQgIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG5cdCAgICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcylcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG5cdCAgICB2YXIgZm9ybSA9IG5ldyBGb3JtRGF0YSgpXG5cdCAgICBib2R5LnRyaW0oKS5zcGxpdCgnJicpLmZvckVhY2goZnVuY3Rpb24oYnl0ZXMpIHtcblx0ICAgICAgaWYgKGJ5dGVzKSB7XG5cdCAgICAgICAgdmFyIHNwbGl0ID0gYnl0ZXMuc3BsaXQoJz0nKVxuXHQgICAgICAgIHZhciBuYW1lID0gc3BsaXQuc2hpZnQoKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuXHQgICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuXHQgICAgICAgIGZvcm0uYXBwZW5kKGRlY29kZVVSSUNvbXBvbmVudChuYW1lKSwgZGVjb2RlVVJJQ29tcG9uZW50KHZhbHVlKSlcblx0ICAgICAgfVxuXHQgICAgfSlcblx0ICAgIHJldHVybiBmb3JtXG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBoZWFkZXJzKHhocikge1xuXHQgICAgdmFyIGhlYWQgPSBuZXcgSGVhZGVycygpXG5cdCAgICB2YXIgcGFpcnMgPSAoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKS50cmltKCkuc3BsaXQoJ1xcbicpXG5cdCAgICBwYWlycy5mb3JFYWNoKGZ1bmN0aW9uKGhlYWRlcikge1xuXHQgICAgICB2YXIgc3BsaXQgPSBoZWFkZXIudHJpbSgpLnNwbGl0KCc6Jylcblx0ICAgICAgdmFyIGtleSA9IHNwbGl0LnNoaWZ0KCkudHJpbSgpXG5cdCAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJzonKS50cmltKClcblx0ICAgICAgaGVhZC5hcHBlbmQoa2V5LCB2YWx1ZSlcblx0ICAgIH0pXG5cdCAgICByZXR1cm4gaGVhZFxuXHQgIH1cblx0XG5cdCAgQm9keS5jYWxsKFJlcXVlc3QucHJvdG90eXBlKVxuXHRcblx0ICBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuXHQgICAgaWYgKCFvcHRpb25zKSB7XG5cdCAgICAgIG9wdGlvbnMgPSB7fVxuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMudHlwZSA9ICdkZWZhdWx0J1xuXHQgICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1c1xuXHQgICAgdGhpcy5vayA9IHRoaXMuc3RhdHVzID49IDIwMCAmJiB0aGlzLnN0YXR1cyA8IDMwMFxuXHQgICAgdGhpcy5zdGF0dXNUZXh0ID0gb3B0aW9ucy5zdGF0dXNUZXh0XG5cdCAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzID8gb3B0aW9ucy5oZWFkZXJzIDogbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuXHQgICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuXHQgICAgdGhpcy5faW5pdEJvZHkoYm9keUluaXQpXG5cdCAgfVxuXHRcblx0ICBCb2R5LmNhbGwoUmVzcG9uc2UucHJvdG90eXBlKVxuXHRcblx0ICBSZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcblx0ICAgIHJldHVybiBuZXcgUmVzcG9uc2UodGhpcy5fYm9keUluaXQsIHtcblx0ICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcblx0ICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuXHQgICAgICBoZWFkZXJzOiBuZXcgSGVhZGVycyh0aGlzLmhlYWRlcnMpLFxuXHQgICAgICB1cmw6IHRoaXMudXJsXG5cdCAgICB9KVxuXHQgIH1cblx0XG5cdCAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcblx0ICAgIHZhciByZXNwb25zZSA9IG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiAwLCBzdGF0dXNUZXh0OiAnJ30pXG5cdCAgICByZXNwb25zZS50eXBlID0gJ2Vycm9yJ1xuXHQgICAgcmV0dXJuIHJlc3BvbnNlXG5cdCAgfVxuXHRcblx0ICB2YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF1cblx0XG5cdCAgUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuXHQgICAgaWYgKHJlZGlyZWN0U3RhdHVzZXMuaW5kZXhPZihzdGF0dXMpID09PSAtMSkge1xuXHQgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCBzdGF0dXMgY29kZScpXG5cdCAgICB9XG5cdFxuXHQgICAgcmV0dXJuIG5ldyBSZXNwb25zZShudWxsLCB7c3RhdHVzOiBzdGF0dXMsIGhlYWRlcnM6IHtsb2NhdGlvbjogdXJsfX0pXG5cdCAgfVxuXHRcblx0ICBzZWxmLkhlYWRlcnMgPSBIZWFkZXJzXG5cdCAgc2VsZi5SZXF1ZXN0ID0gUmVxdWVzdFxuXHQgIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZVxuXHRcblx0ICBzZWxmLmZldGNoID0gZnVuY3Rpb24oaW5wdXQsIGluaXQpIHtcblx0ICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcblx0ICAgICAgdmFyIHJlcXVlc3Rcblx0ICAgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpICYmICFpbml0KSB7XG5cdCAgICAgICAgcmVxdWVzdCA9IGlucHV0XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KVxuXHQgICAgICB9XG5cdFxuXHQgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblx0XG5cdCAgICAgIGZ1bmN0aW9uIHJlc3BvbnNlVVJMKCkge1xuXHQgICAgICAgIGlmICgncmVzcG9uc2VVUkwnIGluIHhocikge1xuXHQgICAgICAgICAgcmV0dXJuIHhoci5yZXNwb25zZVVSTFxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgLy8gQXZvaWQgc2VjdXJpdHkgd2FybmluZ3Mgb24gZ2V0UmVzcG9uc2VIZWFkZXIgd2hlbiBub3QgYWxsb3dlZCBieSBDT1JTXG5cdCAgICAgICAgaWYgKC9eWC1SZXF1ZXN0LVVSTDovbS50ZXN0KHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSkpIHtcblx0ICAgICAgICAgIHJldHVybiB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtUmVxdWVzdC1VUkwnKVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgcmV0dXJuXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcblx0ICAgICAgICB2YXIgb3B0aW9ucyA9IHtcblx0ICAgICAgICAgIHN0YXR1czogeGhyLnN0YXR1cyxcblx0ICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuXHQgICAgICAgICAgaGVhZGVyczogaGVhZGVycyh4aHIpLFxuXHQgICAgICAgICAgdXJsOiByZXNwb25zZVVSTCgpXG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0XG5cdCAgICAgICAgcmVzb2x2ZShuZXcgUmVzcG9uc2UoYm9keSwgb3B0aW9ucykpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vbmVycm9yID0gZnVuY3Rpb24oKSB7XG5cdCAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcblx0ICAgICAgfVxuXHRcblx0ICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuXHQgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSlcblx0XG5cdCAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcblx0ICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBpZiAoJ3Jlc3BvbnNlVHlwZScgaW4geGhyICYmIHN1cHBvcnQuYmxvYikge1xuXHQgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYmxvYidcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmVxdWVzdC5oZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcblx0ICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSlcblx0ICAgICAgfSlcblx0XG5cdCAgICAgIHhoci5zZW5kKHR5cGVvZiByZXF1ZXN0Ll9ib2R5SW5pdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWVzdC5fYm9keUluaXQpXG5cdCAgICB9KVxuXHQgIH1cblx0ICBzZWxmLmZldGNoLnBvbHlmaWxsID0gdHJ1ZVxuXHR9KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcyk7XG5cdFxuXHRcblx0LyoqKiBFWFBPUlRTIEZST00gZXhwb3J0cy1sb2FkZXIgKioqL1xuXHRtb2R1bGUuZXhwb3J0cyA9IHNlbGYuZmV0Y2g7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDgzKSkpXG5cbi8qKiovIH0sXG4vKiA4NSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLnAgKyBcImI0ZGUyOWZlNDNhYzg1ZWYwYjY2ZjljN2RmYzQ3NGQzLnBuZ1wiO1xuXG4vKioqLyB9LFxuLyogODYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXROYXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLFxuXHQgICAgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBEYXRhVmlldyA9IGdldE5hdGl2ZShyb290LCAnRGF0YVZpZXcnKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRGF0YVZpZXc7XG5cblxuLyoqKi8gfSxcbi8qIDg3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaGFzaENsZWFyID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTgpLFxuXHQgICAgaGFzaERlbGV0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTE5KSxcblx0ICAgIGhhc2hHZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyMCksXG5cdCAgICBoYXNoSGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMjEpLFxuXHQgICAgaGFzaFNldCA9IF9fd2VicGFja19yZXF1aXJlX18oMTIyKTtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgaGFzaCBvYmplY3QuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKiBAcGFyYW0ge0FycmF5fSBbZW50cmllc10gVGhlIGtleS12YWx1ZSBwYWlycyB0byBjYWNoZS5cblx0ICovXG5cdGZ1bmN0aW9uIEhhc2goZW50cmllcykge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXHRcblx0ICB0aGlzLmNsZWFyKCk7XG5cdCAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcblx0ICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuXHQgICAgdGhpcy5zZXQoZW50cnlbMF0sIGVudHJ5WzFdKTtcblx0ICB9XG5cdH1cblx0XG5cdC8vIEFkZCBtZXRob2RzIHRvIGBIYXNoYC5cblx0SGFzaC5wcm90b3R5cGUuY2xlYXIgPSBoYXNoQ2xlYXI7XG5cdEhhc2gucHJvdG90eXBlWydkZWxldGUnXSA9IGhhc2hEZWxldGU7XG5cdEhhc2gucHJvdG90eXBlLmdldCA9IGhhc2hHZXQ7XG5cdEhhc2gucHJvdG90eXBlLmhhcyA9IGhhc2hIYXM7XG5cdEhhc2gucHJvdG90eXBlLnNldCA9IGhhc2hTZXQ7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEhhc2g7XG5cblxuLyoqKi8gfSxcbi8qIDg4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TmF0aXZlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2KSxcblx0ICAgIHJvb3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xuXHR2YXIgUHJvbWlzZSA9IGdldE5hdGl2ZShyb290LCAnUHJvbWlzZScpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBQcm9taXNlO1xuXG5cbi8qKiovIH0sXG4vKiA4OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE5hdGl2ZSA9IF9fd2VicGFja19yZXF1aXJlX18oNiksXG5cdCAgICByb290ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cblx0dmFyIFNldCA9IGdldE5hdGl2ZShyb290LCAnU2V0Jyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFNldDtcblxuXG4vKioqLyB9LFxuLyogOTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBNYXBDYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpLFxuXHQgICAgc2V0Q2FjaGVBZGQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzOCksXG5cdCAgICBzZXRDYWNoZUhhcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTM5KTtcblx0XG5cdC8qKlxuXHQgKlxuXHQgKiBDcmVhdGVzIGFuIGFycmF5IGNhY2hlIG9iamVjdCB0byBzdG9yZSB1bmlxdWUgdmFsdWVzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAY29uc3RydWN0b3Jcblx0ICogQHBhcmFtIHtBcnJheX0gW3ZhbHVlc10gVGhlIHZhbHVlcyB0byBjYWNoZS5cblx0ICovXG5cdGZ1bmN0aW9uIFNldENhY2hlKHZhbHVlcykge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSB2YWx1ZXMgPyB2YWx1ZXMubGVuZ3RoIDogMDtcblx0XG5cdCAgdGhpcy5fX2RhdGFfXyA9IG5ldyBNYXBDYWNoZTtcblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgdGhpcy5hZGQodmFsdWVzW2luZGV4XSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyBBZGQgbWV0aG9kcyB0byBgU2V0Q2FjaGVgLlxuXHRTZXRDYWNoZS5wcm90b3R5cGUuYWRkID0gU2V0Q2FjaGUucHJvdG90eXBlLnB1c2ggPSBzZXRDYWNoZUFkZDtcblx0U2V0Q2FjaGUucHJvdG90eXBlLmhhcyA9IHNldENhY2hlSGFzO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTZXRDYWNoZTtcblxuXG4vKioqLyB9LFxuLyogOTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciByb290ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xuXHR2YXIgVWludDhBcnJheSA9IHJvb3QuVWludDhBcnJheTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gVWludDhBcnJheTtcblxuXG4vKioqLyB9LFxuLyogOTIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXROYXRpdmUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYpLFxuXHQgICAgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG5cdHZhciBXZWFrTWFwID0gZ2V0TmF0aXZlKHJvb3QsICdXZWFrTWFwJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFdlYWtNYXA7XG5cblxuLyoqKi8gfSxcbi8qIDkzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQSBmYXN0ZXIgYWx0ZXJuYXRpdmUgdG8gYEZ1bmN0aW9uI2FwcGx5YCwgdGhpcyBmdW5jdGlvbiBpbnZva2VzIGBmdW5jYFxuXHQgKiB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiBgdGhpc0FyZ2AgYW5kIHRoZSBhcmd1bWVudHMgb2YgYGFyZ3NgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG5cdCAqIEBwYXJhbSB7Kn0gdGhpc0FyZyBUaGUgYHRoaXNgIGJpbmRpbmcgb2YgYGZ1bmNgLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcmdzIFRoZSBhcmd1bWVudHMgdG8gaW52b2tlIGBmdW5jYCB3aXRoLlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGBmdW5jYC5cblx0ICovXG5cdGZ1bmN0aW9uIGFwcGx5KGZ1bmMsIHRoaXNBcmcsIGFyZ3MpIHtcblx0ICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG5cdCAgc3dpdGNoIChsZW5ndGgpIHtcblx0ICAgIGNhc2UgMDogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnKTtcblx0ICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdKTtcblx0ICAgIGNhc2UgMjogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdLCBhcmdzWzFdKTtcblx0ICAgIGNhc2UgMzogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdLCBhcmdzWzFdLCBhcmdzWzJdKTtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYXBwbHk7XG5cblxuLyoqKi8gfSxcbi8qIDk0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBfLnNvbWVgIGZvciBhcnJheXMgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZVxuXHQgKiBzaG9ydGhhbmRzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fSBbYXJyYXldIFRoZSBhcnJheSB0byBpdGVyYXRlIG92ZXIuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW55IGVsZW1lbnQgcGFzc2VzIHRoZSBwcmVkaWNhdGUgY2hlY2ssXG5cdCAqICBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBhcnJheVNvbWUoYXJyYXksIHByZWRpY2F0ZSkge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cdFxuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIGZhbHNlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGFycmF5U29tZTtcblxuXG4vKioqLyB9LFxuLyogOTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKiBVc2VkIGFzIHRoZSBgVHlwZUVycm9yYCBtZXNzYWdlIGZvciBcIkZ1bmN0aW9uc1wiIG1ldGhvZHMuICovXG5cdHZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZGVsYXlgIGFuZCBgXy5kZWZlcmAgd2hpY2ggYWNjZXB0cyBhbiBhcnJheVxuXHQgKiBvZiBgZnVuY2AgYXJndW1lbnRzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWxheS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IHdhaXQgVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkgaW52b2NhdGlvbi5cblx0ICogQHBhcmFtIHtPYmplY3R9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBwcm92aWRlIHRvIGBmdW5jYC5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlRGVsYXkoZnVuYywgd2FpdCwgYXJncykge1xuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7IH0sIHdhaXQpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VEZWxheTtcblxuXG4vKioqLyB9LFxuLyogOTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5maW5kSW5kZXhgIGFuZCBgXy5maW5kTGFzdEluZGV4YCB3aXRob3V0XG5cdCAqIHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gZnJvbUluZGV4IFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cblx0ICogQHBhcmFtIHtib29sZWFufSBbZnJvbVJpZ2h0XSBTcGVjaWZ5IGl0ZXJhdGluZyBmcm9tIHJpZ2h0IHRvIGxlZnQuXG5cdCAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlRmluZEluZGV4KGFycmF5LCBwcmVkaWNhdGUsIGZyb21JbmRleCwgZnJvbVJpZ2h0KSB7XG5cdCAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcblx0ICAgICAgaW5kZXggPSBmcm9tSW5kZXggKyAoZnJvbVJpZ2h0ID8gMSA6IC0xKTtcblx0XG5cdCAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcblx0ICAgIGlmIChwcmVkaWNhdGUoYXJyYXlbaW5kZXhdLCBpbmRleCwgYXJyYXkpKSB7XG5cdCAgICAgIHJldHVybiBpbmRleDtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIC0xO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VGaW5kSW5kZXg7XG5cblxuLyoqKi8gfSxcbi8qIDk3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaGFzSW5gIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBrZXkgVGhlIGtleSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUhhc0luKG9iamVjdCwga2V5KSB7XG5cdCAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIGtleSBpbiBPYmplY3Qob2JqZWN0KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSGFzSW47XG5cblxuLyoqKi8gfSxcbi8qIDk4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgU3RhY2sgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIzKSxcblx0ICAgIGVxdWFsQXJyYXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMCksXG5cdCAgICBlcXVhbEJ5VGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTApLFxuXHQgICAgZXF1YWxPYmplY3RzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTEpLFxuXHQgICAgZ2V0VGFnID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMTUpLFxuXHQgICAgaXNBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oNCksXG5cdCAgICBpc0hvc3RPYmplY3QgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMxKSxcblx0ICAgIGlzVHlwZWRBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oMTU0KTtcblx0XG5cdC8qKiBVc2VkIHRvIGNvbXBvc2UgYml0bWFza3MgZm9yIGNvbXBhcmlzb24gc3R5bGVzLiAqL1xuXHR2YXIgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuXHQgICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuXHQgICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbGAgZm9yIGFycmF5cyBhbmQgb2JqZWN0cyB3aGljaCBwZXJmb3Jtc1xuXHQgKiBkZWVwIGNvbXBhcmlzb25zIGFuZCB0cmFja3MgdHJhdmVyc2VkIG9iamVjdHMgZW5hYmxpbmcgb2JqZWN0cyB3aXRoIGNpcmN1bGFyXG5cdCAqIHJlZmVyZW5jZXMgdG8gYmUgY29tcGFyZWQuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW2JpdG1hc2tdIFRoZSBiaXRtYXNrIG9mIGNvbXBhcmlzb24gZmxhZ3MuIFNlZSBgYmFzZUlzRXF1YWxgXG5cdCAqICBmb3IgbW9yZSBkZXRhaWxzLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUlzRXF1YWxEZWVwKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0ICB2YXIgb2JqSXNBcnIgPSBpc0FycmF5KG9iamVjdCksXG5cdCAgICAgIG90aElzQXJyID0gaXNBcnJheShvdGhlciksXG5cdCAgICAgIG9ialRhZyA9IGFycmF5VGFnLFxuXHQgICAgICBvdGhUYWcgPSBhcnJheVRhZztcblx0XG5cdCAgaWYgKCFvYmpJc0Fycikge1xuXHQgICAgb2JqVGFnID0gZ2V0VGFnKG9iamVjdCk7XG5cdCAgICBvYmpUYWcgPSBvYmpUYWcgPT0gYXJnc1RhZyA/IG9iamVjdFRhZyA6IG9ialRhZztcblx0ICB9XG5cdCAgaWYgKCFvdGhJc0Fycikge1xuXHQgICAgb3RoVGFnID0gZ2V0VGFnKG90aGVyKTtcblx0ICAgIG90aFRhZyA9IG90aFRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb3RoVGFnO1xuXHQgIH1cblx0ICB2YXIgb2JqSXNPYmogPSBvYmpUYWcgPT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob2JqZWN0KSxcblx0ICAgICAgb3RoSXNPYmogPSBvdGhUYWcgPT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob3RoZXIpLFxuXHQgICAgICBpc1NhbWVUYWcgPSBvYmpUYWcgPT0gb3RoVGFnO1xuXHRcblx0ICBpZiAoaXNTYW1lVGFnICYmICFvYmpJc09iaikge1xuXHQgICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcblx0ICAgIHJldHVybiAob2JqSXNBcnIgfHwgaXNUeXBlZEFycmF5KG9iamVjdCkpXG5cdCAgICAgID8gZXF1YWxBcnJheXMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaylcblx0ICAgICAgOiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIG9ialRhZywgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG5cdCAgfVxuXHQgIGlmICghKGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRykpIHtcblx0ICAgIHZhciBvYmpJc1dyYXBwZWQgPSBvYmpJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgJ19fd3JhcHBlZF9fJyksXG5cdCAgICAgICAgb3RoSXNXcmFwcGVkID0gb3RoSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvdGhlciwgJ19fd3JhcHBlZF9fJyk7XG5cdFxuXHQgICAgaWYgKG9iaklzV3JhcHBlZCB8fCBvdGhJc1dyYXBwZWQpIHtcblx0ICAgICAgdmFyIG9ialVud3JhcHBlZCA9IG9iaklzV3JhcHBlZCA/IG9iamVjdC52YWx1ZSgpIDogb2JqZWN0LFxuXHQgICAgICAgICAgb3RoVW53cmFwcGVkID0gb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyO1xuXHRcblx0ICAgICAgc3RhY2sgfHwgKHN0YWNrID0gbmV3IFN0YWNrKTtcblx0ICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpVbndyYXBwZWQsIG90aFVud3JhcHBlZCwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIWlzU2FtZVRhZykge1xuXHQgICAgcmV0dXJuIGZhbHNlO1xuXHQgIH1cblx0ICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuXHQgIHJldHVybiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUlzRXF1YWxEZWVwO1xuXG5cbi8qKiovIH0sXG4vKiA5OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFN0YWNrID0gX193ZWJwYWNrX3JlcXVpcmVfXygyMyksXG5cdCAgICBiYXNlSXNFcXVhbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjcpO1xuXHRcblx0LyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG5cdHZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcblx0ICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc01hdGNoYCB3aXRob3V0IHN1cHBvcnQgZm9yIGl0ZXJhdGVlIHNob3J0aGFuZHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBpbnNwZWN0LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gc291cmNlIFRoZSBvYmplY3Qgb2YgcHJvcGVydHkgdmFsdWVzIHRvIG1hdGNoLlxuXHQgKiBAcGFyYW0ge0FycmF5fSBtYXRjaERhdGEgVGhlIHByb3BlcnR5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIHRvIG1hdGNoLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY3VzdG9taXplcl0gVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBvYmplY3RgIGlzIGEgbWF0Y2gsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VJc01hdGNoKG9iamVjdCwgc291cmNlLCBtYXRjaERhdGEsIGN1c3RvbWl6ZXIpIHtcblx0ICB2YXIgaW5kZXggPSBtYXRjaERhdGEubGVuZ3RoLFxuXHQgICAgICBsZW5ndGggPSBpbmRleCxcblx0ICAgICAgbm9DdXN0b21pemVyID0gIWN1c3RvbWl6ZXI7XG5cdFxuXHQgIGlmIChvYmplY3QgPT0gbnVsbCkge1xuXHQgICAgcmV0dXJuICFsZW5ndGg7XG5cdCAgfVxuXHQgIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuXHQgIHdoaWxlIChpbmRleC0tKSB7XG5cdCAgICB2YXIgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07XG5cdCAgICBpZiAoKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKVxuXHQgICAgICAgICAgPyBkYXRhWzFdICE9PSBvYmplY3RbZGF0YVswXV1cblx0ICAgICAgICAgIDogIShkYXRhWzBdIGluIG9iamVjdClcblx0ICAgICAgICApIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgZGF0YSA9IG1hdGNoRGF0YVtpbmRleF07XG5cdCAgICB2YXIga2V5ID0gZGF0YVswXSxcblx0ICAgICAgICBvYmpWYWx1ZSA9IG9iamVjdFtrZXldLFxuXHQgICAgICAgIHNyY1ZhbHVlID0gZGF0YVsxXTtcblx0XG5cdCAgICBpZiAobm9DdXN0b21pemVyICYmIGRhdGFbMl0pIHtcblx0ICAgICAgaWYgKG9ialZhbHVlID09PSB1bmRlZmluZWQgJiYgIShrZXkgaW4gb2JqZWN0KSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHN0YWNrID0gbmV3IFN0YWNrO1xuXHQgICAgICBpZiAoY3VzdG9taXplcikge1xuXHQgICAgICAgIHZhciByZXN1bHQgPSBjdXN0b21pemVyKG9ialZhbHVlLCBzcmNWYWx1ZSwga2V5LCBvYmplY3QsIHNvdXJjZSwgc3RhY2spO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICghKHJlc3VsdCA9PT0gdW5kZWZpbmVkXG5cdCAgICAgICAgICAgID8gYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9ialZhbHVlLCBjdXN0b21pemVyLCBVTk9SREVSRURfQ09NUEFSRV9GTEFHIHwgUEFSVElBTF9DT01QQVJFX0ZMQUcsIHN0YWNrKVxuXHQgICAgICAgICAgICA6IHJlc3VsdFxuXHQgICAgICAgICAgKSkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNNYXRjaDtcblxuXG4vKioqLyB9LFxuLyogMTAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNGdW5jdGlvbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTgpLFxuXHQgICAgaXNIb3N0T2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMSksXG5cdCAgICBpc01hc2tlZCA9IF9fd2VicGFja19yZXF1aXJlX18oMTI1KSxcblx0ICAgIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KSxcblx0ICAgIHRvU291cmNlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNSk7XG5cdFxuXHQvKipcblx0ICogVXNlZCB0byBtYXRjaCBgUmVnRXhwYFxuXHQgKiBbc3ludGF4IGNoYXJhY3RlcnNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXBhdHRlcm5zKS5cblx0ICovXG5cdHZhciByZVJlZ0V4cENoYXIgPSAvW1xcXFxeJC4qKz8oKVtcXF17fXxdL2c7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSkuICovXG5cdHZhciByZUlzSG9zdEN0b3IgPSAvXlxcW29iamVjdCAuKz9Db25zdHJ1Y3RvclxcXSQvO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xuXHR2YXIgZnVuY1RvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXHRcblx0LyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXHRcblx0LyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cblx0dmFyIHJlSXNOYXRpdmUgPSBSZWdFeHAoJ14nICtcblx0ICBmdW5jVG9TdHJpbmcuY2FsbChoYXNPd25Qcm9wZXJ0eSkucmVwbGFjZShyZVJlZ0V4cENoYXIsICdcXFxcJCYnKVxuXHQgIC5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLCAnJDEuKj8nKSArICckJ1xuXHQpO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmlzTmF0aXZlYCB3aXRob3V0IGJhZCBzaGltIGNoZWNrcy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgbmF0aXZlIGZ1bmN0aW9uLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZUlzTmF0aXZlKHZhbHVlKSB7XG5cdCAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgaXNNYXNrZWQodmFsdWUpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciBwYXR0ZXJuID0gKGlzRnVuY3Rpb24odmFsdWUpIHx8IGlzSG9zdE9iamVjdCh2YWx1ZSkpID8gcmVJc05hdGl2ZSA6IHJlSXNIb3N0Q3Rvcjtcblx0ICByZXR1cm4gcGF0dGVybi50ZXN0KHRvU291cmNlKHZhbHVlKSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZUlzTmF0aXZlO1xuXG5cbi8qKiovIH0sXG4vKiAxMDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlTWF0Y2hlcyA9IF9fd2VicGFja19yZXF1aXJlX18oMTAzKSxcblx0ICAgIGJhc2VNYXRjaGVzUHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwNCksXG5cdCAgICBpZGVudGl0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMTUyKSxcblx0ICAgIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgcHJvcGVydHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1Nyk7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXRlcmF0ZWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IFt2YWx1ZT1fLmlkZW50aXR5XSBUaGUgdmFsdWUgdG8gY29udmVydCB0byBhbiBpdGVyYXRlZS5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBpdGVyYXRlZS5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VJdGVyYXRlZSh2YWx1ZSkge1xuXHQgIC8vIERvbid0IHN0b3JlIHRoZSBgdHlwZW9mYCByZXN1bHQgaW4gYSB2YXJpYWJsZSB0byBhdm9pZCBhIEpJVCBidWcgaW4gU2FmYXJpIDkuXG5cdCAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTYwMzQgZm9yIG1vcmUgZGV0YWlscy5cblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKHZhbHVlID09IG51bGwpIHtcblx0ICAgIHJldHVybiBpZGVudGl0eTtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jykge1xuXHQgICAgcmV0dXJuIGlzQXJyYXkodmFsdWUpXG5cdCAgICAgID8gYmFzZU1hdGNoZXNQcm9wZXJ0eSh2YWx1ZVswXSwgdmFsdWVbMV0pXG5cdCAgICAgIDogYmFzZU1hdGNoZXModmFsdWUpO1xuXHQgIH1cblx0ICByZXR1cm4gcHJvcGVydHkodmFsdWUpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VJdGVyYXRlZTtcblxuXG4vKioqLyB9LFxuLyogMTAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG5cdHZhciBuYXRpdmVLZXlzID0gT2JqZWN0LmtleXM7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ua2V5c2Agd2hpY2ggZG9lc24ndCBza2lwIHRoZSBjb25zdHJ1Y3RvclxuXHQgKiBwcm9wZXJ0eSBvZiBwcm90b3R5cGVzIG9yIHRyZWF0IHNwYXJzZSBhcnJheXMgYXMgZGVuc2UuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VLZXlzKG9iamVjdCkge1xuXHQgIHJldHVybiBuYXRpdmVLZXlzKE9iamVjdChvYmplY3QpKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlS2V5cztcblxuXG4vKioqLyB9LFxuLyogMTAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUlzTWF0Y2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk5KSxcblx0ICAgIGdldE1hdGNoRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEzKSxcblx0ICAgIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCk7XG5cdFxuXHQvKipcblx0ICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ubWF0Y2hlc2Agd2hpY2ggZG9lc24ndCBjbG9uZSBgc291cmNlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IHNvdXJjZSBUaGUgb2JqZWN0IG9mIHByb3BlcnR5IHZhbHVlcyB0byBtYXRjaC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgc3BlYyBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VNYXRjaGVzKHNvdXJjZSkge1xuXHQgIHZhciBtYXRjaERhdGEgPSBnZXRNYXRjaERhdGEoc291cmNlKTtcblx0ICBpZiAobWF0Y2hEYXRhLmxlbmd0aCA9PSAxICYmIG1hdGNoRGF0YVswXVsyXSkge1xuXHQgICAgcmV0dXJuIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKG1hdGNoRGF0YVswXVswXSwgbWF0Y2hEYXRhWzBdWzFdKTtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuXHQgICAgcmV0dXJuIG9iamVjdCA9PT0gc291cmNlIHx8IGJhc2VJc01hdGNoKG9iamVjdCwgc291cmNlLCBtYXRjaERhdGEpO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZU1hdGNoZXM7XG5cblxuLyoqKi8gfSxcbi8qIDEwNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VJc0VxdWFsID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNyksXG5cdCAgICBnZXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1MCksXG5cdCAgICBoYXNJbiA9IF9fd2VicGFja19yZXF1aXJlX18oMTUxKSxcblx0ICAgIGlzS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMiksXG5cdCAgICBpc1N0cmljdENvbXBhcmFibGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMzKSxcblx0ICAgIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzNCksXG5cdCAgICB0b0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0LyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG5cdHZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcblx0ICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5tYXRjaGVzUHJvcGVydHlgIHdoaWNoIGRvZXNuJ3QgY2xvbmUgYHNyY1ZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gbWF0Y2guXG5cdCAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IHNwZWMgZnVuY3Rpb24uXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlTWF0Y2hlc1Byb3BlcnR5KHBhdGgsIHNyY1ZhbHVlKSB7XG5cdCAgaWYgKGlzS2V5KHBhdGgpICYmIGlzU3RyaWN0Q29tcGFyYWJsZShzcmNWYWx1ZSkpIHtcblx0ICAgIHJldHVybiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZSh0b0tleShwYXRoKSwgc3JjVmFsdWUpO1xuXHQgIH1cblx0ICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG5cdCAgICB2YXIgb2JqVmFsdWUgPSBnZXQob2JqZWN0LCBwYXRoKTtcblx0ICAgIHJldHVybiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBvYmpWYWx1ZSA9PT0gc3JjVmFsdWUpXG5cdCAgICAgID8gaGFzSW4ob2JqZWN0LCBwYXRoKVxuXHQgICAgICA6IGJhc2VJc0VxdWFsKHNyY1ZhbHVlLCBvYmpWYWx1ZSwgdW5kZWZpbmVkLCBVTk9SREVSRURfQ09NUEFSRV9GTEFHIHwgUEFSVElBTF9DT01QQVJFX0ZMQUcpO1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gYmFzZU1hdGNoZXNQcm9wZXJ0eTtcblxuXG4vKioqLyB9LFxuLyogMTA1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZUdldCA9IF9fd2VicGFja19yZXF1aXJlX18oMjUpO1xuXHRcblx0LyoqXG5cdCAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZVByb3BlcnR5YCB3aGljaCBzdXBwb3J0cyBkZWVwIHBhdGhzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIGJhc2VQcm9wZXJ0eURlZXAocGF0aCkge1xuXHQgIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcblx0ICAgIHJldHVybiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlUHJvcGVydHlEZWVwO1xuXG5cbi8qKiovIH0sXG4vKiAxMDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50aW1lc2Agd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzXG5cdCAqIG9yIG1heCBhcnJheSBsZW5ndGggY2hlY2tzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge251bWJlcn0gbiBUaGUgbnVtYmVyIG9mIHRpbWVzIHRvIGludm9rZSBgaXRlcmF0ZWVgLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHJlc3VsdHMuXG5cdCAqL1xuXHRmdW5jdGlvbiBiYXNlVGltZXMobiwgaXRlcmF0ZWUpIHtcblx0ICB2YXIgaW5kZXggPSAtMSxcblx0ICAgICAgcmVzdWx0ID0gQXJyYXkobik7XG5cdFxuXHQgIHdoaWxlICgrK2luZGV4IDwgbikge1xuXHQgICAgcmVzdWx0W2luZGV4XSA9IGl0ZXJhdGVlKGluZGV4KTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBiYXNlVGltZXM7XG5cblxuLyoqKi8gfSxcbi8qIDEwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFN5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpLFxuXHQgICAgaXNTeW1ib2wgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2KTtcblx0XG5cdC8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xuXHR2YXIgSU5GSU5JVFkgPSAxIC8gMDtcblx0XG5cdC8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xuXHR2YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuXHQgICAgc3ltYm9sVG9TdHJpbmcgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnRvU3RyaW5nIDogdW5kZWZpbmVkO1xuXHRcblx0LyoqXG5cdCAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLnRvU3RyaW5nYCB3aGljaCBkb2Vzbid0IGNvbnZlcnQgbnVsbGlzaFxuXHQgKiB2YWx1ZXMgdG8gZW1wdHkgc3RyaW5ncy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuXHQgKi9cblx0ZnVuY3Rpb24gYmFzZVRvU3RyaW5nKHZhbHVlKSB7XG5cdCAgLy8gRXhpdCBlYXJseSBmb3Igc3RyaW5ncyB0byBhdm9pZCBhIHBlcmZvcm1hbmNlIGhpdCBpbiBzb21lIGVudmlyb25tZW50cy5cblx0ICBpZiAodHlwZW9mIHZhbHVlID09ICdzdHJpbmcnKSB7XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfVxuXHQgIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcblx0ICAgIHJldHVybiBzeW1ib2xUb1N0cmluZyA/IHN5bWJvbFRvU3RyaW5nLmNhbGwodmFsdWUpIDogJyc7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSAodmFsdWUgKyAnJyk7XG5cdCAgcmV0dXJuIChyZXN1bHQgPT0gJzAnICYmICgxIC8gdmFsdWUpID09IC1JTkZJTklUWSkgPyAnLTAnIDogcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGJhc2VUb1N0cmluZztcblxuXG4vKioqLyB9LFxuLyogMTA4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBnbG9iYWwgb2JqZWN0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cblx0ICogQHJldHVybnMge251bGx8T2JqZWN0fSBSZXR1cm5zIGB2YWx1ZWAgaWYgaXQncyBhIGdsb2JhbCBvYmplY3QsIGVsc2UgYG51bGxgLlxuXHQgKi9cblx0ZnVuY3Rpb24gY2hlY2tHbG9iYWwodmFsdWUpIHtcblx0ICByZXR1cm4gKHZhbHVlICYmIHZhbHVlLk9iamVjdCA9PT0gT2JqZWN0KSA/IHZhbHVlIDogbnVsbDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBjaGVja0dsb2JhbDtcblxuXG4vKioqLyB9LFxuLyogMTA5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgcm9vdCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3Qgb3ZlcnJlYWNoaW5nIGNvcmUtanMgc2hpbXMuICovXG5cdHZhciBjb3JlSnNEYXRhID0gcm9vdFsnX19jb3JlLWpzX3NoYXJlZF9fJ107XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGNvcmVKc0RhdGE7XG5cblxuLyoqKi8gfSxcbi8qIDExMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIFN5bWJvbCA9IF9fd2VicGFja19yZXF1aXJlX18oMjQpLFxuXHQgICAgVWludDhBcnJheSA9IF9fd2VicGFja19yZXF1aXJlX18oOTEpLFxuXHQgICAgZXF1YWxBcnJheXMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMwKSxcblx0ICAgIG1hcFRvQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzNyksXG5cdCAgICBzZXRUb0FycmF5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNDApO1xuXHRcblx0LyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG5cdHZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcblx0ICAgIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIGJvb2xUYWcgPSAnW29iamVjdCBCb29sZWFuXScsXG5cdCAgICBkYXRlVGFnID0gJ1tvYmplY3QgRGF0ZV0nLFxuXHQgICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuXHQgICAgbWFwVGFnID0gJ1tvYmplY3QgTWFwXScsXG5cdCAgICBudW1iZXJUYWcgPSAnW29iamVjdCBOdW1iZXJdJyxcblx0ICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuXHQgICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG5cdCAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcblx0ICAgIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXHRcblx0dmFyIGFycmF5QnVmZmVyVGFnID0gJ1tvYmplY3QgQXJyYXlCdWZmZXJdJyxcblx0ICAgIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJztcblx0XG5cdC8qKiBVc2VkIHRvIGNvbnZlcnQgc3ltYm9scyB0byBwcmltaXRpdmVzIGFuZCBzdHJpbmdzLiAqL1xuXHR2YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuXHQgICAgc3ltYm9sVmFsdWVPZiA9IHN5bWJvbFByb3RvID8gc3ltYm9sUHJvdG8udmFsdWVPZiA6IHVuZGVmaW5lZDtcblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIGNvbXBhcmluZyBvYmplY3RzIG9mXG5cdCAqIHRoZSBzYW1lIGB0b1N0cmluZ1RhZ2AuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIGZ1bmN0aW9uIG9ubHkgc3VwcG9ydHMgY29tcGFyaW5nIHZhbHVlcyB3aXRoIHRhZ3Mgb2Zcblx0ICogYEJvb2xlYW5gLCBgRGF0ZWAsIGBFcnJvcmAsIGBOdW1iZXJgLCBgUmVnRXhwYCwgb3IgYFN0cmluZ2AuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdGFnIFRoZSBgdG9TdHJpbmdUYWdgIG9mIHRoZSBvYmplY3RzIHRvIGNvbXBhcmUuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuXHQgKiBAcGFyYW0ge251bWJlcn0gYml0bWFzayBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuXHQgKiAgZm9yIG1vcmUgZGV0YWlscy5cblx0ICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBvYmplY3RzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZywgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuXHQgIHN3aXRjaCAodGFnKSB7XG5cdCAgICBjYXNlIGRhdGFWaWV3VGFnOlxuXHQgICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG5cdCAgICAgICAgICAob2JqZWN0LmJ5dGVPZmZzZXQgIT0gb3RoZXIuYnl0ZU9mZnNldCkpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgb2JqZWN0ID0gb2JqZWN0LmJ1ZmZlcjtcblx0ICAgICAgb3RoZXIgPSBvdGhlci5idWZmZXI7XG5cdFxuXHQgICAgY2FzZSBhcnJheUJ1ZmZlclRhZzpcblx0ICAgICAgaWYgKChvYmplY3QuYnl0ZUxlbmd0aCAhPSBvdGhlci5ieXRlTGVuZ3RoKSB8fFxuXHQgICAgICAgICAgIWVxdWFsRnVuYyhuZXcgVWludDhBcnJheShvYmplY3QpLCBuZXcgVWludDhBcnJheShvdGhlcikpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHRcblx0ICAgIGNhc2UgYm9vbFRhZzpcblx0ICAgIGNhc2UgZGF0ZVRhZzpcblx0ICAgICAgLy8gQ29lcmNlIGRhdGVzIGFuZCBib29sZWFucyB0byBudW1iZXJzLCBkYXRlcyB0byBtaWxsaXNlY29uZHMgYW5kXG5cdCAgICAgIC8vIGJvb2xlYW5zIHRvIGAxYCBvciBgMGAgdHJlYXRpbmcgaW52YWxpZCBkYXRlcyBjb2VyY2VkIHRvIGBOYU5gIGFzXG5cdCAgICAgIC8vIG5vdCBlcXVhbC5cblx0ICAgICAgcmV0dXJuICtvYmplY3QgPT0gK290aGVyO1xuXHRcblx0ICAgIGNhc2UgZXJyb3JUYWc6XG5cdCAgICAgIHJldHVybiBvYmplY3QubmFtZSA9PSBvdGhlci5uYW1lICYmIG9iamVjdC5tZXNzYWdlID09IG90aGVyLm1lc3NhZ2U7XG5cdFxuXHQgICAgY2FzZSBudW1iZXJUYWc6XG5cdCAgICAgIC8vIFRyZWF0IGBOYU5gIHZzLiBgTmFOYCBhcyBlcXVhbC5cblx0ICAgICAgcmV0dXJuIChvYmplY3QgIT0gK29iamVjdCkgPyBvdGhlciAhPSArb3RoZXIgOiBvYmplY3QgPT0gK290aGVyO1xuXHRcblx0ICAgIGNhc2UgcmVnZXhwVGFnOlxuXHQgICAgY2FzZSBzdHJpbmdUYWc6XG5cdCAgICAgIC8vIENvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgYW5kIHRyZWF0IHN0cmluZ3MsIHByaW1pdGl2ZXMgYW5kIG9iamVjdHMsXG5cdCAgICAgIC8vIGFzIGVxdWFsLiBTZWUgaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXJlZ2V4cC5wcm90b3R5cGUudG9zdHJpbmdcblx0ICAgICAgLy8gZm9yIG1vcmUgZGV0YWlscy5cblx0ICAgICAgcmV0dXJuIG9iamVjdCA9PSAob3RoZXIgKyAnJyk7XG5cdFxuXHQgICAgY2FzZSBtYXBUYWc6XG5cdCAgICAgIHZhciBjb252ZXJ0ID0gbWFwVG9BcnJheTtcblx0XG5cdCAgICBjYXNlIHNldFRhZzpcblx0ICAgICAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRztcblx0ICAgICAgY29udmVydCB8fCAoY29udmVydCA9IHNldFRvQXJyYXkpO1xuXHRcblx0ICAgICAgaWYgKG9iamVjdC5zaXplICE9IG90aGVyLnNpemUgJiYgIWlzUGFydGlhbCkge1xuXHQgICAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG5cdCAgICAgIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KG9iamVjdCk7XG5cdCAgICAgIGlmIChzdGFja2VkKSB7XG5cdCAgICAgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG5cdCAgICAgIH1cblx0ICAgICAgYml0bWFzayB8PSBVTk9SREVSRURfQ09NUEFSRV9GTEFHO1xuXHQgICAgICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG5cdFxuXHQgICAgICAvLyBSZWN1cnNpdmVseSBjb21wYXJlIG9iamVjdHMgKHN1c2NlcHRpYmxlIHRvIGNhbGwgc3RhY2sgbGltaXRzKS5cblx0ICAgICAgcmV0dXJuIGVxdWFsQXJyYXlzKGNvbnZlcnQob2JqZWN0KSwgY29udmVydChvdGhlciksIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXHRcblx0ICAgIGNhc2Ugc3ltYm9sVGFnOlxuXHQgICAgICBpZiAoc3ltYm9sVmFsdWVPZikge1xuXHQgICAgICAgIHJldHVybiBzeW1ib2xWYWx1ZU9mLmNhbGwob2JqZWN0KSA9PSBzeW1ib2xWYWx1ZU9mLmNhbGwob3RoZXIpO1xuXHQgICAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBmYWxzZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBlcXVhbEJ5VGFnO1xuXG5cbi8qKiovIH0sXG4vKiAxMTEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlSGFzID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNiksXG5cdCAgICBrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHQvKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cblx0dmFyIFBBUlRJQUxfQ09NUEFSRV9GTEFHID0gMjtcblx0XG5cdC8qKlxuXHQgKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYGJhc2VJc0VxdWFsRGVlcGAgZm9yIG9iamVjdHMgd2l0aCBzdXBwb3J0IGZvclxuXHQgKiBwYXJ0aWFsIGRlZXAgY29tcGFyaXNvbnMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBlcXVhbEZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGRldGVybWluZSBlcXVpdmFsZW50cyBvZiB2YWx1ZXMuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGN1c3RvbWl6ZXIgVGhlIGZ1bmN0aW9uIHRvIGN1c3RvbWl6ZSBjb21wYXJpc29ucy5cblx0ICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcblx0ICogIGZvciBtb3JlIGRldGFpbHMuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzdGFjayBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcblx0ICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHLFxuXHQgICAgICBvYmpQcm9wcyA9IGtleXMob2JqZWN0KSxcblx0ICAgICAgb2JqTGVuZ3RoID0gb2JqUHJvcHMubGVuZ3RoLFxuXHQgICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuXHQgICAgICBvdGhMZW5ndGggPSBvdGhQcm9wcy5sZW5ndGg7XG5cdFxuXHQgIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc1BhcnRpYWwpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIGluZGV4ID0gb2JqTGVuZ3RoO1xuXHQgIHdoaWxlIChpbmRleC0tKSB7XG5cdCAgICB2YXIga2V5ID0gb2JqUHJvcHNbaW5kZXhdO1xuXHQgICAgaWYgKCEoaXNQYXJ0aWFsID8ga2V5IGluIG90aGVyIDogYmFzZUhhcyhvdGhlciwga2V5KSkpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG5cdCAgdmFyIHN0YWNrZWQgPSBzdGFjay5nZXQob2JqZWN0KTtcblx0ICBpZiAoc3RhY2tlZCkge1xuXHQgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG5cdCAgfVxuXHQgIHZhciByZXN1bHQgPSB0cnVlO1xuXHQgIHN0YWNrLnNldChvYmplY3QsIG90aGVyKTtcblx0XG5cdCAgdmFyIHNraXBDdG9yID0gaXNQYXJ0aWFsO1xuXHQgIHdoaWxlICgrK2luZGV4IDwgb2JqTGVuZ3RoKSB7XG5cdCAgICBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG5cdCAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcblx0ICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2tleV07XG5cdFxuXHQgICAgaWYgKGN1c3RvbWl6ZXIpIHtcblx0ICAgICAgdmFyIGNvbXBhcmVkID0gaXNQYXJ0aWFsXG5cdCAgICAgICAgPyBjdXN0b21pemVyKG90aFZhbHVlLCBvYmpWYWx1ZSwga2V5LCBvdGhlciwgb2JqZWN0LCBzdGFjaylcblx0ICAgICAgICA6IGN1c3RvbWl6ZXIob2JqVmFsdWUsIG90aFZhbHVlLCBrZXksIG9iamVjdCwgb3RoZXIsIHN0YWNrKTtcblx0ICAgIH1cblx0ICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuXHQgICAgaWYgKCEoY29tcGFyZWQgPT09IHVuZGVmaW5lZFxuXHQgICAgICAgICAgPyAob2JqVmFsdWUgPT09IG90aFZhbHVlIHx8IGVxdWFsRnVuYyhvYmpWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSlcblx0ICAgICAgICAgIDogY29tcGFyZWRcblx0ICAgICAgICApKSB7XG5cdCAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgICBicmVhaztcblx0ICAgIH1cblx0ICAgIHNraXBDdG9yIHx8IChza2lwQ3RvciA9IGtleSA9PSAnY29uc3RydWN0b3InKTtcblx0ICB9XG5cdCAgaWYgKHJlc3VsdCAmJiAhc2tpcEN0b3IpIHtcblx0ICAgIHZhciBvYmpDdG9yID0gb2JqZWN0LmNvbnN0cnVjdG9yLFxuXHQgICAgICAgIG90aEN0b3IgPSBvdGhlci5jb25zdHJ1Y3Rvcjtcblx0XG5cdCAgICAvLyBOb24gYE9iamVjdGAgb2JqZWN0IGluc3RhbmNlcyB3aXRoIGRpZmZlcmVudCBjb25zdHJ1Y3RvcnMgYXJlIG5vdCBlcXVhbC5cblx0ICAgIGlmIChvYmpDdG9yICE9IG90aEN0b3IgJiZcblx0ICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlcikgJiZcblx0ICAgICAgICAhKHR5cGVvZiBvYmpDdG9yID09ICdmdW5jdGlvbicgJiYgb2JqQ3RvciBpbnN0YW5jZW9mIG9iakN0b3IgJiZcblx0ICAgICAgICAgIHR5cGVvZiBvdGhDdG9yID09ICdmdW5jdGlvbicgJiYgb3RoQ3RvciBpbnN0YW5jZW9mIG90aEN0b3IpKSB7XG5cdCAgICAgIHJlc3VsdCA9IGZhbHNlO1xuXHQgICAgfVxuXHQgIH1cblx0ICBzdGFja1snZGVsZXRlJ10ob2JqZWN0KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGVxdWFsT2JqZWN0cztcblxuXG4vKioqLyB9LFxuLyogMTEyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZVByb3BlcnR5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyOCk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgXCJsZW5ndGhcIiBwcm9wZXJ0eSB2YWx1ZSBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhXG5cdCAqIFtKSVQgYnVnXShodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MTQyNzkyKSB0aGF0IGFmZmVjdHNcblx0ICogU2FmYXJpIG9uIGF0IGxlYXN0IGlPUyA4LjEtOC4zIEFSTTY0LlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuXHQgKi9cblx0dmFyIGdldExlbmd0aCA9IGJhc2VQcm9wZXJ0eSgnbGVuZ3RoJyk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldExlbmd0aDtcblxuXG4vKioqLyB9LFxuLyogMTEzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgaXNTdHJpY3RDb21wYXJhYmxlID0gX193ZWJwYWNrX3JlcXVpcmVfXygzMyksXG5cdCAgICBrZXlzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0MCk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgcHJvcGVydHkgbmFtZXMsIHZhbHVlcywgYW5kIGNvbXBhcmUgZmxhZ3Mgb2YgYG9iamVjdGAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBtYXRjaCBkYXRhIG9mIGBvYmplY3RgLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0TWF0Y2hEYXRhKG9iamVjdCkge1xuXHQgIHZhciByZXN1bHQgPSBrZXlzKG9iamVjdCksXG5cdCAgICAgIGxlbmd0aCA9IHJlc3VsdC5sZW5ndGg7XG5cdFxuXHQgIHdoaWxlIChsZW5ndGgtLSkge1xuXHQgICAgdmFyIGtleSA9IHJlc3VsdFtsZW5ndGhdLFxuXHQgICAgICAgIHZhbHVlID0gb2JqZWN0W2tleV07XG5cdFxuXHQgICAgcmVzdWx0W2xlbmd0aF0gPSBba2V5LCB2YWx1ZSwgaXNTdHJpY3RDb21wYXJhYmxlKHZhbHVlKV07XG5cdCAgfVxuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0TWF0Y2hEYXRhO1xuXG5cbi8qKiovIH0sXG4vKiAxMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZUdldFByb3RvdHlwZSA9IE9iamVjdC5nZXRQcm90b3R5cGVPZjtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBgW1tQcm90b3R5cGVdXWAgb2YgYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcXVlcnkuXG5cdCAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyB0aGUgYFtbUHJvdG90eXBlXV1gLlxuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0UHJvdG90eXBlKHZhbHVlKSB7XG5cdCAgcmV0dXJuIG5hdGl2ZUdldFByb3RvdHlwZShPYmplY3QodmFsdWUpKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXRQcm90b3R5cGU7XG5cblxuLyoqKi8gfSxcbi8qIDExNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIERhdGFWaWV3ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4NiksXG5cdCAgICBNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKSxcblx0ICAgIFByb21pc2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg4KSxcblx0ICAgIFNldCA9IF9fd2VicGFja19yZXF1aXJlX18oODkpLFxuXHQgICAgV2Vha01hcCA9IF9fd2VicGFja19yZXF1aXJlX18oOTIpLFxuXHQgICAgdG9Tb3VyY2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM1KTtcblx0XG5cdC8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuXHQgICAgb2JqZWN0VGFnID0gJ1tvYmplY3QgT2JqZWN0XScsXG5cdCAgICBwcm9taXNlVGFnID0gJ1tvYmplY3QgUHJvbWlzZV0nLFxuXHQgICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG5cdCAgICB3ZWFrTWFwVGFnID0gJ1tvYmplY3QgV2Vha01hcF0nO1xuXHRcblx0dmFyIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKlxuXHQgKiBVc2VkIHRvIHJlc29sdmUgdGhlXG5cdCAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuXHQgKiBvZiB2YWx1ZXMuXG5cdCAqL1xuXHR2YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblx0XG5cdC8qKiBVc2VkIHRvIGRldGVjdCBtYXBzLCBzZXRzLCBhbmQgd2Vha21hcHMuICovXG5cdHZhciBkYXRhVmlld0N0b3JTdHJpbmcgPSB0b1NvdXJjZShEYXRhVmlldyksXG5cdCAgICBtYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoTWFwKSxcblx0ICAgIHByb21pc2VDdG9yU3RyaW5nID0gdG9Tb3VyY2UoUHJvbWlzZSksXG5cdCAgICBzZXRDdG9yU3RyaW5nID0gdG9Tb3VyY2UoU2V0KSxcblx0ICAgIHdlYWtNYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoV2Vha01hcCk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgYHRvU3RyaW5nVGFnYCBvZiBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cblx0ICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgYHRvU3RyaW5nVGFnYC5cblx0ICovXG5cdGZ1bmN0aW9uIGdldFRhZyh2YWx1ZSkge1xuXHQgIHJldHVybiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKTtcblx0fVxuXHRcblx0Ly8gRmFsbGJhY2sgZm9yIGRhdGEgdmlld3MsIG1hcHMsIHNldHMsIGFuZCB3ZWFrIG1hcHMgaW4gSUUgMTEsXG5cdC8vIGZvciBkYXRhIHZpZXdzIGluIEVkZ2UsIGFuZCBwcm9taXNlcyBpbiBOb2RlLmpzLlxuXHRpZiAoKERhdGFWaWV3ICYmIGdldFRhZyhuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpKSkgIT0gZGF0YVZpZXdUYWcpIHx8XG5cdCAgICAoTWFwICYmIGdldFRhZyhuZXcgTWFwKSAhPSBtYXBUYWcpIHx8XG5cdCAgICAoUHJvbWlzZSAmJiBnZXRUYWcoUHJvbWlzZS5yZXNvbHZlKCkpICE9IHByb21pc2VUYWcpIHx8XG5cdCAgICAoU2V0ICYmIGdldFRhZyhuZXcgU2V0KSAhPSBzZXRUYWcpIHx8XG5cdCAgICAoV2Vha01hcCAmJiBnZXRUYWcobmV3IFdlYWtNYXApICE9IHdlYWtNYXBUYWcpKSB7XG5cdCAgZ2V0VGFnID0gZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgIHZhciByZXN1bHQgPSBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSxcblx0ICAgICAgICBDdG9yID0gcmVzdWx0ID09IG9iamVjdFRhZyA/IHZhbHVlLmNvbnN0cnVjdG9yIDogdW5kZWZpbmVkLFxuXHQgICAgICAgIGN0b3JTdHJpbmcgPSBDdG9yID8gdG9Tb3VyY2UoQ3RvcikgOiB1bmRlZmluZWQ7XG5cdFxuXHQgICAgaWYgKGN0b3JTdHJpbmcpIHtcblx0ICAgICAgc3dpdGNoIChjdG9yU3RyaW5nKSB7XG5cdCAgICAgICAgY2FzZSBkYXRhVmlld0N0b3JTdHJpbmc6IHJldHVybiBkYXRhVmlld1RhZztcblx0ICAgICAgICBjYXNlIG1hcEN0b3JTdHJpbmc6IHJldHVybiBtYXBUYWc7XG5cdCAgICAgICAgY2FzZSBwcm9taXNlQ3RvclN0cmluZzogcmV0dXJuIHByb21pc2VUYWc7XG5cdCAgICAgICAgY2FzZSBzZXRDdG9yU3RyaW5nOiByZXR1cm4gc2V0VGFnO1xuXHQgICAgICAgIGNhc2Ugd2Vha01hcEN0b3JTdHJpbmc6IHJldHVybiB3ZWFrTWFwVGFnO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZ2V0VGFnO1xuXG5cbi8qKiovIH0sXG4vKiAxMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBHZXRzIHRoZSB2YWx1ZSBhdCBga2V5YCBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcHJvcGVydHkgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBnZXRWYWx1ZShvYmplY3QsIGtleSkge1xuXHQgIHJldHVybiBvYmplY3QgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IG9iamVjdFtrZXldO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGdldFZhbHVlO1xuXG5cbi8qKiovIH0sXG4vKiAxMTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBjYXN0UGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMjkpLFxuXHQgICAgaXNBcmd1bWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KSxcblx0ICAgIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNJbmRleCA9IF9fd2VicGFja19yZXF1aXJlX18oMzIpLFxuXHQgICAgaXNLZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEyKSxcblx0ICAgIGlzTGVuZ3RoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSksXG5cdCAgICBpc1N0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMzkpLFxuXHQgICAgdG9LZXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE0KTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHBhdGhgIGV4aXN0cyBvbiBgb2JqZWN0YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gaGFzRnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgcHJvcGVydGllcy5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBwYXRoYCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGhhc1BhdGgob2JqZWN0LCBwYXRoLCBoYXNGdW5jKSB7XG5cdCAgcGF0aCA9IGlzS2V5KHBhdGgsIG9iamVjdCkgPyBbcGF0aF0gOiBjYXN0UGF0aChwYXRoKTtcblx0XG5cdCAgdmFyIHJlc3VsdCxcblx0ICAgICAgaW5kZXggPSAtMSxcblx0ICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGg7XG5cdFxuXHQgIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG5cdCAgICB2YXIga2V5ID0gdG9LZXkocGF0aFtpbmRleF0pO1xuXHQgICAgaWYgKCEocmVzdWx0ID0gb2JqZWN0ICE9IG51bGwgJiYgaGFzRnVuYyhvYmplY3QsIGtleSkpKSB7XG5cdCAgICAgIGJyZWFrO1xuXHQgICAgfVxuXHQgICAgb2JqZWN0ID0gb2JqZWN0W2tleV07XG5cdCAgfVxuXHQgIGlmIChyZXN1bHQpIHtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHQgIHZhciBsZW5ndGggPSBvYmplY3QgPyBvYmplY3QubGVuZ3RoIDogMDtcblx0ICByZXR1cm4gISFsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSAmJlxuXHQgICAgKGlzQXJyYXkob2JqZWN0KSB8fCBpc1N0cmluZyhvYmplY3QpIHx8IGlzQXJndW1lbnRzKG9iamVjdCkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc1BhdGg7XG5cblxuLyoqKi8gfSxcbi8qIDExOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG5hdGl2ZUNyZWF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTMpO1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZXMgYWxsIGtleS12YWx1ZSBlbnRyaWVzIGZyb20gdGhlIGhhc2guXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGNsZWFyXG5cdCAqIEBtZW1iZXJPZiBIYXNoXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoQ2xlYXIoKSB7XG5cdCAgdGhpcy5fX2RhdGFfXyA9IG5hdGl2ZUNyZWF0ZSA/IG5hdGl2ZUNyZWF0ZShudWxsKSA6IHt9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGhhc2hDbGVhcjtcblxuXG4vKioqLyB9LFxuLyogMTE5ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGhhc2guXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGRlbGV0ZVxuXHQgKiBAbWVtYmVyT2YgSGFzaFxuXHQgKiBAcGFyYW0ge09iamVjdH0gaGFzaCBUaGUgaGFzaCB0byBtb2RpZnkuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoRGVsZXRlKGtleSkge1xuXHQgIHJldHVybiB0aGlzLmhhcyhrZXkpICYmIGRlbGV0ZSB0aGlzLl9fZGF0YV9fW2tleV07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzaERlbGV0ZTtcblxuXG4vKioqLyB9LFxuLyogMTIwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbmF0aXZlQ3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG5cdHZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblx0XG5cdC8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cblx0dmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblx0XG5cdC8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xuXHR2YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblx0XG5cdC8qKlxuXHQgKiBHZXRzIHRoZSBoYXNoIHZhbHVlIGZvciBga2V5YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZ2V0XG5cdCAqIEBtZW1iZXJPZiBIYXNoXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoR2V0KGtleSkge1xuXHQgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcblx0ICBpZiAobmF0aXZlQ3JlYXRlKSB7XG5cdCAgICB2YXIgcmVzdWx0ID0gZGF0YVtrZXldO1xuXHQgICAgcmV0dXJuIHJlc3VsdCA9PT0gSEFTSF9VTkRFRklORUQgPyB1bmRlZmluZWQgOiByZXN1bHQ7XG5cdCAgfVxuXHQgIHJldHVybiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSkgPyBkYXRhW2tleV0gOiB1bmRlZmluZWQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzaEdldDtcblxuXG4vKioqLyB9LFxuLyogMTIxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgbmF0aXZlQ3JlYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMyk7XG5cdFxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cblx0dmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGEgaGFzaCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBoYXNcblx0ICogQG1lbWJlck9mIEhhc2hcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIGhhc2hIYXMoa2V5KSB7XG5cdCAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuXHQgIHJldHVybiBuYXRpdmVDcmVhdGUgPyBkYXRhW2tleV0gIT09IHVuZGVmaW5lZCA6IGhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBoYXNoSGFzO1xuXG5cbi8qKiovIH0sXG4vKiAxMjIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBuYXRpdmVDcmVhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEzKTtcblx0XG5cdC8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cblx0dmFyIEhBU0hfVU5ERUZJTkVEID0gJ19fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18nO1xuXHRcblx0LyoqXG5cdCAqIFNldHMgdGhlIGhhc2ggYGtleWAgdG8gYHZhbHVlYC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgc2V0XG5cdCAqIEBtZW1iZXJPZiBIYXNoXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGhhc2ggaW5zdGFuY2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBoYXNoU2V0KGtleSwgdmFsdWUpIHtcblx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG5cdCAgZGF0YVtrZXldID0gKG5hdGl2ZUNyZWF0ZSAmJiB2YWx1ZSA9PT0gdW5kZWZpbmVkKSA/IEhBU0hfVU5ERUZJTkVEIDogdmFsdWU7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaGFzaFNldDtcblxuXG4vKioqLyB9LFxuLyogMTIzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZVRpbWVzID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDYpLFxuXHQgICAgaXNBcmd1bWVudHMgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDM3KSxcblx0ICAgIGlzQXJyYXkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpLFxuXHQgICAgaXNMZW5ndGggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1KSxcblx0ICAgIGlzU3RyaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygzOSk7XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlcyBhbiBhcnJheSBvZiBpbmRleCBrZXlzIGZvciBgb2JqZWN0YCB2YWx1ZXMgb2YgYXJyYXlzLFxuXHQgKiBgYXJndW1lbnRzYCBvYmplY3RzLCBhbmQgc3RyaW5ncywgb3RoZXJ3aXNlIGBudWxsYCBpcyByZXR1cm5lZC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl8bnVsbH0gUmV0dXJucyBpbmRleCBrZXlzLCBlbHNlIGBudWxsYC5cblx0ICovXG5cdGZ1bmN0aW9uIGluZGV4S2V5cyhvYmplY3QpIHtcblx0ICB2YXIgbGVuZ3RoID0gb2JqZWN0ID8gb2JqZWN0Lmxlbmd0aCA6IHVuZGVmaW5lZDtcblx0ICBpZiAoaXNMZW5ndGgobGVuZ3RoKSAmJlxuXHQgICAgICAoaXNBcnJheShvYmplY3QpIHx8IGlzU3RyaW5nKG9iamVjdCkgfHwgaXNBcmd1bWVudHMob2JqZWN0KSkpIHtcblx0ICAgIHJldHVybiBiYXNlVGltZXMobGVuZ3RoLCBTdHJpbmcpO1xuXHQgIH1cblx0ICByZXR1cm4gbnVsbDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpbmRleEtleXM7XG5cblxuLyoqKi8gfSxcbi8qIDEyNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgdW5pcXVlIG9iamVjdCBrZXkuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBzdWl0YWJsZSwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gaXNLZXlhYmxlKHZhbHVlKSB7XG5cdCAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cdCAgcmV0dXJuICh0eXBlID09ICdzdHJpbmcnIHx8IHR5cGUgPT0gJ251bWJlcicgfHwgdHlwZSA9PSAnc3ltYm9sJyB8fCB0eXBlID09ICdib29sZWFuJylcblx0ICAgID8gKHZhbHVlICE9PSAnX19wcm90b19fJylcblx0ICAgIDogKHZhbHVlID09PSBudWxsKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc0tleWFibGU7XG5cblxuLyoqKi8gfSxcbi8qIDEyNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGNvcmVKc0RhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEwOSk7XG5cdFxuXHQvKiogVXNlZCB0byBkZXRlY3QgbWV0aG9kcyBtYXNxdWVyYWRpbmcgYXMgbmF0aXZlLiAqL1xuXHR2YXIgbWFza1NyY0tleSA9IChmdW5jdGlvbigpIHtcblx0ICB2YXIgdWlkID0gL1teLl0rJC8uZXhlYyhjb3JlSnNEYXRhICYmIGNvcmVKc0RhdGEua2V5cyAmJiBjb3JlSnNEYXRhLmtleXMuSUVfUFJPVE8gfHwgJycpO1xuXHQgIHJldHVybiB1aWQgPyAoJ1N5bWJvbChzcmMpXzEuJyArIHVpZCkgOiAnJztcblx0fSgpKTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYGZ1bmNgIGhhcyBpdHMgc291cmNlIG1hc2tlZC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgZnVuY2AgaXMgbWFza2VkLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc01hc2tlZChmdW5jKSB7XG5cdCAgcmV0dXJuICEhbWFza1NyY0tleSAmJiAobWFza1NyY0tleSBpbiBmdW5jKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBpc01hc2tlZDtcblxuXG4vKioqLyB9LFxuLyogMTI2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG5cdHZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgbGlrZWx5IGEgcHJvdG90eXBlIG9iamVjdC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBpc1Byb3RvdHlwZSh2YWx1ZSkge1xuXHQgIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG5cdCAgICAgIHByb3RvID0gKHR5cGVvZiBDdG9yID09ICdmdW5jdGlvbicgJiYgQ3Rvci5wcm90b3R5cGUpIHx8IG9iamVjdFByb3RvO1xuXHRcblx0ICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlzUHJvdG90eXBlO1xuXG5cbi8qKiovIH0sXG4vKiAxMjcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBjbGVhclxuXHQgKiBAbWVtYmVyT2YgTGlzdENhY2hlXG5cdCAqL1xuXHRmdW5jdGlvbiBsaXN0Q2FjaGVDbGVhcigpIHtcblx0ICB0aGlzLl9fZGF0YV9fID0gW107XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbGlzdENhY2hlQ2xlYXI7XG5cblxuLyoqKi8gfSxcbi8qIDEyOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFzc29jSW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcblx0XG5cdC8qKiBCdWlsdC1pbiB2YWx1ZSByZWZlcmVuY2VzLiAqL1xuXHR2YXIgc3BsaWNlID0gYXJyYXlQcm90by5zcGxpY2U7XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGxpc3QgY2FjaGUuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGRlbGV0ZVxuXHQgKiBAbWVtYmVyT2YgTGlzdENhY2hlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBsaXN0Q2FjaGVEZWxldGUoa2V5KSB7XG5cdCAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuXHQgICAgICBpbmRleCA9IGFzc29jSW5kZXhPZihkYXRhLCBrZXkpO1xuXHRcblx0ICBpZiAoaW5kZXggPCAwKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciBsYXN0SW5kZXggPSBkYXRhLmxlbmd0aCAtIDE7XG5cdCAgaWYgKGluZGV4ID09IGxhc3RJbmRleCkge1xuXHQgICAgZGF0YS5wb3AoKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgc3BsaWNlLmNhbGwoZGF0YSwgaW5kZXgsIDEpO1xuXHQgIH1cblx0ICByZXR1cm4gdHJ1ZTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVEZWxldGU7XG5cblxuLyoqKi8gfSxcbi8qIDEyOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGFzc29jSW5kZXhPZiA9IF9fd2VicGFja19yZXF1aXJlX18oMTApO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIGxpc3QgY2FjaGUgdmFsdWUgZm9yIGBrZXlgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBnZXRcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlR2V0KGtleSkge1xuXHQgIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcblx0ICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblx0XG5cdCAgcmV0dXJuIGluZGV4IDwgMCA/IHVuZGVmaW5lZCA6IGRhdGFbaW5kZXhdWzFdO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUdldDtcblxuXG4vKioqLyB9LFxuLyogMTMwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYXNzb2NJbmRleE9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHQvKipcblx0ICogQ2hlY2tzIGlmIGEgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBoYXNcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlSGFzKGtleSkge1xuXHQgIHJldHVybiBhc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUhhcztcblxuXG4vKioqLyB9LFxuLyogMTMxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYXNzb2NJbmRleE9mID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMCk7XG5cdFxuXHQvKipcblx0ICogU2V0cyB0aGUgbGlzdCBjYWNoZSBga2V5YCB0byBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBzZXRcblx0ICogQG1lbWJlck9mIExpc3RDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBsaXN0IGNhY2hlIGluc3RhbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gbGlzdENhY2hlU2V0KGtleSwgdmFsdWUpIHtcblx0ICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX18sXG5cdCAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cdFxuXHQgIGlmIChpbmRleCA8IDApIHtcblx0ICAgIGRhdGEucHVzaChba2V5LCB2YWx1ZV0pO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBkYXRhW2luZGV4XVsxXSA9IHZhbHVlO1xuXHQgIH1cblx0ICByZXR1cm4gdGhpcztcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVTZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEzMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIEhhc2ggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDg3KSxcblx0ICAgIExpc3RDYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oOSksXG5cdCAgICBNYXAgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIyKTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBtYXAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGNsZWFyXG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2FjaGVDbGVhcigpIHtcblx0ICB0aGlzLl9fZGF0YV9fID0ge1xuXHQgICAgJ2hhc2gnOiBuZXcgSGFzaCxcblx0ICAgICdtYXAnOiBuZXcgKE1hcCB8fCBMaXN0Q2FjaGUpLFxuXHQgICAgJ3N0cmluZyc6IG5ldyBIYXNoXG5cdCAgfTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUNsZWFyO1xuXG5cbi8qKiovIH0sXG4vKiAxMzMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBnZXRNYXBEYXRhID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMSk7XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIG1hcC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZGVsZXRlXG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2FjaGVEZWxldGUoa2V5KSB7XG5cdCAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KVsnZGVsZXRlJ10oa2V5KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZURlbGV0ZTtcblxuXG4vKioqLyB9LFxuLyogMTM0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TWFwRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0LyoqXG5cdCAqIEdldHMgdGhlIG1hcCB2YWx1ZSBmb3IgYGtleWAuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGdldFxuXHQgKiBAbWVtYmVyT2YgTWFwQ2FjaGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBlbnRyeSB2YWx1ZS5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcENhY2hlR2V0KGtleSkge1xuXHQgIHJldHVybiBnZXRNYXBEYXRhKHRoaXMsIGtleSkuZ2V0KGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWFwQ2FjaGVHZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDEzNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGdldE1hcERhdGEgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDExKTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYSBtYXAgdmFsdWUgZm9yIGBrZXlgIGV4aXN0cy5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgaGFzXG5cdCAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gbWFwQ2FjaGVIYXMoa2V5KSB7XG5cdCAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5oYXMoa2V5KTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUhhcztcblxuXG4vKioqLyB9LFxuLyogMTM2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgZ2V0TWFwRGF0YSA9IF9fd2VicGFja19yZXF1aXJlX18oMTEpO1xuXHRcblx0LyoqXG5cdCAqIFNldHMgdGhlIG1hcCBga2V5YCB0byBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBzZXRcblx0ICogQG1lbWJlck9mIE1hcENhY2hlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG1hcCBjYWNoZSBpbnN0YW5jZS5cblx0ICovXG5cdGZ1bmN0aW9uIG1hcENhY2hlU2V0KGtleSwgdmFsdWUpIHtcblx0ICBnZXRNYXBEYXRhKHRoaXMsIGtleSkuc2V0KGtleSwgdmFsdWUpO1xuXHQgIHJldHVybiB0aGlzO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlU2V0O1xuXG5cbi8qKiovIH0sXG4vKiAxMzcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdC8qKlxuXHQgKiBDb252ZXJ0cyBgbWFwYCB0byBpdHMga2V5LXZhbHVlIHBhaXJzLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gbWFwIFRoZSBtYXAgdG8gY29udmVydC5cblx0ICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBrZXktdmFsdWUgcGFpcnMuXG5cdCAqL1xuXHRmdW5jdGlvbiBtYXBUb0FycmF5KG1hcCkge1xuXHQgIHZhciBpbmRleCA9IC0xLFxuXHQgICAgICByZXN1bHQgPSBBcnJheShtYXAuc2l6ZSk7XG5cdFxuXHQgIG1hcC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBrZXkpIHtcblx0ICAgIHJlc3VsdFsrK2luZGV4XSA9IFtrZXksIHZhbHVlXTtcblx0ICB9KTtcblx0ICByZXR1cm4gcmVzdWx0O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IG1hcFRvQXJyYXk7XG5cblxuLyoqKi8gfSxcbi8qIDEzOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xuXHR2YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cdFxuXHQvKipcblx0ICogQWRkcyBgdmFsdWVgIHRvIHRoZSBhcnJheSBjYWNoZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgYWRkXG5cdCAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuXHQgKiBAYWxpYXMgcHVzaFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjYWNoZS5cblx0ICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgY2FjaGUgaW5zdGFuY2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRDYWNoZUFkZCh2YWx1ZSkge1xuXHQgIHRoaXMuX19kYXRhX18uc2V0KHZhbHVlLCBIQVNIX1VOREVGSU5FRCk7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2V0Q2FjaGVBZGQ7XG5cblxuLyoqKi8gfSxcbi8qIDEzOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIHRoZSBhcnJheSBjYWNoZS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgaGFzXG5cdCAqIEBtZW1iZXJPZiBTZXRDYWNoZVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZWFyY2ggZm9yLlxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG5cdCAqL1xuXHRmdW5jdGlvbiBzZXRDYWNoZUhhcyh2YWx1ZSkge1xuXHQgIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2V0Q2FjaGVIYXM7XG5cblxuLyoqKi8gfSxcbi8qIDE0MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENvbnZlcnRzIGBzZXRgIHRvIGFuIGFycmF5IG9mIGl0cyB2YWx1ZXMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBzZXQgVGhlIHNldCB0byBjb252ZXJ0LlxuXHQgKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIHZhbHVlcy5cblx0ICovXG5cdGZ1bmN0aW9uIHNldFRvQXJyYXkoc2V0KSB7XG5cdCAgdmFyIGluZGV4ID0gLTEsXG5cdCAgICAgIHJlc3VsdCA9IEFycmF5KHNldC5zaXplKTtcblx0XG5cdCAgc2V0LmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcblx0ICAgIHJlc3VsdFsrK2luZGV4XSA9IHZhbHVlO1xuXHQgIH0pO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc2V0VG9BcnJheTtcblxuXG4vKioqLyB9LFxuLyogMTQxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgTGlzdENhY2hlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg5KTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBzdGFjay5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgY2xlYXJcblx0ICogQG1lbWJlck9mIFN0YWNrXG5cdCAqL1xuXHRmdW5jdGlvbiBzdGFja0NsZWFyKCkge1xuXHQgIHRoaXMuX19kYXRhX18gPSBuZXcgTGlzdENhY2hlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHN0YWNrQ2xlYXI7XG5cblxuLyoqKi8gfSxcbi8qIDE0MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBzdGFjay5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZGVsZXRlXG5cdCAqIEBtZW1iZXJPZiBTdGFja1xuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tEZWxldGUoa2V5KSB7XG5cdCAgcmV0dXJuIHRoaXMuX19kYXRhX19bJ2RlbGV0ZSddKGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RhY2tEZWxldGU7XG5cblxuLyoqKi8gfSxcbi8qIDE0MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIHN0YWNrIHZhbHVlIGZvciBga2V5YC5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQG5hbWUgZ2V0XG5cdCAqIEBtZW1iZXJPZiBTdGFja1xuXHQgKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIGdldC5cblx0ICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tHZXQoa2V5KSB7XG5cdCAgcmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KGtleSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RhY2tHZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDE0NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyoqXG5cdCAqIENoZWNrcyBpZiBhIHN0YWNrIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG5cdCAqXG5cdCAqIEBwcml2YXRlXG5cdCAqIEBuYW1lIGhhc1xuXHQgKiBAbWVtYmVyT2YgU3RhY2tcblx0ICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cblx0ICovXG5cdGZ1bmN0aW9uIHN0YWNrSGFzKGtleSkge1xuXHQgIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyhrZXkpO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHN0YWNrSGFzO1xuXG5cbi8qKiovIH0sXG4vKiAxNDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBMaXN0Q2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkpLFxuXHQgICAgTWFwQ2FjaGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3KTtcblx0XG5cdC8qKiBVc2VkIGFzIHRoZSBzaXplIHRvIGVuYWJsZSBsYXJnZSBhcnJheSBvcHRpbWl6YXRpb25zLiAqL1xuXHR2YXIgTEFSR0VfQVJSQVlfU0laRSA9IDIwMDtcblx0XG5cdC8qKlxuXHQgKiBTZXRzIHRoZSBzdGFjayBga2V5YCB0byBgdmFsdWVgLlxuXHQgKlxuXHQgKiBAcHJpdmF0ZVxuXHQgKiBAbmFtZSBzZXRcblx0ICogQG1lbWJlck9mIFN0YWNrXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG5cdCAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIHN0YWNrIGNhY2hlIGluc3RhbmNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gc3RhY2tTZXQoa2V5LCB2YWx1ZSkge1xuXHQgIHZhciBjYWNoZSA9IHRoaXMuX19kYXRhX187XG5cdCAgaWYgKGNhY2hlIGluc3RhbmNlb2YgTGlzdENhY2hlICYmIGNhY2hlLl9fZGF0YV9fLmxlbmd0aCA9PSBMQVJHRV9BUlJBWV9TSVpFKSB7XG5cdCAgICBjYWNoZSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGUoY2FjaGUuX19kYXRhX18pO1xuXHQgIH1cblx0ICBjYWNoZS5zZXQoa2V5LCB2YWx1ZSk7XG5cdCAgcmV0dXJuIHRoaXM7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gc3RhY2tTZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDE0NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIG1lbW9pemUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE1NSksXG5cdCAgICB0b1N0cmluZyA9IF9fd2VicGFja19yZXF1aXJlX18oMTYwKTtcblx0XG5cdC8qKiBVc2VkIHRvIG1hdGNoIHByb3BlcnR5IG5hbWVzIHdpdGhpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlUHJvcE5hbWUgPSAvW14uW1xcXV0rfFxcWyg/OigtP1xcZCsoPzpcXC5cXGQrKT8pfChbXCInXSkoKD86KD8hXFwyKVteXFxcXF18XFxcXC4pKj8pXFwyKVxcXXwoPz0oXFwufFxcW1xcXSkoPzpcXDR8JCkpL2c7XG5cdFxuXHQvKiogVXNlZCB0byBtYXRjaCBiYWNrc2xhc2hlcyBpbiBwcm9wZXJ0eSBwYXRocy4gKi9cblx0dmFyIHJlRXNjYXBlQ2hhciA9IC9cXFxcKFxcXFwpPy9nO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGBzdHJpbmdgIHRvIGEgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICpcblx0ICogQHByaXZhdGVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHN0cmluZyBUaGUgc3RyaW5nIHRvIGNvbnZlcnQuXG5cdCAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cblx0ICovXG5cdHZhciBzdHJpbmdUb1BhdGggPSBtZW1vaXplKGZ1bmN0aW9uKHN0cmluZykge1xuXHQgIHZhciByZXN1bHQgPSBbXTtcblx0ICB0b1N0cmluZyhzdHJpbmcpLnJlcGxhY2UocmVQcm9wTmFtZSwgZnVuY3Rpb24obWF0Y2gsIG51bWJlciwgcXVvdGUsIHN0cmluZykge1xuXHQgICAgcmVzdWx0LnB1c2gocXVvdGUgPyBzdHJpbmcucmVwbGFjZShyZUVzY2FwZUNoYXIsICckMScpIDogKG51bWJlciB8fCBtYXRjaCkpO1xuXHQgIH0pO1xuXHQgIHJldHVybiByZXN1bHQ7XG5cdH0pO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBzdHJpbmdUb1BhdGg7XG5cblxuLyoqKi8gfSxcbi8qIDE0NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzT2JqZWN0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3KSxcblx0ICAgIG5vdyA9IF9fd2VicGFja19yZXF1aXJlX18oMTU2KSxcblx0ICAgIHRvTnVtYmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdFxuXHQvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xuXHR2YXIgRlVOQ19FUlJPUl9URVhUID0gJ0V4cGVjdGVkIGEgZnVuY3Rpb24nO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXgsXG5cdCAgICBuYXRpdmVNaW4gPSBNYXRoLm1pbjtcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZGVib3VuY2VkIGZ1bmN0aW9uIHRoYXQgZGVsYXlzIGludm9raW5nIGBmdW5jYCB1bnRpbCBhZnRlciBgd2FpdGBcblx0ICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG5cdCAqIGludm9rZWQuIFRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gY29tZXMgd2l0aCBhIGBjYW5jZWxgIG1ldGhvZCB0byBjYW5jZWxcblx0ICogZGVsYXllZCBgZnVuY2AgaW52b2NhdGlvbnMgYW5kIGEgYGZsdXNoYCBtZXRob2QgdG8gaW1tZWRpYXRlbHkgaW52b2tlIHRoZW0uXG5cdCAqIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb25cblx0ICogdGhlIGxlYWRpbmcgYW5kL29yIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIGB3YWl0YCB0aW1lb3V0LiBUaGUgYGZ1bmNgIGlzIGludm9rZWRcblx0ICogd2l0aCB0aGUgbGFzdCBhcmd1bWVudHMgcHJvdmlkZWQgdG8gdGhlIGRlYm91bmNlZCBmdW5jdGlvbi4gU3Vic2VxdWVudCBjYWxsc1xuXHQgKiB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuXHQgKlxuXHQgKiAqKk5vdGU6KiogSWYgYGxlYWRpbmdgIGFuZCBgdHJhaWxpbmdgIG9wdGlvbnMgYXJlIGB0cnVlYCwgYGZ1bmNgIGlzIGludm9rZWRcblx0ICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIGlzXG5cdCAqIGludm9rZWQgbW9yZSB0aGFuIG9uY2UgZHVyaW5nIHRoZSBgd2FpdGAgdGltZW91dC5cblx0ICpcblx0ICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG5cdCAqIGZvciBkZXRhaWxzIG92ZXIgdGhlIGRpZmZlcmVuY2VzIGJldHdlZW4gYF8uZGVib3VuY2VgIGFuZCBgXy50aHJvdHRsZWAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBGdW5jdGlvblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWJvdW5jZS5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFt3YWl0PTBdIFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5LlxuXHQgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cblx0ICogQHBhcmFtIHtib29sZWFufSBbb3B0aW9ucy5sZWFkaW5nPWZhbHNlXVxuXHQgKiAgU3BlY2lmeSBpbnZva2luZyBvbiB0aGUgbGVhZGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cblx0ICogIFRoZSBtYXhpbXVtIHRpbWUgYGZ1bmNgIGlzIGFsbG93ZWQgdG8gYmUgZGVsYXllZCBiZWZvcmUgaXQncyBpbnZva2VkLlxuXHQgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLnRyYWlsaW5nPXRydWVdXG5cdCAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBkZWJvdW5jZWQgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIC8vIEF2b2lkIGNvc3RseSBjYWxjdWxhdGlvbnMgd2hpbGUgdGhlIHdpbmRvdyBzaXplIGlzIGluIGZsdXguXG5cdCAqIGpRdWVyeSh3aW5kb3cpLm9uKCdyZXNpemUnLCBfLmRlYm91bmNlKGNhbGN1bGF0ZUxheW91dCwgMTUwKSk7XG5cdCAqXG5cdCAqIC8vIEludm9rZSBgc2VuZE1haWxgIHdoZW4gY2xpY2tlZCwgZGVib3VuY2luZyBzdWJzZXF1ZW50IGNhbGxzLlxuXHQgKiBqUXVlcnkoZWxlbWVudCkub24oJ2NsaWNrJywgXy5kZWJvdW5jZShzZW5kTWFpbCwgMzAwLCB7XG5cdCAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuXHQgKiAgICd0cmFpbGluZyc6IGZhbHNlXG5cdCAqIH0pKTtcblx0ICpcblx0ICogLy8gRW5zdXJlIGBiYXRjaExvZ2AgaXMgaW52b2tlZCBvbmNlIGFmdGVyIDEgc2Vjb25kIG9mIGRlYm91bmNlZCBjYWxscy5cblx0ICogdmFyIGRlYm91bmNlZCA9IF8uZGVib3VuY2UoYmF0Y2hMb2csIDI1MCwgeyAnbWF4V2FpdCc6IDEwMDAgfSk7XG5cdCAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcblx0ICogalF1ZXJ5KHNvdXJjZSkub24oJ21lc3NhZ2UnLCBkZWJvdW5jZWQpO1xuXHQgKlxuXHQgKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuXHQgKiBqUXVlcnkod2luZG93KS5vbigncG9wc3RhdGUnLCBkZWJvdW5jZWQuY2FuY2VsKTtcblx0ICovXG5cdGZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcblx0ICB2YXIgbGFzdEFyZ3MsXG5cdCAgICAgIGxhc3RUaGlzLFxuXHQgICAgICBtYXhXYWl0LFxuXHQgICAgICByZXN1bHQsXG5cdCAgICAgIHRpbWVySWQsXG5cdCAgICAgIGxhc3RDYWxsVGltZSxcblx0ICAgICAgbGFzdEludm9rZVRpbWUgPSAwLFxuXHQgICAgICBsZWFkaW5nID0gZmFsc2UsXG5cdCAgICAgIG1heGluZyA9IGZhbHNlLFxuXHQgICAgICB0cmFpbGluZyA9IHRydWU7XG5cdFxuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuXHQgIGlmIChpc09iamVjdChvcHRpb25zKSkge1xuXHQgICAgbGVhZGluZyA9ICEhb3B0aW9ucy5sZWFkaW5nO1xuXHQgICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG5cdCAgICBtYXhXYWl0ID0gbWF4aW5nID8gbmF0aXZlTWF4KHRvTnVtYmVyKG9wdGlvbnMubWF4V2FpdCkgfHwgMCwgd2FpdCkgOiBtYXhXYWl0O1xuXHQgICAgdHJhaWxpbmcgPSAndHJhaWxpbmcnIGluIG9wdGlvbnMgPyAhIW9wdGlvbnMudHJhaWxpbmcgOiB0cmFpbGluZztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGludm9rZUZ1bmModGltZSkge1xuXHQgICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcblx0ICAgICAgICB0aGlzQXJnID0gbGFzdFRoaXM7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkodGhpc0FyZywgYXJncyk7XG5cdCAgICByZXR1cm4gcmVzdWx0O1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuXHQgICAgLy8gUmVzZXQgYW55IGBtYXhXYWl0YCB0aW1lci5cblx0ICAgIGxhc3RJbnZva2VUaW1lID0gdGltZTtcblx0ICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG5cdCAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgLy8gSW52b2tlIHRoZSBsZWFkaW5nIGVkZ2UuXG5cdCAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcblx0ICAgIHZhciB0aW1lU2luY2VMYXN0Q2FsbCA9IHRpbWUgLSBsYXN0Q2FsbFRpbWUsXG5cdCAgICAgICAgdGltZVNpbmNlTGFzdEludm9rZSA9IHRpbWUgLSBsYXN0SW52b2tlVGltZSxcblx0ICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cdFxuXHQgICAgcmV0dXJuIG1heGluZyA/IG5hdGl2ZU1pbihyZXN1bHQsIG1heFdhaXQgLSB0aW1lU2luY2VMYXN0SW52b2tlKSA6IHJlc3VsdDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHNob3VsZEludm9rZSh0aW1lKSB7XG5cdCAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuXHQgICAgICAgIHRpbWVTaW5jZUxhc3RJbnZva2UgPSB0aW1lIC0gbGFzdEludm9rZVRpbWU7XG5cdFxuXHQgICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcblx0ICAgIC8vIHRyYWlsaW5nIGVkZ2UsIHRoZSBzeXN0ZW0gdGltZSBoYXMgZ29uZSBiYWNrd2FyZHMgYW5kIHdlJ3JlIHRyZWF0aW5nXG5cdCAgICAvLyBpdCBhcyB0aGUgdHJhaWxpbmcgZWRnZSwgb3Igd2UndmUgaGl0IHRoZSBgbWF4V2FpdGAgbGltaXQuXG5cdCAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuXHQgICAgICAodGltZVNpbmNlTGFzdENhbGwgPCAwKSB8fCAobWF4aW5nICYmIHRpbWVTaW5jZUxhc3RJbnZva2UgPj0gbWF4V2FpdCkpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gdGltZXJFeHBpcmVkKCkge1xuXHQgICAgdmFyIHRpbWUgPSBub3coKTtcblx0ICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcblx0ICAgICAgcmV0dXJuIHRyYWlsaW5nRWRnZSh0aW1lKTtcblx0ICAgIH1cblx0ICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuXHQgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCByZW1haW5pbmdXYWl0KHRpbWUpKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRyYWlsaW5nRWRnZSh0aW1lKSB7XG5cdCAgICB0aW1lcklkID0gdW5kZWZpbmVkO1xuXHRcblx0ICAgIC8vIE9ubHkgaW52b2tlIGlmIHdlIGhhdmUgYGxhc3RBcmdzYCB3aGljaCBtZWFucyBgZnVuY2AgaGFzIGJlZW5cblx0ICAgIC8vIGRlYm91bmNlZCBhdCBsZWFzdCBvbmNlLlxuXHQgICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG5cdCAgICAgIHJldHVybiBpbnZva2VGdW5jKHRpbWUpO1xuXHQgICAgfVxuXHQgICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBjYW5jZWwoKSB7XG5cdCAgICBsYXN0SW52b2tlVGltZSA9IDA7XG5cdCAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGZsdXNoKCkge1xuXHQgICAgcmV0dXJuIHRpbWVySWQgPT09IHVuZGVmaW5lZCA/IHJlc3VsdCA6IHRyYWlsaW5nRWRnZShub3coKSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBkZWJvdW5jZWQoKSB7XG5cdCAgICB2YXIgdGltZSA9IG5vdygpLFxuXHQgICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cdFxuXHQgICAgbGFzdEFyZ3MgPSBhcmd1bWVudHM7XG5cdCAgICBsYXN0VGhpcyA9IHRoaXM7XG5cdCAgICBsYXN0Q2FsbFRpbWUgPSB0aW1lO1xuXHRcblx0ICAgIGlmIChpc0ludm9raW5nKSB7XG5cdCAgICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgICByZXR1cm4gbGVhZGluZ0VkZ2UobGFzdENhbGxUaW1lKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAobWF4aW5nKSB7XG5cdCAgICAgICAgLy8gSGFuZGxlIGludm9jYXRpb25zIGluIGEgdGlnaHQgbG9vcC5cblx0ICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuXHQgICAgICAgIHJldHVybiBpbnZva2VGdW5jKGxhc3RDYWxsVGltZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmICh0aW1lcklkID09PSB1bmRlZmluZWQpIHtcblx0ICAgICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcblx0ICAgIH1cblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHQgIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG5cdCAgZGVib3VuY2VkLmZsdXNoID0gZmx1c2g7XG5cdCAgcmV0dXJuIGRlYm91bmNlZDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBkZWJvdW5jZTtcblxuXG4vKioqLyB9LFxuLyogMTQ4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogUGVyZm9ybXMgYVxuXHQgKiBbYFNhbWVWYWx1ZVplcm9gXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1zYW1ldmFsdWV6ZXJvKVxuXHQgKiBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmUgZXF1aXZhbGVudC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cblx0ICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IHsgJ3VzZXInOiAnZnJlZCcgfTtcblx0ICogdmFyIG90aGVyID0geyAndXNlcic6ICdmcmVkJyB9O1xuXHQgKlxuXHQgKiBfLmVxKG9iamVjdCwgb2JqZWN0KTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmVxKG9iamVjdCwgb3RoZXIpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmVxKCdhJywgJ2EnKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmVxKCdhJywgT2JqZWN0KCdhJykpO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKlxuXHQgKiBfLmVxKE5hTiwgTmFOKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKi9cblx0ZnVuY3Rpb24gZXEodmFsdWUsIG90aGVyKSB7XG5cdCAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZXE7XG5cblxuLyoqKi8gfSxcbi8qIDE0OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VGaW5kSW5kZXggPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDk2KSxcblx0ICAgIGJhc2VJdGVyYXRlZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTAxKSxcblx0ICAgIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHRcblx0LyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xuXHR2YXIgbmF0aXZlTWF4ID0gTWF0aC5tYXg7XG5cdFxuXHQvKipcblx0ICogVGhpcyBtZXRob2QgaXMgbGlrZSBgXy5maW5kYCBleGNlcHQgdGhhdCBpdCByZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgZmlyc3Rcblx0ICogZWxlbWVudCBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBpdHNlbGYuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDEuMS4wXG5cdCAqIEBjYXRlZ29yeSBBcnJheVxuXHQgKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuXHQgKiBAcGFyYW0ge0FycmF5fEZ1bmN0aW9ufE9iamVjdHxzdHJpbmd9IFtwcmVkaWNhdGU9Xy5pZGVudGl0eV1cblx0ICogIFRoZSBmdW5jdGlvbiBpbnZva2VkIHBlciBpdGVyYXRpb24uXG5cdCAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgaW5kZXggb2YgdGhlIGZvdW5kIGVsZW1lbnQsIGVsc2UgYC0xYC5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIHVzZXJzID0gW1xuXHQgKiAgIHsgJ3VzZXInOiAnYmFybmV5JywgICdhY3RpdmUnOiBmYWxzZSB9LFxuXHQgKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhY3RpdmUnOiBmYWxzZSB9LFxuXHQgKiAgIHsgJ3VzZXInOiAncGViYmxlcycsICdhY3RpdmUnOiB0cnVlIH1cblx0ICogXTtcblx0ICpcblx0ICogXy5maW5kSW5kZXgodXNlcnMsIGZ1bmN0aW9uKG8pIHsgcmV0dXJuIG8udXNlciA9PSAnYmFybmV5JzsgfSk7XG5cdCAqIC8vID0+IDBcblx0ICpcblx0ICogLy8gVGhlIGBfLm1hdGNoZXNgIGl0ZXJhdGVlIHNob3J0aGFuZC5cblx0ICogXy5maW5kSW5kZXgodXNlcnMsIHsgJ3VzZXInOiAnZnJlZCcsICdhY3RpdmUnOiBmYWxzZSB9KTtcblx0ICogLy8gPT4gMVxuXHQgKlxuXHQgKiAvLyBUaGUgYF8ubWF0Y2hlc1Byb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG5cdCAqIF8uZmluZEluZGV4KHVzZXJzLCBbJ2FjdGl2ZScsIGZhbHNlXSk7XG5cdCAqIC8vID0+IDBcblx0ICpcblx0ICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG5cdCAqIF8uZmluZEluZGV4KHVzZXJzLCAnYWN0aXZlJyk7XG5cdCAqIC8vID0+IDJcblx0ICovXG5cdGZ1bmN0aW9uIGZpbmRJbmRleChhcnJheSwgcHJlZGljYXRlLCBmcm9tSW5kZXgpIHtcblx0ICB2YXIgbGVuZ3RoID0gYXJyYXkgPyBhcnJheS5sZW5ndGggOiAwO1xuXHQgIGlmICghbGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gLTE7XG5cdCAgfVxuXHQgIHZhciBpbmRleCA9IGZyb21JbmRleCA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihmcm9tSW5kZXgpO1xuXHQgIGlmIChpbmRleCA8IDApIHtcblx0ICAgIGluZGV4ID0gbmF0aXZlTWF4KGxlbmd0aCArIGluZGV4LCAwKTtcblx0ICB9XG5cdCAgcmV0dXJuIGJhc2VGaW5kSW5kZXgoYXJyYXksIGJhc2VJdGVyYXRlZShwcmVkaWNhdGUsIDMpLCBpbmRleCk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZmluZEluZGV4O1xuXG5cbi8qKiovIH0sXG4vKiAxNTAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBiYXNlR2V0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygyNSk7XG5cdFxuXHQvKipcblx0ICogR2V0cyB0aGUgdmFsdWUgYXQgYHBhdGhgIG9mIGBvYmplY3RgLiBJZiB0aGUgcmVzb2x2ZWQgdmFsdWUgaXNcblx0ICogYHVuZGVmaW5lZGAsIHRoZSBgZGVmYXVsdFZhbHVlYCBpcyB1c2VkIGluIGl0cyBwbGFjZS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMy43LjBcblx0ICogQGNhdGVnb3J5IE9iamVjdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG5cdCAqIEBwYXJhbSB7Kn0gW2RlZmF1bHRWYWx1ZV0gVGhlIHZhbHVlIHJldHVybmVkIGZvciBgdW5kZWZpbmVkYCByZXNvbHZlZCB2YWx1ZXMuXG5cdCAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIG9iamVjdCA9IHsgJ2EnOiBbeyAnYic6IHsgJ2MnOiAzIH0gfV0gfTtcblx0ICpcblx0ICogXy5nZXQob2JqZWN0LCAnYVswXS5iLmMnKTtcblx0ICogLy8gPT4gM1xuXHQgKlxuXHQgKiBfLmdldChvYmplY3QsIFsnYScsICcwJywgJ2InLCAnYyddKTtcblx0ICogLy8gPT4gM1xuXHQgKlxuXHQgKiBfLmdldChvYmplY3QsICdhLmIuYycsICdkZWZhdWx0Jyk7XG5cdCAqIC8vID0+ICdkZWZhdWx0J1xuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0KG9iamVjdCwgcGF0aCwgZGVmYXVsdFZhbHVlKSB7XG5cdCAgdmFyIHJlc3VsdCA9IG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogYmFzZUdldChvYmplY3QsIHBhdGgpO1xuXHQgIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWx1ZSA6IHJlc3VsdDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBnZXQ7XG5cblxuLyoqKi8gfSxcbi8qIDE1MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VIYXNJbiA9IF9fd2VicGFja19yZXF1aXJlX18oOTcpLFxuXHQgICAgaGFzUGF0aCA9IF9fd2VicGFja19yZXF1aXJlX18oMTE3KTtcblx0XG5cdC8qKlxuXHQgKiBDaGVja3MgaWYgYHBhdGhgIGlzIGEgZGlyZWN0IG9yIGluaGVyaXRlZCBwcm9wZXJ0eSBvZiBgb2JqZWN0YC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IE9iamVjdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG5cdCAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIHRvIGNoZWNrLlxuXHQgKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHBhdGhgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0ID0gXy5jcmVhdGUoeyAnYSc6IF8uY3JlYXRlKHsgJ2InOiAyIH0pIH0pO1xuXHQgKlxuXHQgKiBfLmhhc0luKG9iamVjdCwgJ2EnKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmhhc0luKG9iamVjdCwgJ2EuYicpO1xuXHQgKiAvLyA9PiB0cnVlXG5cdCAqXG5cdCAqIF8uaGFzSW4ob2JqZWN0LCBbJ2EnLCAnYiddKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmhhc0luKG9iamVjdCwgJ2InKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICovXG5cdGZ1bmN0aW9uIGhhc0luKG9iamVjdCwgcGF0aCkge1xuXHQgIHJldHVybiBvYmplY3QgIT0gbnVsbCAmJiBoYXNQYXRoKG9iamVjdCwgcGF0aCwgYmFzZUhhc0luKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBoYXNJbjtcblxuXG4vKioqLyB9LFxuLyogMTUyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogVGhpcyBtZXRob2QgcmV0dXJucyB0aGUgZmlyc3QgYXJndW1lbnQgZ2l2ZW4gdG8gaXQuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBjYXRlZ29yeSBVdGlsXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWUgQW55IHZhbHVlLlxuXHQgKiBAcmV0dXJucyB7Kn0gUmV0dXJucyBgdmFsdWVgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuXHQgKlxuXHQgKiBjb25zb2xlLmxvZyhfLmlkZW50aXR5KG9iamVjdCkgPT09IG9iamVjdCk7XG5cdCAqIC8vID0+IHRydWVcblx0ICovXG5cdGZ1bmN0aW9uIGlkZW50aXR5KHZhbHVlKSB7XG5cdCAgcmV0dXJuIHZhbHVlO1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGlkZW50aXR5O1xuXG5cbi8qKiovIH0sXG4vKiAxNTMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBpc0FycmF5TGlrZSA9IF9fd2VicGFja19yZXF1aXJlX18oMzgpLFxuXHQgICAgaXNPYmplY3RMaWtlID0gX193ZWJwYWNrX3JlcXVpcmVfXyg4KTtcblx0XG5cdC8qKlxuXHQgKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmlzQXJyYXlMaWtlYCBleGNlcHQgdGhhdCBpdCBhbHNvIGNoZWNrcyBpZiBgdmFsdWVgXG5cdCAqIGlzIGFuIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgNC4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGFuIGFycmF5LWxpa2Ugb2JqZWN0LFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlT2JqZWN0KFsxLCAyLCAzXSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZU9iamVjdChkb2N1bWVudC5ib2R5LmNoaWxkcmVuKTtcblx0ICogLy8gPT4gdHJ1ZVxuXHQgKlxuXHQgKiBfLmlzQXJyYXlMaWtlT2JqZWN0KCdhYmMnKTtcblx0ICogLy8gPT4gZmFsc2Vcblx0ICpcblx0ICogXy5pc0FycmF5TGlrZU9iamVjdChfLm5vb3ApO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpIHtcblx0ICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSk7XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNBcnJheUxpa2VPYmplY3Q7XG5cblxuLyoqKi8gfSxcbi8qIDE1NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGlzTGVuZ3RoID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNSksXG5cdCAgICBpc09iamVjdExpa2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgpO1xuXHRcblx0LyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuXHQgICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuXHQgICAgYm9vbFRhZyA9ICdbb2JqZWN0IEJvb2xlYW5dJyxcblx0ICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG5cdCAgICBlcnJvclRhZyA9ICdbb2JqZWN0IEVycm9yXScsXG5cdCAgICBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcblx0ICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuXHQgICAgbnVtYmVyVGFnID0gJ1tvYmplY3QgTnVtYmVyXScsXG5cdCAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcblx0ICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuXHQgICAgc2V0VGFnID0gJ1tvYmplY3QgU2V0XScsXG5cdCAgICBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJyxcblx0ICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cdFxuXHR2YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuXHQgICAgZGF0YVZpZXdUYWcgPSAnW29iamVjdCBEYXRhVmlld10nLFxuXHQgICAgZmxvYXQzMlRhZyA9ICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuXHQgICAgZmxvYXQ2NFRhZyA9ICdbb2JqZWN0IEZsb2F0NjRBcnJheV0nLFxuXHQgICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuXHQgICAgaW50MTZUYWcgPSAnW29iamVjdCBJbnQxNkFycmF5XScsXG5cdCAgICBpbnQzMlRhZyA9ICdbb2JqZWN0IEludDMyQXJyYXldJyxcblx0ICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuXHQgICAgdWludDhDbGFtcGVkVGFnID0gJ1tvYmplY3QgVWludDhDbGFtcGVkQXJyYXldJyxcblx0ICAgIHVpbnQxNlRhZyA9ICdbb2JqZWN0IFVpbnQxNkFycmF5XScsXG5cdCAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXHRcblx0LyoqIFVzZWQgdG8gaWRlbnRpZnkgYHRvU3RyaW5nVGFnYCB2YWx1ZXMgb2YgdHlwZWQgYXJyYXlzLiAqL1xuXHR2YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcblx0dHlwZWRBcnJheVRhZ3NbZmxvYXQzMlRhZ10gPSB0eXBlZEFycmF5VGFnc1tmbG9hdDY0VGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2ludDhUYWddID0gdHlwZWRBcnJheVRhZ3NbaW50MTZUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbdWludDhDbGFtcGVkVGFnXSA9IHR5cGVkQXJyYXlUYWdzW3VpbnQxNlRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1t1aW50MzJUYWddID0gdHJ1ZTtcblx0dHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1thcnJheUJ1ZmZlclRhZ10gPSB0eXBlZEFycmF5VGFnc1tib29sVGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW2RhdGFWaWV3VGFnXSA9IHR5cGVkQXJyYXlUYWdzW2RhdGVUYWddID1cblx0dHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID0gdHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1ttYXBUYWddID0gdHlwZWRBcnJheVRhZ3NbbnVtYmVyVGFnXSA9XG5cdHR5cGVkQXJyYXlUYWdzW29iamVjdFRhZ10gPSB0eXBlZEFycmF5VGFnc1tyZWdleHBUYWddID1cblx0dHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPVxuXHR0eXBlZEFycmF5VGFnc1t3ZWFrTWFwVGFnXSA9IGZhbHNlO1xuXHRcblx0LyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xuXHR2YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXHRcblx0LyoqXG5cdCAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcblx0ICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG5cdCAqIG9mIHZhbHVlcy5cblx0ICovXG5cdHZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYSB0eXBlZCBhcnJheS5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMy4wLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG5cdCAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuXHQgKiAgZWxzZSBgZmFsc2VgLlxuXHQgKiBAZXhhbXBsZVxuXHQgKlxuXHQgKiBfLmlzVHlwZWRBcnJheShuZXcgVWludDhBcnJheSk7XG5cdCAqIC8vID0+IHRydWVcblx0ICpcblx0ICogXy5pc1R5cGVkQXJyYXkoW10pO1xuXHQgKiAvLyA9PiBmYWxzZVxuXHQgKi9cblx0ZnVuY3Rpb24gaXNUeXBlZEFycmF5KHZhbHVlKSB7XG5cdCAgcmV0dXJuIGlzT2JqZWN0TGlrZSh2YWx1ZSkgJiZcblx0ICAgIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKV07XG5cdH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gaXNUeXBlZEFycmF5O1xuXG5cbi8qKiovIH0sXG4vKiAxNTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBNYXBDYWNoZSA9IF9fd2VicGFja19yZXF1aXJlX18oMTcpO1xuXHRcblx0LyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cblx0dmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblx0XG5cdC8qKlxuXHQgKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBtZW1vaXplcyB0aGUgcmVzdWx0IG9mIGBmdW5jYC4gSWYgYHJlc29sdmVyYCBpc1xuXHQgKiBwcm92aWRlZCwgaXQgZGV0ZXJtaW5lcyB0aGUgY2FjaGUga2V5IGZvciBzdG9yaW5nIHRoZSByZXN1bHQgYmFzZWQgb24gdGhlXG5cdCAqIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uIEJ5IGRlZmF1bHQsIHRoZSBmaXJzdCBhcmd1bWVudFxuXHQgKiBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24gaXMgdXNlZCBhcyB0aGUgbWFwIGNhY2hlIGtleS4gVGhlIGBmdW5jYFxuXHQgKiBpcyBpbnZva2VkIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZSBtZW1vaXplZCBmdW5jdGlvbi5cblx0ICpcblx0ICogKipOb3RlOioqIFRoZSBjYWNoZSBpcyBleHBvc2VkIGFzIHRoZSBgY2FjaGVgIHByb3BlcnR5IG9uIHRoZSBtZW1vaXplZFxuXHQgKiBmdW5jdGlvbi4gSXRzIGNyZWF0aW9uIG1heSBiZSBjdXN0b21pemVkIGJ5IHJlcGxhY2luZyB0aGUgYF8ubWVtb2l6ZS5DYWNoZWBcblx0ICogY29uc3RydWN0b3Igd2l0aCBvbmUgd2hvc2UgaW5zdGFuY2VzIGltcGxlbWVudCB0aGVcblx0ICogW2BNYXBgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1wcm9wZXJ0aWVzLW9mLXRoZS1tYXAtcHJvdG90eXBlLW9iamVjdClcblx0ICogbWV0aG9kIGludGVyZmFjZSBvZiBgZGVsZXRlYCwgYGdldGAsIGBoYXNgLCBhbmQgYHNldGAuXG5cdCAqXG5cdCAqIEBzdGF0aWNcblx0ICogQG1lbWJlck9mIF9cblx0ICogQHNpbmNlIDAuMS4wXG5cdCAqIEBjYXRlZ29yeSBGdW5jdGlvblxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBoYXZlIGl0cyBvdXRwdXQgbWVtb2l6ZWQuXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZXNvbHZlcl0gVGhlIGZ1bmN0aW9uIHRvIHJlc29sdmUgdGhlIGNhY2hlIGtleS5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgbWVtb2l6ZWQgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3QgPSB7ICdhJzogMSwgJ2InOiAyIH07XG5cdCAqIHZhciBvdGhlciA9IHsgJ2MnOiAzLCAnZCc6IDQgfTtcblx0ICpcblx0ICogdmFyIHZhbHVlcyA9IF8ubWVtb2l6ZShfLnZhbHVlcyk7XG5cdCAqIHZhbHVlcyhvYmplY3QpO1xuXHQgKiAvLyA9PiBbMSwgMl1cblx0ICpcblx0ICogdmFsdWVzKG90aGVyKTtcblx0ICogLy8gPT4gWzMsIDRdXG5cdCAqXG5cdCAqIG9iamVjdC5hID0gMjtcblx0ICogdmFsdWVzKG9iamVjdCk7XG5cdCAqIC8vID0+IFsxLCAyXVxuXHQgKlxuXHQgKiAvLyBNb2RpZnkgdGhlIHJlc3VsdCBjYWNoZS5cblx0ICogdmFsdWVzLmNhY2hlLnNldChvYmplY3QsIFsnYScsICdiJ10pO1xuXHQgKiB2YWx1ZXMob2JqZWN0KTtcblx0ICogLy8gPT4gWydhJywgJ2InXVxuXHQgKlxuXHQgKiAvLyBSZXBsYWNlIGBfLm1lbW9pemUuQ2FjaGVgLlxuXHQgKiBfLm1lbW9pemUuQ2FjaGUgPSBXZWFrTWFwO1xuXHQgKi9cblx0ZnVuY3Rpb24gbWVtb2l6ZShmdW5jLCByZXNvbHZlcikge1xuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nIHx8IChyZXNvbHZlciAmJiB0eXBlb2YgcmVzb2x2ZXIgIT0gJ2Z1bmN0aW9uJykpIHtcblx0ICAgIHRocm93IG5ldyBUeXBlRXJyb3IoRlVOQ19FUlJPUl9URVhUKTtcblx0ICB9XG5cdCAgdmFyIG1lbW9pemVkID0gZnVuY3Rpb24oKSB7XG5cdCAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcblx0ICAgICAgICBrZXkgPSByZXNvbHZlciA/IHJlc29sdmVyLmFwcGx5KHRoaXMsIGFyZ3MpIDogYXJnc1swXSxcblx0ICAgICAgICBjYWNoZSA9IG1lbW9pemVkLmNhY2hlO1xuXHRcblx0ICAgIGlmIChjYWNoZS5oYXMoa2V5KSkge1xuXHQgICAgICByZXR1cm4gY2FjaGUuZ2V0KGtleSk7XG5cdCAgICB9XG5cdCAgICB2YXIgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzLCBhcmdzKTtcblx0ICAgIG1lbW9pemVkLmNhY2hlID0gY2FjaGUuc2V0KGtleSwgcmVzdWx0KTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfTtcblx0ICBtZW1vaXplZC5jYWNoZSA9IG5ldyAobWVtb2l6ZS5DYWNoZSB8fCBNYXBDYWNoZSk7XG5cdCAgcmV0dXJuIG1lbW9pemVkO1xuXHR9XG5cdFxuXHQvLyBBc3NpZ24gY2FjaGUgdG8gYF8ubWVtb2l6ZWAuXG5cdG1lbW9pemUuQ2FjaGUgPSBNYXBDYWNoZTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gbWVtb2l6ZTtcblxuXG4vKioqLyB9LFxuLyogMTU2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKipcblx0ICogR2V0cyB0aGUgdGltZXN0YW1wIG9mIHRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRoYXQgaGF2ZSBlbGFwc2VkIHNpbmNlXG5cdCAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSAyLjQuMFxuXHQgKiBAY2F0ZWdvcnkgRGF0ZVxuXHQgKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcblx0ICogICBjb25zb2xlLmxvZyhfLm5vdygpIC0gc3RhbXApO1xuXHQgKiB9LCBfLm5vdygpKTtcblx0ICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cblx0ICovXG5cdGZ1bmN0aW9uIG5vdygpIHtcblx0ICByZXR1cm4gRGF0ZS5ub3coKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBub3c7XG5cblxuLyoqKi8gfSxcbi8qIDE1NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIGJhc2VQcm9wZXJ0eSA9IF9fd2VicGFja19yZXF1aXJlX18oMjgpLFxuXHQgICAgYmFzZVByb3BlcnR5RGVlcCA9IF9fd2VicGFja19yZXF1aXJlX18oMTA1KSxcblx0ICAgIGlzS2V5ID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMiksXG5cdCAgICB0b0tleSA9IF9fd2VicGFja19yZXF1aXJlX18oMTQpO1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHZhbHVlIGF0IGBwYXRoYCBvZiBhIGdpdmVuIG9iamVjdC5cblx0ICpcblx0ICogQHN0YXRpY1xuXHQgKiBAbWVtYmVyT2YgX1xuXHQgKiBAc2luY2UgMi40LjBcblx0ICogQGNhdGVnb3J5IFV0aWxcblx0ICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cblx0ICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgYWNjZXNzb3IgZnVuY3Rpb24uXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIHZhciBvYmplY3RzID0gW1xuXHQgKiAgIHsgJ2EnOiB7ICdiJzogMiB9IH0sXG5cdCAqICAgeyAnYSc6IHsgJ2InOiAxIH0gfVxuXHQgKiBdO1xuXHQgKlxuXHQgKiBfLm1hcChvYmplY3RzLCBfLnByb3BlcnR5KCdhLmInKSk7XG5cdCAqIC8vID0+IFsyLCAxXVxuXHQgKlxuXHQgKiBfLm1hcChfLnNvcnRCeShvYmplY3RzLCBfLnByb3BlcnR5KFsnYScsICdiJ10pKSwgJ2EuYicpO1xuXHQgKiAvLyA9PiBbMSwgMl1cblx0ICovXG5cdGZ1bmN0aW9uIHByb3BlcnR5KHBhdGgpIHtcblx0ICByZXR1cm4gaXNLZXkocGF0aCkgPyBiYXNlUHJvcGVydHkodG9LZXkocGF0aCkpIDogYmFzZVByb3BlcnR5RGVlcChwYXRoKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBwcm9wZXJ0eTtcblxuXG4vKioqLyB9LFxuLyogMTU4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYXBwbHkgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDkzKSxcblx0ICAgIHRvSW50ZWdlciA9IF9fd2VicGFja19yZXF1aXJlX18oNDEpO1xuXHRcblx0LyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cblx0dmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblx0XG5cdC8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cblx0dmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4O1xuXHRcblx0LyoqXG5cdCAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IGludm9rZXMgYGZ1bmNgIHdpdGggdGhlIGB0aGlzYCBiaW5kaW5nIG9mIHRoZVxuXHQgKiBjcmVhdGVkIGZ1bmN0aW9uIGFuZCBhcmd1bWVudHMgZnJvbSBgc3RhcnRgIGFuZCBiZXlvbmQgcHJvdmlkZWQgYXNcblx0ICogYW4gYXJyYXkuXG5cdCAqXG5cdCAqICoqTm90ZToqKiBUaGlzIG1ldGhvZCBpcyBiYXNlZCBvbiB0aGVcblx0ICogW3Jlc3QgcGFyYW1ldGVyXShodHRwczovL21kbi5pby9yZXN0X3BhcmFtZXRlcnMpLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgRnVuY3Rpb25cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cblx0ICogQHBhcmFtIHtudW1iZXJ9IFtzdGFydD1mdW5jLmxlbmd0aC0xXSBUaGUgc3RhcnQgcG9zaXRpb24gb2YgdGhlIHJlc3QgcGFyYW1ldGVyLlxuXHQgKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBmdW5jdGlvbi5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogdmFyIHNheSA9IF8ucmVzdChmdW5jdGlvbih3aGF0LCBuYW1lcykge1xuXHQgKiAgIHJldHVybiB3aGF0ICsgJyAnICsgXy5pbml0aWFsKG5hbWVzKS5qb2luKCcsICcpICtcblx0ICogICAgIChfLnNpemUobmFtZXMpID4gMSA/ICcsICYgJyA6ICcnKSArIF8ubGFzdChuYW1lcyk7XG5cdCAqIH0pO1xuXHQgKlxuXHQgKiBzYXkoJ2hlbGxvJywgJ2ZyZWQnLCAnYmFybmV5JywgJ3BlYmJsZXMnKTtcblx0ICogLy8gPT4gJ2hlbGxvIGZyZWQsIGJhcm5leSwgJiBwZWJibGVzJ1xuXHQgKi9cblx0ZnVuY3Rpb24gcmVzdChmdW5jLCBzdGFydCkge1xuXHQgIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG5cdCAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG5cdCAgfVxuXHQgIHN0YXJ0ID0gbmF0aXZlTWF4KHN0YXJ0ID09PSB1bmRlZmluZWQgPyAoZnVuYy5sZW5ndGggLSAxKSA6IHRvSW50ZWdlcihzdGFydCksIDApO1xuXHQgIHJldHVybiBmdW5jdGlvbigpIHtcblx0ICAgIHZhciBhcmdzID0gYXJndW1lbnRzLFxuXHQgICAgICAgIGluZGV4ID0gLTEsXG5cdCAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gc3RhcnQsIDApLFxuXHQgICAgICAgIGFycmF5ID0gQXJyYXkobGVuZ3RoKTtcblx0XG5cdCAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuXHQgICAgICBhcnJheVtpbmRleF0gPSBhcmdzW3N0YXJ0ICsgaW5kZXhdO1xuXHQgICAgfVxuXHQgICAgc3dpdGNoIChzdGFydCkge1xuXHQgICAgICBjYXNlIDA6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJyYXkpO1xuXHQgICAgICBjYXNlIDE6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJnc1swXSwgYXJyYXkpO1xuXHQgICAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJnc1swXSwgYXJnc1sxXSwgYXJyYXkpO1xuXHQgICAgfVxuXHQgICAgdmFyIG90aGVyQXJncyA9IEFycmF5KHN0YXJ0ICsgMSk7XG5cdCAgICBpbmRleCA9IC0xO1xuXHQgICAgd2hpbGUgKCsraW5kZXggPCBzdGFydCkge1xuXHQgICAgICBvdGhlckFyZ3NbaW5kZXhdID0gYXJnc1tpbmRleF07XG5cdCAgICB9XG5cdCAgICBvdGhlckFyZ3Nbc3RhcnRdID0gYXJyYXk7XG5cdCAgICByZXR1cm4gYXBwbHkoZnVuYywgdGhpcywgb3RoZXJBcmdzKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IHJlc3Q7XG5cblxuLyoqKi8gfSxcbi8qIDE1OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIHRvTnVtYmVyID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0Mik7XG5cdFxuXHQvKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cblx0dmFyIElORklOSVRZID0gMSAvIDAsXG5cdCAgICBNQVhfSU5URUdFUiA9IDEuNzk3NjkzMTM0ODYyMzE1N2UrMzA4O1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBmaW5pdGUgbnVtYmVyLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjEyLjBcblx0ICogQGNhdGVnb3J5IExhbmdcblx0ICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29udmVydC5cblx0ICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIG51bWJlci5cblx0ICogQGV4YW1wbGVcblx0ICpcblx0ICogXy50b0Zpbml0ZSgzLjIpO1xuXHQgKiAvLyA9PiAzLjJcblx0ICpcblx0ICogXy50b0Zpbml0ZShOdW1iZXIuTUlOX1ZBTFVFKTtcblx0ICogLy8gPT4gNWUtMzI0XG5cdCAqXG5cdCAqIF8udG9GaW5pdGUoSW5maW5pdHkpO1xuXHQgKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuXHQgKlxuXHQgKiBfLnRvRmluaXRlKCczLjInKTtcblx0ICogLy8gPT4gMy4yXG5cdCAqL1xuXHRmdW5jdGlvbiB0b0Zpbml0ZSh2YWx1ZSkge1xuXHQgIGlmICghdmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSA9PT0gMCA/IHZhbHVlIDogMDtcblx0ICB9XG5cdCAgdmFsdWUgPSB0b051bWJlcih2YWx1ZSk7XG5cdCAgaWYgKHZhbHVlID09PSBJTkZJTklUWSB8fCB2YWx1ZSA9PT0gLUlORklOSVRZKSB7XG5cdCAgICB2YXIgc2lnbiA9ICh2YWx1ZSA8IDAgPyAtMSA6IDEpO1xuXHQgICAgcmV0dXJuIHNpZ24gKiBNQVhfSU5URUdFUjtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/IHZhbHVlIDogMDtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b0Zpbml0ZTtcblxuXG4vKioqLyB9LFxuLyogMTYwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgYmFzZVRvU3RyaW5nID0gX193ZWJwYWNrX3JlcXVpcmVfXygxMDcpO1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBmb3IgYG51bGxgXG5cdCAqIGFuZCBgdW5kZWZpbmVkYCB2YWx1ZXMuIFRoZSBzaWduIG9mIGAtMGAgaXMgcHJlc2VydmVkLlxuXHQgKlxuXHQgKiBAc3RhdGljXG5cdCAqIEBtZW1iZXJPZiBfXG5cdCAqIEBzaW5jZSA0LjAuMFxuXHQgKiBAY2F0ZWdvcnkgTGFuZ1xuXHQgKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuXHQgKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzdHJpbmcuXG5cdCAqIEBleGFtcGxlXG5cdCAqXG5cdCAqIF8udG9TdHJpbmcobnVsbCk7XG5cdCAqIC8vID0+ICcnXG5cdCAqXG5cdCAqIF8udG9TdHJpbmcoLTApO1xuXHQgKiAvLyA9PiAnLTAnXG5cdCAqXG5cdCAqIF8udG9TdHJpbmcoWzEsIDIsIDNdKTtcblx0ICogLy8gPT4gJzEsMiwzJ1xuXHQgKi9cblx0ZnVuY3Rpb24gdG9TdHJpbmcodmFsdWUpIHtcblx0ICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogYmFzZVRvU3RyaW5nKHZhbHVlKTtcblx0fVxuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSB0b1N0cmluZztcblxuXG4vKioqLyB9LFxuLyogMTYxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1jb3JlLmpzXG5cdCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblx0XG5cdHZhciBfc2VsZiA9ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJylcblx0XHQ/IHdpbmRvdyAgIC8vIGlmIGluIGJyb3dzZXJcblx0XHQ6IChcblx0XHRcdCh0eXBlb2YgV29ya2VyR2xvYmFsU2NvcGUgIT09ICd1bmRlZmluZWQnICYmIHNlbGYgaW5zdGFuY2VvZiBXb3JrZXJHbG9iYWxTY29wZSlcblx0XHRcdD8gc2VsZiAvLyBpZiBpbiB3b3JrZXJcblx0XHRcdDoge30gICAvLyBpZiBpbiBub2RlIGpzXG5cdFx0KTtcblx0XG5cdC8qKlxuXHQgKiBQcmlzbTogTGlnaHR3ZWlnaHQsIHJvYnVzdCwgZWxlZ2FudCBzeW50YXggaGlnaGxpZ2h0aW5nXG5cdCAqIE1JVCBsaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwL1xuXHQgKiBAYXV0aG9yIExlYSBWZXJvdSBodHRwOi8vbGVhLnZlcm91Lm1lXG5cdCAqL1xuXHRcblx0dmFyIFByaXNtID0gKGZ1bmN0aW9uKCl7XG5cdFxuXHQvLyBQcml2YXRlIGhlbHBlciB2YXJzXG5cdHZhciBsYW5nID0gL1xcYmxhbmcoPzp1YWdlKT8tKFxcdyspXFxiL2k7XG5cdHZhciB1bmlxdWVJZCA9IDA7XG5cdFxuXHR2YXIgXyA9IF9zZWxmLlByaXNtID0ge1xuXHRcdHV0aWw6IHtcblx0XHRcdGVuY29kZTogZnVuY3Rpb24gKHRva2Vucykge1xuXHRcdFx0XHRpZiAodG9rZW5zIGluc3RhbmNlb2YgVG9rZW4pIHtcblx0XHRcdFx0XHRyZXR1cm4gbmV3IFRva2VuKHRva2Vucy50eXBlLCBfLnV0aWwuZW5jb2RlKHRva2Vucy5jb250ZW50KSwgdG9rZW5zLmFsaWFzKTtcblx0XHRcdFx0fSBlbHNlIGlmIChfLnV0aWwudHlwZSh0b2tlbnMpID09PSAnQXJyYXknKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRva2Vucy5tYXAoXy51dGlsLmVuY29kZSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRva2Vucy5yZXBsYWNlKC8mL2csICcmYW1wOycpLnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC9cXHUwMGEwL2csICcgJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFxuXHRcdFx0dHlwZTogZnVuY3Rpb24gKG8pIHtcblx0XHRcdFx0cmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5tYXRjaCgvXFxbb2JqZWN0IChcXHcrKVxcXS8pWzFdO1xuXHRcdFx0fSxcblx0XG5cdFx0XHRvYmpJZDogZnVuY3Rpb24gKG9iaikge1xuXHRcdFx0XHRpZiAoIW9ialsnX19pZCddKSB7XG5cdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgJ19faWQnLCB7IHZhbHVlOiArK3VuaXF1ZUlkIH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBvYmpbJ19faWQnXTtcblx0XHRcdH0sXG5cdFxuXHRcdFx0Ly8gRGVlcCBjbG9uZSBhIGxhbmd1YWdlIGRlZmluaXRpb24gKGUuZy4gdG8gZXh0ZW5kIGl0KVxuXHRcdFx0Y2xvbmU6IGZ1bmN0aW9uIChvKSB7XG5cdFx0XHRcdHZhciB0eXBlID0gXy51dGlsLnR5cGUobyk7XG5cdFxuXHRcdFx0XHRzd2l0Y2ggKHR5cGUpIHtcblx0XHRcdFx0XHRjYXNlICdPYmplY3QnOlxuXHRcdFx0XHRcdFx0dmFyIGNsb25lID0ge307XG5cdFxuXHRcdFx0XHRcdFx0Zm9yICh2YXIga2V5IGluIG8pIHtcblx0XHRcdFx0XHRcdFx0aWYgKG8uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRcdFx0XHRcdGNsb25lW2tleV0gPSBfLnV0aWwuY2xvbmUob1trZXldKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdHJldHVybiBjbG9uZTtcblx0XG5cdFx0XHRcdFx0Y2FzZSAnQXJyYXknOlxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgZm9yIGV4aXN0ZW5jZSBmb3IgSUU4XG5cdFx0XHRcdFx0XHRyZXR1cm4gby5tYXAgJiYgby5tYXAoZnVuY3Rpb24odikgeyByZXR1cm4gXy51dGlsLmNsb25lKHYpOyB9KTtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0cmV0dXJuIG87XG5cdFx0XHR9XG5cdFx0fSxcblx0XG5cdFx0bGFuZ3VhZ2VzOiB7XG5cdFx0XHRleHRlbmQ6IGZ1bmN0aW9uIChpZCwgcmVkZWYpIHtcblx0XHRcdFx0dmFyIGxhbmcgPSBfLnV0aWwuY2xvbmUoXy5sYW5ndWFnZXNbaWRdKTtcblx0XG5cdFx0XHRcdGZvciAodmFyIGtleSBpbiByZWRlZikge1xuXHRcdFx0XHRcdGxhbmdba2V5XSA9IHJlZGVmW2tleV07XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHJldHVybiBsYW5nO1xuXHRcdFx0fSxcblx0XG5cdFx0XHQvKipcblx0XHRcdCAqIEluc2VydCBhIHRva2VuIGJlZm9yZSBhbm90aGVyIHRva2VuIGluIGEgbGFuZ3VhZ2UgbGl0ZXJhbFxuXHRcdFx0ICogQXMgdGhpcyBuZWVkcyB0byByZWNyZWF0ZSB0aGUgb2JqZWN0ICh3ZSBjYW5ub3QgYWN0dWFsbHkgaW5zZXJ0IGJlZm9yZSBrZXlzIGluIG9iamVjdCBsaXRlcmFscyksXG5cdFx0XHQgKiB3ZSBjYW5ub3QganVzdCBwcm92aWRlIGFuIG9iamVjdCwgd2UgbmVlZCBhbm9iamVjdCBhbmQgYSBrZXkuXG5cdFx0XHQgKiBAcGFyYW0gaW5zaWRlIFRoZSBrZXkgKG9yIGxhbmd1YWdlIGlkKSBvZiB0aGUgcGFyZW50XG5cdFx0XHQgKiBAcGFyYW0gYmVmb3JlIFRoZSBrZXkgdG8gaW5zZXJ0IGJlZm9yZS4gSWYgbm90IHByb3ZpZGVkLCB0aGUgZnVuY3Rpb24gYXBwZW5kcyBpbnN0ZWFkLlxuXHRcdFx0ICogQHBhcmFtIGluc2VydCBPYmplY3Qgd2l0aCB0aGUga2V5L3ZhbHVlIHBhaXJzIHRvIGluc2VydFxuXHRcdFx0ICogQHBhcmFtIHJvb3QgVGhlIG9iamVjdCB0aGF0IGNvbnRhaW5zIGBpbnNpZGVgLiBJZiBlcXVhbCB0byBQcmlzbS5sYW5ndWFnZXMsIGl0IGNhbiBiZSBvbWl0dGVkLlxuXHRcdFx0ICovXG5cdFx0XHRpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uIChpbnNpZGUsIGJlZm9yZSwgaW5zZXJ0LCByb290KSB7XG5cdFx0XHRcdHJvb3QgPSByb290IHx8IF8ubGFuZ3VhZ2VzO1xuXHRcdFx0XHR2YXIgZ3JhbW1hciA9IHJvb3RbaW5zaWRlXTtcblx0XG5cdFx0XHRcdGlmIChhcmd1bWVudHMubGVuZ3RoID09IDIpIHtcblx0XHRcdFx0XHRpbnNlcnQgPSBhcmd1bWVudHNbMV07XG5cdFxuXHRcdFx0XHRcdGZvciAodmFyIG5ld1Rva2VuIGluIGluc2VydCkge1xuXHRcdFx0XHRcdFx0aWYgKGluc2VydC5oYXNPd25Qcm9wZXJ0eShuZXdUb2tlbikpIHtcblx0XHRcdFx0XHRcdFx0Z3JhbW1hcltuZXdUb2tlbl0gPSBpbnNlcnRbbmV3VG9rZW5dO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0cmV0dXJuIGdyYW1tYXI7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHZhciByZXQgPSB7fTtcblx0XG5cdFx0XHRcdGZvciAodmFyIHRva2VuIGluIGdyYW1tYXIpIHtcblx0XG5cdFx0XHRcdFx0aWYgKGdyYW1tYXIuaGFzT3duUHJvcGVydHkodG9rZW4pKSB7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKHRva2VuID09IGJlZm9yZSkge1xuXHRcblx0XHRcdFx0XHRcdFx0Zm9yICh2YXIgbmV3VG9rZW4gaW4gaW5zZXJ0KSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdGlmIChpbnNlcnQuaGFzT3duUHJvcGVydHkobmV3VG9rZW4pKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXRbbmV3VG9rZW5dID0gaW5zZXJ0W25ld1Rva2VuXTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRyZXRbdG9rZW5dID0gZ3JhbW1hclt0b2tlbl07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHQvLyBVcGRhdGUgcmVmZXJlbmNlcyBpbiBvdGhlciBsYW5ndWFnZSBkZWZpbml0aW9uc1xuXHRcdFx0XHRfLmxhbmd1YWdlcy5ERlMoXy5sYW5ndWFnZXMsIGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcblx0XHRcdFx0XHRpZiAodmFsdWUgPT09IHJvb3RbaW5zaWRlXSAmJiBrZXkgIT0gaW5zaWRlKSB7XG5cdFx0XHRcdFx0XHR0aGlzW2tleV0gPSByZXQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XG5cdFx0XHRcdHJldHVybiByb290W2luc2lkZV0gPSByZXQ7XG5cdFx0XHR9LFxuXHRcblx0XHRcdC8vIFRyYXZlcnNlIGEgbGFuZ3VhZ2UgZGVmaW5pdGlvbiB3aXRoIERlcHRoIEZpcnN0IFNlYXJjaFxuXHRcdFx0REZTOiBmdW5jdGlvbihvLCBjYWxsYmFjaywgdHlwZSwgdmlzaXRlZCkge1xuXHRcdFx0XHR2aXNpdGVkID0gdmlzaXRlZCB8fCB7fTtcblx0XHRcdFx0Zm9yICh2YXIgaSBpbiBvKSB7XG5cdFx0XHRcdFx0aWYgKG8uaGFzT3duUHJvcGVydHkoaSkpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwobywgaSwgb1tpXSwgdHlwZSB8fCBpKTtcblx0XG5cdFx0XHRcdFx0XHRpZiAoXy51dGlsLnR5cGUob1tpXSkgPT09ICdPYmplY3QnICYmICF2aXNpdGVkW18udXRpbC5vYmpJZChvW2ldKV0pIHtcblx0XHRcdFx0XHRcdFx0dmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0Xy5sYW5ndWFnZXMuREZTKG9baV0sIGNhbGxiYWNrLCBudWxsLCB2aXNpdGVkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKF8udXRpbC50eXBlKG9baV0pID09PSAnQXJyYXknICYmICF2aXNpdGVkW18udXRpbC5vYmpJZChvW2ldKV0pIHtcblx0XHRcdFx0XHRcdFx0dmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0Xy5sYW5ndWFnZXMuREZTKG9baV0sIGNhbGxiYWNrLCBpLCB2aXNpdGVkKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdHBsdWdpbnM6IHt9LFxuXHRcblx0XHRoaWdobGlnaHRBbGw6IGZ1bmN0aW9uKGFzeW5jLCBjYWxsYmFjaykge1xuXHRcdFx0dmFyIGVudiA9IHtcblx0XHRcdFx0Y2FsbGJhY2s6IGNhbGxiYWNrLFxuXHRcdFx0XHRzZWxlY3RvcjogJ2NvZGVbY2xhc3MqPVwibGFuZ3VhZ2UtXCJdLCBbY2xhc3MqPVwibGFuZ3VhZ2UtXCJdIGNvZGUsIGNvZGVbY2xhc3MqPVwibGFuZy1cIl0sIFtjbGFzcyo9XCJsYW5nLVwiXSBjb2RlJ1xuXHRcdFx0fTtcblx0XG5cdFx0XHRfLmhvb2tzLnJ1bihcImJlZm9yZS1oaWdobGlnaHRhbGxcIiwgZW52KTtcblx0XG5cdFx0XHR2YXIgZWxlbWVudHMgPSBlbnYuZWxlbWVudHMgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbnYuc2VsZWN0b3IpO1xuXHRcblx0XHRcdGZvciAodmFyIGk9MCwgZWxlbWVudDsgZWxlbWVudCA9IGVsZW1lbnRzW2krK107KSB7XG5cdFx0XHRcdF8uaGlnaGxpZ2h0RWxlbWVudChlbGVtZW50LCBhc3luYyA9PT0gdHJ1ZSwgZW52LmNhbGxiYWNrKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRoaWdobGlnaHRFbGVtZW50OiBmdW5jdGlvbihlbGVtZW50LCBhc3luYywgY2FsbGJhY2spIHtcblx0XHRcdC8vIEZpbmQgbGFuZ3VhZ2Vcblx0XHRcdHZhciBsYW5ndWFnZSwgZ3JhbW1hciwgcGFyZW50ID0gZWxlbWVudDtcblx0XG5cdFx0XHR3aGlsZSAocGFyZW50ICYmICFsYW5nLnRlc3QocGFyZW50LmNsYXNzTmFtZSkpIHtcblx0XHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFxuXHRcdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0XHRsYW5ndWFnZSA9IChwYXJlbnQuY2xhc3NOYW1lLm1hdGNoKGxhbmcpIHx8IFssJyddKVsxXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHRncmFtbWFyID0gXy5sYW5ndWFnZXNbbGFuZ3VhZ2VdO1xuXHRcdFx0fVxuXHRcblx0XHRcdC8vIFNldCBsYW5ndWFnZSBvbiB0aGUgZWxlbWVudCwgaWYgbm90IHByZXNlbnRcblx0XHRcdGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShsYW5nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnICcpICsgJyBsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cdFxuXHRcdFx0Ly8gU2V0IGxhbmd1YWdlIG9uIHRoZSBwYXJlbnQsIGZvciBzdHlsaW5nXG5cdFx0XHRwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG5cdFxuXHRcdFx0aWYgKC9wcmUvaS50ZXN0KHBhcmVudC5ub2RlTmFtZSkpIHtcblx0XHRcdFx0cGFyZW50LmNsYXNzTmFtZSA9IHBhcmVudC5jbGFzc05hbWUucmVwbGFjZShsYW5nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnICcpICsgJyBsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cdFx0XHR9XG5cdFxuXHRcdFx0dmFyIGNvZGUgPSBlbGVtZW50LnRleHRDb250ZW50O1xuXHRcblx0XHRcdHZhciBlbnYgPSB7XG5cdFx0XHRcdGVsZW1lbnQ6IGVsZW1lbnQsXG5cdFx0XHRcdGxhbmd1YWdlOiBsYW5ndWFnZSxcblx0XHRcdFx0Z3JhbW1hcjogZ3JhbW1hcixcblx0XHRcdFx0Y29kZTogY29kZVxuXHRcdFx0fTtcblx0XG5cdFx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLXNhbml0eS1jaGVjaycsIGVudik7XG5cdFxuXHRcdFx0aWYgKCFlbnYuY29kZSB8fCAhZW52LmdyYW1tYXIpIHtcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXHRcblx0XHRcdF8uaG9va3MucnVuKCdiZWZvcmUtaGlnaGxpZ2h0JywgZW52KTtcblx0XG5cdFx0XHRpZiAoYXN5bmMgJiYgX3NlbGYuV29ya2VyKSB7XG5cdFx0XHRcdHZhciB3b3JrZXIgPSBuZXcgV29ya2VyKF8uZmlsZW5hbWUpO1xuXHRcblx0XHRcdFx0d29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2dCkge1xuXHRcdFx0XHRcdGVudi5oaWdobGlnaHRlZENvZGUgPSBldnQuZGF0YTtcblx0XG5cdFx0XHRcdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1pbnNlcnQnLCBlbnYpO1xuXHRcblx0XHRcdFx0XHRlbnYuZWxlbWVudC5pbm5lckhUTUwgPSBlbnYuaGlnaGxpZ2h0ZWRDb2RlO1xuXHRcblx0XHRcdFx0XHRjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKGVudi5lbGVtZW50KTtcblx0XHRcdFx0XHRfLmhvb2tzLnJ1bignYWZ0ZXItaGlnaGxpZ2h0JywgZW52KTtcblx0XHRcdFx0XHRfLmhvb2tzLnJ1bignY29tcGxldGUnLCBlbnYpO1xuXHRcdFx0XHR9O1xuXHRcblx0XHRcdFx0d29ya2VyLnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0XHRsYW5ndWFnZTogZW52Lmxhbmd1YWdlLFxuXHRcdFx0XHRcdGNvZGU6IGVudi5jb2RlLFxuXHRcdFx0XHRcdGltbWVkaWF0ZUNsb3NlOiB0cnVlXG5cdFx0XHRcdH0pKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRlbnYuaGlnaGxpZ2h0ZWRDb2RlID0gXy5oaWdobGlnaHQoZW52LmNvZGUsIGVudi5ncmFtbWFyLCBlbnYubGFuZ3VhZ2UpO1xuXHRcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1pbnNlcnQnLCBlbnYpO1xuXHRcblx0XHRcdFx0ZW52LmVsZW1lbnQuaW5uZXJIVE1MID0gZW52LmhpZ2hsaWdodGVkQ29kZTtcblx0XG5cdFx0XHRcdGNhbGxiYWNrICYmIGNhbGxiYWNrLmNhbGwoZWxlbWVudCk7XG5cdFxuXHRcdFx0XHRfLmhvb2tzLnJ1bignYWZ0ZXItaGlnaGxpZ2h0JywgZW52KTtcblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHRcdH1cblx0XHR9LFxuXHRcblx0XHRoaWdobGlnaHQ6IGZ1bmN0aW9uICh0ZXh0LCBncmFtbWFyLCBsYW5ndWFnZSkge1xuXHRcdFx0dmFyIHRva2VucyA9IF8udG9rZW5pemUodGV4dCwgZ3JhbW1hcik7XG5cdFx0XHRyZXR1cm4gVG9rZW4uc3RyaW5naWZ5KF8udXRpbC5lbmNvZGUodG9rZW5zKSwgbGFuZ3VhZ2UpO1xuXHRcdH0sXG5cdFxuXHRcdHRva2VuaXplOiBmdW5jdGlvbih0ZXh0LCBncmFtbWFyLCBsYW5ndWFnZSkge1xuXHRcdFx0dmFyIFRva2VuID0gXy5Ub2tlbjtcblx0XG5cdFx0XHR2YXIgc3RyYXJyID0gW3RleHRdO1xuXHRcblx0XHRcdHZhciByZXN0ID0gZ3JhbW1hci5yZXN0O1xuXHRcblx0XHRcdGlmIChyZXN0KSB7XG5cdFx0XHRcdGZvciAodmFyIHRva2VuIGluIHJlc3QpIHtcblx0XHRcdFx0XHRncmFtbWFyW3Rva2VuXSA9IHJlc3RbdG9rZW5dO1xuXHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRkZWxldGUgZ3JhbW1hci5yZXN0O1xuXHRcdFx0fVxuXHRcblx0XHRcdHRva2VubG9vcDogZm9yICh2YXIgdG9rZW4gaW4gZ3JhbW1hcikge1xuXHRcdFx0XHRpZighZ3JhbW1hci5oYXNPd25Qcm9wZXJ0eSh0b2tlbikgfHwgIWdyYW1tYXJbdG9rZW5dKSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XG5cdFx0XHRcdHZhciBwYXR0ZXJucyA9IGdyYW1tYXJbdG9rZW5dO1xuXHRcdFx0XHRwYXR0ZXJucyA9IChfLnV0aWwudHlwZShwYXR0ZXJucykgPT09IFwiQXJyYXlcIikgPyBwYXR0ZXJucyA6IFtwYXR0ZXJuc107XG5cdFxuXHRcdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHBhdHRlcm5zLmxlbmd0aDsgKytqKSB7XG5cdFx0XHRcdFx0dmFyIHBhdHRlcm4gPSBwYXR0ZXJuc1tqXSxcblx0XHRcdFx0XHRcdGluc2lkZSA9IHBhdHRlcm4uaW5zaWRlLFxuXHRcdFx0XHRcdFx0bG9va2JlaGluZCA9ICEhcGF0dGVybi5sb29rYmVoaW5kLFxuXHRcdFx0XHRcdFx0Z3JlZWR5ID0gISFwYXR0ZXJuLmdyZWVkeSxcblx0XHRcdFx0XHRcdGxvb2tiZWhpbmRMZW5ndGggPSAwLFxuXHRcdFx0XHRcdFx0YWxpYXMgPSBwYXR0ZXJuLmFsaWFzO1xuXHRcblx0XHRcdFx0XHRwYXR0ZXJuID0gcGF0dGVybi5wYXR0ZXJuIHx8IHBhdHRlcm47XG5cdFxuXHRcdFx0XHRcdGZvciAodmFyIGk9MDsgaTxzdHJhcnIubGVuZ3RoOyBpKyspIHsgLy8gRG9u4oCZdCBjYWNoZSBsZW5ndGggYXMgaXQgY2hhbmdlcyBkdXJpbmcgdGhlIGxvb3Bcblx0XG5cdFx0XHRcdFx0XHR2YXIgc3RyID0gc3RyYXJyW2ldO1xuXHRcblx0XHRcdFx0XHRcdGlmIChzdHJhcnIubGVuZ3RoID4gdGV4dC5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdFx0Ly8gU29tZXRoaW5nIHdlbnQgdGVycmlibHkgd3JvbmcsIEFCT1JULCBBQk9SVCFcblx0XHRcdFx0XHRcdFx0YnJlYWsgdG9rZW5sb29wO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdGlmIChzdHIgaW5zdGFuY2VvZiBUb2tlbikge1xuXHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRwYXR0ZXJuLmxhc3RJbmRleCA9IDA7XG5cdFxuXHRcdFx0XHRcdFx0dmFyIG1hdGNoID0gcGF0dGVybi5leGVjKHN0ciksXG5cdFx0XHRcdFx0XHQgICAgZGVsTnVtID0gMTtcblx0XG5cdFx0XHRcdFx0XHQvLyBHcmVlZHkgcGF0dGVybnMgY2FuIG92ZXJyaWRlL3JlbW92ZSB1cCB0byB0d28gcHJldmlvdXNseSBtYXRjaGVkIHRva2Vuc1xuXHRcdFx0XHRcdFx0aWYgKCFtYXRjaCAmJiBncmVlZHkgJiYgaSAhPSBzdHJhcnIubGVuZ3RoIC0gMSkge1xuXHRcdFx0XHRcdFx0XHQvLyBSZWNvbnN0cnVjdCB0aGUgb3JpZ2luYWwgdGV4dCB1c2luZyB0aGUgbmV4dCB0d28gdG9rZW5zXG5cdFx0XHRcdFx0XHRcdHZhciBuZXh0VG9rZW4gPSBzdHJhcnJbaSArIDFdLm1hdGNoZWRTdHIgfHwgc3RyYXJyW2kgKyAxXSxcblx0XHRcdFx0XHRcdFx0ICAgIGNvbWJTdHIgPSBzdHIgKyBuZXh0VG9rZW47XG5cdFxuXHRcdFx0XHRcdFx0XHRpZiAoaSA8IHN0cmFyci5sZW5ndGggLSAyKSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tYlN0ciArPSBzdHJhcnJbaSArIDJdLm1hdGNoZWRTdHIgfHwgc3RyYXJyW2kgKyAyXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdFx0Ly8gVHJ5IHRoZSBwYXR0ZXJuIGFnYWluIG9uIHRoZSByZWNvbnN0cnVjdGVkIHRleHRcblx0XHRcdFx0XHRcdFx0cGF0dGVybi5sYXN0SW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0XHRtYXRjaCA9IHBhdHRlcm4uZXhlYyhjb21iU3RyKTtcblx0XHRcdFx0XHRcdFx0aWYgKCFtYXRjaCkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0XHR2YXIgZnJvbSA9IG1hdGNoLmluZGV4ICsgKGxvb2tiZWhpbmQgPyBtYXRjaFsxXS5sZW5ndGggOiAwKTtcblx0XHRcdFx0XHRcdFx0Ly8gVG8gYmUgYSB2YWxpZCBjYW5kaWRhdGUsIHRoZSBuZXcgbWF0Y2ggaGFzIHRvIHN0YXJ0IGluc2lkZSBvZiBzdHJcblx0XHRcdFx0XHRcdFx0aWYgKGZyb20gPj0gc3RyLmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdHZhciB0byA9IG1hdGNoLmluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoLFxuXHRcdFx0XHRcdFx0XHQgICAgbGVuID0gc3RyLmxlbmd0aCArIG5leHRUb2tlbi5sZW5ndGg7XG5cdFxuXHRcdFx0XHRcdFx0XHQvLyBOdW1iZXIgb2YgdG9rZW5zIHRvIGRlbGV0ZSBhbmQgcmVwbGFjZSB3aXRoIHRoZSBuZXcgbWF0Y2hcblx0XHRcdFx0XHRcdFx0ZGVsTnVtID0gMztcblx0XG5cdFx0XHRcdFx0XHRcdGlmICh0byA8PSBsZW4pIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoc3RyYXJyW2kgKyAxXS5ncmVlZHkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRkZWxOdW0gPSAyO1xuXHRcdFx0XHRcdFx0XHRcdGNvbWJTdHIgPSBjb21iU3RyLnNsaWNlKDAsIGxlbik7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0c3RyID0gY29tYlN0cjtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHRpZiAoIW1hdGNoKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcblx0XHRcdFx0XHRcdGlmKGxvb2tiZWhpbmQpIHtcblx0XHRcdFx0XHRcdFx0bG9va2JlaGluZExlbmd0aCA9IG1hdGNoWzFdLmxlbmd0aDtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHR2YXIgZnJvbSA9IG1hdGNoLmluZGV4ICsgbG9va2JlaGluZExlbmd0aCxcblx0XHRcdFx0XHRcdCAgICBtYXRjaCA9IG1hdGNoWzBdLnNsaWNlKGxvb2tiZWhpbmRMZW5ndGgpLFxuXHRcdFx0XHRcdFx0ICAgIHRvID0gZnJvbSArIG1hdGNoLmxlbmd0aCxcblx0XHRcdFx0XHRcdCAgICBiZWZvcmUgPSBzdHIuc2xpY2UoMCwgZnJvbSksXG5cdFx0XHRcdFx0XHQgICAgYWZ0ZXIgPSBzdHIuc2xpY2UodG8pO1xuXHRcblx0XHRcdFx0XHRcdHZhciBhcmdzID0gW2ksIGRlbE51bV07XG5cdFxuXHRcdFx0XHRcdFx0aWYgKGJlZm9yZSkge1xuXHRcdFx0XHRcdFx0XHRhcmdzLnB1c2goYmVmb3JlKTtcblx0XHRcdFx0XHRcdH1cblx0XG5cdFx0XHRcdFx0XHR2YXIgd3JhcHBlZCA9IG5ldyBUb2tlbih0b2tlbiwgaW5zaWRlPyBfLnRva2VuaXplKG1hdGNoLCBpbnNpZGUpIDogbWF0Y2gsIGFsaWFzLCBtYXRjaCwgZ3JlZWR5KTtcblx0XG5cdFx0XHRcdFx0XHRhcmdzLnB1c2god3JhcHBlZCk7XG5cdFxuXHRcdFx0XHRcdFx0aWYgKGFmdGVyKSB7XG5cdFx0XHRcdFx0XHRcdGFyZ3MucHVzaChhZnRlcik7XG5cdFx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdFx0QXJyYXkucHJvdG90eXBlLnNwbGljZS5hcHBseShzdHJhcnIsIGFyZ3MpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcblx0XHRcdHJldHVybiBzdHJhcnI7XG5cdFx0fSxcblx0XG5cdFx0aG9va3M6IHtcblx0XHRcdGFsbDoge30sXG5cdFxuXHRcdFx0YWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcblx0XHRcdFx0dmFyIGhvb2tzID0gXy5ob29rcy5hbGw7XG5cdFxuXHRcdFx0XHRob29rc1tuYW1lXSA9IGhvb2tzW25hbWVdIHx8IFtdO1xuXHRcblx0XHRcdFx0aG9va3NbbmFtZV0ucHVzaChjYWxsYmFjayk7XG5cdFx0XHR9LFxuXHRcblx0XHRcdHJ1bjogZnVuY3Rpb24gKG5hbWUsIGVudikge1xuXHRcdFx0XHR2YXIgY2FsbGJhY2tzID0gXy5ob29rcy5hbGxbbmFtZV07XG5cdFxuXHRcdFx0XHRpZiAoIWNhbGxiYWNrcyB8fCAhY2FsbGJhY2tzLmxlbmd0aCkge1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcblx0XHRcdFx0Zm9yICh2YXIgaT0wLCBjYWxsYmFjazsgY2FsbGJhY2sgPSBjYWxsYmFja3NbaSsrXTspIHtcblx0XHRcdFx0XHRjYWxsYmFjayhlbnYpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xuXHRcblx0dmFyIFRva2VuID0gXy5Ub2tlbiA9IGZ1bmN0aW9uKHR5cGUsIGNvbnRlbnQsIGFsaWFzLCBtYXRjaGVkU3RyLCBncmVlZHkpIHtcblx0XHR0aGlzLnR5cGUgPSB0eXBlO1xuXHRcdHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG5cdFx0dGhpcy5hbGlhcyA9IGFsaWFzO1xuXHRcdC8vIENvcHkgb2YgdGhlIGZ1bGwgc3RyaW5nIHRoaXMgdG9rZW4gd2FzIGNyZWF0ZWQgZnJvbVxuXHRcdHRoaXMubWF0Y2hlZFN0ciA9IG1hdGNoZWRTdHIgfHwgbnVsbDtcblx0XHR0aGlzLmdyZWVkeSA9ICEhZ3JlZWR5O1xuXHR9O1xuXHRcblx0VG9rZW4uc3RyaW5naWZ5ID0gZnVuY3Rpb24obywgbGFuZ3VhZ2UsIHBhcmVudCkge1xuXHRcdGlmICh0eXBlb2YgbyA9PSAnc3RyaW5nJykge1xuXHRcdFx0cmV0dXJuIG87XG5cdFx0fVxuXHRcblx0XHRpZiAoXy51dGlsLnR5cGUobykgPT09ICdBcnJheScpIHtcblx0XHRcdHJldHVybiBvLm1hcChmdW5jdGlvbihlbGVtZW50KSB7XG5cdFx0XHRcdHJldHVybiBUb2tlbi5zdHJpbmdpZnkoZWxlbWVudCwgbGFuZ3VhZ2UsIG8pO1xuXHRcdFx0fSkuam9pbignJyk7XG5cdFx0fVxuXHRcblx0XHR2YXIgZW52ID0ge1xuXHRcdFx0dHlwZTogby50eXBlLFxuXHRcdFx0Y29udGVudDogVG9rZW4uc3RyaW5naWZ5KG8uY29udGVudCwgbGFuZ3VhZ2UsIHBhcmVudCksXG5cdFx0XHR0YWc6ICdzcGFuJyxcblx0XHRcdGNsYXNzZXM6IFsndG9rZW4nLCBvLnR5cGVdLFxuXHRcdFx0YXR0cmlidXRlczoge30sXG5cdFx0XHRsYW5ndWFnZTogbGFuZ3VhZ2UsXG5cdFx0XHRwYXJlbnQ6IHBhcmVudFxuXHRcdH07XG5cdFxuXHRcdGlmIChlbnYudHlwZSA9PSAnY29tbWVudCcpIHtcblx0XHRcdGVudi5hdHRyaWJ1dGVzWydzcGVsbGNoZWNrJ10gPSAndHJ1ZSc7XG5cdFx0fVxuXHRcblx0XHRpZiAoby5hbGlhcykge1xuXHRcdFx0dmFyIGFsaWFzZXMgPSBfLnV0aWwudHlwZShvLmFsaWFzKSA9PT0gJ0FycmF5JyA/IG8uYWxpYXMgOiBbby5hbGlhc107XG5cdFx0XHRBcnJheS5wcm90b3R5cGUucHVzaC5hcHBseShlbnYuY2xhc3NlcywgYWxpYXNlcyk7XG5cdFx0fVxuXHRcblx0XHRfLmhvb2tzLnJ1bignd3JhcCcsIGVudik7XG5cdFxuXHRcdHZhciBhdHRyaWJ1dGVzID0gJyc7XG5cdFxuXHRcdGZvciAodmFyIG5hbWUgaW4gZW52LmF0dHJpYnV0ZXMpIHtcblx0XHRcdGF0dHJpYnV0ZXMgKz0gKGF0dHJpYnV0ZXMgPyAnICcgOiAnJykgKyBuYW1lICsgJz1cIicgKyAoZW52LmF0dHJpYnV0ZXNbbmFtZV0gfHwgJycpICsgJ1wiJztcblx0XHR9XG5cdFxuXHRcdHJldHVybiAnPCcgKyBlbnYudGFnICsgJyBjbGFzcz1cIicgKyBlbnYuY2xhc3Nlcy5qb2luKCcgJykgKyAnXCIgJyArIGF0dHJpYnV0ZXMgKyAnPicgKyBlbnYuY29udGVudCArICc8LycgKyBlbnYudGFnICsgJz4nO1xuXHRcblx0fTtcblx0XG5cdGlmICghX3NlbGYuZG9jdW1lbnQpIHtcblx0XHRpZiAoIV9zZWxmLmFkZEV2ZW50TGlzdGVuZXIpIHtcblx0XHRcdC8vIGluIE5vZGUuanNcblx0XHRcdHJldHVybiBfc2VsZi5QcmlzbTtcblx0XHR9XG5cdCBcdC8vIEluIHdvcmtlclxuXHRcdF9zZWxmLmFkZEV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCBmdW5jdGlvbihldnQpIHtcblx0XHRcdHZhciBtZXNzYWdlID0gSlNPTi5wYXJzZShldnQuZGF0YSksXG5cdFx0XHQgICAgbGFuZyA9IG1lc3NhZ2UubGFuZ3VhZ2UsXG5cdFx0XHQgICAgY29kZSA9IG1lc3NhZ2UuY29kZSxcblx0XHRcdCAgICBpbW1lZGlhdGVDbG9zZSA9IG1lc3NhZ2UuaW1tZWRpYXRlQ2xvc2U7XG5cdFxuXHRcdFx0X3NlbGYucG9zdE1lc3NhZ2UoXy5oaWdobGlnaHQoY29kZSwgXy5sYW5ndWFnZXNbbGFuZ10sIGxhbmcpKTtcblx0XHRcdGlmIChpbW1lZGlhdGVDbG9zZSkge1xuXHRcdFx0XHRfc2VsZi5jbG9zZSgpO1xuXHRcdFx0fVxuXHRcdH0sIGZhbHNlKTtcblx0XG5cdFx0cmV0dXJuIF9zZWxmLlByaXNtO1xuXHR9XG5cdFxuXHQvL0dldCBjdXJyZW50IHNjcmlwdCBhbmQgaGlnaGxpZ2h0XG5cdHZhciBzY3JpcHQgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0IHx8IFtdLnNsaWNlLmNhbGwoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIikpLnBvcCgpO1xuXHRcblx0aWYgKHNjcmlwdCkge1xuXHRcdF8uZmlsZW5hbWUgPSBzY3JpcHQuc3JjO1xuXHRcblx0XHRpZiAoZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lciAmJiAhc2NyaXB0Lmhhc0F0dHJpYnV0ZSgnZGF0YS1tYW51YWwnKSkge1xuXHRcdFx0aWYoZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIpIHtcblx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKF8uaGlnaGxpZ2h0QWxsLCAwKTtcblx0XHRcdH1cblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgXy5oaWdobGlnaHRBbGwpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXHRcblx0cmV0dXJuIF9zZWxmLlByaXNtO1xuXHRcblx0fSkoKTtcblx0XG5cdGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRcdG1vZHVsZS5leHBvcnRzID0gUHJpc207XG5cdH1cblx0XG5cdC8vIGhhY2sgZm9yIGNvbXBvbmVudHMgdG8gd29yayBjb3JyZWN0bHkgaW4gbm9kZS5qc1xuXHRpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRnbG9iYWwuUHJpc20gPSBQcmlzbTtcblx0fVxuXHRcblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1tYXJrdXAuanNcblx0KioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLm1hcmt1cCA9IHtcblx0XHQnY29tbWVudCc6IC88IS0tW1xcd1xcV10qPy0tPi8sXG5cdFx0J3Byb2xvZyc6IC88XFw/W1xcd1xcV10rP1xcPz4vLFxuXHRcdCdkb2N0eXBlJzogLzwhRE9DVFlQRVtcXHdcXFddKz8+Lyxcblx0XHQnY2RhdGEnOiAvPCFcXFtDREFUQVxcW1tcXHdcXFddKj9dXT4vaSxcblx0XHQndGFnJzoge1xuXHRcdFx0cGF0dGVybjogLzxcXC8/KD8hXFxkKVteXFxzPlxcLz0uJDxdKyg/OlxccytbXlxccz5cXC89XSsoPzo9KD86KFwifCcpKD86XFxcXFxcMXxcXFxcPyg/IVxcMSlbXFx3XFxXXSkqXFwxfFteXFxzJ1wiPj1dKykpPykqXFxzKlxcLz8+L2ksXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0J3RhZyc6IHtcblx0XHRcdFx0XHRwYXR0ZXJuOiAvXjxcXC8/W15cXHM+XFwvXSsvaSxcblx0XHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHRcdCdwdW5jdHVhdGlvbic6IC9ePFxcLz8vLFxuXHRcdFx0XHRcdFx0J25hbWVzcGFjZSc6IC9eW15cXHM+XFwvOl0rOi9cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdhdHRyLXZhbHVlJzoge1xuXHRcdFx0XHRcdHBhdHRlcm46IC89KD86KCd8XCIpW1xcd1xcV10qPyhcXDEpfFteXFxzPl0rKS9pLFxuXHRcdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdFx0J3B1bmN0dWF0aW9uJzogL1s9PlwiJ10vXG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9LFxuXHRcdFx0XHQncHVuY3R1YXRpb24nOiAvXFwvPz4vLFxuXHRcdFx0XHQnYXR0ci1uYW1lJzoge1xuXHRcdFx0XHRcdHBhdHRlcm46IC9bXlxccz5cXC9dKy8sXG5cdFx0XHRcdFx0aW5zaWRlOiB7XG5cdFx0XHRcdFx0XHQnbmFtZXNwYWNlJzogL15bXlxccz5cXC86XSs6L1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcblx0XHRcdH1cblx0XHR9LFxuXHRcdCdlbnRpdHknOiAvJiM/W1xcZGEtel17MSw4fTsvaVxuXHR9O1xuXHRcblx0Ly8gUGx1Z2luIHRvIG1ha2UgZW50aXR5IHRpdGxlIHNob3cgdGhlIHJlYWwgZW50aXR5LCBpZGVhIGJ5IFJvbWFuIEtvbWFyb3Zcblx0UHJpc20uaG9va3MuYWRkKCd3cmFwJywgZnVuY3Rpb24oZW52KSB7XG5cdFxuXHRcdGlmIChlbnYudHlwZSA9PT0gJ2VudGl0eScpIHtcblx0XHRcdGVudi5hdHRyaWJ1dGVzWyd0aXRsZSddID0gZW52LmNvbnRlbnQucmVwbGFjZSgvJmFtcDsvLCAnJicpO1xuXHRcdH1cblx0fSk7XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMueG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblx0UHJpc20ubGFuZ3VhZ2VzLmh0bWwgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuXHRQcmlzbS5sYW5ndWFnZXMubWF0aG1sID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblx0UHJpc20ubGFuZ3VhZ2VzLnN2ZyA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5cdFxuXHRcblx0LyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgIEJlZ2luIHByaXNtLWNzcy5qc1xuXHQqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuY3NzID0ge1xuXHRcdCdjb21tZW50JzogL1xcL1xcKltcXHdcXFddKj9cXCpcXC8vLFxuXHRcdCdhdHJ1bGUnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvQFtcXHctXSs/Lio/KDt8KD89XFxzKlxceykpL2ksXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0J3J1bGUnOiAvQFtcXHctXSsvXG5cdFx0XHRcdC8vIFNlZSByZXN0IGJlbG93XG5cdFx0XHR9XG5cdFx0fSxcblx0XHQndXJsJzogL3VybFxcKCg/OihbXCInXSkoXFxcXCg/OlxcclxcbnxbXFx3XFxXXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMXwuKj8pXFwpL2ksXG5cdFx0J3NlbGVjdG9yJzogL1teXFx7XFx9XFxzXVteXFx7XFx9O10qPyg/PVxccypcXHspLyxcblx0XHQnc3RyaW5nJzogLyhcInwnKShcXFxcKD86XFxyXFxufFtcXHdcXFddKXwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxLyxcblx0XHQncHJvcGVydHknOiAvKFxcYnxcXEIpW1xcdy1dKyg/PVxccyo6KS9pLFxuXHRcdCdpbXBvcnRhbnQnOiAvXFxCIWltcG9ydGFudFxcYi9pLFxuXHRcdCdmdW5jdGlvbic6IC9bLWEtejAtOV0rKD89XFwoKS9pLFxuXHRcdCdwdW5jdHVhdGlvbic6IC9bKCl7fTs6XS9cblx0fTtcblx0XG5cdFByaXNtLmxhbmd1YWdlcy5jc3NbJ2F0cnVsZSddLmluc2lkZS5yZXN0ID0gUHJpc20udXRpbC5jbG9uZShQcmlzbS5sYW5ndWFnZXMuY3NzKTtcblx0XG5cdGlmIChQcmlzbS5sYW5ndWFnZXMubWFya3VwKSB7XG5cdFx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ3RhZycsIHtcblx0XHRcdCdzdHlsZSc6IHtcblx0XHRcdFx0cGF0dGVybjogLyg8c3R5bGVbXFx3XFxXXSo/PilbXFx3XFxXXSo/KD89PFxcL3N0eWxlPikvaSxcblx0XHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuY3NzLFxuXHRcdFx0XHRhbGlhczogJ2xhbmd1YWdlLWNzcydcblx0XHRcdH1cblx0XHR9KTtcblx0XHRcblx0XHRQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdpbnNpZGUnLCAnYXR0ci12YWx1ZScsIHtcblx0XHRcdCdzdHlsZS1hdHRyJzoge1xuXHRcdFx0XHRwYXR0ZXJuOiAvXFxzKnN0eWxlPShcInwnKS4qP1xcMS9pLFxuXHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHQnYXR0ci1uYW1lJzoge1xuXHRcdFx0XHRcdFx0cGF0dGVybjogL15cXHMqc3R5bGUvaSxcblx0XHRcdFx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcuaW5zaWRlXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQncHVuY3R1YXRpb24nOiAvXlxccyo9XFxzKlsnXCJdfFsnXCJdXFxzKiQvLFxuXHRcdFx0XHRcdCdhdHRyLXZhbHVlJzoge1xuXHRcdFx0XHRcdFx0cGF0dGVybjogLy4rL2ksXG5cdFx0XHRcdFx0XHRpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5jc3Ncblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFsaWFzOiAnbGFuZ3VhZ2UtY3NzJ1xuXHRcdFx0fVxuXHRcdH0sIFByaXNtLmxhbmd1YWdlcy5tYXJrdXAudGFnKTtcblx0fVxuXHRcblx0LyogKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKlxuXHQgICAgIEJlZ2luIHByaXNtLWNsaWtlLmpzXG5cdCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblx0XG5cdFByaXNtLmxhbmd1YWdlcy5jbGlrZSA9IHtcblx0XHQnY29tbWVudCc6IFtcblx0XHRcdHtcblx0XHRcdFx0cGF0dGVybjogLyhefFteXFxcXF0pXFwvXFwqW1xcd1xcV10qP1xcKlxcLy8sXG5cdFx0XHRcdGxvb2tiZWhpbmQ6IHRydWVcblx0XHRcdH0sXG5cdFx0XHR7XG5cdFx0XHRcdHBhdHRlcm46IC8oXnxbXlxcXFw6XSlcXC9cXC8uKi8sXG5cdFx0XHRcdGxvb2tiZWhpbmQ6IHRydWVcblx0XHRcdH1cblx0XHRdLFxuXHRcdCdzdHJpbmcnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvKFtcIiddKShcXFxcKD86XFxyXFxufFtcXHNcXFNdKXwoPyFcXDEpW15cXFxcXFxyXFxuXSkqXFwxLyxcblx0XHRcdGdyZWVkeTogdHJ1ZVxuXHRcdH0sXG5cdFx0J2NsYXNzLW5hbWUnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvKCg/OlxcYig/OmNsYXNzfGludGVyZmFjZXxleHRlbmRzfGltcGxlbWVudHN8dHJhaXR8aW5zdGFuY2VvZnxuZXcpXFxzKyl8KD86Y2F0Y2hcXHMrXFwoKSlbYS16MC05X1xcLlxcXFxdKy9pLFxuXHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRwdW5jdHVhdGlvbjogLyhcXC58XFxcXCkvXG5cdFx0XHR9XG5cdFx0fSxcblx0XHQna2V5d29yZCc6IC9cXGIoaWZ8ZWxzZXx3aGlsZXxkb3xmb3J8cmV0dXJufGlufGluc3RhbmNlb2Z8ZnVuY3Rpb258bmV3fHRyeXx0aHJvd3xjYXRjaHxmaW5hbGx5fG51bGx8YnJlYWt8Y29udGludWUpXFxiLyxcblx0XHQnYm9vbGVhbic6IC9cXGIodHJ1ZXxmYWxzZSlcXGIvLFxuXHRcdCdmdW5jdGlvbic6IC9bYS16MC05X10rKD89XFwoKS9pLFxuXHRcdCdudW1iZXInOiAvXFxiLT8oPzoweFtcXGRhLWZdK3xcXGQqXFwuP1xcZCsoPzplWystXT9cXGQrKT8pXFxiL2ksXG5cdFx0J29wZXJhdG9yJzogLy0tP3xcXCtcXCs/fCE9Pz0/fDw9P3w+PT98PT0/PT98JiY/fFxcfFxcfD98XFw/fFxcKnxcXC98fnxcXF58JS8sXG5cdFx0J3B1bmN0dWF0aW9uJzogL1t7fVtcXF07KCksLjpdL1xuXHR9O1xuXHRcblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1qYXZhc2NyaXB0LmpzXG5cdCoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblx0XG5cdFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0ID0gUHJpc20ubGFuZ3VhZ2VzLmV4dGVuZCgnY2xpa2UnLCB7XG5cdFx0J2tleXdvcmQnOiAvXFxiKGFzfGFzeW5jfGF3YWl0fGJyZWFrfGNhc2V8Y2F0Y2h8Y2xhc3N8Y29uc3R8Y29udGludWV8ZGVidWdnZXJ8ZGVmYXVsdHxkZWxldGV8ZG98ZWxzZXxlbnVtfGV4cG9ydHxleHRlbmRzfGZpbmFsbHl8Zm9yfGZyb218ZnVuY3Rpb258Z2V0fGlmfGltcGxlbWVudHN8aW1wb3J0fGlufGluc3RhbmNlb2Z8aW50ZXJmYWNlfGxldHxuZXd8bnVsbHxvZnxwYWNrYWdlfHByaXZhdGV8cHJvdGVjdGVkfHB1YmxpY3xyZXR1cm58c2V0fHN0YXRpY3xzdXBlcnxzd2l0Y2h8dGhpc3x0aHJvd3x0cnl8dHlwZW9mfHZhcnx2b2lkfHdoaWxlfHdpdGh8eWllbGQpXFxiLyxcblx0XHQnbnVtYmVyJzogL1xcYi0/KDB4W1xcZEEtRmEtZl0rfDBiWzAxXSt8MG9bMC03XSt8XFxkKlxcLj9cXGQrKFtFZV1bKy1dP1xcZCspP3xOYU58SW5maW5pdHkpXFxiLyxcblx0XHQvLyBBbGxvdyBmb3IgYWxsIG5vbi1BU0NJSSBjaGFyYWN0ZXJzIChTZWUgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjAwODQ0NClcblx0XHQnZnVuY3Rpb24nOiAvW18kYS16QS1aXFx4QTAtXFx1RkZGRl1bXyRhLXpBLVowLTlcXHhBMC1cXHVGRkZGXSooPz1cXCgpL2lcblx0fSk7XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdqYXZhc2NyaXB0JywgJ2tleXdvcmQnLCB7XG5cdFx0J3JlZ2V4Jzoge1xuXHRcdFx0cGF0dGVybjogLyhefFteL10pXFwvKD8hXFwvKShcXFsuKz9dfFxcXFwufFteL1xcXFxcXHJcXG5dKStcXC9bZ2lteXVdezAsNX0oPz1cXHMqKCR8W1xcclxcbiwuO30pXSkpLyxcblx0XHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0XHRncmVlZHk6IHRydWVcblx0XHR9XG5cdH0pO1xuXHRcblx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnamF2YXNjcmlwdCcsICdzdHJpbmcnLCB7XG5cdFx0J3RlbXBsYXRlLXN0cmluZyc6IHtcblx0XHRcdHBhdHRlcm46IC9gKD86XFxcXFxcXFx8XFxcXD9bXlxcXFxdKSo/YC8sXG5cdFx0XHRncmVlZHk6IHRydWUsXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0J2ludGVycG9sYXRpb24nOiB7XG5cdFx0XHRcdFx0cGF0dGVybjogL1xcJFxce1tefV0rXFx9Lyxcblx0XHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHRcdCdpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uJzoge1xuXHRcdFx0XHRcdFx0XHRwYXR0ZXJuOiAvXlxcJFxce3xcXH0kLyxcblx0XHRcdFx0XHRcdFx0YWxpYXM6ICdwdW5jdHVhdGlvbidcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0XHRyZXN0OiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdFxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblx0XHRcdFx0J3N0cmluZyc6IC9bXFxzXFxTXSsvXG5cdFx0XHR9XG5cdFx0fVxuXHR9KTtcblx0XG5cdGlmIChQcmlzbS5sYW5ndWFnZXMubWFya3VwKSB7XG5cdFx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ3RhZycsIHtcblx0XHRcdCdzY3JpcHQnOiB7XG5cdFx0XHRcdHBhdHRlcm46IC8oPHNjcmlwdFtcXHdcXFddKj8+KVtcXHdcXFddKj8oPz08XFwvc2NyaXB0PikvaSxcblx0XHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdFx0aW5zaWRlOiBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdCxcblx0XHRcdFx0YWxpYXM6ICdsYW5ndWFnZS1qYXZhc2NyaXB0J1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuanMgPSBQcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdDtcblx0XG5cdC8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcblx0ICAgICBCZWdpbiBwcmlzbS1maWxlLWhpZ2hsaWdodC5qc1xuXHQqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cdFxuXHQoZnVuY3Rpb24gKCkge1xuXHRcdGlmICh0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgfHwgIXNlbGYuUHJpc20gfHwgIXNlbGYuZG9jdW1lbnQgfHwgIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFxuXHRcdHNlbGYuUHJpc20uZmlsZUhpZ2hsaWdodCA9IGZ1bmN0aW9uKCkge1xuXHRcblx0XHRcdHZhciBFeHRlbnNpb25zID0ge1xuXHRcdFx0XHQnanMnOiAnamF2YXNjcmlwdCcsXG5cdFx0XHRcdCdweSc6ICdweXRob24nLFxuXHRcdFx0XHQncmInOiAncnVieScsXG5cdFx0XHRcdCdwczEnOiAncG93ZXJzaGVsbCcsXG5cdFx0XHRcdCdwc20xJzogJ3Bvd2Vyc2hlbGwnLFxuXHRcdFx0XHQnc2gnOiAnYmFzaCcsXG5cdFx0XHRcdCdiYXQnOiAnYmF0Y2gnLFxuXHRcdFx0XHQnaCc6ICdjJyxcblx0XHRcdFx0J3RleCc6ICdsYXRleCdcblx0XHRcdH07XG5cdFxuXHRcdFx0aWYoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHsgLy8gQ2hlY2sgdG8gcHJldmVudCBlcnJvciBpbiBJRThcblx0XHRcdFx0QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgncHJlW2RhdGEtc3JjXScpKS5mb3JFYWNoKGZ1bmN0aW9uIChwcmUpIHtcblx0XHRcdFx0XHR2YXIgc3JjID0gcHJlLmdldEF0dHJpYnV0ZSgnZGF0YS1zcmMnKTtcblx0XG5cdFx0XHRcdFx0dmFyIGxhbmd1YWdlLCBwYXJlbnQgPSBwcmU7XG5cdFx0XHRcdFx0dmFyIGxhbmcgPSAvXFxibGFuZyg/OnVhZ2UpPy0oPyFcXCopKFxcdyspXFxiL2k7XG5cdFx0XHRcdFx0d2hpbGUgKHBhcmVudCAmJiAhbGFuZy50ZXN0KHBhcmVudC5jbGFzc05hbWUpKSB7XG5cdFx0XHRcdFx0XHRwYXJlbnQgPSBwYXJlbnQucGFyZW50Tm9kZTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0XHRcdGxhbmd1YWdlID0gKHByZS5jbGFzc05hbWUubWF0Y2gobGFuZykgfHwgWywgJyddKVsxXTtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdGlmICghbGFuZ3VhZ2UpIHtcblx0XHRcdFx0XHRcdHZhciBleHRlbnNpb24gPSAoc3JjLm1hdGNoKC9cXC4oXFx3KykkLykgfHwgWywgJyddKVsxXTtcblx0XHRcdFx0XHRcdGxhbmd1YWdlID0gRXh0ZW5zaW9uc1tleHRlbnNpb25dIHx8IGV4dGVuc2lvbjtcblx0XHRcdFx0XHR9XG5cdFxuXHRcdFx0XHRcdHZhciBjb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY29kZScpO1xuXHRcdFx0XHRcdGNvZGUuY2xhc3NOYW1lID0gJ2xhbmd1YWdlLScgKyBsYW5ndWFnZTtcblx0XG5cdFx0XHRcdFx0cHJlLnRleHRDb250ZW50ID0gJyc7XG5cdFxuXHRcdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSAnTG9hZGluZ+KApic7XG5cdFxuXHRcdFx0XHRcdHByZS5hcHBlbmRDaGlsZChjb2RlKTtcblx0XG5cdFx0XHRcdFx0dmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXHRcblx0XHRcdFx0XHR4aHIub3BlbignR0VUJywgc3JjLCB0cnVlKTtcblx0XG5cdFx0XHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0XHRcdGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0KSB7XG5cdFxuXHRcdFx0XHRcdFx0XHRpZiAoeGhyLnN0YXR1cyA8IDQwMCAmJiB4aHIucmVzcG9uc2VUZXh0KSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9IHhoci5yZXNwb25zZVRleHQ7XG5cdFxuXHRcdFx0XHRcdFx0XHRcdFByaXNtLmhpZ2hsaWdodEVsZW1lbnQoY29kZSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZWxzZSBpZiAoeGhyLnN0YXR1cyA+PSA0MDApIHtcblx0XHRcdFx0XHRcdFx0XHRjb2RlLnRleHRDb250ZW50ID0gJ+KcliBFcnJvciAnICsgeGhyLnN0YXR1cyArICcgd2hpbGUgZmV0Y2hpbmcgZmlsZTogJyArIHhoci5zdGF0dXNUZXh0O1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSAn4pyWIEVycm9yOiBGaWxlIGRvZXMgbm90IGV4aXN0IG9yIGlzIGVtcHR5Jztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFxuXHRcdFx0XHRcdHhoci5zZW5kKG51bGwpO1xuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XG5cdFx0fTtcblx0XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIHNlbGYuUHJpc20uZmlsZUhpZ2hsaWdodCk7XG5cdFxuXHR9KSgpO1xuXHRcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSkpKVxuXG4vKioqLyB9LFxuLyogMTYyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPHRhYmxlIGNsYXNzPXNnX2MtYXBpLXRhYmxlPiA8dHI+IDx0aD4gTmFtZSA8L3RoPiA8dGg+IFR5cGUgPC90aD4gPHRoPiBSZXF1aXJlZCA8L3RoPiA8dGg+IERlZmF1bHQgPC90aD4gPHRoPiBEZXNjcmlwdGlvbiA8L3RoPiA8L3RyPiA8dHIgdi1mb3I9XFxcIml0ZW0gaW4gaXRlbXNcXFwiPiA8dGQ+e3tpdGVtLm5hbWV9fTwvdGQ+IDx0ZD57e2l0ZW0udHlwZX19PC90ZD4gPHRkPnt7aXRlbS5pc1JlcXVpcmVkfX08L3RkPiA8dGQ+e3tpdGVtLmRlZmF1bHR9fTwvdGQ+IDx0ZD57e2l0ZW0uZGVzY319PC90ZD4gPC90cj4gPC90YWJsZT4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNjMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8bmF2IGNsYXNzPXNnX2MtbmF2PiA8aDIgY2xhc3M9c2dfYy1uYXZfX3NlY3Rpb24+Q09NUE9ORU5UUzwvaDI+IDx1bCBjbGFzcz1oeV9vLWxpc3Q+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnLycsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gR2V0IFN0YXJ0ZWQgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9hbGVydCcsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gQWxlcnQgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9zcGlubmVyJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBTcGlubmVyIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvc3RlcC10cmFja2VyJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBTdGVwIFRyYWNrZXIgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy90YWJzJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBUYWJzIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvb3ZlcmxheScsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gT3ZlcmxheSA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL2xlZ2FsJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBMZWdhbCA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL2NvbGxhcHNhYmxlLXBhbmVsJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBDb2xsYXBzYWJsZSBQYW5lbCA8L2E+IDwvbGk+IDwvdWw+IDxoMiBjbGFzcz1zZ19jLW5hdl9fc2VjdGlvbj5ESVJFQ1RJVkVTPC9oMj4gPHVsIGNsYXNzPWh5X28tbGlzdD4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvb3ZlcmxheS1vcGVuZXInLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IE92ZXJsYXkgT3BlbmVyIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvc2V0LWZvY3VzJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBTZXQgRm9jdXMgPC9hPiA8L2xpPiA8L3VsPiA8L25hdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNjQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8aGVhZGVyIGNsYXNzPVxcXCJzZ19jLXNpdGUtaGVhZGVyIGRmZCBoeV91LWhpZGVzbVxcXCI+IDxkaXYgY2xhc3M9c2dfYy1zaXRlLWhlYWRlci1jb250YWluZXI+IDxhIGhyZWY9LyA+IDxpbWcgY2xhc3M9bG9nbyBzcmM9XCIgKyBfX3dlYnBhY2tfcmVxdWlyZV9fKDg1KSArIFwiIGFsdD1Mb2dvPiA8L2E+IDwvZGl2PiA8L2hlYWRlcj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNjUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5BbGVydDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8YWxlcnQgdHlwZT1lcnJvcj5UaGlzIGlzIGFuIGVycm9yIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPWluZm8+VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPXN1Y2Nlc3M+VGhpcyBpcyBhIHN1Y2Nlc3MgYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9c3VjY2VzcyA6ZGlzbWlzc2libGU9ZmFsc2U+VGhpcyBpcyBub3QgYSBkaXNtaXNzaWJsZSBhbGVydC48L2FsZXJ0PiA8YWxlcnQgdHlwZT1zdWNjZXNzIDpvbi1jbG9zZWQ9ZGlzbWlzc0NhbGxCYWNrPlRoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay48L2FsZXJ0PiA8YWxlcnQgdHlwZT1pbmZvIDp0aW1lb3V0PTUwMDA+VGhpcyBhbGVydCBzaG91bGQgdGltZW91dCBpbiA1IHNlY29uZHMuPC9hbGVydD4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwiZXJyb3JcXFwiJmd0O1RoaXMgaXMgYW4gZXJyb3IgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwiaW5mb1xcXCImZ3Q7VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiJmd0O1RoaXMgaXMgYSBzdWNjZXNzIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiIDpkaXNtaXNzaWJsZT1cXFwiZmFsc2VcXFwiJmd0O1RoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOm9uLWNsb3NlZD1cXFwiZGlzbWlzc0NhbGxCYWNrXFxcIiZndDtUaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOnRpbWVvdXQ9XFxcIjUwMDBcXFwiJmd0O1RoaXMgYWxlcnQgc2hvdWxkIHRpbWVvdXQgaW4gNSBzZWNvbmRzLiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTY2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+Q29sbGFwc2FibGUgUGFuZWw8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAxXFxcIiA6aXMtb3Blbj10cnVlPiBQYW5lbCAxIGNvbnRlbnQgPC9jb2xsYXBzYWJsZS1wYW5lbD4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAyXFxcIj4gUGFuZWwgMiBjb250ZW50IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuICAgICAgICAgICAgICZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMVxcXCIgOmlzLW9wZW49XFxcInRydWVcXFwiJmd0O1xcbiAgICAgICAgICAgICAgIFBhbmVsIDEgY29udGVudFxcbiAgICAgICAgICAgICAmbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xcbiAgICAgICAgICAgICAmbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XFxcIlBhbmVsIDJcXFwiJmd0O1xcbiAgICAgICAgICAgICAgIFBhbmVsIDIgY29udGVudFxcbiAgICAgICAgICAgICAmbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE2NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkdldHRpbmcgU3RhcnRlZDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS01IGh5X3QtZ3JleVxcXCI+Q0ROPC9oMz4gPHA+IC4uLiA8L3A+IDwvZGl2PiA8L2Rpdj48L3NlY3Rpb24+IFwiO1xuXG4vKioqLyB9LFxuLyogMTY4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+TGVnYWwgU3lzdGVtPC9oMj4gPGhyIGNsYXNzPWh5X3Utc3BhY2UtbWItMj4gPGRpdiBjbGFzcz1cXFwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxwIGNsYXNzPVxcXCJoeV9jLWNvcHkgaHlfYy1jb3B5LS1ib2R5IGh5X3QtZ3JleVxcXCI+IExvcmVtIGlwc3VtPGxlZ2FsLWNvdW50ZXIgdi1vdmVybGF5LW9wZW5lcj1sZWdhbC1vdmVybGF5IGxlZ2FsLWtleT1ocy1yZWZlcnJhbC10ZXJtcyBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+IGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQsIHNlZCBkbyBlaXVzbW9kIHRlbXBvciBpbmNpZGlkdW50IHV0IGxhYm9yZSBldCBkb2xvcmUgbWFnbmEgYWxpcXVhLiA8bGVnYWwtY291bnRlciB2LW92ZXJsYXktb3BlbmVyPWxlZ2FsLW92ZXJsYXkgbGVnYWwta2V5PTEteWVhci1vZmZlci1zdGltIGxlZ2FsLWxhbmc9ZW4gbGVnYWwtcmVnaW9uPWJjPjwvbGVnYWwtY291bnRlcj4gPC9wPiA8L2Rpdj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGxlZ2FsLWNvbnRhaW5lcj48L2xlZ2FsLWNvbnRhaW5lcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4gICAgICAgICAgICAgJmx0O2xlZ2FsLWNvdW50ZXImZ3Q7XFxuICAgICAgICAgICAgICAgIGxlZ2FsLWtleT1cXFwiaHMtcmVmZXJyYWwtdGVybXNcXFwiXFxuICAgICAgICAgICAgICAgIGxlZ2FsLWxhbmc9XFxcImVuXFxcIlxcbiAgICAgICAgICAgICAgICBsZWdhbC1yZWdpb249XFxcImJjXFxcIlxcbiAgICAgICAgICAgICAmbHQ7L2xlZ2FsLWNvdW50ZXImZ3Q7XFxuICAgICAgICAgICAgICZsdDtsZWdhbC1jb250YWluZXImZ3Q7Jmx0Oy9sZWdhbC1jb250YWluZXImZ3Q7XFxuICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1qYXZhc2NyaXB0PiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtamF2YXNjcmlwdD5cXG4gICAgICAgICAgICAgbGV0IHZtID0gbmV3IFZ1ZSh7XFxuICAgICAgICAgICAgICAgZWw6ICdib2R5JyxcXG4gICAgICAgICAgICAgICBkYXRhKCkge1xcbiAgICAgICAgICAgICAgICAgcmV0dXJuIHtcXG4gICAgICAgICAgICAgICAgICAgbGlnZXJFbmRQb2ludDogJ2h0dHBzOi8vYXBpLmNtcy50ZWx1cy5jb20vbGVnYWxzJyxcXG4gICAgICAgICAgICAgICAgICAgbGlnZXJBcHBsaWNhdGlvbktleTogJ2I5NzM4ZDY3Yjg5ZGZjNzgyNzQ2ZDRhOWNmNGExMDkzJ1xcbiAgICAgICAgICAgICAgICAgfTtcXG4gICAgICAgICAgICAgICB9LFxcbiAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IHtcXG4gICAgICAgICAgICAgICAgIExlZ2FsQ291bnRlcixcXG4gICAgICAgICAgICAgICAgIExlZ2FsQ29udGFpbmVyXFxuICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICB9KTtcXG4gICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTogTGVnYWwgQ291bnRlcjwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNjkgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5PdmVybGF5IFN5c3RlbTwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8cD4gPGJ1dHRvbiB2LW92ZXJsYXktb3BlbmVyPW92ZXJsYXktMSBjbGFzcz1cXFwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLWxpbmsgaHlfdC1wdXJwbGVcXFwiIHR5cGU9YnV0dG9uIHJvbGU9YnV0dG9uPiBPcGVuIG92ZXJsYXkgIzEgPGkgY2xhc3M9XFxcImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cXFwiPjwvaT4gPC9idXR0b24+IDwvcD4gPHA+IDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1vdmVybGF5LTIgY2xhc3M9XFxcImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXFxcIiB0eXBlPWJ1dHRvbiByb2xlPWJ1dHRvbj4gT3BlbiBvdmVybGF5ICMyIDxpIGNsYXNzPVxcXCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXFxcIj48L2k+IDwvYnV0dG9uPiA8L3A+IDxvdmVybGF5LWNvbnRhaW5lcj4gPG92ZXJsYXkgb3ZlcmxheS1rZXk9b3ZlcmxheS0xPiA8aDQgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9b3ZlcmxheS1oZWFkZXI+VGhpcyBpcyBvdmVybGF5ICMxPC9oND4gPGFydGljbGUgc2xvdD1vdmVybGF5LWJvZHk+IE92ZXJsYXkgIzEgYm9keSA8L2FydGljbGU+IDwvb3ZlcmxheT4gPG92ZXJsYXkgb3ZlcmxheS1rZXk9b3ZlcmxheS0yPiA8aDQgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9b3ZlcmxheS1oZWFkZXI+VGhpcyBpcyBvdmVybGF5ICMyPC9oND4gPGFydGljbGUgc2xvdD1vdmVybGF5LWJvZHk+IE92ZXJsYXkgIzIgYm9keSA8L2FydGljbGU+IDwvb3ZlcmxheT4gPC9vdmVybGF5LWNvbnRhaW5lcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4gICAgICAgICAgICAgJmx0O292ZXJsYXktY29udGFpbmVyJmd0O1xcbiAgICAgICAgICAgICAgICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVxcXCJvdmVybGF5LTFcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O2g0ICBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1cXFwib3ZlcmxheS1oZWFkZXJcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgVGhpcyBpcyBvdmVybGF5ICMxXFxuICAgICAgICAgICAgICAgICAmbHQ7L2g0Jmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O2FydGljbGUgc2xvdD1cXFwib3ZlcmxheS1ib2R5XFxcIiZndDtcXG4gICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMSBib2R5XFxuICAgICAgICAgICAgICAgICAmbHQ7L2FydGljbGUmZ3Q7XFxuICAgICAgICAgICAgICAgJmx0Oy9vdmVybGF5Jmd0O1xcbiAgICAgICAgICAgICAgICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVxcXCJvdmVybGF5LTJcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O2g0ICBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFxcXCIgc2xvdD1cXFwib3ZlcmxheS1oZWFkZXJcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgVGhpcyBpcyBvdmVybGF5ICMxXFxuICAgICAgICAgICAgICAgICAmbHQ7L2g0Jmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O2FydGljbGUgc2xvdD1cXFwib3ZlcmxheS1ib2R5XFxcIiZndDtcXG4gICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMiBib2R5XFxuICAgICAgICAgICAgICAgICAmbHQ7L2FydGljbGUmZ3Q7XFxuICAgICAgICAgICAgICAgJmx0Oy9vdmVybGF5Jmd0O1xcbiAgICAgICAgICAgICAmbHQ7L292ZXJsYXktY29udGFpbmVyJmd0O1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlNwaW5uZXI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGxhYmVsIGNsYXNzPVxcXCJoeV9jLWNvbnRyb2wgaHlfYy1jb250cm9sLS1jaGVja2JveFxcXCI+IDxzcGFuIGNsYXNzPWh5X2MtY29udHJvbF9fbGFiZWwtdGV4dD5GdWxsIFNjcmVlbjwvc3Bhbj4gPGlucHV0IHR5cGU9Y2hlY2tib3ggdi1tb2RlbD1pc0Z1bGxTY3JlZW4gLz4gPGRpdiBjbGFzcz1oeV9jLWNvbnRyb2xfX2luZGljYXRvcj48L2Rpdj4gPC9sYWJlbD4gPGJ1dHRvbiBAY2xpY2s9c2hvd1NwaW5uZXIgY2xhc3M9XFxcImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1yYWlzZWQgaHlfdC1ncmVlblxcXCIgdHlwZT1idXR0b24+IFNob3cgU3Bpbm5lciA8L2J1dHRvbj4gPHNwaW5uZXIgOmZ1bGwtc2NyZWVuPWlzRnVsbFNjcmVlbiA6dGV4dD1tc2c+PC9zcGlubmVyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiAgICAgICAgICAgICAmbHQ7c3Bpbm5lciB0ZXh0PVxcXCJJIHdpbGwgY2xvc2UgaW4gMyBzZWNvbmRzXFxcIiA6ZnVsbC1zY3JlZW49XFxcInRydWVcXFwiJmd0OyZsdDsvc3Bpbm5lciZndDtcXG4gICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5TdGVwIFRyYWNrZXI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHN0ZXAtdHJhY2tlciA6Y3VycmVudC1zdGVwPXN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgOmNvbmZpZz1zdGVwVHJhY2tlckNvbmZpZz48L3N0ZXAtdHJhY2tlcj4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiAgICAgICAgJmx0O3N0ZXAtdHJhY2tlclxcbiAgICAgICAgOmN1cnJlbnQtc3RlcD1cXFwic3RlcFRyYWNrZXJDdXJyZW50U3RlcFxcXCJcXG4gICAgICAgIDpjb25maWc9XFxcInN0ZXBUcmFja2VyQ29uZmlnXFxcIiZndDtcXG4gICAgICAgICZsdDsvc3RlcC10cmFja2VyJmd0O1xcbiAgICAgICA8L2NvZGU+XFxuICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPWphdmFzY3JpcHQ+IDxwcmU+XFxuICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1qcz5cXG4gICAgICAgICAgICBsZXQgc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XFxuICAgICAgICAgICAgbGV0IHN0ZXBUcmFja2VyQ29uZmlnID0ge1xcbiAgICAgICAgICAgICAgaXNDbGlja2FibGU6IHRydWUsXFxuICAgICAgICAgICAgICBzdGVwczogW1xcbiAgICAgICAgICAgICAgICB7XFxuICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTdGVwIEEnLFxcbiAgICAgICAgICAgICAgICAgIGxpbms6ICcnLFxcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDA7XFxuICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTdGVwIEInLFxcbiAgICAgICAgICAgICAgICAgIGxpbms6ICcnLFxcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDE7XFxuICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9LCB7XFxuICAgICAgICAgICAgICAgICAgdGl0bGU6ICdTdGVwIEMnLFxcbiAgICAgICAgICAgICAgICAgIGxpbms6ICcnLFxcbiAgICAgICAgICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XFxuICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICBdXFxuICAgICAgICAgICAgfTtcXG4gICAgICAgICAgICBsZXQgdm0gPSBuZXcgVnVlKHtcXG4gICAgICAgICAgICAgIGVsOiAnYm9keScsXFxuICAgICAgICAgICAgICBkYXRhOiB7XFxuICAgICAgICAgICAgICAgIHN0ZXBUcmFja2VyQ29uZmlnLFxcbiAgICAgICAgICAgICAgICBzdGVwVHJhY2tlckN1cnJlbnRTdGVwXFxuICAgICAgICAgICAgfSxcXG4gICAgICAgICAgICAgIGNvbXBvbmVudHM6IHtcXG4gICAgICAgICAgICAgICAgU3RlcFRyYWNrZXJcXG4gICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICB9KTtcXG4gICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5UYWI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHRhYnM+IDx0YWIgbGFiZWw9XFxcIlRhYiAxXFxcIj4gPHA+IFRhYiAxIGNvbnRlbnQgPC9wPiA8L3RhYj4gPHRhYiBsYWJlbD1cXFwiVGFiIDJcXFwiPiA8cD4gVGFiIDIgY29udGVudCA8L3A+IDwvdGFiPiA8dGFiIGxhYmVsPVxcXCJUYWIgM1xcXCIgOmlzLWRpc2FibGVkPXRydWU+IDxwPiBUYWIgMyBjb250ZW50IDwvcD4gPC90YWI+IDwvdGFicz4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4gICAgICAgICAgICAgJmx0O3RhYnMmZ3Q7XFxuICAgICAgICAgICAgICAgJmx0O3RhYiBsYWJlbD1cXFwiVGFiIDFcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XFxuICAgICAgICAgICAgICAgICAgIFRhYiAxIGNvbnRlbnRcXG4gICAgICAgICAgICAgICAgICZsdDsvcCZndDtcXG4gICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcXG4gICAgICAgICAgICAgICAmbHQ7dGFiIGxhYmVsPVxcXCJUYWIgMlxcXCImZ3Q7XFxuICAgICAgICAgICAgICAgICAmbHQ7cCZndDtcXG4gICAgICAgICAgICAgICAgICAgVGFiIDIgY29udGVudFxcbiAgICAgICAgICAgICAgICAgJmx0Oy9wJmd0O1xcbiAgICAgICAgICAgICAgICZsdDsvdGFiJmd0O1xcbiAgICAgICAgICAgICAgICZsdDt0YWIgbGFiZWw9XFxcIlRhYiAzXFxcIiA6aXMtZGlzYWJsZWQ9XFxcInRydWVcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XFxuICAgICAgICAgICAgICAgICAgIFRhYiAzIGNvbnRlbnRcXG4gICAgICAgICAgICAgICAgICZsdDsvcCZndDtcXG4gICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcXG4gICAgICAgICAgICAgJmx0Oy90YWJzJmd0O1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgdi1pZj1pc1Zpc2libGUgdHJhbnNpdGlvbj1mYWRlIGNsYXNzPWMtYWxlcnQgOmNsYXNzPVxcXCInYy1hbGVydC0tJyArIHR5cGVcXFwiIDpjbGFzcz1cXFwieyAnYy1hbGVydC0tZGlzbWlzc2libGUnOiBkaXNtaXNzaWJsZSB9XFxcIiByb2xlPWFsZXJ0PiA8YnV0dG9uIHYtaWY9ZGlzbWlzc2libGUgQGNsaWNrPWRpc21pc3MgdHlwZT1idXR0b24gY2xhc3M9Yy1hbGVydF9fY2xvc2UtYnV0dG9uIGFyaWEtbGFiZWw9Q2xvc2U+IDxzcGFuIGFyaWEtaGlkZGVuPXRydWU+JnRpbWVzOzwvc3Bhbj4gPHNwYW4gY2xhc3M9aHlfdS1pbnZpc2libGU+Q2xvc2U8L3NwYW4+IDwvYnV0dG9uPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3NCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1jb2xsYXBzYWJsZS1wYW5lbD4gPGgzIEBjbGljay5wcmV2ZW50PXRvZ2dsZU9wZW4gOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2MtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlci0tb3Blbic6IGlzT3BlblxcbiAgICB9XFxcIiBjbGFzcz1cXFwiYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyIGh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIiB2LWh0bWw9bGFiZWw+IDwvaDM+IDxkaXYgY2xhc3M9Yy1jb2xsYXBzYWJsZS1wYW5lbF9fYm9keSA6Y2xhc3M9XFxcIntcXG4gICAgJ2MtY29sbGFwc2FibGUtcGFuZWxfX2JvZHktLW9wZW4nOiBpc09wZW5cXG4gIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxNzUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPWMtbGVnYWwtY29udGFpbmVyPiA8b2wgY2xhc3M9Yy1sZWdhbC1jb250YWluZXJfX29yZGVyZWQtbGlzdD4gPGxpIHYtc2V0LWZvY3VzPWxlZ2FsLmlzU2VsZWN0ZWQgY2xhc3M9Yy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSA6Y2xhc3M9XFxcIntcXG4gICAgICAnYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbS0tYWN0aXZlJzogbGVnYWwuaXNTZWxlY3RlZFxcbiAgICB9XFxcIiB2LWZvcj1cXFwibGVnYWwgaW4gaW5kZXhlZExlZ2Fsc1xcXCIgdi1odG1sPWxlZ2FsLmNvbnRlbnQ+IDwvbGk+IDwvb2w+IDx1bCBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcl9fdW5vcmRlcmVkLWxpc3Q+IDxsaSBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVtIHYtZm9yPVxcXCJsZWdhbCBpbiBub25JbmRleGVkTGVnYWxzXFxcIiB2LWh0bWw9bGVnYWwuY29udGVudD4gPC9saT4gPC91bD4gPC9kaXY+IFwiO1xuXG4vKioqLyB9LFxuLyogMTc2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPHN1cCBjbGFzcz1jLWxlZ2FsLXN1cD4gPGEgaHJlZj0jIEBjbGljay5wcmV2ZW50PWNsaWNrSGFuZGxlcj4ge3tsZWdhbENvdW50ZXJ9fSA8L2E+IDwvc3VwPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3NyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1vdmVybGF5LWNvbnRhaW5lcj4gPGRpdiBjbGFzcz1jLW92ZXJsYXktY29udGFpbmVyX19jdXJ0YWluIDpjbGFzcz1cXFwie1xcbiAgICAgICAgJ2Mtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW4tLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgICB9XFxcIiBAY2xpY2sucHJldmVudD1cXFwiaXNWaXNpYmxlPWZhbHNlXFxcIj4gPC9kaXY+IDxkaXYgY2xhc3M9Yy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXMgOmNsYXNzPVxcXCJ7XFxuICAgICAgICAnYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXMtLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgICB9XFxcIj4gPHNsb3Q+PC9zbG90PiA8L2Rpdj4gPC9kaXY+IFwiO1xuXG4vKioqLyB9LFxuLyogMTc4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHRtb2R1bGUuZXhwb3J0cyA9IFwiPGFydGljbGUgY2xhc3M9Yy1vdmVybGF5IHYtc2hvdz1pc1Zpc2libGU+IDxkaXYgY2xhc3M9Yy1vdmVybGF5X19ib2R5PiA8c2xvdCBuYW1lPW92ZXJsYXktYm9keT48L3Nsb3Q+IDwvZGl2PiA8aGVhZGVyIGNsYXNzPWMtb3ZlcmxheV9faGVhZGVyPiA8c2xvdCBuYW1lPW92ZXJsYXktaGVhZGVyPjwvc2xvdD4gPGJ1dHRvbiB0eXBlPWJ1dHRvbiBjbGFzcz1jLW92ZXJsYXlfX2Nsb3NlLWJ1dHRvbiBhcmlhLWxhYmVsPUNsb3NlIHRhYmluZGV4PTAgQGNsaWNrLnByZXZlbnQ9Y2xvc2VPdmVybGF5PjwvYnV0dG9uPiA8L2hlYWRlcj4gPC9hcnRpY2xlPiBcIjtcblxuLyoqKi8gfSxcbi8qIDE3OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgdi1zaG93PWFjdGl2ZSBjbGFzcz1jLXNwaW5uZXIgOmNsYXNzPVxcXCJ7ICdjLXNwaW5uZXItLWZ1bGxzY3JlZW4nOiBmdWxsU2NyZWVuIH1cXFwiPiA8c3ZnIHZpZXdCb3g9XFxcIjAgMCAxMDAgMTAwXFxcIiB3aWR0aD0wIGhlaWdodD0wPiA8Y2lyY2xlIHN0cm9rZS13aWR0aD00IGZpbGw9bm9uZSBzdHJva2UtbGluZWNhcD1yb3VuZCBzdHJva2UtZGFzaG9mZnNldD0wIGN4PTUwIGN5PTUwIHI9MjA+PC9jaXJjbGU+IDwvc3ZnPiA8cCBjbGFzcz1cXFwiYy1zcGlubmVyX190ZXh0IGh5X2MtY29weSBoeV91LWZvbnQtd2VpZ2h0LS1tZWRpdW1cXFwiIHYtaWY9ISF0ZXh0Pnt7dGV4dH19PC9wPiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxODAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8dWwgY2xhc3M9Yy1zdGVwLXRyYWNrZXI+IDxsaSBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9fc3RlcCA6Y2xhc3M9XFxcIntcXG4gICAgICAnYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlJzogY3VycmVudFN0ZXAgPiAkaW5kZXgsXFxuICAgICAgJ2Mtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmUnOiBjdXJyZW50U3RlcCA9PT0gJGluZGV4LFxcbiAgICAgICdjLXN0ZXAtdHJhY2tlcl9fc2V0cC0tY2xpY2thYmxlJzogKGN1cnJlbnRTdGVwID4gJGluZGV4ICYmIGNvbmZpZy5pc0NsaWNrYWJsZSlcXG4gIH1cXFwiIHYtZm9yPVxcXCJzdGVwIGluIGNvbmZpZy5zdGVwc1xcXCI+IDxhIDpocmVmPVxcXCJzdGVwLmxpbmsgfHwgZmFsc2VcXFwiIEBjbGljaz1cXFwiY2xpY2tIYW5kbGVyKCRldmVudCwgc3RlcCwgJGluZGV4KVxcXCIgdi1pZj1jb25maWcuaXNDbGlja2FibGU+IDxzcGFuIGNsYXNzPWMtc3RlcC10cmFja2VyX19pY29uPjwvc3Bhbj4gPHNwYW4gY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX2xhYmVsPnt7JGluZGV4ICsgMX19LiB7e3N0ZXAudGl0bGV9fTwvc3Bhbj4gPC9hPiA8c3BhbiB2LWVsc2UgY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX2ljb24+PC9zcGFuPiA8c3BhbiB2LWVsc2UgY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX2xhYmVsPnt7JGluZGV4ICsgMX19LiB7e3N0ZXAudGl0bGV9fTwvc3Bhbj4gPC9saT4gPC91bD4gXCI7XG5cbi8qKiovIH0sXG4vKiAxODEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPWMtdGFic19fcGFuZSA6Y2xhc3M9XFxcIntcXG4gICAgJ2MtdGFic19fcGFuZS0tYWN0aXZlJzogaXNWaXNpYmxlXFxuICB9XFxcIj4gPHNsb3Q+PC9zbG90PiA8L2Rpdj4gXCI7XG5cbi8qKiovIH0sXG4vKiAxODIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gXCI8ZGl2IGNsYXNzPWMtdGFicz4gPHVsIGNsYXNzPWMtdGFic19faGVhZGVyPiA8bGkgdi1mb3I9XFxcInRhYiBpbiB0YWJzXFxcIiBjbGFzcz1jLXRhYnNfX2hlYWRlci1pdGVtIDpjbGFzcz1cXFwie1xcbiAgICAgICAgICAgICAgICAnYy10YWJzX19oZWFkZXItaXRlbS0tYWN0aXZlJzogKCRpbmRleCA9PT0gYWN0aXZlVGFiSW5kZXgpLFxcbiAgICAgICAgICAgICAgICAnYy10YWJzX19oZWFkZXItaXRlbS0tZGlzYWJsZWQnOiB0YWIuaXNEaXNhYmxlZFxcbiAgICAgICAgICAgICAgfVxcXCIgOmRpc2FibGVkPXRhYi5kaXNhYmxlZD4gPGEgaHJlZj0jIEBjbGljay5wcmV2ZW50PVxcXCJoYW5kbGVUYWJMaXN0Q2xpY2soJGluZGV4LCB0YWIpXFxcIiB2LWh0bWw9dGFiLmxhYmVsPjwvYT4gPC9saT4gPC91bD4gPGRpdiBjbGFzcz1jLXRhYnNfX2JvZHk+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IDwvZGl2PiBcIjtcblxuLyoqKi8gfSxcbi8qIDE4MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjA1KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNDUpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE2Mylcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxODQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIwNilcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ2KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjQpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTg1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ3KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjUpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTg2ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQ4KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNjYpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTg3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMDcpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0OSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY3KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE4OCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MClcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY4KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE4OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1MSlcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTY5KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5MCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Milcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcwKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5MSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Mylcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcxKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5MiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1NClcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTcyKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5MyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjA4KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTUpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Mylcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIwOSlcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU2KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzQpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTk1ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMTApXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1Nylcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc1KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5NiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjExKVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNTgpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3Nilcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAxOTcgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIxMilcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDU5KVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxNzcpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMTk4ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMTMpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MClcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTc4KVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDE5OSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0dmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdF9fd2VicGFja19yZXF1aXJlX18oMjE0KVxuXHRfX3Z1ZV9zY3JpcHRfXyA9IF9fd2VicGFja19yZXF1aXJlX18oNjEpXG5cdF9fdnVlX3RlbXBsYXRlX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDE3OSlcblx0bW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuXHRpZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5cdGlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG5cdCh0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyMDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdHZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuXHRfX3dlYnBhY2tfcmVxdWlyZV9fKDIxNSlcblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYyKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODApXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMjAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X192dWVfc2NyaXB0X18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDYzKVxuXHRfX3Z1ZV90ZW1wbGF0ZV9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygxODEpXG5cdG1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cblx0aWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuXHRpZiAoX192dWVfdGVtcGxhdGVfXykge1xuXHQodHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG5cdH1cblxuXG4vKioqLyB9LFxuLyogMjAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHR2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cblx0X193ZWJwYWNrX3JlcXVpcmVfXygyMTYpXG5cdF9fdnVlX3NjcmlwdF9fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2NClcblx0X192dWVfdGVtcGxhdGVfXyA9IF9fd2VicGFja19yZXF1aXJlX18oMTgyKVxuXHRtb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5cdGlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcblx0aWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcblx0KHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xuXHR9XG5cblxuLyoqKi8gfSxcbi8qIDIwMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyohXG5cdCAqIHZ1ZS1yb3V0ZXIgdjAuNy4xM1xuXHQgKiAoYykgMjAxNiBFdmFuIFlvdVxuXHQgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuXG5cdCAqL1xuXHQoZnVuY3Rpb24gKGdsb2JhbCwgZmFjdG9yeSkge1xuXHQgICB0cnVlID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuXHQgIHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCA/IGRlZmluZShmYWN0b3J5KSA6XG5cdCAgZ2xvYmFsLlZ1ZVJvdXRlciA9IGZhY3RvcnkoKTtcblx0fSh0aGlzLCBmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0Jztcblx0XG5cdCAgdmFyIGJhYmVsSGVscGVycyA9IHt9O1xuXHRcblx0ICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sgPSBmdW5jdGlvbiAoaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7XG5cdCAgICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuXHQgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgZnVuY3Rpb24gVGFyZ2V0KHBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSB7XG5cdCAgICB0aGlzLnBhdGggPSBwYXRoO1xuXHQgICAgdGhpcy5tYXRjaGVyID0gbWF0Y2hlcjtcblx0ICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcblx0ICB9XG5cdFxuXHQgIFRhcmdldC5wcm90b3R5cGUgPSB7XG5cdCAgICB0bzogZnVuY3Rpb24gdG8odGFyZ2V0LCBjYWxsYmFjaykge1xuXHQgICAgICB2YXIgZGVsZWdhdGUgPSB0aGlzLmRlbGVnYXRlO1xuXHRcblx0ICAgICAgaWYgKGRlbGVnYXRlICYmIGRlbGVnYXRlLndpbGxBZGRSb3V0ZSkge1xuXHQgICAgICAgIHRhcmdldCA9IGRlbGVnYXRlLndpbGxBZGRSb3V0ZSh0aGlzLm1hdGNoZXIudGFyZ2V0LCB0YXJnZXQpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICB0aGlzLm1hdGNoZXIuYWRkKHRoaXMucGF0aCwgdGFyZ2V0KTtcblx0XG5cdCAgICAgIGlmIChjYWxsYmFjaykge1xuXHQgICAgICAgIGlmIChjYWxsYmFjay5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IGhhdmUgYW4gYXJndW1lbnQgaW4gdGhlIGZ1bmN0aW9uIHBhc3NlZCB0byBgdG9gXCIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLm1hdGNoZXIuYWRkQ2hpbGQodGhpcy5wYXRoLCB0YXJnZXQsIGNhbGxiYWNrLCB0aGlzLmRlbGVnYXRlKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBNYXRjaGVyKHRhcmdldCkge1xuXHQgICAgdGhpcy5yb3V0ZXMgPSB7fTtcblx0ICAgIHRoaXMuY2hpbGRyZW4gPSB7fTtcblx0ICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuXHQgIH1cblx0XG5cdCAgTWF0Y2hlci5wcm90b3R5cGUgPSB7XG5cdCAgICBhZGQ6IGZ1bmN0aW9uIGFkZChwYXRoLCBoYW5kbGVyKSB7XG5cdCAgICAgIHRoaXMucm91dGVzW3BhdGhdID0gaGFuZGxlcjtcblx0ICAgIH0sXG5cdFxuXHQgICAgYWRkQ2hpbGQ6IGZ1bmN0aW9uIGFkZENoaWxkKHBhdGgsIHRhcmdldCwgY2FsbGJhY2ssIGRlbGVnYXRlKSB7XG5cdCAgICAgIHZhciBtYXRjaGVyID0gbmV3IE1hdGNoZXIodGFyZ2V0KTtcblx0ICAgICAgdGhpcy5jaGlsZHJlbltwYXRoXSA9IG1hdGNoZXI7XG5cdFxuXHQgICAgICB2YXIgbWF0Y2ggPSBnZW5lcmF0ZU1hdGNoKHBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKTtcblx0XG5cdCAgICAgIGlmIChkZWxlZ2F0ZSAmJiBkZWxlZ2F0ZS5jb250ZXh0RW50ZXJlZCkge1xuXHQgICAgICAgIGRlbGVnYXRlLmNvbnRleHRFbnRlcmVkKHRhcmdldCwgbWF0Y2gpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBjYWxsYmFjayhtYXRjaCk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gZ2VuZXJhdGVNYXRjaChzdGFydGluZ1BhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKHBhdGgsIG5lc3RlZENhbGxiYWNrKSB7XG5cdCAgICAgIHZhciBmdWxsUGF0aCA9IHN0YXJ0aW5nUGF0aCArIHBhdGg7XG5cdFxuXHQgICAgICBpZiAobmVzdGVkQ2FsbGJhY2spIHtcblx0ICAgICAgICBuZXN0ZWRDYWxsYmFjayhnZW5lcmF0ZU1hdGNoKGZ1bGxQYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSkpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiBuZXcgVGFyZ2V0KHN0YXJ0aW5nUGF0aCArIHBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGFkZFJvdXRlKHJvdXRlQXJyYXksIHBhdGgsIGhhbmRsZXIpIHtcblx0ICAgIHZhciBsZW4gPSAwO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZUFycmF5Lmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBsZW4gKz0gcm91dGVBcnJheVtpXS5wYXRoLmxlbmd0aDtcblx0ICAgIH1cblx0XG5cdCAgICBwYXRoID0gcGF0aC5zdWJzdHIobGVuKTtcblx0ICAgIHZhciByb3V0ZSA9IHsgcGF0aDogcGF0aCwgaGFuZGxlcjogaGFuZGxlciB9O1xuXHQgICAgcm91dGVBcnJheS5wdXNoKHJvdXRlKTtcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIGVhY2hSb3V0ZShiYXNlUm91dGUsIG1hdGNoZXIsIGNhbGxiYWNrLCBiaW5kaW5nKSB7XG5cdCAgICB2YXIgcm91dGVzID0gbWF0Y2hlci5yb3V0ZXM7XG5cdFxuXHQgICAgZm9yICh2YXIgcGF0aCBpbiByb3V0ZXMpIHtcblx0ICAgICAgaWYgKHJvdXRlcy5oYXNPd25Qcm9wZXJ0eShwYXRoKSkge1xuXHQgICAgICAgIHZhciByb3V0ZUFycmF5ID0gYmFzZVJvdXRlLnNsaWNlKCk7XG5cdCAgICAgICAgYWRkUm91dGUocm91dGVBcnJheSwgcGF0aCwgcm91dGVzW3BhdGhdKTtcblx0XG5cdCAgICAgICAgaWYgKG1hdGNoZXIuY2hpbGRyZW5bcGF0aF0pIHtcblx0ICAgICAgICAgIGVhY2hSb3V0ZShyb3V0ZUFycmF5LCBtYXRjaGVyLmNoaWxkcmVuW3BhdGhdLCBjYWxsYmFjaywgYmluZGluZyk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGNhbGxiYWNrLmNhbGwoYmluZGluZywgcm91dGVBcnJheSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBtYXAgKGNhbGxiYWNrLCBhZGRSb3V0ZUNhbGxiYWNrKSB7XG5cdCAgICB2YXIgbWF0Y2hlciA9IG5ldyBNYXRjaGVyKCk7XG5cdFxuXHQgICAgY2FsbGJhY2soZ2VuZXJhdGVNYXRjaChcIlwiLCBtYXRjaGVyLCB0aGlzLmRlbGVnYXRlKSk7XG5cdFxuXHQgICAgZWFjaFJvdXRlKFtdLCBtYXRjaGVyLCBmdW5jdGlvbiAocm91dGUpIHtcblx0ICAgICAgaWYgKGFkZFJvdXRlQ2FsbGJhY2spIHtcblx0ICAgICAgICBhZGRSb3V0ZUNhbGxiYWNrKHRoaXMsIHJvdXRlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmFkZChyb3V0ZSk7XG5cdCAgICAgIH1cblx0ICAgIH0sIHRoaXMpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHNwZWNpYWxzID0gWycvJywgJy4nLCAnKicsICcrJywgJz8nLCAnfCcsICcoJywgJyknLCAnWycsICddJywgJ3snLCAnfScsICdcXFxcJ107XG5cdFxuXHQgIHZhciBlc2NhcGVSZWdleCA9IG5ldyBSZWdFeHAoJyhcXFxcJyArIHNwZWNpYWxzLmpvaW4oJ3xcXFxcJykgKyAnKScsICdnJyk7XG5cdFxuXHQgIHZhciBub1dhcm5pbmcgPSBmYWxzZTtcblx0ICBmdW5jdGlvbiB3YXJuKG1zZykge1xuXHQgICAgaWYgKCFub1dhcm5pbmcgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIGNvbnNvbGUuZXJyb3IoJ1t2dWUtcm91dGVyXSAnICsgbXNnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRyeURlY29kZSh1cmksIGFzQ29tcG9uZW50KSB7XG5cdCAgICB0cnkge1xuXHQgICAgICByZXR1cm4gYXNDb21wb25lbnQgPyBkZWNvZGVVUklDb21wb25lbnQodXJpKSA6IGRlY29kZVVSSSh1cmkpO1xuXHQgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICB3YXJuKCdtYWxmb3JtZWQgVVJJJyArIChhc0NvbXBvbmVudCA/ICcgY29tcG9uZW50OiAnIDogJzogJykgKyB1cmkpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gaXNBcnJheSh0ZXN0KSB7XG5cdCAgICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHRlc3QpID09PSBcIltvYmplY3QgQXJyYXldXCI7XG5cdCAgfVxuXHRcblx0ICAvLyBBIFNlZ21lbnQgcmVwcmVzZW50cyBhIHNlZ21lbnQgaW4gdGhlIG9yaWdpbmFsIHJvdXRlIGRlc2NyaXB0aW9uLlxuXHQgIC8vIEVhY2ggU2VnbWVudCB0eXBlIHByb3ZpZGVzIGFuIGBlYWNoQ2hhcmAgYW5kIGByZWdleGAgbWV0aG9kLlxuXHQgIC8vXG5cdCAgLy8gVGhlIGBlYWNoQ2hhcmAgbWV0aG9kIGludm9rZXMgdGhlIGNhbGxiYWNrIHdpdGggb25lIG9yIG1vcmUgY2hhcmFjdGVyXG5cdCAgLy8gc3BlY2lmaWNhdGlvbnMuIEEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY29uc3VtZXMgb25lIG9yIG1vcmUgaW5wdXRcblx0ICAvLyBjaGFyYWN0ZXJzLlxuXHQgIC8vXG5cdCAgLy8gVGhlIGByZWdleGAgbWV0aG9kIHJldHVybnMgYSByZWdleCBmcmFnbWVudCBmb3IgdGhlIHNlZ21lbnQuIElmIHRoZVxuXHQgIC8vIHNlZ21lbnQgaXMgYSBkeW5hbWljIG9mIHN0YXIgc2VnbWVudCwgdGhlIHJlZ2V4IGZyYWdtZW50IGFsc28gaW5jbHVkZXNcblx0ICAvLyBhIGNhcHR1cmUuXG5cdCAgLy9cblx0ICAvLyBBIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGNvbnRhaW5zOlxuXHQgIC8vXG5cdCAgLy8gKiBgdmFsaWRDaGFyc2A6IGEgU3RyaW5nIHdpdGggYSBsaXN0IG9mIGFsbCB2YWxpZCBjaGFyYWN0ZXJzLCBvclxuXHQgIC8vICogYGludmFsaWRDaGFyc2A6IGEgU3RyaW5nIHdpdGggYSBsaXN0IG9mIGFsbCBpbnZhbGlkIGNoYXJhY3RlcnNcblx0ICAvLyAqIGByZXBlYXRgOiB0cnVlIGlmIHRoZSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjYW4gcmVwZWF0XG5cdFxuXHQgIGZ1bmN0aW9uIFN0YXRpY1NlZ21lbnQoc3RyaW5nKSB7XG5cdCAgICB0aGlzLnN0cmluZyA9IHN0cmluZztcblx0ICB9XG5cdCAgU3RhdGljU2VnbWVudC5wcm90b3R5cGUgPSB7XG5cdCAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoY2FsbGJhY2spIHtcblx0ICAgICAgdmFyIHN0cmluZyA9IHRoaXMuc3RyaW5nLFxuXHQgICAgICAgICAgY2g7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0cmluZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICBjaCA9IHN0cmluZy5jaGFyQXQoaSk7XG5cdCAgICAgICAgY2FsbGJhY2soeyB2YWxpZENoYXJzOiBjaCB9KTtcblx0ICAgICAgfVxuXHQgICAgfSxcblx0XG5cdCAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnN0cmluZy5yZXBsYWNlKGVzY2FwZVJlZ2V4LCAnXFxcXCQxJyk7XG5cdCAgICB9LFxuXHRcblx0ICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZSgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuc3RyaW5nO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIGZ1bmN0aW9uIER5bmFtaWNTZWdtZW50KG5hbWUpIHtcblx0ICAgIHRoaXMubmFtZSA9IG5hbWU7XG5cdCAgfVxuXHQgIER5bmFtaWNTZWdtZW50LnByb3RvdHlwZSA9IHtcblx0ICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcihjYWxsYmFjaykge1xuXHQgICAgICBjYWxsYmFjayh7IGludmFsaWRDaGFyczogXCIvXCIsIHJlcGVhdDogdHJ1ZSB9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuXHQgICAgICByZXR1cm4gXCIoW14vXSspXCI7XG5cdCAgICB9LFxuXHRcblx0ICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShwYXJhbXMpIHtcblx0ICAgICAgdmFyIHZhbCA9IHBhcmFtc1t0aGlzLm5hbWVdO1xuXHQgICAgICByZXR1cm4gdmFsID09IG51bGwgPyBcIjpcIiArIHRoaXMubmFtZSA6IHZhbDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBTdGFyU2VnbWVudChuYW1lKSB7XG5cdCAgICB0aGlzLm5hbWUgPSBuYW1lO1xuXHQgIH1cblx0ICBTdGFyU2VnbWVudC5wcm90b3R5cGUgPSB7XG5cdCAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoY2FsbGJhY2spIHtcblx0ICAgICAgY2FsbGJhY2soeyBpbnZhbGlkQ2hhcnM6IFwiXCIsIHJlcGVhdDogdHJ1ZSB9KTtcblx0ICAgIH0sXG5cdFxuXHQgICAgcmVnZXg6IGZ1bmN0aW9uIHJlZ2V4KCkge1xuXHQgICAgICByZXR1cm4gXCIoLispXCI7XG5cdCAgICB9LFxuXHRcblx0ICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShwYXJhbXMpIHtcblx0ICAgICAgdmFyIHZhbCA9IHBhcmFtc1t0aGlzLm5hbWVdO1xuXHQgICAgICByZXR1cm4gdmFsID09IG51bGwgPyBcIjpcIiArIHRoaXMubmFtZSA6IHZhbDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBFcHNpbG9uU2VnbWVudCgpIHt9XG5cdCAgRXBzaWxvblNlZ21lbnQucHJvdG90eXBlID0ge1xuXHQgICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKCkge30sXG5cdCAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG5cdCAgICAgIHJldHVybiBcIlwiO1xuXHQgICAgfSxcblx0ICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZSgpIHtcblx0ICAgICAgcmV0dXJuIFwiXCI7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gcGFyc2Uocm91dGUsIG5hbWVzLCBzcGVjaWZpY2l0eSkge1xuXHQgICAgLy8gbm9ybWFsaXplIHJvdXRlIGFzIG5vdCBzdGFydGluZyB3aXRoIGEgXCIvXCIuIFJlY29nbml0aW9uIHdpbGxcblx0ICAgIC8vIGFsc28gbm9ybWFsaXplLlxuXHQgICAgaWYgKHJvdXRlLmNoYXJBdCgwKSA9PT0gXCIvXCIpIHtcblx0ICAgICAgcm91dGUgPSByb3V0ZS5zdWJzdHIoMSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIHNlZ21lbnRzID0gcm91dGUuc3BsaXQoXCIvXCIpLFxuXHQgICAgICAgIHJlc3VsdHMgPSBbXTtcblx0XG5cdCAgICAvLyBBIHJvdXRlcyBoYXMgc3BlY2lmaWNpdHkgZGV0ZXJtaW5lZCBieSB0aGUgb3JkZXIgdGhhdCBpdHMgZGlmZmVyZW50IHNlZ21lbnRzXG5cdCAgICAvLyBhcHBlYXIgaW4uIFRoaXMgc3lzdGVtIG1pcnJvcnMgaG93IHRoZSBtYWduaXR1ZGUgb2YgbnVtYmVycyB3cml0dGVuIGFzIHN0cmluZ3Ncblx0ICAgIC8vIHdvcmtzLlxuXHQgICAgLy8gQ29uc2lkZXIgYSBudW1iZXIgd3JpdHRlbiBhczogXCJhYmNcIi4gQW4gZXhhbXBsZSB3b3VsZCBiZSBcIjIwMFwiLiBBbnkgb3RoZXIgbnVtYmVyIHdyaXR0ZW5cblx0ICAgIC8vIFwieHl6XCIgd2lsbCBiZSBzbWFsbGVyIHRoYW4gXCJhYmNcIiBzbyBsb25nIGFzIGBhID4gemAuIEZvciBpbnN0YW5jZSwgXCIxOTlcIiBpcyBzbWFsbGVyXG5cdCAgICAvLyB0aGVuIFwiMjAwXCIsIGV2ZW4gdGhvdWdoIFwieVwiIGFuZCBcInpcIiAod2hpY2ggYXJlIGJvdGggOSkgYXJlIGxhcmdlciB0aGFuIFwiMFwiICh0aGUgdmFsdWVcblx0ICAgIC8vIG9mIChgYmAgYW5kIGBjYCkuIFRoaXMgaXMgYmVjYXVzZSB0aGUgbGVhZGluZyBzeW1ib2wsIFwiMlwiLCBpcyBsYXJnZXIgdGhhbiB0aGUgb3RoZXJcblx0ICAgIC8vIGxlYWRpbmcgc3ltYm9sLCBcIjFcIi5cblx0ICAgIC8vIFRoZSBydWxlIGlzIHRoYXQgc3ltYm9scyB0byB0aGUgbGVmdCBjYXJyeSBtb3JlIHdlaWdodCB0aGFuIHN5bWJvbHMgdG8gdGhlIHJpZ2h0XG5cdCAgICAvLyB3aGVuIGEgbnVtYmVyIGlzIHdyaXR0ZW4gb3V0IGFzIGEgc3RyaW5nLiBJbiB0aGUgYWJvdmUgc3RyaW5ncywgdGhlIGxlYWRpbmcgZGlnaXRcblx0ICAgIC8vIHJlcHJlc2VudHMgaG93IG1hbnkgMTAwJ3MgYXJlIGluIHRoZSBudW1iZXIsIGFuZCBpdCBjYXJyaWVzIG1vcmUgd2VpZ2h0IHRoYW4gdGhlIG1pZGRsZVxuXHQgICAgLy8gbnVtYmVyIHdoaWNoIHJlcHJlc2VudHMgaG93IG1hbnkgMTAncyBhcmUgaW4gdGhlIG51bWJlci5cblx0ICAgIC8vIFRoaXMgc3lzdGVtIG9mIG51bWJlciBtYWduaXR1ZGUgd29ya3Mgd2VsbCBmb3Igcm91dGUgc3BlY2lmaWNpdHksIHRvby4gQSByb3V0ZSB3cml0dGVuIGFzXG5cdCAgICAvLyBgYS9iL2NgIHdpbGwgYmUgbW9yZSBzcGVjaWZpYyB0aGFuIGB4L3kvemAgYXMgbG9uZyBhcyBgYWAgaXMgbW9yZSBzcGVjaWZpYyB0aGFuXG5cdCAgICAvLyBgeGAsIGlycmVzcGVjdGl2ZSBvZiB0aGUgb3RoZXIgcGFydHMuXG5cdCAgICAvLyBCZWNhdXNlIG9mIHRoaXMgc2ltaWxhcml0eSwgd2UgYXNzaWduIGVhY2ggdHlwZSBvZiBzZWdtZW50IGEgbnVtYmVyIHZhbHVlIHdyaXR0ZW4gYXMgYVxuXHQgICAgLy8gc3RyaW5nLiBXZSBjYW4gZmluZCB0aGUgc3BlY2lmaWNpdHkgb2YgY29tcG91bmQgcm91dGVzIGJ5IGNvbmNhdGVuYXRpbmcgdGhlc2Ugc3RyaW5nc1xuXHQgICAgLy8gdG9nZXRoZXIsIGZyb20gbGVmdCB0byByaWdodC4gQWZ0ZXIgd2UgaGF2ZSBsb29wZWQgdGhyb3VnaCBhbGwgb2YgdGhlIHNlZ21lbnRzLFxuXHQgICAgLy8gd2UgY29udmVydCB0aGUgc3RyaW5nIHRvIGEgbnVtYmVyLlxuXHQgICAgc3BlY2lmaWNpdHkudmFsID0gJyc7XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXSxcblx0ICAgICAgICAgIG1hdGNoO1xuXHRcblx0ICAgICAgaWYgKG1hdGNoID0gc2VnbWVudC5tYXRjaCgvXjooW15cXC9dKykkLykpIHtcblx0ICAgICAgICByZXN1bHRzLnB1c2gobmV3IER5bmFtaWNTZWdtZW50KG1hdGNoWzFdKSk7XG5cdCAgICAgICAgbmFtZXMucHVzaChtYXRjaFsxXSk7XG5cdCAgICAgICAgc3BlY2lmaWNpdHkudmFsICs9ICczJztcblx0ICAgICAgfSBlbHNlIGlmIChtYXRjaCA9IHNlZ21lbnQubWF0Y2goL15cXCooW15cXC9dKykkLykpIHtcblx0ICAgICAgICByZXN1bHRzLnB1c2gobmV3IFN0YXJTZWdtZW50KG1hdGNoWzFdKSk7XG5cdCAgICAgICAgc3BlY2lmaWNpdHkudmFsICs9ICcyJztcblx0ICAgICAgICBuYW1lcy5wdXNoKG1hdGNoWzFdKTtcblx0ICAgICAgfSBlbHNlIGlmIChzZWdtZW50ID09PSBcIlwiKSB7XG5cdCAgICAgICAgcmVzdWx0cy5wdXNoKG5ldyBFcHNpbG9uU2VnbWVudCgpKTtcblx0ICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzEnO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlc3VsdHMucHVzaChuZXcgU3RhdGljU2VnbWVudChzZWdtZW50KSk7XG5cdCAgICAgICAgc3BlY2lmaWNpdHkudmFsICs9ICc0Jztcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIHNwZWNpZmljaXR5LnZhbCA9ICtzcGVjaWZpY2l0eS52YWw7XG5cdFxuXHQgICAgcmV0dXJuIHJlc3VsdHM7XG5cdCAgfVxuXHRcblx0ICAvLyBBIFN0YXRlIGhhcyBhIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGFuZCAoYGNoYXJTcGVjYCkgYW5kIGEgbGlzdCBvZiBwb3NzaWJsZVxuXHQgIC8vIHN1YnNlcXVlbnQgc3RhdGVzIChgbmV4dFN0YXRlc2ApLlxuXHQgIC8vXG5cdCAgLy8gSWYgYSBTdGF0ZSBpcyBhbiBhY2NlcHRpbmcgc3RhdGUsIGl0IHdpbGwgYWxzbyBoYXZlIHNldmVyYWwgYWRkaXRpb25hbFxuXHQgIC8vIHByb3BlcnRpZXM6XG5cdCAgLy9cblx0ICAvLyAqIGByZWdleGA6IEEgcmVndWxhciBleHByZXNzaW9uIHRoYXQgaXMgdXNlZCB0byBleHRyYWN0IHBhcmFtZXRlcnMgZnJvbSBwYXRoc1xuXHQgIC8vICAgdGhhdCByZWFjaGVkIHRoaXMgYWNjZXB0aW5nIHN0YXRlLlxuXHQgIC8vICogYGhhbmRsZXJzYDogSW5mb3JtYXRpb24gb24gaG93IHRvIGNvbnZlcnQgdGhlIGxpc3Qgb2YgY2FwdHVyZXMgaW50byBjYWxsc1xuXHQgIC8vICAgdG8gcmVnaXN0ZXJlZCBoYW5kbGVycyB3aXRoIHRoZSBzcGVjaWZpZWQgcGFyYW1ldGVyc1xuXHQgIC8vICogYHR5cGVzYDogSG93IG1hbnkgc3RhdGljLCBkeW5hbWljIG9yIHN0YXIgc2VnbWVudHMgaW4gdGhpcyByb3V0ZS4gVXNlZCB0b1xuXHQgIC8vICAgZGVjaWRlIHdoaWNoIHJvdXRlIHRvIHVzZSBpZiBtdWx0aXBsZSByZWdpc3RlcmVkIHJvdXRlcyBtYXRjaCBhIHBhdGguXG5cdCAgLy9cblx0ICAvLyBDdXJyZW50bHksIFN0YXRlIGlzIGltcGxlbWVudGVkIG5haXZlbHkgYnkgbG9vcGluZyBvdmVyIGBuZXh0U3RhdGVzYCBhbmRcblx0ICAvLyBjb21wYXJpbmcgYSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBhZ2FpbnN0IGEgY2hhcmFjdGVyLiBBIG1vcmUgZWZmaWNpZW50XG5cdCAgLy8gaW1wbGVtZW50YXRpb24gd291bGQgdXNlIGEgaGFzaCBvZiBrZXlzIHBvaW50aW5nIGF0IG9uZSBvciBtb3JlIG5leHQgc3RhdGVzLlxuXHRcblx0ICBmdW5jdGlvbiBTdGF0ZShjaGFyU3BlYykge1xuXHQgICAgdGhpcy5jaGFyU3BlYyA9IGNoYXJTcGVjO1xuXHQgICAgdGhpcy5uZXh0U3RhdGVzID0gW107XG5cdCAgfVxuXHRcblx0ICBTdGF0ZS5wcm90b3R5cGUgPSB7XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldChjaGFyU3BlYykge1xuXHQgICAgICB2YXIgbmV4dFN0YXRlcyA9IHRoaXMubmV4dFN0YXRlcztcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbmV4dFN0YXRlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICB2YXIgY2hpbGQgPSBuZXh0U3RhdGVzW2ldO1xuXHRcblx0ICAgICAgICB2YXIgaXNFcXVhbCA9IGNoaWxkLmNoYXJTcGVjLnZhbGlkQ2hhcnMgPT09IGNoYXJTcGVjLnZhbGlkQ2hhcnM7XG5cdCAgICAgICAgaXNFcXVhbCA9IGlzRXF1YWwgJiYgY2hpbGQuY2hhclNwZWMuaW52YWxpZENoYXJzID09PSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnM7XG5cdFxuXHQgICAgICAgIGlmIChpc0VxdWFsKSB7XG5cdCAgICAgICAgICByZXR1cm4gY2hpbGQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIHB1dDogZnVuY3Rpb24gcHV0KGNoYXJTcGVjKSB7XG5cdCAgICAgIHZhciBzdGF0ZTtcblx0XG5cdCAgICAgIC8vIElmIHRoZSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBhbHJlYWR5IGV4aXN0cyBpbiBhIGNoaWxkIG9mIHRoZSBjdXJyZW50XG5cdCAgICAgIC8vIHN0YXRlLCBqdXN0IHJldHVybiB0aGF0IHN0YXRlLlxuXHQgICAgICBpZiAoc3RhdGUgPSB0aGlzLmdldChjaGFyU3BlYykpIHtcblx0ICAgICAgICByZXR1cm4gc3RhdGU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIE1ha2UgYSBuZXcgc3RhdGUgZm9yIHRoZSBjaGFyYWN0ZXIgc3BlY1xuXHQgICAgICBzdGF0ZSA9IG5ldyBTdGF0ZShjaGFyU3BlYyk7XG5cdFxuXHQgICAgICAvLyBJbnNlcnQgdGhlIG5ldyBzdGF0ZSBhcyBhIGNoaWxkIG9mIHRoZSBjdXJyZW50IHN0YXRlXG5cdCAgICAgIHRoaXMubmV4dFN0YXRlcy5wdXNoKHN0YXRlKTtcblx0XG5cdCAgICAgIC8vIElmIHRoaXMgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gcmVwZWF0cywgaW5zZXJ0IHRoZSBuZXcgc3RhdGUgYXMgYSBjaGlsZFxuXHQgICAgICAvLyBvZiBpdHNlbGYuIE5vdGUgdGhhdCB0aGlzIHdpbGwgbm90IHRyaWdnZXIgYW4gaW5maW5pdGUgbG9vcCBiZWNhdXNlIGVhY2hcblx0ICAgICAgLy8gdHJhbnNpdGlvbiBkdXJpbmcgcmVjb2duaXRpb24gY29uc3VtZXMgYSBjaGFyYWN0ZXIuXG5cdCAgICAgIGlmIChjaGFyU3BlYy5yZXBlYXQpIHtcblx0ICAgICAgICBzdGF0ZS5uZXh0U3RhdGVzLnB1c2goc3RhdGUpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBSZXR1cm4gdGhlIG5ldyBzdGF0ZVxuXHQgICAgICByZXR1cm4gc3RhdGU7XG5cdCAgICB9LFxuXHRcblx0ICAgIC8vIEZpbmQgYSBsaXN0IG9mIGNoaWxkIHN0YXRlcyBtYXRjaGluZyB0aGUgbmV4dCBjaGFyYWN0ZXJcblx0ICAgIG1hdGNoOiBmdW5jdGlvbiBtYXRjaChjaCkge1xuXHQgICAgICAvLyBERUJVRyBcIlByb2Nlc3NpbmcgYFwiICsgY2ggKyBcImA6XCJcblx0ICAgICAgdmFyIG5leHRTdGF0ZXMgPSB0aGlzLm5leHRTdGF0ZXMsXG5cdCAgICAgICAgICBjaGlsZCxcblx0ICAgICAgICAgIGNoYXJTcGVjLFxuXHQgICAgICAgICAgY2hhcnM7XG5cdFxuXHQgICAgICAvLyBERUJVRyBcIiAgXCIgKyBkZWJ1Z1N0YXRlKHRoaXMpXG5cdCAgICAgIHZhciByZXR1cm5lZCA9IFtdO1xuXHRcblx0ICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBuZXh0U3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGNoaWxkID0gbmV4dFN0YXRlc1tpXTtcblx0XG5cdCAgICAgICAgY2hhclNwZWMgPSBjaGlsZC5jaGFyU3BlYztcblx0XG5cdCAgICAgICAgaWYgKHR5cGVvZiAoY2hhcnMgPSBjaGFyU3BlYy52YWxpZENoYXJzKSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgIGlmIChjaGFycy5pbmRleE9mKGNoKSAhPT0gLTEpIHtcblx0ICAgICAgICAgICAgcmV0dXJuZWQucHVzaChjaGlsZCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgKGNoYXJzID0gY2hhclNwZWMuaW52YWxpZENoYXJzKSAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0ICAgICAgICAgIGlmIChjaGFycy5pbmRleE9mKGNoKSA9PT0gLTEpIHtcblx0ICAgICAgICAgICAgcmV0dXJuZWQucHVzaChjaGlsZCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gcmV0dXJuZWQ7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqIElGIERFQlVHXG5cdCAgICAsIGRlYnVnOiBmdW5jdGlvbigpIHtcblx0ICAgICAgdmFyIGNoYXJTcGVjID0gdGhpcy5jaGFyU3BlYyxcblx0ICAgICAgICAgIGRlYnVnID0gXCJbXCIsXG5cdCAgICAgICAgICBjaGFycyA9IGNoYXJTcGVjLnZhbGlkQ2hhcnMgfHwgY2hhclNwZWMuaW52YWxpZENoYXJzO1xuXHQgICAgICAgaWYgKGNoYXJTcGVjLmludmFsaWRDaGFycykgeyBkZWJ1ZyArPSBcIl5cIjsgfVxuXHQgICAgICBkZWJ1ZyArPSBjaGFycztcblx0ICAgICAgZGVidWcgKz0gXCJdXCI7XG5cdCAgICAgICBpZiAoY2hhclNwZWMucmVwZWF0KSB7IGRlYnVnICs9IFwiK1wiOyB9XG5cdCAgICAgICByZXR1cm4gZGVidWc7XG5cdCAgICB9XG5cdCAgICBFTkQgSUYgKiovXG5cdCAgfTtcblx0XG5cdCAgLyoqIElGIERFQlVHXG5cdCAgZnVuY3Rpb24gZGVidWcobG9nKSB7XG5cdCAgICBjb25zb2xlLmxvZyhsb2cpO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZGVidWdTdGF0ZShzdGF0ZSkge1xuXHQgICAgcmV0dXJuIHN0YXRlLm5leHRTdGF0ZXMubWFwKGZ1bmN0aW9uKG4pIHtcblx0ICAgICAgaWYgKG4ubmV4dFN0YXRlcy5sZW5ndGggPT09IDApIHsgcmV0dXJuIFwiKCBcIiArIG4uZGVidWcoKSArIFwiIFthY2NlcHRpbmddIClcIjsgfVxuXHQgICAgICByZXR1cm4gXCIoIFwiICsgbi5kZWJ1ZygpICsgXCIgPHRoZW4+IFwiICsgbi5uZXh0U3RhdGVzLm1hcChmdW5jdGlvbihzKSB7IHJldHVybiBzLmRlYnVnKCkgfSkuam9pbihcIiBvciBcIikgKyBcIiApXCI7XG5cdCAgICB9KS5qb2luKFwiLCBcIilcblx0ICB9XG5cdCAgRU5EIElGICoqL1xuXHRcblx0ICAvLyBTb3J0IHRoZSByb3V0ZXMgYnkgc3BlY2lmaWNpdHlcblx0ICBmdW5jdGlvbiBzb3J0U29sdXRpb25zKHN0YXRlcykge1xuXHQgICAgcmV0dXJuIHN0YXRlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XG5cdCAgICAgIHJldHVybiBiLnNwZWNpZmljaXR5LnZhbCAtIGEuc3BlY2lmaWNpdHkudmFsO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiByZWNvZ25pemVDaGFyKHN0YXRlcywgY2gpIHtcblx0ICAgIHZhciBuZXh0U3RhdGVzID0gW107XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBzdGF0ZSA9IHN0YXRlc1tpXTtcblx0XG5cdCAgICAgIG5leHRTdGF0ZXMgPSBuZXh0U3RhdGVzLmNvbmNhdChzdGF0ZS5tYXRjaChjaCkpO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiBuZXh0U3RhdGVzO1xuXHQgIH1cblx0XG5cdCAgdmFyIG9DcmVhdGUgPSBPYmplY3QuY3JlYXRlIHx8IGZ1bmN0aW9uIChwcm90bykge1xuXHQgICAgZnVuY3Rpb24gRigpIHt9XG5cdCAgICBGLnByb3RvdHlwZSA9IHByb3RvO1xuXHQgICAgcmV0dXJuIG5ldyBGKCk7XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gUmVjb2duaXplUmVzdWx0cyhxdWVyeVBhcmFtcykge1xuXHQgICAgdGhpcy5xdWVyeVBhcmFtcyA9IHF1ZXJ5UGFyYW1zIHx8IHt9O1xuXHQgIH1cblx0ICBSZWNvZ25pemVSZXN1bHRzLnByb3RvdHlwZSA9IG9DcmVhdGUoe1xuXHQgICAgc3BsaWNlOiBBcnJheS5wcm90b3R5cGUuc3BsaWNlLFxuXHQgICAgc2xpY2U6IEFycmF5LnByb3RvdHlwZS5zbGljZSxcblx0ICAgIHB1c2g6IEFycmF5LnByb3RvdHlwZS5wdXNoLFxuXHQgICAgbGVuZ3RoOiAwLFxuXHQgICAgcXVlcnlQYXJhbXM6IG51bGxcblx0ICB9KTtcblx0XG5cdCAgZnVuY3Rpb24gZmluZEhhbmRsZXIoc3RhdGUsIHBhdGgsIHF1ZXJ5UGFyYW1zKSB7XG5cdCAgICB2YXIgaGFuZGxlcnMgPSBzdGF0ZS5oYW5kbGVycyxcblx0ICAgICAgICByZWdleCA9IHN0YXRlLnJlZ2V4O1xuXHQgICAgdmFyIGNhcHR1cmVzID0gcGF0aC5tYXRjaChyZWdleCksXG5cdCAgICAgICAgY3VycmVudENhcHR1cmUgPSAxO1xuXHQgICAgdmFyIHJlc3VsdCA9IG5ldyBSZWNvZ25pemVSZXN1bHRzKHF1ZXJ5UGFyYW1zKTtcblx0XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgaGFuZGxlciA9IGhhbmRsZXJzW2ldLFxuXHQgICAgICAgICAgbmFtZXMgPSBoYW5kbGVyLm5hbWVzLFxuXHQgICAgICAgICAgcGFyYW1zID0ge307XG5cdFxuXHQgICAgICBmb3IgKHZhciBqID0gMCwgbSA9IG5hbWVzLmxlbmd0aDsgaiA8IG07IGorKykge1xuXHQgICAgICAgIHBhcmFtc1tuYW1lc1tqXV0gPSBjYXB0dXJlc1tjdXJyZW50Q2FwdHVyZSsrXTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgcmVzdWx0LnB1c2goeyBoYW5kbGVyOiBoYW5kbGVyLmhhbmRsZXIsIHBhcmFtczogcGFyYW1zLCBpc0R5bmFtaWM6ICEhbmFtZXMubGVuZ3RoIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBhZGRTZWdtZW50KGN1cnJlbnRTdGF0ZSwgc2VnbWVudCkge1xuXHQgICAgc2VnbWVudC5lYWNoQ2hhcihmdW5jdGlvbiAoY2gpIHtcblx0ICAgICAgdmFyIHN0YXRlO1xuXHRcblx0ICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1dChjaCk7XG5cdCAgICB9KTtcblx0XG5cdCAgICByZXR1cm4gY3VycmVudFN0YXRlO1xuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFydCkge1xuXHQgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDQwMS9pbnRlcmFjdC9mb3Jtcy5odG1sI2gtMTcuMTMuNC4xXG5cdCAgICBwYXJ0ID0gcGFydC5yZXBsYWNlKC9cXCsvZ20sICclMjAnKTtcblx0ICAgIHJldHVybiB0cnlEZWNvZGUocGFydCwgdHJ1ZSk7XG5cdCAgfVxuXHRcblx0ICAvLyBUaGUgbWFpbiBpbnRlcmZhY2Vcblx0XG5cdCAgdmFyIFJvdXRlUmVjb2duaXplciA9IGZ1bmN0aW9uIFJvdXRlUmVjb2duaXplcigpIHtcblx0ICAgIHRoaXMucm9vdFN0YXRlID0gbmV3IFN0YXRlKCk7XG5cdCAgICB0aGlzLm5hbWVzID0ge307XG5cdCAgfTtcblx0XG5cdCAgUm91dGVSZWNvZ25pemVyLnByb3RvdHlwZSA9IHtcblx0ICAgIGFkZDogZnVuY3Rpb24gYWRkKHJvdXRlcywgb3B0aW9ucykge1xuXHQgICAgICB2YXIgY3VycmVudFN0YXRlID0gdGhpcy5yb290U3RhdGUsXG5cdCAgICAgICAgICByZWdleCA9IFwiXlwiLFxuXHQgICAgICAgICAgc3BlY2lmaWNpdHkgPSB7fSxcblx0ICAgICAgICAgIGhhbmRsZXJzID0gW10sXG5cdCAgICAgICAgICBhbGxTZWdtZW50cyA9IFtdLFxuXHQgICAgICAgICAgbmFtZTtcblx0XG5cdCAgICAgIHZhciBpc0VtcHR5ID0gdHJ1ZTtcblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcm91dGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHZhciByb3V0ZSA9IHJvdXRlc1tpXSxcblx0ICAgICAgICAgICAgbmFtZXMgPSBbXTtcblx0XG5cdCAgICAgICAgdmFyIHNlZ21lbnRzID0gcGFyc2Uocm91dGUucGF0aCwgbmFtZXMsIHNwZWNpZmljaXR5KTtcblx0XG5cdCAgICAgICAgYWxsU2VnbWVudHMgPSBhbGxTZWdtZW50cy5jb25jYXQoc2VnbWVudHMpO1xuXHRcblx0ICAgICAgICBmb3IgKHZhciBqID0gMCwgbSA9IHNlZ21lbnRzLmxlbmd0aDsgaiA8IG07IGorKykge1xuXHQgICAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tqXTtcblx0XG5cdCAgICAgICAgICBpZiAoc2VnbWVudCBpbnN0YW5jZW9mIEVwc2lsb25TZWdtZW50KSB7XG5cdCAgICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgIGlzRW1wdHkgPSBmYWxzZTtcblx0XG5cdCAgICAgICAgICAvLyBBZGQgYSBcIi9cIiBmb3IgdGhlIG5ldyBzZWdtZW50XG5cdCAgICAgICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3RhdGUucHV0KHsgdmFsaWRDaGFyczogXCIvXCIgfSk7XG5cdCAgICAgICAgICByZWdleCArPSBcIi9cIjtcblx0XG5cdCAgICAgICAgICAvLyBBZGQgYSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc2VnbWVudCB0byB0aGUgTkZBIGFuZCByZWdleFxuXHQgICAgICAgICAgY3VycmVudFN0YXRlID0gYWRkU2VnbWVudChjdXJyZW50U3RhdGUsIHNlZ21lbnQpO1xuXHQgICAgICAgICAgcmVnZXggKz0gc2VnbWVudC5yZWdleCgpO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgdmFyIGhhbmRsZXIgPSB7IGhhbmRsZXI6IHJvdXRlLmhhbmRsZXIsIG5hbWVzOiBuYW1lcyB9O1xuXHQgICAgICAgIGhhbmRsZXJzLnB1c2goaGFuZGxlcik7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChpc0VtcHR5KSB7XG5cdCAgICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1dCh7IHZhbGlkQ2hhcnM6IFwiL1wiIH0pO1xuXHQgICAgICAgIHJlZ2V4ICs9IFwiL1wiO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBjdXJyZW50U3RhdGUuaGFuZGxlcnMgPSBoYW5kbGVycztcblx0ICAgICAgY3VycmVudFN0YXRlLnJlZ2V4ID0gbmV3IFJlZ0V4cChyZWdleCArIFwiJFwiKTtcblx0ICAgICAgY3VycmVudFN0YXRlLnNwZWNpZmljaXR5ID0gc3BlY2lmaWNpdHk7XG5cdFxuXHQgICAgICBpZiAobmFtZSA9IG9wdGlvbnMgJiYgb3B0aW9ucy5hcykge1xuXHQgICAgICAgIHRoaXMubmFtZXNbbmFtZV0gPSB7XG5cdCAgICAgICAgICBzZWdtZW50czogYWxsU2VnbWVudHMsXG5cdCAgICAgICAgICBoYW5kbGVyczogaGFuZGxlcnNcblx0ICAgICAgICB9O1xuXHQgICAgICB9XG5cdCAgICB9LFxuXHRcblx0ICAgIGhhbmRsZXJzRm9yOiBmdW5jdGlvbiBoYW5kbGVyc0ZvcihuYW1lKSB7XG5cdCAgICAgIHZhciByb3V0ZSA9IHRoaXMubmFtZXNbbmFtZV0sXG5cdCAgICAgICAgICByZXN1bHQgPSBbXTtcblx0ICAgICAgaWYgKCFyb3V0ZSkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcihcIlRoZXJlIGlzIG5vIHJvdXRlIG5hbWVkIFwiICsgbmFtZSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gcm91dGUuaGFuZGxlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgcmVzdWx0LnB1c2gocm91dGUuaGFuZGxlcnNbaV0pO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgfSxcblx0XG5cdCAgICBoYXNSb3V0ZTogZnVuY3Rpb24gaGFzUm91dGUobmFtZSkge1xuXHQgICAgICByZXR1cm4gISF0aGlzLm5hbWVzW25hbWVdO1xuXHQgICAgfSxcblx0XG5cdCAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUobmFtZSwgcGFyYW1zKSB7XG5cdCAgICAgIHZhciByb3V0ZSA9IHRoaXMubmFtZXNbbmFtZV0sXG5cdCAgICAgICAgICBvdXRwdXQgPSBcIlwiO1xuXHQgICAgICBpZiAoIXJvdXRlKSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gcm91dGUgbmFtZWQgXCIgKyBuYW1lKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIHNlZ21lbnRzID0gcm91dGUuc2VnbWVudHM7XG5cdFxuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHNlZ21lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV07XG5cdFxuXHQgICAgICAgIGlmIChzZWdtZW50IGluc3RhbmNlb2YgRXBzaWxvblNlZ21lbnQpIHtcblx0ICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgb3V0cHV0ICs9IFwiL1wiO1xuXHQgICAgICAgIG91dHB1dCArPSBzZWdtZW50LmdlbmVyYXRlKHBhcmFtcyk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChvdXRwdXQuY2hhckF0KDApICE9PSAnLycpIHtcblx0ICAgICAgICBvdXRwdXQgPSAnLycgKyBvdXRwdXQ7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChwYXJhbXMgJiYgcGFyYW1zLnF1ZXJ5UGFyYW1zKSB7XG5cdCAgICAgICAgb3V0cHV0ICs9IHRoaXMuZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXJhbXMucXVlcnlQYXJhbXMpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICByZXR1cm4gb3V0cHV0O1xuXHQgICAgfSxcblx0XG5cdCAgICBnZW5lcmF0ZVF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiBnZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtcykge1xuXHQgICAgICB2YXIgcGFpcnMgPSBbXTtcblx0ICAgICAgdmFyIGtleXMgPSBbXTtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIHBhcmFtcykge1xuXHQgICAgICAgIGlmIChwYXJhbXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHQgICAgICAgICAga2V5cy5wdXNoKGtleSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIGtleXMuc29ydCgpO1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbGVuID0ga2V5cy5sZW5ndGg7IGkgPCBsZW47IGkrKykge1xuXHQgICAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgICAgdmFyIHZhbHVlID0gcGFyYW1zW2tleV07XG5cdCAgICAgICAgaWYgKHZhbHVlID09IG51bGwpIHtcblx0ICAgICAgICAgIGNvbnRpbnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB2YXIgcGFpciA9IGVuY29kZVVSSUNvbXBvbmVudChrZXkpO1xuXHQgICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgICAgICAgZm9yICh2YXIgaiA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGogPCBsOyBqKyspIHtcblx0ICAgICAgICAgICAgdmFyIGFycmF5UGFpciA9IGtleSArICdbXScgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWVbal0pO1xuXHQgICAgICAgICAgICBwYWlycy5wdXNoKGFycmF5UGFpcik7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHBhaXIgKz0gXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuXHQgICAgICAgICAgcGFpcnMucHVzaChwYWlyKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChwYWlycy5sZW5ndGggPT09IDApIHtcblx0ICAgICAgICByZXR1cm4gJyc7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHJldHVybiBcIj9cIiArIHBhaXJzLmpvaW4oXCImXCIpO1xuXHQgICAgfSxcblx0XG5cdCAgICBwYXJzZVF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKSB7XG5cdCAgICAgIHZhciBwYWlycyA9IHF1ZXJ5U3RyaW5nLnNwbGl0KFwiJlwiKSxcblx0ICAgICAgICAgIHF1ZXJ5UGFyYW1zID0ge307XG5cdCAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFpcnMubGVuZ3RoOyBpKyspIHtcblx0ICAgICAgICB2YXIgcGFpciA9IHBhaXJzW2ldLnNwbGl0KCc9JyksXG5cdCAgICAgICAgICAgIGtleSA9IGRlY29kZVF1ZXJ5UGFyYW1QYXJ0KHBhaXJbMF0pLFxuXHQgICAgICAgICAgICBrZXlMZW5ndGggPSBrZXkubGVuZ3RoLFxuXHQgICAgICAgICAgICBpc0FycmF5ID0gZmFsc2UsXG5cdCAgICAgICAgICAgIHZhbHVlO1xuXHQgICAgICAgIGlmIChwYWlyLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICAgICAgdmFsdWUgPSAndHJ1ZSc7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vSGFuZGxlIGFycmF5c1xuXHQgICAgICAgICAgaWYgKGtleUxlbmd0aCA+IDIgJiYga2V5LnNsaWNlKGtleUxlbmd0aCAtIDIpID09PSAnW10nKSB7XG5cdCAgICAgICAgICAgIGlzQXJyYXkgPSB0cnVlO1xuXHQgICAgICAgICAgICBrZXkgPSBrZXkuc2xpY2UoMCwga2V5TGVuZ3RoIC0gMik7XG5cdCAgICAgICAgICAgIGlmICghcXVlcnlQYXJhbXNba2V5XSkge1xuXHQgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0gPSBbXTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgdmFsdWUgPSBwYWlyWzFdID8gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFpclsxXSkgOiAnJztcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzQXJyYXkpIHtcblx0ICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0ucHVzaCh2YWx1ZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0gPSB2YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHF1ZXJ5UGFyYW1zO1xuXHQgICAgfSxcblx0XG5cdCAgICByZWNvZ25pemU6IGZ1bmN0aW9uIHJlY29nbml6ZShwYXRoLCBzaWxlbnQpIHtcblx0ICAgICAgbm9XYXJuaW5nID0gc2lsZW50O1xuXHQgICAgICB2YXIgc3RhdGVzID0gW3RoaXMucm9vdFN0YXRlXSxcblx0ICAgICAgICAgIHBhdGhMZW4sXG5cdCAgICAgICAgICBpLFxuXHQgICAgICAgICAgbCxcblx0ICAgICAgICAgIHF1ZXJ5U3RhcnQsXG5cdCAgICAgICAgICBxdWVyeVBhcmFtcyA9IHt9LFxuXHQgICAgICAgICAgaXNTbGFzaERyb3BwZWQgPSBmYWxzZTtcblx0XG5cdCAgICAgIHF1ZXJ5U3RhcnQgPSBwYXRoLmluZGV4T2YoJz8nKTtcblx0ICAgICAgaWYgKHF1ZXJ5U3RhcnQgIT09IC0xKSB7XG5cdCAgICAgICAgdmFyIHF1ZXJ5U3RyaW5nID0gcGF0aC5zdWJzdHIocXVlcnlTdGFydCArIDEsIHBhdGgubGVuZ3RoKTtcblx0ICAgICAgICBwYXRoID0gcGF0aC5zdWJzdHIoMCwgcXVlcnlTdGFydCk7XG5cdCAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nKSB7XG5cdCAgICAgICAgICBxdWVyeVBhcmFtcyA9IHRoaXMucGFyc2VRdWVyeVN0cmluZyhxdWVyeVN0cmluZyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBwYXRoID0gdHJ5RGVjb2RlKHBhdGgpO1xuXHQgICAgICBpZiAoIXBhdGgpIHJldHVybjtcblx0XG5cdCAgICAgIC8vIERFQlVHIEdST1VQIHBhdGhcblx0XG5cdCAgICAgIGlmIChwYXRoLmNoYXJBdCgwKSAhPT0gXCIvXCIpIHtcblx0ICAgICAgICBwYXRoID0gXCIvXCIgKyBwYXRoO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICBwYXRoTGVuID0gcGF0aC5sZW5ndGg7XG5cdCAgICAgIGlmIChwYXRoTGVuID4gMSAmJiBwYXRoLmNoYXJBdChwYXRoTGVuIC0gMSkgPT09IFwiL1wiKSB7XG5cdCAgICAgICAgcGF0aCA9IHBhdGguc3Vic3RyKDAsIHBhdGhMZW4gLSAxKTtcblx0ICAgICAgICBpc1NsYXNoRHJvcHBlZCA9IHRydWU7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGZvciAoaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHN0YXRlcyA9IHJlY29nbml6ZUNoYXIoc3RhdGVzLCBwYXRoLmNoYXJBdChpKSk7XG5cdCAgICAgICAgaWYgKCFzdGF0ZXMubGVuZ3RoKSB7XG5cdCAgICAgICAgICBicmVhaztcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIEVORCBERUJVRyBHUk9VUFxuXHRcblx0ICAgICAgdmFyIHNvbHV0aW9ucyA9IFtdO1xuXHQgICAgICBmb3IgKGkgPSAwLCBsID0gc3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIGlmIChzdGF0ZXNbaV0uaGFuZGxlcnMpIHtcblx0ICAgICAgICAgIHNvbHV0aW9ucy5wdXNoKHN0YXRlc1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdFxuXHQgICAgICBzdGF0ZXMgPSBzb3J0U29sdXRpb25zKHNvbHV0aW9ucyk7XG5cdFxuXHQgICAgICB2YXIgc3RhdGUgPSBzb2x1dGlvbnNbMF07XG5cdFxuXHQgICAgICBpZiAoc3RhdGUgJiYgc3RhdGUuaGFuZGxlcnMpIHtcblx0ICAgICAgICAvLyBpZiBhIHRyYWlsaW5nIHNsYXNoIHdhcyBkcm9wcGVkIGFuZCBhIHN0YXIgc2VnbWVudCBpcyB0aGUgbGFzdCBzZWdtZW50XG5cdCAgICAgICAgLy8gc3BlY2lmaWVkLCBwdXQgdGhlIHRyYWlsaW5nIHNsYXNoIGJhY2tcblx0ICAgICAgICBpZiAoaXNTbGFzaERyb3BwZWQgJiYgc3RhdGUucmVnZXguc291cmNlLnNsaWNlKC01KSA9PT0gXCIoLispJFwiKSB7XG5cdCAgICAgICAgICBwYXRoID0gcGF0aCArIFwiL1wiO1xuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gZmluZEhhbmRsZXIoc3RhdGUsIHBhdGgsIHF1ZXJ5UGFyYW1zKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUubWFwID0gbWFwO1xuXHRcblx0ICB2YXIgZ2VuUXVlcnkgPSBSb3V0ZVJlY29nbml6ZXIucHJvdG90eXBlLmdlbmVyYXRlUXVlcnlTdHJpbmc7XG5cdFxuXHQgIC8vIGV4cG9ydCBkZWZhdWx0IGZvciBob2xkaW5nIHRoZSBWdWUgcmVmZXJlbmNlXG5cdCAgdmFyIGV4cG9ydHMkMSA9IHt9O1xuXHQgIC8qKlxuXHQgICAqIFdhcm4gc3R1ZmYuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbXNnXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIHdhcm4kMShtc2cpIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdCAgICBpZiAodHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG5cdCAgICAgIGNvbnNvbGUuZXJyb3IoJ1t2dWUtcm91dGVyXSAnICsgbXNnKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlc29sdmUgYSByZWxhdGl2ZSBwYXRoLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGJhc2Vcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gcmVsYXRpdmVcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFwcGVuZFxuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVzb2x2ZVBhdGgoYmFzZSwgcmVsYXRpdmUsIGFwcGVuZCkge1xuXHQgICAgdmFyIHF1ZXJ5ID0gYmFzZS5tYXRjaCgvKFxcPy4qKSQvKTtcblx0ICAgIGlmIChxdWVyeSkge1xuXHQgICAgICBxdWVyeSA9IHF1ZXJ5WzFdO1xuXHQgICAgICBiYXNlID0gYmFzZS5zbGljZSgwLCAtcXVlcnkubGVuZ3RoKTtcblx0ICAgIH1cblx0ICAgIC8vIGEgcXVlcnkhXG5cdCAgICBpZiAocmVsYXRpdmUuY2hhckF0KDApID09PSAnPycpIHtcblx0ICAgICAgcmV0dXJuIGJhc2UgKyByZWxhdGl2ZTtcblx0ICAgIH1cblx0ICAgIHZhciBzdGFjayA9IGJhc2Uuc3BsaXQoJy8nKTtcblx0ICAgIC8vIHJlbW92ZSB0cmFpbGluZyBzZWdtZW50IGlmOlxuXHQgICAgLy8gLSBub3QgYXBwZW5kaW5nXG5cdCAgICAvLyAtIGFwcGVuZGluZyB0byB0cmFpbGluZyBzbGFzaCAobGFzdCBzZWdtZW50IGlzIGVtcHR5KVxuXHQgICAgaWYgKCFhcHBlbmQgfHwgIXN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdKSB7XG5cdCAgICAgIHN0YWNrLnBvcCgpO1xuXHQgICAgfVxuXHQgICAgLy8gcmVzb2x2ZSByZWxhdGl2ZSBwYXRoXG5cdCAgICB2YXIgc2VnbWVudHMgPSByZWxhdGl2ZS5yZXBsYWNlKC9eXFwvLywgJycpLnNwbGl0KCcvJyk7XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNlZ21lbnRzLmxlbmd0aDsgaSsrKSB7XG5cdCAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV07XG5cdCAgICAgIGlmIChzZWdtZW50ID09PSAnLicpIHtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfSBlbHNlIGlmIChzZWdtZW50ID09PSAnLi4nKSB7XG5cdCAgICAgICAgc3RhY2sucG9wKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc3RhY2sucHVzaChzZWdtZW50KTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gZW5zdXJlIGxlYWRpbmcgc2xhc2hcblx0ICAgIGlmIChzdGFja1swXSAhPT0gJycpIHtcblx0ICAgICAgc3RhY2sudW5zaGlmdCgnJyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gc3RhY2suam9pbignLycpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogRm9yZ2l2aW5nIGNoZWNrIGZvciBhIHByb21pc2Vcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBwXG5cdCAgICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gaXNQcm9taXNlKHApIHtcblx0ICAgIHJldHVybiBwICYmIHR5cGVvZiBwLnRoZW4gPT09ICdmdW5jdGlvbic7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZXRyaXZlIGEgcm91dGUgY29uZmlnIGZpZWxkIGZyb20gYSBjb21wb25lbnQgaW5zdGFuY2Vcblx0ICAgKiBPUiBhIGNvbXBvbmVudCBjb250cnVjdG9yLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbnxWdWV9IGNvbXBvbmVudFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG5cdCAgICogQHJldHVybiB7Kn1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCBuYW1lKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IGNvbXBvbmVudCAmJiAoY29tcG9uZW50LiRvcHRpb25zIHx8IGNvbXBvbmVudC5vcHRpb25zKTtcblx0ICAgIHJldHVybiBvcHRpb25zICYmIG9wdGlvbnMucm91dGUgJiYgb3B0aW9ucy5yb3V0ZVtuYW1lXTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlc29sdmUgYW4gYXN5bmMgY29tcG9uZW50IGZhY3RvcnkuIEhhdmUgdG8gZG8gYSBkaXJ0eVxuXHQgICAqIG1vY2sgaGVyZSBiZWNhdXNlIG9mIFZ1ZSBjb3JlJ3MgaW50ZXJuYWwgQVBJIGRlcGVuZHMgb25cblx0ICAgKiBhbiBJRCBjaGVjay5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKi9cblx0XG5cdCAgdmFyIHJlc29sdmVyID0gdW5kZWZpbmVkO1xuXHRcblx0ICBmdW5jdGlvbiByZXNvbHZlQXN5bmNDb21wb25lbnQoaGFuZGxlciwgY2IpIHtcblx0ICAgIGlmICghcmVzb2x2ZXIpIHtcblx0ICAgICAgcmVzb2x2ZXIgPSB7XG5cdCAgICAgICAgcmVzb2x2ZTogZXhwb3J0cyQxLlZ1ZS5wcm90b3R5cGUuX3Jlc29sdmVDb21wb25lbnQsXG5cdCAgICAgICAgJG9wdGlvbnM6IHtcblx0ICAgICAgICAgIGNvbXBvbmVudHM6IHtcblx0ICAgICAgICAgICAgXzogaGFuZGxlci5jb21wb25lbnRcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXNvbHZlci4kb3B0aW9ucy5jb21wb25lbnRzLl8gPSBoYW5kbGVyLmNvbXBvbmVudDtcblx0ICAgIH1cblx0ICAgIHJlc29sdmVyLnJlc29sdmUoJ18nLCBmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG5cdCAgICAgIGhhbmRsZXIuY29tcG9uZW50ID0gQ29tcG9uZW50O1xuXHQgICAgICBjYihDb21wb25lbnQpO1xuXHQgICAgfSk7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBNYXAgdGhlIGR5bmFtaWMgc2VnbWVudHMgaW4gYSBwYXRoIHRvIHBhcmFtcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBxdWVyeVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBtYXBQYXJhbXMocGF0aCwgcGFyYW1zLCBxdWVyeSkge1xuXHQgICAgaWYgKHBhcmFtcyA9PT0gdW5kZWZpbmVkKSBwYXJhbXMgPSB7fTtcblx0XG5cdCAgICBwYXRoID0gcGF0aC5yZXBsYWNlKC86KFteXFwvXSspL2csIGZ1bmN0aW9uIChfLCBrZXkpIHtcblx0ICAgICAgdmFyIHZhbCA9IHBhcmFtc1trZXldO1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKCF2YWwpIHtcblx0ICAgICAgICB3YXJuJDEoJ3BhcmFtIFwiJyArIGtleSArICdcIiBub3QgZm91bmQgd2hlbiBnZW5lcmF0aW5nICcgKyAncGF0aCBmb3IgXCInICsgcGF0aCArICdcIiB3aXRoIHBhcmFtcyAnICsgSlNPTi5zdHJpbmdpZnkocGFyYW1zKSk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbCB8fCAnJztcblx0ICAgIH0pO1xuXHQgICAgaWYgKHF1ZXJ5KSB7XG5cdCAgICAgIHBhdGggKz0gZ2VuUXVlcnkocXVlcnkpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHBhdGg7XG5cdCAgfVxuXHRcblx0ICB2YXIgaGFzaFJFID0gLyMuKiQvO1xuXHRcblx0ICB2YXIgSFRNTDVIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIEhUTUw1SGlzdG9yeShfcmVmKSB7XG5cdCAgICAgIHZhciByb290ID0gX3JlZi5yb290O1xuXHQgICAgICB2YXIgb25DaGFuZ2UgPSBfcmVmLm9uQ2hhbmdlO1xuXHQgICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgSFRNTDVIaXN0b3J5KTtcblx0XG5cdCAgICAgIGlmIChyb290ICYmIHJvb3QgIT09ICcvJykge1xuXHQgICAgICAgIC8vIG1ha2Ugc3VyZSB0aGVyZSdzIHRoZSBzdGFydGluZyBzbGFzaFxuXHQgICAgICAgIGlmIChyb290LmNoYXJBdCgwKSAhPT0gJy8nKSB7XG5cdCAgICAgICAgICByb290ID0gJy8nICsgcm9vdDtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gcmVtb3ZlIHRyYWlsaW5nIHNsYXNoXG5cdCAgICAgICAgdGhpcy5yb290ID0gcm9vdC5yZXBsYWNlKC9cXC8kLywgJycpO1xuXHQgICAgICAgIHRoaXMucm9vdFJFID0gbmV3IFJlZ0V4cCgnXlxcXFwnICsgdGhpcy5yb290KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLnJvb3QgPSBudWxsO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMub25DaGFuZ2UgPSBvbkNoYW5nZTtcblx0ICAgICAgLy8gY2hlY2sgYmFzZSB0YWdcblx0ICAgICAgdmFyIGJhc2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Jhc2UnKTtcblx0ICAgICAgdGhpcy5iYXNlID0gYmFzZUVsICYmIGJhc2VFbC5nZXRBdHRyaWJ1dGUoJ2hyZWYnKTtcblx0ICAgIH1cblx0XG5cdCAgICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICB2YXIgdXJsID0gbG9jYXRpb24ucGF0aG5hbWUgKyBsb2NhdGlvbi5zZWFyY2g7XG5cdCAgICAgICAgaWYgKF90aGlzLnJvb3QpIHtcblx0ICAgICAgICAgIHVybCA9IHVybC5yZXBsYWNlKF90aGlzLnJvb3RSRSwgJycpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBfdGhpcy5vbkNoYW5nZSh1cmwsIGUgJiYgZS5zdGF0ZSwgbG9jYXRpb24uaGFzaCk7XG5cdCAgICAgIH07XG5cdCAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgICB0aGlzLmxpc3RlbmVyKCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG5cdCAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdwb3BzdGF0ZScsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgfTtcblx0XG5cdCAgICBIVE1MNUhpc3RvcnkucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28ocGF0aCwgcmVwbGFjZSwgYXBwZW5kKSB7XG5cdCAgICAgIHZhciB1cmwgPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcblx0ICAgICAgaWYgKHJlcGxhY2UpIHtcblx0ICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7fSwgJycsIHVybCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gcmVjb3JkIHNjcm9sbCBwb3NpdGlvbiBieSByZXBsYWNpbmcgY3VycmVudCBzdGF0ZVxuXHQgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKHtcblx0ICAgICAgICAgIHBvczoge1xuXHQgICAgICAgICAgICB4OiB3aW5kb3cucGFnZVhPZmZzZXQsXG5cdCAgICAgICAgICAgIHk6IHdpbmRvdy5wYWdlWU9mZnNldFxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sICcnLCBsb2NhdGlvbi5ocmVmKTtcblx0ICAgICAgICAvLyB0aGVuIHB1c2ggbmV3IHN0YXRlXG5cdCAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoe30sICcnLCB1cmwpO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciBoYXNoTWF0Y2ggPSBwYXRoLm1hdGNoKGhhc2hSRSk7XG5cdCAgICAgIHZhciBoYXNoID0gaGFzaE1hdGNoICYmIGhhc2hNYXRjaFswXTtcblx0ICAgICAgcGF0aCA9IHVybFxuXHQgICAgICAvLyBzdHJpcCBoYXNoIHNvIGl0IGRvZXNuJ3QgbWVzcyB1cCBwYXJhbXNcblx0ICAgICAgLnJlcGxhY2UoaGFzaFJFLCAnJylcblx0ICAgICAgLy8gcmVtb3ZlIHJvb3QgYmVmb3JlIG1hdGNoaW5nXG5cdCAgICAgIC5yZXBsYWNlKHRoaXMucm9vdFJFLCAnJyk7XG5cdCAgICAgIHRoaXMub25DaGFuZ2UocGF0aCwgbnVsbCwgaGFzaCk7XG5cdCAgICB9O1xuXHRcblx0ICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuZm9ybWF0UGF0aCA9IGZ1bmN0aW9uIGZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKSB7XG5cdCAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nXG5cdCAgICAgIC8vIGFic29sdXRlIHBhdGhcblx0ICAgICAgPyB0aGlzLnJvb3QgPyB0aGlzLnJvb3QgKyAnLycgKyBwYXRoLnJlcGxhY2UoL15cXC8vLCAnJykgOiBwYXRoIDogcmVzb2x2ZVBhdGgodGhpcy5iYXNlIHx8IGxvY2F0aW9uLnBhdGhuYW1lLCBwYXRoLCBhcHBlbmQpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gSFRNTDVIaXN0b3J5O1xuXHQgIH0pKCk7XG5cdFxuXHQgIHZhciBIYXNoSGlzdG9yeSA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBIYXNoSGlzdG9yeShfcmVmKSB7XG5cdCAgICAgIHZhciBoYXNoYmFuZyA9IF9yZWYuaGFzaGJhbmc7XG5cdCAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG5cdCAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBIYXNoSGlzdG9yeSk7XG5cdFxuXHQgICAgICB0aGlzLmhhc2hiYW5nID0gaGFzaGJhbmc7XG5cdCAgICAgIHRoaXMub25DaGFuZ2UgPSBvbkNoYW5nZTtcblx0ICAgIH1cblx0XG5cdCAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHZhciBwYXRoID0gbG9jYXRpb24uaGFzaDtcblx0ICAgICAgICB2YXIgcmF3ID0gcGF0aC5yZXBsYWNlKC9eIyE/LywgJycpO1xuXHQgICAgICAgIC8vIGFsd2F5c1xuXHQgICAgICAgIGlmIChyYXcuY2hhckF0KDApICE9PSAnLycpIHtcblx0ICAgICAgICAgIHJhdyA9ICcvJyArIHJhdztcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFyIGZvcm1hdHRlZFBhdGggPSBzZWxmLmZvcm1hdFBhdGgocmF3KTtcblx0ICAgICAgICBpZiAoZm9ybWF0dGVkUGF0aCAhPT0gcGF0aCkge1xuXHQgICAgICAgICAgbG9jYXRpb24ucmVwbGFjZShmb3JtYXR0ZWRQYXRoKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gZGV0ZXJtaW5lIHF1ZXJ5XG5cdCAgICAgICAgLy8gbm90ZSBpdCdzIHBvc3NpYmxlIHRvIGhhdmUgcXVlcmllcyBpbiBib3RoIHRoZSBhY3R1YWwgVVJMXG5cdCAgICAgICAgLy8gYW5kIHRoZSBoYXNoIGZyYWdtZW50IGl0c2VsZi5cblx0ICAgICAgICB2YXIgcXVlcnkgPSBsb2NhdGlvbi5zZWFyY2ggJiYgcGF0aC5pbmRleE9mKCc/JykgPiAtMSA/ICcmJyArIGxvY2F0aW9uLnNlYXJjaC5zbGljZSgxKSA6IGxvY2F0aW9uLnNlYXJjaDtcblx0ICAgICAgICBzZWxmLm9uQ2hhbmdlKHBhdGgucmVwbGFjZSgvXiMhPy8sICcnKSArIHF1ZXJ5KTtcblx0ICAgICAgfTtcblx0ICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2hhc2hjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgICAgdGhpcy5saXN0ZW5lcigpO1xuXHQgICAgfTtcblx0XG5cdCAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG5cdCAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdoYXNoY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICB9O1xuXHRcblx0ICAgIEhhc2hIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCkge1xuXHQgICAgICBwYXRoID0gdGhpcy5mb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCk7XG5cdCAgICAgIGlmIChyZXBsYWNlKSB7XG5cdCAgICAgICAgbG9jYXRpb24ucmVwbGFjZShwYXRoKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBsb2NhdGlvbi5oYXNoID0gcGF0aDtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuZm9ybWF0UGF0aCA9IGZ1bmN0aW9uIGZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKSB7XG5cdCAgICAgIHZhciBpc0Fic29sb3V0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLyc7XG5cdCAgICAgIHZhciBwcmVmaXggPSAnIycgKyAodGhpcy5oYXNoYmFuZyA/ICchJyA6ICcnKTtcblx0ICAgICAgcmV0dXJuIGlzQWJzb2xvdXRlID8gcHJlZml4ICsgcGF0aCA6IHByZWZpeCArIHJlc29sdmVQYXRoKGxvY2F0aW9uLmhhc2gucmVwbGFjZSgvXiMhPy8sICcnKSwgcGF0aCwgYXBwZW5kKTtcblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIEhhc2hIaXN0b3J5O1xuXHQgIH0pKCk7XG5cdFxuXHQgIHZhciBBYnN0cmFjdEhpc3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gQWJzdHJhY3RIaXN0b3J5KF9yZWYpIHtcblx0ICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTtcblx0ICAgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIEFic3RyYWN0SGlzdG9yeSk7XG5cdFxuXHQgICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG5cdCAgICAgIHRoaXMuY3VycmVudFBhdGggPSAnLyc7XG5cdCAgICB9XG5cdFxuXHQgICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KCkge1xuXHQgICAgICB0aGlzLm9uQ2hhbmdlKCcvJyk7XG5cdCAgICB9O1xuXHRcblx0ICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG5cdCAgICAgIC8vIG5vb3Bcblx0ICAgIH07XG5cdFxuXHQgICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCkge1xuXHQgICAgICBwYXRoID0gdGhpcy5jdXJyZW50UGF0aCA9IHRoaXMuZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpO1xuXHQgICAgICB0aGlzLm9uQ2hhbmdlKHBhdGgpO1xuXHQgICAgfTtcblx0XG5cdCAgICBBYnN0cmFjdEhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuXHQgICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGggOiByZXNvbHZlUGF0aCh0aGlzLmN1cnJlbnRQYXRoLCBwYXRoLCBhcHBlbmQpO1xuXHQgICAgfTtcblx0XG5cdCAgICByZXR1cm4gQWJzdHJhY3RIaXN0b3J5O1xuXHQgIH0pKCk7XG5cdFxuXHQgIC8qKlxuXHQgICAqIERldGVybWluZSB0aGUgcmV1c2FiaWxpdHkgb2YgYW4gZXhpc3Rpbmcgcm91dGVyIHZpZXcuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG5cdCAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGNhblJldXNlKHZpZXcsIGhhbmRsZXIsIHRyYW5zaXRpb24pIHtcblx0ICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG5cdCAgICBpZiAoIWNvbXBvbmVudCB8fCAhaGFuZGxlcikge1xuXHQgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICB9XG5cdCAgICAvLyBpbXBvcnRhbnQ6IGNoZWNrIHZpZXcuQ29tcG9uZW50IGhlcmUgYmVjYXVzZSBpdCBtYXlcblx0ICAgIC8vIGhhdmUgYmVlbiBjaGFuZ2VkIGluIGFjdGl2YXRlIGhvb2tcblx0ICAgIGlmICh2aWV3LkNvbXBvbmVudCAhPT0gaGFuZGxlci5jb21wb25lbnQpIHtcblx0ICAgICAgcmV0dXJuIGZhbHNlO1xuXHQgICAgfVxuXHQgICAgdmFyIGNhblJldXNlRm4gPSBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsICdjYW5SZXVzZScpO1xuXHQgICAgcmV0dXJuIHR5cGVvZiBjYW5SZXVzZUZuID09PSAnYm9vbGVhbicgPyBjYW5SZXVzZUZuIDogY2FuUmV1c2VGbiA/IGNhblJldXNlRm4uY2FsbChjb21wb25lbnQsIHtcblx0ICAgICAgdG86IHRyYW5zaXRpb24udG8sXG5cdCAgICAgIGZyb206IHRyYW5zaXRpb24uZnJvbVxuXHQgICAgfSkgOiB0cnVlOyAvLyBkZWZhdWx0cyB0byB0cnVlXG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBpZiBhIGNvbXBvbmVudCBjYW4gZGVhY3RpdmF0ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG5cdCAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYW5EZWFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIG5leHQpIHtcblx0ICAgIHZhciBmcm9tQ29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuXHQgICAgdmFyIGhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhmcm9tQ29tcG9uZW50LCAnY2FuRGVhY3RpdmF0ZScpO1xuXHQgICAgaWYgKCFob29rKSB7XG5cdCAgICAgIG5leHQoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRyYW5zaXRpb24uY2FsbEhvb2soaG9vaywgZnJvbUNvbXBvbmVudCwgbmV4dCwge1xuXHQgICAgICAgIGV4cGVjdEJvb2xlYW46IHRydWVcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBpZiBhIGNvbXBvbmVudCBjYW4gYWN0aXZhdGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG5leHRcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gY2FuQWN0aXZhdGUoaGFuZGxlciwgdHJhbnNpdGlvbiwgbmV4dCkge1xuXHQgICAgcmVzb2x2ZUFzeW5jQ29tcG9uZW50KGhhbmRsZXIsIGZ1bmN0aW9uIChDb21wb25lbnQpIHtcblx0ICAgICAgLy8gaGF2ZSB0byBjaGVjayBkdWUgdG8gYXN5bmMtbmVzc1xuXHQgICAgICBpZiAodHJhbnNpdGlvbi5hYm9ydGVkKSB7XG5cdCAgICAgICAgcmV0dXJuO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGRldGVybWluZSBpZiB0aGlzIGNvbXBvbmVudCBjYW4gYmUgYWN0aXZhdGVkXG5cdCAgICAgIHZhciBob29rID0gZ2V0Um91dGVDb25maWcoQ29tcG9uZW50LCAnY2FuQWN0aXZhdGUnKTtcblx0ICAgICAgaWYgKCFob29rKSB7XG5cdCAgICAgICAgbmV4dCgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRyYW5zaXRpb24uY2FsbEhvb2soaG9vaywgbnVsbCwgbmV4dCwge1xuXHQgICAgICAgICAgZXhwZWN0Qm9vbGVhbjogdHJ1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIENhbGwgZGVhY3RpdmF0ZSBob29rcyBmb3IgZXhpc3Rpbmcgcm91dGVyLXZpZXdzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBuZXh0XG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGRlYWN0aXZhdGUodmlldywgdHJhbnNpdGlvbiwgbmV4dCkge1xuXHQgICAgdmFyIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcblx0ICAgIHZhciBob29rID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnZGVhY3RpdmF0ZScpO1xuXHQgICAgaWYgKCFob29rKSB7XG5cdCAgICAgIG5leHQoKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRyYW5zaXRpb24uY2FsbEhvb2tzKGhvb2ssIGNvbXBvbmVudCwgbmV4dCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBY3RpdmF0ZSAvIHN3aXRjaCBjb21wb25lbnQgZm9yIGEgcm91dGVyLXZpZXcuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuXHQgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBkZXB0aFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gYWN0aXZhdGUodmlldywgdHJhbnNpdGlvbiwgZGVwdGgsIGNiLCByZXVzZSkge1xuXHQgICAgdmFyIGhhbmRsZXIgPSB0cmFuc2l0aW9uLmFjdGl2YXRlUXVldWVbZGVwdGhdO1xuXHQgICAgaWYgKCFoYW5kbGVyKSB7XG5cdCAgICAgIHNhdmVDaGlsZFZpZXcodmlldyk7XG5cdCAgICAgIGlmICh2aWV3Ll9ib3VuZCkge1xuXHQgICAgICAgIHZpZXcuc2V0Q29tcG9uZW50KG51bGwpO1xuXHQgICAgICB9XG5cdCAgICAgIGNiICYmIGNiKCk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICB2YXIgQ29tcG9uZW50ID0gdmlldy5Db21wb25lbnQgPSBoYW5kbGVyLmNvbXBvbmVudDtcblx0ICAgIHZhciBhY3RpdmF0ZUhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhDb21wb25lbnQsICdhY3RpdmF0ZScpO1xuXHQgICAgdmFyIGRhdGFIb29rID0gZ2V0Um91dGVDb25maWcoQ29tcG9uZW50LCAnZGF0YScpO1xuXHQgICAgdmFyIHdhaXRGb3JEYXRhID0gZ2V0Um91dGVDb25maWcoQ29tcG9uZW50LCAnd2FpdEZvckRhdGEnKTtcblx0XG5cdCAgICB2aWV3LmRlcHRoID0gZGVwdGg7XG5cdCAgICB2aWV3LmFjdGl2YXRlZCA9IGZhbHNlO1xuXHRcblx0ICAgIHZhciBjb21wb25lbnQgPSB1bmRlZmluZWQ7XG5cdCAgICB2YXIgbG9hZGluZyA9ICEhKGRhdGFIb29rICYmICF3YWl0Rm9yRGF0YSk7XG5cdFxuXHQgICAgLy8gXCJyZXVzZVwiIGlzIGEgZmxhZyBwYXNzZWQgZG93biB3aGVuIHRoZSBwYXJlbnQgdmlldyBpc1xuXHQgICAgLy8gZWl0aGVyIHJldXNlZCB2aWEga2VlcC1hbGl2ZSBvciBhcyBhIGNoaWxkIG9mIGEga2VwdC1hbGl2ZSB2aWV3LlxuXHQgICAgLy8gb2YgY291cnNlIHdlIGNhbiBvbmx5IHJldXNlIGlmIHRoZSBjdXJyZW50IGtlcHQtYWxpdmUgaW5zdGFuY2Vcblx0ICAgIC8vIGlzIG9mIHRoZSBjb3JyZWN0IHR5cGUuXG5cdCAgICByZXVzZSA9IHJldXNlICYmIHZpZXcuY2hpbGRWTSAmJiB2aWV3LmNoaWxkVk0uY29uc3RydWN0b3IgPT09IENvbXBvbmVudDtcblx0XG5cdCAgICBpZiAocmV1c2UpIHtcblx0ICAgICAgLy8ganVzdCByZXVzZVxuXHQgICAgICBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG5cdCAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGxvYWRpbmc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzYXZlQ2hpbGRWaWV3KHZpZXcpO1xuXHRcblx0ICAgICAgLy8gdW5idWlsZCBjdXJyZW50IGNvbXBvbmVudC4gdGhpcyBzdGVwIGFsc28gZGVzdHJveXNcblx0ICAgICAgLy8gYW5kIHJlbW92ZXMgYWxsIG5lc3RlZCBjaGlsZCB2aWV3cy5cblx0ICAgICAgdmlldy51bmJ1aWxkKHRydWUpO1xuXHRcblx0ICAgICAgLy8gYnVpbGQgdGhlIG5ldyBjb21wb25lbnQuIHRoaXMgd2lsbCBhbHNvIGNyZWF0ZSB0aGVcblx0ICAgICAgLy8gZGlyZWN0IGNoaWxkIHZpZXcgb2YgdGhlIGN1cnJlbnQgb25lLiBpdCB3aWxsIHJlZ2lzdGVyXG5cdCAgICAgIC8vIGl0c2VsZiBhcyB2aWV3LmNoaWxkVmlldy5cblx0ICAgICAgY29tcG9uZW50ID0gdmlldy5idWlsZCh7XG5cdCAgICAgICAgX21ldGE6IHtcblx0ICAgICAgICAgICRsb2FkaW5nUm91dGVEYXRhOiBsb2FkaW5nXG5cdCAgICAgICAgfSxcblx0ICAgICAgICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuXHQgICAgICAgICAgdGhpcy5fcm91dGVyVmlldyA9IHZpZXc7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIC8vIGhhbmRsZSBrZWVwLWFsaXZlLlxuXHQgICAgICAvLyB3aGVuIGEga2VwdC1hbGl2ZSBjaGlsZCB2bSBpcyByZXN0b3JlZCwgd2UgbmVlZCB0b1xuXHQgICAgICAvLyBhZGQgaXRzIGNhY2hlZCBjaGlsZCB2aWV3cyBpbnRvIHRoZSByb3V0ZXIncyB2aWV3IGxpc3QsXG5cdCAgICAgIC8vIGFuZCBhbHNvIHByb3Blcmx5IHVwZGF0ZSBjdXJyZW50IHZpZXcncyBjaGlsZCB2aWV3LlxuXHQgICAgICBpZiAodmlldy5rZWVwQWxpdmUpIHtcblx0ICAgICAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSBsb2FkaW5nO1xuXHQgICAgICAgIHZhciBjYWNoZWRDaGlsZFZpZXcgPSBjb21wb25lbnQuX2tlZXBBbGl2ZVJvdXRlclZpZXc7XG5cdCAgICAgICAgaWYgKGNhY2hlZENoaWxkVmlldykge1xuXHQgICAgICAgICAgdmlldy5jaGlsZFZpZXcgPSBjYWNoZWRDaGlsZFZpZXc7XG5cdCAgICAgICAgICBjb21wb25lbnQuX2tlZXBBbGl2ZVJvdXRlclZpZXcgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIGNsZWFudXAgdGhlIGNvbXBvbmVudCBpbiBjYXNlIHRoZSB0cmFuc2l0aW9uIGlzIGFib3J0ZWRcblx0ICAgIC8vIGJlZm9yZSB0aGUgY29tcG9uZW50IGlzIGV2ZXIgaW5zZXJ0ZWQuXG5cdCAgICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uIGNsZWFudXAoKSB7XG5cdCAgICAgIGNvbXBvbmVudC4kZGVzdHJveSgpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBhY3R1YWxseSBpbnNlcnQgdGhlIGNvbXBvbmVudCBhbmQgdHJpZ2dlciB0cmFuc2l0aW9uXG5cdCAgICB2YXIgaW5zZXJ0ID0gZnVuY3Rpb24gaW5zZXJ0KCkge1xuXHQgICAgICBpZiAocmV1c2UpIHtcblx0ICAgICAgICBjYiAmJiBjYigpO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB2YXIgcm91dGVyID0gdHJhbnNpdGlvbi5yb3V0ZXI7XG5cdCAgICAgIGlmIChyb3V0ZXIuX3JlbmRlcmVkIHx8IHJvdXRlci5fdHJhbnNpdGlvbk9uTG9hZCkge1xuXHQgICAgICAgIHZpZXcudHJhbnNpdGlvbihjb21wb25lbnQpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIG5vIHRyYW5zaXRpb24gb24gZmlyc3QgcmVuZGVyLCBtYW51YWwgdHJhbnNpdGlvblxuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmICh2aWV3LnNldEN1cnJlbnQpIHtcblx0ICAgICAgICAgIC8vIDAuMTIgY29tcGF0XG5cdCAgICAgICAgICB2aWV3LnNldEN1cnJlbnQoY29tcG9uZW50KTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgLy8gMS4wXG5cdCAgICAgICAgICB2aWV3LmNoaWxkVk0gPSBjb21wb25lbnQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGNvbXBvbmVudC4kYmVmb3JlKHZpZXcuYW5jaG9yLCBudWxsLCBmYWxzZSk7XG5cdCAgICAgIH1cblx0ICAgICAgY2IgJiYgY2IoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgdmFyIGFmdGVyRGF0YSA9IGZ1bmN0aW9uIGFmdGVyRGF0YSgpIHtcblx0ICAgICAgLy8gYWN0aXZhdGUgdGhlIGNoaWxkIHZpZXdcblx0ICAgICAgaWYgKHZpZXcuY2hpbGRWaWV3KSB7XG5cdCAgICAgICAgYWN0aXZhdGUodmlldy5jaGlsZFZpZXcsIHRyYW5zaXRpb24sIGRlcHRoICsgMSwgbnVsbCwgcmV1c2UgfHwgdmlldy5rZWVwQWxpdmUpO1xuXHQgICAgICB9XG5cdCAgICAgIGluc2VydCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBjYWxsZWQgYWZ0ZXIgYWN0aXZhdGlvbiBob29rIGlzIHJlc29sdmVkXG5cdCAgICB2YXIgYWZ0ZXJBY3RpdmF0ZSA9IGZ1bmN0aW9uIGFmdGVyQWN0aXZhdGUoKSB7XG5cdCAgICAgIHZpZXcuYWN0aXZhdGVkID0gdHJ1ZTtcblx0ICAgICAgaWYgKGRhdGFIb29rICYmIHdhaXRGb3JEYXRhKSB7XG5cdCAgICAgICAgLy8gd2FpdCB1bnRpbCBkYXRhIGxvYWRlZCB0byBpbnNlcnRcblx0ICAgICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rLCBhZnRlckRhdGEsIGNsZWFudXApO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIGxvYWQgZGF0YSBhbmQgaW5zZXJ0IGF0IHRoZSBzYW1lIHRpbWVcblx0ICAgICAgICBpZiAoZGF0YUhvb2spIHtcblx0ICAgICAgICAgIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgZGF0YUhvb2spO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBhZnRlckRhdGEoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICBpZiAoYWN0aXZhdGVIb29rKSB7XG5cdCAgICAgIHRyYW5zaXRpb24uY2FsbEhvb2tzKGFjdGl2YXRlSG9vaywgY29tcG9uZW50LCBhZnRlckFjdGl2YXRlLCB7XG5cdCAgICAgICAgY2xlYW51cDogY2xlYW51cCxcblx0ICAgICAgICBwb3N0QWN0aXZhdGU6IHRydWVcblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBhZnRlckFjdGl2YXRlKCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZXVzZSBhIHZpZXcsIGp1c3QgcmVsb2FkIGRhdGEgaWYgbmVjZXNzYXJ5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcblx0ICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmV1c2UodmlldywgdHJhbnNpdGlvbikge1xuXHQgICAgdmFyIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcblx0ICAgIHZhciBkYXRhSG9vayA9IGdldFJvdXRlQ29uZmlnKGNvbXBvbmVudCwgJ2RhdGEnKTtcblx0ICAgIGlmIChkYXRhSG9vaykge1xuXHQgICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFzeW5jaHJvbm91c2x5IGxvYWQgYW5kIGFwcGx5IGRhdGEgdG8gY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IGNvbXBvbmVudFxuXHQgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNsZWFudXBcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gbG9hZERhdGEoY29tcG9uZW50LCB0cmFuc2l0aW9uLCBob29rLCBjYiwgY2xlYW51cCkge1xuXHQgICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gdHJ1ZTtcblx0ICAgIHRyYW5zaXRpb24uY2FsbEhvb2tzKGhvb2ssIGNvbXBvbmVudCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICBjb21wb25lbnQuJGxvYWRpbmdSb3V0ZURhdGEgPSBmYWxzZTtcblx0ICAgICAgY29tcG9uZW50LiRlbWl0KCdyb3V0ZS1kYXRhLWxvYWRlZCcsIGNvbXBvbmVudCk7XG5cdCAgICAgIGNiICYmIGNiKCk7XG5cdCAgICB9LCB7XG5cdCAgICAgIGNsZWFudXA6IGNsZWFudXAsXG5cdCAgICAgIHBvc3RBY3RpdmF0ZTogdHJ1ZSxcblx0ICAgICAgcHJvY2Vzc0RhdGE6IGZ1bmN0aW9uIHByb2Nlc3NEYXRhKGRhdGEpIHtcblx0ICAgICAgICAvLyBoYW5kbGUgcHJvbWlzZSBzdWdhciBzeW50YXhcblx0ICAgICAgICB2YXIgcHJvbWlzZXMgPSBbXTtcblx0ICAgICAgICBpZiAoaXNQbGFpbk9iamVjdChkYXRhKSkge1xuXHQgICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICAgICAgICAgIHZhciB2YWwgPSBkYXRhW2tleV07XG5cdCAgICAgICAgICAgIGlmIChpc1Byb21pc2UodmFsKSkge1xuXHQgICAgICAgICAgICAgIHByb21pc2VzLnB1c2godmFsLnRoZW4oZnVuY3Rpb24gKHJlc29sdmVkVmFsKSB7XG5cdCAgICAgICAgICAgICAgICBjb21wb25lbnQuJHNldChrZXksIHJlc29sdmVkVmFsKTtcblx0ICAgICAgICAgICAgICB9KSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgY29tcG9uZW50LiRzZXQoa2V5LCB2YWwpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKHByb21pc2VzLmxlbmd0aCkge1xuXHQgICAgICAgICAgcmV0dXJuIHByb21pc2VzWzBdLmNvbnN0cnVjdG9yLmFsbChwcm9taXNlcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNhdmUgdGhlIGNoaWxkIHZpZXcgZm9yIGEga2VwdC1hbGl2ZSB2aWV3IHNvIHRoYXRcblx0ICAgKiB3ZSBjYW4gcmVzdG9yZSBpdCB3aGVuIGl0IGlzIHN3aXRjaGVkIGJhY2sgdG8uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBzYXZlQ2hpbGRWaWV3KHZpZXcpIHtcblx0ICAgIGlmICh2aWV3LmtlZXBBbGl2ZSAmJiB2aWV3LmNoaWxkVk0gJiYgdmlldy5jaGlsZFZpZXcpIHtcblx0ICAgICAgdmlldy5jaGlsZFZNLl9rZWVwQWxpdmVSb3V0ZXJWaWV3ID0gdmlldy5jaGlsZFZpZXc7XG5cdCAgICB9XG5cdCAgICB2aWV3LmNoaWxkVmlldyA9IG51bGw7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayBwbGFpbiBvYmplY3QuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBpc1BsYWluT2JqZWN0KHZhbCkge1xuXHQgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBPYmplY3RdJztcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEEgUm91dGVUcmFuc2l0aW9uIG9iamVjdCBtYW5hZ2VzIHRoZSBwaXBlbGluZSBvZiBhXG5cdCAgICogcm91dGVyLXZpZXcgc3dpdGNoaW5nIHByb2Nlc3MuIFRoaXMgaXMgYWxzbyB0aGUgb2JqZWN0XG5cdCAgICogcGFzc2VkIGludG8gdXNlciByb3V0ZSBob29rcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Um91dGVyfSByb3V0ZXJcblx0ICAgKiBAcGFyYW0ge1JvdXRlfSB0b1xuXHQgICAqIEBwYXJhbSB7Um91dGV9IGZyb21cblx0ICAgKi9cblx0XG5cdCAgdmFyIFJvdXRlVHJhbnNpdGlvbiA9IChmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBSb3V0ZVRyYW5zaXRpb24ocm91dGVyLCB0bywgZnJvbSkge1xuXHQgICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGVUcmFuc2l0aW9uKTtcblx0XG5cdCAgICAgIHRoaXMucm91dGVyID0gcm91dGVyO1xuXHQgICAgICB0aGlzLnRvID0gdG87XG5cdCAgICAgIHRoaXMuZnJvbSA9IGZyb207XG5cdCAgICAgIHRoaXMubmV4dCA9IG51bGw7XG5cdCAgICAgIHRoaXMuYWJvcnRlZCA9IGZhbHNlO1xuXHQgICAgICB0aGlzLmRvbmUgPSBmYWxzZTtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIEFib3J0IGN1cnJlbnQgdHJhbnNpdGlvbiBhbmQgcmV0dXJuIHRvIHByZXZpb3VzIGxvY2F0aW9uLlxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5hYm9ydCA9IGZ1bmN0aW9uIGFib3J0KCkge1xuXHQgICAgICBpZiAoIXRoaXMuYWJvcnRlZCkge1xuXHQgICAgICAgIHRoaXMuYWJvcnRlZCA9IHRydWU7XG5cdCAgICAgICAgLy8gaWYgdGhlIHJvb3QgcGF0aCB0aHJvd3MgYW4gZXJyb3IgZHVyaW5nIHZhbGlkYXRpb25cblx0ICAgICAgICAvLyBvbiBpbml0aWFsIGxvYWQsIGl0IGdldHMgY2F1Z2h0IGluIGFuIGluZmluaXRlIGxvb3AuXG5cdCAgICAgICAgdmFyIGFib3J0aW5nT25Mb2FkID0gIXRoaXMuZnJvbS5wYXRoICYmIHRoaXMudG8ucGF0aCA9PT0gJy8nO1xuXHQgICAgICAgIGlmICghYWJvcnRpbmdPbkxvYWQpIHtcblx0ICAgICAgICAgIHRoaXMucm91dGVyLnJlcGxhY2UodGhpcy5mcm9tLnBhdGggfHwgJy8nKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBYm9ydCBjdXJyZW50IHRyYW5zaXRpb24gYW5kIHJlZGlyZWN0IHRvIGEgbmV3IGxvY2F0aW9uLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLnJlZGlyZWN0ID0gZnVuY3Rpb24gcmVkaXJlY3QocGF0aCkge1xuXHQgICAgICBpZiAoIXRoaXMuYWJvcnRlZCkge1xuXHQgICAgICAgIHRoaXMuYWJvcnRlZCA9IHRydWU7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgcGF0aCA9IG1hcFBhcmFtcyhwYXRoLCB0aGlzLnRvLnBhcmFtcywgdGhpcy50by5xdWVyeSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHBhdGgucGFyYW1zID0gcGF0aC5wYXJhbXMgfHwgdGhpcy50by5wYXJhbXM7XG5cdCAgICAgICAgICBwYXRoLnF1ZXJ5ID0gcGF0aC5xdWVyeSB8fCB0aGlzLnRvLnF1ZXJ5O1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnJvdXRlci5yZXBsYWNlKHBhdGgpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQSByb3V0ZXIgdmlldyB0cmFuc2l0aW9uJ3MgcGlwZWxpbmUgY2FuIGJlIGRlc2NyaWJlZCBhc1xuXHQgICAgICogZm9sbG93cywgYXNzdW1pbmcgd2UgYXJlIHRyYW5zaXRpb25pbmcgZnJvbSBhbiBleGlzdGluZ1xuXHQgICAgICogPHJvdXRlci12aWV3PiBjaGFpbiBbQ29tcG9uZW50IEEsIENvbXBvbmVudCBCXSB0byBhIG5ld1xuXHQgICAgICogY2hhaW4gW0NvbXBvbmVudCBBLCBDb21wb25lbnQgQ106XG5cdCAgICAgKlxuXHQgICAgICogIEEgICAgQVxuXHQgICAgICogIHwgPT4gfFxuXHQgICAgICogIEIgICAgQ1xuXHQgICAgICpcblx0ICAgICAqIDEuIFJldXNhYmxpdHkgcGhhc2U6XG5cdCAgICAgKiAgIC0+IGNhblJldXNlKEEsIEEpXG5cdCAgICAgKiAgIC0+IGNhblJldXNlKEIsIEMpXG5cdCAgICAgKiAgIC0+IGRldGVybWluZSBuZXcgcXVldWVzOlxuXHQgICAgICogICAgICAtIGRlYWN0aXZhdGlvbjogW0JdXG5cdCAgICAgKiAgICAgIC0gYWN0aXZhdGlvbjogW0NdXG5cdCAgICAgKlxuXHQgICAgICogMi4gVmFsaWRhdGlvbiBwaGFzZTpcblx0ICAgICAqICAgLT4gY2FuRGVhY3RpdmF0ZShCKVxuXHQgICAgICogICAtPiBjYW5BY3RpdmF0ZShDKVxuXHQgICAgICpcblx0ICAgICAqIDMuIEFjdGl2YXRpb24gcGhhc2U6XG5cdCAgICAgKiAgIC0+IGRlYWN0aXZhdGUoQilcblx0ICAgICAqICAgLT4gYWN0aXZhdGUoQylcblx0ICAgICAqXG5cdCAgICAgKiBFYWNoIG9mIHRoZXNlIHN0ZXBzIGNhbiBiZSBhc3luY2hyb25vdXMsIGFuZCBhbnlcblx0ICAgICAqIHN0ZXAgY2FuIHBvdGVudGlhbGx5IGFib3J0IHRoZSB0cmFuc2l0aW9uLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoY2IpIHtcblx0ICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzO1xuXHRcblx0ICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBxdWV1ZSBvZiB2aWV3cyB0byBkZWFjdGl2YXRlXG5cdCAgICAgIHZhciBkZWFjdGl2YXRlUXVldWUgPSBbXTtcblx0ICAgICAgdmFyIHZpZXcgPSB0aGlzLnJvdXRlci5fcm9vdFZpZXc7XG5cdCAgICAgIHdoaWxlICh2aWV3KSB7XG5cdCAgICAgICAgZGVhY3RpdmF0ZVF1ZXVlLnVuc2hpZnQodmlldyk7XG5cdCAgICAgICAgdmlldyA9IHZpZXcuY2hpbGRWaWV3O1xuXHQgICAgICB9XG5cdCAgICAgIHZhciByZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlID0gZGVhY3RpdmF0ZVF1ZXVlLnNsaWNlKCkucmV2ZXJzZSgpO1xuXHRcblx0ICAgICAgLy8gZGV0ZXJtaW5lIHRoZSBxdWV1ZSBvZiByb3V0ZSBoYW5kbGVycyB0byBhY3RpdmF0ZVxuXHQgICAgICB2YXIgYWN0aXZhdGVRdWV1ZSA9IHRoaXMuYWN0aXZhdGVRdWV1ZSA9IHRvQXJyYXkodGhpcy50by5tYXRjaGVkKS5tYXAoZnVuY3Rpb24gKG1hdGNoKSB7XG5cdCAgICAgICAgcmV0dXJuIG1hdGNoLmhhbmRsZXI7XG5cdCAgICAgIH0pO1xuXHRcblx0ICAgICAgLy8gMS4gUmV1c2FiaWxpdHkgcGhhc2Vcblx0ICAgICAgdmFyIGkgPSB1bmRlZmluZWQsXG5cdCAgICAgICAgICByZXVzZVF1ZXVlID0gdW5kZWZpbmVkO1xuXHQgICAgICBmb3IgKGkgPSAwOyBpIDwgcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGlmICghY2FuUmV1c2UocmV2ZXJzZURlYWN0aXZhdGVRdWV1ZVtpXSwgYWN0aXZhdGVRdWV1ZVtpXSwgdHJhbnNpdGlvbikpIHtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBpZiAoaSA+IDApIHtcblx0ICAgICAgICByZXVzZVF1ZXVlID0gcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5zbGljZSgwLCBpKTtcblx0ICAgICAgICBkZWFjdGl2YXRlUXVldWUgPSByZXZlcnNlRGVhY3RpdmF0ZVF1ZXVlLnNsaWNlKGkpLnJldmVyc2UoKTtcblx0ICAgICAgICBhY3RpdmF0ZVF1ZXVlID0gYWN0aXZhdGVRdWV1ZS5zbGljZShpKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gMi4gVmFsaWRhdGlvbiBwaGFzZVxuXHQgICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGRlYWN0aXZhdGVRdWV1ZSwgY2FuRGVhY3RpdmF0ZSwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoYWN0aXZhdGVRdWV1ZSwgY2FuQWN0aXZhdGUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHRyYW5zaXRpb24ucnVuUXVldWUoZGVhY3RpdmF0ZVF1ZXVlLCBkZWFjdGl2YXRlLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIC8vIDMuIEFjdGl2YXRpb24gcGhhc2Vcblx0XG5cdCAgICAgICAgICAgIC8vIFVwZGF0ZSByb3V0ZXIgY3VycmVudCByb3V0ZVxuXHQgICAgICAgICAgICB0cmFuc2l0aW9uLnJvdXRlci5fb25UcmFuc2l0aW9uVmFsaWRhdGVkKHRyYW5zaXRpb24pO1xuXHRcblx0ICAgICAgICAgICAgLy8gdHJpZ2dlciByZXVzZSBmb3IgYWxsIHJldXNlZCB2aWV3c1xuXHQgICAgICAgICAgICByZXVzZVF1ZXVlICYmIHJldXNlUXVldWUuZm9yRWFjaChmdW5jdGlvbiAodmlldykge1xuXHQgICAgICAgICAgICAgIHJldHVybiByZXVzZSh2aWV3LCB0cmFuc2l0aW9uKTtcblx0ICAgICAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgICAgICAvLyB0aGUgcm9vdCBvZiB0aGUgY2hhaW4gdGhhdCBuZWVkcyB0byBiZSByZXBsYWNlZFxuXHQgICAgICAgICAgICAvLyBpcyB0aGUgdG9wLW1vc3Qgbm9uLXJldXNhYmxlIHZpZXcuXG5cdCAgICAgICAgICAgIGlmIChkZWFjdGl2YXRlUXVldWUubGVuZ3RoKSB7XG5cdCAgICAgICAgICAgICAgdmFyIF92aWV3ID0gZGVhY3RpdmF0ZVF1ZXVlW2RlYWN0aXZhdGVRdWV1ZS5sZW5ndGggLSAxXTtcblx0ICAgICAgICAgICAgICB2YXIgZGVwdGggPSByZXVzZVF1ZXVlID8gcmV1c2VRdWV1ZS5sZW5ndGggOiAwO1xuXHQgICAgICAgICAgICAgIGFjdGl2YXRlKF92aWV3LCB0cmFuc2l0aW9uLCBkZXB0aCwgY2IpO1xuXHQgICAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICAgIGNiKCk7XG5cdCAgICAgICAgICAgIH1cblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBc3luY2hyb25vdXNseSBhbmQgc2VxdWVudGlhbGx5IGFwcGx5IGEgZnVuY3Rpb24gdG8gYVxuXHQgICAgICogcXVldWUuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtBcnJheX0gcXVldWVcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5ydW5RdWV1ZSA9IGZ1bmN0aW9uIHJ1blF1ZXVlKHF1ZXVlLCBmbiwgY2IpIHtcblx0ICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzO1xuXHQgICAgICBzdGVwKDApO1xuXHQgICAgICBmdW5jdGlvbiBzdGVwKGluZGV4KSB7XG5cdCAgICAgICAgaWYgKGluZGV4ID49IHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICAgICAgY2IoKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgZm4ocXVldWVbaW5kZXhdLCB0cmFuc2l0aW9uLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHN0ZXAoaW5kZXggKyAxKTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIENhbGwgYSB1c2VyIHByb3ZpZGVkIHJvdXRlIHRyYW5zaXRpb24gaG9vayBhbmQgaGFuZGxlXG5cdCAgICAgKiB0aGUgcmVzcG9uc2UgKGUuZy4gaWYgdGhlIHVzZXIgcmV0dXJucyBhIHByb21pc2UpLlxuXHQgICAgICpcblx0ICAgICAqIElmIHRoZSB1c2VyIG5laXRoZXIgZXhwZWN0cyBhbiBhcmd1bWVudCBub3IgcmV0dXJucyBhXG5cdCAgICAgKiBwcm9taXNlLCB0aGUgaG9vayBpcyBhc3N1bWVkIHRvIGJlIHN5bmNocm9ub3VzLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcblx0ICAgICAqIEBwYXJhbSB7Kn0gW2NvbnRleHRdXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZXhwZWN0Qm9vbGVhblxuXHQgICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHBvc3RBY3RpdmVcblx0ICAgICAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gcHJvY2Vzc0RhdGFcblx0ICAgICAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gY2xlYW51cFxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5jYWxsSG9vayA9IGZ1bmN0aW9uIGNhbGxIb29rKGhvb2ssIGNvbnRleHQsIGNiKSB7XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA8PSAzIHx8IGFyZ3VtZW50c1szXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbM107XG5cdFxuXHQgICAgICB2YXIgX3JlZiRleHBlY3RCb29sZWFuID0gX3JlZi5leHBlY3RCb29sZWFuO1xuXHQgICAgICB2YXIgZXhwZWN0Qm9vbGVhbiA9IF9yZWYkZXhwZWN0Qm9vbGVhbiA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGV4cGVjdEJvb2xlYW47XG5cdCAgICAgIHZhciBfcmVmJHBvc3RBY3RpdmF0ZSA9IF9yZWYucG9zdEFjdGl2YXRlO1xuXHQgICAgICB2YXIgcG9zdEFjdGl2YXRlID0gX3JlZiRwb3N0QWN0aXZhdGUgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRwb3N0QWN0aXZhdGU7XG5cdCAgICAgIHZhciBwcm9jZXNzRGF0YSA9IF9yZWYucHJvY2Vzc0RhdGE7XG5cdCAgICAgIHZhciBjbGVhbnVwID0gX3JlZi5jbGVhbnVwO1xuXHRcblx0ICAgICAgdmFyIHRyYW5zaXRpb24gPSB0aGlzO1xuXHQgICAgICB2YXIgbmV4dENhbGxlZCA9IGZhbHNlO1xuXHRcblx0ICAgICAgLy8gYWJvcnQgdGhlIHRyYW5zaXRpb25cblx0ICAgICAgdmFyIGFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XG5cdCAgICAgICAgY2xlYW51cCAmJiBjbGVhbnVwKCk7XG5cdCAgICAgICAgdHJhbnNpdGlvbi5hYm9ydCgpO1xuXHQgICAgICB9O1xuXHRcblx0ICAgICAgLy8gaGFuZGxlIGVycm9yc1xuXHQgICAgICB2YXIgb25FcnJvciA9IGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7XG5cdCAgICAgICAgcG9zdEFjdGl2YXRlID8gbmV4dCgpIDogYWJvcnQoKTtcblx0ICAgICAgICBpZiAoZXJyICYmICF0cmFuc2l0aW9uLnJvdXRlci5fc3VwcHJlc3MpIHtcblx0ICAgICAgICAgIHdhcm4kMSgnVW5jYXVnaHQgZXJyb3IgZHVyaW5nIHRyYW5zaXRpb246ICcpO1xuXHQgICAgICAgICAgdGhyb3cgZXJyIGluc3RhbmNlb2YgRXJyb3IgPyBlcnIgOiBuZXcgRXJyb3IoZXJyKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICAvLyBzaW5jZSBwcm9taXNlIHN3YWxsb3dzIGVycm9ycywgd2UgaGF2ZSB0b1xuXHQgICAgICAvLyB0aHJvdyBpdCBpbiB0aGUgbmV4dCB0aWNrLi4uXG5cdCAgICAgIHZhciBvblByb21pc2VFcnJvciA9IGZ1bmN0aW9uIG9uUHJvbWlzZUVycm9yKGVycikge1xuXHQgICAgICAgIHRyeSB7XG5cdCAgICAgICAgICBvbkVycm9yKGVycik7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgIHRocm93IGU7XG5cdCAgICAgICAgICB9LCAwKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICAvLyBhZHZhbmNlIHRoZSB0cmFuc2l0aW9uIHRvIHRoZSBuZXh0IHN0ZXBcblx0ICAgICAgdmFyIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuXHQgICAgICAgIGlmIChuZXh0Q2FsbGVkKSB7XG5cdCAgICAgICAgICB3YXJuJDEoJ3RyYW5zaXRpb24ubmV4dCgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLicpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBuZXh0Q2FsbGVkID0gdHJ1ZTtcblx0ICAgICAgICBpZiAodHJhbnNpdGlvbi5hYm9ydGVkKSB7XG5cdCAgICAgICAgICBjbGVhbnVwICYmIGNsZWFudXAoKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgY2IgJiYgY2IoKTtcblx0ICAgICAgfTtcblx0XG5cdCAgICAgIHZhciBuZXh0V2l0aEJvb2xlYW4gPSBmdW5jdGlvbiBuZXh0V2l0aEJvb2xlYW4ocmVzKSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiByZXMgPT09ICdib29sZWFuJykge1xuXHQgICAgICAgICAgcmVzID8gbmV4dCgpIDogYWJvcnQoKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZShyZXMpKSB7XG5cdCAgICAgICAgICByZXMudGhlbihmdW5jdGlvbiAob2spIHtcblx0ICAgICAgICAgICAgb2sgPyBuZXh0KCkgOiBhYm9ydCgpO1xuXHQgICAgICAgICAgfSwgb25Qcm9taXNlRXJyb3IpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAoIWhvb2subGVuZ3RoKSB7XG5cdCAgICAgICAgICBuZXh0KCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9O1xuXHRcblx0ICAgICAgdmFyIG5leHRXaXRoRGF0YSA9IGZ1bmN0aW9uIG5leHRXaXRoRGF0YShkYXRhKSB7XG5cdCAgICAgICAgdmFyIHJlcyA9IHVuZGVmaW5lZDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgcmVzID0gcHJvY2Vzc0RhdGEoZGF0YSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG5cdCAgICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAoaXNQcm9taXNlKHJlcykpIHtcblx0ICAgICAgICAgIHJlcy50aGVuKG5leHQsIG9uUHJvbWlzZUVycm9yKTtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgbmV4dCgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIC8vIGV4cG9zZSBhIGNsb25lIG9mIHRoZSB0cmFuc2l0aW9uIG9iamVjdCwgc28gdGhhdCBlYWNoXG5cdCAgICAgIC8vIGhvb2sgZ2V0cyBhIGNsZWFuIGNvcHkgYW5kIHByZXZlbnQgdGhlIHVzZXIgZnJvbVxuXHQgICAgICAvLyBtZXNzaW5nIHdpdGggdGhlIGludGVybmFscy5cblx0ICAgICAgdmFyIGV4cG9zZWQgPSB7XG5cdCAgICAgICAgdG86IHRyYW5zaXRpb24udG8sXG5cdCAgICAgICAgZnJvbTogdHJhbnNpdGlvbi5mcm9tLFxuXHQgICAgICAgIGFib3J0OiBhYm9ydCxcblx0ICAgICAgICBuZXh0OiBwcm9jZXNzRGF0YSA/IG5leHRXaXRoRGF0YSA6IG5leHQsXG5cdCAgICAgICAgcmVkaXJlY3Q6IGZ1bmN0aW9uIHJlZGlyZWN0KCkge1xuXHQgICAgICAgICAgdHJhbnNpdGlvbi5yZWRpcmVjdC5hcHBseSh0cmFuc2l0aW9uLCBhcmd1bWVudHMpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0XG5cdCAgICAgIC8vIGFjdHVhbGx5IGNhbGwgdGhlIGhvb2tcblx0ICAgICAgdmFyIHJlcyA9IHVuZGVmaW5lZDtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXMgPSBob29rLmNhbGwoY29udGV4dCwgZXhwb3NlZCk7XG5cdCAgICAgIH0gY2F0Y2ggKGVycikge1xuXHQgICAgICAgIHJldHVybiBvbkVycm9yKGVycik7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIGlmIChleHBlY3RCb29sZWFuKSB7XG5cdCAgICAgICAgLy8gYm9vbGVhbiBob29rc1xuXHQgICAgICAgIG5leHRXaXRoQm9vbGVhbihyZXMpO1xuXHQgICAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZShyZXMpKSB7XG5cdCAgICAgICAgLy8gcHJvbWlzZVxuXHQgICAgICAgIGlmIChwcm9jZXNzRGF0YSkge1xuXHQgICAgICAgICAgcmVzLnRoZW4obmV4dFdpdGhEYXRhLCBvblByb21pc2VFcnJvcik7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHJlcy50aGVuKG5leHQsIG9uUHJvbWlzZUVycm9yKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzc0RhdGEgJiYgaXNQbGFpbk9qYmVjdChyZXMpKSB7XG5cdCAgICAgICAgLy8gZGF0YSBwcm9taXNlIHN1Z2FyXG5cdCAgICAgICAgbmV4dFdpdGhEYXRhKHJlcyk7XG5cdCAgICAgIH0gZWxzZSBpZiAoIWhvb2subGVuZ3RoKSB7XG5cdCAgICAgICAgbmV4dCgpO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQ2FsbCBhIHNpbmdsZSBob29rIG9yIGFuIGFycmF5IG9mIGFzeW5jIGhvb2tzIGluIHNlcmllcy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge0FycmF5fSBob29rc1xuXHQgICAgICogQHBhcmFtIHsqfSBjb250ZXh0XG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5jYWxsSG9va3MgPSBmdW5jdGlvbiBjYWxsSG9va3MoaG9va3MsIGNvbnRleHQsIGNiLCBvcHRpb25zKSB7XG5cdCAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAoQXJyYXkuaXNBcnJheShob29rcykpIHtcblx0ICAgICAgICB0aGlzLnJ1blF1ZXVlKGhvb2tzLCBmdW5jdGlvbiAoaG9vaywgXywgbmV4dCkge1xuXHQgICAgICAgICAgaWYgKCFfdGhpcy5hYm9ydGVkKSB7XG5cdCAgICAgICAgICAgIF90aGlzLmNhbGxIb29rKGhvb2ssIGNvbnRleHQsIG5leHQsIG9wdGlvbnMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0sIGNiKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmNhbGxIb29rKGhvb2tzLCBjb250ZXh0LCBjYiwgb3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFJvdXRlVHJhbnNpdGlvbjtcblx0ICB9KSgpO1xuXHRcblx0ICBmdW5jdGlvbiBpc1BsYWluT2piZWN0KHZhbCkge1xuXHQgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBPYmplY3RdJztcblx0ICB9XG5cdFxuXHQgIGZ1bmN0aW9uIHRvQXJyYXkodmFsKSB7XG5cdCAgICByZXR1cm4gdmFsID8gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodmFsKSA6IFtdO1xuXHQgIH1cblx0XG5cdCAgdmFyIGludGVybmFsS2V5c1JFID0gL14oY29tcG9uZW50fHN1YlJvdXRlc3xmdWxsUGF0aCkkLztcblx0XG5cdCAgLyoqXG5cdCAgICogUm91dGUgQ29udGV4dCBPYmplY3Rcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICogQHBhcmFtIHtSb3V0ZXJ9IHJvdXRlclxuXHQgICAqL1xuXHRcblx0ICB2YXIgUm91dGUgPSBmdW5jdGlvbiBSb3V0ZShwYXRoLCByb3V0ZXIpIHtcblx0ICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgICAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrKHRoaXMsIFJvdXRlKTtcblx0XG5cdCAgICB2YXIgbWF0Y2hlZCA9IHJvdXRlci5fcmVjb2duaXplci5yZWNvZ25pemUocGF0aCk7XG5cdCAgICBpZiAobWF0Y2hlZCkge1xuXHQgICAgICAvLyBjb3B5IGFsbCBjdXN0b20gZmllbGRzIGZyb20gcm91dGUgY29uZmlnc1xuXHQgICAgICBbXS5mb3JFYWNoLmNhbGwobWF0Y2hlZCwgZnVuY3Rpb24gKG1hdGNoKSB7XG5cdCAgICAgICAgZm9yICh2YXIga2V5IGluIG1hdGNoLmhhbmRsZXIpIHtcblx0ICAgICAgICAgIGlmICghaW50ZXJuYWxLZXlzUkUudGVzdChrZXkpKSB7XG5cdCAgICAgICAgICAgIF90aGlzW2tleV0gPSBtYXRjaC5oYW5kbGVyW2tleV07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgICAgLy8gc2V0IHF1ZXJ5IGFuZCBwYXJhbXNcblx0ICAgICAgdGhpcy5xdWVyeSA9IG1hdGNoZWQucXVlcnlQYXJhbXM7XG5cdCAgICAgIHRoaXMucGFyYW1zID0gW10ucmVkdWNlLmNhbGwobWF0Y2hlZCwgZnVuY3Rpb24gKHByZXYsIGN1cikge1xuXHQgICAgICAgIGlmIChjdXIucGFyYW1zKSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gY3VyLnBhcmFtcykge1xuXHQgICAgICAgICAgICBwcmV2W2tleV0gPSBjdXIucGFyYW1zW2tleV07XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHJldHVybiBwcmV2O1xuXHQgICAgICB9LCB7fSk7XG5cdCAgICB9XG5cdCAgICAvLyBleHBvc2UgcGF0aCBhbmQgcm91dGVyXG5cdCAgICB0aGlzLnBhdGggPSBwYXRoO1xuXHQgICAgLy8gZm9yIGludGVybmFsIHVzZVxuXHQgICAgdGhpcy5tYXRjaGVkID0gbWF0Y2hlZCB8fCByb3V0ZXIuX25vdEZvdW5kSGFuZGxlcjtcblx0ICAgIC8vIGludGVybmFsIHJlZmVyZW5jZSB0byByb3V0ZXJcblx0ICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAncm91dGVyJywge1xuXHQgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcblx0ICAgICAgdmFsdWU6IHJvdXRlclxuXHQgICAgfSk7XG5cdCAgICAvLyBJbXBvcnRhbnQ6IGZyZWV6ZSBzZWxmIHRvIHByZXZlbnQgb2JzZXJ2YXRpb25cblx0ICAgIE9iamVjdC5mcmVlemUodGhpcyk7XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gYXBwbHlPdmVycmlkZSAoVnVlKSB7XG5cdCAgICB2YXIgX1Z1ZSR1dGlsID0gVnVlLnV0aWw7XG5cdCAgICB2YXIgZXh0ZW5kID0gX1Z1ZSR1dGlsLmV4dGVuZDtcblx0ICAgIHZhciBpc0FycmF5ID0gX1Z1ZSR1dGlsLmlzQXJyYXk7XG5cdCAgICB2YXIgZGVmaW5lUmVhY3RpdmUgPSBfVnVlJHV0aWwuZGVmaW5lUmVhY3RpdmU7XG5cdFxuXHQgICAgLy8gb3ZlcnJpZGUgVnVlJ3MgaW5pdCBhbmQgZGVzdHJveSBwcm9jZXNzIHRvIGtlZXAgdHJhY2sgb2Ygcm91dGVyIGluc3RhbmNlc1xuXHQgICAgdmFyIGluaXQgPSBWdWUucHJvdG90eXBlLl9pbml0O1xuXHQgICAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQgICAgICB2YXIgcm9vdCA9IG9wdGlvbnMuX3BhcmVudCB8fCBvcHRpb25zLnBhcmVudCB8fCB0aGlzO1xuXHQgICAgICB2YXIgcm91dGVyID0gcm9vdC4kcm91dGVyO1xuXHQgICAgICB2YXIgcm91dGUgPSByb290LiRyb3V0ZTtcblx0ICAgICAgaWYgKHJvdXRlcikge1xuXHQgICAgICAgIC8vIGV4cG9zZSByb3V0ZXJcblx0ICAgICAgICB0aGlzLiRyb3V0ZXIgPSByb3V0ZXI7XG5cdCAgICAgICAgcm91dGVyLl9jaGlsZHJlbi5wdXNoKHRoaXMpO1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmICh0aGlzLl9kZWZpbmVNZXRhKSB7XG5cdCAgICAgICAgICAvLyAwLjEyXG5cdCAgICAgICAgICB0aGlzLl9kZWZpbmVNZXRhKCckcm91dGUnLCByb3V0ZSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIC8vIDEuMFxuXHQgICAgICAgICAgZGVmaW5lUmVhY3RpdmUodGhpcywgJyRyb3V0ZScsIHJvdXRlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgICAgaW5pdC5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuXHQgICAgfTtcblx0XG5cdCAgICB2YXIgZGVzdHJveSA9IFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3k7XG5cdCAgICBWdWUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAoIXRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgJiYgdGhpcy4kcm91dGVyKSB7XG5cdCAgICAgICAgdGhpcy4kcm91dGVyLl9jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICAgIGRlc3Ryb3kuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLy8gMS4wIG9ubHk6IGVuYWJsZSByb3V0ZSBtaXhpbnNcblx0ICAgIHZhciBzdHJhdHMgPSBWdWUuY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztcblx0ICAgIHZhciBob29rc1RvTWVyZ2VSRSA9IC9eKGRhdGF8YWN0aXZhdGV8ZGVhY3RpdmF0ZSkkLztcblx0XG5cdCAgICBpZiAoc3RyYXRzKSB7XG5cdCAgICAgIHN0cmF0cy5yb3V0ZSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG5cdCAgICAgICAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcblx0ICAgICAgICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuXHQgICAgICAgIHZhciByZXQgPSB7fTtcblx0ICAgICAgICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuXHQgICAgICAgIGZvciAodmFyIGtleSBpbiBjaGlsZFZhbCkge1xuXHQgICAgICAgICAgdmFyIGEgPSByZXRba2V5XTtcblx0ICAgICAgICAgIHZhciBiID0gY2hpbGRWYWxba2V5XTtcblx0ICAgICAgICAgIC8vIGZvciBkYXRhLCBhY3RpdmF0ZSBhbmQgZGVhY3RpdmF0ZSwgd2UgbmVlZCB0byBtZXJnZSB0aGVtIGludG9cblx0ICAgICAgICAgIC8vIGFycmF5cyBzaW1pbGFyIHRvIGxpZmVjeWNsZSBob29rcy5cblx0ICAgICAgICAgIGlmIChhICYmIGhvb2tzVG9NZXJnZVJFLnRlc3Qoa2V5KSkge1xuXHQgICAgICAgICAgICByZXRba2V5XSA9IChpc0FycmF5KGEpID8gYSA6IFthXSkuY29uY2F0KGIpO1xuXHQgICAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgICAgcmV0W2tleV0gPSBiO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgICByZXR1cm4gcmV0O1xuXHQgICAgICB9O1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgZnVuY3Rpb24gVmlldyAoVnVlKSB7XG5cdFxuXHQgICAgdmFyIF8gPSBWdWUudXRpbDtcblx0ICAgIHZhciBjb21wb25lbnREZWYgPVxuXHQgICAgLy8gMC4xMlxuXHQgICAgVnVlLmRpcmVjdGl2ZSgnX2NvbXBvbmVudCcpIHx8XG5cdCAgICAvLyAxLjBcblx0ICAgIFZ1ZS5pbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50O1xuXHQgICAgLy8gPHJvdXRlci12aWV3PiBleHRlbmRzIHRoZSBpbnRlcm5hbCBjb21wb25lbnQgZGlyZWN0aXZlXG5cdCAgICB2YXIgdmlld0RlZiA9IF8uZXh0ZW5kKHt9LCBjb21wb25lbnREZWYpO1xuXHRcblx0ICAgIC8vIHdpdGggc29tZSBvdmVycmlkZXNcblx0ICAgIF8uZXh0ZW5kKHZpZXdEZWYsIHtcblx0XG5cdCAgICAgIF9pc1JvdXRlclZpZXc6IHRydWUsXG5cdFxuXHQgICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgICAgIHZhciByb3V0ZSA9IHRoaXMudm0uJHJvdXRlO1xuXHQgICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICAgIGlmICghcm91dGUpIHtcblx0ICAgICAgICAgIHdhcm4kMSgnPHJvdXRlci12aWV3PiBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBhICcgKyAncm91dGVyLWVuYWJsZWQgYXBwLicpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyBmb3JjZSBkeW5hbWljIGRpcmVjdGl2ZSBzbyB2LWNvbXBvbmVudCBkb2Vzbid0XG5cdCAgICAgICAgLy8gYXR0ZW1wdCB0byBidWlsZCByaWdodCBub3dcblx0ICAgICAgICB0aGlzLl9pc0R5bmFtaWNMaXRlcmFsID0gdHJ1ZTtcblx0ICAgICAgICAvLyBmaW5hbGx5LCBpbml0IGJ5IGRlbGVnYXRpbmcgdG8gdi1jb21wb25lbnRcblx0ICAgICAgICBjb21wb25lbnREZWYuYmluZC5jYWxsKHRoaXMpO1xuXHRcblx0ICAgICAgICAvLyBsb2NhdGUgdGhlIHBhcmVudCB2aWV3XG5cdCAgICAgICAgdmFyIHBhcmVudFZpZXcgPSB1bmRlZmluZWQ7XG5cdCAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMudm07XG5cdCAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuXHQgICAgICAgICAgaWYgKHBhcmVudC5fcm91dGVyVmlldykge1xuXHQgICAgICAgICAgICBwYXJlbnRWaWV3ID0gcGFyZW50Ll9yb3V0ZXJWaWV3O1xuXHQgICAgICAgICAgICBicmVhaztcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIHBhcmVudCA9IHBhcmVudC4kcGFyZW50O1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAocGFyZW50Vmlldykge1xuXHQgICAgICAgICAgLy8gcmVnaXN0ZXIgc2VsZiBhcyBhIGNoaWxkIG9mIHRoZSBwYXJlbnQgdmlldyxcblx0ICAgICAgICAgIC8vIGluc3RlYWQgb2YgYWN0aXZhdGluZyBub3cuIFRoaXMgaXMgc28gdGhhdCB0aGVcblx0ICAgICAgICAgIC8vIGNoaWxkJ3MgYWN0aXZhdGUgaG9vayBpcyBjYWxsZWQgYWZ0ZXIgdGhlXG5cdCAgICAgICAgICAvLyBwYXJlbnQncyBoYXMgcmVzb2x2ZWQuXG5cdCAgICAgICAgICB0aGlzLnBhcmVudFZpZXcgPSBwYXJlbnRWaWV3O1xuXHQgICAgICAgICAgcGFyZW50Vmlldy5jaGlsZFZpZXcgPSB0aGlzO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyB0aGlzIGlzIHRoZSByb290IHZpZXchXG5cdCAgICAgICAgICB2YXIgcm91dGVyID0gcm91dGUucm91dGVyO1xuXHQgICAgICAgICAgcm91dGVyLl9yb290VmlldyA9IHRoaXM7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyBoYW5kbGUgbGF0ZS1yZW5kZXJlZCB2aWV3XG5cdCAgICAgICAgLy8gdHdvIHBvc3NpYmlsaXRpZXM6XG5cdCAgICAgICAgLy8gMS4gcm9vdCB2aWV3IHJlbmRlcmVkIGFmdGVyIHRyYW5zaXRpb24gaGFzIGJlZW5cblx0ICAgICAgICAvLyAgICB2YWxpZGF0ZWQ7XG5cdCAgICAgICAgLy8gMi4gY2hpbGQgdmlldyByZW5kZXJlZCBhZnRlciBwYXJlbnQgdmlldyBoYXMgYmVlblxuXHQgICAgICAgIC8vICAgIGFjdGl2YXRlZC5cblx0ICAgICAgICB2YXIgdHJhbnNpdGlvbiA9IHJvdXRlLnJvdXRlci5fY3VycmVudFRyYW5zaXRpb247XG5cdCAgICAgICAgaWYgKCFwYXJlbnRWaWV3ICYmIHRyYW5zaXRpb24uZG9uZSB8fCBwYXJlbnRWaWV3ICYmIHBhcmVudFZpZXcuYWN0aXZhdGVkKSB7XG5cdCAgICAgICAgICB2YXIgZGVwdGggPSBwYXJlbnRWaWV3ID8gcGFyZW50Vmlldy5kZXB0aCArIDEgOiAwO1xuXHQgICAgICAgICAgYWN0aXZhdGUodGhpcywgdHJhbnNpdGlvbiwgZGVwdGgpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgICAgIGlmICh0aGlzLnBhcmVudFZpZXcpIHtcblx0ICAgICAgICAgIHRoaXMucGFyZW50Vmlldy5jaGlsZFZpZXcgPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBjb21wb25lbnREZWYudW5iaW5kLmNhbGwodGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH0pO1xuXHRcblx0ICAgIFZ1ZS5lbGVtZW50RGlyZWN0aXZlKCdyb3V0ZXItdmlldycsIHZpZXdEZWYpO1xuXHQgIH1cblx0XG5cdCAgdmFyIHRyYWlsaW5nU2xhc2hSRSA9IC9cXC8kLztcblx0ICB2YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2c7XG5cdCAgdmFyIHF1ZXJ5U3RyaW5nUkUgPSAvXFw/LiokLztcblx0XG5cdCAgLy8gaW5zdGFsbCB2LWxpbmssIHdoaWNoIHByb3ZpZGVzIG5hdmlnYXRpb24gc3VwcG9ydCBmb3Jcblx0ICAvLyBIVE1MNSBoaXN0b3J5IG1vZGVcblx0ICBmdW5jdGlvbiBMaW5rIChWdWUpIHtcblx0ICAgIHZhciBfVnVlJHV0aWwgPSBWdWUudXRpbDtcblx0ICAgIHZhciBfYmluZCA9IF9WdWUkdXRpbC5iaW5kO1xuXHQgICAgdmFyIGlzT2JqZWN0ID0gX1Z1ZSR1dGlsLmlzT2JqZWN0O1xuXHQgICAgdmFyIGFkZENsYXNzID0gX1Z1ZSR1dGlsLmFkZENsYXNzO1xuXHQgICAgdmFyIHJlbW92ZUNsYXNzID0gX1Z1ZSR1dGlsLnJlbW92ZUNsYXNzO1xuXHRcblx0ICAgIHZhciBvblByaW9yaXR5ID0gVnVlLmRpcmVjdGl2ZSgnb24nKS5wcmlvcml0eTtcblx0ICAgIHZhciBMSU5LX1VQREFURSA9ICdfX3Z1ZS1yb3V0ZXItbGluay11cGRhdGVfXyc7XG5cdFxuXHQgICAgdmFyIGFjdGl2ZUlkID0gMDtcblx0XG5cdCAgICBWdWUuZGlyZWN0aXZlKCdsaW5rLWFjdGl2ZScsIHtcblx0ICAgICAgcHJpb3JpdHk6IDk5OTksXG5cdCAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgICAgdmFyIGlkID0gU3RyaW5nKGFjdGl2ZUlkKyspO1xuXHQgICAgICAgIC8vIGNvbGxlY3Qgdi1saW5rcyBjb250YWluZWQgd2l0aGluIHRoaXMgZWxlbWVudC5cblx0ICAgICAgICAvLyB3ZSBuZWVkIGRvIHRoaXMgaGVyZSBiZWZvcmUgdGhlIHBhcmVudC1jaGlsZCByZWxhdGlvbnNoaXBcblx0ICAgICAgICAvLyBnZXRzIG1lc3NlZCB1cCBieSB0ZXJtaW5hbCBkaXJlY3RpdmVzIChpZiwgZm9yLCBjb21wb25lbnRzKVxuXHQgICAgICAgIHZhciBjaGlsZExpbmtzID0gdGhpcy5lbC5xdWVyeVNlbGVjdG9yQWxsKCdbdi1saW5rXScpO1xuXHQgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRMaW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICAgIHZhciBsaW5rID0gY2hpbGRMaW5rc1tpXTtcblx0ICAgICAgICAgIHZhciBleGlzdGluZ0lkID0gbGluay5nZXRBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuXHQgICAgICAgICAgdmFyIHZhbHVlID0gZXhpc3RpbmdJZCA/IGV4aXN0aW5nSWQgKyAnLCcgKyBpZCA6IGlkO1xuXHQgICAgICAgICAgLy8gbGVhdmUgYSBtYXJrIG9uIHRoZSBsaW5rIGVsZW1lbnQgd2hpY2ggY2FuIGJlIHBlcnNpc3RlZFxuXHQgICAgICAgICAgLy8gdGhyb3VnaCBmcmFnbWVudCBjbG9uZXMuXG5cdCAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShMSU5LX1VQREFURSwgdmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnZtLiRvbihMSU5LX1VQREFURSwgdGhpcy5jYiA9IGZ1bmN0aW9uIChsaW5rLCBwYXRoKSB7XG5cdCAgICAgICAgICBpZiAobGluay5hY3RpdmVJZHMuaW5kZXhPZihpZCkgPiAtMSkge1xuXHQgICAgICAgICAgICBsaW5rLnVwZGF0ZUNsYXNzZXMocGF0aCwgX3RoaXMuZWwpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9LFxuXHQgICAgICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgICAgICB0aGlzLnZtLiRvZmYoTElOS19VUERBVEUsIHRoaXMuY2IpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBWdWUuZGlyZWN0aXZlKCdsaW5rJywge1xuXHQgICAgICBwcmlvcml0eTogb25Qcmlvcml0eSAtIDIsXG5cdFxuXHQgICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgICAgIHZhciB2bSA9IHRoaXMudm07XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKCF2bS4kcm91dGUpIHtcblx0ICAgICAgICAgIHdhcm4kMSgndi1saW5rIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIGEgcm91dGVyLWVuYWJsZWQgYXBwLicpO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLnJvdXRlciA9IHZtLiRyb3V0ZS5yb3V0ZXI7XG5cdCAgICAgICAgLy8gdXBkYXRlIHRoaW5ncyB3aGVuIHRoZSByb3V0ZSBjaGFuZ2VzXG5cdCAgICAgICAgdGhpcy51bndhdGNoID0gdm0uJHdhdGNoKCckcm91dGUnLCBfYmluZCh0aGlzLm9uUm91dGVVcGRhdGUsIHRoaXMpKTtcblx0ICAgICAgICAvLyBjaGVjayB2LWxpbmstYWN0aXZlIGlkc1xuXHQgICAgICAgIHZhciBhY3RpdmVJZHMgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZShMSU5LX1VQREFURSk7XG5cdCAgICAgICAgaWYgKGFjdGl2ZUlkcykge1xuXHQgICAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoTElOS19VUERBVEUpO1xuXHQgICAgICAgICAgdGhpcy5hY3RpdmVJZHMgPSBhY3RpdmVJZHMuc3BsaXQoJywnKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gbm8gbmVlZCB0byBoYW5kbGUgY2xpY2sgaWYgbGluayBleHBlY3RzIHRvIGJlIG9wZW5lZFxuXHQgICAgICAgIC8vIGluIGEgbmV3IHdpbmRvdy90YWIuXG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0EnICYmIHRoaXMuZWwuZ2V0QXR0cmlidXRlKCd0YXJnZXQnKSA9PT0gJ19ibGFuaycpIHtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgICAgLy8gaGFuZGxlIGNsaWNrXG5cdCAgICAgICAgdGhpcy5oYW5kbGVyID0gX2JpbmQodGhpcy5vbkNsaWNrLCB0aGlzKTtcblx0ICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVyKTtcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHRhcmdldCkge1xuXHQgICAgICAgIHRoaXMudGFyZ2V0ID0gdGFyZ2V0O1xuXHQgICAgICAgIGlmIChpc09iamVjdCh0YXJnZXQpKSB7XG5cdCAgICAgICAgICB0aGlzLmFwcGVuZCA9IHRhcmdldC5hcHBlbmQ7XG5cdCAgICAgICAgICB0aGlzLmV4YWN0ID0gdGFyZ2V0LmV4YWN0O1xuXHQgICAgICAgICAgdGhpcy5wcmV2QWN0aXZlQ2xhc3MgPSB0aGlzLmFjdGl2ZUNsYXNzO1xuXHQgICAgICAgICAgdGhpcy5hY3RpdmVDbGFzcyA9IHRhcmdldC5hY3RpdmVDbGFzcztcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5vblJvdXRlVXBkYXRlKHRoaXMudm0uJHJvdXRlKTtcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuXHQgICAgICAgIC8vIGRvbid0IHJlZGlyZWN0IHdpdGggY29udHJvbCBrZXlzXG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSkgcmV0dXJuO1xuXHQgICAgICAgIC8vIGRvbid0IHJlZGlyZWN0IHdoZW4gcHJldmVudERlZmF1bHQgY2FsbGVkXG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuXHQgICAgICAgIC8vIGRvbid0IHJlZGlyZWN0IG9uIHJpZ2h0IGNsaWNrXG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKGUuYnV0dG9uICE9PSAwKSByZXR1cm47XG5cdFxuXHQgICAgICAgIHZhciB0YXJnZXQgPSB0aGlzLnRhcmdldDtcblx0ICAgICAgICBpZiAodGFyZ2V0KSB7XG5cdCAgICAgICAgICAvLyB2LWxpbmsgd2l0aCBleHByZXNzaW9uLCBqdXN0IGdvXG5cdCAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cdCAgICAgICAgICB0aGlzLnJvdXRlci5nbyh0YXJnZXQpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyBubyBleHByZXNzaW9uLCBkZWxlZ2F0ZSBmb3IgYW4gPGE+IGluc2lkZVxuXHQgICAgICAgICAgdmFyIGVsID0gZS50YXJnZXQ7XG5cdCAgICAgICAgICB3aGlsZSAoZWwudGFnTmFtZSAhPT0gJ0EnICYmIGVsICE9PSB0aGlzLmVsKSB7XG5cdCAgICAgICAgICAgIGVsID0gZWwucGFyZW50Tm9kZTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGlmIChlbC50YWdOYW1lID09PSAnQScgJiYgc2FtZU9yaWdpbihlbCkpIHtcblx0ICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgICAgICAgICB2YXIgcGF0aCA9IGVsLnBhdGhuYW1lO1xuXHQgICAgICAgICAgICBpZiAodGhpcy5yb3V0ZXIuaGlzdG9yeS5yb290KSB7XG5cdCAgICAgICAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZSh0aGlzLnJvdXRlci5oaXN0b3J5LnJvb3RSRSwgJycpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICAgIHRoaXMucm91dGVyLmdvKHtcblx0ICAgICAgICAgICAgICBwYXRoOiBwYXRoLFxuXHQgICAgICAgICAgICAgIHJlcGxhY2U6IHRhcmdldCAmJiB0YXJnZXQucmVwbGFjZSxcblx0ICAgICAgICAgICAgICBhcHBlbmQ6IHRhcmdldCAmJiB0YXJnZXQuYXBwZW5kXG5cdCAgICAgICAgICAgIH0pO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSxcblx0XG5cdCAgICAgIG9uUm91dGVVcGRhdGU6IGZ1bmN0aW9uIG9uUm91dGVVcGRhdGUocm91dGUpIHtcblx0ICAgICAgICAvLyByb3V0ZXIuc3RyaW5naWZ5UGF0aCBpcyBkZXBlbmRlbnQgb24gY3VycmVudCByb3V0ZVxuXHQgICAgICAgIC8vIGFuZCBuZWVkcyB0byBiZSBjYWxsZWQgYWdhaW4gd2hlbnZlciByb3V0ZSBjaGFuZ2VzLlxuXHQgICAgICAgIHZhciBuZXdQYXRoID0gdGhpcy5yb3V0ZXIuc3RyaW5naWZ5UGF0aCh0aGlzLnRhcmdldCk7XG5cdCAgICAgICAgaWYgKHRoaXMucGF0aCAhPT0gbmV3UGF0aCkge1xuXHQgICAgICAgICAgdGhpcy5wYXRoID0gbmV3UGF0aDtcblx0ICAgICAgICAgIHRoaXMudXBkYXRlQWN0aXZlTWF0Y2goKTtcblx0ICAgICAgICAgIHRoaXMudXBkYXRlSHJlZigpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBpZiAodGhpcy5hY3RpdmVJZHMpIHtcblx0ICAgICAgICAgIHRoaXMudm0uJGVtaXQoTElOS19VUERBVEUsIHRoaXMsIHJvdXRlLnBhdGgpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICB0aGlzLnVwZGF0ZUNsYXNzZXMocm91dGUucGF0aCwgdGhpcy5lbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHRcblx0ICAgICAgdXBkYXRlQWN0aXZlTWF0Y2g6IGZ1bmN0aW9uIHVwZGF0ZUFjdGl2ZU1hdGNoKCkge1xuXHQgICAgICAgIHRoaXMuYWN0aXZlUkUgPSB0aGlzLnBhdGggJiYgIXRoaXMuZXhhY3QgPyBuZXcgUmVnRXhwKCdeJyArIHRoaXMucGF0aC5yZXBsYWNlKC9cXC8kLywgJycpLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcXFwkJicpICsgJyhcXFxcL3wkKScpIDogbnVsbDtcblx0ICAgICAgfSxcblx0XG5cdCAgICAgIHVwZGF0ZUhyZWY6IGZ1bmN0aW9uIHVwZGF0ZUhyZWYoKSB7XG5cdCAgICAgICAgaWYgKHRoaXMuZWwudGFnTmFtZSAhPT0gJ0EnKSB7XG5cdCAgICAgICAgICByZXR1cm47XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHZhciBwYXRoID0gdGhpcy5wYXRoO1xuXHQgICAgICAgIHZhciByb3V0ZXIgPSB0aGlzLnJvdXRlcjtcblx0ICAgICAgICB2YXIgaXNBYnNvbHV0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLyc7XG5cdCAgICAgICAgLy8gZG8gbm90IGZvcm1hdCBub24taGFzaCByZWxhdGl2ZSBwYXRoc1xuXHQgICAgICAgIHZhciBocmVmID0gcGF0aCAmJiAocm91dGVyLm1vZGUgPT09ICdoYXNoJyB8fCBpc0Fic29sdXRlKSA/IHJvdXRlci5oaXN0b3J5LmZvcm1hdFBhdGgocGF0aCwgdGhpcy5hcHBlbmQpIDogcGF0aDtcblx0ICAgICAgICBpZiAoaHJlZikge1xuXHQgICAgICAgICAgdGhpcy5lbC5ocmVmID0gaHJlZjtcblx0ICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2hyZWYnKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0sXG5cdFxuXHQgICAgICB1cGRhdGVDbGFzc2VzOiBmdW5jdGlvbiB1cGRhdGVDbGFzc2VzKHBhdGgsIGVsKSB7XG5cdCAgICAgICAgdmFyIGFjdGl2ZUNsYXNzID0gdGhpcy5hY3RpdmVDbGFzcyB8fCB0aGlzLnJvdXRlci5fbGlua0FjdGl2ZUNsYXNzO1xuXHQgICAgICAgIC8vIGNsZWFyIG9sZCBjbGFzc1xuXHQgICAgICAgIGlmICh0aGlzLnByZXZBY3RpdmVDbGFzcyAmJiB0aGlzLnByZXZBY3RpdmVDbGFzcyAhPT0gYWN0aXZlQ2xhc3MpIHtcblx0ICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIHRoaXMucHJldkFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHJlbW92ZSBxdWVyeSBzdHJpbmcgYmVmb3JlIG1hdGNoaW5nXG5cdCAgICAgICAgdmFyIGRlc3QgPSB0aGlzLnBhdGgucmVwbGFjZShxdWVyeVN0cmluZ1JFLCAnJyk7XG5cdCAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZShxdWVyeVN0cmluZ1JFLCAnJyk7XG5cdCAgICAgICAgLy8gYWRkIG5ldyBjbGFzc1xuXHQgICAgICAgIGlmICh0aGlzLmV4YWN0KSB7XG5cdCAgICAgICAgICBpZiAoZGVzdCA9PT0gcGF0aCB8fFxuXHQgICAgICAgICAgLy8gYWxzbyBhbGxvdyBhZGRpdGlvbmFsIHRyYWlsaW5nIHNsYXNoXG5cdCAgICAgICAgICBkZXN0LmNoYXJBdChkZXN0Lmxlbmd0aCAtIDEpICE9PSAnLycgJiYgZGVzdCA9PT0gcGF0aC5yZXBsYWNlKHRyYWlsaW5nU2xhc2hSRSwgJycpKSB7XG5cdCAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCBhZGRDbGFzcyk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICB0b2dnbGVDbGFzc2VzKGVsLCBhY3RpdmVDbGFzcywgcmVtb3ZlQ2xhc3MpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBpZiAodGhpcy5hY3RpdmVSRSAmJiB0aGlzLmFjdGl2ZVJFLnRlc3QocGF0aCkpIHtcblx0ICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIGFkZENsYXNzKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9LFxuXHRcblx0ICAgICAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlcik7XG5cdCAgICAgICAgdGhpcy51bndhdGNoICYmIHRoaXMudW53YXRjaCgpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0XG5cdCAgICBmdW5jdGlvbiBzYW1lT3JpZ2luKGxpbmspIHtcblx0ICAgICAgcmV0dXJuIGxpbmsucHJvdG9jb2wgPT09IGxvY2F0aW9uLnByb3RvY29sICYmIGxpbmsuaG9zdG5hbWUgPT09IGxvY2F0aW9uLmhvc3RuYW1lICYmIGxpbmsucG9ydCA9PT0gbG9jYXRpb24ucG9ydDtcblx0ICAgIH1cblx0XG5cdCAgICAvLyB0aGlzIGZ1bmN0aW9uIGlzIGNvcGllZCBmcm9tIHYtYmluZDpjbGFzcyBpbXBsZW1lbnRhdGlvbiB1bnRpbFxuXHQgICAgLy8gd2UgcHJvcGVybHkgZXhwb3NlIGl0Li4uXG5cdCAgICBmdW5jdGlvbiB0b2dnbGVDbGFzc2VzKGVsLCBrZXksIGZuKSB7XG5cdCAgICAgIGtleSA9IGtleS50cmltKCk7XG5cdCAgICAgIGlmIChrZXkuaW5kZXhPZignICcpID09PSAtMSkge1xuXHQgICAgICAgIGZuKGVsLCBrZXkpO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB2YXIga2V5cyA9IGtleS5zcGxpdCgvXFxzKy8pO1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgICAgZm4oZWwsIGtleXNbaV0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgaGlzdG9yeUJhY2tlbmRzID0ge1xuXHQgICAgYWJzdHJhY3Q6IEFic3RyYWN0SGlzdG9yeSxcblx0ICAgIGhhc2g6IEhhc2hIaXN0b3J5LFxuXHQgICAgaHRtbDU6IEhUTUw1SGlzdG9yeVxuXHQgIH07XG5cdFxuXHQgIC8vIGxhdGUgYmluZCBkdXJpbmcgaW5zdGFsbFxuXHQgIHZhciBWdWUgPSB1bmRlZmluZWQ7XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJvdXRlciBjb25zdHJ1Y3RvclxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgICAqL1xuXHRcblx0ICB2YXIgUm91dGVyID0gKGZ1bmN0aW9uICgpIHtcblx0ICAgIGZ1bmN0aW9uIFJvdXRlcigpIHtcblx0ICAgICAgdmFyIF90aGlzID0gdGhpcztcblx0XG5cdCAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG5cdFxuXHQgICAgICB2YXIgX3JlZiRoYXNoYmFuZyA9IF9yZWYuaGFzaGJhbmc7XG5cdCAgICAgIHZhciBoYXNoYmFuZyA9IF9yZWYkaGFzaGJhbmcgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBfcmVmJGhhc2hiYW5nO1xuXHQgICAgICB2YXIgX3JlZiRhYnN0cmFjdCA9IF9yZWYuYWJzdHJhY3Q7XG5cdCAgICAgIHZhciBhYnN0cmFjdCA9IF9yZWYkYWJzdHJhY3QgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRhYnN0cmFjdDtcblx0ICAgICAgdmFyIF9yZWYkaGlzdG9yeSA9IF9yZWYuaGlzdG9yeTtcblx0ICAgICAgdmFyIGhpc3RvcnkgPSBfcmVmJGhpc3RvcnkgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRoaXN0b3J5O1xuXHQgICAgICB2YXIgX3JlZiRzYXZlU2Nyb2xsUG9zaXRpb24gPSBfcmVmLnNhdmVTY3JvbGxQb3NpdGlvbjtcblx0ICAgICAgdmFyIHNhdmVTY3JvbGxQb3NpdGlvbiA9IF9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uO1xuXHQgICAgICB2YXIgX3JlZiR0cmFuc2l0aW9uT25Mb2FkID0gX3JlZi50cmFuc2l0aW9uT25Mb2FkO1xuXHQgICAgICB2YXIgdHJhbnNpdGlvbk9uTG9hZCA9IF9yZWYkdHJhbnNpdGlvbk9uTG9hZCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHRyYW5zaXRpb25PbkxvYWQ7XG5cdCAgICAgIHZhciBfcmVmJHN1cHByZXNzVHJhbnNpdGlvbkVycm9yID0gX3JlZi5zdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcblx0ICAgICAgdmFyIHN1cHByZXNzVHJhbnNpdGlvbkVycm9yID0gX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJHN1cHByZXNzVHJhbnNpdGlvbkVycm9yO1xuXHQgICAgICB2YXIgX3JlZiRyb290ID0gX3JlZi5yb290O1xuXHQgICAgICB2YXIgcm9vdCA9IF9yZWYkcm9vdCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkcm9vdDtcblx0ICAgICAgdmFyIF9yZWYkbGlua0FjdGl2ZUNsYXNzID0gX3JlZi5saW5rQWN0aXZlQ2xhc3M7XG5cdCAgICAgIHZhciBsaW5rQWN0aXZlQ2xhc3MgPSBfcmVmJGxpbmtBY3RpdmVDbGFzcyA9PT0gdW5kZWZpbmVkID8gJ3YtbGluay1hY3RpdmUnIDogX3JlZiRsaW5rQWN0aXZlQ2xhc3M7XG5cdCAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZXIpO1xuXHRcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICghUm91dGVyLmluc3RhbGxlZCkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignUGxlYXNlIGluc3RhbGwgdGhlIFJvdXRlciB3aXRoIFZ1ZS51c2UoKSBiZWZvcmUgJyArICdjcmVhdGluZyBhbiBpbnN0YW5jZS4nKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gVnVlIGluc3RhbmNlc1xuXHQgICAgICB0aGlzLmFwcCA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2NoaWxkcmVuID0gW107XG5cdFxuXHQgICAgICAvLyByb3V0ZSByZWNvZ25pemVyXG5cdCAgICAgIHRoaXMuX3JlY29nbml6ZXIgPSBuZXcgUm91dGVSZWNvZ25pemVyKCk7XG5cdCAgICAgIHRoaXMuX2d1YXJkUmVjb2duaXplciA9IG5ldyBSb3V0ZVJlY29nbml6ZXIoKTtcblx0XG5cdCAgICAgIC8vIHN0YXRlXG5cdCAgICAgIHRoaXMuX3N0YXJ0ZWQgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5fc3RhcnRDYiA9IG51bGw7XG5cdCAgICAgIHRoaXMuX2N1cnJlbnRSb3V0ZSA9IHt9O1xuXHQgICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiA9IG51bGw7XG5cdCAgICAgIHRoaXMuX3ByZXZpb3VzVHJhbnNpdGlvbiA9IG51bGw7XG5cdCAgICAgIHRoaXMuX25vdEZvdW5kSGFuZGxlciA9IG51bGw7XG5cdCAgICAgIHRoaXMuX25vdEZvdW5kUmVkaXJlY3QgPSBudWxsO1xuXHQgICAgICB0aGlzLl9iZWZvcmVFYWNoSG9va3MgPSBbXTtcblx0ICAgICAgdGhpcy5fYWZ0ZXJFYWNoSG9va3MgPSBbXTtcblx0XG5cdCAgICAgIC8vIHRyaWdnZXIgdHJhbnNpdGlvbiBvbiBpbml0aWFsIHJlbmRlcj9cblx0ICAgICAgdGhpcy5fcmVuZGVyZWQgPSBmYWxzZTtcblx0ICAgICAgdGhpcy5fdHJhbnNpdGlvbk9uTG9hZCA9IHRyYW5zaXRpb25PbkxvYWQ7XG5cdFxuXHQgICAgICAvLyBoaXN0b3J5IG1vZGVcblx0ICAgICAgdGhpcy5fcm9vdCA9IHJvb3Q7XG5cdCAgICAgIHRoaXMuX2Fic3RyYWN0ID0gYWJzdHJhY3Q7XG5cdCAgICAgIHRoaXMuX2hhc2hiYW5nID0gaGFzaGJhbmc7XG5cdFxuXHQgICAgICAvLyBjaGVjayBpZiBIVE1MNSBoaXN0b3J5IGlzIGF2YWlsYWJsZVxuXHQgICAgICB2YXIgaGFzUHVzaFN0YXRlID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lmhpc3RvcnkgJiYgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlO1xuXHQgICAgICB0aGlzLl9oaXN0b3J5ID0gaGlzdG9yeSAmJiBoYXNQdXNoU3RhdGU7XG5cdCAgICAgIHRoaXMuX2hpc3RvcnlGYWxsYmFjayA9IGhpc3RvcnkgJiYgIWhhc1B1c2hTdGF0ZTtcblx0XG5cdCAgICAgIC8vIGNyZWF0ZSBoaXN0b3J5IG9iamVjdFxuXHQgICAgICB2YXIgaW5Ccm93c2VyID0gVnVlLnV0aWwuaW5Ccm93c2VyO1xuXHQgICAgICB0aGlzLm1vZGUgPSAhaW5Ccm93c2VyIHx8IHRoaXMuX2Fic3RyYWN0ID8gJ2Fic3RyYWN0JyA6IHRoaXMuX2hpc3RvcnkgPyAnaHRtbDUnIDogJ2hhc2gnO1xuXHRcblx0ICAgICAgdmFyIEhpc3RvcnkgPSBoaXN0b3J5QmFja2VuZHNbdGhpcy5tb2RlXTtcblx0ICAgICAgdGhpcy5oaXN0b3J5ID0gbmV3IEhpc3Rvcnkoe1xuXHQgICAgICAgIHJvb3Q6IHJvb3QsXG5cdCAgICAgICAgaGFzaGJhbmc6IHRoaXMuX2hhc2hiYW5nLFxuXHQgICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShwYXRoLCBzdGF0ZSwgYW5jaG9yKSB7XG5cdCAgICAgICAgICBfdGhpcy5fbWF0Y2gocGF0aCwgc3RhdGUsIGFuY2hvcik7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0XG5cdCAgICAgIC8vIG90aGVyIG9wdGlvbnNcblx0ICAgICAgdGhpcy5fc2F2ZVNjcm9sbFBvc2l0aW9uID0gc2F2ZVNjcm9sbFBvc2l0aW9uO1xuXHQgICAgICB0aGlzLl9saW5rQWN0aXZlQ2xhc3MgPSBsaW5rQWN0aXZlQ2xhc3M7XG5cdCAgICAgIHRoaXMuX3N1cHByZXNzID0gc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3I7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBbGxvdyBkaXJlY3RseSBwYXNzaW5nIGNvbXBvbmVudHMgdG8gYSByb3V0ZVxuXHQgICAgICogZGVmaW5pdGlvbi5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcblx0ICAgICAqL1xuXHRcblx0ICAgIC8vIEFQSSA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgICAvKipcblx0ICAgICogUmVnaXN0ZXIgYSBtYXAgb2YgdG9wLWxldmVsIHBhdGhzLlxuXHQgICAgKlxuXHQgICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG5cdCAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gbWFwKF9tYXApIHtcblx0ICAgICAgZm9yICh2YXIgcm91dGUgaW4gX21hcCkge1xuXHQgICAgICAgIHRoaXMub24ocm91dGUsIF9tYXBbcm91dGVdKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZWdpc3RlciBhIHNpbmdsZSByb290LWxldmVsIHBhdGhcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcm9vdFBhdGhcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBjb21wb25lbnRcblx0ICAgICAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IFtzdWJSb3V0ZXNdXG5cdCAgICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2ZvcmNlUmVmcmVzaF1cblx0ICAgICAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW2JlZm9yZV1cblx0ICAgICAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW2FmdGVyXVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIG9uKHJvb3RQYXRoLCBoYW5kbGVyKSB7XG5cdCAgICAgIGlmIChyb290UGF0aCA9PT0gJyonKSB7XG5cdCAgICAgICAgdGhpcy5fbm90Rm91bmQoaGFuZGxlcik7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdGhpcy5fYWRkUm91dGUocm9vdFBhdGgsIGhhbmRsZXIsIFtdKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXQgcmVkaXJlY3RzLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXBcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUucmVkaXJlY3QgPSBmdW5jdGlvbiByZWRpcmVjdChtYXApIHtcblx0ICAgICAgZm9yICh2YXIgcGF0aCBpbiBtYXApIHtcblx0ICAgICAgICB0aGlzLl9hZGRSZWRpcmVjdChwYXRoLCBtYXBbcGF0aF0pO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNldCBhbGlhc2VzLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBtYXBcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuYWxpYXMgPSBmdW5jdGlvbiBhbGlhcyhtYXApIHtcblx0ICAgICAgZm9yICh2YXIgcGF0aCBpbiBtYXApIHtcblx0ICAgICAgICB0aGlzLl9hZGRBbGlhcyhwYXRoLCBtYXBbcGF0aF0pO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiB0aGlzO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNldCBnbG9iYWwgYmVmb3JlIGhvb2suXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuYmVmb3JlRWFjaCA9IGZ1bmN0aW9uIGJlZm9yZUVhY2goZm4pIHtcblx0ICAgICAgdGhpcy5fYmVmb3JlRWFjaEhvb2tzLnB1c2goZm4pO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXQgZ2xvYmFsIGFmdGVyIGhvb2suXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuYWZ0ZXJFYWNoID0gZnVuY3Rpb24gYWZ0ZXJFYWNoKGZuKSB7XG5cdCAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzLnB1c2goZm4pO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBOYXZpZ2F0ZSB0byBhIGdpdmVuIHBhdGguXG5cdCAgICAgKiBUaGUgcGF0aCBjYW4gYmUgYW4gb2JqZWN0IGRlc2NyaWJpbmcgYSBuYW1lZCBwYXRoIGluXG5cdCAgICAgKiB0aGUgZm9ybWF0IG9mIHsgbmFtZTogJy4uLicsIHBhcmFtczoge30sIHF1ZXJ5OiB7fX1cblx0ICAgICAqIFRoZSBwYXRoIGlzIGFzc3VtZWQgdG8gYmUgYWxyZWFkeSBkZWNvZGVkLCBhbmQgd2lsbFxuXHQgICAgICogYmUgcmVzb2x2ZWQgYWdhaW5zdCByb290IChpZiBwcm92aWRlZClcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IHBhdGhcblx0ICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3JlcGxhY2VdXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28ocGF0aCkge1xuXHQgICAgICB2YXIgcmVwbGFjZSA9IGZhbHNlO1xuXHQgICAgICB2YXIgYXBwZW5kID0gZmFsc2U7XG5cdCAgICAgIGlmIChWdWUudXRpbC5pc09iamVjdChwYXRoKSkge1xuXHQgICAgICAgIHJlcGxhY2UgPSBwYXRoLnJlcGxhY2U7XG5cdCAgICAgICAgYXBwZW5kID0gcGF0aC5hcHBlbmQ7XG5cdCAgICAgIH1cblx0ICAgICAgcGF0aCA9IHRoaXMuc3RyaW5naWZ5UGF0aChwYXRoKTtcblx0ICAgICAgaWYgKHBhdGgpIHtcblx0ICAgICAgICB0aGlzLmhpc3RvcnkuZ28ocGF0aCwgcmVwbGFjZSwgYXBwZW5kKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNob3J0IGhhbmQgZm9yIHJlcGxhY2luZyBjdXJyZW50IHBhdGhcblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5yZXBsYWNlID0gZnVuY3Rpb24gcmVwbGFjZShwYXRoKSB7XG5cdCAgICAgIGlmICh0eXBlb2YgcGF0aCA9PT0gJ3N0cmluZycpIHtcblx0ICAgICAgICBwYXRoID0geyBwYXRoOiBwYXRoIH07XG5cdCAgICAgIH1cblx0ICAgICAgcGF0aC5yZXBsYWNlID0gdHJ1ZTtcblx0ICAgICAgdGhpcy5nbyhwYXRoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTdGFydCB0aGUgcm91dGVyLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7VnVlQ29uc3RydWN0b3J9IEFwcFxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gY29udGFpbmVyXG5cdCAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24gc3RhcnQoQXBwLCBjb250YWluZXIsIGNiKSB7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAodGhpcy5fc3RhcnRlZCkge1xuXHQgICAgICAgIHdhcm4kMSgnYWxyZWFkeSBzdGFydGVkLicpO1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLl9zdGFydGVkID0gdHJ1ZTtcblx0ICAgICAgdGhpcy5fc3RhcnRDYiA9IGNiO1xuXHQgICAgICBpZiAoIXRoaXMuYXBwKSB7XG5cdCAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgICAgaWYgKCFBcHAgfHwgIWNvbnRhaW5lcikge1xuXHQgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNdXN0IHN0YXJ0IHZ1ZS1yb3V0ZXIgd2l0aCBhIGNvbXBvbmVudCBhbmQgYSAnICsgJ3Jvb3QgY29udGFpbmVyLicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAoQXBwIGluc3RhbmNlb2YgVnVlKSB7XG5cdCAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3RhcnQgdnVlLXJvdXRlciB3aXRoIGEgY29tcG9uZW50LCBub3QgYSAnICsgJ1Z1ZSBpbnN0YW5jZS4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdGhpcy5fYXBwQ29udGFpbmVyID0gY29udGFpbmVyO1xuXHQgICAgICAgIHZhciBDdG9yID0gdGhpcy5fYXBwQ29uc3RydWN0b3IgPSB0eXBlb2YgQXBwID09PSAnZnVuY3Rpb24nID8gQXBwIDogVnVlLmV4dGVuZChBcHApO1xuXHQgICAgICAgIC8vIGdpdmUgaXQgYSBuYW1lIGZvciBiZXR0ZXIgZGVidWdnaW5nXG5cdCAgICAgICAgQ3Rvci5vcHRpb25zLm5hbWUgPSBDdG9yLm9wdGlvbnMubmFtZSB8fCAnUm91dGVyQXBwJztcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gaGFuZGxlIGhpc3RvcnkgZmFsbGJhY2sgaW4gYnJvd3NlcnMgdGhhdCBkbyBub3Rcblx0ICAgICAgLy8gc3VwcG9ydCBIVE1MNSBoaXN0b3J5IEFQSVxuXHQgICAgICBpZiAodGhpcy5faGlzdG9yeUZhbGxiYWNrKSB7XG5cdCAgICAgICAgdmFyIF9sb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcblx0ICAgICAgICB2YXIgX2hpc3RvcnkgPSBuZXcgSFRNTDVIaXN0b3J5KHsgcm9vdDogdGhpcy5fcm9vdCB9KTtcblx0ICAgICAgICB2YXIgcGF0aCA9IF9oaXN0b3J5LnJvb3QgPyBfbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZShfaGlzdG9yeS5yb290UkUsICcnKSA6IF9sb2NhdGlvbi5wYXRobmFtZTtcblx0ICAgICAgICBpZiAocGF0aCAmJiBwYXRoICE9PSAnLycpIHtcblx0ICAgICAgICAgIF9sb2NhdGlvbi5hc3NpZ24oKF9oaXN0b3J5LnJvb3QgfHwgJycpICsgJy8nICsgdGhpcy5oaXN0b3J5LmZvcm1hdFBhdGgocGF0aCkgKyBfbG9jYXRpb24uc2VhcmNoKTtcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIHRoaXMuaGlzdG9yeS5zdGFydCgpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFN0b3AgbGlzdGVuaW5nIHRvIHJvdXRlIGNoYW5nZXMuXG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbiBzdG9wKCkge1xuXHQgICAgICB0aGlzLmhpc3Rvcnkuc3RvcCgpO1xuXHQgICAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogTm9ybWFsaXplIG5hbWVkIHJvdXRlIG9iamVjdCAvIHN0cmluZyBwYXRocyBpbnRvXG5cdCAgICAgKiBhIHN0cmluZy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdHxTdHJpbmd8TnVtYmVyfSBwYXRoXG5cdCAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAgICAgKi9cblx0XG5cdCAgICBSb3V0ZXIucHJvdG90eXBlLnN0cmluZ2lmeVBhdGggPSBmdW5jdGlvbiBzdHJpbmdpZnlQYXRoKHBhdGgpIHtcblx0ICAgICAgdmFyIGdlbmVyYXRlZFBhdGggPSAnJztcblx0ICAgICAgaWYgKHBhdGggJiYgdHlwZW9mIHBhdGggPT09ICdvYmplY3QnKSB7XG5cdCAgICAgICAgaWYgKHBhdGgubmFtZSkge1xuXHQgICAgICAgICAgdmFyIGV4dGVuZCA9IFZ1ZS51dGlsLmV4dGVuZDtcblx0ICAgICAgICAgIHZhciBjdXJyZW50UGFyYW1zID0gdGhpcy5fY3VycmVudFRyYW5zaXRpb24gJiYgdGhpcy5fY3VycmVudFRyYW5zaXRpb24udG8ucGFyYW1zO1xuXHQgICAgICAgICAgdmFyIHRhcmdldFBhcmFtcyA9IHBhdGgucGFyYW1zIHx8IHt9O1xuXHQgICAgICAgICAgdmFyIHBhcmFtcyA9IGN1cnJlbnRQYXJhbXMgPyBleHRlbmQoZXh0ZW5kKHt9LCBjdXJyZW50UGFyYW1zKSwgdGFyZ2V0UGFyYW1zKSA6IHRhcmdldFBhcmFtcztcblx0ICAgICAgICAgIGdlbmVyYXRlZFBhdGggPSBlbmNvZGVVUkkodGhpcy5fcmVjb2duaXplci5nZW5lcmF0ZShwYXRoLm5hbWUsIHBhcmFtcykpO1xuXHQgICAgICAgIH0gZWxzZSBpZiAocGF0aC5wYXRoKSB7XG5cdCAgICAgICAgICBnZW5lcmF0ZWRQYXRoID0gZW5jb2RlVVJJKHBhdGgucGF0aCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmIChwYXRoLnF1ZXJ5KSB7XG5cdCAgICAgICAgICAvLyBub3RlOiB0aGUgZ2VuZXJhdGVkIHF1ZXJ5IHN0cmluZyBpcyBwcmUtVVJMLWVuY29kZWQgYnkgdGhlIHJlY29nbml6ZXJcblx0ICAgICAgICAgIHZhciBxdWVyeSA9IHRoaXMuX3JlY29nbml6ZXIuZ2VuZXJhdGVRdWVyeVN0cmluZyhwYXRoLnF1ZXJ5KTtcblx0ICAgICAgICAgIGlmIChnZW5lcmF0ZWRQYXRoLmluZGV4T2YoJz8nKSA+IC0xKSB7XG5cdCAgICAgICAgICAgIGdlbmVyYXRlZFBhdGggKz0gJyYnICsgcXVlcnkuc2xpY2UoMSk7XG5cdCAgICAgICAgICB9IGVsc2Uge1xuXHQgICAgICAgICAgICBnZW5lcmF0ZWRQYXRoICs9IHF1ZXJ5O1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBnZW5lcmF0ZWRQYXRoID0gZW5jb2RlVVJJKHBhdGggPyBwYXRoICsgJycgOiAnJyk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGdlbmVyYXRlZFBhdGg7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIEludGVybmFsIG1ldGhvZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblx0XG5cdCAgICAvKipcblx0ICAgICogQWRkIGEgcm91dGUgY29udGFpbmluZyBhIGxpc3Qgb2Ygc2VnbWVudHMgdG8gdGhlIGludGVybmFsXG5cdCAgICAqIHJvdXRlIHJlY29nbml6ZXIuIFdpbGwgYmUgY2FsbGVkIHJlY3Vyc2l2ZWx5IHRvIGFkZCBhbGxcblx0ICAgICogcG9zc2libGUgc3ViLXJvdXRlcy5cblx0ICAgICpcblx0ICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcblx0ICAgICogQHBhcmFtIHtBcnJheX0gc2VnbWVudHNcblx0ICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5fYWRkUm91dGUgPSBmdW5jdGlvbiBfYWRkUm91dGUocGF0aCwgaGFuZGxlciwgc2VnbWVudHMpIHtcblx0ICAgICAgZ3VhcmRDb21wb25lbnQocGF0aCwgaGFuZGxlcik7XG5cdCAgICAgIGhhbmRsZXIucGF0aCA9IHBhdGg7XG5cdCAgICAgIGhhbmRsZXIuZnVsbFBhdGggPSAoc2VnbWVudHMucmVkdWNlKGZ1bmN0aW9uIChwYXRoLCBzZWdtZW50KSB7XG5cdCAgICAgICAgcmV0dXJuIHBhdGggKyBzZWdtZW50LnBhdGg7XG5cdCAgICAgIH0sICcnKSArIHBhdGgpLnJlcGxhY2UoJy8vJywgJy8nKTtcblx0ICAgICAgc2VnbWVudHMucHVzaCh7XG5cdCAgICAgICAgcGF0aDogcGF0aCxcblx0ICAgICAgICBoYW5kbGVyOiBoYW5kbGVyXG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLl9yZWNvZ25pemVyLmFkZChzZWdtZW50cywge1xuXHQgICAgICAgIGFzOiBoYW5kbGVyLm5hbWVcblx0ICAgICAgfSk7XG5cdCAgICAgIC8vIGFkZCBzdWIgcm91dGVzXG5cdCAgICAgIGlmIChoYW5kbGVyLnN1YlJvdXRlcykge1xuXHQgICAgICAgIGZvciAodmFyIHN1YlBhdGggaW4gaGFuZGxlci5zdWJSb3V0ZXMpIHtcblx0ICAgICAgICAgIC8vIHJlY3Vyc2l2ZWx5IHdhbGsgYWxsIHN1YiByb3V0ZXNcblx0ICAgICAgICAgIHRoaXMuX2FkZFJvdXRlKHN1YlBhdGgsIGhhbmRsZXIuc3ViUm91dGVzW3N1YlBhdGhdLFxuXHQgICAgICAgICAgLy8gcGFzcyBhIGNvcHkgaW4gcmVjdXJzaW9uIHRvIGF2b2lkIG11dGF0aW5nXG5cdCAgICAgICAgICAvLyBhY3Jvc3MgYnJhbmNoZXNcblx0ICAgICAgICAgIHNlZ21lbnRzLnNsaWNlKCkpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFNldCB0aGUgbm90Rm91bmQgcm91dGUgaGFuZGxlci5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5fbm90Rm91bmQgPSBmdW5jdGlvbiBfbm90Rm91bmQoaGFuZGxlcikge1xuXHQgICAgICBndWFyZENvbXBvbmVudCgnKicsIGhhbmRsZXIpO1xuXHQgICAgICB0aGlzLl9ub3RGb3VuZEhhbmRsZXIgPSBbeyBoYW5kbGVyOiBoYW5kbGVyIH1dO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEFkZCBhIHJlZGlyZWN0IHJlY29yZC5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHJlZGlyZWN0UGF0aFxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5fYWRkUmVkaXJlY3QgPSBmdW5jdGlvbiBfYWRkUmVkaXJlY3QocGF0aCwgcmVkaXJlY3RQYXRoKSB7XG5cdCAgICAgIGlmIChwYXRoID09PSAnKicpIHtcblx0ICAgICAgICB0aGlzLl9ub3RGb3VuZFJlZGlyZWN0ID0gcmVkaXJlY3RQYXRoO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuX2FkZEd1YXJkKHBhdGgsIHJlZGlyZWN0UGF0aCwgdGhpcy5yZXBsYWNlKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEFkZCBhbiBhbGlhcyByZWNvcmQuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBhbGlhc1BhdGhcblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZEFsaWFzID0gZnVuY3Rpb24gX2FkZEFsaWFzKHBhdGgsIGFsaWFzUGF0aCkge1xuXHQgICAgICB0aGlzLl9hZGRHdWFyZChwYXRoLCBhbGlhc1BhdGgsIHRoaXMuX21hdGNoKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBZGQgYSBwYXRoIGd1YXJkLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFwcGVkUGF0aFxuXHQgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5fYWRkR3VhcmQgPSBmdW5jdGlvbiBfYWRkR3VhcmQocGF0aCwgbWFwcGVkUGF0aCwgX2hhbmRsZXIpIHtcblx0ICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG5cdFxuXHQgICAgICB0aGlzLl9ndWFyZFJlY29nbml6ZXIuYWRkKFt7XG5cdCAgICAgICAgcGF0aDogcGF0aCxcblx0ICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG1hdGNoLCBxdWVyeSkge1xuXHQgICAgICAgICAgdmFyIHJlYWxQYXRoID0gbWFwUGFyYW1zKG1hcHBlZFBhdGgsIG1hdGNoLnBhcmFtcywgcXVlcnkpO1xuXHQgICAgICAgICAgX2hhbmRsZXIuY2FsbChfdGhpczIsIHJlYWxQYXRoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1dKTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBDaGVjayBpZiBhIHBhdGggbWF0Y2hlcyBhbnkgcmVkaXJlY3QgcmVjb3Jkcy5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgICAgICogQHJldHVybiB7Qm9vbGVhbn0gLSBpZiB0cnVlLCB3aWxsIHNraXAgbm9ybWFsIG1hdGNoLlxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5fY2hlY2tHdWFyZCA9IGZ1bmN0aW9uIF9jaGVja0d1YXJkKHBhdGgpIHtcblx0ICAgICAgdmFyIG1hdGNoZWQgPSB0aGlzLl9ndWFyZFJlY29nbml6ZXIucmVjb2duaXplKHBhdGgsIHRydWUpO1xuXHQgICAgICBpZiAobWF0Y2hlZCkge1xuXHQgICAgICAgIG1hdGNoZWRbMF0uaGFuZGxlcihtYXRjaGVkWzBdLCBtYXRjaGVkLnF1ZXJ5UGFyYW1zKTtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfSBlbHNlIGlmICh0aGlzLl9ub3RGb3VuZFJlZGlyZWN0KSB7XG5cdCAgICAgICAgbWF0Y2hlZCA9IHRoaXMuX3JlY29nbml6ZXIucmVjb2duaXplKHBhdGgpO1xuXHQgICAgICAgIGlmICghbWF0Y2hlZCkge1xuXHQgICAgICAgICAgdGhpcy5yZXBsYWNlKHRoaXMuX25vdEZvdW5kUmVkaXJlY3QpO1xuXHQgICAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9O1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogTWF0Y2ggYSBVUkwgcGF0aCBhbmQgc2V0IHRoZSByb3V0ZSBjb250ZXh0IG9uIHZtLFxuXHQgICAgICogdHJpZ2dlcmluZyB2aWV3IHVwZGF0ZXMuXG5cdCAgICAgKlxuXHQgICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhdGVdXG5cdCAgICAgKiBAcGFyYW0ge1N0cmluZ30gW2FuY2hvcl1cblx0ICAgICAqL1xuXHRcblx0ICAgIFJvdXRlci5wcm90b3R5cGUuX21hdGNoID0gZnVuY3Rpb24gX21hdGNoKHBhdGgsIHN0YXRlLCBhbmNob3IpIHtcblx0ICAgICAgdmFyIF90aGlzMyA9IHRoaXM7XG5cdFxuXHQgICAgICBpZiAodGhpcy5fY2hlY2tHdWFyZChwYXRoKSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgdmFyIGN1cnJlbnRSb3V0ZSA9IHRoaXMuX2N1cnJlbnRSb3V0ZTtcblx0ICAgICAgdmFyIGN1cnJlbnRUcmFuc2l0aW9uID0gdGhpcy5fY3VycmVudFRyYW5zaXRpb247XG5cdFxuXHQgICAgICBpZiAoY3VycmVudFRyYW5zaXRpb24pIHtcblx0ICAgICAgICBpZiAoY3VycmVudFRyYW5zaXRpb24udG8ucGF0aCA9PT0gcGF0aCkge1xuXHQgICAgICAgICAgLy8gZG8gbm90aGluZyBpZiB3ZSBoYXZlIGFuIGFjdGl2ZSB0cmFuc2l0aW9uIGdvaW5nIHRvIHRoZSBzYW1lIHBhdGhcblx0ICAgICAgICAgIHJldHVybjtcblx0ICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRSb3V0ZS5wYXRoID09PSBwYXRoKSB7XG5cdCAgICAgICAgICAvLyBXZSBhcmUgZ29pbmcgdG8gdGhlIHNhbWUgcGF0aCwgYnV0IHdlIGFsc28gaGF2ZSBhbiBvbmdvaW5nIGJ1dFxuXHQgICAgICAgICAgLy8gbm90LXlldC12YWxpZGF0ZWQgdHJhbnNpdGlvbi4gQWJvcnQgdGhhdCB0cmFuc2l0aW9uIGFuZCByZXNldCB0b1xuXHQgICAgICAgICAgLy8gcHJldiB0cmFuc2l0aW9uLlxuXHQgICAgICAgICAgY3VycmVudFRyYW5zaXRpb24uYWJvcnRlZCA9IHRydWU7XG5cdCAgICAgICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiA9IHRoaXMuX3ByZXZUcmFuc2l0aW9uO1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAvLyBnb2luZyB0byBhIHRvdGFsbHkgZGlmZmVyZW50IHBhdGguIGFib3J0IG9uZ29pbmcgdHJhbnNpdGlvbi5cblx0ICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLmFib3J0ZWQgPSB0cnVlO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHRcblx0ICAgICAgLy8gY29uc3RydWN0IG5ldyByb3V0ZSBhbmQgdHJhbnNpdGlvbiBjb250ZXh0XG5cdCAgICAgIHZhciByb3V0ZSA9IG5ldyBSb3V0ZShwYXRoLCB0aGlzKTtcblx0ICAgICAgdmFyIHRyYW5zaXRpb24gPSBuZXcgUm91dGVUcmFuc2l0aW9uKHRoaXMsIHJvdXRlLCBjdXJyZW50Um91dGUpO1xuXHRcblx0ICAgICAgLy8gY3VycmVudCB0cmFuc2l0aW9uIGlzIHVwZGF0ZWQgcmlnaHQgbm93LlxuXHQgICAgICAvLyBob3dldmVyLCBjdXJyZW50IHJvdXRlIHdpbGwgb25seSBiZSB1cGRhdGVkIGFmdGVyIHRoZSB0cmFuc2l0aW9uIGhhc1xuXHQgICAgICAvLyBiZWVuIHZhbGlkYXRlZC5cblx0ICAgICAgdGhpcy5fcHJldlRyYW5zaXRpb24gPSBjdXJyZW50VHJhbnNpdGlvbjtcblx0ICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSB0cmFuc2l0aW9uO1xuXHRcblx0ICAgICAgaWYgKCF0aGlzLmFwcCkge1xuXHQgICAgICAgIChmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAvLyBpbml0aWFsIHJlbmRlclxuXHQgICAgICAgICAgdmFyIHJvdXRlciA9IF90aGlzMztcblx0ICAgICAgICAgIF90aGlzMy5hcHAgPSBuZXcgX3RoaXMzLl9hcHBDb25zdHJ1Y3Rvcih7XG5cdCAgICAgICAgICAgIGVsOiBfdGhpczMuX2FwcENvbnRhaW5lcixcblx0ICAgICAgICAgICAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHtcblx0ICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIgPSByb3V0ZXI7XG5cdCAgICAgICAgICAgIH0sXG5cdCAgICAgICAgICAgIF9tZXRhOiB7XG5cdCAgICAgICAgICAgICAgJHJvdXRlOiByb3V0ZVxuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9KTtcblx0ICAgICAgICB9KSgpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBjaGVjayBnbG9iYWwgYmVmb3JlIGhvb2tcblx0ICAgICAgdmFyIGJlZm9yZUhvb2tzID0gdGhpcy5fYmVmb3JlRWFjaEhvb2tzO1xuXHQgICAgICB2YXIgc3RhcnRUcmFuc2l0aW9uID0gZnVuY3Rpb24gc3RhcnRUcmFuc2l0aW9uKCkge1xuXHQgICAgICAgIHRyYW5zaXRpb24uc3RhcnQoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgX3RoaXMzLl9wb3N0VHJhbnNpdGlvbihyb3V0ZSwgc3RhdGUsIGFuY2hvcik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH07XG5cdFxuXHQgICAgICBpZiAoYmVmb3JlSG9va3MubGVuZ3RoKSB7XG5cdCAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShiZWZvcmVIb29rcywgZnVuY3Rpb24gKGhvb2ssIF8sIG5leHQpIHtcblx0ICAgICAgICAgIGlmICh0cmFuc2l0aW9uID09PSBfdGhpczMuX2N1cnJlbnRUcmFuc2l0aW9uKSB7XG5cdCAgICAgICAgICAgIHRyYW5zaXRpb24uY2FsbEhvb2soaG9vaywgbnVsbCwgbmV4dCwge1xuXHQgICAgICAgICAgICAgIGV4cGVjdEJvb2xlYW46IHRydWVcblx0ICAgICAgICAgICAgfSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgc3RhcnRUcmFuc2l0aW9uKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBzdGFydFRyYW5zaXRpb24oKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgaWYgKCF0aGlzLl9yZW5kZXJlZCAmJiB0aGlzLl9zdGFydENiKSB7XG5cdCAgICAgICAgdGhpcy5fc3RhcnRDYi5jYWxsKG51bGwpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvLyBIQUNLOlxuXHQgICAgICAvLyBzZXQgcmVuZGVyZWQgdG8gdHJ1ZSBhZnRlciB0aGUgdHJhbnNpdGlvbiBzdGFydCwgc29cblx0ICAgICAgLy8gdGhhdCBjb21wb25lbnRzIHRoYXQgYXJlIGFjaXR2YXRlZCBzeW5jaHJvbm91c2x5IGtub3dcblx0ICAgICAgLy8gd2hldGhlciBpdCBpcyB0aGUgaW5pdGlhbCByZW5kZXIuXG5cdCAgICAgIHRoaXMuX3JlbmRlcmVkID0gdHJ1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTZXQgY3VycmVudCB0byB0aGUgbmV3IHRyYW5zaXRpb24uXG5cdCAgICAgKiBUaGlzIGlzIGNhbGxlZCBieSB0aGUgdHJhbnNpdGlvbiBvYmplY3Qgd2hlbiB0aGVcblx0ICAgICAqIHZhbGlkYXRpb24gb2YgYSByb3V0ZSBoYXMgc3VjY2VlZGVkLlxuXHQgICAgICpcblx0ICAgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5fb25UcmFuc2l0aW9uVmFsaWRhdGVkID0gZnVuY3Rpb24gX29uVHJhbnNpdGlvblZhbGlkYXRlZCh0cmFuc2l0aW9uKSB7XG5cdCAgICAgIC8vIHNldCBjdXJyZW50IHJvdXRlXG5cdCAgICAgIHZhciByb3V0ZSA9IHRoaXMuX2N1cnJlbnRSb3V0ZSA9IHRyYW5zaXRpb24udG87XG5cdCAgICAgIC8vIHVwZGF0ZSByb3V0ZSBjb250ZXh0IGZvciBhbGwgY2hpbGRyZW5cblx0ICAgICAgaWYgKHRoaXMuYXBwLiRyb3V0ZSAhPT0gcm91dGUpIHtcblx0ICAgICAgICB0aGlzLmFwcC4kcm91dGUgPSByb3V0ZTtcblx0ICAgICAgICB0aGlzLl9jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuXHQgICAgICAgICAgY2hpbGQuJHJvdXRlID0gcm91dGU7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gY2FsbCBnbG9iYWwgYWZ0ZXIgaG9va1xuXHQgICAgICBpZiAodGhpcy5fYWZ0ZXJFYWNoSG9va3MubGVuZ3RoKSB7XG5cdCAgICAgICAgdGhpcy5fYWZ0ZXJFYWNoSG9va3MuZm9yRWFjaChmdW5jdGlvbiAoaG9vaykge1xuXHQgICAgICAgICAgcmV0dXJuIGhvb2suY2FsbChudWxsLCB7XG5cdCAgICAgICAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuXHQgICAgICAgICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb21cblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uLmRvbmUgPSB0cnVlO1xuXHQgICAgfTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEhhbmRsZSBzdHVmZiBhZnRlciB0aGUgdHJhbnNpdGlvbi5cblx0ICAgICAqXG5cdCAgICAgKiBAcGFyYW0ge1JvdXRlfSByb3V0ZVxuXHQgICAgICogQHBhcmFtIHtPYmplY3R9IFtzdGF0ZV1cblx0ICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbYW5jaG9yXVxuXHQgICAgICovXG5cdFxuXHQgICAgUm91dGVyLnByb3RvdHlwZS5fcG9zdFRyYW5zaXRpb24gPSBmdW5jdGlvbiBfcG9zdFRyYW5zaXRpb24ocm91dGUsIHN0YXRlLCBhbmNob3IpIHtcblx0ICAgICAgLy8gaGFuZGxlIHNjcm9sbCBwb3NpdGlvbnNcblx0ICAgICAgLy8gc2F2ZWQgc2Nyb2xsIHBvc2l0aW9ucyB0YWtlIHByaW9yaXR5XG5cdCAgICAgIC8vIHRoZW4gd2UgY2hlY2sgaWYgdGhlIHBhdGggaGFzIGFuIGFuY2hvclxuXHQgICAgICB2YXIgcG9zID0gc3RhdGUgJiYgc3RhdGUucG9zO1xuXHQgICAgICBpZiAocG9zICYmIHRoaXMuX3NhdmVTY3JvbGxQb3NpdGlvbikge1xuXHQgICAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8ocG9zLngsIHBvcy55KTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfSBlbHNlIGlmIChhbmNob3IpIHtcblx0ICAgICAgICBWdWUubmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgdmFyIGVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYW5jaG9yLnNsaWNlKDEpKTtcblx0ICAgICAgICAgIGlmIChlbCkge1xuXHQgICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG8od2luZG93LnNjcm9sbFgsIGVsLm9mZnNldFRvcCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgcmV0dXJuIFJvdXRlcjtcblx0ICB9KSgpO1xuXHRcblx0ICBmdW5jdGlvbiBndWFyZENvbXBvbmVudChwYXRoLCBoYW5kbGVyKSB7XG5cdCAgICB2YXIgY29tcCA9IGhhbmRsZXIuY29tcG9uZW50O1xuXHQgICAgaWYgKFZ1ZS51dGlsLmlzUGxhaW5PYmplY3QoY29tcCkpIHtcblx0ICAgICAgY29tcCA9IGhhbmRsZXIuY29tcG9uZW50ID0gVnVlLmV4dGVuZChjb21wKTtcblx0ICAgIH1cblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKHR5cGVvZiBjb21wICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGhhbmRsZXIuY29tcG9uZW50ID0gbnVsbDtcblx0ICAgICAgd2FybiQxKCdpbnZhbGlkIGNvbXBvbmVudCBmb3Igcm91dGUgXCInICsgcGF0aCArICdcIi4nKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qIEluc3RhbGxhdGlvbiAqL1xuXHRcblx0ICBSb3V0ZXIuaW5zdGFsbGVkID0gZmFsc2U7XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc3RhbGxhdGlvbiBpbnRlcmZhY2UuXG5cdCAgICogSW5zdGFsbCB0aGUgbmVjZXNzYXJ5IGRpcmVjdGl2ZXMuXG5cdCAgICovXG5cdFxuXHQgIFJvdXRlci5pbnN0YWxsID0gZnVuY3Rpb24gKGV4dGVybmFsVnVlKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChSb3V0ZXIuaW5zdGFsbGVkKSB7XG5cdCAgICAgIHdhcm4kMSgnYWxyZWFkeSBpbnN0YWxsZWQuJyk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIFZ1ZSA9IGV4dGVybmFsVnVlO1xuXHQgICAgYXBwbHlPdmVycmlkZShWdWUpO1xuXHQgICAgVmlldyhWdWUpO1xuXHQgICAgTGluayhWdWUpO1xuXHQgICAgZXhwb3J0cyQxLlZ1ZSA9IFZ1ZTtcblx0ICAgIFJvdXRlci5pbnN0YWxsZWQgPSB0cnVlO1xuXHQgIH07XG5cdFxuXHQgIC8vIGF1dG8gaW5zdGFsbFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB3aW5kb3cuVnVlKSB7XG5cdCAgICB3aW5kb3cuVnVlLnVzZShSb3V0ZXIpO1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIFJvdXRlcjtcblx0XG5cdH0pKTtcblxuLyoqKi8gfSxcbi8qIDIwNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzApO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIwNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzEpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIwNiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzIpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIwNyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzMpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIwOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzQpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIwOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzUpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIxMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzYpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvbnRhaW5lci52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjExICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXHRcblx0Ly8gbG9hZCB0aGUgc3R5bGVzXG5cdHZhciBjb250ZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg3Nyk7XG5cdGlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuXHQvLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG5cdHZhciB1cGRhdGUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpKGNvbnRlbnQsIHt9KTtcblx0aWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG5cdC8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcblx0aWYoZmFsc2UpIHtcblx0XHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb3VudGVyLnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIxMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzgpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiKTtcblx0XHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHRcdH0pO1xuXHRcdH1cblx0XHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG5cdH1cblxuLyoqKi8gfSxcbi8qIDIxMyAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0Ly8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblx0XG5cdC8vIGxvYWQgdGhlIHN0eWxlc1xuXHR2YXIgY29udGVudCA9IF9fd2VicGFja19yZXF1aXJlX18oNzkpO1xuXHRpZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcblx0Ly8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxuXHR2YXIgdXBkYXRlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKShjb250ZW50LCB7fSk7XG5cdGlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuXHQvLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5cdGlmKGZhbHNlKSB7XG5cdFx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXkudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgwKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgxKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0XHR9KTtcblx0XHR9XG5cdFx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRcdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xuXHR9XG5cbi8qKiovIH0sXG4vKiAyMTYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cdFxuXHQvLyBsb2FkIHRoZSBzdHlsZXNcblx0dmFyIGNvbnRlbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDgyKTtcblx0aWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG5cdC8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cblx0dmFyIHVwZGF0ZSA9IF9fd2VicGFja19yZXF1aXJlX18oMikoY29udGVudCwge30pO1xuXHRpZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcblx0Ly8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuXHRpZihmYWxzZSkge1xuXHRcdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdFx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi90YWJzLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIpO1xuXHRcdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdFx0fSk7XG5cdFx0fVxuXHRcdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0XHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcblx0fVxuXG4vKioqLyB9LFxuLyogMjE3ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsLCBwcm9jZXNzKSB7LyohXG5cdCAqIFZ1ZS5qcyB2MS4wLjI2XG5cdCAqIChjKSAyMDE2IEV2YW4gWW91XG5cdCAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cblx0ICovXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdGZ1bmN0aW9uIHNldChvYmosIGtleSwgdmFsKSB7XG5cdCAgaWYgKGhhc093bihvYmosIGtleSkpIHtcblx0ICAgIG9ialtrZXldID0gdmFsO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBpZiAob2JqLl9pc1Z1ZSkge1xuXHQgICAgc2V0KG9iai5fZGF0YSwga2V5LCB2YWwpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgb2IgPSBvYmouX19vYl9fO1xuXHQgIGlmICghb2IpIHtcblx0ICAgIG9ialtrZXldID0gdmFsO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBvYi5jb252ZXJ0KGtleSwgdmFsKTtcblx0ICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgaWYgKG9iLnZtcykge1xuXHQgICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG5cdCAgICAgIHZtLl9wcm94eShrZXkpO1xuXHQgICAgICB2bS5fZGlnZXN0KCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBEZWxldGUgYSBwcm9wZXJ0eSBhbmQgdHJpZ2dlciBjaGFuZ2UgaWYgbmVjZXNzYXJ5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gb2JqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBkZWwob2JqLCBrZXkpIHtcblx0ICBpZiAoIWhhc093bihvYmosIGtleSkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgZGVsZXRlIG9ialtrZXldO1xuXHQgIHZhciBvYiA9IG9iai5fX29iX187XG5cdCAgaWYgKCFvYikge1xuXHQgICAgaWYgKG9iai5faXNWdWUpIHtcblx0ICAgICAgZGVsZXRlIG9iai5fZGF0YVtrZXldO1xuXHQgICAgICBvYmouX2RpZ2VzdCgpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICBvYi5kZXAubm90aWZ5KCk7XG5cdCAgaWYgKG9iLnZtcykge1xuXHQgICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG5cdCAgICAgIHZtLl91bnByb3h5KGtleSk7XG5cdCAgICAgIHZtLl9kaWdlc3QoKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cdC8qKlxuXHQgKiBDaGVjayB3aGV0aGVyIHRoZSBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0eS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaGFzT3duKG9iaiwga2V5KSB7XG5cdCAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIGxpdGVyYWwgdmFsdWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHR2YXIgbGl0ZXJhbFZhbHVlUkUgPSAvXlxccz8odHJ1ZXxmYWxzZXwtP1tcXGRcXC5dK3wnW14nXSonfFwiW15cIl0qXCIpXFxzPyQvO1xuXHRcblx0ZnVuY3Rpb24gaXNMaXRlcmFsKGV4cCkge1xuXHQgIHJldHVybiBsaXRlcmFsVmFsdWVSRS50ZXN0KGV4cCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIHN0cmluZyBzdGFydHMgd2l0aCAkIG9yIF9cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzUmVzZXJ2ZWQoc3RyKSB7XG5cdCAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7XG5cdCAgcmV0dXJuIGMgPT09IDB4MjQgfHwgYyA9PT0gMHg1Rjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEd1YXJkIHRleHQgb3V0cHV0LCBtYWtlIHN1cmUgdW5kZWZpbmVkIG91dHB1dHNcblx0ICogZW1wdHkgc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIF90b1N0cmluZyh2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZS50b1N0cmluZygpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgYW5kIGNvbnZlcnQgcG9zc2libGUgbnVtZXJpYyBzdHJpbmdzIHRvIG51bWJlcnNcblx0ICogYmVmb3JlIHNldHRpbmcgYmFjayB0byBkYXRhXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7KnxOdW1iZXJ9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcblx0ICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcblx0ICAgIHJldHVybiBpc05hTihwYXJzZWQpID8gdmFsdWUgOiBwYXJzZWQ7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBzdHJpbmcgYm9vbGVhbiBsaXRlcmFscyBpbnRvIHJlYWwgYm9vbGVhbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7KnxCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRvQm9vbGVhbih2YWx1ZSkge1xuXHQgIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnID8gdHJ1ZSA6IHZhbHVlID09PSAnZmFsc2UnID8gZmFsc2UgOiB2YWx1ZTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nIHwgZmFsc2V9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc3RyaXBRdW90ZXMoc3RyKSB7XG5cdCAgdmFyIGEgPSBzdHIuY2hhckNvZGVBdCgwKTtcblx0ICB2YXIgYiA9IHN0ci5jaGFyQ29kZUF0KHN0ci5sZW5ndGggLSAxKTtcblx0ICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KSA/IHN0ci5zbGljZSgxLCAtMSkgOiBzdHI7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDYW1lbGl6ZSBhIGh5cGhlbi1kZWxtaXRlZCBzdHJpbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xuXHRcblx0ZnVuY3Rpb24gY2FtZWxpemUoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIHRvVXBwZXIpO1xuXHR9XG5cdFxuXHRmdW5jdGlvbiB0b1VwcGVyKF8sIGMpIHtcblx0ICByZXR1cm4gYyA/IGMudG9VcHBlckNhc2UoKSA6ICcnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGh5cGhlbmF0ZVJFID0gLyhbYS16XFxkXSkoW0EtWl0pL2c7XG5cdFxuXHRmdW5jdGlvbiBoeXBoZW5hdGUoc3RyKSB7XG5cdCAgcmV0dXJuIHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29udmVydHMgaHlwaGVuL3VuZGVyc2NvcmUvc2xhc2ggZGVsaW1pdGVyZWQgbmFtZXMgaW50b1xuXHQgKiBjYW1lbGl6ZWQgY2xhc3NOYW1lcy5cblx0ICpcblx0ICogZS5nLiBteS1jb21wb25lbnQgPT4gTXlDb21wb25lbnRcblx0ICogICAgICBzb21lX2Vsc2UgICAgPT4gU29tZUVsc2Vcblx0ICogICAgICBzb21lL2NvbXAgICAgPT4gU29tZUNvbXBcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0dmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9cXC9dKShcXHcpL2c7XG5cdFxuXHRmdW5jdGlvbiBjbGFzc2lmeShzdHIpIHtcblx0ICByZXR1cm4gc3RyLnJlcGxhY2UoY2xhc3NpZnlSRSwgdG9VcHBlcik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTaW1wbGUgYmluZCwgZmFzdGVyIHRoYW4gbmF0aXZlXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYmluZChmbiwgY3R4KSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG5cdCAgICB2YXIgbCA9IGFyZ3VtZW50cy5sZW5ndGg7XG5cdCAgICByZXR1cm4gbCA/IGwgPiAxID8gZm4uYXBwbHkoY3R4LCBhcmd1bWVudHMpIDogZm4uY2FsbChjdHgsIGEpIDogZm4uY2FsbChjdHgpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb252ZXJ0IGFuIEFycmF5LWxpa2Ugb2JqZWN0IHRvIGEgcmVhbCBBcnJheS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheS1saWtlfSBsaXN0XG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRdIC0gc3RhcnQgaW5kZXhcblx0ICogQHJldHVybiB7QXJyYXl9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdG9BcnJheShsaXN0LCBzdGFydCkge1xuXHQgIHN0YXJ0ID0gc3RhcnQgfHwgMDtcblx0ICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7XG5cdCAgdmFyIHJldCA9IG5ldyBBcnJheShpKTtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07XG5cdCAgfVxuXHQgIHJldHVybiByZXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSB0b1xuXHQgKiBAcGFyYW0ge09iamVjdH0gZnJvbVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGV4dGVuZCh0bywgZnJvbSkge1xuXHQgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZnJvbSk7XG5cdCAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICB0b1trZXlzW2ldXSA9IGZyb21ba2V5c1tpXV07XG5cdCAgfVxuXHQgIHJldHVybiB0bztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFF1aWNrIG9iamVjdCBjaGVjayAtIHRoaXMgaXMgcHJpbWFyaWx5IHVzZWQgdG8gdGVsbFxuXHQgKiBPYmplY3RzIGZyb20gcHJpbWl0aXZlIHZhbHVlcyB3aGVuIHdlIGtub3cgdGhlIHZhbHVlXG5cdCAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSBvYmpcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBpc09iamVjdChvYmopIHtcblx0ICByZXR1cm4gb2JqICE9PSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuXHQgKiBmb3IgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdHZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cdHZhciBPQkpFQ1RfU1RSSU5HID0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cdFxuXHRmdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuXHQgIHJldHVybiB0b1N0cmluZy5jYWxsKG9iaikgPT09IE9CSkVDVF9TVFJJTkc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcnJheSB0eXBlIGNoZWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IG9ialxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdHZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblx0XG5cdC8qKlxuXHQgKiBEZWZpbmUgYSBwcm9wZXJ0eS5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW2VudW1lcmFibGVdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVmKG9iaiwga2V5LCB2YWwsIGVudW1lcmFibGUpIHtcblx0ICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcblx0ICAgIHZhbHVlOiB2YWwsXG5cdCAgICBlbnVtZXJhYmxlOiAhIWVudW1lcmFibGUsXG5cdCAgICB3cml0YWJsZTogdHJ1ZSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGVib3VuY2UgYSBmdW5jdGlvbiBzbyBpdCBvbmx5IGdldHMgY2FsbGVkIGFmdGVyIHRoZVxuXHQgKiBpbnB1dCBzdG9wcyBhcnJpdmluZyBhZnRlciB0aGUgZ2l2ZW4gd2FpdCBwZXJpb2QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcblx0ICogQHBhcmFtIHtOdW1iZXJ9IHdhaXRcblx0ICogQHJldHVybiB7RnVuY3Rpb259IC0gdGhlIGRlYm91bmNlZCBmdW5jdGlvblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIF9kZWJvdW5jZShmdW5jLCB3YWl0KSB7XG5cdCAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuXHQgIHZhciBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuXHQgICAgdmFyIGxhc3QgPSBEYXRlLm5vdygpIC0gdGltZXN0YW1wO1xuXHQgICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuXHQgICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGltZW91dCA9IG51bGw7XG5cdCAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG5cdCAgICAgIGlmICghdGltZW91dCkgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcblx0ICAgIGNvbnRleHQgPSB0aGlzO1xuXHQgICAgYXJncyA9IGFyZ3VtZW50cztcblx0ICAgIHRpbWVzdGFtcCA9IERhdGUubm93KCk7XG5cdCAgICBpZiAoIXRpbWVvdXQpIHtcblx0ICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHJlc3VsdDtcblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWFudWFsIGluZGV4T2YgYmVjYXVzZSBpdCdzIHNsaWdodGx5IGZhc3RlciB0aGFuXG5cdCAqIG5hdGl2ZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyXG5cdCAqIEBwYXJhbSB7Kn0gb2JqXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5kZXhPZihhcnIsIG9iaikge1xuXHQgIHZhciBpID0gYXJyLmxlbmd0aDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpO1xuXHQgIH1cblx0ICByZXR1cm4gLTE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNYWtlIGEgY2FuY2VsbGFibGUgdmVyc2lvbiBvZiBhbiBhc3luYyBjYWxsYmFjay5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2FuY2VsbGFibGUoZm4pIHtcblx0ICB2YXIgY2IgPSBmdW5jdGlvbiBjYigpIHtcblx0ICAgIGlmICghY2IuY2FuY2VsbGVkKSB7XG5cdCAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgfVxuXHQgIH07XG5cdCAgY2IuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuXHQgICAgY2IuY2FuY2VsbGVkID0gdHJ1ZTtcblx0ICB9O1xuXHQgIHJldHVybiBjYjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxuXHQgKiBpZiB0aGV5IGFyZSBwbGFpbiBvYmplY3RzLCBkbyB0aGV5IGhhdmUgdGhlIHNhbWUgc2hhcGU/XG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gYVxuXHQgKiBAcGFyYW0geyp9IGJcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcblx0ICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cblx0ICByZXR1cm4gYSA9PSBiIHx8IChpc09iamVjdChhKSAmJiBpc09iamVjdChiKSA/IEpTT04uc3RyaW5naWZ5KGEpID09PSBKU09OLnN0cmluZ2lmeShiKSA6IGZhbHNlKTtcblx0ICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xuXHR9XG5cdFxuXHR2YXIgaGFzUHJvdG8gPSAoJ19fcHJvdG9fXycgaW4ge30pO1xuXHRcblx0Ly8gQnJvd3NlciBlbnZpcm9ubWVudCBzbmlmZmluZ1xuXHR2YXIgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdykgIT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXHRcblx0Ly8gZGV0ZWN0IGRldnRvb2xzXG5cdHZhciBkZXZ0b29scyA9IGluQnJvd3NlciAmJiB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblx0XG5cdC8vIFVBIHNuaWZmaW5nIGZvciB3b3JraW5nIGFyb3VuZCBicm93c2VyLXNwZWNpZmljIHF1aXJrc1xuXHR2YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcblx0dmFyIGlzSUUgPSBVQSAmJiBVQS5pbmRleE9mKCd0cmlkZW50JykgPiAwO1xuXHR2YXIgaXNJRTkgPSBVQSAmJiBVQS5pbmRleE9mKCdtc2llIDkuMCcpID4gMDtcblx0dmFyIGlzQW5kcm9pZCA9IFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDA7XG5cdHZhciBpc0lvcyA9IFVBICYmIC8oaXBob25lfGlwYWR8aXBvZHxpb3MpL2kudGVzdChVQSk7XG5cdHZhciBpb3NWZXJzaW9uTWF0Y2ggPSBpc0lvcyAmJiBVQS5tYXRjaCgvb3MgKFtcXGRfXSspLyk7XG5cdHZhciBpb3NWZXJzaW9uID0gaW9zVmVyc2lvbk1hdGNoICYmIGlvc1ZlcnNpb25NYXRjaFsxXS5zcGxpdCgnXycpO1xuXHRcblx0Ly8gZGV0ZWN0aW5nIGlPUyBVSVdlYlZpZXcgYnkgaW5kZXhlZERCXG5cdHZhciBoYXNNdXRhdGlvbk9ic2VydmVyQnVnID0gaW9zVmVyc2lvbiAmJiBOdW1iZXIoaW9zVmVyc2lvblswXSkgPj0gOSAmJiBOdW1iZXIoaW9zVmVyc2lvblsxXSkgPj0gMyAmJiAhd2luZG93LmluZGV4ZWREQjtcblx0XG5cdHZhciB0cmFuc2l0aW9uUHJvcCA9IHVuZGVmaW5lZDtcblx0dmFyIHRyYW5zaXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcblx0dmFyIGFuaW1hdGlvblByb3AgPSB1bmRlZmluZWQ7XG5cdHZhciBhbmltYXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcblx0XG5cdC8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmdcblx0aWYgKGluQnJvd3NlciAmJiAhaXNJRTkpIHtcblx0ICB2YXIgaXNXZWJraXRUcmFucyA9IHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG5cdCAgdmFyIGlzV2Via2l0QW5pbSA9IHdpbmRvdy5vbmFuaW1hdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCAhPT0gdW5kZWZpbmVkO1xuXHQgIHRyYW5zaXRpb25Qcm9wID0gaXNXZWJraXRUcmFucyA/ICdXZWJraXRUcmFuc2l0aW9uJyA6ICd0cmFuc2l0aW9uJztcblx0ICB0cmFuc2l0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdFRyYW5zID8gJ3dlYmtpdFRyYW5zaXRpb25FbmQnIDogJ3RyYW5zaXRpb25lbmQnO1xuXHQgIGFuaW1hdGlvblByb3AgPSBpc1dlYmtpdEFuaW0gPyAnV2Via2l0QW5pbWF0aW9uJyA6ICdhbmltYXRpb24nO1xuXHQgIGFuaW1hdGlvbkVuZEV2ZW50ID0gaXNXZWJraXRBbmltID8gJ3dlYmtpdEFuaW1hdGlvbkVuZCcgOiAnYW5pbWF0aW9uZW5kJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlZmVyIGEgdGFzayB0byBleGVjdXRlIGl0IGFzeW5jaHJvbm91c2x5LiBJZGVhbGx5IHRoaXNcblx0ICogc2hvdWxkIGJlIGV4ZWN1dGVkIGFzIGEgbWljcm90YXNrLCBzbyB3ZSBsZXZlcmFnZVxuXHQgKiBNdXRhdGlvbk9ic2VydmVyIGlmIGl0J3MgYXZhaWxhYmxlLCBhbmQgZmFsbGJhY2sgdG9cblx0ICogc2V0VGltZW91dCgwKS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICogQHBhcmFtIHtPYmplY3R9IGN0eFxuXHQgKi9cblx0XG5cdHZhciBuZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIGNhbGxiYWNrcyA9IFtdO1xuXHQgIHZhciBwZW5kaW5nID0gZmFsc2U7XG5cdCAgdmFyIHRpbWVyRnVuYztcblx0ICBmdW5jdGlvbiBuZXh0VGlja0hhbmRsZXIoKSB7XG5cdCAgICBwZW5kaW5nID0gZmFsc2U7XG5cdCAgICB2YXIgY29waWVzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuXHQgICAgY2FsbGJhY2tzID0gW107XG5cdCAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvcGllcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICBjb3BpZXNbaV0oKTtcblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICh0eXBlb2YgTXV0YXRpb25PYnNlcnZlciAhPT0gJ3VuZGVmaW5lZCcgJiYgIWhhc011dGF0aW9uT2JzZXJ2ZXJCdWcpIHtcblx0ICAgIHZhciBjb3VudGVyID0gMTtcblx0ICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG5leHRUaWNrSGFuZGxlcik7XG5cdCAgICB2YXIgdGV4dE5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjb3VudGVyKTtcblx0ICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHtcblx0ICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuXHQgICAgfSk7XG5cdCAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGNvdW50ZXIgPSAoY291bnRlciArIDEpICUgMjtcblx0ICAgICAgdGV4dE5vZGUuZGF0YSA9IGNvdW50ZXI7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyB3ZWJwYWNrIGF0dGVtcHRzIHRvIGluamVjdCBhIHNoaW0gZm9yIHNldEltbWVkaWF0ZVxuXHQgICAgLy8gaWYgaXQgaXMgdXNlZCBhcyBhIGdsb2JhbCwgc28gd2UgaGF2ZSB0byB3b3JrIGFyb3VuZCB0aGF0IHRvXG5cdCAgICAvLyBhdm9pZCBidW5kbGluZyB1bm5lY2Vzc2FyeSBjb2RlLlxuXHQgICAgdmFyIGNvbnRleHQgPSBpbkJyb3dzZXIgPyB3aW5kb3cgOiB0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbCA6IHt9O1xuXHQgICAgdGltZXJGdW5jID0gY29udGV4dC5zZXRJbW1lZGlhdGUgfHwgc2V0VGltZW91dDtcblx0ICB9XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIChjYiwgY3R4KSB7XG5cdCAgICB2YXIgZnVuYyA9IGN0eCA/IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgY2IuY2FsbChjdHgpO1xuXHQgICAgfSA6IGNiO1xuXHQgICAgY2FsbGJhY2tzLnB1c2goZnVuYyk7XG5cdCAgICBpZiAocGVuZGluZykgcmV0dXJuO1xuXHQgICAgcGVuZGluZyA9IHRydWU7XG5cdCAgICB0aW1lckZ1bmMobmV4dFRpY2tIYW5kbGVyLCAwKTtcblx0ICB9O1xuXHR9KSgpO1xuXHRcblx0dmFyIF9TZXQgPSB1bmRlZmluZWQ7XG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHRpZiAodHlwZW9mIFNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgU2V0LnRvU3RyaW5nKCkubWF0Y2goL25hdGl2ZSBjb2RlLykpIHtcblx0ICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS5cblx0ICBfU2V0ID0gU2V0O1xuXHR9IGVsc2Uge1xuXHQgIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy5cblx0ICBfU2V0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIH07XG5cdCAgX1NldC5wcm90b3R5cGUuaGFzID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgcmV0dXJuIHRoaXMuc2V0W2tleV0gIT09IHVuZGVmaW5lZDtcblx0ICB9O1xuXHQgIF9TZXQucHJvdG90eXBlLmFkZCA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIHRoaXMuc2V0W2tleV0gPSAxO1xuXHQgIH07XG5cdCAgX1NldC5wcm90b3R5cGUuY2xlYXIgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgfTtcblx0fVxuXHRcblx0ZnVuY3Rpb24gQ2FjaGUobGltaXQpIHtcblx0ICB0aGlzLnNpemUgPSAwO1xuXHQgIHRoaXMubGltaXQgPSBsaW1pdDtcblx0ICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSB1bmRlZmluZWQ7XG5cdCAgdGhpcy5fa2V5bWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblx0fVxuXHRcblx0dmFyIHAgPSBDYWNoZS5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogUHV0IDx2YWx1ZT4gaW50byB0aGUgY2FjaGUgYXNzb2NpYXRlZCB3aXRoIDxrZXk+LlxuXHQgKiBSZXR1cm5zIHRoZSBlbnRyeSB3aGljaCB3YXMgcmVtb3ZlZCB0byBtYWtlIHJvb20gZm9yXG5cdCAqIHRoZSBuZXcgZW50cnkuIE90aGVyd2lzZSB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG5cdCAqIChpLmUuIGlmIHRoZXJlIHdhcyBlbm91Z2ggcm9vbSBhbHJlYWR5KS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEByZXR1cm4ge0VudHJ5fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRwLnB1dCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG5cdCAgdmFyIHJlbW92ZWQ7XG5cdFxuXHQgIHZhciBlbnRyeSA9IHRoaXMuZ2V0KGtleSwgdHJ1ZSk7XG5cdCAgaWYgKCFlbnRyeSkge1xuXHQgICAgaWYgKHRoaXMuc2l6ZSA9PT0gdGhpcy5saW1pdCkge1xuXHQgICAgICByZW1vdmVkID0gdGhpcy5zaGlmdCgpO1xuXHQgICAgfVxuXHQgICAgZW50cnkgPSB7XG5cdCAgICAgIGtleToga2V5XG5cdCAgICB9O1xuXHQgICAgdGhpcy5fa2V5bWFwW2tleV0gPSBlbnRyeTtcblx0ICAgIGlmICh0aGlzLnRhaWwpIHtcblx0ICAgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7XG5cdCAgICAgIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5oZWFkID0gZW50cnk7XG5cdCAgICB9XG5cdCAgICB0aGlzLnRhaWwgPSBlbnRyeTtcblx0ICAgIHRoaXMuc2l6ZSsrO1xuXHQgIH1cblx0ICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuXHRcblx0ICByZXR1cm4gcmVtb3ZlZDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBQdXJnZSB0aGUgbGVhc3QgcmVjZW50bHkgdXNlZCAob2xkZXN0KSBlbnRyeSBmcm9tIHRoZVxuXHQgKiBjYWNoZS4gUmV0dXJucyB0aGUgcmVtb3ZlZCBlbnRyeSBvciB1bmRlZmluZWQgaWYgdGhlXG5cdCAqIGNhY2hlIHdhcyBlbXB0eS5cblx0ICovXG5cdFxuXHRwLnNoaWZ0ID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBlbnRyeSA9IHRoaXMuaGVhZDtcblx0ICBpZiAoZW50cnkpIHtcblx0ICAgIHRoaXMuaGVhZCA9IHRoaXMuaGVhZC5uZXdlcjtcblx0ICAgIHRoaXMuaGVhZC5vbGRlciA9IHVuZGVmaW5lZDtcblx0ICAgIGVudHJ5Lm5ld2VyID0gZW50cnkub2xkZXIgPSB1bmRlZmluZWQ7XG5cdCAgICB0aGlzLl9rZXltYXBbZW50cnkua2V5XSA9IHVuZGVmaW5lZDtcblx0ICAgIHRoaXMuc2l6ZS0tO1xuXHQgIH1cblx0ICByZXR1cm4gZW50cnk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IGFuZCByZWdpc3RlciByZWNlbnQgdXNlIG9mIDxrZXk+LiBSZXR1cm5zIHRoZSB2YWx1ZVxuXHQgKiBhc3NvY2lhdGVkIHdpdGggPGtleT4gb3IgdW5kZWZpbmVkIGlmIG5vdCBpbiBjYWNoZS5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJldHVybkVudHJ5XG5cdCAqIEByZXR1cm4ge0VudHJ5fCp9XG5cdCAqL1xuXHRcblx0cC5nZXQgPSBmdW5jdGlvbiAoa2V5LCByZXR1cm5FbnRyeSkge1xuXHQgIHZhciBlbnRyeSA9IHRoaXMuX2tleW1hcFtrZXldO1xuXHQgIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG5cdCAgaWYgKGVudHJ5ID09PSB0aGlzLnRhaWwpIHtcblx0ICAgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG5cdCAgfVxuXHQgIC8vIEhFQUQtLS0tLS0tLS0tLS0tLVRBSUxcblx0ICAvLyAgIDwub2xkZXIgICAubmV3ZXI+XG5cdCAgLy8gIDwtLS0gYWRkIGRpcmVjdGlvbiAtLVxuXHQgIC8vICAgQSAgQiAgQyAgPEQ+ICBFXG5cdCAgaWYgKGVudHJ5Lm5ld2VyKSB7XG5cdCAgICBpZiAoZW50cnkgPT09IHRoaXMuaGVhZCkge1xuXHQgICAgICB0aGlzLmhlYWQgPSBlbnRyeS5uZXdlcjtcblx0ICAgIH1cblx0ICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7IC8vIEMgPC0tIEUuXG5cdCAgfVxuXHQgIGlmIChlbnRyeS5vbGRlcikge1xuXHQgICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjsgLy8gQy4gLS0+IEVcblx0ICB9XG5cdCAgZW50cnkubmV3ZXIgPSB1bmRlZmluZWQ7IC8vIEQgLS14XG5cdCAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7IC8vIEQuIC0tPiBFXG5cdCAgaWYgKHRoaXMudGFpbCkge1xuXHQgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7IC8vIEUuIDwtLSBEXG5cdCAgfVxuXHQgIHRoaXMudGFpbCA9IGVudHJ5O1xuXHQgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG5cdH07XG5cdFxuXHR2YXIgY2FjaGUkMSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0dmFyIGZpbHRlclRva2VuUkUgPSAvW15cXHMnXCJdK3wnW14nXSonfFwiW15cIl0qXCIvZztcblx0dmFyIHJlc2VydmVkQXJnUkUgPSAvXmluJHxeLT9cXGQrLztcblx0XG5cdC8qKlxuXHQgKiBQYXJzZXIgc3RhdGVcblx0ICovXG5cdFxuXHR2YXIgc3RyO1xuXHR2YXIgZGlyO1xuXHR2YXIgYztcblx0dmFyIHByZXY7XG5cdHZhciBpO1xuXHR2YXIgbDtcblx0dmFyIGxhc3RGaWx0ZXJJbmRleDtcblx0dmFyIGluU2luZ2xlO1xuXHR2YXIgaW5Eb3VibGU7XG5cdHZhciBjdXJseTtcblx0dmFyIHNxdWFyZTtcblx0dmFyIHBhcmVuO1xuXHQvKipcblx0ICogUHVzaCBhIGZpbHRlciB0byB0aGUgY3VycmVudCBkaXJlY3RpdmUgb2JqZWN0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHVzaEZpbHRlcigpIHtcblx0ICB2YXIgZXhwID0gc3RyLnNsaWNlKGxhc3RGaWx0ZXJJbmRleCwgaSkudHJpbSgpO1xuXHQgIHZhciBmaWx0ZXI7XG5cdCAgaWYgKGV4cCkge1xuXHQgICAgZmlsdGVyID0ge307XG5cdCAgICB2YXIgdG9rZW5zID0gZXhwLm1hdGNoKGZpbHRlclRva2VuUkUpO1xuXHQgICAgZmlsdGVyLm5hbWUgPSB0b2tlbnNbMF07XG5cdCAgICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcblx0ICAgICAgZmlsdGVyLmFyZ3MgPSB0b2tlbnMuc2xpY2UoMSkubWFwKHByb2Nlc3NGaWx0ZXJBcmcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoZmlsdGVyKSB7XG5cdCAgICAoZGlyLmZpbHRlcnMgPSBkaXIuZmlsdGVycyB8fCBbXSkucHVzaChmaWx0ZXIpO1xuXHQgIH1cblx0ICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGFyZ3VtZW50IGlzIGR5bmFtaWMgYW5kIHN0cmlwIHF1b3Rlcy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGFyZ1xuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvY2Vzc0ZpbHRlckFyZyhhcmcpIHtcblx0ICBpZiAocmVzZXJ2ZWRBcmdSRS50ZXN0KGFyZykpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHZhbHVlOiB0b051bWJlcihhcmcpLFxuXHQgICAgICBkeW5hbWljOiBmYWxzZVxuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMoYXJnKTtcblx0ICAgIHZhciBkeW5hbWljID0gc3RyaXBwZWQgPT09IGFyZztcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIHZhbHVlOiBkeW5hbWljID8gYXJnIDogc3RyaXBwZWQsXG5cdCAgICAgIGR5bmFtaWM6IGR5bmFtaWNcblx0ICAgIH07XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYSBkaXJlY3RpdmUgdmFsdWUgYW5kIGV4dHJhY3QgdGhlIGV4cHJlc3Npb25cblx0ICogYW5kIGl0cyBmaWx0ZXJzIGludG8gYSBkZXNjcmlwdG9yLlxuXHQgKlxuXHQgKiBFeGFtcGxlOlxuXHQgKlxuXHQgKiBcImEgKyAxIHwgdXBwZXJjYXNlXCIgd2lsbCB5aWVsZDpcblx0ICoge1xuXHQgKiAgIGV4cHJlc3Npb246ICdhICsgMScsXG5cdCAqICAgZmlsdGVyczogW1xuXHQgKiAgICAgeyBuYW1lOiAndXBwZXJjYXNlJywgYXJnczogbnVsbCB9XG5cdCAqICAgXVxuXHQgKiB9XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBzXG5cdCAqIEByZXR1cm4ge09iamVjdH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwYXJzZURpcmVjdGl2ZShzKSB7XG5cdCAgdmFyIGhpdCA9IGNhY2hlJDEuZ2V0KHMpO1xuXHQgIGlmIChoaXQpIHtcblx0ICAgIHJldHVybiBoaXQ7XG5cdCAgfVxuXHRcblx0ICAvLyByZXNldCBwYXJzZXIgc3RhdGVcblx0ICBzdHIgPSBzO1xuXHQgIGluU2luZ2xlID0gaW5Eb3VibGUgPSBmYWxzZTtcblx0ICBjdXJseSA9IHNxdWFyZSA9IHBhcmVuID0gMDtcblx0ICBsYXN0RmlsdGVySW5kZXggPSAwO1xuXHQgIGRpciA9IHt9O1xuXHRcblx0ICBmb3IgKGkgPSAwLCBsID0gc3RyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgcHJldiA9IGM7XG5cdCAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG5cdCAgICBpZiAoaW5TaW5nbGUpIHtcblx0ICAgICAgLy8gY2hlY2sgc2luZ2xlIHF1b3RlXG5cdCAgICAgIGlmIChjID09PSAweDI3ICYmIHByZXYgIT09IDB4NUMpIGluU2luZ2xlID0gIWluU2luZ2xlO1xuXHQgICAgfSBlbHNlIGlmIChpbkRvdWJsZSkge1xuXHQgICAgICAvLyBjaGVjayBkb3VibGUgcXVvdGVcblx0ICAgICAgaWYgKGMgPT09IDB4MjIgJiYgcHJldiAhPT0gMHg1QykgaW5Eb3VibGUgPSAhaW5Eb3VibGU7XG5cdCAgICB9IGVsc2UgaWYgKGMgPT09IDB4N0MgJiYgLy8gcGlwZVxuXHQgICAgc3RyLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmIHN0ci5jaGFyQ29kZUF0KGkgLSAxKSAhPT0gMHg3Qykge1xuXHQgICAgICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuXHQgICAgICAgIC8vIGZpcnN0IGZpbHRlciwgZW5kIG9mIGV4cHJlc3Npb25cblx0ICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcblx0ICAgICAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgLy8gYWxyZWFkeSBoYXMgZmlsdGVyXG5cdCAgICAgICAgcHVzaEZpbHRlcigpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBzd2l0Y2ggKGMpIHtcblx0ICAgICAgICBjYXNlIDB4MjI6XG5cdCAgICAgICAgICBpbkRvdWJsZSA9IHRydWU7YnJlYWs7IC8vIFwiXG5cdCAgICAgICAgY2FzZSAweDI3OlxuXHQgICAgICAgICAgaW5TaW5nbGUgPSB0cnVlO2JyZWFrOyAvLyAnXG5cdCAgICAgICAgY2FzZSAweDI4OlxuXHQgICAgICAgICAgcGFyZW4rKzticmVhazsgLy8gKFxuXHQgICAgICAgIGNhc2UgMHgyOTpcblx0ICAgICAgICAgIHBhcmVuLS07YnJlYWs7IC8vIClcblx0ICAgICAgICBjYXNlIDB4NUI6XG5cdCAgICAgICAgICBzcXVhcmUrKzticmVhazsgLy8gW1xuXHQgICAgICAgIGNhc2UgMHg1RDpcblx0ICAgICAgICAgIHNxdWFyZS0tO2JyZWFrOyAvLyBdXG5cdCAgICAgICAgY2FzZSAweDdCOlxuXHQgICAgICAgICAgY3VybHkrKzticmVhazsgLy8ge1xuXHQgICAgICAgIGNhc2UgMHg3RDpcblx0ICAgICAgICAgIGN1cmx5LS07YnJlYWs7IC8vIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcblx0ICAgIGRpci5leHByZXNzaW9uID0gc3RyLnNsaWNlKDAsIGkpLnRyaW0oKTtcblx0ICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuXHQgICAgcHVzaEZpbHRlcigpO1xuXHQgIH1cblx0XG5cdCAgY2FjaGUkMS5wdXQocywgZGlyKTtcblx0ICByZXR1cm4gZGlyO1xuXHR9XG5cdFxuXHR2YXIgZGlyZWN0aXZlID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgcGFyc2VEaXJlY3RpdmU6IHBhcnNlRGlyZWN0aXZlXG5cdH0pO1xuXHRcblx0dmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xuXHR2YXIgY2FjaGUgPSB1bmRlZmluZWQ7XG5cdHZhciB0YWdSRSA9IHVuZGVmaW5lZDtcblx0dmFyIGh0bWxSRSA9IHVuZGVmaW5lZDtcblx0LyoqXG5cdCAqIEVzY2FwZSBhIHN0cmluZyBzbyBpdCBjYW4gYmUgdXNlZCBpbiBhIFJlZ0V4cFxuXHQgKiBjb25zdHJ1Y3Rvci5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHN0clxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGVzY2FwZVJlZ2V4KHN0cikge1xuXHQgIHJldHVybiBzdHIucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XG5cdH1cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGVSZWdleCgpIHtcblx0ICB2YXIgb3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzBdKTtcblx0ICB2YXIgY2xvc2UgPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1sxXSk7XG5cdCAgdmFyIHVuc2FmZU9wZW4gPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1swXSk7XG5cdCAgdmFyIHVuc2FmZUNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMV0pO1xuXHQgIHRhZ1JFID0gbmV3IFJlZ0V4cCh1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICd8JyArIG9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIGNsb3NlLCAnZycpO1xuXHQgIGh0bWxSRSA9IG5ldyBSZWdFeHAoJ14nICsgdW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnJCcpO1xuXHQgIC8vIHJlc2V0IGNhY2hlXG5cdCAgY2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhIHRlbXBsYXRlIHRleHQgc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgdG9rZW5zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHQgKiBAcmV0dXJuIHtBcnJheTxPYmplY3Q+IHwgbnVsbH1cblx0ICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHR5cGVcblx0ICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHZhbHVlXG5cdCAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2h0bWxdXG5cdCAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW29uZVRpbWVdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VUZXh0KHRleHQpIHtcblx0ICBpZiAoIWNhY2hlKSB7XG5cdCAgICBjb21waWxlUmVnZXgoKTtcblx0ICB9XG5cdCAgdmFyIGhpdCA9IGNhY2hlLmdldCh0ZXh0KTtcblx0ICBpZiAoaGl0KSB7XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0ICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHtcblx0ICAgIHJldHVybiBudWxsO1xuXHQgIH1cblx0ICB2YXIgdG9rZW5zID0gW107XG5cdCAgdmFyIGxhc3RJbmRleCA9IHRhZ1JFLmxhc3RJbmRleCA9IDA7XG5cdCAgdmFyIG1hdGNoLCBpbmRleCwgaHRtbCwgdmFsdWUsIGZpcnN0LCBvbmVUaW1lO1xuXHQgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgd2hpbGUgKG1hdGNoID0gdGFnUkUuZXhlYyh0ZXh0KSkge1xuXHQgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgaW5kZXggPSBtYXRjaC5pbmRleDtcblx0ICAgIC8vIHB1c2ggdGV4dCB0b2tlblxuXHQgICAgaWYgKGluZGV4ID4gbGFzdEluZGV4KSB7XG5cdCAgICAgIHRva2Vucy5wdXNoKHtcblx0ICAgICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgsIGluZGV4KVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICAgIC8vIHRhZyB0b2tlblxuXHQgICAgaHRtbCA9IGh0bWxSRS50ZXN0KG1hdGNoWzBdKTtcblx0ICAgIHZhbHVlID0gaHRtbCA/IG1hdGNoWzFdIDogbWF0Y2hbMl07XG5cdCAgICBmaXJzdCA9IHZhbHVlLmNoYXJDb2RlQXQoMCk7XG5cdCAgICBvbmVUaW1lID0gZmlyc3QgPT09IDQyOyAvLyAqXG5cdCAgICB2YWx1ZSA9IG9uZVRpbWUgPyB2YWx1ZS5zbGljZSgxKSA6IHZhbHVlO1xuXHQgICAgdG9rZW5zLnB1c2goe1xuXHQgICAgICB0YWc6IHRydWUsXG5cdCAgICAgIHZhbHVlOiB2YWx1ZS50cmltKCksXG5cdCAgICAgIGh0bWw6IGh0bWwsXG5cdCAgICAgIG9uZVRpbWU6IG9uZVRpbWVcblx0ICAgIH0pO1xuXHQgICAgbGFzdEluZGV4ID0gaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG5cdCAgfVxuXHQgIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuXHQgICAgdG9rZW5zLnB1c2goe1xuXHQgICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgpXG5cdCAgICB9KTtcblx0ICB9XG5cdCAgY2FjaGUucHV0KHRleHQsIHRva2Vucyk7XG5cdCAgcmV0dXJuIHRva2Vucztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCBhIGxpc3Qgb2YgdG9rZW5zIGludG8gYW4gZXhwcmVzc2lvbi5cblx0ICogZS5nLiB0b2tlbnMgcGFyc2VkIGZyb20gJ2Ege3tifX0gYycgY2FuIGJlIHNlcmlhbGl6ZWRcblx0ICogaW50byBvbmUgc2luZ2xlIGV4cHJlc3Npb24gYXMgJ1wiYSBcIiArIGIgKyBcIiBjXCInLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRva2Vuc1RvRXhwKHRva2Vucywgdm0pIHtcblx0ICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcblx0ICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuXHQgICAgICByZXR1cm4gZm9ybWF0VG9rZW4odG9rZW4sIHZtKTtcblx0ICAgIH0pLmpvaW4oJysnKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2Vuc1swXSwgdm0sIHRydWUpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCBhIHNpbmdsZSB0b2tlbi5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gW3NpbmdsZV1cblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFRva2VuKHRva2VuLCB2bSwgc2luZ2xlKSB7XG5cdCAgcmV0dXJuIHRva2VuLnRhZyA/IHRva2VuLm9uZVRpbWUgJiYgdm0gPyAnXCInICsgdm0uJGV2YWwodG9rZW4udmFsdWUpICsgJ1wiJyA6IGlubGluZUZpbHRlcnModG9rZW4udmFsdWUsIHNpbmdsZSkgOiAnXCInICsgdG9rZW4udmFsdWUgKyAnXCInO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9yIGFuIGF0dHJpYnV0ZSB3aXRoIG11bHRpcGxlIGludGVycG9sYXRpb24gdGFncyxcblx0ICogZS5nLiBhdHRyPVwic29tZS17e3RoaW5nIHwgZmlsdGVyfX1cIiwgaW4gb3JkZXIgdG8gY29tYmluZVxuXHQgKiB0aGUgd2hvbGUgdGhpbmcgaW50byBhIHNpbmdsZSB3YXRjaGFibGUgZXhwcmVzc2lvbiwgd2Vcblx0ICogaGF2ZSB0byBpbmxpbmUgdGhvc2UgZmlsdGVycy4gVGhpcyBmdW5jdGlvbiBkb2VzIGV4YWN0bHlcblx0ICogdGhhdC4gVGhpcyBpcyBhIGJpdCBoYWNreSBidXQgaXQgYXZvaWRzIGhlYXZ5IGNoYW5nZXNcblx0ICogdG8gZGlyZWN0aXZlIHBhcnNlciBhbmQgd2F0Y2hlciBtZWNoYW5pc20uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHBhcmFtIHtCb29sZWFufSBzaW5nbGVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdHZhciBmaWx0ZXJSRSA9IC9bXnxdXFx8W158XS87XG5cdGZ1bmN0aW9uIGlubGluZUZpbHRlcnMoZXhwLCBzaW5nbGUpIHtcblx0ICBpZiAoIWZpbHRlclJFLnRlc3QoZXhwKSkge1xuXHQgICAgcmV0dXJuIHNpbmdsZSA/IGV4cCA6ICcoJyArIGV4cCArICcpJztcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKGV4cCk7XG5cdCAgICBpZiAoIWRpci5maWx0ZXJzKSB7XG5cdCAgICAgIHJldHVybiAnKCcgKyBleHAgKyAnKSc7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gJ3RoaXMuX2FwcGx5RmlsdGVycygnICsgZGlyLmV4cHJlc3Npb24gKyAvLyB2YWx1ZVxuXHQgICAgICAnLG51bGwsJyArIC8vIG9sZFZhbHVlIChudWxsIGZvciByZWFkKVxuXHQgICAgICBKU09OLnN0cmluZ2lmeShkaXIuZmlsdGVycykgKyAvLyBmaWx0ZXIgZGVzY3JpcHRvcnNcblx0ICAgICAgJyxmYWxzZSknOyAvLyB3cml0ZT9cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB0ZXh0ID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgY29tcGlsZVJlZ2V4OiBjb21waWxlUmVnZXgsXG5cdCAgcGFyc2VUZXh0OiBwYXJzZVRleHQsXG5cdCAgdG9rZW5zVG9FeHA6IHRva2Vuc1RvRXhwXG5cdH0pO1xuXHRcblx0dmFyIGRlbGltaXRlcnMgPSBbJ3t7JywgJ319J107XG5cdHZhciB1bnNhZmVEZWxpbWl0ZXJzID0gWyd7e3snLCAnfX19J107XG5cdFxuXHR2YXIgY29uZmlnID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHByaW50IGRlYnVnIG1lc3NhZ2VzLlxuXHQgICAqIEFsc28gZW5hYmxlcyBzdGFjayB0cmFjZSBmb3Igd2FybmluZ3MuXG5cdCAgICpcblx0ICAgKiBAdHlwZSB7Qm9vbGVhbn1cblx0ICAgKi9cblx0XG5cdCAgZGVidWc6IGZhbHNlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0Jvb2xlYW59XG5cdCAgICovXG5cdFxuXHQgIHNpbGVudDogZmFsc2UsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gdXNlIGFzeW5jIHJlbmRlcmluZy5cblx0ICAgKi9cblx0XG5cdCAgYXN5bmM6IHRydWUsXG5cdFxuXHQgIC8qKlxuXHQgICAqIFdoZXRoZXIgdG8gd2FybiBhZ2FpbnN0IGVycm9ycyBjYXVnaHQgd2hlbiBldmFsdWF0aW5nXG5cdCAgICogZXhwcmVzc2lvbnMuXG5cdCAgICovXG5cdFxuXHQgIHdhcm5FeHByZXNzaW9uRXJyb3JzOiB0cnVlLFxuXHRcblx0ICAvKipcblx0ICAgKiBXaGV0aGVyIHRvIGFsbG93IGRldnRvb2xzIGluc3BlY3Rpb24uXG5cdCAgICogRGlzYWJsZWQgYnkgZGVmYXVsdCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cblx0ICAgKi9cblx0XG5cdCAgZGV2dG9vbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG5cdFxuXHQgIC8qKlxuXHQgICAqIEludGVybmFsIGZsYWcgdG8gaW5kaWNhdGUgdGhlIGRlbGltaXRlcnMgaGF2ZSBiZWVuXG5cdCAgICogY2hhbmdlZC5cblx0ICAgKlxuXHQgICAqIEB0eXBlIHtCb29sZWFufVxuXHQgICAqL1xuXHRcblx0ICBfZGVsaW1pdGVyc0NoYW5nZWQ6IHRydWUsXG5cdFxuXHQgIC8qKlxuXHQgICAqIExpc3Qgb2YgYXNzZXQgdHlwZXMgdGhhdCBhIGNvbXBvbmVudCBjYW4gb3duLlxuXHQgICAqXG5cdCAgICogQHR5cGUge0FycmF5fVxuXHQgICAqL1xuXHRcblx0ICBfYXNzZXRUeXBlczogWydjb21wb25lbnQnLCAnZGlyZWN0aXZlJywgJ2VsZW1lbnREaXJlY3RpdmUnLCAnZmlsdGVyJywgJ3RyYW5zaXRpb24nLCAncGFydGlhbCddLFxuXHRcblx0ICAvKipcblx0ICAgKiBwcm9wIGJpbmRpbmcgbW9kZXNcblx0ICAgKi9cblx0XG5cdCAgX3Byb3BCaW5kaW5nTW9kZXM6IHtcblx0ICAgIE9ORV9XQVk6IDAsXG5cdCAgICBUV09fV0FZOiAxLFxuXHQgICAgT05FX1RJTUU6IDJcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBNYXggY2lyY3VsYXIgdXBkYXRlcyBhbGxvd2VkIGluIGEgYmF0Y2hlciBmbHVzaCBjeWNsZS5cblx0ICAgKi9cblx0XG5cdCAgX21heFVwZGF0ZUNvdW50OiAxMDBcblx0XG5cdH0sIHtcblx0ICBkZWxpbWl0ZXJzOiB7IC8qKlxuXHQgICAgICAgICAgICAgICAgICogSW50ZXJwb2xhdGlvbiBkZWxpbWl0ZXJzLiBDaGFuZ2luZyB0aGVzZSB3b3VsZCB0cmlnZ2VyXG5cdCAgICAgICAgICAgICAgICAgKiB0aGUgdGV4dCBwYXJzZXIgdG8gcmUtY29tcGlsZSB0aGUgcmVndWxhciBleHByZXNzaW9ucy5cblx0ICAgICAgICAgICAgICAgICAqXG5cdCAgICAgICAgICAgICAgICAgKiBAdHlwZSB7QXJyYXk8U3RyaW5nPn1cblx0ICAgICAgICAgICAgICAgICAqL1xuXHRcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gZGVsaW1pdGVycztcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcblx0ICAgICAgZGVsaW1pdGVycyA9IHZhbDtcblx0ICAgICAgY29tcGlsZVJlZ2V4KCk7XG5cdCAgICB9LFxuXHQgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgZW51bWVyYWJsZTogdHJ1ZVxuXHQgIH0sXG5cdCAgdW5zYWZlRGVsaW1pdGVyczoge1xuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB1bnNhZmVEZWxpbWl0ZXJzO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuXHQgICAgICB1bnNhZmVEZWxpbWl0ZXJzID0gdmFsO1xuXHQgICAgICBjb21waWxlUmVnZXgoKTtcblx0ICAgIH0sXG5cdCAgICBjb25maWd1cmFibGU6IHRydWUsXG5cdCAgICBlbnVtZXJhYmxlOiB0cnVlXG5cdCAgfVxuXHR9KTtcblx0XG5cdHZhciB3YXJuID0gdW5kZWZpbmVkO1xuXHR2YXIgZm9ybWF0Q29tcG9uZW50TmFtZSA9IHVuZGVmaW5lZDtcblx0XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgKGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xuXHRcblx0ICAgIHdhcm4gPSBmdW5jdGlvbiAobXNnLCB2bSkge1xuXHQgICAgICBpZiAoaGFzQ29uc29sZSAmJiAhY29uZmlnLnNpbGVudCkge1xuXHQgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tWdWUgd2Fybl06ICcgKyBtc2cgKyAodm0gPyBmb3JtYXRDb21wb25lbnROYW1lKHZtKSA6ICcnKSk7XG5cdCAgICAgIH1cblx0ICAgIH07XG5cdFxuXHQgICAgZm9ybWF0Q29tcG9uZW50TmFtZSA9IGZ1bmN0aW9uICh2bSkge1xuXHQgICAgICB2YXIgbmFtZSA9IHZtLl9pc1Z1ZSA/IHZtLiRvcHRpb25zLm5hbWUgOiB2bS5uYW1lO1xuXHQgICAgICByZXR1cm4gbmFtZSA/ICcgKGZvdW5kIGluIGNvbXBvbmVudDogPCcgKyBoeXBoZW5hdGUobmFtZSkgKyAnPiknIDogJyc7XG5cdCAgICB9O1xuXHQgIH0pKCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBcHBlbmQgd2l0aCB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXBwZW5kV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG5cdCAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH0sIHZtLCBjYik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBJbnNlcnRCZWZvcmUgd2l0aCB0cmFuc2l0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYmVmb3JlV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldCk7XG5cdCAgfSwgdm0sIGNiKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSB3aXRoIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVXaXRoVHJhbnNpdGlvbihlbCwgdm0sIGNiKSB7XG5cdCAgYXBwbHlUcmFuc2l0aW9uKGVsLCAtMSwgZnVuY3Rpb24gKCkge1xuXHQgICAgcmVtb3ZlKGVsKTtcblx0ICB9LCB2bSwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQXBwbHkgdHJhbnNpdGlvbnMgd2l0aCBhbiBvcGVyYXRpb24gY2FsbGJhY2suXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtOdW1iZXJ9IGRpcmVjdGlvblxuXHQgKiAgICAgICAgICAgICAgICAgIDE6IGVudGVyXG5cdCAqICAgICAgICAgICAgICAgICAtMTogbGVhdmVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSB0aGUgYWN0dWFsIERPTSBvcGVyYXRpb25cblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhcHBseVRyYW5zaXRpb24oZWwsIGRpcmVjdGlvbiwgb3AsIHZtLCBjYikge1xuXHQgIHZhciB0cmFuc2l0aW9uID0gZWwuX192X3RyYW5zO1xuXHQgIGlmICghdHJhbnNpdGlvbiB8fFxuXHQgIC8vIHNraXAgaWYgdGhlcmUgYXJlIG5vIGpzIGhvb2tzIGFuZCBDU1MgdHJhbnNpdGlvbiBpc1xuXHQgIC8vIG5vdCBzdXBwb3J0ZWRcblx0ICAhdHJhbnNpdGlvbi5ob29rcyAmJiAhdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG5cdCAgLy8gc2tpcCB0cmFuc2l0aW9ucyBmb3IgaW5pdGlhbCBjb21waWxlXG5cdCAgIXZtLl9pc0NvbXBpbGVkIHx8XG5cdCAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIG1hbmlwdWxhdGVkIGJ5IGEgcGFyZW50IGRpcmVjdGl2ZVxuXHQgIC8vIGR1cmluZyB0aGUgcGFyZW50J3MgY29tcGlsYXRpb24gcGhhc2UsIHNraXAgdGhlXG5cdCAgLy8gYW5pbWF0aW9uLlxuXHQgIHZtLiRwYXJlbnQgJiYgIXZtLiRwYXJlbnQuX2lzQ29tcGlsZWQpIHtcblx0ICAgIG9wKCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBhY3Rpb24gPSBkaXJlY3Rpb24gPiAwID8gJ2VudGVyJyA6ICdsZWF2ZSc7XG5cdCAgdHJhbnNpdGlvblthY3Rpb25dKG9wLCBjYik7XG5cdH1cblx0XG5cdHZhciB0cmFuc2l0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgYXBwZW5kV2l0aFRyYW5zaXRpb246IGFwcGVuZFdpdGhUcmFuc2l0aW9uLFxuXHQgIGJlZm9yZVdpdGhUcmFuc2l0aW9uOiBiZWZvcmVXaXRoVHJhbnNpdGlvbixcblx0ICByZW1vdmVXaXRoVHJhbnNpdGlvbjogcmVtb3ZlV2l0aFRyYW5zaXRpb24sXG5cdCAgYXBwbHlUcmFuc2l0aW9uOiBhcHBseVRyYW5zaXRpb25cblx0fSk7XG5cdFxuXHQvKipcblx0ICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcXVlcnkoZWwpIHtcblx0ICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuXHQgICAgdmFyIHNlbGVjdG9yID0gZWw7XG5cdCAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuXHQgICAgaWYgKCFlbCkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0Nhbm5vdCBmaW5kIGVsZW1lbnQ6ICcgKyBzZWxlY3Rvcik7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBlbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgbm9kZSBpcyBpbiB0aGUgZG9jdW1lbnQuXG5cdCAqIE5vdGU6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyBzaG91bGQgd29yayBoZXJlXG5cdCAqIGJ1dCBhbHdheXMgcmV0dXJucyBmYWxzZSBmb3IgY29tbWVudCBub2RlcyBpbiBwaGFudG9tanMsXG5cdCAqIG1ha2luZyB1bml0IHRlc3RzIGRpZmZpY3VsdC4gVGhpcyBpcyBmaXhlZCBieSBkb2luZyB0aGVcblx0ICogY29udGFpbnMoKSBjaGVjayBvbiB0aGUgbm9kZSdzIHBhcmVudE5vZGUgaW5zdGVhZCBvZlxuXHQgKiB0aGUgbm9kZSBpdHNlbGYuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGluRG9jKG5vZGUpIHtcblx0ICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTtcblx0ICB2YXIgZG9jID0gbm9kZS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0ICB2YXIgcGFyZW50ID0gbm9kZS5wYXJlbnROb2RlO1xuXHQgIHJldHVybiBkb2MgPT09IG5vZGUgfHwgZG9jID09PSBwYXJlbnQgfHwgISEocGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSAmJiBkb2MuY29udGFpbnMocGFyZW50KSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgYW5kIHJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSBhIG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gX2F0dHJcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRBdHRyKG5vZGUsIF9hdHRyKSB7XG5cdCAgdmFyIHZhbCA9IG5vZGUuZ2V0QXR0cmlidXRlKF9hdHRyKTtcblx0ICBpZiAodmFsICE9PSBudWxsKSB7XG5cdCAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShfYXR0cik7XG5cdCAgfVxuXHQgIHJldHVybiB2YWw7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgYW4gYXR0cmlidXRlIHdpdGggY29sb24gb3Igdi1iaW5kOiBwcmVmaXguXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcmV0dXJuIHtTdHJpbmd8bnVsbH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRCaW5kQXR0cihub2RlLCBuYW1lKSB7XG5cdCAgdmFyIHZhbCA9IGdldEF0dHIobm9kZSwgJzonICsgbmFtZSk7XG5cdCAgaWYgKHZhbCA9PT0gbnVsbCkge1xuXHQgICAgdmFsID0gZ2V0QXR0cihub2RlLCAndi1iaW5kOicgKyBuYW1lKTtcblx0ICB9XG5cdCAgcmV0dXJuIHZhbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIHRoZSBwcmVzZW5jZSBvZiBhIGJpbmQgYXR0cmlidXRlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcblx0ICogQHJldHVybiB7Qm9vbGVhbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBoYXNCaW5kQXR0cihub2RlLCBuYW1lKSB7XG5cdCAgcmV0dXJuIG5vZGUuaGFzQXR0cmlidXRlKG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCc6JyArIG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCd2LWJpbmQ6JyArIG5hbWUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGVsIGJlZm9yZSB0YXJnZXRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGJlZm9yZShlbCwgdGFyZ2V0KSB7XG5cdCAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCB0YXJnZXQpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW5zZXJ0IGVsIGFmdGVyIHRhcmdldFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYWZ0ZXIoZWwsIHRhcmdldCkge1xuXHQgIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0Lm5leHRTaWJsaW5nKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGFyZ2V0LnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBlbCBmcm9tIERPTVxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlKGVsKSB7XG5cdCAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQcmVwZW5kIGVsIHRvIHRhcmdldFxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJlcGVuZChlbCwgdGFyZ2V0KSB7XG5cdCAgaWYgKHRhcmdldC5maXJzdENoaWxkKSB7XG5cdCAgICBiZWZvcmUoZWwsIHRhcmdldC5maXJzdENoaWxkKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZXBsYWNlIHRhcmdldCB3aXRoIGVsXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXBsYWNlKHRhcmdldCwgZWwpIHtcblx0ICB2YXIgcGFyZW50ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG5cdCAgaWYgKHBhcmVudCkge1xuXHQgICAgcGFyZW50LnJlcGxhY2VDaGlsZChlbCwgdGFyZ2V0KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBZGQgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9uKGVsLCBldmVudCwgY2IsIHVzZUNhcHR1cmUpIHtcblx0ICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9mZihlbCwgZXZlbnQsIGNiKSB7XG5cdCAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2IpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9yIElFOSBjb21wYXQ6IHdoZW4gYm90aCBjbGFzcyBhbmQgOmNsYXNzIGFyZSBwcmVzZW50XG5cdCAqIGdldEF0dHJpYnV0ZSgnY2xhc3MnKSByZXR1cm5zIHdyb25nIHZhbHVlLi4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldENsYXNzKGVsKSB7XG5cdCAgdmFyIGNsYXNzbmFtZSA9IGVsLmNsYXNzTmFtZTtcblx0ICBpZiAodHlwZW9mIGNsYXNzbmFtZSA9PT0gJ29iamVjdCcpIHtcblx0ICAgIGNsYXNzbmFtZSA9IGNsYXNzbmFtZS5iYXNlVmFsIHx8ICcnO1xuXHQgIH1cblx0ICByZXR1cm4gY2xhc3NuYW1lO1xuXHR9XG5cdFxuXHQvKipcblx0ICogSW4gSUU5LCBzZXRBdHRyaWJ1dGUoJ2NsYXNzJykgd2lsbCByZXN1bHQgaW4gZW1wdHkgY2xhc3Ncblx0ICogaWYgdGhlIGVsZW1lbnQgYWxzbyBoYXMgdGhlIDpjbGFzcyBhdHRyaWJ1dGU7IEhvd2V2ZXIgaW5cblx0ICogUGhhbnRvbUpTLCBzZXR0aW5nIGBjbGFzc05hbWVgIGRvZXMgbm90IHdvcmsgb24gU1ZHIGVsZW1lbnRzLi4uXG5cdCAqIFNvIHdlIGhhdmUgdG8gZG8gYSBjb25kaXRpb25hbCBjaGVjayBoZXJlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzZXRDbGFzcyhlbCwgY2xzKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzSUU5ICYmICEvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG5cdCAgICBlbC5jbGFzc05hbWUgPSBjbHM7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGVsLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCBjbHMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFkZENsYXNzKGVsLCBjbHMpIHtcblx0ICBpZiAoZWwuY2xhc3NMaXN0KSB7XG5cdCAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XG5cdCAgICBpZiAoY3VyLmluZGV4T2YoJyAnICsgY2xzICsgJyAnKSA8IDApIHtcblx0ICAgICAgc2V0Q2xhc3MoZWwsIChjdXIgKyBjbHMpLnRyaW0oKSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xzXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNscykge1xuXHQgIGlmIChlbC5jbGFzc0xpc3QpIHtcblx0ICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcblx0ICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG5cdCAgICB3aGlsZSAoY3VyLmluZGV4T2YodGFyKSA+PSAwKSB7XG5cdCAgICAgIGN1ciA9IGN1ci5yZXBsYWNlKHRhciwgJyAnKTtcblx0ICAgIH1cblx0ICAgIHNldENsYXNzKGVsLCBjdXIudHJpbSgpKTtcblx0ICB9XG5cdCAgaWYgKCFlbC5jbGFzc05hbWUpIHtcblx0ICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHRyYWN0IHJhdyBjb250ZW50IGluc2lkZSBhbiBlbGVtZW50IGludG8gYSB0ZW1wb3Jhcnlcblx0ICogY29udGFpbmVyIGRpdlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gYXNGcmFnbWVudFxuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdENvbnRlbnQoZWwsIGFzRnJhZ21lbnQpIHtcblx0ICB2YXIgY2hpbGQ7XG5cdCAgdmFyIHJhd0NvbnRlbnQ7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKGlzVGVtcGxhdGUoZWwpICYmIGlzRnJhZ21lbnQoZWwuY29udGVudCkpIHtcblx0ICAgIGVsID0gZWwuY29udGVudDtcblx0ICB9XG5cdCAgaWYgKGVsLmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgdHJpbU5vZGUoZWwpO1xuXHQgICAgcmF3Q29udGVudCA9IGFzRnJhZ21lbnQgPyBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkgOiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0ICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICB3aGlsZSAoY2hpbGQgPSBlbC5maXJzdENoaWxkKSB7XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgICAgcmF3Q29udGVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByYXdDb250ZW50O1xuXHR9XG5cdFxuXHQvKipcblx0ICogVHJpbSBwb3NzaWJsZSBlbXB0eSBoZWFkL3RhaWwgdGV4dCBhbmQgY29tbWVudFxuXHQgKiBub2RlcyBpbnNpZGUgYSBwYXJlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRyaW1Ob2RlKG5vZGUpIHtcblx0ICB2YXIgY2hpbGQ7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VxdWVuY2VzICovXG5cdCAgd2hpbGUgKChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuXHQgICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG5cdCAgfVxuXHQgIHdoaWxlICgoY2hpbGQgPSBub2RlLmxhc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuXHQgICAgbm9kZS5yZW1vdmVDaGlsZChjaGlsZCk7XG5cdCAgfVxuXHQgIC8qIGVzbGludC1lbmFibGUgbm8tc2VxdWVuY2VzICovXG5cdH1cblx0XG5cdGZ1bmN0aW9uIGlzVHJpbW1hYmxlKG5vZGUpIHtcblx0ICByZXR1cm4gbm9kZSAmJiAobm9kZS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZS5kYXRhLnRyaW0oKSB8fCBub2RlLm5vZGVUeXBlID09PSA4KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSB0YWcuXG5cdCAqIE5vdGUgaWYgdGhlIHRlbXBsYXRlIGFwcGVhcnMgaW5zaWRlIGFuIFNWRyBpdHMgdGFnTmFtZVxuXHQgKiB3aWxsIGJlIGluIGxvd2VyY2FzZS5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzVGVtcGxhdGUoZWwpIHtcblx0ICByZXR1cm4gZWwudGFnTmFtZSAmJiBlbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICd0ZW1wbGF0ZSc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYW4gXCJhbmNob3JcIiBmb3IgcGVyZm9ybWluZyBkb20gaW5zZXJ0aW9uL3JlbW92YWxzLlxuXHQgKiBUaGlzIGlzIHVzZWQgaW4gYSBudW1iZXIgb2Ygc2NlbmFyaW9zOlxuXHQgKiAtIGZyYWdtZW50IGluc3RhbmNlXG5cdCAqIC0gdi1odG1sXG5cdCAqIC0gdi1pZlxuXHQgKiAtIHYtZm9yXG5cdCAqIC0gY29tcG9uZW50XG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBjb250ZW50XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gcGVyc2lzdCAtIElFIHRyYXNoZXMgZW1wdHkgdGV4dE5vZGVzIG9uXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lTm9kZSh0cnVlKSwgc28gaW4gY2VydGFpblxuXHQgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlcyB0aGUgYW5jaG9yIG5lZWRzIHRvIGJlXG5cdCAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbi1lbXB0eSB0byBiZSBwZXJzaXN0ZWQgaW5cblx0ICogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzLlxuXHQgKiBAcmV0dXJuIHtDb21tZW50fFRleHR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY3JlYXRlQW5jaG9yKGNvbnRlbnQsIHBlcnNpc3QpIHtcblx0ICB2YXIgYW5jaG9yID0gY29uZmlnLmRlYnVnID8gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBlcnNpc3QgPyAnICcgOiAnJyk7XG5cdCAgYW5jaG9yLl9fdl9hbmNob3IgPSB0cnVlO1xuXHQgIHJldHVybiBhbmNob3I7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaW5kIGEgY29tcG9uZW50IHJlZiBhdHRyaWJ1dGUgdGhhdCBzdGFydHMgd2l0aCAkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IG5vZGVcblx0ICogQHJldHVybiB7U3RyaW5nfHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHR2YXIgcmVmUkUgPSAvXnYtcmVmOi87XG5cdFxuXHRmdW5jdGlvbiBmaW5kUmVmKG5vZGUpIHtcblx0ICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcblx0ICAgIHZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlcztcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBuYW1lID0gYXR0cnNbaV0ubmFtZTtcblx0ICAgICAgaWYgKHJlZlJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICByZXR1cm4gY2FtZWxpemUobmFtZS5yZXBsYWNlKHJlZlJFLCAnJykpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogTWFwIGEgZnVuY3Rpb24gdG8gYSByYW5nZSBvZiBub2RlcyAuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcGFyYW0ge05vZGV9IGVuZFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1hcE5vZGVSYW5nZShub2RlLCBlbmQsIG9wKSB7XG5cdCAgdmFyIG5leHQ7XG5cdCAgd2hpbGUgKG5vZGUgIT09IGVuZCkge1xuXHQgICAgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdCAgICBvcChub2RlKTtcblx0ICAgIG5vZGUgPSBuZXh0O1xuXHQgIH1cblx0ICBvcChlbmQpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgd2l0aCB0cmFuc2l0aW9uLCBzdG9yZVxuXHQgKiB0aGUgbm9kZXMgaW4gYSBmcmFnbWVudCB3aXRoIGNvcnJlY3Qgb3JkZXJpbmcsXG5cdCAqIGFuZCBjYWxsIGNhbGxiYWNrIHdoZW4gZG9uZS5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBzdGFydFxuXHQgKiBAcGFyYW0ge05vZGV9IGVuZFxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVtb3ZlTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIHZtLCBmcmFnLCBjYikge1xuXHQgIHZhciBkb25lID0gZmFsc2U7XG5cdCAgdmFyIHJlbW92ZWQgPSAwO1xuXHQgIHZhciBub2RlcyA9IFtdO1xuXHQgIG1hcE5vZGVSYW5nZShzdGFydCwgZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuXHQgICAgaWYgKG5vZGUgPT09IGVuZCkgZG9uZSA9IHRydWU7XG5cdCAgICBub2Rlcy5wdXNoKG5vZGUpO1xuXHQgICAgcmVtb3ZlV2l0aFRyYW5zaXRpb24obm9kZSwgdm0sIG9uUmVtb3ZlZCk7XG5cdCAgfSk7XG5cdCAgZnVuY3Rpb24gb25SZW1vdmVkKCkge1xuXHQgICAgcmVtb3ZlZCsrO1xuXHQgICAgaWYgKGRvbmUgJiYgcmVtb3ZlZCA+PSBub2Rlcy5sZW5ndGgpIHtcblx0ICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBub2Rlcy5sZW5ndGg7IGkrKykge1xuXHQgICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZXNbaV0pO1xuXHQgICAgICB9XG5cdCAgICAgIGNiICYmIGNiKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgRG9jdW1lbnRGcmFnbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0Jvb2xlYW59XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaXNGcmFnbWVudChub2RlKSB7XG5cdCAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMTE7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgb3V0ZXJIVE1MIG9mIGVsZW1lbnRzLCB0YWtpbmcgY2FyZVxuXHQgKiBvZiBTVkcgZWxlbWVudHMgaW4gSUUgYXMgd2VsbC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZ2V0T3V0ZXJIVE1MKGVsKSB7XG5cdCAgaWYgKGVsLm91dGVySFRNTCkge1xuXHQgICAgcmV0dXJuIGVsLm91dGVySFRNTDtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsLmNsb25lTm9kZSh0cnVlKSk7XG5cdCAgICByZXR1cm4gY29udGFpbmVyLmlubmVySFRNTDtcblx0ICB9XG5cdH1cblx0XG5cdHZhciBjb21tb25UYWdSRSA9IC9eKGRpdnxwfHNwYW58aW1nfGF8YnxpfGJyfHVsfG9sfGxpfGgxfGgyfGgzfGg0fGg1fGg2fGNvZGV8cHJlfHRhYmxlfHRofHRkfHRyfGZvcm18bGFiZWx8aW5wdXR8c2VsZWN0fG9wdGlvbnxuYXZ8YXJ0aWNsZXxzZWN0aW9ufGhlYWRlcnxmb290ZXIpJC9pO1xuXHR2YXIgcmVzZXJ2ZWRUYWdSRSA9IC9eKHNsb3R8cGFydGlhbHxjb21wb25lbnQpJC9pO1xuXHRcblx0dmFyIGlzVW5rbm93bkVsZW1lbnQgPSB1bmRlZmluZWQ7XG5cdGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgaXNVbmtub3duRWxlbWVudCA9IGZ1bmN0aW9uIChlbCwgdGFnKSB7XG5cdCAgICBpZiAodGFnLmluZGV4T2YoJy0nKSA+IC0xKSB7XG5cdCAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI4MjEwMzY0LzEwNzAyNDRcblx0ICAgICAgcmV0dXJuIGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTFVua25vd25FbGVtZW50IHx8IGVsLmNvbnN0cnVjdG9yID09PSB3aW5kb3cuSFRNTEVsZW1lbnQ7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gKC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkgJiZcblx0ICAgICAgICAvLyBDaHJvbWUgcmV0dXJucyB1bmtub3duIGZvciBzZXZlcmFsIEhUTUw1IGVsZW1lbnRzLlxuXHQgICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01NDA1MjZcblx0ICAgICAgICAvLyBGaXJlZm94IHJldHVybnMgdW5rbm93biBmb3Igc29tZSBcIkludGVyYWN0aXZlIGVsZW1lbnRzLlwiXG5cdCAgICAgICAgIS9eKGRhdGF8dGltZXxydGN8cmJ8ZGV0YWlsc3xkaWFsb2d8c3VtbWFyeSkkLy50ZXN0KHRhZylcblx0ICAgICAgKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudCwgaWYgeWVzIHJldHVybiBpdHNcblx0ICogY29tcG9uZW50IGlkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY2hlY2tDb21wb25lbnRBdHRyKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0ICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG5cdCAgaWYgKCFjb21tb25UYWdSRS50ZXN0KHRhZykgJiYgIXJlc2VydmVkVGFnUkUudGVzdCh0YWcpKSB7XG5cdCAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkge1xuXHQgICAgICByZXR1cm4geyBpZDogdGFnIH07XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB2YXIgaXMgPSBoYXNBdHRycyAmJiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuXHQgICAgICBpZiAoaXMpIHtcblx0ICAgICAgICByZXR1cm4gaXM7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHZhciBleHBlY3RlZFRhZyA9IG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXAgJiYgb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcFt0YWddO1xuXHQgICAgICAgIGlmIChleHBlY3RlZFRhZykge1xuXHQgICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtICcgKyAnZGlkIHlvdSBtZWFuIDwnICsgZXhwZWN0ZWRUYWcgKyAnPj8gJyArICdIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSBrZWJhYi1jYXNlIGluIHRlbXBsYXRlcy4nKTtcblx0ICAgICAgICB9IGVsc2UgaWYgKGlzVW5rbm93bkVsZW1lbnQoZWwsIHRhZykpIHtcblx0ICAgICAgICAgIHdhcm4oJ1Vua25vd24gY3VzdG9tIGVsZW1lbnQ6IDwnICsgdGFnICsgJz4gLSBkaWQgeW91ICcgKyAncmVnaXN0ZXIgdGhlIGNvbXBvbmVudCBjb3JyZWN0bHk/IEZvciByZWN1cnNpdmUgY29tcG9uZW50cywgJyArICdtYWtlIHN1cmUgdG8gcHJvdmlkZSB0aGUgXCJuYW1lXCIgb3B0aW9uLicpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAoaGFzQXR0cnMpIHtcblx0ICAgIHJldHVybiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCBcImlzXCIgYmluZGluZyBmcm9tIGFuIGVsZW1lbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpIHtcblx0ICAvLyBkeW5hbWljIHN5bnRheFxuXHQgIHZhciBleHAgPSBlbC5nZXRBdHRyaWJ1dGUoJ2lzJyk7XG5cdCAgaWYgKGV4cCAhPSBudWxsKSB7XG5cdCAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgZXhwKSkge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG5cdCAgICAgIHJldHVybiB7IGlkOiBleHAgfTtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgZXhwID0gZ2V0QmluZEF0dHIoZWwsICdpcycpO1xuXHQgICAgaWYgKGV4cCAhPSBudWxsKSB7XG5cdCAgICAgIHJldHVybiB7IGlkOiBleHAsIGR5bmFtaWM6IHRydWUgfTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBPcHRpb24gb3ZlcndyaXRpbmcgc3RyYXRlZ2llcyBhcmUgZnVuY3Rpb25zIHRoYXQgaGFuZGxlXG5cdCAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uXG5cdCAqIHZhbHVlIGludG8gdGhlIGZpbmFsIHZhbHVlLlxuXHQgKlxuXHQgKiBBbGwgc3RyYXRlZ3kgZnVuY3Rpb25zIGZvbGxvdyB0aGUgc2FtZSBzaWduYXR1cmU6XG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gcGFyZW50VmFsXG5cdCAqIEBwYXJhbSB7Kn0gY2hpbGRWYWxcblx0ICogQHBhcmFtIHtWdWV9IFt2bV1cblx0ICovXG5cdFxuXHR2YXIgc3RyYXRzID0gY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRoYXQgcmVjdXJzaXZlbHkgbWVyZ2VzIHR3byBkYXRhIG9iamVjdHMgdG9nZXRoZXIuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VEYXRhKHRvLCBmcm9tKSB7XG5cdCAgdmFyIGtleSwgdG9WYWwsIGZyb21WYWw7XG5cdCAgZm9yIChrZXkgaW4gZnJvbSkge1xuXHQgICAgdG9WYWwgPSB0b1trZXldO1xuXHQgICAgZnJvbVZhbCA9IGZyb21ba2V5XTtcblx0ICAgIGlmICghaGFzT3duKHRvLCBrZXkpKSB7XG5cdCAgICAgIHNldCh0bywga2V5LCBmcm9tVmFsKTtcblx0ICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodG9WYWwpICYmIGlzT2JqZWN0KGZyb21WYWwpKSB7XG5cdCAgICAgIG1lcmdlRGF0YSh0b1ZhbCwgZnJvbVZhbCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiB0bztcblx0fVxuXHRcblx0LyoqXG5cdCAqIERhdGFcblx0ICovXG5cdFxuXHRzdHJhdHMuZGF0YSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuXHQgIGlmICghdm0pIHtcblx0ICAgIC8vIGluIGEgVnVlLmV4dGVuZCBtZXJnZSwgYm90aCBzaG91bGQgYmUgZnVuY3Rpb25zXG5cdCAgICBpZiAoIWNoaWxkVmFsKSB7XG5cdCAgICAgIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgICB9XG5cdCAgICBpZiAodHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZGF0YVwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG5cdCAgICAgIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgICB9XG5cdCAgICBpZiAoIXBhcmVudFZhbCkge1xuXHQgICAgICByZXR1cm4gY2hpbGRWYWw7XG5cdCAgICB9XG5cdCAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXG5cdCAgICAvLyB3ZSBuZWVkIHRvIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcblx0ICAgIC8vIG1lcmdlZCByZXN1bHQgb2YgYm90aCBmdW5jdGlvbnMuLi4gbm8gbmVlZCB0b1xuXHQgICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXG5cdCAgICAvLyBpdCBoYXMgdG8gYmUgYSBmdW5jdGlvbiB0byBwYXNzIHByZXZpb3VzIG1lcmdlcy5cblx0ICAgIHJldHVybiBmdW5jdGlvbiBtZXJnZWREYXRhRm4oKSB7XG5cdCAgICAgIHJldHVybiBtZXJnZURhdGEoY2hpbGRWYWwuY2FsbCh0aGlzKSwgcGFyZW50VmFsLmNhbGwodGhpcykpO1xuXHQgICAgfTtcblx0ICB9IGVsc2UgaWYgKHBhcmVudFZhbCB8fCBjaGlsZFZhbCkge1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZEluc3RhbmNlRGF0YUZuKCkge1xuXHQgICAgICAvLyBpbnN0YW5jZSBtZXJnZVxuXHQgICAgICB2YXIgaW5zdGFuY2VEYXRhID0gdHlwZW9mIGNoaWxkVmFsID09PSAnZnVuY3Rpb24nID8gY2hpbGRWYWwuY2FsbCh2bSkgOiBjaGlsZFZhbDtcblx0ICAgICAgdmFyIGRlZmF1bHREYXRhID0gdHlwZW9mIHBhcmVudFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmVudFZhbC5jYWxsKHZtKSA6IHVuZGVmaW5lZDtcblx0ICAgICAgaWYgKGluc3RhbmNlRGF0YSkge1xuXHQgICAgICAgIHJldHVybiBtZXJnZURhdGEoaW5zdGFuY2VEYXRhLCBkZWZhdWx0RGF0YSk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhO1xuXHQgICAgICB9XG5cdCAgICB9O1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFbFxuXHQgKi9cblx0XG5cdHN0cmF0cy5lbCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsLCB2bSkge1xuXHQgIGlmICghdm0gJiYgY2hpbGRWYWwgJiYgdHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImVsXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHJldCA9IGNoaWxkVmFsIHx8IHBhcmVudFZhbDtcblx0ICAvLyBpbnZva2UgdGhlIGVsZW1lbnQgZmFjdG9yeSBpZiB0aGlzIGlzIGluc3RhbmNlIG1lcmdlXG5cdCAgcmV0dXJuIHZtICYmIHR5cGVvZiByZXQgPT09ICdmdW5jdGlvbicgPyByZXQuY2FsbCh2bSkgOiByZXQ7XG5cdH07XG5cdFxuXHQvKipcblx0ICogSG9va3MgYW5kIHBhcmFtIGF0dHJpYnV0ZXMgYXJlIG1lcmdlZCBhcyBhcnJheXMuXG5cdCAqL1xuXHRcblx0c3RyYXRzLmluaXQgPSBzdHJhdHMuY3JlYXRlZCA9IHN0cmF0cy5yZWFkeSA9IHN0cmF0cy5hdHRhY2hlZCA9IHN0cmF0cy5kZXRhY2hlZCA9IHN0cmF0cy5iZWZvcmVDb21waWxlID0gc3RyYXRzLmNvbXBpbGVkID0gc3RyYXRzLmJlZm9yZURlc3Ryb3kgPSBzdHJhdHMuZGVzdHJveWVkID0gc3RyYXRzLmFjdGl2YXRlID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICByZXR1cm4gY2hpbGRWYWwgPyBwYXJlbnRWYWwgPyBwYXJlbnRWYWwuY29uY2F0KGNoaWxkVmFsKSA6IGlzQXJyYXkoY2hpbGRWYWwpID8gY2hpbGRWYWwgOiBbY2hpbGRWYWxdIDogcGFyZW50VmFsO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEFzc2V0c1xuXHQgKlxuXHQgKiBXaGVuIGEgdm0gaXMgcHJlc2VudCAoaW5zdGFuY2UgY3JlYXRpb24pLCB3ZSBuZWVkIHRvIGRvXG5cdCAqIGEgdGhyZWUtd2F5IG1lcmdlIGJldHdlZW4gY29uc3RydWN0b3Igb3B0aW9ucywgaW5zdGFuY2Vcblx0ICogb3B0aW9ucyBhbmQgcGFyZW50IG9wdGlvbnMuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWVyZ2VBc3NldHMocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFZhbCB8fCBudWxsKTtcblx0ICByZXR1cm4gY2hpbGRWYWwgPyBleHRlbmQocmVzLCBndWFyZEFycmF5QXNzZXRzKGNoaWxkVmFsKSkgOiByZXM7XG5cdH1cblx0XG5cdGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgc3RyYXRzW3R5cGUgKyAncyddID0gbWVyZ2VBc3NldHM7XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIEV2ZW50cyAmIFdhdGNoZXJzLlxuXHQgKlxuXHQgKiBFdmVudHMgJiB3YXRjaGVycyBoYXNoZXMgc2hvdWxkIG5vdCBvdmVyd3JpdGUgb25lXG5cdCAqIGFub3RoZXIsIHNvIHdlIG1lcmdlIHRoZW0gYXMgYXJyYXlzLlxuXHQgKi9cblx0XG5cdHN0cmF0cy53YXRjaCA9IHN0cmF0cy5ldmVudHMgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG5cdCAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcblx0ICB2YXIgcmV0ID0ge307XG5cdCAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcblx0ICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcblx0ICAgIHZhciBwYXJlbnQgPSByZXRba2V5XTtcblx0ICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleV07XG5cdCAgICBpZiAocGFyZW50ICYmICFpc0FycmF5KHBhcmVudCkpIHtcblx0ICAgICAgcGFyZW50ID0gW3BhcmVudF07XG5cdCAgICB9XG5cdCAgICByZXRba2V5XSA9IHBhcmVudCA/IHBhcmVudC5jb25jYXQoY2hpbGQpIDogW2NoaWxkXTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBPdGhlciBvYmplY3QgaGFzaGVzLlxuXHQgKi9cblx0XG5cdHN0cmF0cy5wcm9wcyA9IHN0cmF0cy5tZXRob2RzID0gc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcblx0ICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuXHQgIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG5cdCAgdmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcblx0ICBleHRlbmQocmV0LCBjaGlsZFZhbCk7XG5cdCAgcmV0dXJuIHJldDtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZWZhdWx0IHN0cmF0ZWd5LlxuXHQgKi9cblx0XG5cdHZhciBkZWZhdWx0U3RyYXQgPSBmdW5jdGlvbiBkZWZhdWx0U3RyYXQocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuXHQgIHJldHVybiBjaGlsZFZhbCA9PT0gdW5kZWZpbmVkID8gcGFyZW50VmFsIDogY2hpbGRWYWw7XG5cdH07XG5cdFxuXHQvKipcblx0ICogTWFrZSBzdXJlIGNvbXBvbmVudCBvcHRpb25zIGdldCBjb252ZXJ0ZWQgdG8gYWN0dWFsXG5cdCAqIGNvbnN0cnVjdG9ycy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBndWFyZENvbXBvbmVudHMob3B0aW9ucykge1xuXHQgIGlmIChvcHRpb25zLmNvbXBvbmVudHMpIHtcblx0ICAgIHZhciBjb21wb25lbnRzID0gb3B0aW9ucy5jb21wb25lbnRzID0gZ3VhcmRBcnJheUFzc2V0cyhvcHRpb25zLmNvbXBvbmVudHMpO1xuXHQgICAgdmFyIGlkcyA9IE9iamVjdC5rZXlzKGNvbXBvbmVudHMpO1xuXHQgICAgdmFyIGRlZjtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIHZhciBtYXAgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwID0ge307XG5cdCAgICB9XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGlkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGtleSA9IGlkc1tpXTtcblx0ICAgICAgaWYgKGNvbW1vblRhZ1JFLnRlc3Qoa2V5KSB8fCByZXNlcnZlZFRhZ1JFLnRlc3Qoa2V5KSkge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsga2V5KTtcblx0ICAgICAgICBjb250aW51ZTtcblx0ICAgICAgfVxuXHQgICAgICAvLyByZWNvcmQgYSBhbGwgbG93ZXJjYXNlIDwtPiBrZWJhYi1jYXNlIG1hcHBpbmcgZm9yXG5cdCAgICAgIC8vIHBvc3NpYmxlIGN1c3RvbSBlbGVtZW50IGNhc2UgZXJyb3Igd2FybmluZ1xuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIG1hcFtrZXkucmVwbGFjZSgvLS9nLCAnJykudG9Mb3dlckNhc2UoKV0gPSBoeXBoZW5hdGUoa2V5KTtcblx0ICAgICAgfVxuXHQgICAgICBkZWYgPSBjb21wb25lbnRzW2tleV07XG5cdCAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRlZikpIHtcblx0ICAgICAgICBjb21wb25lbnRzW2tleV0gPSBWdWUuZXh0ZW5kKGRlZik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFbnN1cmUgYWxsIHByb3BzIG9wdGlvbiBzeW50YXggYXJlIG5vcm1hbGl6ZWQgaW50byB0aGVcblx0ICogT2JqZWN0LWJhc2VkIGZvcm1hdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBndWFyZFByb3BzKG9wdGlvbnMpIHtcblx0ICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuXHQgIHZhciBpLCB2YWw7XG5cdCAgaWYgKGlzQXJyYXkocHJvcHMpKSB7XG5cdCAgICBvcHRpb25zLnByb3BzID0ge307XG5cdCAgICBpID0gcHJvcHMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YWwgPSBwcm9wc1tpXTtcblx0ICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgICAgb3B0aW9ucy5wcm9wc1t2YWxdID0gbnVsbDtcblx0ICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSkge1xuXHQgICAgICAgIG9wdGlvbnMucHJvcHNbdmFsLm5hbWVdID0gdmFsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHByb3BzKSkge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhwcm9wcyk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHZhbCA9IHByb3BzW2tleXNbaV1dO1xuXHQgICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgIHByb3BzW2tleXNbaV1dID0geyB0eXBlOiB2YWwgfTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEd1YXJkIGFuIEFycmF5LWZvcm1hdCBhc3NldHMgb3B0aW9uIGFuZCBjb252ZXJ0ZWQgaXRcblx0ICogaW50byB0aGUga2V5LXZhbHVlIE9iamVjdCBmb3JtYXQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSBhc3NldHNcblx0ICogQHJldHVybiB7T2JqZWN0fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGd1YXJkQXJyYXlBc3NldHMoYXNzZXRzKSB7XG5cdCAgaWYgKGlzQXJyYXkoYXNzZXRzKSkge1xuXHQgICAgdmFyIHJlcyA9IHt9O1xuXHQgICAgdmFyIGkgPSBhc3NldHMubGVuZ3RoO1xuXHQgICAgdmFyIGFzc2V0O1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBhc3NldCA9IGFzc2V0c1tpXTtcblx0ICAgICAgdmFyIGlkID0gdHlwZW9mIGFzc2V0ID09PSAnZnVuY3Rpb24nID8gYXNzZXQub3B0aW9ucyAmJiBhc3NldC5vcHRpb25zLm5hbWUgfHwgYXNzZXQuaWQgOiBhc3NldC5uYW1lIHx8IGFzc2V0LmlkO1xuXHQgICAgICBpZiAoIWlkKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBcnJheS1zeW50YXggYXNzZXRzIG11c3QgcHJvdmlkZSBhIFwibmFtZVwiIG9yIFwiaWRcIiBmaWVsZC4nKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZXNbaWRdID0gYXNzZXQ7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiByZXM7XG5cdCAgfVxuXHQgIHJldHVybiBhc3NldHM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBNZXJnZSB0d28gb3B0aW9uIG9iamVjdHMgaW50byBhIG5ldyBvbmUuXG5cdCAqIENvcmUgdXRpbGl0eSB1c2VkIGluIGJvdGggaW5zdGFudGlhdGlvbiBhbmQgaW5oZXJpdGFuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwYXJlbnRcblx0ICogQHBhcmFtIHtPYmplY3R9IGNoaWxkXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dIC0gaWYgdm0gaXMgcHJlc2VudCwgaW5kaWNhdGVzIHRoaXMgaXNcblx0ICogICAgICAgICAgICAgICAgICAgICBhbiBpbnN0YW50aWF0aW9uIG1lcmdlLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkLCB2bSkge1xuXHQgIGd1YXJkQ29tcG9uZW50cyhjaGlsZCk7XG5cdCAgZ3VhcmRQcm9wcyhjaGlsZCk7XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgIGlmIChjaGlsZC5wcm9wc0RhdGEgJiYgIXZtKSB7XG5cdCAgICAgIHdhcm4oJ3Byb3BzRGF0YSBjYW4gb25seSBiZSB1c2VkIGFzIGFuIGluc3RhbnRpYXRpb24gb3B0aW9uLicpO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgb3B0aW9ucyA9IHt9O1xuXHQgIHZhciBrZXk7XG5cdCAgaWYgKGNoaWxkWydleHRlbmRzJ10pIHtcblx0ICAgIHBhcmVudCA9IHR5cGVvZiBjaGlsZFsnZXh0ZW5kcyddID09PSAnZnVuY3Rpb24nID8gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXS5vcHRpb25zLCB2bSkgOiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLCB2bSk7XG5cdCAgfVxuXHQgIGlmIChjaGlsZC5taXhpbnMpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICB2YXIgbWl4aW4gPSBjaGlsZC5taXhpbnNbaV07XG5cdCAgICAgIHZhciBtaXhpbk9wdGlvbnMgPSBtaXhpbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBWdWUgPyBtaXhpbi5vcHRpb25zIDogbWl4aW47XG5cdCAgICAgIHBhcmVudCA9IG1lcmdlT3B0aW9ucyhwYXJlbnQsIG1peGluT3B0aW9ucywgdm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmb3IgKGtleSBpbiBwYXJlbnQpIHtcblx0ICAgIG1lcmdlRmllbGQoa2V5KTtcblx0ICB9XG5cdCAgZm9yIChrZXkgaW4gY2hpbGQpIHtcblx0ICAgIGlmICghaGFzT3duKHBhcmVudCwga2V5KSkge1xuXHQgICAgICBtZXJnZUZpZWxkKGtleSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZ1bmN0aW9uIG1lcmdlRmllbGQoa2V5KSB7XG5cdCAgICB2YXIgc3RyYXQgPSBzdHJhdHNba2V5XSB8fCBkZWZhdWx0U3RyYXQ7XG5cdCAgICBvcHRpb25zW2tleV0gPSBzdHJhdChwYXJlbnRba2V5XSwgY2hpbGRba2V5XSwgdm0sIGtleSk7XG5cdCAgfVxuXHQgIHJldHVybiBvcHRpb25zO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUmVzb2x2ZSBhbiBhc3NldC5cblx0ICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJlY2F1c2UgY2hpbGQgaW5zdGFuY2VzIG5lZWQgYWNjZXNzXG5cdCAqIHRvIGFzc2V0cyBkZWZpbmVkIGluIGl0cyBhbmNlc3RvciBjaGFpbi5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICogQHBhcmFtIHtTdHJpbmd9IGlkXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gd2Fybk1pc3Npbmdcblx0ICogQHJldHVybiB7T2JqZWN0fEZ1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc29sdmVBc3NldChvcHRpb25zLCB0eXBlLCBpZCwgd2Fybk1pc3NpbmcpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXTtcblx0ICB2YXIgY2FtZWxpemVkSWQ7XG5cdCAgdmFyIHJlcyA9IGFzc2V0c1tpZF0gfHxcblx0ICAvLyBjYW1lbENhc2UgSURcblx0ICBhc3NldHNbY2FtZWxpemVkSWQgPSBjYW1lbGl6ZShpZCldIHx8XG5cdCAgLy8gUGFzY2FsIENhc2UgSURcblx0ICBhc3NldHNbY2FtZWxpemVkSWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbGl6ZWRJZC5zbGljZSgxKV07XG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xuXHQgICAgd2FybignRmFpbGVkIHRvIHJlc29sdmUgJyArIHR5cGUuc2xpY2UoMCwgLTEpICsgJzogJyArIGlkLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0dmFyIHVpZCQxID0gMDtcblx0XG5cdC8qKlxuXHQgKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGVcblx0ICogZGlyZWN0aXZlcyBzdWJzY3JpYmluZyB0byBpdC5cblx0ICpcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqL1xuXHRmdW5jdGlvbiBEZXAoKSB7XG5cdCAgdGhpcy5pZCA9IHVpZCQxKys7XG5cdCAgdGhpcy5zdWJzID0gW107XG5cdH1cblx0XG5cdC8vIHRoZSBjdXJyZW50IHRhcmdldCB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZC5cblx0Ly8gdGhpcyBpcyBnbG9iYWxseSB1bmlxdWUgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvbmx5IG9uZVxuXHQvLyB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZCBhdCBhbnkgdGltZS5cblx0RGVwLnRhcmdldCA9IG51bGw7XG5cdFxuXHQvKipcblx0ICogQWRkIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcblx0ICovXG5cdFxuXHREZXAucHJvdG90eXBlLmFkZFN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcblx0ICB0aGlzLnN1YnMucHVzaChzdWIpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFJlbW92ZSBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5yZW1vdmVTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG5cdCAgdGhpcy5zdWJzLiRyZW1vdmUoc3ViKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBZGQgc2VsZiBhcyBhIGRlcGVuZGVuY3kgdG8gdGhlIHRhcmdldCB3YXRjaGVyLlxuXHQgKi9cblx0XG5cdERlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuXHQgIERlcC50YXJnZXQuYWRkRGVwKHRoaXMpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE5vdGlmeSBhbGwgc3Vic2NyaWJlcnMgb2YgYSBuZXcgdmFsdWUuXG5cdCAqL1xuXHRcblx0RGVwLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLy8gc3RhYmxpemUgdGhlIHN1YnNjcmliZXIgbGlzdCBmaXJzdFxuXHQgIHZhciBzdWJzID0gdG9BcnJheSh0aGlzLnN1YnMpO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gc3Vicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHN1YnNbaV0udXBkYXRlKCk7XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGFycmF5UHJvdG8gPSBBcnJheS5wcm90b3R5cGU7XG5cdHZhciBhcnJheU1ldGhvZHMgPSBPYmplY3QuY3JlYXRlKGFycmF5UHJvdG8pXG5cdFxuXHQvKipcblx0ICogSW50ZXJjZXB0IG11dGF0aW5nIG1ldGhvZHMgYW5kIGVtaXQgZXZlbnRzXG5cdCAqL1xuXHRcblx0O1sncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAndW5zaGlmdCcsICdzcGxpY2UnLCAnc29ydCcsICdyZXZlcnNlJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG5cdCAgLy8gY2FjaGUgb3JpZ2luYWwgbWV0aG9kXG5cdCAgdmFyIG9yaWdpbmFsID0gYXJyYXlQcm90b1ttZXRob2RdO1xuXHQgIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvcigpIHtcblx0ICAgIC8vIGF2b2lkIGxlYWtpbmcgYXJndW1lbnRzOlxuXHQgICAgLy8gaHR0cDovL2pzcGVyZi5jb20vY2xvc3VyZS13aXRoLWFyZ3VtZW50c1xuXHQgICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuXHQgICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG5cdCAgICB9XG5cdCAgICB2YXIgcmVzdWx0ID0gb3JpZ2luYWwuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICB2YXIgb2IgPSB0aGlzLl9fb2JfXztcblx0ICAgIHZhciBpbnNlcnRlZDtcblx0ICAgIHN3aXRjaCAobWV0aG9kKSB7XG5cdCAgICAgIGNhc2UgJ3B1c2gnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncztcblx0ICAgICAgICBicmVhaztcblx0ICAgICAgY2FzZSAndW5zaGlmdCc6XG5cdCAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdzcGxpY2UnOlxuXHQgICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKTtcblx0ICAgICAgICBicmVhaztcblx0ICAgIH1cblx0ICAgIGlmIChpbnNlcnRlZCkgb2Iub2JzZXJ2ZUFycmF5KGluc2VydGVkKTtcblx0ICAgIC8vIG5vdGlmeSBjaGFuZ2Vcblx0ICAgIG9iLmRlcC5ub3RpZnkoKTtcblx0ICAgIHJldHVybiByZXN1bHQ7XG5cdCAgfSk7XG5cdH0pO1xuXHRcblx0LyoqXG5cdCAqIFN3YXAgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4IHdpdGggYSBuZXcgdmFsdWVcblx0ICogYW5kIGVtaXRzIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKiBAcmV0dXJuIHsqfSAtIHJlcGxhY2VkIGVsZW1lbnRcblx0ICovXG5cdFxuXHRkZWYoYXJyYXlQcm90bywgJyRzZXQnLCBmdW5jdGlvbiAkc2V0KGluZGV4LCB2YWwpIHtcblx0ICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGgpIHtcblx0ICAgIHRoaXMubGVuZ3RoID0gTnVtYmVyKGluZGV4KSArIDE7XG5cdCAgfVxuXHQgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSwgdmFsKVswXTtcblx0fSk7XG5cdFxuXHQvKipcblx0ICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIHJlbW92ZSB0aGUgZWxlbWVudCBhdCBnaXZlbiBpbmRleCBvciB0YXJnZXQgZWxlbWVudCByZWZlcmVuY2UuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gaXRlbVxuXHQgKi9cblx0XG5cdGRlZihhcnJheVByb3RvLCAnJHJlbW92ZScsIGZ1bmN0aW9uICRyZW1vdmUoaXRlbSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghdGhpcy5sZW5ndGgpIHJldHVybjtcblx0ICB2YXIgaW5kZXggPSBpbmRleE9mKHRoaXMsIGl0ZW0pO1xuXHQgIGlmIChpbmRleCA+IC0xKSB7XG5cdCAgICByZXR1cm4gdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xuXHQgIH1cblx0fSk7XG5cdFxuXHR2YXIgYXJyYXlLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXJyYXlNZXRob2RzKTtcblx0XG5cdC8qKlxuXHQgKiBCeSBkZWZhdWx0LCB3aGVuIGEgcmVhY3RpdmUgcHJvcGVydHkgaXMgc2V0LCB0aGUgbmV3IHZhbHVlIGlzXG5cdCAqIGFsc28gY29udmVydGVkIHRvIGJlY29tZSByZWFjdGl2ZS4gSG93ZXZlciBpbiBjZXJ0YWluIGNhc2VzLCBlLmcuXG5cdCAqIHYtZm9yIHNjb3BlIGFsaWFzIGFuZCBwcm9wcywgd2UgZG9uJ3Qgd2FudCB0byBmb3JjZSBjb252ZXJzaW9uXG5cdCAqIGJlY2F1c2UgdGhlIHZhbHVlIG1heSBiZSBhIG5lc3RlZCB2YWx1ZSB1bmRlciBhIGZyb3plbiBkYXRhIHN0cnVjdHVyZS5cblx0ICpcblx0ICogU28gd2hlbmV2ZXIgd2Ugd2FudCB0byBzZXQgYSByZWFjdGl2ZSBwcm9wZXJ0eSB3aXRob3V0IGZvcmNpbmdcblx0ICogY29udmVyc2lvbiBvbiB0aGUgbmV3IHZhbHVlLCB3ZSB3cmFwIHRoYXQgY2FsbCBpbnNpZGUgdGhpcyBmdW5jdGlvbi5cblx0ICovXG5cdFxuXHR2YXIgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cdFxuXHRmdW5jdGlvbiB3aXRob3V0Q29udmVyc2lvbihmbikge1xuXHQgIHNob3VsZENvbnZlcnQgPSBmYWxzZTtcblx0ICBmbigpO1xuXHQgIHNob3VsZENvbnZlcnQgPSB0cnVlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuXHQgKiBvYmplY3QuIE9uY2UgYXR0YWNoZWQsIHRoZSBvYnNlcnZlciBjb252ZXJ0cyB0YXJnZXRcblx0ICogb2JqZWN0J3MgcHJvcGVydHkga2V5cyBpbnRvIGdldHRlci9zZXR0ZXJzIHRoYXRcblx0ICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoZXMgdXBkYXRlcy5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheXxPYmplY3R9IHZhbHVlXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIE9ic2VydmVyKHZhbHVlKSB7XG5cdCAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuXHQgIHRoaXMuZGVwID0gbmV3IERlcCgpO1xuXHQgIGRlZih2YWx1ZSwgJ19fb2JfXycsIHRoaXMpO1xuXHQgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuXHQgICAgdmFyIGF1Z21lbnQgPSBoYXNQcm90byA/IHByb3RvQXVnbWVudCA6IGNvcHlBdWdtZW50O1xuXHQgICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuXHQgICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLndhbGsodmFsdWUpO1xuXHQgIH1cblx0fVxuXHRcblx0Ly8gSW5zdGFuY2UgbWV0aG9kc1xuXHRcblx0LyoqXG5cdCAqIFdhbGsgdGhyb3VnaCBlYWNoIHByb3BlcnR5IGFuZCBjb252ZXJ0IHRoZW0gaW50b1xuXHQgKiBnZXR0ZXIvc2V0dGVycy4gVGhpcyBtZXRob2Qgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIHdoZW5cblx0ICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICovXG5cdFxuXHRPYnNlcnZlci5wcm90b3R5cGUud2FsayA9IGZ1bmN0aW9uIChvYmopIHtcblx0ICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdGhpcy5jb252ZXJ0KGtleXNbaV0sIG9ialtrZXlzW2ldXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5fSBpdGVtc1xuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiAoaXRlbXMpIHtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgb2JzZXJ2ZShpdGVtc1tpXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSBwcm9wZXJ0eSBpbnRvIGdldHRlci9zZXR0ZXIgc28gd2UgY2FuIGVtaXRcblx0ICogdGhlIGV2ZW50cyB3aGVuIHRoZSBwcm9wZXJ0eSBpcyBhY2Nlc3NlZC9jaGFuZ2VkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLmNvbnZlcnQgPSBmdW5jdGlvbiAoa2V5LCB2YWwpIHtcblx0ICBkZWZpbmVSZWFjdGl2ZSh0aGlzLnZhbHVlLCBrZXksIHZhbCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWRkIGFuIG93bmVyIHZtLCBzbyB0aGF0IHdoZW4gJHNldC8kZGVsZXRlIG11dGF0aW9uc1xuXHQgKiBoYXBwZW4gd2UgY2FuIG5vdGlmeSBvd25lciB2bXMgdG8gcHJveHkgdGhlIGtleXMgYW5kXG5cdCAqIGRpZ2VzdCB0aGUgd2F0Y2hlcnMuIFRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0XG5cdCAqIGlzIG9ic2VydmVkIGFzIGFuIGluc3RhbmNlJ3Mgcm9vdCAkZGF0YS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0T2JzZXJ2ZXIucHJvdG90eXBlLmFkZFZtID0gZnVuY3Rpb24gKHZtKSB7XG5cdCAgKHRoaXMudm1zIHx8ICh0aGlzLnZtcyA9IFtdKSkucHVzaCh2bSk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGFuIG93bmVyIHZtLiBUaGlzIGlzIGNhbGxlZCB3aGVuIHRoZSBvYmplY3QgaXNcblx0ICogc3dhcHBlZCBvdXQgYXMgYW4gaW5zdGFuY2UncyAkZGF0YSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0XG5cdE9ic2VydmVyLnByb3RvdHlwZS5yZW1vdmVWbSA9IGZ1bmN0aW9uICh2bSkge1xuXHQgIHRoaXMudm1zLiRyZW1vdmUodm0pO1xuXHR9O1xuXHRcblx0Ly8gaGVscGVyc1xuXHRcblx0LyoqXG5cdCAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBpbnRlcmNlcHRpbmdcblx0ICogdGhlIHByb3RvdHlwZSBjaGFpbiB1c2luZyBfX3Byb3RvX19cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuXHQgKiBAcGFyYW0ge09iamVjdH0gc3JjXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJvdG9BdWdtZW50KHRhcmdldCwgc3JjKSB7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tcHJvdG8gKi9cblx0ICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xuXHQgIC8qIGVzbGludC1lbmFibGUgbm8tcHJvdG8gKi9cblx0fVxuXHRcblx0LyoqXG5cdCAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBkZWZpbmluZ1xuXHQgKiBoaWRkZW4gcHJvcGVydGllcy5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvdG9cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb3B5QXVnbWVudCh0YXJnZXQsIHNyYywga2V5cykge1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIHZhciBrZXkgPSBrZXlzW2ldO1xuXHQgICAgZGVmKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQXR0ZW1wdCB0byBjcmVhdGUgYW4gb2JzZXJ2ZXIgaW5zdGFuY2UgZm9yIGEgdmFsdWUsXG5cdCAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG5cdCAqIG9yIHRoZSBleGlzdGluZyBvYnNlcnZlciBpZiB0aGUgdmFsdWUgYWxyZWFkeSBoYXMgb25lLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7VnVlfSBbdm1dXG5cdCAqIEByZXR1cm4ge09ic2VydmVyfHVuZGVmaW5lZH1cblx0ICogQHN0YXRpY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG9ic2VydmUodmFsdWUsIHZtKSB7XG5cdCAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBvYjtcblx0ICBpZiAoaGFzT3duKHZhbHVlLCAnX19vYl9fJykgJiYgdmFsdWUuX19vYl9fIGluc3RhbmNlb2YgT2JzZXJ2ZXIpIHtcblx0ICAgIG9iID0gdmFsdWUuX19vYl9fO1xuXHQgIH0gZWxzZSBpZiAoc2hvdWxkQ29udmVydCAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNQbGFpbk9iamVjdCh2YWx1ZSkpICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpICYmICF2YWx1ZS5faXNWdWUpIHtcblx0ICAgIG9iID0gbmV3IE9ic2VydmVyKHZhbHVlKTtcblx0ICB9XG5cdCAgaWYgKG9iICYmIHZtKSB7XG5cdCAgICBvYi5hZGRWbSh2bSk7XG5cdCAgfVxuXHQgIHJldHVybiBvYjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIERlZmluZSBhIHJlYWN0aXZlIHByb3BlcnR5IG9uIGFuIE9iamVjdC5cblx0ICpcblx0ICogQHBhcmFtIHtPYmplY3R9IG9ialxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGVmaW5lUmVhY3RpdmUob2JqLCBrZXksIHZhbCkge1xuXHQgIHZhciBkZXAgPSBuZXcgRGVwKCk7XG5cdFxuXHQgIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuXHQgIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHRcblx0ICAvLyBjYXRlciBmb3IgcHJlLWRlZmluZWQgZ2V0dGVyL3NldHRlcnNcblx0ICB2YXIgZ2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuZ2V0O1xuXHQgIHZhciBzZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5zZXQ7XG5cdFxuXHQgIHZhciBjaGlsZE9iID0gb2JzZXJ2ZSh2YWwpO1xuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuXHQgICAgZW51bWVyYWJsZTogdHJ1ZSxcblx0ICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0ICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIoKSB7XG5cdCAgICAgIHZhciB2YWx1ZSA9IGdldHRlciA/IGdldHRlci5jYWxsKG9iaikgOiB2YWw7XG5cdCAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG5cdCAgICAgICAgZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgIGlmIChjaGlsZE9iKSB7XG5cdCAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG5cdCAgICAgICAgICBmb3IgKHZhciBlLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgICAgICBlID0gdmFsdWVbaV07XG5cdCAgICAgICAgICAgIGUgJiYgZS5fX29iX18gJiYgZS5fX29iX18uZGVwLmRlcGVuZCgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiByZWFjdGl2ZVNldHRlcihuZXdWYWwpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcblx0ICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKHNldHRlcikge1xuXHQgICAgICAgIHNldHRlci5jYWxsKG9iaiwgbmV3VmFsKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB2YWwgPSBuZXdWYWw7XG5cdCAgICAgIH1cblx0ICAgICAgY2hpbGRPYiA9IG9ic2VydmUobmV3VmFsKTtcblx0ICAgICAgZGVwLm5vdGlmeSgpO1xuXHQgICAgfVxuXHQgIH0pO1xuXHR9XG5cdFxuXHRcblx0XG5cdHZhciB1dGlsID0gT2JqZWN0LmZyZWV6ZSh7XG5cdFx0ZGVmaW5lUmVhY3RpdmU6IGRlZmluZVJlYWN0aXZlLFxuXHRcdHNldDogc2V0LFxuXHRcdGRlbDogZGVsLFxuXHRcdGhhc093bjogaGFzT3duLFxuXHRcdGlzTGl0ZXJhbDogaXNMaXRlcmFsLFxuXHRcdGlzUmVzZXJ2ZWQ6IGlzUmVzZXJ2ZWQsXG5cdFx0X3RvU3RyaW5nOiBfdG9TdHJpbmcsXG5cdFx0dG9OdW1iZXI6IHRvTnVtYmVyLFxuXHRcdHRvQm9vbGVhbjogdG9Cb29sZWFuLFxuXHRcdHN0cmlwUXVvdGVzOiBzdHJpcFF1b3Rlcyxcblx0XHRjYW1lbGl6ZTogY2FtZWxpemUsXG5cdFx0aHlwaGVuYXRlOiBoeXBoZW5hdGUsXG5cdFx0Y2xhc3NpZnk6IGNsYXNzaWZ5LFxuXHRcdGJpbmQ6IGJpbmQsXG5cdFx0dG9BcnJheTogdG9BcnJheSxcblx0XHRleHRlbmQ6IGV4dGVuZCxcblx0XHRpc09iamVjdDogaXNPYmplY3QsXG5cdFx0aXNQbGFpbk9iamVjdDogaXNQbGFpbk9iamVjdCxcblx0XHRkZWY6IGRlZixcblx0XHRkZWJvdW5jZTogX2RlYm91bmNlLFxuXHRcdGluZGV4T2Y6IGluZGV4T2YsXG5cdFx0Y2FuY2VsbGFibGU6IGNhbmNlbGxhYmxlLFxuXHRcdGxvb3NlRXF1YWw6IGxvb3NlRXF1YWwsXG5cdFx0aXNBcnJheTogaXNBcnJheSxcblx0XHRoYXNQcm90bzogaGFzUHJvdG8sXG5cdFx0aW5Ccm93c2VyOiBpbkJyb3dzZXIsXG5cdFx0ZGV2dG9vbHM6IGRldnRvb2xzLFxuXHRcdGlzSUU6IGlzSUUsXG5cdFx0aXNJRTk6IGlzSUU5LFxuXHRcdGlzQW5kcm9pZDogaXNBbmRyb2lkLFxuXHRcdGlzSW9zOiBpc0lvcyxcblx0XHRpb3NWZXJzaW9uTWF0Y2g6IGlvc1ZlcnNpb25NYXRjaCxcblx0XHRpb3NWZXJzaW9uOiBpb3NWZXJzaW9uLFxuXHRcdGhhc011dGF0aW9uT2JzZXJ2ZXJCdWc6IGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcsXG5cdFx0Z2V0IHRyYW5zaXRpb25Qcm9wICgpIHsgcmV0dXJuIHRyYW5zaXRpb25Qcm9wOyB9LFxuXHRcdGdldCB0cmFuc2l0aW9uRW5kRXZlbnQgKCkgeyByZXR1cm4gdHJhbnNpdGlvbkVuZEV2ZW50OyB9LFxuXHRcdGdldCBhbmltYXRpb25Qcm9wICgpIHsgcmV0dXJuIGFuaW1hdGlvblByb3A7IH0sXG5cdFx0Z2V0IGFuaW1hdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIGFuaW1hdGlvbkVuZEV2ZW50OyB9LFxuXHRcdG5leHRUaWNrOiBuZXh0VGljayxcblx0XHRnZXQgX1NldCAoKSB7IHJldHVybiBfU2V0OyB9LFxuXHRcdHF1ZXJ5OiBxdWVyeSxcblx0XHRpbkRvYzogaW5Eb2MsXG5cdFx0Z2V0QXR0cjogZ2V0QXR0cixcblx0XHRnZXRCaW5kQXR0cjogZ2V0QmluZEF0dHIsXG5cdFx0aGFzQmluZEF0dHI6IGhhc0JpbmRBdHRyLFxuXHRcdGJlZm9yZTogYmVmb3JlLFxuXHRcdGFmdGVyOiBhZnRlcixcblx0XHRyZW1vdmU6IHJlbW92ZSxcblx0XHRwcmVwZW5kOiBwcmVwZW5kLFxuXHRcdHJlcGxhY2U6IHJlcGxhY2UsXG5cdFx0b246IG9uLFxuXHRcdG9mZjogb2ZmLFxuXHRcdHNldENsYXNzOiBzZXRDbGFzcyxcblx0XHRhZGRDbGFzczogYWRkQ2xhc3MsXG5cdFx0cmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuXHRcdGV4dHJhY3RDb250ZW50OiBleHRyYWN0Q29udGVudCxcblx0XHR0cmltTm9kZTogdHJpbU5vZGUsXG5cdFx0aXNUZW1wbGF0ZTogaXNUZW1wbGF0ZSxcblx0XHRjcmVhdGVBbmNob3I6IGNyZWF0ZUFuY2hvcixcblx0XHRmaW5kUmVmOiBmaW5kUmVmLFxuXHRcdG1hcE5vZGVSYW5nZTogbWFwTm9kZVJhbmdlLFxuXHRcdHJlbW92ZU5vZGVSYW5nZTogcmVtb3ZlTm9kZVJhbmdlLFxuXHRcdGlzRnJhZ21lbnQ6IGlzRnJhZ21lbnQsXG5cdFx0Z2V0T3V0ZXJIVE1MOiBnZXRPdXRlckhUTUwsXG5cdFx0bWVyZ2VPcHRpb25zOiBtZXJnZU9wdGlvbnMsXG5cdFx0cmVzb2x2ZUFzc2V0OiByZXNvbHZlQXNzZXQsXG5cdFx0Y2hlY2tDb21wb25lbnRBdHRyOiBjaGVja0NvbXBvbmVudEF0dHIsXG5cdFx0Y29tbW9uVGFnUkU6IGNvbW1vblRhZ1JFLFxuXHRcdHJlc2VydmVkVGFnUkU6IHJlc2VydmVkVGFnUkUsXG5cdFx0Z2V0IHdhcm4gKCkgeyByZXR1cm4gd2FybjsgfVxuXHR9KTtcblx0XG5cdHZhciB1aWQgPSAwO1xuXHRcblx0ZnVuY3Rpb24gaW5pdE1peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBUaGUgbWFpbiBpbml0IHNlcXVlbmNlLiBUaGlzIGlzIGNhbGxlZCBmb3IgZXZlcnlcblx0ICAgKiBpbnN0YW5jZSwgaW5jbHVkaW5nIG9uZXMgdGhhdCBhcmUgY3JlYXRlZCBmcm9tIGV4dGVuZGVkXG5cdCAgICogY29uc3RydWN0b3JzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnMgLSB0aGlzIG9wdGlvbnMgb2JqZWN0IHNob3VsZCBiZVxuXHQgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHJlc3VsdCBvZiBtZXJnaW5nIGNsYXNzXG5cdCAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zIGFuZCB0aGUgb3B0aW9ucyBwYXNzZWRcblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIGluIHRvIHRoZSBjb25zdHJ1Y3Rvci5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG5cdCAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblx0XG5cdCAgICB0aGlzLiRlbCA9IG51bGw7XG5cdCAgICB0aGlzLiRwYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcblx0ICAgIHRoaXMuJHJvb3QgPSB0aGlzLiRwYXJlbnQgPyB0aGlzLiRwYXJlbnQuJHJvb3QgOiB0aGlzO1xuXHQgICAgdGhpcy4kY2hpbGRyZW4gPSBbXTtcblx0ICAgIHRoaXMuJHJlZnMgPSB7fTsgLy8gY2hpbGQgdm0gcmVmZXJlbmNlc1xuXHQgICAgdGhpcy4kZWxzID0ge307IC8vIGVsZW1lbnQgcmVmZXJlbmNlc1xuXHQgICAgdGhpcy5fd2F0Y2hlcnMgPSBbXTsgLy8gYWxsIHdhdGNoZXJzIGFzIGFuIGFycmF5XG5cdCAgICB0aGlzLl9kaXJlY3RpdmVzID0gW107IC8vIGFsbCBkaXJlY3RpdmVzXG5cdFxuXHQgICAgLy8gYSB1aWRcblx0ICAgIHRoaXMuX3VpZCA9IHVpZCsrO1xuXHRcblx0ICAgIC8vIGEgZmxhZyB0byBhdm9pZCB0aGlzIGJlaW5nIG9ic2VydmVkXG5cdCAgICB0aGlzLl9pc1Z1ZSA9IHRydWU7XG5cdFxuXHQgICAgLy8gZXZlbnRzIGJvb2trZWVwaW5nXG5cdCAgICB0aGlzLl9ldmVudHMgPSB7fTsgLy8gcmVnaXN0ZXJlZCBjYWxsYmFja3Ncblx0ICAgIHRoaXMuX2V2ZW50c0NvdW50ID0ge307IC8vIGZvciAkYnJvYWRjYXN0IG9wdGltaXphdGlvblxuXHRcblx0ICAgIC8vIGZyYWdtZW50IGluc3RhbmNlIHByb3BlcnRpZXNcblx0ICAgIHRoaXMuX2lzRnJhZ21lbnQgPSBmYWxzZTtcblx0ICAgIHRoaXMuX2ZyYWdtZW50ID0gLy8gQHR5cGUge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAgICB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gLy8gQHR5cGUge1RleHR8Q29tbWVudH1cblx0ICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gbnVsbDsgLy8gQHR5cGUge1RleHR8Q29tbWVudH1cblx0XG5cdCAgICAvLyBsaWZlY3ljbGUgc3RhdGVcblx0ICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRoaXMuX2lzUmVhZHkgPSB0aGlzLl9pc0F0dGFjaGVkID0gdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRoaXMuX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuXHQgICAgdGhpcy5fdW5saW5rRm4gPSBudWxsO1xuXHRcblx0ICAgIC8vIGNvbnRleHQ6XG5cdCAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG5cdCAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2Vcblx0ICAgIC8vIGFuZCBpdHMgaG9zdC5cblx0ICAgIHRoaXMuX2NvbnRleHQgPSBvcHRpb25zLl9jb250ZXh0IHx8IHRoaXMuJHBhcmVudDtcblx0XG5cdCAgICAvLyBzY29wZTpcblx0ICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG5cdCAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuXHQgICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcblx0ICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cblx0ICAgIHRoaXMuX3Njb3BlID0gb3B0aW9ucy5fc2NvcGU7XG5cdFxuXHQgICAgLy8gZnJhZ21lbnQ6XG5cdCAgICAvLyBpZiB0aGlzIGluc3RhbmNlIGlzIGNvbXBpbGVkIGluc2lkZSBhIEZyYWdtZW50LCBpdFxuXHQgICAgLy8gbmVlZHMgdG8gcmVpZ3N0ZXIgaXRzZWxmIGFzIGEgY2hpbGQgb2YgdGhhdCBmcmFnbWVudFxuXHQgICAgLy8gZm9yIGF0dGFjaC9kZXRhY2ggdG8gd29yayBwcm9wZXJseS5cblx0ICAgIHRoaXMuX2ZyYWcgPSBvcHRpb25zLl9mcmFnO1xuXHQgICAgaWYgKHRoaXMuX2ZyYWcpIHtcblx0ICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi5wdXNoKHRoaXMpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHB1c2ggc2VsZiBpbnRvIHBhcmVudCAvIHRyYW5zY2x1c2lvbiBob3N0XG5cdCAgICBpZiAodGhpcy4kcGFyZW50KSB7XG5cdCAgICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4ucHVzaCh0aGlzKTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBtZXJnZSBvcHRpb25zLlxuXHQgICAgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnMgPSBtZXJnZU9wdGlvbnModGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zLCBvcHRpb25zLCB0aGlzKTtcblx0XG5cdCAgICAvLyBzZXQgcmVmXG5cdCAgICB0aGlzLl91cGRhdGVSZWYoKTtcblx0XG5cdCAgICAvLyBpbml0aWFsaXplIGRhdGEgYXMgZW1wdHkgb2JqZWN0LlxuXHQgICAgLy8gaXQgd2lsbCBiZSBmaWxsZWQgdXAgaW4gX2luaXREYXRhKCkuXG5cdCAgICB0aGlzLl9kYXRhID0ge307XG5cdFxuXHQgICAgLy8gY2FsbCBpbml0IGhvb2tcblx0ICAgIHRoaXMuX2NhbGxIb29rKCdpbml0Jyk7XG5cdFxuXHQgICAgLy8gaW5pdGlhbGl6ZSBkYXRhIG9ic2VydmF0aW9uIGFuZCBzY29wZSBpbmhlcml0YW5jZS5cblx0ICAgIHRoaXMuX2luaXRTdGF0ZSgpO1xuXHRcblx0ICAgIC8vIHNldHVwIGV2ZW50IHN5c3RlbSBhbmQgb3B0aW9uIGV2ZW50cy5cblx0ICAgIHRoaXMuX2luaXRFdmVudHMoKTtcblx0XG5cdCAgICAvLyBjYWxsIGNyZWF0ZWQgaG9va1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2NyZWF0ZWQnKTtcblx0XG5cdCAgICAvLyBpZiBgZWxgIG9wdGlvbiBpcyBwYXNzZWQsIHN0YXJ0IGNvbXBpbGF0aW9uLlxuXHQgICAgaWYgKG9wdGlvbnMuZWwpIHtcblx0ICAgICAgdGhpcy4kbW91bnQob3B0aW9ucy5lbCk7XG5cdCAgICB9XG5cdCAgfTtcblx0fVxuXHRcblx0dmFyIHBhdGhDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0XG5cdC8vIGFjdGlvbnNcblx0dmFyIEFQUEVORCA9IDA7XG5cdHZhciBQVVNIID0gMTtcblx0dmFyIElOQ19TVUJfUEFUSF9ERVBUSCA9IDI7XG5cdHZhciBQVVNIX1NVQl9QQVRIID0gMztcblx0XG5cdC8vIHN0YXRlc1xuXHR2YXIgQkVGT1JFX1BBVEggPSAwO1xuXHR2YXIgSU5fUEFUSCA9IDE7XG5cdHZhciBCRUZPUkVfSURFTlQgPSAyO1xuXHR2YXIgSU5fSURFTlQgPSAzO1xuXHR2YXIgSU5fU1VCX1BBVEggPSA0O1xuXHR2YXIgSU5fU0lOR0xFX1FVT1RFID0gNTtcblx0dmFyIElOX0RPVUJMRV9RVU9URSA9IDY7XG5cdHZhciBBRlRFUl9QQVRIID0gNztcblx0dmFyIEVSUk9SID0gODtcblx0XG5cdHZhciBwYXRoU3RhdGVNYWNoaW5lID0gW107XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9QQVRIXSA9IHtcblx0ICAnd3MnOiBbQkVGT1JFX1BBVEhdLFxuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9QQVRIXSA9IHtcblx0ICAnd3MnOiBbSU5fUEFUSF0sXG5cdCAgJy4nOiBbQkVGT1JFX0lERU5UXSxcblx0ICAnWyc6IFtJTl9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IFtBRlRFUl9QQVRIXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtCRUZPUkVfSURFTlRdID0ge1xuXHQgICd3cyc6IFtCRUZPUkVfSURFTlRdLFxuXHQgICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXVxuXHR9O1xuXHRcblx0cGF0aFN0YXRlTWFjaGluZVtJTl9JREVOVF0gPSB7XG5cdCAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuXHQgICdudW1iZXInOiBbSU5fSURFTlQsIEFQUEVORF0sXG5cdCAgJ3dzJzogW0lOX1BBVEgsIFBVU0hdLFxuXHQgICcuJzogW0JFRk9SRV9JREVOVCwgUFVTSF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEgsIFBVU0hdLFxuXHQgICdlb2YnOiBbQUZURVJfUEFUSCwgUFVTSF1cblx0fTtcblx0XG5cdHBhdGhTdGF0ZU1hY2hpbmVbSU5fU1VCX1BBVEhdID0ge1xuXHQgIFwiJ1wiOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdLFxuXHQgICdcIic6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF0sXG5cdCAgJ1snOiBbSU5fU1VCX1BBVEgsIElOQ19TVUJfUEFUSF9ERVBUSF0sXG5cdCAgJ10nOiBbSU5fUEFUSCwgUFVTSF9TVUJfUEFUSF0sXG5cdCAgJ2VvZic6IEVSUk9SLFxuXHQgICdlbHNlJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX1NJTkdMRV9RVU9URV0gPSB7XG5cdCAgXCInXCI6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcblx0ICAnZW9mJzogRVJST1IsXG5cdCAgJ2Vsc2UnOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdXG5cdH07XG5cdFxuXHRwYXRoU3RhdGVNYWNoaW5lW0lOX0RPVUJMRV9RVU9URV0gPSB7XG5cdCAgJ1wiJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuXHQgICdlb2YnOiBFUlJPUixcblx0ICAnZWxzZSc6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSBjaGFyYWN0ZXIgaW4gYSBrZXlwYXRoLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0NoYXJ9IGNoXG5cdCAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFBhdGhDaGFyVHlwZShjaCkge1xuXHQgIGlmIChjaCA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICByZXR1cm4gJ2VvZic7XG5cdCAgfVxuXHRcblx0ICB2YXIgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG5cdFxuXHQgIHN3aXRjaCAoY29kZSkge1xuXHQgICAgY2FzZSAweDVCOiAvLyBbXG5cdCAgICBjYXNlIDB4NUQ6IC8vIF1cblx0ICAgIGNhc2UgMHgyRTogLy8gLlxuXHQgICAgY2FzZSAweDIyOiAvLyBcIlxuXHQgICAgY2FzZSAweDI3OiAvLyAnXG5cdCAgICBjYXNlIDB4MzA6XG5cdCAgICAgIC8vIDBcblx0ICAgICAgcmV0dXJuIGNoO1xuXHRcblx0ICAgIGNhc2UgMHg1RjogLy8gX1xuXHQgICAgY2FzZSAweDI0OlxuXHQgICAgICAvLyAkXG5cdCAgICAgIHJldHVybiAnaWRlbnQnO1xuXHRcblx0ICAgIGNhc2UgMHgyMDogLy8gU3BhY2Vcblx0ICAgIGNhc2UgMHgwOTogLy8gVGFiXG5cdCAgICBjYXNlIDB4MEE6IC8vIE5ld2xpbmVcblx0ICAgIGNhc2UgMHgwRDogLy8gUmV0dXJuXG5cdCAgICBjYXNlIDB4QTA6IC8vIE5vLWJyZWFrIHNwYWNlXG5cdCAgICBjYXNlIDB4RkVGRjogLy8gQnl0ZSBPcmRlciBNYXJrXG5cdCAgICBjYXNlIDB4MjAyODogLy8gTGluZSBTZXBhcmF0b3Jcblx0ICAgIGNhc2UgMHgyMDI5OlxuXHQgICAgICAvLyBQYXJhZ3JhcGggU2VwYXJhdG9yXG5cdCAgICAgIHJldHVybiAnd3MnO1xuXHQgIH1cblx0XG5cdCAgLy8gYS16LCBBLVpcblx0ICBpZiAoY29kZSA+PSAweDYxICYmIGNvZGUgPD0gMHg3QSB8fCBjb2RlID49IDB4NDEgJiYgY29kZSA8PSAweDVBKSB7XG5cdCAgICByZXR1cm4gJ2lkZW50Jztcblx0ICB9XG5cdFxuXHQgIC8vIDEtOVxuXHQgIGlmIChjb2RlID49IDB4MzEgJiYgY29kZSA8PSAweDM5KSB7XG5cdCAgICByZXR1cm4gJ251bWJlcic7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gJ2Vsc2UnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzXG5cdCAqIGEgbGl0ZXJhbCBzdHJpbmcgb3IgbnVtYmVyLiBPdGhlcndpc2UgcHJlcGVuZCB0aGVcblx0ICogZHluYW1pYyBpbmRpY2F0b3IgKCopLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZm9ybWF0U3ViUGF0aChwYXRoKSB7XG5cdCAgdmFyIHRyaW1tZWQgPSBwYXRoLnRyaW0oKTtcblx0ICAvLyBpbnZhbGlkIGxlYWRpbmcgMFxuXHQgIGlmIChwYXRoLmNoYXJBdCgwKSA9PT0gJzAnICYmIGlzTmFOKHBhdGgpKSB7XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHJldHVybiBpc0xpdGVyYWwodHJpbW1lZCkgPyBzdHJpcFF1b3Rlcyh0cmltbWVkKSA6ICcqJyArIHRyaW1tZWQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBQYXJzZSBhIHN0cmluZyBwYXRoIGludG8gYW4gYXJyYXkgb2Ygc2VnbWVudHNcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlKHBhdGgpIHtcblx0ICB2YXIga2V5cyA9IFtdO1xuXHQgIHZhciBpbmRleCA9IC0xO1xuXHQgIHZhciBtb2RlID0gQkVGT1JFX1BBVEg7XG5cdCAgdmFyIHN1YlBhdGhEZXB0aCA9IDA7XG5cdCAgdmFyIGMsIG5ld0NoYXIsIGtleSwgdHlwZSwgdHJhbnNpdGlvbiwgYWN0aW9uLCB0eXBlTWFwO1xuXHRcblx0ICB2YXIgYWN0aW9ucyA9IFtdO1xuXHRcblx0ICBhY3Rpb25zW1BVU0hdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGtleXMucHVzaChrZXkpO1xuXHQgICAgICBrZXkgPSB1bmRlZmluZWQ7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgYWN0aW9uc1tBUFBFTkRdID0gZnVuY3Rpb24gKCkge1xuXHQgICAgaWYgKGtleSA9PT0gdW5kZWZpbmVkKSB7XG5cdCAgICAgIGtleSA9IG5ld0NoYXI7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBrZXkgKz0gbmV3Q2hhcjtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBhY3Rpb25zW0lOQ19TVUJfUEFUSF9ERVBUSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgIHN1YlBhdGhEZXB0aCsrO1xuXHQgIH07XG5cdFxuXHQgIGFjdGlvbnNbUFVTSF9TVUJfUEFUSF0gPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoc3ViUGF0aERlcHRoID4gMCkge1xuXHQgICAgICBzdWJQYXRoRGVwdGgtLTtcblx0ICAgICAgbW9kZSA9IElOX1NVQl9QQVRIO1xuXHQgICAgICBhY3Rpb25zW0FQUEVORF0oKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHN1YlBhdGhEZXB0aCA9IDA7XG5cdCAgICAgIGtleSA9IGZvcm1hdFN1YlBhdGgoa2V5KTtcblx0ICAgICAgaWYgKGtleSA9PT0gZmFsc2UpIHtcblx0ICAgICAgICByZXR1cm4gZmFsc2U7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgYWN0aW9uc1tQVVNIXSgpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgZnVuY3Rpb24gbWF5YmVVbmVzY2FwZVF1b3RlKCkge1xuXHQgICAgdmFyIG5leHRDaGFyID0gcGF0aFtpbmRleCArIDFdO1xuXHQgICAgaWYgKG1vZGUgPT09IElOX1NJTkdMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gXCInXCIgfHwgbW9kZSA9PT0gSU5fRE9VQkxFX1FVT1RFICYmIG5leHRDaGFyID09PSAnXCInKSB7XG5cdCAgICAgIGluZGV4Kys7XG5cdCAgICAgIG5ld0NoYXIgPSAnXFxcXCcgKyBuZXh0Q2hhcjtcblx0ICAgICAgYWN0aW9uc1tBUFBFTkRdKCk7XG5cdCAgICAgIHJldHVybiB0cnVlO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgd2hpbGUgKG1vZGUgIT0gbnVsbCkge1xuXHQgICAgaW5kZXgrKztcblx0ICAgIGMgPSBwYXRoW2luZGV4XTtcblx0XG5cdCAgICBpZiAoYyA9PT0gJ1xcXFwnICYmIG1heWJlVW5lc2NhcGVRdW90ZSgpKSB7XG5cdCAgICAgIGNvbnRpbnVlO1xuXHQgICAgfVxuXHRcblx0ICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7XG5cdCAgICB0eXBlTWFwID0gcGF0aFN0YXRlTWFjaGluZVttb2RlXTtcblx0ICAgIHRyYW5zaXRpb24gPSB0eXBlTWFwW3R5cGVdIHx8IHR5cGVNYXBbJ2Vsc2UnXSB8fCBFUlJPUjtcblx0XG5cdCAgICBpZiAodHJhbnNpdGlvbiA9PT0gRVJST1IpIHtcblx0ICAgICAgcmV0dXJuOyAvLyBwYXJzZSBlcnJvclxuXHQgICAgfVxuXHRcblx0ICAgIG1vZGUgPSB0cmFuc2l0aW9uWzBdO1xuXHQgICAgYWN0aW9uID0gYWN0aW9uc1t0cmFuc2l0aW9uWzFdXTtcblx0ICAgIGlmIChhY3Rpb24pIHtcblx0ICAgICAgbmV3Q2hhciA9IHRyYW5zaXRpb25bMl07XG5cdCAgICAgIG5ld0NoYXIgPSBuZXdDaGFyID09PSB1bmRlZmluZWQgPyBjIDogbmV3Q2hhcjtcblx0ICAgICAgaWYgKGFjdGlvbigpID09PSBmYWxzZSkge1xuXHQgICAgICAgIHJldHVybjtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIGlmIChtb2RlID09PSBBRlRFUl9QQVRIKSB7XG5cdCAgICAgIGtleXMucmF3ID0gcGF0aDtcblx0ICAgICAgcmV0dXJuIGtleXM7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRXh0ZXJuYWwgcGFyc2UgdGhhdCBjaGVjayBmb3IgYSBjYWNoZSBoaXQgZmlyc3Rcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlUGF0aChwYXRoKSB7XG5cdCAgdmFyIGhpdCA9IHBhdGhDYWNoZS5nZXQocGF0aCk7XG5cdCAgaWYgKCFoaXQpIHtcblx0ICAgIGhpdCA9IHBhcnNlKHBhdGgpO1xuXHQgICAgaWYgKGhpdCkge1xuXHQgICAgICBwYXRoQ2FjaGUucHV0KHBhdGgsIGhpdCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBoaXQ7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgZnJvbSBhbiBvYmplY3QgZnJvbSBhIHBhdGggc3RyaW5nXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRQYXRoKG9iaiwgcGF0aCkge1xuXHQgIHJldHVybiBwYXJzZUV4cHJlc3Npb24ocGF0aCkuZ2V0KG9iaik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBXYXJuIGFnYWluc3Qgc2V0dGluZyBub24tZXhpc3RlbnQgcm9vdCBwYXRoIG9uIGEgdm0uXG5cdCAqL1xuXHRcblx0dmFyIHdhcm5Ob25FeGlzdGVudDtcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICB3YXJuTm9uRXhpc3RlbnQgPSBmdW5jdGlvbiAocGF0aCwgdm0pIHtcblx0ICAgIHdhcm4oJ1lvdSBhcmUgc2V0dGluZyBhIG5vbi1leGlzdGVudCBwYXRoIFwiJyArIHBhdGgucmF3ICsgJ1wiICcgKyAnb24gYSB2bSBpbnN0YW5jZS4gQ29uc2lkZXIgcHJlLWluaXRpYWxpemluZyB0aGUgcHJvcGVydHkgJyArICd3aXRoIHRoZSBcImRhdGFcIiBvcHRpb24gZm9yIG1vcmUgcmVsaWFibGUgcmVhY3Rpdml0eSAnICsgJ2FuZCBiZXR0ZXIgcGVyZm9ybWFuY2UuJywgdm0pO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTZXQgb24gYW4gb2JqZWN0IGZyb20gYSBwYXRoXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcblx0ICogQHBhcmFtIHtTdHJpbmcgfCBBcnJheX0gcGF0aFxuXHQgKiBAcGFyYW0geyp9IHZhbFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHNldFBhdGgob2JqLCBwYXRoLCB2YWwpIHtcblx0ICB2YXIgb3JpZ2luYWwgPSBvYmo7XG5cdCAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuXHQgICAgcGF0aCA9IHBhcnNlKHBhdGgpO1xuXHQgIH1cblx0ICBpZiAoIXBhdGggfHwgIWlzT2JqZWN0KG9iaikpIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdCAgdmFyIGxhc3QsIGtleTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBsYXN0ID0gb2JqO1xuXHQgICAga2V5ID0gcGF0aFtpXTtcblx0ICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnKicpIHtcblx0ICAgICAga2V5ID0gcGFyc2VFeHByZXNzaW9uKGtleS5zbGljZSgxKSkuZ2V0LmNhbGwob3JpZ2luYWwsIG9yaWdpbmFsKTtcblx0ICAgIH1cblx0ICAgIGlmIChpIDwgbCAtIDEpIHtcblx0ICAgICAgb2JqID0gb2JqW2tleV07XG5cdCAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuXHQgICAgICAgIG9iaiA9IHt9O1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGxhc3QuX2lzVnVlKSB7XG5cdCAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgbGFzdCk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldChsYXN0LCBrZXksIG9iaik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChpc0FycmF5KG9iaikpIHtcblx0ICAgICAgICBvYmouJHNldChrZXksIHZhbCk7XG5cdCAgICAgIH0gZWxzZSBpZiAoa2V5IGluIG9iaikge1xuXHQgICAgICAgIG9ialtrZXldID0gdmFsO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9iai5faXNWdWUpIHtcblx0ICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBvYmopO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZXQob2JqLCBrZXksIHZhbCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdHZhciBwYXRoID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgcGFyc2VQYXRoOiBwYXJzZVBhdGgsXG5cdCAgZ2V0UGF0aDogZ2V0UGF0aCxcblx0ICBzZXRQYXRoOiBzZXRQYXRoXG5cdH0pO1xuXHRcblx0dmFyIGV4cHJlc3Npb25DYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0XG5cdHZhciBhbGxvd2VkS2V5d29yZHMgPSAnTWF0aCxEYXRlLHRoaXMsdHJ1ZSxmYWxzZSxudWxsLHVuZGVmaW5lZCxJbmZpbml0eSxOYU4sJyArICdpc05hTixpc0Zpbml0ZSxkZWNvZGVVUkksZGVjb2RlVVJJQ29tcG9uZW50LGVuY29kZVVSSSwnICsgJ2VuY29kZVVSSUNvbXBvbmVudCxwYXJzZUludCxwYXJzZUZsb2F0Jztcblx0dmFyIGFsbG93ZWRLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgYWxsb3dlZEtleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpO1xuXHRcblx0Ly8ga2V5d29yZHMgdGhhdCBkb24ndCBtYWtlIHNlbnNlIGluc2lkZSBleHByZXNzaW9uc1xuXHR2YXIgaW1wcm9wZXJLZXl3b3JkcyA9ICdicmVhayxjYXNlLGNsYXNzLGNhdGNoLGNvbnN0LGNvbnRpbnVlLGRlYnVnZ2VyLGRlZmF1bHQsJyArICdkZWxldGUsZG8sZWxzZSxleHBvcnQsZXh0ZW5kcyxmaW5hbGx5LGZvcixmdW5jdGlvbixpZiwnICsgJ2ltcG9ydCxpbixpbnN0YW5jZW9mLGxldCxyZXR1cm4sc3VwZXIsc3dpdGNoLHRocm93LHRyeSwnICsgJ3Zhcix3aGlsZSx3aXRoLHlpZWxkLGVudW0sYXdhaXQsaW1wbGVtZW50cyxwYWNrYWdlLCcgKyAncHJvdGVjdGVkLHN0YXRpYyxpbnRlcmZhY2UscHJpdmF0ZSxwdWJsaWMnO1xuXHR2YXIgaW1wcm9wZXJLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgaW1wcm9wZXJLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblx0XG5cdHZhciB3c1JFID0gL1xccy9nO1xuXHR2YXIgbmV3bGluZVJFID0gL1xcbi9nO1xuXHR2YXIgc2F2ZVJFID0gL1tcXHssXVxccypbXFx3XFwkX10rXFxzKjp8KCcoPzpbXidcXFxcXXxcXFxcLikqJ3xcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8YCg/OlteYFxcXFxdfFxcXFwuKSpcXCRcXHt8XFx9KD86W15gXFxcXF18XFxcXC4pKmB8YCg/OlteYFxcXFxdfFxcXFwuKSpgKXxuZXcgfHR5cGVvZiB8dm9pZCAvZztcblx0dmFyIHJlc3RvcmVSRSA9IC9cIihcXGQrKVwiL2c7XG5cdHZhciBwYXRoVGVzdFJFID0gL15bQS1aYS16XyRdW1xcdyRdKig/OlxcLltBLVphLXpfJF1bXFx3JF0qfFxcWycuKj8nXFxdfFxcW1wiLio/XCJcXF18XFxbXFxkK1xcXXxcXFtbQS1aYS16XyRdW1xcdyRdKlxcXSkqJC87XG5cdHZhciBpZGVudFJFID0gL1teXFx3JFxcLl0oPzpbQS1aYS16XyRdW1xcdyRdKikvZztcblx0dmFyIGxpdGVyYWxWYWx1ZVJFJDEgPSAvXig/OnRydWV8ZmFsc2V8bnVsbHx1bmRlZmluZWR8SW5maW5pdHl8TmFOKSQvO1xuXHRcblx0ZnVuY3Rpb24gbm9vcCgpIHt9XG5cdFxuXHQvKipcblx0ICogU2F2ZSAvIFJld3JpdGUgLyBSZXN0b3JlXG5cdCAqXG5cdCAqIFdoZW4gcmV3cml0aW5nIHBhdGhzIGZvdW5kIGluIGFuIGV4cHJlc3Npb24sIGl0IGlzXG5cdCAqIHBvc3NpYmxlIGZvciB0aGUgc2FtZSBsZXR0ZXIgc2VxdWVuY2VzIHRvIGJlIGZvdW5kIGluXG5cdCAqIHN0cmluZ3MgYW5kIE9iamVjdCBsaXRlcmFsIHByb3BlcnR5IGtleXMuIFRoZXJlZm9yZSB3ZVxuXHQgKiByZW1vdmUgYW5kIHN0b3JlIHRoZXNlIHBhcnRzIGluIGEgdGVtcG9yYXJ5IGFycmF5LCBhbmRcblx0ICogcmVzdG9yZSB0aGVtIGFmdGVyIHRoZSBwYXRoIHJld3JpdGUuXG5cdCAqL1xuXHRcblx0dmFyIHNhdmVkID0gW107XG5cdFxuXHQvKipcblx0ICogU2F2ZSByZXBsYWNlclxuXHQgKlxuXHQgKiBUaGUgc2F2ZSByZWdleCBjYW4gbWF0Y2ggdHdvIHBvc3NpYmxlIGNhc2VzOlxuXHQgKiAxLiBBbiBvcGVuaW5nIG9iamVjdCBsaXRlcmFsXG5cdCAqIDIuIEEgc3RyaW5nXG5cdCAqIElmIG1hdGNoZWQgYXMgYSBwbGFpbiBzdHJpbmcsIHdlIG5lZWQgdG8gZXNjYXBlIGl0c1xuXHQgKiBuZXdsaW5lcywgc2luY2UgdGhlIHN0cmluZyBuZWVkcyB0byBiZSBwcmVzZXJ2ZWQgd2hlblxuXHQgKiBnZW5lcmF0aW5nIHRoZSBmdW5jdGlvbiBib2R5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpc1N0cmluZyAtIHN0ciBpZiBtYXRjaGVkIGFzIGEgc3RyaW5nXG5cdCAqIEByZXR1cm4ge1N0cmluZ30gLSBwbGFjZWhvbGRlciB3aXRoIGluZGV4XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2F2ZShzdHIsIGlzU3RyaW5nKSB7XG5cdCAgdmFyIGkgPSBzYXZlZC5sZW5ndGg7XG5cdCAgc2F2ZWRbaV0gPSBpc1N0cmluZyA/IHN0ci5yZXBsYWNlKG5ld2xpbmVSRSwgJ1xcXFxuJykgOiBzdHI7XG5cdCAgcmV0dXJuICdcIicgKyBpICsgJ1wiJztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFBhdGggcmV3cml0ZSByZXBsYWNlclxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcmF3XG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXdyaXRlKHJhdykge1xuXHQgIHZhciBjID0gcmF3LmNoYXJBdCgwKTtcblx0ICB2YXIgcGF0aCA9IHJhdy5zbGljZSgxKTtcblx0ICBpZiAoYWxsb3dlZEtleXdvcmRzUkUudGVzdChwYXRoKSkge1xuXHQgICAgcmV0dXJuIHJhdztcblx0ICB9IGVsc2Uge1xuXHQgICAgcGF0aCA9IHBhdGguaW5kZXhPZignXCInKSA+IC0xID8gcGF0aC5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSkgOiBwYXRoO1xuXHQgICAgcmV0dXJuIGMgKyAnc2NvcGUuJyArIHBhdGg7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVzdG9yZSByZXBsYWNlclxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc3RyXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBpIC0gbWF0Y2hlZCBzYXZlIGluZGV4XG5cdCAqIEByZXR1cm4ge1N0cmluZ31cblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZXN0b3JlKHN0ciwgaSkge1xuXHQgIHJldHVybiBzYXZlZFtpXTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFJld3JpdGUgYW4gZXhwcmVzc2lvbiwgcHJlZml4aW5nIGFsbCBwYXRoIGFjY2Vzc29ycyB3aXRoXG5cdCAqIGBzY29wZS5gIGFuZCBnZW5lcmF0ZSBnZXR0ZXIvc2V0dGVyIGZ1bmN0aW9ucy5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlR2V0dGVyKGV4cCkge1xuXHQgIGlmIChpbXByb3BlcktleXdvcmRzUkUudGVzdChleHApKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0F2b2lkIHVzaW5nIHJlc2VydmVkIGtleXdvcmRzIGluIGV4cHJlc3Npb246ICcgKyBleHApO1xuXHQgIH1cblx0ICAvLyByZXNldCBzdGF0ZVxuXHQgIHNhdmVkLmxlbmd0aCA9IDA7XG5cdCAgLy8gc2F2ZSBzdHJpbmdzIGFuZCBvYmplY3QgbGl0ZXJhbCBrZXlzXG5cdCAgdmFyIGJvZHkgPSBleHAucmVwbGFjZShzYXZlUkUsIHNhdmUpLnJlcGxhY2Uod3NSRSwgJycpO1xuXHQgIC8vIHJld3JpdGUgYWxsIHBhdGhzXG5cdCAgLy8gcGFkIDEgc3BhY2UgaGVyZSBiZWNhdXNlIHRoZSByZWdleCBtYXRjaGVzIDEgZXh0cmEgY2hhclxuXHQgIGJvZHkgPSAoJyAnICsgYm9keSkucmVwbGFjZShpZGVudFJFLCByZXdyaXRlKS5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSk7XG5cdCAgcmV0dXJuIG1ha2VHZXR0ZXJGbihib2R5KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEJ1aWxkIGEgZ2V0dGVyIGZ1bmN0aW9uLiBSZXF1aXJlcyBldmFsLlxuXHQgKlxuXHQgKiBXZSBpc29sYXRlIHRoZSB0cnkvY2F0Y2ggc28gaXQgZG9lc24ndCBhZmZlY3QgdGhlXG5cdCAqIG9wdGltaXphdGlvbiBvZiB0aGUgcGFyc2UgZnVuY3Rpb24gd2hlbiBpdCBpcyBub3QgY2FsbGVkLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gYm9keVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZUdldHRlckZuKGJvZHkpIHtcblx0ICB0cnkge1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3Njb3BlJywgJ3JldHVybiAnICsgYm9keSArICc7Jyk7XG5cdCAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmIChlLnRvU3RyaW5nKCkubWF0Y2goL3Vuc2FmZS1ldmFsfENTUC8pKSB7XG5cdCAgICAgICAgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0aGUgZGVmYXVsdCBidWlsZCBvZiBWdWUuanMgaW4gYW4gZW52aXJvbm1lbnQgJyArICd3aXRoIENvbnRlbnQgU2VjdXJpdHkgUG9saWN5IHRoYXQgcHJvaGliaXRzIHVuc2FmZS1ldmFsLiAnICsgJ1VzZSB0aGUgQ1NQLWNvbXBsaWFudCBidWlsZCBpbnN0ZWFkOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvaW5zdGFsbGF0aW9uLmh0bWwjQ1NQLWNvbXBsaWFudC1idWlsZCcpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHdhcm4oJ0ludmFsaWQgZXhwcmVzc2lvbi4gJyArICdHZW5lcmF0ZWQgZnVuY3Rpb24gYm9keTogJyArIGJvZHkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gbm9vcDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgc2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgZXhwcmVzc2lvbi5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZVNldHRlcihleHApIHtcblx0ICB2YXIgcGF0aCA9IHBhcnNlUGF0aChleHApO1xuXHQgIGlmIChwYXRoKSB7XG5cdCAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCB2YWwpIHtcblx0ICAgICAgc2V0UGF0aChzY29wZSwgcGF0aCwgdmFsKTtcblx0ICAgIH07XG5cdCAgfSBlbHNlIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBzZXR0ZXIgZXhwcmVzc2lvbjogJyArIGV4cCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgYW4gZXhwcmVzc2lvbiBpbnRvIHJlLXdyaXR0ZW4gZ2V0dGVyL3NldHRlcnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICogQHBhcmFtIHtCb29sZWFufSBuZWVkU2V0XG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHBhcnNlRXhwcmVzc2lvbihleHAsIG5lZWRTZXQpIHtcblx0ICBleHAgPSBleHAudHJpbSgpO1xuXHQgIC8vIHRyeSBjYWNoZVxuXHQgIHZhciBoaXQgPSBleHByZXNzaW9uQ2FjaGUuZ2V0KGV4cCk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgaWYgKG5lZWRTZXQgJiYgIWhpdC5zZXQpIHtcblx0ICAgICAgaGl0LnNldCA9IGNvbXBpbGVTZXR0ZXIoaGl0LmV4cCk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gaGl0O1xuXHQgIH1cblx0ICB2YXIgcmVzID0geyBleHA6IGV4cCB9O1xuXHQgIHJlcy5nZXQgPSBpc1NpbXBsZVBhdGgoZXhwKSAmJiBleHAuaW5kZXhPZignWycpIDwgMFxuXHQgIC8vIG9wdGltaXplZCBzdXBlciBzaW1wbGUgZ2V0dGVyXG5cdCAgPyBtYWtlR2V0dGVyRm4oJ3Njb3BlLicgKyBleHApXG5cdCAgLy8gZHluYW1pYyBnZXR0ZXJcblx0ICA6IGNvbXBpbGVHZXR0ZXIoZXhwKTtcblx0ICBpZiAobmVlZFNldCkge1xuXHQgICAgcmVzLnNldCA9IGNvbXBpbGVTZXR0ZXIoZXhwKTtcblx0ICB9XG5cdCAgZXhwcmVzc2lvbkNhY2hlLnB1dChleHAsIHJlcyk7XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBzaW1wbGUgcGF0aC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzU2ltcGxlUGF0aChleHApIHtcblx0ICByZXR1cm4gcGF0aFRlc3RSRS50ZXN0KGV4cCkgJiZcblx0ICAvLyBkb24ndCB0cmVhdCBsaXRlcmFsIHZhbHVlcyBhcyBwYXRoc1xuXHQgICFsaXRlcmFsVmFsdWVSRSQxLnRlc3QoZXhwKSAmJlxuXHQgIC8vIE1hdGggY29uc3RhbnRzIGUuZy4gTWF0aC5QSSwgTWF0aC5FIGV0Yy5cblx0ICBleHAuc2xpY2UoMCwgNSkgIT09ICdNYXRoLic7XG5cdH1cblx0XG5cdHZhciBleHByZXNzaW9uID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgcGFyc2VFeHByZXNzaW9uOiBwYXJzZUV4cHJlc3Npb24sXG5cdCAgaXNTaW1wbGVQYXRoOiBpc1NpbXBsZVBhdGhcblx0fSk7XG5cdFxuXHQvLyB3ZSBoYXZlIHR3byBzZXBhcmF0ZSBxdWV1ZXM6IG9uZSBmb3IgZGlyZWN0aXZlIHVwZGF0ZXNcblx0Ly8gYW5kIG9uZSBmb3IgdXNlciB3YXRjaGVyIHJlZ2lzdGVyZWQgdmlhICR3YXRjaCgpLlxuXHQvLyB3ZSB3YW50IHRvIGd1YXJhbnRlZSBkaXJlY3RpdmUgdXBkYXRlcyB0byBiZSBjYWxsZWRcblx0Ly8gYmVmb3JlIHVzZXIgd2F0Y2hlcnMgc28gdGhhdCB3aGVuIHVzZXIgd2F0Y2hlcnMgYXJlXG5cdC8vIHRyaWdnZXJlZCwgdGhlIERPTSB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBpbiB1cGRhdGVkXG5cdC8vIHN0YXRlLlxuXHRcblx0dmFyIHF1ZXVlID0gW107XG5cdHZhciB1c2VyUXVldWUgPSBbXTtcblx0dmFyIGhhcyA9IHt9O1xuXHR2YXIgY2lyY3VsYXIgPSB7fTtcblx0dmFyIHdhaXRpbmcgPSBmYWxzZTtcblx0XG5cdC8qKlxuXHQgKiBSZXNldCB0aGUgYmF0Y2hlcidzIHN0YXRlLlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHJlc2V0QmF0Y2hlclN0YXRlKCkge1xuXHQgIHF1ZXVlLmxlbmd0aCA9IDA7XG5cdCAgdXNlclF1ZXVlLmxlbmd0aCA9IDA7XG5cdCAgaGFzID0ge307XG5cdCAgY2lyY3VsYXIgPSB7fTtcblx0ICB3YWl0aW5nID0gZmFsc2U7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmbHVzaEJhdGNoZXJRdWV1ZSgpIHtcblx0ICB2YXIgX2FnYWluID0gdHJ1ZTtcblx0XG5cdCAgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7XG5cdCAgICBfYWdhaW4gPSBmYWxzZTtcblx0XG5cdCAgICBydW5CYXRjaGVyUXVldWUocXVldWUpO1xuXHQgICAgcnVuQmF0Y2hlclF1ZXVlKHVzZXJRdWV1ZSk7XG5cdCAgICAvLyB1c2VyIHdhdGNoZXJzIHRyaWdnZXJlZCBtb3JlIHdhdGNoZXJzLFxuXHQgICAgLy8ga2VlcCBmbHVzaGluZyB1bnRpbCBpdCBkZXBsZXRlc1xuXHQgICAgaWYgKHF1ZXVlLmxlbmd0aCkge1xuXHQgICAgICBfYWdhaW4gPSB0cnVlO1xuXHQgICAgICBjb250aW51ZSBfZnVuY3Rpb247XG5cdCAgICB9XG5cdCAgICAvLyBkZXYgdG9vbCBob29rXG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmIChkZXZ0b29scyAmJiBjb25maWcuZGV2dG9vbHMpIHtcblx0ICAgICAgZGV2dG9vbHMuZW1pdCgnZmx1c2gnKTtcblx0ICAgIH1cblx0ICAgIHJlc2V0QmF0Y2hlclN0YXRlKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUnVuIHRoZSB3YXRjaGVycyBpbiBhIHNpbmdsZSBxdWV1ZS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gcXVldWVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBydW5CYXRjaGVyUXVldWUocXVldWUpIHtcblx0ICAvLyBkbyBub3QgY2FjaGUgbGVuZ3RoIGJlY2F1c2UgbW9yZSB3YXRjaGVycyBtaWdodCBiZSBwdXNoZWRcblx0ICAvLyBhcyB3ZSBydW4gZXhpc3Rpbmcgd2F0Y2hlcnNcblx0ICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG5cdCAgICB2YXIgd2F0Y2hlciA9IHF1ZXVlW2ldO1xuXHQgICAgdmFyIGlkID0gd2F0Y2hlci5pZDtcblx0ICAgIGhhc1tpZF0gPSBudWxsO1xuXHQgICAgd2F0Y2hlci5ydW4oKTtcblx0ICAgIC8vIGluIGRldiBidWlsZCwgY2hlY2sgYW5kIHN0b3AgY2lyY3VsYXIgdXBkYXRlcy5cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuXHQgICAgICBjaXJjdWxhcltpZF0gPSAoY2lyY3VsYXJbaWRdIHx8IDApICsgMTtcblx0ICAgICAgaWYgKGNpcmN1bGFyW2lkXSA+IGNvbmZpZy5fbWF4VXBkYXRlQ291bnQpIHtcblx0ICAgICAgICB3YXJuKCdZb3UgbWF5IGhhdmUgYW4gaW5maW5pdGUgdXBkYXRlIGxvb3AgZm9yIHdhdGNoZXIgJyArICd3aXRoIGV4cHJlc3Npb24gXCInICsgd2F0Y2hlci5leHByZXNzaW9uICsgJ1wiJywgd2F0Y2hlci52bSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcXVldWUubGVuZ3RoID0gMDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFB1c2ggYSB3YXRjaGVyIGludG8gdGhlIHdhdGNoZXIgcXVldWUuXG5cdCAqIEpvYnMgd2l0aCBkdXBsaWNhdGUgSURzIHdpbGwgYmUgc2tpcHBlZCB1bmxlc3MgaXQnc1xuXHQgKiBwdXNoZWQgd2hlbiB0aGUgcXVldWUgaXMgYmVpbmcgZmx1c2hlZC5cblx0ICpcblx0ICogQHBhcmFtIHtXYXRjaGVyfSB3YXRjaGVyXG5cdCAqICAgcHJvcGVydGllczpcblx0ICogICAtIHtOdW1iZXJ9IGlkXG5cdCAqICAgLSB7RnVuY3Rpb259IHJ1blxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHB1c2hXYXRjaGVyKHdhdGNoZXIpIHtcblx0ICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuXHQgIGlmIChoYXNbaWRdID09IG51bGwpIHtcblx0ICAgIC8vIHB1c2ggd2F0Y2hlciBpbnRvIGFwcHJvcHJpYXRlIHF1ZXVlXG5cdCAgICB2YXIgcSA9IHdhdGNoZXIudXNlciA/IHVzZXJRdWV1ZSA6IHF1ZXVlO1xuXHQgICAgaGFzW2lkXSA9IHEubGVuZ3RoO1xuXHQgICAgcS5wdXNoKHdhdGNoZXIpO1xuXHQgICAgLy8gcXVldWUgdGhlIGZsdXNoXG5cdCAgICBpZiAoIXdhaXRpbmcpIHtcblx0ICAgICAgd2FpdGluZyA9IHRydWU7XG5cdCAgICAgIG5leHRUaWNrKGZsdXNoQmF0Y2hlclF1ZXVlKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB1aWQkMiA9IDA7XG5cdFxuXHQvKipcblx0ICogQSB3YXRjaGVyIHBhcnNlcyBhbiBleHByZXNzaW9uLCBjb2xsZWN0cyBkZXBlbmRlbmNpZXMsXG5cdCAqIGFuZCBmaXJlcyBjYWxsYmFjayB3aGVuIHRoZSBleHByZXNzaW9uIHZhbHVlIGNoYW5nZXMuXG5cdCAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogICAgICAgICAgICAgICAgIC0ge0FycmF5fSBmaWx0ZXJzXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB0d29XYXlcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHVzZXJcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHN5bmNcblx0ICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxhenlcblx0ICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcHJlUHJvY2Vzc11cblx0ICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcG9zdFByb2Nlc3NdXG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcblx0ICAvLyBtaXggaW4gb3B0aW9uc1xuXHQgIGlmIChvcHRpb25zKSB7XG5cdCAgICBleHRlbmQodGhpcywgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIHZhciBpc0ZuID0gdHlwZW9mIGV4cE9yRm4gPT09ICdmdW5jdGlvbic7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHZtLl93YXRjaGVycy5wdXNoKHRoaXMpO1xuXHQgIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm47XG5cdCAgdGhpcy5jYiA9IGNiO1xuXHQgIHRoaXMuaWQgPSArK3VpZCQyOyAvLyB1aWQgZm9yIGJhdGNoaW5nXG5cdCAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuXHQgIHRoaXMuZGlydHkgPSB0aGlzLmxhenk7IC8vIGZvciBsYXp5IHdhdGNoZXJzXG5cdCAgdGhpcy5kZXBzID0gW107XG5cdCAgdGhpcy5uZXdEZXBzID0gW107XG5cdCAgdGhpcy5kZXBJZHMgPSBuZXcgX1NldCgpO1xuXHQgIHRoaXMubmV3RGVwSWRzID0gbmV3IF9TZXQoKTtcblx0ICB0aGlzLnByZXZFcnJvciA9IG51bGw7IC8vIGZvciBhc3luYyBlcnJvciBzdGFja3Ncblx0ICAvLyBwYXJzZSBleHByZXNzaW9uIGZvciBnZXR0ZXIvc2V0dGVyXG5cdCAgaWYgKGlzRm4pIHtcblx0ICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcblx0ICAgIHRoaXMuc2V0dGVyID0gdW5kZWZpbmVkO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cE9yRm4sIHRoaXMudHdvV2F5KTtcblx0ICAgIHRoaXMuZ2V0dGVyID0gcmVzLmdldDtcblx0ICAgIHRoaXMuc2V0dGVyID0gcmVzLnNldDtcblx0ICB9XG5cdCAgdGhpcy52YWx1ZSA9IHRoaXMubGF6eSA/IHVuZGVmaW5lZCA6IHRoaXMuZ2V0KCk7XG5cdCAgLy8gc3RhdGUgZm9yIGF2b2lkaW5nIGZhbHNlIHRyaWdnZXJzIGZvciBkZWVwIGFuZCBBcnJheVxuXHQgIC8vIHdhdGNoZXJzIGR1cmluZyB2bS5fZGlnZXN0KClcblx0ICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRXZhbHVhdGUgdGhlIGdldHRlciwgYW5kIHJlLWNvbGxlY3QgZGVwZW5kZW5jaWVzLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLmJlZm9yZUdldCgpO1xuXHQgIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcblx0ICB2YXIgdmFsdWU7XG5cdCAgdHJ5IHtcblx0ICAgIHZhbHVlID0gdGhpcy5nZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUpO1xuXHQgIH0gY2F0Y2ggKGUpIHtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuXHQgICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgZXhwcmVzc2lvbiAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIFwidG91Y2hcIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhc1xuXHQgIC8vIGRlcGVuZGVuY2llcyBmb3IgZGVlcCB3YXRjaGluZ1xuXHQgIGlmICh0aGlzLmRlZXApIHtcblx0ICAgIHRyYXZlcnNlKHZhbHVlKTtcblx0ICB9XG5cdCAgaWYgKHRoaXMucHJlUHJvY2Vzcykge1xuXHQgICAgdmFsdWUgPSB0aGlzLnByZVByb2Nlc3ModmFsdWUpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5maWx0ZXJzKSB7XG5cdCAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIG51bGwsIHRoaXMuZmlsdGVycywgZmFsc2UpO1xuXHQgIH1cblx0ICBpZiAodGhpcy5wb3N0UHJvY2Vzcykge1xuXHQgICAgdmFsdWUgPSB0aGlzLnBvc3RQcm9jZXNzKHZhbHVlKTtcblx0ICB9XG5cdCAgdGhpcy5hZnRlckdldCgpO1xuXHQgIHJldHVybiB2YWx1ZTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgdmFyIHNjb3BlID0gdGhpcy5zY29wZSB8fCB0aGlzLnZtO1xuXHQgIGlmICh0aGlzLmZpbHRlcnMpIHtcblx0ICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyh2YWx1ZSwgdGhpcy52YWx1ZSwgdGhpcy5maWx0ZXJzLCB0cnVlKTtcblx0ICB9XG5cdCAgdHJ5IHtcblx0ICAgIHRoaXMuc2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlLCB2YWx1ZSk7XG5cdCAgfSBjYXRjaCAoZSkge1xuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG5cdCAgICAgIHdhcm4oJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBzZXR0ZXIgJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyB0d28td2F5IHN5bmMgZm9yIHYtZm9yIGFsaWFzXG5cdCAgdmFyIGZvckNvbnRleHQgPSBzY29wZS4kZm9yQ29udGV4dDtcblx0ICBpZiAoZm9yQ29udGV4dCAmJiBmb3JDb250ZXh0LmFsaWFzID09PSB0aGlzLmV4cHJlc3Npb24pIHtcblx0ICAgIGlmIChmb3JDb250ZXh0LmZpbHRlcnMpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHR3by13YXkgYmluZGluZyBvbiAnICsgJ2Egdi1mb3IgYWxpYXMgKCcgKyB0aGlzLmV4cHJlc3Npb24gKyAnKSwgYW5kIHRoZSAnICsgJ3YtZm9yIGhhcyBmaWx0ZXJzLiBUaGlzIHdpbGwgbm90IHdvcmsgcHJvcGVybHkuICcgKyAnRWl0aGVyIHJlbW92ZSB0aGUgZmlsdGVycyBvciB1c2UgYW4gYXJyYXkgb2YgJyArICdvYmplY3RzIGFuZCBiaW5kIHRvIG9iamVjdCBwcm9wZXJ0aWVzIGluc3RlYWQuJywgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGZvckNvbnRleHQuX3dpdGhMb2NrKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHNjb3BlLiRrZXkpIHtcblx0ICAgICAgICAvLyBvcmlnaW5hbCBpcyBhbiBvYmplY3Rcblx0ICAgICAgICBmb3JDb250ZXh0LnJhd1ZhbHVlW3Njb3BlLiRrZXldID0gdmFsdWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZS4kc2V0KHNjb3BlLiRpbmRleCwgdmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9KTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUHJlcGFyZSBmb3IgZGVwZW5kZW5jeSBjb2xsZWN0aW9uLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmJlZm9yZUdldCA9IGZ1bmN0aW9uICgpIHtcblx0ICBEZXAudGFyZ2V0ID0gdGhpcztcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBBZGQgYSBkZXBlbmRlbmN5IHRvIHRoaXMgZGlyZWN0aXZlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0RlcH0gZGVwXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gKGRlcCkge1xuXHQgIHZhciBpZCA9IGRlcC5pZDtcblx0ICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhpZCkpIHtcblx0ICAgIHRoaXMubmV3RGVwSWRzLmFkZChpZCk7XG5cdCAgICB0aGlzLm5ld0RlcHMucHVzaChkZXApO1xuXHQgICAgaWYgKCF0aGlzLmRlcElkcy5oYXMoaWQpKSB7XG5cdCAgICAgIGRlcC5hZGRTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENsZWFuIHVwIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG5cdCAqL1xuXHRcblx0V2F0Y2hlci5wcm90b3R5cGUuYWZ0ZXJHZXQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgRGVwLnRhcmdldCA9IG51bGw7XG5cdCAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHZhciBkZXAgPSB0aGlzLmRlcHNbaV07XG5cdCAgICBpZiAoIXRoaXMubmV3RGVwSWRzLmhhcyhkZXAuaWQpKSB7XG5cdCAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHZhciB0bXAgPSB0aGlzLmRlcElkcztcblx0ICB0aGlzLmRlcElkcyA9IHRoaXMubmV3RGVwSWRzO1xuXHQgIHRoaXMubmV3RGVwSWRzID0gdG1wO1xuXHQgIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG5cdCAgdG1wID0gdGhpcy5kZXBzO1xuXHQgIHRoaXMuZGVwcyA9IHRoaXMubmV3RGVwcztcblx0ICB0aGlzLm5ld0RlcHMgPSB0bXA7XG5cdCAgdGhpcy5uZXdEZXBzLmxlbmd0aCA9IDA7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU3Vic2NyaWJlciBpbnRlcmZhY2UuXG5cdCAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hhbGxvd1xuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnVwZGF0ZSA9IGZ1bmN0aW9uIChzaGFsbG93KSB7XG5cdCAgaWYgKHRoaXMubGF6eSkge1xuXHQgICAgdGhpcy5kaXJ0eSA9IHRydWU7XG5cdCAgfSBlbHNlIGlmICh0aGlzLnN5bmMgfHwgIWNvbmZpZy5hc3luYykge1xuXHQgICAgdGhpcy5ydW4oKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgLy8gaWYgcXVldWVkLCBvbmx5IG92ZXJ3cml0ZSBzaGFsbG93IHdpdGggbm9uLXNoYWxsb3csXG5cdCAgICAvLyBidXQgbm90IHRoZSBvdGhlciB3YXkgYXJvdW5kLlxuXHQgICAgdGhpcy5zaGFsbG93ID0gdGhpcy5xdWV1ZWQgPyBzaGFsbG93ID8gdGhpcy5zaGFsbG93IDogZmFsc2UgOiAhIXNoYWxsb3c7XG5cdCAgICB0aGlzLnF1ZXVlZCA9IHRydWU7XG5cdCAgICAvLyByZWNvcmQgYmVmb3JlLXB1c2ggZXJyb3Igc3RhY2sgaW4gZGVidWcgbW9kZVxuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcuZGVidWcpIHtcblx0ICAgICAgdGhpcy5wcmV2RXJyb3IgPSBuZXcgRXJyb3IoJ1t2dWVdIGFzeW5jIHN0YWNrIHRyYWNlJyk7XG5cdCAgICB9XG5cdCAgICBwdXNoV2F0Y2hlcih0aGlzKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQmF0Y2hlciBqb2IgaW50ZXJmYWNlLlxuXHQgKiBXaWxsIGJlIGNhbGxlZCBieSB0aGUgYmF0Y2hlci5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5ydW4gPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMuYWN0aXZlKSB7XG5cdCAgICB2YXIgdmFsdWUgPSB0aGlzLmdldCgpO1xuXHQgICAgaWYgKHZhbHVlICE9PSB0aGlzLnZhbHVlIHx8XG5cdCAgICAvLyBEZWVwIHdhdGNoZXJzIGFuZCB3YXRjaGVycyBvbiBPYmplY3QvQXJyYXlzIHNob3VsZCBmaXJlIGV2ZW5cblx0ICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXlcblx0ICAgIC8vIGhhdmUgbXV0YXRlZDsgYnV0IG9ubHkgZG8gc28gaWYgdGhpcyBpcyBhXG5cdCAgICAvLyBub24tc2hhbGxvdyB1cGRhdGUgKGNhdXNlZCBieSBhIHZtIGRpZ2VzdCkuXG5cdCAgICAoaXNPYmplY3QodmFsdWUpIHx8IHRoaXMuZGVlcCkgJiYgIXRoaXMuc2hhbGxvdykge1xuXHQgICAgICAvLyBzZXQgbmV3IHZhbHVlXG5cdCAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG5cdCAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcblx0ICAgICAgLy8gaW4gZGVidWcgKyBhc3luYyBtb2RlLCB3aGVuIGEgd2F0Y2hlciBjYWxsYmFja3Ncblx0ICAgICAgLy8gdGhyb3dzLCB3ZSBhbHNvIHRocm93IHRoZSBzYXZlZCBiZWZvcmUtcHVzaCBlcnJvclxuXHQgICAgICAvLyBzbyB0aGUgZnVsbCBjcm9zcy10aWNrIHN0YWNrIHRyYWNlIGlzIGF2YWlsYWJsZS5cblx0ICAgICAgdmFyIHByZXZFcnJvciA9IHRoaXMucHJldkVycm9yO1xuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnICYmIHByZXZFcnJvcikge1xuXHQgICAgICAgIHRoaXMucHJldkVycm9yID0gbnVsbDtcblx0ICAgICAgICB0cnkge1xuXHQgICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge1xuXHQgICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgICB0aHJvdyBwcmV2RXJyb3I7XG5cdCAgICAgICAgICB9LCAwKTtcblx0ICAgICAgICAgIHRocm93IGU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBFdmFsdWF0ZSB0aGUgdmFsdWUgb2YgdGhlIHdhdGNoZXIuXG5cdCAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy5cblx0ICovXG5cdFxuXHRXYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAvLyBhdm9pZCBvdmVyd3JpdGluZyBhbm90aGVyIHdhdGNoZXIgdGhhdCBpcyBiZWluZ1xuXHQgIC8vIGNvbGxlY3RlZC5cblx0ICB2YXIgY3VycmVudCA9IERlcC50YXJnZXQ7XG5cdCAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0KCk7XG5cdCAgdGhpcy5kaXJ0eSA9IGZhbHNlO1xuXHQgIERlcC50YXJnZXQgPSBjdXJyZW50O1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIERlcGVuZCBvbiBhbGwgZGVwcyBjb2xsZWN0ZWQgYnkgdGhpcyB3YXRjaGVyLlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgdGhpcy5kZXBzW2ldLmRlcGVuZCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YmNyaWJlciBsaXN0LlxuXHQgKi9cblx0XG5cdFdhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuXHQgIGlmICh0aGlzLmFjdGl2ZSkge1xuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSB2bSdzIHdhdGNoZXIgbGlzdFxuXHQgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGV4cGVuc2l2ZSBvcGVyYXRpb24gc28gd2Ugc2tpcCBpdFxuXHQgICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIGRlc3Ryb3llZCBvciBpcyBwZXJmb3JtaW5nIGEgdi1mb3Jcblx0ICAgIC8vIHJlLXJlbmRlciAodGhlIHdhdGNoZXIgbGlzdCBpcyB0aGVuIGZpbHRlcmVkIGJ5IHYtZm9yKS5cblx0ICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdGhpcy52bS5fdkZvclJlbW92aW5nKSB7XG5cdCAgICAgIHRoaXMudm0uX3dhdGNoZXJzLiRyZW1vdmUodGhpcyk7XG5cdCAgICB9XG5cdCAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIHRoaXMuZGVwc1tpXS5yZW1vdmVTdWIodGhpcyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuXHQgICAgdGhpcy52bSA9IHRoaXMuY2IgPSB0aGlzLnZhbHVlID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogUmVjcnVzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcblx0ICogZ2V0dGVycywgc28gdGhhdCBldmVyeSBuZXN0ZWQgcHJvcGVydHkgaW5zaWRlIHRoZSBvYmplY3Rcblx0ICogaXMgY29sbGVjdGVkIGFzIGEgXCJkZWVwXCIgZGVwZW5kZW5jeS5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICovXG5cdFxuXHR2YXIgc2Vlbk9iamVjdHMgPSBuZXcgX1NldCgpO1xuXHRmdW5jdGlvbiB0cmF2ZXJzZSh2YWwsIHNlZW4pIHtcblx0ICB2YXIgaSA9IHVuZGVmaW5lZCxcblx0ICAgICAga2V5cyA9IHVuZGVmaW5lZDtcblx0ICBpZiAoIXNlZW4pIHtcblx0ICAgIHNlZW4gPSBzZWVuT2JqZWN0cztcblx0ICAgIHNlZW4uY2xlYXIoKTtcblx0ICB9XG5cdCAgdmFyIGlzQSA9IGlzQXJyYXkodmFsKTtcblx0ICB2YXIgaXNPID0gaXNPYmplY3QodmFsKTtcblx0ICBpZiAoKGlzQSB8fCBpc08pICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsKSkge1xuXHQgICAgaWYgKHZhbC5fX29iX18pIHtcblx0ICAgICAgdmFyIGRlcElkID0gdmFsLl9fb2JfXy5kZXAuaWQ7XG5cdCAgICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgc2Vlbi5hZGQoZGVwSWQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAoaXNBKSB7XG5cdCAgICAgIGkgPSB2YWwubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxbaV0sIHNlZW4pO1xuXHQgICAgfSBlbHNlIGlmIChpc08pIHtcblx0ICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG5cdCAgICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2tleXNbaV1dLCBzZWVuKTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciB0ZXh0JDEgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB0aGlzLmF0dHIgPSB0aGlzLmVsLm5vZGVUeXBlID09PSAzID8gJ2RhdGEnIDogJ3RleHRDb250ZW50Jztcblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdGhpcy5lbFt0aGlzLmF0dHJdID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgdGVtcGxhdGVDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0dmFyIGlkU2VsZWN0b3JDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblx0XG5cdHZhciBtYXAgPSB7XG5cdCAgZWZhdWx0OiBbMCwgJycsICcnXSxcblx0ICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuXHQgIHRyOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcblx0ICBjb2w6IFsyLCAnPHRhYmxlPjx0Ym9keT48L3Rib2R5Pjxjb2xncm91cD4nLCAnPC9jb2xncm91cD48L3RhYmxlPiddXG5cdH07XG5cdFxuXHRtYXAudGQgPSBtYXAudGggPSBbMywgJzx0YWJsZT48dGJvZHk+PHRyPicsICc8L3RyPjwvdGJvZHk+PC90YWJsZT4nXTtcblx0XG5cdG1hcC5vcHRpb24gPSBtYXAub3B0Z3JvdXAgPSBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsICc8L3NlbGVjdD4nXTtcblx0XG5cdG1hcC50aGVhZCA9IG1hcC50Ym9keSA9IG1hcC5jb2xncm91cCA9IG1hcC5jYXB0aW9uID0gbWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cdFxuXHRtYXAuZyA9IG1hcC5kZWZzID0gbWFwLnN5bWJvbCA9IG1hcC51c2UgPSBtYXAuaW1hZ2UgPSBtYXAudGV4dCA9IG1hcC5jaXJjbGUgPSBtYXAuZWxsaXBzZSA9IG1hcC5saW5lID0gbWFwLnBhdGggPSBtYXAucG9seWdvbiA9IG1hcC5wb2x5bGluZSA9IG1hcC5yZWN0ID0gWzEsICc8c3ZnICcgKyAneG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiICcgKyAneG1sbnM6eGxpbms9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rXCIgJyArICd4bWxuczpldj1cImh0dHA6Ly93d3cudzMub3JnLzIwMDEveG1sLWV2ZW50c1wiJyArICd2ZXJzaW9uPVwiMS4xXCI+JywgJzwvc3ZnPiddO1xuXHRcblx0LyoqXG5cdCAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIHN1cHBvcnRlZCB0ZW1wbGF0ZSBub2RlIHdpdGggYVxuXHQgKiBEb2N1bWVudEZyYWdtZW50IGNvbnRlbnQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzUmVhbFRlbXBsYXRlKG5vZGUpIHtcblx0ICByZXR1cm4gaXNUZW1wbGF0ZShub2RlKSAmJiBpc0ZyYWdtZW50KG5vZGUuY29udGVudCk7XG5cdH1cblx0XG5cdHZhciB0YWdSRSQxID0gLzwoW1xcdzotXSspLztcblx0dmFyIGVudGl0eVJFID0gLyYjP1xcdys/Oy87XG5cdHZhciBjb21tZW50UkUgPSAvPCEtLS87XG5cdFxuXHQvKipcblx0ICogQ29udmVydCBhIHN0cmluZyB0ZW1wbGF0ZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG5cdCAqIERldGVybWluZXMgY29ycmVjdCB3cmFwcGluZyBieSB0YWcgdHlwZXMuIFdyYXBwaW5nXG5cdCAqIHN0cmF0ZWd5IGZvdW5kIGluIGpRdWVyeSAmIGNvbXBvbmVudC9kb21pZnkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVN0cmluZ1xuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuXHQgKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGVTdHJpbmcsIHJhdykge1xuXHQgIC8vIHRyeSBhIGNhY2hlIGhpdCBmaXJzdFxuXHQgIHZhciBjYWNoZUtleSA9IHJhdyA/IHRlbXBsYXRlU3RyaW5nIDogdGVtcGxhdGVTdHJpbmcudHJpbSgpO1xuXHQgIHZhciBoaXQgPSB0ZW1wbGF0ZUNhY2hlLmdldChjYWNoZUtleSk7XG5cdCAgaWYgKGhpdCkge1xuXHQgICAgcmV0dXJuIGhpdDtcblx0ICB9XG5cdFxuXHQgIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgIHZhciB0YWdNYXRjaCA9IHRlbXBsYXRlU3RyaW5nLm1hdGNoKHRhZ1JFJDEpO1xuXHQgIHZhciBlbnRpdHlNYXRjaCA9IGVudGl0eVJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuXHQgIHZhciBjb21tZW50TWF0Y2ggPSBjb21tZW50UkUudGVzdCh0ZW1wbGF0ZVN0cmluZyk7XG5cdFxuXHQgIGlmICghdGFnTWF0Y2ggJiYgIWVudGl0eU1hdGNoICYmICFjb21tZW50TWF0Y2gpIHtcblx0ICAgIC8vIHRleHQgb25seSwgcmV0dXJuIGEgc2luZ2xlIHRleHQgbm9kZS5cblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGVtcGxhdGVTdHJpbmcpKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgdmFyIHRhZyA9IHRhZ01hdGNoICYmIHRhZ01hdGNoWzFdO1xuXHQgICAgdmFyIHdyYXAgPSBtYXBbdGFnXSB8fCBtYXAuZWZhdWx0O1xuXHQgICAgdmFyIGRlcHRoID0gd3JhcFswXTtcblx0ICAgIHZhciBwcmVmaXggPSB3cmFwWzFdO1xuXHQgICAgdmFyIHN1ZmZpeCA9IHdyYXBbMl07XG5cdCAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcblx0ICAgIG5vZGUuaW5uZXJIVE1MID0gcHJlZml4ICsgdGVtcGxhdGVTdHJpbmcgKyBzdWZmaXg7XG5cdCAgICB3aGlsZSAoZGVwdGgtLSkge1xuXHQgICAgICBub2RlID0gbm9kZS5sYXN0Q2hpbGQ7XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGNoaWxkO1xuXHQgICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIHdoaWxlIChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCkge1xuXHQgICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdCAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIXJhdykge1xuXHQgICAgdHJpbU5vZGUoZnJhZyk7XG5cdCAgfVxuXHQgIHRlbXBsYXRlQ2FjaGUucHV0KGNhY2hlS2V5LCBmcmFnKTtcblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbnZlcnQgYSB0ZW1wbGF0ZSBub2RlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cblx0ICpcblx0ICogQHBhcmFtIHtOb2RlfSBub2RlXG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbm9kZVRvRnJhZ21lbnQobm9kZSkge1xuXHQgIC8vIGlmIGl0cyBhIHRlbXBsYXRlIHRhZyBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQsXG5cdCAgLy8gaXRzIGNvbnRlbnQgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LiBIb3dldmVyLCBpT1MgU2FmYXJpIGhhc1xuXHQgIC8vIGJ1ZyB3aGVuIHVzaW5nIGRpcmVjdGx5IGNsb25lZCB0ZW1wbGF0ZSBjb250ZW50IHdpdGggdG91Y2hcblx0ICAvLyBldmVudHMgYW5kIGNhbiBjYXVzZSBjcmFzaGVzIHdoZW4gdGhlIG5vZGVzIGFyZSByZW1vdmVkIGZyb20gRE9NLCBzbyB3ZVxuXHQgIC8vIGhhdmUgdG8gdHJlYXQgdGVtcGxhdGUgZWxlbWVudHMgYXMgc3RyaW5nIHRlbXBsYXRlcy4gKCMyODA1KVxuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuXHQgICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS5pbm5lckhUTUwpO1xuXHQgIH1cblx0ICAvLyBzY3JpcHQgdGVtcGxhdGVcblx0ICBpZiAobm9kZS50YWdOYW1lID09PSAnU0NSSVBUJykge1xuXHQgICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS50ZXh0Q29udGVudCk7XG5cdCAgfVxuXHQgIC8vIG5vcm1hbCBub2RlLCBjbG9uZSBpdCB0byBhdm9pZCBtdXRhdGluZyB0aGUgb3JpZ2luYWxcblx0ICB2YXIgY2xvbmVkTm9kZSA9IGNsb25lTm9kZShub2RlKTtcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICB2YXIgY2hpbGQ7XG5cdCAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICB3aGlsZSAoY2hpbGQgPSBjbG9uZWROb2RlLmZpcnN0Q2hpbGQpIHtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuXHQgIH1cblx0ICB0cmltTm9kZShmcmFnKTtcblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0Ly8gVGVzdCBmb3IgdGhlIHByZXNlbmNlIG9mIHRoZSBTYWZhcmkgdGVtcGxhdGUgY2xvbmluZyBidWdcblx0Ly8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd3VnLmNnaT9pZD0xMzc3NTVcblx0dmFyIGhhc0Jyb2tlblRlbXBsYXRlID0gKGZ1bmN0aW9uICgpIHtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuXHQgIGlmIChpbkJyb3dzZXIpIHtcblx0ICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICBhLmlubmVySFRNTCA9ICc8dGVtcGxhdGU+MTwvdGVtcGxhdGU+Jztcblx0ICAgIHJldHVybiAhYS5jbG9uZU5vZGUodHJ1ZSkuZmlyc3RDaGlsZC5pbm5lckhUTUw7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdH0pKCk7XG5cdFxuXHQvLyBUZXN0IGZvciBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGNsb25lIGJ1Z1xuXHR2YXIgaGFzVGV4dGFyZWFDbG9uZUJ1ZyA9IChmdW5jdGlvbiAoKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cblx0ICBpZiAoaW5Ccm93c2VyKSB7XG5cdCAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG5cdCAgICB0LnBsYWNlaG9sZGVyID0gJ3QnO1xuXHQgICAgcmV0dXJuIHQuY2xvbmVOb2RlKHRydWUpLnZhbHVlID09PSAndCc7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHJldHVybiBmYWxzZTtcblx0ICB9XG5cdH0pKCk7XG5cdFxuXHQvKipcblx0ICogMS4gRGVhbCB3aXRoIFNhZmFyaSBjbG9uaW5nIG5lc3RlZCA8dGVtcGxhdGU+IGJ1ZyBieVxuXHQgKiAgICBtYW51YWxseSBjbG9uaW5nIGFsbCB0ZW1wbGF0ZSBpbnN0YW5jZXMuXG5cdCAqIDIuIERlYWwgd2l0aCBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZyBieSBzZXR0aW5nXG5cdCAqICAgIHRoZSBjb3JyZWN0IHZhbHVlIGFmdGVyIGNsb25pbmcuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBub2RlXG5cdCAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjbG9uZU5vZGUobm9kZSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yQWxsKSB7XG5cdCAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUoKTtcblx0ICB9XG5cdCAgdmFyIHJlcyA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xuXHQgIHZhciBpLCBvcmlnaW5hbCwgY2xvbmVkO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChoYXNCcm9rZW5UZW1wbGF0ZSkge1xuXHQgICAgdmFyIHRlbXBDbG9uZSA9IHJlcztcblx0ICAgIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuXHQgICAgICBub2RlID0gbm9kZS5jb250ZW50O1xuXHQgICAgICB0ZW1wQ2xvbmUgPSByZXMuY29udGVudDtcblx0ICAgIH1cblx0ICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuXHQgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuXHQgICAgICBjbG9uZWQgPSB0ZW1wQ2xvbmUucXVlcnlTZWxlY3RvckFsbCgndGVtcGxhdGUnKTtcblx0ICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBjbG9uZWRbaV0ucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQoY2xvbmVOb2RlKG9yaWdpbmFsW2ldKSwgY2xvbmVkW2ldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAoaGFzVGV4dGFyZWFDbG9uZUJ1Zykge1xuXHQgICAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgICByZXMudmFsdWUgPSBub2RlLnZhbHVlO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG5cdCAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcblx0ICAgICAgICBjbG9uZWQgPSByZXMucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcblx0ICAgICAgICBpID0gY2xvbmVkLmxlbmd0aDtcblx0ICAgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgICBjbG9uZWRbaV0udmFsdWUgPSBvcmlnaW5hbFtpXS52YWx1ZTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbiBhbmQgbm9ybWFsaXplcyBpdCBpbnRvIGFcblx0ICogYSBEb2N1bWVudEZyYWdtZW50IHRoYXQgY2FuIGJlIHVzZWQgYXMgYSBwYXJ0aWFsIG9yIGFcblx0ICogaW5zdGFuY2UgdGVtcGxhdGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdGVtcGxhdGVcblx0ICogICAgICAgIFBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlOlxuXHQgKiAgICAgICAgLSBEb2N1bWVudEZyYWdtZW50IG9iamVjdFxuXHQgKiAgICAgICAgLSBOb2RlIG9iamVjdCBvZiB0eXBlIFRlbXBsYXRlXG5cdCAqICAgICAgICAtIGlkIHNlbGVjdG9yOiAnI3NvbWUtdGVtcGxhdGUtaWQnXG5cdCAqICAgICAgICAtIHRlbXBsYXRlIHN0cmluZzogJzxkaXY+PHNwYW4+e3ttc2d9fTwvc3Bhbj48L2Rpdj4nXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gc2hvdWxkQ2xvbmVcblx0ICogQHBhcmFtIHtCb29sZWFufSByYXdcblx0ICogICAgICAgIGlubGluZSBIVE1MIGludGVycG9sYXRpb24uIERvIG5vdCBjaGVjayBmb3IgaWRcblx0ICogICAgICAgIHNlbGVjdG9yIGFuZCBrZWVwIHdoaXRlc3BhY2UgaW4gdGhlIHN0cmluZy5cblx0ICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudHx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgc2hvdWxkQ2xvbmUsIHJhdykge1xuXHQgIHZhciBub2RlLCBmcmFnO1xuXHRcblx0ICAvLyBpZiB0aGUgdGVtcGxhdGUgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LFxuXHQgIC8vIGRvIG5vdGhpbmdcblx0ICBpZiAoaXNGcmFnbWVudCh0ZW1wbGF0ZSkpIHtcblx0ICAgIHRyaW1Ob2RlKHRlbXBsYXRlKTtcblx0ICAgIHJldHVybiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZSh0ZW1wbGF0ZSkgOiB0ZW1wbGF0ZTtcblx0ICB9XG5cdFxuXHQgIGlmICh0eXBlb2YgdGVtcGxhdGUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAvLyBpZCBzZWxlY3RvclxuXHQgICAgaWYgKCFyYXcgJiYgdGVtcGxhdGUuY2hhckF0KDApID09PSAnIycpIHtcblx0ICAgICAgLy8gaWQgc2VsZWN0b3IgY2FuIGJlIGNhY2hlZCB0b29cblx0ICAgICAgZnJhZyA9IGlkU2VsZWN0b3JDYWNoZS5nZXQodGVtcGxhdGUpO1xuXHQgICAgICBpZiAoIWZyYWcpIHtcblx0ICAgICAgICBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGUuc2xpY2UoMSkpO1xuXHQgICAgICAgIGlmIChub2RlKSB7XG5cdCAgICAgICAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQobm9kZSk7XG5cdCAgICAgICAgICAvLyBzYXZlIHNlbGVjdG9yIHRvIGNhY2hlXG5cdCAgICAgICAgICBpZFNlbGVjdG9yQ2FjaGUucHV0KHRlbXBsYXRlLCBmcmFnKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIC8vIG5vcm1hbCBzdHJpbmcgdGVtcGxhdGVcblx0ICAgICAgZnJhZyA9IHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGUsIHJhdyk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5ub2RlVHlwZSkge1xuXHQgICAgLy8gYSBkaXJlY3Qgbm9kZVxuXHQgICAgZnJhZyA9IG5vZGVUb0ZyYWdtZW50KHRlbXBsYXRlKTtcblx0ICB9XG5cdFxuXHQgIHJldHVybiBmcmFnICYmIHNob3VsZENsb25lID8gY2xvbmVOb2RlKGZyYWcpIDogZnJhZztcblx0fVxuXHRcblx0dmFyIHRlbXBsYXRlID0gT2JqZWN0LmZyZWV6ZSh7XG5cdCAgY2xvbmVOb2RlOiBjbG9uZU5vZGUsXG5cdCAgcGFyc2VUZW1wbGF0ZTogcGFyc2VUZW1wbGF0ZVxuXHR9KTtcblx0XG5cdHZhciBodG1sID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gYSBjb21tZW50IG5vZGUgbWVhbnMgdGhpcyBpcyBhIGJpbmRpbmcgZm9yXG5cdCAgICAvLyB7e3sgaW5saW5lIHVuZXNjYXBlZCBodG1sIH19fVxuXHQgICAgaWYgKHRoaXMuZWwubm9kZVR5cGUgPT09IDgpIHtcblx0ICAgICAgLy8gaG9sZCBub2Rlc1xuXHQgICAgICB0aGlzLm5vZGVzID0gW107XG5cdCAgICAgIC8vIHJlcGxhY2UgdGhlIHBsYWNlaG9sZGVyIHdpdGggcHJvcGVyIGFuY2hvclxuXHQgICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1odG1sJyk7XG5cdCAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgICBpZiAodGhpcy5ub2Rlcykge1xuXHQgICAgICB0aGlzLnN3YXAodmFsdWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5lbC5pbm5lckhUTUwgPSB2YWx1ZTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBzd2FwOiBmdW5jdGlvbiBzd2FwKHZhbHVlKSB7XG5cdCAgICAvLyByZW1vdmUgb2xkIG5vZGVzXG5cdCAgICB2YXIgaSA9IHRoaXMubm9kZXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICByZW1vdmUodGhpcy5ub2Rlc1tpXSk7XG5cdCAgICB9XG5cdCAgICAvLyBjb252ZXJ0IG5ldyB2YWx1ZSB0byBhIGZyYWdtZW50XG5cdCAgICAvLyBkbyBub3QgYXR0ZW1wdCB0byByZXRyaWV2ZSBmcm9tIGlkIHNlbGVjdG9yXG5cdCAgICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUsIHRydWUpO1xuXHQgICAgLy8gc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGVzZSBub2RlcyBzbyB3ZSBjYW4gcmVtb3ZlIGxhdGVyXG5cdCAgICB0aGlzLm5vZGVzID0gdG9BcnJheShmcmFnLmNoaWxkTm9kZXMpO1xuXHQgICAgYmVmb3JlKGZyYWcsIHRoaXMuYW5jaG9yKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQWJzdHJhY3Rpb24gZm9yIGEgcGFydGlhbGx5LWNvbXBpbGVkIGZyYWdtZW50LlxuXHQgKiBDYW4gb3B0aW9uYWxseSBjb21waWxlIGNvbnRlbnQgd2l0aCBhIGNoaWxkIHNjb3BlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuXHQgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IFtwYXJlbnRGcmFnXVxuXHQgKi9cblx0ZnVuY3Rpb24gRnJhZ21lbnQobGlua2VyLCB2bSwgZnJhZywgaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcblx0ICB0aGlzLmNoaWxkcmVuID0gW107XG5cdCAgdGhpcy5jaGlsZEZyYWdzID0gW107XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHRoaXMuc2NvcGUgPSBzY29wZTtcblx0ICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG5cdCAgdGhpcy5wYXJlbnRGcmFnID0gcGFyZW50RnJhZztcblx0ICBpZiAocGFyZW50RnJhZykge1xuXHQgICAgcGFyZW50RnJhZy5jaGlsZEZyYWdzLnB1c2godGhpcyk7XG5cdCAgfVxuXHQgIHRoaXMudW5saW5rID0gbGlua2VyKHZtLCBmcmFnLCBob3N0LCBzY29wZSwgdGhpcyk7XG5cdCAgdmFyIHNpbmdsZSA9IHRoaXMuc2luZ2xlID0gZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJlxuXHQgIC8vIGRvIG5vdCBnbyBzaW5nbGUgbW9kZSBpZiB0aGUgb25seSBub2RlIGlzIGFuIGFuY2hvclxuXHQgICFmcmFnLmNoaWxkTm9kZXNbMF0uX192X2FuY2hvcjtcblx0ICBpZiAoc2luZ2xlKSB7XG5cdCAgICB0aGlzLm5vZGUgPSBmcmFnLmNoaWxkTm9kZXNbMF07XG5cdCAgICB0aGlzLmJlZm9yZSA9IHNpbmdsZUJlZm9yZTtcblx0ICAgIHRoaXMucmVtb3ZlID0gc2luZ2xlUmVtb3ZlO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLm5vZGUgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LXN0YXJ0Jyk7XG5cdCAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtZW5kJyk7XG5cdCAgICB0aGlzLmZyYWcgPSBmcmFnO1xuXHQgICAgcHJlcGVuZCh0aGlzLm5vZGUsIGZyYWcpO1xuXHQgICAgZnJhZy5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG5cdCAgICB0aGlzLmJlZm9yZSA9IG11bHRpQmVmb3JlO1xuXHQgICAgdGhpcy5yZW1vdmUgPSBtdWx0aVJlbW92ZTtcblx0ICB9XG5cdCAgdGhpcy5ub2RlLl9fdl9mcmFnID0gdGhpcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIENhbGwgYXR0YWNoL2RldGFjaCBmb3IgYWxsIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpblxuXHQgKiB0aGlzIGZyYWdtZW50LiBBbHNvIGRvIHNvIHJlY3Vyc2l2ZWx5IGZvciBhbGwgY2hpbGRcblx0ICogZnJhZ21lbnRzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG5cdCAqL1xuXHRcblx0RnJhZ21lbnQucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcblx0ICB2YXIgaSwgbDtcblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdGhpcy5jaGlsZEZyYWdzW2ldLmNhbGxIb29rKGhvb2spO1xuXHQgIH1cblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGhvb2sodGhpcy5jaGlsZHJlbltpXSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBzaW5nbGVCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuXHQgIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2UgPyBiZWZvcmVXaXRoVHJhbnNpdGlvbiA6IGJlZm9yZTtcblx0ICBtZXRob2QodGhpcy5ub2RlLCB0YXJnZXQsIHRoaXMudm0pO1xuXHQgIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG5cdCAgICB0aGlzLmNhbGxIb29rKGF0dGFjaCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUmVtb3ZlIGZyYWdtZW50LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gc2luZ2xlUmVtb3ZlKCkge1xuXHQgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcblx0ICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG5cdCAgcmVtb3ZlV2l0aFRyYW5zaXRpb24odGhpcy5ub2RlLCB0aGlzLnZtLCBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuXHQgICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XG5cdCAgICB9XG5cdCAgICBzZWxmLmRlc3Ryb3koKTtcblx0ICB9KTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtdWx0aUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG5cdCAgdmFyIHZtID0gdGhpcy52bTtcblx0ICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG5cdCAgbWFwTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICBtZXRob2Qobm9kZSwgdGFyZ2V0LCB2bSk7XG5cdCAgfSk7XG5cdCAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcblx0ICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBSZW1vdmUgZnJhZ21lbnQsIG11bHRpLW5vZGVzIHZlcnNpb25cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtdWx0aVJlbW92ZSgpIHtcblx0ICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG5cdCAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcblx0ICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuXHQgIHJlbW92ZU5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCB0aGlzLnZtLCB0aGlzLmZyYWcsIGZ1bmN0aW9uICgpIHtcblx0ICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG5cdCAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcblx0ICAgIH1cblx0ICAgIHNlbGYuZGVzdHJveSgpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJlcGFyZSB0aGUgZnJhZ21lbnQgZm9yIHJlbW92YWwuXG5cdCAqL1xuXHRcblx0RnJhZ21lbnQucHJvdG90eXBlLmJlZm9yZVJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB2YXIgaSwgbDtcblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgLy8gY2FsbCB0aGUgc2FtZSBtZXRob2QgcmVjdXJzaXZlbHkgb24gY2hpbGRcblx0ICAgIC8vIGZyYWdtZW50cywgZGVwdGgtZmlyc3Rcblx0ICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5iZWZvcmVSZW1vdmUoZmFsc2UpO1xuXHQgIH1cblx0ICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIC8vIENhbGwgZGVzdHJveSBmb3IgYWxsIGNvbnRhaW5lZCBpbnN0YW5jZXMsXG5cdCAgICAvLyB3aXRoIHJlbW92ZTpmYWxzZSBhbmQgZGVmZXI6dHJ1ZS5cblx0ICAgIC8vIERlZmVyIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIG5lZWQgdG9cblx0ICAgIC8vIGtlZXAgdGhlIGNoaWxkcmVuIHRvIGNhbGwgZGV0YWNoIGhvb2tzXG5cdCAgICAvLyBvbiB0aGVtLlxuXHQgICAgdGhpcy5jaGlsZHJlbltpXS4kZGVzdHJveShmYWxzZSwgdHJ1ZSk7XG5cdCAgfVxuXHQgIHZhciBkaXJzID0gdGhpcy51bmxpbmsuZGlycztcblx0ICBmb3IgKGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIC8vIGRpc2FibGUgdGhlIHdhdGNoZXJzIG9uIGFsbCB0aGUgZGlyZWN0aXZlc1xuXHQgICAgLy8gc28gdGhhdCB0aGUgcmVuZGVyZWQgY29udGVudCBzdGF5cyB0aGUgc2FtZVxuXHQgICAgLy8gZHVyaW5nIHJlbW92YWwuXG5cdCAgICBkaXJzW2ldLl93YXRjaGVyICYmIGRpcnNbaV0uX3dhdGNoZXIudGVhcmRvd24oKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRGVzdHJveSB0aGUgZnJhZ21lbnQuXG5cdCAqL1xuXHRcblx0RnJhZ21lbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMucGFyZW50RnJhZykge1xuXHQgICAgdGhpcy5wYXJlbnRGcmFnLmNoaWxkRnJhZ3MuJHJlbW92ZSh0aGlzKTtcblx0ICB9XG5cdCAgdGhpcy5ub2RlLl9fdl9mcmFnID0gbnVsbDtcblx0ICB0aGlzLnVubGluaygpO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIENhbGwgYXR0YWNoIGhvb2sgZm9yIGEgVnVlIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBhdHRhY2goY2hpbGQpIHtcblx0ICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgIGNoaWxkLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDYWxsIGRldGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IGNoaWxkXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZGV0YWNoKGNoaWxkKSB7XG5cdCAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG5cdCAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG5cdCAgfVxuXHR9XG5cdFxuXHR2YXIgbGlua2VyQ2FjaGUgPSBuZXcgQ2FjaGUoNTAwMCk7XG5cdFxuXHQvKipcblx0ICogQSBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBhXG5cdCAqIGZyYWdtZW50LiBDYWNoZXMgdGhlIGNvbXBpbGVkIGxpbmtlciBpZiBwb3NzaWJsZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd9IGVsXG5cdCAqL1xuXHRmdW5jdGlvbiBGcmFnbWVudEZhY3Rvcnkodm0sIGVsKSB7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIHZhciB0ZW1wbGF0ZTtcblx0ICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgZWwgPT09ICdzdHJpbmcnO1xuXHQgIGlmIChpc1N0cmluZyB8fCBpc1RlbXBsYXRlKGVsKSAmJiAhZWwuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgIHRlbXBsYXRlID0gcGFyc2VUZW1wbGF0ZShlbCwgdHJ1ZSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXHQgICAgdGVtcGxhdGUuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgIH1cblx0ICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG5cdCAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQsIGJ1dCBvbmx5IGZvciBjb21wb25lbnRzXG5cdCAgdmFyIGxpbmtlcjtcblx0ICB2YXIgY2lkID0gdm0uY29uc3RydWN0b3IuY2lkO1xuXHQgIGlmIChjaWQgPiAwKSB7XG5cdCAgICB2YXIgY2FjaGVJZCA9IGNpZCArIChpc1N0cmluZyA/IGVsIDogZ2V0T3V0ZXJIVE1MKGVsKSk7XG5cdCAgICBsaW5rZXIgPSBsaW5rZXJDYWNoZS5nZXQoY2FjaGVJZCk7XG5cdCAgICBpZiAoIWxpbmtlcikge1xuXHQgICAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG5cdCAgICAgIGxpbmtlckNhY2hlLnB1dChjYWNoZUlkLCBsaW5rZXIpO1xuXHQgICAgfVxuXHQgIH0gZWxzZSB7XG5cdCAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG5cdCAgfVxuXHQgIHRoaXMubGlua2VyID0gbGlua2VyO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ3JlYXRlIGEgZnJhZ21lbnQgaW5zdGFuY2Ugd2l0aCBnaXZlbiBob3N0IGFuZCBzY29wZS5cblx0ICpcblx0ICogQHBhcmFtIHtWdWV9IGhvc3Rcblx0ICogQHBhcmFtIHtPYmplY3R9IHNjb3BlXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IHBhcmVudEZyYWdcblx0ICovXG5cdFxuXHRGcmFnbWVudEZhY3RvcnkucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uIChob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuXHQgIHZhciBmcmFnID0gY2xvbmVOb2RlKHRoaXMudGVtcGxhdGUpO1xuXHQgIHJldHVybiBuZXcgRnJhZ21lbnQodGhpcy5saW5rZXIsIHRoaXMudm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKTtcblx0fTtcblx0XG5cdHZhciBPTiA9IDcwMDtcblx0dmFyIE1PREVMID0gODAwO1xuXHR2YXIgQklORCA9IDg1MDtcblx0dmFyIFRSQU5TSVRJT04gPSAxMTAwO1xuXHR2YXIgRUwgPSAxNTAwO1xuXHR2YXIgQ09NUE9ORU5UID0gMTUwMDtcblx0dmFyIFBBUlRJQUwgPSAxNzUwO1xuXHR2YXIgSUYgPSAyMTAwO1xuXHR2YXIgRk9SID0gMjIwMDtcblx0dmFyIFNMT1QgPSAyMzAwO1xuXHRcblx0dmFyIHVpZCQzID0gMDtcblx0XG5cdHZhciB2Rm9yID0ge1xuXHRcblx0ICBwcmlvcml0eTogRk9SLFxuXHQgIHRlcm1pbmFsOiB0cnVlLFxuXHRcblx0ICBwYXJhbXM6IFsndHJhY2stYnknLCAnc3RhZ2dlcicsICdlbnRlci1zdGFnZ2VyJywgJ2xlYXZlLXN0YWdnZXInXSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIC8vIHN1cHBvcnQgXCJpdGVtIGluL29mIGl0ZW1zXCIgc3ludGF4XG5cdCAgICB2YXIgaW5NYXRjaCA9IHRoaXMuZXhwcmVzc2lvbi5tYXRjaCgvKC4qKSAoPzppbnxvZikgKC4qKS8pO1xuXHQgICAgaWYgKGluTWF0Y2gpIHtcblx0ICAgICAgdmFyIGl0TWF0Y2ggPSBpbk1hdGNoWzFdLm1hdGNoKC9cXCgoLiopLCguKilcXCkvKTtcblx0ICAgICAgaWYgKGl0TWF0Y2gpIHtcblx0ICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRNYXRjaFsxXS50cmltKCk7XG5cdCAgICAgICAgdGhpcy5hbGlhcyA9IGl0TWF0Y2hbMl0udHJpbSgpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHRoaXMuYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLmV4cHJlc3Npb24gPSBpbk1hdGNoWzJdO1xuXHQgICAgfVxuXHRcblx0ICAgIGlmICghdGhpcy5hbGlhcykge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdi1mb3IgZXhwcmVzc2lvbiBcIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2FsaWFzIGlzIHJlcXVpcmVkLicsIHRoaXMudm0pO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gdWlkIGFzIGEgY2FjaGUgaWRlbnRpZmllclxuXHQgICAgdGhpcy5pZCA9ICdfX3YtZm9yX18nICsgKyt1aWQkMztcblx0XG5cdCAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGFuIG9wdGlvbiBsaXN0LFxuXHQgICAgLy8gc28gdGhhdCB3ZSBrbm93IGlmIHdlIG5lZWQgdG8gdXBkYXRlIHRoZSA8c2VsZWN0PidzXG5cdCAgICAvLyB2LW1vZGVsIHdoZW4gdGhlIG9wdGlvbiBsaXN0IGhhcyBjaGFuZ2VkLlxuXHQgICAgLy8gYmVjYXVzZSB2LW1vZGVsIGhhcyBhIGxvd2VyIHByaW9yaXR5IHRoYW4gdi1mb3IsXG5cdCAgICAvLyB0aGUgdi1tb2RlbCBpcyBub3QgYm91bmQgaGVyZSB5ZXQsIHNvIHdlIGhhdmUgdG9cblx0ICAgIC8vIHJldHJpdmUgaXQgaW4gdGhlIGFjdHVhbCB1cGRhdGVNb2RlbCgpIGZ1bmN0aW9uLlxuXHQgICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcblx0ICAgIHRoaXMuaXNPcHRpb24gPSAodGFnID09PSAnT1BUSU9OJyB8fCB0YWcgPT09ICdPUFRHUk9VUCcpICYmIHRoaXMuZWwucGFyZW50Tm9kZS50YWdOYW1lID09PSAnU0VMRUNUJztcblx0XG5cdCAgICAvLyBzZXR1cCBhbmNob3Igbm9kZXNcblx0ICAgIHRoaXMuc3RhcnQgPSBjcmVhdGVBbmNob3IoJ3YtZm9yLXN0YXJ0Jyk7XG5cdCAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcigndi1mb3ItZW5kJyk7XG5cdCAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuZW5kKTtcblx0ICAgIGJlZm9yZSh0aGlzLnN0YXJ0LCB0aGlzLmVuZCk7XG5cdFxuXHQgICAgLy8gY2FjaGVcblx0ICAgIHRoaXMuY2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0ICAgIC8vIGZyYWdtZW50IGZhY3Rvcnlcblx0ICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoZGF0YSkge1xuXHQgICAgdGhpcy5kaWZmKGRhdGEpO1xuXHQgICAgdGhpcy51cGRhdGVSZWYoKTtcblx0ICAgIHRoaXMudXBkYXRlTW9kZWwoKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBEaWZmLCBiYXNlZCBvbiBuZXcgZGF0YSBhbmQgb2xkIGRhdGEsIGRldGVybWluZSB0aGVcblx0ICAgKiBtaW5pbXVtIGFtb3VudCBvZiBET00gbWFuaXB1bGF0aW9ucyBuZWVkZWQgdG8gbWFrZSB0aGVcblx0ICAgKiBET00gcmVmbGVjdCB0aGUgbmV3IGRhdGEgQXJyYXkuXG5cdCAgICpcblx0ICAgKiBUaGUgYWxnb3JpdGhtIGRpZmZzIHRoZSBuZXcgZGF0YSBBcnJheSBieSBzdG9yaW5nIGFcblx0ICAgKiBoaWRkZW4gcmVmZXJlbmNlIHRvIGFuIG93bmVyIHZtIGluc3RhbmNlIG9uIHByZXZpb3VzbHlcblx0ICAgKiBzZWVuIGRhdGEuIFRoaXMgYWxsb3dzIHVzIHRvIGFjaGlldmUgTyhuKSB3aGljaCBpc1xuXHQgICAqIGJldHRlciB0aGFuIGEgbGV2ZW5zaHRlaW4gZGlzdGFuY2UgYmFzZWQgYWxnb3JpdGhtLFxuXHQgICAqIHdoaWNoIGlzIE8obSAqIG4pLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtBcnJheX0gZGF0YVxuXHQgICAqL1xuXHRcblx0ICBkaWZmOiBmdW5jdGlvbiBkaWZmKGRhdGEpIHtcblx0ICAgIC8vIGNoZWNrIGlmIHRoZSBBcnJheSB3YXMgY29udmVydGVkIGZyb20gYW4gT2JqZWN0XG5cdCAgICB2YXIgaXRlbSA9IGRhdGFbMF07XG5cdCAgICB2YXIgY29udmVydGVkRnJvbU9iamVjdCA9IHRoaXMuZnJvbU9iamVjdCA9IGlzT2JqZWN0KGl0ZW0pICYmIGhhc093bihpdGVtLCAnJGtleScpICYmIGhhc093bihpdGVtLCAnJHZhbHVlJyk7XG5cdFxuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIG9sZEZyYWdzID0gdGhpcy5mcmFncztcblx0ICAgIHZhciBmcmFncyA9IHRoaXMuZnJhZ3MgPSBuZXcgQXJyYXkoZGF0YS5sZW5ndGgpO1xuXHQgICAgdmFyIGFsaWFzID0gdGhpcy5hbGlhcztcblx0ICAgIHZhciBpdGVyYXRvciA9IHRoaXMuaXRlcmF0b3I7XG5cdCAgICB2YXIgc3RhcnQgPSB0aGlzLnN0YXJ0O1xuXHQgICAgdmFyIGVuZCA9IHRoaXMuZW5kO1xuXHQgICAgdmFyIGluRG9jdW1lbnQgPSBpbkRvYyhzdGFydCk7XG5cdCAgICB2YXIgaW5pdCA9ICFvbGRGcmFncztcblx0ICAgIHZhciBpLCBsLCBmcmFnLCBrZXksIHZhbHVlLCBwcmltaXRpdmU7XG5cdFxuXHQgICAgLy8gRmlyc3QgcGFzcywgZ28gdGhyb3VnaCB0aGUgbmV3IEFycmF5IGFuZCBmaWxsIHVwXG5cdCAgICAvLyB0aGUgbmV3IGZyYWdzIGFycmF5LiBJZiBhIHBpZWNlIG9mIGRhdGEgaGFzIGEgY2FjaGVkXG5cdCAgICAvLyBpbnN0YW5jZSBmb3IgaXQsIHdlIHJldXNlIGl0LiBPdGhlcndpc2UgYnVpbGQgYSBuZXdcblx0ICAgIC8vIGluc3RhbmNlLlxuXHQgICAgZm9yIChpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIGl0ZW0gPSBkYXRhW2ldO1xuXHQgICAgICBrZXkgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4ka2V5IDogbnVsbDtcblx0ICAgICAgdmFsdWUgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4kdmFsdWUgOiBpdGVtO1xuXHQgICAgICBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgICBmcmFnID0gIWluaXQgJiYgdGhpcy5nZXRDYWNoZWRGcmFnKHZhbHVlLCBpLCBrZXkpO1xuXHQgICAgICBpZiAoZnJhZykge1xuXHQgICAgICAgIC8vIHJldXNhYmxlIGZyYWdtZW50XG5cdCAgICAgICAgZnJhZy5yZXVzZWQgPSB0cnVlO1xuXHQgICAgICAgIC8vIHVwZGF0ZSAkaW5kZXhcblx0ICAgICAgICBmcmFnLnNjb3BlLiRpbmRleCA9IGk7XG5cdCAgICAgICAgLy8gdXBkYXRlICRrZXlcblx0ICAgICAgICBpZiAoa2V5KSB7XG5cdCAgICAgICAgICBmcmFnLnNjb3BlLiRrZXkgPSBrZXk7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIC8vIHVwZGF0ZSBpdGVyYXRvclxuXHQgICAgICAgIGlmIChpdGVyYXRvcikge1xuXHQgICAgICAgICAgZnJhZy5zY29wZVtpdGVyYXRvcl0gPSBrZXkgIT09IG51bGwgPyBrZXkgOiBpO1xuXHQgICAgICAgIH1cblx0ICAgICAgICAvLyB1cGRhdGUgZGF0YSBmb3IgdHJhY2stYnksIG9iamVjdCByZXBlYXQgJlxuXHQgICAgICAgIC8vIHByaW1pdGl2ZSB2YWx1ZXMuXG5cdCAgICAgICAgaWYgKHRyYWNrQnlLZXkgfHwgY29udmVydGVkRnJvbU9iamVjdCB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgICAgZnJhZy5zY29wZVthbGlhc10gPSB2YWx1ZTtcblx0ICAgICAgICAgIH0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvLyBuZXcgaXNudGFuY2Vcblx0ICAgICAgICBmcmFnID0gdGhpcy5jcmVhdGUodmFsdWUsIGFsaWFzLCBpLCBrZXkpO1xuXHQgICAgICAgIGZyYWcuZnJlc2ggPSAhaW5pdDtcblx0ICAgICAgfVxuXHQgICAgICBmcmFnc1tpXSA9IGZyYWc7XG5cdCAgICAgIGlmIChpbml0KSB7XG5cdCAgICAgICAgZnJhZy5iZWZvcmUoZW5kKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHRcblx0ICAgIC8vIHdlJ3JlIGRvbmUgZm9yIHRoZSBpbml0aWFsIHJlbmRlci5cblx0ICAgIGlmIChpbml0KSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBTZWNvbmQgcGFzcywgZ28gdGhyb3VnaCB0aGUgb2xkIGZyYWdtZW50cyBhbmRcblx0ICAgIC8vIGRlc3Ryb3kgdGhvc2Ugd2hvIGFyZSBub3QgcmV1c2VkIChhbmQgcmVtb3ZlIHRoZW1cblx0ICAgIC8vIGZyb20gY2FjaGUpXG5cdCAgICB2YXIgcmVtb3ZhbEluZGV4ID0gMDtcblx0ICAgIHZhciB0b3RhbFJlbW92ZWQgPSBvbGRGcmFncy5sZW5ndGggLSBmcmFncy5sZW5ndGg7XG5cdCAgICAvLyB3aGVuIHJlbW92aW5nIGEgbGFyZ2UgbnVtYmVyIG9mIGZyYWdtZW50cywgd2F0Y2hlciByZW1vdmFsXG5cdCAgICAvLyB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGJvdHRsZW5lY2ssIHNvIHdlIGJhdGNoIHRoZSB3YXRjaGVyXG5cdCAgICAvLyByZW1vdmFscyBpbnRvIGEgc2luZ2xlIGZpbHRlciBjYWxsIVxuXHQgICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gdHJ1ZTtcblx0ICAgIGZvciAoaSA9IDAsIGwgPSBvbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgZnJhZyA9IG9sZEZyYWdzW2ldO1xuXHQgICAgICBpZiAoIWZyYWcucmV1c2VkKSB7XG5cdCAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuXHQgICAgICAgIHRoaXMucmVtb3ZlKGZyYWcsIHJlbW92YWxJbmRleCsrLCB0b3RhbFJlbW92ZWQsIGluRG9jdW1lbnQpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcblx0ICAgIGlmIChyZW1vdmFsSW5kZXgpIHtcblx0ICAgICAgdGhpcy52bS5fd2F0Y2hlcnMgPSB0aGlzLnZtLl93YXRjaGVycy5maWx0ZXIoZnVuY3Rpb24gKHcpIHtcblx0ICAgICAgICByZXR1cm4gdy5hY3RpdmU7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEZpbmFsIHBhc3MsIG1vdmUvaW5zZXJ0IG5ldyBmcmFnbWVudHMgaW50byB0aGVcblx0ICAgIC8vIHJpZ2h0IHBsYWNlLlxuXHQgICAgdmFyIHRhcmdldFByZXYsIHByZXZFbCwgY3VycmVudFByZXY7XG5cdCAgICB2YXIgaW5zZXJ0aW9uSW5kZXggPSAwO1xuXHQgICAgZm9yIChpID0gMCwgbCA9IGZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBmcmFnID0gZnJhZ3NbaV07XG5cdCAgICAgIC8vIHRoaXMgaXMgdGhlIGZyYWcgdGhhdCB3ZSBzaG91bGQgYmUgYWZ0ZXJcblx0ICAgICAgdGFyZ2V0UHJldiA9IGZyYWdzW2kgLSAxXTtcblx0ICAgICAgcHJldkVsID0gdGFyZ2V0UHJldiA/IHRhcmdldFByZXYuc3RhZ2dlckNiID8gdGFyZ2V0UHJldi5zdGFnZ2VyQW5jaG9yIDogdGFyZ2V0UHJldi5lbmQgfHwgdGFyZ2V0UHJldi5ub2RlIDogc3RhcnQ7XG5cdCAgICAgIGlmIChmcmFnLnJldXNlZCAmJiAhZnJhZy5zdGFnZ2VyQ2IpIHtcblx0ICAgICAgICBjdXJyZW50UHJldiA9IGZpbmRQcmV2RnJhZyhmcmFnLCBzdGFydCwgdGhpcy5pZCk7XG5cdCAgICAgICAgaWYgKGN1cnJlbnRQcmV2ICE9PSB0YXJnZXRQcmV2ICYmICghY3VycmVudFByZXYgfHxcblx0ICAgICAgICAvLyBvcHRpbWl6YXRpb24gZm9yIG1vdmluZyBhIHNpbmdsZSBpdGVtLlxuXHQgICAgICAgIC8vIHRoYW5rcyB0byBzdWdnZXN0aW9ucyBieSBAbGl2b3JhcyBpbiAjMTgwN1xuXHQgICAgICAgIGZpbmRQcmV2RnJhZyhjdXJyZW50UHJldiwgc3RhcnQsIHRoaXMuaWQpICE9PSB0YXJnZXRQcmV2KSkge1xuXHQgICAgICAgICAgdGhpcy5tb3ZlKGZyYWcsIHByZXZFbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIG5ldyBpbnN0YW5jZSwgb3Igc3RpbGwgaW4gc3RhZ2dlci5cblx0ICAgICAgICAvLyBpbnNlcnQgd2l0aCB1cGRhdGVkIHN0YWdnZXIgaW5kZXguXG5cdCAgICAgICAgdGhpcy5pbnNlcnQoZnJhZywgaW5zZXJ0aW9uSW5kZXgrKywgcHJldkVsLCBpbkRvY3VtZW50KTtcblx0ICAgICAgfVxuXHQgICAgICBmcmFnLnJldXNlZCA9IGZyYWcuZnJlc2ggPSBmYWxzZTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYSBuZXcgZnJhZ21lbnQgaW5zdGFuY2UuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGFsaWFzXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG5cdCAgICogQHJldHVybiB7RnJhZ21lbnR9XG5cdCAgICovXG5cdFxuXHQgIGNyZWF0ZTogZnVuY3Rpb24gY3JlYXRlKHZhbHVlLCBhbGlhcywgaW5kZXgsIGtleSkge1xuXHQgICAgdmFyIGhvc3QgPSB0aGlzLl9ob3N0O1xuXHQgICAgLy8gY3JlYXRlIGl0ZXJhdGlvbiBzY29wZVxuXHQgICAgdmFyIHBhcmVudFNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bTtcblx0ICAgIHZhciBzY29wZSA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUpO1xuXHQgICAgLy8gcmVmIGhvbGRlciBmb3IgdGhlIHNjb3BlXG5cdCAgICBzY29wZS4kcmVmcyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJHJlZnMpO1xuXHQgICAgc2NvcGUuJGVscyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJGVscyk7XG5cdCAgICAvLyBtYWtlIHN1cmUgcG9pbnQgJHBhcmVudCB0byBwYXJlbnQgc2NvcGVcblx0ICAgIHNjb3BlLiRwYXJlbnQgPSBwYXJlbnRTY29wZTtcblx0ICAgIC8vIGZvciB0d28td2F5IGJpbmRpbmcgb24gYWxpYXNcblx0ICAgIHNjb3BlLiRmb3JDb250ZXh0ID0gdGhpcztcblx0ICAgIC8vIGRlZmluZSBzY29wZSBwcm9wZXJ0aWVzXG5cdCAgICAvLyBpbXBvcnRhbnQ6IGRlZmluZSB0aGUgc2NvcGUgYWxpYXMgd2l0aG91dCBmb3JjZWQgY29udmVyc2lvblxuXHQgICAgLy8gc28gdGhhdCBmcm96ZW4gZGF0YSBzdHJ1Y3R1cmVzIHJlbWFpbiBub24tcmVhY3RpdmUuXG5cdCAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCBhbGlhcywgdmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgJyRpbmRleCcsIGluZGV4KTtcblx0ICAgIGlmIChrZXkpIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICcka2V5Jywga2V5KTtcblx0ICAgIH0gZWxzZSBpZiAoc2NvcGUuJGtleSkge1xuXHQgICAgICAvLyBhdm9pZCBhY2NpZGVudGFsIGZhbGxiYWNrXG5cdCAgICAgIGRlZihzY29wZSwgJyRrZXknLCBudWxsKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLml0ZXJhdG9yKSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCB0aGlzLml0ZXJhdG9yLCBrZXkgIT09IG51bGwgPyBrZXkgOiBpbmRleCk7XG5cdCAgICB9XG5cdCAgICB2YXIgZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuXHQgICAgZnJhZy5mb3JJZCA9IHRoaXMuaWQ7XG5cdCAgICB0aGlzLmNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSk7XG5cdCAgICByZXR1cm4gZnJhZztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBVcGRhdGUgdGhlIHYtcmVmIG9uIG93bmVyIHZtLlxuXHQgICAqL1xuXHRcblx0ICB1cGRhdGVSZWY6IGZ1bmN0aW9uIHVwZGF0ZVJlZigpIHtcblx0ICAgIHZhciByZWYgPSB0aGlzLmRlc2NyaXB0b3IucmVmO1xuXHQgICAgaWYgKCFyZWYpIHJldHVybjtcblx0ICAgIHZhciBoYXNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzO1xuXHQgICAgdmFyIHJlZnM7XG5cdCAgICBpZiAoIXRoaXMuZnJvbU9iamVjdCkge1xuXHQgICAgICByZWZzID0gdGhpcy5mcmFncy5tYXAoZmluZFZtRnJvbUZyYWcpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVmcyA9IHt9O1xuXHQgICAgICB0aGlzLmZyYWdzLmZvckVhY2goZnVuY3Rpb24gKGZyYWcpIHtcblx0ICAgICAgICByZWZzW2ZyYWcuc2NvcGUuJGtleV0gPSBmaW5kVm1Gcm9tRnJhZyhmcmFnKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgICBoYXNoW3JlZl0gPSByZWZzO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEZvciBvcHRpb24gbGlzdHMsIHVwZGF0ZSB0aGUgY29udGFpbmluZyB2LW1vZGVsIG9uXG5cdCAgICogcGFyZW50IDxzZWxlY3Q+LlxuXHQgICAqL1xuXHRcblx0ICB1cGRhdGVNb2RlbDogZnVuY3Rpb24gdXBkYXRlTW9kZWwoKSB7XG5cdCAgICBpZiAodGhpcy5pc09wdGlvbikge1xuXHQgICAgICB2YXIgcGFyZW50ID0gdGhpcy5zdGFydC5wYXJlbnROb2RlO1xuXHQgICAgICB2YXIgbW9kZWwgPSBwYXJlbnQgJiYgcGFyZW50Ll9fdl9tb2RlbDtcblx0ICAgICAgaWYgKG1vZGVsKSB7XG5cdCAgICAgICAgbW9kZWwuZm9yY2VVcGRhdGUoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydCBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGluRG9jdW1lbnRcblx0ICAgKi9cblx0XG5cdCAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoZnJhZywgaW5kZXgsIHByZXZFbCwgaW5Eb2N1bWVudCkge1xuXHQgICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICB9XG5cdCAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgbnVsbCwgJ2VudGVyJyk7XG5cdCAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG5cdCAgICAgIC8vIGNyZWF0ZSBhbiBhbmNob3IgYW5kIGluc2VydCBpdCBzeW5jaHJvbm91c2x5LFxuXHQgICAgICAvLyBzbyB0aGF0IHdlIGNhbiByZXNvbHZlIHRoZSBjb3JyZWN0IG9yZGVyIHdpdGhvdXRcblx0ICAgICAgLy8gd29ycnlpbmcgYWJvdXQgc29tZSBlbGVtZW50cyBub3QgaW5zZXJ0ZWQgeWV0XG5cdCAgICAgIHZhciBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3I7XG5cdCAgICAgIGlmICghYW5jaG9yKSB7XG5cdCAgICAgICAgYW5jaG9yID0gZnJhZy5zdGFnZ2VyQW5jaG9yID0gY3JlYXRlQW5jaG9yKCdzdGFnZ2VyLWFuY2hvcicpO1xuXHQgICAgICAgIGFuY2hvci5fX3ZfZnJhZyA9IGZyYWc7XG5cdCAgICAgIH1cblx0ICAgICAgYWZ0ZXIoYW5jaG9yLCBwcmV2RWwpO1xuXHQgICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICAgICAgZnJhZy5iZWZvcmUoYW5jaG9yKTtcblx0ICAgICAgICByZW1vdmUoYW5jaG9yKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHNldFRpbWVvdXQob3AsIHN0YWdnZXJBbW91bnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHRhcmdldCA9IHByZXZFbC5uZXh0U2libGluZztcblx0ICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICAgIGlmICghdGFyZ2V0KSB7XG5cdCAgICAgICAgLy8gcmVzZXQgZW5kIGFuY2hvciBwb3NpdGlvbiBpbiBjYXNlIHRoZSBwb3NpdGlvbiB3YXMgbWVzc2VkIHVwXG5cdCAgICAgICAgLy8gYnkgYW4gZXh0ZXJuYWwgZHJhZy1uLWRyb3AgbGlicmFyeS5cblx0ICAgICAgICBhZnRlcih0aGlzLmVuZCwgcHJldkVsKTtcblx0ICAgICAgICB0YXJnZXQgPSB0aGlzLmVuZDtcblx0ICAgICAgfVxuXHQgICAgICBmcmFnLmJlZm9yZSh0YXJnZXQpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG5cdCAgICovXG5cdFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGZyYWcsIGluZGV4LCB0b3RhbCwgaW5Eb2N1bWVudCkge1xuXHQgICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG5cdCAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuXHQgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG5cdCAgICAgIC8vIGl0J3Mgbm90IHBvc3NpYmxlIGZvciB0aGUgc2FtZSBmcmFnIHRvIGJlIHJlbW92ZWRcblx0ICAgICAgLy8gdHdpY2UsIHNvIGlmIHdlIGhhdmUgYSBwZW5kaW5nIHN0YWdnZXIgY2FsbGJhY2ssXG5cdCAgICAgIC8vIGl0IG1lYW5zIHRoaXMgZnJhZyBpcyBxdWV1ZWQgZm9yIGVudGVyIGJ1dCByZW1vdmVkXG5cdCAgICAgIC8vIGJlZm9yZSBpdHMgdHJhbnNpdGlvbiBzdGFydGVkLiBTaW5jZSBpdCBpcyBhbHJlYWR5XG5cdCAgICAgIC8vIGRlc3Ryb3llZCwgd2UgY2FuIGp1c3QgbGVhdmUgaXQgaW4gZGV0YWNoZWQgc3RhdGUuXG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgJ2xlYXZlJyk7XG5cdCAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG5cdCAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcblx0ICAgICAgICBmcmFnLnJlbW92ZSgpO1xuXHQgICAgICB9KTtcblx0ICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBmcmFnLnJlbW92ZSgpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIE1vdmUgYSBmcmFnbWVudCB0byBhIG5ldyBwb3NpdGlvbi5cblx0ICAgKiBGb3JjZSBubyB0cmFuc2l0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG5cdCAgICovXG5cdFxuXHQgIG1vdmU6IGZ1bmN0aW9uIG1vdmUoZnJhZywgcHJldkVsKSB7XG5cdCAgICAvLyBmaXggYSBjb21tb24gaXNzdWUgd2l0aCBTb3J0YWJsZTpcblx0ICAgIC8vIGlmIHByZXZFbCBkb2Vzbid0IGhhdmUgbmV4dFNpYmxpbmcsIHRoaXMgbWVhbnMgaXQnc1xuXHQgICAgLy8gYmVlbiBkcmFnZ2VkIGFmdGVyIHRoZSBlbmQgYW5jaG9yLiBKdXN0IHJlLXBvc2l0aW9uXG5cdCAgICAvLyB0aGUgZW5kIGFuY2hvciB0byB0aGUgZW5kIG9mIHRoZSBjb250YWluZXIuXG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghcHJldkVsLm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIHRoaXMuZW5kLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuXHQgICAgfVxuXHQgICAgZnJhZy5iZWZvcmUocHJldkVsLm5leHRTaWJsaW5nLCBmYWxzZSk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogQ2FjaGUgYSBmcmFnbWVudCB1c2luZyB0cmFjay1ieSBvciB0aGUgb2JqZWN0IGtleS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG5cdCAgICovXG5cdFxuXHQgIGNhY2hlRnJhZzogZnVuY3Rpb24gY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KSB7XG5cdCAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG5cdCAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlO1xuXHQgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICB2YXIgaWQ7XG5cdCAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG5cdCAgICAgIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG5cdCAgICAgIGlmICghY2FjaGVbaWRdKSB7XG5cdCAgICAgICAgY2FjaGVbaWRdID0gZnJhZztcblx0ICAgICAgfSBlbHNlIGlmICh0cmFja0J5S2V5ICE9PSAnJGluZGV4Jykge1xuXHQgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaWQgPSB0aGlzLmlkO1xuXHQgICAgICBpZiAoaGFzT3duKHZhbHVlLCBpZCkpIHtcblx0ICAgICAgICBpZiAodmFsdWVbaWRdID09PSBudWxsKSB7XG5cdCAgICAgICAgICB2YWx1ZVtpZF0gPSBmcmFnO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpKSB7XG5cdCAgICAgICAgZGVmKHZhbHVlLCBpZCwgZnJhZyk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4oJ0Zyb3plbiB2LWZvciBvYmplY3RzIGNhbm5vdCBiZSBhdXRvbWF0aWNhbGx5IHRyYWNrZWQsIG1ha2Ugc3VyZSB0byAnICsgJ3Byb3ZpZGUgYSB0cmFjay1ieSBrZXkuJyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGZyYWcucmF3ID0gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR2V0IGEgY2FjaGVkIGZyYWdtZW50IGZyb20gdGhlIHZhbHVlL2luZGV4L2tleVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cblx0ICAgKi9cblx0XG5cdCAgZ2V0Q2FjaGVkRnJhZzogZnVuY3Rpb24gZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaW5kZXgsIGtleSkge1xuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG5cdCAgICB2YXIgZnJhZztcblx0ICAgIGlmIChrZXkgfHwgdHJhY2tCeUtleSB8fCBwcmltaXRpdmUpIHtcblx0ICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG5cdCAgICAgIGZyYWcgPSB0aGlzLmNhY2hlW2lkXTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZyYWcgPSB2YWx1ZVt0aGlzLmlkXTtcblx0ICAgIH1cblx0ICAgIGlmIChmcmFnICYmIChmcmFnLnJldXNlZCB8fCBmcmFnLmZyZXNoKSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZnJhZztcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBEZWxldGUgYSBmcmFnbWVudCBmcm9tIGNhY2hlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuXHQgICAqL1xuXHRcblx0ICBkZWxldGVDYWNoZWRGcmFnOiBmdW5jdGlvbiBkZWxldGVDYWNoZWRGcmFnKGZyYWcpIHtcblx0ICAgIHZhciB2YWx1ZSA9IGZyYWcucmF3O1xuXHQgICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuXHQgICAgdmFyIHNjb3BlID0gZnJhZy5zY29wZTtcblx0ICAgIHZhciBpbmRleCA9IHNjb3BlLiRpbmRleDtcblx0ICAgIC8vIGZpeCAjOTQ4OiBhdm9pZCBhY2NpZGVudGFsbHkgZmFsbCB0aHJvdWdoIHRvXG5cdCAgICAvLyBhIHBhcmVudCByZXBlYXRlciB3aGljaCBoYXBwZW5zIHRvIGhhdmUgJGtleS5cblx0ICAgIHZhciBrZXkgPSBoYXNPd24oc2NvcGUsICcka2V5JykgJiYgc2NvcGUuJGtleTtcblx0ICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuXHQgICAgaWYgKHRyYWNrQnlLZXkgfHwga2V5IHx8IHByaW1pdGl2ZSkge1xuXHQgICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcblx0ICAgICAgdGhpcy5jYWNoZVtpZF0gPSBudWxsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFsdWVbdGhpcy5pZF0gPSBudWxsO1xuXHQgICAgICBmcmFnLnJhdyA9IG51bGw7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogR2V0IHRoZSBzdGFnZ2VyIGFtb3VudCBmb3IgYW4gaW5zZXJ0aW9uL3JlbW92YWwuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICAgKi9cblx0XG5cdCAgZ2V0U3RhZ2dlcjogZnVuY3Rpb24gZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgdG90YWwsIHR5cGUpIHtcblx0ICAgIHR5cGUgPSB0eXBlICsgJ1N0YWdnZXInO1xuXHQgICAgdmFyIHRyYW5zID0gZnJhZy5ub2RlLl9fdl90cmFucztcblx0ICAgIHZhciBob29rcyA9IHRyYW5zICYmIHRyYW5zLmhvb2tzO1xuXHQgICAgdmFyIGhvb2sgPSBob29rcyAmJiAoaG9va3NbdHlwZV0gfHwgaG9va3Muc3RhZ2dlcik7XG5cdCAgICByZXR1cm4gaG9vayA/IGhvb2suY2FsbChmcmFnLCBpbmRleCwgdG90YWwpIDogaW5kZXggKiBwYXJzZUludCh0aGlzLnBhcmFtc1t0eXBlXSB8fCB0aGlzLnBhcmFtcy5zdGFnZ2VyLCAxMCk7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUHJlLXByb2Nlc3MgdGhlIHZhbHVlIGJlZm9yZSBwaXBpbmcgaXQgdGhyb3VnaCB0aGVcblx0ICAgKiBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuXHQgICAqL1xuXHRcblx0ICBfcHJlUHJvY2VzczogZnVuY3Rpb24gX3ByZVByb2Nlc3ModmFsdWUpIHtcblx0ICAgIC8vIHJlZ2FyZGxlc3Mgb2YgdHlwZSwgc3RvcmUgdGhlIHVuLWZpbHRlcmVkIHJhdyB2YWx1ZS5cblx0ICAgIHRoaXMucmF3VmFsdWUgPSB2YWx1ZTtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBQb3N0LXByb2Nlc3MgdGhlIHZhbHVlIGFmdGVyIGl0IGhhcyBiZWVuIHBpcGVkIHRocm91Z2hcblx0ICAgKiB0aGUgZmlsdGVycy4gVGhpcyBpcyBwYXNzZWQgdG8gYW5kIGNhbGxlZCBieSB0aGUgd2F0Y2hlci5cblx0ICAgKlxuXHQgICAqIEl0IGlzIG5lY2Vzc2FyeSBmb3IgdGhpcyB0byBiZSBjYWxsZWQgZHVyaW5nIHRoZVxuXHQgICAqIHdhdGNoZXIncyBkZXBlbmRlbmN5IGNvbGxlY3Rpb24gcGhhc2UgYmVjYXVzZSB3ZSB3YW50XG5cdCAgICogdGhlIHYtZm9yIHRvIHVwZGF0ZSB3aGVuIHRoZSBzb3VyY2UgT2JqZWN0IGlzIG11dGF0ZWQuXG5cdCAgICovXG5cdFxuXHQgIF9wb3N0UHJvY2VzczogZnVuY3Rpb24gX3Bvc3RQcm9jZXNzKHZhbHVlKSB7XG5cdCAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgcmV0dXJuIHZhbHVlO1xuXHQgICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuXHQgICAgICAvLyBjb252ZXJ0IHBsYWluIG9iamVjdCB0byBhcnJheS5cblx0ICAgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWx1ZSk7XG5cdCAgICAgIHZhciBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICAgIHZhciByZXMgPSBuZXcgQXJyYXkoaSk7XG5cdCAgICAgIHZhciBrZXk7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAgIHJlc1tpXSA9IHtcblx0ICAgICAgICAgICRrZXk6IGtleSxcblx0ICAgICAgICAgICR2YWx1ZTogdmFsdWVba2V5XVxuXHQgICAgICAgIH07XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHJlcztcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSkpIHtcblx0ICAgICAgICB2YWx1ZSA9IHJhbmdlKHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gdmFsdWUgfHwgW107XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuXHQgICAgICAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnNbdGhpcy5kZXNjcmlwdG9yLnJlZl0gPSBudWxsO1xuXHQgICAgfVxuXHQgICAgaWYgKHRoaXMuZnJhZ3MpIHtcblx0ICAgICAgdmFyIGkgPSB0aGlzLmZyYWdzLmxlbmd0aDtcblx0ICAgICAgdmFyIGZyYWc7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICBmcmFnID0gdGhpcy5mcmFnc1tpXTtcblx0ICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG5cdCAgICAgICAgZnJhZy5kZXN0cm95KCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogSGVscGVyIHRvIGZpbmQgdGhlIHByZXZpb3VzIGVsZW1lbnQgdGhhdCBpcyBhIGZyYWdtZW50XG5cdCAqIGFuY2hvci4gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBhIGRlc3Ryb3llZCBmcmFnJ3Ncblx0ICogZWxlbWVudCBjb3VsZCBzdGlsbCBiZSBsaW5nZXJpbmcgaW4gdGhlIERPTSBiZWZvcmUgaXRzXG5cdCAqIGxlYXZpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcywgYnV0IGl0cyBpbnNlcnRlZCBmbGFnXG5cdCAqIHNob3VsZCBoYXZlIGJlZW4gc2V0IHRvIGZhbHNlIHNvIHdlIGNhbiBza2lwIHRoZW0uXG5cdCAqXG5cdCAqIElmIHRoaXMgaXMgYSBibG9jayByZXBlYXQsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIG9ubHlcblx0ICogcmV0dXJuIGZyYWcgdGhhdCBpcyBib3VuZCB0byB0aGlzIHYtZm9yLiAoc2VlICM5MjkpXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcblx0ICogQHBhcmFtIHtDb21tZW50fFRleHR9IGFuY2hvclxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICogQHJldHVybiB7RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmluZFByZXZGcmFnKGZyYWcsIGFuY2hvciwgaWQpIHtcblx0ICB2YXIgZWwgPSBmcmFnLm5vZGUucHJldmlvdXNTaWJsaW5nO1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmICghZWwpIHJldHVybjtcblx0ICBmcmFnID0gZWwuX192X2ZyYWc7XG5cdCAgd2hpbGUgKCghZnJhZyB8fCBmcmFnLmZvcklkICE9PSBpZCB8fCAhZnJhZy5pbnNlcnRlZCkgJiYgZWwgIT09IGFuY2hvcikge1xuXHQgICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghZWwpIHJldHVybjtcblx0ICAgIGZyYWcgPSBlbC5fX3ZfZnJhZztcblx0ICB9XG5cdCAgcmV0dXJuIGZyYWc7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGaW5kIGEgdm0gZnJvbSBhIGZyYWdtZW50LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG5cdCAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmluZFZtRnJvbUZyYWcoZnJhZykge1xuXHQgIHZhciBub2RlID0gZnJhZy5ub2RlO1xuXHQgIC8vIGhhbmRsZSBtdWx0aS1ub2RlIGZyYWdcblx0ICBpZiAoZnJhZy5lbmQpIHtcblx0ICAgIHdoaWxlICghbm9kZS5fX3Z1ZV9fICYmIG5vZGUgIT09IGZyYWcuZW5kICYmIG5vZGUubmV4dFNpYmxpbmcpIHtcblx0ICAgICAgbm9kZSA9IG5vZGUubmV4dFNpYmxpbmc7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiBub2RlLl9fdnVlX187XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDcmVhdGUgYSByYW5nZSBhcnJheSBmcm9tIGdpdmVuIG51bWJlci5cblx0ICpcblx0ICogQHBhcmFtIHtOdW1iZXJ9IG5cblx0ICogQHJldHVybiB7QXJyYXl9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmFuZ2Uobikge1xuXHQgIHZhciBpID0gLTE7XG5cdCAgdmFyIHJldCA9IG5ldyBBcnJheShNYXRoLmZsb29yKG4pKTtcblx0ICB3aGlsZSAoKytpIDwgbikge1xuXHQgICAgcmV0W2ldID0gaTtcblx0ICB9XG5cdCAgcmV0dXJuIHJldDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEdldCB0aGUgdHJhY2sgYnkga2V5IGZvciBhbiBpdGVtLlxuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcblx0ICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbdHJhY2tCeUtleV1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KSB7XG5cdCAgcmV0dXJuIHRyYWNrQnlLZXkgPyB0cmFja0J5S2V5ID09PSAnJGluZGV4JyA/IGluZGV4IDogdHJhY2tCeUtleS5jaGFyQXQoMCkubWF0Y2goL1xcdy8pID8gZ2V0UGF0aCh2YWx1ZSwgdHJhY2tCeUtleSkgOiB2YWx1ZVt0cmFja0J5S2V5XSA6IGtleSB8fCB2YWx1ZTtcblx0fVxuXHRcblx0aWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICB2Rm9yLndhcm5EdXBsaWNhdGUgPSBmdW5jdGlvbiAodmFsdWUpIHtcblx0ICAgIHdhcm4oJ0R1cGxpY2F0ZSB2YWx1ZSBmb3VuZCBpbiB2LWZvcj1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJy4gVXNlIHRyYWNrLWJ5PVwiJGluZGV4XCIgaWYgJyArICd5b3UgYXJlIGV4cGVjdGluZyBkdXBsaWNhdGUgdmFsdWVzLicsIHRoaXMudm0pO1xuXHQgIH07XG5cdH1cblx0XG5cdHZhciB2SWYgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBJRixcblx0ICB0ZXJtaW5hbDogdHJ1ZSxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBpZiAoIWVsLl9fdnVlX18pIHtcblx0ICAgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuXHQgICAgICB2YXIgbmV4dCA9IGVsLm5leHRFbGVtZW50U2libGluZztcblx0ICAgICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcblx0ICAgICAgICByZW1vdmUobmV4dCk7XG5cdCAgICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNoZWNrIG1haW4gYmxvY2tcblx0ICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaWYnKTtcblx0ICAgICAgcmVwbGFjZShlbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LWlmPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBjYW5ub3QgYmUgJyArICd1c2VkIG9uIGFuIGluc3RhbmNlIHJvb3QgZWxlbWVudC4nLCB0aGlzLnZtKTtcblx0ICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKHRoaXMuaW52YWxpZCkgcmV0dXJuO1xuXHQgICAgaWYgKHZhbHVlKSB7XG5cdCAgICAgIGlmICghdGhpcy5mcmFnKSB7XG5cdCAgICAgICAgdGhpcy5pbnNlcnQoKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5yZW1vdmUoKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydCgpIHtcblx0ICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcucmVtb3ZlKCk7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcgPSBudWxsO1xuXHQgICAgfVxuXHQgICAgLy8gbGF6eSBpbml0IGZhY3Rvcnlcblx0ICAgIGlmICghdGhpcy5mYWN0b3J5KSB7XG5cdCAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG5cdCAgICB9XG5cdCAgICB0aGlzLmZyYWcgPSB0aGlzLmZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcblx0ICAgIHRoaXMuZnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuXHQgIH0sXG5cdFxuXHQgIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuXHQgICAgaWYgKHRoaXMuZnJhZykge1xuXHQgICAgICB0aGlzLmZyYWcucmVtb3ZlKCk7XG5cdCAgICAgIHRoaXMuZnJhZyA9IG51bGw7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5lbHNlRWwgJiYgIXRoaXMuZWxzZUZyYWcpIHtcblx0ICAgICAgaWYgKCF0aGlzLmVsc2VGYWN0b3J5KSB7XG5cdCAgICAgICAgdGhpcy5lbHNlRmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy5lbHNlRWwuX2NvbnRleHQgfHwgdGhpcy52bSwgdGhpcy5lbHNlRWwpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcgPSB0aGlzLmVsc2VGYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIGlmICh0aGlzLmZyYWcpIHtcblx0ICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG5cdCAgICAgIHRoaXMuZWxzZUZyYWcuZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBzaG93ID0ge1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuXHQgICAgdmFyIG5leHQgPSB0aGlzLmVsLm5leHRFbGVtZW50U2libGluZztcblx0ICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG5cdCAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgdGhpcy5hcHBseSh0aGlzLmVsLCB2YWx1ZSk7XG5cdCAgICBpZiAodGhpcy5lbHNlRWwpIHtcblx0ICAgICAgdGhpcy5hcHBseSh0aGlzLmVsc2VFbCwgIXZhbHVlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBhcHBseTogZnVuY3Rpb24gYXBwbHkoZWwsIHZhbHVlKSB7XG5cdCAgICBpZiAoaW5Eb2MoZWwpKSB7XG5cdCAgICAgIGFwcGx5VHJhbnNpdGlvbihlbCwgdmFsdWUgPyAxIDogLTEsIHRvZ2dsZSwgdGhpcy52bSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0b2dnbGUoKTtcblx0ICAgIH1cblx0ICAgIGZ1bmN0aW9uIHRvZ2dsZSgpIHtcblx0ICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gJycgOiAnbm9uZSc7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHRleHQkMiA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICB2YXIgaXNSYW5nZSA9IGVsLnR5cGUgPT09ICdyYW5nZSc7XG5cdCAgICB2YXIgbGF6eSA9IHRoaXMucGFyYW1zLmxhenk7XG5cdCAgICB2YXIgbnVtYmVyID0gdGhpcy5wYXJhbXMubnVtYmVyO1xuXHQgICAgdmFyIGRlYm91bmNlID0gdGhpcy5wYXJhbXMuZGVib3VuY2U7XG5cdFxuXHQgICAgLy8gaGFuZGxlIGNvbXBvc2l0aW9uIGV2ZW50cy5cblx0ICAgIC8vICAgaHR0cDovL2Jsb2cuZXZhbnlvdS5tZS8yMDE0LzAxLzAzL2NvbXBvc2l0aW9uLWV2ZW50L1xuXHQgICAgLy8gc2tpcCB0aGlzIGZvciBBbmRyb2lkIGJlY2F1c2UgaXQgaGFuZGxlcyBjb21wb3NpdGlvblxuXHQgICAgLy8gZXZlbnRzIHF1aXRlIGRpZmZlcmVudGx5LiBBbmRyb2lkIGRvZXNuJ3QgdHJpZ2dlclxuXHQgICAgLy8gY29tcG9zaXRpb24gZXZlbnRzIGZvciBsYW5ndWFnZSBpbnB1dCBtZXRob2RzIGUuZy5cblx0ICAgIC8vIENoaW5lc2UsIGJ1dCBpbnN0ZWFkIHRyaWdnZXJzIHRoZW0gZm9yIHNwZWxsaW5nXG5cdCAgICAvLyBzdWdnZXN0aW9ucy4uLiAoc2VlIERpc2N1c3Npb24vIzE2Milcblx0ICAgIHZhciBjb21wb3NpbmcgPSBmYWxzZTtcblx0ICAgIGlmICghaXNBbmRyb2lkICYmICFpc1JhbmdlKSB7XG5cdCAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGNvbXBvc2luZyA9IGZhbHNlO1xuXHQgICAgICAgIC8vIGluIElFMTEgdGhlIFwiY29tcG9zaXRpb25lbmRcIiBldmVudCBmaXJlcyBBRlRFUlxuXHQgICAgICAgIC8vIHRoZSBcImlucHV0XCIgZXZlbnQsIHNvIHRoZSBpbnB1dCBoYW5kbGVyIGlzIGJsb2NrZWRcblx0ICAgICAgICAvLyBhdCB0aGUgZW5kLi4uIGhhdmUgdG8gY2FsbCBpdCBoZXJlLlxuXHQgICAgICAgIC8vXG5cdCAgICAgICAgLy8gIzEzMjc6IGluIGxhenkgbW9kZSB0aGlzIGlzIHVuZWNlc3NhcnkuXG5cdCAgICAgICAgaWYgKCFsYXp5KSB7XG5cdCAgICAgICAgICBzZWxmLmxpc3RlbmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBwcmV2ZW50IG1lc3Npbmcgd2l0aCB0aGUgaW5wdXQgd2hlbiB1c2VyIGlzIHR5cGluZyxcblx0ICAgIC8vIGFuZCBmb3JjZSB1cGRhdGUgb24gYmx1ci5cblx0ICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuXHQgICAgaWYgKCFpc1JhbmdlICYmICFsYXp5KSB7XG5cdCAgICAgIHRoaXMub24oJ2ZvY3VzJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYuZm9jdXNlZCA9IHRydWU7XG5cdCAgICAgIH0pO1xuXHQgICAgICB0aGlzLm9uKCdibHVyJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYuZm9jdXNlZCA9IGZhbHNlO1xuXHQgICAgICAgIC8vIGRvIG5vdCBzeW5jIHZhbHVlIGFmdGVyIGZyYWdtZW50IHJlbW92YWwgKCMyMDE3KVxuXHQgICAgICAgIGlmICghc2VsZi5fZnJhZyB8fCBzZWxmLl9mcmFnLmluc2VydGVkKSB7XG5cdCAgICAgICAgICBzZWxmLnJhd0xpc3RlbmVyKCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBOb3cgYXR0YWNoIHRoZSBtYWluIGxpc3RlbmVyXG5cdCAgICB0aGlzLmxpc3RlbmVyID0gdGhpcy5yYXdMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKGNvbXBvc2luZyB8fCAhc2VsZi5fYm91bmQpIHtcblx0ICAgICAgICByZXR1cm47XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHZhbCA9IG51bWJlciB8fCBpc1JhbmdlID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG5cdCAgICAgIHNlbGYuc2V0KHZhbCk7XG5cdCAgICAgIC8vIGZvcmNlIHVwZGF0ZSBvbiBuZXh0IHRpY2sgdG8gYXZvaWQgbG9jayAmIHNhbWUgdmFsdWVcblx0ICAgICAgLy8gYWxzbyBvbmx5IHVwZGF0ZSB3aGVuIHVzZXIgaXMgbm90IHR5cGluZ1xuXHQgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgaWYgKHNlbGYuX2JvdW5kICYmICFzZWxmLmZvY3VzZWQpIHtcblx0ICAgICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIudmFsdWUpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9O1xuXHRcblx0ICAgIC8vIGFwcGx5IGRlYm91bmNlXG5cdCAgICBpZiAoZGVib3VuY2UpIHtcblx0ICAgICAgdGhpcy5saXN0ZW5lciA9IF9kZWJvdW5jZSh0aGlzLmxpc3RlbmVyLCBkZWJvdW5jZSk7XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gU3VwcG9ydCBqUXVlcnkgZXZlbnRzLCBzaW5jZSBqUXVlcnkudHJpZ2dlcigpIGRvZXNuJ3Rcblx0ICAgIC8vIHRyaWdnZXIgbmF0aXZlIGV2ZW50cyBpbiBzb21lIGNhc2VzIGFuZCBzb21lIHBsdWdpbnNcblx0ICAgIC8vIHJlbHkgb24gJC50cmlnZ2VyKClcblx0ICAgIC8vXG5cdCAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSBpZiBhIGxpc3RlbmVyIGlzIGF0dGFjaGVkIHVzaW5nXG5cdCAgICAvLyBqUXVlcnksIGl0IGlzIGFsc28gcmVtb3ZlZCB3aXRoIGpRdWVyeSwgdGhhdCdzIHdoeVxuXHQgICAgLy8gd2UgZG8gdGhlIGNoZWNrIGZvciBlYWNoIGRpcmVjdGl2ZSBpbnN0YW5jZSBhbmRcblx0ICAgIC8vIHN0b3JlIHRoYXQgY2hlY2sgcmVzdWx0IG9uIGl0c2VsZi4gVGhpcyBhbHNvIGFsbG93c1xuXHQgICAgLy8gZWFzaWVyIHRlc3QgY292ZXJhZ2UgY29udHJvbCBieSB1bnNldHRpbmcgdGhlIGdsb2JhbFxuXHQgICAgLy8galF1ZXJ5IHZhcmlhYmxlIGluIHRlc3RzLlxuXHQgICAgdGhpcy5oYXNqUXVlcnkgPSB0eXBlb2YgalF1ZXJ5ID09PSAnZnVuY3Rpb24nO1xuXHQgICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG5cdCAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub24gPyAnb24nIDogJ2JpbmQnO1xuXHQgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuXHQgICAgICBpZiAoIWxhenkpIHtcblx0ICAgICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuXHQgICAgICBpZiAoIWxhenkpIHtcblx0ICAgICAgICB0aGlzLm9uKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdFxuXHQgICAgLy8gSUU5IGRvZXNuJ3QgZmlyZSBpbnB1dCBldmVudCBvbiBiYWNrc3BhY2UvZGVsL2N1dFxuXHQgICAgaWYgKCFsYXp5ICYmIGlzSUU5KSB7XG5cdCAgICAgIHRoaXMub24oJ2N1dCcsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBuZXh0VGljayhzZWxmLmxpc3RlbmVyKTtcblx0ICAgICAgfSk7XG5cdCAgICAgIHRoaXMub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcblx0ICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA0NiB8fCBlLmtleUNvZGUgPT09IDgpIHtcblx0ICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIHNldCBpbml0aWFsIHZhbHVlIGlmIHByZXNlbnRcblx0ICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJiBlbC52YWx1ZS50cmltKCkpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICAvLyAjMzAyOSBvbmx5IHVwZGF0ZSB3aGVuIHRoZSB2YWx1ZSBjaGFuZ2VzLiBUaGlzIHByZXZlbnRcblx0ICAgIC8vIGJyb3dzZXJzIGZyb20gb3ZlcndyaXRpbmcgdmFsdWVzIGxpa2Ugc2VsZWN0aW9uU3RhcnRcblx0ICAgIHZhbHVlID0gX3RvU3RyaW5nKHZhbHVlKTtcblx0ICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5lbC52YWx1ZSkgdGhpcy5lbC52YWx1ZSA9IHZhbHVlO1xuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuXHQgICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XG5cdCAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cdCAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcmFkaW8gPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHRcblx0ICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIC8vIHZhbHVlIG92ZXJ3cml0ZSB2aWEgdi1iaW5kOnZhbHVlXG5cdCAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykpIHtcblx0ICAgICAgICByZXR1cm4gZWwuX3ZhbHVlO1xuXHQgICAgICB9XG5cdCAgICAgIHZhciB2YWwgPSBlbC52YWx1ZTtcblx0ICAgICAgaWYgKHNlbGYucGFyYW1zLm51bWJlcikge1xuXHQgICAgICAgIHZhbCA9IHRvTnVtYmVyKHZhbCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbDtcblx0ICAgIH07XG5cdFxuXHQgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgc2VsZi5zZXQoc2VsZi5nZXRWYWx1ZSgpKTtcblx0ICAgIH07XG5cdCAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0XG5cdCAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB0aGlzLmVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBzZWxlY3QgPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXHRcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdFxuXHQgICAgLy8gbWV0aG9kIHRvIGZvcmNlIHVwZGF0ZSBET00gdXNpbmcgbGF0ZXN0IHZhbHVlLlxuXHQgICAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgaWYgKHNlbGYuX3dhdGNoZXIpIHtcblx0ICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLmdldCgpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgbXVsdGlwbGUgc2VsZWN0XG5cdCAgICB2YXIgbXVsdGlwbGUgPSB0aGlzLm11bHRpcGxlID0gZWwuaGFzQXR0cmlidXRlKCdtdWx0aXBsZScpO1xuXHRcblx0ICAgIC8vIGF0dGFjaCBsaXN0ZW5lclxuXHQgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlKTtcblx0ICAgICAgdmFsdWUgPSBzZWxmLnBhcmFtcy5udW1iZXIgPyBpc0FycmF5KHZhbHVlKSA/IHZhbHVlLm1hcCh0b051bWJlcikgOiB0b051bWJlcih2YWx1ZSkgOiB2YWx1ZTtcblx0ICAgICAgc2VsZi5zZXQodmFsdWUpO1xuXHQgICAgfTtcblx0ICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXHRcblx0ICAgIC8vIGlmIGhhcyBpbml0aWFsIHZhbHVlLCBzZXQgYWZ0ZXJCaW5kXG5cdCAgICB2YXIgaW5pdFZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlLCB0cnVlKTtcblx0ICAgIGlmIChtdWx0aXBsZSAmJiBpbml0VmFsdWUubGVuZ3RoIHx8ICFtdWx0aXBsZSAmJiBpbml0VmFsdWUgIT09IG51bGwpIHtcblx0ICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIEFsbCBtYWpvciBicm93c2VycyBleGNlcHQgRmlyZWZveCByZXNldHNcblx0ICAgIC8vIHNlbGVjdGVkSW5kZXggd2l0aCB2YWx1ZSAtMSB0byAwIHdoZW4gdGhlIGVsZW1lbnRcblx0ICAgIC8vIGlzIGFwcGVuZGVkIHRvIGEgbmV3IHBhcmVudCwgdGhlcmVmb3JlIHdlIGhhdmUgdG9cblx0ICAgIC8vIGZvcmNlIGEgRE9NIHVwZGF0ZSB3aGVuZXZlciB0aGF0IGhhcHBlbnMuLi5cblx0ICAgIHRoaXMudm0uJG9uKCdob29rOmF0dGFjaGVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBuZXh0VGljayhfdGhpcy5mb3JjZVVwZGF0ZSk7XG5cdCAgICB9KTtcblx0ICAgIGlmICghaW5Eb2MoZWwpKSB7XG5cdCAgICAgIG5leHRUaWNrKHRoaXMuZm9yY2VVcGRhdGUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgZWwuc2VsZWN0ZWRJbmRleCA9IC0xO1xuXHQgICAgdmFyIG11bHRpID0gdGhpcy5tdWx0aXBsZSAmJiBpc0FycmF5KHZhbHVlKTtcblx0ICAgIHZhciBvcHRpb25zID0gZWwub3B0aW9ucztcblx0ICAgIHZhciBpID0gb3B0aW9ucy5sZW5ndGg7XG5cdCAgICB2YXIgb3AsIHZhbDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgb3AgPSBvcHRpb25zW2ldO1xuXHQgICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcblx0ICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG5cdCAgICAgIG9wLnNlbGVjdGVkID0gbXVsdGkgPyBpbmRleE9mJDEodmFsdWUsIHZhbCkgPiAtMSA6IGxvb3NlRXF1YWwodmFsdWUsIHZhbCk7XG5cdCAgICAgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQgICAgdGhpcy52bS4kb2ZmKCdob29rOmF0dGFjaGVkJywgdGhpcy5mb3JjZVVwZGF0ZSk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEdldCBzZWxlY3QgdmFsdWVcblx0ICpcblx0ICogQHBhcmFtIHtTZWxlY3RFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0Jvb2xlYW59IG11bHRpXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5pdFxuXHQgKiBAcmV0dXJuIHtBcnJheXwqfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGdldFZhbHVlKGVsLCBtdWx0aSwgaW5pdCkge1xuXHQgIHZhciByZXMgPSBtdWx0aSA/IFtdIDogbnVsbDtcblx0ICB2YXIgb3AsIHZhbCwgc2VsZWN0ZWQ7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBlbC5vcHRpb25zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgb3AgPSBlbC5vcHRpb25zW2ldO1xuXHQgICAgc2VsZWN0ZWQgPSBpbml0ID8gb3AuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpIDogb3Auc2VsZWN0ZWQ7XG5cdCAgICBpZiAoc2VsZWN0ZWQpIHtcblx0ICAgICAgdmFsID0gb3AuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gb3AuX3ZhbHVlIDogb3AudmFsdWU7XG5cdCAgICAgIGlmIChtdWx0aSkge1xuXHQgICAgICAgIHJlcy5wdXNoKHZhbCk7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcmV0dXJuIHZhbDtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTmF0aXZlIEFycmF5LmluZGV4T2YgdXNlcyBzdHJpY3QgZXF1YWwsIGJ1dCBpbiB0aGlzXG5cdCAqIGNhc2Ugd2UgbmVlZCB0byBtYXRjaCBzdHJpbmcvbnVtYmVycyB3aXRoIGN1c3RvbSBlcXVhbC5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gYXJyXG5cdCAqIEBwYXJhbSB7Kn0gdmFsXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5kZXhPZiQxKGFyciwgdmFsKSB7XG5cdCAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGlmIChsb29zZUVxdWFsKGFycltpXSwgdmFsKSkge1xuXHQgICAgICByZXR1cm4gaTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIC0xO1xuXHR9XG5cdFxuXHR2YXIgY2hlY2tib3ggPSB7XG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHRcblx0ICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHJldHVybiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBlbC5fdmFsdWUgOiBzZWxmLnBhcmFtcy5udW1iZXIgPyB0b051bWJlcihlbC52YWx1ZSkgOiBlbC52YWx1ZTtcblx0ICAgIH07XG5cdFxuXHQgICAgZnVuY3Rpb24gZ2V0Qm9vbGVhblZhbHVlKCkge1xuXHQgICAgICB2YXIgdmFsID0gZWwuY2hlY2tlZDtcblx0ICAgICAgaWYgKHZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG5cdCAgICAgICAgcmV0dXJuIGVsLl90cnVlVmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKCF2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ19mYWxzZVZhbHVlJykpIHtcblx0ICAgICAgICByZXR1cm4gZWwuX2ZhbHNlVmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHZhbDtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICB2YXIgbW9kZWwgPSBzZWxmLl93YXRjaGVyLnZhbHVlO1xuXHQgICAgICBpZiAoaXNBcnJheShtb2RlbCkpIHtcblx0ICAgICAgICB2YXIgdmFsID0gc2VsZi5nZXRWYWx1ZSgpO1xuXHQgICAgICAgIGlmIChlbC5jaGVja2VkKSB7XG5cdCAgICAgICAgICBpZiAoaW5kZXhPZihtb2RlbCwgdmFsKSA8IDApIHtcblx0ICAgICAgICAgICAgbW9kZWwucHVzaCh2YWwpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBtb2RlbC4kcmVtb3ZlKHZhbCk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHNlbGYuc2V0KGdldEJvb2xlYW5WYWx1ZSgpKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblx0ICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuXHQgICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgZWwuY2hlY2tlZCA9IGluZGV4T2YodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSkgPiAtMTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG5cdCAgICAgICAgZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIGVsLl90cnVlVmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGVsLmNoZWNrZWQgPSAhIXZhbHVlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIGhhbmRsZXJzID0ge1xuXHQgIHRleHQ6IHRleHQkMixcblx0ICByYWRpbzogcmFkaW8sXG5cdCAgc2VsZWN0OiBzZWxlY3QsXG5cdCAgY2hlY2tib3g6IGNoZWNrYm94XG5cdH07XG5cdFxuXHR2YXIgbW9kZWwgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBNT0RFTCxcblx0ICB0d29XYXk6IHRydWUsXG5cdCAgaGFuZGxlcnM6IGhhbmRsZXJzLFxuXHQgIHBhcmFtczogWydsYXp5JywgJ251bWJlcicsICdkZWJvdW5jZSddLFxuXHRcblx0ICAvKipcblx0ICAgKiBQb3NzaWJsZSBlbGVtZW50czpcblx0ICAgKiAgIDxzZWxlY3Q+XG5cdCAgICogICA8dGV4dGFyZWE+XG5cdCAgICogICA8aW5wdXQgdHlwZT1cIipcIj5cblx0ICAgKiAgICAgLSB0ZXh0XG5cdCAgICogICAgIC0gY2hlY2tib3hcblx0ICAgKiAgICAgLSByYWRpb1xuXHQgICAqICAgICAtIG51bWJlclxuXHQgICAqL1xuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLy8gZnJpZW5kbHkgd2FybmluZy4uLlxuXHQgICAgdGhpcy5jaGVja0ZpbHRlcnMoKTtcblx0ICAgIGlmICh0aGlzLmhhc1JlYWQgJiYgIXRoaXMuaGFzV3JpdGUpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIGEgcmVhZC1vbmx5IGZpbHRlciB3aXRoICcgKyAndi1tb2RlbD1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiLiAnICsgJ1lvdSBtaWdodCB3YW50IHRvIHVzZSBhIHR3by13YXkgZmlsdGVyIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW9yLicsIHRoaXMudm0pO1xuXHQgICAgfVxuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHZhciB0YWcgPSBlbC50YWdOYW1lO1xuXHQgICAgdmFyIGhhbmRsZXI7XG5cdCAgICBpZiAodGFnID09PSAnSU5QVVQnKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBoYW5kbGVyc1tlbC50eXBlXSB8fCBoYW5kbGVycy50ZXh0O1xuXHQgICAgfSBlbHNlIGlmICh0YWcgPT09ICdTRUxFQ1QnKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBoYW5kbGVycy5zZWxlY3Q7XG5cdCAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1RFWFRBUkVBJykge1xuXHQgICAgICBoYW5kbGVyID0gaGFuZGxlcnMudGV4dDtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1tb2RlbCBkb2VzIG5vdCBzdXBwb3J0IGVsZW1lbnQgdHlwZTogJyArIHRhZywgdGhpcy52bSk7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGVsLl9fdl9tb2RlbCA9IHRoaXM7XG5cdCAgICBoYW5kbGVyLmJpbmQuY2FsbCh0aGlzKTtcblx0ICAgIHRoaXMudXBkYXRlID0gaGFuZGxlci51cGRhdGU7XG5cdCAgICB0aGlzLl91bmJpbmQgPSBoYW5kbGVyLnVuYmluZDtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDaGVjayByZWFkL3dyaXRlIGZpbHRlciBzdGF0cy5cblx0ICAgKi9cblx0XG5cdCAgY2hlY2tGaWx0ZXJzOiBmdW5jdGlvbiBjaGVja0ZpbHRlcnMoKSB7XG5cdCAgICB2YXIgZmlsdGVycyA9IHRoaXMuZmlsdGVycztcblx0ICAgIGlmICghZmlsdGVycykgcmV0dXJuO1xuXHQgICAgdmFyIGkgPSBmaWx0ZXJzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgdmFyIGZpbHRlciA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlcnNbaV0ubmFtZSk7XG5cdCAgICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nIHx8IGZpbHRlci5yZWFkKSB7XG5cdCAgICAgICAgdGhpcy5oYXNSZWFkID0gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoZmlsdGVyLndyaXRlKSB7XG5cdCAgICAgICAgdGhpcy5oYXNXcml0ZSA9IHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMuZWwuX192X21vZGVsID0gbnVsbDtcblx0ICAgIHRoaXMuX3VuYmluZCAmJiB0aGlzLl91bmJpbmQoKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvLyBrZXlDb2RlIGFsaWFzZXNcblx0dmFyIGtleUNvZGVzID0ge1xuXHQgIGVzYzogMjcsXG5cdCAgdGFiOiA5LFxuXHQgIGVudGVyOiAxMyxcblx0ICBzcGFjZTogMzIsXG5cdCAgJ2RlbGV0ZSc6IFs4LCA0Nl0sXG5cdCAgdXA6IDM4LFxuXHQgIGxlZnQ6IDM3LFxuXHQgIHJpZ2h0OiAzOSxcblx0ICBkb3duOiA0MFxuXHR9O1xuXHRcblx0ZnVuY3Rpb24ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpIHtcblx0ICB2YXIgY29kZXMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG5cdCAgICB2YXIgY2hhckNvZGUgPSBrZXkuY2hhckNvZGVBdCgwKTtcblx0ICAgIGlmIChjaGFyQ29kZSA+IDQ3ICYmIGNoYXJDb2RlIDwgNTgpIHtcblx0ICAgICAgcmV0dXJuIHBhcnNlSW50KGtleSwgMTApO1xuXHQgICAgfVxuXHQgICAgaWYgKGtleS5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgY2hhckNvZGUgPSBrZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApO1xuXHQgICAgICBpZiAoY2hhckNvZGUgPiA2NCAmJiBjaGFyQ29kZSA8IDkxKSB7XG5cdCAgICAgICAgcmV0dXJuIGNoYXJDb2RlO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4ga2V5Q29kZXNba2V5XTtcblx0ICB9KTtcblx0ICBjb2RlcyA9IFtdLmNvbmNhdC5hcHBseShbXSwgY29kZXMpO1xuXHQgIHJldHVybiBmdW5jdGlvbiBrZXlIYW5kbGVyKGUpIHtcblx0ICAgIGlmIChjb2Rlcy5pbmRleE9mKGUua2V5Q29kZSkgPiAtMSkge1xuXHQgICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHN0b3BGaWx0ZXIoaGFuZGxlcikge1xuXHQgIHJldHVybiBmdW5jdGlvbiBzdG9wSGFuZGxlcihlKSB7XG5cdCAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHQgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gcHJldmVudEhhbmRsZXIoZSkge1xuXHQgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHQgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICB9O1xuXHR9XG5cdFxuXHRmdW5jdGlvbiBzZWxmRmlsdGVyKGhhbmRsZXIpIHtcblx0ICByZXR1cm4gZnVuY3Rpb24gc2VsZkhhbmRsZXIoZSkge1xuXHQgICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcblx0ICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHR2YXIgb24kMSA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IE9OLFxuXHQgIGFjY2VwdFN0YXRlbWVudDogdHJ1ZSxcblx0ICBrZXlDb2Rlczoga2V5Q29kZXMsXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyBkZWFsIHdpdGggaWZyYW1lc1xuXHQgICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScgJiYgdGhpcy5hcmcgIT09ICdsb2FkJykge1xuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIHRoaXMuaWZyYW1lQmluZCA9IGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBvbihzZWxmLmVsLmNvbnRlbnRXaW5kb3csIHNlbGYuYXJnLCBzZWxmLmhhbmRsZXIsIHNlbGYubW9kaWZpZXJzLmNhcHR1cmUpO1xuXHQgICAgICB9O1xuXHQgICAgICB0aGlzLm9uKCdsb2FkJywgdGhpcy5pZnJhbWVCaW5kKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShoYW5kbGVyKSB7XG5cdCAgICAvLyBzdHViIGEgbm9vcCBmb3Igdi1vbiB3aXRoIG5vIHZhbHVlLFxuXHQgICAgLy8gZS5nLiBAbW91c2Vkb3duLnByZXZlbnRcblx0ICAgIGlmICghdGhpcy5kZXNjcmlwdG9yLnJhdykge1xuXHQgICAgICBoYW5kbGVyID0gZnVuY3Rpb24gKCkge307XG5cdCAgICB9XG5cdFxuXHQgICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1vbjonICsgdGhpcy5hcmcgKyAnPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBleHBlY3RzIGEgZnVuY3Rpb24gdmFsdWUsICcgKyAnZ290ICcgKyBoYW5kbGVyLCB0aGlzLnZtKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGFwcGx5IG1vZGlmaWVyc1xuXHQgICAgaWYgKHRoaXMubW9kaWZpZXJzLnN0b3ApIHtcblx0ICAgICAgaGFuZGxlciA9IHN0b3BGaWx0ZXIoaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMucHJldmVudCkge1xuXHQgICAgICBoYW5kbGVyID0gcHJldmVudEZpbHRlcihoYW5kbGVyKTtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLm1vZGlmaWVycy5zZWxmKSB7XG5cdCAgICAgIGhhbmRsZXIgPSBzZWxmRmlsdGVyKGhhbmRsZXIpO1xuXHQgICAgfVxuXHQgICAgLy8ga2V5IGZpbHRlclxuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh0aGlzLm1vZGlmaWVycykuZmlsdGVyKGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgICAgcmV0dXJuIGtleSAhPT0gJ3N0b3AnICYmIGtleSAhPT0gJ3ByZXZlbnQnICYmIGtleSAhPT0gJ3NlbGYnICYmIGtleSAhPT0gJ2NhcHR1cmUnO1xuXHQgICAgfSk7XG5cdCAgICBpZiAoa2V5cy5sZW5ndGgpIHtcblx0ICAgICAgaGFuZGxlciA9IGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKTtcblx0ICAgIH1cblx0XG5cdCAgICB0aGlzLnJlc2V0KCk7XG5cdCAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xuXHRcblx0ICAgIGlmICh0aGlzLmlmcmFtZUJpbmQpIHtcblx0ICAgICAgdGhpcy5pZnJhbWVCaW5kKCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBvbih0aGlzLmVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyLCB0aGlzLm1vZGlmaWVycy5jYXB0dXJlKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmlmcmFtZUJpbmQgPyB0aGlzLmVsLmNvbnRlbnRXaW5kb3cgOiB0aGlzLmVsO1xuXHQgICAgaWYgKHRoaXMuaGFuZGxlcikge1xuXHQgICAgICBvZmYoZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5yZXNldCgpO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBwcmVmaXhlcyA9IFsnLXdlYmtpdC0nLCAnLW1vei0nLCAnLW1zLSddO1xuXHR2YXIgY2FtZWxQcmVmaXhlcyA9IFsnV2Via2l0JywgJ01veicsICdtcyddO1xuXHR2YXIgaW1wb3J0YW50UkUgPSAvIWltcG9ydGFudDs/JC87XG5cdHZhciBwcm9wQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHRcblx0dmFyIHRlc3RFbCA9IG51bGw7XG5cdFxuXHR2YXIgc3R5bGUgPSB7XG5cdFxuXHQgIGRlZXA6IHRydWUsXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuXHQgICAgICB0aGlzLmVsLnN0eWxlLmNzc1RleHQgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUucmVkdWNlKGV4dGVuZCwge30pKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBoYW5kbGVPYmplY3Q6IGZ1bmN0aW9uIGhhbmRsZU9iamVjdCh2YWx1ZSkge1xuXHQgICAgLy8gY2FjaGUgb2JqZWN0IHN0eWxlcyBzbyB0aGF0IG9ubHkgY2hhbmdlZCBwcm9wc1xuXHQgICAgLy8gYXJlIGFjdHVhbGx5IHVwZGF0ZWQuXG5cdCAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlIHx8ICh0aGlzLmNhY2hlID0ge30pO1xuXHQgICAgdmFyIG5hbWUsIHZhbDtcblx0ICAgIGZvciAobmFtZSBpbiBjYWNoZSkge1xuXHQgICAgICBpZiAoIShuYW1lIGluIHZhbHVlKSkge1xuXHQgICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIG51bGwpO1xuXHQgICAgICAgIGRlbGV0ZSBjYWNoZVtuYW1lXTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgZm9yIChuYW1lIGluIHZhbHVlKSB7XG5cdCAgICAgIHZhbCA9IHZhbHVlW25hbWVdO1xuXHQgICAgICBpZiAodmFsICE9PSBjYWNoZVtuYW1lXSkge1xuXHQgICAgICAgIGNhY2hlW25hbWVdID0gdmFsO1xuXHQgICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIHZhbCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShwcm9wLCB2YWx1ZSkge1xuXHQgICAgcHJvcCA9IG5vcm1hbGl6ZShwcm9wKTtcblx0ICAgIGlmICghcHJvcCkgcmV0dXJuOyAvLyB1bnN1cHBvcnRlZCBwcm9wXG5cdCAgICAvLyBjYXN0IHBvc3NpYmxlIG51bWJlcnMvYm9vbGVhbnMgaW50byBzdHJpbmdzXG5cdCAgICBpZiAodmFsdWUgIT0gbnVsbCkgdmFsdWUgKz0gJyc7XG5cdCAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgdmFyIGlzSW1wb3J0YW50ID0gaW1wb3J0YW50UkUudGVzdCh2YWx1ZSkgPyAnaW1wb3J0YW50JyA6ICcnO1xuXHQgICAgICBpZiAoaXNJbXBvcnRhbnQpIHtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgICAgd2FybignSXRcXCdzIHByb2JhYmx5IGEgYmFkIGlkZWEgdG8gdXNlICFpbXBvcnRhbnQgd2l0aCBpbmxpbmUgcnVsZXMuICcgKyAnVGhpcyBmZWF0dXJlIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFZ1ZS4nKTtcblx0ICAgICAgICB9XG5cdCAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGltcG9ydGFudFJFLCAnJykudHJpbSgpO1xuXHQgICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkocHJvcC5rZWJhYiwgdmFsdWUsIGlzSW1wb3J0YW50KTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSAnJztcblx0ICAgIH1cblx0ICB9XG5cdFxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE5vcm1hbGl6ZSBhIENTUyBwcm9wZXJ0eSBuYW1lLlxuXHQgKiAtIGNhY2hlIHJlc3VsdFxuXHQgKiAtIGF1dG8gcHJlZml4XG5cdCAqIC0gY2FtZWxDYXNlIC0+IGRhc2gtY2FzZVxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbm9ybWFsaXplKHByb3ApIHtcblx0ICBpZiAocHJvcENhY2hlW3Byb3BdKSB7XG5cdCAgICByZXR1cm4gcHJvcENhY2hlW3Byb3BdO1xuXHQgIH1cblx0ICB2YXIgcmVzID0gcHJlZml4KHByb3ApO1xuXHQgIHByb3BDYWNoZVtwcm9wXSA9IHByb3BDYWNoZVtyZXNdID0gcmVzO1xuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBdXRvIGRldGVjdCB0aGUgYXBwcm9wcmlhdGUgcHJlZml4IGZvciBhIENTUyBwcm9wZXJ0eS5cblx0ICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzUyMzY5MlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuXHQgKiBAcmV0dXJuIHtTdHJpbmd9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcHJlZml4KHByb3ApIHtcblx0ICBwcm9wID0gaHlwaGVuYXRlKHByb3ApO1xuXHQgIHZhciBjYW1lbCA9IGNhbWVsaXplKHByb3ApO1xuXHQgIHZhciB1cHBlciA9IGNhbWVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWwuc2xpY2UoMSk7XG5cdCAgaWYgKCF0ZXN0RWwpIHtcblx0ICAgIHRlc3RFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHQgIH1cblx0ICB2YXIgaSA9IHByZWZpeGVzLmxlbmd0aDtcblx0ICB2YXIgcHJlZml4ZWQ7XG5cdCAgaWYgKGNhbWVsICE9PSAnZmlsdGVyJyAmJiBjYW1lbCBpbiB0ZXN0RWwuc3R5bGUpIHtcblx0ICAgIHJldHVybiB7XG5cdCAgICAgIGtlYmFiOiBwcm9wLFxuXHQgICAgICBjYW1lbDogY2FtZWxcblx0ICAgIH07XG5cdCAgfVxuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIHByZWZpeGVkID0gY2FtZWxQcmVmaXhlc1tpXSArIHVwcGVyO1xuXHQgICAgaWYgKHByZWZpeGVkIGluIHRlc3RFbC5zdHlsZSkge1xuXHQgICAgICByZXR1cm4ge1xuXHQgICAgICAgIGtlYmFiOiBwcmVmaXhlc1tpXSArIHByb3AsXG5cdCAgICAgICAgY2FtZWw6IHByZWZpeGVkXG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvLyB4bGlua1xuXHR2YXIgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcblx0dmFyIHhsaW5rUkUgPSAvXnhsaW5rOi87XG5cdFxuXHQvLyBjaGVjayBmb3IgYXR0cmlidXRlcyB0aGF0IHByb2hpYml0IGludGVycG9sYXRpb25zXG5cdHZhciBkaXNhbGxvd2VkSW50ZXJwQXR0clJFID0gL152LXxeOnxeQHxeKD86aXN8dHJhbnNpdGlvbnx0cmFuc2l0aW9uLW1vZGV8ZGVib3VuY2V8dHJhY2stYnl8c3RhZ2dlcnxlbnRlci1zdGFnZ2VyfGxlYXZlLXN0YWdnZXIpJC87XG5cdC8vIHRoZXNlIGF0dHJpYnV0ZXMgc2hvdWxkIGFsc28gc2V0IHRoZWlyIGNvcnJlc3BvbmRpbmcgcHJvcGVydGllc1xuXHQvLyBiZWNhdXNlIHRoZXkgb25seSBhZmZlY3QgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGVsZW1lbnRcblx0dmFyIGF0dHJXaXRoUHJvcHNSRSA9IC9eKD86dmFsdWV8Y2hlY2tlZHxzZWxlY3RlZHxtdXRlZCkkLztcblx0Ly8gdGhlc2UgYXR0cmlidXRlcyBleHBlY3QgZW51bXJhdGVkIHZhbHVlcyBvZiBcInRydWVcIiBvciBcImZhbHNlXCJcblx0Ly8gYnV0IGFyZSBub3QgYm9vbGVhbiBhdHRyaWJ1dGVzXG5cdHZhciBlbnVtZXJhdGVkQXR0clJFID0gL14oPzpkcmFnZ2FibGV8Y29udGVudGVkaXRhYmxlfHNwZWxsY2hlY2spJC87XG5cdFxuXHQvLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBzZXQgYSBoaWRkZW4gcHJvcGVydHkgZm9yXG5cdC8vIGJpbmRpbmcgdi1tb2RlbCB0byBvYmplY3QgdmFsdWVzXG5cdHZhciBtb2RlbFByb3BzID0ge1xuXHQgIHZhbHVlOiAnX3ZhbHVlJyxcblx0ICAndHJ1ZS12YWx1ZSc6ICdfdHJ1ZVZhbHVlJyxcblx0ICAnZmFsc2UtdmFsdWUnOiAnX2ZhbHNlVmFsdWUnXG5cdH07XG5cdFxuXHR2YXIgYmluZCQxID0ge1xuXHRcblx0ICBwcmlvcml0eTogQklORCxcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG5cdCAgICB2YXIgdGFnID0gdGhpcy5lbC50YWdOYW1lO1xuXHQgICAgLy8gc2hvdWxkIGJlIGRlZXAgd2F0Y2ggb24gb2JqZWN0IG1vZGVcblx0ICAgIGlmICghYXR0cikge1xuXHQgICAgICB0aGlzLmRlZXAgPSB0cnVlO1xuXHQgICAgfVxuXHQgICAgLy8gaGFuZGxlIGludGVycG9sYXRpb24gYmluZGluZ3Ncblx0ICAgIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuXHQgICAgdmFyIHRva2VucyA9IGRlc2NyaXB0b3IuaW50ZXJwO1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICAvLyBoYW5kbGUgaW50ZXJwb2xhdGlvbnMgd2l0aCBvbmUtdGltZSB0b2tlbnNcblx0ICAgICAgaWYgKGRlc2NyaXB0b3IuaGFzT25lVGltZSkge1xuXHQgICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IHRva2Vuc1RvRXhwKHRva2VucywgdGhpcy5fc2NvcGUgfHwgdGhpcy52bSk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8vIG9ubHkgYWxsb3cgYmluZGluZyBvbiBuYXRpdmUgYXR0cmlidXRlc1xuXHQgICAgICBpZiAoZGlzYWxsb3dlZEludGVycEF0dHJSRS50ZXN0KGF0dHIpIHx8IGF0dHIgPT09ICduYW1lJyAmJiAodGFnID09PSAnUEFSVElBTCcgfHwgdGFnID09PSAnU0xPVCcpKSB7XG5cdCAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2F0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGlzIG5vdCBhbGxvd2VkIGluIFZ1ZS5qcyAnICsgJ2RpcmVjdGl2ZXMgYW5kIHNwZWNpYWwgYXR0cmlidXRlcy4nLCB0aGlzLnZtKTtcblx0ICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICAgICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcblx0ICAgICAgICB2YXIgcmF3ID0gYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICc7XG5cdCAgICAgICAgLy8gd2FybiBzcmNcblx0ICAgICAgICBpZiAoYXR0ciA9PT0gJ3NyYycpIHtcblx0ICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzcmNcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ2EgNDA0IHJlcXVlc3QuIFVzZSB2LWJpbmQ6c3JjIGluc3RlYWQuJywgdGhpcy52bSk7XG5cdCAgICAgICAgfVxuXHRcblx0ICAgICAgICAvLyB3YXJuIHN0eWxlXG5cdCAgICAgICAgaWYgKGF0dHIgPT09ICdzdHlsZScpIHtcblx0ICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzdHlsZVwiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAndGhlIGF0dHJpYnV0ZSB0byBiZSBkaXNjYXJkZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuICcgKyAnVXNlIHYtYmluZDpzdHlsZSBpbnN0ZWFkLicsIHRoaXMudm0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAodGhpcy5pbnZhbGlkKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG5cdCAgICBpZiAodGhpcy5hcmcpIHtcblx0ICAgICAgdGhpcy5oYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8vIHNoYXJlIG9iamVjdCBoYW5kbGVyIHdpdGggdi1iaW5kOmNsYXNzXG5cdCAgaGFuZGxlT2JqZWN0OiBzdHlsZS5oYW5kbGVPYmplY3QsXG5cdFxuXHQgIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKSB7XG5cdCAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgICAgdmFyIGludGVycCA9IHRoaXMuZGVzY3JpcHRvci5pbnRlcnA7XG5cdCAgICBpZiAodGhpcy5tb2RpZmllcnMuY2FtZWwpIHtcblx0ICAgICAgYXR0ciA9IGNhbWVsaXplKGF0dHIpO1xuXHQgICAgfVxuXHQgICAgaWYgKCFpbnRlcnAgJiYgYXR0cldpdGhQcm9wc1JFLnRlc3QoYXR0cikgJiYgYXR0ciBpbiBlbCkge1xuXHQgICAgICB2YXIgYXR0clZhbHVlID0gYXR0ciA9PT0gJ3ZhbHVlJyA/IHZhbHVlID09IG51bGwgLy8gSUU5IHdpbGwgc2V0IGlucHV0LnZhbHVlIHRvIFwibnVsbFwiIGZvciBudWxsLi4uXG5cdCAgICAgID8gJycgOiB2YWx1ZSA6IHZhbHVlO1xuXHRcblx0ICAgICAgaWYgKGVsW2F0dHJdICE9PSBhdHRyVmFsdWUpIHtcblx0ICAgICAgICBlbFthdHRyXSA9IGF0dHJWYWx1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gc2V0IG1vZGVsIHByb3BzXG5cdCAgICB2YXIgbW9kZWxQcm9wID0gbW9kZWxQcm9wc1thdHRyXTtcblx0ICAgIGlmICghaW50ZXJwICYmIG1vZGVsUHJvcCkge1xuXHQgICAgICBlbFttb2RlbFByb3BdID0gdmFsdWU7XG5cdCAgICAgIC8vIHVwZGF0ZSB2LW1vZGVsIGlmIHByZXNlbnRcblx0ICAgICAgdmFyIG1vZGVsID0gZWwuX192X21vZGVsO1xuXHQgICAgICBpZiAobW9kZWwpIHtcblx0ICAgICAgICBtb2RlbC5saXN0ZW5lcigpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBkbyBub3Qgc2V0IHZhbHVlIGF0dHJpYnV0ZSBmb3IgdGV4dGFyZWFcblx0ICAgIGlmIChhdHRyID09PSAndmFsdWUnICYmIGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyB1cGRhdGUgYXR0cmlidXRlXG5cdCAgICBpZiAoZW51bWVyYXRlZEF0dHJSRS50ZXN0KGF0dHIpKSB7XG5cdCAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZScpO1xuXHQgICAgfSBlbHNlIGlmICh2YWx1ZSAhPSBudWxsICYmIHZhbHVlICE9PSBmYWxzZSkge1xuXHQgICAgICBpZiAoYXR0ciA9PT0gJ2NsYXNzJykge1xuXHQgICAgICAgIC8vIGhhbmRsZSBlZGdlIGNhc2UgIzE5NjA6XG5cdCAgICAgICAgLy8gY2xhc3MgaW50ZXJwb2xhdGlvbiBzaG91bGQgbm90IG92ZXJ3cml0ZSBWdWUgdHJhbnNpdGlvbiBjbGFzc1xuXHQgICAgICAgIGlmIChlbC5fX3ZfdHJhbnMpIHtcblx0ICAgICAgICAgIHZhbHVlICs9ICcgJyArIGVsLl9fdl90cmFucy5pZCArICctdHJhbnNpdGlvbic7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIHNldENsYXNzKGVsLCB2YWx1ZSk7XG5cdCAgICAgIH0gZWxzZSBpZiAoeGxpbmtSRS50ZXN0KGF0dHIpKSB7XG5cdCAgICAgICAgZWwuc2V0QXR0cmlidXRlTlMoeGxpbmtOUywgYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBlbCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IEVMLFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgICBpZiAoIXRoaXMuYXJnKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIHZhciBpZCA9IHRoaXMuaWQgPSBjYW1lbGl6ZSh0aGlzLmFyZyk7XG5cdCAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzO1xuXHQgICAgaWYgKGhhc093bihyZWZzLCBpZCkpIHtcblx0ICAgICAgcmVmc1tpZF0gPSB0aGlzLmVsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZGVmaW5lUmVhY3RpdmUocmVmcywgaWQsIHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcblx0ICAgIGlmIChyZWZzW3RoaXMuaWRdID09PSB0aGlzLmVsKSB7XG5cdCAgICAgIHJlZnNbdGhpcy5pZF0gPSBudWxsO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciByZWYgPSB7XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1yZWY6JyArIHRoaXMuYXJnICsgJyBtdXN0IGJlIHVzZWQgb24gYSBjaGlsZCAnICsgJ2NvbXBvbmVudC4gRm91bmQgb24gPCcgKyB0aGlzLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+LicsIHRoaXMudm0pO1xuXHQgIH1cblx0fTtcblx0XG5cdHZhciBjbG9hayA9IHtcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdmFyIGVsID0gdGhpcy5lbDtcblx0ICAgIHRoaXMudm0uJG9uY2UoJ3ByZS1ob29rOmNvbXBpbGVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtY2xvYWsnKTtcblx0ICAgIH0pO1xuXHQgIH1cblx0fTtcblx0XG5cdC8vIG11c3QgZXhwb3J0IHBsYWluIG9iamVjdFxuXHR2YXIgZGlyZWN0aXZlcyA9IHtcblx0ICB0ZXh0OiB0ZXh0JDEsXG5cdCAgaHRtbDogaHRtbCxcblx0ICAnZm9yJzogdkZvcixcblx0ICAnaWYnOiB2SWYsXG5cdCAgc2hvdzogc2hvdyxcblx0ICBtb2RlbDogbW9kZWwsXG5cdCAgb246IG9uJDEsXG5cdCAgYmluZDogYmluZCQxLFxuXHQgIGVsOiBlbCxcblx0ICByZWY6IHJlZixcblx0ICBjbG9hazogY2xvYWtcblx0fTtcblx0XG5cdHZhciB2Q2xhc3MgPSB7XG5cdFxuXHQgIGRlZXA6IHRydWUsXG5cdFxuXHQgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG5cdCAgICBpZiAoIXZhbHVlKSB7XG5cdCAgICAgIHRoaXMuY2xlYW51cCgpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHRoaXMuc2V0Q2xhc3ModmFsdWUudHJpbSgpLnNwbGl0KC9cXHMrLykpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5zZXRDbGFzcyhub3JtYWxpemUkMSh2YWx1ZSkpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHNldENsYXNzOiBmdW5jdGlvbiBzZXRDbGFzcyh2YWx1ZSkge1xuXHQgICAgdGhpcy5jbGVhbnVwKHZhbHVlKTtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciB2YWwgPSB2YWx1ZVtpXTtcblx0ICAgICAgaWYgKHZhbCkge1xuXHQgICAgICAgIGFwcGx5KHRoaXMuZWwsIHZhbCwgYWRkQ2xhc3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB0aGlzLnByZXZLZXlzID0gdmFsdWU7XG5cdCAgfSxcblx0XG5cdCAgY2xlYW51cDogZnVuY3Rpb24gY2xlYW51cCh2YWx1ZSkge1xuXHQgICAgdmFyIHByZXZLZXlzID0gdGhpcy5wcmV2S2V5cztcblx0ICAgIGlmICghcHJldktleXMpIHJldHVybjtcblx0ICAgIHZhciBpID0gcHJldktleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2YXIga2V5ID0gcHJldktleXNbaV07XG5cdCAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUuaW5kZXhPZihrZXkpIDwgMCkge1xuXHQgICAgICAgIGFwcGx5KHRoaXMuZWwsIGtleSwgcmVtb3ZlQ2xhc3MpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIE5vcm1hbGl6ZSBvYmplY3RzIGFuZCBhcnJheXMgKHBvdGVudGlhbGx5IGNvbnRhaW5pbmcgb2JqZWN0cylcblx0ICogaW50byBhcnJheSBvZiBzdHJpbmdzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdHxBcnJheTxTdHJpbmd8T2JqZWN0Pn0gdmFsdWVcblx0ICogQHJldHVybiB7QXJyYXk8U3RyaW5nPn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBub3JtYWxpemUkMSh2YWx1ZSkge1xuXHQgIHZhciByZXMgPSBbXTtcblx0ICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHZhciBfa2V5ID0gdmFsdWVbaV07XG5cdCAgICAgIGlmIChfa2V5KSB7XG5cdCAgICAgICAgaWYgKHR5cGVvZiBfa2V5ID09PSAnc3RyaW5nJykge1xuXHQgICAgICAgICAgcmVzLnB1c2goX2tleSk7XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIGZvciAodmFyIGsgaW4gX2tleSkge1xuXHQgICAgICAgICAgICBpZiAoX2tleVtrXSkgcmVzLnB1c2goayk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcblx0ICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuXHQgICAgICBpZiAodmFsdWVba2V5XSkgcmVzLnB1c2goa2V5KTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHJlcztcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFkZCBvciByZW1vdmUgYSBjbGFzcy9jbGFzc2VzIG9uIGFuIGVsZW1lbnRcblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBjbGFzcyBuYW1lLiBUaGlzIG1heSBvciBtYXkgbm90XG5cdCAqICAgICAgICAgICAgICAgICAgICAgY29udGFpbiBhIHNwYWNlIGNoYXJhY3RlciwgaW4gc3VjaCBhXG5cdCAqICAgICAgICAgICAgICAgICAgICAgY2FzZSB3ZSdsbCBkZWFsIHdpdGggbXVsdGlwbGUgY2xhc3Ncblx0ICogICAgICAgICAgICAgICAgICAgICBuYW1lcyBhdCBvbmNlLlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGFwcGx5KGVsLCBrZXksIGZuKSB7XG5cdCAga2V5ID0ga2V5LnRyaW0oKTtcblx0ICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcblx0ICAgIGZuKGVsLCBrZXkpO1xuXHQgICAgcmV0dXJuO1xuXHQgIH1cblx0ICAvLyBUaGUga2V5IGNvbnRhaW5zIG9uZSBvciBtb3JlIHNwYWNlIGNoYXJhY3RlcnMuXG5cdCAgLy8gU2luY2UgYSBjbGFzcyBuYW1lIGRvZXNuJ3QgYWNjZXB0IHN1Y2ggY2hhcmFjdGVycywgd2Vcblx0ICAvLyB0cmVhdCBpdCBhcyBtdWx0aXBsZSBjbGFzc2VzLlxuXHQgIHZhciBrZXlzID0ga2V5LnNwbGl0KC9cXHMrLyk7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgZm4oZWwsIGtleXNbaV0pO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGNvbXBvbmVudCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IENPTVBPTkVOVCxcblx0XG5cdCAgcGFyYW1zOiBbJ2tlZXAtYWxpdmUnLCAndHJhbnNpdGlvbi1tb2RlJywgJ2lubGluZS10ZW1wbGF0ZSddLFxuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cC4gVHdvIHBvc3NpYmxlIHVzYWdlczpcblx0ICAgKlxuXHQgICAqIC0gc3RhdGljOlxuXHQgICAqICAgPGNvbXA+IG9yIDxkaXYgdi1jb21wb25lbnQ9XCJjb21wXCI+XG5cdCAgICpcblx0ICAgKiAtIGR5bmFtaWM6XG5cdCAgICogICA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cblx0ICAgKi9cblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIGlmICghdGhpcy5lbC5fX3Z1ZV9fKSB7XG5cdCAgICAgIC8vIGtlZXAtYWxpdmUgY2FjaGVcblx0ICAgICAgdGhpcy5rZWVwQWxpdmUgPSB0aGlzLnBhcmFtcy5rZWVwQWxpdmU7XG5cdCAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuXHQgICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcblx0ICAgICAgfVxuXHQgICAgICAvLyBjaGVjayBpbmxpbmUtdGVtcGxhdGVcblx0ICAgICAgaWYgKHRoaXMucGFyYW1zLmlubGluZVRlbXBsYXRlKSB7XG5cdCAgICAgICAgLy8gZXh0cmFjdCBpbmxpbmUgdGVtcGxhdGUgYXMgYSBEb2N1bWVudEZyYWdtZW50XG5cdCAgICAgICAgdGhpcy5pbmxpbmVUZW1wbGF0ZSA9IGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIGNvbXBvbmVudCByZXNvbHV0aW9uIHJlbGF0ZWQgc3RhdGVcblx0ICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSB0aGlzLkNvbXBvbmVudCA9IG51bGw7XG5cdCAgICAgIC8vIHRyYW5zaXRpb24gcmVsYXRlZCBzdGF0ZVxuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscyA9IDA7XG5cdCAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG5cdCAgICAgIC8vIGNyZWF0ZSBhIHJlZiBhbmNob3Jcblx0ICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtY29tcG9uZW50Jyk7XG5cdCAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuXHQgICAgICAvLyByZW1vdmUgaXMgYXR0cmlidXRlLlxuXHQgICAgICAvLyB0aGlzIGlzIHJlbW92ZWQgZHVyaW5nIGNvbXBpbGF0aW9uLCBidXQgYmVjYXVzZSBjb21waWxhdGlvbiBpc1xuXHQgICAgICAvLyBjYWNoZWQsIHdoZW4gdGhlIGNvbXBvbmVudCBpcyB1c2VkIGVsc2V3aGVyZSB0aGlzIGF0dHJpYnV0ZVxuXHQgICAgICAvLyB3aWxsIHJlbWFpbiBhdCBsaW5rIHRpbWUuXG5cdCAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdpcycpO1xuXHQgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnOmlzJyk7XG5cdCAgICAgIC8vIHJlbW92ZSByZWYsIHNhbWUgYXMgYWJvdmVcblx0ICAgICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcblx0ICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgndi1yZWY6JyArIGh5cGhlbmF0ZSh0aGlzLmRlc2NyaXB0b3IucmVmKSk7XG5cdCAgICAgIH1cblx0ICAgICAgLy8gaWYgc3RhdGljLCBidWlsZCByaWdodCBub3cuXG5cdCAgICAgIGlmICh0aGlzLmxpdGVyYWwpIHtcblx0ICAgICAgICB0aGlzLnNldENvbXBvbmVudCh0aGlzLmV4cHJlc3Npb24pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2Nhbm5vdCBtb3VudCBjb21wb25lbnQgXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiICcgKyAnb24gYWxyZWFkeSBtb3VudGVkIGVsZW1lbnQ6ICcgKyB0aGlzLmVsKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBQdWJsaWMgdXBkYXRlLCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIgaW4gdGhlIGR5bmFtaWNcblx0ICAgKiBsaXRlcmFsIHNjZW5hcmlvLCBlLmcuIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuXHQgICAqL1xuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuXHQgICAgaWYgKCF0aGlzLmxpdGVyYWwpIHtcblx0ICAgICAgdGhpcy5zZXRDb21wb25lbnQodmFsdWUpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFN3aXRjaCBkeW5hbWljIGNvbXBvbmVudHMuIE1heSByZXNvbHZlIHRoZSBjb21wb25lbnRcblx0ICAgKiBhc3luY2hyb25vdXNseSwgYW5kIHBlcmZvcm0gdHJhbnNpdGlvbiBiYXNlZCBvblxuXHQgICAqIHNwZWNpZmllZCB0cmFuc2l0aW9uIG1vZGUuIEFjY2VwdHMgYSBmZXcgYWRkaXRpb25hbFxuXHQgICAqIGFyZ3VtZW50cyBzcGVjaWZpY2FsbHkgZm9yIHZ1ZS1yb3V0ZXIuXG5cdCAgICpcblx0ICAgKiBUaGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdoZW4gdGhlIGZ1bGwgdHJhbnNpdGlvbiBpc1xuXHQgICAqIGZpbmlzaGVkLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBzZXRDb21wb25lbnQ6IGZ1bmN0aW9uIHNldENvbXBvbmVudCh2YWx1ZSwgY2IpIHtcblx0ICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcblx0ICAgIGlmICghdmFsdWUpIHtcblx0ICAgICAgLy8ganVzdCByZW1vdmUgY3VycmVudFxuXHQgICAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG5cdCAgICAgIHRoaXMucmVtb3ZlKHRoaXMuY2hpbGRWTSwgY2IpO1xuXHQgICAgICB0aGlzLmNoaWxkVk0gPSBudWxsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICB0aGlzLnJlc29sdmVDb21wb25lbnQodmFsdWUsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLm1vdW50Q29tcG9uZW50KGNiKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVzb2x2ZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG5cdCAgICogdGhlIGNoaWxkIHZtLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICAgKi9cblx0XG5cdCAgcmVzb2x2ZUNvbXBvbmVudDogZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgY2IpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuXHQgICAgICBzZWxmLkNvbXBvbmVudE5hbWUgPSBDb21wb25lbnQub3B0aW9ucy5uYW1lIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBudWxsKTtcblx0ICAgICAgc2VsZi5Db21wb25lbnQgPSBDb21wb25lbnQ7XG5cdCAgICAgIGNiKCk7XG5cdCAgICB9KTtcblx0ICAgIHRoaXMudm0uX3Jlc29sdmVDb21wb25lbnQodmFsdWUsIHRoaXMucGVuZGluZ0NvbXBvbmVudENiKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2UgdXNpbmcgdGhlIGN1cnJlbnQgY29uc3RydWN0b3IgYW5kXG5cdCAgICogcmVwbGFjZSB0aGUgZXhpc3RpbmcgaW5zdGFuY2UuIFRoaXMgbWV0aG9kIGRvZXNuJ3QgY2FyZVxuXHQgICAqIHdoZXRoZXIgdGhlIG5ldyBjb21wb25lbnQgYW5kIHRoZSBvbGQgb25lIGFyZSBhY3R1YWxseVxuXHQgICAqIHRoZSBzYW1lLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBtb3VudENvbXBvbmVudDogZnVuY3Rpb24gbW91bnRDb21wb25lbnQoY2IpIHtcblx0ICAgIC8vIGFjdHVhbCBtb3VudFxuXHQgICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIGFjdGl2YXRlSG9va3MgPSB0aGlzLkNvbXBvbmVudC5vcHRpb25zLmFjdGl2YXRlO1xuXHQgICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG5cdCAgICB2YXIgbmV3Q29tcG9uZW50ID0gdGhpcy5idWlsZCgpO1xuXHQgICAgaWYgKGFjdGl2YXRlSG9va3MgJiYgIWNhY2hlZCkge1xuXHQgICAgICB0aGlzLndhaXRpbmdGb3IgPSBuZXdDb21wb25lbnQ7XG5cdCAgICAgIGNhbGxBY3RpdmF0ZUhvb2tzKGFjdGl2YXRlSG9va3MsIG5ld0NvbXBvbmVudCwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIGlmIChzZWxmLndhaXRpbmdGb3IgIT09IG5ld0NvbXBvbmVudCkge1xuXHQgICAgICAgICAgcmV0dXJuO1xuXHQgICAgICAgIH1cblx0ICAgICAgICBzZWxmLndhaXRpbmdGb3IgPSBudWxsO1xuXHQgICAgICAgIHNlbGYudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcblx0ICAgICAgfSk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyB1cGRhdGUgcmVmIGZvciBrZXB0LWFsaXZlIGNvbXBvbmVudFxuXHQgICAgICBpZiAoY2FjaGVkKSB7XG5cdCAgICAgICAgbmV3Q29tcG9uZW50Ll91cGRhdGVSZWYoKTtcblx0ICAgICAgfVxuXHQgICAgICB0aGlzLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogV2hlbiB0aGUgY29tcG9uZW50IGNoYW5nZXMgb3IgdW5iaW5kcyBiZWZvcmUgYW4gYXN5bmNcblx0ICAgKiBjb25zdHJ1Y3RvciBpcyByZXNvbHZlZCwgd2UgbmVlZCB0byBpbnZhbGlkYXRlIGl0c1xuXHQgICAqIHBlbmRpbmcgY2FsbGJhY2suXG5cdCAgICovXG5cdFxuXHQgIGludmFsaWRhdGVQZW5kaW5nOiBmdW5jdGlvbiBpbnZhbGlkYXRlUGVuZGluZygpIHtcblx0ICAgIGlmICh0aGlzLnBlbmRpbmdDb21wb25lbnRDYikge1xuXHQgICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYi5jYW5jZWwoKTtcblx0ICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBudWxsO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc3RhbnRpYXRlL2luc2VydCBhIG5ldyBjaGlsZCB2bS5cblx0ICAgKiBJZiBrZWVwIGFsaXZlIGFuZCBoYXMgY2FjaGVkIGluc3RhbmNlLCBpbnNlcnQgdGhhdFxuXHQgICAqIGluc3RhbmNlOyBvdGhlcndpc2UgYnVpbGQgYSBuZXcgb25lIGFuZCBjYWNoZSBpdC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0cmFPcHRpb25zXVxuXHQgICAqIEByZXR1cm4ge1Z1ZX0gLSB0aGUgY3JlYXRlZCBpbnN0YW5jZVxuXHQgICAqL1xuXHRcblx0ICBidWlsZDogZnVuY3Rpb24gYnVpbGQoZXh0cmFPcHRpb25zKSB7XG5cdCAgICB2YXIgY2FjaGVkID0gdGhpcy5nZXRDYWNoZWQoKTtcblx0ICAgIGlmIChjYWNoZWQpIHtcblx0ICAgICAgcmV0dXJuIGNhY2hlZDtcblx0ICAgIH1cblx0ICAgIGlmICh0aGlzLkNvbXBvbmVudCkge1xuXHQgICAgICAvLyBkZWZhdWx0IG9wdGlvbnNcblx0ICAgICAgdmFyIG9wdGlvbnMgPSB7XG5cdCAgICAgICAgbmFtZTogdGhpcy5Db21wb25lbnROYW1lLFxuXHQgICAgICAgIGVsOiBjbG9uZU5vZGUodGhpcy5lbCksXG5cdCAgICAgICAgdGVtcGxhdGU6IHRoaXMuaW5saW5lVGVtcGxhdGUsXG5cdCAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGFkZCB0aGUgY2hpbGQgd2l0aCBjb3JyZWN0IHBhcmVudFxuXHQgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGl0cyBwYXJlbnRcblx0ICAgICAgICAvLyBzaG91bGQgYmUgdGhlIHRyYW5zY2x1c2lvbiBob3N0LlxuXHQgICAgICAgIHBhcmVudDogdGhpcy5faG9zdCB8fCB0aGlzLnZtLFxuXHQgICAgICAgIC8vIGlmIG5vIGlubGluZS10ZW1wbGF0ZSwgdGhlbiB0aGUgY29tcGlsZWRcblx0ICAgICAgICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCBmb3IgYmV0dGVyIHBlcmZvcm1hbmNlLlxuXHQgICAgICAgIF9saW5rZXJDYWNoYWJsZTogIXRoaXMuaW5saW5lVGVtcGxhdGUsXG5cdCAgICAgICAgX3JlZjogdGhpcy5kZXNjcmlwdG9yLnJlZixcblx0ICAgICAgICBfYXNDb21wb25lbnQ6IHRydWUsXG5cdCAgICAgICAgX2lzUm91dGVyVmlldzogdGhpcy5faXNSb3V0ZXJWaWV3LFxuXHQgICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcblx0ICAgICAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2Vcblx0ICAgICAgICAvLyBhbmQgaXRzIGhvc3QuXG5cdCAgICAgICAgX2NvbnRleHQ6IHRoaXMudm0sXG5cdCAgICAgICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcblx0ICAgICAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuXHQgICAgICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG5cdCAgICAgICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuXHQgICAgICAgIF9zY29wZTogdGhpcy5fc2NvcGUsXG5cdCAgICAgICAgLy8gcGFzcyBpbiB0aGUgb3duZXIgZnJhZ21lbnQgb2YgdGhpcyBjb21wb25lbnQuXG5cdCAgICAgICAgLy8gdGhpcyBpcyBuZWNlc3Nhcnkgc28gdGhhdCB0aGUgZnJhZ21lbnQgY2FuIGtlZXBcblx0ICAgICAgICAvLyB0cmFjayBvZiBpdHMgY29udGFpbmVkIGNvbXBvbmVudHMgaW4gb3JkZXIgdG9cblx0ICAgICAgICAvLyBjYWxsIGF0dGFjaC9kZXRhY2ggaG9va3MgZm9yIHRoZW0uXG5cdCAgICAgICAgX2ZyYWc6IHRoaXMuX2ZyYWdcblx0ICAgICAgfTtcblx0ICAgICAgLy8gZXh0cmEgb3B0aW9uc1xuXHQgICAgICAvLyBpbiAxLjAuMCB0aGlzIGlzIHVzZWQgYnkgdnVlLXJvdXRlciBvbmx5XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoZXh0cmFPcHRpb25zKSB7XG5cdCAgICAgICAgZXh0ZW5kKG9wdGlvbnMsIGV4dHJhT3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuQ29tcG9uZW50KG9wdGlvbnMpO1xuXHQgICAgICBpZiAodGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgICB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF0gPSBjaGlsZDtcblx0ICAgICAgfVxuXHQgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbC5oYXNBdHRyaWJ1dGUoJ3RyYW5zaXRpb24nKSAmJiBjaGlsZC5faXNGcmFnbWVudCkge1xuXHQgICAgICAgIHdhcm4oJ1RyYW5zaXRpb25zIHdpbGwgbm90IHdvcmsgb24gYSBmcmFnbWVudCBpbnN0YW5jZS4gJyArICdUZW1wbGF0ZTogJyArIGNoaWxkLiRvcHRpb25zLnRlbXBsYXRlLCBjaGlsZCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIGNoaWxkO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyeSB0byBnZXQgYSBjYWNoZWQgaW5zdGFuY2Ugb2YgdGhlIGN1cnJlbnQgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cblx0ICAgKi9cblx0XG5cdCAgZ2V0Q2FjaGVkOiBmdW5jdGlvbiBnZXRDYWNoZWQoKSB7XG5cdCAgICByZXR1cm4gdGhpcy5rZWVwQWxpdmUgJiYgdGhpcy5jYWNoZVt0aGlzLkNvbXBvbmVudC5jaWRdO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIFRlYXJkb3duIHRoZSBjdXJyZW50IGNoaWxkLCBidXQgZGVmZXJzIGNsZWFudXAgc29cblx0ICAgKiB0aGF0IHdlIGNhbiBzZXBhcmF0ZSB0aGUgZGVzdHJveSBhbmQgcmVtb3ZhbCBzdGVwcy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJcblx0ICAgKi9cblx0XG5cdCAgdW5idWlsZDogZnVuY3Rpb24gdW5idWlsZChkZWZlcikge1xuXHQgICAgaWYgKHRoaXMud2FpdGluZ0Zvcikge1xuXHQgICAgICBpZiAoIXRoaXMua2VlcEFsaXZlKSB7XG5cdCAgICAgICAgdGhpcy53YWl0aW5nRm9yLiRkZXN0cm95KCk7XG5cdCAgICAgIH1cblx0ICAgICAgdGhpcy53YWl0aW5nRm9yID0gbnVsbDtcblx0ICAgIH1cblx0ICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRWTTtcblx0ICAgIGlmICghY2hpbGQgfHwgdGhpcy5rZWVwQWxpdmUpIHtcblx0ICAgICAgaWYgKGNoaWxkKSB7XG5cdCAgICAgICAgLy8gcmVtb3ZlIHJlZlxuXHQgICAgICAgIGNoaWxkLl9pbmFjdGl2ZSA9IHRydWU7XG5cdCAgICAgICAgY2hpbGQuX3VwZGF0ZVJlZih0cnVlKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyB0aGUgc29sZSBwdXJwb3NlIG9mIGBkZWZlckNsZWFudXBgIGlzIHNvIHRoYXQgd2UgY2FuXG5cdCAgICAvLyBcImRlYWN0aXZhdGVcIiB0aGUgdm0gcmlnaHQgbm93IGFuZCBwZXJmb3JtIERPTSByZW1vdmFsXG5cdCAgICAvLyBsYXRlci5cblx0ICAgIGNoaWxkLiRkZXN0cm95KGZhbHNlLCBkZWZlcik7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogUmVtb3ZlIGN1cnJlbnQgZGVzdHJveWVkIGNoaWxkIGFuZCBtYW51YWxseSBkb1xuXHQgICAqIHRoZSBjbGVhbnVwIGFmdGVyIHJlbW92YWwuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqL1xuXHRcblx0ICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShjaGlsZCwgY2IpIHtcblx0ICAgIHZhciBrZWVwQWxpdmUgPSB0aGlzLmtlZXBBbGl2ZTtcblx0ICAgIGlmIChjaGlsZCkge1xuXHQgICAgICAvLyB3ZSBtYXkgaGF2ZSBhIGNvbXBvbmVudCBzd2l0Y2ggd2hlbiBhIHByZXZpb3VzXG5cdCAgICAgIC8vIGNvbXBvbmVudCBpcyBzdGlsbCBiZWluZyB0cmFuc2l0aW9uZWQgb3V0LlxuXHQgICAgICAvLyB3ZSB3YW50IHRvIHRyaWdnZXIgb25seSBvbmUgbGFzdGVzdCBpbnNlcnRpb24gY2Jcblx0ICAgICAgLy8gd2hlbiB0aGUgZXhpc3RpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcy4gKCMxMTE5KVxuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscysrO1xuXHQgICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBjYjtcblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICBjaGlsZC4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFscy0tO1xuXHQgICAgICAgIGlmICgha2VlcEFsaXZlKSBjaGlsZC5fY2xlYW51cCgpO1xuXHQgICAgICAgIGlmICghc2VsZi5wZW5kaW5nUmVtb3ZhbHMgJiYgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKSB7XG5cdCAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IoKTtcblx0ICAgICAgICAgIHNlbGYucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG5cdCAgICAgICAgfVxuXHQgICAgICB9KTtcblx0ICAgIH0gZWxzZSBpZiAoY2IpIHtcblx0ICAgICAgY2IoKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBBY3R1YWxseSBzd2FwIHRoZSBjb21wb25lbnRzLCBkZXBlbmRpbmcgb24gdGhlXG5cdCAgICogdHJhbnNpdGlvbiBtb2RlLiBEZWZhdWx0cyB0byBzaW11bHRhbmVvdXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICB0cmFuc2l0aW9uOiBmdW5jdGlvbiB0cmFuc2l0aW9uKHRhcmdldCwgY2IpIHtcblx0ICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgIHZhciBjdXJyZW50ID0gdGhpcy5jaGlsZFZNO1xuXHQgICAgLy8gZm9yIGRldnRvb2wgaW5zcGVjdGlvblxuXHQgICAgaWYgKGN1cnJlbnQpIGN1cnJlbnQuX2luYWN0aXZlID0gdHJ1ZTtcblx0ICAgIHRhcmdldC5faW5hY3RpdmUgPSBmYWxzZTtcblx0ICAgIHRoaXMuY2hpbGRWTSA9IHRhcmdldDtcblx0ICAgIHN3aXRjaCAoc2VsZi5wYXJhbXMudHJhbnNpdGlvbk1vZGUpIHtcblx0ICAgICAgY2FzZSAnaW4tb3V0Jzpcblx0ICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgY2IpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICAgIGJyZWFrO1xuXHQgICAgICBjYXNlICdvdXQtaW4nOlxuXHQgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG5cdCAgICAgICAgfSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIGRlZmF1bHQ6XG5cdCAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCk7XG5cdCAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiBVbmJpbmQuXG5cdCAgICovXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuXHQgICAgLy8gRG8gbm90IGRlZmVyIGNsZWFudXAgd2hlbiB1bmJpbmRpbmdcblx0ICAgIHRoaXMudW5idWlsZCgpO1xuXHQgICAgLy8gZGVzdHJveSBhbGwga2VlcC1hbGl2ZSBjYWNoZWQgaW5zdGFuY2VzXG5cdCAgICBpZiAodGhpcy5jYWNoZSkge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZSkge1xuXHQgICAgICAgIHRoaXMuY2FjaGVba2V5XS4kZGVzdHJveSgpO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuY2FjaGUgPSBudWxsO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDYWxsIGFjdGl2YXRlIGhvb2tzIGluIG9yZGVyIChhc3luY2hyb25vdXMpXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGhvb2tzXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNhbGxBY3RpdmF0ZUhvb2tzKGhvb2tzLCB2bSwgY2IpIHtcblx0ICB2YXIgdG90YWwgPSBob29rcy5sZW5ndGg7XG5cdCAgdmFyIGNhbGxlZCA9IDA7XG5cdCAgaG9va3NbMF0uY2FsbCh2bSwgbmV4dCk7XG5cdCAgZnVuY3Rpb24gbmV4dCgpIHtcblx0ICAgIGlmICgrK2NhbGxlZCA+PSB0b3RhbCkge1xuXHQgICAgICBjYigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgaG9va3NbY2FsbGVkXS5jYWxsKHZtLCBuZXh0KTtcblx0ICAgIH1cblx0ICB9XG5cdH1cblx0XG5cdHZhciBwcm9wQmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuXHR2YXIgZW1wdHkgPSB7fTtcblx0XG5cdC8vIHJlZ2V4ZXNcblx0dmFyIGlkZW50UkUkMSA9IC9eWyRfYS16QS1aXStbXFx3JF0qJC87XG5cdHZhciBzZXR0YWJsZVBhdGhSRSA9IC9eW0EtWmEtel8kXVtcXHckXSooXFwuW0EtWmEtel8kXVtcXHckXSp8XFxbW15cXFtcXF1dK1xcXSkqJC87XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBwcm9wcyBvbiBhIHJvb3QgZWxlbWVudCBhbmQgcmV0dXJuXG5cdCAqIGEgcHJvcHMgbGluayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHByb3BPcHRpb25zXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlUHJvcHMoZWwsIHByb3BPcHRpb25zLCB2bSkge1xuXHQgIHZhciBwcm9wcyA9IFtdO1xuXHQgIHZhciBuYW1lcyA9IE9iamVjdC5rZXlzKHByb3BPcHRpb25zKTtcblx0ICB2YXIgaSA9IG5hbWVzLmxlbmd0aDtcblx0ICB2YXIgb3B0aW9ucywgbmFtZSwgYXR0ciwgdmFsdWUsIHBhdGgsIHBhcnNlZCwgcHJvcDtcblx0ICB3aGlsZSAoaS0tKSB7XG5cdCAgICBuYW1lID0gbmFtZXNbaV07XG5cdCAgICBvcHRpb25zID0gcHJvcE9wdGlvbnNbbmFtZV0gfHwgZW1wdHk7XG5cdFxuXHQgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbmFtZSA9PT0gJyRkYXRhJykge1xuXHQgICAgICB3YXJuKCdEbyBub3QgdXNlICRkYXRhIGFzIHByb3AuJywgdm0pO1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICAvLyBwcm9wcyBjb3VsZCBjb250YWluIGRhc2hlcywgd2hpY2ggd2lsbCBiZVxuXHQgICAgLy8gaW50ZXJwcmV0ZWQgYXMgbWludXMgY2FsY3VsYXRpb25zIGJ5IHRoZSBwYXJzZXJcblx0ICAgIC8vIHNvIHdlIG5lZWQgdG8gY2FtZWxpemUgdGhlIHBhdGggaGVyZVxuXHQgICAgcGF0aCA9IGNhbWVsaXplKG5hbWUpO1xuXHQgICAgaWYgKCFpZGVudFJFJDEudGVzdChwYXRoKSkge1xuXHQgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcCBrZXk6IFwiJyArIG5hbWUgKyAnXCIuIFByb3Aga2V5cyAnICsgJ211c3QgYmUgdmFsaWQgaWRlbnRpZmllcnMuJywgdm0pO1xuXHQgICAgICBjb250aW51ZTtcblx0ICAgIH1cblx0XG5cdCAgICBwcm9wID0ge1xuXHQgICAgICBuYW1lOiBuYW1lLFxuXHQgICAgICBwYXRoOiBwYXRoLFxuXHQgICAgICBvcHRpb25zOiBvcHRpb25zLFxuXHQgICAgICBtb2RlOiBwcm9wQmluZGluZ01vZGVzLk9ORV9XQVksXG5cdCAgICAgIHJhdzogbnVsbFxuXHQgICAgfTtcblx0XG5cdCAgICBhdHRyID0gaHlwaGVuYXRlKG5hbWUpO1xuXHQgICAgLy8gZmlyc3QgY2hlY2sgZHluYW1pYyB2ZXJzaW9uXG5cdCAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIpKSA9PT0gbnVsbCkge1xuXHQgICAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLnN5bmMnKSkgIT09IG51bGwpIHtcblx0ICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVk7XG5cdCAgICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLm9uY2UnKSkgIT09IG51bGwpIHtcblx0ICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcblx0ICAgICAgLy8gaGFzIGR5bmFtaWMgYmluZGluZyFcblx0ICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcblx0ICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuXHQgICAgICB2YWx1ZSA9IHBhcnNlZC5leHByZXNzaW9uO1xuXHQgICAgICBwcm9wLmZpbHRlcnMgPSBwYXJzZWQuZmlsdGVycztcblx0ICAgICAgLy8gY2hlY2sgYmluZGluZyB0eXBlXG5cdCAgICAgIGlmIChpc0xpdGVyYWwodmFsdWUpICYmICFwYXJzZWQuZmlsdGVycykge1xuXHQgICAgICAgIC8vIGZvciBleHByZXNzaW9ucyBjb250YWluaW5nIGxpdGVyYWwgbnVtYmVycyBhbmRcblx0ICAgICAgICAvLyBib29sZWFucywgdGhlcmUncyBubyBuZWVkIHRvIHNldHVwIGEgcHJvcCBiaW5kaW5nLFxuXHQgICAgICAgIC8vIHNvIHdlIGNhbiBvcHRpbWl6ZSB0aGVtIGFzIGEgb25lLXRpbWUgc2V0LlxuXHQgICAgICAgIHByb3Aub3B0aW1pemVkTGl0ZXJhbCA9IHRydWU7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgcHJvcC5keW5hbWljID0gdHJ1ZTtcblx0ICAgICAgICAvLyBjaGVjayBub24tc2V0dGFibGUgcGF0aCBmb3IgdHdvLXdheSBiaW5kaW5nc1xuXHQgICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZICYmICFzZXR0YWJsZVBhdGhSRS50ZXN0KHZhbHVlKSkge1xuXHQgICAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZO1xuXHQgICAgICAgICAgd2FybignQ2Fubm90IGJpbmQgdHdvLXdheSBwcm9wIHdpdGggbm9uLXNldHRhYmxlICcgKyAncGFyZW50IHBhdGg6ICcgKyB2YWx1ZSwgdm0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgICBwcm9wLnBhcmVudFBhdGggPSB2YWx1ZTtcblx0XG5cdCAgICAgIC8vIHdhcm4gcmVxdWlyZWQgdHdvLXdheVxuXHQgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvcHRpb25zLnR3b1dheSAmJiBwcm9wLm1vZGUgIT09IHByb3BCaW5kaW5nTW9kZXMuVFdPX1dBWSkge1xuXHQgICAgICAgIHdhcm4oJ1Byb3AgXCInICsgbmFtZSArICdcIiBleHBlY3RzIGEgdHdvLXdheSBiaW5kaW5nIHR5cGUuJywgdm0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEF0dHIoZWwsIGF0dHIpKSAhPT0gbnVsbCkge1xuXHQgICAgICAvLyBoYXMgbGl0ZXJhbCBiaW5kaW5nIVxuXHQgICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuXHQgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgIC8vIGNoZWNrIHBvc3NpYmxlIGNhbWVsQ2FzZSBwcm9wIHVzYWdlXG5cdCAgICAgIHZhciBsb3dlckNhc2VOYW1lID0gcGF0aC50b0xvd2VyQ2FzZSgpO1xuXHQgICAgICB2YWx1ZSA9IC9bQS1aXFwtXS8udGVzdChuYW1lKSAmJiAoZWwuZ2V0QXR0cmlidXRlKGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSk7XG5cdCAgICAgIGlmICh2YWx1ZSkge1xuXHQgICAgICAgIHdhcm4oJ1Bvc3NpYmxlIHVzYWdlIGVycm9yIGZvciBwcm9wIGAnICsgbG93ZXJDYXNlTmFtZSArICdgIC0gJyArICdkaWQgeW91IG1lYW4gYCcgKyBhdHRyICsgJ2A/IEhUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlICcgKyAna2ViYWItY2FzZSBmb3IgcHJvcHMgaW4gdGVtcGxhdGVzLicsIHZtKTtcblx0ICAgICAgfSBlbHNlIGlmIChvcHRpb25zLnJlcXVpcmVkKSB7XG5cdCAgICAgICAgLy8gd2FybiBtaXNzaW5nIHJlcXVpcmVkXG5cdCAgICAgICAgd2FybignTWlzc2luZyByZXF1aXJlZCBwcm9wOiAnICsgbmFtZSwgdm0pO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBwdXNoIHByb3Bcblx0ICAgIHByb3BzLnB1c2gocHJvcCk7XG5cdCAgfVxuXHQgIHJldHVybiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IGFwcGxpZXMgcHJvcHMgdG8gYSB2bS5cblx0ICpcblx0ICogQHBhcmFtIHtBcnJheX0gcHJvcHNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbWFrZVByb3BzTGlua0ZuKHByb3BzKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHByb3BzTGlua0ZuKHZtLCBzY29wZSkge1xuXHQgICAgLy8gc3RvcmUgcmVzb2x2ZWQgcHJvcHMgaW5mb1xuXHQgICAgdm0uX3Byb3BzID0ge307XG5cdCAgICB2YXIgaW5saW5lUHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGE7XG5cdCAgICB2YXIgaSA9IHByb3BzLmxlbmd0aDtcblx0ICAgIHZhciBwcm9wLCBwYXRoLCBvcHRpb25zLCB2YWx1ZSwgcmF3O1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBwcm9wID0gcHJvcHNbaV07XG5cdCAgICAgIHJhdyA9IHByb3AucmF3O1xuXHQgICAgICBwYXRoID0gcHJvcC5wYXRoO1xuXHQgICAgICBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuXHQgICAgICB2bS5fcHJvcHNbcGF0aF0gPSBwcm9wO1xuXHQgICAgICBpZiAoaW5saW5lUHJvcHMgJiYgaGFzT3duKGlubGluZVByb3BzLCBwYXRoKSkge1xuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCBpbmxpbmVQcm9wc1twYXRoXSk7XG5cdCAgICAgIH1pZiAocmF3ID09PSBudWxsKSB7XG5cdCAgICAgICAgLy8gaW5pdGlhbGl6ZSBhYnNlbnQgcHJvcFxuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB1bmRlZmluZWQpO1xuXHQgICAgICB9IGVsc2UgaWYgKHByb3AuZHluYW1pYykge1xuXHQgICAgICAgIC8vIGR5bmFtaWMgcHJvcFxuXHQgICAgICAgIGlmIChwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUUpIHtcblx0ICAgICAgICAgIC8vIG9uZSB0aW1lIGJpbmRpbmdcblx0ICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtLl9jb250ZXh0IHx8IHZtKS4kZ2V0KHByb3AucGFyZW50UGF0aCk7XG5cdCAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBpZiAodm0uX2NvbnRleHQpIHtcblx0ICAgICAgICAgICAgLy8gZHluYW1pYyBiaW5kaW5nXG5cdCAgICAgICAgICAgIHZtLl9iaW5kRGlyKHtcblx0ICAgICAgICAgICAgICBuYW1lOiAncHJvcCcsXG5cdCAgICAgICAgICAgICAgZGVmOiBwcm9wRGVmLFxuXHQgICAgICAgICAgICAgIHByb3A6IHByb3Bcblx0ICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgc2NvcGUpOyAvLyBlbCwgaG9zdCwgc2NvcGVcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgLy8gcm9vdCBpbnN0YW5jZVxuXHQgICAgICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2bS4kZ2V0KHByb3AucGFyZW50UGF0aCkpO1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2UgaWYgKHByb3Aub3B0aW1pemVkTGl0ZXJhbCkge1xuXHQgICAgICAgIC8vIG9wdGltaXplZCBsaXRlcmFsLCBjYXN0IGl0IGFuZCBqdXN0IHNldCBvbmNlXG5cdCAgICAgICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMocmF3KTtcblx0ICAgICAgICB2YWx1ZSA9IHN0cmlwcGVkID09PSByYXcgPyB0b0Jvb2xlYW4odG9OdW1iZXIocmF3KSkgOiBzdHJpcHBlZDtcblx0ICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIC8vIHN0cmluZyBsaXRlcmFsLCBidXQgd2UgbmVlZCB0byBjYXRlciBmb3Jcblx0ICAgICAgICAvLyBCb29sZWFuIHByb3BzIHdpdGggbm8gdmFsdWUsIG9yIHdpdGggc2FtZVxuXHQgICAgICAgIC8vIGxpdGVyYWwgdmFsdWUgKGUuZy4gZGlzYWJsZWQ9XCJkaXNhYmxlZFwiKVxuXHQgICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWxvYWRlci9pc3N1ZXMvMTgyXG5cdCAgICAgICAgdmFsdWUgPSBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gJiYgKHJhdyA9PT0gJycgfHwgcmF3ID09PSBoeXBoZW5hdGUocHJvcC5uYW1lKSkgPyB0cnVlIDogcmF3O1xuXHQgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyBhIHByb3Agd2l0aCBhIHJhd1ZhbHVlLCBhcHBseWluZyBuZWNlc3NhcnkgY29lcnNpb25zLFxuXHQgKiBkZWZhdWx0IHZhbHVlcyAmIGFzc2VydGlvbnMgYW5kIGNhbGwgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGhcblx0ICogcHJvY2Vzc2VkIHZhbHVlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHBhcmFtIHsqfSByYXdWYWx1ZVxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHJhd1ZhbHVlLCBmbikge1xuXHQgIHZhciBpc1NpbXBsZSA9IHByb3AuZHluYW1pYyAmJiBpc1NpbXBsZVBhdGgocHJvcC5wYXJlbnRQYXRoKTtcblx0ICB2YXIgdmFsdWUgPSByYXdWYWx1ZTtcblx0ICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuXHQgICAgdmFsdWUgPSBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKTtcblx0ICB9XG5cdCAgdmFsdWUgPSBjb2VyY2VQcm9wKHByb3AsIHZhbHVlLCB2bSk7XG5cdCAgdmFyIGNvZXJjZWQgPSB2YWx1ZSAhPT0gcmF3VmFsdWU7XG5cdCAgaWYgKCFhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkpIHtcblx0ICAgIHZhbHVlID0gdW5kZWZpbmVkO1xuXHQgIH1cblx0ICBpZiAoaXNTaW1wbGUgJiYgIWNvZXJjZWQpIHtcblx0ICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgZm4odmFsdWUpO1xuXHQgICAgfSk7XG5cdCAgfSBlbHNlIHtcblx0ICAgIGZuKHZhbHVlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTZXQgYSBwcm9wJ3MgaW5pdGlhbCB2YWx1ZSBvbiBhIHZtIGFuZCBpdHMgZGF0YSBvYmplY3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG5cdCAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgICAgZGVmaW5lUmVhY3RpdmUodm0sIHByb3AucGF0aCwgdmFsdWUpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHQvKipcblx0ICogVXBkYXRlIGEgcHJvcCdzIHZhbHVlIG9uIGEgdm0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdXBkYXRlUHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcblx0ICBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCB2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG5cdCAgICB2bVtwcm9wLnBhdGhdID0gdmFsdWU7XG5cdCAgfSk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBHZXQgdGhlIGRlZmF1bHQgdmFsdWUgb2YgYSBwcm9wLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtPYmplY3R9IHByb3Bcblx0ICogQHJldHVybiB7Kn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKSB7XG5cdCAgLy8gbm8gZGVmYXVsdCwgcmV0dXJuIHVuZGVmaW5lZFxuXHQgIHZhciBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuXHQgIGlmICghaGFzT3duKG9wdGlvbnMsICdkZWZhdWx0JykpIHtcblx0ICAgIC8vIGFic2VudCBib29sZWFuIHZhbHVlIGRlZmF1bHRzIHRvIGZhbHNlXG5cdCAgICByZXR1cm4gb3B0aW9ucy50eXBlID09PSBCb29sZWFuID8gZmFsc2UgOiB1bmRlZmluZWQ7XG5cdCAgfVxuXHQgIHZhciBkZWYgPSBvcHRpb25zWydkZWZhdWx0J107XG5cdCAgLy8gd2FybiBhZ2FpbnN0IG5vbi1mYWN0b3J5IGRlZmF1bHRzIGZvciBPYmplY3QgJiBBcnJheVxuXHQgIGlmIChpc09iamVjdChkZWYpKSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgZGVmYXVsdCB2YWx1ZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6ICcgKyAnUHJvcHMgd2l0aCB0eXBlIE9iamVjdC9BcnJheSBtdXN0IHVzZSBhIGZhY3RvcnkgZnVuY3Rpb24gJyArICd0byByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUuJywgdm0pO1xuXHQgIH1cblx0ICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuXHQgIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIG9wdGlvbnMudHlwZSAhPT0gRnVuY3Rpb24gPyBkZWYuY2FsbCh2bSkgOiBkZWY7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBBc3NlcnQgd2hldGhlciBhIHByb3AgaXMgdmFsaWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcblx0ICBpZiAoIXByb3Aub3B0aW9ucy5yZXF1aXJlZCAmJiAoIC8vIG5vbi1yZXF1aXJlZFxuXHQgIHByb3AucmF3ID09PSBudWxsIHx8IC8vIGFic2NlbnRcblx0ICB2YWx1ZSA9PSBudWxsKSAvLyBudWxsIG9yIHVuZGVmaW5lZFxuXHQgICkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcblx0ICB2YXIgdHlwZSA9IG9wdGlvbnMudHlwZTtcblx0ICB2YXIgdmFsaWQgPSAhdHlwZTtcblx0ICB2YXIgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuXHQgIGlmICh0eXBlKSB7XG5cdCAgICBpZiAoIWlzQXJyYXkodHlwZSkpIHtcblx0ICAgICAgdHlwZSA9IFt0eXBlXTtcblx0ICAgIH1cblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZS5sZW5ndGggJiYgIXZhbGlkOyBpKyspIHtcblx0ICAgICAgdmFyIGFzc2VydGVkVHlwZSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVbaV0pO1xuXHQgICAgICBleHBlY3RlZFR5cGVzLnB1c2goYXNzZXJ0ZWRUeXBlLmV4cGVjdGVkVHlwZSk7XG5cdCAgICAgIHZhbGlkID0gYXNzZXJ0ZWRUeXBlLnZhbGlkO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoIXZhbGlkKSB7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICB3YXJuKCdJbnZhbGlkIHByb3A6IHR5cGUgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nICsgJyBFeHBlY3RlZCAnICsgZXhwZWN0ZWRUeXBlcy5tYXAoZm9ybWF0VHlwZSkuam9pbignLCAnKSArICcsIGdvdCAnICsgZm9ybWF0VmFsdWUodmFsdWUpICsgJy4nLCB2bSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gZmFsc2U7XG5cdCAgfVxuXHQgIHZhciB2YWxpZGF0b3IgPSBvcHRpb25zLnZhbGlkYXRvcjtcblx0ICBpZiAodmFsaWRhdG9yKSB7XG5cdCAgICBpZiAoIXZhbGlkYXRvcih2YWx1ZSkpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nLCB2bSk7XG5cdCAgICAgIHJldHVybiBmYWxzZTtcblx0ICAgIH1cblx0ICB9XG5cdCAgcmV0dXJuIHRydWU7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBGb3JjZSBwYXJzaW5nIHZhbHVlIHdpdGggY29lcmNlIG9wdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHsqfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG5cdCAgdmFyIGNvZXJjZSA9IHByb3Aub3B0aW9ucy5jb2VyY2U7XG5cdCAgaWYgKCFjb2VyY2UpIHtcblx0ICAgIHJldHVybiB2YWx1ZTtcblx0ICB9XG5cdCAgaWYgKHR5cGVvZiBjb2VyY2UgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHJldHVybiBjb2VyY2UodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgY29lcmNlIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIjogZXhwZWN0ZWQgZnVuY3Rpb24sIGdvdCAnICsgdHlwZW9mIGNvZXJjZSArICcuJywgdm0pO1xuXHQgICAgcmV0dXJuIHZhbHVlO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIEFzc2VydCB0aGUgdHlwZSBvZiBhIHZhbHVlXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gdHlwZVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xuXHQgIHZhciB2YWxpZDtcblx0ICB2YXIgZXhwZWN0ZWRUeXBlO1xuXHQgIGlmICh0eXBlID09PSBTdHJpbmcpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdzdHJpbmcnO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IE51bWJlcikge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ251bWJlcic7XG5cdCAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gQm9vbGVhbikge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ2Jvb2xlYW4nO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IEZ1bmN0aW9uKSB7XG5cdCAgICBleHBlY3RlZFR5cGUgPSAnZnVuY3Rpb24nO1xuXHQgICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcblx0ICB9IGVsc2UgaWYgKHR5cGUgPT09IE9iamVjdCkge1xuXHQgICAgZXhwZWN0ZWRUeXBlID0gJ29iamVjdCc7XG5cdCAgICB2YWxpZCA9IGlzUGxhaW5PYmplY3QodmFsdWUpO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gQXJyYXkpIHtcblx0ICAgIGV4cGVjdGVkVHlwZSA9ICdhcnJheSc7XG5cdCAgICB2YWxpZCA9IGlzQXJyYXkodmFsdWUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcblx0ICB9XG5cdCAgcmV0dXJuIHtcblx0ICAgIHZhbGlkOiB2YWxpZCxcblx0ICAgIGV4cGVjdGVkVHlwZTogZXhwZWN0ZWRUeXBlXG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZvcm1hdCB0eXBlIGZvciBvdXRwdXRcblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFR5cGUodHlwZSkge1xuXHQgIHJldHVybiB0eXBlID8gdHlwZS5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHR5cGUuc2xpY2UoMSkgOiAnY3VzdG9tIHR5cGUnO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRm9ybWF0IHZhbHVlXG5cdCAqXG5cdCAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICogQHJldHVybiB7U3RyaW5nfVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbCkge1xuXHQgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKS5zbGljZSg4LCAtMSk7XG5cdH1cblx0XG5cdHZhciBiaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG5cdFxuXHR2YXIgcHJvcERlZiA9IHtcblx0XG5cdCAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcblx0ICAgIHZhciBjaGlsZCA9IHRoaXMudm07XG5cdCAgICB2YXIgcGFyZW50ID0gY2hpbGQuX2NvbnRleHQ7XG5cdCAgICAvLyBwYXNzZWQgaW4gZnJvbSBjb21waWxlciBkaXJlY3RseVxuXHQgICAgdmFyIHByb3AgPSB0aGlzLmRlc2NyaXB0b3IucHJvcDtcblx0ICAgIHZhciBjaGlsZEtleSA9IHByb3AucGF0aDtcblx0ICAgIHZhciBwYXJlbnRLZXkgPSBwcm9wLnBhcmVudFBhdGg7XG5cdCAgICB2YXIgdHdvV2F5ID0gcHJvcC5tb2RlID09PSBiaW5kaW5nTW9kZXMuVFdPX1dBWTtcblx0XG5cdCAgICB2YXIgcGFyZW50V2F0Y2hlciA9IHRoaXMucGFyZW50V2F0Y2hlciA9IG5ldyBXYXRjaGVyKHBhcmVudCwgcGFyZW50S2V5LCBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgIHVwZGF0ZVByb3AoY2hpbGQsIHByb3AsIHZhbCk7XG5cdCAgICB9LCB7XG5cdCAgICAgIHR3b1dheTogdHdvV2F5LFxuXHQgICAgICBmaWx0ZXJzOiBwcm9wLmZpbHRlcnMsXG5cdCAgICAgIC8vIGltcG9ydGFudDogcHJvcHMgbmVlZCB0byBiZSBvYnNlcnZlZCBvbiB0aGVcblx0ICAgICAgLy8gdi1mb3Igc2NvcGUgaWYgcHJlc2VudFxuXHQgICAgICBzY29wZTogdGhpcy5fc2NvcGVcblx0ICAgIH0pO1xuXHRcblx0ICAgIC8vIHNldCB0aGUgY2hpbGQgaW5pdGlhbCB2YWx1ZS5cblx0ICAgIGluaXRQcm9wKGNoaWxkLCBwcm9wLCBwYXJlbnRXYXRjaGVyLnZhbHVlKTtcblx0XG5cdCAgICAvLyBzZXR1cCB0d28td2F5IGJpbmRpbmdcblx0ICAgIGlmICh0d29XYXkpIHtcblx0ICAgICAgLy8gaW1wb3J0YW50OiBkZWZlciB0aGUgY2hpbGQgd2F0Y2hlciBjcmVhdGlvbiB1bnRpbFxuXHQgICAgICAvLyB0aGUgY3JlYXRlZCBob29rIChhZnRlciBkYXRhIG9ic2VydmF0aW9uKVxuXHQgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAgIGNoaWxkLiRvbmNlKCdwcmUtaG9vazpjcmVhdGVkJywgZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHNlbGYuY2hpbGRXYXRjaGVyID0gbmV3IFdhdGNoZXIoY2hpbGQsIGNoaWxkS2V5LCBmdW5jdGlvbiAodmFsKSB7XG5cdCAgICAgICAgICBwYXJlbnRXYXRjaGVyLnNldCh2YWwpO1xuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIC8vIGVuc3VyZSBzeW5jIHVwd2FyZCBiZWZvcmUgcGFyZW50IHN5bmMgZG93bi5cblx0ICAgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGluIGNhc2VzIGUuZy4gdGhlIGNoaWxkXG5cdCAgICAgICAgICAvLyBtdXRhdGVzIGEgcHJvcCBhcnJheSwgdGhlbiByZXBsYWNlcyBpdC4gKCMxNjgzKVxuXHQgICAgICAgICAgc3luYzogdHJ1ZVxuXHQgICAgICAgIH0pO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcblx0ICAgIHRoaXMucGFyZW50V2F0Y2hlci50ZWFyZG93bigpO1xuXHQgICAgaWYgKHRoaXMuY2hpbGRXYXRjaGVyKSB7XG5cdCAgICAgIHRoaXMuY2hpbGRXYXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgfVxuXHR9O1xuXHRcblx0dmFyIHF1ZXVlJDEgPSBbXTtcblx0dmFyIHF1ZXVlZCA9IGZhbHNlO1xuXHRcblx0LyoqXG5cdCAqIFB1c2ggYSBqb2IgaW50byB0aGUgcXVldWUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGpvYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHB1c2hKb2Ioam9iKSB7XG5cdCAgcXVldWUkMS5wdXNoKGpvYik7XG5cdCAgaWYgKCFxdWV1ZWQpIHtcblx0ICAgIHF1ZXVlZCA9IHRydWU7XG5cdCAgICBuZXh0VGljayhmbHVzaCk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogRmx1c2ggdGhlIHF1ZXVlLCBhbmQgZG8gb25lIGZvcmNlZCByZWZsb3cgYmVmb3JlXG5cdCAqIHRyaWdnZXJpbmcgdHJhbnNpdGlvbnMuXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZmx1c2goKSB7XG5cdCAgLy8gRm9yY2UgbGF5b3V0XG5cdCAgdmFyIGYgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xuXHQgIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUkMS5sZW5ndGg7IGkrKykge1xuXHQgICAgcXVldWUkMVtpXSgpO1xuXHQgIH1cblx0ICBxdWV1ZSQxID0gW107XG5cdCAgcXVldWVkID0gZmFsc2U7XG5cdCAgLy8gZHVtbXkgcmV0dXJuLCBzbyBqcyBsaW50ZXJzIGRvbid0IGNvbXBsYWluIGFib3V0XG5cdCAgLy8gdW51c2VkIHZhcmlhYmxlIGZcblx0ICByZXR1cm4gZjtcblx0fVxuXHRcblx0dmFyIFRZUEVfVFJBTlNJVElPTiA9ICd0cmFuc2l0aW9uJztcblx0dmFyIFRZUEVfQU5JTUFUSU9OID0gJ2FuaW1hdGlvbic7XG5cdHZhciB0cmFuc0R1cmF0aW9uUHJvcCA9IHRyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcblx0dmFyIGFuaW1EdXJhdGlvblByb3AgPSBhbmltYXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcblx0XG5cdC8qKlxuXHQgKiBJZiBhIGp1c3QtZW50ZXJlZCBlbGVtZW50IGlzIGFwcGxpZWQgdGhlXG5cdCAqIGxlYXZlIGNsYXNzIHdoaWxlIGl0cyBlbnRlciB0cmFuc2l0aW9uIGhhc24ndCBzdGFydGVkIHlldCxcblx0ICogYW5kIHRoZSB0cmFuc2l0aW9uZWQgcHJvcGVydHkgaGFzIHRoZSBzYW1lIHZhbHVlIGZvciBib3RoXG5cdCAqIGVudGVyL2xlYXZlLCB0aGVuIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIHdpbGwgYmUgc2tpcHBlZCBhbmRcblx0ICogdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIFRoaXMgZnVuY3Rpb24gZW5zdXJlc1xuXHQgKiBpdHMgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIGFmdGVyIGEgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZFxuXHQgKiBieSB3YWl0aW5nIGZvciBkb3VibGUgcmFmLlxuXHQgKlxuXHQgKiBJdCBmYWxscyBiYWNrIHRvIHNldFRpbWVvdXQgb24gZGV2aWNlcyB0aGF0IHN1cHBvcnQgQ1NTXG5cdCAqIHRyYW5zaXRpb25zIGJ1dCBub3QgcmFmIChlLmcuIEFuZHJvaWQgNC4yIGJyb3dzZXIpIC0gc2luY2Vcblx0ICogdGhlc2UgZW52aXJvbm1lbnRzIGFyZSB1c3VhbGx5IHNsb3csIHdlIGFyZSBnaXZpbmcgaXQgYVxuXHQgKiByZWxhdGl2ZWx5IGxhcmdlIHRpbWVvdXQuXG5cdCAqL1xuXHRcblx0dmFyIHJhZiA9IGluQnJvd3NlciAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xuXHR2YXIgd2FpdEZvclRyYW5zaXRpb25TdGFydCA9IHJhZlxuXHQvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuXHQ/IGZ1bmN0aW9uIChmbikge1xuXHQgIHJhZihmdW5jdGlvbiAoKSB7XG5cdCAgICByYWYoZm4pO1xuXHQgIH0pO1xuXHR9IDogZnVuY3Rpb24gKGZuKSB7XG5cdCAgc2V0VGltZW91dChmbiwgNTApO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIEEgVHJhbnNpdGlvbiBvYmplY3QgdGhhdCBlbmNhcHN1bGF0ZXMgdGhlIHN0YXRlIGFuZCBsb2dpY1xuXHQgKiBvZiB0aGUgdHJhbnNpdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICogQHBhcmFtIHtPYmplY3R9IGhvb2tzXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKi9cblx0ZnVuY3Rpb24gVHJhbnNpdGlvbihlbCwgaWQsIGhvb2tzLCB2bSkge1xuXHQgIHRoaXMuaWQgPSBpZDtcblx0ICB0aGlzLmVsID0gZWw7XG5cdCAgdGhpcy5lbnRlckNsYXNzID0gaG9va3MgJiYgaG9va3MuZW50ZXJDbGFzcyB8fCBpZCArICctZW50ZXInO1xuXHQgIHRoaXMubGVhdmVDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmxlYXZlQ2xhc3MgfHwgaWQgKyAnLWxlYXZlJztcblx0ICB0aGlzLmhvb2tzID0gaG9va3M7XG5cdCAgdGhpcy52bSA9IHZtO1xuXHQgIC8vIGFzeW5jIHN0YXRlXG5cdCAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcblx0ICB0aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG5cdCAgdGhpcy5lbnRlcmVkID0gdGhpcy5sZWZ0ID0gZmFsc2U7XG5cdCAgdGhpcy50eXBlQ2FjaGUgPSB7fTtcblx0ICAvLyBjaGVjayBjc3MgdHJhbnNpdGlvbiB0eXBlXG5cdCAgdGhpcy50eXBlID0gaG9va3MgJiYgaG9va3MudHlwZTtcblx0ICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgaWYgKHRoaXMudHlwZSAmJiB0aGlzLnR5cGUgIT09IFRZUEVfVFJBTlNJVElPTiAmJiB0aGlzLnR5cGUgIT09IFRZUEVfQU5JTUFUSU9OKSB7XG5cdCAgICAgIHdhcm4oJ2ludmFsaWQgQ1NTIHRyYW5zaXRpb24gdHlwZSBmb3IgdHJhbnNpdGlvbj1cIicgKyB0aGlzLmlkICsgJ1wiOiAnICsgdGhpcy50eXBlLCB2bSk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIC8vIGJpbmRcblx0ICB2YXIgc2VsZiA9IHRoaXM7WydlbnRlck5leHRUaWNrJywgJ2VudGVyRG9uZScsICdsZWF2ZU5leHRUaWNrJywgJ2xlYXZlRG9uZSddLmZvckVhY2goZnVuY3Rpb24gKG0pIHtcblx0ICAgIHNlbGZbbV0gPSBiaW5kKHNlbGZbbV0sIHNlbGYpO1xuXHQgIH0pO1xuXHR9XG5cdFxuXHR2YXIgcCQxID0gVHJhbnNpdGlvbi5wcm90b3R5cGU7XG5cdFxuXHQvKipcblx0ICogU3RhcnQgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cblx0ICpcblx0ICogMS4gZW50ZXIgdHJhbnNpdGlvbiB0cmlnZ2VyZWRcblx0ICogMi4gY2FsbCBiZWZvcmVFbnRlciBob29rXG5cdCAqIDMuIGFkZCBlbnRlciBjbGFzc1xuXHQgKiA0LiBpbnNlcnQvc2hvdyBlbGVtZW50XG5cdCAqIDUuIGNhbGwgZW50ZXIgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcblx0ICogNi4gcmVmbG93XG5cdCAqIDcuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcblx0ICogICAgLSB0cmFuc2l0aW9uOlxuXHQgKiAgICAgICAgcmVtb3ZlIGNsYXNzIG5vdywgd2FpdCBmb3IgdHJhbnNpdGlvbmVuZCxcblx0ICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiAgICAtIGFuaW1hdGlvbjpcblx0ICogICAgICAgIHdhaXQgZm9yIGFuaW1hdGlvbmVuZCwgcmVtb3ZlIGNsYXNzLFxuXHQgKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG5cdCAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG5cdCAqICAgICAgICBkb25lIG5vdyBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiA4LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG5cdCAqICAgIGFmdGVyRW50ZXIgaG9vay5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSBpbnNlcnQvc2hvdyB0aGUgZWxlbWVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0cCQxLmVudGVyID0gZnVuY3Rpb24gKG9wLCBjYikge1xuXHQgIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUVudGVyJyk7XG5cdCAgdGhpcy5jYiA9IGNiO1xuXHQgIGFkZENsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgb3AoKTtcblx0ICB0aGlzLmVudGVyZWQgPSBmYWxzZTtcblx0ICB0aGlzLmNhbGxIb29rV2l0aENiKCdlbnRlcicpO1xuXHQgIGlmICh0aGlzLmVudGVyZWQpIHtcblx0ICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuXHQgIH1cblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5lbnRlckNhbmNlbGxlZDtcblx0ICBwdXNoSm9iKHRoaXMuZW50ZXJOZXh0VGljayk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLCB3aGljaCBpc1xuXHQgKiB0byBiZSBwdXNoZWQgaW50byBhIHF1ZXVlIGFuZCBleGVjdXRlZCBhZnRlciBhIHJlZmxvdyBzb1xuXHQgKiB0aGF0IHJlbW92aW5nIHRoZSBjbGFzcyBjYW4gdHJpZ2dlciBhIENTUyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5lbnRlck5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBfdGhpcyA9IHRoaXM7XG5cdFxuXHQgIC8vIHByZXZlbnQgdHJhbnNpdGlvbiBza2lwcGluZ1xuXHQgIHRoaXMuanVzdEVudGVyZWQgPSB0cnVlO1xuXHQgIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQoZnVuY3Rpb24gKCkge1xuXHQgICAgX3RoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcblx0ICB9KTtcblx0ICB2YXIgZW50ZXJEb25lID0gdGhpcy5lbnRlckRvbmU7XG5cdCAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgaWYgKCF0aGlzLnBlbmRpbmdKc0NiKSB7XG5cdCAgICBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG5cdCAgICAgIC8vIHRyaWdnZXIgdHJhbnNpdGlvbiBieSByZW1vdmluZyBlbnRlciBjbGFzcyBub3dcblx0ICAgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICAgICAgdGhpcy5zZXR1cENzc0NiKHRyYW5zaXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcblx0ICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9BTklNQVRJT04pIHtcblx0ICAgICAgdGhpcy5zZXR1cENzc0NiKGFuaW1hdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZW50ZXJEb25lKCk7XG5cdCAgICB9XG5cdCAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcblx0ICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5lbnRlckRvbmUgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdGhpcy5lbnRlcmVkID0gdHJ1ZTtcblx0ICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuXHQgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJFbnRlcicpO1xuXHQgIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogU3RhcnQgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG5cdCAqXG5cdCAqIDEuIGxlYXZlIHRyYW5zaXRpb24gdHJpZ2dlcmVkLlxuXHQgKiAyLiBjYWxsIGJlZm9yZUxlYXZlIGhvb2tcblx0ICogMy4gYWRkIGxlYXZlIGNsYXNzICh0cmlnZ2VyIGNzcyB0cmFuc2l0aW9uKVxuXHQgKiA0LiBjYWxsIGxlYXZlIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG5cdCAqIDUuIHJlZmxvdyBpZiBubyBleHBsaWNpdCBqcyBjYWxsYmFjayBpcyBwcm92aWRlZFxuXHQgKiA2LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG5cdCAqICAgIC0gdHJhbnNpdGlvbiBvciBhbmltYXRpb246XG5cdCAqICAgICAgICB3YWl0IGZvciBlbmQgZXZlbnQsIHJlbW92ZSBjbGFzcywgdGhlbiBkb25lIGlmXG5cdCAqICAgICAgICB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuXHQgKiAgICAgICAgZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuXHQgKiA3LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG5cdCAqICAgIGFmdGVyTGVhdmUgaG9vay5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSByZW1vdmUvaGlkZSB0aGUgZWxlbWVudFxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAqL1xuXHRcblx0cCQxLmxlYXZlID0gZnVuY3Rpb24gKG9wLCBjYikge1xuXHQgIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuXHQgIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUxlYXZlJyk7XG5cdCAgdGhpcy5vcCA9IG9wO1xuXHQgIHRoaXMuY2IgPSBjYjtcblx0ICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIHRoaXMubGVmdCA9IGZhbHNlO1xuXHQgIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2xlYXZlJyk7XG5cdCAgaWYgKHRoaXMubGVmdCkge1xuXHQgICAgcmV0dXJuOyAvLyB1c2VyIGNhbGxlZCBkb25lIHN5bmNocm9ub3VzbHkuXG5cdCAgfVxuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmxlYXZlQ2FuY2VsbGVkO1xuXHQgIC8vIG9ubHkgbmVlZCB0byBoYW5kbGUgbGVhdmVEb25lIGlmXG5cdCAgLy8gMS4gdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBkb25lIChzeW5jaHJvbm91c2x5IGNhbGxlZFxuXHQgIC8vICAgIGJ5IHRoZSB1c2VyLCB3aGljaCBjYXVzZXMgdGhpcy5vcCBzZXQgdG8gbnVsbClcblx0ICAvLyAyLiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrXG5cdCAgaWYgKHRoaXMub3AgJiYgIXRoaXMucGVuZGluZ0pzQ2IpIHtcblx0ICAgIC8vIGlmIGEgQ1NTIHRyYW5zaXRpb24gbGVhdmVzIGltbWVkaWF0ZWx5IGFmdGVyIGVudGVyLFxuXHQgICAgLy8gdGhlIHRyYW5zaXRpb25lbmQgZXZlbnQgbmV2ZXIgZmlyZXMuIHRoZXJlZm9yZSB3ZVxuXHQgICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGVuZCB0aGUgbGVhdmUgaW1tZWRpYXRlbHkuXG5cdCAgICBpZiAodGhpcy5qdXN0RW50ZXJlZCkge1xuXHQgICAgICB0aGlzLmxlYXZlRG9uZSgpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcHVzaEpvYih0aGlzLmxlYXZlTmV4dFRpY2spO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuXHQgKi9cblx0XG5cdHAkMS5sZWF2ZU5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmxlYXZlQ2xhc3MpO1xuXHQgIGlmICh0eXBlKSB7XG5cdCAgICB2YXIgZXZlbnQgPSB0eXBlID09PSBUWVBFX1RSQU5TSVRJT04gPyB0cmFuc2l0aW9uRW5kRXZlbnQgOiBhbmltYXRpb25FbmRFdmVudDtcblx0ICAgIHRoaXMuc2V0dXBDc3NDYihldmVudCwgdGhpcy5sZWF2ZURvbmUpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB0aGlzLmxlYXZlRG9uZSgpO1xuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG5cdCAqL1xuXHRcblx0cCQxLmxlYXZlRG9uZSA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLmxlZnQgPSB0cnVlO1xuXHQgIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG5cdCAgdGhpcy5vcCgpO1xuXHQgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJMZWF2ZScpO1xuXHQgIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG5cdCAgdGhpcy5vcCA9IG51bGw7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FuY2VsIGFueSBwZW5kaW5nIGNhbGxiYWNrcyBmcm9tIGEgcHJldmlvdXNseSBydW5uaW5nXG5cdCAqIGJ1dCBub3QgZmluaXNoZWQgdHJhbnNpdGlvbi5cblx0ICovXG5cdFxuXHRwJDEuY2FuY2VsUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcblx0ICB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG5cdCAgdmFyIGhhc1BlbmRpbmcgPSBmYWxzZTtcblx0ICBpZiAodGhpcy5wZW5kaW5nQ3NzQ2IpIHtcblx0ICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuXHQgICAgb2ZmKHRoaXMuZWwsIHRoaXMucGVuZGluZ0Nzc0V2ZW50LCB0aGlzLnBlbmRpbmdDc3NDYik7XG5cdCAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gbnVsbDtcblx0ICB9XG5cdCAgaWYgKHRoaXMucGVuZGluZ0pzQ2IpIHtcblx0ICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuXHQgICAgdGhpcy5wZW5kaW5nSnNDYi5jYW5jZWwoKTtcblx0ICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuXHQgIH1cblx0ICBpZiAoaGFzUGVuZGluZykge1xuXHQgICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcblx0ICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG5cdCAgfVxuXHQgIGlmICh0aGlzLmNhbmNlbCkge1xuXHQgICAgdGhpcy5jYW5jZWwuY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICAgIHRoaXMuY2FuY2VsID0gbnVsbDtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhIHVzZXItcHJvdmlkZWQgc3luY2hyb25vdXMgaG9vayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRwJDEuY2FsbEhvb2sgPSBmdW5jdGlvbiAodHlwZSkge1xuXHQgIGlmICh0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV0pIHtcblx0ICAgIHRoaXMuaG9va3NbdHlwZV0uY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2FsbCBhIHVzZXItcHJvdmlkZWQsIHBvdGVudGlhbGx5LWFzeW5jIGhvb2sgZnVuY3Rpb24uXG5cdCAqIFdlIGNoZWNrIGZvciB0aGUgbGVuZ3RoIG9mIGFyZ3VtZW50cyB0byBzZWUgaWYgdGhlIGhvb2tcblx0ICogZXhwZWN0cyBhIGBkb25lYCBjYWxsYmFjay4gSWYgdHJ1ZSwgdGhlIHRyYW5zaXRpb24ncyBlbmRcblx0ICogd2lsbCBiZSBkZXRlcm1pbmVkIGJ5IHdoZW4gdGhlIHVzZXIgY2FsbHMgdGhhdCBjYWxsYmFjaztcblx0ICogb3RoZXJ3aXNlLCB0aGUgZW5kIGlzIGRldGVybWluZWQgYnkgdGhlIENTUyB0cmFuc2l0aW9uIG9yXG5cdCAqIGFuaW1hdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcblx0ICovXG5cdFxuXHRwJDEuY2FsbEhvb2tXaXRoQ2IgPSBmdW5jdGlvbiAodHlwZSkge1xuXHQgIHZhciBob29rID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzW3R5cGVdO1xuXHQgIGlmIChob29rKSB7XG5cdCAgICBpZiAoaG9vay5sZW5ndGggPiAxKSB7XG5cdCAgICAgIHRoaXMucGVuZGluZ0pzQ2IgPSBjYW5jZWxsYWJsZSh0aGlzW3R5cGUgKyAnRG9uZSddKTtcblx0ICAgIH1cblx0ICAgIGhvb2suY2FsbCh0aGlzLnZtLCB0aGlzLmVsLCB0aGlzLnBlbmRpbmdKc0NiKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogR2V0IGFuIGVsZW1lbnQncyB0cmFuc2l0aW9uIHR5cGUgYmFzZWQgb24gdGhlXG5cdCAqIGNhbGN1bGF0ZWQgc3R5bGVzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lXG5cdCAqIEByZXR1cm4ge051bWJlcn1cblx0ICovXG5cdFxuXHRwJDEuZ2V0Q3NzVHJhbnNpdGlvblR5cGUgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG5cdCAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5cdCAgaWYgKCF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcblx0ICAvLyBza2lwIENTUyB0cmFuc2l0aW9ucyBpZiBwYWdlIGlzIG5vdCB2aXNpYmxlIC1cblx0ICAvLyB0aGlzIHNvbHZlcyB0aGUgaXNzdWUgb2YgdHJhbnNpdGlvbmVuZCBldmVudHMgbm90XG5cdCAgLy8gZmlyaW5nIHVudGlsIHRoZSBwYWdlIGlzIHZpc2libGUgYWdhaW4uXG5cdCAgLy8gcGFnZVZpc2liaWxpdHkgQVBJIGlzIHN1cHBvcnRlZCBpbiBJRTEwKywgc2FtZSBhc1xuXHQgIC8vIENTUyB0cmFuc2l0aW9ucy5cblx0ICBkb2N1bWVudC5oaWRkZW4gfHxcblx0ICAvLyBleHBsaWNpdCBqcy1vbmx5IHRyYW5zaXRpb25cblx0ICB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3MuY3NzID09PSBmYWxzZSB8fFxuXHQgIC8vIGVsZW1lbnQgaXMgaGlkZGVuXG5cdCAgaXNIaWRkZW4odGhpcy5lbCkpIHtcblx0ICAgIHJldHVybjtcblx0ICB9XG5cdCAgdmFyIHR5cGUgPSB0aGlzLnR5cGUgfHwgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXTtcblx0ICBpZiAodHlwZSkgcmV0dXJuIHR5cGU7XG5cdCAgdmFyIGlubGluZVN0eWxlcyA9IHRoaXMuZWwuc3R5bGU7XG5cdCAgdmFyIGNvbXB1dGVkU3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbCk7XG5cdCAgdmFyIHRyYW5zRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXTtcblx0ICBpZiAodHJhbnNEdXJhdGlvbiAmJiB0cmFuc0R1cmF0aW9uICE9PSAnMHMnKSB7XG5cdCAgICB0eXBlID0gVFlQRV9UUkFOU0lUSU9OO1xuXHQgIH0gZWxzZSB7XG5cdCAgICB2YXIgYW5pbUR1cmF0aW9uID0gaW5saW5lU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdO1xuXHQgICAgaWYgKGFuaW1EdXJhdGlvbiAmJiBhbmltRHVyYXRpb24gIT09ICcwcycpIHtcblx0ICAgICAgdHlwZSA9IFRZUEVfQU5JTUFUSU9OO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAodHlwZSkge1xuXHQgICAgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXSA9IHR5cGU7XG5cdCAgfVxuXHQgIHJldHVybiB0eXBlO1xuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldHVwIGEgQ1NTIHRyYW5zaXRpb25lbmQvYW5pbWF0aW9uZW5kIGNhbGxiYWNrLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gY2Jcblx0ICovXG5cdFxuXHRwJDEuc2V0dXBDc3NDYiA9IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcblx0ICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IGV2ZW50O1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICB2YXIgZWwgPSB0aGlzLmVsO1xuXHQgIHZhciBvbkVuZCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gZnVuY3Rpb24gKGUpIHtcblx0ICAgIGlmIChlLnRhcmdldCA9PT0gZWwpIHtcblx0ICAgICAgb2ZmKGVsLCBldmVudCwgb25FbmQpO1xuXHQgICAgICBzZWxmLnBlbmRpbmdDc3NFdmVudCA9IHNlbGYucGVuZGluZ0Nzc0NiID0gbnVsbDtcblx0ICAgICAgaWYgKCFzZWxmLnBlbmRpbmdKc0NiICYmIGNiKSB7XG5cdCAgICAgICAgY2IoKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdCAgb24oZWwsIGV2ZW50LCBvbkVuZCk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBoaWRkZW4gLSBpbiB0aGF0IGNhc2Ugd2UgY2FuIGp1c3Rcblx0ICogc2tpcCB0aGUgdHJhbnNpdGlvbiBhbGx0b2dldGhlci5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGlzSGlkZGVuKGVsKSB7XG5cdCAgaWYgKC9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcblx0ICAgIC8vIFNWRyBlbGVtZW50cyBkbyBub3QgaGF2ZSBvZmZzZXQoV2lkdGh8SGVpZ2h0KVxuXHQgICAgLy8gc28gd2UgbmVlZCB0byBjaGVjayB0aGUgY2xpZW50IHJlY3Rcblx0ICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cdCAgICByZXR1cm4gIShyZWN0LndpZHRoIHx8IHJlY3QuaGVpZ2h0KTtcblx0ICB9IGVsc2Uge1xuXHQgICAgcmV0dXJuICEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTtcblx0ICB9XG5cdH1cblx0XG5cdHZhciB0cmFuc2l0aW9uJDEgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBUUkFOU0lUSU9OLFxuXHRcblx0ICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShpZCwgb2xkSWQpIHtcblx0ICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cdCAgICAvLyByZXNvbHZlIG9uIG93bmVyIHZtXG5cdCAgICB2YXIgaG9va3MgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3RyYW5zaXRpb25zJywgaWQpO1xuXHQgICAgaWQgPSBpZCB8fCAndic7XG5cdCAgICBvbGRJZCA9IG9sZElkIHx8ICd2Jztcblx0ICAgIGVsLl9fdl90cmFucyA9IG5ldyBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHRoaXMudm0pO1xuXHQgICAgcmVtb3ZlQ2xhc3MoZWwsIG9sZElkICsgJy10cmFuc2l0aW9uJyk7XG5cdCAgICBhZGRDbGFzcyhlbCwgaWQgKyAnLXRyYW5zaXRpb24nKTtcblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgaW50ZXJuYWxEaXJlY3RpdmVzID0ge1xuXHQgIHN0eWxlOiBzdHlsZSxcblx0ICAnY2xhc3MnOiB2Q2xhc3MsXG5cdCAgY29tcG9uZW50OiBjb21wb25lbnQsXG5cdCAgcHJvcDogcHJvcERlZixcblx0ICB0cmFuc2l0aW9uOiB0cmFuc2l0aW9uJDFcblx0fTtcblx0XG5cdC8vIHNwZWNpYWwgYmluZGluZyBwcmVmaXhlc1xuXHR2YXIgYmluZFJFID0gL152LWJpbmQ6fF46Lztcblx0dmFyIG9uUkUgPSAvXnYtb246fF5ALztcblx0dmFyIGRpckF0dHJSRSA9IC9edi0oW146XSspKD86JHw6KC4qKSQpLztcblx0dmFyIG1vZGlmaWVyUkUgPSAvXFwuW15cXC5dKy9nO1xuXHR2YXIgdHJhbnNpdGlvblJFID0gL14odi1iaW5kOnw6KT90cmFuc2l0aW9uJC87XG5cdFxuXHQvLyBkZWZhdWx0IGRpcmVjdGl2ZSBwcmlvcml0eVxuXHR2YXIgREVGQVVMVF9QUklPUklUWSA9IDEwMDA7XG5cdHZhciBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZID0gMjAwMDtcblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgdGVtcGxhdGUgYW5kIHJldHVybiBhIHJldXNhYmxlIGNvbXBvc2l0ZSBsaW5rXG5cdCAqIGZ1bmN0aW9uLCB3aGljaCByZWN1cnNpdmVseSBjb250YWlucyBtb3JlIGxpbmsgZnVuY3Rpb25zXG5cdCAqIGluc2lkZS4gVGhpcyB0b3AgbGV2ZWwgY29tcGlsZSBmdW5jdGlvbiB3b3VsZCBub3JtYWxseVxuXHQgKiBiZSBjYWxsZWQgb24gaW5zdGFuY2Ugcm9vdCBub2RlcywgYnV0IGNhbiBhbHNvIGJlIHVzZWRcblx0ICogZm9yIHBhcnRpYWwgY29tcGlsYXRpb24gaWYgdGhlIHBhcnRpYWwgYXJndW1lbnQgaXMgdHJ1ZS5cblx0ICpcblx0ICogVGhlIHJldHVybmVkIGNvbXBvc2l0ZSBsaW5rIGZ1bmN0aW9uLCB3aGVuIGNhbGxlZCwgd2lsbFxuXHQgKiByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzXG5cdCAqIGNyZWF0ZWQgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHBhcmFtIHtCb29sZWFufSBwYXJ0aWFsXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbXBpbGUoZWwsIG9wdGlvbnMsIHBhcnRpYWwpIHtcblx0ICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgbm9kZSBpdHNlbGYuXG5cdCAgdmFyIG5vZGVMaW5rRm4gPSBwYXJ0aWFsIHx8ICFvcHRpb25zLl9hc0NvbXBvbmVudCA/IGNvbXBpbGVOb2RlKGVsLCBvcHRpb25zKSA6IG51bGw7XG5cdCAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIGNoaWxkTm9kZXNcblx0ICB2YXIgY2hpbGRMaW5rRm4gPSAhKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCkgJiYgIWlzU2NyaXB0KGVsKSAmJiBlbC5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3QoZWwuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuXHRcblx0ICAvKipcblx0ICAgKiBBIGNvbXBvc2l0ZSBsaW5rZXIgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGEgYWxyZWFkeVxuXHQgICAqIGNvbXBpbGVkIHBpZWNlIG9mIERPTSwgd2hpY2ggaW5zdGFudGlhdGVzIGFsbCBkaXJlY3RpdmVcblx0ICAgKiBpbnN0YW5jZXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gaG9zdCB2bSBvZiB0cmFuc2NsdWRlZCBjb250ZW50XG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuXHQgICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIGxpbmsgY29udGV4dCBmcmFnbWVudFxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICAgKi9cblx0XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICAvLyBjYWNoZSBjaGlsZE5vZGVzIGJlZm9yZSBsaW5raW5nIHBhcmVudCwgZml4ICM2NTdcblx0ICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShlbC5jaGlsZE5vZGVzKTtcblx0ICAgIC8vIGxpbmtcblx0ICAgIHZhciBkaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gY29tcG9zaXRlTGlua0NhcHR1cmVyKCkge1xuXHQgICAgICBpZiAobm9kZUxpbmtGbikgbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgICAgaWYgKGNoaWxkTGlua0ZuKSBjaGlsZExpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgfSwgdm0pO1xuXHQgICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgZGlycyk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEFwcGx5IGEgbGlua2VyIHRvIGEgdm0vZWxlbWVudCBwYWlyIGFuZCBjYXB0dXJlIHRoZVxuXHQgKiBkaXJlY3RpdmVzIGNyZWF0ZWQgZHVyaW5nIHRoZSBwcm9jZXNzLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gbGlua0FuZENhcHR1cmUobGlua2VyLCB2bSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAvLyByZXNldCBkaXJlY3RpdmVzIGJlZm9yZSBldmVyeSBjYXB0dXJlIGluIHByb2R1Y3Rpb25cblx0ICAgIC8vIG1vZGUsIHNvIHRoYXQgd2hlbiB1bmxpbmtpbmcgd2UgZG9uJ3QgbmVlZCB0byBzcGxpY2Vcblx0ICAgIC8vIHRoZW0gb3V0ICh3aGljaCB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGhpdCkuXG5cdCAgICAvLyB0aGV5IGFyZSBrZXB0IGluIGRldmVsb3BtZW50IG1vZGUgYmVjYXVzZSB0aGV5IGFyZVxuXHQgICAgLy8gdXNlZnVsIGZvciBWdWUncyBvd24gdGVzdHMuXG5cdCAgICB2bS5fZGlyZWN0aXZlcyA9IFtdO1xuXHQgIH1cblx0ICB2YXIgb3JpZ2luYWxEaXJDb3VudCA9IHZtLl9kaXJlY3RpdmVzLmxlbmd0aDtcblx0ICBsaW5rZXIoKTtcblx0ICB2YXIgZGlycyA9IHZtLl9kaXJlY3RpdmVzLnNsaWNlKG9yaWdpbmFsRGlyQ291bnQpO1xuXHQgIGRpcnMuc29ydChkaXJlY3RpdmVDb21wYXJhdG9yKTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBkaXJzW2ldLl9iaW5kKCk7XG5cdCAgfVxuXHQgIHJldHVybiBkaXJzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRGlyZWN0aXZlIHByaW9yaXR5IHNvcnQgY29tcGFyYXRvclxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gYVxuXHQgKiBAcGFyYW0ge09iamVjdH0gYlxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGRpcmVjdGl2ZUNvbXBhcmF0b3IoYSwgYikge1xuXHQgIGEgPSBhLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG5cdCAgYiA9IGIuZGVzY3JpcHRvci5kZWYucHJpb3JpdHkgfHwgREVGQVVMVF9QUklPUklUWTtcblx0ICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIExpbmtlciBmdW5jdGlvbnMgcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0XG5cdCAqIHRlYXJzZG93biBhbGwgZGlyZWN0aXZlcyBpbnN0YW5jZXMgZ2VuZXJhdGVkIGR1cmluZ1xuXHQgKiB0aGUgcHJvY2Vzcy5cblx0ICpcblx0ICogV2UgY3JlYXRlIHVubGluayBmdW5jdGlvbnMgd2l0aCBvbmx5IHRoZSBuZWNlc3Nhcnlcblx0ICogaW5mb3JtYXRpb24gdG8gYXZvaWQgcmV0YWluaW5nIGFkZGl0aW9uYWwgY2xvc3VyZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0FycmF5fSBkaXJzXG5cdCAqIEBwYXJhbSB7VnVlfSBbY29udGV4dF1cblx0ICogQHBhcmFtIHtBcnJheX0gW2NvbnRleHREaXJzXVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlVW5saW5rRm4odm0sIGRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKSB7XG5cdCAgZnVuY3Rpb24gdW5saW5rKGRlc3Ryb3lpbmcpIHtcblx0ICAgIHRlYXJkb3duRGlycyh2bSwgZGlycywgZGVzdHJveWluZyk7XG5cdCAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0RGlycykge1xuXHQgICAgICB0ZWFyZG93bkRpcnMoY29udGV4dCwgY29udGV4dERpcnMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICAvLyBleHBvc2UgbGlua2VkIGRpcmVjdGl2ZXNcblx0ICB1bmxpbmsuZGlycyA9IGRpcnM7XG5cdCAgcmV0dXJuIHVubGluaztcblx0fVxuXHRcblx0LyoqXG5cdCAqIFRlYXJkb3duIHBhcnRpYWwgbGlua2VkIGRpcmVjdGl2ZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge0FycmF5fSBkaXJzXG5cdCAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVzdHJveWluZ1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRlYXJkb3duRGlycyh2bSwgZGlycywgZGVzdHJveWluZykge1xuXHQgIHZhciBpID0gZGlycy5sZW5ndGg7XG5cdCAgd2hpbGUgKGktLSkge1xuXHQgICAgZGlyc1tpXS5fdGVhcmRvd24oKTtcblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFkZXN0cm95aW5nKSB7XG5cdCAgICAgIHZtLl9kaXJlY3RpdmVzLiRyZW1vdmUoZGlyc1tpXSk7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSBsaW5rIHByb3BzIG9uIGFuIGluc3RhbmNlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gcHJvcHNcblx0ICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cblx0ICogQHJldHVybiB7RnVuY3Rpb259XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZUFuZExpbmtQcm9wcyh2bSwgZWwsIHByb3BzLCBzY29wZSkge1xuXHQgIHZhciBwcm9wc0xpbmtGbiA9IGNvbXBpbGVQcm9wcyhlbCwgcHJvcHMsIHZtKTtcblx0ICB2YXIgcHJvcERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG5cdCAgICBwcm9wc0xpbmtGbih2bSwgc2NvcGUpO1xuXHQgIH0sIHZtKTtcblx0ICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBwcm9wRGlycyk7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIHRoZSByb290IGVsZW1lbnQgb2YgYW4gaW5zdGFuY2UuXG5cdCAqXG5cdCAqIDEuIGF0dHJzIG9uIGNvbnRleHQgY29udGFpbmVyIChjb250ZXh0IHNjb3BlKVxuXHQgKiAyLiBhdHRycyBvbiB0aGUgY29tcG9uZW50IHRlbXBsYXRlIHJvb3Qgbm9kZSwgaWZcblx0ICogICAgcmVwbGFjZTp0cnVlIChjaGlsZCBzY29wZSlcblx0ICpcblx0ICogSWYgdGhpcyBpcyBhIGZyYWdtZW50IGluc3RhbmNlLCB3ZSBvbmx5IG5lZWQgdG8gY29tcGlsZSAxLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0T3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpIHtcblx0ICB2YXIgY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9jb250YWluZXJBdHRycztcblx0ICB2YXIgcmVwbGFjZXJBdHRycyA9IG9wdGlvbnMuX3JlcGxhY2VyQXR0cnM7XG5cdCAgdmFyIGNvbnRleHRMaW5rRm4sIHJlcGxhY2VyTGlua0ZuO1xuXHRcblx0ICAvLyBvbmx5IG5lZWQgdG8gY29tcGlsZSBvdGhlciBhdHRyaWJ1dGVzIGZvclxuXHQgIC8vIG5vbi1mcmFnbWVudCBpbnN0YW5jZXNcblx0ICBpZiAoZWwubm9kZVR5cGUgIT09IDExKSB7XG5cdCAgICAvLyBmb3IgY29tcG9uZW50cywgY29udGFpbmVyIGFuZCByZXBsYWNlciBuZWVkIHRvIGJlXG5cdCAgICAvLyBjb21waWxlZCBzZXBhcmF0ZWx5IGFuZCBsaW5rZWQgaW4gZGlmZmVyZW50IHNjb3Blcy5cblx0ICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuXHQgICAgICAvLyAyLiBjb250YWluZXIgYXR0cmlidXRlc1xuXHQgICAgICBpZiAoY29udGFpbmVyQXR0cnMgJiYgY29udGV4dE9wdGlvbnMpIHtcblx0ICAgICAgICBjb250ZXh0TGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoY29udGFpbmVyQXR0cnMsIGNvbnRleHRPcHRpb25zKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAocmVwbGFjZXJBdHRycykge1xuXHQgICAgICAgIC8vIDMuIHJlcGxhY2VyIGF0dHJpYnV0ZXNcblx0ICAgICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKHJlcGxhY2VyQXR0cnMsIG9wdGlvbnMpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBub24tY29tcG9uZW50LCBqdXN0IGNvbXBpbGUgYXMgYSBub3JtYWwgZWxlbWVudC5cblx0ICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhlbC5hdHRyaWJ1dGVzLCBvcHRpb25zKTtcblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29udGFpbmVyQXR0cnMpIHtcblx0ICAgIC8vIHdhcm4gY29udGFpbmVyIGRpcmVjdGl2ZXMgZm9yIGZyYWdtZW50IGluc3RhbmNlc1xuXHQgICAgdmFyIG5hbWVzID0gY29udGFpbmVyQXR0cnMuZmlsdGVyKGZ1bmN0aW9uIChhdHRyKSB7XG5cdCAgICAgIC8vIGFsbG93IHZ1ZS1sb2FkZXIvdnVlaWZ5IHNjb3BlZCBjc3MgYXR0cmlidXRlc1xuXHQgICAgICByZXR1cm4gYXR0ci5uYW1lLmluZGV4T2YoJ192LScpIDwgMCAmJlxuXHQgICAgICAvLyBhbGxvdyBldmVudCBsaXN0ZW5lcnNcblx0ICAgICAgIW9uUkUudGVzdChhdHRyLm5hbWUpICYmXG5cdCAgICAgIC8vIGFsbG93IHNsb3RzXG5cdCAgICAgIGF0dHIubmFtZSAhPT0gJ3Nsb3QnO1xuXHQgICAgfSkubWFwKGZ1bmN0aW9uIChhdHRyKSB7XG5cdCAgICAgIHJldHVybiAnXCInICsgYXR0ci5uYW1lICsgJ1wiJztcblx0ICAgIH0pO1xuXHQgICAgaWYgKG5hbWVzLmxlbmd0aCkge1xuXHQgICAgICB2YXIgcGx1cmFsID0gbmFtZXMubGVuZ3RoID4gMTtcblx0ICAgICAgd2FybignQXR0cmlidXRlJyArIChwbHVyYWwgPyAncyAnIDogJyAnKSArIG5hbWVzLmpvaW4oJywgJykgKyAocGx1cmFsID8gJyBhcmUnIDogJyBpcycpICsgJyBpZ25vcmVkIG9uIGNvbXBvbmVudCAnICsgJzwnICsgb3B0aW9ucy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPiBiZWNhdXNlICcgKyAndGhlIGNvbXBvbmVudCBpcyBhIGZyYWdtZW50IGluc3RhbmNlOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvY29tcG9uZW50cy5odG1sI0ZyYWdtZW50LUluc3RhbmNlJyk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICBvcHRpb25zLl9jb250YWluZXJBdHRycyA9IG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBudWxsO1xuXHQgIHJldHVybiBmdW5jdGlvbiByb290TGlua0ZuKHZtLCBlbCwgc2NvcGUpIHtcblx0ICAgIC8vIGxpbmsgY29udGV4dCBzY29wZSBkaXJzXG5cdCAgICB2YXIgY29udGV4dCA9IHZtLl9jb250ZXh0O1xuXHQgICAgdmFyIGNvbnRleHREaXJzO1xuXHQgICAgaWYgKGNvbnRleHQgJiYgY29udGV4dExpbmtGbikge1xuXHQgICAgICBjb250ZXh0RGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcblx0ICAgICAgICBjb250ZXh0TGlua0ZuKGNvbnRleHQsIGVsLCBudWxsLCBzY29wZSk7XG5cdCAgICAgIH0sIGNvbnRleHQpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8vIGxpbmsgc2VsZlxuXHQgICAgdmFyIHNlbGZEaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICBpZiAocmVwbGFjZXJMaW5rRm4pIHJlcGxhY2VyTGlua0ZuKHZtLCBlbCk7XG5cdCAgICB9LCB2bSk7XG5cdFxuXHQgICAgLy8gcmV0dXJuIHRoZSB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gY29udGV4dFxuXHQgICAgLy8gY29udGFpbmVyIGRpcmVjdGl2ZXMuXG5cdCAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBzZWxmRGlycywgY29udGV4dCwgY29udGV4dERpcnMpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgbm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbiBiYXNlZCBvbiB0aGVcblx0ICogbm9kZSB0eXBlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKSB7XG5cdCAgdmFyIHR5cGUgPSBub2RlLm5vZGVUeXBlO1xuXHQgIGlmICh0eXBlID09PSAxICYmICFpc1NjcmlwdChub2RlKSkge1xuXHQgICAgcmV0dXJuIGNvbXBpbGVFbGVtZW50KG5vZGUsIG9wdGlvbnMpO1xuXHQgIH0gZWxzZSBpZiAodHlwZSA9PT0gMyAmJiBub2RlLmRhdGEudHJpbSgpKSB7XG5cdCAgICByZXR1cm4gY29tcGlsZVRleHROb2RlKG5vZGUsIG9wdGlvbnMpO1xuXHQgIH0gZWxzZSB7XG5cdCAgICByZXR1cm4gbnVsbDtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlRWxlbWVudChlbCwgb3B0aW9ucykge1xuXHQgIC8vIHByZXByb2Nlc3MgdGV4dGFyZWFzLlxuXHQgIC8vIHRleHRhcmVhIHRyZWF0cyBpdHMgdGV4dCBjb250ZW50IGFzIHRoZSBpbml0aWFsIHZhbHVlLlxuXHQgIC8vIGp1c3QgYmluZCBpdCBhcyBhbiBhdHRyIGRpcmVjdGl2ZSBmb3IgdmFsdWUuXG5cdCAgaWYgKGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcblx0ICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQoZWwudmFsdWUpO1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICBlbC5zZXRBdHRyaWJ1dGUoJzp2YWx1ZScsIHRva2Vuc1RvRXhwKHRva2VucykpO1xuXHQgICAgICBlbC52YWx1ZSA9ICcnO1xuXHQgICAgfVxuXHQgIH1cblx0ICB2YXIgbGlua0ZuO1xuXHQgIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcblx0ICB2YXIgYXR0cnMgPSBoYXNBdHRycyAmJiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuXHQgIC8vIGNoZWNrIHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGZvciAmIGlmKVxuXHQgIGlmIChoYXNBdHRycykge1xuXHQgICAgbGlua0ZuID0gY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMoZWwsIGF0dHJzLCBvcHRpb25zKTtcblx0ICB9XG5cdCAgLy8gY2hlY2sgZWxlbWVudCBkaXJlY3RpdmVzXG5cdCAgaWYgKCFsaW5rRm4pIHtcblx0ICAgIGxpbmtGbiA9IGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICAvLyBjaGVjayBjb21wb25lbnRcblx0ICBpZiAoIWxpbmtGbikge1xuXHQgICAgbGlua0ZuID0gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpO1xuXHQgIH1cblx0ICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuXHQgIGlmICghbGlua0ZuICYmIGhhc0F0dHJzKSB7XG5cdCAgICBsaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucyk7XG5cdCAgfVxuXHQgIHJldHVybiBsaW5rRm47XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDb21waWxlIGEgdGV4dE5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG5cdCAqXG5cdCAqIEBwYXJhbSB7VGV4dE5vZGV9IG5vZGVcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RnVuY3Rpb258bnVsbH0gdGV4dE5vZGVMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucykge1xuXHQgIC8vIHNraXAgbWFya2VkIHRleHQgbm9kZXNcblx0ICBpZiAobm9kZS5fc2tpcCkge1xuXHQgICAgcmV0dXJuIHJlbW92ZVRleHQ7XG5cdCAgfVxuXHRcblx0ICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KG5vZGUud2hvbGVUZXh0KTtcblx0ICBpZiAoIXRva2Vucykge1xuXHQgICAgcmV0dXJuIG51bGw7XG5cdCAgfVxuXHRcblx0ICAvLyBtYXJrIGFkamFjZW50IHRleHQgbm9kZXMgYXMgc2tpcHBlZCxcblx0ICAvLyBiZWNhdXNlIHdlIGFyZSB1c2luZyBub2RlLndob2xlVGV4dCB0byBjb21waWxlXG5cdCAgLy8gYWxsIGFkamFjZW50IHRleHQgbm9kZXMgdG9nZXRoZXIuIFRoaXMgZml4ZXNcblx0ICAvLyBpc3N1ZXMgaW4gSUUgd2hlcmUgc29tZXRpbWVzIGl0IHNwbGl0cyB1cCBhIHNpbmdsZVxuXHQgIC8vIHRleHQgbm9kZSBpbnRvIG11bHRpcGxlIG9uZXMuXG5cdCAgdmFyIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuXHQgIHdoaWxlIChuZXh0ICYmIG5leHQubm9kZVR5cGUgPT09IDMpIHtcblx0ICAgIG5leHQuX3NraXAgPSB0cnVlO1xuXHQgICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG5cdCAgfVxuXHRcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICB2YXIgZWwsIHRva2VuO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgdG9rZW4gPSB0b2tlbnNbaV07XG5cdCAgICBlbCA9IHRva2VuLnRhZyA/IHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuXHQgICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XG5cdCAgfVxuXHQgIHJldHVybiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnLCBvcHRpb25zKTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIExpbmtlciBmb3IgYW4gc2tpcHBlZCB0ZXh0IG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgKiBAcGFyYW0ge1RleHR9IG5vZGVcblx0ICovXG5cdFxuXHRmdW5jdGlvbiByZW1vdmVUZXh0KHZtLCBub2RlKSB7XG5cdCAgcmVtb3ZlKG5vZGUpO1xuXHR9XG5cdFxuXHQvKipcblx0ICogUHJvY2VzcyBhIHNpbmdsZSB0ZXh0IHRva2VuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7Tm9kZX1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSB7XG5cdCAgdmFyIGVsO1xuXHQgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG5cdCAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcblx0ICB9IGVsc2Uge1xuXHQgICAgaWYgKHRva2VuLmh0bWwpIHtcblx0ICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCd2LWh0bWwnKTtcblx0ICAgICAgc2V0VG9rZW5UeXBlKCdodG1sJyk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBJRSB3aWxsIGNsZWFuIHVwIGVtcHR5IHRleHROb2RlcyBkdXJpbmdcblx0ICAgICAgLy8gZnJhZy5jbG9uZU5vZGUodHJ1ZSksIHNvIHdlIGhhdmUgdG8gZ2l2ZSBpdFxuXHQgICAgICAvLyBzb21ldGhpbmcgaGVyZS4uLlxuXHQgICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgJyk7XG5cdCAgICAgIHNldFRva2VuVHlwZSgndGV4dCcpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBmdW5jdGlvbiBzZXRUb2tlblR5cGUodHlwZSkge1xuXHQgICAgaWYgKHRva2VuLmRlc2NyaXB0b3IpIHJldHVybjtcblx0ICAgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh0b2tlbi52YWx1ZSk7XG5cdCAgICB0b2tlbi5kZXNjcmlwdG9yID0ge1xuXHQgICAgICBuYW1lOiB0eXBlLFxuXHQgICAgICBkZWY6IGRpcmVjdGl2ZXNbdHlwZV0sXG5cdCAgICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuXHQgICAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVyc1xuXHQgICAgfTtcblx0ICB9XG5cdCAgcmV0dXJuIGVsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBhIHRleHROb2RlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0FycmF5PE9iamVjdD59IHRva2Vuc1xuXHQgKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIHRleHROb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUpIHtcblx0ICAgIHZhciBmcmFnQ2xvbmUgPSBmcmFnLmNsb25lTm9kZSh0cnVlKTtcblx0ICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShmcmFnQ2xvbmUuY2hpbGROb2Rlcyk7XG5cdCAgICB2YXIgdG9rZW4sIHZhbHVlLCBub2RlO1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuXHQgICAgICB2YWx1ZSA9IHRva2VuLnZhbHVlO1xuXHQgICAgICBpZiAodG9rZW4udGFnKSB7XG5cdCAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbaV07XG5cdCAgICAgICAgaWYgKHRva2VuLm9uZVRpbWUpIHtcblx0ICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtKS4kZXZhbCh2YWx1ZSk7XG5cdCAgICAgICAgICBpZiAodG9rZW4uaHRtbCkge1xuXHQgICAgICAgICAgICByZXBsYWNlKG5vZGUsIHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUpKTtcblx0ICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgIG5vZGUuZGF0YSA9IF90b1N0cmluZyh2YWx1ZSk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAgIHZtLl9iaW5kRGlyKHRva2VuLmRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlKTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJlcGxhY2UoZWwsIGZyYWdDbG9uZSk7XG5cdCAgfTtcblx0fVxuXHRcblx0LyoqXG5cdCAqIENvbXBpbGUgYSBub2RlIGxpc3QgYW5kIHJldHVybiBhIGNoaWxkTGlua0ZuLlxuXHQgKlxuXHQgKiBAcGFyYW0ge05vZGVMaXN0fSBub2RlTGlzdFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gY29tcGlsZU5vZGVMaXN0KG5vZGVMaXN0LCBvcHRpb25zKSB7XG5cdCAgdmFyIGxpbmtGbnMgPSBbXTtcblx0ICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGU7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2RlTGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIG5vZGUgPSBub2RlTGlzdFtpXTtcblx0ICAgIG5vZGVMaW5rRm4gPSBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKTtcblx0ICAgIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmIG5vZGUudGFnTmFtZSAhPT0gJ1NDUklQVCcgJiYgbm9kZS5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3Qobm9kZS5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG5cdCAgICBsaW5rRm5zLnB1c2gobm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4pO1xuXHQgIH1cblx0ICByZXR1cm4gbGlua0Zucy5sZW5ndGggPyBtYWtlQ2hpbGRMaW5rRm4obGlua0ZucykgOiBudWxsO1xuXHR9XG5cdFxuXHQvKipcblx0ICogTWFrZSBhIGNoaWxkIGxpbmsgZnVuY3Rpb24gZm9yIGEgbm9kZSdzIGNoaWxkTm9kZXMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fSBsaW5rRm5zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufSBjaGlsZExpbmtGblxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1ha2VDaGlsZExpbmtGbihsaW5rRm5zKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIGNoaWxkTGlua0ZuKHZtLCBub2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIHZhciBub2RlLCBub2RlTGlua0ZuLCBjaGlsZHJlbkxpbmtGbjtcblx0ICAgIGZvciAodmFyIGkgPSAwLCBuID0gMCwgbCA9IGxpbmtGbnMubGVuZ3RoOyBpIDwgbDsgbisrKSB7XG5cdCAgICAgIG5vZGUgPSBub2Rlc1tuXTtcblx0ICAgICAgbm9kZUxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcblx0ICAgICAgY2hpbGRyZW5MaW5rRm4gPSBsaW5rRm5zW2krK107XG5cdCAgICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuXHQgICAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkobm9kZS5jaGlsZE5vZGVzKTtcblx0ICAgICAgaWYgKG5vZGVMaW5rRm4pIHtcblx0ICAgICAgICBub2RlTGlua0ZuKHZtLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgICAgIH1cblx0ICAgICAgaWYgKGNoaWxkcmVuTGlua0ZuKSB7XG5cdCAgICAgICAgY2hpbGRyZW5MaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBmb3IgZWxlbWVudCBkaXJlY3RpdmVzIChjdXN0b20gZWxlbWVudHMgdGhhdCBzaG91bGRcblx0ICogYmUgcmVzb3ZsZWQgYXMgdGVybWluYWwgZGlyZWN0aXZlcykuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja0VsZW1lbnREaXJlY3RpdmVzKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcblx0ICBpZiAoY29tbW9uVGFnUkUudGVzdCh0YWcpKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKTtcblx0ICBpZiAoZGVmKSB7XG5cdCAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgdGFnLCAnJywgb3B0aW9ucywgZGVmKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LiBJZiB5ZXMsIHJldHVyblxuXHQgKiBhIGNvbXBvbmVudCBsaW5rIGZ1bmN0aW9uLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG5cdCAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucykge1xuXHQgIHZhciBjb21wb25lbnQgPSBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpO1xuXHQgIGlmIChjb21wb25lbnQpIHtcblx0ICAgIHZhciByZWYgPSBmaW5kUmVmKGVsKTtcblx0ICAgIHZhciBkZXNjcmlwdG9yID0ge1xuXHQgICAgICBuYW1lOiAnY29tcG9uZW50Jyxcblx0ICAgICAgcmVmOiByZWYsXG5cdCAgICAgIGV4cHJlc3Npb246IGNvbXBvbmVudC5pZCxcblx0ICAgICAgZGVmOiBpbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50LFxuXHQgICAgICBtb2RpZmllcnM6IHtcblx0ICAgICAgICBsaXRlcmFsOiAhY29tcG9uZW50LmR5bmFtaWNcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICAgIHZhciBjb21wb25lbnRMaW5rRm4gPSBmdW5jdGlvbiBjb21wb25lbnRMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgICBpZiAocmVmKSB7XG5cdCAgICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgcmVmLCBudWxsKTtcblx0ICAgICAgfVxuXHQgICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgfTtcblx0ICAgIGNvbXBvbmVudExpbmtGbi50ZXJtaW5hbCA9IHRydWU7XG5cdCAgICByZXR1cm4gY29tcG9uZW50TGlua0ZuO1xuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIENoZWNrIGFuIGVsZW1lbnQgZm9yIHRlcm1pbmFsIGRpcmVjdGl2ZXMgaW4gZml4ZWQgb3JkZXIuXG5cdCAqIElmIGl0IGZpbmRzIG9uZSwgcmV0dXJuIGEgdGVybWluYWwgbGluayBmdW5jdGlvbi5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge0FycmF5fSBhdHRyc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpIHtcblx0ICAvLyBza2lwIHYtcHJlXG5cdCAgaWYgKGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gc2tpcDtcblx0ICB9XG5cdCAgLy8gc2tpcCB2LWVsc2UgYmxvY2ssIGJ1dCBvbmx5IGlmIGZvbGxvd2luZyB2LWlmXG5cdCAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndi1lbHNlJykpIHtcblx0ICAgIHZhciBwcmV2ID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcblx0ICAgIGlmIChwcmV2ICYmIHByZXYuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcblx0ICAgICAgcmV0dXJuIHNraXA7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIG1vZGlmaWVycywgbWF0Y2hlZCwgZGlyTmFtZSwgcmF3TmFtZSwgYXJnLCBkZWYsIHRlcm1EZWY7XG5cdCAgZm9yICh2YXIgaSA9IDAsIGogPSBhdHRycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcblx0ICAgIGF0dHIgPSBhdHRyc1tpXTtcblx0ICAgIG5hbWUgPSBhdHRyLm5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG5cdCAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuXHQgICAgICBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBtYXRjaGVkWzFdKTtcblx0ICAgICAgaWYgKGRlZiAmJiBkZWYudGVybWluYWwpIHtcblx0ICAgICAgICBpZiAoIXRlcm1EZWYgfHwgKGRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZKSA+IHRlcm1EZWYucHJpb3JpdHkpIHtcblx0ICAgICAgICAgIHRlcm1EZWYgPSBkZWY7XG5cdCAgICAgICAgICByYXdOYW1lID0gYXR0ci5uYW1lO1xuXHQgICAgICAgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMoYXR0ci5uYW1lKTtcblx0ICAgICAgICAgIHZhbHVlID0gYXR0ci52YWx1ZTtcblx0ICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuXHQgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdFxuXHQgIGlmICh0ZXJtRGVmKSB7XG5cdCAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIHRlcm1EZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKTtcblx0ICB9XG5cdH1cblx0XG5cdGZ1bmN0aW9uIHNraXAoKSB7fVxuXHRza2lwLnRlcm1pbmFsID0gdHJ1ZTtcblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIG5vZGUgbGluayBmdW5jdGlvbiBmb3IgYSB0ZXJtaW5hbCBkaXJlY3RpdmUuXG5cdCAqIEEgdGVybWluYWwgbGluayBmdW5jdGlvbiB0ZXJtaW5hdGVzIHRoZSBjdXJyZW50XG5cdCAqIGNvbXBpbGF0aW9uIHJlY3Vyc2lvbiBhbmQgaGFuZGxlcyBjb21waWxhdGlvbiBvZiB0aGVcblx0ICogc3VidHJlZSBpbiB0aGUgZGlyZWN0aXZlLlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gZGVmXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbcmF3TmFtZV1cblx0ICogQHBhcmFtIHtTdHJpbmd9IFthcmddXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn0gdGVybWluYWxMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgZGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycykge1xuXHQgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG5cdCAgdmFyIGRlc2NyaXB0b3IgPSB7XG5cdCAgICBuYW1lOiBkaXJOYW1lLFxuXHQgICAgYXJnOiBhcmcsXG5cdCAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcblx0ICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzLFxuXHQgICAgcmF3OiB2YWx1ZSxcblx0ICAgIGF0dHI6IHJhd05hbWUsXG5cdCAgICBtb2RpZmllcnM6IG1vZGlmaWVycyxcblx0ICAgIGRlZjogZGVmXG5cdCAgfTtcblx0ICAvLyBjaGVjayByZWYgZm9yIHYtZm9yIGFuZCByb3V0ZXItdmlld1xuXHQgIGlmIChkaXJOYW1lID09PSAnZm9yJyB8fCBkaXJOYW1lID09PSAncm91dGVyLXZpZXcnKSB7XG5cdCAgICBkZXNjcmlwdG9yLnJlZiA9IGZpbmRSZWYoZWwpO1xuXHQgIH1cblx0ICB2YXIgZm4gPSBmdW5jdGlvbiB0ZXJtaW5hbE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgaWYgKGRlc2NyaXB0b3IucmVmKSB7XG5cdCAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIGRlc2NyaXB0b3IucmVmLCBudWxsKTtcblx0ICAgIH1cblx0ICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG5cdCAgfTtcblx0ICBmbi50ZXJtaW5hbCA9IHRydWU7XG5cdCAgcmV0dXJuIGZuO1xuXHR9XG5cdFxuXHQvKipcblx0ICogQ29tcGlsZSB0aGUgZGlyZWN0aXZlcyBvbiBhbiBlbGVtZW50IGFuZCByZXR1cm4gYSBsaW5rZXIuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl8TmFtZWROb2RlTWFwfSBhdHRyc1xuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucykge1xuXHQgIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuXHQgIHZhciBkaXJzID0gW107XG5cdCAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCByYXdOYW1lLCByYXdWYWx1ZSwgZGlyTmFtZSwgYXJnLCBtb2RpZmllcnMsIGRpckRlZiwgdG9rZW5zLCBtYXRjaGVkO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGF0dHIgPSBhdHRyc1tpXTtcblx0ICAgIG5hbWUgPSByYXdOYW1lID0gYXR0ci5uYW1lO1xuXHQgICAgdmFsdWUgPSByYXdWYWx1ZSA9IGF0dHIudmFsdWU7XG5cdCAgICB0b2tlbnMgPSBwYXJzZVRleHQodmFsdWUpO1xuXHQgICAgLy8gcmVzZXQgYXJnXG5cdCAgICBhcmcgPSBudWxsO1xuXHQgICAgLy8gY2hlY2sgbW9kaWZpZXJzXG5cdCAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhuYW1lKTtcblx0ICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuXHRcblx0ICAgIC8vIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uc1xuXHQgICAgaWYgKHRva2Vucykge1xuXHQgICAgICB2YWx1ZSA9IHRva2Vuc1RvRXhwKHRva2Vucyk7XG5cdCAgICAgIGFyZyA9IG5hbWU7XG5cdCAgICAgIHB1c2hEaXIoJ2JpbmQnLCBkaXJlY3RpdmVzLmJpbmQsIHRva2Vucyk7XG5cdCAgICAgIC8vIHdhcm4gYWdhaW5zdCBtaXhpbmcgbXVzdGFjaGVzIHdpdGggdi1iaW5kXG5cdCAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG5cdCAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhdHRycywgZnVuY3Rpb24gKGF0dHIpIHtcblx0ICAgICAgICAgIHJldHVybiBhdHRyLm5hbWUgPT09ICc6Y2xhc3MnIHx8IGF0dHIubmFtZSA9PT0gJ3YtYmluZDpjbGFzcyc7XG5cdCAgICAgICAgfSkpIHtcblx0ICAgICAgICAgIHdhcm4oJ2NsYXNzPVwiJyArIHJhd1ZhbHVlICsgJ1wiOiBEbyBub3QgbWl4IG11c3RhY2hlIGludGVycG9sYXRpb24gJyArICdhbmQgdi1iaW5kIGZvciBcImNsYXNzXCIgb24gdGhlIHNhbWUgZWxlbWVudC4gVXNlIG9uZSBvciB0aGUgb3RoZXIuJywgb3B0aW9ucyk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9IGVsc2Vcblx0XG5cdCAgICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlOiB0cmFuc2l0aW9uXG5cdCAgICAgIGlmICh0cmFuc2l0aW9uUkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgIG1vZGlmaWVycy5saXRlcmFsID0gIWJpbmRSRS50ZXN0KG5hbWUpO1xuXHQgICAgICAgIHB1c2hEaXIoJ3RyYW5zaXRpb24nLCBpbnRlcm5hbERpcmVjdGl2ZXMudHJhbnNpdGlvbik7XG5cdCAgICAgIH0gZWxzZVxuXHRcblx0ICAgICAgICAvLyBldmVudCBoYW5kbGVyc1xuXHQgICAgICAgIGlmIChvblJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgICAgIGFyZyA9IG5hbWUucmVwbGFjZShvblJFLCAnJyk7XG5cdCAgICAgICAgICBwdXNoRGlyKCdvbicsIGRpcmVjdGl2ZXMub24pO1xuXHQgICAgICAgIH0gZWxzZVxuXHRcblx0ICAgICAgICAgIC8vIGF0dHJpYnV0ZSBiaW5kaW5nc1xuXHQgICAgICAgICAgaWYgKGJpbmRSRS50ZXN0KG5hbWUpKSB7XG5cdCAgICAgICAgICAgIGRpck5hbWUgPSBuYW1lLnJlcGxhY2UoYmluZFJFLCAnJyk7XG5cdCAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnc3R5bGUnIHx8IGRpck5hbWUgPT09ICdjbGFzcycpIHtcblx0ICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGludGVybmFsRGlyZWN0aXZlc1tkaXJOYW1lXSk7XG5cdCAgICAgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICAgICAgYXJnID0gZGlyTmFtZTtcblx0ICAgICAgICAgICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kKTtcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfSBlbHNlXG5cdFxuXHQgICAgICAgICAgICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuXHQgICAgICAgICAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuXHQgICAgICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuXHQgICAgICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG5cdFxuXHQgICAgICAgICAgICAgIC8vIHNraXAgdi1lbHNlICh3aGVuIHVzZWQgd2l0aCB2LXNob3cpXG5cdCAgICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdlbHNlJykge1xuXHQgICAgICAgICAgICAgICAgY29udGludWU7XG5cdCAgICAgICAgICAgICAgfVxuXHRcblx0ICAgICAgICAgICAgICBkaXJEZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXJOYW1lLCB0cnVlKTtcblx0ICAgICAgICAgICAgICBpZiAoZGlyRGVmKSB7XG5cdCAgICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGRpckRlZik7XG5cdCAgICAgICAgICAgICAgfVxuXHQgICAgICAgICAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBQdXNoIGEgZGlyZWN0aXZlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGRpck5hbWVcblx0ICAgKiBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gZGVmXG5cdCAgICogQHBhcmFtIHtBcnJheX0gW2ludGVycFRva2Vuc11cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcHVzaERpcihkaXJOYW1lLCBkZWYsIGludGVycFRva2Vucykge1xuXHQgICAgdmFyIGhhc09uZVRpbWVUb2tlbiA9IGludGVycFRva2VucyAmJiBoYXNPbmVUaW1lKGludGVycFRva2Vucyk7XG5cdCAgICB2YXIgcGFyc2VkID0gIWhhc09uZVRpbWVUb2tlbiAmJiBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG5cdCAgICBkaXJzLnB1c2goe1xuXHQgICAgICBuYW1lOiBkaXJOYW1lLFxuXHQgICAgICBhdHRyOiByYXdOYW1lLFxuXHQgICAgICByYXc6IHJhd1ZhbHVlLFxuXHQgICAgICBkZWY6IGRlZixcblx0ICAgICAgYXJnOiBhcmcsXG5cdCAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuXHQgICAgICAvLyBjb252ZXJzaW9uIGZyb20gaW50ZXJwb2xhdGlvbiBzdHJpbmdzIHdpdGggb25lLXRpbWUgdG9rZW5cblx0ICAgICAgLy8gdG8gZXhwcmVzc2lvbiBpcyBkaWZmZXJlZCB1bnRpbCBkaXJlY3RpdmUgYmluZCB0aW1lIHNvIHRoYXQgd2Vcblx0ICAgICAgLy8gaGF2ZSBhY2Nlc3MgdG8gdGhlIGFjdHVhbCB2bSBjb250ZXh0IGZvciBvbmUtdGltZSBiaW5kaW5ncy5cblx0ICAgICAgZXhwcmVzc2lvbjogcGFyc2VkICYmIHBhcnNlZC5leHByZXNzaW9uLFxuXHQgICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG5cdCAgICAgIGludGVycDogaW50ZXJwVG9rZW5zLFxuXHQgICAgICBoYXNPbmVUaW1lOiBoYXNPbmVUaW1lVG9rZW5cblx0ICAgIH0pO1xuXHQgIH1cblx0XG5cdCAgaWYgKGRpcnMubGVuZ3RoKSB7XG5cdCAgICByZXR1cm4gbWFrZU5vZGVMaW5rRm4oZGlycyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogUGFyc2UgbW9kaWZpZXJzIGZyb20gZGlyZWN0aXZlIGF0dHJpYnV0ZSBuYW1lLlxuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgKiBAcmV0dXJuIHtPYmplY3R9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcGFyc2VNb2RpZmllcnMobmFtZSkge1xuXHQgIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSk7XG5cdCAgaWYgKG1hdGNoKSB7XG5cdCAgICB2YXIgaSA9IG1hdGNoLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgcmVzW21hdGNoW2ldLnNsaWNlKDEpXSA9IHRydWU7XG5cdCAgICB9XG5cdCAgfVxuXHQgIHJldHVybiByZXM7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBCdWlsZCBhIGxpbmsgZnVuY3Rpb24gZm9yIGFsbCBkaXJlY3RpdmVzIG9uIGEgc2luZ2xlIG5vZGUuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IGRpcmVjdGl2ZXNcblx0ICogQHJldHVybiB7RnVuY3Rpb259IGRpcmVjdGl2ZXNMaW5rRm5cblx0ICovXG5cdFxuXHRmdW5jdGlvbiBtYWtlTm9kZUxpbmtGbihkaXJlY3RpdmVzKSB7XG5cdCAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuXHQgICAgLy8gcmV2ZXJzZSBhcHBseSBiZWNhdXNlIGl0J3Mgc29ydGVkIGxvdyB0byBoaWdoXG5cdCAgICB2YXIgaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB2bS5fYmluZERpcihkaXJlY3RpdmVzW2ldLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhbiBpbnRlcnBvbGF0aW9uIHN0cmluZyBjb250YWlucyBvbmUtdGltZSB0b2tlbnMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGhhc09uZVRpbWUodG9rZW5zKSB7XG5cdCAgdmFyIGkgPSB0b2tlbnMubGVuZ3RoO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGlmICh0b2tlbnNbaV0ub25lVGltZSkgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBpc1NjcmlwdChlbCkge1xuXHQgIHJldHVybiBlbC50YWdOYW1lID09PSAnU0NSSVBUJyAmJiAoIWVsLmhhc0F0dHJpYnV0ZSgndHlwZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAndGV4dC9qYXZhc2NyaXB0Jyk7XG5cdH1cblx0XG5cdHZhciBzcGVjaWFsQ2hhclJFID0gL1teXFx3XFwtOlxcLl0vO1xuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgYW4gZWxlbWVudCBvciBhIERvY3VtZW50RnJhZ21lbnQgYmFzZWQgb24gYVxuXHQgKiBpbnN0YW5jZSBvcHRpb24gb2JqZWN0LiBUaGlzIGFsbG93cyB1cyB0byB0cmFuc2NsdWRlXG5cdCAqIGEgdGVtcGxhdGUgbm9kZS9mcmFnbWVudCBiZWZvcmUgdGhlIGluc3RhbmNlIGlzIGNyZWF0ZWQsXG5cdCAqIHNvIHRoZSBwcm9jZXNzZWQgZnJhZ21lbnQgY2FuIHRoZW4gYmUgY2xvbmVkIGFuZCByZXVzZWRcblx0ICogaW4gdi1mb3IuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcblx0ICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpIHtcblx0ICAvLyBleHRyYWN0IGNvbnRhaW5lciBhdHRyaWJ1dGVzIHRvIHBhc3MgdGhlbSBkb3duXG5cdCAgLy8gdG8gY29tcGlsZXIsIGJlY2F1c2UgdGhleSBuZWVkIHRvIGJlIGNvbXBpbGVkIGluXG5cdCAgLy8gcGFyZW50IHNjb3BlLiB3ZSBhcmUgbXV0YXRpbmcgdGhlIG9wdGlvbnMgb2JqZWN0IGhlcmVcblx0ICAvLyBhc3N1bWluZyB0aGUgc2FtZSBvYmplY3Qgd2lsbCBiZSB1c2VkIGZvciBjb21waWxlXG5cdCAgLy8gcmlnaHQgYWZ0ZXIgdGhpcy5cblx0ICBpZiAob3B0aW9ucykge1xuXHQgICAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBleHRyYWN0QXR0cnMoZWwpO1xuXHQgIH1cblx0ICAvLyBmb3IgdGVtcGxhdGUgdGFncywgd2hhdCB3ZSB3YW50IGlzIGl0cyBjb250ZW50IGFzXG5cdCAgLy8gYSBkb2N1bWVudEZyYWdtZW50IChmb3IgZnJhZ21lbnQgaW5zdGFuY2VzKVxuXHQgIGlmIChpc1RlbXBsYXRlKGVsKSkge1xuXHQgICAgZWwgPSBwYXJzZVRlbXBsYXRlKGVsKTtcblx0ICB9XG5cdCAgaWYgKG9wdGlvbnMpIHtcblx0ICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCAmJiAhb3B0aW9ucy50ZW1wbGF0ZSkge1xuXHQgICAgICBvcHRpb25zLnRlbXBsYXRlID0gJzxzbG90Pjwvc2xvdD4nO1xuXHQgICAgfVxuXHQgICAgaWYgKG9wdGlvbnMudGVtcGxhdGUpIHtcblx0ICAgICAgb3B0aW9ucy5fY29udGVudCA9IGV4dHJhY3RDb250ZW50KGVsKTtcblx0ICAgICAgZWwgPSB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpO1xuXHQgICAgfVxuXHQgIH1cblx0ICBpZiAoaXNGcmFnbWVudChlbCkpIHtcblx0ICAgIC8vIGFuY2hvcnMgZm9yIGZyYWdtZW50IGluc3RhbmNlXG5cdCAgICAvLyBwYXNzaW5nIGluIGBwZXJzaXN0OiB0cnVlYCB0byBhdm9pZCB0aGVtIGJlaW5nXG5cdCAgICAvLyBkaXNjYXJkZWQgYnkgSUUgZHVyaW5nIHRlbXBsYXRlIGNsb25pbmdcblx0ICAgIHByZXBlbmQoY3JlYXRlQW5jaG9yKCd2LXN0YXJ0JywgdHJ1ZSksIGVsKTtcblx0ICAgIGVsLmFwcGVuZENoaWxkKGNyZWF0ZUFuY2hvcigndi1lbmQnLCB0cnVlKSk7XG5cdCAgfVxuXHQgIHJldHVybiBlbDtcblx0fVxuXHRcblx0LyoqXG5cdCAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbi5cblx0ICogSWYgdGhlIHJlcGxhY2Ugb3B0aW9uIGlzIHRydWUgdGhpcyB3aWxsIHN3YXAgdGhlICRlbC5cblx0ICpcblx0ICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuXHQgKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKSB7XG5cdCAgdmFyIHRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcblx0ICB2YXIgZnJhZyA9IHBhcnNlVGVtcGxhdGUodGVtcGxhdGUsIHRydWUpO1xuXHQgIGlmIChmcmFnKSB7XG5cdCAgICB2YXIgcmVwbGFjZXIgPSBmcmFnLmZpcnN0Q2hpbGQ7XG5cdCAgICB2YXIgdGFnID0gcmVwbGFjZXIudGFnTmFtZSAmJiByZXBsYWNlci50YWdOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdCAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG5cdCAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgICBpZiAoZWwgPT09IGRvY3VtZW50LmJvZHkpIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1lvdSBhcmUgbW91bnRpbmcgYW4gaW5zdGFuY2Ugd2l0aCBhIHRlbXBsYXRlIHRvICcgKyAnPGJvZHk+LiBUaGlzIHdpbGwgcmVwbGFjZSA8Ym9keT4gZW50aXJlbHkuIFlvdSAnICsgJ3Nob3VsZCBwcm9iYWJseSB1c2UgYHJlcGxhY2U6IGZhbHNlYCBoZXJlLicpO1xuXHQgICAgICB9XG5cdCAgICAgIC8vIHRoZXJlIGFyZSBtYW55IGNhc2VzIHdoZXJlIHRoZSBpbnN0YW5jZSBtdXN0XG5cdCAgICAgIC8vIGJlY29tZSBhIGZyYWdtZW50IGluc3RhbmNlOiBiYXNpY2FsbHkgYW55dGhpbmcgdGhhdFxuXHQgICAgICAvLyBjYW4gY3JlYXRlIG1vcmUgdGhhbiAxIHJvb3Qgbm9kZXMuXG5cdCAgICAgIGlmIChcblx0ICAgICAgLy8gbXVsdGktY2hpbGRyZW4gdGVtcGxhdGVcblx0ICAgICAgZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA+IDEgfHxcblx0ICAgICAgLy8gbm9uLWVsZW1lbnQgdGVtcGxhdGVcblx0ICAgICAgcmVwbGFjZXIubm9kZVR5cGUgIT09IDEgfHxcblx0ICAgICAgLy8gc2luZ2xlIG5lc3RlZCBjb21wb25lbnRcblx0ICAgICAgdGFnID09PSAnY29tcG9uZW50JyB8fCByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpIHx8IGhhc0JpbmRBdHRyKHJlcGxhY2VyLCAnaXMnKSB8fFxuXHQgICAgICAvLyBlbGVtZW50IGRpcmVjdGl2ZVxuXHQgICAgICByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKSB8fFxuXHQgICAgICAvLyBmb3IgYmxvY2tcblx0ICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWZvcicpIHx8XG5cdCAgICAgIC8vIGlmIGJsb2NrXG5cdCAgICAgIHJlcGxhY2VyLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG5cdCAgICAgICAgcmV0dXJuIGZyYWc7XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IGV4dHJhY3RBdHRycyhyZXBsYWNlcik7XG5cdCAgICAgICAgbWVyZ2VBdHRycyhlbCwgcmVwbGFjZXIpO1xuXHQgICAgICAgIHJldHVybiByZXBsYWNlcjtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgZWwuYXBwZW5kQ2hpbGQoZnJhZyk7XG5cdCAgICAgIHJldHVybiBlbDtcblx0ICAgIH1cblx0ICB9IGVsc2Uge1xuXHQgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHRlbXBsYXRlIG9wdGlvbjogJyArIHRlbXBsYXRlKTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBIZWxwZXIgdG8gZXh0cmFjdCBhIGNvbXBvbmVudCBjb250YWluZXIncyBhdHRyaWJ1dGVzXG5cdCAqIGludG8gYSBwbGFpbiBvYmplY3QgYXJyYXkuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICogQHJldHVybiB7QXJyYXl9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdEF0dHJzKGVsKSB7XG5cdCAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGVsLmhhc0F0dHJpYnV0ZXMoKSkge1xuXHQgICAgcmV0dXJuIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogTWVyZ2UgdGhlIGF0dHJpYnV0ZXMgb2YgdHdvIGVsZW1lbnRzLCBhbmQgbWFrZSBzdXJlXG5cdCAqIHRoZSBjbGFzcyBuYW1lcyBhcmUgbWVyZ2VkIHByb3Blcmx5LlxuXHQgKlxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGZyb21cblx0ICogQHBhcmFtIHtFbGVtZW50fSB0b1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIG1lcmdlQXR0cnMoZnJvbSwgdG8pIHtcblx0ICB2YXIgYXR0cnMgPSBmcm9tLmF0dHJpYnV0ZXM7XG5cdCAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG5cdCAgdmFyIG5hbWUsIHZhbHVlO1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuXHQgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcblx0ICAgIGlmICghdG8uaGFzQXR0cmlidXRlKG5hbWUpICYmICFzcGVjaWFsQ2hhclJFLnRlc3QobmFtZSkpIHtcblx0ICAgICAgdG8uc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcblx0ICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiAhcGFyc2VUZXh0KHZhbHVlKSAmJiAodmFsdWUgPSB2YWx1ZS50cmltKCkpKSB7XG5cdCAgICAgIHZhbHVlLnNwbGl0KC9cXHMrLykuZm9yRWFjaChmdW5jdGlvbiAoY2xzKSB7XG5cdCAgICAgICAgYWRkQ2xhc3ModG8sIGNscyk7XG5cdCAgICAgIH0pO1xuXHQgICAgfVxuXHQgIH1cblx0fVxuXHRcblx0LyoqXG5cdCAqIFNjYW4gYW5kIGRldGVybWluZSBzbG90IGNvbnRlbnQgZGlzdHJpYnV0aW9uLlxuXHQgKiBXZSBkbyB0aGlzIGR1cmluZyB0cmFuc2NsdXNpb24gaW5zdGVhZCBhdCBjb21waWxlIHRpbWUgc28gdGhhdFxuXHQgKiB0aGUgZGlzdHJpYnV0aW9uIGlzIGRlY291cGxlZCBmcm9tIHRoZSBjb21waWxhdGlvbiBvcmRlciBvZlxuXHQgKiB0aGUgc2xvdHMuXG5cdCAqXG5cdCAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSB0ZW1wbGF0ZVxuXHQgKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRlbnRcblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gcmVzb2x2ZVNsb3RzKHZtLCBjb250ZW50KSB7XG5cdCAgaWYgKCFjb250ZW50KSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBjb250ZW50cyA9IHZtLl9zbG90Q29udGVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXHQgIHZhciBlbCwgbmFtZTtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGNvbnRlbnQuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICBlbCA9IGNvbnRlbnQuY2hpbGRyZW5baV07XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXHQgICAgaWYgKG5hbWUgPSBlbC5nZXRBdHRyaWJ1dGUoJ3Nsb3QnKSkge1xuXHQgICAgICAoY29udGVudHNbbmFtZV0gfHwgKGNvbnRlbnRzW25hbWVdID0gW10pKS5wdXNoKGVsKTtcblx0ICAgIH1cblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGdldEJpbmRBdHRyKGVsLCAnc2xvdCcpKSB7XG5cdCAgICAgIHdhcm4oJ1RoZSBcInNsb3RcIiBhdHRyaWJ1dGUgbXVzdCBiZSBzdGF0aWMuJywgdm0uJHBhcmVudCk7XG5cdCAgICB9XG5cdCAgfVxuXHQgIGZvciAobmFtZSBpbiBjb250ZW50cykge1xuXHQgICAgY29udGVudHNbbmFtZV0gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudHNbbmFtZV0sIGNvbnRlbnQpO1xuXHQgIH1cblx0ICBpZiAoY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgIHZhciBub2RlcyA9IGNvbnRlbnQuY2hpbGROb2Rlcztcblx0ICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEgJiYgbm9kZXNbMF0ubm9kZVR5cGUgPT09IDMgJiYgIW5vZGVzWzBdLmRhdGEudHJpbSgpKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0ICAgIGNvbnRlbnRzWydkZWZhdWx0J10gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudC5jaGlsZE5vZGVzLCBjb250ZW50KTtcblx0ICB9XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBFeHRyYWN0IHF1YWxpZmllZCBjb250ZW50IG5vZGVzIGZyb20gYSBub2RlIGxpc3QuXG5cdCAqXG5cdCAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVzXG5cdCAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gZXh0cmFjdEZyYWdtZW50KG5vZGVzLCBwYXJlbnQpIHtcblx0ICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblx0ICBub2RlcyA9IHRvQXJyYXkobm9kZXMpO1xuXHQgIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG5cdCAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuXHQgICAgaWYgKGlzVGVtcGxhdGUobm9kZSkgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWlmJykgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWZvcicpKSB7XG5cdCAgICAgIHBhcmVudC5yZW1vdmVDaGlsZChub2RlKTtcblx0ICAgICAgbm9kZSA9IHBhcnNlVGVtcGxhdGUobm9kZSwgdHJ1ZSk7XG5cdCAgICB9XG5cdCAgICBmcmFnLmFwcGVuZENoaWxkKG5vZGUpO1xuXHQgIH1cblx0ICByZXR1cm4gZnJhZztcblx0fVxuXHRcblx0XG5cdFxuXHR2YXIgY29tcGlsZXIgPSBPYmplY3QuZnJlZXplKHtcblx0XHRjb21waWxlOiBjb21waWxlLFxuXHRcdGNvbXBpbGVBbmRMaW5rUHJvcHM6IGNvbXBpbGVBbmRMaW5rUHJvcHMsXG5cdFx0Y29tcGlsZVJvb3Q6IGNvbXBpbGVSb290LFxuXHRcdHRyYW5zY2x1ZGU6IHRyYW5zY2x1ZGUsXG5cdFx0cmVzb2x2ZVNsb3RzOiByZXNvbHZlU2xvdHNcblx0fSk7XG5cdFxuXHRmdW5jdGlvbiBzdGF0ZU1peGluIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBBY2Nlc3NvciBmb3IgYCRkYXRhYCBwcm9wZXJ0eSwgc2luY2Ugc2V0dGluZyAkZGF0YVxuXHQgICAqIHJlcXVpcmVzIG9ic2VydmluZyB0aGUgbmV3IG9iamVjdCBhbmQgdXBkYXRpbmdcblx0ICAgKiBwcm94aWVkIHByb3BlcnRpZXMuXG5cdCAgICovXG5cdFxuXHQgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCB7XG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuX2RhdGE7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3RGF0YSkge1xuXHQgICAgICBpZiAobmV3RGF0YSAhPT0gdGhpcy5fZGF0YSkge1xuXHQgICAgICAgIHRoaXMuX3NldERhdGEobmV3RGF0YSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9KTtcblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgdGhlIHNjb3BlIG9mIGFuIGluc3RhbmNlLCB3aGljaCBjb250YWluczpcblx0ICAgKiAtIG9ic2VydmVkIGRhdGFcblx0ICAgKiAtIGNvbXB1dGVkIHByb3BlcnRpZXNcblx0ICAgKiAtIHVzZXIgbWV0aG9kc1xuXHQgICAqIC0gbWV0YSBwcm9wZXJ0aWVzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2luaXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHRoaXMuX2luaXRQcm9wcygpO1xuXHQgICAgdGhpcy5faW5pdE1ldGEoKTtcblx0ICAgIHRoaXMuX2luaXRNZXRob2RzKCk7XG5cdCAgICB0aGlzLl9pbml0RGF0YSgpO1xuXHQgICAgdGhpcy5faW5pdENvbXB1dGVkKCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSBwcm9wcy5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdFByb3BzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXHQgICAgdmFyIGVsID0gb3B0aW9ucy5lbDtcblx0ICAgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG5cdCAgICBpZiAocHJvcHMgJiYgIWVsKSB7XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignUHJvcHMgd2lsbCBub3QgYmUgY29tcGlsZWQgaWYgbm8gYGVsYCBvcHRpb24gaXMgJyArICdwcm92aWRlZCBhdCBpbnN0YW50aWF0aW9uLicsIHRoaXMpO1xuXHQgICAgfVxuXHQgICAgLy8gbWFrZSBzdXJlIHRvIGNvbnZlcnQgc3RyaW5nIHNlbGVjdG9ycyBpbnRvIGVsZW1lbnQgbm93XG5cdCAgICBlbCA9IG9wdGlvbnMuZWwgPSBxdWVyeShlbCk7XG5cdCAgICB0aGlzLl9wcm9wc1VubGlua0ZuID0gZWwgJiYgZWwubm9kZVR5cGUgPT09IDEgJiYgcHJvcHNcblx0ICAgIC8vIHByb3BzIG11c3QgYmUgbGlua2VkIGluIHByb3BlciBzY29wZSBpZiBpbnNpZGUgdi1mb3Jcblx0ICAgID8gY29tcGlsZUFuZExpbmtQcm9wcyh0aGlzLCBlbCwgcHJvcHMsIHRoaXMuX3Njb3BlKSA6IG51bGw7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSB0aGUgZGF0YS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdERhdGEgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgZGF0YUZuID0gdGhpcy4kb3B0aW9ucy5kYXRhO1xuXHQgICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhID0gZGF0YUZuID8gZGF0YUZuKCkgOiB7fTtcblx0ICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuXHQgICAgICBkYXRhID0ge307XG5cdCAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignZGF0YSBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuJywgdGhpcyk7XG5cdCAgICB9XG5cdCAgICB2YXIgcHJvcHMgPSB0aGlzLl9wcm9wcztcblx0ICAgIC8vIHByb3h5IGRhdGEgb24gaW5zdGFuY2Vcblx0ICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG5cdCAgICB2YXIgaSwga2V5O1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBrZXkgPSBrZXlzW2ldO1xuXHQgICAgICAvLyB0aGVyZSBhcmUgdHdvIHNjZW5hcmlvcyB3aGVyZSB3ZSBjYW4gcHJveHkgYSBkYXRhIGtleTpcblx0ICAgICAgLy8gMS4gaXQncyBub3QgYWxyZWFkeSBkZWZpbmVkIGFzIGEgcHJvcFxuXHQgICAgICAvLyAyLiBpdCdzIHByb3ZpZGVkIHZpYSBhIGluc3RhbnRpYXRpb24gb3B0aW9uIEFORCB0aGVyZSBhcmUgbm9cblx0ICAgICAgLy8gICAgdGVtcGxhdGUgcHJvcCBwcmVzZW50XG5cdCAgICAgIGlmICghcHJvcHMgfHwgIWhhc093bihwcm9wcywga2V5KSkge1xuXHQgICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XG5cdCAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgIHdhcm4oJ0RhdGEgZmllbGQgXCInICsga2V5ICsgJ1wiIGlzIGFscmVhZHkgZGVmaW5lZCAnICsgJ2FzIGEgcHJvcC4gVG8gcHJvdmlkZSBkZWZhdWx0IHZhbHVlIGZvciBhIHByb3AsIHVzZSB0aGUgXCJkZWZhdWx0XCIgJyArICdwcm9wIG9wdGlvbjsgaWYgeW91IHdhbnQgdG8gcGFzcyBwcm9wIHZhbHVlcyB0byBhbiBpbnN0YW50aWF0aW9uICcgKyAnY2FsbCwgdXNlIHRoZSBcInByb3BzRGF0YVwiIG9wdGlvbi4nLCB0aGlzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgLy8gb2JzZXJ2ZSBkYXRhXG5cdCAgICBvYnNlcnZlKGRhdGEsIHRoaXMpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFN3YXAgdGhlIGluc3RhbmNlJ3MgJGRhdGEuIENhbGxlZCBpbiAkZGF0YSdzIHNldHRlci5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBuZXdEYXRhXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX3NldERhdGEgPSBmdW5jdGlvbiAobmV3RGF0YSkge1xuXHQgICAgbmV3RGF0YSA9IG5ld0RhdGEgfHwge307XG5cdCAgICB2YXIgb2xkRGF0YSA9IHRoaXMuX2RhdGE7XG5cdCAgICB0aGlzLl9kYXRhID0gbmV3RGF0YTtcblx0ICAgIHZhciBrZXlzLCBrZXksIGk7XG5cdCAgICAvLyB1bnByb3h5IGtleXMgbm90IHByZXNlbnQgaW4gbmV3IGRhdGFcblx0ICAgIGtleXMgPSBPYmplY3Qua2V5cyhvbGREYXRhKTtcblx0ICAgIGkgPSBrZXlzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAga2V5ID0ga2V5c1tpXTtcblx0ICAgICAgaWYgKCEoa2V5IGluIG5ld0RhdGEpKSB7XG5cdCAgICAgICAgdGhpcy5fdW5wcm94eShrZXkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICAvLyBwcm94eSBrZXlzIG5vdCBhbHJlYWR5IHByb3hpZWQsXG5cdCAgICAvLyBhbmQgdHJpZ2dlciBjaGFuZ2UgZm9yIGNoYW5nZWQgdmFsdWVzXG5cdCAgICBrZXlzID0gT2JqZWN0LmtleXMobmV3RGF0YSk7XG5cdCAgICBpID0ga2V5cy5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGtleSA9IGtleXNbaV07XG5cdCAgICAgIGlmICghaGFzT3duKHRoaXMsIGtleSkpIHtcblx0ICAgICAgICAvLyBuZXcgcHJvcGVydHlcblx0ICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICBvbGREYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcblx0ICAgIG9ic2VydmUobmV3RGF0YSwgdGhpcyk7XG5cdCAgICB0aGlzLl9kaWdlc3QoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQcm94eSBhIHByb3BlcnR5LCBzbyB0aGF0XG5cdCAgICogdm0ucHJvcCA9PT0gdm0uX2RhdGEucHJvcFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcblx0ICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG5cdCAgICAgIC8vIG5lZWQgdG8gc3RvcmUgcmVmIHRvIHNlbGYgaGVyZVxuXHQgICAgICAvLyBiZWNhdXNlIHRoZXNlIGdldHRlci9zZXR0ZXJzIG1pZ2h0XG5cdCAgICAgIC8vIGJlIGNhbGxlZCBieSBjaGlsZCBzY29wZXMgdmlhXG5cdCAgICAgIC8vIHByb3RvdHlwZSBpbmhlcml0YW5jZS5cblx0ICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwga2V5LCB7XG5cdCAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuXHQgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgZ2V0OiBmdW5jdGlvbiBwcm94eUdldHRlcigpIHtcblx0ICAgICAgICAgIHJldHVybiBzZWxmLl9kYXRhW2tleV07XG5cdCAgICAgICAgfSxcblx0ICAgICAgICBzZXQ6IGZ1bmN0aW9uIHByb3h5U2V0dGVyKHZhbCkge1xuXHQgICAgICAgICAgc2VsZi5fZGF0YVtrZXldID0gdmFsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVW5wcm94eSBhIHByb3BlcnR5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl91bnByb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcblx0ICAgICAgZGVsZXRlIHRoaXNba2V5XTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBGb3JjZSB1cGRhdGUgb24gZXZlcnkgd2F0Y2hlciBpbiBzY29wZS5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udXBkYXRlKHRydWUpOyAvLyBzaGFsbG93IHVwZGF0ZXNcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCBjb21wdXRlZCBwcm9wZXJ0aWVzLiBUaGV5IGFyZSBlc3NlbnRpYWxseVxuXHQgICAqIHNwZWNpYWwgZ2V0dGVyL3NldHRlcnNcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gbm9vcCgpIHt9XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdENvbXB1dGVkID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGNvbXB1dGVkID0gdGhpcy4kb3B0aW9ucy5jb21wdXRlZDtcblx0ICAgIGlmIChjb21wdXRlZCkge1xuXHQgICAgICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcblx0ICAgICAgICB2YXIgdXNlckRlZiA9IGNvbXB1dGVkW2tleV07XG5cdCAgICAgICAgdmFyIGRlZiA9IHtcblx0ICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG5cdCAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcblx0ICAgICAgICB9O1xuXHQgICAgICAgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgICAgICAgZGVmLmdldCA9IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLCB0aGlzKTtcblx0ICAgICAgICAgIGRlZi5zZXQgPSBub29wO1xuXHQgICAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgICBkZWYuZ2V0ID0gdXNlckRlZi5nZXQgPyB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZSA/IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLmdldCwgdGhpcykgOiBiaW5kKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IG5vb3A7XG5cdCAgICAgICAgICBkZWYuc2V0ID0gdXNlckRlZi5zZXQgPyBiaW5kKHVzZXJEZWYuc2V0LCB0aGlzKSA6IG5vb3A7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIGRlZik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICBmdW5jdGlvbiBtYWtlQ29tcHV0ZWRHZXR0ZXIoZ2V0dGVyLCBvd25lcikge1xuXHQgICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcihvd25lciwgZ2V0dGVyLCBudWxsLCB7XG5cdCAgICAgIGxhenk6IHRydWVcblx0ICAgIH0pO1xuXHQgICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyKCkge1xuXHQgICAgICBpZiAod2F0Y2hlci5kaXJ0eSkge1xuXHQgICAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKTtcblx0ICAgICAgfVxuXHQgICAgICBpZiAoRGVwLnRhcmdldCkge1xuXHQgICAgICAgIHdhdGNoZXIuZGVwZW5kKCk7XG5cdCAgICAgIH1cblx0ICAgICAgcmV0dXJuIHdhdGNoZXIudmFsdWU7XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgaW5zdGFuY2UgbWV0aG9kcy4gTWV0aG9kcyBtdXN0IGJlIGJvdW5kIHRvIHRoZVxuXHQgICAqIGluc3RhbmNlIHNpbmNlIHRoZXkgbWlnaHQgYmUgcGFzc2VkIGRvd24gYXMgYSBwcm9wIHRvXG5cdCAgICogY2hpbGQgY29tcG9uZW50cy5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGhvZHMgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgbWV0aG9kcyA9IHRoaXMuJG9wdGlvbnMubWV0aG9kcztcblx0ICAgIGlmIChtZXRob2RzKSB7XG5cdCAgICAgIGZvciAodmFyIGtleSBpbiBtZXRob2RzKSB7XG5cdCAgICAgICAgdGhpc1trZXldID0gYmluZChtZXRob2RzW2tleV0sIHRoaXMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSBtZXRhIGluZm9ybWF0aW9uIGxpa2UgJGluZGV4LCAka2V5ICYgJHZhbHVlLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0TWV0YSA9IGZ1bmN0aW9uICgpIHtcblx0ICAgIHZhciBtZXRhcyA9IHRoaXMuJG9wdGlvbnMuX21ldGE7XG5cdCAgICBpZiAobWV0YXMpIHtcblx0ICAgICAgZm9yICh2YXIga2V5IGluIG1ldGFzKSB7XG5cdCAgICAgICAgZGVmaW5lUmVhY3RpdmUodGhpcywga2V5LCBtZXRhc1trZXldKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBldmVudFJFID0gL152LW9uOnxeQC87XG5cdFxuXHRmdW5jdGlvbiBldmVudHNNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogU2V0dXAgdGhlIGluc3RhbmNlJ3Mgb3B0aW9uIGV2ZW50cyAmIHdhdGNoZXJzLlxuXHQgICAqIElmIHRoZSB2YWx1ZSBpcyBhIHN0cmluZywgd2UgcHVsbCBpdCBmcm9tIHRoZVxuXHQgICAqIGluc3RhbmNlJ3MgbWV0aG9kcyBieSBuYW1lLlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9pbml0RXZlbnRzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuXHQgICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG5cdCAgICAgIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHRoaXMsIG9wdGlvbnMuZWwpO1xuXHQgICAgfVxuXHQgICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyRvbicsIG9wdGlvbnMuZXZlbnRzKTtcblx0ICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckd2F0Y2gnLCBvcHRpb25zLndhdGNoKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBSZWdpc3RlciB2LW9uIGV2ZW50cyBvbiBhIGNoaWxkIGNvbXBvbmVudFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh2bSwgZWwpIHtcblx0ICAgIHZhciBhdHRycyA9IGVsLmF0dHJpYnV0ZXM7XG5cdCAgICB2YXIgbmFtZSwgdmFsdWUsIGhhbmRsZXI7XG5cdCAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcblx0ICAgICAgaWYgKGV2ZW50UkUudGVzdChuYW1lKSkge1xuXHQgICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZXZlbnRSRSwgJycpO1xuXHQgICAgICAgIC8vIGZvcmNlIHRoZSBleHByZXNzaW9uIGludG8gYSBzdGF0ZW1lbnQgc28gdGhhdFxuXHQgICAgICAgIC8vIGl0IGFsd2F5cyBkeW5hbWljYWxseSByZXNvbHZlcyB0aGUgbWV0aG9kIHRvIGNhbGwgKCMyNjcwKVxuXHQgICAgICAgIC8vIGtpbmRhIHVnbHkgaGFjaywgYnV0IGRvZXMgdGhlIGpvYi5cblx0ICAgICAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuXHQgICAgICAgIGlmIChpc1NpbXBsZVBhdGgodmFsdWUpKSB7XG5cdCAgICAgICAgICB2YWx1ZSArPSAnLmFwcGx5KHRoaXMsICRhcmd1bWVudHMpJztcblx0ICAgICAgICB9XG5cdCAgICAgICAgaGFuZGxlciA9ICh2bS5fc2NvcGUgfHwgdm0uX2NvbnRleHQpLiRldmFsKHZhbHVlLCB0cnVlKTtcblx0ICAgICAgICBoYW5kbGVyLl9mcm9tUGFyZW50ID0gdHJ1ZTtcblx0ICAgICAgICB2bS4kb24obmFtZS5yZXBsYWNlKGV2ZW50UkUpLCBoYW5kbGVyKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVnaXN0ZXIgY2FsbGJhY2tzIGZvciBvcHRpb24gZXZlbnRzIGFuZCB3YXRjaGVycy5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cblx0ICAgKiBAcGFyYW0ge09iamVjdH0gaGFzaFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWdpc3RlckNhbGxiYWNrcyh2bSwgYWN0aW9uLCBoYXNoKSB7XG5cdCAgICBpZiAoIWhhc2gpIHJldHVybjtcblx0ICAgIHZhciBoYW5kbGVycywga2V5LCBpLCBqO1xuXHQgICAgZm9yIChrZXkgaW4gaGFzaCkge1xuXHQgICAgICBoYW5kbGVycyA9IGhhc2hba2V5XTtcblx0ICAgICAgaWYgKGlzQXJyYXkoaGFuZGxlcnMpKSB7XG5cdCAgICAgICAgZm9yIChpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHQgICAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyc1tpXSk7XG5cdCAgICAgICAgfVxuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnMpO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBIZWxwZXIgdG8gcmVnaXN0ZXIgYW4gZXZlbnQvd2F0Y2ggY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm1cblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb258U3RyaW5nfE9iamVjdH0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLCBvcHRpb25zKSB7XG5cdCAgICB2YXIgdHlwZSA9IHR5cGVvZiBoYW5kbGVyO1xuXHQgICAgaWYgKHR5cGUgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgdm1bYWN0aW9uXShrZXksIGhhbmRsZXIsIG9wdGlvbnMpO1xuXHQgICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuXHQgICAgICB2YXIgbWV0aG9kcyA9IHZtLiRvcHRpb25zLm1ldGhvZHM7XG5cdCAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzICYmIG1ldGhvZHNbaGFuZGxlcl07XG5cdCAgICAgIGlmIChtZXRob2QpIHtcblx0ICAgICAgICB2bVthY3Rpb25dKGtleSwgbWV0aG9kLCBvcHRpb25zKTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Vua25vd24gbWV0aG9kOiBcIicgKyBoYW5kbGVyICsgJ1wiIHdoZW4gJyArICdyZWdpc3RlcmluZyBjYWxsYmFjayBmb3IgJyArIGFjdGlvbiArICc6IFwiJyArIGtleSArICdcIi4nLCB2bSk7XG5cdCAgICAgIH1cblx0ICAgIH0gZWxzZSBpZiAoaGFuZGxlciAmJiB0eXBlID09PSAnb2JqZWN0Jykge1xuXHQgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIuaGFuZGxlciwgaGFuZGxlcik7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBTZXR1cCByZWN1cnNpdmUgYXR0YWNoZWQvZGV0YWNoZWQgY2FsbHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdERPTUhvb2tzID0gZnVuY3Rpb24gKCkge1xuXHQgICAgdGhpcy4kb24oJ2hvb2s6YXR0YWNoZWQnLCBvbkF0dGFjaGVkKTtcblx0ICAgIHRoaXMuJG9uKCdob29rOmRldGFjaGVkJywgb25EZXRhY2hlZCk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBhdHRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG9uQXR0YWNoZWQoKSB7XG5cdCAgICBpZiAoIXRoaXMuX2lzQXR0YWNoZWQpIHtcblx0ICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG5cdCAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbEF0dGFjaCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBJdGVyYXRvciB0byBjYWxsIGF0dGFjaGVkIGhvb2tcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYWxsQXR0YWNoKGNoaWxkKSB7XG5cdCAgICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBkZXRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIG9uRGV0YWNoZWQoKSB7XG5cdCAgICBpZiAodGhpcy5faXNBdHRhY2hlZCkge1xuXHQgICAgICB0aGlzLl9pc0F0dGFjaGVkID0gZmFsc2U7XG5cdCAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbERldGFjaCk7XG5cdCAgICB9XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBJdGVyYXRvciB0byBjYWxsIGRldGFjaGVkIGhvb2tcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjYWxsRGV0YWNoKGNoaWxkKSB7XG5cdCAgICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcblx0ICAgICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuXHQgICAgfVxuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogVHJpZ2dlciBhbGwgaGFuZGxlcnMgZm9yIGEgaG9va1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IGhvb2tcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuXHQgICAgdGhpcy4kZW1pdCgncHJlLWhvb2s6JyArIGhvb2spO1xuXHQgICAgdmFyIGhhbmRsZXJzID0gdGhpcy4kb3B0aW9uc1tob29rXTtcblx0ICAgIGlmIChoYW5kbGVycykge1xuXHQgICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuXHQgICAgICAgIGhhbmRsZXJzW2ldLmNhbGwodGhpcyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHRoaXMuJGVtaXQoJ2hvb2s6JyArIGhvb2spO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG5vb3AkMSgpIHt9XG5cdFxuXHQvKipcblx0ICogQSBkaXJlY3RpdmUgbGlua3MgYSBET00gZWxlbWVudCB3aXRoIGEgcGllY2Ugb2YgZGF0YSxcblx0ICogd2hpY2ggaXMgdGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIGFuIGV4cHJlc3Npb24uXG5cdCAqIEl0IHJlZ2lzdGVycyBhIHdhdGNoZXIgd2l0aCB0aGUgZXhwcmVzc2lvbiBhbmQgY2FsbHNcblx0ICogdGhlIERPTSB1cGRhdGUgZnVuY3Rpb24gd2hlbiBhIGNoYW5nZSBpcyB0cmlnZ2VyZWQuXG5cdCAqXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IG5hbWVcblx0ICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gZGVmXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGV4cHJlc3Npb25cblx0ICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtmaWx0ZXJzXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuXHQgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGl0ZXJhbFxuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhdHRyXG5cdCAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGFyZ1xuXHQgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSByYXdcblx0ICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gW3JlZl1cblx0ICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtpbnRlcnBdXG5cdCAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaGFzT25lVGltZV1cblx0ICogQHBhcmFtIHtWdWV9IHZtXG5cdCAqIEBwYXJhbSB7Tm9kZX0gZWxcblx0ICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuXHQgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG5cdCAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG5cdCAqIEBjb25zdHJ1Y3RvclxuXHQgKi9cblx0ZnVuY3Rpb24gRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICB0aGlzLnZtID0gdm07XG5cdCAgdGhpcy5lbCA9IGVsO1xuXHQgIC8vIGNvcHkgZGVzY3JpcHRvciBwcm9wZXJ0aWVzXG5cdCAgdGhpcy5kZXNjcmlwdG9yID0gZGVzY3JpcHRvcjtcblx0ICB0aGlzLm5hbWUgPSBkZXNjcmlwdG9yLm5hbWU7XG5cdCAgdGhpcy5leHByZXNzaW9uID0gZGVzY3JpcHRvci5leHByZXNzaW9uO1xuXHQgIHRoaXMuYXJnID0gZGVzY3JpcHRvci5hcmc7XG5cdCAgdGhpcy5tb2RpZmllcnMgPSBkZXNjcmlwdG9yLm1vZGlmaWVycztcblx0ICB0aGlzLmZpbHRlcnMgPSBkZXNjcmlwdG9yLmZpbHRlcnM7XG5cdCAgdGhpcy5saXRlcmFsID0gdGhpcy5tb2RpZmllcnMgJiYgdGhpcy5tb2RpZmllcnMubGl0ZXJhbDtcblx0ICAvLyBwcml2YXRlXG5cdCAgdGhpcy5fbG9ja2VkID0gZmFsc2U7XG5cdCAgdGhpcy5fYm91bmQgPSBmYWxzZTtcblx0ICB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuXHQgIC8vIGxpbmsgY29udGV4dFxuXHQgIHRoaXMuX2hvc3QgPSBob3N0O1xuXHQgIHRoaXMuX3Njb3BlID0gc2NvcGU7XG5cdCAgdGhpcy5fZnJhZyA9IGZyYWc7XG5cdCAgLy8gc3RvcmUgZGlyZWN0aXZlcyBvbiBub2RlIGluIGRldiBtb2RlXG5cdCAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuXHQgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgPSB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyB8fCBbXTtcblx0ICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLnB1c2godGhpcyk7XG5cdCAgfVxuXHR9XG5cdFxuXHQvKipcblx0ICogSW5pdGlhbGl6ZSB0aGUgZGlyZWN0aXZlLCBtaXhpbiBkZWZpbml0aW9uIHByb3BlcnRpZXMsXG5cdCAqIHNldHVwIHRoZSB3YXRjaGVyLCBjYWxsIGRlZmluaXRpb24gYmluZCgpIGFuZCB1cGRhdGUoKVxuXHQgKiBpZiBwcmVzZW50LlxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX2JpbmQgPSBmdW5jdGlvbiAoKSB7XG5cdCAgdmFyIG5hbWUgPSB0aGlzLm5hbWU7XG5cdCAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG5cdFxuXHQgIC8vIHJlbW92ZSBhdHRyaWJ1dGVcblx0ICBpZiAoKG5hbWUgIT09ICdjbG9haycgfHwgdGhpcy52bS5faXNDb21waWxlZCkgJiYgdGhpcy5lbCAmJiB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSkge1xuXHQgICAgdmFyIGF0dHIgPSBkZXNjcmlwdG9yLmF0dHIgfHwgJ3YtJyArIG5hbWU7XG5cdCAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcblx0ICB9XG5cdFxuXHQgIC8vIGNvcHkgZGVmIHByb3BlcnRpZXNcblx0ICB2YXIgZGVmID0gZGVzY3JpcHRvci5kZWY7XG5cdCAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIHRoaXMudXBkYXRlID0gZGVmO1xuXHQgIH0gZWxzZSB7XG5cdCAgICBleHRlbmQodGhpcywgZGVmKTtcblx0ICB9XG5cdFxuXHQgIC8vIHNldHVwIGRpcmVjdGl2ZSBwYXJhbXNcblx0ICB0aGlzLl9zZXR1cFBhcmFtcygpO1xuXHRcblx0ICAvLyBpbml0aWFsIGJpbmRcblx0ICBpZiAodGhpcy5iaW5kKSB7XG5cdCAgICB0aGlzLmJpbmQoKTtcblx0ICB9XG5cdCAgdGhpcy5fYm91bmQgPSB0cnVlO1xuXHRcblx0ICBpZiAodGhpcy5saXRlcmFsKSB7XG5cdCAgICB0aGlzLnVwZGF0ZSAmJiB0aGlzLnVwZGF0ZShkZXNjcmlwdG9yLnJhdyk7XG5cdCAgfSBlbHNlIGlmICgodGhpcy5leHByZXNzaW9uIHx8IHRoaXMubW9kaWZpZXJzKSAmJiAodGhpcy51cGRhdGUgfHwgdGhpcy50d29XYXkpICYmICF0aGlzLl9jaGVja1N0YXRlbWVudCgpKSB7XG5cdCAgICAvLyB3cmFwcGVkIHVwZGF0ZXIgZm9yIGNvbnRleHRcblx0ICAgIHZhciBkaXIgPSB0aGlzO1xuXHQgICAgaWYgKHRoaXMudXBkYXRlKSB7XG5cdCAgICAgIHRoaXMuX3VwZGF0ZSA9IGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuXHQgICAgICAgIGlmICghZGlyLl9sb2NrZWQpIHtcblx0ICAgICAgICAgIGRpci51cGRhdGUodmFsLCBvbGRWYWwpO1xuXHQgICAgICAgIH1cblx0ICAgICAgfTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuX3VwZGF0ZSA9IG5vb3AkMTtcblx0ICAgIH1cblx0ICAgIHZhciBwcmVQcm9jZXNzID0gdGhpcy5fcHJlUHJvY2VzcyA/IGJpbmQodGhpcy5fcHJlUHJvY2VzcywgdGhpcykgOiBudWxsO1xuXHQgICAgdmFyIHBvc3RQcm9jZXNzID0gdGhpcy5fcG9zdFByb2Nlc3MgPyBiaW5kKHRoaXMuX3Bvc3RQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG5cdCAgICB2YXIgd2F0Y2hlciA9IHRoaXMuX3dhdGNoZXIgPSBuZXcgV2F0Y2hlcih0aGlzLnZtLCB0aGlzLmV4cHJlc3Npb24sIHRoaXMuX3VwZGF0ZSwgLy8gY2FsbGJhY2tcblx0ICAgIHtcblx0ICAgICAgZmlsdGVyczogdGhpcy5maWx0ZXJzLFxuXHQgICAgICB0d29XYXk6IHRoaXMudHdvV2F5LFxuXHQgICAgICBkZWVwOiB0aGlzLmRlZXAsXG5cdCAgICAgIHByZVByb2Nlc3M6IHByZVByb2Nlc3MsXG5cdCAgICAgIHBvc3RQcm9jZXNzOiBwb3N0UHJvY2Vzcyxcblx0ICAgICAgc2NvcGU6IHRoaXMuX3Njb3BlXG5cdCAgICB9KTtcblx0ICAgIC8vIHYtbW9kZWwgd2l0aCBpbml0YWwgaW5saW5lIHZhbHVlIG5lZWQgdG8gc3luYyBiYWNrIHRvXG5cdCAgICAvLyBtb2RlbCBpbnN0ZWFkIG9mIHVwZGF0ZSB0byBET00gb24gaW5pdC4gVGhleSB3b3VsZFxuXHQgICAgLy8gc2V0IHRoZSBhZnRlckJpbmQgaG9vayB0byBpbmRpY2F0ZSB0aGF0LlxuXHQgICAgaWYgKHRoaXMuYWZ0ZXJCaW5kKSB7XG5cdCAgICAgIHRoaXMuYWZ0ZXJCaW5kKCk7XG5cdCAgICB9IGVsc2UgaWYgKHRoaXMudXBkYXRlKSB7XG5cdCAgICAgIHRoaXMudXBkYXRlKHdhdGNoZXIudmFsdWUpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdC8qKlxuXHQgKiBTZXR1cCBhbGwgcGFyYW0gYXR0cmlidXRlcywgZS5nLiB0cmFjay1ieSxcblx0ICogdHJhbnNpdGlvbi1tb2RlLCBldGMuLi5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtcyA9IGZ1bmN0aW9uICgpIHtcblx0ICBpZiAoIXRoaXMucGFyYW1zKSB7XG5cdCAgICByZXR1cm47XG5cdCAgfVxuXHQgIHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcztcblx0ICAvLyBzd2FwIHRoZSBwYXJhbXMgYXJyYXkgd2l0aCBhIGZyZXNoIG9iamVjdC5cblx0ICB0aGlzLnBhcmFtcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdCAgdmFyIGkgPSBwYXJhbXMubGVuZ3RoO1xuXHQgIHZhciBrZXksIHZhbCwgbWFwcGVkS2V5O1xuXHQgIHdoaWxlIChpLS0pIHtcblx0ICAgIGtleSA9IGh5cGhlbmF0ZShwYXJhbXNbaV0pO1xuXHQgICAgbWFwcGVkS2V5ID0gY2FtZWxpemUoa2V5KTtcblx0ICAgIHZhbCA9IGdldEJpbmRBdHRyKHRoaXMuZWwsIGtleSk7XG5cdCAgICBpZiAodmFsICE9IG51bGwpIHtcblx0ICAgICAgLy8gZHluYW1pY1xuXHQgICAgICB0aGlzLl9zZXR1cFBhcmFtV2F0Y2hlcihtYXBwZWRLZXksIHZhbCk7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBzdGF0aWNcblx0ICAgICAgdmFsID0gZ2V0QXR0cih0aGlzLmVsLCBrZXkpO1xuXHQgICAgICBpZiAodmFsICE9IG51bGwpIHtcblx0ICAgICAgICB0aGlzLnBhcmFtc1ttYXBwZWRLZXldID0gdmFsID09PSAnJyA/IHRydWUgOiB2YWw7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogU2V0dXAgYSB3YXRjaGVyIGZvciBhIGR5bmFtaWMgcGFyYW0uXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV4cHJlc3Npb25cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl9zZXR1cFBhcmFtV2F0Y2hlciA9IGZ1bmN0aW9uIChrZXksIGV4cHJlc3Npb24pIHtcblx0ICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuXHQgIHZhciB1bndhdGNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiR3YXRjaChleHByZXNzaW9uLCBmdW5jdGlvbiAodmFsLCBvbGRWYWwpIHtcblx0ICAgIHNlbGYucGFyYW1zW2tleV0gPSB2YWw7XG5cdCAgICAvLyBzaW5jZSB3ZSBhcmUgaW4gaW1tZWRpYXRlIG1vZGUsXG5cdCAgICAvLyBvbmx5IGNhbGwgdGhlIHBhcmFtIGNoYW5nZSBjYWxsYmFja3MgaWYgdGhpcyBpcyBub3QgdGhlIGZpcnN0IHVwZGF0ZS5cblx0ICAgIGlmIChjYWxsZWQpIHtcblx0ICAgICAgdmFyIGNiID0gc2VsZi5wYXJhbVdhdGNoZXJzICYmIHNlbGYucGFyYW1XYXRjaGVyc1trZXldO1xuXHQgICAgICBpZiAoY2IpIHtcblx0ICAgICAgICBjYi5jYWxsKHNlbGYsIHZhbCwgb2xkVmFsKTtcblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgY2FsbGVkID0gdHJ1ZTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBpbW1lZGlhdGU6IHRydWUsXG5cdCAgICB1c2VyOiBmYWxzZVxuXHQgIH0pOyh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgfHwgKHRoaXMuX3BhcmFtVW53YXRjaEZucyA9IFtdKSkucHVzaCh1bndhdGNoKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBDaGVjayBpZiB0aGUgZGlyZWN0aXZlIGlzIGEgZnVuY3Rpb24gY2FsbGVyXG5cdCAqIGFuZCBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIGNhbGxhYmxlIG9uZS4gSWYgYm90aCB0cnVlLFxuXHQgKiB3ZSB3cmFwIHVwIHRoZSBleHByZXNzaW9uIGFuZCB1c2UgaXQgYXMgdGhlIGV2ZW50XG5cdCAqIGhhbmRsZXIuXG5cdCAqXG5cdCAqIGUuZy4gb24tY2xpY2s9XCJhKytcIlxuXHQgKlxuXHQgKiBAcmV0dXJuIHtCb29sZWFufVxuXHQgKi9cblx0XG5cdERpcmVjdGl2ZS5wcm90b3R5cGUuX2NoZWNrU3RhdGVtZW50ID0gZnVuY3Rpb24gKCkge1xuXHQgIHZhciBleHByZXNzaW9uID0gdGhpcy5leHByZXNzaW9uO1xuXHQgIGlmIChleHByZXNzaW9uICYmIHRoaXMuYWNjZXB0U3RhdGVtZW50ICYmICFpc1NpbXBsZVBhdGgoZXhwcmVzc2lvbikpIHtcblx0ICAgIHZhciBmbiA9IHBhcnNlRXhwcmVzc2lvbihleHByZXNzaW9uKS5nZXQ7XG5cdCAgICB2YXIgc2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuXHQgICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGUpIHtcblx0ICAgICAgc2NvcGUuJGV2ZW50ID0gZTtcblx0ICAgICAgZm4uY2FsbChzY29wZSwgc2NvcGUpO1xuXHQgICAgICBzY29wZS4kZXZlbnQgPSBudWxsO1xuXHQgICAgfTtcblx0ICAgIGlmICh0aGlzLmZpbHRlcnMpIHtcblx0ICAgICAgaGFuZGxlciA9IHNjb3BlLl9hcHBseUZpbHRlcnMoaGFuZGxlciwgbnVsbCwgdGhpcy5maWx0ZXJzKTtcblx0ICAgIH1cblx0ICAgIHRoaXMudXBkYXRlKGhhbmRsZXIpO1xuXHQgICAgcmV0dXJuIHRydWU7XG5cdCAgfVxuXHR9O1xuXHRcblx0LyoqXG5cdCAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG5cdCAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0d28td2F5IGRpcmVjdGl2ZXNcblx0ICogZS5nLiB2LW1vZGVsLlxuXHQgKlxuXHQgKiBAcGFyYW0geyp9IHZhbHVlXG5cdCAqIEBwdWJsaWNcblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuXHQgIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG5cdCAgaWYgKHRoaXMudHdvV2F5KSB7XG5cdCAgICB0aGlzLl93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG5cdCAgICAgIHRoaXMuX3dhdGNoZXIuc2V0KHZhbHVlKTtcblx0ICAgIH0pO1xuXHQgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgd2FybignRGlyZWN0aXZlLnNldCgpIGNhbiBvbmx5IGJlIHVzZWQgaW5zaWRlIHR3b1dheScgKyAnZGlyZWN0aXZlcy4nKTtcblx0ICB9XG5cdH07XG5cdFxuXHQvKipcblx0ICogRXhlY3V0ZSBhIGZ1bmN0aW9uIHdoaWxlIHByZXZlbnRpbmcgdGhhdCBmdW5jdGlvbiBmcm9tXG5cdCAqIHRyaWdnZXJpbmcgdXBkYXRlcyBvbiB0aGlzIGRpcmVjdGl2ZSBpbnN0YW5jZS5cblx0ICpcblx0ICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLl93aXRoTG9jayA9IGZ1bmN0aW9uIChmbikge1xuXHQgIHZhciBzZWxmID0gdGhpcztcblx0ICBzZWxmLl9sb2NrZWQgPSB0cnVlO1xuXHQgIGZuLmNhbGwoc2VsZik7XG5cdCAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuXHQgICAgc2VsZi5fbG9ja2VkID0gZmFsc2U7XG5cdCAgfSk7XG5cdH07XG5cdFxuXHQvKipcblx0ICogQ29udmVuaWVuY2UgbWV0aG9kIHRoYXQgYXR0YWNoZXMgYSBET00gZXZlbnQgbGlzdGVuZXJcblx0ICogdG8gdGhlIGRpcmVjdGl2ZSBlbGVtZW50IGFuZCBhdXRvbWV0aWNhbGx5IHRlYXJzIGl0IGRvd25cblx0ICogZHVyaW5nIHVuYmluZC5cblx0ICpcblx0ICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG5cdCAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcblx0ICogQHBhcmFtIHtCb29sZWFufSBbdXNlQ2FwdHVyZV1cblx0ICovXG5cdFxuXHREaXJlY3RpdmUucHJvdG90eXBlLm9uID0gZnVuY3Rpb24gKGV2ZW50LCBoYW5kbGVyLCB1c2VDYXB0dXJlKSB7XG5cdCAgb24odGhpcy5lbCwgZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpOyh0aGlzLl9saXN0ZW5lcnMgfHwgKHRoaXMuX2xpc3RlbmVycyA9IFtdKSkucHVzaChbZXZlbnQsIGhhbmRsZXJdKTtcblx0fTtcblx0XG5cdC8qKlxuXHQgKiBUZWFyZG93biB0aGUgd2F0Y2hlciBhbmQgY2FsbCB1bmJpbmQuXG5cdCAqL1xuXHRcblx0RGlyZWN0aXZlLnByb3RvdHlwZS5fdGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG5cdCAgaWYgKHRoaXMuX2JvdW5kKSB7XG5cdCAgICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuXHQgICAgaWYgKHRoaXMudW5iaW5kKSB7XG5cdCAgICAgIHRoaXMudW5iaW5kKCk7XG5cdCAgICB9XG5cdCAgICBpZiAodGhpcy5fd2F0Y2hlcikge1xuXHQgICAgICB0aGlzLl93YXRjaGVyLnRlYXJkb3duKCk7XG5cdCAgICB9XG5cdCAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuXHQgICAgdmFyIGk7XG5cdCAgICBpZiAobGlzdGVuZXJzKSB7XG5cdCAgICAgIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuXHQgICAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgICAgb2ZmKHRoaXMuZWwsIGxpc3RlbmVyc1tpXVswXSwgbGlzdGVuZXJzW2ldWzFdKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgdmFyIHVud2F0Y2hGbnMgPSB0aGlzLl9wYXJhbVVud2F0Y2hGbnM7XG5cdCAgICBpZiAodW53YXRjaEZucykge1xuXHQgICAgICBpID0gdW53YXRjaEZucy5sZW5ndGg7XG5cdCAgICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgICB1bndhdGNoRm5zW2ldKCk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcblx0ICAgICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMuJHJlbW92ZSh0aGlzKTtcblx0ICAgIH1cblx0ICAgIHRoaXMudm0gPSB0aGlzLmVsID0gdGhpcy5fd2F0Y2hlciA9IHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG5cdCAgfVxuXHR9O1xuXHRcblx0ZnVuY3Rpb24gbGlmZWN5Y2xlTWl4aW4gKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFVwZGF0ZSB2LXJlZiBmb3IgY29tcG9uZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5fdXBkYXRlUmVmID0gZnVuY3Rpb24gKHJlbW92ZSkge1xuXHQgICAgdmFyIHJlZiA9IHRoaXMuJG9wdGlvbnMuX3JlZjtcblx0ICAgIGlmIChyZWYpIHtcblx0ICAgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy5fY29udGV4dCkuJHJlZnM7XG5cdCAgICAgIGlmIChyZW1vdmUpIHtcblx0ICAgICAgICBpZiAocmVmc1tyZWZdID09PSB0aGlzKSB7XG5cdCAgICAgICAgICByZWZzW3JlZl0gPSBudWxsO1xuXHQgICAgICAgIH1cblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICByZWZzW3JlZl0gPSB0aGlzO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogVHJhbnNjbHVkZSwgY29tcGlsZSBhbmQgbGluayBlbGVtZW50LlxuXHQgICAqXG5cdCAgICogSWYgYSBwcmUtY29tcGlsZWQgbGlua2VyIGlzIGF2YWlsYWJsZSwgdGhhdCBtZWFucyB0aGVcblx0ICAgKiBwYXNzZWQgaW4gZWxlbWVudCB3aWxsIGJlIHByZS10cmFuc2NsdWRlZCBhbmQgY29tcGlsZWRcblx0ICAgKiBhcyB3ZWxsIC0gYWxsIHdlIG5lZWQgdG8gZG8gaXMgdG8gY2FsbCB0aGUgbGlua2VyLlxuXHQgICAqXG5cdCAgICogT3RoZXJ3aXNlIHdlIG5lZWQgdG8gY2FsbCB0cmFuc2NsdWRlL2NvbXBpbGUvbGluayBoZXJlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9jb21waWxlID0gZnVuY3Rpb24gKGVsKSB7XG5cdCAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cdFxuXHQgICAgLy8gdHJhbnNjbHVkZSBhbmQgaW5pdCBlbGVtZW50XG5cdCAgICAvLyB0cmFuc2NsdWRlIGNhbiBwb3RlbnRpYWxseSByZXBsYWNlIG9yaWdpbmFsXG5cdCAgICAvLyBzbyB3ZSBuZWVkIHRvIGtlZXAgcmVmZXJlbmNlOyB0aGlzIHN0ZXAgYWxzbyBpbmplY3RzXG5cdCAgICAvLyB0aGUgdGVtcGxhdGUgYW5kIGNhY2hlcyB0aGUgb3JpZ2luYWwgYXR0cmlidXRlc1xuXHQgICAgLy8gb24gdGhlIGNvbnRhaW5lciBub2RlIGFuZCByZXBsYWNlciBub2RlLlxuXHQgICAgdmFyIG9yaWdpbmFsID0gZWw7XG5cdCAgICBlbCA9IHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpO1xuXHQgICAgdGhpcy5faW5pdEVsZW1lbnQoZWwpO1xuXHRcblx0ICAgIC8vIGhhbmRsZSB2LXByZSBvbiByb290IG5vZGUgKCMyMDI2KVxuXHQgICAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG5cdCAgICAgIHJldHVybjtcblx0ICAgIH1cblx0XG5cdCAgICAvLyByb290IGlzIGFsd2F5cyBjb21waWxlZCBwZXItaW5zdGFuY2UsIGJlY2F1c2Vcblx0ICAgIC8vIGNvbnRhaW5lciBhdHRycyBhbmQgcHJvcHMgY2FuIGJlIGRpZmZlcmVudCBldmVyeSB0aW1lLlxuXHQgICAgdmFyIGNvbnRleHRPcHRpb25zID0gdGhpcy5fY29udGV4dCAmJiB0aGlzLl9jb250ZXh0LiRvcHRpb25zO1xuXHQgICAgdmFyIHJvb3RMaW5rZXIgPSBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpO1xuXHRcblx0ICAgIC8vIHJlc29sdmUgc2xvdCBkaXN0cmlidXRpb25cblx0ICAgIHJlc29sdmVTbG90cyh0aGlzLCBvcHRpb25zLl9jb250ZW50KTtcblx0XG5cdCAgICAvLyBjb21waWxlIGFuZCBsaW5rIHRoZSByZXN0XG5cdCAgICB2YXIgY29udGVudExpbmtGbjtcblx0ICAgIHZhciBjdG9yID0gdGhpcy5jb25zdHJ1Y3Rvcjtcblx0ICAgIC8vIGNvbXBvbmVudCBjb21waWxhdGlvbiBjYW4gYmUgY2FjaGVkXG5cdCAgICAvLyBhcyBsb25nIGFzIGl0J3Mgbm90IHVzaW5nIGlubGluZS10ZW1wbGF0ZVxuXHQgICAgaWYgKG9wdGlvbnMuX2xpbmtlckNhY2hhYmxlKSB7XG5cdCAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlcjtcblx0ICAgICAgaWYgKCFjb250ZW50TGlua0ZuKSB7XG5cdCAgICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyID0gY29tcGlsZShlbCwgb3B0aW9ucyk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0XG5cdCAgICAvLyBsaW5rIHBoYXNlXG5cdCAgICAvLyBtYWtlIHN1cmUgdG8gbGluayByb290IHdpdGggcHJvcCBzY29wZSFcblx0ICAgIHZhciByb290VW5saW5rRm4gPSByb290TGlua2VyKHRoaXMsIGVsLCB0aGlzLl9zY29wZSk7XG5cdCAgICB2YXIgY29udGVudFVubGlua0ZuID0gY29udGVudExpbmtGbiA/IGNvbnRlbnRMaW5rRm4odGhpcywgZWwpIDogY29tcGlsZShlbCwgb3B0aW9ucykodGhpcywgZWwpO1xuXHRcblx0ICAgIC8vIHJlZ2lzdGVyIGNvbXBvc2l0ZSB1bmxpbmsgZnVuY3Rpb25cblx0ICAgIC8vIHRvIGJlIGNhbGxlZCBkdXJpbmcgaW5zdGFuY2UgZGVzdHJ1Y3Rpb25cblx0ICAgIHRoaXMuX3VubGlua0ZuID0gZnVuY3Rpb24gKCkge1xuXHQgICAgICByb290VW5saW5rRm4oKTtcblx0ICAgICAgLy8gcGFzc2luZyBkZXN0cm95aW5nOiB0cnVlIHRvIGF2b2lkIHNlYXJjaGluZyBhbmRcblx0ICAgICAgLy8gc3BsaWNpbmcgdGhlIGRpcmVjdGl2ZXNcblx0ICAgICAgY29udGVudFVubGlua0ZuKHRydWUpO1xuXHQgICAgfTtcblx0XG5cdCAgICAvLyBmaW5hbGx5IHJlcGxhY2Ugb3JpZ2luYWxcblx0ICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcblx0ICAgICAgcmVwbGFjZShvcmlnaW5hbCwgZWwpO1xuXHQgICAgfVxuXHRcblx0ICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2NvbXBpbGVkJyk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogSW5pdGlhbGl6ZSBpbnN0YW5jZSBlbGVtZW50LiBDYWxsZWQgaW4gdGhlIHB1YmxpY1xuXHQgICAqICRtb3VudCgpIG1ldGhvZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS5faW5pdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWwpIHtcblx0ICAgIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuXHQgICAgICB0aGlzLl9pc0ZyYWdtZW50ID0gdHJ1ZTtcblx0ICAgICAgdGhpcy4kZWwgPSB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gZWwuZmlyc3RDaGlsZDtcblx0ICAgICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBlbC5sYXN0Q2hpbGQ7XG5cdCAgICAgIC8vIHNldCBwZXJzaXN0ZWQgdGV4dCBhbmNob3JzIHRvIGVtcHR5XG5cdCAgICAgIGlmICh0aGlzLl9mcmFnbWVudFN0YXJ0Lm5vZGVUeXBlID09PSAzKSB7XG5cdCAgICAgICAgdGhpcy5fZnJhZ21lbnRTdGFydC5kYXRhID0gdGhpcy5fZnJhZ21lbnRFbmQuZGF0YSA9ICcnO1xuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX2ZyYWdtZW50ID0gZWw7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRlbCA9IGVsO1xuXHQgICAgfVxuXHQgICAgdGhpcy4kZWwuX192dWVfXyA9IHRoaXM7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlQ29tcGlsZScpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhbmQgYmluZCBhIGRpcmVjdGl2ZSB0byBhbiBlbGVtZW50LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3IgLSBwYXJzZWQgZGlyZWN0aXZlIGRlc2NyaXB0b3Jcblx0ICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgICAtIHRhcmdldCBub2RlXG5cdCAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9iaW5kRGlyID0gZnVuY3Rpb24gKGRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG5cdCAgICB0aGlzLl9kaXJlY3RpdmVzLnB1c2gobmV3IERpcmVjdGl2ZShkZXNjcmlwdG9yLCB0aGlzLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRlYXJkb3duIGFuIGluc3RhbmNlLCB1bm9ic2VydmVzIHRoZSBkYXRhLCB1bmJpbmQgYWxsIHRoZVxuXHQgICAqIGRpcmVjdGl2ZXMsIHR1cm4gb2ZmIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzLCBldGMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZSAtIHdoZXRoZXIgdG8gcmVtb3ZlIHRoZSBET00gbm9kZS5cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cCAtIGlmIHRydWUsIGRlZmVyIGNsZWFudXAgdG9cblx0ICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGNhbGxlZCBsYXRlclxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG5cdCAgICBpZiAodGhpcy5faXNCZWluZ0Rlc3Ryb3llZCkge1xuXHQgICAgICBpZiAoIWRlZmVyQ2xlYW51cCkge1xuXHQgICAgICAgIHRoaXMuX2NsZWFudXAoKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdFxuXHQgICAgdmFyIGRlc3Ryb3lSZWFkeTtcblx0ICAgIHZhciBwZW5kaW5nUmVtb3ZhbDtcblx0XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICAvLyBDbGVhbnVwIHNob3VsZCBiZSBjYWxsZWQgZWl0aGVyIHN5bmNocm9ub3VzbHkgb3IgYXN5bmNocm9ub3lzbHkgYXNcblx0ICAgIC8vIGNhbGxiYWNrIG9mIHRoaXMuJHJlbW92ZSgpLCBvciBpZiByZW1vdmUgYW5kIGRlZmVyQ2xlYW51cCBhcmUgZmFsc2UuXG5cdCAgICAvLyBJbiBhbnkgY2FzZSBpdCBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGFsbCBvdGhlciByZW1vdmluZywgdW5iaW5kaW5nIGFuZFxuXHQgICAgLy8gdHVybmluZyBvZiBpcyBkb25lXG5cdCAgICB2YXIgY2xlYW51cElmUG9zc2libGUgPSBmdW5jdGlvbiBjbGVhbnVwSWZQb3NzaWJsZSgpIHtcblx0ICAgICAgaWYgKGRlc3Ryb3lSZWFkeSAmJiAhcGVuZGluZ1JlbW92YWwgJiYgIWRlZmVyQ2xlYW51cCkge1xuXHQgICAgICAgIHNlbGYuX2NsZWFudXAoKTtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0XG5cdCAgICAvLyByZW1vdmUgRE9NIGVsZW1lbnRcblx0ICAgIGlmIChyZW1vdmUgJiYgdGhpcy4kZWwpIHtcblx0ICAgICAgcGVuZGluZ1JlbW92YWwgPSB0cnVlO1xuXHQgICAgICB0aGlzLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuXHQgICAgICAgIHBlbmRpbmdSZW1vdmFsID0gZmFsc2U7XG5cdCAgICAgICAgY2xlYW51cElmUG9zc2libGUoKTtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdFxuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZURlc3Ryb3knKTtcblx0ICAgIHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlO1xuXHQgICAgdmFyIGk7XG5cdCAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHBhcmVudC4gb25seSBuZWNlc3Nhcnlcblx0ICAgIC8vIGlmIHBhcmVudCBpcyBub3QgYmVpbmcgZGVzdHJveWVkIGFzIHdlbGwuXG5cdCAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuXHQgICAgaWYgKHBhcmVudCAmJiAhcGFyZW50Ll9pc0JlaW5nRGVzdHJveWVkKSB7XG5cdCAgICAgIHBhcmVudC4kY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcblx0ICAgICAgLy8gdW5yZWdpc3RlciByZWYgKHJlbW92ZTogdHJ1ZSlcblx0ICAgICAgdGhpcy5fdXBkYXRlUmVmKHRydWUpO1xuXHQgICAgfVxuXHQgICAgLy8gZGVzdHJveSBhbGwgY2hpbGRyZW4uXG5cdCAgICBpID0gdGhpcy4kY2hpbGRyZW4ubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB0aGlzLiRjaGlsZHJlbltpXS4kZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgICAgLy8gdGVhcmRvd24gcHJvcHNcblx0ICAgIGlmICh0aGlzLl9wcm9wc1VubGlua0ZuKSB7XG5cdCAgICAgIHRoaXMuX3Byb3BzVW5saW5rRm4oKTtcblx0ICAgIH1cblx0ICAgIC8vIHRlYXJkb3duIGFsbCBkaXJlY3RpdmVzLiB0aGlzIGFsc28gdGVhcnNkb3duIGFsbFxuXHQgICAgLy8gZGlyZWN0aXZlLW93bmVkIHdhdGNoZXJzLlxuXHQgICAgaWYgKHRoaXMuX3VubGlua0ZuKSB7XG5cdCAgICAgIHRoaXMuX3VubGlua0ZuKCk7XG5cdCAgICB9XG5cdCAgICBpID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICB0aGlzLl93YXRjaGVyc1tpXS50ZWFyZG93bigpO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSB0byBzZWxmIG9uICRlbFxuXHQgICAgaWYgKHRoaXMuJGVsKSB7XG5cdCAgICAgIHRoaXMuJGVsLl9fdnVlX18gPSBudWxsO1xuXHQgICAgfVxuXHRcblx0ICAgIGRlc3Ryb3lSZWFkeSA9IHRydWU7XG5cdCAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENsZWFuIHVwIHRvIGVuc3VyZSBnYXJiYWdlIGNvbGxlY3Rpb24uXG5cdCAgICogVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGxlYXZlIHRyYW5zaXRpb24gaWYgdGhlcmVcblx0ICAgKiBpcyBhbnkuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBpZiAodGhpcy5faXNEZXN0cm95ZWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBvd25lciBmcmFnbWVudFxuXHQgICAgLy8gZG8gaXQgaW4gY2xlYW51cCBzbyB0aGF0IHdlIGNhbiBjYWxsICRkZXN0cm95IHdpdGhcblx0ICAgIC8vIGRlZmVyIHJpZ2h0IHdoZW4gYSBmcmFnbWVudCBpcyBhYm91dCB0byBiZSByZW1vdmVkLlxuXHQgICAgaWYgKHRoaXMuX2ZyYWcpIHtcblx0ICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuXHQgICAgfVxuXHQgICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSBmcm9tIGRhdGEgb2Jcblx0ICAgIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLlxuXHQgICAgaWYgKHRoaXMuX2RhdGEgJiYgdGhpcy5fZGF0YS5fX29iX18pIHtcblx0ICAgICAgdGhpcy5fZGF0YS5fX29iX18ucmVtb3ZlVm0odGhpcyk7XG5cdCAgICB9XG5cdCAgICAvLyBDbGVhbiB1cCByZWZlcmVuY2VzIHRvIHByaXZhdGUgcHJvcGVydGllcyBhbmQgb3RoZXJcblx0ICAgIC8vIGluc3RhbmNlcy4gcHJlc2VydmUgcmVmZXJlbmNlIHRvIF9kYXRhIHNvIHRoYXQgcHJveHlcblx0ICAgIC8vIGFjY2Vzc29ycyBzdGlsbCB3b3JrLiBUaGUgb25seSBwb3RlbnRpYWwgc2lkZSBlZmZlY3Rcblx0ICAgIC8vIGhlcmUgaXMgdGhhdCBtdXRhdGluZyB0aGUgaW5zdGFuY2UgYWZ0ZXIgaXQncyBkZXN0cm95ZWRcblx0ICAgIC8vIG1heSBhZmZlY3QgdGhlIHN0YXRlIG9mIG90aGVyIGNvbXBvbmVudHMgdGhhdCBhcmUgc3RpbGxcblx0ICAgIC8vIG9ic2VydmluZyB0aGUgc2FtZSBvYmplY3QsIGJ1dCB0aGF0IHNlZW1zIHRvIGJlIGFcblx0ICAgIC8vIHJlYXNvbmFibGUgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSB1c2VyIHJhdGhlciB0aGFuXG5cdCAgICAvLyBhbHdheXMgdGhyb3dpbmcgYW4gZXJyb3Igb24gdGhlbS5cblx0ICAgIHRoaXMuJGVsID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kcm9vdCA9IHRoaXMuJGNoaWxkcmVuID0gdGhpcy5fd2F0Y2hlcnMgPSB0aGlzLl9jb250ZXh0ID0gdGhpcy5fc2NvcGUgPSB0aGlzLl9kaXJlY3RpdmVzID0gbnVsbDtcblx0ICAgIC8vIGNhbGwgdGhlIGxhc3QgaG9vay4uLlxuXHQgICAgdGhpcy5faXNEZXN0cm95ZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5fY2FsbEhvb2soJ2Rlc3Ryb3llZCcpO1xuXHQgICAgLy8gdHVybiBvZmYgYWxsIGluc3RhbmNlIGxpc3RlbmVycy5cblx0ICAgIHRoaXMuJG9mZigpO1xuXHQgIH07XG5cdH1cblx0XG5cdGZ1bmN0aW9uIG1pc2NNaXhpbiAoVnVlKSB7XG5cdCAgLyoqXG5cdCAgICogQXBwbHkgYSBsaXN0IG9mIGZpbHRlciAoZGVzY3JpcHRvcnMpIHRvIGEgdmFsdWUuXG5cdCAgICogVXNpbmcgcGxhaW4gZm9yIGxvb3BzIGhlcmUgYmVjYXVzZSB0aGlzIHdpbGwgYmUgY2FsbGVkIGluXG5cdCAgICogdGhlIGdldHRlciBvZiBhbnkgd2F0Y2hlciB3aXRoIGZpbHRlcnMgc28gaXQgaXMgdmVyeVxuXHQgICAqIHBlcmZvcm1hbmNlIHNlbnNpdGl2ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Kn0gdmFsdWVcblx0ICAgKiBAcGFyYW0geyp9IFtvbGRWYWx1ZV1cblx0ICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJzXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSB3cml0ZVxuXHQgICAqIEByZXR1cm4geyp9XG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuX2FwcGx5RmlsdGVycyA9IGZ1bmN0aW9uICh2YWx1ZSwgb2xkVmFsdWUsIGZpbHRlcnMsIHdyaXRlKSB7XG5cdCAgICB2YXIgZmlsdGVyLCBmbiwgYXJncywgYXJnLCBvZmZzZXQsIGksIGwsIGosIGs7XG5cdCAgICBmb3IgKGkgPSAwLCBsID0gZmlsdGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgZmlsdGVyID0gZmlsdGVyc1t3cml0ZSA/IGwgLSBpIC0gMSA6IGldO1xuXHQgICAgICBmbiA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlci5uYW1lLCB0cnVlKTtcblx0ICAgICAgaWYgKCFmbikgY29udGludWU7XG5cdCAgICAgIGZuID0gd3JpdGUgPyBmbi53cml0ZSA6IGZuLnJlYWQgfHwgZm47XG5cdCAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIGNvbnRpbnVlO1xuXHQgICAgICBhcmdzID0gd3JpdGUgPyBbdmFsdWUsIG9sZFZhbHVlXSA6IFt2YWx1ZV07XG5cdCAgICAgIG9mZnNldCA9IHdyaXRlID8gMiA6IDE7XG5cdCAgICAgIGlmIChmaWx0ZXIuYXJncykge1xuXHQgICAgICAgIGZvciAoaiA9IDAsIGsgPSBmaWx0ZXIuYXJncy5sZW5ndGg7IGogPCBrOyBqKyspIHtcblx0ICAgICAgICAgIGFyZyA9IGZpbHRlci5hcmdzW2pdO1xuXHQgICAgICAgICAgYXJnc1tqICsgb2Zmc2V0XSA9IGFyZy5keW5hbWljID8gdGhpcy4kZ2V0KGFyZy52YWx1ZSkgOiBhcmcudmFsdWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdmFsdWU7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVzb2x2ZSBhIGNvbXBvbmVudCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGNvbXBvbmVudFxuXHQgICAqIGlzIGRlZmluZWQgbm9ybWFsbHkgb3IgdXNpbmcgYW4gYXN5bmMgZmFjdG9yeSBmdW5jdGlvbi5cblx0ICAgKiBSZXNvbHZlcyBzeW5jaHJvbm91c2x5IGlmIGFscmVhZHkgcmVzb2x2ZWQsIG90aGVyd2lzZVxuXHQgICAqIHJlc29sdmVzIGFzeW5jaHJvbm91c2x5IGFuZCBjYWNoZXMgdGhlIHJlc29sdmVkXG5cdCAgICogY29uc3RydWN0b3Igb24gdGhlIGZhY3RvcnkuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBjYikge1xuXHQgICAgdmFyIGZhY3Rvcnk7XG5cdCAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG5cdCAgICAgIGZhY3RvcnkgPSB2YWx1ZTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIGZhY3RvcnkgPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2NvbXBvbmVudHMnLCB2YWx1ZSwgdHJ1ZSk7XG5cdCAgICB9XG5cdCAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgIGlmICghZmFjdG9yeSkge1xuXHQgICAgICByZXR1cm47XG5cdCAgICB9XG5cdCAgICAvLyBhc3luYyBjb21wb25lbnQgZmFjdG9yeVxuXHQgICAgaWYgKCFmYWN0b3J5Lm9wdGlvbnMpIHtcblx0ICAgICAgaWYgKGZhY3RvcnkucmVzb2x2ZWQpIHtcblx0ICAgICAgICAvLyBjYWNoZWRcblx0ICAgICAgICBjYihmYWN0b3J5LnJlc29sdmVkKTtcblx0ICAgICAgfSBlbHNlIGlmIChmYWN0b3J5LnJlcXVlc3RlZCkge1xuXHQgICAgICAgIC8vIHBvb2wgY2FsbGJhY2tzXG5cdCAgICAgICAgZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2IpO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIGZhY3RvcnkucmVxdWVzdGVkID0gdHJ1ZTtcblx0ICAgICAgICB2YXIgY2JzID0gZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzID0gW2NiXTtcblx0ICAgICAgICBmYWN0b3J5LmNhbGwodGhpcywgZnVuY3Rpb24gcmVzb2x2ZShyZXMpIHtcblx0ICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHJlcykpIHtcblx0ICAgICAgICAgICAgcmVzID0gVnVlLmV4dGVuZChyZXMpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgICAgLy8gY2FjaGUgcmVzb2x2ZWRcblx0ICAgICAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSByZXM7XG5cdCAgICAgICAgICAvLyBpbnZva2UgY2FsbGJhY2tzXG5cdCAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgICAgICAgY2JzW2ldKHJlcyk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuXHQgICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQnICsgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyAnOiAnICsgdmFsdWUgOiAnJykgKyAnLiAnICsgKHJlYXNvbiA/ICdcXG5SZWFzb246ICcgKyByZWFzb24gOiAnJykpO1xuXHQgICAgICAgIH0pO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICAvLyBub3JtYWwgY29tcG9uZW50XG5cdCAgICAgIGNiKGZhY3RvcnkpO1xuXHQgICAgfVxuXHQgIH07XG5cdH1cblx0XG5cdHZhciBmaWx0ZXJSRSQxID0gL1tefF1cXHxbXnxdLztcblx0XG5cdGZ1bmN0aW9uIGRhdGFBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIEdldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG5cdCAgICogQHJldHVybiB7Kn1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZ2V0ID0gZnVuY3Rpb24gKGV4cCwgYXNTdGF0ZW1lbnQpIHtcblx0ICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwKTtcblx0ICAgIGlmIChyZXMpIHtcblx0ICAgICAgaWYgKGFzU3RhdGVtZW50KSB7XG5cdCAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZW1lbnRIYW5kbGVyKCkge1xuXHQgICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gdG9BcnJheShhcmd1bWVudHMpO1xuXHQgICAgICAgICAgdmFyIHJlc3VsdCA9IHJlcy5nZXQuY2FsbChzZWxmLCBzZWxmKTtcblx0ICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IG51bGw7XG5cdCAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuXHQgICAgICAgIH07XG5cdCAgICAgIH0gZWxzZSB7XG5cdCAgICAgICAgdHJ5IHtcblx0ICAgICAgICAgIHJldHVybiByZXMuZ2V0LmNhbGwodGhpcywgdGhpcyk7XG5cdCAgICAgICAgfSBjYXRjaCAoZSkge31cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG5cdCAgICogVGhlIGV4cHJlc3Npb24gbXVzdCBiZSBhIHZhbGlkIGxlZnQtaGFuZFxuXHQgICAqIGV4cHJlc3Npb24gaW4gYW4gYXNzaWdubWVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcblx0ICAgKiBAcGFyYW0geyp9IHZhbFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRzZXQgPSBmdW5jdGlvbiAoZXhwLCB2YWwpIHtcblx0ICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwLCB0cnVlKTtcblx0ICAgIGlmIChyZXMgJiYgcmVzLnNldCkge1xuXHQgICAgICByZXMuc2V0LmNhbGwodGhpcywgdGhpcywgdmFsKTtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBEZWxldGUgYSBwcm9wZXJ0eSBvbiB0aGUgVk1cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuXHQgICAgZGVsKHRoaXMuX2RhdGEsIGtleSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogV2F0Y2ggYW4gZXhwcmVzc2lvbiwgdHJpZ2dlciBjYWxsYmFjayB3aGVuIGl0c1xuXHQgICAqIHZhbHVlIGNoYW5nZXMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuXHQgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG5cdCAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGltbWVkaWF0ZVxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHVud2F0Y2hGblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiR3YXRjaCA9IGZ1bmN0aW9uIChleHBPckZuLCBjYiwgb3B0aW9ucykge1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIHZhciBwYXJzZWQ7XG5cdCAgICBpZiAodHlwZW9mIGV4cE9yRm4gPT09ICdzdHJpbmcnKSB7XG5cdCAgICAgIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKGV4cE9yRm4pO1xuXHQgICAgICBleHBPckZuID0gcGFyc2VkLmV4cHJlc3Npb247XG5cdCAgICB9XG5cdCAgICB2YXIgd2F0Y2hlciA9IG5ldyBXYXRjaGVyKHZtLCBleHBPckZuLCBjYiwge1xuXHQgICAgICBkZWVwOiBvcHRpb25zICYmIG9wdGlvbnMuZGVlcCxcblx0ICAgICAgc3luYzogb3B0aW9ucyAmJiBvcHRpb25zLnN5bmMsXG5cdCAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcblx0ICAgICAgdXNlcjogIW9wdGlvbnMgfHwgb3B0aW9ucy51c2VyICE9PSBmYWxzZVxuXHQgICAgfSk7XG5cdCAgICBpZiAob3B0aW9ucyAmJiBvcHRpb25zLmltbWVkaWF0ZSkge1xuXHQgICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiBmdW5jdGlvbiB1bndhdGNoRm4oKSB7XG5cdCAgICAgIHdhdGNoZXIudGVhcmRvd24oKTtcblx0ICAgIH07XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRXZhbHVhdGUgYSB0ZXh0IGRpcmVjdGl2ZSwgaW5jbHVkaW5nIGZpbHRlcnMuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW2FzU3RhdGVtZW50XVxuXHQgICAqIEByZXR1cm4ge1N0cmluZ31cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZXZhbCA9IGZ1bmN0aW9uICh0ZXh0LCBhc1N0YXRlbWVudCkge1xuXHQgICAgLy8gY2hlY2sgZm9yIGZpbHRlcnMuXG5cdCAgICBpZiAoZmlsdGVyUkUkMS50ZXN0KHRleHQpKSB7XG5cdCAgICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZSh0ZXh0KTtcblx0ICAgICAgLy8gdGhlIGZpbHRlciByZWdleCBjaGVjayBtaWdodCBnaXZlIGZhbHNlIHBvc2l0aXZlXG5cdCAgICAgIC8vIGZvciBwaXBlcyBpbnNpZGUgc3RyaW5ncywgc28gaXQncyBwb3NzaWJsZSB0aGF0XG5cdCAgICAgIC8vIHdlIGRvbid0IGdldCBhbnkgZmlsdGVycyBoZXJlXG5cdCAgICAgIHZhciB2YWwgPSB0aGlzLiRnZXQoZGlyLmV4cHJlc3Npb24sIGFzU3RhdGVtZW50KTtcblx0ICAgICAgcmV0dXJuIGRpci5maWx0ZXJzID8gdGhpcy5fYXBwbHlGaWx0ZXJzKHZhbCwgbnVsbCwgZGlyLmZpbHRlcnMpIDogdmFsO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgLy8gbm8gZmlsdGVyXG5cdCAgICAgIHJldHVybiB0aGlzLiRnZXQodGV4dCwgYXNTdGF0ZW1lbnQpO1xuXHQgICAgfVxuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEludGVycG9sYXRlIGEgcGllY2Ugb2YgdGVtcGxhdGUgdGV4dC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG5cdCAgICogQHJldHVybiB7U3RyaW5nfVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRpbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG5cdCAgICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KHRleHQpO1xuXHQgICAgdmFyIHZtID0gdGhpcztcblx0ICAgIGlmICh0b2tlbnMpIHtcblx0ICAgICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDEpIHtcblx0ICAgICAgICByZXR1cm4gdm0uJGV2YWwodG9rZW5zWzBdLnZhbHVlKSArICcnO1xuXHQgICAgICB9IGVsc2Uge1xuXHQgICAgICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuXHQgICAgICAgICAgcmV0dXJuIHRva2VuLnRhZyA/IHZtLiRldmFsKHRva2VuLnZhbHVlKSA6IHRva2VuLnZhbHVlO1xuXHQgICAgICAgIH0pLmpvaW4oJycpO1xuXHQgICAgICB9XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICByZXR1cm4gdGV4dDtcblx0ICAgIH1cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBMb2cgaW5zdGFuY2UgZGF0YSBhcyBhIHBsYWluIEpTIG9iamVjdFxuXHQgICAqIHNvIHRoYXQgaXQgaXMgZWFzaWVyIHRvIGluc3BlY3QgaW4gY29uc29sZS5cblx0ICAgKiBUaGlzIG1ldGhvZCBhc3N1bWVzIGNvbnNvbGUgaXMgYXZhaWxhYmxlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd9IFtwYXRoXVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRsb2cgPSBmdW5jdGlvbiAocGF0aCkge1xuXHQgICAgdmFyIGRhdGEgPSBwYXRoID8gZ2V0UGF0aCh0aGlzLl9kYXRhLCBwYXRoKSA6IHRoaXMuX2RhdGE7XG5cdCAgICBpZiAoZGF0YSkge1xuXHQgICAgICBkYXRhID0gY2xlYW4oZGF0YSk7XG5cdCAgICB9XG5cdCAgICAvLyBpbmNsdWRlIGNvbXB1dGVkIGZpZWxkc1xuXHQgICAgaWYgKCFwYXRoKSB7XG5cdCAgICAgIHZhciBrZXk7XG5cdCAgICAgIGZvciAoa2V5IGluIHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQpIHtcblx0ICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuXHQgICAgICB9XG5cdCAgICAgIGlmICh0aGlzLl9wcm9wcykge1xuXHQgICAgICAgIGZvciAoa2V5IGluIHRoaXMuX3Byb3BzKSB7XG5cdCAgICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgY29uc29sZS5sb2coZGF0YSk7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogXCJjbGVhblwiIGEgZ2V0dGVyL3NldHRlciBjb252ZXJ0ZWQgb2JqZWN0IGludG8gYSBwbGFpblxuXHQgICAqIG9iamVjdCBjb3B5LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IC0gb2JqXG5cdCAgICogQHJldHVybiB7T2JqZWN0fVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjbGVhbihvYmopIHtcblx0ICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xuXHQgIH1cblx0fVxuXHRcblx0ZnVuY3Rpb24gZG9tQVBJIChWdWUpIHtcblx0ICAvKipcblx0ICAgKiBDb252ZW5pZW5jZSBvbi1pbnN0YW5jZSBuZXh0VGljay4gVGhlIGNhbGxiYWNrIGlzXG5cdCAgICogYXV0by1ib3VuZCB0byB0aGUgaW5zdGFuY2UsIGFuZCB0aGlzIGF2b2lkcyBjb21wb25lbnRcblx0ICAgKiBtb2R1bGVzIGhhdmluZyB0byByZWx5IG9uIHRoZSBnbG9iYWwgVnVlLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kbmV4dFRpY2sgPSBmdW5jdGlvbiAoZm4pIHtcblx0ICAgIG5leHRUaWNrKGZuLCB0aGlzKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBBcHBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGFwcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG5cdCAgICByZXR1cm4gaW5zZXJ0KHRoaXMsIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBhcHBlbmQsIGFwcGVuZFdpdGhUcmFuc2l0aW9uKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQcmVwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRwcmVwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG5cdCAgICBpZiAodGFyZ2V0Lmhhc0NoaWxkTm9kZXMoKSkge1xuXHQgICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0LmZpcnN0Q2hpbGQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBJbnNlcnQgaW5zdGFuY2UgYmVmb3JlIHRhcmdldFxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRiZWZvcmUgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGJlZm9yZVdpdGhDYiwgYmVmb3JlV2l0aFRyYW5zaXRpb24pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEluc2VydCBpbnN0YW5jZSBhZnRlciB0YXJnZXRcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYWZ0ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcblx0ICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG5cdCAgICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG5cdCAgICAgIHRoaXMuJGJlZm9yZSh0YXJnZXQubmV4dFNpYmxpbmcsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG5cdCAgICB9IGVsc2Uge1xuXHQgICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQucGFyZW50Tm9kZSwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBpbnN0YW5jZSBmcm9tIERPTVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlID0gZnVuY3Rpb24gKGNiLCB3aXRoVHJhbnNpdGlvbikge1xuXHQgICAgaWYgKCF0aGlzLiRlbC5wYXJlbnROb2RlKSB7XG5cdCAgICAgIHJldHVybiBjYiAmJiBjYigpO1xuXHQgICAgfVxuXHQgICAgdmFyIGluRG9jdW1lbnQgPSB0aGlzLl9pc0F0dGFjaGVkICYmIGluRG9jKHRoaXMuJGVsKTtcblx0ICAgIC8vIGlmIHdlIGFyZSBub3QgaW4gZG9jdW1lbnQsIG5vIG5lZWQgdG8gY2hlY2tcblx0ICAgIC8vIGZvciB0cmFuc2l0aW9uc1xuXHQgICAgaWYgKCFpbkRvY3VtZW50KSB3aXRoVHJhbnNpdGlvbiA9IGZhbHNlO1xuXHQgICAgdmFyIHNlbGYgPSB0aGlzO1xuXHQgICAgdmFyIHJlYWxDYiA9IGZ1bmN0aW9uIHJlYWxDYigpIHtcblx0ICAgICAgaWYgKGluRG9jdW1lbnQpIHNlbGYuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuXHQgICAgICBpZiAoY2IpIGNiKCk7XG5cdCAgICB9O1xuXHQgICAgaWYgKHRoaXMuX2lzRnJhZ21lbnQpIHtcblx0ICAgICAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMuX2ZyYWdtZW50U3RhcnQsIHRoaXMuX2ZyYWdtZW50RW5kLCB0aGlzLCB0aGlzLl9mcmFnbWVudCwgcmVhbENiKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSA/IHJlbW92ZVdpdGhDYiA6IHJlbW92ZVdpdGhUcmFuc2l0aW9uO1xuXHQgICAgICBvcCh0aGlzLiRlbCwgdGhpcywgcmVhbENiKTtcblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFNoYXJlZCBET00gaW5zZXJ0aW9uIGZ1bmN0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtWdWV9IHZtXG5cdCAgICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AxIC0gb3AgZm9yIG5vbi10cmFuc2l0aW9uIGluc2VydFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMiAtIG9wIGZvciB0cmFuc2l0aW9uIGluc2VydFxuXHQgICAqIEByZXR1cm4gdm1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gaW5zZXJ0KHZtLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgb3AxLCBvcDIpIHtcblx0ICAgIHRhcmdldCA9IHF1ZXJ5KHRhcmdldCk7XG5cdCAgICB2YXIgdGFyZ2V0SXNEZXRhY2hlZCA9ICFpbkRvYyh0YXJnZXQpO1xuXHQgICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlIHx8IHRhcmdldElzRGV0YWNoZWQgPyBvcDEgOiBvcDI7XG5cdCAgICB2YXIgc2hvdWxkQ2FsbEhvb2sgPSAhdGFyZ2V0SXNEZXRhY2hlZCAmJiAhdm0uX2lzQXR0YWNoZWQgJiYgIWluRG9jKHZtLiRlbCk7XG5cdCAgICBpZiAodm0uX2lzRnJhZ21lbnQpIHtcblx0ICAgICAgbWFwTm9kZVJhbmdlKHZtLl9mcmFnbWVudFN0YXJ0LCB2bS5fZnJhZ21lbnRFbmQsIGZ1bmN0aW9uIChub2RlKSB7XG5cdCAgICAgICAgb3Aobm9kZSwgdGFyZ2V0LCB2bSk7XG5cdCAgICAgIH0pO1xuXHQgICAgICBjYiAmJiBjYigpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgb3Aodm0uJGVsLCB0YXJnZXQsIHZtLCBjYik7XG5cdCAgICB9XG5cdCAgICBpZiAoc2hvdWxkQ2FsbEhvb2spIHtcblx0ICAgICAgdm0uX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIHZtO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQ2hlY2sgZm9yIHNlbGVjdG9yc1xuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcXVlcnkoZWwpIHtcblx0ICAgIHJldHVybiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgOiBlbDtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIEFwcGVuZCBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG5cdCAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBhcHBlbmQoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG5cdCAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuXHQgICAgaWYgKGNiKSBjYigpO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogSW5zZXJ0QmVmb3JlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge05vZGV9IGVsXG5cdCAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG5cdCAgICovXG5cdFxuXHQgIGZ1bmN0aW9uIGJlZm9yZVdpdGhDYihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcblx0ICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcblx0ICAgIGlmIChjYikgY2IoKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtOb2RlfSBlbFxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cblx0ICAgKi9cblx0XG5cdCAgZnVuY3Rpb24gcmVtb3ZlV2l0aENiKGVsLCB2bSwgY2IpIHtcblx0ICAgIHJlbW92ZShlbCk7XG5cdCAgICBpZiAoY2IpIGNiKCk7XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBldmVudHNBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIExpc3RlbiBvbiB0aGUgZ2l2ZW4gYGV2ZW50YCB3aXRoIGBmbmAuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvbiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcblx0ICAgICh0aGlzLl9ldmVudHNbZXZlbnRdIHx8ICh0aGlzLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcblx0ICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIDEpO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXG5cdCAgICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJG9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICB2YXIgc2VsZiA9IHRoaXM7XG5cdCAgICBmdW5jdGlvbiBvbigpIHtcblx0ICAgICAgc2VsZi4kb2ZmKGV2ZW50LCBvbik7XG5cdCAgICAgIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG5cdCAgICB9XG5cdCAgICBvbi5mbiA9IGZuO1xuXHQgICAgdGhpcy4kb24oZXZlbnQsIG9uKTtcblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXG5cdCAgICogcmVnaXN0ZXJlZCBjYWxsYmFja3MuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRvZmYgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG5cdCAgICB2YXIgY2JzO1xuXHQgICAgLy8gYWxsXG5cdCAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcblx0ICAgICAgaWYgKHRoaXMuJHBhcmVudCkge1xuXHQgICAgICAgIGZvciAoZXZlbnQgaW4gdGhpcy5fZXZlbnRzKSB7XG5cdCAgICAgICAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgICAgICAgaWYgKGNicykge1xuXHQgICAgICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICAgIHRoaXMuX2V2ZW50cyA9IHt9O1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIC8vIHNwZWNpZmljIGV2ZW50XG5cdCAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuXHQgICAgaWYgKCFjYnMpIHtcblx0ICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICB9XG5cdCAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuXHQgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG5cdCAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBudWxsO1xuXHQgICAgICByZXR1cm4gdGhpcztcblx0ICAgIH1cblx0ICAgIC8vIHNwZWNpZmljIGhhbmRsZXJcblx0ICAgIHZhciBjYjtcblx0ICAgIHZhciBpID0gY2JzLmxlbmd0aDtcblx0ICAgIHdoaWxlIChpLS0pIHtcblx0ICAgICAgY2IgPSBjYnNbaV07XG5cdCAgICAgIGlmIChjYiA9PT0gZm4gfHwgY2IuZm4gPT09IGZuKSB7XG5cdCAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLTEpO1xuXHQgICAgICAgIGNicy5zcGxpY2UoaSwgMSk7XG5cdCAgICAgICAgYnJlYWs7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIHJldHVybiB0aGlzO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRyaWdnZXIgYW4gZXZlbnQgb24gc2VsZi5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcblx0ICAgKiBAcmV0dXJuIHtCb29sZWFufSBzaG91bGRQcm9wYWdhdGVcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHQgICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcblx0ICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG5cdCAgICB2YXIgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcblx0ICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBpc1NvdXJjZSB8fCAhY2JzO1xuXHQgICAgaWYgKGNicykge1xuXHQgICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcblx0ICAgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGhhY2t5IHNvbHV0aW9uIHRvIHRoZSBxdWVzdGlvbiByYWlzZWRcblx0ICAgICAgLy8gaW4gIzIxMDI6IGZvciBhbiBpbmxpbmUgY29tcG9uZW50IGxpc3RlbmVyIGxpa2UgPGNvbXAgQHRlc3Q9XCJkb1RoaXNcIj4sXG5cdCAgICAgIC8vIHRoZSBwcm9wYWdhdGlvbiBoYW5kbGluZyBpcyBzb21ld2hhdCBicm9rZW4uIFRoZXJlZm9yZSB3ZVxuXHQgICAgICAvLyBuZWVkIHRvIHRyZWF0IHRoZXNlIGlubGluZSBjYWxsYmFja3MgZGlmZmVyZW50bHkuXG5cdCAgICAgIHZhciBoYXNQYXJlbnRDYnMgPSBpc1NvdXJjZSAmJiBjYnMuc29tZShmdW5jdGlvbiAoY2IpIHtcblx0ICAgICAgICByZXR1cm4gY2IuX2Zyb21QYXJlbnQ7XG5cdCAgICAgIH0pO1xuXHQgICAgICBpZiAoaGFzUGFyZW50Q2JzKSB7XG5cdCAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gZmFsc2U7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuXHQgICAgICAgIHZhciBjYiA9IGNic1tpXTtcblx0ICAgICAgICB2YXIgcmVzID0gY2IuYXBwbHkodGhpcywgYXJncyk7XG5cdCAgICAgICAgaWYgKHJlcyA9PT0gdHJ1ZSAmJiAoIWhhc1BhcmVudENicyB8fCBjYi5fZnJvbVBhcmVudCkpIHtcblx0ICAgICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHRydWU7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICByZXR1cm4gc2hvdWxkUHJvcGFnYXRlO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIFJlY3Vyc2l2ZWx5IGJyb2FkY2FzdCBhbiBldmVudCB0byBhbGwgY2hpbGRyZW4gaW5zdGFuY2VzLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuXHQgICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kYnJvYWRjYXN0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xuXHQgICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcblx0ICAgIC8vIGlmIG5vIGNoaWxkIGhhcyByZWdpc3RlcmVkIGZvciB0aGlzIGV2ZW50LFxuXHQgICAgLy8gdGhlbiB0aGVyZSdzIG5vIG5lZWQgdG8gYnJvYWRjYXN0LlxuXHQgICAgaWYgKCF0aGlzLl9ldmVudHNDb3VudFtldmVudF0pIHJldHVybjtcblx0ICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuJGNoaWxkcmVuO1xuXHQgICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG5cdCAgICBpZiAoaXNTb3VyY2UpIHtcblx0ICAgICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcblx0ICAgICAgLy8gb24gY2hpbGRyZW5cblx0ICAgICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuXHQgICAgfVxuXHQgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgICAgdmFyIGNoaWxkID0gY2hpbGRyZW5baV07XG5cdCAgICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBjaGlsZC4kZW1pdC5hcHBseShjaGlsZCwgYXJncyk7XG5cdCAgICAgIGlmIChzaG91bGRQcm9wYWdhdGUpIHtcblx0ICAgICAgICBjaGlsZC4kYnJvYWRjYXN0LmFwcGx5KGNoaWxkLCBhcmdzKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogUmVjdXJzaXZlbHkgcHJvcGFnYXRlIGFuIGV2ZW50IHVwIHRoZSBwYXJlbnQgY2hhaW4uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcblx0ICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5wcm90b3R5cGUuJGRpc3BhdGNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdCAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gdGhpcy4kZW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHQgICAgaWYgKCFzaG91bGRQcm9wYWdhdGUpIHJldHVybjtcblx0ICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcblx0ICAgIC8vIHVzZSBvYmplY3QgZXZlbnQgdG8gaW5kaWNhdGUgbm9uLXNvdXJjZSBlbWl0XG5cdCAgICAvLyBvbiBwYXJlbnRzXG5cdCAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG5cdCAgICB3aGlsZSAocGFyZW50KSB7XG5cdCAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHBhcmVudC4kZW1pdC5hcHBseShwYXJlbnQsIGFyZ3MpO1xuXHQgICAgICBwYXJlbnQgPSBzaG91bGRQcm9wYWdhdGUgPyBwYXJlbnQuJHBhcmVudCA6IG51bGw7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBNb2RpZnkgdGhlIGxpc3RlbmVyIGNvdW50cyBvbiBhbGwgcGFyZW50cy5cblx0ICAgKiBUaGlzIGJvb2trZWVwaW5nIGFsbG93cyAkYnJvYWRjYXN0IHRvIHJldHVybiBlYXJseSB3aGVuXG5cdCAgICogbm8gY2hpbGQgaGFzIGxpc3RlbmVkIHRvIGEgY2VydGFpbiBldmVudC5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7VnVlfSB2bVxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudFxuXHQgICAqL1xuXHRcblx0ICB2YXIgaG9va1JFID0gL15ob29rOi87XG5cdCAgZnVuY3Rpb24gbW9kaWZ5TGlzdGVuZXJDb3VudCh2bSwgZXZlbnQsIGNvdW50KSB7XG5cdCAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDtcblx0ICAgIC8vIGhvb2tzIGRvIG5vdCBnZXQgYnJvYWRjYXN0ZWQgc28gbm8gbmVlZFxuXHQgICAgLy8gdG8gZG8gYm9va2tlZXBpbmcgZm9yIHRoZW1cblx0ICAgIGlmICghcGFyZW50IHx8ICFjb3VudCB8fCBob29rUkUudGVzdChldmVudCkpIHJldHVybjtcblx0ICAgIHdoaWxlIChwYXJlbnQpIHtcblx0ICAgICAgcGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gPSAocGFyZW50Ll9ldmVudHNDb3VudFtldmVudF0gfHwgMCkgKyBjb3VudDtcblx0ICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG5cdCAgICB9XG5cdCAgfVxuXHR9XG5cdFxuXHRmdW5jdGlvbiBsaWZlY3ljbGVBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFNldCBpbnN0YW5jZSB0YXJnZXQgZWxlbWVudCBhbmQga2ljayBvZmYgdGhlIGNvbXBpbGF0aW9uXG5cdCAgICogcHJvY2Vzcy4gVGhlIHBhc3NlZCBpbiBgZWxgIGNhbiBiZSBhIHNlbGVjdG9yIHN0cmluZywgYW5cblx0ICAgKiBleGlzdGluZyBFbGVtZW50LCBvciBhIERvY3VtZW50RnJhZ21lbnQgKGZvciBibG9ja1xuXHQgICAqIGluc3RhbmNlcykuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudHxzdHJpbmd9IGVsXG5cdCAgICogQHB1YmxpY1xuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uIChlbCkge1xuXHQgICAgaWYgKHRoaXMuX2lzQ29tcGlsZWQpIHtcblx0ICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCckbW91bnQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nLCB0aGlzKTtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgZWwgPSBxdWVyeShlbCk7XG5cdCAgICBpZiAoIWVsKSB7XG5cdCAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdCAgICB9XG5cdCAgICB0aGlzLl9jb21waWxlKGVsKTtcblx0ICAgIHRoaXMuX2luaXRET01Ib29rcygpO1xuXHQgICAgaWYgKGluRG9jKHRoaXMuJGVsKSkge1xuXHQgICAgICB0aGlzLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcblx0ICAgICAgcmVhZHkuY2FsbCh0aGlzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHRoaXMuJG9uY2UoJ2hvb2s6YXR0YWNoZWQnLCByZWFkeSk7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gdGhpcztcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBNYXJrIGFuIGluc3RhbmNlIGFzIHJlYWR5LlxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiByZWFkeSgpIHtcblx0ICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuXHQgICAgdGhpcy5faXNSZWFkeSA9IHRydWU7XG5cdCAgICB0aGlzLl9jYWxsSG9vaygncmVhZHknKTtcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRlYXJkb3duIHRoZSBpbnN0YW5jZSwgc2ltcGx5IGRlbGVnYXRlIHRvIHRoZSBpbnRlcm5hbFxuXHQgICAqIF9kZXN0cm95LlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcblx0ICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cFxuXHQgICAqL1xuXHRcblx0ICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG5cdCAgICB0aGlzLl9kZXN0cm95KHJlbW92ZSwgZGVmZXJDbGVhbnVwKTtcblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBQYXJ0aWFsbHkgY29tcGlsZSBhIHBpZWNlIG9mIERPTSBhbmQgcmV0dXJuIGFcblx0ICAgKiBkZWNvbXBpbGUgZnVuY3Rpb24uXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcblx0ICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cblx0ICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ11cblx0ICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cblx0ICAgKi9cblx0XG5cdCAgVnVlLnByb3RvdHlwZS4kY29tcGlsZSA9IGZ1bmN0aW9uIChlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcblx0ICAgIHJldHVybiBjb21waWxlKGVsLCB0aGlzLiRvcHRpb25zLCB0cnVlKSh0aGlzLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuXHQgIH07XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBUaGUgZXhwb3NlZCBWdWUgY29uc3RydWN0b3IuXG5cdCAqXG5cdCAqIEFQSSBjb252ZW50aW9uczpcblx0ICogLSBwdWJsaWMgQVBJIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgJGBcblx0ICogLSBpbnRlcm5hbCBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYF9gXG5cdCAqIC0gbm9uLXByZWZpeGVkIHByb3BlcnRpZXMgYXJlIGFzc3VtZWQgdG8gYmUgcHJveGllZCB1c2VyXG5cdCAqICAgZGF0YS5cblx0ICpcblx0ICogQGNvbnN0cnVjdG9yXG5cdCAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cblx0ICogQHB1YmxpY1xuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIFZ1ZShvcHRpb25zKSB7XG5cdCAgdGhpcy5faW5pdChvcHRpb25zKTtcblx0fVxuXHRcblx0Ly8gaW5zdGFsbCBpbnRlcm5hbHNcblx0aW5pdE1peGluKFZ1ZSk7XG5cdHN0YXRlTWl4aW4oVnVlKTtcblx0ZXZlbnRzTWl4aW4oVnVlKTtcblx0bGlmZWN5Y2xlTWl4aW4oVnVlKTtcblx0bWlzY01peGluKFZ1ZSk7XG5cdFxuXHQvLyBpbnN0YWxsIGluc3RhbmNlIEFQSXNcblx0ZGF0YUFQSShWdWUpO1xuXHRkb21BUEkoVnVlKTtcblx0ZXZlbnRzQVBJKFZ1ZSk7XG5cdGxpZmVjeWNsZUFQSShWdWUpO1xuXHRcblx0dmFyIHNsb3QgPSB7XG5cdFxuXHQgIHByaW9yaXR5OiBTTE9ULFxuXHQgIHBhcmFtczogWyduYW1lJ10sXG5cdFxuXHQgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG5cdCAgICAvLyB0aGlzIHdhcyByZXNvbHZlZCBkdXJpbmcgY29tcG9uZW50IHRyYW5zY2x1c2lvblxuXHQgICAgdmFyIG5hbWUgPSB0aGlzLnBhcmFtcy5uYW1lIHx8ICdkZWZhdWx0Jztcblx0ICAgIHZhciBjb250ZW50ID0gdGhpcy52bS5fc2xvdENvbnRlbnRzICYmIHRoaXMudm0uX3Nsb3RDb250ZW50c1tuYW1lXTtcblx0ICAgIGlmICghY29udGVudCB8fCAhY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcblx0ICAgICAgdGhpcy5mYWxsYmFjaygpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgdGhpcy5jb21waWxlKGNvbnRlbnQuY2xvbmVOb2RlKHRydWUpLCB0aGlzLnZtLl9jb250ZXh0LCB0aGlzLnZtKTtcblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBjb21waWxlOiBmdW5jdGlvbiBjb21waWxlKGNvbnRlbnQsIGNvbnRleHQsIGhvc3QpIHtcblx0ICAgIGlmIChjb250ZW50ICYmIGNvbnRleHQpIHtcblx0ICAgICAgaWYgKHRoaXMuZWwuaGFzQ2hpbGROb2RlcygpICYmIGNvbnRlbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLm5vZGVUeXBlID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuXHQgICAgICAgIC8vIGlmIHRoZSBpbnNlcnRlZCBzbG90IGhhcyB2LWlmXG5cdCAgICAgICAgLy8gaW5qZWN0IGZhbGxiYWNrIGNvbnRlbnQgYXMgdGhlIHYtZWxzZVxuXHQgICAgICAgIHZhciBlbHNlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuXHQgICAgICAgIGVsc2VCbG9jay5zZXRBdHRyaWJ1dGUoJ3YtZWxzZScsICcnKTtcblx0ICAgICAgICBlbHNlQmxvY2suaW5uZXJIVE1MID0gdGhpcy5lbC5pbm5lckhUTUw7XG5cdCAgICAgICAgLy8gdGhlIGVsc2UgYmxvY2sgc2hvdWxkIGJlIGNvbXBpbGVkIGluIGNoaWxkIHNjb3BlXG5cdCAgICAgICAgZWxzZUJsb2NrLl9jb250ZXh0ID0gdGhpcy52bTtcblx0ICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVsc2VCbG9jayk7XG5cdCAgICAgIH1cblx0ICAgICAgdmFyIHNjb3BlID0gaG9zdCA/IGhvc3QuX3Njb3BlIDogdGhpcy5fc2NvcGU7XG5cdCAgICAgIHRoaXMudW5saW5rID0gY29udGV4dC4kY29tcGlsZShjb250ZW50LCBob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG5cdCAgICB9XG5cdCAgICBpZiAoY29udGVudCkge1xuXHQgICAgICByZXBsYWNlKHRoaXMuZWwsIGNvbnRlbnQpO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmVtb3ZlKHRoaXMuZWwpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIGZhbGxiYWNrOiBmdW5jdGlvbiBmYWxsYmFjaygpIHtcblx0ICAgIHRoaXMuY29tcGlsZShleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKSwgdGhpcy52bSk7XG5cdCAgfSxcblx0XG5cdCAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG5cdCAgICBpZiAodGhpcy51bmxpbmspIHtcblx0ICAgICAgdGhpcy51bmxpbmsoKTtcblx0ICAgIH1cblx0ICB9XG5cdH07XG5cdFxuXHR2YXIgcGFydGlhbCA9IHtcblx0XG5cdCAgcHJpb3JpdHk6IFBBUlRJQUwsXG5cdFxuXHQgIHBhcmFtczogWyduYW1lJ10sXG5cdFxuXHQgIC8vIHdhdGNoIGNoYW5nZXMgdG8gbmFtZSBmb3IgZHluYW1pYyBwYXJ0aWFsc1xuXHQgIHBhcmFtV2F0Y2hlcnM6IHtcblx0ICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUodmFsdWUpIHtcblx0ICAgICAgdklmLnJlbW92ZS5jYWxsKHRoaXMpO1xuXHQgICAgICBpZiAodmFsdWUpIHtcblx0ICAgICAgICB0aGlzLmluc2VydCh2YWx1ZSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuXHQgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtcGFydGlhbCcpO1xuXHQgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG5cdCAgICB0aGlzLmluc2VydCh0aGlzLnBhcmFtcy5uYW1lKTtcblx0ICB9LFxuXHRcblx0ICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChpZCkge1xuXHQgICAgdmFyIHBhcnRpYWwgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3BhcnRpYWxzJywgaWQsIHRydWUpO1xuXHQgICAgaWYgKHBhcnRpYWwpIHtcblx0ICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCBwYXJ0aWFsKTtcblx0ICAgICAgdklmLmluc2VydC5jYWxsKHRoaXMpO1xuXHQgICAgfVxuXHQgIH0sXG5cdFxuXHQgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuXHQgICAgaWYgKHRoaXMuZnJhZykge1xuXHQgICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuXHQgICAgfVxuXHQgIH1cblx0fTtcblx0XG5cdHZhciBlbGVtZW50RGlyZWN0aXZlcyA9IHtcblx0ICBzbG90OiBzbG90LFxuXHQgIHBhcnRpYWw6IHBhcnRpYWxcblx0fTtcblx0XG5cdHZhciBjb252ZXJ0QXJyYXkgPSB2Rm9yLl9wb3N0UHJvY2Vzcztcblx0XG5cdC8qKlxuXHQgKiBMaW1pdCBmaWx0ZXIgZm9yIGFycmF5c1xuXHQgKlxuXHQgKiBAcGFyYW0ge051bWJlcn0gblxuXHQgKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IChEZWNpbWFsIGV4cGVjdGVkKVxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGxpbWl0QnkoYXJyLCBuLCBvZmZzZXQpIHtcblx0ICBvZmZzZXQgPSBvZmZzZXQgPyBwYXJzZUludChvZmZzZXQsIDEwKSA6IDA7XG5cdCAgbiA9IHRvTnVtYmVyKG4pO1xuXHQgIHJldHVybiB0eXBlb2YgbiA9PT0gJ251bWJlcicgPyBhcnIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBuKSA6IGFycjtcblx0fVxuXHRcblx0LyoqXG5cdCAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuXHQgKlxuXHQgKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG5cdCAqIEBwYXJhbSB7U3RyaW5nfSBbZGVsaW1pdGVyXVxuXHQgKiBAcGFyYW0ge1N0cmluZ30gLi4uZGF0YUtleXNcblx0ICovXG5cdFxuXHRmdW5jdGlvbiBmaWx0ZXJCeShhcnIsIHNlYXJjaCwgZGVsaW1pdGVyKSB7XG5cdCAgYXJyID0gY29udmVydEFycmF5KGFycik7XG5cdCAgaWYgKHNlYXJjaCA9PSBudWxsKSB7XG5cdCAgICByZXR1cm4gYXJyO1xuXHQgIH1cblx0ICBpZiAodHlwZW9mIHNlYXJjaCA9PT0gJ2Z1bmN0aW9uJykge1xuXHQgICAgcmV0dXJuIGFyci5maWx0ZXIoc2VhcmNoKTtcblx0ICB9XG5cdCAgLy8gY2FzdCB0byBsb3dlcmNhc2Ugc3RyaW5nXG5cdCAgc2VhcmNoID0gKCcnICsgc2VhcmNoKS50b0xvd2VyQ2FzZSgpO1xuXHQgIC8vIGFsbG93IG9wdGlvbmFsIGBpbmAgZGVsaW1pdGVyXG5cdCAgLy8gYmVjYXVzZSB3aHkgbm90XG5cdCAgdmFyIG4gPSBkZWxpbWl0ZXIgPT09ICdpbicgPyAzIDogMjtcblx0ICAvLyBleHRyYWN0IGFuZCBmbGF0dGVuIGtleXNcblx0ICB2YXIga2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIHRvQXJyYXkoYXJndW1lbnRzLCBuKSk7XG5cdCAgdmFyIHJlcyA9IFtdO1xuXHQgIHZhciBpdGVtLCBrZXksIHZhbCwgajtcblx0ICBmb3IgKHZhciBpID0gMCwgbCA9IGFyci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcblx0ICAgIGl0ZW0gPSBhcnJbaV07XG5cdCAgICB2YWwgPSBpdGVtICYmIGl0ZW0uJHZhbHVlIHx8IGl0ZW07XG5cdCAgICBqID0ga2V5cy5sZW5ndGg7XG5cdCAgICBpZiAoaikge1xuXHQgICAgICB3aGlsZSAoai0tKSB7XG5cdCAgICAgICAga2V5ID0ga2V5c1tqXTtcblx0ICAgICAgICBpZiAoa2V5ID09PSAnJGtleScgJiYgY29udGFpbnMoaXRlbS4ka2V5LCBzZWFyY2gpIHx8IGNvbnRhaW5zKGdldFBhdGgodmFsLCBrZXkpLCBzZWFyY2gpKSB7XG5cdCAgICAgICAgICByZXMucHVzaChpdGVtKTtcblx0ICAgICAgICAgIGJyZWFrO1xuXHQgICAgICAgIH1cblx0ICAgICAgfVxuXHQgICAgfSBlbHNlIGlmIChjb250YWlucyhpdGVtLCBzZWFyY2gpKSB7XG5cdCAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuXHQgICAgfVxuXHQgIH1cblx0ICByZXR1cm4gcmVzO1xuXHR9XG5cdFxuXHQvKipcblx0ICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG5cdCAqXG5cdCAqIEBwYXJhbSB7U3RyaW5nfEFycmF5PFN0cmluZz58RnVuY3Rpb259IC4uLnNvcnRLZXlzXG5cdCAqIEBwYXJhbSB7TnVtYmVyfSBbb3JkZXJdXG5cdCAqL1xuXHRcblx0ZnVuY3Rpb24gb3JkZXJCeShhcnIpIHtcblx0ICB2YXIgY29tcGFyYXRvciA9IG51bGw7XG5cdCAgdmFyIHNvcnRLZXlzID0gdW5kZWZpbmVkO1xuXHQgIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuXHRcblx0ICAvLyBkZXRlcm1pbmUgb3JkZXIgKGxhc3QgYXJndW1lbnQpXG5cdCAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG5cdCAgdmFyIG9yZGVyID0gYXJnc1thcmdzLmxlbmd0aCAtIDFdO1xuXHQgIGlmICh0eXBlb2Ygb3JkZXIgPT09ICdudW1iZXInKSB7XG5cdCAgICBvcmRlciA9IG9yZGVyIDwgMCA/IC0xIDogMTtcblx0ICAgIGFyZ3MgPSBhcmdzLmxlbmd0aCA+IDEgPyBhcmdzLnNsaWNlKDAsIC0xKSA6IGFyZ3M7XG5cdCAgfSBlbHNlIHtcblx0ICAgIG9yZGVyID0gMTtcblx0ICB9XG5cdFxuXHQgIC8vIGRldGVybWluZSBzb3J0S2V5cyAmIGNvbXBhcmF0b3Jcblx0ICB2YXIgZmlyc3RBcmcgPSBhcmdzWzBdO1xuXHQgIGlmICghZmlyc3RBcmcpIHtcblx0ICAgIHJldHVybiBhcnI7XG5cdCAgfSBlbHNlIGlmICh0eXBlb2YgZmlyc3RBcmcgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgIC8vIGN1c3RvbSBjb21wYXJhdG9yXG5cdCAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIpIHtcblx0ICAgICAgcmV0dXJuIGZpcnN0QXJnKGEsIGIpICogb3JkZXI7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICAvLyBzdHJpbmcga2V5cy4gZmxhdHRlbiBmaXJzdFxuXHQgICAgc29ydEtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcmdzKTtcblx0ICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYiwgaSkge1xuXHQgICAgICBpID0gaSB8fCAwO1xuXHQgICAgICByZXR1cm4gaSA+PSBzb3J0S2V5cy5sZW5ndGggLSAxID8gYmFzZUNvbXBhcmUoYSwgYiwgaSkgOiBiYXNlQ29tcGFyZShhLCBiLCBpKSB8fCBjb21wYXJhdG9yKGEsIGIsIGkgKyAxKTtcblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICBmdW5jdGlvbiBiYXNlQ29tcGFyZShhLCBiLCBzb3J0S2V5SW5kZXgpIHtcblx0ICAgIHZhciBzb3J0S2V5ID0gc29ydEtleXNbc29ydEtleUluZGV4XTtcblx0ICAgIGlmIChzb3J0S2V5KSB7XG5cdCAgICAgIGlmIChzb3J0S2V5ICE9PSAnJGtleScpIHtcblx0ICAgICAgICBpZiAoaXNPYmplY3QoYSkgJiYgJyR2YWx1ZScgaW4gYSkgYSA9IGEuJHZhbHVlO1xuXHQgICAgICAgIGlmIChpc09iamVjdChiKSAmJiAnJHZhbHVlJyBpbiBiKSBiID0gYi4kdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgICAgYSA9IGlzT2JqZWN0KGEpID8gZ2V0UGF0aChhLCBzb3J0S2V5KSA6IGE7XG5cdCAgICAgIGIgPSBpc09iamVjdChiKSA/IGdldFBhdGgoYiwgc29ydEtleSkgOiBiO1xuXHQgICAgfVxuXHQgICAgcmV0dXJuIGEgPT09IGIgPyAwIDogYSA+IGIgPyBvcmRlciA6IC1vcmRlcjtcblx0ICB9XG5cdFxuXHQgIC8vIHNvcnQgb24gYSBjb3B5IHRvIGF2b2lkIG11dGF0aW5nIG9yaWdpbmFsIGFycmF5XG5cdCAgcmV0dXJuIGFyci5zbGljZSgpLnNvcnQoY29tcGFyYXRvcik7XG5cdH1cblx0XG5cdC8qKlxuXHQgKiBTdHJpbmcgY29udGFpbiBoZWxwZXJcblx0ICpcblx0ICogQHBhcmFtIHsqfSB2YWxcblx0ICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuXHQgKi9cblx0XG5cdGZ1bmN0aW9uIGNvbnRhaW5zKHZhbCwgc2VhcmNoKSB7XG5cdCAgdmFyIGk7XG5cdCAgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuXHQgICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuXHQgICAgaSA9IGtleXMubGVuZ3RoO1xuXHQgICAgd2hpbGUgKGktLSkge1xuXHQgICAgICBpZiAoY29udGFpbnModmFsW2tleXNbaV1dLCBzZWFyY2gpKSB7XG5cdCAgICAgICAgcmV0dXJuIHRydWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9IGVsc2UgaWYgKGlzQXJyYXkodmFsKSkge1xuXHQgICAgaSA9IHZhbC5sZW5ndGg7XG5cdCAgICB3aGlsZSAoaS0tKSB7XG5cdCAgICAgIGlmIChjb250YWlucyh2YWxbaV0sIHNlYXJjaCkpIHtcblx0ICAgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH0gZWxzZSBpZiAodmFsICE9IG51bGwpIHtcblx0ICAgIHJldHVybiB2YWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoKSA+IC0xO1xuXHQgIH1cblx0fVxuXHRcblx0dmFyIGRpZ2l0c1JFID0gLyhcXGR7M30pKD89XFxkKS9nO1xuXHRcblx0Ly8gYXNzZXQgY29sbGVjdGlvbnMgbXVzdCBiZSBhIHBsYWluIG9iamVjdC5cblx0dmFyIGZpbHRlcnMgPSB7XG5cdFxuXHQgIG9yZGVyQnk6IG9yZGVyQnksXG5cdCAgZmlsdGVyQnk6IGZpbHRlckJ5LFxuXHQgIGxpbWl0Qnk6IGxpbWl0QnksXG5cdFxuXHQgIC8qKlxuXHQgICAqIFN0cmluZ2lmeSB2YWx1ZS5cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRlbnRcblx0ICAgKi9cblx0XG5cdCAganNvbjoge1xuXHQgICAgcmVhZDogZnVuY3Rpb24gcmVhZCh2YWx1ZSwgaW5kZW50KSB7XG5cdCAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgbnVsbCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBpbmRlbnQgOiAyKTtcblx0ICAgIH0sXG5cdCAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUodmFsdWUpIHtcblx0ICAgICAgdHJ5IHtcblx0ICAgICAgICByZXR1cm4gSlNPTi5wYXJzZSh2YWx1ZSk7XG5cdCAgICAgIH0gY2F0Y2ggKGUpIHtcblx0ICAgICAgICByZXR1cm4gdmFsdWU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnYWJjJyA9PiAnQWJjJ1xuXHQgICAqL1xuXHRcblx0ICBjYXBpdGFsaXplOiBmdW5jdGlvbiBjYXBpdGFsaXplKHZhbHVlKSB7XG5cdCAgICBpZiAoIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG5cdCAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG5cdCAgICByZXR1cm4gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKTtcblx0ICB9LFxuXHRcblx0ICAvKipcblx0ICAgKiAnYWJjJyA9PiAnQUJDJ1xuXHQgICAqL1xuXHRcblx0ICB1cHBlcmNhc2U6IGZ1bmN0aW9uIHVwcGVyY2FzZSh2YWx1ZSkge1xuXHQgICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpIDogJyc7XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogJ0FiQycgPT4gJ2FiYydcblx0ICAgKi9cblx0XG5cdCAgbG93ZXJjYXNlOiBmdW5jdGlvbiBsb3dlcmNhc2UodmFsdWUpIHtcblx0ICAgIHJldHVybiB2YWx1ZSB8fCB2YWx1ZSA9PT0gMCA/IHZhbHVlLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKSA6ICcnO1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqIDEyMzQ1ID0+ICQxMiwzNDUuMDBcblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7U3RyaW5nfSBzaWduXG5cdCAgICogQHBhcmFtIHtOdW1iZXJ9IGRlY2ltYWxzIERlY2ltYWwgcGxhY2VzXG5cdCAgICovXG5cdFxuXHQgIGN1cnJlbmN5OiBmdW5jdGlvbiBjdXJyZW5jeSh2YWx1ZSwgX2N1cnJlbmN5LCBkZWNpbWFscykge1xuXHQgICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcblx0ICAgIGlmICghaXNGaW5pdGUodmFsdWUpIHx8ICF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuXHQgICAgX2N1cnJlbmN5ID0gX2N1cnJlbmN5ICE9IG51bGwgPyBfY3VycmVuY3kgOiAnJCc7XG5cdCAgICBkZWNpbWFscyA9IGRlY2ltYWxzICE9IG51bGwgPyBkZWNpbWFscyA6IDI7XG5cdCAgICB2YXIgc3RyaW5naWZpZWQgPSBNYXRoLmFicyh2YWx1ZSkudG9GaXhlZChkZWNpbWFscyk7XG5cdCAgICB2YXIgX2ludCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoMCwgLTEgLSBkZWNpbWFscykgOiBzdHJpbmdpZmllZDtcblx0ICAgIHZhciBpID0gX2ludC5sZW5ndGggJSAzO1xuXHQgICAgdmFyIGhlYWQgPSBpID4gMCA/IF9pbnQuc2xpY2UoMCwgaSkgKyAoX2ludC5sZW5ndGggPiAzID8gJywnIDogJycpIDogJyc7XG5cdCAgICB2YXIgX2Zsb2F0ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgtMSAtIGRlY2ltYWxzKSA6ICcnO1xuXHQgICAgdmFyIHNpZ24gPSB2YWx1ZSA8IDAgPyAnLScgOiAnJztcblx0ICAgIHJldHVybiBzaWduICsgX2N1cnJlbmN5ICsgaGVhZCArIF9pbnQuc2xpY2UoaSkucmVwbGFjZShkaWdpdHNSRSwgJyQxLCcpICsgX2Zsb2F0O1xuXHQgIH0sXG5cdFxuXHQgIC8qKlxuXHQgICAqICdpdGVtJyA9PiAnaXRlbXMnXG5cdCAgICpcblx0ICAgKiBAcGFyYW1zXG5cdCAgICogIGFuIGFycmF5IG9mIHN0cmluZ3MgY29ycmVzcG9uZGluZyB0b1xuXHQgICAqICB0aGUgc2luZ2xlLCBkb3VibGUsIHRyaXBsZSAuLi4gZm9ybXMgb2YgdGhlIHdvcmQgdG9cblx0ICAgKiAgYmUgcGx1cmFsaXplZC4gV2hlbiB0aGUgbnVtYmVyIHRvIGJlIHBsdXJhbGl6ZWRcblx0ICAgKiAgZXhjZWVkcyB0aGUgbGVuZ3RoIG9mIHRoZSBhcmdzLCBpdCB3aWxsIHVzZSB0aGUgbGFzdFxuXHQgICAqICBlbnRyeSBpbiB0aGUgYXJyYXkuXG5cdCAgICpcblx0ICAgKiAgZS5nLiBbJ3NpbmdsZScsICdkb3VibGUnLCAndHJpcGxlJywgJ211bHRpcGxlJ11cblx0ICAgKi9cblx0XG5cdCAgcGx1cmFsaXplOiBmdW5jdGlvbiBwbHVyYWxpemUodmFsdWUpIHtcblx0ICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuXHQgICAgdmFyIGxlbmd0aCA9IGFyZ3MubGVuZ3RoO1xuXHQgICAgaWYgKGxlbmd0aCA+IDEpIHtcblx0ICAgICAgdmFyIGluZGV4ID0gdmFsdWUgJSAxMCAtIDE7XG5cdCAgICAgIHJldHVybiBpbmRleCBpbiBhcmdzID8gYXJnc1tpbmRleF0gOiBhcmdzW2xlbmd0aCAtIDFdO1xuXHQgICAgfSBlbHNlIHtcblx0ICAgICAgcmV0dXJuIGFyZ3NbMF0gKyAodmFsdWUgPT09IDEgPyAnJyA6ICdzJyk7XG5cdCAgICB9XG5cdCAgfSxcblx0XG5cdCAgLyoqXG5cdCAgICogRGVib3VuY2UgYSBoYW5kbGVyIGZ1bmN0aW9uLlxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlclxuXHQgICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheSA9IDMwMFxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0ICBkZWJvdW5jZTogZnVuY3Rpb24gZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpIHtcblx0ICAgIGlmICghaGFuZGxlcikgcmV0dXJuO1xuXHQgICAgaWYgKCFkZWxheSkge1xuXHQgICAgICBkZWxheSA9IDMwMDtcblx0ICAgIH1cblx0ICAgIHJldHVybiBfZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpO1xuXHQgIH1cblx0fTtcblx0XG5cdGZ1bmN0aW9uIGluc3RhbGxHbG9iYWxBUEkgKFZ1ZSkge1xuXHQgIC8qKlxuXHQgICAqIFZ1ZSBhbmQgZXZlcnkgY29uc3RydWN0b3IgdGhhdCBleHRlbmRzIFZ1ZSBoYXMgYW5cblx0ICAgKiBhc3NvY2lhdGVkIG9wdGlvbnMgb2JqZWN0LCB3aGljaCBjYW4gYmUgYWNjZXNzZWQgZHVyaW5nXG5cdCAgICogY29tcGlsYXRpb24gc3RlcHMgYXMgYHRoaXMuY29uc3RydWN0b3Iub3B0aW9uc2AuXG5cdCAgICpcblx0ICAgKiBUaGVzZSBjYW4gYmUgc2VlbiBhcyB0aGUgZGVmYXVsdCBvcHRpb25zIG9mIGV2ZXJ5XG5cdCAgICogVnVlIGluc3RhbmNlLlxuXHQgICAqL1xuXHRcblx0ICBWdWUub3B0aW9ucyA9IHtcblx0ICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG5cdCAgICBlbGVtZW50RGlyZWN0aXZlczogZWxlbWVudERpcmVjdGl2ZXMsXG5cdCAgICBmaWx0ZXJzOiBmaWx0ZXJzLFxuXHQgICAgdHJhbnNpdGlvbnM6IHt9LFxuXHQgICAgY29tcG9uZW50czoge30sXG5cdCAgICBwYXJ0aWFsczoge30sXG5cdCAgICByZXBsYWNlOiB0cnVlXG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogRXhwb3NlIHVzZWZ1bCBpbnRlcm5hbHNcblx0ICAgKi9cblx0XG5cdCAgVnVlLnV0aWwgPSB1dGlsO1xuXHQgIFZ1ZS5jb25maWcgPSBjb25maWc7XG5cdCAgVnVlLnNldCA9IHNldDtcblx0ICBWdWVbJ2RlbGV0ZSddID0gZGVsO1xuXHQgIFZ1ZS5uZXh0VGljayA9IG5leHRUaWNrO1xuXHRcblx0ICAvKipcblx0ICAgKiBUaGUgZm9sbG93aW5nIGFyZSBleHBvc2VkIGZvciBhZHZhbmNlZCB1c2FnZSAvIHBsdWdpbnNcblx0ICAgKi9cblx0XG5cdCAgVnVlLmNvbXBpbGVyID0gY29tcGlsZXI7XG5cdCAgVnVlLkZyYWdtZW50RmFjdG9yeSA9IEZyYWdtZW50RmFjdG9yeTtcblx0ICBWdWUuaW50ZXJuYWxEaXJlY3RpdmVzID0gaW50ZXJuYWxEaXJlY3RpdmVzO1xuXHQgIFZ1ZS5wYXJzZXJzID0ge1xuXHQgICAgcGF0aDogcGF0aCxcblx0ICAgIHRleHQ6IHRleHQsXG5cdCAgICB0ZW1wbGF0ZTogdGVtcGxhdGUsXG5cdCAgICBkaXJlY3RpdmU6IGRpcmVjdGl2ZSxcblx0ICAgIGV4cHJlc3Npb246IGV4cHJlc3Npb25cblx0ICB9O1xuXHRcblx0ICAvKipcblx0ICAgKiBFYWNoIGluc3RhbmNlIGNvbnN0cnVjdG9yLCBpbmNsdWRpbmcgVnVlLCBoYXMgYSB1bmlxdWVcblx0ICAgKiBjaWQuIFRoaXMgZW5hYmxlcyB1cyB0byBjcmVhdGUgd3JhcHBlZCBcImNoaWxkXG5cdCAgICogY29uc3RydWN0b3JzXCIgZm9yIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgYW5kIGNhY2hlIHRoZW0uXG5cdCAgICovXG5cdFxuXHQgIFZ1ZS5jaWQgPSAwO1xuXHQgIHZhciBjaWQgPSAxO1xuXHRcblx0ICAvKipcblx0ICAgKiBDbGFzcyBpbmhlcml0YW5jZVxuXHQgICAqXG5cdCAgICogQHBhcmFtIHtPYmplY3R9IGV4dGVuZE9wdGlvbnNcblx0ICAgKi9cblx0XG5cdCAgVnVlLmV4dGVuZCA9IGZ1bmN0aW9uIChleHRlbmRPcHRpb25zKSB7XG5cdCAgICBleHRlbmRPcHRpb25zID0gZXh0ZW5kT3B0aW9ucyB8fCB7fTtcblx0ICAgIHZhciBTdXBlciA9IHRoaXM7XG5cdCAgICB2YXIgaXNGaXJzdEV4dGVuZCA9IFN1cGVyLmNpZCA9PT0gMDtcblx0ICAgIGlmIChpc0ZpcnN0RXh0ZW5kICYmIGV4dGVuZE9wdGlvbnMuX0N0b3IpIHtcblx0ICAgICAgcmV0dXJuIGV4dGVuZE9wdGlvbnMuX0N0b3I7XG5cdCAgICB9XG5cdCAgICB2YXIgbmFtZSA9IGV4dGVuZE9wdGlvbnMubmFtZSB8fCBTdXBlci5vcHRpb25zLm5hbWU7XG5cdCAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICBpZiAoIS9eW2EtekEtWl1bXFx3LV0qJC8udGVzdChuYW1lKSkge1xuXHQgICAgICAgIHdhcm4oJ0ludmFsaWQgY29tcG9uZW50IG5hbWU6IFwiJyArIG5hbWUgKyAnXCIuIENvbXBvbmVudCBuYW1lcyAnICsgJ2NhbiBvbmx5IGNvbnRhaW4gYWxwaGFudW1lcmljIGNoYXJhY2F0ZXJzIGFuZCB0aGUgaHlwaGVuLicpO1xuXHQgICAgICAgIG5hbWUgPSBudWxsO1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgICB2YXIgU3ViID0gY3JlYXRlQ2xhc3MobmFtZSB8fCAnVnVlQ29tcG9uZW50Jyk7XG5cdCAgICBTdWIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXBlci5wcm90b3R5cGUpO1xuXHQgICAgU3ViLnByb3RvdHlwZS5jb25zdHJ1Y3RvciA9IFN1Yjtcblx0ICAgIFN1Yi5jaWQgPSBjaWQrKztcblx0ICAgIFN1Yi5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFN1cGVyLm9wdGlvbnMsIGV4dGVuZE9wdGlvbnMpO1xuXHQgICAgU3ViWydzdXBlciddID0gU3VwZXI7XG5cdCAgICAvLyBhbGxvdyBmdXJ0aGVyIGV4dGVuc2lvblxuXHQgICAgU3ViLmV4dGVuZCA9IFN1cGVyLmV4dGVuZDtcblx0ICAgIC8vIGNyZWF0ZSBhc3NldCByZWdpc3RlcnMsIHNvIGV4dGVuZGVkIGNsYXNzZXNcblx0ICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cblx0ICAgIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG5cdCAgICAgIFN1Ylt0eXBlXSA9IFN1cGVyW3R5cGVdO1xuXHQgICAgfSk7XG5cdCAgICAvLyBlbmFibGUgcmVjdXJzaXZlIHNlbGYtbG9va3VwXG5cdCAgICBpZiAobmFtZSkge1xuXHQgICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuXHQgICAgfVxuXHQgICAgLy8gY2FjaGUgY29uc3RydWN0b3Jcblx0ICAgIGlmIChpc0ZpcnN0RXh0ZW5kKSB7XG5cdCAgICAgIGV4dGVuZE9wdGlvbnMuX0N0b3IgPSBTdWI7XG5cdCAgICB9XG5cdCAgICByZXR1cm4gU3ViO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3ViLWNsYXNzIGNvbnN0cnVjdG9yIHdpdGggdGhlXG5cdCAgICogZ2l2ZW4gbmFtZS4gVGhpcyBnaXZlcyB1cyBtdWNoIG5pY2VyIG91dHB1dCB3aGVuXG5cdCAgICogbG9nZ2luZyBpbnN0YW5jZXMgaW4gdGhlIGNvbnNvbGUuXG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuXHQgICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuXHQgICAqL1xuXHRcblx0ICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhuYW1lKSB7XG5cdCAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuXHQgICAgcmV0dXJuIG5ldyBGdW5jdGlvbigncmV0dXJuIGZ1bmN0aW9uICcgKyBjbGFzc2lmeShuYW1lKSArICcgKG9wdGlvbnMpIHsgdGhpcy5faW5pdChvcHRpb25zKSB9JykoKTtcblx0ICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFBsdWdpbiBzeXN0ZW1cblx0ICAgKlxuXHQgICAqIEBwYXJhbSB7T2JqZWN0fSBwbHVnaW5cblx0ICAgKi9cblx0XG5cdCAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcblx0ICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuXHQgICAgaWYgKHBsdWdpbi5pbnN0YWxsZWQpIHtcblx0ICAgICAgcmV0dXJuO1xuXHQgICAgfVxuXHQgICAgLy8gYWRkaXRpb25hbCBwYXJhbWV0ZXJzXG5cdCAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcblx0ICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcblx0ICAgIGlmICh0eXBlb2YgcGx1Z2luLmluc3RhbGwgPT09ICdmdW5jdGlvbicpIHtcblx0ICAgICAgcGx1Z2luLmluc3RhbGwuYXBwbHkocGx1Z2luLCBhcmdzKTtcblx0ICAgIH0gZWxzZSB7XG5cdCAgICAgIHBsdWdpbi5hcHBseShudWxsLCBhcmdzKTtcblx0ICAgIH1cblx0ICAgIHBsdWdpbi5pbnN0YWxsZWQgPSB0cnVlO1xuXHQgICAgcmV0dXJuIHRoaXM7XG5cdCAgfTtcblx0XG5cdCAgLyoqXG5cdCAgICogQXBwbHkgYSBnbG9iYWwgbWl4aW4gYnkgbWVyZ2luZyBpdCBpbnRvIHRoZSBkZWZhdWx0XG5cdCAgICogb3B0aW9ucy5cblx0ICAgKi9cblx0XG5cdCAgVnVlLm1peGluID0gZnVuY3Rpb24gKG1peGluKSB7XG5cdCAgICBWdWUub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhWdWUub3B0aW9ucywgbWl4aW4pO1xuXHQgIH07XG5cdFxuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhc3NldCByZWdpc3RyYXRpb24gbWV0aG9kcyB3aXRoIHRoZSBmb2xsb3dpbmdcblx0ICAgKiBzaWduYXR1cmU6XG5cdCAgICpcblx0ICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcblx0ICAgKiBAcGFyYW0geyp9IGRlZmluaXRpb25cblx0ICAgKi9cblx0XG5cdCAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcblx0ICAgIFZ1ZVt0eXBlXSA9IGZ1bmN0aW9uIChpZCwgZGVmaW5pdGlvbikge1xuXHQgICAgICBpZiAoIWRlZmluaXRpb24pIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXTtcblx0ICAgICAgfSBlbHNlIHtcblx0ICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cblx0ICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuXHQgICAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIChjb21tb25UYWdSRS50ZXN0KGlkKSB8fCByZXNlcnZlZFRhZ1JFLnRlc3QoaWQpKSkge1xuXHQgICAgICAgICAgICB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBpZCk7XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG5cdCAgICAgICAgICBpZiAoIWRlZmluaXRpb24ubmFtZSkge1xuXHQgICAgICAgICAgICBkZWZpbml0aW9uLm5hbWUgPSBpZDtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICAgIGRlZmluaXRpb24gPSBWdWUuZXh0ZW5kKGRlZmluaXRpb24pO1xuXHQgICAgICAgIH1cblx0ICAgICAgICB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdID0gZGVmaW5pdGlvbjtcblx0ICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjtcblx0ICAgICAgfVxuXHQgICAgfTtcblx0ICB9KTtcblx0XG5cdCAgLy8gZXhwb3NlIGludGVybmFsIHRyYW5zaXRpb24gQVBJXG5cdCAgZXh0ZW5kKFZ1ZS50cmFuc2l0aW9uLCB0cmFuc2l0aW9uKTtcblx0fVxuXHRcblx0aW5zdGFsbEdsb2JhbEFQSShWdWUpO1xuXHRcblx0VnVlLnZlcnNpb24gPSAnMS4wLjI2Jztcblx0XG5cdC8vIGRldnRvb2xzIGdsb2JhbCBob29rXG5cdC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHQgIGlmIChjb25maWcuZGV2dG9vbHMpIHtcblx0ICAgIGlmIChkZXZ0b29scykge1xuXHQgICAgICBkZXZ0b29scy5lbWl0KCdpbml0JywgVnVlKTtcblx0ICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBpbkJyb3dzZXIgJiYgL0Nocm9tZVxcL1xcZCsvLnRlc3Qod2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQpKSB7XG5cdCAgICAgIGNvbnNvbGUubG9nKCdEb3dubG9hZCB0aGUgVnVlIERldnRvb2xzIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBleHBlcmllbmNlOlxcbicgKyAnaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1kZXZ0b29scycpO1xuXHQgICAgfVxuXHQgIH1cblx0fSwgMCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IFZ1ZTtcblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovfS5jYWxsKGV4cG9ydHMsIChmdW5jdGlvbigpIHsgcmV0dXJuIHRoaXM7IH0oKSksIF9fd2VicGFja19yZXF1aXJlX18oMTkpKSlcblxuLyoqKi8gfSxcbi8qIDIxOCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbigpIHsgdGhyb3cgbmV3IEVycm9yKFwiZGVmaW5lIGNhbm5vdCBiZSB1c2VkIGluZGlyZWN0XCIpOyB9O1xyXG5cblxuLyoqKi8gfSxcbi8qIDIxOSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcclxuXHRcdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xyXG5cdFx0XHRtb2R1bGUucGF0aHMgPSBbXTtcclxuXHRcdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xyXG5cdFx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcclxuXHRcdH1cclxuXHRcdHJldHVybiBtb2R1bGU7XHJcblx0fVxyXG5cblxuLyoqKi8gfSxcbi8qIDIyMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0LyogKGlnbm9yZWQpICovXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHZ1ZS5qc1xuICoqLyIsIiBcdC8vIGluc3RhbGwgYSBKU09OUCBjYWxsYmFjayBmb3IgY2h1bmsgbG9hZGluZ1xuIFx0dmFyIHBhcmVudEpzb25wRnVuY3Rpb24gPSB3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl07XG4gXHR3aW5kb3dbXCJ3ZWJwYWNrSnNvbnBcIl0gPSBmdW5jdGlvbiB3ZWJwYWNrSnNvbnBDYWxsYmFjayhjaHVua0lkcywgbW9yZU1vZHVsZXMpIHtcbiBcdFx0Ly8gYWRkIFwibW9yZU1vZHVsZXNcIiB0byB0aGUgbW9kdWxlcyBvYmplY3QsXG4gXHRcdC8vIHRoZW4gZmxhZyBhbGwgXCJjaHVua0lkc1wiIGFzIGxvYWRlZCBhbmQgZmlyZSBjYWxsYmFja1xuIFx0XHR2YXIgbW9kdWxlSWQsIGNodW5rSWQsIGkgPSAwLCBjYWxsYmFja3MgPSBbXTtcbiBcdFx0Zm9yKDtpIDwgY2h1bmtJZHMubGVuZ3RoOyBpKyspIHtcbiBcdFx0XHRjaHVua0lkID0gY2h1bmtJZHNbaV07XG4gXHRcdFx0aWYoaW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdKVxuIFx0XHRcdFx0Y2FsbGJhY2tzLnB1c2guYXBwbHkoY2FsbGJhY2tzLCBpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0pO1xuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXSA9IDA7XG4gXHRcdH1cbiBcdFx0Zm9yKG1vZHVsZUlkIGluIG1vcmVNb2R1bGVzKSB7XG4gXHRcdFx0bW9kdWxlc1ttb2R1bGVJZF0gPSBtb3JlTW9kdWxlc1ttb2R1bGVJZF07XG4gXHRcdH1cbiBcdFx0aWYocGFyZW50SnNvbnBGdW5jdGlvbikgcGFyZW50SnNvbnBGdW5jdGlvbihjaHVua0lkcywgbW9yZU1vZHVsZXMpO1xuIFx0XHR3aGlsZShjYWxsYmFja3MubGVuZ3RoKVxuIFx0XHRcdGNhbGxiYWNrcy5zaGlmdCgpLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdH07XG5cbiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIG9iamVjdCB0byBzdG9yZSBsb2FkZWQgYW5kIGxvYWRpbmcgY2h1bmtzXG4gXHQvLyBcIjBcIiBtZWFucyBcImFscmVhZHkgbG9hZGVkXCJcbiBcdC8vIEFycmF5IG1lYW5zIFwibG9hZGluZ1wiLCBhcnJheSBjb250YWlucyBjYWxsYmFja3NcbiBcdHZhciBpbnN0YWxsZWRDaHVua3MgPSB7XG4gXHRcdDA6MCxcbiBcdFx0MTowLFxuIFx0XHQyOjBcbiBcdH07XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuIFx0Ly8gVGhpcyBmaWxlIGNvbnRhaW5zIG9ubHkgdGhlIGVudHJ5IGNodW5rLlxuIFx0Ly8gVGhlIGNodW5rIGxvYWRpbmcgZnVuY3Rpb24gZm9yIGFkZGl0aW9uYWwgY2h1bmtzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmUgPSBmdW5jdGlvbiByZXF1aXJlRW5zdXJlKGNodW5rSWQsIGNhbGxiYWNrKSB7XG4gXHRcdC8vIFwiMFwiIGlzIHRoZSBzaWduYWwgZm9yIFwiYWxyZWFkeSBsb2FkZWRcIlxuIFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gPT09IDApXG4gXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwobnVsbCwgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gYW4gYXJyYXkgbWVhbnMgXCJjdXJyZW50bHkgbG9hZGluZ1wiLlxuIFx0XHRpZihpbnN0YWxsZWRDaHVua3NbY2h1bmtJZF0gIT09IHVuZGVmaW5lZCkge1xuIFx0XHRcdGluc3RhbGxlZENodW5rc1tjaHVua0lkXS5wdXNoKGNhbGxiYWNrKTtcbiBcdFx0fSBlbHNlIHtcbiBcdFx0XHQvLyBzdGFydCBjaHVuayBsb2FkaW5nXG4gXHRcdFx0aW5zdGFsbGVkQ2h1bmtzW2NodW5rSWRdID0gW2NhbGxiYWNrXTtcbiBcdFx0XHR2YXIgaGVhZCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF07XG4gXHRcdFx0dmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuIFx0XHRcdHNjcmlwdC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7XG4gXHRcdFx0c2NyaXB0LmNoYXJzZXQgPSAndXRmLTgnO1xuIFx0XHRcdHNjcmlwdC5hc3luYyA9IHRydWU7XG5cbiBcdFx0XHRzY3JpcHQuc3JjID0gX193ZWJwYWNrX3JlcXVpcmVfXy5wICsgXCJcIiArIGNodW5rSWQgKyBcIi5hcHAuanNcIjtcbiBcdFx0XHRoZWFkLmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiL2h5YnJpZC10aG9yaXVtL2Rldi9hcHAvXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCBjODUwM2VmZGJmMmU2ZmUwNWQzNVxuICoqLyIsImltcG9ydCBWdWUgZnJvbSAnVnVlJztcbmltcG9ydCBWdWVSb3V0ZXIgZnJvbSAndnVlLXJvdXRlcic7XG5pbXBvcnQgcm91dGVzIGZyb20gJy4vcm91dGVzJztcbmltcG9ydCBIeWJyaWRUaG9yaXVtIGZyb20gJ2h5YnJpZC10aG9yaXVtJztcbmltcG9ydCBQcmlzbSBmcm9tICdwcmlzbWpzJztcbmltcG9ydCBTaWRlTmF2IGZyb20gJy4vY29tcG9uZW50cy9zaWRlLW5hdi9pbmRleC52dWUnO1xuaW1wb3J0IFNpdGVIZWFkZXIgZnJvbSAnLi9jb21wb25lbnRzL3NpdGUtaGVhZGVyL2luZGV4LnZ1ZSc7XG5WdWUuY29uZmlnLmRlYnVnID0gdHJ1ZTtcblxuVnVlLnVzZShWdWVSb3V0ZXIpO1xuVnVlLnVzZShIeWJyaWRUaG9yaXVtKTtcblxubGV0IHJvdXRlciA9IG5ldyBWdWVSb3V0ZXIoKTtcbmxldCBBcHAgPSBWdWUuZXh0ZW5kKHtcbiAgY29tcG9uZW50czoge1xuICAgIFNpZGVOYXYsXG4gICAgU2l0ZUhlYWRlclxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBsaWdlckVuZFBvaW50OiAnaHR0cHM6Ly9hcGkuY21zLnRlbHVzLmNvbS9sZWdhbHMnLFxuICAgICAgbGlnZXJBcHBsaWNhdGlvbktleTogJ2I5NzM4ZDY3Yjg5ZGZjNzgyNzQ2ZDRhOWNmNGExMDkzJ1xuICAgIH07XG4gIH1cbn0pO1xucm91dGVyLm1hcChyb3V0ZXMpO1xucm91dGVyLmFmdGVyRWFjaCgoKSA9PiB7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIFByaXNtLmhpZ2hsaWdodEFsbCgpO1xuICB9LCAwKTtcbn0pO1xucm91dGVyLnN0YXJ0KEFwcCwgJyNhcHAtbWFpbicpO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9kZXYvc3JjL21haW4uanNcbiAqKi8iLCIvKlxyXG5cdE1JVCBMaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwXHJcblx0QXV0aG9yIFRvYmlhcyBLb3BwZXJzIEBzb2tyYVxyXG4qL1xyXG4vLyBjc3MgYmFzZSBjb2RlLCBpbmplY3RlZCBieSB0aGUgY3NzLWxvYWRlclxyXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKCkge1xyXG5cdHZhciBsaXN0ID0gW107XHJcblxyXG5cdC8vIHJldHVybiB0aGUgbGlzdCBvZiBtb2R1bGVzIGFzIGNzcyBzdHJpbmdcclxuXHRsaXN0LnRvU3RyaW5nID0gZnVuY3Rpb24gdG9TdHJpbmcoKSB7XHJcblx0XHR2YXIgcmVzdWx0ID0gW107XHJcblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgdGhpcy5sZW5ndGg7IGkrKykge1xyXG5cdFx0XHR2YXIgaXRlbSA9IHRoaXNbaV07XHJcblx0XHRcdGlmKGl0ZW1bMl0pIHtcclxuXHRcdFx0XHRyZXN1bHQucHVzaChcIkBtZWRpYSBcIiArIGl0ZW1bMl0gKyBcIntcIiArIGl0ZW1bMV0gKyBcIn1cIik7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0cmVzdWx0LnB1c2goaXRlbVsxXSk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdHJldHVybiByZXN1bHQuam9pbihcIlwiKTtcclxuXHR9O1xyXG5cclxuXHQvLyBpbXBvcnQgYSBsaXN0IG9mIG1vZHVsZXMgaW50byB0aGUgbGlzdFxyXG5cdGxpc3QuaSA9IGZ1bmN0aW9uKG1vZHVsZXMsIG1lZGlhUXVlcnkpIHtcclxuXHRcdGlmKHR5cGVvZiBtb2R1bGVzID09PSBcInN0cmluZ1wiKVxyXG5cdFx0XHRtb2R1bGVzID0gW1tudWxsLCBtb2R1bGVzLCBcIlwiXV07XHJcblx0XHR2YXIgYWxyZWFkeUltcG9ydGVkTW9kdWxlcyA9IHt9O1xyXG5cdFx0Zm9yKHZhciBpID0gMDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGlkID0gdGhpc1tpXVswXTtcclxuXHRcdFx0aWYodHlwZW9mIGlkID09PSBcIm51bWJlclwiKVxyXG5cdFx0XHRcdGFscmVhZHlJbXBvcnRlZE1vZHVsZXNbaWRdID0gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGZvcihpID0gMDsgaSA8IG1vZHVsZXMubGVuZ3RoOyBpKyspIHtcclxuXHRcdFx0dmFyIGl0ZW0gPSBtb2R1bGVzW2ldO1xyXG5cdFx0XHQvLyBza2lwIGFscmVhZHkgaW1wb3J0ZWQgbW9kdWxlXHJcblx0XHRcdC8vIHRoaXMgaW1wbGVtZW50YXRpb24gaXMgbm90IDEwMCUgcGVyZmVjdCBmb3Igd2VpcmQgbWVkaWEgcXVlcnkgY29tYmluYXRpb25zXHJcblx0XHRcdC8vICB3aGVuIGEgbW9kdWxlIGlzIGltcG9ydGVkIG11bHRpcGxlIHRpbWVzIHdpdGggZGlmZmVyZW50IG1lZGlhIHF1ZXJpZXMuXHJcblx0XHRcdC8vICBJIGhvcGUgdGhpcyB3aWxsIG5ldmVyIG9jY3VyIChIZXkgdGhpcyB3YXkgd2UgaGF2ZSBzbWFsbGVyIGJ1bmRsZXMpXHJcblx0XHRcdGlmKHR5cGVvZiBpdGVtWzBdICE9PSBcIm51bWJlclwiIHx8ICFhbHJlYWR5SW1wb3J0ZWRNb2R1bGVzW2l0ZW1bMF1dKSB7XHJcblx0XHRcdFx0aWYobWVkaWFRdWVyeSAmJiAhaXRlbVsyXSkge1xyXG5cdFx0XHRcdFx0aXRlbVsyXSA9IG1lZGlhUXVlcnk7XHJcblx0XHRcdFx0fSBlbHNlIGlmKG1lZGlhUXVlcnkpIHtcclxuXHRcdFx0XHRcdGl0ZW1bMl0gPSBcIihcIiArIGl0ZW1bMl0gKyBcIikgYW5kIChcIiArIG1lZGlhUXVlcnkgKyBcIilcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0bGlzdC5wdXNoKGl0ZW0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0fTtcclxuXHRyZXR1cm4gbGlzdDtcclxufTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcbiAqKiBtb2R1bGUgaWQgPSAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKlxuXHRNSVQgTGljZW5zZSBodHRwOi8vd3d3Lm9wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL21pdC1saWNlbnNlLnBocFxuXHRBdXRob3IgVG9iaWFzIEtvcHBlcnMgQHNva3JhXG4qL1xudmFyIHN0eWxlc0luRG9tID0ge30sXG5cdG1lbW9pemUgPSBmdW5jdGlvbihmbikge1xuXHRcdHZhciBtZW1vO1xuXHRcdHJldHVybiBmdW5jdGlvbiAoKSB7XG5cdFx0XHRpZiAodHlwZW9mIG1lbW8gPT09IFwidW5kZWZpbmVkXCIpIG1lbW8gPSBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuXHRcdFx0cmV0dXJuIG1lbW87XG5cdFx0fTtcblx0fSxcblx0aXNPbGRJRSA9IG1lbW9pemUoZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIC9tc2llIFs2LTldXFxiLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50LnRvTG93ZXJDYXNlKCkpO1xuXHR9KSxcblx0Z2V0SGVhZEVsZW1lbnQgPSBtZW1vaXplKGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcImhlYWRcIilbMF07XG5cdH0pLFxuXHRzaW5nbGV0b25FbGVtZW50ID0gbnVsbCxcblx0c2luZ2xldG9uQ291bnRlciA9IDAsXG5cdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wID0gW107XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obGlzdCwgb3B0aW9ucykge1xuXHRpZih0eXBlb2YgREVCVUcgIT09IFwidW5kZWZpbmVkXCIgJiYgREVCVUcpIHtcblx0XHRpZih0eXBlb2YgZG9jdW1lbnQgIT09IFwib2JqZWN0XCIpIHRocm93IG5ldyBFcnJvcihcIlRoZSBzdHlsZS1sb2FkZXIgY2Fubm90IGJlIHVzZWQgaW4gYSBub24tYnJvd3NlciBlbnZpcm9ubWVudFwiKTtcblx0fVxuXG5cdG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXHQvLyBGb3JjZSBzaW5nbGUtdGFnIHNvbHV0aW9uIG9uIElFNi05LCB3aGljaCBoYXMgYSBoYXJkIGxpbWl0IG9uIHRoZSAjIG9mIDxzdHlsZT5cblx0Ly8gdGFncyBpdCB3aWxsIGFsbG93IG9uIGEgcGFnZVxuXHRpZiAodHlwZW9mIG9wdGlvbnMuc2luZ2xldG9uID09PSBcInVuZGVmaW5lZFwiKSBvcHRpb25zLnNpbmdsZXRvbiA9IGlzT2xkSUUoKTtcblxuXHQvLyBCeSBkZWZhdWx0LCBhZGQgPHN0eWxlPiB0YWdzIHRvIHRoZSBib3R0b20gb2YgPGhlYWQ+LlxuXHRpZiAodHlwZW9mIG9wdGlvbnMuaW5zZXJ0QXQgPT09IFwidW5kZWZpbmVkXCIpIG9wdGlvbnMuaW5zZXJ0QXQgPSBcImJvdHRvbVwiO1xuXG5cdHZhciBzdHlsZXMgPSBsaXN0VG9TdHlsZXMobGlzdCk7XG5cdGFkZFN0eWxlc1RvRG9tKHN0eWxlcywgb3B0aW9ucyk7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZShuZXdMaXN0KSB7XG5cdFx0dmFyIG1heVJlbW92ZSA9IFtdO1xuXHRcdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdHZhciBpdGVtID0gc3R5bGVzW2ldO1xuXHRcdFx0dmFyIGRvbVN0eWxlID0gc3R5bGVzSW5Eb21baXRlbS5pZF07XG5cdFx0XHRkb21TdHlsZS5yZWZzLS07XG5cdFx0XHRtYXlSZW1vdmUucHVzaChkb21TdHlsZSk7XG5cdFx0fVxuXHRcdGlmKG5ld0xpc3QpIHtcblx0XHRcdHZhciBuZXdTdHlsZXMgPSBsaXN0VG9TdHlsZXMobmV3TGlzdCk7XG5cdFx0XHRhZGRTdHlsZXNUb0RvbShuZXdTdHlsZXMsIG9wdGlvbnMpO1xuXHRcdH1cblx0XHRmb3IodmFyIGkgPSAwOyBpIDwgbWF5UmVtb3ZlLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHR2YXIgZG9tU3R5bGUgPSBtYXlSZW1vdmVbaV07XG5cdFx0XHRpZihkb21TdHlsZS5yZWZzID09PSAwKSB7XG5cdFx0XHRcdGZvcih2YXIgaiA9IDA7IGogPCBkb21TdHlsZS5wYXJ0cy5sZW5ndGg7IGorKylcblx0XHRcdFx0XHRkb21TdHlsZS5wYXJ0c1tqXSgpO1xuXHRcdFx0XHRkZWxldGUgc3R5bGVzSW5Eb21bZG9tU3R5bGUuaWRdO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGVzVG9Eb20oc3R5bGVzLCBvcHRpb25zKSB7XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBzdHlsZXMubGVuZ3RoOyBpKyspIHtcblx0XHR2YXIgaXRlbSA9IHN0eWxlc1tpXTtcblx0XHR2YXIgZG9tU3R5bGUgPSBzdHlsZXNJbkRvbVtpdGVtLmlkXTtcblx0XHRpZihkb21TdHlsZSkge1xuXHRcdFx0ZG9tU3R5bGUucmVmcysrO1xuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGRvbVN0eWxlLnBhcnRzLmxlbmd0aDsgaisrKSB7XG5cdFx0XHRcdGRvbVN0eWxlLnBhcnRzW2pdKGl0ZW0ucGFydHNbal0pO1xuXHRcdFx0fVxuXHRcdFx0Zm9yKDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0ZG9tU3R5bGUucGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHZhciBwYXJ0cyA9IFtdO1xuXHRcdFx0Zm9yKHZhciBqID0gMDsgaiA8IGl0ZW0ucGFydHMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0cGFydHMucHVzaChhZGRTdHlsZShpdGVtLnBhcnRzW2pdLCBvcHRpb25zKSk7XG5cdFx0XHR9XG5cdFx0XHRzdHlsZXNJbkRvbVtpdGVtLmlkXSA9IHtpZDogaXRlbS5pZCwgcmVmczogMSwgcGFydHM6IHBhcnRzfTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gbGlzdFRvU3R5bGVzKGxpc3QpIHtcblx0dmFyIHN0eWxlcyA9IFtdO1xuXHR2YXIgbmV3U3R5bGVzID0ge307XG5cdGZvcih2YXIgaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgaSsrKSB7XG5cdFx0dmFyIGl0ZW0gPSBsaXN0W2ldO1xuXHRcdHZhciBpZCA9IGl0ZW1bMF07XG5cdFx0dmFyIGNzcyA9IGl0ZW1bMV07XG5cdFx0dmFyIG1lZGlhID0gaXRlbVsyXTtcblx0XHR2YXIgc291cmNlTWFwID0gaXRlbVszXTtcblx0XHR2YXIgcGFydCA9IHtjc3M6IGNzcywgbWVkaWE6IG1lZGlhLCBzb3VyY2VNYXA6IHNvdXJjZU1hcH07XG5cdFx0aWYoIW5ld1N0eWxlc1tpZF0pXG5cdFx0XHRzdHlsZXMucHVzaChuZXdTdHlsZXNbaWRdID0ge2lkOiBpZCwgcGFydHM6IFtwYXJ0XX0pO1xuXHRcdGVsc2Vcblx0XHRcdG5ld1N0eWxlc1tpZF0ucGFydHMucHVzaChwYXJ0KTtcblx0fVxuXHRyZXR1cm4gc3R5bGVzO1xufVxuXG5mdW5jdGlvbiBpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KSB7XG5cdHZhciBoZWFkID0gZ2V0SGVhZEVsZW1lbnQoKTtcblx0dmFyIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3Bbc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AubGVuZ3RoIC0gMV07XG5cdGlmIChvcHRpb25zLmluc2VydEF0ID09PSBcInRvcFwiKSB7XG5cdFx0aWYoIWxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wKSB7XG5cdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGhlYWQuZmlyc3RDaGlsZCk7XG5cdFx0fSBlbHNlIGlmKGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKSB7XG5cdFx0XHRoZWFkLmluc2VydEJlZm9yZShzdHlsZUVsZW1lbnQsIGxhc3RTdHlsZUVsZW1lbnRJbnNlcnRlZEF0VG9wLm5leHRTaWJsaW5nKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0aGVhZC5hcHBlbmRDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHRcdH1cblx0XHRzdHlsZUVsZW1lbnRzSW5zZXJ0ZWRBdFRvcC5wdXNoKHN0eWxlRWxlbWVudCk7XG5cdH0gZWxzZSBpZiAob3B0aW9ucy5pbnNlcnRBdCA9PT0gXCJib3R0b21cIikge1xuXHRcdGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGVFbGVtZW50KTtcblx0fSBlbHNlIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHZhbHVlIGZvciBwYXJhbWV0ZXIgJ2luc2VydEF0Jy4gTXVzdCBiZSAndG9wJyBvciAnYm90dG9tJy5cIik7XG5cdH1cbn1cblxuZnVuY3Rpb24gcmVtb3ZlU3R5bGVFbGVtZW50KHN0eWxlRWxlbWVudCkge1xuXHRzdHlsZUVsZW1lbnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzdHlsZUVsZW1lbnQpO1xuXHR2YXIgaWR4ID0gc3R5bGVFbGVtZW50c0luc2VydGVkQXRUb3AuaW5kZXhPZihzdHlsZUVsZW1lbnQpO1xuXHRpZihpZHggPj0gMCkge1xuXHRcdHN0eWxlRWxlbWVudHNJbnNlcnRlZEF0VG9wLnNwbGljZShpZHgsIDEpO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZVN0eWxlRWxlbWVudChvcHRpb25zKSB7XG5cdHZhciBzdHlsZUVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7XG5cdHN0eWxlRWxlbWVudC50eXBlID0gXCJ0ZXh0L2Nzc1wiO1xuXHRpbnNlcnRTdHlsZUVsZW1lbnQob3B0aW9ucywgc3R5bGVFbGVtZW50KTtcblx0cmV0dXJuIHN0eWxlRWxlbWVudDtcbn1cblxuZnVuY3Rpb24gYWRkU3R5bGUob2JqLCBvcHRpb25zKSB7XG5cdHZhciBzdHlsZUVsZW1lbnQsIHVwZGF0ZSwgcmVtb3ZlO1xuXG5cdGlmIChvcHRpb25zLnNpbmdsZXRvbikge1xuXHRcdHZhciBzdHlsZUluZGV4ID0gc2luZ2xldG9uQ291bnRlcisrO1xuXHRcdHN0eWxlRWxlbWVudCA9IHNpbmdsZXRvbkVsZW1lbnQgfHwgKHNpbmdsZXRvbkVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucykpO1xuXHRcdHVwZGF0ZSA9IGFwcGx5VG9TaW5nbGV0b25UYWcuYmluZChudWxsLCBzdHlsZUVsZW1lbnQsIHN0eWxlSW5kZXgsIGZhbHNlKTtcblx0XHRyZW1vdmUgPSBhcHBseVRvU2luZ2xldG9uVGFnLmJpbmQobnVsbCwgc3R5bGVFbGVtZW50LCBzdHlsZUluZGV4LCB0cnVlKTtcblx0fSBlbHNlIHtcblx0XHRzdHlsZUVsZW1lbnQgPSBjcmVhdGVTdHlsZUVsZW1lbnQob3B0aW9ucyk7XG5cdFx0dXBkYXRlID0gYXBwbHlUb1RhZy5iaW5kKG51bGwsIHN0eWxlRWxlbWVudCk7XG5cdFx0cmVtb3ZlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZW1vdmVTdHlsZUVsZW1lbnQoc3R5bGVFbGVtZW50KTtcblx0XHR9O1xuXHR9XG5cblx0dXBkYXRlKG9iaik7XG5cblx0cmV0dXJuIGZ1bmN0aW9uIHVwZGF0ZVN0eWxlKG5ld09iaikge1xuXHRcdGlmKG5ld09iaikge1xuXHRcdFx0aWYobmV3T2JqLmNzcyA9PT0gb2JqLmNzcyAmJiBuZXdPYmoubWVkaWEgPT09IG9iai5tZWRpYSAmJiBuZXdPYmouc291cmNlTWFwID09PSBvYmouc291cmNlTWFwKVxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR1cGRhdGUob2JqID0gbmV3T2JqKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmVtb3ZlKCk7XG5cdFx0fVxuXHR9O1xufVxuXG52YXIgcmVwbGFjZVRleHQgPSAoZnVuY3Rpb24gKCkge1xuXHR2YXIgdGV4dFN0b3JlID0gW107XG5cblx0cmV0dXJuIGZ1bmN0aW9uIChpbmRleCwgcmVwbGFjZW1lbnQpIHtcblx0XHR0ZXh0U3RvcmVbaW5kZXhdID0gcmVwbGFjZW1lbnQ7XG5cdFx0cmV0dXJuIHRleHRTdG9yZS5maWx0ZXIoQm9vbGVhbikuam9pbignXFxuJyk7XG5cdH07XG59KSgpO1xuXG5mdW5jdGlvbiBhcHBseVRvU2luZ2xldG9uVGFnKHN0eWxlRWxlbWVudCwgaW5kZXgsIHJlbW92ZSwgb2JqKSB7XG5cdHZhciBjc3MgPSByZW1vdmUgPyBcIlwiIDogb2JqLmNzcztcblxuXHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gcmVwbGFjZVRleHQoaW5kZXgsIGNzcyk7XG5cdH0gZWxzZSB7XG5cdFx0dmFyIGNzc05vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShjc3MpO1xuXHRcdHZhciBjaGlsZE5vZGVzID0gc3R5bGVFbGVtZW50LmNoaWxkTm9kZXM7XG5cdFx0aWYgKGNoaWxkTm9kZXNbaW5kZXhdKSBzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoY2hpbGROb2Rlc1tpbmRleF0pO1xuXHRcdGlmIChjaGlsZE5vZGVzLmxlbmd0aCkge1xuXHRcdFx0c3R5bGVFbGVtZW50Lmluc2VydEJlZm9yZShjc3NOb2RlLCBjaGlsZE5vZGVzW2luZGV4XSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHN0eWxlRWxlbWVudC5hcHBlbmRDaGlsZChjc3NOb2RlKTtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gYXBwbHlUb1RhZyhzdHlsZUVsZW1lbnQsIG9iaikge1xuXHR2YXIgY3NzID0gb2JqLmNzcztcblx0dmFyIG1lZGlhID0gb2JqLm1lZGlhO1xuXHR2YXIgc291cmNlTWFwID0gb2JqLnNvdXJjZU1hcDtcblxuXHRpZiAobWVkaWEpIHtcblx0XHRzdHlsZUVsZW1lbnQuc2V0QXR0cmlidXRlKFwibWVkaWFcIiwgbWVkaWEpO1xuXHR9XG5cblx0aWYgKHNvdXJjZU1hcCkge1xuXHRcdC8vIGh0dHBzOi8vZGV2ZWxvcGVyLmNocm9tZS5jb20vZGV2dG9vbHMvZG9jcy9qYXZhc2NyaXB0LWRlYnVnZ2luZ1xuXHRcdC8vIHRoaXMgbWFrZXMgc291cmNlIG1hcHMgaW5zaWRlIHN0eWxlIHRhZ3Mgd29yayBwcm9wZXJseSBpbiBDaHJvbWVcblx0XHRjc3MgKz0gJ1xcbi8qIyBzb3VyY2VVUkw9JyArIHNvdXJjZU1hcC5zb3VyY2VzWzBdICsgJyAqLyc7XG5cdFx0Ly8gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjY2MDM4NzVcblx0XHRjc3MgKz0gXCJcXG4vKiMgc291cmNlTWFwcGluZ1VSTD1kYXRhOmFwcGxpY2F0aW9uL2pzb247YmFzZTY0LFwiICsgYnRvYSh1bmVzY2FwZShlbmNvZGVVUklDb21wb25lbnQoSlNPTi5zdHJpbmdpZnkoc291cmNlTWFwKSkpKSArIFwiICovXCI7XG5cdH1cblxuXHRpZiAoc3R5bGVFbGVtZW50LnN0eWxlU2hlZXQpIHtcblx0XHRzdHlsZUVsZW1lbnQuc3R5bGVTaGVldC5jc3NUZXh0ID0gY3NzO1xuXHR9IGVsc2Uge1xuXHRcdHdoaWxlKHN0eWxlRWxlbWVudC5maXJzdENoaWxkKSB7XG5cdFx0XHRzdHlsZUVsZW1lbnQucmVtb3ZlQ2hpbGQoc3R5bGVFbGVtZW50LmZpcnN0Q2hpbGQpO1xuXHRcdH1cblx0XHRzdHlsZUVsZW1lbnQuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY3NzKSk7XG5cdH1cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNoZWNrR2xvYmFsID0gcmVxdWlyZSgnLi9fY2hlY2tHbG9iYWwnKTtcblxuLyoqIERldGVjdCBmcmVlIHZhcmlhYmxlIGBnbG9iYWxgIGZyb20gTm9kZS5qcy4gKi9cbnZhciBmcmVlR2xvYmFsID0gY2hlY2tHbG9iYWwodHlwZW9mIGdsb2JhbCA9PSAnb2JqZWN0JyAmJiBnbG9iYWwpO1xuXG4vKiogRGV0ZWN0IGZyZWUgdmFyaWFibGUgYHNlbGZgLiAqL1xudmFyIGZyZWVTZWxmID0gY2hlY2tHbG9iYWwodHlwZW9mIHNlbGYgPT0gJ29iamVjdCcgJiYgc2VsZik7XG5cbi8qKiBEZXRlY3QgYHRoaXNgIGFzIHRoZSBnbG9iYWwgb2JqZWN0LiAqL1xudmFyIHRoaXNHbG9iYWwgPSBjaGVja0dsb2JhbCh0eXBlb2YgdGhpcyA9PSAnb2JqZWN0JyAmJiB0aGlzKTtcblxuLyoqIFVzZWQgYXMgYSByZWZlcmVuY2UgdG8gdGhlIGdsb2JhbCBvYmplY3QuICovXG52YXIgcm9vdCA9IGZyZWVHbG9iYWwgfHwgZnJlZVNlbGYgfHwgdGhpc0dsb2JhbCB8fCBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJvb3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3Jvb3QuanNcbiAqKiBtb2R1bGUgaWQgPSAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGNsYXNzaWZpZWQgYXMgYW4gYEFycmF5YCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQHR5cGUge0Z1bmN0aW9ufVxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzQXJyYXkoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXkoZG9jdW1lbnQuYm9keS5jaGlsZHJlbik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheSgnYWJjJyk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNBcnJheShfLm5vb3ApO1xuICogLy8gPT4gZmFsc2VcbiAqL1xudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQXJyYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNBcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vYXBpLXRhYmxlLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUlzTmF0aXZlID0gcmVxdWlyZSgnLi9fYmFzZUlzTmF0aXZlJyksXG4gICAgZ2V0VmFsdWUgPSByZXF1aXJlKCcuL19nZXRWYWx1ZScpO1xuXG4vKipcbiAqIEdldHMgdGhlIG5hdGl2ZSBmdW5jdGlvbiBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBtZXRob2QgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGZ1bmN0aW9uIGlmIGl0J3MgbmF0aXZlLCBlbHNlIGB1bmRlZmluZWRgLlxuICovXG5mdW5jdGlvbiBnZXROYXRpdmUob2JqZWN0LCBrZXkpIHtcbiAgdmFyIHZhbHVlID0gZ2V0VmFsdWUob2JqZWN0LCBrZXkpO1xuICByZXR1cm4gYmFzZUlzTmF0aXZlKHZhbHVlKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldE5hdGl2ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZ2V0TmF0aXZlLmpzXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyB0aGVcbiAqIFtsYW5ndWFnZSB0eXBlXShodHRwOi8vd3d3LmVjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtZWNtYXNjcmlwdC1sYW5ndWFnZS10eXBlcylcbiAqIG9mIGBPYmplY3RgLiAoZS5nLiBhcnJheXMsIGZ1bmN0aW9ucywgb2JqZWN0cywgcmVnZXhlcywgYG5ldyBOdW1iZXIoMClgLCBhbmQgYG5ldyBTdHJpbmcoJycpYClcbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc09iamVjdCh7fSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc09iamVjdChbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3QoXy5ub29wKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0KG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3QodmFsdWUpIHtcbiAgdmFyIHR5cGUgPSB0eXBlb2YgdmFsdWU7XG4gIHJldHVybiAhIXZhbHVlICYmICh0eXBlID09ICdvYmplY3QnIHx8IHR5cGUgPT0gJ2Z1bmN0aW9uJyk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNPYmplY3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNPYmplY3QuanNcbiAqKiBtb2R1bGUgaWQgPSA3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLiBBIHZhbHVlIGlzIG9iamVjdC1saWtlIGlmIGl0J3Mgbm90IGBudWxsYFxuICogYW5kIGhhcyBhIGB0eXBlb2ZgIHJlc3VsdCBvZiBcIm9iamVjdFwiLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIG9iamVjdC1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKHt9KTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzT2JqZWN0TGlrZShbMSwgMiwgM10pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uaXNPYmplY3RMaWtlKG51bGwpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNPYmplY3RMaWtlKHZhbHVlKSB7XG4gIHJldHVybiAhIXZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PSAnb2JqZWN0Jztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc09iamVjdExpa2U7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNPYmplY3RMaWtlLmpzXG4gKiogbW9kdWxlIGlkID0gOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGxpc3RDYWNoZUNsZWFyID0gcmVxdWlyZSgnLi9fbGlzdENhY2hlQ2xlYXInKSxcbiAgICBsaXN0Q2FjaGVEZWxldGUgPSByZXF1aXJlKCcuL19saXN0Q2FjaGVEZWxldGUnKSxcbiAgICBsaXN0Q2FjaGVHZXQgPSByZXF1aXJlKCcuL19saXN0Q2FjaGVHZXQnKSxcbiAgICBsaXN0Q2FjaGVIYXMgPSByZXF1aXJlKCcuL19saXN0Q2FjaGVIYXMnKSxcbiAgICBsaXN0Q2FjaGVTZXQgPSByZXF1aXJlKCcuL19saXN0Q2FjaGVTZXQnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGxpc3QgY2FjaGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFtlbnRyaWVzXSBUaGUga2V5LXZhbHVlIHBhaXJzIHRvIGNhY2hlLlxuICovXG5mdW5jdGlvbiBMaXN0Q2FjaGUoZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYExpc3RDYWNoZWAuXG5MaXN0Q2FjaGUucHJvdG90eXBlLmNsZWFyID0gbGlzdENhY2hlQ2xlYXI7XG5MaXN0Q2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IGxpc3RDYWNoZURlbGV0ZTtcbkxpc3RDYWNoZS5wcm90b3R5cGUuZ2V0ID0gbGlzdENhY2hlR2V0O1xuTGlzdENhY2hlLnByb3RvdHlwZS5oYXMgPSBsaXN0Q2FjaGVIYXM7XG5MaXN0Q2FjaGUucHJvdG90eXBlLnNldCA9IGxpc3RDYWNoZVNldDtcblxubW9kdWxlLmV4cG9ydHMgPSBMaXN0Q2FjaGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX0xpc3RDYWNoZS5qc1xuICoqIG1vZHVsZSBpZCA9IDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBlcSA9IHJlcXVpcmUoJy4vZXEnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBpbmRleCBhdCB3aGljaCB0aGUgYGtleWAgaXMgZm91bmQgaW4gYGFycmF5YCBvZiBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IGFycmF5IFRoZSBhcnJheSB0byBzZWFyY2guXG4gKiBAcGFyYW0geyp9IGtleSBUaGUga2V5IHRvIHNlYXJjaCBmb3IuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBpbmRleCBvZiB0aGUgbWF0Y2hlZCB2YWx1ZSwgZWxzZSBgLTFgLlxuICovXG5mdW5jdGlvbiBhc3NvY0luZGV4T2YoYXJyYXksIGtleSkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoO1xuICB3aGlsZSAobGVuZ3RoLS0pIHtcbiAgICBpZiAoZXEoYXJyYXlbbGVuZ3RoXVswXSwga2V5KSkge1xuICAgICAgcmV0dXJuIGxlbmd0aDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFzc29jSW5kZXhPZjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYXNzb2NJbmRleE9mLmpzXG4gKiogbW9kdWxlIGlkID0gMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0tleWFibGUgPSByZXF1aXJlKCcuL19pc0tleWFibGUnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBkYXRhIGZvciBgbWFwYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUgcmVmZXJlbmNlIGtleS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBtYXAgZGF0YS5cbiAqL1xuZnVuY3Rpb24gZ2V0TWFwRGF0YShtYXAsIGtleSkge1xuICB2YXIgZGF0YSA9IG1hcC5fX2RhdGFfXztcbiAgcmV0dXJuIGlzS2V5YWJsZShrZXkpXG4gICAgPyBkYXRhW3R5cGVvZiBrZXkgPT0gJ3N0cmluZycgPyAnc3RyaW5nJyA6ICdoYXNoJ11cbiAgICA6IGRhdGEubWFwO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldE1hcERhdGE7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldE1hcERhdGEuanNcbiAqKiBtb2R1bGUgaWQgPSAxMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBpc1N5bWJvbCA9IHJlcXVpcmUoJy4vaXNTeW1ib2wnKTtcblxuLyoqIFVzZWQgdG8gbWF0Y2ggcHJvcGVydHkgbmFtZXMgd2l0aGluIHByb3BlcnR5IHBhdGhzLiAqL1xudmFyIHJlSXNEZWVwUHJvcCA9IC9cXC58XFxbKD86W15bXFxdXSp8KFtcIiddKSg/Oig/IVxcMSlbXlxcXFxdfFxcXFwuKSo/XFwxKVxcXS8sXG4gICAgcmVJc1BsYWluUHJvcCA9IC9eXFx3KiQvO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgcHJvcGVydHkgbmFtZSBhbmQgbm90IGEgcHJvcGVydHkgcGF0aC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge09iamVjdH0gW29iamVjdF0gVGhlIG9iamVjdCB0byBxdWVyeSBrZXlzIG9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBwcm9wZXJ0eSBuYW1lLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzS2V5KHZhbHVlLCBvYmplY3QpIHtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICBpZiAodHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlID09ICdzeW1ib2wnIHx8IHR5cGUgPT0gJ2Jvb2xlYW4nIHx8XG4gICAgICB2YWx1ZSA9PSBudWxsIHx8IGlzU3ltYm9sKHZhbHVlKSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiByZUlzUGxhaW5Qcm9wLnRlc3QodmFsdWUpIHx8ICFyZUlzRGVlcFByb3AudGVzdCh2YWx1ZSkgfHxcbiAgICAob2JqZWN0ICE9IG51bGwgJiYgdmFsdWUgaW4gT2JqZWN0KG9iamVjdCkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzS2V5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc0tleS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9fZ2V0TmF0aXZlJyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBuYXRpdmVDcmVhdGUgPSBnZXROYXRpdmUoT2JqZWN0LCAnY3JlYXRlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gbmF0aXZlQ3JlYXRlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19uYXRpdmVDcmVhdGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzU3ltYm9sID0gcmVxdWlyZSgnLi9pc1N5bWJvbCcpO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcga2V5IGlmIGl0J3Mgbm90IGEgc3RyaW5nIG9yIHN5bWJvbC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gaW5zcGVjdC5cbiAqIEByZXR1cm5zIHtzdHJpbmd8c3ltYm9sfSBSZXR1cm5zIHRoZSBrZXkuXG4gKi9cbmZ1bmN0aW9uIHRvS2V5KHZhbHVlKSB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ3N0cmluZycgfHwgaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIHZhciByZXN1bHQgPSAodmFsdWUgKyAnJyk7XG4gIHJldHVybiAocmVzdWx0ID09ICcwJyAmJiAoMSAvIHZhbHVlKSA9PSAtSU5GSU5JVFkpID8gJy0wJyA6IHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b0tleTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fdG9LZXkuanNcbiAqKiBtb2R1bGUgaWQgPSAxNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgTUFYX1NBRkVfSU5URUdFUiA9IDkwMDcxOTkyNTQ3NDA5OTE7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSB2YWxpZCBhcnJheS1saWtlIGxlbmd0aC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBpcyBsb29zZWx5IGJhc2VkIG9uXG4gKiBbYFRvTGVuZ3RoYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtdG9sZW5ndGgpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgbGVuZ3RoLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0xlbmd0aCgzKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzTGVuZ3RoKE51bWJlci5NSU5fVkFMVUUpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzTGVuZ3RoKEluZmluaXR5KTtcbiAqIC8vID0+IGZhbHNlXG4gKlxuICogXy5pc0xlbmd0aCgnMycpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNMZW5ndGgodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnbnVtYmVyJyAmJlxuICAgIHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPD0gTUFYX1NBRkVfSU5URUdFUjtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0xlbmd0aDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc0xlbmd0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKTtcblxuLyoqIGBPYmplY3QjdG9TdHJpbmdgIHJlc3VsdCByZWZlcmVuY2VzLiAqL1xudmFyIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYFN5bWJvbGAgcHJpbWl0aXZlIG9yIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBjb3JyZWN0bHkgY2xhc3NpZmllZCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNTeW1ib2woU3ltYm9sLml0ZXJhdG9yKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3ltYm9sKCdhYmMnKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzU3ltYm9sKHZhbHVlKSB7XG4gIHJldHVybiB0eXBlb2YgdmFsdWUgPT0gJ3N5bWJvbCcgfHxcbiAgICAoaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzeW1ib2xUYWcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzU3ltYm9sO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzU3ltYm9sLmpzXG4gKiogbW9kdWxlIGlkID0gMTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBtYXBDYWNoZUNsZWFyID0gcmVxdWlyZSgnLi9fbWFwQ2FjaGVDbGVhcicpLFxuICAgIG1hcENhY2hlRGVsZXRlID0gcmVxdWlyZSgnLi9fbWFwQ2FjaGVEZWxldGUnKSxcbiAgICBtYXBDYWNoZUdldCA9IHJlcXVpcmUoJy4vX21hcENhY2hlR2V0JyksXG4gICAgbWFwQ2FjaGVIYXMgPSByZXF1aXJlKCcuL19tYXBDYWNoZUhhcycpLFxuICAgIG1hcENhY2hlU2V0ID0gcmVxdWlyZSgnLi9fbWFwQ2FjaGVTZXQnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgbWFwIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIE1hcENhY2hlKGVudHJpZXMpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBlbnRyaWVzID8gZW50cmllcy5sZW5ndGggOiAwO1xuXG4gIHRoaXMuY2xlYXIoKTtcbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICB2YXIgZW50cnkgPSBlbnRyaWVzW2luZGV4XTtcbiAgICB0aGlzLnNldChlbnRyeVswXSwgZW50cnlbMV0pO1xuICB9XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBNYXBDYWNoZWAuXG5NYXBDYWNoZS5wcm90b3R5cGUuY2xlYXIgPSBtYXBDYWNoZUNsZWFyO1xuTWFwQ2FjaGUucHJvdG90eXBlWydkZWxldGUnXSA9IG1hcENhY2hlRGVsZXRlO1xuTWFwQ2FjaGUucHJvdG90eXBlLmdldCA9IG1hcENhY2hlR2V0O1xuTWFwQ2FjaGUucHJvdG90eXBlLmhhcyA9IG1hcENhY2hlSGFzO1xuTWFwQ2FjaGUucHJvdG90eXBlLnNldCA9IG1hcENhY2hlU2V0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IE1hcENhY2hlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19NYXBDYWNoZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0Jyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBmdW5jVGFnID0gJ1tvYmplY3QgRnVuY3Rpb25dJyxcbiAgICBnZW5UYWcgPSAnW29iamVjdCBHZW5lcmF0b3JGdW5jdGlvbl0nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBjbGFzc2lmaWVkIGFzIGEgYEZ1bmN0aW9uYCBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAwLjEuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzRnVuY3Rpb24oXyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5pc0Z1bmN0aW9uKC9hYmMvKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsdWUpIHtcbiAgLy8gVGhlIHVzZSBvZiBgT2JqZWN0I3RvU3RyaW5nYCBhdm9pZHMgaXNzdWVzIHdpdGggdGhlIGB0eXBlb2ZgIG9wZXJhdG9yXG4gIC8vIGluIFNhZmFyaSA4IHdoaWNoIHJldHVybnMgJ29iamVjdCcgZm9yIHR5cGVkIGFycmF5IGFuZCB3ZWFrIG1hcCBjb25zdHJ1Y3RvcnMsXG4gIC8vIGFuZCBQaGFudG9tSlMgMS45IHdoaWNoIHJldHVybnMgJ2Z1bmN0aW9uJyBmb3IgYE5vZGVMaXN0YCBpbnN0YW5jZXMuXG4gIHZhciB0YWcgPSBpc09iamVjdCh2YWx1ZSkgPyBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA6ICcnO1xuICByZXR1cm4gdGFnID09IGZ1bmNUYWcgfHwgdGFnID09IGdlblRhZztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0Z1bmN0aW9uO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzRnVuY3Rpb24uanNcbiAqKiBtb2R1bGUgaWQgPSAxOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc2hpbSBmb3IgdXNpbmcgcHJvY2VzcyBpbiBicm93c2VyXG5cbnZhciBwcm9jZXNzID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxuLy8gY2FjaGVkIGZyb20gd2hhdGV2ZXIgZ2xvYmFsIGlzIHByZXNlbnQgc28gdGhhdCB0ZXN0IHJ1bm5lcnMgdGhhdCBzdHViIGl0XG4vLyBkb24ndCBicmVhayB0aGluZ3MuICBCdXQgd2UgbmVlZCB0byB3cmFwIGl0IGluIGEgdHJ5IGNhdGNoIGluIGNhc2UgaXQgaXNcbi8vIHdyYXBwZWQgaW4gc3RyaWN0IG1vZGUgY29kZSB3aGljaCBkb2Vzbid0IGRlZmluZSBhbnkgZ2xvYmFscy4gIEl0J3MgaW5zaWRlIGFcbi8vIGZ1bmN0aW9uIGJlY2F1c2UgdHJ5L2NhdGNoZXMgZGVvcHRpbWl6ZSBpbiBjZXJ0YWluIGVuZ2luZXMuXG5cbnZhciBjYWNoZWRTZXRUaW1lb3V0O1xudmFyIGNhY2hlZENsZWFyVGltZW91dDtcblxuKGZ1bmN0aW9uICgpIHtcbiAgdHJ5IHtcbiAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGNhY2hlZFNldFRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ3NldFRpbWVvdXQgaXMgbm90IGRlZmluZWQnKTtcbiAgICB9XG4gIH1cbiAgdHJ5IHtcbiAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBjbGVhclRpbWVvdXQ7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBjYWNoZWRDbGVhclRpbWVvdXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NsZWFyVGltZW91dCBpcyBub3QgZGVmaW5lZCcpO1xuICAgIH1cbiAgfVxufSAoKSlcbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IGNhY2hlZFNldFRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIGNhY2hlZENsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQoZHJhaW5RdWV1ZSwgMCk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9wcm9jZXNzL2Jyb3dzZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAxOVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLypcbiAgQGRlc2MgQWRkIGJlaGF2aW9yIHRvIGFueSBlbGVtZW50LlxuICBXaGVuIGV2YWwgdG8gdHJ1ZSwgaXQgd2lsbCBzZXQgZWxlbWVudCB0YWIgaW5kZXggdG8gMCBhbmQgZm9jdXMgb24gaXQuXG4gIEV4YW1wbGU6IDxkaXYgc2V0LWZvY3VzPVwid2lsbEZvY3VzV2hlblRydWVcIj48L2Rpdj5cbiovXG5cbmltcG9ydCBkZWZlciBmcm9tICdsb2Rhc2gvZGVmZXInO1xuZXhwb3J0IGRlZmF1bHQge1xuICB1cGRhdGUobmV3VmFsKSB7XG4gICAgaWYgKG5ld1ZhbCA9PT0gdHJ1ZSkge1xuICAgICAgZGVmZXIoKCkgPT4ge1xuICAgICAgICB0aGlzLmVsLnRhYkluZGV4ID0gMDtcbiAgICAgICAgdGhpcy5lbC5mb2N1cygpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2RpcmVjdGl2ZXMvc2V0LWZvY3VzLmpzXG4gKiovIiwiaW1wb3J0IGV2ZW50cyBmcm9tICcuL2V2ZW50cyc7XG5pbXBvcnQgeGhyUmVzcG9uc2UgZnJvbSAnLi94aHItcmVzcG9uc2UnO1xuZXhwb3J0IGRlZmF1bHQgW1xuICBldmVudHMsXG4gIHhoclJlc3BvbnNlLFxuXTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL21peGlucy9pbmRleC5qc1xuICoqLyIsInZhciBnZXROYXRpdmUgPSByZXF1aXJlKCcuL19nZXROYXRpdmUnKSxcbiAgICByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG52YXIgTWFwID0gZ2V0TmF0aXZlKHJvb3QsICdNYXAnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBNYXA7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX01hcC5qc1xuICoqIG1vZHVsZSBpZCA9IDIyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgTGlzdENhY2hlID0gcmVxdWlyZSgnLi9fTGlzdENhY2hlJyksXG4gICAgc3RhY2tDbGVhciA9IHJlcXVpcmUoJy4vX3N0YWNrQ2xlYXInKSxcbiAgICBzdGFja0RlbGV0ZSA9IHJlcXVpcmUoJy4vX3N0YWNrRGVsZXRlJyksXG4gICAgc3RhY2tHZXQgPSByZXF1aXJlKCcuL19zdGFja0dldCcpLFxuICAgIHN0YWNrSGFzID0gcmVxdWlyZSgnLi9fc3RhY2tIYXMnKSxcbiAgICBzdGFja1NldCA9IHJlcXVpcmUoJy4vX3N0YWNrU2V0Jyk7XG5cbi8qKlxuICogQ3JlYXRlcyBhIHN0YWNrIGNhY2hlIG9iamVjdCB0byBzdG9yZSBrZXktdmFsdWUgcGFpcnMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIFN0YWNrKGVudHJpZXMpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IG5ldyBMaXN0Q2FjaGUoZW50cmllcyk7XG59XG5cbi8vIEFkZCBtZXRob2RzIHRvIGBTdGFja2AuXG5TdGFjay5wcm90b3R5cGUuY2xlYXIgPSBzdGFja0NsZWFyO1xuU3RhY2sucHJvdG90eXBlWydkZWxldGUnXSA9IHN0YWNrRGVsZXRlO1xuU3RhY2sucHJvdG90eXBlLmdldCA9IHN0YWNrR2V0O1xuU3RhY2sucHJvdG90eXBlLmhhcyA9IHN0YWNrSGFzO1xuU3RhY2sucHJvdG90eXBlLnNldCA9IHN0YWNrU2V0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YWNrO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19TdGFjay5qc1xuICoqIG1vZHVsZSBpZCA9IDIzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgU3ltYm9sID0gcm9vdC5TeW1ib2w7XG5cbm1vZHVsZS5leHBvcnRzID0gU3ltYm9sO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19TeW1ib2wuanNcbiAqKiBtb2R1bGUgaWQgPSAyNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGNhc3RQYXRoID0gcmVxdWlyZSgnLi9fY2FzdFBhdGgnKSxcbiAgICBpc0tleSA9IHJlcXVpcmUoJy4vX2lzS2V5JyksXG4gICAgdG9LZXkgPSByZXF1aXJlKCcuL190b0tleScpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmdldGAgd2l0aG91dCBzdXBwb3J0IGZvciBkZWZhdWx0IHZhbHVlcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSByZXNvbHZlZCB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gYmFzZUdldChvYmplY3QsIHBhdGgpIHtcbiAgcGF0aCA9IGlzS2V5KHBhdGgsIG9iamVjdCkgPyBbcGF0aF0gOiBjYXN0UGF0aChwYXRoKTtcblxuICB2YXIgaW5kZXggPSAwLFxuICAgICAgbGVuZ3RoID0gcGF0aC5sZW5ndGg7XG5cbiAgd2hpbGUgKG9iamVjdCAhPSBudWxsICYmIGluZGV4IDwgbGVuZ3RoKSB7XG4gICAgb2JqZWN0ID0gb2JqZWN0W3RvS2V5KHBhdGhbaW5kZXgrK10pXTtcbiAgfVxuICByZXR1cm4gKGluZGV4ICYmIGluZGV4ID09IGxlbmd0aCkgPyBvYmplY3QgOiB1bmRlZmluZWQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUdldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUdldC5qc1xuICoqIG1vZHVsZSBpZCA9IDI1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0UHJvdG90eXBlID0gcmVxdWlyZSgnLi9fZ2V0UHJvdG90eXBlJyk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaGFzYCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IGtleSBUaGUga2V5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSGFzKG9iamVjdCwga2V5KSB7XG4gIC8vIEF2b2lkIGEgYnVnIGluIElFIDEwLTExIHdoZXJlIG9iamVjdHMgd2l0aCBhIFtbUHJvdG90eXBlXV0gb2YgYG51bGxgLFxuICAvLyB0aGF0IGFyZSBjb21wb3NlZCBlbnRpcmVseSBvZiBpbmRleCBwcm9wZXJ0aWVzLCByZXR1cm4gYGZhbHNlYCBmb3JcbiAgLy8gYGhhc093blByb3BlcnR5YCBjaGVja3Mgb2YgdGhlbS5cbiAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmXG4gICAgKGhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBrZXkpIHx8XG4gICAgICAodHlwZW9mIG9iamVjdCA9PSAnb2JqZWN0JyAmJiBrZXkgaW4gb2JqZWN0ICYmIGdldFByb3RvdHlwZShvYmplY3QpID09PSBudWxsKSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUhhcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUhhcy5qc1xuICoqIG1vZHVsZSBpZCA9IDI2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUlzRXF1YWxEZWVwID0gcmVxdWlyZSgnLi9fYmFzZUlzRXF1YWxEZWVwJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0JyksXG4gICAgaXNPYmplY3RMaWtlID0gcmVxdWlyZSgnLi9pc09iamVjdExpa2UnKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc0VxdWFsYCB3aGljaCBzdXBwb3J0cyBwYXJ0aWFsIGNvbXBhcmlzb25zXG4gKiBhbmQgdHJhY2tzIHRyYXZlcnNlZCBvYmplY3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb21wYXJlLlxuICogQHBhcmFtIHsqfSBvdGhlciBUaGUgb3RoZXIgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtib29sZWFufSBbYml0bWFza10gVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy5cbiAqICBUaGUgYml0bWFzayBtYXkgYmUgY29tcG9zZWQgb2YgdGhlIGZvbGxvd2luZyBmbGFnczpcbiAqICAgICAxIC0gVW5vcmRlcmVkIGNvbXBhcmlzb25cbiAqICAgICAyIC0gUGFydGlhbCBjb21wYXJpc29uXG4gKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGB2YWx1ZWAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgdmFsdWVzIGFyZSBlcXVpdmFsZW50LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VJc0VxdWFsKHZhbHVlLCBvdGhlciwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcbiAgaWYgKHZhbHVlID09PSBvdGhlcikge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsIHx8IG90aGVyID09IG51bGwgfHwgKCFpc09iamVjdCh2YWx1ZSkgJiYgIWlzT2JqZWN0TGlrZShvdGhlcikpKSB7XG4gICAgcmV0dXJuIHZhbHVlICE9PSB2YWx1ZSAmJiBvdGhlciAhPT0gb3RoZXI7XG4gIH1cbiAgcmV0dXJuIGJhc2VJc0VxdWFsRGVlcCh2YWx1ZSwgb3RoZXIsIGJhc2VJc0VxdWFsLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjayk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUlzRXF1YWw7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VJc0VxdWFsLmpzXG4gKiogbW9kdWxlIGlkID0gMjdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8ucHJvcGVydHlgIHdpdGhvdXQgc3VwcG9ydCBmb3IgZGVlcCBwYXRocy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVByb3BlcnR5KGtleSkge1xuICByZXR1cm4gZnVuY3Rpb24ob2JqZWN0KSB7XG4gICAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZVByb3BlcnR5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlUHJvcGVydHkuanNcbiAqKiBtb2R1bGUgaWQgPSAyOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBzdHJpbmdUb1BhdGggPSByZXF1aXJlKCcuL19zdHJpbmdUb1BhdGgnKTtcblxuLyoqXG4gKiBDYXN0cyBgdmFsdWVgIHRvIGEgcGF0aCBhcnJheSBpZiBpdCdzIG5vdCBvbmUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGluc3BlY3QuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGNhc3QgcHJvcGVydHkgcGF0aCBhcnJheS5cbiAqL1xuZnVuY3Rpb24gY2FzdFBhdGgodmFsdWUpIHtcbiAgcmV0dXJuIGlzQXJyYXkodmFsdWUpID8gdmFsdWUgOiBzdHJpbmdUb1BhdGgodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGNhc3RQYXRoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19jYXN0UGF0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgU2V0Q2FjaGUgPSByZXF1aXJlKCcuL19TZXRDYWNoZScpLFxuICAgIGFycmF5U29tZSA9IHJlcXVpcmUoJy4vX2FycmF5U29tZScpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cbnZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcbiAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBhcnJheXMgd2l0aCBzdXBwb3J0IGZvclxuICogcGFydGlhbCBkZWVwIGNvbXBhcmlzb25zLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7QXJyYXl9IG90aGVyIFRoZSBvdGhlciBhcnJheSB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcbiAqICBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYGFycmF5YCBhbmQgYG90aGVyYCBvYmplY3RzLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBhcnJheXMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gZXF1YWxBcnJheXMoYXJyYXksIG90aGVyLCBlcXVhbEZ1bmMsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKSB7XG4gIHZhciBpc1BhcnRpYWwgPSBiaXRtYXNrICYgUEFSVElBTF9DT01QQVJFX0ZMQUcsXG4gICAgICBhcnJMZW5ndGggPSBhcnJheS5sZW5ndGgsXG4gICAgICBvdGhMZW5ndGggPSBvdGhlci5sZW5ndGg7XG5cbiAgaWYgKGFyckxlbmd0aCAhPSBvdGhMZW5ndGggJiYgIShpc1BhcnRpYWwgJiYgb3RoTGVuZ3RoID4gYXJyTGVuZ3RoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gIHZhciBzdGFja2VkID0gc3RhY2suZ2V0KGFycmF5KTtcbiAgaWYgKHN0YWNrZWQpIHtcbiAgICByZXR1cm4gc3RhY2tlZCA9PSBvdGhlcjtcbiAgfVxuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIHJlc3VsdCA9IHRydWUsXG4gICAgICBzZWVuID0gKGJpdG1hc2sgJiBVTk9SREVSRURfQ09NUEFSRV9GTEFHKSA/IG5ldyBTZXRDYWNoZSA6IHVuZGVmaW5lZDtcblxuICBzdGFjay5zZXQoYXJyYXksIG90aGVyKTtcblxuICAvLyBJZ25vcmUgbm9uLWluZGV4IHByb3BlcnRpZXMuXG4gIHdoaWxlICgrK2luZGV4IDwgYXJyTGVuZ3RoKSB7XG4gICAgdmFyIGFyclZhbHVlID0gYXJyYXlbaW5kZXhdLFxuICAgICAgICBvdGhWYWx1ZSA9IG90aGVyW2luZGV4XTtcblxuICAgIGlmIChjdXN0b21pemVyKSB7XG4gICAgICB2YXIgY29tcGFyZWQgPSBpc1BhcnRpYWxcbiAgICAgICAgPyBjdXN0b21pemVyKG90aFZhbHVlLCBhcnJWYWx1ZSwgaW5kZXgsIG90aGVyLCBhcnJheSwgc3RhY2spXG4gICAgICAgIDogY3VzdG9taXplcihhcnJWYWx1ZSwgb3RoVmFsdWUsIGluZGV4LCBhcnJheSwgb3RoZXIsIHN0YWNrKTtcbiAgICB9XG4gICAgaWYgKGNvbXBhcmVkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChjb21wYXJlZCkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgICAgYnJlYWs7XG4gICAgfVxuICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgYXJyYXlzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgaWYgKHNlZW4pIHtcbiAgICAgIGlmICghYXJyYXlTb21lKG90aGVyLCBmdW5jdGlvbihvdGhWYWx1ZSwgb3RoSW5kZXgpIHtcbiAgICAgICAgICAgIGlmICghc2Vlbi5oYXMob3RoSW5kZXgpICYmXG4gICAgICAgICAgICAgICAgKGFyclZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMoYXJyVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykpKSB7XG4gICAgICAgICAgICAgIHJldHVybiBzZWVuLmFkZChvdGhJbmRleCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSkpIHtcbiAgICAgICAgcmVzdWx0ID0gZmFsc2U7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoIShcbiAgICAgICAgICBhcnJWYWx1ZSA9PT0gb3RoVmFsdWUgfHxcbiAgICAgICAgICAgIGVxdWFsRnVuYyhhcnJWYWx1ZSwgb3RoVmFsdWUsIGN1c3RvbWl6ZXIsIGJpdG1hc2ssIHN0YWNrKVxuICAgICAgICApKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICBzdGFja1snZGVsZXRlJ10oYXJyYXkpO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGVxdWFsQXJyYXlzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19lcXVhbEFycmF5cy5qc1xuICoqIG1vZHVsZSBpZCA9IDMwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QgaW4gSUUgPCA5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgaG9zdCBvYmplY3QsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNIb3N0T2JqZWN0KHZhbHVlKSB7XG4gIC8vIE1hbnkgaG9zdCBvYmplY3RzIGFyZSBgT2JqZWN0YCBvYmplY3RzIHRoYXQgY2FuIGNvZXJjZSB0byBzdHJpbmdzXG4gIC8vIGRlc3BpdGUgaGF2aW5nIGltcHJvcGVybHkgZGVmaW5lZCBgdG9TdHJpbmdgIG1ldGhvZHMuXG4gIHZhciByZXN1bHQgPSBmYWxzZTtcbiAgaWYgKHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlLnRvU3RyaW5nICE9ICdmdW5jdGlvbicpIHtcbiAgICB0cnkge1xuICAgICAgcmVzdWx0ID0gISEodmFsdWUgKyAnJyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzSG9zdE9iamVjdDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faXNIb3N0T2JqZWN0LmpzXG4gKiogbW9kdWxlIGlkID0gMzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE1BWF9TQUZFX0lOVEVHRVIgPSA5MDA3MTk5MjU0NzQwOTkxO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgdW5zaWduZWQgaW50ZWdlciB2YWx1ZXMuICovXG52YXIgcmVJc1VpbnQgPSAvXig/OjB8WzEtOV1cXGQqKSQvO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGEgdmFsaWQgYXJyYXktbGlrZSBpbmRleC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcGFyYW0ge251bWJlcn0gW2xlbmd0aD1NQVhfU0FGRV9JTlRFR0VSXSBUaGUgdXBwZXIgYm91bmRzIG9mIGEgdmFsaWQgaW5kZXguXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhIHZhbGlkIGluZGV4LCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzSW5kZXgodmFsdWUsIGxlbmd0aCkge1xuICBsZW5ndGggPSBsZW5ndGggPT0gbnVsbCA/IE1BWF9TQUZFX0lOVEVHRVIgOiBsZW5ndGg7XG4gIHJldHVybiAhIWxlbmd0aCAmJlxuICAgICh0eXBlb2YgdmFsdWUgPT0gJ251bWJlcicgfHwgcmVJc1VpbnQudGVzdCh2YWx1ZSkpICYmXG4gICAgKHZhbHVlID4gLTEgJiYgdmFsdWUgJSAxID09IDAgJiYgdmFsdWUgPCBsZW5ndGgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzSW5kZXg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2lzSW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAzMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzT2JqZWN0ID0gcmVxdWlyZSgnLi9pc09iamVjdCcpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaWYgc3VpdGFibGUgZm9yIHN0cmljdFxuICogIGVxdWFsaXR5IGNvbXBhcmlzb25zLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09IHZhbHVlICYmICFpc09iamVjdCh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNTdHJpY3RDb21wYXJhYmxlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc1N0cmljdENvbXBhcmFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAzM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBBIHNwZWNpYWxpemVkIHZlcnNpb24gb2YgYG1hdGNoZXNQcm9wZXJ0eWAgZm9yIHNvdXJjZSB2YWx1ZXMgc3VpdGFibGVcbiAqIGZvciBzdHJpY3QgZXF1YWxpdHkgY29tcGFyaXNvbnMsIGkuZS4gYD09PWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gbWF0Y2guXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZShrZXksIHNyY1ZhbHVlKSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICBpZiAob2JqZWN0ID09IG51bGwpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgcmV0dXJuIG9iamVjdFtrZXldID09PSBzcmNWYWx1ZSAmJlxuICAgICAgKHNyY1ZhbHVlICE9PSB1bmRlZmluZWQgfHwgKGtleSBpbiBPYmplY3Qob2JqZWN0KSkpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXRjaGVzU3RyaWN0Q29tcGFyYWJsZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiogVXNlZCB0byByZXNvbHZlIHRoZSBkZWNvbXBpbGVkIHNvdXJjZSBvZiBmdW5jdGlvbnMuICovXG52YXIgZnVuY1RvU3RyaW5nID0gRnVuY3Rpb24ucHJvdG90eXBlLnRvU3RyaW5nO1xuXG4vKipcbiAqIENvbnZlcnRzIGBmdW5jYCB0byBpdHMgc291cmNlIGNvZGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIHByb2Nlc3MuXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBSZXR1cm5zIHRoZSBzb3VyY2UgY29kZS5cbiAqL1xuZnVuY3Rpb24gdG9Tb3VyY2UoZnVuYykge1xuICBpZiAoZnVuYyAhPSBudWxsKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBmdW5jVG9TdHJpbmcuY2FsbChmdW5jKTtcbiAgICB9IGNhdGNoIChlKSB7fVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gKGZ1bmMgKyAnJyk7XG4gICAgfSBjYXRjaCAoZSkge31cbiAgfVxuICByZXR1cm4gJyc7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gdG9Tb3VyY2U7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3RvU291cmNlLmpzXG4gKiogbW9kdWxlIGlkID0gMzVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlRGVsYXkgPSByZXF1aXJlKCcuL19iYXNlRGVsYXknKSxcbiAgICByZXN0ID0gcmVxdWlyZSgnLi9yZXN0Jyk7XG5cbi8qKlxuICogRGVmZXJzIGludm9raW5nIHRoZSBgZnVuY2AgdW50aWwgdGhlIGN1cnJlbnQgY2FsbCBzdGFjayBoYXMgY2xlYXJlZC4gQW55XG4gKiBhZGRpdGlvbmFsIGFyZ3VtZW50cyBhcmUgcHJvdmlkZWQgdG8gYGZ1bmNgIHdoZW4gaXQncyBpbnZva2VkLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVmZXIuXG4gKiBAcGFyYW0gey4uLip9IFthcmdzXSBUaGUgYXJndW1lbnRzIHRvIGludm9rZSBgZnVuY2Agd2l0aC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIHRpbWVyIGlkLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmRlZmVyKGZ1bmN0aW9uKHRleHQpIHtcbiAqICAgY29uc29sZS5sb2codGV4dCk7XG4gKiB9LCAnZGVmZXJyZWQnKTtcbiAqIC8vID0+IExvZ3MgJ2RlZmVycmVkJyBhZnRlciBvbmUgb3IgbW9yZSBtaWxsaXNlY29uZHMuXG4gKi9cbnZhciBkZWZlciA9IHJlc3QoZnVuY3Rpb24oZnVuYywgYXJncykge1xuICByZXR1cm4gYmFzZURlbGF5KGZ1bmMsIDEsIGFyZ3MpO1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZGVmZXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvZGVmZXIuanNcbiAqKiBtb2R1bGUgaWQgPSAzNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzQXJyYXlMaWtlT2JqZWN0ID0gcmVxdWlyZSgnLi9pc0FycmF5TGlrZU9iamVjdCcpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIFVzZWQgdG8gcmVzb2x2ZSB0aGVcbiAqIFtgdG9TdHJpbmdUYWdgXShodHRwOi8vZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1vYmplY3QucHJvdG90eXBlLnRvc3RyaW5nKVxuICogb2YgdmFsdWVzLlxuICovXG52YXIgb2JqZWN0VG9TdHJpbmcgPSBvYmplY3RQcm90by50b1N0cmluZztcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgcHJvcGVydHlJc0VudW1lcmFibGUgPSBvYmplY3RQcm90by5wcm9wZXJ0eUlzRW51bWVyYWJsZTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYW4gYGFyZ3VtZW50c2Agb2JqZWN0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc0FyZ3VtZW50cyhmdW5jdGlvbigpIHsgcmV0dXJuIGFyZ3VtZW50czsgfSgpKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJndW1lbnRzKFsxLCAyLCAzXSk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FyZ3VtZW50cyh2YWx1ZSkge1xuICAvLyBTYWZhcmkgOC4xIGluY29ycmVjdGx5IG1ha2VzIGBhcmd1bWVudHMuY2FsbGVlYCBlbnVtZXJhYmxlIGluIHN0cmljdCBtb2RlLlxuICByZXR1cm4gaXNBcnJheUxpa2VPYmplY3QodmFsdWUpICYmIGhhc093blByb3BlcnR5LmNhbGwodmFsdWUsICdjYWxsZWUnKSAmJlxuICAgICghcHJvcGVydHlJc0VudW1lcmFibGUuY2FsbCh2YWx1ZSwgJ2NhbGxlZScpIHx8IG9iamVjdFRvU3RyaW5nLmNhbGwodmFsdWUpID09IGFyZ3NUYWcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzQXJndW1lbnRzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzQXJndW1lbnRzLmpzXG4gKiogbW9kdWxlIGlkID0gMzdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXRMZW5ndGggPSByZXF1aXJlKCcuL19nZXRMZW5ndGgnKSxcbiAgICBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnLi9pc0Z1bmN0aW9uJyksXG4gICAgaXNMZW5ndGggPSByZXF1aXJlKCcuL2lzTGVuZ3RoJyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYXJyYXktbGlrZS4gQSB2YWx1ZSBpcyBjb25zaWRlcmVkIGFycmF5LWxpa2UgaWYgaXQnc1xuICogbm90IGEgZnVuY3Rpb24gYW5kIGhhcyBhIGB2YWx1ZS5sZW5ndGhgIHRoYXQncyBhbiBpbnRlZ2VyIGdyZWF0ZXIgdGhhbiBvclxuICogZXF1YWwgdG8gYDBgIGFuZCBsZXNzIHRoYW4gb3IgZXF1YWwgdG8gYE51bWJlci5NQVhfU0FGRV9JTlRFR0VSYC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhcnJheS1saWtlLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlKGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoJ2FiYycpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2UoXy5ub29wKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSAhPSBudWxsICYmIGlzTGVuZ3RoKGdldExlbmd0aCh2YWx1ZSkpICYmICFpc0Z1bmN0aW9uKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBpc0FycmF5TGlrZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9pc0FycmF5TGlrZS5qc1xuICoqIG1vZHVsZSBpZCA9IDM4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIGlzT2JqZWN0TGlrZSA9IHJlcXVpcmUoJy4vaXNPYmplY3RMaWtlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBzdHJpbmdUYWcgPSAnW29iamVjdCBTdHJpbmddJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIGBTdHJpbmdgIHByaW1pdGl2ZSBvciBvYmplY3QuXG4gKlxuICogQHN0YXRpY1xuICogQHNpbmNlIDAuMS4wXG4gKiBAbWVtYmVyT2YgX1xuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgY29ycmVjdGx5IGNsYXNzaWZpZWQsXG4gKiAgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiBfLmlzU3RyaW5nKCdhYmMnKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzU3RyaW5nKDEpO1xuICogLy8gPT4gZmFsc2VcbiAqL1xuZnVuY3Rpb24gaXNTdHJpbmcodmFsdWUpIHtcbiAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJyB8fFxuICAgICghaXNBcnJheSh2YWx1ZSkgJiYgaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSA9PSBzdHJpbmdUYWcpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzU3RyaW5nO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzU3RyaW5nLmpzXG4gKiogbW9kdWxlIGlkID0gMzlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlSGFzID0gcmVxdWlyZSgnLi9fYmFzZUhhcycpLFxuICAgIGJhc2VLZXlzID0gcmVxdWlyZSgnLi9fYmFzZUtleXMnKSxcbiAgICBpbmRleEtleXMgPSByZXF1aXJlKCcuL19pbmRleEtleXMnKSxcbiAgICBpc0FycmF5TGlrZSA9IHJlcXVpcmUoJy4vaXNBcnJheUxpa2UnKSxcbiAgICBpc0luZGV4ID0gcmVxdWlyZSgnLi9faXNJbmRleCcpLFxuICAgIGlzUHJvdG90eXBlID0gcmVxdWlyZSgnLi9faXNQcm90b3R5cGUnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGFuIGFycmF5IG9mIHRoZSBvd24gZW51bWVyYWJsZSBwcm9wZXJ0eSBuYW1lcyBvZiBgb2JqZWN0YC5cbiAqXG4gKiAqKk5vdGU6KiogTm9uLW9iamVjdCB2YWx1ZXMgYXJlIGNvZXJjZWQgdG8gb2JqZWN0cy4gU2VlIHRoZVxuICogW0VTIHNwZWNdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5rZXlzKVxuICogZm9yIG1vcmUgZGV0YWlscy5cbiAqXG4gKiBAc3RhdGljXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBtZW1iZXJPZiBfXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGFycmF5IG9mIHByb3BlcnR5IG5hbWVzLlxuICogQGV4YW1wbGVcbiAqXG4gKiBmdW5jdGlvbiBGb28oKSB7XG4gKiAgIHRoaXMuYSA9IDE7XG4gKiAgIHRoaXMuYiA9IDI7XG4gKiB9XG4gKlxuICogRm9vLnByb3RvdHlwZS5jID0gMztcbiAqXG4gKiBfLmtleXMobmV3IEZvbyk7XG4gKiAvLyA9PiBbJ2EnLCAnYiddIChpdGVyYXRpb24gb3JkZXIgaXMgbm90IGd1YXJhbnRlZWQpXG4gKlxuICogXy5rZXlzKCdoaScpO1xuICogLy8gPT4gWycwJywgJzEnXVxuICovXG5mdW5jdGlvbiBrZXlzKG9iamVjdCkge1xuICB2YXIgaXNQcm90byA9IGlzUHJvdG90eXBlKG9iamVjdCk7XG4gIGlmICghKGlzUHJvdG8gfHwgaXNBcnJheUxpa2Uob2JqZWN0KSkpIHtcbiAgICByZXR1cm4gYmFzZUtleXMob2JqZWN0KTtcbiAgfVxuICB2YXIgaW5kZXhlcyA9IGluZGV4S2V5cyhvYmplY3QpLFxuICAgICAgc2tpcEluZGV4ZXMgPSAhIWluZGV4ZXMsXG4gICAgICByZXN1bHQgPSBpbmRleGVzIHx8IFtdLFxuICAgICAgbGVuZ3RoID0gcmVzdWx0Lmxlbmd0aDtcblxuICBmb3IgKHZhciBrZXkgaW4gb2JqZWN0KSB7XG4gICAgaWYgKGJhc2VIYXMob2JqZWN0LCBrZXkpICYmXG4gICAgICAgICEoc2tpcEluZGV4ZXMgJiYgKGtleSA9PSAnbGVuZ3RoJyB8fCBpc0luZGV4KGtleSwgbGVuZ3RoKSkpICYmXG4gICAgICAgICEoaXNQcm90byAmJiBrZXkgPT0gJ2NvbnN0cnVjdG9yJykpIHtcbiAgICAgIHJlc3VsdC5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0ga2V5cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9rZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gNDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciB0b0Zpbml0ZSA9IHJlcXVpcmUoJy4vdG9GaW5pdGUnKTtcblxuLyoqXG4gKiBDb252ZXJ0cyBgdmFsdWVgIHRvIGFuIGludGVnZXIuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGxvb3NlbHkgYmFzZWQgb25cbiAqIFtgVG9JbnRlZ2VyYF0oaHR0cDovL3d3dy5lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXRvaW50ZWdlcikuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjAuMFxuICogQGNhdGVnb3J5IExhbmdcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSBjb252ZXJ0ZWQgaW50ZWdlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b0ludGVnZXIoMy4yKTtcbiAqIC8vID0+IDNcbiAqXG4gKiBfLnRvSW50ZWdlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDBcbiAqXG4gKiBfLnRvSW50ZWdlcihJbmZpbml0eSk7XG4gKiAvLyA9PiAxLjc5NzY5MzEzNDg2MjMxNTdlKzMwOFxuICpcbiAqIF8udG9JbnRlZ2VyKCczLjInKTtcbiAqIC8vID0+IDNcbiAqL1xuZnVuY3Rpb24gdG9JbnRlZ2VyKHZhbHVlKSB7XG4gIHZhciByZXN1bHQgPSB0b0Zpbml0ZSh2YWx1ZSksXG4gICAgICByZW1haW5kZXIgPSByZXN1bHQgJSAxO1xuXG4gIHJldHVybiByZXN1bHQgPT09IHJlc3VsdCA/IChyZW1haW5kZXIgPyByZXN1bHQgLSByZW1haW5kZXIgOiByZXN1bHQpIDogMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b0ludGVnZXI7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvdG9JbnRlZ2VyLmpzXG4gKiogbW9kdWxlIGlkID0gNDFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0Z1bmN0aW9uID0gcmVxdWlyZSgnLi9pc0Z1bmN0aW9uJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0JyksXG4gICAgaXNTeW1ib2wgPSByZXF1aXJlKCcuL2lzU3ltYm9sJyk7XG5cbi8qKiBVc2VkIGFzIHJlZmVyZW5jZXMgZm9yIHZhcmlvdXMgYE51bWJlcmAgY29uc3RhbnRzLiAqL1xudmFyIE5BTiA9IDAgLyAwO1xuXG4vKiogVXNlZCB0byBtYXRjaCBsZWFkaW5nIGFuZCB0cmFpbGluZyB3aGl0ZXNwYWNlLiAqL1xudmFyIHJlVHJpbSA9IC9eXFxzK3xcXHMrJC9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgYmFkIHNpZ25lZCBoZXhhZGVjaW1hbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCYWRIZXggPSAvXlstK10weFswLTlhLWZdKyQvaTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGJpbmFyeSBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNCaW5hcnkgPSAvXjBiWzAxXSskL2k7XG5cbi8qKiBVc2VkIHRvIGRldGVjdCBvY3RhbCBzdHJpbmcgdmFsdWVzLiAqL1xudmFyIHJlSXNPY3RhbCA9IC9eMG9bMC03XSskL2k7XG5cbi8qKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB3aXRob3V0IGEgZGVwZW5kZW5jeSBvbiBgcm9vdGAuICovXG52YXIgZnJlZVBhcnNlSW50ID0gcGFyc2VJbnQ7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIG51bWJlci5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b051bWJlcigzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b051bWJlcihOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9OdW1iZXIoSW5maW5pdHkpO1xuICogLy8gPT4gSW5maW5pdHlcbiAqXG4gKiBfLnRvTnVtYmVyKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlID09ICdudW1iZXInKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmIChpc1N5bWJvbCh2YWx1ZSkpIHtcbiAgICByZXR1cm4gTkFOO1xuICB9XG4gIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICB2YXIgb3RoZXIgPSBpc0Z1bmN0aW9uKHZhbHVlLnZhbHVlT2YpID8gdmFsdWUudmFsdWVPZigpIDogdmFsdWU7XG4gICAgdmFsdWUgPSBpc09iamVjdChvdGhlcikgPyAob3RoZXIgKyAnJykgOiBvdGhlcjtcbiAgfVxuICBpZiAodHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiArdmFsdWU7XG4gIH1cbiAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKHJlVHJpbSwgJycpO1xuICB2YXIgaXNCaW5hcnkgPSByZUlzQmluYXJ5LnRlc3QodmFsdWUpO1xuICByZXR1cm4gKGlzQmluYXJ5IHx8IHJlSXNPY3RhbC50ZXN0KHZhbHVlKSlcbiAgICA/IGZyZWVQYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgaXNCaW5hcnkgPyAyIDogOClcbiAgICA6IChyZUlzQmFkSGV4LnRlc3QodmFsdWUpID8gTkFOIDogK3ZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b051bWJlcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC90b051bWJlci5qc1xuICoqIG1vZHVsZSBpZCA9IDQyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIFZ1ZS5qcyB2MS4wLjI2XG4gKiAoYykgMjAxNiBFdmFuIFlvdVxuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBMaWNlbnNlLlxuICovXG4ndXNlIHN0cmljdCc7XG5cbmZ1bmN0aW9uIHNldChvYmosIGtleSwgdmFsKSB7XG4gIGlmIChoYXNPd24ob2JqLCBrZXkpKSB7XG4gICAgb2JqW2tleV0gPSB2YWw7XG4gICAgcmV0dXJuO1xuICB9XG4gIGlmIChvYmouX2lzVnVlKSB7XG4gICAgc2V0KG9iai5fZGF0YSwga2V5LCB2YWwpO1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgb2IgPSBvYmouX19vYl9fO1xuICBpZiAoIW9iKSB7XG4gICAgb2JqW2tleV0gPSB2YWw7XG4gICAgcmV0dXJuO1xuICB9XG4gIG9iLmNvbnZlcnQoa2V5LCB2YWwpO1xuICBvYi5kZXAubm90aWZ5KCk7XG4gIGlmIChvYi52bXMpIHtcbiAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuICAgICAgdm0uX3Byb3h5KGtleSk7XG4gICAgICB2bS5fZGlnZXN0KCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogRGVsZXRlIGEgcHJvcGVydHkgYW5kIHRyaWdnZXIgY2hhbmdlIGlmIG5lY2Vzc2FyeS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKi9cblxuZnVuY3Rpb24gZGVsKG9iaiwga2V5KSB7XG4gIGlmICghaGFzT3duKG9iaiwga2V5KSkge1xuICAgIHJldHVybjtcbiAgfVxuICBkZWxldGUgb2JqW2tleV07XG4gIHZhciBvYiA9IG9iai5fX29iX187XG4gIGlmICghb2IpIHtcbiAgICBpZiAob2JqLl9pc1Z1ZSkge1xuICAgICAgZGVsZXRlIG9iai5fZGF0YVtrZXldO1xuICAgICAgb2JqLl9kaWdlc3QoKTtcbiAgICB9XG4gICAgcmV0dXJuO1xuICB9XG4gIG9iLmRlcC5ub3RpZnkoKTtcbiAgaWYgKG9iLnZtcykge1xuICAgIHZhciBpID0gb2Iudm1zLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIgdm0gPSBvYi52bXNbaV07XG4gICAgICB2bS5fdW5wcm94eShrZXkpO1xuICAgICAgdm0uX2RpZ2VzdCgpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuLyoqXG4gKiBDaGVjayB3aGV0aGVyIHRoZSBvYmplY3QgaGFzIHRoZSBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGhhc093bihvYmosIGtleSkge1xuICByZXR1cm4gaGFzT3duUHJvcGVydHkuY2FsbChvYmosIGtleSk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZXhwcmVzc2lvbiBpcyBhIGxpdGVyYWwgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgbGl0ZXJhbFZhbHVlUkUgPSAvXlxccz8odHJ1ZXxmYWxzZXwtP1tcXGRcXC5dK3wnW14nXSonfFwiW15cIl0qXCIpXFxzPyQvO1xuXG5mdW5jdGlvbiBpc0xpdGVyYWwoZXhwKSB7XG4gIHJldHVybiBsaXRlcmFsVmFsdWVSRS50ZXN0KGV4cCk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBzdHJpbmcgc3RhcnRzIHdpdGggJCBvciBfXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1Jlc2VydmVkKHN0cikge1xuICB2YXIgYyA9IChzdHIgKyAnJykuY2hhckNvZGVBdCgwKTtcbiAgcmV0dXJuIGMgPT09IDB4MjQgfHwgYyA9PT0gMHg1Rjtcbn1cblxuLyoqXG4gKiBHdWFyZCB0ZXh0IG91dHB1dCwgbWFrZSBzdXJlIHVuZGVmaW5lZCBvdXRwdXRzXG4gKiBlbXB0eSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gX3RvU3RyaW5nKHZhbHVlKSB7XG4gIHJldHVybiB2YWx1ZSA9PSBudWxsID8gJycgOiB2YWx1ZS50b1N0cmluZygpO1xufVxuXG4vKipcbiAqIENoZWNrIGFuZCBjb252ZXJ0IHBvc3NpYmxlIG51bWVyaWMgc3RyaW5ncyB0byBudW1iZXJzXG4gKiBiZWZvcmUgc2V0dGluZyBiYWNrIHRvIGRhdGFcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHsqfE51bWJlcn1cbiAqL1xuXG5mdW5jdGlvbiB0b051bWJlcih2YWx1ZSkge1xuICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcbiAgICByZXR1cm4gaXNOYU4ocGFyc2VkKSA/IHZhbHVlIDogcGFyc2VkO1xuICB9XG59XG5cbi8qKlxuICogQ29udmVydCBzdHJpbmcgYm9vbGVhbiBsaXRlcmFscyBpbnRvIHJlYWwgYm9vbGVhbnMuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7KnxCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIHRvQm9vbGVhbih2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT09ICd0cnVlJyA/IHRydWUgOiB2YWx1ZSA9PT0gJ2ZhbHNlJyA/IGZhbHNlIDogdmFsdWU7XG59XG5cbi8qKlxuICogU3RyaXAgcXVvdGVzIGZyb20gYSBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmcgfCBmYWxzZX1cbiAqL1xuXG5mdW5jdGlvbiBzdHJpcFF1b3RlcyhzdHIpIHtcbiAgdmFyIGEgPSBzdHIuY2hhckNvZGVBdCgwKTtcbiAgdmFyIGIgPSBzdHIuY2hhckNvZGVBdChzdHIubGVuZ3RoIC0gMSk7XG4gIHJldHVybiBhID09PSBiICYmIChhID09PSAweDIyIHx8IGEgPT09IDB4MjcpID8gc3RyLnNsaWNlKDEsIC0xKSA6IHN0cjtcbn1cblxuLyoqXG4gKiBDYW1lbGl6ZSBhIGh5cGhlbi1kZWxtaXRlZCBzdHJpbmcuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbnZhciBjYW1lbGl6ZVJFID0gLy0oXFx3KS9nO1xuXG5mdW5jdGlvbiBjYW1lbGl6ZShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGNhbWVsaXplUkUsIHRvVXBwZXIpO1xufVxuXG5mdW5jdGlvbiB0b1VwcGVyKF8sIGMpIHtcbiAgcmV0dXJuIGMgPyBjLnRvVXBwZXJDYXNlKCkgOiAnJztcbn1cblxuLyoqXG4gKiBIeXBoZW5hdGUgYSBjYW1lbENhc2Ugc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgaHlwaGVuYXRlUkUgPSAvKFthLXpcXGRdKShbQS1aXSkvZztcblxuZnVuY3Rpb24gaHlwaGVuYXRlKHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoaHlwaGVuYXRlUkUsICckMS0kMicpLnRvTG93ZXJDYXNlKCk7XG59XG5cbi8qKlxuICogQ29udmVydHMgaHlwaGVuL3VuZGVyc2NvcmUvc2xhc2ggZGVsaW1pdGVyZWQgbmFtZXMgaW50b1xuICogY2FtZWxpemVkIGNsYXNzTmFtZXMuXG4gKlxuICogZS5nLiBteS1jb21wb25lbnQgPT4gTXlDb21wb25lbnRcbiAqICAgICAgc29tZV9lbHNlICAgID0+IFNvbWVFbHNlXG4gKiAgICAgIHNvbWUvY29tcCAgICA9PiBTb21lQ29tcFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgY2xhc3NpZnlSRSA9IC8oPzpefFstX1xcL10pKFxcdykvZztcblxuZnVuY3Rpb24gY2xhc3NpZnkoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShjbGFzc2lmeVJFLCB0b1VwcGVyKTtcbn1cblxuLyoqXG4gKiBTaW1wbGUgYmluZCwgZmFzdGVyIHRoYW4gbmF0aXZlXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqIEBwYXJhbSB7T2JqZWN0fSBjdHhcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGJpbmQoZm4sIGN0eCkge1xuICByZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgbCA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgcmV0dXJuIGwgPyBsID4gMSA/IGZuLmFwcGx5KGN0eCwgYXJndW1lbnRzKSA6IGZuLmNhbGwoY3R4LCBhKSA6IGZuLmNhbGwoY3R4KTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGFuIEFycmF5LWxpa2Ugb2JqZWN0IHRvIGEgcmVhbCBBcnJheS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5LWxpa2V9IGxpc3RcbiAqIEBwYXJhbSB7TnVtYmVyfSBbc3RhcnRdIC0gc3RhcnQgaW5kZXhcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5cbmZ1bmN0aW9uIHRvQXJyYXkobGlzdCwgc3RhcnQpIHtcbiAgc3RhcnQgPSBzdGFydCB8fCAwO1xuICB2YXIgaSA9IGxpc3QubGVuZ3RoIC0gc3RhcnQ7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoaSk7XG4gIHdoaWxlIChpLS0pIHtcbiAgICByZXRbaV0gPSBsaXN0W2kgKyBzdGFydF07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBNaXggcHJvcGVydGllcyBpbnRvIHRhcmdldCBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRvXG4gKiBAcGFyYW0ge09iamVjdH0gZnJvbVxuICovXG5cbmZ1bmN0aW9uIGV4dGVuZCh0bywgZnJvbSkge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGZyb20pO1xuICB2YXIgaSA9IGtleXMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgdG9ba2V5c1tpXV0gPSBmcm9tW2tleXNbaV1dO1xuICB9XG4gIHJldHVybiB0bztcbn1cblxuLyoqXG4gKiBRdWljayBvYmplY3QgY2hlY2sgLSB0aGlzIGlzIHByaW1hcmlseSB1c2VkIHRvIHRlbGxcbiAqIE9iamVjdHMgZnJvbSBwcmltaXRpdmUgdmFsdWVzIHdoZW4gd2Uga25vdyB0aGUgdmFsdWVcbiAqIGlzIGEgSlNPTi1jb21wbGlhbnQgdHlwZS5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc09iamVjdChvYmopIHtcbiAgcmV0dXJuIG9iaiAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0Jztcbn1cblxuLyoqXG4gKiBTdHJpY3Qgb2JqZWN0IHR5cGUgY2hlY2suIE9ubHkgcmV0dXJucyB0cnVlXG4gKiBmb3IgcGxhaW4gSmF2YVNjcmlwdCBvYmplY3RzLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbnZhciB0b1N0cmluZyA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG52YXIgT0JKRUNUX1NUUklORyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXG5mdW5jdGlvbiBpc1BsYWluT2JqZWN0KG9iaikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChvYmopID09PSBPQkpFQ1RfU1RSSU5HO1xufVxuXG4vKipcbiAqIEFycmF5IHR5cGUgY2hlY2suXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxudmFyIGlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xuXG4vKipcbiAqIERlZmluZSBhIHByb3BlcnR5LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtlbnVtZXJhYmxlXVxuICovXG5cbmZ1bmN0aW9uIGRlZihvYmosIGtleSwgdmFsLCBlbnVtZXJhYmxlKSB7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIHZhbHVlOiB2YWwsXG4gICAgZW51bWVyYWJsZTogISFlbnVtZXJhYmxlLFxuICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxuICB9KTtcbn1cblxuLyoqXG4gKiBEZWJvdW5jZSBhIGZ1bmN0aW9uIHNvIGl0IG9ubHkgZ2V0cyBjYWxsZWQgYWZ0ZXIgdGhlXG4gKiBpbnB1dCBzdG9wcyBhcnJpdmluZyBhZnRlciB0aGUgZ2l2ZW4gd2FpdCBwZXJpb2QuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY1xuICogQHBhcmFtIHtOdW1iZXJ9IHdhaXRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb25cbiAqL1xuXG5mdW5jdGlvbiBfZGVib3VuY2UoZnVuYywgd2FpdCkge1xuICB2YXIgdGltZW91dCwgYXJncywgY29udGV4dCwgdGltZXN0YW1wLCByZXN1bHQ7XG4gIHZhciBsYXRlciA9IGZ1bmN0aW9uIGxhdGVyKCkge1xuICAgIHZhciBsYXN0ID0gRGF0ZS5ub3coKSAtIHRpbWVzdGFtcDtcbiAgICBpZiAobGFzdCA8IHdhaXQgJiYgbGFzdCA+PSAwKSB7XG4gICAgICB0aW1lb3V0ID0gc2V0VGltZW91dChsYXRlciwgd2FpdCAtIGxhc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aW1lb3V0ID0gbnVsbDtcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICBpZiAoIXRpbWVvdXQpIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcbiAgICB9XG4gIH07XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgY29udGV4dCA9IHRoaXM7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICB0aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgIGlmICghdGltZW91dCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufVxuXG4vKipcbiAqIE1hbnVhbCBpbmRleE9mIGJlY2F1c2UgaXQncyBzbGlnaHRseSBmYXN0ZXIgdGhhblxuICogbmF0aXZlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICogQHBhcmFtIHsqfSBvYmpcbiAqL1xuXG5mdW5jdGlvbiBpbmRleE9mKGFyciwgb2JqKSB7XG4gIHZhciBpID0gYXJyLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGlmIChhcnJbaV0gPT09IG9iaikgcmV0dXJuIGk7XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG4vKipcbiAqIE1ha2UgYSBjYW5jZWxsYWJsZSB2ZXJzaW9uIG9mIGFuIGFzeW5jIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjYW5jZWxsYWJsZShmbikge1xuICB2YXIgY2IgPSBmdW5jdGlvbiBjYigpIHtcbiAgICBpZiAoIWNiLmNhbmNlbGxlZCkge1xuICAgICAgcmV0dXJuIGZuLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxuICB9O1xuICBjYi5jYW5jZWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgY2IuY2FuY2VsbGVkID0gdHJ1ZTtcbiAgfTtcbiAgcmV0dXJuIGNiO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIHR3byB2YWx1ZXMgYXJlIGxvb3NlbHkgZXF1YWwgLSB0aGF0IGlzLFxuICogaWYgdGhleSBhcmUgcGxhaW4gb2JqZWN0cywgZG8gdGhleSBoYXZlIHRoZSBzYW1lIHNoYXBlP1xuICpcbiAqIEBwYXJhbSB7Kn0gYVxuICogQHBhcmFtIHsqfSBiXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGxvb3NlRXF1YWwoYSwgYikge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBlcWVxZXEgKi9cbiAgcmV0dXJuIGEgPT0gYiB8fCAoaXNPYmplY3QoYSkgJiYgaXNPYmplY3QoYikgPyBKU09OLnN0cmluZ2lmeShhKSA9PT0gSlNPTi5zdHJpbmdpZnkoYikgOiBmYWxzZSk7XG4gIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG59XG5cbnZhciBoYXNQcm90byA9ICgnX19wcm90b19fJyBpbiB7fSk7XG5cbi8vIEJyb3dzZXIgZW52aXJvbm1lbnQgc25pZmZpbmdcbnZhciBpbkJyb3dzZXIgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwod2luZG93KSAhPT0gJ1tvYmplY3QgT2JqZWN0XSc7XG5cbi8vIGRldGVjdCBkZXZ0b29sc1xudmFyIGRldnRvb2xzID0gaW5Ccm93c2VyICYmIHdpbmRvdy5fX1ZVRV9ERVZUT09MU19HTE9CQUxfSE9PS19fO1xuXG4vLyBVQSBzbmlmZmluZyBmb3Igd29ya2luZyBhcm91bmQgYnJvd3Nlci1zcGVjaWZpYyBxdWlya3NcbnZhciBVQSA9IGluQnJvd3NlciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC50b0xvd2VyQ2FzZSgpO1xudmFyIGlzSUUgPSBVQSAmJiBVQS5pbmRleE9mKCd0cmlkZW50JykgPiAwO1xudmFyIGlzSUU5ID0gVUEgJiYgVUEuaW5kZXhPZignbXNpZSA5LjAnKSA+IDA7XG52YXIgaXNBbmRyb2lkID0gVUEgJiYgVUEuaW5kZXhPZignYW5kcm9pZCcpID4gMDtcbnZhciBpc0lvcyA9IFVBICYmIC8oaXBob25lfGlwYWR8aXBvZHxpb3MpL2kudGVzdChVQSk7XG52YXIgaW9zVmVyc2lvbk1hdGNoID0gaXNJb3MgJiYgVUEubWF0Y2goL29zIChbXFxkX10rKS8pO1xudmFyIGlvc1ZlcnNpb24gPSBpb3NWZXJzaW9uTWF0Y2ggJiYgaW9zVmVyc2lvbk1hdGNoWzFdLnNwbGl0KCdfJyk7XG5cbi8vIGRldGVjdGluZyBpT1MgVUlXZWJWaWV3IGJ5IGluZGV4ZWREQlxudmFyIGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcgPSBpb3NWZXJzaW9uICYmIE51bWJlcihpb3NWZXJzaW9uWzBdKSA+PSA5ICYmIE51bWJlcihpb3NWZXJzaW9uWzFdKSA+PSAzICYmICF3aW5kb3cuaW5kZXhlZERCO1xuXG52YXIgdHJhbnNpdGlvblByb3AgPSB1bmRlZmluZWQ7XG52YXIgdHJhbnNpdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xudmFyIGFuaW1hdGlvblByb3AgPSB1bmRlZmluZWQ7XG52YXIgYW5pbWF0aW9uRW5kRXZlbnQgPSB1bmRlZmluZWQ7XG5cbi8vIFRyYW5zaXRpb24gcHJvcGVydHkvZXZlbnQgc25pZmZpbmdcbmlmIChpbkJyb3dzZXIgJiYgIWlzSUU5KSB7XG4gIHZhciBpc1dlYmtpdFRyYW5zID0gd2luZG93Lm9udHJhbnNpdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdHRyYW5zaXRpb25lbmQgIT09IHVuZGVmaW5lZDtcbiAgdmFyIGlzV2Via2l0QW5pbSA9IHdpbmRvdy5vbmFuaW1hdGlvbmVuZCA9PT0gdW5kZWZpbmVkICYmIHdpbmRvdy5vbndlYmtpdGFuaW1hdGlvbmVuZCAhPT0gdW5kZWZpbmVkO1xuICB0cmFuc2l0aW9uUHJvcCA9IGlzV2Via2l0VHJhbnMgPyAnV2Via2l0VHJhbnNpdGlvbicgOiAndHJhbnNpdGlvbic7XG4gIHRyYW5zaXRpb25FbmRFdmVudCA9IGlzV2Via2l0VHJhbnMgPyAnd2Via2l0VHJhbnNpdGlvbkVuZCcgOiAndHJhbnNpdGlvbmVuZCc7XG4gIGFuaW1hdGlvblByb3AgPSBpc1dlYmtpdEFuaW0gPyAnV2Via2l0QW5pbWF0aW9uJyA6ICdhbmltYXRpb24nO1xuICBhbmltYXRpb25FbmRFdmVudCA9IGlzV2Via2l0QW5pbSA/ICd3ZWJraXRBbmltYXRpb25FbmQnIDogJ2FuaW1hdGlvbmVuZCc7XG59XG5cbi8qKlxuICogRGVmZXIgYSB0YXNrIHRvIGV4ZWN1dGUgaXQgYXN5bmNocm9ub3VzbHkuIElkZWFsbHkgdGhpc1xuICogc2hvdWxkIGJlIGV4ZWN1dGVkIGFzIGEgbWljcm90YXNrLCBzbyB3ZSBsZXZlcmFnZVxuICogTXV0YXRpb25PYnNlcnZlciBpZiBpdCdzIGF2YWlsYWJsZSwgYW5kIGZhbGxiYWNrIHRvXG4gKiBzZXRUaW1lb3V0KDApLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4XG4gKi9cblxudmFyIG5leHRUaWNrID0gKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGNhbGxiYWNrcyA9IFtdO1xuICB2YXIgcGVuZGluZyA9IGZhbHNlO1xuICB2YXIgdGltZXJGdW5jO1xuICBmdW5jdGlvbiBuZXh0VGlja0hhbmRsZXIoKSB7XG4gICAgcGVuZGluZyA9IGZhbHNlO1xuICAgIHZhciBjb3BpZXMgPSBjYWxsYmFja3Muc2xpY2UoMCk7XG4gICAgY2FsbGJhY2tzID0gW107XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3BpZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvcGllc1tpXSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIE11dGF0aW9uT2JzZXJ2ZXIgIT09ICd1bmRlZmluZWQnICYmICFoYXNNdXRhdGlvbk9ic2VydmVyQnVnKSB7XG4gICAgdmFyIGNvdW50ZXIgPSAxO1xuICAgIHZhciBvYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKG5leHRUaWNrSGFuZGxlcik7XG4gICAgdmFyIHRleHROb2RlID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoY291bnRlcik7XG4gICAgb2JzZXJ2ZXIub2JzZXJ2ZSh0ZXh0Tm9kZSwge1xuICAgICAgY2hhcmFjdGVyRGF0YTogdHJ1ZVxuICAgIH0pO1xuICAgIHRpbWVyRnVuYyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvdW50ZXIgPSAoY291bnRlciArIDEpICUgMjtcbiAgICAgIHRleHROb2RlLmRhdGEgPSBjb3VudGVyO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gd2VicGFjayBhdHRlbXB0cyB0byBpbmplY3QgYSBzaGltIGZvciBzZXRJbW1lZGlhdGVcbiAgICAvLyBpZiBpdCBpcyB1c2VkIGFzIGEgZ2xvYmFsLCBzbyB3ZSBoYXZlIHRvIHdvcmsgYXJvdW5kIHRoYXQgdG9cbiAgICAvLyBhdm9pZCBidW5kbGluZyB1bm5lY2Vzc2FyeSBjb2RlLlxuICAgIHZhciBjb250ZXh0ID0gaW5Ccm93c2VyID8gd2luZG93IDogdHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcgPyBnbG9iYWwgOiB7fTtcbiAgICB0aW1lckZ1bmMgPSBjb250ZXh0LnNldEltbWVkaWF0ZSB8fCBzZXRUaW1lb3V0O1xuICB9XG4gIHJldHVybiBmdW5jdGlvbiAoY2IsIGN0eCkge1xuICAgIHZhciBmdW5jID0gY3R4ID8gZnVuY3Rpb24gKCkge1xuICAgICAgY2IuY2FsbChjdHgpO1xuICAgIH0gOiBjYjtcbiAgICBjYWxsYmFja3MucHVzaChmdW5jKTtcbiAgICBpZiAocGVuZGluZykgcmV0dXJuO1xuICAgIHBlbmRpbmcgPSB0cnVlO1xuICAgIHRpbWVyRnVuYyhuZXh0VGlja0hhbmRsZXIsIDApO1xuICB9O1xufSkoKTtcblxudmFyIF9TZXQgPSB1bmRlZmluZWQ7XG4vKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbmlmICh0eXBlb2YgU2V0ICE9PSAndW5kZWZpbmVkJyAmJiBTZXQudG9TdHJpbmcoKS5tYXRjaCgvbmF0aXZlIGNvZGUvKSkge1xuICAvLyB1c2UgbmF0aXZlIFNldCB3aGVuIGF2YWlsYWJsZS5cbiAgX1NldCA9IFNldDtcbn0gZWxzZSB7XG4gIC8vIGEgbm9uLXN0YW5kYXJkIFNldCBwb2x5ZmlsbCB0aGF0IG9ubHkgd29ya3Mgd2l0aCBwcmltaXRpdmUga2V5cy5cbiAgX1NldCA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH07XG4gIF9TZXQucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICByZXR1cm4gdGhpcy5zZXRba2V5XSAhPT0gdW5kZWZpbmVkO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgdGhpcy5zZXRba2V5XSA9IDE7XG4gIH07XG4gIF9TZXQucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuc2V0ID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gQ2FjaGUobGltaXQpIHtcbiAgdGhpcy5zaXplID0gMDtcbiAgdGhpcy5saW1pdCA9IGxpbWl0O1xuICB0aGlzLmhlYWQgPSB0aGlzLnRhaWwgPSB1bmRlZmluZWQ7XG4gIHRoaXMuX2tleW1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG59XG5cbnZhciBwID0gQ2FjaGUucHJvdG90eXBlO1xuXG4vKipcbiAqIFB1dCA8dmFsdWU+IGludG8gdGhlIGNhY2hlIGFzc29jaWF0ZWQgd2l0aCA8a2V5Pi5cbiAqIFJldHVybnMgdGhlIGVudHJ5IHdoaWNoIHdhcyByZW1vdmVkIHRvIG1ha2Ugcm9vbSBmb3JcbiAqIHRoZSBuZXcgZW50cnkuIE90aGVyd2lzZSB1bmRlZmluZWQgaXMgcmV0dXJuZWQuXG4gKiAoaS5lLiBpZiB0aGVyZSB3YXMgZW5vdWdoIHJvb20gYWxyZWFkeSkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7RW50cnl8dW5kZWZpbmVkfVxuICovXG5cbnAucHV0ID0gZnVuY3Rpb24gKGtleSwgdmFsdWUpIHtcbiAgdmFyIHJlbW92ZWQ7XG5cbiAgdmFyIGVudHJ5ID0gdGhpcy5nZXQoa2V5LCB0cnVlKTtcbiAgaWYgKCFlbnRyeSkge1xuICAgIGlmICh0aGlzLnNpemUgPT09IHRoaXMubGltaXQpIHtcbiAgICAgIHJlbW92ZWQgPSB0aGlzLnNoaWZ0KCk7XG4gICAgfVxuICAgIGVudHJ5ID0ge1xuICAgICAga2V5OiBrZXlcbiAgICB9O1xuICAgIHRoaXMuX2tleW1hcFtrZXldID0gZW50cnk7XG4gICAgaWYgKHRoaXMudGFpbCkge1xuICAgICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7XG4gICAgICBlbnRyeS5vbGRlciA9IHRoaXMudGFpbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oZWFkID0gZW50cnk7XG4gICAgfVxuICAgIHRoaXMudGFpbCA9IGVudHJ5O1xuICAgIHRoaXMuc2l6ZSsrO1xuICB9XG4gIGVudHJ5LnZhbHVlID0gdmFsdWU7XG5cbiAgcmV0dXJuIHJlbW92ZWQ7XG59O1xuXG4vKipcbiAqIFB1cmdlIHRoZSBsZWFzdCByZWNlbnRseSB1c2VkIChvbGRlc3QpIGVudHJ5IGZyb20gdGhlXG4gKiBjYWNoZS4gUmV0dXJucyB0aGUgcmVtb3ZlZCBlbnRyeSBvciB1bmRlZmluZWQgaWYgdGhlXG4gKiBjYWNoZSB3YXMgZW1wdHkuXG4gKi9cblxucC5zaGlmdCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGVudHJ5ID0gdGhpcy5oZWFkO1xuICBpZiAoZW50cnkpIHtcbiAgICB0aGlzLmhlYWQgPSB0aGlzLmhlYWQubmV3ZXI7XG4gICAgdGhpcy5oZWFkLm9sZGVyID0gdW5kZWZpbmVkO1xuICAgIGVudHJ5Lm5ld2VyID0gZW50cnkub2xkZXIgPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5fa2V5bWFwW2VudHJ5LmtleV0gPSB1bmRlZmluZWQ7XG4gICAgdGhpcy5zaXplLS07XG4gIH1cbiAgcmV0dXJuIGVudHJ5O1xufTtcblxuLyoqXG4gKiBHZXQgYW5kIHJlZ2lzdGVyIHJlY2VudCB1c2Ugb2YgPGtleT4uIFJldHVybnMgdGhlIHZhbHVlXG4gKiBhc3NvY2lhdGVkIHdpdGggPGtleT4gb3IgdW5kZWZpbmVkIGlmIG5vdCBpbiBjYWNoZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge0Jvb2xlYW59IHJldHVybkVudHJ5XG4gKiBAcmV0dXJuIHtFbnRyeXwqfVxuICovXG5cbnAuZ2V0ID0gZnVuY3Rpb24gKGtleSwgcmV0dXJuRW50cnkpIHtcbiAgdmFyIGVudHJ5ID0gdGhpcy5fa2V5bWFwW2tleV07XG4gIGlmIChlbnRyeSA9PT0gdW5kZWZpbmVkKSByZXR1cm47XG4gIGlmIChlbnRyeSA9PT0gdGhpcy50YWlsKSB7XG4gICAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcbiAgfVxuICAvLyBIRUFELS0tLS0tLS0tLS0tLS1UQUlMXG4gIC8vICAgPC5vbGRlciAgIC5uZXdlcj5cbiAgLy8gIDwtLS0gYWRkIGRpcmVjdGlvbiAtLVxuICAvLyAgIEEgIEIgIEMgIDxEPiAgRVxuICBpZiAoZW50cnkubmV3ZXIpIHtcbiAgICBpZiAoZW50cnkgPT09IHRoaXMuaGVhZCkge1xuICAgICAgdGhpcy5oZWFkID0gZW50cnkubmV3ZXI7XG4gICAgfVxuICAgIGVudHJ5Lm5ld2VyLm9sZGVyID0gZW50cnkub2xkZXI7IC8vIEMgPC0tIEUuXG4gIH1cbiAgaWYgKGVudHJ5Lm9sZGVyKSB7XG4gICAgZW50cnkub2xkZXIubmV3ZXIgPSBlbnRyeS5uZXdlcjsgLy8gQy4gLS0+IEVcbiAgfVxuICBlbnRyeS5uZXdlciA9IHVuZGVmaW5lZDsgLy8gRCAtLXhcbiAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7IC8vIEQuIC0tPiBFXG4gIGlmICh0aGlzLnRhaWwpIHtcbiAgICB0aGlzLnRhaWwubmV3ZXIgPSBlbnRyeTsgLy8gRS4gPC0tIERcbiAgfVxuICB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgcmV0dXJuIHJldHVybkVudHJ5ID8gZW50cnkgOiBlbnRyeS52YWx1ZTtcbn07XG5cbnZhciBjYWNoZSQxID0gbmV3IENhY2hlKDEwMDApO1xudmFyIGZpbHRlclRva2VuUkUgPSAvW15cXHMnXCJdK3wnW14nXSonfFwiW15cIl0qXCIvZztcbnZhciByZXNlcnZlZEFyZ1JFID0gL15pbiR8Xi0/XFxkKy87XG5cbi8qKlxuICogUGFyc2VyIHN0YXRlXG4gKi9cblxudmFyIHN0cjtcbnZhciBkaXI7XG52YXIgYztcbnZhciBwcmV2O1xudmFyIGk7XG52YXIgbDtcbnZhciBsYXN0RmlsdGVySW5kZXg7XG52YXIgaW5TaW5nbGU7XG52YXIgaW5Eb3VibGU7XG52YXIgY3VybHk7XG52YXIgc3F1YXJlO1xudmFyIHBhcmVuO1xuLyoqXG4gKiBQdXNoIGEgZmlsdGVyIHRvIHRoZSBjdXJyZW50IGRpcmVjdGl2ZSBvYmplY3RcbiAqL1xuXG5mdW5jdGlvbiBwdXNoRmlsdGVyKCkge1xuICB2YXIgZXhwID0gc3RyLnNsaWNlKGxhc3RGaWx0ZXJJbmRleCwgaSkudHJpbSgpO1xuICB2YXIgZmlsdGVyO1xuICBpZiAoZXhwKSB7XG4gICAgZmlsdGVyID0ge307XG4gICAgdmFyIHRva2VucyA9IGV4cC5tYXRjaChmaWx0ZXJUb2tlblJFKTtcbiAgICBmaWx0ZXIubmFtZSA9IHRva2Vuc1swXTtcbiAgICBpZiAodG9rZW5zLmxlbmd0aCA+IDEpIHtcbiAgICAgIGZpbHRlci5hcmdzID0gdG9rZW5zLnNsaWNlKDEpLm1hcChwcm9jZXNzRmlsdGVyQXJnKTtcbiAgICB9XG4gIH1cbiAgaWYgKGZpbHRlcikge1xuICAgIChkaXIuZmlsdGVycyA9IGRpci5maWx0ZXJzIHx8IFtdKS5wdXNoKGZpbHRlcik7XG4gIH1cbiAgbGFzdEZpbHRlckluZGV4ID0gaSArIDE7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gYXJndW1lbnQgaXMgZHluYW1pYyBhbmQgc3RyaXAgcXVvdGVzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBhcmdcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzRmlsdGVyQXJnKGFyZykge1xuICBpZiAocmVzZXJ2ZWRBcmdSRS50ZXN0KGFyZykpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdmFsdWU6IHRvTnVtYmVyKGFyZyksXG4gICAgICBkeW5hbWljOiBmYWxzZVxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgdmFyIHN0cmlwcGVkID0gc3RyaXBRdW90ZXMoYXJnKTtcbiAgICB2YXIgZHluYW1pYyA9IHN0cmlwcGVkID09PSBhcmc7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiBkeW5hbWljID8gYXJnIDogc3RyaXBwZWQsXG4gICAgICBkeW5hbWljOiBkeW5hbWljXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIGEgZGlyZWN0aXZlIHZhbHVlIGFuZCBleHRyYWN0IHRoZSBleHByZXNzaW9uXG4gKiBhbmQgaXRzIGZpbHRlcnMgaW50byBhIGRlc2NyaXB0b3IuXG4gKlxuICogRXhhbXBsZTpcbiAqXG4gKiBcImEgKyAxIHwgdXBwZXJjYXNlXCIgd2lsbCB5aWVsZDpcbiAqIHtcbiAqICAgZXhwcmVzc2lvbjogJ2EgKyAxJyxcbiAqICAgZmlsdGVyczogW1xuICogICAgIHsgbmFtZTogJ3VwcGVyY2FzZScsIGFyZ3M6IG51bGwgfVxuICogICBdXG4gKiB9XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZURpcmVjdGl2ZShzKSB7XG4gIHZhciBoaXQgPSBjYWNoZSQxLmdldChzKTtcbiAgaWYgKGhpdCkge1xuICAgIHJldHVybiBoaXQ7XG4gIH1cblxuICAvLyByZXNldCBwYXJzZXIgc3RhdGVcbiAgc3RyID0gcztcbiAgaW5TaW5nbGUgPSBpbkRvdWJsZSA9IGZhbHNlO1xuICBjdXJseSA9IHNxdWFyZSA9IHBhcmVuID0gMDtcbiAgbGFzdEZpbHRlckluZGV4ID0gMDtcbiAgZGlyID0ge307XG5cbiAgZm9yIChpID0gMCwgbCA9IHN0ci5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBwcmV2ID0gYztcbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSk7XG4gICAgaWYgKGluU2luZ2xlKSB7XG4gICAgICAvLyBjaGVjayBzaW5nbGUgcXVvdGVcbiAgICAgIGlmIChjID09PSAweDI3ICYmIHByZXYgIT09IDB4NUMpIGluU2luZ2xlID0gIWluU2luZ2xlO1xuICAgIH0gZWxzZSBpZiAoaW5Eb3VibGUpIHtcbiAgICAgIC8vIGNoZWNrIGRvdWJsZSBxdW90ZVxuICAgICAgaWYgKGMgPT09IDB4MjIgJiYgcHJldiAhPT0gMHg1QykgaW5Eb3VibGUgPSAhaW5Eb3VibGU7XG4gICAgfSBlbHNlIGlmIChjID09PSAweDdDICYmIC8vIHBpcGVcbiAgICBzdHIuY2hhckNvZGVBdChpICsgMSkgIT09IDB4N0MgJiYgc3RyLmNoYXJDb2RlQXQoaSAtIDEpICE9PSAweDdDKSB7XG4gICAgICBpZiAoZGlyLmV4cHJlc3Npb24gPT0gbnVsbCkge1xuICAgICAgICAvLyBmaXJzdCBmaWx0ZXIsIGVuZCBvZiBleHByZXNzaW9uXG4gICAgICAgIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xuICAgICAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBhbHJlYWR5IGhhcyBmaWx0ZXJcbiAgICAgICAgcHVzaEZpbHRlcigpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBzd2l0Y2ggKGMpIHtcbiAgICAgICAgY2FzZSAweDIyOlxuICAgICAgICAgIGluRG91YmxlID0gdHJ1ZTticmVhazsgLy8gXCJcbiAgICAgICAgY2FzZSAweDI3OlxuICAgICAgICAgIGluU2luZ2xlID0gdHJ1ZTticmVhazsgLy8gJ1xuICAgICAgICBjYXNlIDB4Mjg6XG4gICAgICAgICAgcGFyZW4rKzticmVhazsgLy8gKFxuICAgICAgICBjYXNlIDB4Mjk6XG4gICAgICAgICAgcGFyZW4tLTticmVhazsgLy8gKVxuICAgICAgICBjYXNlIDB4NUI6XG4gICAgICAgICAgc3F1YXJlKys7YnJlYWs7IC8vIFtcbiAgICAgICAgY2FzZSAweDVEOlxuICAgICAgICAgIHNxdWFyZS0tO2JyZWFrOyAvLyBdXG4gICAgICAgIGNhc2UgMHg3QjpcbiAgICAgICAgICBjdXJseSsrO2JyZWFrOyAvLyB7XG4gICAgICAgIGNhc2UgMHg3RDpcbiAgICAgICAgICBjdXJseS0tO2JyZWFrOyAvLyB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcbiAgICBkaXIuZXhwcmVzc2lvbiA9IHN0ci5zbGljZSgwLCBpKS50cmltKCk7XG4gIH0gZWxzZSBpZiAobGFzdEZpbHRlckluZGV4ICE9PSAwKSB7XG4gICAgcHVzaEZpbHRlcigpO1xuICB9XG5cbiAgY2FjaGUkMS5wdXQocywgZGlyKTtcbiAgcmV0dXJuIGRpcjtcbn1cblxudmFyIGRpcmVjdGl2ZSA9IE9iamVjdC5mcmVlemUoe1xuICBwYXJzZURpcmVjdGl2ZTogcGFyc2VEaXJlY3RpdmVcbn0pO1xuXG52YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2c7XG52YXIgY2FjaGUgPSB1bmRlZmluZWQ7XG52YXIgdGFnUkUgPSB1bmRlZmluZWQ7XG52YXIgaHRtbFJFID0gdW5kZWZpbmVkO1xuLyoqXG4gKiBFc2NhcGUgYSBzdHJpbmcgc28gaXQgY2FuIGJlIHVzZWQgaW4gYSBSZWdFeHBcbiAqIGNvbnN0cnVjdG9yLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqL1xuXG5mdW5jdGlvbiBlc2NhcGVSZWdleChzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKHJlZ2V4RXNjYXBlUkUsICdcXFxcJCYnKTtcbn1cblxuZnVuY3Rpb24gY29tcGlsZVJlZ2V4KCkge1xuICB2YXIgb3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzBdKTtcbiAgdmFyIGNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLmRlbGltaXRlcnNbMV0pO1xuICB2YXIgdW5zYWZlT3BlbiA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzBdKTtcbiAgdmFyIHVuc2FmZUNsb3NlID0gZXNjYXBlUmVnZXgoY29uZmlnLnVuc2FmZURlbGltaXRlcnNbMV0pO1xuICB0YWdSRSA9IG5ldyBSZWdFeHAodW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnfCcgKyBvcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyBjbG9zZSwgJ2cnKTtcbiAgaHRtbFJFID0gbmV3IFJlZ0V4cCgnXicgKyB1bnNhZmVPcGVuICsgJygoPzoufFxcXFxuKSs/KScgKyB1bnNhZmVDbG9zZSArICckJyk7XG4gIC8vIHJlc2V0IGNhY2hlXG4gIGNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgdGVtcGxhdGUgdGV4dCBzdHJpbmcgaW50byBhbiBhcnJheSBvZiB0b2tlbnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAqIEByZXR1cm4ge0FycmF5PE9iamVjdD4gfCBudWxsfVxuICogICAgICAgICAgICAgICAtIHtTdHJpbmd9IHR5cGVcbiAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB2YWx1ZVxuICogICAgICAgICAgICAgICAtIHtCb29sZWFufSBbaHRtbF1cbiAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW29uZVRpbWVdXG4gKi9cblxuZnVuY3Rpb24gcGFyc2VUZXh0KHRleHQpIHtcbiAgaWYgKCFjYWNoZSkge1xuICAgIGNvbXBpbGVSZWdleCgpO1xuICB9XG4gIHZhciBoaXQgPSBjYWNoZS5nZXQodGV4dCk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG4gIGlmICghdGFnUkUudGVzdCh0ZXh0KSkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHZhciB0b2tlbnMgPSBbXTtcbiAgdmFyIGxhc3RJbmRleCA9IHRhZ1JFLmxhc3RJbmRleCA9IDA7XG4gIHZhciBtYXRjaCwgaW5kZXgsIGh0bWwsIHZhbHVlLCBmaXJzdCwgb25lVGltZTtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgd2hpbGUgKG1hdGNoID0gdGFnUkUuZXhlYyh0ZXh0KSkge1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBpbmRleCA9IG1hdGNoLmluZGV4O1xuICAgIC8vIHB1c2ggdGV4dCB0b2tlblxuICAgIGlmIChpbmRleCA+IGxhc3RJbmRleCkge1xuICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICB2YWx1ZTogdGV4dC5zbGljZShsYXN0SW5kZXgsIGluZGV4KVxuICAgICAgfSk7XG4gICAgfVxuICAgIC8vIHRhZyB0b2tlblxuICAgIGh0bWwgPSBodG1sUkUudGVzdChtYXRjaFswXSk7XG4gICAgdmFsdWUgPSBodG1sID8gbWF0Y2hbMV0gOiBtYXRjaFsyXTtcbiAgICBmaXJzdCA9IHZhbHVlLmNoYXJDb2RlQXQoMCk7XG4gICAgb25lVGltZSA9IGZpcnN0ID09PSA0MjsgLy8gKlxuICAgIHZhbHVlID0gb25lVGltZSA/IHZhbHVlLnNsaWNlKDEpIDogdmFsdWU7XG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgdGFnOiB0cnVlLFxuICAgICAgdmFsdWU6IHZhbHVlLnRyaW0oKSxcbiAgICAgIGh0bWw6IGh0bWwsXG4gICAgICBvbmVUaW1lOiBvbmVUaW1lXG4gICAgfSk7XG4gICAgbGFzdEluZGV4ID0gaW5kZXggKyBtYXRjaFswXS5sZW5ndGg7XG4gIH1cbiAgaWYgKGxhc3RJbmRleCA8IHRleHQubGVuZ3RoKSB7XG4gICAgdG9rZW5zLnB1c2goe1xuICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4KVxuICAgIH0pO1xuICB9XG4gIGNhY2hlLnB1dCh0ZXh0LCB0b2tlbnMpO1xuICByZXR1cm4gdG9rZW5zO1xufVxuXG4vKipcbiAqIEZvcm1hdCBhIGxpc3Qgb2YgdG9rZW5zIGludG8gYW4gZXhwcmVzc2lvbi5cbiAqIGUuZy4gdG9rZW5zIHBhcnNlZCBmcm9tICdhIHt7Yn19IGMnIGNhbiBiZSBzZXJpYWxpemVkXG4gKiBpbnRvIG9uZSBzaW5nbGUgZXhwcmVzc2lvbiBhcyAnXCJhIFwiICsgYiArIFwiIGNcIicuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gdG9rZW5zXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHRva2Vuc1RvRXhwKHRva2Vucywgdm0pIHtcbiAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG4gICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICByZXR1cm4gZm9ybWF0VG9rZW4odG9rZW4sIHZtKTtcbiAgICB9KS5qb2luKCcrJyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2Vuc1swXSwgdm0sIHRydWUpO1xuICB9XG59XG5cbi8qKlxuICogRm9ybWF0IGEgc2luZ2xlIHRva2VuLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b2tlblxuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3NpbmdsZV1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRUb2tlbih0b2tlbiwgdm0sIHNpbmdsZSkge1xuICByZXR1cm4gdG9rZW4udGFnID8gdG9rZW4ub25lVGltZSAmJiB2bSA/ICdcIicgKyB2bS4kZXZhbCh0b2tlbi52YWx1ZSkgKyAnXCInIDogaW5saW5lRmlsdGVycyh0b2tlbi52YWx1ZSwgc2luZ2xlKSA6ICdcIicgKyB0b2tlbi52YWx1ZSArICdcIic7XG59XG5cbi8qKlxuICogRm9yIGFuIGF0dHJpYnV0ZSB3aXRoIG11bHRpcGxlIGludGVycG9sYXRpb24gdGFncyxcbiAqIGUuZy4gYXR0cj1cInNvbWUte3t0aGluZyB8IGZpbHRlcn19XCIsIGluIG9yZGVyIHRvIGNvbWJpbmVcbiAqIHRoZSB3aG9sZSB0aGluZyBpbnRvIGEgc2luZ2xlIHdhdGNoYWJsZSBleHByZXNzaW9uLCB3ZVxuICogaGF2ZSB0byBpbmxpbmUgdGhvc2UgZmlsdGVycy4gVGhpcyBmdW5jdGlvbiBkb2VzIGV4YWN0bHlcbiAqIHRoYXQuIFRoaXMgaXMgYSBiaXQgaGFja3kgYnV0IGl0IGF2b2lkcyBoZWF2eSBjaGFuZ2VzXG4gKiB0byBkaXJlY3RpdmUgcGFyc2VyIGFuZCB3YXRjaGVyIG1lY2hhbmlzbS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNpbmdsZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbnZhciBmaWx0ZXJSRSA9IC9bXnxdXFx8W158XS87XG5mdW5jdGlvbiBpbmxpbmVGaWx0ZXJzKGV4cCwgc2luZ2xlKSB7XG4gIGlmICghZmlsdGVyUkUudGVzdChleHApKSB7XG4gICAgcmV0dXJuIHNpbmdsZSA/IGV4cCA6ICcoJyArIGV4cCArICcpJztcbiAgfSBlbHNlIHtcbiAgICB2YXIgZGlyID0gcGFyc2VEaXJlY3RpdmUoZXhwKTtcbiAgICBpZiAoIWRpci5maWx0ZXJzKSB7XG4gICAgICByZXR1cm4gJygnICsgZXhwICsgJyknO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gJ3RoaXMuX2FwcGx5RmlsdGVycygnICsgZGlyLmV4cHJlc3Npb24gKyAvLyB2YWx1ZVxuICAgICAgJyxudWxsLCcgKyAvLyBvbGRWYWx1ZSAobnVsbCBmb3IgcmVhZClcbiAgICAgIEpTT04uc3RyaW5naWZ5KGRpci5maWx0ZXJzKSArIC8vIGZpbHRlciBkZXNjcmlwdG9yc1xuICAgICAgJyxmYWxzZSknOyAvLyB3cml0ZT9cbiAgICB9XG4gIH1cbn1cblxudmFyIHRleHQgPSBPYmplY3QuZnJlZXplKHtcbiAgY29tcGlsZVJlZ2V4OiBjb21waWxlUmVnZXgsXG4gIHBhcnNlVGV4dDogcGFyc2VUZXh0LFxuICB0b2tlbnNUb0V4cDogdG9rZW5zVG9FeHBcbn0pO1xuXG52YXIgZGVsaW1pdGVycyA9IFsne3snLCAnfX0nXTtcbnZhciB1bnNhZmVEZWxpbWl0ZXJzID0gWyd7e3snLCAnfX19J107XG5cbnZhciBjb25maWcgPSBPYmplY3QuZGVmaW5lUHJvcGVydGllcyh7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gcHJpbnQgZGVidWcgbWVzc2FnZXMuXG4gICAqIEFsc28gZW5hYmxlcyBzdGFjayB0cmFjZSBmb3Igd2FybmluZ3MuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cblxuICBkZWJ1ZzogZmFsc2UsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gc3VwcHJlc3Mgd2FybmluZ3MuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cblxuICBzaWxlbnQ6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHVzZSBhc3luYyByZW5kZXJpbmcuXG4gICAqL1xuXG4gIGFzeW5jOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHdhcm4gYWdhaW5zdCBlcnJvcnMgY2F1Z2h0IHdoZW4gZXZhbHVhdGluZ1xuICAgKiBleHByZXNzaW9ucy5cbiAgICovXG5cbiAgd2FybkV4cHJlc3Npb25FcnJvcnM6IHRydWUsXG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gYWxsb3cgZGV2dG9vbHMgaW5zcGVjdGlvbi5cbiAgICogRGlzYWJsZWQgYnkgZGVmYXVsdCBpbiBwcm9kdWN0aW9uIGJ1aWxkcy5cbiAgICovXG5cbiAgZGV2dG9vbHM6IHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicsXG5cbiAgLyoqXG4gICAqIEludGVybmFsIGZsYWcgdG8gaW5kaWNhdGUgdGhlIGRlbGltaXRlcnMgaGF2ZSBiZWVuXG4gICAqIGNoYW5nZWQuXG4gICAqXG4gICAqIEB0eXBlIHtCb29sZWFufVxuICAgKi9cblxuICBfZGVsaW1pdGVyc0NoYW5nZWQ6IHRydWUsXG5cbiAgLyoqXG4gICAqIExpc3Qgb2YgYXNzZXQgdHlwZXMgdGhhdCBhIGNvbXBvbmVudCBjYW4gb3duLlxuICAgKlxuICAgKiBAdHlwZSB7QXJyYXl9XG4gICAqL1xuXG4gIF9hc3NldFR5cGVzOiBbJ2NvbXBvbmVudCcsICdkaXJlY3RpdmUnLCAnZWxlbWVudERpcmVjdGl2ZScsICdmaWx0ZXInLCAndHJhbnNpdGlvbicsICdwYXJ0aWFsJ10sXG5cbiAgLyoqXG4gICAqIHByb3AgYmluZGluZyBtb2Rlc1xuICAgKi9cblxuICBfcHJvcEJpbmRpbmdNb2Rlczoge1xuICAgIE9ORV9XQVk6IDAsXG4gICAgVFdPX1dBWTogMSxcbiAgICBPTkVfVElNRTogMlxuICB9LFxuXG4gIC8qKlxuICAgKiBNYXggY2lyY3VsYXIgdXBkYXRlcyBhbGxvd2VkIGluIGEgYmF0Y2hlciBmbHVzaCBjeWNsZS5cbiAgICovXG5cbiAgX21heFVwZGF0ZUNvdW50OiAxMDBcblxufSwge1xuICBkZWxpbWl0ZXJzOiB7IC8qKlxuICAgICAgICAgICAgICAgICAqIEludGVycG9sYXRpb24gZGVsaW1pdGVycy4gQ2hhbmdpbmcgdGhlc2Ugd291bGQgdHJpZ2dlclxuICAgICAgICAgICAgICAgICAqIHRoZSB0ZXh0IHBhcnNlciB0byByZS1jb21waWxlIHRoZSByZWd1bGFyIGV4cHJlc3Npb25zLlxuICAgICAgICAgICAgICAgICAqXG4gICAgICAgICAgICAgICAgICogQHR5cGUge0FycmF5PFN0cmluZz59XG4gICAgICAgICAgICAgICAgICovXG5cbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiBkZWxpbWl0ZXJzO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQodmFsKSB7XG4gICAgICBkZWxpbWl0ZXJzID0gdmFsO1xuICAgICAgY29tcGlsZVJlZ2V4KCk7XG4gICAgfSxcbiAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgZW51bWVyYWJsZTogdHJ1ZVxuICB9LFxuICB1bnNhZmVEZWxpbWl0ZXJzOiB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdW5zYWZlRGVsaW1pdGVycztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgdW5zYWZlRGVsaW1pdGVycyA9IHZhbDtcbiAgICAgIGNvbXBpbGVSZWdleCgpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfVxufSk7XG5cbnZhciB3YXJuID0gdW5kZWZpbmVkO1xudmFyIGZvcm1hdENvbXBvbmVudE5hbWUgPSB1bmRlZmluZWQ7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGhhc0NvbnNvbGUgPSB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCc7XG5cbiAgICB3YXJuID0gZnVuY3Rpb24gKG1zZywgdm0pIHtcbiAgICAgIGlmIChoYXNDb25zb2xlICYmICFjb25maWcuc2lsZW50KSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tWdWUgd2Fybl06ICcgKyBtc2cgKyAodm0gPyBmb3JtYXRDb21wb25lbnROYW1lKHZtKSA6ICcnKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGZvcm1hdENvbXBvbmVudE5hbWUgPSBmdW5jdGlvbiAodm0pIHtcbiAgICAgIHZhciBuYW1lID0gdm0uX2lzVnVlID8gdm0uJG9wdGlvbnMubmFtZSA6IHZtLm5hbWU7XG4gICAgICByZXR1cm4gbmFtZSA/ICcgKGZvdW5kIGluIGNvbXBvbmVudDogPCcgKyBoeXBoZW5hdGUobmFtZSkgKyAnPiknIDogJyc7XG4gICAgfTtcbiAgfSkoKTtcbn1cblxuLyoqXG4gKiBBcHBlbmQgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiBhcHBlbmRXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgfSwgdm0sIGNiKTtcbn1cblxuLyoqXG4gKiBJbnNlcnRCZWZvcmUgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5mdW5jdGlvbiBiZWZvcmVXaXRoVHJhbnNpdGlvbihlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgYXBwbHlUcmFuc2l0aW9uKGVsLCAxLCBmdW5jdGlvbiAoKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuICB9LCB2bSwgY2IpO1xufVxuXG4vKipcbiAqIFJlbW92ZSB3aXRoIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlV2l0aFRyYW5zaXRpb24oZWwsIHZtLCBjYikge1xuICBhcHBseVRyYW5zaXRpb24oZWwsIC0xLCBmdW5jdGlvbiAoKSB7XG4gICAgcmVtb3ZlKGVsKTtcbiAgfSwgdm0sIGNiKTtcbn1cblxuLyoqXG4gKiBBcHBseSB0cmFuc2l0aW9ucyB3aXRoIGFuIG9wZXJhdGlvbiBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge051bWJlcn0gZGlyZWN0aW9uXG4gKiAgICAgICAgICAgICAgICAgIDE6IGVudGVyXG4gKiAgICAgICAgICAgICAgICAgLTE6IGxlYXZlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIHRoZSBhY3R1YWwgRE9NIG9wZXJhdGlvblxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYXBwbHlUcmFuc2l0aW9uKGVsLCBkaXJlY3Rpb24sIG9wLCB2bSwgY2IpIHtcbiAgdmFyIHRyYW5zaXRpb24gPSBlbC5fX3ZfdHJhbnM7XG4gIGlmICghdHJhbnNpdGlvbiB8fFxuICAvLyBza2lwIGlmIHRoZXJlIGFyZSBubyBqcyBob29rcyBhbmQgQ1NTIHRyYW5zaXRpb24gaXNcbiAgLy8gbm90IHN1cHBvcnRlZFxuICAhdHJhbnNpdGlvbi5ob29rcyAmJiAhdHJhbnNpdGlvbkVuZEV2ZW50IHx8XG4gIC8vIHNraXAgdHJhbnNpdGlvbnMgZm9yIGluaXRpYWwgY29tcGlsZVxuICAhdm0uX2lzQ29tcGlsZWQgfHxcbiAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIG1hbmlwdWxhdGVkIGJ5IGEgcGFyZW50IGRpcmVjdGl2ZVxuICAvLyBkdXJpbmcgdGhlIHBhcmVudCdzIGNvbXBpbGF0aW9uIHBoYXNlLCBza2lwIHRoZVxuICAvLyBhbmltYXRpb24uXG4gIHZtLiRwYXJlbnQgJiYgIXZtLiRwYXJlbnQuX2lzQ29tcGlsZWQpIHtcbiAgICBvcCgpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGFjdGlvbiA9IGRpcmVjdGlvbiA+IDAgPyAnZW50ZXInIDogJ2xlYXZlJztcbiAgdHJhbnNpdGlvblthY3Rpb25dKG9wLCBjYik7XG59XG5cbnZhciB0cmFuc2l0aW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGFwcGVuZFdpdGhUcmFuc2l0aW9uOiBhcHBlbmRXaXRoVHJhbnNpdGlvbixcbiAgYmVmb3JlV2l0aFRyYW5zaXRpb246IGJlZm9yZVdpdGhUcmFuc2l0aW9uLFxuICByZW1vdmVXaXRoVHJhbnNpdGlvbjogcmVtb3ZlV2l0aFRyYW5zaXRpb24sXG4gIGFwcGx5VHJhbnNpdGlvbjogYXBwbHlUcmFuc2l0aW9uXG59KTtcblxuLyoqXG4gKiBRdWVyeSBhbiBlbGVtZW50IHNlbGVjdG9yIGlmIGl0J3Mgbm90IGFuIGVsZW1lbnQgYWxyZWFkeS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuICogQHJldHVybiB7RWxlbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBxdWVyeShlbCkge1xuICBpZiAodHlwZW9mIGVsID09PSAnc3RyaW5nJykge1xuICAgIHZhciBzZWxlY3RvciA9IGVsO1xuICAgIGVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCk7XG4gICAgaWYgKCFlbCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdDYW5ub3QgZmluZCBlbGVtZW50OiAnICsgc2VsZWN0b3IpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBub2RlIGlzIGluIHRoZSBkb2N1bWVudC5cbiAqIE5vdGU6IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jb250YWlucyBzaG91bGQgd29yayBoZXJlXG4gKiBidXQgYWx3YXlzIHJldHVybnMgZmFsc2UgZm9yIGNvbW1lbnQgbm9kZXMgaW4gcGhhbnRvbWpzLFxuICogbWFraW5nIHVuaXQgdGVzdHMgZGlmZmljdWx0LiBUaGlzIGlzIGZpeGVkIGJ5IGRvaW5nIHRoZVxuICogY29udGFpbnMoKSBjaGVjayBvbiB0aGUgbm9kZSdzIHBhcmVudE5vZGUgaW5zdGVhZCBvZlxuICogdGhlIG5vZGUgaXRzZWxmLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpbkRvYyhub2RlKSB7XG4gIGlmICghbm9kZSkgcmV0dXJuIGZhbHNlO1xuICB2YXIgZG9jID0gbm9kZS5vd25lckRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgdmFyIHBhcmVudCA9IG5vZGUucGFyZW50Tm9kZTtcbiAgcmV0dXJuIGRvYyA9PT0gbm9kZSB8fCBkb2MgPT09IHBhcmVudCB8fCAhIShwYXJlbnQgJiYgcGFyZW50Lm5vZGVUeXBlID09PSAxICYmIGRvYy5jb250YWlucyhwYXJlbnQpKTtcbn1cblxuLyoqXG4gKiBHZXQgYW5kIHJlbW92ZSBhbiBhdHRyaWJ1dGUgZnJvbSBhIG5vZGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gX2F0dHJcbiAqL1xuXG5mdW5jdGlvbiBnZXRBdHRyKG5vZGUsIF9hdHRyKSB7XG4gIHZhciB2YWwgPSBub2RlLmdldEF0dHJpYnV0ZShfYXR0cik7XG4gIGlmICh2YWwgIT09IG51bGwpIHtcbiAgICBub2RlLnJlbW92ZUF0dHJpYnV0ZShfYXR0cik7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiBHZXQgYW4gYXR0cmlidXRlIHdpdGggY29sb24gb3Igdi1iaW5kOiBwcmVmaXguXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7U3RyaW5nfG51bGx9XG4gKi9cblxuZnVuY3Rpb24gZ2V0QmluZEF0dHIobm9kZSwgbmFtZSkge1xuICB2YXIgdmFsID0gZ2V0QXR0cihub2RlLCAnOicgKyBuYW1lKTtcbiAgaWYgKHZhbCA9PT0gbnVsbCkge1xuICAgIHZhbCA9IGdldEF0dHIobm9kZSwgJ3YtYmluZDonICsgbmFtZSk7XG4gIH1cbiAgcmV0dXJuIHZhbDtcbn1cblxuLyoqXG4gKiBDaGVjayB0aGUgcHJlc2VuY2Ugb2YgYSBiaW5kIGF0dHJpYnV0ZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGhhc0JpbmRBdHRyKG5vZGUsIG5hbWUpIHtcbiAgcmV0dXJuIG5vZGUuaGFzQXR0cmlidXRlKG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCc6JyArIG5hbWUpIHx8IG5vZGUuaGFzQXR0cmlidXRlKCd2LWJpbmQ6JyArIG5hbWUpO1xufVxuXG4vKipcbiAqIEluc2VydCBlbCBiZWZvcmUgdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqL1xuXG5mdW5jdGlvbiBiZWZvcmUoZWwsIHRhcmdldCkge1xuICB0YXJnZXQucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWwsIHRhcmdldCk7XG59XG5cbi8qKlxuICogSW5zZXJ0IGVsIGFmdGVyIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZnVuY3Rpb24gYWZ0ZXIoZWwsIHRhcmdldCkge1xuICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQubmV4dFNpYmxpbmcpO1xuICB9IGVsc2Uge1xuICAgIHRhcmdldC5wYXJlbnROb2RlLmFwcGVuZENoaWxkKGVsKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBlbCBmcm9tIERPTVxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmUoZWwpIHtcbiAgZWwucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlbCk7XG59XG5cbi8qKlxuICogUHJlcGVuZCBlbCB0byB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICovXG5cbmZ1bmN0aW9uIHByZXBlbmQoZWwsIHRhcmdldCkge1xuICBpZiAodGFyZ2V0LmZpcnN0Q2hpbGQpIHtcbiAgICBiZWZvcmUoZWwsIHRhcmdldC5maXJzdENoaWxkKTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuICB9XG59XG5cbi8qKlxuICogUmVwbGFjZSB0YXJnZXQgd2l0aCBlbFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZnVuY3Rpb24gcmVwbGFjZSh0YXJnZXQsIGVsKSB7XG4gIHZhciBwYXJlbnQgPSB0YXJnZXQucGFyZW50Tm9kZTtcbiAgaWYgKHBhcmVudCkge1xuICAgIHBhcmVudC5yZXBsYWNlQ2hpbGQoZWwsIHRhcmdldCk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgZXZlbnQgbGlzdGVuZXIgc2hvcnRoYW5kLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXG4gKi9cblxuZnVuY3Rpb24gb24oZWwsIGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSkge1xuICBlbC5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBjYiwgdXNlQ2FwdHVyZSk7XG59XG5cbi8qKlxuICogUmVtb3ZlIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZnVuY3Rpb24gb2ZmKGVsLCBldmVudCwgY2IpIHtcbiAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudCwgY2IpO1xufVxuXG4vKipcbiAqIEZvciBJRTkgY29tcGF0OiB3aGVuIGJvdGggY2xhc3MgYW5kIDpjbGFzcyBhcmUgcHJlc2VudFxuICogZ2V0QXR0cmlidXRlKCdjbGFzcycpIHJldHVybnMgd3JvbmcgdmFsdWUuLi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZ2V0Q2xhc3MoZWwpIHtcbiAgdmFyIGNsYXNzbmFtZSA9IGVsLmNsYXNzTmFtZTtcbiAgaWYgKHR5cGVvZiBjbGFzc25hbWUgPT09ICdvYmplY3QnKSB7XG4gICAgY2xhc3NuYW1lID0gY2xhc3NuYW1lLmJhc2VWYWwgfHwgJyc7XG4gIH1cbiAgcmV0dXJuIGNsYXNzbmFtZTtcbn1cblxuLyoqXG4gKiBJbiBJRTksIHNldEF0dHJpYnV0ZSgnY2xhc3MnKSB3aWxsIHJlc3VsdCBpbiBlbXB0eSBjbGFzc1xuICogaWYgdGhlIGVsZW1lbnQgYWxzbyBoYXMgdGhlIDpjbGFzcyBhdHRyaWJ1dGU7IEhvd2V2ZXIgaW5cbiAqIFBoYW50b21KUywgc2V0dGluZyBgY2xhc3NOYW1lYCBkb2VzIG5vdCB3b3JrIG9uIFNWRyBlbGVtZW50cy4uLlxuICogU28gd2UgaGF2ZSB0byBkbyBhIGNvbmRpdGlvbmFsIGNoZWNrIGhlcmUuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuICovXG5cbmZ1bmN0aW9uIHNldENsYXNzKGVsLCBjbHMpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc0lFOSAmJiAhL3N2ZyQvLnRlc3QoZWwubmFtZXNwYWNlVVJJKSkge1xuICAgIGVsLmNsYXNzTmFtZSA9IGNscztcbiAgfSBlbHNlIHtcbiAgICBlbC5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgY2xzKTtcbiAgfVxufVxuXG4vKipcbiAqIEFkZCBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuICovXG5cbmZ1bmN0aW9uIGFkZENsYXNzKGVsLCBjbHMpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgIGVsLmNsYXNzTGlzdC5hZGQoY2xzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuICAgIGlmIChjdXIuaW5kZXhPZignICcgKyBjbHMgKyAnICcpIDwgMCkge1xuICAgICAgc2V0Q2xhc3MoZWwsIChjdXIgKyBjbHMpLnRyaW0oKSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGNsYXNzIHdpdGggY29tcGF0aWJpbGl0eSBmb3IgSUUgJiBTVkdcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xzXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlQ2xhc3MoZWwsIGNscykge1xuICBpZiAoZWwuY2xhc3NMaXN0KSB7XG4gICAgZWwuY2xhc3NMaXN0LnJlbW92ZShjbHMpO1xuICB9IGVsc2Uge1xuICAgIHZhciBjdXIgPSAnICcgKyBnZXRDbGFzcyhlbCkgKyAnICc7XG4gICAgdmFyIHRhciA9ICcgJyArIGNscyArICcgJztcbiAgICB3aGlsZSAoY3VyLmluZGV4T2YodGFyKSA+PSAwKSB7XG4gICAgICBjdXIgPSBjdXIucmVwbGFjZSh0YXIsICcgJyk7XG4gICAgfVxuICAgIHNldENsYXNzKGVsLCBjdXIudHJpbSgpKTtcbiAgfVxuICBpZiAoIWVsLmNsYXNzTmFtZSkge1xuICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnY2xhc3MnKTtcbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhY3QgcmF3IGNvbnRlbnQgaW5zaWRlIGFuIGVsZW1lbnQgaW50byBhIHRlbXBvcmFyeVxuICogY29udGFpbmVyIGRpdlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gYXNGcmFnbWVudFxuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIGV4dHJhY3RDb250ZW50KGVsLCBhc0ZyYWdtZW50KSB7XG4gIHZhciBjaGlsZDtcbiAgdmFyIHJhd0NvbnRlbnQ7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNUZW1wbGF0ZShlbCkgJiYgaXNGcmFnbWVudChlbC5jb250ZW50KSkge1xuICAgIGVsID0gZWwuY29udGVudDtcbiAgfVxuICBpZiAoZWwuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgdHJpbU5vZGUoZWwpO1xuICAgIHJhd0NvbnRlbnQgPSBhc0ZyYWdtZW50ID8gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpIDogZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICB3aGlsZSAoY2hpbGQgPSBlbC5maXJzdENoaWxkKSB7XG4gICAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgICByYXdDb250ZW50LmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJhd0NvbnRlbnQ7XG59XG5cbi8qKlxuICogVHJpbSBwb3NzaWJsZSBlbXB0eSBoZWFkL3RhaWwgdGV4dCBhbmQgY29tbWVudFxuICogbm9kZXMgaW5zaWRlIGEgcGFyZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICovXG5cbmZ1bmN0aW9uIHRyaW1Ob2RlKG5vZGUpIHtcbiAgdmFyIGNoaWxkO1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1zZXF1ZW5jZXMgKi9cbiAgd2hpbGUgKChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICB9XG4gIHdoaWxlICgoY2hpbGQgPSBub2RlLmxhc3RDaGlsZCwgaXNUcmltbWFibGUoY2hpbGQpKSkge1xuICAgIG5vZGUucmVtb3ZlQ2hpbGQoY2hpbGQpO1xuICB9XG4gIC8qIGVzbGludC1lbmFibGUgbm8tc2VxdWVuY2VzICovXG59XG5cbmZ1bmN0aW9uIGlzVHJpbW1hYmxlKG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgKG5vZGUubm9kZVR5cGUgPT09IDMgJiYgIW5vZGUuZGF0YS50cmltKCkgfHwgbm9kZS5ub2RlVHlwZSA9PT0gOCk7XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIHRlbXBsYXRlIHRhZy5cbiAqIE5vdGUgaWYgdGhlIHRlbXBsYXRlIGFwcGVhcnMgaW5zaWRlIGFuIFNWRyBpdHMgdGFnTmFtZVxuICogd2lsbCBiZSBpbiBsb3dlcmNhc2UuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmZ1bmN0aW9uIGlzVGVtcGxhdGUoZWwpIHtcbiAgcmV0dXJuIGVsLnRhZ05hbWUgJiYgZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAndGVtcGxhdGUnO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhbiBcImFuY2hvclwiIGZvciBwZXJmb3JtaW5nIGRvbSBpbnNlcnRpb24vcmVtb3ZhbHMuXG4gKiBUaGlzIGlzIHVzZWQgaW4gYSBudW1iZXIgb2Ygc2NlbmFyaW9zOlxuICogLSBmcmFnbWVudCBpbnN0YW5jZVxuICogLSB2LWh0bWxcbiAqIC0gdi1pZlxuICogLSB2LWZvclxuICogLSBjb21wb25lbnRcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY29udGVudFxuICogQHBhcmFtIHtCb29sZWFufSBwZXJzaXN0IC0gSUUgdHJhc2hlcyBlbXB0eSB0ZXh0Tm9kZXMgb25cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsb25lTm9kZSh0cnVlKSwgc28gaW4gY2VydGFpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZXMgdGhlIGFuY2hvciBuZWVkcyB0byBiZVxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm9uLWVtcHR5IHRvIGJlIHBlcnNpc3RlZCBpblxuICogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGVzLlxuICogQHJldHVybiB7Q29tbWVudHxUZXh0fVxuICovXG5cbmZ1bmN0aW9uIGNyZWF0ZUFuY2hvcihjb250ZW50LCBwZXJzaXN0KSB7XG4gIHZhciBhbmNob3IgPSBjb25maWcuZGVidWcgPyBkb2N1bWVudC5jcmVhdGVDb21tZW50KGNvbnRlbnQpIDogZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocGVyc2lzdCA/ICcgJyA6ICcnKTtcbiAgYW5jaG9yLl9fdl9hbmNob3IgPSB0cnVlO1xuICByZXR1cm4gYW5jaG9yO1xufVxuXG4vKipcbiAqIEZpbmQgYSBjb21wb25lbnQgcmVmIGF0dHJpYnV0ZSB0aGF0IHN0YXJ0cyB3aXRoICQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBub2RlXG4gKiBAcmV0dXJuIHtTdHJpbmd8dW5kZWZpbmVkfVxuICovXG5cbnZhciByZWZSRSA9IC9edi1yZWY6LztcblxuZnVuY3Rpb24gZmluZFJlZihub2RlKSB7XG4gIGlmIChub2RlLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgIHZhciBhdHRycyA9IG5vZGUuYXR0cmlidXRlcztcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuICAgICAgaWYgKHJlZlJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIGNhbWVsaXplKG5hbWUucmVwbGFjZShyZWZSRSwgJycpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBNYXAgYSBmdW5jdGlvbiB0byBhIHJhbmdlIG9mIG5vZGVzIC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7Tm9kZX0gZW5kXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcFxuICovXG5cbmZ1bmN0aW9uIG1hcE5vZGVSYW5nZShub2RlLCBlbmQsIG9wKSB7XG4gIHZhciBuZXh0O1xuICB3aGlsZSAobm9kZSAhPT0gZW5kKSB7XG4gICAgbmV4dCA9IG5vZGUubmV4dFNpYmxpbmc7XG4gICAgb3Aobm9kZSk7XG4gICAgbm9kZSA9IG5leHQ7XG4gIH1cbiAgb3AoZW5kKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgYSByYW5nZSBvZiBub2RlcyB3aXRoIHRyYW5zaXRpb24sIHN0b3JlXG4gKiB0aGUgbm9kZXMgaW4gYSBmcmFnbWVudCB3aXRoIGNvcnJlY3Qgb3JkZXJpbmcsXG4gKiBhbmQgY2FsbCBjYWxsYmFjayB3aGVuIGRvbmUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBzdGFydFxuICogQHBhcmFtIHtOb2RlfSBlbmRcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZU5vZGVSYW5nZShzdGFydCwgZW5kLCB2bSwgZnJhZywgY2IpIHtcbiAgdmFyIGRvbmUgPSBmYWxzZTtcbiAgdmFyIHJlbW92ZWQgPSAwO1xuICB2YXIgbm9kZXMgPSBbXTtcbiAgbWFwTm9kZVJhbmdlKHN0YXJ0LCBlbmQsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgaWYgKG5vZGUgPT09IGVuZCkgZG9uZSA9IHRydWU7XG4gICAgbm9kZXMucHVzaChub2RlKTtcbiAgICByZW1vdmVXaXRoVHJhbnNpdGlvbihub2RlLCB2bSwgb25SZW1vdmVkKTtcbiAgfSk7XG4gIGZ1bmN0aW9uIG9uUmVtb3ZlZCgpIHtcbiAgICByZW1vdmVkKys7XG4gICAgaWYgKGRvbmUgJiYgcmVtb3ZlZCA+PSBub2Rlcy5sZW5ndGgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZnJhZy5hcHBlbmRDaGlsZChub2Rlc1tpXSk7XG4gICAgICB9XG4gICAgICBjYiAmJiBjYigpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgbm9kZSBpcyBhIERvY3VtZW50RnJhZ21lbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzRnJhZ21lbnQobm9kZSkge1xuICByZXR1cm4gbm9kZSAmJiBub2RlLm5vZGVUeXBlID09PSAxMTtcbn1cblxuLyoqXG4gKiBHZXQgb3V0ZXJIVE1MIG9mIGVsZW1lbnRzLCB0YWtpbmcgY2FyZVxuICogb2YgU1ZHIGVsZW1lbnRzIGluIElFIGFzIHdlbGwuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGdldE91dGVySFRNTChlbCkge1xuICBpZiAoZWwub3V0ZXJIVE1MKSB7XG4gICAgcmV0dXJuIGVsLm91dGVySFRNTDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgY29udGFpbmVyLmFwcGVuZENoaWxkKGVsLmNsb25lTm9kZSh0cnVlKSk7XG4gICAgcmV0dXJuIGNvbnRhaW5lci5pbm5lckhUTUw7XG4gIH1cbn1cblxudmFyIGNvbW1vblRhZ1JFID0gL14oZGl2fHB8c3BhbnxpbWd8YXxifGl8YnJ8dWx8b2x8bGl8aDF8aDJ8aDN8aDR8aDV8aDZ8Y29kZXxwcmV8dGFibGV8dGh8dGR8dHJ8Zm9ybXxsYWJlbHxpbnB1dHxzZWxlY3R8b3B0aW9ufG5hdnxhcnRpY2xlfHNlY3Rpb258aGVhZGVyfGZvb3RlcikkL2k7XG52YXIgcmVzZXJ2ZWRUYWdSRSA9IC9eKHNsb3R8cGFydGlhbHxjb21wb25lbnQpJC9pO1xuXG52YXIgaXNVbmtub3duRWxlbWVudCA9IHVuZGVmaW5lZDtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIGlzVW5rbm93bkVsZW1lbnQgPSBmdW5jdGlvbiAoZWwsIHRhZykge1xuICAgIGlmICh0YWcuaW5kZXhPZignLScpID4gLTEpIHtcbiAgICAgIC8vIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzI4MjEwMzY0LzEwNzAyNDRcbiAgICAgIHJldHVybiBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxVbmtub3duRWxlbWVudCB8fCBlbC5jb25zdHJ1Y3RvciA9PT0gd2luZG93LkhUTUxFbGVtZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gKC9IVE1MVW5rbm93bkVsZW1lbnQvLnRlc3QoZWwudG9TdHJpbmcoKSkgJiZcbiAgICAgICAgLy8gQ2hyb21lIHJldHVybnMgdW5rbm93biBmb3Igc2V2ZXJhbCBIVE1MNSBlbGVtZW50cy5cbiAgICAgICAgLy8gaHR0cHM6Ly9jb2RlLmdvb2dsZS5jb20vcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTU0MDUyNlxuICAgICAgICAvLyBGaXJlZm94IHJldHVybnMgdW5rbm93biBmb3Igc29tZSBcIkludGVyYWN0aXZlIGVsZW1lbnRzLlwiXG4gICAgICAgICEvXihkYXRhfHRpbWV8cnRjfHJifGRldGFpbHN8ZGlhbG9nfHN1bW1hcnkpJC8udGVzdCh0YWcpXG4gICAgICApO1xuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGEgY29tcG9uZW50LCBpZiB5ZXMgcmV0dXJuIGl0c1xuICogY29tcG9uZW50IGlkLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtPYmplY3R8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucykge1xuICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG4gIGlmICghY29tbW9uVGFnUkUudGVzdCh0YWcpICYmICFyZXNlcnZlZFRhZ1JFLnRlc3QodGFnKSkge1xuICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCB0YWcpKSB7XG4gICAgICByZXR1cm4geyBpZDogdGFnIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBpcyA9IGhhc0F0dHJzICYmIGdldElzQmluZGluZyhlbCwgb3B0aW9ucyk7XG4gICAgICBpZiAoaXMpIHtcbiAgICAgICAgcmV0dXJuIGlzO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHZhciBleHBlY3RlZFRhZyA9IG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXAgJiYgb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcFt0YWddO1xuICAgICAgICBpZiAoZXhwZWN0ZWRUYWcpIHtcbiAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gJyArICdkaWQgeW91IG1lYW4gPCcgKyBleHBlY3RlZFRhZyArICc+PyAnICsgJ0hUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlIGtlYmFiLWNhc2UgaW4gdGVtcGxhdGVzLicpO1xuICAgICAgICB9IGVsc2UgaWYgKGlzVW5rbm93bkVsZW1lbnQoZWwsIHRhZykpIHtcbiAgICAgICAgICB3YXJuKCdVbmtub3duIGN1c3RvbSBlbGVtZW50OiA8JyArIHRhZyArICc+IC0gZGlkIHlvdSAnICsgJ3JlZ2lzdGVyIHRoZSBjb21wb25lbnQgY29ycmVjdGx5PyBGb3IgcmVjdXJzaXZlIGNvbXBvbmVudHMsICcgKyAnbWFrZSBzdXJlIHRvIHByb3ZpZGUgdGhlIFwibmFtZVwiIG9wdGlvbi4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChoYXNBdHRycykge1xuICAgIHJldHVybiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuICB9XG59XG5cbi8qKlxuICogR2V0IFwiaXNcIiBiaW5kaW5nIGZyb20gYW4gZWxlbWVudC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpIHtcbiAgLy8gZHluYW1pYyBzeW50YXhcbiAgdmFyIGV4cCA9IGVsLmdldEF0dHJpYnV0ZSgnaXMnKTtcbiAgaWYgKGV4cCAhPSBudWxsKSB7XG4gICAgaWYgKHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIGV4cCkpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcbiAgICAgIHJldHVybiB7IGlkOiBleHAgfTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgZXhwID0gZ2V0QmluZEF0dHIoZWwsICdpcycpO1xuICAgIGlmIChleHAgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHsgaWQ6IGV4cCwgZHluYW1pYzogdHJ1ZSB9O1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIE9wdGlvbiBvdmVyd3JpdGluZyBzdHJhdGVnaWVzIGFyZSBmdW5jdGlvbnMgdGhhdCBoYW5kbGVcbiAqIGhvdyB0byBtZXJnZSBhIHBhcmVudCBvcHRpb24gdmFsdWUgYW5kIGEgY2hpbGQgb3B0aW9uXG4gKiB2YWx1ZSBpbnRvIHRoZSBmaW5hbCB2YWx1ZS5cbiAqXG4gKiBBbGwgc3RyYXRlZ3kgZnVuY3Rpb25zIGZvbGxvdyB0aGUgc2FtZSBzaWduYXR1cmU6XG4gKlxuICogQHBhcmFtIHsqfSBwYXJlbnRWYWxcbiAqIEBwYXJhbSB7Kn0gY2hpbGRWYWxcbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKi9cblxudmFyIHN0cmF0cyA9IGNvbmZpZy5vcHRpb25NZXJnZVN0cmF0ZWdpZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG4vKipcbiAqIEhlbHBlciB0aGF0IHJlY3Vyc2l2ZWx5IG1lcmdlcyB0d28gZGF0YSBvYmplY3RzIHRvZ2V0aGVyLlxuICovXG5cbmZ1bmN0aW9uIG1lcmdlRGF0YSh0bywgZnJvbSkge1xuICB2YXIga2V5LCB0b1ZhbCwgZnJvbVZhbDtcbiAgZm9yIChrZXkgaW4gZnJvbSkge1xuICAgIHRvVmFsID0gdG9ba2V5XTtcbiAgICBmcm9tVmFsID0gZnJvbVtrZXldO1xuICAgIGlmICghaGFzT3duKHRvLCBrZXkpKSB7XG4gICAgICBzZXQodG8sIGtleSwgZnJvbVZhbCk7XG4gICAgfSBlbHNlIGlmIChpc09iamVjdCh0b1ZhbCkgJiYgaXNPYmplY3QoZnJvbVZhbCkpIHtcbiAgICAgIG1lcmdlRGF0YSh0b1ZhbCwgZnJvbVZhbCk7XG4gICAgfVxuICB9XG4gIHJldHVybiB0bztcbn1cblxuLyoqXG4gKiBEYXRhXG4gKi9cblxuc3RyYXRzLmRhdGEgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcbiAgaWYgKCF2bSkge1xuICAgIC8vIGluIGEgVnVlLmV4dGVuZCBtZXJnZSwgYm90aCBzaG91bGQgYmUgZnVuY3Rpb25zXG4gICAgaWYgKCFjaGlsZFZhbCkge1xuICAgICAgcmV0dXJuIHBhcmVudFZhbDtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBjaGlsZFZhbCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJkYXRhXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcbiAgICAgIHJldHVybiBwYXJlbnRWYWw7XG4gICAgfVxuICAgIGlmICghcGFyZW50VmFsKSB7XG4gICAgICByZXR1cm4gY2hpbGRWYWw7XG4gICAgfVxuICAgIC8vIHdoZW4gcGFyZW50VmFsICYgY2hpbGRWYWwgYXJlIGJvdGggcHJlc2VudCxcbiAgICAvLyB3ZSBuZWVkIHRvIHJldHVybiBhIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyB0aGVcbiAgICAvLyBtZXJnZWQgcmVzdWx0IG9mIGJvdGggZnVuY3Rpb25zLi4uIG5vIG5lZWQgdG9cbiAgICAvLyBjaGVjayBpZiBwYXJlbnRWYWwgaXMgYSBmdW5jdGlvbiBoZXJlIGJlY2F1c2VcbiAgICAvLyBpdCBoYXMgdG8gYmUgYSBmdW5jdGlvbiB0byBwYXNzIHByZXZpb3VzIG1lcmdlcy5cbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkRGF0YUZuKCkge1xuICAgICAgcmV0dXJuIG1lcmdlRGF0YShjaGlsZFZhbC5jYWxsKHRoaXMpLCBwYXJlbnRWYWwuY2FsbCh0aGlzKSk7XG4gICAgfTtcbiAgfSBlbHNlIGlmIChwYXJlbnRWYWwgfHwgY2hpbGRWYWwpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gbWVyZ2VkSW5zdGFuY2VEYXRhRm4oKSB7XG4gICAgICAvLyBpbnN0YW5jZSBtZXJnZVxuICAgICAgdmFyIGluc3RhbmNlRGF0YSA9IHR5cGVvZiBjaGlsZFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IGNoaWxkVmFsLmNhbGwodm0pIDogY2hpbGRWYWw7XG4gICAgICB2YXIgZGVmYXVsdERhdGEgPSB0eXBlb2YgcGFyZW50VmFsID09PSAnZnVuY3Rpb24nID8gcGFyZW50VmFsLmNhbGwodm0pIDogdW5kZWZpbmVkO1xuICAgICAgaWYgKGluc3RhbmNlRGF0YSkge1xuICAgICAgICByZXR1cm4gbWVyZ2VEYXRhKGluc3RhbmNlRGF0YSwgZGVmYXVsdERhdGEpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHREYXRhO1xuICAgICAgfVxuICAgIH07XG4gIH1cbn07XG5cbi8qKlxuICogRWxcbiAqL1xuXG5zdHJhdHMuZWwgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCwgdm0pIHtcbiAgaWYgKCF2bSAmJiBjaGlsZFZhbCAmJiB0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1RoZSBcImVsXCIgb3B0aW9uIHNob3VsZCBiZSBhIGZ1bmN0aW9uICcgKyAndGhhdCByZXR1cm5zIGEgcGVyLWluc3RhbmNlIHZhbHVlIGluIGNvbXBvbmVudCAnICsgJ2RlZmluaXRpb25zLicsIHZtKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHJldCA9IGNoaWxkVmFsIHx8IHBhcmVudFZhbDtcbiAgLy8gaW52b2tlIHRoZSBlbGVtZW50IGZhY3RvcnkgaWYgdGhpcyBpcyBpbnN0YW5jZSBtZXJnZVxuICByZXR1cm4gdm0gJiYgdHlwZW9mIHJldCA9PT0gJ2Z1bmN0aW9uJyA/IHJldC5jYWxsKHZtKSA6IHJldDtcbn07XG5cbi8qKlxuICogSG9va3MgYW5kIHBhcmFtIGF0dHJpYnV0ZXMgYXJlIG1lcmdlZCBhcyBhcnJheXMuXG4gKi9cblxuc3RyYXRzLmluaXQgPSBzdHJhdHMuY3JlYXRlZCA9IHN0cmF0cy5yZWFkeSA9IHN0cmF0cy5hdHRhY2hlZCA9IHN0cmF0cy5kZXRhY2hlZCA9IHN0cmF0cy5iZWZvcmVDb21waWxlID0gc3RyYXRzLmNvbXBpbGVkID0gc3RyYXRzLmJlZm9yZURlc3Ryb3kgPSBzdHJhdHMuZGVzdHJveWVkID0gc3RyYXRzLmFjdGl2YXRlID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgcmV0dXJuIGNoaWxkVmFsID8gcGFyZW50VmFsID8gcGFyZW50VmFsLmNvbmNhdChjaGlsZFZhbCkgOiBpc0FycmF5KGNoaWxkVmFsKSA/IGNoaWxkVmFsIDogW2NoaWxkVmFsXSA6IHBhcmVudFZhbDtcbn07XG5cbi8qKlxuICogQXNzZXRzXG4gKlxuICogV2hlbiBhIHZtIGlzIHByZXNlbnQgKGluc3RhbmNlIGNyZWF0aW9uKSwgd2UgbmVlZCB0byBkb1xuICogYSB0aHJlZS13YXkgbWVyZ2UgYmV0d2VlbiBjb25zdHJ1Y3RvciBvcHRpb25zLCBpbnN0YW5jZVxuICogb3B0aW9ucyBhbmQgcGFyZW50IG9wdGlvbnMuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VBc3NldHMocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICB2YXIgcmVzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRWYWwgfHwgbnVsbCk7XG4gIHJldHVybiBjaGlsZFZhbCA/IGV4dGVuZChyZXMsIGd1YXJkQXJyYXlBc3NldHMoY2hpbGRWYWwpKSA6IHJlcztcbn1cblxuY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgc3RyYXRzW3R5cGUgKyAncyddID0gbWVyZ2VBc3NldHM7XG59KTtcblxuLyoqXG4gKiBFdmVudHMgJiBXYXRjaGVycy5cbiAqXG4gKiBFdmVudHMgJiB3YXRjaGVycyBoYXNoZXMgc2hvdWxkIG5vdCBvdmVyd3JpdGUgb25lXG4gKiBhbm90aGVyLCBzbyB3ZSBtZXJnZSB0aGVtIGFzIGFycmF5cy5cbiAqL1xuXG5zdHJhdHMud2F0Y2ggPSBzdHJhdHMuZXZlbnRzID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcbiAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcbiAgdmFyIHJldCA9IHt9O1xuICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICBmb3IgKHZhciBrZXkgaW4gY2hpbGRWYWwpIHtcbiAgICB2YXIgcGFyZW50ID0gcmV0W2tleV07XG4gICAgdmFyIGNoaWxkID0gY2hpbGRWYWxba2V5XTtcbiAgICBpZiAocGFyZW50ICYmICFpc0FycmF5KHBhcmVudCkpIHtcbiAgICAgIHBhcmVudCA9IFtwYXJlbnRdO1xuICAgIH1cbiAgICByZXRba2V5XSA9IHBhcmVudCA/IHBhcmVudC5jb25jYXQoY2hpbGQpIDogW2NoaWxkXTtcbiAgfVxuICByZXR1cm4gcmV0O1xufTtcblxuLyoqXG4gKiBPdGhlciBvYmplY3QgaGFzaGVzLlxuICovXG5cbnN0cmF0cy5wcm9wcyA9IHN0cmF0cy5tZXRob2RzID0gc3RyYXRzLmNvbXB1dGVkID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgaWYgKCFjaGlsZFZhbCkgcmV0dXJuIHBhcmVudFZhbDtcbiAgaWYgKCFwYXJlbnRWYWwpIHJldHVybiBjaGlsZFZhbDtcbiAgdmFyIHJldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG4gIGV4dGVuZChyZXQsIGNoaWxkVmFsKTtcbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogRGVmYXVsdCBzdHJhdGVneS5cbiAqL1xuXG52YXIgZGVmYXVsdFN0cmF0ID0gZnVuY3Rpb24gZGVmYXVsdFN0cmF0KHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgcmV0dXJuIGNoaWxkVmFsID09PSB1bmRlZmluZWQgPyBwYXJlbnRWYWwgOiBjaGlsZFZhbDtcbn07XG5cbi8qKlxuICogTWFrZSBzdXJlIGNvbXBvbmVudCBvcHRpb25zIGdldCBjb252ZXJ0ZWQgdG8gYWN0dWFsXG4gKiBjb25zdHJ1Y3RvcnMuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqL1xuXG5mdW5jdGlvbiBndWFyZENvbXBvbmVudHMob3B0aW9ucykge1xuICBpZiAob3B0aW9ucy5jb21wb25lbnRzKSB7XG4gICAgdmFyIGNvbXBvbmVudHMgPSBvcHRpb25zLmNvbXBvbmVudHMgPSBndWFyZEFycmF5QXNzZXRzKG9wdGlvbnMuY29tcG9uZW50cyk7XG4gICAgdmFyIGlkcyA9IE9iamVjdC5rZXlzKGNvbXBvbmVudHMpO1xuICAgIHZhciBkZWY7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHZhciBtYXAgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwID0ge307XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gaWRzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIGtleSA9IGlkc1tpXTtcbiAgICAgIGlmIChjb21tb25UYWdSRS50ZXN0KGtleSkgfHwgcmVzZXJ2ZWRUYWdSRS50ZXN0KGtleSkpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBrZXkpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIC8vIHJlY29yZCBhIGFsbCBsb3dlcmNhc2UgPC0+IGtlYmFiLWNhc2UgbWFwcGluZyBmb3JcbiAgICAgIC8vIHBvc3NpYmxlIGN1c3RvbSBlbGVtZW50IGNhc2UgZXJyb3Igd2FybmluZ1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgbWFwW2tleS5yZXBsYWNlKC8tL2csICcnKS50b0xvd2VyQ2FzZSgpXSA9IGh5cGhlbmF0ZShrZXkpO1xuICAgICAgfVxuICAgICAgZGVmID0gY29tcG9uZW50c1trZXldO1xuICAgICAgaWYgKGlzUGxhaW5PYmplY3QoZGVmKSkge1xuICAgICAgICBjb21wb25lbnRzW2tleV0gPSBWdWUuZXh0ZW5kKGRlZik7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogRW5zdXJlIGFsbCBwcm9wcyBvcHRpb24gc3ludGF4IGFyZSBub3JtYWxpemVkIGludG8gdGhlXG4gKiBPYmplY3QtYmFzZWQgZm9ybWF0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gZ3VhcmRQcm9wcyhvcHRpb25zKSB7XG4gIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG4gIHZhciBpLCB2YWw7XG4gIGlmIChpc0FycmF5KHByb3BzKSkge1xuICAgIG9wdGlvbnMucHJvcHMgPSB7fTtcbiAgICBpID0gcHJvcHMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhbCA9IHByb3BzW2ldO1xuICAgICAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIG9wdGlvbnMucHJvcHNbdmFsXSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHZhbC5uYW1lKSB7XG4gICAgICAgIG9wdGlvbnMucHJvcHNbdmFsLm5hbWVdID0gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHByb3BzKSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMocHJvcHMpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSBwcm9wc1trZXlzW2ldXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIHByb3BzW2tleXNbaV1dID0geyB0eXBlOiB2YWwgfTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBHdWFyZCBhbiBBcnJheS1mb3JtYXQgYXNzZXRzIG9wdGlvbiBhbmQgY29udmVydGVkIGl0XG4gKiBpbnRvIHRoZSBrZXktdmFsdWUgT2JqZWN0IGZvcm1hdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gYXNzZXRzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gZ3VhcmRBcnJheUFzc2V0cyhhc3NldHMpIHtcbiAgaWYgKGlzQXJyYXkoYXNzZXRzKSkge1xuICAgIHZhciByZXMgPSB7fTtcbiAgICB2YXIgaSA9IGFzc2V0cy5sZW5ndGg7XG4gICAgdmFyIGFzc2V0O1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGFzc2V0ID0gYXNzZXRzW2ldO1xuICAgICAgdmFyIGlkID0gdHlwZW9mIGFzc2V0ID09PSAnZnVuY3Rpb24nID8gYXNzZXQub3B0aW9ucyAmJiBhc3NldC5vcHRpb25zLm5hbWUgfHwgYXNzZXQuaWQgOiBhc3NldC5uYW1lIHx8IGFzc2V0LmlkO1xuICAgICAgaWYgKCFpZCkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0FycmF5LXN5bnRheCBhc3NldHMgbXVzdCBwcm92aWRlIGEgXCJuYW1lXCIgb3IgXCJpZFwiIGZpZWxkLicpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVzW2lkXSA9IGFzc2V0O1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gcmVzO1xuICB9XG4gIHJldHVybiBhc3NldHM7XG59XG5cbi8qKlxuICogTWVyZ2UgdHdvIG9wdGlvbiBvYmplY3RzIGludG8gYSBuZXcgb25lLlxuICogQ29yZSB1dGlsaXR5IHVzZWQgaW4gYm90aCBpbnN0YW50aWF0aW9uIGFuZCBpbmhlcml0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcGFyZW50XG4gKiBAcGFyYW0ge09iamVjdH0gY2hpbGRcbiAqIEBwYXJhbSB7VnVlfSBbdm1dIC0gaWYgdm0gaXMgcHJlc2VudCwgaW5kaWNhdGVzIHRoaXMgaXNcbiAqICAgICAgICAgICAgICAgICAgICAgYW4gaW5zdGFudGlhdGlvbiBtZXJnZS5cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZCwgdm0pIHtcbiAgZ3VhcmRDb21wb25lbnRzKGNoaWxkKTtcbiAgZ3VhcmRQcm9wcyhjaGlsZCk7XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKGNoaWxkLnByb3BzRGF0YSAmJiAhdm0pIHtcbiAgICAgIHdhcm4oJ3Byb3BzRGF0YSBjYW4gb25seSBiZSB1c2VkIGFzIGFuIGluc3RhbnRpYXRpb24gb3B0aW9uLicpO1xuICAgIH1cbiAgfVxuICB2YXIgb3B0aW9ucyA9IHt9O1xuICB2YXIga2V5O1xuICBpZiAoY2hpbGRbJ2V4dGVuZHMnXSkge1xuICAgIHBhcmVudCA9IHR5cGVvZiBjaGlsZFsnZXh0ZW5kcyddID09PSAnZnVuY3Rpb24nID8gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXS5vcHRpb25zLCB2bSkgOiBtZXJnZU9wdGlvbnMocGFyZW50LCBjaGlsZFsnZXh0ZW5kcyddLCB2bSk7XG4gIH1cbiAgaWYgKGNoaWxkLm1peGlucykge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGQubWl4aW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIG1peGluID0gY2hpbGQubWl4aW5zW2ldO1xuICAgICAgdmFyIG1peGluT3B0aW9ucyA9IG1peGluLnByb3RvdHlwZSBpbnN0YW5jZW9mIFZ1ZSA/IG1peGluLm9wdGlvbnMgOiBtaXhpbjtcbiAgICAgIHBhcmVudCA9IG1lcmdlT3B0aW9ucyhwYXJlbnQsIG1peGluT3B0aW9ucywgdm0pO1xuICAgIH1cbiAgfVxuICBmb3IgKGtleSBpbiBwYXJlbnQpIHtcbiAgICBtZXJnZUZpZWxkKGtleSk7XG4gIH1cbiAgZm9yIChrZXkgaW4gY2hpbGQpIHtcbiAgICBpZiAoIWhhc093bihwYXJlbnQsIGtleSkpIHtcbiAgICAgIG1lcmdlRmllbGQoa2V5KTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gbWVyZ2VGaWVsZChrZXkpIHtcbiAgICB2YXIgc3RyYXQgPSBzdHJhdHNba2V5XSB8fCBkZWZhdWx0U3RyYXQ7XG4gICAgb3B0aW9uc1trZXldID0gc3RyYXQocGFyZW50W2tleV0sIGNoaWxkW2tleV0sIHZtLCBrZXkpO1xuICB9XG4gIHJldHVybiBvcHRpb25zO1xufVxuXG4vKipcbiAqIFJlc29sdmUgYW4gYXNzZXQuXG4gKiBUaGlzIGZ1bmN0aW9uIGlzIHVzZWQgYmVjYXVzZSBjaGlsZCBpbnN0YW5jZXMgbmVlZCBhY2Nlc3NcbiAqIHRvIGFzc2V0cyBkZWZpbmVkIGluIGl0cyBhbmNlc3RvciBjaGFpbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHBhcmFtIHtCb29sZWFufSB3YXJuTWlzc2luZ1xuICogQHJldHVybiB7T2JqZWN0fEZ1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIHJlc29sdmVBc3NldChvcHRpb25zLCB0eXBlLCBpZCwgd2Fybk1pc3NpbmcpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICh0eXBlb2YgaWQgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBhc3NldHMgPSBvcHRpb25zW3R5cGVdO1xuICB2YXIgY2FtZWxpemVkSWQ7XG4gIHZhciByZXMgPSBhc3NldHNbaWRdIHx8XG4gIC8vIGNhbWVsQ2FzZSBJRFxuICBhc3NldHNbY2FtZWxpemVkSWQgPSBjYW1lbGl6ZShpZCldIHx8XG4gIC8vIFBhc2NhbCBDYXNlIElEXG4gIGFzc2V0c1tjYW1lbGl6ZWRJZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIGNhbWVsaXplZElkLnNsaWNlKDEpXTtcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybk1pc3NpbmcgJiYgIXJlcykge1xuICAgIHdhcm4oJ0ZhaWxlZCB0byByZXNvbHZlICcgKyB0eXBlLnNsaWNlKDAsIC0xKSArICc6ICcgKyBpZCwgb3B0aW9ucyk7XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxudmFyIHVpZCQxID0gMDtcblxuLyoqXG4gKiBBIGRlcCBpcyBhbiBvYnNlcnZhYmxlIHRoYXQgY2FuIGhhdmUgbXVsdGlwbGVcbiAqIGRpcmVjdGl2ZXMgc3Vic2NyaWJpbmcgdG8gaXQuXG4gKlxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERlcCgpIHtcbiAgdGhpcy5pZCA9IHVpZCQxKys7XG4gIHRoaXMuc3VicyA9IFtdO1xufVxuXG4vLyB0aGUgY3VycmVudCB0YXJnZXQgd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQuXG4vLyB0aGlzIGlzIGdsb2JhbGx5IHVuaXF1ZSBiZWNhdXNlIHRoZXJlIGNvdWxkIGJlIG9ubHkgb25lXG4vLyB3YXRjaGVyIGJlaW5nIGV2YWx1YXRlZCBhdCBhbnkgdGltZS5cbkRlcC50YXJnZXQgPSBudWxsO1xuXG4vKipcbiAqIEFkZCBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuICpcbiAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcbiAqL1xuXG5EZXAucHJvdG90eXBlLmFkZFN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcbiAgdGhpcy5zdWJzLnB1c2goc3ViKTtcbn07XG5cbi8qKlxuICogUmVtb3ZlIGEgZGlyZWN0aXZlIHN1YnNjcmliZXIuXG4gKlxuICogQHBhcmFtIHtEaXJlY3RpdmV9IHN1YlxuICovXG5cbkRlcC5wcm90b3R5cGUucmVtb3ZlU3ViID0gZnVuY3Rpb24gKHN1Yikge1xuICB0aGlzLnN1YnMuJHJlbW92ZShzdWIpO1xufTtcblxuLyoqXG4gKiBBZGQgc2VsZiBhcyBhIGRlcGVuZGVuY3kgdG8gdGhlIHRhcmdldCB3YXRjaGVyLlxuICovXG5cbkRlcC5wcm90b3R5cGUuZGVwZW5kID0gZnVuY3Rpb24gKCkge1xuICBEZXAudGFyZ2V0LmFkZERlcCh0aGlzKTtcbn07XG5cbi8qKlxuICogTm90aWZ5IGFsbCBzdWJzY3JpYmVycyBvZiBhIG5ldyB2YWx1ZS5cbiAqL1xuXG5EZXAucHJvdG90eXBlLm5vdGlmeSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gc3RhYmxpemUgdGhlIHN1YnNjcmliZXIgbGlzdCBmaXJzdFxuICB2YXIgc3VicyA9IHRvQXJyYXkodGhpcy5zdWJzKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBzdWJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHN1YnNbaV0udXBkYXRlKCk7XG4gIH1cbn07XG5cbnZhciBhcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlO1xudmFyIGFycmF5TWV0aG9kcyA9IE9iamVjdC5jcmVhdGUoYXJyYXlQcm90bylcblxuLyoqXG4gKiBJbnRlcmNlcHQgbXV0YXRpbmcgbWV0aG9kcyBhbmQgZW1pdCBldmVudHNcbiAqL1xuXG47WydwdXNoJywgJ3BvcCcsICdzaGlmdCcsICd1bnNoaWZ0JywgJ3NwbGljZScsICdzb3J0JywgJ3JldmVyc2UnXS5mb3JFYWNoKGZ1bmN0aW9uIChtZXRob2QpIHtcbiAgLy8gY2FjaGUgb3JpZ2luYWwgbWV0aG9kXG4gIHZhciBvcmlnaW5hbCA9IGFycmF5UHJvdG9bbWV0aG9kXTtcbiAgZGVmKGFycmF5TWV0aG9kcywgbWV0aG9kLCBmdW5jdGlvbiBtdXRhdG9yKCkge1xuICAgIC8vIGF2b2lkIGxlYWtpbmcgYXJndW1lbnRzOlxuICAgIC8vIGh0dHA6Ly9qc3BlcmYuY29tL2Nsb3N1cmUtd2l0aC1hcmd1bWVudHNcbiAgICB2YXIgaSA9IGFyZ3VtZW50cy5sZW5ndGg7XG4gICAgdmFyIGFyZ3MgPSBuZXcgQXJyYXkoaSk7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgYXJnc1tpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gICAgdmFyIHJlc3VsdCA9IG9yaWdpbmFsLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIHZhciBvYiA9IHRoaXMuX19vYl9fO1xuICAgIHZhciBpbnNlcnRlZDtcbiAgICBzd2l0Y2ggKG1ldGhvZCkge1xuICAgICAgY2FzZSAncHVzaCc6XG4gICAgICAgIGluc2VydGVkID0gYXJncztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd1bnNoaWZ0JzpcbiAgICAgICAgaW5zZXJ0ZWQgPSBhcmdzO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3NwbGljZSc6XG4gICAgICAgIGluc2VydGVkID0gYXJncy5zbGljZSgyKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICAgIGlmIChpbnNlcnRlZCkgb2Iub2JzZXJ2ZUFycmF5KGluc2VydGVkKTtcbiAgICAvLyBub3RpZnkgY2hhbmdlXG4gICAgb2IuZGVwLm5vdGlmeSgpO1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH0pO1xufSk7XG5cbi8qKlxuICogU3dhcCB0aGUgZWxlbWVudCBhdCB0aGUgZ2l2ZW4gaW5kZXggd2l0aCBhIG5ldyB2YWx1ZVxuICogYW5kIGVtaXRzIGNvcnJlc3BvbmRpbmcgZXZlbnQuXG4gKlxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHJldHVybiB7Kn0gLSByZXBsYWNlZCBlbGVtZW50XG4gKi9cblxuZGVmKGFycmF5UHJvdG8sICckc2V0JywgZnVuY3Rpb24gJHNldChpbmRleCwgdmFsKSB7XG4gIGlmIChpbmRleCA+PSB0aGlzLmxlbmd0aCkge1xuICAgIHRoaXMubGVuZ3RoID0gTnVtYmVyKGluZGV4KSArIDE7XG4gIH1cbiAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxLCB2YWwpWzBdO1xufSk7XG5cbi8qKlxuICogQ29udmVuaWVuY2UgbWV0aG9kIHRvIHJlbW92ZSB0aGUgZWxlbWVudCBhdCBnaXZlbiBpbmRleCBvciB0YXJnZXQgZWxlbWVudCByZWZlcmVuY2UuXG4gKlxuICogQHBhcmFtIHsqfSBpdGVtXG4gKi9cblxuZGVmKGFycmF5UHJvdG8sICckcmVtb3ZlJywgZnVuY3Rpb24gJHJlbW92ZShpdGVtKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIXRoaXMubGVuZ3RoKSByZXR1cm47XG4gIHZhciBpbmRleCA9IGluZGV4T2YodGhpcywgaXRlbSk7XG4gIGlmIChpbmRleCA+IC0xKSB7XG4gICAgcmV0dXJuIHRoaXMuc3BsaWNlKGluZGV4LCAxKTtcbiAgfVxufSk7XG5cbnZhciBhcnJheUtleXMgPSBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhhcnJheU1ldGhvZHMpO1xuXG4vKipcbiAqIEJ5IGRlZmF1bHQsIHdoZW4gYSByZWFjdGl2ZSBwcm9wZXJ0eSBpcyBzZXQsIHRoZSBuZXcgdmFsdWUgaXNcbiAqIGFsc28gY29udmVydGVkIHRvIGJlY29tZSByZWFjdGl2ZS4gSG93ZXZlciBpbiBjZXJ0YWluIGNhc2VzLCBlLmcuXG4gKiB2LWZvciBzY29wZSBhbGlhcyBhbmQgcHJvcHMsIHdlIGRvbid0IHdhbnQgdG8gZm9yY2UgY29udmVyc2lvblxuICogYmVjYXVzZSB0aGUgdmFsdWUgbWF5IGJlIGEgbmVzdGVkIHZhbHVlIHVuZGVyIGEgZnJvemVuIGRhdGEgc3RydWN0dXJlLlxuICpcbiAqIFNvIHdoZW5ldmVyIHdlIHdhbnQgdG8gc2V0IGEgcmVhY3RpdmUgcHJvcGVydHkgd2l0aG91dCBmb3JjaW5nXG4gKiBjb252ZXJzaW9uIG9uIHRoZSBuZXcgdmFsdWUsIHdlIHdyYXAgdGhhdCBjYWxsIGluc2lkZSB0aGlzIGZ1bmN0aW9uLlxuICovXG5cbnZhciBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcblxuZnVuY3Rpb24gd2l0aG91dENvbnZlcnNpb24oZm4pIHtcbiAgc2hvdWxkQ29udmVydCA9IGZhbHNlO1xuICBmbigpO1xuICBzaG91bGRDb252ZXJ0ID0gdHJ1ZTtcbn1cblxuLyoqXG4gKiBPYnNlcnZlciBjbGFzcyB0aGF0IGFyZSBhdHRhY2hlZCB0byBlYWNoIG9ic2VydmVkXG4gKiBvYmplY3QuIE9uY2UgYXR0YWNoZWQsIHRoZSBvYnNlcnZlciBjb252ZXJ0cyB0YXJnZXRcbiAqIG9iamVjdCdzIHByb3BlcnR5IGtleXMgaW50byBnZXR0ZXIvc2V0dGVycyB0aGF0XG4gKiBjb2xsZWN0IGRlcGVuZGVuY2llcyBhbmQgZGlzcGF0Y2hlcyB1cGRhdGVzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8T2JqZWN0fSB2YWx1ZVxuICogQGNvbnN0cnVjdG9yXG4gKi9cblxuZnVuY3Rpb24gT2JzZXJ2ZXIodmFsdWUpIHtcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB0aGlzLmRlcCA9IG5ldyBEZXAoKTtcbiAgZGVmKHZhbHVlLCAnX19vYl9fJywgdGhpcyk7XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIHZhciBhdWdtZW50ID0gaGFzUHJvdG8gPyBwcm90b0F1Z21lbnQgOiBjb3B5QXVnbWVudDtcbiAgICBhdWdtZW50KHZhbHVlLCBhcnJheU1ldGhvZHMsIGFycmF5S2V5cyk7XG4gICAgdGhpcy5vYnNlcnZlQXJyYXkodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHRoaXMud2Fsayh2YWx1ZSk7XG4gIH1cbn1cblxuLy8gSW5zdGFuY2UgbWV0aG9kc1xuXG4vKipcbiAqIFdhbGsgdGhyb3VnaCBlYWNoIHByb3BlcnR5IGFuZCBjb252ZXJ0IHRoZW0gaW50b1xuICogZ2V0dGVyL3NldHRlcnMuIFRoaXMgbWV0aG9kIHNob3VsZCBvbmx5IGJlIGNhbGxlZCB3aGVuXG4gKiB2YWx1ZSB0eXBlIGlzIE9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLndhbGsgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciBrZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBrZXlzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRoaXMuY29udmVydChrZXlzW2ldLCBvYmpba2V5c1tpXV0pO1xuICB9XG59O1xuXG4vKipcbiAqIE9ic2VydmUgYSBsaXN0IG9mIEFycmF5IGl0ZW1zLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGl0ZW1zXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLm9ic2VydmVBcnJheSA9IGZ1bmN0aW9uIChpdGVtcykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGl0ZW1zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG9ic2VydmUoaXRlbXNbaV0pO1xuICB9XG59O1xuXG4vKipcbiAqIENvbnZlcnQgYSBwcm9wZXJ0eSBpbnRvIGdldHRlci9zZXR0ZXIgc28gd2UgY2FuIGVtaXRcbiAqIHRoZSBldmVudHMgd2hlbiB0aGUgcHJvcGVydHkgaXMgYWNjZXNzZWQvY2hhbmdlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS5jb252ZXJ0ID0gZnVuY3Rpb24gKGtleSwgdmFsKSB7XG4gIGRlZmluZVJlYWN0aXZlKHRoaXMudmFsdWUsIGtleSwgdmFsKTtcbn07XG5cbi8qKlxuICogQWRkIGFuIG93bmVyIHZtLCBzbyB0aGF0IHdoZW4gJHNldC8kZGVsZXRlIG11dGF0aW9uc1xuICogaGFwcGVuIHdlIGNhbiBub3RpZnkgb3duZXIgdm1zIHRvIHByb3h5IHRoZSBrZXlzIGFuZFxuICogZGlnZXN0IHRoZSB3YXRjaGVycy4gVGhpcyBpcyBvbmx5IGNhbGxlZCB3aGVuIHRoZSBvYmplY3RcbiAqIGlzIG9ic2VydmVkIGFzIGFuIGluc3RhbmNlJ3Mgcm9vdCAkZGF0YS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUuYWRkVm0gPSBmdW5jdGlvbiAodm0pIHtcbiAgKHRoaXMudm1zIHx8ICh0aGlzLnZtcyA9IFtdKSkucHVzaCh2bSk7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhbiBvd25lciB2bS4gVGhpcyBpcyBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0IGlzXG4gKiBzd2FwcGVkIG91dCBhcyBhbiBpbnN0YW5jZSdzICRkYXRhIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUucmVtb3ZlVm0gPSBmdW5jdGlvbiAodm0pIHtcbiAgdGhpcy52bXMuJHJlbW92ZSh2bSk7XG59O1xuXG4vLyBoZWxwZXJzXG5cbi8qKlxuICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGludGVyY2VwdGluZ1xuICogdGhlIHByb3RvdHlwZSBjaGFpbiB1c2luZyBfX3Byb3RvX19cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG4gKiBAcGFyYW0ge09iamVjdH0gc3JjXG4gKi9cblxuZnVuY3Rpb24gcHJvdG9BdWdtZW50KHRhcmdldCwgc3JjKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG4gIHRhcmdldC5fX3Byb3RvX18gPSBzcmM7XG4gIC8qIGVzbGludC1lbmFibGUgbm8tcHJvdG8gKi9cbn1cblxuLyoqXG4gKiBBdWdtZW50IGFuIHRhcmdldCBPYmplY3Qgb3IgQXJyYXkgYnkgZGVmaW5pbmdcbiAqIGhpZGRlbiBwcm9wZXJ0aWVzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5fSB0YXJnZXRcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm90b1xuICovXG5cbmZ1bmN0aW9uIGNvcHlBdWdtZW50KHRhcmdldCwgc3JjLCBrZXlzKSB7XG4gIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIga2V5ID0ga2V5c1tpXTtcbiAgICBkZWYodGFyZ2V0LCBrZXksIHNyY1trZXldKTtcbiAgfVxufVxuXG4vKipcbiAqIEF0dGVtcHQgdG8gY3JlYXRlIGFuIG9ic2VydmVyIGluc3RhbmNlIGZvciBhIHZhbHVlLFxuICogcmV0dXJucyB0aGUgbmV3IG9ic2VydmVyIGlmIHN1Y2Nlc3NmdWxseSBvYnNlcnZlZCxcbiAqIG9yIHRoZSBleGlzdGluZyBvYnNlcnZlciBpZiB0aGUgdmFsdWUgYWxyZWFkeSBoYXMgb25lLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKiBAcmV0dXJuIHtPYnNlcnZlcnx1bmRlZmluZWR9XG4gKiBAc3RhdGljXG4gKi9cblxuZnVuY3Rpb24gb2JzZXJ2ZSh2YWx1ZSwgdm0pIHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBvYjtcbiAgaWYgKGhhc093bih2YWx1ZSwgJ19fb2JfXycpICYmIHZhbHVlLl9fb2JfXyBpbnN0YW5jZW9mIE9ic2VydmVyKSB7XG4gICAgb2IgPSB2YWx1ZS5fX29iX187XG4gIH0gZWxzZSBpZiAoc2hvdWxkQ29udmVydCAmJiAoaXNBcnJheSh2YWx1ZSkgfHwgaXNQbGFpbk9iamVjdCh2YWx1ZSkpICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpICYmICF2YWx1ZS5faXNWdWUpIHtcbiAgICBvYiA9IG5ldyBPYnNlcnZlcih2YWx1ZSk7XG4gIH1cbiAgaWYgKG9iICYmIHZtKSB7XG4gICAgb2IuYWRkVm0odm0pO1xuICB9XG4gIHJldHVybiBvYjtcbn1cblxuLyoqXG4gKiBEZWZpbmUgYSByZWFjdGl2ZSBwcm9wZXJ0eSBvbiBhbiBPYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBkZWZpbmVSZWFjdGl2ZShvYmosIGtleSwgdmFsKSB7XG4gIHZhciBkZXAgPSBuZXcgRGVwKCk7XG5cbiAgdmFyIHByb3BlcnR5ID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmosIGtleSk7XG4gIGlmIChwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5jb25maWd1cmFibGUgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgLy8gY2F0ZXIgZm9yIHByZS1kZWZpbmVkIGdldHRlci9zZXR0ZXJzXG4gIHZhciBnZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5nZXQ7XG4gIHZhciBzZXR0ZXIgPSBwcm9wZXJ0eSAmJiBwcm9wZXJ0eS5zZXQ7XG5cbiAgdmFyIGNoaWxkT2IgPSBvYnNlcnZlKHZhbCk7XG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosIGtleSwge1xuICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGdldDogZnVuY3Rpb24gcmVhY3RpdmVHZXR0ZXIoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuICAgICAgaWYgKERlcC50YXJnZXQpIHtcbiAgICAgICAgZGVwLmRlcGVuZCgpO1xuICAgICAgICBpZiAoY2hpbGRPYikge1xuICAgICAgICAgIGNoaWxkT2IuZGVwLmRlcGVuZCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgIGZvciAodmFyIGUsIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgICAgICBlID0gdmFsdWVbaV07XG4gICAgICAgICAgICBlICYmIGUuX19vYl9fICYmIGUuX19vYl9fLmRlcC5kZXBlbmQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gcmVhY3RpdmVTZXR0ZXIobmV3VmFsKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXR0ZXIgPyBnZXR0ZXIuY2FsbChvYmopIDogdmFsO1xuICAgICAgaWYgKG5ld1ZhbCA9PT0gdmFsdWUpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHNldHRlcikge1xuICAgICAgICBzZXR0ZXIuY2FsbChvYmosIG5ld1ZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB2YWwgPSBuZXdWYWw7XG4gICAgICB9XG4gICAgICBjaGlsZE9iID0gb2JzZXJ2ZShuZXdWYWwpO1xuICAgICAgZGVwLm5vdGlmeSgpO1xuICAgIH1cbiAgfSk7XG59XG5cblxuXG52YXIgdXRpbCA9IE9iamVjdC5mcmVlemUoe1xuXHRkZWZpbmVSZWFjdGl2ZTogZGVmaW5lUmVhY3RpdmUsXG5cdHNldDogc2V0LFxuXHRkZWw6IGRlbCxcblx0aGFzT3duOiBoYXNPd24sXG5cdGlzTGl0ZXJhbDogaXNMaXRlcmFsLFxuXHRpc1Jlc2VydmVkOiBpc1Jlc2VydmVkLFxuXHRfdG9TdHJpbmc6IF90b1N0cmluZyxcblx0dG9OdW1iZXI6IHRvTnVtYmVyLFxuXHR0b0Jvb2xlYW46IHRvQm9vbGVhbixcblx0c3RyaXBRdW90ZXM6IHN0cmlwUXVvdGVzLFxuXHRjYW1lbGl6ZTogY2FtZWxpemUsXG5cdGh5cGhlbmF0ZTogaHlwaGVuYXRlLFxuXHRjbGFzc2lmeTogY2xhc3NpZnksXG5cdGJpbmQ6IGJpbmQsXG5cdHRvQXJyYXk6IHRvQXJyYXksXG5cdGV4dGVuZDogZXh0ZW5kLFxuXHRpc09iamVjdDogaXNPYmplY3QsXG5cdGlzUGxhaW5PYmplY3Q6IGlzUGxhaW5PYmplY3QsXG5cdGRlZjogZGVmLFxuXHRkZWJvdW5jZTogX2RlYm91bmNlLFxuXHRpbmRleE9mOiBpbmRleE9mLFxuXHRjYW5jZWxsYWJsZTogY2FuY2VsbGFibGUsXG5cdGxvb3NlRXF1YWw6IGxvb3NlRXF1YWwsXG5cdGlzQXJyYXk6IGlzQXJyYXksXG5cdGhhc1Byb3RvOiBoYXNQcm90byxcblx0aW5Ccm93c2VyOiBpbkJyb3dzZXIsXG5cdGRldnRvb2xzOiBkZXZ0b29scyxcblx0aXNJRTogaXNJRSxcblx0aXNJRTk6IGlzSUU5LFxuXHRpc0FuZHJvaWQ6IGlzQW5kcm9pZCxcblx0aXNJb3M6IGlzSW9zLFxuXHRpb3NWZXJzaW9uTWF0Y2g6IGlvc1ZlcnNpb25NYXRjaCxcblx0aW9zVmVyc2lvbjogaW9zVmVyc2lvbixcblx0aGFzTXV0YXRpb25PYnNlcnZlckJ1ZzogaGFzTXV0YXRpb25PYnNlcnZlckJ1Zyxcblx0Z2V0IHRyYW5zaXRpb25Qcm9wICgpIHsgcmV0dXJuIHRyYW5zaXRpb25Qcm9wOyB9LFxuXHRnZXQgdHJhbnNpdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIHRyYW5zaXRpb25FbmRFdmVudDsgfSxcblx0Z2V0IGFuaW1hdGlvblByb3AgKCkgeyByZXR1cm4gYW5pbWF0aW9uUHJvcDsgfSxcblx0Z2V0IGFuaW1hdGlvbkVuZEV2ZW50ICgpIHsgcmV0dXJuIGFuaW1hdGlvbkVuZEV2ZW50OyB9LFxuXHRuZXh0VGljazogbmV4dFRpY2ssXG5cdGdldCBfU2V0ICgpIHsgcmV0dXJuIF9TZXQ7IH0sXG5cdHF1ZXJ5OiBxdWVyeSxcblx0aW5Eb2M6IGluRG9jLFxuXHRnZXRBdHRyOiBnZXRBdHRyLFxuXHRnZXRCaW5kQXR0cjogZ2V0QmluZEF0dHIsXG5cdGhhc0JpbmRBdHRyOiBoYXNCaW5kQXR0cixcblx0YmVmb3JlOiBiZWZvcmUsXG5cdGFmdGVyOiBhZnRlcixcblx0cmVtb3ZlOiByZW1vdmUsXG5cdHByZXBlbmQ6IHByZXBlbmQsXG5cdHJlcGxhY2U6IHJlcGxhY2UsXG5cdG9uOiBvbixcblx0b2ZmOiBvZmYsXG5cdHNldENsYXNzOiBzZXRDbGFzcyxcblx0YWRkQ2xhc3M6IGFkZENsYXNzLFxuXHRyZW1vdmVDbGFzczogcmVtb3ZlQ2xhc3MsXG5cdGV4dHJhY3RDb250ZW50OiBleHRyYWN0Q29udGVudCxcblx0dHJpbU5vZGU6IHRyaW1Ob2RlLFxuXHRpc1RlbXBsYXRlOiBpc1RlbXBsYXRlLFxuXHRjcmVhdGVBbmNob3I6IGNyZWF0ZUFuY2hvcixcblx0ZmluZFJlZjogZmluZFJlZixcblx0bWFwTm9kZVJhbmdlOiBtYXBOb2RlUmFuZ2UsXG5cdHJlbW92ZU5vZGVSYW5nZTogcmVtb3ZlTm9kZVJhbmdlLFxuXHRpc0ZyYWdtZW50OiBpc0ZyYWdtZW50LFxuXHRnZXRPdXRlckhUTUw6IGdldE91dGVySFRNTCxcblx0bWVyZ2VPcHRpb25zOiBtZXJnZU9wdGlvbnMsXG5cdHJlc29sdmVBc3NldDogcmVzb2x2ZUFzc2V0LFxuXHRjaGVja0NvbXBvbmVudEF0dHI6IGNoZWNrQ29tcG9uZW50QXR0cixcblx0Y29tbW9uVGFnUkU6IGNvbW1vblRhZ1JFLFxuXHRyZXNlcnZlZFRhZ1JFOiByZXNlcnZlZFRhZ1JFLFxuXHRnZXQgd2FybiAoKSB7IHJldHVybiB3YXJuOyB9XG59KTtcblxudmFyIHVpZCA9IDA7XG5cbmZ1bmN0aW9uIGluaXRNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBUaGUgbWFpbiBpbml0IHNlcXVlbmNlLiBUaGlzIGlzIGNhbGxlZCBmb3IgZXZlcnlcbiAgICogaW5zdGFuY2UsIGluY2x1ZGluZyBvbmVzIHRoYXQgYXJlIGNyZWF0ZWQgZnJvbSBleHRlbmRlZFxuICAgKiBjb25zdHJ1Y3RvcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zIC0gdGhpcyBvcHRpb25zIG9iamVjdCBzaG91bGQgYmVcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICB0aGUgcmVzdWx0IG9mIG1lcmdpbmcgY2xhc3NcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zIGFuZCB0aGUgb3B0aW9ucyBwYXNzZWRcbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICBpbiB0byB0aGUgY29uc3RydWN0b3IuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXQgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgdGhpcy4kZWwgPSBudWxsO1xuICAgIHRoaXMuJHBhcmVudCA9IG9wdGlvbnMucGFyZW50O1xuICAgIHRoaXMuJHJvb3QgPSB0aGlzLiRwYXJlbnQgPyB0aGlzLiRwYXJlbnQuJHJvb3QgOiB0aGlzO1xuICAgIHRoaXMuJGNoaWxkcmVuID0gW107XG4gICAgdGhpcy4kcmVmcyA9IHt9OyAvLyBjaGlsZCB2bSByZWZlcmVuY2VzXG4gICAgdGhpcy4kZWxzID0ge307IC8vIGVsZW1lbnQgcmVmZXJlbmNlc1xuICAgIHRoaXMuX3dhdGNoZXJzID0gW107IC8vIGFsbCB3YXRjaGVycyBhcyBhbiBhcnJheVxuICAgIHRoaXMuX2RpcmVjdGl2ZXMgPSBbXTsgLy8gYWxsIGRpcmVjdGl2ZXNcblxuICAgIC8vIGEgdWlkXG4gICAgdGhpcy5fdWlkID0gdWlkKys7XG5cbiAgICAvLyBhIGZsYWcgdG8gYXZvaWQgdGhpcyBiZWluZyBvYnNlcnZlZFxuICAgIHRoaXMuX2lzVnVlID0gdHJ1ZTtcblxuICAgIC8vIGV2ZW50cyBib29ra2VlcGluZ1xuICAgIHRoaXMuX2V2ZW50cyA9IHt9OyAvLyByZWdpc3RlcmVkIGNhbGxiYWNrc1xuICAgIHRoaXMuX2V2ZW50c0NvdW50ID0ge307IC8vIGZvciAkYnJvYWRjYXN0IG9wdGltaXphdGlvblxuXG4gICAgLy8gZnJhZ21lbnQgaW5zdGFuY2UgcHJvcGVydGllc1xuICAgIHRoaXMuX2lzRnJhZ21lbnQgPSBmYWxzZTtcbiAgICB0aGlzLl9mcmFnbWVudCA9IC8vIEB0eXBlIHtEb2N1bWVudEZyYWdtZW50fVxuICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQgPSAvLyBAdHlwZSB7VGV4dHxDb21tZW50fVxuICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gbnVsbDsgLy8gQHR5cGUge1RleHR8Q29tbWVudH1cblxuICAgIC8vIGxpZmVjeWNsZSBzdGF0ZVxuICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRoaXMuX2lzUmVhZHkgPSB0aGlzLl9pc0F0dGFjaGVkID0gdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRoaXMuX3ZGb3JSZW1vdmluZyA9IGZhbHNlO1xuICAgIHRoaXMuX3VubGlua0ZuID0gbnVsbDtcblxuICAgIC8vIGNvbnRleHQ6XG4gICAgLy8gaWYgdGhpcyBpcyBhIHRyYW5zY2x1ZGVkIGNvbXBvbmVudCwgY29udGV4dFxuICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuICAgIC8vIGFuZCBpdHMgaG9zdC5cbiAgICB0aGlzLl9jb250ZXh0ID0gb3B0aW9ucy5fY29udGV4dCB8fCB0aGlzLiRwYXJlbnQ7XG5cbiAgICAvLyBzY29wZTpcbiAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG4gICAgLy8gcmVwZWF0IGZyYWdtZW50LiB0aGlzIGlzIHVzZWQgZm9yIGxpbmtpbmcgcHJvcHNcbiAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgdGhpcy5fc2NvcGUgPSBvcHRpb25zLl9zY29wZTtcblxuICAgIC8vIGZyYWdtZW50OlxuICAgIC8vIGlmIHRoaXMgaW5zdGFuY2UgaXMgY29tcGlsZWQgaW5zaWRlIGEgRnJhZ21lbnQsIGl0XG4gICAgLy8gbmVlZHMgdG8gcmVpZ3N0ZXIgaXRzZWxmIGFzIGEgY2hpbGQgb2YgdGhhdCBmcmFnbWVudFxuICAgIC8vIGZvciBhdHRhY2gvZGV0YWNoIHRvIHdvcmsgcHJvcGVybHkuXG4gICAgdGhpcy5fZnJhZyA9IG9wdGlvbnMuX2ZyYWc7XG4gICAgaWYgKHRoaXMuX2ZyYWcpIHtcbiAgICAgIHRoaXMuX2ZyYWcuY2hpbGRyZW4ucHVzaCh0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBwdXNoIHNlbGYgaW50byBwYXJlbnQgLyB0cmFuc2NsdXNpb24gaG9zdFxuICAgIGlmICh0aGlzLiRwYXJlbnQpIHtcbiAgICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4ucHVzaCh0aGlzKTtcbiAgICB9XG5cbiAgICAvLyBtZXJnZSBvcHRpb25zLlxuICAgIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zID0gbWVyZ2VPcHRpb25zKHRoaXMuY29uc3RydWN0b3Iub3B0aW9ucywgb3B0aW9ucywgdGhpcyk7XG5cbiAgICAvLyBzZXQgcmVmXG4gICAgdGhpcy5fdXBkYXRlUmVmKCk7XG5cbiAgICAvLyBpbml0aWFsaXplIGRhdGEgYXMgZW1wdHkgb2JqZWN0LlxuICAgIC8vIGl0IHdpbGwgYmUgZmlsbGVkIHVwIGluIF9pbml0RGF0YSgpLlxuICAgIHRoaXMuX2RhdGEgPSB7fTtcblxuICAgIC8vIGNhbGwgaW5pdCBob29rXG4gICAgdGhpcy5fY2FsbEhvb2soJ2luaXQnKTtcblxuICAgIC8vIGluaXRpYWxpemUgZGF0YSBvYnNlcnZhdGlvbiBhbmQgc2NvcGUgaW5oZXJpdGFuY2UuXG4gICAgdGhpcy5faW5pdFN0YXRlKCk7XG5cbiAgICAvLyBzZXR1cCBldmVudCBzeXN0ZW0gYW5kIG9wdGlvbiBldmVudHMuXG4gICAgdGhpcy5faW5pdEV2ZW50cygpO1xuXG4gICAgLy8gY2FsbCBjcmVhdGVkIGhvb2tcbiAgICB0aGlzLl9jYWxsSG9vaygnY3JlYXRlZCcpO1xuXG4gICAgLy8gaWYgYGVsYCBvcHRpb24gaXMgcGFzc2VkLCBzdGFydCBjb21waWxhdGlvbi5cbiAgICBpZiAob3B0aW9ucy5lbCkge1xuICAgICAgdGhpcy4kbW91bnQob3B0aW9ucy5lbCk7XG4gICAgfVxuICB9O1xufVxuXG52YXIgcGF0aENhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG4vLyBhY3Rpb25zXG52YXIgQVBQRU5EID0gMDtcbnZhciBQVVNIID0gMTtcbnZhciBJTkNfU1VCX1BBVEhfREVQVEggPSAyO1xudmFyIFBVU0hfU1VCX1BBVEggPSAzO1xuXG4vLyBzdGF0ZXNcbnZhciBCRUZPUkVfUEFUSCA9IDA7XG52YXIgSU5fUEFUSCA9IDE7XG52YXIgQkVGT1JFX0lERU5UID0gMjtcbnZhciBJTl9JREVOVCA9IDM7XG52YXIgSU5fU1VCX1BBVEggPSA0O1xudmFyIElOX1NJTkdMRV9RVU9URSA9IDU7XG52YXIgSU5fRE9VQkxFX1FVT1RFID0gNjtcbnZhciBBRlRFUl9QQVRIID0gNztcbnZhciBFUlJPUiA9IDg7XG5cbnZhciBwYXRoU3RhdGVNYWNoaW5lID0gW107XG5cbnBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX1BBVEhdID0ge1xuICAnd3MnOiBbQkVGT1JFX1BBVEhdLFxuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICdbJzogW0lOX1NVQl9QQVRIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRIXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9QQVRIXSA9IHtcbiAgJ3dzJzogW0lOX1BBVEhdLFxuICAnLic6IFtCRUZPUkVfSURFTlRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbQkVGT1JFX0lERU5UXSA9IHtcbiAgJ3dzJzogW0JFRk9SRV9JREVOVF0sXG4gICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9JREVOVF0gPSB7XG4gICdpZGVudCc6IFtJTl9JREVOVCwgQVBQRU5EXSxcbiAgJzAnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICdudW1iZXInOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICd3cyc6IFtJTl9QQVRILCBQVVNIXSxcbiAgJy4nOiBbQkVGT1JFX0lERU5ULCBQVVNIXSxcbiAgJ1snOiBbSU5fU1VCX1BBVEgsIFBVU0hdLFxuICAnZW9mJzogW0FGVEVSX1BBVEgsIFBVU0hdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0lOX1NVQl9QQVRIXSA9IHtcbiAgXCInXCI6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF0sXG4gICdcIic6IFtJTl9ET1VCTEVfUVVPVEUsIEFQUEVORF0sXG4gICdbJzogW0lOX1NVQl9QQVRILCBJTkNfU1VCX1BBVEhfREVQVEhdLFxuICAnXSc6IFtJTl9QQVRILCBQVVNIX1NVQl9QQVRIXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9TSU5HTEVfUVVPVEVdID0ge1xuICBcIidcIjogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuICAnZW9mJzogRVJST1IsXG4gICdlbHNlJzogW0lOX1NJTkdMRV9RVU9URSwgQVBQRU5EXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9ET1VCTEVfUVVPVEVdID0ge1xuICAnXCInOiBbSU5fU1VCX1BBVEgsIEFQUEVORF0sXG4gICdlb2YnOiBFUlJPUixcbiAgJ2Vsc2UnOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdXG59O1xuXG4vKipcbiAqIERldGVybWluZSB0aGUgdHlwZSBvZiBhIGNoYXJhY3RlciBpbiBhIGtleXBhdGguXG4gKlxuICogQHBhcmFtIHtDaGFyfSBjaFxuICogQHJldHVybiB7U3RyaW5nfSB0eXBlXG4gKi9cblxuZnVuY3Rpb24gZ2V0UGF0aENoYXJUeXBlKGNoKSB7XG4gIGlmIChjaCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuICdlb2YnO1xuICB9XG5cbiAgdmFyIGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApO1xuXG4gIHN3aXRjaCAoY29kZSkge1xuICAgIGNhc2UgMHg1QjogLy8gW1xuICAgIGNhc2UgMHg1RDogLy8gXVxuICAgIGNhc2UgMHgyRTogLy8gLlxuICAgIGNhc2UgMHgyMjogLy8gXCJcbiAgICBjYXNlIDB4Mjc6IC8vICdcbiAgICBjYXNlIDB4MzA6XG4gICAgICAvLyAwXG4gICAgICByZXR1cm4gY2g7XG5cbiAgICBjYXNlIDB4NUY6IC8vIF9cbiAgICBjYXNlIDB4MjQ6XG4gICAgICAvLyAkXG4gICAgICByZXR1cm4gJ2lkZW50JztcblxuICAgIGNhc2UgMHgyMDogLy8gU3BhY2VcbiAgICBjYXNlIDB4MDk6IC8vIFRhYlxuICAgIGNhc2UgMHgwQTogLy8gTmV3bGluZVxuICAgIGNhc2UgMHgwRDogLy8gUmV0dXJuXG4gICAgY2FzZSAweEEwOiAvLyBOby1icmVhayBzcGFjZVxuICAgIGNhc2UgMHhGRUZGOiAvLyBCeXRlIE9yZGVyIE1hcmtcbiAgICBjYXNlIDB4MjAyODogLy8gTGluZSBTZXBhcmF0b3JcbiAgICBjYXNlIDB4MjAyOTpcbiAgICAgIC8vIFBhcmFncmFwaCBTZXBhcmF0b3JcbiAgICAgIHJldHVybiAnd3MnO1xuICB9XG5cbiAgLy8gYS16LCBBLVpcbiAgaWYgKGNvZGUgPj0gMHg2MSAmJiBjb2RlIDw9IDB4N0EgfHwgY29kZSA+PSAweDQxICYmIGNvZGUgPD0gMHg1QSkge1xuICAgIHJldHVybiAnaWRlbnQnO1xuICB9XG5cbiAgLy8gMS05XG4gIGlmIChjb2RlID49IDB4MzEgJiYgY29kZSA8PSAweDM5KSB7XG4gICAgcmV0dXJuICdudW1iZXInO1xuICB9XG5cbiAgcmV0dXJuICdlbHNlJztcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBzdWJQYXRoLCByZXR1cm4gaXRzIHBsYWluIGZvcm0gaWYgaXQgaXNcbiAqIGEgbGl0ZXJhbCBzdHJpbmcgb3IgbnVtYmVyLiBPdGhlcndpc2UgcHJlcGVuZCB0aGVcbiAqIGR5bmFtaWMgaW5kaWNhdG9yICgqKS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFN1YlBhdGgocGF0aCkge1xuICB2YXIgdHJpbW1lZCA9IHBhdGgudHJpbSgpO1xuICAvLyBpbnZhbGlkIGxlYWRpbmcgMFxuICBpZiAocGF0aC5jaGFyQXQoMCkgPT09ICcwJyAmJiBpc05hTihwYXRoKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gaXNMaXRlcmFsKHRyaW1tZWQpID8gc3RyaXBRdW90ZXModHJpbW1lZCkgOiAnKicgKyB0cmltbWVkO1xufVxuXG4vKipcbiAqIFBhcnNlIGEgc3RyaW5nIHBhdGggaW50byBhbiBhcnJheSBvZiBzZWdtZW50c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2UocGF0aCkge1xuICB2YXIga2V5cyA9IFtdO1xuICB2YXIgaW5kZXggPSAtMTtcbiAgdmFyIG1vZGUgPSBCRUZPUkVfUEFUSDtcbiAgdmFyIHN1YlBhdGhEZXB0aCA9IDA7XG4gIHZhciBjLCBuZXdDaGFyLCBrZXksIHR5cGUsIHRyYW5zaXRpb24sIGFjdGlvbiwgdHlwZU1hcDtcblxuICB2YXIgYWN0aW9ucyA9IFtdO1xuXG4gIGFjdGlvbnNbUFVTSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKGtleSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBrZXlzLnB1c2goa2V5KTtcbiAgICAgIGtleSA9IHVuZGVmaW5lZDtcbiAgICB9XG4gIH07XG5cbiAgYWN0aW9uc1tBUFBFTkRdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChrZXkgPT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5ID0gbmV3Q2hhcjtcbiAgICB9IGVsc2Uge1xuICAgICAga2V5ICs9IG5ld0NoYXI7XG4gICAgfVxuICB9O1xuXG4gIGFjdGlvbnNbSU5DX1NVQl9QQVRIX0RFUFRIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICBzdWJQYXRoRGVwdGgrKztcbiAgfTtcblxuICBhY3Rpb25zW1BVU0hfU1VCX1BBVEhdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChzdWJQYXRoRGVwdGggPiAwKSB7XG4gICAgICBzdWJQYXRoRGVwdGgtLTtcbiAgICAgIG1vZGUgPSBJTl9TVUJfUEFUSDtcbiAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdWJQYXRoRGVwdGggPSAwO1xuICAgICAga2V5ID0gZm9ybWF0U3ViUGF0aChrZXkpO1xuICAgICAgaWYgKGtleSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWN0aW9uc1tQVVNIXSgpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBtYXliZVVuZXNjYXBlUXVvdGUoKSB7XG4gICAgdmFyIG5leHRDaGFyID0gcGF0aFtpbmRleCArIDFdO1xuICAgIGlmIChtb2RlID09PSBJTl9TSU5HTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09IFwiJ1wiIHx8IG1vZGUgPT09IElOX0RPVUJMRV9RVU9URSAmJiBuZXh0Q2hhciA9PT0gJ1wiJykge1xuICAgICAgaW5kZXgrKztcbiAgICAgIG5ld0NoYXIgPSAnXFxcXCcgKyBuZXh0Q2hhcjtcbiAgICAgIGFjdGlvbnNbQVBQRU5EXSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgd2hpbGUgKG1vZGUgIT0gbnVsbCkge1xuICAgIGluZGV4Kys7XG4gICAgYyA9IHBhdGhbaW5kZXhdO1xuXG4gICAgaWYgKGMgPT09ICdcXFxcJyAmJiBtYXliZVVuZXNjYXBlUXVvdGUoKSkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgdHlwZSA9IGdldFBhdGhDaGFyVHlwZShjKTtcbiAgICB0eXBlTWFwID0gcGF0aFN0YXRlTWFjaGluZVttb2RlXTtcbiAgICB0cmFuc2l0aW9uID0gdHlwZU1hcFt0eXBlXSB8fCB0eXBlTWFwWydlbHNlJ10gfHwgRVJST1I7XG5cbiAgICBpZiAodHJhbnNpdGlvbiA9PT0gRVJST1IpIHtcbiAgICAgIHJldHVybjsgLy8gcGFyc2UgZXJyb3JcbiAgICB9XG5cbiAgICBtb2RlID0gdHJhbnNpdGlvblswXTtcbiAgICBhY3Rpb24gPSBhY3Rpb25zW3RyYW5zaXRpb25bMV1dO1xuICAgIGlmIChhY3Rpb24pIHtcbiAgICAgIG5ld0NoYXIgPSB0cmFuc2l0aW9uWzJdO1xuICAgICAgbmV3Q2hhciA9IG5ld0NoYXIgPT09IHVuZGVmaW5lZCA/IGMgOiBuZXdDaGFyO1xuICAgICAgaWYgKGFjdGlvbigpID09PSBmYWxzZSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG1vZGUgPT09IEFGVEVSX1BBVEgpIHtcbiAgICAgIGtleXMucmF3ID0gcGF0aDtcbiAgICAgIHJldHVybiBrZXlzO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEV4dGVybmFsIHBhcnNlIHRoYXQgY2hlY2sgZm9yIGEgY2FjaGUgaGl0IGZpcnN0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge0FycmF5fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZVBhdGgocGF0aCkge1xuICB2YXIgaGl0ID0gcGF0aENhY2hlLmdldChwYXRoKTtcbiAgaWYgKCFoaXQpIHtcbiAgICBoaXQgPSBwYXJzZShwYXRoKTtcbiAgICBpZiAoaGl0KSB7XG4gICAgICBwYXRoQ2FjaGUucHV0KHBhdGgsIGhpdCk7XG4gICAgfVxuICB9XG4gIHJldHVybiBoaXQ7XG59XG5cbi8qKlxuICogR2V0IGZyb20gYW4gb2JqZWN0IGZyb20gYSBwYXRoIHN0cmluZ1xuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKi9cblxuZnVuY3Rpb24gZ2V0UGF0aChvYmosIHBhdGgpIHtcbiAgcmV0dXJuIHBhcnNlRXhwcmVzc2lvbihwYXRoKS5nZXQob2JqKTtcbn1cblxuLyoqXG4gKiBXYXJuIGFnYWluc3Qgc2V0dGluZyBub24tZXhpc3RlbnQgcm9vdCBwYXRoIG9uIGEgdm0uXG4gKi9cblxudmFyIHdhcm5Ob25FeGlzdGVudDtcbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHdhcm5Ob25FeGlzdGVudCA9IGZ1bmN0aW9uIChwYXRoLCB2bSkge1xuICAgIHdhcm4oJ1lvdSBhcmUgc2V0dGluZyBhIG5vbi1leGlzdGVudCBwYXRoIFwiJyArIHBhdGgucmF3ICsgJ1wiICcgKyAnb24gYSB2bSBpbnN0YW5jZS4gQ29uc2lkZXIgcHJlLWluaXRpYWxpemluZyB0aGUgcHJvcGVydHkgJyArICd3aXRoIHRoZSBcImRhdGFcIiBvcHRpb24gZm9yIG1vcmUgcmVsaWFibGUgcmVhY3Rpdml0eSAnICsgJ2FuZCBiZXR0ZXIgcGVyZm9ybWFuY2UuJywgdm0pO1xuICB9O1xufVxuXG4vKipcbiAqIFNldCBvbiBhbiBvYmplY3QgZnJvbSBhIHBhdGhcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZyB8IEFycmF5fSBwYXRoXG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbmZ1bmN0aW9uIHNldFBhdGgob2JqLCBwYXRoLCB2YWwpIHtcbiAgdmFyIG9yaWdpbmFsID0gb2JqO1xuICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgcGF0aCA9IHBhcnNlKHBhdGgpO1xuICB9XG4gIGlmICghcGF0aCB8fCAhaXNPYmplY3Qob2JqKSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB2YXIgbGFzdCwga2V5O1xuICBmb3IgKHZhciBpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgbGFzdCA9IG9iajtcbiAgICBrZXkgPSBwYXRoW2ldO1xuICAgIGlmIChrZXkuY2hhckF0KDApID09PSAnKicpIHtcbiAgICAgIGtleSA9IHBhcnNlRXhwcmVzc2lvbihrZXkuc2xpY2UoMSkpLmdldC5jYWxsKG9yaWdpbmFsLCBvcmlnaW5hbCk7XG4gICAgfVxuICAgIGlmIChpIDwgbCAtIDEpIHtcbiAgICAgIG9iaiA9IG9ialtrZXldO1xuICAgICAgaWYgKCFpc09iamVjdChvYmopKSB7XG4gICAgICAgIG9iaiA9IHt9O1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBsYXN0Ll9pc1Z1ZSkge1xuICAgICAgICAgIHdhcm5Ob25FeGlzdGVudChwYXRoLCBsYXN0KTtcbiAgICAgICAgfVxuICAgICAgICBzZXQobGFzdCwga2V5LCBvYmopO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoaXNBcnJheShvYmopKSB7XG4gICAgICAgIG9iai4kc2V0KGtleSwgdmFsKTtcbiAgICAgIH0gZWxzZSBpZiAoa2V5IGluIG9iaikge1xuICAgICAgICBvYmpba2V5XSA9IHZhbDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9iai5faXNWdWUpIHtcbiAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgb2JqKTtcbiAgICAgICAgfVxuICAgICAgICBzZXQob2JqLCBrZXksIHZhbCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG52YXIgcGF0aCA9IE9iamVjdC5mcmVlemUoe1xuICBwYXJzZVBhdGg6IHBhcnNlUGF0aCxcbiAgZ2V0UGF0aDogZ2V0UGF0aCxcbiAgc2V0UGF0aDogc2V0UGF0aFxufSk7XG5cbnZhciBleHByZXNzaW9uQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cbnZhciBhbGxvd2VkS2V5d29yZHMgPSAnTWF0aCxEYXRlLHRoaXMsdHJ1ZSxmYWxzZSxudWxsLHVuZGVmaW5lZCxJbmZpbml0eSxOYU4sJyArICdpc05hTixpc0Zpbml0ZSxkZWNvZGVVUkksZGVjb2RlVVJJQ29tcG9uZW50LGVuY29kZVVSSSwnICsgJ2VuY29kZVVSSUNvbXBvbmVudCxwYXJzZUludCxwYXJzZUZsb2F0JztcbnZhciBhbGxvd2VkS2V5d29yZHNSRSA9IG5ldyBSZWdFeHAoJ14oJyArIGFsbG93ZWRLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblxuLy8ga2V5d29yZHMgdGhhdCBkb24ndCBtYWtlIHNlbnNlIGluc2lkZSBleHByZXNzaW9uc1xudmFyIGltcHJvcGVyS2V5d29yZHMgPSAnYnJlYWssY2FzZSxjbGFzcyxjYXRjaCxjb25zdCxjb250aW51ZSxkZWJ1Z2dlcixkZWZhdWx0LCcgKyAnZGVsZXRlLGRvLGVsc2UsZXhwb3J0LGV4dGVuZHMsZmluYWxseSxmb3IsZnVuY3Rpb24saWYsJyArICdpbXBvcnQsaW4saW5zdGFuY2VvZixsZXQscmV0dXJuLHN1cGVyLHN3aXRjaCx0aHJvdyx0cnksJyArICd2YXIsd2hpbGUsd2l0aCx5aWVsZCxlbnVtLGF3YWl0LGltcGxlbWVudHMscGFja2FnZSwnICsgJ3Byb3RlY3RlZCxzdGF0aWMsaW50ZXJmYWNlLHByaXZhdGUscHVibGljJztcbnZhciBpbXByb3BlcktleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBpbXByb3BlcktleXdvcmRzLnJlcGxhY2UoLywvZywgJ1xcXFxifCcpICsgJ1xcXFxiKScpO1xuXG52YXIgd3NSRSA9IC9cXHMvZztcbnZhciBuZXdsaW5lUkUgPSAvXFxuL2c7XG52YXIgc2F2ZVJFID0gL1tcXHssXVxccypbXFx3XFwkX10rXFxzKjp8KCcoPzpbXidcXFxcXXxcXFxcLikqJ3xcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8YCg/OlteYFxcXFxdfFxcXFwuKSpcXCRcXHt8XFx9KD86W15gXFxcXF18XFxcXC4pKmB8YCg/OlteYFxcXFxdfFxcXFwuKSpgKXxuZXcgfHR5cGVvZiB8dm9pZCAvZztcbnZhciByZXN0b3JlUkUgPSAvXCIoXFxkKylcIi9nO1xudmFyIHBhdGhUZXN0UkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKD86XFwuW0EtWmEtel8kXVtcXHckXSp8XFxbJy4qPydcXF18XFxbXCIuKj9cIlxcXXxcXFtcXGQrXFxdfFxcW1tBLVphLXpfJF1bXFx3JF0qXFxdKSokLztcbnZhciBpZGVudFJFID0gL1teXFx3JFxcLl0oPzpbQS1aYS16XyRdW1xcdyRdKikvZztcbnZhciBsaXRlcmFsVmFsdWVSRSQxID0gL14oPzp0cnVlfGZhbHNlfG51bGx8dW5kZWZpbmVkfEluZmluaXR5fE5hTikkLztcblxuZnVuY3Rpb24gbm9vcCgpIHt9XG5cbi8qKlxuICogU2F2ZSAvIFJld3JpdGUgLyBSZXN0b3JlXG4gKlxuICogV2hlbiByZXdyaXRpbmcgcGF0aHMgZm91bmQgaW4gYW4gZXhwcmVzc2lvbiwgaXQgaXNcbiAqIHBvc3NpYmxlIGZvciB0aGUgc2FtZSBsZXR0ZXIgc2VxdWVuY2VzIHRvIGJlIGZvdW5kIGluXG4gKiBzdHJpbmdzIGFuZCBPYmplY3QgbGl0ZXJhbCBwcm9wZXJ0eSBrZXlzLiBUaGVyZWZvcmUgd2VcbiAqIHJlbW92ZSBhbmQgc3RvcmUgdGhlc2UgcGFydHMgaW4gYSB0ZW1wb3JhcnkgYXJyYXksIGFuZFxuICogcmVzdG9yZSB0aGVtIGFmdGVyIHRoZSBwYXRoIHJld3JpdGUuXG4gKi9cblxudmFyIHNhdmVkID0gW107XG5cbi8qKlxuICogU2F2ZSByZXBsYWNlclxuICpcbiAqIFRoZSBzYXZlIHJlZ2V4IGNhbiBtYXRjaCB0d28gcG9zc2libGUgY2FzZXM6XG4gKiAxLiBBbiBvcGVuaW5nIG9iamVjdCBsaXRlcmFsXG4gKiAyLiBBIHN0cmluZ1xuICogSWYgbWF0Y2hlZCBhcyBhIHBsYWluIHN0cmluZywgd2UgbmVlZCB0byBlc2NhcGUgaXRzXG4gKiBuZXdsaW5lcywgc2luY2UgdGhlIHN0cmluZyBuZWVkcyB0byBiZSBwcmVzZXJ2ZWQgd2hlblxuICogZ2VuZXJhdGluZyB0aGUgZnVuY3Rpb24gYm9keS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gaXNTdHJpbmcgLSBzdHIgaWYgbWF0Y2hlZCBhcyBhIHN0cmluZ1xuICogQHJldHVybiB7U3RyaW5nfSAtIHBsYWNlaG9sZGVyIHdpdGggaW5kZXhcbiAqL1xuXG5mdW5jdGlvbiBzYXZlKHN0ciwgaXNTdHJpbmcpIHtcbiAgdmFyIGkgPSBzYXZlZC5sZW5ndGg7XG4gIHNhdmVkW2ldID0gaXNTdHJpbmcgPyBzdHIucmVwbGFjZShuZXdsaW5lUkUsICdcXFxcbicpIDogc3RyO1xuICByZXR1cm4gJ1wiJyArIGkgKyAnXCInO1xufVxuXG4vKipcbiAqIFBhdGggcmV3cml0ZSByZXBsYWNlclxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSByYXdcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiByZXdyaXRlKHJhdykge1xuICB2YXIgYyA9IHJhdy5jaGFyQXQoMCk7XG4gIHZhciBwYXRoID0gcmF3LnNsaWNlKDEpO1xuICBpZiAoYWxsb3dlZEtleXdvcmRzUkUudGVzdChwYXRoKSkge1xuICAgIHJldHVybiByYXc7XG4gIH0gZWxzZSB7XG4gICAgcGF0aCA9IHBhdGguaW5kZXhPZignXCInKSA+IC0xID8gcGF0aC5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSkgOiBwYXRoO1xuICAgIHJldHVybiBjICsgJ3Njb3BlLicgKyBwYXRoO1xuICB9XG59XG5cbi8qKlxuICogUmVzdG9yZSByZXBsYWNlclxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEBwYXJhbSB7U3RyaW5nfSBpIC0gbWF0Y2hlZCBzYXZlIGluZGV4XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcmVzdG9yZShzdHIsIGkpIHtcbiAgcmV0dXJuIHNhdmVkW2ldO1xufVxuXG4vKipcbiAqIFJld3JpdGUgYW4gZXhwcmVzc2lvbiwgcHJlZml4aW5nIGFsbCBwYXRoIGFjY2Vzc29ycyB3aXRoXG4gKiBgc2NvcGUuYCBhbmQgZ2VuZXJhdGUgZ2V0dGVyL3NldHRlciBmdW5jdGlvbnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZUdldHRlcihleHApIHtcbiAgaWYgKGltcHJvcGVyS2V5d29yZHNSRS50ZXN0KGV4cCkpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0F2b2lkIHVzaW5nIHJlc2VydmVkIGtleXdvcmRzIGluIGV4cHJlc3Npb246ICcgKyBleHApO1xuICB9XG4gIC8vIHJlc2V0IHN0YXRlXG4gIHNhdmVkLmxlbmd0aCA9IDA7XG4gIC8vIHNhdmUgc3RyaW5ncyBhbmQgb2JqZWN0IGxpdGVyYWwga2V5c1xuICB2YXIgYm9keSA9IGV4cC5yZXBsYWNlKHNhdmVSRSwgc2F2ZSkucmVwbGFjZSh3c1JFLCAnJyk7XG4gIC8vIHJld3JpdGUgYWxsIHBhdGhzXG4gIC8vIHBhZCAxIHNwYWNlIGhlcmUgYmVjYXVzZSB0aGUgcmVnZXggbWF0Y2hlcyAxIGV4dHJhIGNoYXJcbiAgYm9keSA9ICgnICcgKyBib2R5KS5yZXBsYWNlKGlkZW50UkUsIHJld3JpdGUpLnJlcGxhY2UocmVzdG9yZVJFLCByZXN0b3JlKTtcbiAgcmV0dXJuIG1ha2VHZXR0ZXJGbihib2R5KTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGdldHRlciBmdW5jdGlvbi4gUmVxdWlyZXMgZXZhbC5cbiAqXG4gKiBXZSBpc29sYXRlIHRoZSB0cnkvY2F0Y2ggc28gaXQgZG9lc24ndCBhZmZlY3QgdGhlXG4gKiBvcHRpbWl6YXRpb24gb2YgdGhlIHBhcnNlIGZ1bmN0aW9uIHdoZW4gaXQgaXMgbm90IGNhbGxlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYm9keVxuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIG1ha2VHZXR0ZXJGbihib2R5KSB7XG4gIHRyeSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdzY29wZScsICdyZXR1cm4gJyArIGJvZHkgKyAnOycpO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChlLnRvU3RyaW5nKCkubWF0Y2goL3Vuc2FmZS1ldmFsfENTUC8pKSB7XG4gICAgICAgIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdGhlIGRlZmF1bHQgYnVpbGQgb2YgVnVlLmpzIGluIGFuIGVudmlyb25tZW50ICcgKyAnd2l0aCBDb250ZW50IFNlY3VyaXR5IFBvbGljeSB0aGF0IHByb2hpYml0cyB1bnNhZmUtZXZhbC4gJyArICdVc2UgdGhlIENTUC1jb21wbGlhbnQgYnVpbGQgaW5zdGVhZDogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2luc3RhbGxhdGlvbi5odG1sI0NTUC1jb21wbGlhbnQtYnVpbGQnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdhcm4oJ0ludmFsaWQgZXhwcmVzc2lvbi4gJyArICdHZW5lcmF0ZWQgZnVuY3Rpb24gYm9keTogJyArIGJvZHkpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm9vcDtcbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgYSBzZXR0ZXIgZnVuY3Rpb24gZm9yIHRoZSBleHByZXNzaW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlU2V0dGVyKGV4cCkge1xuICB2YXIgcGF0aCA9IHBhcnNlUGF0aChleHApO1xuICBpZiAocGF0aCkge1xuICAgIHJldHVybiBmdW5jdGlvbiAoc2NvcGUsIHZhbCkge1xuICAgICAgc2V0UGF0aChzY29wZSwgcGF0aCwgdmFsKTtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBzZXR0ZXIgZXhwcmVzc2lvbjogJyArIGV4cCk7XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBhbiBleHByZXNzaW9uIGludG8gcmUtd3JpdHRlbiBnZXR0ZXIvc2V0dGVycy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcGFyYW0ge0Jvb2xlYW59IG5lZWRTZXRcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlRXhwcmVzc2lvbihleHAsIG5lZWRTZXQpIHtcbiAgZXhwID0gZXhwLnRyaW0oKTtcbiAgLy8gdHJ5IGNhY2hlXG4gIHZhciBoaXQgPSBleHByZXNzaW9uQ2FjaGUuZ2V0KGV4cCk7XG4gIGlmIChoaXQpIHtcbiAgICBpZiAobmVlZFNldCAmJiAhaGl0LnNldCkge1xuICAgICAgaGl0LnNldCA9IGNvbXBpbGVTZXR0ZXIoaGl0LmV4cCk7XG4gICAgfVxuICAgIHJldHVybiBoaXQ7XG4gIH1cbiAgdmFyIHJlcyA9IHsgZXhwOiBleHAgfTtcbiAgcmVzLmdldCA9IGlzU2ltcGxlUGF0aChleHApICYmIGV4cC5pbmRleE9mKCdbJykgPCAwXG4gIC8vIG9wdGltaXplZCBzdXBlciBzaW1wbGUgZ2V0dGVyXG4gID8gbWFrZUdldHRlckZuKCdzY29wZS4nICsgZXhwKVxuICAvLyBkeW5hbWljIGdldHRlclxuICA6IGNvbXBpbGVHZXR0ZXIoZXhwKTtcbiAgaWYgKG5lZWRTZXQpIHtcbiAgICByZXMuc2V0ID0gY29tcGlsZVNldHRlcihleHApO1xuICB9XG4gIGV4cHJlc3Npb25DYWNoZS5wdXQoZXhwLCByZXMpO1xuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBzaW1wbGUgcGF0aC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzU2ltcGxlUGF0aChleHApIHtcbiAgcmV0dXJuIHBhdGhUZXN0UkUudGVzdChleHApICYmXG4gIC8vIGRvbid0IHRyZWF0IGxpdGVyYWwgdmFsdWVzIGFzIHBhdGhzXG4gICFsaXRlcmFsVmFsdWVSRSQxLnRlc3QoZXhwKSAmJlxuICAvLyBNYXRoIGNvbnN0YW50cyBlLmcuIE1hdGguUEksIE1hdGguRSBldGMuXG4gIGV4cC5zbGljZSgwLCA1KSAhPT0gJ01hdGguJztcbn1cblxudmFyIGV4cHJlc3Npb24gPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VFeHByZXNzaW9uOiBwYXJzZUV4cHJlc3Npb24sXG4gIGlzU2ltcGxlUGF0aDogaXNTaW1wbGVQYXRoXG59KTtcblxuLy8gd2UgaGF2ZSB0d28gc2VwYXJhdGUgcXVldWVzOiBvbmUgZm9yIGRpcmVjdGl2ZSB1cGRhdGVzXG4vLyBhbmQgb25lIGZvciB1c2VyIHdhdGNoZXIgcmVnaXN0ZXJlZCB2aWEgJHdhdGNoKCkuXG4vLyB3ZSB3YW50IHRvIGd1YXJhbnRlZSBkaXJlY3RpdmUgdXBkYXRlcyB0byBiZSBjYWxsZWRcbi8vIGJlZm9yZSB1c2VyIHdhdGNoZXJzIHNvIHRoYXQgd2hlbiB1c2VyIHdhdGNoZXJzIGFyZVxuLy8gdHJpZ2dlcmVkLCB0aGUgRE9NIHdvdWxkIGhhdmUgYWxyZWFkeSBiZWVuIGluIHVwZGF0ZWRcbi8vIHN0YXRlLlxuXG52YXIgcXVldWUgPSBbXTtcbnZhciB1c2VyUXVldWUgPSBbXTtcbnZhciBoYXMgPSB7fTtcbnZhciBjaXJjdWxhciA9IHt9O1xudmFyIHdhaXRpbmcgPSBmYWxzZTtcblxuLyoqXG4gKiBSZXNldCB0aGUgYmF0Y2hlcidzIHN0YXRlLlxuICovXG5cbmZ1bmN0aW9uIHJlc2V0QmF0Y2hlclN0YXRlKCkge1xuICBxdWV1ZS5sZW5ndGggPSAwO1xuICB1c2VyUXVldWUubGVuZ3RoID0gMDtcbiAgaGFzID0ge307XG4gIGNpcmN1bGFyID0ge307XG4gIHdhaXRpbmcgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBGbHVzaCBib3RoIHF1ZXVlcyBhbmQgcnVuIHRoZSB3YXRjaGVycy5cbiAqL1xuXG5mdW5jdGlvbiBmbHVzaEJhdGNoZXJRdWV1ZSgpIHtcbiAgdmFyIF9hZ2FpbiA9IHRydWU7XG5cbiAgX2Z1bmN0aW9uOiB3aGlsZSAoX2FnYWluKSB7XG4gICAgX2FnYWluID0gZmFsc2U7XG5cbiAgICBydW5CYXRjaGVyUXVldWUocXVldWUpO1xuICAgIHJ1bkJhdGNoZXJRdWV1ZSh1c2VyUXVldWUpO1xuICAgIC8vIHVzZXIgd2F0Y2hlcnMgdHJpZ2dlcmVkIG1vcmUgd2F0Y2hlcnMsXG4gICAgLy8ga2VlcCBmbHVzaGluZyB1bnRpbCBpdCBkZXBsZXRlc1xuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgIF9hZ2FpbiA9IHRydWU7XG4gICAgICBjb250aW51ZSBfZnVuY3Rpb247XG4gICAgfVxuICAgIC8vIGRldiB0b29sIGhvb2tcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoZGV2dG9vbHMgJiYgY29uZmlnLmRldnRvb2xzKSB7XG4gICAgICBkZXZ0b29scy5lbWl0KCdmbHVzaCcpO1xuICAgIH1cbiAgICByZXNldEJhdGNoZXJTdGF0ZSgpO1xuICB9XG59XG5cbi8qKlxuICogUnVuIHRoZSB3YXRjaGVycyBpbiBhIHNpbmdsZSBxdWV1ZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBxdWV1ZVxuICovXG5cbmZ1bmN0aW9uIHJ1bkJhdGNoZXJRdWV1ZShxdWV1ZSkge1xuICAvLyBkbyBub3QgY2FjaGUgbGVuZ3RoIGJlY2F1c2UgbW9yZSB3YXRjaGVycyBtaWdodCBiZSBwdXNoZWRcbiAgLy8gYXMgd2UgcnVuIGV4aXN0aW5nIHdhdGNoZXJzXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUubGVuZ3RoOyBpKyspIHtcbiAgICB2YXIgd2F0Y2hlciA9IHF1ZXVlW2ldO1xuICAgIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG4gICAgaGFzW2lkXSA9IG51bGw7XG4gICAgd2F0Y2hlci5ydW4oKTtcbiAgICAvLyBpbiBkZXYgYnVpbGQsIGNoZWNrIGFuZCBzdG9wIGNpcmN1bGFyIHVwZGF0ZXMuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaGFzW2lkXSAhPSBudWxsKSB7XG4gICAgICBjaXJjdWxhcltpZF0gPSAoY2lyY3VsYXJbaWRdIHx8IDApICsgMTtcbiAgICAgIGlmIChjaXJjdWxhcltpZF0gPiBjb25maWcuX21heFVwZGF0ZUNvdW50KSB7XG4gICAgICAgIHdhcm4oJ1lvdSBtYXkgaGF2ZSBhbiBpbmZpbml0ZSB1cGRhdGUgbG9vcCBmb3Igd2F0Y2hlciAnICsgJ3dpdGggZXhwcmVzc2lvbiBcIicgKyB3YXRjaGVyLmV4cHJlc3Npb24gKyAnXCInLCB3YXRjaGVyLnZtKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHF1ZXVlLmxlbmd0aCA9IDA7XG59XG5cbi8qKlxuICogUHVzaCBhIHdhdGNoZXIgaW50byB0aGUgd2F0Y2hlciBxdWV1ZS5cbiAqIEpvYnMgd2l0aCBkdXBsaWNhdGUgSURzIHdpbGwgYmUgc2tpcHBlZCB1bmxlc3MgaXQnc1xuICogcHVzaGVkIHdoZW4gdGhlIHF1ZXVlIGlzIGJlaW5nIGZsdXNoZWQuXG4gKlxuICogQHBhcmFtIHtXYXRjaGVyfSB3YXRjaGVyXG4gKiAgIHByb3BlcnRpZXM6XG4gKiAgIC0ge051bWJlcn0gaWRcbiAqICAgLSB7RnVuY3Rpb259IHJ1blxuICovXG5cbmZ1bmN0aW9uIHB1c2hXYXRjaGVyKHdhdGNoZXIpIHtcbiAgdmFyIGlkID0gd2F0Y2hlci5pZDtcbiAgaWYgKGhhc1tpZF0gPT0gbnVsbCkge1xuICAgIC8vIHB1c2ggd2F0Y2hlciBpbnRvIGFwcHJvcHJpYXRlIHF1ZXVlXG4gICAgdmFyIHEgPSB3YXRjaGVyLnVzZXIgPyB1c2VyUXVldWUgOiBxdWV1ZTtcbiAgICBoYXNbaWRdID0gcS5sZW5ndGg7XG4gICAgcS5wdXNoKHdhdGNoZXIpO1xuICAgIC8vIHF1ZXVlIHRoZSBmbHVzaFxuICAgIGlmICghd2FpdGluZykge1xuICAgICAgd2FpdGluZyA9IHRydWU7XG4gICAgICBuZXh0VGljayhmbHVzaEJhdGNoZXJRdWV1ZSk7XG4gICAgfVxuICB9XG59XG5cbnZhciB1aWQkMiA9IDA7XG5cbi8qKlxuICogQSB3YXRjaGVyIHBhcnNlcyBhbiBleHByZXNzaW9uLCBjb2xsZWN0cyBkZXBlbmRlbmNpZXMsXG4gKiBhbmQgZmlyZXMgY2FsbGJhY2sgd2hlbiB0aGUgZXhwcmVzc2lvbiB2YWx1ZSBjaGFuZ2VzLlxuICogVGhpcyBpcyB1c2VkIGZvciBib3RoIHRoZSAkd2F0Y2goKSBhcGkgYW5kIGRpcmVjdGl2ZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gZXhwT3JGblxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiAgICAgICAgICAgICAgICAgLSB7QXJyYXl9IGZpbHRlcnNcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSB0d29XYXlcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBkZWVwXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdXNlclxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHN5bmNcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsYXp5XG4gKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFtwcmVQcm9jZXNzXVxuICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcG9zdFByb2Nlc3NdXG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcbiAgLy8gbWl4IGluIG9wdGlvbnNcbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBleHRlbmQodGhpcywgb3B0aW9ucyk7XG4gIH1cbiAgdmFyIGlzRm4gPSB0eXBlb2YgZXhwT3JGbiA9PT0gJ2Z1bmN0aW9uJztcbiAgdGhpcy52bSA9IHZtO1xuICB2bS5fd2F0Y2hlcnMucHVzaCh0aGlzKTtcbiAgdGhpcy5leHByZXNzaW9uID0gZXhwT3JGbjtcbiAgdGhpcy5jYiA9IGNiO1xuICB0aGlzLmlkID0gKyt1aWQkMjsgLy8gdWlkIGZvciBiYXRjaGluZ1xuICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gIHRoaXMuZGlydHkgPSB0aGlzLmxhenk7IC8vIGZvciBsYXp5IHdhdGNoZXJzXG4gIHRoaXMuZGVwcyA9IFtdO1xuICB0aGlzLm5ld0RlcHMgPSBbXTtcbiAgdGhpcy5kZXBJZHMgPSBuZXcgX1NldCgpO1xuICB0aGlzLm5ld0RlcElkcyA9IG5ldyBfU2V0KCk7XG4gIHRoaXMucHJldkVycm9yID0gbnVsbDsgLy8gZm9yIGFzeW5jIGVycm9yIHN0YWNrc1xuICAvLyBwYXJzZSBleHByZXNzaW9uIGZvciBnZXR0ZXIvc2V0dGVyXG4gIGlmIChpc0ZuKSB7XG4gICAgdGhpcy5nZXR0ZXIgPSBleHBPckZuO1xuICAgIHRoaXMuc2V0dGVyID0gdW5kZWZpbmVkO1xuICB9IGVsc2Uge1xuICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwT3JGbiwgdGhpcy50d29XYXkpO1xuICAgIHRoaXMuZ2V0dGVyID0gcmVzLmdldDtcbiAgICB0aGlzLnNldHRlciA9IHJlcy5zZXQ7XG4gIH1cbiAgdGhpcy52YWx1ZSA9IHRoaXMubGF6eSA/IHVuZGVmaW5lZCA6IHRoaXMuZ2V0KCk7XG4gIC8vIHN0YXRlIGZvciBhdm9pZGluZyBmYWxzZSB0cmlnZ2VycyBmb3IgZGVlcCBhbmQgQXJyYXlcbiAgLy8gd2F0Y2hlcnMgZHVyaW5nIHZtLl9kaWdlc3QoKVxuICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xufVxuXG4vKipcbiAqIEV2YWx1YXRlIHRoZSBnZXR0ZXIsIGFuZCByZS1jb2xsZWN0IGRlcGVuZGVuY2llcy5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuYmVmb3JlR2V0KCk7XG4gIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcbiAgdmFyIHZhbHVlO1xuICB0cnkge1xuICAgIHZhbHVlID0gdGhpcy5nZXR0ZXIuY2FsbChzY29wZSwgc2NvcGUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG4gICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgZXhwcmVzc2lvbiAnICsgJ1wiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIjogJyArIGUudG9TdHJpbmcoKSwgdGhpcy52bSk7XG4gICAgfVxuICB9XG4gIC8vIFwidG91Y2hcIiBldmVyeSBwcm9wZXJ0eSBzbyB0aGV5IGFyZSBhbGwgdHJhY2tlZCBhc1xuICAvLyBkZXBlbmRlbmNpZXMgZm9yIGRlZXAgd2F0Y2hpbmdcbiAgaWYgKHRoaXMuZGVlcCkge1xuICAgIHRyYXZlcnNlKHZhbHVlKTtcbiAgfVxuICBpZiAodGhpcy5wcmVQcm9jZXNzKSB7XG4gICAgdmFsdWUgPSB0aGlzLnByZVByb2Nlc3ModmFsdWUpO1xuICB9XG4gIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIG51bGwsIHRoaXMuZmlsdGVycywgZmFsc2UpO1xuICB9XG4gIGlmICh0aGlzLnBvc3RQcm9jZXNzKSB7XG4gICAgdmFsdWUgPSB0aGlzLnBvc3RQcm9jZXNzKHZhbHVlKTtcbiAgfVxuICB0aGlzLmFmdGVyR2V0KCk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuc2V0ID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gIHZhciBzY29wZSA9IHRoaXMuc2NvcGUgfHwgdGhpcy52bTtcbiAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgIHZhbHVlID0gc2NvcGUuX2FwcGx5RmlsdGVycyh2YWx1ZSwgdGhpcy52YWx1ZSwgdGhpcy5maWx0ZXJzLCB0cnVlKTtcbiAgfVxuICB0cnkge1xuICAgIHRoaXMuc2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlLCB2YWx1ZSk7XG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb25maWcud2FybkV4cHJlc3Npb25FcnJvcnMpIHtcbiAgICAgIHdhcm4oJ0Vycm9yIHdoZW4gZXZhbHVhdGluZyBzZXR0ZXIgJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuICAgIH1cbiAgfVxuICAvLyB0d28td2F5IHN5bmMgZm9yIHYtZm9yIGFsaWFzXG4gIHZhciBmb3JDb250ZXh0ID0gc2NvcGUuJGZvckNvbnRleHQ7XG4gIGlmIChmb3JDb250ZXh0ICYmIGZvckNvbnRleHQuYWxpYXMgPT09IHRoaXMuZXhwcmVzc2lvbikge1xuICAgIGlmIChmb3JDb250ZXh0LmZpbHRlcnMpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSXQgc2VlbXMgeW91IGFyZSB1c2luZyB0d28td2F5IGJpbmRpbmcgb24gJyArICdhIHYtZm9yIGFsaWFzICgnICsgdGhpcy5leHByZXNzaW9uICsgJyksIGFuZCB0aGUgJyArICd2LWZvciBoYXMgZmlsdGVycy4gVGhpcyB3aWxsIG5vdCB3b3JrIHByb3Blcmx5LiAnICsgJ0VpdGhlciByZW1vdmUgdGhlIGZpbHRlcnMgb3IgdXNlIGFuIGFycmF5IG9mICcgKyAnb2JqZWN0cyBhbmQgYmluZCB0byBvYmplY3QgcHJvcGVydGllcyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBmb3JDb250ZXh0Ll93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2NvcGUuJGtleSkge1xuICAgICAgICAvLyBvcmlnaW5hbCBpcyBhbiBvYmplY3RcbiAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZVtzY29wZS4ka2V5XSA9IHZhbHVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZm9yQ29udGV4dC5yYXdWYWx1ZS4kc2V0KHNjb3BlLiRpbmRleCwgdmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59O1xuXG4vKipcbiAqIFByZXBhcmUgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5iZWZvcmVHZXQgPSBmdW5jdGlvbiAoKSB7XG4gIERlcC50YXJnZXQgPSB0aGlzO1xufTtcblxuLyoqXG4gKiBBZGQgYSBkZXBlbmRlbmN5IHRvIHRoaXMgZGlyZWN0aXZlLlxuICpcbiAqIEBwYXJhbSB7RGVwfSBkZXBcbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5hZGREZXAgPSBmdW5jdGlvbiAoZGVwKSB7XG4gIHZhciBpZCA9IGRlcC5pZDtcbiAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoaWQpKSB7XG4gICAgdGhpcy5uZXdEZXBJZHMuYWRkKGlkKTtcbiAgICB0aGlzLm5ld0RlcHMucHVzaChkZXApO1xuICAgIGlmICghdGhpcy5kZXBJZHMuaGFzKGlkKSkge1xuICAgICAgZGVwLmFkZFN1Yih0aGlzKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQ2xlYW4gdXAgZm9yIGRlcGVuZGVuY3kgY29sbGVjdGlvbi5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5hZnRlckdldCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldCA9IG51bGw7XG4gIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHZhciBkZXAgPSB0aGlzLmRlcHNbaV07XG4gICAgaWYgKCF0aGlzLm5ld0RlcElkcy5oYXMoZGVwLmlkKSkge1xuICAgICAgZGVwLnJlbW92ZVN1Yih0aGlzKTtcbiAgICB9XG4gIH1cbiAgdmFyIHRtcCA9IHRoaXMuZGVwSWRzO1xuICB0aGlzLmRlcElkcyA9IHRoaXMubmV3RGVwSWRzO1xuICB0aGlzLm5ld0RlcElkcyA9IHRtcDtcbiAgdGhpcy5uZXdEZXBJZHMuY2xlYXIoKTtcbiAgdG1wID0gdGhpcy5kZXBzO1xuICB0aGlzLmRlcHMgPSB0aGlzLm5ld0RlcHM7XG4gIHRoaXMubmV3RGVwcyA9IHRtcDtcbiAgdGhpcy5uZXdEZXBzLmxlbmd0aCA9IDA7XG59O1xuXG4vKipcbiAqIFN1YnNjcmliZXIgaW50ZXJmYWNlLlxuICogV2lsbCBiZSBjYWxsZWQgd2hlbiBhIGRlcGVuZGVuY3kgY2hhbmdlcy5cbiAqXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNoYWxsb3dcbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoc2hhbGxvdykge1xuICBpZiAodGhpcy5sYXp5KSB7XG4gICAgdGhpcy5kaXJ0eSA9IHRydWU7XG4gIH0gZWxzZSBpZiAodGhpcy5zeW5jIHx8ICFjb25maWcuYXN5bmMpIHtcbiAgICB0aGlzLnJ1bigpO1xuICB9IGVsc2Uge1xuICAgIC8vIGlmIHF1ZXVlZCwgb25seSBvdmVyd3JpdGUgc2hhbGxvdyB3aXRoIG5vbi1zaGFsbG93LFxuICAgIC8vIGJ1dCBub3QgdGhlIG90aGVyIHdheSBhcm91bmQuXG4gICAgdGhpcy5zaGFsbG93ID0gdGhpcy5xdWV1ZWQgPyBzaGFsbG93ID8gdGhpcy5zaGFsbG93IDogZmFsc2UgOiAhIXNoYWxsb3c7XG4gICAgdGhpcy5xdWV1ZWQgPSB0cnVlO1xuICAgIC8vIHJlY29yZCBiZWZvcmUtcHVzaCBlcnJvciBzdGFjayBpbiBkZWJ1ZyBtb2RlXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnKSB7XG4gICAgICB0aGlzLnByZXZFcnJvciA9IG5ldyBFcnJvcignW3Z1ZV0gYXN5bmMgc3RhY2sgdHJhY2UnKTtcbiAgICB9XG4gICAgcHVzaFdhdGNoZXIodGhpcyk7XG4gIH1cbn07XG5cbi8qKlxuICogQmF0Y2hlciBqb2IgaW50ZXJmYWNlLlxuICogV2lsbCBiZSBjYWxsZWQgYnkgdGhlIGJhdGNoZXIuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICB2YXIgdmFsdWUgPSB0aGlzLmdldCgpO1xuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy52YWx1ZSB8fFxuICAgIC8vIERlZXAgd2F0Y2hlcnMgYW5kIHdhdGNoZXJzIG9uIE9iamVjdC9BcnJheXMgc2hvdWxkIGZpcmUgZXZlblxuICAgIC8vIHdoZW4gdGhlIHZhbHVlIGlzIHRoZSBzYW1lLCBiZWNhdXNlIHRoZSB2YWx1ZSBtYXlcbiAgICAvLyBoYXZlIG11dGF0ZWQ7IGJ1dCBvbmx5IGRvIHNvIGlmIHRoaXMgaXMgYVxuICAgIC8vIG5vbi1zaGFsbG93IHVwZGF0ZSAoY2F1c2VkIGJ5IGEgdm0gZGlnZXN0KS5cbiAgICAoaXNPYmplY3QodmFsdWUpIHx8IHRoaXMuZGVlcCkgJiYgIXRoaXMuc2hhbGxvdykge1xuICAgICAgLy8gc2V0IG5ldyB2YWx1ZVxuICAgICAgdmFyIG9sZFZhbHVlID0gdGhpcy52YWx1ZTtcbiAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgICAgIC8vIGluIGRlYnVnICsgYXN5bmMgbW9kZSwgd2hlbiBhIHdhdGNoZXIgY2FsbGJhY2tzXG4gICAgICAvLyB0aHJvd3MsIHdlIGFsc28gdGhyb3cgdGhlIHNhdmVkIGJlZm9yZS1wdXNoIGVycm9yXG4gICAgICAvLyBzbyB0aGUgZnVsbCBjcm9zcy10aWNrIHN0YWNrIHRyYWNlIGlzIGF2YWlsYWJsZS5cbiAgICAgIHZhciBwcmV2RXJyb3IgPSB0aGlzLnByZXZFcnJvcjtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLmRlYnVnICYmIHByZXZFcnJvcikge1xuICAgICAgICB0aGlzLnByZXZFcnJvciA9IG51bGw7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB0aHJvdyBwcmV2RXJyb3I7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jYi5jYWxsKHRoaXMudm0sIHZhbHVlLCBvbGRWYWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucXVldWVkID0gdGhpcy5zaGFsbG93ID0gZmFsc2U7XG4gIH1cbn07XG5cbi8qKlxuICogRXZhbHVhdGUgdGhlIHZhbHVlIG9mIHRoZSB3YXRjaGVyLlxuICogVGhpcyBvbmx5IGdldHMgY2FsbGVkIGZvciBsYXp5IHdhdGNoZXJzLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmV2YWx1YXRlID0gZnVuY3Rpb24gKCkge1xuICAvLyBhdm9pZCBvdmVyd3JpdGluZyBhbm90aGVyIHdhdGNoZXIgdGhhdCBpcyBiZWluZ1xuICAvLyBjb2xsZWN0ZWQuXG4gIHZhciBjdXJyZW50ID0gRGVwLnRhcmdldDtcbiAgdGhpcy52YWx1ZSA9IHRoaXMuZ2V0KCk7XG4gIHRoaXMuZGlydHkgPSBmYWxzZTtcbiAgRGVwLnRhcmdldCA9IGN1cnJlbnQ7XG59O1xuXG4vKipcbiAqIERlcGVuZCBvbiBhbGwgZGVwcyBjb2xsZWN0ZWQgYnkgdGhpcyB3YXRjaGVyLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGkgPSB0aGlzLmRlcHMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgdGhpcy5kZXBzW2ldLmRlcGVuZCgpO1xuICB9XG59O1xuXG4vKipcbiAqIFJlbW92ZSBzZWxmIGZyb20gYWxsIGRlcGVuZGVuY2llcycgc3ViY3JpYmVyIGxpc3QuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUudGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLmFjdGl2ZSkge1xuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gdm0ncyB3YXRjaGVyIGxpc3RcbiAgICAvLyB0aGlzIGlzIGEgc29tZXdoYXQgZXhwZW5zaXZlIG9wZXJhdGlvbiBzbyB3ZSBza2lwIGl0XG4gICAgLy8gaWYgdGhlIHZtIGlzIGJlaW5nIGRlc3Ryb3llZCBvciBpcyBwZXJmb3JtaW5nIGEgdi1mb3JcbiAgICAvLyByZS1yZW5kZXIgKHRoZSB3YXRjaGVyIGxpc3QgaXMgdGhlbiBmaWx0ZXJlZCBieSB2LWZvcikuXG4gICAgaWYgKCF0aGlzLnZtLl9pc0JlaW5nRGVzdHJveWVkICYmICF0aGlzLnZtLl92Rm9yUmVtb3ZpbmcpIHtcbiAgICAgIHRoaXMudm0uX3dhdGNoZXJzLiRyZW1vdmUodGhpcyk7XG4gICAgfVxuICAgIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0aGlzLmRlcHNbaV0ucmVtb3ZlU3ViKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMudm0gPSB0aGlzLmNiID0gdGhpcy52YWx1ZSA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogUmVjcnVzaXZlbHkgdHJhdmVyc2UgYW4gb2JqZWN0IHRvIGV2b2tlIGFsbCBjb252ZXJ0ZWRcbiAqIGdldHRlcnMsIHNvIHRoYXQgZXZlcnkgbmVzdGVkIHByb3BlcnR5IGluc2lkZSB0aGUgb2JqZWN0XG4gKiBpcyBjb2xsZWN0ZWQgYXMgYSBcImRlZXBcIiBkZXBlbmRlbmN5LlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxudmFyIHNlZW5PYmplY3RzID0gbmV3IF9TZXQoKTtcbmZ1bmN0aW9uIHRyYXZlcnNlKHZhbCwgc2Vlbikge1xuICB2YXIgaSA9IHVuZGVmaW5lZCxcbiAgICAgIGtleXMgPSB1bmRlZmluZWQ7XG4gIGlmICghc2Vlbikge1xuICAgIHNlZW4gPSBzZWVuT2JqZWN0cztcbiAgICBzZWVuLmNsZWFyKCk7XG4gIH1cbiAgdmFyIGlzQSA9IGlzQXJyYXkodmFsKTtcbiAgdmFyIGlzTyA9IGlzT2JqZWN0KHZhbCk7XG4gIGlmICgoaXNBIHx8IGlzTykgJiYgT2JqZWN0LmlzRXh0ZW5zaWJsZSh2YWwpKSB7XG4gICAgaWYgKHZhbC5fX29iX18pIHtcbiAgICAgIHZhciBkZXBJZCA9IHZhbC5fX29iX18uZGVwLmlkO1xuICAgICAgaWYgKHNlZW4uaGFzKGRlcElkKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWVuLmFkZChkZXBJZCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChpc0EpIHtcbiAgICAgIGkgPSB2YWwubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2ldLCBzZWVuKTtcbiAgICB9IGVsc2UgaWYgKGlzTykge1xuICAgICAga2V5cyA9IE9iamVjdC5rZXlzKHZhbCk7XG4gICAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB0cmF2ZXJzZSh2YWxba2V5c1tpXV0sIHNlZW4pO1xuICAgIH1cbiAgfVxufVxuXG52YXIgdGV4dCQxID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdGhpcy5hdHRyID0gdGhpcy5lbC5ub2RlVHlwZSA9PT0gMyA/ICdkYXRhJyA6ICd0ZXh0Q29udGVudCc7XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmVsW3RoaXMuYXR0cl0gPSBfdG9TdHJpbmcodmFsdWUpO1xuICB9XG59O1xuXG52YXIgdGVtcGxhdGVDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcbnZhciBpZFNlbGVjdG9yQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG5cbnZhciBtYXAgPSB7XG4gIGVmYXVsdDogWzAsICcnLCAnJ10sXG4gIGxlZ2VuZDogWzEsICc8ZmllbGRzZXQ+JywgJzwvZmllbGRzZXQ+J10sXG4gIHRyOiBbMiwgJzx0YWJsZT48dGJvZHk+JywgJzwvdGJvZHk+PC90YWJsZT4nXSxcbiAgY29sOiBbMiwgJzx0YWJsZT48dGJvZHk+PC90Ym9keT48Y29sZ3JvdXA+JywgJzwvY29sZ3JvdXA+PC90YWJsZT4nXVxufTtcblxubWFwLnRkID0gbWFwLnRoID0gWzMsICc8dGFibGU+PHRib2R5Pjx0cj4nLCAnPC90cj48L3Rib2R5PjwvdGFibGU+J107XG5cbm1hcC5vcHRpb24gPSBtYXAub3B0Z3JvdXAgPSBbMSwgJzxzZWxlY3QgbXVsdGlwbGU9XCJtdWx0aXBsZVwiPicsICc8L3NlbGVjdD4nXTtcblxubWFwLnRoZWFkID0gbWFwLnRib2R5ID0gbWFwLmNvbGdyb3VwID0gbWFwLmNhcHRpb24gPSBtYXAudGZvb3QgPSBbMSwgJzx0YWJsZT4nLCAnPC90YWJsZT4nXTtcblxubWFwLmcgPSBtYXAuZGVmcyA9IG1hcC5zeW1ib2wgPSBtYXAudXNlID0gbWFwLmltYWdlID0gbWFwLnRleHQgPSBtYXAuY2lyY2xlID0gbWFwLmVsbGlwc2UgPSBtYXAubGluZSA9IG1hcC5wYXRoID0gbWFwLnBvbHlnb24gPSBtYXAucG9seWxpbmUgPSBtYXAucmVjdCA9IFsxLCAnPHN2ZyAnICsgJ3htbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiAnICsgJ3htbG5zOnhsaW5rPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiICcgKyAneG1sbnM6ZXY9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAxL3htbC1ldmVudHNcIicgKyAndmVyc2lvbj1cIjEuMVwiPicsICc8L3N2Zz4nXTtcblxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBzdXBwb3J0ZWQgdGVtcGxhdGUgbm9kZSB3aXRoIGFcbiAqIERvY3VtZW50RnJhZ21lbnQgY29udGVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNSZWFsVGVtcGxhdGUobm9kZSkge1xuICByZXR1cm4gaXNUZW1wbGF0ZShub2RlKSAmJiBpc0ZyYWdtZW50KG5vZGUuY29udGVudCk7XG59XG5cbnZhciB0YWdSRSQxID0gLzwoW1xcdzotXSspLztcbnZhciBlbnRpdHlSRSA9IC8mIz9cXHcrPzsvO1xudmFyIGNvbW1lbnRSRSA9IC88IS0tLztcblxuLyoqXG4gKiBDb252ZXJ0IGEgc3RyaW5nIHRlbXBsYXRlIHRvIGEgRG9jdW1lbnRGcmFnbWVudC5cbiAqIERldGVybWluZXMgY29ycmVjdCB3cmFwcGluZyBieSB0YWcgdHlwZXMuIFdyYXBwaW5nXG4gKiBzdHJhdGVneSBmb3VuZCBpbiBqUXVlcnkgJiBjb21wb25lbnQvZG9taWZ5LlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZW1wbGF0ZVN0cmluZ1xuICogQHBhcmFtIHtCb29sZWFufSByYXdcbiAqIEByZXR1cm4ge0RvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gc3RyaW5nVG9GcmFnbWVudCh0ZW1wbGF0ZVN0cmluZywgcmF3KSB7XG4gIC8vIHRyeSBhIGNhY2hlIGhpdCBmaXJzdFxuICB2YXIgY2FjaGVLZXkgPSByYXcgPyB0ZW1wbGF0ZVN0cmluZyA6IHRlbXBsYXRlU3RyaW5nLnRyaW0oKTtcbiAgdmFyIGhpdCA9IHRlbXBsYXRlQ2FjaGUuZ2V0KGNhY2hlS2V5KTtcbiAgaWYgKGhpdCkge1xuICAgIHJldHVybiBoaXQ7XG4gIH1cblxuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIHRhZ01hdGNoID0gdGVtcGxhdGVTdHJpbmcubWF0Y2godGFnUkUkMSk7XG4gIHZhciBlbnRpdHlNYXRjaCA9IGVudGl0eVJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuICB2YXIgY29tbWVudE1hdGNoID0gY29tbWVudFJFLnRlc3QodGVtcGxhdGVTdHJpbmcpO1xuXG4gIGlmICghdGFnTWF0Y2ggJiYgIWVudGl0eU1hdGNoICYmICFjb21tZW50TWF0Y2gpIHtcbiAgICAvLyB0ZXh0IG9ubHksIHJldHVybiBhIHNpbmdsZSB0ZXh0IG5vZGUuXG4gICAgZnJhZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0ZW1wbGF0ZVN0cmluZykpO1xuICB9IGVsc2Uge1xuICAgIHZhciB0YWcgPSB0YWdNYXRjaCAmJiB0YWdNYXRjaFsxXTtcbiAgICB2YXIgd3JhcCA9IG1hcFt0YWddIHx8IG1hcC5lZmF1bHQ7XG4gICAgdmFyIGRlcHRoID0gd3JhcFswXTtcbiAgICB2YXIgcHJlZml4ID0gd3JhcFsxXTtcbiAgICB2YXIgc3VmZml4ID0gd3JhcFsyXTtcbiAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG4gICAgbm9kZS5pbm5lckhUTUwgPSBwcmVmaXggKyB0ZW1wbGF0ZVN0cmluZyArIHN1ZmZpeDtcbiAgICB3aGlsZSAoZGVwdGgtLSkge1xuICAgICAgbm9kZSA9IG5vZGUubGFzdENoaWxkO1xuICAgIH1cblxuICAgIHZhciBjaGlsZDtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIHdoaWxlIChjaGlsZCA9IG5vZGUuZmlyc3RDaGlsZCkge1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9XG4gIGlmICghcmF3KSB7XG4gICAgdHJpbU5vZGUoZnJhZyk7XG4gIH1cbiAgdGVtcGxhdGVDYWNoZS5wdXQoY2FjaGVLZXksIGZyYWcpO1xuICByZXR1cm4gZnJhZztcbn1cblxuLyoqXG4gKiBDb252ZXJ0IGEgdGVtcGxhdGUgbm9kZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIG5vZGVUb0ZyYWdtZW50KG5vZGUpIHtcbiAgLy8gaWYgaXRzIGEgdGVtcGxhdGUgdGFnIGFuZCB0aGUgYnJvd3NlciBzdXBwb3J0cyBpdCxcbiAgLy8gaXRzIGNvbnRlbnQgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LiBIb3dldmVyLCBpT1MgU2FmYXJpIGhhc1xuICAvLyBidWcgd2hlbiB1c2luZyBkaXJlY3RseSBjbG9uZWQgdGVtcGxhdGUgY29udGVudCB3aXRoIHRvdWNoXG4gIC8vIGV2ZW50cyBhbmQgY2FuIGNhdXNlIGNyYXNoZXMgd2hlbiB0aGUgbm9kZXMgYXJlIHJlbW92ZWQgZnJvbSBET00sIHNvIHdlXG4gIC8vIGhhdmUgdG8gdHJlYXQgdGVtcGxhdGUgZWxlbWVudHMgYXMgc3RyaW5nIHRlbXBsYXRlcy4gKCMyODA1KVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG4gICAgcmV0dXJuIHN0cmluZ1RvRnJhZ21lbnQobm9kZS5pbm5lckhUTUwpO1xuICB9XG4gIC8vIHNjcmlwdCB0ZW1wbGF0ZVxuICBpZiAobm9kZS50YWdOYW1lID09PSAnU0NSSVBUJykge1xuICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUudGV4dENvbnRlbnQpO1xuICB9XG4gIC8vIG5vcm1hbCBub2RlLCBjbG9uZSBpdCB0byBhdm9pZCBtdXRhdGluZyB0aGUgb3JpZ2luYWxcbiAgdmFyIGNsb25lZE5vZGUgPSBjbG9uZU5vZGUobm9kZSk7XG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICB2YXIgY2hpbGQ7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gIHdoaWxlIChjaGlsZCA9IGNsb25lZE5vZGUuZmlyc3RDaGlsZCkge1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBmcmFnLmFwcGVuZENoaWxkKGNoaWxkKTtcbiAgfVxuICB0cmltTm9kZShmcmFnKTtcbiAgcmV0dXJuIGZyYWc7XG59XG5cbi8vIFRlc3QgZm9yIHRoZSBwcmVzZW5jZSBvZiB0aGUgU2FmYXJpIHRlbXBsYXRlIGNsb25pbmcgYnVnXG4vLyBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93dWcuY2dpP2lkPTEzNzc1NVxudmFyIGhhc0Jyb2tlblRlbXBsYXRlID0gKGZ1bmN0aW9uICgpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKGluQnJvd3Nlcikge1xuICAgIHZhciBhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgYS5pbm5lckhUTUwgPSAnPHRlbXBsYXRlPjE8L3RlbXBsYXRlPic7XG4gICAgcmV0dXJuICFhLmNsb25lTm9kZSh0cnVlKS5maXJzdENoaWxkLmlubmVySFRNTDtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0pKCk7XG5cbi8vIFRlc3QgZm9yIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgY2xvbmUgYnVnXG52YXIgaGFzVGV4dGFyZWFDbG9uZUJ1ZyA9IChmdW5jdGlvbiAoKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChpbkJyb3dzZXIpIHtcbiAgICB2YXIgdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XG4gICAgdC5wbGFjZWhvbGRlciA9ICd0JztcbiAgICByZXR1cm4gdC5jbG9uZU5vZGUodHJ1ZSkudmFsdWUgPT09ICd0JztcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbn0pKCk7XG5cbi8qKlxuICogMS4gRGVhbCB3aXRoIFNhZmFyaSBjbG9uaW5nIG5lc3RlZCA8dGVtcGxhdGU+IGJ1ZyBieVxuICogICAgbWFudWFsbHkgY2xvbmluZyBhbGwgdGVtcGxhdGUgaW5zdGFuY2VzLlxuICogMi4gRGVhbCB3aXRoIElFMTAvMTEgdGV4dGFyZWEgcGxhY2Vob2xkZXIgYnVnIGJ5IHNldHRpbmdcbiAqICAgIHRoZSBjb3JyZWN0IHZhbHVlIGFmdGVyIGNsb25pbmcuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IG5vZGVcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBjbG9uZU5vZGUobm9kZSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFub2RlLnF1ZXJ5U2VsZWN0b3JBbGwpIHtcbiAgICByZXR1cm4gbm9kZS5jbG9uZU5vZGUoKTtcbiAgfVxuICB2YXIgcmVzID0gbm9kZS5jbG9uZU5vZGUodHJ1ZSk7XG4gIHZhciBpLCBvcmlnaW5hbCwgY2xvbmVkO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGhhc0Jyb2tlblRlbXBsYXRlKSB7XG4gICAgdmFyIHRlbXBDbG9uZSA9IHJlcztcbiAgICBpZiAoaXNSZWFsVGVtcGxhdGUobm9kZSkpIHtcbiAgICAgIG5vZGUgPSBub2RlLmNvbnRlbnQ7XG4gICAgICB0ZW1wQ2xvbmUgPSByZXMuY29udGVudDtcbiAgICB9XG4gICAgb3JpZ2luYWwgPSBub2RlLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG4gICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuICAgICAgY2xvbmVkID0gdGVtcENsb25lLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RlbXBsYXRlJyk7XG4gICAgICBpID0gY2xvbmVkLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgY2xvbmVkW2ldLnBhcmVudE5vZGUucmVwbGFjZUNoaWxkKGNsb25lTm9kZShvcmlnaW5hbFtpXSksIGNsb25lZFtpXSk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaGFzVGV4dGFyZWFDbG9uZUJ1Zykge1xuICAgIGlmIChub2RlLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgIHJlcy52YWx1ZSA9IG5vZGUudmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZXh0YXJlYScpO1xuICAgICAgaWYgKG9yaWdpbmFsLmxlbmd0aCkge1xuICAgICAgICBjbG9uZWQgPSByZXMucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcbiAgICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG4gICAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgICBjbG9uZWRbaV0udmFsdWUgPSBvcmlnaW5hbFtpXS52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbiBhbmQgbm9ybWFsaXplcyBpdCBpbnRvIGFcbiAqIGEgRG9jdW1lbnRGcmFnbWVudCB0aGF0IGNhbiBiZSB1c2VkIGFzIGEgcGFydGlhbCBvciBhXG4gKiBpbnN0YW5jZSB0ZW1wbGF0ZS5cbiAqXG4gKiBAcGFyYW0geyp9IHRlbXBsYXRlXG4gKiAgICAgICAgUG9zc2libGUgdmFsdWVzIGluY2x1ZGU6XG4gKiAgICAgICAgLSBEb2N1bWVudEZyYWdtZW50IG9iamVjdFxuICogICAgICAgIC0gTm9kZSBvYmplY3Qgb2YgdHlwZSBUZW1wbGF0ZVxuICogICAgICAgIC0gaWQgc2VsZWN0b3I6ICcjc29tZS10ZW1wbGF0ZS1pZCdcbiAqICAgICAgICAtIHRlbXBsYXRlIHN0cmluZzogJzxkaXY+PHNwYW4+e3ttc2d9fTwvc3Bhbj48L2Rpdj4nXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHNob3VsZENsb25lXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHJhd1xuICogICAgICAgIGlubGluZSBIVE1MIGludGVycG9sYXRpb24uIERvIG5vdCBjaGVjayBmb3IgaWRcbiAqICAgICAgICBzZWxlY3RvciBhbmQga2VlcCB3aGl0ZXNwYWNlIGluIHRoZSBzdHJpbmcuXG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCBzaG91bGRDbG9uZSwgcmF3KSB7XG4gIHZhciBub2RlLCBmcmFnO1xuXG4gIC8vIGlmIHRoZSB0ZW1wbGF0ZSBpcyBhbHJlYWR5IGEgZG9jdW1lbnQgZnJhZ21lbnQsXG4gIC8vIGRvIG5vdGhpbmdcbiAgaWYgKGlzRnJhZ21lbnQodGVtcGxhdGUpKSB7XG4gICAgdHJpbU5vZGUodGVtcGxhdGUpO1xuICAgIHJldHVybiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZSh0ZW1wbGF0ZSkgOiB0ZW1wbGF0ZTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgdGVtcGxhdGUgPT09ICdzdHJpbmcnKSB7XG4gICAgLy8gaWQgc2VsZWN0b3JcbiAgICBpZiAoIXJhdyAmJiB0ZW1wbGF0ZS5jaGFyQXQoMCkgPT09ICcjJykge1xuICAgICAgLy8gaWQgc2VsZWN0b3IgY2FuIGJlIGNhY2hlZCB0b29cbiAgICAgIGZyYWcgPSBpZFNlbGVjdG9yQ2FjaGUuZ2V0KHRlbXBsYXRlKTtcbiAgICAgIGlmICghZnJhZykge1xuICAgICAgICBub2RlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGVtcGxhdGUuc2xpY2UoMSkpO1xuICAgICAgICBpZiAobm9kZSkge1xuICAgICAgICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudChub2RlKTtcbiAgICAgICAgICAvLyBzYXZlIHNlbGVjdG9yIHRvIGNhY2hlXG4gICAgICAgICAgaWRTZWxlY3RvckNhY2hlLnB1dCh0ZW1wbGF0ZSwgZnJhZyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9ybWFsIHN0cmluZyB0ZW1wbGF0ZVxuICAgICAgZnJhZyA9IHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGUsIHJhdyk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHRlbXBsYXRlLm5vZGVUeXBlKSB7XG4gICAgLy8gYSBkaXJlY3Qgbm9kZVxuICAgIGZyYWcgPSBub2RlVG9GcmFnbWVudCh0ZW1wbGF0ZSk7XG4gIH1cblxuICByZXR1cm4gZnJhZyAmJiBzaG91bGRDbG9uZSA/IGNsb25lTm9kZShmcmFnKSA6IGZyYWc7XG59XG5cbnZhciB0ZW1wbGF0ZSA9IE9iamVjdC5mcmVlemUoe1xuICBjbG9uZU5vZGU6IGNsb25lTm9kZSxcbiAgcGFyc2VUZW1wbGF0ZTogcGFyc2VUZW1wbGF0ZVxufSk7XG5cbnZhciBodG1sID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gYSBjb21tZW50IG5vZGUgbWVhbnMgdGhpcyBpcyBhIGJpbmRpbmcgZm9yXG4gICAgLy8ge3t7IGlubGluZSB1bmVzY2FwZWQgaHRtbCB9fX1cbiAgICBpZiAodGhpcy5lbC5ub2RlVHlwZSA9PT0gOCkge1xuICAgICAgLy8gaG9sZCBub2Rlc1xuICAgICAgdGhpcy5ub2RlcyA9IFtdO1xuICAgICAgLy8gcmVwbGFjZSB0aGUgcGxhY2Vob2xkZXIgd2l0aCBwcm9wZXIgYW5jaG9yXG4gICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1odG1sJyk7XG4gICAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuYW5jaG9yKTtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgaWYgKHRoaXMubm9kZXMpIHtcbiAgICAgIHRoaXMuc3dhcCh2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWwuaW5uZXJIVE1MID0gdmFsdWU7XG4gICAgfVxuICB9LFxuXG4gIHN3YXA6IGZ1bmN0aW9uIHN3YXAodmFsdWUpIHtcbiAgICAvLyByZW1vdmUgb2xkIG5vZGVzXG4gICAgdmFyIGkgPSB0aGlzLm5vZGVzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZW1vdmUodGhpcy5ub2Rlc1tpXSk7XG4gICAgfVxuICAgIC8vIGNvbnZlcnQgbmV3IHZhbHVlIHRvIGEgZnJhZ21lbnRcbiAgICAvLyBkbyBub3QgYXR0ZW1wdCB0byByZXRyaWV2ZSBmcm9tIGlkIHNlbGVjdG9yXG4gICAgdmFyIGZyYWcgPSBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlLCB0cnVlKTtcbiAgICAvLyBzYXZlIGEgcmVmZXJlbmNlIHRvIHRoZXNlIG5vZGVzIHNvIHdlIGNhbiByZW1vdmUgbGF0ZXJcbiAgICB0aGlzLm5vZGVzID0gdG9BcnJheShmcmFnLmNoaWxkTm9kZXMpO1xuICAgIGJlZm9yZShmcmFnLCB0aGlzLmFuY2hvcik7XG4gIH1cbn07XG5cbi8qKlxuICogQWJzdHJhY3Rpb24gZm9yIGEgcGFydGlhbGx5LWNvbXBpbGVkIGZyYWdtZW50LlxuICogQ2FuIG9wdGlvbmFsbHkgY29tcGlsZSBjb250ZW50IHdpdGggYSBjaGlsZCBzY29wZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBsaW5rZXJcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtEb2N1bWVudEZyYWdtZW50fSBmcmFnXG4gKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuICogQHBhcmFtIHtGcmFnbWVudH0gW3BhcmVudEZyYWddXG4gKi9cbmZ1bmN0aW9uIEZyYWdtZW50KGxpbmtlciwgdm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG4gIHRoaXMuY2hpbGRyZW4gPSBbXTtcbiAgdGhpcy5jaGlsZEZyYWdzID0gW107XG4gIHRoaXMudm0gPSB2bTtcbiAgdGhpcy5zY29wZSA9IHNjb3BlO1xuICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG4gIHRoaXMucGFyZW50RnJhZyA9IHBhcmVudEZyYWc7XG4gIGlmIChwYXJlbnRGcmFnKSB7XG4gICAgcGFyZW50RnJhZy5jaGlsZEZyYWdzLnB1c2godGhpcyk7XG4gIH1cbiAgdGhpcy51bmxpbmsgPSBsaW5rZXIodm0sIGZyYWcsIGhvc3QsIHNjb3BlLCB0aGlzKTtcbiAgdmFyIHNpbmdsZSA9IHRoaXMuc2luZ2xlID0gZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJlxuICAvLyBkbyBub3QgZ28gc2luZ2xlIG1vZGUgaWYgdGhlIG9ubHkgbm9kZSBpcyBhbiBhbmNob3JcbiAgIWZyYWcuY2hpbGROb2Rlc1swXS5fX3ZfYW5jaG9yO1xuICBpZiAoc2luZ2xlKSB7XG4gICAgdGhpcy5ub2RlID0gZnJhZy5jaGlsZE5vZGVzWzBdO1xuICAgIHRoaXMuYmVmb3JlID0gc2luZ2xlQmVmb3JlO1xuICAgIHRoaXMucmVtb3ZlID0gc2luZ2xlUmVtb3ZlO1xuICB9IGVsc2Uge1xuICAgIHRoaXMubm9kZSA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtc3RhcnQnKTtcbiAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcignZnJhZ21lbnQtZW5kJyk7XG4gICAgdGhpcy5mcmFnID0gZnJhZztcbiAgICBwcmVwZW5kKHRoaXMubm9kZSwgZnJhZyk7XG4gICAgZnJhZy5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG4gICAgdGhpcy5iZWZvcmUgPSBtdWx0aUJlZm9yZTtcbiAgICB0aGlzLnJlbW92ZSA9IG11bHRpUmVtb3ZlO1xuICB9XG4gIHRoaXMubm9kZS5fX3ZfZnJhZyA9IHRoaXM7XG59XG5cbi8qKlxuICogQ2FsbCBhdHRhY2gvZGV0YWNoIGZvciBhbGwgY29tcG9uZW50cyBjb250YWluZWQgd2l0aGluXG4gKiB0aGlzIGZyYWdtZW50LiBBbHNvIGRvIHNvIHJlY3Vyc2l2ZWx5IGZvciBhbGwgY2hpbGRcbiAqIGZyYWdtZW50cy5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBob29rXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmNhbGxIb29rID0gZnVuY3Rpb24gKGhvb2spIHtcbiAgdmFyIGksIGw7XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdGhpcy5jaGlsZEZyYWdzW2ldLmNhbGxIb29rKGhvb2spO1xuICB9XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGhvb2sodGhpcy5jaGlsZHJlbltpXSk7XG4gIH1cbn07XG5cbi8qKlxuICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIHNpbmdsZSBub2RlIHZlcnNpb25cbiAqXG4gKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuICovXG5cbmZ1bmN0aW9uIHNpbmdsZUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG4gIG1ldGhvZCh0aGlzLm5vZGUsIHRhcmdldCwgdGhpcy52bSk7XG4gIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG4gICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGZyYWdtZW50LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gKi9cblxuZnVuY3Rpb24gc2luZ2xlUmVtb3ZlKCkge1xuICB0aGlzLmluc2VydGVkID0gZmFsc2U7XG4gIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB0aGlzLmJlZm9yZVJlbW92ZSgpO1xuICByZW1vdmVXaXRoVHJhbnNpdGlvbih0aGlzLm5vZGUsIHRoaXMudm0sIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuICAgIH1cbiAgICBzZWxmLmRlc3Ryb3koKTtcbiAgfSk7XG59XG5cbi8qKlxuICogSW5zZXJ0IGZyYWdtZW50IGJlZm9yZSB0YXJnZXQsIG11bHRpLW5vZGVzIHZlcnNpb25cbiAqXG4gKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICogQHBhcmFtIHtCb29sZWFufSB3aXRoVHJhbnNpdGlvblxuICovXG5cbmZ1bmN0aW9uIG11bHRpQmVmb3JlKHRhcmdldCwgd2l0aFRyYW5zaXRpb24pIHtcbiAgdGhpcy5pbnNlcnRlZCA9IHRydWU7XG4gIHZhciB2bSA9IHRoaXMudm07XG4gIHZhciBtZXRob2QgPSB3aXRoVHJhbnNpdGlvbiAhPT0gZmFsc2UgPyBiZWZvcmVXaXRoVHJhbnNpdGlvbiA6IGJlZm9yZTtcbiAgbWFwTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgbWV0aG9kKG5vZGUsIHRhcmdldCwgdm0pO1xuICB9KTtcbiAgaWYgKGluRG9jKHRoaXMubm9kZSkpIHtcbiAgICB0aGlzLmNhbGxIb29rKGF0dGFjaCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZnJhZ21lbnQsIG11bHRpLW5vZGVzIHZlcnNpb25cbiAqL1xuXG5mdW5jdGlvbiBtdWx0aVJlbW92ZSgpIHtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBzaG91bGRDYWxsUmVtb3ZlID0gaW5Eb2ModGhpcy5ub2RlKTtcbiAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcbiAgcmVtb3ZlTm9kZVJhbmdlKHRoaXMubm9kZSwgdGhpcy5lbmQsIHRoaXMudm0sIHRoaXMuZnJhZywgZnVuY3Rpb24gKCkge1xuICAgIGlmIChzaG91bGRDYWxsUmVtb3ZlKSB7XG4gICAgICBzZWxmLmNhbGxIb29rKGRldGFjaCk7XG4gICAgfVxuICAgIHNlbGYuZGVzdHJveSgpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBQcmVwYXJlIHRoZSBmcmFnbWVudCBmb3IgcmVtb3ZhbC5cbiAqL1xuXG5GcmFnbWVudC5wcm90b3R5cGUuYmVmb3JlUmVtb3ZlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgaSwgbDtcbiAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAvLyBjYWxsIHRoZSBzYW1lIG1ldGhvZCByZWN1cnNpdmVseSBvbiBjaGlsZFxuICAgIC8vIGZyYWdtZW50cywgZGVwdGgtZmlyc3RcbiAgICB0aGlzLmNoaWxkRnJhZ3NbaV0uYmVmb3JlUmVtb3ZlKGZhbHNlKTtcbiAgfVxuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAvLyBDYWxsIGRlc3Ryb3kgZm9yIGFsbCBjb250YWluZWQgaW5zdGFuY2VzLFxuICAgIC8vIHdpdGggcmVtb3ZlOmZhbHNlIGFuZCBkZWZlcjp0cnVlLlxuICAgIC8vIERlZmVyIGlzIG5lY2Vzc2FyeSBiZWNhdXNlIHdlIG5lZWQgdG9cbiAgICAvLyBrZWVwIHRoZSBjaGlsZHJlbiB0byBjYWxsIGRldGFjaCBob29rc1xuICAgIC8vIG9uIHRoZW0uXG4gICAgdGhpcy5jaGlsZHJlbltpXS4kZGVzdHJveShmYWxzZSwgdHJ1ZSk7XG4gIH1cbiAgdmFyIGRpcnMgPSB0aGlzLnVubGluay5kaXJzO1xuICBmb3IgKGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAvLyBkaXNhYmxlIHRoZSB3YXRjaGVycyBvbiBhbGwgdGhlIGRpcmVjdGl2ZXNcbiAgICAvLyBzbyB0aGF0IHRoZSByZW5kZXJlZCBjb250ZW50IHN0YXlzIHRoZSBzYW1lXG4gICAgLy8gZHVyaW5nIHJlbW92YWwuXG4gICAgZGlyc1tpXS5fd2F0Y2hlciAmJiBkaXJzW2ldLl93YXRjaGVyLnRlYXJkb3duKCk7XG4gIH1cbn07XG5cbi8qKlxuICogRGVzdHJveSB0aGUgZnJhZ21lbnQuXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmRlc3Ryb3kgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLnBhcmVudEZyYWcpIHtcbiAgICB0aGlzLnBhcmVudEZyYWcuY2hpbGRGcmFncy4kcmVtb3ZlKHRoaXMpO1xuICB9XG4gIHRoaXMubm9kZS5fX3ZfZnJhZyA9IG51bGw7XG4gIHRoaXMudW5saW5rKCk7XG59O1xuXG4vKipcbiAqIENhbGwgYXR0YWNoIGhvb2sgZm9yIGEgVnVlIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICovXG5cbmZ1bmN0aW9uIGF0dGFjaChjaGlsZCkge1xuICBpZiAoIWNoaWxkLl9pc0F0dGFjaGVkICYmIGluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBDYWxsIGRldGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAqL1xuXG5mdW5jdGlvbiBkZXRhY2goY2hpbGQpIHtcbiAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgY2hpbGQuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuICB9XG59XG5cbnZhciBsaW5rZXJDYWNoZSA9IG5ldyBDYWNoZSg1MDAwKTtcblxuLyoqXG4gKiBBIGZhY3RvcnkgdGhhdCBjYW4gYmUgdXNlZCB0byBjcmVhdGUgaW5zdGFuY2VzIG9mIGFcbiAqIGZyYWdtZW50LiBDYWNoZXMgdGhlIGNvbXBpbGVkIGxpbmtlciBpZiBwb3NzaWJsZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudHxTdHJpbmd9IGVsXG4gKi9cbmZ1bmN0aW9uIEZyYWdtZW50RmFjdG9yeSh2bSwgZWwpIHtcbiAgdGhpcy52bSA9IHZtO1xuICB2YXIgdGVtcGxhdGU7XG4gIHZhciBpc1N0cmluZyA9IHR5cGVvZiBlbCA9PT0gJ3N0cmluZyc7XG4gIGlmIChpc1N0cmluZyB8fCBpc1RlbXBsYXRlKGVsKSAmJiAhZWwuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICB0ZW1wbGF0ZSA9IHBhcnNlVGVtcGxhdGUoZWwsIHRydWUpO1xuICB9IGVsc2Uge1xuICAgIHRlbXBsYXRlID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICAgIHRlbXBsYXRlLmFwcGVuZENoaWxkKGVsKTtcbiAgfVxuICB0aGlzLnRlbXBsYXRlID0gdGVtcGxhdGU7XG4gIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkLCBidXQgb25seSBmb3IgY29tcG9uZW50c1xuICB2YXIgbGlua2VyO1xuICB2YXIgY2lkID0gdm0uY29uc3RydWN0b3IuY2lkO1xuICBpZiAoY2lkID4gMCkge1xuICAgIHZhciBjYWNoZUlkID0gY2lkICsgKGlzU3RyaW5nID8gZWwgOiBnZXRPdXRlckhUTUwoZWwpKTtcbiAgICBsaW5rZXIgPSBsaW5rZXJDYWNoZS5nZXQoY2FjaGVJZCk7XG4gICAgaWYgKCFsaW5rZXIpIHtcbiAgICAgIGxpbmtlciA9IGNvbXBpbGUodGVtcGxhdGUsIHZtLiRvcHRpb25zLCB0cnVlKTtcbiAgICAgIGxpbmtlckNhY2hlLnB1dChjYWNoZUlkLCBsaW5rZXIpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG4gIH1cbiAgdGhpcy5saW5rZXIgPSBsaW5rZXI7XG59XG5cbi8qKlxuICogQ3JlYXRlIGEgZnJhZ21lbnQgaW5zdGFuY2Ugd2l0aCBnaXZlbiBob3N0IGFuZCBzY29wZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gaG9zdFxuICogQHBhcmFtIHtPYmplY3R9IHNjb3BlXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBwYXJlbnRGcmFnXG4gKi9cblxuRnJhZ21lbnRGYWN0b3J5LnByb3RvdHlwZS5jcmVhdGUgPSBmdW5jdGlvbiAoaG9zdCwgc2NvcGUsIHBhcmVudEZyYWcpIHtcbiAgdmFyIGZyYWcgPSBjbG9uZU5vZGUodGhpcy50ZW1wbGF0ZSk7XG4gIHJldHVybiBuZXcgRnJhZ21lbnQodGhpcy5saW5rZXIsIHRoaXMudm0sIGZyYWcsIGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKTtcbn07XG5cbnZhciBPTiA9IDcwMDtcbnZhciBNT0RFTCA9IDgwMDtcbnZhciBCSU5EID0gODUwO1xudmFyIFRSQU5TSVRJT04gPSAxMTAwO1xudmFyIEVMID0gMTUwMDtcbnZhciBDT01QT05FTlQgPSAxNTAwO1xudmFyIFBBUlRJQUwgPSAxNzUwO1xudmFyIElGID0gMjEwMDtcbnZhciBGT1IgPSAyMjAwO1xudmFyIFNMT1QgPSAyMzAwO1xuXG52YXIgdWlkJDMgPSAwO1xuXG52YXIgdkZvciA9IHtcblxuICBwcmlvcml0eTogRk9SLFxuICB0ZXJtaW5hbDogdHJ1ZSxcblxuICBwYXJhbXM6IFsndHJhY2stYnknLCAnc3RhZ2dlcicsICdlbnRlci1zdGFnZ2VyJywgJ2xlYXZlLXN0YWdnZXInXSxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIHN1cHBvcnQgXCJpdGVtIGluL29mIGl0ZW1zXCIgc3ludGF4XG4gICAgdmFyIGluTWF0Y2ggPSB0aGlzLmV4cHJlc3Npb24ubWF0Y2goLyguKikgKD86aW58b2YpICguKikvKTtcbiAgICBpZiAoaW5NYXRjaCkge1xuICAgICAgdmFyIGl0TWF0Y2ggPSBpbk1hdGNoWzFdLm1hdGNoKC9cXCgoLiopLCguKilcXCkvKTtcbiAgICAgIGlmIChpdE1hdGNoKSB7XG4gICAgICAgIHRoaXMuaXRlcmF0b3IgPSBpdE1hdGNoWzFdLnRyaW0oKTtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGl0TWF0Y2hbMl0udHJpbSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hbGlhcyA9IGluTWF0Y2hbMV0udHJpbSgpO1xuICAgICAgfVxuICAgICAgdGhpcy5leHByZXNzaW9uID0gaW5NYXRjaFsyXTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuYWxpYXMpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB2LWZvciBleHByZXNzaW9uIFwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYWxpYXMgaXMgcmVxdWlyZWQuJywgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gdWlkIGFzIGEgY2FjaGUgaWRlbnRpZmllclxuICAgIHRoaXMuaWQgPSAnX192LWZvcl9fJyArICsrdWlkJDM7XG5cbiAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGFuIG9wdGlvbiBsaXN0LFxuICAgIC8vIHNvIHRoYXQgd2Uga25vdyBpZiB3ZSBuZWVkIHRvIHVwZGF0ZSB0aGUgPHNlbGVjdD4nc1xuICAgIC8vIHYtbW9kZWwgd2hlbiB0aGUgb3B0aW9uIGxpc3QgaGFzIGNoYW5nZWQuXG4gICAgLy8gYmVjYXVzZSB2LW1vZGVsIGhhcyBhIGxvd2VyIHByaW9yaXR5IHRoYW4gdi1mb3IsXG4gICAgLy8gdGhlIHYtbW9kZWwgaXMgbm90IGJvdW5kIGhlcmUgeWV0LCBzbyB3ZSBoYXZlIHRvXG4gICAgLy8gcmV0cml2ZSBpdCBpbiB0aGUgYWN0dWFsIHVwZGF0ZU1vZGVsKCkgZnVuY3Rpb24uXG4gICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcbiAgICB0aGlzLmlzT3B0aW9uID0gKHRhZyA9PT0gJ09QVElPTicgfHwgdGFnID09PSAnT1BUR1JPVVAnKSAmJiB0aGlzLmVsLnBhcmVudE5vZGUudGFnTmFtZSA9PT0gJ1NFTEVDVCc7XG5cbiAgICAvLyBzZXR1cCBhbmNob3Igbm9kZXNcbiAgICB0aGlzLnN0YXJ0ID0gY3JlYXRlQW5jaG9yKCd2LWZvci1zdGFydCcpO1xuICAgIHRoaXMuZW5kID0gY3JlYXRlQW5jaG9yKCd2LWZvci1lbmQnKTtcbiAgICByZXBsYWNlKHRoaXMuZWwsIHRoaXMuZW5kKTtcbiAgICBiZWZvcmUodGhpcy5zdGFydCwgdGhpcy5lbmQpO1xuXG4gICAgLy8gY2FjaGVcbiAgICB0aGlzLmNhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICAgIC8vIGZyYWdtZW50IGZhY3RvcnlcbiAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHRoaXMuZWwpO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGRhdGEpIHtcbiAgICB0aGlzLmRpZmYoZGF0YSk7XG4gICAgdGhpcy51cGRhdGVSZWYoKTtcbiAgICB0aGlzLnVwZGF0ZU1vZGVsKCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERpZmYsIGJhc2VkIG9uIG5ldyBkYXRhIGFuZCBvbGQgZGF0YSwgZGV0ZXJtaW5lIHRoZVxuICAgKiBtaW5pbXVtIGFtb3VudCBvZiBET00gbWFuaXB1bGF0aW9ucyBuZWVkZWQgdG8gbWFrZSB0aGVcbiAgICogRE9NIHJlZmxlY3QgdGhlIG5ldyBkYXRhIEFycmF5LlxuICAgKlxuICAgKiBUaGUgYWxnb3JpdGhtIGRpZmZzIHRoZSBuZXcgZGF0YSBBcnJheSBieSBzdG9yaW5nIGFcbiAgICogaGlkZGVuIHJlZmVyZW5jZSB0byBhbiBvd25lciB2bSBpbnN0YW5jZSBvbiBwcmV2aW91c2x5XG4gICAqIHNlZW4gZGF0YS4gVGhpcyBhbGxvd3MgdXMgdG8gYWNoaWV2ZSBPKG4pIHdoaWNoIGlzXG4gICAqIGJldHRlciB0aGFuIGEgbGV2ZW5zaHRlaW4gZGlzdGFuY2UgYmFzZWQgYWxnb3JpdGhtLFxuICAgKiB3aGljaCBpcyBPKG0gKiBuKS5cbiAgICpcbiAgICogQHBhcmFtIHtBcnJheX0gZGF0YVxuICAgKi9cblxuICBkaWZmOiBmdW5jdGlvbiBkaWZmKGRhdGEpIHtcbiAgICAvLyBjaGVjayBpZiB0aGUgQXJyYXkgd2FzIGNvbnZlcnRlZCBmcm9tIGFuIE9iamVjdFxuICAgIHZhciBpdGVtID0gZGF0YVswXTtcbiAgICB2YXIgY29udmVydGVkRnJvbU9iamVjdCA9IHRoaXMuZnJvbU9iamVjdCA9IGlzT2JqZWN0KGl0ZW0pICYmIGhhc093bihpdGVtLCAnJGtleScpICYmIGhhc093bihpdGVtLCAnJHZhbHVlJyk7XG5cbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIG9sZEZyYWdzID0gdGhpcy5mcmFncztcbiAgICB2YXIgZnJhZ3MgPSB0aGlzLmZyYWdzID0gbmV3IEFycmF5KGRhdGEubGVuZ3RoKTtcbiAgICB2YXIgYWxpYXMgPSB0aGlzLmFsaWFzO1xuICAgIHZhciBpdGVyYXRvciA9IHRoaXMuaXRlcmF0b3I7XG4gICAgdmFyIHN0YXJ0ID0gdGhpcy5zdGFydDtcbiAgICB2YXIgZW5kID0gdGhpcy5lbmQ7XG4gICAgdmFyIGluRG9jdW1lbnQgPSBpbkRvYyhzdGFydCk7XG4gICAgdmFyIGluaXQgPSAhb2xkRnJhZ3M7XG4gICAgdmFyIGksIGwsIGZyYWcsIGtleSwgdmFsdWUsIHByaW1pdGl2ZTtcblxuICAgIC8vIEZpcnN0IHBhc3MsIGdvIHRocm91Z2ggdGhlIG5ldyBBcnJheSBhbmQgZmlsbCB1cFxuICAgIC8vIHRoZSBuZXcgZnJhZ3MgYXJyYXkuIElmIGEgcGllY2Ugb2YgZGF0YSBoYXMgYSBjYWNoZWRcbiAgICAvLyBpbnN0YW5jZSBmb3IgaXQsIHdlIHJldXNlIGl0LiBPdGhlcndpc2UgYnVpbGQgYSBuZXdcbiAgICAvLyBpbnN0YW5jZS5cbiAgICBmb3IgKGkgPSAwLCBsID0gZGF0YS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGl0ZW0gPSBkYXRhW2ldO1xuICAgICAga2V5ID0gY29udmVydGVkRnJvbU9iamVjdCA/IGl0ZW0uJGtleSA6IG51bGw7XG4gICAgICB2YWx1ZSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiR2YWx1ZSA6IGl0ZW07XG4gICAgICBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgICAgZnJhZyA9ICFpbml0ICYmIHRoaXMuZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaSwga2V5KTtcbiAgICAgIGlmIChmcmFnKSB7XG4gICAgICAgIC8vIHJldXNhYmxlIGZyYWdtZW50XG4gICAgICAgIGZyYWcucmV1c2VkID0gdHJ1ZTtcbiAgICAgICAgLy8gdXBkYXRlICRpbmRleFxuICAgICAgICBmcmFnLnNjb3BlLiRpbmRleCA9IGk7XG4gICAgICAgIC8vIHVwZGF0ZSAka2V5XG4gICAgICAgIGlmIChrZXkpIHtcbiAgICAgICAgICBmcmFnLnNjb3BlLiRrZXkgPSBrZXk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIGl0ZXJhdG9yXG4gICAgICAgIGlmIChpdGVyYXRvcikge1xuICAgICAgICAgIGZyYWcuc2NvcGVbaXRlcmF0b3JdID0ga2V5ICE9PSBudWxsID8ga2V5IDogaTtcbiAgICAgICAgfVxuICAgICAgICAvLyB1cGRhdGUgZGF0YSBmb3IgdHJhY2stYnksIG9iamVjdCByZXBlYXQgJlxuICAgICAgICAvLyBwcmltaXRpdmUgdmFsdWVzLlxuICAgICAgICBpZiAodHJhY2tCeUtleSB8fCBjb252ZXJ0ZWRGcm9tT2JqZWN0IHx8IHByaW1pdGl2ZSkge1xuICAgICAgICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGZyYWcuc2NvcGVbYWxpYXNdID0gdmFsdWU7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIG5ldyBpc250YW5jZVxuICAgICAgICBmcmFnID0gdGhpcy5jcmVhdGUodmFsdWUsIGFsaWFzLCBpLCBrZXkpO1xuICAgICAgICBmcmFnLmZyZXNoID0gIWluaXQ7XG4gICAgICB9XG4gICAgICBmcmFnc1tpXSA9IGZyYWc7XG4gICAgICBpZiAoaW5pdCkge1xuICAgICAgICBmcmFnLmJlZm9yZShlbmQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIHdlJ3JlIGRvbmUgZm9yIHRoZSBpbml0aWFsIHJlbmRlci5cbiAgICBpZiAoaW5pdCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFNlY29uZCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBvbGQgZnJhZ21lbnRzIGFuZFxuICAgIC8vIGRlc3Ryb3kgdGhvc2Ugd2hvIGFyZSBub3QgcmV1c2VkIChhbmQgcmVtb3ZlIHRoZW1cbiAgICAvLyBmcm9tIGNhY2hlKVxuICAgIHZhciByZW1vdmFsSW5kZXggPSAwO1xuICAgIHZhciB0b3RhbFJlbW92ZWQgPSBvbGRGcmFncy5sZW5ndGggLSBmcmFncy5sZW5ndGg7XG4gICAgLy8gd2hlbiByZW1vdmluZyBhIGxhcmdlIG51bWJlciBvZiBmcmFnbWVudHMsIHdhdGNoZXIgcmVtb3ZhbFxuICAgIC8vIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgYm90dGxlbmVjaywgc28gd2UgYmF0Y2ggdGhlIHdhdGNoZXJcbiAgICAvLyByZW1vdmFscyBpbnRvIGEgc2luZ2xlIGZpbHRlciBjYWxsIVxuICAgIHRoaXMudm0uX3ZGb3JSZW1vdmluZyA9IHRydWU7XG4gICAgZm9yIChpID0gMCwgbCA9IG9sZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZnJhZyA9IG9sZEZyYWdzW2ldO1xuICAgICAgaWYgKCFmcmFnLnJldXNlZCkge1xuICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG4gICAgICAgIHRoaXMucmVtb3ZlKGZyYWcsIHJlbW92YWxJbmRleCsrLCB0b3RhbFJlbW92ZWQsIGluRG9jdW1lbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcbiAgICBpZiAocmVtb3ZhbEluZGV4KSB7XG4gICAgICB0aGlzLnZtLl93YXRjaGVycyA9IHRoaXMudm0uX3dhdGNoZXJzLmZpbHRlcihmdW5jdGlvbiAodykge1xuICAgICAgICByZXR1cm4gdy5hY3RpdmU7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBGaW5hbCBwYXNzLCBtb3ZlL2luc2VydCBuZXcgZnJhZ21lbnRzIGludG8gdGhlXG4gICAgLy8gcmlnaHQgcGxhY2UuXG4gICAgdmFyIHRhcmdldFByZXYsIHByZXZFbCwgY3VycmVudFByZXY7XG4gICAgdmFyIGluc2VydGlvbkluZGV4ID0gMDtcbiAgICBmb3IgKGkgPSAwLCBsID0gZnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmcmFnID0gZnJhZ3NbaV07XG4gICAgICAvLyB0aGlzIGlzIHRoZSBmcmFnIHRoYXQgd2Ugc2hvdWxkIGJlIGFmdGVyXG4gICAgICB0YXJnZXRQcmV2ID0gZnJhZ3NbaSAtIDFdO1xuICAgICAgcHJldkVsID0gdGFyZ2V0UHJldiA/IHRhcmdldFByZXYuc3RhZ2dlckNiID8gdGFyZ2V0UHJldi5zdGFnZ2VyQW5jaG9yIDogdGFyZ2V0UHJldi5lbmQgfHwgdGFyZ2V0UHJldi5ub2RlIDogc3RhcnQ7XG4gICAgICBpZiAoZnJhZy5yZXVzZWQgJiYgIWZyYWcuc3RhZ2dlckNiKSB7XG4gICAgICAgIGN1cnJlbnRQcmV2ID0gZmluZFByZXZGcmFnKGZyYWcsIHN0YXJ0LCB0aGlzLmlkKTtcbiAgICAgICAgaWYgKGN1cnJlbnRQcmV2ICE9PSB0YXJnZXRQcmV2ICYmICghY3VycmVudFByZXYgfHxcbiAgICAgICAgLy8gb3B0aW1pemF0aW9uIGZvciBtb3ZpbmcgYSBzaW5nbGUgaXRlbS5cbiAgICAgICAgLy8gdGhhbmtzIHRvIHN1Z2dlc3Rpb25zIGJ5IEBsaXZvcmFzIGluICMxODA3XG4gICAgICAgIGZpbmRQcmV2RnJhZyhjdXJyZW50UHJldiwgc3RhcnQsIHRoaXMuaWQpICE9PSB0YXJnZXRQcmV2KSkge1xuICAgICAgICAgIHRoaXMubW92ZShmcmFnLCBwcmV2RWwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBuZXcgaW5zdGFuY2UsIG9yIHN0aWxsIGluIHN0YWdnZXIuXG4gICAgICAgIC8vIGluc2VydCB3aXRoIHVwZGF0ZWQgc3RhZ2dlciBpbmRleC5cbiAgICAgICAgdGhpcy5pbnNlcnQoZnJhZywgaW5zZXJ0aW9uSW5kZXgrKywgcHJldkVsLCBpbkRvY3VtZW50KTtcbiAgICAgIH1cbiAgICAgIGZyYWcucmV1c2VkID0gZnJhZy5mcmVzaCA9IGZhbHNlO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQ3JlYXRlIGEgbmV3IGZyYWdtZW50IGluc3RhbmNlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhbGlhc1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtrZXldXG4gICAqIEByZXR1cm4ge0ZyYWdtZW50fVxuICAgKi9cblxuICBjcmVhdGU6IGZ1bmN0aW9uIGNyZWF0ZSh2YWx1ZSwgYWxpYXMsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgaG9zdCA9IHRoaXMuX2hvc3Q7XG4gICAgLy8gY3JlYXRlIGl0ZXJhdGlvbiBzY29wZVxuICAgIHZhciBwYXJlbnRTY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG4gICAgdmFyIHNjb3BlID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZSk7XG4gICAgLy8gcmVmIGhvbGRlciBmb3IgdGhlIHNjb3BlXG4gICAgc2NvcGUuJHJlZnMgPSBPYmplY3QuY3JlYXRlKHBhcmVudFNjb3BlLiRyZWZzKTtcbiAgICBzY29wZS4kZWxzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kZWxzKTtcbiAgICAvLyBtYWtlIHN1cmUgcG9pbnQgJHBhcmVudCB0byBwYXJlbnQgc2NvcGVcbiAgICBzY29wZS4kcGFyZW50ID0gcGFyZW50U2NvcGU7XG4gICAgLy8gZm9yIHR3by13YXkgYmluZGluZyBvbiBhbGlhc1xuICAgIHNjb3BlLiRmb3JDb250ZXh0ID0gdGhpcztcbiAgICAvLyBkZWZpbmUgc2NvcGUgcHJvcGVydGllc1xuICAgIC8vIGltcG9ydGFudDogZGVmaW5lIHRoZSBzY29wZSBhbGlhcyB3aXRob3V0IGZvcmNlZCBjb252ZXJzaW9uXG4gICAgLy8gc28gdGhhdCBmcm96ZW4gZGF0YSBzdHJ1Y3R1cmVzIHJlbWFpbiBub24tcmVhY3RpdmUuXG4gICAgd2l0aG91dENvbnZlcnNpb24oZnVuY3Rpb24gKCkge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsIGFsaWFzLCB2YWx1ZSk7XG4gICAgfSk7XG4gICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICckaW5kZXgnLCBpbmRleCk7XG4gICAgaWYgKGtleSkge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoc2NvcGUsICcka2V5Jywga2V5KTtcbiAgICB9IGVsc2UgaWYgKHNjb3BlLiRrZXkpIHtcbiAgICAgIC8vIGF2b2lkIGFjY2lkZW50YWwgZmFsbGJhY2tcbiAgICAgIGRlZihzY29wZSwgJyRrZXknLCBudWxsKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaXRlcmF0b3IpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCB0aGlzLml0ZXJhdG9yLCBrZXkgIT09IG51bGwgPyBrZXkgOiBpbmRleCk7XG4gICAgfVxuICAgIHZhciBmcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZShob3N0LCBzY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgZnJhZy5mb3JJZCA9IHRoaXMuaWQ7XG4gICAgdGhpcy5jYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpO1xuICAgIHJldHVybiBmcmFnO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHYtcmVmIG9uIG93bmVyIHZtLlxuICAgKi9cblxuICB1cGRhdGVSZWY6IGZ1bmN0aW9uIHVwZGF0ZVJlZigpIHtcbiAgICB2YXIgcmVmID0gdGhpcy5kZXNjcmlwdG9yLnJlZjtcbiAgICBpZiAoIXJlZikgcmV0dXJuO1xuICAgIHZhciBoYXNoID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRyZWZzO1xuICAgIHZhciByZWZzO1xuICAgIGlmICghdGhpcy5mcm9tT2JqZWN0KSB7XG4gICAgICByZWZzID0gdGhpcy5mcmFncy5tYXAoZmluZFZtRnJvbUZyYWcpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZWZzID0ge307XG4gICAgICB0aGlzLmZyYWdzLmZvckVhY2goZnVuY3Rpb24gKGZyYWcpIHtcbiAgICAgICAgcmVmc1tmcmFnLnNjb3BlLiRrZXldID0gZmluZFZtRnJvbUZyYWcoZnJhZyk7XG4gICAgICB9KTtcbiAgICB9XG4gICAgaGFzaFtyZWZdID0gcmVmcztcbiAgfSxcblxuICAvKipcbiAgICogRm9yIG9wdGlvbiBsaXN0cywgdXBkYXRlIHRoZSBjb250YWluaW5nIHYtbW9kZWwgb25cbiAgICogcGFyZW50IDxzZWxlY3Q+LlxuICAgKi9cblxuICB1cGRhdGVNb2RlbDogZnVuY3Rpb24gdXBkYXRlTW9kZWwoKSB7XG4gICAgaWYgKHRoaXMuaXNPcHRpb24pIHtcbiAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnN0YXJ0LnBhcmVudE5vZGU7XG4gICAgICB2YXIgbW9kZWwgPSBwYXJlbnQgJiYgcGFyZW50Ll9fdl9tb2RlbDtcbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICBtb2RlbC5mb3JjZVVwZGF0ZSgpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW5zZXJ0IGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcbiAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG4gICAqL1xuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGZyYWcsIGluZGV4LCBwcmV2RWwsIGluRG9jdW1lbnQpIHtcbiAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgIH1cbiAgICB2YXIgc3RhZ2dlckFtb3VudCA9IHRoaXMuZ2V0U3RhZ2dlcihmcmFnLCBpbmRleCwgbnVsbCwgJ2VudGVyJyk7XG4gICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuICAgICAgLy8gY3JlYXRlIGFuIGFuY2hvciBhbmQgaW5zZXJ0IGl0IHN5bmNocm9ub3VzbHksXG4gICAgICAvLyBzbyB0aGF0IHdlIGNhbiByZXNvbHZlIHRoZSBjb3JyZWN0IG9yZGVyIHdpdGhvdXRcbiAgICAgIC8vIHdvcnJ5aW5nIGFib3V0IHNvbWUgZWxlbWVudHMgbm90IGluc2VydGVkIHlldFxuICAgICAgdmFyIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvcjtcbiAgICAgIGlmICghYW5jaG9yKSB7XG4gICAgICAgIGFuY2hvciA9IGZyYWcuc3RhZ2dlckFuY2hvciA9IGNyZWF0ZUFuY2hvcignc3RhZ2dlci1hbmNob3InKTtcbiAgICAgICAgYW5jaG9yLl9fdl9mcmFnID0gZnJhZztcbiAgICAgIH1cbiAgICAgIGFmdGVyKGFuY2hvciwgcHJldkVsKTtcbiAgICAgIHZhciBvcCA9IGZyYWcuc3RhZ2dlckNiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKCkge1xuICAgICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG4gICAgICAgIGZyYWcuYmVmb3JlKGFuY2hvcik7XG4gICAgICAgIHJlbW92ZShhbmNob3IpO1xuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHRhcmdldCA9IHByZXZFbC5uZXh0U2libGluZztcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKCF0YXJnZXQpIHtcbiAgICAgICAgLy8gcmVzZXQgZW5kIGFuY2hvciBwb3NpdGlvbiBpbiBjYXNlIHRoZSBwb3NpdGlvbiB3YXMgbWVzc2VkIHVwXG4gICAgICAgIC8vIGJ5IGFuIGV4dGVybmFsIGRyYWctbi1kcm9wIGxpYnJhcnkuXG4gICAgICAgIGFmdGVyKHRoaXMuZW5kLCBwcmV2RWwpO1xuICAgICAgICB0YXJnZXQgPSB0aGlzLmVuZDtcbiAgICAgIH1cbiAgICAgIGZyYWcuYmVmb3JlKHRhcmdldCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgYSBmcmFnbWVudC4gSGFuZGxlcyBzdGFnZ2VyaW5nLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge051bWJlcn0gdG90YWxcbiAgICogQHBhcmFtIHtCb29sZWFufSBpbkRvY3VtZW50XG4gICAqL1xuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGZyYWcsIGluZGV4LCB0b3RhbCwgaW5Eb2N1bWVudCkge1xuICAgIGlmIChmcmFnLnN0YWdnZXJDYikge1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IuY2FuY2VsKCk7XG4gICAgICBmcmFnLnN0YWdnZXJDYiA9IG51bGw7XG4gICAgICAvLyBpdCdzIG5vdCBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgZnJhZyB0byBiZSByZW1vdmVkXG4gICAgICAvLyB0d2ljZSwgc28gaWYgd2UgaGF2ZSBhIHBlbmRpbmcgc3RhZ2dlciBjYWxsYmFjayxcbiAgICAgIC8vIGl0IG1lYW5zIHRoaXMgZnJhZyBpcyBxdWV1ZWQgZm9yIGVudGVyIGJ1dCByZW1vdmVkXG4gICAgICAvLyBiZWZvcmUgaXRzIHRyYW5zaXRpb24gc3RhcnRlZC4gU2luY2UgaXQgaXMgYWxyZWFkeVxuICAgICAgLy8gZGVzdHJveWVkLCB3ZSBjYW4ganVzdCBsZWF2ZSBpdCBpbiBkZXRhY2hlZCBzdGF0ZS5cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCAnbGVhdmUnKTtcbiAgICBpZiAoaW5Eb2N1bWVudCAmJiBzdGFnZ2VyQW1vdW50KSB7XG4gICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgICBmcmFnLnJlbW92ZSgpO1xuICAgICAgfSk7XG4gICAgICBzZXRUaW1lb3V0KG9wLCBzdGFnZ2VyQW1vdW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZy5yZW1vdmUoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIE1vdmUgYSBmcmFnbWVudCB0byBhIG5ldyBwb3NpdGlvbi5cbiAgICogRm9yY2Ugbm8gdHJhbnNpdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge05vZGV9IHByZXZFbFxuICAgKi9cblxuICBtb3ZlOiBmdW5jdGlvbiBtb3ZlKGZyYWcsIHByZXZFbCkge1xuICAgIC8vIGZpeCBhIGNvbW1vbiBpc3N1ZSB3aXRoIFNvcnRhYmxlOlxuICAgIC8vIGlmIHByZXZFbCBkb2Vzbid0IGhhdmUgbmV4dFNpYmxpbmcsIHRoaXMgbWVhbnMgaXQnc1xuICAgIC8vIGJlZW4gZHJhZ2dlZCBhZnRlciB0aGUgZW5kIGFuY2hvci4gSnVzdCByZS1wb3NpdGlvblxuICAgIC8vIHRoZSBlbmQgYW5jaG9yIHRvIHRoZSBlbmQgb2YgdGhlIGNvbnRhaW5lci5cbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXByZXZFbC5uZXh0U2libGluZykge1xuICAgICAgdGhpcy5lbmQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZCh0aGlzLmVuZCk7XG4gICAgfVxuICAgIGZyYWcuYmVmb3JlKHByZXZFbC5uZXh0U2libGluZywgZmFsc2UpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDYWNoZSBhIGZyYWdtZW50IHVzaW5nIHRyYWNrLWJ5IG9yIHRoZSBvYmplY3Qga2V5LlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICAgKi9cblxuICBjYWNoZUZyYWc6IGZ1bmN0aW9uIGNhY2hlRnJhZyh2YWx1ZSwgZnJhZywgaW5kZXgsIGtleSkge1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlO1xuICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgIHZhciBpZDtcbiAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuICAgICAgaWYgKCFjYWNoZVtpZF0pIHtcbiAgICAgICAgY2FjaGVbaWRdID0gZnJhZztcbiAgICAgIH0gZWxzZSBpZiAodHJhY2tCeUtleSAhPT0gJyRpbmRleCcpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZCA9IHRoaXMuaWQ7XG4gICAgICBpZiAoaGFzT3duKHZhbHVlLCBpZCkpIHtcbiAgICAgICAgaWYgKHZhbHVlW2lkXSA9PT0gbnVsbCkge1xuICAgICAgICAgIHZhbHVlW2lkXSA9IGZyYWc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLndhcm5EdXBsaWNhdGUodmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKE9iamVjdC5pc0V4dGVuc2libGUodmFsdWUpKSB7XG4gICAgICAgIGRlZih2YWx1ZSwgaWQsIGZyYWcpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm4oJ0Zyb3plbiB2LWZvciBvYmplY3RzIGNhbm5vdCBiZSBhdXRvbWF0aWNhbGx5IHRyYWNrZWQsIG1ha2Ugc3VyZSB0byAnICsgJ3Byb3ZpZGUgYSB0cmFjay1ieSBrZXkuJyk7XG4gICAgICB9XG4gICAgfVxuICAgIGZyYWcucmF3ID0gdmFsdWU7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEdldCBhIGNhY2hlZCBmcmFnbWVudCBmcm9tIHRoZSB2YWx1ZS9pbmRleC9rZXlcbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAgICovXG5cbiAgZ2V0Q2FjaGVkRnJhZzogZnVuY3Rpb24gZ2V0Q2FjaGVkRnJhZyh2YWx1ZSwgaW5kZXgsIGtleSkge1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICB2YXIgZnJhZztcbiAgICBpZiAoa2V5IHx8IHRyYWNrQnlLZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIGZyYWcgPSB0aGlzLmNhY2hlW2lkXTtcbiAgICB9IGVsc2Uge1xuICAgICAgZnJhZyA9IHZhbHVlW3RoaXMuaWRdO1xuICAgIH1cbiAgICBpZiAoZnJhZyAmJiAoZnJhZy5yZXVzZWQgfHwgZnJhZy5mcmVzaCkpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZyYWc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIGZyYWdtZW50IGZyb20gY2FjaGUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICovXG5cbiAgZGVsZXRlQ2FjaGVkRnJhZzogZnVuY3Rpb24gZGVsZXRlQ2FjaGVkRnJhZyhmcmFnKSB7XG4gICAgdmFyIHZhbHVlID0gZnJhZy5yYXc7XG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuICAgIHZhciBzY29wZSA9IGZyYWcuc2NvcGU7XG4gICAgdmFyIGluZGV4ID0gc2NvcGUuJGluZGV4O1xuICAgIC8vIGZpeCAjOTQ4OiBhdm9pZCBhY2NpZGVudGFsbHkgZmFsbCB0aHJvdWdoIHRvXG4gICAgLy8gYSBwYXJlbnQgcmVwZWF0ZXIgd2hpY2ggaGFwcGVucyB0byBoYXZlICRrZXkuXG4gICAgdmFyIGtleSA9IGhhc093bihzY29wZSwgJyRrZXknKSAmJiBzY29wZS4ka2V5O1xuICAgIHZhciBwcmltaXRpdmUgPSAhaXNPYmplY3QodmFsdWUpO1xuICAgIGlmICh0cmFja0J5S2V5IHx8IGtleSB8fCBwcmltaXRpdmUpIHtcbiAgICAgIHZhciBpZCA9IGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpO1xuICAgICAgdGhpcy5jYWNoZVtpZF0gPSBudWxsO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YWx1ZVt0aGlzLmlkXSA9IG51bGw7XG4gICAgICBmcmFnLnJhdyA9IG51bGw7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgdGhlIHN0YWdnZXIgYW1vdW50IGZvciBhbiBpbnNlcnRpb24vcmVtb3ZhbC5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gICAqL1xuXG4gIGdldFN0YWdnZXI6IGZ1bmN0aW9uIGdldFN0YWdnZXIoZnJhZywgaW5kZXgsIHRvdGFsLCB0eXBlKSB7XG4gICAgdHlwZSA9IHR5cGUgKyAnU3RhZ2dlcic7XG4gICAgdmFyIHRyYW5zID0gZnJhZy5ub2RlLl9fdl90cmFucztcbiAgICB2YXIgaG9va3MgPSB0cmFucyAmJiB0cmFucy5ob29rcztcbiAgICB2YXIgaG9vayA9IGhvb2tzICYmIChob29rc1t0eXBlXSB8fCBob29rcy5zdGFnZ2VyKTtcbiAgICByZXR1cm4gaG9vayA/IGhvb2suY2FsbChmcmFnLCBpbmRleCwgdG90YWwpIDogaW5kZXggKiBwYXJzZUludCh0aGlzLnBhcmFtc1t0eXBlXSB8fCB0aGlzLnBhcmFtcy5zdGFnZ2VyLCAxMCk7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFByZS1wcm9jZXNzIHRoZSB2YWx1ZSBiZWZvcmUgcGlwaW5nIGl0IHRocm91Z2ggdGhlXG4gICAqIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG4gICAqL1xuXG4gIF9wcmVQcm9jZXNzOiBmdW5jdGlvbiBfcHJlUHJvY2Vzcyh2YWx1ZSkge1xuICAgIC8vIHJlZ2FyZGxlc3Mgb2YgdHlwZSwgc3RvcmUgdGhlIHVuLWZpbHRlcmVkIHJhdyB2YWx1ZS5cbiAgICB0aGlzLnJhd1ZhbHVlID0gdmFsdWU7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQb3N0LXByb2Nlc3MgdGhlIHZhbHVlIGFmdGVyIGl0IGhhcyBiZWVuIHBpcGVkIHRocm91Z2hcbiAgICogdGhlIGZpbHRlcnMuIFRoaXMgaXMgcGFzc2VkIHRvIGFuZCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIuXG4gICAqXG4gICAqIEl0IGlzIG5lY2Vzc2FyeSBmb3IgdGhpcyB0byBiZSBjYWxsZWQgZHVyaW5nIHRoZVxuICAgKiB3YXRjaGVyJ3MgZGVwZW5kZW5jeSBjb2xsZWN0aW9uIHBoYXNlIGJlY2F1c2Ugd2Ugd2FudFxuICAgKiB0aGUgdi1mb3IgdG8gdXBkYXRlIHdoZW4gdGhlIHNvdXJjZSBPYmplY3QgaXMgbXV0YXRlZC5cbiAgICovXG5cbiAgX3Bvc3RQcm9jZXNzOiBmdW5jdGlvbiBfcG9zdFByb2Nlc3ModmFsdWUpIHtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGlzUGxhaW5PYmplY3QodmFsdWUpKSB7XG4gICAgICAvLyBjb252ZXJ0IHBsYWluIG9iamVjdCB0byBhcnJheS5cbiAgICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsdWUpO1xuICAgICAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgICAgIHZhciByZXMgPSBuZXcgQXJyYXkoaSk7XG4gICAgICB2YXIga2V5O1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgICByZXNbaV0gPSB7XG4gICAgICAgICAgJGtleToga2V5LFxuICAgICAgICAgICR2YWx1ZTogdmFsdWVba2V5XVxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcztcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIWlzTmFOKHZhbHVlKSkge1xuICAgICAgICB2YWx1ZSA9IHJhbmdlKHZhbHVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZSB8fCBbXTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMuZGVzY3JpcHRvci5yZWYpIHtcbiAgICAgICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmc1t0aGlzLmRlc2NyaXB0b3IucmVmXSA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmZyYWdzKSB7XG4gICAgICB2YXIgaSA9IHRoaXMuZnJhZ3MubGVuZ3RoO1xuICAgICAgdmFyIGZyYWc7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGZyYWcgPSB0aGlzLmZyYWdzW2ldO1xuICAgICAgICB0aGlzLmRlbGV0ZUNhY2hlZEZyYWcoZnJhZyk7XG4gICAgICAgIGZyYWcuZGVzdHJveSgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBIZWxwZXIgdG8gZmluZCB0aGUgcHJldmlvdXMgZWxlbWVudCB0aGF0IGlzIGEgZnJhZ21lbnRcbiAqIGFuY2hvci4gVGhpcyBpcyBuZWNlc3NhcnkgYmVjYXVzZSBhIGRlc3Ryb3llZCBmcmFnJ3NcbiAqIGVsZW1lbnQgY291bGQgc3RpbGwgYmUgbGluZ2VyaW5nIGluIHRoZSBET00gYmVmb3JlIGl0c1xuICogbGVhdmluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLCBidXQgaXRzIGluc2VydGVkIGZsYWdcbiAqIHNob3VsZCBoYXZlIGJlZW4gc2V0IHRvIGZhbHNlIHNvIHdlIGNhbiBza2lwIHRoZW0uXG4gKlxuICogSWYgdGhpcyBpcyBhIGJsb2NrIHJlcGVhdCwgd2Ugd2FudCB0byBtYWtlIHN1cmUgd2Ugb25seVxuICogcmV0dXJuIGZyYWcgdGhhdCBpcyBib3VuZCB0byB0aGlzIHYtZm9yLiAoc2VlICM5MjkpXG4gKlxuICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtDb21tZW50fFRleHR9IGFuY2hvclxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBmaW5kUHJldkZyYWcoZnJhZywgYW5jaG9yLCBpZCkge1xuICB2YXIgZWwgPSBmcmFnLm5vZGUucHJldmlvdXNTaWJsaW5nO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCFlbCkgcmV0dXJuO1xuICBmcmFnID0gZWwuX192X2ZyYWc7XG4gIHdoaWxlICgoIWZyYWcgfHwgZnJhZy5mb3JJZCAhPT0gaWQgfHwgIWZyYWcuaW5zZXJ0ZWQpICYmIGVsICE9PSBhbmNob3IpIHtcbiAgICBlbCA9IGVsLnByZXZpb3VzU2libGluZztcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIWVsKSByZXR1cm47XG4gICAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuICB9XG4gIHJldHVybiBmcmFnO1xufVxuXG4vKipcbiAqIEZpbmQgYSB2bSBmcm9tIGEgZnJhZ21lbnQuXG4gKlxuICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBmaW5kVm1Gcm9tRnJhZyhmcmFnKSB7XG4gIHZhciBub2RlID0gZnJhZy5ub2RlO1xuICAvLyBoYW5kbGUgbXVsdGktbm9kZSBmcmFnXG4gIGlmIChmcmFnLmVuZCkge1xuICAgIHdoaWxlICghbm9kZS5fX3Z1ZV9fICYmIG5vZGUgIT09IGZyYWcuZW5kICYmIG5vZGUubmV4dFNpYmxpbmcpIHtcbiAgICAgIG5vZGUgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIH1cbiAgfVxuICByZXR1cm4gbm9kZS5fX3Z1ZV9fO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHJhbmdlIGFycmF5IGZyb20gZ2l2ZW4gbnVtYmVyLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiByYW5nZShuKSB7XG4gIHZhciBpID0gLTE7XG4gIHZhciByZXQgPSBuZXcgQXJyYXkoTWF0aC5mbG9vcihuKSk7XG4gIHdoaWxlICgrK2kgPCBuKSB7XG4gICAgcmV0W2ldID0gaTtcbiAgfVxuICByZXR1cm4gcmV0O1xufVxuXG4vKipcbiAqIEdldCB0aGUgdHJhY2sgYnkga2V5IGZvciBhbiBpdGVtLlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtTdHJpbmd9IFt0cmFja0J5S2V5XVxuICovXG5cbmZ1bmN0aW9uIGdldFRyYWNrQnlLZXkoaW5kZXgsIGtleSwgdmFsdWUsIHRyYWNrQnlLZXkpIHtcbiAgcmV0dXJuIHRyYWNrQnlLZXkgPyB0cmFja0J5S2V5ID09PSAnJGluZGV4JyA/IGluZGV4IDogdHJhY2tCeUtleS5jaGFyQXQoMCkubWF0Y2goL1xcdy8pID8gZ2V0UGF0aCh2YWx1ZSwgdHJhY2tCeUtleSkgOiB2YWx1ZVt0cmFja0J5S2V5XSA6IGtleSB8fCB2YWx1ZTtcbn1cblxuaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgdkZvci53YXJuRHVwbGljYXRlID0gZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgd2FybignRHVwbGljYXRlIHZhbHVlIGZvdW5kIGluIHYtZm9yPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyBKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnLiBVc2UgdHJhY2stYnk9XCIkaW5kZXhcIiBpZiAnICsgJ3lvdSBhcmUgZXhwZWN0aW5nIGR1cGxpY2F0ZSB2YWx1ZXMuJywgdGhpcy52bSk7XG4gIH07XG59XG5cbnZhciB2SWYgPSB7XG5cbiAgcHJpb3JpdHk6IElGLFxuICB0ZXJtaW5hbDogdHJ1ZSxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKCFlbC5fX3Z1ZV9fKSB7XG4gICAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG4gICAgICB2YXIgbmV4dCA9IGVsLm5leHRFbGVtZW50U2libGluZztcbiAgICAgIGlmIChuZXh0ICYmIGdldEF0dHIobmV4dCwgJ3YtZWxzZScpICE9PSBudWxsKSB7XG4gICAgICAgIHJlbW92ZShuZXh0KTtcbiAgICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuICAgICAgfVxuICAgICAgLy8gY2hlY2sgbWFpbiBibG9ja1xuICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaWYnKTtcbiAgICAgIHJlcGxhY2UoZWwsIHRoaXMuYW5jaG9yKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LWlmPVwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiBjYW5ub3QgYmUgJyArICd1c2VkIG9uIGFuIGluc3RhbmNlIHJvb3QgZWxlbWVudC4nLCB0aGlzLnZtKTtcbiAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuaW52YWxpZCkgcmV0dXJuO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgaWYgKCF0aGlzLmZyYWcpIHtcbiAgICAgICAgdGhpcy5pbnNlcnQoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5yZW1vdmUoKTtcbiAgICB9XG4gIH0sXG5cbiAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoKSB7XG4gICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcbiAgICAgIHRoaXMuZWxzZUZyYWcucmVtb3ZlKCk7XG4gICAgICB0aGlzLmVsc2VGcmFnID0gbnVsbDtcbiAgICB9XG4gICAgLy8gbGF6eSBpbml0IGZhY3RvcnlcbiAgICBpZiAoIXRoaXMuZmFjdG9yeSkge1xuICAgICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgICB9XG4gICAgdGhpcy5mcmFnID0gdGhpcy5mYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgdGhpcy5mcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG4gIH0sXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7XG4gICAgaWYgKHRoaXMuZnJhZykge1xuICAgICAgdGhpcy5mcmFnLnJlbW92ZSgpO1xuICAgICAgdGhpcy5mcmFnID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuZWxzZUVsICYmICF0aGlzLmVsc2VGcmFnKSB7XG4gICAgICBpZiAoIXRoaXMuZWxzZUZhY3RvcnkpIHtcbiAgICAgICAgdGhpcy5lbHNlRmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy5lbHNlRWwuX2NvbnRleHQgfHwgdGhpcy52bSwgdGhpcy5lbHNlRWwpO1xuICAgICAgfVxuICAgICAgdGhpcy5lbHNlRnJhZyA9IHRoaXMuZWxzZUZhY3RvcnkuY3JlYXRlKHRoaXMuX2hvc3QsIHRoaXMuX3Njb3BlLCB0aGlzLl9mcmFnKTtcbiAgICAgIHRoaXMuZWxzZUZyYWcuYmVmb3JlKHRoaXMuYW5jaG9yKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMuZnJhZykge1xuICAgICAgdGhpcy5mcmFnLmRlc3Ryb3koKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuZWxzZUZyYWcpIHtcbiAgICAgIHRoaXMuZWxzZUZyYWcuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHNob3cgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBjaGVjayBlbHNlIGJsb2NrXG4gICAgdmFyIG5leHQgPSB0aGlzLmVsLm5leHRFbGVtZW50U2libGluZztcbiAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5lbHNlRWwgPSBuZXh0O1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHRoaXMuYXBwbHkodGhpcy5lbCwgdmFsdWUpO1xuICAgIGlmICh0aGlzLmVsc2VFbCkge1xuICAgICAgdGhpcy5hcHBseSh0aGlzLmVsc2VFbCwgIXZhbHVlKTtcbiAgICB9XG4gIH0sXG5cbiAgYXBwbHk6IGZ1bmN0aW9uIGFwcGx5KGVsLCB2YWx1ZSkge1xuICAgIGlmIChpbkRvYyhlbCkpIHtcbiAgICAgIGFwcGx5VHJhbnNpdGlvbihlbCwgdmFsdWUgPyAxIDogLTEsIHRvZ2dsZSwgdGhpcy52bSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRvZ2dsZSgpO1xuICAgIH1cbiAgICBmdW5jdGlvbiB0b2dnbGUoKSB7XG4gICAgICBlbC5zdHlsZS5kaXNwbGF5ID0gdmFsdWUgPyAnJyA6ICdub25lJztcbiAgICB9XG4gIH1cbn07XG5cbnZhciB0ZXh0JDIgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgaXNSYW5nZSA9IGVsLnR5cGUgPT09ICdyYW5nZSc7XG4gICAgdmFyIGxhenkgPSB0aGlzLnBhcmFtcy5sYXp5O1xuICAgIHZhciBudW1iZXIgPSB0aGlzLnBhcmFtcy5udW1iZXI7XG4gICAgdmFyIGRlYm91bmNlID0gdGhpcy5wYXJhbXMuZGVib3VuY2U7XG5cbiAgICAvLyBoYW5kbGUgY29tcG9zaXRpb24gZXZlbnRzLlxuICAgIC8vICAgaHR0cDovL2Jsb2cuZXZhbnlvdS5tZS8yMDE0LzAxLzAzL2NvbXBvc2l0aW9uLWV2ZW50L1xuICAgIC8vIHNraXAgdGhpcyBmb3IgQW5kcm9pZCBiZWNhdXNlIGl0IGhhbmRsZXMgY29tcG9zaXRpb25cbiAgICAvLyBldmVudHMgcXVpdGUgZGlmZmVyZW50bHkuIEFuZHJvaWQgZG9lc24ndCB0cmlnZ2VyXG4gICAgLy8gY29tcG9zaXRpb24gZXZlbnRzIGZvciBsYW5ndWFnZSBpbnB1dCBtZXRob2RzIGUuZy5cbiAgICAvLyBDaGluZXNlLCBidXQgaW5zdGVhZCB0cmlnZ2VycyB0aGVtIGZvciBzcGVsbGluZ1xuICAgIC8vIHN1Z2dlc3Rpb25zLi4uIChzZWUgRGlzY3Vzc2lvbi8jMTYyKVxuICAgIHZhciBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICBpZiAoIWlzQW5kcm9pZCAmJiAhaXNSYW5nZSkge1xuICAgICAgdGhpcy5vbignY29tcG9zaXRpb25zdGFydCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY29tcG9zaW5nID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vbignY29tcG9zaXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbXBvc2luZyA9IGZhbHNlO1xuICAgICAgICAvLyBpbiBJRTExIHRoZSBcImNvbXBvc2l0aW9uZW5kXCIgZXZlbnQgZmlyZXMgQUZURVJcbiAgICAgICAgLy8gdGhlIFwiaW5wdXRcIiBldmVudCwgc28gdGhlIGlucHV0IGhhbmRsZXIgaXMgYmxvY2tlZFxuICAgICAgICAvLyBhdCB0aGUgZW5kLi4uIGhhdmUgdG8gY2FsbCBpdCBoZXJlLlxuICAgICAgICAvL1xuICAgICAgICAvLyAjMTMyNzogaW4gbGF6eSBtb2RlIHRoaXMgaXMgdW5lY2Vzc2FyeS5cbiAgICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBwcmV2ZW50IG1lc3Npbmcgd2l0aCB0aGUgaW5wdXQgd2hlbiB1c2VyIGlzIHR5cGluZyxcbiAgICAvLyBhbmQgZm9yY2UgdXBkYXRlIG9uIGJsdXIuXG4gICAgdGhpcy5mb2N1c2VkID0gZmFsc2U7XG4gICAgaWYgKCFpc1JhbmdlICYmICFsYXp5KSB7XG4gICAgICB0aGlzLm9uKCdmb2N1cycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5mb2N1c2VkID0gdHJ1ZTtcbiAgICAgIH0pO1xuICAgICAgdGhpcy5vbignYmx1cicsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5mb2N1c2VkID0gZmFsc2U7XG4gICAgICAgIC8vIGRvIG5vdCBzeW5jIHZhbHVlIGFmdGVyIGZyYWdtZW50IHJlbW92YWwgKCMyMDE3KVxuICAgICAgICBpZiAoIXNlbGYuX2ZyYWcgfHwgc2VsZi5fZnJhZy5pbnNlcnRlZCkge1xuICAgICAgICAgIHNlbGYucmF3TGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gTm93IGF0dGFjaCB0aGUgbWFpbiBsaXN0ZW5lclxuICAgIHRoaXMubGlzdGVuZXIgPSB0aGlzLnJhd0xpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKGNvbXBvc2luZyB8fCAhc2VsZi5fYm91bmQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIHZhbCA9IG51bWJlciB8fCBpc1JhbmdlID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG4gICAgICBzZWxmLnNldCh2YWwpO1xuICAgICAgLy8gZm9yY2UgdXBkYXRlIG9uIG5leHQgdGljayB0byBhdm9pZCBsb2NrICYgc2FtZSB2YWx1ZVxuICAgICAgLy8gYWxzbyBvbmx5IHVwZGF0ZSB3aGVuIHVzZXIgaXMgbm90IHR5cGluZ1xuICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoc2VsZi5fYm91bmQgJiYgIXNlbGYuZm9jdXNlZCkge1xuICAgICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIudmFsdWUpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLy8gYXBwbHkgZGVib3VuY2VcbiAgICBpZiAoZGVib3VuY2UpIHtcbiAgICAgIHRoaXMubGlzdGVuZXIgPSBfZGVib3VuY2UodGhpcy5saXN0ZW5lciwgZGVib3VuY2UpO1xuICAgIH1cblxuICAgIC8vIFN1cHBvcnQgalF1ZXJ5IGV2ZW50cywgc2luY2UgalF1ZXJ5LnRyaWdnZXIoKSBkb2Vzbid0XG4gICAgLy8gdHJpZ2dlciBuYXRpdmUgZXZlbnRzIGluIHNvbWUgY2FzZXMgYW5kIHNvbWUgcGx1Z2luc1xuICAgIC8vIHJlbHkgb24gJC50cmlnZ2VyKClcbiAgICAvL1xuICAgIC8vIFdlIHdhbnQgdG8gbWFrZSBzdXJlIGlmIGEgbGlzdGVuZXIgaXMgYXR0YWNoZWQgdXNpbmdcbiAgICAvLyBqUXVlcnksIGl0IGlzIGFsc28gcmVtb3ZlZCB3aXRoIGpRdWVyeSwgdGhhdCdzIHdoeVxuICAgIC8vIHdlIGRvIHRoZSBjaGVjayBmb3IgZWFjaCBkaXJlY3RpdmUgaW5zdGFuY2UgYW5kXG4gICAgLy8gc3RvcmUgdGhhdCBjaGVjayByZXN1bHQgb24gaXRzZWxmLiBUaGlzIGFsc28gYWxsb3dzXG4gICAgLy8gZWFzaWVyIHRlc3QgY292ZXJhZ2UgY29udHJvbCBieSB1bnNldHRpbmcgdGhlIGdsb2JhbFxuICAgIC8vIGpRdWVyeSB2YXJpYWJsZSBpbiB0ZXN0cy5cbiAgICB0aGlzLmhhc2pRdWVyeSA9IHR5cGVvZiBqUXVlcnkgPT09ICdmdW5jdGlvbic7XG4gICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG4gICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9uID8gJ29uJyA6ICdiaW5kJztcbiAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG4gICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLnJhd0xpc3RlbmVyKTtcbiAgICAgIGlmICghbGF6eSkge1xuICAgICAgICB0aGlzLm9uKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElFOSBkb2Vzbid0IGZpcmUgaW5wdXQgZXZlbnQgb24gYmFja3NwYWNlL2RlbC9jdXRcbiAgICBpZiAoIWxhenkgJiYgaXNJRTkpIHtcbiAgICAgIHRoaXMub24oJ2N1dCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgbmV4dFRpY2soc2VsZi5saXN0ZW5lcik7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2tleXVwJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gNDYgfHwgZS5rZXlDb2RlID09PSA4KSB7XG4gICAgICAgICAgc2VsZi5saXN0ZW5lcigpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyBzZXQgaW5pdGlhbCB2YWx1ZSBpZiBwcmVzZW50XG4gICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgndmFsdWUnKSB8fCBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnICYmIGVsLnZhbHVlLnRyaW0oKSkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIC8vICMzMDI5IG9ubHkgdXBkYXRlIHdoZW4gdGhlIHZhbHVlIGNoYW5nZXMuIFRoaXMgcHJldmVudFxuICAgIC8vIGJyb3dzZXJzIGZyb20gb3ZlcndyaXRpbmcgdmFsdWVzIGxpa2Ugc2VsZWN0aW9uU3RhcnRcbiAgICB2YWx1ZSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgaWYgKHZhbHVlICE9PSB0aGlzLmVsLnZhbHVlKSB0aGlzLmVsLnZhbHVlID0gdmFsdWU7XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBpZiAodGhpcy5oYXNqUXVlcnkpIHtcbiAgICAgIHZhciBtZXRob2QgPSBqUXVlcnkuZm4ub2ZmID8gJ29mZicgOiAndW5iaW5kJztcbiAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2lucHV0JywgdGhpcy5saXN0ZW5lcik7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcmFkaW8gPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyB2YWx1ZSBvdmVyd3JpdGUgdmlhIHYtYmluZDp2YWx1ZVxuICAgICAgaWYgKGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSkge1xuICAgICAgICByZXR1cm4gZWwuX3ZhbHVlO1xuICAgICAgfVxuICAgICAgdmFyIHZhbCA9IGVsLnZhbHVlO1xuICAgICAgaWYgKHNlbGYucGFyYW1zLm51bWJlcikge1xuICAgICAgICB2YWwgPSB0b051bWJlcih2YWwpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9O1xuXG4gICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHNlbGYuc2V0KHNlbGYuZ2V0VmFsdWUoKSk7XG4gICAgfTtcbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblxuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHRoaXMuZWwuY2hlY2tlZCA9IGxvb3NlRXF1YWwodmFsdWUsIHRoaXMuZ2V0VmFsdWUoKSk7XG4gIH1cbn07XG5cbnZhciBzZWxlY3QgPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICAvLyBtZXRob2QgdG8gZm9yY2UgdXBkYXRlIERPTSB1c2luZyBsYXRlc3QgdmFsdWUuXG4gICAgdGhpcy5mb3JjZVVwZGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChzZWxmLl93YXRjaGVyKSB7XG4gICAgICAgIHNlbGYudXBkYXRlKHNlbGYuX3dhdGNoZXIuZ2V0KCkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBjaGVjayBpZiB0aGlzIGlzIGEgbXVsdGlwbGUgc2VsZWN0XG4gICAgdmFyIG11bHRpcGxlID0gdGhpcy5tdWx0aXBsZSA9IGVsLmhhc0F0dHJpYnV0ZSgnbXVsdGlwbGUnKTtcblxuICAgIC8vIGF0dGFjaCBsaXN0ZW5lclxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgdmFsdWUgPSBnZXRWYWx1ZShlbCwgbXVsdGlwbGUpO1xuICAgICAgdmFsdWUgPSBzZWxmLnBhcmFtcy5udW1iZXIgPyBpc0FycmF5KHZhbHVlKSA/IHZhbHVlLm1hcCh0b051bWJlcikgOiB0b051bWJlcih2YWx1ZSkgOiB2YWx1ZTtcbiAgICAgIHNlbGYuc2V0KHZhbHVlKTtcbiAgICB9O1xuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuXG4gICAgLy8gaWYgaGFzIGluaXRpYWwgdmFsdWUsIHNldCBhZnRlckJpbmRcbiAgICB2YXIgaW5pdFZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlLCB0cnVlKTtcbiAgICBpZiAobXVsdGlwbGUgJiYgaW5pdFZhbHVlLmxlbmd0aCB8fCAhbXVsdGlwbGUgJiYgaW5pdFZhbHVlICE9PSBudWxsKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG4gICAgfVxuXG4gICAgLy8gQWxsIG1ham9yIGJyb3dzZXJzIGV4Y2VwdCBGaXJlZm94IHJlc2V0c1xuICAgIC8vIHNlbGVjdGVkSW5kZXggd2l0aCB2YWx1ZSAtMSB0byAwIHdoZW4gdGhlIGVsZW1lbnRcbiAgICAvLyBpcyBhcHBlbmRlZCB0byBhIG5ldyBwYXJlbnQsIHRoZXJlZm9yZSB3ZSBoYXZlIHRvXG4gICAgLy8gZm9yY2UgYSBET00gdXBkYXRlIHdoZW5ldmVyIHRoYXQgaGFwcGVucy4uLlxuICAgIHRoaXMudm0uJG9uKCdob29rOmF0dGFjaGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgbmV4dFRpY2soX3RoaXMuZm9yY2VVcGRhdGUpO1xuICAgIH0pO1xuICAgIGlmICghaW5Eb2MoZWwpKSB7XG4gICAgICBuZXh0VGljayh0aGlzLmZvcmNlVXBkYXRlKTtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGVsLnNlbGVjdGVkSW5kZXggPSAtMTtcbiAgICB2YXIgbXVsdGkgPSB0aGlzLm11bHRpcGxlICYmIGlzQXJyYXkodmFsdWUpO1xuICAgIHZhciBvcHRpb25zID0gZWwub3B0aW9ucztcbiAgICB2YXIgaSA9IG9wdGlvbnMubGVuZ3RoO1xuICAgIHZhciBvcCwgdmFsO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIG9wID0gb3B0aW9uc1tpXTtcbiAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuICAgICAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gICAgICBvcC5zZWxlY3RlZCA9IG11bHRpID8gaW5kZXhPZiQxKHZhbHVlLCB2YWwpID4gLTEgOiBsb29zZUVxdWFsKHZhbHVlLCB2YWwpO1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBlcWVxZXEgKi9cbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICB0aGlzLnZtLiRvZmYoJ2hvb2s6YXR0YWNoZWQnLCB0aGlzLmZvcmNlVXBkYXRlKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgc2VsZWN0IHZhbHVlXG4gKlxuICogQHBhcmFtIHtTZWxlY3RFbGVtZW50fSBlbFxuICogQHBhcmFtIHtCb29sZWFufSBtdWx0aVxuICogQHBhcmFtIHtCb29sZWFufSBpbml0XG4gKiBAcmV0dXJuIHtBcnJheXwqfVxuICovXG5cbmZ1bmN0aW9uIGdldFZhbHVlKGVsLCBtdWx0aSwgaW5pdCkge1xuICB2YXIgcmVzID0gbXVsdGkgPyBbXSA6IG51bGw7XG4gIHZhciBvcCwgdmFsLCBzZWxlY3RlZDtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBlbC5vcHRpb25zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIG9wID0gZWwub3B0aW9uc1tpXTtcbiAgICBzZWxlY3RlZCA9IGluaXQgPyBvcC5oYXNBdHRyaWJ1dGUoJ3NlbGVjdGVkJykgOiBvcC5zZWxlY3RlZDtcbiAgICBpZiAoc2VsZWN0ZWQpIHtcbiAgICAgIHZhbCA9IG9wLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IG9wLl92YWx1ZSA6IG9wLnZhbHVlO1xuICAgICAgaWYgKG11bHRpKSB7XG4gICAgICAgIHJlcy5wdXNoKHZhbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIE5hdGl2ZSBBcnJheS5pbmRleE9mIHVzZXMgc3RyaWN0IGVxdWFsLCBidXQgaW4gdGhpc1xuICogY2FzZSB3ZSBuZWVkIHRvIG1hdGNoIHN0cmluZy9udW1iZXJzIHdpdGggY3VzdG9tIGVxdWFsLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGFyclxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBpbmRleE9mJDEoYXJyLCB2YWwpIHtcbiAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKGxvb3NlRXF1YWwoYXJyW2ldLCB2YWwpKSB7XG4gICAgICByZXR1cm4gaTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIC0xO1xufVxuXG52YXIgY2hlY2tib3ggPSB7XG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcblxuICAgIHRoaXMuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gZWwuaGFzT3duUHJvcGVydHkoJ192YWx1ZScpID8gZWwuX3ZhbHVlIDogc2VsZi5wYXJhbXMubnVtYmVyID8gdG9OdW1iZXIoZWwudmFsdWUpIDogZWwudmFsdWU7XG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIGdldEJvb2xlYW5WYWx1ZSgpIHtcbiAgICAgIHZhciB2YWwgPSBlbC5jaGVja2VkO1xuICAgICAgaWYgKHZhbCAmJiBlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBlbC5fdHJ1ZVZhbHVlO1xuICAgICAgfVxuICAgICAgaWYgKCF2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ19mYWxzZVZhbHVlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsLl9mYWxzZVZhbHVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHZhbDtcbiAgICB9XG5cbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIG1vZGVsID0gc2VsZi5fd2F0Y2hlci52YWx1ZTtcbiAgICAgIGlmIChpc0FycmF5KG1vZGVsKSkge1xuICAgICAgICB2YXIgdmFsID0gc2VsZi5nZXRWYWx1ZSgpO1xuICAgICAgICBpZiAoZWwuY2hlY2tlZCkge1xuICAgICAgICAgIGlmIChpbmRleE9mKG1vZGVsLCB2YWwpIDwgMCkge1xuICAgICAgICAgICAgbW9kZWwucHVzaCh2YWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBtb2RlbC4kcmVtb3ZlKHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNlbGYuc2V0KGdldEJvb2xlYW5WYWx1ZSgpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgaWYgKGVsLmhhc0F0dHJpYnV0ZSgnY2hlY2tlZCcpKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCA9IHRoaXMubGlzdGVuZXI7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIGVsLmNoZWNrZWQgPSBpbmRleE9mKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpID4gLTE7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3RydWVWYWx1ZScpKSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCBlbC5fdHJ1ZVZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGVsLmNoZWNrZWQgPSAhIXZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxudmFyIGhhbmRsZXJzID0ge1xuICB0ZXh0OiB0ZXh0JDIsXG4gIHJhZGlvOiByYWRpbyxcbiAgc2VsZWN0OiBzZWxlY3QsXG4gIGNoZWNrYm94OiBjaGVja2JveFxufTtcblxudmFyIG1vZGVsID0ge1xuXG4gIHByaW9yaXR5OiBNT0RFTCxcbiAgdHdvV2F5OiB0cnVlLFxuICBoYW5kbGVyczogaGFuZGxlcnMsXG4gIHBhcmFtczogWydsYXp5JywgJ251bWJlcicsICdkZWJvdW5jZSddLFxuXG4gIC8qKlxuICAgKiBQb3NzaWJsZSBlbGVtZW50czpcbiAgICogICA8c2VsZWN0PlxuICAgKiAgIDx0ZXh0YXJlYT5cbiAgICogICA8aW5wdXQgdHlwZT1cIipcIj5cbiAgICogICAgIC0gdGV4dFxuICAgKiAgICAgLSBjaGVja2JveFxuICAgKiAgICAgLSByYWRpb1xuICAgKiAgICAgLSBudW1iZXJcbiAgICovXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBmcmllbmRseSB3YXJuaW5nLi4uXG4gICAgdGhpcy5jaGVja0ZpbHRlcnMoKTtcbiAgICBpZiAodGhpcy5oYXNSZWFkICYmICF0aGlzLmhhc1dyaXRlKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgYSByZWFkLW9ubHkgZmlsdGVyIHdpdGggJyArICd2LW1vZGVsPVwiJyArIHRoaXMuZGVzY3JpcHRvci5yYXcgKyAnXCIuICcgKyAnWW91IG1pZ2h0IHdhbnQgdG8gdXNlIGEgdHdvLXdheSBmaWx0ZXIgdG8gZW5zdXJlIGNvcnJlY3QgYmVoYXZpb3IuJywgdGhpcy52bSk7XG4gICAgfVxuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIHRhZyA9IGVsLnRhZ05hbWU7XG4gICAgdmFyIGhhbmRsZXI7XG4gICAgaWYgKHRhZyA9PT0gJ0lOUFVUJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzW2VsLnR5cGVdIHx8IGhhbmRsZXJzLnRleHQ7XG4gICAgfSBlbHNlIGlmICh0YWcgPT09ICdTRUxFQ1QnKSB7XG4gICAgICBoYW5kbGVyID0gaGFuZGxlcnMuc2VsZWN0O1xuICAgIH0gZWxzZSBpZiAodGFnID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICBoYW5kbGVyID0gaGFuZGxlcnMudGV4dDtcbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW1vZGVsIGRvZXMgbm90IHN1cHBvcnQgZWxlbWVudCB0eXBlOiAnICsgdGFnLCB0aGlzLnZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWwuX192X21vZGVsID0gdGhpcztcbiAgICBoYW5kbGVyLmJpbmQuY2FsbCh0aGlzKTtcbiAgICB0aGlzLnVwZGF0ZSA9IGhhbmRsZXIudXBkYXRlO1xuICAgIHRoaXMuX3VuYmluZCA9IGhhbmRsZXIudW5iaW5kO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDaGVjayByZWFkL3dyaXRlIGZpbHRlciBzdGF0cy5cbiAgICovXG5cbiAgY2hlY2tGaWx0ZXJzOiBmdW5jdGlvbiBjaGVja0ZpbHRlcnMoKSB7XG4gICAgdmFyIGZpbHRlcnMgPSB0aGlzLmZpbHRlcnM7XG4gICAgaWYgKCFmaWx0ZXJzKSByZXR1cm47XG4gICAgdmFyIGkgPSBmaWx0ZXJzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YXIgZmlsdGVyID0gcmVzb2x2ZUFzc2V0KHRoaXMudm0uJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyc1tpXS5uYW1lKTtcbiAgICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nIHx8IGZpbHRlci5yZWFkKSB7XG4gICAgICAgIHRoaXMuaGFzUmVhZCA9IHRydWU7XG4gICAgICB9XG4gICAgICBpZiAoZmlsdGVyLndyaXRlKSB7XG4gICAgICAgIHRoaXMuaGFzV3JpdGUgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLmVsLl9fdl9tb2RlbCA9IG51bGw7XG4gICAgdGhpcy5fdW5iaW5kICYmIHRoaXMuX3VuYmluZCgpO1xuICB9XG59O1xuXG4vLyBrZXlDb2RlIGFsaWFzZXNcbnZhciBrZXlDb2RlcyA9IHtcbiAgZXNjOiAyNyxcbiAgdGFiOiA5LFxuICBlbnRlcjogMTMsXG4gIHNwYWNlOiAzMixcbiAgJ2RlbGV0ZSc6IFs4LCA0Nl0sXG4gIHVwOiAzOCxcbiAgbGVmdDogMzcsXG4gIHJpZ2h0OiAzOSxcbiAgZG93bjogNDBcbn07XG5cbmZ1bmN0aW9uIGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKSB7XG4gIHZhciBjb2RlcyA9IGtleXMubWFwKGZ1bmN0aW9uIChrZXkpIHtcbiAgICB2YXIgY2hhckNvZGUgPSBrZXkuY2hhckNvZGVBdCgwKTtcbiAgICBpZiAoY2hhckNvZGUgPiA0NyAmJiBjaGFyQ29kZSA8IDU4KSB7XG4gICAgICByZXR1cm4gcGFyc2VJbnQoa2V5LCAxMCk7XG4gICAgfVxuICAgIGlmIChrZXkubGVuZ3RoID09PSAxKSB7XG4gICAgICBjaGFyQ29kZSA9IGtleS50b1VwcGVyQ2FzZSgpLmNoYXJDb2RlQXQoMCk7XG4gICAgICBpZiAoY2hhckNvZGUgPiA2NCAmJiBjaGFyQ29kZSA8IDkxKSB7XG4gICAgICAgIHJldHVybiBjaGFyQ29kZTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGtleUNvZGVzW2tleV07XG4gIH0pO1xuICBjb2RlcyA9IFtdLmNvbmNhdC5hcHBseShbXSwgY29kZXMpO1xuICByZXR1cm4gZnVuY3Rpb24ga2V5SGFuZGxlcihlKSB7XG4gICAgaWYgKGNvZGVzLmluZGV4T2YoZS5rZXlDb2RlKSA+IC0xKSB7XG4gICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICAgIH1cbiAgfTtcbn1cblxuZnVuY3Rpb24gc3RvcEZpbHRlcihoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBzdG9wSGFuZGxlcihlKSB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICB9O1xufVxuXG5mdW5jdGlvbiBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHByZXZlbnRIYW5kbGVyKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gc2VsZkZpbHRlcihoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBzZWxmSGFuZGxlcihlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlLmN1cnJlbnRUYXJnZXQpIHtcbiAgICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gICAgfVxuICB9O1xufVxuXG52YXIgb24kMSA9IHtcblxuICBwcmlvcml0eTogT04sXG4gIGFjY2VwdFN0YXRlbWVudDogdHJ1ZSxcbiAga2V5Q29kZXM6IGtleUNvZGVzLFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gZGVhbCB3aXRoIGlmcmFtZXNcbiAgICBpZiAodGhpcy5lbC50YWdOYW1lID09PSAnSUZSQU1FJyAmJiB0aGlzLmFyZyAhPT0gJ2xvYWQnKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICB0aGlzLmlmcmFtZUJpbmQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG9uKHNlbGYuZWwuY29udGVudFdpbmRvdywgc2VsZi5hcmcsIHNlbGYuaGFuZGxlciwgc2VsZi5tb2RpZmllcnMuY2FwdHVyZSk7XG4gICAgICB9O1xuICAgICAgdGhpcy5vbignbG9hZCcsIHRoaXMuaWZyYW1lQmluZCk7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGhhbmRsZXIpIHtcbiAgICAvLyBzdHViIGEgbm9vcCBmb3Igdi1vbiB3aXRoIG5vIHZhbHVlLFxuICAgIC8vIGUuZy4gQG1vdXNlZG93bi5wcmV2ZW50XG4gICAgaWYgKCF0aGlzLmRlc2NyaXB0b3IucmF3KSB7XG4gICAgICBoYW5kbGVyID0gZnVuY3Rpb24gKCkge307XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBoYW5kbGVyICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3Ytb246JyArIHRoaXMuYXJnICsgJz1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgZXhwZWN0cyBhIGZ1bmN0aW9uIHZhbHVlLCAnICsgJ2dvdCAnICsgaGFuZGxlciwgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gYXBwbHkgbW9kaWZpZXJzXG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLnN0b3ApIHtcbiAgICAgIGhhbmRsZXIgPSBzdG9wRmlsdGVyKGhhbmRsZXIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RpZmllcnMucHJldmVudCkge1xuICAgICAgaGFuZGxlciA9IHByZXZlbnRGaWx0ZXIoaGFuZGxlcik7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGlmaWVycy5zZWxmKSB7XG4gICAgICBoYW5kbGVyID0gc2VsZkZpbHRlcihoYW5kbGVyKTtcbiAgICB9XG4gICAgLy8ga2V5IGZpbHRlclxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModGhpcy5tb2RpZmllcnMpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4ga2V5ICE9PSAnc3RvcCcgJiYga2V5ICE9PSAncHJldmVudCcgJiYga2V5ICE9PSAnc2VsZicgJiYga2V5ICE9PSAnY2FwdHVyZSc7XG4gICAgfSk7XG4gICAgaWYgKGtleXMubGVuZ3RoKSB7XG4gICAgICBoYW5kbGVyID0ga2V5RmlsdGVyKGhhbmRsZXIsIGtleXMpO1xuICAgIH1cblxuICAgIHRoaXMucmVzZXQoKTtcbiAgICB0aGlzLmhhbmRsZXIgPSBoYW5kbGVyO1xuXG4gICAgaWYgKHRoaXMuaWZyYW1lQmluZCkge1xuICAgICAgdGhpcy5pZnJhbWVCaW5kKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG9uKHRoaXMuZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIsIHRoaXMubW9kaWZpZXJzLmNhcHR1cmUpO1xuICAgIH1cbiAgfSxcblxuICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5pZnJhbWVCaW5kID8gdGhpcy5lbC5jb250ZW50V2luZG93IDogdGhpcy5lbDtcbiAgICBpZiAodGhpcy5oYW5kbGVyKSB7XG4gICAgICBvZmYoZWwsIHRoaXMuYXJnLCB0aGlzLmhhbmRsZXIpO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLnJlc2V0KCk7XG4gIH1cbn07XG5cbnZhciBwcmVmaXhlcyA9IFsnLXdlYmtpdC0nLCAnLW1vei0nLCAnLW1zLSddO1xudmFyIGNhbWVsUHJlZml4ZXMgPSBbJ1dlYmtpdCcsICdNb3onLCAnbXMnXTtcbnZhciBpbXBvcnRhbnRSRSA9IC8haW1wb3J0YW50Oz8kLztcbnZhciBwcm9wQ2FjaGUgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuXG52YXIgdGVzdEVsID0gbnVsbDtcblxudmFyIHN0eWxlID0ge1xuXG4gIGRlZXA6IHRydWUsXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5lbC5zdHlsZS5jc3NUZXh0ID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUucmVkdWNlKGV4dGVuZCwge30pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5oYW5kbGVPYmplY3QodmFsdWUgfHwge30pO1xuICAgIH1cbiAgfSxcblxuICBoYW5kbGVPYmplY3Q6IGZ1bmN0aW9uIGhhbmRsZU9iamVjdCh2YWx1ZSkge1xuICAgIC8vIGNhY2hlIG9iamVjdCBzdHlsZXMgc28gdGhhdCBvbmx5IGNoYW5nZWQgcHJvcHNcbiAgICAvLyBhcmUgYWN0dWFsbHkgdXBkYXRlZC5cbiAgICB2YXIgY2FjaGUgPSB0aGlzLmNhY2hlIHx8ICh0aGlzLmNhY2hlID0ge30pO1xuICAgIHZhciBuYW1lLCB2YWw7XG4gICAgZm9yIChuYW1lIGluIGNhY2hlKSB7XG4gICAgICBpZiAoIShuYW1lIGluIHZhbHVlKSkge1xuICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCBudWxsKTtcbiAgICAgICAgZGVsZXRlIGNhY2hlW25hbWVdO1xuICAgICAgfVxuICAgIH1cbiAgICBmb3IgKG5hbWUgaW4gdmFsdWUpIHtcbiAgICAgIHZhbCA9IHZhbHVlW25hbWVdO1xuICAgICAgaWYgKHZhbCAhPT0gY2FjaGVbbmFtZV0pIHtcbiAgICAgICAgY2FjaGVbbmFtZV0gPSB2YWw7XG4gICAgICAgIHRoaXMuaGFuZGxlU2luZ2xlKG5hbWUsIHZhbCk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKHByb3AsIHZhbHVlKSB7XG4gICAgcHJvcCA9IG5vcm1hbGl6ZShwcm9wKTtcbiAgICBpZiAoIXByb3ApIHJldHVybjsgLy8gdW5zdXBwb3J0ZWQgcHJvcFxuICAgIC8vIGNhc3QgcG9zc2libGUgbnVtYmVycy9ib29sZWFucyBpbnRvIHN0cmluZ3NcbiAgICBpZiAodmFsdWUgIT0gbnVsbCkgdmFsdWUgKz0gJyc7XG4gICAgaWYgKHZhbHVlKSB7XG4gICAgICB2YXIgaXNJbXBvcnRhbnQgPSBpbXBvcnRhbnRSRS50ZXN0KHZhbHVlKSA/ICdpbXBvcnRhbnQnIDogJyc7XG4gICAgICBpZiAoaXNJbXBvcnRhbnQpIHtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgICAgd2FybignSXRcXCdzIHByb2JhYmx5IGEgYmFkIGlkZWEgdG8gdXNlICFpbXBvcnRhbnQgd2l0aCBpbmxpbmUgcnVsZXMuICcgKyAnVGhpcyBmZWF0dXJlIHdpbGwgYmUgZGVwcmVjYXRlZCBpbiBhIGZ1dHVyZSB2ZXJzaW9uIG9mIFZ1ZS4nKTtcbiAgICAgICAgfVxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoaW1wb3J0YW50UkUsICcnKS50cmltKCk7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuc2V0UHJvcGVydHkocHJvcC5rZWJhYiwgdmFsdWUsIGlzSW1wb3J0YW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSB2YWx1ZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbC5zdHlsZVtwcm9wLmNhbWVsXSA9ICcnO1xuICAgIH1cbiAgfVxuXG59O1xuXG4vKipcbiAqIE5vcm1hbGl6ZSBhIENTUyBwcm9wZXJ0eSBuYW1lLlxuICogLSBjYWNoZSByZXN1bHRcbiAqIC0gYXV0byBwcmVmaXhcbiAqIC0gY2FtZWxDYXNlIC0+IGRhc2gtY2FzZVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gbm9ybWFsaXplKHByb3ApIHtcbiAgaWYgKHByb3BDYWNoZVtwcm9wXSkge1xuICAgIHJldHVybiBwcm9wQ2FjaGVbcHJvcF07XG4gIH1cbiAgdmFyIHJlcyA9IHByZWZpeChwcm9wKTtcbiAgcHJvcENhY2hlW3Byb3BdID0gcHJvcENhY2hlW3Jlc10gPSByZXM7XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogQXV0byBkZXRlY3QgdGhlIGFwcHJvcHJpYXRlIHByZWZpeCBmb3IgYSBDU1MgcHJvcGVydHkuXG4gKiBodHRwczovL2dpc3QuZ2l0aHViLmNvbS9wYXVsaXJpc2gvNTIzNjkyXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHByb3BcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBwcmVmaXgocHJvcCkge1xuICBwcm9wID0gaHlwaGVuYXRlKHByb3ApO1xuICB2YXIgY2FtZWwgPSBjYW1lbGl6ZShwcm9wKTtcbiAgdmFyIHVwcGVyID0gY2FtZWwuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbC5zbGljZSgxKTtcbiAgaWYgKCF0ZXN0RWwpIHtcbiAgICB0ZXN0RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgfVxuICB2YXIgaSA9IHByZWZpeGVzLmxlbmd0aDtcbiAgdmFyIHByZWZpeGVkO1xuICBpZiAoY2FtZWwgIT09ICdmaWx0ZXInICYmIGNhbWVsIGluIHRlc3RFbC5zdHlsZSkge1xuICAgIHJldHVybiB7XG4gICAgICBrZWJhYjogcHJvcCxcbiAgICAgIGNhbWVsOiBjYW1lbFxuICAgIH07XG4gIH1cbiAgd2hpbGUgKGktLSkge1xuICAgIHByZWZpeGVkID0gY2FtZWxQcmVmaXhlc1tpXSArIHVwcGVyO1xuICAgIGlmIChwcmVmaXhlZCBpbiB0ZXN0RWwuc3R5bGUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGtlYmFiOiBwcmVmaXhlc1tpXSArIHByb3AsXG4gICAgICAgIGNhbWVsOiBwcmVmaXhlZFxuICAgICAgfTtcbiAgICB9XG4gIH1cbn1cblxuLy8geGxpbmtcbnZhciB4bGlua05TID0gJ2h0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsnO1xudmFyIHhsaW5rUkUgPSAvXnhsaW5rOi87XG5cbi8vIGNoZWNrIGZvciBhdHRyaWJ1dGVzIHRoYXQgcHJvaGliaXQgaW50ZXJwb2xhdGlvbnNcbnZhciBkaXNhbGxvd2VkSW50ZXJwQXR0clJFID0gL152LXxeOnxeQHxeKD86aXN8dHJhbnNpdGlvbnx0cmFuc2l0aW9uLW1vZGV8ZGVib3VuY2V8dHJhY2stYnl8c3RhZ2dlcnxlbnRlci1zdGFnZ2VyfGxlYXZlLXN0YWdnZXIpJC87XG4vLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBhbHNvIHNldCB0aGVpciBjb3JyZXNwb25kaW5nIHByb3BlcnRpZXNcbi8vIGJlY2F1c2UgdGhleSBvbmx5IGFmZmVjdCB0aGUgaW5pdGlhbCBzdGF0ZSBvZiB0aGUgZWxlbWVudFxudmFyIGF0dHJXaXRoUHJvcHNSRSA9IC9eKD86dmFsdWV8Y2hlY2tlZHxzZWxlY3RlZHxtdXRlZCkkLztcbi8vIHRoZXNlIGF0dHJpYnV0ZXMgZXhwZWN0IGVudW1yYXRlZCB2YWx1ZXMgb2YgXCJ0cnVlXCIgb3IgXCJmYWxzZVwiXG4vLyBidXQgYXJlIG5vdCBib29sZWFuIGF0dHJpYnV0ZXNcbnZhciBlbnVtZXJhdGVkQXR0clJFID0gL14oPzpkcmFnZ2FibGV8Y29udGVudGVkaXRhYmxlfHNwZWxsY2hlY2spJC87XG5cbi8vIHRoZXNlIGF0dHJpYnV0ZXMgc2hvdWxkIHNldCBhIGhpZGRlbiBwcm9wZXJ0eSBmb3Jcbi8vIGJpbmRpbmcgdi1tb2RlbCB0byBvYmplY3QgdmFsdWVzXG52YXIgbW9kZWxQcm9wcyA9IHtcbiAgdmFsdWU6ICdfdmFsdWUnLFxuICAndHJ1ZS12YWx1ZSc6ICdfdHJ1ZVZhbHVlJyxcbiAgJ2ZhbHNlLXZhbHVlJzogJ19mYWxzZVZhbHVlJ1xufTtcblxudmFyIGJpbmQkMSA9IHtcblxuICBwcmlvcml0eTogQklORCxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG4gICAgdmFyIHRhZyA9IHRoaXMuZWwudGFnTmFtZTtcbiAgICAvLyBzaG91bGQgYmUgZGVlcCB3YXRjaCBvbiBvYmplY3QgbW9kZVxuICAgIGlmICghYXR0cikge1xuICAgICAgdGhpcy5kZWVwID0gdHJ1ZTtcbiAgICB9XG4gICAgLy8gaGFuZGxlIGludGVycG9sYXRpb24gYmluZGluZ3NcbiAgICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcbiAgICB2YXIgdG9rZW5zID0gZGVzY3JpcHRvci5pbnRlcnA7XG4gICAgaWYgKHRva2Vucykge1xuICAgICAgLy8gaGFuZGxlIGludGVycG9sYXRpb25zIHdpdGggb25lLXRpbWUgdG9rZW5zXG4gICAgICBpZiAoZGVzY3JpcHRvci5oYXNPbmVUaW1lKSB7XG4gICAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IHRva2Vuc1RvRXhwKHRva2VucywgdGhpcy5fc2NvcGUgfHwgdGhpcy52bSk7XG4gICAgICB9XG5cbiAgICAgIC8vIG9ubHkgYWxsb3cgYmluZGluZyBvbiBuYXRpdmUgYXR0cmlidXRlc1xuICAgICAgaWYgKGRpc2FsbG93ZWRJbnRlcnBBdHRyUkUudGVzdChhdHRyKSB8fCBhdHRyID09PSAnbmFtZScgJiYgKHRhZyA9PT0gJ1BBUlRJQUwnIHx8IHRhZyA9PT0gJ1NMT1QnKSkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICcgKyAnYXR0cmlidXRlIGludGVycG9sYXRpb24gaXMgbm90IGFsbG93ZWQgaW4gVnVlLmpzICcgKyAnZGlyZWN0aXZlcyBhbmQgc3BlY2lhbCBhdHRyaWJ1dGVzLicsIHRoaXMudm0pO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgICAgdGhpcy5pbnZhbGlkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YXIgcmF3ID0gYXR0ciArICc9XCInICsgZGVzY3JpcHRvci5yYXcgKyAnXCI6ICc7XG4gICAgICAgIC8vIHdhcm4gc3JjXG4gICAgICAgIGlmIChhdHRyID09PSAnc3JjJykge1xuICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzcmNcIiBhdHRyaWJ1dGUgd2lsbCBjYXVzZSAnICsgJ2EgNDA0IHJlcXVlc3QuIFVzZSB2LWJpbmQ6c3JjIGluc3RlYWQuJywgdGhpcy52bSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyB3YXJuIHN0eWxlXG4gICAgICAgIGlmIChhdHRyID09PSAnc3R5bGUnKSB7XG4gICAgICAgICAgd2FybihyYXcgKyAnaW50ZXJwb2xhdGlvbiBpbiBcInN0eWxlXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICd0aGUgYXR0cmlidXRlIHRvIGJlIGRpc2NhcmRlZCBpbiBJbnRlcm5ldCBFeHBsb3Jlci4gJyArICdVc2Ugdi1iaW5kOnN0eWxlIGluc3RlYWQuJywgdGhpcy52bSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAodGhpcy5pbnZhbGlkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBhdHRyID0gdGhpcy5hcmc7XG4gICAgaWYgKHRoaXMuYXJnKSB7XG4gICAgICB0aGlzLmhhbmRsZVNpbmdsZShhdHRyLCB2YWx1ZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcbiAgICB9XG4gIH0sXG5cbiAgLy8gc2hhcmUgb2JqZWN0IGhhbmRsZXIgd2l0aCB2LWJpbmQ6Y2xhc3NcbiAgaGFuZGxlT2JqZWN0OiBzdHlsZS5oYW5kbGVPYmplY3QsXG5cbiAgaGFuZGxlU2luZ2xlOiBmdW5jdGlvbiBoYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciBpbnRlcnAgPSB0aGlzLmRlc2NyaXB0b3IuaW50ZXJwO1xuICAgIGlmICh0aGlzLm1vZGlmaWVycy5jYW1lbCkge1xuICAgICAgYXR0ciA9IGNhbWVsaXplKGF0dHIpO1xuICAgIH1cbiAgICBpZiAoIWludGVycCAmJiBhdHRyV2l0aFByb3BzUkUudGVzdChhdHRyKSAmJiBhdHRyIGluIGVsKSB7XG4gICAgICB2YXIgYXR0clZhbHVlID0gYXR0ciA9PT0gJ3ZhbHVlJyA/IHZhbHVlID09IG51bGwgLy8gSUU5IHdpbGwgc2V0IGlucHV0LnZhbHVlIHRvIFwibnVsbFwiIGZvciBudWxsLi4uXG4gICAgICA/ICcnIDogdmFsdWUgOiB2YWx1ZTtcblxuICAgICAgaWYgKGVsW2F0dHJdICE9PSBhdHRyVmFsdWUpIHtcbiAgICAgICAgZWxbYXR0cl0gPSBhdHRyVmFsdWU7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIHNldCBtb2RlbCBwcm9wc1xuICAgIHZhciBtb2RlbFByb3AgPSBtb2RlbFByb3BzW2F0dHJdO1xuICAgIGlmICghaW50ZXJwICYmIG1vZGVsUHJvcCkge1xuICAgICAgZWxbbW9kZWxQcm9wXSA9IHZhbHVlO1xuICAgICAgLy8gdXBkYXRlIHYtbW9kZWwgaWYgcHJlc2VudFxuICAgICAgdmFyIG1vZGVsID0gZWwuX192X21vZGVsO1xuICAgICAgaWYgKG1vZGVsKSB7XG4gICAgICAgIG1vZGVsLmxpc3RlbmVyKCk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIGRvIG5vdCBzZXQgdmFsdWUgYXR0cmlidXRlIGZvciB0ZXh0YXJlYVxuICAgIGlmIChhdHRyID09PSAndmFsdWUnICYmIGVsLnRhZ05hbWUgPT09ICdURVhUQVJFQScpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdXBkYXRlIGF0dHJpYnV0ZVxuICAgIGlmIChlbnVtZXJhdGVkQXR0clJFLnRlc3QoYXR0cikpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZShhdHRyLCB2YWx1ZSA/ICd0cnVlJyA6ICdmYWxzZScpO1xuICAgIH0gZWxzZSBpZiAodmFsdWUgIT0gbnVsbCAmJiB2YWx1ZSAhPT0gZmFsc2UpIHtcbiAgICAgIGlmIChhdHRyID09PSAnY2xhc3MnKSB7XG4gICAgICAgIC8vIGhhbmRsZSBlZGdlIGNhc2UgIzE5NjA6XG4gICAgICAgIC8vIGNsYXNzIGludGVycG9sYXRpb24gc2hvdWxkIG5vdCBvdmVyd3JpdGUgVnVlIHRyYW5zaXRpb24gY2xhc3NcbiAgICAgICAgaWYgKGVsLl9fdl90cmFucykge1xuICAgICAgICAgIHZhbHVlICs9ICcgJyArIGVsLl9fdl90cmFucy5pZCArICctdHJhbnNpdGlvbic7XG4gICAgICAgIH1cbiAgICAgICAgc2V0Q2xhc3MoZWwsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoeGxpbmtSRS50ZXN0KGF0dHIpKSB7XG4gICAgICAgIGVsLnNldEF0dHJpYnV0ZU5TKHhsaW5rTlMsIGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPT09IHRydWUgPyAnJyA6IHZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKGF0dHIpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGVsID0ge1xuXG4gIHByaW9yaXR5OiBFTCxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghdGhpcy5hcmcpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdmFyIGlkID0gdGhpcy5pZCA9IGNhbWVsaXplKHRoaXMuYXJnKTtcbiAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kZWxzO1xuICAgIGlmIChoYXNPd24ocmVmcywgaWQpKSB7XG4gICAgICByZWZzW2lkXSA9IHRoaXMuZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHJlZnMsIGlkLCB0aGlzLmVsKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcbiAgICBpZiAocmVmc1t0aGlzLmlkXSA9PT0gdGhpcy5lbCkge1xuICAgICAgcmVmc1t0aGlzLmlkXSA9IG51bGw7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcmVmID0ge1xuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1yZWY6JyArIHRoaXMuYXJnICsgJyBtdXN0IGJlIHVzZWQgb24gYSBjaGlsZCAnICsgJ2NvbXBvbmVudC4gRm91bmQgb24gPCcgKyB0aGlzLmVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSArICc+LicsIHRoaXMudm0pO1xuICB9XG59O1xuXG52YXIgY2xvYWsgPSB7XG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB0aGlzLnZtLiRvbmNlKCdwcmUtaG9vazpjb21waWxlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgndi1jbG9haycpO1xuICAgIH0pO1xuICB9XG59O1xuXG4vLyBtdXN0IGV4cG9ydCBwbGFpbiBvYmplY3RcbnZhciBkaXJlY3RpdmVzID0ge1xuICB0ZXh0OiB0ZXh0JDEsXG4gIGh0bWw6IGh0bWwsXG4gICdmb3InOiB2Rm9yLFxuICAnaWYnOiB2SWYsXG4gIHNob3c6IHNob3csXG4gIG1vZGVsOiBtb2RlbCxcbiAgb246IG9uJDEsXG4gIGJpbmQ6IGJpbmQkMSxcbiAgZWw6IGVsLFxuICByZWY6IHJlZixcbiAgY2xvYWs6IGNsb2FrXG59O1xuXG52YXIgdkNsYXNzID0ge1xuXG4gIGRlZXA6IHRydWUsXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICB0aGlzLmNsZWFudXAoKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuc2V0Q2xhc3ModmFsdWUudHJpbSgpLnNwbGl0KC9cXHMrLykpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnNldENsYXNzKG5vcm1hbGl6ZSQxKHZhbHVlKSk7XG4gICAgfVxuICB9LFxuXG4gIHNldENsYXNzOiBmdW5jdGlvbiBzZXRDbGFzcyh2YWx1ZSkge1xuICAgIHRoaXMuY2xlYW51cCh2YWx1ZSk7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciB2YWwgPSB2YWx1ZVtpXTtcbiAgICAgIGlmICh2YWwpIHtcbiAgICAgICAgYXBwbHkodGhpcy5lbCwgdmFsLCBhZGRDbGFzcyk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucHJldktleXMgPSB2YWx1ZTtcbiAgfSxcblxuICBjbGVhbnVwOiBmdW5jdGlvbiBjbGVhbnVwKHZhbHVlKSB7XG4gICAgdmFyIHByZXZLZXlzID0gdGhpcy5wcmV2S2V5cztcbiAgICBpZiAoIXByZXZLZXlzKSByZXR1cm47XG4gICAgdmFyIGkgPSBwcmV2S2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIGtleSA9IHByZXZLZXlzW2ldO1xuICAgICAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5pbmRleE9mKGtleSkgPCAwKSB7XG4gICAgICAgIGFwcGx5KHRoaXMuZWwsIGtleSwgcmVtb3ZlQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBOb3JtYWxpemUgb2JqZWN0cyBhbmQgYXJyYXlzIChwb3RlbnRpYWxseSBjb250YWluaW5nIG9iamVjdHMpXG4gKiBpbnRvIGFycmF5IG9mIHN0cmluZ3MuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXk8U3RyaW5nfE9iamVjdD59IHZhbHVlXG4gKiBAcmV0dXJuIHtBcnJheTxTdHJpbmc+fVxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZSQxKHZhbHVlKSB7XG4gIHZhciByZXMgPSBbXTtcbiAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB2YWx1ZS5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBfa2V5ID0gdmFsdWVbaV07XG4gICAgICBpZiAoX2tleSkge1xuICAgICAgICBpZiAodHlwZW9mIF9rZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcmVzLnB1c2goX2tleSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yICh2YXIgayBpbiBfa2V5KSB7XG4gICAgICAgICAgICBpZiAoX2tleVtrXSkgcmVzLnB1c2goayk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKGlzT2JqZWN0KHZhbHVlKSkge1xuICAgIGZvciAodmFyIGtleSBpbiB2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlW2tleV0pIHJlcy5wdXNoKGtleSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogQWRkIG9yIHJlbW92ZSBhIGNsYXNzL2NsYXNzZXMgb24gYW4gZWxlbWVudFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgVGhlIGNsYXNzIG5hbWUuIFRoaXMgbWF5IG9yIG1heSBub3RcbiAqICAgICAgICAgICAgICAgICAgICAgY29udGFpbiBhIHNwYWNlIGNoYXJhY3RlciwgaW4gc3VjaCBhXG4gKiAgICAgICAgICAgICAgICAgICAgIGNhc2Ugd2UnbGwgZGVhbCB3aXRoIG11bHRpcGxlIGNsYXNzXG4gKiAgICAgICAgICAgICAgICAgICAgIG5hbWVzIGF0IG9uY2UuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbmZ1bmN0aW9uIGFwcGx5KGVsLCBrZXksIGZuKSB7XG4gIGtleSA9IGtleS50cmltKCk7XG4gIGlmIChrZXkuaW5kZXhPZignICcpID09PSAtMSkge1xuICAgIGZuKGVsLCBrZXkpO1xuICAgIHJldHVybjtcbiAgfVxuICAvLyBUaGUga2V5IGNvbnRhaW5zIG9uZSBvciBtb3JlIHNwYWNlIGNoYXJhY3RlcnMuXG4gIC8vIFNpbmNlIGEgY2xhc3MgbmFtZSBkb2Vzbid0IGFjY2VwdCBzdWNoIGNoYXJhY3RlcnMsIHdlXG4gIC8vIHRyZWF0IGl0IGFzIG11bHRpcGxlIGNsYXNzZXMuXG4gIHZhciBrZXlzID0ga2V5LnNwbGl0KC9cXHMrLyk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBmbihlbCwga2V5c1tpXSk7XG4gIH1cbn1cblxudmFyIGNvbXBvbmVudCA9IHtcblxuICBwcmlvcml0eTogQ09NUE9ORU5ULFxuXG4gIHBhcmFtczogWydrZWVwLWFsaXZlJywgJ3RyYW5zaXRpb24tbW9kZScsICdpbmxpbmUtdGVtcGxhdGUnXSxcblxuICAvKipcbiAgICogU2V0dXAuIFR3byBwb3NzaWJsZSB1c2FnZXM6XG4gICAqXG4gICAqIC0gc3RhdGljOlxuICAgKiAgIDxjb21wPiBvciA8ZGl2IHYtY29tcG9uZW50PVwiY29tcFwiPlxuICAgKlxuICAgKiAtIGR5bmFtaWM6XG4gICAqICAgPGNvbXBvbmVudCA6aXM9XCJ2aWV3XCI+XG4gICAqL1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgaWYgKCF0aGlzLmVsLl9fdnVlX18pIHtcbiAgICAgIC8vIGtlZXAtYWxpdmUgY2FjaGVcbiAgICAgIHRoaXMua2VlcEFsaXZlID0gdGhpcy5wYXJhbXMua2VlcEFsaXZlO1xuICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG4gICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICAgIH1cbiAgICAgIC8vIGNoZWNrIGlubGluZS10ZW1wbGF0ZVxuICAgICAgaWYgKHRoaXMucGFyYW1zLmlubGluZVRlbXBsYXRlKSB7XG4gICAgICAgIC8vIGV4dHJhY3QgaW5saW5lIHRlbXBsYXRlIGFzIGEgRG9jdW1lbnRGcmFnbWVudFxuICAgICAgICB0aGlzLmlubGluZVRlbXBsYXRlID0gZXh0cmFjdENvbnRlbnQodGhpcy5lbCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgICAvLyBjb21wb25lbnQgcmVzb2x1dGlvbiByZWxhdGVkIHN0YXRlXG4gICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IHRoaXMuQ29tcG9uZW50ID0gbnVsbDtcbiAgICAgIC8vIHRyYW5zaXRpb24gcmVsYXRlZCBzdGF0ZVxuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbHMgPSAwO1xuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcbiAgICAgIC8vIGNyZWF0ZSBhIHJlZiBhbmNob3JcbiAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWNvbXBvbmVudCcpO1xuICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG4gICAgICAvLyByZW1vdmUgaXMgYXR0cmlidXRlLlxuICAgICAgLy8gdGhpcyBpcyByZW1vdmVkIGR1cmluZyBjb21waWxhdGlvbiwgYnV0IGJlY2F1c2UgY29tcGlsYXRpb24gaXNcbiAgICAgIC8vIGNhY2hlZCwgd2hlbiB0aGUgY29tcG9uZW50IGlzIHVzZWQgZWxzZXdoZXJlIHRoaXMgYXR0cmlidXRlXG4gICAgICAvLyB3aWxsIHJlbWFpbiBhdCBsaW5rIHRpbWUuXG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnaXMnKTtcbiAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCc6aXMnKTtcbiAgICAgIC8vIHJlbW92ZSByZWYsIHNhbWUgYXMgYWJvdmVcbiAgICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCd2LXJlZjonICsgaHlwaGVuYXRlKHRoaXMuZGVzY3JpcHRvci5yZWYpKTtcbiAgICAgIH1cbiAgICAgIC8vIGlmIHN0YXRpYywgYnVpbGQgcmlnaHQgbm93LlxuICAgICAgaWYgKHRoaXMubGl0ZXJhbCkge1xuICAgICAgICB0aGlzLnNldENvbXBvbmVudCh0aGlzLmV4cHJlc3Npb24pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ2Nhbm5vdCBtb3VudCBjb21wb25lbnQgXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiICcgKyAnb24gYWxyZWFkeSBtb3VudGVkIGVsZW1lbnQ6ICcgKyB0aGlzLmVsKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFB1YmxpYyB1cGRhdGUsIGNhbGxlZCBieSB0aGUgd2F0Y2hlciBpbiB0aGUgZHluYW1pY1xuICAgKiBsaXRlcmFsIHNjZW5hcmlvLCBlLmcuIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuICAgKi9cblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICghdGhpcy5saXRlcmFsKSB7XG4gICAgICB0aGlzLnNldENvbXBvbmVudCh2YWx1ZSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBTd2l0Y2ggZHluYW1pYyBjb21wb25lbnRzLiBNYXkgcmVzb2x2ZSB0aGUgY29tcG9uZW50XG4gICAqIGFzeW5jaHJvbm91c2x5LCBhbmQgcGVyZm9ybSB0cmFuc2l0aW9uIGJhc2VkIG9uXG4gICAqIHNwZWNpZmllZCB0cmFuc2l0aW9uIG1vZGUuIEFjY2VwdHMgYSBmZXcgYWRkaXRpb25hbFxuICAgKiBhcmd1bWVudHMgc3BlY2lmaWNhbGx5IGZvciB2dWUtcm91dGVyLlxuICAgKlxuICAgKiBUaGUgY2FsbGJhY2sgaXMgY2FsbGVkIHdoZW4gdGhlIGZ1bGwgdHJhbnNpdGlvbiBpc1xuICAgKiBmaW5pc2hlZC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgc2V0Q29tcG9uZW50OiBmdW5jdGlvbiBzZXRDb21wb25lbnQodmFsdWUsIGNiKSB7XG4gICAgdGhpcy5pbnZhbGlkYXRlUGVuZGluZygpO1xuICAgIGlmICghdmFsdWUpIHtcbiAgICAgIC8vIGp1c3QgcmVtb3ZlIGN1cnJlbnRcbiAgICAgIHRoaXMudW5idWlsZCh0cnVlKTtcbiAgICAgIHRoaXMucmVtb3ZlKHRoaXMuY2hpbGRWTSwgY2IpO1xuICAgICAgdGhpcy5jaGlsZFZNID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdGhpcy5yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYubW91bnRDb21wb25lbnQoY2IpO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBSZXNvbHZlIHRoZSBjb21wb25lbnQgY29uc3RydWN0b3IgdG8gdXNlIHdoZW4gY3JlYXRpbmdcbiAgICogdGhlIGNoaWxkIHZtLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgcmVzb2x2ZUNvbXBvbmVudDogZnVuY3Rpb24gcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgY2IpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoQ29tcG9uZW50KSB7XG4gICAgICBzZWxmLkNvbXBvbmVudE5hbWUgPSBDb21wb25lbnQub3B0aW9ucy5uYW1lIHx8ICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBudWxsKTtcbiAgICAgIHNlbGYuQ29tcG9uZW50ID0gQ29tcG9uZW50O1xuICAgICAgY2IoKTtcbiAgICB9KTtcbiAgICB0aGlzLnZtLl9yZXNvbHZlQ29tcG9uZW50KHZhbHVlLCB0aGlzLnBlbmRpbmdDb21wb25lbnRDYik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBpbnN0YW5jZSB1c2luZyB0aGUgY3VycmVudCBjb25zdHJ1Y3RvciBhbmRcbiAgICogcmVwbGFjZSB0aGUgZXhpc3RpbmcgaW5zdGFuY2UuIFRoaXMgbWV0aG9kIGRvZXNuJ3QgY2FyZVxuICAgKiB3aGV0aGVyIHRoZSBuZXcgY29tcG9uZW50IGFuZCB0aGUgb2xkIG9uZSBhcmUgYWN0dWFsbHlcbiAgICogdGhlIHNhbWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgbW91bnRDb21wb25lbnQ6IGZ1bmN0aW9uIG1vdW50Q29tcG9uZW50KGNiKSB7XG4gICAgLy8gYWN0dWFsIG1vdW50XG4gICAgdGhpcy51bmJ1aWxkKHRydWUpO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgYWN0aXZhdGVIb29rcyA9IHRoaXMuQ29tcG9uZW50Lm9wdGlvbnMuYWN0aXZhdGU7XG4gICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG4gICAgdmFyIG5ld0NvbXBvbmVudCA9IHRoaXMuYnVpbGQoKTtcbiAgICBpZiAoYWN0aXZhdGVIb29rcyAmJiAhY2FjaGVkKSB7XG4gICAgICB0aGlzLndhaXRpbmdGb3IgPSBuZXdDb21wb25lbnQ7XG4gICAgICBjYWxsQWN0aXZhdGVIb29rcyhhY3RpdmF0ZUhvb2tzLCBuZXdDb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYud2FpdGluZ0ZvciAhPT0gbmV3Q29tcG9uZW50KSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHNlbGYud2FpdGluZ0ZvciA9IG51bGw7XG4gICAgICAgIHNlbGYudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyB1cGRhdGUgcmVmIGZvciBrZXB0LWFsaXZlIGNvbXBvbmVudFxuICAgICAgaWYgKGNhY2hlZCkge1xuICAgICAgICBuZXdDb21wb25lbnQuX3VwZGF0ZVJlZigpO1xuICAgICAgfVxuICAgICAgdGhpcy50cmFuc2l0aW9uKG5ld0NvbXBvbmVudCwgY2IpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogV2hlbiB0aGUgY29tcG9uZW50IGNoYW5nZXMgb3IgdW5iaW5kcyBiZWZvcmUgYW4gYXN5bmNcbiAgICogY29uc3RydWN0b3IgaXMgcmVzb2x2ZWQsIHdlIG5lZWQgdG8gaW52YWxpZGF0ZSBpdHNcbiAgICogcGVuZGluZyBjYWxsYmFjay5cbiAgICovXG5cbiAgaW52YWxpZGF0ZVBlbmRpbmc6IGZ1bmN0aW9uIGludmFsaWRhdGVQZW5kaW5nKCkge1xuICAgIGlmICh0aGlzLnBlbmRpbmdDb21wb25lbnRDYikge1xuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IuY2FuY2VsKCk7XG4gICAgICB0aGlzLnBlbmRpbmdDb21wb25lbnRDYiA9IG51bGw7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBJbnN0YW50aWF0ZS9pbnNlcnQgYSBuZXcgY2hpbGQgdm0uXG4gICAqIElmIGtlZXAgYWxpdmUgYW5kIGhhcyBjYWNoZWQgaW5zdGFuY2UsIGluc2VydCB0aGF0XG4gICAqIGluc3RhbmNlOyBvdGhlcndpc2UgYnVpbGQgYSBuZXcgb25lIGFuZCBjYWNoZSBpdC5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IFtleHRyYU9wdGlvbnNdXG4gICAqIEByZXR1cm4ge1Z1ZX0gLSB0aGUgY3JlYXRlZCBpbnN0YW5jZVxuICAgKi9cblxuICBidWlsZDogZnVuY3Rpb24gYnVpbGQoZXh0cmFPcHRpb25zKSB7XG4gICAgdmFyIGNhY2hlZCA9IHRoaXMuZ2V0Q2FjaGVkKCk7XG4gICAgaWYgKGNhY2hlZCkge1xuICAgICAgcmV0dXJuIGNhY2hlZDtcbiAgICB9XG4gICAgaWYgKHRoaXMuQ29tcG9uZW50KSB7XG4gICAgICAvLyBkZWZhdWx0IG9wdGlvbnNcbiAgICAgIHZhciBvcHRpb25zID0ge1xuICAgICAgICBuYW1lOiB0aGlzLkNvbXBvbmVudE5hbWUsXG4gICAgICAgIGVsOiBjbG9uZU5vZGUodGhpcy5lbCksXG4gICAgICAgIHRlbXBsYXRlOiB0aGlzLmlubGluZVRlbXBsYXRlLFxuICAgICAgICAvLyBtYWtlIHN1cmUgdG8gYWRkIHRoZSBjaGlsZCB3aXRoIGNvcnJlY3QgcGFyZW50XG4gICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGl0cyBwYXJlbnRcbiAgICAgICAgLy8gc2hvdWxkIGJlIHRoZSB0cmFuc2NsdXNpb24gaG9zdC5cbiAgICAgICAgcGFyZW50OiB0aGlzLl9ob3N0IHx8IHRoaXMudm0sXG4gICAgICAgIC8vIGlmIG5vIGlubGluZS10ZW1wbGF0ZSwgdGhlbiB0aGUgY29tcGlsZWRcbiAgICAgICAgLy8gbGlua2VyIGNhbiBiZSBjYWNoZWQgZm9yIGJldHRlciBwZXJmb3JtYW5jZS5cbiAgICAgICAgX2xpbmtlckNhY2hhYmxlOiAhdGhpcy5pbmxpbmVUZW1wbGF0ZSxcbiAgICAgICAgX3JlZjogdGhpcy5kZXNjcmlwdG9yLnJlZixcbiAgICAgICAgX2FzQ29tcG9uZW50OiB0cnVlLFxuICAgICAgICBfaXNSb3V0ZXJWaWV3OiB0aGlzLl9pc1JvdXRlclZpZXcsXG4gICAgICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcbiAgICAgICAgLy8gd2lsbCBiZSB0aGUgY29tbW9uIHBhcmVudCB2bSBvZiB0aGlzIGluc3RhbmNlXG4gICAgICAgIC8vIGFuZCBpdHMgaG9zdC5cbiAgICAgICAgX2NvbnRleHQ6IHRoaXMudm0sXG4gICAgICAgIC8vIGlmIHRoaXMgaXMgaW5zaWRlIGFuIGlubGluZSB2LWZvciwgdGhlIHNjb3BlXG4gICAgICAgIC8vIHdpbGwgYmUgdGhlIGludGVybWVkaWF0ZSBzY29wZSBjcmVhdGVkIGZvciB0aGlzXG4gICAgICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG4gICAgICAgIC8vIGFuZCBjb250YWluZXIgZGlyZWN0aXZlcy5cbiAgICAgICAgX3Njb3BlOiB0aGlzLl9zY29wZSxcbiAgICAgICAgLy8gcGFzcyBpbiB0aGUgb3duZXIgZnJhZ21lbnQgb2YgdGhpcyBjb21wb25lbnQuXG4gICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IHNvIHRoYXQgdGhlIGZyYWdtZW50IGNhbiBrZWVwXG4gICAgICAgIC8vIHRyYWNrIG9mIGl0cyBjb250YWluZWQgY29tcG9uZW50cyBpbiBvcmRlciB0b1xuICAgICAgICAvLyBjYWxsIGF0dGFjaC9kZXRhY2ggaG9va3MgZm9yIHRoZW0uXG4gICAgICAgIF9mcmFnOiB0aGlzLl9mcmFnXG4gICAgICB9O1xuICAgICAgLy8gZXh0cmEgb3B0aW9uc1xuICAgICAgLy8gaW4gMS4wLjAgdGhpcyBpcyB1c2VkIGJ5IHZ1ZS1yb3V0ZXIgb25seVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoZXh0cmFPcHRpb25zKSB7XG4gICAgICAgIGV4dGVuZChvcHRpb25zLCBleHRyYU9wdGlvbnMpO1xuICAgICAgfVxuICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuQ29tcG9uZW50KG9wdGlvbnMpO1xuICAgICAgaWYgKHRoaXMua2VlcEFsaXZlKSB7XG4gICAgICAgIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXSA9IGNoaWxkO1xuICAgICAgfVxuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsLmhhc0F0dHJpYnV0ZSgndHJhbnNpdGlvbicpICYmIGNoaWxkLl9pc0ZyYWdtZW50KSB7XG4gICAgICAgIHdhcm4oJ1RyYW5zaXRpb25zIHdpbGwgbm90IHdvcmsgb24gYSBmcmFnbWVudCBpbnN0YW5jZS4gJyArICdUZW1wbGF0ZTogJyArIGNoaWxkLiRvcHRpb25zLnRlbXBsYXRlLCBjaGlsZCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBUcnkgdG8gZ2V0IGEgY2FjaGVkIGluc3RhbmNlIG9mIHRoZSBjdXJyZW50IGNvbXBvbmVudC5cbiAgICpcbiAgICogQHJldHVybiB7VnVlfHVuZGVmaW5lZH1cbiAgICovXG5cbiAgZ2V0Q2FjaGVkOiBmdW5jdGlvbiBnZXRDYWNoZWQoKSB7XG4gICAgcmV0dXJuIHRoaXMua2VlcEFsaXZlICYmIHRoaXMuY2FjaGVbdGhpcy5Db21wb25lbnQuY2lkXTtcbiAgfSxcblxuICAvKipcbiAgICogVGVhcmRvd24gdGhlIGN1cnJlbnQgY2hpbGQsIGJ1dCBkZWZlcnMgY2xlYW51cCBzb1xuICAgKiB0aGF0IHdlIGNhbiBzZXBhcmF0ZSB0aGUgZGVzdHJveSBhbmQgcmVtb3ZhbCBzdGVwcy5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSBkZWZlclxuICAgKi9cblxuICB1bmJ1aWxkOiBmdW5jdGlvbiB1bmJ1aWxkKGRlZmVyKSB7XG4gICAgaWYgKHRoaXMud2FpdGluZ0Zvcikge1xuICAgICAgaWYgKCF0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLndhaXRpbmdGb3IuJGRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICAgIHRoaXMud2FpdGluZ0ZvciA9IG51bGw7XG4gICAgfVxuICAgIHZhciBjaGlsZCA9IHRoaXMuY2hpbGRWTTtcbiAgICBpZiAoIWNoaWxkIHx8IHRoaXMua2VlcEFsaXZlKSB7XG4gICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgLy8gcmVtb3ZlIHJlZlxuICAgICAgICBjaGlsZC5faW5hY3RpdmUgPSB0cnVlO1xuICAgICAgICBjaGlsZC5fdXBkYXRlUmVmKHRydWUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyB0aGUgc29sZSBwdXJwb3NlIG9mIGBkZWZlckNsZWFudXBgIGlzIHNvIHRoYXQgd2UgY2FuXG4gICAgLy8gXCJkZWFjdGl2YXRlXCIgdGhlIHZtIHJpZ2h0IG5vdyBhbmQgcGVyZm9ybSBET00gcmVtb3ZhbFxuICAgIC8vIGxhdGVyLlxuICAgIGNoaWxkLiRkZXN0cm95KGZhbHNlLCBkZWZlcik7XG4gIH0sXG5cbiAgLyoqXG4gICAqIFJlbW92ZSBjdXJyZW50IGRlc3Ryb3llZCBjaGlsZCBhbmQgbWFudWFsbHkgZG9cbiAgICogdGhlIGNsZWFudXAgYWZ0ZXIgcmVtb3ZhbC5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoY2hpbGQsIGNiKSB7XG4gICAgdmFyIGtlZXBBbGl2ZSA9IHRoaXMua2VlcEFsaXZlO1xuICAgIGlmIChjaGlsZCkge1xuICAgICAgLy8gd2UgbWF5IGhhdmUgYSBjb21wb25lbnQgc3dpdGNoIHdoZW4gYSBwcmV2aW91c1xuICAgICAgLy8gY29tcG9uZW50IGlzIHN0aWxsIGJlaW5nIHRyYW5zaXRpb25lZCBvdXQuXG4gICAgICAvLyB3ZSB3YW50IHRvIHRyaWdnZXIgb25seSBvbmUgbGFzdGVzdCBpbnNlcnRpb24gY2JcbiAgICAgIC8vIHdoZW4gdGhlIGV4aXN0aW5nIHRyYW5zaXRpb24gZmluaXNoZXMuICgjMTExOSlcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzKys7XG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFsQ2IgPSBjYjtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIGNoaWxkLiRyZW1vdmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFscy0tO1xuICAgICAgICBpZiAoIWtlZXBBbGl2ZSkgY2hpbGQuX2NsZWFudXAoKTtcbiAgICAgICAgaWYgKCFzZWxmLnBlbmRpbmdSZW1vdmFscyAmJiBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IpIHtcbiAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IoKTtcbiAgICAgICAgICBzZWxmLnBlbmRpbmdSZW1vdmFsQ2IgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGNiKSB7XG4gICAgICBjYigpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogQWN0dWFsbHkgc3dhcCB0aGUgY29tcG9uZW50cywgZGVwZW5kaW5nIG9uIHRoZVxuICAgKiB0cmFuc2l0aW9uIG1vZGUuIERlZmF1bHRzIHRvIHNpbXVsdGFuZW91cy5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIHRyYW5zaXRpb246IGZ1bmN0aW9uIHRyYW5zaXRpb24odGFyZ2V0LCBjYikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgY3VycmVudCA9IHRoaXMuY2hpbGRWTTtcbiAgICAvLyBmb3IgZGV2dG9vbCBpbnNwZWN0aW9uXG4gICAgaWYgKGN1cnJlbnQpIGN1cnJlbnQuX2luYWN0aXZlID0gdHJ1ZTtcbiAgICB0YXJnZXQuX2luYWN0aXZlID0gZmFsc2U7XG4gICAgdGhpcy5jaGlsZFZNID0gdGFyZ2V0O1xuICAgIHN3aXRjaCAoc2VsZi5wYXJhbXMudHJhbnNpdGlvbk1vZGUpIHtcbiAgICAgIGNhc2UgJ2luLW91dCc6XG4gICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgY2IpO1xuICAgICAgICB9KTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdvdXQtaW4nOlxuICAgICAgICBzZWxmLnJlbW92ZShjdXJyZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdGFyZ2V0LiRiZWZvcmUoc2VsZi5hbmNob3IsIGNiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCk7XG4gICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBVbmJpbmQuXG4gICAqL1xuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcbiAgICAvLyBEbyBub3QgZGVmZXIgY2xlYW51cCB3aGVuIHVuYmluZGluZ1xuICAgIHRoaXMudW5idWlsZCgpO1xuICAgIC8vIGRlc3Ryb3kgYWxsIGtlZXAtYWxpdmUgY2FjaGVkIGluc3RhbmNlc1xuICAgIGlmICh0aGlzLmNhY2hlKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5jYWNoZSkge1xuICAgICAgICB0aGlzLmNhY2hlW2tleV0uJGRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY2FjaGUgPSBudWxsO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBDYWxsIGFjdGl2YXRlIGhvb2tzIGluIG9yZGVyIChhc3luY2hyb25vdXMpXG4gKlxuICogQHBhcmFtIHtBcnJheX0gaG9va3NcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5mdW5jdGlvbiBjYWxsQWN0aXZhdGVIb29rcyhob29rcywgdm0sIGNiKSB7XG4gIHZhciB0b3RhbCA9IGhvb2tzLmxlbmd0aDtcbiAgdmFyIGNhbGxlZCA9IDA7XG4gIGhvb2tzWzBdLmNhbGwodm0sIG5leHQpO1xuICBmdW5jdGlvbiBuZXh0KCkge1xuICAgIGlmICgrK2NhbGxlZCA+PSB0b3RhbCkge1xuICAgICAgY2IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaG9va3NbY2FsbGVkXS5jYWxsKHZtLCBuZXh0KTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHByb3BCaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG52YXIgZW1wdHkgPSB7fTtcblxuLy8gcmVnZXhlc1xudmFyIGlkZW50UkUkMSA9IC9eWyRfYS16QS1aXStbXFx3JF0qJC87XG52YXIgc2V0dGFibGVQYXRoUkUgPSAvXltBLVphLXpfJF1bXFx3JF0qKFxcLltBLVphLXpfJF1bXFx3JF0qfFxcW1teXFxbXFxdXStcXF0pKiQvO1xuXG4vKipcbiAqIENvbXBpbGUgcHJvcHMgb24gYSByb290IGVsZW1lbnQgYW5kIHJldHVyblxuICogYSBwcm9wcyBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICogQHBhcmFtIHtBcnJheX0gcHJvcE9wdGlvbnNcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHJldHVybiB7RnVuY3Rpb259IHByb3BzTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZVByb3BzKGVsLCBwcm9wT3B0aW9ucywgdm0pIHtcbiAgdmFyIHByb3BzID0gW107XG4gIHZhciBuYW1lcyA9IE9iamVjdC5rZXlzKHByb3BPcHRpb25zKTtcbiAgdmFyIGkgPSBuYW1lcy5sZW5ndGg7XG4gIHZhciBvcHRpb25zLCBuYW1lLCBhdHRyLCB2YWx1ZSwgcGF0aCwgcGFyc2VkLCBwcm9wO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgbmFtZSA9IG5hbWVzW2ldO1xuICAgIG9wdGlvbnMgPSBwcm9wT3B0aW9uc1tuYW1lXSB8fCBlbXB0eTtcblxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG5hbWUgPT09ICckZGF0YScpIHtcbiAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgJGRhdGEgYXMgcHJvcC4nLCB2bSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBwcm9wcyBjb3VsZCBjb250YWluIGRhc2hlcywgd2hpY2ggd2lsbCBiZVxuICAgIC8vIGludGVycHJldGVkIGFzIG1pbnVzIGNhbGN1bGF0aW9ucyBieSB0aGUgcGFyc2VyXG4gICAgLy8gc28gd2UgbmVlZCB0byBjYW1lbGl6ZSB0aGUgcGF0aCBoZXJlXG4gICAgcGF0aCA9IGNhbWVsaXplKG5hbWUpO1xuICAgIGlmICghaWRlbnRSRSQxLnRlc3QocGF0aCkpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBwcm9wIGtleTogXCInICsgbmFtZSArICdcIi4gUHJvcCBrZXlzICcgKyAnbXVzdCBiZSB2YWxpZCBpZGVudGlmaWVycy4nLCB2bSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBwcm9wID0ge1xuICAgICAgbmFtZTogbmFtZSxcbiAgICAgIHBhdGg6IHBhdGgsXG4gICAgICBvcHRpb25zOiBvcHRpb25zLFxuICAgICAgbW9kZTogcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZLFxuICAgICAgcmF3OiBudWxsXG4gICAgfTtcblxuICAgIGF0dHIgPSBoeXBoZW5hdGUobmFtZSk7XG4gICAgLy8gZmlyc3QgY2hlY2sgZHluYW1pYyB2ZXJzaW9uXG4gICAgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyKSkgPT09IG51bGwpIHtcbiAgICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcuc3luYycpKSAhPT0gbnVsbCkge1xuICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVk7XG4gICAgICB9IGVsc2UgaWYgKCh2YWx1ZSA9IGdldEJpbmRBdHRyKGVsLCBhdHRyICsgJy5vbmNlJykpICE9PSBudWxsKSB7XG4gICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUU7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgLy8gaGFzIGR5bmFtaWMgYmluZGluZyFcbiAgICAgIHByb3AucmF3ID0gdmFsdWU7XG4gICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG4gICAgICB2YWx1ZSA9IHBhcnNlZC5leHByZXNzaW9uO1xuICAgICAgcHJvcC5maWx0ZXJzID0gcGFyc2VkLmZpbHRlcnM7XG4gICAgICAvLyBjaGVjayBiaW5kaW5nIHR5cGVcbiAgICAgIGlmIChpc0xpdGVyYWwodmFsdWUpICYmICFwYXJzZWQuZmlsdGVycykge1xuICAgICAgICAvLyBmb3IgZXhwcmVzc2lvbnMgY29udGFpbmluZyBsaXRlcmFsIG51bWJlcnMgYW5kXG4gICAgICAgIC8vIGJvb2xlYW5zLCB0aGVyZSdzIG5vIG5lZWQgdG8gc2V0dXAgYSBwcm9wIGJpbmRpbmcsXG4gICAgICAgIC8vIHNvIHdlIGNhbiBvcHRpbWl6ZSB0aGVtIGFzIGEgb25lLXRpbWUgc2V0LlxuICAgICAgICBwcm9wLm9wdGltaXplZExpdGVyYWwgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvcC5keW5hbWljID0gdHJ1ZTtcbiAgICAgICAgLy8gY2hlY2sgbm9uLXNldHRhYmxlIHBhdGggZm9yIHR3by13YXkgYmluZGluZ3NcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgcHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkgJiYgIXNldHRhYmxlUGF0aFJFLnRlc3QodmFsdWUpKSB7XG4gICAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5PTkVfV0FZO1xuICAgICAgICAgIHdhcm4oJ0Nhbm5vdCBiaW5kIHR3by13YXkgcHJvcCB3aXRoIG5vbi1zZXR0YWJsZSAnICsgJ3BhcmVudCBwYXRoOiAnICsgdmFsdWUsIHZtKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcHJvcC5wYXJlbnRQYXRoID0gdmFsdWU7XG5cbiAgICAgIC8vIHdhcm4gcmVxdWlyZWQgdHdvLXdheVxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgb3B0aW9ucy50d29XYXkgJiYgcHJvcC5tb2RlICE9PSBwcm9wQmluZGluZ01vZGVzLlRXT19XQVkpIHtcbiAgICAgICAgd2FybignUHJvcCBcIicgKyBuYW1lICsgJ1wiIGV4cGVjdHMgYSB0d28td2F5IGJpbmRpbmcgdHlwZS4nLCB2bSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRBdHRyKGVsLCBhdHRyKSkgIT09IG51bGwpIHtcbiAgICAgIC8vIGhhcyBsaXRlcmFsIGJpbmRpbmchXG4gICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLy8gY2hlY2sgcG9zc2libGUgY2FtZWxDYXNlIHByb3AgdXNhZ2VcbiAgICAgIHZhciBsb3dlckNhc2VOYW1lID0gcGF0aC50b0xvd2VyQ2FzZSgpO1xuICAgICAgdmFsdWUgPSAvW0EtWlxcLV0vLnRlc3QobmFtZSkgJiYgKGVsLmdldEF0dHJpYnV0ZShsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgnOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCd2LWJpbmQ6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLm9uY2UnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5zeW5jJykpO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHdhcm4oJ1Bvc3NpYmxlIHVzYWdlIGVycm9yIGZvciBwcm9wIGAnICsgbG93ZXJDYXNlTmFtZSArICdgIC0gJyArICdkaWQgeW91IG1lYW4gYCcgKyBhdHRyICsgJ2A/IEhUTUwgaXMgY2FzZS1pbnNlbnNpdGl2ZSwgcmVtZW1iZXIgdG8gdXNlICcgKyAna2ViYWItY2FzZSBmb3IgcHJvcHMgaW4gdGVtcGxhdGVzLicsIHZtKTtcbiAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5yZXF1aXJlZCkge1xuICAgICAgICAvLyB3YXJuIG1pc3NpbmcgcmVxdWlyZWRcbiAgICAgICAgd2FybignTWlzc2luZyByZXF1aXJlZCBwcm9wOiAnICsgbmFtZSwgdm0pO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBwdXNoIHByb3BcbiAgICBwcm9wcy5wdXNoKHByb3ApO1xuICB9XG4gIHJldHVybiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgZnVuY3Rpb24gdGhhdCBhcHBsaWVzIHByb3BzIHRvIGEgdm0uXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcHJvcHNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VQcm9wc0xpbmtGbihwcm9wcykge1xuICByZXR1cm4gZnVuY3Rpb24gcHJvcHNMaW5rRm4odm0sIHNjb3BlKSB7XG4gICAgLy8gc3RvcmUgcmVzb2x2ZWQgcHJvcHMgaW5mb1xuICAgIHZtLl9wcm9wcyA9IHt9O1xuICAgIHZhciBpbmxpbmVQcm9wcyA9IHZtLiRvcHRpb25zLnByb3BzRGF0YTtcbiAgICB2YXIgaSA9IHByb3BzLmxlbmd0aDtcbiAgICB2YXIgcHJvcCwgcGF0aCwgb3B0aW9ucywgdmFsdWUsIHJhdztcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBwcm9wID0gcHJvcHNbaV07XG4gICAgICByYXcgPSBwcm9wLnJhdztcbiAgICAgIHBhdGggPSBwcm9wLnBhdGg7XG4gICAgICBvcHRpb25zID0gcHJvcC5vcHRpb25zO1xuICAgICAgdm0uX3Byb3BzW3BhdGhdID0gcHJvcDtcbiAgICAgIGlmIChpbmxpbmVQcm9wcyAmJiBoYXNPd24oaW5saW5lUHJvcHMsIHBhdGgpKSB7XG4gICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCBpbmxpbmVQcm9wc1twYXRoXSk7XG4gICAgICB9aWYgKHJhdyA9PT0gbnVsbCkge1xuICAgICAgICAvLyBpbml0aWFsaXplIGFic2VudCBwcm9wXG4gICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB1bmRlZmluZWQpO1xuICAgICAgfSBlbHNlIGlmIChwcm9wLmR5bmFtaWMpIHtcbiAgICAgICAgLy8gZHluYW1pYyBwcm9wXG4gICAgICAgIGlmIChwcm9wLm1vZGUgPT09IHByb3BCaW5kaW5nTW9kZXMuT05FX1RJTUUpIHtcbiAgICAgICAgICAvLyBvbmUgdGltZSBiaW5kaW5nXG4gICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0uX2NvbnRleHQgfHwgdm0pLiRnZXQocHJvcC5wYXJlbnRQYXRoKTtcbiAgICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh2bS5fY29udGV4dCkge1xuICAgICAgICAgICAgLy8gZHluYW1pYyBiaW5kaW5nXG4gICAgICAgICAgICB2bS5fYmluZERpcih7XG4gICAgICAgICAgICAgIG5hbWU6ICdwcm9wJyxcbiAgICAgICAgICAgICAgZGVmOiBwcm9wRGVmLFxuICAgICAgICAgICAgICBwcm9wOiBwcm9wXG4gICAgICAgICAgICB9LCBudWxsLCBudWxsLCBzY29wZSk7IC8vIGVsLCBob3N0LCBzY29wZVxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIC8vIHJvb3QgaW5zdGFuY2VcbiAgICAgICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZtLiRnZXQocHJvcC5wYXJlbnRQYXRoKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAocHJvcC5vcHRpbWl6ZWRMaXRlcmFsKSB7XG4gICAgICAgIC8vIG9wdGltaXplZCBsaXRlcmFsLCBjYXN0IGl0IGFuZCBqdXN0IHNldCBvbmNlXG4gICAgICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKHJhdyk7XG4gICAgICAgIHZhbHVlID0gc3RyaXBwZWQgPT09IHJhdyA/IHRvQm9vbGVhbih0b051bWJlcihyYXcpKSA6IHN0cmlwcGVkO1xuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gc3RyaW5nIGxpdGVyYWwsIGJ1dCB3ZSBuZWVkIHRvIGNhdGVyIGZvclxuICAgICAgICAvLyBCb29sZWFuIHByb3BzIHdpdGggbm8gdmFsdWUsIG9yIHdpdGggc2FtZVxuICAgICAgICAvLyBsaXRlcmFsIHZhbHVlIChlLmcuIGRpc2FibGVkPVwiZGlzYWJsZWRcIilcbiAgICAgICAgLy8gc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS92dWVqcy92dWUtbG9hZGVyL2lzc3Vlcy8xODJcbiAgICAgICAgdmFsdWUgPSBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gJiYgKHJhdyA9PT0gJycgfHwgcmF3ID09PSBoeXBoZW5hdGUocHJvcC5uYW1lKSkgPyB0cnVlIDogcmF3O1xuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIGEgcHJvcCB3aXRoIGEgcmF3VmFsdWUsIGFwcGx5aW5nIG5lY2Vzc2FyeSBjb2Vyc2lvbnMsXG4gKiBkZWZhdWx0IHZhbHVlcyAmIGFzc2VydGlvbnMgYW5kIGNhbGwgdGhlIGdpdmVuIGNhbGxiYWNrIHdpdGhcbiAqIHByb2Nlc3NlZCB2YWx1ZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcGFyYW0geyp9IHJhd1ZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHJhd1ZhbHVlLCBmbikge1xuICB2YXIgaXNTaW1wbGUgPSBwcm9wLmR5bmFtaWMgJiYgaXNTaW1wbGVQYXRoKHByb3AucGFyZW50UGF0aCk7XG4gIHZhciB2YWx1ZSA9IHJhd1ZhbHVlO1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHZhbHVlID0gZ2V0UHJvcERlZmF1bHRWYWx1ZSh2bSwgcHJvcCk7XG4gIH1cbiAgdmFsdWUgPSBjb2VyY2VQcm9wKHByb3AsIHZhbHVlLCB2bSk7XG4gIHZhciBjb2VyY2VkID0gdmFsdWUgIT09IHJhd1ZhbHVlO1xuICBpZiAoIWFzc2VydFByb3AocHJvcCwgdmFsdWUsIHZtKSkge1xuICAgIHZhbHVlID0gdW5kZWZpbmVkO1xuICB9XG4gIGlmIChpc1NpbXBsZSAmJiAhY29lcmNlZCkge1xuICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIGZuKHZhbHVlKTtcbiAgICB9KTtcbiAgfSBlbHNlIHtcbiAgICBmbih2YWx1ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBTZXQgYSBwcm9wJ3MgaW5pdGlhbCB2YWx1ZSBvbiBhIHZtIGFuZCBpdHMgZGF0YSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbmZ1bmN0aW9uIGluaXRQcm9wKHZtLCBwcm9wLCB2YWx1ZSkge1xuICBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCB2YWx1ZSwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgZGVmaW5lUmVhY3RpdmUodm0sIHByb3AucGF0aCwgdmFsdWUpO1xuICB9KTtcbn1cblxuLyoqXG4gKiBVcGRhdGUgYSBwcm9wJ3MgdmFsdWUgb24gYSB2bS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKi9cblxuZnVuY3Rpb24gdXBkYXRlUHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcbiAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHZtW3Byb3AucGF0aF0gPSB2YWx1ZTtcbiAgfSk7XG59XG5cbi8qKlxuICogR2V0IHRoZSBkZWZhdWx0IHZhbHVlIG9mIGEgcHJvcC5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcmV0dXJuIHsqfVxuICovXG5cbmZ1bmN0aW9uIGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApIHtcbiAgLy8gbm8gZGVmYXVsdCwgcmV0dXJuIHVuZGVmaW5lZFxuICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcbiAgaWYgKCFoYXNPd24ob3B0aW9ucywgJ2RlZmF1bHQnKSkge1xuICAgIC8vIGFic2VudCBib29sZWFuIHZhbHVlIGRlZmF1bHRzIHRvIGZhbHNlXG4gICAgcmV0dXJuIG9wdGlvbnMudHlwZSA9PT0gQm9vbGVhbiA/IGZhbHNlIDogdW5kZWZpbmVkO1xuICB9XG4gIHZhciBkZWYgPSBvcHRpb25zWydkZWZhdWx0J107XG4gIC8vIHdhcm4gYWdhaW5zdCBub24tZmFjdG9yeSBkZWZhdWx0cyBmb3IgT2JqZWN0ICYgQXJyYXlcbiAgaWYgKGlzT2JqZWN0KGRlZikpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgZGVmYXVsdCB2YWx1ZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6ICcgKyAnUHJvcHMgd2l0aCB0eXBlIE9iamVjdC9BcnJheSBtdXN0IHVzZSBhIGZhY3RvcnkgZnVuY3Rpb24gJyArICd0byByZXR1cm4gdGhlIGRlZmF1bHQgdmFsdWUuJywgdm0pO1xuICB9XG4gIC8vIGNhbGwgZmFjdG9yeSBmdW5jdGlvbiBmb3Igbm9uLUZ1bmN0aW9uIHR5cGVzXG4gIHJldHVybiB0eXBlb2YgZGVmID09PSAnZnVuY3Rpb24nICYmIG9wdGlvbnMudHlwZSAhPT0gRnVuY3Rpb24gPyBkZWYuY2FsbCh2bSkgOiBkZWY7XG59XG5cbi8qKlxuICogQXNzZXJ0IHdoZXRoZXIgYSBwcm9wIGlzIHZhbGlkLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiBhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkge1xuICBpZiAoIXByb3Aub3B0aW9ucy5yZXF1aXJlZCAmJiAoIC8vIG5vbi1yZXF1aXJlZFxuICBwcm9wLnJhdyA9PT0gbnVsbCB8fCAvLyBhYnNjZW50XG4gIHZhbHVlID09IG51bGwpIC8vIG51bGwgb3IgdW5kZWZpbmVkXG4gICkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB2YXIgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcbiAgdmFyIHR5cGUgPSBvcHRpb25zLnR5cGU7XG4gIHZhciB2YWxpZCA9ICF0eXBlO1xuICB2YXIgZXhwZWN0ZWRUeXBlcyA9IFtdO1xuICBpZiAodHlwZSkge1xuICAgIGlmICghaXNBcnJheSh0eXBlKSkge1xuICAgICAgdHlwZSA9IFt0eXBlXTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0eXBlLmxlbmd0aCAmJiAhdmFsaWQ7IGkrKykge1xuICAgICAgdmFyIGFzc2VydGVkVHlwZSA9IGFzc2VydFR5cGUodmFsdWUsIHR5cGVbaV0pO1xuICAgICAgZXhwZWN0ZWRUeXBlcy5wdXNoKGFzc2VydGVkVHlwZS5leHBlY3RlZFR5cGUpO1xuICAgICAgdmFsaWQgPSBhc3NlcnRlZFR5cGUudmFsaWQ7XG4gICAgfVxuICB9XG4gIGlmICghdmFsaWQpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgd2FybignSW52YWxpZCBwcm9wOiB0eXBlIGNoZWNrIGZhaWxlZCBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCIuJyArICcgRXhwZWN0ZWQgJyArIGV4cGVjdGVkVHlwZXMubWFwKGZvcm1hdFR5cGUpLmpvaW4oJywgJykgKyAnLCBnb3QgJyArIGZvcm1hdFZhbHVlKHZhbHVlKSArICcuJywgdm0pO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIHZhbGlkYXRvciA9IG9wdGlvbnMudmFsaWRhdG9yO1xuICBpZiAodmFsaWRhdG9yKSB7XG4gICAgaWYgKCF2YWxpZGF0b3IodmFsdWUpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcDogY3VzdG9tIHZhbGlkYXRvciBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicsIHZtKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHRydWU7XG59XG5cbi8qKlxuICogRm9yY2UgcGFyc2luZyB2YWx1ZSB3aXRoIGNvZXJjZSBvcHRpb24uXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4geyp9XG4gKi9cblxuZnVuY3Rpb24gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcbiAgdmFyIGNvZXJjZSA9IHByb3Aub3B0aW9ucy5jb2VyY2U7XG4gIGlmICghY29lcmNlKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh0eXBlb2YgY29lcmNlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGNvZXJjZSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGNvZXJjZSBmb3IgcHJvcCBcIicgKyBwcm9wLm5hbWUgKyAnXCI6IGV4cGVjdGVkIGZ1bmN0aW9uLCBnb3QgJyArIHR5cGVvZiBjb2VyY2UgKyAnLicsIHZtKTtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbn1cblxuLyoqXG4gKiBBc3NlcnQgdGhlIHR5cGUgb2YgYSB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHR5cGVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlKSB7XG4gIHZhciB2YWxpZDtcbiAgdmFyIGV4cGVjdGVkVHlwZTtcbiAgaWYgKHR5cGUgPT09IFN0cmluZykge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdzdHJpbmcnO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gTnVtYmVyKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ251bWJlcic7XG4gICAgdmFsaWQgPSB0eXBlb2YgdmFsdWUgPT09IGV4cGVjdGVkVHlwZTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBCb29sZWFuKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ2Jvb2xlYW4nO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gRnVuY3Rpb24pIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnZnVuY3Rpb24nO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gT2JqZWN0KSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ29iamVjdCc7XG4gICAgdmFsaWQgPSBpc1BsYWluT2JqZWN0KHZhbHVlKTtcbiAgfSBlbHNlIGlmICh0eXBlID09PSBBcnJheSkge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdhcnJheSc7XG4gICAgdmFsaWQgPSBpc0FycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB2YWxpZCA9IHZhbHVlIGluc3RhbmNlb2YgdHlwZTtcbiAgfVxuICByZXR1cm4ge1xuICAgIHZhbGlkOiB2YWxpZCxcbiAgICBleHBlY3RlZFR5cGU6IGV4cGVjdGVkVHlwZVxuICB9O1xufVxuXG4vKipcbiAqIEZvcm1hdCB0eXBlIGZvciBvdXRwdXRcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFR5cGUodHlwZSkge1xuICByZXR1cm4gdHlwZSA/IHR5cGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB0eXBlLnNsaWNlKDEpIDogJ2N1c3RvbSB0eXBlJztcbn1cblxuLyoqXG4gKiBGb3JtYXQgdmFsdWVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0VmFsdWUodmFsKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodmFsKS5zbGljZSg4LCAtMSk7XG59XG5cbnZhciBiaW5kaW5nTW9kZXMgPSBjb25maWcuX3Byb3BCaW5kaW5nTW9kZXM7XG5cbnZhciBwcm9wRGVmID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIGNoaWxkID0gdGhpcy52bTtcbiAgICB2YXIgcGFyZW50ID0gY2hpbGQuX2NvbnRleHQ7XG4gICAgLy8gcGFzc2VkIGluIGZyb20gY29tcGlsZXIgZGlyZWN0bHlcbiAgICB2YXIgcHJvcCA9IHRoaXMuZGVzY3JpcHRvci5wcm9wO1xuICAgIHZhciBjaGlsZEtleSA9IHByb3AucGF0aDtcbiAgICB2YXIgcGFyZW50S2V5ID0gcHJvcC5wYXJlbnRQYXRoO1xuICAgIHZhciB0d29XYXkgPSBwcm9wLm1vZGUgPT09IGJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuXG4gICAgdmFyIHBhcmVudFdhdGNoZXIgPSB0aGlzLnBhcmVudFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihwYXJlbnQsIHBhcmVudEtleSwgZnVuY3Rpb24gKHZhbCkge1xuICAgICAgdXBkYXRlUHJvcChjaGlsZCwgcHJvcCwgdmFsKTtcbiAgICB9LCB7XG4gICAgICB0d29XYXk6IHR3b1dheSxcbiAgICAgIGZpbHRlcnM6IHByb3AuZmlsdGVycyxcbiAgICAgIC8vIGltcG9ydGFudDogcHJvcHMgbmVlZCB0byBiZSBvYnNlcnZlZCBvbiB0aGVcbiAgICAgIC8vIHYtZm9yIHNjb3BlIGlmIHByZXNlbnRcbiAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuICAgIH0pO1xuXG4gICAgLy8gc2V0IHRoZSBjaGlsZCBpbml0aWFsIHZhbHVlLlxuICAgIGluaXRQcm9wKGNoaWxkLCBwcm9wLCBwYXJlbnRXYXRjaGVyLnZhbHVlKTtcblxuICAgIC8vIHNldHVwIHR3by13YXkgYmluZGluZ1xuICAgIGlmICh0d29XYXkpIHtcbiAgICAgIC8vIGltcG9ydGFudDogZGVmZXIgdGhlIGNoaWxkIHdhdGNoZXIgY3JlYXRpb24gdW50aWxcbiAgICAgIC8vIHRoZSBjcmVhdGVkIGhvb2sgKGFmdGVyIGRhdGEgb2JzZXJ2YXRpb24pXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBjaGlsZC4kb25jZSgncHJlLWhvb2s6Y3JlYXRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5jaGlsZFdhdGNoZXIgPSBuZXcgV2F0Y2hlcihjaGlsZCwgY2hpbGRLZXksIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICBwYXJlbnRXYXRjaGVyLnNldCh2YWwpO1xuICAgICAgICB9LCB7XG4gICAgICAgICAgLy8gZW5zdXJlIHN5bmMgdXB3YXJkIGJlZm9yZSBwYXJlbnQgc3luYyBkb3duLlxuICAgICAgICAgIC8vIHRoaXMgaXMgbmVjZXNzYXJ5IGluIGNhc2VzIGUuZy4gdGhlIGNoaWxkXG4gICAgICAgICAgLy8gbXV0YXRlcyBhIHByb3AgYXJyYXksIHRoZW4gcmVwbGFjZXMgaXQuICgjMTY4MylcbiAgICAgICAgICBzeW5jOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHRoaXMucGFyZW50V2F0Y2hlci50ZWFyZG93bigpO1xuICAgIGlmICh0aGlzLmNoaWxkV2F0Y2hlcikge1xuICAgICAgdGhpcy5jaGlsZFdhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBxdWV1ZSQxID0gW107XG52YXIgcXVldWVkID0gZmFsc2U7XG5cbi8qKlxuICogUHVzaCBhIGpvYiBpbnRvIHRoZSBxdWV1ZS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBqb2JcbiAqL1xuXG5mdW5jdGlvbiBwdXNoSm9iKGpvYikge1xuICBxdWV1ZSQxLnB1c2goam9iKTtcbiAgaWYgKCFxdWV1ZWQpIHtcbiAgICBxdWV1ZWQgPSB0cnVlO1xuICAgIG5leHRUaWNrKGZsdXNoKTtcbiAgfVxufVxuXG4vKipcbiAqIEZsdXNoIHRoZSBxdWV1ZSwgYW5kIGRvIG9uZSBmb3JjZWQgcmVmbG93IGJlZm9yZVxuICogdHJpZ2dlcmluZyB0cmFuc2l0aW9ucy5cbiAqL1xuXG5mdW5jdGlvbiBmbHVzaCgpIHtcbiAgLy8gRm9yY2UgbGF5b3V0XG4gIHZhciBmID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50Lm9mZnNldEhlaWdodDtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBxdWV1ZSQxLmxlbmd0aDsgaSsrKSB7XG4gICAgcXVldWUkMVtpXSgpO1xuICB9XG4gIHF1ZXVlJDEgPSBbXTtcbiAgcXVldWVkID0gZmFsc2U7XG4gIC8vIGR1bW15IHJldHVybiwgc28ganMgbGludGVycyBkb24ndCBjb21wbGFpbiBhYm91dFxuICAvLyB1bnVzZWQgdmFyaWFibGUgZlxuICByZXR1cm4gZjtcbn1cblxudmFyIFRZUEVfVFJBTlNJVElPTiA9ICd0cmFuc2l0aW9uJztcbnZhciBUWVBFX0FOSU1BVElPTiA9ICdhbmltYXRpb24nO1xudmFyIHRyYW5zRHVyYXRpb25Qcm9wID0gdHJhbnNpdGlvblByb3AgKyAnRHVyYXRpb24nO1xudmFyIGFuaW1EdXJhdGlvblByb3AgPSBhbmltYXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcblxuLyoqXG4gKiBJZiBhIGp1c3QtZW50ZXJlZCBlbGVtZW50IGlzIGFwcGxpZWQgdGhlXG4gKiBsZWF2ZSBjbGFzcyB3aGlsZSBpdHMgZW50ZXIgdHJhbnNpdGlvbiBoYXNuJ3Qgc3RhcnRlZCB5ZXQsXG4gKiBhbmQgdGhlIHRyYW5zaXRpb25lZCBwcm9wZXJ0eSBoYXMgdGhlIHNhbWUgdmFsdWUgZm9yIGJvdGhcbiAqIGVudGVyL2xlYXZlLCB0aGVuIHRoZSBsZWF2ZSB0cmFuc2l0aW9uIHdpbGwgYmUgc2tpcHBlZCBhbmRcbiAqIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiBUaGlzIGZ1bmN0aW9uIGVuc3VyZXNcbiAqIGl0cyBjYWxsYmFjayB0byBiZSBjYWxsZWQgYWZ0ZXIgYSB0cmFuc2l0aW9uIGhhcyBzdGFydGVkXG4gKiBieSB3YWl0aW5nIGZvciBkb3VibGUgcmFmLlxuICpcbiAqIEl0IGZhbGxzIGJhY2sgdG8gc2V0VGltZW91dCBvbiBkZXZpY2VzIHRoYXQgc3VwcG9ydCBDU1NcbiAqIHRyYW5zaXRpb25zIGJ1dCBub3QgcmFmIChlLmcuIEFuZHJvaWQgNC4yIGJyb3dzZXIpIC0gc2luY2VcbiAqIHRoZXNlIGVudmlyb25tZW50cyBhcmUgdXN1YWxseSBzbG93LCB3ZSBhcmUgZ2l2aW5nIGl0IGFcbiAqIHJlbGF0aXZlbHkgbGFyZ2UgdGltZW91dC5cbiAqL1xuXG52YXIgcmFmID0gaW5Ccm93c2VyICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG52YXIgd2FpdEZvclRyYW5zaXRpb25TdGFydCA9IHJhZlxuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbj8gZnVuY3Rpb24gKGZuKSB7XG4gIHJhZihmdW5jdGlvbiAoKSB7XG4gICAgcmFmKGZuKTtcbiAgfSk7XG59IDogZnVuY3Rpb24gKGZuKSB7XG4gIHNldFRpbWVvdXQoZm4sIDUwKTtcbn07XG5cbi8qKlxuICogQSBUcmFuc2l0aW9uIG9iamVjdCB0aGF0IGVuY2Fwc3VsYXRlcyB0aGUgc3RhdGUgYW5kIGxvZ2ljXG4gKiBvZiB0aGUgdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7T2JqZWN0fSBob29rc1xuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cbmZ1bmN0aW9uIFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdm0pIHtcbiAgdGhpcy5pZCA9IGlkO1xuICB0aGlzLmVsID0gZWw7XG4gIHRoaXMuZW50ZXJDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmVudGVyQ2xhc3MgfHwgaWQgKyAnLWVudGVyJztcbiAgdGhpcy5sZWF2ZUNsYXNzID0gaG9va3MgJiYgaG9va3MubGVhdmVDbGFzcyB8fCBpZCArICctbGVhdmUnO1xuICB0aGlzLmhvb2tzID0gaG9va3M7XG4gIHRoaXMudm0gPSB2bTtcbiAgLy8gYXN5bmMgc3RhdGVcbiAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IHRoaXMub3AgPSB0aGlzLmNiID0gbnVsbDtcbiAgdGhpcy5qdXN0RW50ZXJlZCA9IGZhbHNlO1xuICB0aGlzLmVudGVyZWQgPSB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgdGhpcy50eXBlQ2FjaGUgPSB7fTtcbiAgLy8gY2hlY2sgY3NzIHRyYW5zaXRpb24gdHlwZVxuICB0aGlzLnR5cGUgPSBob29rcyAmJiBob29rcy50eXBlO1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICBpZiAodGhpcy50eXBlICYmIHRoaXMudHlwZSAhPT0gVFlQRV9UUkFOU0lUSU9OICYmIHRoaXMudHlwZSAhPT0gVFlQRV9BTklNQVRJT04pIHtcbiAgICAgIHdhcm4oJ2ludmFsaWQgQ1NTIHRyYW5zaXRpb24gdHlwZSBmb3IgdHJhbnNpdGlvbj1cIicgKyB0aGlzLmlkICsgJ1wiOiAnICsgdGhpcy50eXBlLCB2bSk7XG4gICAgfVxuICB9XG4gIC8vIGJpbmRcbiAgdmFyIHNlbGYgPSB0aGlzO1snZW50ZXJOZXh0VGljaycsICdlbnRlckRvbmUnLCAnbGVhdmVOZXh0VGljaycsICdsZWF2ZURvbmUnXS5mb3JFYWNoKGZ1bmN0aW9uIChtKSB7XG4gICAgc2VsZlttXSA9IGJpbmQoc2VsZlttXSwgc2VsZik7XG4gIH0pO1xufVxuXG52YXIgcCQxID0gVHJhbnNpdGlvbi5wcm90b3R5cGU7XG5cbi8qKlxuICogU3RhcnQgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbi5cbiAqXG4gKiAxLiBlbnRlciB0cmFuc2l0aW9uIHRyaWdnZXJlZFxuICogMi4gY2FsbCBiZWZvcmVFbnRlciBob29rXG4gKiAzLiBhZGQgZW50ZXIgY2xhc3NcbiAqIDQuIGluc2VydC9zaG93IGVsZW1lbnRcbiAqIDUuIGNhbGwgZW50ZXIgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcbiAqIDYuIHJlZmxvd1xuICogNy4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuICogICAgLSB0cmFuc2l0aW9uOlxuICogICAgICAgIHJlbW92ZSBjbGFzcyBub3csIHdhaXQgZm9yIHRyYW5zaXRpb25lbmQsXG4gKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiAgICAtIGFuaW1hdGlvbjpcbiAqICAgICAgICB3YWl0IGZvciBhbmltYXRpb25lbmQsIHJlbW92ZSBjbGFzcyxcbiAqICAgICAgICB0aGVuIGRvbmUgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG4gKiAgICAgICAgZG9uZSBub3cgaWYgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqIDguIHdhaXQgZm9yIGVpdGhlciBkb25lIG9yIGpzIGNhbGxiYWNrLCB0aGVuIGNhbGxcbiAqICAgIGFmdGVyRW50ZXIgaG9vay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcCAtIGluc2VydC9zaG93IHRoZSBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxucCQxLmVudGVyID0gZnVuY3Rpb24gKG9wLCBjYikge1xuICB0aGlzLmNhbmNlbFBlbmRpbmcoKTtcbiAgdGhpcy5jYWxsSG9vaygnYmVmb3JlRW50ZXInKTtcbiAgdGhpcy5jYiA9IGNiO1xuICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICBvcCgpO1xuICB0aGlzLmVudGVyZWQgPSBmYWxzZTtcbiAgdGhpcy5jYWxsSG9va1dpdGhDYignZW50ZXInKTtcbiAgaWYgKHRoaXMuZW50ZXJlZCkge1xuICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuICB9XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmVudGVyQ2FuY2VsbGVkO1xuICBwdXNoSm9iKHRoaXMuZW50ZXJOZXh0VGljayk7XG59O1xuXG4vKipcbiAqIFRoZSBcIm5leHRUaWNrXCIgcGhhc2Ugb2YgYW4gZW50ZXJpbmcgdHJhbnNpdGlvbiwgd2hpY2ggaXNcbiAqIHRvIGJlIHB1c2hlZCBpbnRvIGEgcXVldWUgYW5kIGV4ZWN1dGVkIGFmdGVyIGEgcmVmbG93IHNvXG4gKiB0aGF0IHJlbW92aW5nIHRoZSBjbGFzcyBjYW4gdHJpZ2dlciBhIENTUyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5lbnRlck5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIC8vIHByZXZlbnQgdHJhbnNpdGlvbiBza2lwcGluZ1xuICB0aGlzLmp1c3RFbnRlcmVkID0gdHJ1ZTtcbiAgd2FpdEZvclRyYW5zaXRpb25TdGFydChmdW5jdGlvbiAoKSB7XG4gICAgX3RoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcbiAgfSk7XG4gIHZhciBlbnRlckRvbmUgPSB0aGlzLmVudGVyRG9uZTtcbiAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMuZW50ZXJDbGFzcyk7XG4gIGlmICghdGhpcy5wZW5kaW5nSnNDYikge1xuICAgIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcbiAgICAgIC8vIHRyaWdnZXIgdHJhbnNpdGlvbiBieSByZW1vdmluZyBlbnRlciBjbGFzcyBub3dcbiAgICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gICAgICB0aGlzLnNldHVwQ3NzQ2IodHJhbnNpdGlvbkVuZEV2ZW50LCBlbnRlckRvbmUpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gVFlQRV9BTklNQVRJT04pIHtcbiAgICAgIHRoaXMuc2V0dXBDc3NDYihhbmltYXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZW50ZXJEb25lKCk7XG4gICAgfVxuICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfVFJBTlNJVElPTikge1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIFwiY2xlYW51cFwiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmVudGVyRG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5lbnRlcmVkID0gdHJ1ZTtcbiAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcbiAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgdGhpcy5jYWxsSG9vaygnYWZ0ZXJFbnRlcicpO1xuICBpZiAodGhpcy5jYikgdGhpcy5jYigpO1xufTtcblxuLyoqXG4gKiBTdGFydCBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqXG4gKiAxLiBsZWF2ZSB0cmFuc2l0aW9uIHRyaWdnZXJlZC5cbiAqIDIuIGNhbGwgYmVmb3JlTGVhdmUgaG9va1xuICogMy4gYWRkIGxlYXZlIGNsYXNzICh0cmlnZ2VyIGNzcyB0cmFuc2l0aW9uKVxuICogNC4gY2FsbCBsZWF2ZSBob29rICh3aXRoIHBvc3NpYmxlIGV4cGxpY2l0IGpzIGNhbGxiYWNrKVxuICogNS4gcmVmbG93IGlmIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrIGlzIHByb3ZpZGVkXG4gKiA2LiBiYXNlZCBvbiB0cmFuc2l0aW9uIHR5cGU6XG4gKiAgICAtIHRyYW5zaXRpb24gb3IgYW5pbWF0aW9uOlxuICogICAgICAgIHdhaXQgZm9yIGVuZCBldmVudCwgcmVtb3ZlIGNsYXNzLCB0aGVuIGRvbmUgaWZcbiAqICAgICAgICB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogICAgLSBubyBjc3MgdHJhbnNpdGlvbjpcbiAqICAgICAgICBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiA3LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG4gKiAgICBhZnRlckxlYXZlIGhvb2suXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSByZW1vdmUvaGlkZSB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbnAkMS5sZWF2ZSA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcbiAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG4gIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUxlYXZlJyk7XG4gIHRoaXMub3AgPSBvcDtcbiAgdGhpcy5jYiA9IGNiO1xuICBhZGRDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuICB0aGlzLmxlZnQgPSBmYWxzZTtcbiAgdGhpcy5jYWxsSG9va1dpdGhDYignbGVhdmUnKTtcbiAgaWYgKHRoaXMubGVmdCkge1xuICAgIHJldHVybjsgLy8gdXNlciBjYWxsZWQgZG9uZSBzeW5jaHJvbm91c2x5LlxuICB9XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmxlYXZlQ2FuY2VsbGVkO1xuICAvLyBvbmx5IG5lZWQgdG8gaGFuZGxlIGxlYXZlRG9uZSBpZlxuICAvLyAxLiB0aGUgdHJhbnNpdGlvbiBpcyBhbHJlYWR5IGRvbmUgKHN5bmNocm9ub3VzbHkgY2FsbGVkXG4gIC8vICAgIGJ5IHRoZSB1c2VyLCB3aGljaCBjYXVzZXMgdGhpcy5vcCBzZXQgdG8gbnVsbClcbiAgLy8gMi4gdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFja1xuICBpZiAodGhpcy5vcCAmJiAhdGhpcy5wZW5kaW5nSnNDYikge1xuICAgIC8vIGlmIGEgQ1NTIHRyYW5zaXRpb24gbGVhdmVzIGltbWVkaWF0ZWx5IGFmdGVyIGVudGVyLFxuICAgIC8vIHRoZSB0cmFuc2l0aW9uZW5kIGV2ZW50IG5ldmVyIGZpcmVzLiB0aGVyZWZvcmUgd2VcbiAgICAvLyBkZXRlY3Qgc3VjaCBjYXNlcyBhbmQgZW5kIHRoZSBsZWF2ZSBpbW1lZGlhdGVseS5cbiAgICBpZiAodGhpcy5qdXN0RW50ZXJlZCkge1xuICAgICAgdGhpcy5sZWF2ZURvbmUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcHVzaEpvYih0aGlzLmxlYXZlTmV4dFRpY2spO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGEgbGVhdmluZyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5sZWF2ZU5leHRUaWNrID0gZnVuY3Rpb24gKCkge1xuICB2YXIgdHlwZSA9IHRoaXMuZ2V0Q3NzVHJhbnNpdGlvblR5cGUodGhpcy5sZWF2ZUNsYXNzKTtcbiAgaWYgKHR5cGUpIHtcbiAgICB2YXIgZXZlbnQgPSB0eXBlID09PSBUWVBFX1RSQU5TSVRJT04gPyB0cmFuc2l0aW9uRW5kRXZlbnQgOiBhbmltYXRpb25FbmRFdmVudDtcbiAgICB0aGlzLnNldHVwQ3NzQ2IoZXZlbnQsIHRoaXMubGVhdmVEb25lKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLmxlYXZlRG9uZSgpO1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEubGVhdmVEb25lID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmxlZnQgPSB0cnVlO1xuICB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSBudWxsO1xuICB0aGlzLm9wKCk7XG4gIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG4gIHRoaXMuY2FsbEhvb2soJ2FmdGVyTGVhdmUnKTtcbiAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcbiAgdGhpcy5vcCA9IG51bGw7XG59O1xuXG4vKipcbiAqIENhbmNlbCBhbnkgcGVuZGluZyBjYWxsYmFja3MgZnJvbSBhIHByZXZpb3VzbHkgcnVubmluZ1xuICogYnV0IG5vdCBmaW5pc2hlZCB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5jYW5jZWxQZW5kaW5nID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG4gIHZhciBoYXNQZW5kaW5nID0gZmFsc2U7XG4gIGlmICh0aGlzLnBlbmRpbmdDc3NDYikge1xuICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuICAgIG9mZih0aGlzLmVsLCB0aGlzLnBlbmRpbmdDc3NFdmVudCwgdGhpcy5wZW5kaW5nQ3NzQ2IpO1xuICAgIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSBudWxsO1xuICB9XG4gIGlmICh0aGlzLnBlbmRpbmdKc0NiKSB7XG4gICAgaGFzUGVuZGluZyA9IHRydWU7XG4gICAgdGhpcy5wZW5kaW5nSnNDYi5jYW5jZWwoKTtcbiAgICB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcbiAgfVxuICBpZiAoaGFzUGVuZGluZykge1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gICAgcmVtb3ZlQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcbiAgfVxuICBpZiAodGhpcy5jYW5jZWwpIHtcbiAgICB0aGlzLmNhbmNlbC5jYWxsKHRoaXMudm0sIHRoaXMuZWwpO1xuICAgIHRoaXMuY2FuY2VsID0gbnVsbDtcbiAgfVxufTtcblxuLyoqXG4gKiBDYWxsIGEgdXNlci1wcm92aWRlZCBzeW5jaHJvbm91cyBob29rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cblxucCQxLmNhbGxIb29rID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgaWYgKHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXSkge1xuICAgIHRoaXMuaG9va3NbdHlwZV0uY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDYWxsIGEgdXNlci1wcm92aWRlZCwgcG90ZW50aWFsbHktYXN5bmMgaG9vayBmdW5jdGlvbi5cbiAqIFdlIGNoZWNrIGZvciB0aGUgbGVuZ3RoIG9mIGFyZ3VtZW50cyB0byBzZWUgaWYgdGhlIGhvb2tcbiAqIGV4cGVjdHMgYSBgZG9uZWAgY2FsbGJhY2suIElmIHRydWUsIHRoZSB0cmFuc2l0aW9uJ3MgZW5kXG4gKiB3aWxsIGJlIGRldGVybWluZWQgYnkgd2hlbiB0aGUgdXNlciBjYWxscyB0aGF0IGNhbGxiYWNrO1xuICogb3RoZXJ3aXNlLCB0aGUgZW5kIGlzIGRldGVybWluZWQgYnkgdGhlIENTUyB0cmFuc2l0aW9uIG9yXG4gKiBhbmltYXRpb24uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuXG5wJDEuY2FsbEhvb2tXaXRoQ2IgPSBmdW5jdGlvbiAodHlwZSkge1xuICB2YXIgaG9vayA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rc1t0eXBlXTtcbiAgaWYgKGhvb2spIHtcbiAgICBpZiAoaG9vay5sZW5ndGggPiAxKSB7XG4gICAgICB0aGlzLnBlbmRpbmdKc0NiID0gY2FuY2VsbGFibGUodGhpc1t0eXBlICsgJ0RvbmUnXSk7XG4gICAgfVxuICAgIGhvb2suY2FsbCh0aGlzLnZtLCB0aGlzLmVsLCB0aGlzLnBlbmRpbmdKc0NiKTtcbiAgfVxufTtcblxuLyoqXG4gKiBHZXQgYW4gZWxlbWVudCdzIHRyYW5zaXRpb24gdHlwZSBiYXNlZCBvbiB0aGVcbiAqIGNhbGN1bGF0ZWQgc3R5bGVzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbGFzc05hbWVcbiAqIEByZXR1cm4ge051bWJlcn1cbiAqL1xuXG5wJDEuZ2V0Q3NzVHJhbnNpdGlvblR5cGUgPSBmdW5jdGlvbiAoY2xhc3NOYW1lKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuICAvLyBza2lwIENTUyB0cmFuc2l0aW9ucyBpZiBwYWdlIGlzIG5vdCB2aXNpYmxlIC1cbiAgLy8gdGhpcyBzb2x2ZXMgdGhlIGlzc3VlIG9mIHRyYW5zaXRpb25lbmQgZXZlbnRzIG5vdFxuICAvLyBmaXJpbmcgdW50aWwgdGhlIHBhZ2UgaXMgdmlzaWJsZSBhZ2Fpbi5cbiAgLy8gcGFnZVZpc2liaWxpdHkgQVBJIGlzIHN1cHBvcnRlZCBpbiBJRTEwKywgc2FtZSBhc1xuICAvLyBDU1MgdHJhbnNpdGlvbnMuXG4gIGRvY3VtZW50LmhpZGRlbiB8fFxuICAvLyBleHBsaWNpdCBqcy1vbmx5IHRyYW5zaXRpb25cbiAgdGhpcy5ob29rcyAmJiB0aGlzLmhvb2tzLmNzcyA9PT0gZmFsc2UgfHxcbiAgLy8gZWxlbWVudCBpcyBoaWRkZW5cbiAgaXNIaWRkZW4odGhpcy5lbCkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHR5cGUgPSB0aGlzLnR5cGUgfHwgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXTtcbiAgaWYgKHR5cGUpIHJldHVybiB0eXBlO1xuICB2YXIgaW5saW5lU3R5bGVzID0gdGhpcy5lbC5zdHlsZTtcbiAgdmFyIGNvbXB1dGVkU3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5lbCk7XG4gIHZhciB0cmFuc0R1cmF0aW9uID0gaW5saW5lU3R5bGVzW3RyYW5zRHVyYXRpb25Qcm9wXSB8fCBjb21wdXRlZFN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF07XG4gIGlmICh0cmFuc0R1cmF0aW9uICYmIHRyYW5zRHVyYXRpb24gIT09ICcwcycpIHtcbiAgICB0eXBlID0gVFlQRV9UUkFOU0lUSU9OO1xuICB9IGVsc2Uge1xuICAgIHZhciBhbmltRHVyYXRpb24gPSBpbmxpbmVTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbYW5pbUR1cmF0aW9uUHJvcF07XG4gICAgaWYgKGFuaW1EdXJhdGlvbiAmJiBhbmltRHVyYXRpb24gIT09ICcwcycpIHtcbiAgICAgIHR5cGUgPSBUWVBFX0FOSU1BVElPTjtcbiAgICB9XG4gIH1cbiAgaWYgKHR5cGUpIHtcbiAgICB0aGlzLnR5cGVDYWNoZVtjbGFzc05hbWVdID0gdHlwZTtcbiAgfVxuICByZXR1cm4gdHlwZTtcbn07XG5cbi8qKlxuICogU2V0dXAgYSBDU1MgdHJhbnNpdGlvbmVuZC9hbmltYXRpb25lbmQgY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbnAkMS5zZXR1cENzc0NiID0gZnVuY3Rpb24gKGV2ZW50LCBjYikge1xuICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IGV2ZW50O1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBlbCA9IHRoaXMuZWw7XG4gIHZhciBvbkVuZCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gZnVuY3Rpb24gKGUpIHtcbiAgICBpZiAoZS50YXJnZXQgPT09IGVsKSB7XG4gICAgICBvZmYoZWwsIGV2ZW50LCBvbkVuZCk7XG4gICAgICBzZWxmLnBlbmRpbmdDc3NFdmVudCA9IHNlbGYucGVuZGluZ0Nzc0NiID0gbnVsbDtcbiAgICAgIGlmICghc2VsZi5wZW5kaW5nSnNDYiAmJiBjYikge1xuICAgICAgICBjYigpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbiAgb24oZWwsIGV2ZW50LCBvbkVuZCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgaGlkZGVuIC0gaW4gdGhhdCBjYXNlIHdlIGNhbiBqdXN0XG4gKiBza2lwIHRoZSB0cmFuc2l0aW9uIGFsbHRvZ2V0aGVyLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNIaWRkZW4oZWwpIHtcbiAgaWYgKC9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcbiAgICAvLyBTVkcgZWxlbWVudHMgZG8gbm90IGhhdmUgb2Zmc2V0KFdpZHRofEhlaWdodClcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIGNoZWNrIHRoZSBjbGllbnQgcmVjdFxuICAgIHZhciByZWN0ID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgcmV0dXJuICEocmVjdC53aWR0aCB8fCByZWN0LmhlaWdodCk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuICEoZWwub2Zmc2V0V2lkdGggfHwgZWwub2Zmc2V0SGVpZ2h0IHx8IGVsLmdldENsaWVudFJlY3RzKCkubGVuZ3RoKTtcbiAgfVxufVxuXG52YXIgdHJhbnNpdGlvbiQxID0ge1xuXG4gIHByaW9yaXR5OiBUUkFOU0lUSU9OLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKGlkLCBvbGRJZCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgLy8gcmVzb2x2ZSBvbiBvd25lciB2bVxuICAgIHZhciBob29rcyA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAndHJhbnNpdGlvbnMnLCBpZCk7XG4gICAgaWQgPSBpZCB8fCAndic7XG4gICAgb2xkSWQgPSBvbGRJZCB8fCAndic7XG4gICAgZWwuX192X3RyYW5zID0gbmV3IFRyYW5zaXRpb24oZWwsIGlkLCBob29rcywgdGhpcy52bSk7XG4gICAgcmVtb3ZlQ2xhc3MoZWwsIG9sZElkICsgJy10cmFuc2l0aW9uJyk7XG4gICAgYWRkQ2xhc3MoZWwsIGlkICsgJy10cmFuc2l0aW9uJyk7XG4gIH1cbn07XG5cbnZhciBpbnRlcm5hbERpcmVjdGl2ZXMgPSB7XG4gIHN0eWxlOiBzdHlsZSxcbiAgJ2NsYXNzJzogdkNsYXNzLFxuICBjb21wb25lbnQ6IGNvbXBvbmVudCxcbiAgcHJvcDogcHJvcERlZixcbiAgdHJhbnNpdGlvbjogdHJhbnNpdGlvbiQxXG59O1xuXG4vLyBzcGVjaWFsIGJpbmRpbmcgcHJlZml4ZXNcbnZhciBiaW5kUkUgPSAvXnYtYmluZDp8XjovO1xudmFyIG9uUkUgPSAvXnYtb246fF5ALztcbnZhciBkaXJBdHRyUkUgPSAvXnYtKFteOl0rKSg/OiR8OiguKikkKS87XG52YXIgbW9kaWZpZXJSRSA9IC9cXC5bXlxcLl0rL2c7XG52YXIgdHJhbnNpdGlvblJFID0gL14odi1iaW5kOnw6KT90cmFuc2l0aW9uJC87XG5cbi8vIGRlZmF1bHQgZGlyZWN0aXZlIHByaW9yaXR5XG52YXIgREVGQVVMVF9QUklPUklUWSA9IDEwMDA7XG52YXIgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSA9IDIwMDA7XG5cbi8qKlxuICogQ29tcGlsZSBhIHRlbXBsYXRlIGFuZCByZXR1cm4gYSByZXVzYWJsZSBjb21wb3NpdGUgbGlua1xuICogZnVuY3Rpb24sIHdoaWNoIHJlY3Vyc2l2ZWx5IGNvbnRhaW5zIG1vcmUgbGluayBmdW5jdGlvbnNcbiAqIGluc2lkZS4gVGhpcyB0b3AgbGV2ZWwgY29tcGlsZSBmdW5jdGlvbiB3b3VsZCBub3JtYWxseVxuICogYmUgY2FsbGVkIG9uIGluc3RhbmNlIHJvb3Qgbm9kZXMsIGJ1dCBjYW4gYWxzbyBiZSB1c2VkXG4gKiBmb3IgcGFydGlhbCBjb21waWxhdGlvbiBpZiB0aGUgcGFydGlhbCBhcmd1bWVudCBpcyB0cnVlLlxuICpcbiAqIFRoZSByZXR1cm5lZCBjb21wb3NpdGUgbGluayBmdW5jdGlvbiwgd2hlbiBjYWxsZWQsIHdpbGxcbiAqIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXNcbiAqIGNyZWF0ZWQgZHVyaW5nIHRoZSBsaW5raW5nIHBoYXNlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcGFydGlhbFxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZShlbCwgb3B0aW9ucywgcGFydGlhbCkge1xuICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgbm9kZSBpdHNlbGYuXG4gIHZhciBub2RlTGlua0ZuID0gcGFydGlhbCB8fCAhb3B0aW9ucy5fYXNDb21wb25lbnQgPyBjb21waWxlTm9kZShlbCwgb3B0aW9ucykgOiBudWxsO1xuICAvLyBsaW5rIGZ1bmN0aW9uIGZvciB0aGUgY2hpbGROb2Rlc1xuICB2YXIgY2hpbGRMaW5rRm4gPSAhKG5vZGVMaW5rRm4gJiYgbm9kZUxpbmtGbi50ZXJtaW5hbCkgJiYgIWlzU2NyaXB0KGVsKSAmJiBlbC5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3QoZWwuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuXG4gIC8qKlxuICAgKiBBIGNvbXBvc2l0ZSBsaW5rZXIgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIGEgYWxyZWFkeVxuICAgKiBjb21waWxlZCBwaWVjZSBvZiBET00sIHdoaWNoIGluc3RhbnRpYXRlcyBhbGwgZGlyZWN0aXZlXG4gICAqIGluc3RhbmNlcy5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gaG9zdCB2bSBvZiB0cmFuc2NsdWRlZCBjb250ZW50XG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddIC0gbGluayBjb250ZXh0IGZyYWdtZW50XG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAgICovXG5cbiAgcmV0dXJuIGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG4gICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGVsLmNoaWxkTm9kZXMpO1xuICAgIC8vIGxpbmtcbiAgICB2YXIgZGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uIGNvbXBvc2l0ZUxpbmtDYXB0dXJlcigpIHtcbiAgICAgIGlmIChub2RlTGlua0ZuKSBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgICAgaWYgKGNoaWxkTGlua0ZuKSBjaGlsZExpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgIH0sIHZtKTtcbiAgICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBkaXJzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBBcHBseSBhIGxpbmtlciB0byBhIHZtL2VsZW1lbnQgcGFpciBhbmQgY2FwdHVyZSB0aGVcbiAqIGRpcmVjdGl2ZXMgY3JlYXRlZCBkdXJpbmcgdGhlIHByb2Nlc3MuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiBsaW5rQW5kQ2FwdHVyZShsaW5rZXIsIHZtKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgIC8vIHJlc2V0IGRpcmVjdGl2ZXMgYmVmb3JlIGV2ZXJ5IGNhcHR1cmUgaW4gcHJvZHVjdGlvblxuICAgIC8vIG1vZGUsIHNvIHRoYXQgd2hlbiB1bmxpbmtpbmcgd2UgZG9uJ3QgbmVlZCB0byBzcGxpY2VcbiAgICAvLyB0aGVtIG91dCAod2hpY2ggdHVybnMgb3V0IHRvIGJlIGEgcGVyZiBoaXQpLlxuICAgIC8vIHRoZXkgYXJlIGtlcHQgaW4gZGV2ZWxvcG1lbnQgbW9kZSBiZWNhdXNlIHRoZXkgYXJlXG4gICAgLy8gdXNlZnVsIGZvciBWdWUncyBvd24gdGVzdHMuXG4gICAgdm0uX2RpcmVjdGl2ZXMgPSBbXTtcbiAgfVxuICB2YXIgb3JpZ2luYWxEaXJDb3VudCA9IHZtLl9kaXJlY3RpdmVzLmxlbmd0aDtcbiAgbGlua2VyKCk7XG4gIHZhciBkaXJzID0gdm0uX2RpcmVjdGl2ZXMuc2xpY2Uob3JpZ2luYWxEaXJDb3VudCk7XG4gIGRpcnMuc29ydChkaXJlY3RpdmVDb21wYXJhdG9yKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBkaXJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGRpcnNbaV0uX2JpbmQoKTtcbiAgfVxuICByZXR1cm4gZGlycztcbn1cblxuLyoqXG4gKiBEaXJlY3RpdmUgcHJpb3JpdHkgc29ydCBjb21wYXJhdG9yXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGFcbiAqIEBwYXJhbSB7T2JqZWN0fSBiXG4gKi9cblxuZnVuY3Rpb24gZGlyZWN0aXZlQ29tcGFyYXRvcihhLCBiKSB7XG4gIGEgPSBhLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG4gIGIgPSBiLmRlc2NyaXB0b3IuZGVmLnByaW9yaXR5IHx8IERFRkFVTFRfUFJJT1JJVFk7XG4gIHJldHVybiBhID4gYiA/IC0xIDogYSA9PT0gYiA/IDAgOiAxO1xufVxuXG4vKipcbiAqIExpbmtlciBmdW5jdGlvbnMgcmV0dXJuIGFuIHVubGluayBmdW5jdGlvbiB0aGF0XG4gKiB0ZWFyc2Rvd24gYWxsIGRpcmVjdGl2ZXMgaW5zdGFuY2VzIGdlbmVyYXRlZCBkdXJpbmdcbiAqIHRoZSBwcm9jZXNzLlxuICpcbiAqIFdlIGNyZWF0ZSB1bmxpbmsgZnVuY3Rpb25zIHdpdGggb25seSB0aGUgbmVjZXNzYXJ5XG4gKiBpbmZvcm1hdGlvbiB0byBhdm9pZCByZXRhaW5pbmcgYWRkaXRpb25hbCBjbG9zdXJlcy5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7QXJyYXl9IGRpcnNcbiAqIEBwYXJhbSB7VnVlfSBbY29udGV4dF1cbiAqIEBwYXJhbSB7QXJyYXl9IFtjb250ZXh0RGlyc11cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIG1ha2VVbmxpbmtGbih2bSwgZGlycywgY29udGV4dCwgY29udGV4dERpcnMpIHtcbiAgZnVuY3Rpb24gdW5saW5rKGRlc3Ryb3lpbmcpIHtcbiAgICB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpO1xuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHREaXJzKSB7XG4gICAgICB0ZWFyZG93bkRpcnMoY29udGV4dCwgY29udGV4dERpcnMpO1xuICAgIH1cbiAgfVxuICAvLyBleHBvc2UgbGlua2VkIGRpcmVjdGl2ZXNcbiAgdW5saW5rLmRpcnMgPSBkaXJzO1xuICByZXR1cm4gdW5saW5rO1xufVxuXG4vKipcbiAqIFRlYXJkb3duIHBhcnRpYWwgbGlua2VkIGRpcmVjdGl2ZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJzXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGRlc3Ryb3lpbmdcbiAqL1xuXG5mdW5jdGlvbiB0ZWFyZG93bkRpcnModm0sIGRpcnMsIGRlc3Ryb3lpbmcpIHtcbiAgdmFyIGkgPSBkaXJzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGRpcnNbaV0uX3RlYXJkb3duKCk7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgIWRlc3Ryb3lpbmcpIHtcbiAgICAgIHZtLl9kaXJlY3RpdmVzLiRyZW1vdmUoZGlyc1tpXSk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogQ29tcGlsZSBsaW5rIHByb3BzIG9uIGFuIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IHByb3BzXG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXVxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZUFuZExpbmtQcm9wcyh2bSwgZWwsIHByb3BzLCBzY29wZSkge1xuICB2YXIgcHJvcHNMaW5rRm4gPSBjb21waWxlUHJvcHMoZWwsIHByb3BzLCB2bSk7XG4gIHZhciBwcm9wRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcbiAgICBwcm9wc0xpbmtGbih2bSwgc2NvcGUpO1xuICB9LCB2bSk7XG4gIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHByb3BEaXJzKTtcbn1cblxuLyoqXG4gKiBDb21waWxlIHRoZSByb290IGVsZW1lbnQgb2YgYW4gaW5zdGFuY2UuXG4gKlxuICogMS4gYXR0cnMgb24gY29udGV4dCBjb250YWluZXIgKGNvbnRleHQgc2NvcGUpXG4gKiAyLiBhdHRycyBvbiB0aGUgY29tcG9uZW50IHRlbXBsYXRlIHJvb3Qgbm9kZSwgaWZcbiAqICAgIHJlcGxhY2U6dHJ1ZSAoY2hpbGQgc2NvcGUpXG4gKlxuICogSWYgdGhpcyBpcyBhIGZyYWdtZW50IGluc3RhbmNlLCB3ZSBvbmx5IG5lZWQgdG8gY29tcGlsZSAxLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gY29udGV4dE9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVSb290KGVsLCBvcHRpb25zLCBjb250ZXh0T3B0aW9ucykge1xuICB2YXIgY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9jb250YWluZXJBdHRycztcbiAgdmFyIHJlcGxhY2VyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzO1xuICB2YXIgY29udGV4dExpbmtGbiwgcmVwbGFjZXJMaW5rRm47XG5cbiAgLy8gb25seSBuZWVkIHRvIGNvbXBpbGUgb3RoZXIgYXR0cmlidXRlcyBmb3JcbiAgLy8gbm9uLWZyYWdtZW50IGluc3RhbmNlc1xuICBpZiAoZWwubm9kZVR5cGUgIT09IDExKSB7XG4gICAgLy8gZm9yIGNvbXBvbmVudHMsIGNvbnRhaW5lciBhbmQgcmVwbGFjZXIgbmVlZCB0byBiZVxuICAgIC8vIGNvbXBpbGVkIHNlcGFyYXRlbHkgYW5kIGxpbmtlZCBpbiBkaWZmZXJlbnQgc2NvcGVzLlxuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuICAgICAgLy8gMi4gY29udGFpbmVyIGF0dHJpYnV0ZXNcbiAgICAgIGlmIChjb250YWluZXJBdHRycyAmJiBjb250ZXh0T3B0aW9ucykge1xuICAgICAgICBjb250ZXh0TGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoY29udGFpbmVyQXR0cnMsIGNvbnRleHRPcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIGlmIChyZXBsYWNlckF0dHJzKSB7XG4gICAgICAgIC8vIDMuIHJlcGxhY2VyIGF0dHJpYnV0ZXNcbiAgICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhyZXBsYWNlckF0dHJzLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9uLWNvbXBvbmVudCwganVzdCBjb21waWxlIGFzIGEgbm9ybWFsIGVsZW1lbnQuXG4gICAgICByZXBsYWNlckxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGVsLmF0dHJpYnV0ZXMsIG9wdGlvbnMpO1xuICAgIH1cbiAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbnRhaW5lckF0dHJzKSB7XG4gICAgLy8gd2FybiBjb250YWluZXIgZGlyZWN0aXZlcyBmb3IgZnJhZ21lbnQgaW5zdGFuY2VzXG4gICAgdmFyIG5hbWVzID0gY29udGFpbmVyQXR0cnMuZmlsdGVyKGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICAvLyBhbGxvdyB2dWUtbG9hZGVyL3Z1ZWlmeSBzY29wZWQgY3NzIGF0dHJpYnV0ZXNcbiAgICAgIHJldHVybiBhdHRyLm5hbWUuaW5kZXhPZignX3YtJykgPCAwICYmXG4gICAgICAvLyBhbGxvdyBldmVudCBsaXN0ZW5lcnNcbiAgICAgICFvblJFLnRlc3QoYXR0ci5uYW1lKSAmJlxuICAgICAgLy8gYWxsb3cgc2xvdHNcbiAgICAgIGF0dHIubmFtZSAhPT0gJ3Nsb3QnO1xuICAgIH0pLm1hcChmdW5jdGlvbiAoYXR0cikge1xuICAgICAgcmV0dXJuICdcIicgKyBhdHRyLm5hbWUgKyAnXCInO1xuICAgIH0pO1xuICAgIGlmIChuYW1lcy5sZW5ndGgpIHtcbiAgICAgIHZhciBwbHVyYWwgPSBuYW1lcy5sZW5ndGggPiAxO1xuICAgICAgd2FybignQXR0cmlidXRlJyArIChwbHVyYWwgPyAncyAnIDogJyAnKSArIG5hbWVzLmpvaW4oJywgJykgKyAocGx1cmFsID8gJyBhcmUnIDogJyBpcycpICsgJyBpZ25vcmVkIG9uIGNvbXBvbmVudCAnICsgJzwnICsgb3B0aW9ucy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPiBiZWNhdXNlICcgKyAndGhlIGNvbXBvbmVudCBpcyBhIGZyYWdtZW50IGluc3RhbmNlOiAnICsgJ2h0dHA6Ly92dWVqcy5vcmcvZ3VpZGUvY29tcG9uZW50cy5odG1sI0ZyYWdtZW50LUluc3RhbmNlJyk7XG4gICAgfVxuICB9XG5cbiAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gbnVsbDtcbiAgcmV0dXJuIGZ1bmN0aW9uIHJvb3RMaW5rRm4odm0sIGVsLCBzY29wZSkge1xuICAgIC8vIGxpbmsgY29udGV4dCBzY29wZSBkaXJzXG4gICAgdmFyIGNvbnRleHQgPSB2bS5fY29udGV4dDtcbiAgICB2YXIgY29udGV4dERpcnM7XG4gICAgaWYgKGNvbnRleHQgJiYgY29udGV4dExpbmtGbikge1xuICAgICAgY29udGV4dERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbnRleHRMaW5rRm4oY29udGV4dCwgZWwsIG51bGwsIHNjb3BlKTtcbiAgICAgIH0sIGNvbnRleHQpO1xuICAgIH1cblxuICAgIC8vIGxpbmsgc2VsZlxuICAgIHZhciBzZWxmRGlycyA9IGxpbmtBbmRDYXB0dXJlKGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChyZXBsYWNlckxpbmtGbikgcmVwbGFjZXJMaW5rRm4odm0sIGVsKTtcbiAgICB9LCB2bSk7XG5cbiAgICAvLyByZXR1cm4gdGhlIHVubGluayBmdW5jdGlvbiB0aGF0IHRlYXJzZG93biBjb250ZXh0XG4gICAgLy8gY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgc2VsZkRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBDb21waWxlIGEgbm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbiBiYXNlZCBvbiB0aGVcbiAqIG5vZGUgdHlwZS5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpIHtcbiAgdmFyIHR5cGUgPSBub2RlLm5vZGVUeXBlO1xuICBpZiAodHlwZSA9PT0gMSAmJiAhaXNTY3JpcHQobm9kZSkpIHtcbiAgICByZXR1cm4gY29tcGlsZUVsZW1lbnQobm9kZSwgb3B0aW9ucyk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gMyAmJiBub2RlLmRhdGEudHJpbSgpKSB7XG4gICAgcmV0dXJuIGNvbXBpbGVUZXh0Tm9kZShub2RlLCBvcHRpb25zKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgYW4gZWxlbWVudCBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlRWxlbWVudChlbCwgb3B0aW9ucykge1xuICAvLyBwcmVwcm9jZXNzIHRleHRhcmVhcy5cbiAgLy8gdGV4dGFyZWEgdHJlYXRzIGl0cyB0ZXh0IGNvbnRlbnQgYXMgdGhlIGluaXRpYWwgdmFsdWUuXG4gIC8vIGp1c3QgYmluZCBpdCBhcyBhbiBhdHRyIGRpcmVjdGl2ZSBmb3IgdmFsdWUuXG4gIGlmIChlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dChlbC52YWx1ZSk7XG4gICAgaWYgKHRva2Vucykge1xuICAgICAgZWwuc2V0QXR0cmlidXRlKCc6dmFsdWUnLCB0b2tlbnNUb0V4cCh0b2tlbnMpKTtcbiAgICAgIGVsLnZhbHVlID0gJyc7XG4gICAgfVxuICB9XG4gIHZhciBsaW5rRm47XG4gIHZhciBoYXNBdHRycyA9IGVsLmhhc0F0dHJpYnV0ZXMoKTtcbiAgdmFyIGF0dHJzID0gaGFzQXR0cnMgJiYgdG9BcnJheShlbC5hdHRyaWJ1dGVzKTtcbiAgLy8gY2hlY2sgdGVybWluYWwgZGlyZWN0aXZlcyAoZm9yICYgaWYpXG4gIGlmIChoYXNBdHRycykge1xuICAgIGxpbmtGbiA9IGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucyk7XG4gIH1cbiAgLy8gY2hlY2sgZWxlbWVudCBkaXJlY3RpdmVzXG4gIGlmICghbGlua0ZuKSB7XG4gICAgbGlua0ZuID0gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucyk7XG4gIH1cbiAgLy8gY2hlY2sgY29tcG9uZW50XG4gIGlmICghbGlua0ZuKSB7XG4gICAgbGlua0ZuID0gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpO1xuICB9XG4gIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG4gIGlmICghbGlua0ZuICYmIGhhc0F0dHJzKSB7XG4gICAgbGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMoYXR0cnMsIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiBsaW5rRm47XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIHRleHROb2RlIGFuZCByZXR1cm4gYSBub2RlTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7VGV4dE5vZGV9IG5vZGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnxudWxsfSB0ZXh0Tm9kZUxpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVUZXh0Tm9kZShub2RlLCBvcHRpb25zKSB7XG4gIC8vIHNraXAgbWFya2VkIHRleHQgbm9kZXNcbiAgaWYgKG5vZGUuX3NraXApIHtcbiAgICByZXR1cm4gcmVtb3ZlVGV4dDtcbiAgfVxuXG4gIHZhciB0b2tlbnMgPSBwYXJzZVRleHQobm9kZS53aG9sZVRleHQpO1xuICBpZiAoIXRva2Vucykge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gbWFyayBhZGphY2VudCB0ZXh0IG5vZGVzIGFzIHNraXBwZWQsXG4gIC8vIGJlY2F1c2Ugd2UgYXJlIHVzaW5nIG5vZGUud2hvbGVUZXh0IHRvIGNvbXBpbGVcbiAgLy8gYWxsIGFkamFjZW50IHRleHQgbm9kZXMgdG9nZXRoZXIuIFRoaXMgZml4ZXNcbiAgLy8gaXNzdWVzIGluIElFIHdoZXJlIHNvbWV0aW1lcyBpdCBzcGxpdHMgdXAgYSBzaW5nbGVcbiAgLy8gdGV4dCBub2RlIGludG8gbXVsdGlwbGUgb25lcy5cbiAgdmFyIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICB3aGlsZSAobmV4dCAmJiBuZXh0Lm5vZGVUeXBlID09PSAzKSB7XG4gICAgbmV4dC5fc2tpcCA9IHRydWU7XG4gICAgbmV4dCA9IG5leHQubmV4dFNpYmxpbmc7XG4gIH1cblxuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIGVsLCB0b2tlbjtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSB0b2tlbnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgZWwgPSB0b2tlbi50YWcgPyBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcbiAgICBmcmFnLmFwcGVuZENoaWxkKGVsKTtcbiAgfVxuICByZXR1cm4gbWFrZVRleHROb2RlTGlua0ZuKHRva2VucywgZnJhZywgb3B0aW9ucyk7XG59XG5cbi8qKlxuICogTGlua2VyIGZvciBhbiBza2lwcGVkIHRleHQgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7VGV4dH0gbm9kZVxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZVRleHQodm0sIG5vZGUpIHtcbiAgcmVtb3ZlKG5vZGUpO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgYSBzaW5nbGUgdGV4dCB0b2tlbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtOb2RlfVxuICovXG5cbmZ1bmN0aW9uIHByb2Nlc3NUZXh0VG9rZW4odG9rZW4sIG9wdGlvbnMpIHtcbiAgdmFyIGVsO1xuICBpZiAodG9rZW4ub25lVGltZSkge1xuICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodG9rZW4udmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIGlmICh0b2tlbi5odG1sKSB7XG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoJ3YtaHRtbCcpO1xuICAgICAgc2V0VG9rZW5UeXBlKCdodG1sJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIElFIHdpbGwgY2xlYW4gdXAgZW1wdHkgdGV4dE5vZGVzIGR1cmluZ1xuICAgICAgLy8gZnJhZy5jbG9uZU5vZGUodHJ1ZSksIHNvIHdlIGhhdmUgdG8gZ2l2ZSBpdFxuICAgICAgLy8gc29tZXRoaW5nIGhlcmUuLi5cbiAgICAgIGVsID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoJyAnKTtcbiAgICAgIHNldFRva2VuVHlwZSgndGV4dCcpO1xuICAgIH1cbiAgfVxuICBmdW5jdGlvbiBzZXRUb2tlblR5cGUodHlwZSkge1xuICAgIGlmICh0b2tlbi5kZXNjcmlwdG9yKSByZXR1cm47XG4gICAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHRva2VuLnZhbHVlKTtcbiAgICB0b2tlbi5kZXNjcmlwdG9yID0ge1xuICAgICAgbmFtZTogdHlwZSxcbiAgICAgIGRlZjogZGlyZWN0aXZlc1t0eXBlXSxcbiAgICAgIGV4cHJlc3Npb246IHBhcnNlZC5leHByZXNzaW9uLFxuICAgICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnNcbiAgICB9O1xuICB9XG4gIHJldHVybiBlbDtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgcHJvY2Vzc2VzIGEgdGV4dE5vZGUuXG4gKlxuICogQHBhcmFtIHtBcnJheTxPYmplY3Q+fSB0b2tlbnNcbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICovXG5cbmZ1bmN0aW9uIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHRleHROb2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUpIHtcbiAgICB2YXIgZnJhZ0Nsb25lID0gZnJhZy5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KGZyYWdDbG9uZS5jaGlsZE5vZGVzKTtcbiAgICB2YXIgdG9rZW4sIHZhbHVlLCBub2RlO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdG9rZW4gPSB0b2tlbnNbaV07XG4gICAgICB2YWx1ZSA9IHRva2VuLnZhbHVlO1xuICAgICAgaWYgKHRva2VuLnRhZykge1xuICAgICAgICBub2RlID0gY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgaWYgKHRva2VuLm9uZVRpbWUpIHtcbiAgICAgICAgICB2YWx1ZSA9IChzY29wZSB8fCB2bSkuJGV2YWwodmFsdWUpO1xuICAgICAgICAgIGlmICh0b2tlbi5odG1sKSB7XG4gICAgICAgICAgICByZXBsYWNlKG5vZGUsIHBhcnNlVGVtcGxhdGUodmFsdWUsIHRydWUpKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbm9kZS5kYXRhID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdm0uX2JpbmREaXIodG9rZW4uZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJlcGxhY2UoZWwsIGZyYWdDbG9uZSk7XG4gIH07XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIG5vZGUgbGlzdCBhbmQgcmV0dXJuIGEgY2hpbGRMaW5rRm4uXG4gKlxuICogQHBhcmFtIHtOb2RlTGlzdH0gbm9kZUxpc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZU5vZGVMaXN0KG5vZGVMaXN0LCBvcHRpb25zKSB7XG4gIHZhciBsaW5rRm5zID0gW107XG4gIHZhciBub2RlTGlua0ZuLCBjaGlsZExpbmtGbiwgbm9kZTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2RlTGlzdC5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBub2RlID0gbm9kZUxpc3RbaV07XG4gICAgbm9kZUxpbmtGbiA9IGNvbXBpbGVOb2RlKG5vZGUsIG9wdGlvbnMpO1xuICAgIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmIG5vZGUudGFnTmFtZSAhPT0gJ1NDUklQVCcgJiYgbm9kZS5oYXNDaGlsZE5vZGVzKCkgPyBjb21waWxlTm9kZUxpc3Qobm9kZS5jaGlsZE5vZGVzLCBvcHRpb25zKSA6IG51bGw7XG4gICAgbGlua0Zucy5wdXNoKG5vZGVMaW5rRm4sIGNoaWxkTGlua0ZuKTtcbiAgfVxuICByZXR1cm4gbGlua0Zucy5sZW5ndGggPyBtYWtlQ2hpbGRMaW5rRm4obGlua0ZucykgOiBudWxsO1xufVxuXG4vKipcbiAqIE1ha2UgYSBjaGlsZCBsaW5rIGZ1bmN0aW9uIGZvciBhIG5vZGUncyBjaGlsZE5vZGVzLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8RnVuY3Rpb24+fSBsaW5rRm5zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gY2hpbGRMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlQ2hpbGRMaW5rRm4obGlua0Zucykge1xuICByZXR1cm4gZnVuY3Rpb24gY2hpbGRMaW5rRm4odm0sIG5vZGVzLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIHZhciBub2RlLCBub2RlTGlua0ZuLCBjaGlsZHJlbkxpbmtGbjtcbiAgICBmb3IgKHZhciBpID0gMCwgbiA9IDAsIGwgPSBsaW5rRm5zLmxlbmd0aDsgaSA8IGw7IG4rKykge1xuICAgICAgbm9kZSA9IG5vZGVzW25dO1xuICAgICAgbm9kZUxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcbiAgICAgIGNoaWxkcmVuTGlua0ZuID0gbGlua0Zuc1tpKytdO1xuICAgICAgLy8gY2FjaGUgY2hpbGROb2RlcyBiZWZvcmUgbGlua2luZyBwYXJlbnQsIGZpeCAjNjU3XG4gICAgICB2YXIgY2hpbGROb2RlcyA9IHRvQXJyYXkobm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgIGlmIChub2RlTGlua0ZuKSB7XG4gICAgICAgIG5vZGVMaW5rRm4odm0sIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIH1cbiAgICAgIGlmIChjaGlsZHJlbkxpbmtGbikge1xuICAgICAgICBjaGlsZHJlbkxpbmtGbih2bSwgY2hpbGROb2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuLyoqXG4gKiBDaGVjayBmb3IgZWxlbWVudCBkaXJlY3RpdmVzIChjdXN0b20gZWxlbWVudHMgdGhhdCBzaG91bGRcbiAqIGJlIHJlc292bGVkIGFzIHRlcm1pbmFsIGRpcmVjdGl2ZXMpLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gY2hlY2tFbGVtZW50RGlyZWN0aXZlcyhlbCwgb3B0aW9ucykge1xuICB2YXIgdGFnID0gZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICBpZiAoY29tbW9uVGFnUkUudGVzdCh0YWcpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBkZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKTtcbiAgaWYgKGRlZikge1xuICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCB0YWcsICcnLCBvcHRpb25zLCBkZWYpO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudC4gSWYgeWVzLCByZXR1cm5cbiAqIGEgY29tcG9uZW50IGxpbmsgZnVuY3Rpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjaGVja0NvbXBvbmVudChlbCwgb3B0aW9ucykge1xuICB2YXIgY29tcG9uZW50ID0gY2hlY2tDb21wb25lbnRBdHRyKGVsLCBvcHRpb25zKTtcbiAgaWYgKGNvbXBvbmVudCkge1xuICAgIHZhciByZWYgPSBmaW5kUmVmKGVsKTtcbiAgICB2YXIgZGVzY3JpcHRvciA9IHtcbiAgICAgIG5hbWU6ICdjb21wb25lbnQnLFxuICAgICAgcmVmOiByZWYsXG4gICAgICBleHByZXNzaW9uOiBjb21wb25lbnQuaWQsXG4gICAgICBkZWY6IGludGVybmFsRGlyZWN0aXZlcy5jb21wb25lbnQsXG4gICAgICBtb2RpZmllcnM6IHtcbiAgICAgICAgbGl0ZXJhbDogIWNvbXBvbmVudC5keW5hbWljXG4gICAgICB9XG4gICAgfTtcbiAgICB2YXIgY29tcG9uZW50TGlua0ZuID0gZnVuY3Rpb24gY29tcG9uZW50TGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAgIGlmIChyZWYpIHtcbiAgICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgcmVmLCBudWxsKTtcbiAgICAgIH1cbiAgICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgfTtcbiAgICBjb21wb25lbnRMaW5rRm4udGVybWluYWwgPSB0cnVlO1xuICAgIHJldHVybiBjb21wb25lbnRMaW5rRm47XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBhbiBlbGVtZW50IGZvciB0ZXJtaW5hbCBkaXJlY3RpdmVzIGluIGZpeGVkIG9yZGVyLlxuICogSWYgaXQgZmluZHMgb25lLCByZXR1cm4gYSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7QXJyYXl9IGF0dHJzXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gY2hlY2tUZXJtaW5hbERpcmVjdGl2ZXMoZWwsIGF0dHJzLCBvcHRpb25zKSB7XG4gIC8vIHNraXAgdi1wcmVcbiAgaWYgKGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG4gICAgcmV0dXJuIHNraXA7XG4gIH1cbiAgLy8gc2tpcCB2LWVsc2UgYmxvY2ssIGJ1dCBvbmx5IGlmIGZvbGxvd2luZyB2LWlmXG4gIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3YtZWxzZScpKSB7XG4gICAgdmFyIHByZXYgPSBlbC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xuICAgIGlmIChwcmV2ICYmIHByZXYuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICAgIHJldHVybiBza2lwO1xuICAgIH1cbiAgfVxuXG4gIHZhciBhdHRyLCBuYW1lLCB2YWx1ZSwgbW9kaWZpZXJzLCBtYXRjaGVkLCBkaXJOYW1lLCByYXdOYW1lLCBhcmcsIGRlZiwgdGVybURlZjtcbiAgZm9yICh2YXIgaSA9IDAsIGogPSBhdHRycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICBhdHRyID0gYXR0cnNbaV07XG4gICAgbmFtZSA9IGF0dHIubmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcbiAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuICAgICAgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdkaXJlY3RpdmVzJywgbWF0Y2hlZFsxXSk7XG4gICAgICBpZiAoZGVmICYmIGRlZi50ZXJtaW5hbCkge1xuICAgICAgICBpZiAoIXRlcm1EZWYgfHwgKGRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1RFUk1JTkFMX1BSSU9SSVRZKSA+IHRlcm1EZWYucHJpb3JpdHkpIHtcbiAgICAgICAgICB0ZXJtRGVmID0gZGVmO1xuICAgICAgICAgIHJhd05hbWUgPSBhdHRyLm5hbWU7XG4gICAgICAgICAgbW9kaWZpZXJzID0gcGFyc2VNb2RpZmllcnMoYXR0ci5uYW1lKTtcbiAgICAgICAgICB2YWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgICAgICAgZGlyTmFtZSA9IG1hdGNoZWRbMV07XG4gICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmICh0ZXJtRGVmKSB7XG4gICAgcmV0dXJuIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCB0ZXJtRGVmLCByYXdOYW1lLCBhcmcsIG1vZGlmaWVycyk7XG4gIH1cbn1cblxuZnVuY3Rpb24gc2tpcCgpIHt9XG5za2lwLnRlcm1pbmFsID0gdHJ1ZTtcblxuLyoqXG4gKiBCdWlsZCBhIG5vZGUgbGluayBmdW5jdGlvbiBmb3IgYSB0ZXJtaW5hbCBkaXJlY3RpdmUuXG4gKiBBIHRlcm1pbmFsIGxpbmsgZnVuY3Rpb24gdGVybWluYXRlcyB0aGUgY3VycmVudFxuICogY29tcGlsYXRpb24gcmVjdXJzaW9uIGFuZCBoYW5kbGVzIGNvbXBpbGF0aW9uIG9mIHRoZVxuICogc3VidHJlZSBpbiB0aGUgZGlyZWN0aXZlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG4gKiBAcGFyYW0ge1N0cmluZ30gdmFsdWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge09iamVjdH0gZGVmXG4gKiBAcGFyYW0ge1N0cmluZ30gW3Jhd05hbWVdXG4gKiBAcGFyYW0ge1N0cmluZ30gW2FyZ11cbiAqIEBwYXJhbSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuICogQHJldHVybiB7RnVuY3Rpb259IHRlcm1pbmFsTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgZGlyTmFtZSwgdmFsdWUsIG9wdGlvbnMsIGRlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpIHtcbiAgdmFyIHBhcnNlZCA9IHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcbiAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgbmFtZTogZGlyTmFtZSxcbiAgICBhcmc6IGFyZyxcbiAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICBmaWx0ZXJzOiBwYXJzZWQuZmlsdGVycyxcbiAgICByYXc6IHZhbHVlLFxuICAgIGF0dHI6IHJhd05hbWUsXG4gICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG4gICAgZGVmOiBkZWZcbiAgfTtcbiAgLy8gY2hlY2sgcmVmIGZvciB2LWZvciBhbmQgcm91dGVyLXZpZXdcbiAgaWYgKGRpck5hbWUgPT09ICdmb3InIHx8IGRpck5hbWUgPT09ICdyb3V0ZXItdmlldycpIHtcbiAgICBkZXNjcmlwdG9yLnJlZiA9IGZpbmRSZWYoZWwpO1xuICB9XG4gIHZhciBmbiA9IGZ1bmN0aW9uIHRlcm1pbmFsTm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgaWYgKGRlc2NyaXB0b3IucmVmKSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZSgoc2NvcGUgfHwgdm0pLiRyZWZzLCBkZXNjcmlwdG9yLnJlZiwgbnVsbCk7XG4gICAgfVxuICAgIHZtLl9iaW5kRGlyKGRlc2NyaXB0b3IsIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gIH07XG4gIGZuLnRlcm1pbmFsID0gdHJ1ZTtcbiAgcmV0dXJuIGZuO1xufVxuXG4vKipcbiAqIENvbXBpbGUgdGhlIGRpcmVjdGl2ZXMgb24gYW4gZWxlbWVudCBhbmQgcmV0dXJuIGEgbGlua2VyLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl8TmFtZWROb2RlTWFwfSBhdHRyc1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKSB7XG4gIHZhciBpID0gYXR0cnMubGVuZ3RoO1xuICB2YXIgZGlycyA9IFtdO1xuICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIHJhd05hbWUsIHJhd1ZhbHVlLCBkaXJOYW1lLCBhcmcsIG1vZGlmaWVycywgZGlyRGVmLCB0b2tlbnMsIG1hdGNoZWQ7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBhdHRyID0gYXR0cnNbaV07XG4gICAgbmFtZSA9IHJhd05hbWUgPSBhdHRyLm5hbWU7XG4gICAgdmFsdWUgPSByYXdWYWx1ZSA9IGF0dHIudmFsdWU7XG4gICAgdG9rZW5zID0gcGFyc2VUZXh0KHZhbHVlKTtcbiAgICAvLyByZXNldCBhcmdcbiAgICBhcmcgPSBudWxsO1xuICAgIC8vIGNoZWNrIG1vZGlmaWVyc1xuICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKG5hbWUpO1xuICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UobW9kaWZpZXJSRSwgJycpO1xuXG4gICAgLy8gYXR0cmlidXRlIGludGVycG9sYXRpb25zXG4gICAgaWYgKHRva2Vucykge1xuICAgICAgdmFsdWUgPSB0b2tlbnNUb0V4cCh0b2tlbnMpO1xuICAgICAgYXJnID0gbmFtZTtcbiAgICAgIHB1c2hEaXIoJ2JpbmQnLCBkaXJlY3RpdmVzLmJpbmQsIHRva2Vucyk7XG4gICAgICAvLyB3YXJuIGFnYWluc3QgbWl4aW5nIG11c3RhY2hlcyB3aXRoIHYtYmluZFxuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgQXJyYXkucHJvdG90eXBlLnNvbWUuY2FsbChhdHRycywgZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgICAgICByZXR1cm4gYXR0ci5uYW1lID09PSAnOmNsYXNzJyB8fCBhdHRyLm5hbWUgPT09ICd2LWJpbmQ6Y2xhc3MnO1xuICAgICAgICB9KSkge1xuICAgICAgICAgIHdhcm4oJ2NsYXNzPVwiJyArIHJhd1ZhbHVlICsgJ1wiOiBEbyBub3QgbWl4IG11c3RhY2hlIGludGVycG9sYXRpb24gJyArICdhbmQgdi1iaW5kIGZvciBcImNsYXNzXCIgb24gdGhlIHNhbWUgZWxlbWVudC4gVXNlIG9uZSBvciB0aGUgb3RoZXIuJywgb3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2VcblxuICAgICAgLy8gc3BlY2lhbCBhdHRyaWJ1dGU6IHRyYW5zaXRpb25cbiAgICAgIGlmICh0cmFuc2l0aW9uUkUudGVzdChuYW1lKSkge1xuICAgICAgICBtb2RpZmllcnMubGl0ZXJhbCA9ICFiaW5kUkUudGVzdChuYW1lKTtcbiAgICAgICAgcHVzaERpcigndHJhbnNpdGlvbicsIGludGVybmFsRGlyZWN0aXZlcy50cmFuc2l0aW9uKTtcbiAgICAgIH0gZWxzZVxuXG4gICAgICAgIC8vIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgIGlmIChvblJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgICBhcmcgPSBuYW1lLnJlcGxhY2Uob25SRSwgJycpO1xuICAgICAgICAgIHB1c2hEaXIoJ29uJywgZGlyZWN0aXZlcy5vbik7XG4gICAgICAgIH0gZWxzZVxuXG4gICAgICAgICAgLy8gYXR0cmlidXRlIGJpbmRpbmdzXG4gICAgICAgICAgaWYgKGJpbmRSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgICAgICBkaXJOYW1lID0gbmFtZS5yZXBsYWNlKGJpbmRSRSwgJycpO1xuICAgICAgICAgICAgaWYgKGRpck5hbWUgPT09ICdzdHlsZScgfHwgZGlyTmFtZSA9PT0gJ2NsYXNzJykge1xuICAgICAgICAgICAgICBwdXNoRGlyKGRpck5hbWUsIGludGVybmFsRGlyZWN0aXZlc1tkaXJOYW1lXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBhcmcgPSBkaXJOYW1lO1xuICAgICAgICAgICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2VcblxuICAgICAgICAgICAgLy8gbm9ybWFsIGRpcmVjdGl2ZXNcbiAgICAgICAgICAgIGlmIChtYXRjaGVkID0gbmFtZS5tYXRjaChkaXJBdHRyUkUpKSB7XG4gICAgICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuICAgICAgICAgICAgICBhcmcgPSBtYXRjaGVkWzJdO1xuXG4gICAgICAgICAgICAgIC8vIHNraXAgdi1lbHNlICh3aGVuIHVzZWQgd2l0aCB2LXNob3cpXG4gICAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnZWxzZScpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIGRpckRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIGRpck5hbWUsIHRydWUpO1xuICAgICAgICAgICAgICBpZiAoZGlyRGVmKSB7XG4gICAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBkaXJEZWYpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHVzaCBhIGRpcmVjdGl2ZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGRpck5hbWVcbiAgICogQHBhcmFtIHtPYmplY3R8RnVuY3Rpb259IGRlZlxuICAgKiBAcGFyYW0ge0FycmF5fSBbaW50ZXJwVG9rZW5zXVxuICAgKi9cblxuICBmdW5jdGlvbiBwdXNoRGlyKGRpck5hbWUsIGRlZiwgaW50ZXJwVG9rZW5zKSB7XG4gICAgdmFyIGhhc09uZVRpbWVUb2tlbiA9IGludGVycFRva2VucyAmJiBoYXNPbmVUaW1lKGludGVycFRva2Vucyk7XG4gICAgdmFyIHBhcnNlZCA9ICFoYXNPbmVUaW1lVG9rZW4gJiYgcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuICAgIGRpcnMucHVzaCh7XG4gICAgICBuYW1lOiBkaXJOYW1lLFxuICAgICAgYXR0cjogcmF3TmFtZSxcbiAgICAgIHJhdzogcmF3VmFsdWUsXG4gICAgICBkZWY6IGRlZixcbiAgICAgIGFyZzogYXJnLFxuICAgICAgbW9kaWZpZXJzOiBtb2RpZmllcnMsXG4gICAgICAvLyBjb252ZXJzaW9uIGZyb20gaW50ZXJwb2xhdGlvbiBzdHJpbmdzIHdpdGggb25lLXRpbWUgdG9rZW5cbiAgICAgIC8vIHRvIGV4cHJlc3Npb24gaXMgZGlmZmVyZWQgdW50aWwgZGlyZWN0aXZlIGJpbmQgdGltZSBzbyB0aGF0IHdlXG4gICAgICAvLyBoYXZlIGFjY2VzcyB0byB0aGUgYWN0dWFsIHZtIGNvbnRleHQgZm9yIG9uZS10aW1lIGJpbmRpbmdzLlxuICAgICAgZXhwcmVzc2lvbjogcGFyc2VkICYmIHBhcnNlZC5leHByZXNzaW9uLFxuICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuICAgICAgaW50ZXJwOiBpbnRlcnBUb2tlbnMsXG4gICAgICBoYXNPbmVUaW1lOiBoYXNPbmVUaW1lVG9rZW5cbiAgICB9KTtcbiAgfVxuXG4gIGlmIChkaXJzLmxlbmd0aCkge1xuICAgIHJldHVybiBtYWtlTm9kZUxpbmtGbihkaXJzKTtcbiAgfVxufVxuXG4vKipcbiAqIFBhcnNlIG1vZGlmaWVycyBmcm9tIGRpcmVjdGl2ZSBhdHRyaWJ1dGUgbmFtZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlTW9kaWZpZXJzKG5hbWUpIHtcbiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHZhciBtYXRjaCA9IG5hbWUubWF0Y2gobW9kaWZpZXJSRSk7XG4gIGlmIChtYXRjaCkge1xuICAgIHZhciBpID0gbWF0Y2gubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHJlc1ttYXRjaFtpXS5zbGljZSgxKV0gPSB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEJ1aWxkIGEgbGluayBmdW5jdGlvbiBmb3IgYWxsIGRpcmVjdGl2ZXMgb24gYSBzaW5nbGUgbm9kZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJlY3RpdmVzXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gZGlyZWN0aXZlc0xpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VOb2RlTGlua0ZuKGRpcmVjdGl2ZXMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIG5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIC8vIHJldmVyc2UgYXBwbHkgYmVjYXVzZSBpdCdzIHNvcnRlZCBsb3cgdG8gaGlnaFxuICAgIHZhciBpID0gZGlyZWN0aXZlcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdm0uX2JpbmREaXIoZGlyZWN0aXZlc1tpXSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gaW50ZXJwb2xhdGlvbiBzdHJpbmcgY29udGFpbnMgb25lLXRpbWUgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNPbmVUaW1lKHRva2Vucykge1xuICB2YXIgaSA9IHRva2Vucy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAodG9rZW5zW2ldLm9uZVRpbWUpIHJldHVybiB0cnVlO1xuICB9XG59XG5cbmZ1bmN0aW9uIGlzU2NyaXB0KGVsKSB7XG4gIHJldHVybiBlbC50YWdOYW1lID09PSAnU0NSSVBUJyAmJiAoIWVsLmhhc0F0dHJpYnV0ZSgndHlwZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndHlwZScpID09PSAndGV4dC9qYXZhc2NyaXB0Jyk7XG59XG5cbnZhciBzcGVjaWFsQ2hhclJFID0gL1teXFx3XFwtOlxcLl0vO1xuXG4vKipcbiAqIFByb2Nlc3MgYW4gZWxlbWVudCBvciBhIERvY3VtZW50RnJhZ21lbnQgYmFzZWQgb24gYVxuICogaW5zdGFuY2Ugb3B0aW9uIG9iamVjdC4gVGhpcyBhbGxvd3MgdXMgdG8gdHJhbnNjbHVkZVxuICogYSB0ZW1wbGF0ZSBub2RlL2ZyYWdtZW50IGJlZm9yZSB0aGUgaW5zdGFuY2UgaXMgY3JlYXRlZCxcbiAqIHNvIHRoZSBwcm9jZXNzZWQgZnJhZ21lbnQgY2FuIHRoZW4gYmUgY2xvbmVkIGFuZCByZXVzZWRcbiAqIGluIHYtZm9yLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gdHJhbnNjbHVkZShlbCwgb3B0aW9ucykge1xuICAvLyBleHRyYWN0IGNvbnRhaW5lciBhdHRyaWJ1dGVzIHRvIHBhc3MgdGhlbSBkb3duXG4gIC8vIHRvIGNvbXBpbGVyLCBiZWNhdXNlIHRoZXkgbmVlZCB0byBiZSBjb21waWxlZCBpblxuICAvLyBwYXJlbnQgc2NvcGUuIHdlIGFyZSBtdXRhdGluZyB0aGUgb3B0aW9ucyBvYmplY3QgaGVyZVxuICAvLyBhc3N1bWluZyB0aGUgc2FtZSBvYmplY3Qgd2lsbCBiZSB1c2VkIGZvciBjb21waWxlXG4gIC8vIHJpZ2h0IGFmdGVyIHRoaXMuXG4gIGlmIChvcHRpb25zKSB7XG4gICAgb3B0aW9ucy5fY29udGFpbmVyQXR0cnMgPSBleHRyYWN0QXR0cnMoZWwpO1xuICB9XG4gIC8vIGZvciB0ZW1wbGF0ZSB0YWdzLCB3aGF0IHdlIHdhbnQgaXMgaXRzIGNvbnRlbnQgYXNcbiAgLy8gYSBkb2N1bWVudEZyYWdtZW50IChmb3IgZnJhZ21lbnQgaW5zdGFuY2VzKVxuICBpZiAoaXNUZW1wbGF0ZShlbCkpIHtcbiAgICBlbCA9IHBhcnNlVGVtcGxhdGUoZWwpO1xuICB9XG4gIGlmIChvcHRpb25zKSB7XG4gICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50ICYmICFvcHRpb25zLnRlbXBsYXRlKSB7XG4gICAgICBvcHRpb25zLnRlbXBsYXRlID0gJzxzbG90Pjwvc2xvdD4nO1xuICAgIH1cbiAgICBpZiAob3B0aW9ucy50ZW1wbGF0ZSkge1xuICAgICAgb3B0aW9ucy5fY29udGVudCA9IGV4dHJhY3RDb250ZW50KGVsKTtcbiAgICAgIGVsID0gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKTtcbiAgICB9XG4gIH1cbiAgaWYgKGlzRnJhZ21lbnQoZWwpKSB7XG4gICAgLy8gYW5jaG9ycyBmb3IgZnJhZ21lbnQgaW5zdGFuY2VcbiAgICAvLyBwYXNzaW5nIGluIGBwZXJzaXN0OiB0cnVlYCB0byBhdm9pZCB0aGVtIGJlaW5nXG4gICAgLy8gZGlzY2FyZGVkIGJ5IElFIGR1cmluZyB0ZW1wbGF0ZSBjbG9uaW5nXG4gICAgcHJlcGVuZChjcmVhdGVBbmNob3IoJ3Ytc3RhcnQnLCB0cnVlKSwgZWwpO1xuICAgIGVsLmFwcGVuZENoaWxkKGNyZWF0ZUFuY2hvcigndi1lbmQnLCB0cnVlKSk7XG4gIH1cbiAgcmV0dXJuIGVsO1xufVxuXG4vKipcbiAqIFByb2Nlc3MgdGhlIHRlbXBsYXRlIG9wdGlvbi5cbiAqIElmIHRoZSByZXBsYWNlIG9wdGlvbiBpcyB0cnVlIHRoaXMgd2lsbCBzd2FwIHRoZSAkZWwuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiB0cmFuc2NsdWRlVGVtcGxhdGUoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRlbXBsYXRlID0gb3B0aW9ucy50ZW1wbGF0ZTtcbiAgdmFyIGZyYWcgPSBwYXJzZVRlbXBsYXRlKHRlbXBsYXRlLCB0cnVlKTtcbiAgaWYgKGZyYWcpIHtcbiAgICB2YXIgcmVwbGFjZXIgPSBmcmFnLmZpcnN0Q2hpbGQ7XG4gICAgdmFyIHRhZyA9IHJlcGxhY2VyLnRhZ05hbWUgJiYgcmVwbGFjZXIudGFnTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGVsID09PSBkb2N1bWVudC5ib2R5KSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignWW91IGFyZSBtb3VudGluZyBhbiBpbnN0YW5jZSB3aXRoIGEgdGVtcGxhdGUgdG8gJyArICc8Ym9keT4uIFRoaXMgd2lsbCByZXBsYWNlIDxib2R5PiBlbnRpcmVseS4gWW91ICcgKyAnc2hvdWxkIHByb2JhYmx5IHVzZSBgcmVwbGFjZTogZmFsc2VgIGhlcmUuJyk7XG4gICAgICB9XG4gICAgICAvLyB0aGVyZSBhcmUgbWFueSBjYXNlcyB3aGVyZSB0aGUgaW5zdGFuY2UgbXVzdFxuICAgICAgLy8gYmVjb21lIGEgZnJhZ21lbnQgaW5zdGFuY2U6IGJhc2ljYWxseSBhbnl0aGluZyB0aGF0XG4gICAgICAvLyBjYW4gY3JlYXRlIG1vcmUgdGhhbiAxIHJvb3Qgbm9kZXMuXG4gICAgICBpZiAoXG4gICAgICAvLyBtdWx0aS1jaGlsZHJlbiB0ZW1wbGF0ZVxuICAgICAgZnJhZy5jaGlsZE5vZGVzLmxlbmd0aCA+IDEgfHxcbiAgICAgIC8vIG5vbi1lbGVtZW50IHRlbXBsYXRlXG4gICAgICByZXBsYWNlci5ub2RlVHlwZSAhPT0gMSB8fFxuICAgICAgLy8gc2luZ2xlIG5lc3RlZCBjb21wb25lbnRcbiAgICAgIHRhZyA9PT0gJ2NvbXBvbmVudCcgfHwgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSB8fCBoYXNCaW5kQXR0cihyZXBsYWNlciwgJ2lzJykgfHxcbiAgICAgIC8vIGVsZW1lbnQgZGlyZWN0aXZlXG4gICAgICByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2VsZW1lbnREaXJlY3RpdmVzJywgdGFnKSB8fFxuICAgICAgLy8gZm9yIGJsb2NrXG4gICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtZm9yJykgfHxcbiAgICAgIC8vIGlmIGJsb2NrXG4gICAgICByZXBsYWNlci5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgICByZXR1cm4gZnJhZztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9wdGlvbnMuX3JlcGxhY2VyQXR0cnMgPSBleHRyYWN0QXR0cnMocmVwbGFjZXIpO1xuICAgICAgICBtZXJnZUF0dHJzKGVsLCByZXBsYWNlcik7XG4gICAgICAgIHJldHVybiByZXBsYWNlcjtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgZWwuYXBwZW5kQ2hpbGQoZnJhZyk7XG4gICAgICByZXR1cm4gZWw7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCB0ZW1wbGF0ZSBvcHRpb246ICcgKyB0ZW1wbGF0ZSk7XG4gIH1cbn1cblxuLyoqXG4gKiBIZWxwZXIgdG8gZXh0cmFjdCBhIGNvbXBvbmVudCBjb250YWluZXIncyBhdHRyaWJ1dGVzXG4gKiBpbnRvIGEgcGxhaW4gb2JqZWN0IGFycmF5LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0FycmF5fVxuICovXG5cbmZ1bmN0aW9uIGV4dHJhY3RBdHRycyhlbCkge1xuICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZWwuaGFzQXR0cmlidXRlcygpKSB7XG4gICAgcmV0dXJuIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG4gIH1cbn1cblxuLyoqXG4gKiBNZXJnZSB0aGUgYXR0cmlidXRlcyBvZiB0d28gZWxlbWVudHMsIGFuZCBtYWtlIHN1cmVcbiAqIHRoZSBjbGFzcyBuYW1lcyBhcmUgbWVyZ2VkIHByb3Blcmx5LlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZnJvbVxuICogQHBhcmFtIHtFbGVtZW50fSB0b1xuICovXG5cbmZ1bmN0aW9uIG1lcmdlQXR0cnMoZnJvbSwgdG8pIHtcbiAgdmFyIGF0dHJzID0gZnJvbS5hdHRyaWJ1dGVzO1xuICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcbiAgdmFyIG5hbWUsIHZhbHVlO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG4gICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcbiAgICBpZiAoIXRvLmhhc0F0dHJpYnV0ZShuYW1lKSAmJiAhc3BlY2lhbENoYXJSRS50ZXN0KG5hbWUpKSB7XG4gICAgICB0by5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgIH0gZWxzZSBpZiAobmFtZSA9PT0gJ2NsYXNzJyAmJiAhcGFyc2VUZXh0KHZhbHVlKSAmJiAodmFsdWUgPSB2YWx1ZS50cmltKCkpKSB7XG4gICAgICB2YWx1ZS5zcGxpdCgvXFxzKy8pLmZvckVhY2goZnVuY3Rpb24gKGNscykge1xuICAgICAgICBhZGRDbGFzcyh0bywgY2xzKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFNjYW4gYW5kIGRldGVybWluZSBzbG90IGNvbnRlbnQgZGlzdHJpYnV0aW9uLlxuICogV2UgZG8gdGhpcyBkdXJpbmcgdHJhbnNjbHVzaW9uIGluc3RlYWQgYXQgY29tcGlsZSB0aW1lIHNvIHRoYXRcbiAqIHRoZSBkaXN0cmlidXRpb24gaXMgZGVjb3VwbGVkIGZyb20gdGhlIGNvbXBpbGF0aW9uIG9yZGVyIG9mXG4gKiB0aGUgc2xvdHMuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IHRlbXBsYXRlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRlbnRcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5cbmZ1bmN0aW9uIHJlc29sdmVTbG90cyh2bSwgY29udGVudCkge1xuICBpZiAoIWNvbnRlbnQpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIGNvbnRlbnRzID0gdm0uX3Nsb3RDb250ZW50cyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHZhciBlbCwgbmFtZTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBjb250ZW50LmNoaWxkcmVuLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGVsID0gY29udGVudC5jaGlsZHJlbltpXTtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGlmIChuYW1lID0gZWwuZ2V0QXR0cmlidXRlKCdzbG90JykpIHtcbiAgICAgIChjb250ZW50c1tuYW1lXSB8fCAoY29udGVudHNbbmFtZV0gPSBbXSkpLnB1c2goZWwpO1xuICAgIH1cbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgZ2V0QmluZEF0dHIoZWwsICdzbG90JykpIHtcbiAgICAgIHdhcm4oJ1RoZSBcInNsb3RcIiBhdHRyaWJ1dGUgbXVzdCBiZSBzdGF0aWMuJywgdm0uJHBhcmVudCk7XG4gICAgfVxuICB9XG4gIGZvciAobmFtZSBpbiBjb250ZW50cykge1xuICAgIGNvbnRlbnRzW25hbWVdID0gZXh0cmFjdEZyYWdtZW50KGNvbnRlbnRzW25hbWVdLCBjb250ZW50KTtcbiAgfVxuICBpZiAoY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICB2YXIgbm9kZXMgPSBjb250ZW50LmNoaWxkTm9kZXM7XG4gICAgaWYgKG5vZGVzLmxlbmd0aCA9PT0gMSAmJiBub2Rlc1swXS5ub2RlVHlwZSA9PT0gMyAmJiAhbm9kZXNbMF0uZGF0YS50cmltKCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29udGVudHNbJ2RlZmF1bHQnXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50LmNoaWxkTm9kZXMsIGNvbnRlbnQpO1xuICB9XG59XG5cbi8qKlxuICogRXh0cmFjdCBxdWFsaWZpZWQgY29udGVudCBub2RlcyBmcm9tIGEgbm9kZSBsaXN0LlxuICpcbiAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVzXG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIGV4dHJhY3RGcmFnbWVudChub2RlcywgcGFyZW50KSB7XG4gIHZhciBmcmFnID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuICBub2RlcyA9IHRvQXJyYXkobm9kZXMpO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IG5vZGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHZhciBub2RlID0gbm9kZXNbaV07XG4gICAgaWYgKGlzVGVtcGxhdGUobm9kZSkgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWlmJykgJiYgIW5vZGUuaGFzQXR0cmlidXRlKCd2LWZvcicpKSB7XG4gICAgICBwYXJlbnQucmVtb3ZlQ2hpbGQobm9kZSk7XG4gICAgICBub2RlID0gcGFyc2VUZW1wbGF0ZShub2RlLCB0cnVlKTtcbiAgICB9XG4gICAgZnJhZy5hcHBlbmRDaGlsZChub2RlKTtcbiAgfVxuICByZXR1cm4gZnJhZztcbn1cblxuXG5cbnZhciBjb21waWxlciA9IE9iamVjdC5mcmVlemUoe1xuXHRjb21waWxlOiBjb21waWxlLFxuXHRjb21waWxlQW5kTGlua1Byb3BzOiBjb21waWxlQW5kTGlua1Byb3BzLFxuXHRjb21waWxlUm9vdDogY29tcGlsZVJvb3QsXG5cdHRyYW5zY2x1ZGU6IHRyYW5zY2x1ZGUsXG5cdHJlc29sdmVTbG90czogcmVzb2x2ZVNsb3RzXG59KTtcblxuZnVuY3Rpb24gc3RhdGVNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBBY2Nlc3NvciBmb3IgYCRkYXRhYCBwcm9wZXJ0eSwgc2luY2Ugc2V0dGluZyAkZGF0YVxuICAgKiByZXF1aXJlcyBvYnNlcnZpbmcgdGhlIG5ldyBvYmplY3QgYW5kIHVwZGF0aW5nXG4gICAqIHByb3hpZWQgcHJvcGVydGllcy5cbiAgICovXG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KFZ1ZS5wcm90b3R5cGUsICckZGF0YScsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcbiAgICAgIHJldHVybiB0aGlzLl9kYXRhO1xuICAgIH0sXG4gICAgc2V0OiBmdW5jdGlvbiBzZXQobmV3RGF0YSkge1xuICAgICAgaWYgKG5ld0RhdGEgIT09IHRoaXMuX2RhdGEpIHtcbiAgICAgICAgdGhpcy5fc2V0RGF0YShuZXdEYXRhKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgc2NvcGUgb2YgYW4gaW5zdGFuY2UsIHdoaWNoIGNvbnRhaW5zOlxuICAgKiAtIG9ic2VydmVkIGRhdGFcbiAgICogLSBjb21wdXRlZCBwcm9wZXJ0aWVzXG4gICAqIC0gdXNlciBtZXRob2RzXG4gICAqIC0gbWV0YSBwcm9wZXJ0aWVzXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRTdGF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLl9pbml0UHJvcHMoKTtcbiAgICB0aGlzLl9pbml0TWV0YSgpO1xuICAgIHRoaXMuX2luaXRNZXRob2RzKCk7XG4gICAgdGhpcy5faW5pdERhdGEoKTtcbiAgICB0aGlzLl9pbml0Q29tcHV0ZWQoKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBwcm9wcy5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdFByb3BzID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcbiAgICB2YXIgZWwgPSBvcHRpb25zLmVsO1xuICAgIHZhciBwcm9wcyA9IG9wdGlvbnMucHJvcHM7XG4gICAgaWYgKHByb3BzICYmICFlbCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdQcm9wcyB3aWxsIG5vdCBiZSBjb21waWxlZCBpZiBubyBgZWxgIG9wdGlvbiBpcyAnICsgJ3Byb3ZpZGVkIGF0IGluc3RhbnRpYXRpb24uJywgdGhpcyk7XG4gICAgfVxuICAgIC8vIG1ha2Ugc3VyZSB0byBjb252ZXJ0IHN0cmluZyBzZWxlY3RvcnMgaW50byBlbGVtZW50IG5vd1xuICAgIGVsID0gb3B0aW9ucy5lbCA9IHF1ZXJ5KGVsKTtcbiAgICB0aGlzLl9wcm9wc1VubGlua0ZuID0gZWwgJiYgZWwubm9kZVR5cGUgPT09IDEgJiYgcHJvcHNcbiAgICAvLyBwcm9wcyBtdXN0IGJlIGxpbmtlZCBpbiBwcm9wZXIgc2NvcGUgaWYgaW5zaWRlIHYtZm9yXG4gICAgPyBjb21waWxlQW5kTGlua1Byb3BzKHRoaXMsIGVsLCBwcm9wcywgdGhpcy5fc2NvcGUpIDogbnVsbDtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSB0aGUgZGF0YS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdERhdGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGRhdGFGbiA9IHRoaXMuJG9wdGlvbnMuZGF0YTtcbiAgICB2YXIgZGF0YSA9IHRoaXMuX2RhdGEgPSBkYXRhRm4gPyBkYXRhRm4oKSA6IHt9O1xuICAgIGlmICghaXNQbGFpbk9iamVjdChkYXRhKSkge1xuICAgICAgZGF0YSA9IHt9O1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdkYXRhIGZ1bmN0aW9ucyBzaG91bGQgcmV0dXJuIGFuIG9iamVjdC4nLCB0aGlzKTtcbiAgICB9XG4gICAgdmFyIHByb3BzID0gdGhpcy5fcHJvcHM7XG4gICAgLy8gcHJveHkgZGF0YSBvbiBpbnN0YW5jZVxuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXMoZGF0YSk7XG4gICAgdmFyIGksIGtleTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIC8vIHRoZXJlIGFyZSB0d28gc2NlbmFyaW9zIHdoZXJlIHdlIGNhbiBwcm94eSBhIGRhdGEga2V5OlxuICAgICAgLy8gMS4gaXQncyBub3QgYWxyZWFkeSBkZWZpbmVkIGFzIGEgcHJvcFxuICAgICAgLy8gMi4gaXQncyBwcm92aWRlZCB2aWEgYSBpbnN0YW50aWF0aW9uIG9wdGlvbiBBTkQgdGhlcmUgYXJlIG5vXG4gICAgICAvLyAgICB0ZW1wbGF0ZSBwcm9wIHByZXNlbnRcbiAgICAgIGlmICghcHJvcHMgfHwgIWhhc093bihwcm9wcywga2V5KSkge1xuICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuICAgICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIHdhcm4oJ0RhdGEgZmllbGQgXCInICsga2V5ICsgJ1wiIGlzIGFscmVhZHkgZGVmaW5lZCAnICsgJ2FzIGEgcHJvcC4gVG8gcHJvdmlkZSBkZWZhdWx0IHZhbHVlIGZvciBhIHByb3AsIHVzZSB0aGUgXCJkZWZhdWx0XCIgJyArICdwcm9wIG9wdGlvbjsgaWYgeW91IHdhbnQgdG8gcGFzcyBwcm9wIHZhbHVlcyB0byBhbiBpbnN0YW50aWF0aW9uICcgKyAnY2FsbCwgdXNlIHRoZSBcInByb3BzRGF0YVwiIG9wdGlvbi4nLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gb2JzZXJ2ZSBkYXRhXG4gICAgb2JzZXJ2ZShkYXRhLCB0aGlzKTtcbiAgfTtcblxuICAvKipcbiAgICogU3dhcCB0aGUgaW5zdGFuY2UncyAkZGF0YS4gQ2FsbGVkIGluICRkYXRhJ3Mgc2V0dGVyLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gbmV3RGF0YVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9zZXREYXRhID0gZnVuY3Rpb24gKG5ld0RhdGEpIHtcbiAgICBuZXdEYXRhID0gbmV3RGF0YSB8fCB7fTtcbiAgICB2YXIgb2xkRGF0YSA9IHRoaXMuX2RhdGE7XG4gICAgdGhpcy5fZGF0YSA9IG5ld0RhdGE7XG4gICAgdmFyIGtleXMsIGtleSwgaTtcbiAgICAvLyB1bnByb3h5IGtleXMgbm90IHByZXNlbnQgaW4gbmV3IGRhdGFcbiAgICBrZXlzID0gT2JqZWN0LmtleXMob2xkRGF0YSk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoIShrZXkgaW4gbmV3RGF0YSkpIHtcbiAgICAgICAgdGhpcy5fdW5wcm94eShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBwcm94eSBrZXlzIG5vdCBhbHJlYWR5IHByb3hpZWQsXG4gICAgLy8gYW5kIHRyaWdnZXIgY2hhbmdlIGZvciBjaGFuZ2VkIHZhbHVlc1xuICAgIGtleXMgPSBPYmplY3Qua2V5cyhuZXdEYXRhKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgIGlmICghaGFzT3duKHRoaXMsIGtleSkpIHtcbiAgICAgICAgLy8gbmV3IHByb3BlcnR5XG4gICAgICAgIHRoaXMuX3Byb3h5KGtleSk7XG4gICAgICB9XG4gICAgfVxuICAgIG9sZERhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuICAgIG9ic2VydmUobmV3RGF0YSwgdGhpcyk7XG4gICAgdGhpcy5fZGlnZXN0KCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByb3h5IGEgcHJvcGVydHksIHNvIHRoYXRcbiAgICogdm0ucHJvcCA9PT0gdm0uX2RhdGEucHJvcFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3Byb3h5ID0gZnVuY3Rpb24gKGtleSkge1xuICAgIGlmICghaXNSZXNlcnZlZChrZXkpKSB7XG4gICAgICAvLyBuZWVkIHRvIHN0b3JlIHJlZiB0byBzZWxmIGhlcmVcbiAgICAgIC8vIGJlY2F1c2UgdGhlc2UgZ2V0dGVyL3NldHRlcnMgbWlnaHRcbiAgICAgIC8vIGJlIGNhbGxlZCBieSBjaGlsZCBzY29wZXMgdmlhXG4gICAgICAvLyBwcm90b3R5cGUgaW5oZXJpdGFuY2UuXG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc2VsZiwga2V5LCB7XG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBwcm94eUdldHRlcigpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZi5fZGF0YVtrZXldO1xuICAgICAgICB9LFxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIHByb3h5U2V0dGVyKHZhbCkge1xuICAgICAgICAgIHNlbGYuX2RhdGFba2V5XSA9IHZhbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBVbnByb3h5IGEgcHJvcGVydHkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fdW5wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuICAgICAgZGVsZXRlIHRoaXNba2V5XTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEZvcmNlIHVwZGF0ZSBvbiBldmVyeSB3YXRjaGVyIGluIHNjb3BlLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9kaWdlc3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnVwZGF0ZSh0cnVlKTsgLy8gc2hhbGxvdyB1cGRhdGVzXG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBTZXR1cCBjb21wdXRlZCBwcm9wZXJ0aWVzLiBUaGV5IGFyZSBlc3NlbnRpYWxseVxuICAgKiBzcGVjaWFsIGdldHRlci9zZXR0ZXJzXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG5vb3AoKSB7fVxuICBWdWUucHJvdG90eXBlLl9pbml0Q29tcHV0ZWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNvbXB1dGVkID0gdGhpcy4kb3B0aW9ucy5jb21wdXRlZDtcbiAgICBpZiAoY29tcHV0ZWQpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBjb21wdXRlZCkge1xuICAgICAgICB2YXIgdXNlckRlZiA9IGNvbXB1dGVkW2tleV07XG4gICAgICAgIHZhciBkZWYgPSB7XG4gICAgICAgICAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgICAgICAgICBjb25maWd1cmFibGU6IHRydWVcbiAgICAgICAgfTtcbiAgICAgICAgaWYgKHR5cGVvZiB1c2VyRGVmID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgZGVmLmdldCA9IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLCB0aGlzKTtcbiAgICAgICAgICBkZWYuc2V0ID0gbm9vcDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkZWYuZ2V0ID0gdXNlckRlZi5nZXQgPyB1c2VyRGVmLmNhY2hlICE9PSBmYWxzZSA/IG1ha2VDb21wdXRlZEdldHRlcih1c2VyRGVmLmdldCwgdGhpcykgOiBiaW5kKHVzZXJEZWYuZ2V0LCB0aGlzKSA6IG5vb3A7XG4gICAgICAgICAgZGVmLnNldCA9IHVzZXJEZWYuc2V0ID8gYmluZCh1c2VyRGVmLnNldCwgdGhpcykgOiBub29wO1xuICAgICAgICB9XG4gICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCBrZXksIGRlZik7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIG1ha2VDb21wdXRlZEdldHRlcihnZXR0ZXIsIG93bmVyKSB7XG4gICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcihvd25lciwgZ2V0dGVyLCBudWxsLCB7XG4gICAgICBsYXp5OiB0cnVlXG4gICAgfSk7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIGNvbXB1dGVkR2V0dGVyKCkge1xuICAgICAgaWYgKHdhdGNoZXIuZGlydHkpIHtcbiAgICAgICAgd2F0Y2hlci5ldmFsdWF0ZSgpO1xuICAgICAgfVxuICAgICAgaWYgKERlcC50YXJnZXQpIHtcbiAgICAgICAgd2F0Y2hlci5kZXBlbmQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB3YXRjaGVyLnZhbHVlO1xuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogU2V0dXAgaW5zdGFuY2UgbWV0aG9kcy4gTWV0aG9kcyBtdXN0IGJlIGJvdW5kIHRvIHRoZVxuICAgKiBpbnN0YW5jZSBzaW5jZSB0aGV5IG1pZ2h0IGJlIHBhc3NlZCBkb3duIGFzIGEgcHJvcCB0b1xuICAgKiBjaGlsZCBjb21wb25lbnRzLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0TWV0aG9kcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWV0aG9kcyA9IHRoaXMuJG9wdGlvbnMubWV0aG9kcztcbiAgICBpZiAobWV0aG9kcykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG1ldGhvZHMpIHtcbiAgICAgICAgdGhpc1trZXldID0gYmluZChtZXRob2RzW2tleV0sIHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBtZXRhIGluZm9ybWF0aW9uIGxpa2UgJGluZGV4LCAka2V5ICYgJHZhbHVlLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0TWV0YSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWV0YXMgPSB0aGlzLiRvcHRpb25zLl9tZXRhO1xuICAgIGlmIChtZXRhcykge1xuICAgICAgZm9yICh2YXIga2V5IGluIG1ldGFzKSB7XG4gICAgICAgIGRlZmluZVJlYWN0aXZlKHRoaXMsIGtleSwgbWV0YXNba2V5XSk7XG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG52YXIgZXZlbnRSRSA9IC9edi1vbjp8XkAvO1xuXG5mdW5jdGlvbiBldmVudHNNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBTZXR1cCB0aGUgaW5zdGFuY2UncyBvcHRpb24gZXZlbnRzICYgd2F0Y2hlcnMuXG4gICAqIElmIHRoZSB2YWx1ZSBpcyBhIHN0cmluZywgd2UgcHVsbCBpdCBmcm9tIHRoZVxuICAgKiBpbnN0YW5jZSdzIG1ldGhvZHMgYnkgbmFtZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdEV2ZW50cyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgaWYgKG9wdGlvbnMuX2FzQ29tcG9uZW50KSB7XG4gICAgICByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh0aGlzLCBvcHRpb25zLmVsKTtcbiAgICB9XG4gICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyRvbicsIG9wdGlvbnMuZXZlbnRzKTtcbiAgICByZWdpc3RlckNhbGxiYWNrcyh0aGlzLCAnJHdhdGNoJywgb3B0aW9ucy53YXRjaCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIHYtb24gZXZlbnRzIG9uIGEgY2hpbGQgY29tcG9uZW50XG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyQ29tcG9uZW50RXZlbnRzKHZtLCBlbCkge1xuICAgIHZhciBhdHRycyA9IGVsLmF0dHJpYnV0ZXM7XG4gICAgdmFyIG5hbWUsIHZhbHVlLCBoYW5kbGVyO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gYXR0cnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBuYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICAgIGlmIChldmVudFJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZShldmVudFJFLCAnJyk7XG4gICAgICAgIC8vIGZvcmNlIHRoZSBleHByZXNzaW9uIGludG8gYSBzdGF0ZW1lbnQgc28gdGhhdFxuICAgICAgICAvLyBpdCBhbHdheXMgZHluYW1pY2FsbHkgcmVzb2x2ZXMgdGhlIG1ldGhvZCB0byBjYWxsICgjMjY3MClcbiAgICAgICAgLy8ga2luZGEgdWdseSBoYWNrLCBidXQgZG9lcyB0aGUgam9iLlxuICAgICAgICB2YWx1ZSA9IGF0dHJzW2ldLnZhbHVlO1xuICAgICAgICBpZiAoaXNTaW1wbGVQYXRoKHZhbHVlKSkge1xuICAgICAgICAgIHZhbHVlICs9ICcuYXBwbHkodGhpcywgJGFyZ3VtZW50cyknO1xuICAgICAgICB9XG4gICAgICAgIGhhbmRsZXIgPSAodm0uX3Njb3BlIHx8IHZtLl9jb250ZXh0KS4kZXZhbCh2YWx1ZSwgdHJ1ZSk7XG4gICAgICAgIGhhbmRsZXIuX2Zyb21QYXJlbnQgPSB0cnVlO1xuICAgICAgICB2bS4kb24obmFtZS5yZXBsYWNlKGV2ZW50UkUpLCBoYW5kbGVyKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVnaXN0ZXIgY2FsbGJhY2tzIGZvciBvcHRpb24gZXZlbnRzIGFuZCB3YXRjaGVycy5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cbiAgICogQHBhcmFtIHtPYmplY3R9IGhhc2hcbiAgICovXG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXJDYWxsYmFja3Modm0sIGFjdGlvbiwgaGFzaCkge1xuICAgIGlmICghaGFzaCkgcmV0dXJuO1xuICAgIHZhciBoYW5kbGVycywga2V5LCBpLCBqO1xuICAgIGZvciAoa2V5IGluIGhhc2gpIHtcbiAgICAgIGhhbmRsZXJzID0gaGFzaFtrZXldO1xuICAgICAgaWYgKGlzQXJyYXkoaGFuZGxlcnMpKSB7XG4gICAgICAgIGZvciAoaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXJzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVycyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhlbHBlciB0byByZWdpc3RlciBhbiBldmVudC93YXRjaCBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBhY3Rpb25cbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufFN0cmluZ3xPYmplY3R9IGhhbmRsZXJcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKi9cblxuICBmdW5jdGlvbiByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIsIG9wdGlvbnMpIHtcbiAgICB2YXIgdHlwZSA9IHR5cGVvZiBoYW5kbGVyO1xuICAgIGlmICh0eXBlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICB2bVthY3Rpb25dKGtleSwgaGFuZGxlciwgb3B0aW9ucyk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgdmFyIG1ldGhvZHMgPSB2bS4kb3B0aW9ucy5tZXRob2RzO1xuICAgICAgdmFyIG1ldGhvZCA9IG1ldGhvZHMgJiYgbWV0aG9kc1toYW5kbGVyXTtcbiAgICAgIGlmIChtZXRob2QpIHtcbiAgICAgICAgdm1bYWN0aW9uXShrZXksIG1ldGhvZCwgb3B0aW9ucyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1Vua25vd24gbWV0aG9kOiBcIicgKyBoYW5kbGVyICsgJ1wiIHdoZW4gJyArICdyZWdpc3RlcmluZyBjYWxsYmFjayBmb3IgJyArIGFjdGlvbiArICc6IFwiJyArIGtleSArICdcIi4nLCB2bSk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChoYW5kbGVyICYmIHR5cGUgPT09ICdvYmplY3QnKSB7XG4gICAgICByZWdpc3Rlcih2bSwgYWN0aW9uLCBrZXksIGhhbmRsZXIuaGFuZGxlciwgaGFuZGxlcik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIHJlY3Vyc2l2ZSBhdHRhY2hlZC9kZXRhY2hlZCBjYWxsc1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0RE9NSG9va3MgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy4kb24oJ2hvb2s6YXR0YWNoZWQnLCBvbkF0dGFjaGVkKTtcbiAgICB0aGlzLiRvbignaG9vazpkZXRhY2hlZCcsIG9uRGV0YWNoZWQpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGF0dGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cbiAgICovXG5cbiAgZnVuY3Rpb24gb25BdHRhY2hlZCgpIHtcbiAgICBpZiAoIXRoaXMuX2lzQXR0YWNoZWQpIHtcbiAgICAgIHRoaXMuX2lzQXR0YWNoZWQgPSB0cnVlO1xuICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsQXR0YWNoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0b3IgdG8gY2FsbCBhdHRhY2hlZCBob29rXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICAgKi9cblxuICBmdW5jdGlvbiBjYWxsQXR0YWNoKGNoaWxkKSB7XG4gICAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgICBjaGlsZC5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENhbGxiYWNrIHRvIHJlY3Vyc2l2ZWx5IGNhbGwgZGV0YWNoZWQgaG9vayBvbiBjaGlsZHJlblxuICAgKi9cblxuICBmdW5jdGlvbiBvbkRldGFjaGVkKCkge1xuICAgIGlmICh0aGlzLl9pc0F0dGFjaGVkKSB7XG4gICAgICB0aGlzLl9pc0F0dGFjaGVkID0gZmFsc2U7XG4gICAgICB0aGlzLiRjaGlsZHJlbi5mb3JFYWNoKGNhbGxEZXRhY2gpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBJdGVyYXRvciB0byBjYWxsIGRldGFjaGVkIGhvb2tcbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNhbGxEZXRhY2goY2hpbGQpIHtcbiAgICBpZiAoY2hpbGQuX2lzQXR0YWNoZWQgJiYgIWluRG9jKGNoaWxkLiRlbCkpIHtcbiAgICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVHJpZ2dlciBhbGwgaGFuZGxlcnMgZm9yIGEgaG9va1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gaG9va1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG4gICAgdGhpcy4kZW1pdCgncHJlLWhvb2s6JyArIGhvb2spO1xuICAgIHZhciBoYW5kbGVycyA9IHRoaXMuJG9wdGlvbnNbaG9va107XG4gICAgaWYgKGhhbmRsZXJzKSB7XG4gICAgICBmb3IgKHZhciBpID0gMCwgaiA9IGhhbmRsZXJzLmxlbmd0aDsgaSA8IGo7IGkrKykge1xuICAgICAgICBoYW5kbGVyc1tpXS5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLiRlbWl0KCdob29rOicgKyBob29rKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gbm9vcCQxKCkge31cblxuLyoqXG4gKiBBIGRpcmVjdGl2ZSBsaW5rcyBhIERPTSBlbGVtZW50IHdpdGggYSBwaWVjZSBvZiBkYXRhLFxuICogd2hpY2ggaXMgdGhlIHJlc3VsdCBvZiBldmFsdWF0aW5nIGFuIGV4cHJlc3Npb24uXG4gKiBJdCByZWdpc3RlcnMgYSB3YXRjaGVyIHdpdGggdGhlIGV4cHJlc3Npb24gYW5kIGNhbGxzXG4gKiB0aGUgRE9NIHVwZGF0ZSBmdW5jdGlvbiB3aGVuIGEgY2hhbmdlIGlzIHRyaWdnZXJlZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvclxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gbmFtZVxuICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gZGVmXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBleHByZXNzaW9uXG4gKiAgICAgICAgICAgICAgICAgLSB7QXJyYXk8T2JqZWN0Pn0gW2ZpbHRlcnNdXG4gKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbbW9kaWZpZXJzXVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGxpdGVyYWxcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGF0dHJcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IGFyZ1xuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gcmF3XG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBbcmVmXVxuICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtpbnRlcnBdXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2hhc09uZVRpbWVdXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcbiAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdIC0gdi1mb3Igc2NvcGVcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG4gKiBAY29uc3RydWN0b3JcbiAqL1xuZnVuY3Rpb24gRGlyZWN0aXZlKGRlc2NyaXB0b3IsIHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgdGhpcy52bSA9IHZtO1xuICB0aGlzLmVsID0gZWw7XG4gIC8vIGNvcHkgZGVzY3JpcHRvciBwcm9wZXJ0aWVzXG4gIHRoaXMuZGVzY3JpcHRvciA9IGRlc2NyaXB0b3I7XG4gIHRoaXMubmFtZSA9IGRlc2NyaXB0b3IubmFtZTtcbiAgdGhpcy5leHByZXNzaW9uID0gZGVzY3JpcHRvci5leHByZXNzaW9uO1xuICB0aGlzLmFyZyA9IGRlc2NyaXB0b3IuYXJnO1xuICB0aGlzLm1vZGlmaWVycyA9IGRlc2NyaXB0b3IubW9kaWZpZXJzO1xuICB0aGlzLmZpbHRlcnMgPSBkZXNjcmlwdG9yLmZpbHRlcnM7XG4gIHRoaXMubGl0ZXJhbCA9IHRoaXMubW9kaWZpZXJzICYmIHRoaXMubW9kaWZpZXJzLmxpdGVyYWw7XG4gIC8vIHByaXZhdGVcbiAgdGhpcy5fbG9ja2VkID0gZmFsc2U7XG4gIHRoaXMuX2JvdW5kID0gZmFsc2U7XG4gIHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG4gIC8vIGxpbmsgY29udGV4dFxuICB0aGlzLl9ob3N0ID0gaG9zdDtcbiAgdGhpcy5fc2NvcGUgPSBzY29wZTtcbiAgdGhpcy5fZnJhZyA9IGZyYWc7XG4gIC8vIHN0b3JlIGRpcmVjdGl2ZXMgb24gbm9kZSBpbiBkZXYgbW9kZVxuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG4gICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgPSB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcyB8fCBbXTtcbiAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy5wdXNoKHRoaXMpO1xuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgZGlyZWN0aXZlLCBtaXhpbiBkZWZpbml0aW9uIHByb3BlcnRpZXMsXG4gKiBzZXR1cCB0aGUgd2F0Y2hlciwgY2FsbCBkZWZpbml0aW9uIGJpbmQoKSBhbmQgdXBkYXRlKClcbiAqIGlmIHByZXNlbnQuXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fYmluZCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIG5hbWUgPSB0aGlzLm5hbWU7XG4gIHZhciBkZXNjcmlwdG9yID0gdGhpcy5kZXNjcmlwdG9yO1xuXG4gIC8vIHJlbW92ZSBhdHRyaWJ1dGVcbiAgaWYgKChuYW1lICE9PSAnY2xvYWsnIHx8IHRoaXMudm0uX2lzQ29tcGlsZWQpICYmIHRoaXMuZWwgJiYgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUpIHtcbiAgICB2YXIgYXR0ciA9IGRlc2NyaXB0b3IuYXR0ciB8fCAndi0nICsgbmFtZTtcbiAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgfVxuXG4gIC8vIGNvcHkgZGVmIHByb3BlcnRpZXNcbiAgdmFyIGRlZiA9IGRlc2NyaXB0b3IuZGVmO1xuICBpZiAodHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHRoaXMudXBkYXRlID0gZGVmO1xuICB9IGVsc2Uge1xuICAgIGV4dGVuZCh0aGlzLCBkZWYpO1xuICB9XG5cbiAgLy8gc2V0dXAgZGlyZWN0aXZlIHBhcmFtc1xuICB0aGlzLl9zZXR1cFBhcmFtcygpO1xuXG4gIC8vIGluaXRpYWwgYmluZFxuICBpZiAodGhpcy5iaW5kKSB7XG4gICAgdGhpcy5iaW5kKCk7XG4gIH1cbiAgdGhpcy5fYm91bmQgPSB0cnVlO1xuXG4gIGlmICh0aGlzLmxpdGVyYWwpIHtcbiAgICB0aGlzLnVwZGF0ZSAmJiB0aGlzLnVwZGF0ZShkZXNjcmlwdG9yLnJhdyk7XG4gIH0gZWxzZSBpZiAoKHRoaXMuZXhwcmVzc2lvbiB8fCB0aGlzLm1vZGlmaWVycykgJiYgKHRoaXMudXBkYXRlIHx8IHRoaXMudHdvV2F5KSAmJiAhdGhpcy5fY2hlY2tTdGF0ZW1lbnQoKSkge1xuICAgIC8vIHdyYXBwZWQgdXBkYXRlciBmb3IgY29udGV4dFxuICAgIHZhciBkaXIgPSB0aGlzO1xuICAgIGlmICh0aGlzLnVwZGF0ZSkge1xuICAgICAgdGhpcy5fdXBkYXRlID0gZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG4gICAgICAgIGlmICghZGlyLl9sb2NrZWQpIHtcbiAgICAgICAgICBkaXIudXBkYXRlKHZhbCwgb2xkVmFsKTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdXBkYXRlID0gbm9vcCQxO1xuICAgIH1cbiAgICB2YXIgcHJlUHJvY2VzcyA9IHRoaXMuX3ByZVByb2Nlc3MgPyBiaW5kKHRoaXMuX3ByZVByb2Nlc3MsIHRoaXMpIDogbnVsbDtcbiAgICB2YXIgcG9zdFByb2Nlc3MgPSB0aGlzLl9wb3N0UHJvY2VzcyA/IGJpbmQodGhpcy5fcG9zdFByb2Nlc3MsIHRoaXMpIDogbnVsbDtcbiAgICB2YXIgd2F0Y2hlciA9IHRoaXMuX3dhdGNoZXIgPSBuZXcgV2F0Y2hlcih0aGlzLnZtLCB0aGlzLmV4cHJlc3Npb24sIHRoaXMuX3VwZGF0ZSwgLy8gY2FsbGJhY2tcbiAgICB7XG4gICAgICBmaWx0ZXJzOiB0aGlzLmZpbHRlcnMsXG4gICAgICB0d29XYXk6IHRoaXMudHdvV2F5LFxuICAgICAgZGVlcDogdGhpcy5kZWVwLFxuICAgICAgcHJlUHJvY2VzczogcHJlUHJvY2VzcyxcbiAgICAgIHBvc3RQcm9jZXNzOiBwb3N0UHJvY2VzcyxcbiAgICAgIHNjb3BlOiB0aGlzLl9zY29wZVxuICAgIH0pO1xuICAgIC8vIHYtbW9kZWwgd2l0aCBpbml0YWwgaW5saW5lIHZhbHVlIG5lZWQgdG8gc3luYyBiYWNrIHRvXG4gICAgLy8gbW9kZWwgaW5zdGVhZCBvZiB1cGRhdGUgdG8gRE9NIG9uIGluaXQuIFRoZXkgd291bGRcbiAgICAvLyBzZXQgdGhlIGFmdGVyQmluZCBob29rIHRvIGluZGljYXRlIHRoYXQuXG4gICAgaWYgKHRoaXMuYWZ0ZXJCaW5kKSB7XG4gICAgICB0aGlzLmFmdGVyQmluZCgpO1xuICAgIH0gZWxzZSBpZiAodGhpcy51cGRhdGUpIHtcbiAgICAgIHRoaXMudXBkYXRlKHdhdGNoZXIudmFsdWUpO1xuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTZXR1cCBhbGwgcGFyYW0gYXR0cmlidXRlcywgZS5nLiB0cmFjay1ieSxcbiAqIHRyYW5zaXRpb24tbW9kZSwgZXRjLi4uXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbXMgPSBmdW5jdGlvbiAoKSB7XG4gIGlmICghdGhpcy5wYXJhbXMpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIHBhcmFtcyA9IHRoaXMucGFyYW1zO1xuICAvLyBzd2FwIHRoZSBwYXJhbXMgYXJyYXkgd2l0aCBhIGZyZXNoIG9iamVjdC5cbiAgdGhpcy5wYXJhbXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgaSA9IHBhcmFtcy5sZW5ndGg7XG4gIHZhciBrZXksIHZhbCwgbWFwcGVkS2V5O1xuICB3aGlsZSAoaS0tKSB7XG4gICAga2V5ID0gaHlwaGVuYXRlKHBhcmFtc1tpXSk7XG4gICAgbWFwcGVkS2V5ID0gY2FtZWxpemUoa2V5KTtcbiAgICB2YWwgPSBnZXRCaW5kQXR0cih0aGlzLmVsLCBrZXkpO1xuICAgIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgLy8gZHluYW1pY1xuICAgICAgdGhpcy5fc2V0dXBQYXJhbVdhdGNoZXIobWFwcGVkS2V5LCB2YWwpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBzdGF0aWNcbiAgICAgIHZhbCA9IGdldEF0dHIodGhpcy5lbCwga2V5KTtcbiAgICAgIGlmICh2YWwgIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnBhcmFtc1ttYXBwZWRLZXldID0gdmFsID09PSAnJyA/IHRydWUgOiB2YWw7XG4gICAgICB9XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFNldHVwIGEgd2F0Y2hlciBmb3IgYSBkeW5hbWljIHBhcmFtLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHByZXNzaW9uXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fc2V0dXBQYXJhbVdhdGNoZXIgPSBmdW5jdGlvbiAoa2V5LCBleHByZXNzaW9uKSB7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdmFyIGNhbGxlZCA9IGZhbHNlO1xuICB2YXIgdW53YXRjaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kd2F0Y2goZXhwcmVzc2lvbiwgZnVuY3Rpb24gKHZhbCwgb2xkVmFsKSB7XG4gICAgc2VsZi5wYXJhbXNba2V5XSA9IHZhbDtcbiAgICAvLyBzaW5jZSB3ZSBhcmUgaW4gaW1tZWRpYXRlIG1vZGUsXG4gICAgLy8gb25seSBjYWxsIHRoZSBwYXJhbSBjaGFuZ2UgY2FsbGJhY2tzIGlmIHRoaXMgaXMgbm90IHRoZSBmaXJzdCB1cGRhdGUuXG4gICAgaWYgKGNhbGxlZCkge1xuICAgICAgdmFyIGNiID0gc2VsZi5wYXJhbVdhdGNoZXJzICYmIHNlbGYucGFyYW1XYXRjaGVyc1trZXldO1xuICAgICAgaWYgKGNiKSB7XG4gICAgICAgIGNiLmNhbGwoc2VsZiwgdmFsLCBvbGRWYWwpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjYWxsZWQgPSB0cnVlO1xuICAgIH1cbiAgfSwge1xuICAgIGltbWVkaWF0ZTogdHJ1ZSxcbiAgICB1c2VyOiBmYWxzZVxuICB9KTsodGhpcy5fcGFyYW1VbndhdGNoRm5zIHx8ICh0aGlzLl9wYXJhbVVud2F0Y2hGbnMgPSBbXSkpLnB1c2godW53YXRjaCk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBkaXJlY3RpdmUgaXMgYSBmdW5jdGlvbiBjYWxsZXJcbiAqIGFuZCBpZiB0aGUgZXhwcmVzc2lvbiBpcyBhIGNhbGxhYmxlIG9uZS4gSWYgYm90aCB0cnVlLFxuICogd2Ugd3JhcCB1cCB0aGUgZXhwcmVzc2lvbiBhbmQgdXNlIGl0IGFzIHRoZSBldmVudFxuICogaGFuZGxlci5cbiAqXG4gKiBlLmcuIG9uLWNsaWNrPVwiYSsrXCJcbiAqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX2NoZWNrU3RhdGVtZW50ID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZXhwcmVzc2lvbiA9IHRoaXMuZXhwcmVzc2lvbjtcbiAgaWYgKGV4cHJlc3Npb24gJiYgdGhpcy5hY2NlcHRTdGF0ZW1lbnQgJiYgIWlzU2ltcGxlUGF0aChleHByZXNzaW9uKSkge1xuICAgIHZhciBmbiA9IHBhcnNlRXhwcmVzc2lvbihleHByZXNzaW9uKS5nZXQ7XG4gICAgdmFyIHNjb3BlID0gdGhpcy5fc2NvcGUgfHwgdGhpcy52bTtcbiAgICB2YXIgaGFuZGxlciA9IGZ1bmN0aW9uIGhhbmRsZXIoZSkge1xuICAgICAgc2NvcGUuJGV2ZW50ID0gZTtcbiAgICAgIGZuLmNhbGwoc2NvcGUsIHNjb3BlKTtcbiAgICAgIHNjb3BlLiRldmVudCA9IG51bGw7XG4gICAgfTtcbiAgICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgICBoYW5kbGVyID0gc2NvcGUuX2FwcGx5RmlsdGVycyhoYW5kbGVyLCBudWxsLCB0aGlzLmZpbHRlcnMpO1xuICAgIH1cbiAgICB0aGlzLnVwZGF0ZShoYW5kbGVyKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuLyoqXG4gKiBTZXQgdGhlIGNvcnJlc3BvbmRpbmcgdmFsdWUgd2l0aCB0aGUgc2V0dGVyLlxuICogVGhpcyBzaG91bGQgb25seSBiZSB1c2VkIGluIHR3by13YXkgZGlyZWN0aXZlc1xuICogZS5nLiB2LW1vZGVsLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwdWJsaWNcbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAodGhpcy50d29XYXkpIHtcbiAgICB0aGlzLl93aXRoTG9jayhmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLl93YXRjaGVyLnNldCh2YWx1ZSk7XG4gICAgfSk7XG4gIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIHdhcm4oJ0RpcmVjdGl2ZS5zZXQoKSBjYW4gb25seSBiZSB1c2VkIGluc2lkZSB0d29XYXknICsgJ2RpcmVjdGl2ZXMuJyk7XG4gIH1cbn07XG5cbi8qKlxuICogRXhlY3V0ZSBhIGZ1bmN0aW9uIHdoaWxlIHByZXZlbnRpbmcgdGhhdCBmdW5jdGlvbiBmcm9tXG4gKiB0cmlnZ2VyaW5nIHVwZGF0ZXMgb24gdGhpcyBkaXJlY3RpdmUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl93aXRoTG9jayA9IGZ1bmN0aW9uIChmbikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHNlbGYuX2xvY2tlZCA9IHRydWU7XG4gIGZuLmNhbGwoc2VsZik7XG4gIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICBzZWxmLl9sb2NrZWQgPSBmYWxzZTtcbiAgfSk7XG59O1xuXG4vKipcbiAqIENvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGF0dGFjaGVzIGEgRE9NIGV2ZW50IGxpc3RlbmVyXG4gKiB0byB0aGUgZGlyZWN0aXZlIGVsZW1lbnQgYW5kIGF1dG9tZXRpY2FsbHkgdGVhcnMgaXQgZG93blxuICogZHVyaW5nIHVuYmluZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gW3VzZUNhcHR1cmVdXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uIChldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSkge1xuICBvbih0aGlzLmVsLCBldmVudCwgaGFuZGxlciwgdXNlQ2FwdHVyZSk7KHRoaXMuX2xpc3RlbmVycyB8fCAodGhpcy5fbGlzdGVuZXJzID0gW10pKS5wdXNoKFtldmVudCwgaGFuZGxlcl0pO1xufTtcblxuLyoqXG4gKiBUZWFyZG93biB0aGUgd2F0Y2hlciBhbmQgY2FsbCB1bmJpbmQuXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fdGVhcmRvd24gPSBmdW5jdGlvbiAoKSB7XG4gIGlmICh0aGlzLl9ib3VuZCkge1xuICAgIHRoaXMuX2JvdW5kID0gZmFsc2U7XG4gICAgaWYgKHRoaXMudW5iaW5kKSB7XG4gICAgICB0aGlzLnVuYmluZCgpO1xuICAgIH1cbiAgICBpZiAodGhpcy5fd2F0Y2hlcikge1xuICAgICAgdGhpcy5fd2F0Y2hlci50ZWFyZG93bigpO1xuICAgIH1cbiAgICB2YXIgbGlzdGVuZXJzID0gdGhpcy5fbGlzdGVuZXJzO1xuICAgIHZhciBpO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIGkgPSBsaXN0ZW5lcnMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBvZmYodGhpcy5lbCwgbGlzdGVuZXJzW2ldWzBdLCBsaXN0ZW5lcnNbaV1bMV0pO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgdW53YXRjaEZucyA9IHRoaXMuX3BhcmFtVW53YXRjaEZucztcbiAgICBpZiAodW53YXRjaEZucykge1xuICAgICAgaSA9IHVud2F0Y2hGbnMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICB1bndhdGNoRm5zW2ldKCk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMuZWwpIHtcbiAgICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzLiRyZW1vdmUodGhpcyk7XG4gICAgfVxuICAgIHRoaXMudm0gPSB0aGlzLmVsID0gdGhpcy5fd2F0Y2hlciA9IHRoaXMuX2xpc3RlbmVycyA9IG51bGw7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGxpZmVjeWNsZU1peGluIChWdWUpIHtcbiAgLyoqXG4gICAqIFVwZGF0ZSB2LXJlZiBmb3IgY29tcG9uZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl91cGRhdGVSZWYgPSBmdW5jdGlvbiAocmVtb3ZlKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMuJG9wdGlvbnMuX3JlZjtcbiAgICBpZiAocmVmKSB7XG4gICAgICB2YXIgcmVmcyA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLl9jb250ZXh0KS4kcmVmcztcbiAgICAgIGlmIChyZW1vdmUpIHtcbiAgICAgICAgaWYgKHJlZnNbcmVmXSA9PT0gdGhpcykge1xuICAgICAgICAgIHJlZnNbcmVmXSA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZnNbcmVmXSA9IHRoaXM7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBUcmFuc2NsdWRlLCBjb21waWxlIGFuZCBsaW5rIGVsZW1lbnQuXG4gICAqXG4gICAqIElmIGEgcHJlLWNvbXBpbGVkIGxpbmtlciBpcyBhdmFpbGFibGUsIHRoYXQgbWVhbnMgdGhlXG4gICAqIHBhc3NlZCBpbiBlbGVtZW50IHdpbGwgYmUgcHJlLXRyYW5zY2x1ZGVkIGFuZCBjb21waWxlZFxuICAgKiBhcyB3ZWxsIC0gYWxsIHdlIG5lZWQgdG8gZG8gaXMgdG8gY2FsbCB0aGUgbGlua2VyLlxuICAgKlxuICAgKiBPdGhlcndpc2Ugd2UgbmVlZCB0byBjYWxsIHRyYW5zY2x1ZGUvY29tcGlsZS9saW5rIGhlcmUuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fY29tcGlsZSA9IGZ1bmN0aW9uIChlbCkge1xuICAgIHZhciBvcHRpb25zID0gdGhpcy4kb3B0aW9ucztcblxuICAgIC8vIHRyYW5zY2x1ZGUgYW5kIGluaXQgZWxlbWVudFxuICAgIC8vIHRyYW5zY2x1ZGUgY2FuIHBvdGVudGlhbGx5IHJlcGxhY2Ugb3JpZ2luYWxcbiAgICAvLyBzbyB3ZSBuZWVkIHRvIGtlZXAgcmVmZXJlbmNlOyB0aGlzIHN0ZXAgYWxzbyBpbmplY3RzXG4gICAgLy8gdGhlIHRlbXBsYXRlIGFuZCBjYWNoZXMgdGhlIG9yaWdpbmFsIGF0dHJpYnV0ZXNcbiAgICAvLyBvbiB0aGUgY29udGFpbmVyIG5vZGUgYW5kIHJlcGxhY2VyIG5vZGUuXG4gICAgdmFyIG9yaWdpbmFsID0gZWw7XG4gICAgZWwgPSB0cmFuc2NsdWRlKGVsLCBvcHRpb25zKTtcbiAgICB0aGlzLl9pbml0RWxlbWVudChlbCk7XG5cbiAgICAvLyBoYW5kbGUgdi1wcmUgb24gcm9vdCBub2RlICgjMjAyNilcbiAgICBpZiAoZWwubm9kZVR5cGUgPT09IDEgJiYgZ2V0QXR0cihlbCwgJ3YtcHJlJykgIT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyByb290IGlzIGFsd2F5cyBjb21waWxlZCBwZXItaW5zdGFuY2UsIGJlY2F1c2VcbiAgICAvLyBjb250YWluZXIgYXR0cnMgYW5kIHByb3BzIGNhbiBiZSBkaWZmZXJlbnQgZXZlcnkgdGltZS5cbiAgICB2YXIgY29udGV4dE9wdGlvbnMgPSB0aGlzLl9jb250ZXh0ICYmIHRoaXMuX2NvbnRleHQuJG9wdGlvbnM7XG4gICAgdmFyIHJvb3RMaW5rZXIgPSBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpO1xuXG4gICAgLy8gcmVzb2x2ZSBzbG90IGRpc3RyaWJ1dGlvblxuICAgIHJlc29sdmVTbG90cyh0aGlzLCBvcHRpb25zLl9jb250ZW50KTtcblxuICAgIC8vIGNvbXBpbGUgYW5kIGxpbmsgdGhlIHJlc3RcbiAgICB2YXIgY29udGVudExpbmtGbjtcbiAgICB2YXIgY3RvciA9IHRoaXMuY29uc3RydWN0b3I7XG4gICAgLy8gY29tcG9uZW50IGNvbXBpbGF0aW9uIGNhbiBiZSBjYWNoZWRcbiAgICAvLyBhcyBsb25nIGFzIGl0J3Mgbm90IHVzaW5nIGlubGluZS10ZW1wbGF0ZVxuICAgIGlmIChvcHRpb25zLl9saW5rZXJDYWNoYWJsZSkge1xuICAgICAgY29udGVudExpbmtGbiA9IGN0b3IubGlua2VyO1xuICAgICAgaWYgKCFjb250ZW50TGlua0ZuKSB7XG4gICAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlciA9IGNvbXBpbGUoZWwsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIGxpbmsgcGhhc2VcbiAgICAvLyBtYWtlIHN1cmUgdG8gbGluayByb290IHdpdGggcHJvcCBzY29wZSFcbiAgICB2YXIgcm9vdFVubGlua0ZuID0gcm9vdExpbmtlcih0aGlzLCBlbCwgdGhpcy5fc2NvcGUpO1xuICAgIHZhciBjb250ZW50VW5saW5rRm4gPSBjb250ZW50TGlua0ZuID8gY29udGVudExpbmtGbih0aGlzLCBlbCkgOiBjb21waWxlKGVsLCBvcHRpb25zKSh0aGlzLCBlbCk7XG5cbiAgICAvLyByZWdpc3RlciBjb21wb3NpdGUgdW5saW5rIGZ1bmN0aW9uXG4gICAgLy8gdG8gYmUgY2FsbGVkIGR1cmluZyBpbnN0YW5jZSBkZXN0cnVjdGlvblxuICAgIHRoaXMuX3VubGlua0ZuID0gZnVuY3Rpb24gKCkge1xuICAgICAgcm9vdFVubGlua0ZuKCk7XG4gICAgICAvLyBwYXNzaW5nIGRlc3Ryb3lpbmc6IHRydWUgdG8gYXZvaWQgc2VhcmNoaW5nIGFuZFxuICAgICAgLy8gc3BsaWNpbmcgdGhlIGRpcmVjdGl2ZXNcbiAgICAgIGNvbnRlbnRVbmxpbmtGbih0cnVlKTtcbiAgICB9O1xuXG4gICAgLy8gZmluYWxseSByZXBsYWNlIG9yaWdpbmFsXG4gICAgaWYgKG9wdGlvbnMucmVwbGFjZSkge1xuICAgICAgcmVwbGFjZShvcmlnaW5hbCwgZWwpO1xuICAgIH1cblxuICAgIHRoaXMuX2lzQ29tcGlsZWQgPSB0cnVlO1xuICAgIHRoaXMuX2NhbGxIb29rKCdjb21waWxlZCcpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGluc3RhbmNlIGVsZW1lbnQuIENhbGxlZCBpbiB0aGUgcHVibGljXG4gICAqICRtb3VudCgpIG1ldGhvZC5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0RWxlbWVudCA9IGZ1bmN0aW9uIChlbCkge1xuICAgIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuICAgICAgdGhpcy5faXNGcmFnbWVudCA9IHRydWU7XG4gICAgICB0aGlzLiRlbCA9IHRoaXMuX2ZyYWdtZW50U3RhcnQgPSBlbC5maXJzdENoaWxkO1xuICAgICAgdGhpcy5fZnJhZ21lbnRFbmQgPSBlbC5sYXN0Q2hpbGQ7XG4gICAgICAvLyBzZXQgcGVyc2lzdGVkIHRleHQgYW5jaG9ycyB0byBlbXB0eVxuICAgICAgaWYgKHRoaXMuX2ZyYWdtZW50U3RhcnQubm9kZVR5cGUgPT09IDMpIHtcbiAgICAgICAgdGhpcy5fZnJhZ21lbnRTdGFydC5kYXRhID0gdGhpcy5fZnJhZ21lbnRFbmQuZGF0YSA9ICcnO1xuICAgICAgfVxuICAgICAgdGhpcy5fZnJhZ21lbnQgPSBlbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy4kZWwgPSBlbDtcbiAgICB9XG4gICAgdGhpcy4kZWwuX192dWVfXyA9IHRoaXM7XG4gICAgdGhpcy5fY2FsbEhvb2soJ2JlZm9yZUNvbXBpbGUnKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFuZCBiaW5kIGEgZGlyZWN0aXZlIHRvIGFuIGVsZW1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBkZXNjcmlwdG9yIC0gcGFyc2VkIGRpcmVjdGl2ZSBkZXNjcmlwdG9yXG4gICAqIEBwYXJhbSB7Tm9kZX0gbm9kZSAgIC0gdGFyZ2V0IG5vZGVcbiAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIHRyYW5zY2x1c2lvbiBob3N0IGNvbXBvbmVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIG93bmVyIGZyYWdtZW50XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2JpbmREaXIgPSBmdW5jdGlvbiAoZGVzY3JpcHRvciwgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICB0aGlzLl9kaXJlY3RpdmVzLnB1c2gobmV3IERpcmVjdGl2ZShkZXNjcmlwdG9yLCB0aGlzLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZykpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBUZWFyZG93biBhbiBpbnN0YW5jZSwgdW5vYnNlcnZlcyB0aGUgZGF0YSwgdW5iaW5kIGFsbCB0aGVcbiAgICogZGlyZWN0aXZlcywgdHVybiBvZmYgYWxsIHRoZSBldmVudCBsaXN0ZW5lcnMsIGV0Yy5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmUgLSB3aGV0aGVyIHRvIHJlbW92ZSB0aGUgRE9NIG5vZGUuXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwIC0gaWYgdHJ1ZSwgZGVmZXIgY2xlYW51cCB0b1xuICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJlIGNhbGxlZCBsYXRlclxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9kZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG4gICAgaWYgKHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQpIHtcbiAgICAgIGlmICghZGVmZXJDbGVhbnVwKSB7XG4gICAgICAgIHRoaXMuX2NsZWFudXAoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgZGVzdHJveVJlYWR5O1xuICAgIHZhciBwZW5kaW5nUmVtb3ZhbDtcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAvLyBDbGVhbnVwIHNob3VsZCBiZSBjYWxsZWQgZWl0aGVyIHN5bmNocm9ub3VzbHkgb3IgYXN5bmNocm9ub3lzbHkgYXNcbiAgICAvLyBjYWxsYmFjayBvZiB0aGlzLiRyZW1vdmUoKSwgb3IgaWYgcmVtb3ZlIGFuZCBkZWZlckNsZWFudXAgYXJlIGZhbHNlLlxuICAgIC8vIEluIGFueSBjYXNlIGl0IHNob3VsZCBiZSBjYWxsZWQgYWZ0ZXIgYWxsIG90aGVyIHJlbW92aW5nLCB1bmJpbmRpbmcgYW5kXG4gICAgLy8gdHVybmluZyBvZiBpcyBkb25lXG4gICAgdmFyIGNsZWFudXBJZlBvc3NpYmxlID0gZnVuY3Rpb24gY2xlYW51cElmUG9zc2libGUoKSB7XG4gICAgICBpZiAoZGVzdHJveVJlYWR5ICYmICFwZW5kaW5nUmVtb3ZhbCAmJiAhZGVmZXJDbGVhbnVwKSB7XG4gICAgICAgIHNlbGYuX2NsZWFudXAoKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gcmVtb3ZlIERPTSBlbGVtZW50XG4gICAgaWYgKHJlbW92ZSAmJiB0aGlzLiRlbCkge1xuICAgICAgcGVuZGluZ1JlbW92YWwgPSB0cnVlO1xuICAgICAgdGhpcy4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcGVuZGluZ1JlbW92YWwgPSBmYWxzZTtcbiAgICAgICAgY2xlYW51cElmUG9zc2libGUoKTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVEZXN0cm95Jyk7XG4gICAgdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgdmFyIGk7XG4gICAgLy8gcmVtb3ZlIHNlbGYgZnJvbSBwYXJlbnQuIG9ubHkgbmVjZXNzYXJ5XG4gICAgLy8gaWYgcGFyZW50IGlzIG5vdCBiZWluZyBkZXN0cm95ZWQgYXMgd2VsbC5cbiAgICB2YXIgcGFyZW50ID0gdGhpcy4kcGFyZW50O1xuICAgIGlmIChwYXJlbnQgJiYgIXBhcmVudC5faXNCZWluZ0Rlc3Ryb3llZCkge1xuICAgICAgcGFyZW50LiRjaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuICAgICAgLy8gdW5yZWdpc3RlciByZWYgKHJlbW92ZTogdHJ1ZSlcbiAgICAgIHRoaXMuX3VwZGF0ZVJlZih0cnVlKTtcbiAgICB9XG4gICAgLy8gZGVzdHJveSBhbGwgY2hpbGRyZW4uXG4gICAgaSA9IHRoaXMuJGNoaWxkcmVuLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB0aGlzLiRjaGlsZHJlbltpXS4kZGVzdHJveSgpO1xuICAgIH1cbiAgICAvLyB0ZWFyZG93biBwcm9wc1xuICAgIGlmICh0aGlzLl9wcm9wc1VubGlua0ZuKSB7XG4gICAgICB0aGlzLl9wcm9wc1VubGlua0ZuKCk7XG4gICAgfVxuICAgIC8vIHRlYXJkb3duIGFsbCBkaXJlY3RpdmVzLiB0aGlzIGFsc28gdGVhcnNkb3duIGFsbFxuICAgIC8vIGRpcmVjdGl2ZS1vd25lZCB3YXRjaGVycy5cbiAgICBpZiAodGhpcy5fdW5saW5rRm4pIHtcbiAgICAgIHRoaXMuX3VubGlua0ZuKCk7XG4gICAgfVxuICAgIGkgPSB0aGlzLl93YXRjaGVycy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy5fd2F0Y2hlcnNbaV0udGVhcmRvd24oKTtcbiAgICB9XG4gICAgLy8gcmVtb3ZlIHJlZmVyZW5jZSB0byBzZWxmIG9uICRlbFxuICAgIGlmICh0aGlzLiRlbCkge1xuICAgICAgdGhpcy4kZWwuX192dWVfXyA9IG51bGw7XG4gICAgfVxuXG4gICAgZGVzdHJveVJlYWR5ID0gdHJ1ZTtcbiAgICBjbGVhbnVwSWZQb3NzaWJsZSgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBDbGVhbiB1cCB0byBlbnN1cmUgZ2FyYmFnZSBjb2xsZWN0aW9uLlxuICAgKiBUaGlzIGlzIGNhbGxlZCBhZnRlciB0aGUgbGVhdmUgdHJhbnNpdGlvbiBpZiB0aGVyZVxuICAgKiBpcyBhbnkuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2NsZWFudXAgPSBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHRoaXMuX2lzRGVzdHJveWVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gb3duZXIgZnJhZ21lbnRcbiAgICAvLyBkbyBpdCBpbiBjbGVhbnVwIHNvIHRoYXQgd2UgY2FuIGNhbGwgJGRlc3Ryb3kgd2l0aFxuICAgIC8vIGRlZmVyIHJpZ2h0IHdoZW4gYSBmcmFnbWVudCBpcyBhYm91dCB0byBiZSByZW1vdmVkLlxuICAgIGlmICh0aGlzLl9mcmFnKSB7XG4gICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLiRyZW1vdmUodGhpcyk7XG4gICAgfVxuICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgZnJvbSBkYXRhIG9iXG4gICAgLy8gZnJvemVuIG9iamVjdCBtYXkgbm90IGhhdmUgb2JzZXJ2ZXIuXG4gICAgaWYgKHRoaXMuX2RhdGEgJiYgdGhpcy5fZGF0YS5fX29iX18pIHtcbiAgICAgIHRoaXMuX2RhdGEuX19vYl9fLnJlbW92ZVZtKHRoaXMpO1xuICAgIH1cbiAgICAvLyBDbGVhbiB1cCByZWZlcmVuY2VzIHRvIHByaXZhdGUgcHJvcGVydGllcyBhbmQgb3RoZXJcbiAgICAvLyBpbnN0YW5jZXMuIHByZXNlcnZlIHJlZmVyZW5jZSB0byBfZGF0YSBzbyB0aGF0IHByb3h5XG4gICAgLy8gYWNjZXNzb3JzIHN0aWxsIHdvcmsuIFRoZSBvbmx5IHBvdGVudGlhbCBzaWRlIGVmZmVjdFxuICAgIC8vIGhlcmUgaXMgdGhhdCBtdXRhdGluZyB0aGUgaW5zdGFuY2UgYWZ0ZXIgaXQncyBkZXN0cm95ZWRcbiAgICAvLyBtYXkgYWZmZWN0IHRoZSBzdGF0ZSBvZiBvdGhlciBjb21wb25lbnRzIHRoYXQgYXJlIHN0aWxsXG4gICAgLy8gb2JzZXJ2aW5nIHRoZSBzYW1lIG9iamVjdCwgYnV0IHRoYXQgc2VlbXMgdG8gYmUgYVxuICAgIC8vIHJlYXNvbmFibGUgcmVzcG9uc2liaWxpdHkgZm9yIHRoZSB1c2VyIHJhdGhlciB0aGFuXG4gICAgLy8gYWx3YXlzIHRocm93aW5nIGFuIGVycm9yIG9uIHRoZW0uXG4gICAgdGhpcy4kZWwgPSB0aGlzLiRwYXJlbnQgPSB0aGlzLiRyb290ID0gdGhpcy4kY2hpbGRyZW4gPSB0aGlzLl93YXRjaGVycyA9IHRoaXMuX2NvbnRleHQgPSB0aGlzLl9zY29wZSA9IHRoaXMuX2RpcmVjdGl2ZXMgPSBudWxsO1xuICAgIC8vIGNhbGwgdGhlIGxhc3QgaG9vay4uLlxuICAgIHRoaXMuX2lzRGVzdHJveWVkID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsSG9vaygnZGVzdHJveWVkJyk7XG4gICAgLy8gdHVybiBvZmYgYWxsIGluc3RhbmNlIGxpc3RlbmVycy5cbiAgICB0aGlzLiRvZmYoKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gbWlzY01peGluIChWdWUpIHtcbiAgLyoqXG4gICAqIEFwcGx5IGEgbGlzdCBvZiBmaWx0ZXIgKGRlc2NyaXB0b3JzKSB0byBhIHZhbHVlLlxuICAgKiBVc2luZyBwbGFpbiBmb3IgbG9vcHMgaGVyZSBiZWNhdXNlIHRoaXMgd2lsbCBiZSBjYWxsZWQgaW5cbiAgICogdGhlIGdldHRlciBvZiBhbnkgd2F0Y2hlciB3aXRoIGZpbHRlcnMgc28gaXQgaXMgdmVyeVxuICAgKiBwZXJmb3JtYW5jZSBzZW5zaXRpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHsqfSBbb2xkVmFsdWVdXG4gICAqIEBwYXJhbSB7QXJyYXl9IGZpbHRlcnNcbiAgICogQHBhcmFtIHtCb29sZWFufSB3cml0ZVxuICAgKiBAcmV0dXJuIHsqfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9hcHBseUZpbHRlcnMgPSBmdW5jdGlvbiAodmFsdWUsIG9sZFZhbHVlLCBmaWx0ZXJzLCB3cml0ZSkge1xuICAgIHZhciBmaWx0ZXIsIGZuLCBhcmdzLCBhcmcsIG9mZnNldCwgaSwgbCwgaiwgaztcbiAgICBmb3IgKGkgPSAwLCBsID0gZmlsdGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZpbHRlciA9IGZpbHRlcnNbd3JpdGUgPyBsIC0gaSAtIDEgOiBpXTtcbiAgICAgIGZuID0gcmVzb2x2ZUFzc2V0KHRoaXMuJG9wdGlvbnMsICdmaWx0ZXJzJywgZmlsdGVyLm5hbWUsIHRydWUpO1xuICAgICAgaWYgKCFmbikgY29udGludWU7XG4gICAgICBmbiA9IHdyaXRlID8gZm4ud3JpdGUgOiBmbi5yZWFkIHx8IGZuO1xuICAgICAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykgY29udGludWU7XG4gICAgICBhcmdzID0gd3JpdGUgPyBbdmFsdWUsIG9sZFZhbHVlXSA6IFt2YWx1ZV07XG4gICAgICBvZmZzZXQgPSB3cml0ZSA/IDIgOiAxO1xuICAgICAgaWYgKGZpbHRlci5hcmdzKSB7XG4gICAgICAgIGZvciAoaiA9IDAsIGsgPSBmaWx0ZXIuYXJncy5sZW5ndGg7IGogPCBrOyBqKyspIHtcbiAgICAgICAgICBhcmcgPSBmaWx0ZXIuYXJnc1tqXTtcbiAgICAgICAgICBhcmdzW2ogKyBvZmZzZXRdID0gYXJnLmR5bmFtaWMgPyB0aGlzLiRnZXQoYXJnLnZhbHVlKSA6IGFyZy52YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdmFsdWUgPSBmbi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZXNvbHZlIGEgY29tcG9uZW50LCBkZXBlbmRpbmcgb24gd2hldGhlciB0aGUgY29tcG9uZW50XG4gICAqIGlzIGRlZmluZWQgbm9ybWFsbHkgb3IgdXNpbmcgYW4gYXN5bmMgZmFjdG9yeSBmdW5jdGlvbi5cbiAgICogUmVzb2x2ZXMgc3luY2hyb25vdXNseSBpZiBhbHJlYWR5IHJlc29sdmVkLCBvdGhlcndpc2VcbiAgICogcmVzb2x2ZXMgYXN5bmNocm9ub3VzbHkgYW5kIGNhY2hlcyB0aGUgcmVzb2x2ZWRcbiAgICogY29uc3RydWN0b3Igb24gdGhlIGZhY3RvcnkuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSB2YWx1ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50ID0gZnVuY3Rpb24gKHZhbHVlLCBjYikge1xuICAgIHZhciBmYWN0b3J5O1xuICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGZhY3RvcnkgPSB2YWx1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgZmFjdG9yeSA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnY29tcG9uZW50cycsIHZhbHVlLCB0cnVlKTtcbiAgICB9XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFmYWN0b3J5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGFzeW5jIGNvbXBvbmVudCBmYWN0b3J5XG4gICAgaWYgKCFmYWN0b3J5Lm9wdGlvbnMpIHtcbiAgICAgIGlmIChmYWN0b3J5LnJlc29sdmVkKSB7XG4gICAgICAgIC8vIGNhY2hlZFxuICAgICAgICBjYihmYWN0b3J5LnJlc29sdmVkKTtcbiAgICAgIH0gZWxzZSBpZiAoZmFjdG9yeS5yZXF1ZXN0ZWQpIHtcbiAgICAgICAgLy8gcG9vbCBjYWxsYmFja3NcbiAgICAgICAgZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzLnB1c2goY2IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZmFjdG9yeS5yZXF1ZXN0ZWQgPSB0cnVlO1xuICAgICAgICB2YXIgY2JzID0gZmFjdG9yeS5wZW5kaW5nQ2FsbGJhY2tzID0gW2NiXTtcbiAgICAgICAgZmFjdG9yeS5jYWxsKHRoaXMsIGZ1bmN0aW9uIHJlc29sdmUocmVzKSB7XG4gICAgICAgICAgaWYgKGlzUGxhaW5PYmplY3QocmVzKSkge1xuICAgICAgICAgICAgcmVzID0gVnVlLmV4dGVuZChyZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBjYWNoZSByZXNvbHZlZFxuICAgICAgICAgIGZhY3RvcnkucmVzb2x2ZWQgPSByZXM7XG4gICAgICAgICAgLy8gaW52b2tlIGNhbGxiYWNrc1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgY2JzW2ldKHJlcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbiByZWplY3QocmVhc29uKSB7XG4gICAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSBhc3luYyBjb21wb25lbnQnICsgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgPyAnOiAnICsgdmFsdWUgOiAnJykgKyAnLiAnICsgKHJlYXNvbiA/ICdcXG5SZWFzb246ICcgKyByZWFzb24gOiAnJykpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm9ybWFsIGNvbXBvbmVudFxuICAgICAgY2IoZmFjdG9yeSk7XG4gICAgfVxuICB9O1xufVxuXG52YXIgZmlsdGVyUkUkMSA9IC9bXnxdXFx8W158XS87XG5cbmZ1bmN0aW9uIGRhdGFBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogR2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZ2V0ID0gZnVuY3Rpb24gKGV4cCwgYXNTdGF0ZW1lbnQpIHtcbiAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cCk7XG4gICAgaWYgKHJlcykge1xuICAgICAgaWYgKGFzU3RhdGVtZW50KSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIHN0YXRlbWVudEhhbmRsZXIoKSB7XG4gICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgICAgICAgIHZhciByZXN1bHQgPSByZXMuZ2V0LmNhbGwoc2VsZiwgc2VsZik7XG4gICAgICAgICAgc2VsZi4kYXJndW1lbnRzID0gbnVsbDtcbiAgICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgICB9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICByZXR1cm4gcmVzLmdldC5jYWxsKHRoaXMsIHRoaXMpO1xuICAgICAgICB9IGNhdGNoIChlKSB7fVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0IHRoZSB2YWx1ZSBmcm9tIGFuIGV4cHJlc3Npb24gb24gdGhpcyB2bS5cbiAgICogVGhlIGV4cHJlc3Npb24gbXVzdCBiZSBhIHZhbGlkIGxlZnQtaGFuZFxuICAgKiBleHByZXNzaW9uIGluIGFuIGFzc2lnbm1lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAgICogQHBhcmFtIHsqfSB2YWxcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kc2V0ID0gZnVuY3Rpb24gKGV4cCwgdmFsKSB7XG4gICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHAsIHRydWUpO1xuICAgIGlmIChyZXMgJiYgcmVzLnNldCkge1xuICAgICAgcmVzLnNldC5jYWxsKHRoaXMsIHRoaXMsIHZhbCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBwcm9wZXJ0eSBvbiB0aGUgVk1cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRkZWxldGUgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgZGVsKHRoaXMuX2RhdGEsIGtleSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFdhdGNoIGFuIGV4cHJlc3Npb24sIHRyaWdnZXIgY2FsbGJhY2sgd2hlbiBpdHNcbiAgICogdmFsdWUgY2hhbmdlcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gaW1tZWRpYXRlXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufSAtIHVud2F0Y2hGblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiR3YXRjaCA9IGZ1bmN0aW9uIChleHBPckZuLCBjYiwgb3B0aW9ucykge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdmFyIHBhcnNlZDtcbiAgICBpZiAodHlwZW9mIGV4cE9yRm4gPT09ICdzdHJpbmcnKSB7XG4gICAgICBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZShleHBPckZuKTtcbiAgICAgIGV4cE9yRm4gPSBwYXJzZWQuZXhwcmVzc2lvbjtcbiAgICB9XG4gICAgdmFyIHdhdGNoZXIgPSBuZXcgV2F0Y2hlcih2bSwgZXhwT3JGbiwgY2IsIHtcbiAgICAgIGRlZXA6IG9wdGlvbnMgJiYgb3B0aW9ucy5kZWVwLFxuICAgICAgc3luYzogb3B0aW9ucyAmJiBvcHRpb25zLnN5bmMsXG4gICAgICBmaWx0ZXJzOiBwYXJzZWQgJiYgcGFyc2VkLmZpbHRlcnMsXG4gICAgICB1c2VyOiAhb3B0aW9ucyB8fCBvcHRpb25zLnVzZXIgIT09IGZhbHNlXG4gICAgfSk7XG4gICAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5pbW1lZGlhdGUpIHtcbiAgICAgIGNiLmNhbGwodm0sIHdhdGNoZXIudmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gZnVuY3Rpb24gdW53YXRjaEZuKCkge1xuICAgICAgd2F0Y2hlci50ZWFyZG93bigpO1xuICAgIH07XG4gIH07XG5cbiAgLyoqXG4gICAqIEV2YWx1YXRlIGEgdGV4dCBkaXJlY3RpdmUsIGluY2x1ZGluZyBmaWx0ZXJzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gdGV4dFxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFthc1N0YXRlbWVudF1cbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRldmFsID0gZnVuY3Rpb24gKHRleHQsIGFzU3RhdGVtZW50KSB7XG4gICAgLy8gY2hlY2sgZm9yIGZpbHRlcnMuXG4gICAgaWYgKGZpbHRlclJFJDEudGVzdCh0ZXh0KSkge1xuICAgICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKHRleHQpO1xuICAgICAgLy8gdGhlIGZpbHRlciByZWdleCBjaGVjayBtaWdodCBnaXZlIGZhbHNlIHBvc2l0aXZlXG4gICAgICAvLyBmb3IgcGlwZXMgaW5zaWRlIHN0cmluZ3MsIHNvIGl0J3MgcG9zc2libGUgdGhhdFxuICAgICAgLy8gd2UgZG9uJ3QgZ2V0IGFueSBmaWx0ZXJzIGhlcmVcbiAgICAgIHZhciB2YWwgPSB0aGlzLiRnZXQoZGlyLmV4cHJlc3Npb24sIGFzU3RhdGVtZW50KTtcbiAgICAgIHJldHVybiBkaXIuZmlsdGVycyA/IHRoaXMuX2FwcGx5RmlsdGVycyh2YWwsIG51bGwsIGRpci5maWx0ZXJzKSA6IHZhbDtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbm8gZmlsdGVyXG4gICAgICByZXR1cm4gdGhpcy4kZ2V0KHRleHQsIGFzU3RhdGVtZW50KTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEludGVycG9sYXRlIGEgcGllY2Ugb2YgdGVtcGxhdGUgdGV4dC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAgICogQHJldHVybiB7U3RyaW5nfVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRpbnRlcnBvbGF0ZSA9IGZ1bmN0aW9uICh0ZXh0KSB7XG4gICAgdmFyIHRva2VucyA9IHBhcnNlVGV4dCh0ZXh0KTtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgIHJldHVybiB2bS4kZXZhbCh0b2tlbnNbMF0udmFsdWUpICsgJyc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gdG9rZW5zLm1hcChmdW5jdGlvbiAodG9rZW4pIHtcbiAgICAgICAgICByZXR1cm4gdG9rZW4udGFnID8gdm0uJGV2YWwodG9rZW4udmFsdWUpIDogdG9rZW4udmFsdWU7XG4gICAgICAgIH0pLmpvaW4oJycpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gdGV4dDtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIExvZyBpbnN0YW5jZSBkYXRhIGFzIGEgcGxhaW4gSlMgb2JqZWN0XG4gICAqIHNvIHRoYXQgaXQgaXMgZWFzaWVyIHRvIGluc3BlY3QgaW4gY29uc29sZS5cbiAgICogVGhpcyBtZXRob2QgYXNzdW1lcyBjb25zb2xlIGlzIGF2YWlsYWJsZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IFtwYXRoXVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRsb2cgPSBmdW5jdGlvbiAocGF0aCkge1xuICAgIHZhciBkYXRhID0gcGF0aCA/IGdldFBhdGgodGhpcy5fZGF0YSwgcGF0aCkgOiB0aGlzLl9kYXRhO1xuICAgIGlmIChkYXRhKSB7XG4gICAgICBkYXRhID0gY2xlYW4oZGF0YSk7XG4gICAgfVxuICAgIC8vIGluY2x1ZGUgY29tcHV0ZWQgZmllbGRzXG4gICAgaWYgKCFwYXRoKSB7XG4gICAgICB2YXIga2V5O1xuICAgICAgZm9yIChrZXkgaW4gdGhpcy4kb3B0aW9ucy5jb21wdXRlZCkge1xuICAgICAgICBkYXRhW2tleV0gPSBjbGVhbih0aGlzW2tleV0pO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuX3Byb3BzKSB7XG4gICAgICAgIGZvciAoa2V5IGluIHRoaXMuX3Byb3BzKSB7XG4gICAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgfTtcblxuICAvKipcbiAgICogXCJjbGVhblwiIGEgZ2V0dGVyL3NldHRlciBjb252ZXJ0ZWQgb2JqZWN0IGludG8gYSBwbGFpblxuICAgKiBvYmplY3QgY29weS5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IC0gb2JqXG4gICAqIEByZXR1cm4ge09iamVjdH1cbiAgICovXG5cbiAgZnVuY3Rpb24gY2xlYW4ob2JqKSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkob2JqKSk7XG4gIH1cbn1cblxuZnVuY3Rpb24gZG9tQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIENvbnZlbmllbmNlIG9uLWluc3RhbmNlIG5leHRUaWNrLiBUaGUgY2FsbGJhY2sgaXNcbiAgICogYXV0by1ib3VuZCB0byB0aGUgaW5zdGFuY2UsIGFuZCB0aGlzIGF2b2lkcyBjb21wb25lbnRcbiAgICogbW9kdWxlcyBoYXZpbmcgdG8gcmVseSBvbiB0aGUgZ2xvYmFsIFZ1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbmV4dFRpY2sgPSBmdW5jdGlvbiAoZm4pIHtcbiAgICBuZXh0VGljayhmbiwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEFwcGVuZCBpbnN0YW5jZSB0byB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGFwcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYXBwZW5kLCBhcHBlbmRXaXRoVHJhbnNpdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIFByZXBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRwcmVwZW5kVG8gPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuICAgIGlmICh0YXJnZXQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0LmZpcnN0Q2hpbGQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydCBpbnN0YW5jZSBiZWZvcmUgdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRiZWZvcmUgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICByZXR1cm4gaW5zZXJ0KHRoaXMsIHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uLCBiZWZvcmVXaXRoQ2IsIGJlZm9yZVdpdGhUcmFuc2l0aW9uKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5zZXJ0IGluc3RhbmNlIGFmdGVyIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYWZ0ZXIgPSBmdW5jdGlvbiAodGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24pIHtcbiAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuICAgIGlmICh0YXJnZXQubmV4dFNpYmxpbmcpIHtcbiAgICAgIHRoaXMuJGJlZm9yZSh0YXJnZXQubmV4dFNpYmxpbmcsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGFwcGVuZFRvKHRhcmdldC5wYXJlbnROb2RlLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVtb3ZlIGluc3RhbmNlIGZyb20gRE9NXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRyZW1vdmUgPSBmdW5jdGlvbiAoY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgaWYgKCF0aGlzLiRlbC5wYXJlbnROb2RlKSB7XG4gICAgICByZXR1cm4gY2IgJiYgY2IoKTtcbiAgICB9XG4gICAgdmFyIGluRG9jdW1lbnQgPSB0aGlzLl9pc0F0dGFjaGVkICYmIGluRG9jKHRoaXMuJGVsKTtcbiAgICAvLyBpZiB3ZSBhcmUgbm90IGluIGRvY3VtZW50LCBubyBuZWVkIHRvIGNoZWNrXG4gICAgLy8gZm9yIHRyYW5zaXRpb25zXG4gICAgaWYgKCFpbkRvY3VtZW50KSB3aXRoVHJhbnNpdGlvbiA9IGZhbHNlO1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgcmVhbENiID0gZnVuY3Rpb24gcmVhbENiKCkge1xuICAgICAgaWYgKGluRG9jdW1lbnQpIHNlbGYuX2NhbGxIb29rKCdkZXRhY2hlZCcpO1xuICAgICAgaWYgKGNiKSBjYigpO1xuICAgIH07XG4gICAgaWYgKHRoaXMuX2lzRnJhZ21lbnQpIHtcbiAgICAgIHJlbW92ZU5vZGVSYW5nZSh0aGlzLl9mcmFnbWVudFN0YXJ0LCB0aGlzLl9mcmFnbWVudEVuZCwgdGhpcywgdGhpcy5fZnJhZ21lbnQsIHJlYWxDYik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSA/IHJlbW92ZVdpdGhDYiA6IHJlbW92ZVdpdGhUcmFuc2l0aW9uO1xuICAgICAgb3AodGhpcy4kZWwsIHRoaXMsIHJlYWxDYik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBTaGFyZWQgRE9NIGluc2VydGlvbiBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMSAtIG9wIGZvciBub24tdHJhbnNpdGlvbiBpbnNlcnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gb3AyIC0gb3AgZm9yIHRyYW5zaXRpb24gaW5zZXJ0XG4gICAqIEByZXR1cm4gdm1cbiAgICovXG5cbiAgZnVuY3Rpb24gaW5zZXJ0KHZtLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgb3AxLCBvcDIpIHtcbiAgICB0YXJnZXQgPSBxdWVyeSh0YXJnZXQpO1xuICAgIHZhciB0YXJnZXRJc0RldGFjaGVkID0gIWluRG9jKHRhcmdldCk7XG4gICAgdmFyIG9wID0gd2l0aFRyYW5zaXRpb24gPT09IGZhbHNlIHx8IHRhcmdldElzRGV0YWNoZWQgPyBvcDEgOiBvcDI7XG4gICAgdmFyIHNob3VsZENhbGxIb29rID0gIXRhcmdldElzRGV0YWNoZWQgJiYgIXZtLl9pc0F0dGFjaGVkICYmICFpbkRvYyh2bS4kZWwpO1xuICAgIGlmICh2bS5faXNGcmFnbWVudCkge1xuICAgICAgbWFwTm9kZVJhbmdlKHZtLl9mcmFnbWVudFN0YXJ0LCB2bS5fZnJhZ21lbnRFbmQsIGZ1bmN0aW9uIChub2RlKSB7XG4gICAgICAgIG9wKG5vZGUsIHRhcmdldCwgdm0pO1xuICAgICAgfSk7XG4gICAgICBjYiAmJiBjYigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcCh2bS4kZWwsIHRhcmdldCwgdm0sIGNiKTtcbiAgICB9XG4gICAgaWYgKHNob3VsZENhbGxIb29rKSB7XG4gICAgICB2bS5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgfVxuICAgIHJldHVybiB2bTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBmb3Igc2VsZWN0b3JzXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGVsXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHF1ZXJ5KGVsKSB7XG4gICAgcmV0dXJuIHR5cGVvZiBlbCA9PT0gJ3N0cmluZycgPyBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGVsKSA6IGVsO1xuICB9XG5cbiAgLyoqXG4gICAqIEFwcGVuZCBvcGVyYXRpb24gdGhhdCB0YWtlcyBhIGNhbGxiYWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IGVsXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7VnVlfSB2bSAtIHVudXNlZFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGFwcGVuZChlbCwgdGFyZ2V0LCB2bSwgY2IpIHtcbiAgICB0YXJnZXQuYXBwZW5kQ2hpbGQoZWwpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnNlcnRCZWZvcmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBiZWZvcmVXaXRoQ2IoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiByZW1vdmVXaXRoQ2IoZWwsIHZtLCBjYikge1xuICAgIHJlbW92ZShlbCk7XG4gICAgaWYgKGNiKSBjYigpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGV2ZW50c0FQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBMaXN0ZW4gb24gdGhlIGdpdmVuIGBldmVudGAgd2l0aCBgZm5gLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kb24gPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgKHRoaXMuX2V2ZW50c1tldmVudF0gfHwgKHRoaXMuX2V2ZW50c1tldmVudF0gPSBbXSkpLnB1c2goZm4pO1xuICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIDEpO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBZGRzIGFuIGBldmVudGAgbGlzdGVuZXIgdGhhdCB3aWxsIGJlIGludm9rZWQgYSBzaW5nbGVcbiAgICogdGltZSB0aGVuIGF1dG9tYXRpY2FsbHkgcmVtb3ZlZC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9uY2UgPSBmdW5jdGlvbiAoZXZlbnQsIGZuKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIGZ1bmN0aW9uIG9uKCkge1xuICAgICAgc2VsZi4kb2ZmKGV2ZW50LCBvbik7XG4gICAgICBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgICBvbi5mbiA9IGZuO1xuICAgIHRoaXMuJG9uKGV2ZW50LCBvbik7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0aGUgZ2l2ZW4gY2FsbGJhY2sgZm9yIGBldmVudGAgb3IgYWxsXG4gICAqIHJlZ2lzdGVyZWQgY2FsbGJhY2tzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kb2ZmID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgIHZhciBjYnM7XG4gICAgLy8gYWxsXG4gICAgaWYgKCFhcmd1bWVudHMubGVuZ3RoKSB7XG4gICAgICBpZiAodGhpcy4kcGFyZW50KSB7XG4gICAgICAgIGZvciAoZXZlbnQgaW4gdGhpcy5fZXZlbnRzKSB7XG4gICAgICAgICAgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICAgICAgICBpZiAoY2JzKSB7XG4gICAgICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtY2JzLmxlbmd0aCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICB0aGlzLl9ldmVudHMgPSB7fTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICAvLyBzcGVjaWZpYyBldmVudFxuICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG4gICAgaWYgKCFjYnMpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICBpZiAoYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuICAgICAgdGhpcy5fZXZlbnRzW2V2ZW50XSA9IG51bGw7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gc3BlY2lmaWMgaGFuZGxlclxuICAgIHZhciBjYjtcbiAgICB2YXIgaSA9IGNicy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgY2IgPSBjYnNbaV07XG4gICAgICBpZiAoY2IgPT09IGZuIHx8IGNiLmZuID09PSBmbikge1xuICAgICAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAtMSk7XG4gICAgICAgIGNicy5zcGxpY2UoaSwgMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogVHJpZ2dlciBhbiBldmVudCBvbiBzZWxmLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG4gICAqIEByZXR1cm4ge0Jvb2xlYW59IHNob3VsZFByb3BhZ2F0ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRlbWl0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcbiAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuICAgIHZhciBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBpc1NvdXJjZSB8fCAhY2JzO1xuICAgIGlmIChjYnMpIHtcbiAgICAgIGNicyA9IGNicy5sZW5ndGggPiAxID8gdG9BcnJheShjYnMpIDogY2JzO1xuICAgICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGhhY2t5IHNvbHV0aW9uIHRvIHRoZSBxdWVzdGlvbiByYWlzZWRcbiAgICAgIC8vIGluICMyMTAyOiBmb3IgYW4gaW5saW5lIGNvbXBvbmVudCBsaXN0ZW5lciBsaWtlIDxjb21wIEB0ZXN0PVwiZG9UaGlzXCI+LFxuICAgICAgLy8gdGhlIHByb3BhZ2F0aW9uIGhhbmRsaW5nIGlzIHNvbWV3aGF0IGJyb2tlbi4gVGhlcmVmb3JlIHdlXG4gICAgICAvLyBuZWVkIHRvIHRyZWF0IHRoZXNlIGlubGluZSBjYWxsYmFja3MgZGlmZmVyZW50bHkuXG4gICAgICB2YXIgaGFzUGFyZW50Q2JzID0gaXNTb3VyY2UgJiYgY2JzLnNvbWUoZnVuY3Rpb24gKGNiKSB7XG4gICAgICAgIHJldHVybiBjYi5fZnJvbVBhcmVudDtcbiAgICAgIH0pO1xuICAgICAgaWYgKGhhc1BhcmVudENicykge1xuICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjYnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBjYiA9IGNic1tpXTtcbiAgICAgICAgdmFyIHJlcyA9IGNiLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgICAgICBpZiAocmVzID09PSB0cnVlICYmICghaGFzUGFyZW50Q2JzIHx8IGNiLl9mcm9tUGFyZW50KSkge1xuICAgICAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHNob3VsZFByb3BhZ2F0ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgYnJvYWRjYXN0IGFuIGV2ZW50IHRvIGFsbCBjaGlsZHJlbiBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gZXZlbnRcbiAgICogQHBhcmFtIHsuLi4qfSBhZGRpdGlvbmFsIGFyZ3VtZW50c1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRicm9hZGNhc3QgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgaXNTb3VyY2UgPSB0eXBlb2YgZXZlbnQgPT09ICdzdHJpbmcnO1xuICAgIGV2ZW50ID0gaXNTb3VyY2UgPyBldmVudCA6IGV2ZW50Lm5hbWU7XG4gICAgLy8gaWYgbm8gY2hpbGQgaGFzIHJlZ2lzdGVyZWQgZm9yIHRoaXMgZXZlbnQsXG4gICAgLy8gdGhlbiB0aGVyZSdzIG5vIG5lZWQgdG8gYnJvYWRjYXN0LlxuICAgIGlmICghdGhpcy5fZXZlbnRzQ291bnRbZXZlbnRdKSByZXR1cm47XG4gICAgdmFyIGNoaWxkcmVuID0gdGhpcy4kY2hpbGRyZW47XG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgaWYgKGlzU291cmNlKSB7XG4gICAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuICAgICAgLy8gb24gY2hpbGRyZW5cbiAgICAgIGFyZ3NbMF0gPSB7IG5hbWU6IGV2ZW50LCBzb3VyY2U6IHRoaXMgfTtcbiAgICB9XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBjaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBjaGlsZCA9IGNoaWxkcmVuW2ldO1xuICAgICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IGNoaWxkLiRlbWl0LmFwcGx5KGNoaWxkLCBhcmdzKTtcbiAgICAgIGlmIChzaG91bGRQcm9wYWdhdGUpIHtcbiAgICAgICAgY2hpbGQuJGJyb2FkY2FzdC5hcHBseShjaGlsZCwgYXJncyk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWN1cnNpdmVseSBwcm9wYWdhdGUgYW4gZXZlbnQgdXAgdGhlIHBhcmVudCBjaGFpbi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZGlzcGF0Y2ggPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gdGhpcy4kZW1pdC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIGlmICghc2hvdWxkUHJvcGFnYXRlKSByZXR1cm47XG4gICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAvLyB1c2Ugb2JqZWN0IGV2ZW50IHRvIGluZGljYXRlIG5vbi1zb3VyY2UgZW1pdFxuICAgIC8vIG9uIHBhcmVudHNcbiAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG4gICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgc2hvdWxkUHJvcGFnYXRlID0gcGFyZW50LiRlbWl0LmFwcGx5KHBhcmVudCwgYXJncyk7XG4gICAgICBwYXJlbnQgPSBzaG91bGRQcm9wYWdhdGUgPyBwYXJlbnQuJHBhcmVudCA6IG51bGw7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNb2RpZnkgdGhlIGxpc3RlbmVyIGNvdW50cyBvbiBhbGwgcGFyZW50cy5cbiAgICogVGhpcyBib29ra2VlcGluZyBhbGxvd3MgJGJyb2FkY2FzdCB0byByZXR1cm4gZWFybHkgd2hlblxuICAgKiBubyBjaGlsZCBoYXMgbGlzdGVuZWQgdG8gYSBjZXJ0YWluIGV2ZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7TnVtYmVyfSBjb3VudFxuICAgKi9cblxuICB2YXIgaG9va1JFID0gL15ob29rOi87XG4gIGZ1bmN0aW9uIG1vZGlmeUxpc3RlbmVyQ291bnQodm0sIGV2ZW50LCBjb3VudCkge1xuICAgIHZhciBwYXJlbnQgPSB2bS4kcGFyZW50O1xuICAgIC8vIGhvb2tzIGRvIG5vdCBnZXQgYnJvYWRjYXN0ZWQgc28gbm8gbmVlZFxuICAgIC8vIHRvIGRvIGJvb2trZWVwaW5nIGZvciB0aGVtXG4gICAgaWYgKCFwYXJlbnQgfHwgIWNvdW50IHx8IGhvb2tSRS50ZXN0KGV2ZW50KSkgcmV0dXJuO1xuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdID0gKHBhcmVudC5fZXZlbnRzQ291bnRbZXZlbnRdIHx8IDApICsgY291bnQ7XG4gICAgICBwYXJlbnQgPSBwYXJlbnQuJHBhcmVudDtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gbGlmZWN5Y2xlQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIFNldCBpbnN0YW5jZSB0YXJnZXQgZWxlbWVudCBhbmQga2ljayBvZmYgdGhlIGNvbXBpbGF0aW9uXG4gICAqIHByb2Nlc3MuIFRoZSBwYXNzZWQgaW4gYGVsYCBjYW4gYmUgYSBzZWxlY3RvciBzdHJpbmcsIGFuXG4gICAqIGV4aXN0aW5nIEVsZW1lbnQsIG9yIGEgRG9jdW1lbnRGcmFnbWVudCAoZm9yIGJsb2NrXG4gICAqIGluc3RhbmNlcykuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fHN0cmluZ30gZWxcbiAgICogQHB1YmxpY1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRtb3VudCA9IGZ1bmN0aW9uIChlbCkge1xuICAgIGlmICh0aGlzLl9pc0NvbXBpbGVkKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJyRtb3VudCgpIHNob3VsZCBiZSBjYWxsZWQgb25seSBvbmNlLicsIHRoaXMpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBlbCA9IHF1ZXJ5KGVsKTtcbiAgICBpZiAoIWVsKSB7XG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIH1cbiAgICB0aGlzLl9jb21waWxlKGVsKTtcbiAgICB0aGlzLl9pbml0RE9NSG9va3MoKTtcbiAgICBpZiAoaW5Eb2ModGhpcy4kZWwpKSB7XG4gICAgICB0aGlzLl9jYWxsSG9vaygnYXR0YWNoZWQnKTtcbiAgICAgIHJlYWR5LmNhbGwodGhpcyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJG9uY2UoJ2hvb2s6YXR0YWNoZWQnLCByZWFkeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBNYXJrIGFuIGluc3RhbmNlIGFzIHJlYWR5LlxuICAgKi9cblxuICBmdW5jdGlvbiByZWFkeSgpIHtcbiAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9pc1JlYWR5ID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsSG9vaygncmVhZHknKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUZWFyZG93biB0aGUgaW5zdGFuY2UsIHNpbXBseSBkZWxlZ2F0ZSB0byB0aGUgaW50ZXJuYWxcbiAgICogX2Rlc3Ryb3kuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJDbGVhbnVwXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGRlc3Ryb3kgPSBmdW5jdGlvbiAocmVtb3ZlLCBkZWZlckNsZWFudXApIHtcbiAgICB0aGlzLl9kZXN0cm95KHJlbW92ZSwgZGVmZXJDbGVhbnVwKTtcbiAgfTtcblxuICAvKipcbiAgICogUGFydGlhbGx5IGNvbXBpbGUgYSBwaWVjZSBvZiBET00gYW5kIHJldHVybiBhXG4gICAqIGRlY29tcGlsZSBmdW5jdGlvbi5cbiAgICpcbiAgICogQHBhcmFtIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9IGVsXG4gICAqIEBwYXJhbSB7VnVlfSBbaG9zdF1cbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAgICogQHBhcmFtIHtGcmFnbWVudH0gW2ZyYWddXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRjb21waWxlID0gZnVuY3Rpb24gKGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIHJldHVybiBjb21waWxlKGVsLCB0aGlzLiRvcHRpb25zLCB0cnVlKSh0aGlzLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICB9O1xufVxuXG4vKipcbiAqIFRoZSBleHBvc2VkIFZ1ZSBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBBUEkgY29udmVudGlvbnM6XG4gKiAtIHB1YmxpYyBBUEkgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGAkYFxuICogLSBpbnRlcm5hbCBtZXRob2RzL3Byb3BlcnRpZXMgYXJlIHByZWZpeGVkIHdpdGggYF9gXG4gKiAtIG5vbi1wcmVmaXhlZCBwcm9wZXJ0aWVzIGFyZSBhc3N1bWVkIHRvIGJlIHByb3hpZWQgdXNlclxuICogICBkYXRhLlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICogQHB1YmxpY1xuICovXG5cbmZ1bmN0aW9uIFZ1ZShvcHRpb25zKSB7XG4gIHRoaXMuX2luaXQob3B0aW9ucyk7XG59XG5cbi8vIGluc3RhbGwgaW50ZXJuYWxzXG5pbml0TWl4aW4oVnVlKTtcbnN0YXRlTWl4aW4oVnVlKTtcbmV2ZW50c01peGluKFZ1ZSk7XG5saWZlY3ljbGVNaXhpbihWdWUpO1xubWlzY01peGluKFZ1ZSk7XG5cbi8vIGluc3RhbGwgaW5zdGFuY2UgQVBJc1xuZGF0YUFQSShWdWUpO1xuZG9tQVBJKFZ1ZSk7XG5ldmVudHNBUEkoVnVlKTtcbmxpZmVjeWNsZUFQSShWdWUpO1xuXG52YXIgc2xvdCA9IHtcblxuICBwcmlvcml0eTogU0xPVCxcbiAgcGFyYW1zOiBbJ25hbWUnXSxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIHRoaXMgd2FzIHJlc29sdmVkIGR1cmluZyBjb21wb25lbnQgdHJhbnNjbHVzaW9uXG4gICAgdmFyIG5hbWUgPSB0aGlzLnBhcmFtcy5uYW1lIHx8ICdkZWZhdWx0JztcbiAgICB2YXIgY29udGVudCA9IHRoaXMudm0uX3Nsb3RDb250ZW50cyAmJiB0aGlzLnZtLl9zbG90Q29udGVudHNbbmFtZV07XG4gICAgaWYgKCFjb250ZW50IHx8ICFjb250ZW50Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgdGhpcy5mYWxsYmFjaygpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmNvbXBpbGUoY29udGVudC5jbG9uZU5vZGUodHJ1ZSksIHRoaXMudm0uX2NvbnRleHQsIHRoaXMudm0pO1xuICAgIH1cbiAgfSxcblxuICBjb21waWxlOiBmdW5jdGlvbiBjb21waWxlKGNvbnRlbnQsIGNvbnRleHQsIGhvc3QpIHtcbiAgICBpZiAoY29udGVudCAmJiBjb250ZXh0KSB7XG4gICAgICBpZiAodGhpcy5lbC5oYXNDaGlsZE5vZGVzKCkgJiYgY29udGVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSAmJiBjb250ZW50LmNoaWxkTm9kZXNbMF0ubm9kZVR5cGUgPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgICAgIC8vIGlmIHRoZSBpbnNlcnRlZCBzbG90IGhhcyB2LWlmXG4gICAgICAgIC8vIGluamVjdCBmYWxsYmFjayBjb250ZW50IGFzIHRoZSB2LWVsc2VcbiAgICAgICAgdmFyIGVsc2VCbG9jayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RlbXBsYXRlJyk7XG4gICAgICAgIGVsc2VCbG9jay5zZXRBdHRyaWJ1dGUoJ3YtZWxzZScsICcnKTtcbiAgICAgICAgZWxzZUJsb2NrLmlubmVySFRNTCA9IHRoaXMuZWwuaW5uZXJIVE1MO1xuICAgICAgICAvLyB0aGUgZWxzZSBibG9jayBzaG91bGQgYmUgY29tcGlsZWQgaW4gY2hpbGQgc2NvcGVcbiAgICAgICAgZWxzZUJsb2NrLl9jb250ZXh0ID0gdGhpcy52bTtcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChlbHNlQmxvY2spO1xuICAgICAgfVxuICAgICAgdmFyIHNjb3BlID0gaG9zdCA/IGhvc3QuX3Njb3BlIDogdGhpcy5fc2NvcGU7XG4gICAgICB0aGlzLnVubGluayA9IGNvbnRleHQuJGNvbXBpbGUoY29udGVudCwgaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIH1cbiAgICBpZiAoY29udGVudCkge1xuICAgICAgcmVwbGFjZSh0aGlzLmVsLCBjb250ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVtb3ZlKHRoaXMuZWwpO1xuICAgIH1cbiAgfSxcblxuICBmYWxsYmFjazogZnVuY3Rpb24gZmFsbGJhY2soKSB7XG4gICAgdGhpcy5jb21waWxlKGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpLCB0aGlzLnZtKTtcbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAodGhpcy51bmxpbmspIHtcbiAgICAgIHRoaXMudW5saW5rKCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcGFydGlhbCA9IHtcblxuICBwcmlvcml0eTogUEFSVElBTCxcblxuICBwYXJhbXM6IFsnbmFtZSddLFxuXG4gIC8vIHdhdGNoIGNoYW5nZXMgdG8gbmFtZSBmb3IgZHluYW1pYyBwYXJ0aWFsc1xuICBwYXJhbVdhdGNoZXJzOiB7XG4gICAgbmFtZTogZnVuY3Rpb24gbmFtZSh2YWx1ZSkge1xuICAgICAgdklmLnJlbW92ZS5jYWxsKHRoaXMpO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0KHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1wYXJ0aWFsJyk7XG4gICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG4gICAgdGhpcy5pbnNlcnQodGhpcy5wYXJhbXMubmFtZSk7XG4gIH0sXG5cbiAgaW5zZXJ0OiBmdW5jdGlvbiBpbnNlcnQoaWQpIHtcbiAgICB2YXIgcGFydGlhbCA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAncGFydGlhbHMnLCBpZCwgdHJ1ZSk7XG4gICAgaWYgKHBhcnRpYWwpIHtcbiAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgcGFydGlhbCk7XG4gICAgICB2SWYuaW5zZXJ0LmNhbGwodGhpcyk7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgZWxlbWVudERpcmVjdGl2ZXMgPSB7XG4gIHNsb3Q6IHNsb3QsXG4gIHBhcnRpYWw6IHBhcnRpYWxcbn07XG5cbnZhciBjb252ZXJ0QXJyYXkgPSB2Rm9yLl9wb3N0UHJvY2VzcztcblxuLyoqXG4gKiBMaW1pdCBmaWx0ZXIgZm9yIGFycmF5c1xuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBuXG4gKiBAcGFyYW0ge051bWJlcn0gb2Zmc2V0IChEZWNpbWFsIGV4cGVjdGVkKVxuICovXG5cbmZ1bmN0aW9uIGxpbWl0QnkoYXJyLCBuLCBvZmZzZXQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID8gcGFyc2VJbnQob2Zmc2V0LCAxMCkgOiAwO1xuICBuID0gdG9OdW1iZXIobik7XG4gIHJldHVybiB0eXBlb2YgbiA9PT0gJ251bWJlcicgPyBhcnIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBuKSA6IGFycjtcbn1cblxuLyoqXG4gKiBGaWx0ZXIgZmlsdGVyIGZvciBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2VhcmNoXG4gKiBAcGFyYW0ge1N0cmluZ30gW2RlbGltaXRlcl1cbiAqIEBwYXJhbSB7U3RyaW5nfSAuLi5kYXRhS2V5c1xuICovXG5cbmZ1bmN0aW9uIGZpbHRlckJ5KGFyciwgc2VhcmNoLCBkZWxpbWl0ZXIpIHtcbiAgYXJyID0gY29udmVydEFycmF5KGFycik7XG4gIGlmIChzZWFyY2ggPT0gbnVsbCkge1xuICAgIHJldHVybiBhcnI7XG4gIH1cbiAgaWYgKHR5cGVvZiBzZWFyY2ggPT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gYXJyLmZpbHRlcihzZWFyY2gpO1xuICB9XG4gIC8vIGNhc3QgdG8gbG93ZXJjYXNlIHN0cmluZ1xuICBzZWFyY2ggPSAoJycgKyBzZWFyY2gpLnRvTG93ZXJDYXNlKCk7XG4gIC8vIGFsbG93IG9wdGlvbmFsIGBpbmAgZGVsaW1pdGVyXG4gIC8vIGJlY2F1c2Ugd2h5IG5vdFxuICB2YXIgbiA9IGRlbGltaXRlciA9PT0gJ2luJyA/IDMgOiAyO1xuICAvLyBleHRyYWN0IGFuZCBmbGF0dGVuIGtleXNcbiAgdmFyIGtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCB0b0FycmF5KGFyZ3VtZW50cywgbikpO1xuICB2YXIgcmVzID0gW107XG4gIHZhciBpdGVtLCBrZXksIHZhbCwgajtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBhcnIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgaXRlbSA9IGFycltpXTtcbiAgICB2YWwgPSBpdGVtICYmIGl0ZW0uJHZhbHVlIHx8IGl0ZW07XG4gICAgaiA9IGtleXMubGVuZ3RoO1xuICAgIGlmIChqKSB7XG4gICAgICB3aGlsZSAoai0tKSB7XG4gICAgICAgIGtleSA9IGtleXNbal07XG4gICAgICAgIGlmIChrZXkgPT09ICcka2V5JyAmJiBjb250YWlucyhpdGVtLiRrZXksIHNlYXJjaCkgfHwgY29udGFpbnMoZ2V0UGF0aCh2YWwsIGtleSksIHNlYXJjaCkpIHtcbiAgICAgICAgICByZXMucHVzaChpdGVtKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoY29udGFpbnMoaXRlbSwgc2VhcmNoKSkge1xuICAgICAgcmVzLnB1c2goaXRlbSk7XG4gICAgfVxuICB9XG4gIHJldHVybiByZXM7XG59XG5cbi8qKlxuICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8QXJyYXk8U3RyaW5nPnxGdW5jdGlvbn0gLi4uc29ydEtleXNcbiAqIEBwYXJhbSB7TnVtYmVyfSBbb3JkZXJdXG4gKi9cblxuZnVuY3Rpb24gb3JkZXJCeShhcnIpIHtcbiAgdmFyIGNvbXBhcmF0b3IgPSBudWxsO1xuICB2YXIgc29ydEtleXMgPSB1bmRlZmluZWQ7XG4gIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuXG4gIC8vIGRldGVybWluZSBvcmRlciAobGFzdCBhcmd1bWVudClcbiAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cywgMSk7XG4gIHZhciBvcmRlciA9IGFyZ3NbYXJncy5sZW5ndGggLSAxXTtcbiAgaWYgKHR5cGVvZiBvcmRlciA9PT0gJ251bWJlcicpIHtcbiAgICBvcmRlciA9IG9yZGVyIDwgMCA/IC0xIDogMTtcbiAgICBhcmdzID0gYXJncy5sZW5ndGggPiAxID8gYXJncy5zbGljZSgwLCAtMSkgOiBhcmdzO1xuICB9IGVsc2Uge1xuICAgIG9yZGVyID0gMTtcbiAgfVxuXG4gIC8vIGRldGVybWluZSBzb3J0S2V5cyAmIGNvbXBhcmF0b3JcbiAgdmFyIGZpcnN0QXJnID0gYXJnc1swXTtcbiAgaWYgKCFmaXJzdEFyZykge1xuICAgIHJldHVybiBhcnI7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGZpcnN0QXJnID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gY3VzdG9tIGNvbXBhcmF0b3JcbiAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBmaXJzdEFyZyhhLCBiKSAqIG9yZGVyO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gc3RyaW5nIGtleXMuIGZsYXR0ZW4gZmlyc3RcbiAgICBzb3J0S2V5cyA9IEFycmF5LnByb3RvdHlwZS5jb25jYXQuYXBwbHkoW10sIGFyZ3MpO1xuICAgIGNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYiwgaSkge1xuICAgICAgaSA9IGkgfHwgMDtcbiAgICAgIHJldHVybiBpID49IHNvcnRLZXlzLmxlbmd0aCAtIDEgPyBiYXNlQ29tcGFyZShhLCBiLCBpKSA6IGJhc2VDb21wYXJlKGEsIGIsIGkpIHx8IGNvbXBhcmF0b3IoYSwgYiwgaSArIDEpO1xuICAgIH07XG4gIH1cblxuICBmdW5jdGlvbiBiYXNlQ29tcGFyZShhLCBiLCBzb3J0S2V5SW5kZXgpIHtcbiAgICB2YXIgc29ydEtleSA9IHNvcnRLZXlzW3NvcnRLZXlJbmRleF07XG4gICAgaWYgKHNvcnRLZXkpIHtcbiAgICAgIGlmIChzb3J0S2V5ICE9PSAnJGtleScpIHtcbiAgICAgICAgaWYgKGlzT2JqZWN0KGEpICYmICckdmFsdWUnIGluIGEpIGEgPSBhLiR2YWx1ZTtcbiAgICAgICAgaWYgKGlzT2JqZWN0KGIpICYmICckdmFsdWUnIGluIGIpIGIgPSBiLiR2YWx1ZTtcbiAgICAgIH1cbiAgICAgIGEgPSBpc09iamVjdChhKSA/IGdldFBhdGgoYSwgc29ydEtleSkgOiBhO1xuICAgICAgYiA9IGlzT2JqZWN0KGIpID8gZ2V0UGF0aChiLCBzb3J0S2V5KSA6IGI7XG4gICAgfVxuICAgIHJldHVybiBhID09PSBiID8gMCA6IGEgPiBiID8gb3JkZXIgOiAtb3JkZXI7XG4gIH1cblxuICAvLyBzb3J0IG9uIGEgY29weSB0byBhdm9pZCBtdXRhdGluZyBvcmlnaW5hbCBhcnJheVxuICByZXR1cm4gYXJyLnNsaWNlKCkuc29ydChjb21wYXJhdG9yKTtcbn1cblxuLyoqXG4gKiBTdHJpbmcgY29udGFpbiBoZWxwZXJcbiAqXG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuICovXG5cbmZ1bmN0aW9uIGNvbnRhaW5zKHZhbCwgc2VhcmNoKSB7XG4gIHZhciBpO1xuICBpZiAoaXNQbGFpbk9iamVjdCh2YWwpKSB7XG4gICAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBpZiAoY29udGFpbnModmFsW2tleXNbaV1dLCBzZWFyY2gpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc0FycmF5KHZhbCkpIHtcbiAgICBpID0gdmFsLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBpZiAoY29udGFpbnModmFsW2ldLCBzZWFyY2gpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmICh2YWwgIT0gbnVsbCkge1xuICAgIHJldHVybiB2YWwudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc2VhcmNoKSA+IC0xO1xuICB9XG59XG5cbnZhciBkaWdpdHNSRSA9IC8oXFxkezN9KSg/PVxcZCkvZztcblxuLy8gYXNzZXQgY29sbGVjdGlvbnMgbXVzdCBiZSBhIHBsYWluIG9iamVjdC5cbnZhciBmaWx0ZXJzID0ge1xuXG4gIG9yZGVyQnk6IG9yZGVyQnksXG4gIGZpbHRlckJ5OiBmaWx0ZXJCeSxcbiAgbGltaXRCeTogbGltaXRCeSxcblxuICAvKipcbiAgICogU3RyaW5naWZ5IHZhbHVlLlxuICAgKlxuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZW50XG4gICAqL1xuXG4gIGpzb246IHtcbiAgICByZWFkOiBmdW5jdGlvbiByZWFkKHZhbHVlLCBpbmRlbnQpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gdmFsdWUgOiBKU09OLnN0cmluZ2lmeSh2YWx1ZSwgbnVsbCwgYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBpbmRlbnQgOiAyKTtcbiAgICB9LFxuICAgIHdyaXRlOiBmdW5jdGlvbiB3cml0ZSh2YWx1ZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodmFsdWUpO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZXR1cm4gdmFsdWU7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiAnYWJjJyA9PiAnQWJjJ1xuICAgKi9cblxuICBjYXBpdGFsaXplOiBmdW5jdGlvbiBjYXBpdGFsaXplKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSAmJiB2YWx1ZSAhPT0gMCkgcmV0dXJuICcnO1xuICAgIHZhbHVlID0gdmFsdWUudG9TdHJpbmcoKTtcbiAgICByZXR1cm4gdmFsdWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB2YWx1ZS5zbGljZSgxKTtcbiAgfSxcblxuICAvKipcbiAgICogJ2FiYycgPT4gJ0FCQydcbiAgICovXG5cbiAgdXBwZXJjYXNlOiBmdW5jdGlvbiB1cHBlcmNhc2UodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvVXBwZXJDYXNlKCkgOiAnJztcbiAgfSxcblxuICAvKipcbiAgICogJ0FiQycgPT4gJ2FiYydcbiAgICovXG5cbiAgbG93ZXJjYXNlOiBmdW5jdGlvbiBsb3dlcmNhc2UodmFsdWUpIHtcbiAgICByZXR1cm4gdmFsdWUgfHwgdmFsdWUgPT09IDAgPyB2YWx1ZS50b1N0cmluZygpLnRvTG93ZXJDYXNlKCkgOiAnJztcbiAgfSxcblxuICAvKipcbiAgICogMTIzNDUgPT4gJDEyLDM0NS4wMFxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gc2lnblxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVjaW1hbHMgRGVjaW1hbCBwbGFjZXNcbiAgICovXG5cbiAgY3VycmVuY3k6IGZ1bmN0aW9uIGN1cnJlbmN5KHZhbHVlLCBfY3VycmVuY3ksIGRlY2ltYWxzKSB7XG4gICAgdmFsdWUgPSBwYXJzZUZsb2F0KHZhbHVlKTtcbiAgICBpZiAoIWlzRmluaXRlKHZhbHVlKSB8fCAhdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcbiAgICBfY3VycmVuY3kgPSBfY3VycmVuY3kgIT0gbnVsbCA/IF9jdXJyZW5jeSA6ICckJztcbiAgICBkZWNpbWFscyA9IGRlY2ltYWxzICE9IG51bGwgPyBkZWNpbWFscyA6IDI7XG4gICAgdmFyIHN0cmluZ2lmaWVkID0gTWF0aC5hYnModmFsdWUpLnRvRml4ZWQoZGVjaW1hbHMpO1xuICAgIHZhciBfaW50ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgwLCAtMSAtIGRlY2ltYWxzKSA6IHN0cmluZ2lmaWVkO1xuICAgIHZhciBpID0gX2ludC5sZW5ndGggJSAzO1xuICAgIHZhciBoZWFkID0gaSA+IDAgPyBfaW50LnNsaWNlKDAsIGkpICsgKF9pbnQubGVuZ3RoID4gMyA/ICcsJyA6ICcnKSA6ICcnO1xuICAgIHZhciBfZmxvYXQgPSBkZWNpbWFscyA/IHN0cmluZ2lmaWVkLnNsaWNlKC0xIC0gZGVjaW1hbHMpIDogJyc7XG4gICAgdmFyIHNpZ24gPSB2YWx1ZSA8IDAgPyAnLScgOiAnJztcbiAgICByZXR1cm4gc2lnbiArIF9jdXJyZW5jeSArIGhlYWQgKyBfaW50LnNsaWNlKGkpLnJlcGxhY2UoZGlnaXRzUkUsICckMSwnKSArIF9mbG9hdDtcbiAgfSxcblxuICAvKipcbiAgICogJ2l0ZW0nID0+ICdpdGVtcydcbiAgICpcbiAgICogQHBhcmFtc1xuICAgKiAgYW4gYXJyYXkgb2Ygc3RyaW5ncyBjb3JyZXNwb25kaW5nIHRvXG4gICAqICB0aGUgc2luZ2xlLCBkb3VibGUsIHRyaXBsZSAuLi4gZm9ybXMgb2YgdGhlIHdvcmQgdG9cbiAgICogIGJlIHBsdXJhbGl6ZWQuIFdoZW4gdGhlIG51bWJlciB0byBiZSBwbHVyYWxpemVkXG4gICAqICBleGNlZWRzIHRoZSBsZW5ndGggb2YgdGhlIGFyZ3MsIGl0IHdpbGwgdXNlIHRoZSBsYXN0XG4gICAqICBlbnRyeSBpbiB0aGUgYXJyYXkuXG4gICAqXG4gICAqICBlLmcuIFsnc2luZ2xlJywgJ2RvdWJsZScsICd0cmlwbGUnLCAnbXVsdGlwbGUnXVxuICAgKi9cblxuICBwbHVyYWxpemU6IGZ1bmN0aW9uIHBsdXJhbGl6ZSh2YWx1ZSkge1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgIHZhciBsZW5ndGggPSBhcmdzLmxlbmd0aDtcbiAgICBpZiAobGVuZ3RoID4gMSkge1xuICAgICAgdmFyIGluZGV4ID0gdmFsdWUgJSAxMCAtIDE7XG4gICAgICByZXR1cm4gaW5kZXggaW4gYXJncyA/IGFyZ3NbaW5kZXhdIDogYXJnc1tsZW5ndGggLSAxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIGFyZ3NbMF0gKyAodmFsdWUgPT09IDEgPyAnJyA6ICdzJyk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBEZWJvdW5jZSBhIGhhbmRsZXIgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlbGF5ID0gMzAwXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBkZWJvdW5jZTogZnVuY3Rpb24gZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpIHtcbiAgICBpZiAoIWhhbmRsZXIpIHJldHVybjtcbiAgICBpZiAoIWRlbGF5KSB7XG4gICAgICBkZWxheSA9IDMwMDtcbiAgICB9XG4gICAgcmV0dXJuIF9kZWJvdW5jZShoYW5kbGVyLCBkZWxheSk7XG4gIH1cbn07XG5cbmZ1bmN0aW9uIGluc3RhbGxHbG9iYWxBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogVnVlIGFuZCBldmVyeSBjb25zdHJ1Y3RvciB0aGF0IGV4dGVuZHMgVnVlIGhhcyBhblxuICAgKiBhc3NvY2lhdGVkIG9wdGlvbnMgb2JqZWN0LCB3aGljaCBjYW4gYmUgYWNjZXNzZWQgZHVyaW5nXG4gICAqIGNvbXBpbGF0aW9uIHN0ZXBzIGFzIGB0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnNgLlxuICAgKlxuICAgKiBUaGVzZSBjYW4gYmUgc2VlbiBhcyB0aGUgZGVmYXVsdCBvcHRpb25zIG9mIGV2ZXJ5XG4gICAqIFZ1ZSBpbnN0YW5jZS5cbiAgICovXG5cbiAgVnVlLm9wdGlvbnMgPSB7XG4gICAgZGlyZWN0aXZlczogZGlyZWN0aXZlcyxcbiAgICBlbGVtZW50RGlyZWN0aXZlczogZWxlbWVudERpcmVjdGl2ZXMsXG4gICAgZmlsdGVyczogZmlsdGVycyxcbiAgICB0cmFuc2l0aW9uczoge30sXG4gICAgY29tcG9uZW50czoge30sXG4gICAgcGFydGlhbHM6IHt9LFxuICAgIHJlcGxhY2U6IHRydWVcbiAgfTtcblxuICAvKipcbiAgICogRXhwb3NlIHVzZWZ1bCBpbnRlcm5hbHNcbiAgICovXG5cbiAgVnVlLnV0aWwgPSB1dGlsO1xuICBWdWUuY29uZmlnID0gY29uZmlnO1xuICBWdWUuc2V0ID0gc2V0O1xuICBWdWVbJ2RlbGV0ZSddID0gZGVsO1xuICBWdWUubmV4dFRpY2sgPSBuZXh0VGljaztcblxuICAvKipcbiAgICogVGhlIGZvbGxvd2luZyBhcmUgZXhwb3NlZCBmb3IgYWR2YW5jZWQgdXNhZ2UgLyBwbHVnaW5zXG4gICAqL1xuXG4gIFZ1ZS5jb21waWxlciA9IGNvbXBpbGVyO1xuICBWdWUuRnJhZ21lbnRGYWN0b3J5ID0gRnJhZ21lbnRGYWN0b3J5O1xuICBWdWUuaW50ZXJuYWxEaXJlY3RpdmVzID0gaW50ZXJuYWxEaXJlY3RpdmVzO1xuICBWdWUucGFyc2VycyA9IHtcbiAgICBwYXRoOiBwYXRoLFxuICAgIHRleHQ6IHRleHQsXG4gICAgdGVtcGxhdGU6IHRlbXBsYXRlLFxuICAgIGRpcmVjdGl2ZTogZGlyZWN0aXZlLFxuICAgIGV4cHJlc3Npb246IGV4cHJlc3Npb25cbiAgfTtcblxuICAvKipcbiAgICogRWFjaCBpbnN0YW5jZSBjb25zdHJ1Y3RvciwgaW5jbHVkaW5nIFZ1ZSwgaGFzIGEgdW5pcXVlXG4gICAqIGNpZC4gVGhpcyBlbmFibGVzIHVzIHRvIGNyZWF0ZSB3cmFwcGVkIFwiY2hpbGRcbiAgICogY29uc3RydWN0b3JzXCIgZm9yIHByb3RvdHlwYWwgaW5oZXJpdGFuY2UgYW5kIGNhY2hlIHRoZW0uXG4gICAqL1xuXG4gIFZ1ZS5jaWQgPSAwO1xuICB2YXIgY2lkID0gMTtcblxuICAvKipcbiAgICogQ2xhc3MgaW5oZXJpdGFuY2VcbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IGV4dGVuZE9wdGlvbnNcbiAgICovXG5cbiAgVnVlLmV4dGVuZCA9IGZ1bmN0aW9uIChleHRlbmRPcHRpb25zKSB7XG4gICAgZXh0ZW5kT3B0aW9ucyA9IGV4dGVuZE9wdGlvbnMgfHwge307XG4gICAgdmFyIFN1cGVyID0gdGhpcztcbiAgICB2YXIgaXNGaXJzdEV4dGVuZCA9IFN1cGVyLmNpZCA9PT0gMDtcbiAgICBpZiAoaXNGaXJzdEV4dGVuZCAmJiBleHRlbmRPcHRpb25zLl9DdG9yKSB7XG4gICAgICByZXR1cm4gZXh0ZW5kT3B0aW9ucy5fQ3RvcjtcbiAgICB9XG4gICAgdmFyIG5hbWUgPSBleHRlbmRPcHRpb25zLm5hbWUgfHwgU3VwZXIub3B0aW9ucy5uYW1lO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICBpZiAoIS9eW2EtekEtWl1bXFx3LV0qJC8udGVzdChuYW1lKSkge1xuICAgICAgICB3YXJuKCdJbnZhbGlkIGNvbXBvbmVudCBuYW1lOiBcIicgKyBuYW1lICsgJ1wiLiBDb21wb25lbnQgbmFtZXMgJyArICdjYW4gb25seSBjb250YWluIGFscGhhbnVtZXJpYyBjaGFyYWNhdGVycyBhbmQgdGhlIGh5cGhlbi4nKTtcbiAgICAgICAgbmFtZSA9IG51bGw7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBTdWIgPSBjcmVhdGVDbGFzcyhuYW1lIHx8ICdWdWVDb21wb25lbnQnKTtcbiAgICBTdWIucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShTdXBlci5wcm90b3R5cGUpO1xuICAgIFN1Yi5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBTdWI7XG4gICAgU3ViLmNpZCA9IGNpZCsrO1xuICAgIFN1Yi5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFN1cGVyLm9wdGlvbnMsIGV4dGVuZE9wdGlvbnMpO1xuICAgIFN1Ylsnc3VwZXInXSA9IFN1cGVyO1xuICAgIC8vIGFsbG93IGZ1cnRoZXIgZXh0ZW5zaW9uXG4gICAgU3ViLmV4dGVuZCA9IFN1cGVyLmV4dGVuZDtcbiAgICAvLyBjcmVhdGUgYXNzZXQgcmVnaXN0ZXJzLCBzbyBleHRlbmRlZCBjbGFzc2VzXG4gICAgLy8gY2FuIGhhdmUgdGhlaXIgcHJpdmF0ZSBhc3NldHMgdG9vLlxuICAgIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgICBTdWJbdHlwZV0gPSBTdXBlclt0eXBlXTtcbiAgICB9KTtcbiAgICAvLyBlbmFibGUgcmVjdXJzaXZlIHNlbGYtbG9va3VwXG4gICAgaWYgKG5hbWUpIHtcbiAgICAgIFN1Yi5vcHRpb25zLmNvbXBvbmVudHNbbmFtZV0gPSBTdWI7XG4gICAgfVxuICAgIC8vIGNhY2hlIGNvbnN0cnVjdG9yXG4gICAgaWYgKGlzRmlyc3RFeHRlbmQpIHtcbiAgICAgIGV4dGVuZE9wdGlvbnMuX0N0b3IgPSBTdWI7XG4gICAgfVxuICAgIHJldHVybiBTdWI7XG4gIH07XG5cbiAgLyoqXG4gICAqIEEgZnVuY3Rpb24gdGhhdCByZXR1cm5zIGEgc3ViLWNsYXNzIGNvbnN0cnVjdG9yIHdpdGggdGhlXG4gICAqIGdpdmVuIG5hbWUuIFRoaXMgZ2l2ZXMgdXMgbXVjaCBuaWNlciBvdXRwdXQgd2hlblxuICAgKiBsb2dnaW5nIGluc3RhbmNlcyBpbiB0aGUgY29uc29sZS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7RnVuY3Rpb259XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNyZWF0ZUNsYXNzKG5hbWUpIHtcbiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby1uZXctZnVuYyAqL1xuICAgIHJldHVybiBuZXcgRnVuY3Rpb24oJ3JldHVybiBmdW5jdGlvbiAnICsgY2xhc3NpZnkobmFtZSkgKyAnIChvcHRpb25zKSB7IHRoaXMuX2luaXQob3B0aW9ucykgfScpKCk7XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1uZXctZnVuYyAqL1xuICB9XG5cbiAgLyoqXG4gICAqIFBsdWdpbiBzeXN0ZW1cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IHBsdWdpblxuICAgKi9cblxuICBWdWUudXNlID0gZnVuY3Rpb24gKHBsdWdpbikge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChwbHVnaW4uaW5zdGFsbGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGFkZGl0aW9uYWwgcGFyYW1ldGVyc1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICAgIGFyZ3MudW5zaGlmdCh0aGlzKTtcbiAgICBpZiAodHlwZW9mIHBsdWdpbi5pbnN0YWxsID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBwbHVnaW4uaW5zdGFsbC5hcHBseShwbHVnaW4sIGFyZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbHVnaW4uYXBwbHkobnVsbCwgYXJncyk7XG4gICAgfVxuICAgIHBsdWdpbi5pbnN0YWxsZWQgPSB0cnVlO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBcHBseSBhIGdsb2JhbCBtaXhpbiBieSBtZXJnaW5nIGl0IGludG8gdGhlIGRlZmF1bHRcbiAgICogb3B0aW9ucy5cbiAgICovXG5cbiAgVnVlLm1peGluID0gZnVuY3Rpb24gKG1peGluKSB7XG4gICAgVnVlLm9wdGlvbnMgPSBtZXJnZU9wdGlvbnMoVnVlLm9wdGlvbnMsIG1peGluKTtcbiAgfTtcblxuICAvKipcbiAgICogQ3JlYXRlIGFzc2V0IHJlZ2lzdHJhdGlvbiBtZXRob2RzIHdpdGggdGhlIGZvbGxvd2luZ1xuICAgKiBzaWduYXR1cmU6XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICAgKiBAcGFyYW0geyp9IGRlZmluaXRpb25cbiAgICovXG5cbiAgY29uZmlnLl9hc3NldFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHtcbiAgICBWdWVbdHlwZV0gPSBmdW5jdGlvbiAoaWQsIGRlZmluaXRpb24pIHtcbiAgICAgIGlmICghZGVmaW5pdGlvbikge1xuICAgICAgICByZXR1cm4gdGhpcy5vcHRpb25zW3R5cGUgKyAncyddW2lkXTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiAoY29tbW9uVGFnUkUudGVzdChpZCkgfHwgcmVzZXJ2ZWRUYWdSRS50ZXN0KGlkKSkpIHtcbiAgICAgICAgICAgIHdhcm4oJ0RvIG5vdCB1c2UgYnVpbHQtaW4gb3IgcmVzZXJ2ZWQgSFRNTCBlbGVtZW50cyBhcyBjb21wb25lbnQgJyArICdpZDogJyArIGlkKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGUgPT09ICdjb21wb25lbnQnICYmIGlzUGxhaW5PYmplY3QoZGVmaW5pdGlvbikpIHtcbiAgICAgICAgICBpZiAoIWRlZmluaXRpb24ubmFtZSkge1xuICAgICAgICAgICAgZGVmaW5pdGlvbi5uYW1lID0gaWQ7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmluaXRpb24gPSBWdWUuZXh0ZW5kKGRlZmluaXRpb24pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF0gPSBkZWZpbml0aW9uO1xuICAgICAgICByZXR1cm4gZGVmaW5pdGlvbjtcbiAgICAgIH1cbiAgICB9O1xuICB9KTtcblxuICAvLyBleHBvc2UgaW50ZXJuYWwgdHJhbnNpdGlvbiBBUElcbiAgZXh0ZW5kKFZ1ZS50cmFuc2l0aW9uLCB0cmFuc2l0aW9uKTtcbn1cblxuaW5zdGFsbEdsb2JhbEFQSShWdWUpO1xuXG5WdWUudmVyc2lvbiA9ICcxLjAuMjYnO1xuXG4vLyBkZXZ0b29scyBnbG9iYWwgaG9va1xuLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbnNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICBpZiAoY29uZmlnLmRldnRvb2xzKSB7XG4gICAgaWYgKGRldnRvb2xzKSB7XG4gICAgICBkZXZ0b29scy5lbWl0KCdpbml0JywgVnVlKTtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgaW5Ccm93c2VyICYmIC9DaHJvbWVcXC9cXGQrLy50ZXN0KHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSkge1xuICAgICAgY29uc29sZS5sb2coJ0Rvd25sb2FkIHRoZSBWdWUgRGV2dG9vbHMgZm9yIGEgYmV0dGVyIGRldmVsb3BtZW50IGV4cGVyaWVuY2U6XFxuJyArICdodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWRldnRvb2xzJyk7XG4gICAgfVxuICB9XG59LCAwKTtcblxubW9kdWxlLmV4cG9ydHMgPSBWdWU7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vVnVlL2Rpc3QvdnVlLmNvbW1vbi5qc1xuICoqIG1vZHVsZSBpZCA9IDQzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuICAgIEBpbXBvcnQgJy4vYXBpLXRhYmxlJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL2FwaS10YWJsZS5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcHJvcHM6IHtcbiAgICBpdGVtczoge1xuICAgICAgdHlwZTogQXJyYXlcbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGluZGV4LnZ1ZT83ZmEzMGY2M1xuICoqLyIsIjx0ZW1wbGF0ZT5cbiAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cbiAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cbiAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5BbGVydDwvaDI+XG4gICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgIDxhbGVydCB0eXBlPVwiZXJyb3JcIj5UaGlzIGlzIGFuIGVycm9yIGFsZXJ0LjwvYWxlcnQ+XG4gICAgICAgICAgIDxhbGVydCB0eXBlPVwiaW5mb1wiPlRoaXMgaXMgYW4gaW5mbyBhbGVydC48L2FsZXJ0PlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIj5UaGlzIGlzIGEgc3VjY2VzcyBhbGVydC48L2FsZXJ0PlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6ZGlzbWlzc2libGU9XCJmYWxzZVwiPlRoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuPC9hbGVydD5cbiAgICAgICAgICAgPGFsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOm9uLWNsb3NlZD1cImRpc21pc3NDYWxsQmFja1wiPlRoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay48L2FsZXJ0PlxuICAgICAgICAgICA8YWxlcnQgdHlwZT1cImluZm9cIiA6dGltZW91dD1cIjUwMDBcIj5UaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy48L2FsZXJ0PlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4gICAgICAgICAgICZsdDthbGVydCB0eXBlPVwiZXJyb3JcIiZndDtUaGlzIGlzIGFuIGVycm9yIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XG4gICAgICAgICAgICZsdDthbGVydCB0eXBlPVwiaW5mb1wiJmd0O1RoaXMgaXMgYW4gaW5mbyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuICAgICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiZndDtUaGlzIGlzIGEgc3VjY2VzcyBhbGVydC4mbHQ7L2FsZXJ0Jmd0O1xuICAgICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6ZGlzbWlzc2libGU9XCJmYWxzZVwiJmd0O1RoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuJmx0Oy9hbGVydCZndDtcbiAgICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XCJzdWNjZXNzXCIgOm9uLWNsb3NlZD1cImRpc21pc3NDYWxsQmFja1wiJmd0O1RoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay4mbHQ7L2FsZXJ0Jmd0O1xuICAgICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cInN1Y2Nlc3NcIiA6dGltZW91dD1cIjUwMDBcIiZndDtUaGlzIGFsZXJ0IHNob3VsZCB0aW1lb3V0IGluIDUgc2Vjb25kcy4mbHQ7L2FsZXJ0Jmd0O1xuICAgICAgICAgICAgIDwvY29kZT5cbiAgICAgICAgICAgPC9wcmU+XG4gICAgICAgICA8L2NvbGxhcHNhYmxlLXBhbmVsPlxuICAgICAgPC9kaXY+XG4gICAgICA8aDMgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVwiPkFQSTwvaDM+XG4gICAgICA8ZGl2IGNsYXNzPVwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgIDxhcGktdGFibGUgOml0ZW1zPVwiYXBpSXRlbXNcIj48L2FwaS10YWJsZT5cbiAgICAgIDwvZGl2PlxuXG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBBcGlUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgQXBpVGFibGVcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZGlzbWlzc0NhbGxCYWNrKCkge1xuICAgICAgICBjb25zb2xlLmxvZygnYWxlcnQhISEnKTtcbiAgICAgIH0sXG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ3R5cGUnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgdHlwZSBvZiBhbGVydCAoZXJyb3IsIGluZm8sIHN1Y2Nlc3MpJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnZGlzbWlzc2libGUnLFxuICAgICAgICB0eXBlOiAnQm9vbGVhbicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiB0cnVlLFxuICAgICAgICBkZXNjOiAnSXMgdGhlIGFsZXJ0IGRpc21pc3NpYmxlPydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ3RpbWVvdXQnLFxuICAgICAgICB0eXBlOiAnTnVtYmVyJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6IC0xLFxuICAgICAgICBkZXNjOiAnVGhlIGR1cmF0aW9uIGFsZXJ0IHN0YXlzIG9uIHNjcmVlbiBpbiBtcydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ29uQ2xvc2VkJyxcbiAgICAgICAgdHlwZTogJ0Z1bmN0aW9uJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnQ2FsbGJhY2sgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIHdoZW4gYWxlcnQgaXMgY2xvc2VkLidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogYWxlcnQtcGFnZS52dWU/OTg2ZTM0MTBcbiAqKi8iLCI8dGVtcGxhdGU+XG4gIDxzZWN0aW9uIGNsYXNzPVwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XCI+XG4gICA8ZGl2IGNsYXNzPVwiaHlfby13cmFwcGVyXCI+XG4gICAgIDxoMiBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XCI+Q29sbGFwc2FibGUgUGFuZWw8L2gyPlxuICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cbiAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAxXCIgOmlzLW9wZW49XCJ0cnVlXCI+XG4gICAgICAgICAgICBQYW5lbCAxIGNvbnRlbnRcbiAgICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cblxuICAgICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAyXCI+XG4gICAgICAgICAgICBQYW5lbCAyIGNvbnRlbnRcbiAgICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuICAgICAgICAgICA8cHJlPlxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuICAgICAgICAgICAgICAgJmx0O2NvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiUGFuZWwgMVwiIDppcy1vcGVuPVwidHJ1ZVwiJmd0O1xuICAgICAgICAgICAgICAgICBQYW5lbCAxIGNvbnRlbnRcbiAgICAgICAgICAgICAgICZsdDsvY29sbGFwc2FibGUtcGFuZWwmZ3Q7XG4gICAgICAgICAgICAgICAmbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJQYW5lbCAyXCImZ3Q7XG4gICAgICAgICAgICAgICAgIFBhbmVsIDIgY29udGVudFxuICAgICAgICAgICAgICAgJmx0Oy9jb2xsYXBzYWJsZS1wYW5lbCZndDtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG4gICAgICA8L2Rpdj5cblxuICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgQXBpVGFibGUgZnJvbSAnLi4vY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50czoge1xuICAgIEFwaVRhYmxlXG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFwaUl0ZW1zOiBbe1xuICAgICAgICBuYW1lOiAnbGFiZWwnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgbGFibGUgb2YgdGhlIHBhbmVsJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnaXNPcGVuJyxcbiAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICAgIGRlc2M6ICdJcyB0aGUgcGFuZWwgb3Blbi4nXG4gICAgICB9XVxuICAgIH07XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGNvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlPzM0NTg2M2NlXG4gKiovIiwiPHRlbXBsYXRlPlxuICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPkxlZ2FsIFN5c3RlbTwvaDI+XG4gICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgIDxwIGNsYXNzPVwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcIj5cbiAgICAgICAgICAgICBMb3JlbSBpcHN1bTxsZWdhbC1jb3VudGVyXG4gICAgICAgICAgICAgICB2LW92ZXJsYXktb3BlbmVyPVwibGVnYWwtb3ZlcmxheVwiXG4gICAgICAgICAgICAgICBsZWdhbC1rZXk9XCJocy1yZWZlcnJhbC10ZXJtc1wiXG4gICAgICAgICAgICAgICBsZWdhbC1sYW5nPVwiZW5cIiBsZWdhbC1yZWdpb249XCJiY1wiXG4gICAgICAgICAgICAgICA+PC9sZWdhbC1jb3VudGVyPiBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LFxuICAgICAgICAgICAgIHNlZCBkbyBlaXVzbW9kIHRlbXBvciBpbmNpZGlkdW50IHV0IGxhYm9yZSBldCBkb2xvcmUgbWFnbmEgYWxpcXVhLlxuICAgICAgICAgICAgIDxsZWdhbC1jb3VudGVyXG4gICAgICAgICAgICAgICB2LW92ZXJsYXktb3BlbmVyPVwibGVnYWwtb3ZlcmxheVwiXG4gICAgICAgICAgICAgICBsZWdhbC1rZXk9XCIxLXllYXItb2ZmZXItc3RpbVwiXG4gICAgICAgICAgICAgICBsZWdhbC1sYW5nPVwiZW5cIiBsZWdhbC1yZWdpb249XCJiY1wiXG4gICAgICAgICAgICAgICA+PC9sZWdhbC1jb3VudGVyPlxuICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICAgPGxlZ2FsLWNvbnRhaW5lcj48L2xlZ2FsLWNvbnRhaW5lcj5cbiAgICAgICAgIDwvZGl2PlxuICAgICAgICAgPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVwiSFRNTFwiPlxuICAgICAgICAgICA8cHJlPlxuICAgICAgICAgICAgIDxjb2RlIGNsYXNzPVwibGFuZ3VhZ2UtaHRtbFwiPlxuICAgICAgICAgICAgICAgJmx0O2xlZ2FsLWNvdW50ZXImZ3Q7XG4gICAgICAgICAgICAgICAgICBsZWdhbC1rZXk9XCJocy1yZWZlcnJhbC10ZXJtc1wiXG4gICAgICAgICAgICAgICAgICBsZWdhbC1sYW5nPVwiZW5cIlxuICAgICAgICAgICAgICAgICAgbGVnYWwtcmVnaW9uPVwiYmNcIlxuICAgICAgICAgICAgICAgJmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xuICAgICAgICAgICAgICAgJmx0O2xlZ2FsLWNvbnRhaW5lciZndDsmbHQ7L2xlZ2FsLWNvbnRhaW5lciZndDtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cImphdmFzY3JpcHRcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWphdmFzY3JpcHRcIj5cbiAgICAgICAgICAgICAgIGxldCB2bSA9IG5ldyBWdWUoe1xuICAgICAgICAgICAgICAgICBlbDogJ2JvZHknLFxuICAgICAgICAgICAgICAgICBkYXRhKCkge1xuICAgICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgICBsaWdlckVuZFBvaW50OiAnaHR0cHM6Ly9hcGkuY21zLnRlbHVzLmNvbS9sZWdhbHMnLFxuICAgICAgICAgICAgICAgICAgICAgbGlnZXJBcHBsaWNhdGlvbktleTogJ2I5NzM4ZDY3Yjg5ZGZjNzgyNzQ2ZDRhOWNmNGExMDkzJ1xuICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgICAgICAgICAgICBMZWdhbENvdW50ZXIsXG4gICAgICAgICAgICAgICAgICAgTGVnYWxDb250YWluZXJcbiAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJOiBMZWdhbCBDb3VudGVyPC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuICAgICAgPC9kaXY+XG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuXG5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgQXBpVGFibGUgZnJvbSAnLi4vY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50czoge1xuICAgIEFwaVRhYmxlXG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGFwaUl0ZW1zOiBbe1xuICAgICAgICBuYW1lOiAnbGVnYWxLZXknLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICd0aGUga2V5IG9mIGxlZ2FsIGluIGNtcydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2xlZ2FsTGFuZycsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ3RoZSBsYW5ndWFnZSBvZiBsZWdhbCBpbiBjbXMnXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdsZWdhbFJlZ2lvbicsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ3RoZSByZWdpb24gb2YgbGVnYWwgaW4gY21zJ1xuICAgICAgfV1cbiAgICB9O1xuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBsZWdhbC1wYWdlLnZ1ZT82NzYzNzBiMlxuICoqLyIsIjx0ZW1wbGF0ZT5cbiAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cbiAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cbiAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5PdmVybGF5IFN5c3RlbTwvaDI+XG4gICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgIDxwPlxuICAgICAgICAgICAgIDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1cIm92ZXJsYXktMVwiIGNsYXNzPVwiaHlfYy1idXR0b24gaHlfYy1idXR0b24tLWxpbmsgaHlfdC1wdXJwbGVcIiB0eXBlPVwiYnV0dG9uXCIgcm9sZT1cImJ1dHRvblwiPlxuICAgICAgICAgICAgICAgT3BlbiBvdmVybGF5ICMxIDxpIGNsYXNzPVwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblwiPjwvaT5cbiAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgPC9wPlxuICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICA8YnV0dG9uIHYtb3ZlcmxheS1vcGVuZXI9XCJvdmVybGF5LTJcIiBjbGFzcz1cImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXCIgdHlwZT1cImJ1dHRvblwiIHJvbGU9XCJidXR0b25cIj5cbiAgICAgICAgICAgICAgIE9wZW4gb3ZlcmxheSAjMiA8aSBjbGFzcz1cImh5X2MtaWNvbiBoeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQgaHlfYy1idXR0b25fX2ljb25cIj48L2k+XG4gICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgPG92ZXJsYXktY29udGFpbmVyPlxuICAgICAgICAgICAgICAgICAgPG92ZXJsYXkgb3ZlcmxheS1rZXk9XCJvdmVybGF5LTFcIj5cbiAgICAgICAgICAgICAgICAgICAgPGg0IGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNFwiIHNsb3Q9XCJvdmVybGF5LWhlYWRlclwiPlRoaXMgaXMgb3ZlcmxheSAjMTwvaDQ+XG4gICAgICAgICAgICAgICAgICAgIDxhcnRpY2xlIHNsb3Q9XCJvdmVybGF5LWJvZHlcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIE92ZXJsYXkgIzEgYm9keVxuICAgICAgICAgICAgICAgICAgICA8L2FydGljbGU+XG4gICAgICAgICAgICAgICAgICA8L292ZXJsYXk+XG4gICAgICAgICAgICAgICAgICA8b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMlwiPlxuICAgICAgICAgICAgICAgICAgICA8aDQgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XCIgc2xvdD1cIm92ZXJsYXktaGVhZGVyXCI+VGhpcyBpcyBvdmVybGF5ICMyPC9oND5cbiAgICAgICAgICAgICAgICAgICAgPGFydGljbGUgc2xvdD1cIm92ZXJsYXktYm9keVwiPlxuICAgICAgICAgICAgICAgICAgICAgICAgT3ZlcmxheSAjMiBib2R5XG4gICAgICAgICAgICAgICAgICAgIDwvYXJ0aWNsZT5cbiAgICAgICAgICAgICAgICAgIDwvb3ZlcmxheT5cbiAgICAgICAgICA8L292ZXJsYXktY29udGFpbmVyPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4gICAgICAgICAgICAgICAmbHQ7b3ZlcmxheS1jb250YWluZXImZ3Q7XG4gICAgICAgICAgICAgICAgICZsdDtvdmVybGF5IG92ZXJsYXkta2V5PVwib3ZlcmxheS0xXCImZ3Q7XG4gICAgICAgICAgICAgICAgICAgJmx0O2g0ICBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcIiBzbG90PVwib3ZlcmxheS1oZWFkZXJcIiZndDtcbiAgICAgICAgICAgICAgICAgICBUaGlzIGlzIG92ZXJsYXkgIzFcbiAgICAgICAgICAgICAgICAgICAmbHQ7L2g0Jmd0O1xuICAgICAgICAgICAgICAgICAgICZsdDthcnRpY2xlIHNsb3Q9XCJvdmVybGF5LWJvZHlcIiZndDtcbiAgICAgICAgICAgICAgICAgICAgIE92ZXJsYXkgIzEgYm9keVxuICAgICAgICAgICAgICAgICAgICZsdDsvYXJ0aWNsZSZndDtcbiAgICAgICAgICAgICAgICAgJmx0Oy9vdmVybGF5Jmd0O1xuICAgICAgICAgICAgICAgICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cIm92ZXJsYXktMlwiJmd0O1xuICAgICAgICAgICAgICAgICAgICZsdDtoNCAgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XCIgc2xvdD1cIm92ZXJsYXktaGVhZGVyXCImZ3Q7XG4gICAgICAgICAgICAgICAgICAgVGhpcyBpcyBvdmVybGF5ICMxXG4gICAgICAgICAgICAgICAgICAgJmx0Oy9oNCZndDtcbiAgICAgICAgICAgICAgICAgICAmbHQ7YXJ0aWNsZSBzbG90PVwib3ZlcmxheS1ib2R5XCImZ3Q7XG4gICAgICAgICAgICAgICAgICAgICBPdmVybGF5ICMyIGJvZHlcbiAgICAgICAgICAgICAgICAgICAmbHQ7L2FydGljbGUmZ3Q7XG4gICAgICAgICAgICAgICAgICZsdDsvb3ZlcmxheSZndDtcbiAgICAgICAgICAgICAgICZsdDsvb3ZlcmxheS1jb250YWluZXImZ3Q7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuICAgICAgPC9kaXY+XG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuXG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IEFwaVRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBBcGlUYWJsZVxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ292ZXJsYXlLZXknLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUga2V5IG9mIHRoZSBvdmVybGF5LiBVc2VkIGJ5IHRoZSBvdmVybGF5IG9wZW5lciBkaXJlY3RpdmUgdG8gdGFyZ2V0IHRoZSBvdmVybGV5LidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogb3ZlcmxheS1wYWdlLnZ1ZT8wN2NjZDMwYlxuICoqLyIsIjx0ZW1wbGF0ZT5cbiAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cbiAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cbiAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5TcGlubmVyPC9oMj5cbiAgICAgPGhyIGNsYXNzPVwiaHlfdS1zcGFjZS1tYi0yXCI+XG4gICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXCI+XG4gICAgICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vX19jb250YWluZXJcIj5cbiAgICAgICAgICAgPGxhYmVsIGNsYXNzPVwiaHlfYy1jb250cm9sIGh5X2MtY29udHJvbC0tY2hlY2tib3hcIiA+XG4gICAgICAgICAgICA8c3BhbiBjbGFzcz1cImh5X2MtY29udHJvbF9fbGFiZWwtdGV4dFwiPkZ1bGwgU2NyZWVuPC9zcGFuPlxuICAgICAgICAgICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiICB2LW1vZGVsPVwiaXNGdWxsU2NyZWVuXCIgLz5cbiAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJoeV9jLWNvbnRyb2xfX2luZGljYXRvclwiPjwvZGl2PlxuICAgICAgICAgIDwvbGFiZWw+XG5cbiAgICAgICAgICA8YnV0dG9uIEBjbGljaz1cInNob3dTcGlubmVyXCIgY2xhc3M9XCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tcmFpc2VkIGh5X3QtZ3JlZW5cIiB0eXBlPVwiYnV0dG9uXCI+XG4gICAgICAgICAgICBTaG93IFNwaW5uZXJcbiAgICAgICAgICA8L2J1dHRvbj5cblxuXG5cbiAgICAgICAgICAgPHNwaW5uZXIgOmZ1bGwtc2NyZWVuPVwiaXNGdWxsU2NyZWVuXCIgOnRleHQ9XCJtc2dcIj48L3NwaW5uZXI+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cbiAgICAgICAgICAgPHByZT5cbiAgICAgICAgICAgICA8Y29kZSBjbGFzcz1cImxhbmd1YWdlLWh0bWxcIj5cbiAgICAgICAgICAgICAgICZsdDtzcGlubmVyIHRleHQ9XCJJIHdpbGwgY2xvc2UgaW4gMyBzZWNvbmRzXCIgOmZ1bGwtc2NyZWVuPVwidHJ1ZVwiJmd0OyZsdDsvc3Bpbm5lciZndDtcbiAgICAgICAgICAgICA8L2NvZGU+XG4gICAgICAgICAgIDwvcHJlPlxuICAgICAgICAgPC9jb2xsYXBzYWJsZS1wYW5lbD5cbiAgICAgIDwvZGl2PlxuICAgICAgPGgzIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcIj5BUEk8L2gzPlxuICAgICAgPGRpdiBjbGFzcz1cImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICA8YXBpLXRhYmxlIDppdGVtcz1cImFwaUl0ZW1zXCI+PC9hcGktdGFibGU+XG4gICAgICA8L2Rpdj5cblxuICAgPC9kaXY+XG4gIDwvc2VjdGlvbj5cbjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5pbXBvcnQgQXBpVGFibGUgZnJvbSAnLi4vY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlJztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgY29tcG9uZW50czoge1xuICAgIEFwaVRhYmxlXG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBzaG93U3Bpbm5lcigpIHtcbiAgICAgIHRoaXMuX3Jlc2V0TXNnKCk7XG4gICAgICB0aGlzLiRyb290LiRicm9hZGNhc3QoJ3Nob3c6OnNwaW5uZXInKTtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLiRyb290LiRicm9hZGNhc3QoJ2hpZGU6OnNwaW5uZXInKTtcbiAgICAgIH0sIDMwMDApO1xuICAgIH0sXG4gICAgX3Jlc2V0TXNnKCkge1xuICAgICAgbGV0IGNvdW50ZXIgPSAzO1xuICAgICAgbGV0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICBpZiAoY291bnRlciA+IDApIHtcbiAgICAgICAgICBjb3VudGVyIC0tO1xuICAgICAgICAgIHRoaXMubXNnID0gYEkgd2lsbCBjbG9zZSBpbiAke2NvdW50ZXJ9IHNlY29uZHNgO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgICAgICB9XG4gICAgICB9LCAxMDAwKTtcbiAgICAgIHRoaXMubXNnID0gYEkgd2lsbCBjbG9zZSBpbiAke2NvdW50ZXJ9IHNlY29uZHNgO1xuICAgIH1cbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbXNnOiAnJyxcbiAgICAgIGlzRnVsbFNjcmVlbjogZmFsc2UsXG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ2Z1bGxTY3JlZW4nLFxuICAgICAgICB0eXBlOiAnQm9vbGVhbicsXG4gICAgICAgIGlzUmVxdWlyZWQ6IGZhbHNlLFxuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgICAgZGVzYzogJ1Nob3VsZCB0aGUgc3Bpbm5lciB0YWtlIGZ1bGwgc2NyZWVuJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAndGV4dCcsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogJ1xcJ1xcJycsXG4gICAgICAgIGRlc2M6ICdUaGUgdGV4dCBvZiB0aGUgc3Bpbm5lci4gRGVmYXVsdCBlbXB0eSdcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ3Nob3c6OnNwaW5uZXInLFxuICAgICAgICB0eXBlOiAnRXZlbnQnLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdBY3RpdmUgdGhlIHNwaW5uZXInXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdoaWRlOjpzcGlubmVyJyxcbiAgICAgICAgdHlwZTogJ0V2ZW50JyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnSGlkZSB0aGUgc3Bpbm5lcidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3Bpbm5lci1wYWdlLnZ1ZT8zOWUwY2NkNFxuICoqLyIsIjx0ZW1wbGF0ZT5cbiAgPHNlY3Rpb24gY2xhc3M9XCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcIj5cbiAgIDxkaXYgY2xhc3M9XCJoeV9vLXdyYXBwZXJcIj5cbiAgICAgPGgyIGNsYXNzPVwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcIj5TdGVwIFRyYWNrZXI8L2gyPlxuICAgICA8aHIgY2xhc3M9XCJoeV91LXNwYWNlLW1iLTJcIj5cbiAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgIDxkaXYgY2xhc3M9XCJzZ19jLWRlbW9fX2NvbnRhaW5lclwiPlxuICAgICAgICAgICA8c3RlcC10cmFja2VyIDpjdXJyZW50LXN0ZXA9XCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXCIgOmNvbmZpZz1cInN0ZXBUcmFja2VyQ29uZmlnXCI+PC9zdGVwLXRyYWNrZXI+XG4gICAgICAgICA8L2Rpdj5cbiAgICAgICAgIDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cIkhUTUxcIj5cbiAgICAgICA8cHJlPlxuICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4gICAgICAgICAgJmx0O3N0ZXAtdHJhY2tlclxuICAgICAgICAgIDpjdXJyZW50LXN0ZXA9XCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXCJcbiAgICAgICAgICA6Y29uZmlnPVwic3RlcFRyYWNrZXJDb25maWdcIiZndDtcbiAgICAgICAgICAmbHQ7L3N0ZXAtdHJhY2tlciZndDtcbiAgICAgICAgIDwvY29kZT5cbiAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJqYXZhc2NyaXB0XCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1qc1wiPlxuICAgICAgICAgICAgICBsZXQgc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDI7XG4gICAgICAgICAgICAgIGxldCBzdGVwVHJhY2tlckNvbmZpZyA9IHtcbiAgICAgICAgICAgICAgICBpc0NsaWNrYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgICBzdGVwczogW1xuICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQScsXG4gICAgICAgICAgICAgICAgICAgIGxpbms6ICcnLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQicsXG4gICAgICAgICAgICAgICAgICAgIGxpbms6ICcnLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfSwge1xuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQycsXG4gICAgICAgICAgICAgICAgICAgIGxpbms6ICcnLFxuICAgICAgICAgICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgbGV0IHZtID0gbmV3IFZ1ZSh7XG4gICAgICAgICAgICAgICAgZWw6ICdib2R5JyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICBzdGVwVHJhY2tlckNvbmZpZyxcbiAgICAgICAgICAgICAgICAgIHN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBjb21wb25lbnRzOiB7XG4gICAgICAgICAgICAgICAgICBTdGVwVHJhY2tlclxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuICAgICAgPC9kaXY+XG4gICA8L2Rpdj5cbiAgPC9zZWN0aW9uPlxuPC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmltcG9ydCBBcGlUYWJsZSBmcm9tICcuLi9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWUnO1xuZXhwb3J0IGRlZmF1bHQge1xuICBjb21wb25lbnRzOiB7XG4gICAgQXBpVGFibGVcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RlcFRyYWNrZXJDdXJyZW50U3RlcDogMixcbiAgICAgIHN0ZXBUcmFja2VyQ29uZmlnOiB7XG4gICAgICAgIGlzQ2xpY2thYmxlOiB0cnVlLFxuICAgICAgICBzdGVwczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIHRpdGxlOiAnU3RlcCBBJyxcbiAgICAgICAgICAgIGxpbms6ICcnLFxuICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLnN0ZXBUcmFja2VyQ3VycmVudFN0ZXAgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgdGl0bGU6ICdTdGVwIEInLFxuICAgICAgICAgICAgbGluazogJycsXG4gICAgICAgICAgICBvbkNsaWNrSGFuZGxlcjogKGV2ZW50KSA9PiB7XG4gICAgICAgICAgICAgIHRoaXMuc3RlcFRyYWNrZXJDdXJyZW50U3RlcCA9IDE7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQycsXG4gICAgICAgICAgICBsaW5rOiAnJyxcbiAgICAgICAgICAgIG9uQ2xpY2tIYW5kbGVyOiAoZXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIF1cbiAgICAgIH0sXG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ2N1cnJlbnRTdGVwJyxcbiAgICAgICAgdHlwZTogJ0ludGVnZXInLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAwLFxuICAgICAgICBkZXNjOiAndG9kbydcbiAgICAgIH0sIHtcbiAgICAgICAgbmFtZTogJ2NvbmZpZycsXG4gICAgICAgIHR5cGU6ICdPYmplY3QnLFxuICAgICAgICBpc1JlcXVpcmVkOiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAnbi9hJyxcbiAgICAgICAgZGVzYzogJ3RvZG8nXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdjb25maWcudGl0bGUnLFxuICAgICAgICB0eXBlOiAnU3RyaW5nJyxcbiAgICAgICAgaXNSZXF1aXJlZDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgdGl0bGUgb2YgdGhlIHN0ZXAnXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdjb25maWcubGluaycsXG4gICAgICAgIHR5cGU6ICdTdHJpbmcnLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogJ24vYScsXG4gICAgICAgIGRlc2M6ICdUaGUgbGluayBvZiB0aGUgc3RlcC4gJ1xuICAgICAgfSwge1xuICAgICAgICBuYW1lOiAnY29uZmlnLm9uQ2xpY2tIYW5kbGVyJyxcbiAgICAgICAgdHlwZTogJ0Z1bmN0aW9uJyxcbiAgICAgICAgaXNSZXF1aXJlZDogZmFsc2UsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnVGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHdoZW4gc3RlcCBpcyBjbGlja2VkLidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogc3RlcC10cmFja2VyLXBhZ2UudnVlPzFkNGQ4MDUyXG4gKiovIiwiPHRlbXBsYXRlPlxuICA8c2VjdGlvbiBjbGFzcz1cImh5X2MtbW9kdWxlIGh5X3QtZ3JleVwiPlxuICAgPGRpdiBjbGFzcz1cImh5X28td3JhcHBlclwiPlxuICAgICA8aDIgY2xhc3M9XCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVwiPlRhYjwvaDI+XG4gICAgIDxociBjbGFzcz1cImh5X3Utc3BhY2UtbWItMlwiPlxuICAgICA8ZGl2IGNsYXNzPVwic2dfYy1kZW1vIGh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFwiPlxuICAgICAgICAgPGRpdiBjbGFzcz1cInNnX2MtZGVtb19fY29udGFpbmVyXCI+XG4gICAgICAgICAgIDx0YWJzPlxuICAgICAgICAgICAgIDx0YWIgbGFiZWw9XCJUYWIgMVwiPlxuICAgICAgICAgICAgICA8cD5cbiAgICAgICAgICAgICAgICBUYWIgMSBjb250ZW50XG4gICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICA8L3RhYj5cbiAgICAgICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIDJcIj5cbiAgICAgICAgICAgICAgIDxwPlxuICAgICAgICAgICAgICAgICBUYWIgMiBjb250ZW50XG4gICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgPC90YWI+XG4gICAgICAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiAzXCIgOmlzLWRpc2FibGVkPVwidHJ1ZVwiPlxuICAgICAgICAgICAgICAgPHA+XG4gICAgICAgICAgICAgICAgIFRhYiAzIGNvbnRlbnRcbiAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICA8L3RhYj5cbiAgICAgICAgICAgPC90YWJzPlxuICAgICAgICAgPC9kaXY+XG4gICAgICAgICA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XCJIVE1MXCI+XG4gICAgICAgICAgIDxwcmU+XG4gICAgICAgICAgICAgPGNvZGUgY2xhc3M9XCJsYW5ndWFnZS1odG1sXCI+XG4gICAgICAgICAgICAgICAmbHQ7dGFicyZndDtcbiAgICAgICAgICAgICAgICAgJmx0O3RhYiBsYWJlbD1cIlRhYiAxXCImZ3Q7XG4gICAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XG4gICAgICAgICAgICAgICAgICAgICBUYWIgMSBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgJmx0Oy9wJmd0O1xuICAgICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcbiAgICAgICAgICAgICAgICAgJmx0O3RhYiBsYWJlbD1cIlRhYiAyXCImZ3Q7XG4gICAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XG4gICAgICAgICAgICAgICAgICAgICBUYWIgMiBjb250ZW50XG4gICAgICAgICAgICAgICAgICAgJmx0Oy9wJmd0O1xuICAgICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcbiAgICAgICAgICAgICAgICAgJmx0O3RhYiBsYWJlbD1cIlRhYiAzXCIgOmlzLWRpc2FibGVkPVwidHJ1ZVwiJmd0O1xuICAgICAgICAgICAgICAgICAgICZsdDtwJmd0O1xuICAgICAgICAgICAgICAgICAgICAgVGFiIDMgY29udGVudFxuICAgICAgICAgICAgICAgICAgICZsdDsvcCZndDtcbiAgICAgICAgICAgICAgICAgJmx0Oy90YWImZ3Q7XG4gICAgICAgICAgICAgICAmbHQ7L3RhYnMmZ3Q7XG4gICAgICAgICAgICAgPC9jb2RlPlxuICAgICAgICAgICA8L3ByZT5cbiAgICAgICAgIDwvY29sbGFwc2FibGUtcGFuZWw+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxoMyBjbGFzcz1cImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XCI+QVBJPC9oMz5cbiAgICAgIDxkaXYgY2xhc3M9XCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcIj5cbiAgICAgICAgPGFwaS10YWJsZSA6aXRlbXM9XCJhcGlJdGVtc1wiPjwvYXBpLXRhYmxlPlxuICAgICAgPC9kaXY+XG5cbiAgIDwvZGl2PlxuICA8L3NlY3Rpb24+XG48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuaW1wb3J0IEFwaVRhYmxlIGZyb20gJy4uL2NvbXBvbmVudHMvYXBpLXRhYmxlL2luZGV4LnZ1ZSc7XG5leHBvcnQgZGVmYXVsdCB7XG4gIGNvbXBvbmVudHM6IHtcbiAgICBBcGlUYWJsZVxuICB9LFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBhcGlJdGVtczogW3tcbiAgICAgICAgbmFtZTogJ2xhYmVsJyxcbiAgICAgICAgdHlwZTogJ1N0cmluZycsXG4gICAgICAgIGlzUmVxdWlyZWQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICduL2EnLFxuICAgICAgICBkZXNjOiAnVGhlIGxhYmxlIG9mIHRoZSB0YWInXG4gICAgICB9LCB7XG4gICAgICAgIG5hbWU6ICdpc0Rpc2FibGVkJyxcbiAgICAgICAgdHlwZTogJ0Jvb2xlYW4nLFxuICAgICAgICBpc1JlcXVpcmVkOiBmYWxzZSxcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICAgIGRlc2M6ICdJcyB0aGUgdGFiIGRpc2FibGVkIG9yIG5vdC4gV2hlbiBzZXQgdG8gdHJ1ZSwgdGhlIHRhYiBpcyBub3QgY2xpY2thYmxlLidcbiAgICAgIH1dXG4gICAgfTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogdGFicy1wYWdlLnZ1ZT8xNGQ2MDkwZFxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL2NvbXBvbmVudHMvdWkvaWNvbic7XG4gICAgQGltcG9ydCAnLi4vLi4vdHJhbnNpdGlvbnMvZmFkZS5zY3NzJztcbiAgICBAaW1wb3J0ICcuL2FsZXJ0LnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vYWxlcnQuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG5leHBvcnQgZGVmYXVsdCB7XG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmlzaWJsZTogdHJ1ZVxuICAgIH07XG4gIH0sXG4gIHByb3BzOiB7XG4gICAgdHlwZToge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGRpc21pc3NpYmxlOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogdHJ1ZVxuICAgIH0sXG4gICAgdGltZW91dDoge1xuICAgICAgdHlwZTogTnVtYmVyLFxuICAgICAgZGVmYXVsdDogLTFcbiAgICB9LFxuICAgIG9uQ2xvc2VkOiB7XG4gICAgICB0eXBlOiBGdW5jdGlvblxuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGRpc21pc3MoKSB7XG4gICAgICB0aGlzLmlzVmlzaWJsZSA9IGZhbHNlO1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGlmICghIXRoaXMub25DbG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMub25DbG9zZWQuYXBwbHkodGhpcyk7XG4gICAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9LFxuICByZWFkeSgpIHtcbiAgICBpZiAodGhpcy50aW1lb3V0ID49IDApIHtcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICB0aGlzLmRpc21pc3MoKTtcbiAgICAgIH0sIHRoaXMudGltZW91dCk7XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBpbmRleC52dWU/NDk5ZmJlYWZcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9jb21wb25lbnRzL3VpL2ljb24nO1xuICAgIEBpbXBvcnQgJy4vY29sbGFwc2FibGUtcGFuZWwuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9jb2xsYXBzYWJsZS1wYW5lbC5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcHJvcHM6IHtcbiAgICBpc09wZW46IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZVxuICAgIH0sXG4gICAgbGFiZWw6IHtcbiAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgfVxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgdG9nZ2xlT3BlbigkZXZlbnQpIHtcbiAgICAgIHRoaXMuaXNPcGVuID0gIXRoaXMuaXNPcGVuO1xuICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogaW5kZXgudnVlPzA1YzIyODcwXG4gKiovIiwiXG48c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJy4vbGVnYWwtY29udGFpbmVyLnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vbGVnYWwtY29udGFpbmVyLmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuIC8qXG4gICogQVBJOiA8bGVnYWwtY29udGFpbmVyPjwvbGVnYWwtY29udGFpbmVyPlxuICovXG5cbmltcG9ydCBtaXhpbnMgZnJvbSAnLi4vLi4vbWl4aW5zJztcbmltcG9ydCBmaW5kSW5kZXggZnJvbSAnbG9kYXNoL2ZpbmRJbmRleCc7XG5pbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoL2RlYm91bmNlJztcbmltcG9ydCBzZXRGb2N1cyBmcm9tICcuLi8uLi9kaXJlY3RpdmVzL3NldC1mb2N1cyc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbWl4aW5zLFxuICBkaXJlY3RpdmVzOiB7XG4gICAgc2V0Rm9jdXNcbiAgfSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgaW5kZXhlZExlZ2FsczogW10sXG4gICAgICBub25JbmRleGVkTGVnYWxzOiBbXSxcbiAgICAgIGFwaUxhbmc6IG51bGwsXG4gICAgICBhcGlSZWdpb246IG51bGxcbiAgICB9O1xuICB9LFxuICBtZXRob2RzOiB7XG4gICAgZmV0Y2hMZWdhbHMoa2V5cykge1xuICAgICAgcmV0dXJuIGZldGNoKGBcbiAgICAgICAgICAke3RoaXMuJHJvb3QubGlnZXJFbmRQb2ludH0/bGFuZz0ke3RoaXMuYXBpTGFuZ30mcmVnaW9uPSR7dGhpcy5hcGlSZWdpb259Jmh0bWw9dHJ1ZVxuICAgICAgICBgLCB7XG4gICAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICAgICBhcHBsaWNhdGlvbktleTogdGhpcy4kcm9vdC5saWdlckFwcGxpY2F0aW9uS2V5XG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgICBrZXlzOiBrZXlzXG4gICAgICAgIH0pXG4gICAgICB9KTtcbiAgICB9LFxuICAgIGFwcGVuZFJlc3BvbnNlVG9MZWdhbENvbnRhaW5lcih0eXBlLCBkYXRhKSB7XG4gICAgICBsZXQgcHJvY2VzcyA9ICh0YXJnZXQsIGRhdGFBcnkpID0+IHtcbiAgICAgICAgZGF0YUFyeS5mb3JFYWNoKGxlZ2FsUmVzcG9uc2UgPT4ge1xuICAgICAgICAgIGxldCBpbmRleCA9IHRhcmdldC5maW5kSW5kZXgobCA9PiBsLmtleSA9PT0gbGVnYWxSZXNwb25zZS5rZXkpO1xuICAgICAgICAgIGlmIChpbmRleCA+IC0xKSB7XG4gICAgICAgICAgICB0YXJnZXQuJHNldChpbmRleCwge1xuICAgICAgICAgICAgICBjb250ZW50OiBsZWdhbFJlc3BvbnNlLmNvbnRlbnQsXG4gICAgICAgICAgICAgIGtleTogbGVnYWxSZXNwb25zZS5rZXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9O1xuICAgICAgaWYgKHR5cGUgPT09ICdpbmRleGVkJykge1xuICAgICAgICBwcm9jZXNzKHRoaXMuaW5kZXhlZExlZ2FscywgZGF0YSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwcm9jZXNzKHRoaXMubm9uSW5kZXhlZExlZ2FscywgZGF0YSk7XG4gICAgICB9XG4gICAgfSxcbiAgICBnZXRMZWdhbHM6IChmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBkZWJvdW5jZS5jYWxsKHRoaXMsIGZ1bmN0aW9uKCkge1xuICAgICAgICBsZXQgaW5kZXhlZEtleXMgPSB0aGlzLmluZGV4ZWRMZWdhbHMubWFwKGxlZ2FsID0+IGxlZ2FsLmtleSk7XG4gICAgICAgIGxldCBub25JbmRleGVkS2V5cyA9IHRoaXMubm9uSW5kZXhlZExlZ2Fscy5tYXAobGVnYWwgPT4gbGVnYWwua2V5KTtcblxuICAgICAgICBpZiAoaW5kZXhlZEtleXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIHRoaXMuZmV0Y2hMZWdhbHMoaW5kZXhlZEtleXMpXG4gICAgICAgICAgLnRoZW4odGhpcy5wYXJzZUpTT04pXG4gICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcGVuZFJlc3BvbnNlVG9MZWdhbENvbnRhaW5lcignaW5kZXhlZCcsIGRhdGEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGlmIChub25JbmRleGVkS2V5cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgdGhpcy5mZXRjaExlZ2Fscyhub25JbmRleGVkS2V5cylcbiAgICAgICAgICAudGhlbih0aGlzLnBhcnNlSlNPTilcbiAgICAgICAgICAudGhlbihkYXRhID0+IHtcbiAgICAgICAgICAgIHRoaXMuYXBwZW5kUmVzcG9uc2VUb0xlZ2FsQ29udGFpbmVyKCdub25JbmRleGVkJywgZGF0YSk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sIDEwKTtcbiAgICB9KSgpXG4gIH0sXG4gIGV2ZW50czoge1xuICAgICdsZWdhbDo6Y2xpY2snKGxlZ2FsS2V5KSB7XG4gICAgICBsZXQgdGFyZ2V0TGVnYWxJbmRleCA9IHRoaXMuaW5kZXhlZExlZ2Fscy5maW5kSW5kZXgobCA9PiBsLmtleSA9PT0gbGVnYWxLZXkpO1xuICAgICAgaWYgKHRhcmdldExlZ2FsSW5kZXggPiAtMSkge1xuICAgICAgICB0aGlzLmluZGV4ZWRMZWdhbHMuZm9yRWFjaCgobCwgaSkgPT4ge1xuICAgICAgICAgIGlmIChpICE9PSB0YXJnZXRMZWdhbEluZGV4KSB7XG4gICAgICAgICAgICBsLmlzU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5pbmRleGVkTGVnYWxzXG4gICAgICAgICAgICAuJHNldChcbiAgICAgICAgICAgICAgaSxcbiAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihcbiAgICAgICAgICAgICAgICB7fSxcbiAgICAgICAgICAgICAgICB0aGlzLmluZGV4ZWRMZWdhbHNbaV0sXG4gICAgICAgICAgICAgICAgeyBpc1NlbGVjdGVkOiB0cnVlIH1cbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sXG4gICAgJ2xlZ2FsOjppbml0JyhsZWdhbEluaXREZXRhaWwpIHtcbiAgICAgIHRoaXMuYXBpTGFuZyA9IGxlZ2FsSW5pdERldGFpbC5sYW5nO1xuICAgICAgdGhpcy5hcGlSZWdpb24gPSBsZWdhbEluaXREZXRhaWwucmVnaW9uO1xuICAgICAgLy8gY2hlY2sgaWYgbG9hZGVkIGFscmVhZHlcbiAgICAgIGxldCBjb250YWluZXJSZWYgPSBsZWdhbEluaXREZXRhaWwuaXNOb25JbmRleGVkID8gdGhpcy5ub25JbmRleGVkTGVnYWxzIDogdGhpcy5pbmRleGVkTGVnYWxzO1xuICAgICAgbGV0IGluZGV4ID0gZmluZEluZGV4KGNvbnRhaW5lclJlZiwgbGVnYWwgPT4gbGVnYWwua2V5ID09PSBsZWdhbEluaXREZXRhaWwua2V5KTtcbiAgICAgIC8vIGlmIG5vdCBmb3VuZFxuICAgICAgaWYgKGluZGV4IDwgMCkge1xuICAgICAgICBpbmRleCA9IGNvbnRhaW5lclJlZi5wdXNoKGxlZ2FsSW5pdERldGFpbCkgLSAxO1xuICAgICAgICB0aGlzLmdldExlZ2FscygpO1xuICAgICAgfVxuICAgICAgaWYgKCFsZWdhbEluaXREZXRhaWwuaXNOb25JbmRleGVkKSB7XG4gICAgICAgIHRoaXMucm9vdEJyb2FkY2FzdCgnbGVnYWw6OnVkcGF0ZScsIHtcbiAgICAgICAgICBrZXk6IGxlZ2FsSW5pdERldGFpbC5rZXksXG4gICAgICAgICAgaXNOb25JbmRleGVkOiBsZWdhbEluaXREZXRhaWwuaXNOb25JbmRleGVkLFxuICAgICAgICAgIGluZGV4OiBpbmRleFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGxlZ2FsLWNvbnRhaW5lci52dWU/YTUxZWUyZDZcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJy4vbGVnYWwtY291bnRlci5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL2xlZ2FsLWNvdW50ZXIuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG4vKlxuICogQVBJOiA8bGVnYWwtY291bnRlclxuICogICAgICAgIGxlZ2FsLWtleT1cIihTdHJpbmcpIGtleVwiXG4gKiAgICAgICAgbGVnYWwtbGFuZz1cIihTdHJpbmcpIGxhbmdcIlxuICogICAgICAgIGxlZ2FsLXJlZ2lvbj1cIihTdHJpbmcpIHJlZ2lvblwiXG4gKiAgICAgICAgaXMtbm9uLWluZGV4ZWQ9XCIoQm9vbGVhbikgaXNOb25JbmRleGVkXCJcbiAqICAgICAgPjwvbGVnYWwtY291bnRlcj5cbiovXG5cbmltcG9ydCBtaXhpbnMgZnJvbSAnLi4vLi4vbWl4aW5zJztcbmltcG9ydCBkZWZlciBmcm9tICdsb2Rhc2gvZGVmZXInO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIG1peGluczogbWl4aW5zLFxuICBkYXRhKCkge1xuICAgIHJldHVybiB7XG4gICAgICBsZWdhbENvdW50ZXI6IG51bGxcbiAgICB9O1xuICB9LFxuICBwcm9wczoge1xuICAgIGxlZ2FsS2V5OiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH0sXG4gICAgaXNOb25JbmRleGVkOiB7XG4gICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgZGVmYXVsdDogZmFsc2VcbiAgICB9LFxuICAgIGxlZ2FsTGFuZzoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICB9LFxuICAgIGxlZ2FsUmVnaW9uOiB7XG4gICAgICB0eXBlOiBTdHJpbmcsXG4gICAgICByZXF1aXJlZDogdHJ1ZVxuICAgIH1cbiAgfSxcbiAgZXZlbnRzOiB7XG4gICAgJ2xlZ2FsOjp1ZHBhdGUnKHVwZGF0ZURldGFpbCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNOb25JbmRleGVkICYmIHVwZGF0ZURldGFpbC5rZXkgPT09IHRoaXMubGVnYWxLZXkpIHtcbiAgICAgICAgICB0aGlzLmxlZ2FsQ291bnRlciA9IHVwZGF0ZURldGFpbC5pbmRleCArIDE7XG4gICAgICAgIH1cbiAgICB9XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBjbGlja0hhbmRsZXIoKSB7XG4gICAgICB0aGlzLnJvb3RCcm9hZGNhc3QoJ2xlZ2FsOjpjbGljaycsIHRoaXMubGVnYWxLZXkpO1xuICAgIH1cbiAgfSxcbiAgYmVmb3JlQ29tcGlsZSgpIHtcbiAgfSxcbiAgcmVhZHkoKSB7XG4gICAgZGVmZXIoKCkgPT4ge1xuICAgICAgdGhpcy5yb290QnJvYWRjYXN0KCdsZWdhbDo6aW5pdCcsIHtcbiAgICAgICAga2V5OiB0aGlzLmxlZ2FsS2V5LFxuICAgICAgICBsYW5nOiB0aGlzLmxlZ2FsTGFuZyxcbiAgICAgICAgcmVnaW9uOiB0aGlzLmxlZ2FsUmVnaW9uLFxuICAgICAgICBpc05vbkluZGV4ZWQ6IHRoaXMuaXNOb25JbmRleGVkXG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogbGVnYWwtY291bnRlci52dWU/NGZlMGRjOGVcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJy4vb3ZlcmxheS1jb250YWluZXIuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9vdmVybGF5LWNvbnRhaW5lci5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbi8qXG4qIEV4OiA8b3ZlcmxheS1jb250YWluZXIgaXMtdmlzaWJsZT1cIihCb29sZWFuKSBmYWxzZVwiPlxuICAgICAgPC9vdmVybGF5LWNvbnRhaW5lcj5cbiovXG5jb25zdCBFU0MgPSAyNztcbmV4cG9ydCBkZWZhdWx0IHtcbiAgcHJvcHM6IHtcbiAgICBpc1Zpc2libGU6IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZVxuICAgIH1cbiAgfSxcbiAgd2F0Y2g6IHtcbiAgICBpc1Zpc2libGUoaXNWaXNpYmxlKSB7XG4gICAgICBsZXQgZWwgPSB3aW5kb3cuZG9jdW1lbnQuYm9keTtcbiAgICAgIGxldCBjbGFzc05hbWUgPSAnbm8tc2Nyb2xsJztcbiAgICAgIGlmIChpc1Zpc2libGUpIHtcbiAgICAgICAgaWYgKCEhZWwuY2xhc3NMaXN0KSB7XG4gICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZChjbGFzc05hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGVsLmNsYXNzTmFtZSArPSAnICcgKyBjbGFzc05hbWU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKGNsYXNzTmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZWwuY2xhc3NOYW1lID0gZWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgLmNsYXNzTmFtZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgUmVnRXhwKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyhefFxcXFxiKScgKyBjbGFzc05hbWUuc3BsaXQoJyAnKS5qb2luKCd8JykgKyAnKFxcXFxifCQpJywgJ2dpJyksICcgJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuICBldmVudHM6IHtcbiAgICAnb3ZlcmxheUNvbnRhaW5lcjo6b3BlbicoKSB7XG4gICAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XG4gICAgfSxcbiAgICAnb3ZlcmxheUNvbnRhaW5lcjo6Y2xvc2UnKCkge1xuICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICB9XG4gICAgfSxcbiAgcmVhZHkoKSB7XG4gICAgd2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZXZ0KSA9PiB7XG4gICAgICBldnQgPSBldnQgfHwgd2luZG93LmV2ZW50O1xuICAgICAgaWYgKGV2dC5rZXlDb2RlID09PSBFU0MpIHtcbiAgICAgICAgdGhpcy5pc1Zpc2libGUgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogb3ZlcmxheS1jb250YWluZXIudnVlPzNmYzIzMDU4XG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICcuL292ZXJsYXkuc2Nzcyc7XG48L3N0eWxlPlxuXG48dGVtcGxhdGUgc3JjPVwiLi9vdmVybGF5Lmh0bWxcIj48L3RlbXBsYXRlPlxuXG48c2NyaXB0PlxuLypcbiAqIEV4OiA8b3ZlcmxheSBvdmVybGF5LWtleT1cIihTdHJpbmcpIGtleVwiPlxuICogICAgICAgIEFueSBjb250ZW50XG4gKiAgICAgIDwvb3ZlcmxheT5cbiovXG5leHBvcnQgZGVmYXVsdCB7XG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmlzaWJsZTogZmFsc2VcbiAgICB9O1xuICB9LFxuICBwcm9wczoge1xuICAgIG92ZXJsYXlLZXk6IHtcbiAgICAgIHR5cGU6IFN0cmluZ1xuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIGNsb3NlT3ZlcmxheSgpIHtcbiAgICAgICAgdGhpcy4kZGlzcGF0Y2goJ292ZXJsYXlDb250YWluZXI6OmNsb3NlJyk7XG4gICAgfVxuICB9LFxuICBldmVudHM6IHtcbiAgICAnb3ZlcmxheTo6b3Blbicob3ZlcmxheUtleSkge1xuICAgICAgaWYgKG92ZXJsYXlLZXkgPT09IHRoaXMub3ZlcmxheUtleSkge1xuICAgICAgICB0aGlzLmlzVmlzaWJsZSA9IHRydWU7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuaXNWaXNpYmxlID0gZmFsc2U7XG4gICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBvdmVybGF5LnZ1ZT8xZjM3ZmQ0YVxuICoqLyIsIjxzdHlsZSBsYW5nPVwic2Fzc1wiPlxuICAgIEBpbXBvcnQgJ350ZWx1cy1oeWRyYS9fYmFzZV9zY29wZSc7XG4gICAgQGltcG9ydCAnLi9zcGlubmVyLnNjc3MnO1xuPC9zdHlsZT5cblxuPHRlbXBsYXRlIHNyYz1cIi4vc3Bpbm5lci5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcmVwbGFjZTogdHJ1ZSxcbiAgZGF0YSgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgYWN0aXZlOiBmYWxzZVxuICAgIH07XG4gIH0sXG4gIHByb3BzOiB7XG4gICAgdGV4dDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgZGVmYXVsdDogJydcbiAgICB9LFxuICAgIGZ1bGxTY3JlZW46IHtcbiAgICAgIHR5cGU6IEJvb2xlYW4sXG4gICAgICBkZWZhdWx0OiBmYWxzZVxuICAgIH1cbiAgfSxcbiAgbWV0aG9kczoge1xuICAgIHNob3coKSB7XG4gICAgICB0aGlzLmFjdGl2ZSA9IHRydWU7XG4gICAgICB0aGlzLiRyb290LiRicm9hZGNhc3QoJ3Nob3duOjpzcGlubmVyJyk7XG4gICAgfSxcbiAgICBoaWRlKCkge1xuICAgICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICAgIHRoaXMuJHJvb3QuJGJyb2FkY2FzdCgnaGlkZGVuOjpzcGlubmVyJyk7XG4gICAgfVxuICB9LFxuICBldmVudHM6IHtcbiAgICAnc2hvdzo6c3Bpbm5lcicoKSB7XG4gICAgICB0aGlzLnNob3coKTtcbiAgICB9LFxuICAgICdoaWRlOjpzcGlubmVyJygpIHtcbiAgICAgIHRoaXMuaGlkZSgpO1xuICAgIH1cbiAgfVxufTtcbjwvc2NyaXB0PlxuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogaW5kZXgudnVlPzM2NzdjMmQ1XG4gKiovIiwiPHN0eWxlIGxhbmc9XCJzYXNzXCI+XG4gICAgQGltcG9ydCAnfnRlbHVzLWh5ZHJhL19iYXNlX3Njb3BlJztcbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvY29tcG9uZW50cy91aS9pY29uJztcbiAgICBAaW1wb3J0ICcuL3N0ZXAtdHJhY2tlci5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL3N0ZXAtdHJhY2tlci5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcHJvcHM6IHtcbiAgICBjb25maWc6IHtcbiAgICAgIHR5cGU6IE9iamVjdFxuICAgIH0sXG4gICAgY3VycmVudFN0ZXA6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDBcbiAgICB9LFxuICB9LFxuICBtZXRob2RzOiB7XG4gICAgY2xpY2tIYW5kbGVyKCRldmVudCwgc3RlcCwgaW5kZXgpIHtcbiAgICAgIGlmICghIXN0ZXAub25DbGlja0hhbmRsZXIpIHtcbiAgICAgICAgJGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGlmICh0aGlzLmN1cnJlbnRTdGVwID4gaW5kZXgpIHtcbiAgICAgICAgICBzdGVwLm9uQ2xpY2tIYW5kbGVyKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGluZGV4LnZ1ZT8zNWMwNWJkYlxuICoqLyIsIjx0ZW1wbGF0ZSBzcmM9XCIuL3RhYi5odG1sXCI+PC90ZW1wbGF0ZT5cblxuPHNjcmlwdD5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgcHJvcHM6IHtcbiAgICBsYWJlbDoge1xuICAgICAgdHlwZTogU3RyaW5nLFxuICAgIH0sXG4gICAgaXNEaXNhYmxlZDoge1xuICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgIGRlZmF1bHQ6IGZhbHNlLFxuICAgIH0sXG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRhYkluZGV4OiAwLFxuICAgICAgaXNWaXNpYmxlOiBmYWxzZSxcbiAgICB9O1xuICB9LFxuICBjb21wdXRlZDoge1xuICAgIGlzVmlzaWJsZSgpIHtcbiAgICAgIHJldHVybiAodGhpcy4kcGFyZW50LmFjdGl2ZVRhYkluZGV4ID09PSB0aGlzLnRhYkluZGV4KTtcbiAgICB9LFxuICB9LFxuICBjcmVhdGVkKCkge1xuICAgIHRoaXMuJHBhcmVudC50YWJzLnB1c2goe1xuICAgICAgbGFiZWw6IHRoaXMubGFiZWwsXG4gICAgICBpc0Rpc2FibGVkOiB0aGlzLmlzRGlzYWJsZWQsXG4gICAgfSk7XG4gIH0sXG4gIHJlYWR5KCkge1xuICAgIHRoaXMuJHBhcmVudC4kY2hpbGRyZW4uZm9yRWFjaCgoYywgaW5kZXgpID0+IHtcbiAgICAgIGlmIChjLiRlbCA9PT0gdGhpcy4kZWwpIHtcbiAgICAgICAgdGhpcy50YWJJbmRleCA9IGluZGV4O1xuICAgICAgfVxuICAgIH0pO1xuICB9LFxuICBiZWZvcmVEZXN0cm95KCkge1xuICAgIHRoaXMuJHBhcmVudC50YWJzLnNwbGljZSh0aGlzLnRhYkluZGV4LCAxKTtcbiAgfSxcbn07XG48L3NjcmlwdD5cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHRhYi52dWU/MGM4YzIxYmZcbiAqKi8iLCI8c3R5bGUgbGFuZz1cInNhc3NcIj5cbiAgICBAaW1wb3J0ICd+dGVsdXMtaHlkcmEvX2Jhc2Vfc2NvcGUnO1xuICAgIEBpbXBvcnQgJy4vdGFicy5zY3NzJztcbjwvc3R5bGU+XG5cbjx0ZW1wbGF0ZSBzcmM9XCIuL3RhYnMuaHRtbFwiPjwvdGVtcGxhdGU+XG5cbjxzY3JpcHQ+XG4vKlxuICogIEV4OiA8dGFicyBhY3RpdmUtdGFiLWluZGV4PVwiKEludGVnZXIpIDBcIj5cbiAqICAgICAgICA8dGFiIGxhYmVsPVwiVGFiIEFcIj5cbiAqICAgICAgICAgIEFueSBjb250ZW50XG4gKiAgICAgICAgPC90YWI+XG4gKiAgICAgICAgPHRhYiBsYWJlbD1cIlRhYiBCXCIgaXMtZGlzYWJsZWQ9XCIoQm9vbGVhbikgZmFsc2VcIj5cbiAqICAgICAgICAgIEFueSBjb250ZW50XG4gKiAgICAgICAgPC90YWI+XG4gKiAgICAgICA8dGFicz5cbiovXG5leHBvcnQgZGVmYXVsdCB7XG4gIHByb3BzOiB7XG4gICAgYWN0aXZlVGFiSW5kZXg6IHtcbiAgICAgIHR5cGU6IE51bWJlcixcbiAgICAgIGRlZmF1bHQ6IDBcbiAgICB9XG4gIH0sXG4gIG1ldGhvZHM6IHtcbiAgICBpc0FjdGl2ZShpbmRleCkge1xuICAgICAgcmV0dXJuIGFjdGl2ZVRhYkluZGV4ID09PSBpbmRleDtcbiAgICB9XG4gIH0sXG4gIGRhdGEoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRhYnM6IFtdXG4gICAgfTtcbiAgfSxcbiAgbWV0aG9kczoge1xuICAgICAgaGFuZGxlVGFiTGlzdENsaWNrKGluZGV4LCB0YWIpIHtcbiAgICAgICAgICBpZiAoIXRhYi5pc0Rpc2FibGVkKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVRhYkluZGV4ID0gaW5kZXg7XG4gICAgICAgICAgfVxuICAgICAgfVxuICB9XG59O1xuPC9zY3JpcHQ+XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB0YWJzLnZ1ZT9lYzY2MjdjNFxuICoqLyIsImltcG9ydCBJbmRleCBmcm9tICcuL3ZpZXdzL2luZGV4LnZ1ZSc7XG5pbXBvcnQgU3RlcFRyYWNrZXJQYWdlIGZyb20gJy4vdmlld3Mvc3RlcC10cmFja2VyLXBhZ2UudnVlJztcbmltcG9ydCBUYWJzUGFnZSBmcm9tICcuL3ZpZXdzL3RhYnMtcGFnZS52dWUnO1xuaW1wb3J0IExlZ2FsUGFnZSBmcm9tICcuL3ZpZXdzL2xlZ2FsLXBhZ2UudnVlJztcbmltcG9ydCBPdmVybGF5UGFnZSBmcm9tICcuL3ZpZXdzL292ZXJsYXktcGFnZS52dWUnO1xuaW1wb3J0IENvbGxhcHNhYmxlUGFuZWxQYWdlIGZyb20gJy4vdmlld3MvY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWUnO1xuaW1wb3J0IEFsZXJ0UGFnZSBmcm9tICcuL3ZpZXdzL2FsZXJ0LXBhZ2UudnVlJztcbmltcG9ydCBTcGlubmVyUGFnZSBmcm9tICcuL3ZpZXdzL3NwaW5uZXItcGFnZS52dWUnO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gICcvJzoge1xuICAgIGNvbXBvbmVudDogSW5kZXhcbiAgfSxcbiAgJy9hbGVydCc6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPGFsZXJ0LXBhZ2U+PC9hbGVydC1wYWdlPicsXG4gICAgICBjb21wb25lbnRzOiB7IEFsZXJ0UGFnZSB9XG4gICAgfVxuICB9LFxuICAnL3NwaW5uZXInOiB7XG4gICAgY29tcG9uZW50OiB7XG4gICAgICB0ZW1wbGF0ZTogJzxzcGlubmVyLXBhZ2U+PC9zcGlubmVyLXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgU3Bpbm5lclBhZ2UgfVxuICAgIH1cbiAgfSxcbiAgJy9zdGVwLXRyYWNrZXInOiB7XG4gICAgY29tcG9uZW50OiB7XG4gICAgICB0ZW1wbGF0ZTogJzxzdGVwLXRyYWNrZXItcGFnZT48L3N0ZXAtdHJhY2tlci1wYWdlPicsXG4gICAgICBjb21wb25lbnRzOiB7IFN0ZXBUcmFja2VyUGFnZSB9XG4gICAgfVxuICB9LFxuICAnL3RhYnMnOiB7XG4gICAgY29tcG9uZW50OiB7XG4gICAgICB0ZW1wbGF0ZTogJzx0YWJzLXBhZ2U+PC90YWJzLXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgVGFic1BhZ2UgfVxuICAgIH1cbiAgfSxcbiAgJy9sZWdhbCc6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPGxlZ2FsLXBhZ2U+PC9sZWdhbC1wYWdlPicsXG4gICAgICBjb21wb25lbnRzOiB7IExlZ2FsUGFnZSB9XG4gICAgfVxuICB9LFxuICAnL292ZXJsYXknOiB7XG4gICAgY29tcG9uZW50OiB7XG4gICAgICB0ZW1wbGF0ZTogJzxvdmVybGF5LXBhZ2U+PC9vdmVybGF5LXBhZ2U+JyxcbiAgICAgIGNvbXBvbmVudHM6IHsgT3ZlcmxheVBhZ2UgfVxuICAgIH1cbiAgfSxcbiAgJy9jb2xsYXBzYWJsZS1wYW5lbCc6IHtcbiAgICBjb21wb25lbnQ6IHtcbiAgICAgIHRlbXBsYXRlOiAnPGNvbGxhcHNhYmxlLXBhbmVsLXBhZ2U+PC9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlPicsXG4gICAgICBjb21wb25lbnRzOiB7IENvbGxhcHNhYmxlUGFuZWxQYWdlIH1cbiAgICB9XG4gIH1cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2Rldi9zcmMvcm91dGVzLmpzXG4gKiovIiwiLypcbiAgQGRlc2MgQWRkIGJlaGF2aW9yIHRvIGFueSBlbGVtZW50LiBXaGVuIGNsaWNrZWQsIGl0IHdpbGwgb3BlbiB0aGUgY29ycmVzcG9uZGluZyBvdmVybGF5XG4gIEV4YW1wbGU6IDxidXR0b24gb3ZlcmxheS1vcGVuZXI9XCJteS1vdmVybGF5XCI+PC9idXR0b24+XG4qL1xuZXhwb3J0IGRlZmF1bHQge1xuICBpc0xpdGVyYWw6IHRydWUsXG4gIGV2ZW50SGFuZGxlcihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHRoaXMudm0uJHJvb3QuJGJyb2FkY2FzdCgnb3ZlcmxheTo6b3BlbicsIHRoaXMuZXhwcmVzc2lvbik7XG4gICAgdGhpcy52bS4kcm9vdC4kYnJvYWRjYXN0KCdvdmVybGF5Q29udGFpbmVyOjpvcGVuJyk7XG4gIH0sXG4gIGJpbmQoKSB7XG4gICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZXZlbnRIYW5kbGVyLmJpbmQodGhpcykpO1xuICB9LFxuICB1bmJpbmQoKSB7XG4gICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZXZlbnRIYW5kbGVyLmJpbmQodGhpcykpO1xuICB9LFxufTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2RpcmVjdGl2ZXMvb3ZlcmxheS1vcGVuZXIuanNcbiAqKi8iLCJpbXBvcnQgb3ZlcmxheU9wZW5lciBmcm9tICcuL2RpcmVjdGl2ZXMvb3ZlcmxheS1vcGVuZXInO1xuaW1wb3J0IHNldEZvY3VzIGZyb20gJy4vZGlyZWN0aXZlcy9zZXQtZm9jdXMnO1xuaW1wb3J0IFN0ZXBUcmFja2VyIGZyb20gJy4vY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvaW5kZXgudnVlJztcbmltcG9ydCBPdmVybGF5Q29udGFpbmVyIGZyb20gJy4vY29tcG9uZW50cy9vdmVybGF5L292ZXJsYXktY29udGFpbmVyLnZ1ZSc7XG5pbXBvcnQgT3ZlcmxheSBmcm9tICcuL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZSc7XG5pbXBvcnQgTGVnYWxDb3VudGVyIGZyb20gJy4vY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZSc7XG5pbXBvcnQgTGVnYWxDb250YWluZXIgZnJvbSAnLi9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWUnO1xuaW1wb3J0IFRhYnMgZnJvbSAnLi9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZSc7XG5pbXBvcnQgVGFiIGZyb20gJy4vY29tcG9uZW50cy90YWIvdGFiLnZ1ZSc7XG5pbXBvcnQgQ29sbGFwc2FibGVQYW5lbCBmcm9tICcuL2NvbXBvbmVudHMvY29sbGFwc2FibGUtcGFuZWwvaW5kZXgudnVlJztcbmltcG9ydCBBbGVydCBmcm9tICcuL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlJztcbmltcG9ydCBTcGlubmVyIGZyb20gJy4vY29tcG9uZW50cy9zcGlubmVyL2luZGV4LnZ1ZSc7XG5cbmxldCBjb21wb25lbnRzID0ge1xuICBTdGVwVHJhY2tlcixcbiAgT3ZlcmxheUNvbnRhaW5lcixcbiAgT3ZlcmxheSxcbiAgTGVnYWxDb3VudGVyLFxuICBMZWdhbENvbnRhaW5lcixcbiAgVGFicyxcbiAgVGFiLFxuICBDb2xsYXBzYWJsZVBhbmVsLFxuICBBbGVydCxcbiAgU3Bpbm5lclxufTtcbmxldCBkaXJlY3RpdmVzID0ge1xuICBvdmVybGF5T3BlbmVyLFxuICBzZXRGb2N1c1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBpbnN0YWxsKFZ1ZSkge1xuICBmb3IgKGxldCBuYW1lIGluIGNvbXBvbmVudHMpIHtcbiAgICBWdWUuY29tcG9uZW50KG5hbWUsIGNvbXBvbmVudHNbbmFtZV0pO1xuICB9XG4gIGZvciAobGV0IG5hbWUgaW4gZGlyZWN0aXZlcykge1xuICAgIFZ1ZS5kaXJlY3RpdmUobmFtZSwgZGlyZWN0aXZlc1tuYW1lXSk7XG4gIH1cbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9tYWluLmpzXG4gKiovIiwiZXhwb3J0IGRlZmF1bHQge1xuICBtZXRob2RzOiB7XG4gICAgcm9vdEJyb2FkY2FzdCguLi5hcmdzKSB7XG4gICAgICB0aGlzLiRicm9hZGNhc3QuYXBwbHkodGhpcy4kcm9vdCwgYXJncyk7XG4gICAgfSxcbiAgfSxcbn07XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9taXhpbnMvZXZlbnRzLmpzXG4gKiovIiwiZXhwb3J0IGRlZmF1bHQge1xuICBtZXRob2RzOiB7XG4gICAgcGFyc2VKU09OKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuanNvbigpO1xuICAgIH0sXG4gIH0sXG59O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvbWl4aW5zL3hoci1yZXNwb25zZS5qc1xuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmh5X2MtaWNvbntmb250LWZhbWlseTpUZWx1cyBJY29uLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO3RleHQtZGVjb3JhdGlvbjpub25lO3RleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTtjb2xvcjppbmhlcml0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtmb250LXNpemU6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0fS5oeV9jLWljb25fX3NxdWFyZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6Mi41cmVtO2xpbmUtaGVpZ2h0OjNyZW07d2lkdGg6M3JlbTtoZWlnaHQ6M3JlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS0yeHtmb250LXNpemU6MmVtfS5oeV9jLWljb24tLTN4e2ZvbnQtc2l6ZTozZW19Lmh5X2MtaWNvbi0tNHh7Zm9udC1zaXplOjRlbX0uaHlfYy1pY29uX19zdHlsZWd1aWRle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToycmVtO2xpbmUtaGVpZ2h0OjRyZW07d2lkdGg6NHJlbTtoZWlnaHQ6NHJlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS1jaXJjbGUtdGhpY2stb3V0bGluZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5oeV9jLWljb24tLWNpcmNsZS1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDVcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtbG9nbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDlcXFwifS5oeV9jLWljb24tLWJhci1jaGFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTBcXFwifS5oeV9jLWljb24tLXBpY3R1cmUtZnJhbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDExXFxcIn0uaHlfYy1pY29uLS1wYXBlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTJcXFwifS5oeV9jLWljb24tLXBhcGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxM1xcXCJ9Lmh5X2MtaWNvbi0tZm9sZGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNFxcXCJ9Lmh5X2MtaWNvbi0tc2hhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE1XFxcIn0uaHlfYy1pY29uLS1tYWduaWZ5LWdsYXNzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNlxcXCJ9Lmh5X2MtaWNvbi0td2FybmluZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMThcXFwifS5oeV9jLWljb24tLXN0YXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE5XFxcIn0uaHlfYy1pY29uLS1zdGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMFxcXCJ9Lmh5X2MtaWNvbi0taGVhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIxXFxcIn0uaHlfYy1pY29uLS1saWZlc2F2ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIyXFxcIn0uaHlfYy1pY29uLS1oYW1idXJnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI0XFxcIn0uaHlfYy1pY29uLS1ncmlkLXNxdWFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjVcXFwifS5oeV9jLWljb24tLWdyaWQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjZcXFwifS5oeV9jLWljb24tLWxpZ2h0YnVsYjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjdcXFwifS5oeV9jLWljb24tLXNwZWVkb21ldGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOFxcXCJ9Lmh5X2MtaWNvbi0tYWRkLXJlbW92ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjlcXFwifS5oeV9jLWljb24tLWNhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMwXFxcIn0uaHlfYy1pY29uLS10d2l0dGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMVxcXCJ9Lmh5X2MtaWNvbi0tZmFjZWJvb2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMyXFxcIn0uaHlfYy1pY29uLS15b3V0dWJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzM1xcXCJ9Lmh5X2MtaWNvbi0tZ29vZ2xlLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM0XFxcIn0uaHlfYy1pY29uLS10cmVuZC1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNVxcXCJ9Lmh5X2MtaWNvbi0tcGxheS1idXR0b24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM2XFxcIn0uaHlfYy1pY29uLS12aWRlby1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzdcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM4XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzlcXFwifS5oeV9jLWljb24tLWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MFxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQxXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MlxcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NFxcXCJ9Lmh5X2MtaWNvbi0tbW91c2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ1XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDZcXFwifS5oeV9jLWljb24tLXBhcGVyLW5vdGVzLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0N1xcXCJ9Lmh5X2MtaWNvbi0tdHY6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ4XFxcIn0uaHlfYy1pY29uLS1maWxtOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OVxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUwXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUxXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MlxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTNcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTVcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NlxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1N1xcXCJ9Lmh5X2MtaWNvbi0tdXNlcnM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU5XFxcIn0uaHlfYy1pY29uLS11c2Vycy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MFxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjJcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtYm94ZWQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYzXFxcIn0uaHlfYy1pY29uLS1nZWFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NFxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NVxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjZcXFwifS5oeV9jLWljb24tLXBhZGxvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY4XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrLWludmVyZXRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjlcXFwifS5oeV9jLWljb24tLXN0YWNrZWQtcGFwZXJzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MVxcXCJ9Lmh5X2MtaWNvbi0tbXVzaWMtbm90ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzJcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDczXFxcIn0uaHlfYy1pY29uLS10YWJsZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc0XFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc1XFxcIn0uaHlfYy1pY29uLS1tb3VzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzZcXFwifS5oeV9jLWljb24tLXByaWNldGFnLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3N1xcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc4XFxcIn0uaHlfYy1pY29uLS10di1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzlcXFwifS5oeV9jLWljb24tLWZpbG0tY2xhcHBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODBcXFwifS5oeV9jLWljb24tLWVudmVsb3BlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MVxcXCJ9Lmh5X2MtaWNvbi0tcGhvbmUtaGFuZHNldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODJcXFwifS5oeV9jLWljb24tLXVzYi1zdGljay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODNcXFwifS5oeV9jLWljb24tLWhvbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg0XFxcIn0uaHlfYy1pY29uLS1ob21lLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg1XFxcIn0uaHlfYy1pY29uLS1ob21lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NlxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTFcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkyXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5M1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk0XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5N1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOThcXFwifS5oeV9jLWljb24tLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk5XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDJcXFwifS5oeV9jLWljb24tLXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA0XFxcIn0uaHlfYy1pY29uLS14LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA1XFxcIn0uaHlfYy1pY29uLS14LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNlxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOFxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA5XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTFcXFwifS5oeV9jLWljb24tLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEyXFxcIn0uaHlfYy1pY29uLS1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEzXFxcIn0uaHlfYy1pY29uLS1wbHVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNFxcXCJ9Lmh5X2MtaWNvbi0tbWludXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE1XFxcIn0uaHlfYy1pY29uLS1taW51cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNlxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE3XFxcIn0uaHlfYy1pY29uLS1jaGF0LWJ1YmJsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTlcXFwifS5oeV9jLWljb24tLWNoYXQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjBcXFwifS5oeV9jLWljb24tLWNoYXQtY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIxXFxcIn0uaHlfYy1pY29uLS1jaGF0LXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIyXFxcIn0uaHlfYy1pY29uLS1jaGF0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyM1xcXCJ9Lmh5X2MtaWNvbi0tc2ltLWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI1XFxcIn0uaHlfYy1pY29uLS1jYWxjdWxhdG9yOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNlxcXCJ9Lmh5X2MtaWNvbi0tYmx1ZXRvb3RoLWhlYWRzZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI3XFxcIn0uaHlfYy1pY29uLS1vdXRnb2luZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyOVxcXCJ9Lmh5X2MtaWNvbi0taW5jb21pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzBcXFwifS5oeV9jLWljb24tLWNhdXRpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMxXFxcIn0uaHlfYy1pY29uLS13aWZpLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMlxcXCJ9Lmh5X2MtaWNvbi0td2lmaTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzNcXFwifS5oeV9jLWljb24tLXRoaW4tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNVxcXCJ9Lmh5X2MtaWNvbi0taW5mby1pbnZlcnRlZDpiZWZvcmUsLmh5X2MtaWNvbi0taW5mbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzZcXFwifS5oeV9jLWljb24tLXRyZW5kLXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzOFxcXCJ9Lmh5X2MtaWNvbi0tZ2xvYmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQwXFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQyXFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ0XFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NVxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ2XFxcIn0uaHlfYy1pY29uLS1vdmVydmlldy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDdcXFwifS5oeV9jLWljb24tLXRlbHVzLWNpcmNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDhcXFwifS5oeV9jLWljb24tLXB1bHNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OVxcXCJ9Lmh5X2MtaWNvbi0tbWlrZS1tb2JpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUwXFxcIn0uaHlfYy1pY29uLS1yZXdhcmRzLWJhZGdlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MVxcXCJ9Lmh5X2MtaWNvbi0tZmlsdGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MlxcXCJ9Lmh5X2MtaWNvbi0tc2NoZWR1bGUtdGFsazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTNcXFwifS5oeV9jLWljb24tLXdhcm5pbmc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU0XFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU1XFxcIn0uaHlfYy1pY29uLS1jYXJ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NlxcXCJ9Lmh5X2MtaWNvbi0tbGl2ZS1jaGF0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1N1xcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNThcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3Q6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU5XFxcIn0uaHlfYy1pY29uLS1jbG91ZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjBcXFwifS5oeV9jLWljb24tLWRhdGE6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYxXFxcIn0uaHlfYy1pY29uLS1kZWxpdmVyeS10cnVjazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjJcXFwifS5oeV9jLWljb24tLXByb3RlY3Rpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYzXFxcIn0uaHlfYy1pY29uLS1jb2xvdXItcGlja2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NFxcXCJ9Lmh5X2MtaWNvbi0tbXVsdGktYWNjb3VudC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjVcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NlxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY3XFxcIn0uaHlfYy1pY29uLS1kb2xsYXItc2lnbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjhcXFwifS5oeV9jLWljb24tLWxpbmstYWNjb3VudDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjlcXFwifS5oeV9jLWljb24tLWRhdGEtbWFuYWdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzBcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MVxcXCJ9Lmh5X2MtaWNvbi0tdG9vbHMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcyXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzNcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NFxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NVxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NlxcXCJ9Lmh5X2MtaWNvbi0tbGlua2VkLWluLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3N1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc4XFxcIn0uaHlfYy1pY29uLS1taWNyb3Bob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgwXFxcIn0uaHlfYy1pY29uLS1uZXR3b3JraW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MVxcXCJ9Lmh5X2MtaWNvbi0tY3ljbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgyXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgzXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg0XFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWFkZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODVcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NlxcXCJ9LnNnX2MtYXBpLXRhYmxle2JvcmRlci1zcGFjaW5nOjAgMTBweDt3aWR0aDoxMDAlfS5zZ19jLWFwaS10YWJsZSB0cnstd2Via2l0LWJveC1mbGV4OjE7LW1zLWZsZXg6MTtmbGV4OjF9LnNnX2MtYXBpLXRhYmxlIHRoLC5zZ19jLWFwaS10YWJsZSB0cjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlZWV9LnNnX2MtYXBpLXRhYmxlIHRke3RleHQtYWxpZ246Y2VudGVyfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA3MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuc2dfYy1uYXZ7ZGlzcGxheTpibG9jaztwb3NpdGlvbjpmaXhlZDtsZWZ0OjA7d2lkdGg6MjVyZW07aGVpZ2h0OjEwMCU7Ym9yZGVyLXJpZ2h0Oi4xcmVtIHNvbGlkICNlMmUyZTI7cGFkZGluZzoycmVtO3BhZGRpbmctdG9wOjY4cHg7b3ZlcmZsb3cteDpoaWRkZW47b3ZlcmZsb3cteTphdXRvO2JhY2tncm91bmQtY29sb3I6I2ZmZn0uc2dfYy1uYXZfX3NlY3Rpb257Zm9udC1mYW1pbHk6VGVsdXMgTWVkaXVtLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO2ZvbnQtc2l6ZToxLjJyZW07Ym9yZGVyLWJvdHRvbTouMXJlbSBzb2xpZCAjZTJlMmUyO3BhZGRpbmctdG9wOjFyZW07cGFkZGluZy1ib3R0b206LjVyZW07bWFyZ2luOjFyZW0gMH0uc2dfYy1uYXZfX2xpc3QtaXRlbXtwYWRkaW5nOjVweCAwfS5zZ19jLW5hdl9fbGluazpob3Zlcntjb2xvcjojOGM2OGE2fS5zZ19jLW5hdl9fbGluay0tYWN0aXZle2NvbG9yOiM1N2E3MDh9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL2NvbXBvbmVudHMvc2lkZS1uYXYvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gNzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiaGVhZGVyLnNnX2Mtc2l0ZS1oZWFkZXJ7YmFja2dyb3VuZC1jb2xvcjojNGIyODZkO2hlaWdodDo2OHB4O3RleHQtYWxpZ246bGVmdDtwb3NpdGlvbjpmaXhlZDt3aWR0aDoxMDAlO3otaW5kZXg6OTk5OX1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlci1jb250YWluZXJ7aGVpZ2h0OjEwMCU7d2lkdGg6MTAwJTtwYWRkaW5nOjAgMTBweH1oZWFkZXIuc2dfYy1zaXRlLWhlYWRlciAuc2dfYy1zaXRlLWhlYWRlci1jb250YWluZXIgaW1nLmxvZ297aGVpZ2h0OjEwMCU7cGFkZGluZzoyMHB4O2Rpc3BsYXk6aW5saW5lLWJsb2NrO21heC13aWR0aDoxMDAlfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDcyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcImJvZHl7YmFja2dyb3VuZC1jb2xvcjojZjVmNmY3fS5zZ19jLXNpdGVfX21haW57cGFkZGluZy10b3A6NjhweDttYXJnaW4tbGVmdDoyNXJlbX0uc2dfYy1kZW1ve21hcmdpbjoyMHB4IDB9LnNnX2MtZGVtb19fY29udGFpbmVye2JhY2tncm91bmQtY29sb3I6I2ZmZjtvdmVyZmxvdzpoaWRkZW47Ym9yZGVyLXJhZGl1czo1cHg7Ym9yZGVyOjFweCBzb2xpZCAjZWVlO3BhZGRpbmc6MjVweDttYXJnaW46MjBweCAwfWNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2NvbG9yOiMwMDA7YmFja2dyb3VuZDpub25lO3RleHQtc2hhZG93OjAgMXB4ICNmZmY7Zm9udC1mYW1pbHk6Q29uc29sYXMsTW9uYWNvLEFuZGFsZSBNb25vLFVidW50dSBNb25vLG1vbm9zcGFjZTt0ZXh0LWFsaWduOmxlZnQ7d2hpdGUtc3BhY2U6cHJlO3dvcmQtc3BhY2luZzpub3JtYWw7d29yZC1icmVhazpub3JtYWw7d29yZC13cmFwOm5vcm1hbDtsaW5lLWhlaWdodDoxLjU7LW1vei10YWItc2l6ZTo0Oy1vLXRhYi1zaXplOjQ7dGFiLXNpemU6NDstd2Via2l0LWh5cGhlbnM6bm9uZTstbXMtaHlwaGVuczpub25lO2h5cGhlbnM6bm9uZX1jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixjb2RlW2NsYXNzKj1sYW5ndWFnZS1dIDo6LW1vei1zZWxlY3Rpb24scHJlW2NsYXNzKj1sYW5ndWFnZS1dOjotbW96LXNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjotbW96LXNlbGVjdGlvbnt0ZXh0LXNoYWRvdzpub25lO2JhY2tncm91bmQ6I2IzZDRmY31jb2RlW2NsYXNzKj1sYW5ndWFnZS1dOjpzZWxlY3Rpb24sY29kZVtjbGFzcyo9bGFuZ3VhZ2UtXSA6OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV06OnNlbGVjdGlvbixwcmVbY2xhc3MqPWxhbmd1YWdlLV0gOjpzZWxlY3Rpb257dGV4dC1zaGFkb3c6bm9uZTtiYWNrZ3JvdW5kOiNiM2Q0ZmN9QG1lZGlhIHByaW50e2NvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de3RleHQtc2hhZG93Om5vbmV9fXByZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOjFlbTttYXJnaW46LjVlbSAwO292ZXJmbG93OmF1dG99Om5vdChwcmUpPmNvZGVbY2xhc3MqPWxhbmd1YWdlLV0scHJlW2NsYXNzKj1sYW5ndWFnZS1de2JhY2tncm91bmQ6I2Y1ZjJmMH06bm90KHByZSk+Y29kZVtjbGFzcyo9bGFuZ3VhZ2UtXXtwYWRkaW5nOi4xZW07Ym9yZGVyLXJhZGl1czouM2VtO3doaXRlLXNwYWNlOm5vcm1hbH0udG9rZW4uY2RhdGEsLnRva2VuLmNvbW1lbnQsLnRva2VuLmRvY3R5cGUsLnRva2VuLnByb2xvZ3tjb2xvcjojNzA4MDkwfS50b2tlbi5wdW5jdHVhdGlvbntjb2xvcjojOTk5fS5uYW1lc3BhY2V7b3BhY2l0eTouN30udG9rZW4uYm9vbGVhbiwudG9rZW4uY29uc3RhbnQsLnRva2VuLmRlbGV0ZWQsLnRva2VuLm51bWJlciwudG9rZW4ucHJvcGVydHksLnRva2VuLnN5bWJvbCwudG9rZW4udGFne2NvbG9yOiM5MDV9LnRva2VuLmF0dHItbmFtZSwudG9rZW4uYnVpbHRpbiwudG9rZW4uY2hhciwudG9rZW4uaW5zZXJ0ZWQsLnRva2VuLnNlbGVjdG9yLC50b2tlbi5zdHJpbmd7Y29sb3I6IzY5MH0ubGFuZ3VhZ2UtY3NzIC50b2tlbi5zdHJpbmcsLnN0eWxlIC50b2tlbi5zdHJpbmcsLnRva2VuLmVudGl0eSwudG9rZW4ub3BlcmF0b3IsLnRva2VuLnVybHtjb2xvcjojYTY3ZjU5O2JhY2tncm91bmQ6aHNsYSgwLDAlLDEwMCUsLjUpfS50b2tlbi5hdHJ1bGUsLnRva2VuLmF0dHItdmFsdWUsLnRva2VuLmtleXdvcmR7Y29sb3I6IzA3YX0udG9rZW4uZnVuY3Rpb257Y29sb3I6I2RkNGE2OH0udG9rZW4uaW1wb3J0YW50LC50b2tlbi5yZWdleCwudG9rZW4udmFyaWFibGV7Y29sb3I6I2U5MH0udG9rZW4uYm9sZCwudG9rZW4uaW1wb3J0YW50e2ZvbnQtd2VpZ2h0OjcwMH0udG9rZW4uaXRhbGlje2ZvbnQtc3R5bGU6aXRhbGljfS50b2tlbi5lbnRpdHl7Y3Vyc29yOmhlbHB9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDczXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5oeV9jLWljb257Zm9udC1mYW1pbHk6VGVsdXMgSWNvbixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjt0ZXh0LWRlY29yYXRpb246bm9uZTt0ZXh0LXJlbmRlcmluZzpvcHRpbWl6ZUxlZ2liaWxpdHk7Y29sb3I6aW5oZXJpdDt2ZXJ0aWNhbC1hbGlnbjptaWRkbGU7Zm9udC1zaXplOmluaGVyaXQ7bGluZS1oZWlnaHQ6aW5oZXJpdH0uaHlfYy1pY29uX19zcXVhcmV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjIuNXJlbTtsaW5lLWhlaWdodDozcmVtO3dpZHRoOjNyZW07aGVpZ2h0OjNyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tMnh7Zm9udC1zaXplOjJlbX0uaHlfYy1pY29uLS0zeHtmb250LXNpemU6M2VtfS5oeV9jLWljb24tLTR4e2ZvbnQtc2l6ZTo0ZW19Lmh5X2MtaWNvbl9fc3R5bGVndWlkZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6MnJlbTtsaW5lLWhlaWdodDo0cmVtO3dpZHRoOjRyZW07aGVpZ2h0OjRyZW07dGV4dC1hbGlnbjpjZW50ZXJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXRoaWNrLW91dGxpbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uaHlfYy1pY29uLS1jaXJjbGUtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA1XFxcIn0uaHlfYy1pY29uLS1iaWctYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDZcXFwifS5oeV9jLWljb24tLXRlbHVzLWxvZ286YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA5XFxcIn0uaHlfYy1pY29uLS1iYXItY2hhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEwXFxcIn0uaHlfYy1pY29uLS1waWN0dXJlLWZyYW1lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMVxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEyXFxcIn0uaHlfYy1pY29uLS1wYXBlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTNcXFwifS5oeV9jLWljb24tLWZvbGRlci1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTRcXFwifS5oeV9jLWljb24tLXNoYXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNVxcXCJ9Lmh5X2MtaWNvbi0tbWFnbmlmeS1nbGFzczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTZcXFwifS5oeV9jLWljb24tLXdhcm5pbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE4XFxcIn0uaHlfYy1pY29uLS1zdGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOVxcXCJ9Lmh5X2MtaWNvbi0tc3RhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjBcXFwifS5oeV9jLWljb24tLWhlYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMVxcXCJ9Lmh5X2MtaWNvbi0tbGlmZXNhdmVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMlxcXCJ9Lmh5X2MtaWNvbi0taGFtYnVyZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNFxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1zcXVhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI1XFxcIn0uaHlfYy1pY29uLS1ncmlkLWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI2XFxcIn0uaHlfYy1pY29uLS1saWdodGJ1bGI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI3XFxcIn0uaHlfYy1pY29uLS1zcGVlZG9tZXRlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjhcXFwifS5oeV9jLWljb24tLWFkZC1yZW1vdmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI5XFxcIn0uaHlfYy1pY29uLS1jYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMFxcXCJ9Lmh5X2MtaWNvbi0tdHdpdHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzFcXFwifS5oeV9jLWljb24tLWZhY2Vib29rOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMlxcXCJ9Lmh5X2MtaWNvbi0teW91dHViZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzNcXFwifS5oeV9jLWljb24tLWdvb2dsZS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNFxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzVcXFwifS5oeV9jLWljb24tLXBsYXktYnV0dG9uLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNlxcXCJ9Lmh5X2MtaWNvbi0tdmlkZW8taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM3XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM5XFxcIn0uaHlfYy1pY29uLS1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDBcXFwifS5oeV9jLWljb24tLWNsb2NrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MVxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDJcXFwifS5oeV9jLWljb24tLXRhYmxldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDNcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDRcXFwifS5oeV9jLWljb24tLW1vdXNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NVxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ2XFxcIn0uaHlfYy1pY29uLS1wYXBlci1ub3Rlcy1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDdcXFwifS5oeV9jLWljb24tLXR2OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OFxcXCJ9Lmh5X2MtaWNvbi0tZmlsbTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDlcXFwifS5oeV9jLWljb24tLWVudmVsb3BlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MFxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MVxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTJcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUzXFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU1XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTZcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTdcXFwifS5oeV9jLWljb24tLXVzZXJzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1OVxcXCJ9Lmh5X2MtaWNvbi0tdXNlcnMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjBcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYyXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWJveGVkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2M1xcXCJ9Lmh5X2MtaWNvbi0tZ2VhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjRcXFwifS5oeV9jLWljb24tLWdlYXItY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjVcXFwifS5oeV9jLWljb24tLWdlYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY2XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OFxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jay1pbnZlcmV0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY5XFxcIn0uaHlfYy1pY29uLS1zdGFja2VkLXBhcGVycy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzFcXFwifS5oeV9jLWljb24tLW11c2ljLW5vdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcyXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3M1xcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NVxcXCJ9Lmh5X2MtaWNvbi0tbW91c2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc2XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzdcXFwifS5oeV9jLWljb24tLXBhcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OFxcXCJ9Lmh5X2MtaWNvbi0tdHYtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc5XFxcIn0uaHlfYy1pY29uLS1maWxtLWNsYXBwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgwXFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODFcXFwifS5oeV9jLWljb24tLXBob25lLWhhbmRzZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgyXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgzXFxcIn0uaHlfYy1pY29uLS1ob21lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NFxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NVxcXCJ9Lmh5X2MtaWNvbi0taG9tZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODZcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTNcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTVcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24tY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTZcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTdcXFwifS5oeV9jLWljb24tLWFycm93LXVwLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDBcXFwifS5oeV9jLWljb24tLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAyXFxcIn0uaHlfYy1pY29uLS14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNFxcXCJ9Lmh5X2MtaWNvbi0teC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNVxcXCJ9Lmh5X2MtaWNvbi0teC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDZcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDhcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOVxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTExXFxcIn0uaHlfYy1pY29uLS1wbHVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMlxcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExM1xcXCJ9Lmh5X2MtaWNvbi0tcGx1cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTRcXFwifS5oeV9jLWljb24tLW1pbnVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNVxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTZcXFwifS5oeV9jLWljb24tLW1pbnVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExN1xcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1idWJibGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE5XFxcIn0uaHlfYy1pY29uLS1jaGF0LWRvdHM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIwXFxcIn0uaHlfYy1pY29uLS1jaGF0LWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC14OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMlxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjNcXFwifS5oeV9jLWljb24tLXNpbS1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNVxcXCJ9Lmh5X2MtaWNvbi0tY2FsY3VsYXRvcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjZcXFwifS5oeV9jLWljb24tLWJsdWV0b290aC1oZWFkc2V0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyN1xcXCJ9Lmh5X2MtaWNvbi0tb3V0Z29pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjlcXFwifS5oeV9jLWljb24tLWluY29taW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMwXFxcIn0uaHlfYy1pY29uLS1jYXV0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzJcXFwifS5oeV9jLWljb24tLXdpZmk6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMzXFxcIn0uaHlfYy1pY29uLS10aGluLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzVcXFwifS5oeV9jLWljb24tLWluZm8taW52ZXJ0ZWQ6YmVmb3JlLC5oeV9jLWljb24tLWluZm86YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM2XFxcIn0uaHlfYy1pY29uLS10cmVuZC11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzhcXFwifS5oeV9jLWljb24tLWdsb2JlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0MlxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NFxcXCJ9Lmh5X2MtaWNvbi0tY2FyZC1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDVcXFwifS5oeV9jLWljb24tLWNhbGVuZGFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NlxcXCJ9Lmh5X2MtaWNvbi0tb3ZlcnZpZXctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ3XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1jaXJjbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ4XFxcIn0uaHlfYy1pY29uLS1wdWxzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDlcXFwifS5oeV9jLWljb24tLW1pa2UtbW9iaWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MFxcXCJ9Lmh5X2MtaWNvbi0tcmV3YXJkcy1iYWRnZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTFcXFwifS5oeV9jLWljb24tLWZpbHRlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTJcXFwifS5oeV9jLWljb24tLXNjaGVkdWxlLXRhbGs6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUzXFxcIn0uaHlfYy1pY29uLS13YXJuaW5nOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NFxcXCJ9Lmh5X2MtaWNvbi0tc2F0ZWxsaXRlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NVxcXCJ9Lmh5X2MtaWNvbi0tY2FydC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTZcXFwifS5oeV9jLWljb24tLWxpdmUtY2hhdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTdcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3QtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU4XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OVxcXCJ9Lmh5X2MtaWNvbi0tY2xvdWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYwXFxcIn0uaHlfYy1pY29uLS1kYXRhOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MVxcXCJ9Lmh5X2MtaWNvbi0tZGVsaXZlcnktdHJ1Y2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYyXFxcIn0uaHlfYy1pY29uLS1wcm90ZWN0aW9uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2M1xcXCJ9Lmh5X2MtaWNvbi0tY29sb3VyLXBpY2tlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjRcXFwifS5oeV9jLWljb24tLW11bHRpLWFjY291bnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY1XFxcIn0uaHlfYy1pY29uLS1hY2Nlc3Nvcmllcy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjZcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2N1xcXCJ9Lmh5X2MtaWNvbi0tZG9sbGFyLXNpZ246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY4XFxcIn0uaHlfYy1pY29uLS1saW5rLWFjY291bnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY5XFxcIn0uaHlfYy1pY29uLS1kYXRhLW1hbmFnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcwXFxcIn0uaHlfYy1pY29uLS1hY2Nlc3NvcmllczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzFcXFwifS5oeV9jLWljb24tLXRvb2xzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MlxcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTczXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzRcXFwifS5oeV9jLWljb24tLWlwLWZheDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzVcXFwifS5oeV9jLWljb24tLWlwLWZheC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzZcXFwifS5oeV9jLWljb24tLWxpbmtlZC1pbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzdcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OFxcXCJ9Lmh5X2MtaWNvbi0tbWljcm9waG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzlcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MFxcXCJ9Lmh5X2MtaWNvbi0tbmV0d29ya2luZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODFcXFwifS5oeV9jLWljb24tLWN5Y2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MlxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4M1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtYWx0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NFxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1hZGQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg1XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODZcXFwifS5mYWRlLXRyYW5zaXRpb257LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuM3MgZWFzZTt0cmFuc2l0aW9uOmFsbCAuM3MgZWFzZX0uZmFkZS1lbnRlciwuZmFkZS1sZWF2ZXtvcGFjaXR5OjB9LmMtYWxlcnR7cG9zaXRpb246cmVsYXRpdmU7cGFkZGluZzo3cHggMTVweDttYXJnaW4tYm90dG9tOjFyZW07Ym9yZGVyOjFweCBzb2xpZCB0cmFuc3BhcmVudDtib3JkZXItcmFkaXVzOi4yNXJlbX0uYy1hbGVydC0taW5mb3tiYWNrZ3JvdW5kLWNvbG9yOiMzMzM7Ym9yZGVyLWNvbG9yOiMwMDA7Y29sb3I6I2ZmZn0uYy1hbGVydC0taW5mbyBidXR0b257Y29sb3I6I2ZmZn0uYy1hbGVydC0tc3VjY2Vzc3tiYWNrZ3JvdW5kLWNvbG9yOiNlNmZmY2M7Ym9yZGVyLWNvbG9yOiM5ZjM7Y29sb3I6IzQwODAwMH0uYy1hbGVydC0tZXJyb3J7YmFja2dyb3VuZC1jb2xvcjojZjhkZGUzO2JvcmRlci1jb2xvcjojZjJjMGNhO2NvbG9yOiNjODEyMzV9LmMtYWxlcnRfX2Nsb3NlLWJ1dHRvbntwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MDtyaWdodDoxMHB4Oy13ZWJraXQtYXBwZWFyYW5jZTpub25lO3BhZGRpbmc6MDtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kOjAgMDtib3JkZXI6MDtmb250LXNpemU6Mi41cmVtO29wYWNpdHk6LjJ9LmMtYWxlcnRfX2Nsb3NlLWJ1dHRvbjpob3ZlcntvcGFjaXR5Oi4zfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvYWxlcnQvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gNzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmh5X2MtaWNvbntmb250LWZhbWlseTpUZWx1cyBJY29uLEhlbHZldGljYSBOZXVlLEhlbHZldGljYSxBcmlhbCxzYW5zLXNlcmlmO3RleHQtZGVjb3JhdGlvbjpub25lO3RleHQtcmVuZGVyaW5nOm9wdGltaXplTGVnaWJpbGl0eTtjb2xvcjppbmhlcml0O3ZlcnRpY2FsLWFsaWduOm1pZGRsZTtmb250LXNpemU6aW5oZXJpdDtsaW5lLWhlaWdodDppbmhlcml0fS5oeV9jLWljb25fX3NxdWFyZXtkaXNwbGF5OmlubGluZS1ibG9jaztmb250LXNpemU6Mi41cmVtO2xpbmUtaGVpZ2h0OjNyZW07d2lkdGg6M3JlbTtoZWlnaHQ6M3JlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS0yeHtmb250LXNpemU6MmVtfS5oeV9jLWljb24tLTN4e2ZvbnQtc2l6ZTozZW19Lmh5X2MtaWNvbi0tNHh7Zm9udC1zaXplOjRlbX0uaHlfYy1pY29uX19zdHlsZWd1aWRle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToycmVtO2xpbmUtaGVpZ2h0OjRyZW07d2lkdGg6NHJlbTtoZWlnaHQ6NHJlbTt0ZXh0LWFsaWduOmNlbnRlcn0uaHlfYy1pY29uLS1jaXJjbGUtdGhpY2stb3V0bGluZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDFcXFwifS5oeV9jLWljb24tLWNpcmNsZS1zb2xpZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDJcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDVcXFwifS5oeV9jLWljb24tLWJpZy1hcnJvdy1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtbG9nbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMDlcXFwifS5oeV9jLWljb24tLWJhci1jaGFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTBcXFwifS5oeV9jLWljb24tLXBpY3R1cmUtZnJhbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDExXFxcIn0uaHlfYy1pY29uLS1wYXBlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTJcXFwifS5oeV9jLWljb24tLXBhcGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxM1xcXCJ9Lmh5X2MtaWNvbi0tZm9sZGVyLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNFxcXCJ9Lmh5X2MtaWNvbi0tc2hhcmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE1XFxcIn0uaHlfYy1pY29uLS1tYWduaWZ5LWdsYXNzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxNlxcXCJ9Lmh5X2MtaWNvbi0td2FybmluZy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMThcXFwifS5oeV9jLWljb24tLXN0YXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE5XFxcIn0uaHlfYy1pY29uLS1zdGFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyMFxcXCJ9Lmh5X2MtaWNvbi0taGVhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIxXFxcIn0uaHlfYy1pY29uLS1saWZlc2F2ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIyXFxcIn0uaHlfYy1pY29uLS1oYW1idXJnZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI0XFxcIn0uaHlfYy1pY29uLS1ncmlkLXNxdWFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjVcXFwifS5oeV9jLWljb24tLWdyaWQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjZcXFwifS5oeV9jLWljb24tLWxpZ2h0YnVsYjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjdcXFwifS5oeV9jLWljb24tLXNwZWVkb21ldGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOFxcXCJ9Lmh5X2MtaWNvbi0tYWRkLXJlbW92ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjlcXFwifS5oeV9jLWljb24tLWNhcnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMwXFxcIn0uaHlfYy1pY29uLS10d2l0dGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzMVxcXCJ9Lmh5X2MtaWNvbi0tZmFjZWJvb2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMyXFxcIn0uaHlfYy1pY29uLS15b3V0dWJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzM1xcXCJ9Lmh5X2MtaWNvbi0tZ29vZ2xlLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM0XFxcIn0uaHlfYy1pY29uLS10cmVuZC1kb3duOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzNVxcXCJ9Lmh5X2MtaWNvbi0tcGxheS1idXR0b24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM2XFxcIn0uaHlfYy1pY29uLS12aWRlby1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzdcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM4XFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzlcXFwifS5oeV9jLWljb24tLWNsb2NrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MFxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2staW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQxXFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0MlxcXCJ9Lmh5X2MtaWNvbi0tdGFibGV0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZXBob25lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NFxcXCJ9Lmh5X2MtaWNvbi0tbW91c2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ1XFxcIn0uaHlfYy1pY29uLS1wcmljZXRhZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDZcXFwifS5oeV9jLWljb24tLXBhcGVyLW5vdGVzLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0N1xcXCJ9Lmh5X2MtaWNvbi0tdHY6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ4XFxcIn0uaHlfYy1pY29uLS1maWxtOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0OVxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUwXFxcIn0uaHlfYy1pY29uLS11c2Itc3RpY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUxXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1MlxcXCJ9Lmh5X2MtaWNvbi0tbWFwLW1hcmtlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTNcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTVcXFwifS5oeV9jLWljb24tLXVzZXItcHJvZmlsZS1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NlxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1N1xcXCJ9Lmh5X2MtaWNvbi0tdXNlcnM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU5XFxcIn0uaHlfYy1pY29uLS11c2Vycy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MFxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjJcXFwifS5oeV9jLWljb24tLXRlbHVzLXQtYm94ZWQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYzXFxcIn0uaHlfYy1pY29uLS1nZWFyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NFxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NVxcXCJ9Lmh5X2MtaWNvbi0tZ2Vhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjZcXFwifS5oeV9jLWljb24tLXBhZGxvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY4XFxcIn0uaHlfYy1pY29uLS1wYWRsb2NrLWludmVyZXRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjlcXFwifS5oeV9jLWljb24tLXN0YWNrZWQtcGFwZXJzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MVxcXCJ9Lmh5X2MtaWNvbi0tbXVzaWMtbm90ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzJcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDczXFxcIn0uaHlfYy1pY29uLS10YWJsZXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc0XFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc1XFxcIn0uaHlfYy1pY29uLS1tb3VzZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzZcXFwifS5oeV9jLWljb24tLXByaWNldGFnLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3N1xcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc4XFxcIn0uaHlfYy1pY29uLS10di1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzlcXFwifS5oeV9jLWljb24tLWZpbG0tY2xhcHBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODBcXFwifS5oeV9jLWljb24tLWVudmVsb3BlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MVxcXCJ9Lmh5X2MtaWNvbi0tcGhvbmUtaGFuZHNldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODJcXFwifS5oeV9jLWljb24tLXVzYi1zdGljay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODNcXFwifS5oeV9jLWljb24tLWhvbWU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg0XFxcIn0uaHlfYy1pY29uLS1ob21lLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg1XFxcIn0uaHlfYy1pY29uLS1ob21lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4NlxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg4XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTFcXFwifS5oeV9jLWljb24tLWFycm93LWRvd24taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkyXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5M1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk0XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5NlxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctbGVmdC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5N1xcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXAtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOThcXFwifS5oeV9jLWljb24tLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk5XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAxXFxcIn0uaHlfYy1pY29uLS1hcnJvdy1yaWdodDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDJcXFwifS5oeV9jLWljb24tLXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA0XFxcIn0uaHlfYy1pY29uLS14LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA1XFxcIn0uaHlfYy1pY29uLS14LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwNlxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwOFxcXCJ9Lmh5X2MtaWNvbi0tY2hlY2ttYXJrLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA5XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEwXFxcIn0uaHlfYy1pY29uLS1pbmZpbml0eTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTFcXFwifS5oeV9jLWljb24tLXBsdXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEyXFxcIn0uaHlfYy1pY29uLS1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTEzXFxcIn0uaHlfYy1pY29uLS1wbHVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNFxcXCJ9Lmh5X2MtaWNvbi0tbWludXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE1XFxcIn0uaHlfYy1pY29uLS1taW51cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExNlxcXCJ9Lmh5X2MtaWNvbi0tbWludXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE3XFxcIn0uaHlfYy1pY29uLS1jaGF0LWJ1YmJsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTlcXFwifS5oeV9jLWljb24tLWNoYXQtZG90czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjBcXFwifS5oeV9jLWljb24tLWNoYXQtY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIxXFxcIn0uaHlfYy1pY29uLS1jaGF0LXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIyXFxcIn0uaHlfYy1pY29uLS1jaGF0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyM1xcXCJ9Lmh5X2MtaWNvbi0tc2ltLWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI1XFxcIn0uaHlfYy1pY29uLS1jYWxjdWxhdG9yOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyNlxcXCJ9Lmh5X2MtaWNvbi0tYmx1ZXRvb3RoLWhlYWRzZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI3XFxcIn0uaHlfYy1pY29uLS1vdXRnb2luZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyOVxcXCJ9Lmh5X2MtaWNvbi0taW5jb21pbmctY2FsbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzBcXFwifS5oeV9jLWljb24tLWNhdXRpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMxXFxcIn0uaHlfYy1pY29uLS13aWZpLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMlxcXCJ9Lmh5X2MtaWNvbi0td2lmaTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzNcXFwifS5oeV9jLWljb24tLXRoaW4tcGx1cy1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNVxcXCJ9Lmh5X2MtaWNvbi0taW5mby1pbnZlcnRlZDpiZWZvcmUsLmh5X2MtaWNvbi0taW5mbzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzZcXFwifS5oeV9jLWljb24tLXRyZW5kLXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzOFxcXCJ9Lmh5X2MtaWNvbi0tZ2xvYmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQwXFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQyXFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ0XFxcIn0uaHlfYy1pY29uLS1jYXJkLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0NVxcXCJ9Lmh5X2MtaWNvbi0tY2FsZW5kYXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ2XFxcIn0uaHlfYy1pY29uLS1vdmVydmlldy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDdcXFwifS5oeV9jLWljb24tLXRlbHVzLWNpcmNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDhcXFwifS5oeV9jLWljb24tLXB1bHNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OVxcXCJ9Lmh5X2MtaWNvbi0tbWlrZS1tb2JpbGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUwXFxcIn0uaHlfYy1pY29uLS1yZXdhcmRzLWJhZGdlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MVxcXCJ9Lmh5X2MtaWNvbi0tZmlsdGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1MlxcXCJ9Lmh5X2MtaWNvbi0tc2NoZWR1bGUtdGFsazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTNcXFwifS5oeV9jLWljb24tLXdhcm5pbmc6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU0XFxcIn0uaHlfYy1pY29uLS1zYXRlbGxpdGU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU1XFxcIn0uaHlfYy1pY29uLS1jYXJ0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1NlxcXCJ9Lmh5X2MtaWNvbi0tbGl2ZS1jaGF0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1N1xcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNThcXFwifS5oeV9jLWljb24tLWJ1c2luZXNzLWNvbm5lY3Q6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU5XFxcIn0uaHlfYy1pY29uLS1jbG91ZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjBcXFwifS5oeV9jLWljb24tLWRhdGE6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYxXFxcIn0uaHlfYy1pY29uLS1kZWxpdmVyeS10cnVjazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjJcXFwifS5oeV9jLWljb24tLXByb3RlY3Rpb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTYzXFxcIn0uaHlfYy1pY29uLS1jb2xvdXItcGlja2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NFxcXCJ9Lmh5X2MtaWNvbi0tbXVsdGktYWNjb3VudC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjVcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NlxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY3XFxcIn0uaHlfYy1pY29uLS1kb2xsYXItc2lnbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjhcXFwifS5oeV9jLWljb24tLWxpbmstYWNjb3VudDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjlcXFwifS5oeV9jLWljb24tLWRhdGEtbWFuYWdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzBcXFwifS5oeV9jLWljb24tLWFjY2Vzc29yaWVzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MVxcXCJ9Lmh5X2MtaWNvbi0tdG9vbHMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcyXFxcIn0uaHlfYy1pY29uLS13ZWItY29uZmVyZW5jZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzNcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NFxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NVxcXCJ9Lmh5X2MtaWNvbi0taXAtZmF4LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3NlxcXCJ9Lmh5X2MtaWNvbi0tbGlua2VkLWluLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3N1xcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc4XFxcIn0uaHlfYy1pY29uLS1taWNyb3Bob25lLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3OVxcXCJ9Lmh5X2MtaWNvbi0td2lmaS1zaWduYWwtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgwXFxcIn0uaHlfYy1pY29uLS1uZXR3b3JraW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4MVxcXCJ9Lmh5X2MtaWNvbi0tY3ljbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgyXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgzXFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1hbHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg0XFxcIn0uaHlfYy1pY29uLS1zbWFydHBob25lLWFkZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODVcXFwifS5oeV9jLWljb24tLWNyZWRpdC1jYXJkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NlxcXCJ9LmMtY29sbGFwc2FibGUtcGFuZWx7Ym9yZGVyOjFweCBzb2xpZCAjZTJlMmUyO2JveC1zaGFkb3c6MCAxcHggM3B4IDFweCAjZTJlMmUyfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXJ7Y3Vyc29yOnBvaW50ZXI7cGFkZGluZzoxMHB4IDE1cHg7cG9zaXRpb246cmVsYXRpdmV9LmMtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlcjphZnRlcntwb3NpdGlvbjphYnNvbHV0ZTtyaWdodDoxZW07dG9wOi43NWVtO2ZvbnQtc2l6ZTouNzVlbTtmb250LWZhbWlseTpUZWx1cyBJY29uO2NvbnRlbnQ6J1xcXFxFMTE0Jztjb2xvcjojNTdhNzA4fS5jLWNvbGxhcHNhYmxlLXBhbmVsX19oZWFkZXItLW9wZW46YWZ0ZXJ7Y29udGVudDonXFxcXEUxMTcnfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5e2JvcmRlci10b3A6MXB4IHNvbGlkICNlMmUyZTI7bWF4LWhlaWdodDowO3BhZGRpbmc6MCAxNXB4Oy13ZWJraXQtdHJhbnNpdGlvbjphbGwgLjNzIGVhc2UtaW4tb3V0O3RyYW5zaXRpb246YWxsIC4zcyBlYXNlLWluLW91dDtvdmVyZmxvdzpoaWRkZW47b3BhY2l0eTowfS5jLWNvbGxhcHNhYmxlLXBhbmVsX19ib2R5LS1vcGVue29wYWNpdHk6MTtwYWRkaW5nOjE1cHg7bWF4LWhlaWdodDo5OTk5cHh9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSA3NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIuYy1sZWdhbC1jb250YWluZXJfX29yZGVyZWQtbGlzdHttYXJnaW4tdG9wOjEwcHg7bWFyZ2luLWJvdHRvbToyMHB4O2xpc3Qtc3R5bGU6ZGVjaW1hbDtsaXN0LXN0eWxlLXR5cGU6ZGVjaW1hbDtwYWRkaW5nLWxlZnQ6MjBweH0uYy1sZWdhbC1jb250YWluZXJfX3Vub3JkZXJlZC1saXN0e21hcmdpbi10b3A6MTBweDttYXJnaW4tYm90dG9tOjIwcHg7cGFkZGluZy1sZWZ0OjIwcHg7bGlzdC1zdHlsZTpub25lO2xpc3Qtc3R5bGUtdHlwZTpub25lfS5jLWxlZ2FsLWNvbnRhaW5lcl9fbGlzdC1pdGVte2xpbmUtaGVpZ2h0OjE5cHg7bWFyZ2luLWJvdHRvbToxMHB4O3BhZGRpbmc6MTBweH0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbS0tYWN0aXZle2JhY2tncm91bmQtY29sb3I6I2Y5ZjFmZn0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSBhe2NvbG9yOiM0OTE2NmQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7Ym9yZGVyLWJvdHRvbToxcHggZG90dGVkO3BhZGRpbmctYm90dG9tOjFweH0uYy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSBhOmhvdmVye2NvbG9yOiM4YzY4YTZ9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gNzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtbGVnYWwtc3Vwe2ZvbnQtc2l6ZTouNzVlbTtsaW5lLWhlaWdodDowO3ZlcnRpY2FsLWFsaWduOnN1cGVyO3RleHQtZGVjb3JhdGlvbjpub25lO3RvcDowIWltcG9ydGFudDtjdXJzb3I6cG9pbnRlcn0uYy1sZWdhbC1zdXAgYXtjb2xvcjojNDkxNjZkfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWVcbiAqKiBtb2R1bGUgaWQgPSA3N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gcmVxdWlyZShcIi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvbGliL2Nzcy1iYXNlLmpzXCIpKCk7XG4vLyBpbXBvcnRzXG5cblxuLy8gbW9kdWxlXG5leHBvcnRzLnB1c2goW21vZHVsZS5pZCwgXCIubm8tc2Nyb2xse292ZXJmbG93LXg6aGlkZGVuO292ZXJmbG93OmhpZGRlbjtvdmVyZmxvdy15OmhpZGRlbjtwb3NpdGlvbjpyZWxhdGl2ZTtoZWlnaHQ6MTAwJX0uYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbntvcGFjaXR5OjA7LXdlYmtpdC10cmFuc2l0aW9uOm9wYWNpdHkgMS4zcyBlYXNlLWluLW91dDt0cmFuc2l0aW9uOm9wYWNpdHkgMS4zcyBlYXNlLWluLW91dH0uYy1vdmVybGF5LWNvbnRhaW5lcl9fY3VydGFpbi0tYWN0aXZle29wYWNpdHk6MTtiYWNrZ3JvdW5kOnJnYmEoMCwwLDAsLjU1KTtwb3NpdGlvbjpmaXhlZDt0b3A6MDtsZWZ0OjA7cmlnaHQ6MDtib3R0b206MH0uYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXN7cG9zaXRpb246Zml4ZWQ7cmlnaHQ6MDt0b3A6MDtib3R0b206MDtiYWNrZ3JvdW5kLWNvbG9yOnJnYmEoMCwwLDAsLjUpOy13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoMTAwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMTAwJSk7LXdlYmtpdC10cmFuc2l0aW9uOjFzIGVhc2UtaW4tb3V0O3RyYW5zaXRpb246MXMgZWFzZS1pbi1vdXR9QG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDo1OTlweCl7LmMtb3ZlcmxheS1jb250YWluZXJfX292ZXJsYXlze3dpZHRoOjEwMCV9fUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjAwcHgpey5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5c3t3aWR0aDo2NiV9fS5jLW92ZXJsYXktY29udGFpbmVyX19vdmVybGF5cy0tYWN0aXZley13ZWJraXQtdHJhbnNmb3JtOnRyYW5zbGF0ZVgoMCk7dHJhbnNmb3JtOnRyYW5zbGF0ZVgoMCk7ei1pbmRleDo5OTk5OX1cIiwgXCJcIl0pO1xuXG4vLyBleHBvcnRzXG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gNzhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsImV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoXCIuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2xpYi9jc3MtYmFzZS5qc1wiKSgpO1xuLy8gaW1wb3J0c1xuXG5cbi8vIG1vZHVsZVxuZXhwb3J0cy5wdXNoKFttb2R1bGUuaWQsIFwiLmMtb3ZlcmxheXtoZWlnaHQ6MTAwJTt3aWR0aDoxMDAlO2JhY2tncm91bmQtY29sb3I6I2ZmZn0uYy1vdmVybGF5X19oZWFkZXJ7cGFkZGluZzoyMHB4O3Bvc2l0aW9uOmZpeGVkO3RvcDowO2hlaWdodDo3NXB4O3dpZHRoOjEwMCU7Ym9yZGVyLWJvdHRvbToxcHggc29saWQgI2UyZTJlMjtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY2Zjd9LmMtb3ZlcmxheV9fY2xvc2UtYnV0dG9ue2N1cnNvcjpwb2ludGVyO2JhY2tncm91bmQ6MDtib3JkZXI6MDtwb3NpdGlvbjphYnNvbHV0ZTt0b3A6MjBweDtyaWdodDoyMHB4O2ZvbnQtZmFtaWx5OlRlbHVzIEljb247Zm9udC1zaXplOjJlbTtjb2xvcjojNDkxNjZkfS5jLW92ZXJsYXlfX2Nsb3NlLWJ1dHRvbjpiZWZvcmV7Y29udGVudDonXFxcXEUxMDYnfS5jLW92ZXJsYXlfX2JvZHl7cG9zaXRpb246Zml4ZWQ7LXdlYmtpdC1vdmVyZmxvdy1zY3JvbGxpbmc6dG91Y2g7b3ZlcmZsb3cteTpzY3JvbGw7dG9wOjc1cHg7Ym90dG9tOjA7d2lkdGg6MTAwJTtwYWRkaW5nOjIwcHggMjBweCA1MHB4fVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDc5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIkAtd2Via2l0LWtleWZyYW1lcyByb3RhdGV7dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDF0dXJuKTt0cmFuc2Zvcm06cm90YXRlKDF0dXJuKX19QGtleWZyYW1lcyByb3RhdGV7dG97LXdlYmtpdC10cmFuc2Zvcm06cm90YXRlKDF0dXJuKTt0cmFuc2Zvcm06cm90YXRlKDF0dXJuKX19QC13ZWJraXQta2V5ZnJhbWVzIGRhc2h7MCV7c3Ryb2tlLWRhc2hhcnJheToxLDIwMDtzdHJva2UtZGFzaG9mZnNldDowfTUwJXtzdHJva2UtZGFzaGFycmF5Ojg5LDIwMDtzdHJva2UtZGFzaG9mZnNldDotMzV9dG97c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTEyNH19QGtleWZyYW1lcyBkYXNoezAle3N0cm9rZS1kYXNoYXJyYXk6MSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6MH01MCV7c3Ryb2tlLWRhc2hhcnJheTo4OSwyMDA7c3Ryb2tlLWRhc2hvZmZzZXQ6LTM1fXRve3N0cm9rZS1kYXNoYXJyYXk6ODksMjAwO3N0cm9rZS1kYXNob2Zmc2V0Oi0xMjR9fUAtd2Via2l0LWtleWZyYW1lcyBzcGlubmVyLWNvbG9yezAlLHRve3N0cm9rZTojNmMwfTI1JXtzdHJva2U6IzZjMH01MCV7c3Ryb2tlOiM1N2E3MDh9NzUle3N0cm9rZTojNTdhNzA4fX1Aa2V5ZnJhbWVzIHNwaW5uZXItY29sb3J7MCUsdG97c3Ryb2tlOiM2YzB9MjUle3N0cm9rZTojNmMwfTUwJXtzdHJva2U6IzU3YTcwOH03NSV7c3Ryb2tlOiM1N2E3MDh9fS5jLXNwaW5uZXJ7ZGlzcGxheTotd2Via2l0LWJveDtkaXNwbGF5Oi1tcy1mbGV4Ym94O2Rpc3BsYXk6ZmxleDstd2Via2l0LWJveC1hbGlnbjpjZW50ZXI7LW1zLWZsZXgtYWxpZ246Y2VudGVyO2FsaWduLWl0ZW1zOmNlbnRlcjtkaXNwbGF5Oi13ZWJraXQtZmxleDstd2Via2l0LWFsaWduLWl0ZW1zOmNlbnRlcjstd2Via2l0LWJveC1wYWNrOmNlbnRlcjstbXMtZmxleC1wYWNrOmNlbnRlcjtqdXN0aWZ5LWNvbnRlbnQ6Y2VudGVyO21hcmdpbjphdXRvOy13ZWJraXQtYm94LW9yaWVudDp2ZXJ0aWNhbDstd2Via2l0LWJveC1kaXJlY3Rpb246bm9ybWFsOy1tcy1mbGV4LWRpcmVjdGlvbjpjb2x1bW47ZmxleC1kaXJlY3Rpb246Y29sdW1ufS5jLXNwaW5uZXItLWZ1bGxzY3JlZW57cG9zaXRpb246Zml4ZWQ7dG9wOjA7bGVmdDowO3JpZ2h0OjA7Ym90dG9tOjA7ei1pbmRleDo5OTk4O3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7YmFja2dyb3VuZDpoc2xhKDAsMCUsMTAwJSwuOCl9LmMtc3Bpbm5lciBzdmd7YW5pbWF0aW9uLW5hbWU6cm90YXRlOy13ZWJraXQtYW5pbWF0aW9uLW5hbWU6cm90YXRlOy1tb3otYW5pbWF0aW9uLW5hbWU6cm90YXRlO2FuaW1hdGlvbi1kdXJhdGlvbjoxLjhzOy13ZWJraXQtYW5pbWF0aW9uLWR1cmF0aW9uOjEuOHM7LW1vei1hbmltYXRpb24tZHVyYXRpb246MS44czthbmltYXRpb24taXRlcmF0aW9uLWNvdW50OmluZmluaXRlOy13ZWJraXQtYW5pbWF0aW9uLWl0ZXJhdGlvbi1jb3VudDppbmZpbml0ZTstbW96LWFuaW1hdGlvbi1pdGVyYXRpb24tY291bnQ6aW5maW5pdGU7YW5pbWF0aW9uLXRpbWluZy1mdW5jdGlvbjpsaW5lYXI7LXdlYmtpdC1hbmltYXRpb24tdGltaW5nLWZ1bmN0aW9uOmxpbmVhcjstbW96LWFuaW1hdGlvbi10aW1pbmctZnVuY3Rpb246bGluZWFyO2hlaWdodDoxMDBweDt3aWR0aDoxMDBweH0uYy1zcGlubmVyIGNpcmNsZXthbmltYXRpb246ZGFzaCAxLjdzIGVhc2UtaW4tb3V0IGluZmluaXRlIDBzLHNwaW5uZXItY29sb3IgNnMgZWFzZS1pbi1vdXQgaW5maW5pdGUgLS43NXM7LXdlYmtpdC1hbmltYXRpb246ZGFzaCAxLjdzIGVhc2UtaW4tb3V0IGluZmluaXRlIDBzLHNwaW5uZXItY29sb3IgNnMgZWFzZS1pbi1vdXQgaW5maW5pdGUgLS43NXM7LW1vei1hbmltYXRpb246ZGFzaCAxLjdzIGVhc2UtaW4tb3V0IGluZmluaXRlIDBzLHNwaW5uZXItY29sb3IgNnMgZWFzZS1pbi1vdXQgaW5maW5pdGUgLS43NXN9XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLXN0ZXAtdHJhY2tlcl9faWNvbiwuaHlfYy1pY29ue2ZvbnQtZmFtaWx5OlRlbHVzIEljb24sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7dGV4dC1kZWNvcmF0aW9uOm5vbmU7dGV4dC1yZW5kZXJpbmc6b3B0aW1pemVMZWdpYmlsaXR5O2NvbG9yOmluaGVyaXQ7dmVydGljYWwtYWxpZ246bWlkZGxlO2ZvbnQtc2l6ZTppbmhlcml0O2xpbmUtaGVpZ2h0OmluaGVyaXR9Lmh5X2MtaWNvbl9fc3F1YXJle2Rpc3BsYXk6aW5saW5lLWJsb2NrO2ZvbnQtc2l6ZToyLjVyZW07bGluZS1oZWlnaHQ6M3JlbTt3aWR0aDozcmVtO2hlaWdodDozcmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLTJ4e2ZvbnQtc2l6ZToyZW19Lmh5X2MtaWNvbi0tM3h7Zm9udC1zaXplOjNlbX0uaHlfYy1pY29uLS00eHtmb250LXNpemU6NGVtfS5oeV9jLWljb25fX3N0eWxlZ3VpZGV7ZGlzcGxheTppbmxpbmUtYmxvY2s7Zm9udC1zaXplOjJyZW07bGluZS1oZWlnaHQ6NHJlbTt3aWR0aDo0cmVtO2hlaWdodDo0cmVtO3RleHQtYWxpZ246Y2VudGVyfS5oeV9jLWljb24tLWNpcmNsZS10aGljay1vdXRsaW5lOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMVxcXCJ9Lmh5X2MtaWNvbi0tY2lyY2xlLXNvbGlkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwMlxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LXVwOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwNVxcXCJ9Lmh5X2MtaWNvbi0tYmlnLWFycm93LWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDA2XFxcIn0uaHlfYy1pY29uLS10ZWx1cy1sb2dvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAwOVxcXCJ9Lmh5X2MtaWNvbi0tYmFyLWNoYXJ0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMFxcXCJ9Lmh5X2MtaWNvbi0tcGljdHVyZS1mcmFtZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTFcXFwifS5oeV9jLWljb24tLXBhcGVyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxMlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDEzXFxcIn0uaHlfYy1pY29uLS1mb2xkZXItc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE0XFxcIn0uaHlfYy1pY29uLS1zaGFyZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTVcXFwifS5oeV9jLWljb24tLW1hZ25pZnktZ2xhc3M6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDE2XFxcIn0uaHlfYy1pY29uLS13YXJuaW5nLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAxOFxcXCJ9Lmh5X2MtaWNvbi0tc3Rhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMTlcXFwifS5oeV9jLWljb24tLXN0YXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDIwXFxcIn0uaHlfYy1pY29uLS1oZWFydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjFcXFwifS5oeV9jLWljb24tLWxpZmVzYXZlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjJcXFwifS5oeV9jLWljb24tLWhhbWJ1cmdlcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMjRcXFwifS5oeV9jLWljb24tLWdyaWQtc3F1YXJlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNVxcXCJ9Lmh5X2MtaWNvbi0tZ3JpZC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyNlxcXCJ9Lmh5X2MtaWNvbi0tbGlnaHRidWxiOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyN1xcXCJ9Lmh5X2MtaWNvbi0tc3BlZWRvbWV0ZXItaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDI4XFxcIn0uaHlfYy1pY29uLS1hZGQtcmVtb3ZlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAyOVxcXCJ9Lmh5X2MtaWNvbi0tY2FydDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzBcXFwifS5oeV9jLWljb24tLXR3aXR0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMxXFxcIn0uaHlfYy1pY29uLS1mYWNlYm9vazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzJcXFwifS5oeV9jLWljb24tLXlvdXR1YmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDMzXFxcIn0uaHlfYy1pY29uLS1nb29nbGUtcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzRcXFwifS5oeV9jLWljb24tLXRyZW5kLWRvd246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDM1XFxcIn0uaHlfYy1pY29uLS1wbGF5LWJ1dHRvbi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzZcXFwifS5oeV9jLWljb24tLXZpZGVvLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzN1xcXCJ9Lmh5X2MtaWNvbi0taW5maW5pdHktY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwMzhcXFwifS5oeV9jLWljb24tLWluZmluaXR5LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTAzOVxcXCJ9Lmh5X2MtaWNvbi0tY2xvY2s6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQwXFxcIn0uaHlfYy1pY29uLS1jbG9jay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDFcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQyXFxcIn0uaHlfYy1pY29uLS10YWJsZXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQzXFxcIn0uaHlfYy1pY29uLS1ob21lcGhvbmU6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ0XFxcIn0uaHlfYy1pY29uLS1tb3VzZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDVcXFwifS5oeV9jLWljb24tLXByaWNldGFnOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA0NlxcXCJ9Lmh5X2MtaWNvbi0tcGFwZXItbm90ZXMtc29saWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ3XFxcIn0uaHlfYy1pY29uLS10djpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNDhcXFwifS5oeV9jLWljb24tLWZpbG06YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDQ5XFxcIn0uaHlfYy1pY29uLS1lbnZlbG9wZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTBcXFwifS5oeV9jLWljb24tLXVzYi1zdGljazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTFcXFwifS5oeV9jLWljb24tLW1hcC1tYXJrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDUyXFxcIn0uaHlfYy1pY29uLS1tYXAtbWFya2VyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1M1xcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA1NVxcXCJ9Lmh5X2MtaWNvbi0tdXNlci1wcm9maWxlLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU2XFxcIn0uaHlfYy1pY29uLS11c2VyLXByb2ZpbGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDU3XFxcIn0uaHlfYy1pY29uLS11c2VyczpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNTlcXFwifS5oeV9jLWljb24tLXVzZXJzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDYwXFxcIn0uaHlfYy1pY29uLS10ZWx1cy10LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2MlxcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtdC1ib3hlZC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjNcXFwifS5oeV9jLWljb24tLWdlYXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY0XFxcIn0uaHlfYy1pY29uLS1nZWFyLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDY1XFxcIn0uaHlfYy1pY29uLS1nZWFyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2NlxcXCJ9Lmh5X2MtaWNvbi0tcGFkbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNjhcXFwifS5oeV9jLWljb24tLXBhZGxvY2staW52ZXJldGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA2OVxcXCJ9Lmh5X2MtaWNvbi0tc3RhY2tlZC1wYXBlcnMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDcxXFxcIn0uaHlfYy1pY29uLS1tdXNpYy1ub3RlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3MlxcXCJ9Lmh5X2MtaWNvbi0tc21hcnRwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzNcXFwifS5oeV9jLWljb24tLXRhYmxldC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzRcXFwifS5oeV9jLWljb24tLWhvbWVwaG9uZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzVcXFwifS5oeV9jLWljb24tLW1vdXNlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3NlxcXCJ9Lmh5X2MtaWNvbi0tcHJpY2V0YWctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDc3XFxcIn0uaHlfYy1pY29uLS1wYXBlci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwNzhcXFwifS5oeV9jLWljb24tLXR2LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA3OVxcXCJ9Lmh5X2MtaWNvbi0tZmlsbS1jbGFwcGVyLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MFxcXCJ9Lmh5X2MtaWNvbi0tZW52ZWxvcGUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDgxXFxcIn0uaHlfYy1pY29uLS1waG9uZS1oYW5kc2V0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4MlxcXCJ9Lmh5X2MtaWNvbi0tdXNiLXN0aWNrLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA4M1xcXCJ9Lmh5X2MtaWNvbi0taG9tZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODRcXFwifS5oeV9jLWljb24tLWhvbWUtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODVcXFwifS5oeV9jLWljb24tLWhvbWUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDg2XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhcjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwODhcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5MVxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bi1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTJcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDkzXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTRcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk1XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1kb3duLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk2XFxcIn0uaHlfYy1pY29uLS1hcnJvdy1sZWZ0LWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDk3XFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cC1jaXJjbGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTA5OFxcXCJ9Lmh5X2MtaWNvbi0tYXJyb3ctZG93bjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUwOTlcXFwifS5oeV9jLWljb24tLWFycm93LWxlZnQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTAwXFxcIn0uaHlfYy1pY29uLS1hcnJvdy11cDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDFcXFwifS5oeV9jLWljb24tLWFycm93LXJpZ2h0OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEwMlxcXCJ9Lmh5X2MtaWNvbi0teDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDRcXFwifS5oeV9jLWljb24tLXgtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDVcXFwifS5oeV9jLWljb24tLXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA2XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcms6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTA4XFxcIn0uaHlfYy1pY29uLS1jaGVja21hcmstY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMDlcXFwifS5oeV9jLWljb24tLWNoZWNrbWFyay1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTBcXFwifS5oeV9jLWljb24tLWluZmluaXR5OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMVxcXCJ9Lmh5X2MtaWNvbi0tcGx1czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTJcXFwifS5oeV9jLWljb24tLXBsdXMtY2lyY2xlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTNcXFwifS5oeV9jLWljb24tLXBsdXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE0XFxcIn0uaHlfYy1pY29uLS1taW51czpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTVcXFwifS5oeV9jLWljb24tLW1pbnVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTE2XFxcIn0uaHlfYy1pY29uLS1taW51cy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMTdcXFwifS5oeV9jLWljb24tLWNoYXQtYnViYmxlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExOVxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1kb3RzOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEyMFxcXCJ9Lmh5X2MtaWNvbi0tY2hhdC1jbG9jazpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjFcXFwifS5oeV9jLWljb24tLWNoYXQteDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjJcXFwifS5oeV9jLWljb24tLWNoYXQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTIzXFxcIn0uaHlfYy1pY29uLS1zaW0tY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjVcXFwifS5oeV9jLWljb24tLWNhbGN1bGF0b3I6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI2XFxcIn0uaHlfYy1pY29uLS1ibHVldG9vdGgtaGVhZHNldDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMjdcXFwifS5oeV9jLWljb24tLW91dGdvaW5nLWNhbGw6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTI5XFxcIn0uaHlfYy1pY29uLS1pbmNvbWluZy1jYWxsOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzMFxcXCJ9Lmh5X2MtaWNvbi0tY2F1dGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxMzFcXFwifS5oeV9jLWljb24tLXdpZmktaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTMyXFxcIn0uaHlfYy1pY29uLS13aWZpOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzM1xcXCJ9Lmh5X2MtaWNvbi0tdGhpbi1wbHVzLWNpcmNsZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM1XFxcIn0uaHlfYy1pY29uLS1pbmZvLWludmVydGVkOmJlZm9yZSwuaHlfYy1pY29uLS1pbmZvOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTEzNlxcXCJ9Lmh5X2MtaWNvbi0tdHJlbmQtdXA6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTM4XFxcIn0uaHlfYy1pY29uLS1nbG9iZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDBcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDJcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctbGVmdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDRcXFwifS5oeV9jLWljb24tLWNhcmQtYXJyb3ctcmlnaHQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ1XFxcIn0uaHlfYy1pY29uLS1jYWxlbmRhci1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNDZcXFwifS5oeV9jLWljb24tLW92ZXJ2aWV3LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0N1xcXCJ9Lmh5X2MtaWNvbi0tdGVsdXMtY2lyY2xlLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE0OFxcXCJ9Lmh5X2MtaWNvbi0tcHVsc2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTQ5XFxcIn0uaHlfYy1pY29uLS1taWtlLW1vYmlsZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTBcXFwifS5oeV9jLWljb24tLXJld2FyZHMtYmFkZ2U6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUxXFxcIn0uaHlfYy1pY29uLS1maWx0ZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTUyXFxcIn0uaHlfYy1pY29uLS1zY2hlZHVsZS10YWxrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1M1xcXCJ9Lmh5X2MtaWNvbi0td2FybmluZzpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTRcXFwifS5oeV9jLWljb24tLXNhdGVsbGl0ZTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTVcXFwifS5oeV9jLWljb24tLWNhcnQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU2XFxcIn0uaHlfYy1pY29uLS1saXZlLWNoYXQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTU3XFxcIn0uaHlfYy1pY29uLS1idXNpbmVzcy1jb25uZWN0LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE1OFxcXCJ9Lmh5X2MtaWNvbi0tYnVzaW5lc3MtY29ubmVjdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNTlcXFwifS5oeV9jLWljb24tLWNsb3VkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MFxcXCJ9Lmh5X2MtaWNvbi0tZGF0YTpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjFcXFwifS5oeV9jLWljb24tLWRlbGl2ZXJ5LXRydWNrOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2MlxcXCJ9Lmh5X2MtaWNvbi0tcHJvdGVjdGlvbjpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjNcXFwifS5oeV9jLWljb24tLWNvbG91ci1waWNrZXI6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY0XFxcIn0uaHlfYy1pY29uLS1tdWx0aS1hY2NvdW50LWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2NVxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXMtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTY2XFxcIn0uaHlfYy1pY29uLS1jcmVkaXQtY2FyZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNjdcXFwifS5oeV9jLWljb24tLWRvbGxhci1zaWduOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OFxcXCJ9Lmh5X2MtaWNvbi0tbGluay1hY2NvdW50OmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE2OVxcXCJ9Lmh5X2MtaWNvbi0tZGF0YS1tYW5hZ2VyOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3MFxcXCJ9Lmh5X2MtaWNvbi0tYWNjZXNzb3JpZXM6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTcxXFxcIn0uaHlfYy1pY29uLS10b29scy1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzJcXFwifS5oeV9jLWljb24tLXdlYi1jb25mZXJlbmNlOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE3M1xcXCJ9Lmh5X2MtaWNvbi0td2ViLWNvbmZlcmVuY2UtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc0XFxcIn0uaHlfYy1pY29uLS1pcC1mYXg6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc1XFxcIn0uaHlfYy1pY29uLS1pcC1mYXgtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc2XFxcIn0uaHlfYy1pY29uLS1saW5rZWQtaW4taW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc3XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxNzhcXFwifS5oeV9jLWljb24tLW1pY3JvcGhvbmUtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTc5XFxcIn0uaHlfYy1pY29uLS13aWZpLXNpZ25hbC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODBcXFwifS5oeV9jLWljb24tLW5ldHdvcmtpbmctaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTgxXFxcIn0uaHlfYy1pY29uLS1jeWNsZS1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODJcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdC1pbnZlcnRlZDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODNcXFwifS5oeV9jLWljb24tLXdpZmktc2lnbmFsLWFsdDpiZWZvcmV7Y29udGVudDpcXFwiXFxcXEUxODRcXFwifS5oeV9jLWljb24tLXNtYXJ0cGhvbmUtYWRkLWludmVydGVkOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTE4NVxcXCJ9Lmh5X2MtaWNvbi0tY3JlZGl0LWNhcmQtaW52ZXJ0ZWQ6YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMTg2XFxcIn0uYy1zdGVwLXRyYWNrZXJ7bGlzdC1zdHlsZTpub25lO3BhZGRpbmc6MDtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5Oi13ZWJraXQtYm94O2Rpc3BsYXk6LW1zLWZsZXhib3g7ZGlzcGxheTpmbGV4Oy13ZWJraXQtYm94LXBhY2s6anVzdGlmeTstbXMtZmxleC1wYWNrOmp1c3RpZnk7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47bWFyZ2luOjFyZW0gLTEuNXJlbX1AbWVkaWEgc2NyZWVuIGFuZCAobWluLXdpZHRoOjYwMHB4KXsuYy1zdGVwLXRyYWNrZXJ7cGFkZGluZy1ib3R0b206Mi41cmVtO21hcmdpbjoxcmVtIDB9fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcHt3aWR0aDoxMDAlO3Bvc2l0aW9uOnJlbGF0aXZlO3RleHQtYWxpZ246Y2VudGVyfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcDphZnRlciwuYy1zdGVwLXRyYWNrZXJfX3N0ZXA6YmVmb3Jle3Bvc2l0aW9uOmFic29sdXRlO3RvcDo1MCU7LXdlYmtpdC10cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt0cmFuc2Zvcm06dHJhbnNsYXRlWSgtNTAlKTt3aWR0aDpjYWxjKDUwJSAtIDEuNHJlbSk7Y29udGVudDonICc7Ym9yZGVyLWJvdHRvbTouNnJlbSBzb2xpZCAjYWVhZWFlfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcDpiZWZvcmV7bGVmdDowfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcDphZnRlcntyaWdodDowfS5jLXN0ZXAtdHJhY2tlciAuYy1zdGVwLXRyYWNrZXJfX3N0ZXA6Zmlyc3QtY2hpbGQ6YmVmb3JlLC5jLXN0ZXAtdHJhY2tlciAuYy1zdGVwLXRyYWNrZXJfX3N0ZXA6bGFzdC1jaGlsZDphZnRlcntjb250ZW50Om5vbmV9LmMtc3RlcC10cmFja2VyX19sYWJlbHtwb3NpdGlvbjphYnNvbHV0ZTtib3R0b206LTNyZW07bGVmdDowO2ZvbnQtc2l6ZToxLjdyZW07d2lkdGg6MTAwJTtoZWlnaHQ6Mi41cmVtO2ZvbnQtZmFtaWx5OlRlbHVzIFJlZ3VsYXIsSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6IzY2Nn1AbWVkaWEgc2NyZWVuIGFuZCAobWF4LXdpZHRoOjU5OXB4KXsuYy1zdGVwLXRyYWNrZXJfX2xhYmVse2Rpc3BsYXk6bm9uZX19LmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmUgLmMtc3RlcC10cmFja2VyX19sYWJlbHtmb250LWZhbWlseTpUZWx1cyBNZWRpdW0sSGVsdmV0aWNhIE5ldWUsSGVsdmV0aWNhLEFyaWFsLHNhbnMtc2VyaWY7Y29sb3I6IzQwODAwMH0uYy1zdGVwLXRyYWNrZXJfX2ljb257Zm9udC1zaXplOjNyZW07Y29sb3I6I2FlYWVhZX0uYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAxXFxcIn0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWFjdGl2ZSAuYy1zdGVwLXRyYWNrZXJfX2ljb246YmVmb3Jle2NvbnRlbnQ6XFxcIlxcXFxFMDAyXFxcIn0uYy1zdGVwLXRyYWNrZXJfX3NldHAtLWNsaWNrYWJsZSBhe2N1cnNvcjpwb2ludGVyfS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGU6YWZ0ZXJ7Ym9yZGVyLWJvdHRvbTouNnJlbSBzb2xpZCAjNTdhNzA4fS5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZXtjb250ZW50OlxcXCJcXFxcRTExMFxcXCJ9LmMtc3RlcC10cmFja2VyX19zdGVwLS1hY3RpdmUgLmMtc3RlcC10cmFja2VyX19pY29uOmJlZm9yZSwuYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlIC5jLXN0ZXAtdHJhY2tlcl9faWNvbjpiZWZvcmV7Y29sb3I6IzU3YTcwOH0uYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlKy5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlOmJlZm9yZSwuYy1zdGVwLXRyYWNrZXJfX3N0ZXAtLWNvbXBsZXRlKy5jLXN0ZXAtdHJhY2tlcl9fc3RlcC0tY29tcGxldGU6YmVmb3Jle2JvcmRlci1ib3R0b206LjZyZW0gc29saWQgIzU3YTcwOH0uYy1zdGVwLXRyYWNrZXItbW9iaWxlLWxhYmVse2ZvbnQtc2l6ZToxLjdyZW07dGV4dC1hbGlnbjpjZW50ZXI7Zm9udC1mYW1pbHk6VGVsdXMgUmVndWxhcixIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNjY2fUBtZWRpYSBzY3JlZW4gYW5kIChtaW4td2lkdGg6NjAwcHgpey5jLXN0ZXAtdHJhY2tlci1tb2JpbGUtbGFiZWx7ZGlzcGxheTpub25lfX0uYy1zdGVwLXRyYWNrZXItbW9iaWxlLWxhYmVsX19zdGVwe2ZvbnQtZmFtaWx5OlRlbHVzIE1lZGl1bSxIZWx2ZXRpY2EgTmV1ZSxIZWx2ZXRpY2EsQXJpYWwsc2Fucy1zZXJpZjtjb2xvcjojNDA4MDAwfVwiLCBcIlwiXSk7XG5cbi8vIGV4cG9ydHNcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDgxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSByZXF1aXJlKFwiLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9saWIvY3NzLWJhc2UuanNcIikoKTtcbi8vIGltcG9ydHNcblxuXG4vLyBtb2R1bGVcbmV4cG9ydHMucHVzaChbbW9kdWxlLmlkLCBcIi5jLXRhYnNfX2hlYWRlcntsaXN0LXN0eWxlOm5vbmU7cGFkZGluZzowO21hcmdpbjowO2Rpc3BsYXk6LXdlYmtpdC1ib3g7ZGlzcGxheTotbXMtZmxleGJveDtkaXNwbGF5OmZsZXh9LmMtdGFic19faGVhZGVyLWl0ZW17bWFyZ2luLXRvcDoycHg7aGVpZ2h0OjQ1cHg7cGFkZGluZzowIDJweDstd2Via2l0LWJveC1mbGV4OjE7LW1zLWZsZXg6MTtmbGV4OjF9LmMtdGFic19faGVhZGVyLWl0ZW0gYXtiYWNrZ3JvdW5kLWNvbG9yOiNlMmUyZTI7dGV4dC1kZWNvcmF0aW9uOm5vbmU7cGFkZGluZzoxM3B4IDIwcHg7Y29sb3I6IzQ5MTY2ZDtkaXNwbGF5OmJsb2NrfS5jLXRhYnNfX2hlYWRlci1pdGVtLS1hY3RpdmV7bWFyZ2luLXRvcDoxcHg7aGVpZ2h0OjQ2cHg7YmFja2dyb3VuZC1jb2xvcjojZmZmO2JvcmRlci10b3A6MXB4IHNvbGlkICNlMmUyZTI7Ym9yZGVyLWxlZnQ6MXB4IHNvbGlkICNlMmUyZTI7Ym9yZGVyLXJpZ2h0OjFweCBzb2xpZCAjZTJlMmUyfS5jLXRhYnNfX2hlYWRlci1pdGVtLS1hY3RpdmUgYXtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Y29sb3I6IzMzM30uYy10YWJzX19oZWFkZXItaXRlbS0tZGlzYWJsZWQgYXtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY2Zjc7Y29sb3I6I2FlYWVhZTtjdXJzb3I6bm90LWFsbG93ZWR9LmMtdGFic19fYm9keXtiYWNrZ3JvdW5kLWNvbG9yOiNmZmY7Ym9yZGVyOjFweCBzb2xpZCAjZTJlMmUyO21hcmdpbi10b3A6LTFweDtwYWRkaW5nOjIwcHh9LmMtdGFic19fcGFuZXtkaXNwbGF5OmJsb2NrO2JvcmRlci10b3A6bm9uZTtvcGFjaXR5OjA7aGVpZ2h0OjA7b3ZlcmZsb3c6aGlkZGVuO3BhZGRpbmc6MCA1cHg7LXdlYmtpdC10cmFuc2l0aW9uOmFsbCAuNXMgZWFzZS1vdXQ7dHJhbnNpdGlvbjphbGwgLjVzIGVhc2Utb3V0fS5jLXRhYnNfX3BhbmUtLWFjdGl2ZXtvcGFjaXR5OjE7cGFkZGluZzo1cHg7aGVpZ2h0OmF1dG99XCIsIFwiXCJdKTtcblxuLy8gZXhwb3J0c1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy52dWVcbiAqKiBtb2R1bGUgaWQgPSA4MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBAb3ZlcnZpZXcgZXM2LXByb21pc2UgLSBhIHRpbnkgaW1wbGVtZW50YXRpb24gb2YgUHJvbWlzZXMvQSsuXG4gKiBAY29weXJpZ2h0IENvcHlyaWdodCAoYykgMjAxNCBZZWh1ZGEgS2F0eiwgVG9tIERhbGUsIFN0ZWZhbiBQZW5uZXIgYW5kIGNvbnRyaWJ1dG9ycyAoQ29udmVyc2lvbiB0byBFUzYgQVBJIGJ5IEpha2UgQXJjaGliYWxkKVxuICogQGxpY2Vuc2UgICBMaWNlbnNlZCB1bmRlciBNSVQgbGljZW5zZVxuICogICAgICAgICAgICBTZWUgaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2pha2VhcmNoaWJhbGQvZXM2LXByb21pc2UvbWFzdGVyL0xJQ0VOU0VcbiAqIEB2ZXJzaW9uICAgMy4yLjFcbiAqL1xuXG4oZnVuY3Rpb24oKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRvYmplY3RPckZ1bmN0aW9uKHgpIHtcbiAgICAgIHJldHVybiB0eXBlb2YgeCA9PT0gJ2Z1bmN0aW9uJyB8fCAodHlwZW9mIHggPT09ICdvYmplY3QnICYmIHggIT09IG51bGwpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNGdW5jdGlvbih4KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHggPT09ICdmdW5jdGlvbic7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc01heWJlVGhlbmFibGUoeCkge1xuICAgICAgcmV0dXJuIHR5cGVvZiB4ID09PSAnb2JqZWN0JyAmJiB4ICE9PSBudWxsO1xuICAgIH1cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5O1xuICAgIGlmICghQXJyYXkuaXNBcnJheSkge1xuICAgICAgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheSA9IGZ1bmN0aW9uICh4KSB7XG4gICAgICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoeCkgPT09ICdbb2JqZWN0IEFycmF5XSc7XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkdXRpbHMkJF9pc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbiAgICB9XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHV0aWxzJCRpc0FycmF5ID0gbGliJGVzNiRwcm9taXNlJHV0aWxzJCRfaXNBcnJheTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiA9IDA7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR2ZXJ0eE5leHQ7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRjdXN0b21TY2hlZHVsZXJGbjtcblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcCA9IGZ1bmN0aW9uIGFzYXAoY2FsbGJhY2ssIGFyZykge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2xpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW5dID0gY2FsbGJhY2s7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiArIDFdID0gYXJnO1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGxlbiArPSAyO1xuICAgICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW4gPT09IDIpIHtcbiAgICAgICAgLy8gSWYgbGVuIGlzIDIsIHRoYXQgbWVhbnMgdGhhdCB3ZSBuZWVkIHRvIHNjaGVkdWxlIGFuIGFzeW5jIGZsdXNoLlxuICAgICAgICAvLyBJZiBhZGRpdGlvbmFsIGNhbGxiYWNrcyBhcmUgcXVldWVkIGJlZm9yZSB0aGUgcXVldWUgaXMgZmx1c2hlZCwgdGhleVxuICAgICAgICAvLyB3aWxsIGJlIHByb2Nlc3NlZCBieSB0aGlzIGZsdXNoIHRoYXQgd2UgYXJlIHNjaGVkdWxpbmcuXG4gICAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4pIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4obGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldFNjaGVkdWxlcihzY2hlZHVsZUZuKSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkY3VzdG9tU2NoZWR1bGVyRm4gPSBzY2hlZHVsZUZuO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRBc2FwKGFzYXBGbikge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXAgPSBhc2FwRm47XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKSA/IHdpbmRvdyA6IHVuZGVmaW5lZDtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwgPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3NlcldpbmRvdyB8fCB7fTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJGFzYXAkJEJyb3dzZXJNdXRhdGlvbk9ic2VydmVyID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGJyb3dzZXJHbG9iYWwuTXV0YXRpb25PYnNlcnZlciB8fCBsaWIkZXM2JHByb21pc2UkYXNhcCQkYnJvd3Nlckdsb2JhbC5XZWJLaXRNdXRhdGlvbk9ic2VydmVyO1xuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNOb2RlID0gdHlwZW9mIHNlbGYgPT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHByb2Nlc3MpID09PSAnW29iamVjdCBwcm9jZXNzXSc7XG5cbiAgICAvLyB0ZXN0IGZvciB3ZWIgd29ya2VyIGJ1dCBub3QgaW4gSUUxMFxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkYXNhcCQkaXNXb3JrZXIgPSB0eXBlb2YgVWludDhDbGFtcGVkQXJyYXkgIT09ICd1bmRlZmluZWQnICYmXG4gICAgICB0eXBlb2YgaW1wb3J0U2NyaXB0cyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgIHR5cGVvZiBNZXNzYWdlQ2hhbm5lbCAhPT0gJ3VuZGVmaW5lZCc7XG5cbiAgICAvLyBub2RlXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrKCkge1xuICAgICAgLy8gbm9kZSB2ZXJzaW9uIDAuMTAueCBkaXNwbGF5cyBhIGRlcHJlY2F0aW9uIHdhcm5pbmcgd2hlbiBuZXh0VGljayBpcyB1c2VkIHJlY3Vyc2l2ZWx5XG4gICAgICAvLyBzZWUgaHR0cHM6Ly9naXRodWIuY29tL2N1am9qcy93aGVuL2lzc3Vlcy80MTAgZm9yIGRldGFpbHNcbiAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgcHJvY2Vzcy5uZXh0VGljayhsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyB2ZXJ0eFxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyKCkge1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0KGxpYiRlczYkcHJvbWlzZSRhc2FwJCRmbHVzaCk7XG4gICAgICB9O1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VNdXRhdGlvbk9ic2VydmVyKCkge1xuICAgICAgdmFyIGl0ZXJhdGlvbnMgPSAwO1xuICAgICAgdmFyIG9ic2VydmVyID0gbmV3IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRCcm93c2VyTXV0YXRpb25PYnNlcnZlcihsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2gpO1xuICAgICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJyk7XG4gICAgICBvYnNlcnZlci5vYnNlcnZlKG5vZGUsIHsgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9KTtcblxuICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICBub2RlLmRhdGEgPSAoaXRlcmF0aW9ucyA9ICsraXRlcmF0aW9ucyAlIDIpO1xuICAgICAgfTtcbiAgICB9XG5cbiAgICAvLyB3ZWIgd29ya2VyXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU1lc3NhZ2VDaGFubmVsKCkge1xuICAgICAgdmFyIGNoYW5uZWwgPSBuZXcgTWVzc2FnZUNoYW5uZWwoKTtcbiAgICAgIGNoYW5uZWwucG9ydDEub25tZXNzYWdlID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoO1xuICAgICAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2hhbm5lbC5wb3J0Mi5wb3N0TWVzc2FnZSgwKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZVNldFRpbWVvdXQoKSB7XG4gICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHNldFRpbWVvdXQobGliJGVzNiRwcm9taXNlJGFzYXAkJGZsdXNoLCAxKTtcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZSA9IG5ldyBBcnJheSgxMDAwKTtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkZmx1c2goKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRsZW47IGkrPTIpIHtcbiAgICAgICAgdmFyIGNhbGxiYWNrID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2ldO1xuICAgICAgICB2YXIgYXJnID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHF1ZXVlW2krMV07XG5cbiAgICAgICAgY2FsbGJhY2soYXJnKTtcblxuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkcXVldWVbaV0gPSB1bmRlZmluZWQ7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRxdWV1ZVtpKzFdID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkbGVuID0gMDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXR0ZW1wdFZlcnR4KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdmFyIHIgPSByZXF1aXJlO1xuICAgICAgICB2YXIgdmVydHggPSByKCd2ZXJ0eCcpO1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkdmVydHhOZXh0ID0gdmVydHgucnVuT25Mb29wIHx8IHZlcnR4LnJ1bk9uQ29udGV4dDtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VWZXJ0eFRpbWVyKCk7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoO1xuICAgIC8vIERlY2lkZSB3aGF0IGFzeW5jIG1ldGhvZCB0byB1c2UgdG8gdHJpZ2dlcmluZyBwcm9jZXNzaW5nIG9mIHF1ZXVlZCBjYWxsYmFja3M6XG4gICAgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc05vZGUpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU5leHRUaWNrKCk7XG4gICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkYXNhcCQkQnJvd3Nlck11dGF0aW9uT2JzZXJ2ZXIpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHVzZU11dGF0aW9uT2JzZXJ2ZXIoKTtcbiAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRpc1dvcmtlcikge1xuICAgICAgbGliJGVzNiRwcm9taXNlJGFzYXAkJHNjaGVkdWxlRmx1c2ggPSBsaWIkZXM2JHByb21pc2UkYXNhcCQkdXNlTWVzc2FnZUNoYW5uZWwoKTtcbiAgICB9IGVsc2UgaWYgKGxpYiRlczYkcHJvbWlzZSRhc2FwJCRicm93c2VyV2luZG93ID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIHJlcXVpcmUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzY2hlZHVsZUZsdXNoID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGF0dGVtcHRWZXJ0eCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkc2NoZWR1bGVGbHVzaCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCR1c2VTZXRUaW1lb3V0KCk7XG4gICAgfVxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSR0aGVuJCR0aGVuKG9uRnVsZmlsbG1lbnQsIG9uUmVqZWN0aW9uKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcztcblxuICAgICAgdmFyIGNoaWxkID0gbmV3IHRoaXMuY29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cbiAgICAgIGlmIChjaGlsZFtsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQUk9NSVNFX0lEXSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlKGNoaWxkKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHN0YXRlID0gcGFyZW50Ll9zdGF0ZTtcblxuICAgICAgaWYgKHN0YXRlKSB7XG4gICAgICAgIHZhciBjYWxsYmFjayA9IGFyZ3VtZW50c1tzdGF0ZSAtIDFdO1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChmdW5jdGlvbigpe1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGludm9rZUNhbGxiYWNrKHN0YXRlLCBjaGlsZCwgY2FsbGJhY2ssIHBhcmVudC5fcmVzdWx0KTtcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkdGhlbiQkZGVmYXVsdCA9IGxpYiRlczYkcHJvbWlzZSR0aGVuJCR0aGVuO1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJHJlc29sdmUob2JqZWN0KSB7XG4gICAgICAvKmpzaGludCB2YWxpZHRoaXM6dHJ1ZSAqL1xuICAgICAgdmFyIENvbnN0cnVjdG9yID0gdGhpcztcblxuICAgICAgaWYgKG9iamVjdCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JyAmJiBvYmplY3QuY29uc3RydWN0b3IgPT09IENvbnN0cnVjdG9yKSB7XG4gICAgICAgIHJldHVybiBvYmplY3Q7XG4gICAgICB9XG5cbiAgICAgIHZhciBwcm9taXNlID0gbmV3IENvbnN0cnVjdG9yKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVzb2x2ZShwcm9taXNlLCBvYmplY3QpO1xuICAgICAgcmV0dXJuIHByb21pc2U7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkcmVzb2x2ZTtcbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUFJPTUlTRV9JRCA9IE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnN1YnN0cmluZygxNik7XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wKCkge31cblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HICAgPSB2b2lkIDA7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCA9IDE7XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEICA9IDI7XG5cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IgPSBuZXcgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkRXJyb3JPYmplY3QoKTtcblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHNlbGZGdWxmaWxsbWVudCgpIHtcbiAgICAgIHJldHVybiBuZXcgVHlwZUVycm9yKFwiWW91IGNhbm5vdCByZXNvbHZlIGEgcHJvbWlzZSB3aXRoIGl0c2VsZlwiKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRjYW5ub3RSZXR1cm5Pd24oKSB7XG4gICAgICByZXR1cm4gbmV3IFR5cGVFcnJvcignQSBwcm9taXNlcyBjYWxsYmFjayBjYW5ub3QgcmV0dXJuIHRoYXQgc2FtZSBwcm9taXNlLicpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4ocHJvbWlzZSkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIHByb21pc2UudGhlbjtcbiAgICAgIH0gY2F0Y2goZXJyb3IpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkR0VUX1RIRU5fRVJST1IuZXJyb3IgPSBlcnJvcjtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEdFVF9USEVOX0VSUk9SO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeVRoZW4odGhlbiwgdmFsdWUsIGZ1bGZpbGxtZW50SGFuZGxlciwgcmVqZWN0aW9uSGFuZGxlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhlbi5jYWxsKHZhbHVlLCBmdWxmaWxsbWVudEhhbmRsZXIsIHJlamVjdGlvbkhhbmRsZXIpO1xuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZUZvcmVpZ25UaGVuYWJsZShwcm9taXNlLCB0aGVuYWJsZSwgdGhlbikge1xuICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGZ1bmN0aW9uKHByb21pc2UpIHtcbiAgICAgICAgdmFyIHNlYWxlZCA9IGZhbHNlO1xuICAgICAgICB2YXIgZXJyb3IgPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCR0cnlUaGVuKHRoZW4sIHRoZW5hYmxlLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGlmIChzZWFsZWQpIHsgcmV0dXJuOyB9XG4gICAgICAgICAgc2VhbGVkID0gdHJ1ZTtcbiAgICAgICAgICBpZiAodGhlbmFibGUgIT09IHZhbHVlKSB7XG4gICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCB2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICBpZiAoc2VhbGVkKSB7IHJldHVybjsgfVxuICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG5cbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgICAgfSwgJ1NldHRsZTogJyArIChwcm9taXNlLl9sYWJlbCB8fCAnIHVua25vd24gcHJvbWlzZScpKTtcblxuICAgICAgICBpZiAoIXNlYWxlZCAmJiBlcnJvcikge1xuICAgICAgICAgIHNlYWxlZCA9IHRydWU7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGVycm9yKTtcbiAgICAgICAgfVxuICAgICAgfSwgcHJvbWlzZSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlT3duVGhlbmFibGUocHJvbWlzZSwgdGhlbmFibGUpIHtcbiAgICAgIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHRoZW5hYmxlLl9yZXN1bHQpO1xuICAgICAgfSBlbHNlIGlmICh0aGVuYWJsZS5fc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCB0aGVuYWJsZS5fcmVzdWx0KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZSh0aGVuYWJsZSwgdW5kZWZpbmVkLCBmdW5jdGlvbih2YWx1ZSkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaGFuZGxlTWF5YmVUaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlLCB0aGVuKSB7XG4gICAgICBpZiAobWF5YmVUaGVuYWJsZS5jb25zdHJ1Y3RvciA9PT0gcHJvbWlzZS5jb25zdHJ1Y3RvciAmJlxuICAgICAgICAgIHRoZW4gPT09IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0ICYmXG4gICAgICAgICAgY29uc3RydWN0b3IucmVzb2x2ZSA9PT0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVzb2x2ZSQkZGVmYXVsdCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVPd25UaGVuYWJsZShwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGlmICh0aGVuID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRHRVRfVEhFTl9FUlJPUi5lcnJvcik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhlbiA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24odGhlbikpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRoYW5kbGVGb3JlaWduVGhlbmFibGUocHJvbWlzZSwgbWF5YmVUaGVuYWJsZSwgdGhlbik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkZnVsZmlsbChwcm9taXNlLCBtYXliZVRoZW5hYmxlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpIHtcbiAgICAgIGlmIChwcm9taXNlID09PSB2YWx1ZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkc2VsZkZ1bGZpbGxtZW50KCkpO1xuICAgICAgfSBlbHNlIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJG9iamVjdE9yRnVuY3Rpb24odmFsdWUpKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgdmFsdWUsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGdldFRoZW4odmFsdWUpKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2hSZWplY3Rpb24ocHJvbWlzZSkge1xuICAgICAgaWYgKHByb21pc2UuX29uZXJyb3IpIHtcbiAgICAgICAgcHJvbWlzZS5fb25lcnJvcihwcm9taXNlLl9yZXN1bHQpO1xuICAgICAgfVxuXG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoKHByb21pc2UpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdmFsdWUpIHtcbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykgeyByZXR1cm47IH1cblxuICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdmFsdWU7XG4gICAgICBwcm9taXNlLl9zdGF0ZSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRDtcblxuICAgICAgaWYgKHByb21pc2UuX3N1YnNjcmliZXJzLmxlbmd0aCAhPT0gMCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoLCBwcm9taXNlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKSB7XG4gICAgICBpZiAocHJvbWlzZS5fc3RhdGUgIT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBFTkRJTkcpIHsgcmV0dXJuOyB9XG4gICAgICBwcm9taXNlLl9zdGF0ZSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEO1xuICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gcmVhc29uO1xuXG4gICAgICBsaWIkZXM2JHByb21pc2UkYXNhcCQkYXNhcChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRwdWJsaXNoUmVqZWN0aW9uLCBwcm9taXNlKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRzdWJzY3JpYmUocGFyZW50LCBjaGlsZCwgb25GdWxmaWxsbWVudCwgb25SZWplY3Rpb24pIHtcbiAgICAgIHZhciBzdWJzY3JpYmVycyA9IHBhcmVudC5fc3Vic2NyaWJlcnM7XG4gICAgICB2YXIgbGVuZ3RoID0gc3Vic2NyaWJlcnMubGVuZ3RoO1xuXG4gICAgICBwYXJlbnQuX29uZXJyb3IgPSBudWxsO1xuXG4gICAgICBzdWJzY3JpYmVyc1tsZW5ndGhdID0gY2hpbGQ7XG4gICAgICBzdWJzY3JpYmVyc1tsZW5ndGggKyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRURdID0gb25GdWxmaWxsbWVudDtcbiAgICAgIHN1YnNjcmliZXJzW2xlbmd0aCArIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEXSAgPSBvblJlamVjdGlvbjtcblxuICAgICAgaWYgKGxlbmd0aCA9PT0gMCAmJiBwYXJlbnQuX3N0YXRlKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSRhc2FwJCRhc2FwKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHB1Ymxpc2gsIHBhcmVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcHVibGlzaChwcm9taXNlKSB7XG4gICAgICB2YXIgc3Vic2NyaWJlcnMgPSBwcm9taXNlLl9zdWJzY3JpYmVycztcbiAgICAgIHZhciBzZXR0bGVkID0gcHJvbWlzZS5fc3RhdGU7XG5cbiAgICAgIGlmIChzdWJzY3JpYmVycy5sZW5ndGggPT09IDApIHsgcmV0dXJuOyB9XG5cbiAgICAgIHZhciBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCA9IHByb21pc2UuX3Jlc3VsdDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdWJzY3JpYmVycy5sZW5ndGg7IGkgKz0gMykge1xuICAgICAgICBjaGlsZCA9IHN1YnNjcmliZXJzW2ldO1xuICAgICAgICBjYWxsYmFjayA9IHN1YnNjcmliZXJzW2kgKyBzZXR0bGVkXTtcblxuICAgICAgICBpZiAoY2hpbGQpIHtcbiAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBjaGlsZCwgY2FsbGJhY2ssIGRldGFpbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY2FsbGJhY2soZGV0YWlsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBwcm9taXNlLl9zdWJzY3JpYmVycy5sZW5ndGggPSAwO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEVycm9yT2JqZWN0KCkge1xuICAgICAgdGhpcy5lcnJvciA9IG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUiA9IG5ldyBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRFcnJvck9iamVjdCgpO1xuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkdHJ5Q2F0Y2goY2FsbGJhY2ssIGRldGFpbCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmV0dXJuIGNhbGxiYWNrKGRldGFpbCk7XG4gICAgICB9IGNhdGNoKGUpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SLmVycm9yID0gZTtcbiAgICAgICAgcmV0dXJuIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFRSWV9DQVRDSF9FUlJPUjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbnZva2VDYWxsYmFjayhzZXR0bGVkLCBwcm9taXNlLCBjYWxsYmFjaywgZGV0YWlsKSB7XG4gICAgICB2YXIgaGFzQ2FsbGJhY2sgPSBsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzRnVuY3Rpb24oY2FsbGJhY2spLFxuICAgICAgICAgIHZhbHVlLCBlcnJvciwgc3VjY2VlZGVkLCBmYWlsZWQ7XG5cbiAgICAgIGlmIChoYXNDYWxsYmFjaykge1xuICAgICAgICB2YWx1ZSA9IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHRyeUNhdGNoKGNhbGxiYWNrLCBkZXRhaWwpO1xuXG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkVFJZX0NBVENIX0VSUk9SKSB7XG4gICAgICAgICAgZmFpbGVkID0gdHJ1ZTtcbiAgICAgICAgICBlcnJvciA9IHZhbHVlLmVycm9yO1xuICAgICAgICAgIHZhbHVlID0gbnVsbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdWNjZWVkZWQgPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByb21pc2UgPT09IHZhbHVlKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGNhbm5vdFJldHVybk93bigpKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsdWUgPSBkZXRhaWw7XG4gICAgICAgIHN1Y2NlZWRlZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuICAgICAgICAvLyBub29wXG4gICAgICB9IGVsc2UgaWYgKGhhc0NhbGxiYWNrICYmIHN1Y2NlZWRlZCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZXNvbHZlKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoZmFpbGVkKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCBlcnJvcik7XG4gICAgICB9IGVsc2UgaWYgKHNldHRsZWQgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJEZVTEZJTExFRCkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSBpZiAoc2V0dGxlZCA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQpIHtcbiAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRpbml0aWFsaXplUHJvbWlzZShwcm9taXNlLCByZXNvbHZlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzb2x2ZXIoZnVuY3Rpb24gcmVzb2x2ZVByb21pc2UodmFsdWUpe1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlc29sdmUocHJvbWlzZSwgdmFsdWUpO1xuICAgICAgICB9LCBmdW5jdGlvbiByZWplY3RQcm9taXNlKHJlYXNvbikge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdChwcm9taXNlLCByZWFzb24pO1xuICAgICAgICB9KTtcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGlkID0gMDtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRuZXh0SWQoKSB7XG4gICAgICByZXR1cm4gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQrKztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRtYWtlUHJvbWlzZShwcm9taXNlKSB7XG4gICAgICBwcm9taXNlW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaWQrKztcbiAgICAgIHByb21pc2UuX3N0YXRlID0gdW5kZWZpbmVkO1xuICAgICAgcHJvbWlzZS5fcmVzdWx0ID0gdW5kZWZpbmVkO1xuICAgICAgcHJvbWlzZS5fc3Vic2NyaWJlcnMgPSBbXTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGFsbChlbnRyaWVzKSB7XG4gICAgICByZXR1cm4gbmV3IGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0KHRoaXMsIGVudHJpZXMpLnByb21pc2U7XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGRlZmF1bHQgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRhbGwkJGFsbDtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRyYWNlKGVudHJpZXMpIHtcbiAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuXG4gICAgICBpZiAoIWxpYiRlczYkcHJvbWlzZSR1dGlscyQkaXNBcnJheShlbnRyaWVzKSkge1xuICAgICAgICByZXR1cm4gbmV3IENvbnN0cnVjdG9yKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdZb3UgbXVzdCBwYXNzIGFuIGFycmF5IHRvIHJhY2UuJykpO1xuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBuZXcgQ29uc3RydWN0b3IoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICAgICAgdmFyIGxlbmd0aCA9IGVudHJpZXMubGVuZ3RoO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIENvbnN0cnVjdG9yLnJlc29sdmUoZW50cmllc1tpXSkudGhlbihyZXNvbHZlLCByZWplY3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmFjZSQkcmFjZTtcbiAgICBmdW5jdGlvbiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZWplY3QkJHJlamVjdChyZWFzb24pIHtcbiAgICAgIC8qanNoaW50IHZhbGlkdGhpczp0cnVlICovXG4gICAgICB2YXIgQ29uc3RydWN0b3IgPSB0aGlzO1xuICAgICAgdmFyIHByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG4gICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRyZWplY3QocHJvbWlzZSwgcmVhc29uKTtcbiAgICAgIHJldHVybiBwcm9taXNlO1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkcmVqZWN0JCRyZWplY3Q7XG5cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc1Jlc29sdmVyKCkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWW91IG11c3QgcGFzcyBhIHJlc29sdmVyIGZ1bmN0aW9uIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB0byB0aGUgcHJvbWlzZSBjb25zdHJ1Y3RvcicpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRuZWVkc05ldygpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJGYWlsZWQgdG8gY29uc3RydWN0ICdQcm9taXNlJzogUGxlYXNlIHVzZSB0aGUgJ25ldycgb3BlcmF0b3IsIHRoaXMgb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7XG4gICAgfVxuXG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2U7XG4gICAgLyoqXG4gICAgICBQcm9taXNlIG9iamVjdHMgcmVwcmVzZW50IHRoZSBldmVudHVhbCByZXN1bHQgb2YgYW4gYXN5bmNocm9ub3VzIG9wZXJhdGlvbi4gVGhlXG4gICAgICBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLCB3aGljaFxuICAgICAgcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGUgcmVhc29uXG4gICAgICB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICAgICAgVGVybWlub2xvZ3lcbiAgICAgIC0tLS0tLS0tLS0tXG5cbiAgICAgIC0gYHByb21pc2VgIGlzIGFuIG9iamVjdCBvciBmdW5jdGlvbiB3aXRoIGEgYHRoZW5gIG1ldGhvZCB3aG9zZSBiZWhhdmlvciBjb25mb3JtcyB0byB0aGlzIHNwZWNpZmljYXRpb24uXG4gICAgICAtIGB0aGVuYWJsZWAgaXMgYW4gb2JqZWN0IG9yIGZ1bmN0aW9uIHRoYXQgZGVmaW5lcyBhIGB0aGVuYCBtZXRob2QuXG4gICAgICAtIGB2YWx1ZWAgaXMgYW55IGxlZ2FsIEphdmFTY3JpcHQgdmFsdWUgKGluY2x1ZGluZyB1bmRlZmluZWQsIGEgdGhlbmFibGUsIG9yIGEgcHJvbWlzZSkuXG4gICAgICAtIGBleGNlcHRpb25gIGlzIGEgdmFsdWUgdGhhdCBpcyB0aHJvd24gdXNpbmcgdGhlIHRocm93IHN0YXRlbWVudC5cbiAgICAgIC0gYHJlYXNvbmAgaXMgYSB2YWx1ZSB0aGF0IGluZGljYXRlcyB3aHkgYSBwcm9taXNlIHdhcyByZWplY3RlZC5cbiAgICAgIC0gYHNldHRsZWRgIHRoZSBmaW5hbCByZXN0aW5nIHN0YXRlIG9mIGEgcHJvbWlzZSwgZnVsZmlsbGVkIG9yIHJlamVjdGVkLlxuXG4gICAgICBBIHByb21pc2UgY2FuIGJlIGluIG9uZSBvZiB0aHJlZSBzdGF0ZXM6IHBlbmRpbmcsIGZ1bGZpbGxlZCwgb3IgcmVqZWN0ZWQuXG5cbiAgICAgIFByb21pc2VzIHRoYXQgYXJlIGZ1bGZpbGxlZCBoYXZlIGEgZnVsZmlsbG1lbnQgdmFsdWUgYW5kIGFyZSBpbiB0aGUgZnVsZmlsbGVkXG4gICAgICBzdGF0ZS4gIFByb21pc2VzIHRoYXQgYXJlIHJlamVjdGVkIGhhdmUgYSByZWplY3Rpb24gcmVhc29uIGFuZCBhcmUgaW4gdGhlXG4gICAgICByZWplY3RlZCBzdGF0ZS4gIEEgZnVsZmlsbG1lbnQgdmFsdWUgaXMgbmV2ZXIgYSB0aGVuYWJsZS5cblxuICAgICAgUHJvbWlzZXMgY2FuIGFsc28gYmUgc2FpZCB0byAqcmVzb2x2ZSogYSB2YWx1ZS4gIElmIHRoaXMgdmFsdWUgaXMgYWxzbyBhXG4gICAgICBwcm9taXNlLCB0aGVuIHRoZSBvcmlnaW5hbCBwcm9taXNlJ3Mgc2V0dGxlZCBzdGF0ZSB3aWxsIG1hdGNoIHRoZSB2YWx1ZSdzXG4gICAgICBzZXR0bGVkIHN0YXRlLiAgU28gYSBwcm9taXNlIHRoYXQgKnJlc29sdmVzKiBhIHByb21pc2UgdGhhdCByZWplY3RzIHdpbGxcbiAgICAgIGl0c2VsZiByZWplY3QsIGFuZCBhIHByb21pc2UgdGhhdCAqcmVzb2x2ZXMqIGEgcHJvbWlzZSB0aGF0IGZ1bGZpbGxzIHdpbGxcbiAgICAgIGl0c2VsZiBmdWxmaWxsLlxuXG5cbiAgICAgIEJhc2ljIFVzYWdlOlxuICAgICAgLS0tLS0tLS0tLS0tXG5cbiAgICAgIGBgYGpzXG4gICAgICB2YXIgcHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uKHJlc29sdmUsIHJlamVjdCkge1xuICAgICAgICAvLyBvbiBzdWNjZXNzXG4gICAgICAgIHJlc29sdmUodmFsdWUpO1xuXG4gICAgICAgIC8vIG9uIGZhaWx1cmVcbiAgICAgICAgcmVqZWN0KHJlYXNvbik7XG4gICAgICB9KTtcblxuICAgICAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIC8vIG9uIGZ1bGZpbGxtZW50XG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pIHtcbiAgICAgICAgLy8gb24gcmVqZWN0aW9uXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBBZHZhbmNlZCBVc2FnZTpcbiAgICAgIC0tLS0tLS0tLS0tLS0tLVxuXG4gICAgICBQcm9taXNlcyBzaGluZSB3aGVuIGFic3RyYWN0aW5nIGF3YXkgYXN5bmNocm9ub3VzIGludGVyYWN0aW9ucyBzdWNoIGFzXG4gICAgICBgWE1MSHR0cFJlcXVlc3Rgcy5cblxuICAgICAgYGBganNcbiAgICAgIGZ1bmN0aW9uIGdldEpTT04odXJsKSB7XG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3Qpe1xuICAgICAgICAgIHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpO1xuICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBoYW5kbGVyO1xuICAgICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnanNvbic7XG4gICAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoJ0FjY2VwdCcsICdhcHBsaWNhdGlvbi9qc29uJyk7XG4gICAgICAgICAgeGhyLnNlbmQoKTtcblxuICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZXIoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlID09PSB0aGlzLkRPTkUpIHtcbiAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzID09PSAyMDApIHtcbiAgICAgICAgICAgICAgICByZXNvbHZlKHRoaXMucmVzcG9uc2UpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoJ2dldEpTT046IGAnICsgdXJsICsgJ2AgZmFpbGVkIHdpdGggc3RhdHVzOiBbJyArIHRoaXMuc3RhdHVzICsgJ10nKSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9O1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZ2V0SlNPTignL3Bvc3RzLmpzb24nKS50aGVuKGZ1bmN0aW9uKGpzb24pIHtcbiAgICAgICAgLy8gb24gZnVsZmlsbG1lbnRcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICAvLyBvbiByZWplY3Rpb25cbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIFVubGlrZSBjYWxsYmFja3MsIHByb21pc2VzIGFyZSBncmVhdCBjb21wb3NhYmxlIHByaW1pdGl2ZXMuXG5cbiAgICAgIGBgYGpzXG4gICAgICBQcm9taXNlLmFsbChbXG4gICAgICAgIGdldEpTT04oJy9wb3N0cycpLFxuICAgICAgICBnZXRKU09OKCcvY29tbWVudHMnKVxuICAgICAgXSkudGhlbihmdW5jdGlvbih2YWx1ZXMpe1xuICAgICAgICB2YWx1ZXNbMF0gLy8gPT4gcG9zdHNKU09OXG4gICAgICAgIHZhbHVlc1sxXSAvLyA9PiBjb21tZW50c0pTT05cblxuICAgICAgICByZXR1cm4gdmFsdWVzO1xuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQGNsYXNzIFByb21pc2VcbiAgICAgIEBwYXJhbSB7ZnVuY3Rpb259IHJlc29sdmVyXG4gICAgICBVc2VmdWwgZm9yIHRvb2xpbmcuXG4gICAgICBAY29uc3RydWN0b3JcbiAgICAqL1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlKHJlc29sdmVyKSB7XG4gICAgICB0aGlzW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdID0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbmV4dElkKCk7XG4gICAgICB0aGlzLl9yZXN1bHQgPSB0aGlzLl9zdGF0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIHRoaXMuX3N1YnNjcmliZXJzID0gW107XG5cbiAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRub29wICE9PSByZXNvbHZlcikge1xuICAgICAgICB0eXBlb2YgcmVzb2x2ZXIgIT09ICdmdW5jdGlvbicgJiYgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzUmVzb2x2ZXIoKTtcbiAgICAgICAgdGhpcyBpbnN0YW5jZW9mIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlID8gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkaW5pdGlhbGl6ZVByb21pc2UodGhpcywgcmVzb2x2ZXIpIDogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJG5lZWRzTmV3KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UuYWxsID0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkYWxsJCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJhY2UgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyYWNlJCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlc29sdmUgPSBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSRyZXNvbHZlJCRkZWZhdWx0O1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLnJlamVjdCA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlamVjdCQkZGVmYXVsdDtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fc2V0U2NoZWR1bGVyID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJHNldFNjaGVkdWxlcjtcbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5fc2V0QXNhcCA9IGxpYiRlczYkcHJvbWlzZSRhc2FwJCRzZXRBc2FwO1xuICAgIGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRQcm9taXNlLl9hc2FwID0gbGliJGVzNiRwcm9taXNlJGFzYXAkJGFzYXA7XG5cbiAgICBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkUHJvbWlzZS5wcm90b3R5cGUgPSB7XG4gICAgICBjb25zdHJ1Y3RvcjogbGliJGVzNiRwcm9taXNlJHByb21pc2UkJFByb21pc2UsXG5cbiAgICAvKipcbiAgICAgIFRoZSBwcmltYXJ5IHdheSBvZiBpbnRlcmFjdGluZyB3aXRoIGEgcHJvbWlzZSBpcyB0aHJvdWdoIGl0cyBgdGhlbmAgbWV0aG9kLFxuICAgICAgd2hpY2ggcmVnaXN0ZXJzIGNhbGxiYWNrcyB0byByZWNlaXZlIGVpdGhlciBhIHByb21pc2UncyBldmVudHVhbCB2YWx1ZSBvciB0aGVcbiAgICAgIHJlYXNvbiB3aHkgdGhlIHByb21pc2UgY2Fubm90IGJlIGZ1bGZpbGxlZC5cblxuICAgICAgYGBganNcbiAgICAgIGZpbmRVc2VyKCkudGhlbihmdW5jdGlvbih1c2VyKXtcbiAgICAgICAgLy8gdXNlciBpcyBhdmFpbGFibGVcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbil7XG4gICAgICAgIC8vIHVzZXIgaXMgdW5hdmFpbGFibGUsIGFuZCB5b3UgYXJlIGdpdmVuIHRoZSByZWFzb24gd2h5XG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBDaGFpbmluZ1xuICAgICAgLS0tLS0tLS1cblxuICAgICAgVGhlIHJldHVybiB2YWx1ZSBvZiBgdGhlbmAgaXMgaXRzZWxmIGEgcHJvbWlzZS4gIFRoaXMgc2Vjb25kLCAnZG93bnN0cmVhbSdcbiAgICAgIHByb21pc2UgaXMgcmVzb2x2ZWQgd2l0aCB0aGUgcmV0dXJuIHZhbHVlIG9mIHRoZSBmaXJzdCBwcm9taXNlJ3MgZnVsZmlsbG1lbnRcbiAgICAgIG9yIHJlamVjdGlvbiBoYW5kbGVyLCBvciByZWplY3RlZCBpZiB0aGUgaGFuZGxlciB0aHJvd3MgYW4gZXhjZXB0aW9uLlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHJldHVybiB1c2VyLm5hbWU7XG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIHJldHVybiAnZGVmYXVsdCBuYW1lJztcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHVzZXJOYW1lKSB7XG4gICAgICAgIC8vIElmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgdXNlck5hbWVgIHdpbGwgYmUgdGhlIHVzZXIncyBuYW1lLCBvdGhlcndpc2UgaXRcbiAgICAgICAgLy8gd2lsbCBiZSBgJ2RlZmF1bHQgbmFtZSdgXG4gICAgICB9KTtcblxuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignRm91bmQgdXNlciwgYnV0IHN0aWxsIHVuaGFwcHknKTtcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdgZmluZFVzZXJgIHJlamVjdGVkIGFuZCB3ZSdyZSB1bmhhcHB5Jyk7XG4gICAgICB9KS50aGVuKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAvLyBuZXZlciByZWFjaGVkXG4gICAgICB9LCBmdW5jdGlvbiAocmVhc29uKSB7XG4gICAgICAgIC8vIGlmIGBmaW5kVXNlcmAgZnVsZmlsbGVkLCBgcmVhc29uYCB3aWxsIGJlICdGb3VuZCB1c2VyLCBidXQgc3RpbGwgdW5oYXBweScuXG4gICAgICAgIC8vIElmIGBmaW5kVXNlcmAgcmVqZWN0ZWQsIGByZWFzb25gIHdpbGwgYmUgJ2BmaW5kVXNlcmAgcmVqZWN0ZWQgYW5kIHdlJ3JlIHVuaGFwcHknLlxuICAgICAgfSk7XG4gICAgICBgYGBcbiAgICAgIElmIHRoZSBkb3duc3RyZWFtIHByb21pc2UgZG9lcyBub3Qgc3BlY2lmeSBhIHJlamVjdGlvbiBoYW5kbGVyLCByZWplY3Rpb24gcmVhc29ucyB3aWxsIGJlIHByb3BhZ2F0ZWQgZnVydGhlciBkb3duc3RyZWFtLlxuXG4gICAgICBgYGBqc1xuICAgICAgZmluZFVzZXIoKS50aGVuKGZ1bmN0aW9uICh1c2VyKSB7XG4gICAgICAgIHRocm93IG5ldyBQZWRhZ29naWNhbEV4Y2VwdGlvbignVXBzdHJlYW0gZXJyb3InKTtcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgIC8vIG5ldmVyIHJlYWNoZWRcbiAgICAgIH0sIGZ1bmN0aW9uIChyZWFzb24pIHtcbiAgICAgICAgLy8gVGhlIGBQZWRnYWdvY2lhbEV4Y2VwdGlvbmAgaXMgcHJvcGFnYXRlZCBhbGwgdGhlIHdheSBkb3duIHRvIGhlcmVcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEFzc2ltaWxhdGlvblxuICAgICAgLS0tLS0tLS0tLS0tXG5cbiAgICAgIFNvbWV0aW1lcyB0aGUgdmFsdWUgeW91IHdhbnQgdG8gcHJvcGFnYXRlIHRvIGEgZG93bnN0cmVhbSBwcm9taXNlIGNhbiBvbmx5IGJlXG4gICAgICByZXRyaWV2ZWQgYXN5bmNocm9ub3VzbHkuIFRoaXMgY2FuIGJlIGFjaGlldmVkIGJ5IHJldHVybmluZyBhIHByb21pc2UgaW4gdGhlXG4gICAgICBmdWxmaWxsbWVudCBvciByZWplY3Rpb24gaGFuZGxlci4gVGhlIGRvd25zdHJlYW0gcHJvbWlzZSB3aWxsIHRoZW4gYmUgcGVuZGluZ1xuICAgICAgdW50aWwgdGhlIHJldHVybmVkIHByb21pc2UgaXMgc2V0dGxlZC4gVGhpcyBpcyBjYWxsZWQgKmFzc2ltaWxhdGlvbiouXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgICAgLy8gVGhlIHVzZXIncyBjb21tZW50cyBhcmUgbm93IGF2YWlsYWJsZVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgSWYgdGhlIGFzc2ltbGlhdGVkIHByb21pc2UgcmVqZWN0cywgdGhlbiB0aGUgZG93bnN0cmVhbSBwcm9taXNlIHdpbGwgYWxzbyByZWplY3QuXG5cbiAgICAgIGBgYGpzXG4gICAgICBmaW5kVXNlcigpLnRoZW4oZnVuY3Rpb24gKHVzZXIpIHtcbiAgICAgICAgcmV0dXJuIGZpbmRDb21tZW50c0J5QXV0aG9yKHVzZXIpO1xuICAgICAgfSkudGhlbihmdW5jdGlvbiAoY29tbWVudHMpIHtcbiAgICAgICAgLy8gSWYgYGZpbmRDb21tZW50c0J5QXV0aG9yYCBmdWxmaWxscywgd2UnbGwgaGF2ZSB0aGUgdmFsdWUgaGVyZVxuICAgICAgfSwgZnVuY3Rpb24gKHJlYXNvbikge1xuICAgICAgICAvLyBJZiBgZmluZENvbW1lbnRzQnlBdXRob3JgIHJlamVjdHMsIHdlJ2xsIGhhdmUgdGhlIHJlYXNvbiBoZXJlXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBTaW1wbGUgRXhhbXBsZVxuICAgICAgLS0tLS0tLS0tLS0tLS1cblxuICAgICAgU3luY2hyb25vdXMgRXhhbXBsZVxuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICB2YXIgcmVzdWx0O1xuXG4gICAgICB0cnkge1xuICAgICAgICByZXN1bHQgPSBmaW5kUmVzdWx0KCk7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGBgYFxuXG4gICAgICBFcnJiYWNrIEV4YW1wbGVcblxuICAgICAgYGBganNcbiAgICAgIGZpbmRSZXN1bHQoZnVuY3Rpb24ocmVzdWx0LCBlcnIpe1xuICAgICAgICBpZiAoZXJyKSB7XG4gICAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICBmaW5kUmVzdWx0KCkudGhlbihmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAvLyBzdWNjZXNzXG4gICAgICB9LCBmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyBmYWlsdXJlXG4gICAgICB9KTtcbiAgICAgIGBgYFxuXG4gICAgICBBZHZhbmNlZCBFeGFtcGxlXG4gICAgICAtLS0tLS0tLS0tLS0tLVxuXG4gICAgICBTeW5jaHJvbm91cyBFeGFtcGxlXG5cbiAgICAgIGBgYGphdmFzY3JpcHRcbiAgICAgIHZhciBhdXRob3IsIGJvb2tzO1xuXG4gICAgICB0cnkge1xuICAgICAgICBhdXRob3IgPSBmaW5kQXV0aG9yKCk7XG4gICAgICAgIGJvb2tzICA9IGZpbmRCb29rc0J5QXV0aG9yKGF1dGhvcik7XG4gICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIGZhaWx1cmVcbiAgICAgIH1cbiAgICAgIGBgYFxuXG4gICAgICBFcnJiYWNrIEV4YW1wbGVcblxuICAgICAgYGBganNcblxuICAgICAgZnVuY3Rpb24gZm91bmRCb29rcyhib29rcykge1xuXG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGZhaWx1cmUocmVhc29uKSB7XG5cbiAgICAgIH1cblxuICAgICAgZmluZEF1dGhvcihmdW5jdGlvbihhdXRob3IsIGVycil7XG4gICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgLy8gZmFpbHVyZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBmaW5kQm9vb2tzQnlBdXRob3IoYXV0aG9yLCBmdW5jdGlvbihib29rcywgZXJyKSB7XG4gICAgICAgICAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgIGZvdW5kQm9va3MoYm9va3MpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgICAgICAgICAgICBmYWlsdXJlKHJlYXNvbik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGNhdGNoKGVycm9yKSB7XG4gICAgICAgICAgICBmYWlsdXJlKGVycik7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIHN1Y2Nlc3NcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgUHJvbWlzZSBFeGFtcGxlO1xuXG4gICAgICBgYGBqYXZhc2NyaXB0XG4gICAgICBmaW5kQXV0aG9yKCkuXG4gICAgICAgIHRoZW4oZmluZEJvb2tzQnlBdXRob3IpLlxuICAgICAgICB0aGVuKGZ1bmN0aW9uKGJvb2tzKXtcbiAgICAgICAgICAvLyBmb3VuZCBib29rc1xuICAgICAgfSkuY2F0Y2goZnVuY3Rpb24ocmVhc29uKXtcbiAgICAgICAgLy8gc29tZXRoaW5nIHdlbnQgd3JvbmdcbiAgICAgIH0pO1xuICAgICAgYGBgXG5cbiAgICAgIEBtZXRob2QgdGhlblxuICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25GdWxmaWxsZWRcbiAgICAgIEBwYXJhbSB7RnVuY3Rpb259IG9uUmVqZWN0ZWRcbiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICAgKi9cbiAgICAgIHRoZW46IGxpYiRlczYkcHJvbWlzZSR0aGVuJCRkZWZhdWx0LFxuXG4gICAgLyoqXG4gICAgICBgY2F0Y2hgIGlzIHNpbXBseSBzdWdhciBmb3IgYHRoZW4odW5kZWZpbmVkLCBvblJlamVjdGlvbilgIHdoaWNoIG1ha2VzIGl0IHRoZSBzYW1lXG4gICAgICBhcyB0aGUgY2F0Y2ggYmxvY2sgb2YgYSB0cnkvY2F0Y2ggc3RhdGVtZW50LlxuXG4gICAgICBgYGBqc1xuICAgICAgZnVuY3Rpb24gZmluZEF1dGhvcigpe1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkbid0IGZpbmQgdGhhdCBhdXRob3InKTtcbiAgICAgIH1cblxuICAgICAgLy8gc3luY2hyb25vdXNcbiAgICAgIHRyeSB7XG4gICAgICAgIGZpbmRBdXRob3IoKTtcbiAgICAgIH0gY2F0Y2gocmVhc29uKSB7XG4gICAgICAgIC8vIHNvbWV0aGluZyB3ZW50IHdyb25nXG4gICAgICB9XG5cbiAgICAgIC8vIGFzeW5jIHdpdGggcHJvbWlzZXNcbiAgICAgIGZpbmRBdXRob3IoKS5jYXRjaChmdW5jdGlvbihyZWFzb24pe1xuICAgICAgICAvLyBzb21ldGhpbmcgd2VudCB3cm9uZ1xuICAgICAgfSk7XG4gICAgICBgYGBcblxuICAgICAgQG1ldGhvZCBjYXRjaFxuICAgICAgQHBhcmFtIHtGdW5jdGlvbn0gb25SZWplY3Rpb25cbiAgICAgIFVzZWZ1bCBmb3IgdG9vbGluZy5cbiAgICAgIEByZXR1cm4ge1Byb21pc2V9XG4gICAgKi9cbiAgICAgICdjYXRjaCc6IGZ1bmN0aW9uKG9uUmVqZWN0aW9uKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRoZW4obnVsbCwgb25SZWplY3Rpb24pO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3I7XG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IoQ29uc3RydWN0b3IsIGlucHV0KSB7XG4gICAgICB0aGlzLl9pbnN0YW5jZUNvbnN0cnVjdG9yID0gQ29uc3RydWN0b3I7XG4gICAgICB0aGlzLnByb21pc2UgPSBuZXcgQ29uc3RydWN0b3IobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkbm9vcCk7XG5cbiAgICAgIGlmICghdGhpcy5wcm9taXNlW2xpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFBST01JU0VfSURdKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG1ha2VQcm9taXNlKHRoaXMucHJvbWlzZSk7XG4gICAgICB9XG5cbiAgICAgIGlmIChsaWIkZXM2JHByb21pc2UkdXRpbHMkJGlzQXJyYXkoaW5wdXQpKSB7XG4gICAgICAgIHRoaXMuX2lucHV0ICAgICA9IGlucHV0O1xuICAgICAgICB0aGlzLmxlbmd0aCAgICAgPSBpbnB1dC5sZW5ndGg7XG4gICAgICAgIHRoaXMuX3JlbWFpbmluZyA9IGlucHV0Lmxlbmd0aDtcblxuICAgICAgICB0aGlzLl9yZXN1bHQgPSBuZXcgQXJyYXkodGhpcy5sZW5ndGgpO1xuXG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwodGhpcy5wcm9taXNlLCB0aGlzLl9yZXN1bHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMubGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMDtcbiAgICAgICAgICB0aGlzLl9lbnVtZXJhdGUoKTtcbiAgICAgICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgICAgICBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRmdWxmaWxsKHRoaXMucHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHJlamVjdCh0aGlzLnByb21pc2UsIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCR2YWxpZGF0aW9uRXJyb3IoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJHZhbGlkYXRpb25FcnJvcigpIHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoJ0FycmF5IE1ldGhvZHMgbXVzdCBiZSBwcm92aWRlZCBhbiBBcnJheScpO1xuICAgIH1cblxuICAgIGxpYiRlczYkcHJvbWlzZSRlbnVtZXJhdG9yJCRFbnVtZXJhdG9yLnByb3RvdHlwZS5fZW51bWVyYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgbGVuZ3RoICA9IHRoaXMubGVuZ3RoO1xuICAgICAgdmFyIGlucHV0ICAgPSB0aGlzLl9pbnB1dDtcblxuICAgICAgZm9yICh2YXIgaSA9IDA7IHRoaXMuX3N0YXRlID09PSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRQRU5ESU5HICYmIGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLl9lYWNoRW50cnkoaW5wdXRbaV0sIGkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX2VhY2hFbnRyeSA9IGZ1bmN0aW9uKGVudHJ5LCBpKSB7XG4gICAgICB2YXIgYyA9IHRoaXMuX2luc3RhbmNlQ29uc3RydWN0b3I7XG4gICAgICB2YXIgcmVzb2x2ZSA9IGMucmVzb2x2ZTtcblxuICAgICAgaWYgKHJlc29sdmUgPT09IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJHJlc29sdmUkJGRlZmF1bHQpIHtcbiAgICAgICAgdmFyIHRoZW4gPSBsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRnZXRUaGVuKGVudHJ5KTtcblxuICAgICAgICBpZiAodGhlbiA9PT0gbGliJGVzNiRwcm9taXNlJHRoZW4kJGRlZmF1bHQgJiZcbiAgICAgICAgICAgIGVudHJ5Ll9zdGF0ZSAhPT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuICAgICAgICAgIHRoaXMuX3NldHRsZWRBdChlbnRyeS5fc3RhdGUsIGksIGVudHJ5Ll9yZXN1bHQpO1xuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiB0aGVuICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5fcmVtYWluaW5nLS07XG4gICAgICAgICAgdGhpcy5fcmVzdWx0W2ldID0gZW50cnk7XG4gICAgICAgIH0gZWxzZSBpZiAoYyA9PT0gbGliJGVzNiRwcm9taXNlJHByb21pc2UkJGRlZmF1bHQpIHtcbiAgICAgICAgICB2YXIgcHJvbWlzZSA9IG5ldyBjKGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJG5vb3ApO1xuICAgICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGhhbmRsZU1heWJlVGhlbmFibGUocHJvbWlzZSwgZW50cnksIHRoZW4pO1xuICAgICAgICAgIHRoaXMuX3dpbGxTZXR0bGVBdChwcm9taXNlLCBpKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQobmV3IGMoZnVuY3Rpb24ocmVzb2x2ZSkgeyByZXNvbHZlKGVudHJ5KTsgfSksIGkpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl93aWxsU2V0dGxlQXQocmVzb2x2ZShlbnRyeSksIGkpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBsaWIkZXM2JHByb21pc2UkZW51bWVyYXRvciQkRW51bWVyYXRvci5wcm90b3R5cGUuX3NldHRsZWRBdCA9IGZ1bmN0aW9uKHN0YXRlLCBpLCB2YWx1ZSkge1xuICAgICAgdmFyIHByb21pc2UgPSB0aGlzLnByb21pc2U7XG5cbiAgICAgIGlmIChwcm9taXNlLl9zdGF0ZSA9PT0gbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUEVORElORykge1xuICAgICAgICB0aGlzLl9yZW1haW5pbmctLTtcblxuICAgICAgICBpZiAoc3RhdGUgPT09IGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJFJFSkVDVEVEKSB7XG4gICAgICAgICAgbGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkcmVqZWN0KHByb21pc2UsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9yZXN1bHRbaV0gPSB2YWx1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5fcmVtYWluaW5nID09PSAwKSB7XG4gICAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJGZ1bGZpbGwocHJvbWlzZSwgdGhpcy5fcmVzdWx0KTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgbGliJGVzNiRwcm9taXNlJGVudW1lcmF0b3IkJEVudW1lcmF0b3IucHJvdG90eXBlLl93aWxsU2V0dGxlQXQgPSBmdW5jdGlvbihwcm9taXNlLCBpKSB7XG4gICAgICB2YXIgZW51bWVyYXRvciA9IHRoaXM7XG5cbiAgICAgIGxpYiRlczYkcHJvbWlzZSQkaW50ZXJuYWwkJHN1YnNjcmliZShwcm9taXNlLCB1bmRlZmluZWQsIGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgIGVudW1lcmF0b3IuX3NldHRsZWRBdChsaWIkZXM2JHByb21pc2UkJGludGVybmFsJCRGVUxGSUxMRUQsIGksIHZhbHVlKTtcbiAgICAgIH0sIGZ1bmN0aW9uKHJlYXNvbikge1xuICAgICAgICBlbnVtZXJhdG9yLl9zZXR0bGVkQXQobGliJGVzNiRwcm9taXNlJCRpbnRlcm5hbCQkUkVKRUNURUQsIGksIHJlYXNvbik7XG4gICAgICB9KTtcbiAgICB9O1xuICAgIGZ1bmN0aW9uIGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkcG9seWZpbGwoKSB7XG4gICAgICB2YXIgbG9jYWw7XG5cbiAgICAgIGlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGxvY2FsID0gZ2xvYmFsO1xuICAgICAgfSBlbHNlIGlmICh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBsb2NhbCA9IHNlbGY7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIGxvY2FsID0gRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcigncG9seWZpbGwgZmFpbGVkIGJlY2F1c2UgZ2xvYmFsIG9iamVjdCBpcyB1bmF2YWlsYWJsZSBpbiB0aGlzIGVudmlyb25tZW50Jyk7XG4gICAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB2YXIgUCA9IGxvY2FsLlByb21pc2U7XG5cbiAgICAgIGlmIChQICYmIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChQLnJlc29sdmUoKSkgPT09ICdbb2JqZWN0IFByb21pc2VdJyAmJiAhUC5jYXN0KSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgbG9jYWwuUHJvbWlzZSA9IGxpYiRlczYkcHJvbWlzZSRwcm9taXNlJCRkZWZhdWx0O1xuICAgIH1cbiAgICB2YXIgbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRkZWZhdWx0ID0gbGliJGVzNiRwcm9taXNlJHBvbHlmaWxsJCRwb2x5ZmlsbDtcblxuICAgIHZhciBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlID0ge1xuICAgICAgJ1Byb21pc2UnOiBsaWIkZXM2JHByb21pc2UkcHJvbWlzZSQkZGVmYXVsdCxcbiAgICAgICdwb2x5ZmlsbCc6IGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdFxuICAgIH07XG5cbiAgICAvKiBnbG9iYWwgZGVmaW5lOnRydWUgbW9kdWxlOnRydWUgd2luZG93OiB0cnVlICovXG4gICAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lWydhbWQnXSkge1xuICAgICAgZGVmaW5lKGZ1bmN0aW9uKCkgeyByZXR1cm4gbGliJGVzNiRwcm9taXNlJHVtZCQkRVM2UHJvbWlzZTsgfSk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGVbJ2V4cG9ydHMnXSkge1xuICAgICAgbW9kdWxlWydleHBvcnRzJ10gPSBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIHRoaXMgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzWydFUzZQcm9taXNlJ10gPSBsaWIkZXM2JHByb21pc2UkdW1kJCRFUzZQcm9taXNlO1xuICAgIH1cblxuICAgIGxpYiRlczYkcHJvbWlzZSRwb2x5ZmlsbCQkZGVmYXVsdCgpO1xufSkuY2FsbCh0aGlzKTtcblxuXG5cbi8qKiogRVhQT1JUUyBGUk9NIGV4cG9ydHMtbG9hZGVyICoqKi9cbm1vZHVsZS5leHBvcnRzID0gZ2xvYmFsLlByb21pc2U7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vZXhwb3J0cy1sb2FkZXI/Z2xvYmFsLlByb21pc2UhLi9+L2VzNi1wcm9taXNlL2Rpc3QvZXM2LXByb21pc2UuanNcbiAqKiBtb2R1bGUgaWQgPSA4M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiKGZ1bmN0aW9uKHNlbGYpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGlmIChzZWxmLmZldGNoKSB7XG4gICAgcmV0dXJuXG4gIH1cblxuICB2YXIgc3VwcG9ydCA9IHtcbiAgICBzZWFyY2hQYXJhbXM6ICdVUkxTZWFyY2hQYXJhbXMnIGluIHNlbGYsXG4gICAgaXRlcmFibGU6ICdTeW1ib2wnIGluIHNlbGYgJiYgJ2l0ZXJhdG9yJyBpbiBTeW1ib2wsXG4gICAgYmxvYjogJ0ZpbGVSZWFkZXInIGluIHNlbGYgJiYgJ0Jsb2InIGluIHNlbGYgJiYgKGZ1bmN0aW9uKCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbmV3IEJsb2IoKVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgfVxuICAgIH0pKCksXG4gICAgZm9ybURhdGE6ICdGb3JtRGF0YScgaW4gc2VsZixcbiAgICBhcnJheUJ1ZmZlcjogJ0FycmF5QnVmZmVyJyBpbiBzZWxmXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVOYW1lKG5hbWUpIHtcbiAgICBpZiAodHlwZW9mIG5hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICBuYW1lID0gU3RyaW5nKG5hbWUpXG4gICAgfVxuICAgIGlmICgvW15hLXowLTlcXC0jJCUmJyorLlxcXl9gfH5dL2kudGVzdChuYW1lKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUnKVxuICAgIH1cbiAgICByZXR1cm4gbmFtZS50b0xvd2VyQ2FzZSgpXG4gIH1cblxuICBmdW5jdGlvbiBub3JtYWxpemVWYWx1ZSh2YWx1ZSkge1xuICAgIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB2YWx1ZSA9IFN0cmluZyh2YWx1ZSlcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlXG4gIH1cblxuICAvLyBCdWlsZCBhIGRlc3RydWN0aXZlIGl0ZXJhdG9yIGZvciB0aGUgdmFsdWUgbGlzdFxuICBmdW5jdGlvbiBpdGVyYXRvckZvcihpdGVtcykge1xuICAgIHZhciBpdGVyYXRvciA9IHtcbiAgICAgIG5leHQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmFsdWUgPSBpdGVtcy5zaGlmdCgpXG4gICAgICAgIHJldHVybiB7ZG9uZTogdmFsdWUgPT09IHVuZGVmaW5lZCwgdmFsdWU6IHZhbHVlfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgICBpdGVyYXRvcltTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBpdGVyYXRvclxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBpdGVyYXRvclxuICB9XG5cbiAgZnVuY3Rpb24gSGVhZGVycyhoZWFkZXJzKSB7XG4gICAgdGhpcy5tYXAgPSB7fVxuXG4gICAgaWYgKGhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzKSB7XG4gICAgICBoZWFkZXJzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgdmFsdWUpXG4gICAgICB9LCB0aGlzKVxuXG4gICAgfSBlbHNlIGlmIChoZWFkZXJzKSB7XG4gICAgICBPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhoZWFkZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQobmFtZSwgaGVhZGVyc1tuYW1lXSlcbiAgICAgIH0sIHRoaXMpXG4gICAgfVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuYXBwZW5kID0gZnVuY3Rpb24obmFtZSwgdmFsdWUpIHtcbiAgICBuYW1lID0gbm9ybWFsaXplTmFtZShuYW1lKVxuICAgIHZhbHVlID0gbm9ybWFsaXplVmFsdWUodmFsdWUpXG4gICAgdmFyIGxpc3QgPSB0aGlzLm1hcFtuYW1lXVxuICAgIGlmICghbGlzdCkge1xuICAgICAgbGlzdCA9IFtdXG4gICAgICB0aGlzLm1hcFtuYW1lXSA9IGxpc3RcbiAgICB9XG4gICAgbGlzdC5wdXNoKHZhbHVlKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGVbJ2RlbGV0ZSddID0gZnVuY3Rpb24obmFtZSkge1xuICAgIGRlbGV0ZSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24obmFtZSkge1xuICAgIHZhciB2YWx1ZXMgPSB0aGlzLm1hcFtub3JtYWxpemVOYW1lKG5hbWUpXVxuICAgIHJldHVybiB2YWx1ZXMgPyB2YWx1ZXNbMF0gOiBudWxsXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldIHx8IFtdXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIHRoaXMubWFwLmhhc093blByb3BlcnR5KG5vcm1hbGl6ZU5hbWUobmFtZSkpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbihuYW1lLCB2YWx1ZSkge1xuICAgIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldID0gW25vcm1hbGl6ZVZhbHVlKHZhbHVlKV1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHRoaXMubWFwKS5mb3JFYWNoKGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgIHRoaXMubWFwW25hbWVdLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHtcbiAgICAgICAgY2FsbGJhY2suY2FsbCh0aGlzQXJnLCB2YWx1ZSwgbmFtZSwgdGhpcylcbiAgICAgIH0sIHRoaXMpXG4gICAgfSwgdGhpcylcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXVxuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKG5hbWUpIH0pXG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHsgaXRlbXMucHVzaCh2YWx1ZSkgfSlcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKSB9KVxuICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgfVxuXG4gIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXNcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICAgIH1cbiAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZVxuICB9XG5cbiAgZnVuY3Rpb24gZmlsZVJlYWRlclJlYWR5KHJlYWRlcikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KVxuICAgICAgfVxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIHJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihibG9iKVxuICAgIHJldHVybiBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgcmVhZGVyLnJlYWRBc1RleHQoYmxvYilcbiAgICByZXR1cm4gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgfVxuXG4gIGZ1bmN0aW9uIEJvZHkoKSB7XG4gICAgdGhpcy5ib2R5VXNlZCA9IGZhbHNlXG5cbiAgICB0aGlzLl9pbml0Qm9keSA9IGZ1bmN0aW9uKGJvZHkpIHtcbiAgICAgIHRoaXMuX2JvZHlJbml0ID0gYm9keVxuICAgICAgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcbiAgICAgIH0gZWxzZSBpZiAoIWJvZHkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSAnJ1xuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LmFycmF5QnVmZmVyICYmIEFycmF5QnVmZmVyLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgIC8vIE9ubHkgc3VwcG9ydCBBcnJheUJ1ZmZlcnMgZm9yIFBPU1QgbWV0aG9kLlxuICAgICAgICAvLyBSZWNlaXZpbmcgQXJyYXlCdWZmZXJzIGhhcHBlbnMgdmlhIEJsb2JzLCBpbnN0ZWFkLlxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnN1cHBvcnRlZCBCb2R5SW5pdCB0eXBlJylcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKSkge1xuICAgICAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ3RleHQvcGxhaW47Y2hhcnNldD1VVEYtOCcpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUJsb2IgJiYgdGhpcy5fYm9keUJsb2IudHlwZSkge1xuICAgICAgICAgIHRoaXMuaGVhZGVycy5zZXQoJ2NvbnRlbnQtdHlwZScsIHRoaXMuX2JvZHlCbG9iLnR5cGUpXG4gICAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5zZWFyY2hQYXJhbXMgJiYgVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGJvZHkpKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDtjaGFyc2V0PVVURi04JylcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChzdXBwb3J0LmJsb2IpIHtcbiAgICAgIHRoaXMuYmxvYiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUJsb2IpXG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5fYm9keUZvcm1EYXRhKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIGJsb2InKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpXG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgdGhpcy5hcnJheUJ1ZmZlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5ibG9iKCkudGhlbihyZWFkQmxvYkFzQXJyYXlCdWZmZXIpXG4gICAgICB9XG5cbiAgICAgIHRoaXMudGV4dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgcmVqZWN0ZWQgPSBjb25zdW1lZCh0aGlzKVxuICAgICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgICByZXR1cm4gcmVqZWN0ZWRcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICAgIHJldHVybiByZWFkQmxvYkFzVGV4dCh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgdGV4dCcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJlamVjdGVkID0gY29uc3VtZWQodGhpcylcbiAgICAgICAgcmV0dXJuIHJlamVjdGVkID8gcmVqZWN0ZWQgOiBQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keVRleHQpXG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuZm9ybURhdGEpIHtcbiAgICAgIHRoaXMuZm9ybURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oZGVjb2RlKVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuanNvbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgcmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oSlNPTi5wYXJzZSlcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgLy8gSFRUUCBtZXRob2RzIHdob3NlIGNhcGl0YWxpemF0aW9uIHNob3VsZCBiZSBub3JtYWxpemVkXG4gIHZhciBtZXRob2RzID0gWydERUxFVEUnLCAnR0VUJywgJ0hFQUQnLCAnT1BUSU9OUycsICdQT1NUJywgJ1BVVCddXG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTWV0aG9kKG1ldGhvZCkge1xuICAgIHZhciB1cGNhc2VkID0gbWV0aG9kLnRvVXBwZXJDYXNlKClcbiAgICByZXR1cm4gKG1ldGhvZHMuaW5kZXhPZih1cGNhc2VkKSA+IC0xKSA/IHVwY2FzZWQgOiBtZXRob2RcbiAgfVxuXG4gIGZ1bmN0aW9uIFJlcXVlc3QoaW5wdXQsIG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fVxuICAgIHZhciBib2R5ID0gb3B0aW9ucy5ib2R5XG4gICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpKSB7XG4gICAgICBpZiAoaW5wdXQuYm9keVVzZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQWxyZWFkeSByZWFkJylcbiAgICAgIH1cbiAgICAgIHRoaXMudXJsID0gaW5wdXQudXJsXG4gICAgICB0aGlzLmNyZWRlbnRpYWxzID0gaW5wdXQuY3JlZGVudGlhbHNcbiAgICAgIGlmICghb3B0aW9ucy5oZWFkZXJzKSB7XG4gICAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKGlucHV0LmhlYWRlcnMpXG4gICAgICB9XG4gICAgICB0aGlzLm1ldGhvZCA9IGlucHV0Lm1ldGhvZFxuICAgICAgdGhpcy5tb2RlID0gaW5wdXQubW9kZVxuICAgICAgaWYgKCFib2R5KSB7XG4gICAgICAgIGJvZHkgPSBpbnB1dC5fYm9keUluaXRcbiAgICAgICAgaW5wdXQuYm9keVVzZWQgPSB0cnVlXG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMudXJsID0gaW5wdXRcbiAgICB9XG5cbiAgICB0aGlzLmNyZWRlbnRpYWxzID0gb3B0aW9ucy5jcmVkZW50aWFscyB8fCB0aGlzLmNyZWRlbnRpYWxzIHx8ICdvbWl0J1xuICAgIGlmIChvcHRpb25zLmhlYWRlcnMgfHwgIXRoaXMuaGVhZGVycykge1xuICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICAgIH1cbiAgICB0aGlzLm1ldGhvZCA9IG5vcm1hbGl6ZU1ldGhvZChvcHRpb25zLm1ldGhvZCB8fCB0aGlzLm1ldGhvZCB8fCAnR0VUJylcbiAgICB0aGlzLm1vZGUgPSBvcHRpb25zLm1vZGUgfHwgdGhpcy5tb2RlIHx8IG51bGxcbiAgICB0aGlzLnJlZmVycmVyID0gbnVsbFxuXG4gICAgaWYgKCh0aGlzLm1ldGhvZCA9PT0gJ0dFVCcgfHwgdGhpcy5tZXRob2QgPT09ICdIRUFEJykgJiYgYm9keSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignQm9keSBub3QgYWxsb3dlZCBmb3IgR0VUIG9yIEhFQUQgcmVxdWVzdHMnKVxuICAgIH1cbiAgICB0aGlzLl9pbml0Qm9keShib2R5KVxuICB9XG5cbiAgUmVxdWVzdC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlcXVlc3QodGhpcylcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG4gICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuICAgIGJvZHkudHJpbSgpLnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9JylcbiAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gZm9ybVxuICB9XG5cbiAgZnVuY3Rpb24gaGVhZGVycyh4aHIpIHtcbiAgICB2YXIgaGVhZCA9IG5ldyBIZWFkZXJzKClcbiAgICB2YXIgcGFpcnMgPSAoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpIHx8ICcnKS50cmltKCkuc3BsaXQoJ1xcbicpXG4gICAgcGFpcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgIHZhciBzcGxpdCA9IGhlYWRlci50cmltKCkuc3BsaXQoJzonKVxuICAgICAgdmFyIGtleSA9IHNwbGl0LnNoaWZ0KCkudHJpbSgpXG4gICAgICB2YXIgdmFsdWUgPSBzcGxpdC5qb2luKCc6JykudHJpbSgpXG4gICAgICBoZWFkLmFwcGVuZChrZXksIHZhbHVlKVxuICAgIH0pXG4gICAgcmV0dXJuIGhlYWRcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXF1ZXN0LnByb3RvdHlwZSlcblxuICBmdW5jdGlvbiBSZXNwb25zZShib2R5SW5pdCwgb3B0aW9ucykge1xuICAgIGlmICghb3B0aW9ucykge1xuICAgICAgb3B0aW9ucyA9IHt9XG4gICAgfVxuXG4gICAgdGhpcy50eXBlID0gJ2RlZmF1bHQnXG4gICAgdGhpcy5zdGF0dXMgPSBvcHRpb25zLnN0YXR1c1xuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcbiAgICB0aGlzLnN0YXR1c1RleHQgPSBvcHRpb25zLnN0YXR1c1RleHRcbiAgICB0aGlzLmhlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnMgaW5zdGFuY2VvZiBIZWFkZXJzID8gb3B0aW9ucy5oZWFkZXJzIDogbmV3IEhlYWRlcnMob3B0aW9ucy5oZWFkZXJzKVxuICAgIHRoaXMudXJsID0gb3B0aW9ucy51cmwgfHwgJydcbiAgICB0aGlzLl9pbml0Qm9keShib2R5SW5pdClcbiAgfVxuXG4gIEJvZHkuY2FsbChSZXNwb25zZS5wcm90b3R5cGUpXG5cbiAgUmVzcG9uc2UucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBSZXNwb25zZSh0aGlzLl9ib2R5SW5pdCwge1xuICAgICAgc3RhdHVzOiB0aGlzLnN0YXR1cyxcbiAgICAgIHN0YXR1c1RleHQ6IHRoaXMuc3RhdHVzVGV4dCxcbiAgICAgIGhlYWRlcnM6IG5ldyBIZWFkZXJzKHRoaXMuaGVhZGVycyksXG4gICAgICB1cmw6IHRoaXMudXJsXG4gICAgfSlcbiAgfVxuXG4gIFJlc3BvbnNlLmVycm9yID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHJlc3BvbnNlID0gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IDAsIHN0YXR1c1RleHQ6ICcnfSlcbiAgICByZXNwb25zZS50eXBlID0gJ2Vycm9yJ1xuICAgIHJldHVybiByZXNwb25zZVxuICB9XG5cbiAgdmFyIHJlZGlyZWN0U3RhdHVzZXMgPSBbMzAxLCAzMDIsIDMwMywgMzA3LCAzMDhdXG5cbiAgUmVzcG9uc2UucmVkaXJlY3QgPSBmdW5jdGlvbih1cmwsIHN0YXR1cykge1xuICAgIGlmIChyZWRpcmVjdFN0YXR1c2VzLmluZGV4T2Yoc3RhdHVzKSA9PT0gLTEpIHtcbiAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbnZhbGlkIHN0YXR1cyBjb2RlJylcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKG51bGwsIHtzdGF0dXM6IHN0YXR1cywgaGVhZGVyczoge2xvY2F0aW9uOiB1cmx9fSlcbiAgfVxuXG4gIHNlbGYuSGVhZGVycyA9IEhlYWRlcnNcbiAgc2VsZi5SZXF1ZXN0ID0gUmVxdWVzdFxuICBzZWxmLlJlc3BvbnNlID0gUmVzcG9uc2VcblxuICBzZWxmLmZldGNoID0gZnVuY3Rpb24oaW5wdXQsIGluaXQpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24ocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICB2YXIgcmVxdWVzdFxuICAgICAgaWYgKFJlcXVlc3QucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoaW5wdXQpICYmICFpbml0KSB7XG4gICAgICAgIHJlcXVlc3QgPSBpbnB1dFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVxdWVzdCA9IG5ldyBSZXF1ZXN0KGlucHV0LCBpbml0KVxuICAgICAgfVxuXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblxuICAgICAgZnVuY3Rpb24gcmVzcG9uc2VVUkwoKSB7XG4gICAgICAgIGlmICgncmVzcG9uc2VVUkwnIGluIHhocikge1xuICAgICAgICAgIHJldHVybiB4aHIucmVzcG9uc2VVUkxcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEF2b2lkIHNlY3VyaXR5IHdhcm5pbmdzIG9uIGdldFJlc3BvbnNlSGVhZGVyIHdoZW4gbm90IGFsbG93ZWQgYnkgQ09SU1xuICAgICAgICBpZiAoL15YLVJlcXVlc3QtVVJMOi9tLnRlc3QoeGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpKSkge1xuICAgICAgICAgIHJldHVybiB4aHIuZ2V0UmVzcG9uc2VIZWFkZXIoJ1gtUmVxdWVzdC1VUkwnKVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuXG4gICAgICB9XG5cbiAgICAgIHhoci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIG9wdGlvbnMgPSB7XG4gICAgICAgICAgc3RhdHVzOiB4aHIuc3RhdHVzLFxuICAgICAgICAgIHN0YXR1c1RleHQ6IHhoci5zdGF0dXNUZXh0LFxuICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMoeGhyKSxcbiAgICAgICAgICB1cmw6IHJlc3BvbnNlVVJMKClcbiAgICAgICAgfVxuICAgICAgICB2YXIgYm9keSA9ICdyZXNwb25zZScgaW4geGhyID8geGhyLnJlc3BvbnNlIDogeGhyLnJlc3BvbnNlVGV4dFxuICAgICAgICByZXNvbHZlKG5ldyBSZXNwb25zZShib2R5LCBvcHRpb25zKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCBmYWlsZWQnKSlcbiAgICAgIH1cblxuICAgICAgeGhyLm9udGltZW91dCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgICAgfVxuXG4gICAgICB4aHIub3BlbihyZXF1ZXN0Lm1ldGhvZCwgcmVxdWVzdC51cmwsIHRydWUpXG5cbiAgICAgIGlmIChyZXF1ZXN0LmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZScpIHtcbiAgICAgICAgeGhyLndpdGhDcmVkZW50aWFscyA9IHRydWVcbiAgICAgIH1cblxuICAgICAgaWYgKCdyZXNwb25zZVR5cGUnIGluIHhociAmJiBzdXBwb3J0LmJsb2IpIHtcbiAgICAgICAgeGhyLnJlc3BvbnNlVHlwZSA9ICdibG9iJ1xuICAgICAgfVxuXG4gICAgICByZXF1ZXN0LmhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkge1xuICAgICAgICB4aHIuc2V0UmVxdWVzdEhlYWRlcihuYW1lLCB2YWx1ZSlcbiAgICAgIH0pXG5cbiAgICAgIHhoci5zZW5kKHR5cGVvZiByZXF1ZXN0Ll9ib2R5SW5pdCA9PT0gJ3VuZGVmaW5lZCcgPyBudWxsIDogcmVxdWVzdC5fYm9keUluaXQpXG4gICAgfSlcbiAgfVxuICBzZWxmLmZldGNoLnBvbHlmaWxsID0gdHJ1ZVxufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMpO1xuXG5cbi8qKiogRVhQT1JUUyBGUk9NIGV4cG9ydHMtbG9hZGVyICoqKi9cbm1vZHVsZS5leHBvcnRzID0gc2VsZi5mZXRjaDtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9leHBvcnRzLWxvYWRlcj9zZWxmLmZldGNoIS4vfi93aGF0d2ctZmV0Y2gvZmV0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSA4NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyArIFwiYjRkZTI5ZmU0M2FjODVlZjBiNjZmOWM3ZGZjNDc0ZDMucG5nXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9sb2dvLnBuZ1xuICoqIG1vZHVsZSBpZCA9IDg1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9fZ2V0TmF0aXZlJyksXG4gICAgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIERhdGFWaWV3ID0gZ2V0TmF0aXZlKHJvb3QsICdEYXRhVmlldycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IERhdGFWaWV3O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19EYXRhVmlldy5qc1xuICoqIG1vZHVsZSBpZCA9IDg2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgaGFzaENsZWFyID0gcmVxdWlyZSgnLi9faGFzaENsZWFyJyksXG4gICAgaGFzaERlbGV0ZSA9IHJlcXVpcmUoJy4vX2hhc2hEZWxldGUnKSxcbiAgICBoYXNoR2V0ID0gcmVxdWlyZSgnLi9faGFzaEdldCcpLFxuICAgIGhhc2hIYXMgPSByZXF1aXJlKCcuL19oYXNoSGFzJyksXG4gICAgaGFzaFNldCA9IHJlcXVpcmUoJy4vX2hhc2hTZXQnKTtcblxuLyoqXG4gKiBDcmVhdGVzIGEgaGFzaCBvYmplY3QuXG4gKlxuICogQHByaXZhdGVcbiAqIEBjb25zdHJ1Y3RvclxuICogQHBhcmFtIHtBcnJheX0gW2VudHJpZXNdIFRoZSBrZXktdmFsdWUgcGFpcnMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIEhhc2goZW50cmllcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IGVudHJpZXMgPyBlbnRyaWVzLmxlbmd0aCA6IDA7XG5cbiAgdGhpcy5jbGVhcigpO1xuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBlbnRyeSA9IGVudHJpZXNbaW5kZXhdO1xuICAgIHRoaXMuc2V0KGVudHJ5WzBdLCBlbnRyeVsxXSk7XG4gIH1cbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYEhhc2hgLlxuSGFzaC5wcm90b3R5cGUuY2xlYXIgPSBoYXNoQ2xlYXI7XG5IYXNoLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBoYXNoRGVsZXRlO1xuSGFzaC5wcm90b3R5cGUuZ2V0ID0gaGFzaEdldDtcbkhhc2gucHJvdG90eXBlLmhhcyA9IGhhc2hIYXM7XG5IYXNoLnByb3RvdHlwZS5zZXQgPSBoYXNoU2V0O1xuXG5tb2R1bGUuZXhwb3J0cyA9IEhhc2g7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX0hhc2guanNcbiAqKiBtb2R1bGUgaWQgPSA4N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE5hdGl2ZSA9IHJlcXVpcmUoJy4vX2dldE5hdGl2ZScpLFxuICAgIHJvb3QgPSByZXF1aXJlKCcuL19yb290Jyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIHRoYXQgYXJlIHZlcmlmaWVkIHRvIGJlIG5hdGl2ZS4gKi9cbnZhciBQcm9taXNlID0gZ2V0TmF0aXZlKHJvb3QsICdQcm9taXNlJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gUHJvbWlzZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fUHJvbWlzZS5qc1xuICoqIG1vZHVsZSBpZCA9IDg4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TmF0aXZlID0gcmVxdWlyZSgnLi9fZ2V0TmF0aXZlJyksXG4gICAgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgdGhhdCBhcmUgdmVyaWZpZWQgdG8gYmUgbmF0aXZlLiAqL1xudmFyIFNldCA9IGdldE5hdGl2ZShyb290LCAnU2V0Jyk7XG5cbm1vZHVsZS5leHBvcnRzID0gU2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19TZXQuanNcbiAqKiBtb2R1bGUgaWQgPSA4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIE1hcENhY2hlID0gcmVxdWlyZSgnLi9fTWFwQ2FjaGUnKSxcbiAgICBzZXRDYWNoZUFkZCA9IHJlcXVpcmUoJy4vX3NldENhY2hlQWRkJyksXG4gICAgc2V0Q2FjaGVIYXMgPSByZXF1aXJlKCcuL19zZXRDYWNoZUhhcycpO1xuXG4vKipcbiAqXG4gKiBDcmVhdGVzIGFuIGFycmF5IGNhY2hlIG9iamVjdCB0byBzdG9yZSB1bmlxdWUgdmFsdWVzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7QXJyYXl9IFt2YWx1ZXNdIFRoZSB2YWx1ZXMgdG8gY2FjaGUuXG4gKi9cbmZ1bmN0aW9uIFNldENhY2hlKHZhbHVlcykge1xuICB2YXIgaW5kZXggPSAtMSxcbiAgICAgIGxlbmd0aCA9IHZhbHVlcyA/IHZhbHVlcy5sZW5ndGggOiAwO1xuXG4gIHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGU7XG4gIHdoaWxlICgrK2luZGV4IDwgbGVuZ3RoKSB7XG4gICAgdGhpcy5hZGQodmFsdWVzW2luZGV4XSk7XG4gIH1cbn1cblxuLy8gQWRkIG1ldGhvZHMgdG8gYFNldENhY2hlYC5cblNldENhY2hlLnByb3RvdHlwZS5hZGQgPSBTZXRDYWNoZS5wcm90b3R5cGUucHVzaCA9IHNldENhY2hlQWRkO1xuU2V0Q2FjaGUucHJvdG90eXBlLmhhcyA9IHNldENhY2hlSGFzO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFNldENhY2hlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19TZXRDYWNoZS5qc1xuICoqIG1vZHVsZSBpZCA9IDkwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgVWludDhBcnJheSA9IHJvb3QuVWludDhBcnJheTtcblxubW9kdWxlLmV4cG9ydHMgPSBVaW50OEFycmF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19VaW50OEFycmF5LmpzXG4gKiogbW9kdWxlIGlkID0gOTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXROYXRpdmUgPSByZXF1aXJlKCcuL19nZXROYXRpdmUnKSxcbiAgICByb290ID0gcmVxdWlyZSgnLi9fcm9vdCcpO1xuXG4vKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyB0aGF0IGFyZSB2ZXJpZmllZCB0byBiZSBuYXRpdmUuICovXG52YXIgV2Vha01hcCA9IGdldE5hdGl2ZShyb290LCAnV2Vha01hcCcpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFdlYWtNYXA7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX1dlYWtNYXAuanNcbiAqKiBtb2R1bGUgaWQgPSA5MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBBIGZhc3RlciBhbHRlcm5hdGl2ZSB0byBgRnVuY3Rpb24jYXBwbHlgLCB0aGlzIGZ1bmN0aW9uIGludm9rZXMgYGZ1bmNgXG4gKiB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiBgdGhpc0FyZ2AgYW5kIHRoZSBhcmd1bWVudHMgb2YgYGFyZ3NgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBpbnZva2UuXG4gKiBAcGFyYW0geyp9IHRoaXNBcmcgVGhlIGB0aGlzYCBiaW5kaW5nIG9mIGBmdW5jYC5cbiAqIEBwYXJhbSB7QXJyYXl9IGFyZ3MgVGhlIGFyZ3VtZW50cyB0byBpbnZva2UgYGZ1bmNgIHdpdGguXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgcmVzdWx0IG9mIGBmdW5jYC5cbiAqL1xuZnVuY3Rpb24gYXBwbHkoZnVuYywgdGhpc0FyZywgYXJncykge1xuICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG4gIHN3aXRjaCAobGVuZ3RoKSB7XG4gICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcpO1xuICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzQXJnLCBhcmdzWzBdKTtcbiAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpc0FyZywgYXJnc1swXSwgYXJnc1sxXSk7XG4gICAgY2FzZSAzOiByZXR1cm4gZnVuYy5jYWxsKHRoaXNBcmcsIGFyZ3NbMF0sIGFyZ3NbMV0sIGFyZ3NbMl0pO1xuICB9XG4gIHJldHVybiBmdW5jLmFwcGx5KHRoaXNBcmcsIGFyZ3MpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGFwcGx5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19hcHBseS5qc1xuICoqIG1vZHVsZSBpZCA9IDkzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgXy5zb21lYCBmb3IgYXJyYXlzIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWVcbiAqIHNob3J0aGFuZHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl9IFthcnJheV0gVGhlIGFycmF5IHRvIGl0ZXJhdGUgb3Zlci5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFueSBlbGVtZW50IHBhc3NlcyB0aGUgcHJlZGljYXRlIGNoZWNrLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYXJyYXlTb21lKGFycmF5LCBwcmVkaWNhdGUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG5cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBhcnJheVNvbWU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2FycmF5U29tZS5qc1xuICoqIG1vZHVsZSBpZCA9IDk0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5kZWxheWAgYW5kIGBfLmRlZmVyYCB3aGljaCBhY2NlcHRzIGFuIGFycmF5XG4gKiBvZiBgZnVuY2AgYXJndW1lbnRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmdW5jIFRoZSBmdW5jdGlvbiB0byBkZWxheS5cbiAqIEBwYXJhbSB7bnVtYmVyfSB3YWl0IFRoZSBudW1iZXIgb2YgbWlsbGlzZWNvbmRzIHRvIGRlbGF5IGludm9jYXRpb24uXG4gKiBAcGFyYW0ge09iamVjdH0gYXJncyBUaGUgYXJndW1lbnRzIHRvIHByb3ZpZGUgdG8gYGZ1bmNgLlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgdGltZXIgaWQuXG4gKi9cbmZ1bmN0aW9uIGJhc2VEZWxheShmdW5jLCB3YWl0LCBhcmdzKSB7XG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHJldHVybiBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkgeyBmdW5jLmFwcGx5KHVuZGVmaW5lZCwgYXJncyk7IH0sIHdhaXQpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VEZWxheTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZURlbGF5LmpzXG4gKiogbW9kdWxlIGlkID0gOTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uZmluZEluZGV4YCBhbmQgYF8uZmluZExhc3RJbmRleGAgd2l0aG91dFxuICogc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kcy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtBcnJheX0gYXJyYXkgVGhlIGFycmF5IHRvIHNlYXJjaC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IHByZWRpY2F0ZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHBhcmFtIHtudW1iZXJ9IGZyb21JbmRleCBUaGUgaW5kZXggdG8gc2VhcmNoIGZyb20uXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtmcm9tUmlnaHRdIFNwZWNpZnkgaXRlcmF0aW5nIGZyb20gcmlnaHQgdG8gbGVmdC5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBtYXRjaGVkIHZhbHVlLCBlbHNlIGAtMWAuXG4gKi9cbmZ1bmN0aW9uIGJhc2VGaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSwgZnJvbUluZGV4LCBmcm9tUmlnaHQpIHtcbiAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCxcbiAgICAgIGluZGV4ID0gZnJvbUluZGV4ICsgKGZyb21SaWdodCA/IDEgOiAtMSk7XG5cbiAgd2hpbGUgKChmcm9tUmlnaHQgPyBpbmRleC0tIDogKytpbmRleCA8IGxlbmd0aCkpIHtcbiAgICBpZiAocHJlZGljYXRlKGFycmF5W2luZGV4XSwgaW5kZXgsIGFycmF5KSkge1xuICAgICAgcmV0dXJuIGluZGV4O1xuICAgIH1cbiAgfVxuICByZXR1cm4gLTE7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZUZpbmRJbmRleDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUZpbmRJbmRleC5qc1xuICoqIG1vZHVsZSBpZCA9IDk2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmhhc0luYCB3aXRob3V0IHN1cHBvcnQgZm9yIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb2JqZWN0XSBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IGtleSBUaGUga2V5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSGFzSW4ob2JqZWN0LCBrZXkpIHtcbiAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIGtleSBpbiBPYmplY3Qob2JqZWN0KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSGFzSW47XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VIYXNJbi5qc1xuICoqIG1vZHVsZSBpZCA9IDk3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgU3RhY2sgPSByZXF1aXJlKCcuL19TdGFjaycpLFxuICAgIGVxdWFsQXJyYXlzID0gcmVxdWlyZSgnLi9fZXF1YWxBcnJheXMnKSxcbiAgICBlcXVhbEJ5VGFnID0gcmVxdWlyZSgnLi9fZXF1YWxCeVRhZycpLFxuICAgIGVxdWFsT2JqZWN0cyA9IHJlcXVpcmUoJy4vX2VxdWFsT2JqZWN0cycpLFxuICAgIGdldFRhZyA9IHJlcXVpcmUoJy4vX2dldFRhZycpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBpc0hvc3RPYmplY3QgPSByZXF1aXJlKCcuL19pc0hvc3RPYmplY3QnKSxcbiAgICBpc1R5cGVkQXJyYXkgPSByZXF1aXJlKCcuL2lzVHlwZWRBcnJheScpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cbnZhciBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBhcmdzVGFnID0gJ1tvYmplY3QgQXJndW1lbnRzXScsXG4gICAgYXJyYXlUYWcgPSAnW29iamVjdCBBcnJheV0nLFxuICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgb2JqZWN0UHJvdG8gPSBPYmplY3QucHJvdG90eXBlO1xuXG4vKiogVXNlZCB0byBjaGVjayBvYmplY3RzIGZvciBvd24gcHJvcGVydGllcy4gKi9cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IG9iamVjdFByb3RvLmhhc093blByb3BlcnR5O1xuXG4vKipcbiAqIEEgc3BlY2lhbGl6ZWQgdmVyc2lvbiBvZiBgYmFzZUlzRXF1YWxgIGZvciBhcnJheXMgYW5kIG9iamVjdHMgd2hpY2ggcGVyZm9ybXNcbiAqIGRlZXAgY29tcGFyaXNvbnMgYW5kIHRyYWNrcyB0cmF2ZXJzZWQgb2JqZWN0cyBlbmFibGluZyBvYmplY3RzIHdpdGggY2lyY3VsYXJcbiAqIHJlZmVyZW5jZXMgdG8gYmUgY29tcGFyZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtPYmplY3R9IG90aGVyIFRoZSBvdGhlciBvYmplY3QgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGVxdWFsRnVuYyBUaGUgZnVuY3Rpb24gdG8gZGV0ZXJtaW5lIGVxdWl2YWxlbnRzIG9mIHZhbHVlcy5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjdXN0b21pemVyXSBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtudW1iZXJ9IFtiaXRtYXNrXSBUaGUgYml0bWFzayBvZiBjb21wYXJpc29uIGZsYWdzLiBTZWUgYGJhc2VJc0VxdWFsYFxuICogIGZvciBtb3JlIGRldGFpbHMuXG4gKiBAcGFyYW0ge09iamVjdH0gW3N0YWNrXSBUcmFja3MgdHJhdmVyc2VkIGBvYmplY3RgIGFuZCBgb3RoZXJgIG9iamVjdHMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIG9iamVjdHMgYXJlIGVxdWl2YWxlbnQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gYmFzZUlzRXF1YWxEZWVwKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spIHtcbiAgdmFyIG9iaklzQXJyID0gaXNBcnJheShvYmplY3QpLFxuICAgICAgb3RoSXNBcnIgPSBpc0FycmF5KG90aGVyKSxcbiAgICAgIG9ialRhZyA9IGFycmF5VGFnLFxuICAgICAgb3RoVGFnID0gYXJyYXlUYWc7XG5cbiAgaWYgKCFvYmpJc0Fycikge1xuICAgIG9ialRhZyA9IGdldFRhZyhvYmplY3QpO1xuICAgIG9ialRhZyA9IG9ialRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb2JqVGFnO1xuICB9XG4gIGlmICghb3RoSXNBcnIpIHtcbiAgICBvdGhUYWcgPSBnZXRUYWcob3RoZXIpO1xuICAgIG90aFRhZyA9IG90aFRhZyA9PSBhcmdzVGFnID8gb2JqZWN0VGFnIDogb3RoVGFnO1xuICB9XG4gIHZhciBvYmpJc09iaiA9IG9ialRhZyA9PSBvYmplY3RUYWcgJiYgIWlzSG9zdE9iamVjdChvYmplY3QpLFxuICAgICAgb3RoSXNPYmogPSBvdGhUYWcgPT0gb2JqZWN0VGFnICYmICFpc0hvc3RPYmplY3Qob3RoZXIpLFxuICAgICAgaXNTYW1lVGFnID0gb2JqVGFnID09IG90aFRhZztcblxuICBpZiAoaXNTYW1lVGFnICYmICFvYmpJc09iaikge1xuICAgIHN0YWNrIHx8IChzdGFjayA9IG5ldyBTdGFjayk7XG4gICAgcmV0dXJuIChvYmpJc0FyciB8fCBpc1R5cGVkQXJyYXkob2JqZWN0KSlcbiAgICAgID8gZXF1YWxBcnJheXMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaylcbiAgICAgIDogZXF1YWxCeVRhZyhvYmplY3QsIG90aGVyLCBvYmpUYWcsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuICB9XG4gIGlmICghKGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRykpIHtcbiAgICB2YXIgb2JqSXNXcmFwcGVkID0gb2JqSXNPYmogJiYgaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsICdfX3dyYXBwZWRfXycpLFxuICAgICAgICBvdGhJc1dyYXBwZWQgPSBvdGhJc09iaiAmJiBoYXNPd25Qcm9wZXJ0eS5jYWxsKG90aGVyLCAnX193cmFwcGVkX18nKTtcblxuICAgIGlmIChvYmpJc1dyYXBwZWQgfHwgb3RoSXNXcmFwcGVkKSB7XG4gICAgICB2YXIgb2JqVW53cmFwcGVkID0gb2JqSXNXcmFwcGVkID8gb2JqZWN0LnZhbHVlKCkgOiBvYmplY3QsXG4gICAgICAgICAgb3RoVW53cmFwcGVkID0gb3RoSXNXcmFwcGVkID8gb3RoZXIudmFsdWUoKSA6IG90aGVyO1xuXG4gICAgICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICAgICAgcmV0dXJuIGVxdWFsRnVuYyhvYmpVbndyYXBwZWQsIG90aFVud3JhcHBlZCwgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuICAgIH1cbiAgfVxuICBpZiAoIWlzU2FtZVRhZykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBzdGFjayB8fCAoc3RhY2sgPSBuZXcgU3RhY2spO1xuICByZXR1cm4gZXF1YWxPYmplY3RzKG9iamVjdCwgb3RoZXIsIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJc0VxdWFsRGVlcDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUlzRXF1YWxEZWVwLmpzXG4gKiogbW9kdWxlIGlkID0gOThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBTdGFjayA9IHJlcXVpcmUoJy4vX1N0YWNrJyksXG4gICAgYmFzZUlzRXF1YWwgPSByZXF1aXJlKCcuL19iYXNlSXNFcXVhbCcpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cbnZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcbiAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cbi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8uaXNNYXRjaGAgd2l0aG91dCBzdXBwb3J0IGZvciBpdGVyYXRlZSBzaG9ydGhhbmRzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gaW5zcGVjdC5cbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gKiBAcGFyYW0ge0FycmF5fSBtYXRjaERhdGEgVGhlIHByb3BlcnR5IG5hbWVzLCB2YWx1ZXMsIGFuZCBjb21wYXJlIGZsYWdzIHRvIG1hdGNoLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2N1c3RvbWl6ZXJdIFRoZSBmdW5jdGlvbiB0byBjdXN0b21pemUgY29tcGFyaXNvbnMuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYG9iamVjdGAgaXMgYSBtYXRjaCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNNYXRjaChvYmplY3QsIHNvdXJjZSwgbWF0Y2hEYXRhLCBjdXN0b21pemVyKSB7XG4gIHZhciBpbmRleCA9IG1hdGNoRGF0YS5sZW5ndGgsXG4gICAgICBsZW5ndGggPSBpbmRleCxcbiAgICAgIG5vQ3VzdG9taXplciA9ICFjdXN0b21pemVyO1xuXG4gIGlmIChvYmplY3QgPT0gbnVsbCkge1xuICAgIHJldHVybiAhbGVuZ3RoO1xuICB9XG4gIG9iamVjdCA9IE9iamVjdChvYmplY3QpO1xuICB3aGlsZSAoaW5kZXgtLSkge1xuICAgIHZhciBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcbiAgICBpZiAoKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKVxuICAgICAgICAgID8gZGF0YVsxXSAhPT0gb2JqZWN0W2RhdGFbMF1dXG4gICAgICAgICAgOiAhKGRhdGFbMF0gaW4gb2JqZWN0KVxuICAgICAgICApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgd2hpbGUgKCsraW5kZXggPCBsZW5ndGgpIHtcbiAgICBkYXRhID0gbWF0Y2hEYXRhW2luZGV4XTtcbiAgICB2YXIga2V5ID0gZGF0YVswXSxcbiAgICAgICAgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgc3JjVmFsdWUgPSBkYXRhWzFdO1xuXG4gICAgaWYgKG5vQ3VzdG9taXplciAmJiBkYXRhWzJdKSB7XG4gICAgICBpZiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiAhKGtleSBpbiBvYmplY3QpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHN0YWNrID0gbmV3IFN0YWNrO1xuICAgICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgICAgdmFyIHJlc3VsdCA9IGN1c3RvbWl6ZXIob2JqVmFsdWUsIHNyY1ZhbHVlLCBrZXksIG9iamVjdCwgc291cmNlLCBzdGFjayk7XG4gICAgICB9XG4gICAgICBpZiAoIShyZXN1bHQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgICAgPyBiYXNlSXNFcXVhbChzcmNWYWx1ZSwgb2JqVmFsdWUsIGN1c3RvbWl6ZXIsIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgfCBQQVJUSUFMX0NPTVBBUkVfRkxBRywgc3RhY2spXG4gICAgICAgICAgICA6IHJlc3VsdFxuICAgICAgICAgICkpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlSXNNYXRjaDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUlzTWF0Y2guanNcbiAqKiBtb2R1bGUgaWQgPSA5OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzRnVuY3Rpb24gPSByZXF1aXJlKCcuL2lzRnVuY3Rpb24nKSxcbiAgICBpc0hvc3RPYmplY3QgPSByZXF1aXJlKCcuL19pc0hvc3RPYmplY3QnKSxcbiAgICBpc01hc2tlZCA9IHJlcXVpcmUoJy4vX2lzTWFza2VkJyksXG4gICAgaXNPYmplY3QgPSByZXF1aXJlKCcuL2lzT2JqZWN0JyksXG4gICAgdG9Tb3VyY2UgPSByZXF1aXJlKCcuL190b1NvdXJjZScpO1xuXG4vKipcbiAqIFVzZWQgdG8gbWF0Y2ggYFJlZ0V4cGBcbiAqIFtzeW50YXggY2hhcmFjdGVyc10oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtcGF0dGVybnMpLlxuICovXG52YXIgcmVSZWdFeHBDaGFyID0gL1tcXFxcXiQuKis/KClbXFxde318XS9nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgaG9zdCBjb25zdHJ1Y3RvcnMgKFNhZmFyaSkuICovXG52YXIgcmVJc0hvc3RDdG9yID0gL15cXFtvYmplY3QgLis/Q29uc3RydWN0b3JcXF0kLztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gcmVzb2x2ZSB0aGUgZGVjb21waWxlZCBzb3VyY2Ugb2YgZnVuY3Rpb25zLiAqL1xudmFyIGZ1bmNUb1N0cmluZyA9IEZ1bmN0aW9uLnByb3RvdHlwZS50b1N0cmluZztcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IGlmIGEgbWV0aG9kIGlzIG5hdGl2ZS4gKi9cbnZhciByZUlzTmF0aXZlID0gUmVnRXhwKCdeJyArXG4gIGZ1bmNUb1N0cmluZy5jYWxsKGhhc093blByb3BlcnR5KS5yZXBsYWNlKHJlUmVnRXhwQ2hhciwgJ1xcXFwkJicpXG4gIC5yZXBsYWNlKC9oYXNPd25Qcm9wZXJ0eXwoZnVuY3Rpb24pLio/KD89XFxcXFxcKCl8IGZvciAuKz8oPz1cXFxcXFxdKS9nLCAnJDEuKj8nKSArICckJ1xuKTtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy5pc05hdGl2ZWAgd2l0aG91dCBiYWQgc2hpbSBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgYSBuYXRpdmUgZnVuY3Rpb24sXG4gKiAgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBiYXNlSXNOYXRpdmUodmFsdWUpIHtcbiAgaWYgKCFpc09iamVjdCh2YWx1ZSkgfHwgaXNNYXNrZWQodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBwYXR0ZXJuID0gKGlzRnVuY3Rpb24odmFsdWUpIHx8IGlzSG9zdE9iamVjdCh2YWx1ZSkpID8gcmVJc05hdGl2ZSA6IHJlSXNIb3N0Q3RvcjtcbiAgcmV0dXJuIHBhdHRlcm4udGVzdCh0b1NvdXJjZSh2YWx1ZSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJc05hdGl2ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUlzTmF0aXZlLmpzXG4gKiogbW9kdWxlIGlkID0gMTAwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZU1hdGNoZXMgPSByZXF1aXJlKCcuL19iYXNlTWF0Y2hlcycpLFxuICAgIGJhc2VNYXRjaGVzUHJvcGVydHkgPSByZXF1aXJlKCcuL19iYXNlTWF0Y2hlc1Byb3BlcnR5JyksXG4gICAgaWRlbnRpdHkgPSByZXF1aXJlKCcuL2lkZW50aXR5JyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIHByb3BlcnR5ID0gcmVxdWlyZSgnLi9wcm9wZXJ0eScpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLml0ZXJhdGVlYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHsqfSBbdmFsdWU9Xy5pZGVudGl0eV0gVGhlIHZhbHVlIHRvIGNvbnZlcnQgdG8gYW4gaXRlcmF0ZWUuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIGl0ZXJhdGVlLlxuICovXG5mdW5jdGlvbiBiYXNlSXRlcmF0ZWUodmFsdWUpIHtcbiAgLy8gRG9uJ3Qgc3RvcmUgdGhlIGB0eXBlb2ZgIHJlc3VsdCBpbiBhIHZhcmlhYmxlIHRvIGF2b2lkIGEgSklUIGJ1ZyBpbiBTYWZhcmkgOS5cbiAgLy8gU2VlIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xNTYwMzQgZm9yIG1vcmUgZGV0YWlscy5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB7XG4gICAgcmV0dXJuIGlkZW50aXR5O1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT0gJ29iamVjdCcpIHtcbiAgICByZXR1cm4gaXNBcnJheSh2YWx1ZSlcbiAgICAgID8gYmFzZU1hdGNoZXNQcm9wZXJ0eSh2YWx1ZVswXSwgdmFsdWVbMV0pXG4gICAgICA6IGJhc2VNYXRjaGVzKHZhbHVlKTtcbiAgfVxuICByZXR1cm4gcHJvcGVydHkodmFsdWUpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VJdGVyYXRlZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUl0ZXJhdGVlLmpzXG4gKiogbW9kdWxlIGlkID0gMTAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiBCdWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcyBmb3IgdGhvc2Ugd2l0aCB0aGUgc2FtZSBuYW1lIGFzIG90aGVyIGBsb2Rhc2hgIG1ldGhvZHMuICovXG52YXIgbmF0aXZlS2V5cyA9IE9iamVjdC5rZXlzO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLmtleXNgIHdoaWNoIGRvZXNuJ3Qgc2tpcCB0aGUgY29uc3RydWN0b3JcbiAqIHByb3BlcnR5IG9mIHByb3RvdHlwZXMgb3IgdHJlYXQgc3BhcnNlIGFycmF5cyBhcyBkZW5zZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiBwcm9wZXJ0eSBuYW1lcy5cbiAqL1xuZnVuY3Rpb24gYmFzZUtleXMob2JqZWN0KSB7XG4gIHJldHVybiBuYXRpdmVLZXlzKE9iamVjdChvYmplY3QpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlS2V5cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZUtleXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlSXNNYXRjaCA9IHJlcXVpcmUoJy4vX2Jhc2VJc01hdGNoJyksXG4gICAgZ2V0TWF0Y2hEYXRhID0gcmVxdWlyZSgnLi9fZ2V0TWF0Y2hEYXRhJyksXG4gICAgbWF0Y2hlc1N0cmljdENvbXBhcmFibGUgPSByZXF1aXJlKCcuL19tYXRjaGVzU3RyaWN0Q29tcGFyYWJsZScpO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hdGNoZXNgIHdoaWNoIGRvZXNuJ3QgY2xvbmUgYHNvdXJjZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzb3VyY2UgVGhlIG9iamVjdCBvZiBwcm9wZXJ0eSB2YWx1ZXMgdG8gbWF0Y2guXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlTWF0Y2hlcyhzb3VyY2UpIHtcbiAgdmFyIG1hdGNoRGF0YSA9IGdldE1hdGNoRGF0YShzb3VyY2UpO1xuICBpZiAobWF0Y2hEYXRhLmxlbmd0aCA9PSAxICYmIG1hdGNoRGF0YVswXVsyXSkge1xuICAgIHJldHVybiBtYXRjaGVzU3RyaWN0Q29tcGFyYWJsZShtYXRjaERhdGFbMF1bMF0sIG1hdGNoRGF0YVswXVsxXSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHJldHVybiBvYmplY3QgPT09IHNvdXJjZSB8fCBiYXNlSXNNYXRjaChvYmplY3QsIHNvdXJjZSwgbWF0Y2hEYXRhKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBiYXNlTWF0Y2hlcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZU1hdGNoZXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlSXNFcXVhbCA9IHJlcXVpcmUoJy4vX2Jhc2VJc0VxdWFsJyksXG4gICAgZ2V0ID0gcmVxdWlyZSgnLi9nZXQnKSxcbiAgICBoYXNJbiA9IHJlcXVpcmUoJy4vaGFzSW4nKSxcbiAgICBpc0tleSA9IHJlcXVpcmUoJy4vX2lzS2V5JyksXG4gICAgaXNTdHJpY3RDb21wYXJhYmxlID0gcmVxdWlyZSgnLi9faXNTdHJpY3RDb21wYXJhYmxlJyksXG4gICAgbWF0Y2hlc1N0cmljdENvbXBhcmFibGUgPSByZXF1aXJlKCcuL19tYXRjaGVzU3RyaWN0Q29tcGFyYWJsZScpLFxuICAgIHRvS2V5ID0gcmVxdWlyZSgnLi9fdG9LZXknKTtcblxuLyoqIFVzZWQgdG8gY29tcG9zZSBiaXRtYXNrcyBmb3IgY29tcGFyaXNvbiBzdHlsZXMuICovXG52YXIgVU5PUkRFUkVEX0NPTVBBUkVfRkxBRyA9IDEsXG4gICAgUEFSVElBTF9DT01QQVJFX0ZMQUcgPSAyO1xuXG4vKipcbiAqIFRoZSBiYXNlIGltcGxlbWVudGF0aW9uIG9mIGBfLm1hdGNoZXNQcm9wZXJ0eWAgd2hpY2ggZG9lc24ndCBjbG9uZSBgc3JjVmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gcGF0aCBUaGUgcGF0aCBvZiB0aGUgcHJvcGVydHkgdG8gZ2V0LlxuICogQHBhcmFtIHsqfSBzcmNWYWx1ZSBUaGUgdmFsdWUgdG8gbWF0Y2guXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBzcGVjIGZ1bmN0aW9uLlxuICovXG5mdW5jdGlvbiBiYXNlTWF0Y2hlc1Byb3BlcnR5KHBhdGgsIHNyY1ZhbHVlKSB7XG4gIGlmIChpc0tleShwYXRoKSAmJiBpc1N0cmljdENvbXBhcmFibGUoc3JjVmFsdWUpKSB7XG4gICAgcmV0dXJuIG1hdGNoZXNTdHJpY3RDb21wYXJhYmxlKHRvS2V5KHBhdGgpLCBzcmNWYWx1ZSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uKG9iamVjdCkge1xuICAgIHZhciBvYmpWYWx1ZSA9IGdldChvYmplY3QsIHBhdGgpO1xuICAgIHJldHVybiAob2JqVmFsdWUgPT09IHVuZGVmaW5lZCAmJiBvYmpWYWx1ZSA9PT0gc3JjVmFsdWUpXG4gICAgICA/IGhhc0luKG9iamVjdCwgcGF0aClcbiAgICAgIDogYmFzZUlzRXF1YWwoc3JjVmFsdWUsIG9ialZhbHVlLCB1bmRlZmluZWQsIFVOT1JERVJFRF9DT01QQVJFX0ZMQUcgfCBQQVJUSUFMX0NPTVBBUkVfRkxBRyk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZU1hdGNoZXNQcm9wZXJ0eTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fYmFzZU1hdGNoZXNQcm9wZXJ0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDEwNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VHZXQgPSByZXF1aXJlKCcuL19iYXNlR2V0Jyk7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlUHJvcGVydHlgIHdoaWNoIHN1cHBvcnRzIGRlZXAgcGF0aHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259IFJldHVybnMgdGhlIG5ldyBhY2Nlc3NvciBmdW5jdGlvbi5cbiAqL1xuZnVuY3Rpb24gYmFzZVByb3BlcnR5RGVlcChwYXRoKSB7XG4gIHJldHVybiBmdW5jdGlvbihvYmplY3QpIHtcbiAgICByZXR1cm4gYmFzZUdldChvYmplY3QsIHBhdGgpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGJhc2VQcm9wZXJ0eURlZXA7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2Jhc2VQcm9wZXJ0eURlZXAuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogVGhlIGJhc2UgaW1wbGVtZW50YXRpb24gb2YgYF8udGltZXNgIHdpdGhvdXQgc3VwcG9ydCBmb3IgaXRlcmF0ZWUgc2hvcnRoYW5kc1xuICogb3IgbWF4IGFycmF5IGxlbmd0aCBjaGVja3MuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7bnVtYmVyfSBuIFRoZSBudW1iZXIgb2YgdGltZXMgdG8gaW52b2tlIGBpdGVyYXRlZWAuXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBpdGVyYXRlZSBUaGUgZnVuY3Rpb24gaW52b2tlZCBwZXIgaXRlcmF0aW9uLlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBhcnJheSBvZiByZXN1bHRzLlxuICovXG5mdW5jdGlvbiBiYXNlVGltZXMobiwgaXRlcmF0ZWUpIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShuKTtcblxuICB3aGlsZSAoKytpbmRleCA8IG4pIHtcbiAgICByZXN1bHRbaW5kZXhdID0gaXRlcmF0ZWUoaW5kZXgpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZVRpbWVzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlVGltZXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBTeW1ib2wgPSByZXF1aXJlKCcuL19TeW1ib2wnKSxcbiAgICBpc1N5bWJvbCA9IHJlcXVpcmUoJy4vaXNTeW1ib2wnKTtcblxuLyoqIFVzZWQgYXMgcmVmZXJlbmNlcyBmb3IgdmFyaW91cyBgTnVtYmVyYCBjb25zdGFudHMuICovXG52YXIgSU5GSU5JVFkgPSAxIC8gMDtcblxuLyoqIFVzZWQgdG8gY29udmVydCBzeW1ib2xzIHRvIHByaW1pdGl2ZXMgYW5kIHN0cmluZ3MuICovXG52YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuICAgIHN5bWJvbFRvU3RyaW5nID0gc3ltYm9sUHJvdG8gPyBzeW1ib2xQcm90by50b1N0cmluZyA6IHVuZGVmaW5lZDtcblxuLyoqXG4gKiBUaGUgYmFzZSBpbXBsZW1lbnRhdGlvbiBvZiBgXy50b1N0cmluZ2Agd2hpY2ggZG9lc24ndCBjb252ZXJ0IG51bGxpc2hcbiAqIHZhbHVlcyB0byBlbXB0eSBzdHJpbmdzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBwcm9jZXNzLlxuICogQHJldHVybnMge3N0cmluZ30gUmV0dXJucyB0aGUgc3RyaW5nLlxuICovXG5mdW5jdGlvbiBiYXNlVG9TdHJpbmcodmFsdWUpIHtcbiAgLy8gRXhpdCBlYXJseSBmb3Igc3RyaW5ncyB0byBhdm9pZCBhIHBlcmZvcm1hbmNlIGhpdCBpbiBzb21lIGVudmlyb25tZW50cy5cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PSAnc3RyaW5nJykge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAoaXNTeW1ib2wodmFsdWUpKSB7XG4gICAgcmV0dXJuIHN5bWJvbFRvU3RyaW5nID8gc3ltYm9sVG9TdHJpbmcuY2FsbCh2YWx1ZSkgOiAnJztcbiAgfVxuICB2YXIgcmVzdWx0ID0gKHZhbHVlICsgJycpO1xuICByZXR1cm4gKHJlc3VsdCA9PSAnMCcgJiYgKDEgLyB2YWx1ZSkgPT0gLUlORklOSVRZKSA/ICctMCcgOiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gYmFzZVRvU3RyaW5nO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19iYXNlVG9TdHJpbmcuanNcbiAqKiBtb2R1bGUgaWQgPSAxMDdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgYSBnbG9iYWwgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtudWxsfE9iamVjdH0gUmV0dXJucyBgdmFsdWVgIGlmIGl0J3MgYSBnbG9iYWwgb2JqZWN0LCBlbHNlIGBudWxsYC5cbiAqL1xuZnVuY3Rpb24gY2hlY2tHbG9iYWwodmFsdWUpIHtcbiAgcmV0dXJuICh2YWx1ZSAmJiB2YWx1ZS5PYmplY3QgPT09IE9iamVjdCkgPyB2YWx1ZSA6IG51bGw7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gY2hlY2tHbG9iYWw7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2NoZWNrR2xvYmFsLmpzXG4gKiogbW9kdWxlIGlkID0gMTA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgcm9vdCA9IHJlcXVpcmUoJy4vX3Jvb3QnKTtcblxuLyoqIFVzZWQgdG8gZGV0ZWN0IG92ZXJyZWFjaGluZyBjb3JlLWpzIHNoaW1zLiAqL1xudmFyIGNvcmVKc0RhdGEgPSByb290WydfX2NvcmUtanNfc2hhcmVkX18nXTtcblxubW9kdWxlLmV4cG9ydHMgPSBjb3JlSnNEYXRhO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19jb3JlSnNEYXRhLmpzXG4gKiogbW9kdWxlIGlkID0gMTA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgU3ltYm9sID0gcmVxdWlyZSgnLi9fU3ltYm9sJyksXG4gICAgVWludDhBcnJheSA9IHJlcXVpcmUoJy4vX1VpbnQ4QXJyYXknKSxcbiAgICBlcXVhbEFycmF5cyA9IHJlcXVpcmUoJy4vX2VxdWFsQXJyYXlzJyksXG4gICAgbWFwVG9BcnJheSA9IHJlcXVpcmUoJy4vX21hcFRvQXJyYXknKSxcbiAgICBzZXRUb0FycmF5ID0gcmVxdWlyZSgnLi9fc2V0VG9BcnJheScpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cbnZhciBVTk9SREVSRURfQ09NUEFSRV9GTEFHID0gMSxcbiAgICBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG4gICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuICAgIHN5bWJvbFRhZyA9ICdbb2JqZWN0IFN5bWJvbF0nO1xuXG52YXIgYXJyYXlCdWZmZXJUYWcgPSAnW29iamVjdCBBcnJheUJ1ZmZlcl0nLFxuICAgIGRhdGFWaWV3VGFnID0gJ1tvYmplY3QgRGF0YVZpZXddJztcblxuLyoqIFVzZWQgdG8gY29udmVydCBzeW1ib2xzIHRvIHByaW1pdGl2ZXMgYW5kIHN0cmluZ3MuICovXG52YXIgc3ltYm9sUHJvdG8gPSBTeW1ib2wgPyBTeW1ib2wucHJvdG90eXBlIDogdW5kZWZpbmVkLFxuICAgIHN5bWJvbFZhbHVlT2YgPSBzeW1ib2xQcm90byA/IHN5bWJvbFByb3RvLnZhbHVlT2YgOiB1bmRlZmluZWQ7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBjb21wYXJpbmcgb2JqZWN0cyBvZlxuICogdGhlIHNhbWUgYHRvU3RyaW5nVGFnYC5cbiAqXG4gKiAqKk5vdGU6KiogVGhpcyBmdW5jdGlvbiBvbmx5IHN1cHBvcnRzIGNvbXBhcmluZyB2YWx1ZXMgd2l0aCB0YWdzIG9mXG4gKiBgQm9vbGVhbmAsIGBEYXRlYCwgYEVycm9yYCwgYE51bWJlcmAsIGBSZWdFeHBgLCBvciBgU3RyaW5nYC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtzdHJpbmd9IHRhZyBUaGUgYHRvU3RyaW5nVGFnYCBvZiB0aGUgb2JqZWN0cyB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcbiAqICBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbEJ5VGFnKG9iamVjdCwgb3RoZXIsIHRhZywgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuICBzd2l0Y2ggKHRhZykge1xuICAgIGNhc2UgZGF0YVZpZXdUYWc6XG4gICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG4gICAgICAgICAgKG9iamVjdC5ieXRlT2Zmc2V0ICE9IG90aGVyLmJ5dGVPZmZzZXQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIG9iamVjdCA9IG9iamVjdC5idWZmZXI7XG4gICAgICBvdGhlciA9IG90aGVyLmJ1ZmZlcjtcblxuICAgIGNhc2UgYXJyYXlCdWZmZXJUYWc6XG4gICAgICBpZiAoKG9iamVjdC5ieXRlTGVuZ3RoICE9IG90aGVyLmJ5dGVMZW5ndGgpIHx8XG4gICAgICAgICAgIWVxdWFsRnVuYyhuZXcgVWludDhBcnJheShvYmplY3QpLCBuZXcgVWludDhBcnJheShvdGhlcikpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuXG4gICAgY2FzZSBib29sVGFnOlxuICAgIGNhc2UgZGF0ZVRhZzpcbiAgICAgIC8vIENvZXJjZSBkYXRlcyBhbmQgYm9vbGVhbnMgdG8gbnVtYmVycywgZGF0ZXMgdG8gbWlsbGlzZWNvbmRzIGFuZFxuICAgICAgLy8gYm9vbGVhbnMgdG8gYDFgIG9yIGAwYCB0cmVhdGluZyBpbnZhbGlkIGRhdGVzIGNvZXJjZWQgdG8gYE5hTmAgYXNcbiAgICAgIC8vIG5vdCBlcXVhbC5cbiAgICAgIHJldHVybiArb2JqZWN0ID09ICtvdGhlcjtcblxuICAgIGNhc2UgZXJyb3JUYWc6XG4gICAgICByZXR1cm4gb2JqZWN0Lm5hbWUgPT0gb3RoZXIubmFtZSAmJiBvYmplY3QubWVzc2FnZSA9PSBvdGhlci5tZXNzYWdlO1xuXG4gICAgY2FzZSBudW1iZXJUYWc6XG4gICAgICAvLyBUcmVhdCBgTmFOYCB2cy4gYE5hTmAgYXMgZXF1YWwuXG4gICAgICByZXR1cm4gKG9iamVjdCAhPSArb2JqZWN0KSA/IG90aGVyICE9ICtvdGhlciA6IG9iamVjdCA9PSArb3RoZXI7XG5cbiAgICBjYXNlIHJlZ2V4cFRhZzpcbiAgICBjYXNlIHN0cmluZ1RhZzpcbiAgICAgIC8vIENvZXJjZSByZWdleGVzIHRvIHN0cmluZ3MgYW5kIHRyZWF0IHN0cmluZ3MsIHByaW1pdGl2ZXMgYW5kIG9iamVjdHMsXG4gICAgICAvLyBhcyBlcXVhbC4gU2VlIGh0dHA6Ly93d3cuZWNtYS1pbnRlcm5hdGlvbmFsLm9yZy9lY21hLTI2Mi82LjAvI3NlYy1yZWdleHAucHJvdG90eXBlLnRvc3RyaW5nXG4gICAgICAvLyBmb3IgbW9yZSBkZXRhaWxzLlxuICAgICAgcmV0dXJuIG9iamVjdCA9PSAob3RoZXIgKyAnJyk7XG5cbiAgICBjYXNlIG1hcFRhZzpcbiAgICAgIHZhciBjb252ZXJ0ID0gbWFwVG9BcnJheTtcblxuICAgIGNhc2Ugc2V0VGFnOlxuICAgICAgdmFyIGlzUGFydGlhbCA9IGJpdG1hc2sgJiBQQVJUSUFMX0NPTVBBUkVfRkxBRztcbiAgICAgIGNvbnZlcnQgfHwgKGNvbnZlcnQgPSBzZXRUb0FycmF5KTtcblxuICAgICAgaWYgKG9iamVjdC5zaXplICE9IG90aGVyLnNpemUgJiYgIWlzUGFydGlhbCkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICAvLyBBc3N1bWUgY3ljbGljIHZhbHVlcyBhcmUgZXF1YWwuXG4gICAgICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChvYmplY3QpO1xuICAgICAgaWYgKHN0YWNrZWQpIHtcbiAgICAgICAgcmV0dXJuIHN0YWNrZWQgPT0gb3RoZXI7XG4gICAgICB9XG4gICAgICBiaXRtYXNrIHw9IFVOT1JERVJFRF9DT01QQVJFX0ZMQUc7XG4gICAgICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG5cbiAgICAgIC8vIFJlY3Vyc2l2ZWx5IGNvbXBhcmUgb2JqZWN0cyAoc3VzY2VwdGlibGUgdG8gY2FsbCBzdGFjayBsaW1pdHMpLlxuICAgICAgcmV0dXJuIGVxdWFsQXJyYXlzKGNvbnZlcnQob2JqZWN0KSwgY29udmVydChvdGhlciksIGVxdWFsRnVuYywgY3VzdG9taXplciwgYml0bWFzaywgc3RhY2spO1xuXG4gICAgY2FzZSBzeW1ib2xUYWc6XG4gICAgICBpZiAoc3ltYm9sVmFsdWVPZikge1xuICAgICAgICByZXR1cm4gc3ltYm9sVmFsdWVPZi5jYWxsKG9iamVjdCkgPT0gc3ltYm9sVmFsdWVPZi5jYWxsKG90aGVyKTtcbiAgICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXF1YWxCeVRhZztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZXF1YWxCeVRhZy5qc1xuICoqIG1vZHVsZSBpZCA9IDExMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VIYXMgPSByZXF1aXJlKCcuL19iYXNlSGFzJyksXG4gICAga2V5cyA9IHJlcXVpcmUoJy4va2V5cycpO1xuXG4vKiogVXNlZCB0byBjb21wb3NlIGJpdG1hc2tzIGZvciBjb21wYXJpc29uIHN0eWxlcy4gKi9cbnZhciBQQVJUSUFMX0NPTVBBUkVfRkxBRyA9IDI7XG5cbi8qKlxuICogQSBzcGVjaWFsaXplZCB2ZXJzaW9uIG9mIGBiYXNlSXNFcXVhbERlZXBgIGZvciBvYmplY3RzIHdpdGggc3VwcG9ydCBmb3JcbiAqIHBhcnRpYWwgZGVlcCBjb21wYXJpc29ucy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIGNvbXBhcmUuXG4gKiBAcGFyYW0ge09iamVjdH0gb3RoZXIgVGhlIG90aGVyIG9iamVjdCB0byBjb21wYXJlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZXF1YWxGdW5jIFRoZSBmdW5jdGlvbiB0byBkZXRlcm1pbmUgZXF1aXZhbGVudHMgb2YgdmFsdWVzLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gY3VzdG9taXplciBUaGUgZnVuY3Rpb24gdG8gY3VzdG9taXplIGNvbXBhcmlzb25zLlxuICogQHBhcmFtIHtudW1iZXJ9IGJpdG1hc2sgVGhlIGJpdG1hc2sgb2YgY29tcGFyaXNvbiBmbGFncy4gU2VlIGBiYXNlSXNFcXVhbGBcbiAqICBmb3IgbW9yZSBkZXRhaWxzLlxuICogQHBhcmFtIHtPYmplY3R9IHN0YWNrIFRyYWNrcyB0cmF2ZXJzZWQgYG9iamVjdGAgYW5kIGBvdGhlcmAgb2JqZWN0cy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgb2JqZWN0cyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBlcXVhbE9iamVjdHMob2JqZWN0LCBvdGhlciwgZXF1YWxGdW5jLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykge1xuICB2YXIgaXNQYXJ0aWFsID0gYml0bWFzayAmIFBBUlRJQUxfQ09NUEFSRV9GTEFHLFxuICAgICAgb2JqUHJvcHMgPSBrZXlzKG9iamVjdCksXG4gICAgICBvYmpMZW5ndGggPSBvYmpQcm9wcy5sZW5ndGgsXG4gICAgICBvdGhQcm9wcyA9IGtleXMob3RoZXIpLFxuICAgICAgb3RoTGVuZ3RoID0gb3RoUHJvcHMubGVuZ3RoO1xuXG4gIGlmIChvYmpMZW5ndGggIT0gb3RoTGVuZ3RoICYmICFpc1BhcnRpYWwpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGluZGV4ID0gb2JqTGVuZ3RoO1xuICB3aGlsZSAoaW5kZXgtLSkge1xuICAgIHZhciBrZXkgPSBvYmpQcm9wc1tpbmRleF07XG4gICAgaWYgKCEoaXNQYXJ0aWFsID8ga2V5IGluIG90aGVyIDogYmFzZUhhcyhvdGhlciwga2V5KSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cbiAgLy8gQXNzdW1lIGN5Y2xpYyB2YWx1ZXMgYXJlIGVxdWFsLlxuICB2YXIgc3RhY2tlZCA9IHN0YWNrLmdldChvYmplY3QpO1xuICBpZiAoc3RhY2tlZCkge1xuICAgIHJldHVybiBzdGFja2VkID09IG90aGVyO1xuICB9XG4gIHZhciByZXN1bHQgPSB0cnVlO1xuICBzdGFjay5zZXQob2JqZWN0LCBvdGhlcik7XG5cbiAgdmFyIHNraXBDdG9yID0gaXNQYXJ0aWFsO1xuICB3aGlsZSAoKytpbmRleCA8IG9iakxlbmd0aCkge1xuICAgIGtleSA9IG9ialByb3BzW2luZGV4XTtcbiAgICB2YXIgb2JqVmFsdWUgPSBvYmplY3Rba2V5XSxcbiAgICAgICAgb3RoVmFsdWUgPSBvdGhlcltrZXldO1xuXG4gICAgaWYgKGN1c3RvbWl6ZXIpIHtcbiAgICAgIHZhciBjb21wYXJlZCA9IGlzUGFydGlhbFxuICAgICAgICA/IGN1c3RvbWl6ZXIob3RoVmFsdWUsIG9ialZhbHVlLCBrZXksIG90aGVyLCBvYmplY3QsIHN0YWNrKVxuICAgICAgICA6IGN1c3RvbWl6ZXIob2JqVmFsdWUsIG90aFZhbHVlLCBrZXksIG9iamVjdCwgb3RoZXIsIHN0YWNrKTtcbiAgICB9XG4gICAgLy8gUmVjdXJzaXZlbHkgY29tcGFyZSBvYmplY3RzIChzdXNjZXB0aWJsZSB0byBjYWxsIHN0YWNrIGxpbWl0cykuXG4gICAgaWYgKCEoY29tcGFyZWQgPT09IHVuZGVmaW5lZFxuICAgICAgICAgID8gKG9ialZhbHVlID09PSBvdGhWYWx1ZSB8fCBlcXVhbEZ1bmMob2JqVmFsdWUsIG90aFZhbHVlLCBjdXN0b21pemVyLCBiaXRtYXNrLCBzdGFjaykpXG4gICAgICAgICAgOiBjb21wYXJlZFxuICAgICAgICApKSB7XG4gICAgICByZXN1bHQgPSBmYWxzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBza2lwQ3RvciB8fCAoc2tpcEN0b3IgPSBrZXkgPT0gJ2NvbnN0cnVjdG9yJyk7XG4gIH1cbiAgaWYgKHJlc3VsdCAmJiAhc2tpcEN0b3IpIHtcbiAgICB2YXIgb2JqQ3RvciA9IG9iamVjdC5jb25zdHJ1Y3RvcixcbiAgICAgICAgb3RoQ3RvciA9IG90aGVyLmNvbnN0cnVjdG9yO1xuXG4gICAgLy8gTm9uIGBPYmplY3RgIG9iamVjdCBpbnN0YW5jZXMgd2l0aCBkaWZmZXJlbnQgY29uc3RydWN0b3JzIGFyZSBub3QgZXF1YWwuXG4gICAgaWYgKG9iakN0b3IgIT0gb3RoQ3RvciAmJlxuICAgICAgICAoJ2NvbnN0cnVjdG9yJyBpbiBvYmplY3QgJiYgJ2NvbnN0cnVjdG9yJyBpbiBvdGhlcikgJiZcbiAgICAgICAgISh0eXBlb2Ygb2JqQ3RvciA9PSAnZnVuY3Rpb24nICYmIG9iakN0b3IgaW5zdGFuY2VvZiBvYmpDdG9yICYmXG4gICAgICAgICAgdHlwZW9mIG90aEN0b3IgPT0gJ2Z1bmN0aW9uJyAmJiBvdGhDdG9yIGluc3RhbmNlb2Ygb3RoQ3RvcikpIHtcbiAgICAgIHJlc3VsdCA9IGZhbHNlO1xuICAgIH1cbiAgfVxuICBzdGFja1snZGVsZXRlJ10ob2JqZWN0KTtcbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBlcXVhbE9iamVjdHM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2VxdWFsT2JqZWN0cy5qc1xuICoqIG1vZHVsZSBpZCA9IDExMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VQcm9wZXJ0eSA9IHJlcXVpcmUoJy4vX2Jhc2VQcm9wZXJ0eScpO1xuXG4vKipcbiAqIEdldHMgdGhlIFwibGVuZ3RoXCIgcHJvcGVydHkgdmFsdWUgb2YgYG9iamVjdGAuXG4gKlxuICogKipOb3RlOioqIFRoaXMgZnVuY3Rpb24gaXMgdXNlZCB0byBhdm9pZCBhXG4gKiBbSklUIGJ1Z10oaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTE0Mjc5MikgdGhhdCBhZmZlY3RzXG4gKiBTYWZhcmkgb24gYXQgbGVhc3QgaU9TIDguMS04LjMgQVJNNjQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBcImxlbmd0aFwiIHZhbHVlLlxuICovXG52YXIgZ2V0TGVuZ3RoID0gYmFzZVByb3BlcnR5KCdsZW5ndGgnKTtcblxubW9kdWxlLmV4cG9ydHMgPSBnZXRMZW5ndGg7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldExlbmd0aC5qc1xuICoqIG1vZHVsZSBpZCA9IDExMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGlzU3RyaWN0Q29tcGFyYWJsZSA9IHJlcXVpcmUoJy4vX2lzU3RyaWN0Q29tcGFyYWJsZScpLFxuICAgIGtleXMgPSByZXF1aXJlKCcuL2tleXMnKTtcblxuLyoqXG4gKiBHZXRzIHRoZSBwcm9wZXJ0eSBuYW1lcywgdmFsdWVzLCBhbmQgY29tcGFyZSBmbGFncyBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG9iamVjdCBUaGUgb2JqZWN0IHRvIHF1ZXJ5LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSBtYXRjaCBkYXRhIG9mIGBvYmplY3RgLlxuICovXG5mdW5jdGlvbiBnZXRNYXRjaERhdGEob2JqZWN0KSB7XG4gIHZhciByZXN1bHQgPSBrZXlzKG9iamVjdCksXG4gICAgICBsZW5ndGggPSByZXN1bHQubGVuZ3RoO1xuXG4gIHdoaWxlIChsZW5ndGgtLSkge1xuICAgIHZhciBrZXkgPSByZXN1bHRbbGVuZ3RoXSxcbiAgICAgICAgdmFsdWUgPSBvYmplY3Rba2V5XTtcblxuICAgIHJlc3VsdFtsZW5ndGhdID0gW2tleSwgdmFsdWUsIGlzU3RyaWN0Q29tcGFyYWJsZSh2YWx1ZSldO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0TWF0Y2hEYXRhO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19nZXRNYXRjaERhdGEuanNcbiAqKiBtb2R1bGUgaWQgPSAxMTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVHZXRQcm90b3R5cGUgPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cbi8qKlxuICogR2V0cyB0aGUgYFtbUHJvdG90eXBlXV1gIG9mIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHF1ZXJ5LlxuICogQHJldHVybnMge251bGx8T2JqZWN0fSBSZXR1cm5zIHRoZSBgW1tQcm90b3R5cGVdXWAuXG4gKi9cbmZ1bmN0aW9uIGdldFByb3RvdHlwZSh2YWx1ZSkge1xuICByZXR1cm4gbmF0aXZlR2V0UHJvdG90eXBlKE9iamVjdCh2YWx1ZSkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGdldFByb3RvdHlwZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fZ2V0UHJvdG90eXBlLmpzXG4gKiogbW9kdWxlIGlkID0gMTE0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgRGF0YVZpZXcgPSByZXF1aXJlKCcuL19EYXRhVmlldycpLFxuICAgIE1hcCA9IHJlcXVpcmUoJy4vX01hcCcpLFxuICAgIFByb21pc2UgPSByZXF1aXJlKCcuL19Qcm9taXNlJyksXG4gICAgU2V0ID0gcmVxdWlyZSgnLi9fU2V0JyksXG4gICAgV2Vha01hcCA9IHJlcXVpcmUoJy4vX1dlYWtNYXAnKSxcbiAgICB0b1NvdXJjZSA9IHJlcXVpcmUoJy4vX3RvU291cmNlJyk7XG5cbi8qKiBgT2JqZWN0I3RvU3RyaW5nYCByZXN1bHQgcmVmZXJlbmNlcy4gKi9cbnZhciBtYXBUYWcgPSAnW29iamVjdCBNYXBdJyxcbiAgICBvYmplY3RUYWcgPSAnW29iamVjdCBPYmplY3RdJyxcbiAgICBwcm9taXNlVGFnID0gJ1tvYmplY3QgUHJvbWlzZV0nLFxuICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cbnZhciBkYXRhVmlld1RhZyA9ICdbb2JqZWN0IERhdGFWaWV3XSc7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKlxuICogVXNlZCB0byByZXNvbHZlIHRoZVxuICogW2B0b1N0cmluZ1RhZ2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLW9iamVjdC5wcm90b3R5cGUudG9zdHJpbmcpXG4gKiBvZiB2YWx1ZXMuXG4gKi9cbnZhciBvYmplY3RUb1N0cmluZyA9IG9iamVjdFByb3RvLnRvU3RyaW5nO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgbWFwcywgc2V0cywgYW5kIHdlYWttYXBzLiAqL1xudmFyIGRhdGFWaWV3Q3RvclN0cmluZyA9IHRvU291cmNlKERhdGFWaWV3KSxcbiAgICBtYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoTWFwKSxcbiAgICBwcm9taXNlQ3RvclN0cmluZyA9IHRvU291cmNlKFByb21pc2UpLFxuICAgIHNldEN0b3JTdHJpbmcgPSB0b1NvdXJjZShTZXQpLFxuICAgIHdlYWtNYXBDdG9yU3RyaW5nID0gdG9Tb3VyY2UoV2Vha01hcCk7XG5cbi8qKlxuICogR2V0cyB0aGUgYHRvU3RyaW5nVGFnYCBvZiBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBxdWVyeS5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIGB0b1N0cmluZ1RhZ2AuXG4gKi9cbmZ1bmN0aW9uIGdldFRhZyh2YWx1ZSkge1xuICByZXR1cm4gb2JqZWN0VG9TdHJpbmcuY2FsbCh2YWx1ZSk7XG59XG5cbi8vIEZhbGxiYWNrIGZvciBkYXRhIHZpZXdzLCBtYXBzLCBzZXRzLCBhbmQgd2VhayBtYXBzIGluIElFIDExLFxuLy8gZm9yIGRhdGEgdmlld3MgaW4gRWRnZSwgYW5kIHByb21pc2VzIGluIE5vZGUuanMuXG5pZiAoKERhdGFWaWV3ICYmIGdldFRhZyhuZXcgRGF0YVZpZXcobmV3IEFycmF5QnVmZmVyKDEpKSkgIT0gZGF0YVZpZXdUYWcpIHx8XG4gICAgKE1hcCAmJiBnZXRUYWcobmV3IE1hcCkgIT0gbWFwVGFnKSB8fFxuICAgIChQcm9taXNlICYmIGdldFRhZyhQcm9taXNlLnJlc29sdmUoKSkgIT0gcHJvbWlzZVRhZykgfHxcbiAgICAoU2V0ICYmIGdldFRhZyhuZXcgU2V0KSAhPSBzZXRUYWcpIHx8XG4gICAgKFdlYWtNYXAgJiYgZ2V0VGFnKG5ldyBXZWFrTWFwKSAhPSB3ZWFrTWFwVGFnKSkge1xuICBnZXRUYWcgPSBmdW5jdGlvbih2YWx1ZSkge1xuICAgIHZhciByZXN1bHQgPSBvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKSxcbiAgICAgICAgQ3RvciA9IHJlc3VsdCA9PSBvYmplY3RUYWcgPyB2YWx1ZS5jb25zdHJ1Y3RvciA6IHVuZGVmaW5lZCxcbiAgICAgICAgY3RvclN0cmluZyA9IEN0b3IgPyB0b1NvdXJjZShDdG9yKSA6IHVuZGVmaW5lZDtcblxuICAgIGlmIChjdG9yU3RyaW5nKSB7XG4gICAgICBzd2l0Y2ggKGN0b3JTdHJpbmcpIHtcbiAgICAgICAgY2FzZSBkYXRhVmlld0N0b3JTdHJpbmc6IHJldHVybiBkYXRhVmlld1RhZztcbiAgICAgICAgY2FzZSBtYXBDdG9yU3RyaW5nOiByZXR1cm4gbWFwVGFnO1xuICAgICAgICBjYXNlIHByb21pc2VDdG9yU3RyaW5nOiByZXR1cm4gcHJvbWlzZVRhZztcbiAgICAgICAgY2FzZSBzZXRDdG9yU3RyaW5nOiByZXR1cm4gc2V0VGFnO1xuICAgICAgICBjYXNlIHdlYWtNYXBDdG9yU3RyaW5nOiByZXR1cm4gd2Vha01hcFRhZztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXRUYWc7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldFRhZy5qc1xuICoqIG1vZHVsZSBpZCA9IDExNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBHZXRzIHRoZSB2YWx1ZSBhdCBga2V5YCBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvYmplY3RdIFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIHRoZSBwcm9wZXJ0eSB2YWx1ZS5cbiAqL1xuZnVuY3Rpb24gZ2V0VmFsdWUob2JqZWN0LCBrZXkpIHtcbiAgcmV0dXJuIG9iamVjdCA9PSBudWxsID8gdW5kZWZpbmVkIDogb2JqZWN0W2tleV07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0VmFsdWU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2dldFZhbHVlLmpzXG4gKiogbW9kdWxlIGlkID0gMTE2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgY2FzdFBhdGggPSByZXF1aXJlKCcuL19jYXN0UGF0aCcpLFxuICAgIGlzQXJndW1lbnRzID0gcmVxdWlyZSgnLi9pc0FyZ3VtZW50cycpLFxuICAgIGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKSxcbiAgICBpc0luZGV4ID0gcmVxdWlyZSgnLi9faXNJbmRleCcpLFxuICAgIGlzS2V5ID0gcmVxdWlyZSgnLi9faXNLZXknKSxcbiAgICBpc0xlbmd0aCA9IHJlcXVpcmUoJy4vaXNMZW5ndGgnKSxcbiAgICBpc1N0cmluZyA9IHJlcXVpcmUoJy4vaXNTdHJpbmcnKSxcbiAgICB0b0tleSA9IHJlcXVpcmUoJy4vX3RvS2V5Jyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGBwYXRoYCBleGlzdHMgb24gYG9iamVjdGAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIHRvIGNoZWNrLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFzRnVuYyBUaGUgZnVuY3Rpb24gdG8gY2hlY2sgcHJvcGVydGllcy5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgcGF0aGAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGhhc1BhdGgob2JqZWN0LCBwYXRoLCBoYXNGdW5jKSB7XG4gIHBhdGggPSBpc0tleShwYXRoLCBvYmplY3QpID8gW3BhdGhdIDogY2FzdFBhdGgocGF0aCk7XG5cbiAgdmFyIHJlc3VsdCxcbiAgICAgIGluZGV4ID0gLTEsXG4gICAgICBsZW5ndGggPSBwYXRoLmxlbmd0aDtcblxuICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgIHZhciBrZXkgPSB0b0tleShwYXRoW2luZGV4XSk7XG4gICAgaWYgKCEocmVzdWx0ID0gb2JqZWN0ICE9IG51bGwgJiYgaGFzRnVuYyhvYmplY3QsIGtleSkpKSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gICAgb2JqZWN0ID0gb2JqZWN0W2tleV07XG4gIH1cbiAgaWYgKHJlc3VsdCkge1xuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cbiAgdmFyIGxlbmd0aCA9IG9iamVjdCA/IG9iamVjdC5sZW5ndGggOiAwO1xuICByZXR1cm4gISFsZW5ndGggJiYgaXNMZW5ndGgobGVuZ3RoKSAmJiBpc0luZGV4KGtleSwgbGVuZ3RoKSAmJlxuICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNTdHJpbmcob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoYXNQYXRoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19oYXNQYXRoLmpzXG4gKiogbW9kdWxlIGlkID0gMTE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbmF0aXZlQ3JlYXRlID0gcmVxdWlyZSgnLi9fbmF0aXZlQ3JlYXRlJyk7XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgaGFzaC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKi9cbmZ1bmN0aW9uIGhhc2hDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IG5hdGl2ZUNyZWF0ZSA/IG5hdGl2ZUNyZWF0ZShudWxsKSA6IHt9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc2hDbGVhcjtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faGFzaENsZWFyLmpzXG4gKiogbW9kdWxlIGlkID0gMTE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBoYXNoLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge09iamVjdH0gaGFzaCBUaGUgaGFzaCB0byBtb2RpZnkuXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHJlbW92ZS5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgZW50cnkgd2FzIHJlbW92ZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaGFzaERlbGV0ZShrZXkpIHtcbiAgcmV0dXJuIHRoaXMuaGFzKGtleSkgJiYgZGVsZXRlIHRoaXMuX19kYXRhX19ba2V5XTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoYXNoRGVsZXRlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19oYXNoRGVsZXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMTE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbmF0aXZlQ3JlYXRlID0gcmVxdWlyZSgnLi9fbmF0aXZlQ3JlYXRlJyk7XG5cbi8qKiBVc2VkIHRvIHN0YW5kLWluIGZvciBgdW5kZWZpbmVkYCBoYXNoIHZhbHVlcy4gKi9cbnZhciBIQVNIX1VOREVGSU5FRCA9ICdfX2xvZGFzaF9oYXNoX3VuZGVmaW5lZF9fJztcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqIFVzZWQgdG8gY2hlY2sgb2JqZWN0cyBmb3Igb3duIHByb3BlcnRpZXMuICovXG52YXIgaGFzT3duUHJvcGVydHkgPSBvYmplY3RQcm90by5oYXNPd25Qcm9wZXJ0eTtcblxuLyoqXG4gKiBHZXRzIHRoZSBoYXNoIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgSGFzaFxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBnZXQuXG4gKiBAcmV0dXJucyB7Kn0gUmV0dXJucyB0aGUgZW50cnkgdmFsdWUuXG4gKi9cbmZ1bmN0aW9uIGhhc2hHZXQoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXztcbiAgaWYgKG5hdGl2ZUNyZWF0ZSkge1xuICAgIHZhciByZXN1bHQgPSBkYXRhW2tleV07XG4gICAgcmV0dXJuIHJlc3VsdCA9PT0gSEFTSF9VTkRFRklORUQgPyB1bmRlZmluZWQgOiByZXN1bHQ7XG4gIH1cbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwoZGF0YSwga2V5KSA/IGRhdGFba2V5XSA6IHVuZGVmaW5lZDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoYXNoR2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19oYXNoR2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbmF0aXZlQ3JlYXRlID0gcmVxdWlyZSgnLi9fbmF0aXZlQ3JlYXRlJyk7XG5cbi8qKiBVc2VkIGZvciBidWlsdC1pbiBtZXRob2QgcmVmZXJlbmNlcy4gKi9cbnZhciBvYmplY3RQcm90byA9IE9iamVjdC5wcm90b3R5cGU7XG5cbi8qKiBVc2VkIHRvIGNoZWNrIG9iamVjdHMgZm9yIG93biBwcm9wZXJ0aWVzLiAqL1xudmFyIGhhc093blByb3BlcnR5ID0gb2JqZWN0UHJvdG8uaGFzT3duUHJvcGVydHk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgaGFzaCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaGFzaEhhcyhrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fO1xuICByZXR1cm4gbmF0aXZlQ3JlYXRlID8gZGF0YVtrZXldICE9PSB1bmRlZmluZWQgOiBoYXNPd25Qcm9wZXJ0eS5jYWxsKGRhdGEsIGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaGFzaEhhcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faGFzaEhhcy5qc1xuICoqIG1vZHVsZSBpZCA9IDEyMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIG5hdGl2ZUNyZWF0ZSA9IHJlcXVpcmUoJy4vX25hdGl2ZUNyZWF0ZScpO1xuXG4vKiogVXNlZCB0byBzdGFuZC1pbiBmb3IgYHVuZGVmaW5lZGAgaGFzaCB2YWx1ZXMuICovXG52YXIgSEFTSF9VTkRFRklORUQgPSAnX19sb2Rhc2hfaGFzaF91bmRlZmluZWRfXyc7XG5cbi8qKlxuICogU2V0cyB0aGUgaGFzaCBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBIYXNoXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGhhc2ggaW5zdGFuY2UuXG4gKi9cbmZ1bmN0aW9uIGhhc2hTZXQoa2V5LCB2YWx1ZSkge1xuICB2YXIgZGF0YSA9IHRoaXMuX19kYXRhX187XG4gIGRhdGFba2V5XSA9IChuYXRpdmVDcmVhdGUgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCkgPyBIQVNIX1VOREVGSU5FRCA6IHZhbHVlO1xuICByZXR1cm4gdGhpcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBoYXNoU2V0O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19oYXNoU2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTIyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZVRpbWVzID0gcmVxdWlyZSgnLi9fYmFzZVRpbWVzJyksXG4gICAgaXNBcmd1bWVudHMgPSByZXF1aXJlKCcuL2lzQXJndW1lbnRzJyksXG4gICAgaXNBcnJheSA9IHJlcXVpcmUoJy4vaXNBcnJheScpLFxuICAgIGlzTGVuZ3RoID0gcmVxdWlyZSgnLi9pc0xlbmd0aCcpLFxuICAgIGlzU3RyaW5nID0gcmVxdWlyZSgnLi9pc1N0cmluZycpO1xuXG4vKipcbiAqIENyZWF0ZXMgYW4gYXJyYXkgb2YgaW5kZXgga2V5cyBmb3IgYG9iamVjdGAgdmFsdWVzIG9mIGFycmF5cyxcbiAqIGBhcmd1bWVudHNgIG9iamVjdHMsIGFuZCBzdHJpbmdzLCBvdGhlcndpc2UgYG51bGxgIGlzIHJldHVybmVkLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcmV0dXJucyB7QXJyYXl8bnVsbH0gUmV0dXJucyBpbmRleCBrZXlzLCBlbHNlIGBudWxsYC5cbiAqL1xuZnVuY3Rpb24gaW5kZXhLZXlzKG9iamVjdCkge1xuICB2YXIgbGVuZ3RoID0gb2JqZWN0ID8gb2JqZWN0Lmxlbmd0aCA6IHVuZGVmaW5lZDtcbiAgaWYgKGlzTGVuZ3RoKGxlbmd0aCkgJiZcbiAgICAgIChpc0FycmF5KG9iamVjdCkgfHwgaXNTdHJpbmcob2JqZWN0KSB8fCBpc0FyZ3VtZW50cyhvYmplY3QpKSkge1xuICAgIHJldHVybiBiYXNlVGltZXMobGVuZ3RoLCBTdHJpbmcpO1xuICB9XG4gIHJldHVybiBudWxsO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGluZGV4S2V5cztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9faW5kZXhLZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gMTIzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIHN1aXRhYmxlIGZvciB1c2UgYXMgdW5pcXVlIG9iamVjdCBrZXkuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGB2YWx1ZWAgaXMgc3VpdGFibGUsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNLZXlhYmxlKHZhbHVlKSB7XG4gIHZhciB0eXBlID0gdHlwZW9mIHZhbHVlO1xuICByZXR1cm4gKHR5cGUgPT0gJ3N0cmluZycgfHwgdHlwZSA9PSAnbnVtYmVyJyB8fCB0eXBlID09ICdzeW1ib2wnIHx8IHR5cGUgPT0gJ2Jvb2xlYW4nKVxuICAgID8gKHZhbHVlICE9PSAnX19wcm90b19fJylcbiAgICA6ICh2YWx1ZSA9PT0gbnVsbCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNLZXlhYmxlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc0tleWFibGUuanNcbiAqKiBtb2R1bGUgaWQgPSAxMjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBjb3JlSnNEYXRhID0gcmVxdWlyZSgnLi9fY29yZUpzRGF0YScpO1xuXG4vKiogVXNlZCB0byBkZXRlY3QgbWV0aG9kcyBtYXNxdWVyYWRpbmcgYXMgbmF0aXZlLiAqL1xudmFyIG1hc2tTcmNLZXkgPSAoZnVuY3Rpb24oKSB7XG4gIHZhciB1aWQgPSAvW14uXSskLy5leGVjKGNvcmVKc0RhdGEgJiYgY29yZUpzRGF0YS5rZXlzICYmIGNvcmVKc0RhdGEua2V5cy5JRV9QUk9UTyB8fCAnJyk7XG4gIHJldHVybiB1aWQgPyAoJ1N5bWJvbChzcmMpXzEuJyArIHVpZCkgOiAnJztcbn0oKSk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGBmdW5jYCBoYXMgaXRzIHNvdXJjZSBtYXNrZWQuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGBmdW5jYCBpcyBtYXNrZWQsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gaXNNYXNrZWQoZnVuYykge1xuICByZXR1cm4gISFtYXNrU3JjS2V5ICYmIChtYXNrU3JjS2V5IGluIGZ1bmMpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzTWFza2VkO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc01hc2tlZC5qc1xuICoqIG1vZHVsZSBpZCA9IDEyNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHZhbHVlYCBpcyBsaWtlbHkgYSBwcm90b3R5cGUgb2JqZWN0LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGEgcHJvdG90eXBlLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGlzUHJvdG90eXBlKHZhbHVlKSB7XG4gIHZhciBDdG9yID0gdmFsdWUgJiYgdmFsdWUuY29uc3RydWN0b3IsXG4gICAgICBwcm90byA9ICh0eXBlb2YgQ3RvciA9PSAnZnVuY3Rpb24nICYmIEN0b3IucHJvdG90eXBlKSB8fCBvYmplY3RQcm90bztcblxuICByZXR1cm4gdmFsdWUgPT09IHByb3RvO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGlzUHJvdG90eXBlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19pc1Byb3RvdHlwZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBsaXN0IGNhY2hlLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVDbGVhcigpIHtcbiAgdGhpcy5fX2RhdGFfXyA9IFtdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUNsZWFyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19saXN0Q2FjaGVDbGVhci5qc1xuICoqIG1vZHVsZSBpZCA9IDEyN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGFzc29jSW5kZXhPZiA9IHJlcXVpcmUoJy4vX2Fzc29jSW5kZXhPZicpO1xuXG4vKiogVXNlZCBmb3IgYnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMuICovXG52YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcblxuLyoqIEJ1aWx0LWluIHZhbHVlIHJlZmVyZW5jZXMuICovXG52YXIgc3BsaWNlID0gYXJyYXlQcm90by5zcGxpY2U7XG5cbi8qKlxuICogUmVtb3ZlcyBga2V5YCBhbmQgaXRzIHZhbHVlIGZyb20gdGhlIGxpc3QgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGRlbGV0ZVxuICogQG1lbWJlck9mIExpc3RDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIGxpc3RDYWNoZURlbGV0ZShrZXkpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciBsYXN0SW5kZXggPSBkYXRhLmxlbmd0aCAtIDE7XG4gIGlmIChpbmRleCA9PSBsYXN0SW5kZXgpIHtcbiAgICBkYXRhLnBvcCgpO1xuICB9IGVsc2Uge1xuICAgIHNwbGljZS5jYWxsKGRhdGEsIGluZGV4LCAxKTtcbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVEZWxldGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2xpc3RDYWNoZURlbGV0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEyOFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGFzc29jSW5kZXhPZiA9IHJlcXVpcmUoJy4vX2Fzc29jSW5kZXhPZicpO1xuXG4vKipcbiAqIEdldHMgdGhlIGxpc3QgY2FjaGUgdmFsdWUgZm9yIGBrZXlgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBnZXRcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVHZXQoa2V5KSB7XG4gIHZhciBkYXRhID0gdGhpcy5fX2RhdGFfXyxcbiAgICAgIGluZGV4ID0gYXNzb2NJbmRleE9mKGRhdGEsIGtleSk7XG5cbiAgcmV0dXJuIGluZGV4IDwgMCA/IHVuZGVmaW5lZCA6IGRhdGFbaW5kZXhdWzFdO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUdldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbGlzdENhY2hlR2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTI5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYXNzb2NJbmRleE9mID0gcmVxdWlyZSgnLi9fYXNzb2NJbmRleE9mJyk7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGEgbGlzdCBjYWNoZSB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgZW50cnkgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYW4gZW50cnkgZm9yIGBrZXlgIGV4aXN0cywgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBsaXN0Q2FjaGVIYXMoa2V5KSB7XG4gIHJldHVybiBhc3NvY0luZGV4T2YodGhpcy5fX2RhdGFfXywga2V5KSA+IC0xO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGxpc3RDYWNoZUhhcztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbGlzdENhY2hlSGFzLmpzXG4gKiogbW9kdWxlIGlkID0gMTMwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYXNzb2NJbmRleE9mID0gcmVxdWlyZSgnLi9fYXNzb2NJbmRleE9mJyk7XG5cbi8qKlxuICogU2V0cyB0aGUgbGlzdCBjYWNoZSBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBMaXN0Q2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gc2V0LlxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gc2V0LlxuICogQHJldHVybnMge09iamVjdH0gUmV0dXJucyB0aGUgbGlzdCBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gbGlzdENhY2hlU2V0KGtleSwgdmFsdWUpIHtcbiAgdmFyIGRhdGEgPSB0aGlzLl9fZGF0YV9fLFxuICAgICAgaW5kZXggPSBhc3NvY0luZGV4T2YoZGF0YSwga2V5KTtcblxuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgZGF0YS5wdXNoKFtrZXksIHZhbHVlXSk7XG4gIH0gZWxzZSB7XG4gICAgZGF0YVtpbmRleF1bMV0gPSB2YWx1ZTtcbiAgfVxuICByZXR1cm4gdGhpcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBsaXN0Q2FjaGVTZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX2xpc3RDYWNoZVNldC5qc1xuICoqIG1vZHVsZSBpZCA9IDEzMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIEhhc2ggPSByZXF1aXJlKCcuL19IYXNoJyksXG4gICAgTGlzdENhY2hlID0gcmVxdWlyZSgnLi9fTGlzdENhY2hlJyksXG4gICAgTWFwID0gcmVxdWlyZSgnLi9fTWFwJyk7XG5cbi8qKlxuICogUmVtb3ZlcyBhbGwga2V5LXZhbHVlIGVudHJpZXMgZnJvbSB0aGUgbWFwLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBjbGVhclxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlQ2xlYXIoKSB7XG4gIHRoaXMuX19kYXRhX18gPSB7XG4gICAgJ2hhc2gnOiBuZXcgSGFzaCxcbiAgICAnbWFwJzogbmV3IChNYXAgfHwgTGlzdENhY2hlKSxcbiAgICAnc3RyaW5nJzogbmV3IEhhc2hcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUNsZWFyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXBDYWNoZUNsZWFyLmpzXG4gKiogbW9kdWxlIGlkID0gMTMyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgZ2V0TWFwRGF0YSA9IHJlcXVpcmUoJy4vX2dldE1hcERhdGEnKTtcblxuLyoqXG4gKiBSZW1vdmVzIGBrZXlgIGFuZCBpdHMgdmFsdWUgZnJvbSB0aGUgbWFwLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBkZWxldGVcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byByZW1vdmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGVudHJ5IHdhcyByZW1vdmVkLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlRGVsZXRlKGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpWydkZWxldGUnXShrZXkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlRGVsZXRlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXBDYWNoZURlbGV0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDEzM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE1hcERhdGEgPSByZXF1aXJlKCcuL19nZXRNYXBEYXRhJyk7XG5cbi8qKlxuICogR2V0cyB0aGUgbWFwIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgTWFwQ2FjaGVcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBtYXBDYWNoZUdldChrZXkpIHtcbiAgcmV0dXJuIGdldE1hcERhdGEodGhpcywga2V5KS5nZXQoa2V5KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZUdldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbWFwQ2FjaGVHZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnZXRNYXBEYXRhID0gcmVxdWlyZSgnLi9fZ2V0TWFwRGF0YScpO1xuXG4vKipcbiAqIENoZWNrcyBpZiBhIG1hcCB2YWx1ZSBmb3IgYGtleWAgZXhpc3RzLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBoYXNcbiAqIEBtZW1iZXJPZiBNYXBDYWNoZVxuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSBlbnRyeSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBhbiBlbnRyeSBmb3IgYGtleWAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIG1hcENhY2hlSGFzKGtleSkge1xuICByZXR1cm4gZ2V0TWFwRGF0YSh0aGlzLCBrZXkpLmhhcyhrZXkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG1hcENhY2hlSGFzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19tYXBDYWNoZUhhcy5qc1xuICoqIG1vZHVsZSBpZCA9IDEzNVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGdldE1hcERhdGEgPSByZXF1aXJlKCcuL19nZXRNYXBEYXRhJyk7XG5cbi8qKlxuICogU2V0cyB0aGUgbWFwIGBrZXlgIHRvIGB2YWx1ZWAuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIHNldFxuICogQG1lbWJlck9mIE1hcENhY2hlXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIHZhbHVlIHRvIHNldC5cbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNldC5cbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIG1hcCBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gbWFwQ2FjaGVTZXQoa2V5LCB2YWx1ZSkge1xuICBnZXRNYXBEYXRhKHRoaXMsIGtleSkuc2V0KGtleSwgdmFsdWUpO1xuICByZXR1cm4gdGhpcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBtYXBDYWNoZVNldDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbWFwQ2FjaGVTZXQuanNcbiAqKiBtb2R1bGUgaWQgPSAxMzZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8qKlxuICogQ29udmVydHMgYG1hcGAgdG8gaXRzIGtleS12YWx1ZSBwYWlycy5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQHBhcmFtIHtPYmplY3R9IG1hcCBUaGUgbWFwIHRvIGNvbnZlcnQuXG4gKiBAcmV0dXJucyB7QXJyYXl9IFJldHVybnMgdGhlIGtleS12YWx1ZSBwYWlycy5cbiAqL1xuZnVuY3Rpb24gbWFwVG9BcnJheShtYXApIHtcbiAgdmFyIGluZGV4ID0gLTEsXG4gICAgICByZXN1bHQgPSBBcnJheShtYXAuc2l6ZSk7XG5cbiAgbWFwLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIGtleSkge1xuICAgIHJlc3VsdFsrK2luZGV4XSA9IFtrZXksIHZhbHVlXTtcbiAgfSk7XG4gIHJldHVybiByZXN1bHQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gbWFwVG9BcnJheTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9fbWFwVG9BcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDEzN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqIFVzZWQgdG8gc3RhbmQtaW4gZm9yIGB1bmRlZmluZWRgIGhhc2ggdmFsdWVzLiAqL1xudmFyIEhBU0hfVU5ERUZJTkVEID0gJ19fbG9kYXNoX2hhc2hfdW5kZWZpbmVkX18nO1xuXG4vKipcbiAqIEFkZHMgYHZhbHVlYCB0byB0aGUgYXJyYXkgY2FjaGUuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGFkZFxuICogQG1lbWJlck9mIFNldENhY2hlXG4gKiBAYWxpYXMgcHVzaFxuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2FjaGUuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gc2V0Q2FjaGVBZGQodmFsdWUpIHtcbiAgdGhpcy5fX2RhdGFfXy5zZXQodmFsdWUsIEhBU0hfVU5ERUZJTkVEKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0Q2FjaGVBZGQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3NldENhY2hlQWRkLmpzXG4gKiogbW9kdWxlIGlkID0gMTM4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBgdmFsdWVgIGlzIGluIHRoZSBhcnJheSBjYWNoZS5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgaGFzXG4gKiBAbWVtYmVyT2YgU2V0Q2FjaGVcbiAqIEBwYXJhbSB7Kn0gdmFsdWUgVGhlIHZhbHVlIHRvIHNlYXJjaCBmb3IuXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGZvdW5kLCBlbHNlIGBmYWxzZWAuXG4gKi9cbmZ1bmN0aW9uIHNldENhY2hlSGFzKHZhbHVlKSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc2V0Q2FjaGVIYXM7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3NldENhY2hlSGFzLmpzXG4gKiogbW9kdWxlIGlkID0gMTM5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENvbnZlcnRzIGBzZXRgIHRvIGFuIGFycmF5IG9mIGl0cyB2YWx1ZXMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBzZXQgVGhlIHNldCB0byBjb252ZXJ0LlxuICogQHJldHVybnMge0FycmF5fSBSZXR1cm5zIHRoZSB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIHNldFRvQXJyYXkoc2V0KSB7XG4gIHZhciBpbmRleCA9IC0xLFxuICAgICAgcmVzdWx0ID0gQXJyYXkoc2V0LnNpemUpO1xuXG4gIHNldC5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgcmVzdWx0WysraW5kZXhdID0gdmFsdWU7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHNldFRvQXJyYXk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3NldFRvQXJyYXkuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBMaXN0Q2FjaGUgPSByZXF1aXJlKCcuL19MaXN0Q2FjaGUnKTtcblxuLyoqXG4gKiBSZW1vdmVzIGFsbCBrZXktdmFsdWUgZW50cmllcyBmcm9tIHRoZSBzdGFjay5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgY2xlYXJcbiAqIEBtZW1iZXJPZiBTdGFja1xuICovXG5mdW5jdGlvbiBzdGFja0NsZWFyKCkge1xuICB0aGlzLl9fZGF0YV9fID0gbmV3IExpc3RDYWNoZTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBzdGFja0NsZWFyO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19zdGFja0NsZWFyLmpzXG4gKiogbW9kdWxlIGlkID0gMTQxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFJlbW92ZXMgYGtleWAgYW5kIGl0cyB2YWx1ZSBmcm9tIHRoZSBzdGFjay5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZGVsZXRlXG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gcmVtb3ZlLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIHRoZSBlbnRyeSB3YXMgcmVtb3ZlZCwgZWxzZSBgZmFsc2VgLlxuICovXG5mdW5jdGlvbiBzdGFja0RlbGV0ZShrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX19bJ2RlbGV0ZSddKGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3RhY2tEZWxldGU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3N0YWNrRGVsZXRlLmpzXG4gKiogbW9kdWxlIGlkID0gMTQyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIEdldHMgdGhlIHN0YWNrIHZhbHVlIGZvciBga2V5YC5cbiAqXG4gKiBAcHJpdmF0ZVxuICogQG5hbWUgZ2V0XG4gKiBAbWVtYmVyT2YgU3RhY2tcbiAqIEBwYXJhbSB7c3RyaW5nfSBrZXkgVGhlIGtleSBvZiB0aGUgdmFsdWUgdG8gZ2V0LlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIGVudHJ5IHZhbHVlLlxuICovXG5mdW5jdGlvbiBzdGFja0dldChrZXkpIHtcbiAgcmV0dXJuIHRoaXMuX19kYXRhX18uZ2V0KGtleSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3RhY2tHZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3N0YWNrR2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTQzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIENoZWNrcyBpZiBhIHN0YWNrIHZhbHVlIGZvciBga2V5YCBleGlzdHMuXG4gKlxuICogQHByaXZhdGVcbiAqIEBuYW1lIGhhc1xuICogQG1lbWJlck9mIFN0YWNrXG4gKiBAcGFyYW0ge3N0cmluZ30ga2V5IFRoZSBrZXkgb2YgdGhlIGVudHJ5IHRvIGNoZWNrLlxuICogQHJldHVybnMge2Jvb2xlYW59IFJldHVybnMgYHRydWVgIGlmIGFuIGVudHJ5IGZvciBga2V5YCBleGlzdHMsIGVsc2UgYGZhbHNlYC5cbiAqL1xuZnVuY3Rpb24gc3RhY2tIYXMoa2V5KSB7XG4gIHJldHVybiB0aGlzLl9fZGF0YV9fLmhhcyhrZXkpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHN0YWNrSGFzO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19zdGFja0hhcy5qc1xuICoqIG1vZHVsZSBpZCA9IDE0NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIExpc3RDYWNoZSA9IHJlcXVpcmUoJy4vX0xpc3RDYWNoZScpLFxuICAgIE1hcENhY2hlID0gcmVxdWlyZSgnLi9fTWFwQ2FjaGUnKTtcblxuLyoqIFVzZWQgYXMgdGhlIHNpemUgdG8gZW5hYmxlIGxhcmdlIGFycmF5IG9wdGltaXphdGlvbnMuICovXG52YXIgTEFSR0VfQVJSQVlfU0laRSA9IDIwMDtcblxuLyoqXG4gKiBTZXRzIHRoZSBzdGFjayBga2V5YCB0byBgdmFsdWVgLlxuICpcbiAqIEBwcml2YXRlXG4gKiBAbmFtZSBzZXRcbiAqIEBtZW1iZXJPZiBTdGFja1xuICogQHBhcmFtIHtzdHJpbmd9IGtleSBUaGUga2V5IG9mIHRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBzZXQuXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBzdGFjayBjYWNoZSBpbnN0YW5jZS5cbiAqL1xuZnVuY3Rpb24gc3RhY2tTZXQoa2V5LCB2YWx1ZSkge1xuICB2YXIgY2FjaGUgPSB0aGlzLl9fZGF0YV9fO1xuICBpZiAoY2FjaGUgaW5zdGFuY2VvZiBMaXN0Q2FjaGUgJiYgY2FjaGUuX19kYXRhX18ubGVuZ3RoID09IExBUkdFX0FSUkFZX1NJWkUpIHtcbiAgICBjYWNoZSA9IHRoaXMuX19kYXRhX18gPSBuZXcgTWFwQ2FjaGUoY2FjaGUuX19kYXRhX18pO1xuICB9XG4gIGNhY2hlLnNldChrZXksIHZhbHVlKTtcbiAgcmV0dXJuIHRoaXM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gc3RhY2tTZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvX3N0YWNrU2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTQ1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgbWVtb2l6ZSA9IHJlcXVpcmUoJy4vbWVtb2l6ZScpLFxuICAgIHRvU3RyaW5nID0gcmVxdWlyZSgnLi90b1N0cmluZycpO1xuXG4vKiogVXNlZCB0byBtYXRjaCBwcm9wZXJ0eSBuYW1lcyB3aXRoaW4gcHJvcGVydHkgcGF0aHMuICovXG52YXIgcmVQcm9wTmFtZSA9IC9bXi5bXFxdXSt8XFxbKD86KC0/XFxkKyg/OlxcLlxcZCspPyl8KFtcIiddKSgoPzooPyFcXDIpW15cXFxcXXxcXFxcLikqPylcXDIpXFxdfCg/PShcXC58XFxbXFxdKSg/OlxcNHwkKSkvZztcblxuLyoqIFVzZWQgdG8gbWF0Y2ggYmFja3NsYXNoZXMgaW4gcHJvcGVydHkgcGF0aHMuICovXG52YXIgcmVFc2NhcGVDaGFyID0gL1xcXFwoXFxcXCk/L2c7XG5cbi8qKlxuICogQ29udmVydHMgYHN0cmluZ2AgdG8gYSBwcm9wZXJ0eSBwYXRoIGFycmF5LlxuICpcbiAqIEBwcml2YXRlXG4gKiBAcGFyYW0ge3N0cmluZ30gc3RyaW5nIFRoZSBzdHJpbmcgdG8gY29udmVydC5cbiAqIEByZXR1cm5zIHtBcnJheX0gUmV0dXJucyB0aGUgcHJvcGVydHkgcGF0aCBhcnJheS5cbiAqL1xudmFyIHN0cmluZ1RvUGF0aCA9IG1lbW9pemUoZnVuY3Rpb24oc3RyaW5nKSB7XG4gIHZhciByZXN1bHQgPSBbXTtcbiAgdG9TdHJpbmcoc3RyaW5nKS5yZXBsYWNlKHJlUHJvcE5hbWUsIGZ1bmN0aW9uKG1hdGNoLCBudW1iZXIsIHF1b3RlLCBzdHJpbmcpIHtcbiAgICByZXN1bHQucHVzaChxdW90ZSA/IHN0cmluZy5yZXBsYWNlKHJlRXNjYXBlQ2hhciwgJyQxJykgOiAobnVtYmVyIHx8IG1hdGNoKSk7XG4gIH0pO1xuICByZXR1cm4gcmVzdWx0O1xufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gc3RyaW5nVG9QYXRoO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL19zdHJpbmdUb1BhdGguanNcbiAqKiBtb2R1bGUgaWQgPSAxNDZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc09iamVjdCA9IHJlcXVpcmUoJy4vaXNPYmplY3QnKSxcbiAgICBub3cgPSByZXF1aXJlKCcuL25vdycpLFxuICAgIHRvTnVtYmVyID0gcmVxdWlyZSgnLi90b051bWJlcicpO1xuXG4vKiogVXNlZCBhcyB0aGUgYFR5cGVFcnJvcmAgbWVzc2FnZSBmb3IgXCJGdW5jdGlvbnNcIiBtZXRob2RzLiAqL1xudmFyIEZVTkNfRVJST1JfVEVYVCA9ICdFeHBlY3RlZCBhIGZ1bmN0aW9uJztcblxuLyogQnVpbHQtaW4gbWV0aG9kIHJlZmVyZW5jZXMgZm9yIHRob3NlIHdpdGggdGhlIHNhbWUgbmFtZSBhcyBvdGhlciBgbG9kYXNoYCBtZXRob2RzLiAqL1xudmFyIG5hdGl2ZU1heCA9IE1hdGgubWF4LFxuICAgIG5hdGl2ZU1pbiA9IE1hdGgubWluO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBkZWJvdW5jZWQgZnVuY3Rpb24gdGhhdCBkZWxheXMgaW52b2tpbmcgYGZ1bmNgIHVudGlsIGFmdGVyIGB3YWl0YFxuICogbWlsbGlzZWNvbmRzIGhhdmUgZWxhcHNlZCBzaW5jZSB0aGUgbGFzdCB0aW1lIHRoZSBkZWJvdW5jZWQgZnVuY3Rpb24gd2FzXG4gKiBpbnZva2VkLiBUaGUgZGVib3VuY2VkIGZ1bmN0aW9uIGNvbWVzIHdpdGggYSBgY2FuY2VsYCBtZXRob2QgdG8gY2FuY2VsXG4gKiBkZWxheWVkIGBmdW5jYCBpbnZvY2F0aW9ucyBhbmQgYSBgZmx1c2hgIG1ldGhvZCB0byBpbW1lZGlhdGVseSBpbnZva2UgdGhlbS5cbiAqIFByb3ZpZGUgYW4gb3B0aW9ucyBvYmplY3QgdG8gaW5kaWNhdGUgd2hldGhlciBgZnVuY2Agc2hvdWxkIGJlIGludm9rZWQgb25cbiAqIHRoZSBsZWFkaW5nIGFuZC9vciB0cmFpbGluZyBlZGdlIG9mIHRoZSBgd2FpdGAgdGltZW91dC4gVGhlIGBmdW5jYCBpcyBpbnZva2VkXG4gKiB3aXRoIHRoZSBsYXN0IGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uLiBTdWJzZXF1ZW50IGNhbGxzXG4gKiB0byB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIHJldHVybiB0aGUgcmVzdWx0IG9mIHRoZSBsYXN0IGBmdW5jYCBpbnZvY2F0aW9uLlxuICpcbiAqICoqTm90ZToqKiBJZiBgbGVhZGluZ2AgYW5kIGB0cmFpbGluZ2Agb3B0aW9ucyBhcmUgYHRydWVgLCBgZnVuY2AgaXMgaW52b2tlZFxuICogb24gdGhlIHRyYWlsaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQgb25seSBpZiB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uIGlzXG4gKiBpbnZva2VkIG1vcmUgdGhhbiBvbmNlIGR1cmluZyB0aGUgYHdhaXRgIHRpbWVvdXQuXG4gKlxuICogU2VlIFtEYXZpZCBDb3JiYWNobydzIGFydGljbGVdKGh0dHBzOi8vY3NzLXRyaWNrcy5jb20vZGVib3VuY2luZy10aHJvdHRsaW5nLWV4cGxhaW5lZC1leGFtcGxlcy8pXG4gKiBmb3IgZGV0YWlscyBvdmVyIHRoZSBkaWZmZXJlbmNlcyBiZXR3ZWVuIGBfLmRlYm91bmNlYCBhbmQgYF8udGhyb3R0bGVgLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMC4xLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gZGVib3VuY2UuXG4gKiBAcGFyYW0ge251bWJlcn0gW3dhaXQ9MF0gVGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdG8gZGVsYXkuXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnM9e31dIFRoZSBvcHRpb25zIG9iamVjdC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMubGVhZGluZz1mYWxzZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSBsZWFkaW5nIGVkZ2Ugb2YgdGhlIHRpbWVvdXQuXG4gKiBAcGFyYW0ge251bWJlcn0gW29wdGlvbnMubWF4V2FpdF1cbiAqICBUaGUgbWF4aW11bSB0aW1lIGBmdW5jYCBpcyBhbGxvd2VkIHRvIGJlIGRlbGF5ZWQgYmVmb3JlIGl0J3MgaW52b2tlZC5cbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdGlvbnMudHJhaWxpbmc9dHJ1ZV1cbiAqICBTcGVjaWZ5IGludm9raW5nIG9uIHRoZSB0cmFpbGluZyBlZGdlIG9mIHRoZSB0aW1lb3V0LlxuICogQHJldHVybnMge0Z1bmN0aW9ufSBSZXR1cm5zIHRoZSBuZXcgZGVib3VuY2VkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiAvLyBBdm9pZCBjb3N0bHkgY2FsY3VsYXRpb25zIHdoaWxlIHRoZSB3aW5kb3cgc2l6ZSBpcyBpbiBmbHV4LlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3Jlc2l6ZScsIF8uZGVib3VuY2UoY2FsY3VsYXRlTGF5b3V0LCAxNTApKTtcbiAqXG4gKiAvLyBJbnZva2UgYHNlbmRNYWlsYCB3aGVuIGNsaWNrZWQsIGRlYm91bmNpbmcgc3Vic2VxdWVudCBjYWxscy5cbiAqIGpRdWVyeShlbGVtZW50KS5vbignY2xpY2snLCBfLmRlYm91bmNlKHNlbmRNYWlsLCAzMDAsIHtcbiAqICAgJ2xlYWRpbmcnOiB0cnVlLFxuICogICAndHJhaWxpbmcnOiBmYWxzZVxuICogfSkpO1xuICpcbiAqIC8vIEVuc3VyZSBgYmF0Y2hMb2dgIGlzIGludm9rZWQgb25jZSBhZnRlciAxIHNlY29uZCBvZiBkZWJvdW5jZWQgY2FsbHMuXG4gKiB2YXIgZGVib3VuY2VkID0gXy5kZWJvdW5jZShiYXRjaExvZywgMjUwLCB7ICdtYXhXYWl0JzogMTAwMCB9KTtcbiAqIHZhciBzb3VyY2UgPSBuZXcgRXZlbnRTb3VyY2UoJy9zdHJlYW0nKTtcbiAqIGpRdWVyeShzb3VyY2UpLm9uKCdtZXNzYWdlJywgZGVib3VuY2VkKTtcbiAqXG4gKiAvLyBDYW5jZWwgdGhlIHRyYWlsaW5nIGRlYm91bmNlZCBpbnZvY2F0aW9uLlxuICogalF1ZXJ5KHdpbmRvdykub24oJ3BvcHN0YXRlJywgZGVib3VuY2VkLmNhbmNlbCk7XG4gKi9cbmZ1bmN0aW9uIGRlYm91bmNlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGxhc3RBcmdzLFxuICAgICAgbGFzdFRoaXMsXG4gICAgICBtYXhXYWl0LFxuICAgICAgcmVzdWx0LFxuICAgICAgdGltZXJJZCxcbiAgICAgIGxhc3RDYWxsVGltZSxcbiAgICAgIGxhc3RJbnZva2VUaW1lID0gMCxcbiAgICAgIGxlYWRpbmcgPSBmYWxzZSxcbiAgICAgIG1heGluZyA9IGZhbHNlLFxuICAgICAgdHJhaWxpbmcgPSB0cnVlO1xuXG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihGVU5DX0VSUk9SX1RFWFQpO1xuICB9XG4gIHdhaXQgPSB0b051bWJlcih3YWl0KSB8fCAwO1xuICBpZiAoaXNPYmplY3Qob3B0aW9ucykpIHtcbiAgICBsZWFkaW5nID0gISFvcHRpb25zLmxlYWRpbmc7XG4gICAgbWF4aW5nID0gJ21heFdhaXQnIGluIG9wdGlvbnM7XG4gICAgbWF4V2FpdCA9IG1heGluZyA/IG5hdGl2ZU1heCh0b051bWJlcihvcHRpb25zLm1heFdhaXQpIHx8IDAsIHdhaXQpIDogbWF4V2FpdDtcbiAgICB0cmFpbGluZyA9ICd0cmFpbGluZycgaW4gb3B0aW9ucyA/ICEhb3B0aW9ucy50cmFpbGluZyA6IHRyYWlsaW5nO1xuICB9XG5cbiAgZnVuY3Rpb24gaW52b2tlRnVuYyh0aW1lKSB7XG4gICAgdmFyIGFyZ3MgPSBsYXN0QXJncyxcbiAgICAgICAgdGhpc0FyZyA9IGxhc3RUaGlzO1xuXG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICBsYXN0SW52b2tlVGltZSA9IHRpbWU7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseSh0aGlzQXJnLCBhcmdzKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gbGVhZGluZ0VkZ2UodGltZSkge1xuICAgIC8vIFJlc2V0IGFueSBgbWF4V2FpdGAgdGltZXIuXG4gICAgbGFzdEludm9rZVRpbWUgPSB0aW1lO1xuICAgIC8vIFN0YXJ0IHRoZSB0aW1lciBmb3IgdGhlIHRyYWlsaW5nIGVkZ2UuXG4gICAgdGltZXJJZCA9IHNldFRpbWVvdXQodGltZXJFeHBpcmVkLCB3YWl0KTtcbiAgICAvLyBJbnZva2UgdGhlIGxlYWRpbmcgZWRnZS5cbiAgICByZXR1cm4gbGVhZGluZyA/IGludm9rZUZ1bmModGltZSkgOiByZXN1bHQ7XG4gIH1cblxuICBmdW5jdGlvbiByZW1haW5pbmdXYWl0KHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lLFxuICAgICAgICByZXN1bHQgPSB3YWl0IC0gdGltZVNpbmNlTGFzdENhbGw7XG5cbiAgICByZXR1cm4gbWF4aW5nID8gbmF0aXZlTWluKHJlc3VsdCwgbWF4V2FpdCAtIHRpbWVTaW5jZUxhc3RJbnZva2UpIDogcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvdWxkSW52b2tlKHRpbWUpIHtcbiAgICB2YXIgdGltZVNpbmNlTGFzdENhbGwgPSB0aW1lIC0gbGFzdENhbGxUaW1lLFxuICAgICAgICB0aW1lU2luY2VMYXN0SW52b2tlID0gdGltZSAtIGxhc3RJbnZva2VUaW1lO1xuXG4gICAgLy8gRWl0aGVyIHRoaXMgaXMgdGhlIGZpcnN0IGNhbGwsIGFjdGl2aXR5IGhhcyBzdG9wcGVkIGFuZCB3ZSdyZSBhdCB0aGVcbiAgICAvLyB0cmFpbGluZyBlZGdlLCB0aGUgc3lzdGVtIHRpbWUgaGFzIGdvbmUgYmFja3dhcmRzIGFuZCB3ZSdyZSB0cmVhdGluZ1xuICAgIC8vIGl0IGFzIHRoZSB0cmFpbGluZyBlZGdlLCBvciB3ZSd2ZSBoaXQgdGhlIGBtYXhXYWl0YCBsaW1pdC5cbiAgICByZXR1cm4gKGxhc3RDYWxsVGltZSA9PT0gdW5kZWZpbmVkIHx8ICh0aW1lU2luY2VMYXN0Q2FsbCA+PSB3YWl0KSB8fFxuICAgICAgKHRpbWVTaW5jZUxhc3RDYWxsIDwgMCkgfHwgKG1heGluZyAmJiB0aW1lU2luY2VMYXN0SW52b2tlID49IG1heFdhaXQpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRpbWVyRXhwaXJlZCgpIHtcbiAgICB2YXIgdGltZSA9IG5vdygpO1xuICAgIGlmIChzaG91bGRJbnZva2UodGltZSkpIHtcbiAgICAgIHJldHVybiB0cmFpbGluZ0VkZ2UodGltZSk7XG4gICAgfVxuICAgIC8vIFJlc3RhcnQgdGhlIHRpbWVyLlxuICAgIHRpbWVySWQgPSBzZXRUaW1lb3V0KHRpbWVyRXhwaXJlZCwgcmVtYWluaW5nV2FpdCh0aW1lKSk7XG4gIH1cblxuICBmdW5jdGlvbiB0cmFpbGluZ0VkZ2UodGltZSkge1xuICAgIHRpbWVySWQgPSB1bmRlZmluZWQ7XG5cbiAgICAvLyBPbmx5IGludm9rZSBpZiB3ZSBoYXZlIGBsYXN0QXJnc2Agd2hpY2ggbWVhbnMgYGZ1bmNgIGhhcyBiZWVuXG4gICAgLy8gZGVib3VuY2VkIGF0IGxlYXN0IG9uY2UuXG4gICAgaWYgKHRyYWlsaW5nICYmIGxhc3RBcmdzKSB7XG4gICAgICByZXR1cm4gaW52b2tlRnVuYyh0aW1lKTtcbiAgICB9XG4gICAgbGFzdEFyZ3MgPSBsYXN0VGhpcyA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gY2FuY2VsKCkge1xuICAgIGxhc3RJbnZva2VUaW1lID0gMDtcbiAgICBsYXN0QXJncyA9IGxhc3RDYWxsVGltZSA9IGxhc3RUaGlzID0gdGltZXJJZCA9IHVuZGVmaW5lZDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGZsdXNoKCkge1xuICAgIHJldHVybiB0aW1lcklkID09PSB1bmRlZmluZWQgPyByZXN1bHQgOiB0cmFpbGluZ0VkZ2Uobm93KCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gZGVib3VuY2VkKCkge1xuICAgIHZhciB0aW1lID0gbm93KCksXG4gICAgICAgIGlzSW52b2tpbmcgPSBzaG91bGRJbnZva2UodGltZSk7XG5cbiAgICBsYXN0QXJncyA9IGFyZ3VtZW50cztcbiAgICBsYXN0VGhpcyA9IHRoaXM7XG4gICAgbGFzdENhbGxUaW1lID0gdGltZTtcblxuICAgIGlmIChpc0ludm9raW5nKSB7XG4gICAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBsZWFkaW5nRWRnZShsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgICAgaWYgKG1heGluZykge1xuICAgICAgICAvLyBIYW5kbGUgaW52b2NhdGlvbnMgaW4gYSB0aWdodCBsb29wLlxuICAgICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgICAgICByZXR1cm4gaW52b2tlRnVuYyhsYXN0Q2FsbFRpbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGltZXJJZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICB0aW1lcklkID0gc2V0VGltZW91dCh0aW1lckV4cGlyZWQsIHdhaXQpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG4gIGRlYm91bmNlZC5jYW5jZWwgPSBjYW5jZWw7XG4gIGRlYm91bmNlZC5mbHVzaCA9IGZsdXNoO1xuICByZXR1cm4gZGVib3VuY2VkO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGRlYm91bmNlO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2RlYm91bmNlLmpzXG4gKiogbW9kdWxlIGlkID0gMTQ3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFBlcmZvcm1zIGFcbiAqIFtgU2FtZVZhbHVlWmVyb2BdKGh0dHA6Ly9lY21hLWludGVybmF0aW9uYWwub3JnL2VjbWEtMjYyLzYuMC8jc2VjLXNhbWV2YWx1ZXplcm8pXG4gKiBjb21wYXJpc29uIGJldHdlZW4gdHdvIHZhbHVlcyB0byBkZXRlcm1pbmUgaWYgdGhleSBhcmUgZXF1aXZhbGVudC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY29tcGFyZS5cbiAqIEBwYXJhbSB7Kn0gb3RoZXIgVGhlIG90aGVyIHZhbHVlIHRvIGNvbXBhcmUuXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIHZhbHVlcyBhcmUgZXF1aXZhbGVudCwgZWxzZSBgZmFsc2VgLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAndXNlcic6ICdmcmVkJyB9O1xuICogdmFyIG90aGVyID0geyAndXNlcic6ICdmcmVkJyB9O1xuICpcbiAqIF8uZXEob2JqZWN0LCBvYmplY3QpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEob2JqZWN0LCBvdGhlcik7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoJ2EnLCAnYScpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uZXEoJ2EnLCBPYmplY3QoJ2EnKSk7XG4gKiAvLyA9PiBmYWxzZVxuICpcbiAqIF8uZXEoTmFOLCBOYU4pO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBlcSh2YWx1ZSwgb3RoZXIpIHtcbiAgcmV0dXJuIHZhbHVlID09PSBvdGhlciB8fCAodmFsdWUgIT09IHZhbHVlICYmIG90aGVyICE9PSBvdGhlcik7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZXE7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvZXEuanNcbiAqKiBtb2R1bGUgaWQgPSAxNDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlRmluZEluZGV4ID0gcmVxdWlyZSgnLi9fYmFzZUZpbmRJbmRleCcpLFxuICAgIGJhc2VJdGVyYXRlZSA9IHJlcXVpcmUoJy4vX2Jhc2VJdGVyYXRlZScpLFxuICAgIHRvSW50ZWdlciA9IHJlcXVpcmUoJy4vdG9JbnRlZ2VyJyk7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcblxuLyoqXG4gKiBUaGlzIG1ldGhvZCBpcyBsaWtlIGBfLmZpbmRgIGV4Y2VwdCB0aGF0IGl0IHJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmaXJzdFxuICogZWxlbWVudCBgcHJlZGljYXRlYCByZXR1cm5zIHRydXRoeSBmb3IgaW5zdGVhZCBvZiB0aGUgZWxlbWVudCBpdHNlbGYuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSAxLjEuMFxuICogQGNhdGVnb3J5IEFycmF5XG4gKiBAcGFyYW0ge0FycmF5fSBhcnJheSBUaGUgYXJyYXkgdG8gc2VhcmNoLlxuICogQHBhcmFtIHtBcnJheXxGdW5jdGlvbnxPYmplY3R8c3RyaW5nfSBbcHJlZGljYXRlPV8uaWRlbnRpdHldXG4gKiAgVGhlIGZ1bmN0aW9uIGludm9rZWQgcGVyIGl0ZXJhdGlvbi5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbZnJvbUluZGV4PTBdIFRoZSBpbmRleCB0byBzZWFyY2ggZnJvbS5cbiAqIEByZXR1cm5zIHtudW1iZXJ9IFJldHVybnMgdGhlIGluZGV4IG9mIHRoZSBmb3VuZCBlbGVtZW50LCBlbHNlIGAtMWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciB1c2VycyA9IFtcbiAqICAgeyAndXNlcic6ICdiYXJuZXknLCAgJ2FjdGl2ZSc6IGZhbHNlIH0sXG4gKiAgIHsgJ3VzZXInOiAnZnJlZCcsICAgICdhY3RpdmUnOiBmYWxzZSB9LFxuICogICB7ICd1c2VyJzogJ3BlYmJsZXMnLCAnYWN0aXZlJzogdHJ1ZSB9XG4gKiBdO1xuICpcbiAqIF8uZmluZEluZGV4KHVzZXJzLCBmdW5jdGlvbihvKSB7IHJldHVybiBvLnVzZXIgPT0gJ2Jhcm5leSc7IH0pO1xuICogLy8gPT4gMFxuICpcbiAqIC8vIFRoZSBgXy5tYXRjaGVzYCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gKiBfLmZpbmRJbmRleCh1c2VycywgeyAndXNlcic6ICdmcmVkJywgJ2FjdGl2ZSc6IGZhbHNlIH0pO1xuICogLy8gPT4gMVxuICpcbiAqIC8vIFRoZSBgXy5tYXRjaGVzUHJvcGVydHlgIGl0ZXJhdGVlIHNob3J0aGFuZC5cbiAqIF8uZmluZEluZGV4KHVzZXJzLCBbJ2FjdGl2ZScsIGZhbHNlXSk7XG4gKiAvLyA9PiAwXG4gKlxuICogLy8gVGhlIGBfLnByb3BlcnR5YCBpdGVyYXRlZSBzaG9ydGhhbmQuXG4gKiBfLmZpbmRJbmRleCh1c2VycywgJ2FjdGl2ZScpO1xuICogLy8gPT4gMlxuICovXG5mdW5jdGlvbiBmaW5kSW5kZXgoYXJyYXksIHByZWRpY2F0ZSwgZnJvbUluZGV4KSB7XG4gIHZhciBsZW5ndGggPSBhcnJheSA/IGFycmF5Lmxlbmd0aCA6IDA7XG4gIGlmICghbGVuZ3RoKSB7XG4gICAgcmV0dXJuIC0xO1xuICB9XG4gIHZhciBpbmRleCA9IGZyb21JbmRleCA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihmcm9tSW5kZXgpO1xuICBpZiAoaW5kZXggPCAwKSB7XG4gICAgaW5kZXggPSBuYXRpdmVNYXgobGVuZ3RoICsgaW5kZXgsIDApO1xuICB9XG4gIHJldHVybiBiYXNlRmluZEluZGV4KGFycmF5LCBiYXNlSXRlcmF0ZWUocHJlZGljYXRlLCAzKSwgaW5kZXgpO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGZpbmRJbmRleDtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC9maW5kSW5kZXguanNcbiAqKiBtb2R1bGUgaWQgPSAxNDlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBiYXNlR2V0ID0gcmVxdWlyZSgnLi9fYmFzZUdldCcpO1xuXG4vKipcbiAqIEdldHMgdGhlIHZhbHVlIGF0IGBwYXRoYCBvZiBgb2JqZWN0YC4gSWYgdGhlIHJlc29sdmVkIHZhbHVlIGlzXG4gKiBgdW5kZWZpbmVkYCwgdGhlIGBkZWZhdWx0VmFsdWVgIGlzIHVzZWQgaW4gaXRzIHBsYWNlLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy43LjBcbiAqIEBjYXRlZ29yeSBPYmplY3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmplY3QgVGhlIG9iamVjdCB0byBxdWVyeS5cbiAqIEBwYXJhbSB7QXJyYXl8c3RyaW5nfSBwYXRoIFRoZSBwYXRoIG9mIHRoZSBwcm9wZXJ0eSB0byBnZXQuXG4gKiBAcGFyYW0geyp9IFtkZWZhdWx0VmFsdWVdIFRoZSB2YWx1ZSByZXR1cm5lZCBmb3IgYHVuZGVmaW5lZGAgcmVzb2x2ZWQgdmFsdWVzLlxuICogQHJldHVybnMgeyp9IFJldHVybnMgdGhlIHJlc29sdmVkIHZhbHVlLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IFt7ICdiJzogeyAnYyc6IDMgfSB9XSB9O1xuICpcbiAqIF8uZ2V0KG9iamVjdCwgJ2FbMF0uYi5jJyk7XG4gKiAvLyA9PiAzXG4gKlxuICogXy5nZXQob2JqZWN0LCBbJ2EnLCAnMCcsICdiJywgJ2MnXSk7XG4gKiAvLyA9PiAzXG4gKlxuICogXy5nZXQob2JqZWN0LCAnYS5iLmMnLCAnZGVmYXVsdCcpO1xuICogLy8gPT4gJ2RlZmF1bHQnXG4gKi9cbmZ1bmN0aW9uIGdldChvYmplY3QsIHBhdGgsIGRlZmF1bHRWYWx1ZSkge1xuICB2YXIgcmVzdWx0ID0gb2JqZWN0ID09IG51bGwgPyB1bmRlZmluZWQgOiBiYXNlR2V0KG9iamVjdCwgcGF0aCk7XG4gIHJldHVybiByZXN1bHQgPT09IHVuZGVmaW5lZCA/IGRlZmF1bHRWYWx1ZSA6IHJlc3VsdDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBnZXQ7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvZ2V0LmpzXG4gKiogbW9kdWxlIGlkID0gMTUwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZUhhc0luID0gcmVxdWlyZSgnLi9fYmFzZUhhc0luJyksXG4gICAgaGFzUGF0aCA9IHJlcXVpcmUoJy4vX2hhc1BhdGgnKTtcblxuLyoqXG4gKiBDaGVja3MgaWYgYHBhdGhgIGlzIGEgZGlyZWN0IG9yIGluaGVyaXRlZCBwcm9wZXJ0eSBvZiBgb2JqZWN0YC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgT2JqZWN0XG4gKiBAcGFyYW0ge09iamVjdH0gb2JqZWN0IFRoZSBvYmplY3QgdG8gcXVlcnkuXG4gKiBAcGFyYW0ge0FycmF5fHN0cmluZ30gcGF0aCBUaGUgcGF0aCB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgcGF0aGAgZXhpc3RzLCBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSBfLmNyZWF0ZSh7ICdhJzogXy5jcmVhdGUoeyAnYic6IDIgfSkgfSk7XG4gKlxuICogXy5oYXNJbihvYmplY3QsICdhJyk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5oYXNJbihvYmplY3QsICdhLmInKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmhhc0luKG9iamVjdCwgWydhJywgJ2InXSk7XG4gKiAvLyA9PiB0cnVlXG4gKlxuICogXy5oYXNJbihvYmplY3QsICdiJyk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBoYXNJbihvYmplY3QsIHBhdGgpIHtcbiAgcmV0dXJuIG9iamVjdCAhPSBudWxsICYmIGhhc1BhdGgob2JqZWN0LCBwYXRoLCBiYXNlSGFzSW4pO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGhhc0luO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2hhc0luLmpzXG4gKiogbW9kdWxlIGlkID0gMTUxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKipcbiAqIFRoaXMgbWV0aG9kIHJldHVybnMgdGhlIGZpcnN0IGFyZ3VtZW50IGdpdmVuIHRvIGl0LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBzaW5jZSAwLjEuMFxuICogQG1lbWJlck9mIF9cbiAqIEBjYXRlZ29yeSBVdGlsXG4gKiBAcGFyYW0geyp9IHZhbHVlIEFueSB2YWx1ZS5cbiAqIEByZXR1cm5zIHsqfSBSZXR1cm5zIGB2YWx1ZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIHZhciBvYmplY3QgPSB7ICd1c2VyJzogJ2ZyZWQnIH07XG4gKlxuICogY29uc29sZS5sb2coXy5pZGVudGl0eShvYmplY3QpID09PSBvYmplY3QpO1xuICogLy8gPT4gdHJ1ZVxuICovXG5mdW5jdGlvbiBpZGVudGl0eSh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWU7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaWRlbnRpdHk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaWRlbnRpdHkuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0FycmF5TGlrZSA9IHJlcXVpcmUoJy4vaXNBcnJheUxpa2UnKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuL2lzT2JqZWN0TGlrZScpO1xuXG4vKipcbiAqIFRoaXMgbWV0aG9kIGlzIGxpa2UgYF8uaXNBcnJheUxpa2VgIGV4Y2VwdCB0aGF0IGl0IGFsc28gY2hlY2tzIGlmIGB2YWx1ZWBcbiAqIGlzIGFuIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gY2hlY2suXG4gKiBAcmV0dXJucyB7Ym9vbGVhbn0gUmV0dXJucyBgdHJ1ZWAgaWYgYHZhbHVlYCBpcyBhbiBhcnJheS1saWtlIG9iamVjdCxcbiAqICBlbHNlIGBmYWxzZWAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoWzEsIDIsIDNdKTtcbiAqIC8vID0+IHRydWVcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KGRvY3VtZW50LmJvZHkuY2hpbGRyZW4pO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNBcnJheUxpa2VPYmplY3QoJ2FiYycpO1xuICogLy8gPT4gZmFsc2VcbiAqXG4gKiBfLmlzQXJyYXlMaWtlT2JqZWN0KF8ubm9vcCk7XG4gKiAvLyA9PiBmYWxzZVxuICovXG5mdW5jdGlvbiBpc0FycmF5TGlrZU9iamVjdCh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJiBpc0FycmF5TGlrZSh2YWx1ZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNBcnJheUxpa2VPYmplY3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvaXNBcnJheUxpa2VPYmplY3QuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBpc0xlbmd0aCA9IHJlcXVpcmUoJy4vaXNMZW5ndGgnKSxcbiAgICBpc09iamVjdExpa2UgPSByZXF1aXJlKCcuL2lzT2JqZWN0TGlrZScpO1xuXG4vKiogYE9iamVjdCN0b1N0cmluZ2AgcmVzdWx0IHJlZmVyZW5jZXMuICovXG52YXIgYXJnc1RhZyA9ICdbb2JqZWN0IEFyZ3VtZW50c10nLFxuICAgIGFycmF5VGFnID0gJ1tvYmplY3QgQXJyYXldJyxcbiAgICBib29sVGFnID0gJ1tvYmplY3QgQm9vbGVhbl0nLFxuICAgIGRhdGVUYWcgPSAnW29iamVjdCBEYXRlXScsXG4gICAgZXJyb3JUYWcgPSAnW29iamVjdCBFcnJvcl0nLFxuICAgIGZ1bmNUYWcgPSAnW29iamVjdCBGdW5jdGlvbl0nLFxuICAgIG1hcFRhZyA9ICdbb2JqZWN0IE1hcF0nLFxuICAgIG51bWJlclRhZyA9ICdbb2JqZWN0IE51bWJlcl0nLFxuICAgIG9iamVjdFRhZyA9ICdbb2JqZWN0IE9iamVjdF0nLFxuICAgIHJlZ2V4cFRhZyA9ICdbb2JqZWN0IFJlZ0V4cF0nLFxuICAgIHNldFRhZyA9ICdbb2JqZWN0IFNldF0nLFxuICAgIHN0cmluZ1RhZyA9ICdbb2JqZWN0IFN0cmluZ10nLFxuICAgIHdlYWtNYXBUYWcgPSAnW29iamVjdCBXZWFrTWFwXSc7XG5cbnZhciBhcnJheUJ1ZmZlclRhZyA9ICdbb2JqZWN0IEFycmF5QnVmZmVyXScsXG4gICAgZGF0YVZpZXdUYWcgPSAnW29iamVjdCBEYXRhVmlld10nLFxuICAgIGZsb2F0MzJUYWcgPSAnW29iamVjdCBGbG9hdDMyQXJyYXldJyxcbiAgICBmbG9hdDY0VGFnID0gJ1tvYmplY3QgRmxvYXQ2NEFycmF5XScsXG4gICAgaW50OFRhZyA9ICdbb2JqZWN0IEludDhBcnJheV0nLFxuICAgIGludDE2VGFnID0gJ1tvYmplY3QgSW50MTZBcnJheV0nLFxuICAgIGludDMyVGFnID0gJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgIHVpbnQ4VGFnID0gJ1tvYmplY3QgVWludDhBcnJheV0nLFxuICAgIHVpbnQ4Q2xhbXBlZFRhZyA9ICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgdWludDE2VGFnID0gJ1tvYmplY3QgVWludDE2QXJyYXldJyxcbiAgICB1aW50MzJUYWcgPSAnW29iamVjdCBVaW50MzJBcnJheV0nO1xuXG4vKiogVXNlZCB0byBpZGVudGlmeSBgdG9TdHJpbmdUYWdgIHZhbHVlcyBvZiB0eXBlZCBhcnJheXMuICovXG52YXIgdHlwZWRBcnJheVRhZ3MgPSB7fTtcbnR5cGVkQXJyYXlUYWdzW2Zsb2F0MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbZmxvYXQ2NFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50OFRhZ10gPSB0eXBlZEFycmF5VGFnc1tpbnQxNlRhZ10gPVxudHlwZWRBcnJheVRhZ3NbaW50MzJUYWddID0gdHlwZWRBcnJheVRhZ3NbdWludDhUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQ4Q2xhbXBlZFRhZ10gPSB0eXBlZEFycmF5VGFnc1t1aW50MTZUYWddID1cbnR5cGVkQXJyYXlUYWdzW3VpbnQzMlRhZ10gPSB0cnVlO1xudHlwZWRBcnJheVRhZ3NbYXJnc1RhZ10gPSB0eXBlZEFycmF5VGFnc1thcnJheVRhZ10gPVxudHlwZWRBcnJheVRhZ3NbYXJyYXlCdWZmZXJUYWddID0gdHlwZWRBcnJheVRhZ3NbYm9vbFRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZGF0YVZpZXdUYWddID0gdHlwZWRBcnJheVRhZ3NbZGF0ZVRhZ10gPVxudHlwZWRBcnJheVRhZ3NbZXJyb3JUYWddID0gdHlwZWRBcnJheVRhZ3NbZnVuY1RhZ10gPVxudHlwZWRBcnJheVRhZ3NbbWFwVGFnXSA9IHR5cGVkQXJyYXlUYWdzW251bWJlclRhZ10gPVxudHlwZWRBcnJheVRhZ3Nbb2JqZWN0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3JlZ2V4cFRhZ10gPVxudHlwZWRBcnJheVRhZ3Nbc2V0VGFnXSA9IHR5cGVkQXJyYXlUYWdzW3N0cmluZ1RhZ10gPVxudHlwZWRBcnJheVRhZ3Nbd2Vha01hcFRhZ10gPSBmYWxzZTtcblxuLyoqIFVzZWQgZm9yIGJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzLiAqL1xudmFyIG9iamVjdFByb3RvID0gT2JqZWN0LnByb3RvdHlwZTtcblxuLyoqXG4gKiBVc2VkIHRvIHJlc29sdmUgdGhlXG4gKiBbYHRvU3RyaW5nVGFnYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtb2JqZWN0LnByb3RvdHlwZS50b3N0cmluZylcbiAqIG9mIHZhbHVlcy5cbiAqL1xudmFyIG9iamVjdFRvU3RyaW5nID0gb2JqZWN0UHJvdG8udG9TdHJpbmc7XG5cbi8qKlxuICogQ2hlY2tzIGlmIGB2YWx1ZWAgaXMgY2xhc3NpZmllZCBhcyBhIHR5cGVkIGFycmF5LlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMy4wLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjaGVjay5cbiAqIEByZXR1cm5zIHtib29sZWFufSBSZXR1cm5zIGB0cnVlYCBpZiBgdmFsdWVgIGlzIGNvcnJlY3RseSBjbGFzc2lmaWVkLFxuICogIGVsc2UgYGZhbHNlYC5cbiAqIEBleGFtcGxlXG4gKlxuICogXy5pc1R5cGVkQXJyYXkobmV3IFVpbnQ4QXJyYXkpO1xuICogLy8gPT4gdHJ1ZVxuICpcbiAqIF8uaXNUeXBlZEFycmF5KFtdKTtcbiAqIC8vID0+IGZhbHNlXG4gKi9cbmZ1bmN0aW9uIGlzVHlwZWRBcnJheSh2YWx1ZSkge1xuICByZXR1cm4gaXNPYmplY3RMaWtlKHZhbHVlKSAmJlxuICAgIGlzTGVuZ3RoKHZhbHVlLmxlbmd0aCkgJiYgISF0eXBlZEFycmF5VGFnc1tvYmplY3RUb1N0cmluZy5jYWxsKHZhbHVlKV07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gaXNUeXBlZEFycmF5O1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vbG9kYXNoL2lzVHlwZWRBcnJheS5qc1xuICoqIG1vZHVsZSBpZCA9IDE1NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIE1hcENhY2hlID0gcmVxdWlyZSgnLi9fTWFwQ2FjaGUnKTtcblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qKlxuICogQ3JlYXRlcyBhIGZ1bmN0aW9uIHRoYXQgbWVtb2l6ZXMgdGhlIHJlc3VsdCBvZiBgZnVuY2AuIElmIGByZXNvbHZlcmAgaXNcbiAqIHByb3ZpZGVkLCBpdCBkZXRlcm1pbmVzIHRoZSBjYWNoZSBrZXkgZm9yIHN0b3JpbmcgdGhlIHJlc3VsdCBiYXNlZCBvbiB0aGVcbiAqIGFyZ3VtZW50cyBwcm92aWRlZCB0byB0aGUgbWVtb2l6ZWQgZnVuY3Rpb24uIEJ5IGRlZmF1bHQsIHRoZSBmaXJzdCBhcmd1bWVudFxuICogcHJvdmlkZWQgdG8gdGhlIG1lbW9pemVkIGZ1bmN0aW9uIGlzIHVzZWQgYXMgdGhlIG1hcCBjYWNoZSBrZXkuIFRoZSBgZnVuY2BcbiAqIGlzIGludm9rZWQgd2l0aCB0aGUgYHRoaXNgIGJpbmRpbmcgb2YgdGhlIG1lbW9pemVkIGZ1bmN0aW9uLlxuICpcbiAqICoqTm90ZToqKiBUaGUgY2FjaGUgaXMgZXhwb3NlZCBhcyB0aGUgYGNhY2hlYCBwcm9wZXJ0eSBvbiB0aGUgbWVtb2l6ZWRcbiAqIGZ1bmN0aW9uLiBJdHMgY3JlYXRpb24gbWF5IGJlIGN1c3RvbWl6ZWQgYnkgcmVwbGFjaW5nIHRoZSBgXy5tZW1vaXplLkNhY2hlYFxuICogY29uc3RydWN0b3Igd2l0aCBvbmUgd2hvc2UgaW5zdGFuY2VzIGltcGxlbWVudCB0aGVcbiAqIFtgTWFwYF0oaHR0cDovL2VjbWEtaW50ZXJuYXRpb25hbC5vcmcvZWNtYS0yNjIvNi4wLyNzZWMtcHJvcGVydGllcy1vZi10aGUtbWFwLXByb3RvdHlwZS1vYmplY3QpXG4gKiBtZXRob2QgaW50ZXJmYWNlIG9mIGBkZWxldGVgLCBgZ2V0YCwgYGhhc2AsIGFuZCBgc2V0YC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDAuMS4wXG4gKiBAY2F0ZWdvcnkgRnVuY3Rpb25cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmMgVGhlIGZ1bmN0aW9uIHRvIGhhdmUgaXRzIG91dHB1dCBtZW1vaXplZC5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtyZXNvbHZlcl0gVGhlIGZ1bmN0aW9uIHRvIHJlc29sdmUgdGhlIGNhY2hlIGtleS5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IG1lbW9pemVkIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0ID0geyAnYSc6IDEsICdiJzogMiB9O1xuICogdmFyIG90aGVyID0geyAnYyc6IDMsICdkJzogNCB9O1xuICpcbiAqIHZhciB2YWx1ZXMgPSBfLm1lbW9pemUoXy52YWx1ZXMpO1xuICogdmFsdWVzKG9iamVjdCk7XG4gKiAvLyA9PiBbMSwgMl1cbiAqXG4gKiB2YWx1ZXMob3RoZXIpO1xuICogLy8gPT4gWzMsIDRdXG4gKlxuICogb2JqZWN0LmEgPSAyO1xuICogdmFsdWVzKG9iamVjdCk7XG4gKiAvLyA9PiBbMSwgMl1cbiAqXG4gKiAvLyBNb2RpZnkgdGhlIHJlc3VsdCBjYWNoZS5cbiAqIHZhbHVlcy5jYWNoZS5zZXQob2JqZWN0LCBbJ2EnLCAnYiddKTtcbiAqIHZhbHVlcyhvYmplY3QpO1xuICogLy8gPT4gWydhJywgJ2InXVxuICpcbiAqIC8vIFJlcGxhY2UgYF8ubWVtb2l6ZS5DYWNoZWAuXG4gKiBfLm1lbW9pemUuQ2FjaGUgPSBXZWFrTWFwO1xuICovXG5mdW5jdGlvbiBtZW1vaXplKGZ1bmMsIHJlc29sdmVyKSB7XG4gIGlmICh0eXBlb2YgZnVuYyAhPSAnZnVuY3Rpb24nIHx8IChyZXNvbHZlciAmJiB0eXBlb2YgcmVzb2x2ZXIgIT0gJ2Z1bmN0aW9uJykpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgdmFyIG1lbW9pemVkID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGFyZ3MgPSBhcmd1bWVudHMsXG4gICAgICAgIGtleSA9IHJlc29sdmVyID8gcmVzb2x2ZXIuYXBwbHkodGhpcywgYXJncykgOiBhcmdzWzBdLFxuICAgICAgICBjYWNoZSA9IG1lbW9pemVkLmNhY2hlO1xuXG4gICAgaWYgKGNhY2hlLmhhcyhrZXkpKSB7XG4gICAgICByZXR1cm4gY2FjaGUuZ2V0KGtleSk7XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBmdW5jLmFwcGx5KHRoaXMsIGFyZ3MpO1xuICAgIG1lbW9pemVkLmNhY2hlID0gY2FjaGUuc2V0KGtleSwgcmVzdWx0KTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xuICBtZW1vaXplZC5jYWNoZSA9IG5ldyAobWVtb2l6ZS5DYWNoZSB8fCBNYXBDYWNoZSk7XG4gIHJldHVybiBtZW1vaXplZDtcbn1cblxuLy8gQXNzaWduIGNhY2hlIHRvIGBfLm1lbW9pemVgLlxubWVtb2l6ZS5DYWNoZSA9IE1hcENhY2hlO1xuXG5tb2R1bGUuZXhwb3J0cyA9IG1lbW9pemU7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvbWVtb2l6ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE1NVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyoqXG4gKiBHZXRzIHRoZSB0aW1lc3RhbXAgb2YgdGhlIG51bWJlciBvZiBtaWxsaXNlY29uZHMgdGhhdCBoYXZlIGVsYXBzZWQgc2luY2VcbiAqIHRoZSBVbml4IGVwb2NoICgxIEphbnVhcnkgMTk3MCAwMDowMDowMCBVVEMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgMi40LjBcbiAqIEBjYXRlZ29yeSBEYXRlXG4gKiBAcmV0dXJucyB7bnVtYmVyfSBSZXR1cm5zIHRoZSB0aW1lc3RhbXAuXG4gKiBAZXhhbXBsZVxuICpcbiAqIF8uZGVmZXIoZnVuY3Rpb24oc3RhbXApIHtcbiAqICAgY29uc29sZS5sb2coXy5ub3coKSAtIHN0YW1wKTtcbiAqIH0sIF8ubm93KCkpO1xuICogLy8gPT4gTG9ncyB0aGUgbnVtYmVyIG9mIG1pbGxpc2Vjb25kcyBpdCB0b29rIGZvciB0aGUgZGVmZXJyZWQgaW52b2NhdGlvbi5cbiAqL1xuZnVuY3Rpb24gbm93KCkge1xuICByZXR1cm4gRGF0ZS5ub3coKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBub3c7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvbm93LmpzXG4gKiogbW9kdWxlIGlkID0gMTU2XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgYmFzZVByb3BlcnR5ID0gcmVxdWlyZSgnLi9fYmFzZVByb3BlcnR5JyksXG4gICAgYmFzZVByb3BlcnR5RGVlcCA9IHJlcXVpcmUoJy4vX2Jhc2VQcm9wZXJ0eURlZXAnKSxcbiAgICBpc0tleSA9IHJlcXVpcmUoJy4vX2lzS2V5JyksXG4gICAgdG9LZXkgPSByZXF1aXJlKCcuL190b0tleScpO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlIHZhbHVlIGF0IGBwYXRoYCBvZiBhIGdpdmVuIG9iamVjdC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDIuNC4wXG4gKiBAY2F0ZWdvcnkgVXRpbFxuICogQHBhcmFtIHtBcnJheXxzdHJpbmd9IHBhdGggVGhlIHBhdGggb2YgdGhlIHByb3BlcnR5IHRvIGdldC5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGFjY2Vzc29yIGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgb2JqZWN0cyA9IFtcbiAqICAgeyAnYSc6IHsgJ2InOiAyIH0gfSxcbiAqICAgeyAnYSc6IHsgJ2InOiAxIH0gfVxuICogXTtcbiAqXG4gKiBfLm1hcChvYmplY3RzLCBfLnByb3BlcnR5KCdhLmInKSk7XG4gKiAvLyA9PiBbMiwgMV1cbiAqXG4gKiBfLm1hcChfLnNvcnRCeShvYmplY3RzLCBfLnByb3BlcnR5KFsnYScsICdiJ10pKSwgJ2EuYicpO1xuICogLy8gPT4gWzEsIDJdXG4gKi9cbmZ1bmN0aW9uIHByb3BlcnR5KHBhdGgpIHtcbiAgcmV0dXJuIGlzS2V5KHBhdGgpID8gYmFzZVByb3BlcnR5KHRvS2V5KHBhdGgpKSA6IGJhc2VQcm9wZXJ0eURlZXAocGF0aCk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gcHJvcGVydHk7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvcHJvcGVydHkuanNcbiAqKiBtb2R1bGUgaWQgPSAxNTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBhcHBseSA9IHJlcXVpcmUoJy4vX2FwcGx5JyksXG4gICAgdG9JbnRlZ2VyID0gcmVxdWlyZSgnLi90b0ludGVnZXInKTtcblxuLyoqIFVzZWQgYXMgdGhlIGBUeXBlRXJyb3JgIG1lc3NhZ2UgZm9yIFwiRnVuY3Rpb25zXCIgbWV0aG9kcy4gKi9cbnZhciBGVU5DX0VSUk9SX1RFWFQgPSAnRXhwZWN0ZWQgYSBmdW5jdGlvbic7XG5cbi8qIEJ1aWx0LWluIG1ldGhvZCByZWZlcmVuY2VzIGZvciB0aG9zZSB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgb3RoZXIgYGxvZGFzaGAgbWV0aG9kcy4gKi9cbnZhciBuYXRpdmVNYXggPSBNYXRoLm1heDtcblxuLyoqXG4gKiBDcmVhdGVzIGEgZnVuY3Rpb24gdGhhdCBpbnZva2VzIGBmdW5jYCB3aXRoIHRoZSBgdGhpc2AgYmluZGluZyBvZiB0aGVcbiAqIGNyZWF0ZWQgZnVuY3Rpb24gYW5kIGFyZ3VtZW50cyBmcm9tIGBzdGFydGAgYW5kIGJleW9uZCBwcm92aWRlZCBhc1xuICogYW4gYXJyYXkuXG4gKlxuICogKipOb3RlOioqIFRoaXMgbWV0aG9kIGlzIGJhc2VkIG9uIHRoZVxuICogW3Jlc3QgcGFyYW1ldGVyXShodHRwczovL21kbi5pby9yZXN0X3BhcmFtZXRlcnMpLlxuICpcbiAqIEBzdGF0aWNcbiAqIEBtZW1iZXJPZiBfXG4gKiBAc2luY2UgNC4wLjBcbiAqIEBjYXRlZ29yeSBGdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuYyBUaGUgZnVuY3Rpb24gdG8gYXBwbHkgYSByZXN0IHBhcmFtZXRlciB0by5cbiAqIEBwYXJhbSB7bnVtYmVyfSBbc3RhcnQ9ZnVuYy5sZW5ndGgtMV0gVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSByZXN0IHBhcmFtZXRlci5cbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0gUmV0dXJucyB0aGUgbmV3IGZ1bmN0aW9uLlxuICogQGV4YW1wbGVcbiAqXG4gKiB2YXIgc2F5ID0gXy5yZXN0KGZ1bmN0aW9uKHdoYXQsIG5hbWVzKSB7XG4gKiAgIHJldHVybiB3aGF0ICsgJyAnICsgXy5pbml0aWFsKG5hbWVzKS5qb2luKCcsICcpICtcbiAqICAgICAoXy5zaXplKG5hbWVzKSA+IDEgPyAnLCAmICcgOiAnJykgKyBfLmxhc3QobmFtZXMpO1xuICogfSk7XG4gKlxuICogc2F5KCdoZWxsbycsICdmcmVkJywgJ2Jhcm5leScsICdwZWJibGVzJyk7XG4gKiAvLyA9PiAnaGVsbG8gZnJlZCwgYmFybmV5LCAmIHBlYmJsZXMnXG4gKi9cbmZ1bmN0aW9uIHJlc3QoZnVuYywgc3RhcnQpIHtcbiAgaWYgKHR5cGVvZiBmdW5jICE9ICdmdW5jdGlvbicpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKEZVTkNfRVJST1JfVEVYVCk7XG4gIH1cbiAgc3RhcnQgPSBuYXRpdmVNYXgoc3RhcnQgPT09IHVuZGVmaW5lZCA/IChmdW5jLmxlbmd0aCAtIDEpIDogdG9JbnRlZ2VyKHN0YXJ0KSwgMCk7XG4gIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICB2YXIgYXJncyA9IGFyZ3VtZW50cyxcbiAgICAgICAgaW5kZXggPSAtMSxcbiAgICAgICAgbGVuZ3RoID0gbmF0aXZlTWF4KGFyZ3MubGVuZ3RoIC0gc3RhcnQsIDApLFxuICAgICAgICBhcnJheSA9IEFycmF5KGxlbmd0aCk7XG5cbiAgICB3aGlsZSAoKytpbmRleCA8IGxlbmd0aCkge1xuICAgICAgYXJyYXlbaW5kZXhdID0gYXJnc1tzdGFydCArIGluZGV4XTtcbiAgICB9XG4gICAgc3dpdGNoIChzdGFydCkge1xuICAgICAgY2FzZSAwOiByZXR1cm4gZnVuYy5jYWxsKHRoaXMsIGFycmF5KTtcbiAgICAgIGNhc2UgMTogcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCBhcmdzWzBdLCBhcnJheSk7XG4gICAgICBjYXNlIDI6IHJldHVybiBmdW5jLmNhbGwodGhpcywgYXJnc1swXSwgYXJnc1sxXSwgYXJyYXkpO1xuICAgIH1cbiAgICB2YXIgb3RoZXJBcmdzID0gQXJyYXkoc3RhcnQgKyAxKTtcbiAgICBpbmRleCA9IC0xO1xuICAgIHdoaWxlICgrK2luZGV4IDwgc3RhcnQpIHtcbiAgICAgIG90aGVyQXJnc1tpbmRleF0gPSBhcmdzW2luZGV4XTtcbiAgICB9XG4gICAgb3RoZXJBcmdzW3N0YXJ0XSA9IGFycmF5O1xuICAgIHJldHVybiBhcHBseShmdW5jLCB0aGlzLCBvdGhlckFyZ3MpO1xuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHJlc3Q7XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9sb2Rhc2gvcmVzdC5qc1xuICoqIG1vZHVsZSBpZCA9IDE1OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIHRvTnVtYmVyID0gcmVxdWlyZSgnLi90b051bWJlcicpO1xuXG4vKiogVXNlZCBhcyByZWZlcmVuY2VzIGZvciB2YXJpb3VzIGBOdW1iZXJgIGNvbnN0YW50cy4gKi9cbnZhciBJTkZJTklUWSA9IDEgLyAwLFxuICAgIE1BWF9JTlRFR0VSID0gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDg7XG5cbi8qKlxuICogQ29udmVydHMgYHZhbHVlYCB0byBhIGZpbml0ZSBudW1iZXIuXG4gKlxuICogQHN0YXRpY1xuICogQG1lbWJlck9mIF9cbiAqIEBzaW5jZSA0LjEyLjBcbiAqIEBjYXRlZ29yeSBMYW5nXG4gKiBAcGFyYW0geyp9IHZhbHVlIFRoZSB2YWx1ZSB0byBjb252ZXJ0LlxuICogQHJldHVybnMge251bWJlcn0gUmV0dXJucyB0aGUgY29udmVydGVkIG51bWJlci5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b0Zpbml0ZSgzLjIpO1xuICogLy8gPT4gMy4yXG4gKlxuICogXy50b0Zpbml0ZShOdW1iZXIuTUlOX1ZBTFVFKTtcbiAqIC8vID0+IDVlLTMyNFxuICpcbiAqIF8udG9GaW5pdGUoSW5maW5pdHkpO1xuICogLy8gPT4gMS43OTc2OTMxMzQ4NjIzMTU3ZSszMDhcbiAqXG4gKiBfLnRvRmluaXRlKCczLjInKTtcbiAqIC8vID0+IDMuMlxuICovXG5mdW5jdGlvbiB0b0Zpbml0ZSh2YWx1ZSkge1xuICBpZiAoIXZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlID09PSAwID8gdmFsdWUgOiAwO1xuICB9XG4gIHZhbHVlID0gdG9OdW1iZXIodmFsdWUpO1xuICBpZiAodmFsdWUgPT09IElORklOSVRZIHx8IHZhbHVlID09PSAtSU5GSU5JVFkpIHtcbiAgICB2YXIgc2lnbiA9ICh2YWx1ZSA8IDAgPyAtMSA6IDEpO1xuICAgIHJldHVybiBzaWduICogTUFYX0lOVEVHRVI7XG4gIH1cbiAgcmV0dXJuIHZhbHVlID09PSB2YWx1ZSA/IHZhbHVlIDogMDtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b0Zpbml0ZTtcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC90b0Zpbml0ZS5qc1xuICoqIG1vZHVsZSBpZCA9IDE1OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIGJhc2VUb1N0cmluZyA9IHJlcXVpcmUoJy4vX2Jhc2VUb1N0cmluZycpO1xuXG4vKipcbiAqIENvbnZlcnRzIGB2YWx1ZWAgdG8gYSBzdHJpbmcuIEFuIGVtcHR5IHN0cmluZyBpcyByZXR1cm5lZCBmb3IgYG51bGxgXG4gKiBhbmQgYHVuZGVmaW5lZGAgdmFsdWVzLiBUaGUgc2lnbiBvZiBgLTBgIGlzIHByZXNlcnZlZC5cbiAqXG4gKiBAc3RhdGljXG4gKiBAbWVtYmVyT2YgX1xuICogQHNpbmNlIDQuMC4wXG4gKiBAY2F0ZWdvcnkgTGFuZ1xuICogQHBhcmFtIHsqfSB2YWx1ZSBUaGUgdmFsdWUgdG8gcHJvY2Vzcy5cbiAqIEByZXR1cm5zIHtzdHJpbmd9IFJldHVybnMgdGhlIHN0cmluZy5cbiAqIEBleGFtcGxlXG4gKlxuICogXy50b1N0cmluZyhudWxsKTtcbiAqIC8vID0+ICcnXG4gKlxuICogXy50b1N0cmluZygtMCk7XG4gKiAvLyA9PiAnLTAnXG4gKlxuICogXy50b1N0cmluZyhbMSwgMiwgM10pO1xuICogLy8gPT4gJzEsMiwzJ1xuICovXG5mdW5jdGlvbiB0b1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogYmFzZVRvU3RyaW5nKHZhbHVlKTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSB0b1N0cmluZztcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2xvZGFzaC90b1N0cmluZy5qc1xuICoqIG1vZHVsZSBpZCA9IDE2MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLWNvcmUuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxudmFyIF9zZWxmID0gKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnKVxuXHQ/IHdpbmRvdyAgIC8vIGlmIGluIGJyb3dzZXJcblx0OiAoXG5cdFx0KHR5cGVvZiBXb3JrZXJHbG9iYWxTY29wZSAhPT0gJ3VuZGVmaW5lZCcgJiYgc2VsZiBpbnN0YW5jZW9mIFdvcmtlckdsb2JhbFNjb3BlKVxuXHRcdD8gc2VsZiAvLyBpZiBpbiB3b3JrZXJcblx0XHQ6IHt9ICAgLy8gaWYgaW4gbm9kZSBqc1xuXHQpO1xuXG4vKipcbiAqIFByaXNtOiBMaWdodHdlaWdodCwgcm9idXN0LCBlbGVnYW50IHN5bnRheCBoaWdobGlnaHRpbmdcbiAqIE1JVCBsaWNlbnNlIGh0dHA6Ly93d3cub3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvbWl0LWxpY2Vuc2UucGhwL1xuICogQGF1dGhvciBMZWEgVmVyb3UgaHR0cDovL2xlYS52ZXJvdS5tZVxuICovXG5cbnZhciBQcmlzbSA9IChmdW5jdGlvbigpe1xuXG4vLyBQcml2YXRlIGhlbHBlciB2YXJzXG52YXIgbGFuZyA9IC9cXGJsYW5nKD86dWFnZSk/LShcXHcrKVxcYi9pO1xudmFyIHVuaXF1ZUlkID0gMDtcblxudmFyIF8gPSBfc2VsZi5QcmlzbSA9IHtcblx0dXRpbDoge1xuXHRcdGVuY29kZTogZnVuY3Rpb24gKHRva2Vucykge1xuXHRcdFx0aWYgKHRva2VucyBpbnN0YW5jZW9mIFRva2VuKSB7XG5cdFx0XHRcdHJldHVybiBuZXcgVG9rZW4odG9rZW5zLnR5cGUsIF8udXRpbC5lbmNvZGUodG9rZW5zLmNvbnRlbnQpLCB0b2tlbnMuYWxpYXMpO1xuXHRcdFx0fSBlbHNlIGlmIChfLnV0aWwudHlwZSh0b2tlbnMpID09PSAnQXJyYXknKSB7XG5cdFx0XHRcdHJldHVybiB0b2tlbnMubWFwKF8udXRpbC5lbmNvZGUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRva2Vucy5yZXBsYWNlKC8mL2csICcmYW1wOycpLnJlcGxhY2UoLzwvZywgJyZsdDsnKS5yZXBsYWNlKC9cXHUwMGEwL2csICcgJyk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdHR5cGU6IGZ1bmN0aW9uIChvKSB7XG5cdFx0XHRyZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLm1hdGNoKC9cXFtvYmplY3QgKFxcdyspXFxdLylbMV07XG5cdFx0fSxcblxuXHRcdG9iaklkOiBmdW5jdGlvbiAob2JqKSB7XG5cdFx0XHRpZiAoIW9ialsnX19pZCddKSB7XG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShvYmosICdfX2lkJywgeyB2YWx1ZTogKyt1bmlxdWVJZCB9KTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBvYmpbJ19faWQnXTtcblx0XHR9LFxuXG5cdFx0Ly8gRGVlcCBjbG9uZSBhIGxhbmd1YWdlIGRlZmluaXRpb24gKGUuZy4gdG8gZXh0ZW5kIGl0KVxuXHRcdGNsb25lOiBmdW5jdGlvbiAobykge1xuXHRcdFx0dmFyIHR5cGUgPSBfLnV0aWwudHlwZShvKTtcblxuXHRcdFx0c3dpdGNoICh0eXBlKSB7XG5cdFx0XHRcdGNhc2UgJ09iamVjdCc6XG5cdFx0XHRcdFx0dmFyIGNsb25lID0ge307XG5cblx0XHRcdFx0XHRmb3IgKHZhciBrZXkgaW4gbykge1xuXHRcdFx0XHRcdFx0aWYgKG8uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuXHRcdFx0XHRcdFx0XHRjbG9uZVtrZXldID0gXy51dGlsLmNsb25lKG9ba2V5XSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIGNsb25lO1xuXG5cdFx0XHRcdGNhc2UgJ0FycmF5Jzpcblx0XHRcdFx0XHQvLyBDaGVjayBmb3IgZXhpc3RlbmNlIGZvciBJRThcblx0XHRcdFx0XHRyZXR1cm4gby5tYXAgJiYgby5tYXAoZnVuY3Rpb24odikgeyByZXR1cm4gXy51dGlsLmNsb25lKHYpOyB9KTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG87XG5cdFx0fVxuXHR9LFxuXG5cdGxhbmd1YWdlczoge1xuXHRcdGV4dGVuZDogZnVuY3Rpb24gKGlkLCByZWRlZikge1xuXHRcdFx0dmFyIGxhbmcgPSBfLnV0aWwuY2xvbmUoXy5sYW5ndWFnZXNbaWRdKTtcblxuXHRcdFx0Zm9yICh2YXIga2V5IGluIHJlZGVmKSB7XG5cdFx0XHRcdGxhbmdba2V5XSA9IHJlZGVmW2tleV07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBsYW5nO1xuXHRcdH0sXG5cblx0XHQvKipcblx0XHQgKiBJbnNlcnQgYSB0b2tlbiBiZWZvcmUgYW5vdGhlciB0b2tlbiBpbiBhIGxhbmd1YWdlIGxpdGVyYWxcblx0XHQgKiBBcyB0aGlzIG5lZWRzIHRvIHJlY3JlYXRlIHRoZSBvYmplY3QgKHdlIGNhbm5vdCBhY3R1YWxseSBpbnNlcnQgYmVmb3JlIGtleXMgaW4gb2JqZWN0IGxpdGVyYWxzKSxcblx0XHQgKiB3ZSBjYW5ub3QganVzdCBwcm92aWRlIGFuIG9iamVjdCwgd2UgbmVlZCBhbm9iamVjdCBhbmQgYSBrZXkuXG5cdFx0ICogQHBhcmFtIGluc2lkZSBUaGUga2V5IChvciBsYW5ndWFnZSBpZCkgb2YgdGhlIHBhcmVudFxuXHRcdCAqIEBwYXJhbSBiZWZvcmUgVGhlIGtleSB0byBpbnNlcnQgYmVmb3JlLiBJZiBub3QgcHJvdmlkZWQsIHRoZSBmdW5jdGlvbiBhcHBlbmRzIGluc3RlYWQuXG5cdFx0ICogQHBhcmFtIGluc2VydCBPYmplY3Qgd2l0aCB0aGUga2V5L3ZhbHVlIHBhaXJzIHRvIGluc2VydFxuXHRcdCAqIEBwYXJhbSByb290IFRoZSBvYmplY3QgdGhhdCBjb250YWlucyBgaW5zaWRlYC4gSWYgZXF1YWwgdG8gUHJpc20ubGFuZ3VhZ2VzLCBpdCBjYW4gYmUgb21pdHRlZC5cblx0XHQgKi9cblx0XHRpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uIChpbnNpZGUsIGJlZm9yZSwgaW5zZXJ0LCByb290KSB7XG5cdFx0XHRyb290ID0gcm9vdCB8fCBfLmxhbmd1YWdlcztcblx0XHRcdHZhciBncmFtbWFyID0gcm9vdFtpbnNpZGVdO1xuXG5cdFx0XHRpZiAoYXJndW1lbnRzLmxlbmd0aCA9PSAyKSB7XG5cdFx0XHRcdGluc2VydCA9IGFyZ3VtZW50c1sxXTtcblxuXHRcdFx0XHRmb3IgKHZhciBuZXdUb2tlbiBpbiBpbnNlcnQpIHtcblx0XHRcdFx0XHRpZiAoaW5zZXJ0Lmhhc093blByb3BlcnR5KG5ld1Rva2VuKSkge1xuXHRcdFx0XHRcdFx0Z3JhbW1hcltuZXdUb2tlbl0gPSBpbnNlcnRbbmV3VG9rZW5dO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBncmFtbWFyO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgcmV0ID0ge307XG5cblx0XHRcdGZvciAodmFyIHRva2VuIGluIGdyYW1tYXIpIHtcblxuXHRcdFx0XHRpZiAoZ3JhbW1hci5oYXNPd25Qcm9wZXJ0eSh0b2tlbikpIHtcblxuXHRcdFx0XHRcdGlmICh0b2tlbiA9PSBiZWZvcmUpIHtcblxuXHRcdFx0XHRcdFx0Zm9yICh2YXIgbmV3VG9rZW4gaW4gaW5zZXJ0KSB7XG5cblx0XHRcdFx0XHRcdFx0aWYgKGluc2VydC5oYXNPd25Qcm9wZXJ0eShuZXdUb2tlbikpIHtcblx0XHRcdFx0XHRcdFx0XHRyZXRbbmV3VG9rZW5dID0gaW5zZXJ0W25ld1Rva2VuXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldFt0b2tlbl0gPSBncmFtbWFyW3Rva2VuXTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBVcGRhdGUgcmVmZXJlbmNlcyBpbiBvdGhlciBsYW5ndWFnZSBkZWZpbml0aW9uc1xuXHRcdFx0Xy5sYW5ndWFnZXMuREZTKF8ubGFuZ3VhZ2VzLCBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG5cdFx0XHRcdGlmICh2YWx1ZSA9PT0gcm9vdFtpbnNpZGVdICYmIGtleSAhPSBpbnNpZGUpIHtcblx0XHRcdFx0XHR0aGlzW2tleV0gPSByZXQ7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHRyZXR1cm4gcm9vdFtpbnNpZGVdID0gcmV0O1xuXHRcdH0sXG5cblx0XHQvLyBUcmF2ZXJzZSBhIGxhbmd1YWdlIGRlZmluaXRpb24gd2l0aCBEZXB0aCBGaXJzdCBTZWFyY2hcblx0XHRERlM6IGZ1bmN0aW9uKG8sIGNhbGxiYWNrLCB0eXBlLCB2aXNpdGVkKSB7XG5cdFx0XHR2aXNpdGVkID0gdmlzaXRlZCB8fCB7fTtcblx0XHRcdGZvciAodmFyIGkgaW4gbykge1xuXHRcdFx0XHRpZiAoby5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0XHRcdGNhbGxiYWNrLmNhbGwobywgaSwgb1tpXSwgdHlwZSB8fCBpKTtcblxuXHRcdFx0XHRcdGlmIChfLnV0aWwudHlwZShvW2ldKSA9PT0gJ09iamVjdCcgJiYgIXZpc2l0ZWRbXy51dGlsLm9iaklkKG9baV0pXSkge1xuXHRcdFx0XHRcdFx0dmlzaXRlZFtfLnV0aWwub2JqSWQob1tpXSldID0gdHJ1ZTtcblx0XHRcdFx0XHRcdF8ubGFuZ3VhZ2VzLkRGUyhvW2ldLCBjYWxsYmFjaywgbnVsbCwgdmlzaXRlZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGVsc2UgaWYgKF8udXRpbC50eXBlKG9baV0pID09PSAnQXJyYXknICYmICF2aXNpdGVkW18udXRpbC5vYmpJZChvW2ldKV0pIHtcblx0XHRcdFx0XHRcdHZpc2l0ZWRbXy51dGlsLm9iaklkKG9baV0pXSA9IHRydWU7XG5cdFx0XHRcdFx0XHRfLmxhbmd1YWdlcy5ERlMob1tpXSwgY2FsbGJhY2ssIGksIHZpc2l0ZWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblx0cGx1Z2luczoge30sXG5cblx0aGlnaGxpZ2h0QWxsOiBmdW5jdGlvbihhc3luYywgY2FsbGJhY2spIHtcblx0XHR2YXIgZW52ID0ge1xuXHRcdFx0Y2FsbGJhY2s6IGNhbGxiYWNrLFxuXHRcdFx0c2VsZWN0b3I6ICdjb2RlW2NsYXNzKj1cImxhbmd1YWdlLVwiXSwgW2NsYXNzKj1cImxhbmd1YWdlLVwiXSBjb2RlLCBjb2RlW2NsYXNzKj1cImxhbmctXCJdLCBbY2xhc3MqPVwibGFuZy1cIl0gY29kZSdcblx0XHR9O1xuXG5cdFx0Xy5ob29rcy5ydW4oXCJiZWZvcmUtaGlnaGxpZ2h0YWxsXCIsIGVudik7XG5cblx0XHR2YXIgZWxlbWVudHMgPSBlbnYuZWxlbWVudHMgfHwgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChlbnYuc2VsZWN0b3IpO1xuXG5cdFx0Zm9yICh2YXIgaT0wLCBlbGVtZW50OyBlbGVtZW50ID0gZWxlbWVudHNbaSsrXTspIHtcblx0XHRcdF8uaGlnaGxpZ2h0RWxlbWVudChlbGVtZW50LCBhc3luYyA9PT0gdHJ1ZSwgZW52LmNhbGxiYWNrKTtcblx0XHR9XG5cdH0sXG5cblx0aGlnaGxpZ2h0RWxlbWVudDogZnVuY3Rpb24oZWxlbWVudCwgYXN5bmMsIGNhbGxiYWNrKSB7XG5cdFx0Ly8gRmluZCBsYW5ndWFnZVxuXHRcdHZhciBsYW5ndWFnZSwgZ3JhbW1hciwgcGFyZW50ID0gZWxlbWVudDtcblxuXHRcdHdoaWxlIChwYXJlbnQgJiYgIWxhbmcudGVzdChwYXJlbnQuY2xhc3NOYW1lKSkge1xuXHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cdFx0fVxuXG5cdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0bGFuZ3VhZ2UgPSAocGFyZW50LmNsYXNzTmFtZS5tYXRjaChsYW5nKSB8fCBbLCcnXSlbMV0udG9Mb3dlckNhc2UoKTtcblx0XHRcdGdyYW1tYXIgPSBfLmxhbmd1YWdlc1tsYW5ndWFnZV07XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IGxhbmd1YWdlIG9uIHRoZSBlbGVtZW50LCBpZiBub3QgcHJlc2VudFxuXHRcdGVsZW1lbnQuY2xhc3NOYW1lID0gZWxlbWVudC5jbGFzc05hbWUucmVwbGFjZShsYW5nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnICcpICsgJyBsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cblx0XHQvLyBTZXQgbGFuZ3VhZ2Ugb24gdGhlIHBhcmVudCwgZm9yIHN0eWxpbmdcblx0XHRwYXJlbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG5cblx0XHRpZiAoL3ByZS9pLnRlc3QocGFyZW50Lm5vZGVOYW1lKSkge1xuXHRcdFx0cGFyZW50LmNsYXNzTmFtZSA9IHBhcmVudC5jbGFzc05hbWUucmVwbGFjZShsYW5nLCAnJykucmVwbGFjZSgvXFxzKy9nLCAnICcpICsgJyBsYW5ndWFnZS0nICsgbGFuZ3VhZ2U7XG5cdFx0fVxuXG5cdFx0dmFyIGNvZGUgPSBlbGVtZW50LnRleHRDb250ZW50O1xuXG5cdFx0dmFyIGVudiA9IHtcblx0XHRcdGVsZW1lbnQ6IGVsZW1lbnQsXG5cdFx0XHRsYW5ndWFnZTogbGFuZ3VhZ2UsXG5cdFx0XHRncmFtbWFyOiBncmFtbWFyLFxuXHRcdFx0Y29kZTogY29kZVxuXHRcdH07XG5cblx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLXNhbml0eS1jaGVjaycsIGVudik7XG5cblx0XHRpZiAoIWVudi5jb2RlIHx8ICFlbnYuZ3JhbW1hcikge1xuXHRcdFx0Xy5ob29rcy5ydW4oJ2NvbXBsZXRlJywgZW52KTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRfLmhvb2tzLnJ1bignYmVmb3JlLWhpZ2hsaWdodCcsIGVudik7XG5cblx0XHRpZiAoYXN5bmMgJiYgX3NlbGYuV29ya2VyKSB7XG5cdFx0XHR2YXIgd29ya2VyID0gbmV3IFdvcmtlcihfLmZpbGVuYW1lKTtcblxuXHRcdFx0d29ya2VyLm9ubWVzc2FnZSA9IGZ1bmN0aW9uKGV2dCkge1xuXHRcdFx0XHRlbnYuaGlnaGxpZ2h0ZWRDb2RlID0gZXZ0LmRhdGE7XG5cblx0XHRcdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1pbnNlcnQnLCBlbnYpO1xuXG5cdFx0XHRcdGVudi5lbGVtZW50LmlubmVySFRNTCA9IGVudi5oaWdobGlnaHRlZENvZGU7XG5cblx0XHRcdFx0Y2FsbGJhY2sgJiYgY2FsbGJhY2suY2FsbChlbnYuZWxlbWVudCk7XG5cdFx0XHRcdF8uaG9va3MucnVuKCdhZnRlci1oaWdobGlnaHQnLCBlbnYpO1xuXHRcdFx0XHRfLmhvb2tzLnJ1bignY29tcGxldGUnLCBlbnYpO1xuXHRcdFx0fTtcblxuXHRcdFx0d29ya2VyLnBvc3RNZXNzYWdlKEpTT04uc3RyaW5naWZ5KHtcblx0XHRcdFx0bGFuZ3VhZ2U6IGVudi5sYW5ndWFnZSxcblx0XHRcdFx0Y29kZTogZW52LmNvZGUsXG5cdFx0XHRcdGltbWVkaWF0ZUNsb3NlOiB0cnVlXG5cdFx0XHR9KSk7XG5cdFx0fVxuXHRcdGVsc2Uge1xuXHRcdFx0ZW52LmhpZ2hsaWdodGVkQ29kZSA9IF8uaGlnaGxpZ2h0KGVudi5jb2RlLCBlbnYuZ3JhbW1hciwgZW52Lmxhbmd1YWdlKTtcblxuXHRcdFx0Xy5ob29rcy5ydW4oJ2JlZm9yZS1pbnNlcnQnLCBlbnYpO1xuXG5cdFx0XHRlbnYuZWxlbWVudC5pbm5lckhUTUwgPSBlbnYuaGlnaGxpZ2h0ZWRDb2RlO1xuXG5cdFx0XHRjYWxsYmFjayAmJiBjYWxsYmFjay5jYWxsKGVsZW1lbnQpO1xuXG5cdFx0XHRfLmhvb2tzLnJ1bignYWZ0ZXItaGlnaGxpZ2h0JywgZW52KTtcblx0XHRcdF8uaG9va3MucnVuKCdjb21wbGV0ZScsIGVudik7XG5cdFx0fVxuXHR9LFxuXG5cdGhpZ2hsaWdodDogZnVuY3Rpb24gKHRleHQsIGdyYW1tYXIsIGxhbmd1YWdlKSB7XG5cdFx0dmFyIHRva2VucyA9IF8udG9rZW5pemUodGV4dCwgZ3JhbW1hcik7XG5cdFx0cmV0dXJuIFRva2VuLnN0cmluZ2lmeShfLnV0aWwuZW5jb2RlKHRva2VucyksIGxhbmd1YWdlKTtcblx0fSxcblxuXHR0b2tlbml6ZTogZnVuY3Rpb24odGV4dCwgZ3JhbW1hciwgbGFuZ3VhZ2UpIHtcblx0XHR2YXIgVG9rZW4gPSBfLlRva2VuO1xuXG5cdFx0dmFyIHN0cmFyciA9IFt0ZXh0XTtcblxuXHRcdHZhciByZXN0ID0gZ3JhbW1hci5yZXN0O1xuXG5cdFx0aWYgKHJlc3QpIHtcblx0XHRcdGZvciAodmFyIHRva2VuIGluIHJlc3QpIHtcblx0XHRcdFx0Z3JhbW1hclt0b2tlbl0gPSByZXN0W3Rva2VuXTtcblx0XHRcdH1cblxuXHRcdFx0ZGVsZXRlIGdyYW1tYXIucmVzdDtcblx0XHR9XG5cblx0XHR0b2tlbmxvb3A6IGZvciAodmFyIHRva2VuIGluIGdyYW1tYXIpIHtcblx0XHRcdGlmKCFncmFtbWFyLmhhc093blByb3BlcnR5KHRva2VuKSB8fCAhZ3JhbW1hclt0b2tlbl0pIHtcblx0XHRcdFx0Y29udGludWU7XG5cdFx0XHR9XG5cblx0XHRcdHZhciBwYXR0ZXJucyA9IGdyYW1tYXJbdG9rZW5dO1xuXHRcdFx0cGF0dGVybnMgPSAoXy51dGlsLnR5cGUocGF0dGVybnMpID09PSBcIkFycmF5XCIpID8gcGF0dGVybnMgOiBbcGF0dGVybnNdO1xuXG5cdFx0XHRmb3IgKHZhciBqID0gMDsgaiA8IHBhdHRlcm5zLmxlbmd0aDsgKytqKSB7XG5cdFx0XHRcdHZhciBwYXR0ZXJuID0gcGF0dGVybnNbal0sXG5cdFx0XHRcdFx0aW5zaWRlID0gcGF0dGVybi5pbnNpZGUsXG5cdFx0XHRcdFx0bG9va2JlaGluZCA9ICEhcGF0dGVybi5sb29rYmVoaW5kLFxuXHRcdFx0XHRcdGdyZWVkeSA9ICEhcGF0dGVybi5ncmVlZHksXG5cdFx0XHRcdFx0bG9va2JlaGluZExlbmd0aCA9IDAsXG5cdFx0XHRcdFx0YWxpYXMgPSBwYXR0ZXJuLmFsaWFzO1xuXG5cdFx0XHRcdHBhdHRlcm4gPSBwYXR0ZXJuLnBhdHRlcm4gfHwgcGF0dGVybjtcblxuXHRcdFx0XHRmb3IgKHZhciBpPTA7IGk8c3RyYXJyLmxlbmd0aDsgaSsrKSB7IC8vIERvbuKAmXQgY2FjaGUgbGVuZ3RoIGFzIGl0IGNoYW5nZXMgZHVyaW5nIHRoZSBsb29wXG5cblx0XHRcdFx0XHR2YXIgc3RyID0gc3RyYXJyW2ldO1xuXG5cdFx0XHRcdFx0aWYgKHN0cmFyci5sZW5ndGggPiB0ZXh0Lmxlbmd0aCkge1xuXHRcdFx0XHRcdFx0Ly8gU29tZXRoaW5nIHdlbnQgdGVycmlibHkgd3JvbmcsIEFCT1JULCBBQk9SVCFcblx0XHRcdFx0XHRcdGJyZWFrIHRva2VubG9vcDtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoc3RyIGluc3RhbmNlb2YgVG9rZW4pIHtcblx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHBhdHRlcm4ubGFzdEluZGV4ID0gMDtcblxuXHRcdFx0XHRcdHZhciBtYXRjaCA9IHBhdHRlcm4uZXhlYyhzdHIpLFxuXHRcdFx0XHRcdCAgICBkZWxOdW0gPSAxO1xuXG5cdFx0XHRcdFx0Ly8gR3JlZWR5IHBhdHRlcm5zIGNhbiBvdmVycmlkZS9yZW1vdmUgdXAgdG8gdHdvIHByZXZpb3VzbHkgbWF0Y2hlZCB0b2tlbnNcblx0XHRcdFx0XHRpZiAoIW1hdGNoICYmIGdyZWVkeSAmJiBpICE9IHN0cmFyci5sZW5ndGggLSAxKSB7XG5cdFx0XHRcdFx0XHQvLyBSZWNvbnN0cnVjdCB0aGUgb3JpZ2luYWwgdGV4dCB1c2luZyB0aGUgbmV4dCB0d28gdG9rZW5zXG5cdFx0XHRcdFx0XHR2YXIgbmV4dFRva2VuID0gc3RyYXJyW2kgKyAxXS5tYXRjaGVkU3RyIHx8IHN0cmFycltpICsgMV0sXG5cdFx0XHRcdFx0XHQgICAgY29tYlN0ciA9IHN0ciArIG5leHRUb2tlbjtcblxuXHRcdFx0XHRcdFx0aWYgKGkgPCBzdHJhcnIubGVuZ3RoIC0gMikge1xuXHRcdFx0XHRcdFx0XHRjb21iU3RyICs9IHN0cmFycltpICsgMl0ubWF0Y2hlZFN0ciB8fCBzdHJhcnJbaSArIDJdO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBUcnkgdGhlIHBhdHRlcm4gYWdhaW4gb24gdGhlIHJlY29uc3RydWN0ZWQgdGV4dFxuXHRcdFx0XHRcdFx0cGF0dGVybi5sYXN0SW5kZXggPSAwO1xuXHRcdFx0XHRcdFx0bWF0Y2ggPSBwYXR0ZXJuLmV4ZWMoY29tYlN0cik7XG5cdFx0XHRcdFx0XHRpZiAoIW1hdGNoKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR2YXIgZnJvbSA9IG1hdGNoLmluZGV4ICsgKGxvb2tiZWhpbmQgPyBtYXRjaFsxXS5sZW5ndGggOiAwKTtcblx0XHRcdFx0XHRcdC8vIFRvIGJlIGEgdmFsaWQgY2FuZGlkYXRlLCB0aGUgbmV3IG1hdGNoIGhhcyB0byBzdGFydCBpbnNpZGUgb2Ygc3RyXG5cdFx0XHRcdFx0XHRpZiAoZnJvbSA+PSBzdHIubGVuZ3RoKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dmFyIHRvID0gbWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgsXG5cdFx0XHRcdFx0XHQgICAgbGVuID0gc3RyLmxlbmd0aCArIG5leHRUb2tlbi5sZW5ndGg7XG5cblx0XHRcdFx0XHRcdC8vIE51bWJlciBvZiB0b2tlbnMgdG8gZGVsZXRlIGFuZCByZXBsYWNlIHdpdGggdGhlIG5ldyBtYXRjaFxuXHRcdFx0XHRcdFx0ZGVsTnVtID0gMztcblxuXHRcdFx0XHRcdFx0aWYgKHRvIDw9IGxlbikge1xuXHRcdFx0XHRcdFx0XHRpZiAoc3RyYXJyW2kgKyAxXS5ncmVlZHkpIHtcblx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRkZWxOdW0gPSAyO1xuXHRcdFx0XHRcdFx0XHRjb21iU3RyID0gY29tYlN0ci5zbGljZSgwLCBsZW4pO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0c3RyID0gY29tYlN0cjtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoIW1hdGNoKSB7XG5cdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZihsb29rYmVoaW5kKSB7XG5cdFx0XHRcdFx0XHRsb29rYmVoaW5kTGVuZ3RoID0gbWF0Y2hbMV0ubGVuZ3RoO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciBmcm9tID0gbWF0Y2guaW5kZXggKyBsb29rYmVoaW5kTGVuZ3RoLFxuXHRcdFx0XHRcdCAgICBtYXRjaCA9IG1hdGNoWzBdLnNsaWNlKGxvb2tiZWhpbmRMZW5ndGgpLFxuXHRcdFx0XHRcdCAgICB0byA9IGZyb20gKyBtYXRjaC5sZW5ndGgsXG5cdFx0XHRcdFx0ICAgIGJlZm9yZSA9IHN0ci5zbGljZSgwLCBmcm9tKSxcblx0XHRcdFx0XHQgICAgYWZ0ZXIgPSBzdHIuc2xpY2UodG8pO1xuXG5cdFx0XHRcdFx0dmFyIGFyZ3MgPSBbaSwgZGVsTnVtXTtcblxuXHRcdFx0XHRcdGlmIChiZWZvcmUpIHtcblx0XHRcdFx0XHRcdGFyZ3MucHVzaChiZWZvcmUpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHZhciB3cmFwcGVkID0gbmV3IFRva2VuKHRva2VuLCBpbnNpZGU/IF8udG9rZW5pemUobWF0Y2gsIGluc2lkZSkgOiBtYXRjaCwgYWxpYXMsIG1hdGNoLCBncmVlZHkpO1xuXG5cdFx0XHRcdFx0YXJncy5wdXNoKHdyYXBwZWQpO1xuXG5cdFx0XHRcdFx0aWYgKGFmdGVyKSB7XG5cdFx0XHRcdFx0XHRhcmdzLnB1c2goYWZ0ZXIpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdEFycmF5LnByb3RvdHlwZS5zcGxpY2UuYXBwbHkoc3RyYXJyLCBhcmdzKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBzdHJhcnI7XG5cdH0sXG5cblx0aG9va3M6IHtcblx0XHRhbGw6IHt9LFxuXG5cdFx0YWRkOiBmdW5jdGlvbiAobmFtZSwgY2FsbGJhY2spIHtcblx0XHRcdHZhciBob29rcyA9IF8uaG9va3MuYWxsO1xuXG5cdFx0XHRob29rc1tuYW1lXSA9IGhvb2tzW25hbWVdIHx8IFtdO1xuXG5cdFx0XHRob29rc1tuYW1lXS5wdXNoKGNhbGxiYWNrKTtcblx0XHR9LFxuXG5cdFx0cnVuOiBmdW5jdGlvbiAobmFtZSwgZW52KSB7XG5cdFx0XHR2YXIgY2FsbGJhY2tzID0gXy5ob29rcy5hbGxbbmFtZV07XG5cblx0XHRcdGlmICghY2FsbGJhY2tzIHx8ICFjYWxsYmFja3MubGVuZ3RoKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Zm9yICh2YXIgaT0wLCBjYWxsYmFjazsgY2FsbGJhY2sgPSBjYWxsYmFja3NbaSsrXTspIHtcblx0XHRcdFx0Y2FsbGJhY2soZW52KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbnZhciBUb2tlbiA9IF8uVG9rZW4gPSBmdW5jdGlvbih0eXBlLCBjb250ZW50LCBhbGlhcywgbWF0Y2hlZFN0ciwgZ3JlZWR5KSB7XG5cdHRoaXMudHlwZSA9IHR5cGU7XG5cdHRoaXMuY29udGVudCA9IGNvbnRlbnQ7XG5cdHRoaXMuYWxpYXMgPSBhbGlhcztcblx0Ly8gQ29weSBvZiB0aGUgZnVsbCBzdHJpbmcgdGhpcyB0b2tlbiB3YXMgY3JlYXRlZCBmcm9tXG5cdHRoaXMubWF0Y2hlZFN0ciA9IG1hdGNoZWRTdHIgfHwgbnVsbDtcblx0dGhpcy5ncmVlZHkgPSAhIWdyZWVkeTtcbn07XG5cblRva2VuLnN0cmluZ2lmeSA9IGZ1bmN0aW9uKG8sIGxhbmd1YWdlLCBwYXJlbnQpIHtcblx0aWYgKHR5cGVvZiBvID09ICdzdHJpbmcnKSB7XG5cdFx0cmV0dXJuIG87XG5cdH1cblxuXHRpZiAoXy51dGlsLnR5cGUobykgPT09ICdBcnJheScpIHtcblx0XHRyZXR1cm4gby5tYXAoZnVuY3Rpb24oZWxlbWVudCkge1xuXHRcdFx0cmV0dXJuIFRva2VuLnN0cmluZ2lmeShlbGVtZW50LCBsYW5ndWFnZSwgbyk7XG5cdFx0fSkuam9pbignJyk7XG5cdH1cblxuXHR2YXIgZW52ID0ge1xuXHRcdHR5cGU6IG8udHlwZSxcblx0XHRjb250ZW50OiBUb2tlbi5zdHJpbmdpZnkoby5jb250ZW50LCBsYW5ndWFnZSwgcGFyZW50KSxcblx0XHR0YWc6ICdzcGFuJyxcblx0XHRjbGFzc2VzOiBbJ3Rva2VuJywgby50eXBlXSxcblx0XHRhdHRyaWJ1dGVzOiB7fSxcblx0XHRsYW5ndWFnZTogbGFuZ3VhZ2UsXG5cdFx0cGFyZW50OiBwYXJlbnRcblx0fTtcblxuXHRpZiAoZW52LnR5cGUgPT0gJ2NvbW1lbnQnKSB7XG5cdFx0ZW52LmF0dHJpYnV0ZXNbJ3NwZWxsY2hlY2snXSA9ICd0cnVlJztcblx0fVxuXG5cdGlmIChvLmFsaWFzKSB7XG5cdFx0dmFyIGFsaWFzZXMgPSBfLnV0aWwudHlwZShvLmFsaWFzKSA9PT0gJ0FycmF5JyA/IG8uYWxpYXMgOiBbby5hbGlhc107XG5cdFx0QXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoZW52LmNsYXNzZXMsIGFsaWFzZXMpO1xuXHR9XG5cblx0Xy5ob29rcy5ydW4oJ3dyYXAnLCBlbnYpO1xuXG5cdHZhciBhdHRyaWJ1dGVzID0gJyc7XG5cblx0Zm9yICh2YXIgbmFtZSBpbiBlbnYuYXR0cmlidXRlcykge1xuXHRcdGF0dHJpYnV0ZXMgKz0gKGF0dHJpYnV0ZXMgPyAnICcgOiAnJykgKyBuYW1lICsgJz1cIicgKyAoZW52LmF0dHJpYnV0ZXNbbmFtZV0gfHwgJycpICsgJ1wiJztcblx0fVxuXG5cdHJldHVybiAnPCcgKyBlbnYudGFnICsgJyBjbGFzcz1cIicgKyBlbnYuY2xhc3Nlcy5qb2luKCcgJykgKyAnXCIgJyArIGF0dHJpYnV0ZXMgKyAnPicgKyBlbnYuY29udGVudCArICc8LycgKyBlbnYudGFnICsgJz4nO1xuXG59O1xuXG5pZiAoIV9zZWxmLmRvY3VtZW50KSB7XG5cdGlmICghX3NlbGYuYWRkRXZlbnRMaXN0ZW5lcikge1xuXHRcdC8vIGluIE5vZGUuanNcblx0XHRyZXR1cm4gX3NlbGYuUHJpc207XG5cdH1cbiBcdC8vIEluIHdvcmtlclxuXHRfc2VsZi5hZGRFdmVudExpc3RlbmVyKCdtZXNzYWdlJywgZnVuY3Rpb24oZXZ0KSB7XG5cdFx0dmFyIG1lc3NhZ2UgPSBKU09OLnBhcnNlKGV2dC5kYXRhKSxcblx0XHQgICAgbGFuZyA9IG1lc3NhZ2UubGFuZ3VhZ2UsXG5cdFx0ICAgIGNvZGUgPSBtZXNzYWdlLmNvZGUsXG5cdFx0ICAgIGltbWVkaWF0ZUNsb3NlID0gbWVzc2FnZS5pbW1lZGlhdGVDbG9zZTtcblxuXHRcdF9zZWxmLnBvc3RNZXNzYWdlKF8uaGlnaGxpZ2h0KGNvZGUsIF8ubGFuZ3VhZ2VzW2xhbmddLCBsYW5nKSk7XG5cdFx0aWYgKGltbWVkaWF0ZUNsb3NlKSB7XG5cdFx0XHRfc2VsZi5jbG9zZSgpO1xuXHRcdH1cblx0fSwgZmFsc2UpO1xuXG5cdHJldHVybiBfc2VsZi5QcmlzbTtcbn1cblxuLy9HZXQgY3VycmVudCBzY3JpcHQgYW5kIGhpZ2hsaWdodFxudmFyIHNjcmlwdCA9IGRvY3VtZW50LmN1cnJlbnRTY3JpcHQgfHwgW10uc2xpY2UuY2FsbChkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKSkucG9wKCk7XG5cbmlmIChzY3JpcHQpIHtcblx0Xy5maWxlbmFtZSA9IHNjcmlwdC5zcmM7XG5cblx0aWYgKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIgJiYgIXNjcmlwdC5oYXNBdHRyaWJ1dGUoJ2RhdGEtbWFudWFsJykpIHtcblx0XHRpZihkb2N1bWVudC5yZWFkeVN0YXRlICE9PSBcImxvYWRpbmdcIikge1xuXHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKF8uaGlnaGxpZ2h0QWxsLCAwKTtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgXy5oaWdobGlnaHRBbGwpO1xuXHRcdH1cblx0fVxufVxuXG5yZXR1cm4gX3NlbGYuUHJpc207XG5cbn0pKCk7XG5cbmlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHRtb2R1bGUuZXhwb3J0cyA9IFByaXNtO1xufVxuXG4vLyBoYWNrIGZvciBjb21wb25lbnRzIHRvIHdvcmsgY29ycmVjdGx5IGluIG5vZGUuanNcbmlmICh0eXBlb2YgZ2xvYmFsICE9PSAndW5kZWZpbmVkJykge1xuXHRnbG9iYWwuUHJpc20gPSBQcmlzbTtcbn1cblxuXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLW1hcmt1cC5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG5QcmlzbS5sYW5ndWFnZXMubWFya3VwID0ge1xuXHQnY29tbWVudCc6IC88IS0tW1xcd1xcV10qPy0tPi8sXG5cdCdwcm9sb2cnOiAvPFxcP1tcXHdcXFddKz9cXD8+Lyxcblx0J2RvY3R5cGUnOiAvPCFET0NUWVBFW1xcd1xcV10rPz4vLFxuXHQnY2RhdGEnOiAvPCFcXFtDREFUQVxcW1tcXHdcXFddKj9dXT4vaSxcblx0J3RhZyc6IHtcblx0XHRwYXR0ZXJuOiAvPFxcLz8oPyFcXGQpW15cXHM+XFwvPS4kPF0rKD86XFxzK1teXFxzPlxcLz1dKyg/Oj0oPzooXCJ8JykoPzpcXFxcXFwxfFxcXFw/KD8hXFwxKVtcXHdcXFddKSpcXDF8W15cXHMnXCI+PV0rKSk/KSpcXHMqXFwvPz4vaSxcblx0XHRpbnNpZGU6IHtcblx0XHRcdCd0YWcnOiB7XG5cdFx0XHRcdHBhdHRlcm46IC9ePFxcLz9bXlxccz5cXC9dKy9pLFxuXHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHQncHVuY3R1YXRpb24nOiAvXjxcXC8/Lyxcblx0XHRcdFx0XHQnbmFtZXNwYWNlJzogL15bXlxccz5cXC86XSs6L1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0J2F0dHItdmFsdWUnOiB7XG5cdFx0XHRcdHBhdHRlcm46IC89KD86KCd8XCIpW1xcd1xcV10qPyhcXDEpfFteXFxzPl0rKS9pLFxuXHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHQncHVuY3R1YXRpb24nOiAvWz0+XCInXS9cblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdCdwdW5jdHVhdGlvbic6IC9cXC8/Pi8sXG5cdFx0XHQnYXR0ci1uYW1lJzoge1xuXHRcdFx0XHRwYXR0ZXJuOiAvW15cXHM+XFwvXSsvLFxuXHRcdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0XHQnbmFtZXNwYWNlJzogL15bXlxccz5cXC86XSs6L1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9XG5cdH0sXG5cdCdlbnRpdHknOiAvJiM/W1xcZGEtel17MSw4fTsvaVxufTtcblxuLy8gUGx1Z2luIHRvIG1ha2UgZW50aXR5IHRpdGxlIHNob3cgdGhlIHJlYWwgZW50aXR5LCBpZGVhIGJ5IFJvbWFuIEtvbWFyb3ZcblByaXNtLmhvb2tzLmFkZCgnd3JhcCcsIGZ1bmN0aW9uKGVudikge1xuXG5cdGlmIChlbnYudHlwZSA9PT0gJ2VudGl0eScpIHtcblx0XHRlbnYuYXR0cmlidXRlc1sndGl0bGUnXSA9IGVudi5jb250ZW50LnJlcGxhY2UoLyZhbXA7LywgJyYnKTtcblx0fVxufSk7XG5cblByaXNtLmxhbmd1YWdlcy54bWwgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuUHJpc20ubGFuZ3VhZ2VzLmh0bWwgPSBQcmlzbS5sYW5ndWFnZXMubWFya3VwO1xuUHJpc20ubGFuZ3VhZ2VzLm1hdGhtbCA9IFByaXNtLmxhbmd1YWdlcy5tYXJrdXA7XG5QcmlzbS5sYW5ndWFnZXMuc3ZnID0gUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cDtcblxuXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLWNzcy5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG5QcmlzbS5sYW5ndWFnZXMuY3NzID0ge1xuXHQnY29tbWVudCc6IC9cXC9cXCpbXFx3XFxXXSo/XFwqXFwvLyxcblx0J2F0cnVsZSc6IHtcblx0XHRwYXR0ZXJuOiAvQFtcXHctXSs/Lio/KDt8KD89XFxzKlxceykpL2ksXG5cdFx0aW5zaWRlOiB7XG5cdFx0XHQncnVsZSc6IC9AW1xcdy1dKy9cblx0XHRcdC8vIFNlZSByZXN0IGJlbG93XG5cdFx0fVxuXHR9LFxuXHQndXJsJzogL3VybFxcKCg/OihbXCInXSkoXFxcXCg/OlxcclxcbnxbXFx3XFxXXSl8KD8hXFwxKVteXFxcXFxcclxcbl0pKlxcMXwuKj8pXFwpL2ksXG5cdCdzZWxlY3Rvcic6IC9bXlxce1xcfVxcc11bXlxce1xcfTtdKj8oPz1cXHMqXFx7KS8sXG5cdCdzdHJpbmcnOiAvKFwifCcpKFxcXFwoPzpcXHJcXG58W1xcd1xcV10pfCg/IVxcMSlbXlxcXFxcXHJcXG5dKSpcXDEvLFxuXHQncHJvcGVydHknOiAvKFxcYnxcXEIpW1xcdy1dKyg/PVxccyo6KS9pLFxuXHQnaW1wb3J0YW50JzogL1xcQiFpbXBvcnRhbnRcXGIvaSxcblx0J2Z1bmN0aW9uJzogL1stYS16MC05XSsoPz1cXCgpL2ksXG5cdCdwdW5jdHVhdGlvbic6IC9bKCl7fTs6XS9cbn07XG5cblByaXNtLmxhbmd1YWdlcy5jc3NbJ2F0cnVsZSddLmluc2lkZS5yZXN0ID0gUHJpc20udXRpbC5jbG9uZShQcmlzbS5sYW5ndWFnZXMuY3NzKTtcblxuaWYgKFByaXNtLmxhbmd1YWdlcy5tYXJrdXApIHtcblx0UHJpc20ubGFuZ3VhZ2VzLmluc2VydEJlZm9yZSgnbWFya3VwJywgJ3RhZycsIHtcblx0XHQnc3R5bGUnOiB7XG5cdFx0XHRwYXR0ZXJuOiAvKDxzdHlsZVtcXHdcXFddKj8+KVtcXHdcXFddKj8oPz08XFwvc3R5bGU+KS9pLFxuXHRcdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmNzcyxcblx0XHRcdGFsaWFzOiAnbGFuZ3VhZ2UtY3NzJ1xuXHRcdH1cblx0fSk7XG5cdFxuXHRQcmlzbS5sYW5ndWFnZXMuaW5zZXJ0QmVmb3JlKCdpbnNpZGUnLCAnYXR0ci12YWx1ZScsIHtcblx0XHQnc3R5bGUtYXR0cic6IHtcblx0XHRcdHBhdHRlcm46IC9cXHMqc3R5bGU9KFwifCcpLio/XFwxL2ksXG5cdFx0XHRpbnNpZGU6IHtcblx0XHRcdFx0J2F0dHItbmFtZSc6IHtcblx0XHRcdFx0XHRwYXR0ZXJuOiAvXlxccypzdHlsZS9pLFxuXHRcdFx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLm1hcmt1cC50YWcuaW5zaWRlXG5cdFx0XHRcdH0sXG5cdFx0XHRcdCdwdW5jdHVhdGlvbic6IC9eXFxzKj1cXHMqWydcIl18WydcIl1cXHMqJC8sXG5cdFx0XHRcdCdhdHRyLXZhbHVlJzoge1xuXHRcdFx0XHRcdHBhdHRlcm46IC8uKy9pLFxuXHRcdFx0XHRcdGluc2lkZTogUHJpc20ubGFuZ3VhZ2VzLmNzc1xuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXHRcdFx0YWxpYXM6ICdsYW5ndWFnZS1jc3MnXG5cdFx0fVxuXHR9LCBQcmlzbS5sYW5ndWFnZXMubWFya3VwLnRhZyk7XG59XG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tY2xpa2UuanNcbioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cblxuUHJpc20ubGFuZ3VhZ2VzLmNsaWtlID0ge1xuXHQnY29tbWVudCc6IFtcblx0XHR7XG5cdFx0XHRwYXR0ZXJuOiAvKF58W15cXFxcXSlcXC9cXCpbXFx3XFxXXSo/XFwqXFwvLyxcblx0XHRcdGxvb2tiZWhpbmQ6IHRydWVcblx0XHR9LFxuXHRcdHtcblx0XHRcdHBhdHRlcm46IC8oXnxbXlxcXFw6XSlcXC9cXC8uKi8sXG5cdFx0XHRsb29rYmVoaW5kOiB0cnVlXG5cdFx0fVxuXHRdLFxuXHQnc3RyaW5nJzoge1xuXHRcdHBhdHRlcm46IC8oW1wiJ10pKFxcXFwoPzpcXHJcXG58W1xcc1xcU10pfCg/IVxcMSlbXlxcXFxcXHJcXG5dKSpcXDEvLFxuXHRcdGdyZWVkeTogdHJ1ZVxuXHR9LFxuXHQnY2xhc3MtbmFtZSc6IHtcblx0XHRwYXR0ZXJuOiAvKCg/OlxcYig/OmNsYXNzfGludGVyZmFjZXxleHRlbmRzfGltcGxlbWVudHN8dHJhaXR8aW5zdGFuY2VvZnxuZXcpXFxzKyl8KD86Y2F0Y2hcXHMrXFwoKSlbYS16MC05X1xcLlxcXFxdKy9pLFxuXHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0aW5zaWRlOiB7XG5cdFx0XHRwdW5jdHVhdGlvbjogLyhcXC58XFxcXCkvXG5cdFx0fVxuXHR9LFxuXHQna2V5d29yZCc6IC9cXGIoaWZ8ZWxzZXx3aGlsZXxkb3xmb3J8cmV0dXJufGlufGluc3RhbmNlb2Z8ZnVuY3Rpb258bmV3fHRyeXx0aHJvd3xjYXRjaHxmaW5hbGx5fG51bGx8YnJlYWt8Y29udGludWUpXFxiLyxcblx0J2Jvb2xlYW4nOiAvXFxiKHRydWV8ZmFsc2UpXFxiLyxcblx0J2Z1bmN0aW9uJzogL1thLXowLTlfXSsoPz1cXCgpL2ksXG5cdCdudW1iZXInOiAvXFxiLT8oPzoweFtcXGRhLWZdK3xcXGQqXFwuP1xcZCsoPzplWystXT9cXGQrKT8pXFxiL2ksXG5cdCdvcGVyYXRvcic6IC8tLT98XFwrXFwrP3whPT89P3w8PT98Pj0/fD09Pz0/fCYmP3xcXHxcXHw/fFxcP3xcXCp8XFwvfH58XFxefCUvLFxuXHQncHVuY3R1YXRpb24nOiAvW3t9W1xcXTsoKSwuOl0vXG59O1xuXG5cbi8qICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKipcbiAgICAgQmVnaW4gcHJpc20tamF2YXNjcmlwdC5qc1xuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiAqL1xuXG5QcmlzbS5sYW5ndWFnZXMuamF2YXNjcmlwdCA9IFByaXNtLmxhbmd1YWdlcy5leHRlbmQoJ2NsaWtlJywge1xuXHQna2V5d29yZCc6IC9cXGIoYXN8YXN5bmN8YXdhaXR8YnJlYWt8Y2FzZXxjYXRjaHxjbGFzc3xjb25zdHxjb250aW51ZXxkZWJ1Z2dlcnxkZWZhdWx0fGRlbGV0ZXxkb3xlbHNlfGVudW18ZXhwb3J0fGV4dGVuZHN8ZmluYWxseXxmb3J8ZnJvbXxmdW5jdGlvbnxnZXR8aWZ8aW1wbGVtZW50c3xpbXBvcnR8aW58aW5zdGFuY2VvZnxpbnRlcmZhY2V8bGV0fG5ld3xudWxsfG9mfHBhY2thZ2V8cHJpdmF0ZXxwcm90ZWN0ZWR8cHVibGljfHJldHVybnxzZXR8c3RhdGljfHN1cGVyfHN3aXRjaHx0aGlzfHRocm93fHRyeXx0eXBlb2Z8dmFyfHZvaWR8d2hpbGV8d2l0aHx5aWVsZClcXGIvLFxuXHQnbnVtYmVyJzogL1xcYi0/KDB4W1xcZEEtRmEtZl0rfDBiWzAxXSt8MG9bMC03XSt8XFxkKlxcLj9cXGQrKFtFZV1bKy1dP1xcZCspP3xOYU58SW5maW5pdHkpXFxiLyxcblx0Ly8gQWxsb3cgZm9yIGFsbCBub24tQVNDSUkgY2hhcmFjdGVycyAoU2VlIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIwMDg0NDQpXG5cdCdmdW5jdGlvbic6IC9bXyRhLXpBLVpcXHhBMC1cXHVGRkZGXVtfJGEtekEtWjAtOVxceEEwLVxcdUZGRkZdKig/PVxcKCkvaVxufSk7XG5cblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2phdmFzY3JpcHQnLCAna2V5d29yZCcsIHtcblx0J3JlZ2V4Jzoge1xuXHRcdHBhdHRlcm46IC8oXnxbXi9dKVxcLyg/IVxcLykoXFxbLis/XXxcXFxcLnxbXi9cXFxcXFxyXFxuXSkrXFwvW2dpbXl1XXswLDV9KD89XFxzKigkfFtcXHJcXG4sLjt9KV0pKS8sXG5cdFx0bG9va2JlaGluZDogdHJ1ZSxcblx0XHRncmVlZHk6IHRydWVcblx0fVxufSk7XG5cblByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ2phdmFzY3JpcHQnLCAnc3RyaW5nJywge1xuXHQndGVtcGxhdGUtc3RyaW5nJzoge1xuXHRcdHBhdHRlcm46IC9gKD86XFxcXFxcXFx8XFxcXD9bXlxcXFxdKSo/YC8sXG5cdFx0Z3JlZWR5OiB0cnVlLFxuXHRcdGluc2lkZToge1xuXHRcdFx0J2ludGVycG9sYXRpb24nOiB7XG5cdFx0XHRcdHBhdHRlcm46IC9cXCRcXHtbXn1dK1xcfS8sXG5cdFx0XHRcdGluc2lkZToge1xuXHRcdFx0XHRcdCdpbnRlcnBvbGF0aW9uLXB1bmN0dWF0aW9uJzoge1xuXHRcdFx0XHRcdFx0cGF0dGVybjogL15cXCRcXHt8XFx9JC8sXG5cdFx0XHRcdFx0XHRhbGlhczogJ3B1bmN0dWF0aW9uJ1xuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0cmVzdDogUHJpc20ubGFuZ3VhZ2VzLmphdmFzY3JpcHRcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdCdzdHJpbmcnOiAvW1xcc1xcU10rL1xuXHRcdH1cblx0fVxufSk7XG5cbmlmIChQcmlzbS5sYW5ndWFnZXMubWFya3VwKSB7XG5cdFByaXNtLmxhbmd1YWdlcy5pbnNlcnRCZWZvcmUoJ21hcmt1cCcsICd0YWcnLCB7XG5cdFx0J3NjcmlwdCc6IHtcblx0XHRcdHBhdHRlcm46IC8oPHNjcmlwdFtcXHdcXFddKj8+KVtcXHdcXFddKj8oPz08XFwvc2NyaXB0PikvaSxcblx0XHRcdGxvb2tiZWhpbmQ6IHRydWUsXG5cdFx0XHRpbnNpZGU6IFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0LFxuXHRcdFx0YWxpYXM6ICdsYW5ndWFnZS1qYXZhc2NyaXB0J1xuXHRcdH1cblx0fSk7XG59XG5cblByaXNtLmxhbmd1YWdlcy5qcyA9IFByaXNtLmxhbmd1YWdlcy5qYXZhc2NyaXB0O1xuXG4vKiAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXG4gICAgIEJlZ2luIHByaXNtLWZpbGUtaGlnaGxpZ2h0LmpzXG4qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovXG5cbihmdW5jdGlvbiAoKSB7XG5cdGlmICh0eXBlb2Ygc2VsZiA9PT0gJ3VuZGVmaW5lZCcgfHwgIXNlbGYuUHJpc20gfHwgIXNlbGYuZG9jdW1lbnQgfHwgIWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IpIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHRzZWxmLlByaXNtLmZpbGVIaWdobGlnaHQgPSBmdW5jdGlvbigpIHtcblxuXHRcdHZhciBFeHRlbnNpb25zID0ge1xuXHRcdFx0J2pzJzogJ2phdmFzY3JpcHQnLFxuXHRcdFx0J3B5JzogJ3B5dGhvbicsXG5cdFx0XHQncmInOiAncnVieScsXG5cdFx0XHQncHMxJzogJ3Bvd2Vyc2hlbGwnLFxuXHRcdFx0J3BzbTEnOiAncG93ZXJzaGVsbCcsXG5cdFx0XHQnc2gnOiAnYmFzaCcsXG5cdFx0XHQnYmF0JzogJ2JhdGNoJyxcblx0XHRcdCdoJzogJ2MnLFxuXHRcdFx0J3RleCc6ICdsYXRleCdcblx0XHR9O1xuXG5cdFx0aWYoQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHsgLy8gQ2hlY2sgdG8gcHJldmVudCBlcnJvciBpbiBJRThcblx0XHRcdEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ3ByZVtkYXRhLXNyY10nKSkuZm9yRWFjaChmdW5jdGlvbiAocHJlKSB7XG5cdFx0XHRcdHZhciBzcmMgPSBwcmUuZ2V0QXR0cmlidXRlKCdkYXRhLXNyYycpO1xuXG5cdFx0XHRcdHZhciBsYW5ndWFnZSwgcGFyZW50ID0gcHJlO1xuXHRcdFx0XHR2YXIgbGFuZyA9IC9cXGJsYW5nKD86dWFnZSk/LSg/IVxcKikoXFx3KylcXGIvaTtcblx0XHRcdFx0d2hpbGUgKHBhcmVudCAmJiAhbGFuZy50ZXN0KHBhcmVudC5jbGFzc05hbWUpKSB7XG5cdFx0XHRcdFx0cGFyZW50ID0gcGFyZW50LnBhcmVudE5vZGU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAocGFyZW50KSB7XG5cdFx0XHRcdFx0bGFuZ3VhZ2UgPSAocHJlLmNsYXNzTmFtZS5tYXRjaChsYW5nKSB8fCBbLCAnJ10pWzFdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFsYW5ndWFnZSkge1xuXHRcdFx0XHRcdHZhciBleHRlbnNpb24gPSAoc3JjLm1hdGNoKC9cXC4oXFx3KykkLykgfHwgWywgJyddKVsxXTtcblx0XHRcdFx0XHRsYW5ndWFnZSA9IEV4dGVuc2lvbnNbZXh0ZW5zaW9uXSB8fCBleHRlbnNpb247XG5cdFx0XHRcdH1cblxuXHRcdFx0XHR2YXIgY29kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NvZGUnKTtcblx0XHRcdFx0Y29kZS5jbGFzc05hbWUgPSAnbGFuZ3VhZ2UtJyArIGxhbmd1YWdlO1xuXG5cdFx0XHRcdHByZS50ZXh0Q29udGVudCA9ICcnO1xuXG5cdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSAnTG9hZGluZ+KApic7XG5cblx0XHRcdFx0cHJlLmFwcGVuZENoaWxkKGNvZGUpO1xuXG5cdFx0XHRcdHZhciB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcblxuXHRcdFx0XHR4aHIub3BlbignR0VUJywgc3JjLCB0cnVlKTtcblxuXHRcdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdGlmICh4aHIucmVhZHlTdGF0ZSA9PSA0KSB7XG5cblx0XHRcdFx0XHRcdGlmICh4aHIuc3RhdHVzIDwgNDAwICYmIHhoci5yZXNwb25zZVRleHQpIHtcblx0XHRcdFx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9IHhoci5yZXNwb25zZVRleHQ7XG5cblx0XHRcdFx0XHRcdFx0UHJpc20uaGlnaGxpZ2h0RWxlbWVudChjb2RlKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGVsc2UgaWYgKHhoci5zdGF0dXMgPj0gNDAwKSB7XG5cdFx0XHRcdFx0XHRcdGNvZGUudGV4dENvbnRlbnQgPSAn4pyWIEVycm9yICcgKyB4aHIuc3RhdHVzICsgJyB3aGlsZSBmZXRjaGluZyBmaWxlOiAnICsgeGhyLnN0YXR1c1RleHQ7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y29kZS50ZXh0Q29udGVudCA9ICfinJYgRXJyb3I6IEZpbGUgZG9lcyBub3QgZXhpc3Qgb3IgaXMgZW1wdHknO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblxuXHRcdFx0XHR4aHIuc2VuZChudWxsKTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXHR9O1xuXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBzZWxmLlByaXNtLmZpbGVIaWdobGlnaHQpO1xuXG59KSgpO1xuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vcHJpc21qcy9wcmlzbS5qc1xuICoqIG1vZHVsZSBpZCA9IDE2MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjx0YWJsZSBjbGFzcz1zZ19jLWFwaS10YWJsZT4gPHRyPiA8dGg+IE5hbWUgPC90aD4gPHRoPiBUeXBlIDwvdGg+IDx0aD4gUmVxdWlyZWQgPC90aD4gPHRoPiBEZWZhdWx0IDwvdGg+IDx0aD4gRGVzY3JpcHRpb24gPC90aD4gPC90cj4gPHRyIHYtZm9yPVxcXCJpdGVtIGluIGl0ZW1zXFxcIj4gPHRkPnt7aXRlbS5uYW1lfX08L3RkPiA8dGQ+e3tpdGVtLnR5cGV9fTwvdGQ+IDx0ZD57e2l0ZW0uaXNSZXF1aXJlZH19PC90ZD4gPHRkPnt7aXRlbS5kZWZhdWx0fX08L3RkPiA8dGQ+e3tpdGVtLmRlc2N9fTwvdGQ+IDwvdHI+IDwvdGFibGU+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vZGV2L3NyYy9jb21wb25lbnRzL2FwaS10YWJsZS9hcGktdGFibGUuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE2MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxuYXYgY2xhc3M9c2dfYy1uYXY+IDxoMiBjbGFzcz1zZ19jLW5hdl9fc2VjdGlvbj5DT01QT05FTlRTPC9oMj4gPHVsIGNsYXNzPWh5X28tbGlzdD4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvJywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBHZXQgU3RhcnRlZCA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL2FsZXJ0JywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBBbGVydCA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL3NwaW5uZXInLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFNwaW5uZXIgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9zdGVwLXRyYWNrZXInLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFN0ZXAgVHJhY2tlciA8L2E+IDwvbGk+IDxsaSBjbGFzcz1zZ19jLW5hdl9fbGlzdC1pdGVtPiA8YSBjbGFzcz1zZ19jLW5hdl9fbGluayB2LWxpbms9XFxcIntwYXRoOiAnL3RhYnMnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFRhYnMgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9vdmVybGF5JywgYWN0aXZlQ2xhc3M6ICdzZ19jLW5hdl9fbGluay0tYWN0aXZlJ31cXFwiPiBPdmVybGF5IDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvbGVnYWwnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IExlZ2FsIDwvYT4gPC9saT4gPGxpIGNsYXNzPXNnX2MtbmF2X19saXN0LWl0ZW0+IDxhIGNsYXNzPXNnX2MtbmF2X19saW5rIHYtbGluaz1cXFwie3BhdGg6ICcvY29sbGFwc2FibGUtcGFuZWwnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IENvbGxhcHNhYmxlIFBhbmVsIDwvYT4gPC9saT4gPC91bD4gPGgyIGNsYXNzPXNnX2MtbmF2X19zZWN0aW9uPkRJUkVDVElWRVM8L2gyPiA8dWwgY2xhc3M9aHlfby1saXN0PiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9vdmVybGF5LW9wZW5lcicsIGFjdGl2ZUNsYXNzOiAnc2dfYy1uYXZfX2xpbmstLWFjdGl2ZSd9XFxcIj4gT3ZlcmxheSBPcGVuZXIgPC9hPiA8L2xpPiA8bGkgY2xhc3M9c2dfYy1uYXZfX2xpc3QtaXRlbT4gPGEgY2xhc3M9c2dfYy1uYXZfX2xpbmsgdi1saW5rPVxcXCJ7cGF0aDogJy9zZXQtZm9jdXMnLCBhY3RpdmVDbGFzczogJ3NnX2MtbmF2X19saW5rLS1hY3RpdmUnfVxcXCI+IFNldCBGb2N1cyA8L2E+IDwvbGk+IDwvdWw+IDwvbmF2PiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9zaWRlLW5hdi5odG1sXG4gKiogbW9kdWxlIGlkID0gMTYzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGhlYWRlciBjbGFzcz1cXFwic2dfYy1zaXRlLWhlYWRlciBkZmQgaHlfdS1oaWRlc21cXFwiPiA8ZGl2IGNsYXNzPXNnX2Mtc2l0ZS1oZWFkZXItY29udGFpbmVyPiA8YSBocmVmPS8gPiA8aW1nIGNsYXNzPWxvZ28gc3JjPVwiICsgcmVxdWlyZShcIi4vbG9nby5wbmdcIikgKyBcIiBhbHQ9TG9nbz4gPC9hPiA8L2Rpdj4gPC9oZWFkZXI+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL3NpdGUtaGVhZGVyLmh0bWxcbiAqKiBtb2R1bGUgaWQgPSAxNjRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5BbGVydDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8YWxlcnQgdHlwZT1lcnJvcj5UaGlzIGlzIGFuIGVycm9yIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPWluZm8+VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LjwvYWxlcnQ+IDxhbGVydCB0eXBlPXN1Y2Nlc3M+VGhpcyBpcyBhIHN1Y2Nlc3MgYWxlcnQuPC9hbGVydD4gPGFsZXJ0IHR5cGU9c3VjY2VzcyA6ZGlzbWlzc2libGU9ZmFsc2U+VGhpcyBpcyBub3QgYSBkaXNtaXNzaWJsZSBhbGVydC48L2FsZXJ0PiA8YWxlcnQgdHlwZT1zdWNjZXNzIDpvbi1jbG9zZWQ9ZGlzbWlzc0NhbGxCYWNrPlRoaXMgaXMgYW4gYWxlcnQgd2l0aCBjYWxsYmFjay48L2FsZXJ0PiA8YWxlcnQgdHlwZT1pbmZvIDp0aW1lb3V0PTUwMDA+VGhpcyBhbGVydCBzaG91bGQgdGltZW91dCBpbiA1IHNlY29uZHMuPC9hbGVydD4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwiZXJyb3JcXFwiJmd0O1RoaXMgaXMgYW4gZXJyb3IgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwiaW5mb1xcXCImZ3Q7VGhpcyBpcyBhbiBpbmZvIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiJmd0O1RoaXMgaXMgYSBzdWNjZXNzIGFsZXJ0LiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgJmx0O2FsZXJ0IHR5cGU9XFxcInN1Y2Nlc3NcXFwiIDpkaXNtaXNzaWJsZT1cXFwiZmFsc2VcXFwiJmd0O1RoaXMgaXMgbm90IGEgZGlzbWlzc2libGUgYWxlcnQuJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOm9uLWNsb3NlZD1cXFwiZGlzbWlzc0NhbGxCYWNrXFxcIiZndDtUaGlzIGlzIGFuIGFsZXJ0IHdpdGggY2FsbGJhY2suJmx0Oy9hbGVydCZndDtcXG4gICAgICAgICAmbHQ7YWxlcnQgdHlwZT1cXFwic3VjY2Vzc1xcXCIgOnRpbWVvdXQ9XFxcIjUwMDBcXFwiJmd0O1RoaXMgYWxlcnQgc2hvdWxkIHRpbWVvdXQgaW4gNSBzZWNvbmRzLiZsdDsvYWxlcnQmZ3Q7XFxuICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2FsZXJ0LXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTY1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+Q29sbGFwc2FibGUgUGFuZWw8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAxXFxcIiA6aXMtb3Blbj10cnVlPiBQYW5lbCAxIGNvbnRlbnQgPC9jb2xsYXBzYWJsZS1wYW5lbD4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPVxcXCJQYW5lbCAyXFxcIj4gUGFuZWwgMiBjb250ZW50IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuICAgICAgICAgICAgICZsdDtjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1cXFwiUGFuZWwgMVxcXCIgOmlzLW9wZW49XFxcInRydWVcXFwiJmd0O1xcbiAgICAgICAgICAgICAgIFBhbmVsIDEgY29udGVudFxcbiAgICAgICAgICAgICAmbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xcbiAgICAgICAgICAgICAmbHQ7Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9XFxcIlBhbmVsIDJcXFwiJmd0O1xcbiAgICAgICAgICAgICAgIFBhbmVsIDIgY29udGVudFxcbiAgICAgICAgICAgICAmbHQ7L2NvbGxhcHNhYmxlLXBhbmVsJmd0O1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9jb2xsYXBzYWJsZS1wYW5lbC1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE2NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkdldHRpbmcgU3RhcnRlZDwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS01IGh5X3QtZ3JleVxcXCI+Q0ROPC9oMz4gPHA+IC4uLiA8L3A+IDwvZGl2PiA8L2Rpdj48L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE2N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPkxlZ2FsIFN5c3RlbTwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8cCBjbGFzcz1cXFwiaHlfYy1jb3B5IGh5X2MtY29weS0tYm9keSBoeV90LWdyZXlcXFwiPiBMb3JlbSBpcHN1bTxsZWdhbC1jb3VudGVyIHYtb3ZlcmxheS1vcGVuZXI9bGVnYWwtb3ZlcmxheSBsZWdhbC1rZXk9aHMtcmVmZXJyYWwtdGVybXMgbGVnYWwtbGFuZz1lbiBsZWdhbC1yZWdpb249YmM+PC9sZWdhbC1jb3VudGVyPiBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LCBzZWQgZG8gZWl1c21vZCB0ZW1wb3IgaW5jaWRpZHVudCB1dCBsYWJvcmUgZXQgZG9sb3JlIG1hZ25hIGFsaXF1YS4gPGxlZ2FsLWNvdW50ZXIgdi1vdmVybGF5LW9wZW5lcj1sZWdhbC1vdmVybGF5IGxlZ2FsLWtleT0xLXllYXItb2ZmZXItc3RpbSBsZWdhbC1sYW5nPWVuIGxlZ2FsLXJlZ2lvbj1iYz48L2xlZ2FsLWNvdW50ZXI+IDwvcD4gPC9kaXY+IDxkaXYgY2xhc3M9c2dfYy1kZW1vX19jb250YWluZXI+IDxsZWdhbC1jb250YWluZXI+PC9sZWdhbC1jb250YWluZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuICAgICAgICAgICAgICZsdDtsZWdhbC1jb3VudGVyJmd0O1xcbiAgICAgICAgICAgICAgICBsZWdhbC1rZXk9XFxcImhzLXJlZmVycmFsLXRlcm1zXFxcIlxcbiAgICAgICAgICAgICAgICBsZWdhbC1sYW5nPVxcXCJlblxcXCJcXG4gICAgICAgICAgICAgICAgbGVnYWwtcmVnaW9uPVxcXCJiY1xcXCJcXG4gICAgICAgICAgICAgJmx0Oy9sZWdhbC1jb3VudGVyJmd0O1xcbiAgICAgICAgICAgICAmbHQ7bGVnYWwtY29udGFpbmVyJmd0OyZsdDsvbGVnYWwtY29udGFpbmVyJmd0O1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9amF2YXNjcmlwdD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWphdmFzY3JpcHQ+XFxuICAgICAgICAgICAgIGxldCB2bSA9IG5ldyBWdWUoe1xcbiAgICAgICAgICAgICAgIGVsOiAnYm9keScsXFxuICAgICAgICAgICAgICAgZGF0YSgpIHtcXG4gICAgICAgICAgICAgICAgIHJldHVybiB7XFxuICAgICAgICAgICAgICAgICAgIGxpZ2VyRW5kUG9pbnQ6ICdodHRwczovL2FwaS5jbXMudGVsdXMuY29tL2xlZ2FscycsXFxuICAgICAgICAgICAgICAgICAgIGxpZ2VyQXBwbGljYXRpb25LZXk6ICdiOTczOGQ2N2I4OWRmYzc4Mjc0NmQ0YTljZjRhMTA5MydcXG4gICAgICAgICAgICAgICAgIH07XFxuICAgICAgICAgICAgICAgfSxcXG4gICAgICAgICAgICAgICBjb21wb25lbnRzOiB7XFxuICAgICAgICAgICAgICAgICBMZWdhbENvdW50ZXIsXFxuICAgICAgICAgICAgICAgICBMZWdhbENvbnRhaW5lclxcbiAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgfSk7XFxuICAgICAgICAgICA8L2NvZGU+XFxuICAgICAgICAgPC9wcmU+IDwvY29sbGFwc2FibGUtcGFuZWw+IDwvZGl2PiA8aDMgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIj5BUEk6IExlZ2FsIENvdW50ZXI8L2gzPiA8ZGl2IGNsYXNzPVxcXCJoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8YXBpLXRhYmxlIDppdGVtcz1hcGlJdGVtcz48L2FwaS10YWJsZT4gPC9kaXY+IDwvZGl2PiA8L3NlY3Rpb24+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2xlZ2FsLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTY4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiIDxzZWN0aW9uIGNsYXNzPVxcXCJoeV9jLW1vZHVsZSBoeV90LWdyZXlcXFwiPiA8ZGl2IGNsYXNzPWh5X28td3JhcHBlcj4gPGgyIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0IGh5X3QtZ3JleVxcXCI+T3ZlcmxheSBTeXN0ZW08L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHA+IDxidXR0b24gdi1vdmVybGF5LW9wZW5lcj1vdmVybGF5LTEgY2xhc3M9XFxcImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1saW5rIGh5X3QtcHVycGxlXFxcIiB0eXBlPWJ1dHRvbiByb2xlPWJ1dHRvbj4gT3BlbiBvdmVybGF5ICMxIDxpIGNsYXNzPVxcXCJoeV9jLWljb24gaHlfYy1pY29uLS1hcnJvdy1yaWdodC1jaXJjbGVkIGh5X2MtYnV0dG9uX19pY29uXFxcIj48L2k+IDwvYnV0dG9uPiA8L3A+IDxwPiA8YnV0dG9uIHYtb3ZlcmxheS1vcGVuZXI9b3ZlcmxheS0yIGNsYXNzPVxcXCJoeV9jLWJ1dHRvbiBoeV9jLWJ1dHRvbi0tbGluayBoeV90LXB1cnBsZVxcXCIgdHlwZT1idXR0b24gcm9sZT1idXR0b24+IE9wZW4gb3ZlcmxheSAjMiA8aSBjbGFzcz1cXFwiaHlfYy1pY29uIGh5X2MtaWNvbi0tYXJyb3ctcmlnaHQtY2lyY2xlZCBoeV9jLWJ1dHRvbl9faWNvblxcXCI+PC9pPiA8L2J1dHRvbj4gPC9wPiA8b3ZlcmxheS1jb250YWluZXI+IDxvdmVybGF5IG92ZXJsYXkta2V5PW92ZXJsYXktMT4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PW92ZXJsYXktaGVhZGVyPlRoaXMgaXMgb3ZlcmxheSAjMTwvaDQ+IDxhcnRpY2xlIHNsb3Q9b3ZlcmxheS1ib2R5PiBPdmVybGF5ICMxIGJvZHkgPC9hcnRpY2xlPiA8L292ZXJsYXk+IDxvdmVybGF5IG92ZXJsYXkta2V5PW92ZXJsYXktMj4gPGg0IGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg0XFxcIiBzbG90PW92ZXJsYXktaGVhZGVyPlRoaXMgaXMgb3ZlcmxheSAjMjwvaDQ+IDxhcnRpY2xlIHNsb3Q9b3ZlcmxheS1ib2R5PiBPdmVybGF5ICMyIGJvZHkgPC9hcnRpY2xlPiA8L292ZXJsYXk+IDwvb3ZlcmxheS1jb250YWluZXI+IDwvZGl2PiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9SFRNTD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuICAgICAgICAgICAgICZsdDtvdmVybGF5LWNvbnRhaW5lciZndDtcXG4gICAgICAgICAgICAgICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cXFwib3ZlcmxheS0xXFxcIiZndDtcXG4gICAgICAgICAgICAgICAgICZsdDtoNCAgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9XFxcIm92ZXJsYXktaGVhZGVyXFxcIiZndDtcXG4gICAgICAgICAgICAgICAgIFRoaXMgaXMgb3ZlcmxheSAjMVxcbiAgICAgICAgICAgICAgICAgJmx0Oy9oNCZndDtcXG4gICAgICAgICAgICAgICAgICZsdDthcnRpY2xlIHNsb3Q9XFxcIm92ZXJsYXktYm9keVxcXCImZ3Q7XFxuICAgICAgICAgICAgICAgICAgIE92ZXJsYXkgIzEgYm9keVxcbiAgICAgICAgICAgICAgICAgJmx0Oy9hcnRpY2xlJmd0O1xcbiAgICAgICAgICAgICAgICZsdDsvb3ZlcmxheSZndDtcXG4gICAgICAgICAgICAgICAmbHQ7b3ZlcmxheSBvdmVybGF5LWtleT1cXFwib3ZlcmxheS0yXFxcIiZndDtcXG4gICAgICAgICAgICAgICAgICZsdDtoNCAgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDRcXFwiIHNsb3Q9XFxcIm92ZXJsYXktaGVhZGVyXFxcIiZndDtcXG4gICAgICAgICAgICAgICAgIFRoaXMgaXMgb3ZlcmxheSAjMVxcbiAgICAgICAgICAgICAgICAgJmx0Oy9oNCZndDtcXG4gICAgICAgICAgICAgICAgICZsdDthcnRpY2xlIHNsb3Q9XFxcIm92ZXJsYXktYm9keVxcXCImZ3Q7XFxuICAgICAgICAgICAgICAgICAgIE92ZXJsYXkgIzIgYm9keVxcbiAgICAgICAgICAgICAgICAgJmx0Oy9hcnRpY2xlJmd0O1xcbiAgICAgICAgICAgICAgICZsdDsvb3ZlcmxheSZndDtcXG4gICAgICAgICAgICAgJmx0Oy9vdmVybGF5LWNvbnRhaW5lciZndDtcXG4gICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2Rldi9zcmMvdmlld3Mvb3ZlcmxheS1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE2OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlNwaW5uZXI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPGxhYmVsIGNsYXNzPVxcXCJoeV9jLWNvbnRyb2wgaHlfYy1jb250cm9sLS1jaGVja2JveFxcXCI+IDxzcGFuIGNsYXNzPWh5X2MtY29udHJvbF9fbGFiZWwtdGV4dD5GdWxsIFNjcmVlbjwvc3Bhbj4gPGlucHV0IHR5cGU9Y2hlY2tib3ggdi1tb2RlbD1pc0Z1bGxTY3JlZW4gLz4gPGRpdiBjbGFzcz1oeV9jLWNvbnRyb2xfX2luZGljYXRvcj48L2Rpdj4gPC9sYWJlbD4gPGJ1dHRvbiBAY2xpY2s9c2hvd1NwaW5uZXIgY2xhc3M9XFxcImh5X2MtYnV0dG9uIGh5X2MtYnV0dG9uLS1yYWlzZWQgaHlfdC1ncmVlblxcXCIgdHlwZT1idXR0b24+IFNob3cgU3Bpbm5lciA8L2J1dHRvbj4gPHNwaW5uZXIgOmZ1bGwtc2NyZWVuPWlzRnVsbFNjcmVlbiA6dGV4dD1tc2c+PC9zcGlubmVyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgICAgICA8Y29kZSBjbGFzcz1sYW5ndWFnZS1odG1sPlxcbiAgICAgICAgICAgICAmbHQ7c3Bpbm5lciB0ZXh0PVxcXCJJIHdpbGwgY2xvc2UgaW4gMyBzZWNvbmRzXFxcIiA6ZnVsbC1zY3JlZW49XFxcInRydWVcXFwiJmd0OyZsdDsvc3Bpbm5lciZndDtcXG4gICAgICAgICAgIDwvY29kZT5cXG4gICAgICAgICA8L3ByZT4gPC9jb2xsYXBzYWJsZS1wYW5lbD4gPC9kaXY+IDxoMyBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNSBoeV90LWdyZXlcXFwiPkFQSTwvaDM+IDxkaXYgY2xhc3M9XFxcImh5X28tbGF5b3V0IGh5X28tbGF5b3V0LS13aXRoLWd1dHRlciBoeV9vLWxheW91dC0tZmx1c2hlZFxcXCI+IDxhcGktdGFibGUgOml0ZW1zPWFwaUl0ZW1zPjwvYXBpLXRhYmxlPiA8L2Rpdj4gPC9kaXY+IDwvc2VjdGlvbj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2Rldi9zcmMvdmlld3Mvc3Bpbm5lci1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE3MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIiA8c2VjdGlvbiBjbGFzcz1cXFwiaHlfYy1tb2R1bGUgaHlfdC1ncmV5XFxcIj4gPGRpdiBjbGFzcz1oeV9vLXdyYXBwZXI+IDxoMiBjbGFzcz1cXFwiaHlfYy1oZWFkbGluZSBoeV9jLWhlYWRsaW5lLS1oNCBoeV90LWdyZXlcXFwiPlN0ZXAgVHJhY2tlcjwvaDI+IDxociBjbGFzcz1oeV91LXNwYWNlLW1iLTI+IDxkaXYgY2xhc3M9XFxcInNnX2MtZGVtbyBoeV9vLWxheW91dCBoeV9vLWxheW91dC0td2l0aC1ndXR0ZXIgaHlfby1sYXlvdXQtLWZsdXNoZWRcXFwiPiA8ZGl2IGNsYXNzPXNnX2MtZGVtb19fY29udGFpbmVyPiA8c3RlcC10cmFja2VyIDpjdXJyZW50LXN0ZXA9c3RlcFRyYWNrZXJDdXJyZW50U3RlcCA6Y29uZmlnPXN0ZXBUcmFja2VyQ29uZmlnPjwvc3RlcC10cmFja2VyPiA8L2Rpdj4gPGNvbGxhcHNhYmxlLXBhbmVsIGxhYmVsPUhUTUw+IDxwcmU+XFxuICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWh0bWw+XFxuICAgICAgICAmbHQ7c3RlcC10cmFja2VyXFxuICAgICAgICA6Y3VycmVudC1zdGVwPVxcXCJzdGVwVHJhY2tlckN1cnJlbnRTdGVwXFxcIlxcbiAgICAgICAgOmNvbmZpZz1cXFwic3RlcFRyYWNrZXJDb25maWdcXFwiJmd0O1xcbiAgICAgICAgJmx0Oy9zdGVwLXRyYWNrZXImZ3Q7XFxuICAgICAgIDwvY29kZT5cXG4gICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8Y29sbGFwc2FibGUtcGFuZWwgbGFiZWw9amF2YXNjcmlwdD4gPHByZT5cXG4gICAgICAgICAgIDxjb2RlIGNsYXNzPWxhbmd1YWdlLWpzPlxcbiAgICAgICAgICAgIGxldCBzdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcXG4gICAgICAgICAgICBsZXQgc3RlcFRyYWNrZXJDb25maWcgPSB7XFxuICAgICAgICAgICAgICBpc0NsaWNrYWJsZTogdHJ1ZSxcXG4gICAgICAgICAgICAgIHN0ZXBzOiBbXFxuICAgICAgICAgICAgICAgIHtcXG4gICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQScsXFxuICAgICAgICAgICAgICAgICAgbGluazogJycsXFxuICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMDtcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH0sIHtcXG4gICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQicsXFxuICAgICAgICAgICAgICAgICAgbGluazogJycsXFxuICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMTtcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH0sIHtcXG4gICAgICAgICAgICAgICAgICB0aXRsZTogJ1N0ZXAgQycsXFxuICAgICAgICAgICAgICAgICAgbGluazogJycsXFxuICAgICAgICAgICAgICAgICAgb25DbGlja0hhbmRsZXI6IChldmVudCkgPT4ge1xcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGVwVHJhY2tlckN1cnJlbnRTdGVwID0gMjtcXG4gICAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgIF1cXG4gICAgICAgICAgICB9O1xcbiAgICAgICAgICAgIGxldCB2bSA9IG5ldyBWdWUoe1xcbiAgICAgICAgICAgICAgZWw6ICdib2R5JyxcXG4gICAgICAgICAgICAgIGRhdGE6IHtcXG4gICAgICAgICAgICAgICAgc3RlcFRyYWNrZXJDb25maWcsXFxuICAgICAgICAgICAgICAgIHN0ZXBUcmFja2VyQ3VycmVudFN0ZXBcXG4gICAgICAgICAgICB9LFxcbiAgICAgICAgICAgICAgY29tcG9uZW50czoge1xcbiAgICAgICAgICAgICAgICBTdGVwVHJhY2tlclxcbiAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy9zdGVwLXRyYWNrZXItcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxNzFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gXCIgPHNlY3Rpb24gY2xhc3M9XFxcImh5X2MtbW9kdWxlIGh5X3QtZ3JleVxcXCI+IDxkaXYgY2xhc3M9aHlfby13cmFwcGVyPiA8aDIgY2xhc3M9XFxcImh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDQgaHlfdC1ncmV5XFxcIj5UYWI8L2gyPiA8aHIgY2xhc3M9aHlfdS1zcGFjZS1tYi0yPiA8ZGl2IGNsYXNzPVxcXCJzZ19jLWRlbW8gaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGRpdiBjbGFzcz1zZ19jLWRlbW9fX2NvbnRhaW5lcj4gPHRhYnM+IDx0YWIgbGFiZWw9XFxcIlRhYiAxXFxcIj4gPHA+IFRhYiAxIGNvbnRlbnQgPC9wPiA8L3RhYj4gPHRhYiBsYWJlbD1cXFwiVGFiIDJcXFwiPiA8cD4gVGFiIDIgY29udGVudCA8L3A+IDwvdGFiPiA8dGFiIGxhYmVsPVxcXCJUYWIgM1xcXCIgOmlzLWRpc2FibGVkPXRydWU+IDxwPiBUYWIgMyBjb250ZW50IDwvcD4gPC90YWI+IDwvdGFicz4gPC9kaXY+IDxjb2xsYXBzYWJsZS1wYW5lbCBsYWJlbD1IVE1MPiA8cHJlPlxcbiAgICAgICAgICAgPGNvZGUgY2xhc3M9bGFuZ3VhZ2UtaHRtbD5cXG4gICAgICAgICAgICAgJmx0O3RhYnMmZ3Q7XFxuICAgICAgICAgICAgICAgJmx0O3RhYiBsYWJlbD1cXFwiVGFiIDFcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XFxuICAgICAgICAgICAgICAgICAgIFRhYiAxIGNvbnRlbnRcXG4gICAgICAgICAgICAgICAgICZsdDsvcCZndDtcXG4gICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcXG4gICAgICAgICAgICAgICAmbHQ7dGFiIGxhYmVsPVxcXCJUYWIgMlxcXCImZ3Q7XFxuICAgICAgICAgICAgICAgICAmbHQ7cCZndDtcXG4gICAgICAgICAgICAgICAgICAgVGFiIDIgY29udGVudFxcbiAgICAgICAgICAgICAgICAgJmx0Oy9wJmd0O1xcbiAgICAgICAgICAgICAgICZsdDsvdGFiJmd0O1xcbiAgICAgICAgICAgICAgICZsdDt0YWIgbGFiZWw9XFxcIlRhYiAzXFxcIiA6aXMtZGlzYWJsZWQ9XFxcInRydWVcXFwiJmd0O1xcbiAgICAgICAgICAgICAgICAgJmx0O3AmZ3Q7XFxuICAgICAgICAgICAgICAgICAgIFRhYiAzIGNvbnRlbnRcXG4gICAgICAgICAgICAgICAgICZsdDsvcCZndDtcXG4gICAgICAgICAgICAgICAmbHQ7L3RhYiZndDtcXG4gICAgICAgICAgICAgJmx0Oy90YWJzJmd0O1xcbiAgICAgICAgICAgPC9jb2RlPlxcbiAgICAgICAgIDwvcHJlPiA8L2NvbGxhcHNhYmxlLXBhbmVsPiA8L2Rpdj4gPGgzIGNsYXNzPVxcXCJoeV9jLWhlYWRsaW5lIGh5X2MtaGVhZGxpbmUtLWg1IGh5X3QtZ3JleVxcXCI+QVBJPC9oMz4gPGRpdiBjbGFzcz1cXFwiaHlfby1sYXlvdXQgaHlfby1sYXlvdXQtLXdpdGgtZ3V0dGVyIGh5X28tbGF5b3V0LS1mbHVzaGVkXFxcIj4gPGFwaS10YWJsZSA6aXRlbXM9YXBpSXRlbXM+PC9hcGktdGFibGU+IDwvZGl2PiA8L2Rpdj4gPC9zZWN0aW9uPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vZGV2L3NyYy92aWV3cy90YWJzLXBhZ2UudnVlXG4gKiogbW9kdWxlIGlkID0gMTcyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiB2LWlmPWlzVmlzaWJsZSB0cmFuc2l0aW9uPWZhZGUgY2xhc3M9Yy1hbGVydCA6Y2xhc3M9XFxcIidjLWFsZXJ0LS0nICsgdHlwZVxcXCIgOmNsYXNzPVxcXCJ7ICdjLWFsZXJ0LS1kaXNtaXNzaWJsZSc6IGRpc21pc3NpYmxlIH1cXFwiIHJvbGU9YWxlcnQ+IDxidXR0b24gdi1pZj1kaXNtaXNzaWJsZSBAY2xpY2s9ZGlzbWlzcyB0eXBlPWJ1dHRvbiBjbGFzcz1jLWFsZXJ0X19jbG9zZS1idXR0b24gYXJpYS1sYWJlbD1DbG9zZT4gPHNwYW4gYXJpYS1oaWRkZW49dHJ1ZT4mdGltZXM7PC9zcGFuPiA8c3BhbiBjbGFzcz1oeV91LWludmlzaWJsZT5DbG9zZTwvc3Bhbj4gPC9idXR0b24+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvYWxlcnQvYWxlcnQuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE3M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1jb2xsYXBzYWJsZS1wYW5lbD4gPGgzIEBjbGljay5wcmV2ZW50PXRvZ2dsZU9wZW4gOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2MtY29sbGFwc2FibGUtcGFuZWxfX2hlYWRlci0tb3Blbic6IGlzT3BlblxcbiAgICB9XFxcIiBjbGFzcz1cXFwiYy1jb2xsYXBzYWJsZS1wYW5lbF9faGVhZGVyIGh5X2MtaGVhZGxpbmUgaHlfYy1oZWFkbGluZS0taDUgaHlfdC1ncmV5XFxcIiB2LWh0bWw9bGFiZWw+IDwvaDM+IDxkaXYgY2xhc3M9Yy1jb2xsYXBzYWJsZS1wYW5lbF9fYm9keSA6Y2xhc3M9XFxcIntcXG4gICAgJ2MtY29sbGFwc2FibGUtcGFuZWxfX2JvZHktLW9wZW4nOiBpc09wZW5cXG4gIH1cXFwiPiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy9jb2xsYXBzYWJsZS1wYW5lbC9jb2xsYXBzYWJsZS1wYW5lbC5odG1sXG4gKiogbW9kdWxlIGlkID0gMTc0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLWxlZ2FsLWNvbnRhaW5lcj4gPG9sIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX19vcmRlcmVkLWxpc3Q+IDxsaSB2LXNldC1mb2N1cz1sZWdhbC5pc1NlbGVjdGVkIGNsYXNzPWMtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0gOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2MtbGVnYWwtY29udGFpbmVyX19saXN0LWl0ZW0tLWFjdGl2ZSc6IGxlZ2FsLmlzU2VsZWN0ZWRcXG4gICAgfVxcXCIgdi1mb3I9XFxcImxlZ2FsIGluIGluZGV4ZWRMZWdhbHNcXFwiIHYtaHRtbD1sZWdhbC5jb250ZW50PiA8L2xpPiA8L29sPiA8dWwgY2xhc3M9Yy1sZWdhbC1jb250YWluZXJfX3Vub3JkZXJlZC1saXN0PiA8bGkgY2xhc3M9Yy1sZWdhbC1jb250YWluZXJfX2xpc3QtaXRlbSB2LWZvcj1cXFwibGVnYWwgaW4gbm9uSW5kZXhlZExlZ2Fsc1xcXCIgdi1odG1sPWxlZ2FsLmNvbnRlbnQ+IDwvbGk+IDwvdWw+IDwvZGl2PiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTc1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHN1cCBjbGFzcz1jLWxlZ2FsLXN1cD4gPGEgaHJlZj0jIEBjbGljay5wcmV2ZW50PWNsaWNrSGFuZGxlcj4ge3tsZWdhbENvdW50ZXJ9fSA8L2E+IDwvc3VwPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvdW50ZXIuaHRtbFxuICoqIG1vZHVsZSBpZCA9IDE3NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSBcIjxkaXYgY2xhc3M9Yy1vdmVybGF5LWNvbnRhaW5lcj4gPGRpdiBjbGFzcz1jLW92ZXJsYXktY29udGFpbmVyX19jdXJ0YWluIDpjbGFzcz1cXFwie1xcbiAgICAgICAgJ2Mtb3ZlcmxheS1jb250YWluZXJfX2N1cnRhaW4tLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgICB9XFxcIiBAY2xpY2sucHJldmVudD1cXFwiaXNWaXNpYmxlPWZhbHNlXFxcIj4gPC9kaXY+IDxkaXYgY2xhc3M9Yy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXMgOmNsYXNzPVxcXCJ7XFxuICAgICAgICAnYy1vdmVybGF5LWNvbnRhaW5lcl9fb3ZlcmxheXMtLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgICB9XFxcIj4gPHNsb3Q+PC9zbG90PiA8L2Rpdj4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LWNvbnRhaW5lci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTc3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGFydGljbGUgY2xhc3M9Yy1vdmVybGF5IHYtc2hvdz1pc1Zpc2libGU+IDxkaXYgY2xhc3M9Yy1vdmVybGF5X19ib2R5PiA8c2xvdCBuYW1lPW92ZXJsYXktYm9keT48L3Nsb3Q+IDwvZGl2PiA8aGVhZGVyIGNsYXNzPWMtb3ZlcmxheV9faGVhZGVyPiA8c2xvdCBuYW1lPW92ZXJsYXktaGVhZGVyPjwvc2xvdD4gPGJ1dHRvbiB0eXBlPWJ1dHRvbiBjbGFzcz1jLW92ZXJsYXlfX2Nsb3NlLWJ1dHRvbiBhcmlhLWxhYmVsPUNsb3NlIHRhYmluZGV4PTAgQGNsaWNrLnByZXZlbnQ9Y2xvc2VPdmVybGF5PjwvYnV0dG9uPiA8L2hlYWRlcj4gPC9hcnRpY2xlPiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS5odG1sXG4gKiogbW9kdWxlIGlkID0gMTc4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiB2LXNob3c9YWN0aXZlIGNsYXNzPWMtc3Bpbm5lciA6Y2xhc3M9XFxcInsgJ2Mtc3Bpbm5lci0tZnVsbHNjcmVlbic6IGZ1bGxTY3JlZW4gfVxcXCI+IDxzdmcgdmlld0JveD1cXFwiMCAwIDEwMCAxMDBcXFwiIHdpZHRoPTAgaGVpZ2h0PTA+IDxjaXJjbGUgc3Ryb2tlLXdpZHRoPTQgZmlsbD1ub25lIHN0cm9rZS1saW5lY2FwPXJvdW5kIHN0cm9rZS1kYXNob2Zmc2V0PTAgY3g9NTAgY3k9NTAgcj0yMD48L2NpcmNsZT4gPC9zdmc+IDxwIGNsYXNzPVxcXCJjLXNwaW5uZXJfX3RleHQgaHlfYy1jb3B5IGh5X3UtZm9udC13ZWlnaHQtLW1lZGl1bVxcXCIgdi1pZj0hIXRleHQ+e3t0ZXh0fX08L3A+IDwvZGl2PiBcIjtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtaHRtbC1sb2FkZXI/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NyYy9jb21wb25lbnRzL3NwaW5uZXIvc3Bpbm5lci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTc5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPHVsIGNsYXNzPWMtc3RlcC10cmFja2VyPiA8bGkgY2xhc3M9Yy1zdGVwLXRyYWNrZXJfX3N0ZXAgOmNsYXNzPVxcXCJ7XFxuICAgICAgJ2Mtc3RlcC10cmFja2VyX19zdGVwLS1jb21wbGV0ZSc6IGN1cnJlbnRTdGVwID4gJGluZGV4LFxcbiAgICAgICdjLXN0ZXAtdHJhY2tlcl9fc3RlcC0tYWN0aXZlJzogY3VycmVudFN0ZXAgPT09ICRpbmRleCxcXG4gICAgICAnYy1zdGVwLXRyYWNrZXJfX3NldHAtLWNsaWNrYWJsZSc6IChjdXJyZW50U3RlcCA+ICRpbmRleCAmJiBjb25maWcuaXNDbGlja2FibGUpXFxuICB9XFxcIiB2LWZvcj1cXFwic3RlcCBpbiBjb25maWcuc3RlcHNcXFwiPiA8YSA6aHJlZj1cXFwic3RlcC5saW5rIHx8IGZhbHNlXFxcIiBAY2xpY2s9XFxcImNsaWNrSGFuZGxlcigkZXZlbnQsIHN0ZXAsICRpbmRleClcXFwiIHYtaWY9Y29uZmlnLmlzQ2xpY2thYmxlPiA8c3BhbiBjbGFzcz1jLXN0ZXAtdHJhY2tlcl9faWNvbj48L3NwYW4+IDxzcGFuIGNsYXNzPWMtc3RlcC10cmFja2VyX19sYWJlbD57eyRpbmRleCArIDF9fS4ge3tzdGVwLnRpdGxlfX08L3NwYW4+IDwvYT4gPHNwYW4gdi1lbHNlIGNsYXNzPWMtc3RlcC10cmFja2VyX19pY29uPjwvc3Bhbj4gPHNwYW4gdi1lbHNlIGNsYXNzPWMtc3RlcC10cmFja2VyX19sYWJlbD57eyRpbmRleCArIDF9fS4ge3tzdGVwLnRpdGxlfX08L3NwYW4+IDwvbGk+IDwvdWw+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL3N0ZXAtdHJhY2tlci5odG1sXG4gKiogbW9kdWxlIGlkID0gMTgwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLXRhYnNfX3BhbmUgOmNsYXNzPVxcXCJ7XFxuICAgICdjLXRhYnNfX3BhbmUtLWFjdGl2ZSc6IGlzVmlzaWJsZVxcbiAgfVxcXCI+IDxzbG90Pjwvc2xvdD4gPC9kaXY+IFwiO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1odG1sLWxvYWRlcj9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYi5odG1sXG4gKiogbW9kdWxlIGlkID0gMTgxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IFwiPGRpdiBjbGFzcz1jLXRhYnM+IDx1bCBjbGFzcz1jLXRhYnNfX2hlYWRlcj4gPGxpIHYtZm9yPVxcXCJ0YWIgaW4gdGFic1xcXCIgY2xhc3M9Yy10YWJzX19oZWFkZXItaXRlbSA6Y2xhc3M9XFxcIntcXG4gICAgICAgICAgICAgICAgJ2MtdGFic19faGVhZGVyLWl0ZW0tLWFjdGl2ZSc6ICgkaW5kZXggPT09IGFjdGl2ZVRhYkluZGV4KSxcXG4gICAgICAgICAgICAgICAgJ2MtdGFic19faGVhZGVyLWl0ZW0tLWRpc2FibGVkJzogdGFiLmlzRGlzYWJsZWRcXG4gICAgICAgICAgICAgIH1cXFwiIDpkaXNhYmxlZD10YWIuZGlzYWJsZWQ+IDxhIGhyZWY9IyBAY2xpY2sucHJldmVudD1cXFwiaGFuZGxlVGFiTGlzdENsaWNrKCRpbmRleCwgdGFiKVxcXCIgdi1odG1sPXRhYi5sYWJlbD48L2E+IDwvbGk+IDwvdWw+IDxkaXYgY2xhc3M9Yy10YWJzX19ib2R5PiA8c2xvdD48L3Nsb3Q+IDwvZGl2PiA8L2Rpdj4gXCI7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLWh0bWwtbG9hZGVyP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcmMvY29tcG9uZW50cy90YWIvdGFicy5odG1sXG4gKiogbW9kdWxlIGlkID0gMTgyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3NpZGUtbmF2Lmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy9jb21wb25lbnRzL3NpZGUtbmF2L2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE4M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zaXRlLWhlYWRlci5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvY29tcG9uZW50cy9zaXRlLWhlYWRlci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxODRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vYWxlcnQtcGFnZS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2FsZXJ0LXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3MvYWxlcnQtcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxODVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xuX192dWVfc2NyaXB0X18gPSByZXF1aXJlKFwiISFiYWJlbCEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXNjcmlwdCZpbmRleD0wIS4vY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2NvbGxhcHNhYmxlLXBhbmVsLXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3MvY29sbGFwc2FibGUtcGFuZWwtcGFnZS52dWVcbiAqKiBtb2R1bGUgaWQgPSAxODZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE4N1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9sZWdhbC1wYWdlLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT10ZW1wbGF0ZSZpbmRleD0wIS4vbGVnYWwtcGFnZS52dWVcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vZGV2L3NyYy92aWV3cy9sZWdhbC1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE4OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9vdmVybGF5LXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9vdmVybGF5LXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3Mvb3ZlcmxheS1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE4OVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9zcGlubmVyLXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi9zcGlubmVyLXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3Mvc3Bpbm5lci1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5MFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9zdGVwLXRyYWNrZXItcGFnZS52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9dGVtcGxhdGUmaW5kZXg9MCEuL3N0ZXAtdHJhY2tlci1wYWdlLnZ1ZVwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9kZXYvc3JjL3ZpZXdzL3N0ZXAtdHJhY2tlci1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5MVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi90YWJzLXBhZ2UudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXRlbXBsYXRlJmluZGV4PTAhLi90YWJzLXBhZ2UudnVlXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL2Rldi9zcmMvdmlld3MvdGFicy1wYWdlLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5MlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9hbGVydC5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL2FsZXJ0L2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5M1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9jb2xsYXBzYWJsZS1wYW5lbC5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL2NvbGxhcHNhYmxlLXBhbmVsL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5NFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2xlZ2FsLWNvbnRhaW5lci5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL2xlZ2FsLWNvdW50ZXIuaHRtbFwiKVxubW9kdWxlLmV4cG9ydHMgPSBfX3Z1ZV9zY3JpcHRfXyB8fCB7fVxuaWYgKG1vZHVsZS5leHBvcnRzLl9fZXNNb2R1bGUpIG1vZHVsZS5leHBvcnRzID0gbW9kdWxlLmV4cG9ydHMuZGVmYXVsdFxuaWYgKF9fdnVlX3RlbXBsYXRlX18pIHtcbih0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwiZnVuY3Rpb25cIiA/IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zIHx8IChtb2R1bGUuZXhwb3J0cy5vcHRpb25zID0ge30pKSA6IG1vZHVsZS5leHBvcnRzKS50ZW1wbGF0ZSA9IF9fdnVlX3RlbXBsYXRlX19cbn1cblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9zcmMvY29tcG9uZW50cy9sZWdhbC9sZWdhbC1jb3VudGVyLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5NlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9vdmVybGF5LWNvbnRhaW5lci5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL292ZXJsYXkvb3ZlcmxheS1jb250YWluZXIudnVlXG4gKiogbW9kdWxlIGlkID0gMTk3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXkudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9vdmVybGF5LnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9vdmVybGF5Lmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDE5OFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5yZXF1aXJlKFwiISF2dWUtc3R5bGUtbG9hZGVyIWNzcy1sb2FkZXIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhc2FzcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3NjcmlwdF9fID0gcmVxdWlyZShcIiEhYmFiZWwhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zY3JpcHQmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi9zcGlubmVyLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvc3Bpbm5lci9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAxOTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBfX3Z1ZV9zY3JpcHRfXywgX192dWVfdGVtcGxhdGVfX1xucmVxdWlyZShcIiEhdnVlLXN0eWxlLWxvYWRlciFjc3MtbG9hZGVyIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIXNhc3MhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi9pbmRleC52dWVcIilcbl9fdnVlX3RlbXBsYXRlX18gPSByZXF1aXJlKFwiISF2dWUtaHRtbD9yZW1vdmVSZWR1bmRhbnRBdHRyaWJ1dGVzPWZhbHNlIS4vc3RlcC10cmFja2VyLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvc3RlcC10cmFja2VyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIwMFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwidmFyIF9fdnVlX3NjcmlwdF9fLCBfX3Z1ZV90ZW1wbGF0ZV9fXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi90YWIudnVlXCIpXG5fX3Z1ZV90ZW1wbGF0ZV9fID0gcmVxdWlyZShcIiEhdnVlLWh0bWw/cmVtb3ZlUmVkdW5kYW50QXR0cmlidXRlcz1mYWxzZSEuL3RhYi5odG1sXCIpXG5tb2R1bGUuZXhwb3J0cyA9IF9fdnVlX3NjcmlwdF9fIHx8IHt9XG5pZiAobW9kdWxlLmV4cG9ydHMuX19lc01vZHVsZSkgbW9kdWxlLmV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cy5kZWZhdWx0XG5pZiAoX192dWVfdGVtcGxhdGVfXykge1xuKHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJmdW5jdGlvblwiID8gKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgfHwgKG1vZHVsZS5leHBvcnRzLm9wdGlvbnMgPSB7fSkpIDogbW9kdWxlLmV4cG9ydHMpLnRlbXBsYXRlID0gX192dWVfdGVtcGxhdGVfX1xufVxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3NyYy9jb21wb25lbnRzL3RhYi90YWIudnVlXG4gKiogbW9kdWxlIGlkID0gMjAxXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgX192dWVfc2NyaXB0X18sIF9fdnVlX3RlbXBsYXRlX19cbnJlcXVpcmUoXCIhIXZ1ZS1zdHlsZS1sb2FkZXIhY3NzLWxvYWRlciEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyFzYXNzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIpXG5fX3Z1ZV9zY3JpcHRfXyA9IHJlcXVpcmUoXCIhIWJhYmVsIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c2NyaXB0JmluZGV4PTAhLi90YWJzLnZ1ZVwiKVxuX192dWVfdGVtcGxhdGVfXyA9IHJlcXVpcmUoXCIhIXZ1ZS1odG1sP3JlbW92ZVJlZHVuZGFudEF0dHJpYnV0ZXM9ZmFsc2UhLi90YWJzLmh0bWxcIilcbm1vZHVsZS5leHBvcnRzID0gX192dWVfc2NyaXB0X18gfHwge31cbmlmIChtb2R1bGUuZXhwb3J0cy5fX2VzTW9kdWxlKSBtb2R1bGUuZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzLmRlZmF1bHRcbmlmIChfX3Z1ZV90ZW1wbGF0ZV9fKSB7XG4odHlwZW9mIG1vZHVsZS5leHBvcnRzID09PSBcImZ1bmN0aW9uXCIgPyAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyB8fCAobW9kdWxlLmV4cG9ydHMub3B0aW9ucyA9IHt9KSkgOiBtb2R1bGUuZXhwb3J0cykudGVtcGxhdGUgPSBfX3Z1ZV90ZW1wbGF0ZV9fXG59XG5cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vc3JjL2NvbXBvbmVudHMvdGFiL3RhYnMudnVlXG4gKiogbW9kdWxlIGlkID0gMjAyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKiFcbiAqIHZ1ZS1yb3V0ZXIgdjAuNy4xM1xuICogKGMpIDIwMTYgRXZhbiBZb3VcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuKGZ1bmN0aW9uIChnbG9iYWwsIGZhY3RvcnkpIHtcbiAgdHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnICYmIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnID8gbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCkgOlxuICB0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQgPyBkZWZpbmUoZmFjdG9yeSkgOlxuICBnbG9iYWwuVnVlUm91dGVyID0gZmFjdG9yeSgpO1xufSh0aGlzLCBmdW5jdGlvbiAoKSB7ICd1c2Ugc3RyaWN0JztcblxuICB2YXIgYmFiZWxIZWxwZXJzID0ge307XG5cbiAgYmFiZWxIZWxwZXJzLmNsYXNzQ2FsbENoZWNrID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICAgIGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICAgIH1cbiAgfTtcbiAgZnVuY3Rpb24gVGFyZ2V0KHBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSB7XG4gICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICB0aGlzLm1hdGNoZXIgPSBtYXRjaGVyO1xuICAgIHRoaXMuZGVsZWdhdGUgPSBkZWxlZ2F0ZTtcbiAgfVxuXG4gIFRhcmdldC5wcm90b3R5cGUgPSB7XG4gICAgdG86IGZ1bmN0aW9uIHRvKHRhcmdldCwgY2FsbGJhY2spIHtcbiAgICAgIHZhciBkZWxlZ2F0ZSA9IHRoaXMuZGVsZWdhdGU7XG5cbiAgICAgIGlmIChkZWxlZ2F0ZSAmJiBkZWxlZ2F0ZS53aWxsQWRkUm91dGUpIHtcbiAgICAgICAgdGFyZ2V0ID0gZGVsZWdhdGUud2lsbEFkZFJvdXRlKHRoaXMubWF0Y2hlci50YXJnZXQsIHRhcmdldCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubWF0Y2hlci5hZGQodGhpcy5wYXRoLCB0YXJnZXQpO1xuXG4gICAgICBpZiAoY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKGNhbGxiYWNrLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIllvdSBtdXN0IGhhdmUgYW4gYXJndW1lbnQgaW4gdGhlIGZ1bmN0aW9uIHBhc3NlZCB0byBgdG9gXCIpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubWF0Y2hlci5hZGRDaGlsZCh0aGlzLnBhdGgsIHRhcmdldCwgY2FsbGJhY2ssIHRoaXMuZGVsZWdhdGUpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIE1hdGNoZXIodGFyZ2V0KSB7XG4gICAgdGhpcy5yb3V0ZXMgPSB7fTtcbiAgICB0aGlzLmNoaWxkcmVuID0ge307XG4gICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gIH1cblxuICBNYXRjaGVyLnByb3RvdHlwZSA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uIGFkZChwYXRoLCBoYW5kbGVyKSB7XG4gICAgICB0aGlzLnJvdXRlc1twYXRoXSA9IGhhbmRsZXI7XG4gICAgfSxcblxuICAgIGFkZENoaWxkOiBmdW5jdGlvbiBhZGRDaGlsZChwYXRoLCB0YXJnZXQsIGNhbGxiYWNrLCBkZWxlZ2F0ZSkge1xuICAgICAgdmFyIG1hdGNoZXIgPSBuZXcgTWF0Y2hlcih0YXJnZXQpO1xuICAgICAgdGhpcy5jaGlsZHJlbltwYXRoXSA9IG1hdGNoZXI7XG5cbiAgICAgIHZhciBtYXRjaCA9IGdlbmVyYXRlTWF0Y2gocGF0aCwgbWF0Y2hlciwgZGVsZWdhdGUpO1xuXG4gICAgICBpZiAoZGVsZWdhdGUgJiYgZGVsZWdhdGUuY29udGV4dEVudGVyZWQpIHtcbiAgICAgICAgZGVsZWdhdGUuY29udGV4dEVudGVyZWQodGFyZ2V0LCBtYXRjaCk7XG4gICAgICB9XG5cbiAgICAgIGNhbGxiYWNrKG1hdGNoKTtcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2VuZXJhdGVNYXRjaChzdGFydGluZ1BhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChwYXRoLCBuZXN0ZWRDYWxsYmFjaykge1xuICAgICAgdmFyIGZ1bGxQYXRoID0gc3RhcnRpbmdQYXRoICsgcGF0aDtcblxuICAgICAgaWYgKG5lc3RlZENhbGxiYWNrKSB7XG4gICAgICAgIG5lc3RlZENhbGxiYWNrKGdlbmVyYXRlTWF0Y2goZnVsbFBhdGgsIG1hdGNoZXIsIGRlbGVnYXRlKSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gbmV3IFRhcmdldChzdGFydGluZ1BhdGggKyBwYXRoLCBtYXRjaGVyLCBkZWxlZ2F0ZSk7XG4gICAgICB9XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFJvdXRlKHJvdXRlQXJyYXksIHBhdGgsIGhhbmRsZXIpIHtcbiAgICB2YXIgbGVuID0gMDtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHJvdXRlQXJyYXkubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBsZW4gKz0gcm91dGVBcnJheVtpXS5wYXRoLmxlbmd0aDtcbiAgICB9XG5cbiAgICBwYXRoID0gcGF0aC5zdWJzdHIobGVuKTtcbiAgICB2YXIgcm91dGUgPSB7IHBhdGg6IHBhdGgsIGhhbmRsZXI6IGhhbmRsZXIgfTtcbiAgICByb3V0ZUFycmF5LnB1c2gocm91dGUpO1xuICB9XG5cbiAgZnVuY3Rpb24gZWFjaFJvdXRlKGJhc2VSb3V0ZSwgbWF0Y2hlciwgY2FsbGJhY2ssIGJpbmRpbmcpIHtcbiAgICB2YXIgcm91dGVzID0gbWF0Y2hlci5yb3V0ZXM7XG5cbiAgICBmb3IgKHZhciBwYXRoIGluIHJvdXRlcykge1xuICAgICAgaWYgKHJvdXRlcy5oYXNPd25Qcm9wZXJ0eShwYXRoKSkge1xuICAgICAgICB2YXIgcm91dGVBcnJheSA9IGJhc2VSb3V0ZS5zbGljZSgpO1xuICAgICAgICBhZGRSb3V0ZShyb3V0ZUFycmF5LCBwYXRoLCByb3V0ZXNbcGF0aF0pO1xuXG4gICAgICAgIGlmIChtYXRjaGVyLmNoaWxkcmVuW3BhdGhdKSB7XG4gICAgICAgICAgZWFjaFJvdXRlKHJvdXRlQXJyYXksIG1hdGNoZXIuY2hpbGRyZW5bcGF0aF0sIGNhbGxiYWNrLCBiaW5kaW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjYWxsYmFjay5jYWxsKGJpbmRpbmcsIHJvdXRlQXJyYXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbWFwIChjYWxsYmFjaywgYWRkUm91dGVDYWxsYmFjaykge1xuICAgIHZhciBtYXRjaGVyID0gbmV3IE1hdGNoZXIoKTtcblxuICAgIGNhbGxiYWNrKGdlbmVyYXRlTWF0Y2goXCJcIiwgbWF0Y2hlciwgdGhpcy5kZWxlZ2F0ZSkpO1xuXG4gICAgZWFjaFJvdXRlKFtdLCBtYXRjaGVyLCBmdW5jdGlvbiAocm91dGUpIHtcbiAgICAgIGlmIChhZGRSb3V0ZUNhbGxiYWNrKSB7XG4gICAgICAgIGFkZFJvdXRlQ2FsbGJhY2sodGhpcywgcm91dGUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hZGQocm91dGUpO1xuICAgICAgfVxuICAgIH0sIHRoaXMpO1xuICB9XG5cbiAgdmFyIHNwZWNpYWxzID0gWycvJywgJy4nLCAnKicsICcrJywgJz8nLCAnfCcsICcoJywgJyknLCAnWycsICddJywgJ3snLCAnfScsICdcXFxcJ107XG5cbiAgdmFyIGVzY2FwZVJlZ2V4ID0gbmV3IFJlZ0V4cCgnKFxcXFwnICsgc3BlY2lhbHMuam9pbignfFxcXFwnKSArICcpJywgJ2cnKTtcblxuICB2YXIgbm9XYXJuaW5nID0gZmFsc2U7XG4gIGZ1bmN0aW9uIHdhcm4obXNnKSB7XG4gICAgaWYgKCFub1dhcm5pbmcgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdbdnVlLXJvdXRlcl0gJyArIG1zZyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gdHJ5RGVjb2RlKHVyaSwgYXNDb21wb25lbnQpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIGFzQ29tcG9uZW50ID8gZGVjb2RlVVJJQ29tcG9uZW50KHVyaSkgOiBkZWNvZGVVUkkodXJpKTtcbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICB3YXJuKCdtYWxmb3JtZWQgVVJJJyArIChhc0NvbXBvbmVudCA/ICcgY29tcG9uZW50OiAnIDogJzogJykgKyB1cmkpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGlzQXJyYXkodGVzdCkge1xuICAgIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodGVzdCkgPT09IFwiW29iamVjdCBBcnJheV1cIjtcbiAgfVxuXG4gIC8vIEEgU2VnbWVudCByZXByZXNlbnRzIGEgc2VnbWVudCBpbiB0aGUgb3JpZ2luYWwgcm91dGUgZGVzY3JpcHRpb24uXG4gIC8vIEVhY2ggU2VnbWVudCB0eXBlIHByb3ZpZGVzIGFuIGBlYWNoQ2hhcmAgYW5kIGByZWdleGAgbWV0aG9kLlxuICAvL1xuICAvLyBUaGUgYGVhY2hDaGFyYCBtZXRob2QgaW52b2tlcyB0aGUgY2FsbGJhY2sgd2l0aCBvbmUgb3IgbW9yZSBjaGFyYWN0ZXJcbiAgLy8gc3BlY2lmaWNhdGlvbnMuIEEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gY29uc3VtZXMgb25lIG9yIG1vcmUgaW5wdXRcbiAgLy8gY2hhcmFjdGVycy5cbiAgLy9cbiAgLy8gVGhlIGByZWdleGAgbWV0aG9kIHJldHVybnMgYSByZWdleCBmcmFnbWVudCBmb3IgdGhlIHNlZ21lbnQuIElmIHRoZVxuICAvLyBzZWdtZW50IGlzIGEgZHluYW1pYyBvZiBzdGFyIHNlZ21lbnQsIHRoZSByZWdleCBmcmFnbWVudCBhbHNvIGluY2x1ZGVzXG4gIC8vIGEgY2FwdHVyZS5cbiAgLy9cbiAgLy8gQSBjaGFyYWN0ZXIgc3BlY2lmaWNhdGlvbiBjb250YWluczpcbiAgLy9cbiAgLy8gKiBgdmFsaWRDaGFyc2A6IGEgU3RyaW5nIHdpdGggYSBsaXN0IG9mIGFsbCB2YWxpZCBjaGFyYWN0ZXJzLCBvclxuICAvLyAqIGBpbnZhbGlkQ2hhcnNgOiBhIFN0cmluZyB3aXRoIGEgbGlzdCBvZiBhbGwgaW52YWxpZCBjaGFyYWN0ZXJzXG4gIC8vICogYHJlcGVhdGA6IHRydWUgaWYgdGhlIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIGNhbiByZXBlYXRcblxuICBmdW5jdGlvbiBTdGF0aWNTZWdtZW50KHN0cmluZykge1xuICAgIHRoaXMuc3RyaW5nID0gc3RyaW5nO1xuICB9XG4gIFN0YXRpY1NlZ21lbnQucHJvdG90eXBlID0ge1xuICAgIGVhY2hDaGFyOiBmdW5jdGlvbiBlYWNoQ2hhcihjYWxsYmFjaykge1xuICAgICAgdmFyIHN0cmluZyA9IHRoaXMuc3RyaW5nLFxuICAgICAgICAgIGNoO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IHN0cmluZy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgY2ggPSBzdHJpbmcuY2hhckF0KGkpO1xuICAgICAgICBjYWxsYmFjayh7IHZhbGlkQ2hhcnM6IGNoIH0pO1xuICAgICAgfVxuICAgIH0sXG5cbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJpbmcucmVwbGFjZShlc2NhcGVSZWdleCwgJ1xcXFwkMScpO1xuICAgIH0sXG5cbiAgICBnZW5lcmF0ZTogZnVuY3Rpb24gZ2VuZXJhdGUoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdHJpbmc7XG4gICAgfVxuICB9O1xuXG4gIGZ1bmN0aW9uIER5bmFtaWNTZWdtZW50KG5hbWUpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICB9XG4gIER5bmFtaWNTZWdtZW50LnByb3RvdHlwZSA9IHtcbiAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoY2FsbGJhY2spIHtcbiAgICAgIGNhbGxiYWNrKHsgaW52YWxpZENoYXJzOiBcIi9cIiwgcmVwZWF0OiB0cnVlIH0pO1xuICAgIH0sXG5cbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG4gICAgICByZXR1cm4gXCIoW14vXSspXCI7XG4gICAgfSxcblxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShwYXJhbXMpIHtcbiAgICAgIHZhciB2YWwgPSBwYXJhbXNbdGhpcy5uYW1lXTtcbiAgICAgIHJldHVybiB2YWwgPT0gbnVsbCA/IFwiOlwiICsgdGhpcy5uYW1lIDogdmFsO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBTdGFyU2VnbWVudChuYW1lKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgfVxuICBTdGFyU2VnbWVudC5wcm90b3R5cGUgPSB7XG4gICAgZWFjaENoYXI6IGZ1bmN0aW9uIGVhY2hDaGFyKGNhbGxiYWNrKSB7XG4gICAgICBjYWxsYmFjayh7IGludmFsaWRDaGFyczogXCJcIiwgcmVwZWF0OiB0cnVlIH0pO1xuICAgIH0sXG5cbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG4gICAgICByZXR1cm4gXCIoLispXCI7XG4gICAgfSxcblxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZShwYXJhbXMpIHtcbiAgICAgIHZhciB2YWwgPSBwYXJhbXNbdGhpcy5uYW1lXTtcbiAgICAgIHJldHVybiB2YWwgPT0gbnVsbCA/IFwiOlwiICsgdGhpcy5uYW1lIDogdmFsO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBFcHNpbG9uU2VnbWVudCgpIHt9XG4gIEVwc2lsb25TZWdtZW50LnByb3RvdHlwZSA9IHtcbiAgICBlYWNoQ2hhcjogZnVuY3Rpb24gZWFjaENoYXIoKSB7fSxcbiAgICByZWdleDogZnVuY3Rpb24gcmVnZXgoKSB7XG4gICAgICByZXR1cm4gXCJcIjtcbiAgICB9LFxuICAgIGdlbmVyYXRlOiBmdW5jdGlvbiBnZW5lcmF0ZSgpIHtcbiAgICAgIHJldHVybiBcIlwiO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBwYXJzZShyb3V0ZSwgbmFtZXMsIHNwZWNpZmljaXR5KSB7XG4gICAgLy8gbm9ybWFsaXplIHJvdXRlIGFzIG5vdCBzdGFydGluZyB3aXRoIGEgXCIvXCIuIFJlY29nbml0aW9uIHdpbGxcbiAgICAvLyBhbHNvIG5vcm1hbGl6ZS5cbiAgICBpZiAocm91dGUuY2hhckF0KDApID09PSBcIi9cIikge1xuICAgICAgcm91dGUgPSByb3V0ZS5zdWJzdHIoMSk7XG4gICAgfVxuXG4gICAgdmFyIHNlZ21lbnRzID0gcm91dGUuc3BsaXQoXCIvXCIpLFxuICAgICAgICByZXN1bHRzID0gW107XG5cbiAgICAvLyBBIHJvdXRlcyBoYXMgc3BlY2lmaWNpdHkgZGV0ZXJtaW5lZCBieSB0aGUgb3JkZXIgdGhhdCBpdHMgZGlmZmVyZW50IHNlZ21lbnRzXG4gICAgLy8gYXBwZWFyIGluLiBUaGlzIHN5c3RlbSBtaXJyb3JzIGhvdyB0aGUgbWFnbml0dWRlIG9mIG51bWJlcnMgd3JpdHRlbiBhcyBzdHJpbmdzXG4gICAgLy8gd29ya3MuXG4gICAgLy8gQ29uc2lkZXIgYSBudW1iZXIgd3JpdHRlbiBhczogXCJhYmNcIi4gQW4gZXhhbXBsZSB3b3VsZCBiZSBcIjIwMFwiLiBBbnkgb3RoZXIgbnVtYmVyIHdyaXR0ZW5cbiAgICAvLyBcInh5elwiIHdpbGwgYmUgc21hbGxlciB0aGFuIFwiYWJjXCIgc28gbG9uZyBhcyBgYSA+IHpgLiBGb3IgaW5zdGFuY2UsIFwiMTk5XCIgaXMgc21hbGxlclxuICAgIC8vIHRoZW4gXCIyMDBcIiwgZXZlbiB0aG91Z2ggXCJ5XCIgYW5kIFwielwiICh3aGljaCBhcmUgYm90aCA5KSBhcmUgbGFyZ2VyIHRoYW4gXCIwXCIgKHRoZSB2YWx1ZVxuICAgIC8vIG9mIChgYmAgYW5kIGBjYCkuIFRoaXMgaXMgYmVjYXVzZSB0aGUgbGVhZGluZyBzeW1ib2wsIFwiMlwiLCBpcyBsYXJnZXIgdGhhbiB0aGUgb3RoZXJcbiAgICAvLyBsZWFkaW5nIHN5bWJvbCwgXCIxXCIuXG4gICAgLy8gVGhlIHJ1bGUgaXMgdGhhdCBzeW1ib2xzIHRvIHRoZSBsZWZ0IGNhcnJ5IG1vcmUgd2VpZ2h0IHRoYW4gc3ltYm9scyB0byB0aGUgcmlnaHRcbiAgICAvLyB3aGVuIGEgbnVtYmVyIGlzIHdyaXR0ZW4gb3V0IGFzIGEgc3RyaW5nLiBJbiB0aGUgYWJvdmUgc3RyaW5ncywgdGhlIGxlYWRpbmcgZGlnaXRcbiAgICAvLyByZXByZXNlbnRzIGhvdyBtYW55IDEwMCdzIGFyZSBpbiB0aGUgbnVtYmVyLCBhbmQgaXQgY2FycmllcyBtb3JlIHdlaWdodCB0aGFuIHRoZSBtaWRkbGVcbiAgICAvLyBudW1iZXIgd2hpY2ggcmVwcmVzZW50cyBob3cgbWFueSAxMCdzIGFyZSBpbiB0aGUgbnVtYmVyLlxuICAgIC8vIFRoaXMgc3lzdGVtIG9mIG51bWJlciBtYWduaXR1ZGUgd29ya3Mgd2VsbCBmb3Igcm91dGUgc3BlY2lmaWNpdHksIHRvby4gQSByb3V0ZSB3cml0dGVuIGFzXG4gICAgLy8gYGEvYi9jYCB3aWxsIGJlIG1vcmUgc3BlY2lmaWMgdGhhbiBgeC95L3pgIGFzIGxvbmcgYXMgYGFgIGlzIG1vcmUgc3BlY2lmaWMgdGhhblxuICAgIC8vIGB4YCwgaXJyZXNwZWN0aXZlIG9mIHRoZSBvdGhlciBwYXJ0cy5cbiAgICAvLyBCZWNhdXNlIG9mIHRoaXMgc2ltaWxhcml0eSwgd2UgYXNzaWduIGVhY2ggdHlwZSBvZiBzZWdtZW50IGEgbnVtYmVyIHZhbHVlIHdyaXR0ZW4gYXMgYVxuICAgIC8vIHN0cmluZy4gV2UgY2FuIGZpbmQgdGhlIHNwZWNpZmljaXR5IG9mIGNvbXBvdW5kIHJvdXRlcyBieSBjb25jYXRlbmF0aW5nIHRoZXNlIHN0cmluZ3NcbiAgICAvLyB0b2dldGhlciwgZnJvbSBsZWZ0IHRvIHJpZ2h0LiBBZnRlciB3ZSBoYXZlIGxvb3BlZCB0aHJvdWdoIGFsbCBvZiB0aGUgc2VnbWVudHMsXG4gICAgLy8gd2UgY29udmVydCB0aGUgc3RyaW5nIHRvIGEgbnVtYmVyLlxuICAgIHNwZWNpZmljaXR5LnZhbCA9ICcnO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV0sXG4gICAgICAgICAgbWF0Y2g7XG5cbiAgICAgIGlmIChtYXRjaCA9IHNlZ21lbnQubWF0Y2goL146KFteXFwvXSspJC8pKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgRHluYW1pY1NlZ21lbnQobWF0Y2hbMV0pKTtcbiAgICAgICAgbmFtZXMucHVzaChtYXRjaFsxXSk7XG4gICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMyc7XG4gICAgICB9IGVsc2UgaWYgKG1hdGNoID0gc2VnbWVudC5tYXRjaCgvXlxcKihbXlxcL10rKSQvKSkge1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFN0YXJTZWdtZW50KG1hdGNoWzFdKSk7XG4gICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMic7XG4gICAgICAgIG5hbWVzLnB1c2gobWF0Y2hbMV0pO1xuICAgICAgfSBlbHNlIGlmIChzZWdtZW50ID09PSBcIlwiKSB7XG4gICAgICAgIHJlc3VsdHMucHVzaChuZXcgRXBzaWxvblNlZ21lbnQoKSk7XG4gICAgICAgIHNwZWNpZmljaXR5LnZhbCArPSAnMSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXN1bHRzLnB1c2gobmV3IFN0YXRpY1NlZ21lbnQoc2VnbWVudCkpO1xuICAgICAgICBzcGVjaWZpY2l0eS52YWwgKz0gJzQnO1xuICAgICAgfVxuICAgIH1cblxuICAgIHNwZWNpZmljaXR5LnZhbCA9ICtzcGVjaWZpY2l0eS52YWw7XG5cbiAgICByZXR1cm4gcmVzdWx0cztcbiAgfVxuXG4gIC8vIEEgU3RhdGUgaGFzIGEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYW5kIChgY2hhclNwZWNgKSBhbmQgYSBsaXN0IG9mIHBvc3NpYmxlXG4gIC8vIHN1YnNlcXVlbnQgc3RhdGVzIChgbmV4dFN0YXRlc2ApLlxuICAvL1xuICAvLyBJZiBhIFN0YXRlIGlzIGFuIGFjY2VwdGluZyBzdGF0ZSwgaXQgd2lsbCBhbHNvIGhhdmUgc2V2ZXJhbCBhZGRpdGlvbmFsXG4gIC8vIHByb3BlcnRpZXM6XG4gIC8vXG4gIC8vICogYHJlZ2V4YDogQSByZWd1bGFyIGV4cHJlc3Npb24gdGhhdCBpcyB1c2VkIHRvIGV4dHJhY3QgcGFyYW1ldGVycyBmcm9tIHBhdGhzXG4gIC8vICAgdGhhdCByZWFjaGVkIHRoaXMgYWNjZXB0aW5nIHN0YXRlLlxuICAvLyAqIGBoYW5kbGVyc2A6IEluZm9ybWF0aW9uIG9uIGhvdyB0byBjb252ZXJ0IHRoZSBsaXN0IG9mIGNhcHR1cmVzIGludG8gY2FsbHNcbiAgLy8gICB0byByZWdpc3RlcmVkIGhhbmRsZXJzIHdpdGggdGhlIHNwZWNpZmllZCBwYXJhbWV0ZXJzXG4gIC8vICogYHR5cGVzYDogSG93IG1hbnkgc3RhdGljLCBkeW5hbWljIG9yIHN0YXIgc2VnbWVudHMgaW4gdGhpcyByb3V0ZS4gVXNlZCB0b1xuICAvLyAgIGRlY2lkZSB3aGljaCByb3V0ZSB0byB1c2UgaWYgbXVsdGlwbGUgcmVnaXN0ZXJlZCByb3V0ZXMgbWF0Y2ggYSBwYXRoLlxuICAvL1xuICAvLyBDdXJyZW50bHksIFN0YXRlIGlzIGltcGxlbWVudGVkIG5haXZlbHkgYnkgbG9vcGluZyBvdmVyIGBuZXh0U3RhdGVzYCBhbmRcbiAgLy8gY29tcGFyaW5nIGEgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWdhaW5zdCBhIGNoYXJhY3Rlci4gQSBtb3JlIGVmZmljaWVudFxuICAvLyBpbXBsZW1lbnRhdGlvbiB3b3VsZCB1c2UgYSBoYXNoIG9mIGtleXMgcG9pbnRpbmcgYXQgb25lIG9yIG1vcmUgbmV4dCBzdGF0ZXMuXG5cbiAgZnVuY3Rpb24gU3RhdGUoY2hhclNwZWMpIHtcbiAgICB0aGlzLmNoYXJTcGVjID0gY2hhclNwZWM7XG4gICAgdGhpcy5uZXh0U3RhdGVzID0gW107XG4gIH1cblxuICBTdGF0ZS5wcm90b3R5cGUgPSB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoY2hhclNwZWMpIHtcbiAgICAgIHZhciBuZXh0U3RhdGVzID0gdGhpcy5uZXh0U3RhdGVzO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5leHRTdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciBjaGlsZCA9IG5leHRTdGF0ZXNbaV07XG5cbiAgICAgICAgdmFyIGlzRXF1YWwgPSBjaGlsZC5jaGFyU3BlYy52YWxpZENoYXJzID09PSBjaGFyU3BlYy52YWxpZENoYXJzO1xuICAgICAgICBpc0VxdWFsID0gaXNFcXVhbCAmJiBjaGlsZC5jaGFyU3BlYy5pbnZhbGlkQ2hhcnMgPT09IGNoYXJTcGVjLmludmFsaWRDaGFycztcblxuICAgICAgICBpZiAoaXNFcXVhbCkge1xuICAgICAgICAgIHJldHVybiBjaGlsZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sXG5cbiAgICBwdXQ6IGZ1bmN0aW9uIHB1dChjaGFyU3BlYykge1xuICAgICAgdmFyIHN0YXRlO1xuXG4gICAgICAvLyBJZiB0aGUgY2hhcmFjdGVyIHNwZWNpZmljYXRpb24gYWxyZWFkeSBleGlzdHMgaW4gYSBjaGlsZCBvZiB0aGUgY3VycmVudFxuICAgICAgLy8gc3RhdGUsIGp1c3QgcmV0dXJuIHRoYXQgc3RhdGUuXG4gICAgICBpZiAoc3RhdGUgPSB0aGlzLmdldChjaGFyU3BlYykpIHtcbiAgICAgICAgcmV0dXJuIHN0YXRlO1xuICAgICAgfVxuXG4gICAgICAvLyBNYWtlIGEgbmV3IHN0YXRlIGZvciB0aGUgY2hhcmFjdGVyIHNwZWNcbiAgICAgIHN0YXRlID0gbmV3IFN0YXRlKGNoYXJTcGVjKTtcblxuICAgICAgLy8gSW5zZXJ0IHRoZSBuZXcgc3RhdGUgYXMgYSBjaGlsZCBvZiB0aGUgY3VycmVudCBzdGF0ZVxuICAgICAgdGhpcy5uZXh0U3RhdGVzLnB1c2goc3RhdGUpO1xuXG4gICAgICAvLyBJZiB0aGlzIGNoYXJhY3RlciBzcGVjaWZpY2F0aW9uIHJlcGVhdHMsIGluc2VydCB0aGUgbmV3IHN0YXRlIGFzIGEgY2hpbGRcbiAgICAgIC8vIG9mIGl0c2VsZi4gTm90ZSB0aGF0IHRoaXMgd2lsbCBub3QgdHJpZ2dlciBhbiBpbmZpbml0ZSBsb29wIGJlY2F1c2UgZWFjaFxuICAgICAgLy8gdHJhbnNpdGlvbiBkdXJpbmcgcmVjb2duaXRpb24gY29uc3VtZXMgYSBjaGFyYWN0ZXIuXG4gICAgICBpZiAoY2hhclNwZWMucmVwZWF0KSB7XG4gICAgICAgIHN0YXRlLm5leHRTdGF0ZXMucHVzaChzdGF0ZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJldHVybiB0aGUgbmV3IHN0YXRlXG4gICAgICByZXR1cm4gc3RhdGU7XG4gICAgfSxcblxuICAgIC8vIEZpbmQgYSBsaXN0IG9mIGNoaWxkIHN0YXRlcyBtYXRjaGluZyB0aGUgbmV4dCBjaGFyYWN0ZXJcbiAgICBtYXRjaDogZnVuY3Rpb24gbWF0Y2goY2gpIHtcbiAgICAgIC8vIERFQlVHIFwiUHJvY2Vzc2luZyBgXCIgKyBjaCArIFwiYDpcIlxuICAgICAgdmFyIG5leHRTdGF0ZXMgPSB0aGlzLm5leHRTdGF0ZXMsXG4gICAgICAgICAgY2hpbGQsXG4gICAgICAgICAgY2hhclNwZWMsXG4gICAgICAgICAgY2hhcnM7XG5cbiAgICAgIC8vIERFQlVHIFwiICBcIiArIGRlYnVnU3RhdGUodGhpcylcbiAgICAgIHZhciByZXR1cm5lZCA9IFtdO1xuXG4gICAgICBmb3IgKHZhciBpID0gMCwgbCA9IG5leHRTdGF0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIGNoaWxkID0gbmV4dFN0YXRlc1tpXTtcblxuICAgICAgICBjaGFyU3BlYyA9IGNoaWxkLmNoYXJTcGVjO1xuXG4gICAgICAgIGlmICh0eXBlb2YgKGNoYXJzID0gY2hhclNwZWMudmFsaWRDaGFycykgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgaWYgKGNoYXJzLmluZGV4T2YoY2gpICE9PSAtMSkge1xuICAgICAgICAgICAgcmV0dXJuZWQucHVzaChjaGlsZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiAoY2hhcnMgPSBjaGFyU3BlYy5pbnZhbGlkQ2hhcnMpICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIGlmIChjaGFycy5pbmRleE9mKGNoKSA9PT0gLTEpIHtcbiAgICAgICAgICAgIHJldHVybmVkLnB1c2goY2hpbGQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmV0dXJuZWQ7XG4gICAgfVxuXG4gICAgLyoqIElGIERFQlVHXG4gICAgLCBkZWJ1ZzogZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgY2hhclNwZWMgPSB0aGlzLmNoYXJTcGVjLFxuICAgICAgICAgIGRlYnVnID0gXCJbXCIsXG4gICAgICAgICAgY2hhcnMgPSBjaGFyU3BlYy52YWxpZENoYXJzIHx8IGNoYXJTcGVjLmludmFsaWRDaGFycztcbiAgICAgICBpZiAoY2hhclNwZWMuaW52YWxpZENoYXJzKSB7IGRlYnVnICs9IFwiXlwiOyB9XG4gICAgICBkZWJ1ZyArPSBjaGFycztcbiAgICAgIGRlYnVnICs9IFwiXVwiO1xuICAgICAgIGlmIChjaGFyU3BlYy5yZXBlYXQpIHsgZGVidWcgKz0gXCIrXCI7IH1cbiAgICAgICByZXR1cm4gZGVidWc7XG4gICAgfVxuICAgIEVORCBJRiAqKi9cbiAgfTtcblxuICAvKiogSUYgREVCVUdcbiAgZnVuY3Rpb24gZGVidWcobG9nKSB7XG4gICAgY29uc29sZS5sb2cobG9nKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlYnVnU3RhdGUoc3RhdGUpIHtcbiAgICByZXR1cm4gc3RhdGUubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24obikge1xuICAgICAgaWYgKG4ubmV4dFN0YXRlcy5sZW5ndGggPT09IDApIHsgcmV0dXJuIFwiKCBcIiArIG4uZGVidWcoKSArIFwiIFthY2NlcHRpbmddIClcIjsgfVxuICAgICAgcmV0dXJuIFwiKCBcIiArIG4uZGVidWcoKSArIFwiIDx0aGVuPiBcIiArIG4ubmV4dFN0YXRlcy5tYXAoZnVuY3Rpb24ocykgeyByZXR1cm4gcy5kZWJ1ZygpIH0pLmpvaW4oXCIgb3IgXCIpICsgXCIgKVwiO1xuICAgIH0pLmpvaW4oXCIsIFwiKVxuICB9XG4gIEVORCBJRiAqKi9cblxuICAvLyBTb3J0IHRoZSByb3V0ZXMgYnkgc3BlY2lmaWNpdHlcbiAgZnVuY3Rpb24gc29ydFNvbHV0aW9ucyhzdGF0ZXMpIHtcbiAgICByZXR1cm4gc3RhdGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBiLnNwZWNpZmljaXR5LnZhbCAtIGEuc3BlY2lmaWNpdHkudmFsO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVjb2duaXplQ2hhcihzdGF0ZXMsIGNoKSB7XG4gICAgdmFyIG5leHRTdGF0ZXMgPSBbXTtcblxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gc3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgdmFyIHN0YXRlID0gc3RhdGVzW2ldO1xuXG4gICAgICBuZXh0U3RhdGVzID0gbmV4dFN0YXRlcy5jb25jYXQoc3RhdGUubWF0Y2goY2gpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV4dFN0YXRlcztcbiAgfVxuXG4gIHZhciBvQ3JlYXRlID0gT2JqZWN0LmNyZWF0ZSB8fCBmdW5jdGlvbiAocHJvdG8pIHtcbiAgICBmdW5jdGlvbiBGKCkge31cbiAgICBGLnByb3RvdHlwZSA9IHByb3RvO1xuICAgIHJldHVybiBuZXcgRigpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpIHtcbiAgICB0aGlzLnF1ZXJ5UGFyYW1zID0gcXVlcnlQYXJhbXMgfHwge307XG4gIH1cbiAgUmVjb2duaXplUmVzdWx0cy5wcm90b3R5cGUgPSBvQ3JlYXRlKHtcbiAgICBzcGxpY2U6IEFycmF5LnByb3RvdHlwZS5zcGxpY2UsXG4gICAgc2xpY2U6IEFycmF5LnByb3RvdHlwZS5zbGljZSxcbiAgICBwdXNoOiBBcnJheS5wcm90b3R5cGUucHVzaCxcbiAgICBsZW5ndGg6IDAsXG4gICAgcXVlcnlQYXJhbXM6IG51bGxcbiAgfSk7XG5cbiAgZnVuY3Rpb24gZmluZEhhbmRsZXIoc3RhdGUsIHBhdGgsIHF1ZXJ5UGFyYW1zKSB7XG4gICAgdmFyIGhhbmRsZXJzID0gc3RhdGUuaGFuZGxlcnMsXG4gICAgICAgIHJlZ2V4ID0gc3RhdGUucmVnZXg7XG4gICAgdmFyIGNhcHR1cmVzID0gcGF0aC5tYXRjaChyZWdleCksXG4gICAgICAgIGN1cnJlbnRDYXB0dXJlID0gMTtcbiAgICB2YXIgcmVzdWx0ID0gbmV3IFJlY29nbml6ZVJlc3VsdHMocXVlcnlQYXJhbXMpO1xuXG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBoYW5kbGVyID0gaGFuZGxlcnNbaV0sXG4gICAgICAgICAgbmFtZXMgPSBoYW5kbGVyLm5hbWVzLFxuICAgICAgICAgIHBhcmFtcyA9IHt9O1xuXG4gICAgICBmb3IgKHZhciBqID0gMCwgbSA9IG5hbWVzLmxlbmd0aDsgaiA8IG07IGorKykge1xuICAgICAgICBwYXJhbXNbbmFtZXNbal1dID0gY2FwdHVyZXNbY3VycmVudENhcHR1cmUrK107XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdC5wdXNoKHsgaGFuZGxlcjogaGFuZGxlci5oYW5kbGVyLCBwYXJhbXM6IHBhcmFtcywgaXNEeW5hbWljOiAhIW5hbWVzLmxlbmd0aCB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkU2VnbWVudChjdXJyZW50U3RhdGUsIHNlZ21lbnQpIHtcbiAgICBzZWdtZW50LmVhY2hDaGFyKGZ1bmN0aW9uIChjaCkge1xuICAgICAgdmFyIHN0YXRlO1xuXG4gICAgICBjdXJyZW50U3RhdGUgPSBjdXJyZW50U3RhdGUucHV0KGNoKTtcbiAgICB9KTtcblxuICAgIHJldHVybiBjdXJyZW50U3RhdGU7XG4gIH1cblxuICBmdW5jdGlvbiBkZWNvZGVRdWVyeVBhcmFtUGFydChwYXJ0KSB7XG4gICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvaHRtbDQwMS9pbnRlcmFjdC9mb3Jtcy5odG1sI2gtMTcuMTMuNC4xXG4gICAgcGFydCA9IHBhcnQucmVwbGFjZSgvXFwrL2dtLCAnJTIwJyk7XG4gICAgcmV0dXJuIHRyeURlY29kZShwYXJ0LCB0cnVlKTtcbiAgfVxuXG4gIC8vIFRoZSBtYWluIGludGVyZmFjZVxuXG4gIHZhciBSb3V0ZVJlY29nbml6ZXIgPSBmdW5jdGlvbiBSb3V0ZVJlY29nbml6ZXIoKSB7XG4gICAgdGhpcy5yb290U3RhdGUgPSBuZXcgU3RhdGUoKTtcbiAgICB0aGlzLm5hbWVzID0ge307XG4gIH07XG5cbiAgUm91dGVSZWNvZ25pemVyLnByb3RvdHlwZSA9IHtcbiAgICBhZGQ6IGZ1bmN0aW9uIGFkZChyb3V0ZXMsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBjdXJyZW50U3RhdGUgPSB0aGlzLnJvb3RTdGF0ZSxcbiAgICAgICAgICByZWdleCA9IFwiXlwiLFxuICAgICAgICAgIHNwZWNpZmljaXR5ID0ge30sXG4gICAgICAgICAgaGFuZGxlcnMgPSBbXSxcbiAgICAgICAgICBhbGxTZWdtZW50cyA9IFtdLFxuICAgICAgICAgIG5hbWU7XG5cbiAgICAgIHZhciBpc0VtcHR5ID0gdHJ1ZTtcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHZhciByb3V0ZSA9IHJvdXRlc1tpXSxcbiAgICAgICAgICAgIG5hbWVzID0gW107XG5cbiAgICAgICAgdmFyIHNlZ21lbnRzID0gcGFyc2Uocm91dGUucGF0aCwgbmFtZXMsIHNwZWNpZmljaXR5KTtcblxuICAgICAgICBhbGxTZWdtZW50cyA9IGFsbFNlZ21lbnRzLmNvbmNhdChzZWdtZW50cyk7XG5cbiAgICAgICAgZm9yICh2YXIgaiA9IDAsIG0gPSBzZWdtZW50cy5sZW5ndGg7IGogPCBtOyBqKyspIHtcbiAgICAgICAgICB2YXIgc2VnbWVudCA9IHNlZ21lbnRzW2pdO1xuXG4gICAgICAgICAgaWYgKHNlZ21lbnQgaW5zdGFuY2VvZiBFcHNpbG9uU2VnbWVudCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaXNFbXB0eSA9IGZhbHNlO1xuXG4gICAgICAgICAgLy8gQWRkIGEgXCIvXCIgZm9yIHRoZSBuZXcgc2VnbWVudFxuICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9IGN1cnJlbnRTdGF0ZS5wdXQoeyB2YWxpZENoYXJzOiBcIi9cIiB9KTtcbiAgICAgICAgICByZWdleCArPSBcIi9cIjtcblxuICAgICAgICAgIC8vIEFkZCBhIHJlcHJlc2VudGF0aW9uIG9mIHRoZSBzZWdtZW50IHRvIHRoZSBORkEgYW5kIHJlZ2V4XG4gICAgICAgICAgY3VycmVudFN0YXRlID0gYWRkU2VnbWVudChjdXJyZW50U3RhdGUsIHNlZ21lbnQpO1xuICAgICAgICAgIHJlZ2V4ICs9IHNlZ21lbnQucmVnZXgoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBoYW5kbGVyID0geyBoYW5kbGVyOiByb3V0ZS5oYW5kbGVyLCBuYW1lczogbmFtZXMgfTtcbiAgICAgICAgaGFuZGxlcnMucHVzaChoYW5kbGVyKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzRW1wdHkpIHtcbiAgICAgICAgY3VycmVudFN0YXRlID0gY3VycmVudFN0YXRlLnB1dCh7IHZhbGlkQ2hhcnM6IFwiL1wiIH0pO1xuICAgICAgICByZWdleCArPSBcIi9cIjtcbiAgICAgIH1cblxuICAgICAgY3VycmVudFN0YXRlLmhhbmRsZXJzID0gaGFuZGxlcnM7XG4gICAgICBjdXJyZW50U3RhdGUucmVnZXggPSBuZXcgUmVnRXhwKHJlZ2V4ICsgXCIkXCIpO1xuICAgICAgY3VycmVudFN0YXRlLnNwZWNpZmljaXR5ID0gc3BlY2lmaWNpdHk7XG5cbiAgICAgIGlmIChuYW1lID0gb3B0aW9ucyAmJiBvcHRpb25zLmFzKSB7XG4gICAgICAgIHRoaXMubmFtZXNbbmFtZV0gPSB7XG4gICAgICAgICAgc2VnbWVudHM6IGFsbFNlZ21lbnRzLFxuICAgICAgICAgIGhhbmRsZXJzOiBoYW5kbGVyc1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBoYW5kbGVyc0ZvcjogZnVuY3Rpb24gaGFuZGxlcnNGb3IobmFtZSkge1xuICAgICAgdmFyIHJvdXRlID0gdGhpcy5uYW1lc1tuYW1lXSxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcbiAgICAgIGlmICghcm91dGUpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiVGhlcmUgaXMgbm8gcm91dGUgbmFtZWQgXCIgKyBuYW1lKTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSByb3V0ZS5oYW5kbGVycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgcmVzdWx0LnB1c2gocm91dGUuaGFuZGxlcnNbaV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICBoYXNSb3V0ZTogZnVuY3Rpb24gaGFzUm91dGUobmFtZSkge1xuICAgICAgcmV0dXJuICEhdGhpcy5uYW1lc1tuYW1lXTtcbiAgICB9LFxuXG4gICAgZ2VuZXJhdGU6IGZ1bmN0aW9uIGdlbmVyYXRlKG5hbWUsIHBhcmFtcykge1xuICAgICAgdmFyIHJvdXRlID0gdGhpcy5uYW1lc1tuYW1lXSxcbiAgICAgICAgICBvdXRwdXQgPSBcIlwiO1xuICAgICAgaWYgKCFyb3V0ZSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJUaGVyZSBpcyBubyByb3V0ZSBuYW1lZCBcIiArIG5hbWUpO1xuICAgICAgfVxuXG4gICAgICB2YXIgc2VnbWVudHMgPSByb3V0ZS5zZWdtZW50cztcblxuICAgICAgZm9yICh2YXIgaSA9IDAsIGwgPSBzZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgdmFyIHNlZ21lbnQgPSBzZWdtZW50c1tpXTtcblxuICAgICAgICBpZiAoc2VnbWVudCBpbnN0YW5jZW9mIEVwc2lsb25TZWdtZW50KSB7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICBvdXRwdXQgKz0gXCIvXCI7XG4gICAgICAgIG91dHB1dCArPSBzZWdtZW50LmdlbmVyYXRlKHBhcmFtcyk7XG4gICAgICB9XG5cbiAgICAgIGlmIChvdXRwdXQuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgb3V0cHV0ID0gJy8nICsgb3V0cHV0O1xuICAgICAgfVxuXG4gICAgICBpZiAocGFyYW1zICYmIHBhcmFtcy5xdWVyeVBhcmFtcykge1xuICAgICAgICBvdXRwdXQgKz0gdGhpcy5nZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhcmFtcy5xdWVyeVBhcmFtcyk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBvdXRwdXQ7XG4gICAgfSxcblxuICAgIGdlbmVyYXRlUXVlcnlTdHJpbmc6IGZ1bmN0aW9uIGdlbmVyYXRlUXVlcnlTdHJpbmcocGFyYW1zKSB7XG4gICAgICB2YXIgcGFpcnMgPSBbXTtcbiAgICAgIHZhciBrZXlzID0gW107XG4gICAgICBmb3IgKHZhciBrZXkgaW4gcGFyYW1zKSB7XG4gICAgICAgIGlmIChwYXJhbXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIGtleXMucHVzaChrZXkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBrZXlzLnNvcnQoKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBrZXlzLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7XG4gICAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAgIHZhciB2YWx1ZSA9IHBhcmFtc1trZXldO1xuICAgICAgICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIHZhciBwYWlyID0gZW5jb2RlVVJJQ29tcG9uZW50KGtleSk7XG4gICAgICAgIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgICAgICAgIGZvciAodmFyIGogPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBqIDwgbDsgaisrKSB7XG4gICAgICAgICAgICB2YXIgYXJyYXlQYWlyID0ga2V5ICsgJ1tdJyArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZVtqXSk7XG4gICAgICAgICAgICBwYWlycy5wdXNoKGFycmF5UGFpcik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBhaXIgKz0gXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpO1xuICAgICAgICAgIHBhaXJzLnB1c2gocGFpcik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKHBhaXJzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gJyc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBcIj9cIiArIHBhaXJzLmpvaW4oXCImXCIpO1xuICAgIH0sXG5cbiAgICBwYXJzZVF1ZXJ5U3RyaW5nOiBmdW5jdGlvbiBwYXJzZVF1ZXJ5U3RyaW5nKHF1ZXJ5U3RyaW5nKSB7XG4gICAgICB2YXIgcGFpcnMgPSBxdWVyeVN0cmluZy5zcGxpdChcIiZcIiksXG4gICAgICAgICAgcXVlcnlQYXJhbXMgPSB7fTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFpcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdmFyIHBhaXIgPSBwYWlyc1tpXS5zcGxpdCgnPScpLFxuICAgICAgICAgICAga2V5ID0gZGVjb2RlUXVlcnlQYXJhbVBhcnQocGFpclswXSksXG4gICAgICAgICAgICBrZXlMZW5ndGggPSBrZXkubGVuZ3RoLFxuICAgICAgICAgICAgaXNBcnJheSA9IGZhbHNlLFxuICAgICAgICAgICAgdmFsdWU7XG4gICAgICAgIGlmIChwYWlyLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIHZhbHVlID0gJ3RydWUnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vSGFuZGxlIGFycmF5c1xuICAgICAgICAgIGlmIChrZXlMZW5ndGggPiAyICYmIGtleS5zbGljZShrZXlMZW5ndGggLSAyKSA9PT0gJ1tdJykge1xuICAgICAgICAgICAgaXNBcnJheSA9IHRydWU7XG4gICAgICAgICAgICBrZXkgPSBrZXkuc2xpY2UoMCwga2V5TGVuZ3RoIC0gMik7XG4gICAgICAgICAgICBpZiAoIXF1ZXJ5UGFyYW1zW2tleV0pIHtcbiAgICAgICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IFtdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSA9IHBhaXJbMV0gPyBkZWNvZGVRdWVyeVBhcmFtUGFydChwYWlyWzFdKSA6ICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc0FycmF5KSB7XG4gICAgICAgICAgcXVlcnlQYXJhbXNba2V5XS5wdXNoKHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBxdWVyeVBhcmFtc1trZXldID0gdmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHJldHVybiBxdWVyeVBhcmFtcztcbiAgICB9LFxuXG4gICAgcmVjb2duaXplOiBmdW5jdGlvbiByZWNvZ25pemUocGF0aCwgc2lsZW50KSB7XG4gICAgICBub1dhcm5pbmcgPSBzaWxlbnQ7XG4gICAgICB2YXIgc3RhdGVzID0gW3RoaXMucm9vdFN0YXRlXSxcbiAgICAgICAgICBwYXRoTGVuLFxuICAgICAgICAgIGksXG4gICAgICAgICAgbCxcbiAgICAgICAgICBxdWVyeVN0YXJ0LFxuICAgICAgICAgIHF1ZXJ5UGFyYW1zID0ge30sXG4gICAgICAgICAgaXNTbGFzaERyb3BwZWQgPSBmYWxzZTtcblxuICAgICAgcXVlcnlTdGFydCA9IHBhdGguaW5kZXhPZignPycpO1xuICAgICAgaWYgKHF1ZXJ5U3RhcnQgIT09IC0xKSB7XG4gICAgICAgIHZhciBxdWVyeVN0cmluZyA9IHBhdGguc3Vic3RyKHF1ZXJ5U3RhcnQgKyAxLCBwYXRoLmxlbmd0aCk7XG4gICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigwLCBxdWVyeVN0YXJ0KTtcbiAgICAgICAgaWYgKHF1ZXJ5U3RyaW5nKSB7XG4gICAgICAgICAgcXVlcnlQYXJhbXMgPSB0aGlzLnBhcnNlUXVlcnlTdHJpbmcocXVlcnlTdHJpbmcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHBhdGggPSB0cnlEZWNvZGUocGF0aCk7XG4gICAgICBpZiAoIXBhdGgpIHJldHVybjtcblxuICAgICAgLy8gREVCVUcgR1JPVVAgcGF0aFxuXG4gICAgICBpZiAocGF0aC5jaGFyQXQoMCkgIT09IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBcIi9cIiArIHBhdGg7XG4gICAgICB9XG5cbiAgICAgIHBhdGhMZW4gPSBwYXRoLmxlbmd0aDtcbiAgICAgIGlmIChwYXRoTGVuID4gMSAmJiBwYXRoLmNoYXJBdChwYXRoTGVuIC0gMSkgPT09IFwiL1wiKSB7XG4gICAgICAgIHBhdGggPSBwYXRoLnN1YnN0cigwLCBwYXRoTGVuIC0gMSk7XG4gICAgICAgIGlzU2xhc2hEcm9wcGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgZm9yIChpID0gMCwgbCA9IHBhdGgubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICAgIHN0YXRlcyA9IHJlY29nbml6ZUNoYXIoc3RhdGVzLCBwYXRoLmNoYXJBdChpKSk7XG4gICAgICAgIGlmICghc3RhdGVzLmxlbmd0aCkge1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEVORCBERUJVRyBHUk9VUFxuXG4gICAgICB2YXIgc29sdXRpb25zID0gW107XG4gICAgICBmb3IgKGkgPSAwLCBsID0gc3RhdGVzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICBpZiAoc3RhdGVzW2ldLmhhbmRsZXJzKSB7XG4gICAgICAgICAgc29sdXRpb25zLnB1c2goc3RhdGVzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBzdGF0ZXMgPSBzb3J0U29sdXRpb25zKHNvbHV0aW9ucyk7XG5cbiAgICAgIHZhciBzdGF0ZSA9IHNvbHV0aW9uc1swXTtcblxuICAgICAgaWYgKHN0YXRlICYmIHN0YXRlLmhhbmRsZXJzKSB7XG4gICAgICAgIC8vIGlmIGEgdHJhaWxpbmcgc2xhc2ggd2FzIGRyb3BwZWQgYW5kIGEgc3RhciBzZWdtZW50IGlzIHRoZSBsYXN0IHNlZ21lbnRcbiAgICAgICAgLy8gc3BlY2lmaWVkLCBwdXQgdGhlIHRyYWlsaW5nIHNsYXNoIGJhY2tcbiAgICAgICAgaWYgKGlzU2xhc2hEcm9wcGVkICYmIHN0YXRlLnJlZ2V4LnNvdXJjZS5zbGljZSgtNSkgPT09IFwiKC4rKSRcIikge1xuICAgICAgICAgIHBhdGggPSBwYXRoICsgXCIvXCI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZpbmRIYW5kbGVyKHN0YXRlLCBwYXRoLCBxdWVyeVBhcmFtcyk7XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUubWFwID0gbWFwO1xuXG4gIHZhciBnZW5RdWVyeSA9IFJvdXRlUmVjb2duaXplci5wcm90b3R5cGUuZ2VuZXJhdGVRdWVyeVN0cmluZztcblxuICAvLyBleHBvcnQgZGVmYXVsdCBmb3IgaG9sZGluZyB0aGUgVnVlIHJlZmVyZW5jZVxuICB2YXIgZXhwb3J0cyQxID0ge307XG4gIC8qKlxuICAgKiBXYXJuIHN0dWZmLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gbXNnXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHdhcm4kMShtc2cpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgbmV4dCAqL1xuICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1t2dWUtcm91dGVyXSAnICsgbXNnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmVzb2x2ZSBhIHJlbGF0aXZlIHBhdGguXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBiYXNlXG4gICAqIEBwYXJhbSB7U3RyaW5nfSByZWxhdGl2ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGFwcGVuZFxuICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlc29sdmVQYXRoKGJhc2UsIHJlbGF0aXZlLCBhcHBlbmQpIHtcbiAgICB2YXIgcXVlcnkgPSBiYXNlLm1hdGNoKC8oXFw/LiopJC8pO1xuICAgIGlmIChxdWVyeSkge1xuICAgICAgcXVlcnkgPSBxdWVyeVsxXTtcbiAgICAgIGJhc2UgPSBiYXNlLnNsaWNlKDAsIC1xdWVyeS5sZW5ndGgpO1xuICAgIH1cbiAgICAvLyBhIHF1ZXJ5IVxuICAgIGlmIChyZWxhdGl2ZS5jaGFyQXQoMCkgPT09ICc/Jykge1xuICAgICAgcmV0dXJuIGJhc2UgKyByZWxhdGl2ZTtcbiAgICB9XG4gICAgdmFyIHN0YWNrID0gYmFzZS5zcGxpdCgnLycpO1xuICAgIC8vIHJlbW92ZSB0cmFpbGluZyBzZWdtZW50IGlmOlxuICAgIC8vIC0gbm90IGFwcGVuZGluZ1xuICAgIC8vIC0gYXBwZW5kaW5nIHRvIHRyYWlsaW5nIHNsYXNoIChsYXN0IHNlZ21lbnQgaXMgZW1wdHkpXG4gICAgaWYgKCFhcHBlbmQgfHwgIXN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdKSB7XG4gICAgICBzdGFjay5wb3AoKTtcbiAgICB9XG4gICAgLy8gcmVzb2x2ZSByZWxhdGl2ZSBwYXRoXG4gICAgdmFyIHNlZ21lbnRzID0gcmVsYXRpdmUucmVwbGFjZSgvXlxcLy8sICcnKS5zcGxpdCgnLycpO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2VnbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzZWdtZW50ID0gc2VnbWVudHNbaV07XG4gICAgICBpZiAoc2VnbWVudCA9PT0gJy4nKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfSBlbHNlIGlmIChzZWdtZW50ID09PSAnLi4nKSB7XG4gICAgICAgIHN0YWNrLnBvcCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3RhY2sucHVzaChzZWdtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gZW5zdXJlIGxlYWRpbmcgc2xhc2hcbiAgICBpZiAoc3RhY2tbMF0gIT09ICcnKSB7XG4gICAgICBzdGFjay51bnNoaWZ0KCcnKTtcbiAgICB9XG4gICAgcmV0dXJuIHN0YWNrLmpvaW4oJy8nKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JnaXZpbmcgY2hlY2sgZm9yIGEgcHJvbWlzZVxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gcFxuICAgKiBAcmV0dXJuIHtCb29sZWFufVxuICAgKi9cblxuICBmdW5jdGlvbiBpc1Byb21pc2UocCkge1xuICAgIHJldHVybiBwICYmIHR5cGVvZiBwLnRoZW4gPT09ICdmdW5jdGlvbic7XG4gIH1cblxuICAvKipcbiAgICogUmV0cml2ZSBhIHJvdXRlIGNvbmZpZyBmaWVsZCBmcm9tIGEgY29tcG9uZW50IGluc3RhbmNlXG4gICAqIE9SIGEgY29tcG9uZW50IGNvbnRydWN0b3IuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb258VnVlfSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgZnVuY3Rpb24gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCBuYW1lKSB7XG4gICAgdmFyIG9wdGlvbnMgPSBjb21wb25lbnQgJiYgKGNvbXBvbmVudC4kb3B0aW9ucyB8fCBjb21wb25lbnQub3B0aW9ucyk7XG4gICAgcmV0dXJuIG9wdGlvbnMgJiYgb3B0aW9ucy5yb3V0ZSAmJiBvcHRpb25zLnJvdXRlW25hbWVdO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlc29sdmUgYW4gYXN5bmMgY29tcG9uZW50IGZhY3RvcnkuIEhhdmUgdG8gZG8gYSBkaXJ0eVxuICAgKiBtb2NrIGhlcmUgYmVjYXVzZSBvZiBWdWUgY29yZSdzIGludGVybmFsIEFQSSBkZXBlbmRzIG9uXG4gICAqIGFuIElEIGNoZWNrLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgKi9cblxuICB2YXIgcmVzb2x2ZXIgPSB1bmRlZmluZWQ7XG5cbiAgZnVuY3Rpb24gcmVzb2x2ZUFzeW5jQ29tcG9uZW50KGhhbmRsZXIsIGNiKSB7XG4gICAgaWYgKCFyZXNvbHZlcikge1xuICAgICAgcmVzb2x2ZXIgPSB7XG4gICAgICAgIHJlc29sdmU6IGV4cG9ydHMkMS5WdWUucHJvdG90eXBlLl9yZXNvbHZlQ29tcG9uZW50LFxuICAgICAgICAkb3B0aW9uczoge1xuICAgICAgICAgIGNvbXBvbmVudHM6IHtcbiAgICAgICAgICAgIF86IGhhbmRsZXIuY29tcG9uZW50XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0gZWxzZSB7XG4gICAgICByZXNvbHZlci4kb3B0aW9ucy5jb21wb25lbnRzLl8gPSBoYW5kbGVyLmNvbXBvbmVudDtcbiAgICB9XG4gICAgcmVzb2x2ZXIucmVzb2x2ZSgnXycsIGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgICAgIGhhbmRsZXIuY29tcG9uZW50ID0gQ29tcG9uZW50O1xuICAgICAgY2IoQ29tcG9uZW50KTtcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNYXAgdGhlIGR5bmFtaWMgc2VnbWVudHMgaW4gYSBwYXRoIHRvIHBhcmFtcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtc1xuICAgKiBAcGFyYW0ge09iamVjdH0gcXVlcnlcbiAgICovXG5cbiAgZnVuY3Rpb24gbWFwUGFyYW1zKHBhdGgsIHBhcmFtcywgcXVlcnkpIHtcbiAgICBpZiAocGFyYW1zID09PSB1bmRlZmluZWQpIHBhcmFtcyA9IHt9O1xuXG4gICAgcGF0aCA9IHBhdGgucmVwbGFjZSgvOihbXlxcL10rKS9nLCBmdW5jdGlvbiAoXywga2V5KSB7XG4gICAgICB2YXIgdmFsID0gcGFyYW1zW2tleV07XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghdmFsKSB7XG4gICAgICAgIHdhcm4kMSgncGFyYW0gXCInICsga2V5ICsgJ1wiIG5vdCBmb3VuZCB3aGVuIGdlbmVyYXRpbmcgJyArICdwYXRoIGZvciBcIicgKyBwYXRoICsgJ1wiIHdpdGggcGFyYW1zICcgKyBKU09OLnN0cmluZ2lmeShwYXJhbXMpKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWwgfHwgJyc7XG4gICAgfSk7XG4gICAgaWYgKHF1ZXJ5KSB7XG4gICAgICBwYXRoICs9IGdlblF1ZXJ5KHF1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGg7XG4gIH1cblxuICB2YXIgaGFzaFJFID0gLyMuKiQvO1xuXG4gIHZhciBIVE1MNUhpc3RvcnkgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIEhUTUw1SGlzdG9yeShfcmVmKSB7XG4gICAgICB2YXIgcm9vdCA9IF9yZWYucm9vdDtcbiAgICAgIHZhciBvbkNoYW5nZSA9IF9yZWYub25DaGFuZ2U7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgSFRNTDVIaXN0b3J5KTtcblxuICAgICAgaWYgKHJvb3QgJiYgcm9vdCAhPT0gJy8nKSB7XG4gICAgICAgIC8vIG1ha2Ugc3VyZSB0aGVyZSdzIHRoZSBzdGFydGluZyBzbGFzaFxuICAgICAgICBpZiAocm9vdC5jaGFyQXQoMCkgIT09ICcvJykge1xuICAgICAgICAgIHJvb3QgPSAnLycgKyByb290O1xuICAgICAgICB9XG4gICAgICAgIC8vIHJlbW92ZSB0cmFpbGluZyBzbGFzaFxuICAgICAgICB0aGlzLnJvb3QgPSByb290LnJlcGxhY2UoL1xcLyQvLCAnJyk7XG4gICAgICAgIHRoaXMucm9vdFJFID0gbmV3IFJlZ0V4cCgnXlxcXFwnICsgdGhpcy5yb290KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucm9vdCA9IG51bGw7XG4gICAgICB9XG4gICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG4gICAgICAvLyBjaGVjayBiYXNlIHRhZ1xuICAgICAgdmFyIGJhc2VFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Jhc2UnKTtcbiAgICAgIHRoaXMuYmFzZSA9IGJhc2VFbCAmJiBiYXNlRWwuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgfVxuXG4gICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHZhciB1cmwgPSBsb2NhdGlvbi5wYXRobmFtZSArIGxvY2F0aW9uLnNlYXJjaDtcbiAgICAgICAgaWYgKF90aGlzLnJvb3QpIHtcbiAgICAgICAgICB1cmwgPSB1cmwucmVwbGFjZShfdGhpcy5yb290UkUsICcnKTtcbiAgICAgICAgfVxuICAgICAgICBfdGhpcy5vbkNoYW5nZSh1cmwsIGUgJiYgZS5zdGF0ZSwgbG9jYXRpb24uaGFzaCk7XG4gICAgICB9O1xuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvcHN0YXRlJywgdGhpcy5saXN0ZW5lcik7XG4gICAgICB0aGlzLmxpc3RlbmVyKCk7XG4gICAgfTtcblxuICAgIEhUTUw1SGlzdG9yeS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncG9wc3RhdGUnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICB9O1xuXG4gICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCkge1xuICAgICAgdmFyIHVybCA9IHRoaXMuZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpO1xuICAgICAgaWYgKHJlcGxhY2UpIHtcbiAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUoe30sICcnLCB1cmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmVjb3JkIHNjcm9sbCBwb3NpdGlvbiBieSByZXBsYWNpbmcgY3VycmVudCBzdGF0ZVxuICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZSh7XG4gICAgICAgICAgcG9zOiB7XG4gICAgICAgICAgICB4OiB3aW5kb3cucGFnZVhPZmZzZXQsXG4gICAgICAgICAgICB5OiB3aW5kb3cucGFnZVlPZmZzZXRcbiAgICAgICAgICB9XG4gICAgICAgIH0sICcnLCBsb2NhdGlvbi5ocmVmKTtcbiAgICAgICAgLy8gdGhlbiBwdXNoIG5ldyBzdGF0ZVxuICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7fSwgJycsIHVybCk7XG4gICAgICB9XG4gICAgICB2YXIgaGFzaE1hdGNoID0gcGF0aC5tYXRjaChoYXNoUkUpO1xuICAgICAgdmFyIGhhc2ggPSBoYXNoTWF0Y2ggJiYgaGFzaE1hdGNoWzBdO1xuICAgICAgcGF0aCA9IHVybFxuICAgICAgLy8gc3RyaXAgaGFzaCBzbyBpdCBkb2Vzbid0IG1lc3MgdXAgcGFyYW1zXG4gICAgICAucmVwbGFjZShoYXNoUkUsICcnKVxuICAgICAgLy8gcmVtb3ZlIHJvb3QgYmVmb3JlIG1hdGNoaW5nXG4gICAgICAucmVwbGFjZSh0aGlzLnJvb3RSRSwgJycpO1xuICAgICAgdGhpcy5vbkNoYW5nZShwYXRoLCBudWxsLCBoYXNoKTtcbiAgICB9O1xuXG4gICAgSFRNTDVIaXN0b3J5LnByb3RvdHlwZS5mb3JtYXRQYXRoID0gZnVuY3Rpb24gZm9ybWF0UGF0aChwYXRoLCBhcHBlbmQpIHtcbiAgICAgIHJldHVybiBwYXRoLmNoYXJBdCgwKSA9PT0gJy8nXG4gICAgICAvLyBhYnNvbHV0ZSBwYXRoXG4gICAgICA/IHRoaXMucm9vdCA/IHRoaXMucm9vdCArICcvJyArIHBhdGgucmVwbGFjZSgvXlxcLy8sICcnKSA6IHBhdGggOiByZXNvbHZlUGF0aCh0aGlzLmJhc2UgfHwgbG9jYXRpb24ucGF0aG5hbWUsIHBhdGgsIGFwcGVuZCk7XG4gICAgfTtcblxuICAgIHJldHVybiBIVE1MNUhpc3Rvcnk7XG4gIH0pKCk7XG5cbiAgdmFyIEhhc2hIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBIYXNoSGlzdG9yeShfcmVmKSB7XG4gICAgICB2YXIgaGFzaGJhbmcgPSBfcmVmLmhhc2hiYW5nO1xuICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTtcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBIYXNoSGlzdG9yeSk7XG5cbiAgICAgIHRoaXMuaGFzaGJhbmcgPSBoYXNoYmFuZztcbiAgICAgIHRoaXMub25DaGFuZ2UgPSBvbkNoYW5nZTtcbiAgICB9XG5cbiAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYXRoID0gbG9jYXRpb24uaGFzaDtcbiAgICAgICAgdmFyIHJhdyA9IHBhdGgucmVwbGFjZSgvXiMhPy8sICcnKTtcbiAgICAgICAgLy8gYWx3YXlzXG4gICAgICAgIGlmIChyYXcuY2hhckF0KDApICE9PSAnLycpIHtcbiAgICAgICAgICByYXcgPSAnLycgKyByYXc7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGZvcm1hdHRlZFBhdGggPSBzZWxmLmZvcm1hdFBhdGgocmF3KTtcbiAgICAgICAgaWYgKGZvcm1hdHRlZFBhdGggIT09IHBhdGgpIHtcbiAgICAgICAgICBsb2NhdGlvbi5yZXBsYWNlKGZvcm1hdHRlZFBhdGgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBkZXRlcm1pbmUgcXVlcnlcbiAgICAgICAgLy8gbm90ZSBpdCdzIHBvc3NpYmxlIHRvIGhhdmUgcXVlcmllcyBpbiBib3RoIHRoZSBhY3R1YWwgVVJMXG4gICAgICAgIC8vIGFuZCB0aGUgaGFzaCBmcmFnbWVudCBpdHNlbGYuXG4gICAgICAgIHZhciBxdWVyeSA9IGxvY2F0aW9uLnNlYXJjaCAmJiBwYXRoLmluZGV4T2YoJz8nKSA+IC0xID8gJyYnICsgbG9jYXRpb24uc2VhcmNoLnNsaWNlKDEpIDogbG9jYXRpb24uc2VhcmNoO1xuICAgICAgICBzZWxmLm9uQ2hhbmdlKHBhdGgucmVwbGFjZSgvXiMhPy8sICcnKSArIHF1ZXJ5KTtcbiAgICAgIH07XG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgdGhpcy5saXN0ZW5lcigpO1xuICAgIH07XG5cbiAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignaGFzaGNoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgIH07XG5cbiAgICBIYXNoSGlzdG9yeS5wcm90b3R5cGUuZ28gPSBmdW5jdGlvbiBnbyhwYXRoLCByZXBsYWNlLCBhcHBlbmQpIHtcbiAgICAgIHBhdGggPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcbiAgICAgIGlmIChyZXBsYWNlKSB7XG4gICAgICAgIGxvY2F0aW9uLnJlcGxhY2UocGF0aCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsb2NhdGlvbi5oYXNoID0gcGF0aDtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgSGFzaEhpc3RvcnkucHJvdG90eXBlLmZvcm1hdFBhdGggPSBmdW5jdGlvbiBmb3JtYXRQYXRoKHBhdGgsIGFwcGVuZCkge1xuICAgICAgdmFyIGlzQWJzb2xvdXRlID0gcGF0aC5jaGFyQXQoMCkgPT09ICcvJztcbiAgICAgIHZhciBwcmVmaXggPSAnIycgKyAodGhpcy5oYXNoYmFuZyA/ICchJyA6ICcnKTtcbiAgICAgIHJldHVybiBpc0Fic29sb3V0ZSA/IHByZWZpeCArIHBhdGggOiBwcmVmaXggKyByZXNvbHZlUGF0aChsb2NhdGlvbi5oYXNoLnJlcGxhY2UoL14jIT8vLCAnJyksIHBhdGgsIGFwcGVuZCk7XG4gICAgfTtcblxuICAgIHJldHVybiBIYXNoSGlzdG9yeTtcbiAgfSkoKTtcblxuICB2YXIgQWJzdHJhY3RIaXN0b3J5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBBYnN0cmFjdEhpc3RvcnkoX3JlZikge1xuICAgICAgdmFyIG9uQ2hhbmdlID0gX3JlZi5vbkNoYW5nZTtcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBBYnN0cmFjdEhpc3RvcnkpO1xuXG4gICAgICB0aGlzLm9uQ2hhbmdlID0gb25DaGFuZ2U7XG4gICAgICB0aGlzLmN1cnJlbnRQYXRoID0gJy8nO1xuICAgIH1cblxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydCgpIHtcbiAgICAgIHRoaXMub25DaGFuZ2UoJy8nKTtcbiAgICB9O1xuXG4gICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5zdG9wID0gZnVuY3Rpb24gc3RvcCgpIHtcbiAgICAgIC8vIG5vb3BcbiAgICB9O1xuXG4gICAgQWJzdHJhY3RIaXN0b3J5LnByb3RvdHlwZS5nbyA9IGZ1bmN0aW9uIGdvKHBhdGgsIHJlcGxhY2UsIGFwcGVuZCkge1xuICAgICAgcGF0aCA9IHRoaXMuY3VycmVudFBhdGggPSB0aGlzLmZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKTtcbiAgICAgIHRoaXMub25DaGFuZ2UocGF0aCk7XG4gICAgfTtcblxuICAgIEFic3RyYWN0SGlzdG9yeS5wcm90b3R5cGUuZm9ybWF0UGF0aCA9IGZ1bmN0aW9uIGZvcm1hdFBhdGgocGF0aCwgYXBwZW5kKSB7XG4gICAgICByZXR1cm4gcGF0aC5jaGFyQXQoMCkgPT09ICcvJyA/IHBhdGggOiByZXNvbHZlUGF0aCh0aGlzLmN1cnJlbnRQYXRoLCBwYXRoLCBhcHBlbmQpO1xuICAgIH07XG5cbiAgICByZXR1cm4gQWJzdHJhY3RIaXN0b3J5O1xuICB9KSgpO1xuXG4gIC8qKlxuICAgKiBEZXRlcm1pbmUgdGhlIHJldXNhYmlsaXR5IG9mIGFuIGV4aXN0aW5nIHJvdXRlciB2aWV3LlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICovXG5cbiAgZnVuY3Rpb24gY2FuUmV1c2UodmlldywgaGFuZGxlciwgdHJhbnNpdGlvbikge1xuICAgIHZhciBjb21wb25lbnQgPSB2aWV3LmNoaWxkVk07XG4gICAgaWYgKCFjb21wb25lbnQgfHwgIWhhbmRsZXIpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gaW1wb3J0YW50OiBjaGVjayB2aWV3LkNvbXBvbmVudCBoZXJlIGJlY2F1c2UgaXQgbWF5XG4gICAgLy8gaGF2ZSBiZWVuIGNoYW5nZWQgaW4gYWN0aXZhdGUgaG9va1xuICAgIGlmICh2aWV3LkNvbXBvbmVudCAhPT0gaGFuZGxlci5jb21wb25lbnQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdmFyIGNhblJldXNlRm4gPSBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsICdjYW5SZXVzZScpO1xuICAgIHJldHVybiB0eXBlb2YgY2FuUmV1c2VGbiA9PT0gJ2Jvb2xlYW4nID8gY2FuUmV1c2VGbiA6IGNhblJldXNlRm4gPyBjYW5SZXVzZUZuLmNhbGwoY29tcG9uZW50LCB7XG4gICAgICB0bzogdHJhbnNpdGlvbi50byxcbiAgICAgIGZyb206IHRyYW5zaXRpb24uZnJvbVxuICAgIH0pIDogdHJ1ZTsgLy8gZGVmYXVsdHMgdG8gdHJ1ZVxuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgY29tcG9uZW50IGNhbiBkZWFjdGl2YXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuICAgKi9cblxuICBmdW5jdGlvbiBjYW5EZWFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIG5leHQpIHtcbiAgICB2YXIgZnJvbUNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcbiAgICB2YXIgaG9vayA9IGdldFJvdXRlQ29uZmlnKGZyb21Db21wb25lbnQsICdjYW5EZWFjdGl2YXRlJyk7XG4gICAgaWYgKCFob29rKSB7XG4gICAgICBuZXh0KCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRyYW5zaXRpb24uY2FsbEhvb2soaG9vaywgZnJvbUNvbXBvbmVudCwgbmV4dCwge1xuICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgYSBjb21wb25lbnQgY2FuIGFjdGl2YXRlLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuICAgKi9cblxuICBmdW5jdGlvbiBjYW5BY3RpdmF0ZShoYW5kbGVyLCB0cmFuc2l0aW9uLCBuZXh0KSB7XG4gICAgcmVzb2x2ZUFzeW5jQ29tcG9uZW50KGhhbmRsZXIsIGZ1bmN0aW9uIChDb21wb25lbnQpIHtcbiAgICAgIC8vIGhhdmUgdG8gY2hlY2sgZHVlIHRvIGFzeW5jLW5lc3NcbiAgICAgIGlmICh0cmFuc2l0aW9uLmFib3J0ZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gZGV0ZXJtaW5lIGlmIHRoaXMgY29tcG9uZW50IGNhbiBiZSBhY3RpdmF0ZWRcbiAgICAgIHZhciBob29rID0gZ2V0Um91dGVDb25maWcoQ29tcG9uZW50LCAnY2FuQWN0aXZhdGUnKTtcbiAgICAgIGlmICghaG9vaykge1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0cmFuc2l0aW9uLmNhbGxIb29rKGhvb2ssIG51bGwsIG5leHQsIHtcbiAgICAgICAgICBleHBlY3RCb29sZWFuOiB0cnVlXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGwgZGVhY3RpdmF0ZSBob29rcyBmb3IgZXhpc3Rpbmcgcm91dGVyLXZpZXdzLlxuICAgKlxuICAgKiBAcGFyYW0ge0RpcmVjdGl2ZX0gdmlld1xuICAgKiBAcGFyYW0ge1RyYW5zaXRpb259IHRyYW5zaXRpb25cbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gbmV4dFxuICAgKi9cblxuICBmdW5jdGlvbiBkZWFjdGl2YXRlKHZpZXcsIHRyYW5zaXRpb24sIG5leHQpIHtcbiAgICB2YXIgY29tcG9uZW50ID0gdmlldy5jaGlsZFZNO1xuICAgIHZhciBob29rID0gZ2V0Um91dGVDb25maWcoY29tcG9uZW50LCAnZGVhY3RpdmF0ZScpO1xuICAgIGlmICghaG9vaykge1xuICAgICAgbmV4dCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhob29rLCBjb21wb25lbnQsIG5leHQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBBY3RpdmF0ZSAvIHN3aXRjaCBjb21wb25lbnQgZm9yIGEgcm91dGVyLXZpZXcuXG4gICAqXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG4gICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuICAgKiBAcGFyYW0ge051bWJlcn0gZGVwdGhcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBhY3RpdmF0ZSh2aWV3LCB0cmFuc2l0aW9uLCBkZXB0aCwgY2IsIHJldXNlKSB7XG4gICAgdmFyIGhhbmRsZXIgPSB0cmFuc2l0aW9uLmFjdGl2YXRlUXVldWVbZGVwdGhdO1xuICAgIGlmICghaGFuZGxlcikge1xuICAgICAgc2F2ZUNoaWxkVmlldyh2aWV3KTtcbiAgICAgIGlmICh2aWV3Ll9ib3VuZCkge1xuICAgICAgICB2aWV3LnNldENvbXBvbmVudChudWxsKTtcbiAgICAgIH1cbiAgICAgIGNiICYmIGNiKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIENvbXBvbmVudCA9IHZpZXcuQ29tcG9uZW50ID0gaGFuZGxlci5jb21wb25lbnQ7XG4gICAgdmFyIGFjdGl2YXRlSG9vayA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ2FjdGl2YXRlJyk7XG4gICAgdmFyIGRhdGFIb29rID0gZ2V0Um91dGVDb25maWcoQ29tcG9uZW50LCAnZGF0YScpO1xuICAgIHZhciB3YWl0Rm9yRGF0YSA9IGdldFJvdXRlQ29uZmlnKENvbXBvbmVudCwgJ3dhaXRGb3JEYXRhJyk7XG5cbiAgICB2aWV3LmRlcHRoID0gZGVwdGg7XG4gICAgdmlldy5hY3RpdmF0ZWQgPSBmYWxzZTtcblxuICAgIHZhciBjb21wb25lbnQgPSB1bmRlZmluZWQ7XG4gICAgdmFyIGxvYWRpbmcgPSAhIShkYXRhSG9vayAmJiAhd2FpdEZvckRhdGEpO1xuXG4gICAgLy8gXCJyZXVzZVwiIGlzIGEgZmxhZyBwYXNzZWQgZG93biB3aGVuIHRoZSBwYXJlbnQgdmlldyBpc1xuICAgIC8vIGVpdGhlciByZXVzZWQgdmlhIGtlZXAtYWxpdmUgb3IgYXMgYSBjaGlsZCBvZiBhIGtlcHQtYWxpdmUgdmlldy5cbiAgICAvLyBvZiBjb3Vyc2Ugd2UgY2FuIG9ubHkgcmV1c2UgaWYgdGhlIGN1cnJlbnQga2VwdC1hbGl2ZSBpbnN0YW5jZVxuICAgIC8vIGlzIG9mIHRoZSBjb3JyZWN0IHR5cGUuXG4gICAgcmV1c2UgPSByZXVzZSAmJiB2aWV3LmNoaWxkVk0gJiYgdmlldy5jaGlsZFZNLmNvbnN0cnVjdG9yID09PSBDb21wb25lbnQ7XG5cbiAgICBpZiAocmV1c2UpIHtcbiAgICAgIC8vIGp1c3QgcmV1c2VcbiAgICAgIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcbiAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGxvYWRpbmc7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNhdmVDaGlsZFZpZXcodmlldyk7XG5cbiAgICAgIC8vIHVuYnVpbGQgY3VycmVudCBjb21wb25lbnQuIHRoaXMgc3RlcCBhbHNvIGRlc3Ryb3lzXG4gICAgICAvLyBhbmQgcmVtb3ZlcyBhbGwgbmVzdGVkIGNoaWxkIHZpZXdzLlxuICAgICAgdmlldy51bmJ1aWxkKHRydWUpO1xuXG4gICAgICAvLyBidWlsZCB0aGUgbmV3IGNvbXBvbmVudC4gdGhpcyB3aWxsIGFsc28gY3JlYXRlIHRoZVxuICAgICAgLy8gZGlyZWN0IGNoaWxkIHZpZXcgb2YgdGhlIGN1cnJlbnQgb25lLiBpdCB3aWxsIHJlZ2lzdGVyXG4gICAgICAvLyBpdHNlbGYgYXMgdmlldy5jaGlsZFZpZXcuXG4gICAgICBjb21wb25lbnQgPSB2aWV3LmJ1aWxkKHtcbiAgICAgICAgX21ldGE6IHtcbiAgICAgICAgICAkbG9hZGluZ1JvdXRlRGF0YTogbG9hZGluZ1xuICAgICAgICB9LFxuICAgICAgICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuICAgICAgICAgIHRoaXMuX3JvdXRlclZpZXcgPSB2aWV3O1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gaGFuZGxlIGtlZXAtYWxpdmUuXG4gICAgICAvLyB3aGVuIGEga2VwdC1hbGl2ZSBjaGlsZCB2bSBpcyByZXN0b3JlZCwgd2UgbmVlZCB0b1xuICAgICAgLy8gYWRkIGl0cyBjYWNoZWQgY2hpbGQgdmlld3MgaW50byB0aGUgcm91dGVyJ3MgdmlldyBsaXN0LFxuICAgICAgLy8gYW5kIGFsc28gcHJvcGVybHkgdXBkYXRlIGN1cnJlbnQgdmlldydzIGNoaWxkIHZpZXcuXG4gICAgICBpZiAodmlldy5rZWVwQWxpdmUpIHtcbiAgICAgICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gbG9hZGluZztcbiAgICAgICAgdmFyIGNhY2hlZENoaWxkVmlldyA9IGNvbXBvbmVudC5fa2VlcEFsaXZlUm91dGVyVmlldztcbiAgICAgICAgaWYgKGNhY2hlZENoaWxkVmlldykge1xuICAgICAgICAgIHZpZXcuY2hpbGRWaWV3ID0gY2FjaGVkQ2hpbGRWaWV3O1xuICAgICAgICAgIGNvbXBvbmVudC5fa2VlcEFsaXZlUm91dGVyVmlldyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjbGVhbnVwIHRoZSBjb21wb25lbnQgaW4gY2FzZSB0aGUgdHJhbnNpdGlvbiBpcyBhYm9ydGVkXG4gICAgLy8gYmVmb3JlIHRoZSBjb21wb25lbnQgaXMgZXZlciBpbnNlcnRlZC5cbiAgICB2YXIgY2xlYW51cCA9IGZ1bmN0aW9uIGNsZWFudXAoKSB7XG4gICAgICBjb21wb25lbnQuJGRlc3Ryb3koKTtcbiAgICB9O1xuXG4gICAgLy8gYWN0dWFsbHkgaW5zZXJ0IHRoZSBjb21wb25lbnQgYW5kIHRyaWdnZXIgdHJhbnNpdGlvblxuICAgIHZhciBpbnNlcnQgPSBmdW5jdGlvbiBpbnNlcnQoKSB7XG4gICAgICBpZiAocmV1c2UpIHtcbiAgICAgICAgY2IgJiYgY2IoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIHJvdXRlciA9IHRyYW5zaXRpb24ucm91dGVyO1xuICAgICAgaWYgKHJvdXRlci5fcmVuZGVyZWQgfHwgcm91dGVyLl90cmFuc2l0aW9uT25Mb2FkKSB7XG4gICAgICAgIHZpZXcudHJhbnNpdGlvbihjb21wb25lbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbm8gdHJhbnNpdGlvbiBvbiBmaXJzdCByZW5kZXIsIG1hbnVhbCB0cmFuc2l0aW9uXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodmlldy5zZXRDdXJyZW50KSB7XG4gICAgICAgICAgLy8gMC4xMiBjb21wYXRcbiAgICAgICAgICB2aWV3LnNldEN1cnJlbnQoY29tcG9uZW50KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyAxLjBcbiAgICAgICAgICB2aWV3LmNoaWxkVk0gPSBjb21wb25lbnQ7XG4gICAgICAgIH1cbiAgICAgICAgY29tcG9uZW50LiRiZWZvcmUodmlldy5hbmNob3IsIG51bGwsIGZhbHNlKTtcbiAgICAgIH1cbiAgICAgIGNiICYmIGNiKCk7XG4gICAgfTtcblxuICAgIHZhciBhZnRlckRhdGEgPSBmdW5jdGlvbiBhZnRlckRhdGEoKSB7XG4gICAgICAvLyBhY3RpdmF0ZSB0aGUgY2hpbGQgdmlld1xuICAgICAgaWYgKHZpZXcuY2hpbGRWaWV3KSB7XG4gICAgICAgIGFjdGl2YXRlKHZpZXcuY2hpbGRWaWV3LCB0cmFuc2l0aW9uLCBkZXB0aCArIDEsIG51bGwsIHJldXNlIHx8IHZpZXcua2VlcEFsaXZlKTtcbiAgICAgIH1cbiAgICAgIGluc2VydCgpO1xuICAgIH07XG5cbiAgICAvLyBjYWxsZWQgYWZ0ZXIgYWN0aXZhdGlvbiBob29rIGlzIHJlc29sdmVkXG4gICAgdmFyIGFmdGVyQWN0aXZhdGUgPSBmdW5jdGlvbiBhZnRlckFjdGl2YXRlKCkge1xuICAgICAgdmlldy5hY3RpdmF0ZWQgPSB0cnVlO1xuICAgICAgaWYgKGRhdGFIb29rICYmIHdhaXRGb3JEYXRhKSB7XG4gICAgICAgIC8vIHdhaXQgdW50aWwgZGF0YSBsb2FkZWQgdG8gaW5zZXJ0XG4gICAgICAgIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgZGF0YUhvb2ssIGFmdGVyRGF0YSwgY2xlYW51cCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBsb2FkIGRhdGEgYW5kIGluc2VydCBhdCB0aGUgc2FtZSB0aW1lXG4gICAgICAgIGlmIChkYXRhSG9vaykge1xuICAgICAgICAgIGxvYWREYXRhKGNvbXBvbmVudCwgdHJhbnNpdGlvbiwgZGF0YUhvb2spO1xuICAgICAgICB9XG4gICAgICAgIGFmdGVyRGF0YSgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoYWN0aXZhdGVIb29rKSB7XG4gICAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhhY3RpdmF0ZUhvb2ssIGNvbXBvbmVudCwgYWZ0ZXJBY3RpdmF0ZSwge1xuICAgICAgICBjbGVhbnVwOiBjbGVhbnVwLFxuICAgICAgICBwb3N0QWN0aXZhdGU6IHRydWVcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBhZnRlckFjdGl2YXRlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJldXNlIGEgdmlldywganVzdCByZWxvYWQgZGF0YSBpZiBuZWNlc3NhcnkuXG4gICAqXG4gICAqIEBwYXJhbSB7RGlyZWN0aXZlfSB2aWV3XG4gICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuICAgKi9cblxuICBmdW5jdGlvbiByZXVzZSh2aWV3LCB0cmFuc2l0aW9uKSB7XG4gICAgdmFyIGNvbXBvbmVudCA9IHZpZXcuY2hpbGRWTTtcbiAgICB2YXIgZGF0YUhvb2sgPSBnZXRSb3V0ZUNvbmZpZyhjb21wb25lbnQsICdkYXRhJyk7XG4gICAgaWYgKGRhdGFIb29rKSB7XG4gICAgICBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGRhdGFIb29rKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQXN5bmNocm9ub3VzbHkgbG9hZCBhbmQgYXBwbHkgZGF0YSB0byBjb21wb25lbnQuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBjb21wb25lbnRcbiAgICogQHBhcmFtIHtUcmFuc2l0aW9ufSB0cmFuc2l0aW9uXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2xlYW51cFxuICAgKi9cblxuICBmdW5jdGlvbiBsb2FkRGF0YShjb21wb25lbnQsIHRyYW5zaXRpb24sIGhvb2ssIGNiLCBjbGVhbnVwKSB7XG4gICAgY29tcG9uZW50LiRsb2FkaW5nUm91dGVEYXRhID0gdHJ1ZTtcbiAgICB0cmFuc2l0aW9uLmNhbGxIb29rcyhob29rLCBjb21wb25lbnQsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGNvbXBvbmVudC4kbG9hZGluZ1JvdXRlRGF0YSA9IGZhbHNlO1xuICAgICAgY29tcG9uZW50LiRlbWl0KCdyb3V0ZS1kYXRhLWxvYWRlZCcsIGNvbXBvbmVudCk7XG4gICAgICBjYiAmJiBjYigpO1xuICAgIH0sIHtcbiAgICAgIGNsZWFudXA6IGNsZWFudXAsXG4gICAgICBwb3N0QWN0aXZhdGU6IHRydWUsXG4gICAgICBwcm9jZXNzRGF0YTogZnVuY3Rpb24gcHJvY2Vzc0RhdGEoZGF0YSkge1xuICAgICAgICAvLyBoYW5kbGUgcHJvbWlzZSBzdWdhciBzeW50YXhcbiAgICAgICAgdmFyIHByb21pc2VzID0gW107XG4gICAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRhdGEpKSB7XG4gICAgICAgICAgT2JqZWN0LmtleXMoZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7XG4gICAgICAgICAgICB2YXIgdmFsID0gZGF0YVtrZXldO1xuICAgICAgICAgICAgaWYgKGlzUHJvbWlzZSh2YWwpKSB7XG4gICAgICAgICAgICAgIHByb21pc2VzLnB1c2godmFsLnRoZW4oZnVuY3Rpb24gKHJlc29sdmVkVmFsKSB7XG4gICAgICAgICAgICAgICAgY29tcG9uZW50LiRzZXQoa2V5LCByZXNvbHZlZFZhbCk7XG4gICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGNvbXBvbmVudC4kc2V0KGtleSwgdmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAocHJvbWlzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgcmV0dXJuIHByb21pc2VzWzBdLmNvbnN0cnVjdG9yLmFsbChwcm9taXNlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYXZlIHRoZSBjaGlsZCB2aWV3IGZvciBhIGtlcHQtYWxpdmUgdmlldyBzbyB0aGF0XG4gICAqIHdlIGNhbiByZXN0b3JlIGl0IHdoZW4gaXQgaXMgc3dpdGNoZWQgYmFjayB0by5cbiAgICpcbiAgICogQHBhcmFtIHtEaXJlY3RpdmV9IHZpZXdcbiAgICovXG5cbiAgZnVuY3Rpb24gc2F2ZUNoaWxkVmlldyh2aWV3KSB7XG4gICAgaWYgKHZpZXcua2VlcEFsaXZlICYmIHZpZXcuY2hpbGRWTSAmJiB2aWV3LmNoaWxkVmlldykge1xuICAgICAgdmlldy5jaGlsZFZNLl9rZWVwQWxpdmVSb3V0ZXJWaWV3ID0gdmlldy5jaGlsZFZpZXc7XG4gICAgfVxuICAgIHZpZXcuY2hpbGRWaWV3ID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBwbGFpbiBvYmplY3QuXG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGlzUGxhaW5PYmplY3QodmFsKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBPYmplY3RdJztcbiAgfVxuXG4gIC8qKlxuICAgKiBBIFJvdXRlVHJhbnNpdGlvbiBvYmplY3QgbWFuYWdlcyB0aGUgcGlwZWxpbmUgb2YgYVxuICAgKiByb3V0ZXItdmlldyBzd2l0Y2hpbmcgcHJvY2Vzcy4gVGhpcyBpcyBhbHNvIHRoZSBvYmplY3RcbiAgICogcGFzc2VkIGludG8gdXNlciByb3V0ZSBob29rcy5cbiAgICpcbiAgICogQHBhcmFtIHtSb3V0ZXJ9IHJvdXRlclxuICAgKiBAcGFyYW0ge1JvdXRlfSB0b1xuICAgKiBAcGFyYW0ge1JvdXRlfSBmcm9tXG4gICAqL1xuXG4gIHZhciBSb3V0ZVRyYW5zaXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJvdXRlVHJhbnNpdGlvbihyb3V0ZXIsIHRvLCBmcm9tKSB7XG4gICAgICBiYWJlbEhlbHBlcnMuY2xhc3NDYWxsQ2hlY2sodGhpcywgUm91dGVUcmFuc2l0aW9uKTtcblxuICAgICAgdGhpcy5yb3V0ZXIgPSByb3V0ZXI7XG4gICAgICB0aGlzLnRvID0gdG87XG4gICAgICB0aGlzLmZyb20gPSBmcm9tO1xuICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgICAgIHRoaXMuYWJvcnRlZCA9IGZhbHNlO1xuICAgICAgdGhpcy5kb25lID0gZmFsc2U7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQWJvcnQgY3VycmVudCB0cmFuc2l0aW9uIGFuZCByZXR1cm4gdG8gcHJldmlvdXMgbG9jYXRpb24uXG4gICAgICovXG5cbiAgICBSb3V0ZVRyYW5zaXRpb24ucHJvdG90eXBlLmFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XG4gICAgICBpZiAoIXRoaXMuYWJvcnRlZCkge1xuICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICAvLyBpZiB0aGUgcm9vdCBwYXRoIHRocm93cyBhbiBlcnJvciBkdXJpbmcgdmFsaWRhdGlvblxuICAgICAgICAvLyBvbiBpbml0aWFsIGxvYWQsIGl0IGdldHMgY2F1Z2h0IGluIGFuIGluZmluaXRlIGxvb3AuXG4gICAgICAgIHZhciBhYm9ydGluZ09uTG9hZCA9ICF0aGlzLmZyb20ucGF0aCAmJiB0aGlzLnRvLnBhdGggPT09ICcvJztcbiAgICAgICAgaWYgKCFhYm9ydGluZ09uTG9hZCkge1xuICAgICAgICAgIHRoaXMucm91dGVyLnJlcGxhY2UodGhpcy5mcm9tLnBhdGggfHwgJy8nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBYm9ydCBjdXJyZW50IHRyYW5zaXRpb24gYW5kIHJlZGlyZWN0IHRvIGEgbmV3IGxvY2F0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUucmVkaXJlY3QgPSBmdW5jdGlvbiByZWRpcmVjdChwYXRoKSB7XG4gICAgICBpZiAoIXRoaXMuYWJvcnRlZCkge1xuICAgICAgICB0aGlzLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICBpZiAodHlwZW9mIHBhdGggPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgcGF0aCA9IG1hcFBhcmFtcyhwYXRoLCB0aGlzLnRvLnBhcmFtcywgdGhpcy50by5xdWVyeSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcGF0aC5wYXJhbXMgPSBwYXRoLnBhcmFtcyB8fCB0aGlzLnRvLnBhcmFtcztcbiAgICAgICAgICBwYXRoLnF1ZXJ5ID0gcGF0aC5xdWVyeSB8fCB0aGlzLnRvLnF1ZXJ5O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm91dGVyLnJlcGxhY2UocGF0aCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEEgcm91dGVyIHZpZXcgdHJhbnNpdGlvbidzIHBpcGVsaW5lIGNhbiBiZSBkZXNjcmliZWQgYXNcbiAgICAgKiBmb2xsb3dzLCBhc3N1bWluZyB3ZSBhcmUgdHJhbnNpdGlvbmluZyBmcm9tIGFuIGV4aXN0aW5nXG4gICAgICogPHJvdXRlci12aWV3PiBjaGFpbiBbQ29tcG9uZW50IEEsIENvbXBvbmVudCBCXSB0byBhIG5ld1xuICAgICAqIGNoYWluIFtDb21wb25lbnQgQSwgQ29tcG9uZW50IENdOlxuICAgICAqXG4gICAgICogIEEgICAgQVxuICAgICAqICB8ID0+IHxcbiAgICAgKiAgQiAgICBDXG4gICAgICpcbiAgICAgKiAxLiBSZXVzYWJsaXR5IHBoYXNlOlxuICAgICAqICAgLT4gY2FuUmV1c2UoQSwgQSlcbiAgICAgKiAgIC0+IGNhblJldXNlKEIsIEMpXG4gICAgICogICAtPiBkZXRlcm1pbmUgbmV3IHF1ZXVlczpcbiAgICAgKiAgICAgIC0gZGVhY3RpdmF0aW9uOiBbQl1cbiAgICAgKiAgICAgIC0gYWN0aXZhdGlvbjogW0NdXG4gICAgICpcbiAgICAgKiAyLiBWYWxpZGF0aW9uIHBoYXNlOlxuICAgICAqICAgLT4gY2FuRGVhY3RpdmF0ZShCKVxuICAgICAqICAgLT4gY2FuQWN0aXZhdGUoQylcbiAgICAgKlxuICAgICAqIDMuIEFjdGl2YXRpb24gcGhhc2U6XG4gICAgICogICAtPiBkZWFjdGl2YXRlKEIpXG4gICAgICogICAtPiBhY3RpdmF0ZShDKVxuICAgICAqXG4gICAgICogRWFjaCBvZiB0aGVzZSBzdGVwcyBjYW4gYmUgYXN5bmNocm9ub3VzLCBhbmQgYW55XG4gICAgICogc3RlcCBjYW4gcG90ZW50aWFsbHkgYWJvcnQgdGhlIHRyYW5zaXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgICAqL1xuXG4gICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uIHN0YXJ0KGNiKSB7XG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XG5cbiAgICAgIC8vIGRldGVybWluZSB0aGUgcXVldWUgb2Ygdmlld3MgdG8gZGVhY3RpdmF0ZVxuICAgICAgdmFyIGRlYWN0aXZhdGVRdWV1ZSA9IFtdO1xuICAgICAgdmFyIHZpZXcgPSB0aGlzLnJvdXRlci5fcm9vdFZpZXc7XG4gICAgICB3aGlsZSAodmlldykge1xuICAgICAgICBkZWFjdGl2YXRlUXVldWUudW5zaGlmdCh2aWV3KTtcbiAgICAgICAgdmlldyA9IHZpZXcuY2hpbGRWaWV3O1xuICAgICAgfVxuICAgICAgdmFyIHJldmVyc2VEZWFjdGl2YXRlUXVldWUgPSBkZWFjdGl2YXRlUXVldWUuc2xpY2UoKS5yZXZlcnNlKCk7XG5cbiAgICAgIC8vIGRldGVybWluZSB0aGUgcXVldWUgb2Ygcm91dGUgaGFuZGxlcnMgdG8gYWN0aXZhdGVcbiAgICAgIHZhciBhY3RpdmF0ZVF1ZXVlID0gdGhpcy5hY3RpdmF0ZVF1ZXVlID0gdG9BcnJheSh0aGlzLnRvLm1hdGNoZWQpLm1hcChmdW5jdGlvbiAobWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoLmhhbmRsZXI7XG4gICAgICB9KTtcblxuICAgICAgLy8gMS4gUmV1c2FiaWxpdHkgcGhhc2VcbiAgICAgIHZhciBpID0gdW5kZWZpbmVkLFxuICAgICAgICAgIHJldXNlUXVldWUgPSB1bmRlZmluZWQ7XG4gICAgICBmb3IgKGkgPSAwOyBpIDwgcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5sZW5ndGg7IGkrKykge1xuICAgICAgICBpZiAoIWNhblJldXNlKHJldmVyc2VEZWFjdGl2YXRlUXVldWVbaV0sIGFjdGl2YXRlUXVldWVbaV0sIHRyYW5zaXRpb24pKSB7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmIChpID4gMCkge1xuICAgICAgICByZXVzZVF1ZXVlID0gcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5zbGljZSgwLCBpKTtcbiAgICAgICAgZGVhY3RpdmF0ZVF1ZXVlID0gcmV2ZXJzZURlYWN0aXZhdGVRdWV1ZS5zbGljZShpKS5yZXZlcnNlKCk7XG4gICAgICAgIGFjdGl2YXRlUXVldWUgPSBhY3RpdmF0ZVF1ZXVlLnNsaWNlKGkpO1xuICAgICAgfVxuXG4gICAgICAvLyAyLiBWYWxpZGF0aW9uIHBoYXNlXG4gICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGRlYWN0aXZhdGVRdWV1ZSwgY2FuRGVhY3RpdmF0ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICB0cmFuc2l0aW9uLnJ1blF1ZXVlKGFjdGl2YXRlUXVldWUsIGNhbkFjdGl2YXRlLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShkZWFjdGl2YXRlUXVldWUsIGRlYWN0aXZhdGUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIDMuIEFjdGl2YXRpb24gcGhhc2VcblxuICAgICAgICAgICAgLy8gVXBkYXRlIHJvdXRlciBjdXJyZW50IHJvdXRlXG4gICAgICAgICAgICB0cmFuc2l0aW9uLnJvdXRlci5fb25UcmFuc2l0aW9uVmFsaWRhdGVkKHRyYW5zaXRpb24pO1xuXG4gICAgICAgICAgICAvLyB0cmlnZ2VyIHJldXNlIGZvciBhbGwgcmV1c2VkIHZpZXdzXG4gICAgICAgICAgICByZXVzZVF1ZXVlICYmIHJldXNlUXVldWUuZm9yRWFjaChmdW5jdGlvbiAodmlldykge1xuICAgICAgICAgICAgICByZXR1cm4gcmV1c2UodmlldywgdHJhbnNpdGlvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy8gdGhlIHJvb3Qgb2YgdGhlIGNoYWluIHRoYXQgbmVlZHMgdG8gYmUgcmVwbGFjZWRcbiAgICAgICAgICAgIC8vIGlzIHRoZSB0b3AtbW9zdCBub24tcmV1c2FibGUgdmlldy5cbiAgICAgICAgICAgIGlmIChkZWFjdGl2YXRlUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHZhciBfdmlldyA9IGRlYWN0aXZhdGVRdWV1ZVtkZWFjdGl2YXRlUXVldWUubGVuZ3RoIC0gMV07XG4gICAgICAgICAgICAgIHZhciBkZXB0aCA9IHJldXNlUXVldWUgPyByZXVzZVF1ZXVlLmxlbmd0aCA6IDA7XG4gICAgICAgICAgICAgIGFjdGl2YXRlKF92aWV3LCB0cmFuc2l0aW9uLCBkZXB0aCwgY2IpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY2IoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQXN5bmNocm9ub3VzbHkgYW5kIHNlcXVlbnRpYWxseSBhcHBseSBhIGZ1bmN0aW9uIHRvIGFcbiAgICAgKiBxdWV1ZS5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7QXJyYXl9IHF1ZXVlXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICAgICAqL1xuXG4gICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5ydW5RdWV1ZSA9IGZ1bmN0aW9uIHJ1blF1ZXVlKHF1ZXVlLCBmbiwgY2IpIHtcbiAgICAgIHZhciB0cmFuc2l0aW9uID0gdGhpcztcbiAgICAgIHN0ZXAoMCk7XG4gICAgICBmdW5jdGlvbiBzdGVwKGluZGV4KSB7XG4gICAgICAgIGlmIChpbmRleCA+PSBxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICBjYigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZuKHF1ZXVlW2luZGV4XSwgdHJhbnNpdGlvbiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc3RlcChpbmRleCArIDEpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENhbGwgYSB1c2VyIHByb3ZpZGVkIHJvdXRlIHRyYW5zaXRpb24gaG9vayBhbmQgaGFuZGxlXG4gICAgICogdGhlIHJlc3BvbnNlIChlLmcuIGlmIHRoZSB1c2VyIHJldHVybnMgYSBwcm9taXNlKS5cbiAgICAgKlxuICAgICAqIElmIHRoZSB1c2VyIG5laXRoZXIgZXhwZWN0cyBhbiBhcmd1bWVudCBub3IgcmV0dXJucyBhXG4gICAgICogcHJvbWlzZSwgdGhlIGhvb2sgaXMgYXNzdW1lZCB0byBiZSBzeW5jaHJvbm91cy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhvb2tcbiAgICAgKiBAcGFyYW0geyp9IFtjb250ZXh0XVxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGV4cGVjdEJvb2xlYW5cbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gcG9zdEFjdGl2ZVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gcHJvY2Vzc0RhdGFcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IGNsZWFudXBcbiAgICAgKi9cblxuICAgIFJvdXRlVHJhbnNpdGlvbi5wcm90b3R5cGUuY2FsbEhvb2sgPSBmdW5jdGlvbiBjYWxsSG9vayhob29rLCBjb250ZXh0LCBjYikge1xuICAgICAgdmFyIF9yZWYgPSBhcmd1bWVudHMubGVuZ3RoIDw9IDMgfHwgYXJndW1lbnRzWzNdID09PSB1bmRlZmluZWQgPyB7fSA6IGFyZ3VtZW50c1szXTtcblxuICAgICAgdmFyIF9yZWYkZXhwZWN0Qm9vbGVhbiA9IF9yZWYuZXhwZWN0Qm9vbGVhbjtcbiAgICAgIHZhciBleHBlY3RCb29sZWFuID0gX3JlZiRleHBlY3RCb29sZWFuID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkZXhwZWN0Qm9vbGVhbjtcbiAgICAgIHZhciBfcmVmJHBvc3RBY3RpdmF0ZSA9IF9yZWYucG9zdEFjdGl2YXRlO1xuICAgICAgdmFyIHBvc3RBY3RpdmF0ZSA9IF9yZWYkcG9zdEFjdGl2YXRlID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkcG9zdEFjdGl2YXRlO1xuICAgICAgdmFyIHByb2Nlc3NEYXRhID0gX3JlZi5wcm9jZXNzRGF0YTtcbiAgICAgIHZhciBjbGVhbnVwID0gX3JlZi5jbGVhbnVwO1xuXG4gICAgICB2YXIgdHJhbnNpdGlvbiA9IHRoaXM7XG4gICAgICB2YXIgbmV4dENhbGxlZCA9IGZhbHNlO1xuXG4gICAgICAvLyBhYm9ydCB0aGUgdHJhbnNpdGlvblxuICAgICAgdmFyIGFib3J0ID0gZnVuY3Rpb24gYWJvcnQoKSB7XG4gICAgICAgIGNsZWFudXAgJiYgY2xlYW51cCgpO1xuICAgICAgICB0cmFuc2l0aW9uLmFib3J0KCk7XG4gICAgICB9O1xuXG4gICAgICAvLyBoYW5kbGUgZXJyb3JzXG4gICAgICB2YXIgb25FcnJvciA9IGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7XG4gICAgICAgIHBvc3RBY3RpdmF0ZSA/IG5leHQoKSA6IGFib3J0KCk7XG4gICAgICAgIGlmIChlcnIgJiYgIXRyYW5zaXRpb24ucm91dGVyLl9zdXBwcmVzcykge1xuICAgICAgICAgIHdhcm4kMSgnVW5jYXVnaHQgZXJyb3IgZHVyaW5nIHRyYW5zaXRpb246ICcpO1xuICAgICAgICAgIHRocm93IGVyciBpbnN0YW5jZW9mIEVycm9yID8gZXJyIDogbmV3IEVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIHNpbmNlIHByb21pc2Ugc3dhbGxvd3MgZXJyb3JzLCB3ZSBoYXZlIHRvXG4gICAgICAvLyB0aHJvdyBpdCBpbiB0aGUgbmV4dCB0aWNrLi4uXG4gICAgICB2YXIgb25Qcm9taXNlRXJyb3IgPSBmdW5jdGlvbiBvblByb21pc2VFcnJvcihlcnIpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBvbkVycm9yKGVycik7XG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIGFkdmFuY2UgdGhlIHRyYW5zaXRpb24gdG8gdGhlIG5leHQgc3RlcFxuICAgICAgdmFyIG5leHQgPSBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICBpZiAobmV4dENhbGxlZCkge1xuICAgICAgICAgIHdhcm4kMSgndHJhbnNpdGlvbi5uZXh0KCkgc2hvdWxkIGJlIGNhbGxlZCBvbmx5IG9uY2UuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIG5leHRDYWxsZWQgPSB0cnVlO1xuICAgICAgICBpZiAodHJhbnNpdGlvbi5hYm9ydGVkKSB7XG4gICAgICAgICAgY2xlYW51cCAmJiBjbGVhbnVwKCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGNiICYmIGNiKCk7XG4gICAgICB9O1xuXG4gICAgICB2YXIgbmV4dFdpdGhCb29sZWFuID0gZnVuY3Rpb24gbmV4dFdpdGhCb29sZWFuKHJlcykge1xuICAgICAgICBpZiAodHlwZW9mIHJlcyA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgcmVzID8gbmV4dCgpIDogYWJvcnQoKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1Byb21pc2UocmVzKSkge1xuICAgICAgICAgIHJlcy50aGVuKGZ1bmN0aW9uIChvaykge1xuICAgICAgICAgICAgb2sgPyBuZXh0KCkgOiBhYm9ydCgpO1xuICAgICAgICAgIH0sIG9uUHJvbWlzZUVycm9yKTtcbiAgICAgICAgfSBlbHNlIGlmICghaG9vay5sZW5ndGgpIHtcbiAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBuZXh0V2l0aERhdGEgPSBmdW5jdGlvbiBuZXh0V2l0aERhdGEoZGF0YSkge1xuICAgICAgICB2YXIgcmVzID0gdW5kZWZpbmVkO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHJlcyA9IHByb2Nlc3NEYXRhKGRhdGEpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICByZXR1cm4gb25FcnJvcihlcnIpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc1Byb21pc2UocmVzKSkge1xuICAgICAgICAgIHJlcy50aGVuKG5leHQsIG9uUHJvbWlzZUVycm9yKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBuZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIC8vIGV4cG9zZSBhIGNsb25lIG9mIHRoZSB0cmFuc2l0aW9uIG9iamVjdCwgc28gdGhhdCBlYWNoXG4gICAgICAvLyBob29rIGdldHMgYSBjbGVhbiBjb3B5IGFuZCBwcmV2ZW50IHRoZSB1c2VyIGZyb21cbiAgICAgIC8vIG1lc3Npbmcgd2l0aCB0aGUgaW50ZXJuYWxzLlxuICAgICAgdmFyIGV4cG9zZWQgPSB7XG4gICAgICAgIHRvOiB0cmFuc2l0aW9uLnRvLFxuICAgICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb20sXG4gICAgICAgIGFib3J0OiBhYm9ydCxcbiAgICAgICAgbmV4dDogcHJvY2Vzc0RhdGEgPyBuZXh0V2l0aERhdGEgOiBuZXh0LFxuICAgICAgICByZWRpcmVjdDogZnVuY3Rpb24gcmVkaXJlY3QoKSB7XG4gICAgICAgICAgdHJhbnNpdGlvbi5yZWRpcmVjdC5hcHBseSh0cmFuc2l0aW9uLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICAvLyBhY3R1YWxseSBjYWxsIHRoZSBob29rXG4gICAgICB2YXIgcmVzID0gdW5kZWZpbmVkO1xuICAgICAgdHJ5IHtcbiAgICAgICAgcmVzID0gaG9vay5jYWxsKGNvbnRleHQsIGV4cG9zZWQpO1xuICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgIHJldHVybiBvbkVycm9yKGVycik7XG4gICAgICB9XG5cbiAgICAgIGlmIChleHBlY3RCb29sZWFuKSB7XG4gICAgICAgIC8vIGJvb2xlYW4gaG9va3NcbiAgICAgICAgbmV4dFdpdGhCb29sZWFuKHJlcyk7XG4gICAgICB9IGVsc2UgaWYgKGlzUHJvbWlzZShyZXMpKSB7XG4gICAgICAgIC8vIHByb21pc2VcbiAgICAgICAgaWYgKHByb2Nlc3NEYXRhKSB7XG4gICAgICAgICAgcmVzLnRoZW4obmV4dFdpdGhEYXRhLCBvblByb21pc2VFcnJvcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmVzLnRoZW4obmV4dCwgb25Qcm9taXNlRXJyb3IpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHByb2Nlc3NEYXRhICYmIGlzUGxhaW5PamJlY3QocmVzKSkge1xuICAgICAgICAvLyBkYXRhIHByb21pc2Ugc3VnYXJcbiAgICAgICAgbmV4dFdpdGhEYXRhKHJlcyk7XG4gICAgICB9IGVsc2UgaWYgKCFob29rLmxlbmd0aCkge1xuICAgICAgICBuZXh0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENhbGwgYSBzaW5nbGUgaG9vayBvciBhbiBhcnJheSBvZiBhc3luYyBob29rcyBpbiBzZXJpZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0FycmF5fSBob29rc1xuICAgICAqIEBwYXJhbSB7Kn0gY29udGV4dFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAgICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXVxuICAgICAqL1xuXG4gICAgUm91dGVUcmFuc2l0aW9uLnByb3RvdHlwZS5jYWxsSG9va3MgPSBmdW5jdGlvbiBjYWxsSG9va3MoaG9va3MsIGNvbnRleHQsIGNiLCBvcHRpb25zKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShob29rcykpIHtcbiAgICAgICAgdGhpcy5ydW5RdWV1ZShob29rcywgZnVuY3Rpb24gKGhvb2ssIF8sIG5leHQpIHtcbiAgICAgICAgICBpZiAoIV90aGlzLmFib3J0ZWQpIHtcbiAgICAgICAgICAgIF90aGlzLmNhbGxIb29rKGhvb2ssIGNvbnRleHQsIG5leHQsIG9wdGlvbnMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgY2IpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5jYWxsSG9vayhob29rcywgY29udGV4dCwgY2IsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gUm91dGVUcmFuc2l0aW9uO1xuICB9KSgpO1xuXG4gIGZ1bmN0aW9uIGlzUGxhaW5PamJlY3QodmFsKSB7XG4gICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbCh2YWwpID09PSAnW29iamVjdCBPYmplY3RdJztcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvQXJyYXkodmFsKSB7XG4gICAgcmV0dXJuIHZhbCA/IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHZhbCkgOiBbXTtcbiAgfVxuXG4gIHZhciBpbnRlcm5hbEtleXNSRSA9IC9eKGNvbXBvbmVudHxzdWJSb3V0ZXN8ZnVsbFBhdGgpJC87XG5cbiAgLyoqXG4gICAqIFJvdXRlIENvbnRleHQgT2JqZWN0XG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAqIEBwYXJhbSB7Um91dGVyfSByb3V0ZXJcbiAgICovXG5cbiAgdmFyIFJvdXRlID0gZnVuY3Rpb24gUm91dGUocGF0aCwgcm91dGVyKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZSk7XG5cbiAgICB2YXIgbWF0Y2hlZCA9IHJvdXRlci5fcmVjb2duaXplci5yZWNvZ25pemUocGF0aCk7XG4gICAgaWYgKG1hdGNoZWQpIHtcbiAgICAgIC8vIGNvcHkgYWxsIGN1c3RvbSBmaWVsZHMgZnJvbSByb3V0ZSBjb25maWdzXG4gICAgICBbXS5mb3JFYWNoLmNhbGwobWF0Y2hlZCwgZnVuY3Rpb24gKG1hdGNoKSB7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBtYXRjaC5oYW5kbGVyKSB7XG4gICAgICAgICAgaWYgKCFpbnRlcm5hbEtleXNSRS50ZXN0KGtleSkpIHtcbiAgICAgICAgICAgIF90aGlzW2tleV0gPSBtYXRjaC5oYW5kbGVyW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIHNldCBxdWVyeSBhbmQgcGFyYW1zXG4gICAgICB0aGlzLnF1ZXJ5ID0gbWF0Y2hlZC5xdWVyeVBhcmFtcztcbiAgICAgIHRoaXMucGFyYW1zID0gW10ucmVkdWNlLmNhbGwobWF0Y2hlZCwgZnVuY3Rpb24gKHByZXYsIGN1cikge1xuICAgICAgICBpZiAoY3VyLnBhcmFtcykge1xuICAgICAgICAgIGZvciAodmFyIGtleSBpbiBjdXIucGFyYW1zKSB7XG4gICAgICAgICAgICBwcmV2W2tleV0gPSBjdXIucGFyYW1zW2tleV07XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBwcmV2O1xuICAgICAgfSwge30pO1xuICAgIH1cbiAgICAvLyBleHBvc2UgcGF0aCBhbmQgcm91dGVyXG4gICAgdGhpcy5wYXRoID0gcGF0aDtcbiAgICAvLyBmb3IgaW50ZXJuYWwgdXNlXG4gICAgdGhpcy5tYXRjaGVkID0gbWF0Y2hlZCB8fCByb3V0ZXIuX25vdEZvdW5kSGFuZGxlcjtcbiAgICAvLyBpbnRlcm5hbCByZWZlcmVuY2UgdG8gcm91dGVyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdyb3V0ZXInLCB7XG4gICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgIHZhbHVlOiByb3V0ZXJcbiAgICB9KTtcbiAgICAvLyBJbXBvcnRhbnQ6IGZyZWV6ZSBzZWxmIHRvIHByZXZlbnQgb2JzZXJ2YXRpb25cbiAgICBPYmplY3QuZnJlZXplKHRoaXMpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIGFwcGx5T3ZlcnJpZGUgKFZ1ZSkge1xuICAgIHZhciBfVnVlJHV0aWwgPSBWdWUudXRpbDtcbiAgICB2YXIgZXh0ZW5kID0gX1Z1ZSR1dGlsLmV4dGVuZDtcbiAgICB2YXIgaXNBcnJheSA9IF9WdWUkdXRpbC5pc0FycmF5O1xuICAgIHZhciBkZWZpbmVSZWFjdGl2ZSA9IF9WdWUkdXRpbC5kZWZpbmVSZWFjdGl2ZTtcblxuICAgIC8vIG92ZXJyaWRlIFZ1ZSdzIGluaXQgYW5kIGRlc3Ryb3kgcHJvY2VzcyB0byBrZWVwIHRyYWNrIG9mIHJvdXRlciBpbnN0YW5jZXNcbiAgICB2YXIgaW5pdCA9IFZ1ZS5wcm90b3R5cGUuX2luaXQ7XG4gICAgVnVlLnByb3RvdHlwZS5faW5pdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcbiAgICAgIHZhciByb290ID0gb3B0aW9ucy5fcGFyZW50IHx8IG9wdGlvbnMucGFyZW50IHx8IHRoaXM7XG4gICAgICB2YXIgcm91dGVyID0gcm9vdC4kcm91dGVyO1xuICAgICAgdmFyIHJvdXRlID0gcm9vdC4kcm91dGU7XG4gICAgICBpZiAocm91dGVyKSB7XG4gICAgICAgIC8vIGV4cG9zZSByb3V0ZXJcbiAgICAgICAgdGhpcy4kcm91dGVyID0gcm91dGVyO1xuICAgICAgICByb3V0ZXIuX2NoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodGhpcy5fZGVmaW5lTWV0YSkge1xuICAgICAgICAgIC8vIDAuMTJcbiAgICAgICAgICB0aGlzLl9kZWZpbmVNZXRhKCckcm91dGUnLCByb3V0ZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gMS4wXG4gICAgICAgICAgZGVmaW5lUmVhY3RpdmUodGhpcywgJyRyb3V0ZScsIHJvdXRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaW5pdC5jYWxsKHRoaXMsIG9wdGlvbnMpO1xuICAgIH07XG5cbiAgICB2YXIgZGVzdHJveSA9IFZ1ZS5wcm90b3R5cGUuX2Rlc3Ryb3k7XG4gICAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICghdGhpcy5faXNCZWluZ0Rlc3Ryb3llZCAmJiB0aGlzLiRyb3V0ZXIpIHtcbiAgICAgICAgdGhpcy4kcm91dGVyLl9jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuICAgICAgfVxuICAgICAgZGVzdHJveS5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG5cbiAgICAvLyAxLjAgb25seTogZW5hYmxlIHJvdXRlIG1peGluc1xuICAgIHZhciBzdHJhdHMgPSBWdWUuY29uZmlnLm9wdGlvbk1lcmdlU3RyYXRlZ2llcztcbiAgICB2YXIgaG9va3NUb01lcmdlUkUgPSAvXihkYXRhfGFjdGl2YXRlfGRlYWN0aXZhdGUpJC87XG5cbiAgICBpZiAoc3RyYXRzKSB7XG4gICAgICBzdHJhdHMucm91dGUgPSBmdW5jdGlvbiAocGFyZW50VmFsLCBjaGlsZFZhbCkge1xuICAgICAgICBpZiAoIWNoaWxkVmFsKSByZXR1cm4gcGFyZW50VmFsO1xuICAgICAgICBpZiAoIXBhcmVudFZhbCkgcmV0dXJuIGNoaWxkVmFsO1xuICAgICAgICB2YXIgcmV0ID0ge307XG4gICAgICAgIGV4dGVuZChyZXQsIHBhcmVudFZhbCk7XG4gICAgICAgIGZvciAodmFyIGtleSBpbiBjaGlsZFZhbCkge1xuICAgICAgICAgIHZhciBhID0gcmV0W2tleV07XG4gICAgICAgICAgdmFyIGIgPSBjaGlsZFZhbFtrZXldO1xuICAgICAgICAgIC8vIGZvciBkYXRhLCBhY3RpdmF0ZSBhbmQgZGVhY3RpdmF0ZSwgd2UgbmVlZCB0byBtZXJnZSB0aGVtIGludG9cbiAgICAgICAgICAvLyBhcnJheXMgc2ltaWxhciB0byBsaWZlY3ljbGUgaG9va3MuXG4gICAgICAgICAgaWYgKGEgJiYgaG9va3NUb01lcmdlUkUudGVzdChrZXkpKSB7XG4gICAgICAgICAgICByZXRba2V5XSA9IChpc0FycmF5KGEpID8gYSA6IFthXSkuY29uY2F0KGIpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXRba2V5XSA9IGI7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXQ7XG4gICAgICB9O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIFZpZXcgKFZ1ZSkge1xuXG4gICAgdmFyIF8gPSBWdWUudXRpbDtcbiAgICB2YXIgY29tcG9uZW50RGVmID1cbiAgICAvLyAwLjEyXG4gICAgVnVlLmRpcmVjdGl2ZSgnX2NvbXBvbmVudCcpIHx8XG4gICAgLy8gMS4wXG4gICAgVnVlLmludGVybmFsRGlyZWN0aXZlcy5jb21wb25lbnQ7XG4gICAgLy8gPHJvdXRlci12aWV3PiBleHRlbmRzIHRoZSBpbnRlcm5hbCBjb21wb25lbnQgZGlyZWN0aXZlXG4gICAgdmFyIHZpZXdEZWYgPSBfLmV4dGVuZCh7fSwgY29tcG9uZW50RGVmKTtcblxuICAgIC8vIHdpdGggc29tZSBvdmVycmlkZXNcbiAgICBfLmV4dGVuZCh2aWV3RGVmLCB7XG5cbiAgICAgIF9pc1JvdXRlclZpZXc6IHRydWUsXG5cbiAgICAgIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgICAgIHZhciByb3V0ZSA9IHRoaXMudm0uJHJvdXRlO1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCFyb3V0ZSkge1xuICAgICAgICAgIHdhcm4kMSgnPHJvdXRlci12aWV3PiBjYW4gb25seSBiZSB1c2VkIGluc2lkZSBhICcgKyAncm91dGVyLWVuYWJsZWQgYXBwLicpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBmb3JjZSBkeW5hbWljIGRpcmVjdGl2ZSBzbyB2LWNvbXBvbmVudCBkb2Vzbid0XG4gICAgICAgIC8vIGF0dGVtcHQgdG8gYnVpbGQgcmlnaHQgbm93XG4gICAgICAgIHRoaXMuX2lzRHluYW1pY0xpdGVyYWwgPSB0cnVlO1xuICAgICAgICAvLyBmaW5hbGx5LCBpbml0IGJ5IGRlbGVnYXRpbmcgdG8gdi1jb21wb25lbnRcbiAgICAgICAgY29tcG9uZW50RGVmLmJpbmQuY2FsbCh0aGlzKTtcblxuICAgICAgICAvLyBsb2NhdGUgdGhlIHBhcmVudCB2aWV3XG4gICAgICAgIHZhciBwYXJlbnRWaWV3ID0gdW5kZWZpbmVkO1xuICAgICAgICB2YXIgcGFyZW50ID0gdGhpcy52bTtcbiAgICAgICAgd2hpbGUgKHBhcmVudCkge1xuICAgICAgICAgIGlmIChwYXJlbnQuX3JvdXRlclZpZXcpIHtcbiAgICAgICAgICAgIHBhcmVudFZpZXcgPSBwYXJlbnQuX3JvdXRlclZpZXc7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHBhcmVudFZpZXcpIHtcbiAgICAgICAgICAvLyByZWdpc3RlciBzZWxmIGFzIGEgY2hpbGQgb2YgdGhlIHBhcmVudCB2aWV3LFxuICAgICAgICAgIC8vIGluc3RlYWQgb2YgYWN0aXZhdGluZyBub3cuIFRoaXMgaXMgc28gdGhhdCB0aGVcbiAgICAgICAgICAvLyBjaGlsZCdzIGFjdGl2YXRlIGhvb2sgaXMgY2FsbGVkIGFmdGVyIHRoZVxuICAgICAgICAgIC8vIHBhcmVudCdzIGhhcyByZXNvbHZlZC5cbiAgICAgICAgICB0aGlzLnBhcmVudFZpZXcgPSBwYXJlbnRWaWV3O1xuICAgICAgICAgIHBhcmVudFZpZXcuY2hpbGRWaWV3ID0gdGhpcztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB0aGlzIGlzIHRoZSByb290IHZpZXchXG4gICAgICAgICAgdmFyIHJvdXRlciA9IHJvdXRlLnJvdXRlcjtcbiAgICAgICAgICByb3V0ZXIuX3Jvb3RWaWV3ID0gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGhhbmRsZSBsYXRlLXJlbmRlcmVkIHZpZXdcbiAgICAgICAgLy8gdHdvIHBvc3NpYmlsaXRpZXM6XG4gICAgICAgIC8vIDEuIHJvb3QgdmlldyByZW5kZXJlZCBhZnRlciB0cmFuc2l0aW9uIGhhcyBiZWVuXG4gICAgICAgIC8vICAgIHZhbGlkYXRlZDtcbiAgICAgICAgLy8gMi4gY2hpbGQgdmlldyByZW5kZXJlZCBhZnRlciBwYXJlbnQgdmlldyBoYXMgYmVlblxuICAgICAgICAvLyAgICBhY3RpdmF0ZWQuXG4gICAgICAgIHZhciB0cmFuc2l0aW9uID0gcm91dGUucm91dGVyLl9jdXJyZW50VHJhbnNpdGlvbjtcbiAgICAgICAgaWYgKCFwYXJlbnRWaWV3ICYmIHRyYW5zaXRpb24uZG9uZSB8fCBwYXJlbnRWaWV3ICYmIHBhcmVudFZpZXcuYWN0aXZhdGVkKSB7XG4gICAgICAgICAgdmFyIGRlcHRoID0gcGFyZW50VmlldyA/IHBhcmVudFZpZXcuZGVwdGggKyAxIDogMDtcbiAgICAgICAgICBhY3RpdmF0ZSh0aGlzLCB0cmFuc2l0aW9uLCBkZXB0aCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgICBpZiAodGhpcy5wYXJlbnRWaWV3KSB7XG4gICAgICAgICAgdGhpcy5wYXJlbnRWaWV3LmNoaWxkVmlldyA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgICAgY29tcG9uZW50RGVmLnVuYmluZC5jYWxsKHRoaXMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgVnVlLmVsZW1lbnREaXJlY3RpdmUoJ3JvdXRlci12aWV3Jywgdmlld0RlZik7XG4gIH1cblxuICB2YXIgdHJhaWxpbmdTbGFzaFJFID0gL1xcLyQvO1xuICB2YXIgcmVnZXhFc2NhcGVSRSA9IC9bLS4qKz9eJHt9KCl8W1xcXVxcL1xcXFxdL2c7XG4gIHZhciBxdWVyeVN0cmluZ1JFID0gL1xcPy4qJC87XG5cbiAgLy8gaW5zdGFsbCB2LWxpbmssIHdoaWNoIHByb3ZpZGVzIG5hdmlnYXRpb24gc3VwcG9ydCBmb3JcbiAgLy8gSFRNTDUgaGlzdG9yeSBtb2RlXG4gIGZ1bmN0aW9uIExpbmsgKFZ1ZSkge1xuICAgIHZhciBfVnVlJHV0aWwgPSBWdWUudXRpbDtcbiAgICB2YXIgX2JpbmQgPSBfVnVlJHV0aWwuYmluZDtcbiAgICB2YXIgaXNPYmplY3QgPSBfVnVlJHV0aWwuaXNPYmplY3Q7XG4gICAgdmFyIGFkZENsYXNzID0gX1Z1ZSR1dGlsLmFkZENsYXNzO1xuICAgIHZhciByZW1vdmVDbGFzcyA9IF9WdWUkdXRpbC5yZW1vdmVDbGFzcztcblxuICAgIHZhciBvblByaW9yaXR5ID0gVnVlLmRpcmVjdGl2ZSgnb24nKS5wcmlvcml0eTtcbiAgICB2YXIgTElOS19VUERBVEUgPSAnX192dWUtcm91dGVyLWxpbmstdXBkYXRlX18nO1xuXG4gICAgdmFyIGFjdGl2ZUlkID0gMDtcblxuICAgIFZ1ZS5kaXJlY3RpdmUoJ2xpbmstYWN0aXZlJywge1xuICAgICAgcHJpb3JpdHk6IDk5OTksXG4gICAgICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIHZhciBpZCA9IFN0cmluZyhhY3RpdmVJZCsrKTtcbiAgICAgICAgLy8gY29sbGVjdCB2LWxpbmtzIGNvbnRhaW5lZCB3aXRoaW4gdGhpcyBlbGVtZW50LlxuICAgICAgICAvLyB3ZSBuZWVkIGRvIHRoaXMgaGVyZSBiZWZvcmUgdGhlIHBhcmVudC1jaGlsZCByZWxhdGlvbnNoaXBcbiAgICAgICAgLy8gZ2V0cyBtZXNzZWQgdXAgYnkgdGVybWluYWwgZGlyZWN0aXZlcyAoaWYsIGZvciwgY29tcG9uZW50cylcbiAgICAgICAgdmFyIGNoaWxkTGlua3MgPSB0aGlzLmVsLnF1ZXJ5U2VsZWN0b3JBbGwoJ1t2LWxpbmtdJyk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRMaW5rcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICB2YXIgbGluayA9IGNoaWxkTGlua3NbaV07XG4gICAgICAgICAgdmFyIGV4aXN0aW5nSWQgPSBsaW5rLmdldEF0dHJpYnV0ZShMSU5LX1VQREFURSk7XG4gICAgICAgICAgdmFyIHZhbHVlID0gZXhpc3RpbmdJZCA/IGV4aXN0aW5nSWQgKyAnLCcgKyBpZCA6IGlkO1xuICAgICAgICAgIC8vIGxlYXZlIGEgbWFyayBvbiB0aGUgbGluayBlbGVtZW50IHdoaWNoIGNhbiBiZSBwZXJzaXN0ZWRcbiAgICAgICAgICAvLyB0aHJvdWdoIGZyYWdtZW50IGNsb25lcy5cbiAgICAgICAgICBsaW5rLnNldEF0dHJpYnV0ZShMSU5LX1VQREFURSwgdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudm0uJG9uKExJTktfVVBEQVRFLCB0aGlzLmNiID0gZnVuY3Rpb24gKGxpbmssIHBhdGgpIHtcbiAgICAgICAgICBpZiAobGluay5hY3RpdmVJZHMuaW5kZXhPZihpZCkgPiAtMSkge1xuICAgICAgICAgICAgbGluay51cGRhdGVDbGFzc2VzKHBhdGgsIF90aGlzLmVsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgICB0aGlzLnZtLiRvZmYoTElOS19VUERBVEUsIHRoaXMuY2IpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgVnVlLmRpcmVjdGl2ZSgnbGluaycsIHtcbiAgICAgIHByaW9yaXR5OiBvblByaW9yaXR5IC0gMixcblxuICAgICAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAgICAgdmFyIHZtID0gdGhpcy52bTtcbiAgICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICAgIGlmICghdm0uJHJvdXRlKSB7XG4gICAgICAgICAgd2FybiQxKCd2LWxpbmsgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgYSByb3V0ZXItZW5hYmxlZCBhcHAuJyk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucm91dGVyID0gdm0uJHJvdXRlLnJvdXRlcjtcbiAgICAgICAgLy8gdXBkYXRlIHRoaW5ncyB3aGVuIHRoZSByb3V0ZSBjaGFuZ2VzXG4gICAgICAgIHRoaXMudW53YXRjaCA9IHZtLiR3YXRjaCgnJHJvdXRlJywgX2JpbmQodGhpcy5vblJvdXRlVXBkYXRlLCB0aGlzKSk7XG4gICAgICAgIC8vIGNoZWNrIHYtbGluay1hY3RpdmUgaWRzXG4gICAgICAgIHZhciBhY3RpdmVJZHMgPSB0aGlzLmVsLmdldEF0dHJpYnV0ZShMSU5LX1VQREFURSk7XG4gICAgICAgIGlmIChhY3RpdmVJZHMpIHtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZShMSU5LX1VQREFURSk7XG4gICAgICAgICAgdGhpcy5hY3RpdmVJZHMgPSBhY3RpdmVJZHMuc3BsaXQoJywnKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBubyBuZWVkIHRvIGhhbmRsZSBjbGljayBpZiBsaW5rIGV4cGVjdHMgdG8gYmUgb3BlbmVkXG4gICAgICAgIC8vIGluIGEgbmV3IHdpbmRvdy90YWIuXG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAodGhpcy5lbC50YWdOYW1lID09PSAnQScgJiYgdGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ3RhcmdldCcpID09PSAnX2JsYW5rJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBoYW5kbGUgY2xpY2tcbiAgICAgICAgdGhpcy5oYW5kbGVyID0gX2JpbmQodGhpcy5vbkNsaWNrLCB0aGlzKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuaGFuZGxlcik7XG4gICAgICB9LFxuXG4gICAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh0YXJnZXQpIHtcbiAgICAgICAgdGhpcy50YXJnZXQgPSB0YXJnZXQ7XG4gICAgICAgIGlmIChpc09iamVjdCh0YXJnZXQpKSB7XG4gICAgICAgICAgdGhpcy5hcHBlbmQgPSB0YXJnZXQuYXBwZW5kO1xuICAgICAgICAgIHRoaXMuZXhhY3QgPSB0YXJnZXQuZXhhY3Q7XG4gICAgICAgICAgdGhpcy5wcmV2QWN0aXZlQ2xhc3MgPSB0aGlzLmFjdGl2ZUNsYXNzO1xuICAgICAgICAgIHRoaXMuYWN0aXZlQ2xhc3MgPSB0YXJnZXQuYWN0aXZlQ2xhc3M7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5vblJvdXRlVXBkYXRlKHRoaXMudm0uJHJvdXRlKTtcbiAgICAgIH0sXG5cbiAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uIG9uQ2xpY2soZSkge1xuICAgICAgICAvLyBkb24ndCByZWRpcmVjdCB3aXRoIGNvbnRyb2wga2V5c1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKGUubWV0YUtleSB8fCBlLmN0cmxLZXkgfHwgZS5zaGlmdEtleSkgcmV0dXJuO1xuICAgICAgICAvLyBkb24ndCByZWRpcmVjdCB3aGVuIHByZXZlbnREZWZhdWx0IGNhbGxlZFxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKGUuZGVmYXVsdFByZXZlbnRlZCkgcmV0dXJuO1xuICAgICAgICAvLyBkb24ndCByZWRpcmVjdCBvbiByaWdodCBjbGlja1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKGUuYnV0dG9uICE9PSAwKSByZXR1cm47XG5cbiAgICAgICAgdmFyIHRhcmdldCA9IHRoaXMudGFyZ2V0O1xuICAgICAgICBpZiAodGFyZ2V0KSB7XG4gICAgICAgICAgLy8gdi1saW5rIHdpdGggZXhwcmVzc2lvbiwganVzdCBnb1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLnJvdXRlci5nbyh0YXJnZXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIG5vIGV4cHJlc3Npb24sIGRlbGVnYXRlIGZvciBhbiA8YT4gaW5zaWRlXG4gICAgICAgICAgdmFyIGVsID0gZS50YXJnZXQ7XG4gICAgICAgICAgd2hpbGUgKGVsLnRhZ05hbWUgIT09ICdBJyAmJiBlbCAhPT0gdGhpcy5lbCkge1xuICAgICAgICAgICAgZWwgPSBlbC5wYXJlbnROb2RlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoZWwudGFnTmFtZSA9PT0gJ0EnICYmIHNhbWVPcmlnaW4oZWwpKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB2YXIgcGF0aCA9IGVsLnBhdGhuYW1lO1xuICAgICAgICAgICAgaWYgKHRoaXMucm91dGVyLmhpc3Rvcnkucm9vdCkge1xuICAgICAgICAgICAgICBwYXRoID0gcGF0aC5yZXBsYWNlKHRoaXMucm91dGVyLmhpc3Rvcnkucm9vdFJFLCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnJvdXRlci5nbyh7XG4gICAgICAgICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgICAgICAgIHJlcGxhY2U6IHRhcmdldCAmJiB0YXJnZXQucmVwbGFjZSxcbiAgICAgICAgICAgICAgYXBwZW5kOiB0YXJnZXQgJiYgdGFyZ2V0LmFwcGVuZFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICBvblJvdXRlVXBkYXRlOiBmdW5jdGlvbiBvblJvdXRlVXBkYXRlKHJvdXRlKSB7XG4gICAgICAgIC8vIHJvdXRlci5zdHJpbmdpZnlQYXRoIGlzIGRlcGVuZGVudCBvbiBjdXJyZW50IHJvdXRlXG4gICAgICAgIC8vIGFuZCBuZWVkcyB0byBiZSBjYWxsZWQgYWdhaW4gd2hlbnZlciByb3V0ZSBjaGFuZ2VzLlxuICAgICAgICB2YXIgbmV3UGF0aCA9IHRoaXMucm91dGVyLnN0cmluZ2lmeVBhdGgodGhpcy50YXJnZXQpO1xuICAgICAgICBpZiAodGhpcy5wYXRoICE9PSBuZXdQYXRoKSB7XG4gICAgICAgICAgdGhpcy5wYXRoID0gbmV3UGF0aDtcbiAgICAgICAgICB0aGlzLnVwZGF0ZUFjdGl2ZU1hdGNoKCk7XG4gICAgICAgICAgdGhpcy51cGRhdGVIcmVmKCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlSWRzKSB7XG4gICAgICAgICAgdGhpcy52bS4kZW1pdChMSU5LX1VQREFURSwgdGhpcywgcm91dGUucGF0aCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVDbGFzc2VzKHJvdXRlLnBhdGgsIHRoaXMuZWwpO1xuICAgICAgICB9XG4gICAgICB9LFxuXG4gICAgICB1cGRhdGVBY3RpdmVNYXRjaDogZnVuY3Rpb24gdXBkYXRlQWN0aXZlTWF0Y2goKSB7XG4gICAgICAgIHRoaXMuYWN0aXZlUkUgPSB0aGlzLnBhdGggJiYgIXRoaXMuZXhhY3QgPyBuZXcgUmVnRXhwKCdeJyArIHRoaXMucGF0aC5yZXBsYWNlKC9cXC8kLywgJycpLnJlcGxhY2UocXVlcnlTdHJpbmdSRSwgJycpLnJlcGxhY2UocmVnZXhFc2NhcGVSRSwgJ1xcXFwkJicpICsgJyhcXFxcL3wkKScpIDogbnVsbDtcbiAgICAgIH0sXG5cbiAgICAgIHVwZGF0ZUhyZWY6IGZ1bmN0aW9uIHVwZGF0ZUhyZWYoKSB7XG4gICAgICAgIGlmICh0aGlzLmVsLnRhZ05hbWUgIT09ICdBJykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgcGF0aCA9IHRoaXMucGF0aDtcbiAgICAgICAgdmFyIHJvdXRlciA9IHRoaXMucm91dGVyO1xuICAgICAgICB2YXIgaXNBYnNvbHV0ZSA9IHBhdGguY2hhckF0KDApID09PSAnLyc7XG4gICAgICAgIC8vIGRvIG5vdCBmb3JtYXQgbm9uLWhhc2ggcmVsYXRpdmUgcGF0aHNcbiAgICAgICAgdmFyIGhyZWYgPSBwYXRoICYmIChyb3V0ZXIubW9kZSA9PT0gJ2hhc2gnIHx8IGlzQWJzb2x1dGUpID8gcm91dGVyLmhpc3RvcnkuZm9ybWF0UGF0aChwYXRoLCB0aGlzLmFwcGVuZCkgOiBwYXRoO1xuICAgICAgICBpZiAoaHJlZikge1xuICAgICAgICAgIHRoaXMuZWwuaHJlZiA9IGhyZWY7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2hyZWYnKTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgdXBkYXRlQ2xhc3NlczogZnVuY3Rpb24gdXBkYXRlQ2xhc3NlcyhwYXRoLCBlbCkge1xuICAgICAgICB2YXIgYWN0aXZlQ2xhc3MgPSB0aGlzLmFjdGl2ZUNsYXNzIHx8IHRoaXMucm91dGVyLl9saW5rQWN0aXZlQ2xhc3M7XG4gICAgICAgIC8vIGNsZWFyIG9sZCBjbGFzc1xuICAgICAgICBpZiAodGhpcy5wcmV2QWN0aXZlQ2xhc3MgJiYgdGhpcy5wcmV2QWN0aXZlQ2xhc3MgIT09IGFjdGl2ZUNsYXNzKSB7XG4gICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgdGhpcy5wcmV2QWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcbiAgICAgICAgfVxuICAgICAgICAvLyByZW1vdmUgcXVlcnkgc3RyaW5nIGJlZm9yZSBtYXRjaGluZ1xuICAgICAgICB2YXIgZGVzdCA9IHRoaXMucGF0aC5yZXBsYWNlKHF1ZXJ5U3RyaW5nUkUsICcnKTtcbiAgICAgICAgcGF0aCA9IHBhdGgucmVwbGFjZShxdWVyeVN0cmluZ1JFLCAnJyk7XG4gICAgICAgIC8vIGFkZCBuZXcgY2xhc3NcbiAgICAgICAgaWYgKHRoaXMuZXhhY3QpIHtcbiAgICAgICAgICBpZiAoZGVzdCA9PT0gcGF0aCB8fFxuICAgICAgICAgIC8vIGFsc28gYWxsb3cgYWRkaXRpb25hbCB0cmFpbGluZyBzbGFzaFxuICAgICAgICAgIGRlc3QuY2hhckF0KGRlc3QubGVuZ3RoIC0gMSkgIT09ICcvJyAmJiBkZXN0ID09PSBwYXRoLnJlcGxhY2UodHJhaWxpbmdTbGFzaFJFLCAnJykpIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCBhZGRDbGFzcyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvZ2dsZUNsYXNzZXMoZWwsIGFjdGl2ZUNsYXNzLCByZW1vdmVDbGFzcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVJFICYmIHRoaXMuYWN0aXZlUkUudGVzdChwYXRoKSkge1xuICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIGFkZENsYXNzKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdG9nZ2xlQ2xhc3NlcyhlbCwgYWN0aXZlQ2xhc3MsIHJlbW92ZUNsYXNzKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG5cbiAgICAgIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5oYW5kbGVyKTtcbiAgICAgICAgdGhpcy51bndhdGNoICYmIHRoaXMudW53YXRjaCgpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gc2FtZU9yaWdpbihsaW5rKSB7XG4gICAgICByZXR1cm4gbGluay5wcm90b2NvbCA9PT0gbG9jYXRpb24ucHJvdG9jb2wgJiYgbGluay5ob3N0bmFtZSA9PT0gbG9jYXRpb24uaG9zdG5hbWUgJiYgbGluay5wb3J0ID09PSBsb2NhdGlvbi5wb3J0O1xuICAgIH1cblxuICAgIC8vIHRoaXMgZnVuY3Rpb24gaXMgY29waWVkIGZyb20gdi1iaW5kOmNsYXNzIGltcGxlbWVudGF0aW9uIHVudGlsXG4gICAgLy8gd2UgcHJvcGVybHkgZXhwb3NlIGl0Li4uXG4gICAgZnVuY3Rpb24gdG9nZ2xlQ2xhc3NlcyhlbCwga2V5LCBmbikge1xuICAgICAga2V5ID0ga2V5LnRyaW0oKTtcbiAgICAgIGlmIChrZXkuaW5kZXhPZignICcpID09PSAtMSkge1xuICAgICAgICBmbihlbCwga2V5KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgdmFyIGtleXMgPSBrZXkuc3BsaXQoL1xccysvKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgZm4oZWwsIGtleXNbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHZhciBoaXN0b3J5QmFja2VuZHMgPSB7XG4gICAgYWJzdHJhY3Q6IEFic3RyYWN0SGlzdG9yeSxcbiAgICBoYXNoOiBIYXNoSGlzdG9yeSxcbiAgICBodG1sNTogSFRNTDVIaXN0b3J5XG4gIH07XG5cbiAgLy8gbGF0ZSBiaW5kIGR1cmluZyBpbnN0YWxsXG4gIHZhciBWdWUgPSB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFJvdXRlciBjb25zdHJ1Y3RvclxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdXG4gICAqL1xuXG4gIHZhciBSb3V0ZXIgPSAoZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFJvdXRlcigpIHtcbiAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgIHZhciBfcmVmID0gYXJndW1lbnRzLmxlbmd0aCA8PSAwIHx8IGFyZ3VtZW50c1swXSA9PT0gdW5kZWZpbmVkID8ge30gOiBhcmd1bWVudHNbMF07XG5cbiAgICAgIHZhciBfcmVmJGhhc2hiYW5nID0gX3JlZi5oYXNoYmFuZztcbiAgICAgIHZhciBoYXNoYmFuZyA9IF9yZWYkaGFzaGJhbmcgPT09IHVuZGVmaW5lZCA/IHRydWUgOiBfcmVmJGhhc2hiYW5nO1xuICAgICAgdmFyIF9yZWYkYWJzdHJhY3QgPSBfcmVmLmFic3RyYWN0O1xuICAgICAgdmFyIGFic3RyYWN0ID0gX3JlZiRhYnN0cmFjdCA9PT0gdW5kZWZpbmVkID8gZmFsc2UgOiBfcmVmJGFic3RyYWN0O1xuICAgICAgdmFyIF9yZWYkaGlzdG9yeSA9IF9yZWYuaGlzdG9yeTtcbiAgICAgIHZhciBoaXN0b3J5ID0gX3JlZiRoaXN0b3J5ID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkaGlzdG9yeTtcbiAgICAgIHZhciBfcmVmJHNhdmVTY3JvbGxQb3NpdGlvbiA9IF9yZWYuc2F2ZVNjcm9sbFBvc2l0aW9uO1xuICAgICAgdmFyIHNhdmVTY3JvbGxQb3NpdGlvbiA9IF9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkc2F2ZVNjcm9sbFBvc2l0aW9uO1xuICAgICAgdmFyIF9yZWYkdHJhbnNpdGlvbk9uTG9hZCA9IF9yZWYudHJhbnNpdGlvbk9uTG9hZDtcbiAgICAgIHZhciB0cmFuc2l0aW9uT25Mb2FkID0gX3JlZiR0cmFuc2l0aW9uT25Mb2FkID09PSB1bmRlZmluZWQgPyBmYWxzZSA6IF9yZWYkdHJhbnNpdGlvbk9uTG9hZDtcbiAgICAgIHZhciBfcmVmJHN1cHByZXNzVHJhbnNpdGlvbkVycm9yID0gX3JlZi5zdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcbiAgICAgIHZhciBzdXBwcmVzc1RyYW5zaXRpb25FcnJvciA9IF9yZWYkc3VwcHJlc3NUcmFuc2l0aW9uRXJyb3IgPT09IHVuZGVmaW5lZCA/IGZhbHNlIDogX3JlZiRzdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcbiAgICAgIHZhciBfcmVmJHJvb3QgPSBfcmVmLnJvb3Q7XG4gICAgICB2YXIgcm9vdCA9IF9yZWYkcm9vdCA9PT0gdW5kZWZpbmVkID8gbnVsbCA6IF9yZWYkcm9vdDtcbiAgICAgIHZhciBfcmVmJGxpbmtBY3RpdmVDbGFzcyA9IF9yZWYubGlua0FjdGl2ZUNsYXNzO1xuICAgICAgdmFyIGxpbmtBY3RpdmVDbGFzcyA9IF9yZWYkbGlua0FjdGl2ZUNsYXNzID09PSB1bmRlZmluZWQgPyAndi1saW5rLWFjdGl2ZScgOiBfcmVmJGxpbmtBY3RpdmVDbGFzcztcbiAgICAgIGJhYmVsSGVscGVycy5jbGFzc0NhbGxDaGVjayh0aGlzLCBSb3V0ZXIpO1xuXG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghUm91dGVyLmluc3RhbGxlZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1BsZWFzZSBpbnN0YWxsIHRoZSBSb3V0ZXIgd2l0aCBWdWUudXNlKCkgYmVmb3JlICcgKyAnY3JlYXRpbmcgYW4gaW5zdGFuY2UuJyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZ1ZSBpbnN0YW5jZXNcbiAgICAgIHRoaXMuYXBwID0gbnVsbDtcbiAgICAgIHRoaXMuX2NoaWxkcmVuID0gW107XG5cbiAgICAgIC8vIHJvdXRlIHJlY29nbml6ZXJcbiAgICAgIHRoaXMuX3JlY29nbml6ZXIgPSBuZXcgUm91dGVSZWNvZ25pemVyKCk7XG4gICAgICB0aGlzLl9ndWFyZFJlY29nbml6ZXIgPSBuZXcgUm91dGVSZWNvZ25pemVyKCk7XG5cbiAgICAgIC8vIHN0YXRlXG4gICAgICB0aGlzLl9zdGFydGVkID0gZmFsc2U7XG4gICAgICB0aGlzLl9zdGFydENiID0gbnVsbDtcbiAgICAgIHRoaXMuX2N1cnJlbnRSb3V0ZSA9IHt9O1xuICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSBudWxsO1xuICAgICAgdGhpcy5fcHJldmlvdXNUcmFuc2l0aW9uID0gbnVsbDtcbiAgICAgIHRoaXMuX25vdEZvdW5kSGFuZGxlciA9IG51bGw7XG4gICAgICB0aGlzLl9ub3RGb3VuZFJlZGlyZWN0ID0gbnVsbDtcbiAgICAgIHRoaXMuX2JlZm9yZUVhY2hIb29rcyA9IFtdO1xuICAgICAgdGhpcy5fYWZ0ZXJFYWNoSG9va3MgPSBbXTtcblxuICAgICAgLy8gdHJpZ2dlciB0cmFuc2l0aW9uIG9uIGluaXRpYWwgcmVuZGVyP1xuICAgICAgdGhpcy5fcmVuZGVyZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX3RyYW5zaXRpb25PbkxvYWQgPSB0cmFuc2l0aW9uT25Mb2FkO1xuXG4gICAgICAvLyBoaXN0b3J5IG1vZGVcbiAgICAgIHRoaXMuX3Jvb3QgPSByb290O1xuICAgICAgdGhpcy5fYWJzdHJhY3QgPSBhYnN0cmFjdDtcbiAgICAgIHRoaXMuX2hhc2hiYW5nID0gaGFzaGJhbmc7XG5cbiAgICAgIC8vIGNoZWNrIGlmIEhUTUw1IGhpc3RvcnkgaXMgYXZhaWxhYmxlXG4gICAgICB2YXIgaGFzUHVzaFN0YXRlID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgd2luZG93Lmhpc3RvcnkgJiYgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlO1xuICAgICAgdGhpcy5faGlzdG9yeSA9IGhpc3RvcnkgJiYgaGFzUHVzaFN0YXRlO1xuICAgICAgdGhpcy5faGlzdG9yeUZhbGxiYWNrID0gaGlzdG9yeSAmJiAhaGFzUHVzaFN0YXRlO1xuXG4gICAgICAvLyBjcmVhdGUgaGlzdG9yeSBvYmplY3RcbiAgICAgIHZhciBpbkJyb3dzZXIgPSBWdWUudXRpbC5pbkJyb3dzZXI7XG4gICAgICB0aGlzLm1vZGUgPSAhaW5Ccm93c2VyIHx8IHRoaXMuX2Fic3RyYWN0ID8gJ2Fic3RyYWN0JyA6IHRoaXMuX2hpc3RvcnkgPyAnaHRtbDUnIDogJ2hhc2gnO1xuXG4gICAgICB2YXIgSGlzdG9yeSA9IGhpc3RvcnlCYWNrZW5kc1t0aGlzLm1vZGVdO1xuICAgICAgdGhpcy5oaXN0b3J5ID0gbmV3IEhpc3Rvcnkoe1xuICAgICAgICByb290OiByb290LFxuICAgICAgICBoYXNoYmFuZzogdGhpcy5faGFzaGJhbmcsXG4gICAgICAgIG9uQ2hhbmdlOiBmdW5jdGlvbiBvbkNoYW5nZShwYXRoLCBzdGF0ZSwgYW5jaG9yKSB7XG4gICAgICAgICAgX3RoaXMuX21hdGNoKHBhdGgsIHN0YXRlLCBhbmNob3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgLy8gb3RoZXIgb3B0aW9uc1xuICAgICAgdGhpcy5fc2F2ZVNjcm9sbFBvc2l0aW9uID0gc2F2ZVNjcm9sbFBvc2l0aW9uO1xuICAgICAgdGhpcy5fbGlua0FjdGl2ZUNsYXNzID0gbGlua0FjdGl2ZUNsYXNzO1xuICAgICAgdGhpcy5fc3VwcHJlc3MgPSBzdXBwcmVzc1RyYW5zaXRpb25FcnJvcjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbGxvdyBkaXJlY3RseSBwYXNzaW5nIGNvbXBvbmVudHMgdG8gYSByb3V0ZVxuICAgICAqIGRlZmluaXRpb24uXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBoYW5kbGVyXG4gICAgICovXG5cbiAgICAvLyBBUEkgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICAvKipcbiAgICAqIFJlZ2lzdGVyIGEgbWFwIG9mIHRvcC1sZXZlbCBwYXRocy5cbiAgICAqXG4gICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG4gICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gbWFwKF9tYXApIHtcbiAgICAgIGZvciAodmFyIHJvdXRlIGluIF9tYXApIHtcbiAgICAgICAgdGhpcy5vbihyb3V0ZSwgX21hcFtyb3V0ZV0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIGEgc2luZ2xlIHJvb3QtbGV2ZWwgcGF0aFxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHJvb3RQYXRoXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBjb21wb25lbnRcbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7T2JqZWN0fSBbc3ViUm91dGVzXVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBbZm9yY2VSZWZyZXNoXVxuICAgICAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW2JlZm9yZV1cbiAgICAgKiAgICAgICAgICAgICAgICAgLSB7RnVuY3Rpb259IFthZnRlcl1cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUub24gPSBmdW5jdGlvbiBvbihyb290UGF0aCwgaGFuZGxlcikge1xuICAgICAgaWYgKHJvb3RQYXRoID09PSAnKicpIHtcbiAgICAgICAgdGhpcy5fbm90Rm91bmQoaGFuZGxlcik7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9hZGRSb3V0ZShyb290UGF0aCwgaGFuZGxlciwgW10pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCByZWRpcmVjdHMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gbWFwXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnJlZGlyZWN0ID0gZnVuY3Rpb24gcmVkaXJlY3QobWFwKSB7XG4gICAgICBmb3IgKHZhciBwYXRoIGluIG1hcCkge1xuICAgICAgICB0aGlzLl9hZGRSZWRpcmVjdChwYXRoLCBtYXBbcGF0aF0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCBhbGlhc2VzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG1hcFxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5hbGlhcyA9IGZ1bmN0aW9uIGFsaWFzKG1hcCkge1xuICAgICAgZm9yICh2YXIgcGF0aCBpbiBtYXApIHtcbiAgICAgICAgdGhpcy5fYWRkQWxpYXMocGF0aCwgbWFwW3BhdGhdKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgZ2xvYmFsIGJlZm9yZSBob29rLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuYmVmb3JlRWFjaCA9IGZ1bmN0aW9uIGJlZm9yZUVhY2goZm4pIHtcbiAgICAgIHRoaXMuX2JlZm9yZUVhY2hIb29rcy5wdXNoKGZuKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBTZXQgZ2xvYmFsIGFmdGVyIGhvb2suXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5hZnRlckVhY2ggPSBmdW5jdGlvbiBhZnRlckVhY2goZm4pIHtcbiAgICAgIHRoaXMuX2FmdGVyRWFjaEhvb2tzLnB1c2goZm4pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE5hdmlnYXRlIHRvIGEgZ2l2ZW4gcGF0aC5cbiAgICAgKiBUaGUgcGF0aCBjYW4gYmUgYW4gb2JqZWN0IGRlc2NyaWJpbmcgYSBuYW1lZCBwYXRoIGluXG4gICAgICogdGhlIGZvcm1hdCBvZiB7IG5hbWU6ICcuLi4nLCBwYXJhbXM6IHt9LCBxdWVyeToge319XG4gICAgICogVGhlIHBhdGggaXMgYXNzdW1lZCB0byBiZSBhbHJlYWR5IGRlY29kZWQsIGFuZCB3aWxsXG4gICAgICogYmUgcmVzb2x2ZWQgYWdhaW5zdCByb290IChpZiBwcm92aWRlZClcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7U3RyaW5nfE9iamVjdH0gcGF0aFxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3JlcGxhY2VdXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLmdvID0gZnVuY3Rpb24gZ28ocGF0aCkge1xuICAgICAgdmFyIHJlcGxhY2UgPSBmYWxzZTtcbiAgICAgIHZhciBhcHBlbmQgPSBmYWxzZTtcbiAgICAgIGlmIChWdWUudXRpbC5pc09iamVjdChwYXRoKSkge1xuICAgICAgICByZXBsYWNlID0gcGF0aC5yZXBsYWNlO1xuICAgICAgICBhcHBlbmQgPSBwYXRoLmFwcGVuZDtcbiAgICAgIH1cbiAgICAgIHBhdGggPSB0aGlzLnN0cmluZ2lmeVBhdGgocGF0aCk7XG4gICAgICBpZiAocGF0aCkge1xuICAgICAgICB0aGlzLmhpc3RvcnkuZ28ocGF0aCwgcmVwbGFjZSwgYXBwZW5kKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2hvcnQgaGFuZCBmb3IgcmVwbGFjaW5nIGN1cnJlbnQgcGF0aFxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUucmVwbGFjZSA9IGZ1bmN0aW9uIHJlcGxhY2UocGF0aCkge1xuICAgICAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgICAgICBwYXRoID0geyBwYXRoOiBwYXRoIH07XG4gICAgICB9XG4gICAgICBwYXRoLnJlcGxhY2UgPSB0cnVlO1xuICAgICAgdGhpcy5nbyhwYXRoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3RhcnQgdGhlIHJvdXRlci5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VnVlQ29uc3RydWN0b3J9IEFwcFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfEVsZW1lbnR9IGNvbnRhaW5lclxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuc3RhcnQgPSBmdW5jdGlvbiBzdGFydChBcHAsIGNvbnRhaW5lciwgY2IpIHtcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHRoaXMuX3N0YXJ0ZWQpIHtcbiAgICAgICAgd2FybiQxKCdhbHJlYWR5IHN0YXJ0ZWQuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHRoaXMuX3N0YXJ0ZWQgPSB0cnVlO1xuICAgICAgdGhpcy5fc3RhcnRDYiA9IGNiO1xuICAgICAgaWYgKCF0aGlzLmFwcCkge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKCFBcHAgfHwgIWNvbnRhaW5lcikge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBzdGFydCB2dWUtcm91dGVyIHdpdGggYSBjb21wb25lbnQgYW5kIGEgJyArICdyb290IGNvbnRhaW5lci4nKTtcbiAgICAgICAgfVxuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKEFwcCBpbnN0YW5jZW9mIFZ1ZSkge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTXVzdCBzdGFydCB2dWUtcm91dGVyIHdpdGggYSBjb21wb25lbnQsIG5vdCBhICcgKyAnVnVlIGluc3RhbmNlLicpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2FwcENvbnRhaW5lciA9IGNvbnRhaW5lcjtcbiAgICAgICAgdmFyIEN0b3IgPSB0aGlzLl9hcHBDb25zdHJ1Y3RvciA9IHR5cGVvZiBBcHAgPT09ICdmdW5jdGlvbicgPyBBcHAgOiBWdWUuZXh0ZW5kKEFwcCk7XG4gICAgICAgIC8vIGdpdmUgaXQgYSBuYW1lIGZvciBiZXR0ZXIgZGVidWdnaW5nXG4gICAgICAgIEN0b3Iub3B0aW9ucy5uYW1lID0gQ3Rvci5vcHRpb25zLm5hbWUgfHwgJ1JvdXRlckFwcCc7XG4gICAgICB9XG5cbiAgICAgIC8vIGhhbmRsZSBoaXN0b3J5IGZhbGxiYWNrIGluIGJyb3dzZXJzIHRoYXQgZG8gbm90XG4gICAgICAvLyBzdXBwb3J0IEhUTUw1IGhpc3RvcnkgQVBJXG4gICAgICBpZiAodGhpcy5faGlzdG9yeUZhbGxiYWNrKSB7XG4gICAgICAgIHZhciBfbG9jYXRpb24gPSB3aW5kb3cubG9jYXRpb247XG4gICAgICAgIHZhciBfaGlzdG9yeSA9IG5ldyBIVE1MNUhpc3RvcnkoeyByb290OiB0aGlzLl9yb290IH0pO1xuICAgICAgICB2YXIgcGF0aCA9IF9oaXN0b3J5LnJvb3QgPyBfbG9jYXRpb24ucGF0aG5hbWUucmVwbGFjZShfaGlzdG9yeS5yb290UkUsICcnKSA6IF9sb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgICAgaWYgKHBhdGggJiYgcGF0aCAhPT0gJy8nKSB7XG4gICAgICAgICAgX2xvY2F0aW9uLmFzc2lnbigoX2hpc3Rvcnkucm9vdCB8fCAnJykgKyAnLycgKyB0aGlzLmhpc3RvcnkuZm9ybWF0UGF0aChwYXRoKSArIF9sb2NhdGlvbi5zZWFyY2gpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmhpc3Rvcnkuc3RhcnQoKTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU3RvcCBsaXN0ZW5pbmcgdG8gcm91dGUgY2hhbmdlcy5cbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uIHN0b3AoKSB7XG4gICAgICB0aGlzLmhpc3Rvcnkuc3RvcCgpO1xuICAgICAgdGhpcy5fc3RhcnRlZCA9IGZhbHNlO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBOb3JtYWxpemUgbmFtZWQgcm91dGUgb2JqZWN0IC8gc3RyaW5nIHBhdGhzIGludG9cbiAgICAgKiBhIHN0cmluZy5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fFN0cmluZ3xOdW1iZXJ9IHBhdGhcbiAgICAgKiBAcmV0dXJuIHtTdHJpbmd9XG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLnN0cmluZ2lmeVBhdGggPSBmdW5jdGlvbiBzdHJpbmdpZnlQYXRoKHBhdGgpIHtcbiAgICAgIHZhciBnZW5lcmF0ZWRQYXRoID0gJyc7XG4gICAgICBpZiAocGF0aCAmJiB0eXBlb2YgcGF0aCA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgaWYgKHBhdGgubmFtZSkge1xuICAgICAgICAgIHZhciBleHRlbmQgPSBWdWUudXRpbC5leHRlbmQ7XG4gICAgICAgICAgdmFyIGN1cnJlbnRQYXJhbXMgPSB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbiAmJiB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbi50by5wYXJhbXM7XG4gICAgICAgICAgdmFyIHRhcmdldFBhcmFtcyA9IHBhdGgucGFyYW1zIHx8IHt9O1xuICAgICAgICAgIHZhciBwYXJhbXMgPSBjdXJyZW50UGFyYW1zID8gZXh0ZW5kKGV4dGVuZCh7fSwgY3VycmVudFBhcmFtcyksIHRhcmdldFBhcmFtcykgOiB0YXJnZXRQYXJhbXM7XG4gICAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSSh0aGlzLl9yZWNvZ25pemVyLmdlbmVyYXRlKHBhdGgubmFtZSwgcGFyYW1zKSk7XG4gICAgICAgIH0gZWxzZSBpZiAocGF0aC5wYXRoKSB7XG4gICAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSShwYXRoLnBhdGgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChwYXRoLnF1ZXJ5KSB7XG4gICAgICAgICAgLy8gbm90ZTogdGhlIGdlbmVyYXRlZCBxdWVyeSBzdHJpbmcgaXMgcHJlLVVSTC1lbmNvZGVkIGJ5IHRoZSByZWNvZ25pemVyXG4gICAgICAgICAgdmFyIHF1ZXJ5ID0gdGhpcy5fcmVjb2duaXplci5nZW5lcmF0ZVF1ZXJ5U3RyaW5nKHBhdGgucXVlcnkpO1xuICAgICAgICAgIGlmIChnZW5lcmF0ZWRQYXRoLmluZGV4T2YoJz8nKSA+IC0xKSB7XG4gICAgICAgICAgICBnZW5lcmF0ZWRQYXRoICs9ICcmJyArIHF1ZXJ5LnNsaWNlKDEpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBnZW5lcmF0ZWRQYXRoICs9IHF1ZXJ5O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZ2VuZXJhdGVkUGF0aCA9IGVuY29kZVVSSShwYXRoID8gcGF0aCArICcnIDogJycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGdlbmVyYXRlZFBhdGg7XG4gICAgfTtcblxuICAgIC8vIEludGVybmFsIG1ldGhvZHMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIC8qKlxuICAgICogQWRkIGEgcm91dGUgY29udGFpbmluZyBhIGxpc3Qgb2Ygc2VnbWVudHMgdG8gdGhlIGludGVybmFsXG4gICAgKiByb3V0ZSByZWNvZ25pemVyLiBXaWxsIGJlIGNhbGxlZCByZWN1cnNpdmVseSB0byBhZGQgYWxsXG4gICAgKiBwb3NzaWJsZSBzdWItcm91dGVzLlxuICAgICpcbiAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gICAgKiBAcGFyYW0ge09iamVjdH0gaGFuZGxlclxuICAgICogQHBhcmFtIHtBcnJheX0gc2VnbWVudHNcbiAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fYWRkUm91dGUgPSBmdW5jdGlvbiBfYWRkUm91dGUocGF0aCwgaGFuZGxlciwgc2VnbWVudHMpIHtcbiAgICAgIGd1YXJkQ29tcG9uZW50KHBhdGgsIGhhbmRsZXIpO1xuICAgICAgaGFuZGxlci5wYXRoID0gcGF0aDtcbiAgICAgIGhhbmRsZXIuZnVsbFBhdGggPSAoc2VnbWVudHMucmVkdWNlKGZ1bmN0aW9uIChwYXRoLCBzZWdtZW50KSB7XG4gICAgICAgIHJldHVybiBwYXRoICsgc2VnbWVudC5wYXRoO1xuICAgICAgfSwgJycpICsgcGF0aCkucmVwbGFjZSgnLy8nLCAnLycpO1xuICAgICAgc2VnbWVudHMucHVzaCh7XG4gICAgICAgIHBhdGg6IHBhdGgsXG4gICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcbiAgICAgIH0pO1xuICAgICAgdGhpcy5fcmVjb2duaXplci5hZGQoc2VnbWVudHMsIHtcbiAgICAgICAgYXM6IGhhbmRsZXIubmFtZVxuICAgICAgfSk7XG4gICAgICAvLyBhZGQgc3ViIHJvdXRlc1xuICAgICAgaWYgKGhhbmRsZXIuc3ViUm91dGVzKSB7XG4gICAgICAgIGZvciAodmFyIHN1YlBhdGggaW4gaGFuZGxlci5zdWJSb3V0ZXMpIHtcbiAgICAgICAgICAvLyByZWN1cnNpdmVseSB3YWxrIGFsbCBzdWIgcm91dGVzXG4gICAgICAgICAgdGhpcy5fYWRkUm91dGUoc3ViUGF0aCwgaGFuZGxlci5zdWJSb3V0ZXNbc3ViUGF0aF0sXG4gICAgICAgICAgLy8gcGFzcyBhIGNvcHkgaW4gcmVjdXJzaW9uIHRvIGF2b2lkIG11dGF0aW5nXG4gICAgICAgICAgLy8gYWNyb3NzIGJyYW5jaGVzXG4gICAgICAgICAgc2VnbWVudHMuc2xpY2UoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogU2V0IHRoZSBub3RGb3VuZCByb3V0ZSBoYW5kbGVyLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IGhhbmRsZXJcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX25vdEZvdW5kID0gZnVuY3Rpb24gX25vdEZvdW5kKGhhbmRsZXIpIHtcbiAgICAgIGd1YXJkQ29tcG9uZW50KCcqJywgaGFuZGxlcik7XG4gICAgICB0aGlzLl9ub3RGb3VuZEhhbmRsZXIgPSBbeyBoYW5kbGVyOiBoYW5kbGVyIH1dO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSByZWRpcmVjdCByZWNvcmQuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSByZWRpcmVjdFBhdGhcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZFJlZGlyZWN0ID0gZnVuY3Rpb24gX2FkZFJlZGlyZWN0KHBhdGgsIHJlZGlyZWN0UGF0aCkge1xuICAgICAgaWYgKHBhdGggPT09ICcqJykge1xuICAgICAgICB0aGlzLl9ub3RGb3VuZFJlZGlyZWN0ID0gcmVkaXJlY3RQYXRoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fYWRkR3VhcmQocGF0aCwgcmVkaXJlY3RQYXRoLCB0aGlzLnJlcGxhY2UpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYW4gYWxpYXMgcmVjb3JkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNQYXRoXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9hZGRBbGlhcyA9IGZ1bmN0aW9uIF9hZGRBbGlhcyhwYXRoLCBhbGlhc1BhdGgpIHtcbiAgICAgIHRoaXMuX2FkZEd1YXJkKHBhdGgsIGFsaWFzUGF0aCwgdGhpcy5fbWF0Y2gpO1xuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYSBwYXRoIGd1YXJkLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gbWFwcGVkUGF0aFxuICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXJcbiAgICAgKi9cblxuICAgIFJvdXRlci5wcm90b3R5cGUuX2FkZEd1YXJkID0gZnVuY3Rpb24gX2FkZEd1YXJkKHBhdGgsIG1hcHBlZFBhdGgsIF9oYW5kbGVyKSB7XG4gICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgdGhpcy5fZ3VhcmRSZWNvZ25pemVyLmFkZChbe1xuICAgICAgICBwYXRoOiBwYXRoLFxuICAgICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG1hdGNoLCBxdWVyeSkge1xuICAgICAgICAgIHZhciByZWFsUGF0aCA9IG1hcFBhcmFtcyhtYXBwZWRQYXRoLCBtYXRjaC5wYXJhbXMsIHF1ZXJ5KTtcbiAgICAgICAgICBfaGFuZGxlci5jYWxsKF90aGlzMiwgcmVhbFBhdGgpO1xuICAgICAgICB9XG4gICAgICB9XSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIENoZWNrIGlmIGEgcGF0aCBtYXRjaGVzIGFueSByZWRpcmVjdCByZWNvcmRzLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAgICAgKiBAcmV0dXJuIHtCb29sZWFufSAtIGlmIHRydWUsIHdpbGwgc2tpcCBub3JtYWwgbWF0Y2guXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9jaGVja0d1YXJkID0gZnVuY3Rpb24gX2NoZWNrR3VhcmQocGF0aCkge1xuICAgICAgdmFyIG1hdGNoZWQgPSB0aGlzLl9ndWFyZFJlY29nbml6ZXIucmVjb2duaXplKHBhdGgsIHRydWUpO1xuICAgICAgaWYgKG1hdGNoZWQpIHtcbiAgICAgICAgbWF0Y2hlZFswXS5oYW5kbGVyKG1hdGNoZWRbMF0sIG1hdGNoZWQucXVlcnlQYXJhbXMpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH0gZWxzZSBpZiAodGhpcy5fbm90Rm91bmRSZWRpcmVjdCkge1xuICAgICAgICBtYXRjaGVkID0gdGhpcy5fcmVjb2duaXplci5yZWNvZ25pemUocGF0aCk7XG4gICAgICAgIGlmICghbWF0Y2hlZCkge1xuICAgICAgICAgIHRoaXMucmVwbGFjZSh0aGlzLl9ub3RGb3VuZFJlZGlyZWN0KTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBNYXRjaCBhIFVSTCBwYXRoIGFuZCBzZXQgdGhlIHJvdXRlIGNvbnRleHQgb24gdm0sXG4gICAgICogdHJpZ2dlcmluZyB2aWV3IHVwZGF0ZXMuXG4gICAgICpcbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBbc3RhdGVdXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IFthbmNob3JdXG4gICAgICovXG5cbiAgICBSb3V0ZXIucHJvdG90eXBlLl9tYXRjaCA9IGZ1bmN0aW9uIF9tYXRjaChwYXRoLCBzdGF0ZSwgYW5jaG9yKSB7XG4gICAgICB2YXIgX3RoaXMzID0gdGhpcztcblxuICAgICAgaWYgKHRoaXMuX2NoZWNrR3VhcmQocGF0aCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICB2YXIgY3VycmVudFJvdXRlID0gdGhpcy5fY3VycmVudFJvdXRlO1xuICAgICAgdmFyIGN1cnJlbnRUcmFuc2l0aW9uID0gdGhpcy5fY3VycmVudFRyYW5zaXRpb247XG5cbiAgICAgIGlmIChjdXJyZW50VHJhbnNpdGlvbikge1xuICAgICAgICBpZiAoY3VycmVudFRyYW5zaXRpb24udG8ucGF0aCA9PT0gcGF0aCkge1xuICAgICAgICAgIC8vIGRvIG5vdGhpbmcgaWYgd2UgaGF2ZSBhbiBhY3RpdmUgdHJhbnNpdGlvbiBnb2luZyB0byB0aGUgc2FtZSBwYXRoXG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRSb3V0ZS5wYXRoID09PSBwYXRoKSB7XG4gICAgICAgICAgLy8gV2UgYXJlIGdvaW5nIHRvIHRoZSBzYW1lIHBhdGgsIGJ1dCB3ZSBhbHNvIGhhdmUgYW4gb25nb2luZyBidXRcbiAgICAgICAgICAvLyBub3QteWV0LXZhbGlkYXRlZCB0cmFuc2l0aW9uLiBBYm9ydCB0aGF0IHRyYW5zaXRpb24gYW5kIHJlc2V0IHRvXG4gICAgICAgICAgLy8gcHJldiB0cmFuc2l0aW9uLlxuICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuX2N1cnJlbnRUcmFuc2l0aW9uID0gdGhpcy5fcHJldlRyYW5zaXRpb247XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIGdvaW5nIHRvIGEgdG90YWxseSBkaWZmZXJlbnQgcGF0aC4gYWJvcnQgb25nb2luZyB0cmFuc2l0aW9uLlxuICAgICAgICAgIGN1cnJlbnRUcmFuc2l0aW9uLmFib3J0ZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIGNvbnN0cnVjdCBuZXcgcm91dGUgYW5kIHRyYW5zaXRpb24gY29udGV4dFxuICAgICAgdmFyIHJvdXRlID0gbmV3IFJvdXRlKHBhdGgsIHRoaXMpO1xuICAgICAgdmFyIHRyYW5zaXRpb24gPSBuZXcgUm91dGVUcmFuc2l0aW9uKHRoaXMsIHJvdXRlLCBjdXJyZW50Um91dGUpO1xuXG4gICAgICAvLyBjdXJyZW50IHRyYW5zaXRpb24gaXMgdXBkYXRlZCByaWdodCBub3cuXG4gICAgICAvLyBob3dldmVyLCBjdXJyZW50IHJvdXRlIHdpbGwgb25seSBiZSB1cGRhdGVkIGFmdGVyIHRoZSB0cmFuc2l0aW9uIGhhc1xuICAgICAgLy8gYmVlbiB2YWxpZGF0ZWQuXG4gICAgICB0aGlzLl9wcmV2VHJhbnNpdGlvbiA9IGN1cnJlbnRUcmFuc2l0aW9uO1xuICAgICAgdGhpcy5fY3VycmVudFRyYW5zaXRpb24gPSB0cmFuc2l0aW9uO1xuXG4gICAgICBpZiAoIXRoaXMuYXBwKSB7XG4gICAgICAgIChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgLy8gaW5pdGlhbCByZW5kZXJcbiAgICAgICAgICB2YXIgcm91dGVyID0gX3RoaXMzO1xuICAgICAgICAgIF90aGlzMy5hcHAgPSBuZXcgX3RoaXMzLl9hcHBDb25zdHJ1Y3Rvcih7XG4gICAgICAgICAgICBlbDogX3RoaXMzLl9hcHBDb250YWluZXIsXG4gICAgICAgICAgICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge1xuICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIgPSByb3V0ZXI7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgX21ldGE6IHtcbiAgICAgICAgICAgICAgJHJvdXRlOiByb3V0ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuICAgICAgfVxuXG4gICAgICAvLyBjaGVjayBnbG9iYWwgYmVmb3JlIGhvb2tcbiAgICAgIHZhciBiZWZvcmVIb29rcyA9IHRoaXMuX2JlZm9yZUVhY2hIb29rcztcbiAgICAgIHZhciBzdGFydFRyYW5zaXRpb24gPSBmdW5jdGlvbiBzdGFydFRyYW5zaXRpb24oKSB7XG4gICAgICAgIHRyYW5zaXRpb24uc3RhcnQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMy5fcG9zdFRyYW5zaXRpb24ocm91dGUsIHN0YXRlLCBhbmNob3IpO1xuICAgICAgICB9KTtcbiAgICAgIH07XG5cbiAgICAgIGlmIChiZWZvcmVIb29rcy5sZW5ndGgpIHtcbiAgICAgICAgdHJhbnNpdGlvbi5ydW5RdWV1ZShiZWZvcmVIb29rcywgZnVuY3Rpb24gKGhvb2ssIF8sIG5leHQpIHtcbiAgICAgICAgICBpZiAodHJhbnNpdGlvbiA9PT0gX3RoaXMzLl9jdXJyZW50VHJhbnNpdGlvbikge1xuICAgICAgICAgICAgdHJhbnNpdGlvbi5jYWxsSG9vayhob29rLCBudWxsLCBuZXh0LCB7XG4gICAgICAgICAgICAgIGV4cGVjdEJvb2xlYW46IHRydWVcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgc3RhcnRUcmFuc2l0aW9uKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXJ0VHJhbnNpdGlvbigpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuX3JlbmRlcmVkICYmIHRoaXMuX3N0YXJ0Q2IpIHtcbiAgICAgICAgdGhpcy5fc3RhcnRDYi5jYWxsKG51bGwpO1xuICAgICAgfVxuXG4gICAgICAvLyBIQUNLOlxuICAgICAgLy8gc2V0IHJlbmRlcmVkIHRvIHRydWUgYWZ0ZXIgdGhlIHRyYW5zaXRpb24gc3RhcnQsIHNvXG4gICAgICAvLyB0aGF0IGNvbXBvbmVudHMgdGhhdCBhcmUgYWNpdHZhdGVkIHN5bmNocm9ub3VzbHkga25vd1xuICAgICAgLy8gd2hldGhlciBpdCBpcyB0aGUgaW5pdGlhbCByZW5kZXIuXG4gICAgICB0aGlzLl9yZW5kZXJlZCA9IHRydWU7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFNldCBjdXJyZW50IHRvIHRoZSBuZXcgdHJhbnNpdGlvbi5cbiAgICAgKiBUaGlzIGlzIGNhbGxlZCBieSB0aGUgdHJhbnNpdGlvbiBvYmplY3Qgd2hlbiB0aGVcbiAgICAgKiB2YWxpZGF0aW9uIG9mIGEgcm91dGUgaGFzIHN1Y2NlZWRlZC5cbiAgICAgKlxuICAgICAqIEBwYXJhbSB7VHJhbnNpdGlvbn0gdHJhbnNpdGlvblxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fb25UcmFuc2l0aW9uVmFsaWRhdGVkID0gZnVuY3Rpb24gX29uVHJhbnNpdGlvblZhbGlkYXRlZCh0cmFuc2l0aW9uKSB7XG4gICAgICAvLyBzZXQgY3VycmVudCByb3V0ZVxuICAgICAgdmFyIHJvdXRlID0gdGhpcy5fY3VycmVudFJvdXRlID0gdHJhbnNpdGlvbi50bztcbiAgICAgIC8vIHVwZGF0ZSByb3V0ZSBjb250ZXh0IGZvciBhbGwgY2hpbGRyZW5cbiAgICAgIGlmICh0aGlzLmFwcC4kcm91dGUgIT09IHJvdXRlKSB7XG4gICAgICAgIHRoaXMuYXBwLiRyb3V0ZSA9IHJvdXRlO1xuICAgICAgICB0aGlzLl9jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChjaGlsZCkge1xuICAgICAgICAgIGNoaWxkLiRyb3V0ZSA9IHJvdXRlO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIC8vIGNhbGwgZ2xvYmFsIGFmdGVyIGhvb2tcbiAgICAgIGlmICh0aGlzLl9hZnRlckVhY2hIb29rcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5fYWZ0ZXJFYWNoSG9va3MuZm9yRWFjaChmdW5jdGlvbiAoaG9vaykge1xuICAgICAgICAgIHJldHVybiBob29rLmNhbGwobnVsbCwge1xuICAgICAgICAgICAgdG86IHRyYW5zaXRpb24udG8sXG4gICAgICAgICAgICBmcm9tOiB0cmFuc2l0aW9uLmZyb21cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9jdXJyZW50VHJhbnNpdGlvbi5kb25lID0gdHJ1ZTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIHN0dWZmIGFmdGVyIHRoZSB0cmFuc2l0aW9uLlxuICAgICAqXG4gICAgICogQHBhcmFtIHtSb3V0ZX0gcm91dGVcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gW3N0YXRlXVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBbYW5jaG9yXVxuICAgICAqL1xuXG4gICAgUm91dGVyLnByb3RvdHlwZS5fcG9zdFRyYW5zaXRpb24gPSBmdW5jdGlvbiBfcG9zdFRyYW5zaXRpb24ocm91dGUsIHN0YXRlLCBhbmNob3IpIHtcbiAgICAgIC8vIGhhbmRsZSBzY3JvbGwgcG9zaXRpb25zXG4gICAgICAvLyBzYXZlZCBzY3JvbGwgcG9zaXRpb25zIHRha2UgcHJpb3JpdHlcbiAgICAgIC8vIHRoZW4gd2UgY2hlY2sgaWYgdGhlIHBhdGggaGFzIGFuIGFuY2hvclxuICAgICAgdmFyIHBvcyA9IHN0YXRlICYmIHN0YXRlLnBvcztcbiAgICAgIGlmIChwb3MgJiYgdGhpcy5fc2F2ZVNjcm9sbFBvc2l0aW9uKSB7XG4gICAgICAgIFZ1ZS5uZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgd2luZG93LnNjcm9sbFRvKHBvcy54LCBwb3MueSk7XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmIChhbmNob3IpIHtcbiAgICAgICAgVnVlLm5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChhbmNob3Iuc2xpY2UoMSkpO1xuICAgICAgICAgIGlmIChlbCkge1xuICAgICAgICAgICAgd2luZG93LnNjcm9sbFRvKHdpbmRvdy5zY3JvbGxYLCBlbC5vZmZzZXRUb3ApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHJldHVybiBSb3V0ZXI7XG4gIH0pKCk7XG5cbiAgZnVuY3Rpb24gZ3VhcmRDb21wb25lbnQocGF0aCwgaGFuZGxlcikge1xuICAgIHZhciBjb21wID0gaGFuZGxlci5jb21wb25lbnQ7XG4gICAgaWYgKFZ1ZS51dGlsLmlzUGxhaW5PYmplY3QoY29tcCkpIHtcbiAgICAgIGNvbXAgPSBoYW5kbGVyLmNvbXBvbmVudCA9IFZ1ZS5leHRlbmQoY29tcCk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICh0eXBlb2YgY29tcCAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgaGFuZGxlci5jb21wb25lbnQgPSBudWxsO1xuICAgICAgd2FybiQxKCdpbnZhbGlkIGNvbXBvbmVudCBmb3Igcm91dGUgXCInICsgcGF0aCArICdcIi4nKTtcbiAgICB9XG4gIH1cblxuICAvKiBJbnN0YWxsYXRpb24gKi9cblxuICBSb3V0ZXIuaW5zdGFsbGVkID0gZmFsc2U7XG5cbiAgLyoqXG4gICAqIEluc3RhbGxhdGlvbiBpbnRlcmZhY2UuXG4gICAqIEluc3RhbGwgdGhlIG5lY2Vzc2FyeSBkaXJlY3RpdmVzLlxuICAgKi9cblxuICBSb3V0ZXIuaW5zdGFsbCA9IGZ1bmN0aW9uIChleHRlcm5hbFZ1ZSkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChSb3V0ZXIuaW5zdGFsbGVkKSB7XG4gICAgICB3YXJuJDEoJ2FscmVhZHkgaW5zdGFsbGVkLicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBWdWUgPSBleHRlcm5hbFZ1ZTtcbiAgICBhcHBseU92ZXJyaWRlKFZ1ZSk7XG4gICAgVmlldyhWdWUpO1xuICAgIExpbmsoVnVlKTtcbiAgICBleHBvcnRzJDEuVnVlID0gVnVlO1xuICAgIFJvdXRlci5pbnN0YWxsZWQgPSB0cnVlO1xuICB9O1xuXG4gIC8vIGF1dG8gaW5zdGFsbFxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5WdWUpIHtcbiAgICB3aW5kb3cuVnVlLnVzZShSb3V0ZXIpO1xuICB9XG5cbiAgcmV0dXJuIFJvdXRlcjtcblxufSkpO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1yb3V0ZXIvZGlzdC92dWUtcm91dGVyLmpzXG4gKiogbW9kdWxlIGlkID0gMjAzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9hcGktdGFibGUvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjA0XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5pZih0eXBlb2YgY29udGVudCA9PT0gJ3N0cmluZycpIGNvbnRlbnQgPSBbW21vZHVsZS5pZCwgY29udGVudCwgJyddXTtcbi8vIGFkZCB0aGUgc3R5bGVzIHRvIHRoZSBET01cbnZhciB1cGRhdGUgPSByZXF1aXJlKFwiIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1zdHlsZS1sb2FkZXIvYWRkU3R5bGVzLmpzXCIpKGNvbnRlbnQsIHt9KTtcbmlmKGNvbnRlbnQubG9jYWxzKSBtb2R1bGUuZXhwb3J0cyA9IGNvbnRlbnQubG9jYWxzO1xuLy8gSG90IE1vZHVsZSBSZXBsYWNlbWVudFxuaWYobW9kdWxlLmhvdCkge1xuXHQvLyBXaGVuIHRoZSBzdHlsZXMgY2hhbmdlLCB1cGRhdGUgdGhlIDxzdHlsZT4gdGFnc1xuXHRpZighY29udGVudC5sb2NhbHMpIHtcblx0XHRtb2R1bGUuaG90LmFjY2VwdChcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2Rldi9zcmMvY29tcG9uZW50cy9zaWRlLW5hdi9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMDVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vZGV2L3NyYy9jb21wb25lbnRzL3NpdGUtaGVhZGVyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIwNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9kZXYvc3JjL3ZpZXdzL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIwN1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9hbGVydC9pbmRleC52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMDhcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9pbmRleC52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvY29sbGFwc2FibGUtcGFuZWwvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjA5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY29udGFpbmVyLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9sZWdhbC1jb250YWluZXIudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL2xlZ2FsL2xlZ2FsLWNvbnRhaW5lci52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2xlZ2FsLWNvdW50ZXIudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vbGVnYWwtY291bnRlci52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvbGVnYWwvbGVnYWwtY291bnRlci52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXktY29udGFpbmVyLnZ1ZVwiLCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBuZXdDb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9vdmVybGF5LWNvbnRhaW5lci52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LWNvbnRhaW5lci52dWVcbiAqKiBtb2R1bGUgaWQgPSAyMTJcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIHN0eWxlLWxvYWRlcjogQWRkcyBzb21lIGNzcyB0byB0aGUgRE9NIGJ5IGFkZGluZyBhIDxzdHlsZT4gdGFnXG5cbi8vIGxvYWQgdGhlIHN0eWxlc1xudmFyIGNvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL292ZXJsYXkudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS52dWVcIiwgZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgbmV3Q29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vb3ZlcmxheS52dWVcIik7XG5cdFx0XHRpZih0eXBlb2YgbmV3Q29udGVudCA9PT0gJ3N0cmluZycpIG5ld0NvbnRlbnQgPSBbW21vZHVsZS5pZCwgbmV3Q29udGVudCwgJyddXTtcblx0XHRcdHVwZGF0ZShuZXdDb250ZW50KTtcblx0XHR9KTtcblx0fVxuXHQvLyBXaGVuIHRoZSBtb2R1bGUgaXMgZGlzcG9zZWQsIHJlbW92ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdG1vZHVsZS5ob3QuZGlzcG9zZShmdW5jdGlvbigpIHsgdXBkYXRlKCk7IH0pO1xufVxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS1zdHlsZS1sb2FkZXIhLi9+L2Nzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vfi9zYXNzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vc3JjL2NvbXBvbmVudHMvb3ZlcmxheS9vdmVybGF5LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIxM1xuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9zcGlubmVyL2luZGV4LnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIxNFxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gc3R5bGUtbG9hZGVyOiBBZGRzIHNvbWUgY3NzIHRvIHRoZSBET00gYnkgYWRkaW5nIGEgPHN0eWxlPiB0YWdcblxuLy8gbG9hZCB0aGUgc3R5bGVzXG52YXIgY29udGVudCA9IHJlcXVpcmUoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIpO1xuaWYodHlwZW9mIGNvbnRlbnQgPT09ICdzdHJpbmcnKSBjb250ZW50ID0gW1ttb2R1bGUuaWQsIGNvbnRlbnQsICcnXV07XG4vLyBhZGQgdGhlIHN0eWxlcyB0byB0aGUgRE9NXG52YXIgdXBkYXRlID0gcmVxdWlyZShcIiEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtc3R5bGUtbG9hZGVyL2FkZFN0eWxlcy5qc1wiKShjb250ZW50LCB7fSk7XG5pZihjb250ZW50LmxvY2FscykgbW9kdWxlLmV4cG9ydHMgPSBjb250ZW50LmxvY2Fscztcbi8vIEhvdCBNb2R1bGUgUmVwbGFjZW1lbnRcbmlmKG1vZHVsZS5ob3QpIHtcblx0Ly8gV2hlbiB0aGUgc3R5bGVzIGNoYW5nZSwgdXBkYXRlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0aWYoIWNvbnRlbnQubG9jYWxzKSB7XG5cdFx0bW9kdWxlLmhvdC5hY2NlcHQoXCIhIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL2Nzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvc2Fzcy1sb2FkZXIvaW5kZXguanMhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLWxvYWRlci9saWIvc2VsZWN0b3IuanM/dHlwZT1zdHlsZSZpbmRleD0wIS4vaW5kZXgudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL2luZGV4LnZ1ZVwiKTtcblx0XHRcdGlmKHR5cGVvZiBuZXdDb250ZW50ID09PSAnc3RyaW5nJykgbmV3Q29udGVudCA9IFtbbW9kdWxlLmlkLCBuZXdDb250ZW50LCAnJ11dO1xuXHRcdFx0dXBkYXRlKG5ld0NvbnRlbnQpO1xuXHRcdH0pO1xuXHR9XG5cdC8vIFdoZW4gdGhlIG1vZHVsZSBpcyBkaXNwb3NlZCwgcmVtb3ZlIHRoZSA8c3R5bGU+IHRhZ3Ncblx0bW9kdWxlLmhvdC5kaXNwb3NlKGZ1bmN0aW9uKCkgeyB1cGRhdGUoKTsgfSk7XG59XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vdnVlLXN0eWxlLWxvYWRlciEuL34vY3NzLWxvYWRlciEuL34vdnVlLWxvYWRlci9saWIvc3R5bGUtcmV3cml0ZXIuanMhLi9+L3Nhc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi9zcmMvY29tcG9uZW50cy9zdGVwLXRyYWNrZXIvaW5kZXgudnVlXG4gKiogbW9kdWxlIGlkID0gMjE1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyBzdHlsZS1sb2FkZXI6IEFkZHMgc29tZSBjc3MgdG8gdGhlIERPTSBieSBhZGRpbmcgYSA8c3R5bGU+IHRhZ1xuXG4vLyBsb2FkIHRoZSBzdHlsZXNcbnZhciBjb250ZW50ID0gcmVxdWlyZShcIiEhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvY3NzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9zYXNzLWxvYWRlci9pbmRleC5qcyEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy92dWUtbG9hZGVyL2xpYi9zZWxlY3Rvci5qcz90eXBlPXN0eWxlJmluZGV4PTAhLi90YWJzLnZ1ZVwiKTtcbmlmKHR5cGVvZiBjb250ZW50ID09PSAnc3RyaW5nJykgY29udGVudCA9IFtbbW9kdWxlLmlkLCBjb250ZW50LCAnJ11dO1xuLy8gYWRkIHRoZSBzdHlsZXMgdG8gdGhlIERPTVxudmFyIHVwZGF0ZSA9IHJlcXVpcmUoXCIhLi8uLi8uLi8uLi9ub2RlX21vZHVsZXMvdnVlLXN0eWxlLWxvYWRlci9hZGRTdHlsZXMuanNcIikoY29udGVudCwge30pO1xuaWYoY29udGVudC5sb2NhbHMpIG1vZHVsZS5leHBvcnRzID0gY29udGVudC5sb2NhbHM7XG4vLyBIb3QgTW9kdWxlIFJlcGxhY2VtZW50XG5pZihtb2R1bGUuaG90KSB7XG5cdC8vIFdoZW4gdGhlIHN0eWxlcyBjaGFuZ2UsIHVwZGF0ZSB0aGUgPHN0eWxlPiB0YWdzXG5cdGlmKCFjb250ZW50LmxvY2Fscykge1xuXHRcdG1vZHVsZS5ob3QuYWNjZXB0KFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIsIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIG5ld0NvbnRlbnQgPSByZXF1aXJlKFwiISEuLy4uLy4uLy4uL25vZGVfbW9kdWxlcy9jc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3N0eWxlLXJld3JpdGVyLmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Nhc3MtbG9hZGVyL2luZGV4LmpzIS4vLi4vLi4vLi4vbm9kZV9tb2R1bGVzL3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3RhYnMudnVlXCIpO1xuXHRcdFx0aWYodHlwZW9mIG5ld0NvbnRlbnQgPT09ICdzdHJpbmcnKSBuZXdDb250ZW50ID0gW1ttb2R1bGUuaWQsIG5ld0NvbnRlbnQsICcnXV07XG5cdFx0XHR1cGRhdGUobmV3Q29udGVudCk7XG5cdFx0fSk7XG5cdH1cblx0Ly8gV2hlbiB0aGUgbW9kdWxlIGlzIGRpc3Bvc2VkLCByZW1vdmUgdGhlIDxzdHlsZT4gdGFnc1xuXHRtb2R1bGUuaG90LmRpc3Bvc2UoZnVuY3Rpb24oKSB7IHVwZGF0ZSgpOyB9KTtcbn1cblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi92dWUtc3R5bGUtbG9hZGVyIS4vfi9jc3MtbG9hZGVyIS4vfi92dWUtbG9hZGVyL2xpYi9zdHlsZS1yZXdyaXRlci5qcyEuL34vc2Fzcy1sb2FkZXIhLi9+L3Z1ZS1sb2FkZXIvbGliL3NlbGVjdG9yLmpzP3R5cGU9c3R5bGUmaW5kZXg9MCEuL3NyYy9jb21wb25lbnRzL3RhYi90YWJzLnZ1ZVxuICoqIG1vZHVsZSBpZCA9IDIxNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLyohXG4gKiBWdWUuanMgdjEuMC4yNlxuICogKGMpIDIwMTYgRXZhbiBZb3VcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZS5cbiAqL1xuJ3VzZSBzdHJpY3QnO1xuXG5mdW5jdGlvbiBzZXQob2JqLCBrZXksIHZhbCkge1xuICBpZiAoaGFzT3duKG9iaiwga2V5KSkge1xuICAgIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybjtcbiAgfVxuICBpZiAob2JqLl9pc1Z1ZSkge1xuICAgIHNldChvYmouX2RhdGEsIGtleSwgdmFsKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdmFyIG9iID0gb2JqLl9fb2JfXztcbiAgaWYgKCFvYikge1xuICAgIG9ialtrZXldID0gdmFsO1xuICAgIHJldHVybjtcbiAgfVxuICBvYi5jb252ZXJ0KGtleSwgdmFsKTtcbiAgb2IuZGVwLm5vdGlmeSgpO1xuICBpZiAob2Iudm1zKSB7XG4gICAgdmFyIGkgPSBvYi52bXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciB2bSA9IG9iLnZtc1tpXTtcbiAgICAgIHZtLl9wcm94eShrZXkpO1xuICAgICAgdm0uX2RpZ2VzdCgpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdmFsO1xufVxuXG4vKipcbiAqIERlbGV0ZSBhIHByb3BlcnR5IGFuZCB0cmlnZ2VyIGNoYW5nZSBpZiBuZWNlc3NhcnkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICovXG5cbmZ1bmN0aW9uIGRlbChvYmosIGtleSkge1xuICBpZiAoIWhhc093bihvYmosIGtleSkpIHtcbiAgICByZXR1cm47XG4gIH1cbiAgZGVsZXRlIG9ialtrZXldO1xuICB2YXIgb2IgPSBvYmouX19vYl9fO1xuICBpZiAoIW9iKSB7XG4gICAgaWYgKG9iai5faXNWdWUpIHtcbiAgICAgIGRlbGV0ZSBvYmouX2RhdGFba2V5XTtcbiAgICAgIG9iai5fZGlnZXN0KCk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuICBvYi5kZXAubm90aWZ5KCk7XG4gIGlmIChvYi52bXMpIHtcbiAgICB2YXIgaSA9IG9iLnZtcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIHZtID0gb2Iudm1zW2ldO1xuICAgICAgdm0uX3VucHJveHkoa2V5KTtcbiAgICAgIHZtLl9kaWdlc3QoKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIGhhc093blByb3BlcnR5ID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcbi8qKlxuICogQ2hlY2sgd2hldGhlciB0aGUgb2JqZWN0IGhhcyB0aGUgcHJvcGVydHkuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNPd24ob2JqLCBrZXkpIHtcbiAgcmV0dXJuIGhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGV4cHJlc3Npb24gaXMgYSBsaXRlcmFsIHZhbHVlLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxudmFyIGxpdGVyYWxWYWx1ZVJFID0gL15cXHM/KHRydWV8ZmFsc2V8LT9bXFxkXFwuXSt8J1teJ10qJ3xcIlteXCJdKlwiKVxccz8kLztcblxuZnVuY3Rpb24gaXNMaXRlcmFsKGV4cCkge1xuICByZXR1cm4gbGl0ZXJhbFZhbHVlUkUudGVzdChleHApO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgc3RyaW5nIHN0YXJ0cyB3aXRoICQgb3IgX1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNSZXNlcnZlZChzdHIpIHtcbiAgdmFyIGMgPSAoc3RyICsgJycpLmNoYXJDb2RlQXQoMCk7XG4gIHJldHVybiBjID09PSAweDI0IHx8IGMgPT09IDB4NUY7XG59XG5cbi8qKlxuICogR3VhcmQgdGV4dCBvdXRwdXQsIG1ha2Ugc3VyZSB1bmRlZmluZWQgb3V0cHV0c1xuICogZW1wdHkgc3RyaW5nXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIF90b1N0cmluZyh2YWx1ZSkge1xuICByZXR1cm4gdmFsdWUgPT0gbnVsbCA/ICcnIDogdmFsdWUudG9TdHJpbmcoKTtcbn1cblxuLyoqXG4gKiBDaGVjayBhbmQgY29udmVydCBwb3NzaWJsZSBudW1lcmljIHN0cmluZ3MgdG8gbnVtYmVyc1xuICogYmVmb3JlIHNldHRpbmcgYmFjayB0byBkYXRhXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7KnxOdW1iZXJ9XG4gKi9cblxuZnVuY3Rpb24gdG9OdW1iZXIodmFsdWUpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH0gZWxzZSB7XG4gICAgdmFyIHBhcnNlZCA9IE51bWJlcih2YWx1ZSk7XG4gICAgcmV0dXJuIGlzTmFOKHBhcnNlZCkgPyB2YWx1ZSA6IHBhcnNlZDtcbiAgfVxufVxuXG4vKipcbiAqIENvbnZlcnQgc3RyaW5nIGJvb2xlYW4gbGl0ZXJhbHMgaW50byByZWFsIGJvb2xlYW5zLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4geyp8Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiB0b0Jvb2xlYW4odmFsdWUpIHtcbiAgcmV0dXJuIHZhbHVlID09PSAndHJ1ZScgPyB0cnVlIDogdmFsdWUgPT09ICdmYWxzZScgPyBmYWxzZSA6IHZhbHVlO1xufVxuXG4vKipcbiAqIFN0cmlwIHF1b3RlcyBmcm9tIGEgc3RyaW5nXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHJldHVybiB7U3RyaW5nIHwgZmFsc2V9XG4gKi9cblxuZnVuY3Rpb24gc3RyaXBRdW90ZXMoc3RyKSB7XG4gIHZhciBhID0gc3RyLmNoYXJDb2RlQXQoMCk7XG4gIHZhciBiID0gc3RyLmNoYXJDb2RlQXQoc3RyLmxlbmd0aCAtIDEpO1xuICByZXR1cm4gYSA9PT0gYiAmJiAoYSA9PT0gMHgyMiB8fCBhID09PSAweDI3KSA/IHN0ci5zbGljZSgxLCAtMSkgOiBzdHI7XG59XG5cbi8qKlxuICogQ2FtZWxpemUgYSBoeXBoZW4tZGVsbWl0ZWQgc3RyaW5nLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzdHJcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgY2FtZWxpemVSRSA9IC8tKFxcdykvZztcblxuZnVuY3Rpb24gY2FtZWxpemUoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShjYW1lbGl6ZVJFLCB0b1VwcGVyKTtcbn1cblxuZnVuY3Rpb24gdG9VcHBlcihfLCBjKSB7XG4gIHJldHVybiBjID8gYy50b1VwcGVyQ2FzZSgpIDogJyc7XG59XG5cbi8qKlxuICogSHlwaGVuYXRlIGEgY2FtZWxDYXNlIHN0cmluZy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGh5cGhlbmF0ZVJFID0gLyhbYS16XFxkXSkoW0EtWl0pL2c7XG5cbmZ1bmN0aW9uIGh5cGhlbmF0ZShzdHIpIHtcbiAgcmV0dXJuIHN0ci5yZXBsYWNlKGh5cGhlbmF0ZVJFLCAnJDEtJDInKS50b0xvd2VyQ2FzZSgpO1xufVxuXG4vKipcbiAqIENvbnZlcnRzIGh5cGhlbi91bmRlcnNjb3JlL3NsYXNoIGRlbGltaXRlcmVkIG5hbWVzIGludG9cbiAqIGNhbWVsaXplZCBjbGFzc05hbWVzLlxuICpcbiAqIGUuZy4gbXktY29tcG9uZW50ID0+IE15Q29tcG9uZW50XG4gKiAgICAgIHNvbWVfZWxzZSAgICA9PiBTb21lRWxzZVxuICogICAgICBzb21lL2NvbXAgICAgPT4gU29tZUNvbXBcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxudmFyIGNsYXNzaWZ5UkUgPSAvKD86XnxbLV9cXC9dKShcXHcpL2c7XG5cbmZ1bmN0aW9uIGNsYXNzaWZ5KHN0cikge1xuICByZXR1cm4gc3RyLnJlcGxhY2UoY2xhc3NpZnlSRSwgdG9VcHBlcik7XG59XG5cbi8qKlxuICogU2ltcGxlIGJpbmQsIGZhc3RlciB0aGFuIG5hdGl2ZVxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKiBAcGFyYW0ge09iamVjdH0gY3R4XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBiaW5kKGZuLCBjdHgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIGwgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHJldHVybiBsID8gbCA+IDEgPyBmbi5hcHBseShjdHgsIGFyZ3VtZW50cykgOiBmbi5jYWxsKGN0eCwgYSkgOiBmbi5jYWxsKGN0eCk7XG4gIH07XG59XG5cbi8qKlxuICogQ29udmVydCBhbiBBcnJheS1saWtlIG9iamVjdCB0byBhIHJlYWwgQXJyYXkuXG4gKlxuICogQHBhcmFtIHtBcnJheS1saWtlfSBsaXN0XG4gKiBAcGFyYW0ge051bWJlcn0gW3N0YXJ0XSAtIHN0YXJ0IGluZGV4XG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiB0b0FycmF5KGxpc3QsIHN0YXJ0KSB7XG4gIHN0YXJ0ID0gc3RhcnQgfHwgMDtcbiAgdmFyIGkgPSBsaXN0Lmxlbmd0aCAtIHN0YXJ0O1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KGkpO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgcmV0W2ldID0gbGlzdFtpICsgc3RhcnRdO1xuICB9XG4gIHJldHVybiByZXQ7XG59XG5cbi8qKlxuICogTWl4IHByb3BlcnRpZXMgaW50byB0YXJnZXQgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSB0b1xuICogQHBhcmFtIHtPYmplY3R9IGZyb21cbiAqL1xuXG5mdW5jdGlvbiBleHRlbmQodG8sIGZyb20pIHtcbiAgdmFyIGtleXMgPSBPYmplY3Qua2V5cyhmcm9tKTtcbiAgdmFyIGkgPSBrZXlzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHRvW2tleXNbaV1dID0gZnJvbVtrZXlzW2ldXTtcbiAgfVxuICByZXR1cm4gdG87XG59XG5cbi8qKlxuICogUXVpY2sgb2JqZWN0IGNoZWNrIC0gdGhpcyBpcyBwcmltYXJpbHkgdXNlZCB0byB0ZWxsXG4gKiBPYmplY3RzIGZyb20gcHJpbWl0aXZlIHZhbHVlcyB3aGVuIHdlIGtub3cgdGhlIHZhbHVlXG4gKiBpcyBhIEpTT04tY29tcGxpYW50IHR5cGUuXG4gKlxuICogQHBhcmFtIHsqfSBvYmpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaXNPYmplY3Qob2JqKSB7XG4gIHJldHVybiBvYmogIT09IG51bGwgJiYgdHlwZW9mIG9iaiA9PT0gJ29iamVjdCc7XG59XG5cbi8qKlxuICogU3RyaWN0IG9iamVjdCB0eXBlIGNoZWNrLiBPbmx5IHJldHVybnMgdHJ1ZVxuICogZm9yIHBsYWluIEphdmFTY3JpcHQgb2JqZWN0cy5cbiAqXG4gKiBAcGFyYW0geyp9IG9ialxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG52YXIgdG9TdHJpbmcgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIE9CSkVDVF9TVFJJTkcgPSAnW29iamVjdCBPYmplY3RdJztcblxuZnVuY3Rpb24gaXNQbGFpbk9iamVjdChvYmopIHtcbiAgcmV0dXJuIHRvU3RyaW5nLmNhbGwob2JqKSA9PT0gT0JKRUNUX1NUUklORztcbn1cblxuLyoqXG4gKiBBcnJheSB0eXBlIGNoZWNrLlxuICpcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcblxuLyoqXG4gKiBEZWZpbmUgYSBwcm9wZXJ0eS5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0geyp9IHZhbFxuICogQHBhcmFtIHtCb29sZWFufSBbZW51bWVyYWJsZV1cbiAqL1xuXG5mdW5jdGlvbiBkZWYob2JqLCBrZXksIHZhbCwgZW51bWVyYWJsZSkge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICB2YWx1ZTogdmFsLFxuICAgIGVudW1lcmFibGU6ICEhZW51bWVyYWJsZSxcbiAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICBjb25maWd1cmFibGU6IHRydWVcbiAgfSk7XG59XG5cbi8qKlxuICogRGVib3VuY2UgYSBmdW5jdGlvbiBzbyBpdCBvbmx5IGdldHMgY2FsbGVkIGFmdGVyIHRoZVxuICogaW5wdXQgc3RvcHMgYXJyaXZpbmcgYWZ0ZXIgdGhlIGdpdmVuIHdhaXQgcGVyaW9kLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZ1bmNcbiAqIEBwYXJhbSB7TnVtYmVyfSB3YWl0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB0aGUgZGVib3VuY2VkIGZ1bmN0aW9uXG4gKi9cblxuZnVuY3Rpb24gX2RlYm91bmNlKGZ1bmMsIHdhaXQpIHtcbiAgdmFyIHRpbWVvdXQsIGFyZ3MsIGNvbnRleHQsIHRpbWVzdGFtcCwgcmVzdWx0O1xuICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiBsYXRlcigpIHtcbiAgICB2YXIgbGFzdCA9IERhdGUubm93KCkgLSB0aW1lc3RhbXA7XG4gICAgaWYgKGxhc3QgPCB3YWl0ICYmIGxhc3QgPj0gMCkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHdhaXQgLSBsYXN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgaWYgKCF0aW1lb3V0KSBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgfVxuICB9O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIGNvbnRleHQgPSB0aGlzO1xuICAgIGFyZ3MgPSBhcmd1bWVudHM7XG4gICAgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICBpZiAoIXRpbWVvdXQpIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCB3YWl0KTtcbiAgICB9XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfTtcbn1cblxuLyoqXG4gKiBNYW51YWwgaW5kZXhPZiBiZWNhdXNlIGl0J3Mgc2xpZ2h0bHkgZmFzdGVyIHRoYW5cbiAqIG5hdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Kn0gb2JqXG4gKi9cblxuZnVuY3Rpb24gaW5kZXhPZihhcnIsIG9iaikge1xuICB2YXIgaSA9IGFyci5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBpZiAoYXJyW2ldID09PSBvYmopIHJldHVybiBpO1xuICB9XG4gIHJldHVybiAtMTtcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2FuY2VsbGFibGUgdmVyc2lvbiBvZiBhbiBhc3luYyBjYWxsYmFjay5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7RnVuY3Rpb259XG4gKi9cblxuZnVuY3Rpb24gY2FuY2VsbGFibGUoZm4pIHtcbiAgdmFyIGNiID0gZnVuY3Rpb24gY2IoKSB7XG4gICAgaWYgKCFjYi5jYW5jZWxsZWQpIHtcbiAgICAgIHJldHVybiBmbi5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH1cbiAgfTtcbiAgY2IuY2FuY2VsID0gZnVuY3Rpb24gKCkge1xuICAgIGNiLmNhbmNlbGxlZCA9IHRydWU7XG4gIH07XG4gIHJldHVybiBjYjtcbn1cblxuLyoqXG4gKiBDaGVjayBpZiB0d28gdmFsdWVzIGFyZSBsb29zZWx5IGVxdWFsIC0gdGhhdCBpcyxcbiAqIGlmIHRoZXkgYXJlIHBsYWluIG9iamVjdHMsIGRvIHRoZXkgaGF2ZSB0aGUgc2FtZSBzaGFwZT9cbiAqXG4gKiBAcGFyYW0geyp9IGFcbiAqIEBwYXJhbSB7Kn0gYlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBsb29zZUVxdWFsKGEsIGIpIHtcbiAgLyogZXNsaW50LWRpc2FibGUgZXFlcWVxICovXG4gIHJldHVybiBhID09IGIgfHwgKGlzT2JqZWN0KGEpICYmIGlzT2JqZWN0KGIpID8gSlNPTi5zdHJpbmdpZnkoYSkgPT09IEpTT04uc3RyaW5naWZ5KGIpIDogZmFsc2UpO1xuICAvKiBlc2xpbnQtZW5hYmxlIGVxZXFlcSAqL1xufVxuXG52YXIgaGFzUHJvdG8gPSAoJ19fcHJvdG9fXycgaW4ge30pO1xuXG4vLyBCcm93c2VyIGVudmlyb25tZW50IHNuaWZmaW5nXG52YXIgaW5Ccm93c2VyID0gdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiYgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHdpbmRvdykgIT09ICdbb2JqZWN0IE9iamVjdF0nO1xuXG4vLyBkZXRlY3QgZGV2dG9vbHNcbnZhciBkZXZ0b29scyA9IGluQnJvd3NlciAmJiB3aW5kb3cuX19WVUVfREVWVE9PTFNfR0xPQkFMX0hPT0tfXztcblxuLy8gVUEgc25pZmZpbmcgZm9yIHdvcmtpbmcgYXJvdW5kIGJyb3dzZXItc3BlY2lmaWMgcXVpcmtzXG52YXIgVUEgPSBpbkJyb3dzZXIgJiYgd2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQudG9Mb3dlckNhc2UoKTtcbnZhciBpc0lFID0gVUEgJiYgVUEuaW5kZXhPZigndHJpZGVudCcpID4gMDtcbnZhciBpc0lFOSA9IFVBICYmIFVBLmluZGV4T2YoJ21zaWUgOS4wJykgPiAwO1xudmFyIGlzQW5kcm9pZCA9IFVBICYmIFVBLmluZGV4T2YoJ2FuZHJvaWQnKSA+IDA7XG52YXIgaXNJb3MgPSBVQSAmJiAvKGlwaG9uZXxpcGFkfGlwb2R8aW9zKS9pLnRlc3QoVUEpO1xudmFyIGlvc1ZlcnNpb25NYXRjaCA9IGlzSW9zICYmIFVBLm1hdGNoKC9vcyAoW1xcZF9dKykvKTtcbnZhciBpb3NWZXJzaW9uID0gaW9zVmVyc2lvbk1hdGNoICYmIGlvc1ZlcnNpb25NYXRjaFsxXS5zcGxpdCgnXycpO1xuXG4vLyBkZXRlY3RpbmcgaU9TIFVJV2ViVmlldyBieSBpbmRleGVkREJcbnZhciBoYXNNdXRhdGlvbk9ic2VydmVyQnVnID0gaW9zVmVyc2lvbiAmJiBOdW1iZXIoaW9zVmVyc2lvblswXSkgPj0gOSAmJiBOdW1iZXIoaW9zVmVyc2lvblsxXSkgPj0gMyAmJiAhd2luZG93LmluZGV4ZWREQjtcblxudmFyIHRyYW5zaXRpb25Qcm9wID0gdW5kZWZpbmVkO1xudmFyIHRyYW5zaXRpb25FbmRFdmVudCA9IHVuZGVmaW5lZDtcbnZhciBhbmltYXRpb25Qcm9wID0gdW5kZWZpbmVkO1xudmFyIGFuaW1hdGlvbkVuZEV2ZW50ID0gdW5kZWZpbmVkO1xuXG4vLyBUcmFuc2l0aW9uIHByb3BlcnR5L2V2ZW50IHNuaWZmaW5nXG5pZiAoaW5Ccm93c2VyICYmICFpc0lFOSkge1xuICB2YXIgaXNXZWJraXRUcmFucyA9IHdpbmRvdy5vbnRyYW5zaXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXR0cmFuc2l0aW9uZW5kICE9PSB1bmRlZmluZWQ7XG4gIHZhciBpc1dlYmtpdEFuaW0gPSB3aW5kb3cub25hbmltYXRpb25lbmQgPT09IHVuZGVmaW5lZCAmJiB3aW5kb3cub253ZWJraXRhbmltYXRpb25lbmQgIT09IHVuZGVmaW5lZDtcbiAgdHJhbnNpdGlvblByb3AgPSBpc1dlYmtpdFRyYW5zID8gJ1dlYmtpdFRyYW5zaXRpb24nIDogJ3RyYW5zaXRpb24nO1xuICB0cmFuc2l0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdFRyYW5zID8gJ3dlYmtpdFRyYW5zaXRpb25FbmQnIDogJ3RyYW5zaXRpb25lbmQnO1xuICBhbmltYXRpb25Qcm9wID0gaXNXZWJraXRBbmltID8gJ1dlYmtpdEFuaW1hdGlvbicgOiAnYW5pbWF0aW9uJztcbiAgYW5pbWF0aW9uRW5kRXZlbnQgPSBpc1dlYmtpdEFuaW0gPyAnd2Via2l0QW5pbWF0aW9uRW5kJyA6ICdhbmltYXRpb25lbmQnO1xufVxuXG4vKipcbiAqIERlZmVyIGEgdGFzayB0byBleGVjdXRlIGl0IGFzeW5jaHJvbm91c2x5LiBJZGVhbGx5IHRoaXNcbiAqIHNob3VsZCBiZSBleGVjdXRlZCBhcyBhIG1pY3JvdGFzaywgc28gd2UgbGV2ZXJhZ2VcbiAqIE11dGF0aW9uT2JzZXJ2ZXIgaWYgaXQncyBhdmFpbGFibGUsIGFuZCBmYWxsYmFjayB0b1xuICogc2V0VGltZW91dCgwKS5cbiAqXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICogQHBhcmFtIHtPYmplY3R9IGN0eFxuICovXG5cbnZhciBuZXh0VGljayA9IChmdW5jdGlvbiAoKSB7XG4gIHZhciBjYWxsYmFja3MgPSBbXTtcbiAgdmFyIHBlbmRpbmcgPSBmYWxzZTtcbiAgdmFyIHRpbWVyRnVuYztcbiAgZnVuY3Rpb24gbmV4dFRpY2tIYW5kbGVyKCkge1xuICAgIHBlbmRpbmcgPSBmYWxzZTtcbiAgICB2YXIgY29waWVzID0gY2FsbGJhY2tzLnNsaWNlKDApO1xuICAgIGNhbGxiYWNrcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY29waWVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb3BpZXNbaV0oKTtcbiAgICB9XG4gIH1cblxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyICE9PSAndW5kZWZpbmVkJyAmJiAhaGFzTXV0YXRpb25PYnNlcnZlckJ1Zykge1xuICAgIHZhciBjb3VudGVyID0gMTtcbiAgICB2YXIgb2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcihuZXh0VGlja0hhbmRsZXIpO1xuICAgIHZhciB0ZXh0Tm9kZSA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNvdW50ZXIpO1xuICAgIG9ic2VydmVyLm9ic2VydmUodGV4dE5vZGUsIHtcbiAgICAgIGNoYXJhY3RlckRhdGE6IHRydWVcbiAgICB9KTtcbiAgICB0aW1lckZ1bmMgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBjb3VudGVyID0gKGNvdW50ZXIgKyAxKSAlIDI7XG4gICAgICB0ZXh0Tm9kZS5kYXRhID0gY291bnRlcjtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIHdlYnBhY2sgYXR0ZW1wdHMgdG8gaW5qZWN0IGEgc2hpbSBmb3Igc2V0SW1tZWRpYXRlXG4gICAgLy8gaWYgaXQgaXMgdXNlZCBhcyBhIGdsb2JhbCwgc28gd2UgaGF2ZSB0byB3b3JrIGFyb3VuZCB0aGF0IHRvXG4gICAgLy8gYXZvaWQgYnVuZGxpbmcgdW5uZWNlc3NhcnkgY29kZS5cbiAgICB2YXIgY29udGV4dCA9IGluQnJvd3NlciA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDoge307XG4gICAgdGltZXJGdW5jID0gY29udGV4dC5zZXRJbW1lZGlhdGUgfHwgc2V0VGltZW91dDtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKGNiLCBjdHgpIHtcbiAgICB2YXIgZnVuYyA9IGN0eCA/IGZ1bmN0aW9uICgpIHtcbiAgICAgIGNiLmNhbGwoY3R4KTtcbiAgICB9IDogY2I7XG4gICAgY2FsbGJhY2tzLnB1c2goZnVuYyk7XG4gICAgaWYgKHBlbmRpbmcpIHJldHVybjtcbiAgICBwZW5kaW5nID0gdHJ1ZTtcbiAgICB0aW1lckZ1bmMobmV4dFRpY2tIYW5kbGVyLCAwKTtcbiAgfTtcbn0pKCk7XG5cbnZhciBfU2V0ID0gdW5kZWZpbmVkO1xuLyogaXN0YW5idWwgaWdub3JlIGlmICovXG5pZiAodHlwZW9mIFNldCAhPT0gJ3VuZGVmaW5lZCcgJiYgU2V0LnRvU3RyaW5nKCkubWF0Y2goL25hdGl2ZSBjb2RlLykpIHtcbiAgLy8gdXNlIG5hdGl2ZSBTZXQgd2hlbiBhdmFpbGFibGUuXG4gIF9TZXQgPSBTZXQ7XG59IGVsc2Uge1xuICAvLyBhIG5vbi1zdGFuZGFyZCBTZXQgcG9seWZpbGwgdGhhdCBvbmx5IHdvcmtzIHdpdGggcHJpbWl0aXZlIGtleXMuXG4gIF9TZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5zZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5oYXMgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgcmV0dXJuIHRoaXMuc2V0W2tleV0gIT09IHVuZGVmaW5lZDtcbiAgfTtcbiAgX1NldC5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKGtleSkge1xuICAgIHRoaXMuc2V0W2tleV0gPSAxO1xuICB9O1xuICBfU2V0LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHtcbiAgICB0aGlzLnNldCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIENhY2hlKGxpbWl0KSB7XG4gIHRoaXMuc2l6ZSA9IDA7XG4gIHRoaXMubGltaXQgPSBsaW1pdDtcbiAgdGhpcy5oZWFkID0gdGhpcy50YWlsID0gdW5kZWZpbmVkO1xuICB0aGlzLl9rZXltYXAgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xufVxuXG52YXIgcCA9IENhY2hlLnByb3RvdHlwZTtcblxuLyoqXG4gKiBQdXQgPHZhbHVlPiBpbnRvIHRoZSBjYWNoZSBhc3NvY2lhdGVkIHdpdGggPGtleT4uXG4gKiBSZXR1cm5zIHRoZSBlbnRyeSB3aGljaCB3YXMgcmVtb3ZlZCB0byBtYWtlIHJvb20gZm9yXG4gKiB0aGUgbmV3IGVudHJ5LiBPdGhlcndpc2UgdW5kZWZpbmVkIGlzIHJldHVybmVkLlxuICogKGkuZS4gaWYgdGhlcmUgd2FzIGVub3VnaCByb29tIGFscmVhZHkpLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEByZXR1cm4ge0VudHJ5fHVuZGVmaW5lZH1cbiAqL1xuXG5wLnB1dCA9IGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XG4gIHZhciByZW1vdmVkO1xuXG4gIHZhciBlbnRyeSA9IHRoaXMuZ2V0KGtleSwgdHJ1ZSk7XG4gIGlmICghZW50cnkpIHtcbiAgICBpZiAodGhpcy5zaXplID09PSB0aGlzLmxpbWl0KSB7XG4gICAgICByZW1vdmVkID0gdGhpcy5zaGlmdCgpO1xuICAgIH1cbiAgICBlbnRyeSA9IHtcbiAgICAgIGtleToga2V5XG4gICAgfTtcbiAgICB0aGlzLl9rZXltYXBba2V5XSA9IGVudHJ5O1xuICAgIGlmICh0aGlzLnRhaWwpIHtcbiAgICAgIHRoaXMudGFpbC5uZXdlciA9IGVudHJ5O1xuICAgICAgZW50cnkub2xkZXIgPSB0aGlzLnRhaWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGVhZCA9IGVudHJ5O1xuICAgIH1cbiAgICB0aGlzLnRhaWwgPSBlbnRyeTtcbiAgICB0aGlzLnNpemUrKztcbiAgfVxuICBlbnRyeS52YWx1ZSA9IHZhbHVlO1xuXG4gIHJldHVybiByZW1vdmVkO1xufTtcblxuLyoqXG4gKiBQdXJnZSB0aGUgbGVhc3QgcmVjZW50bHkgdXNlZCAob2xkZXN0KSBlbnRyeSBmcm9tIHRoZVxuICogY2FjaGUuIFJldHVybnMgdGhlIHJlbW92ZWQgZW50cnkgb3IgdW5kZWZpbmVkIGlmIHRoZVxuICogY2FjaGUgd2FzIGVtcHR5LlxuICovXG5cbnAuc2hpZnQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBlbnRyeSA9IHRoaXMuaGVhZDtcbiAgaWYgKGVudHJ5KSB7XG4gICAgdGhpcy5oZWFkID0gdGhpcy5oZWFkLm5ld2VyO1xuICAgIHRoaXMuaGVhZC5vbGRlciA9IHVuZGVmaW5lZDtcbiAgICBlbnRyeS5uZXdlciA9IGVudHJ5Lm9sZGVyID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuX2tleW1hcFtlbnRyeS5rZXldID0gdW5kZWZpbmVkO1xuICAgIHRoaXMuc2l6ZS0tO1xuICB9XG4gIHJldHVybiBlbnRyeTtcbn07XG5cbi8qKlxuICogR2V0IGFuZCByZWdpc3RlciByZWNlbnQgdXNlIG9mIDxrZXk+LiBSZXR1cm5zIHRoZSB2YWx1ZVxuICogYXNzb2NpYXRlZCB3aXRoIDxrZXk+IG9yIHVuZGVmaW5lZCBpZiBub3QgaW4gY2FjaGUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHtCb29sZWFufSByZXR1cm5FbnRyeVxuICogQHJldHVybiB7RW50cnl8Kn1cbiAqL1xuXG5wLmdldCA9IGZ1bmN0aW9uIChrZXksIHJldHVybkVudHJ5KSB7XG4gIHZhciBlbnRyeSA9IHRoaXMuX2tleW1hcFtrZXldO1xuICBpZiAoZW50cnkgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBpZiAoZW50cnkgPT09IHRoaXMudGFpbCkge1xuICAgIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG4gIH1cbiAgLy8gSEVBRC0tLS0tLS0tLS0tLS0tVEFJTFxuICAvLyAgIDwub2xkZXIgICAubmV3ZXI+XG4gIC8vICA8LS0tIGFkZCBkaXJlY3Rpb24gLS1cbiAgLy8gICBBICBCICBDICA8RD4gIEVcbiAgaWYgKGVudHJ5Lm5ld2VyKSB7XG4gICAgaWYgKGVudHJ5ID09PSB0aGlzLmhlYWQpIHtcbiAgICAgIHRoaXMuaGVhZCA9IGVudHJ5Lm5ld2VyO1xuICAgIH1cbiAgICBlbnRyeS5uZXdlci5vbGRlciA9IGVudHJ5Lm9sZGVyOyAvLyBDIDwtLSBFLlxuICB9XG4gIGlmIChlbnRyeS5vbGRlcikge1xuICAgIGVudHJ5Lm9sZGVyLm5ld2VyID0gZW50cnkubmV3ZXI7IC8vIEMuIC0tPiBFXG4gIH1cbiAgZW50cnkubmV3ZXIgPSB1bmRlZmluZWQ7IC8vIEQgLS14XG4gIGVudHJ5Lm9sZGVyID0gdGhpcy50YWlsOyAvLyBELiAtLT4gRVxuICBpZiAodGhpcy50YWlsKSB7XG4gICAgdGhpcy50YWlsLm5ld2VyID0gZW50cnk7IC8vIEUuIDwtLSBEXG4gIH1cbiAgdGhpcy50YWlsID0gZW50cnk7XG4gIHJldHVybiByZXR1cm5FbnRyeSA/IGVudHJ5IDogZW50cnkudmFsdWU7XG59O1xuXG52YXIgY2FjaGUkMSA9IG5ldyBDYWNoZSgxMDAwKTtcbnZhciBmaWx0ZXJUb2tlblJFID0gL1teXFxzJ1wiXSt8J1teJ10qJ3xcIlteXCJdKlwiL2c7XG52YXIgcmVzZXJ2ZWRBcmdSRSA9IC9eaW4kfF4tP1xcZCsvO1xuXG4vKipcbiAqIFBhcnNlciBzdGF0ZVxuICovXG5cbnZhciBzdHI7XG52YXIgZGlyO1xudmFyIGM7XG52YXIgcHJldjtcbnZhciBpO1xudmFyIGw7XG52YXIgbGFzdEZpbHRlckluZGV4O1xudmFyIGluU2luZ2xlO1xudmFyIGluRG91YmxlO1xudmFyIGN1cmx5O1xudmFyIHNxdWFyZTtcbnZhciBwYXJlbjtcbi8qKlxuICogUHVzaCBhIGZpbHRlciB0byB0aGUgY3VycmVudCBkaXJlY3RpdmUgb2JqZWN0XG4gKi9cblxuZnVuY3Rpb24gcHVzaEZpbHRlcigpIHtcbiAgdmFyIGV4cCA9IHN0ci5zbGljZShsYXN0RmlsdGVySW5kZXgsIGkpLnRyaW0oKTtcbiAgdmFyIGZpbHRlcjtcbiAgaWYgKGV4cCkge1xuICAgIGZpbHRlciA9IHt9O1xuICAgIHZhciB0b2tlbnMgPSBleHAubWF0Y2goZmlsdGVyVG9rZW5SRSk7XG4gICAgZmlsdGVyLm5hbWUgPSB0b2tlbnNbMF07XG4gICAgaWYgKHRva2Vucy5sZW5ndGggPiAxKSB7XG4gICAgICBmaWx0ZXIuYXJncyA9IHRva2Vucy5zbGljZSgxKS5tYXAocHJvY2Vzc0ZpbHRlckFyZyk7XG4gICAgfVxuICB9XG4gIGlmIChmaWx0ZXIpIHtcbiAgICAoZGlyLmZpbHRlcnMgPSBkaXIuZmlsdGVycyB8fCBbXSkucHVzaChmaWx0ZXIpO1xuICB9XG4gIGxhc3RGaWx0ZXJJbmRleCA9IGkgKyAxO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGFyZ3VtZW50IGlzIGR5bmFtaWMgYW5kIHN0cmlwIHF1b3Rlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gYXJnXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcHJvY2Vzc0ZpbHRlckFyZyhhcmcpIHtcbiAgaWYgKHJlc2VydmVkQXJnUkUudGVzdChhcmcpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbHVlOiB0b051bWJlcihhcmcpLFxuICAgICAgZHluYW1pYzogZmFsc2VcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIHZhciBzdHJpcHBlZCA9IHN0cmlwUXVvdGVzKGFyZyk7XG4gICAgdmFyIGR5bmFtaWMgPSBzdHJpcHBlZCA9PT0gYXJnO1xuICAgIHJldHVybiB7XG4gICAgICB2YWx1ZTogZHluYW1pYyA/IGFyZyA6IHN0cmlwcGVkLFxuICAgICAgZHluYW1pYzogZHluYW1pY1xuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBhIGRpcmVjdGl2ZSB2YWx1ZSBhbmQgZXh0cmFjdCB0aGUgZXhwcmVzc2lvblxuICogYW5kIGl0cyBmaWx0ZXJzIGludG8gYSBkZXNjcmlwdG9yLlxuICpcbiAqIEV4YW1wbGU6XG4gKlxuICogXCJhICsgMSB8IHVwcGVyY2FzZVwiIHdpbGwgeWllbGQ6XG4gKiB7XG4gKiAgIGV4cHJlc3Npb246ICdhICsgMScsXG4gKiAgIGZpbHRlcnM6IFtcbiAqICAgICB7IG5hbWU6ICd1cHBlcmNhc2UnLCBhcmdzOiBudWxsIH1cbiAqICAgXVxuICogfVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VEaXJlY3RpdmUocykge1xuICB2YXIgaGl0ID0gY2FjaGUkMS5nZXQocyk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG5cbiAgLy8gcmVzZXQgcGFyc2VyIHN0YXRlXG4gIHN0ciA9IHM7XG4gIGluU2luZ2xlID0gaW5Eb3VibGUgPSBmYWxzZTtcbiAgY3VybHkgPSBzcXVhcmUgPSBwYXJlbiA9IDA7XG4gIGxhc3RGaWx0ZXJJbmRleCA9IDA7XG4gIGRpciA9IHt9O1xuXG4gIGZvciAoaSA9IDAsIGwgPSBzdHIubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgcHJldiA9IGM7XG4gICAgYyA9IHN0ci5jaGFyQ29kZUF0KGkpO1xuICAgIGlmIChpblNpbmdsZSkge1xuICAgICAgLy8gY2hlY2sgc2luZ2xlIHF1b3RlXG4gICAgICBpZiAoYyA9PT0gMHgyNyAmJiBwcmV2ICE9PSAweDVDKSBpblNpbmdsZSA9ICFpblNpbmdsZTtcbiAgICB9IGVsc2UgaWYgKGluRG91YmxlKSB7XG4gICAgICAvLyBjaGVjayBkb3VibGUgcXVvdGVcbiAgICAgIGlmIChjID09PSAweDIyICYmIHByZXYgIT09IDB4NUMpIGluRG91YmxlID0gIWluRG91YmxlO1xuICAgIH0gZWxzZSBpZiAoYyA9PT0gMHg3QyAmJiAvLyBwaXBlXG4gICAgc3RyLmNoYXJDb2RlQXQoaSArIDEpICE9PSAweDdDICYmIHN0ci5jaGFyQ29kZUF0KGkgLSAxKSAhPT0gMHg3Qykge1xuICAgICAgaWYgKGRpci5leHByZXNzaW9uID09IG51bGwpIHtcbiAgICAgICAgLy8gZmlyc3QgZmlsdGVyLCBlbmQgb2YgZXhwcmVzc2lvblxuICAgICAgICBsYXN0RmlsdGVySW5kZXggPSBpICsgMTtcbiAgICAgICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gYWxyZWFkeSBoYXMgZmlsdGVyXG4gICAgICAgIHB1c2hGaWx0ZXIoKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgc3dpdGNoIChjKSB7XG4gICAgICAgIGNhc2UgMHgyMjpcbiAgICAgICAgICBpbkRvdWJsZSA9IHRydWU7YnJlYWs7IC8vIFwiXG4gICAgICAgIGNhc2UgMHgyNzpcbiAgICAgICAgICBpblNpbmdsZSA9IHRydWU7YnJlYWs7IC8vICdcbiAgICAgICAgY2FzZSAweDI4OlxuICAgICAgICAgIHBhcmVuKys7YnJlYWs7IC8vIChcbiAgICAgICAgY2FzZSAweDI5OlxuICAgICAgICAgIHBhcmVuLS07YnJlYWs7IC8vIClcbiAgICAgICAgY2FzZSAweDVCOlxuICAgICAgICAgIHNxdWFyZSsrO2JyZWFrOyAvLyBbXG4gICAgICAgIGNhc2UgMHg1RDpcbiAgICAgICAgICBzcXVhcmUtLTticmVhazsgLy8gXVxuICAgICAgICBjYXNlIDB4N0I6XG4gICAgICAgICAgY3VybHkrKzticmVhazsgLy8ge1xuICAgICAgICBjYXNlIDB4N0Q6XG4gICAgICAgICAgY3VybHktLTticmVhazsgLy8gfVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChkaXIuZXhwcmVzc2lvbiA9PSBudWxsKSB7XG4gICAgZGlyLmV4cHJlc3Npb24gPSBzdHIuc2xpY2UoMCwgaSkudHJpbSgpO1xuICB9IGVsc2UgaWYgKGxhc3RGaWx0ZXJJbmRleCAhPT0gMCkge1xuICAgIHB1c2hGaWx0ZXIoKTtcbiAgfVxuXG4gIGNhY2hlJDEucHV0KHMsIGRpcik7XG4gIHJldHVybiBkaXI7XG59XG5cbnZhciBkaXJlY3RpdmUgPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VEaXJlY3RpdmU6IHBhcnNlRGlyZWN0aXZlXG59KTtcblxudmFyIHJlZ2V4RXNjYXBlUkUgPSAvWy0uKis/XiR7fSgpfFtcXF1cXC9cXFxcXS9nO1xudmFyIGNhY2hlID0gdW5kZWZpbmVkO1xudmFyIHRhZ1JFID0gdW5kZWZpbmVkO1xudmFyIGh0bWxSRSA9IHVuZGVmaW5lZDtcbi8qKlxuICogRXNjYXBlIGEgc3RyaW5nIHNvIGl0IGNhbiBiZSB1c2VkIGluIGEgUmVnRXhwXG4gKiBjb25zdHJ1Y3Rvci5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKi9cblxuZnVuY3Rpb24gZXNjYXBlUmVnZXgoc3RyKSB7XG4gIHJldHVybiBzdHIucmVwbGFjZShyZWdleEVzY2FwZVJFLCAnXFxcXCQmJyk7XG59XG5cbmZ1bmN0aW9uIGNvbXBpbGVSZWdleCgpIHtcbiAgdmFyIG9wZW4gPSBlc2NhcGVSZWdleChjb25maWcuZGVsaW1pdGVyc1swXSk7XG4gIHZhciBjbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy5kZWxpbWl0ZXJzWzFdKTtcbiAgdmFyIHVuc2FmZU9wZW4gPSBlc2NhcGVSZWdleChjb25maWcudW5zYWZlRGVsaW1pdGVyc1swXSk7XG4gIHZhciB1bnNhZmVDbG9zZSA9IGVzY2FwZVJlZ2V4KGNvbmZpZy51bnNhZmVEZWxpbWl0ZXJzWzFdKTtcbiAgdGFnUkUgPSBuZXcgUmVnRXhwKHVuc2FmZU9wZW4gKyAnKCg/Oi58XFxcXG4pKz8pJyArIHVuc2FmZUNsb3NlICsgJ3wnICsgb3BlbiArICcoKD86LnxcXFxcbikrPyknICsgY2xvc2UsICdnJyk7XG4gIGh0bWxSRSA9IG5ldyBSZWdFeHAoJ14nICsgdW5zYWZlT3BlbiArICcoKD86LnxcXFxcbikrPyknICsgdW5zYWZlQ2xvc2UgKyAnJCcpO1xuICAvLyByZXNldCBjYWNoZVxuICBjYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHRlbXBsYXRlIHRleHQgc3RyaW5nIGludG8gYW4gYXJyYXkgb2YgdG9rZW5zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gKiBAcmV0dXJuIHtBcnJheTxPYmplY3Q+IHwgbnVsbH1cbiAqICAgICAgICAgICAgICAgLSB7U3RyaW5nfSB0eXBlXG4gKiAgICAgICAgICAgICAgIC0ge1N0cmluZ30gdmFsdWVcbiAqICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gW2h0bWxdXG4gKiAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtvbmVUaW1lXVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlVGV4dCh0ZXh0KSB7XG4gIGlmICghY2FjaGUpIHtcbiAgICBjb21waWxlUmVnZXgoKTtcbiAgfVxuICB2YXIgaGl0ID0gY2FjaGUuZ2V0KHRleHQpO1xuICBpZiAoaGl0KSB7XG4gICAgcmV0dXJuIGhpdDtcbiAgfVxuICBpZiAoIXRhZ1JFLnRlc3QodGV4dCkpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICB2YXIgdG9rZW5zID0gW107XG4gIHZhciBsYXN0SW5kZXggPSB0YWdSRS5sYXN0SW5kZXggPSAwO1xuICB2YXIgbWF0Y2gsIGluZGV4LCBodG1sLCB2YWx1ZSwgZmlyc3QsIG9uZVRpbWU7XG4gIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gIHdoaWxlIChtYXRjaCA9IHRhZ1JFLmV4ZWModGV4dCkpIHtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgaW5kZXggPSBtYXRjaC5pbmRleDtcbiAgICAvLyBwdXNoIHRleHQgdG9rZW5cbiAgICBpZiAoaW5kZXggPiBsYXN0SW5kZXgpIHtcbiAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgdmFsdWU6IHRleHQuc2xpY2UobGFzdEluZGV4LCBpbmRleClcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyB0YWcgdG9rZW5cbiAgICBodG1sID0gaHRtbFJFLnRlc3QobWF0Y2hbMF0pO1xuICAgIHZhbHVlID0gaHRtbCA/IG1hdGNoWzFdIDogbWF0Y2hbMl07XG4gICAgZmlyc3QgPSB2YWx1ZS5jaGFyQ29kZUF0KDApO1xuICAgIG9uZVRpbWUgPSBmaXJzdCA9PT0gNDI7IC8vICpcbiAgICB2YWx1ZSA9IG9uZVRpbWUgPyB2YWx1ZS5zbGljZSgxKSA6IHZhbHVlO1xuICAgIHRva2Vucy5wdXNoKHtcbiAgICAgIHRhZzogdHJ1ZSxcbiAgICAgIHZhbHVlOiB2YWx1ZS50cmltKCksXG4gICAgICBodG1sOiBodG1sLFxuICAgICAgb25lVGltZTogb25lVGltZVxuICAgIH0pO1xuICAgIGxhc3RJbmRleCA9IGluZGV4ICsgbWF0Y2hbMF0ubGVuZ3RoO1xuICB9XG4gIGlmIChsYXN0SW5kZXggPCB0ZXh0Lmxlbmd0aCkge1xuICAgIHRva2Vucy5wdXNoKHtcbiAgICAgIHZhbHVlOiB0ZXh0LnNsaWNlKGxhc3RJbmRleClcbiAgICB9KTtcbiAgfVxuICBjYWNoZS5wdXQodGV4dCwgdG9rZW5zKTtcbiAgcmV0dXJuIHRva2Vucztcbn1cblxuLyoqXG4gKiBGb3JtYXQgYSBsaXN0IG9mIHRva2VucyBpbnRvIGFuIGV4cHJlc3Npb24uXG4gKiBlLmcuIHRva2VucyBwYXJzZWQgZnJvbSAnYSB7e2J9fSBjJyBjYW4gYmUgc2VyaWFsaXplZFxuICogaW50byBvbmUgc2luZ2xlIGV4cHJlc3Npb24gYXMgJ1wiYSBcIiArIGIgKyBcIiBjXCInLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHRva2Vuc1xuICogQHBhcmFtIHtWdWV9IFt2bV1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiB0b2tlbnNUb0V4cCh0b2tlbnMsIHZtKSB7XG4gIGlmICh0b2tlbnMubGVuZ3RoID4gMSkge1xuICAgIHJldHVybiB0b2tlbnMubWFwKGZ1bmN0aW9uICh0b2tlbikge1xuICAgICAgcmV0dXJuIGZvcm1hdFRva2VuKHRva2VuLCB2bSk7XG4gICAgfSkuam9pbignKycpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmb3JtYXRUb2tlbih0b2tlbnNbMF0sIHZtLCB0cnVlKTtcbiAgfVxufVxuXG4vKipcbiAqIEZvcm1hdCBhIHNpbmdsZSB0b2tlbi5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gdG9rZW5cbiAqIEBwYXJhbSB7VnVlfSBbdm1dXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtzaW5nbGVdXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gZm9ybWF0VG9rZW4odG9rZW4sIHZtLCBzaW5nbGUpIHtcbiAgcmV0dXJuIHRva2VuLnRhZyA/IHRva2VuLm9uZVRpbWUgJiYgdm0gPyAnXCInICsgdm0uJGV2YWwodG9rZW4udmFsdWUpICsgJ1wiJyA6IGlubGluZUZpbHRlcnModG9rZW4udmFsdWUsIHNpbmdsZSkgOiAnXCInICsgdG9rZW4udmFsdWUgKyAnXCInO1xufVxuXG4vKipcbiAqIEZvciBhbiBhdHRyaWJ1dGUgd2l0aCBtdWx0aXBsZSBpbnRlcnBvbGF0aW9uIHRhZ3MsXG4gKiBlLmcuIGF0dHI9XCJzb21lLXt7dGhpbmcgfCBmaWx0ZXJ9fVwiLCBpbiBvcmRlciB0byBjb21iaW5lXG4gKiB0aGUgd2hvbGUgdGhpbmcgaW50byBhIHNpbmdsZSB3YXRjaGFibGUgZXhwcmVzc2lvbiwgd2VcbiAqIGhhdmUgdG8gaW5saW5lIHRob3NlIGZpbHRlcnMuIFRoaXMgZnVuY3Rpb24gZG9lcyBleGFjdGx5XG4gKiB0aGF0LiBUaGlzIGlzIGEgYml0IGhhY2t5IGJ1dCBpdCBhdm9pZHMgaGVhdnkgY2hhbmdlc1xuICogdG8gZGlyZWN0aXZlIHBhcnNlciBhbmQgd2F0Y2hlciBtZWNoYW5pc20uXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHBhcmFtIHtCb29sZWFufSBzaW5nbGVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG52YXIgZmlsdGVyUkUgPSAvW158XVxcfFtefF0vO1xuZnVuY3Rpb24gaW5saW5lRmlsdGVycyhleHAsIHNpbmdsZSkge1xuICBpZiAoIWZpbHRlclJFLnRlc3QoZXhwKSkge1xuICAgIHJldHVybiBzaW5nbGUgPyBleHAgOiAnKCcgKyBleHAgKyAnKSc7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGRpciA9IHBhcnNlRGlyZWN0aXZlKGV4cCk7XG4gICAgaWYgKCFkaXIuZmlsdGVycykge1xuICAgICAgcmV0dXJuICcoJyArIGV4cCArICcpJztcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICd0aGlzLl9hcHBseUZpbHRlcnMoJyArIGRpci5leHByZXNzaW9uICsgLy8gdmFsdWVcbiAgICAgICcsbnVsbCwnICsgLy8gb2xkVmFsdWUgKG51bGwgZm9yIHJlYWQpXG4gICAgICBKU09OLnN0cmluZ2lmeShkaXIuZmlsdGVycykgKyAvLyBmaWx0ZXIgZGVzY3JpcHRvcnNcbiAgICAgICcsZmFsc2UpJzsgLy8gd3JpdGU/XG4gICAgfVxuICB9XG59XG5cbnZhciB0ZXh0ID0gT2JqZWN0LmZyZWV6ZSh7XG4gIGNvbXBpbGVSZWdleDogY29tcGlsZVJlZ2V4LFxuICBwYXJzZVRleHQ6IHBhcnNlVGV4dCxcbiAgdG9rZW5zVG9FeHA6IHRva2Vuc1RvRXhwXG59KTtcblxudmFyIGRlbGltaXRlcnMgPSBbJ3t7JywgJ319J107XG52YXIgdW5zYWZlRGVsaW1pdGVycyA9IFsne3t7JywgJ319fSddO1xuXG52YXIgY29uZmlnID0gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoe1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHByaW50IGRlYnVnIG1lc3NhZ2VzLlxuICAgKiBBbHNvIGVuYWJsZXMgc3RhY2sgdHJhY2UgZm9yIHdhcm5pbmdzLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgZGVidWc6IGZhbHNlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIHN1cHByZXNzIHdhcm5pbmdzLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgc2lsZW50OiBmYWxzZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byB1c2UgYXN5bmMgcmVuZGVyaW5nLlxuICAgKi9cblxuICBhc3luYzogdHJ1ZSxcblxuICAvKipcbiAgICogV2hldGhlciB0byB3YXJuIGFnYWluc3QgZXJyb3JzIGNhdWdodCB3aGVuIGV2YWx1YXRpbmdcbiAgICogZXhwcmVzc2lvbnMuXG4gICAqL1xuXG4gIHdhcm5FeHByZXNzaW9uRXJyb3JzOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGFsbG93IGRldnRvb2xzIGluc3BlY3Rpb24uXG4gICAqIERpc2FibGVkIGJ5IGRlZmF1bHQgaW4gcHJvZHVjdGlvbiBidWlsZHMuXG4gICAqL1xuXG4gIGRldnRvb2xzOiBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nLFxuXG4gIC8qKlxuICAgKiBJbnRlcm5hbCBmbGFnIHRvIGluZGljYXRlIHRoZSBkZWxpbWl0ZXJzIGhhdmUgYmVlblxuICAgKiBjaGFuZ2VkLlxuICAgKlxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICovXG5cbiAgX2RlbGltaXRlcnNDaGFuZ2VkOiB0cnVlLFxuXG4gIC8qKlxuICAgKiBMaXN0IG9mIGFzc2V0IHR5cGVzIHRoYXQgYSBjb21wb25lbnQgY2FuIG93bi5cbiAgICpcbiAgICogQHR5cGUge0FycmF5fVxuICAgKi9cblxuICBfYXNzZXRUeXBlczogWydjb21wb25lbnQnLCAnZGlyZWN0aXZlJywgJ2VsZW1lbnREaXJlY3RpdmUnLCAnZmlsdGVyJywgJ3RyYW5zaXRpb24nLCAncGFydGlhbCddLFxuXG4gIC8qKlxuICAgKiBwcm9wIGJpbmRpbmcgbW9kZXNcbiAgICovXG5cbiAgX3Byb3BCaW5kaW5nTW9kZXM6IHtcbiAgICBPTkVfV0FZOiAwLFxuICAgIFRXT19XQVk6IDEsXG4gICAgT05FX1RJTUU6IDJcbiAgfSxcblxuICAvKipcbiAgICogTWF4IGNpcmN1bGFyIHVwZGF0ZXMgYWxsb3dlZCBpbiBhIGJhdGNoZXIgZmx1c2ggY3ljbGUuXG4gICAqL1xuXG4gIF9tYXhVcGRhdGVDb3VudDogMTAwXG5cbn0sIHtcbiAgZGVsaW1pdGVyczogeyAvKipcbiAgICAgICAgICAgICAgICAgKiBJbnRlcnBvbGF0aW9uIGRlbGltaXRlcnMuIENoYW5naW5nIHRoZXNlIHdvdWxkIHRyaWdnZXJcbiAgICAgICAgICAgICAgICAgKiB0aGUgdGV4dCBwYXJzZXIgdG8gcmUtY29tcGlsZSB0aGUgcmVndWxhciBleHByZXNzaW9ucy5cbiAgICAgICAgICAgICAgICAgKlxuICAgICAgICAgICAgICAgICAqIEB0eXBlIHtBcnJheTxTdHJpbmc+fVxuICAgICAgICAgICAgICAgICAqL1xuXG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gZGVsaW1pdGVycztcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbCkge1xuICAgICAgZGVsaW1pdGVycyA9IHZhbDtcbiAgICAgIGNvbXBpbGVSZWdleCgpO1xuICAgIH0sXG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIGVudW1lcmFibGU6IHRydWVcbiAgfSxcbiAgdW5zYWZlRGVsaW1pdGVyczoge1xuICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgcmV0dXJuIHVuc2FmZURlbGltaXRlcnM7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHNldCh2YWwpIHtcbiAgICAgIHVuc2FmZURlbGltaXRlcnMgPSB2YWw7XG4gICAgICBjb21waWxlUmVnZXgoKTtcbiAgICB9LFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlXG4gIH1cbn0pO1xuXG52YXIgd2FybiA9IHVuZGVmaW5lZDtcbnZhciBmb3JtYXRDb21wb25lbnROYW1lID0gdW5kZWZpbmVkO1xuXG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBoYXNDb25zb2xlID0gdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnO1xuXG4gICAgd2FybiA9IGZ1bmN0aW9uIChtc2csIHZtKSB7XG4gICAgICBpZiAoaGFzQ29uc29sZSAmJiAhY29uZmlnLnNpbGVudCkge1xuICAgICAgICBjb25zb2xlLmVycm9yKCdbVnVlIHdhcm5dOiAnICsgbXNnICsgKHZtID8gZm9ybWF0Q29tcG9uZW50TmFtZSh2bSkgOiAnJykpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBmb3JtYXRDb21wb25lbnROYW1lID0gZnVuY3Rpb24gKHZtKSB7XG4gICAgICB2YXIgbmFtZSA9IHZtLl9pc1Z1ZSA/IHZtLiRvcHRpb25zLm5hbWUgOiB2bS5uYW1lO1xuICAgICAgcmV0dXJuIG5hbWUgPyAnIChmb3VuZCBpbiBjb21wb25lbnQ6IDwnICsgaHlwaGVuYXRlKG5hbWUpICsgJz4pJyA6ICcnO1xuICAgIH07XG4gIH0pKCk7XG59XG5cbi8qKlxuICogQXBwZW5kIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYXBwZW5kV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuICAgIHRhcmdldC5hcHBlbmRDaGlsZChlbCk7XG4gIH0sIHZtLCBjYik7XG59XG5cbi8qKlxuICogSW5zZXJ0QmVmb3JlIHdpdGggdHJhbnNpdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gKi9cblxuZnVuY3Rpb24gYmVmb3JlV2l0aFRyYW5zaXRpb24oZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gIGFwcGx5VHJhbnNpdGlvbihlbCwgMSwgZnVuY3Rpb24gKCkge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcbiAgfSwgdm0sIGNiKTtcbn1cblxuLyoqXG4gKiBSZW1vdmUgd2l0aCB0cmFuc2l0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIHJlbW92ZVdpdGhUcmFuc2l0aW9uKGVsLCB2bSwgY2IpIHtcbiAgYXBwbHlUcmFuc2l0aW9uKGVsLCAtMSwgZnVuY3Rpb24gKCkge1xuICAgIHJlbW92ZShlbCk7XG4gIH0sIHZtLCBjYik7XG59XG5cbi8qKlxuICogQXBwbHkgdHJhbnNpdGlvbnMgd2l0aCBhbiBvcGVyYXRpb24gY2FsbGJhY2suXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtOdW1iZXJ9IGRpcmVjdGlvblxuICogICAgICAgICAgICAgICAgICAxOiBlbnRlclxuICogICAgICAgICAgICAgICAgIC0xOiBsZWF2ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSB0aGUgYWN0dWFsIERPTSBvcGVyYXRpb25cbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbmZ1bmN0aW9uIGFwcGx5VHJhbnNpdGlvbihlbCwgZGlyZWN0aW9uLCBvcCwgdm0sIGNiKSB7XG4gIHZhciB0cmFuc2l0aW9uID0gZWwuX192X3RyYW5zO1xuICBpZiAoIXRyYW5zaXRpb24gfHxcbiAgLy8gc2tpcCBpZiB0aGVyZSBhcmUgbm8ganMgaG9va3MgYW5kIENTUyB0cmFuc2l0aW9uIGlzXG4gIC8vIG5vdCBzdXBwb3J0ZWRcbiAgIXRyYW5zaXRpb24uaG9va3MgJiYgIXRyYW5zaXRpb25FbmRFdmVudCB8fFxuICAvLyBza2lwIHRyYW5zaXRpb25zIGZvciBpbml0aWFsIGNvbXBpbGVcbiAgIXZtLl9pc0NvbXBpbGVkIHx8XG4gIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBtYW5pcHVsYXRlZCBieSBhIHBhcmVudCBkaXJlY3RpdmVcbiAgLy8gZHVyaW5nIHRoZSBwYXJlbnQncyBjb21waWxhdGlvbiBwaGFzZSwgc2tpcCB0aGVcbiAgLy8gYW5pbWF0aW9uLlxuICB2bS4kcGFyZW50ICYmICF2bS4kcGFyZW50Ll9pc0NvbXBpbGVkKSB7XG4gICAgb3AoKTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBhY3Rpb24gPSBkaXJlY3Rpb24gPiAwID8gJ2VudGVyJyA6ICdsZWF2ZSc7XG4gIHRyYW5zaXRpb25bYWN0aW9uXShvcCwgY2IpO1xufVxuXG52YXIgdHJhbnNpdGlvbiA9IE9iamVjdC5mcmVlemUoe1xuICBhcHBlbmRXaXRoVHJhbnNpdGlvbjogYXBwZW5kV2l0aFRyYW5zaXRpb24sXG4gIGJlZm9yZVdpdGhUcmFuc2l0aW9uOiBiZWZvcmVXaXRoVHJhbnNpdGlvbixcbiAgcmVtb3ZlV2l0aFRyYW5zaXRpb246IHJlbW92ZVdpdGhUcmFuc2l0aW9uLFxuICBhcHBseVRyYW5zaXRpb246IGFwcGx5VHJhbnNpdGlvblxufSk7XG5cbi8qKlxuICogUXVlcnkgYW4gZWxlbWVudCBzZWxlY3RvciBpZiBpdCdzIG5vdCBhbiBlbGVtZW50IGFscmVhZHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge0VsZW1lbnR9XG4gKi9cblxuZnVuY3Rpb24gcXVlcnkoZWwpIHtcbiAgaWYgKHR5cGVvZiBlbCA9PT0gJ3N0cmluZycpIHtcbiAgICB2YXIgc2VsZWN0b3IgPSBlbDtcbiAgICBlbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWwpO1xuICAgIGlmICghZWwpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignQ2Fubm90IGZpbmQgZWxlbWVudDogJyArIHNlbGVjdG9yKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGVsO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGEgbm9kZSBpcyBpbiB0aGUgZG9jdW1lbnQuXG4gKiBOb3RlOiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY29udGFpbnMgc2hvdWxkIHdvcmsgaGVyZVxuICogYnV0IGFsd2F5cyByZXR1cm5zIGZhbHNlIGZvciBjb21tZW50IG5vZGVzIGluIHBoYW50b21qcyxcbiAqIG1ha2luZyB1bml0IHRlc3RzIGRpZmZpY3VsdC4gVGhpcyBpcyBmaXhlZCBieSBkb2luZyB0aGVcbiAqIGNvbnRhaW5zKCkgY2hlY2sgb24gdGhlIG5vZGUncyBwYXJlbnROb2RlIGluc3RlYWQgb2ZcbiAqIHRoZSBub2RlIGl0c2VsZi5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaW5Eb2Mobm9kZSkge1xuICBpZiAoIW5vZGUpIHJldHVybiBmYWxzZTtcbiAgdmFyIGRvYyA9IG5vZGUub3duZXJEb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG4gIHZhciBwYXJlbnQgPSBub2RlLnBhcmVudE5vZGU7XG4gIHJldHVybiBkb2MgPT09IG5vZGUgfHwgZG9jID09PSBwYXJlbnQgfHwgISEocGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSA9PT0gMSAmJiBkb2MuY29udGFpbnMocGFyZW50KSk7XG59XG5cbi8qKlxuICogR2V0IGFuZCByZW1vdmUgYW4gYXR0cmlidXRlIGZyb20gYSBub2RlLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IF9hdHRyXG4gKi9cblxuZnVuY3Rpb24gZ2V0QXR0cihub2RlLCBfYXR0cikge1xuICB2YXIgdmFsID0gbm9kZS5nZXRBdHRyaWJ1dGUoX2F0dHIpO1xuICBpZiAodmFsICE9PSBudWxsKSB7XG4gICAgbm9kZS5yZW1vdmVBdHRyaWJ1dGUoX2F0dHIpO1xuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogR2V0IGFuIGF0dHJpYnV0ZSB3aXRoIGNvbG9uIG9yIHYtYmluZDogcHJlZml4LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge1N0cmluZ3xudWxsfVxuICovXG5cbmZ1bmN0aW9uIGdldEJpbmRBdHRyKG5vZGUsIG5hbWUpIHtcbiAgdmFyIHZhbCA9IGdldEF0dHIobm9kZSwgJzonICsgbmFtZSk7XG4gIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICB2YWwgPSBnZXRBdHRyKG5vZGUsICd2LWJpbmQ6JyArIG5hbWUpO1xuICB9XG4gIHJldHVybiB2YWw7XG59XG5cbi8qKlxuICogQ2hlY2sgdGhlIHByZXNlbmNlIG9mIGEgYmluZCBhdHRyaWJ1dGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBoYXNCaW5kQXR0cihub2RlLCBuYW1lKSB7XG4gIHJldHVybiBub2RlLmhhc0F0dHJpYnV0ZShuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgnOicgKyBuYW1lKSB8fCBub2RlLmhhc0F0dHJpYnV0ZSgndi1iaW5kOicgKyBuYW1lKTtcbn1cblxuLyoqXG4gKiBJbnNlcnQgZWwgYmVmb3JlIHRhcmdldFxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7RWxlbWVudH0gdGFyZ2V0XG4gKi9cblxuZnVuY3Rpb24gYmVmb3JlKGVsLCB0YXJnZXQpIHtcbiAgdGFyZ2V0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGVsLCB0YXJnZXQpO1xufVxuXG4vKipcbiAqIEluc2VydCBlbCBhZnRlciB0YXJnZXRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICovXG5cbmZ1bmN0aW9uIGFmdGVyKGVsLCB0YXJnZXQpIHtcbiAgaWYgKHRhcmdldC5uZXh0U2libGluZykge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0Lm5leHRTaWJsaW5nKTtcbiAgfSBlbHNlIHtcbiAgICB0YXJnZXQucGFyZW50Tm9kZS5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbn1cblxuLyoqXG4gKiBSZW1vdmUgZWwgZnJvbSBET01cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKi9cblxuZnVuY3Rpb24gcmVtb3ZlKGVsKSB7XG4gIGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO1xufVxuXG4vKipcbiAqIFByZXBlbmQgZWwgdG8gdGFyZ2V0XG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtFbGVtZW50fSB0YXJnZXRcbiAqL1xuXG5mdW5jdGlvbiBwcmVwZW5kKGVsLCB0YXJnZXQpIHtcbiAgaWYgKHRhcmdldC5maXJzdENoaWxkKSB7XG4gICAgYmVmb3JlKGVsLCB0YXJnZXQuZmlyc3RDaGlsZCk7XG4gIH0gZWxzZSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlcGxhY2UgdGFyZ2V0IHdpdGggZWxcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICovXG5cbmZ1bmN0aW9uIHJlcGxhY2UodGFyZ2V0LCBlbCkge1xuICB2YXIgcGFyZW50ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gIGlmIChwYXJlbnQpIHtcbiAgICBwYXJlbnQucmVwbGFjZUNoaWxkKGVsLCB0YXJnZXQpO1xuICB9XG59XG5cbi8qKlxuICogQWRkIGV2ZW50IGxpc3RlbmVyIHNob3J0aGFuZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZXZlbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuICovXG5cbmZ1bmN0aW9uIG9uKGVsLCBldmVudCwgY2IsIHVzZUNhcHR1cmUpIHtcbiAgZWwuYWRkRXZlbnRMaXN0ZW5lcihldmVudCwgY2IsIHVzZUNhcHR1cmUpO1xufVxuXG4vKipcbiAqIFJlbW92ZSBldmVudCBsaXN0ZW5lciBzaG9ydGhhbmQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYlxuICovXG5cbmZ1bmN0aW9uIG9mZihlbCwgZXZlbnQsIGNiKSB7XG4gIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnQsIGNiKTtcbn1cblxuLyoqXG4gKiBGb3IgSUU5IGNvbXBhdDogd2hlbiBib3RoIGNsYXNzIGFuZCA6Y2xhc3MgYXJlIHByZXNlbnRcbiAqIGdldEF0dHJpYnV0ZSgnY2xhc3MnKSByZXR1cm5zIHdyb25nIHZhbHVlLi4uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGdldENsYXNzKGVsKSB7XG4gIHZhciBjbGFzc25hbWUgPSBlbC5jbGFzc05hbWU7XG4gIGlmICh0eXBlb2YgY2xhc3NuYW1lID09PSAnb2JqZWN0Jykge1xuICAgIGNsYXNzbmFtZSA9IGNsYXNzbmFtZS5iYXNlVmFsIHx8ICcnO1xuICB9XG4gIHJldHVybiBjbGFzc25hbWU7XG59XG5cbi8qKlxuICogSW4gSUU5LCBzZXRBdHRyaWJ1dGUoJ2NsYXNzJykgd2lsbCByZXN1bHQgaW4gZW1wdHkgY2xhc3NcbiAqIGlmIHRoZSBlbGVtZW50IGFsc28gaGFzIHRoZSA6Y2xhc3MgYXR0cmlidXRlOyBIb3dldmVyIGluXG4gKiBQaGFudG9tSlMsIHNldHRpbmcgYGNsYXNzTmFtZWAgZG9lcyBub3Qgd29yayBvbiBTVkcgZWxlbWVudHMuLi5cbiAqIFNvIHdlIGhhdmUgdG8gZG8gYSBjb25kaXRpb25hbCBjaGVjayBoZXJlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAqL1xuXG5mdW5jdGlvbiBzZXRDbGFzcyhlbCwgY2xzKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAoaXNJRTkgJiYgIS9zdmckLy50ZXN0KGVsLm5hbWVzcGFjZVVSSSkpIHtcbiAgICBlbC5jbGFzc05hbWUgPSBjbHM7XG4gIH0gZWxzZSB7XG4gICAgZWwuc2V0QXR0cmlidXRlKCdjbGFzcycsIGNscyk7XG4gIH1cbn1cblxuLyoqXG4gKiBBZGQgY2xhc3Mgd2l0aCBjb21wYXRpYmlsaXR5IGZvciBJRSAmIFNWR1xuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBjbHNcbiAqL1xuXG5mdW5jdGlvbiBhZGRDbGFzcyhlbCwgY2xzKSB7XG4gIGlmIChlbC5jbGFzc0xpc3QpIHtcbiAgICBlbC5jbGFzc0xpc3QuYWRkKGNscyk7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGN1ciA9ICcgJyArIGdldENsYXNzKGVsKSArICcgJztcbiAgICBpZiAoY3VyLmluZGV4T2YoJyAnICsgY2xzICsgJyAnKSA8IDApIHtcbiAgICAgIHNldENsYXNzKGVsLCAoY3VyICsgY2xzKS50cmltKCkpO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBjbGFzcyB3aXRoIGNvbXBhdGliaWxpdHkgZm9yIElFICYgU1ZHXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGNsc1xuICovXG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGVsLCBjbHMpIHtcbiAgaWYgKGVsLmNsYXNzTGlzdCkge1xuICAgIGVsLmNsYXNzTGlzdC5yZW1vdmUoY2xzKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgY3VyID0gJyAnICsgZ2V0Q2xhc3MoZWwpICsgJyAnO1xuICAgIHZhciB0YXIgPSAnICcgKyBjbHMgKyAnICc7XG4gICAgd2hpbGUgKGN1ci5pbmRleE9mKHRhcikgPj0gMCkge1xuICAgICAgY3VyID0gY3VyLnJlcGxhY2UodGFyLCAnICcpO1xuICAgIH1cbiAgICBzZXRDbGFzcyhlbCwgY3VyLnRyaW0oKSk7XG4gIH1cbiAgaWYgKCFlbC5jbGFzc05hbWUpIHtcbiAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2NsYXNzJyk7XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRyYWN0IHJhdyBjb250ZW50IGluc2lkZSBhbiBlbGVtZW50IGludG8gYSB0ZW1wb3JhcnlcbiAqIGNvbnRhaW5lciBkaXZcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGFzRnJhZ21lbnRcbiAqIEByZXR1cm4ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0Q29udGVudChlbCwgYXNGcmFnbWVudCkge1xuICB2YXIgY2hpbGQ7XG4gIHZhciByYXdDb250ZW50O1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGlzVGVtcGxhdGUoZWwpICYmIGlzRnJhZ21lbnQoZWwuY29udGVudCkpIHtcbiAgICBlbCA9IGVsLmNvbnRlbnQ7XG4gIH1cbiAgaWYgKGVsLmhhc0NoaWxkTm9kZXMoKSkge1xuICAgIHRyaW1Ob2RlKGVsKTtcbiAgICByYXdDb250ZW50ID0gYXNGcmFnbWVudCA/IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSA6IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgd2hpbGUgKGNoaWxkID0gZWwuZmlyc3RDaGlsZCkge1xuICAgICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgICAgcmF3Q29udGVudC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9XG4gIHJldHVybiByYXdDb250ZW50O1xufVxuXG4vKipcbiAqIFRyaW0gcG9zc2libGUgZW1wdHkgaGVhZC90YWlsIHRleHQgYW5kIGNvbW1lbnRcbiAqIG5vZGVzIGluc2lkZSBhIHBhcmVudC5cbiAqXG4gKiBAcGFyYW0ge05vZGV9IG5vZGVcbiAqL1xuXG5mdW5jdGlvbiB0cmltTm9kZShub2RlKSB7XG4gIHZhciBjaGlsZDtcbiAgLyogZXNsaW50LWRpc2FibGUgbm8tc2VxdWVuY2VzICovXG4gIHdoaWxlICgoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgfVxuICB3aGlsZSAoKGNoaWxkID0gbm9kZS5sYXN0Q2hpbGQsIGlzVHJpbW1hYmxlKGNoaWxkKSkpIHtcbiAgICBub2RlLnJlbW92ZUNoaWxkKGNoaWxkKTtcbiAgfVxuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXNlcXVlbmNlcyAqL1xufVxuXG5mdW5jdGlvbiBpc1RyaW1tYWJsZShub2RlKSB7XG4gIHJldHVybiBub2RlICYmIChub2RlLm5vZGVUeXBlID09PSAzICYmICFub2RlLmRhdGEudHJpbSgpIHx8IG5vZGUubm9kZVR5cGUgPT09IDgpO1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSB0ZW1wbGF0ZSB0YWcuXG4gKiBOb3RlIGlmIHRoZSB0ZW1wbGF0ZSBhcHBlYXJzIGluc2lkZSBhbiBTVkcgaXRzIHRhZ05hbWVcbiAqIHdpbGwgYmUgaW4gbG93ZXJjYXNlLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqL1xuXG5mdW5jdGlvbiBpc1RlbXBsYXRlKGVsKSB7XG4gIHJldHVybiBlbC50YWdOYW1lICYmIGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ3RlbXBsYXRlJztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYW4gXCJhbmNob3JcIiBmb3IgcGVyZm9ybWluZyBkb20gaW5zZXJ0aW9uL3JlbW92YWxzLlxuICogVGhpcyBpcyB1c2VkIGluIGEgbnVtYmVyIG9mIHNjZW5hcmlvczpcbiAqIC0gZnJhZ21lbnQgaW5zdGFuY2VcbiAqIC0gdi1odG1sXG4gKiAtIHYtaWZcbiAqIC0gdi1mb3JcbiAqIC0gY29tcG9uZW50XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGNvbnRlbnRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcGVyc2lzdCAtIElFIHRyYXNoZXMgZW1wdHkgdGV4dE5vZGVzIG9uXG4gKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbG9uZU5vZGUodHJ1ZSksIHNvIGluIGNlcnRhaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2VzIHRoZSBhbmNob3IgbmVlZHMgdG8gYmVcbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vbi1lbXB0eSB0byBiZSBwZXJzaXN0ZWQgaW5cbiAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlcy5cbiAqIEByZXR1cm4ge0NvbW1lbnR8VGV4dH1cbiAqL1xuXG5mdW5jdGlvbiBjcmVhdGVBbmNob3IoY29udGVudCwgcGVyc2lzdCkge1xuICB2YXIgYW5jaG9yID0gY29uZmlnLmRlYnVnID8gZG9jdW1lbnQuY3JlYXRlQ29tbWVudChjb250ZW50KSA6IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHBlcnNpc3QgPyAnICcgOiAnJyk7XG4gIGFuY2hvci5fX3ZfYW5jaG9yID0gdHJ1ZTtcbiAgcmV0dXJuIGFuY2hvcjtcbn1cblxuLyoqXG4gKiBGaW5kIGEgY29tcG9uZW50IHJlZiBhdHRyaWJ1dGUgdGhhdCBzdGFydHMgd2l0aCAkLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gbm9kZVxuICogQHJldHVybiB7U3RyaW5nfHVuZGVmaW5lZH1cbiAqL1xuXG52YXIgcmVmUkUgPSAvXnYtcmVmOi87XG5cbmZ1bmN0aW9uIGZpbmRSZWYobm9kZSkge1xuICBpZiAobm9kZS5oYXNBdHRyaWJ1dGVzKCkpIHtcbiAgICB2YXIgYXR0cnMgPSBub2RlLmF0dHJpYnV0ZXM7XG4gICAgZm9yICh2YXIgaSA9IDAsIGwgPSBhdHRycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBuYW1lID0gYXR0cnNbaV0ubmFtZTtcbiAgICAgIGlmIChyZWZSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIHJldHVybiBjYW1lbGl6ZShuYW1lLnJlcGxhY2UocmVmUkUsICcnKSk7XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogTWFwIGEgZnVuY3Rpb24gdG8gYSByYW5nZSBvZiBub2RlcyAuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge05vZGV9IGVuZFxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3BcbiAqL1xuXG5mdW5jdGlvbiBtYXBOb2RlUmFuZ2Uobm9kZSwgZW5kLCBvcCkge1xuICB2YXIgbmV4dDtcbiAgd2hpbGUgKG5vZGUgIT09IGVuZCkge1xuICAgIG5leHQgPSBub2RlLm5leHRTaWJsaW5nO1xuICAgIG9wKG5vZGUpO1xuICAgIG5vZGUgPSBuZXh0O1xuICB9XG4gIG9wKGVuZCk7XG59XG5cbi8qKlxuICogUmVtb3ZlIGEgcmFuZ2Ugb2Ygbm9kZXMgd2l0aCB0cmFuc2l0aW9uLCBzdG9yZVxuICogdGhlIG5vZGVzIGluIGEgZnJhZ21lbnQgd2l0aCBjb3JyZWN0IG9yZGVyaW5nLFxuICogYW5kIGNhbGwgY2FsbGJhY2sgd2hlbiBkb25lLlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gc3RhcnRcbiAqIEBwYXJhbSB7Tm9kZX0gZW5kXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVOb2RlUmFuZ2Uoc3RhcnQsIGVuZCwgdm0sIGZyYWcsIGNiKSB7XG4gIHZhciBkb25lID0gZmFsc2U7XG4gIHZhciByZW1vdmVkID0gMDtcbiAgdmFyIG5vZGVzID0gW107XG4gIG1hcE5vZGVSYW5nZShzdGFydCwgZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIGlmIChub2RlID09PSBlbmQpIGRvbmUgPSB0cnVlO1xuICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgcmVtb3ZlV2l0aFRyYW5zaXRpb24obm9kZSwgdm0sIG9uUmVtb3ZlZCk7XG4gIH0pO1xuICBmdW5jdGlvbiBvblJlbW92ZWQoKSB7XG4gICAgcmVtb3ZlZCsrO1xuICAgIGlmIChkb25lICYmIHJlbW92ZWQgPj0gbm9kZXMubGVuZ3RoKSB7XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG5vZGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZXNbaV0pO1xuICAgICAgfVxuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIG5vZGUgaXMgYSBEb2N1bWVudEZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc0ZyYWdtZW50KG5vZGUpIHtcbiAgcmV0dXJuIG5vZGUgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMTE7XG59XG5cbi8qKlxuICogR2V0IG91dGVySFRNTCBvZiBlbGVtZW50cywgdGFraW5nIGNhcmVcbiAqIG9mIFNWRyBlbGVtZW50cyBpbiBJRSBhcyB3ZWxsLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBnZXRPdXRlckhUTUwoZWwpIHtcbiAgaWYgKGVsLm91dGVySFRNTCkge1xuICAgIHJldHVybiBlbC5vdXRlckhUTUw7XG4gIH0gZWxzZSB7XG4gICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGNvbnRhaW5lci5hcHBlbmRDaGlsZChlbC5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgIHJldHVybiBjb250YWluZXIuaW5uZXJIVE1MO1xuICB9XG59XG5cbnZhciBjb21tb25UYWdSRSA9IC9eKGRpdnxwfHNwYW58aW1nfGF8YnxpfGJyfHVsfG9sfGxpfGgxfGgyfGgzfGg0fGg1fGg2fGNvZGV8cHJlfHRhYmxlfHRofHRkfHRyfGZvcm18bGFiZWx8aW5wdXR8c2VsZWN0fG9wdGlvbnxuYXZ8YXJ0aWNsZXxzZWN0aW9ufGhlYWRlcnxmb290ZXIpJC9pO1xudmFyIHJlc2VydmVkVGFnUkUgPSAvXihzbG90fHBhcnRpYWx8Y29tcG9uZW50KSQvaTtcblxudmFyIGlzVW5rbm93bkVsZW1lbnQgPSB1bmRlZmluZWQ7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICBpc1Vua25vd25FbGVtZW50ID0gZnVuY3Rpb24gKGVsLCB0YWcpIHtcbiAgICBpZiAodGFnLmluZGV4T2YoJy0nKSA+IC0xKSB7XG4gICAgICAvLyBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yODIxMDM2NC8xMDcwMjQ0XG4gICAgICByZXR1cm4gZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQgfHwgZWwuY29uc3RydWN0b3IgPT09IHdpbmRvdy5IVE1MRWxlbWVudDtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuICgvSFRNTFVua25vd25FbGVtZW50Ly50ZXN0KGVsLnRvU3RyaW5nKCkpICYmXG4gICAgICAgIC8vIENocm9tZSByZXR1cm5zIHVua25vd24gZm9yIHNldmVyYWwgSFRNTDUgZWxlbWVudHMuXG4gICAgICAgIC8vIGh0dHBzOi8vY29kZS5nb29nbGUuY29tL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01NDA1MjZcbiAgICAgICAgLy8gRmlyZWZveCByZXR1cm5zIHVua25vd24gZm9yIHNvbWUgXCJJbnRlcmFjdGl2ZSBlbGVtZW50cy5cIlxuICAgICAgICAhL14oZGF0YXx0aW1lfHJ0Y3xyYnxkZXRhaWxzfGRpYWxvZ3xzdW1tYXJ5KSQvLnRlc3QodGFnKVxuICAgICAgKTtcbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgaWYgYW4gZWxlbWVudCBpcyBhIGNvbXBvbmVudCwgaWYgeWVzIHJldHVybiBpdHNcbiAqIGNvbXBvbmVudCBpZC5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7T2JqZWN0fHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBjaGVja0NvbXBvbmVudEF0dHIoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgdmFyIGhhc0F0dHJzID0gZWwuaGFzQXR0cmlidXRlcygpO1xuICBpZiAoIWNvbW1vblRhZ1JFLnRlc3QodGFnKSAmJiAhcmVzZXJ2ZWRUYWdSRS50ZXN0KHRhZykpIHtcbiAgICBpZiAocmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdjb21wb25lbnRzJywgdGFnKSkge1xuICAgICAgcmV0dXJuIHsgaWQ6IHRhZyB9O1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgaXMgPSBoYXNBdHRycyAmJiBnZXRJc0JpbmRpbmcoZWwsIG9wdGlvbnMpO1xuICAgICAgaWYgKGlzKSB7XG4gICAgICAgIHJldHVybiBpcztcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB2YXIgZXhwZWN0ZWRUYWcgPSBvcHRpb25zLl9jb21wb25lbnROYW1lTWFwICYmIG9wdGlvbnMuX2NvbXBvbmVudE5hbWVNYXBbdGFnXTtcbiAgICAgICAgaWYgKGV4cGVjdGVkVGFnKSB7XG4gICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtICcgKyAnZGlkIHlvdSBtZWFuIDwnICsgZXhwZWN0ZWRUYWcgKyAnPj8gJyArICdIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSBrZWJhYi1jYXNlIGluIHRlbXBsYXRlcy4nKTtcbiAgICAgICAgfSBlbHNlIGlmIChpc1Vua25vd25FbGVtZW50KGVsLCB0YWcpKSB7XG4gICAgICAgICAgd2FybignVW5rbm93biBjdXN0b20gZWxlbWVudDogPCcgKyB0YWcgKyAnPiAtIGRpZCB5b3UgJyArICdyZWdpc3RlciB0aGUgY29tcG9uZW50IGNvcnJlY3RseT8gRm9yIHJlY3Vyc2l2ZSBjb21wb25lbnRzLCAnICsgJ21ha2Ugc3VyZSB0byBwcm92aWRlIHRoZSBcIm5hbWVcIiBvcHRpb24uJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaGFzQXR0cnMpIHtcbiAgICByZXR1cm4gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBcImlzXCIgYmluZGluZyBmcm9tIGFuIGVsZW1lbnQuXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge09iamVjdHx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gZ2V0SXNCaW5kaW5nKGVsLCBvcHRpb25zKSB7XG4gIC8vIGR5bmFtaWMgc3ludGF4XG4gIHZhciBleHAgPSBlbC5nZXRBdHRyaWJ1dGUoJ2lzJyk7XG4gIGlmIChleHAgIT0gbnVsbCkge1xuICAgIGlmIChyZXNvbHZlQXNzZXQob3B0aW9ucywgJ2NvbXBvbmVudHMnLCBleHApKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgICByZXR1cm4geyBpZDogZXhwIH07XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGV4cCA9IGdldEJpbmRBdHRyKGVsLCAnaXMnKTtcbiAgICBpZiAoZXhwICE9IG51bGwpIHtcbiAgICAgIHJldHVybiB7IGlkOiBleHAsIGR5bmFtaWM6IHRydWUgfTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBPcHRpb24gb3ZlcndyaXRpbmcgc3RyYXRlZ2llcyBhcmUgZnVuY3Rpb25zIHRoYXQgaGFuZGxlXG4gKiBob3cgdG8gbWVyZ2UgYSBwYXJlbnQgb3B0aW9uIHZhbHVlIGFuZCBhIGNoaWxkIG9wdGlvblxuICogdmFsdWUgaW50byB0aGUgZmluYWwgdmFsdWUuXG4gKlxuICogQWxsIHN0cmF0ZWd5IGZ1bmN0aW9ucyBmb2xsb3cgdGhlIHNhbWUgc2lnbmF0dXJlOlxuICpcbiAqIEBwYXJhbSB7Kn0gcGFyZW50VmFsXG4gKiBAcGFyYW0geyp9IGNoaWxkVmFsXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICovXG5cbnZhciBzdHJhdHMgPSBjb25maWcub3B0aW9uTWVyZ2VTdHJhdGVnaWVzID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuLyoqXG4gKiBIZWxwZXIgdGhhdCByZWN1cnNpdmVseSBtZXJnZXMgdHdvIGRhdGEgb2JqZWN0cyB0b2dldGhlci5cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZURhdGEodG8sIGZyb20pIHtcbiAgdmFyIGtleSwgdG9WYWwsIGZyb21WYWw7XG4gIGZvciAoa2V5IGluIGZyb20pIHtcbiAgICB0b1ZhbCA9IHRvW2tleV07XG4gICAgZnJvbVZhbCA9IGZyb21ba2V5XTtcbiAgICBpZiAoIWhhc093bih0bywga2V5KSkge1xuICAgICAgc2V0KHRvLCBrZXksIGZyb21WYWwpO1xuICAgIH0gZWxzZSBpZiAoaXNPYmplY3QodG9WYWwpICYmIGlzT2JqZWN0KGZyb21WYWwpKSB7XG4gICAgICBtZXJnZURhdGEodG9WYWwsIGZyb21WYWwpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gdG87XG59XG5cbi8qKlxuICogRGF0YVxuICovXG5cbnN0cmF0cy5kYXRhID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG4gIGlmICghdm0pIHtcbiAgICAvLyBpbiBhIFZ1ZS5leHRlbmQgbWVyZ2UsIGJvdGggc2hvdWxkIGJlIGZ1bmN0aW9uc1xuICAgIGlmICghY2hpbGRWYWwpIHtcbiAgICAgIHJldHVybiBwYXJlbnRWYWw7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgY2hpbGRWYWwgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignVGhlIFwiZGF0YVwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG4gICAgICByZXR1cm4gcGFyZW50VmFsO1xuICAgIH1cbiAgICBpZiAoIXBhcmVudFZhbCkge1xuICAgICAgcmV0dXJuIGNoaWxkVmFsO1xuICAgIH1cbiAgICAvLyB3aGVuIHBhcmVudFZhbCAmIGNoaWxkVmFsIGFyZSBib3RoIHByZXNlbnQsXG4gICAgLy8gd2UgbmVlZCB0byByZXR1cm4gYSBmdW5jdGlvbiB0aGF0IHJldHVybnMgdGhlXG4gICAgLy8gbWVyZ2VkIHJlc3VsdCBvZiBib3RoIGZ1bmN0aW9ucy4uLiBubyBuZWVkIHRvXG4gICAgLy8gY2hlY2sgaWYgcGFyZW50VmFsIGlzIGEgZnVuY3Rpb24gaGVyZSBiZWNhdXNlXG4gICAgLy8gaXQgaGFzIHRvIGJlIGEgZnVuY3Rpb24gdG8gcGFzcyBwcmV2aW91cyBtZXJnZXMuXG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZERhdGFGbigpIHtcbiAgICAgIHJldHVybiBtZXJnZURhdGEoY2hpbGRWYWwuY2FsbCh0aGlzKSwgcGFyZW50VmFsLmNhbGwodGhpcykpO1xuICAgIH07XG4gIH0gZWxzZSBpZiAocGFyZW50VmFsIHx8IGNoaWxkVmFsKSB7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIG1lcmdlZEluc3RhbmNlRGF0YUZuKCkge1xuICAgICAgLy8gaW5zdGFuY2UgbWVyZ2VcbiAgICAgIHZhciBpbnN0YW5jZURhdGEgPSB0eXBlb2YgY2hpbGRWYWwgPT09ICdmdW5jdGlvbicgPyBjaGlsZFZhbC5jYWxsKHZtKSA6IGNoaWxkVmFsO1xuICAgICAgdmFyIGRlZmF1bHREYXRhID0gdHlwZW9mIHBhcmVudFZhbCA9PT0gJ2Z1bmN0aW9uJyA/IHBhcmVudFZhbC5jYWxsKHZtKSA6IHVuZGVmaW5lZDtcbiAgICAgIGlmIChpbnN0YW5jZURhdGEpIHtcbiAgICAgICAgcmV0dXJuIG1lcmdlRGF0YShpbnN0YW5jZURhdGEsIGRlZmF1bHREYXRhKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBkZWZhdWx0RGF0YTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59O1xuXG4vKipcbiAqIEVsXG4gKi9cblxuc3RyYXRzLmVsID0gZnVuY3Rpb24gKHBhcmVudFZhbCwgY2hpbGRWYWwsIHZtKSB7XG4gIGlmICghdm0gJiYgY2hpbGRWYWwgJiYgdHlwZW9mIGNoaWxkVmFsICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdUaGUgXCJlbFwiIG9wdGlvbiBzaG91bGQgYmUgYSBmdW5jdGlvbiAnICsgJ3RoYXQgcmV0dXJucyBhIHBlci1pbnN0YW5jZSB2YWx1ZSBpbiBjb21wb25lbnQgJyArICdkZWZpbml0aW9ucy4nLCB2bSk7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciByZXQgPSBjaGlsZFZhbCB8fCBwYXJlbnRWYWw7XG4gIC8vIGludm9rZSB0aGUgZWxlbWVudCBmYWN0b3J5IGlmIHRoaXMgaXMgaW5zdGFuY2UgbWVyZ2VcbiAgcmV0dXJuIHZtICYmIHR5cGVvZiByZXQgPT09ICdmdW5jdGlvbicgPyByZXQuY2FsbCh2bSkgOiByZXQ7XG59O1xuXG4vKipcbiAqIEhvb2tzIGFuZCBwYXJhbSBhdHRyaWJ1dGVzIGFyZSBtZXJnZWQgYXMgYXJyYXlzLlxuICovXG5cbnN0cmF0cy5pbml0ID0gc3RyYXRzLmNyZWF0ZWQgPSBzdHJhdHMucmVhZHkgPSBzdHJhdHMuYXR0YWNoZWQgPSBzdHJhdHMuZGV0YWNoZWQgPSBzdHJhdHMuYmVmb3JlQ29tcGlsZSA9IHN0cmF0cy5jb21waWxlZCA9IHN0cmF0cy5iZWZvcmVEZXN0cm95ID0gc3RyYXRzLmRlc3Ryb3llZCA9IHN0cmF0cy5hY3RpdmF0ZSA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbCA/IHBhcmVudFZhbCA/IHBhcmVudFZhbC5jb25jYXQoY2hpbGRWYWwpIDogaXNBcnJheShjaGlsZFZhbCkgPyBjaGlsZFZhbCA6IFtjaGlsZFZhbF0gOiBwYXJlbnRWYWw7XG59O1xuXG4vKipcbiAqIEFzc2V0c1xuICpcbiAqIFdoZW4gYSB2bSBpcyBwcmVzZW50IChpbnN0YW5jZSBjcmVhdGlvbiksIHdlIG5lZWQgdG8gZG9cbiAqIGEgdGhyZWUtd2F5IG1lcmdlIGJldHdlZW4gY29uc3RydWN0b3Igb3B0aW9ucywgaW5zdGFuY2VcbiAqIG9wdGlvbnMgYW5kIHBhcmVudCBvcHRpb25zLlxuICovXG5cbmZ1bmN0aW9uIG1lcmdlQXNzZXRzKHBhcmVudFZhbCwgY2hpbGRWYWwpIHtcbiAgdmFyIHJlcyA9IE9iamVjdC5jcmVhdGUocGFyZW50VmFsIHx8IG51bGwpO1xuICByZXR1cm4gY2hpbGRWYWwgPyBleHRlbmQocmVzLCBndWFyZEFycmF5QXNzZXRzKGNoaWxkVmFsKSkgOiByZXM7XG59XG5cbmNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gIHN0cmF0c1t0eXBlICsgJ3MnXSA9IG1lcmdlQXNzZXRzO1xufSk7XG5cbi8qKlxuICogRXZlbnRzICYgV2F0Y2hlcnMuXG4gKlxuICogRXZlbnRzICYgd2F0Y2hlcnMgaGFzaGVzIHNob3VsZCBub3Qgb3ZlcndyaXRlIG9uZVxuICogYW5vdGhlciwgc28gd2UgbWVyZ2UgdGhlbSBhcyBhcnJheXMuXG4gKi9cblxuc3RyYXRzLndhdGNoID0gc3RyYXRzLmV2ZW50cyA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG4gIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG4gIHZhciByZXQgPSB7fTtcbiAgZXh0ZW5kKHJldCwgcGFyZW50VmFsKTtcbiAgZm9yICh2YXIga2V5IGluIGNoaWxkVmFsKSB7XG4gICAgdmFyIHBhcmVudCA9IHJldFtrZXldO1xuICAgIHZhciBjaGlsZCA9IGNoaWxkVmFsW2tleV07XG4gICAgaWYgKHBhcmVudCAmJiAhaXNBcnJheShwYXJlbnQpKSB7XG4gICAgICBwYXJlbnQgPSBbcGFyZW50XTtcbiAgICB9XG4gICAgcmV0W2tleV0gPSBwYXJlbnQgPyBwYXJlbnQuY29uY2F0KGNoaWxkKSA6IFtjaGlsZF07XG4gIH1cbiAgcmV0dXJuIHJldDtcbn07XG5cbi8qKlxuICogT3RoZXIgb2JqZWN0IGhhc2hlcy5cbiAqL1xuXG5zdHJhdHMucHJvcHMgPSBzdHJhdHMubWV0aG9kcyA9IHN0cmF0cy5jb21wdXRlZCA9IGZ1bmN0aW9uIChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIGlmICghY2hpbGRWYWwpIHJldHVybiBwYXJlbnRWYWw7XG4gIGlmICghcGFyZW50VmFsKSByZXR1cm4gY2hpbGRWYWw7XG4gIHZhciByZXQgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICBleHRlbmQocmV0LCBwYXJlbnRWYWwpO1xuICBleHRlbmQocmV0LCBjaGlsZFZhbCk7XG4gIHJldHVybiByZXQ7XG59O1xuXG4vKipcbiAqIERlZmF1bHQgc3RyYXRlZ3kuXG4gKi9cblxudmFyIGRlZmF1bHRTdHJhdCA9IGZ1bmN0aW9uIGRlZmF1bHRTdHJhdChwYXJlbnRWYWwsIGNoaWxkVmFsKSB7XG4gIHJldHVybiBjaGlsZFZhbCA9PT0gdW5kZWZpbmVkID8gcGFyZW50VmFsIDogY2hpbGRWYWw7XG59O1xuXG4vKipcbiAqIE1ha2Ugc3VyZSBjb21wb25lbnQgb3B0aW9ucyBnZXQgY29udmVydGVkIHRvIGFjdHVhbFxuICogY29uc3RydWN0b3JzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKi9cblxuZnVuY3Rpb24gZ3VhcmRDb21wb25lbnRzKG9wdGlvbnMpIHtcbiAgaWYgKG9wdGlvbnMuY29tcG9uZW50cykge1xuICAgIHZhciBjb21wb25lbnRzID0gb3B0aW9ucy5jb21wb25lbnRzID0gZ3VhcmRBcnJheUFzc2V0cyhvcHRpb25zLmNvbXBvbmVudHMpO1xuICAgIHZhciBpZHMgPSBPYmplY3Qua2V5cyhjb21wb25lbnRzKTtcbiAgICB2YXIgZGVmO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICB2YXIgbWFwID0gb3B0aW9ucy5fY29tcG9uZW50TmFtZU1hcCA9IHt9O1xuICAgIH1cbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGlkcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBrZXkgPSBpZHNbaV07XG4gICAgICBpZiAoY29tbW9uVGFnUkUudGVzdChrZXkpIHx8IHJlc2VydmVkVGFnUkUudGVzdChrZXkpKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRG8gbm90IHVzZSBidWlsdC1pbiBvciByZXNlcnZlZCBIVE1MIGVsZW1lbnRzIGFzIGNvbXBvbmVudCAnICsgJ2lkOiAnICsga2V5KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICAvLyByZWNvcmQgYSBhbGwgbG93ZXJjYXNlIDwtPiBrZWJhYi1jYXNlIG1hcHBpbmcgZm9yXG4gICAgICAvLyBwb3NzaWJsZSBjdXN0b20gZWxlbWVudCBjYXNlIGVycm9yIHdhcm5pbmdcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIG1hcFtrZXkucmVwbGFjZSgvLS9nLCAnJykudG9Mb3dlckNhc2UoKV0gPSBoeXBoZW5hdGUoa2V5KTtcbiAgICAgIH1cbiAgICAgIGRlZiA9IGNvbXBvbmVudHNba2V5XTtcbiAgICAgIGlmIChpc1BsYWluT2JqZWN0KGRlZikpIHtcbiAgICAgICAgY29tcG9uZW50c1trZXldID0gVnVlLmV4dGVuZChkZWYpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIEVuc3VyZSBhbGwgcHJvcHMgb3B0aW9uIHN5bnRheCBhcmUgbm9ybWFsaXplZCBpbnRvIHRoZVxuICogT2JqZWN0LWJhc2VkIGZvcm1hdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGd1YXJkUHJvcHMob3B0aW9ucykge1xuICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICB2YXIgaSwgdmFsO1xuICBpZiAoaXNBcnJheShwcm9wcykpIHtcbiAgICBvcHRpb25zLnByb3BzID0ge307XG4gICAgaSA9IHByb3BzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICB2YWwgPSBwcm9wc1tpXTtcbiAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xuICAgICAgICBvcHRpb25zLnByb3BzW3ZhbF0gPSBudWxsO1xuICAgICAgfSBlbHNlIGlmICh2YWwubmFtZSkge1xuICAgICAgICBvcHRpb25zLnByb3BzW3ZhbC5uYW1lXSA9IHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNQbGFpbk9iamVjdChwcm9wcykpIHtcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHByb3BzKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFsID0gcHJvcHNba2V5c1tpXV07XG4gICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBwcm9wc1trZXlzW2ldXSA9IHsgdHlwZTogdmFsIH07XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogR3VhcmQgYW4gQXJyYXktZm9ybWF0IGFzc2V0cyBvcHRpb24gYW5kIGNvbnZlcnRlZCBpdFxuICogaW50byB0aGUga2V5LXZhbHVlIE9iamVjdCBmb3JtYXQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IGFzc2V0c1xuICogQHJldHVybiB7T2JqZWN0fVxuICovXG5cbmZ1bmN0aW9uIGd1YXJkQXJyYXlBc3NldHMoYXNzZXRzKSB7XG4gIGlmIChpc0FycmF5KGFzc2V0cykpIHtcbiAgICB2YXIgcmVzID0ge307XG4gICAgdmFyIGkgPSBhc3NldHMubGVuZ3RoO1xuICAgIHZhciBhc3NldDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBhc3NldCA9IGFzc2V0c1tpXTtcbiAgICAgIHZhciBpZCA9IHR5cGVvZiBhc3NldCA9PT0gJ2Z1bmN0aW9uJyA/IGFzc2V0Lm9wdGlvbnMgJiYgYXNzZXQub3B0aW9ucy5uYW1lIHx8IGFzc2V0LmlkIDogYXNzZXQubmFtZSB8fCBhc3NldC5pZDtcbiAgICAgIGlmICghaWQpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBcnJheS1zeW50YXggYXNzZXRzIG11c3QgcHJvdmlkZSBhIFwibmFtZVwiIG9yIFwiaWRcIiBmaWVsZC4nKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlc1tpZF0gPSBhc3NldDtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHJlcztcbiAgfVxuICByZXR1cm4gYXNzZXRzO1xufVxuXG4vKipcbiAqIE1lcmdlIHR3byBvcHRpb24gb2JqZWN0cyBpbnRvIGEgbmV3IG9uZS5cbiAqIENvcmUgdXRpbGl0eSB1c2VkIGluIGJvdGggaW5zdGFudGlhdGlvbiBhbmQgaW5oZXJpdGFuY2UuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHBhcmVudFxuICogQHBhcmFtIHtPYmplY3R9IGNoaWxkXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXSAtIGlmIHZtIGlzIHByZXNlbnQsIGluZGljYXRlcyB0aGlzIGlzXG4gKiAgICAgICAgICAgICAgICAgICAgIGFuIGluc3RhbnRpYXRpb24gbWVyZ2UuXG4gKi9cblxuZnVuY3Rpb24gbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGQsIHZtKSB7XG4gIGd1YXJkQ29tcG9uZW50cyhjaGlsZCk7XG4gIGd1YXJkUHJvcHMoY2hpbGQpO1xuICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgIGlmIChjaGlsZC5wcm9wc0RhdGEgJiYgIXZtKSB7XG4gICAgICB3YXJuKCdwcm9wc0RhdGEgY2FuIG9ubHkgYmUgdXNlZCBhcyBhbiBpbnN0YW50aWF0aW9uIG9wdGlvbi4nKTtcbiAgICB9XG4gIH1cbiAgdmFyIG9wdGlvbnMgPSB7fTtcbiAgdmFyIGtleTtcbiAgaWYgKGNoaWxkWydleHRlbmRzJ10pIHtcbiAgICBwYXJlbnQgPSB0eXBlb2YgY2hpbGRbJ2V4dGVuZHMnXSA9PT0gJ2Z1bmN0aW9uJyA/IG1lcmdlT3B0aW9ucyhwYXJlbnQsIGNoaWxkWydleHRlbmRzJ10ub3B0aW9ucywgdm0pIDogbWVyZ2VPcHRpb25zKHBhcmVudCwgY2hpbGRbJ2V4dGVuZHMnXSwgdm0pO1xuICB9XG4gIGlmIChjaGlsZC5taXhpbnMpIHtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNoaWxkLm1peGlucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHZhciBtaXhpbiA9IGNoaWxkLm1peGluc1tpXTtcbiAgICAgIHZhciBtaXhpbk9wdGlvbnMgPSBtaXhpbi5wcm90b3R5cGUgaW5zdGFuY2VvZiBWdWUgPyBtaXhpbi5vcHRpb25zIDogbWl4aW47XG4gICAgICBwYXJlbnQgPSBtZXJnZU9wdGlvbnMocGFyZW50LCBtaXhpbk9wdGlvbnMsIHZtKTtcbiAgICB9XG4gIH1cbiAgZm9yIChrZXkgaW4gcGFyZW50KSB7XG4gICAgbWVyZ2VGaWVsZChrZXkpO1xuICB9XG4gIGZvciAoa2V5IGluIGNoaWxkKSB7XG4gICAgaWYgKCFoYXNPd24ocGFyZW50LCBrZXkpKSB7XG4gICAgICBtZXJnZUZpZWxkKGtleSk7XG4gICAgfVxuICB9XG4gIGZ1bmN0aW9uIG1lcmdlRmllbGQoa2V5KSB7XG4gICAgdmFyIHN0cmF0ID0gc3RyYXRzW2tleV0gfHwgZGVmYXVsdFN0cmF0O1xuICAgIG9wdGlvbnNba2V5XSA9IHN0cmF0KHBhcmVudFtrZXldLCBjaGlsZFtrZXldLCB2bSwga2V5KTtcbiAgfVxuICByZXR1cm4gb3B0aW9ucztcbn1cblxuLyoqXG4gKiBSZXNvbHZlIGFuIGFzc2V0LlxuICogVGhpcyBmdW5jdGlvbiBpcyB1c2VkIGJlY2F1c2UgY2hpbGQgaW5zdGFuY2VzIG5lZWQgYWNjZXNzXG4gKiB0byBhc3NldHMgZGVmaW5lZCBpbiBpdHMgYW5jZXN0b3IgY2hhaW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2Fybk1pc3NpbmdcbiAqIEByZXR1cm4ge09iamVjdHxGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiByZXNvbHZlQXNzZXQob3B0aW9ucywgdHlwZSwgaWQsIHdhcm5NaXNzaW5nKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICBpZiAodHlwZW9mIGlkICE9PSAnc3RyaW5nJykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgYXNzZXRzID0gb3B0aW9uc1t0eXBlXTtcbiAgdmFyIGNhbWVsaXplZElkO1xuICB2YXIgcmVzID0gYXNzZXRzW2lkXSB8fFxuICAvLyBjYW1lbENhc2UgSURcbiAgYXNzZXRzW2NhbWVsaXplZElkID0gY2FtZWxpemUoaWQpXSB8fFxuICAvLyBQYXNjYWwgQ2FzZSBJRFxuICBhc3NldHNbY2FtZWxpemVkSWQuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBjYW1lbGl6ZWRJZC5zbGljZSgxKV07XG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm5NaXNzaW5nICYmICFyZXMpIHtcbiAgICB3YXJuKCdGYWlsZWQgdG8gcmVzb2x2ZSAnICsgdHlwZS5zbGljZSgwLCAtMSkgKyAnOiAnICsgaWQsIG9wdGlvbnMpO1xuICB9XG4gIHJldHVybiByZXM7XG59XG5cbnZhciB1aWQkMSA9IDA7XG5cbi8qKlxuICogQSBkZXAgaXMgYW4gb2JzZXJ2YWJsZSB0aGF0IGNhbiBoYXZlIG11bHRpcGxlXG4gKiBkaXJlY3RpdmVzIHN1YnNjcmliaW5nIHRvIGl0LlxuICpcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5mdW5jdGlvbiBEZXAoKSB7XG4gIHRoaXMuaWQgPSB1aWQkMSsrO1xuICB0aGlzLnN1YnMgPSBbXTtcbn1cblxuLy8gdGhlIGN1cnJlbnQgdGFyZ2V0IHdhdGNoZXIgYmVpbmcgZXZhbHVhdGVkLlxuLy8gdGhpcyBpcyBnbG9iYWxseSB1bmlxdWUgYmVjYXVzZSB0aGVyZSBjb3VsZCBiZSBvbmx5IG9uZVxuLy8gd2F0Y2hlciBiZWluZyBldmFsdWF0ZWQgYXQgYW55IHRpbWUuXG5EZXAudGFyZ2V0ID0gbnVsbDtcblxuLyoqXG4gKiBBZGQgYSBkaXJlY3RpdmUgc3Vic2NyaWJlci5cbiAqXG4gKiBAcGFyYW0ge0RpcmVjdGl2ZX0gc3ViXG4gKi9cblxuRGVwLnByb3RvdHlwZS5hZGRTdWIgPSBmdW5jdGlvbiAoc3ViKSB7XG4gIHRoaXMuc3Vicy5wdXNoKHN1Yik7XG59O1xuXG4vKipcbiAqIFJlbW92ZSBhIGRpcmVjdGl2ZSBzdWJzY3JpYmVyLlxuICpcbiAqIEBwYXJhbSB7RGlyZWN0aXZlfSBzdWJcbiAqL1xuXG5EZXAucHJvdG90eXBlLnJlbW92ZVN1YiA9IGZ1bmN0aW9uIChzdWIpIHtcbiAgdGhpcy5zdWJzLiRyZW1vdmUoc3ViKTtcbn07XG5cbi8qKlxuICogQWRkIHNlbGYgYXMgYSBkZXBlbmRlbmN5IHRvIHRoZSB0YXJnZXQgd2F0Y2hlci5cbiAqL1xuXG5EZXAucHJvdG90eXBlLmRlcGVuZCA9IGZ1bmN0aW9uICgpIHtcbiAgRGVwLnRhcmdldC5hZGREZXAodGhpcyk7XG59O1xuXG4vKipcbiAqIE5vdGlmeSBhbGwgc3Vic2NyaWJlcnMgb2YgYSBuZXcgdmFsdWUuXG4gKi9cblxuRGVwLnByb3RvdHlwZS5ub3RpZnkgPSBmdW5jdGlvbiAoKSB7XG4gIC8vIHN0YWJsaXplIHRoZSBzdWJzY3JpYmVyIGxpc3QgZmlyc3RcbiAgdmFyIHN1YnMgPSB0b0FycmF5KHRoaXMuc3Vicyk7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gc3Vicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBzdWJzW2ldLnVwZGF0ZSgpO1xuICB9XG59O1xuXG52YXIgYXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZTtcbnZhciBhcnJheU1ldGhvZHMgPSBPYmplY3QuY3JlYXRlKGFycmF5UHJvdG8pXG5cbi8qKlxuICogSW50ZXJjZXB0IG11dGF0aW5nIG1ldGhvZHMgYW5kIGVtaXQgZXZlbnRzXG4gKi9cblxuO1sncHVzaCcsICdwb3AnLCAnc2hpZnQnLCAndW5zaGlmdCcsICdzcGxpY2UnLCAnc29ydCcsICdyZXZlcnNlJ10uZm9yRWFjaChmdW5jdGlvbiAobWV0aG9kKSB7XG4gIC8vIGNhY2hlIG9yaWdpbmFsIG1ldGhvZFxuICB2YXIgb3JpZ2luYWwgPSBhcnJheVByb3RvW21ldGhvZF07XG4gIGRlZihhcnJheU1ldGhvZHMsIG1ldGhvZCwgZnVuY3Rpb24gbXV0YXRvcigpIHtcbiAgICAvLyBhdm9pZCBsZWFraW5nIGFyZ3VtZW50czpcbiAgICAvLyBodHRwOi8vanNwZXJmLmNvbS9jbG9zdXJlLXdpdGgtYXJndW1lbnRzXG4gICAgdmFyIGkgPSBhcmd1bWVudHMubGVuZ3RoO1xuICAgIHZhciBhcmdzID0gbmV3IEFycmF5KGkpO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGFyZ3NbaV0gPSBhcmd1bWVudHNbaV07XG4gICAgfVxuICAgIHZhciByZXN1bHQgPSBvcmlnaW5hbC5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICB2YXIgb2IgPSB0aGlzLl9fb2JfXztcbiAgICB2YXIgaW5zZXJ0ZWQ7XG4gICAgc3dpdGNoIChtZXRob2QpIHtcbiAgICAgIGNhc2UgJ3B1c2gnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3M7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndW5zaGlmdCc6XG4gICAgICAgIGluc2VydGVkID0gYXJncztcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdzcGxpY2UnOlxuICAgICAgICBpbnNlcnRlZCA9IGFyZ3Muc2xpY2UoMik7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBpZiAoaW5zZXJ0ZWQpIG9iLm9ic2VydmVBcnJheShpbnNlcnRlZCk7XG4gICAgLy8gbm90aWZ5IGNoYW5nZVxuICAgIG9iLmRlcC5ub3RpZnkoKTtcbiAgICByZXR1cm4gcmVzdWx0O1xuICB9KTtcbn0pO1xuXG4vKipcbiAqIFN3YXAgdGhlIGVsZW1lbnQgYXQgdGhlIGdpdmVuIGluZGV4IHdpdGggYSBuZXcgdmFsdWVcbiAqIGFuZCBlbWl0cyBjb3JyZXNwb25kaW5nIGV2ZW50LlxuICpcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEByZXR1cm4geyp9IC0gcmVwbGFjZWQgZWxlbWVudFxuICovXG5cbmRlZihhcnJheVByb3RvLCAnJHNldCcsIGZ1bmN0aW9uICRzZXQoaW5kZXgsIHZhbCkge1xuICBpZiAoaW5kZXggPj0gdGhpcy5sZW5ndGgpIHtcbiAgICB0aGlzLmxlbmd0aCA9IE51bWJlcihpbmRleCkgKyAxO1xuICB9XG4gIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSwgdmFsKVswXTtcbn0pO1xuXG4vKipcbiAqIENvbnZlbmllbmNlIG1ldGhvZCB0byByZW1vdmUgdGhlIGVsZW1lbnQgYXQgZ2l2ZW4gaW5kZXggb3IgdGFyZ2V0IGVsZW1lbnQgcmVmZXJlbmNlLlxuICpcbiAqIEBwYXJhbSB7Kn0gaXRlbVxuICovXG5cbmRlZihhcnJheVByb3RvLCAnJHJlbW92ZScsIGZ1bmN0aW9uICRyZW1vdmUoaXRlbSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCF0aGlzLmxlbmd0aCkgcmV0dXJuO1xuICB2YXIgaW5kZXggPSBpbmRleE9mKHRoaXMsIGl0ZW0pO1xuICBpZiAoaW5kZXggPiAtMSkge1xuICAgIHJldHVybiB0aGlzLnNwbGljZShpbmRleCwgMSk7XG4gIH1cbn0pO1xuXG52YXIgYXJyYXlLZXlzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoYXJyYXlNZXRob2RzKTtcblxuLyoqXG4gKiBCeSBkZWZhdWx0LCB3aGVuIGEgcmVhY3RpdmUgcHJvcGVydHkgaXMgc2V0LCB0aGUgbmV3IHZhbHVlIGlzXG4gKiBhbHNvIGNvbnZlcnRlZCB0byBiZWNvbWUgcmVhY3RpdmUuIEhvd2V2ZXIgaW4gY2VydGFpbiBjYXNlcywgZS5nLlxuICogdi1mb3Igc2NvcGUgYWxpYXMgYW5kIHByb3BzLCB3ZSBkb24ndCB3YW50IHRvIGZvcmNlIGNvbnZlcnNpb25cbiAqIGJlY2F1c2UgdGhlIHZhbHVlIG1heSBiZSBhIG5lc3RlZCB2YWx1ZSB1bmRlciBhIGZyb3plbiBkYXRhIHN0cnVjdHVyZS5cbiAqXG4gKiBTbyB3aGVuZXZlciB3ZSB3YW50IHRvIHNldCBhIHJlYWN0aXZlIHByb3BlcnR5IHdpdGhvdXQgZm9yY2luZ1xuICogY29udmVyc2lvbiBvbiB0aGUgbmV3IHZhbHVlLCB3ZSB3cmFwIHRoYXQgY2FsbCBpbnNpZGUgdGhpcyBmdW5jdGlvbi5cbiAqL1xuXG52YXIgc2hvdWxkQ29udmVydCA9IHRydWU7XG5cbmZ1bmN0aW9uIHdpdGhvdXRDb252ZXJzaW9uKGZuKSB7XG4gIHNob3VsZENvbnZlcnQgPSBmYWxzZTtcbiAgZm4oKTtcbiAgc2hvdWxkQ29udmVydCA9IHRydWU7XG59XG5cbi8qKlxuICogT2JzZXJ2ZXIgY2xhc3MgdGhhdCBhcmUgYXR0YWNoZWQgdG8gZWFjaCBvYnNlcnZlZFxuICogb2JqZWN0LiBPbmNlIGF0dGFjaGVkLCB0aGUgb2JzZXJ2ZXIgY29udmVydHMgdGFyZ2V0XG4gKiBvYmplY3QncyBwcm9wZXJ0eSBrZXlzIGludG8gZ2V0dGVyL3NldHRlcnMgdGhhdFxuICogY29sbGVjdCBkZXBlbmRlbmNpZXMgYW5kIGRpc3BhdGNoZXMgdXBkYXRlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE9iamVjdH0gdmFsdWVcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5cbmZ1bmN0aW9uIE9ic2VydmVyKHZhbHVlKSB7XG4gIHRoaXMudmFsdWUgPSB2YWx1ZTtcbiAgdGhpcy5kZXAgPSBuZXcgRGVwKCk7XG4gIGRlZih2YWx1ZSwgJ19fb2JfXycsIHRoaXMpO1xuICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICB2YXIgYXVnbWVudCA9IGhhc1Byb3RvID8gcHJvdG9BdWdtZW50IDogY29weUF1Z21lbnQ7XG4gICAgYXVnbWVudCh2YWx1ZSwgYXJyYXlNZXRob2RzLCBhcnJheUtleXMpO1xuICAgIHRoaXMub2JzZXJ2ZUFycmF5KHZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLndhbGsodmFsdWUpO1xuICB9XG59XG5cbi8vIEluc3RhbmNlIG1ldGhvZHNcblxuLyoqXG4gKiBXYWxrIHRocm91Z2ggZWFjaCBwcm9wZXJ0eSBhbmQgY29udmVydCB0aGVtIGludG9cbiAqIGdldHRlci9zZXR0ZXJzLiBUaGlzIG1ldGhvZCBzaG91bGQgb25seSBiZSBjYWxsZWQgd2hlblxuICogdmFsdWUgdHlwZSBpcyBPYmplY3QuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS53YWxrID0gZnVuY3Rpb24gKG9iaikge1xuICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gIGZvciAodmFyIGkgPSAwLCBsID0ga2V5cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB0aGlzLmNvbnZlcnQoa2V5c1tpXSwgb2JqW2tleXNbaV1dKTtcbiAgfVxufTtcblxuLyoqXG4gKiBPYnNlcnZlIGEgbGlzdCBvZiBBcnJheSBpdGVtcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBpdGVtc1xuICovXG5cbk9ic2VydmVyLnByb3RvdHlwZS5vYnNlcnZlQXJyYXkgPSBmdW5jdGlvbiAoaXRlbXMpIHtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBpdGVtcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBvYnNlcnZlKGl0ZW1zW2ldKTtcbiAgfVxufTtcblxuLyoqXG4gKiBDb252ZXJ0IGEgcHJvcGVydHkgaW50byBnZXR0ZXIvc2V0dGVyIHNvIHdlIGNhbiBlbWl0XG4gKiB0aGUgZXZlbnRzIHdoZW4gdGhlIHByb3BlcnR5IGlzIGFjY2Vzc2VkL2NoYW5nZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5PYnNlcnZlci5wcm90b3R5cGUuY29udmVydCA9IGZ1bmN0aW9uIChrZXksIHZhbCkge1xuICBkZWZpbmVSZWFjdGl2ZSh0aGlzLnZhbHVlLCBrZXksIHZhbCk7XG59O1xuXG4vKipcbiAqIEFkZCBhbiBvd25lciB2bSwgc28gdGhhdCB3aGVuICRzZXQvJGRlbGV0ZSBtdXRhdGlvbnNcbiAqIGhhcHBlbiB3ZSBjYW4gbm90aWZ5IG93bmVyIHZtcyB0byBwcm94eSB0aGUga2V5cyBhbmRcbiAqIGRpZ2VzdCB0aGUgd2F0Y2hlcnMuIFRoaXMgaXMgb25seSBjYWxsZWQgd2hlbiB0aGUgb2JqZWN0XG4gKiBpcyBvYnNlcnZlZCBhcyBhbiBpbnN0YW5jZSdzIHJvb3QgJGRhdGEuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLmFkZFZtID0gZnVuY3Rpb24gKHZtKSB7XG4gICh0aGlzLnZtcyB8fCAodGhpcy52bXMgPSBbXSkpLnB1c2godm0pO1xufTtcblxuLyoqXG4gKiBSZW1vdmUgYW4gb3duZXIgdm0uIFRoaXMgaXMgY2FsbGVkIHdoZW4gdGhlIG9iamVjdCBpc1xuICogc3dhcHBlZCBvdXQgYXMgYW4gaW5zdGFuY2UncyAkZGF0YSBvYmplY3QuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuT2JzZXJ2ZXIucHJvdG90eXBlLnJlbW92ZVZtID0gZnVuY3Rpb24gKHZtKSB7XG4gIHRoaXMudm1zLiRyZW1vdmUodm0pO1xufTtcblxuLy8gaGVscGVyc1xuXG4vKipcbiAqIEF1Z21lbnQgYW4gdGFyZ2V0IE9iamVjdCBvciBBcnJheSBieSBpbnRlcmNlcHRpbmdcbiAqIHRoZSBwcm90b3R5cGUgY2hhaW4gdXNpbmcgX19wcm90b19fXG4gKlxuICogQHBhcmFtIHtPYmplY3R8QXJyYXl9IHRhcmdldFxuICogQHBhcmFtIHtPYmplY3R9IHNyY1xuICovXG5cbmZ1bmN0aW9uIHByb3RvQXVnbWVudCh0YXJnZXQsIHNyYykge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1wcm90byAqL1xuICB0YXJnZXQuX19wcm90b19fID0gc3JjO1xuICAvKiBlc2xpbnQtZW5hYmxlIG5vLXByb3RvICovXG59XG5cbi8qKlxuICogQXVnbWVudCBhbiB0YXJnZXQgT2JqZWN0IG9yIEFycmF5IGJ5IGRlZmluaW5nXG4gKiBoaWRkZW4gcHJvcGVydGllcy5cbiAqXG4gKiBAcGFyYW0ge09iamVjdHxBcnJheX0gdGFyZ2V0XG4gKiBAcGFyYW0ge09iamVjdH0gcHJvdG9cbiAqL1xuXG5mdW5jdGlvbiBjb3B5QXVnbWVudCh0YXJnZXQsIHNyYywga2V5cykge1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgdmFyIGtleSA9IGtleXNbaV07XG4gICAgZGVmKHRhcmdldCwga2V5LCBzcmNba2V5XSk7XG4gIH1cbn1cblxuLyoqXG4gKiBBdHRlbXB0IHRvIGNyZWF0ZSBhbiBvYnNlcnZlciBpbnN0YW5jZSBmb3IgYSB2YWx1ZSxcbiAqIHJldHVybnMgdGhlIG5ldyBvYnNlcnZlciBpZiBzdWNjZXNzZnVsbHkgb2JzZXJ2ZWQsXG4gKiBvciB0aGUgZXhpc3Rpbmcgb2JzZXJ2ZXIgaWYgdGhlIHZhbHVlIGFscmVhZHkgaGFzIG9uZS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge1Z1ZX0gW3ZtXVxuICogQHJldHVybiB7T2JzZXJ2ZXJ8dW5kZWZpbmVkfVxuICogQHN0YXRpY1xuICovXG5cbmZ1bmN0aW9uIG9ic2VydmUodmFsdWUsIHZtKSB7XG4gIGlmICghdmFsdWUgfHwgdHlwZW9mIHZhbHVlICE9PSAnb2JqZWN0Jykge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgb2I7XG4gIGlmIChoYXNPd24odmFsdWUsICdfX29iX18nKSAmJiB2YWx1ZS5fX29iX18gaW5zdGFuY2VvZiBPYnNlcnZlcikge1xuICAgIG9iID0gdmFsdWUuX19vYl9fO1xuICB9IGVsc2UgaWYgKHNob3VsZENvbnZlcnQgJiYgKGlzQXJyYXkodmFsdWUpIHx8IGlzUGxhaW5PYmplY3QodmFsdWUpKSAmJiBPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSAmJiAhdmFsdWUuX2lzVnVlKSB7XG4gICAgb2IgPSBuZXcgT2JzZXJ2ZXIodmFsdWUpO1xuICB9XG4gIGlmIChvYiAmJiB2bSkge1xuICAgIG9iLmFkZFZtKHZtKTtcbiAgfVxuICByZXR1cm4gb2I7XG59XG5cbi8qKlxuICogRGVmaW5lIGEgcmVhY3RpdmUgcHJvcGVydHkgb24gYW4gT2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBvYmpcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gZGVmaW5lUmVhY3RpdmUob2JqLCBrZXksIHZhbCkge1xuICB2YXIgZGVwID0gbmV3IERlcCgpO1xuXG4gIHZhciBwcm9wZXJ0eSA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqLCBrZXkpO1xuICBpZiAocHJvcGVydHkgJiYgcHJvcGVydHkuY29uZmlndXJhYmxlID09PSBmYWxzZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIC8vIGNhdGVyIGZvciBwcmUtZGVmaW5lZCBnZXR0ZXIvc2V0dGVyc1xuICB2YXIgZ2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuZ2V0O1xuICB2YXIgc2V0dGVyID0gcHJvcGVydHkgJiYgcHJvcGVydHkuc2V0O1xuXG4gIHZhciBjaGlsZE9iID0gb2JzZXJ2ZSh2YWwpO1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqLCBrZXksIHtcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBnZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlR2V0dGVyKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgIGRlcC5kZXBlbmQoKTtcbiAgICAgICAgaWYgKGNoaWxkT2IpIHtcbiAgICAgICAgICBjaGlsZE9iLmRlcC5kZXBlbmQoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgICBmb3IgKHZhciBlLCBpID0gMCwgbCA9IHZhbHVlLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICAgICAgZSA9IHZhbHVlW2ldO1xuICAgICAgICAgICAgZSAmJiBlLl9fb2JfXyAmJiBlLl9fb2JfXy5kZXAuZGVwZW5kKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSxcbiAgICBzZXQ6IGZ1bmN0aW9uIHJlYWN0aXZlU2V0dGVyKG5ld1ZhbCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0dGVyID8gZ2V0dGVyLmNhbGwob2JqKSA6IHZhbDtcbiAgICAgIGlmIChuZXdWYWwgPT09IHZhbHVlKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChzZXR0ZXIpIHtcbiAgICAgICAgc2V0dGVyLmNhbGwob2JqLCBuZXdWYWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdmFsID0gbmV3VmFsO1xuICAgICAgfVxuICAgICAgY2hpbGRPYiA9IG9ic2VydmUobmV3VmFsKTtcbiAgICAgIGRlcC5ub3RpZnkoKTtcbiAgICB9XG4gIH0pO1xufVxuXG5cblxudmFyIHV0aWwgPSBPYmplY3QuZnJlZXplKHtcblx0ZGVmaW5lUmVhY3RpdmU6IGRlZmluZVJlYWN0aXZlLFxuXHRzZXQ6IHNldCxcblx0ZGVsOiBkZWwsXG5cdGhhc093bjogaGFzT3duLFxuXHRpc0xpdGVyYWw6IGlzTGl0ZXJhbCxcblx0aXNSZXNlcnZlZDogaXNSZXNlcnZlZCxcblx0X3RvU3RyaW5nOiBfdG9TdHJpbmcsXG5cdHRvTnVtYmVyOiB0b051bWJlcixcblx0dG9Cb29sZWFuOiB0b0Jvb2xlYW4sXG5cdHN0cmlwUXVvdGVzOiBzdHJpcFF1b3Rlcyxcblx0Y2FtZWxpemU6IGNhbWVsaXplLFxuXHRoeXBoZW5hdGU6IGh5cGhlbmF0ZSxcblx0Y2xhc3NpZnk6IGNsYXNzaWZ5LFxuXHRiaW5kOiBiaW5kLFxuXHR0b0FycmF5OiB0b0FycmF5LFxuXHRleHRlbmQ6IGV4dGVuZCxcblx0aXNPYmplY3Q6IGlzT2JqZWN0LFxuXHRpc1BsYWluT2JqZWN0OiBpc1BsYWluT2JqZWN0LFxuXHRkZWY6IGRlZixcblx0ZGVib3VuY2U6IF9kZWJvdW5jZSxcblx0aW5kZXhPZjogaW5kZXhPZixcblx0Y2FuY2VsbGFibGU6IGNhbmNlbGxhYmxlLFxuXHRsb29zZUVxdWFsOiBsb29zZUVxdWFsLFxuXHRpc0FycmF5OiBpc0FycmF5LFxuXHRoYXNQcm90bzogaGFzUHJvdG8sXG5cdGluQnJvd3NlcjogaW5Ccm93c2VyLFxuXHRkZXZ0b29sczogZGV2dG9vbHMsXG5cdGlzSUU6IGlzSUUsXG5cdGlzSUU5OiBpc0lFOSxcblx0aXNBbmRyb2lkOiBpc0FuZHJvaWQsXG5cdGlzSW9zOiBpc0lvcyxcblx0aW9zVmVyc2lvbk1hdGNoOiBpb3NWZXJzaW9uTWF0Y2gsXG5cdGlvc1ZlcnNpb246IGlvc1ZlcnNpb24sXG5cdGhhc011dGF0aW9uT2JzZXJ2ZXJCdWc6IGhhc011dGF0aW9uT2JzZXJ2ZXJCdWcsXG5cdGdldCB0cmFuc2l0aW9uUHJvcCAoKSB7IHJldHVybiB0cmFuc2l0aW9uUHJvcDsgfSxcblx0Z2V0IHRyYW5zaXRpb25FbmRFdmVudCAoKSB7IHJldHVybiB0cmFuc2l0aW9uRW5kRXZlbnQ7IH0sXG5cdGdldCBhbmltYXRpb25Qcm9wICgpIHsgcmV0dXJuIGFuaW1hdGlvblByb3A7IH0sXG5cdGdldCBhbmltYXRpb25FbmRFdmVudCAoKSB7IHJldHVybiBhbmltYXRpb25FbmRFdmVudDsgfSxcblx0bmV4dFRpY2s6IG5leHRUaWNrLFxuXHRnZXQgX1NldCAoKSB7IHJldHVybiBfU2V0OyB9LFxuXHRxdWVyeTogcXVlcnksXG5cdGluRG9jOiBpbkRvYyxcblx0Z2V0QXR0cjogZ2V0QXR0cixcblx0Z2V0QmluZEF0dHI6IGdldEJpbmRBdHRyLFxuXHRoYXNCaW5kQXR0cjogaGFzQmluZEF0dHIsXG5cdGJlZm9yZTogYmVmb3JlLFxuXHRhZnRlcjogYWZ0ZXIsXG5cdHJlbW92ZTogcmVtb3ZlLFxuXHRwcmVwZW5kOiBwcmVwZW5kLFxuXHRyZXBsYWNlOiByZXBsYWNlLFxuXHRvbjogb24sXG5cdG9mZjogb2ZmLFxuXHRzZXRDbGFzczogc2V0Q2xhc3MsXG5cdGFkZENsYXNzOiBhZGRDbGFzcyxcblx0cmVtb3ZlQ2xhc3M6IHJlbW92ZUNsYXNzLFxuXHRleHRyYWN0Q29udGVudDogZXh0cmFjdENvbnRlbnQsXG5cdHRyaW1Ob2RlOiB0cmltTm9kZSxcblx0aXNUZW1wbGF0ZTogaXNUZW1wbGF0ZSxcblx0Y3JlYXRlQW5jaG9yOiBjcmVhdGVBbmNob3IsXG5cdGZpbmRSZWY6IGZpbmRSZWYsXG5cdG1hcE5vZGVSYW5nZTogbWFwTm9kZVJhbmdlLFxuXHRyZW1vdmVOb2RlUmFuZ2U6IHJlbW92ZU5vZGVSYW5nZSxcblx0aXNGcmFnbWVudDogaXNGcmFnbWVudCxcblx0Z2V0T3V0ZXJIVE1MOiBnZXRPdXRlckhUTUwsXG5cdG1lcmdlT3B0aW9uczogbWVyZ2VPcHRpb25zLFxuXHRyZXNvbHZlQXNzZXQ6IHJlc29sdmVBc3NldCxcblx0Y2hlY2tDb21wb25lbnRBdHRyOiBjaGVja0NvbXBvbmVudEF0dHIsXG5cdGNvbW1vblRhZ1JFOiBjb21tb25UYWdSRSxcblx0cmVzZXJ2ZWRUYWdSRTogcmVzZXJ2ZWRUYWdSRSxcblx0Z2V0IHdhcm4gKCkgeyByZXR1cm4gd2FybjsgfVxufSk7XG5cbnZhciB1aWQgPSAwO1xuXG5mdW5jdGlvbiBpbml0TWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogVGhlIG1haW4gaW5pdCBzZXF1ZW5jZS4gVGhpcyBpcyBjYWxsZWQgZm9yIGV2ZXJ5XG4gICAqIGluc3RhbmNlLCBpbmNsdWRpbmcgb25lcyB0aGF0IGFyZSBjcmVhdGVkIGZyb20gZXh0ZW5kZWRcbiAgICogY29uc3RydWN0b3JzLlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9ucyAtIHRoaXMgb3B0aW9ucyBvYmplY3Qgc2hvdWxkIGJlXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhlIHJlc3VsdCBvZiBtZXJnaW5nIGNsYXNzXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucyBhbmQgdGhlIG9wdGlvbnMgcGFzc2VkXG4gICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgaW4gdG8gdGhlIGNvbnN0cnVjdG9yLlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIHRoaXMuJGVsID0gbnVsbDtcbiAgICB0aGlzLiRwYXJlbnQgPSBvcHRpb25zLnBhcmVudDtcbiAgICB0aGlzLiRyb290ID0gdGhpcy4kcGFyZW50ID8gdGhpcy4kcGFyZW50LiRyb290IDogdGhpcztcbiAgICB0aGlzLiRjaGlsZHJlbiA9IFtdO1xuICAgIHRoaXMuJHJlZnMgPSB7fTsgLy8gY2hpbGQgdm0gcmVmZXJlbmNlc1xuICAgIHRoaXMuJGVscyA9IHt9OyAvLyBlbGVtZW50IHJlZmVyZW5jZXNcbiAgICB0aGlzLl93YXRjaGVycyA9IFtdOyAvLyBhbGwgd2F0Y2hlcnMgYXMgYW4gYXJyYXlcbiAgICB0aGlzLl9kaXJlY3RpdmVzID0gW107IC8vIGFsbCBkaXJlY3RpdmVzXG5cbiAgICAvLyBhIHVpZFxuICAgIHRoaXMuX3VpZCA9IHVpZCsrO1xuXG4gICAgLy8gYSBmbGFnIHRvIGF2b2lkIHRoaXMgYmVpbmcgb2JzZXJ2ZWRcbiAgICB0aGlzLl9pc1Z1ZSA9IHRydWU7XG5cbiAgICAvLyBldmVudHMgYm9va2tlZXBpbmdcbiAgICB0aGlzLl9ldmVudHMgPSB7fTsgLy8gcmVnaXN0ZXJlZCBjYWxsYmFja3NcbiAgICB0aGlzLl9ldmVudHNDb3VudCA9IHt9OyAvLyBmb3IgJGJyb2FkY2FzdCBvcHRpbWl6YXRpb25cblxuICAgIC8vIGZyYWdtZW50IGluc3RhbmNlIHByb3BlcnRpZXNcbiAgICB0aGlzLl9pc0ZyYWdtZW50ID0gZmFsc2U7XG4gICAgdGhpcy5fZnJhZ21lbnQgPSAvLyBAdHlwZSB7RG9jdW1lbnRGcmFnbWVudH1cbiAgICB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gLy8gQHR5cGUge1RleHR8Q29tbWVudH1cbiAgICB0aGlzLl9mcmFnbWVudEVuZCA9IG51bGw7IC8vIEB0eXBlIHtUZXh0fENvbW1lbnR9XG5cbiAgICAvLyBsaWZlY3ljbGUgc3RhdGVcbiAgICB0aGlzLl9pc0NvbXBpbGVkID0gdGhpcy5faXNEZXN0cm95ZWQgPSB0aGlzLl9pc1JlYWR5ID0gdGhpcy5faXNBdHRhY2hlZCA9IHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0aGlzLl92Rm9yUmVtb3ZpbmcgPSBmYWxzZTtcbiAgICB0aGlzLl91bmxpbmtGbiA9IG51bGw7XG5cbiAgICAvLyBjb250ZXh0OlxuICAgIC8vIGlmIHRoaXMgaXMgYSB0cmFuc2NsdWRlZCBjb21wb25lbnQsIGNvbnRleHRcbiAgICAvLyB3aWxsIGJlIHRoZSBjb21tb24gcGFyZW50IHZtIG9mIHRoaXMgaW5zdGFuY2VcbiAgICAvLyBhbmQgaXRzIGhvc3QuXG4gICAgdGhpcy5fY29udGV4dCA9IG9wdGlvbnMuX2NvbnRleHQgfHwgdGhpcy4kcGFyZW50O1xuXG4gICAgLy8gc2NvcGU6XG4gICAgLy8gaWYgdGhpcyBpcyBpbnNpZGUgYW4gaW5saW5lIHYtZm9yLCB0aGUgc2NvcGVcbiAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuICAgIC8vIHJlcGVhdCBmcmFnbWVudC4gdGhpcyBpcyB1c2VkIGZvciBsaW5raW5nIHByb3BzXG4gICAgLy8gYW5kIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgIHRoaXMuX3Njb3BlID0gb3B0aW9ucy5fc2NvcGU7XG5cbiAgICAvLyBmcmFnbWVudDpcbiAgICAvLyBpZiB0aGlzIGluc3RhbmNlIGlzIGNvbXBpbGVkIGluc2lkZSBhIEZyYWdtZW50LCBpdFxuICAgIC8vIG5lZWRzIHRvIHJlaWdzdGVyIGl0c2VsZiBhcyBhIGNoaWxkIG9mIHRoYXQgZnJhZ21lbnRcbiAgICAvLyBmb3IgYXR0YWNoL2RldGFjaCB0byB3b3JrIHByb3Blcmx5LlxuICAgIHRoaXMuX2ZyYWcgPSBvcHRpb25zLl9mcmFnO1xuICAgIGlmICh0aGlzLl9mcmFnKSB7XG4gICAgICB0aGlzLl9mcmFnLmNoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgLy8gcHVzaCBzZWxmIGludG8gcGFyZW50IC8gdHJhbnNjbHVzaW9uIGhvc3RcbiAgICBpZiAodGhpcy4kcGFyZW50KSB7XG4gICAgICB0aGlzLiRwYXJlbnQuJGNoaWxkcmVuLnB1c2godGhpcyk7XG4gICAgfVxuXG4gICAgLy8gbWVyZ2Ugb3B0aW9ucy5cbiAgICBvcHRpb25zID0gdGhpcy4kb3B0aW9ucyA9IG1lcmdlT3B0aW9ucyh0aGlzLmNvbnN0cnVjdG9yLm9wdGlvbnMsIG9wdGlvbnMsIHRoaXMpO1xuXG4gICAgLy8gc2V0IHJlZlxuICAgIHRoaXMuX3VwZGF0ZVJlZigpO1xuXG4gICAgLy8gaW5pdGlhbGl6ZSBkYXRhIGFzIGVtcHR5IG9iamVjdC5cbiAgICAvLyBpdCB3aWxsIGJlIGZpbGxlZCB1cCBpbiBfaW5pdERhdGEoKS5cbiAgICB0aGlzLl9kYXRhID0ge307XG5cbiAgICAvLyBjYWxsIGluaXQgaG9va1xuICAgIHRoaXMuX2NhbGxIb29rKCdpbml0Jyk7XG5cbiAgICAvLyBpbml0aWFsaXplIGRhdGEgb2JzZXJ2YXRpb24gYW5kIHNjb3BlIGluaGVyaXRhbmNlLlxuICAgIHRoaXMuX2luaXRTdGF0ZSgpO1xuXG4gICAgLy8gc2V0dXAgZXZlbnQgc3lzdGVtIGFuZCBvcHRpb24gZXZlbnRzLlxuICAgIHRoaXMuX2luaXRFdmVudHMoKTtcblxuICAgIC8vIGNhbGwgY3JlYXRlZCBob29rXG4gICAgdGhpcy5fY2FsbEhvb2soJ2NyZWF0ZWQnKTtcblxuICAgIC8vIGlmIGBlbGAgb3B0aW9uIGlzIHBhc3NlZCwgc3RhcnQgY29tcGlsYXRpb24uXG4gICAgaWYgKG9wdGlvbnMuZWwpIHtcbiAgICAgIHRoaXMuJG1vdW50KG9wdGlvbnMuZWwpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIHBhdGhDYWNoZSA9IG5ldyBDYWNoZSgxMDAwKTtcblxuLy8gYWN0aW9uc1xudmFyIEFQUEVORCA9IDA7XG52YXIgUFVTSCA9IDE7XG52YXIgSU5DX1NVQl9QQVRIX0RFUFRIID0gMjtcbnZhciBQVVNIX1NVQl9QQVRIID0gMztcblxuLy8gc3RhdGVzXG52YXIgQkVGT1JFX1BBVEggPSAwO1xudmFyIElOX1BBVEggPSAxO1xudmFyIEJFRk9SRV9JREVOVCA9IDI7XG52YXIgSU5fSURFTlQgPSAzO1xudmFyIElOX1NVQl9QQVRIID0gNDtcbnZhciBJTl9TSU5HTEVfUVVPVEUgPSA1O1xudmFyIElOX0RPVUJMRV9RVU9URSA9IDY7XG52YXIgQUZURVJfUEFUSCA9IDc7XG52YXIgRVJST1IgPSA4O1xuXG52YXIgcGF0aFN0YXRlTWFjaGluZSA9IFtdO1xuXG5wYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9QQVRIXSA9IHtcbiAgJ3dzJzogW0JFRk9SRV9QQVRIXSxcbiAgJ2lkZW50JzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSF0sXG4gICdlb2YnOiBbQUZURVJfUEFUSF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fUEFUSF0gPSB7XG4gICd3cyc6IFtJTl9QQVRIXSxcbiAgJy4nOiBbQkVGT1JFX0lERU5UXSxcbiAgJ1snOiBbSU5fU1VCX1BBVEhdLFxuICAnZW9mJzogW0FGVEVSX1BBVEhdXG59O1xuXG5wYXRoU3RhdGVNYWNoaW5lW0JFRk9SRV9JREVOVF0gPSB7XG4gICd3cyc6IFtCRUZPUkVfSURFTlRdLFxuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fSURFTlRdID0ge1xuICAnaWRlbnQnOiBbSU5fSURFTlQsIEFQUEVORF0sXG4gICcwJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnbnVtYmVyJzogW0lOX0lERU5ULCBBUFBFTkRdLFxuICAnd3MnOiBbSU5fUEFUSCwgUFVTSF0sXG4gICcuJzogW0JFRk9SRV9JREVOVCwgUFVTSF0sXG4gICdbJzogW0lOX1NVQl9QQVRILCBQVVNIXSxcbiAgJ2VvZic6IFtBRlRFUl9QQVRILCBQVVNIXVxufTtcblxucGF0aFN0YXRlTWFjaGluZVtJTl9TVUJfUEFUSF0gPSB7XG4gIFwiJ1wiOiBbSU5fU0lOR0xFX1FVT1RFLCBBUFBFTkRdLFxuICAnXCInOiBbSU5fRE9VQkxFX1FVT1RFLCBBUFBFTkRdLFxuICAnWyc6IFtJTl9TVUJfUEFUSCwgSU5DX1NVQl9QQVRIX0RFUFRIXSxcbiAgJ10nOiBbSU5fUEFUSCwgUFVTSF9TVUJfUEFUSF0sXG4gICdlb2YnOiBFUlJPUixcbiAgJ2Vsc2UnOiBbSU5fU1VCX1BBVEgsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fU0lOR0xFX1FVT1RFXSA9IHtcbiAgXCInXCI6IFtJTl9TVUJfUEFUSCwgQVBQRU5EXSxcbiAgJ2VvZic6IEVSUk9SLFxuICAnZWxzZSc6IFtJTl9TSU5HTEVfUVVPVEUsIEFQUEVORF1cbn07XG5cbnBhdGhTdGF0ZU1hY2hpbmVbSU5fRE9VQkxFX1FVT1RFXSA9IHtcbiAgJ1wiJzogW0lOX1NVQl9QQVRILCBBUFBFTkRdLFxuICAnZW9mJzogRVJST1IsXG4gICdlbHNlJzogW0lOX0RPVUJMRV9RVU9URSwgQVBQRU5EXVxufTtcblxuLyoqXG4gKiBEZXRlcm1pbmUgdGhlIHR5cGUgb2YgYSBjaGFyYWN0ZXIgaW4gYSBrZXlwYXRoLlxuICpcbiAqIEBwYXJhbSB7Q2hhcn0gY2hcbiAqIEByZXR1cm4ge1N0cmluZ30gdHlwZVxuICovXG5cbmZ1bmN0aW9uIGdldFBhdGhDaGFyVHlwZShjaCkge1xuICBpZiAoY2ggPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiAnZW9mJztcbiAgfVxuXG4gIHZhciBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcblxuICBzd2l0Y2ggKGNvZGUpIHtcbiAgICBjYXNlIDB4NUI6IC8vIFtcbiAgICBjYXNlIDB4NUQ6IC8vIF1cbiAgICBjYXNlIDB4MkU6IC8vIC5cbiAgICBjYXNlIDB4MjI6IC8vIFwiXG4gICAgY2FzZSAweDI3OiAvLyAnXG4gICAgY2FzZSAweDMwOlxuICAgICAgLy8gMFxuICAgICAgcmV0dXJuIGNoO1xuXG4gICAgY2FzZSAweDVGOiAvLyBfXG4gICAgY2FzZSAweDI0OlxuICAgICAgLy8gJFxuICAgICAgcmV0dXJuICdpZGVudCc7XG5cbiAgICBjYXNlIDB4MjA6IC8vIFNwYWNlXG4gICAgY2FzZSAweDA5OiAvLyBUYWJcbiAgICBjYXNlIDB4MEE6IC8vIE5ld2xpbmVcbiAgICBjYXNlIDB4MEQ6IC8vIFJldHVyblxuICAgIGNhc2UgMHhBMDogLy8gTm8tYnJlYWsgc3BhY2VcbiAgICBjYXNlIDB4RkVGRjogLy8gQnl0ZSBPcmRlciBNYXJrXG4gICAgY2FzZSAweDIwMjg6IC8vIExpbmUgU2VwYXJhdG9yXG4gICAgY2FzZSAweDIwMjk6XG4gICAgICAvLyBQYXJhZ3JhcGggU2VwYXJhdG9yXG4gICAgICByZXR1cm4gJ3dzJztcbiAgfVxuXG4gIC8vIGEteiwgQS1aXG4gIGlmIChjb2RlID49IDB4NjEgJiYgY29kZSA8PSAweDdBIHx8IGNvZGUgPj0gMHg0MSAmJiBjb2RlIDw9IDB4NUEpIHtcbiAgICByZXR1cm4gJ2lkZW50JztcbiAgfVxuXG4gIC8vIDEtOVxuICBpZiAoY29kZSA+PSAweDMxICYmIGNvZGUgPD0gMHgzOSkge1xuICAgIHJldHVybiAnbnVtYmVyJztcbiAgfVxuXG4gIHJldHVybiAnZWxzZSc7XG59XG5cbi8qKlxuICogRm9ybWF0IGEgc3ViUGF0aCwgcmV0dXJuIGl0cyBwbGFpbiBmb3JtIGlmIGl0IGlzXG4gKiBhIGxpdGVyYWwgc3RyaW5nIG9yIG51bWJlci4gT3RoZXJ3aXNlIHByZXBlbmQgdGhlXG4gKiBkeW5hbWljIGluZGljYXRvciAoKikuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRTdWJQYXRoKHBhdGgpIHtcbiAgdmFyIHRyaW1tZWQgPSBwYXRoLnRyaW0oKTtcbiAgLy8gaW52YWxpZCBsZWFkaW5nIDBcbiAgaWYgKHBhdGguY2hhckF0KDApID09PSAnMCcgJiYgaXNOYU4ocGF0aCkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgcmV0dXJuIGlzTGl0ZXJhbCh0cmltbWVkKSA/IHN0cmlwUXVvdGVzKHRyaW1tZWQpIDogJyonICsgdHJpbW1lZDtcbn1cblxuLyoqXG4gKiBQYXJzZSBhIHN0cmluZyBwYXRoIGludG8gYW4gYXJyYXkgb2Ygc2VnbWVudHNcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICogQHJldHVybiB7QXJyYXl8dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIHBhcnNlKHBhdGgpIHtcbiAgdmFyIGtleXMgPSBbXTtcbiAgdmFyIGluZGV4ID0gLTE7XG4gIHZhciBtb2RlID0gQkVGT1JFX1BBVEg7XG4gIHZhciBzdWJQYXRoRGVwdGggPSAwO1xuICB2YXIgYywgbmV3Q2hhciwga2V5LCB0eXBlLCB0cmFuc2l0aW9uLCBhY3Rpb24sIHR5cGVNYXA7XG5cbiAgdmFyIGFjdGlvbnMgPSBbXTtcblxuICBhY3Rpb25zW1BVU0hdID0gZnVuY3Rpb24gKCkge1xuICAgIGlmIChrZXkgIT09IHVuZGVmaW5lZCkge1xuICAgICAga2V5cy5wdXNoKGtleSk7XG4gICAgICBrZXkgPSB1bmRlZmluZWQ7XG4gICAgfVxuICB9O1xuXG4gIGFjdGlvbnNbQVBQRU5EXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoa2V5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGtleSA9IG5ld0NoYXI7XG4gICAgfSBlbHNlIHtcbiAgICAgIGtleSArPSBuZXdDaGFyO1xuICAgIH1cbiAgfTtcblxuICBhY3Rpb25zW0lOQ19TVUJfUEFUSF9ERVBUSF0gPSBmdW5jdGlvbiAoKSB7XG4gICAgYWN0aW9uc1tBUFBFTkRdKCk7XG4gICAgc3ViUGF0aERlcHRoKys7XG4gIH07XG5cbiAgYWN0aW9uc1tQVVNIX1NVQl9QQVRIXSA9IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc3ViUGF0aERlcHRoID4gMCkge1xuICAgICAgc3ViUGF0aERlcHRoLS07XG4gICAgICBtb2RlID0gSU5fU1VCX1BBVEg7XG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3ViUGF0aERlcHRoID0gMDtcbiAgICAgIGtleSA9IGZvcm1hdFN1YlBhdGgoa2V5KTtcbiAgICAgIGlmIChrZXkgPT09IGZhbHNlKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGFjdGlvbnNbUFVTSF0oKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gbWF5YmVVbmVzY2FwZVF1b3RlKCkge1xuICAgIHZhciBuZXh0Q2hhciA9IHBhdGhbaW5kZXggKyAxXTtcbiAgICBpZiAobW9kZSA9PT0gSU5fU0lOR0xFX1FVT1RFICYmIG5leHRDaGFyID09PSBcIidcIiB8fCBtb2RlID09PSBJTl9ET1VCTEVfUVVPVEUgJiYgbmV4dENoYXIgPT09ICdcIicpIHtcbiAgICAgIGluZGV4Kys7XG4gICAgICBuZXdDaGFyID0gJ1xcXFwnICsgbmV4dENoYXI7XG4gICAgICBhY3Rpb25zW0FQUEVORF0oKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHdoaWxlIChtb2RlICE9IG51bGwpIHtcbiAgICBpbmRleCsrO1xuICAgIGMgPSBwYXRoW2luZGV4XTtcblxuICAgIGlmIChjID09PSAnXFxcXCcgJiYgbWF5YmVVbmVzY2FwZVF1b3RlKCkpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHR5cGUgPSBnZXRQYXRoQ2hhclR5cGUoYyk7XG4gICAgdHlwZU1hcCA9IHBhdGhTdGF0ZU1hY2hpbmVbbW9kZV07XG4gICAgdHJhbnNpdGlvbiA9IHR5cGVNYXBbdHlwZV0gfHwgdHlwZU1hcFsnZWxzZSddIHx8IEVSUk9SO1xuXG4gICAgaWYgKHRyYW5zaXRpb24gPT09IEVSUk9SKSB7XG4gICAgICByZXR1cm47IC8vIHBhcnNlIGVycm9yXG4gICAgfVxuXG4gICAgbW9kZSA9IHRyYW5zaXRpb25bMF07XG4gICAgYWN0aW9uID0gYWN0aW9uc1t0cmFuc2l0aW9uWzFdXTtcbiAgICBpZiAoYWN0aW9uKSB7XG4gICAgICBuZXdDaGFyID0gdHJhbnNpdGlvblsyXTtcbiAgICAgIG5ld0NoYXIgPSBuZXdDaGFyID09PSB1bmRlZmluZWQgPyBjIDogbmV3Q2hhcjtcbiAgICAgIGlmIChhY3Rpb24oKSA9PT0gZmFsc2UpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChtb2RlID09PSBBRlRFUl9QQVRIKSB7XG4gICAgICBrZXlzLnJhdyA9IHBhdGg7XG4gICAgICByZXR1cm4ga2V5cztcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBFeHRlcm5hbCBwYXJzZSB0aGF0IGNoZWNrIGZvciBhIGNhY2hlIGhpdCBmaXJzdFxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwYXRoXG4gKiBAcmV0dXJuIHtBcnJheXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VQYXRoKHBhdGgpIHtcbiAgdmFyIGhpdCA9IHBhdGhDYWNoZS5nZXQocGF0aCk7XG4gIGlmICghaGl0KSB7XG4gICAgaGl0ID0gcGFyc2UocGF0aCk7XG4gICAgaWYgKGhpdCkge1xuICAgICAgcGF0aENhY2hlLnB1dChwYXRoLCBoaXQpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaGl0O1xufVxuXG4vKipcbiAqIEdldCBmcm9tIGFuIG9iamVjdCBmcm9tIGEgcGF0aCBzdHJpbmdcbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gcGF0aFxuICovXG5cbmZ1bmN0aW9uIGdldFBhdGgob2JqLCBwYXRoKSB7XG4gIHJldHVybiBwYXJzZUV4cHJlc3Npb24ocGF0aCkuZ2V0KG9iaik7XG59XG5cbi8qKlxuICogV2FybiBhZ2FpbnN0IHNldHRpbmcgbm9uLWV4aXN0ZW50IHJvb3QgcGF0aCBvbiBhIHZtLlxuICovXG5cbnZhciB3YXJuTm9uRXhpc3RlbnQ7XG5pZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICB3YXJuTm9uRXhpc3RlbnQgPSBmdW5jdGlvbiAocGF0aCwgdm0pIHtcbiAgICB3YXJuKCdZb3UgYXJlIHNldHRpbmcgYSBub24tZXhpc3RlbnQgcGF0aCBcIicgKyBwYXRoLnJhdyArICdcIiAnICsgJ29uIGEgdm0gaW5zdGFuY2UuIENvbnNpZGVyIHByZS1pbml0aWFsaXppbmcgdGhlIHByb3BlcnR5ICcgKyAnd2l0aCB0aGUgXCJkYXRhXCIgb3B0aW9uIGZvciBtb3JlIHJlbGlhYmxlIHJlYWN0aXZpdHkgJyArICdhbmQgYmV0dGVyIHBlcmZvcm1hbmNlLicsIHZtKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBTZXQgb24gYW4gb2JqZWN0IGZyb20gYSBwYXRoXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IG9ialxuICogQHBhcmFtIHtTdHJpbmcgfCBBcnJheX0gcGF0aFxuICogQHBhcmFtIHsqfSB2YWxcbiAqL1xuXG5mdW5jdGlvbiBzZXRQYXRoKG9iaiwgcGF0aCwgdmFsKSB7XG4gIHZhciBvcmlnaW5hbCA9IG9iajtcbiAgaWYgKHR5cGVvZiBwYXRoID09PSAnc3RyaW5nJykge1xuICAgIHBhdGggPSBwYXJzZShwYXRoKTtcbiAgfVxuICBpZiAoIXBhdGggfHwgIWlzT2JqZWN0KG9iaikpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgdmFyIGxhc3QsIGtleTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBwYXRoLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGxhc3QgPSBvYmo7XG4gICAga2V5ID0gcGF0aFtpXTtcbiAgICBpZiAoa2V5LmNoYXJBdCgwKSA9PT0gJyonKSB7XG4gICAgICBrZXkgPSBwYXJzZUV4cHJlc3Npb24oa2V5LnNsaWNlKDEpKS5nZXQuY2FsbChvcmlnaW5hbCwgb3JpZ2luYWwpO1xuICAgIH1cbiAgICBpZiAoaSA8IGwgLSAxKSB7XG4gICAgICBvYmogPSBvYmpba2V5XTtcbiAgICAgIGlmICghaXNPYmplY3Qob2JqKSkge1xuICAgICAgICBvYmogPSB7fTtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgbGFzdC5faXNWdWUpIHtcbiAgICAgICAgICB3YXJuTm9uRXhpc3RlbnQocGF0aCwgbGFzdCk7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KGxhc3QsIGtleSwgb2JqKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKGlzQXJyYXkob2JqKSkge1xuICAgICAgICBvYmouJHNldChrZXksIHZhbCk7XG4gICAgICB9IGVsc2UgaWYgKGtleSBpbiBvYmopIHtcbiAgICAgICAgb2JqW2tleV0gPSB2YWw7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBvYmouX2lzVnVlKSB7XG4gICAgICAgICAgd2Fybk5vbkV4aXN0ZW50KHBhdGgsIG9iaik7XG4gICAgICAgIH1cbiAgICAgICAgc2V0KG9iaiwga2V5LCB2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICByZXR1cm4gdHJ1ZTtcbn1cblxudmFyIHBhdGggPSBPYmplY3QuZnJlZXplKHtcbiAgcGFyc2VQYXRoOiBwYXJzZVBhdGgsXG4gIGdldFBhdGg6IGdldFBhdGgsXG4gIHNldFBhdGg6IHNldFBhdGhcbn0pO1xuXG52YXIgZXhwcmVzc2lvbkNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG52YXIgYWxsb3dlZEtleXdvcmRzID0gJ01hdGgsRGF0ZSx0aGlzLHRydWUsZmFsc2UsbnVsbCx1bmRlZmluZWQsSW5maW5pdHksTmFOLCcgKyAnaXNOYU4saXNGaW5pdGUsZGVjb2RlVVJJLGRlY29kZVVSSUNvbXBvbmVudCxlbmNvZGVVUkksJyArICdlbmNvZGVVUklDb21wb25lbnQscGFyc2VJbnQscGFyc2VGbG9hdCc7XG52YXIgYWxsb3dlZEtleXdvcmRzUkUgPSBuZXcgUmVnRXhwKCdeKCcgKyBhbGxvd2VkS2V5d29yZHMucmVwbGFjZSgvLC9nLCAnXFxcXGJ8JykgKyAnXFxcXGIpJyk7XG5cbi8vIGtleXdvcmRzIHRoYXQgZG9uJ3QgbWFrZSBzZW5zZSBpbnNpZGUgZXhwcmVzc2lvbnNcbnZhciBpbXByb3BlcktleXdvcmRzID0gJ2JyZWFrLGNhc2UsY2xhc3MsY2F0Y2gsY29uc3QsY29udGludWUsZGVidWdnZXIsZGVmYXVsdCwnICsgJ2RlbGV0ZSxkbyxlbHNlLGV4cG9ydCxleHRlbmRzLGZpbmFsbHksZm9yLGZ1bmN0aW9uLGlmLCcgKyAnaW1wb3J0LGluLGluc3RhbmNlb2YsbGV0LHJldHVybixzdXBlcixzd2l0Y2gsdGhyb3csdHJ5LCcgKyAndmFyLHdoaWxlLHdpdGgseWllbGQsZW51bSxhd2FpdCxpbXBsZW1lbnRzLHBhY2thZ2UsJyArICdwcm90ZWN0ZWQsc3RhdGljLGludGVyZmFjZSxwcml2YXRlLHB1YmxpYyc7XG52YXIgaW1wcm9wZXJLZXl3b3Jkc1JFID0gbmV3IFJlZ0V4cCgnXignICsgaW1wcm9wZXJLZXl3b3Jkcy5yZXBsYWNlKC8sL2csICdcXFxcYnwnKSArICdcXFxcYiknKTtcblxudmFyIHdzUkUgPSAvXFxzL2c7XG52YXIgbmV3bGluZVJFID0gL1xcbi9nO1xudmFyIHNhdmVSRSA9IC9bXFx7LF1cXHMqW1xcd1xcJF9dK1xccyo6fCgnKD86W14nXFxcXF18XFxcXC4pKid8XCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifGAoPzpbXmBcXFxcXXxcXFxcLikqXFwkXFx7fFxcfSg/OlteYFxcXFxdfFxcXFwuKSpgfGAoPzpbXmBcXFxcXXxcXFxcLikqYCl8bmV3IHx0eXBlb2YgfHZvaWQgL2c7XG52YXIgcmVzdG9yZVJFID0gL1wiKFxcZCspXCIvZztcbnZhciBwYXRoVGVzdFJFID0gL15bQS1aYS16XyRdW1xcdyRdKig/OlxcLltBLVphLXpfJF1bXFx3JF0qfFxcWycuKj8nXFxdfFxcW1wiLio/XCJcXF18XFxbXFxkK1xcXXxcXFtbQS1aYS16XyRdW1xcdyRdKlxcXSkqJC87XG52YXIgaWRlbnRSRSA9IC9bXlxcdyRcXC5dKD86W0EtWmEtel8kXVtcXHckXSopL2c7XG52YXIgbGl0ZXJhbFZhbHVlUkUkMSA9IC9eKD86dHJ1ZXxmYWxzZXxudWxsfHVuZGVmaW5lZHxJbmZpbml0eXxOYU4pJC87XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG4vKipcbiAqIFNhdmUgLyBSZXdyaXRlIC8gUmVzdG9yZVxuICpcbiAqIFdoZW4gcmV3cml0aW5nIHBhdGhzIGZvdW5kIGluIGFuIGV4cHJlc3Npb24sIGl0IGlzXG4gKiBwb3NzaWJsZSBmb3IgdGhlIHNhbWUgbGV0dGVyIHNlcXVlbmNlcyB0byBiZSBmb3VuZCBpblxuICogc3RyaW5ncyBhbmQgT2JqZWN0IGxpdGVyYWwgcHJvcGVydHkga2V5cy4gVGhlcmVmb3JlIHdlXG4gKiByZW1vdmUgYW5kIHN0b3JlIHRoZXNlIHBhcnRzIGluIGEgdGVtcG9yYXJ5IGFycmF5LCBhbmRcbiAqIHJlc3RvcmUgdGhlbSBhZnRlciB0aGUgcGF0aCByZXdyaXRlLlxuICovXG5cbnZhciBzYXZlZCA9IFtdO1xuXG4vKipcbiAqIFNhdmUgcmVwbGFjZXJcbiAqXG4gKiBUaGUgc2F2ZSByZWdleCBjYW4gbWF0Y2ggdHdvIHBvc3NpYmxlIGNhc2VzOlxuICogMS4gQW4gb3BlbmluZyBvYmplY3QgbGl0ZXJhbFxuICogMi4gQSBzdHJpbmdcbiAqIElmIG1hdGNoZWQgYXMgYSBwbGFpbiBzdHJpbmcsIHdlIG5lZWQgdG8gZXNjYXBlIGl0c1xuICogbmV3bGluZXMsIHNpbmNlIHRoZSBzdHJpbmcgbmVlZHMgdG8gYmUgcHJlc2VydmVkIHdoZW5cbiAqIGdlbmVyYXRpbmcgdGhlIGZ1bmN0aW9uIGJvZHkuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHN0clxuICogQHBhcmFtIHtTdHJpbmd9IGlzU3RyaW5nIC0gc3RyIGlmIG1hdGNoZWQgYXMgYSBzdHJpbmdcbiAqIEByZXR1cm4ge1N0cmluZ30gLSBwbGFjZWhvbGRlciB3aXRoIGluZGV4XG4gKi9cblxuZnVuY3Rpb24gc2F2ZShzdHIsIGlzU3RyaW5nKSB7XG4gIHZhciBpID0gc2F2ZWQubGVuZ3RoO1xuICBzYXZlZFtpXSA9IGlzU3RyaW5nID8gc3RyLnJlcGxhY2UobmV3bGluZVJFLCAnXFxcXG4nKSA6IHN0cjtcbiAgcmV0dXJuICdcIicgKyBpICsgJ1wiJztcbn1cblxuLyoqXG4gKiBQYXRoIHJld3JpdGUgcmVwbGFjZXJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcmF3XG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcmV3cml0ZShyYXcpIHtcbiAgdmFyIGMgPSByYXcuY2hhckF0KDApO1xuICB2YXIgcGF0aCA9IHJhdy5zbGljZSgxKTtcbiAgaWYgKGFsbG93ZWRLZXl3b3Jkc1JFLnRlc3QocGF0aCkpIHtcbiAgICByZXR1cm4gcmF3O1xuICB9IGVsc2Uge1xuICAgIHBhdGggPSBwYXRoLmluZGV4T2YoJ1wiJykgPiAtMSA/IHBhdGgucmVwbGFjZShyZXN0b3JlUkUsIHJlc3RvcmUpIDogcGF0aDtcbiAgICByZXR1cm4gYyArICdzY29wZS4nICsgcGF0aDtcbiAgfVxufVxuXG4vKipcbiAqIFJlc3RvcmUgcmVwbGFjZXJcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc3RyXG4gKiBAcGFyYW0ge1N0cmluZ30gaSAtIG1hdGNoZWQgc2F2ZSBpbmRleFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIHJlc3RvcmUoc3RyLCBpKSB7XG4gIHJldHVybiBzYXZlZFtpXTtcbn1cblxuLyoqXG4gKiBSZXdyaXRlIGFuIGV4cHJlc3Npb24sIHByZWZpeGluZyBhbGwgcGF0aCBhY2Nlc3NvcnMgd2l0aFxuICogYHNjb3BlLmAgYW5kIGdlbmVyYXRlIGdldHRlci9zZXR0ZXIgZnVuY3Rpb25zLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVHZXR0ZXIoZXhwKSB7XG4gIGlmIChpbXByb3BlcktleXdvcmRzUkUudGVzdChleHApKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdBdm9pZCB1c2luZyByZXNlcnZlZCBrZXl3b3JkcyBpbiBleHByZXNzaW9uOiAnICsgZXhwKTtcbiAgfVxuICAvLyByZXNldCBzdGF0ZVxuICBzYXZlZC5sZW5ndGggPSAwO1xuICAvLyBzYXZlIHN0cmluZ3MgYW5kIG9iamVjdCBsaXRlcmFsIGtleXNcbiAgdmFyIGJvZHkgPSBleHAucmVwbGFjZShzYXZlUkUsIHNhdmUpLnJlcGxhY2Uod3NSRSwgJycpO1xuICAvLyByZXdyaXRlIGFsbCBwYXRoc1xuICAvLyBwYWQgMSBzcGFjZSBoZXJlIGJlY2F1c2UgdGhlIHJlZ2V4IG1hdGNoZXMgMSBleHRyYSBjaGFyXG4gIGJvZHkgPSAoJyAnICsgYm9keSkucmVwbGFjZShpZGVudFJFLCByZXdyaXRlKS5yZXBsYWNlKHJlc3RvcmVSRSwgcmVzdG9yZSk7XG4gIHJldHVybiBtYWtlR2V0dGVyRm4oYm9keSk7XG59XG5cbi8qKlxuICogQnVpbGQgYSBnZXR0ZXIgZnVuY3Rpb24uIFJlcXVpcmVzIGV2YWwuXG4gKlxuICogV2UgaXNvbGF0ZSB0aGUgdHJ5L2NhdGNoIHNvIGl0IGRvZXNuJ3QgYWZmZWN0IHRoZVxuICogb3B0aW1pemF0aW9uIG9mIHRoZSBwYXJzZSBmdW5jdGlvbiB3aGVuIGl0IGlzIG5vdCBjYWxsZWQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGJvZHlcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufHVuZGVmaW5lZH1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlR2V0dGVyRm4oYm9keSkge1xuICB0cnkge1xuICAgIC8qIGVzbGludC1kaXNhYmxlIG5vLW5ldy1mdW5jICovXG4gICAgcmV0dXJuIG5ldyBGdW5jdGlvbignc2NvcGUnLCAncmV0dXJuICcgKyBib2R5ICsgJzsnKTtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLW5ldy1mdW5jICovXG4gIH0gY2F0Y2ggKGUpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgICBpZiAoZS50b1N0cmluZygpLm1hdGNoKC91bnNhZmUtZXZhbHxDU1AvKSkge1xuICAgICAgICB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIHRoZSBkZWZhdWx0IGJ1aWxkIG9mIFZ1ZS5qcyBpbiBhbiBlbnZpcm9ubWVudCAnICsgJ3dpdGggQ29udGVudCBTZWN1cml0eSBQb2xpY3kgdGhhdCBwcm9oaWJpdHMgdW5zYWZlLWV2YWwuICcgKyAnVXNlIHRoZSBDU1AtY29tcGxpYW50IGJ1aWxkIGluc3RlYWQ6ICcgKyAnaHR0cDovL3Z1ZWpzLm9yZy9ndWlkZS9pbnN0YWxsYXRpb24uaHRtbCNDU1AtY29tcGxpYW50LWJ1aWxkJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3YXJuKCdJbnZhbGlkIGV4cHJlc3Npb24uICcgKyAnR2VuZXJhdGVkIGZ1bmN0aW9uIGJvZHk6ICcgKyBib2R5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG5vb3A7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGEgc2V0dGVyIGZ1bmN0aW9uIGZvciB0aGUgZXhwcmVzc2lvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZVNldHRlcihleHApIHtcbiAgdmFyIHBhdGggPSBwYXJzZVBhdGgoZXhwKTtcbiAgaWYgKHBhdGgpIHtcbiAgICByZXR1cm4gZnVuY3Rpb24gKHNjb3BlLCB2YWwpIHtcbiAgICAgIHNldFBhdGgoc2NvcGUsIHBhdGgsIHZhbCk7XG4gICAgfTtcbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgc2V0dGVyIGV4cHJlc3Npb246ICcgKyBleHApO1xuICB9XG59XG5cbi8qKlxuICogUGFyc2UgYW4gZXhwcmVzc2lvbiBpbnRvIHJlLXdyaXR0ZW4gZ2V0dGVyL3NldHRlcnMuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHBhcmFtIHtCb29sZWFufSBuZWVkU2V0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZUV4cHJlc3Npb24oZXhwLCBuZWVkU2V0KSB7XG4gIGV4cCA9IGV4cC50cmltKCk7XG4gIC8vIHRyeSBjYWNoZVxuICB2YXIgaGl0ID0gZXhwcmVzc2lvbkNhY2hlLmdldChleHApO1xuICBpZiAoaGl0KSB7XG4gICAgaWYgKG5lZWRTZXQgJiYgIWhpdC5zZXQpIHtcbiAgICAgIGhpdC5zZXQgPSBjb21waWxlU2V0dGVyKGhpdC5leHApO1xuICAgIH1cbiAgICByZXR1cm4gaGl0O1xuICB9XG4gIHZhciByZXMgPSB7IGV4cDogZXhwIH07XG4gIHJlcy5nZXQgPSBpc1NpbXBsZVBhdGgoZXhwKSAmJiBleHAuaW5kZXhPZignWycpIDwgMFxuICAvLyBvcHRpbWl6ZWQgc3VwZXIgc2ltcGxlIGdldHRlclxuICA/IG1ha2VHZXR0ZXJGbignc2NvcGUuJyArIGV4cClcbiAgLy8gZHluYW1pYyBnZXR0ZXJcbiAgOiBjb21waWxlR2V0dGVyKGV4cCk7XG4gIGlmIChuZWVkU2V0KSB7XG4gICAgcmVzLnNldCA9IGNvbXBpbGVTZXR0ZXIoZXhwKTtcbiAgfVxuICBleHByZXNzaW9uQ2FjaGUucHV0KGV4cCwgcmVzKTtcbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhbiBleHByZXNzaW9uIGlzIGEgc2ltcGxlIHBhdGguXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV4cFxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5mdW5jdGlvbiBpc1NpbXBsZVBhdGgoZXhwKSB7XG4gIHJldHVybiBwYXRoVGVzdFJFLnRlc3QoZXhwKSAmJlxuICAvLyBkb24ndCB0cmVhdCBsaXRlcmFsIHZhbHVlcyBhcyBwYXRoc1xuICAhbGl0ZXJhbFZhbHVlUkUkMS50ZXN0KGV4cCkgJiZcbiAgLy8gTWF0aCBjb25zdGFudHMgZS5nLiBNYXRoLlBJLCBNYXRoLkUgZXRjLlxuICBleHAuc2xpY2UoMCwgNSkgIT09ICdNYXRoLic7XG59XG5cbnZhciBleHByZXNzaW9uID0gT2JqZWN0LmZyZWV6ZSh7XG4gIHBhcnNlRXhwcmVzc2lvbjogcGFyc2VFeHByZXNzaW9uLFxuICBpc1NpbXBsZVBhdGg6IGlzU2ltcGxlUGF0aFxufSk7XG5cbi8vIHdlIGhhdmUgdHdvIHNlcGFyYXRlIHF1ZXVlczogb25lIGZvciBkaXJlY3RpdmUgdXBkYXRlc1xuLy8gYW5kIG9uZSBmb3IgdXNlciB3YXRjaGVyIHJlZ2lzdGVyZWQgdmlhICR3YXRjaCgpLlxuLy8gd2Ugd2FudCB0byBndWFyYW50ZWUgZGlyZWN0aXZlIHVwZGF0ZXMgdG8gYmUgY2FsbGVkXG4vLyBiZWZvcmUgdXNlciB3YXRjaGVycyBzbyB0aGF0IHdoZW4gdXNlciB3YXRjaGVycyBhcmVcbi8vIHRyaWdnZXJlZCwgdGhlIERPTSB3b3VsZCBoYXZlIGFscmVhZHkgYmVlbiBpbiB1cGRhdGVkXG4vLyBzdGF0ZS5cblxudmFyIHF1ZXVlID0gW107XG52YXIgdXNlclF1ZXVlID0gW107XG52YXIgaGFzID0ge307XG52YXIgY2lyY3VsYXIgPSB7fTtcbnZhciB3YWl0aW5nID0gZmFsc2U7XG5cbi8qKlxuICogUmVzZXQgdGhlIGJhdGNoZXIncyBzdGF0ZS5cbiAqL1xuXG5mdW5jdGlvbiByZXNldEJhdGNoZXJTdGF0ZSgpIHtcbiAgcXVldWUubGVuZ3RoID0gMDtcbiAgdXNlclF1ZXVlLmxlbmd0aCA9IDA7XG4gIGhhcyA9IHt9O1xuICBjaXJjdWxhciA9IHt9O1xuICB3YWl0aW5nID0gZmFsc2U7XG59XG5cbi8qKlxuICogRmx1c2ggYm90aCBxdWV1ZXMgYW5kIHJ1biB0aGUgd2F0Y2hlcnMuXG4gKi9cblxuZnVuY3Rpb24gZmx1c2hCYXRjaGVyUXVldWUoKSB7XG4gIHZhciBfYWdhaW4gPSB0cnVlO1xuXG4gIF9mdW5jdGlvbjogd2hpbGUgKF9hZ2Fpbikge1xuICAgIF9hZ2FpbiA9IGZhbHNlO1xuXG4gICAgcnVuQmF0Y2hlclF1ZXVlKHF1ZXVlKTtcbiAgICBydW5CYXRjaGVyUXVldWUodXNlclF1ZXVlKTtcbiAgICAvLyB1c2VyIHdhdGNoZXJzIHRyaWdnZXJlZCBtb3JlIHdhdGNoZXJzLFxuICAgIC8vIGtlZXAgZmx1c2hpbmcgdW50aWwgaXQgZGVwbGV0ZXNcbiAgICBpZiAocXVldWUubGVuZ3RoKSB7XG4gICAgICBfYWdhaW4gPSB0cnVlO1xuICAgICAgY29udGludWUgX2Z1bmN0aW9uO1xuICAgIH1cbiAgICAvLyBkZXYgdG9vbCBob29rXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKGRldnRvb2xzICYmIGNvbmZpZy5kZXZ0b29scykge1xuICAgICAgZGV2dG9vbHMuZW1pdCgnZmx1c2gnKTtcbiAgICB9XG4gICAgcmVzZXRCYXRjaGVyU3RhdGUoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJ1biB0aGUgd2F0Y2hlcnMgaW4gYSBzaW5nbGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gcXVldWVcbiAqL1xuXG5mdW5jdGlvbiBydW5CYXRjaGVyUXVldWUocXVldWUpIHtcbiAgLy8gZG8gbm90IGNhY2hlIGxlbmd0aCBiZWNhdXNlIG1vcmUgd2F0Y2hlcnMgbWlnaHQgYmUgcHVzaGVkXG4gIC8vIGFzIHdlIHJ1biBleGlzdGluZyB3YXRjaGVyc1xuICBmb3IgKHZhciBpID0gMDsgaSA8IHF1ZXVlLmxlbmd0aDsgaSsrKSB7XG4gICAgdmFyIHdhdGNoZXIgPSBxdWV1ZVtpXTtcbiAgICB2YXIgaWQgPSB3YXRjaGVyLmlkO1xuICAgIGhhc1tpZF0gPSBudWxsO1xuICAgIHdhdGNoZXIucnVuKCk7XG4gICAgLy8gaW4gZGV2IGJ1aWxkLCBjaGVjayBhbmQgc3RvcCBjaXJjdWxhciB1cGRhdGVzLlxuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGhhc1tpZF0gIT0gbnVsbCkge1xuICAgICAgY2lyY3VsYXJbaWRdID0gKGNpcmN1bGFyW2lkXSB8fCAwKSArIDE7XG4gICAgICBpZiAoY2lyY3VsYXJbaWRdID4gY29uZmlnLl9tYXhVcGRhdGVDb3VudCkge1xuICAgICAgICB3YXJuKCdZb3UgbWF5IGhhdmUgYW4gaW5maW5pdGUgdXBkYXRlIGxvb3AgZm9yIHdhdGNoZXIgJyArICd3aXRoIGV4cHJlc3Npb24gXCInICsgd2F0Y2hlci5leHByZXNzaW9uICsgJ1wiJywgd2F0Y2hlci52bSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBxdWV1ZS5sZW5ndGggPSAwO1xufVxuXG4vKipcbiAqIFB1c2ggYSB3YXRjaGVyIGludG8gdGhlIHdhdGNoZXIgcXVldWUuXG4gKiBKb2JzIHdpdGggZHVwbGljYXRlIElEcyB3aWxsIGJlIHNraXBwZWQgdW5sZXNzIGl0J3NcbiAqIHB1c2hlZCB3aGVuIHRoZSBxdWV1ZSBpcyBiZWluZyBmbHVzaGVkLlxuICpcbiAqIEBwYXJhbSB7V2F0Y2hlcn0gd2F0Y2hlclxuICogICBwcm9wZXJ0aWVzOlxuICogICAtIHtOdW1iZXJ9IGlkXG4gKiAgIC0ge0Z1bmN0aW9ufSBydW5cbiAqL1xuXG5mdW5jdGlvbiBwdXNoV2F0Y2hlcih3YXRjaGVyKSB7XG4gIHZhciBpZCA9IHdhdGNoZXIuaWQ7XG4gIGlmIChoYXNbaWRdID09IG51bGwpIHtcbiAgICAvLyBwdXNoIHdhdGNoZXIgaW50byBhcHByb3ByaWF0ZSBxdWV1ZVxuICAgIHZhciBxID0gd2F0Y2hlci51c2VyID8gdXNlclF1ZXVlIDogcXVldWU7XG4gICAgaGFzW2lkXSA9IHEubGVuZ3RoO1xuICAgIHEucHVzaCh3YXRjaGVyKTtcbiAgICAvLyBxdWV1ZSB0aGUgZmx1c2hcbiAgICBpZiAoIXdhaXRpbmcpIHtcbiAgICAgIHdhaXRpbmcgPSB0cnVlO1xuICAgICAgbmV4dFRpY2soZmx1c2hCYXRjaGVyUXVldWUpO1xuICAgIH1cbiAgfVxufVxuXG52YXIgdWlkJDIgPSAwO1xuXG4vKipcbiAqIEEgd2F0Y2hlciBwYXJzZXMgYW4gZXhwcmVzc2lvbiwgY29sbGVjdHMgZGVwZW5kZW5jaWVzLFxuICogYW5kIGZpcmVzIGNhbGxiYWNrIHdoZW4gdGhlIGV4cHJlc3Npb24gdmFsdWUgY2hhbmdlcy5cbiAqIFRoaXMgaXMgdXNlZCBmb3IgYm90aCB0aGUgJHdhdGNoKCkgYXBpIGFuZCBkaXJlY3RpdmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IGV4cE9yRm5cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogICAgICAgICAgICAgICAgIC0ge0FycmF5fSBmaWx0ZXJzXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gdHdvV2F5XG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gZGVlcFxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IHVzZXJcbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBzeW5jXG4gKiAgICAgICAgICAgICAgICAgLSB7Qm9vbGVhbn0gbGF6eVxuICogICAgICAgICAgICAgICAgIC0ge0Z1bmN0aW9ufSBbcHJlUHJvY2Vzc11cbiAqICAgICAgICAgICAgICAgICAtIHtGdW5jdGlvbn0gW3Bvc3RQcm9jZXNzXVxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCBvcHRpb25zKSB7XG4gIC8vIG1peCBpbiBvcHRpb25zXG4gIGlmIChvcHRpb25zKSB7XG4gICAgZXh0ZW5kKHRoaXMsIG9wdGlvbnMpO1xuICB9XG4gIHZhciBpc0ZuID0gdHlwZW9mIGV4cE9yRm4gPT09ICdmdW5jdGlvbic7XG4gIHRoaXMudm0gPSB2bTtcbiAgdm0uX3dhdGNoZXJzLnB1c2godGhpcyk7XG4gIHRoaXMuZXhwcmVzc2lvbiA9IGV4cE9yRm47XG4gIHRoaXMuY2IgPSBjYjtcbiAgdGhpcy5pZCA9ICsrdWlkJDI7IC8vIHVpZCBmb3IgYmF0Y2hpbmdcbiAgdGhpcy5hY3RpdmUgPSB0cnVlO1xuICB0aGlzLmRpcnR5ID0gdGhpcy5sYXp5OyAvLyBmb3IgbGF6eSB3YXRjaGVyc1xuICB0aGlzLmRlcHMgPSBbXTtcbiAgdGhpcy5uZXdEZXBzID0gW107XG4gIHRoaXMuZGVwSWRzID0gbmV3IF9TZXQoKTtcbiAgdGhpcy5uZXdEZXBJZHMgPSBuZXcgX1NldCgpO1xuICB0aGlzLnByZXZFcnJvciA9IG51bGw7IC8vIGZvciBhc3luYyBlcnJvciBzdGFja3NcbiAgLy8gcGFyc2UgZXhwcmVzc2lvbiBmb3IgZ2V0dGVyL3NldHRlclxuICBpZiAoaXNGbikge1xuICAgIHRoaXMuZ2V0dGVyID0gZXhwT3JGbjtcbiAgICB0aGlzLnNldHRlciA9IHVuZGVmaW5lZDtcbiAgfSBlbHNlIHtcbiAgICB2YXIgcmVzID0gcGFyc2VFeHByZXNzaW9uKGV4cE9yRm4sIHRoaXMudHdvV2F5KTtcbiAgICB0aGlzLmdldHRlciA9IHJlcy5nZXQ7XG4gICAgdGhpcy5zZXR0ZXIgPSByZXMuc2V0O1xuICB9XG4gIHRoaXMudmFsdWUgPSB0aGlzLmxhenkgPyB1bmRlZmluZWQgOiB0aGlzLmdldCgpO1xuICAvLyBzdGF0ZSBmb3IgYXZvaWRpbmcgZmFsc2UgdHJpZ2dlcnMgZm9yIGRlZXAgYW5kIEFycmF5XG4gIC8vIHdhdGNoZXJzIGR1cmluZyB2bS5fZGlnZXN0KClcbiAgdGhpcy5xdWV1ZWQgPSB0aGlzLnNoYWxsb3cgPSBmYWxzZTtcbn1cblxuLyoqXG4gKiBFdmFsdWF0ZSB0aGUgZ2V0dGVyLCBhbmQgcmUtY29sbGVjdCBkZXBlbmRlbmNpZXMuXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKCkge1xuICB0aGlzLmJlZm9yZUdldCgpO1xuICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG4gIHZhciB2YWx1ZTtcbiAgdHJ5IHtcbiAgICB2YWx1ZSA9IHRoaXMuZ2V0dGVyLmNhbGwoc2NvcGUsIHNjb3BlKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy53YXJuRXhwcmVzc2lvbkVycm9ycykge1xuICAgICAgd2FybignRXJyb3Igd2hlbiBldmFsdWF0aW5nIGV4cHJlc3Npb24gJyArICdcIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCI6ICcgKyBlLnRvU3RyaW5nKCksIHRoaXMudm0pO1xuICAgIH1cbiAgfVxuICAvLyBcInRvdWNoXCIgZXZlcnkgcHJvcGVydHkgc28gdGhleSBhcmUgYWxsIHRyYWNrZWQgYXNcbiAgLy8gZGVwZW5kZW5jaWVzIGZvciBkZWVwIHdhdGNoaW5nXG4gIGlmICh0aGlzLmRlZXApIHtcbiAgICB0cmF2ZXJzZSh2YWx1ZSk7XG4gIH1cbiAgaWYgKHRoaXMucHJlUHJvY2Vzcykge1xuICAgIHZhbHVlID0gdGhpcy5wcmVQcm9jZXNzKHZhbHVlKTtcbiAgfVxuICBpZiAodGhpcy5maWx0ZXJzKSB7XG4gICAgdmFsdWUgPSBzY29wZS5fYXBwbHlGaWx0ZXJzKHZhbHVlLCBudWxsLCB0aGlzLmZpbHRlcnMsIGZhbHNlKTtcbiAgfVxuICBpZiAodGhpcy5wb3N0UHJvY2Vzcykge1xuICAgIHZhbHVlID0gdGhpcy5wb3N0UHJvY2Vzcyh2YWx1ZSk7XG4gIH1cbiAgdGhpcy5hZnRlckdldCgpO1xuICByZXR1cm4gdmFsdWU7XG59O1xuXG4vKipcbiAqIFNldCB0aGUgY29ycmVzcG9uZGluZyB2YWx1ZSB3aXRoIHRoZSBzZXR0ZXIuXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICB2YXIgc2NvcGUgPSB0aGlzLnNjb3BlIHx8IHRoaXMudm07XG4gIGlmICh0aGlzLmZpbHRlcnMpIHtcbiAgICB2YWx1ZSA9IHNjb3BlLl9hcHBseUZpbHRlcnModmFsdWUsIHRoaXMudmFsdWUsIHRoaXMuZmlsdGVycywgdHJ1ZSk7XG4gIH1cbiAgdHJ5IHtcbiAgICB0aGlzLnNldHRlci5jYWxsKHNjb3BlLCBzY29wZSwgdmFsdWUpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgY29uZmlnLndhcm5FeHByZXNzaW9uRXJyb3JzKSB7XG4gICAgICB3YXJuKCdFcnJvciB3aGVuIGV2YWx1YXRpbmcgc2V0dGVyICcgKyAnXCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiOiAnICsgZS50b1N0cmluZygpLCB0aGlzLnZtKTtcbiAgICB9XG4gIH1cbiAgLy8gdHdvLXdheSBzeW5jIGZvciB2LWZvciBhbGlhc1xuICB2YXIgZm9yQ29udGV4dCA9IHNjb3BlLiRmb3JDb250ZXh0O1xuICBpZiAoZm9yQ29udGV4dCAmJiBmb3JDb250ZXh0LmFsaWFzID09PSB0aGlzLmV4cHJlc3Npb24pIHtcbiAgICBpZiAoZm9yQ29udGV4dC5maWx0ZXJzKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0l0IHNlZW1zIHlvdSBhcmUgdXNpbmcgdHdvLXdheSBiaW5kaW5nIG9uICcgKyAnYSB2LWZvciBhbGlhcyAoJyArIHRoaXMuZXhwcmVzc2lvbiArICcpLCBhbmQgdGhlICcgKyAndi1mb3IgaGFzIGZpbHRlcnMuIFRoaXMgd2lsbCBub3Qgd29yayBwcm9wZXJseS4gJyArICdFaXRoZXIgcmVtb3ZlIHRoZSBmaWx0ZXJzIG9yIHVzZSBhbiBhcnJheSBvZiAnICsgJ29iamVjdHMgYW5kIGJpbmQgdG8gb2JqZWN0IHByb3BlcnRpZXMgaW5zdGVhZC4nLCB0aGlzLnZtKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZm9yQ29udGV4dC5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHNjb3BlLiRrZXkpIHtcbiAgICAgICAgLy8gb3JpZ2luYWwgaXMgYW4gb2JqZWN0XG4gICAgICAgIGZvckNvbnRleHQucmF3VmFsdWVbc2NvcGUuJGtleV0gPSB2YWx1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZvckNvbnRleHQucmF3VmFsdWUuJHNldChzY29wZS4kaW5kZXgsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufTtcblxuLyoqXG4gKiBQcmVwYXJlIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYmVmb3JlR2V0ID0gZnVuY3Rpb24gKCkge1xuICBEZXAudGFyZ2V0ID0gdGhpcztcbn07XG5cbi8qKlxuICogQWRkIGEgZGVwZW5kZW5jeSB0byB0aGlzIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0RlcH0gZGVwXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYWRkRGVwID0gZnVuY3Rpb24gKGRlcCkge1xuICB2YXIgaWQgPSBkZXAuaWQ7XG4gIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGlkKSkge1xuICAgIHRoaXMubmV3RGVwSWRzLmFkZChpZCk7XG4gICAgdGhpcy5uZXdEZXBzLnB1c2goZGVwKTtcbiAgICBpZiAoIXRoaXMuZGVwSWRzLmhhcyhpZCkpIHtcbiAgICAgIGRlcC5hZGRTdWIodGhpcyk7XG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIENsZWFuIHVwIGZvciBkZXBlbmRlbmN5IGNvbGxlY3Rpb24uXG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUuYWZ0ZXJHZXQgPSBmdW5jdGlvbiAoKSB7XG4gIERlcC50YXJnZXQgPSBudWxsO1xuICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICB2YXIgZGVwID0gdGhpcy5kZXBzW2ldO1xuICAgIGlmICghdGhpcy5uZXdEZXBJZHMuaGFzKGRlcC5pZCkpIHtcbiAgICAgIGRlcC5yZW1vdmVTdWIodGhpcyk7XG4gICAgfVxuICB9XG4gIHZhciB0bXAgPSB0aGlzLmRlcElkcztcbiAgdGhpcy5kZXBJZHMgPSB0aGlzLm5ld0RlcElkcztcbiAgdGhpcy5uZXdEZXBJZHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwSWRzLmNsZWFyKCk7XG4gIHRtcCA9IHRoaXMuZGVwcztcbiAgdGhpcy5kZXBzID0gdGhpcy5uZXdEZXBzO1xuICB0aGlzLm5ld0RlcHMgPSB0bXA7XG4gIHRoaXMubmV3RGVwcy5sZW5ndGggPSAwO1xufTtcblxuLyoqXG4gKiBTdWJzY3JpYmVyIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIHdoZW4gYSBkZXBlbmRlbmN5IGNoYW5nZXMuXG4gKlxuICogQHBhcmFtIHtCb29sZWFufSBzaGFsbG93XG4gKi9cblxuV2F0Y2hlci5wcm90b3R5cGUudXBkYXRlID0gZnVuY3Rpb24gKHNoYWxsb3cpIHtcbiAgaWYgKHRoaXMubGF6eSkge1xuICAgIHRoaXMuZGlydHkgPSB0cnVlO1xuICB9IGVsc2UgaWYgKHRoaXMuc3luYyB8fCAhY29uZmlnLmFzeW5jKSB7XG4gICAgdGhpcy5ydW4oKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBpZiBxdWV1ZWQsIG9ubHkgb3ZlcndyaXRlIHNoYWxsb3cgd2l0aCBub24tc2hhbGxvdyxcbiAgICAvLyBidXQgbm90IHRoZSBvdGhlciB3YXkgYXJvdW5kLlxuICAgIHRoaXMuc2hhbGxvdyA9IHRoaXMucXVldWVkID8gc2hhbGxvdyA/IHRoaXMuc2hhbGxvdyA6IGZhbHNlIDogISFzaGFsbG93O1xuICAgIHRoaXMucXVldWVkID0gdHJ1ZTtcbiAgICAvLyByZWNvcmQgYmVmb3JlLXB1c2ggZXJyb3Igc3RhY2sgaW4gZGVidWcgbW9kZVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1Zykge1xuICAgICAgdGhpcy5wcmV2RXJyb3IgPSBuZXcgRXJyb3IoJ1t2dWVdIGFzeW5jIHN0YWNrIHRyYWNlJyk7XG4gICAgfVxuICAgIHB1c2hXYXRjaGVyKHRoaXMpO1xuICB9XG59O1xuXG4vKipcbiAqIEJhdGNoZXIgam9iIGludGVyZmFjZS5cbiAqIFdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBiYXRjaGVyLlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnJ1biA9IGZ1bmN0aW9uICgpIHtcbiAgaWYgKHRoaXMuYWN0aXZlKSB7XG4gICAgdmFyIHZhbHVlID0gdGhpcy5nZXQoKTtcbiAgICBpZiAodmFsdWUgIT09IHRoaXMudmFsdWUgfHxcbiAgICAvLyBEZWVwIHdhdGNoZXJzIGFuZCB3YXRjaGVycyBvbiBPYmplY3QvQXJyYXlzIHNob3VsZCBmaXJlIGV2ZW5cbiAgICAvLyB3aGVuIHRoZSB2YWx1ZSBpcyB0aGUgc2FtZSwgYmVjYXVzZSB0aGUgdmFsdWUgbWF5XG4gICAgLy8gaGF2ZSBtdXRhdGVkOyBidXQgb25seSBkbyBzbyBpZiB0aGlzIGlzIGFcbiAgICAvLyBub24tc2hhbGxvdyB1cGRhdGUgKGNhdXNlZCBieSBhIHZtIGRpZ2VzdCkuXG4gICAgKGlzT2JqZWN0KHZhbHVlKSB8fCB0aGlzLmRlZXApICYmICF0aGlzLnNoYWxsb3cpIHtcbiAgICAgIC8vIHNldCBuZXcgdmFsdWVcbiAgICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMudmFsdWU7XG4gICAgICB0aGlzLnZhbHVlID0gdmFsdWU7XG4gICAgICAvLyBpbiBkZWJ1ZyArIGFzeW5jIG1vZGUsIHdoZW4gYSB3YXRjaGVyIGNhbGxiYWNrc1xuICAgICAgLy8gdGhyb3dzLCB3ZSBhbHNvIHRocm93IHRoZSBzYXZlZCBiZWZvcmUtcHVzaCBlcnJvclxuICAgICAgLy8gc28gdGhlIGZ1bGwgY3Jvc3MtdGljayBzdGFjayB0cmFjZSBpcyBhdmFpbGFibGUuXG4gICAgICB2YXIgcHJldkVycm9yID0gdGhpcy5wcmV2RXJyb3I7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGNvbmZpZy5kZWJ1ZyAmJiBwcmV2RXJyb3IpIHtcbiAgICAgICAgdGhpcy5wcmV2RXJyb3IgPSBudWxsO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdGhyb3cgcHJldkVycm9yO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIHRocm93IGU7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY2IuY2FsbCh0aGlzLnZtLCB2YWx1ZSwgb2xkVmFsdWUpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnF1ZXVlZCA9IHRoaXMuc2hhbGxvdyA9IGZhbHNlO1xuICB9XG59O1xuXG4vKipcbiAqIEV2YWx1YXRlIHRoZSB2YWx1ZSBvZiB0aGUgd2F0Y2hlci5cbiAqIFRoaXMgb25seSBnZXRzIGNhbGxlZCBmb3IgbGF6eSB3YXRjaGVycy5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5ldmFsdWF0ZSA9IGZ1bmN0aW9uICgpIHtcbiAgLy8gYXZvaWQgb3ZlcndyaXRpbmcgYW5vdGhlciB3YXRjaGVyIHRoYXQgaXMgYmVpbmdcbiAgLy8gY29sbGVjdGVkLlxuICB2YXIgY3VycmVudCA9IERlcC50YXJnZXQ7XG4gIHRoaXMudmFsdWUgPSB0aGlzLmdldCgpO1xuICB0aGlzLmRpcnR5ID0gZmFsc2U7XG4gIERlcC50YXJnZXQgPSBjdXJyZW50O1xufTtcblxuLyoqXG4gKiBEZXBlbmQgb24gYWxsIGRlcHMgY29sbGVjdGVkIGJ5IHRoaXMgd2F0Y2hlci5cbiAqL1xuXG5XYXRjaGVyLnByb3RvdHlwZS5kZXBlbmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBpID0gdGhpcy5kZXBzLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIHRoaXMuZGVwc1tpXS5kZXBlbmQoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBSZW1vdmUgc2VsZiBmcm9tIGFsbCBkZXBlbmRlbmNpZXMnIHN1YmNyaWJlciBsaXN0LlxuICovXG5cbldhdGNoZXIucHJvdG90eXBlLnRlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5hY3RpdmUpIHtcbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIHZtJ3Mgd2F0Y2hlciBsaXN0XG4gICAgLy8gdGhpcyBpcyBhIHNvbWV3aGF0IGV4cGVuc2l2ZSBvcGVyYXRpb24gc28gd2Ugc2tpcCBpdFxuICAgIC8vIGlmIHRoZSB2bSBpcyBiZWluZyBkZXN0cm95ZWQgb3IgaXMgcGVyZm9ybWluZyBhIHYtZm9yXG4gICAgLy8gcmUtcmVuZGVyICh0aGUgd2F0Y2hlciBsaXN0IGlzIHRoZW4gZmlsdGVyZWQgYnkgdi1mb3IpLlxuICAgIGlmICghdGhpcy52bS5faXNCZWluZ0Rlc3Ryb3llZCAmJiAhdGhpcy52bS5fdkZvclJlbW92aW5nKSB7XG4gICAgICB0aGlzLnZtLl93YXRjaGVycy4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICB2YXIgaSA9IHRoaXMuZGVwcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy5kZXBzW2ldLnJlbW92ZVN1Yih0aGlzKTtcbiAgICB9XG4gICAgdGhpcy5hY3RpdmUgPSBmYWxzZTtcbiAgICB0aGlzLnZtID0gdGhpcy5jYiA9IHRoaXMudmFsdWUgPSBudWxsO1xuICB9XG59O1xuXG4vKipcbiAqIFJlY3J1c2l2ZWx5IHRyYXZlcnNlIGFuIG9iamVjdCB0byBldm9rZSBhbGwgY29udmVydGVkXG4gKiBnZXR0ZXJzLCBzbyB0aGF0IGV2ZXJ5IG5lc3RlZCBwcm9wZXJ0eSBpbnNpZGUgdGhlIG9iamVjdFxuICogaXMgY29sbGVjdGVkIGFzIGEgXCJkZWVwXCIgZGVwZW5kZW5jeS5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbFxuICovXG5cbnZhciBzZWVuT2JqZWN0cyA9IG5ldyBfU2V0KCk7XG5mdW5jdGlvbiB0cmF2ZXJzZSh2YWwsIHNlZW4pIHtcbiAgdmFyIGkgPSB1bmRlZmluZWQsXG4gICAgICBrZXlzID0gdW5kZWZpbmVkO1xuICBpZiAoIXNlZW4pIHtcbiAgICBzZWVuID0gc2Vlbk9iamVjdHM7XG4gICAgc2Vlbi5jbGVhcigpO1xuICB9XG4gIHZhciBpc0EgPSBpc0FycmF5KHZhbCk7XG4gIHZhciBpc08gPSBpc09iamVjdCh2YWwpO1xuICBpZiAoKGlzQSB8fCBpc08pICYmIE9iamVjdC5pc0V4dGVuc2libGUodmFsKSkge1xuICAgIGlmICh2YWwuX19vYl9fKSB7XG4gICAgICB2YXIgZGVwSWQgPSB2YWwuX19vYl9fLmRlcC5pZDtcbiAgICAgIGlmIChzZWVuLmhhcyhkZXBJZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2Vlbi5hZGQoZGVwSWQpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNBKSB7XG4gICAgICBpID0gdmFsLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHRyYXZlcnNlKHZhbFtpXSwgc2Vlbik7XG4gICAgfSBlbHNlIGlmIChpc08pIHtcbiAgICAgIGtleXMgPSBPYmplY3Qua2V5cyh2YWwpO1xuICAgICAgaSA9IGtleXMubGVuZ3RoO1xuICAgICAgd2hpbGUgKGktLSkgdHJhdmVyc2UodmFsW2tleXNbaV1dLCBzZWVuKTtcbiAgICB9XG4gIH1cbn1cblxudmFyIHRleHQkMSA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHRoaXMuYXR0ciA9IHRoaXMuZWwubm9kZVR5cGUgPT09IDMgPyAnZGF0YScgOiAndGV4dENvbnRlbnQnO1xuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdGhpcy5lbFt0aGlzLmF0dHJdID0gX3RvU3RyaW5nKHZhbHVlKTtcbiAgfVxufTtcblxudmFyIHRlbXBsYXRlQ2FjaGUgPSBuZXcgQ2FjaGUoMTAwMCk7XG52YXIgaWRTZWxlY3RvckNhY2hlID0gbmV3IENhY2hlKDEwMDApO1xuXG52YXIgbWFwID0ge1xuICBlZmF1bHQ6IFswLCAnJywgJyddLFxuICBsZWdlbmQ6IFsxLCAnPGZpZWxkc2V0PicsICc8L2ZpZWxkc2V0PiddLFxuICB0cjogWzIsICc8dGFibGU+PHRib2R5PicsICc8L3Rib2R5PjwvdGFibGU+J10sXG4gIGNvbDogWzIsICc8dGFibGU+PHRib2R5PjwvdGJvZHk+PGNvbGdyb3VwPicsICc8L2NvbGdyb3VwPjwvdGFibGU+J11cbn07XG5cbm1hcC50ZCA9IG1hcC50aCA9IFszLCAnPHRhYmxlPjx0Ym9keT48dHI+JywgJzwvdHI+PC90Ym9keT48L3RhYmxlPiddO1xuXG5tYXAub3B0aW9uID0gbWFwLm9wdGdyb3VwID0gWzEsICc8c2VsZWN0IG11bHRpcGxlPVwibXVsdGlwbGVcIj4nLCAnPC9zZWxlY3Q+J107XG5cbm1hcC50aGVhZCA9IG1hcC50Ym9keSA9IG1hcC5jb2xncm91cCA9IG1hcC5jYXB0aW9uID0gbWFwLnRmb290ID0gWzEsICc8dGFibGU+JywgJzwvdGFibGU+J107XG5cbm1hcC5nID0gbWFwLmRlZnMgPSBtYXAuc3ltYm9sID0gbWFwLnVzZSA9IG1hcC5pbWFnZSA9IG1hcC50ZXh0ID0gbWFwLmNpcmNsZSA9IG1hcC5lbGxpcHNlID0gbWFwLmxpbmUgPSBtYXAucGF0aCA9IG1hcC5wb2x5Z29uID0gbWFwLnBvbHlsaW5lID0gbWFwLnJlY3QgPSBbMSwgJzxzdmcgJyArICd4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIgJyArICd4bWxuczp4bGluaz1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmtcIiAnICsgJ3htbG5zOmV2PVwiaHR0cDovL3d3dy53My5vcmcvMjAwMS94bWwtZXZlbnRzXCInICsgJ3ZlcnNpb249XCIxLjFcIj4nLCAnPC9zdmc+J107XG5cbi8qKlxuICogQ2hlY2sgaWYgYSBub2RlIGlzIGEgc3VwcG9ydGVkIHRlbXBsYXRlIG5vZGUgd2l0aCBhXG4gKiBEb2N1bWVudEZyYWdtZW50IGNvbnRlbnQuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzUmVhbFRlbXBsYXRlKG5vZGUpIHtcbiAgcmV0dXJuIGlzVGVtcGxhdGUobm9kZSkgJiYgaXNGcmFnbWVudChub2RlLmNvbnRlbnQpO1xufVxuXG52YXIgdGFnUkUkMSA9IC88KFtcXHc6LV0rKS87XG52YXIgZW50aXR5UkUgPSAvJiM/XFx3Kz87LztcbnZhciBjb21tZW50UkUgPSAvPCEtLS87XG5cbi8qKlxuICogQ29udmVydCBhIHN0cmluZyB0ZW1wbGF0ZSB0byBhIERvY3VtZW50RnJhZ21lbnQuXG4gKiBEZXRlcm1pbmVzIGNvcnJlY3Qgd3JhcHBpbmcgYnkgdGFnIHR5cGVzLiBXcmFwcGluZ1xuICogc3RyYXRlZ3kgZm91bmQgaW4galF1ZXJ5ICYgY29tcG9uZW50L2RvbWlmeS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdGVtcGxhdGVTdHJpbmdcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gcmF3XG4gKiBAcmV0dXJuIHtEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHN0cmluZ1RvRnJhZ21lbnQodGVtcGxhdGVTdHJpbmcsIHJhdykge1xuICAvLyB0cnkgYSBjYWNoZSBoaXQgZmlyc3RcbiAgdmFyIGNhY2hlS2V5ID0gcmF3ID8gdGVtcGxhdGVTdHJpbmcgOiB0ZW1wbGF0ZVN0cmluZy50cmltKCk7XG4gIHZhciBoaXQgPSB0ZW1wbGF0ZUNhY2hlLmdldChjYWNoZUtleSk7XG4gIGlmIChoaXQpIHtcbiAgICByZXR1cm4gaGl0O1xuICB9XG5cbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciB0YWdNYXRjaCA9IHRlbXBsYXRlU3RyaW5nLm1hdGNoKHRhZ1JFJDEpO1xuICB2YXIgZW50aXR5TWF0Y2ggPSBlbnRpdHlSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcbiAgdmFyIGNvbW1lbnRNYXRjaCA9IGNvbW1lbnRSRS50ZXN0KHRlbXBsYXRlU3RyaW5nKTtcblxuICBpZiAoIXRhZ01hdGNoICYmICFlbnRpdHlNYXRjaCAmJiAhY29tbWVudE1hdGNoKSB7XG4gICAgLy8gdGV4dCBvbmx5LCByZXR1cm4gYSBzaW5nbGUgdGV4dCBub2RlLlxuICAgIGZyYWcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGVtcGxhdGVTdHJpbmcpKTtcbiAgfSBlbHNlIHtcbiAgICB2YXIgdGFnID0gdGFnTWF0Y2ggJiYgdGFnTWF0Y2hbMV07XG4gICAgdmFyIHdyYXAgPSBtYXBbdGFnXSB8fCBtYXAuZWZhdWx0O1xuICAgIHZhciBkZXB0aCA9IHdyYXBbMF07XG4gICAgdmFyIHByZWZpeCA9IHdyYXBbMV07XG4gICAgdmFyIHN1ZmZpeCA9IHdyYXBbMl07XG4gICAgdmFyIG5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblxuICAgIG5vZGUuaW5uZXJIVE1MID0gcHJlZml4ICsgdGVtcGxhdGVTdHJpbmcgKyBzdWZmaXg7XG4gICAgd2hpbGUgKGRlcHRoLS0pIHtcbiAgICAgIG5vZGUgPSBub2RlLmxhc3RDaGlsZDtcbiAgICB9XG5cbiAgICB2YXIgY2hpbGQ7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICB3aGlsZSAoY2hpbGQgPSBub2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICAgIGZyYWcuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgfVxuICBpZiAoIXJhdykge1xuICAgIHRyaW1Ob2RlKGZyYWcpO1xuICB9XG4gIHRlbXBsYXRlQ2FjaGUucHV0KGNhY2hlS2V5LCBmcmFnKTtcbiAgcmV0dXJuIGZyYWc7XG59XG5cbi8qKlxuICogQ29udmVydCBhIHRlbXBsYXRlIG5vZGUgdG8gYSBEb2N1bWVudEZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7Tm9kZX0gbm9kZVxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBub2RlVG9GcmFnbWVudChub2RlKSB7XG4gIC8vIGlmIGl0cyBhIHRlbXBsYXRlIHRhZyBhbmQgdGhlIGJyb3dzZXIgc3VwcG9ydHMgaXQsXG4gIC8vIGl0cyBjb250ZW50IGlzIGFscmVhZHkgYSBkb2N1bWVudCBmcmFnbWVudC4gSG93ZXZlciwgaU9TIFNhZmFyaSBoYXNcbiAgLy8gYnVnIHdoZW4gdXNpbmcgZGlyZWN0bHkgY2xvbmVkIHRlbXBsYXRlIGNvbnRlbnQgd2l0aCB0b3VjaFxuICAvLyBldmVudHMgYW5kIGNhbiBjYXVzZSBjcmFzaGVzIHdoZW4gdGhlIG5vZGVzIGFyZSByZW1vdmVkIGZyb20gRE9NLCBzbyB3ZVxuICAvLyBoYXZlIHRvIHRyZWF0IHRlbXBsYXRlIGVsZW1lbnRzIGFzIHN0cmluZyB0ZW1wbGF0ZXMuICgjMjgwNSlcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChpc1JlYWxUZW1wbGF0ZShub2RlKSkge1xuICAgIHJldHVybiBzdHJpbmdUb0ZyYWdtZW50KG5vZGUuaW5uZXJIVE1MKTtcbiAgfVxuICAvLyBzY3JpcHQgdGVtcGxhdGVcbiAgaWYgKG5vZGUudGFnTmFtZSA9PT0gJ1NDUklQVCcpIHtcbiAgICByZXR1cm4gc3RyaW5nVG9GcmFnbWVudChub2RlLnRleHRDb250ZW50KTtcbiAgfVxuICAvLyBub3JtYWwgbm9kZSwgY2xvbmUgaXQgdG8gYXZvaWQgbXV0YXRpbmcgdGhlIG9yaWdpbmFsXG4gIHZhciBjbG9uZWROb2RlID0gY2xvbmVOb2RlKG5vZGUpO1xuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgdmFyIGNoaWxkO1xuICAvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICB3aGlsZSAoY2hpbGQgPSBjbG9uZWROb2RlLmZpcnN0Q2hpbGQpIHtcbiAgICAvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG4gICAgZnJhZy5hcHBlbmRDaGlsZChjaGlsZCk7XG4gIH1cbiAgdHJpbU5vZGUoZnJhZyk7XG4gIHJldHVybiBmcmFnO1xufVxuXG4vLyBUZXN0IGZvciB0aGUgcHJlc2VuY2Ugb2YgdGhlIFNhZmFyaSB0ZW1wbGF0ZSBjbG9uaW5nIGJ1Z1xuLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd3VnLmNnaT9pZD0xMzc3NTVcbnZhciBoYXNCcm9rZW5UZW1wbGF0ZSA9IChmdW5jdGlvbiAoKSB7XG4gIC8qIGlzdGFuYnVsIGlnbm9yZSBlbHNlICovXG4gIGlmIChpbkJyb3dzZXIpIHtcbiAgICB2YXIgYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGEuaW5uZXJIVE1MID0gJzx0ZW1wbGF0ZT4xPC90ZW1wbGF0ZT4nO1xuICAgIHJldHVybiAhYS5jbG9uZU5vZGUodHJ1ZSkuZmlyc3RDaGlsZC5pbm5lckhUTUw7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KSgpO1xuXG4vLyBUZXN0IGZvciBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGNsb25lIGJ1Z1xudmFyIGhhc1RleHRhcmVhQ2xvbmVCdWcgPSAoZnVuY3Rpb24gKCkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgZWxzZSAqL1xuICBpZiAoaW5Ccm93c2VyKSB7XG4gICAgdmFyIHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xuICAgIHQucGxhY2Vob2xkZXIgPSAndCc7XG4gICAgcmV0dXJuIHQuY2xvbmVOb2RlKHRydWUpLnZhbHVlID09PSAndCc7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG59KSgpO1xuXG4vKipcbiAqIDEuIERlYWwgd2l0aCBTYWZhcmkgY2xvbmluZyBuZXN0ZWQgPHRlbXBsYXRlPiBidWcgYnlcbiAqICAgIG1hbnVhbGx5IGNsb25pbmcgYWxsIHRlbXBsYXRlIGluc3RhbmNlcy5cbiAqIDIuIERlYWwgd2l0aCBJRTEwLzExIHRleHRhcmVhIHBsYWNlaG9sZGVyIGJ1ZyBieSBzZXR0aW5nXG4gKiAgICB0aGUgY29ycmVjdCB2YWx1ZSBhZnRlciBjbG9uaW5nLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBub2RlXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gY2xvbmVOb2RlKG5vZGUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghbm9kZS5xdWVyeVNlbGVjdG9yQWxsKSB7XG4gICAgcmV0dXJuIG5vZGUuY2xvbmVOb2RlKCk7XG4gIH1cbiAgdmFyIHJlcyA9IG5vZGUuY2xvbmVOb2RlKHRydWUpO1xuICB2YXIgaSwgb3JpZ2luYWwsIGNsb25lZDtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChoYXNCcm9rZW5UZW1wbGF0ZSkge1xuICAgIHZhciB0ZW1wQ2xvbmUgPSByZXM7XG4gICAgaWYgKGlzUmVhbFRlbXBsYXRlKG5vZGUpKSB7XG4gICAgICBub2RlID0gbm9kZS5jb250ZW50O1xuICAgICAgdGVtcENsb25lID0gcmVzLmNvbnRlbnQ7XG4gICAgfVxuICAgIG9yaWdpbmFsID0gbm9kZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICAgIGNsb25lZCA9IHRlbXBDbG9uZS5xdWVyeVNlbGVjdG9yQWxsKCd0ZW1wbGF0ZScpO1xuICAgICAgaSA9IGNsb25lZC5sZW5ndGg7XG4gICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgIGNsb25lZFtpXS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChjbG9uZU5vZGUob3JpZ2luYWxbaV0pLCBjbG9uZWRbaV0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKGhhc1RleHRhcmVhQ2xvbmVCdWcpIHtcbiAgICBpZiAobm9kZS50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICByZXMudmFsdWUgPSBub2RlLnZhbHVlO1xuICAgIH0gZWxzZSB7XG4gICAgICBvcmlnaW5hbCA9IG5vZGUucXVlcnlTZWxlY3RvckFsbCgndGV4dGFyZWEnKTtcbiAgICAgIGlmIChvcmlnaW5hbC5sZW5ndGgpIHtcbiAgICAgICAgY2xvbmVkID0gcmVzLnF1ZXJ5U2VsZWN0b3JBbGwoJ3RleHRhcmVhJyk7XG4gICAgICAgIGkgPSBjbG9uZWQubGVuZ3RoO1xuICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgY2xvbmVkW2ldLnZhbHVlID0gb3JpZ2luYWxbaV0udmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24gYW5kIG5vcm1hbGl6ZXMgaXQgaW50byBhXG4gKiBhIERvY3VtZW50RnJhZ21lbnQgdGhhdCBjYW4gYmUgdXNlZCBhcyBhIHBhcnRpYWwgb3IgYVxuICogaW5zdGFuY2UgdGVtcGxhdGUuXG4gKlxuICogQHBhcmFtIHsqfSB0ZW1wbGF0ZVxuICogICAgICAgIFBvc3NpYmxlIHZhbHVlcyBpbmNsdWRlOlxuICogICAgICAgIC0gRG9jdW1lbnRGcmFnbWVudCBvYmplY3RcbiAqICAgICAgICAtIE5vZGUgb2JqZWN0IG9mIHR5cGUgVGVtcGxhdGVcbiAqICAgICAgICAtIGlkIHNlbGVjdG9yOiAnI3NvbWUtdGVtcGxhdGUtaWQnXG4gKiAgICAgICAgLSB0ZW1wbGF0ZSBzdHJpbmc6ICc8ZGl2PjxzcGFuPnt7bXNnfX08L3NwYW4+PC9kaXY+J1xuICogQHBhcmFtIHtCb29sZWFufSBzaG91bGRDbG9uZVxuICogQHBhcmFtIHtCb29sZWFufSByYXdcbiAqICAgICAgICBpbmxpbmUgSFRNTCBpbnRlcnBvbGF0aW9uLiBEbyBub3QgY2hlY2sgZm9yIGlkXG4gKiAgICAgICAgc2VsZWN0b3IgYW5kIGtlZXAgd2hpdGVzcGFjZSBpbiB0aGUgc3RyaW5nLlxuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudHx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgc2hvdWxkQ2xvbmUsIHJhdykge1xuICB2YXIgbm9kZSwgZnJhZztcblxuICAvLyBpZiB0aGUgdGVtcGxhdGUgaXMgYWxyZWFkeSBhIGRvY3VtZW50IGZyYWdtZW50LFxuICAvLyBkbyBub3RoaW5nXG4gIGlmIChpc0ZyYWdtZW50KHRlbXBsYXRlKSkge1xuICAgIHRyaW1Ob2RlKHRlbXBsYXRlKTtcbiAgICByZXR1cm4gc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUodGVtcGxhdGUpIDogdGVtcGxhdGU7XG4gIH1cblxuICBpZiAodHlwZW9mIHRlbXBsYXRlID09PSAnc3RyaW5nJykge1xuICAgIC8vIGlkIHNlbGVjdG9yXG4gICAgaWYgKCFyYXcgJiYgdGVtcGxhdGUuY2hhckF0KDApID09PSAnIycpIHtcbiAgICAgIC8vIGlkIHNlbGVjdG9yIGNhbiBiZSBjYWNoZWQgdG9vXG4gICAgICBmcmFnID0gaWRTZWxlY3RvckNhY2hlLmdldCh0ZW1wbGF0ZSk7XG4gICAgICBpZiAoIWZyYWcpIHtcbiAgICAgICAgbm9kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRlbXBsYXRlLnNsaWNlKDEpKTtcbiAgICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQobm9kZSk7XG4gICAgICAgICAgLy8gc2F2ZSBzZWxlY3RvciB0byBjYWNoZVxuICAgICAgICAgIGlkU2VsZWN0b3JDYWNoZS5wdXQodGVtcGxhdGUsIGZyYWcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vcm1hbCBzdHJpbmcgdGVtcGxhdGVcbiAgICAgIGZyYWcgPSBzdHJpbmdUb0ZyYWdtZW50KHRlbXBsYXRlLCByYXcpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0ZW1wbGF0ZS5ub2RlVHlwZSkge1xuICAgIC8vIGEgZGlyZWN0IG5vZGVcbiAgICBmcmFnID0gbm9kZVRvRnJhZ21lbnQodGVtcGxhdGUpO1xuICB9XG5cbiAgcmV0dXJuIGZyYWcgJiYgc2hvdWxkQ2xvbmUgPyBjbG9uZU5vZGUoZnJhZykgOiBmcmFnO1xufVxuXG52YXIgdGVtcGxhdGUgPSBPYmplY3QuZnJlZXplKHtcbiAgY2xvbmVOb2RlOiBjbG9uZU5vZGUsXG4gIHBhcnNlVGVtcGxhdGU6IHBhcnNlVGVtcGxhdGVcbn0pO1xuXG52YXIgaHRtbCA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGEgY29tbWVudCBub2RlIG1lYW5zIHRoaXMgaXMgYSBiaW5kaW5nIGZvclxuICAgIC8vIHt7eyBpbmxpbmUgdW5lc2NhcGVkIGh0bWwgfX19XG4gICAgaWYgKHRoaXMuZWwubm9kZVR5cGUgPT09IDgpIHtcbiAgICAgIC8vIGhvbGQgbm9kZXNcbiAgICAgIHRoaXMubm9kZXMgPSBbXTtcbiAgICAgIC8vIHJlcGxhY2UgdGhlIHBsYWNlaG9sZGVyIHdpdGggcHJvcGVyIGFuY2hvclxuICAgICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtaHRtbCcpO1xuICAgICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmFuY2hvcik7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgIGlmICh0aGlzLm5vZGVzKSB7XG4gICAgICB0aGlzLnN3YXAodmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVsLmlubmVySFRNTCA9IHZhbHVlO1xuICAgIH1cbiAgfSxcblxuICBzd2FwOiBmdW5jdGlvbiBzd2FwKHZhbHVlKSB7XG4gICAgLy8gcmVtb3ZlIG9sZCBub2Rlc1xuICAgIHZhciBpID0gdGhpcy5ub2Rlcy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcmVtb3ZlKHRoaXMubm9kZXNbaV0pO1xuICAgIH1cbiAgICAvLyBjb252ZXJ0IG5ldyB2YWx1ZSB0byBhIGZyYWdtZW50XG4gICAgLy8gZG8gbm90IGF0dGVtcHQgdG8gcmV0cmlldmUgZnJvbSBpZCBzZWxlY3RvclxuICAgIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh2YWx1ZSwgdHJ1ZSwgdHJ1ZSk7XG4gICAgLy8gc2F2ZSBhIHJlZmVyZW5jZSB0byB0aGVzZSBub2RlcyBzbyB3ZSBjYW4gcmVtb3ZlIGxhdGVyXG4gICAgdGhpcy5ub2RlcyA9IHRvQXJyYXkoZnJhZy5jaGlsZE5vZGVzKTtcbiAgICBiZWZvcmUoZnJhZywgdGhpcy5hbmNob3IpO1xuICB9XG59O1xuXG4vKipcbiAqIEFic3RyYWN0aW9uIGZvciBhIHBhcnRpYWxseS1jb21waWxlZCBmcmFnbWVudC5cbiAqIENhbiBvcHRpb25hbGx5IGNvbXBpbGUgY29udGVudCB3aXRoIGEgY2hpbGQgc2NvcGUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gbGlua2VyXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RG9jdW1lbnRGcmFnbWVudH0gZnJhZ1xuICogQHBhcmFtIHtWdWV9IFtob3N0XVxuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAqIEBwYXJhbSB7RnJhZ21lbnR9IFtwYXJlbnRGcmFnXVxuICovXG5mdW5jdGlvbiBGcmFnbWVudChsaW5rZXIsIHZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZykge1xuICB0aGlzLmNoaWxkcmVuID0gW107XG4gIHRoaXMuY2hpbGRGcmFncyA9IFtdO1xuICB0aGlzLnZtID0gdm07XG4gIHRoaXMuc2NvcGUgPSBzY29wZTtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB0aGlzLnBhcmVudEZyYWcgPSBwYXJlbnRGcmFnO1xuICBpZiAocGFyZW50RnJhZykge1xuICAgIHBhcmVudEZyYWcuY2hpbGRGcmFncy5wdXNoKHRoaXMpO1xuICB9XG4gIHRoaXMudW5saW5rID0gbGlua2VyKHZtLCBmcmFnLCBob3N0LCBzY29wZSwgdGhpcyk7XG4gIHZhciBzaW5nbGUgPSB0aGlzLnNpbmdsZSA9IGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiZcbiAgLy8gZG8gbm90IGdvIHNpbmdsZSBtb2RlIGlmIHRoZSBvbmx5IG5vZGUgaXMgYW4gYW5jaG9yXG4gICFmcmFnLmNoaWxkTm9kZXNbMF0uX192X2FuY2hvcjtcbiAgaWYgKHNpbmdsZSkge1xuICAgIHRoaXMubm9kZSA9IGZyYWcuY2hpbGROb2Rlc1swXTtcbiAgICB0aGlzLmJlZm9yZSA9IHNpbmdsZUJlZm9yZTtcbiAgICB0aGlzLnJlbW92ZSA9IHNpbmdsZVJlbW92ZTtcbiAgfSBlbHNlIHtcbiAgICB0aGlzLm5vZGUgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LXN0YXJ0Jyk7XG4gICAgdGhpcy5lbmQgPSBjcmVhdGVBbmNob3IoJ2ZyYWdtZW50LWVuZCcpO1xuICAgIHRoaXMuZnJhZyA9IGZyYWc7XG4gICAgcHJlcGVuZCh0aGlzLm5vZGUsIGZyYWcpO1xuICAgIGZyYWcuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuICAgIHRoaXMuYmVmb3JlID0gbXVsdGlCZWZvcmU7XG4gICAgdGhpcy5yZW1vdmUgPSBtdWx0aVJlbW92ZTtcbiAgfVxuICB0aGlzLm5vZGUuX192X2ZyYWcgPSB0aGlzO1xufVxuXG4vKipcbiAqIENhbGwgYXR0YWNoL2RldGFjaCBmb3IgYWxsIGNvbXBvbmVudHMgY29udGFpbmVkIHdpdGhpblxuICogdGhpcyBmcmFnbWVudC4gQWxzbyBkbyBzbyByZWN1cnNpdmVseSBmb3IgYWxsIGNoaWxkXG4gKiBmcmFnbWVudHMuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gaG9va1xuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5jYWxsSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XG4gIHZhciBpLCBsO1xuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZEZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRoaXMuY2hpbGRGcmFnc1tpXS5jYWxsSG9vayhob29rKTtcbiAgfVxuICBmb3IgKGkgPSAwLCBsID0gdGhpcy5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBob29rKHRoaXMuY2hpbGRyZW5baV0pO1xuICB9XG59O1xuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBzaW5nbGUgbm9kZSB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBzaW5nbGVCZWZvcmUodGFyZ2V0LCB3aXRoVHJhbnNpdGlvbikge1xuICB0aGlzLmluc2VydGVkID0gdHJ1ZTtcbiAgdmFyIG1ldGhvZCA9IHdpdGhUcmFuc2l0aW9uICE9PSBmYWxzZSA/IGJlZm9yZVdpdGhUcmFuc2l0aW9uIDogYmVmb3JlO1xuICBtZXRob2QodGhpcy5ub2RlLCB0YXJnZXQsIHRoaXMudm0pO1xuICBpZiAoaW5Eb2ModGhpcy5ub2RlKSkge1xuICAgIHRoaXMuY2FsbEhvb2soYXR0YWNoKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlbW92ZSBmcmFnbWVudCwgc2luZ2xlIG5vZGUgdmVyc2lvblxuICovXG5cbmZ1bmN0aW9uIHNpbmdsZVJlbW92ZSgpIHtcbiAgdGhpcy5pbnNlcnRlZCA9IGZhbHNlO1xuICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG4gIHZhciBzZWxmID0gdGhpcztcbiAgdGhpcy5iZWZvcmVSZW1vdmUoKTtcbiAgcmVtb3ZlV2l0aFRyYW5zaXRpb24odGhpcy5ub2RlLCB0aGlzLnZtLCBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKHNob3VsZENhbGxSZW1vdmUpIHtcbiAgICAgIHNlbGYuY2FsbEhvb2soZGV0YWNoKTtcbiAgICB9XG4gICAgc2VsZi5kZXN0cm95KCk7XG4gIH0pO1xufVxuXG4vKipcbiAqIEluc2VydCBmcmFnbWVudCBiZWZvcmUgdGFyZ2V0LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gKlxuICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gd2l0aFRyYW5zaXRpb25cbiAqL1xuXG5mdW5jdGlvbiBtdWx0aUJlZm9yZSh0YXJnZXQsIHdpdGhUcmFuc2l0aW9uKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSB0cnVlO1xuICB2YXIgdm0gPSB0aGlzLnZtO1xuICB2YXIgbWV0aG9kID0gd2l0aFRyYW5zaXRpb24gIT09IGZhbHNlID8gYmVmb3JlV2l0aFRyYW5zaXRpb24gOiBiZWZvcmU7XG4gIG1hcE5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgIG1ldGhvZChub2RlLCB0YXJnZXQsIHZtKTtcbiAgfSk7XG4gIGlmIChpbkRvYyh0aGlzLm5vZGUpKSB7XG4gICAgdGhpcy5jYWxsSG9vayhhdHRhY2gpO1xuICB9XG59XG5cbi8qKlxuICogUmVtb3ZlIGZyYWdtZW50LCBtdWx0aS1ub2RlcyB2ZXJzaW9uXG4gKi9cblxuZnVuY3Rpb24gbXVsdGlSZW1vdmUoKSB7XG4gIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZTtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgc2hvdWxkQ2FsbFJlbW92ZSA9IGluRG9jKHRoaXMubm9kZSk7XG4gIHRoaXMuYmVmb3JlUmVtb3ZlKCk7XG4gIHJlbW92ZU5vZGVSYW5nZSh0aGlzLm5vZGUsIHRoaXMuZW5kLCB0aGlzLnZtLCB0aGlzLmZyYWcsIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc2hvdWxkQ2FsbFJlbW92ZSkge1xuICAgICAgc2VsZi5jYWxsSG9vayhkZXRhY2gpO1xuICAgIH1cbiAgICBzZWxmLmRlc3Ryb3koKTtcbiAgfSk7XG59XG5cbi8qKlxuICogUHJlcGFyZSB0aGUgZnJhZ21lbnQgZm9yIHJlbW92YWwuXG4gKi9cblxuRnJhZ21lbnQucHJvdG90eXBlLmJlZm9yZVJlbW92ZSA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGksIGw7XG4gIGZvciAoaSA9IDAsIGwgPSB0aGlzLmNoaWxkRnJhZ3MubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gY2FsbCB0aGUgc2FtZSBtZXRob2QgcmVjdXJzaXZlbHkgb24gY2hpbGRcbiAgICAvLyBmcmFnbWVudHMsIGRlcHRoLWZpcnN0XG4gICAgdGhpcy5jaGlsZEZyYWdzW2ldLmJlZm9yZVJlbW92ZShmYWxzZSk7XG4gIH1cbiAgZm9yIChpID0gMCwgbCA9IHRoaXMuY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gQ2FsbCBkZXN0cm95IGZvciBhbGwgY29udGFpbmVkIGluc3RhbmNlcyxcbiAgICAvLyB3aXRoIHJlbW92ZTpmYWxzZSBhbmQgZGVmZXI6dHJ1ZS5cbiAgICAvLyBEZWZlciBpcyBuZWNlc3NhcnkgYmVjYXVzZSB3ZSBuZWVkIHRvXG4gICAgLy8ga2VlcCB0aGUgY2hpbGRyZW4gdG8gY2FsbCBkZXRhY2ggaG9va3NcbiAgICAvLyBvbiB0aGVtLlxuICAgIHRoaXMuY2hpbGRyZW5baV0uJGRlc3Ryb3koZmFsc2UsIHRydWUpO1xuICB9XG4gIHZhciBkaXJzID0gdGhpcy51bmxpbmsuZGlycztcbiAgZm9yIChpID0gMCwgbCA9IGRpcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgLy8gZGlzYWJsZSB0aGUgd2F0Y2hlcnMgb24gYWxsIHRoZSBkaXJlY3RpdmVzXG4gICAgLy8gc28gdGhhdCB0aGUgcmVuZGVyZWQgY29udGVudCBzdGF5cyB0aGUgc2FtZVxuICAgIC8vIGR1cmluZyByZW1vdmFsLlxuICAgIGRpcnNbaV0uX3dhdGNoZXIgJiYgZGlyc1tpXS5fd2F0Y2hlci50ZWFyZG93bigpO1xuICB9XG59O1xuXG4vKipcbiAqIERlc3Ryb3kgdGhlIGZyYWdtZW50LlxuICovXG5cbkZyYWdtZW50LnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5wYXJlbnRGcmFnKSB7XG4gICAgdGhpcy5wYXJlbnRGcmFnLmNoaWxkRnJhZ3MuJHJlbW92ZSh0aGlzKTtcbiAgfVxuICB0aGlzLm5vZGUuX192X2ZyYWcgPSBudWxsO1xuICB0aGlzLnVubGluaygpO1xufTtcblxuLyoqXG4gKiBDYWxsIGF0dGFjaCBob29rIGZvciBhIFZ1ZSBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAqL1xuXG5mdW5jdGlvbiBhdHRhY2goY2hpbGQpIHtcbiAgaWYgKCFjaGlsZC5faXNBdHRhY2hlZCAmJiBpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICB9XG59XG5cbi8qKlxuICogQ2FsbCBkZXRhY2ggaG9vayBmb3IgYSBWdWUgaW5zdGFuY2UuXG4gKlxuICogQHBhcmFtIHtWdWV9IGNoaWxkXG4gKi9cblxuZnVuY3Rpb24gZGV0YWNoKGNoaWxkKSB7XG4gIGlmIChjaGlsZC5faXNBdHRhY2hlZCAmJiAhaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgIGNoaWxkLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgfVxufVxuXG52YXIgbGlua2VyQ2FjaGUgPSBuZXcgQ2FjaGUoNTAwMCk7XG5cbi8qKlxuICogQSBmYWN0b3J5IHRoYXQgY2FuIGJlIHVzZWQgdG8gY3JlYXRlIGluc3RhbmNlcyBvZiBhXG4gKiBmcmFnbWVudC4gQ2FjaGVzIHRoZSBjb21waWxlZCBsaW5rZXIgaWYgcG9zc2libGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0VsZW1lbnR8U3RyaW5nfSBlbFxuICovXG5mdW5jdGlvbiBGcmFnbWVudEZhY3Rvcnkodm0sIGVsKSB7XG4gIHRoaXMudm0gPSB2bTtcbiAgdmFyIHRlbXBsYXRlO1xuICB2YXIgaXNTdHJpbmcgPSB0eXBlb2YgZWwgPT09ICdzdHJpbmcnO1xuICBpZiAoaXNTdHJpbmcgfHwgaXNUZW1wbGF0ZShlbCkgJiYgIWVsLmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgdGVtcGxhdGUgPSBwYXJzZVRlbXBsYXRlKGVsLCB0cnVlKTtcbiAgfSBlbHNlIHtcbiAgICB0ZW1wbGF0ZSA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgICB0ZW1wbGF0ZS5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbiAgdGhpcy50ZW1wbGF0ZSA9IHRlbXBsYXRlO1xuICAvLyBsaW5rZXIgY2FuIGJlIGNhY2hlZCwgYnV0IG9ubHkgZm9yIGNvbXBvbmVudHNcbiAgdmFyIGxpbmtlcjtcbiAgdmFyIGNpZCA9IHZtLmNvbnN0cnVjdG9yLmNpZDtcbiAgaWYgKGNpZCA+IDApIHtcbiAgICB2YXIgY2FjaGVJZCA9IGNpZCArIChpc1N0cmluZyA/IGVsIDogZ2V0T3V0ZXJIVE1MKGVsKSk7XG4gICAgbGlua2VyID0gbGlua2VyQ2FjaGUuZ2V0KGNhY2hlSWQpO1xuICAgIGlmICghbGlua2VyKSB7XG4gICAgICBsaW5rZXIgPSBjb21waWxlKHRlbXBsYXRlLCB2bS4kb3B0aW9ucywgdHJ1ZSk7XG4gICAgICBsaW5rZXJDYWNoZS5wdXQoY2FjaGVJZCwgbGlua2VyKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgbGlua2VyID0gY29tcGlsZSh0ZW1wbGF0ZSwgdm0uJG9wdGlvbnMsIHRydWUpO1xuICB9XG4gIHRoaXMubGlua2VyID0gbGlua2VyO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGZyYWdtZW50IGluc3RhbmNlIHdpdGggZ2l2ZW4gaG9zdCBhbmQgc2NvcGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IGhvc3RcbiAqIEBwYXJhbSB7T2JqZWN0fSBzY29wZVxuICogQHBhcmFtIHtGcmFnbWVudH0gcGFyZW50RnJhZ1xuICovXG5cbkZyYWdtZW50RmFjdG9yeS5wcm90b3R5cGUuY3JlYXRlID0gZnVuY3Rpb24gKGhvc3QsIHNjb3BlLCBwYXJlbnRGcmFnKSB7XG4gIHZhciBmcmFnID0gY2xvbmVOb2RlKHRoaXMudGVtcGxhdGUpO1xuICByZXR1cm4gbmV3IEZyYWdtZW50KHRoaXMubGlua2VyLCB0aGlzLnZtLCBmcmFnLCBob3N0LCBzY29wZSwgcGFyZW50RnJhZyk7XG59O1xuXG52YXIgT04gPSA3MDA7XG52YXIgTU9ERUwgPSA4MDA7XG52YXIgQklORCA9IDg1MDtcbnZhciBUUkFOU0lUSU9OID0gMTEwMDtcbnZhciBFTCA9IDE1MDA7XG52YXIgQ09NUE9ORU5UID0gMTUwMDtcbnZhciBQQVJUSUFMID0gMTc1MDtcbnZhciBJRiA9IDIxMDA7XG52YXIgRk9SID0gMjIwMDtcbnZhciBTTE9UID0gMjMwMDtcblxudmFyIHVpZCQzID0gMDtcblxudmFyIHZGb3IgPSB7XG5cbiAgcHJpb3JpdHk6IEZPUixcbiAgdGVybWluYWw6IHRydWUsXG5cbiAgcGFyYW1zOiBbJ3RyYWNrLWJ5JywgJ3N0YWdnZXInLCAnZW50ZXItc3RhZ2dlcicsICdsZWF2ZS1zdGFnZ2VyJ10sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyBzdXBwb3J0IFwiaXRlbSBpbi9vZiBpdGVtc1wiIHN5bnRheFxuICAgIHZhciBpbk1hdGNoID0gdGhpcy5leHByZXNzaW9uLm1hdGNoKC8oLiopICg/OmlufG9mKSAoLiopLyk7XG4gICAgaWYgKGluTWF0Y2gpIHtcbiAgICAgIHZhciBpdE1hdGNoID0gaW5NYXRjaFsxXS5tYXRjaCgvXFwoKC4qKSwoLiopXFwpLyk7XG4gICAgICBpZiAoaXRNYXRjaCkge1xuICAgICAgICB0aGlzLml0ZXJhdG9yID0gaXRNYXRjaFsxXS50cmltKCk7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpdE1hdGNoWzJdLnRyaW0oKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuYWxpYXMgPSBpbk1hdGNoWzFdLnRyaW0oKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZXhwcmVzc2lvbiA9IGluTWF0Y2hbMl07XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmFsaWFzKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdi1mb3IgZXhwcmVzc2lvbiBcIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2FsaWFzIGlzIHJlcXVpcmVkLicsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIHVpZCBhcyBhIGNhY2hlIGlkZW50aWZpZXJcbiAgICB0aGlzLmlkID0gJ19fdi1mb3JfXycgKyArK3VpZCQzO1xuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhbiBvcHRpb24gbGlzdCxcbiAgICAvLyBzbyB0aGF0IHdlIGtub3cgaWYgd2UgbmVlZCB0byB1cGRhdGUgdGhlIDxzZWxlY3Q+J3NcbiAgICAvLyB2LW1vZGVsIHdoZW4gdGhlIG9wdGlvbiBsaXN0IGhhcyBjaGFuZ2VkLlxuICAgIC8vIGJlY2F1c2Ugdi1tb2RlbCBoYXMgYSBsb3dlciBwcmlvcml0eSB0aGFuIHYtZm9yLFxuICAgIC8vIHRoZSB2LW1vZGVsIGlzIG5vdCBib3VuZCBoZXJlIHlldCwgc28gd2UgaGF2ZSB0b1xuICAgIC8vIHJldHJpdmUgaXQgaW4gdGhlIGFjdHVhbCB1cGRhdGVNb2RlbCgpIGZ1bmN0aW9uLlxuICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG4gICAgdGhpcy5pc09wdGlvbiA9ICh0YWcgPT09ICdPUFRJT04nIHx8IHRhZyA9PT0gJ09QVEdST1VQJykgJiYgdGhpcy5lbC5wYXJlbnROb2RlLnRhZ05hbWUgPT09ICdTRUxFQ1QnO1xuXG4gICAgLy8gc2V0dXAgYW5jaG9yIG5vZGVzXG4gICAgdGhpcy5zdGFydCA9IGNyZWF0ZUFuY2hvcigndi1mb3Itc3RhcnQnKTtcbiAgICB0aGlzLmVuZCA9IGNyZWF0ZUFuY2hvcigndi1mb3ItZW5kJyk7XG4gICAgcmVwbGFjZSh0aGlzLmVsLCB0aGlzLmVuZCk7XG4gICAgYmVmb3JlKHRoaXMuc3RhcnQsIHRoaXMuZW5kKTtcblxuICAgIC8vIGNhY2hlXG4gICAgdGhpcy5jYWNoZSA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgICAvLyBmcmFnbWVudCBmYWN0b3J5XG4gICAgdGhpcy5mYWN0b3J5ID0gbmV3IEZyYWdtZW50RmFjdG9yeSh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShkYXRhKSB7XG4gICAgdGhpcy5kaWZmKGRhdGEpO1xuICAgIHRoaXMudXBkYXRlUmVmKCk7XG4gICAgdGhpcy51cGRhdGVNb2RlbCgpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEaWZmLCBiYXNlZCBvbiBuZXcgZGF0YSBhbmQgb2xkIGRhdGEsIGRldGVybWluZSB0aGVcbiAgICogbWluaW11bSBhbW91bnQgb2YgRE9NIG1hbmlwdWxhdGlvbnMgbmVlZGVkIHRvIG1ha2UgdGhlXG4gICAqIERPTSByZWZsZWN0IHRoZSBuZXcgZGF0YSBBcnJheS5cbiAgICpcbiAgICogVGhlIGFsZ29yaXRobSBkaWZmcyB0aGUgbmV3IGRhdGEgQXJyYXkgYnkgc3RvcmluZyBhXG4gICAqIGhpZGRlbiByZWZlcmVuY2UgdG8gYW4gb3duZXIgdm0gaW5zdGFuY2Ugb24gcHJldmlvdXNseVxuICAgKiBzZWVuIGRhdGEuIFRoaXMgYWxsb3dzIHVzIHRvIGFjaGlldmUgTyhuKSB3aGljaCBpc1xuICAgKiBiZXR0ZXIgdGhhbiBhIGxldmVuc2h0ZWluIGRpc3RhbmNlIGJhc2VkIGFsZ29yaXRobSxcbiAgICogd2hpY2ggaXMgTyhtICogbikuXG4gICAqXG4gICAqIEBwYXJhbSB7QXJyYXl9IGRhdGFcbiAgICovXG5cbiAgZGlmZjogZnVuY3Rpb24gZGlmZihkYXRhKSB7XG4gICAgLy8gY2hlY2sgaWYgdGhlIEFycmF5IHdhcyBjb252ZXJ0ZWQgZnJvbSBhbiBPYmplY3RcbiAgICB2YXIgaXRlbSA9IGRhdGFbMF07XG4gICAgdmFyIGNvbnZlcnRlZEZyb21PYmplY3QgPSB0aGlzLmZyb21PYmplY3QgPSBpc09iamVjdChpdGVtKSAmJiBoYXNPd24oaXRlbSwgJyRrZXknKSAmJiBoYXNPd24oaXRlbSwgJyR2YWx1ZScpO1xuXG4gICAgdmFyIHRyYWNrQnlLZXkgPSB0aGlzLnBhcmFtcy50cmFja0J5O1xuICAgIHZhciBvbGRGcmFncyA9IHRoaXMuZnJhZ3M7XG4gICAgdmFyIGZyYWdzID0gdGhpcy5mcmFncyA9IG5ldyBBcnJheShkYXRhLmxlbmd0aCk7XG4gICAgdmFyIGFsaWFzID0gdGhpcy5hbGlhcztcbiAgICB2YXIgaXRlcmF0b3IgPSB0aGlzLml0ZXJhdG9yO1xuICAgIHZhciBzdGFydCA9IHRoaXMuc3RhcnQ7XG4gICAgdmFyIGVuZCA9IHRoaXMuZW5kO1xuICAgIHZhciBpbkRvY3VtZW50ID0gaW5Eb2Moc3RhcnQpO1xuICAgIHZhciBpbml0ID0gIW9sZEZyYWdzO1xuICAgIHZhciBpLCBsLCBmcmFnLCBrZXksIHZhbHVlLCBwcmltaXRpdmU7XG5cbiAgICAvLyBGaXJzdCBwYXNzLCBnbyB0aHJvdWdoIHRoZSBuZXcgQXJyYXkgYW5kIGZpbGwgdXBcbiAgICAvLyB0aGUgbmV3IGZyYWdzIGFycmF5LiBJZiBhIHBpZWNlIG9mIGRhdGEgaGFzIGEgY2FjaGVkXG4gICAgLy8gaW5zdGFuY2UgZm9yIGl0LCB3ZSByZXVzZSBpdC4gT3RoZXJ3aXNlIGJ1aWxkIGEgbmV3XG4gICAgLy8gaW5zdGFuY2UuXG4gICAgZm9yIChpID0gMCwgbCA9IGRhdGEubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBpdGVtID0gZGF0YVtpXTtcbiAgICAgIGtleSA9IGNvbnZlcnRlZEZyb21PYmplY3QgPyBpdGVtLiRrZXkgOiBudWxsO1xuICAgICAgdmFsdWUgPSBjb252ZXJ0ZWRGcm9tT2JqZWN0ID8gaXRlbS4kdmFsdWUgOiBpdGVtO1xuICAgICAgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICAgIGZyYWcgPSAhaW5pdCAmJiB0aGlzLmdldENhY2hlZEZyYWcodmFsdWUsIGksIGtleSk7XG4gICAgICBpZiAoZnJhZykge1xuICAgICAgICAvLyByZXVzYWJsZSBmcmFnbWVudFxuICAgICAgICBmcmFnLnJldXNlZCA9IHRydWU7XG4gICAgICAgIC8vIHVwZGF0ZSAkaW5kZXhcbiAgICAgICAgZnJhZy5zY29wZS4kaW5kZXggPSBpO1xuICAgICAgICAvLyB1cGRhdGUgJGtleVxuICAgICAgICBpZiAoa2V5KSB7XG4gICAgICAgICAgZnJhZy5zY29wZS4ka2V5ID0ga2V5O1xuICAgICAgICB9XG4gICAgICAgIC8vIHVwZGF0ZSBpdGVyYXRvclxuICAgICAgICBpZiAoaXRlcmF0b3IpIHtcbiAgICAgICAgICBmcmFnLnNjb3BlW2l0ZXJhdG9yXSA9IGtleSAhPT0gbnVsbCA/IGtleSA6IGk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gdXBkYXRlIGRhdGEgZm9yIHRyYWNrLWJ5LCBvYmplY3QgcmVwZWF0ICZcbiAgICAgICAgLy8gcHJpbWl0aXZlIHZhbHVlcy5cbiAgICAgICAgaWYgKHRyYWNrQnlLZXkgfHwgY29udmVydGVkRnJvbU9iamVjdCB8fCBwcmltaXRpdmUpIHtcbiAgICAgICAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBmcmFnLnNjb3BlW2FsaWFzXSA9IHZhbHVlO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBuZXcgaXNudGFuY2VcbiAgICAgICAgZnJhZyA9IHRoaXMuY3JlYXRlKHZhbHVlLCBhbGlhcywgaSwga2V5KTtcbiAgICAgICAgZnJhZy5mcmVzaCA9ICFpbml0O1xuICAgICAgfVxuICAgICAgZnJhZ3NbaV0gPSBmcmFnO1xuICAgICAgaWYgKGluaXQpIHtcbiAgICAgICAgZnJhZy5iZWZvcmUoZW5kKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB3ZSdyZSBkb25lIGZvciB0aGUgaW5pdGlhbCByZW5kZXIuXG4gICAgaWYgKGluaXQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBTZWNvbmQgcGFzcywgZ28gdGhyb3VnaCB0aGUgb2xkIGZyYWdtZW50cyBhbmRcbiAgICAvLyBkZXN0cm95IHRob3NlIHdobyBhcmUgbm90IHJldXNlZCAoYW5kIHJlbW92ZSB0aGVtXG4gICAgLy8gZnJvbSBjYWNoZSlcbiAgICB2YXIgcmVtb3ZhbEluZGV4ID0gMDtcbiAgICB2YXIgdG90YWxSZW1vdmVkID0gb2xkRnJhZ3MubGVuZ3RoIC0gZnJhZ3MubGVuZ3RoO1xuICAgIC8vIHdoZW4gcmVtb3ZpbmcgYSBsYXJnZSBudW1iZXIgb2YgZnJhZ21lbnRzLCB3YXRjaGVyIHJlbW92YWxcbiAgICAvLyB0dXJucyBvdXQgdG8gYmUgYSBwZXJmIGJvdHRsZW5lY2ssIHNvIHdlIGJhdGNoIHRoZSB3YXRjaGVyXG4gICAgLy8gcmVtb3ZhbHMgaW50byBhIHNpbmdsZSBmaWx0ZXIgY2FsbCFcbiAgICB0aGlzLnZtLl92Rm9yUmVtb3ZpbmcgPSB0cnVlO1xuICAgIGZvciAoaSA9IDAsIGwgPSBvbGRGcmFncy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGZyYWcgPSBvbGRGcmFnc1tpXTtcbiAgICAgIGlmICghZnJhZy5yZXVzZWQpIHtcbiAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuICAgICAgICB0aGlzLnJlbW92ZShmcmFnLCByZW1vdmFsSW5kZXgrKywgdG90YWxSZW1vdmVkLCBpbkRvY3VtZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy52bS5fdkZvclJlbW92aW5nID0gZmFsc2U7XG4gICAgaWYgKHJlbW92YWxJbmRleCkge1xuICAgICAgdGhpcy52bS5fd2F0Y2hlcnMgPSB0aGlzLnZtLl93YXRjaGVycy5maWx0ZXIoZnVuY3Rpb24gKHcpIHtcbiAgICAgICAgcmV0dXJuIHcuYWN0aXZlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gRmluYWwgcGFzcywgbW92ZS9pbnNlcnQgbmV3IGZyYWdtZW50cyBpbnRvIHRoZVxuICAgIC8vIHJpZ2h0IHBsYWNlLlxuICAgIHZhciB0YXJnZXRQcmV2LCBwcmV2RWwsIGN1cnJlbnRQcmV2O1xuICAgIHZhciBpbnNlcnRpb25JbmRleCA9IDA7XG4gICAgZm9yIChpID0gMCwgbCA9IGZyYWdzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgZnJhZyA9IGZyYWdzW2ldO1xuICAgICAgLy8gdGhpcyBpcyB0aGUgZnJhZyB0aGF0IHdlIHNob3VsZCBiZSBhZnRlclxuICAgICAgdGFyZ2V0UHJldiA9IGZyYWdzW2kgLSAxXTtcbiAgICAgIHByZXZFbCA9IHRhcmdldFByZXYgPyB0YXJnZXRQcmV2LnN0YWdnZXJDYiA/IHRhcmdldFByZXYuc3RhZ2dlckFuY2hvciA6IHRhcmdldFByZXYuZW5kIHx8IHRhcmdldFByZXYubm9kZSA6IHN0YXJ0O1xuICAgICAgaWYgKGZyYWcucmV1c2VkICYmICFmcmFnLnN0YWdnZXJDYikge1xuICAgICAgICBjdXJyZW50UHJldiA9IGZpbmRQcmV2RnJhZyhmcmFnLCBzdGFydCwgdGhpcy5pZCk7XG4gICAgICAgIGlmIChjdXJyZW50UHJldiAhPT0gdGFyZ2V0UHJldiAmJiAoIWN1cnJlbnRQcmV2IHx8XG4gICAgICAgIC8vIG9wdGltaXphdGlvbiBmb3IgbW92aW5nIGEgc2luZ2xlIGl0ZW0uXG4gICAgICAgIC8vIHRoYW5rcyB0byBzdWdnZXN0aW9ucyBieSBAbGl2b3JhcyBpbiAjMTgwN1xuICAgICAgICBmaW5kUHJldkZyYWcoY3VycmVudFByZXYsIHN0YXJ0LCB0aGlzLmlkKSAhPT0gdGFyZ2V0UHJldikpIHtcbiAgICAgICAgICB0aGlzLm1vdmUoZnJhZywgcHJldkVsKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gbmV3IGluc3RhbmNlLCBvciBzdGlsbCBpbiBzdGFnZ2VyLlxuICAgICAgICAvLyBpbnNlcnQgd2l0aCB1cGRhdGVkIHN0YWdnZXIgaW5kZXguXG4gICAgICAgIHRoaXMuaW5zZXJ0KGZyYWcsIGluc2VydGlvbkluZGV4KyssIHByZXZFbCwgaW5Eb2N1bWVudCk7XG4gICAgICB9XG4gICAgICBmcmFnLnJldXNlZCA9IGZyYWcuZnJlc2ggPSBmYWxzZTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIG5ldyBmcmFnbWVudCBpbnN0YW5jZS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWxpYXNcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBba2V5XVxuICAgKiBAcmV0dXJuIHtGcmFnbWVudH1cbiAgICovXG5cbiAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUodmFsdWUsIGFsaWFzLCBpbmRleCwga2V5KSB7XG4gICAgdmFyIGhvc3QgPSB0aGlzLl9ob3N0O1xuICAgIC8vIGNyZWF0ZSBpdGVyYXRpb24gc2NvcGVcbiAgICB2YXIgcGFyZW50U2NvcGUgPSB0aGlzLl9zY29wZSB8fCB0aGlzLnZtO1xuICAgIHZhciBzY29wZSA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUpO1xuICAgIC8vIHJlZiBob2xkZXIgZm9yIHRoZSBzY29wZVxuICAgIHNjb3BlLiRyZWZzID0gT2JqZWN0LmNyZWF0ZShwYXJlbnRTY29wZS4kcmVmcyk7XG4gICAgc2NvcGUuJGVscyA9IE9iamVjdC5jcmVhdGUocGFyZW50U2NvcGUuJGVscyk7XG4gICAgLy8gbWFrZSBzdXJlIHBvaW50ICRwYXJlbnQgdG8gcGFyZW50IHNjb3BlXG4gICAgc2NvcGUuJHBhcmVudCA9IHBhcmVudFNjb3BlO1xuICAgIC8vIGZvciB0d28td2F5IGJpbmRpbmcgb24gYWxpYXNcbiAgICBzY29wZS4kZm9yQ29udGV4dCA9IHRoaXM7XG4gICAgLy8gZGVmaW5lIHNjb3BlIHByb3BlcnRpZXNcbiAgICAvLyBpbXBvcnRhbnQ6IGRlZmluZSB0aGUgc2NvcGUgYWxpYXMgd2l0aG91dCBmb3JjZWQgY29udmVyc2lvblxuICAgIC8vIHNvIHRoYXQgZnJvemVuIGRhdGEgc3RydWN0dXJlcyByZW1haW4gbm9uLXJlYWN0aXZlLlxuICAgIHdpdGhvdXRDb252ZXJzaW9uKGZ1bmN0aW9uICgpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCBhbGlhcywgdmFsdWUpO1xuICAgIH0pO1xuICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGluZGV4JywgaW5kZXgpO1xuICAgIGlmIChrZXkpIHtcbiAgICAgIGRlZmluZVJlYWN0aXZlKHNjb3BlLCAnJGtleScsIGtleSk7XG4gICAgfSBlbHNlIGlmIChzY29wZS4ka2V5KSB7XG4gICAgICAvLyBhdm9pZCBhY2NpZGVudGFsIGZhbGxiYWNrXG4gICAgICBkZWYoc2NvcGUsICcka2V5JywgbnVsbCk7XG4gICAgfVxuICAgIGlmICh0aGlzLml0ZXJhdG9yKSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShzY29wZSwgdGhpcy5pdGVyYXRvciwga2V5ICE9PSBudWxsID8ga2V5IDogaW5kZXgpO1xuICAgIH1cbiAgICB2YXIgZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUoaG9zdCwgc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIGZyYWcuZm9ySWQgPSB0aGlzLmlkO1xuICAgIHRoaXMuY2FjaGVGcmFnKHZhbHVlLCBmcmFnLCBpbmRleCwga2V5KTtcbiAgICByZXR1cm4gZnJhZztcbiAgfSxcblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB2LXJlZiBvbiBvd25lciB2bS5cbiAgICovXG5cbiAgdXBkYXRlUmVmOiBmdW5jdGlvbiB1cGRhdGVSZWYoKSB7XG4gICAgdmFyIHJlZiA9IHRoaXMuZGVzY3JpcHRvci5yZWY7XG4gICAgaWYgKCFyZWYpIHJldHVybjtcbiAgICB2YXIgaGFzaCA9ICh0aGlzLl9zY29wZSB8fCB0aGlzLnZtKS4kcmVmcztcbiAgICB2YXIgcmVmcztcbiAgICBpZiAoIXRoaXMuZnJvbU9iamVjdCkge1xuICAgICAgcmVmcyA9IHRoaXMuZnJhZ3MubWFwKGZpbmRWbUZyb21GcmFnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVmcyA9IHt9O1xuICAgICAgdGhpcy5mcmFncy5mb3JFYWNoKGZ1bmN0aW9uIChmcmFnKSB7XG4gICAgICAgIHJlZnNbZnJhZy5zY29wZS4ka2V5XSA9IGZpbmRWbUZyb21GcmFnKGZyYWcpO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGhhc2hbcmVmXSA9IHJlZnM7XG4gIH0sXG5cbiAgLyoqXG4gICAqIEZvciBvcHRpb24gbGlzdHMsIHVwZGF0ZSB0aGUgY29udGFpbmluZyB2LW1vZGVsIG9uXG4gICAqIHBhcmVudCA8c2VsZWN0Pi5cbiAgICovXG5cbiAgdXBkYXRlTW9kZWw6IGZ1bmN0aW9uIHVwZGF0ZU1vZGVsKCkge1xuICAgIGlmICh0aGlzLmlzT3B0aW9uKSB7XG4gICAgICB2YXIgcGFyZW50ID0gdGhpcy5zdGFydC5wYXJlbnROb2RlO1xuICAgICAgdmFyIG1vZGVsID0gcGFyZW50ICYmIHBhcmVudC5fX3ZfbW9kZWw7XG4gICAgICBpZiAobW9kZWwpIHtcbiAgICAgICAgbW9kZWwuZm9yY2VVcGRhdGUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEluc2VydCBhIGZyYWdtZW50LiBIYW5kbGVzIHN0YWdnZXJpbmcuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7Tm9kZX0gcHJldkVsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuICAgKi9cblxuICBpbnNlcnQ6IGZ1bmN0aW9uIGluc2VydChmcmFnLCBpbmRleCwgcHJldkVsLCBpbkRvY3VtZW50KSB7XG4gICAgaWYgKGZyYWcuc3RhZ2dlckNiKSB7XG4gICAgICBmcmFnLnN0YWdnZXJDYi5jYW5jZWwoKTtcbiAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICB9XG4gICAgdmFyIHN0YWdnZXJBbW91bnQgPSB0aGlzLmdldFN0YWdnZXIoZnJhZywgaW5kZXgsIG51bGwsICdlbnRlcicpO1xuICAgIGlmIChpbkRvY3VtZW50ICYmIHN0YWdnZXJBbW91bnQpIHtcbiAgICAgIC8vIGNyZWF0ZSBhbiBhbmNob3IgYW5kIGluc2VydCBpdCBzeW5jaHJvbm91c2x5LFxuICAgICAgLy8gc28gdGhhdCB3ZSBjYW4gcmVzb2x2ZSB0aGUgY29ycmVjdCBvcmRlciB3aXRob3V0XG4gICAgICAvLyB3b3JyeWluZyBhYm91dCBzb21lIGVsZW1lbnRzIG5vdCBpbnNlcnRlZCB5ZXRcbiAgICAgIHZhciBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3I7XG4gICAgICBpZiAoIWFuY2hvcikge1xuICAgICAgICBhbmNob3IgPSBmcmFnLnN0YWdnZXJBbmNob3IgPSBjcmVhdGVBbmNob3IoJ3N0YWdnZXItYW5jaG9yJyk7XG4gICAgICAgIGFuY2hvci5fX3ZfZnJhZyA9IGZyYWc7XG4gICAgICB9XG4gICAgICBhZnRlcihhbmNob3IsIHByZXZFbCk7XG4gICAgICB2YXIgb3AgPSBmcmFnLnN0YWdnZXJDYiA9IGNhbmNlbGxhYmxlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgICBmcmFnLmJlZm9yZShhbmNob3IpO1xuICAgICAgICByZW1vdmUoYW5jaG9yKTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciB0YXJnZXQgPSBwcmV2RWwubmV4dFNpYmxpbmc7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmICghdGFyZ2V0KSB7XG4gICAgICAgIC8vIHJlc2V0IGVuZCBhbmNob3IgcG9zaXRpb24gaW4gY2FzZSB0aGUgcG9zaXRpb24gd2FzIG1lc3NlZCB1cFxuICAgICAgICAvLyBieSBhbiBleHRlcm5hbCBkcmFnLW4tZHJvcCBsaWJyYXJ5LlxuICAgICAgICBhZnRlcih0aGlzLmVuZCwgcHJldkVsKTtcbiAgICAgICAgdGFyZ2V0ID0gdGhpcy5lbmQ7XG4gICAgICB9XG4gICAgICBmcmFnLmJlZm9yZSh0YXJnZXQpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVtb3ZlIGEgZnJhZ21lbnQuIEhhbmRsZXMgc3RhZ2dlcmluZy5cbiAgICpcbiAgICogQHBhcmFtIHtGcmFnbWVudH0gZnJhZ1xuICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICogQHBhcmFtIHtOdW1iZXJ9IHRvdGFsXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5Eb2N1bWVudFxuICAgKi9cblxuICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShmcmFnLCBpbmRleCwgdG90YWwsIGluRG9jdW1lbnQpIHtcbiAgICBpZiAoZnJhZy5zdGFnZ2VyQ2IpIHtcbiAgICAgIGZyYWcuc3RhZ2dlckNiLmNhbmNlbCgpO1xuICAgICAgZnJhZy5zdGFnZ2VyQ2IgPSBudWxsO1xuICAgICAgLy8gaXQncyBub3QgcG9zc2libGUgZm9yIHRoZSBzYW1lIGZyYWcgdG8gYmUgcmVtb3ZlZFxuICAgICAgLy8gdHdpY2UsIHNvIGlmIHdlIGhhdmUgYSBwZW5kaW5nIHN0YWdnZXIgY2FsbGJhY2ssXG4gICAgICAvLyBpdCBtZWFucyB0aGlzIGZyYWcgaXMgcXVldWVkIGZvciBlbnRlciBidXQgcmVtb3ZlZFxuICAgICAgLy8gYmVmb3JlIGl0cyB0cmFuc2l0aW9uIHN0YXJ0ZWQuIFNpbmNlIGl0IGlzIGFscmVhZHlcbiAgICAgIC8vIGRlc3Ryb3llZCwgd2UgY2FuIGp1c3QgbGVhdmUgaXQgaW4gZGV0YWNoZWQgc3RhdGUuXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBzdGFnZ2VyQW1vdW50ID0gdGhpcy5nZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgJ2xlYXZlJyk7XG4gICAgaWYgKGluRG9jdW1lbnQgJiYgc3RhZ2dlckFtb3VudCkge1xuICAgICAgdmFyIG9wID0gZnJhZy5zdGFnZ2VyQ2IgPSBjYW5jZWxsYWJsZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIGZyYWcuc3RhZ2dlckNiID0gbnVsbDtcbiAgICAgICAgZnJhZy5yZW1vdmUoKTtcbiAgICAgIH0pO1xuICAgICAgc2V0VGltZW91dChvcCwgc3RhZ2dlckFtb3VudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYWcucmVtb3ZlKCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBNb3ZlIGEgZnJhZ21lbnQgdG8gYSBuZXcgcG9zaXRpb24uXG4gICAqIEZvcmNlIG5vIHRyYW5zaXRpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOb2RlfSBwcmV2RWxcbiAgICovXG5cbiAgbW92ZTogZnVuY3Rpb24gbW92ZShmcmFnLCBwcmV2RWwpIHtcbiAgICAvLyBmaXggYSBjb21tb24gaXNzdWUgd2l0aCBTb3J0YWJsZTpcbiAgICAvLyBpZiBwcmV2RWwgZG9lc24ndCBoYXZlIG5leHRTaWJsaW5nLCB0aGlzIG1lYW5zIGl0J3NcbiAgICAvLyBiZWVuIGRyYWdnZWQgYWZ0ZXIgdGhlIGVuZCBhbmNob3IuIEp1c3QgcmUtcG9zaXRpb25cbiAgICAvLyB0aGUgZW5kIGFuY2hvciB0byB0aGUgZW5kIG9mIHRoZSBjb250YWluZXIuXG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFwcmV2RWwubmV4dFNpYmxpbmcpIHtcbiAgICAgIHRoaXMuZW5kLnBhcmVudE5vZGUuYXBwZW5kQ2hpbGQodGhpcy5lbmQpO1xuICAgIH1cbiAgICBmcmFnLmJlZm9yZShwcmV2RWwubmV4dFNpYmxpbmcsIGZhbHNlKTtcbiAgfSxcblxuICAvKipcbiAgICogQ2FjaGUgYSBmcmFnbWVudCB1c2luZyB0cmFjay1ieSBvciB0aGUgb2JqZWN0IGtleS5cbiAgICpcbiAgICogQHBhcmFtIHsqfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgKiBAcGFyYW0ge1N0cmluZ30gW2tleV1cbiAgICovXG5cbiAgY2FjaGVGcmFnOiBmdW5jdGlvbiBjYWNoZUZyYWcodmFsdWUsIGZyYWcsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICB2YXIgaWQ7XG4gICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuICAgICAgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIGlmICghY2FjaGVbaWRdKSB7XG4gICAgICAgIGNhY2hlW2lkXSA9IGZyYWc7XG4gICAgICB9IGVsc2UgaWYgKHRyYWNrQnlLZXkgIT09ICckaW5kZXgnKSB7XG4gICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWQgPSB0aGlzLmlkO1xuICAgICAgaWYgKGhhc093bih2YWx1ZSwgaWQpKSB7XG4gICAgICAgIGlmICh2YWx1ZVtpZF0gPT09IG51bGwpIHtcbiAgICAgICAgICB2YWx1ZVtpZF0gPSBmcmFnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy53YXJuRHVwbGljYXRlKHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChPYmplY3QuaXNFeHRlbnNpYmxlKHZhbHVlKSkge1xuICAgICAgICBkZWYodmFsdWUsIGlkLCBmcmFnKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKCdGcm96ZW4gdi1mb3Igb2JqZWN0cyBjYW5ub3QgYmUgYXV0b21hdGljYWxseSB0cmFja2VkLCBtYWtlIHN1cmUgdG8gJyArICdwcm92aWRlIGEgdHJhY2stYnkga2V5LicpO1xuICAgICAgfVxuICAgIH1cbiAgICBmcmFnLnJhdyA9IHZhbHVlO1xuICB9LFxuXG4gIC8qKlxuICAgKiBHZXQgYSBjYWNoZWQgZnJhZ21lbnQgZnJvbSB0aGUgdmFsdWUvaW5kZXgva2V5XG4gICAqXG4gICAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHJldHVybiB7RnJhZ21lbnR9XG4gICAqL1xuXG4gIGdldENhY2hlZEZyYWc6IGZ1bmN0aW9uIGdldENhY2hlZEZyYWcodmFsdWUsIGluZGV4LCBrZXkpIHtcbiAgICB2YXIgdHJhY2tCeUtleSA9IHRoaXMucGFyYW1zLnRyYWNrQnk7XG4gICAgdmFyIHByaW1pdGl2ZSA9ICFpc09iamVjdCh2YWx1ZSk7XG4gICAgdmFyIGZyYWc7XG4gICAgaWYgKGtleSB8fCB0cmFja0J5S2V5IHx8IHByaW1pdGl2ZSkge1xuICAgICAgdmFyIGlkID0gZ2V0VHJhY2tCeUtleShpbmRleCwga2V5LCB2YWx1ZSwgdHJhY2tCeUtleSk7XG4gICAgICBmcmFnID0gdGhpcy5jYWNoZVtpZF07XG4gICAgfSBlbHNlIHtcbiAgICAgIGZyYWcgPSB2YWx1ZVt0aGlzLmlkXTtcbiAgICB9XG4gICAgaWYgKGZyYWcgJiYgKGZyYWcucmV1c2VkIHx8IGZyYWcuZnJlc2gpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHRoaXMud2FybkR1cGxpY2F0ZSh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiBmcmFnO1xuICB9LFxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBmcmFnbWVudCBmcm9tIGNhY2hlLlxuICAgKlxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBmcmFnXG4gICAqL1xuXG4gIGRlbGV0ZUNhY2hlZEZyYWc6IGZ1bmN0aW9uIGRlbGV0ZUNhY2hlZEZyYWcoZnJhZykge1xuICAgIHZhciB2YWx1ZSA9IGZyYWcucmF3O1xuICAgIHZhciB0cmFja0J5S2V5ID0gdGhpcy5wYXJhbXMudHJhY2tCeTtcbiAgICB2YXIgc2NvcGUgPSBmcmFnLnNjb3BlO1xuICAgIHZhciBpbmRleCA9IHNjb3BlLiRpbmRleDtcbiAgICAvLyBmaXggIzk0ODogYXZvaWQgYWNjaWRlbnRhbGx5IGZhbGwgdGhyb3VnaCB0b1xuICAgIC8vIGEgcGFyZW50IHJlcGVhdGVyIHdoaWNoIGhhcHBlbnMgdG8gaGF2ZSAka2V5LlxuICAgIHZhciBrZXkgPSBoYXNPd24oc2NvcGUsICcka2V5JykgJiYgc2NvcGUuJGtleTtcbiAgICB2YXIgcHJpbWl0aXZlID0gIWlzT2JqZWN0KHZhbHVlKTtcbiAgICBpZiAodHJhY2tCeUtleSB8fCBrZXkgfHwgcHJpbWl0aXZlKSB7XG4gICAgICB2YXIgaWQgPSBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KTtcbiAgICAgIHRoaXMuY2FjaGVbaWRdID0gbnVsbDtcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWVbdGhpcy5pZF0gPSBudWxsO1xuICAgICAgZnJhZy5yYXcgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogR2V0IHRoZSBzdGFnZ2VyIGFtb3VudCBmb3IgYW4gaW5zZXJ0aW9uL3JlbW92YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4XG4gICAqIEBwYXJhbSB7TnVtYmVyfSB0b3RhbFxuICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICAgKi9cblxuICBnZXRTdGFnZ2VyOiBmdW5jdGlvbiBnZXRTdGFnZ2VyKGZyYWcsIGluZGV4LCB0b3RhbCwgdHlwZSkge1xuICAgIHR5cGUgPSB0eXBlICsgJ1N0YWdnZXInO1xuICAgIHZhciB0cmFucyA9IGZyYWcubm9kZS5fX3ZfdHJhbnM7XG4gICAgdmFyIGhvb2tzID0gdHJhbnMgJiYgdHJhbnMuaG9va3M7XG4gICAgdmFyIGhvb2sgPSBob29rcyAmJiAoaG9va3NbdHlwZV0gfHwgaG9va3Muc3RhZ2dlcik7XG4gICAgcmV0dXJuIGhvb2sgPyBob29rLmNhbGwoZnJhZywgaW5kZXgsIHRvdGFsKSA6IGluZGV4ICogcGFyc2VJbnQodGhpcy5wYXJhbXNbdHlwZV0gfHwgdGhpcy5wYXJhbXMuc3RhZ2dlciwgMTApO1xuICB9LFxuXG4gIC8qKlxuICAgKiBQcmUtcHJvY2VzcyB0aGUgdmFsdWUgYmVmb3JlIHBpcGluZyBpdCB0aHJvdWdoIHRoZVxuICAgKiBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuICAgKi9cblxuICBfcHJlUHJvY2VzczogZnVuY3Rpb24gX3ByZVByb2Nlc3ModmFsdWUpIHtcbiAgICAvLyByZWdhcmRsZXNzIG9mIHR5cGUsIHN0b3JlIHRoZSB1bi1maWx0ZXJlZCByYXcgdmFsdWUuXG4gICAgdGhpcy5yYXdWYWx1ZSA9IHZhbHVlO1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfSxcblxuICAvKipcbiAgICogUG9zdC1wcm9jZXNzIHRoZSB2YWx1ZSBhZnRlciBpdCBoYXMgYmVlbiBwaXBlZCB0aHJvdWdoXG4gICAqIHRoZSBmaWx0ZXJzLiBUaGlzIGlzIHBhc3NlZCB0byBhbmQgY2FsbGVkIGJ5IHRoZSB3YXRjaGVyLlxuICAgKlxuICAgKiBJdCBpcyBuZWNlc3NhcnkgZm9yIHRoaXMgdG8gYmUgY2FsbGVkIGR1cmluZyB0aGVcbiAgICogd2F0Y2hlcidzIGRlcGVuZGVuY3kgY29sbGVjdGlvbiBwaGFzZSBiZWNhdXNlIHdlIHdhbnRcbiAgICogdGhlIHYtZm9yIHRvIHVwZGF0ZSB3aGVuIHRoZSBzb3VyY2UgT2JqZWN0IGlzIG11dGF0ZWQuXG4gICAqL1xuXG4gIF9wb3N0UHJvY2VzczogZnVuY3Rpb24gX3Bvc3RQcm9jZXNzKHZhbHVlKSB7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChpc1BsYWluT2JqZWN0KHZhbHVlKSkge1xuICAgICAgLy8gY29udmVydCBwbGFpbiBvYmplY3QgdG8gYXJyYXkuXG4gICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHZhbHVlKTtcbiAgICAgIHZhciBpID0ga2V5cy5sZW5ndGg7XG4gICAgICB2YXIgcmVzID0gbmV3IEFycmF5KGkpO1xuICAgICAgdmFyIGtleTtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAga2V5ID0ga2V5c1tpXTtcbiAgICAgICAgcmVzW2ldID0ge1xuICAgICAgICAgICRrZXk6IGtleSxcbiAgICAgICAgICAkdmFsdWU6IHZhbHVlW2tleV1cbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiByZXM7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInICYmICFpc05hTih2YWx1ZSkpIHtcbiAgICAgICAgdmFsdWUgPSByYW5nZSh2YWx1ZSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWUgfHwgW107XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmRlc2NyaXB0b3IucmVmKSB7XG4gICAgICAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHJlZnNbdGhpcy5kZXNjcmlwdG9yLnJlZl0gPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5mcmFncykge1xuICAgICAgdmFyIGkgPSB0aGlzLmZyYWdzLmxlbmd0aDtcbiAgICAgIHZhciBmcmFnO1xuICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICBmcmFnID0gdGhpcy5mcmFnc1tpXTtcbiAgICAgICAgdGhpcy5kZWxldGVDYWNoZWRGcmFnKGZyYWcpO1xuICAgICAgICBmcmFnLmRlc3Ryb3koKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogSGVscGVyIHRvIGZpbmQgdGhlIHByZXZpb3VzIGVsZW1lbnQgdGhhdCBpcyBhIGZyYWdtZW50XG4gKiBhbmNob3IuIFRoaXMgaXMgbmVjZXNzYXJ5IGJlY2F1c2UgYSBkZXN0cm95ZWQgZnJhZydzXG4gKiBlbGVtZW50IGNvdWxkIHN0aWxsIGJlIGxpbmdlcmluZyBpbiB0aGUgRE9NIGJlZm9yZSBpdHNcbiAqIGxlYXZpbmcgdHJhbnNpdGlvbiBmaW5pc2hlcywgYnV0IGl0cyBpbnNlcnRlZCBmbGFnXG4gKiBzaG91bGQgaGF2ZSBiZWVuIHNldCB0byBmYWxzZSBzbyB3ZSBjYW4gc2tpcCB0aGVtLlxuICpcbiAqIElmIHRoaXMgaXMgYSBibG9jayByZXBlYXQsIHdlIHdhbnQgdG8gbWFrZSBzdXJlIHdlIG9ubHlcbiAqIHJldHVybiBmcmFnIHRoYXQgaXMgYm91bmQgdG8gdGhpcyB2LWZvci4gKHNlZSAjOTI5KVxuICpcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAqIEBwYXJhbSB7Q29tbWVudHxUZXh0fSBhbmNob3JcbiAqIEBwYXJhbSB7U3RyaW5nfSBpZFxuICogQHJldHVybiB7RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gZmluZFByZXZGcmFnKGZyYWcsIGFuY2hvciwgaWQpIHtcbiAgdmFyIGVsID0gZnJhZy5ub2RlLnByZXZpb3VzU2libGluZztcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmICghZWwpIHJldHVybjtcbiAgZnJhZyA9IGVsLl9fdl9mcmFnO1xuICB3aGlsZSAoKCFmcmFnIHx8IGZyYWcuZm9ySWQgIT09IGlkIHx8ICFmcmFnLmluc2VydGVkKSAmJiBlbCAhPT0gYW5jaG9yKSB7XG4gICAgZWwgPSBlbC5wcmV2aW91c1NpYmxpbmc7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gICAgaWYgKCFlbCkgcmV0dXJuO1xuICAgIGZyYWcgPSBlbC5fX3ZfZnJhZztcbiAgfVxuICByZXR1cm4gZnJhZztcbn1cblxuLyoqXG4gKiBGaW5kIGEgdm0gZnJvbSBhIGZyYWdtZW50LlxuICpcbiAqIEBwYXJhbSB7RnJhZ21lbnR9IGZyYWdcbiAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gZmluZFZtRnJvbUZyYWcoZnJhZykge1xuICB2YXIgbm9kZSA9IGZyYWcubm9kZTtcbiAgLy8gaGFuZGxlIG11bHRpLW5vZGUgZnJhZ1xuICBpZiAoZnJhZy5lbmQpIHtcbiAgICB3aGlsZSAoIW5vZGUuX192dWVfXyAmJiBub2RlICE9PSBmcmFnLmVuZCAmJiBub2RlLm5leHRTaWJsaW5nKSB7XG4gICAgICBub2RlID0gbm9kZS5uZXh0U2libGluZztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG5vZGUuX192dWVfXztcbn1cblxuLyoqXG4gKiBDcmVhdGUgYSByYW5nZSBhcnJheSBmcm9tIGdpdmVuIG51bWJlci5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHJldHVybiB7QXJyYXl9XG4gKi9cblxuZnVuY3Rpb24gcmFuZ2Uobikge1xuICB2YXIgaSA9IC0xO1xuICB2YXIgcmV0ID0gbmV3IEFycmF5KE1hdGguZmxvb3IobikpO1xuICB3aGlsZSAoKytpIDwgbikge1xuICAgIHJldFtpXSA9IGk7XG4gIH1cbiAgcmV0dXJuIHJldDtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIHRyYWNrIGJ5IGtleSBmb3IgYW4gaXRlbS5cbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7U3RyaW5nfSBbdHJhY2tCeUtleV1cbiAqL1xuXG5mdW5jdGlvbiBnZXRUcmFja0J5S2V5KGluZGV4LCBrZXksIHZhbHVlLCB0cmFja0J5S2V5KSB7XG4gIHJldHVybiB0cmFja0J5S2V5ID8gdHJhY2tCeUtleSA9PT0gJyRpbmRleCcgPyBpbmRleCA6IHRyYWNrQnlLZXkuY2hhckF0KDApLm1hdGNoKC9cXHcvKSA/IGdldFBhdGgodmFsdWUsIHRyYWNrQnlLZXkpIDogdmFsdWVbdHJhY2tCeUtleV0gOiBrZXkgfHwgdmFsdWU7XG59XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gIHZGb3Iud2FybkR1cGxpY2F0ZSA9IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIHdhcm4oJ0R1cGxpY2F0ZSB2YWx1ZSBmb3VuZCBpbiB2LWZvcj1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgSlNPTi5zdHJpbmdpZnkodmFsdWUpICsgJy4gVXNlIHRyYWNrLWJ5PVwiJGluZGV4XCIgaWYgJyArICd5b3UgYXJlIGV4cGVjdGluZyBkdXBsaWNhdGUgdmFsdWVzLicsIHRoaXMudm0pO1xuICB9O1xufVxuXG52YXIgdklmID0ge1xuXG4gIHByaW9yaXR5OiBJRixcbiAgdGVybWluYWw6IHRydWUsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIGlmICghZWwuX192dWVfXykge1xuICAgICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuICAgICAgdmFyIG5leHQgPSBlbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgICBpZiAobmV4dCAmJiBnZXRBdHRyKG5leHQsICd2LWVsc2UnKSAhPT0gbnVsbCkge1xuICAgICAgICByZW1vdmUobmV4dCk7XG4gICAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcbiAgICAgIH1cbiAgICAgIC8vIGNoZWNrIG1haW4gYmxvY2tcbiAgICAgIHRoaXMuYW5jaG9yID0gY3JlYXRlQW5jaG9yKCd2LWlmJyk7XG4gICAgICByZXBsYWNlKGVsLCB0aGlzLmFuY2hvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1pZj1cIicgKyB0aGlzLmV4cHJlc3Npb24gKyAnXCIgY2Fubm90IGJlICcgKyAndXNlZCBvbiBhbiBpbnN0YW5jZSByb290IGVsZW1lbnQuJywgdGhpcy52bSk7XG4gICAgICB0aGlzLmludmFsaWQgPSB0cnVlO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIGlmICh0aGlzLmludmFsaWQpIHJldHVybjtcbiAgICBpZiAodmFsdWUpIHtcbiAgICAgIGlmICghdGhpcy5mcmFnKSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0KCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucmVtb3ZlKCk7XG4gICAgfVxuICB9LFxuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KCkge1xuICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG4gICAgICB0aGlzLmVsc2VGcmFnLnJlbW92ZSgpO1xuICAgICAgdGhpcy5lbHNlRnJhZyA9IG51bGw7XG4gICAgfVxuICAgIC8vIGxhenkgaW5pdCBmYWN0b3J5XG4gICAgaWYgKCF0aGlzLmZhY3RvcnkpIHtcbiAgICAgIHRoaXMuZmFjdG9yeSA9IG5ldyBGcmFnbWVudEZhY3RvcnkodGhpcy52bSwgdGhpcy5lbCk7XG4gICAgfVxuICAgIHRoaXMuZnJhZyA9IHRoaXMuZmFjdG9yeS5jcmVhdGUodGhpcy5faG9zdCwgdGhpcy5fc2NvcGUsIHRoaXMuX2ZyYWcpO1xuICAgIHRoaXMuZnJhZy5iZWZvcmUodGhpcy5hbmNob3IpO1xuICB9LFxuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5yZW1vdmUoKTtcbiAgICAgIHRoaXMuZnJhZyA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmVsc2VFbCAmJiAhdGhpcy5lbHNlRnJhZykge1xuICAgICAgaWYgKCF0aGlzLmVsc2VGYWN0b3J5KSB7XG4gICAgICAgIHRoaXMuZWxzZUZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMuZWxzZUVsLl9jb250ZXh0IHx8IHRoaXMudm0sIHRoaXMuZWxzZUVsKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZWxzZUZyYWcgPSB0aGlzLmVsc2VGYWN0b3J5LmNyZWF0ZSh0aGlzLl9ob3N0LCB0aGlzLl9zY29wZSwgdGhpcy5fZnJhZyk7XG4gICAgICB0aGlzLmVsc2VGcmFnLmJlZm9yZSh0aGlzLmFuY2hvcik7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIGlmICh0aGlzLmZyYWcpIHtcbiAgICAgIHRoaXMuZnJhZy5kZXN0cm95KCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmVsc2VGcmFnKSB7XG4gICAgICB0aGlzLmVsc2VGcmFnLmRlc3Ryb3koKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBzaG93ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gY2hlY2sgZWxzZSBibG9ja1xuICAgIHZhciBuZXh0ID0gdGhpcy5lbC5uZXh0RWxlbWVudFNpYmxpbmc7XG4gICAgaWYgKG5leHQgJiYgZ2V0QXR0cihuZXh0LCAndi1lbHNlJykgIT09IG51bGwpIHtcbiAgICAgIHRoaXMuZWxzZUVsID0gbmV4dDtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmFwcGx5KHRoaXMuZWwsIHZhbHVlKTtcbiAgICBpZiAodGhpcy5lbHNlRWwpIHtcbiAgICAgIHRoaXMuYXBwbHkodGhpcy5lbHNlRWwsICF2YWx1ZSk7XG4gICAgfVxuICB9LFxuXG4gIGFwcGx5OiBmdW5jdGlvbiBhcHBseShlbCwgdmFsdWUpIHtcbiAgICBpZiAoaW5Eb2MoZWwpKSB7XG4gICAgICBhcHBseVRyYW5zaXRpb24oZWwsIHZhbHVlID8gMSA6IC0xLCB0b2dnbGUsIHRoaXMudm0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0b2dnbGUoKTtcbiAgICB9XG4gICAgZnVuY3Rpb24gdG9nZ2xlKCkge1xuICAgICAgZWwuc3R5bGUuZGlzcGxheSA9IHZhbHVlID8gJycgOiAnbm9uZSc7XG4gICAgfVxuICB9XG59O1xuXG52YXIgdGV4dCQyID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdmFyIGlzUmFuZ2UgPSBlbC50eXBlID09PSAncmFuZ2UnO1xuICAgIHZhciBsYXp5ID0gdGhpcy5wYXJhbXMubGF6eTtcbiAgICB2YXIgbnVtYmVyID0gdGhpcy5wYXJhbXMubnVtYmVyO1xuICAgIHZhciBkZWJvdW5jZSA9IHRoaXMucGFyYW1zLmRlYm91bmNlO1xuXG4gICAgLy8gaGFuZGxlIGNvbXBvc2l0aW9uIGV2ZW50cy5cbiAgICAvLyAgIGh0dHA6Ly9ibG9nLmV2YW55b3UubWUvMjAxNC8wMS8wMy9jb21wb3NpdGlvbi1ldmVudC9cbiAgICAvLyBza2lwIHRoaXMgZm9yIEFuZHJvaWQgYmVjYXVzZSBpdCBoYW5kbGVzIGNvbXBvc2l0aW9uXG4gICAgLy8gZXZlbnRzIHF1aXRlIGRpZmZlcmVudGx5LiBBbmRyb2lkIGRvZXNuJ3QgdHJpZ2dlclxuICAgIC8vIGNvbXBvc2l0aW9uIGV2ZW50cyBmb3IgbGFuZ3VhZ2UgaW5wdXQgbWV0aG9kcyBlLmcuXG4gICAgLy8gQ2hpbmVzZSwgYnV0IGluc3RlYWQgdHJpZ2dlcnMgdGhlbSBmb3Igc3BlbGxpbmdcbiAgICAvLyBzdWdnZXN0aW9ucy4uLiAoc2VlIERpc2N1c3Npb24vIzE2MilcbiAgICB2YXIgY29tcG9zaW5nID0gZmFsc2U7XG4gICAgaWYgKCFpc0FuZHJvaWQgJiYgIWlzUmFuZ2UpIHtcbiAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uc3RhcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGNvbXBvc2luZyA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2NvbXBvc2l0aW9uZW5kJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBjb21wb3NpbmcgPSBmYWxzZTtcbiAgICAgICAgLy8gaW4gSUUxMSB0aGUgXCJjb21wb3NpdGlvbmVuZFwiIGV2ZW50IGZpcmVzIEFGVEVSXG4gICAgICAgIC8vIHRoZSBcImlucHV0XCIgZXZlbnQsIHNvIHRoZSBpbnB1dCBoYW5kbGVyIGlzIGJsb2NrZWRcbiAgICAgICAgLy8gYXQgdGhlIGVuZC4uLiBoYXZlIHRvIGNhbGwgaXQgaGVyZS5cbiAgICAgICAgLy9cbiAgICAgICAgLy8gIzEzMjc6IGluIGxhenkgbW9kZSB0aGlzIGlzIHVuZWNlc3NhcnkuXG4gICAgICAgIGlmICghbGF6eSkge1xuICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gcHJldmVudCBtZXNzaW5nIHdpdGggdGhlIGlucHV0IHdoZW4gdXNlciBpcyB0eXBpbmcsXG4gICAgLy8gYW5kIGZvcmNlIHVwZGF0ZSBvbiBibHVyLlxuICAgIHRoaXMuZm9jdXNlZCA9IGZhbHNlO1xuICAgIGlmICghaXNSYW5nZSAmJiAhbGF6eSkge1xuICAgICAgdGhpcy5vbignZm9jdXMnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZm9jdXNlZCA9IHRydWU7XG4gICAgICB9KTtcbiAgICAgIHRoaXMub24oJ2JsdXInLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuZm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICAvLyBkbyBub3Qgc3luYyB2YWx1ZSBhZnRlciBmcmFnbWVudCByZW1vdmFsICgjMjAxNylcbiAgICAgICAgaWYgKCFzZWxmLl9mcmFnIHx8IHNlbGYuX2ZyYWcuaW5zZXJ0ZWQpIHtcbiAgICAgICAgICBzZWxmLnJhd0xpc3RlbmVyKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIE5vdyBhdHRhY2ggdGhlIG1haW4gbGlzdGVuZXJcbiAgICB0aGlzLmxpc3RlbmVyID0gdGhpcy5yYXdMaXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChjb21wb3NpbmcgfHwgIXNlbGYuX2JvdW5kKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHZhciB2YWwgPSBudW1iZXIgfHwgaXNSYW5nZSA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuICAgICAgc2VsZi5zZXQodmFsKTtcbiAgICAgIC8vIGZvcmNlIHVwZGF0ZSBvbiBuZXh0IHRpY2sgdG8gYXZvaWQgbG9jayAmIHNhbWUgdmFsdWVcbiAgICAgIC8vIGFsc28gb25seSB1cGRhdGUgd2hlbiB1c2VyIGlzIG5vdCB0eXBpbmdcbiAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaWYgKHNlbGYuX2JvdW5kICYmICFzZWxmLmZvY3VzZWQpIHtcbiAgICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIGFwcGx5IGRlYm91bmNlXG4gICAgaWYgKGRlYm91bmNlKSB7XG4gICAgICB0aGlzLmxpc3RlbmVyID0gX2RlYm91bmNlKHRoaXMubGlzdGVuZXIsIGRlYm91bmNlKTtcbiAgICB9XG5cbiAgICAvLyBTdXBwb3J0IGpRdWVyeSBldmVudHMsIHNpbmNlIGpRdWVyeS50cmlnZ2VyKCkgZG9lc24ndFxuICAgIC8vIHRyaWdnZXIgbmF0aXZlIGV2ZW50cyBpbiBzb21lIGNhc2VzIGFuZCBzb21lIHBsdWdpbnNcbiAgICAvLyByZWx5IG9uICQudHJpZ2dlcigpXG4gICAgLy9cbiAgICAvLyBXZSB3YW50IHRvIG1ha2Ugc3VyZSBpZiBhIGxpc3RlbmVyIGlzIGF0dGFjaGVkIHVzaW5nXG4gICAgLy8galF1ZXJ5LCBpdCBpcyBhbHNvIHJlbW92ZWQgd2l0aCBqUXVlcnksIHRoYXQncyB3aHlcbiAgICAvLyB3ZSBkbyB0aGUgY2hlY2sgZm9yIGVhY2ggZGlyZWN0aXZlIGluc3RhbmNlIGFuZFxuICAgIC8vIHN0b3JlIHRoYXQgY2hlY2sgcmVzdWx0IG9uIGl0c2VsZi4gVGhpcyBhbHNvIGFsbG93c1xuICAgIC8vIGVhc2llciB0ZXN0IGNvdmVyYWdlIGNvbnRyb2wgYnkgdW5zZXR0aW5nIHRoZSBnbG9iYWxcbiAgICAvLyBqUXVlcnkgdmFyaWFibGUgaW4gdGVzdHMuXG4gICAgdGhpcy5oYXNqUXVlcnkgPSB0eXBlb2YgalF1ZXJ5ID09PSAnZnVuY3Rpb24nO1xuICAgIGlmICh0aGlzLmhhc2pRdWVyeSkge1xuICAgICAgdmFyIG1ldGhvZCA9IGpRdWVyeS5mbi5vbiA/ICdvbicgOiAnYmluZCc7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMucmF3TGlzdGVuZXIpO1xuICAgICAgaWYgKCFsYXp5KSB7XG4gICAgICAgIGpRdWVyeShlbClbbWV0aG9kXSgnaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5yYXdMaXN0ZW5lcik7XG4gICAgICBpZiAoIWxhenkpIHtcbiAgICAgICAgdGhpcy5vbignaW5wdXQnLCB0aGlzLmxpc3RlbmVyKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJRTkgZG9lc24ndCBmaXJlIGlucHV0IGV2ZW50IG9uIGJhY2tzcGFjZS9kZWwvY3V0XG4gICAgaWYgKCFsYXp5ICYmIGlzSUU5KSB7XG4gICAgICB0aGlzLm9uKCdjdXQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIG5leHRUaWNrKHNlbGYubGlzdGVuZXIpO1xuICAgICAgfSk7XG4gICAgICB0aGlzLm9uKCdrZXl1cCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDQ2IHx8IGUua2V5Q29kZSA9PT0gOCkge1xuICAgICAgICAgIHNlbGYubGlzdGVuZXIoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy8gc2V0IGluaXRpYWwgdmFsdWUgaWYgcHJlc2VudFxuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ3ZhbHVlJykgfHwgZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJyAmJiBlbC52YWx1ZS50cmltKCkpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICAvLyAjMzAyOSBvbmx5IHVwZGF0ZSB3aGVuIHRoZSB2YWx1ZSBjaGFuZ2VzLiBUaGlzIHByZXZlbnRcbiAgICAvLyBicm93c2VycyBmcm9tIG92ZXJ3cml0aW5nIHZhbHVlcyBsaWtlIHNlbGVjdGlvblN0YXJ0XG4gICAgdmFsdWUgPSBfdG9TdHJpbmcodmFsdWUpO1xuICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5lbC52YWx1ZSkgdGhpcy5lbC52YWx1ZSA9IHZhbHVlO1xuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKHRoaXMuaGFzalF1ZXJ5KSB7XG4gICAgICB2YXIgbWV0aG9kID0galF1ZXJ5LmZuLm9mZiA/ICdvZmYnIDogJ3VuYmluZCc7XG4gICAgICBqUXVlcnkoZWwpW21ldGhvZF0oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgICAgalF1ZXJ5KGVsKVttZXRob2RdKCdpbnB1dCcsIHRoaXMubGlzdGVuZXIpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHJhZGlvID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgLy8gdmFsdWUgb3ZlcndyaXRlIHZpYSB2LWJpbmQ6dmFsdWVcbiAgICAgIGlmIChlbC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykpIHtcbiAgICAgICAgcmV0dXJuIGVsLl92YWx1ZTtcbiAgICAgIH1cbiAgICAgIHZhciB2YWwgPSBlbC52YWx1ZTtcbiAgICAgIGlmIChzZWxmLnBhcmFtcy5udW1iZXIpIHtcbiAgICAgICAgdmFsID0gdG9OdW1iZXIodmFsKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfTtcblxuICAgIHRoaXMubGlzdGVuZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBzZWxmLnNldChzZWxmLmdldFZhbHVlKCkpO1xuICAgIH07XG4gICAgdGhpcy5vbignY2hhbmdlJywgdGhpcy5saXN0ZW5lcik7XG5cbiAgICBpZiAoZWwuaGFzQXR0cmlidXRlKCdjaGVja2VkJykpIHtcbiAgICAgIHRoaXMuYWZ0ZXJCaW5kID0gdGhpcy5saXN0ZW5lcjtcbiAgICB9XG4gIH0sXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICB0aGlzLmVsLmNoZWNrZWQgPSBsb29zZUVxdWFsKHZhbHVlLCB0aGlzLmdldFZhbHVlKCkpO1xuICB9XG59O1xuXG52YXIgc2VsZWN0ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuXG4gICAgLy8gbWV0aG9kIHRvIGZvcmNlIHVwZGF0ZSBET00gdXNpbmcgbGF0ZXN0IHZhbHVlLlxuICAgIHRoaXMuZm9yY2VVcGRhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoc2VsZi5fd2F0Y2hlcikge1xuICAgICAgICBzZWxmLnVwZGF0ZShzZWxmLl93YXRjaGVyLmdldCgpKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gY2hlY2sgaWYgdGhpcyBpcyBhIG11bHRpcGxlIHNlbGVjdFxuICAgIHZhciBtdWx0aXBsZSA9IHRoaXMubXVsdGlwbGUgPSBlbC5oYXNBdHRyaWJ1dGUoJ211bHRpcGxlJyk7XG5cbiAgICAvLyBhdHRhY2ggbGlzdGVuZXJcbiAgICB0aGlzLmxpc3RlbmVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwsIG11bHRpcGxlKTtcbiAgICAgIHZhbHVlID0gc2VsZi5wYXJhbXMubnVtYmVyID8gaXNBcnJheSh2YWx1ZSkgPyB2YWx1ZS5tYXAodG9OdW1iZXIpIDogdG9OdW1iZXIodmFsdWUpIDogdmFsdWU7XG4gICAgICBzZWxmLnNldCh2YWx1ZSk7XG4gICAgfTtcbiAgICB0aGlzLm9uKCdjaGFuZ2UnLCB0aGlzLmxpc3RlbmVyKTtcblxuICAgIC8vIGlmIGhhcyBpbml0aWFsIHZhbHVlLCBzZXQgYWZ0ZXJCaW5kXG4gICAgdmFyIGluaXRWYWx1ZSA9IGdldFZhbHVlKGVsLCBtdWx0aXBsZSwgdHJ1ZSk7XG4gICAgaWYgKG11bHRpcGxlICYmIGluaXRWYWx1ZS5sZW5ndGggfHwgIW11bHRpcGxlICYmIGluaXRWYWx1ZSAhPT0gbnVsbCkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cblxuICAgIC8vIEFsbCBtYWpvciBicm93c2VycyBleGNlcHQgRmlyZWZveCByZXNldHNcbiAgICAvLyBzZWxlY3RlZEluZGV4IHdpdGggdmFsdWUgLTEgdG8gMCB3aGVuIHRoZSBlbGVtZW50XG4gICAgLy8gaXMgYXBwZW5kZWQgdG8gYSBuZXcgcGFyZW50LCB0aGVyZWZvcmUgd2UgaGF2ZSB0b1xuICAgIC8vIGZvcmNlIGEgRE9NIHVwZGF0ZSB3aGVuZXZlciB0aGF0IGhhcHBlbnMuLi5cbiAgICB0aGlzLnZtLiRvbignaG9vazphdHRhY2hlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgIG5leHRUaWNrKF90aGlzLmZvcmNlVXBkYXRlKTtcbiAgICB9KTtcbiAgICBpZiAoIWluRG9jKGVsKSkge1xuICAgICAgbmV4dFRpY2sodGhpcy5mb3JjZVVwZGF0ZSk7XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICBlbC5zZWxlY3RlZEluZGV4ID0gLTE7XG4gICAgdmFyIG11bHRpID0gdGhpcy5tdWx0aXBsZSAmJiBpc0FycmF5KHZhbHVlKTtcbiAgICB2YXIgb3B0aW9ucyA9IGVsLm9wdGlvbnM7XG4gICAgdmFyIGkgPSBvcHRpb25zLmxlbmd0aDtcbiAgICB2YXIgb3AsIHZhbDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBvcCA9IG9wdGlvbnNbaV07XG4gICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcbiAgICAgIC8qIGVzbGludC1kaXNhYmxlIGVxZXFlcSAqL1xuICAgICAgb3Auc2VsZWN0ZWQgPSBtdWx0aSA/IGluZGV4T2YkMSh2YWx1ZSwgdmFsKSA+IC0xIDogbG9vc2VFcXVhbCh2YWx1ZSwgdmFsKTtcbiAgICAgIC8qIGVzbGludC1lbmFibGUgZXFlcWVxICovXG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4gICAgdGhpcy52bS4kb2ZmKCdob29rOmF0dGFjaGVkJywgdGhpcy5mb3JjZVVwZGF0ZSk7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IHNlbGVjdCB2YWx1ZVxuICpcbiAqIEBwYXJhbSB7U2VsZWN0RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gbXVsdGlcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gaW5pdFxuICogQHJldHVybiB7QXJyYXl8Kn1cbiAqL1xuXG5mdW5jdGlvbiBnZXRWYWx1ZShlbCwgbXVsdGksIGluaXQpIHtcbiAgdmFyIHJlcyA9IG11bHRpID8gW10gOiBudWxsO1xuICB2YXIgb3AsIHZhbCwgc2VsZWN0ZWQ7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gZWwub3B0aW9ucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBvcCA9IGVsLm9wdGlvbnNbaV07XG4gICAgc2VsZWN0ZWQgPSBpbml0ID8gb3AuaGFzQXR0cmlidXRlKCdzZWxlY3RlZCcpIDogb3Auc2VsZWN0ZWQ7XG4gICAgaWYgKHNlbGVjdGVkKSB7XG4gICAgICB2YWwgPSBvcC5oYXNPd25Qcm9wZXJ0eSgnX3ZhbHVlJykgPyBvcC5fdmFsdWUgOiBvcC52YWx1ZTtcbiAgICAgIGlmIChtdWx0aSkge1xuICAgICAgICByZXMucHVzaCh2YWwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBOYXRpdmUgQXJyYXkuaW5kZXhPZiB1c2VzIHN0cmljdCBlcXVhbCwgYnV0IGluIHRoaXNcbiAqIGNhc2Ugd2UgbmVlZCB0byBtYXRjaCBzdHJpbmcvbnVtYmVycyB3aXRoIGN1c3RvbSBlcXVhbC5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSBhcnJcbiAqIEBwYXJhbSB7Kn0gdmFsXG4gKi9cblxuZnVuY3Rpb24gaW5kZXhPZiQxKGFyciwgdmFsKSB7XG4gIHZhciBpID0gYXJyLmxlbmd0aDtcbiAgd2hpbGUgKGktLSkge1xuICAgIGlmIChsb29zZUVxdWFsKGFycltpXSwgdmFsKSkge1xuICAgICAgcmV0dXJuIGk7XG4gICAgfVxuICB9XG4gIHJldHVybiAtMTtcbn1cblxudmFyIGNoZWNrYm94ID0ge1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG5cbiAgICB0aGlzLmdldFZhbHVlID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGVsLmhhc093blByb3BlcnR5KCdfdmFsdWUnKSA/IGVsLl92YWx1ZSA6IHNlbGYucGFyYW1zLm51bWJlciA/IHRvTnVtYmVyKGVsLnZhbHVlKSA6IGVsLnZhbHVlO1xuICAgIH07XG5cbiAgICBmdW5jdGlvbiBnZXRCb29sZWFuVmFsdWUoKSB7XG4gICAgICB2YXIgdmFsID0gZWwuY2hlY2tlZDtcbiAgICAgIGlmICh2YWwgJiYgZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuICAgICAgICByZXR1cm4gZWwuX3RydWVWYWx1ZTtcbiAgICAgIH1cbiAgICAgIGlmICghdmFsICYmIGVsLmhhc093blByb3BlcnR5KCdfZmFsc2VWYWx1ZScpKSB7XG4gICAgICAgIHJldHVybiBlbC5fZmFsc2VWYWx1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWw7XG4gICAgfVxuXG4gICAgdGhpcy5saXN0ZW5lciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBtb2RlbCA9IHNlbGYuX3dhdGNoZXIudmFsdWU7XG4gICAgICBpZiAoaXNBcnJheShtb2RlbCkpIHtcbiAgICAgICAgdmFyIHZhbCA9IHNlbGYuZ2V0VmFsdWUoKTtcbiAgICAgICAgaWYgKGVsLmNoZWNrZWQpIHtcbiAgICAgICAgICBpZiAoaW5kZXhPZihtb2RlbCwgdmFsKSA8IDApIHtcbiAgICAgICAgICAgIG1vZGVsLnB1c2godmFsKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgbW9kZWwuJHJlbW92ZSh2YWwpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzZWxmLnNldChnZXRCb29sZWFuVmFsdWUoKSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIHRoaXMub24oJ2NoYW5nZScsIHRoaXMubGlzdGVuZXIpO1xuICAgIGlmIChlbC5oYXNBdHRyaWJ1dGUoJ2NoZWNrZWQnKSkge1xuICAgICAgdGhpcy5hZnRlckJpbmQgPSB0aGlzLmxpc3RlbmVyO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSh2YWx1ZSkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XG4gICAgICBlbC5jaGVja2VkID0gaW5kZXhPZih2YWx1ZSwgdGhpcy5nZXRWYWx1ZSgpKSA+IC0xO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoZWwuaGFzT3duUHJvcGVydHkoJ190cnVlVmFsdWUnKSkge1xuICAgICAgICBlbC5jaGVja2VkID0gbG9vc2VFcXVhbCh2YWx1ZSwgZWwuX3RydWVWYWx1ZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBlbC5jaGVja2VkID0gISF2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbnZhciBoYW5kbGVycyA9IHtcbiAgdGV4dDogdGV4dCQyLFxuICByYWRpbzogcmFkaW8sXG4gIHNlbGVjdDogc2VsZWN0LFxuICBjaGVja2JveDogY2hlY2tib3hcbn07XG5cbnZhciBtb2RlbCA9IHtcblxuICBwcmlvcml0eTogTU9ERUwsXG4gIHR3b1dheTogdHJ1ZSxcbiAgaGFuZGxlcnM6IGhhbmRsZXJzLFxuICBwYXJhbXM6IFsnbGF6eScsICdudW1iZXInLCAnZGVib3VuY2UnXSxcblxuICAvKipcbiAgICogUG9zc2libGUgZWxlbWVudHM6XG4gICAqICAgPHNlbGVjdD5cbiAgICogICA8dGV4dGFyZWE+XG4gICAqICAgPGlucHV0IHR5cGU9XCIqXCI+XG4gICAqICAgICAtIHRleHRcbiAgICogICAgIC0gY2hlY2tib3hcbiAgICogICAgIC0gcmFkaW9cbiAgICogICAgIC0gbnVtYmVyXG4gICAqL1xuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgLy8gZnJpZW5kbHkgd2FybmluZy4uLlxuICAgIHRoaXMuY2hlY2tGaWx0ZXJzKCk7XG4gICAgaWYgKHRoaXMuaGFzUmVhZCAmJiAhdGhpcy5oYXNXcml0ZSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJdCBzZWVtcyB5b3UgYXJlIHVzaW5nIGEgcmVhZC1vbmx5IGZpbHRlciB3aXRoICcgKyAndi1tb2RlbD1cIicgKyB0aGlzLmRlc2NyaXB0b3IucmF3ICsgJ1wiLiAnICsgJ1lvdSBtaWdodCB3YW50IHRvIHVzZSBhIHR3by13YXkgZmlsdGVyIHRvIGVuc3VyZSBjb3JyZWN0IGJlaGF2aW9yLicsIHRoaXMudm0pO1xuICAgIH1cbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIHZhciB0YWcgPSBlbC50YWdOYW1lO1xuICAgIHZhciBoYW5kbGVyO1xuICAgIGlmICh0YWcgPT09ICdJTlBVVCcpIHtcbiAgICAgIGhhbmRsZXIgPSBoYW5kbGVyc1tlbC50eXBlXSB8fCBoYW5kbGVycy50ZXh0O1xuICAgIH0gZWxzZSBpZiAodGFnID09PSAnU0VMRUNUJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnNlbGVjdDtcbiAgICB9IGVsc2UgaWYgKHRhZyA9PT0gJ1RFWFRBUkVBJykge1xuICAgICAgaGFuZGxlciA9IGhhbmRsZXJzLnRleHQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2Fybigndi1tb2RlbCBkb2VzIG5vdCBzdXBwb3J0IGVsZW1lbnQgdHlwZTogJyArIHRhZywgdGhpcy52bSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGVsLl9fdl9tb2RlbCA9IHRoaXM7XG4gICAgaGFuZGxlci5iaW5kLmNhbGwodGhpcyk7XG4gICAgdGhpcy51cGRhdGUgPSBoYW5kbGVyLnVwZGF0ZTtcbiAgICB0aGlzLl91bmJpbmQgPSBoYW5kbGVyLnVuYmluZDtcbiAgfSxcblxuICAvKipcbiAgICogQ2hlY2sgcmVhZC93cml0ZSBmaWx0ZXIgc3RhdHMuXG4gICAqL1xuXG4gIGNoZWNrRmlsdGVyczogZnVuY3Rpb24gY2hlY2tGaWx0ZXJzKCkge1xuICAgIHZhciBmaWx0ZXJzID0gdGhpcy5maWx0ZXJzO1xuICAgIGlmICghZmlsdGVycykgcmV0dXJuO1xuICAgIHZhciBpID0gZmlsdGVycy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdmFyIGZpbHRlciA9IHJlc29sdmVBc3NldCh0aGlzLnZtLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlcnNbaV0ubmFtZSk7XG4gICAgICBpZiAodHlwZW9mIGZpbHRlciA9PT0gJ2Z1bmN0aW9uJyB8fCBmaWx0ZXIucmVhZCkge1xuICAgICAgICB0aGlzLmhhc1JlYWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgaWYgKGZpbHRlci53cml0ZSkge1xuICAgICAgICB0aGlzLmhhc1dyaXRlID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5lbC5fX3ZfbW9kZWwgPSBudWxsO1xuICAgIHRoaXMuX3VuYmluZCAmJiB0aGlzLl91bmJpbmQoKTtcbiAgfVxufTtcblxuLy8ga2V5Q29kZSBhbGlhc2VzXG52YXIga2V5Q29kZXMgPSB7XG4gIGVzYzogMjcsXG4gIHRhYjogOSxcbiAgZW50ZXI6IDEzLFxuICBzcGFjZTogMzIsXG4gICdkZWxldGUnOiBbOCwgNDZdLFxuICB1cDogMzgsXG4gIGxlZnQ6IDM3LFxuICByaWdodDogMzksXG4gIGRvd246IDQwXG59O1xuXG5mdW5jdGlvbiBrZXlGaWx0ZXIoaGFuZGxlciwga2V5cykge1xuICB2YXIgY29kZXMgPSBrZXlzLm1hcChmdW5jdGlvbiAoa2V5KSB7XG4gICAgdmFyIGNoYXJDb2RlID0ga2V5LmNoYXJDb2RlQXQoMCk7XG4gICAgaWYgKGNoYXJDb2RlID4gNDcgJiYgY2hhckNvZGUgPCA1OCkge1xuICAgICAgcmV0dXJuIHBhcnNlSW50KGtleSwgMTApO1xuICAgIH1cbiAgICBpZiAoa2V5Lmxlbmd0aCA9PT0gMSkge1xuICAgICAgY2hhckNvZGUgPSBrZXkudG9VcHBlckNhc2UoKS5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKGNoYXJDb2RlID4gNjQgJiYgY2hhckNvZGUgPCA5MSkge1xuICAgICAgICByZXR1cm4gY2hhckNvZGU7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBrZXlDb2Rlc1trZXldO1xuICB9KTtcbiAgY29kZXMgPSBbXS5jb25jYXQuYXBwbHkoW10sIGNvZGVzKTtcbiAgcmV0dXJuIGZ1bmN0aW9uIGtleUhhbmRsZXIoZSkge1xuICAgIGlmIChjb2Rlcy5pbmRleE9mKGUua2V5Q29kZSkgPiAtMSkge1xuICAgICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgICB9XG4gIH07XG59XG5cbmZ1bmN0aW9uIHN0b3BGaWx0ZXIoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gc3RvcEhhbmRsZXIoZSkge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgcmV0dXJuIGhhbmRsZXIuY2FsbCh0aGlzLCBlKTtcbiAgfTtcbn1cblxuZnVuY3Rpb24gcHJldmVudEZpbHRlcihoYW5kbGVyKSB7XG4gIHJldHVybiBmdW5jdGlvbiBwcmV2ZW50SGFuZGxlcihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHJldHVybiBoYW5kbGVyLmNhbGwodGhpcywgZSk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIHNlbGZGaWx0ZXIoaGFuZGxlcikge1xuICByZXR1cm4gZnVuY3Rpb24gc2VsZkhhbmRsZXIoZSkge1xuICAgIGlmIChlLnRhcmdldCA9PT0gZS5jdXJyZW50VGFyZ2V0KSB7XG4gICAgICByZXR1cm4gaGFuZGxlci5jYWxsKHRoaXMsIGUpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIG9uJDEgPSB7XG5cbiAgcHJpb3JpdHk6IE9OLFxuICBhY2NlcHRTdGF0ZW1lbnQ6IHRydWUsXG4gIGtleUNvZGVzOiBrZXlDb2RlcyxcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIC8vIGRlYWwgd2l0aCBpZnJhbWVzXG4gICAgaWYgKHRoaXMuZWwudGFnTmFtZSA9PT0gJ0lGUkFNRScgJiYgdGhpcy5hcmcgIT09ICdsb2FkJykge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgdGhpcy5pZnJhbWVCaW5kID0gZnVuY3Rpb24gKCkge1xuICAgICAgICBvbihzZWxmLmVsLmNvbnRlbnRXaW5kb3csIHNlbGYuYXJnLCBzZWxmLmhhbmRsZXIsIHNlbGYubW9kaWZpZXJzLmNhcHR1cmUpO1xuICAgICAgfTtcbiAgICAgIHRoaXMub24oJ2xvYWQnLCB0aGlzLmlmcmFtZUJpbmQpO1xuICAgIH1cbiAgfSxcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShoYW5kbGVyKSB7XG4gICAgLy8gc3R1YiBhIG5vb3AgZm9yIHYtb24gd2l0aCBubyB2YWx1ZSxcbiAgICAvLyBlLmcuIEBtb3VzZWRvd24ucHJldmVudFxuICAgIGlmICghdGhpcy5kZXNjcmlwdG9yLnJhdykge1xuICAgICAgaGFuZGxlciA9IGZ1bmN0aW9uICgpIHt9O1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgaGFuZGxlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCd2LW9uOicgKyB0aGlzLmFyZyArICc9XCInICsgdGhpcy5leHByZXNzaW9uICsgJ1wiIGV4cGVjdHMgYSBmdW5jdGlvbiB2YWx1ZSwgJyArICdnb3QgJyArIGhhbmRsZXIsIHRoaXMudm0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIGFwcGx5IG1vZGlmaWVyc1xuICAgIGlmICh0aGlzLm1vZGlmaWVycy5zdG9wKSB7XG4gICAgICBoYW5kbGVyID0gc3RvcEZpbHRlcihoYW5kbGVyKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kaWZpZXJzLnByZXZlbnQpIHtcbiAgICAgIGhhbmRsZXIgPSBwcmV2ZW50RmlsdGVyKGhhbmRsZXIpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RpZmllcnMuc2VsZikge1xuICAgICAgaGFuZGxlciA9IHNlbGZGaWx0ZXIoaGFuZGxlcik7XG4gICAgfVxuICAgIC8vIGtleSBmaWx0ZXJcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKHRoaXMubW9kaWZpZXJzKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIGtleSAhPT0gJ3N0b3AnICYmIGtleSAhPT0gJ3ByZXZlbnQnICYmIGtleSAhPT0gJ3NlbGYnICYmIGtleSAhPT0gJ2NhcHR1cmUnO1xuICAgIH0pO1xuICAgIGlmIChrZXlzLmxlbmd0aCkge1xuICAgICAgaGFuZGxlciA9IGtleUZpbHRlcihoYW5kbGVyLCBrZXlzKTtcbiAgICB9XG5cbiAgICB0aGlzLnJlc2V0KCk7XG4gICAgdGhpcy5oYW5kbGVyID0gaGFuZGxlcjtcblxuICAgIGlmICh0aGlzLmlmcmFtZUJpbmQpIHtcbiAgICAgIHRoaXMuaWZyYW1lQmluZCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICBvbih0aGlzLmVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyLCB0aGlzLm1vZGlmaWVycy5jYXB0dXJlKTtcbiAgICB9XG4gIH0sXG5cbiAgcmVzZXQ6IGZ1bmN0aW9uIHJlc2V0KCkge1xuICAgIHZhciBlbCA9IHRoaXMuaWZyYW1lQmluZCA/IHRoaXMuZWwuY29udGVudFdpbmRvdyA6IHRoaXMuZWw7XG4gICAgaWYgKHRoaXMuaGFuZGxlcikge1xuICAgICAgb2ZmKGVsLCB0aGlzLmFyZywgdGhpcy5oYW5kbGVyKTtcbiAgICB9XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgdGhpcy5yZXNldCgpO1xuICB9XG59O1xuXG52YXIgcHJlZml4ZXMgPSBbJy13ZWJraXQtJywgJy1tb3otJywgJy1tcy0nXTtcbnZhciBjYW1lbFByZWZpeGVzID0gWydXZWJraXQnLCAnTW96JywgJ21zJ107XG52YXIgaW1wb3J0YW50UkUgPSAvIWltcG9ydGFudDs/JC87XG52YXIgcHJvcENhY2hlID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxudmFyIHRlc3RFbCA9IG51bGw7XG5cbnZhciBzdHlsZSA9IHtcblxuICBkZWVwOiB0cnVlLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHRoaXMuZWwuc3R5bGUuY3NzVGV4dCA9IHZhbHVlO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlLnJlZHVjZShleHRlbmQsIHt9KSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuaGFuZGxlT2JqZWN0KHZhbHVlIHx8IHt9KTtcbiAgICB9XG4gIH0sXG5cbiAgaGFuZGxlT2JqZWN0OiBmdW5jdGlvbiBoYW5kbGVPYmplY3QodmFsdWUpIHtcbiAgICAvLyBjYWNoZSBvYmplY3Qgc3R5bGVzIHNvIHRoYXQgb25seSBjaGFuZ2VkIHByb3BzXG4gICAgLy8gYXJlIGFjdHVhbGx5IHVwZGF0ZWQuXG4gICAgdmFyIGNhY2hlID0gdGhpcy5jYWNoZSB8fCAodGhpcy5jYWNoZSA9IHt9KTtcbiAgICB2YXIgbmFtZSwgdmFsO1xuICAgIGZvciAobmFtZSBpbiBjYWNoZSkge1xuICAgICAgaWYgKCEobmFtZSBpbiB2YWx1ZSkpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVTaW5nbGUobmFtZSwgbnVsbCk7XG4gICAgICAgIGRlbGV0ZSBjYWNoZVtuYW1lXTtcbiAgICAgIH1cbiAgICB9XG4gICAgZm9yIChuYW1lIGluIHZhbHVlKSB7XG4gICAgICB2YWwgPSB2YWx1ZVtuYW1lXTtcbiAgICAgIGlmICh2YWwgIT09IGNhY2hlW25hbWVdKSB7XG4gICAgICAgIGNhY2hlW25hbWVdID0gdmFsO1xuICAgICAgICB0aGlzLmhhbmRsZVNpbmdsZShuYW1lLCB2YWwpO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICBoYW5kbGVTaW5nbGU6IGZ1bmN0aW9uIGhhbmRsZVNpbmdsZShwcm9wLCB2YWx1ZSkge1xuICAgIHByb3AgPSBub3JtYWxpemUocHJvcCk7XG4gICAgaWYgKCFwcm9wKSByZXR1cm47IC8vIHVuc3VwcG9ydGVkIHByb3BcbiAgICAvLyBjYXN0IHBvc3NpYmxlIG51bWJlcnMvYm9vbGVhbnMgaW50byBzdHJpbmdzXG4gICAgaWYgKHZhbHVlICE9IG51bGwpIHZhbHVlICs9ICcnO1xuICAgIGlmICh2YWx1ZSkge1xuICAgICAgdmFyIGlzSW1wb3J0YW50ID0gaW1wb3J0YW50UkUudGVzdCh2YWx1ZSkgPyAnaW1wb3J0YW50JyA6ICcnO1xuICAgICAgaWYgKGlzSW1wb3J0YW50KSB7XG4gICAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICAgIHdhcm4oJ0l0XFwncyBwcm9iYWJseSBhIGJhZCBpZGVhIHRvIHVzZSAhaW1wb3J0YW50IHdpdGggaW5saW5lIHJ1bGVzLiAnICsgJ1RoaXMgZmVhdHVyZSB3aWxsIGJlIGRlcHJlY2F0ZWQgaW4gYSBmdXR1cmUgdmVyc2lvbiBvZiBWdWUuJyk7XG4gICAgICAgIH1cbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKGltcG9ydGFudFJFLCAnJykudHJpbSgpO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnNldFByb3BlcnR5KHByb3Aua2ViYWIsIHZhbHVlLCBpc0ltcG9ydGFudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmVsLnN0eWxlW3Byb3AuY2FtZWxdID0gdmFsdWU7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZWwuc3R5bGVbcHJvcC5jYW1lbF0gPSAnJztcbiAgICB9XG4gIH1cblxufTtcblxuLyoqXG4gKiBOb3JtYWxpemUgYSBDU1MgcHJvcGVydHkgbmFtZS5cbiAqIC0gY2FjaGUgcmVzdWx0XG4gKiAtIGF1dG8gcHJlZml4XG4gKiAtIGNhbWVsQ2FzZSAtPiBkYXNoLWNhc2VcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gcHJvcFxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIG5vcm1hbGl6ZShwcm9wKSB7XG4gIGlmIChwcm9wQ2FjaGVbcHJvcF0pIHtcbiAgICByZXR1cm4gcHJvcENhY2hlW3Byb3BdO1xuICB9XG4gIHZhciByZXMgPSBwcmVmaXgocHJvcCk7XG4gIHByb3BDYWNoZVtwcm9wXSA9IHByb3BDYWNoZVtyZXNdID0gcmVzO1xuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEF1dG8gZGV0ZWN0IHRoZSBhcHByb3ByaWF0ZSBwcmVmaXggZm9yIGEgQ1NTIHByb3BlcnR5LlxuICogaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcGF1bGlyaXNoLzUyMzY5MlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBwcm9wXG4gKiBAcmV0dXJuIHtTdHJpbmd9XG4gKi9cblxuZnVuY3Rpb24gcHJlZml4KHByb3ApIHtcbiAgcHJvcCA9IGh5cGhlbmF0ZShwcm9wKTtcbiAgdmFyIGNhbWVsID0gY2FtZWxpemUocHJvcCk7XG4gIHZhciB1cHBlciA9IGNhbWVsLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgY2FtZWwuc2xpY2UoMSk7XG4gIGlmICghdGVzdEVsKSB7XG4gICAgdGVzdEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIH1cbiAgdmFyIGkgPSBwcmVmaXhlcy5sZW5ndGg7XG4gIHZhciBwcmVmaXhlZDtcbiAgaWYgKGNhbWVsICE9PSAnZmlsdGVyJyAmJiBjYW1lbCBpbiB0ZXN0RWwuc3R5bGUpIHtcbiAgICByZXR1cm4ge1xuICAgICAga2ViYWI6IHByb3AsXG4gICAgICBjYW1lbDogY2FtZWxcbiAgICB9O1xuICB9XG4gIHdoaWxlIChpLS0pIHtcbiAgICBwcmVmaXhlZCA9IGNhbWVsUHJlZml4ZXNbaV0gKyB1cHBlcjtcbiAgICBpZiAocHJlZml4ZWQgaW4gdGVzdEVsLnN0eWxlKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBrZWJhYjogcHJlZml4ZXNbaV0gKyBwcm9wLFxuICAgICAgICBjYW1lbDogcHJlZml4ZWRcbiAgICAgIH07XG4gICAgfVxuICB9XG59XG5cbi8vIHhsaW5rXG52YXIgeGxpbmtOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rJztcbnZhciB4bGlua1JFID0gL154bGluazovO1xuXG4vLyBjaGVjayBmb3IgYXR0cmlidXRlcyB0aGF0IHByb2hpYml0IGludGVycG9sYXRpb25zXG52YXIgZGlzYWxsb3dlZEludGVycEF0dHJSRSA9IC9edi18Xjp8XkB8Xig/OmlzfHRyYW5zaXRpb258dHJhbnNpdGlvbi1tb2RlfGRlYm91bmNlfHRyYWNrLWJ5fHN0YWdnZXJ8ZW50ZXItc3RhZ2dlcnxsZWF2ZS1zdGFnZ2VyKSQvO1xuLy8gdGhlc2UgYXR0cmlidXRlcyBzaG91bGQgYWxzbyBzZXQgdGhlaXIgY29ycmVzcG9uZGluZyBwcm9wZXJ0aWVzXG4vLyBiZWNhdXNlIHRoZXkgb25seSBhZmZlY3QgdGhlIGluaXRpYWwgc3RhdGUgb2YgdGhlIGVsZW1lbnRcbnZhciBhdHRyV2l0aFByb3BzUkUgPSAvXig/OnZhbHVlfGNoZWNrZWR8c2VsZWN0ZWR8bXV0ZWQpJC87XG4vLyB0aGVzZSBhdHRyaWJ1dGVzIGV4cGVjdCBlbnVtcmF0ZWQgdmFsdWVzIG9mIFwidHJ1ZVwiIG9yIFwiZmFsc2VcIlxuLy8gYnV0IGFyZSBub3QgYm9vbGVhbiBhdHRyaWJ1dGVzXG52YXIgZW51bWVyYXRlZEF0dHJSRSA9IC9eKD86ZHJhZ2dhYmxlfGNvbnRlbnRlZGl0YWJsZXxzcGVsbGNoZWNrKSQvO1xuXG4vLyB0aGVzZSBhdHRyaWJ1dGVzIHNob3VsZCBzZXQgYSBoaWRkZW4gcHJvcGVydHkgZm9yXG4vLyBiaW5kaW5nIHYtbW9kZWwgdG8gb2JqZWN0IHZhbHVlc1xudmFyIG1vZGVsUHJvcHMgPSB7XG4gIHZhbHVlOiAnX3ZhbHVlJyxcbiAgJ3RydWUtdmFsdWUnOiAnX3RydWVWYWx1ZScsXG4gICdmYWxzZS12YWx1ZSc6ICdfZmFsc2VWYWx1ZSdcbn07XG5cbnZhciBiaW5kJDEgPSB7XG5cbiAgcHJpb3JpdHk6IEJJTkQsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuICAgIHZhciB0YWcgPSB0aGlzLmVsLnRhZ05hbWU7XG4gICAgLy8gc2hvdWxkIGJlIGRlZXAgd2F0Y2ggb24gb2JqZWN0IG1vZGVcbiAgICBpZiAoIWF0dHIpIHtcbiAgICAgIHRoaXMuZGVlcCA9IHRydWU7XG4gICAgfVxuICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9uIGJpbmRpbmdzXG4gICAgdmFyIGRlc2NyaXB0b3IgPSB0aGlzLmRlc2NyaXB0b3I7XG4gICAgdmFyIHRva2VucyA9IGRlc2NyaXB0b3IuaW50ZXJwO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIC8vIGhhbmRsZSBpbnRlcnBvbGF0aW9ucyB3aXRoIG9uZS10aW1lIHRva2Vuc1xuICAgICAgaWYgKGRlc2NyaXB0b3IuaGFzT25lVGltZSkge1xuICAgICAgICB0aGlzLmV4cHJlc3Npb24gPSB0b2tlbnNUb0V4cCh0b2tlbnMsIHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pO1xuICAgICAgfVxuXG4gICAgICAvLyBvbmx5IGFsbG93IGJpbmRpbmcgb24gbmF0aXZlIGF0dHJpYnV0ZXNcbiAgICAgIGlmIChkaXNhbGxvd2VkSW50ZXJwQXR0clJFLnRlc3QoYXR0cikgfHwgYXR0ciA9PT0gJ25hbWUnICYmICh0YWcgPT09ICdQQVJUSUFMJyB8fCB0YWcgPT09ICdTTE9UJykpIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnICsgJ2F0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uIGlzIG5vdCBhbGxvd2VkIGluIFZ1ZS5qcyAnICsgJ2RpcmVjdGl2ZXMgYW5kIHNwZWNpYWwgYXR0cmlidXRlcy4nLCB0aGlzLnZtKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICAgIHRoaXMuaW52YWxpZCA9IHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgdmFyIHJhdyA9IGF0dHIgKyAnPVwiJyArIGRlc2NyaXB0b3IucmF3ICsgJ1wiOiAnO1xuICAgICAgICAvLyB3YXJuIHNyY1xuICAgICAgICBpZiAoYXR0ciA9PT0gJ3NyYycpIHtcbiAgICAgICAgICB3YXJuKHJhdyArICdpbnRlcnBvbGF0aW9uIGluIFwic3JjXCIgYXR0cmlidXRlIHdpbGwgY2F1c2UgJyArICdhIDQwNCByZXF1ZXN0LiBVc2Ugdi1iaW5kOnNyYyBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gd2FybiBzdHlsZVxuICAgICAgICBpZiAoYXR0ciA9PT0gJ3N0eWxlJykge1xuICAgICAgICAgIHdhcm4ocmF3ICsgJ2ludGVycG9sYXRpb24gaW4gXCJzdHlsZVwiIGF0dHJpYnV0ZSB3aWxsIGNhdXNlICcgKyAndGhlIGF0dHJpYnV0ZSB0byBiZSBkaXNjYXJkZWQgaW4gSW50ZXJuZXQgRXhwbG9yZXIuICcgKyAnVXNlIHYtYmluZDpzdHlsZSBpbnN0ZWFkLicsIHRoaXMudm0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMuaW52YWxpZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgYXR0ciA9IHRoaXMuYXJnO1xuICAgIGlmICh0aGlzLmFyZykge1xuICAgICAgdGhpcy5oYW5kbGVTaW5nbGUoYXR0ciwgdmFsdWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmhhbmRsZU9iamVjdCh2YWx1ZSB8fCB7fSk7XG4gICAgfVxuICB9LFxuXG4gIC8vIHNoYXJlIG9iamVjdCBoYW5kbGVyIHdpdGggdi1iaW5kOmNsYXNzXG4gIGhhbmRsZU9iamVjdDogc3R5bGUuaGFuZGxlT2JqZWN0LFxuXG4gIGhhbmRsZVNpbmdsZTogZnVuY3Rpb24gaGFuZGxlU2luZ2xlKGF0dHIsIHZhbHVlKSB7XG4gICAgdmFyIGVsID0gdGhpcy5lbDtcbiAgICB2YXIgaW50ZXJwID0gdGhpcy5kZXNjcmlwdG9yLmludGVycDtcbiAgICBpZiAodGhpcy5tb2RpZmllcnMuY2FtZWwpIHtcbiAgICAgIGF0dHIgPSBjYW1lbGl6ZShhdHRyKTtcbiAgICB9XG4gICAgaWYgKCFpbnRlcnAgJiYgYXR0cldpdGhQcm9wc1JFLnRlc3QoYXR0cikgJiYgYXR0ciBpbiBlbCkge1xuICAgICAgdmFyIGF0dHJWYWx1ZSA9IGF0dHIgPT09ICd2YWx1ZScgPyB2YWx1ZSA9PSBudWxsIC8vIElFOSB3aWxsIHNldCBpbnB1dC52YWx1ZSB0byBcIm51bGxcIiBmb3IgbnVsbC4uLlxuICAgICAgPyAnJyA6IHZhbHVlIDogdmFsdWU7XG5cbiAgICAgIGlmIChlbFthdHRyXSAhPT0gYXR0clZhbHVlKSB7XG4gICAgICAgIGVsW2F0dHJdID0gYXR0clZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBzZXQgbW9kZWwgcHJvcHNcbiAgICB2YXIgbW9kZWxQcm9wID0gbW9kZWxQcm9wc1thdHRyXTtcbiAgICBpZiAoIWludGVycCAmJiBtb2RlbFByb3ApIHtcbiAgICAgIGVsW21vZGVsUHJvcF0gPSB2YWx1ZTtcbiAgICAgIC8vIHVwZGF0ZSB2LW1vZGVsIGlmIHByZXNlbnRcbiAgICAgIHZhciBtb2RlbCA9IGVsLl9fdl9tb2RlbDtcbiAgICAgIGlmIChtb2RlbCkge1xuICAgICAgICBtb2RlbC5saXN0ZW5lcigpO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBkbyBub3Qgc2V0IHZhbHVlIGF0dHJpYnV0ZSBmb3IgdGV4dGFyZWFcbiAgICBpZiAoYXR0ciA9PT0gJ3ZhbHVlJyAmJiBlbC50YWdOYW1lID09PSAnVEVYVEFSRUEnKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIHVwZGF0ZSBhdHRyaWJ1dGVcbiAgICBpZiAoZW51bWVyYXRlZEF0dHJSRS50ZXN0KGF0dHIpKSB7XG4gICAgICBlbC5zZXRBdHRyaWJ1dGUoYXR0ciwgdmFsdWUgPyAndHJ1ZScgOiAnZmFsc2UnKTtcbiAgICB9IGVsc2UgaWYgKHZhbHVlICE9IG51bGwgJiYgdmFsdWUgIT09IGZhbHNlKSB7XG4gICAgICBpZiAoYXR0ciA9PT0gJ2NsYXNzJykge1xuICAgICAgICAvLyBoYW5kbGUgZWRnZSBjYXNlICMxOTYwOlxuICAgICAgICAvLyBjbGFzcyBpbnRlcnBvbGF0aW9uIHNob3VsZCBub3Qgb3ZlcndyaXRlIFZ1ZSB0cmFuc2l0aW9uIGNsYXNzXG4gICAgICAgIGlmIChlbC5fX3ZfdHJhbnMpIHtcbiAgICAgICAgICB2YWx1ZSArPSAnICcgKyBlbC5fX3ZfdHJhbnMuaWQgKyAnLXRyYW5zaXRpb24nO1xuICAgICAgICB9XG4gICAgICAgIHNldENsYXNzKGVsLCB2YWx1ZSk7XG4gICAgICB9IGVsc2UgaWYgKHhsaW5rUkUudGVzdChhdHRyKSkge1xuICAgICAgICBlbC5zZXRBdHRyaWJ1dGVOUyh4bGlua05TLCBhdHRyLCB2YWx1ZSA9PT0gdHJ1ZSA/ICcnIDogdmFsdWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgZWwuc2V0QXR0cmlidXRlKGF0dHIsIHZhbHVlID09PSB0cnVlID8gJycgOiB2YWx1ZSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZShhdHRyKTtcbiAgICB9XG4gIH1cbn07XG5cbnZhciBlbCA9IHtcblxuICBwcmlvcml0eTogRUwsXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAoIXRoaXMuYXJnKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHZhciBpZCA9IHRoaXMuaWQgPSBjYW1lbGl6ZSh0aGlzLmFyZyk7XG4gICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJGVscztcbiAgICBpZiAoaGFzT3duKHJlZnMsIGlkKSkge1xuICAgICAgcmVmc1tpZF0gPSB0aGlzLmVsO1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWZpbmVSZWFjdGl2ZShyZWZzLCBpZCwgdGhpcy5lbCk7XG4gICAgfVxuICB9LFxuXG4gIHVuYmluZDogZnVuY3Rpb24gdW5iaW5kKCkge1xuICAgIHZhciByZWZzID0gKHRoaXMuX3Njb3BlIHx8IHRoaXMudm0pLiRlbHM7XG4gICAgaWYgKHJlZnNbdGhpcy5pZF0gPT09IHRoaXMuZWwpIHtcbiAgICAgIHJlZnNbdGhpcy5pZF0gPSBudWxsO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHJlZiA9IHtcbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ3YtcmVmOicgKyB0aGlzLmFyZyArICcgbXVzdCBiZSB1c2VkIG9uIGEgY2hpbGQgJyArICdjb21wb25lbnQuIEZvdW5kIG9uIDwnICsgdGhpcy5lbC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgKyAnPi4nLCB0aGlzLnZtKTtcbiAgfVxufTtcblxudmFyIGNsb2FrID0ge1xuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBlbCA9IHRoaXMuZWw7XG4gICAgdGhpcy52bS4kb25jZSgncHJlLWhvb2s6Y29tcGlsZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICBlbC5yZW1vdmVBdHRyaWJ1dGUoJ3YtY2xvYWsnKTtcbiAgICB9KTtcbiAgfVxufTtcblxuLy8gbXVzdCBleHBvcnQgcGxhaW4gb2JqZWN0XG52YXIgZGlyZWN0aXZlcyA9IHtcbiAgdGV4dDogdGV4dCQxLFxuICBodG1sOiBodG1sLFxuICAnZm9yJzogdkZvcixcbiAgJ2lmJzogdklmLFxuICBzaG93OiBzaG93LFxuICBtb2RlbDogbW9kZWwsXG4gIG9uOiBvbiQxLFxuICBiaW5kOiBiaW5kJDEsXG4gIGVsOiBlbCxcbiAgcmVmOiByZWYsXG4gIGNsb2FrOiBjbG9ha1xufTtcblxudmFyIHZDbGFzcyA9IHtcblxuICBkZWVwOiB0cnVlLFxuXG4gIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKHZhbHVlKSB7XG4gICAgaWYgKCF2YWx1ZSkge1xuICAgICAgdGhpcy5jbGVhbnVwKCk7XG4gICAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aGlzLnNldENsYXNzKHZhbHVlLnRyaW0oKS5zcGxpdCgvXFxzKy8pKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zZXRDbGFzcyhub3JtYWxpemUkMSh2YWx1ZSkpO1xuICAgIH1cbiAgfSxcblxuICBzZXRDbGFzczogZnVuY3Rpb24gc2V0Q2xhc3ModmFsdWUpIHtcbiAgICB0aGlzLmNsZWFudXAodmFsdWUpO1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgdmFsID0gdmFsdWVbaV07XG4gICAgICBpZiAodmFsKSB7XG4gICAgICAgIGFwcGx5KHRoaXMuZWwsIHZhbCwgYWRkQ2xhc3MpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLnByZXZLZXlzID0gdmFsdWU7XG4gIH0sXG5cbiAgY2xlYW51cDogZnVuY3Rpb24gY2xlYW51cCh2YWx1ZSkge1xuICAgIHZhciBwcmV2S2V5cyA9IHRoaXMucHJldktleXM7XG4gICAgaWYgKCFwcmV2S2V5cykgcmV0dXJuO1xuICAgIHZhciBpID0gcHJldktleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZhciBrZXkgPSBwcmV2S2V5c1tpXTtcbiAgICAgIGlmICghdmFsdWUgfHwgdmFsdWUuaW5kZXhPZihrZXkpIDwgMCkge1xuICAgICAgICBhcHBseSh0aGlzLmVsLCBrZXksIHJlbW92ZUNsYXNzKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogTm9ybWFsaXplIG9iamVjdHMgYW5kIGFycmF5cyAocG90ZW50aWFsbHkgY29udGFpbmluZyBvYmplY3RzKVxuICogaW50byBhcnJheSBvZiBzdHJpbmdzLlxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fEFycmF5PFN0cmluZ3xPYmplY3Q+fSB2YWx1ZVxuICogQHJldHVybiB7QXJyYXk8U3RyaW5nPn1cbiAqL1xuXG5mdW5jdGlvbiBub3JtYWxpemUkMSh2YWx1ZSkge1xuICB2YXIgcmVzID0gW107XG4gIGlmIChpc0FycmF5KHZhbHVlKSkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdmFsdWUubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgX2tleSA9IHZhbHVlW2ldO1xuICAgICAgaWYgKF9rZXkpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBfa2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIHJlcy5wdXNoKF9rZXkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAodmFyIGsgaW4gX2tleSkge1xuICAgICAgICAgICAgaWYgKF9rZXlba10pIHJlcy5wdXNoKGspO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBlbHNlIGlmIChpc09iamVjdCh2YWx1ZSkpIHtcbiAgICBmb3IgKHZhciBrZXkgaW4gdmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZVtrZXldKSByZXMucHVzaChrZXkpO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEFkZCBvciByZW1vdmUgYSBjbGFzcy9jbGFzc2VzIG9uIGFuIGVsZW1lbnRcbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5IFRoZSBjbGFzcyBuYW1lLiBUaGlzIG1heSBvciBtYXkgbm90XG4gKiAgICAgICAgICAgICAgICAgICAgIGNvbnRhaW4gYSBzcGFjZSBjaGFyYWN0ZXIsIGluIHN1Y2ggYVxuICogICAgICAgICAgICAgICAgICAgICBjYXNlIHdlJ2xsIGRlYWwgd2l0aCBtdWx0aXBsZSBjbGFzc1xuICogICAgICAgICAgICAgICAgICAgICBuYW1lcyBhdCBvbmNlLlxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5mdW5jdGlvbiBhcHBseShlbCwga2V5LCBmbikge1xuICBrZXkgPSBrZXkudHJpbSgpO1xuICBpZiAoa2V5LmluZGV4T2YoJyAnKSA9PT0gLTEpIHtcbiAgICBmbihlbCwga2V5KTtcbiAgICByZXR1cm47XG4gIH1cbiAgLy8gVGhlIGtleSBjb250YWlucyBvbmUgb3IgbW9yZSBzcGFjZSBjaGFyYWN0ZXJzLlxuICAvLyBTaW5jZSBhIGNsYXNzIG5hbWUgZG9lc24ndCBhY2NlcHQgc3VjaCBjaGFyYWN0ZXJzLCB3ZVxuICAvLyB0cmVhdCBpdCBhcyBtdWx0aXBsZSBjbGFzc2VzLlxuICB2YXIga2V5cyA9IGtleS5zcGxpdCgvXFxzKy8pO1xuICBmb3IgKHZhciBpID0gMCwgbCA9IGtleXMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgZm4oZWwsIGtleXNbaV0pO1xuICB9XG59XG5cbnZhciBjb21wb25lbnQgPSB7XG5cbiAgcHJpb3JpdHk6IENPTVBPTkVOVCxcblxuICBwYXJhbXM6IFsna2VlcC1hbGl2ZScsICd0cmFuc2l0aW9uLW1vZGUnLCAnaW5saW5lLXRlbXBsYXRlJ10sXG5cbiAgLyoqXG4gICAqIFNldHVwLiBUd28gcG9zc2libGUgdXNhZ2VzOlxuICAgKlxuICAgKiAtIHN0YXRpYzpcbiAgICogICA8Y29tcD4gb3IgPGRpdiB2LWNvbXBvbmVudD1cImNvbXBcIj5cbiAgICpcbiAgICogLSBkeW5hbWljOlxuICAgKiAgIDxjb21wb25lbnQgOmlzPVwidmlld1wiPlxuICAgKi9cblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIGlmICghdGhpcy5lbC5fX3Z1ZV9fKSB7XG4gICAgICAvLyBrZWVwLWFsaXZlIGNhY2hlXG4gICAgICB0aGlzLmtlZXBBbGl2ZSA9IHRoaXMucGFyYW1zLmtlZXBBbGl2ZTtcbiAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLmNhY2hlID0ge307XG4gICAgICB9XG4gICAgICAvLyBjaGVjayBpbmxpbmUtdGVtcGxhdGVcbiAgICAgIGlmICh0aGlzLnBhcmFtcy5pbmxpbmVUZW1wbGF0ZSkge1xuICAgICAgICAvLyBleHRyYWN0IGlubGluZSB0ZW1wbGF0ZSBhcyBhIERvY3VtZW50RnJhZ21lbnRcbiAgICAgICAgdGhpcy5pbmxpbmVUZW1wbGF0ZSA9IGV4dHJhY3RDb250ZW50KHRoaXMuZWwsIHRydWUpO1xuICAgICAgfVxuICAgICAgLy8gY29tcG9uZW50IHJlc29sdXRpb24gcmVsYXRlZCBzdGF0ZVxuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSB0aGlzLkNvbXBvbmVudCA9IG51bGw7XG4gICAgICAvLyB0cmFuc2l0aW9uIHJlbGF0ZWQgc3RhdGVcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxzID0gMDtcbiAgICAgIHRoaXMucGVuZGluZ1JlbW92YWxDYiA9IG51bGw7XG4gICAgICAvLyBjcmVhdGUgYSByZWYgYW5jaG9yXG4gICAgICB0aGlzLmFuY2hvciA9IGNyZWF0ZUFuY2hvcigndi1jb21wb25lbnQnKTtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgICAgLy8gcmVtb3ZlIGlzIGF0dHJpYnV0ZS5cbiAgICAgIC8vIHRoaXMgaXMgcmVtb3ZlZCBkdXJpbmcgY29tcGlsYXRpb24sIGJ1dCBiZWNhdXNlIGNvbXBpbGF0aW9uIGlzXG4gICAgICAvLyBjYWNoZWQsIHdoZW4gdGhlIGNvbXBvbmVudCBpcyB1c2VkIGVsc2V3aGVyZSB0aGlzIGF0dHJpYnV0ZVxuICAgICAgLy8gd2lsbCByZW1haW4gYXQgbGluayB0aW1lLlxuICAgICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoJ2lzJyk7XG4gICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnOmlzJyk7XG4gICAgICAvLyByZW1vdmUgcmVmLCBzYW1lIGFzIGFib3ZlXG4gICAgICBpZiAodGhpcy5kZXNjcmlwdG9yLnJlZikge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgndi1yZWY6JyArIGh5cGhlbmF0ZSh0aGlzLmRlc2NyaXB0b3IucmVmKSk7XG4gICAgICB9XG4gICAgICAvLyBpZiBzdGF0aWMsIGJ1aWxkIHJpZ2h0IG5vdy5cbiAgICAgIGlmICh0aGlzLmxpdGVyYWwpIHtcbiAgICAgICAgdGhpcy5zZXRDb21wb25lbnQodGhpcy5leHByZXNzaW9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdjYW5ub3QgbW91bnQgY29tcG9uZW50IFwiJyArIHRoaXMuZXhwcmVzc2lvbiArICdcIiAnICsgJ29uIGFscmVhZHkgbW91bnRlZCBlbGVtZW50OiAnICsgdGhpcy5lbCk7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBQdWJsaWMgdXBkYXRlLCBjYWxsZWQgYnkgdGhlIHdhdGNoZXIgaW4gdGhlIGR5bmFtaWNcbiAgICogbGl0ZXJhbCBzY2VuYXJpbywgZS5nLiA8Y29tcG9uZW50IDppcz1cInZpZXdcIj5cbiAgICovXG5cbiAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUodmFsdWUpIHtcbiAgICBpZiAoIXRoaXMubGl0ZXJhbCkge1xuICAgICAgdGhpcy5zZXRDb21wb25lbnQodmFsdWUpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogU3dpdGNoIGR5bmFtaWMgY29tcG9uZW50cy4gTWF5IHJlc29sdmUgdGhlIGNvbXBvbmVudFxuICAgKiBhc3luY2hyb25vdXNseSwgYW5kIHBlcmZvcm0gdHJhbnNpdGlvbiBiYXNlZCBvblxuICAgKiBzcGVjaWZpZWQgdHJhbnNpdGlvbiBtb2RlLiBBY2NlcHRzIGEgZmV3IGFkZGl0aW9uYWxcbiAgICogYXJndW1lbnRzIHNwZWNpZmljYWxseSBmb3IgdnVlLXJvdXRlci5cbiAgICpcbiAgICogVGhlIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIHRoZSBmdWxsIHRyYW5zaXRpb24gaXNcbiAgICogZmluaXNoZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB2YWx1ZVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIHNldENvbXBvbmVudDogZnVuY3Rpb24gc2V0Q29tcG9uZW50KHZhbHVlLCBjYikge1xuICAgIHRoaXMuaW52YWxpZGF0ZVBlbmRpbmcoKTtcbiAgICBpZiAoIXZhbHVlKSB7XG4gICAgICAvLyBqdXN0IHJlbW92ZSBjdXJyZW50XG4gICAgICB0aGlzLnVuYnVpbGQodHJ1ZSk7XG4gICAgICB0aGlzLnJlbW92ZSh0aGlzLmNoaWxkVk0sIGNiKTtcbiAgICAgIHRoaXMuY2hpbGRWTSA9IG51bGw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgIHRoaXMucmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICBzZWxmLm1vdW50Q29tcG9uZW50KGNiKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogUmVzb2x2ZSB0aGUgY29tcG9uZW50IGNvbnN0cnVjdG9yIHRvIHVzZSB3aGVuIGNyZWF0aW5nXG4gICAqIHRoZSBjaGlsZCB2bS5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHZhbHVlXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIHJlc29sdmVDb21wb25lbnQ6IGZ1bmN0aW9uIHJlc29sdmVDb21wb25lbnQodmFsdWUsIGNiKSB7XG4gICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiID0gY2FuY2VsbGFibGUoZnVuY3Rpb24gKENvbXBvbmVudCkge1xuICAgICAgc2VsZi5Db21wb25lbnROYW1lID0gQ29tcG9uZW50Lm9wdGlvbnMubmFtZSB8fCAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogbnVsbCk7XG4gICAgICBzZWxmLkNvbXBvbmVudCA9IENvbXBvbmVudDtcbiAgICAgIGNiKCk7XG4gICAgfSk7XG4gICAgdGhpcy52bS5fcmVzb2x2ZUNvbXBvbmVudCh2YWx1ZSwgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBuZXcgaW5zdGFuY2UgdXNpbmcgdGhlIGN1cnJlbnQgY29uc3RydWN0b3IgYW5kXG4gICAqIHJlcGxhY2UgdGhlIGV4aXN0aW5nIGluc3RhbmNlLiBUaGlzIG1ldGhvZCBkb2Vzbid0IGNhcmVcbiAgICogd2hldGhlciB0aGUgbmV3IGNvbXBvbmVudCBhbmQgdGhlIG9sZCBvbmUgYXJlIGFjdHVhbGx5XG4gICAqIHRoZSBzYW1lLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqL1xuXG4gIG1vdW50Q29tcG9uZW50OiBmdW5jdGlvbiBtb3VudENvbXBvbmVudChjYikge1xuICAgIC8vIGFjdHVhbCBtb3VudFxuICAgIHRoaXMudW5idWlsZCh0cnVlKTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGFjdGl2YXRlSG9va3MgPSB0aGlzLkNvbXBvbmVudC5vcHRpb25zLmFjdGl2YXRlO1xuICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuICAgIHZhciBuZXdDb21wb25lbnQgPSB0aGlzLmJ1aWxkKCk7XG4gICAgaWYgKGFjdGl2YXRlSG9va3MgJiYgIWNhY2hlZCkge1xuICAgICAgdGhpcy53YWl0aW5nRm9yID0gbmV3Q29tcG9uZW50O1xuICAgICAgY2FsbEFjdGl2YXRlSG9va3MoYWN0aXZhdGVIb29rcywgbmV3Q29tcG9uZW50LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIGlmIChzZWxmLndhaXRpbmdGb3IgIT09IG5ld0NvbXBvbmVudCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBzZWxmLndhaXRpbmdGb3IgPSBudWxsO1xuICAgICAgICBzZWxmLnRyYW5zaXRpb24obmV3Q29tcG9uZW50LCBjYik7XG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gdXBkYXRlIHJlZiBmb3Iga2VwdC1hbGl2ZSBjb21wb25lbnRcbiAgICAgIGlmIChjYWNoZWQpIHtcbiAgICAgICAgbmV3Q29tcG9uZW50Ll91cGRhdGVSZWYoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMudHJhbnNpdGlvbihuZXdDb21wb25lbnQsIGNiKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIFdoZW4gdGhlIGNvbXBvbmVudCBjaGFuZ2VzIG9yIHVuYmluZHMgYmVmb3JlIGFuIGFzeW5jXG4gICAqIGNvbnN0cnVjdG9yIGlzIHJlc29sdmVkLCB3ZSBuZWVkIHRvIGludmFsaWRhdGUgaXRzXG4gICAqIHBlbmRpbmcgY2FsbGJhY2suXG4gICAqL1xuXG4gIGludmFsaWRhdGVQZW5kaW5nOiBmdW5jdGlvbiBpbnZhbGlkYXRlUGVuZGluZygpIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IpIHtcbiAgICAgIHRoaXMucGVuZGluZ0NvbXBvbmVudENiLmNhbmNlbCgpO1xuICAgICAgdGhpcy5wZW5kaW5nQ29tcG9uZW50Q2IgPSBudWxsO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogSW5zdGFudGlhdGUvaW5zZXJ0IGEgbmV3IGNoaWxkIHZtLlxuICAgKiBJZiBrZWVwIGFsaXZlIGFuZCBoYXMgY2FjaGVkIGluc3RhbmNlLCBpbnNlcnQgdGhhdFxuICAgKiBpbnN0YW5jZTsgb3RoZXJ3aXNlIGJ1aWxkIGEgbmV3IG9uZSBhbmQgY2FjaGUgaXQuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbZXh0cmFPcHRpb25zXVxuICAgKiBAcmV0dXJuIHtWdWV9IC0gdGhlIGNyZWF0ZWQgaW5zdGFuY2VcbiAgICovXG5cbiAgYnVpbGQ6IGZ1bmN0aW9uIGJ1aWxkKGV4dHJhT3B0aW9ucykge1xuICAgIHZhciBjYWNoZWQgPSB0aGlzLmdldENhY2hlZCgpO1xuICAgIGlmIChjYWNoZWQpIHtcbiAgICAgIHJldHVybiBjYWNoZWQ7XG4gICAgfVxuICAgIGlmICh0aGlzLkNvbXBvbmVudCkge1xuICAgICAgLy8gZGVmYXVsdCBvcHRpb25zXG4gICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgbmFtZTogdGhpcy5Db21wb25lbnROYW1lLFxuICAgICAgICBlbDogY2xvbmVOb2RlKHRoaXMuZWwpLFxuICAgICAgICB0ZW1wbGF0ZTogdGhpcy5pbmxpbmVUZW1wbGF0ZSxcbiAgICAgICAgLy8gbWFrZSBzdXJlIHRvIGFkZCB0aGUgY2hpbGQgd2l0aCBjb3JyZWN0IHBhcmVudFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBpdHMgcGFyZW50XG4gICAgICAgIC8vIHNob3VsZCBiZSB0aGUgdHJhbnNjbHVzaW9uIGhvc3QuXG4gICAgICAgIHBhcmVudDogdGhpcy5faG9zdCB8fCB0aGlzLnZtLFxuICAgICAgICAvLyBpZiBubyBpbmxpbmUtdGVtcGxhdGUsIHRoZW4gdGhlIGNvbXBpbGVkXG4gICAgICAgIC8vIGxpbmtlciBjYW4gYmUgY2FjaGVkIGZvciBiZXR0ZXIgcGVyZm9ybWFuY2UuXG4gICAgICAgIF9saW5rZXJDYWNoYWJsZTogIXRoaXMuaW5saW5lVGVtcGxhdGUsXG4gICAgICAgIF9yZWY6IHRoaXMuZGVzY3JpcHRvci5yZWYsXG4gICAgICAgIF9hc0NvbXBvbmVudDogdHJ1ZSxcbiAgICAgICAgX2lzUm91dGVyVmlldzogdGhpcy5faXNSb3V0ZXJWaWV3LFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGEgdHJhbnNjbHVkZWQgY29tcG9uZW50LCBjb250ZXh0XG4gICAgICAgIC8vIHdpbGwgYmUgdGhlIGNvbW1vbiBwYXJlbnQgdm0gb2YgdGhpcyBpbnN0YW5jZVxuICAgICAgICAvLyBhbmQgaXRzIGhvc3QuXG4gICAgICAgIF9jb250ZXh0OiB0aGlzLnZtLFxuICAgICAgICAvLyBpZiB0aGlzIGlzIGluc2lkZSBhbiBpbmxpbmUgdi1mb3IsIHRoZSBzY29wZVxuICAgICAgICAvLyB3aWxsIGJlIHRoZSBpbnRlcm1lZGlhdGUgc2NvcGUgY3JlYXRlZCBmb3IgdGhpc1xuICAgICAgICAvLyByZXBlYXQgZnJhZ21lbnQuIHRoaXMgaXMgdXNlZCBmb3IgbGlua2luZyBwcm9wc1xuICAgICAgICAvLyBhbmQgY29udGFpbmVyIGRpcmVjdGl2ZXMuXG4gICAgICAgIF9zY29wZTogdGhpcy5fc2NvcGUsXG4gICAgICAgIC8vIHBhc3MgaW4gdGhlIG93bmVyIGZyYWdtZW50IG9mIHRoaXMgY29tcG9uZW50LlxuICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBzbyB0aGF0IHRoZSBmcmFnbWVudCBjYW4ga2VlcFxuICAgICAgICAvLyB0cmFjayBvZiBpdHMgY29udGFpbmVkIGNvbXBvbmVudHMgaW4gb3JkZXIgdG9cbiAgICAgICAgLy8gY2FsbCBhdHRhY2gvZGV0YWNoIGhvb2tzIGZvciB0aGVtLlxuICAgICAgICBfZnJhZzogdGhpcy5fZnJhZ1xuICAgICAgfTtcbiAgICAgIC8vIGV4dHJhIG9wdGlvbnNcbiAgICAgIC8vIGluIDEuMC4wIHRoaXMgaXMgdXNlZCBieSB2dWUtcm91dGVyIG9ubHlcbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKGV4dHJhT3B0aW9ucykge1xuICAgICAgICBleHRlbmQob3B0aW9ucywgZXh0cmFPcHRpb25zKTtcbiAgICAgIH1cbiAgICAgIHZhciBjaGlsZCA9IG5ldyB0aGlzLkNvbXBvbmVudChvcHRpb25zKTtcbiAgICAgIGlmICh0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgICB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF0gPSBjaGlsZDtcbiAgICAgIH1cbiAgICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbC5oYXNBdHRyaWJ1dGUoJ3RyYW5zaXRpb24nKSAmJiBjaGlsZC5faXNGcmFnbWVudCkge1xuICAgICAgICB3YXJuKCdUcmFuc2l0aW9ucyB3aWxsIG5vdCB3b3JrIG9uIGEgZnJhZ21lbnQgaW5zdGFuY2UuICcgKyAnVGVtcGxhdGU6ICcgKyBjaGlsZC4kb3B0aW9ucy50ZW1wbGF0ZSwgY2hpbGQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNoaWxkO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVHJ5IHRvIGdldCBhIGNhY2hlZCBpbnN0YW5jZSBvZiB0aGUgY3VycmVudCBjb21wb25lbnQuXG4gICAqXG4gICAqIEByZXR1cm4ge1Z1ZXx1bmRlZmluZWR9XG4gICAqL1xuXG4gIGdldENhY2hlZDogZnVuY3Rpb24gZ2V0Q2FjaGVkKCkge1xuICAgIHJldHVybiB0aGlzLmtlZXBBbGl2ZSAmJiB0aGlzLmNhY2hlW3RoaXMuQ29tcG9uZW50LmNpZF07XG4gIH0sXG5cbiAgLyoqXG4gICAqIFRlYXJkb3duIHRoZSBjdXJyZW50IGNoaWxkLCBidXQgZGVmZXJzIGNsZWFudXAgc29cbiAgICogdGhhdCB3ZSBjYW4gc2VwYXJhdGUgdGhlIGRlc3Ryb3kgYW5kIHJlbW92YWwgc3RlcHMuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gZGVmZXJcbiAgICovXG5cbiAgdW5idWlsZDogZnVuY3Rpb24gdW5idWlsZChkZWZlcikge1xuICAgIGlmICh0aGlzLndhaXRpbmdGb3IpIHtcbiAgICAgIGlmICghdGhpcy5rZWVwQWxpdmUpIHtcbiAgICAgICAgdGhpcy53YWl0aW5nRm9yLiRkZXN0cm95KCk7XG4gICAgICB9XG4gICAgICB0aGlzLndhaXRpbmdGb3IgPSBudWxsO1xuICAgIH1cbiAgICB2YXIgY2hpbGQgPSB0aGlzLmNoaWxkVk07XG4gICAgaWYgKCFjaGlsZCB8fCB0aGlzLmtlZXBBbGl2ZSkge1xuICAgICAgaWYgKGNoaWxkKSB7XG4gICAgICAgIC8vIHJlbW92ZSByZWZcbiAgICAgICAgY2hpbGQuX2luYWN0aXZlID0gdHJ1ZTtcbiAgICAgICAgY2hpbGQuX3VwZGF0ZVJlZih0cnVlKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gdGhlIHNvbGUgcHVycG9zZSBvZiBgZGVmZXJDbGVhbnVwYCBpcyBzbyB0aGF0IHdlIGNhblxuICAgIC8vIFwiZGVhY3RpdmF0ZVwiIHRoZSB2bSByaWdodCBub3cgYW5kIHBlcmZvcm0gRE9NIHJlbW92YWxcbiAgICAvLyBsYXRlci5cbiAgICBjaGlsZC4kZGVzdHJveShmYWxzZSwgZGVmZXIpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZW1vdmUgY3VycmVudCBkZXN0cm95ZWQgY2hpbGQgYW5kIG1hbnVhbGx5IGRvXG4gICAqIHRoZSBjbGVhbnVwIGFmdGVyIHJlbW92YWwuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqL1xuXG4gIHJlbW92ZTogZnVuY3Rpb24gcmVtb3ZlKGNoaWxkLCBjYikge1xuICAgIHZhciBrZWVwQWxpdmUgPSB0aGlzLmtlZXBBbGl2ZTtcbiAgICBpZiAoY2hpbGQpIHtcbiAgICAgIC8vIHdlIG1heSBoYXZlIGEgY29tcG9uZW50IHN3aXRjaCB3aGVuIGEgcHJldmlvdXNcbiAgICAgIC8vIGNvbXBvbmVudCBpcyBzdGlsbCBiZWluZyB0cmFuc2l0aW9uZWQgb3V0LlxuICAgICAgLy8gd2Ugd2FudCB0byB0cmlnZ2VyIG9ubHkgb25lIGxhc3Rlc3QgaW5zZXJ0aW9uIGNiXG4gICAgICAvLyB3aGVuIHRoZSBleGlzdGluZyB0cmFuc2l0aW9uIGZpbmlzaGVzLiAoIzExMTkpXG4gICAgICB0aGlzLnBlbmRpbmdSZW1vdmFscysrO1xuICAgICAgdGhpcy5wZW5kaW5nUmVtb3ZhbENiID0gY2I7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBjaGlsZC4kcmVtb3ZlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbHMtLTtcbiAgICAgICAgaWYgKCFrZWVwQWxpdmUpIGNoaWxkLl9jbGVhbnVwKCk7XG4gICAgICAgIGlmICghc2VsZi5wZW5kaW5nUmVtb3ZhbHMgJiYgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKSB7XG4gICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiKCk7XG4gICAgICAgICAgc2VsZi5wZW5kaW5nUmVtb3ZhbENiID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSBlbHNlIGlmIChjYikge1xuICAgICAgY2IoKTtcbiAgICB9XG4gIH0sXG5cbiAgLyoqXG4gICAqIEFjdHVhbGx5IHN3YXAgdGhlIGNvbXBvbmVudHMsIGRlcGVuZGluZyBvbiB0aGVcbiAgICogdHJhbnNpdGlvbiBtb2RlLiBEZWZhdWx0cyB0byBzaW11bHRhbmVvdXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICB0cmFuc2l0aW9uOiBmdW5jdGlvbiB0cmFuc2l0aW9uKHRhcmdldCwgY2IpIHtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIGN1cnJlbnQgPSB0aGlzLmNoaWxkVk07XG4gICAgLy8gZm9yIGRldnRvb2wgaW5zcGVjdGlvblxuICAgIGlmIChjdXJyZW50KSBjdXJyZW50Ll9pbmFjdGl2ZSA9IHRydWU7XG4gICAgdGFyZ2V0Ll9pbmFjdGl2ZSA9IGZhbHNlO1xuICAgIHRoaXMuY2hpbGRWTSA9IHRhcmdldDtcbiAgICBzd2l0Y2ggKHNlbGYucGFyYW1zLnRyYW5zaXRpb25Nb2RlKSB7XG4gICAgICBjYXNlICdpbi1vdXQnOlxuICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQsIGNiKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnb3V0LWluJzpcbiAgICAgICAgc2VsZi5yZW1vdmUoY3VycmVudCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRhcmdldC4kYmVmb3JlKHNlbGYuYW5jaG9yLCBjYik7XG4gICAgICAgIH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHNlbGYucmVtb3ZlKGN1cnJlbnQpO1xuICAgICAgICB0YXJnZXQuJGJlZm9yZShzZWxmLmFuY2hvciwgY2IpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogVW5iaW5kLlxuICAgKi9cblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLmludmFsaWRhdGVQZW5kaW5nKCk7XG4gICAgLy8gRG8gbm90IGRlZmVyIGNsZWFudXAgd2hlbiB1bmJpbmRpbmdcbiAgICB0aGlzLnVuYnVpbGQoKTtcbiAgICAvLyBkZXN0cm95IGFsbCBrZWVwLWFsaXZlIGNhY2hlZCBpbnN0YW5jZXNcbiAgICBpZiAodGhpcy5jYWNoZSkge1xuICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuY2FjaGUpIHtcbiAgICAgICAgdGhpcy5jYWNoZVtrZXldLiRkZXN0cm95KCk7XG4gICAgICB9XG4gICAgICB0aGlzLmNhY2hlID0gbnVsbDtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhY3RpdmF0ZSBob29rcyBpbiBvcmRlciAoYXN5bmNocm9ub3VzKVxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IGhvb2tzXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gKi9cblxuZnVuY3Rpb24gY2FsbEFjdGl2YXRlSG9va3MoaG9va3MsIHZtLCBjYikge1xuICB2YXIgdG90YWwgPSBob29rcy5sZW5ndGg7XG4gIHZhciBjYWxsZWQgPSAwO1xuICBob29rc1swXS5jYWxsKHZtLCBuZXh0KTtcbiAgZnVuY3Rpb24gbmV4dCgpIHtcbiAgICBpZiAoKytjYWxsZWQgPj0gdG90YWwpIHtcbiAgICAgIGNiKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhvb2tzW2NhbGxlZF0uY2FsbCh2bSwgbmV4dCk7XG4gICAgfVxuICB9XG59XG5cbnZhciBwcm9wQmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xudmFyIGVtcHR5ID0ge307XG5cbi8vIHJlZ2V4ZXNcbnZhciBpZGVudFJFJDEgPSAvXlskX2EtekEtWl0rW1xcdyRdKiQvO1xudmFyIHNldHRhYmxlUGF0aFJFID0gL15bQS1aYS16XyRdW1xcdyRdKihcXC5bQS1aYS16XyRdW1xcdyRdKnxcXFtbXlxcW1xcXV0rXFxdKSokLztcblxuLyoqXG4gKiBDb21waWxlIHByb3BzIG9uIGEgcm9vdCBlbGVtZW50IGFuZCByZXR1cm5cbiAqIGEgcHJvcHMgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BPcHRpb25zXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSBwcm9wc0xpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVQcm9wcyhlbCwgcHJvcE9wdGlvbnMsIHZtKSB7XG4gIHZhciBwcm9wcyA9IFtdO1xuICB2YXIgbmFtZXMgPSBPYmplY3Qua2V5cyhwcm9wT3B0aW9ucyk7XG4gIHZhciBpID0gbmFtZXMubGVuZ3RoO1xuICB2YXIgb3B0aW9ucywgbmFtZSwgYXR0ciwgdmFsdWUsIHBhdGgsIHBhcnNlZCwgcHJvcDtcbiAgd2hpbGUgKGktLSkge1xuICAgIG5hbWUgPSBuYW1lc1tpXTtcbiAgICBvcHRpb25zID0gcHJvcE9wdGlvbnNbbmFtZV0gfHwgZW1wdHk7XG5cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBuYW1lID09PSAnJGRhdGEnKSB7XG4gICAgICB3YXJuKCdEbyBub3QgdXNlICRkYXRhIGFzIHByb3AuJywgdm0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gcHJvcHMgY291bGQgY29udGFpbiBkYXNoZXMsIHdoaWNoIHdpbGwgYmVcbiAgICAvLyBpbnRlcnByZXRlZCBhcyBtaW51cyBjYWxjdWxhdGlvbnMgYnkgdGhlIHBhcnNlclxuICAgIC8vIHNvIHdlIG5lZWQgdG8gY2FtZWxpemUgdGhlIHBhdGggaGVyZVxuICAgIHBhdGggPSBjYW1lbGl6ZShuYW1lKTtcbiAgICBpZiAoIWlkZW50UkUkMS50ZXN0KHBhdGgpKSB7XG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgcHJvcCBrZXk6IFwiJyArIG5hbWUgKyAnXCIuIFByb3Aga2V5cyAnICsgJ211c3QgYmUgdmFsaWQgaWRlbnRpZmllcnMuJywgdm0pO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgcHJvcCA9IHtcbiAgICAgIG5hbWU6IG5hbWUsXG4gICAgICBwYXRoOiBwYXRoLFxuICAgICAgb3B0aW9uczogb3B0aW9ucyxcbiAgICAgIG1vZGU6IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWSxcbiAgICAgIHJhdzogbnVsbFxuICAgIH07XG5cbiAgICBhdHRyID0gaHlwaGVuYXRlKG5hbWUpO1xuICAgIC8vIGZpcnN0IGNoZWNrIGR5bmFtaWMgdmVyc2lvblxuICAgIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0cikpID09PSBudWxsKSB7XG4gICAgICBpZiAoKHZhbHVlID0gZ2V0QmluZEF0dHIoZWwsIGF0dHIgKyAnLnN5bmMnKSkgIT09IG51bGwpIHtcbiAgICAgICAgcHJvcC5tb2RlID0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZO1xuICAgICAgfSBlbHNlIGlmICgodmFsdWUgPSBnZXRCaW5kQXR0cihlbCwgYXR0ciArICcub25jZScpKSAhPT0gbnVsbCkge1xuICAgICAgICBwcm9wLm1vZGUgPSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodmFsdWUgIT09IG51bGwpIHtcbiAgICAgIC8vIGhhcyBkeW5hbWljIGJpbmRpbmchXG4gICAgICBwcm9wLnJhdyA9IHZhbHVlO1xuICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUodmFsdWUpO1xuICAgICAgdmFsdWUgPSBwYXJzZWQuZXhwcmVzc2lvbjtcbiAgICAgIHByb3AuZmlsdGVycyA9IHBhcnNlZC5maWx0ZXJzO1xuICAgICAgLy8gY2hlY2sgYmluZGluZyB0eXBlXG4gICAgICBpZiAoaXNMaXRlcmFsKHZhbHVlKSAmJiAhcGFyc2VkLmZpbHRlcnMpIHtcbiAgICAgICAgLy8gZm9yIGV4cHJlc3Npb25zIGNvbnRhaW5pbmcgbGl0ZXJhbCBudW1iZXJzIGFuZFxuICAgICAgICAvLyBib29sZWFucywgdGhlcmUncyBubyBuZWVkIHRvIHNldHVwIGEgcHJvcCBiaW5kaW5nLFxuICAgICAgICAvLyBzbyB3ZSBjYW4gb3B0aW1pemUgdGhlbSBhcyBhIG9uZS10aW1lIHNldC5cbiAgICAgICAgcHJvcC5vcHRpbWl6ZWRMaXRlcmFsID0gdHJ1ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHByb3AuZHluYW1pYyA9IHRydWU7XG4gICAgICAgIC8vIGNoZWNrIG5vbi1zZXR0YWJsZSBwYXRoIGZvciB0d28td2F5IGJpbmRpbmdzXG4gICAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHByb3AubW9kZSA9PT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZICYmICFzZXR0YWJsZVBhdGhSRS50ZXN0KHZhbHVlKSkge1xuICAgICAgICAgIHByb3AubW9kZSA9IHByb3BCaW5kaW5nTW9kZXMuT05FX1dBWTtcbiAgICAgICAgICB3YXJuKCdDYW5ub3QgYmluZCB0d28td2F5IHByb3Agd2l0aCBub24tc2V0dGFibGUgJyArICdwYXJlbnQgcGF0aDogJyArIHZhbHVlLCB2bSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHByb3AucGFyZW50UGF0aCA9IHZhbHVlO1xuXG4gICAgICAvLyB3YXJuIHJlcXVpcmVkIHR3by13YXlcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIG9wdGlvbnMudHdvV2F5ICYmIHByb3AubW9kZSAhPT0gcHJvcEJpbmRpbmdNb2Rlcy5UV09fV0FZKSB7XG4gICAgICAgIHdhcm4oJ1Byb3AgXCInICsgbmFtZSArICdcIiBleHBlY3RzIGEgdHdvLXdheSBiaW5kaW5nIHR5cGUuJywgdm0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoKHZhbHVlID0gZ2V0QXR0cihlbCwgYXR0cikpICE9PSBudWxsKSB7XG4gICAgICAvLyBoYXMgbGl0ZXJhbCBiaW5kaW5nIVxuICAgICAgcHJvcC5yYXcgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIC8vIGNoZWNrIHBvc3NpYmxlIGNhbWVsQ2FzZSBwcm9wIHVzYWdlXG4gICAgICB2YXIgbG93ZXJDYXNlTmFtZSA9IHBhdGgudG9Mb3dlckNhc2UoKTtcbiAgICAgIHZhbHVlID0gL1tBLVpcXC1dLy50ZXN0KG5hbWUpICYmIChlbC5nZXRBdHRyaWJ1dGUobG93ZXJDYXNlTmFtZSkgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJzonICsgbG93ZXJDYXNlTmFtZSArICcub25jZScpIHx8IGVsLmdldEF0dHJpYnV0ZSgndi1iaW5kOicgKyBsb3dlckNhc2VOYW1lICsgJy5vbmNlJykgfHwgZWwuZ2V0QXR0cmlidXRlKCc6JyArIGxvd2VyQ2FzZU5hbWUgKyAnLnN5bmMnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3YtYmluZDonICsgbG93ZXJDYXNlTmFtZSArICcuc3luYycpKTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB3YXJuKCdQb3NzaWJsZSB1c2FnZSBlcnJvciBmb3IgcHJvcCBgJyArIGxvd2VyQ2FzZU5hbWUgKyAnYCAtICcgKyAnZGlkIHlvdSBtZWFuIGAnICsgYXR0ciArICdgPyBIVE1MIGlzIGNhc2UtaW5zZW5zaXRpdmUsIHJlbWVtYmVyIHRvIHVzZSAnICsgJ2tlYmFiLWNhc2UgZm9yIHByb3BzIGluIHRlbXBsYXRlcy4nLCB2bSk7XG4gICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucmVxdWlyZWQpIHtcbiAgICAgICAgLy8gd2FybiBtaXNzaW5nIHJlcXVpcmVkXG4gICAgICAgIHdhcm4oJ01pc3NpbmcgcmVxdWlyZWQgcHJvcDogJyArIG5hbWUsIHZtKTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcHVzaCBwcm9wXG4gICAgcHJvcHMucHVzaChwcm9wKTtcbiAgfVxuICByZXR1cm4gbWFrZVByb3BzTGlua0ZuKHByb3BzKTtcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGZ1bmN0aW9uIHRoYXQgYXBwbGllcyBwcm9wcyB0byBhIHZtLlxuICpcbiAqIEBwYXJhbSB7QXJyYXl9IHByb3BzXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn0gcHJvcHNMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlUHJvcHNMaW5rRm4ocHJvcHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIHByb3BzTGlua0ZuKHZtLCBzY29wZSkge1xuICAgIC8vIHN0b3JlIHJlc29sdmVkIHByb3BzIGluZm9cbiAgICB2bS5fcHJvcHMgPSB7fTtcbiAgICB2YXIgaW5saW5lUHJvcHMgPSB2bS4kb3B0aW9ucy5wcm9wc0RhdGE7XG4gICAgdmFyIGkgPSBwcm9wcy5sZW5ndGg7XG4gICAgdmFyIHByb3AsIHBhdGgsIG9wdGlvbnMsIHZhbHVlLCByYXc7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgcHJvcCA9IHByb3BzW2ldO1xuICAgICAgcmF3ID0gcHJvcC5yYXc7XG4gICAgICBwYXRoID0gcHJvcC5wYXRoO1xuICAgICAgb3B0aW9ucyA9IHByb3Aub3B0aW9ucztcbiAgICAgIHZtLl9wcm9wc1twYXRoXSA9IHByb3A7XG4gICAgICBpZiAoaW5saW5lUHJvcHMgJiYgaGFzT3duKGlubGluZVByb3BzLCBwYXRoKSkge1xuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgaW5saW5lUHJvcHNbcGF0aF0pO1xuICAgICAgfWlmIChyYXcgPT09IG51bGwpIHtcbiAgICAgICAgLy8gaW5pdGlhbGl6ZSBhYnNlbnQgcHJvcFxuICAgICAgICBpbml0UHJvcCh2bSwgcHJvcCwgdW5kZWZpbmVkKTtcbiAgICAgIH0gZWxzZSBpZiAocHJvcC5keW5hbWljKSB7XG4gICAgICAgIC8vIGR5bmFtaWMgcHJvcFxuICAgICAgICBpZiAocHJvcC5tb2RlID09PSBwcm9wQmluZGluZ01vZGVzLk9ORV9USU1FKSB7XG4gICAgICAgICAgLy8gb25lIHRpbWUgYmluZGluZ1xuICAgICAgICAgIHZhbHVlID0gKHNjb3BlIHx8IHZtLl9jb250ZXh0IHx8IHZtKS4kZ2V0KHByb3AucGFyZW50UGF0aCk7XG4gICAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodm0uX2NvbnRleHQpIHtcbiAgICAgICAgICAgIC8vIGR5bmFtaWMgYmluZGluZ1xuICAgICAgICAgICAgdm0uX2JpbmREaXIoe1xuICAgICAgICAgICAgICBuYW1lOiAncHJvcCcsXG4gICAgICAgICAgICAgIGRlZjogcHJvcERlZixcbiAgICAgICAgICAgICAgcHJvcDogcHJvcFxuICAgICAgICAgICAgfSwgbnVsbCwgbnVsbCwgc2NvcGUpOyAvLyBlbCwgaG9zdCwgc2NvcGVcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyByb290IGluc3RhbmNlXG4gICAgICAgICAgICAgIGluaXRQcm9wKHZtLCBwcm9wLCB2bS4kZ2V0KHByb3AucGFyZW50UGF0aCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHByb3Aub3B0aW1pemVkTGl0ZXJhbCkge1xuICAgICAgICAvLyBvcHRpbWl6ZWQgbGl0ZXJhbCwgY2FzdCBpdCBhbmQganVzdCBzZXQgb25jZVxuICAgICAgICB2YXIgc3RyaXBwZWQgPSBzdHJpcFF1b3RlcyhyYXcpO1xuICAgICAgICB2YWx1ZSA9IHN0cmlwcGVkID09PSByYXcgPyB0b0Jvb2xlYW4odG9OdW1iZXIocmF3KSkgOiBzdHJpcHBlZDtcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIHN0cmluZyBsaXRlcmFsLCBidXQgd2UgbmVlZCB0byBjYXRlciBmb3JcbiAgICAgICAgLy8gQm9vbGVhbiBwcm9wcyB3aXRoIG5vIHZhbHVlLCBvciB3aXRoIHNhbWVcbiAgICAgICAgLy8gbGl0ZXJhbCB2YWx1ZSAoZS5nLiBkaXNhYmxlZD1cImRpc2FibGVkXCIpXG4gICAgICAgIC8vIHNlZSBodHRwczovL2dpdGh1Yi5jb20vdnVlanMvdnVlLWxvYWRlci9pc3N1ZXMvMTgyXG4gICAgICAgIHZhbHVlID0gb3B0aW9ucy50eXBlID09PSBCb29sZWFuICYmIChyYXcgPT09ICcnIHx8IHJhdyA9PT0gaHlwaGVuYXRlKHByb3AubmFtZSkpID8gdHJ1ZSA6IHJhdztcbiAgICAgICAgaW5pdFByb3Aodm0sIHByb3AsIHZhbHVlKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogUHJvY2VzcyBhIHByb3Agd2l0aCBhIHJhd1ZhbHVlLCBhcHBseWluZyBuZWNlc3NhcnkgY29lcnNpb25zLFxuICogZGVmYXVsdCB2YWx1ZXMgJiBhc3NlcnRpb25zIGFuZCBjYWxsIHRoZSBnaXZlbiBjYWxsYmFjayB3aXRoXG4gKiBwcm9jZXNzZWQgdmFsdWUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSByYXdWYWx1ZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm5cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzUHJvcFZhbHVlKHZtLCBwcm9wLCByYXdWYWx1ZSwgZm4pIHtcbiAgdmFyIGlzU2ltcGxlID0gcHJvcC5keW5hbWljICYmIGlzU2ltcGxlUGF0aChwcm9wLnBhcmVudFBhdGgpO1xuICB2YXIgdmFsdWUgPSByYXdWYWx1ZTtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICB2YWx1ZSA9IGdldFByb3BEZWZhdWx0VmFsdWUodm0sIHByb3ApO1xuICB9XG4gIHZhbHVlID0gY29lcmNlUHJvcChwcm9wLCB2YWx1ZSwgdm0pO1xuICB2YXIgY29lcmNlZCA9IHZhbHVlICE9PSByYXdWYWx1ZTtcbiAgaWYgKCFhc3NlcnRQcm9wKHByb3AsIHZhbHVlLCB2bSkpIHtcbiAgICB2YWx1ZSA9IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAoaXNTaW1wbGUgJiYgIWNvZXJjZWQpIHtcbiAgICB3aXRob3V0Q29udmVyc2lvbihmdW5jdGlvbiAoKSB7XG4gICAgICBmbih2YWx1ZSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgZm4odmFsdWUpO1xuICB9XG59XG5cbi8qKlxuICogU2V0IGEgcHJvcCdzIGluaXRpYWwgdmFsdWUgb24gYSB2bSBhbmQgaXRzIGRhdGEgb2JqZWN0LlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtPYmplY3R9IHByb3BcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqL1xuXG5mdW5jdGlvbiBpbml0UHJvcCh2bSwgcHJvcCwgdmFsdWUpIHtcbiAgcHJvY2Vzc1Byb3BWYWx1ZSh2bSwgcHJvcCwgdmFsdWUsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgIGRlZmluZVJlYWN0aXZlKHZtLCBwcm9wLnBhdGgsIHZhbHVlKTtcbiAgfSk7XG59XG5cbi8qKlxuICogVXBkYXRlIGEgcHJvcCdzIHZhbHVlIG9uIGEgdm0uXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICovXG5cbmZ1bmN0aW9uIHVwZGF0ZVByb3Aodm0sIHByb3AsIHZhbHVlKSB7XG4gIHByb2Nlc3NQcm9wVmFsdWUodm0sIHByb3AsIHZhbHVlLCBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICB2bVtwcm9wLnBhdGhdID0gdmFsdWU7XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgZGVmYXVsdCB2YWx1ZSBvZiBhIHByb3AuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHJldHVybiB7Kn1cbiAqL1xuXG5mdW5jdGlvbiBnZXRQcm9wRGVmYXVsdFZhbHVlKHZtLCBwcm9wKSB7XG4gIC8vIG5vIGRlZmF1bHQsIHJldHVybiB1bmRlZmluZWRcbiAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gIGlmICghaGFzT3duKG9wdGlvbnMsICdkZWZhdWx0JykpIHtcbiAgICAvLyBhYnNlbnQgYm9vbGVhbiB2YWx1ZSBkZWZhdWx0cyB0byBmYWxzZVxuICAgIHJldHVybiBvcHRpb25zLnR5cGUgPT09IEJvb2xlYW4gPyBmYWxzZSA6IHVuZGVmaW5lZDtcbiAgfVxuICB2YXIgZGVmID0gb3B0aW9uc1snZGVmYXVsdCddO1xuICAvLyB3YXJuIGFnYWluc3Qgbm9uLWZhY3RvcnkgZGVmYXVsdHMgZm9yIE9iamVjdCAmIEFycmF5XG4gIGlmIChpc09iamVjdChkZWYpKSB7XG4gICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIGRlZmF1bHQgdmFsdWUgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiAnICsgJ1Byb3BzIHdpdGggdHlwZSBPYmplY3QvQXJyYXkgbXVzdCB1c2UgYSBmYWN0b3J5IGZ1bmN0aW9uICcgKyAndG8gcmV0dXJuIHRoZSBkZWZhdWx0IHZhbHVlLicsIHZtKTtcbiAgfVxuICAvLyBjYWxsIGZhY3RvcnkgZnVuY3Rpb24gZm9yIG5vbi1GdW5jdGlvbiB0eXBlc1xuICByZXR1cm4gdHlwZW9mIGRlZiA9PT0gJ2Z1bmN0aW9uJyAmJiBvcHRpb25zLnR5cGUgIT09IEZ1bmN0aW9uID8gZGVmLmNhbGwodm0pIDogZGVmO1xufVxuXG4vKipcbiAqIEFzc2VydCB3aGV0aGVyIGEgcHJvcCBpcyB2YWxpZC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gcHJvcFxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0UHJvcChwcm9wLCB2YWx1ZSwgdm0pIHtcbiAgaWYgKCFwcm9wLm9wdGlvbnMucmVxdWlyZWQgJiYgKCAvLyBub24tcmVxdWlyZWRcbiAgcHJvcC5yYXcgPT09IG51bGwgfHwgLy8gYWJzY2VudFxuICB2YWx1ZSA9PSBudWxsKSAvLyBudWxsIG9yIHVuZGVmaW5lZFxuICApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgdmFyIG9wdGlvbnMgPSBwcm9wLm9wdGlvbnM7XG4gIHZhciB0eXBlID0gb3B0aW9ucy50eXBlO1xuICB2YXIgdmFsaWQgPSAhdHlwZTtcbiAgdmFyIGV4cGVjdGVkVHlwZXMgPSBbXTtcbiAgaWYgKHR5cGUpIHtcbiAgICBpZiAoIWlzQXJyYXkodHlwZSkpIHtcbiAgICAgIHR5cGUgPSBbdHlwZV07XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdHlwZS5sZW5ndGggJiYgIXZhbGlkOyBpKyspIHtcbiAgICAgIHZhciBhc3NlcnRlZFR5cGUgPSBhc3NlcnRUeXBlKHZhbHVlLCB0eXBlW2ldKTtcbiAgICAgIGV4cGVjdGVkVHlwZXMucHVzaChhc3NlcnRlZFR5cGUuZXhwZWN0ZWRUeXBlKTtcbiAgICAgIHZhbGlkID0gYXNzZXJ0ZWRUeXBlLnZhbGlkO1xuICAgIH1cbiAgfVxuICBpZiAoIXZhbGlkKSB7XG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgIHdhcm4oJ0ludmFsaWQgcHJvcDogdHlwZSBjaGVjayBmYWlsZWQgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiLicgKyAnIEV4cGVjdGVkICcgKyBleHBlY3RlZFR5cGVzLm1hcChmb3JtYXRUeXBlKS5qb2luKCcsICcpICsgJywgZ290ICcgKyBmb3JtYXRWYWx1ZSh2YWx1ZSkgKyAnLicsIHZtKTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHZhciB2YWxpZGF0b3IgPSBvcHRpb25zLnZhbGlkYXRvcjtcbiAgaWYgKHZhbGlkYXRvcikge1xuICAgIGlmICghdmFsaWRhdG9yKHZhbHVlKSkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdJbnZhbGlkIHByb3A6IGN1c3RvbSB2YWxpZGF0b3IgY2hlY2sgZmFpbGVkIGZvciBwcm9wIFwiJyArIHByb3AubmFtZSArICdcIi4nLCB2bSk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG4vKipcbiAqIEZvcmNlIHBhcnNpbmcgdmFsdWUgd2l0aCBjb2VyY2Ugb3B0aW9uLlxuICpcbiAqIEBwYXJhbSB7Kn0gdmFsdWVcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHsqfVxuICovXG5cbmZ1bmN0aW9uIGNvZXJjZVByb3AocHJvcCwgdmFsdWUsIHZtKSB7XG4gIHZhciBjb2VyY2UgPSBwcm9wLm9wdGlvbnMuY29lcmNlO1xuICBpZiAoIWNvZXJjZSkge1xuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuICBpZiAodHlwZW9mIGNvZXJjZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBjb2VyY2UodmFsdWUpO1xuICB9IGVsc2Uge1xuICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignSW52YWxpZCBjb2VyY2UgZm9yIHByb3AgXCInICsgcHJvcC5uYW1lICsgJ1wiOiBleHBlY3RlZCBmdW5jdGlvbiwgZ290ICcgKyB0eXBlb2YgY29lcmNlICsgJy4nLCB2bSk7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG59XG5cbi8qKlxuICogQXNzZXJ0IHRoZSB0eXBlIG9mIGEgdmFsdWVcbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSB0eXBlXG4gKiBAcmV0dXJuIHtPYmplY3R9XG4gKi9cblxuZnVuY3Rpb24gYXNzZXJ0VHlwZSh2YWx1ZSwgdHlwZSkge1xuICB2YXIgdmFsaWQ7XG4gIHZhciBleHBlY3RlZFR5cGU7XG4gIGlmICh0eXBlID09PSBTdHJpbmcpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnc3RyaW5nJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IE51bWJlcikge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdudW1iZXInO1xuICAgIHZhbGlkID0gdHlwZW9mIHZhbHVlID09PSBleHBlY3RlZFR5cGU7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gQm9vbGVhbikge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdib29sZWFuJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IEZ1bmN0aW9uKSB7XG4gICAgZXhwZWN0ZWRUeXBlID0gJ2Z1bmN0aW9uJztcbiAgICB2YWxpZCA9IHR5cGVvZiB2YWx1ZSA9PT0gZXhwZWN0ZWRUeXBlO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IE9iamVjdCkge1xuICAgIGV4cGVjdGVkVHlwZSA9ICdvYmplY3QnO1xuICAgIHZhbGlkID0gaXNQbGFpbk9iamVjdCh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAodHlwZSA9PT0gQXJyYXkpIHtcbiAgICBleHBlY3RlZFR5cGUgPSAnYXJyYXknO1xuICAgIHZhbGlkID0gaXNBcnJheSh2YWx1ZSk7XG4gIH0gZWxzZSB7XG4gICAgdmFsaWQgPSB2YWx1ZSBpbnN0YW5jZW9mIHR5cGU7XG4gIH1cbiAgcmV0dXJuIHtcbiAgICB2YWxpZDogdmFsaWQsXG4gICAgZXhwZWN0ZWRUeXBlOiBleHBlY3RlZFR5cGVcbiAgfTtcbn1cblxuLyoqXG4gKiBGb3JtYXQgdHlwZSBmb3Igb3V0cHV0XG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqL1xuXG5mdW5jdGlvbiBmb3JtYXRUeXBlKHR5cGUpIHtcbiAgcmV0dXJuIHR5cGUgPyB0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKSA6ICdjdXN0b20gdHlwZSc7XG59XG5cbi8qKlxuICogRm9ybWF0IHZhbHVlXG4gKlxuICogQHBhcmFtIHsqfSB2YWx1ZVxuICogQHJldHVybiB7U3RyaW5nfVxuICovXG5cbmZ1bmN0aW9uIGZvcm1hdFZhbHVlKHZhbCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHZhbCkuc2xpY2UoOCwgLTEpO1xufVxuXG52YXIgYmluZGluZ01vZGVzID0gY29uZmlnLl9wcm9wQmluZGluZ01vZGVzO1xuXG52YXIgcHJvcERlZiA9IHtcblxuICBiaW5kOiBmdW5jdGlvbiBiaW5kKCkge1xuICAgIHZhciBjaGlsZCA9IHRoaXMudm07XG4gICAgdmFyIHBhcmVudCA9IGNoaWxkLl9jb250ZXh0O1xuICAgIC8vIHBhc3NlZCBpbiBmcm9tIGNvbXBpbGVyIGRpcmVjdGx5XG4gICAgdmFyIHByb3AgPSB0aGlzLmRlc2NyaXB0b3IucHJvcDtcbiAgICB2YXIgY2hpbGRLZXkgPSBwcm9wLnBhdGg7XG4gICAgdmFyIHBhcmVudEtleSA9IHByb3AucGFyZW50UGF0aDtcbiAgICB2YXIgdHdvV2F5ID0gcHJvcC5tb2RlID09PSBiaW5kaW5nTW9kZXMuVFdPX1dBWTtcblxuICAgIHZhciBwYXJlbnRXYXRjaGVyID0gdGhpcy5wYXJlbnRXYXRjaGVyID0gbmV3IFdhdGNoZXIocGFyZW50LCBwYXJlbnRLZXksIGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgIHVwZGF0ZVByb3AoY2hpbGQsIHByb3AsIHZhbCk7XG4gICAgfSwge1xuICAgICAgdHdvV2F5OiB0d29XYXksXG4gICAgICBmaWx0ZXJzOiBwcm9wLmZpbHRlcnMsXG4gICAgICAvLyBpbXBvcnRhbnQ6IHByb3BzIG5lZWQgdG8gYmUgb2JzZXJ2ZWQgb24gdGhlXG4gICAgICAvLyB2LWZvciBzY29wZSBpZiBwcmVzZW50XG4gICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICB9KTtcblxuICAgIC8vIHNldCB0aGUgY2hpbGQgaW5pdGlhbCB2YWx1ZS5cbiAgICBpbml0UHJvcChjaGlsZCwgcHJvcCwgcGFyZW50V2F0Y2hlci52YWx1ZSk7XG5cbiAgICAvLyBzZXR1cCB0d28td2F5IGJpbmRpbmdcbiAgICBpZiAodHdvV2F5KSB7XG4gICAgICAvLyBpbXBvcnRhbnQ6IGRlZmVyIHRoZSBjaGlsZCB3YXRjaGVyIGNyZWF0aW9uIHVudGlsXG4gICAgICAvLyB0aGUgY3JlYXRlZCBob29rIChhZnRlciBkYXRhIG9ic2VydmF0aW9uKVxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgY2hpbGQuJG9uY2UoJ3ByZS1ob29rOmNyZWF0ZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHNlbGYuY2hpbGRXYXRjaGVyID0gbmV3IFdhdGNoZXIoY2hpbGQsIGNoaWxkS2V5LCBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgcGFyZW50V2F0Y2hlci5zZXQodmFsKTtcbiAgICAgICAgfSwge1xuICAgICAgICAgIC8vIGVuc3VyZSBzeW5jIHVwd2FyZCBiZWZvcmUgcGFyZW50IHN5bmMgZG93bi5cbiAgICAgICAgICAvLyB0aGlzIGlzIG5lY2Vzc2FyeSBpbiBjYXNlcyBlLmcuIHRoZSBjaGlsZFxuICAgICAgICAgIC8vIG11dGF0ZXMgYSBwcm9wIGFycmF5LCB0aGVuIHJlcGxhY2VzIGl0LiAoIzE2ODMpXG4gICAgICAgICAgc3luYzogdHJ1ZVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICB0aGlzLnBhcmVudFdhdGNoZXIudGVhcmRvd24oKTtcbiAgICBpZiAodGhpcy5jaGlsZFdhdGNoZXIpIHtcbiAgICAgIHRoaXMuY2hpbGRXYXRjaGVyLnRlYXJkb3duKCk7XG4gICAgfVxuICB9XG59O1xuXG52YXIgcXVldWUkMSA9IFtdO1xudmFyIHF1ZXVlZCA9IGZhbHNlO1xuXG4vKipcbiAqIFB1c2ggYSBqb2IgaW50byB0aGUgcXVldWUuXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gam9iXG4gKi9cblxuZnVuY3Rpb24gcHVzaEpvYihqb2IpIHtcbiAgcXVldWUkMS5wdXNoKGpvYik7XG4gIGlmICghcXVldWVkKSB7XG4gICAgcXVldWVkID0gdHJ1ZTtcbiAgICBuZXh0VGljayhmbHVzaCk7XG4gIH1cbn1cblxuLyoqXG4gKiBGbHVzaCB0aGUgcXVldWUsIGFuZCBkbyBvbmUgZm9yY2VkIHJlZmxvdyBiZWZvcmVcbiAqIHRyaWdnZXJpbmcgdHJhbnNpdGlvbnMuXG4gKi9cblxuZnVuY3Rpb24gZmx1c2goKSB7XG4gIC8vIEZvcmNlIGxheW91dFxuICB2YXIgZiA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5vZmZzZXRIZWlnaHQ7XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcXVldWUkMS5sZW5ndGg7IGkrKykge1xuICAgIHF1ZXVlJDFbaV0oKTtcbiAgfVxuICBxdWV1ZSQxID0gW107XG4gIHF1ZXVlZCA9IGZhbHNlO1xuICAvLyBkdW1teSByZXR1cm4sIHNvIGpzIGxpbnRlcnMgZG9uJ3QgY29tcGxhaW4gYWJvdXRcbiAgLy8gdW51c2VkIHZhcmlhYmxlIGZcbiAgcmV0dXJuIGY7XG59XG5cbnZhciBUWVBFX1RSQU5TSVRJT04gPSAndHJhbnNpdGlvbic7XG52YXIgVFlQRV9BTklNQVRJT04gPSAnYW5pbWF0aW9uJztcbnZhciB0cmFuc0R1cmF0aW9uUHJvcCA9IHRyYW5zaXRpb25Qcm9wICsgJ0R1cmF0aW9uJztcbnZhciBhbmltRHVyYXRpb25Qcm9wID0gYW5pbWF0aW9uUHJvcCArICdEdXJhdGlvbic7XG5cbi8qKlxuICogSWYgYSBqdXN0LWVudGVyZWQgZWxlbWVudCBpcyBhcHBsaWVkIHRoZVxuICogbGVhdmUgY2xhc3Mgd2hpbGUgaXRzIGVudGVyIHRyYW5zaXRpb24gaGFzbid0IHN0YXJ0ZWQgeWV0LFxuICogYW5kIHRoZSB0cmFuc2l0aW9uZWQgcHJvcGVydHkgaGFzIHRoZSBzYW1lIHZhbHVlIGZvciBib3RoXG4gKiBlbnRlci9sZWF2ZSwgdGhlbiB0aGUgbGVhdmUgdHJhbnNpdGlvbiB3aWxsIGJlIHNraXBwZWQgYW5kXG4gKiB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gVGhpcyBmdW5jdGlvbiBlbnN1cmVzXG4gKiBpdHMgY2FsbGJhY2sgdG8gYmUgY2FsbGVkIGFmdGVyIGEgdHJhbnNpdGlvbiBoYXMgc3RhcnRlZFxuICogYnkgd2FpdGluZyBmb3IgZG91YmxlIHJhZi5cbiAqXG4gKiBJdCBmYWxscyBiYWNrIHRvIHNldFRpbWVvdXQgb24gZGV2aWNlcyB0aGF0IHN1cHBvcnQgQ1NTXG4gKiB0cmFuc2l0aW9ucyBidXQgbm90IHJhZiAoZS5nLiBBbmRyb2lkIDQuMiBicm93c2VyKSAtIHNpbmNlXG4gKiB0aGVzZSBlbnZpcm9ubWVudHMgYXJlIHVzdWFsbHkgc2xvdywgd2UgYXJlIGdpdmluZyBpdCBhXG4gKiByZWxhdGl2ZWx5IGxhcmdlIHRpbWVvdXQuXG4gKi9cblxudmFyIHJhZiA9IGluQnJvd3NlciAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lO1xudmFyIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQgPSByYWZcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG4/IGZ1bmN0aW9uIChmbikge1xuICByYWYoZnVuY3Rpb24gKCkge1xuICAgIHJhZihmbik7XG4gIH0pO1xufSA6IGZ1bmN0aW9uIChmbikge1xuICBzZXRUaW1lb3V0KGZuLCA1MCk7XG59O1xuXG4vKipcbiAqIEEgVHJhbnNpdGlvbiBvYmplY3QgdGhhdCBlbmNhcHN1bGF0ZXMgdGhlIHN0YXRlIGFuZCBsb2dpY1xuICogb2YgdGhlIHRyYW5zaXRpb24uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtTdHJpbmd9IGlkXG4gKiBAcGFyYW0ge09iamVjdH0gaG9va3NcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICovXG5mdW5jdGlvbiBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHZtKSB7XG4gIHRoaXMuaWQgPSBpZDtcbiAgdGhpcy5lbCA9IGVsO1xuICB0aGlzLmVudGVyQ2xhc3MgPSBob29rcyAmJiBob29rcy5lbnRlckNsYXNzIHx8IGlkICsgJy1lbnRlcic7XG4gIHRoaXMubGVhdmVDbGFzcyA9IGhvb2tzICYmIGhvb2tzLmxlYXZlQ2xhc3MgfHwgaWQgKyAnLWxlYXZlJztcbiAgdGhpcy5ob29rcyA9IGhvb2tzO1xuICB0aGlzLnZtID0gdm07XG4gIC8vIGFzeW5jIHN0YXRlXG4gIHRoaXMucGVuZGluZ0Nzc0V2ZW50ID0gdGhpcy5wZW5kaW5nQ3NzQ2IgPSB0aGlzLmNhbmNlbCA9IHRoaXMucGVuZGluZ0pzQ2IgPSB0aGlzLm9wID0gdGhpcy5jYiA9IG51bGw7XG4gIHRoaXMuanVzdEVudGVyZWQgPSBmYWxzZTtcbiAgdGhpcy5lbnRlcmVkID0gdGhpcy5sZWZ0ID0gZmFsc2U7XG4gIHRoaXMudHlwZUNhY2hlID0ge307XG4gIC8vIGNoZWNrIGNzcyB0cmFuc2l0aW9uIHR5cGVcbiAgdGhpcy50eXBlID0gaG9va3MgJiYgaG9va3MudHlwZTtcbiAgLyogaXN0YW5idWwgaWdub3JlIGlmICovXG4gIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgaWYgKHRoaXMudHlwZSAmJiB0aGlzLnR5cGUgIT09IFRZUEVfVFJBTlNJVElPTiAmJiB0aGlzLnR5cGUgIT09IFRZUEVfQU5JTUFUSU9OKSB7XG4gICAgICB3YXJuKCdpbnZhbGlkIENTUyB0cmFuc2l0aW9uIHR5cGUgZm9yIHRyYW5zaXRpb249XCInICsgdGhpcy5pZCArICdcIjogJyArIHRoaXMudHlwZSwgdm0pO1xuICAgIH1cbiAgfVxuICAvLyBiaW5kXG4gIHZhciBzZWxmID0gdGhpcztbJ2VudGVyTmV4dFRpY2snLCAnZW50ZXJEb25lJywgJ2xlYXZlTmV4dFRpY2snLCAnbGVhdmVEb25lJ10uZm9yRWFjaChmdW5jdGlvbiAobSkge1xuICAgIHNlbGZbbV0gPSBiaW5kKHNlbGZbbV0sIHNlbGYpO1xuICB9KTtcbn1cblxudmFyIHAkMSA9IFRyYW5zaXRpb24ucHJvdG90eXBlO1xuXG4vKipcbiAqIFN0YXJ0IGFuIGVudGVyaW5nIHRyYW5zaXRpb24uXG4gKlxuICogMS4gZW50ZXIgdHJhbnNpdGlvbiB0cmlnZ2VyZWRcbiAqIDIuIGNhbGwgYmVmb3JlRW50ZXIgaG9va1xuICogMy4gYWRkIGVudGVyIGNsYXNzXG4gKiA0LiBpbnNlcnQvc2hvdyBlbGVtZW50XG4gKiA1LiBjYWxsIGVudGVyIGhvb2sgKHdpdGggcG9zc2libGUgZXhwbGljaXQganMgY2FsbGJhY2spXG4gKiA2LiByZWZsb3dcbiAqIDcuIGJhc2VkIG9uIHRyYW5zaXRpb24gdHlwZTpcbiAqICAgIC0gdHJhbnNpdGlvbjpcbiAqICAgICAgICByZW1vdmUgY2xhc3Mgbm93LCB3YWl0IGZvciB0cmFuc2l0aW9uZW5kLFxuICogICAgICAgIHRoZW4gZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogICAgLSBhbmltYXRpb246XG4gKiAgICAgICAgd2FpdCBmb3IgYW5pbWF0aW9uZW5kLCByZW1vdmUgY2xhc3MsXG4gKiAgICAgICAgdGhlbiBkb25lIGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiAgICAtIG5vIGNzcyB0cmFuc2l0aW9uOlxuICogICAgICAgIGRvbmUgbm93IGlmIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2suXG4gKiA4LiB3YWl0IGZvciBlaXRoZXIgZG9uZSBvciBqcyBjYWxsYmFjaywgdGhlbiBjYWxsXG4gKiAgICBhZnRlckVudGVyIGhvb2suXG4gKlxuICogQHBhcmFtIHtGdW5jdGlvbn0gb3AgLSBpbnNlcnQvc2hvdyB0aGUgZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICovXG5cbnAkMS5lbnRlciA9IGZ1bmN0aW9uIChvcCwgY2IpIHtcbiAgdGhpcy5jYW5jZWxQZW5kaW5nKCk7XG4gIHRoaXMuY2FsbEhvb2soJ2JlZm9yZUVudGVyJyk7XG4gIHRoaXMuY2IgPSBjYjtcbiAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5lbnRlckNsYXNzKTtcbiAgb3AoKTtcbiAgdGhpcy5lbnRlcmVkID0gZmFsc2U7XG4gIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2VudGVyJyk7XG4gIGlmICh0aGlzLmVudGVyZWQpIHtcbiAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgfVxuICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5lbnRlckNhbmNlbGxlZDtcbiAgcHVzaEpvYih0aGlzLmVudGVyTmV4dFRpY2spO1xufTtcblxuLyoqXG4gKiBUaGUgXCJuZXh0VGlja1wiIHBoYXNlIG9mIGFuIGVudGVyaW5nIHRyYW5zaXRpb24sIHdoaWNoIGlzXG4gKiB0byBiZSBwdXNoZWQgaW50byBhIHF1ZXVlIGFuZCBleGVjdXRlZCBhZnRlciBhIHJlZmxvdyBzb1xuICogdGhhdCByZW1vdmluZyB0aGUgY2xhc3MgY2FuIHRyaWdnZXIgYSBDU1MgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEuZW50ZXJOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIF90aGlzID0gdGhpcztcblxuICAvLyBwcmV2ZW50IHRyYW5zaXRpb24gc2tpcHBpbmdcbiAgdGhpcy5qdXN0RW50ZXJlZCA9IHRydWU7XG4gIHdhaXRGb3JUcmFuc2l0aW9uU3RhcnQoZnVuY3Rpb24gKCkge1xuICAgIF90aGlzLmp1c3RFbnRlcmVkID0gZmFsc2U7XG4gIH0pO1xuICB2YXIgZW50ZXJEb25lID0gdGhpcy5lbnRlckRvbmU7XG4gIHZhciB0eXBlID0gdGhpcy5nZXRDc3NUcmFuc2l0aW9uVHlwZSh0aGlzLmVudGVyQ2xhc3MpO1xuICBpZiAoIXRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICBpZiAodHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OKSB7XG4gICAgICAvLyB0cmlnZ2VyIHRyYW5zaXRpb24gYnkgcmVtb3ZpbmcgZW50ZXIgY2xhc3Mgbm93XG4gICAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgICAgdGhpcy5zZXR1cENzc0NiKHRyYW5zaXRpb25FbmRFdmVudCwgZW50ZXJEb25lKTtcbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFRZUEVfQU5JTUFUSU9OKSB7XG4gICAgICB0aGlzLnNldHVwQ3NzQ2IoYW5pbWF0aW9uRW5kRXZlbnQsIGVudGVyRG9uZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGVudGVyRG9uZSgpO1xuICAgIH1cbiAgfSBlbHNlIGlmICh0eXBlID09PSBUWVBFX1RSQU5TSVRJT04pIHtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICB9XG59O1xuXG4vKipcbiAqIFRoZSBcImNsZWFudXBcIiBwaGFzZSBvZiBhbiBlbnRlcmluZyB0cmFuc2l0aW9uLlxuICovXG5cbnAkMS5lbnRlckRvbmUgPSBmdW5jdGlvbiAoKSB7XG4gIHRoaXMuZW50ZXJlZCA9IHRydWU7XG4gIHRoaXMuY2FuY2VsID0gdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMuZW50ZXJDbGFzcyk7XG4gIHRoaXMuY2FsbEhvb2soJ2FmdGVyRW50ZXInKTtcbiAgaWYgKHRoaXMuY2IpIHRoaXMuY2IoKTtcbn07XG5cbi8qKlxuICogU3RhcnQgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKlxuICogMS4gbGVhdmUgdHJhbnNpdGlvbiB0cmlnZ2VyZWQuXG4gKiAyLiBjYWxsIGJlZm9yZUxlYXZlIGhvb2tcbiAqIDMuIGFkZCBsZWF2ZSBjbGFzcyAodHJpZ2dlciBjc3MgdHJhbnNpdGlvbilcbiAqIDQuIGNhbGwgbGVhdmUgaG9vayAod2l0aCBwb3NzaWJsZSBleHBsaWNpdCBqcyBjYWxsYmFjaylcbiAqIDUuIHJlZmxvdyBpZiBubyBleHBsaWNpdCBqcyBjYWxsYmFjayBpcyBwcm92aWRlZFxuICogNi4gYmFzZWQgb24gdHJhbnNpdGlvbiB0eXBlOlxuICogICAgLSB0cmFuc2l0aW9uIG9yIGFuaW1hdGlvbjpcbiAqICAgICAgICB3YWl0IGZvciBlbmQgZXZlbnQsIHJlbW92ZSBjbGFzcywgdGhlbiBkb25lIGlmXG4gKiAgICAgICAgdGhlcmUncyBubyBleHBsaWNpdCBqcyBjYWxsYmFjay5cbiAqICAgIC0gbm8gY3NzIHRyYW5zaXRpb246XG4gKiAgICAgICAgZG9uZSBpZiB0aGVyZSdzIG5vIGV4cGxpY2l0IGpzIGNhbGxiYWNrLlxuICogNy4gd2FpdCBmb3IgZWl0aGVyIGRvbmUgb3IganMgY2FsbGJhY2ssIHRoZW4gY2FsbFxuICogICAgYWZ0ZXJMZWF2ZSBob29rLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IG9wIC0gcmVtb3ZlL2hpZGUgdGhlIGVsZW1lbnRcbiAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAqL1xuXG5wJDEubGVhdmUgPSBmdW5jdGlvbiAob3AsIGNiKSB7XG4gIHRoaXMuY2FuY2VsUGVuZGluZygpO1xuICB0aGlzLmNhbGxIb29rKCdiZWZvcmVMZWF2ZScpO1xuICB0aGlzLm9wID0gb3A7XG4gIHRoaXMuY2IgPSBjYjtcbiAgYWRkQ2xhc3ModGhpcy5lbCwgdGhpcy5sZWF2ZUNsYXNzKTtcbiAgdGhpcy5sZWZ0ID0gZmFsc2U7XG4gIHRoaXMuY2FsbEhvb2tXaXRoQ2IoJ2xlYXZlJyk7XG4gIGlmICh0aGlzLmxlZnQpIHtcbiAgICByZXR1cm47IC8vIHVzZXIgY2FsbGVkIGRvbmUgc3luY2hyb25vdXNseS5cbiAgfVxuICB0aGlzLmNhbmNlbCA9IHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5sZWF2ZUNhbmNlbGxlZDtcbiAgLy8gb25seSBuZWVkIHRvIGhhbmRsZSBsZWF2ZURvbmUgaWZcbiAgLy8gMS4gdGhlIHRyYW5zaXRpb24gaXMgYWxyZWFkeSBkb25lIChzeW5jaHJvbm91c2x5IGNhbGxlZFxuICAvLyAgICBieSB0aGUgdXNlciwgd2hpY2ggY2F1c2VzIHRoaXMub3Agc2V0IHRvIG51bGwpXG4gIC8vIDIuIHRoZXJlJ3Mgbm8gZXhwbGljaXQganMgY2FsbGJhY2tcbiAgaWYgKHRoaXMub3AgJiYgIXRoaXMucGVuZGluZ0pzQ2IpIHtcbiAgICAvLyBpZiBhIENTUyB0cmFuc2l0aW9uIGxlYXZlcyBpbW1lZGlhdGVseSBhZnRlciBlbnRlcixcbiAgICAvLyB0aGUgdHJhbnNpdGlvbmVuZCBldmVudCBuZXZlciBmaXJlcy4gdGhlcmVmb3JlIHdlXG4gICAgLy8gZGV0ZWN0IHN1Y2ggY2FzZXMgYW5kIGVuZCB0aGUgbGVhdmUgaW1tZWRpYXRlbHkuXG4gICAgaWYgKHRoaXMuanVzdEVudGVyZWQpIHtcbiAgICAgIHRoaXMubGVhdmVEb25lKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHB1c2hKb2IodGhpcy5sZWF2ZU5leHRUaWNrKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogVGhlIFwibmV4dFRpY2tcIiBwaGFzZSBvZiBhIGxlYXZpbmcgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEubGVhdmVOZXh0VGljayA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIHR5cGUgPSB0aGlzLmdldENzc1RyYW5zaXRpb25UeXBlKHRoaXMubGVhdmVDbGFzcyk7XG4gIGlmICh0eXBlKSB7XG4gICAgdmFyIGV2ZW50ID0gdHlwZSA9PT0gVFlQRV9UUkFOU0lUSU9OID8gdHJhbnNpdGlvbkVuZEV2ZW50IDogYW5pbWF0aW9uRW5kRXZlbnQ7XG4gICAgdGhpcy5zZXR1cENzc0NiKGV2ZW50LCB0aGlzLmxlYXZlRG9uZSk7XG4gIH0gZWxzZSB7XG4gICAgdGhpcy5sZWF2ZURvbmUoKTtcbiAgfVxufTtcblxuLyoqXG4gKiBUaGUgXCJjbGVhbnVwXCIgcGhhc2Ugb2YgYSBsZWF2aW5nIHRyYW5zaXRpb24uXG4gKi9cblxucCQxLmxlYXZlRG9uZSA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5sZWZ0ID0gdHJ1ZTtcbiAgdGhpcy5jYW5jZWwgPSB0aGlzLnBlbmRpbmdKc0NiID0gbnVsbDtcbiAgdGhpcy5vcCgpO1xuICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmxlYXZlQ2xhc3MpO1xuICB0aGlzLmNhbGxIb29rKCdhZnRlckxlYXZlJyk7XG4gIGlmICh0aGlzLmNiKSB0aGlzLmNiKCk7XG4gIHRoaXMub3AgPSBudWxsO1xufTtcblxuLyoqXG4gKiBDYW5jZWwgYW55IHBlbmRpbmcgY2FsbGJhY2tzIGZyb20gYSBwcmV2aW91c2x5IHJ1bm5pbmdcbiAqIGJ1dCBub3QgZmluaXNoZWQgdHJhbnNpdGlvbi5cbiAqL1xuXG5wJDEuY2FuY2VsUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcbiAgdGhpcy5vcCA9IHRoaXMuY2IgPSBudWxsO1xuICB2YXIgaGFzUGVuZGluZyA9IGZhbHNlO1xuICBpZiAodGhpcy5wZW5kaW5nQ3NzQ2IpIHtcbiAgICBoYXNQZW5kaW5nID0gdHJ1ZTtcbiAgICBvZmYodGhpcy5lbCwgdGhpcy5wZW5kaW5nQ3NzRXZlbnQsIHRoaXMucGVuZGluZ0Nzc0NiKTtcbiAgICB0aGlzLnBlbmRpbmdDc3NFdmVudCA9IHRoaXMucGVuZGluZ0Nzc0NiID0gbnVsbDtcbiAgfVxuICBpZiAodGhpcy5wZW5kaW5nSnNDYikge1xuICAgIGhhc1BlbmRpbmcgPSB0cnVlO1xuICAgIHRoaXMucGVuZGluZ0pzQ2IuY2FuY2VsKCk7XG4gICAgdGhpcy5wZW5kaW5nSnNDYiA9IG51bGw7XG4gIH1cbiAgaWYgKGhhc1BlbmRpbmcpIHtcbiAgICByZW1vdmVDbGFzcyh0aGlzLmVsLCB0aGlzLmVudGVyQ2xhc3MpO1xuICAgIHJlbW92ZUNsYXNzKHRoaXMuZWwsIHRoaXMubGVhdmVDbGFzcyk7XG4gIH1cbiAgaWYgKHRoaXMuY2FuY2VsKSB7XG4gICAgdGhpcy5jYW5jZWwuY2FsbCh0aGlzLnZtLCB0aGlzLmVsKTtcbiAgICB0aGlzLmNhbmNlbCA9IG51bGw7XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhIHVzZXItcHJvdmlkZWQgc3luY2hyb25vdXMgaG9vayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5cbnAkMS5jYWxsSG9vayA9IGZ1bmN0aW9uICh0eXBlKSB7XG4gIGlmICh0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV0pIHtcbiAgICB0aGlzLmhvb2tzW3R5cGVdLmNhbGwodGhpcy52bSwgdGhpcy5lbCk7XG4gIH1cbn07XG5cbi8qKlxuICogQ2FsbCBhIHVzZXItcHJvdmlkZWQsIHBvdGVudGlhbGx5LWFzeW5jIGhvb2sgZnVuY3Rpb24uXG4gKiBXZSBjaGVjayBmb3IgdGhlIGxlbmd0aCBvZiBhcmd1bWVudHMgdG8gc2VlIGlmIHRoZSBob29rXG4gKiBleHBlY3RzIGEgYGRvbmVgIGNhbGxiYWNrLiBJZiB0cnVlLCB0aGUgdHJhbnNpdGlvbidzIGVuZFxuICogd2lsbCBiZSBkZXRlcm1pbmVkIGJ5IHdoZW4gdGhlIHVzZXIgY2FsbHMgdGhhdCBjYWxsYmFjaztcbiAqIG90aGVyd2lzZSwgdGhlIGVuZCBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBDU1MgdHJhbnNpdGlvbiBvclxuICogYW5pbWF0aW9uLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cblxucCQxLmNhbGxIb29rV2l0aENiID0gZnVuY3Rpb24gKHR5cGUpIHtcbiAgdmFyIGhvb2sgPSB0aGlzLmhvb2tzICYmIHRoaXMuaG9va3NbdHlwZV07XG4gIGlmIChob29rKSB7XG4gICAgaWYgKGhvb2subGVuZ3RoID4gMSkge1xuICAgICAgdGhpcy5wZW5kaW5nSnNDYiA9IGNhbmNlbGxhYmxlKHRoaXNbdHlwZSArICdEb25lJ10pO1xuICAgIH1cbiAgICBob29rLmNhbGwodGhpcy52bSwgdGhpcy5lbCwgdGhpcy5wZW5kaW5nSnNDYik7XG4gIH1cbn07XG5cbi8qKlxuICogR2V0IGFuIGVsZW1lbnQncyB0cmFuc2l0aW9uIHR5cGUgYmFzZWQgb24gdGhlXG4gKiBjYWxjdWxhdGVkIHN0eWxlcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gY2xhc3NOYW1lXG4gKiBAcmV0dXJuIHtOdW1iZXJ9XG4gKi9cblxucCQxLmdldENzc1RyYW5zaXRpb25UeXBlID0gZnVuY3Rpb24gKGNsYXNzTmFtZSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKCF0cmFuc2l0aW9uRW5kRXZlbnQgfHxcbiAgLy8gc2tpcCBDU1MgdHJhbnNpdGlvbnMgaWYgcGFnZSBpcyBub3QgdmlzaWJsZSAtXG4gIC8vIHRoaXMgc29sdmVzIHRoZSBpc3N1ZSBvZiB0cmFuc2l0aW9uZW5kIGV2ZW50cyBub3RcbiAgLy8gZmlyaW5nIHVudGlsIHRoZSBwYWdlIGlzIHZpc2libGUgYWdhaW4uXG4gIC8vIHBhZ2VWaXNpYmlsaXR5IEFQSSBpcyBzdXBwb3J0ZWQgaW4gSUUxMCssIHNhbWUgYXNcbiAgLy8gQ1NTIHRyYW5zaXRpb25zLlxuICBkb2N1bWVudC5oaWRkZW4gfHxcbiAgLy8gZXhwbGljaXQganMtb25seSB0cmFuc2l0aW9uXG4gIHRoaXMuaG9va3MgJiYgdGhpcy5ob29rcy5jc3MgPT09IGZhbHNlIHx8XG4gIC8vIGVsZW1lbnQgaXMgaGlkZGVuXG4gIGlzSGlkZGVuKHRoaXMuZWwpKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciB0eXBlID0gdGhpcy50eXBlIHx8IHRoaXMudHlwZUNhY2hlW2NsYXNzTmFtZV07XG4gIGlmICh0eXBlKSByZXR1cm4gdHlwZTtcbiAgdmFyIGlubGluZVN0eWxlcyA9IHRoaXMuZWwuc3R5bGU7XG4gIHZhciBjb21wdXRlZFN0eWxlcyA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMuZWwpO1xuICB2YXIgdHJhbnNEdXJhdGlvbiA9IGlubGluZVN0eWxlc1t0cmFuc0R1cmF0aW9uUHJvcF0gfHwgY29tcHV0ZWRTdHlsZXNbdHJhbnNEdXJhdGlvblByb3BdO1xuICBpZiAodHJhbnNEdXJhdGlvbiAmJiB0cmFuc0R1cmF0aW9uICE9PSAnMHMnKSB7XG4gICAgdHlwZSA9IFRZUEVfVFJBTlNJVElPTjtcbiAgfSBlbHNlIHtcbiAgICB2YXIgYW5pbUR1cmF0aW9uID0gaW5saW5lU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdIHx8IGNvbXB1dGVkU3R5bGVzW2FuaW1EdXJhdGlvblByb3BdO1xuICAgIGlmIChhbmltRHVyYXRpb24gJiYgYW5pbUR1cmF0aW9uICE9PSAnMHMnKSB7XG4gICAgICB0eXBlID0gVFlQRV9BTklNQVRJT047XG4gICAgfVxuICB9XG4gIGlmICh0eXBlKSB7XG4gICAgdGhpcy50eXBlQ2FjaGVbY2xhc3NOYW1lXSA9IHR5cGU7XG4gIH1cbiAgcmV0dXJuIHR5cGU7XG59O1xuXG4vKipcbiAqIFNldHVwIGEgQ1NTIHRyYW5zaXRpb25lbmQvYW5pbWF0aW9uZW5kIGNhbGxiYWNrLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAqL1xuXG5wJDEuc2V0dXBDc3NDYiA9IGZ1bmN0aW9uIChldmVudCwgY2IpIHtcbiAgdGhpcy5wZW5kaW5nQ3NzRXZlbnQgPSBldmVudDtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICB2YXIgZWwgPSB0aGlzLmVsO1xuICB2YXIgb25FbmQgPSB0aGlzLnBlbmRpbmdDc3NDYiA9IGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKGUudGFyZ2V0ID09PSBlbCkge1xuICAgICAgb2ZmKGVsLCBldmVudCwgb25FbmQpO1xuICAgICAgc2VsZi5wZW5kaW5nQ3NzRXZlbnQgPSBzZWxmLnBlbmRpbmdDc3NDYiA9IG51bGw7XG4gICAgICBpZiAoIXNlbGYucGVuZGluZ0pzQ2IgJiYgY2IpIHtcbiAgICAgICAgY2IoKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG4gIG9uKGVsLCBldmVudCwgb25FbmQpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiBhbiBlbGVtZW50IGlzIGhpZGRlbiAtIGluIHRoYXQgY2FzZSB3ZSBjYW4ganVzdFxuICogc2tpcCB0aGUgdHJhbnNpdGlvbiBhbGx0b2dldGhlci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtCb29sZWFufVxuICovXG5cbmZ1bmN0aW9uIGlzSGlkZGVuKGVsKSB7XG4gIGlmICgvc3ZnJC8udGVzdChlbC5uYW1lc3BhY2VVUkkpKSB7XG4gICAgLy8gU1ZHIGVsZW1lbnRzIGRvIG5vdCBoYXZlIG9mZnNldChXaWR0aHxIZWlnaHQpXG4gICAgLy8gc28gd2UgbmVlZCB0byBjaGVjayB0aGUgY2xpZW50IHJlY3RcbiAgICB2YXIgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgIHJldHVybiAhKHJlY3Qud2lkdGggfHwgcmVjdC5oZWlnaHQpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiAhKGVsLm9mZnNldFdpZHRoIHx8IGVsLm9mZnNldEhlaWdodCB8fCBlbC5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7XG4gIH1cbn1cblxudmFyIHRyYW5zaXRpb24kMSA9IHtcblxuICBwcmlvcml0eTogVFJBTlNJVElPTixcblxuICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZShpZCwgb2xkSWQpIHtcbiAgICB2YXIgZWwgPSB0aGlzLmVsO1xuICAgIC8vIHJlc29sdmUgb24gb3duZXIgdm1cbiAgICB2YXIgaG9va3MgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3RyYW5zaXRpb25zJywgaWQpO1xuICAgIGlkID0gaWQgfHwgJ3YnO1xuICAgIG9sZElkID0gb2xkSWQgfHwgJ3YnO1xuICAgIGVsLl9fdl90cmFucyA9IG5ldyBUcmFuc2l0aW9uKGVsLCBpZCwgaG9va3MsIHRoaXMudm0pO1xuICAgIHJlbW92ZUNsYXNzKGVsLCBvbGRJZCArICctdHJhbnNpdGlvbicpO1xuICAgIGFkZENsYXNzKGVsLCBpZCArICctdHJhbnNpdGlvbicpO1xuICB9XG59O1xuXG52YXIgaW50ZXJuYWxEaXJlY3RpdmVzID0ge1xuICBzdHlsZTogc3R5bGUsXG4gICdjbGFzcyc6IHZDbGFzcyxcbiAgY29tcG9uZW50OiBjb21wb25lbnQsXG4gIHByb3A6IHByb3BEZWYsXG4gIHRyYW5zaXRpb246IHRyYW5zaXRpb24kMVxufTtcblxuLy8gc3BlY2lhbCBiaW5kaW5nIHByZWZpeGVzXG52YXIgYmluZFJFID0gL152LWJpbmQ6fF46LztcbnZhciBvblJFID0gL152LW9uOnxeQC87XG52YXIgZGlyQXR0clJFID0gL152LShbXjpdKykoPzokfDooLiopJCkvO1xudmFyIG1vZGlmaWVyUkUgPSAvXFwuW15cXC5dKy9nO1xudmFyIHRyYW5zaXRpb25SRSA9IC9eKHYtYmluZDp8Oik/dHJhbnNpdGlvbiQvO1xuXG4vLyBkZWZhdWx0IGRpcmVjdGl2ZSBwcmlvcml0eVxudmFyIERFRkFVTFRfUFJJT1JJVFkgPSAxMDAwO1xudmFyIERFRkFVTFRfVEVSTUlOQUxfUFJJT1JJVFkgPSAyMDAwO1xuXG4vKipcbiAqIENvbXBpbGUgYSB0ZW1wbGF0ZSBhbmQgcmV0dXJuIGEgcmV1c2FibGUgY29tcG9zaXRlIGxpbmtcbiAqIGZ1bmN0aW9uLCB3aGljaCByZWN1cnNpdmVseSBjb250YWlucyBtb3JlIGxpbmsgZnVuY3Rpb25zXG4gKiBpbnNpZGUuIFRoaXMgdG9wIGxldmVsIGNvbXBpbGUgZnVuY3Rpb24gd291bGQgbm9ybWFsbHlcbiAqIGJlIGNhbGxlZCBvbiBpbnN0YW5jZSByb290IG5vZGVzLCBidXQgY2FuIGFsc28gYmUgdXNlZFxuICogZm9yIHBhcnRpYWwgY29tcGlsYXRpb24gaWYgdGhlIHBhcnRpYWwgYXJndW1lbnQgaXMgdHJ1ZS5cbiAqXG4gKiBUaGUgcmV0dXJuZWQgY29tcG9zaXRlIGxpbmsgZnVuY3Rpb24sIHdoZW4gY2FsbGVkLCB3aWxsXG4gKiByZXR1cm4gYW4gdW5saW5rIGZ1bmN0aW9uIHRoYXQgdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzXG4gKiBjcmVhdGVkIGR1cmluZyB0aGUgbGlua2luZyBwaGFzZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcGFyYW0ge0Jvb2xlYW59IHBhcnRpYWxcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGUoZWwsIG9wdGlvbnMsIHBhcnRpYWwpIHtcbiAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIG5vZGUgaXRzZWxmLlxuICB2YXIgbm9kZUxpbmtGbiA9IHBhcnRpYWwgfHwgIW9wdGlvbnMuX2FzQ29tcG9uZW50ID8gY29tcGlsZU5vZGUoZWwsIG9wdGlvbnMpIDogbnVsbDtcbiAgLy8gbGluayBmdW5jdGlvbiBmb3IgdGhlIGNoaWxkTm9kZXNcbiAgdmFyIGNoaWxkTGlua0ZuID0gIShub2RlTGlua0ZuICYmIG5vZGVMaW5rRm4udGVybWluYWwpICYmICFpc1NjcmlwdChlbCkgJiYgZWwuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KGVsLmNoaWxkTm9kZXMsIG9wdGlvbnMpIDogbnVsbDtcblxuICAvKipcbiAgICogQSBjb21wb3NpdGUgbGlua2VyIGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBhIGFscmVhZHlcbiAgICogY29tcGlsZWQgcGllY2Ugb2YgRE9NLCB3aGljaCBpbnN0YW50aWF0ZXMgYWxsIGRpcmVjdGl2ZVxuICAgKiBpbnN0YW5jZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudH0gZWxcbiAgICogQHBhcmFtIHtWdWV9IFtob3N0XSAtIGhvc3Qgdm0gb2YgdHJhbnNjbHVkZWQgY29udGVudFxuICAgKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXSAtIGxpbmsgY29udGV4dCBmcmFnbWVudFxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gICAqL1xuXG4gIHJldHVybiBmdW5jdGlvbiBjb21wb3NpdGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShlbC5jaGlsZE5vZGVzKTtcbiAgICAvLyBsaW5rXG4gICAgdmFyIGRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiBjb21wb3NpdGVMaW5rQ2FwdHVyZXIoKSB7XG4gICAgICBpZiAobm9kZUxpbmtGbikgbm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIGlmIChjaGlsZExpbmtGbikgY2hpbGRMaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICB9LCB2bSk7XG4gICAgcmV0dXJuIG1ha2VVbmxpbmtGbih2bSwgZGlycyk7XG4gIH07XG59XG5cbi8qKlxuICogQXBwbHkgYSBsaW5rZXIgdG8gYSB2bS9lbGVtZW50IHBhaXIgYW5kIGNhcHR1cmUgdGhlXG4gKiBkaXJlY3RpdmVzIGNyZWF0ZWQgZHVyaW5nIHRoZSBwcm9jZXNzLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGxpbmtlclxuICogQHBhcmFtIHtWdWV9IHZtXG4gKi9cblxuZnVuY3Rpb24gbGlua0FuZENhcHR1cmUobGlua2VyLCB2bSkge1xuICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAncHJvZHVjdGlvbicpIHtcbiAgICAvLyByZXNldCBkaXJlY3RpdmVzIGJlZm9yZSBldmVyeSBjYXB0dXJlIGluIHByb2R1Y3Rpb25cbiAgICAvLyBtb2RlLCBzbyB0aGF0IHdoZW4gdW5saW5raW5nIHdlIGRvbid0IG5lZWQgdG8gc3BsaWNlXG4gICAgLy8gdGhlbSBvdXQgKHdoaWNoIHR1cm5zIG91dCB0byBiZSBhIHBlcmYgaGl0KS5cbiAgICAvLyB0aGV5IGFyZSBrZXB0IGluIGRldmVsb3BtZW50IG1vZGUgYmVjYXVzZSB0aGV5IGFyZVxuICAgIC8vIHVzZWZ1bCBmb3IgVnVlJ3Mgb3duIHRlc3RzLlxuICAgIHZtLl9kaXJlY3RpdmVzID0gW107XG4gIH1cbiAgdmFyIG9yaWdpbmFsRGlyQ291bnQgPSB2bS5fZGlyZWN0aXZlcy5sZW5ndGg7XG4gIGxpbmtlcigpO1xuICB2YXIgZGlycyA9IHZtLl9kaXJlY3RpdmVzLnNsaWNlKG9yaWdpbmFsRGlyQ291bnQpO1xuICBkaXJzLnNvcnQoZGlyZWN0aXZlQ29tcGFyYXRvcik7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gZGlycy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBkaXJzW2ldLl9iaW5kKCk7XG4gIH1cbiAgcmV0dXJuIGRpcnM7XG59XG5cbi8qKlxuICogRGlyZWN0aXZlIHByaW9yaXR5IHNvcnQgY29tcGFyYXRvclxuICpcbiAqIEBwYXJhbSB7T2JqZWN0fSBhXG4gKiBAcGFyYW0ge09iamVjdH0gYlxuICovXG5cbmZ1bmN0aW9uIGRpcmVjdGl2ZUNvbXBhcmF0b3IoYSwgYikge1xuICBhID0gYS5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuICBiID0gYi5kZXNjcmlwdG9yLmRlZi5wcmlvcml0eSB8fCBERUZBVUxUX1BSSU9SSVRZO1xuICByZXR1cm4gYSA+IGIgPyAtMSA6IGEgPT09IGIgPyAwIDogMTtcbn1cblxuLyoqXG4gKiBMaW5rZXIgZnVuY3Rpb25zIHJldHVybiBhbiB1bmxpbmsgZnVuY3Rpb24gdGhhdFxuICogdGVhcnNkb3duIGFsbCBkaXJlY3RpdmVzIGluc3RhbmNlcyBnZW5lcmF0ZWQgZHVyaW5nXG4gKiB0aGUgcHJvY2Vzcy5cbiAqXG4gKiBXZSBjcmVhdGUgdW5saW5rIGZ1bmN0aW9ucyB3aXRoIG9ubHkgdGhlIG5lY2Vzc2FyeVxuICogaW5mb3JtYXRpb24gdG8gYXZvaWQgcmV0YWluaW5nIGFkZGl0aW9uYWwgY2xvc3VyZXMuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge0FycmF5fSBkaXJzXG4gKiBAcGFyYW0ge1Z1ZX0gW2NvbnRleHRdXG4gKiBAcGFyYW0ge0FycmF5fSBbY29udGV4dERpcnNdXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBtYWtlVW5saW5rRm4odm0sIGRpcnMsIGNvbnRleHQsIGNvbnRleHREaXJzKSB7XG4gIGZ1bmN0aW9uIHVubGluayhkZXN0cm95aW5nKSB7XG4gICAgdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKTtcbiAgICBpZiAoY29udGV4dCAmJiBjb250ZXh0RGlycykge1xuICAgICAgdGVhcmRvd25EaXJzKGNvbnRleHQsIGNvbnRleHREaXJzKTtcbiAgICB9XG4gIH1cbiAgLy8gZXhwb3NlIGxpbmtlZCBkaXJlY3RpdmVzXG4gIHVubGluay5kaXJzID0gZGlycztcbiAgcmV0dXJuIHVubGluaztcbn1cblxuLyoqXG4gKiBUZWFyZG93biBwYXJ0aWFsIGxpbmtlZCBkaXJlY3RpdmVzLlxuICpcbiAqIEBwYXJhbSB7VnVlfSB2bVxuICogQHBhcmFtIHtBcnJheX0gZGlyc1xuICogQHBhcmFtIHtCb29sZWFufSBkZXN0cm95aW5nXG4gKi9cblxuZnVuY3Rpb24gdGVhcmRvd25EaXJzKHZtLCBkaXJzLCBkZXN0cm95aW5nKSB7XG4gIHZhciBpID0gZGlycy5sZW5ndGg7XG4gIHdoaWxlIChpLS0pIHtcbiAgICBkaXJzW2ldLl90ZWFyZG93bigpO1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmICFkZXN0cm95aW5nKSB7XG4gICAgICB2bS5fZGlyZWN0aXZlcy4kcmVtb3ZlKGRpcnNbaV0pO1xuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIENvbXBpbGUgbGluayBwcm9wcyBvbiBhbiBpbnN0YW5jZS5cbiAqXG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBwcm9wc1xuICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV1cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVBbmRMaW5rUHJvcHModm0sIGVsLCBwcm9wcywgc2NvcGUpIHtcbiAgdmFyIHByb3BzTGlua0ZuID0gY29tcGlsZVByb3BzKGVsLCBwcm9wcywgdm0pO1xuICB2YXIgcHJvcERpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgcHJvcHNMaW5rRm4odm0sIHNjb3BlKTtcbiAgfSwgdm0pO1xuICByZXR1cm4gbWFrZVVubGlua0ZuKHZtLCBwcm9wRGlycyk7XG59XG5cbi8qKlxuICogQ29tcGlsZSB0aGUgcm9vdCBlbGVtZW50IG9mIGFuIGluc3RhbmNlLlxuICpcbiAqIDEuIGF0dHJzIG9uIGNvbnRleHQgY29udGFpbmVyIChjb250ZXh0IHNjb3BlKVxuICogMi4gYXR0cnMgb24gdGhlIGNvbXBvbmVudCB0ZW1wbGF0ZSByb290IG5vZGUsIGlmXG4gKiAgICByZXBsYWNlOnRydWUgKGNoaWxkIHNjb3BlKVxuICpcbiAqIElmIHRoaXMgaXMgYSBmcmFnbWVudCBpbnN0YW5jZSwgd2Ugb25seSBuZWVkIHRvIGNvbXBpbGUgMS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHRPcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlUm9vdChlbCwgb3B0aW9ucywgY29udGV4dE9wdGlvbnMpIHtcbiAgdmFyIGNvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fY29udGFpbmVyQXR0cnM7XG4gIHZhciByZXBsYWNlckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycztcbiAgdmFyIGNvbnRleHRMaW5rRm4sIHJlcGxhY2VyTGlua0ZuO1xuXG4gIC8vIG9ubHkgbmVlZCB0byBjb21waWxlIG90aGVyIGF0dHJpYnV0ZXMgZm9yXG4gIC8vIG5vbi1mcmFnbWVudCBpbnN0YW5jZXNcbiAgaWYgKGVsLm5vZGVUeXBlICE9PSAxMSkge1xuICAgIC8vIGZvciBjb21wb25lbnRzLCBjb250YWluZXIgYW5kIHJlcGxhY2VyIG5lZWQgdG8gYmVcbiAgICAvLyBjb21waWxlZCBzZXBhcmF0ZWx5IGFuZCBsaW5rZWQgaW4gZGlmZmVyZW50IHNjb3Blcy5cbiAgICBpZiAob3B0aW9ucy5fYXNDb21wb25lbnQpIHtcbiAgICAgIC8vIDIuIGNvbnRhaW5lciBhdHRyaWJ1dGVzXG4gICAgICBpZiAoY29udGFpbmVyQXR0cnMgJiYgY29udGV4dE9wdGlvbnMpIHtcbiAgICAgICAgY29udGV4dExpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGNvbnRhaW5lckF0dHJzLCBjb250ZXh0T3B0aW9ucyk7XG4gICAgICB9XG4gICAgICBpZiAocmVwbGFjZXJBdHRycykge1xuICAgICAgICAvLyAzLiByZXBsYWNlciBhdHRyaWJ1dGVzXG4gICAgICAgIHJlcGxhY2VyTGlua0ZuID0gY29tcGlsZURpcmVjdGl2ZXMocmVwbGFjZXJBdHRycywgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vbi1jb21wb25lbnQsIGp1c3QgY29tcGlsZSBhcyBhIG5vcm1hbCBlbGVtZW50LlxuICAgICAgcmVwbGFjZXJMaW5rRm4gPSBjb21waWxlRGlyZWN0aXZlcyhlbC5hdHRyaWJ1dGVzLCBvcHRpb25zKTtcbiAgICB9XG4gIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiBjb250YWluZXJBdHRycykge1xuICAgIC8vIHdhcm4gY29udGFpbmVyIGRpcmVjdGl2ZXMgZm9yIGZyYWdtZW50IGluc3RhbmNlc1xuICAgIHZhciBuYW1lcyA9IGNvbnRhaW5lckF0dHJzLmZpbHRlcihmdW5jdGlvbiAoYXR0cikge1xuICAgICAgLy8gYWxsb3cgdnVlLWxvYWRlci92dWVpZnkgc2NvcGVkIGNzcyBhdHRyaWJ1dGVzXG4gICAgICByZXR1cm4gYXR0ci5uYW1lLmluZGV4T2YoJ192LScpIDwgMCAmJlxuICAgICAgLy8gYWxsb3cgZXZlbnQgbGlzdGVuZXJzXG4gICAgICAhb25SRS50ZXN0KGF0dHIubmFtZSkgJiZcbiAgICAgIC8vIGFsbG93IHNsb3RzXG4gICAgICBhdHRyLm5hbWUgIT09ICdzbG90JztcbiAgICB9KS5tYXAoZnVuY3Rpb24gKGF0dHIpIHtcbiAgICAgIHJldHVybiAnXCInICsgYXR0ci5uYW1lICsgJ1wiJztcbiAgICB9KTtcbiAgICBpZiAobmFtZXMubGVuZ3RoKSB7XG4gICAgICB2YXIgcGx1cmFsID0gbmFtZXMubGVuZ3RoID4gMTtcbiAgICAgIHdhcm4oJ0F0dHJpYnV0ZScgKyAocGx1cmFsID8gJ3MgJyA6ICcgJykgKyBuYW1lcy5qb2luKCcsICcpICsgKHBsdXJhbCA/ICcgYXJlJyA6ICcgaXMnKSArICcgaWdub3JlZCBvbiBjb21wb25lbnQgJyArICc8JyArIG9wdGlvbnMuZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpICsgJz4gYmVjYXVzZSAnICsgJ3RoZSBjb21wb25lbnQgaXMgYSBmcmFnbWVudCBpbnN0YW5jZTogJyArICdodHRwOi8vdnVlanMub3JnL2d1aWRlL2NvbXBvbmVudHMuaHRtbCNGcmFnbWVudC1JbnN0YW5jZScpO1xuICAgIH1cbiAgfVxuXG4gIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gb3B0aW9ucy5fcmVwbGFjZXJBdHRycyA9IG51bGw7XG4gIHJldHVybiBmdW5jdGlvbiByb290TGlua0ZuKHZtLCBlbCwgc2NvcGUpIHtcbiAgICAvLyBsaW5rIGNvbnRleHQgc2NvcGUgZGlyc1xuICAgIHZhciBjb250ZXh0ID0gdm0uX2NvbnRleHQ7XG4gICAgdmFyIGNvbnRleHREaXJzO1xuICAgIGlmIChjb250ZXh0ICYmIGNvbnRleHRMaW5rRm4pIHtcbiAgICAgIGNvbnRleHREaXJzID0gbGlua0FuZENhcHR1cmUoZnVuY3Rpb24gKCkge1xuICAgICAgICBjb250ZXh0TGlua0ZuKGNvbnRleHQsIGVsLCBudWxsLCBzY29wZSk7XG4gICAgICB9LCBjb250ZXh0KTtcbiAgICB9XG5cbiAgICAvLyBsaW5rIHNlbGZcbiAgICB2YXIgc2VsZkRpcnMgPSBsaW5rQW5kQ2FwdHVyZShmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocmVwbGFjZXJMaW5rRm4pIHJlcGxhY2VyTGlua0ZuKHZtLCBlbCk7XG4gICAgfSwgdm0pO1xuXG4gICAgLy8gcmV0dXJuIHRoZSB1bmxpbmsgZnVuY3Rpb24gdGhhdCB0ZWFyc2Rvd24gY29udGV4dFxuICAgIC8vIGNvbnRhaW5lciBkaXJlY3RpdmVzLlxuICAgIHJldHVybiBtYWtlVW5saW5rRm4odm0sIHNlbGZEaXJzLCBjb250ZXh0LCBjb250ZXh0RGlycyk7XG4gIH07XG59XG5cbi8qKlxuICogQ29tcGlsZSBhIG5vZGUgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4gYmFzZWQgb24gdGhlXG4gKiBub2RlIHR5cGUuXG4gKlxuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKSB7XG4gIHZhciB0eXBlID0gbm9kZS5ub2RlVHlwZTtcbiAgaWYgKHR5cGUgPT09IDEgJiYgIWlzU2NyaXB0KG5vZGUpKSB7XG4gICAgcmV0dXJuIGNvbXBpbGVFbGVtZW50KG5vZGUsIG9wdGlvbnMpO1xuICB9IGVsc2UgaWYgKHR5cGUgPT09IDMgJiYgbm9kZS5kYXRhLnRyaW0oKSkge1xuICAgIHJldHVybiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucyk7XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqXG4gKiBDb21waWxlIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIG5vZGVMaW5rRm4uXG4gKlxuICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufG51bGx9XG4gKi9cblxuZnVuY3Rpb24gY29tcGlsZUVsZW1lbnQoZWwsIG9wdGlvbnMpIHtcbiAgLy8gcHJlcHJvY2VzcyB0ZXh0YXJlYXMuXG4gIC8vIHRleHRhcmVhIHRyZWF0cyBpdHMgdGV4dCBjb250ZW50IGFzIHRoZSBpbml0aWFsIHZhbHVlLlxuICAvLyBqdXN0IGJpbmQgaXQgYXMgYW4gYXR0ciBkaXJlY3RpdmUgZm9yIHZhbHVlLlxuICBpZiAoZWwudGFnTmFtZSA9PT0gJ1RFWFRBUkVBJykge1xuICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQoZWwudmFsdWUpO1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIGVsLnNldEF0dHJpYnV0ZSgnOnZhbHVlJywgdG9rZW5zVG9FeHAodG9rZW5zKSk7XG4gICAgICBlbC52YWx1ZSA9ICcnO1xuICAgIH1cbiAgfVxuICB2YXIgbGlua0ZuO1xuICB2YXIgaGFzQXR0cnMgPSBlbC5oYXNBdHRyaWJ1dGVzKCk7XG4gIHZhciBhdHRycyA9IGhhc0F0dHJzICYmIHRvQXJyYXkoZWwuYXR0cmlidXRlcyk7XG4gIC8vIGNoZWNrIHRlcm1pbmFsIGRpcmVjdGl2ZXMgKGZvciAmIGlmKVxuICBpZiAoaGFzQXR0cnMpIHtcbiAgICBsaW5rRm4gPSBjaGVja1Rlcm1pbmFsRGlyZWN0aXZlcyhlbCwgYXR0cnMsIG9wdGlvbnMpO1xuICB9XG4gIC8vIGNoZWNrIGVsZW1lbnQgZGlyZWN0aXZlc1xuICBpZiAoIWxpbmtGbikge1xuICAgIGxpbmtGbiA9IGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpO1xuICB9XG4gIC8vIGNoZWNrIGNvbXBvbmVudFxuICBpZiAoIWxpbmtGbikge1xuICAgIGxpbmtGbiA9IGNoZWNrQ29tcG9uZW50KGVsLCBvcHRpb25zKTtcbiAgfVxuICAvLyBub3JtYWwgZGlyZWN0aXZlc1xuICBpZiAoIWxpbmtGbiAmJiBoYXNBdHRycykge1xuICAgIGxpbmtGbiA9IGNvbXBpbGVEaXJlY3RpdmVzKGF0dHJzLCBvcHRpb25zKTtcbiAgfVxuICByZXR1cm4gbGlua0ZuO1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSB0ZXh0Tm9kZSBhbmQgcmV0dXJuIGEgbm9kZUxpbmtGbi5cbiAqXG4gKiBAcGFyYW0ge1RleHROb2RlfSBub2RlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258bnVsbH0gdGV4dE5vZGVMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlVGV4dE5vZGUobm9kZSwgb3B0aW9ucykge1xuICAvLyBza2lwIG1hcmtlZCB0ZXh0IG5vZGVzXG4gIGlmIChub2RlLl9za2lwKSB7XG4gICAgcmV0dXJuIHJlbW92ZVRleHQ7XG4gIH1cblxuICB2YXIgdG9rZW5zID0gcGFyc2VUZXh0KG5vZGUud2hvbGVUZXh0KTtcbiAgaWYgKCF0b2tlbnMpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIG1hcmsgYWRqYWNlbnQgdGV4dCBub2RlcyBhcyBza2lwcGVkLFxuICAvLyBiZWNhdXNlIHdlIGFyZSB1c2luZyBub2RlLndob2xlVGV4dCB0byBjb21waWxlXG4gIC8vIGFsbCBhZGphY2VudCB0ZXh0IG5vZGVzIHRvZ2V0aGVyLiBUaGlzIGZpeGVzXG4gIC8vIGlzc3VlcyBpbiBJRSB3aGVyZSBzb21ldGltZXMgaXQgc3BsaXRzIHVwIGEgc2luZ2xlXG4gIC8vIHRleHQgbm9kZSBpbnRvIG11bHRpcGxlIG9uZXMuXG4gIHZhciBuZXh0ID0gbm9kZS5uZXh0U2libGluZztcbiAgd2hpbGUgKG5leHQgJiYgbmV4dC5ub2RlVHlwZSA9PT0gMykge1xuICAgIG5leHQuX3NraXAgPSB0cnVlO1xuICAgIG5leHQgPSBuZXh0Lm5leHRTaWJsaW5nO1xuICB9XG5cbiAgdmFyIGZyYWcgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCk7XG4gIHZhciBlbCwgdG9rZW47XG4gIGZvciAodmFyIGkgPSAwLCBsID0gdG9rZW5zLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgIGVsID0gdG9rZW4udGFnID8gcHJvY2Vzc1RleHRUb2tlbih0b2tlbiwgb3B0aW9ucykgOiBkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSh0b2tlbi52YWx1ZSk7XG4gICAgZnJhZy5hcHBlbmRDaGlsZChlbCk7XG4gIH1cbiAgcmV0dXJuIG1ha2VUZXh0Tm9kZUxpbmtGbih0b2tlbnMsIGZyYWcsIG9wdGlvbnMpO1xufVxuXG4vKipcbiAqIExpbmtlciBmb3IgYW4gc2tpcHBlZCB0ZXh0IG5vZGUuXG4gKlxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge1RleHR9IG5vZGVcbiAqL1xuXG5mdW5jdGlvbiByZW1vdmVUZXh0KHZtLCBub2RlKSB7XG4gIHJlbW92ZShub2RlKTtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIGEgc2luZ2xlIHRleHQgdG9rZW4uXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IHRva2VuXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7Tm9kZX1cbiAqL1xuXG5mdW5jdGlvbiBwcm9jZXNzVGV4dFRva2VuKHRva2VuLCBvcHRpb25zKSB7XG4gIHZhciBlbDtcbiAgaWYgKHRva2VuLm9uZVRpbWUpIHtcbiAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKHRva2VuLnZhbHVlKTtcbiAgfSBlbHNlIHtcbiAgICBpZiAodG9rZW4uaHRtbCkge1xuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVDb21tZW50KCd2LWh0bWwnKTtcbiAgICAgIHNldFRva2VuVHlwZSgnaHRtbCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBJRSB3aWxsIGNsZWFuIHVwIGVtcHR5IHRleHROb2RlcyBkdXJpbmdcbiAgICAgIC8vIGZyYWcuY2xvbmVOb2RlKHRydWUpLCBzbyB3ZSBoYXZlIHRvIGdpdmUgaXRcbiAgICAgIC8vIHNvbWV0aGluZyBoZXJlLi4uXG4gICAgICBlbCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcgJyk7XG4gICAgICBzZXRUb2tlblR5cGUoJ3RleHQnKTtcbiAgICB9XG4gIH1cbiAgZnVuY3Rpb24gc2V0VG9rZW5UeXBlKHR5cGUpIHtcbiAgICBpZiAodG9rZW4uZGVzY3JpcHRvcikgcmV0dXJuO1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh0b2tlbi52YWx1ZSk7XG4gICAgdG9rZW4uZGVzY3JpcHRvciA9IHtcbiAgICAgIG5hbWU6IHR5cGUsXG4gICAgICBkZWY6IGRpcmVjdGl2ZXNbdHlwZV0sXG4gICAgICBleHByZXNzaW9uOiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICAgIGZpbHRlcnM6IHBhcnNlZC5maWx0ZXJzXG4gICAgfTtcbiAgfVxuICByZXR1cm4gZWw7XG59XG5cbi8qKlxuICogQnVpbGQgYSBmdW5jdGlvbiB0aGF0IHByb2Nlc3NlcyBhIHRleHROb2RlLlxuICpcbiAqIEBwYXJhbSB7QXJyYXk8T2JqZWN0Pn0gdG9rZW5zXG4gKiBAcGFyYW0ge0RvY3VtZW50RnJhZ21lbnR9IGZyYWdcbiAqL1xuXG5mdW5jdGlvbiBtYWtlVGV4dE5vZGVMaW5rRm4odG9rZW5zLCBmcmFnKSB7XG4gIHJldHVybiBmdW5jdGlvbiB0ZXh0Tm9kZUxpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlKSB7XG4gICAgdmFyIGZyYWdDbG9uZSA9IGZyYWcuY2xvbmVOb2RlKHRydWUpO1xuICAgIHZhciBjaGlsZE5vZGVzID0gdG9BcnJheShmcmFnQ2xvbmUuY2hpbGROb2Rlcyk7XG4gICAgdmFyIHRva2VuLCB2YWx1ZSwgbm9kZTtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IHRva2Vucy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgIHRva2VuID0gdG9rZW5zW2ldO1xuICAgICAgdmFsdWUgPSB0b2tlbi52YWx1ZTtcbiAgICAgIGlmICh0b2tlbi50YWcpIHtcbiAgICAgICAgbm9kZSA9IGNoaWxkTm9kZXNbaV07XG4gICAgICAgIGlmICh0b2tlbi5vbmVUaW1lKSB7XG4gICAgICAgICAgdmFsdWUgPSAoc2NvcGUgfHwgdm0pLiRldmFsKHZhbHVlKTtcbiAgICAgICAgICBpZiAodG9rZW4uaHRtbCkge1xuICAgICAgICAgICAgcmVwbGFjZShub2RlLCBwYXJzZVRlbXBsYXRlKHZhbHVlLCB0cnVlKSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUuZGF0YSA9IF90b1N0cmluZyh2YWx1ZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZtLl9iaW5kRGlyKHRva2VuLmRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXBsYWNlKGVsLCBmcmFnQ2xvbmUpO1xuICB9O1xufVxuXG4vKipcbiAqIENvbXBpbGUgYSBub2RlIGxpc3QgYW5kIHJldHVybiBhIGNoaWxkTGlua0ZuLlxuICpcbiAqIEBwYXJhbSB7Tm9kZUxpc3R9IG5vZGVMaXN0XG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RnVuY3Rpb258dW5kZWZpbmVkfVxuICovXG5cbmZ1bmN0aW9uIGNvbXBpbGVOb2RlTGlzdChub2RlTGlzdCwgb3B0aW9ucykge1xuICB2YXIgbGlua0ZucyA9IFtdO1xuICB2YXIgbm9kZUxpbmtGbiwgY2hpbGRMaW5rRm4sIG5vZGU7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gbm9kZUxpc3QubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgbm9kZSA9IG5vZGVMaXN0W2ldO1xuICAgIG5vZGVMaW5rRm4gPSBjb21waWxlTm9kZShub2RlLCBvcHRpb25zKTtcbiAgICBjaGlsZExpbmtGbiA9ICEobm9kZUxpbmtGbiAmJiBub2RlTGlua0ZuLnRlcm1pbmFsKSAmJiBub2RlLnRhZ05hbWUgIT09ICdTQ1JJUFQnICYmIG5vZGUuaGFzQ2hpbGROb2RlcygpID8gY29tcGlsZU5vZGVMaXN0KG5vZGUuY2hpbGROb2Rlcywgb3B0aW9ucykgOiBudWxsO1xuICAgIGxpbmtGbnMucHVzaChub2RlTGlua0ZuLCBjaGlsZExpbmtGbik7XG4gIH1cbiAgcmV0dXJuIGxpbmtGbnMubGVuZ3RoID8gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIDogbnVsbDtcbn1cblxuLyoqXG4gKiBNYWtlIGEgY2hpbGQgbGluayBmdW5jdGlvbiBmb3IgYSBub2RlJ3MgY2hpbGROb2Rlcy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5PEZ1bmN0aW9uPn0gbGlua0Zuc1xuICogQHJldHVybiB7RnVuY3Rpb259IGNoaWxkTGlua0ZuXG4gKi9cblxuZnVuY3Rpb24gbWFrZUNoaWxkTGlua0ZuKGxpbmtGbnMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGNoaWxkTGlua0ZuKHZtLCBub2RlcywgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICB2YXIgbm9kZSwgbm9kZUxpbmtGbiwgY2hpbGRyZW5MaW5rRm47XG4gICAgZm9yICh2YXIgaSA9IDAsIG4gPSAwLCBsID0gbGlua0Zucy5sZW5ndGg7IGkgPCBsOyBuKyspIHtcbiAgICAgIG5vZGUgPSBub2Rlc1tuXTtcbiAgICAgIG5vZGVMaW5rRm4gPSBsaW5rRm5zW2krK107XG4gICAgICBjaGlsZHJlbkxpbmtGbiA9IGxpbmtGbnNbaSsrXTtcbiAgICAgIC8vIGNhY2hlIGNoaWxkTm9kZXMgYmVmb3JlIGxpbmtpbmcgcGFyZW50LCBmaXggIzY1N1xuICAgICAgdmFyIGNoaWxkTm9kZXMgPSB0b0FycmF5KG5vZGUuY2hpbGROb2Rlcyk7XG4gICAgICBpZiAobm9kZUxpbmtGbikge1xuICAgICAgICBub2RlTGlua0ZuKHZtLCBub2RlLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgICB9XG4gICAgICBpZiAoY2hpbGRyZW5MaW5rRm4pIHtcbiAgICAgICAgY2hpbGRyZW5MaW5rRm4odm0sIGNoaWxkTm9kZXMsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG59XG5cbi8qKlxuICogQ2hlY2sgZm9yIGVsZW1lbnQgZGlyZWN0aXZlcyAoY3VzdG9tIGVsZW1lbnRzIHRoYXQgc2hvdWxkXG4gKiBiZSByZXNvdmxlZCBhcyB0ZXJtaW5hbCBkaXJlY3RpdmVzKS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICovXG5cbmZ1bmN0aW9uIGNoZWNrRWxlbWVudERpcmVjdGl2ZXMoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIHRhZyA9IGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGNvbW1vblRhZ1JFLnRlc3QodGFnKSkge1xuICAgIHJldHVybjtcbiAgfVxuICB2YXIgZGVmID0gcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZyk7XG4gIGlmIChkZWYpIHtcbiAgICByZXR1cm4gbWFrZVRlcm1pbmFsTm9kZUxpbmtGbihlbCwgdGFnLCAnJywgb3B0aW9ucywgZGVmKTtcbiAgfVxufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGVsZW1lbnQgaXMgYSBjb21wb25lbnQuIElmIHllcywgcmV0dXJuXG4gKiBhIGNvbXBvbmVudCBsaW5rIGZ1bmN0aW9uLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbnx1bmRlZmluZWR9XG4gKi9cblxuZnVuY3Rpb24gY2hlY2tDb21wb25lbnQoZWwsIG9wdGlvbnMpIHtcbiAgdmFyIGNvbXBvbmVudCA9IGNoZWNrQ29tcG9uZW50QXR0cihlbCwgb3B0aW9ucyk7XG4gIGlmIChjb21wb25lbnQpIHtcbiAgICB2YXIgcmVmID0gZmluZFJlZihlbCk7XG4gICAgdmFyIGRlc2NyaXB0b3IgPSB7XG4gICAgICBuYW1lOiAnY29tcG9uZW50JyxcbiAgICAgIHJlZjogcmVmLFxuICAgICAgZXhwcmVzc2lvbjogY29tcG9uZW50LmlkLFxuICAgICAgZGVmOiBpbnRlcm5hbERpcmVjdGl2ZXMuY29tcG9uZW50LFxuICAgICAgbW9kaWZpZXJzOiB7XG4gICAgICAgIGxpdGVyYWw6ICFjb21wb25lbnQuZHluYW1pY1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIGNvbXBvbmVudExpbmtGbiA9IGZ1bmN0aW9uIGNvbXBvbmVudExpbmtGbih2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgICBpZiAocmVmKSB7XG4gICAgICAgIGRlZmluZVJlYWN0aXZlKChzY29wZSB8fCB2bSkuJHJlZnMsIHJlZiwgbnVsbCk7XG4gICAgICB9XG4gICAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICAgIH07XG4gICAgY29tcG9uZW50TGlua0ZuLnRlcm1pbmFsID0gdHJ1ZTtcbiAgICByZXR1cm4gY29tcG9uZW50TGlua0ZuO1xuICB9XG59XG5cbi8qKlxuICogQ2hlY2sgYW4gZWxlbWVudCBmb3IgdGVybWluYWwgZGlyZWN0aXZlcyBpbiBmaXhlZCBvcmRlci5cbiAqIElmIGl0IGZpbmRzIG9uZSwgcmV0dXJuIGEgdGVybWluYWwgbGluayBmdW5jdGlvbi5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge0FycmF5fSBhdHRyc1xuICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuICovXG5cbmZ1bmN0aW9uIGNoZWNrVGVybWluYWxEaXJlY3RpdmVzKGVsLCBhdHRycywgb3B0aW9ucykge1xuICAvLyBza2lwIHYtcHJlXG4gIGlmIChnZXRBdHRyKGVsLCAndi1wcmUnKSAhPT0gbnVsbCkge1xuICAgIHJldHVybiBza2lwO1xuICB9XG4gIC8vIHNraXAgdi1lbHNlIGJsb2NrLCBidXQgb25seSBpZiBmb2xsb3dpbmcgdi1pZlxuICBpZiAoZWwuaGFzQXR0cmlidXRlKCd2LWVsc2UnKSkge1xuICAgIHZhciBwcmV2ID0gZWwucHJldmlvdXNFbGVtZW50U2libGluZztcbiAgICBpZiAocHJldiAmJiBwcmV2Lmhhc0F0dHJpYnV0ZSgndi1pZicpKSB7XG4gICAgICByZXR1cm4gc2tpcDtcbiAgICB9XG4gIH1cblxuICB2YXIgYXR0ciwgbmFtZSwgdmFsdWUsIG1vZGlmaWVycywgbWF0Y2hlZCwgZGlyTmFtZSwgcmF3TmFtZSwgYXJnLCBkZWYsIHRlcm1EZWY7XG4gIGZvciAodmFyIGkgPSAwLCBqID0gYXR0cnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgYXR0ciA9IGF0dHJzW2ldO1xuICAgIG5hbWUgPSBhdHRyLm5hbWUucmVwbGFjZShtb2RpZmllclJFLCAnJyk7XG4gICAgaWYgKG1hdGNoZWQgPSBuYW1lLm1hdGNoKGRpckF0dHJSRSkpIHtcbiAgICAgIGRlZiA9IHJlc29sdmVBc3NldChvcHRpb25zLCAnZGlyZWN0aXZlcycsIG1hdGNoZWRbMV0pO1xuICAgICAgaWYgKGRlZiAmJiBkZWYudGVybWluYWwpIHtcbiAgICAgICAgaWYgKCF0ZXJtRGVmIHx8IChkZWYucHJpb3JpdHkgfHwgREVGQVVMVF9URVJNSU5BTF9QUklPUklUWSkgPiB0ZXJtRGVmLnByaW9yaXR5KSB7XG4gICAgICAgICAgdGVybURlZiA9IGRlZjtcbiAgICAgICAgICByYXdOYW1lID0gYXR0ci5uYW1lO1xuICAgICAgICAgIG1vZGlmaWVycyA9IHBhcnNlTW9kaWZpZXJzKGF0dHIubmFtZSk7XG4gICAgICAgICAgdmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgICAgICAgIGRpck5hbWUgPSBtYXRjaGVkWzFdO1xuICAgICAgICAgIGFyZyA9IG1hdGNoZWRbMl07XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAodGVybURlZikge1xuICAgIHJldHVybiBtYWtlVGVybWluYWxOb2RlTGlua0ZuKGVsLCBkaXJOYW1lLCB2YWx1ZSwgb3B0aW9ucywgdGVybURlZiwgcmF3TmFtZSwgYXJnLCBtb2RpZmllcnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHNraXAoKSB7fVxuc2tpcC50ZXJtaW5hbCA9IHRydWU7XG5cbi8qKlxuICogQnVpbGQgYSBub2RlIGxpbmsgZnVuY3Rpb24gZm9yIGEgdGVybWluYWwgZGlyZWN0aXZlLlxuICogQSB0ZXJtaW5hbCBsaW5rIGZ1bmN0aW9uIHRlcm1pbmF0ZXMgdGhlIGN1cnJlbnRcbiAqIGNvbXBpbGF0aW9uIHJlY3Vyc2lvbiBhbmQgaGFuZGxlcyBjb21waWxhdGlvbiBvZiB0aGVcbiAqIHN1YnRyZWUgaW4gdGhlIGRpcmVjdGl2ZS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge1N0cmluZ30gZGlyTmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHBhcmFtIHtPYmplY3R9IGRlZlxuICogQHBhcmFtIHtTdHJpbmd9IFtyYXdOYW1lXVxuICogQHBhcmFtIHtTdHJpbmd9IFthcmddXG4gKiBAcGFyYW0ge09iamVjdH0gW21vZGlmaWVyc11cbiAqIEByZXR1cm4ge0Z1bmN0aW9ufSB0ZXJtaW5hbExpbmtGblxuICovXG5cbmZ1bmN0aW9uIG1ha2VUZXJtaW5hbE5vZGVMaW5rRm4oZWwsIGRpck5hbWUsIHZhbHVlLCBvcHRpb25zLCBkZWYsIHJhd05hbWUsIGFyZywgbW9kaWZpZXJzKSB7XG4gIHZhciBwYXJzZWQgPSBwYXJzZURpcmVjdGl2ZSh2YWx1ZSk7XG4gIHZhciBkZXNjcmlwdG9yID0ge1xuICAgIG5hbWU6IGRpck5hbWUsXG4gICAgYXJnOiBhcmcsXG4gICAgZXhwcmVzc2lvbjogcGFyc2VkLmV4cHJlc3Npb24sXG4gICAgZmlsdGVyczogcGFyc2VkLmZpbHRlcnMsXG4gICAgcmF3OiB2YWx1ZSxcbiAgICBhdHRyOiByYXdOYW1lLFxuICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuICAgIGRlZjogZGVmXG4gIH07XG4gIC8vIGNoZWNrIHJlZiBmb3Igdi1mb3IgYW5kIHJvdXRlci12aWV3XG4gIGlmIChkaXJOYW1lID09PSAnZm9yJyB8fCBkaXJOYW1lID09PSAncm91dGVyLXZpZXcnKSB7XG4gICAgZGVzY3JpcHRvci5yZWYgPSBmaW5kUmVmKGVsKTtcbiAgfVxuICB2YXIgZm4gPSBmdW5jdGlvbiB0ZXJtaW5hbE5vZGVMaW5rRm4odm0sIGVsLCBob3N0LCBzY29wZSwgZnJhZykge1xuICAgIGlmIChkZXNjcmlwdG9yLnJlZikge1xuICAgICAgZGVmaW5lUmVhY3RpdmUoKHNjb3BlIHx8IHZtKS4kcmVmcywgZGVzY3JpcHRvci5yZWYsIG51bGwpO1xuICAgIH1cbiAgICB2bS5fYmluZERpcihkZXNjcmlwdG9yLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpO1xuICB9O1xuICBmbi50ZXJtaW5hbCA9IHRydWU7XG4gIHJldHVybiBmbjtcbn1cblxuLyoqXG4gKiBDb21waWxlIHRoZSBkaXJlY3RpdmVzIG9uIGFuIGVsZW1lbnQgYW5kIHJldHVybiBhIGxpbmtlci5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fE5hbWVkTm9kZU1hcH0gYXR0cnNcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuXG5mdW5jdGlvbiBjb21waWxlRGlyZWN0aXZlcyhhdHRycywgb3B0aW9ucykge1xuICB2YXIgaSA9IGF0dHJzLmxlbmd0aDtcbiAgdmFyIGRpcnMgPSBbXTtcbiAgdmFyIGF0dHIsIG5hbWUsIHZhbHVlLCByYXdOYW1lLCByYXdWYWx1ZSwgZGlyTmFtZSwgYXJnLCBtb2RpZmllcnMsIGRpckRlZiwgdG9rZW5zLCBtYXRjaGVkO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgYXR0ciA9IGF0dHJzW2ldO1xuICAgIG5hbWUgPSByYXdOYW1lID0gYXR0ci5uYW1lO1xuICAgIHZhbHVlID0gcmF3VmFsdWUgPSBhdHRyLnZhbHVlO1xuICAgIHRva2VucyA9IHBhcnNlVGV4dCh2YWx1ZSk7XG4gICAgLy8gcmVzZXQgYXJnXG4gICAgYXJnID0gbnVsbDtcbiAgICAvLyBjaGVjayBtb2RpZmllcnNcbiAgICBtb2RpZmllcnMgPSBwYXJzZU1vZGlmaWVycyhuYW1lKTtcbiAgICBuYW1lID0gbmFtZS5yZXBsYWNlKG1vZGlmaWVyUkUsICcnKTtcblxuICAgIC8vIGF0dHJpYnV0ZSBpbnRlcnBvbGF0aW9uc1xuICAgIGlmICh0b2tlbnMpIHtcbiAgICAgIHZhbHVlID0gdG9rZW5zVG9FeHAodG9rZW5zKTtcbiAgICAgIGFyZyA9IG5hbWU7XG4gICAgICBwdXNoRGlyKCdiaW5kJywgZGlyZWN0aXZlcy5iaW5kLCB0b2tlbnMpO1xuICAgICAgLy8gd2FybiBhZ2FpbnN0IG1peGluZyBtdXN0YWNoZXMgd2l0aCB2LWJpbmRcbiAgICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSB7XG4gICAgICAgIGlmIChuYW1lID09PSAnY2xhc3MnICYmIEFycmF5LnByb3RvdHlwZS5zb21lLmNhbGwoYXR0cnMsIGZ1bmN0aW9uIChhdHRyKSB7XG4gICAgICAgICAgcmV0dXJuIGF0dHIubmFtZSA9PT0gJzpjbGFzcycgfHwgYXR0ci5uYW1lID09PSAndi1iaW5kOmNsYXNzJztcbiAgICAgICAgfSkpIHtcbiAgICAgICAgICB3YXJuKCdjbGFzcz1cIicgKyByYXdWYWx1ZSArICdcIjogRG8gbm90IG1peCBtdXN0YWNoZSBpbnRlcnBvbGF0aW9uICcgKyAnYW5kIHYtYmluZCBmb3IgXCJjbGFzc1wiIG9uIHRoZSBzYW1lIGVsZW1lbnQuIFVzZSBvbmUgb3IgdGhlIG90aGVyLicsIG9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlXG5cbiAgICAgIC8vIHNwZWNpYWwgYXR0cmlidXRlOiB0cmFuc2l0aW9uXG4gICAgICBpZiAodHJhbnNpdGlvblJFLnRlc3QobmFtZSkpIHtcbiAgICAgICAgbW9kaWZpZXJzLmxpdGVyYWwgPSAhYmluZFJFLnRlc3QobmFtZSk7XG4gICAgICAgIHB1c2hEaXIoJ3RyYW5zaXRpb24nLCBpbnRlcm5hbERpcmVjdGl2ZXMudHJhbnNpdGlvbik7XG4gICAgICB9IGVsc2VcblxuICAgICAgICAvLyBldmVudCBoYW5kbGVyc1xuICAgICAgICBpZiAob25SRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgICAgYXJnID0gbmFtZS5yZXBsYWNlKG9uUkUsICcnKTtcbiAgICAgICAgICBwdXNoRGlyKCdvbicsIGRpcmVjdGl2ZXMub24pO1xuICAgICAgICB9IGVsc2VcblxuICAgICAgICAgIC8vIGF0dHJpYnV0ZSBiaW5kaW5nc1xuICAgICAgICAgIGlmIChiaW5kUkUudGVzdChuYW1lKSkge1xuICAgICAgICAgICAgZGlyTmFtZSA9IG5hbWUucmVwbGFjZShiaW5kUkUsICcnKTtcbiAgICAgICAgICAgIGlmIChkaXJOYW1lID09PSAnc3R5bGUnIHx8IGRpck5hbWUgPT09ICdjbGFzcycpIHtcbiAgICAgICAgICAgICAgcHVzaERpcihkaXJOYW1lLCBpbnRlcm5hbERpcmVjdGl2ZXNbZGlyTmFtZV0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgYXJnID0gZGlyTmFtZTtcbiAgICAgICAgICAgICAgcHVzaERpcignYmluZCcsIGRpcmVjdGl2ZXMuYmluZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlXG5cbiAgICAgICAgICAgIC8vIG5vcm1hbCBkaXJlY3RpdmVzXG4gICAgICAgICAgICBpZiAobWF0Y2hlZCA9IG5hbWUubWF0Y2goZGlyQXR0clJFKSkge1xuICAgICAgICAgICAgICBkaXJOYW1lID0gbWF0Y2hlZFsxXTtcbiAgICAgICAgICAgICAgYXJnID0gbWF0Y2hlZFsyXTtcblxuICAgICAgICAgICAgICAvLyBza2lwIHYtZWxzZSAod2hlbiB1c2VkIHdpdGggdi1zaG93KVxuICAgICAgICAgICAgICBpZiAoZGlyTmFtZSA9PT0gJ2Vsc2UnKSB7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBkaXJEZWYgPSByZXNvbHZlQXNzZXQob3B0aW9ucywgJ2RpcmVjdGl2ZXMnLCBkaXJOYW1lLCB0cnVlKTtcbiAgICAgICAgICAgICAgaWYgKGRpckRlZikge1xuICAgICAgICAgICAgICAgIHB1c2hEaXIoZGlyTmFtZSwgZGlyRGVmKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFB1c2ggYSBkaXJlY3RpdmUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBkaXJOYW1lXG4gICAqIEBwYXJhbSB7T2JqZWN0fEZ1bmN0aW9ufSBkZWZcbiAgICogQHBhcmFtIHtBcnJheX0gW2ludGVycFRva2Vuc11cbiAgICovXG5cbiAgZnVuY3Rpb24gcHVzaERpcihkaXJOYW1lLCBkZWYsIGludGVycFRva2Vucykge1xuICAgIHZhciBoYXNPbmVUaW1lVG9rZW4gPSBpbnRlcnBUb2tlbnMgJiYgaGFzT25lVGltZShpbnRlcnBUb2tlbnMpO1xuICAgIHZhciBwYXJzZWQgPSAhaGFzT25lVGltZVRva2VuICYmIHBhcnNlRGlyZWN0aXZlKHZhbHVlKTtcbiAgICBkaXJzLnB1c2goe1xuICAgICAgbmFtZTogZGlyTmFtZSxcbiAgICAgIGF0dHI6IHJhd05hbWUsXG4gICAgICByYXc6IHJhd1ZhbHVlLFxuICAgICAgZGVmOiBkZWYsXG4gICAgICBhcmc6IGFyZyxcbiAgICAgIG1vZGlmaWVyczogbW9kaWZpZXJzLFxuICAgICAgLy8gY29udmVyc2lvbiBmcm9tIGludGVycG9sYXRpb24gc3RyaW5ncyB3aXRoIG9uZS10aW1lIHRva2VuXG4gICAgICAvLyB0byBleHByZXNzaW9uIGlzIGRpZmZlcmVkIHVudGlsIGRpcmVjdGl2ZSBiaW5kIHRpbWUgc28gdGhhdCB3ZVxuICAgICAgLy8gaGF2ZSBhY2Nlc3MgdG8gdGhlIGFjdHVhbCB2bSBjb250ZXh0IGZvciBvbmUtdGltZSBiaW5kaW5ncy5cbiAgICAgIGV4cHJlc3Npb246IHBhcnNlZCAmJiBwYXJzZWQuZXhwcmVzc2lvbixcbiAgICAgIGZpbHRlcnM6IHBhcnNlZCAmJiBwYXJzZWQuZmlsdGVycyxcbiAgICAgIGludGVycDogaW50ZXJwVG9rZW5zLFxuICAgICAgaGFzT25lVGltZTogaGFzT25lVGltZVRva2VuXG4gICAgfSk7XG4gIH1cblxuICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICByZXR1cm4gbWFrZU5vZGVMaW5rRm4oZGlycyk7XG4gIH1cbn1cblxuLyoqXG4gKiBQYXJzZSBtb2RpZmllcnMgZnJvbSBkaXJlY3RpdmUgYXR0cmlidXRlIG5hbWUuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge09iamVjdH1cbiAqL1xuXG5mdW5jdGlvbiBwYXJzZU1vZGlmaWVycyhuYW1lKSB7XG4gIHZhciByZXMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgbWF0Y2ggPSBuYW1lLm1hdGNoKG1vZGlmaWVyUkUpO1xuICBpZiAobWF0Y2gpIHtcbiAgICB2YXIgaSA9IG1hdGNoLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICByZXNbbWF0Y2hbaV0uc2xpY2UoMSldID0gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHJlcztcbn1cblxuLyoqXG4gKiBCdWlsZCBhIGxpbmsgZnVuY3Rpb24gZm9yIGFsbCBkaXJlY3RpdmVzIG9uIGEgc2luZ2xlIG5vZGUuXG4gKlxuICogQHBhcmFtIHtBcnJheX0gZGlyZWN0aXZlc1xuICogQHJldHVybiB7RnVuY3Rpb259IGRpcmVjdGl2ZXNMaW5rRm5cbiAqL1xuXG5mdW5jdGlvbiBtYWtlTm9kZUxpbmtGbihkaXJlY3RpdmVzKSB7XG4gIHJldHVybiBmdW5jdGlvbiBub2RlTGlua0ZuKHZtLCBlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICAvLyByZXZlcnNlIGFwcGx5IGJlY2F1c2UgaXQncyBzb3J0ZWQgbG93IHRvIGhpZ2hcbiAgICB2YXIgaSA9IGRpcmVjdGl2ZXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHZtLl9iaW5kRGlyKGRpcmVjdGl2ZXNbaV0sIGVsLCBob3N0LCBzY29wZSwgZnJhZyk7XG4gICAgfVxuICB9O1xufVxuXG4vKipcbiAqIENoZWNrIGlmIGFuIGludGVycG9sYXRpb24gc3RyaW5nIGNvbnRhaW5zIG9uZS10aW1lIHRva2Vucy5cbiAqXG4gKiBAcGFyYW0ge0FycmF5fSB0b2tlbnNcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKi9cblxuZnVuY3Rpb24gaGFzT25lVGltZSh0b2tlbnMpIHtcbiAgdmFyIGkgPSB0b2tlbnMubGVuZ3RoO1xuICB3aGlsZSAoaS0tKSB7XG4gICAgaWYgKHRva2Vuc1tpXS5vbmVUaW1lKSByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBpc1NjcmlwdChlbCkge1xuICByZXR1cm4gZWwudGFnTmFtZSA9PT0gJ1NDUklQVCcgJiYgKCFlbC5oYXNBdHRyaWJ1dGUoJ3R5cGUnKSB8fCBlbC5nZXRBdHRyaWJ1dGUoJ3R5cGUnKSA9PT0gJ3RleHQvamF2YXNjcmlwdCcpO1xufVxuXG52YXIgc3BlY2lhbENoYXJSRSA9IC9bXlxcd1xcLTpcXC5dLztcblxuLyoqXG4gKiBQcm9jZXNzIGFuIGVsZW1lbnQgb3IgYSBEb2N1bWVudEZyYWdtZW50IGJhc2VkIG9uIGFcbiAqIGluc3RhbmNlIG9wdGlvbiBvYmplY3QuIFRoaXMgYWxsb3dzIHVzIHRvIHRyYW5zY2x1ZGVcbiAqIGEgdGVtcGxhdGUgbm9kZS9mcmFnbWVudCBiZWZvcmUgdGhlIGluc3RhbmNlIGlzIGNyZWF0ZWQsXG4gKiBzbyB0aGUgcHJvY2Vzc2VkIGZyYWdtZW50IGNhbiB0aGVuIGJlIGNsb25lZCBhbmQgcmV1c2VkXG4gKiBpbiB2LWZvci5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICogQHJldHVybiB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fVxuICovXG5cbmZ1bmN0aW9uIHRyYW5zY2x1ZGUoZWwsIG9wdGlvbnMpIHtcbiAgLy8gZXh0cmFjdCBjb250YWluZXIgYXR0cmlidXRlcyB0byBwYXNzIHRoZW0gZG93blxuICAvLyB0byBjb21waWxlciwgYmVjYXVzZSB0aGV5IG5lZWQgdG8gYmUgY29tcGlsZWQgaW5cbiAgLy8gcGFyZW50IHNjb3BlLiB3ZSBhcmUgbXV0YXRpbmcgdGhlIG9wdGlvbnMgb2JqZWN0IGhlcmVcbiAgLy8gYXNzdW1pbmcgdGhlIHNhbWUgb2JqZWN0IHdpbGwgYmUgdXNlZCBmb3IgY29tcGlsZVxuICAvLyByaWdodCBhZnRlciB0aGlzLlxuICBpZiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMuX2NvbnRhaW5lckF0dHJzID0gZXh0cmFjdEF0dHJzKGVsKTtcbiAgfVxuICAvLyBmb3IgdGVtcGxhdGUgdGFncywgd2hhdCB3ZSB3YW50IGlzIGl0cyBjb250ZW50IGFzXG4gIC8vIGEgZG9jdW1lbnRGcmFnbWVudCAoZm9yIGZyYWdtZW50IGluc3RhbmNlcylcbiAgaWYgKGlzVGVtcGxhdGUoZWwpKSB7XG4gICAgZWwgPSBwYXJzZVRlbXBsYXRlKGVsKTtcbiAgfVxuICBpZiAob3B0aW9ucykge1xuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCAmJiAhb3B0aW9ucy50ZW1wbGF0ZSkge1xuICAgICAgb3B0aW9ucy50ZW1wbGF0ZSA9ICc8c2xvdD48L3Nsb3Q+JztcbiAgICB9XG4gICAgaWYgKG9wdGlvbnMudGVtcGxhdGUpIHtcbiAgICAgIG9wdGlvbnMuX2NvbnRlbnQgPSBleHRyYWN0Q29udGVudChlbCk7XG4gICAgICBlbCA9IHRyYW5zY2x1ZGVUZW1wbGF0ZShlbCwgb3B0aW9ucyk7XG4gICAgfVxuICB9XG4gIGlmIChpc0ZyYWdtZW50KGVsKSkge1xuICAgIC8vIGFuY2hvcnMgZm9yIGZyYWdtZW50IGluc3RhbmNlXG4gICAgLy8gcGFzc2luZyBpbiBgcGVyc2lzdDogdHJ1ZWAgdG8gYXZvaWQgdGhlbSBiZWluZ1xuICAgIC8vIGRpc2NhcmRlZCBieSBJRSBkdXJpbmcgdGVtcGxhdGUgY2xvbmluZ1xuICAgIHByZXBlbmQoY3JlYXRlQW5jaG9yKCd2LXN0YXJ0JywgdHJ1ZSksIGVsKTtcbiAgICBlbC5hcHBlbmRDaGlsZChjcmVhdGVBbmNob3IoJ3YtZW5kJywgdHJ1ZSkpO1xuICB9XG4gIHJldHVybiBlbDtcbn1cblxuLyoqXG4gKiBQcm9jZXNzIHRoZSB0ZW1wbGF0ZSBvcHRpb24uXG4gKiBJZiB0aGUgcmVwbGFjZSBvcHRpb24gaXMgdHJ1ZSB0aGlzIHdpbGwgc3dhcCB0aGUgJGVsLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gKiBAcmV0dXJuIHtFbGVtZW50fERvY3VtZW50RnJhZ21lbnR9XG4gKi9cblxuZnVuY3Rpb24gdHJhbnNjbHVkZVRlbXBsYXRlKGVsLCBvcHRpb25zKSB7XG4gIHZhciB0ZW1wbGF0ZSA9IG9wdGlvbnMudGVtcGxhdGU7XG4gIHZhciBmcmFnID0gcGFyc2VUZW1wbGF0ZSh0ZW1wbGF0ZSwgdHJ1ZSk7XG4gIGlmIChmcmFnKSB7XG4gICAgdmFyIHJlcGxhY2VyID0gZnJhZy5maXJzdENoaWxkO1xuICAgIHZhciB0YWcgPSByZXBsYWNlci50YWdOYW1lICYmIHJlcGxhY2VyLnRhZ05hbWUudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAob3B0aW9ucy5yZXBsYWNlKSB7XG4gICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgIGlmIChlbCA9PT0gZG9jdW1lbnQuYm9keSkge1xuICAgICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ1lvdSBhcmUgbW91bnRpbmcgYW4gaW5zdGFuY2Ugd2l0aCBhIHRlbXBsYXRlIHRvICcgKyAnPGJvZHk+LiBUaGlzIHdpbGwgcmVwbGFjZSA8Ym9keT4gZW50aXJlbHkuIFlvdSAnICsgJ3Nob3VsZCBwcm9iYWJseSB1c2UgYHJlcGxhY2U6IGZhbHNlYCBoZXJlLicpO1xuICAgICAgfVxuICAgICAgLy8gdGhlcmUgYXJlIG1hbnkgY2FzZXMgd2hlcmUgdGhlIGluc3RhbmNlIG11c3RcbiAgICAgIC8vIGJlY29tZSBhIGZyYWdtZW50IGluc3RhbmNlOiBiYXNpY2FsbHkgYW55dGhpbmcgdGhhdFxuICAgICAgLy8gY2FuIGNyZWF0ZSBtb3JlIHRoYW4gMSByb290IG5vZGVzLlxuICAgICAgaWYgKFxuICAgICAgLy8gbXVsdGktY2hpbGRyZW4gdGVtcGxhdGVcbiAgICAgIGZyYWcuY2hpbGROb2Rlcy5sZW5ndGggPiAxIHx8XG4gICAgICAvLyBub24tZWxlbWVudCB0ZW1wbGF0ZVxuICAgICAgcmVwbGFjZXIubm9kZVR5cGUgIT09IDEgfHxcbiAgICAgIC8vIHNpbmdsZSBuZXN0ZWQgY29tcG9uZW50XG4gICAgICB0YWcgPT09ICdjb21wb25lbnQnIHx8IHJlc29sdmVBc3NldChvcHRpb25zLCAnY29tcG9uZW50cycsIHRhZykgfHwgaGFzQmluZEF0dHIocmVwbGFjZXIsICdpcycpIHx8XG4gICAgICAvLyBlbGVtZW50IGRpcmVjdGl2ZVxuICAgICAgcmVzb2x2ZUFzc2V0KG9wdGlvbnMsICdlbGVtZW50RGlyZWN0aXZlcycsIHRhZykgfHxcbiAgICAgIC8vIGZvciBibG9ja1xuICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWZvcicpIHx8XG4gICAgICAvLyBpZiBibG9ja1xuICAgICAgcmVwbGFjZXIuaGFzQXR0cmlidXRlKCd2LWlmJykpIHtcbiAgICAgICAgcmV0dXJuIGZyYWc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvcHRpb25zLl9yZXBsYWNlckF0dHJzID0gZXh0cmFjdEF0dHJzKHJlcGxhY2VyKTtcbiAgICAgICAgbWVyZ2VBdHRycyhlbCwgcmVwbGFjZXIpO1xuICAgICAgICByZXR1cm4gcmVwbGFjZXI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVsLmFwcGVuZENoaWxkKGZyYWcpO1xuICAgICAgcmV0dXJuIGVsO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICBwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIHdhcm4oJ0ludmFsaWQgdGVtcGxhdGUgb3B0aW9uOiAnICsgdGVtcGxhdGUpO1xuICB9XG59XG5cbi8qKlxuICogSGVscGVyIHRvIGV4dHJhY3QgYSBjb21wb25lbnQgY29udGFpbmVyJ3MgYXR0cmlidXRlc1xuICogaW50byBhIHBsYWluIG9iamVjdCBhcnJheS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gKiBAcmV0dXJuIHtBcnJheX1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0QXR0cnMoZWwpIHtcbiAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGVsLmhhc0F0dHJpYnV0ZXMoKSkge1xuICAgIHJldHVybiB0b0FycmF5KGVsLmF0dHJpYnV0ZXMpO1xuICB9XG59XG5cbi8qKlxuICogTWVyZ2UgdGhlIGF0dHJpYnV0ZXMgb2YgdHdvIGVsZW1lbnRzLCBhbmQgbWFrZSBzdXJlXG4gKiB0aGUgY2xhc3MgbmFtZXMgYXJlIG1lcmdlZCBwcm9wZXJseS5cbiAqXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGZyb21cbiAqIEBwYXJhbSB7RWxlbWVudH0gdG9cbiAqL1xuXG5mdW5jdGlvbiBtZXJnZUF0dHJzKGZyb20sIHRvKSB7XG4gIHZhciBhdHRycyA9IGZyb20uYXR0cmlidXRlcztcbiAgdmFyIGkgPSBhdHRycy5sZW5ndGg7XG4gIHZhciBuYW1lLCB2YWx1ZTtcbiAgd2hpbGUgKGktLSkge1xuICAgIG5hbWUgPSBhdHRyc1tpXS5uYW1lO1xuICAgIHZhbHVlID0gYXR0cnNbaV0udmFsdWU7XG4gICAgaWYgKCF0by5oYXNBdHRyaWJ1dGUobmFtZSkgJiYgIXNwZWNpYWxDaGFyUkUudGVzdChuYW1lKSkge1xuICAgICAgdG8uc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICB9IGVsc2UgaWYgKG5hbWUgPT09ICdjbGFzcycgJiYgIXBhcnNlVGV4dCh2YWx1ZSkgJiYgKHZhbHVlID0gdmFsdWUudHJpbSgpKSkge1xuICAgICAgdmFsdWUuc3BsaXQoL1xccysvKS5mb3JFYWNoKGZ1bmN0aW9uIChjbHMpIHtcbiAgICAgICAgYWRkQ2xhc3ModG8sIGNscyk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBTY2FuIGFuZCBkZXRlcm1pbmUgc2xvdCBjb250ZW50IGRpc3RyaWJ1dGlvbi5cbiAqIFdlIGRvIHRoaXMgZHVyaW5nIHRyYW5zY2x1c2lvbiBpbnN0ZWFkIGF0IGNvbXBpbGUgdGltZSBzbyB0aGF0XG4gKiB0aGUgZGlzdHJpYnV0aW9uIGlzIGRlY291cGxlZCBmcm9tIHRoZSBjb21waWxhdGlvbiBvcmRlciBvZlxuICogdGhlIHNsb3RzLlxuICpcbiAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSB0ZW1wbGF0ZVxuICogQHBhcmFtIHtFbGVtZW50fSBjb250ZW50XG4gKiBAcGFyYW0ge1Z1ZX0gdm1cbiAqL1xuXG5mdW5jdGlvbiByZXNvbHZlU2xvdHModm0sIGNvbnRlbnQpIHtcbiAgaWYgKCFjb250ZW50KSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBjb250ZW50cyA9IHZtLl9zbG90Q29udGVudHMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuICB2YXIgZWwsIG5hbWU7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gY29udGVudC5jaGlsZHJlbi5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICBlbCA9IGNvbnRlbnQuY2hpbGRyZW5baV07XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tY29uZC1hc3NpZ24gKi9cbiAgICBpZiAobmFtZSA9IGVsLmdldEF0dHJpYnV0ZSgnc2xvdCcpKSB7XG4gICAgICAoY29udGVudHNbbmFtZV0gfHwgKGNvbnRlbnRzW25hbWVdID0gW10pKS5wdXNoKGVsKTtcbiAgICB9XG4gICAgLyogZXNsaW50LWVuYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuICAgIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGdldEJpbmRBdHRyKGVsLCAnc2xvdCcpKSB7XG4gICAgICB3YXJuKCdUaGUgXCJzbG90XCIgYXR0cmlidXRlIG11c3QgYmUgc3RhdGljLicsIHZtLiRwYXJlbnQpO1xuICAgIH1cbiAgfVxuICBmb3IgKG5hbWUgaW4gY29udGVudHMpIHtcbiAgICBjb250ZW50c1tuYW1lXSA9IGV4dHJhY3RGcmFnbWVudChjb250ZW50c1tuYW1lXSwgY29udGVudCk7XG4gIH1cbiAgaWYgKGNvbnRlbnQuaGFzQ2hpbGROb2RlcygpKSB7XG4gICAgdmFyIG5vZGVzID0gY29udGVudC5jaGlsZE5vZGVzO1xuICAgIGlmIChub2Rlcy5sZW5ndGggPT09IDEgJiYgbm9kZXNbMF0ubm9kZVR5cGUgPT09IDMgJiYgIW5vZGVzWzBdLmRhdGEudHJpbSgpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnRlbnRzWydkZWZhdWx0J10gPSBleHRyYWN0RnJhZ21lbnQoY29udGVudC5jaGlsZE5vZGVzLCBjb250ZW50KTtcbiAgfVxufVxuXG4vKipcbiAqIEV4dHJhY3QgcXVhbGlmaWVkIGNvbnRlbnQgbm9kZXMgZnJvbSBhIG5vZGUgbGlzdC5cbiAqXG4gKiBAcGFyYW0ge05vZGVMaXN0fSBub2Rlc1xuICogQHJldHVybiB7RG9jdW1lbnRGcmFnbWVudH1cbiAqL1xuXG5mdW5jdGlvbiBleHRyYWN0RnJhZ21lbnQobm9kZXMsIHBhcmVudCkge1xuICB2YXIgZnJhZyA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcbiAgbm9kZXMgPSB0b0FycmF5KG5vZGVzKTtcbiAgZm9yICh2YXIgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICB2YXIgbm9kZSA9IG5vZGVzW2ldO1xuICAgIGlmIChpc1RlbXBsYXRlKG5vZGUpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1pZicpICYmICFub2RlLmhhc0F0dHJpYnV0ZSgndi1mb3InKSkge1xuICAgICAgcGFyZW50LnJlbW92ZUNoaWxkKG5vZGUpO1xuICAgICAgbm9kZSA9IHBhcnNlVGVtcGxhdGUobm9kZSwgdHJ1ZSk7XG4gICAgfVxuICAgIGZyYWcuYXBwZW5kQ2hpbGQobm9kZSk7XG4gIH1cbiAgcmV0dXJuIGZyYWc7XG59XG5cblxuXG52YXIgY29tcGlsZXIgPSBPYmplY3QuZnJlZXplKHtcblx0Y29tcGlsZTogY29tcGlsZSxcblx0Y29tcGlsZUFuZExpbmtQcm9wczogY29tcGlsZUFuZExpbmtQcm9wcyxcblx0Y29tcGlsZVJvb3Q6IGNvbXBpbGVSb290LFxuXHR0cmFuc2NsdWRlOiB0cmFuc2NsdWRlLFxuXHRyZXNvbHZlU2xvdHM6IHJlc29sdmVTbG90c1xufSk7XG5cbmZ1bmN0aW9uIHN0YXRlTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogQWNjZXNzb3IgZm9yIGAkZGF0YWAgcHJvcGVydHksIHNpbmNlIHNldHRpbmcgJGRhdGFcbiAgICogcmVxdWlyZXMgb2JzZXJ2aW5nIHRoZSBuZXcgb2JqZWN0IGFuZCB1cGRhdGluZ1xuICAgKiBwcm94aWVkIHByb3BlcnRpZXMuXG4gICAqL1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShWdWUucHJvdG90eXBlLCAnJGRhdGEnLCB7XG4gICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgICB9LFxuICAgIHNldDogZnVuY3Rpb24gc2V0KG5ld0RhdGEpIHtcbiAgICAgIGlmIChuZXdEYXRhICE9PSB0aGlzLl9kYXRhKSB7XG4gICAgICAgIHRoaXMuX3NldERhdGEobmV3RGF0YSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcblxuICAvKipcbiAgICogU2V0dXAgdGhlIHNjb3BlIG9mIGFuIGluc3RhbmNlLCB3aGljaCBjb250YWluczpcbiAgICogLSBvYnNlcnZlZCBkYXRhXG4gICAqIC0gY29tcHV0ZWQgcHJvcGVydGllc1xuICAgKiAtIHVzZXIgbWV0aG9kc1xuICAgKiAtIG1ldGEgcHJvcGVydGllc1xuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9pbml0U3RhdGUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdGhpcy5faW5pdFByb3BzKCk7XG4gICAgdGhpcy5faW5pdE1ldGEoKTtcbiAgICB0aGlzLl9pbml0TWV0aG9kcygpO1xuICAgIHRoaXMuX2luaXREYXRhKCk7XG4gICAgdGhpcy5faW5pdENvbXB1dGVkKCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgcHJvcHMuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRQcm9wcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG4gICAgdmFyIGVsID0gb3B0aW9ucy5lbDtcbiAgICB2YXIgcHJvcHMgPSBvcHRpb25zLnByb3BzO1xuICAgIGlmIChwcm9wcyAmJiAhZWwpIHtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignUHJvcHMgd2lsbCBub3QgYmUgY29tcGlsZWQgaWYgbm8gYGVsYCBvcHRpb24gaXMgJyArICdwcm92aWRlZCBhdCBpbnN0YW50aWF0aW9uLicsIHRoaXMpO1xuICAgIH1cbiAgICAvLyBtYWtlIHN1cmUgdG8gY29udmVydCBzdHJpbmcgc2VsZWN0b3JzIGludG8gZWxlbWVudCBub3dcbiAgICBlbCA9IG9wdGlvbnMuZWwgPSBxdWVyeShlbCk7XG4gICAgdGhpcy5fcHJvcHNVbmxpbmtGbiA9IGVsICYmIGVsLm5vZGVUeXBlID09PSAxICYmIHByb3BzXG4gICAgLy8gcHJvcHMgbXVzdCBiZSBsaW5rZWQgaW4gcHJvcGVyIHNjb3BlIGlmIGluc2lkZSB2LWZvclxuICAgID8gY29tcGlsZUFuZExpbmtQcm9wcyh0aGlzLCBlbCwgcHJvcHMsIHRoaXMuX3Njb3BlKSA6IG51bGw7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgdGhlIGRhdGEuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXREYXRhID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBkYXRhRm4gPSB0aGlzLiRvcHRpb25zLmRhdGE7XG4gICAgdmFyIGRhdGEgPSB0aGlzLl9kYXRhID0gZGF0YUZuID8gZGF0YUZuKCkgOiB7fTtcbiAgICBpZiAoIWlzUGxhaW5PYmplY3QoZGF0YSkpIHtcbiAgICAgIGRhdGEgPSB7fTtcbiAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignZGF0YSBmdW5jdGlvbnMgc2hvdWxkIHJldHVybiBhbiBvYmplY3QuJywgdGhpcyk7XG4gICAgfVxuICAgIHZhciBwcm9wcyA9IHRoaXMuX3Byb3BzO1xuICAgIC8vIHByb3h5IGRhdGEgb24gaW5zdGFuY2VcbiAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKGRhdGEpO1xuICAgIHZhciBpLCBrZXk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICAvLyB0aGVyZSBhcmUgdHdvIHNjZW5hcmlvcyB3aGVyZSB3ZSBjYW4gcHJveHkgYSBkYXRhIGtleTpcbiAgICAgIC8vIDEuIGl0J3Mgbm90IGFscmVhZHkgZGVmaW5lZCBhcyBhIHByb3BcbiAgICAgIC8vIDIuIGl0J3MgcHJvdmlkZWQgdmlhIGEgaW5zdGFudGlhdGlvbiBvcHRpb24gQU5EIHRoZXJlIGFyZSBub1xuICAgICAgLy8gICAgdGVtcGxhdGUgcHJvcCBwcmVzZW50XG4gICAgICBpZiAoIXByb3BzIHx8ICFoYXNPd24ocHJvcHMsIGtleSkpIHtcbiAgICAgICAgdGhpcy5fcHJveHkoa2V5KTtcbiAgICAgIH0gZWxzZSBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgICB3YXJuKCdEYXRhIGZpZWxkIFwiJyArIGtleSArICdcIiBpcyBhbHJlYWR5IGRlZmluZWQgJyArICdhcyBhIHByb3AuIFRvIHByb3ZpZGUgZGVmYXVsdCB2YWx1ZSBmb3IgYSBwcm9wLCB1c2UgdGhlIFwiZGVmYXVsdFwiICcgKyAncHJvcCBvcHRpb247IGlmIHlvdSB3YW50IHRvIHBhc3MgcHJvcCB2YWx1ZXMgdG8gYW4gaW5zdGFudGlhdGlvbiAnICsgJ2NhbGwsIHVzZSB0aGUgXCJwcm9wc0RhdGFcIiBvcHRpb24uJywgdGhpcyk7XG4gICAgICB9XG4gICAgfVxuICAgIC8vIG9ic2VydmUgZGF0YVxuICAgIG9ic2VydmUoZGF0YSwgdGhpcyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFN3YXAgdGhlIGluc3RhbmNlJ3MgJGRhdGEuIENhbGxlZCBpbiAkZGF0YSdzIHNldHRlci5cbiAgICpcbiAgICogQHBhcmFtIHtPYmplY3R9IG5ld0RhdGFcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fc2V0RGF0YSA9IGZ1bmN0aW9uIChuZXdEYXRhKSB7XG4gICAgbmV3RGF0YSA9IG5ld0RhdGEgfHwge307XG4gICAgdmFyIG9sZERhdGEgPSB0aGlzLl9kYXRhO1xuICAgIHRoaXMuX2RhdGEgPSBuZXdEYXRhO1xuICAgIHZhciBrZXlzLCBrZXksIGk7XG4gICAgLy8gdW5wcm94eSBrZXlzIG5vdCBwcmVzZW50IGluIG5ldyBkYXRhXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKG9sZERhdGEpO1xuICAgIGkgPSBrZXlzLmxlbmd0aDtcbiAgICB3aGlsZSAoaS0tKSB7XG4gICAgICBrZXkgPSBrZXlzW2ldO1xuICAgICAgaWYgKCEoa2V5IGluIG5ld0RhdGEpKSB7XG4gICAgICAgIHRoaXMuX3VucHJveHkoa2V5KTtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gcHJveHkga2V5cyBub3QgYWxyZWFkeSBwcm94aWVkLFxuICAgIC8vIGFuZCB0cmlnZ2VyIGNoYW5nZSBmb3IgY2hhbmdlZCB2YWx1ZXNcbiAgICBrZXlzID0gT2JqZWN0LmtleXMobmV3RGF0YSk7XG4gICAgaSA9IGtleXMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGtleSA9IGtleXNbaV07XG4gICAgICBpZiAoIWhhc093bih0aGlzLCBrZXkpKSB7XG4gICAgICAgIC8vIG5ldyBwcm9wZXJ0eVxuICAgICAgICB0aGlzLl9wcm94eShrZXkpO1xuICAgICAgfVxuICAgIH1cbiAgICBvbGREYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcbiAgICBvYnNlcnZlKG5ld0RhdGEsIHRoaXMpO1xuICAgIHRoaXMuX2RpZ2VzdCgpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcm94eSBhIHByb3BlcnR5LCBzbyB0aGF0XG4gICAqIHZtLnByb3AgPT09IHZtLl9kYXRhLnByb3BcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGtleVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9wcm94eSA9IGZ1bmN0aW9uIChrZXkpIHtcbiAgICBpZiAoIWlzUmVzZXJ2ZWQoa2V5KSkge1xuICAgICAgLy8gbmVlZCB0byBzdG9yZSByZWYgdG8gc2VsZiBoZXJlXG4gICAgICAvLyBiZWNhdXNlIHRoZXNlIGdldHRlci9zZXR0ZXJzIG1pZ2h0XG4gICAgICAvLyBiZSBjYWxsZWQgYnkgY2hpbGQgc2NvcGVzIHZpYVxuICAgICAgLy8gcHJvdG90eXBlIGluaGVyaXRhbmNlLlxuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNlbGYsIGtleSwge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIGdldDogZnVuY3Rpb24gcHJveHlHZXR0ZXIoKSB7XG4gICAgICAgICAgcmV0dXJuIHNlbGYuX2RhdGFba2V5XTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBwcm94eVNldHRlcih2YWwpIHtcbiAgICAgICAgICBzZWxmLl9kYXRhW2tleV0gPSB2YWw7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVW5wcm94eSBhIHByb3BlcnR5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX3VucHJveHkgPSBmdW5jdGlvbiAoa2V5KSB7XG4gICAgaWYgKCFpc1Jlc2VydmVkKGtleSkpIHtcbiAgICAgIGRlbGV0ZSB0aGlzW2tleV07XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBGb3JjZSB1cGRhdGUgb24gZXZlcnkgd2F0Y2hlciBpbiBzY29wZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fZGlnZXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB0aGlzLl93YXRjaGVyc1tpXS51cGRhdGUodHJ1ZSk7IC8vIHNoYWxsb3cgdXBkYXRlc1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogU2V0dXAgY29tcHV0ZWQgcHJvcGVydGllcy4gVGhleSBhcmUgZXNzZW50aWFsbHlcbiAgICogc3BlY2lhbCBnZXR0ZXIvc2V0dGVyc1xuICAgKi9cblxuICBmdW5jdGlvbiBub29wKCkge31cbiAgVnVlLnByb3RvdHlwZS5faW5pdENvbXB1dGVkID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjb21wdXRlZCA9IHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQ7XG4gICAgaWYgKGNvbXB1dGVkKSB7XG4gICAgICBmb3IgKHZhciBrZXkgaW4gY29tcHV0ZWQpIHtcbiAgICAgICAgdmFyIHVzZXJEZWYgPSBjb21wdXRlZFtrZXldO1xuICAgICAgICB2YXIgZGVmID0ge1xuICAgICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgIH07XG4gICAgICAgIGlmICh0eXBlb2YgdXNlckRlZiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIGRlZi5nZXQgPSBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZiwgdGhpcyk7XG4gICAgICAgICAgZGVmLnNldCA9IG5vb3A7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVmLmdldCA9IHVzZXJEZWYuZ2V0ID8gdXNlckRlZi5jYWNoZSAhPT0gZmFsc2UgPyBtYWtlQ29tcHV0ZWRHZXR0ZXIodXNlckRlZi5nZXQsIHRoaXMpIDogYmluZCh1c2VyRGVmLmdldCwgdGhpcykgOiBub29wO1xuICAgICAgICAgIGRlZi5zZXQgPSB1c2VyRGVmLnNldCA/IGJpbmQodXNlckRlZi5zZXQsIHRoaXMpIDogbm9vcDtcbiAgICAgICAgfVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywga2V5LCBkZWYpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBtYWtlQ29tcHV0ZWRHZXR0ZXIoZ2V0dGVyLCBvd25lcikge1xuICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIob3duZXIsIGdldHRlciwgbnVsbCwge1xuICAgICAgbGF6eTogdHJ1ZVxuICAgIH0pO1xuICAgIHJldHVybiBmdW5jdGlvbiBjb21wdXRlZEdldHRlcigpIHtcbiAgICAgIGlmICh3YXRjaGVyLmRpcnR5KSB7XG4gICAgICAgIHdhdGNoZXIuZXZhbHVhdGUoKTtcbiAgICAgIH1cbiAgICAgIGlmIChEZXAudGFyZ2V0KSB7XG4gICAgICAgIHdhdGNoZXIuZGVwZW5kKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gd2F0Y2hlci52YWx1ZTtcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFNldHVwIGluc3RhbmNlIG1ldGhvZHMuIE1ldGhvZHMgbXVzdCBiZSBib3VuZCB0byB0aGVcbiAgICogaW5zdGFuY2Ugc2luY2UgdGhleSBtaWdodCBiZSBwYXNzZWQgZG93biBhcyBhIHByb3AgdG9cbiAgICogY2hpbGQgY29tcG9uZW50cy5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGhvZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1ldGhvZHMgPSB0aGlzLiRvcHRpb25zLm1ldGhvZHM7XG4gICAgaWYgKG1ldGhvZHMpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRob2RzKSB7XG4gICAgICAgIHRoaXNba2V5XSA9IGJpbmQobWV0aG9kc1trZXldLCB0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgbWV0YSBpbmZvcm1hdGlvbiBsaWtlICRpbmRleCwgJGtleSAmICR2YWx1ZS5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdE1ldGEgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1ldGFzID0gdGhpcy4kb3B0aW9ucy5fbWV0YTtcbiAgICBpZiAobWV0YXMpIHtcbiAgICAgIGZvciAodmFyIGtleSBpbiBtZXRhcykge1xuICAgICAgICBkZWZpbmVSZWFjdGl2ZSh0aGlzLCBrZXksIG1ldGFzW2tleV0pO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxudmFyIGV2ZW50UkUgPSAvXnYtb246fF5ALztcblxuZnVuY3Rpb24gZXZlbnRzTWl4aW4gKFZ1ZSkge1xuICAvKipcbiAgICogU2V0dXAgdGhlIGluc3RhbmNlJ3Mgb3B0aW9uIGV2ZW50cyAmIHdhdGNoZXJzLlxuICAgKiBJZiB0aGUgdmFsdWUgaXMgYSBzdHJpbmcsIHdlIHB1bGwgaXQgZnJvbSB0aGVcbiAgICogaW5zdGFuY2UncyBtZXRob2RzIGJ5IG5hbWUuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2luaXRFdmVudHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG9wdGlvbnMgPSB0aGlzLiRvcHRpb25zO1xuICAgIGlmIChvcHRpb25zLl9hc0NvbXBvbmVudCkge1xuICAgICAgcmVnaXN0ZXJDb21wb25lbnRFdmVudHModGhpcywgb3B0aW9ucy5lbCk7XG4gICAgfVxuICAgIHJlZ2lzdGVyQ2FsbGJhY2tzKHRoaXMsICckb24nLCBvcHRpb25zLmV2ZW50cyk7XG4gICAgcmVnaXN0ZXJDYWxsYmFja3ModGhpcywgJyR3YXRjaCcsIG9wdGlvbnMud2F0Y2gpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZWdpc3RlciB2LW9uIGV2ZW50cyBvbiBhIGNoaWxkIGNvbXBvbmVudFxuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gdm1cbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiByZWdpc3RlckNvbXBvbmVudEV2ZW50cyh2bSwgZWwpIHtcbiAgICB2YXIgYXR0cnMgPSBlbC5hdHRyaWJ1dGVzO1xuICAgIHZhciBuYW1lLCB2YWx1ZSwgaGFuZGxlcjtcbiAgICBmb3IgKHZhciBpID0gMCwgbCA9IGF0dHJzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgbmFtZSA9IGF0dHJzW2ldLm5hbWU7XG4gICAgICBpZiAoZXZlbnRSRS50ZXN0KG5hbWUpKSB7XG4gICAgICAgIG5hbWUgPSBuYW1lLnJlcGxhY2UoZXZlbnRSRSwgJycpO1xuICAgICAgICAvLyBmb3JjZSB0aGUgZXhwcmVzc2lvbiBpbnRvIGEgc3RhdGVtZW50IHNvIHRoYXRcbiAgICAgICAgLy8gaXQgYWx3YXlzIGR5bmFtaWNhbGx5IHJlc29sdmVzIHRoZSBtZXRob2QgdG8gY2FsbCAoIzI2NzApXG4gICAgICAgIC8vIGtpbmRhIHVnbHkgaGFjaywgYnV0IGRvZXMgdGhlIGpvYi5cbiAgICAgICAgdmFsdWUgPSBhdHRyc1tpXS52YWx1ZTtcbiAgICAgICAgaWYgKGlzU2ltcGxlUGF0aCh2YWx1ZSkpIHtcbiAgICAgICAgICB2YWx1ZSArPSAnLmFwcGx5KHRoaXMsICRhcmd1bWVudHMpJztcbiAgICAgICAgfVxuICAgICAgICBoYW5kbGVyID0gKHZtLl9zY29wZSB8fCB2bS5fY29udGV4dCkuJGV2YWwodmFsdWUsIHRydWUpO1xuICAgICAgICBoYW5kbGVyLl9mcm9tUGFyZW50ID0gdHJ1ZTtcbiAgICAgICAgdm0uJG9uKG5hbWUucmVwbGFjZShldmVudFJFKSwgaGFuZGxlcik7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGNhbGxiYWNrcyBmb3Igb3B0aW9uIGV2ZW50cyBhbmQgd2F0Y2hlcnMuXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBoYXNoXG4gICAqL1xuXG4gIGZ1bmN0aW9uIHJlZ2lzdGVyQ2FsbGJhY2tzKHZtLCBhY3Rpb24sIGhhc2gpIHtcbiAgICBpZiAoIWhhc2gpIHJldHVybjtcbiAgICB2YXIgaGFuZGxlcnMsIGtleSwgaSwgajtcbiAgICBmb3IgKGtleSBpbiBoYXNoKSB7XG4gICAgICBoYW5kbGVycyA9IGhhc2hba2V5XTtcbiAgICAgIGlmIChpc0FycmF5KGhhbmRsZXJzKSkge1xuICAgICAgICBmb3IgKGkgPSAwLCBqID0gaGFuZGxlcnMubGVuZ3RoOyBpIDwgajsgaSsrKSB7XG4gICAgICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyc1tpXSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJlZ2lzdGVyKHZtLCBhY3Rpb24sIGtleSwgaGFuZGxlcnMpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIZWxwZXIgdG8gcmVnaXN0ZXIgYW4gZXZlbnQvd2F0Y2ggY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge1N0cmluZ30gYWN0aW9uXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICogQHBhcmFtIHtGdW5jdGlvbnxTdHJpbmd8T2JqZWN0fSBoYW5kbGVyXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLCBvcHRpb25zKSB7XG4gICAgdmFyIHR5cGUgPSB0eXBlb2YgaGFuZGxlcjtcbiAgICBpZiAodHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdm1bYWN0aW9uXShrZXksIGhhbmRsZXIsIG9wdGlvbnMpO1xuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIHZhciBtZXRob2RzID0gdm0uJG9wdGlvbnMubWV0aG9kcztcbiAgICAgIHZhciBtZXRob2QgPSBtZXRob2RzICYmIG1ldGhvZHNbaGFuZGxlcl07XG4gICAgICBpZiAobWV0aG9kKSB7XG4gICAgICAgIHZtW2FjdGlvbl0oa2V5LCBtZXRob2QsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCdVbmtub3duIG1ldGhvZDogXCInICsgaGFuZGxlciArICdcIiB3aGVuICcgKyAncmVnaXN0ZXJpbmcgY2FsbGJhY2sgZm9yICcgKyBhY3Rpb24gKyAnOiBcIicgKyBrZXkgKyAnXCIuJywgdm0pO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaGFuZGxlciAmJiB0eXBlID09PSAnb2JqZWN0Jykge1xuICAgICAgcmVnaXN0ZXIodm0sIGFjdGlvbiwga2V5LCBoYW5kbGVyLmhhbmRsZXIsIGhhbmRsZXIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXR1cCByZWN1cnNpdmUgYXR0YWNoZWQvZGV0YWNoZWQgY2FsbHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdERPTUhvb2tzID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuJG9uKCdob29rOmF0dGFjaGVkJywgb25BdHRhY2hlZCk7XG4gICAgdGhpcy4kb24oJ2hvb2s6ZGV0YWNoZWQnLCBvbkRldGFjaGVkKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2FsbGJhY2sgdG8gcmVjdXJzaXZlbHkgY2FsbCBhdHRhY2hlZCBob29rIG9uIGNoaWxkcmVuXG4gICAqL1xuXG4gIGZ1bmN0aW9uIG9uQXR0YWNoZWQoKSB7XG4gICAgaWYgKCF0aGlzLl9pc0F0dGFjaGVkKSB7XG4gICAgICB0aGlzLl9pc0F0dGFjaGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuJGNoaWxkcmVuLmZvckVhY2goY2FsbEF0dGFjaCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEl0ZXJhdG9yIHRvIGNhbGwgYXR0YWNoZWQgaG9va1xuICAgKlxuICAgKiBAcGFyYW0ge1Z1ZX0gY2hpbGRcbiAgICovXG5cbiAgZnVuY3Rpb24gY2FsbEF0dGFjaChjaGlsZCkge1xuICAgIGlmICghY2hpbGQuX2lzQXR0YWNoZWQgJiYgaW5Eb2MoY2hpbGQuJGVsKSkge1xuICAgICAgY2hpbGQuX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDYWxsYmFjayB0byByZWN1cnNpdmVseSBjYWxsIGRldGFjaGVkIGhvb2sgb24gY2hpbGRyZW5cbiAgICovXG5cbiAgZnVuY3Rpb24gb25EZXRhY2hlZCgpIHtcbiAgICBpZiAodGhpcy5faXNBdHRhY2hlZCkge1xuICAgICAgdGhpcy5faXNBdHRhY2hlZCA9IGZhbHNlO1xuICAgICAgdGhpcy4kY2hpbGRyZW4uZm9yRWFjaChjYWxsRGV0YWNoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSXRlcmF0b3IgdG8gY2FsbCBkZXRhY2hlZCBob29rXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSBjaGlsZFxuICAgKi9cblxuICBmdW5jdGlvbiBjYWxsRGV0YWNoKGNoaWxkKSB7XG4gICAgaWYgKGNoaWxkLl9pc0F0dGFjaGVkICYmICFpbkRvYyhjaGlsZC4kZWwpKSB7XG4gICAgICBjaGlsZC5fY2FsbEhvb2soJ2RldGFjaGVkJyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYWxsIGhhbmRsZXJzIGZvciBhIGhvb2tcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGhvb2tcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fY2FsbEhvb2sgPSBmdW5jdGlvbiAoaG9vaykge1xuICAgIHRoaXMuJGVtaXQoJ3ByZS1ob29rOicgKyBob29rKTtcbiAgICB2YXIgaGFuZGxlcnMgPSB0aGlzLiRvcHRpb25zW2hvb2tdO1xuICAgIGlmIChoYW5kbGVycykge1xuICAgICAgZm9yICh2YXIgaSA9IDAsIGogPSBoYW5kbGVycy5sZW5ndGg7IGkgPCBqOyBpKyspIHtcbiAgICAgICAgaGFuZGxlcnNbaV0uY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy4kZW1pdCgnaG9vazonICsgaG9vayk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG5vb3AkMSgpIHt9XG5cbi8qKlxuICogQSBkaXJlY3RpdmUgbGlua3MgYSBET00gZWxlbWVudCB3aXRoIGEgcGllY2Ugb2YgZGF0YSxcbiAqIHdoaWNoIGlzIHRoZSByZXN1bHQgb2YgZXZhbHVhdGluZyBhbiBleHByZXNzaW9uLlxuICogSXQgcmVnaXN0ZXJzIGEgd2F0Y2hlciB3aXRoIHRoZSBleHByZXNzaW9uIGFuZCBjYWxsc1xuICogdGhlIERPTSB1cGRhdGUgZnVuY3Rpb24gd2hlbiBhIGNoYW5nZSBpcyB0cmlnZ2VyZWQuXG4gKlxuICogQHBhcmFtIHtPYmplY3R9IGRlc2NyaXB0b3JcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IG5hbWVcbiAqICAgICAgICAgICAgICAgICAtIHtPYmplY3R9IGRlZlxuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gZXhwcmVzc2lvblxuICogICAgICAgICAgICAgICAgIC0ge0FycmF5PE9iamVjdD59IFtmaWx0ZXJzXVxuICogICAgICAgICAgICAgICAgIC0ge09iamVjdH0gW21vZGlmaWVyc11cbiAqICAgICAgICAgICAgICAgICAtIHtCb29sZWFufSBsaXRlcmFsXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhdHRyXG4gKiAgICAgICAgICAgICAgICAgLSB7U3RyaW5nfSBhcmdcbiAqICAgICAgICAgICAgICAgICAtIHtTdHJpbmd9IHJhd1xuICogICAgICAgICAgICAgICAgIC0ge1N0cmluZ30gW3JlZl1cbiAqICAgICAgICAgICAgICAgICAtIHtBcnJheTxPYmplY3Q+fSBbaW50ZXJwXVxuICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IFtoYXNPbmVUaW1lXVxuICogQHBhcmFtIHtWdWV9IHZtXG4gKiBAcGFyYW0ge05vZGV9IGVsXG4gKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdIC0gdHJhbnNjbHVzaW9uIGhvc3QgY29tcG9uZW50XG4gKiBAcGFyYW0ge09iamVjdH0gW3Njb3BlXSAtIHYtZm9yIHNjb3BlXG4gKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuICogQGNvbnN0cnVjdG9yXG4gKi9cbmZ1bmN0aW9uIERpcmVjdGl2ZShkZXNjcmlwdG9yLCB2bSwgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gIHRoaXMudm0gPSB2bTtcbiAgdGhpcy5lbCA9IGVsO1xuICAvLyBjb3B5IGRlc2NyaXB0b3IgcHJvcGVydGllc1xuICB0aGlzLmRlc2NyaXB0b3IgPSBkZXNjcmlwdG9yO1xuICB0aGlzLm5hbWUgPSBkZXNjcmlwdG9yLm5hbWU7XG4gIHRoaXMuZXhwcmVzc2lvbiA9IGRlc2NyaXB0b3IuZXhwcmVzc2lvbjtcbiAgdGhpcy5hcmcgPSBkZXNjcmlwdG9yLmFyZztcbiAgdGhpcy5tb2RpZmllcnMgPSBkZXNjcmlwdG9yLm1vZGlmaWVycztcbiAgdGhpcy5maWx0ZXJzID0gZGVzY3JpcHRvci5maWx0ZXJzO1xuICB0aGlzLmxpdGVyYWwgPSB0aGlzLm1vZGlmaWVycyAmJiB0aGlzLm1vZGlmaWVycy5saXRlcmFsO1xuICAvLyBwcml2YXRlXG4gIHRoaXMuX2xvY2tlZCA9IGZhbHNlO1xuICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuICB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuICAvLyBsaW5rIGNvbnRleHRcbiAgdGhpcy5faG9zdCA9IGhvc3Q7XG4gIHRoaXMuX3Njb3BlID0gc2NvcGU7XG4gIHRoaXMuX2ZyYWcgPSBmcmFnO1xuICAvLyBzdG9yZSBkaXJlY3RpdmVzIG9uIG5vZGUgaW4gZGV2IG1vZGVcbiAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgdGhpcy5lbCkge1xuICAgIHRoaXMuZWwuX3Z1ZV9kaXJlY3RpdmVzID0gdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMgfHwgW107XG4gICAgdGhpcy5lbC5fdnVlX2RpcmVjdGl2ZXMucHVzaCh0aGlzKTtcbiAgfVxufVxuXG4vKipcbiAqIEluaXRpYWxpemUgdGhlIGRpcmVjdGl2ZSwgbWl4aW4gZGVmaW5pdGlvbiBwcm9wZXJ0aWVzLFxuICogc2V0dXAgdGhlIHdhdGNoZXIsIGNhbGwgZGVmaW5pdGlvbiBiaW5kKCkgYW5kIHVwZGF0ZSgpXG4gKiBpZiBwcmVzZW50LlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX2JpbmQgPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBuYW1lID0gdGhpcy5uYW1lO1xuICB2YXIgZGVzY3JpcHRvciA9IHRoaXMuZGVzY3JpcHRvcjtcblxuICAvLyByZW1vdmUgYXR0cmlidXRlXG4gIGlmICgobmFtZSAhPT0gJ2Nsb2FrJyB8fCB0aGlzLnZtLl9pc0NvbXBpbGVkKSAmJiB0aGlzLmVsICYmIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKSB7XG4gICAgdmFyIGF0dHIgPSBkZXNjcmlwdG9yLmF0dHIgfHwgJ3YtJyArIG5hbWU7XG4gICAgdGhpcy5lbC5yZW1vdmVBdHRyaWJ1dGUoYXR0cik7XG4gIH1cblxuICAvLyBjb3B5IGRlZiBwcm9wZXJ0aWVzXG4gIHZhciBkZWYgPSBkZXNjcmlwdG9yLmRlZjtcbiAgaWYgKHR5cGVvZiBkZWYgPT09ICdmdW5jdGlvbicpIHtcbiAgICB0aGlzLnVwZGF0ZSA9IGRlZjtcbiAgfSBlbHNlIHtcbiAgICBleHRlbmQodGhpcywgZGVmKTtcbiAgfVxuXG4gIC8vIHNldHVwIGRpcmVjdGl2ZSBwYXJhbXNcbiAgdGhpcy5fc2V0dXBQYXJhbXMoKTtcblxuICAvLyBpbml0aWFsIGJpbmRcbiAgaWYgKHRoaXMuYmluZCkge1xuICAgIHRoaXMuYmluZCgpO1xuICB9XG4gIHRoaXMuX2JvdW5kID0gdHJ1ZTtcblxuICBpZiAodGhpcy5saXRlcmFsKSB7XG4gICAgdGhpcy51cGRhdGUgJiYgdGhpcy51cGRhdGUoZGVzY3JpcHRvci5yYXcpO1xuICB9IGVsc2UgaWYgKCh0aGlzLmV4cHJlc3Npb24gfHwgdGhpcy5tb2RpZmllcnMpICYmICh0aGlzLnVwZGF0ZSB8fCB0aGlzLnR3b1dheSkgJiYgIXRoaXMuX2NoZWNrU3RhdGVtZW50KCkpIHtcbiAgICAvLyB3cmFwcGVkIHVwZGF0ZXIgZm9yIGNvbnRleHRcbiAgICB2YXIgZGlyID0gdGhpcztcbiAgICBpZiAodGhpcy51cGRhdGUpIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuICAgICAgICBpZiAoIWRpci5fbG9ja2VkKSB7XG4gICAgICAgICAgZGlyLnVwZGF0ZSh2YWwsIG9sZFZhbCk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX3VwZGF0ZSA9IG5vb3AkMTtcbiAgICB9XG4gICAgdmFyIHByZVByb2Nlc3MgPSB0aGlzLl9wcmVQcm9jZXNzID8gYmluZCh0aGlzLl9wcmVQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG4gICAgdmFyIHBvc3RQcm9jZXNzID0gdGhpcy5fcG9zdFByb2Nlc3MgPyBiaW5kKHRoaXMuX3Bvc3RQcm9jZXNzLCB0aGlzKSA6IG51bGw7XG4gICAgdmFyIHdhdGNoZXIgPSB0aGlzLl93YXRjaGVyID0gbmV3IFdhdGNoZXIodGhpcy52bSwgdGhpcy5leHByZXNzaW9uLCB0aGlzLl91cGRhdGUsIC8vIGNhbGxiYWNrXG4gICAge1xuICAgICAgZmlsdGVyczogdGhpcy5maWx0ZXJzLFxuICAgICAgdHdvV2F5OiB0aGlzLnR3b1dheSxcbiAgICAgIGRlZXA6IHRoaXMuZGVlcCxcbiAgICAgIHByZVByb2Nlc3M6IHByZVByb2Nlc3MsXG4gICAgICBwb3N0UHJvY2VzczogcG9zdFByb2Nlc3MsXG4gICAgICBzY29wZTogdGhpcy5fc2NvcGVcbiAgICB9KTtcbiAgICAvLyB2LW1vZGVsIHdpdGggaW5pdGFsIGlubGluZSB2YWx1ZSBuZWVkIHRvIHN5bmMgYmFjayB0b1xuICAgIC8vIG1vZGVsIGluc3RlYWQgb2YgdXBkYXRlIHRvIERPTSBvbiBpbml0LiBUaGV5IHdvdWxkXG4gICAgLy8gc2V0IHRoZSBhZnRlckJpbmQgaG9vayB0byBpbmRpY2F0ZSB0aGF0LlxuICAgIGlmICh0aGlzLmFmdGVyQmluZCkge1xuICAgICAgdGhpcy5hZnRlckJpbmQoKTtcbiAgICB9IGVsc2UgaWYgKHRoaXMudXBkYXRlKSB7XG4gICAgICB0aGlzLnVwZGF0ZSh3YXRjaGVyLnZhbHVlKTtcbiAgICB9XG4gIH1cbn07XG5cbi8qKlxuICogU2V0dXAgYWxsIHBhcmFtIGF0dHJpYnV0ZXMsIGUuZy4gdHJhY2stYnksXG4gKiB0cmFuc2l0aW9uLW1vZGUsIGV0Yy4uLlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1zID0gZnVuY3Rpb24gKCkge1xuICBpZiAoIXRoaXMucGFyYW1zKSB7XG4gICAgcmV0dXJuO1xuICB9XG4gIHZhciBwYXJhbXMgPSB0aGlzLnBhcmFtcztcbiAgLy8gc3dhcCB0aGUgcGFyYW1zIGFycmF5IHdpdGggYSBmcmVzaCBvYmplY3QuXG4gIHRoaXMucGFyYW1zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgdmFyIGkgPSBwYXJhbXMubGVuZ3RoO1xuICB2YXIga2V5LCB2YWwsIG1hcHBlZEtleTtcbiAgd2hpbGUgKGktLSkge1xuICAgIGtleSA9IGh5cGhlbmF0ZShwYXJhbXNbaV0pO1xuICAgIG1hcHBlZEtleSA9IGNhbWVsaXplKGtleSk7XG4gICAgdmFsID0gZ2V0QmluZEF0dHIodGhpcy5lbCwga2V5KTtcbiAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgIC8vIGR5bmFtaWNcbiAgICAgIHRoaXMuX3NldHVwUGFyYW1XYXRjaGVyKG1hcHBlZEtleSwgdmFsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gc3RhdGljXG4gICAgICB2YWwgPSBnZXRBdHRyKHRoaXMuZWwsIGtleSk7XG4gICAgICBpZiAodmFsICE9IG51bGwpIHtcbiAgICAgICAgdGhpcy5wYXJhbXNbbWFwcGVkS2V5XSA9IHZhbCA9PT0gJycgPyB0cnVlIDogdmFsO1xuICAgICAgfVxuICAgIH1cbiAgfVxufTtcblxuLyoqXG4gKiBTZXR1cCBhIHdhdGNoZXIgZm9yIGEgZHluYW1pYyBwYXJhbS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30ga2V5XG4gKiBAcGFyYW0ge1N0cmluZ30gZXhwcmVzc2lvblxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3NldHVwUGFyYW1XYXRjaGVyID0gZnVuY3Rpb24gKGtleSwgZXhwcmVzc2lvbikge1xuICB2YXIgc2VsZiA9IHRoaXM7XG4gIHZhciBjYWxsZWQgPSBmYWxzZTtcbiAgdmFyIHVud2F0Y2ggPSAodGhpcy5fc2NvcGUgfHwgdGhpcy52bSkuJHdhdGNoKGV4cHJlc3Npb24sIGZ1bmN0aW9uICh2YWwsIG9sZFZhbCkge1xuICAgIHNlbGYucGFyYW1zW2tleV0gPSB2YWw7XG4gICAgLy8gc2luY2Ugd2UgYXJlIGluIGltbWVkaWF0ZSBtb2RlLFxuICAgIC8vIG9ubHkgY2FsbCB0aGUgcGFyYW0gY2hhbmdlIGNhbGxiYWNrcyBpZiB0aGlzIGlzIG5vdCB0aGUgZmlyc3QgdXBkYXRlLlxuICAgIGlmIChjYWxsZWQpIHtcbiAgICAgIHZhciBjYiA9IHNlbGYucGFyYW1XYXRjaGVycyAmJiBzZWxmLnBhcmFtV2F0Y2hlcnNba2V5XTtcbiAgICAgIGlmIChjYikge1xuICAgICAgICBjYi5jYWxsKHNlbGYsIHZhbCwgb2xkVmFsKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgY2FsbGVkID0gdHJ1ZTtcbiAgICB9XG4gIH0sIHtcbiAgICBpbW1lZGlhdGU6IHRydWUsXG4gICAgdXNlcjogZmFsc2VcbiAgfSk7KHRoaXMuX3BhcmFtVW53YXRjaEZucyB8fCAodGhpcy5fcGFyYW1VbndhdGNoRm5zID0gW10pKS5wdXNoKHVud2F0Y2gpO1xufTtcblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgZGlyZWN0aXZlIGlzIGEgZnVuY3Rpb24gY2FsbGVyXG4gKiBhbmQgaWYgdGhlIGV4cHJlc3Npb24gaXMgYSBjYWxsYWJsZSBvbmUuIElmIGJvdGggdHJ1ZSxcbiAqIHdlIHdyYXAgdXAgdGhlIGV4cHJlc3Npb24gYW5kIHVzZSBpdCBhcyB0aGUgZXZlbnRcbiAqIGhhbmRsZXIuXG4gKlxuICogZS5nLiBvbi1jbGljaz1cImErK1wiXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqL1xuXG5EaXJlY3RpdmUucHJvdG90eXBlLl9jaGVja1N0YXRlbWVudCA9IGZ1bmN0aW9uICgpIHtcbiAgdmFyIGV4cHJlc3Npb24gPSB0aGlzLmV4cHJlc3Npb247XG4gIGlmIChleHByZXNzaW9uICYmIHRoaXMuYWNjZXB0U3RhdGVtZW50ICYmICFpc1NpbXBsZVBhdGgoZXhwcmVzc2lvbikpIHtcbiAgICB2YXIgZm4gPSBwYXJzZUV4cHJlc3Npb24oZXhwcmVzc2lvbikuZ2V0O1xuICAgIHZhciBzY29wZSA9IHRoaXMuX3Njb3BlIHx8IHRoaXMudm07XG4gICAgdmFyIGhhbmRsZXIgPSBmdW5jdGlvbiBoYW5kbGVyKGUpIHtcbiAgICAgIHNjb3BlLiRldmVudCA9IGU7XG4gICAgICBmbi5jYWxsKHNjb3BlLCBzY29wZSk7XG4gICAgICBzY29wZS4kZXZlbnQgPSBudWxsO1xuICAgIH07XG4gICAgaWYgKHRoaXMuZmlsdGVycykge1xuICAgICAgaGFuZGxlciA9IHNjb3BlLl9hcHBseUZpbHRlcnMoaGFuZGxlciwgbnVsbCwgdGhpcy5maWx0ZXJzKTtcbiAgICB9XG4gICAgdGhpcy51cGRhdGUoaGFuZGxlcik7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn07XG5cbi8qKlxuICogU2V0IHRoZSBjb3JyZXNwb25kaW5nIHZhbHVlIHdpdGggdGhlIHNldHRlci5cbiAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0d28td2F5IGRpcmVjdGl2ZXNcbiAqIGUuZy4gdi1tb2RlbC5cbiAqXG4gKiBAcGFyYW0geyp9IHZhbHVlXG4gKiBAcHVibGljXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAodmFsdWUpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIGVsc2UgKi9cbiAgaWYgKHRoaXMudHdvV2F5KSB7XG4gICAgdGhpcy5fd2l0aExvY2soZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5fd2F0Y2hlci5zZXQodmFsdWUpO1xuICAgIH0pO1xuICB9IGVsc2UgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICB3YXJuKCdEaXJlY3RpdmUuc2V0KCkgY2FuIG9ubHkgYmUgdXNlZCBpbnNpZGUgdHdvV2F5JyArICdkaXJlY3RpdmVzLicpO1xuICB9XG59O1xuXG4vKipcbiAqIEV4ZWN1dGUgYSBmdW5jdGlvbiB3aGlsZSBwcmV2ZW50aW5nIHRoYXQgZnVuY3Rpb24gZnJvbVxuICogdHJpZ2dlcmluZyB1cGRhdGVzIG9uIHRoaXMgZGlyZWN0aXZlIGluc3RhbmNlLlxuICpcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cblxuRGlyZWN0aXZlLnByb3RvdHlwZS5fd2l0aExvY2sgPSBmdW5jdGlvbiAoZm4pIHtcbiAgdmFyIHNlbGYgPSB0aGlzO1xuICBzZWxmLl9sb2NrZWQgPSB0cnVlO1xuICBmbi5jYWxsKHNlbGYpO1xuICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XG4gICAgc2VsZi5fbG9ja2VkID0gZmFsc2U7XG4gIH0pO1xufTtcblxuLyoqXG4gKiBDb252ZW5pZW5jZSBtZXRob2QgdGhhdCBhdHRhY2hlcyBhIERPTSBldmVudCBsaXN0ZW5lclxuICogdG8gdGhlIGRpcmVjdGl2ZSBlbGVtZW50IGFuZCBhdXRvbWV0aWNhbGx5IHRlYXJzIGl0IGRvd25cbiAqIGR1cmluZyB1bmJpbmQuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFt1c2VDYXB0dXJlXVxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUub24gPSBmdW5jdGlvbiAoZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpIHtcbiAgb24odGhpcy5lbCwgZXZlbnQsIGhhbmRsZXIsIHVzZUNhcHR1cmUpOyh0aGlzLl9saXN0ZW5lcnMgfHwgKHRoaXMuX2xpc3RlbmVycyA9IFtdKSkucHVzaChbZXZlbnQsIGhhbmRsZXJdKTtcbn07XG5cbi8qKlxuICogVGVhcmRvd24gdGhlIHdhdGNoZXIgYW5kIGNhbGwgdW5iaW5kLlxuICovXG5cbkRpcmVjdGl2ZS5wcm90b3R5cGUuX3RlYXJkb3duID0gZnVuY3Rpb24gKCkge1xuICBpZiAodGhpcy5fYm91bmQpIHtcbiAgICB0aGlzLl9ib3VuZCA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnVuYmluZCkge1xuICAgICAgdGhpcy51bmJpbmQoKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3dhdGNoZXIpIHtcbiAgICAgIHRoaXMuX3dhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9XG4gICAgdmFyIGxpc3RlbmVycyA9IHRoaXMuX2xpc3RlbmVycztcbiAgICB2YXIgaTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICBpID0gbGlzdGVuZXJzLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgb2ZmKHRoaXMuZWwsIGxpc3RlbmVyc1tpXVswXSwgbGlzdGVuZXJzW2ldWzFdKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdmFyIHVud2F0Y2hGbnMgPSB0aGlzLl9wYXJhbVVud2F0Y2hGbnM7XG4gICAgaWYgKHVud2F0Y2hGbnMpIHtcbiAgICAgIGkgPSB1bndhdGNoRm5zLmxlbmd0aDtcbiAgICAgIHdoaWxlIChpLS0pIHtcbiAgICAgICAgdW53YXRjaEZuc1tpXSgpO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB0aGlzLmVsKSB7XG4gICAgICB0aGlzLmVsLl92dWVfZGlyZWN0aXZlcy4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICB0aGlzLnZtID0gdGhpcy5lbCA9IHRoaXMuX3dhdGNoZXIgPSB0aGlzLl9saXN0ZW5lcnMgPSBudWxsO1xuICB9XG59O1xuXG5mdW5jdGlvbiBsaWZlY3ljbGVNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBVcGRhdGUgdi1yZWYgZm9yIGNvbXBvbmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtCb29sZWFufSByZW1vdmVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fdXBkYXRlUmVmID0gZnVuY3Rpb24gKHJlbW92ZSkge1xuICAgIHZhciByZWYgPSB0aGlzLiRvcHRpb25zLl9yZWY7XG4gICAgaWYgKHJlZikge1xuICAgICAgdmFyIHJlZnMgPSAodGhpcy5fc2NvcGUgfHwgdGhpcy5fY29udGV4dCkuJHJlZnM7XG4gICAgICBpZiAocmVtb3ZlKSB7XG4gICAgICAgIGlmIChyZWZzW3JlZl0gPT09IHRoaXMpIHtcbiAgICAgICAgICByZWZzW3JlZl0gPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZWZzW3JlZl0gPSB0aGlzO1xuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogVHJhbnNjbHVkZSwgY29tcGlsZSBhbmQgbGluayBlbGVtZW50LlxuICAgKlxuICAgKiBJZiBhIHByZS1jb21waWxlZCBsaW5rZXIgaXMgYXZhaWxhYmxlLCB0aGF0IG1lYW5zIHRoZVxuICAgKiBwYXNzZWQgaW4gZWxlbWVudCB3aWxsIGJlIHByZS10cmFuc2NsdWRlZCBhbmQgY29tcGlsZWRcbiAgICogYXMgd2VsbCAtIGFsbCB3ZSBuZWVkIHRvIGRvIGlzIHRvIGNhbGwgdGhlIGxpbmtlci5cbiAgICpcbiAgICogT3RoZXJ3aXNlIHdlIG5lZWQgdG8gY2FsbCB0cmFuc2NsdWRlL2NvbXBpbGUvbGluayBoZXJlLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuX2NvbXBpbGUgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJG9wdGlvbnM7XG5cbiAgICAvLyB0cmFuc2NsdWRlIGFuZCBpbml0IGVsZW1lbnRcbiAgICAvLyB0cmFuc2NsdWRlIGNhbiBwb3RlbnRpYWxseSByZXBsYWNlIG9yaWdpbmFsXG4gICAgLy8gc28gd2UgbmVlZCB0byBrZWVwIHJlZmVyZW5jZTsgdGhpcyBzdGVwIGFsc28gaW5qZWN0c1xuICAgIC8vIHRoZSB0ZW1wbGF0ZSBhbmQgY2FjaGVzIHRoZSBvcmlnaW5hbCBhdHRyaWJ1dGVzXG4gICAgLy8gb24gdGhlIGNvbnRhaW5lciBub2RlIGFuZCByZXBsYWNlciBub2RlLlxuICAgIHZhciBvcmlnaW5hbCA9IGVsO1xuICAgIGVsID0gdHJhbnNjbHVkZShlbCwgb3B0aW9ucyk7XG4gICAgdGhpcy5faW5pdEVsZW1lbnQoZWwpO1xuXG4gICAgLy8gaGFuZGxlIHYtcHJlIG9uIHJvb3Qgbm9kZSAoIzIwMjYpXG4gICAgaWYgKGVsLm5vZGVUeXBlID09PSAxICYmIGdldEF0dHIoZWwsICd2LXByZScpICE9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gcm9vdCBpcyBhbHdheXMgY29tcGlsZWQgcGVyLWluc3RhbmNlLCBiZWNhdXNlXG4gICAgLy8gY29udGFpbmVyIGF0dHJzIGFuZCBwcm9wcyBjYW4gYmUgZGlmZmVyZW50IGV2ZXJ5IHRpbWUuXG4gICAgdmFyIGNvbnRleHRPcHRpb25zID0gdGhpcy5fY29udGV4dCAmJiB0aGlzLl9jb250ZXh0LiRvcHRpb25zO1xuICAgIHZhciByb290TGlua2VyID0gY29tcGlsZVJvb3QoZWwsIG9wdGlvbnMsIGNvbnRleHRPcHRpb25zKTtcblxuICAgIC8vIHJlc29sdmUgc2xvdCBkaXN0cmlidXRpb25cbiAgICByZXNvbHZlU2xvdHModGhpcywgb3B0aW9ucy5fY29udGVudCk7XG5cbiAgICAvLyBjb21waWxlIGFuZCBsaW5rIHRoZSByZXN0XG4gICAgdmFyIGNvbnRlbnRMaW5rRm47XG4gICAgdmFyIGN0b3IgPSB0aGlzLmNvbnN0cnVjdG9yO1xuICAgIC8vIGNvbXBvbmVudCBjb21waWxhdGlvbiBjYW4gYmUgY2FjaGVkXG4gICAgLy8gYXMgbG9uZyBhcyBpdCdzIG5vdCB1c2luZyBpbmxpbmUtdGVtcGxhdGVcbiAgICBpZiAob3B0aW9ucy5fbGlua2VyQ2FjaGFibGUpIHtcbiAgICAgIGNvbnRlbnRMaW5rRm4gPSBjdG9yLmxpbmtlcjtcbiAgICAgIGlmICghY29udGVudExpbmtGbikge1xuICAgICAgICBjb250ZW50TGlua0ZuID0gY3Rvci5saW5rZXIgPSBjb21waWxlKGVsLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBsaW5rIHBoYXNlXG4gICAgLy8gbWFrZSBzdXJlIHRvIGxpbmsgcm9vdCB3aXRoIHByb3Agc2NvcGUhXG4gICAgdmFyIHJvb3RVbmxpbmtGbiA9IHJvb3RMaW5rZXIodGhpcywgZWwsIHRoaXMuX3Njb3BlKTtcbiAgICB2YXIgY29udGVudFVubGlua0ZuID0gY29udGVudExpbmtGbiA/IGNvbnRlbnRMaW5rRm4odGhpcywgZWwpIDogY29tcGlsZShlbCwgb3B0aW9ucykodGhpcywgZWwpO1xuXG4gICAgLy8gcmVnaXN0ZXIgY29tcG9zaXRlIHVubGluayBmdW5jdGlvblxuICAgIC8vIHRvIGJlIGNhbGxlZCBkdXJpbmcgaW5zdGFuY2UgZGVzdHJ1Y3Rpb25cbiAgICB0aGlzLl91bmxpbmtGbiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJvb3RVbmxpbmtGbigpO1xuICAgICAgLy8gcGFzc2luZyBkZXN0cm95aW5nOiB0cnVlIHRvIGF2b2lkIHNlYXJjaGluZyBhbmRcbiAgICAgIC8vIHNwbGljaW5nIHRoZSBkaXJlY3RpdmVzXG4gICAgICBjb250ZW50VW5saW5rRm4odHJ1ZSk7XG4gICAgfTtcblxuICAgIC8vIGZpbmFsbHkgcmVwbGFjZSBvcmlnaW5hbFxuICAgIGlmIChvcHRpb25zLnJlcGxhY2UpIHtcbiAgICAgIHJlcGxhY2Uob3JpZ2luYWwsIGVsKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc0NvbXBpbGVkID0gdHJ1ZTtcbiAgICB0aGlzLl9jYWxsSG9vaygnY29tcGlsZWQnKTtcbiAgfTtcblxuICAvKipcbiAgICogSW5pdGlhbGl6ZSBpbnN0YW5jZSBlbGVtZW50LiBDYWxsZWQgaW4gdGhlIHB1YmxpY1xuICAgKiAkbW91bnQoKSBtZXRob2QuXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5faW5pdEVsZW1lbnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAoaXNGcmFnbWVudChlbCkpIHtcbiAgICAgIHRoaXMuX2lzRnJhZ21lbnQgPSB0cnVlO1xuICAgICAgdGhpcy4kZWwgPSB0aGlzLl9mcmFnbWVudFN0YXJ0ID0gZWwuZmlyc3RDaGlsZDtcbiAgICAgIHRoaXMuX2ZyYWdtZW50RW5kID0gZWwubGFzdENoaWxkO1xuICAgICAgLy8gc2V0IHBlcnNpc3RlZCB0ZXh0IGFuY2hvcnMgdG8gZW1wdHlcbiAgICAgIGlmICh0aGlzLl9mcmFnbWVudFN0YXJ0Lm5vZGVUeXBlID09PSAzKSB7XG4gICAgICAgIHRoaXMuX2ZyYWdtZW50U3RhcnQuZGF0YSA9IHRoaXMuX2ZyYWdtZW50RW5kLmRhdGEgPSAnJztcbiAgICAgIH1cbiAgICAgIHRoaXMuX2ZyYWdtZW50ID0gZWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGVsID0gZWw7XG4gICAgfVxuICAgIHRoaXMuJGVsLl9fdnVlX18gPSB0aGlzO1xuICAgIHRoaXMuX2NhbGxIb29rKCdiZWZvcmVDb21waWxlJyk7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhbmQgYmluZCBhIGRpcmVjdGl2ZSB0byBhbiBlbGVtZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge09iamVjdH0gZGVzY3JpcHRvciAtIHBhcnNlZCBkaXJlY3RpdmUgZGVzY3JpcHRvclxuICAgKiBAcGFyYW0ge05vZGV9IG5vZGUgICAtIHRhcmdldCBub2RlXG4gICAqIEBwYXJhbSB7VnVlfSBbaG9zdF0gLSB0cmFuc2NsdXNpb24gaG9zdCBjb21wb25lbnRcbiAgICogQHBhcmFtIHtPYmplY3R9IFtzY29wZV0gLSB2LWZvciBzY29wZVxuICAgKiBAcGFyYW0ge0ZyYWdtZW50fSBbZnJhZ10gLSBvd25lciBmcmFnbWVudFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9iaW5kRGlyID0gZnVuY3Rpb24gKGRlc2NyaXB0b3IsIG5vZGUsIGhvc3QsIHNjb3BlLCBmcmFnKSB7XG4gICAgdGhpcy5fZGlyZWN0aXZlcy5wdXNoKG5ldyBEaXJlY3RpdmUoZGVzY3JpcHRvciwgdGhpcywgbm9kZSwgaG9zdCwgc2NvcGUsIGZyYWcpKTtcbiAgfTtcblxuICAvKipcbiAgICogVGVhcmRvd24gYW4gaW5zdGFuY2UsIHVub2JzZXJ2ZXMgdGhlIGRhdGEsIHVuYmluZCBhbGwgdGhlXG4gICAqIGRpcmVjdGl2ZXMsIHR1cm4gb2ZmIGFsbCB0aGUgZXZlbnQgbGlzdGVuZXJzLCBldGMuXG4gICAqXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVtb3ZlIC0gd2hldGhlciB0byByZW1vdmUgdGhlIERPTSBub2RlLlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cCAtIGlmIHRydWUsIGRlZmVyIGNsZWFudXAgdG9cbiAgICogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZSBjYWxsZWQgbGF0ZXJcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fZGVzdHJveSA9IGZ1bmN0aW9uIChyZW1vdmUsIGRlZmVyQ2xlYW51cCkge1xuICAgIGlmICh0aGlzLl9pc0JlaW5nRGVzdHJveWVkKSB7XG4gICAgICBpZiAoIWRlZmVyQ2xlYW51cCkge1xuICAgICAgICB0aGlzLl9jbGVhbnVwKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdmFyIGRlc3Ryb3lSZWFkeTtcbiAgICB2YXIgcGVuZGluZ1JlbW92YWw7XG5cbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgLy8gQ2xlYW51cCBzaG91bGQgYmUgY2FsbGVkIGVpdGhlciBzeW5jaHJvbm91c2x5IG9yIGFzeW5jaHJvbm95c2x5IGFzXG4gICAgLy8gY2FsbGJhY2sgb2YgdGhpcy4kcmVtb3ZlKCksIG9yIGlmIHJlbW92ZSBhbmQgZGVmZXJDbGVhbnVwIGFyZSBmYWxzZS5cbiAgICAvLyBJbiBhbnkgY2FzZSBpdCBzaG91bGQgYmUgY2FsbGVkIGFmdGVyIGFsbCBvdGhlciByZW1vdmluZywgdW5iaW5kaW5nIGFuZFxuICAgIC8vIHR1cm5pbmcgb2YgaXMgZG9uZVxuICAgIHZhciBjbGVhbnVwSWZQb3NzaWJsZSA9IGZ1bmN0aW9uIGNsZWFudXBJZlBvc3NpYmxlKCkge1xuICAgICAgaWYgKGRlc3Ryb3lSZWFkeSAmJiAhcGVuZGluZ1JlbW92YWwgJiYgIWRlZmVyQ2xlYW51cCkge1xuICAgICAgICBzZWxmLl9jbGVhbnVwKCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIHJlbW92ZSBET00gZWxlbWVudFxuICAgIGlmIChyZW1vdmUgJiYgdGhpcy4kZWwpIHtcbiAgICAgIHBlbmRpbmdSZW1vdmFsID0gdHJ1ZTtcbiAgICAgIHRoaXMuJHJlbW92ZShmdW5jdGlvbiAoKSB7XG4gICAgICAgIHBlbmRpbmdSZW1vdmFsID0gZmFsc2U7XG4gICAgICAgIGNsZWFudXBJZlBvc3NpYmxlKCk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICB0aGlzLl9jYWxsSG9vaygnYmVmb3JlRGVzdHJveScpO1xuICAgIHRoaXMuX2lzQmVpbmdEZXN0cm95ZWQgPSB0cnVlO1xuICAgIHZhciBpO1xuICAgIC8vIHJlbW92ZSBzZWxmIGZyb20gcGFyZW50LiBvbmx5IG5lY2Vzc2FyeVxuICAgIC8vIGlmIHBhcmVudCBpcyBub3QgYmVpbmcgZGVzdHJveWVkIGFzIHdlbGwuXG4gICAgdmFyIHBhcmVudCA9IHRoaXMuJHBhcmVudDtcbiAgICBpZiAocGFyZW50ICYmICFwYXJlbnQuX2lzQmVpbmdEZXN0cm95ZWQpIHtcbiAgICAgIHBhcmVudC4kY2hpbGRyZW4uJHJlbW92ZSh0aGlzKTtcbiAgICAgIC8vIHVucmVnaXN0ZXIgcmVmIChyZW1vdmU6IHRydWUpXG4gICAgICB0aGlzLl91cGRhdGVSZWYodHJ1ZSk7XG4gICAgfVxuICAgIC8vIGRlc3Ryb3kgYWxsIGNoaWxkcmVuLlxuICAgIGkgPSB0aGlzLiRjaGlsZHJlbi5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgdGhpcy4kY2hpbGRyZW5baV0uJGRlc3Ryb3koKTtcbiAgICB9XG4gICAgLy8gdGVhcmRvd24gcHJvcHNcbiAgICBpZiAodGhpcy5fcHJvcHNVbmxpbmtGbikge1xuICAgICAgdGhpcy5fcHJvcHNVbmxpbmtGbigpO1xuICAgIH1cbiAgICAvLyB0ZWFyZG93biBhbGwgZGlyZWN0aXZlcy4gdGhpcyBhbHNvIHRlYXJzZG93biBhbGxcbiAgICAvLyBkaXJlY3RpdmUtb3duZWQgd2F0Y2hlcnMuXG4gICAgaWYgKHRoaXMuX3VubGlua0ZuKSB7XG4gICAgICB0aGlzLl91bmxpbmtGbigpO1xuICAgIH1cbiAgICBpID0gdGhpcy5fd2F0Y2hlcnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIHRoaXMuX3dhdGNoZXJzW2ldLnRlYXJkb3duKCk7XG4gICAgfVxuICAgIC8vIHJlbW92ZSByZWZlcmVuY2UgdG8gc2VsZiBvbiAkZWxcbiAgICBpZiAodGhpcy4kZWwpIHtcbiAgICAgIHRoaXMuJGVsLl9fdnVlX18gPSBudWxsO1xuICAgIH1cblxuICAgIGRlc3Ryb3lSZWFkeSA9IHRydWU7XG4gICAgY2xlYW51cElmUG9zc2libGUoKTtcbiAgfTtcblxuICAvKipcbiAgICogQ2xlYW4gdXAgdG8gZW5zdXJlIGdhcmJhZ2UgY29sbGVjdGlvbi5cbiAgICogVGhpcyBpcyBjYWxsZWQgYWZ0ZXIgdGhlIGxlYXZlIHRyYW5zaXRpb24gaWYgdGhlcmVcbiAgICogaXMgYW55LlxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLl9jbGVhbnVwID0gZnVuY3Rpb24gKCkge1xuICAgIGlmICh0aGlzLl9pc0Rlc3Ryb3llZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyByZW1vdmUgc2VsZiBmcm9tIG93bmVyIGZyYWdtZW50XG4gICAgLy8gZG8gaXQgaW4gY2xlYW51cCBzbyB0aGF0IHdlIGNhbiBjYWxsICRkZXN0cm95IHdpdGhcbiAgICAvLyBkZWZlciByaWdodCB3aGVuIGEgZnJhZ21lbnQgaXMgYWJvdXQgdG8gYmUgcmVtb3ZlZC5cbiAgICBpZiAodGhpcy5fZnJhZykge1xuICAgICAgdGhpcy5fZnJhZy5jaGlsZHJlbi4kcmVtb3ZlKHRoaXMpO1xuICAgIH1cbiAgICAvLyByZW1vdmUgcmVmZXJlbmNlIGZyb20gZGF0YSBvYlxuICAgIC8vIGZyb3plbiBvYmplY3QgbWF5IG5vdCBoYXZlIG9ic2VydmVyLlxuICAgIGlmICh0aGlzLl9kYXRhICYmIHRoaXMuX2RhdGEuX19vYl9fKSB7XG4gICAgICB0aGlzLl9kYXRhLl9fb2JfXy5yZW1vdmVWbSh0aGlzKTtcbiAgICB9XG4gICAgLy8gQ2xlYW4gdXAgcmVmZXJlbmNlcyB0byBwcml2YXRlIHByb3BlcnRpZXMgYW5kIG90aGVyXG4gICAgLy8gaW5zdGFuY2VzLiBwcmVzZXJ2ZSByZWZlcmVuY2UgdG8gX2RhdGEgc28gdGhhdCBwcm94eVxuICAgIC8vIGFjY2Vzc29ycyBzdGlsbCB3b3JrLiBUaGUgb25seSBwb3RlbnRpYWwgc2lkZSBlZmZlY3RcbiAgICAvLyBoZXJlIGlzIHRoYXQgbXV0YXRpbmcgdGhlIGluc3RhbmNlIGFmdGVyIGl0J3MgZGVzdHJveWVkXG4gICAgLy8gbWF5IGFmZmVjdCB0aGUgc3RhdGUgb2Ygb3RoZXIgY29tcG9uZW50cyB0aGF0IGFyZSBzdGlsbFxuICAgIC8vIG9ic2VydmluZyB0aGUgc2FtZSBvYmplY3QsIGJ1dCB0aGF0IHNlZW1zIHRvIGJlIGFcbiAgICAvLyByZWFzb25hYmxlIHJlc3BvbnNpYmlsaXR5IGZvciB0aGUgdXNlciByYXRoZXIgdGhhblxuICAgIC8vIGFsd2F5cyB0aHJvd2luZyBhbiBlcnJvciBvbiB0aGVtLlxuICAgIHRoaXMuJGVsID0gdGhpcy4kcGFyZW50ID0gdGhpcy4kcm9vdCA9IHRoaXMuJGNoaWxkcmVuID0gdGhpcy5fd2F0Y2hlcnMgPSB0aGlzLl9jb250ZXh0ID0gdGhpcy5fc2NvcGUgPSB0aGlzLl9kaXJlY3RpdmVzID0gbnVsbDtcbiAgICAvLyBjYWxsIHRoZSBsYXN0IGhvb2suLi5cbiAgICB0aGlzLl9pc0Rlc3Ryb3llZCA9IHRydWU7XG4gICAgdGhpcy5fY2FsbEhvb2soJ2Rlc3Ryb3llZCcpO1xuICAgIC8vIHR1cm4gb2ZmIGFsbCBpbnN0YW5jZSBsaXN0ZW5lcnMuXG4gICAgdGhpcy4kb2ZmKCk7XG4gIH07XG59XG5cbmZ1bmN0aW9uIG1pc2NNaXhpbiAoVnVlKSB7XG4gIC8qKlxuICAgKiBBcHBseSBhIGxpc3Qgb2YgZmlsdGVyIChkZXNjcmlwdG9ycykgdG8gYSB2YWx1ZS5cbiAgICogVXNpbmcgcGxhaW4gZm9yIGxvb3BzIGhlcmUgYmVjYXVzZSB0aGlzIHdpbGwgYmUgY2FsbGVkIGluXG4gICAqIHRoZSBnZXR0ZXIgb2YgYW55IHdhdGNoZXIgd2l0aCBmaWx0ZXJzIHNvIGl0IGlzIHZlcnlcbiAgICogcGVyZm9ybWFuY2Ugc2Vuc2l0aXZlLlxuICAgKlxuICAgKiBAcGFyYW0geyp9IHZhbHVlXG4gICAqIEBwYXJhbSB7Kn0gW29sZFZhbHVlXVxuICAgKiBAcGFyYW0ge0FycmF5fSBmaWx0ZXJzXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gd3JpdGVcbiAgICogQHJldHVybiB7Kn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fYXBwbHlGaWx0ZXJzID0gZnVuY3Rpb24gKHZhbHVlLCBvbGRWYWx1ZSwgZmlsdGVycywgd3JpdGUpIHtcbiAgICB2YXIgZmlsdGVyLCBmbiwgYXJncywgYXJnLCBvZmZzZXQsIGksIGwsIGosIGs7XG4gICAgZm9yIChpID0gMCwgbCA9IGZpbHRlcnMubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICBmaWx0ZXIgPSBmaWx0ZXJzW3dyaXRlID8gbCAtIGkgLSAxIDogaV07XG4gICAgICBmbiA9IHJlc29sdmVBc3NldCh0aGlzLiRvcHRpb25zLCAnZmlsdGVycycsIGZpbHRlci5uYW1lLCB0cnVlKTtcbiAgICAgIGlmICghZm4pIGNvbnRpbnVlO1xuICAgICAgZm4gPSB3cml0ZSA/IGZuLndyaXRlIDogZm4ucmVhZCB8fCBmbjtcbiAgICAgIGlmICh0eXBlb2YgZm4gIT09ICdmdW5jdGlvbicpIGNvbnRpbnVlO1xuICAgICAgYXJncyA9IHdyaXRlID8gW3ZhbHVlLCBvbGRWYWx1ZV0gOiBbdmFsdWVdO1xuICAgICAgb2Zmc2V0ID0gd3JpdGUgPyAyIDogMTtcbiAgICAgIGlmIChmaWx0ZXIuYXJncykge1xuICAgICAgICBmb3IgKGogPSAwLCBrID0gZmlsdGVyLmFyZ3MubGVuZ3RoOyBqIDwgazsgaisrKSB7XG4gICAgICAgICAgYXJnID0gZmlsdGVyLmFyZ3Nbal07XG4gICAgICAgICAgYXJnc1tqICsgb2Zmc2V0XSA9IGFyZy5keW5hbWljID8gdGhpcy4kZ2V0KGFyZy52YWx1ZSkgOiBhcmcudmFsdWU7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIHZhbHVlID0gZm4uYXBwbHkodGhpcywgYXJncyk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfTtcblxuICAvKipcbiAgICogUmVzb2x2ZSBhIGNvbXBvbmVudCwgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGNvbXBvbmVudFxuICAgKiBpcyBkZWZpbmVkIG5vcm1hbGx5IG9yIHVzaW5nIGFuIGFzeW5jIGZhY3RvcnkgZnVuY3Rpb24uXG4gICAqIFJlc29sdmVzIHN5bmNocm9ub3VzbHkgaWYgYWxyZWFkeSByZXNvbHZlZCwgb3RoZXJ3aXNlXG4gICAqIHJlc29sdmVzIGFzeW5jaHJvbm91c2x5IGFuZCBjYWNoZXMgdGhlIHJlc29sdmVkXG4gICAqIGNvbnN0cnVjdG9yIG9uIHRoZSBmYWN0b3J5LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xGdW5jdGlvbn0gdmFsdWVcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2JcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS5fcmVzb2x2ZUNvbXBvbmVudCA9IGZ1bmN0aW9uICh2YWx1ZSwgY2IpIHtcbiAgICB2YXIgZmFjdG9yeTtcbiAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBmYWN0b3J5ID0gdmFsdWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZhY3RvcnkgPSByZXNvbHZlQXNzZXQodGhpcy4kb3B0aW9ucywgJ2NvbXBvbmVudHMnLCB2YWx1ZSwgdHJ1ZSk7XG4gICAgfVxuICAgIC8qIGlzdGFuYnVsIGlnbm9yZSBpZiAqL1xuICAgIGlmICghZmFjdG9yeSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBhc3luYyBjb21wb25lbnQgZmFjdG9yeVxuICAgIGlmICghZmFjdG9yeS5vcHRpb25zKSB7XG4gICAgICBpZiAoZmFjdG9yeS5yZXNvbHZlZCkge1xuICAgICAgICAvLyBjYWNoZWRcbiAgICAgICAgY2IoZmFjdG9yeS5yZXNvbHZlZCk7XG4gICAgICB9IGVsc2UgaWYgKGZhY3RvcnkucmVxdWVzdGVkKSB7XG4gICAgICAgIC8vIHBvb2wgY2FsbGJhY2tzXG4gICAgICAgIGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcy5wdXNoKGNiKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGZhY3RvcnkucmVxdWVzdGVkID0gdHJ1ZTtcbiAgICAgICAgdmFyIGNicyA9IGZhY3RvcnkucGVuZGluZ0NhbGxiYWNrcyA9IFtjYl07XG4gICAgICAgIGZhY3RvcnkuY2FsbCh0aGlzLCBmdW5jdGlvbiByZXNvbHZlKHJlcykge1xuICAgICAgICAgIGlmIChpc1BsYWluT2JqZWN0KHJlcykpIHtcbiAgICAgICAgICAgIHJlcyA9IFZ1ZS5leHRlbmQocmVzKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gY2FjaGUgcmVzb2x2ZWRcbiAgICAgICAgICBmYWN0b3J5LnJlc29sdmVkID0gcmVzO1xuICAgICAgICAgIC8vIGludm9rZSBjYWxsYmFja3NcbiAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGNicy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgICAgIGNic1tpXShyZXMpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgZnVuY3Rpb24gcmVqZWN0KHJlYXNvbikge1xuICAgICAgICAgIHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicgJiYgd2FybignRmFpbGVkIHRvIHJlc29sdmUgYXN5bmMgY29tcG9uZW50JyArICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnID8gJzogJyArIHZhbHVlIDogJycpICsgJy4gJyArIChyZWFzb24gPyAnXFxuUmVhc29uOiAnICsgcmVhc29uIDogJycpKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vcm1hbCBjb21wb25lbnRcbiAgICAgIGNiKGZhY3RvcnkpO1xuICAgIH1cbiAgfTtcbn1cblxudmFyIGZpbHRlclJFJDEgPSAvW158XVxcfFtefF0vO1xuXG5mdW5jdGlvbiBkYXRhQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIEdldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBleHBcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG4gICAqIEByZXR1cm4geyp9XG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGdldCA9IGZ1bmN0aW9uIChleHAsIGFzU3RhdGVtZW50KSB7XG4gICAgdmFyIHJlcyA9IHBhcnNlRXhwcmVzc2lvbihleHApO1xuICAgIGlmIChyZXMpIHtcbiAgICAgIGlmIChhc1N0YXRlbWVudCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiBzdGF0ZW1lbnRIYW5kbGVyKCkge1xuICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IHRvQXJyYXkoYXJndW1lbnRzKTtcbiAgICAgICAgICB2YXIgcmVzdWx0ID0gcmVzLmdldC5jYWxsKHNlbGYsIHNlbGYpO1xuICAgICAgICAgIHNlbGYuJGFyZ3VtZW50cyA9IG51bGw7XG4gICAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIHJlcy5nZXQuY2FsbCh0aGlzLCB0aGlzKTtcbiAgICAgICAgfSBjYXRjaCAoZSkge31cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgdmFsdWUgZnJvbSBhbiBleHByZXNzaW9uIG9uIHRoaXMgdm0uXG4gICAqIFRoZSBleHByZXNzaW9uIG11c3QgYmUgYSB2YWxpZCBsZWZ0LWhhbmRcbiAgICogZXhwcmVzc2lvbiBpbiBhbiBhc3NpZ25tZW50LlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gZXhwXG4gICAqIEBwYXJhbSB7Kn0gdmFsXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJHNldCA9IGZ1bmN0aW9uIChleHAsIHZhbCkge1xuICAgIHZhciByZXMgPSBwYXJzZUV4cHJlc3Npb24oZXhwLCB0cnVlKTtcbiAgICBpZiAocmVzICYmIHJlcy5zZXQpIHtcbiAgICAgIHJlcy5zZXQuY2FsbCh0aGlzLCB0aGlzLCB2YWwpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGVsZXRlIGEgcHJvcGVydHkgb24gdGhlIFZNXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBrZXlcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZGVsZXRlID0gZnVuY3Rpb24gKGtleSkge1xuICAgIGRlbCh0aGlzLl9kYXRhLCBrZXkpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBXYXRjaCBhbiBleHByZXNzaW9uLCB0cmlnZ2VyIGNhbGxiYWNrIHdoZW4gaXRzXG4gICAqIHZhbHVlIGNoYW5nZXMuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBleHBPckZuXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGNiXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGRlZXBcbiAgICogICAgICAgICAgICAgICAgIC0ge0Jvb2xlYW59IGltbWVkaWF0ZVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn0gLSB1bndhdGNoRm5cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kd2F0Y2ggPSBmdW5jdGlvbiAoZXhwT3JGbiwgY2IsIG9wdGlvbnMpIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZhciBwYXJzZWQ7XG4gICAgaWYgKHR5cGVvZiBleHBPckZuID09PSAnc3RyaW5nJykge1xuICAgICAgcGFyc2VkID0gcGFyc2VEaXJlY3RpdmUoZXhwT3JGbik7XG4gICAgICBleHBPckZuID0gcGFyc2VkLmV4cHJlc3Npb247XG4gICAgfVxuICAgIHZhciB3YXRjaGVyID0gbmV3IFdhdGNoZXIodm0sIGV4cE9yRm4sIGNiLCB7XG4gICAgICBkZWVwOiBvcHRpb25zICYmIG9wdGlvbnMuZGVlcCxcbiAgICAgIHN5bmM6IG9wdGlvbnMgJiYgb3B0aW9ucy5zeW5jLFxuICAgICAgZmlsdGVyczogcGFyc2VkICYmIHBhcnNlZC5maWx0ZXJzLFxuICAgICAgdXNlcjogIW9wdGlvbnMgfHwgb3B0aW9ucy51c2VyICE9PSBmYWxzZVxuICAgIH0pO1xuICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMuaW1tZWRpYXRlKSB7XG4gICAgICBjYi5jYWxsKHZtLCB3YXRjaGVyLnZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIGZ1bmN0aW9uIHVud2F0Y2hGbigpIHtcbiAgICAgIHdhdGNoZXIudGVhcmRvd24oKTtcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBFdmFsdWF0ZSBhIHRleHQgZGlyZWN0aXZlLCBpbmNsdWRpbmcgZmlsdGVycy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAgICogQHBhcmFtIHtCb29sZWFufSBbYXNTdGF0ZW1lbnRdXG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZXZhbCA9IGZ1bmN0aW9uICh0ZXh0LCBhc1N0YXRlbWVudCkge1xuICAgIC8vIGNoZWNrIGZvciBmaWx0ZXJzLlxuICAgIGlmIChmaWx0ZXJSRSQxLnRlc3QodGV4dCkpIHtcbiAgICAgIHZhciBkaXIgPSBwYXJzZURpcmVjdGl2ZSh0ZXh0KTtcbiAgICAgIC8vIHRoZSBmaWx0ZXIgcmVnZXggY2hlY2sgbWlnaHQgZ2l2ZSBmYWxzZSBwb3NpdGl2ZVxuICAgICAgLy8gZm9yIHBpcGVzIGluc2lkZSBzdHJpbmdzLCBzbyBpdCdzIHBvc3NpYmxlIHRoYXRcbiAgICAgIC8vIHdlIGRvbid0IGdldCBhbnkgZmlsdGVycyBoZXJlXG4gICAgICB2YXIgdmFsID0gdGhpcy4kZ2V0KGRpci5leHByZXNzaW9uLCBhc1N0YXRlbWVudCk7XG4gICAgICByZXR1cm4gZGlyLmZpbHRlcnMgPyB0aGlzLl9hcHBseUZpbHRlcnModmFsLCBudWxsLCBkaXIuZmlsdGVycykgOiB2YWw7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG5vIGZpbHRlclxuICAgICAgcmV0dXJuIHRoaXMuJGdldCh0ZXh0LCBhc1N0YXRlbWVudCk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBJbnRlcnBvbGF0ZSBhIHBpZWNlIG9mIHRlbXBsYXRlIHRleHQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSB0ZXh0XG4gICAqIEByZXR1cm4ge1N0cmluZ31cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kaW50ZXJwb2xhdGUgPSBmdW5jdGlvbiAodGV4dCkge1xuICAgIHZhciB0b2tlbnMgPSBwYXJzZVRleHQodGV4dCk7XG4gICAgdmFyIHZtID0gdGhpcztcbiAgICBpZiAodG9rZW5zKSB7XG4gICAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICByZXR1cm4gdm0uJGV2YWwodG9rZW5zWzBdLnZhbHVlKSArICcnO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRva2Vucy5tYXAoZnVuY3Rpb24gKHRva2VuKSB7XG4gICAgICAgICAgcmV0dXJuIHRva2VuLnRhZyA/IHZtLiRldmFsKHRva2VuLnZhbHVlKSA6IHRva2VuLnZhbHVlO1xuICAgICAgICB9KS5qb2luKCcnKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRleHQ7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBMb2cgaW5zdGFuY2UgZGF0YSBhcyBhIHBsYWluIEpTIG9iamVjdFxuICAgKiBzbyB0aGF0IGl0IGlzIGVhc2llciB0byBpbnNwZWN0IGluIGNvbnNvbGUuXG4gICAqIFRoaXMgbWV0aG9kIGFzc3VtZXMgY29uc29sZSBpcyBhdmFpbGFibGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBbcGF0aF1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbG9nID0gZnVuY3Rpb24gKHBhdGgpIHtcbiAgICB2YXIgZGF0YSA9IHBhdGggPyBnZXRQYXRoKHRoaXMuX2RhdGEsIHBhdGgpIDogdGhpcy5fZGF0YTtcbiAgICBpZiAoZGF0YSkge1xuICAgICAgZGF0YSA9IGNsZWFuKGRhdGEpO1xuICAgIH1cbiAgICAvLyBpbmNsdWRlIGNvbXB1dGVkIGZpZWxkc1xuICAgIGlmICghcGF0aCkge1xuICAgICAgdmFyIGtleTtcbiAgICAgIGZvciAoa2V5IGluIHRoaXMuJG9wdGlvbnMuY29tcHV0ZWQpIHtcbiAgICAgICAgZGF0YVtrZXldID0gY2xlYW4odGhpc1trZXldKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLl9wcm9wcykge1xuICAgICAgICBmb3IgKGtleSBpbiB0aGlzLl9wcm9wcykge1xuICAgICAgICAgIGRhdGFba2V5XSA9IGNsZWFuKHRoaXNba2V5XSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgY29uc29sZS5sb2coZGF0YSk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFwiY2xlYW5cIiBhIGdldHRlci9zZXR0ZXIgY29udmVydGVkIG9iamVjdCBpbnRvIGEgcGxhaW5cbiAgICogb2JqZWN0IGNvcHkuXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSAtIG9ialxuICAgKiBAcmV0dXJuIHtPYmplY3R9XG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNsZWFuKG9iaikge1xuICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KG9iaikpO1xuICB9XG59XG5cbmZ1bmN0aW9uIGRvbUFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBDb252ZW5pZW5jZSBvbi1pbnN0YW5jZSBuZXh0VGljay4gVGhlIGNhbGxiYWNrIGlzXG4gICAqIGF1dG8tYm91bmQgdG8gdGhlIGluc3RhbmNlLCBhbmQgdGhpcyBhdm9pZHMgY29tcG9uZW50XG4gICAqIG1vZHVsZXMgaGF2aW5nIHRvIHJlbHkgb24gdGhlIGdsb2JhbCBWdWUuXG4gICAqXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG5leHRUaWNrID0gZnVuY3Rpb24gKGZuKSB7XG4gICAgbmV4dFRpY2soZm4sIHRoaXMpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBcHBlbmQgaW5zdGFuY2UgdG8gdGFyZ2V0XG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gdGFyZ2V0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICogQHBhcmFtIHtCb29sZWFufSBbd2l0aFRyYW5zaXRpb25dIC0gZGVmYXVsdHMgdG8gdHJ1ZVxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRhcHBlbmRUbyA9IGZ1bmN0aW9uICh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIHJldHVybiBpbnNlcnQodGhpcywgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIGFwcGVuZCwgYXBwZW5kV2l0aFRyYW5zaXRpb24pO1xuICB9O1xuXG4gIC8qKlxuICAgKiBQcmVwZW5kIGluc3RhbmNlIHRvIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kcHJlcGVuZFRvID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICBpZiAodGFyZ2V0Lmhhc0NoaWxkTm9kZXMoKSkge1xuICAgICAgdGhpcy4kYmVmb3JlKHRhcmdldC5maXJzdENoaWxkLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBJbnNlcnQgaW5zdGFuY2UgYmVmb3JlIHRhcmdldFxuICAgKlxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYmVmb3JlID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgcmV0dXJuIGluc2VydCh0aGlzLCB0YXJnZXQsIGNiLCB3aXRoVHJhbnNpdGlvbiwgYmVmb3JlV2l0aENiLCBiZWZvcmVXaXRoVHJhbnNpdGlvbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIEluc2VydCBpbnN0YW5jZSBhZnRlciB0YXJnZXRcbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IFt3aXRoVHJhbnNpdGlvbl0gLSBkZWZhdWx0cyB0byB0cnVlXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGFmdGVyID0gZnVuY3Rpb24gKHRhcmdldCwgY2IsIHdpdGhUcmFuc2l0aW9uKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICBpZiAodGFyZ2V0Lm5leHRTaWJsaW5nKSB7XG4gICAgICB0aGlzLiRiZWZvcmUodGFyZ2V0Lm5leHRTaWJsaW5nLCBjYiwgd2l0aFRyYW5zaXRpb24pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRhcHBlbmRUbyh0YXJnZXQucGFyZW50Tm9kZSwgY2IsIHdpdGhUcmFuc2l0aW9uKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlbW92ZSBpbnN0YW5jZSBmcm9tIERPTVxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXSAtIGRlZmF1bHRzIHRvIHRydWVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kcmVtb3ZlID0gZnVuY3Rpb24gKGNiLCB3aXRoVHJhbnNpdGlvbikge1xuICAgIGlmICghdGhpcy4kZWwucGFyZW50Tm9kZSkge1xuICAgICAgcmV0dXJuIGNiICYmIGNiKCk7XG4gICAgfVxuICAgIHZhciBpbkRvY3VtZW50ID0gdGhpcy5faXNBdHRhY2hlZCAmJiBpbkRvYyh0aGlzLiRlbCk7XG4gICAgLy8gaWYgd2UgYXJlIG5vdCBpbiBkb2N1bWVudCwgbm8gbmVlZCB0byBjaGVja1xuICAgIC8vIGZvciB0cmFuc2l0aW9uc1xuICAgIGlmICghaW5Eb2N1bWVudCkgd2l0aFRyYW5zaXRpb24gPSBmYWxzZTtcbiAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgdmFyIHJlYWxDYiA9IGZ1bmN0aW9uIHJlYWxDYigpIHtcbiAgICAgIGlmIChpbkRvY3VtZW50KSBzZWxmLl9jYWxsSG9vaygnZGV0YWNoZWQnKTtcbiAgICAgIGlmIChjYikgY2IoKTtcbiAgICB9O1xuICAgIGlmICh0aGlzLl9pc0ZyYWdtZW50KSB7XG4gICAgICByZW1vdmVOb2RlUmFuZ2UodGhpcy5fZnJhZ21lbnRTdGFydCwgdGhpcy5fZnJhZ21lbnRFbmQsIHRoaXMsIHRoaXMuX2ZyYWdtZW50LCByZWFsQ2IpO1xuICAgIH0gZWxzZSB7XG4gICAgICB2YXIgb3AgPSB3aXRoVHJhbnNpdGlvbiA9PT0gZmFsc2UgPyByZW1vdmVXaXRoQ2IgOiByZW1vdmVXaXRoVHJhbnNpdGlvbjtcbiAgICAgIG9wKHRoaXMuJGVsLCB0aGlzLCByZWFsQ2IpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogU2hhcmVkIERPTSBpbnNlcnRpb24gZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7VnVlfSB2bVxuICAgKiBAcGFyYW0ge0VsZW1lbnR9IHRhcmdldFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBbY2JdXG4gICAqIEBwYXJhbSB7Qm9vbGVhbn0gW3dpdGhUcmFuc2l0aW9uXVxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBvcDEgLSBvcCBmb3Igbm9uLXRyYW5zaXRpb24gaW5zZXJ0XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IG9wMiAtIG9wIGZvciB0cmFuc2l0aW9uIGluc2VydFxuICAgKiBAcmV0dXJuIHZtXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGluc2VydCh2bSwgdGFyZ2V0LCBjYiwgd2l0aFRyYW5zaXRpb24sIG9wMSwgb3AyKSB7XG4gICAgdGFyZ2V0ID0gcXVlcnkodGFyZ2V0KTtcbiAgICB2YXIgdGFyZ2V0SXNEZXRhY2hlZCA9ICFpbkRvYyh0YXJnZXQpO1xuICAgIHZhciBvcCA9IHdpdGhUcmFuc2l0aW9uID09PSBmYWxzZSB8fCB0YXJnZXRJc0RldGFjaGVkID8gb3AxIDogb3AyO1xuICAgIHZhciBzaG91bGRDYWxsSG9vayA9ICF0YXJnZXRJc0RldGFjaGVkICYmICF2bS5faXNBdHRhY2hlZCAmJiAhaW5Eb2Modm0uJGVsKTtcbiAgICBpZiAodm0uX2lzRnJhZ21lbnQpIHtcbiAgICAgIG1hcE5vZGVSYW5nZSh2bS5fZnJhZ21lbnRTdGFydCwgdm0uX2ZyYWdtZW50RW5kLCBmdW5jdGlvbiAobm9kZSkge1xuICAgICAgICBvcChub2RlLCB0YXJnZXQsIHZtKTtcbiAgICAgIH0pO1xuICAgICAgY2IgJiYgY2IoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgb3Aodm0uJGVsLCB0YXJnZXQsIHZtLCBjYik7XG4gICAgfVxuICAgIGlmIChzaG91bGRDYWxsSG9vaykge1xuICAgICAgdm0uX2NhbGxIb29rKCdhdHRhY2hlZCcpO1xuICAgIH1cbiAgICByZXR1cm4gdm07XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgZm9yIHNlbGVjdG9yc1xuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xFbGVtZW50fSBlbFxuICAgKi9cblxuICBmdW5jdGlvbiBxdWVyeShlbCkge1xuICAgIHJldHVybiB0eXBlb2YgZWwgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbCkgOiBlbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBlbmQgb3BlcmF0aW9uIHRoYXQgdGFrZXMgYSBjYWxsYmFjay5cbiAgICpcbiAgICogQHBhcmFtIHtOb2RlfSBlbFxuICAgKiBAcGFyYW0ge05vZGV9IHRhcmdldFxuICAgKiBAcGFyYW0ge1Z1ZX0gdm0gLSB1bnVzZWRcbiAgICogQHBhcmFtIHtGdW5jdGlvbn0gW2NiXVxuICAgKi9cblxuICBmdW5jdGlvbiBhcHBlbmQoZWwsIHRhcmdldCwgdm0sIGNiKSB7XG4gICAgdGFyZ2V0LmFwcGVuZENoaWxkKGVsKTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cblxuICAvKipcbiAgICogSW5zZXJ0QmVmb3JlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICogQHBhcmFtIHtOb2RlfSB0YXJnZXRcbiAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gYmVmb3JlV2l0aENiKGVsLCB0YXJnZXQsIHZtLCBjYikge1xuICAgIGJlZm9yZShlbCwgdGFyZ2V0KTtcbiAgICBpZiAoY2IpIGNiKCk7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlIG9wZXJhdGlvbiB0aGF0IHRha2VzIGEgY2FsbGJhY2suXG4gICAqXG4gICAqIEBwYXJhbSB7Tm9kZX0gZWxcbiAgICogQHBhcmFtIHtWdWV9IHZtIC0gdW51c2VkXG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IFtjYl1cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVtb3ZlV2l0aENiKGVsLCB2bSwgY2IpIHtcbiAgICByZW1vdmUoZWwpO1xuICAgIGlmIChjYikgY2IoKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBldmVudHNBUEkgKFZ1ZSkge1xuICAvKipcbiAgICogTGlzdGVuIG9uIHRoZSBnaXZlbiBgZXZlbnRgIHdpdGggYGZuYC5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9uID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgICh0aGlzLl9ldmVudHNbZXZlbnRdIHx8ICh0aGlzLl9ldmVudHNbZXZlbnRdID0gW10pKS5wdXNoKGZuKTtcbiAgICBtb2RpZnlMaXN0ZW5lckNvdW50KHRoaXMsIGV2ZW50LCAxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQWRkcyBhbiBgZXZlbnRgIGxpc3RlbmVyIHRoYXQgd2lsbCBiZSBpbnZva2VkIGEgc2luZ2xlXG4gICAqIHRpbWUgdGhlbiBhdXRvbWF0aWNhbGx5IHJlbW92ZWQuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRvbmNlID0gZnVuY3Rpb24gKGV2ZW50LCBmbikge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICBmdW5jdGlvbiBvbigpIHtcbiAgICAgIHNlbGYuJG9mZihldmVudCwgb24pO1xuICAgICAgZm4uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG4gICAgb24uZm4gPSBmbjtcbiAgICB0aGlzLiRvbihldmVudCwgb24pO1xuICAgIHJldHVybiB0aGlzO1xuICB9O1xuXG4gIC8qKlxuICAgKiBSZW1vdmUgdGhlIGdpdmVuIGNhbGxiYWNrIGZvciBgZXZlbnRgIG9yIGFsbFxuICAgKiByZWdpc3RlcmVkIGNhbGxiYWNrcy5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IGV2ZW50XG4gICAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJG9mZiA9IGZ1bmN0aW9uIChldmVudCwgZm4pIHtcbiAgICB2YXIgY2JzO1xuICAgIC8vIGFsbFxuICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgaWYgKHRoaXMuJHBhcmVudCkge1xuICAgICAgICBmb3IgKGV2ZW50IGluIHRoaXMuX2V2ZW50cykge1xuICAgICAgICAgIGNicyA9IHRoaXMuX2V2ZW50c1tldmVudF07XG4gICAgICAgICAgaWYgKGNicykge1xuICAgICAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLWNicy5sZW5ndGgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5fZXZlbnRzID0ge307XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgLy8gc3BlY2lmaWMgZXZlbnRcbiAgICBjYnMgPSB0aGlzLl9ldmVudHNbZXZlbnRdO1xuICAgIGlmICghY2JzKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICAgIG1vZGlmeUxpc3RlbmVyQ291bnQodGhpcywgZXZlbnQsIC1jYnMubGVuZ3RoKTtcbiAgICAgIHRoaXMuX2V2ZW50c1tldmVudF0gPSBudWxsO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIC8vIHNwZWNpZmljIGhhbmRsZXJcbiAgICB2YXIgY2I7XG4gICAgdmFyIGkgPSBjYnMubGVuZ3RoO1xuICAgIHdoaWxlIChpLS0pIHtcbiAgICAgIGNiID0gY2JzW2ldO1xuICAgICAgaWYgKGNiID09PSBmbiB8fCBjYi5mbiA9PT0gZm4pIHtcbiAgICAgICAgbW9kaWZ5TGlzdGVuZXJDb3VudCh0aGlzLCBldmVudCwgLTEpO1xuICAgICAgICBjYnMuc3BsaWNlKGksIDEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG5cbiAgLyoqXG4gICAqIFRyaWdnZXIgYW4gZXZlbnQgb24gc2VsZi5cbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd8T2JqZWN0fSBldmVudFxuICAgKiBAcmV0dXJuIHtCb29sZWFufSBzaG91bGRQcm9wYWdhdGVcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kZW1pdCA9IGZ1bmN0aW9uIChldmVudCkge1xuICAgIHZhciBpc1NvdXJjZSA9IHR5cGVvZiBldmVudCA9PT0gJ3N0cmluZyc7XG4gICAgZXZlbnQgPSBpc1NvdXJjZSA/IGV2ZW50IDogZXZlbnQubmFtZTtcbiAgICB2YXIgY2JzID0gdGhpcy5fZXZlbnRzW2V2ZW50XTtcbiAgICB2YXIgc2hvdWxkUHJvcGFnYXRlID0gaXNTb3VyY2UgfHwgIWNicztcbiAgICBpZiAoY2JzKSB7XG4gICAgICBjYnMgPSBjYnMubGVuZ3RoID4gMSA/IHRvQXJyYXkoY2JzKSA6IGNicztcbiAgICAgIC8vIHRoaXMgaXMgYSBzb21ld2hhdCBoYWNreSBzb2x1dGlvbiB0byB0aGUgcXVlc3Rpb24gcmFpc2VkXG4gICAgICAvLyBpbiAjMjEwMjogZm9yIGFuIGlubGluZSBjb21wb25lbnQgbGlzdGVuZXIgbGlrZSA8Y29tcCBAdGVzdD1cImRvVGhpc1wiPixcbiAgICAgIC8vIHRoZSBwcm9wYWdhdGlvbiBoYW5kbGluZyBpcyBzb21ld2hhdCBicm9rZW4uIFRoZXJlZm9yZSB3ZVxuICAgICAgLy8gbmVlZCB0byB0cmVhdCB0aGVzZSBpbmxpbmUgY2FsbGJhY2tzIGRpZmZlcmVudGx5LlxuICAgICAgdmFyIGhhc1BhcmVudENicyA9IGlzU291cmNlICYmIGNicy5zb21lKGZ1bmN0aW9uIChjYikge1xuICAgICAgICByZXR1cm4gY2IuX2Zyb21QYXJlbnQ7XG4gICAgICB9KTtcbiAgICAgIGlmIChoYXNQYXJlbnRDYnMpIHtcbiAgICAgICAgc2hvdWxkUHJvcGFnYXRlID0gZmFsc2U7XG4gICAgICB9XG4gICAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2JzLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgICAgICB2YXIgY2IgPSBjYnNbaV07XG4gICAgICAgIHZhciByZXMgPSBjYi5hcHBseSh0aGlzLCBhcmdzKTtcbiAgICAgICAgaWYgKHJlcyA9PT0gdHJ1ZSAmJiAoIWhhc1BhcmVudENicyB8fCBjYi5fZnJvbVBhcmVudCkpIHtcbiAgICAgICAgICBzaG91bGRQcm9wYWdhdGUgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBzaG91bGRQcm9wYWdhdGU7XG4gIH07XG5cbiAgLyoqXG4gICAqIFJlY3Vyc2l2ZWx5IGJyb2FkY2FzdCBhbiBldmVudCB0byBhbGwgY2hpbGRyZW4gaW5zdGFuY2VzLlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ3xPYmplY3R9IGV2ZW50XG4gICAqIEBwYXJhbSB7Li4uKn0gYWRkaXRpb25hbCBhcmd1bWVudHNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kYnJvYWRjYXN0ID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIGlzU291cmNlID0gdHlwZW9mIGV2ZW50ID09PSAnc3RyaW5nJztcbiAgICBldmVudCA9IGlzU291cmNlID8gZXZlbnQgOiBldmVudC5uYW1lO1xuICAgIC8vIGlmIG5vIGNoaWxkIGhhcyByZWdpc3RlcmVkIGZvciB0aGlzIGV2ZW50LFxuICAgIC8vIHRoZW4gdGhlcmUncyBubyBuZWVkIHRvIGJyb2FkY2FzdC5cbiAgICBpZiAoIXRoaXMuX2V2ZW50c0NvdW50W2V2ZW50XSkgcmV0dXJuO1xuICAgIHZhciBjaGlsZHJlbiA9IHRoaXMuJGNoaWxkcmVuO1xuICAgIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMpO1xuICAgIGlmIChpc1NvdXJjZSkge1xuICAgICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcbiAgICAgIC8vIG9uIGNoaWxkcmVuXG4gICAgICBhcmdzWzBdID0geyBuYW1lOiBldmVudCwgc291cmNlOiB0aGlzIH07XG4gICAgfVxuICAgIGZvciAodmFyIGkgPSAwLCBsID0gY2hpbGRyZW4ubGVuZ3RoOyBpIDwgbDsgaSsrKSB7XG4gICAgICB2YXIgY2hpbGQgPSBjaGlsZHJlbltpXTtcbiAgICAgIHZhciBzaG91bGRQcm9wYWdhdGUgPSBjaGlsZC4kZW1pdC5hcHBseShjaGlsZCwgYXJncyk7XG4gICAgICBpZiAoc2hvdWxkUHJvcGFnYXRlKSB7XG4gICAgICAgIGNoaWxkLiRicm9hZGNhc3QuYXBwbHkoY2hpbGQsIGFyZ3MpO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogUmVjdXJzaXZlbHkgcHJvcGFnYXRlIGFuIGV2ZW50IHVwIHRoZSBwYXJlbnQgY2hhaW4uXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0gey4uLip9IGFkZGl0aW9uYWwgYXJndW1lbnRzXG4gICAqL1xuXG4gIFZ1ZS5wcm90b3R5cGUuJGRpc3BhdGNoID0gZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgdmFyIHNob3VsZFByb3BhZ2F0ZSA9IHRoaXMuJGVtaXQuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICBpZiAoIXNob3VsZFByb3BhZ2F0ZSkgcmV0dXJuO1xuICAgIHZhciBwYXJlbnQgPSB0aGlzLiRwYXJlbnQ7XG4gICAgdmFyIGFyZ3MgPSB0b0FycmF5KGFyZ3VtZW50cyk7XG4gICAgLy8gdXNlIG9iamVjdCBldmVudCB0byBpbmRpY2F0ZSBub24tc291cmNlIGVtaXRcbiAgICAvLyBvbiBwYXJlbnRzXG4gICAgYXJnc1swXSA9IHsgbmFtZTogZXZlbnQsIHNvdXJjZTogdGhpcyB9O1xuICAgIHdoaWxlIChwYXJlbnQpIHtcbiAgICAgIHNob3VsZFByb3BhZ2F0ZSA9IHBhcmVudC4kZW1pdC5hcHBseShwYXJlbnQsIGFyZ3MpO1xuICAgICAgcGFyZW50ID0gc2hvdWxkUHJvcGFnYXRlID8gcGFyZW50LiRwYXJlbnQgOiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogTW9kaWZ5IHRoZSBsaXN0ZW5lciBjb3VudHMgb24gYWxsIHBhcmVudHMuXG4gICAqIFRoaXMgYm9va2tlZXBpbmcgYWxsb3dzICRicm9hZGNhc3QgdG8gcmV0dXJuIGVhcmx5IHdoZW5cbiAgICogbm8gY2hpbGQgaGFzIGxpc3RlbmVkIHRvIGEgY2VydGFpbiBldmVudC5cbiAgICpcbiAgICogQHBhcmFtIHtWdWV9IHZtXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBldmVudFxuICAgKiBAcGFyYW0ge051bWJlcn0gY291bnRcbiAgICovXG5cbiAgdmFyIGhvb2tSRSA9IC9eaG9vazovO1xuICBmdW5jdGlvbiBtb2RpZnlMaXN0ZW5lckNvdW50KHZtLCBldmVudCwgY291bnQpIHtcbiAgICB2YXIgcGFyZW50ID0gdm0uJHBhcmVudDtcbiAgICAvLyBob29rcyBkbyBub3QgZ2V0IGJyb2FkY2FzdGVkIHNvIG5vIG5lZWRcbiAgICAvLyB0byBkbyBib29ra2VlcGluZyBmb3IgdGhlbVxuICAgIGlmICghcGFyZW50IHx8ICFjb3VudCB8fCBob29rUkUudGVzdChldmVudCkpIHJldHVybjtcbiAgICB3aGlsZSAocGFyZW50KSB7XG4gICAgICBwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSA9IChwYXJlbnQuX2V2ZW50c0NvdW50W2V2ZW50XSB8fCAwKSArIGNvdW50O1xuICAgICAgcGFyZW50ID0gcGFyZW50LiRwYXJlbnQ7XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGxpZmVjeWNsZUFQSSAoVnVlKSB7XG4gIC8qKlxuICAgKiBTZXQgaW5zdGFuY2UgdGFyZ2V0IGVsZW1lbnQgYW5kIGtpY2sgb2ZmIHRoZSBjb21waWxhdGlvblxuICAgKiBwcm9jZXNzLiBUaGUgcGFzc2VkIGluIGBlbGAgY2FuIGJlIGEgc2VsZWN0b3Igc3RyaW5nLCBhblxuICAgKiBleGlzdGluZyBFbGVtZW50LCBvciBhIERvY3VtZW50RnJhZ21lbnQgKGZvciBibG9ja1xuICAgKiBpbnN0YW5jZXMpLlxuICAgKlxuICAgKiBAcGFyYW0ge0VsZW1lbnR8RG9jdW1lbnRGcmFnbWVudHxzdHJpbmd9IGVsXG4gICAqIEBwdWJsaWNcbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kbW91bnQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICBpZiAodGhpcy5faXNDb21waWxlZCkge1xuICAgICAgcHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJyAmJiB3YXJuKCckbW91bnQoKSBzaG91bGQgYmUgY2FsbGVkIG9ubHkgb25jZS4nLCB0aGlzKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgZWwgPSBxdWVyeShlbCk7XG4gICAgaWYgKCFlbCkge1xuICAgICAgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICB9XG4gICAgdGhpcy5fY29tcGlsZShlbCk7XG4gICAgdGhpcy5faW5pdERPTUhvb2tzKCk7XG4gICAgaWYgKGluRG9jKHRoaXMuJGVsKSkge1xuICAgICAgdGhpcy5fY2FsbEhvb2soJ2F0dGFjaGVkJyk7XG4gICAgICByZWFkeS5jYWxsKHRoaXMpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLiRvbmNlKCdob29rOmF0dGFjaGVkJywgcmVhZHkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogTWFyayBhbiBpbnN0YW5jZSBhcyByZWFkeS5cbiAgICovXG5cbiAgZnVuY3Rpb24gcmVhZHkoKSB7XG4gICAgdGhpcy5faXNBdHRhY2hlZCA9IHRydWU7XG4gICAgdGhpcy5faXNSZWFkeSA9IHRydWU7XG4gICAgdGhpcy5fY2FsbEhvb2soJ3JlYWR5Jyk7XG4gIH1cblxuICAvKipcbiAgICogVGVhcmRvd24gdGhlIGluc3RhbmNlLCBzaW1wbHkgZGVsZWdhdGUgdG8gdGhlIGludGVybmFsXG4gICAqIF9kZXN0cm95LlxuICAgKlxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IHJlbW92ZVxuICAgKiBAcGFyYW0ge0Jvb2xlYW59IGRlZmVyQ2xlYW51cFxuICAgKi9cblxuICBWdWUucHJvdG90eXBlLiRkZXN0cm95ID0gZnVuY3Rpb24gKHJlbW92ZSwgZGVmZXJDbGVhbnVwKSB7XG4gICAgdGhpcy5fZGVzdHJveShyZW1vdmUsIGRlZmVyQ2xlYW51cCk7XG4gIH07XG5cbiAgLyoqXG4gICAqIFBhcnRpYWxseSBjb21waWxlIGEgcGllY2Ugb2YgRE9NIGFuZCByZXR1cm4gYVxuICAgKiBkZWNvbXBpbGUgZnVuY3Rpb24uXG4gICAqXG4gICAqIEBwYXJhbSB7RWxlbWVudHxEb2N1bWVudEZyYWdtZW50fSBlbFxuICAgKiBAcGFyYW0ge1Z1ZX0gW2hvc3RdXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBbc2NvcGVdXG4gICAqIEBwYXJhbSB7RnJhZ21lbnR9IFtmcmFnXVxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgVnVlLnByb3RvdHlwZS4kY29tcGlsZSA9IGZ1bmN0aW9uIChlbCwgaG9zdCwgc2NvcGUsIGZyYWcpIHtcbiAgICByZXR1cm4gY29tcGlsZShlbCwgdGhpcy4kb3B0aW9ucywgdHJ1ZSkodGhpcywgZWwsIGhvc3QsIHNjb3BlLCBmcmFnKTtcbiAgfTtcbn1cblxuLyoqXG4gKiBUaGUgZXhwb3NlZCBWdWUgY29uc3RydWN0b3IuXG4gKlxuICogQVBJIGNvbnZlbnRpb25zOlxuICogLSBwdWJsaWMgQVBJIG1ldGhvZHMvcHJvcGVydGllcyBhcmUgcHJlZml4ZWQgd2l0aCBgJGBcbiAqIC0gaW50ZXJuYWwgbWV0aG9kcy9wcm9wZXJ0aWVzIGFyZSBwcmVmaXhlZCB3aXRoIGBfYFxuICogLSBub24tcHJlZml4ZWQgcHJvcGVydGllcyBhcmUgYXNzdW1lZCB0byBiZSBwcm94aWVkIHVzZXJcbiAqICAgZGF0YS5cbiAqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc11cbiAqIEBwdWJsaWNcbiAqL1xuXG5mdW5jdGlvbiBWdWUob3B0aW9ucykge1xuICB0aGlzLl9pbml0KG9wdGlvbnMpO1xufVxuXG4vLyBpbnN0YWxsIGludGVybmFsc1xuaW5pdE1peGluKFZ1ZSk7XG5zdGF0ZU1peGluKFZ1ZSk7XG5ldmVudHNNaXhpbihWdWUpO1xubGlmZWN5Y2xlTWl4aW4oVnVlKTtcbm1pc2NNaXhpbihWdWUpO1xuXG4vLyBpbnN0YWxsIGluc3RhbmNlIEFQSXNcbmRhdGFBUEkoVnVlKTtcbmRvbUFQSShWdWUpO1xuZXZlbnRzQVBJKFZ1ZSk7XG5saWZlY3ljbGVBUEkoVnVlKTtcblxudmFyIHNsb3QgPSB7XG5cbiAgcHJpb3JpdHk6IFNMT1QsXG4gIHBhcmFtczogWyduYW1lJ10sXG5cbiAgYmluZDogZnVuY3Rpb24gYmluZCgpIHtcbiAgICAvLyB0aGlzIHdhcyByZXNvbHZlZCBkdXJpbmcgY29tcG9uZW50IHRyYW5zY2x1c2lvblxuICAgIHZhciBuYW1lID0gdGhpcy5wYXJhbXMubmFtZSB8fCAnZGVmYXVsdCc7XG4gICAgdmFyIGNvbnRlbnQgPSB0aGlzLnZtLl9zbG90Q29udGVudHMgJiYgdGhpcy52bS5fc2xvdENvbnRlbnRzW25hbWVdO1xuICAgIGlmICghY29udGVudCB8fCAhY29udGVudC5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgIHRoaXMuZmFsbGJhY2soKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb21waWxlKGNvbnRlbnQuY2xvbmVOb2RlKHRydWUpLCB0aGlzLnZtLl9jb250ZXh0LCB0aGlzLnZtKTtcbiAgICB9XG4gIH0sXG5cbiAgY29tcGlsZTogZnVuY3Rpb24gY29tcGlsZShjb250ZW50LCBjb250ZXh0LCBob3N0KSB7XG4gICAgaWYgKGNvbnRlbnQgJiYgY29udGV4dCkge1xuICAgICAgaWYgKHRoaXMuZWwuaGFzQ2hpbGROb2RlcygpICYmIGNvbnRlbnQuY2hpbGROb2Rlcy5sZW5ndGggPT09IDEgJiYgY29udGVudC5jaGlsZE5vZGVzWzBdLm5vZGVUeXBlID09PSAxICYmIGNvbnRlbnQuY2hpbGROb2Rlc1swXS5oYXNBdHRyaWJ1dGUoJ3YtaWYnKSkge1xuICAgICAgICAvLyBpZiB0aGUgaW5zZXJ0ZWQgc2xvdCBoYXMgdi1pZlxuICAgICAgICAvLyBpbmplY3QgZmFsbGJhY2sgY29udGVudCBhcyB0aGUgdi1lbHNlXG4gICAgICAgIHZhciBlbHNlQmxvY2sgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZW1wbGF0ZScpO1xuICAgICAgICBlbHNlQmxvY2suc2V0QXR0cmlidXRlKCd2LWVsc2UnLCAnJyk7XG4gICAgICAgIGVsc2VCbG9jay5pbm5lckhUTUwgPSB0aGlzLmVsLmlubmVySFRNTDtcbiAgICAgICAgLy8gdGhlIGVsc2UgYmxvY2sgc2hvdWxkIGJlIGNvbXBpbGVkIGluIGNoaWxkIHNjb3BlXG4gICAgICAgIGVsc2VCbG9jay5fY29udGV4dCA9IHRoaXMudm07XG4gICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWxzZUJsb2NrKTtcbiAgICAgIH1cbiAgICAgIHZhciBzY29wZSA9IGhvc3QgPyBob3N0Ll9zY29wZSA6IHRoaXMuX3Njb3BlO1xuICAgICAgdGhpcy51bmxpbmsgPSBjb250ZXh0LiRjb21waWxlKGNvbnRlbnQsIGhvc3QsIHNjb3BlLCB0aGlzLl9mcmFnKTtcbiAgICB9XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIHJlcGxhY2UodGhpcy5lbCwgY29udGVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlbW92ZSh0aGlzLmVsKTtcbiAgICB9XG4gIH0sXG5cbiAgZmFsbGJhY2s6IGZ1bmN0aW9uIGZhbGxiYWNrKCkge1xuICAgIHRoaXMuY29tcGlsZShleHRyYWN0Q29udGVudCh0aGlzLmVsLCB0cnVlKSwgdGhpcy52bSk7XG4gIH0sXG5cbiAgdW5iaW5kOiBmdW5jdGlvbiB1bmJpbmQoKSB7XG4gICAgaWYgKHRoaXMudW5saW5rKSB7XG4gICAgICB0aGlzLnVubGluaygpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIHBhcnRpYWwgPSB7XG5cbiAgcHJpb3JpdHk6IFBBUlRJQUwsXG5cbiAgcGFyYW1zOiBbJ25hbWUnXSxcblxuICAvLyB3YXRjaCBjaGFuZ2VzIHRvIG5hbWUgZm9yIGR5bmFtaWMgcGFydGlhbHNcbiAgcGFyYW1XYXRjaGVyczoge1xuICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUodmFsdWUpIHtcbiAgICAgIHZJZi5yZW1vdmUuY2FsbCh0aGlzKTtcbiAgICAgIGlmICh2YWx1ZSkge1xuICAgICAgICB0aGlzLmluc2VydCh2YWx1ZSk7XG4gICAgICB9XG4gICAgfVxuICB9LFxuXG4gIGJpbmQ6IGZ1bmN0aW9uIGJpbmQoKSB7XG4gICAgdGhpcy5hbmNob3IgPSBjcmVhdGVBbmNob3IoJ3YtcGFydGlhbCcpO1xuICAgIHJlcGxhY2UodGhpcy5lbCwgdGhpcy5hbmNob3IpO1xuICAgIHRoaXMuaW5zZXJ0KHRoaXMucGFyYW1zLm5hbWUpO1xuICB9LFxuXG4gIGluc2VydDogZnVuY3Rpb24gaW5zZXJ0KGlkKSB7XG4gICAgdmFyIHBhcnRpYWwgPSByZXNvbHZlQXNzZXQodGhpcy52bS4kb3B0aW9ucywgJ3BhcnRpYWxzJywgaWQsIHRydWUpO1xuICAgIGlmIChwYXJ0aWFsKSB7XG4gICAgICB0aGlzLmZhY3RvcnkgPSBuZXcgRnJhZ21lbnRGYWN0b3J5KHRoaXMudm0sIHBhcnRpYWwpO1xuICAgICAgdklmLmluc2VydC5jYWxsKHRoaXMpO1xuICAgIH1cbiAgfSxcblxuICB1bmJpbmQ6IGZ1bmN0aW9uIHVuYmluZCgpIHtcbiAgICBpZiAodGhpcy5mcmFnKSB7XG4gICAgICB0aGlzLmZyYWcuZGVzdHJveSgpO1xuICAgIH1cbiAgfVxufTtcblxudmFyIGVsZW1lbnREaXJlY3RpdmVzID0ge1xuICBzbG90OiBzbG90LFxuICBwYXJ0aWFsOiBwYXJ0aWFsXG59O1xuXG52YXIgY29udmVydEFycmF5ID0gdkZvci5fcG9zdFByb2Nlc3M7XG5cbi8qKlxuICogTGltaXQgZmlsdGVyIGZvciBhcnJheXNcbiAqXG4gKiBAcGFyYW0ge051bWJlcn0gblxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAoRGVjaW1hbCBleHBlY3RlZClcbiAqL1xuXG5mdW5jdGlvbiBsaW1pdEJ5KGFyciwgbiwgb2Zmc2V0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA/IHBhcnNlSW50KG9mZnNldCwgMTApIDogMDtcbiAgbiA9IHRvTnVtYmVyKG4pO1xuICByZXR1cm4gdHlwZW9mIG4gPT09ICdudW1iZXInID8gYXJyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbikgOiBhcnI7XG59XG5cbi8qKlxuICogRmlsdGVyIGZpbHRlciBmb3IgYXJyYXlzXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNlYXJjaFxuICogQHBhcmFtIHtTdHJpbmd9IFtkZWxpbWl0ZXJdXG4gKiBAcGFyYW0ge1N0cmluZ30gLi4uZGF0YUtleXNcbiAqL1xuXG5mdW5jdGlvbiBmaWx0ZXJCeShhcnIsIHNlYXJjaCwgZGVsaW1pdGVyKSB7XG4gIGFyciA9IGNvbnZlcnRBcnJheShhcnIpO1xuICBpZiAoc2VhcmNoID09IG51bGwpIHtcbiAgICByZXR1cm4gYXJyO1xuICB9XG4gIGlmICh0eXBlb2Ygc2VhcmNoID09PSAnZnVuY3Rpb24nKSB7XG4gICAgcmV0dXJuIGFyci5maWx0ZXIoc2VhcmNoKTtcbiAgfVxuICAvLyBjYXN0IHRvIGxvd2VyY2FzZSBzdHJpbmdcbiAgc2VhcmNoID0gKCcnICsgc2VhcmNoKS50b0xvd2VyQ2FzZSgpO1xuICAvLyBhbGxvdyBvcHRpb25hbCBgaW5gIGRlbGltaXRlclxuICAvLyBiZWNhdXNlIHdoeSBub3RcbiAgdmFyIG4gPSBkZWxpbWl0ZXIgPT09ICdpbicgPyAzIDogMjtcbiAgLy8gZXh0cmFjdCBhbmQgZmxhdHRlbiBrZXlzXG4gIHZhciBrZXlzID0gQXJyYXkucHJvdG90eXBlLmNvbmNhdC5hcHBseShbXSwgdG9BcnJheShhcmd1bWVudHMsIG4pKTtcbiAgdmFyIHJlcyA9IFtdO1xuICB2YXIgaXRlbSwga2V5LCB2YWwsIGo7XG4gIGZvciAodmFyIGkgPSAwLCBsID0gYXJyLmxlbmd0aDsgaSA8IGw7IGkrKykge1xuICAgIGl0ZW0gPSBhcnJbaV07XG4gICAgdmFsID0gaXRlbSAmJiBpdGVtLiR2YWx1ZSB8fCBpdGVtO1xuICAgIGogPSBrZXlzLmxlbmd0aDtcbiAgICBpZiAoaikge1xuICAgICAgd2hpbGUgKGotLSkge1xuICAgICAgICBrZXkgPSBrZXlzW2pdO1xuICAgICAgICBpZiAoa2V5ID09PSAnJGtleScgJiYgY29udGFpbnMoaXRlbS4ka2V5LCBzZWFyY2gpIHx8IGNvbnRhaW5zKGdldFBhdGgodmFsLCBrZXkpLCBzZWFyY2gpKSB7XG4gICAgICAgICAgcmVzLnB1c2goaXRlbSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGNvbnRhaW5zKGl0ZW0sIHNlYXJjaCkpIHtcbiAgICAgIHJlcy5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgfVxuICByZXR1cm4gcmVzO1xufVxuXG4vKipcbiAqIEZpbHRlciBmaWx0ZXIgZm9yIGFycmF5c1xuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5PFN0cmluZz58RnVuY3Rpb259IC4uLnNvcnRLZXlzXG4gKiBAcGFyYW0ge051bWJlcn0gW29yZGVyXVxuICovXG5cbmZ1bmN0aW9uIG9yZGVyQnkoYXJyKSB7XG4gIHZhciBjb21wYXJhdG9yID0gbnVsbDtcbiAgdmFyIHNvcnRLZXlzID0gdW5kZWZpbmVkO1xuICBhcnIgPSBjb252ZXJ0QXJyYXkoYXJyKTtcblxuICAvLyBkZXRlcm1pbmUgb3JkZXIgKGxhc3QgYXJndW1lbnQpXG4gIHZhciBhcmdzID0gdG9BcnJheShhcmd1bWVudHMsIDEpO1xuICB2YXIgb3JkZXIgPSBhcmdzW2FyZ3MubGVuZ3RoIC0gMV07XG4gIGlmICh0eXBlb2Ygb3JkZXIgPT09ICdudW1iZXInKSB7XG4gICAgb3JkZXIgPSBvcmRlciA8IDAgPyAtMSA6IDE7XG4gICAgYXJncyA9IGFyZ3MubGVuZ3RoID4gMSA/IGFyZ3Muc2xpY2UoMCwgLTEpIDogYXJncztcbiAgfSBlbHNlIHtcbiAgICBvcmRlciA9IDE7XG4gIH1cblxuICAvLyBkZXRlcm1pbmUgc29ydEtleXMgJiBjb21wYXJhdG9yXG4gIHZhciBmaXJzdEFyZyA9IGFyZ3NbMF07XG4gIGlmICghZmlyc3RBcmcpIHtcbiAgICByZXR1cm4gYXJyO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBmaXJzdEFyZyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIC8vIGN1c3RvbSBjb21wYXJhdG9yXG4gICAgY29tcGFyYXRvciA9IGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gZmlyc3RBcmcoYSwgYikgKiBvcmRlcjtcbiAgICB9O1xuICB9IGVsc2Uge1xuICAgIC8vIHN0cmluZyBrZXlzLiBmbGF0dGVuIGZpcnN0XG4gICAgc29ydEtleXMgPSBBcnJheS5wcm90b3R5cGUuY29uY2F0LmFwcGx5KFtdLCBhcmdzKTtcbiAgICBjb21wYXJhdG9yID0gZnVuY3Rpb24gKGEsIGIsIGkpIHtcbiAgICAgIGkgPSBpIHx8IDA7XG4gICAgICByZXR1cm4gaSA+PSBzb3J0S2V5cy5sZW5ndGggLSAxID8gYmFzZUNvbXBhcmUoYSwgYiwgaSkgOiBiYXNlQ29tcGFyZShhLCBiLCBpKSB8fCBjb21wYXJhdG9yKGEsIGIsIGkgKyAxKTtcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gYmFzZUNvbXBhcmUoYSwgYiwgc29ydEtleUluZGV4KSB7XG4gICAgdmFyIHNvcnRLZXkgPSBzb3J0S2V5c1tzb3J0S2V5SW5kZXhdO1xuICAgIGlmIChzb3J0S2V5KSB7XG4gICAgICBpZiAoc29ydEtleSAhPT0gJyRrZXknKSB7XG4gICAgICAgIGlmIChpc09iamVjdChhKSAmJiAnJHZhbHVlJyBpbiBhKSBhID0gYS4kdmFsdWU7XG4gICAgICAgIGlmIChpc09iamVjdChiKSAmJiAnJHZhbHVlJyBpbiBiKSBiID0gYi4kdmFsdWU7XG4gICAgICB9XG4gICAgICBhID0gaXNPYmplY3QoYSkgPyBnZXRQYXRoKGEsIHNvcnRLZXkpIDogYTtcbiAgICAgIGIgPSBpc09iamVjdChiKSA/IGdldFBhdGgoYiwgc29ydEtleSkgOiBiO1xuICAgIH1cbiAgICByZXR1cm4gYSA9PT0gYiA/IDAgOiBhID4gYiA/IG9yZGVyIDogLW9yZGVyO1xuICB9XG5cbiAgLy8gc29ydCBvbiBhIGNvcHkgdG8gYXZvaWQgbXV0YXRpbmcgb3JpZ2luYWwgYXJyYXlcbiAgcmV0dXJuIGFyci5zbGljZSgpLnNvcnQoY29tcGFyYXRvcik7XG59XG5cbi8qKlxuICogU3RyaW5nIGNvbnRhaW4gaGVscGVyXG4gKlxuICogQHBhcmFtIHsqfSB2YWxcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZWFyY2hcbiAqL1xuXG5mdW5jdGlvbiBjb250YWlucyh2YWwsIHNlYXJjaCkge1xuICB2YXIgaTtcbiAgaWYgKGlzUGxhaW5PYmplY3QodmFsKSkge1xuICAgIHZhciBrZXlzID0gT2JqZWN0LmtleXModmFsKTtcbiAgICBpID0ga2V5cy5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNvbnRhaW5zKHZhbFtrZXlzW2ldXSwgc2VhcmNoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoaXNBcnJheSh2YWwpKSB7XG4gICAgaSA9IHZhbC5sZW5ndGg7XG4gICAgd2hpbGUgKGktLSkge1xuICAgICAgaWYgKGNvbnRhaW5zKHZhbFtpXSwgc2VhcmNoKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAodmFsICE9IG51bGwpIHtcbiAgICByZXR1cm4gdmFsLnRvU3RyaW5nKCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHNlYXJjaCkgPiAtMTtcbiAgfVxufVxuXG52YXIgZGlnaXRzUkUgPSAvKFxcZHszfSkoPz1cXGQpL2c7XG5cbi8vIGFzc2V0IGNvbGxlY3Rpb25zIG11c3QgYmUgYSBwbGFpbiBvYmplY3QuXG52YXIgZmlsdGVycyA9IHtcblxuICBvcmRlckJ5OiBvcmRlckJ5LFxuICBmaWx0ZXJCeTogZmlsdGVyQnksXG4gIGxpbWl0Qnk6IGxpbWl0QnksXG5cbiAgLyoqXG4gICAqIFN0cmluZ2lmeSB2YWx1ZS5cbiAgICpcbiAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGVudFxuICAgKi9cblxuICBqc29uOiB7XG4gICAgcmVhZDogZnVuY3Rpb24gcmVhZCh2YWx1ZSwgaW5kZW50KSB7XG4gICAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyA/IHZhbHVlIDogSlNPTi5zdHJpbmdpZnkodmFsdWUsIG51bGwsIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gaW5kZW50IDogMik7XG4gICAgfSxcbiAgICB3cml0ZTogZnVuY3Rpb24gd3JpdGUodmFsdWUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKHZhbHVlKTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogJ2FiYycgPT4gJ0FiYydcbiAgICovXG5cbiAgY2FwaXRhbGl6ZTogZnVuY3Rpb24gY2FwaXRhbGl6ZSh2YWx1ZSkge1xuICAgIGlmICghdmFsdWUgJiYgdmFsdWUgIT09IDApIHJldHVybiAnJztcbiAgICB2YWx1ZSA9IHZhbHVlLnRvU3RyaW5nKCk7XG4gICAgcmV0dXJuIHZhbHVlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdmFsdWUuc2xpY2UoMSk7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdhYmMnID0+ICdBQkMnXG4gICAqL1xuXG4gIHVwcGVyY2FzZTogZnVuY3Rpb24gdXBwZXJjYXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b1VwcGVyQ2FzZSgpIDogJyc7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdBYkMnID0+ICdhYmMnXG4gICAqL1xuXG4gIGxvd2VyY2FzZTogZnVuY3Rpb24gbG93ZXJjYXNlKHZhbHVlKSB7XG4gICAgcmV0dXJuIHZhbHVlIHx8IHZhbHVlID09PSAwID8gdmFsdWUudG9TdHJpbmcoKS50b0xvd2VyQ2FzZSgpIDogJyc7XG4gIH0sXG5cbiAgLyoqXG4gICAqIDEyMzQ1ID0+ICQxMiwzNDUuMDBcbiAgICpcbiAgICogQHBhcmFtIHtTdHJpbmd9IHNpZ25cbiAgICogQHBhcmFtIHtOdW1iZXJ9IGRlY2ltYWxzIERlY2ltYWwgcGxhY2VzXG4gICAqL1xuXG4gIGN1cnJlbmN5OiBmdW5jdGlvbiBjdXJyZW5jeSh2YWx1ZSwgX2N1cnJlbmN5LCBkZWNpbWFscykge1xuICAgIHZhbHVlID0gcGFyc2VGbG9hdCh2YWx1ZSk7XG4gICAgaWYgKCFpc0Zpbml0ZSh2YWx1ZSkgfHwgIXZhbHVlICYmIHZhbHVlICE9PSAwKSByZXR1cm4gJyc7XG4gICAgX2N1cnJlbmN5ID0gX2N1cnJlbmN5ICE9IG51bGwgPyBfY3VycmVuY3kgOiAnJCc7XG4gICAgZGVjaW1hbHMgPSBkZWNpbWFscyAhPSBudWxsID8gZGVjaW1hbHMgOiAyO1xuICAgIHZhciBzdHJpbmdpZmllZCA9IE1hdGguYWJzKHZhbHVlKS50b0ZpeGVkKGRlY2ltYWxzKTtcbiAgICB2YXIgX2ludCA9IGRlY2ltYWxzID8gc3RyaW5naWZpZWQuc2xpY2UoMCwgLTEgLSBkZWNpbWFscykgOiBzdHJpbmdpZmllZDtcbiAgICB2YXIgaSA9IF9pbnQubGVuZ3RoICUgMztcbiAgICB2YXIgaGVhZCA9IGkgPiAwID8gX2ludC5zbGljZSgwLCBpKSArIChfaW50Lmxlbmd0aCA+IDMgPyAnLCcgOiAnJykgOiAnJztcbiAgICB2YXIgX2Zsb2F0ID0gZGVjaW1hbHMgPyBzdHJpbmdpZmllZC5zbGljZSgtMSAtIGRlY2ltYWxzKSA6ICcnO1xuICAgIHZhciBzaWduID0gdmFsdWUgPCAwID8gJy0nIDogJyc7XG4gICAgcmV0dXJuIHNpZ24gKyBfY3VycmVuY3kgKyBoZWFkICsgX2ludC5zbGljZShpKS5yZXBsYWNlKGRpZ2l0c1JFLCAnJDEsJykgKyBfZmxvYXQ7XG4gIH0sXG5cbiAgLyoqXG4gICAqICdpdGVtJyA9PiAnaXRlbXMnXG4gICAqXG4gICAqIEBwYXJhbXNcbiAgICogIGFuIGFycmF5IG9mIHN0cmluZ3MgY29ycmVzcG9uZGluZyB0b1xuICAgKiAgdGhlIHNpbmdsZSwgZG91YmxlLCB0cmlwbGUgLi4uIGZvcm1zIG9mIHRoZSB3b3JkIHRvXG4gICAqICBiZSBwbHVyYWxpemVkLiBXaGVuIHRoZSBudW1iZXIgdG8gYmUgcGx1cmFsaXplZFxuICAgKiAgZXhjZWVkcyB0aGUgbGVuZ3RoIG9mIHRoZSBhcmdzLCBpdCB3aWxsIHVzZSB0aGUgbGFzdFxuICAgKiAgZW50cnkgaW4gdGhlIGFycmF5LlxuICAgKlxuICAgKiAgZS5nLiBbJ3NpbmdsZScsICdkb3VibGUnLCAndHJpcGxlJywgJ211bHRpcGxlJ11cbiAgICovXG5cbiAgcGx1cmFsaXplOiBmdW5jdGlvbiBwbHVyYWxpemUodmFsdWUpIHtcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICB2YXIgbGVuZ3RoID0gYXJncy5sZW5ndGg7XG4gICAgaWYgKGxlbmd0aCA+IDEpIHtcbiAgICAgIHZhciBpbmRleCA9IHZhbHVlICUgMTAgLSAxO1xuICAgICAgcmV0dXJuIGluZGV4IGluIGFyZ3MgPyBhcmdzW2luZGV4XSA6IGFyZ3NbbGVuZ3RoIC0gMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBhcmdzWzBdICsgKHZhbHVlID09PSAxID8gJycgOiAncycpO1xuICAgIH1cbiAgfSxcblxuICAvKipcbiAgICogRGVib3VuY2UgYSBoYW5kbGVyIGZ1bmN0aW9uLlxuICAgKlxuICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBoYW5kbGVyXG4gICAqIEBwYXJhbSB7TnVtYmVyfSBkZWxheSA9IDMwMFxuICAgKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAgICovXG5cbiAgZGVib3VuY2U6IGZ1bmN0aW9uIGRlYm91bmNlKGhhbmRsZXIsIGRlbGF5KSB7XG4gICAgaWYgKCFoYW5kbGVyKSByZXR1cm47XG4gICAgaWYgKCFkZWxheSkge1xuICAgICAgZGVsYXkgPSAzMDA7XG4gICAgfVxuICAgIHJldHVybiBfZGVib3VuY2UoaGFuZGxlciwgZGVsYXkpO1xuICB9XG59O1xuXG5mdW5jdGlvbiBpbnN0YWxsR2xvYmFsQVBJIChWdWUpIHtcbiAgLyoqXG4gICAqIFZ1ZSBhbmQgZXZlcnkgY29uc3RydWN0b3IgdGhhdCBleHRlbmRzIFZ1ZSBoYXMgYW5cbiAgICogYXNzb2NpYXRlZCBvcHRpb25zIG9iamVjdCwgd2hpY2ggY2FuIGJlIGFjY2Vzc2VkIGR1cmluZ1xuICAgKiBjb21waWxhdGlvbiBzdGVwcyBhcyBgdGhpcy5jb25zdHJ1Y3Rvci5vcHRpb25zYC5cbiAgICpcbiAgICogVGhlc2UgY2FuIGJlIHNlZW4gYXMgdGhlIGRlZmF1bHQgb3B0aW9ucyBvZiBldmVyeVxuICAgKiBWdWUgaW5zdGFuY2UuXG4gICAqL1xuXG4gIFZ1ZS5vcHRpb25zID0ge1xuICAgIGRpcmVjdGl2ZXM6IGRpcmVjdGl2ZXMsXG4gICAgZWxlbWVudERpcmVjdGl2ZXM6IGVsZW1lbnREaXJlY3RpdmVzLFxuICAgIGZpbHRlcnM6IGZpbHRlcnMsXG4gICAgdHJhbnNpdGlvbnM6IHt9LFxuICAgIGNvbXBvbmVudHM6IHt9LFxuICAgIHBhcnRpYWxzOiB7fSxcbiAgICByZXBsYWNlOiB0cnVlXG4gIH07XG5cbiAgLyoqXG4gICAqIEV4cG9zZSB1c2VmdWwgaW50ZXJuYWxzXG4gICAqL1xuXG4gIFZ1ZS51dGlsID0gdXRpbDtcbiAgVnVlLmNvbmZpZyA9IGNvbmZpZztcbiAgVnVlLnNldCA9IHNldDtcbiAgVnVlWydkZWxldGUnXSA9IGRlbDtcbiAgVnVlLm5leHRUaWNrID0gbmV4dFRpY2s7XG5cbiAgLyoqXG4gICAqIFRoZSBmb2xsb3dpbmcgYXJlIGV4cG9zZWQgZm9yIGFkdmFuY2VkIHVzYWdlIC8gcGx1Z2luc1xuICAgKi9cblxuICBWdWUuY29tcGlsZXIgPSBjb21waWxlcjtcbiAgVnVlLkZyYWdtZW50RmFjdG9yeSA9IEZyYWdtZW50RmFjdG9yeTtcbiAgVnVlLmludGVybmFsRGlyZWN0aXZlcyA9IGludGVybmFsRGlyZWN0aXZlcztcbiAgVnVlLnBhcnNlcnMgPSB7XG4gICAgcGF0aDogcGF0aCxcbiAgICB0ZXh0OiB0ZXh0LFxuICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZSxcbiAgICBkaXJlY3RpdmU6IGRpcmVjdGl2ZSxcbiAgICBleHByZXNzaW9uOiBleHByZXNzaW9uXG4gIH07XG5cbiAgLyoqXG4gICAqIEVhY2ggaW5zdGFuY2UgY29uc3RydWN0b3IsIGluY2x1ZGluZyBWdWUsIGhhcyBhIHVuaXF1ZVxuICAgKiBjaWQuIFRoaXMgZW5hYmxlcyB1cyB0byBjcmVhdGUgd3JhcHBlZCBcImNoaWxkXG4gICAqIGNvbnN0cnVjdG9yc1wiIGZvciBwcm90b3R5cGFsIGluaGVyaXRhbmNlIGFuZCBjYWNoZSB0aGVtLlxuICAgKi9cblxuICBWdWUuY2lkID0gMDtcbiAgdmFyIGNpZCA9IDE7XG5cbiAgLyoqXG4gICAqIENsYXNzIGluaGVyaXRhbmNlXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBleHRlbmRPcHRpb25zXG4gICAqL1xuXG4gIFZ1ZS5leHRlbmQgPSBmdW5jdGlvbiAoZXh0ZW5kT3B0aW9ucykge1xuICAgIGV4dGVuZE9wdGlvbnMgPSBleHRlbmRPcHRpb25zIHx8IHt9O1xuICAgIHZhciBTdXBlciA9IHRoaXM7XG4gICAgdmFyIGlzRmlyc3RFeHRlbmQgPSBTdXBlci5jaWQgPT09IDA7XG4gICAgaWYgKGlzRmlyc3RFeHRlbmQgJiYgZXh0ZW5kT3B0aW9ucy5fQ3Rvcikge1xuICAgICAgcmV0dXJuIGV4dGVuZE9wdGlvbnMuX0N0b3I7XG4gICAgfVxuICAgIHZhciBuYW1lID0gZXh0ZW5kT3B0aW9ucy5uYW1lIHx8IFN1cGVyLm9wdGlvbnMubmFtZTtcbiAgICBpZiAocHJvY2Vzcy5lbnYuTk9ERV9FTlYgIT09ICdwcm9kdWN0aW9uJykge1xuICAgICAgaWYgKCEvXlthLXpBLVpdW1xcdy1dKiQvLnRlc3QobmFtZSkpIHtcbiAgICAgICAgd2FybignSW52YWxpZCBjb21wb25lbnQgbmFtZTogXCInICsgbmFtZSArICdcIi4gQ29tcG9uZW50IG5hbWVzICcgKyAnY2FuIG9ubHkgY29udGFpbiBhbHBoYW51bWVyaWMgY2hhcmFjYXRlcnMgYW5kIHRoZSBoeXBoZW4uJyk7XG4gICAgICAgIG5hbWUgPSBudWxsO1xuICAgICAgfVxuICAgIH1cbiAgICB2YXIgU3ViID0gY3JlYXRlQ2xhc3MobmFtZSB8fCAnVnVlQ29tcG9uZW50Jyk7XG4gICAgU3ViLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoU3VwZXIucHJvdG90eXBlKTtcbiAgICBTdWIucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gU3ViO1xuICAgIFN1Yi5jaWQgPSBjaWQrKztcbiAgICBTdWIub3B0aW9ucyA9IG1lcmdlT3B0aW9ucyhTdXBlci5vcHRpb25zLCBleHRlbmRPcHRpb25zKTtcbiAgICBTdWJbJ3N1cGVyJ10gPSBTdXBlcjtcbiAgICAvLyBhbGxvdyBmdXJ0aGVyIGV4dGVuc2lvblxuICAgIFN1Yi5leHRlbmQgPSBTdXBlci5leHRlbmQ7XG4gICAgLy8gY3JlYXRlIGFzc2V0IHJlZ2lzdGVycywgc28gZXh0ZW5kZWQgY2xhc3Nlc1xuICAgIC8vIGNhbiBoYXZlIHRoZWlyIHByaXZhdGUgYXNzZXRzIHRvby5cbiAgICBjb25maWcuX2Fzc2V0VHlwZXMuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkge1xuICAgICAgU3ViW3R5cGVdID0gU3VwZXJbdHlwZV07XG4gICAgfSk7XG4gICAgLy8gZW5hYmxlIHJlY3Vyc2l2ZSBzZWxmLWxvb2t1cFxuICAgIGlmIChuYW1lKSB7XG4gICAgICBTdWIub3B0aW9ucy5jb21wb25lbnRzW25hbWVdID0gU3ViO1xuICAgIH1cbiAgICAvLyBjYWNoZSBjb25zdHJ1Y3RvclxuICAgIGlmIChpc0ZpcnN0RXh0ZW5kKSB7XG4gICAgICBleHRlbmRPcHRpb25zLl9DdG9yID0gU3ViO1xuICAgIH1cbiAgICByZXR1cm4gU3ViO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBIGZ1bmN0aW9uIHRoYXQgcmV0dXJucyBhIHN1Yi1jbGFzcyBjb25zdHJ1Y3RvciB3aXRoIHRoZVxuICAgKiBnaXZlbiBuYW1lLiBUaGlzIGdpdmVzIHVzIG11Y2ggbmljZXIgb3V0cHV0IHdoZW5cbiAgICogbG9nZ2luZyBpbnN0YW5jZXMgaW4gdGhlIGNvbnNvbGUuXG4gICAqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gICAqIEByZXR1cm4ge0Z1bmN0aW9ufVxuICAgKi9cblxuICBmdW5jdGlvbiBjcmVhdGVDbGFzcyhuYW1lKSB7XG4gICAgLyogZXNsaW50LWRpc2FibGUgbm8tbmV3LWZ1bmMgKi9cbiAgICByZXR1cm4gbmV3IEZ1bmN0aW9uKCdyZXR1cm4gZnVuY3Rpb24gJyArIGNsYXNzaWZ5KG5hbWUpICsgJyAob3B0aW9ucykgeyB0aGlzLl9pbml0KG9wdGlvbnMpIH0nKSgpO1xuICAgIC8qIGVzbGludC1lbmFibGUgbm8tbmV3LWZ1bmMgKi9cbiAgfVxuXG4gIC8qKlxuICAgKiBQbHVnaW4gc3lzdGVtXG4gICAqXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBwbHVnaW5cbiAgICovXG5cbiAgVnVlLnVzZSA9IGZ1bmN0aW9uIChwbHVnaW4pIHtcbiAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICBpZiAocGx1Z2luLmluc3RhbGxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBhZGRpdGlvbmFsIHBhcmFtZXRlcnNcbiAgICB2YXIgYXJncyA9IHRvQXJyYXkoYXJndW1lbnRzLCAxKTtcbiAgICBhcmdzLnVuc2hpZnQodGhpcyk7XG4gICAgaWYgKHR5cGVvZiBwbHVnaW4uaW5zdGFsbCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgcGx1Z2luLmluc3RhbGwuYXBwbHkocGx1Z2luLCBhcmdzKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcGx1Z2luLmFwcGx5KG51bGwsIGFyZ3MpO1xuICAgIH1cbiAgICBwbHVnaW4uaW5zdGFsbGVkID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtcblxuICAvKipcbiAgICogQXBwbHkgYSBnbG9iYWwgbWl4aW4gYnkgbWVyZ2luZyBpdCBpbnRvIHRoZSBkZWZhdWx0XG4gICAqIG9wdGlvbnMuXG4gICAqL1xuXG4gIFZ1ZS5taXhpbiA9IGZ1bmN0aW9uIChtaXhpbikge1xuICAgIFZ1ZS5vcHRpb25zID0gbWVyZ2VPcHRpb25zKFZ1ZS5vcHRpb25zLCBtaXhpbik7XG4gIH07XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhc3NldCByZWdpc3RyYXRpb24gbWV0aG9kcyB3aXRoIHRoZSBmb2xsb3dpbmdcbiAgICogc2lnbmF0dXJlOlxuICAgKlxuICAgKiBAcGFyYW0ge1N0cmluZ30gaWRcbiAgICogQHBhcmFtIHsqfSBkZWZpbml0aW9uXG4gICAqL1xuXG4gIGNvbmZpZy5fYXNzZXRUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7XG4gICAgVnVlW3R5cGVdID0gZnVuY3Rpb24gKGlkLCBkZWZpbml0aW9uKSB7XG4gICAgICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICAgICAgcmV0dXJuIHRoaXMub3B0aW9uc1t0eXBlICsgJ3MnXVtpZF07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvKiBpc3RhbmJ1bCBpZ25vcmUgaWYgKi9cbiAgICAgICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WICE9PSAncHJvZHVjdGlvbicpIHtcbiAgICAgICAgICBpZiAodHlwZSA9PT0gJ2NvbXBvbmVudCcgJiYgKGNvbW1vblRhZ1JFLnRlc3QoaWQpIHx8IHJlc2VydmVkVGFnUkUudGVzdChpZCkpKSB7XG4gICAgICAgICAgICB3YXJuKCdEbyBub3QgdXNlIGJ1aWx0LWluIG9yIHJlc2VydmVkIEhUTUwgZWxlbWVudHMgYXMgY29tcG9uZW50ICcgKyAnaWQ6ICcgKyBpZCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0eXBlID09PSAnY29tcG9uZW50JyAmJiBpc1BsYWluT2JqZWN0KGRlZmluaXRpb24pKSB7XG4gICAgICAgICAgaWYgKCFkZWZpbml0aW9uLm5hbWUpIHtcbiAgICAgICAgICAgIGRlZmluaXRpb24ubmFtZSA9IGlkO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZpbml0aW9uID0gVnVlLmV4dGVuZChkZWZpbml0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm9wdGlvbnNbdHlwZSArICdzJ11baWRdID0gZGVmaW5pdGlvbjtcbiAgICAgICAgcmV0dXJuIGRlZmluaXRpb247XG4gICAgICB9XG4gICAgfTtcbiAgfSk7XG5cbiAgLy8gZXhwb3NlIGludGVybmFsIHRyYW5zaXRpb24gQVBJXG4gIGV4dGVuZChWdWUudHJhbnNpdGlvbiwgdHJhbnNpdGlvbik7XG59XG5cbmluc3RhbGxHbG9iYWxBUEkoVnVlKTtcblxuVnVlLnZlcnNpb24gPSAnMS4wLjI2JztcblxuLy8gZGV2dG9vbHMgZ2xvYmFsIGhvb2tcbi8qIGlzdGFuYnVsIGlnbm9yZSBuZXh0ICovXG5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgaWYgKGNvbmZpZy5kZXZ0b29scykge1xuICAgIGlmIChkZXZ0b29scykge1xuICAgICAgZGV2dG9vbHMuZW1pdCgnaW5pdCcsIFZ1ZSk7XG4gICAgfSBlbHNlIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nICYmIGluQnJvd3NlciAmJiAvQ2hyb21lXFwvXFxkKy8udGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdEb3dubG9hZCB0aGUgVnVlIERldnRvb2xzIGZvciBhIGJldHRlciBkZXZlbG9wbWVudCBleHBlcmllbmNlOlxcbicgKyAnaHR0cHM6Ly9naXRodWIuY29tL3Z1ZWpzL3Z1ZS1kZXZ0b29scycpO1xuICAgIH1cbiAgfVxufSwgMCk7XG5cbm1vZHVsZS5leHBvcnRzID0gVnVlO1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L3Z1ZS9kaXN0L3Z1ZS5jb21tb24uanNcbiAqKiBtb2R1bGUgaWQgPSAyMTdcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oKSB7IHRocm93IG5ldyBFcnJvcihcImRlZmluZSBjYW5ub3QgYmUgdXNlZCBpbmRpcmVjdFwiKTsgfTtcclxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAod2VicGFjaykvYnVpbGRpbi9hbWQtZGVmaW5lLmpzXG4gKiogbW9kdWxlIGlkID0gMjE4XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xyXG5cdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xyXG5cdH1cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gMjE5XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9